[{"tags": ["c++", "parameters", "operator-overloading", "conversion-operator"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462405342, "post_id": 37039912, "comment_id": 61629624, "body": "That&#39;s what constructors ar for."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1462405500, "post_id": 37039912, "comment_id": 61629686, "body": "A conversion operator cannot take an additional argument. How would you supply it? Your conversion function, OTOH, looks fine to me."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462407872, "post_id": 37039912, "comment_id": 61630258, "body": "@IntellectualKitty As mentioned, provide a constructor like <code>RGBAColor(const RGBColor &amp; rgb, float alpha = 1.0)</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1462408540, "post_id": 37039912, "comment_id": 61630437, "body": "@IntellectualKitty: &quot;<i>I&#39;d prefer to use a member function that takes a single parameter</i>&quot; - that is exactly what <code>ToRGBAColor()</code> is, eg: <code>RGBColor oldColor(...); ... RGBAColor newColor = oldColor.ToRGBAColor(someAlphaValu\u200c\u200be);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462408804, "post_id": 37040042, "comment_id": 61630524, "body": "<a href=\"http://stackoverflow.com/a/37040394/1413395\">Fleshed out a bit</a>, expecting critiques."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 293, "user_id": 6293180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krEmS.jpg?s=128&g=1", "display_name": "IntellectualKitty", "link": "https://stackoverflow.com/users/6293180/intellectualkitty"}, "edited": false, "score": 0, "creation_date": 1462439147, "post_id": 37040042, "comment_id": 61641086, "body": "@IntellectualKitty: You&#39;re asking how to do something by using a feature other than that which was created to do that thing. Can a conversion operator take a parameter? Of course it can. Otherwise what would it be converting? But you&#39;re trying to force a square peg through a round hole. Why? <i>&quot;I want to avoid [] littering my code with..&quot;</i> then don&#39;t litter your code. Write a constructor that is called like <code>RGBAColor(oldColor, someAlphaValue)</code>, or a member function <code>oldColor.changeAlpha(someAlphaValue)</code> that returns a new <code>RGBAColor</code> (warning: bad name; make clearer that it returns by value)."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 4, "last_activity_date": 1462406047, "creation_date": 1462406047, "answer_id": 37040042, "question_id": 37039912, "link": "https://stackoverflow.com/questions/37039912/c-conversion-operator-with-parameter/37040042#37040042", "title": "C++ conversion operator with parameter", "body": "<p>This is literally what constructors are for.</p>\n\n<p>Declare and define one.</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 293, "user_id": 6293180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krEmS.jpg?s=128&g=1", "display_name": "IntellectualKitty", "link": "https://stackoverflow.com/users/6293180/intellectualkitty"}, "edited": false, "score": 0, "creation_date": 1462443864, "post_id": 37040394, "comment_id": 61643981, "body": "@IntellectualKitty You can accept answers by clicking the big checkmark appearing at the left of it. You don&#39;t need to write your own answer to state that."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 2, "last_activity_date": 1462408760, "last_edit_date": 1462408760, "creation_date": 1462408433, "answer_id": 37040394, "question_id": 37039912, "link": "https://stackoverflow.com/questions/37039912/c-conversion-operator-with-parameter/37040394#37040394", "title": "C++ conversion operator with parameter", "body": "<p>There's no way to pass additional parameters to a cast operator. The syntax doesn't allow that.</p>\n\n<p>As mentioned in comments and in the other answer, provide an appropriate constructor instead:</p>\n\n<pre><code>struct RGB {\n    float r_;\n    float g_;\n    float b_;\n};\n\nstruct RGBA : RGB {\n    float alpha_;\n\n    RGBA(const RGB&amp; rgb) : RGB(rgb), alpha_(1.0) {}\n    RGBA(const RGB&amp; rgb, float alpha) : RGB(rgb), alpha_(alpha) {} // &lt;&lt;&lt;&lt;\n    RGBA&amp; operator=(const RGB&amp; rgb) {\n        *static_cast&lt;RGB*&gt;(this) = rgb;\n        alpha_ = 1.0;\n        return *this;\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 293, "user_id": 6293180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krEmS.jpg?s=128&g=1", "display_name": "IntellectualKitty", "link": "https://stackoverflow.com/users/6293180/intellectualkitty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1129, "favorite_count": 0, "accepted_answer_id": 37040394, "answer_count": 2, "score": -2, "last_activity_date": 1462411419, "creation_date": 1462405251, "question_id": 37039912, "link": "https://stackoverflow.com/questions/37039912/c-conversion-operator-with-parameter", "title": "C++ conversion operator with parameter", "body": "<p>Is there any way to define a conversion operator that takes a parameter?</p>\n\n<p>Here is my use case:</p>\n\n<pre><code>class RGBColor\n{\n    operator RGBAColor (const float alpha = 1.0) const noexcept;\n}\n</code></pre>\n\n<p>I have conversion operators to/from HSB and RGB colors, and RGBA to RGB (by dropping the alpha), but I'm having difficulty converting from RGB to RGBA since I need to the ability to supply the alpha as a parameter (rather than always defaulting to one).</p>\n\n<p>I assume that I'm going to have to fall back to something like:</p>\n\n<pre><code>RGBAColor ToRGBAColor (const float alpha = 1.0) const noexcept;\n</code></pre>\n\n<p>However, I would prefer to use standard C++ conversion, so I'm just wondering if there's any way to use a conversion operator that takes a parameter.</p>\n"}, {"tags": ["c++", "c++11", "random"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1462406238, "post_id": 37039682, "comment_id": 61629889, "body": "Downvoted for lack of research effort. One can hardly read any documentation on smth. like <code>mt19937</code> without learning what&#39;s wrong here, and searching for <i>&quot;Seed mt19937 C++&quot;</i> gives decent results with every search engine too."}, {"owner": {"reputation": 155, "user_id": 4903952, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/708495422629910/picture?type=large", "display_name": "Ritchie Shatter", "link": "https://stackoverflow.com/users/4903952/ritchie-shatter"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1462407394, "post_id": 37039682, "comment_id": 61630161, "body": "I was seeding mt19937 with different integers to see if anything would change. I accidentally posted that code here. I have fixed the code by seeding mt19937 with rd which is the intended implementation. std::random_device is a random seed is it not?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1462407600, "post_id": 37039682, "comment_id": 61630201, "body": "This doesn&#39;t even compile. And no, <code>std::random_device</code> is not a seed, although it can be used to get one. Please, go read some <a href=\"http://en.cppreference.com/w/cpp/numeric/random/mersenne_twister_engine\" rel=\"nofollow noreferrer\">docs</a>."}, {"owner": {"reputation": 155, "user_id": 4903952, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/708495422629910/picture?type=large", "display_name": "Ritchie Shatter", "link": "https://stackoverflow.com/users/4903952/ritchie-shatter"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1462408583, "post_id": 37039682, "comment_id": 61630455, "body": "I do apologize for leaving out the opening and closing parentheses after rd. It should compile now. I must also admit I have looked at that very link but was still left a bit confused, so I thought I&#39;d ask here since people usually are very helpful. Usually."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1462409096, "post_id": 37039682, "comment_id": 61630597, "body": "What&#39;s your system? MinGW&#39;s <code>random_device</code> is known to be broken."}, {"owner": {"reputation": 155, "user_id": 4903952, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/708495422629910/picture?type=large", "display_name": "Ritchie Shatter", "link": "https://stackoverflow.com/users/4903952/ritchie-shatter"}, "edited": false, "score": 0, "creation_date": 1462409691, "post_id": 37039682, "comment_id": 61630750, "body": "I&#39;m on windows using Qt creator with MinGW."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 4860467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f5fc0946849899cd9a5a7eda100b96?s=128&d=identicon&r=PG&f=1", "display_name": "mrthotep", "link": "https://stackoverflow.com/users/4860467/mrthotep"}, "is_accepted": false, "score": 1, "last_activity_date": 1462405845, "last_edit_date": 1495540780, "creation_date": 1462405845, "answer_id": 37040011, "question_id": 37039682, "link": "https://stackoverflow.com/questions/37039682/shuffle-deck-of-cards-using-stdrandom-device/37040011#37040011", "title": "Shuffle deck of cards using std::random_device", "body": "<p>You're using the same, simple seed. Read up on how to properly seed the PRNG: <a href=\"https://stackoverflow.com/questions/8395037/how-to-properly-seed-a-mersenne-twister-rng\">How to properly seed a mersenne twister RNG?</a></p>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 4903952, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/708495422629910/picture?type=large", "display_name": "Ritchie Shatter", "link": "https://stackoverflow.com/users/4903952/ritchie-shatter"}, "is_accepted": false, "score": 0, "last_activity_date": 1462409230, "creation_date": 1462409230, "answer_id": 37040499, "question_id": 37039682, "link": "https://stackoverflow.com/questions/37039682/shuffle-deck-of-cards-using-stdrandom-device/37040499#37040499", "title": "Shuffle deck of cards using std::random_device", "body": "<p>I decided to go with the following solution as it fulfills my general requirements. </p>\n\n<pre><code>vector&lt;string&gt; vect;\n\n    map&lt;string, int&gt;::const_iterator imap;\n    for (imap = cards.begin(); imap != cards.end(); imap++) {\n       vect.push_back(imap-&gt;first);\n    }\n\n    srand(std::time(0));\n    random_shuffle(vect.begin(), vect.end());\n\n    vector&lt;string&gt;::const_iterator ivect = vect.begin();\n    while (ivect != vect.end()) {\n        deck.push(*ivect);\n        ivect++;\n    }\n\n    std::copy(vect.begin(), vect.end(), std::ostream_iterator&lt;string&gt;(std::cout, \" \"));\n    std::cout &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Here I am using <code>std::random_suffle</code>and setting the seed with <code>srand(std::time(0));</code>. This allows for a unique sequence each time. </p>\n"}], "owner": {"reputation": 155, "user_id": 4903952, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/708495422629910/picture?type=large", "display_name": "Ritchie Shatter", "link": "https://stackoverflow.com/users/4903952/ritchie-shatter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "closed_date": 1462410301, "answer_count": 2, "score": -2, "last_activity_date": 1462409230, "creation_date": 1462403782, "last_edit_date": 1462408407, "question_id": 37039682, "link": "https://stackoverflow.com/questions/37039682/shuffle-deck-of-cards-using-stdrandom-device", "closed_reason": "Duplicate", "title": "Shuffle deck of cards using std::random_device", "body": "<p>I am trying to shuffle the contents of a <code>vector</code>. After the <code>vector</code> is sorted, the contents will be transferred into a queue. The queue represents the deck of cards. The issue I am having is that I continuously receive the same results even if I close the program. In fact I get the same sequence even after closing the IDE. In other words the cards are shuffled once and stay in that order no matter what. I have tried using this new method of randomizing contents before and had to resort to the old method. I hope to finally resolve this issue once and for all. If there is no way to accomplish this, my next question would be how to randomize the contents while still using <code>std::shuffle</code>. I have also tried <code>auto engine = std::default_random_engine{};</code> only to obtain the same results. Thanks. </p>\n\n<pre><code>    std::vector&lt;string&gt; v;\n\n    map&lt;string, int&gt;::const_iterator iter;\n    for (iter = cards.begin(); iter != cards.end(); iter++) {\n       v.push_back(iter-&gt;first);\n    }\n\n    std::random_device rd;\n    std::mt19937 g(rd());\n\n    //auto engine = std::default_random_engine{};\n    std::shuffle(v.begin(), v.end(), g);\n\n    std::copy(v.begin(), v.end(), std::ostream_iterator&lt;string&gt;(std::cout, \" \"));\n    std::cout &lt;&lt; \"\\n\";\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1462403734, "post_id": 37039645, "comment_id": 61629116, "body": "That&#39;s not a problem with linking. That&#39;s a problem with you not including the header files."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1462403821, "post_id": 37039645, "comment_id": 61629141, "body": "That&#39;s normal, in main.cpp you aren&#39;t including book.hpp and magazine.hpp, where Magazine and Book are declared."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1462403918, "post_id": 37039645, "comment_id": 61629172, "body": "this answer was simple, but for future posts, please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (with emphasis on the <b>minimal</b> part)"}, {"owner": {"reputation": 4253, "user_id": 972240, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4CIP1.png?s=128&g=1", "display_name": "gevorg", "link": "https://stackoverflow.com/users/972240/gevorg"}, "edited": false, "score": 0, "creation_date": 1462404560, "post_id": 37039645, "comment_id": 61629371, "body": "Too much text is written just for few missing includes."}, {"owner": {"reputation": 71, "user_id": 6293051, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/6a02a425b306aa814f65f60ac1b2960f?s=128&d=identicon&r=PG&f=1", "display_name": "gawron103", "link": "https://stackoverflow.com/users/6293051/gawron103"}, "edited": false, "score": 0, "creation_date": 1462405590, "post_id": 37039645, "comment_id": 61629714, "body": "Whoa!  Thank&#39;s for so fast answers. I feel ashamed for such stupid mistake.... but however now I got warning message in book.hpp that says exactly the same       Magazine add_book_to_the_magazine;      Magazine delete_book_from_the_magazine;  Also excuse for such an a long text, I promise to do it better next time!"}], "answers": [{"tags": [], "owner": {"reputation": 781, "user_id": 3802059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00bc9b09003456393fe147dce385b444?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/3802059/ian"}, "is_accepted": false, "score": 1, "last_activity_date": 1462403775, "creation_date": 1462403775, "answer_id": 37039681, "question_id": 37039645, "link": "https://stackoverflow.com/questions/37039645/c-mistakes-with-linking-virtual-function/37039681#37039681", "title": "C++ mistakes with linking virtual function", "body": "<p>You need to include the book.hpp and magazine.hpp at the top of main.cpp:</p>\n\n<pre><code>#include \"magazine.hpp\"\n#include \"book.hpp\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 6201102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dc69fa2d14b3eb415497ccfe399b581?s=128&d=identicon&r=PG&f=1", "display_name": "overflowingstack", "link": "https://stackoverflow.com/users/6201102/overflowingstack"}, "is_accepted": false, "score": 0, "last_activity_date": 1462403800, "creation_date": 1462403800, "answer_id": 37039683, "question_id": 37039645, "link": "https://stackoverflow.com/questions/37039645/c-mistakes-with-linking-virtual-function/37039683#37039683", "title": "C++ mistakes with linking virtual function", "body": "<p>Your main.cpp does not include magazine.hpp and book.hpp.</p>\n"}], "owner": {"reputation": 71, "user_id": 6293051, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/6a02a425b306aa814f65f60ac1b2960f?s=128&d=identicon&r=PG&f=1", "display_name": "gawron103", "link": "https://stackoverflow.com/users/6293051/gawron103"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1462405429, "creation_date": 1462403507, "last_edit_date": 1462405429, "question_id": 37039645, "link": "https://stackoverflow.com/questions/37039645/c-mistakes-with-linking-virtual-function", "title": "C++ mistakes with linking virtual function", "body": "<p>I got a weird problem with C++. Well, I tried to write an a simple program on seven separated files. Everything was going well, until an error occurred which caused that I can't go any further. Can someone tell what have I done wrong ?</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"item.hpp\"\nusing namespace std;\n\nint main()\n{\n\nint x;\nMagazine some_magazine;\nBook some_book;\n\nItem *wsk_instr;\n\ncout &lt;&lt; \"Witamy w ksiegarni\" &lt;&lt; endl &lt;&lt; endl;\ncout &lt;&lt; \"Wcisnij 1 aby kupic ksiazke\" &lt;&lt; endl;\ncout &lt;&lt; \"Wcisnij 2 aby sprzedac ksiazke\" &lt;&lt; endl;\ncout &lt;&lt; \"Wcisnij 3 aby zobaczyc jakie ksiazki mamy\" &lt;&lt; endl;\ncin &gt;&gt; x;\n\nswitch (x)\n{\n    case 1:\n        cout &lt;&lt; \"Kup ksiazke\" &lt;&lt;endl;\n        wsk_instr = &amp;some_magazine;\n        wsk_instr -&gt; show();\n        cout &lt;&lt; \"Ktora ksiazke chcesz kupic?\" &lt;&lt; endl;\n        cout &lt;&lt; \"Ksiazka pierwsza - 1, ksiazka druga - 2, ksiazka trzecia - 3\" &lt;&lt; endl;\n        wsk_instr = &amp;some_book;\n        wsk_instr -&gt; sell();\n        break;\n\n    case 2:\n        cout &lt;&lt; \"Sprzedaj ksiazke\" &lt;&lt; endl;\n        cout &lt;&lt; \"Jaka ksiazke chcesz sprzeda\u0107? Podaj tytul:\\t\";\n        wsk_instr = &amp;some_book;\n        wsk_instr -&gt; buy();\n        break;\n\n    case 3:\n        cout &lt;&lt; \"Pokaz co mamy na stanie\" &lt;&lt; endl;\n        wsk_instr = &amp;some_magazine;\n        wsk_instr -&gt; show();\n        break;\n\n    default:\n        cout &lt;&lt; \"Nie wybrales nic\" &lt;&lt; endl;\n        break;\n}\n}    \n</code></pre>\n\n<p>item.cpp &amp; item.hpp</p>\n\n<pre><code>item.cpp\n#include &lt;iostream&gt;\n\nvoid buy() {};\nvoid sell() {};\nvoid show() {};\n\nitem.hpp\n#ifndef item_hpp\n#define item_hpp\n\nclass Item {\npublic:\nvoid virtual buy();\nvoid virtual sell();\nvoid virtual show();\n};\n#endif /* item_h */\n</code></pre>\n\n<p>magazine.cpp &amp; magazine.hpp</p>\n\n<pre><code>magazine.cpp\n#include &lt;iostream&gt;\n#include \"magazine.hpp\"\n#include \"book.hpp\"\n\n//dodawanie elementu na koniec wektora\nvoid Magazine::add() {\nstd::cout &lt;&lt; \"Jaka ksiazke chcesz sprzeda\u0107? Podaj tytul:\\t\";\nstd::string book_title;\nstd::cin &gt;&gt; book_title;\ntable_of_books.push_back(book_title);\n}\n\n//usuwanie ostatniego elementu wektora\nvoid Magazine::remove() {\nstd::cout &lt;&lt; \"Ktora ksiazke chcesz kupic? Podaj numer:\\t\";\nint choose;\nstd::cin &gt;&gt; choose;\ntable_of_books.erase(table_of_books.begin() + choose);\n}\n\n//pokazywanie wielkosci wektora (ilosci elementow w nim)\nvoid Magazine::show() {\nstd::cout &lt;&lt; \"W magazynie jest: \" &lt;&lt; table_of_books.size() &lt;&lt; \" ksiazek. A oto one:\" &lt;&lt; std::endl;\n//wyswietlanie wszystkich ksiazek jakie sa w wektorze\nfor(int counter = 0; counter &lt; table_of_books.size(); counter ++) {\n    std::cout &lt;&lt; table_of_books[counter] &lt;&lt; std::endl;\n    }    \n}\n\n\nmagazine.hpp\n#ifndef magazine_hpp\n#define magazine_hpp\n#include &lt;vector&gt;\n#include \"item.hpp\"\n#include \"book.hpp\"\n\nclass Magazine : public Item {\nstd::vector &lt;std::string&gt; table_of_books { \"Potop\", \"Zemsta\", \"Dziady\", };\n\npublic:\nvoid add();\nvoid remove();\nvoid show();\n};\n#endif /* magazine_hpp */\n</code></pre>\n\n<p>book.cpp &amp; book.hpp</p>\n\n<pre><code>book.cpp\n#include &lt;iostream&gt;\n#include \"book.hpp\"\n#include \"magazine.hpp\"\n\nvoid Book::buy() {\nadd_book_to_the_magazine.add();\n}\n\nvoid Book::sell() {\ndelete_book_from_the_magazine.remove();\n}\n\nbook.hpp\n#ifndef book_hpp\n#define book_hpp\n#include \"item.hpp\"\n#include \"magazine.hpp\"\n\nclass Book : public Item {\n\nMagazine add_book_to_the_magazine;\nMagazine delete_book_from_the_magazine;\n\nvoid buy();\nvoid sell();\n};\n\n#endif /* book_hpp */\n</code></pre>\n\n<p>My problem is with these two lines:</p>\n\n<p>main.cpp</p>\n\n<pre><code>Magazine some_magazine;\nBook some_book;\n</code></pre>\n\n<p>Xcode says that: unknown type name 'Magazine' and 'Book'. Sounds like there is a problem with linking? But class magazine and class book are set to public for class item. So, what's the problem?   </p>\n"}, {"tags": ["c++", "opengl", "texture-mapping"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 2, "creation_date": 1462402726, "post_id": 37039471, "comment_id": 61628824, "body": "what have you already searched and haven&#39;t you found?  Also, how do you know that there are only those two possibilities?   It would be more interesting if you asked something about the problem you are trying to solve that is dependent on a specific behavior."}, {"owner": {"reputation": 25, "user_id": 6258891, "user_type": "registered", "profile_image": "https://graph.facebook.com/473467986190739/picture?type=large", "display_name": "mallahyk", "link": "https://stackoverflow.com/users/6258891/mallahyk"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1462403016, "post_id": 37039471, "comment_id": 61628914, "body": "I&#39;m preparing a background chapter in my thesis and i wanted to add the type of texture mapping that OpenGL uses"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1462403145, "post_id": 37039471, "comment_id": 61628949, "body": "I would guess that it&#39;s not defined.  You want to allow flexibility in compliant hardware/software combinations as well as not hamstring yourself with respect to forthcoming technologies.  If that assumption is correct, you would have to find the particular implementation of the driver you&#39;re interested in - which would probably be determined by the hardware on the device the driver is supporting."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1462403549, "post_id": 37039471, "comment_id": 61629057, "body": "That is a guess -- I take no responsibility for your thesis defense going poorly."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 3, "creation_date": 1462409189, "post_id": 37039471, "comment_id": 61630627, "body": "&quot;<i>forward (point-to-point) and inverse (area-to-area) mapping</i>&quot; ... what do &quot;point&quot; and &quot;area&quot; refer to in this context?"}], "answers": [{"tags": [], "owner": {"reputation": 24448, "user_id": 19104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8720289444c77047c986102192da5edc?s=128&d=identicon&r=PG", "display_name": "joeld", "link": "https://stackoverflow.com/users/19104/joeld"}, "is_accepted": true, "score": 2, "last_activity_date": 1527548978, "creation_date": 1527548978, "answer_id": 50574369, "question_id": 37039471, "link": "https://stackoverflow.com/questions/37039471/does-texture-mapping-in-opengl-follows-the-forward-texture-mapping-of-the-invers/50574369#50574369", "title": "Does texture mapping in openGL follows the forward texture mapping of the inverse method?", "body": "<p>It uses the \"inverse\" approach. Texture coordinates are rasterized (into fragments) and those are looked up per-fragment.</p>\n"}], "owner": {"reputation": 25, "user_id": 6258891, "user_type": "registered", "profile_image": "https://graph.facebook.com/473467986190739/picture?type=large", "display_name": "mallahyk", "link": "https://stackoverflow.com/users/6258891/mallahyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 50574369, "answer_count": 1, "score": 1, "last_activity_date": 1527548978, "creation_date": 1462402615, "question_id": 37039471, "link": "https://stackoverflow.com/questions/37039471/does-texture-mapping-in-opengl-follows-the-forward-texture-mapping-of-the-invers", "title": "Does texture mapping in openGL follows the forward texture mapping of the inverse method?", "body": "<p>I've recently read that there are 2 types of texture mapping: forward (point-to-point) and inverse (area-to-area) mapping. Which one of them does OpenGL follows in the mapping process ?</p>\n"}, {"tags": ["c++", "multithreading", "logging", "service", "keylogger"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 3, "creation_date": 1462402495, "post_id": 37039387, "comment_id": 61628745, "body": "<code>kbhit</code> and <code>getch</code> read things that users type into <b>your program&#39;s console window</b>. As a service, your program doesn&#39;t have a console window."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1462404157, "post_id": 37039387, "comment_id": 61629240, "body": "<code>WaitForSingleObject(g_ServiceStopEvent, 0) != WAIT_OBJECT_0</code> is a bit heavyweight for something that could just be a test of a thread-safe boolean. <code>while (not terminated)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6293084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67d668d1b525eab76bc66d991e11da04?s=128&d=identicon&r=PG&f=1", "display_name": "ACpp8165b", "link": "https://stackoverflow.com/users/6293084/acpp8165b"}, "edited": false, "score": 0, "creation_date": 1462474437, "post_id": 37040129, "comment_id": 61663238, "body": "Alright, thanks, since that is the case I will just cave and use a hook."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1462406553, "creation_date": 1462406553, "answer_id": 37040129, "question_id": 37039387, "link": "https://stackoverflow.com/questions/37039387/basic-key-logging-service-fails-to-log-keys-in-worker-thread/37040129#37040129", "title": "Basic key logging service fails to log keys in worker thread", "body": "<blockquote>\n  <p>I want to log keys without using hooks however.</p>\n</blockquote>\n\n<p>Sorry, but in a service, you <em>have</em> to use a keyboard hook, otherwise it cannot detect user input since it is a non-visual process running in the background.  There is nothing for the user to type into that is directly associated with the service.</p>\n"}], "owner": {"reputation": 11, "user_id": 6293084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67d668d1b525eab76bc66d991e11da04?s=128&d=identicon&r=PG&f=1", "display_name": "ACpp8165b", "link": "https://stackoverflow.com/users/6293084/acpp8165b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 37040129, "answer_count": 1, "score": -1, "last_activity_date": 1462406553, "creation_date": 1462402189, "question_id": 37039387, "link": "https://stackoverflow.com/questions/37039387/basic-key-logging-service-fails-to-log-keys-in-worker-thread", "title": "Basic key logging service fails to log keys in worker thread", "body": "<p>recently I have attempted to try my hand at programming services starting with a simple key logger. The original code is very crude however it works granted the current window is focused. The problem started when I attempted to alleviate this issue by adding the logger to a service. I want to log keys without using hooks however. Here is the worker thread:</p>\n\n<pre><code>    DWORD WINAPI ServiceWorkerThread(LPVOID lpParam){\n    std::ofstream           File(\"Info.txt\");\n    char                    C = 0;\n    // Periodically check if the service has been requested to stop\n    while (WaitForSingleObject(g_ServiceStopEvent, 0) != WAIT_OBJECT_0){\n        if(kbhit()){\n            C = getch();\n            File.open(\"Info.txt\", std::fstream::out | std::fstream::app);\n            File &lt;&lt; C;\n            File.close();\n            Sleep(100);\n            //The thread needs to sleep so that it won't eat CPU\n            //Additionally people cannot type as fast as a computer can process data\n        }\n    }\n    return ERROR_SUCCESS;\n}\n</code></pre>\n\n<p>All the other code just starts and handles the service.</p>\n"}, {"tags": ["c++", "c++11", "for-loop", "constants", "rvalue-reference"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 3, "creation_date": 1462401327, "post_id": 37039198, "comment_id": 61628382, "body": "Are there any cases where <code>const &amp;&amp;</code> makes sense <i>anywhere</i>?"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1462401541, "post_id": 37039198, "comment_id": 61628460, "body": "@immibis I know of <a href=\"http://en.cppreference.com/w/cpp/utility/functional/ref\" rel=\"nofollow noreferrer\">one</a>"}, {"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "edited": false, "score": 0, "creation_date": 1462402173, "post_id": 37039198, "comment_id": 61628640, "body": "I was interested to the particular context of range-for. I saw <code>const auto &amp;&amp;</code> used in a range-for in <a href=\"https://blogs.msdn.microsoft.com/larryosterman/2015/11/16/recursively-deleting-a-directorywith-long-filename-support/\" rel=\"nofollow noreferrer\">this code</a> and was curious about it. Instead of <code>for (const auto &amp;&amp; it : dl)</code> I&#39;d just have used <code>for (const auto &amp; ...)</code>, for <i>observing</i> items."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462401804, "post_id": 37039254, "comment_id": 61628517, "body": "Well, you are guaranteed to prevent elements being modified - but if that is desired, simple const reference would be more straitghtforward."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1462401896, "post_id": 37039254, "comment_id": 61628551, "body": "@SergeyA the only reason you would use rvalue references is if you wish to effectively move from them."}, {"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "edited": false, "score": 0, "creation_date": 1462403861, "post_id": 37039254, "comment_id": 61629154, "body": "Your answer seems to confirm what I thought, i.e. there are no valid uses of <code>const auto &amp;&amp;</code> in range-for loops. I&#39;m marking it as answer, unless some new interesting idea shows up in another answer."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 1, "creation_date": 1462404454, "post_id": 37039254, "comment_id": 61629341, "body": "Can you explain, why this isn&#39;t a forwarding/universal reference?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 1, "creation_date": 1462407668, "post_id": 37039254, "comment_id": 61630218, "body": "@MikeMB because only <code>T&amp;&amp;</code>  where <code>T</code> is deduced (or <code>auto&amp;&amp;</code>) is an fowarding reference. see <a href=\"https://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers\" rel=\"nofollow noreferrer\">isocpp.org/blog/2012/11/&hellip;</a>"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1462428925, "post_id": 37039254, "comment_id": 61635951, "body": "Good to know I forgot that const is enough to turn it into a r-value reference."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 9, "last_activity_date": 1462411555, "last_edit_date": 1495540357, "creation_date": 1462401513, "answer_id": 37039254, "question_id": 37039198, "link": "https://stackoverflow.com/questions/37039198/applications-of-const-in-range-for/37039254#37039254", "title": "Applications of const&amp;&amp; in range-for?", "body": "<p>Short answer: <strong>no</strong>, there are no uses for <code>const auto&amp;&amp;</code> in <code>range-for loops</code> (or otherwise)</p>\n\n<p>You would use <code>rvalue references</code> if you wish to move objects in an optimized manner. You can't do that (in general) unless you can modify the object moved from. So <code>const rvalues</code> (*) are of no practical use (you can't move from them because you can't modify them).</p>\n\n<p><code>range-for loops</code> don't bring anything to the table in this discussion about <code>const auto&amp;&amp;</code>.</p>\n\n<hr>\n\n<p>Check for instance this SO post: <a href=\"https://stackoverflow.com/questions/4938875/do-rvalue-references-to-const-have-any-use\">Do rvalue references to const have any use?</a></p>\n\n<p>The only found use of const rvalue reference is to delete some function overloads. This doesn't apply to <code>range-for loops</code>.</p>\n\n<hr>\n\n<p>(*) by the way, <code>const auto&amp;&amp;</code> is a const rvalue reference, not a forwarding reference.</p>\n"}], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 37039254, "answer_count": 1, "score": 14, "last_activity_date": 1462552328, "creation_date": 1462401275, "last_edit_date": 1462552328, "question_id": 37039198, "link": "https://stackoverflow.com/questions/37039198/applications-of-const-in-range-for", "title": "Applications of const&amp;&amp; in range-for?", "body": "<p>Are there any cases in which it does make sense to use <code>const&amp;&amp;</code> in range-for loops?</p>\n\n<pre><code>for (const auto &amp;&amp; x : c) // ?\n</code></pre>\n"}, {"tags": ["c++", "mysql", "deadlock", "cout"], "comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1462400287, "post_id": 37038993, "comment_id": 61628040, "body": "Suggestion: add a <code>&#39;\\n&#39;</code> at the end of <code>&quot;vertices&quot;</code> and try again."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1462400351, "post_id": 37038993, "comment_id": 61628060, "body": "Output is buffered until you print a newline. So it&#39;s probably stuck in <code>generateGraphs</code>. Using a debugger would have told you that."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1462400366, "post_id": 37038993, "comment_id": 61628063, "body": "I suppose that the problem is in <code>generateGraphs()</code>; could you show it?"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1462400384, "post_id": 37038993, "comment_id": 61628069, "body": "<code>&lt;&lt; &quot;Generating all graphs on &quot; &lt;&lt; n &lt;&lt; &quot; vertices&quot;;</code> doesn&#39;t flush the stream so it is locking up in generateGraphs(n);  To see that use this: <code>&lt;&lt; &quot;Generating all graphs on &quot; &lt;&lt; n &lt;&lt; &quot; vertices&quot; &lt;&lt; endl;</code>   You could always single step the generateGraphs() function with your debugger to see what is happening."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 1, "creation_date": 1462400437, "post_id": 37038993, "comment_id": 61628084, "body": "@max66  adding a \\n won&#39;t make the text display will it?  You need to flush the stream with endl don&#39;t you?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 1, "creation_date": 1462400846, "post_id": 37038993, "comment_id": 61628224, "body": "@Jerry Jeremiah: you&#39;re right: only <code>std::endl</code> ensure the flush of the stream; I always mix-up with <code>\\n</code> and <code>std::endl</code>"}, {"owner": {"reputation": 85, "user_id": 6293001, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ea0ba4b3d95165c1ea22aa0366a0c9dc?s=128&d=identicon&r=PG&f=1", "display_name": "triggdev", "link": "https://stackoverflow.com/users/6293001/triggdev"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1462402804, "post_id": 37038993, "comment_id": 61628855, "body": "@Barmar Yup. You were right.  Turns out I accidentally removed the exit case in the recursive method in generateGraphs."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1462409589, "post_id": 37038993, "comment_id": 61630717, "body": "For future reference, a deadlock would have got your code stuck with 0% CPU."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1462461121, "post_id": 37038993, "comment_id": 61655273, "body": "@triggdev That should have eventually produced a stack overflow, unless it&#39;s tail-recursive and you compiled with optimization."}], "owner": {"reputation": 85, "user_id": 6293001, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ea0ba4b3d95165c1ea22aa0366a0c9dc?s=128&d=identicon&r=PG&f=1", "display_name": "triggdev", "link": "https://stackoverflow.com/users/6293001/triggdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462400575, "creation_date": 1462400115, "last_edit_date": 1462400575, "question_id": 37038993, "link": "https://stackoverflow.com/questions/37038993/c-program-freezes-with-100-cpu-in-the-middle-of-cout-statement", "title": "C++ program freezes with 100% CPU in the middle of cout statement", "body": "<p>I'm writing a simple graph generator that stores the graphs in a MySQL database.</p>\n\n<p>Here's the output:</p>\n\n<blockquote>\n  <p>Connecting to database...Success! </p>\n  \n  <p>Checking for unfinished vertices...Completed last n = 7 </p>\n  \n  <p>Creating n8 table...Success!</p>\n</blockquote>\n\n<p>Notice it doesn't print \"Generating...\" which is part of the same statement. It freezes just like this with 100% CPU. The table does actually get created in the database.</p>\n\n<p>Also, If I start from n = 1, it runs until n7 and then freezes.</p>\n\n<p>Here's the code (not the entire thing, just this part):</p>\n\n<pre><code>int main()\n{\n  int n = 0;\n  if (initialize(n)) {\n    int limit = 8;\n    if (limit &gt;= n) {\n      for (; n &lt;= limit; n++) {\n        stringstream qs;\n        qs &lt;&lt; \"CREATE TABLE n\" &lt;&lt; n &lt;&lt; \" (idbin TEXT(\"\n           &lt;&lt; getLengthOfBinaryByN(n) &lt;&lt; \") NOT NULL,vertices INT NOT NULL)\";\n        cout &lt;&lt; \"Creating n\" &lt;&lt; n &lt;&lt; \" table...\";\n        if (runQuery(qs.str())) {\n          cout &lt;&lt; \"Success!\" &lt;&lt; endl\n               &lt;&lt; \"Generating all graphs on \" &lt;&lt; n &lt;&lt; \" vertices\";\n\n          generateGraphs(n);\n        } else {\n          cout &lt;&lt; \"Failed!\" &lt;&lt; endl;\n        }\n      }\n    } else {\n      cout &lt;&lt; \"ERROR: Must be greater than or equal to \" &lt;&lt; n &lt;&lt; endl;\n      return 1;\n    }\n  }\n  return 0;\n}\n</code></pre>\n\n<p>After some research I found that a \"deadlock\" may be occurring, but I have no idea how to fix that. Any ideas?</p>\n\n<p>Here's the runQuery function if that helps:</p>\n\n<pre><code>/*\n  runQuery: runs the sql query, assumes that database connected successfully\n  Parameters: query\n  returns a bool\n*/\nbool runQuery(string query)\n{\n  try {\n    stmt = con-&gt;createStatement();\n    res = stmt-&gt;executeQuery(query);\n    delete stmt;\n  } catch (sql::SQLException &amp;e) {\n    if (e.getErrorCode() != 0 &amp;&amp; e.getErrorCode() != 1050) {\n      cout &lt;&lt; \"# ERR: SQLException in \" &lt;&lt; __FILE__\n           &lt;&lt; \"(\" &lt;&lt; __FUNCTION__ &lt;&lt; \") on line \" &lt;&lt; __LINE__ &lt;&lt; endl\n           &lt;&lt; \"# ERR: \" &lt;&lt; e.what()\n           &lt;&lt; \" (MySQL error code: \" &lt;&lt; e.getErrorCode()\n           &lt;&lt; \", SQLState: \" &lt;&lt; e.getSQLState() &lt;&lt; \" )\" &lt;&lt; endl;\n      return false;\n    }\n    return true;\n  }\n  return true;\n}\n</code></pre>\n"}, {"tags": ["c++", "serialization", "binaryfiles"], "comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 6, "creation_date": 1462399815, "post_id": 37038909, "comment_id": 61627863, "body": "Be carefule.  You can&#39;t write a struct that contains std::string to a file by writing the struct.  It works for int because they are stored in the struct but std::string has a pointer to dynamically allocated memory that is stored outside the struct."}, {"owner": {"reputation": 65, "user_id": 6292675, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329769593704863/picture?type=large", "display_name": "Nikolay Tashev", "link": "https://stackoverflow.com/users/6292675/nikolay-tashev"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1462400411, "post_id": 37038909, "comment_id": 61628078, "body": "okay, do i need to change the strings with something else?"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 1, "creation_date": 1462401329, "post_id": 37038909, "comment_id": 61628384, "body": "No, you just need a write() and read() function in each struct that writes and reads the struct&#39;s contents from the stream because the struct knows whether it&#39;s members are stored in the struct (like int) or outside the struct (like std::string).  I will make an answer...."}], "answers": [{"tags": [], "owner": {"reputation": 902, "user_id": 5874704, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Uni7M.jpg?s=128&g=1", "display_name": "A.Fagrell", "link": "https://stackoverflow.com/users/5874704/a-fagrell"}, "is_accepted": false, "score": 0, "last_activity_date": 1462403597, "last_edit_date": 1495542231, "creation_date": 1462403597, "answer_id": 37039654, "question_id": 37038909, "link": "https://stackoverflow.com/questions/37038909/c-read-write-class-from-to-binary-file/37039654#37039654", "title": "c++ Read/Write class from/to binary file", "body": "<p>What you are looking for is to serialize your classes/data that should be saved to file. There are several libraries that has been optimized regarding time and memory consumption for this. Would you mind using a 3rd party library? </p>\n\n<p>If not, have a look at for example <a href=\"http://www.boost.org/doc/libs/1_60_0/libs/serialization/doc/\" rel=\"nofollow noreferrer\">boost serialization</a>, <a href=\"https://github.com/USCiLab/cereal\" rel=\"nofollow noreferrer\">cereal</a> or maybe even Google's <a href=\"https://developers.google.com/protocol-buffers/docs/overview\" rel=\"nofollow noreferrer\">ProtoBuf</a>. I recon Cereal is a good start if you are using C++11.</p>\n\n<p>If you'd like to write your own serialization you'd have to consider that for every object that has a dynamic size (such as a string), you will also need to save the object's size to the file. For more info please have a look here:</p>\n\n<p><a href=\"https://stackoverflow.com/a/11003590/5874704\">https://stackoverflow.com/a/11003590/5874704</a></p>\n"}, {"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 1, "last_activity_date": 1462404926, "creation_date": 1462404926, "answer_id": 37039867, "question_id": 37038909, "link": "https://stackoverflow.com/questions/37038909/c-read-write-class-from-to-binary-file/37039867#37039867", "title": "c++ Read/Write class from/to binary file", "body": "<p>It's not easy to reproduce the error, due to your large source code and missing data file. But a quick inspection shows that you read and write the binary data using bloc operations:  </p>\n\n<pre><code>    Triangle trig; \n    ...\n    File.read((char*)&amp;trig, sizeof(Triangle));\n</code></pre>\n\n<p>Unfortunately this kind of approach only works if the object you want to save/load is of a class that is <a href=\"http://en.cppreference.com/w/cpp/types/is_trivially_copyable\" rel=\"nofollow\">trivially copyable</a>, as the following code will demonstrate:  </p>\n\n<pre><code>if (is_trivially_copyable&lt;Triangle&gt;::value) \n    cout &lt;&lt; \"Triangle is  trivially copyable\" &lt;&lt; endl; \nelse cout &lt;&lt; \"Triangle is not trivially copyable\" &lt;&lt; endl; \n</code></pre>\n\n<p>So you'll have to serialize the object content writing field by field instead of using a bloc operation.  This <a href=\"https://isocpp.org/wiki/faq/serialization#serialize-selection\" rel=\"nofollow\">FAQ on serialization</a> should help you to consider the alternatives.</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 6292675, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329769593704863/picture?type=large", "display_name": "Nikolay Tashev", "link": "https://stackoverflow.com/users/6292675/nikolay-tashev"}, "edited": false, "score": 0, "creation_date": 1462614592, "post_id": 37040044, "comment_id": 61718133, "body": "I made it by your way and it works correctly now. Thanks a lot for the help!"}], "tags": [], "owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "is_accepted": false, "score": 6, "last_activity_date": 1462406051, "creation_date": 1462406051, "answer_id": 37040044, "question_id": 37038909, "link": "https://stackoverflow.com/questions/37038909/c-read-write-class-from-to-binary-file/37040044#37040044", "title": "c++ Read/Write class from/to binary file", "body": "<p>The answer depends on whether you are just doing this to learn how files work or whether saving to the file is just incidental and you don't care how it works.</p>\n\n<p>If you just want to get the stuff to save and restore and you don't care how it works then use a third party library.  There are many many of them.  </p>\n\n<p>If you want to learn how to read and write things to files then you will need to make your own read and write functions.  I have made a sample program that will explain how it works:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nclass Point\n{\nprivate:\n    int x;\n    int y;\npublic:\n    Point():x(0),y(0){}\n    Point(int x,int y):x(x),y(y){}\n\n    void write(std::ostream&amp; f)\n    {\n        // We can just write out the bytes for x and y because\n        // they are primitive types stored in the class\n        f.write( (char*)&amp;x, sizeof(x) );\n        f.write( (char*)&amp;y, sizeof(y) );\n    }\n    void read(std::istream&amp; f)\n    {\n        // We can just read the bytes directly into x and y because\n        // they are primitive types stored in the class\n        f.read( (char*)&amp;x, sizeof(x) );\n        f.read( (char*)&amp;y, sizeof(y) );\n    }\n};\n\nclass Figure\n{\nprivate:\n    std::string name;\n    std::string type;\npublic:\n    Figure(){}\n    Figure(std::string name,std::string type):name(name),type(type){}\n\n    void write(std::ostream&amp; f)\n    {\n        size_t size;\n\n        // we need to store the data from the string along with the size\n        // because to restore it we need to temporarily read it somewhere\n        // before storing it in the std::string (istream::read() doesn't\n        // read directly to std::string)\n\n        size = name.size();\n        f.write( (char*)&amp;size, sizeof(size_t) );\n        f.write( (char*)name.c_str(), size );\n\n        size = type.size();\n        f.write( (char*)&amp;size, sizeof(size_t) );\n        f.write( (char*)type.c_str(), size );\n    }\n    void read(std::istream&amp; f)\n    {\n        size_t size;\n        char *data;\n\n        // when we read the string data we need somewhere to store it\n        // because we std::string isn't a primitive type.  So we read\n        // the size, allocate an array, read the data into the array,\n        // load the std::string, and delete the array\n\n        f.read( (char*)&amp;size, sizeof(size) );\n        data = new char[size+1];\n        f.read( data, size );\n        data[size]='\\0';\n        name = data;\n        delete data;\n\n        f.read( (char*)&amp;size, sizeof(size) );\n        data = new char[size+1];\n        f.read( data, size );\n        data[size]='\\0';\n        type = data;\n        delete data;\n    }\n};\n\nclass Triangle: public Figure\n{\nprivate:\n    Point p1, p2, p3;\npublic:\n    Triangle(){}\n    Triangle(Point x,Point y,Point z,Figure f):p1(x),p2(y),p3(z),Figure(f){}\n\n\n    void write(std::ostream&amp; f)\n    {\n        // First write the base class then write the members of this class\n        Figure::write(f);\n        p1.write(f);\n        p2.write(f);\n        p3.write(f);\n    }\n    void read(std::istream&amp; f)\n    {\n        // First read the base class then read the members of this class\n        Figure::read(f);\n        p1.read(f);\n        p2.read(f);\n        p3.read(f);\n    }\n};\n\nclass BinaryFile\n{\nprivate:\n    std::string FileName;\n    std::fstream File;\npublic:\n    BinaryFile(std::string FileName) : FileName(FileName) {};\n    void WriteTriangle()\n    {\n        File.open(FileName, std::ios::binary | std::ios::out);\n        if(!File)\n        {\n            std::cerr&lt;&lt;\"File error &lt;\"&lt;&lt;FileName&lt;&lt;\"&gt;\\n\";\n            exit(1);\n        }\n        Triangle trig({1,2},{3,4},{5,6},{\"name\",\"type\"}); // something new\n        trig.write(File);\n        File.close();\n    }\n\n    Triangle ReadTriangle()\n    {\n        File.open(FileName, std::ios::binary | std::ios::in);\n        if(!File)\n        {\n            std::cerr&lt;&lt;\"File error &lt;\"&lt;&lt;FileName&lt;&lt;\"&gt;\\n\";\n            exit(1);\n        }\n        Triangle trig; // default values\n        trig.read(File);\n        File.close();\n        return trig;\n    }\n};\n\nmain()\n{\n    BinaryFile bin(\"file.bin\");\n    bin.WriteTriangle();\n    Triangle trig = bin.ReadTriangle();\n    // at this point trig has the values we stored\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 6292675, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329769593704863/picture?type=large", "display_name": "Nikolay Tashev", "link": "https://stackoverflow.com/users/6292675/nikolay-tashev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10004, "favorite_count": 1, "answer_count": 3, "score": 6, "last_activity_date": 1462614420, "creation_date": 1462399649, "last_edit_date": 1462404982, "question_id": 37038909, "link": "https://stackoverflow.com/questions/37038909/c-read-write-class-from-to-binary-file", "title": "c++ Read/Write class from/to binary file", "body": "<p>I need to write a class to a binary file, and then I need to read it back.</p>\n\n<p>I have <code>Triangle</code> and <code>BinaryFile</code> classes, and some other classes. I am not sure if I am writing incorrectly or reading incorrectly. An error occurs when reading.  After debugging, I think that it gets inappropriate data for my private variables. I will be very glad if someone can give me some advice on how to make it work properly.</p>\n\n<p>I wasn't sure if I should paste the whole code or not, so I will give you a short snippet of code.  Just in case, here is a download link for my source code:</p>\n\n<p><a href=\"https://my.pcloud.com/publink/show?code=XZJ7CYZbsLWLglqV5p83csijcEUTFqqpM3k\" rel=\"nofollow\">https://my.pcloud.com/publink/show?code=XZJ7CYZbsLWLglqV5p83csijcEUTFqqpM3k</a></p>\n\n<p>I am a newbie in programming and I don't speak English very well, so I apologize in advance for my mistakes.</p>\n\n<pre><code>class Point\n{\nprivate:\n    int x;\n    int y;\n};\n\nclass Figure\n{\nprivate:\n    string name;\n    string type;\n};\n\nclass Triangle: public Figure\n{\nprivate:\n    Point p1, p2, p3;\n};\n\nclass BinaryFile\n{\nprivate:\n    string FileName;\n    fstream File;\npublic:\n    //...\n    void AddNewFigure(istream&amp; stream)\n    {       \n        File.open(this-&gt;FileName, ios::binary | ios::app);\n        if(!this-&gt;File)\n        {\n            cerr&lt;&lt;\"File error &lt;\"&lt;&lt;this-&gt;FileName&lt;&lt;\"&gt;\\n\";\n            exit(1);\n        }\n        Triangle fig;\n        fig.MakeNewFigure(stream);\n        File.write((char*)&amp;fig, sizeof(Triangle));\n        File.close();\n    }\n\n    Triangle GetTriangle()\n    {\n        Triangle trig;\n        Point p;\n        string str(\"\"); int x(0);\n        File.open(this-&gt;FileName, ios::binary | ios::in);\n        if(!this-&gt;File)\n        {\n            cerr&lt;&lt;\"File error &lt;\"&lt;&lt;this-&gt;FileName&lt;&lt;\"&gt;\\n\";\n            exit(1);\n        }\n        File.read((char*)&amp;trig, sizeof(Triangle));\n        File.close();\n        return trig;\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "prefix", "parentheses", "infix-notation"], "owner": {"reputation": 11, "user_id": 6204266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9f14d4b017e9ecb34279332630469e?s=128&d=identicon&r=PG&f=1", "display_name": "Vernal", "link": "https://stackoverflow.com/users/6204266/vernal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 473, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1462402787, "creation_date": 1462399416, "last_edit_date": 1462402787, "question_id": 37038864, "link": "https://stackoverflow.com/questions/37038864/converting-prefix-to-infix-with-including-parenthesis", "title": "converting Prefix to Infix with including parenthesis", "body": "<p>I'm trying to implement a recursive program to convert prefix to infix(prefix include parenthesis) in c++,i dont Know what to do with parenthesis.\ni will appreciate give a hint as what to do with parenthesis?\nthat's what i have got so far.The input should be for example something like this:</p>\n\n<pre><code>(= 0 (+ (* 2 (* var_1 var_1)) (* (-4) var_1) 2))\n</code></pre>\n\n<p>and the output must be this:</p>\n\n<pre><code>(0=(2*(var_1*var_1))-(4*(var_1))+2)\n</code></pre>\n\n<p>Instead, my program prints me this:</p>\n\n<pre><code>(0=((2*(var_1*var_1))+(4*(var_1-2))))\n</code></pre>\n\n<p>That's the code I wrote so far:</p>\n\n<pre><code>int main()\n{\n    vector&lt;string&gt; VecSplited_str;\n    string InputPrefx_str= ReadInputFile();\n    VecSplited_str=split((char*)InputPrefx_str.c_str());\n    InputPrefx_str.clear();\n    EvalPrefix_exp(VecSplited_str);\n}\n</code></pre>\n\n<p>void Convert_PrefixToInfix(stack* Stk_Pointer )\n{</p>\n\n<pre><code>try\n{\n    if ( !Stk_Pointer-&gt;empty() )\n    {\n        std::string token = Stk_Pointer-&gt;top();\n        Stk_Pointer-&gt;pop();\n        replace(token.begin(), token.end(), ')', ' ');\n        replace(token.begin(), token.end(), '(', ' ');\n        token=trim(token);\n        if (isOperator(token))\n        {\n            std::cout &lt;&lt; \"(\";\n            CalcInfixExp_str+=\"(\";\n            Convert_PrefixToInfix( Stk_Pointer );\n            std::cout &lt;&lt; token;\n            CalcInfixExp_str+=token;\n            Convert_PrefixToInfix( Stk_Pointer );\n            std::cout &lt;&lt; \")\";\n            CalcInfixExp_str+=\")\";\n        }\n        else if(isspace(token))\n        {\n            Convert_PrefixToInfix( Stk_Pointer );\n        }\n        else\n        {\n            std::cout &lt;&lt; token;\n            CalcInfixExp_str+=token;\n            if ( !Stk_Pointer-&gt;empty() )\n            {\n                if(!isspace(Stk_Pointer-&gt;top()))\n                    Convert_PrefixToInfix( Stk_Pointer );\n            }\n        }\n    }\n}\ncatch(exception ex)\n{}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1462399671, "post_id": 37038832, "comment_id": 61627802, "body": "for those wondering which compiler this is: it looks like gcc, though both gcc and clang reject the first and accept the second."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 10, "creation_date": 1462399783, "post_id": 37038912, "comment_id": 61627851, "body": "...and this is because you don&#39;t know the type of <code>this</code> until you&#39;ve seen the cv-qualifier-seq."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1462399889, "post_id": 37038912, "comment_id": 61627892, "body": "Also, technically, that <code>a()</code> =&gt; <code>(*this).a()</code> transformation never takes place - it only happens &quot;in a context where <code>this</code> can be used&quot; - and then it breaks <a href=\"http://eel.is/c++draft/expr.prim.id#2\" rel=\"nofollow noreferrer\">&#91;expr.prim.id&#93;/2</a>."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1462400305, "post_id": 37038912, "comment_id": 61628048, "body": "@HolyBlackCat Yes, but it&#39;s because the language designers love you, and want to give you as much freedom to use <code>this</code> as they possibly can :)"}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 18, "last_activity_date": 1462399670, "creation_date": 1462399670, "answer_id": 37038912, "question_id": 37038832, "link": "https://stackoverflow.com/questions/37038832/inside-of-a-class-why-auto-b-decltypea-works-but-decltypea/37038912#37038912", "title": "Inside of a class, why `auto b() -&gt; decltype(a()) {}` works, but `decltype(a()) b() {}` does not?", "body": "<p>Since <code>a</code> is a non-static member function, <code>a()</code> is interpreted as <code>(*this).a()</code>. Quoting in part from [expr.prim.general]/3,</p>\n\n<blockquote>\n  <p>If a declaration declares a member function or member function template of a class <code>X</code>, the expression <code>this</code>\n  is a prvalue of type \u201cpointer to <em>cv-qualifier-seq</em> <code>X</code>\u201d between the optional <em>cv-qualifer-seq</em> and the end of the\n  <em>function-definition</em>, <em>member-declarator</em>, or <em>declarator</em>. It shall not appear before the optional <em>cv-qualifier-seq</em>\n  and it shall not appear within the declaration of a static member function (although its type and value\n  category are defined within a static member function as they are within a non-static member function).</p>\n</blockquote>\n\n<p>The <em>trailing-return-type</em> comes after the optional <em>cv-qualifier-seq</em> (omitted in your examples, since <code>S::b</code> is not cv-qualified) so <code>this</code> can appear there, but it cannot appear before.</p>\n"}, {"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 10, "last_activity_date": 1462408596, "last_edit_date": 1495542182, "creation_date": 1462401913, "answer_id": 37039339, "question_id": 37038832, "link": "https://stackoverflow.com/questions/37038832/inside-of-a-class-why-auto-b-decltypea-works-but-decltypea/37039339#37039339", "title": "Inside of a class, why `auto b() -&gt; decltype(a()) {}` works, but `decltype(a()) b() {}` does not?", "body": "<p>A few additions to <a href=\"https://stackoverflow.com/a/37038912/4143855\">@Brian's answer</a>:</p>\n\n<ol>\n<li><p>In the first example, the <code>a()</code> is <em>not</em> transformed to <code>(*this).a()</code>. That transformation is specified in <a href=\"http://eel.is/c++draft/class.mfct.non-static#3\" rel=\"nofollow noreferrer\">[class.mfct.non-static]/3</a> and only takes place \"in a context where <code>this</code> can be used\". Without this transformation, the code is then ill-formed for violating <a href=\"http://eel.is/c++draft/expr.prim.id#2\" rel=\"nofollow noreferrer\">[expr.prim.id]/2</a>:</p>\n\n<blockquote>\n  <p>An <em>id-expression</em> that denotes a non-static data member or non-static\n  member function of a class can only be used:</p>\n  \n  <ul>\n  <li><p>as part of a class member access ([expr.ref]) in which the object expression refers to the member's class<sup>63</sup> or a class\n  derived from that class, or</p></li>\n  <li><p>to form a pointer to member ([expr.unary.op]), or</p></li>\n  <li><p>if that <em>id-expression</em> denotes a non-static data member and it appears in an unevaluated operand.</p></li>\n  </ul>\n</blockquote>\n\n<p>by using the <em>id-expression</em> <code>a</code>, which denotes a non-static member function, outside the allowed contexts.</p></li>\n<li><p>The fact that the transformation to class-member access doesn't take place is important because it makes the following code valid:</p>\n\n<pre><code>struct A {\n    int a;\n    decltype(a) b();\n};\n</code></pre>\n\n<p>If <code>decltype(a)</code> above were transformed into <code>decltype((*this).a)</code>, then the code would be ill-formed.</p></li>\n<li><p><code>*this</code> has a special exemption from the usual rule that the object in a class member access must have complete type (<a href=\"http://eel.is/c++draft/expr.prim.this#2\" rel=\"nofollow noreferrer\">[expr.prim.this]/2</a>):</p>\n\n<blockquote>\n  <p>Unlike the object expression in other contexts, <code>*this</code> is not required to be of complete type for purposes of class member access ([expr.ref]) outside the member function body.</p>\n</blockquote></li>\n</ol>\n"}], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 1, "accepted_answer_id": 37038912, "answer_count": 2, "score": 21, "last_activity_date": 1462408596, "creation_date": 1462399273, "last_edit_date": 1462399701, "question_id": 37038832, "link": "https://stackoverflow.com/questions/37038832/inside-of-a-class-why-auto-b-decltypea-works-but-decltypea", "title": "Inside of a class, why `auto b() -&gt; decltype(a()) {}` works, but `decltype(a()) b() {}` does not?", "body": "<p>Consider following code: <a href=\"http://ideone.com/OXG7s1\">(Ideone)</a></p>\n\n<pre><code>struct S\n{\n    int a() {return 0;}\n    decltype(a()) b() {return 1;}\n};\n</code></pre>\n\n<p>It gives me following error:</p>\n\n<blockquote>\n  <p>error: cannot call member function 'int S::a()' without object</p>\n</blockquote>\n\n<p><br>\nOn the other hand, this code compiles fine: <a href=\"http://ideone.com/JXOghO\">(Ideone)</a></p>\n\n<pre><code>struct S\n{\n    int a() {return 0;}\n    auto b() -&gt; decltype(a()) {return 1;}\n};\n</code></pre>\n\n<p><br>\nWhy one example works, but another fails to compile?</p>\n\n<p>Is compiler behavior fully correct in both examples?</p>\n\n<p>If compiler is correct, then why the standard mandates such strange behavior?</p>\n"}, {"tags": ["c++", "macos", "clang", "static-linking"], "comments": [{"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1462397892, "post_id": 37038472, "comment_id": 61627021, "body": "Are you trying to statically link a .dylib into your program?"}, {"owner": {"reputation": 77, "user_id": 1546790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/572a3108b29d92d4a994dbac1ccb4090?s=128&d=identicon&r=PG", "display_name": "Arcanelab", "link": "https://stackoverflow.com/users/1546790/arcanelab"}, "reply_to_user": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1462397977, "post_id": 37038472, "comment_id": 61627060, "body": "The library has .a version available, too. (SDL2 in my case.)"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1462398362, "post_id": 37038472, "comment_id": 61627231, "body": "When you pass a library with <code>-l</code> to Clang, the linker will always pick the .dylib over the .a if there is one. This is a bug known to Apple. You may be able to work around it by adding a dummy directory with a copy of the lib (or a link to it) to the library path."}], "answers": [{"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 3, "last_activity_date": 1462398773, "last_edit_date": 1462398773, "creation_date": 1462398453, "answer_id": 37038638, "question_id": 37038472, "link": "https://stackoverflow.com/questions/37038472/osx-how-to-statically-link-a-library-and-dynamically-link-the-standard-library/37038638#37038638", "title": "OSX: How to statically link a library and dynamically link the standard library?", "body": "<p>You have only a couple of options: <code>-L</code> for directories and <code>-l</code> for library names.</p>\n\n<p>You can do this in the simplest way by ensuring that the static library you want to link is named differently from the dynamic library.  Otherwise, you may find that the linker helpfully collects all of the references to shared libraries by name and links against <em>those</em>.  This is not an OSX-specific problem, but a feature common to many systems with shared libraries.</p>\n\n<p>One way to ensure that you have the static library when it normally resides in a directory with the same-named library is to construct a symbolic link into a temporary directory, and use <em>that</em> with <code>-L</code>.</p>\n\n<p>Something like this:</p>\n\n<pre><code>MYDIR=$(mktemp -d -t xxxxxx)\nln -sf /usr/local/libfoo.a ${MYDIR}/libfoo.a\nclang -o foo -L${MYDIR} -l foo\nrm -rf ${MYDIR}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2861, "user_id": 1008115, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Nmtel.jpg?s=128&g=1", "display_name": "PnotNP", "link": "https://stackoverflow.com/users/1008115/pnotnp"}, "is_accepted": true, "score": 5, "last_activity_date": 1462398461, "creation_date": 1462398461, "answer_id": 37038641, "question_id": 37038472, "link": "https://stackoverflow.com/questions/37038472/osx-how-to-statically-link-a-library-and-dynamically-link-the-standard-library/37038641#37038641", "title": "OSX: How to statically link a library and dynamically link the standard library?", "body": "<p>Put your static libraries in, say, dir <code>./MyStaticLibs</code> and simply use <code>-L./MyStaticLibs/ -l&lt;StaticLibraryName&gt;</code>.</p>\n\n<p><b>Compiler prefers dynamic version over static version of library</b></p>\n\n<p>If you have your dynamic library (<code>random.dylib</code>) and static library (<code>random.a</code>)  in same directory then compiler will prefer and link with <code>.dylib</code> not <code>.a</code></p>\n"}], "owner": {"reputation": 77, "user_id": 1546790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/572a3108b29d92d4a994dbac1ccb4090?s=128&d=identicon&r=PG", "display_name": "Arcanelab", "link": "https://stackoverflow.com/users/1546790/arcanelab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8343, "favorite_count": 1, "accepted_answer_id": 37038641, "answer_count": 2, "score": 5, "last_activity_date": 1462398773, "creation_date": 1462397740, "question_id": 37038472, "link": "https://stackoverflow.com/questions/37038472/osx-how-to-statically-link-a-library-and-dynamically-link-the-standard-library", "title": "OSX: How to statically link a library and dynamically link the standard library?", "body": "<p>How do I specify to clang to statically link a certain library (in my case SDL2) and dynamically link the standard library?</p>\n\n<p>Using <code>-static</code> is not good, since the linker tries to statically link the standard library as well, which is prohibited in OSX. On the other hand, clang doesn't know <code>-Wl,-Bstatic</code>.</p>\n"}, {"tags": ["c++", "memory", "memory-leaks", "new-operator"], "comments": [{"owner": {"reputation": 1993, "user_id": 2085551, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f0485ff74077d28fd59bce3e84212de8?s=128&d=identicon&r=PG", "display_name": "Lemon Drop", "link": "https://stackoverflow.com/users/2085551/lemon-drop"}, "edited": false, "score": 0, "creation_date": 1462397624, "post_id": 37038410, "comment_id": 61626902, "body": "Are you running in debug mode?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2440074"}, "reply_to_user": {"reputation": 1993, "user_id": 2085551, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f0485ff74077d28fd59bce3e84212de8?s=128&d=identicon&r=PG", "display_name": "Lemon Drop", "link": "https://stackoverflow.com/users/2085551/lemon-drop"}, "edited": false, "score": 0, "creation_date": 1462397673, "post_id": 37038410, "comment_id": 61626924, "body": "No, it&#39;s release in Visual Studio 2010"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 2, "creation_date": 1462397690, "post_id": 37038410, "comment_id": 61626933, "body": "Memory allocations have overhead. How much is up to the implementation."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1462397770, "post_id": 37038410, "comment_id": 61626968, "body": "Good read : <a href=\"http://stackoverflow.com/a/15881440/1870760\">stackoverflow.com/a/15881440/1870760</a> regarding memory overhead"}, {"owner": {"reputation": 1993, "user_id": 2085551, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f0485ff74077d28fd59bce3e84212de8?s=128&d=identicon&r=PG", "display_name": "Lemon Drop", "link": "https://stackoverflow.com/users/2085551/lemon-drop"}, "edited": false, "score": 0, "creation_date": 1462397773, "post_id": 37038410, "comment_id": 61626971, "body": "Yeah what the other commenter said is probably what is happening, this isn&#39;t the same as saying something like new Foo[10000000]; which would work more as you expected I&#39;d imagine."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2440074"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1462397785, "post_id": 37038410, "comment_id": 61626977, "body": "@JonathanPotter, can you be more specific?"}, {"owner": {"reputation": 1993, "user_id": 2085551, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f0485ff74077d28fd59bce3e84212de8?s=128&d=identicon&r=PG", "display_name": "Lemon Drop", "link": "https://stackoverflow.com/users/2085551/lemon-drop"}, "edited": false, "score": 0, "creation_date": 1462397848, "post_id": 37038410, "comment_id": 61627001, "body": "@AlekDepler Some overhead for example is the small amount of data the allocation system uses to keep track of how many bytes were allocated so only the pointer needs to be passed to delete rather than the pointer and the size."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1462398127, "post_id": 37038410, "comment_id": 61627121, "body": "In C++ you want to avoid allocating small objects individually."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1462398191, "post_id": 37038410, "comment_id": 61627150, "body": "I just tested this on VS 2015 Win 7 x64 and my application only uses a mere 160 MB in release. The <code>malloc</code> implementation in 2010 just isn&#39;t as good I assume."}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1462398194, "post_id": 37038410, "comment_id": 61627153, "body": "Try changing your class to have a size of 4, 8 &amp; 16 (add fields...). measure the usage then, and see how it reacts to these changes."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1993, "user_id": 2085551, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f0485ff74077d28fd59bce3e84212de8?s=128&d=identicon&r=PG", "display_name": "Lemon Drop", "link": "https://stackoverflow.com/users/2085551/lemon-drop"}, "edited": false, "score": 0, "creation_date": 1462398228, "post_id": 37038410, "comment_id": 61627173, "body": "Consider adapting @lemondrop &#39;s comment about allocating a million <code>Foo</code>s and using those million <code>Foo</code>s as a pool. When you need a <code>Foo</code>, take one from the pool."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1462398239, "post_id": 37038410, "comment_id": 61627179, "body": "Aside from alignment and array-size-storage overhead, allocating memory   requires manipulating a data structure that represents where all the allocations are (so that they can be efficiently freed later on). Think about it -- the user can allocate many objects on the heap, then deallocate a few in the middle. There needs to be some structure tracking that those middle bytes are now free. And that structure takes memory too (albeit not too much in clever implementations)."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1462398317, "post_id": 37038410, "comment_id": 61627209, "body": "How do you measure the 600 Mb ?  Process statistics from OS or memory debugging tools monitoring allocations ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2440074"}, "reply_to_user": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1462398407, "post_id": 37038410, "comment_id": 61627262, "body": "@Christophe, it&#39;s Win10 x64, Task Manager"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1462398535, "post_id": 37038410, "comment_id": 61627320, "body": "<a href=\"https://technet.microsoft.com/en-us/sysinternals/bb842062.aspx\" rel=\"nofollow noreferrer\">Process explorer</a> has the program consuming 160 MB under VS2010 on Win 10, but about twice that if run under the debugger. No surprise that. Debugger will add it&#39;s own memory tracking."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1462398561, "post_id": 37038410, "comment_id": 61627328, "body": "I&#39;m under the impression you&#39;re still running in debug, it&#39;s all 160 for us on x64 systems."}], "answers": [{"comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 2, "creation_date": 1462397885, "post_id": 37038473, "comment_id": 61627018, "body": "still 16b*10,000,000 = 160Mb (when 16b aligned chunks are allocated) and even if 32b are actually allocated (16b for memory management), we still &#39;only&#39; reach 320Mb."}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1462397939, "post_id": 37038473, "comment_id": 61627039, "body": "@Walter - and that&#39;s some part of the answer, is there anything incorrect about this?"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1462397996, "post_id": 37038473, "comment_id": 61627071, "body": "Well, it doesn&#39;t explain the 600Mb but only (up to) 320Mb -- so what abotu the remaining memory?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2440074"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1462398047, "post_id": 37038473, "comment_id": 61627088, "body": "@Walter, good point. I&#39;m also interested in where is other memory used."}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1462398058, "post_id": 37038473, "comment_id": 61627094, "body": "As I noted (as well as some did in the comments), there are other &quot;hidden&quot; overhead memory allocations taking place."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 1, "creation_date": 1462398226, "post_id": 37038473, "comment_id": 61627170, "body": "@AlekDepler: How are you measuring memory usage? Maybe 512MB are allocated upfront before main even runs, did you rule this out? Maybe 600MB are allocated by the runtime from the system to make further allocations quicker, but not all of this memory is actually consumed by your programs objects (i.e., you could allocate more objects and memory usage wouldn&#39;t rise). You need to be much more specific with how you&#39;re measuring things and what your runtime is to be able to actually find where this memory is going."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1462398245, "post_id": 37038473, "comment_id": 61627182, "body": "@Amit Yes, I take this already into account: 16Mb per allocation just to store the amount of memory allocated at the address. This is more than needed, but alignment requirements again may bump this up to 16b. You still fail to explain the 600Mb quantitatively."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1462398260, "post_id": 37038473, "comment_id": 61627192, "body": "Only getting a 160 MB use here."}, {"owner": {"reputation": 1993, "user_id": 2085551, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f0485ff74077d28fd59bce3e84212de8?s=128&d=identicon&r=PG", "display_name": "Lemon Drop", "link": "https://stackoverflow.com/users/2085551/lemon-drop"}, "edited": false, "score": 0, "creation_date": 1462398334, "post_id": 37038473, "comment_id": 61627217, "body": "Yeah I am getting 160 as well. As expected from what a heap profile shows the exact amount of memory actually allocated is 10 million bytes so the rest is the overhead."}], "tags": [], "owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "is_accepted": false, "score": 3, "last_activity_date": 1462397745, "creation_date": 1462397745, "answer_id": 37038473, "question_id": 37038410, "link": "https://stackoverflow.com/questions/37038410/c-objects-memory-consumption/37038473#37038473", "title": "C++ objects memory consumption", "body": "<p>Class <code>Foo</code> might be 1 byte in size, but since you allocate many <code>Foo</code>s individually, they can (and probably do) get allocated on some byte aligned addresses and due to fragmentation consume more memory than you expected.</p>\n\n<p>Additionally, there's the memory used by the internal memory management system.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2440074"}, "edited": false, "score": 0, "creation_date": 1462399416, "post_id": 37038667, "comment_id": 61627707, "body": "I see now. It&#39;s really different memory values for different modes for my example: from 150mb in release mode without debugger up to 600mb in debug mode under debugger. Strange world."}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1462399493, "post_id": 37038667, "comment_id": 61627738, "body": "@AlekDepler: the additional memory provides additional benefits for debugging. See the updated answer for a demo program of a buffer overrun."}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 1, "creation_date": 1462399576, "post_id": 37038667, "comment_id": 61627764, "body": "@AlekDepler: I hope you accidentally flipped the values. Release mode should need less memory."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2440074"}, "edited": false, "score": 0, "creation_date": 1462399721, "post_id": 37038667, "comment_id": 61627819, "body": "Yes, I flipped them ) So is it impossible to reduce memory consumption less then 150mb for my example?"}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1462400054, "post_id": 37038667, "comment_id": 61627968, "body": "@AlekDepler: as mentioned by Amit, an array should help, since that makes only 1 big allocation + 1 overhead instead of many small allocations + many overheads. Be aware that this does not scale unlimited. You may run into problems where you have enough memory in total, but not as one big free block (which an array needs). That&#39;s called &quot;memory fragmentation&quot; then. Try 1800 allocations of a 1MB byte[] versus a single 1800MB byte[] allocation. But that&#39;s crazy advanced stuff you hopefully don&#39;t need to care about."}], "tags": [], "owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "is_accepted": true, "score": 6, "last_activity_date": 1462399364, "last_edit_date": 1462399364, "creation_date": 1462398575, "answer_id": 37038667, "question_id": 37038410, "link": "https://stackoverflow.com/questions/37038410/c-objects-memory-consumption/37038667#37038667", "title": "C++ objects memory consumption", "body": "<p>The C++ heap manager has 4 different \"modes\" in which it reserves less or more space around an object. These are</p>\n\n<ol>\n<li>Release mode, running normally</li>\n<li>Release mode, running under the debugger</li>\n<li>Debug mode, running normally</li>\n<li>Debug mode, running under the debugger</li>\n</ol>\n\n<p>The additional memory is used for no mans land (0xFDFDFDFD), alignment to 16 byte boundaries (0xBAADF00D), heap management etc.</p>\n\n<p>I suggest reading <a href=\"http://www.nobugs.org/developer/win32/debug_crt_heap.html\" rel=\"nofollow\">this post</a> and looking at the 4 scenarios in a debugger, opening the raw memory view. You'll learn a lot. For case 1 and 3, insert a pause where you can attach the debugger to the running process, while in case 2 and 4 you should run the debugger first and then start the executable from there.</p>\n\n<p>I used to demonstrate how the C++ heap works when explaining the buffer overrun. Here's a demo program you can use, not perfect, but maybe useful:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;Windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\nvoid SimpleBufferOverrunDemo( int argc, _TCHAR* argv[] ) ;\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    SimpleBufferOverrunDemo(argc, argv);\n\n    getchar();\n    return 0;\n}\n\nvoid SimpleBufferOverrunDemo( int argc, _TCHAR* argv[] ) \n{\n    if (argc != 2)\n    {\n        std::cout &lt;&lt; \"You have to provide an argument!\\n\";\n        return;\n    }\n\n    // Allocate 5 bytes\n    byte* overrunBuffer = new byte[5];\n\n    // Demo 1: How does the memory look after delete? Uncomment the following to demonstrate\n    //delete [] overrunBuffer; //0xfeeefeee in debug mode.\n    //DebugBreak();\n\n    // Demo 2: Comment Demo 1 again. \n    // Provide a 5 byte sequence as argument\n    // Attach with WinDbg and examine the overrunBuffer.\n\n    // 2.1. How many heaps do we have?\n    // !heap -s\n\n    // 2.2. How to find the heap block and how large is it?\n    // !heap -x [searchAddress]\n    // !heap -i [blockAddress] -&gt; Wow 72 bytes block size for 5 allocated bytes!\n\n    // 2.3. Show that _HEAP_ENTRY does not work any more.\n\n    // Demo 3: Write behind the 5 allocated bytes.\n    // Provide more than 5 bytes as argument, depending on how what you want to destroy\n    // 3.1 Write into the no mans land.\n    // 3.2 Write into the guard bytes.\n    // 3.3 Write into the meta data section of the following heap block! -&gt; When does it crash?\n\n    std::wstring arg = argv[1];\n\n    for (size_t i = 0; i &lt; arg.size(); i++)\n    {\n        overrunBuffer[i] = (byte)arg[i];\n    }\n\n    // Crash happens not where it was caused(!) This is important!\n    std::cout &lt;&lt; \"Now we do a plenty of other work ...\";\n    ::Sleep(5000);\n\n    delete[] overrunBuffer;\n\n    // Demo 4: Demonstrate page heap / application verifier!\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 0, "last_activity_date": 1462399689, "creation_date": 1462399689, "answer_id": 37038915, "question_id": 37038410, "link": "https://stackoverflow.com/questions/37038410/c-objects-memory-consumption/37038915#37038915", "title": "C++ objects memory consumption", "body": "<p>You have to know that the memory consumed by a process from the OS point of view is not only related to the objects that are allocated in your code.  </p>\n\n<p>It's something that is heavily implementation dependent, but in general, for performance reasons, memory allocation is rarely passed one to one to the OS, but <a href=\"https://msdn.microsoft.com/en-us/library/kftdy56f.aspx\" rel=\"nofollow\">pooled via the management</a> of the free store.  The general principle is as follows:  </p>\n\n<ul>\n<li>At startup of the program, your C++ implementation will allocate some initial space for the free store and the heap.  </li>\n<li>When this memory is consumed, and new memory is needed, the memory management will request larger chunks to the OS and make these available in the free store.</li>\n<li>It is possible that the size of chunks requested from OS could adapt themselves to the allocation patterns.  </li>\n</ul>\n\n<p>So from the 600MB viewed in the task manager, it is possible that only a small part is effectively allocated to your objects, and a bigger part is in fact still free and available in the free store.  </p>\n\n<p>This being said, the consumed memory will be larger than size x number of objects:  for each allocated object, the memory management functions have to manage some additional information (like the size of the allocated object).  SImilarly, the free memory pool also requires pointer (generally a linked list) to keep track of the free blocks if these are not contiguous.    </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2440074"}, "edited": false, "score": 0, "creation_date": 1462427215, "post_id": 37039097, "comment_id": 61635287, "body": "Try without vector and watch for process memory, not variables."}], "tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 0, "last_activity_date": 1462400754, "creation_date": 1462400754, "answer_id": 37039097, "question_id": 37038410, "link": "https://stackoverflow.com/questions/37038410/c-objects-memory-consumption/37039097#37039097", "title": "C++ objects memory consumption", "body": "<p>Very interesting post about Windows.</p>\n\n<p>For comparison, on Ubuntu 15.10(64):</p>\n\n<pre><code>int t407(void)\n{\n   std::cout &lt;&lt; \"\\nsizeof(Foo): \" &lt;&lt; sizeof(Foo) &lt;&lt; std::endl;\n\n   std::cout &lt;&lt; \"\\nsizeof(Foo*): \" &lt;&lt; sizeof(Foo*) &lt;&lt; std::endl;\n\n   std::vector&lt;Foo&gt;  fooVec;\n   fooVec.reserve(10000000);\n   for (size_t i=0; i&lt;10000000; ++i)\n   {\n      Foo t;\n      fooVec.push_back(t);\n   }\n   std::cout &lt;&lt; \"\\nfooVec.size(): \" &lt;&lt; fooVec.size() \n             &lt;&lt; \" elements\" &lt;&lt; std::endl\n             &lt;&lt; \"fooVec.size() * sizeof(Foo): \" \n             &lt;&lt; fooVec.size() * sizeof(Foo) &lt;&lt; \" bytes\" &lt;&lt; std::endl\n             &lt;&lt; \"sizeof(fooVec): \" &lt;&lt; sizeof(fooVec) \n             &lt;&lt; \" bytes (on stack)\" &lt;&lt; std::endl;\n\n   return(0);\n}\n</code></pre>\n\n<p>With output:</p>\n\n<pre><code> sizeof(Foo): 1\n\n sizeof(Foo*): 8\n\n fooVec.size(): 10000000 elements \n fooVec.size() * sizeof(Foo): 10000000 bytes\n sizeof(fooVec): 24 bytes (on stack)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2440074"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1965, "favorite_count": 1, "accepted_answer_id": 37038667, "answer_count": 4, "score": 4, "last_activity_date": 1462400754, "creation_date": 1462397512, "last_edit_date": 1462398496, "question_id": 37038410, "link": "https://stackoverflow.com/questions/37038410/c-objects-memory-consumption", "title": "C++ objects memory consumption", "body": "<p>First of all: this question is not about \"how to use delete operator\", it is about \"why many class objects of small size consumes lots of memory\". Let's say we have this code:</p>\n\n<pre><code>class Foo\n{\n\n};\n\nvoid FooTest()\n{\n    int sizeOfFoo = sizeof(Foo);\n\n    for (int i = 0; i &lt; 10000000; i++)\n        new Foo();\n}\n</code></pre>\n\n<p>Size of empty class Foo is 1 byte, but when the code is executed it consumes about 600Mb memory. How is that?</p>\n\n<p><strong>UPDATE.</strong> I've tested this on Win10 x64 in Visual Studio 2010. Memory usage from OS task manager.</p>\n"}, {"tags": ["c#", "c++", "asp.net", "wsdl", "gsoap"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1462397881, "post_id": 37038384, "comment_id": 61627014, "body": "Not knowing exactly what you&#39;re trying to do, a <code>std::list</code> is a C++ thing.  It isn&#39;t understood by anything but a C++ compiler, and even that has its limitations.  Unless what you&#39;re doing knows how to properly serialize/marshal the list&#39;s data, I don&#39;t see how this will work."}, {"owner": {"reputation": 1, "user_id": 6291994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YxUgM.jpg?s=128&g=1", "display_name": "Gary Miller", "link": "https://stackoverflow.com/users/6291994/gary-miller"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1462430527, "post_id": 37038384, "comment_id": 61636748, "body": "PaulMcKenzie The gSOAP help states: (Section 11.11.8 STL Containers) gSOAP supports the STL containers std::deque, std::list, std::set, and std::vector. STL containers can only be used within classes to declare members that contain multiple values."}, {"owner": {"reputation": 1, "user_id": 6291994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YxUgM.jpg?s=128&g=1", "display_name": "Gary Miller", "link": "https://stackoverflow.com/users/6291994/gary-miller"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1462431000, "post_id": 37038384, "comment_id": 61636982, "body": "Apologies Paul - I missed the at on the above comment @PaulMcKenzie"}], "owner": {"reputation": 1, "user_id": 6291994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YxUgM.jpg?s=128&g=1", "display_name": "Gary Miller", "link": "https://stackoverflow.com/users/6291994/gary-miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462444728, "creation_date": 1462397408, "question_id": 37038384, "link": "https://stackoverflow.com/questions/37038384/using-a-stdlist-with-gsoap", "title": "Using a std::list with gSOAP", "body": "<p>I'm trying to use gSOAP with C++ to pass a std::list of a simple structure using the soapstd2 compiler to generate the relevant WSDL for a legacy application that I'm trying to offer as a web service.</p>\n\n<p>Heres the gSOAP header that I have defined in the legacy C++ app:</p>\n\n<pre><code>//gsoap ns service name:        Arpa service described at http://localhost:5801/ArpaService\n//gsoap ns service protocol:    SOAP\n//gsoap ns service namespace:   http://localhost:5801/arpa.wsdl\n//gsoap ns service location:    http://localhost:5801/arpaserver.cgi\n\n#import \"stl.h\"\n\nclass ns__arpaTarget\n{\npublic:\n    int    nTgtNo;\n    std::string  name;\n    double dRange;\n    double dBearing;\n    ns__arpaTarget();\n    ~ns__arpaTarget();\n};\n\nclass ns__arpaList\n{\npublic:\n    std::list &lt;ns__arpaTarget&gt; arpa_lst;   \n};\n\n//gsoap ns service method: \nint ns__getArpaList( ns__arpaList* lst );\n</code></pre>\n\n<p>I'm compiling this within Visual Studio 2008, with the following pre build event to generate the WSDL:</p>\n\n<pre><code>W:\\gSOAP\\gsoap-2.8\\gsoap\\bin\\win32\\soapcpp2  -I W:\\gSOAP\\gsoap-2.8\\gsoap\\import -t W:\\gSOAP\\gsoap-2.8\\gsoap\\WS\\typemap.dat -j -s gSOAPArpaWebService.h\n</code></pre>\n\n<p>This is all building fine at the server end (I have an implementation of the function which builds and runs and supplies a list of my simple structure) - it's also generating the WSDL which looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;definitions name=\"Arpa\"\n  targetNamespace=\"http://localhost:5801/arpa.wsdl\"\n  xmlns:tns=\"http://localhost:5801/arpa.wsdl\"\n  xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\"\n  xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n  xmlns:ns=\"http://localhost:5801/arpa.wsdl\"\n  xmlns:SOAP=\"http://schemas.xmlsoap.org/wsdl/soap/\"\n  xmlns:HTTP=\"http://schemas.xmlsoap.org/wsdl/http/\"\n  xmlns:MIME=\"http://schemas.xmlsoap.org/wsdl/mime/\"\n  xmlns:DIME=\"http://schemas.xmlsoap.org/ws/2002/04/dime/wsdl/\"\n  xmlns:WSDL=\"http://schemas.xmlsoap.org/wsdl/\"\n  xmlns=\"http://schemas.xmlsoap.org/wsdl/\"&gt;\n\n&lt;types&gt;\n\n  &lt;schema targetNamespace=\"http://localhost:5801/arpa.wsdl\"\n    xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\"\n    xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n    xmlns:ns=\"http://localhost:5801/arpa.wsdl\"\n    xmlns=\"http://www.w3.org/2001/XMLSchema\"\n    elementFormDefault=\"qualified\"\n    attributeFormDefault=\"unqualified\"&gt;\n    &lt;import namespace=\"http://schemas.xmlsoap.org/soap/encoding/\"/&gt;\n    &lt;complexType name=\"arpaTarget\"&gt;&lt;!-- ns__arpaTarget --&gt;\n          &lt;sequence&gt;\n            &lt;element name=\"nTgtNo\" type=\"xsd:int\" minOccurs=\"1\" maxOccurs=\"1\"/&gt;&lt;!-- ns__arpaTarget::nTgtNo --&gt;\n            &lt;element name=\"name\" type=\"xsd:string\" minOccurs=\"1\" maxOccurs=\"1\"/&gt;&lt;!-- ns__arpaTarget::name --&gt;\n            &lt;element name=\"dRange\" type=\"xsd:double\" minOccurs=\"1\" maxOccurs=\"1\"/&gt;&lt;!-- ns__arpaTarget::dRange --&gt;\n            &lt;element name=\"dBearing\" type=\"xsd:double\" minOccurs=\"1\" maxOccurs=\"1\"/&gt;&lt;!-- ns__arpaTarget::dBearing --&gt;\n          &lt;/sequence&gt;\n    &lt;/complexType&gt;\n    &lt;!-- operation request element --&gt;\n    &lt;element name=\"getArpaList\"&gt;\n      &lt;complexType&gt;\n          &lt;sequence&gt;\n          &lt;/sequence&gt;\n      &lt;/complexType&gt;\n    &lt;/element&gt;\n    &lt;!-- operation response element --&gt;\n    &lt;element name=\"arpaList\"&gt;\n      &lt;complexType&gt;\n          &lt;sequence&gt;\n            &lt;element name=\"arpa-lst\" type=\"ns:arpaTarget\" minOccurs=\"0\" maxOccurs=\"unbounded\"/&gt;&lt;!-- ns__arpaList::arpa_lst --&gt;\n          &lt;/sequence&gt;\n      &lt;/complexType&gt;\n    &lt;/element&gt;\n  &lt;/schema&gt;\n\n&lt;/types&gt;\n\n&lt;message name=\"getArpaList\"&gt;\n  &lt;part name=\"Body\" element=\"ns:getArpaList\"/&gt;&lt;!-- ns__getArpaList::ns__getArpaList --&gt;\n&lt;/message&gt;\n\n&lt;message name=\"arpaList\"&gt;\n  &lt;part name=\"Body\" element=\"ns:arpaList\"/&gt;&lt;!-- ns__getArpaList::lst --&gt;\n&lt;/message&gt;\n\n&lt;portType name=\"ArpaPortType\"&gt;\n  &lt;operation name=\"getArpaList\"&gt;\n    &lt;documentation&gt;Service definition of function ns__getArpaList&lt;/documentation&gt;\n    &lt;input message=\"tns:getArpaList\"/&gt;\n    &lt;output message=\"tns:arpaList\"/&gt;\n  &lt;/operation&gt;\n&lt;/portType&gt;\n\n&lt;binding name=\"Arpa\" type=\"tns:ArpaPortType\"&gt;\n  &lt;SOAP:binding style=\"document\" transport=\"http://schemas.xmlsoap.org/soap/http\"/&gt;\n  &lt;operation name=\"getArpaList\"&gt;\n    &lt;SOAP:operation soapAction=\"\"/&gt;\n    &lt;input&gt;\n          &lt;SOAP:body parts=\"Body\" use=\"literal\"/&gt;\n    &lt;/input&gt;\n    &lt;output&gt;\n          &lt;SOAP:body parts=\"Body\" use=\"literal\"/&gt;\n    &lt;/output&gt;\n  &lt;/operation&gt;\n&lt;/binding&gt;\n\n&lt;service name=\"Arpa\"&gt;\n  &lt;documentation&gt;service described at http://localhost:5801/ArpaService&lt;/documentation&gt;\n  &lt;port name=\"Arpa\" binding=\"tns:Arpa\"&gt;\n    &lt;SOAP:address location=\"http://localhost:5801/arpaserver.cgi\"/&gt;\n  &lt;/port&gt;\n&lt;/service&gt;\n\n&lt;/definitions&gt;\n</code></pre>\n\n<p>At the client end I'm referencing the generated gSOAP WSDL and successfully importing the service via an ASP.NET web application - but when I try to use the service function of the imported service to retrieve the list of ns__arpaTarget types the service only offers the following function signiture that I don't understand or know how to use (perhaps this is my problem?):</p>\n\n<pre><code>Radar_Services_Web_Client.ArpaSrv.arpaTarget[] ArpaPortTypeClient.getArpaList( Radar_Services_Web_Client.ArpaSrv.getArpaList getArpaList1 )\n</code></pre>\n\n<p>Note: I have tried this without a list and I am able to get a single structure out from the service into the client call successfully. I've also tried a list of pointers to ns__arpaTarget - as the gSOAP documentation tells me this is a safer way of doing so but the same problem occurs (i.e I get the same strange signiture to use in the client).</p>\n\n<p>Any help would be greatly appreciated.\nMany thanks, Gary. </p>\n"}, {"tags": ["c++", "visual-studio-2015", "msvcrt", "crt"], "comments": [{"owner": {"reputation": 2861, "user_id": 1008115, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Nmtel.jpg?s=128&g=1", "display_name": "PnotNP", "link": "https://stackoverflow.com/users/1008115/pnotnp"}, "edited": false, "score": 0, "creation_date": 1462399134, "post_id": 37038381, "comment_id": 61627570, "body": "Why don;t you link the MS libraries where these definitions are coming from?"}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1462406406, "post_id": 37038381, "comment_id": 61629929, "body": "Make sure your library <code>XXXXX.lib</code> was built with Visual Studio 2015."}], "owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462397387, "creation_date": 1462397387, "question_id": 37038381, "link": "https://stackoverflow.com/questions/37038381/could-this-be-related-to-universal-crt-refactoring", "title": "Could this be related to Universal CRT refactoring?", "body": "<p>I am in the process of upgrading my projects to VS 2015 and only in Debug|x64 configuration I am running into a couple of linker errors when my static library (XXXXX.lib) is being consumed by a DLL:</p>\n\n<pre><code>6&gt;XXXXX.lib(stdafx.obj) : error LNK2019: unresolved external symbol _vscwprintf referenced in function \"public: static void __cdecl ATL::CTrace::TraceV(char const *,int,unsigned int,unsigned int,wchar_t const *,char *)\" (?TraceV@CTrace@ATL@@SAXPEBDHIIPEB_WPEAD@Z)\n\n6&gt;XXXXX.lib(stdafx.obj) : error LNK2019: unresolved external symbol \"char const * __cdecl std::_Winerror_map(int)\" (?_Winerror_map@std@@YAPEBDH@Z) referenced in function \"public: virtual class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; __cdecl std::_System_error_category::message(int)const \" (?message@_System_error_category@std@@UEBA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@2@H@Z)\n</code></pre>\n\n<p>As you can see, both the referencing function and the unresolved external are both coming from Microsoft's own libraries.</p>\n\n<p>Any idea what could be happening?</p>\n"}, {"tags": ["c++", "linux", "file-io", "system-calls", "tcpserver"], "comments": [{"owner": {"reputation": 67, "user_id": 4293156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba25cf52f73d949801368ad3e4515d8e?s=128&d=identicon&r=PG&f=1", "display_name": "mausik", "link": "https://stackoverflow.com/users/4293156/mausik"}, "edited": false, "score": 1, "creation_date": 1462397536, "post_id": 37038336, "comment_id": 61626856, "body": "You are trying to read from a file descriptor that is opened as write only."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5425294"}, "edited": false, "score": 0, "creation_date": 1462397895, "post_id": 37038435, "comment_id": 61627024, "body": "Thanks for that! Also fixed the sizes!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5425294"}, "edited": false, "score": 0, "creation_date": 1463001441, "post_id": 37038435, "comment_id": 61881505, "body": "Sorry about that, had issues with computer."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 1, "last_activity_date": 1462398152, "last_edit_date": 1462398152, "creation_date": 1462397599, "answer_id": 37038435, "question_id": 37038336, "link": "https://stackoverflow.com/questions/37038336/file-i-o-displaying-contents-of-a-file/37038435#37038435", "title": "File I/O - Displaying contents of a file", "body": "<p>You cannot read on a file, if you open it for writing only:</p>\n\n<pre><code>fd = open(token[1], O_WRONLY); //open\n</code></pre>\n\n<p>You need to open it for reading, O_RDONLY in your case, if you do not want to write anything to it (else O_RDWR).</p>\n\n<p>By the way - Your buffer sizes are odd (257), normally, one allocates buffers in powers of two (256).</p>\n\n<p>UPDATE:</p>\n\n<p>Be warned that read does not necessarily null-terminate the strings! Use cnt instead of strlen(buffer) for writing - but check it for being &lt; 0 (error) and == 0 (end of file) before. You might want to do this in a loop, if your files can have arbitrary size (i. e. possibly larger than the buffer).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5425294"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 37038435, "answer_count": 1, "score": 0, "last_activity_date": 1462398152, "creation_date": 1462397228, "question_id": 37038336, "link": "https://stackoverflow.com/questions/37038336/file-i-o-displaying-contents-of-a-file", "title": "File I/O - Displaying contents of a file", "body": "<p>I was looking for some advice on a function for a simple TCP server. </p>\n\n<p>The third <code>if</code> statement, is suppose to check if <code>token[1]</code> is a name to a file or a directory (which is working fine). My problem is, opening the file, displaying the contents of the file to the client and then closing the file. I tried using file I/O calls but, haven't a way to do so that work. Any advice is greatly appreciated.</p>\n\n<pre><code>void processClientRequest(int connSock) {\n\n int received, count = 0;\n char *token[] = { (char*)0, (char*)0 };\n char path[257], buffer[257];\n\n // read a message from the client\n if ((received = read(connSock, path, 256)) &lt; 0) {\n    perror(\"receive\");\n    exit(EXIT_FAILURE);\n }\n path[received] = '\\0';\n cerr &lt;&lt; \"received: \" &lt;&lt; path &lt;&lt; endl;\n\n for(char *p = strtok(path, \" \"); p; p = strtok(NULL, \" \")) //sets tokens\n    token[count++] = p;\n\n if(strcmp(token[0], \"GET\") != 0) { //if the first \"command\" was not GET, exit\n    strcat(buffer, \"Must start with GET\");\n    write(connSock, buffer, strlen(buffer));\n    exit(-1);\n }\n\n int rs;\n int fd, cnt;\n struct stat bufferS;\n rs = stat(token[1], &amp;bufferS);\n\n if (S_ISREG(bufferS.st_mode)) { //input was a file\n    fd = open(token[1], O_WRONLY); //open\n    cnt = read(fd, buffer, 257); //read\n\n\n    write(connSock, buffer, strlen(buffer));        \n }\n// else, open directory and stuff (code for that has been omitted to save space)\n\ncerr &lt;&lt; \"done with this client\\n\";\nclose(connSock);\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "sdl", "sdl-2"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1462402109, "post_id": 37038335, "comment_id": 61628621, "body": "That&#39;s <i>almost</i> a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  Remove the unused SDL_Image stuff, merge the <code>glsl.h</code> stuff into <code>main.cpp</code>, and unify the code formatting."}, {"owner": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 0, "creation_date": 1462548945, "post_id": 37038335, "comment_id": 61697133, "body": "Lol requesting 23 bit depth buffer... That&#39;s a first."}, {"owner": {"reputation": 390, "user_id": 5410802, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8d6063cf0206be87ef8ec382f2da1f50?s=128&d=identicon&r=PG&f=1", "display_name": "Keith Becker", "link": "https://stackoverflow.com/users/5410802/keith-becker"}, "edited": false, "score": 1, "creation_date": 1462639439, "post_id": 37038335, "comment_id": 61725902, "body": "Xbox One uses 23 bit depth buffer lol"}], "answers": [{"tags": [], "owner": {"reputation": 1531, "user_id": 4253427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/177fbfd7d486a5687d0ea82d1a5e9e2e?s=128&d=identicon&r=PG&f=1", "display_name": "zeromus", "link": "https://stackoverflow.com/users/4253427/zeromus"}, "is_accepted": false, "score": 0, "last_activity_date": 1462414822, "creation_date": 1462414822, "answer_id": 37041258, "question_id": 37038335, "link": "https://stackoverflow.com/questions/37038335/what-is-wrong-with-my-opengl-with-sdl2-code/37041258#37041258", "title": "What is wrong with my OpenGL with SDL2 code?", "body": "<p>The depth test is messing it up. This was discovered by the time honored method of <em>commenting out code until it works</em>. Of course, that doesn't always work when you're debugging the blank screen bug.</p>\n\n<p>Why is it messing up? Because with <code>glClear(GL_COLOR_BUFFER_BIT | GL_COLOR_BUFFER_BIT);</code> it seems you pasted wrongly and aren't clearing the depth buffer, thus subsequent triangles fail the default depth test (it is weird for you to enable the depth test without setting the depth function).</p>\n"}], "owner": {"reputation": 390, "user_id": 5410802, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8d6063cf0206be87ef8ec382f2da1f50?s=128&d=identicon&r=PG&f=1", "display_name": "Keith Becker", "link": "https://stackoverflow.com/users/5410802/keith-becker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 454, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1462414822, "creation_date": 1462397226, "last_edit_date": 1462409026, "question_id": 37038335, "link": "https://stackoverflow.com/questions/37038335/what-is-wrong-with-my-opengl-with-sdl2-code", "title": "What is wrong with my OpenGL with SDL2 code?", "body": "<p>I am unable to draw to a window I have created with the code written below.</p>\n\n<p>What I know is correct:</p>\n\n<ul>\n<li>sdl2 init</li>\n<li>glew init</li>\n<li>window creation</li>\n<li>context creation</li>\n</ul>\n\n<p>What I think might be the problem:</p>\n\n<ul>\n<li>glsl shaders, BUT they ARE compiling successful.</li>\n<li>glVertexAttribPointer()</li>\n<li>missing function calls?</li>\n</ul>\n\n<p>What I have ruled out with error checking:</p>\n\n<ul>\n<li>sdl init</li>\n<li>glew init</li>\n<li>window creation</li>\n<li>context creation</li>\n<li>vertex shader compilation</li>\n<li>fragment shader compilation</li>\n<li>program linking</li>\n</ul>\n\n<p>note: I have written my shaders inline (glsl.h).</p>\n\n<p>main.cpp</p>\n\n<pre><code>    #include &lt;GL\\glew.h&gt;\n    #include &lt;SDL.h&gt;\n    #include &lt;glm\\glm.hpp&gt;\n    #include &lt;iostream&gt;\n    #include \"glsl.h\"\n\n    #define SDL_INIT_FAIL -1\n    #define IMAGE_INIT_FAIL 0\n\n    #define glsl(version, glsl) \"#version \" #version \"\\n\" #glsl\n\n    namespace glsl { namespace vs {\n    //VERTEX SHADERS\n    //=========================\n    // simple VS\n    //=========================\n    constexpr GLchar * const simple = glsl(450 core, \n        layout(location = 0) in vec3 position;\n\n        void main() {\n            gl_Position = vec4(position, 1.0f);\n        }\n        );\n\n    } namespace fs {\n    //FRAGMENT SHADERS\n    //=========================\n    // simple FS\n    //=========================\n    constexpr GLchar * const simple = glsl(450 core,\n        out vec4 color;\n\n        void main() {\n            color = vec4(1.0f, 0.0f, 0.0f, 1.0f);\n        }       \n        );\n\n} }\n\n    constexpr GLint image_Flags{ IMG_INIT_PNG | IMG_INIT_JPG };\n    constexpr GLuint init_Flags{ SDL_INIT_VIDEO | SDL_INIT_EVENTS },window_Flags{ SDL_WINDOW_OPENGL | SDL_WINDOW_RESIZABLE};\n    constexpr GLchar * window_Title{ \"Sprite Game with OpenGL\" };\n    constexpr GLint window_Width{ 1200 }, window_Height{ 740 }, window_PositionX{ SDL_WINDOWPOS_CENTERED },\n        window_PositionY{ SDL_WINDOWPOS_CENTERED };\n\n    int main(int argc, char * argv[]) {\n\n        std::cout &lt;&lt; glsl::vs::simple &lt;&lt; std::endl &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; glsl::fs::simple &lt;&lt; std::endl &lt;&lt; std::endl;\n    system(\"pause\");\n\n    if (SDL_Init(init_Flags) == SDL_INIT_FAIL) {\n        std::cerr &lt;&lt; \"error init sdl\" &lt;&lt; std::endl;\n        return 1;\n    }\n\n    SDL_GL_SetAttribute(SDL_GL_RED_SIZE, 8);\n    SDL_GL_SetAttribute(SDL_GL_BLUE_SIZE, 8);\n    SDL_GL_SetAttribute(SDL_GL_GREEN_SIZE, 8);\n    SDL_GL_SetAttribute(SDL_GL_ALPHA_SIZE, 8);\n    SDL_GL_SetAttribute(SDL_GL_BUFFER_SIZE, 32);\n    SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 23);\n    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 4);\n    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 5);\n    SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE);\n\n    SDL_Window * window = nullptr;\n    window = SDL_CreateWindow(window_Title, window_PositionX, window_PositionY, window_Width, window_Height, window_Flags);\n    if (window == nullptr) {\n         std::cerr &lt;&lt; \"error window is nullptr\" &lt;&lt; std::endl;\n        SDL_Quit();\n        return 4;\n    }\n\n    SDL_GLContext context = nullptr;\n    context = SDL_GL_CreateContext(window);\n    if (context == nullptr) {\n        std::cerr &lt;&lt; \"error context is nullptr\" &lt;&lt; std::endl;\n        SDL_DestroyWindow(window);\n        window = nullptr;\n        SDL_Quit();\n        return 5;\n    }\n\n    glewExperimental = true;\n\n    GLenum glewError = glewInit();\n    if (glewError != GLEW_OK) {\n        std::cerr &lt;&lt; \"error glew init: \" &lt;&lt; glewGetErrorString(glewError) &lt;&lt; std::endl;\n        SDL_Quit();\n        return 3;\n    }\n    std::cout &lt;&lt; \"OpenGL Version \" &lt;&lt; glGetString(GL_VERSION) &lt;&lt; std::endl;\n\n    struct Mouse\n    {\n        Uint32 mouseState = 0;\n        GLint mx{ 0 }, my{ 0 };\n    };\n    struct Input {\n        Mouse mouse;\n        SDL_Event e;\n        const Uint8 * keyState = nullptr;\n\n    } input;\n    struct Shader {\n        GLuint program;\n        GLuint vertexShader;\n        GLuint fragmentShader;\n    } shader;\n\n    shader.vertexShader = glCreateShader(GL_VERTEX_SHADER);\n    glShaderSource(shader.vertexShader, 1, &amp;glsl::vs::simple, NULL);\n    glCompileShader(shader.vertexShader);\n\n    GLint vertexCompilei;\n    GLchar vsiInfo[512];\n    glGetShaderiv(shader.vertexShader, GL_COMPILE_STATUS, &amp;vertexCompilei);\n    if (vertexCompilei == GL_FALSE) {\n        glGetShaderInfoLog(shader.vertexShader, sizeof vsiInfo, NULL, vsiInfo);\n        std::cerr &lt;&lt; vsiInfo &lt;&lt; std::endl;\n    }\n\n    shader.fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);\n    glShaderSource(shader.fragmentShader, 1, &amp;glsl::fs::simple, NULL);\n    glCompileShader(shader.fragmentShader);\n\n    GLint fragmentCompilei;\n    GLchar fsiInfo[512];\n    glGetShaderiv(shader.fragmentShader, GL_COMPILE_STATUS, &amp;fragmentCompilei);\n    if (fragmentCompilei == GL_FALSE) {\n        glGetShaderInfoLog(shader.fragmentShader, sizeof fsiInfo, NULL, fsiInfo);\n        std::cerr &lt;&lt; fsiInfo &lt;&lt; std::endl;\n    }\n\n    shader.program = glCreateProgram();\n    glAttachShader(shader.program, shader.vertexShader);\n    glAttachShader(shader.program, shader.fragmentShader);\n    glLinkProgram(shader.program);\n\n    GLint programLinki;\n    GLchar programInfo[512];\n    glGetProgramiv(shader.program, GL_LINK_STATUS, &amp;programLinki);\n    if (programLinki == GL_FALSE) {\n        glGetProgramInfoLog(shader.program, sizeof programInfo, NULL, programInfo);\n        std::cerr &lt;&lt; programInfo &lt;&lt; std::endl;\n    }\n\n\n    struct Object {\n        GLuint VAO;\n        GLuint VBO;\n    } object;\n\n    GLfloat vertices[] = {\n        -0.5f, -0.5f, 0.0f,\n         0.5f, -0.5f, 0.0f,\n         0.0f,  0.5f, 0.0f\n    };\n\n    glGenVertexArrays(1, &amp;object.VAO);\n    glGenBuffers(1, &amp;object.VBO);\n\n    glBindVertexArray(object.VAO);\n    glBindBuffer(GL_ARRAY_BUFFER, object.VBO);\n    glBufferData(GL_ARRAY_BUFFER, sizeof vertices, vertices, GL_STATIC_DRAW);\n\n    glEnableVertexAttribArray(0);\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, sizeof GLfloat * 3, (GLvoid*)0);\n\n    glBindVertexArray(0);\n\n    glEnable(GL_DEPTH_TEST);\n\n    do {\n        glViewport(0, 0, window_Width, window_Height);\n        glClearColor(0.3f, 0.1f, 0.1f, 1.0f);\n        glClear(GL_COLOR_BUFFER_BIT | GL_COLOR_BUFFER_BIT);\n\n        glUseProgram(shader.program);\n        glBindVertexArray(object.VAO);\n        glDrawArrays(GL_TRIANGLES, 0, 3);\n        glBindVertexArray(0);\n        glUseProgram(0);\n\n        SDL_GL_SwapWindow(window);\n\n        SDL_PollEvent(&amp;input.e);\n        input.keyState = SDL_GetKeyboardState(0);\n        input.mouse.mouseState = SDL_GetMouseState(&amp;input.mouse.mx, &amp;input.mouse.my);\n    } while (!input.keyState[SDL_SCANCODE_ESCAPE] &amp;&amp; input.e.type != SDL_QUIT);\n\n\n    glDeleteShader(shader.vertexShader);\n    glDeleteShader(shader.fragmentShader);\n    glDeleteProgram(shader.program);\n    SDL_GL_DeleteContext(context);\n    context = nullptr;\n    SDL_DestroyWindow(window);\n    window = nullptr;\n    SDL_Quit();\n    return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "hash"], "answers": [{"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 1, "last_activity_date": 1462399523, "last_edit_date": 1462399523, "creation_date": 1462398880, "answer_id": 37038748, "question_id": 37038328, "link": "https://stackoverflow.com/questions/37038328/what-is-the-best-way-to-implement-a-hash-rotation-method-in-c/37038748#37038748", "title": "What is the best way to implement a Hash rotation method in C++?", "body": "\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int rotate(int value)\n{\n    bool isNegative = value &lt; 0;\n    if(isNegative)\n        value = -value;\n    int v = value % 10;\n    value /= 10;\n    while(v &lt; value)\n        v *= 10;\n    value += v;\n    return isNegative ? -value : value;\n}\n</code></pre>\n\n<p>This will rotate your numbers according to their number of ciphers (123 gets 312, 1234 gets 4123).</p>\n\n<p>For the file part: You would have to open it, read the values, convert them to int and call the function:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>::std::ifstream in(\"filename\");\nif(in.fail())\n{\n    // error\n}\nelse\n{\n    int n;\n    for(;;)\n    {\n        in &gt;&gt; n;\n        if(in.eof() || in.fail())\n            break;\n\n        ::std::cout &lt;&lt; rotate(n) &lt;&lt; ::std::endl;\n    }\n    in.close();\n}\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5464963, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-s76WJsTM9Lg/AAAAAAAAAAI/AAAAAAAAHmw/NcqBW_YQIZo/photo.jpg?sz=128", "display_name": "That guy", "link": "https://stackoverflow.com/users/5464963/that-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "accepted_answer_id": 37038748, "answer_count": 1, "score": 0, "last_activity_date": 1462399523, "creation_date": 1462397181, "question_id": 37038328, "link": "https://stackoverflow.com/questions/37038328/what-is-the-best-way-to-implement-a-hash-rotation-method-in-c", "title": "What is the best way to implement a Hash rotation method in C++?", "body": "<p>I'm trying to understand hash tables and hash methods (such as division and multiplication), and I was wondering how to implement a rotation method when keys are serial. Say I had a function named <code>int rotation(int value)</code> and I had a integer like <code>int test = 123456</code>, and I wanted to get the result 612345. What would be the best way to implement this universally (lets say with a text file of 1000 integer groups)?</p>\n"}, {"tags": ["c++", "c", "cuda", "gpgpu"], "answers": [{"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": false, "score": 1, "last_activity_date": 1462411313, "last_edit_date": 1495535632, "creation_date": 1462409081, "answer_id": 37040488, "question_id": 37038317, "link": "https://stackoverflow.com/questions/37038317/using-c-header-structure-for-cuda-code/37040488#37040488", "title": "Using C++ header structure for CUDA code", "body": "<p>No, this will not work:</p>\n\n<pre><code>class MyClass\n{\n    ...\n      __global__ void myKernel();\n</code></pre>\n\n<p>the compiler will not let you define a class member function that is a <code>__global__</code> function (try it).  Even if you could, such a function running on the device would not have the usual class access to other class data or function members.  So the usual advice is to declare your kernel definition outside the scope of the class, and have a wrapper member function in the class that calls the kernel.</p>\n\n<p>Some additional discussion is <a href=\"https://stackoverflow.com/questions/13748231/cuda-kernel-as-member-function-of-a-class\">here</a> and <a href=\"https://stackoverflow.com/questions/17535959/member-function-of-a-c-object-as-a-cuda-global-function\">here</a></p>\n"}], "owner": {"reputation": 75, "user_id": 4333489, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1231f660f0d045108c46ce96818d1b96?s=128&d=identicon&r=PG&f=1", "display_name": "WaffleMan0310", "link": "https://stackoverflow.com/users/4333489/waffleman0310"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1462411313, "creation_date": 1462397160, "last_edit_date": 1462408781, "question_id": 37038317, "link": "https://stackoverflow.com/questions/37038317/using-c-header-structure-for-cuda-code", "title": "Using C++ header structure for CUDA code", "body": "<p>I know that this question has probably been asked, but I can't find an answer that particularly answers my question so here it goes...</p>\n\n<p>The question is pretty simple, I am trying to use a C++ style header for CUDA (.cu/.cuh) code.</p>\n\n<pre><code>//MyClass.cuh\n#ifndef MY_CLASS\n#define MY_CLASS\n#include ...cuda.h, etc.\nclass MyClass\n{\n   public:\n      void myFunction();   \n   private:\n      __global__ void myKernel();\n}\n#endif\n\n//MyClass.cu\n#include \"MyClass.cuh\"\nvoid MyClass::myFunction()\n{\n   //myFunction definition...\n}\n\n__global__ void MyClass::myKernel()\n{\n   //myKernel definition...\n}\n</code></pre>\n\n<p>Will this work?</p>\n"}, {"tags": ["c++", "algorithm", "range"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1462397319, "post_id": 37038311, "comment_id": 61626744, "body": "You forgot one: pass a range and an iterator which is a <a href=\"http://en.cppreference.com/w/cpp/iterator/back_inserter\" rel=\"nofollow noreferrer\"><code>std::back_inserter</code></a>, which automatically grows the destination container."}, {"owner": {"reputation": 907, "user_id": 3964037, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1667882889/picture?type=large", "display_name": "Alexander Bily", "link": "https://stackoverflow.com/users/3964037/alexander-bily"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1462397603, "post_id": 37038311, "comment_id": 61626894, "body": "I think this falls under b) if you pass something like back_inserter range, however how can you enforce that passed range behave like back_inserter?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1462397967, "post_id": 37038311, "comment_id": 61627052, "body": "I took your comment about iterator validity checking to mean you were passing a range to an already populated container."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1462398388, "post_id": 37038311, "comment_id": 61627249, "body": "I will vote vote <i>d</i> even if it requires additional works"}], "owner": {"reputation": 907, "user_id": 3964037, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1667882889/picture?type=large", "display_name": "Alexander Bily", "link": "https://stackoverflow.com/users/3964037/alexander-bily"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462397135, "creation_date": 1462397135, "question_id": 37038311, "link": "https://stackoverflow.com/questions/37038311/c-filter-algorithm-implementation", "title": "C++ filter algorithm implementation", "body": "<p>I am trying to create filter algorithm for my range library. I found 4 different approaches, how this could be done, with different pros &amp; cons.</p>\n\n<p><strong>a) Allocate new range, to which filtered range is copied</strong></p>\n\n<p>pros: original range is not mutated, size of new range is automatically adjusted to have same size as number of filtered elements</p>\n\n<p>cons: I am not sure, if algorithms should be allowed to allocate memory</p>\n\n<p><strong>b) Pass another range as parameter to algorithm &amp; c) Override original range</strong></p>\n\n<p>pros: relatively straight forward implementation</p>\n\n<p>cons: in b), need for iterator validity checking in range I am copying filtered elements into,</p>\n\n<p>in c) what will happen with elements past-the-end of original range?</p>\n\n<p><strong>d) Create adaptor over original range, which will act as filtered range</strong></p>\n\n<p>pros: original range is not mutated, can be applied lazily</p>\n\n<p>cons: need for filtered range adaptor class</p>\n\n<p>Which one of these possible approaches do you think is best? Should I make it possible to use multiple of these versions? Do you think that algorithms should be allowed to allocate memory (perhaps some simple temporary data structure)?</p>\n"}, {"tags": ["c++", "c++-standard-library", "math.h"], "comments": [{"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 4, "creation_date": 1462396581, "post_id": 37038073, "comment_id": 61626386, "body": "An interesting and related reading from @JonathanWakely: <a href=\"http://developers.redhat.com/blog/2016/02/29/why-cstdlib-is-more-complicated-than-you-might-think/\" rel=\"nofollow noreferrer\">developers.redhat.com/blog/2016/02/29/&hellip;</a>"}, {"owner": {"reputation": 3966, "user_id": 2132213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31de75b6e3603efbc437ab3475a757d?s=128&d=identicon&r=PG", "display_name": "Nick Matteo", "link": "https://stackoverflow.com/users/2132213/nick-matteo"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1462398079, "post_id": 37038073, "comment_id": 61627104, "body": "@myaut Indeed, very relevant! It sounds like GCC 6 should be the first platform where <code>#include &lt;math.h&gt;</code> brings in the <code>abs</code> overloads. I will check it out. To be honest, I prefer the notion that <code>&lt;cxxx&gt;</code> brings C++-style overloads and <code>&lt;xxx.h&gt;</code> directly includes the system C header, if you want that."}, {"owner": {"reputation": 3966, "user_id": 2132213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31de75b6e3603efbc437ab3475a757d?s=128&d=identicon&r=PG", "display_name": "Nick Matteo", "link": "https://stackoverflow.com/users/2132213/nick-matteo"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1462398357, "post_id": 37038073, "comment_id": 61627226, "body": "Yes, it works: <a href=\"http://melpon.org/wandbox/permlink/jxEYMKonFBkJiaeH\" rel=\"nofollow noreferrer\">melpon.org/wandbox/permlink/jxEYMKonFBkJiaeH</a>"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1462402442, "post_id": 37038655, "comment_id": 61628723, "body": "Also, it says <b>name</b>, not &quot;overload&quot;.  <code>abs</code> is a name. Placing <code>abs</code> in the global namespace (without declaring the additional overloads) complies with this requirement"}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 2, "last_activity_date": 1462398832, "last_edit_date": 1462398832, "creation_date": 1462398512, "answer_id": 37038655, "question_id": 37038073, "link": "https://stackoverflow.com/questions/37038073/does-the-c-standard-require-include-math-h-to-define-the-abs-overloads/37038655#37038655", "title": "Does the C++ standard require `#include &lt;math.h&gt;` to define the `abs` overloads found in `&lt;cmath&gt;`?", "body": "<p><strong><em>\"Every C header, each of which has a name of the form name.h, behaves as if each name placed in the standard library namespace by the corresponding cname header is placed within the global namespace scope.\"</em></strong></p>\n\n<p>That wording, to me, does not say that every name in the <code>&lt;cname&gt;</code> header must appear in the <code>name.h</code> header.</p>\n\n<p>It says that every name in the <code>&lt;name.h&gt;</code> header <strong><em>that has a corresponding name</em></strong> in the <code>&lt;cname&gt;</code> header must appear in the global namespace.</p>\n\n<p>It says nothing about names in the <code>&lt;cname&gt;</code> header that do not appear in the <code>&lt;name.h&gt;</code> header.</p>\n\n<blockquote>\n  <p><strong>C++14</strong> Stadard</p>\n  \n  <p><strong>D.5</strong> C standard library headers <strong>[</strong> depr.c.headers <strong>]</strong></p>\n  \n  <p>For compatibility with the C standard library and the C Unicode TR, the C ++ standard library provides <strong>the 26 C headers</strong>, as shown in Table</p>\n</blockquote>\n\n<p>This statement uses the term \"the 26 C headers\" suggesting that they contain what the C Standard says they should contain, not what the <code>C++</code> Standard says that <code>&lt;cname&gt;</code> should contain.</p>\n\n<p>Indeed, regarding <code>&lt;cstddef&gt;</code>, for example, it details things <em>not contained</em> in the corresponding <code>C</code> header.</p>\n\n<p><strong>eg</strong></p>\n\n<blockquote>\n  <p><strong>18.2 Types</strong> <strong>[</strong> support.types <strong>]</strong></p>\n  \n  <p><strong>2</strong> The contents are the same as the Standard C library header <code>&lt;stddef.h&gt;</code>, with the following changes...</p>\n</blockquote>\n"}], "owner": {"reputation": 3966, "user_id": 2132213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31de75b6e3603efbc437ab3475a757d?s=128&d=identicon&r=PG", "display_name": "Nick Matteo", "link": "https://stackoverflow.com/users/2132213/nick-matteo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7751, "favorite_count": 3, "answer_count": 1, "score": 15, "last_activity_date": 1462398832, "creation_date": 1462396209, "last_edit_date": 1495541273, "question_id": 37038073, "link": "https://stackoverflow.com/questions/37038073/does-the-c-standard-require-include-math-h-to-define-the-abs-overloads", "title": "Does the C++ standard require `#include &lt;math.h&gt;` to define the `abs` overloads found in `&lt;cmath&gt;`?", "body": "<p>The C++ standard defines some overloaded functions in the <code>&lt;cmath&gt;</code> header that are not part of the <code>&lt;math.h&gt;</code> header in C (because C doesn't have overloading).\nAmong these are <code>float abs(float)</code>, <code>double abs(double)</code>, <code>long double abs(long double)</code>, and <code>double abs(Integral)</code>.\nOn the other hand, <code>abs</code> is not defined in the C <code>&lt;math.h&gt;</code> at all (it is in <code>&lt;stdlib.h&gt;</code> instead) and the only signature is <code>int abs(int)</code>.</p>\n\n<p>Now on my systems, when using a C++ compiler with a C++ program, <code>#include &lt;math.h&gt;</code> does not provide the C++ <code>abs</code> overloads, either in the global namespace or in <code>std</code>.\nOn the other hand, <code>#include &lt;cmath&gt;</code> defines <code>std::abs</code>.</p>\n\n<p>This is what I'd expect\u2014include the C version to get the C functions, and include the C++ version to get the C++ functions. <a href=\"https://stackoverflow.com/a/7596625/2132213\">This answer</a> by @visitor mentions the same thing.</p>\n\n<p>However, user @Cheers-and-hth-Alf insists that this is a violation of the standard, because it says \"Every C header, each of which has a name of the form <code>name.h</code>, behaves as if each name placed in the standard library namespace by the corresponding <em>cname</em> header is placed within the global namespace scope.\" (This section, D.5.2, doesn't seem to have changed significantly between C++03, C++11, and C++14.)</p>\n\n<p>It's easy enough to check what your platform does: see what happens with</p>\n\n<pre><code>#include &lt;math.h&gt;\n\nint main() {\n    abs(1.2);\n    return 0;\n}\n</code></pre>\n\n<p>If <code>abs</code> is not declared, then <code>&lt;math.h&gt;</code> does not include C++ functions.</p>\n\n<p>If it compiles, then try including <code>&lt;stdio.h&gt;</code>\nand add <code>printf(\"%g\\n\", abs(1.2));</code>\nIf this complains about a mismatched format, or prints 1, then <code>&lt;math.h&gt;</code>\nincludes the C <code>int abs(int)</code> function (normally in <code>&lt;stdlib.h&gt;</code>).\n(It's best to avoid <code>&lt;iostream&gt;</code> and other C++ headers since they tend to pull in <code>&lt;cstdlib&gt;</code> and confuse the issue.)</p>\n\n<p>Here's what I've found:</p>\n\n<h3>GNU libstdc++</h3>\n\n<pre><code>$ g++ -Wall -Wextra abs2.cc -o abs2\nabs2.cc: In function 'int main()':\nabs2.cc:5:22: error: 'abs' was not declared in this scope\n  std::cout &lt;&lt; abs(1.2) &lt;&lt; '\\n';\n</code></pre>\n\n<p>The <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/using_headers.html#manual.intro.using.headers.cheaders\" rel=\"nofollow noreferrer\">libstdc++ docs on the subject</a>\nrecommend including C++-style headers <code>&lt;c*&gt;</code> rather than C-style headers <code>&lt;*.h&gt;</code> precisely because\nC++-style headers use function overloading, and the C-style headers do not.</p>\n\n<h3>Apple libc++</h3>\n\n<pre><code>$ clang++ -Wall -Wextra abs2.cc -o abs2\nabs2.cc:4:5: error: use of undeclared identifier 'abs'; did you mean 'fabs'?\n</code></pre>\n\n<p>Additionally, if you also include <code>&lt;stdlib.h&gt;</code> to get a definition of <code>abs</code>, clang++ gives\nthe more helpful error message</p>\n\n<pre><code>abs2.cc:5:5: warning: using integer absolute value function 'abs' when argument is of floating point type [-Wabsolute-value]\n    abs(1.2);\n    ^\nabs2.cc:5:5: note: use function 'std::abs' instead\n    abs(1.2);\n    ^~~\n    std::abs\nabs2.cc:5:5: note: include the header &lt;cmath&gt; or explicitly provide a declaration for 'std::abs'\nabs2.cc:5:9: warning: implicit conversion from 'double' to 'int' changes value from 1.2 to 1 [-Wliteral-conversion]\n    abs(1.2);\n    ~~~ ^~~\nabs2.cc:5:5: warning: ignoring return value of function declared with const attribute [-Wunused-value]\n    abs(1.2);\n    ^~~ ~~~\n</code></pre>\n\n<p>This explicitly says that the float overloads are only available from <code>&lt;cmath&gt;</code>, not from the\nC traditional headers.</p>\n\n<h3>Apache libstdcxx</h3>\n\n<p>I didn't install it, but examining the <a href=\"http://svn.apache.org/viewvc/stdcxx/trunk/include/ansi/math.h?view=markup\" rel=\"nofollow noreferrer\">math.h header</a>, it brings those functions from <code>&lt;cmath&gt;</code> which are also defined in C's <code>&lt;math.h&gt;</code> into the global namespace, but does not include <code>abs</code>.</p>\n\n<h3>OpenWatcom C++</h3>\n\n<p>Again, examining the <a href=\"https://github.com/open-watcom/open-watcom-v2/blob/c8032600d2aa7fffd916452ae528b31e51d840fa/bld/hdr/watcom/math.mh\" rel=\"nofollow noreferrer\">cmath/math.h header</a>,\nwhen used as <code>math.h</code> it brings the same functions into the global namespace as Apache libstdcxx did, not including <code>abs</code>.</p>\n\n<h3>STLPort</h3>\n\n<p>Examining the <a href=\"https://sourceforge.net/p/stlport/code/ci/master/tree/stlport/math.h\" rel=\"nofollow noreferrer\">math.h header</a>, it includes the system's C <code>&lt;math.h&gt;</code> header, which is not part of the C++ library and so doesn't include <code>abs</code>. (This is also what g++ and clang++ did.)</p>\n\n<h3>Microsoft Visual Studio (Dinkumware)</h3>\n\n<p>I don't have access to this myself,\nbut <a href=\"http://rextester.com/VPDG81796\" rel=\"nofollow noreferrer\">this site</a> claims to compile using Visual C++,\nand it says</p>\n\n<pre><code>error C4578: 'abs': conversion from 'double' to 'int', possible loss of data\n(Did you mean to call 'fabs' or to #include &lt;cmath&gt;?) \n</code></pre>\n\n<p>So, is literally <em>every</em> major C++ standard library implementation\nin violation of the standard on this point?</p>\n\n<p>Or are we missing something that the standard says about <code>&lt;math.h&gt;</code> and other traditional C headers?</p>\n"}, {"tags": ["c++", "c++11", "vector"], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 3, "last_activity_date": 1462396381, "creation_date": 1462396381, "answer_id": 37038131, "question_id": 37038012, "link": "https://stackoverflow.com/questions/37038012/c-vector-change-type/37038131#37038131", "title": "C++ vector change type", "body": "<p>The <code>std::vector</code> range constructor specifically <a href=\"http://www.cplusplus.com/reference/vector/vector/vector/\" rel=\"nofollow\">says</a>:</p>\n\n<blockquote>\n  <p>(3) range constructor\n      Constructs a container with as many elements as the range [first,last), with each element constructed from its corresponding\n  element in that range, in the same order.</p>\n</blockquote>\n\n<p>This means that if your <code>UINT16</code> vector <code>u</code> has 10 elements, <code>v</code> <em>will</em> have 10 elements too. Not caring about any overflow it may cause. If by 'valid' you mean that it will magically split up uint16 values into 2 uint8's and add them to <code>v</code> then no, that's not the case.</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1462397381, "post_id": 37038146, "comment_id": 61626776, "body": "I am curious why you say <i>(Is it safe is another question entirely)</i>.  Do you feel this is unsafe?"}, {"owner": {"reputation": 116, "user_id": 5627107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbd8c6e1e56c1885e6930a88c29201a?s=128&d=identicon&r=PG&f=1", "display_name": "DarmaniLink", "link": "https://stackoverflow.com/users/5627107/darmanilink"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462397657, "post_id": 37038146, "comment_id": 61626918, "body": "This more of a general answer, not so much 100% applying to this. Since several examples are shortened, they&#39;re rarely the original thing. If you&#39;re using pointers, this has a chance at being unsafe (due to different sizes)."}], "tags": [], "owner": {"reputation": 116, "user_id": 5627107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbd8c6e1e56c1885e6930a88c29201a?s=128&d=identicon&r=PG&f=1", "display_name": "DarmaniLink", "link": "https://stackoverflow.com/users/5627107/darmanilink"}, "is_accepted": false, "score": 1, "last_activity_date": 1462396452, "creation_date": 1462396452, "answer_id": 37038146, "question_id": 37038012, "link": "https://stackoverflow.com/questions/37038012/c-vector-change-type/37038146#37038146", "title": "C++ vector change type", "body": "<p>From the <code>Windows.h</code> header:</p>\n\n<pre><code>typedef unsigned char       UINT8, *PUINT8;\ntypedef unsigned short      UINT16, *PUINT16;\n</code></pre>\n\n<p>Char and Short can both be used as numbers.</p>\n\n<p>They both have an implicit conversion between themselves. </p>\n\n<p>Yes, it is valid. (Is it safe is another question entirely) </p>\n\n<p>However, previous numeric \"limits\" will be lost, as due to the nature of vectors these will be allocated to fit the \"fitting\" vector. This may cause issues depending on the value of the UINT16's</p>\n"}], "owner": {"reputation": 2037, "user_id": 638575, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3e26cd8195ec30dfe1f1a6c7a0adf47b?s=128&d=identicon&r=PG", "display_name": "pree", "link": "https://stackoverflow.com/users/638575/pree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1241, "favorite_count": 0, "accepted_answer_id": 37038131, "answer_count": 2, "score": 0, "last_activity_date": 1462396452, "creation_date": 1462396018, "last_edit_date": 1495540780, "question_id": 37038012, "link": "https://stackoverflow.com/questions/37038012/c-vector-change-type", "title": "C++ vector change type", "body": "<p>I'm wondering if the below is a valid conversion of vector type:</p>\n\n<pre><code>vector&lt;UINT16&gt; u;\nvector&lt;UINT8&gt; v(u.begin(), u.end());\n</code></pre>\n\n<p>I found this link relevant:\n<a href=\"https://stackoverflow.com/questions/6399090/c-convert-vectorint-to-vectordouble\">C++ convert vector&lt;int&gt; to vector&lt;double&gt;</a></p>\n\n<p>However, need to confirm if the above conversion is valid or not.</p>\n"}, {"tags": ["c++", "qt", "memory", "memory-leaks"], "comments": [{"owner": {"reputation": 241, "user_id": 6292802, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a4630aed5a387ff28a4ed7495e4b024e?s=128&d=identicon&r=PG&f=1", "display_name": "MindRoller", "link": "https://stackoverflow.com/users/6292802/mindroller"}, "edited": false, "score": 0, "creation_date": 1462396825, "post_id": 37038010, "comment_id": 61626509, "body": "Actually, I&#39;ve just checked more carefully and elements ARE being added to QMap. However, I still get an error after deleting createMatrix in MainWindow on_createButton_clicked()"}, {"owner": {"reputation": 507, "user_id": 4993180, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/EAtti.jpg?s=128&g=1", "display_name": "Striker", "link": "https://stackoverflow.com/users/4993180/striker"}, "edited": false, "score": 0, "creation_date": 1462400037, "post_id": 37038010, "comment_id": 61627958, "body": "In your destructor your matrix is a 2d array. You have deleted the &#39;columns&#39; but not the &#39;rows&#39;. You need &#39;delete matrix at the end of the loop&#39;"}, {"owner": {"reputation": 507, "user_id": 4993180, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/EAtti.jpg?s=128&g=1", "display_name": "Striker", "link": "https://stackoverflow.com/users/4993180/striker"}, "edited": false, "score": 0, "creation_date": 1462400156, "post_id": 37038010, "comment_id": 61628001, "body": "Is on_okButton_clicked() called multiple times? If so, everytime it is called you are creating a new array without deleting the old one"}, {"owner": {"reputation": 241, "user_id": 6292802, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a4630aed5a387ff28a4ed7495e4b024e?s=128&d=identicon&r=PG&f=1", "display_name": "MindRoller", "link": "https://stackoverflow.com/users/6292802/mindroller"}, "reply_to_user": {"reputation": 507, "user_id": 4993180, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/EAtti.jpg?s=128&g=1", "display_name": "Striker", "link": "https://stackoverflow.com/users/4993180/striker"}, "edited": false, "score": 0, "creation_date": 1462436127, "post_id": 37038010, "comment_id": 61639558, "body": "Yeah, on_okButton is called multiple times, however, after on_okButton is called, a on_createButton is called and array gets destroyed. I guess I figured it out - problem was in deleting 2d array in my Matrix class. Well, thanks for an answer on this."}], "answers": [{"tags": [], "owner": {"reputation": 12244, "user_id": 223880, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4d82c36ef02bf2939591a270a8f5a958?s=128&d=identicon&r=PG", "display_name": "Kamil Klimek", "link": "https://stackoverflow.com/users/223880/kamil-klimek"}, "is_accepted": false, "score": 0, "last_activity_date": 1462438189, "creation_date": 1462438189, "answer_id": 37046268, "question_id": 37038010, "link": "https://stackoverflow.com/questions/37038010/qt-adding-elements-to-map-and-memory-leaks/37046268#37046268", "title": "Qt - adding elements to map and memory leaks", "body": "<pre><code>void MainWindow::setMatrix(Matrix *matrix)\n{\n    matrixMap[matrix-&gt;getName()] = *matrix;\n}\n</code></pre>\n\n<p>You're adding copy of the matrix to your map. So here you have a leak.</p>\n\n<pre><code>void MainWindow::setMatrix(Matrix *matrix)\n{\n    matrixMap[matrix-&gt;getName()] = *matrix;\n    delete matrix;\n}\n</code></pre>\n\n<p>This should fix your problem.</p>\n\n<p>Use valgrind to profile your application and find memory leaks: <a href=\"http://valgrind.org/docs/manual/quick-start.html\" rel=\"nofollow\">http://valgrind.org/docs/manual/quick-start.html</a></p>\n"}], "owner": {"reputation": 241, "user_id": 6292802, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a4630aed5a387ff28a4ed7495e4b024e?s=128&d=identicon&r=PG&f=1", "display_name": "MindRoller", "link": "https://stackoverflow.com/users/6292802/mindroller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462438189, "creation_date": 1462396015, "question_id": 37038010, "link": "https://stackoverflow.com/questions/37038010/qt-adding-elements-to-map-and-memory-leaks", "title": "Qt - adding elements to map and memory leaks", "body": "<p>I am working on a matrix calculator and I encountered a really annoying problem, have been trying to fix it for 3 hours now, but it's getting worse instead of getting better. Maybe you will be able to help.</p>\n\n<p>This is my MainWindow class:</p>\n\n<pre><code>    #ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n#include &lt;QPushButton&gt;\n#include &lt;QGridLayout&gt;\n#include &lt;QLabel&gt;\n#include \"addmatrix.h\"\n#include \"memory.h\"\n#include \"matrixcreation.h\"\n#include &lt;QMap&gt;\n#include \"matrix.h\"\n\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(MainWindow *parent = 0);\n    ~MainWindow();\n\n\nprivate slots:\n    void on_createButton_clicked();\n    void setMatrix(Matrix *matrix);\n\nprivate:\n    Matrix getMatrixFromMemory(QString &amp;name);\n    void addMatrixToMemory();\n    Ui::MainWindow *ui;\n    AddMatrix *add;\n    MatrixCreation *matrixCreate;\n    QMap &lt;QString, Matrix&gt; matrixMap;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>.cpp file</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(MainWindow *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n    this-&gt;setWindowTitle(\"Matrix Calculator\");\n    add = NULL;\n    matrixCreate = NULL;\n\n\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n    delete add;\n    delete matrixCreate;\n    matrixMap.clear();\n\n}\n\n\nvoid MainWindow::on_createButton_clicked()\n{\n    if (add != NULL)\n    {\n        delete add;\n        add = new AddMatrix;\n    }\n    else\n        add = new AddMatrix;\n    if (matrixCreate != NULL)\n    {\n        ui-&gt;label-&gt;setText(getMatrixFromMemory(matrixCreate-&gt;getMatrix()-&gt;getName()).getName());\n        delete matrixCreate;\n        matrixCreate = new MatrixCreation;\n    }\n    else\n        matrixCreate = new MatrixCreation;\n\n    // Polaczenie sygnalow ze slotami\n\n    // Sluzy ustawieniu liczby wierszy w matrixCreate\n    connect(add-&gt;getCombo1(), SIGNAL(currentIndexChanged(QString)), matrixCreate, SLOT(setRows(QString)));\n\n    // Jak wyzej, tylko kolumn\n    connect(add-&gt;getCombo2(), SIGNAL(currentIndexChanged(QString)), matrixCreate, SLOT(setColumns(QString)));\n\n    // Ustawienie pola name w matrixCreate\n\n\n       connect(add-&gt;getEdit(), SIGNAL(textChanged(QString)), matrixCreate, SLOT(setName(QString)));\n\n        // Po ustawieniu liczby wierszy i kolumn oraz nazwy macierzy - wywola sie slot updateTable\n        // ktory sluzy do ustawienia rozmiaru okna i tabeli\n        connect(add, SIGNAL(setupSuccessful()), matrixCreate, SLOT(updateTable()));\n\n        // Po ustawieniu wierszy, kolumn, ustawieniu nazwy, rozmiarow, wywola sie slot show matrixCreate\n        connect(add, SIGNAL(setupSuccessful()), matrixCreate, SLOT(show()));\n\n        // Sluzy dodaniu macierzy do pamieci (mapy)\n        connect(matrixCreate, SIGNAL(matrixReady(Matrix*)), this, SLOT(setMatrix(Matrix*)));\n\n        add-&gt;show();\n    }\n\n    void MainWindow::setMatrix(Matrix *matrix)\n    {\n        matrixMap[matrix-&gt;getName()] = *matrix;\n    }\n\n    Matrix MainWindow::getMatrixFromMemory(QString &amp;name)\n    {\n        return matrixMap[name];\n    }\n</code></pre>\n\n<p>As you can see I have a QMap in my MainWindow. I also have a an instance of MatrixCreation class called matrixCreate. </p>\n\n<p>Here is MatrixCreation class:</p>\n\n<pre><code>    #ifndef MATRIXCREATION_H\n#define MATRIXCREATION_H\n\n#include &lt;QDialog&gt;\n#include &lt;QTableView&gt;\n#include &lt;QPushButton&gt;\n#include &lt;QStandardItem&gt;\n#include &lt;QTableWidget&gt;\n#include &lt;QMainWindow&gt;\n#include \"matrix.h\"\n#include \"memory.h\"\n#include \"addmatrix.h\"\n#include &lt;windows.h&gt;\n\n\n\n\nnamespace Ui {\nclass MatrixCreation;\n}\n\nclass MatrixCreation : public QWidget\n{\n    Q_OBJECT\n\npublic:\n    explicit MatrixCreation(QWidget *parent = 0);\n    ~MatrixCreation();\n\n\n    QTableWidget *getTable();\n    Matrix *getMatrix();\n\nprivate slots:\n    void on_okButton_clicked();\n    void updateTable();\n    void setRows(QString rows);\n    void setColumns(QString columns);\n    void setName(QString name);\n\nsignals:\n    void matrixReady(Matrix *matrix);\n\nprivate:\n    Ui::MatrixCreation *ui;\n    int rows;\n    int columns;\n    int **matrix;\n    QString name;\n    Matrix *newMatrix;\n};\n\n#endif // MATRIXCREATION_H\n</code></pre>\n\n<p>.cpp file</p>\n\n<pre><code>    #include \"matrixcreation.h\"\n#include \"ui_matrixcreation.h\"\n\n\nMatrixCreation::MatrixCreation(QWidget *parent) :\n    QWidget(parent),\n    ui(new Ui::MatrixCreation)\n{\n    ui-&gt;setupUi(this);\n    this-&gt;resize(150, 50);\n\n    // Ustawienie rozmiaru wysokosci wiersza na 40 piksele\n    ui-&gt;tableWidget-&gt;verticalHeader()-&gt;setDefaultSectionSize(40);\n\n    // Ustawienie rozmiaru szerokosci kolumny na 94 piksele\n    ui-&gt;tableWidget-&gt;horizontalHeader()-&gt;setDefaultSectionSize(94);\n\n    // Dopasowanie rozmiaru kolumn do rozmiaru tabeli\n    ui-&gt;tableWidget-&gt;horizontalHeader()-&gt;setSectionResizeMode(QHeaderView::Stretch);\n    ui-&gt;tableWidget-&gt;verticalHeader()-&gt;setSectionResizeMode(QHeaderView::Stretch);\n\n    // Wylaczenie scrollbarow tabeli\n    ui-&gt;tableWidget-&gt;setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);\n    ui-&gt;tableWidget-&gt;setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);\n\n    rows = 1;\n    columns = 1;\n    matrix = NULL;\n    newMatrix = new Matrix;\n\n}\n\nMatrixCreation::~MatrixCreation()\n{\n    delete ui;\n    if (matrix != NULL)\n    {\n        for (int i = 0; i &lt; rows; i++)\n            delete matrix[i];\n    }\n    delete newMatrix;\n}\n\nvoid MatrixCreation::setRows(QString rows)\n{\n    this-&gt;rows = rows.toInt();\n}\n\nvoid MatrixCreation::setColumns(QString columns)\n{\n    this-&gt;columns = columns.toInt();\n}\n\n// Metoda odpowiedzialna za utworzenie odpowiedniej ilosci wierszy i kolumn\n// oraz ustawienie odpowiedniej wielkosci okna i rozmiaru tabeli\nvoid MatrixCreation::updateTable()\n{\n    // stale roznice miedzy szerokoscia i wysokoscia okna i tabeli\n    int w = 323 - 305;\n    int h = 300 - 227 + 15;\n\n    for(int i = 0; i &lt; rows; i++)\n    {\n        ui-&gt;tableWidget-&gt;insertRow(i);\n        h += 35;\n    }\n    for(int j = 0; j &lt; columns; j++)\n    {\n        ui-&gt;tableWidget-&gt;insertColumn(j);\n        w += 50;\n    }\n    this-&gt;resize(w, h);\n    this-&gt;setMinimumSize(w, h);\n\n    ui-&gt;retranslateUi(this);\n    this-&gt;setWindowTitle(\"Matrix Creation\");\n}\n\nQTableWidget *MatrixCreation::getTable()\n{\n    return ui-&gt;tableWidget;\n}\n\nvoid MatrixCreation::on_okButton_clicked()\n{\n    matrix = new int *[rows];\n    for(int j = 0; j &lt; rows; j++)\n    {\n        matrix[j] = new int[columns];\n    }\n\n    for(int i = 0; i&lt;rows; i++)\n    {\n        for(int j = 0; j&lt;columns; j++)\n        {\n            matrix[i][j] = ui-&gt;tableWidget-&gt;item(i, j)-&gt;text().toInt();\n        }\n    }\n\n\n    // Ustawienie pol skladowych w zmiennej newMatrix klasy Matrix\n    newMatrix-&gt;setColumns(columns);\n    newMatrix-&gt;setRows(rows);\n    newMatrix-&gt;setName(name);\n    newMatrix-&gt;setMatrix(matrix);\n\n    emit matrixReady(newMatrix);\n\n\n\n    this-&gt;close();\n}\n\nvoid MatrixCreation::setName(QString name)\n{\n    this-&gt;name = name;\n}\n\n\n\nMatrix *MatrixCreation::getMatrix()\n{\n    return newMatrix;\n}\n</code></pre>\n\n<p>What is the problem:\nI want to add a created matrix to a QMap by emiting this signal:\nemit matrixReady(newMatrix);</p>\n\n<p>a Matrix class is used to hold all the elements of matrix (rows, cols, values of cells and name).\nHowever, Matrix objects are not being added to QMap. But, when I delete this line in MatrixCreation destructor:\ndelete newMatrix;\nIt works. </p>\n\n<p>Second problem:\nWhen I am closing my application and MainWindow destructor gets called, while destroying a map it shows an error : BLOC_TYPE_IS_VALID bla bla...\nI don't know how to fix it, however I will keep on trying. Any help will be appreciated.</p>\n"}, {"tags": ["c++", "arrays", "templates", "variable-assignment", "operator-keyword"], "answers": [{"comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1462396389, "post_id": 37038091, "comment_id": 61626292, "body": "<code>template &lt;std::size_t N&gt;</code> for portability."}, {"owner": {"reputation": 65, "user_id": 5589094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/511357137/picture?type=large", "display_name": "user259584", "link": "https://stackoverflow.com/users/5589094/user259584"}, "edited": false, "score": 0, "creation_date": 1462396468, "post_id": 37038091, "comment_id": 61626326, "body": "thank you for your answer  please elaborate some more if you can"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 65, "user_id": 5589094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/511357137/picture?type=large", "display_name": "user259584", "link": "https://stackoverflow.com/users/5589094/user259584"}, "edited": false, "score": 0, "creation_date": 1462396752, "post_id": 37038091, "comment_id": 61626473, "body": "@user259584, I added a bit more information to the answer."}, {"owner": {"reputation": 65, "user_id": 5589094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/511357137/picture?type=large", "display_name": "user259584", "link": "https://stackoverflow.com/users/5589094/user259584"}, "edited": false, "score": 0, "creation_date": 1462397009, "post_id": 37038091, "comment_id": 61626588, "body": "@RSahu Thank you sir"}, {"owner": {"reputation": 65, "user_id": 5589094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/511357137/picture?type=large", "display_name": "user259584", "link": "https://stackoverflow.com/users/5589094/user259584"}, "edited": false, "score": 0, "creation_date": 1462397104, "post_id": 37038091, "comment_id": 61626639, "body": "@RSahu Thank you sir"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 5, "last_activity_date": 1462396484, "last_edit_date": 1462396484, "creation_date": 1462396255, "answer_id": 37038091, "question_id": 37037926, "link": "https://stackoverflow.com/questions/37037926/c-assignment-operator-overloading/37038091#37038091", "title": "c++ assignment operator overloading", "body": "<p>You can use:</p>\n\n<pre><code>template &lt;std::size_t N&gt;\nTableau&lt;T&gt;&amp; operator=(T (&amp;arr)[N])\n{\n    // This is not right.\n    // The returned value is a temporary.\n    // return Tableau(arr, N);\n\n    // Update the contents of the object.\n\n    // ...\n\n    // Then, return a reference to this object.\n    return *this;\n}\n</code></pre>\n\n<p>With that member function template, when you invoke:</p>\n\n<pre><code>int k[] = { 8, 12, 5, 9, 55};\nTableau&lt;int&gt; TI(k, 2);\nTI = k;\n</code></pre>\n\n<p>The <code>operator=</code> function is instantiated with <code>N = 5</code> and <code>k</code> as the value of <code>arr</code>. Hence, you get the size of the array as well as the contents of the array.</p>\n\n<p>However, it is worth pointing out that if you use:</p>\n\n<pre><code>int k[] = { 8, 12, 5, 9, 55};\nint* k2 = k;\nTableau&lt;int&gt; TI(k, 2);\nTI = k2;\n</code></pre>\n\n<p>it won't work. <code>k2</code> <em>is not an array</em>. It is a pointer to an <code>int</code>, which happens to point to the first element of <code>k</code>.</p>\n"}], "owner": {"reputation": 65, "user_id": 5589094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/511357137/picture?type=large", "display_name": "user259584", "link": "https://stackoverflow.com/users/5589094/user259584"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 2, "accepted_answer_id": 37038091, "answer_count": 1, "score": 0, "last_activity_date": 1462396484, "creation_date": 1462395622, "question_id": 37037926, "link": "https://stackoverflow.com/questions/37037926/c-assignment-operator-overloading", "title": "c++ assignment operator overloading", "body": "<p>Hello everyone i'm trying to write an assignment operator for this class so i can assign an array like this<code>int[] = {0, 1, 2, 3}</code> to my Tableau class</p>\n\n<p>originally i wanted to do this </p>\n\n<pre><code>Tableau&lt;T&gt;&amp; operator=(T arr[])\n{\n return Tableau(tab, sizeofarray);\n}\n</code></pre>\n\n<p>because i already wrote a constructor that takes and array and the size as its argument </p>\n\n<p>and i ran into a problem with the size of the the array i don't know how to find it \nhow can i find the size of the array or is there a better way to do this</p>\n\n<pre><code>template&lt;typename T&gt;\nclass Tableau\n{ \npublic:\nTableau(int s = 0) : size(s), ptr(new T[size])\n{\n    for (int i = 0; i &lt; size; i++)\n    {\n        ptr[i] = 0;\n    }\n}\nTableau(T tab[], int s = 0) : size(s), ptr(new T[size])\n{\n    for (int i = 0; i &lt; size; i++)\n    {\n        ptr[i] = tab[i];\n    }\n}\n\n~Tableau()\n{\n    delete[] ptr;\n}\nTableau&lt;T&gt;&amp; operator=( T tab[])\n{\n\n}\nT commule()\n{\n    T com = 0;\n    for (int i = 0; i &lt; size; i++)\n    {\n        com += ptr[i];\n    }\n    return com;\n}\nT&amp; operator[](const int index)\n{\n    return ptr[index];\n}\nprivate:\nint size;\nT* ptr;\n};\n\nint main()\n{\nint k[] = { 8, 12, 5, 9, 55};\nTableau&lt;int&gt; TI(k, 2);\nTI = k;\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "function", "class", "variables", "call"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1462395869, "post_id": 37037917, "comment_id": 61626055, "body": "you are passing the apple by value. The apple inside that function is a different apple than the one you pass as parameter (it is a copy). Use pass-by-reference if you want to change the apple inside the function. ie. use <code>void Banana::callIsetA(Apple&amp; a){ a.setItestA(2);}</code>"}, {"owner": {"reputation": 7471, "user_id": 1035897, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3eccb41827ff628fa4143045e40c1b8c?s=128&d=identicon&r=PG", "display_name": "Lennart Rolland", "link": "https://stackoverflow.com/users/1035897/lennart-rolland"}, "edited": false, "score": 0, "creation_date": 1462395971, "post_id": 37037917, "comment_id": 61626111, "body": "I would really like to see your headers as it is kind of difficult to go by only the implementation. Also tobi is correct."}], "answers": [{"tags": [], "owner": {"reputation": 5548, "user_id": 5068056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m53CE.jpg?s=128&g=1", "display_name": "Farhad", "link": "https://stackoverflow.com/users/5068056/farhad"}, "is_accepted": false, "score": 0, "last_activity_date": 1462396017, "creation_date": 1462396017, "answer_id": 37038011, "question_id": 37037917, "link": "https://stackoverflow.com/questions/37037917/how-to-call-a-function-from-a-different-class-in-c/37038011#37038011", "title": "how to call a function from a different class in c++?", "body": "<p>there are some ways to do that. one way use extern variables(Global):</p>\n\n<p>in class A:</p>\n\n<pre><code>int a = 2;\n</code></pre>\n\n<p>in class B:</p>\n\n<pre><code>extern int a;\n</code></pre>\n\n<p>now variable a is in both classes and you can  change it in both classes.</p>\n\n<p>what is extern?\n The extern keyword declares a variable or function and specifies that it has external linkage (its name is visible from files other than the one in which it's defined).   <a href=\"https://msdn.microsoft.com/en-us/library/0603949d.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/0603949d.aspx</a></p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 6284680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c94b33a31b7e4a0ec93a01186f180da?s=128&d=identicon&r=PG&f=1", "display_name": "miss_obvious", "link": "https://stackoverflow.com/users/6284680/miss-obvious"}, "edited": false, "score": 0, "creation_date": 1462396702, "post_id": 37038078, "comment_id": 61626446, "body": "if i use this solution i receive the error message  &#39;incomplete type is not allowed&#39; for a.setItestA(2);"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1462397721, "post_id": 37038078, "comment_id": 61626947, "body": "Neither <code>Banana.h</code> nor <code>Banana.cpp</code> are including <code>Apple.h</code> to define what <code>Apple</code> actually looks like, that is why <code>Apple</code> is flagged as an incomplete type in <code>Banana::callIsetA()</code>. <code>Banana.h</code> has a forward declaration of <code>Apple</code>, but <code>Banana</code> cannot declare <code>callIsetA(Apple a)</code> with just a forward declaration, it needs to be <code>callIsetA(Apple &amp;a)</code> instead. Then <code>Banana.cpp</code> needs to include <code>Apple.h</code> so <code>callIsetA()</code> knows about <code>Apple::setItestA()</code> and how to access it on an <code>Apple</code> object."}], "tags": [], "owner": {"reputation": 11, "user_id": 3090282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/748cf556011ad42ac3b99edfcc5cdb10?s=128&d=identicon&r=PG&f=1", "display_name": "risenow", "link": "https://stackoverflow.com/users/3090282/risenow"}, "is_accepted": false, "score": 1, "last_activity_date": 1462396222, "creation_date": 1462396222, "answer_id": 37038078, "question_id": 37037917, "link": "https://stackoverflow.com/questions/37037917/how-to-call-a-function-from-a-different-class-in-c/37038078#37038078", "title": "how to call a function from a different class in c++?", "body": "<p>The problem is that you pass the copy of Apple instance into the function. So this code changes the value of copied object.  </p>\n\n<pre><code>void Banana::callIsetA(Apple a){ //here is the definition of argument copy, next code will change it but not the object that was passed in to the function as initial argument\n    //set iTestA in class Apple to 2\n    a.setItestA(2); \n}\n</code></pre>\n\n<p>To change the value of the original object you need to pass its reference. This may look like this:</p>\n\n<pre><code>void Banana::callIsetA(Apple&amp; a){\n    //set iTestA in class Apple to 2\n    a.setItestA(2);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7471, "user_id": 1035897, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3eccb41827ff628fa4143045e40c1b8c?s=128&d=identicon&r=PG", "display_name": "Lennart Rolland", "link": "https://stackoverflow.com/users/1035897/lennart-rolland"}, "is_accepted": false, "score": 0, "last_activity_date": 1462396304, "creation_date": 1462396304, "answer_id": 37038104, "question_id": 37037917, "link": "https://stackoverflow.com/questions/37037917/how-to-call-a-function-from-a-different-class-in-c/37038104#37038104", "title": "how to call a function from a different class in c++?", "body": "<p>It seems to me that you have some confusion going on here!</p>\n\n<p>In class Banana, this code simply takes an integer parameter and sets itestA (which is a global variable not even a member of either Banana or Apple) to that value:</p>\n\n<pre><code>void Apple::setItestA(int i){\nitestA = i;\n}\n</code></pre>\n\n<p>And what are you trying to do in <code>callIsetA</code>? I can't guess</p>\n\n<p>I would look hard on the code again, and maybe read this tutorial on <a href=\"http://www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/\" rel=\"nofollow\">passing by reference</a>.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 21, "user_id": 6284680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c94b33a31b7e4a0ec93a01186f180da?s=128&d=identicon&r=PG&f=1", "display_name": "miss_obvious", "link": "https://stackoverflow.com/users/6284680/miss-obvious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1462402675, "creation_date": 1462395579, "last_edit_date": 1462402675, "question_id": 37037917, "link": "https://stackoverflow.com/questions/37037917/how-to-call-a-function-from-a-different-class-in-c", "title": "how to call a function from a different class in c++?", "body": "<p>i've got two classes, Apple and Banana. i want to change the value of iTestA (class Apple) in the class Banana with the function callItestA.\ni tried using pointers but it didn't seem to work (the value didn't change)...</p>\n\n<p>here's my Banana.cpp</p>\n\n<pre><code>#include \"Banana.h\"\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\n//Konstruktor\nBanana::Banana()\n{\n    cout &lt;&lt; \"i'm a banana\" &lt;&lt; endl;\n}\n\n//Destruktor\nBanana::~Banana()\n{\n}\n\n//write test\nvoid Banana::writeBanana(){\n    ofstream myfile;\n    myfile.open(\"banana.txt\", fstream::in | fstream::out | fstream::app);\n    myfile &lt;&lt; \"more bananas\\n\";\n    myfile.close();\n}\n\nvoid Banana::callIsetA(Apple a){\n    //set iTestA in class Apple to 2\n    a.setItestA(2);\n}\n</code></pre>\n\n<p>and Apple.cpp</p>\n\n<pre><code>#include \"Apple.h\"\n#include &lt;iostream&gt;\n#include &lt;istream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint itestA = 0;\n\n//Konstruktor\nApple::Apple()\n{\n    cout &lt;&lt; \"i'm an apple\" &lt;&lt; endl;\n}\n\n//Destruktor\nApple::~Apple()\n{\n}\n\n//write test\nvoid Apple::writeApple()\n{\n    ofstream myfile;\n    myfile.open(\"apple.txt\", fstream::in | fstream::out | fstream::app);\n    myfile &lt;&lt; itestA;\n    //myfile &lt;&lt; \"more apples\\n\";\n    myfile.close();\n}\n\nvoid Apple::setItestA(int i)\n{\n    itestA = i;\n}\n</code></pre>\n\n<p>i hope you can help me!</p>\n\n<p>EDIT:\nMy Banana.h</p>\n\n<pre><code>#ifndef BANANA_H\n#define BANANA_H\n\nclass Apple;\n\nclass Banana\n{\npublic:\n    Banana();\n    ~Banana();\n    void writeBanana();\n    void callIsetA(Apple);\n};\n\n#endif\n</code></pre>\n\n<p>and Apple.h</p>\n\n<pre><code>#ifndef APPLE_H\n#define APPLE_H\n\nclass Banana;\n\nclass Apple\n{\npublic:\n    Apple();\n    ~Apple();\n    void writeApple();\n    void setItestA(int i);\nprivate:\n    int itestA;\n};\n\n#endif\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "declaration", "c++17"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462395643, "post_id": 37037842, "comment_id": 61625946, "body": "It is a draft. Implementation of drafts is always experimental in compilers and on whatever-they-fill-the-most-important-priority basis. Apparently, an option to redefine typedefs is not considered urgent - the notion which I share in full."}, {"owner": {"reputation": 1035, "user_id": 1577873, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/h4UOY.jpg?s=128&g=1", "display_name": "John Kalane", "link": "https://stackoverflow.com/users/1577873/john-kalane"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462396047, "post_id": 37037842, "comment_id": 61626148, "body": "@SergeyA The paragraph is present in C++14 and C++11 as [dcl.spec]/2"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1462396422, "post_id": 37037842, "comment_id": 61626310, "body": "Notice that the quoted text doesn&#39;t make the claim that you&#39;re allowed to put <code>static int Pc</code> in the same declarative region. It would be fine, though, if you placed it in a more nested declarative region."}], "answers": [{"comments": [{"owner": {"reputation": 1035, "user_id": 1577873, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/h4UOY.jpg?s=128&g=1", "display_name": "John Kalane", "link": "https://stackoverflow.com/users/1577873/john-kalane"}, "edited": false, "score": 0, "creation_date": 1462397860, "post_id": 37038369, "comment_id": 61627004, "body": "But this compiles in g++ and clang. Note that <code>A</code> is not the same entity in the two declarations below: <code>struct A{}; A a; int A;</code>"}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "reply_to_user": {"reputation": 1035, "user_id": 1577873, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/h4UOY.jpg?s=128&g=1", "display_name": "John Kalane", "link": "https://stackoverflow.com/users/1577873/john-kalane"}, "edited": false, "score": 0, "creation_date": 1462398481, "post_id": 37038369, "comment_id": 61627290, "body": "@JohnKalane The next point says: &quot;exactly one declaration shall declare a class name or enumeration name that is not a typedef name and the other declarations shall all refer to the same variable, non-static data member, or enumerator, or all refer to functions and function templates; in this case the class name or enumeration name is hidden ...&quot; In other words, shadowing is in effect."}, {"owner": {"reputation": 1035, "user_id": 1577873, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/h4UOY.jpg?s=128&g=1", "display_name": "John Kalane", "link": "https://stackoverflow.com/users/1577873/john-kalane"}, "edited": false, "score": 0, "creation_date": 1462398676, "post_id": 37038369, "comment_id": 61627380, "body": "<code>The intent of the paragraph is to show that typedef char* Pc is valid, whereas static Pc is not, not that you can redeclare Pc as something else (in the same scope).</code> But the highlighted phrase in [dcl.spec]/3 above seems to say exactly the opposite of what you&#39;re saying here."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "reply_to_user": {"reputation": 1035, "user_id": 1577873, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/h4UOY.jpg?s=128&g=1", "display_name": "John Kalane", "link": "https://stackoverflow.com/users/1577873/john-kalane"}, "edited": false, "score": 0, "creation_date": 1462398857, "post_id": 37038369, "comment_id": 61627447, "body": "@JohnKalane <code>static Pc</code> is a syntax error, period. In other words, <code>typedef</code> doesn&#39;t allow you to omit the <code>type-specifier</code>, in this case <code>int</code>."}, {"owner": {"reputation": 1035, "user_id": 1577873, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/h4UOY.jpg?s=128&g=1", "display_name": "John Kalane", "link": "https://stackoverflow.com/users/1577873/john-kalane"}, "edited": false, "score": 0, "creation_date": 1462398976, "post_id": 37038369, "comment_id": 61627501, "body": "I was referring to the part in bold characters highlighted above in [dcl.spec]/3."}], "tags": [], "owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "is_accepted": false, "score": 3, "last_activity_date": 1462397695, "last_edit_date": 1462397695, "creation_date": 1462397344, "answer_id": 37038369, "question_id": 37037842, "link": "https://stackoverflow.com/questions/37037842/doubts-about-dcl-spec-3-in-c1z/37038369#37038369", "title": "Doubts about [dcl.spec]/3 in c++1z", "body": "<p>The intent of the paragraph is to show that <code>typedef char* Pc</code> is valid, whereas <code>static Pc</code> is not, <em>not</em> that you can redeclare <code>Pc</code> as something else (in the same scope). In other words, <code>static Pc</code> and <code>static int Pc</code> are not different entities. Nothing's changed that would allow you to do this.</p>\n\n<p><a href=\"http://eel.is/c++draft/basic.scope#basic.scope.declarative-4\" rel=\"nofollow\">[basic.scope.declarative]/4</a></p>\n\n<blockquote>\n  <p>Given a set of declarations in a single declarative region, each of\n  which specifies the same unqualified name,</p>\n  \n  <p>(4.1) \u2014 they shall all refer to the same entity, ...</p>\n</blockquote>\n"}], "owner": {"reputation": 1035, "user_id": 1577873, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/h4UOY.jpg?s=128&g=1", "display_name": "John Kalane", "link": "https://stackoverflow.com/users/1577873/john-kalane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1462397695, "creation_date": 1462395316, "last_edit_date": 1462396068, "question_id": 37037842, "link": "https://stackoverflow.com/questions/37037842/doubts-about-dcl-spec-3-in-c1z", "title": "Doubts about [dcl.spec]/3 in c++1z", "body": "<p><a href=\"http://eel.is/c++draft/dcl.spec#3\" rel=\"nofollow\">[dcl.spec]/3 in c++1z</a> (emphasis is mine):</p>\n\n<blockquote>\n  <p>If a <em>type-name</em> is encountered while parsing a <em>decl-specifier-seq</em>,\n  it is interpreted as part of the <em>decl-specifier-seq</em> if and only if\n  there is no previous <em>defining-type-specifier</em> other than a\n  <em>cv-qualifier</em> in the <em>decl-specifier-seq</em>. The sequence shall be self-consistent as described below. [ Example:</p>\n\n<pre><code>typedef char* Pc;\nstatic Pc;                      // error: name missing\n</code></pre>\n  \n  <p>Here, the declaration <code>static Pc</code> is ill-formed because no name was\n  specified for the static variable of type <code>Pc</code>. <strong>To get a variable\n  called <code>Pc</code>, a <em>type-specifier</em> (other than <code>const</code> or <code>volatile</code>) has\n  to be present to indicate that the <em>typedef-name</em> <code>Pc</code> is the name\n  being (re)declared, rather than being part of the <code>decl-specifier</code>\n  sequence</strong>.</p>\n</blockquote>\n\n<p>Nevertheless, the snippet below doesn't compile in g++ and clang. Why is that?</p>\n\n<pre><code>typedef char* Pc;\nstatic int Pc;\n</code></pre>\n"}, {"tags": ["c++", "istream", "peek"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1462395896, "post_id": 37037832, "comment_id": 61626067, "body": "<code>std::istringstream</code> is input-only, it can only be read from, you can&#39;t <code>putback()</code> data into it."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1462396223, "post_id": 37037832, "comment_id": 61626233, "body": "Off topic, wouldn&#39;t it be better to return a shorter vector if <code>EOF</code> was reached, instead of returning a vector with trailing <code>EOF</code>s?"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1462397891, "post_id": 37037832, "comment_id": 61627020, "body": "@Remy Citation needed"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 1, "creation_date": 1462398123, "post_id": 37037832, "comment_id": 61627119, "body": "@AlanStokes: Run the example code at <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/putback\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/basic_istream/putback</a>.  The <code>putback()</code> fails on an <code>std::istringstream</code>, and is commented as such."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1462398396, "post_id": 37037832, "comment_id": 61627254, "body": "@RemyLebeau You can&#39;t <i>modify</i> it - but you can put the same characters back - which is what I&#39;m trying to do."}], "answers": [{"comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1462397767, "post_id": 37038049, "comment_id": 61626965, "body": "When <code>sputback</code> returns <code>EOF</code> you ran out ;-) Or you can look at <code>gptr()</code> vs <code>eback()</code>, which gives you a lower bound."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1462398790, "post_id": 37038049, "comment_id": 61627423, "body": "Those are <code>protected</code>."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1462399081, "post_id": 37038049, "comment_id": 61627545, "body": "Fair point. Assuming you&#39;re not willing/able to derive from the <code>streambuf</code> I think you&#39;re stuck with the first half of my suggestion."}], "tags": [], "owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "is_accepted": false, "score": 1, "last_activity_date": 1462396120, "creation_date": 1462396120, "answer_id": 37038049, "question_id": 37037832, "link": "https://stackoverflow.com/questions/37037832/peek-multiple-chars-from-cin-with-putback/37038049#37038049", "title": "peek multiple chars from cin with putback", "body": "<p><code>putback</code> calls <code>sputback</code> which only works if a putback position is available. Nothing guarantees that there is an indefinite number of such positions.</p>\n"}, {"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1462397042, "post_id": 37038118, "comment_id": 61626602, "body": "What would such an abstraction look like?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1462398296, "post_id": 37038118, "comment_id": 61627203, "body": "An extra level of buffering in your code. You read data from the stream into your own buffer of sufficient size, and then you can read/peek data from the buffer as needed without trying to put the data back into the stream."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1462400426, "post_id": 37038118, "comment_id": 61628081, "body": "Or you could call <code>[pub]setbuf</code> to tell the <code>streambuf</code> that you want a bigger buffer - except that sadly in general that has no useful well-defined behaviour."}], "tags": [], "owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "is_accepted": false, "score": 2, "last_activity_date": 1462399957, "last_edit_date": 1462399957, "creation_date": 1462396344, "answer_id": 37038118, "question_id": 37037832, "link": "https://stackoverflow.com/questions/37037832/peek-multiple-chars-from-cin-with-putback/37038118#37038118", "title": "peek multiple chars from cin with putback", "body": "<p>It is only safe to assume 1 character \"wide\" put back buffer. You will have to add additional layer of abstraction to provide more put back space.</p>\n\n<p>Alternatively, if your stream is seekable, you can remember the position before you start tentatively parsing and then seek back to the remembered position.</p>\n"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 884, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1462399957, "creation_date": 1462395287, "question_id": 37037832, "link": "https://stackoverflow.com/questions/37037832/peek-multiple-chars-from-cin-with-putback", "title": "peek multiple chars from cin with putback", "body": "<p>I need to try to peek multiple characters from a <code>std::istream</code> (which could be <code>std::cin</code>), so I wrote a simple loop to call <code>get()</code> lots of times and then <code>putback()</code> lots of times:</p>\n\n<pre><code>std::vector&lt;char&gt; peek_many(std::istream&amp; is, int N) {\n    std::vector&lt;char&gt; data;\n    data.reserve(N);\n\n    for (int i = 0; i &lt; N; ++i) {\n        data.push_back(is.get());\n    }   \n\n    for (int i = 0; i &lt; N; ++i) {\n        is.putback(data[N-i-1]);\n    }\n\n    return data;\n}\n</code></pre>\n\n<p>Is this guaranteed to work on all <code>istream</code>s (whether I'm reading a file, <code>cin</code>, <code>istringstream</code>, etc)? If not, why not? </p>\n"}, {"tags": ["c++", "sorting", "vector"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462395418, "post_id": 37037776, "comment_id": 61625826, "body": "Return type of your compare function should be <code>bool</code>. But that shouldn&#39;t preclude the sort from working. Please post MCVE, which coould be copy-pasted, compiled and run."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 3794592, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/970956027630976defd9398794c798fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3794592", "link": "https://stackoverflow.com/users/3794592/user3794592"}, "edited": false, "score": 0, "creation_date": 1462396105, "post_id": 37037905, "comment_id": 61626171, "body": "Thanks I tried your tip, and it worked perfectly fine."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1462396298, "last_edit_date": 1462396298, "creation_date": 1462395529, "answer_id": 37037905, "question_id": 37037776, "link": "https://stackoverflow.com/questions/37037776/sorting-vecor-by-multiple-columns/37037905#37037905", "title": "Sorting Vecor by multiple columns", "body": "<p>Since you want to sort based on the first two columns, the compare function needs to use both values. Also, change the return type of <code>compare</code> to <code>bool</code>\nand the argument types to <code>const&amp;</code>.</p>\n\n<pre><code>bool compare(vector&lt;double&gt; const&amp; s1, vector&lt;double&gt; const&amp; s2)\n{\n    // If the values of the first column are not equal,\n    // just use them to order s1 and s2.\n    if ( s1[0] != s2[0] )\n    {\n       return s1[0] &lt; s2[0];\n    }\n\n    // If the values of the first column are equal,\n    // use the values of the second column to order s1 and s2.\n    return s1[1] &lt; s2[1];\n}   \n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 3794592, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/970956027630976defd9398794c798fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3794592", "link": "https://stackoverflow.com/users/3794592/user3794592"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 37037905, "answer_count": 1, "score": 0, "last_activity_date": 1462396298, "creation_date": 1462395086, "question_id": 37037776, "link": "https://stackoverflow.com/questions/37037776/sorting-vecor-by-multiple-columns", "title": "Sorting Vecor by multiple columns", "body": "<p>I'm trying to sort a vector by multiple columns. So heres my vector, where rows is the numbers of rows. Because I use the vector in a for-loop for different sizes, it has to be dynamicly.</p>\n\n<pre><code>vector&lt;vector&lt;double&gt; &gt; matrix;\nmatrix.resize(rows);\nfor(size_t i=0; i&lt;rows; i++) {\n    matrix[i].resize(3);\n}\n</code></pre>\n\n<p>After the vector is set up, I fill it with data. The data consist of coordinates (xyz).</p>\n\n<pre><code>for(size_t i = 0;i&lt;lss.size();i+2) {\n            int k = i+1;\n            matrix[i][0]=lss[i].v[0].x;\n            matrix[i][1]=lss[i].v[0].y;\n            matrix[i][2]=lss[i].v[0].z;\n            matrix[k][0]=lss[i].v[1].x;\n            matrix[k][1]=lss[i].v[1].y;\n            matrix[k][2]lss[i].v[1].z;\n    }\n</code></pre>\n\n<p>So far everything works fine. But next I have to sort the vector. What I know from my data is the z-coordinate is always the same, for one loop passage. So I would have to sort the vector by it's first and than by the second column. I already search for sorting functions, like std:sort, I couldn't find something suitable. My attempt was this:</p>\n\n<pre><code>int compare(vector&lt;double&gt;&amp; s1, vector&lt;double&gt;&amp; s2)\n{\n    return s1[0] &lt; s2[0];\n}   \nstd::sort(matrix.begin(), matrix.end(), compare);\n</code></pre>\n\n<p>But the result was the same as the input.</p>\n\n<p>So the unsorted output looks like this:</p>\n\n<pre><code>X=-5.000000, Y=2.000000, Z=-2.000000\nX=-5.000000, Y=-5.000000, Z=-2.000000\nX=5.000000, Y=5.000000, Z=-2.000000\nX=5.000000, Y=-2.000000, Z=-2.000000\nX=5.000000, Y=-2.000000, Z=-2.000000\nX=5.000000, Y=-5.000000, Z=-2.000000\nX=5.000000, Y=5.000000, Z=-2.000000\nX=2.000000, Y=5.000000, Z=-2.000000\nX=2.000000, Y=5.000000, Z=-2.000000\nX=-5.000000, Y=5.000000, Z=-2.000000\nX=5.000000, Y=-5.000000, Z=-2.000000\nX=-2.000000, Y=-5.000000, Z=-2.000000\nX=-2.000000, Y=-5.000000, Z=-2.000000\nX=-5.000000, Y=-5.000000, Z=-2.000000\n</code></pre>\n\n<p>What I want is:</p>\n\n<pre><code>X=-5.000000, Y=-5.000000, Z=-2.000000\nX=-5.000000, Y=-5.000000, Z=-2.000000\nX=-5.000000, Y=2.000000, Z=-2.000000\nX=-5.000000, Y=5.000000, Z=-2.000000\nX=-2.000000, Y=-5.000000, Z=-2.000000\nX=-2.000000, Y=-5.000000, Z=-2.000000\nX=2.000000, Y=5.000000, Z=-2.000000\nX=2.000000, Y=5.000000, Z=-2.000000\nX=5.000000, Y=-5.000000, Z=-2.000000\nX=5.000000, Y=-5.000000, Z=-2.000000\nX=5.000000, Y=-2.000000, Z=-2.000000\nX=5.000000, Y=-2.000000, Z=-2.000000\nX=5.000000, Y=5.000000, Z=-2.000000\nX=5.000000, Y=5.000000, Z=-2.000000\n</code></pre>\n"}, {"tags": ["c++", "windows", "visual-c++", "openmp", "msvcrt"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1462398567, "post_id": 37037733, "comment_id": 61627331, "body": "Statically linking against the CRT is commonly suggested, but not necessarily the best idea (see <a href=\"https://msdn.microsoft.com/en-us/library/ms235460.aspx\" rel=\"nofollow noreferrer\">Potential Errors Passing CRT Objects Across DLL Boundaries</a> for example). A better solution is to deploy your dependencies (CRT and others) alongside your application. Don&#39;t expect to find a particular DLL of a specific version on any given client machine."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1462402360, "post_id": 37037733, "comment_id": 61628697, "body": "I only passing COM interfaces across DLL boundaries so that&#39;s not an issue. Can&#39;t deploy dependencies on never updated Windows 7 because modern CRT requires that KB2999226 windows update."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1462417180, "post_id": 37037733, "comment_id": 61632480, "body": "If KB2999226 is the only problem, I&#39;ve seen software before that ships with one or more Windows updates.  Not sure whether you need a special license to do that or not.  Alternatively, I&#39;m not very familiar with OpenMP but I assume it&#39;s, well, open; are you able to compile it directly into your application?  Combined with a static runtime, that might resolve the problem."}, {"owner": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "edited": false, "score": 0, "creation_date": 1462429854, "post_id": 37037733, "comment_id": 61636403, "body": "It seems awfully disingenuous for Microsoft to not include in the runtime redistribution a dll that is not always installed."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1462449718, "post_id": 37037733, "comment_id": 61647556, "body": "@HarryJohnston I do not know whether that update is the only problem. All I have is an e-mail + screen photo from a Spanish user who is using offline Win7 PC, anecdotal evidence that at least for some people that update resolved the problem, and desire (+economic incentive) to make my software just work (tm)."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1462449749, "post_id": 37037733, "comment_id": 61647578, "body": "OpenMP is an API. API is open, implementation of the API is tightly coupled with C++ compiler, and Microsoft\u2019s C++ compiler ain\u2019t open. Porting the project to clang (a C++ compiler that\u2019s open and also supports OMP) will be even more expensive than just dropping OpenMP and moving to windows-provided thread pool."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1462485894, "post_id": 37037733, "comment_id": 61669041, "body": "Ah, I didn&#39;t realize the implementation was part of Visual Studio.  Never mind then.  A new thought: the documentation for KB2999226 says that it is only necessary for applications built in VS2015 against the Windows 10 SDK.  Have you tried using an earlier version of the SDK?  Or perhaps going whole-hog on compatibility and telling Visual Studio to generate a Windows XP compatible application?"}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1462832797, "post_id": 37037733, "comment_id": 61793541, "body": "@HarryJohnston Thanks for the input. You\u2019re right, I could try switching C++ platform toolset from v140 to e.g. v120, the VS2013 C++ compiler would then use non-universal CRT, and the problem would go away. However, that complicates development, e.g. need both visual studios. The native code calls Direct3D 11 and other Win7+ API (e.g. DXVA 2 to enumerate physical monitor), so XP compatibility isn\u2019t for me."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1462832825, "post_id": 37037733, "comment_id": 61793550, "body": "I\u2019ve already resolved my problem: static link to CRT, install vcomp140.dll to the application\u2019s folder. Now my app works even on never updated Windows 7 \u2014 not possible if redistributing that KB \u2018coz the KB only applies to Win7 SP1."}], "answers": [{"comments": [{"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1462820984, "post_id": 37038198, "comment_id": 61787990, "body": "Thanks, did what you said here, now works OK on my VmWare Windows 7 sp0."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1462821096, "post_id": 37038198, "comment_id": 61788055, "body": "But first I tried the recommended way, using MS-provided merge module. Technically works fine even without CRT installed. The problem is, the merge module installs vcomp140.dll to System32. Meaning my app may break if some other app will upgrade/downgrade/uninstall my vcomp140.dll in System32. So yes, ended up with just including the DLL."}, {"owner": {"reputation": 4123, "user_id": 195787, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4b9620cb172292493f9c02c8f37c6cc7?s=128&d=identicon&r=PG", "display_name": "Royi", "link": "https://stackoverflow.com/users/195787/royi"}, "edited": false, "score": 0, "creation_date": 1502176128, "post_id": 37038198, "comment_id": 78082182, "body": "What about OpenMP? Any trick to statically link it in Visual Studio?"}], "tags": [], "owner": {"reputation": 2473, "user_id": 4490706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nmMcD.jpg?s=128&g=1", "display_name": "Ton Plooij", "link": "https://stackoverflow.com/users/4490706/ton-plooij"}, "is_accepted": true, "score": 1, "last_activity_date": 1462396649, "creation_date": 1462396649, "answer_id": 37038198, "question_id": 37037733, "link": "https://stackoverflow.com/questions/37037733/statically-link-with-microsoft-crt-and-openmp/37038198#37038198", "title": "Statically link with Microsoft CRT, and OpenMP", "body": "<p>Based on the <a href=\"https://www.visualstudio.com/en-us/downloads/2015-redistribution-vs.aspx\" rel=\"nofollow\">VS2015 Redistribution List</a> I would say that copying that file would be indeed what you need to do and would work fine (if you used VS2015 to build your app). Take care to copy the proper dll based on arm/x86/x64.</p>\n"}, {"tags": [], "owner": {"reputation": 226, "user_id": 1976981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vV1qQ.jpg?s=128&g=1", "display_name": "lyron", "link": "https://stackoverflow.com/users/1976981/lyron"}, "is_accepted": false, "score": 1, "last_activity_date": 1511957032, "creation_date": 1511957032, "answer_id": 47552418, "question_id": 37037733, "link": "https://stackoverflow.com/questions/37037733/statically-link-with-microsoft-crt-and-openmp/47552418#47552418", "title": "Statically link with Microsoft CRT, and OpenMP", "body": "<p>Just to make it clear, it is not possible to statically link openmp with Visual Studio. Only two things you can do:</p>\n\n<ul>\n<li>Remove openmp (and compile with /MT /MTd)</li>\n<li>deploy vcomp140.dll (or VC redistributable) with your application</li>\n</ul>\n"}], "owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1548, "favorite_count": 0, "accepted_answer_id": 37038198, "answer_count": 2, "score": 3, "last_activity_date": 1511957032, "creation_date": 1462394919, "last_edit_date": 1495540357, "question_id": 37037733, "link": "https://stackoverflow.com/questions/37037733/statically-link-with-microsoft-crt-and-openmp", "title": "Statically link with Microsoft CRT, and OpenMP", "body": "<p>I\u2019m developing some Windows software that's sometimes used in embedded-like scenarios. That\u2019s not uncommon for my users to have a dedicated Win7 or Win8 PC they never update, not even connect to the Internet. Users plug those PC to a specific industrial hardware, and use that system for one job only.</p>\n\n<p>My software includes components I've written in Visual C++. I include CRT in my MSI packages using appropriate installer merge modules.</p>\n\n<p>Unfortunately, for a PC that never updated, that doesn\u2019t work: today I got a bug report, the app crashes on startup saying \u201ccan\u2019t start because api-ms-win-crt-stdio-l1-1-0.dll is missing from your computer\u201d</p>\n\n<p><a href=\"https://stackoverflow.com/a/35243794/126995\">This answer</a> suggests static link to CRT.</p>\n\n<p>Did that. But some parts of my C++ code rely on OpenMP for parallelism.</p>\n\n<p><a href=\"http://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">Dependency walker</a> shows me the DLL I\u2019m building depends on vcomp140.dll even when compiled with <code>Multi-threaded (/MT)</code> runtime library settings.</p>\n\n<p>Also it shows vcomp140.dll only depends on kernel32.dll and user32.dll.</p>\n\n<p>Can I just place that single DLL, vcomp140.dll, in the installation folder? Will it work on offline Windows 7 PC?</p>\n"}, {"tags": ["c++", "template-specialization"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 4, "creation_date": 1462394990, "post_id": 37037712, "comment_id": 61625595, "body": "<code>void main</code> should be <code>int main</code>. And make the parameter type <code>const&amp;</code>"}, {"owner": {"reputation": 99, "user_id": 5883133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d7fe47b81df80bd89fbf52f47049864?s=128&d=identicon&r=PG&f=1", "display_name": "Budskii", "link": "https://stackoverflow.com/users/5883133/budskii"}, "edited": false, "score": 0, "creation_date": 1462395019, "post_id": 37037712, "comment_id": 61625611, "body": "what do you mean by tab size?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1462395047, "post_id": 37037712, "comment_id": 61625625, "body": "nothing, just forget the comment ;)"}, {"owner": {"reputation": 99, "user_id": 5883133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d7fe47b81df80bd89fbf52f47049864?s=128&d=identicon&r=PG&f=1", "display_name": "Budskii", "link": "https://stackoverflow.com/users/5883133/budskii"}, "edited": false, "score": 0, "creation_date": 1462395172, "post_id": 37037712, "comment_id": 61625689, "body": "praetorian, post as answer, it works. Also could you explain why? const is supposed to mean you won&#39;t change the value so what does it have to do with rvalue and conversion from int to int&amp;?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1462395292, "post_id": 37037712, "comment_id": 61625765, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1565600/how-come-a-non-const-reference-cannot-bind-to-a-temporary-object\">How come a non-const reference cannot bind to a temporary object?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 34, "user_id": 2843941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dedd7e7702f70ec6c3ecd16ce8bc873c?s=128&d=identicon&r=PG&f=1", "display_name": "twynn", "link": "https://stackoverflow.com/users/2843941/twynn"}, "is_accepted": true, "score": 1, "last_activity_date": 1462395601, "creation_date": 1462395601, "answer_id": 37037921, "question_id": 37037712, "link": "https://stackoverflow.com/questions/37037712/c-template-specialization-rvalue/37037921#37037921", "title": "C++ template specialization rvalue", "body": "<p>You need to change your parameters to constant references (const&amp; as mentioned in Praetorian's comment)</p>\n\n<p>From this link: <a href=\"http://www.codesynthesis.com/~boris/blog/2012/07/24/const-rvalue-references/\" rel=\"nofollow\">http://www.codesynthesis.com/~boris/blog/2012/07/24/const-rvalue-references/</a></p>\n\n<blockquote>\n  <p>while a const lvalue reference can bind to an rvalue, a const\n  rvalue reference cannot bind to an lvalue</p>\n</blockquote>\n"}], "owner": {"reputation": 99, "user_id": 5883133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d7fe47b81df80bd89fbf52f47049864?s=128&d=identicon&r=PG&f=1", "display_name": "Budskii", "link": "https://stackoverflow.com/users/5883133/budskii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 37037921, "answer_count": 1, "score": 0, "last_activity_date": 1462395601, "creation_date": 1462394849, "last_edit_date": 1462395031, "question_id": 37037712, "link": "https://stackoverflow.com/questions/37037712/c-template-specialization-rvalue", "title": "C++ template specialization rvalue", "body": "<p>I'm learning C++ and have a little problem with template specialization. I need to call Variable.Set() a lot so, I made the function take in references so it doesn't spend a lot of time copying the string. But then the problem I have is <code>Variable.Set&lt;int&gt;(5);</code> causes error because the parameter is an rvalue and I don't know the solution for this.</p>\n\n<p>error C2664: 'void Variable::Set(int &amp;)': cannot convert argument 1 from 'int' to 'int &amp;'</p>\n\n<pre><code>void main()\n{\n    Variable var;\n    var.Set&lt;int&gt;(5);\n}\n\nstruct Variable\n{\n    int integer;\n    float floating;\n    std::string string;\n\n    template&lt;typename T&gt; void   Set(T&amp; v);\n    template&lt;&gt; void             Set&lt;int&gt; (int&amp; v) { integer = v; }\n    template&lt;&gt; void             Set&lt;float&gt; (float&amp; v) { floating = v; }\n    template&lt;&gt; void             Set&lt;std::string&gt; (std::string&amp; v) { string = v; }\n};\n</code></pre>\n"}, {"tags": ["c++", "xml", "visual-studio"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 1295064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f92e9cade5730bc19bfd85149a5e569?s=128&d=identicon&r=PG", "display_name": "Daniel Benito", "link": "https://stackoverflow.com/users/1295064/daniel-benito"}, "is_accepted": true, "score": 1, "last_activity_date": 1462446864, "last_edit_date": 1462446864, "creation_date": 1462396797, "answer_id": 37038232, "question_id": 37037660, "link": "https://stackoverflow.com/questions/37037660/escapexml-c-visual-studio/37038232#37038232", "title": "EscapeXML C++ Visual Studio", "body": "<p>There are several things wrong with your code. To begin with, you shouldn't end an #include directive with a semicolon.</p>\n\n<p>That said, the main problem is that your code isn't calling EscapeXML, it's actually redefining it. What you want is something like this:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"atlenc.h\"\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::wstring test = L\"&amp; &amp; &amp;\";\n\n    int output_size = EscapeXML(test.c_str(), test.length(), 0, 0, ATL_ESC_FLAG_ATTR);\n\n    std::wstring testout;\n    testout.resize(output_size);\n    EscapeXML(test.c_str(), test.length(), &amp;testout[0], output_size, ATL_ESC_FLAG_ATTR);\n\n    std::wcout &lt;&lt; testout;\n    return 0;\n}\n</code></pre>\n\n<p>Note that EscapeXML expects a pointer to a wide string (wchar_t *), so you need to use std::wstring (and std:wcout). You need to pass it both the input string and a buffer into which it can write the \"escaped\" version.</p>\n\n<p>Since we don't know ahead of time how big the buffer needs to be, we call EscapeXML with a null pointer - most Windows API functions that return strings let you do this, and they will return the required buffer size. We then instantiate another wstring, resize it to the required size, and call EscapeXML again, this time actually passing the pointer to the buffer. In fact, since c_str() returns a const pointer (which we can't pass to a function expecting a non-const pointer, unless we use const_cast), we instead pass a pointer to testout[0], which is the beginning of the wstring's internal string buffer.</p>\n"}], "owner": {"reputation": 43, "user_id": 6187310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/513ce252ded6d40980c9432f41a9da34?s=128&d=identicon&r=PG&f=1", "display_name": "Skydreampower", "link": "https://stackoverflow.com/users/6187310/skydreampower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 37038232, "answer_count": 1, "score": 0, "last_activity_date": 1462446864, "creation_date": 1462394670, "question_id": 37037660, "link": "https://stackoverflow.com/questions/37037660/escapexml-c-visual-studio", "title": "EscapeXML C++ Visual Studio", "body": "<p>I want to convert the special character for EscapeXML on Visual Studio C++.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"atlenc.h\";\n#include &lt;string&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\n\nint main()\n{\n    std::string test = \"&amp; &amp; &amp;\";\n\n    inline int EscapeXML(const wchar_t * test)throw();\n\n    cout &lt;&lt; test;\n    return 0;\n}\n</code></pre>\n\n<p>I want to have an output.</p>\n\n<pre><code>&amp;amp; &amp;amp; &amp;amp;\n</code></pre>\n\n<p>Visual Studio has EscapeXML function, but it doesn't convert.\n<a href=\"https://msdn.microsoft.com/en-us/library/y0y57exc(v=vs.71).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/y0y57exc(v=vs.71).aspx</a></p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6292743, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jQvnQmhrpGk/AAAAAAAAAAI/AAAAAAAAABs/UVeMUSJPhYA/photo.jpg?sz=128", "display_name": "awpirates9", "link": "https://stackoverflow.com/users/6292743/awpirates9"}, "edited": false, "score": 0, "creation_date": 1462397502, "post_id": 37037881, "comment_id": 61626832, "body": "I don&#39;t know what you mean, hows it not defined?"}, {"owner": {"reputation": 3147, "user_id": 22099, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/40ac5201d092eccee1f78e759a6f9df3?s=128&d=identicon&r=PG", "display_name": "miha", "link": "https://stackoverflow.com/users/22099/miha"}, "reply_to_user": {"reputation": 1, "user_id": 6292743, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jQvnQmhrpGk/AAAAAAAAAAI/AAAAAAAAABs/UVeMUSJPhYA/photo.jpg?sz=128", "display_name": "awpirates9", "link": "https://stackoverflow.com/users/6292743/awpirates9"}, "edited": false, "score": 0, "creation_date": 1462428952, "post_id": 37037881, "comment_id": 61635965, "body": "Have a look at the answer I linked to. You need to declare your function (i.e. <code>void foo();</code>) and you need to define your function (i.e. <code>void foo() {}</code>). You can skip declaration if you define your function prior to using it."}], "tags": [], "owner": {"reputation": 3147, "user_id": 22099, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/40ac5201d092eccee1f78e759a6f9df3?s=128&d=identicon&r=PG", "display_name": "miha", "link": "https://stackoverflow.com/users/22099/miha"}, "is_accepted": false, "score": 0, "last_activity_date": 1462395448, "last_edit_date": 1495542236, "creation_date": 1462395448, "answer_id": 37037881, "question_id": 37037630, "link": "https://stackoverflow.com/questions/37037630/undefined-reference-to-outputvli/37037881#37037881", "title": "Undefined reference to outputVLI?", "body": "<p>Your <code>outputVLI</code> function is <a href=\"https://stackoverflow.com/a/1410632/22099\">declared, but not defined</a>. So, you should add the definition:</p>\n\n<pre><code>void outputVLI(int vli[], int size) {\n    // TODO: implementation here\n}\n</code></pre>\n\n<p>Also, your <code>compVLI</code> functions needs to return a value...</p>\n"}], "owner": {"reputation": 1, "user_id": 6292743, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jQvnQmhrpGk/AAAAAAAAAAI/AAAAAAAAABs/UVeMUSJPhYA/photo.jpg?sz=128", "display_name": "awpirates9", "link": "https://stackoverflow.com/users/6292743/awpirates9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 12, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1462396276, "creation_date": 1462394537, "last_edit_date": 1462396276, "question_id": 37037630, "link": "https://stackoverflow.com/questions/37037630/undefined-reference-to-outputvli", "title": "Undefined reference to outputVLI?", "body": "<p>I have to make 2 arrays and use functions to input, output, add, and compare them but I keep getting error message: <code>undefined reference to outputVLI(int*, int)</code>. I am not sure what this means or how to fix it. Any help would be appreciated</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nconst int maxDigits = 100;\nvoid inputVLI (int vli[], int size);   // Inputs the very long integers\nvoid outputVLI (int vli[], int size); // Outputs the very long integers\nvoid addVLI (const int vli1[], const int vli2[], int vli3[], int size1, int size2, int&amp; size3); // Adds the very long integers together\nint compVLI (const int vli1, const int vli2, int size1, int size2); // Compares the very long integers\n\nint main()\n{\n    int vli1[maxDigits], vli2[maxDigits], vli3[maxDigits], size1, size2, size3;\n    inputVLI (vli1, maxDigits);                                 // Calls the individual functions\n    outputVLI (vli1, maxDigits);                                // |\n    inputVLI (vli2, maxDigits);                                 // |\n    outputVLI (vli2, maxDigits);                                // |\n    /*addVLI (vli1, vli2, vli3, size1, size2, size3);           // |\n    compVLI (vli1, vli2, size1, size2);*/                       // \\/\n    return 0;\n}\n\nvoid inputVLI(int vli[], int size)\n{\n    cout &lt;&lt; \"Enter a very long integer\" &lt;&lt; endl;\n    cin &gt;&gt; vli[maxDigits];\n}\n\nvoid output (int vli[], int size)\n{\n    for (int i=maxDigits; i&gt;=0; i--)\n        cout &lt;&lt; vli[i];\n}\n\nvoid addVLI (const int vli1[], const int vli2[], int vli3[], int size1, int size2, int&amp; size3)\n{\n/*\n    for (int i=0; i&lt;maxDigits; i++)\n    {\n        vli3[i]=vli1[i] + vli2[i];\n        cout &lt;&lt; \"The sum of the vli's is:\" &lt;&lt; vli3[i] &lt;&lt; endl;\n    }\n*/\n}\n\nint compVLI (const int vli1, const int vli2, int size1, int size2)\n{\n/*\n    for (int i=0; vli1[maxDigits] &amp;&amp; vli2[maxDigits]; i++)\n    {\n        if (vli1[maxDigits] != vli2[maxDigits])\n        {\n            return (-1); // -1 is not equal\n        }\n        return (1); // 1 is equal\n    }\n*/\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "assembly", "intel-pin"], "comments": [{"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1462401194, "post_id": 37037476, "comment_id": 61628338, "body": "Have you tried looking at an instruction reference? If you examine the machine code you will detect patterns (in fact they are documented) that can tell you this."}], "answers": [{"tags": [], "owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "is_accepted": false, "score": 0, "last_activity_date": 1462395044, "creation_date": 1462395044, "answer_id": 37037765, "question_id": 37037476, "link": "https://stackoverflow.com/questions/37037476/determine-if-instruction-has-indirect-memory-operand/37037765#37037765", "title": "Determine if instruction has indirect memory operand", "body": "<p>I am just guessing here because I have never heard about this library before reading this question, but...</p>\n\n<p>I think it follows that if one of <code>INS_IsMemoryRead()</code>, <code>INS_IsMemoryWrite()</code> is true, it has to have an indirect memory operand.</p>\n\n<p>Also, from different angle, <code>INS_MemoryOperand*()</code> functions inspects the operands.</p>\n"}, {"comments": [{"owner": {"reputation": 308, "user_id": 3241663, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2772bd82c001755ef52c69494e219a2a?s=128&d=identicon&r=PG&f=1", "display_name": "TypeKazt", "link": "https://stackoverflow.com/users/3241663/typekazt"}, "edited": false, "score": 0, "creation_date": 1462455870, "post_id": 37039959, "comment_id": 61651729, "body": "So even if the operand indirectly calls memory through a register, <code>INS_OperandIsMemory()</code> will return true on that operand?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 308, "user_id": 3241663, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2772bd82c001755ef52c69494e219a2a?s=128&d=identicon&r=PG&f=1", "display_name": "TypeKazt", "link": "https://stackoverflow.com/users/3241663/typekazt"}, "edited": false, "score": 0, "creation_date": 1462500252, "post_id": 37039959, "comment_id": 61672692, "body": "@TypeKazt: <code>MOV (%rdi), %rax</code> is as direct a memory reference as it&#39;s possible to write.  IDK what you mean by &quot;indirect&quot; in this case.  Normally the terms direct vs. indirect apply to jumps, where a direct jump has the destination address encoded in the instruction (as a relative offset), while indirect jumps set <code>RIP = register</code> (register-indirect <code>jmp *%rax</code> aka <code>jmp rax</code>) or <code>RIP = [memory]</code> (memory-indirect <code>jmp *(%rsi)</code> aka <code>jmp QWORD PTR [rsi]</code>.)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1462500355, "post_id": 37039959, "comment_id": 61672707, "body": "If anything, an implicit memory reference is the special case that I&#39;d worry about detecting, like <code>lodsb</code> or <code>MASKMOVDQU xmm1, xmm2</code> (stores to <code>(%rdi)</code>).  Or <code>push</code>/<code>pop</code>."}], "tags": [], "owner": {"reputation": 6531, "user_id": 507028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/150b5324471a76f6f2fa9dd2380ad611?s=128&d=identicon&r=PG", "display_name": "Neitsa", "link": "https://stackoverflow.com/users/507028/neitsa"}, "is_accepted": false, "score": 1, "last_activity_date": 1462405572, "creation_date": 1462405572, "answer_id": 37039959, "question_id": 37037476, "link": "https://stackoverflow.com/questions/37037476/determine-if-instruction-has-indirect-memory-operand/37039959#37039959", "title": "Determine if instruction has indirect memory operand", "body": "<p><a href=\"https://software.intel.com/sites/landingpage/pintool/docs/53271/Pin/html/group__INS__BASIC__API__IA32.html#g4e3ee4b5d8346e8f32e5154a720ab093\" rel=\"nofollow\">INS_OperandIsMemory()</a> if you just want to check if one of the operand is a memory operand.</p>\n\n<p>Note that the second argument, <code>n</code>, indicates the operand number (0-indexed) in Intel syntax, e.g.</p>\n\n<pre><code>; rax = destination op; rdi = source op\nmov rax, [rdi] ; rax = op #0 ; rdi = op #1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2461, "user_id": 2106328, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rfFc5.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/2106328/nishant"}, "is_accepted": false, "score": 1, "last_activity_date": 1464246195, "last_edit_date": 1495542695, "creation_date": 1464246195, "answer_id": 37453761, "question_id": 37037476, "link": "https://stackoverflow.com/questions/37037476/determine-if-instruction-has-indirect-memory-operand/37453761#37453761", "title": "Determine if instruction has indirect memory operand", "body": "<p>It looks like you are looking for two cases:</p>\n\n<ol>\n<li>If the an operand is a register containing a memory address. This is used for indirect jumps or calls. Can be detected via <code>INS_IsIndirectBranchOrCall(ins)</code></li>\n<li>If the second operand is a memory location used for arithmetic or move operations. Can be detected by <code>(!INS_IsBranchOrCall(ins) &amp;&amp; (INS_MemoryOperandCount(ins) &gt; 0))</code></li>\n</ol>\n\n<p><em>NOTE:</em>\n<code>lea</code> instruction just loads a memory address into a register. It never actually access the memory address. Read <a href=\"https://stackoverflow.com/questions/1699748/what-is-the-difference-between-mov-and-lea\">here</a>. <code>INS_IsLea</code> returns true is the instruction opcode is <code>lea</code>. Hence it will return false for <code>MOV rax, (%rdi)</code></p>\n"}], "owner": {"reputation": 308, "user_id": 3241663, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2772bd82c001755ef52c69494e219a2a?s=128&d=identicon&r=PG&f=1", "display_name": "TypeKazt", "link": "https://stackoverflow.com/users/3241663/typekazt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1464246195, "creation_date": 1462393892, "last_edit_date": 1462394494, "question_id": 37037476, "link": "https://stackoverflow.com/questions/37037476/determine-if-instruction-has-indirect-memory-operand", "title": "Determine if instruction has indirect memory operand", "body": "<p>Looking at PIN's <a href=\"https://software.intel.com/sites/landingpage/pintool/docs/53271/Pin/html/group__INS__BASIC__API__GEN__IA32.html#gd3b5f975c84b126531b38930b94b5544\" rel=\"nofollow\">Inspection API Page</a> there is a method called <code>INS_IsLea()</code> which returns true if the current instruction is a <code>LEA</code> isntruction. This is useful, but I need to determine if one of the instruction operands are indirect references. For example:</p>\n\n<pre><code>MOV rax, (%rdi)\n</code></pre>\n\n<p>I'd like to be able to determine that the second operand is in fact an indirect reference, but there does not seem to be a method available for this. </p>\n"}, {"tags": ["android", "c++", "assembly", "arm", "marmalade"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1462394284, "post_id": 37037457, "comment_id": 61625253, "body": "In most cases humans can&#39;t write better asm than the compiler/optimizer. So in general you should just stay away from writing asm yourself. You are likely to produce worse code and more problems than if you just leave it to the tools. (Warning: Egos may interfere)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1462394424, "post_id": 37037457, "comment_id": 61625315, "body": "Misguided attempt. You will not write better ASM than compiler."}, {"owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1462403229, "post_id": 37037457, "comment_id": 61628972, "body": "<b>Probably</b> misguided.   You can beat a compiler for very specific pieces of code (audio mixing and filters come to mind), but overall, it&#39;s generally not worth it."}, {"owner": {"reputation": 575, "user_id": 5403975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4092f9309bc4ab2f0e180e014508ca3a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5403975/michael"}, "edited": false, "score": 0, "creation_date": 1462404195, "post_id": 37037457, "comment_id": 61629252, "body": "Thanks, but this was not actually my question. I want to know whether I would have to write the assembly code for every processor(Intel, ARM...) again?"}, {"owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1462411416, "post_id": 37037457, "comment_id": 61631132, "body": "Yes is the answer.   Assembly maps (very very very) very closely to the instruction set, and the ARM and x86 instruction sets are very different.  While it might be an interesting idea to have a simplistic assembly that maps to different ISAs, it doesn&#39;t sound like it&#39;ll really be useful because at that point, all you&#39;re making is a crappy language, rather than getting close to the metal so you can do things that can&#39;t be well expressed in a high level language with the instructions available."}], "answers": [{"comments": [{"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 1, "creation_date": 1462436108, "post_id": 37045512, "comment_id": 61639549, "body": "The last statement is absolute spot on and sums it all up!"}], "tags": [], "owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "is_accepted": true, "score": 3, "last_activity_date": 1462435451, "creation_date": 1462435451, "answer_id": 37045512, "question_id": 37037457, "link": "https://stackoverflow.com/questions/37037457/writing-android-app-parts-in-assembly/37045512#37045512", "title": "Writing android app parts in assembly", "body": "<p>Yes, <strong>of course you will have to write the assembly code for every <s>processor</s> ABI</strong>.</p>\n\n<p>The Android NDK has <a href=\"https://developer.android.com/ndk/guides/abis.html\" rel=\"nofollow\">specific support for different ABIs</a>.</p>\n\n<p>Keep in mind that, while there are currently only three processor families supported (Intel x86/64, ARM and MIPS) you have to target all the different ABIs not the processors families themselves.</p>\n\n<p>You can drop MIPS devices safely, they are very rare.<br>\nIntel devices are mostly tablet, but there are some phone too.<br>\nThe vast majority of devices out there is ARM.</p>\n\n<p>If you look at an official <a href=\"http://infocenter.arm.com/help/topic/com.arm.doc.uan0015b/Cortex_A57_Software_Optimization_Guide_external.pdf\" rel=\"nofollow\">optimization guide from ARM v8</a> or at a very useful <a href=\"http://www.agner.org/optimize/\" rel=\"nofollow\">optimization guide for Intel</a> you can see that <strong>it actually will take some time to write good assembly code</strong>, it's not just about making something work (which you should already be able to do easily). </p>\n\n<p><strong>Hint</strong><br>\nWrite first the critical parts in C++, then look at the disassembly and see if you can do better or if you can recognize some sub-optimal patterns.<br>\nOnly then rewrite the code in assembly. </p>\n\n<p>Also before doing such micro-optimizations, try to use better data structures, better algorithms and better resource handling.</p>\n"}], "owner": {"reputation": 575, "user_id": 5403975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4092f9309bc4ab2f0e180e014508ca3a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5403975/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 37045512, "answer_count": 1, "score": 0, "last_activity_date": 1462435451, "creation_date": 1462393829, "question_id": 37037457, "link": "https://stackoverflow.com/questions/37037457/writing-android-app-parts-in-assembly", "title": "Writing android app parts in assembly", "body": "<p>I am using Marmalde and C/C++ to write an game for android.\nNow I eant to write some important parts in assembler to improve the performance.\n<strong>But I am wondering me whether this app could run on the most android devices? (about 90%)</strong>\nBecause in general assembler code depends on the processor and different android phones may have different processors, for example Intel or ARM, so I would have to write these parts in different assembler languages for every different processor!?</p>\n"}, {"tags": ["c++", "new-operator"], "comments": [{"owner": {"reputation": 10212, "user_id": 970543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wq9T6.jpg?s=128&g=1", "display_name": "Nik Bougalis", "link": "https://stackoverflow.com/users/970543/nik-bougalis"}, "edited": false, "score": 7, "creation_date": 1462393256, "post_id": 37037269, "comment_id": 61624721, "body": "Does it matter? What some implementation uses today may change tomorrow - or even later today."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1462393334, "post_id": 37037269, "comment_id": 61624762, "body": "You can <a href=\"http://stackoverflow.com/questions/826569/compelling-examples-of-custom-c-allocators\">write your own allocator for your C++ objects</a>, that&#39;s the primary difference. Internally C++ has its own method for allocating that differs from <code>malloc()</code> and related libraries."}, {"owner": {"reputation": 251, "user_id": 6210960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QD5L0.jpg?s=128&g=1", "display_name": "Ethan F.", "link": "https://stackoverflow.com/users/6210960/ethan-f"}, "edited": false, "score": 0, "creation_date": 1462393445, "post_id": 37037269, "comment_id": 61624828, "body": "new is overridable,  which gives you more convenience."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1462393473, "post_id": 37037269, "comment_id": 61624850, "body": "Unless you have a very special need you shouldn&#39;t need to care. And if you do, you can write your own allocator."}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 2, "creation_date": 1462393507, "post_id": 37037269, "comment_id": 61624871, "body": "<code>new</code> is the C++ language construct (keyword), not C library or C++ library. It&#39;s up to compiler vendor to implement it. So you need to lookup your favorite compiler&#39;s source code for that (and  if it&#39;s Microsoft, then no luck). If you are interested in memory allocation, you might also want to take a look at my never_will_be_answered <a href=\"http://stackoverflow.com/questions/16377991/how-to-control-memory-allocation-strategy-in-third-party-library-code\">thread</a> about memory allocation hooking."}, {"owner": {"reputation": 342, "user_id": 5066487, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/97c23fc6b1c4a739b34f5833de7b5b82?s=128&d=identicon&r=PG&f=1", "display_name": "1v0", "link": "https://stackoverflow.com/users/5066487/1v0"}, "reply_to_user": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 1, "creation_date": 1462394001, "post_id": 37037269, "comment_id": 61625106, "body": "@Drop Thanks for your comment. @ Nik Bougalis Yep it matters (sometimes), if you do parallel programming and allocate objects on the free space, there has to be an efficient! mechanism to keep track of the (un)allocated space, I was curious to know how this mechanism works on the system where I run my code"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 1, "creation_date": 1462394043, "post_id": 37037269, "comment_id": 61625122, "body": "@Drop - <code>new</code> is, indeed, a keyword. However, <code>operator new</code> is part of the C++ library, and is responsible for allocating the memory that the keyword <code>new</code> calls for."}, {"owner": {"reputation": 342, "user_id": 5066487, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/97c23fc6b1c4a739b34f5833de7b5b82?s=128&d=identicon&r=PG&f=1", "display_name": "1v0", "link": "https://stackoverflow.com/users/5066487/1v0"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462395556, "post_id": 37037269, "comment_id": 61625903, "body": "@tadman Are you implying that (default) new uses malloc underneath? Is that true?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462395925, "post_id": 37037269, "comment_id": 61626087, "body": "@1v0 The opposite actually. I&#39;d be extremely surprised if any modern C++ implementation used anything from libc."}], "answers": [{"comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 4, "creation_date": 1462393799, "post_id": 37037374, "comment_id": 61625016, "body": "The C++ standard explicitly gives you permission to replace <code>operator new</code> and <code>operator delete</code>, so any implementation that doesn&#39;t allow it isn&#39;t really C++."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1473780765, "post_id": 37037374, "comment_id": 66266967, "body": "@JerryCoffin: It&#39;s a Windows thing."}], "tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": false, "score": -1, "last_activity_date": 1462393559, "creation_date": 1462393559, "answer_id": 37037374, "question_id": 37037269, "link": "https://stackoverflow.com/questions/37037269/different-implementations-of-c-new/37037374#37037374", "title": "Different implementations of C++ new", "body": "<p>In my experience the only way to know is to force it:</p>\n\n<pre><code>void* operator new (std::size_t size) throw (std::bad_alloc)\n{\n    void *ptr = malloc(size);\n    if (!ptr) throw std::bad_alloc();\n}\n\nvoid operator delete(void *ptr)\n{\n    free(ptr);\n}\n</code></pre>\n\n<p>And do the same for the other 3 versions.</p>\n\n<p>Somebody will surely claim you can't replace the standard-library version. If you are dynamically linking with the standard library they are right, so don't do that. If you are statically linking, this works.</p>\n"}, {"tags": [], "owner": {"reputation": 342, "user_id": 5066487, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/97c23fc6b1c4a739b34f5833de7b5b82?s=128&d=identicon&r=PG&f=1", "display_name": "1v0", "link": "https://stackoverflow.com/users/5066487/1v0"}, "is_accepted": true, "score": 1, "last_activity_date": 1462397256, "creation_date": 1462397256, "answer_id": 37038344, "question_id": 37037269, "link": "https://stackoverflow.com/questions/37037269/different-implementations-of-c-new/37038344#37038344", "title": "Different implementations of C++ new", "body": "<p>Here are a couple of allocators I found:</p>\n\n<p>HOARD (GNU + commercial licenses)</p>\n\n<p>MicroQuill SmartHeap for SMP (commercial license)</p>\n\n<p>Google Perf Tools TCMalloc (BSD license)</p>\n\n<p>NedMalloc (BSD license)</p>\n\n<p>JemAlloc (BSD license)</p>\n\n<p>PTMalloc (GNU, no Windows port yet?)</p>\n\n<p>Intel Thread Building Blocks (GNU, commercial)</p>\n\n<p>But I am still curious how to determine the default allocator used by my compiler...</p>\n"}], "owner": {"reputation": 342, "user_id": 5066487, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/97c23fc6b1c4a739b34f5833de7b5b82?s=128&d=identicon&r=PG&f=1", "display_name": "1v0", "link": "https://stackoverflow.com/users/5066487/1v0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "closed_date": 1463235292, "accepted_answer_id": 37038344, "answer_count": 2, "score": 0, "last_activity_date": 1462397256, "creation_date": 1462393114, "last_edit_date": 1495542237, "question_id": 37037269, "link": "https://stackoverflow.com/questions/37037269/different-implementations-of-c-new", "closed_reason": "Needs more focus", "title": "Different implementations of C++ new", "body": "<p>Reading this question: <a href=\"https://stackoverflow.com/questions/37035776/how-to-know-which-malloc-is-used\">How to know which malloc is used?</a>, there seem to be a lot of different implementation of malloc. </p>\n\n<p>I was trying to find something similar for the C++ <code>new</code> operator but was not able to find any information about how/where <code>new</code> is implemented and whether different implementations exist. Do they? What does glibc for example use?</p>\n"}, {"tags": ["c++", "macos"], "comments": [{"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 1, "creation_date": 1462393154, "post_id": 37037140, "comment_id": 61624655, "body": "What is C++ command? This invented term introduces ambiguity into your question."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1462393219, "post_id": 37037140, "comment_id": 61624701, "body": "Using sleep is almost always a sign of improper coding."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1462392997, "creation_date": 1462392997, "answer_id": 37037242, "question_id": 37037140, "link": "https://stackoverflow.com/questions/37037140/how-to-delay-a-c-command-on-mac-os-x/37037242#37037242", "title": "How to delay a C++ command on Mac OS X", "body": "<p>If you want a portable solution and you have at least C++11 suport then you can use <a href=\"http://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow\"><code>std::this_thread::sleep_for</code></a> like</p>\n\n<pre><code>using namespace std::chrono_literals;\nstd::this_thread::sleep_for(1s);\n</code></pre>\n\n<p>This will cause the current thread to sleep for 1 second.</p>\n"}], "owner": {"reputation": 17, "user_id": 6117894, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SVNWrgNW7r0/AAAAAAAAAAI/AAAAAAAAAAw/QQgNw6JSRWY/photo.jpg?sz=128", "display_name": "Conner Vieira", "link": "https://stackoverflow.com/users/6117894/conner-vieira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 600, "favorite_count": 0, "accepted_answer_id": 37037242, "answer_count": 1, "score": 0, "last_activity_date": 1474334814, "creation_date": 1462392704, "last_edit_date": 1474334814, "question_id": 37037140, "link": "https://stackoverflow.com/questions/37037140/how-to-delay-a-c-command-on-mac-os-x", "title": "How to delay a C++ command on Mac OS X", "body": "<p>I'm working on this very simple OS with Netbeans on Mac and I need to delay a line of code for a timer application. Is there a simple command I can use to delay (do nothing/wait) for a certain amount of time? I've looked on other questions on this topic and they say to type \"Thread.Sleep(1000);\" but that just comes up with a bunch of errors. Thanks for your help in advance!</p>\n\n<p>I tried using one of the suggestions below and got this:</p>\n\n<p>main.cpp:29:26: error: expected namespace name\n    using namespace std::chrono_literals;\n                    ~~~~~^\nmain.cpp:30:10: error: no member named 'this_thread' in namespace 'std'\n    std::this_thread::sleep_for(5s);\n    ~~~~~^\nmain.cpp:30:34: error: invalid suffix 's' on integer constant\n    std::this_thread::sleep_for(5s);\n                                 ^\n3 errors generated.</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462392254, "post_id": 37036974, "comment_id": 61624156, "body": "Just overload it is a free function - two free functions actually."}], "answers": [{"comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1462392627, "post_id": 37037035, "comment_id": 61624370, "body": "Those declarations are not valid. A member <code>operator *</code> can only take one parameter."}, {"owner": {"reputation": 2605, "user_id": 4846598, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/56c681dc497676a33de782f84bc7a87f?s=128&d=identicon&r=PG&f=1", "display_name": "Hearner", "link": "https://stackoverflow.com/users/4846598/hearner"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1462392849, "post_id": 37037035, "comment_id": 61624492, "body": "Just tested it, you&#39;re right, i&#39;ll edit"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1462393013, "post_id": 37037035, "comment_id": 61624585, "body": "But now you don&#39;t handle <code>2 * a</code>."}], "tags": [], "owner": {"reputation": 2605, "user_id": 4846598, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/56c681dc497676a33de782f84bc7a87f?s=128&d=identicon&r=PG&f=1", "display_name": "Hearner", "link": "https://stackoverflow.com/users/4846598/hearner"}, "is_accepted": false, "score": 0, "last_activity_date": 1462392830, "last_edit_date": 1462392830, "creation_date": 1462392321, "answer_id": 37037035, "question_id": 37036974, "link": "https://stackoverflow.com/questions/37036974/overloading-the-multiplication-operator-as-a-member-function/37037035#37037035", "title": "Overloading the multiplication operator as a member function", "body": "<p>Just overload the operator * like this:</p>\n\n<pre><code>MyClass &amp;operator* (int);\n</code></pre>\n\n<p>Also, use templates so you can multiply int, float,double or whatever </p>\n"}], "owner": {"reputation": 1, "user_id": 6292570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83e1df52c7570eb199529b1d7a2af660?s=128&d=identicon&r=PG&f=1", "display_name": "unsername", "link": "https://stackoverflow.com/users/6292570/unsername"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 293, "favorite_count": 0, "closed_date": 1462392355, "answer_count": 1, "score": 0, "last_activity_date": 1462392830, "creation_date": 1462392050, "question_id": 37036974, "link": "https://stackoverflow.com/questions/37036974/overloading-the-multiplication-operator-as-a-member-function", "closed_reason": "Duplicate", "title": "Overloading the multiplication operator as a member function", "body": "<p>How would I go about overloading the multiplication operator as a member function in a way that I can multiply both ways?  For example, I know how to overload the multiplication operator as a member class so that this works:</p>\n\n<pre><code>MyClass a = a * 2;\n</code></pre>\n\n<p>However, I would also like a member function that allowed for this:</p>\n\n<pre><code>MyClass a = 2 * a;\n</code></pre>\n\n<p>How would I overload the multiplication operator to allow this?</p>\n"}, {"tags": ["c++", "pointers", "iostream", "ostream"], "comments": [{"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 3, "creation_date": 1462391820, "post_id": 37036857, "comment_id": 61623933, "body": "&quot;Concrete question. Is there any way to figure out whether an ostream ptr or any ptr for that matter is still referencing a valid object or memory location?&quot;  -- yes : Java."}, {"owner": {"reputation": 853, "user_id": 2506915, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6cbabe9a4b97888a4b666c88c50ad786?s=128&d=identicon&r=PG", "display_name": "Montaldo", "link": "https://stackoverflow.com/users/2506915/montaldo"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 6, "creation_date": 1462391872, "post_id": 37036857, "comment_id": 61623953, "body": "@nicomp don&#39;t like java"}, {"owner": {"reputation": 853, "user_id": 2506915, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6cbabe9a4b97888a4b666c88c50ad786?s=128&d=identicon&r=PG", "display_name": "Montaldo", "link": "https://stackoverflow.com/users/2506915/montaldo"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1462391932, "post_id": 37036857, "comment_id": 61623980, "body": "@Captain Obvlious but its all on the stack. I tried that but you still can&#39;t detect whether it went out of scope afaik"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "reply_to_user": {"reputation": 251, "user_id": 6210960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QD5L0.jpg?s=128&g=1", "display_name": "Ethan F.", "link": "https://stackoverflow.com/users/6210960/ethan-f"}, "edited": false, "score": 5, "creation_date": 1462392518, "post_id": 37036857, "comment_id": 61624304, "body": "@EthanF. <i>What</i> exception? Accessing an invalid object results in undefined behavior not a C++ exception."}, {"owner": {"reputation": 251, "user_id": 6210960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QD5L0.jpg?s=128&g=1", "display_name": "Ethan F.", "link": "https://stackoverflow.com/users/6210960/ethan-f"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1462392875, "post_id": 37036857, "comment_id": 61624506, "body": "@CaptainObvlious Yeah, you are right. it can be anything in that address."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1462393497, "post_id": 37036857, "comment_id": 61624866, "body": "Make your fileout a global object too. (You can still call fileout.open on it from the stack). Then it&#39;ll have a static lifetime and your global <code>std::ostream* </code> can point to it."}, {"owner": {"reputation": 853, "user_id": 2506915, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6cbabe9a4b97888a4b666c88c50ad786?s=128&d=identicon&r=PG", "display_name": "Montaldo", "link": "https://stackoverflow.com/users/2506915/montaldo"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1462394257, "post_id": 37036857, "comment_id": 61625231, "body": "@PSkocik I understand, but that is completely missing the point"}], "answers": [{"tags": [], "owner": {"reputation": 4051, "user_id": 517634, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5a553115a86e5f1d7d59c4c9eefcb6f2?s=128&d=identicon&r=PG", "display_name": "T33C", "link": "https://stackoverflow.com/users/517634/t33c"}, "is_accepted": false, "score": 3, "last_activity_date": 1462392354, "creation_date": 1462392354, "answer_id": 37037045, "question_id": 37036857, "link": "https://stackoverflow.com/questions/37036857/how-to-detect-if-a-ptr-is-still-referencing-a-valid-reference-after-that-referen/37037045#37037045", "title": "How to detect if a ptr is still referencing a valid reference after that reference goes out of scope", "body": "<p>A possible approach is to create a RAII class that wraps the stream before passing it into setOutput. This class should be designed to work like shared_ptr such that it maintains a shared ref count. writeData then checks to see if it has the only remaining reference and if so then destroys the ostream and defaults to cout.</p>\n"}, {"tags": [], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "is_accepted": false, "score": 10, "last_activity_date": 1462392454, "creation_date": 1462392454, "answer_id": 37037074, "question_id": 37036857, "link": "https://stackoverflow.com/questions/37036857/how-to-detect-if-a-ptr-is-still-referencing-a-valid-reference-after-that-referen/37037074#37037074", "title": "How to detect if a ptr is still referencing a valid reference after that reference goes out of scope", "body": "<p>This sounds like a great use case for RAII.</p>\n\n<p>Write a class that takes a filename and a <code>std::ostream**</code> as parameters to its constructor. In the constructor of the said class, construct the ofstream (as a member), and set the pointer to the ofstream. In the destructor, revert to <code>stdout</code>.</p>\n\n<p>Then, replace the first two lines of the following function with a declaration of the new class.</p>\n\n<pre><code>void foo()\n{\n  std::ofstream fileout(\"test.txt\", std::ofstream::out | std::ofstream::app);\n  setOutput(fileout);\n  writeData(\"message to file\");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 2, "creation_date": 1462397223, "post_id": 37037102, "comment_id": 61626698, "body": "@nicomp &#39;raw&#39; pointers are proper pointers. I used &#39;raw&#39; qualifier to distinguish from smart pointers which can also be considered to be pointers from an abstract point of view, even though they aren&#39;t proper pointers. I needed to distinguish, because in the case of some smart pointers, you <i>can</i> figure out whether the pointed object is still valid and in the case of others, the smart pointer itself takes care of destroying the object when it is no longer referenced so there is no need to figure it out."}, {"owner": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 3, "creation_date": 1462404297, "post_id": 37037102, "comment_id": 61629288, "body": "@nicomp To expand on user2078303&#39;s comment, the desire to be able to do things like the OP wants to do is so great, that we&#39;ve invented all sorts of &quot;pointers&quot; (classes which point) which provide guarantees about the lifespan of an object.  These have gotten popular enough that people have started calling pointers &quot;raw pointers&quot; to take extra care to point out how few guarantees they come with, and gently encourage people to use more smart pointers.  I&#39;ve also heard of them called &quot;native pointers,&quot; but &quot;raw&quot; is more common."}, {"owner": {"reputation": 44714, "user_id": 581994, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d2ae9ac6fb51918297a0ce5dada0eb22?s=128&d=identicon&r=PG", "display_name": "Hot Licks", "link": "https://stackoverflow.com/users/581994/hot-licks"}, "edited": false, "score": 4, "creation_date": 1462406194, "post_id": 37037102, "comment_id": 61629877, "body": "They&#39;re called &quot;raw pointers&quot; because they&#39;re what paleo C programmers eat for breakfast."}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "reply_to_user": {"reputation": 44714, "user_id": 581994, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d2ae9ac6fb51918297a0ce5dada0eb22?s=128&d=identicon&r=PG", "display_name": "Hot Licks", "link": "https://stackoverflow.com/users/581994/hot-licks"}, "edited": false, "score": 0, "creation_date": 1462406625, "post_id": 37037102, "comment_id": 61629968, "body": "@HotLicks I eat Pop Tarts and Mt Dew for breakfast because I am a Real C Programmer."}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1462407812, "post_id": 37037102, "comment_id": 61630243, "body": "Including a mention to <code>weak_ptr</code> and <code>shared_ptr</code> will greatly improve the answer."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1462439587, "post_id": 37037102, "comment_id": 61641360, "body": "@WorldSEnder I didn&#39;t think that smart pointers would be very relevant to this question since I think using them for this particular case would be a bit kludgy. Anyway, I added a footnote mentioning smart pointers for the general case of guaranteeing validity of objects. I didn&#39;t go into detail, but a reader will be able to search more detailed information from other questions."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 13, "last_activity_date": 1462439782, "last_edit_date": 1462439782, "creation_date": 1462392541, "answer_id": 37037102, "question_id": 37036857, "link": "https://stackoverflow.com/questions/37036857/how-to-detect-if-a-ptr-is-still-referencing-a-valid-reference-after-that-referen/37037102#37037102", "title": "How to detect if a ptr is still referencing a valid reference after that reference goes out of scope", "body": "<blockquote>\n  <p>Concrete question. Is there any way to figure out whether an ostream ptr or any ptr for that matter is still referencing a valid object or memory location?</p>\n</blockquote>\n\n<p>No. There is no way to figure that out with raw pointers. Not in standard c++ at least.</p>\n\n<p>You will need to guarantee that the pointed object stays alive as long as it's pointed to.</p>\n\n<p>A common pattern that is used to provide that guarantee is RAII, as detailed in other answers. Another approach to guaranteeing validity of of a pointer is to use a smart pointer instead of a raw one. However, those are not compatible with automatic variables.</p>\n\n<p>It would be OK to keep pointing to dead objects as long as you could guarantee that the pointer is not dereferenced. Which is often difficult to guarantee, because, as already stated, there is no way to test whether the pointed object exists.</p>\n"}, {"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": false, "score": 5, "last_activity_date": 1462393010, "creation_date": 1462393010, "answer_id": 37037247, "question_id": 37036857, "link": "https://stackoverflow.com/questions/37036857/how-to-detect-if-a-ptr-is-still-referencing-a-valid-reference-after-that-referen/37037247#37037247", "title": "How to detect if a ptr is still referencing a valid reference after that reference goes out of scope", "body": "<p>You should use RAII to force the stream to be set correctly and then set back to std::cout if the object is destroyed.</p>\n\n<pre><code>class OutputStream\n{\n    protected:\n        static std::ostream*&amp; internalGlobalStateOfOutputStream()\n        {\n            static std::ostream*  out = &amp;std::cout;\n            return out;\n        }\n    public:\n        static std::ostream&amp; getOutputStream()\n        {\n            return *internalGlobalStateOfOutputStream();\n        }\n};\ntemplate&lt;typename T&gt;\nclass OutputStreamOwner: public OutputStream\n{\n    T  ownedStream;\n    public:\n        OutputStreamOwner(T&amp;&amp; obj)\n            : ownedStream(std::move(obj))\n        {\n            internalGlobalStateOfOutputStream() = &amp;ownedStream;\n        }\n        template&lt;typename... Args&gt;\n        OutputStreamOwner(Args... args)\n            : ownedStream(args...)\n        {\n            internalGlobalStateOfOutputStream() = &amp;ownedStream;\n        }\n        ~OutputStreamOwner()\n        {\n            internalGlobalStateOfOutputStream() = &amp; std::cout;\n        }\n        // Delete copy\n        OutputStreamOwner(OutputStreamOwner const&amp;)           = delete;\n        OutputStreamOwner&amp; operator(OutputStreamOwner const&amp;) = delete;\n};\n</code></pre>\n\n<p>The usage is:</p>\n\n<pre><code>void foo()\n{\n  OutputStreamOwner&lt;std::ofstream&gt;  output(\"test.txt\", std::ofstream::out | std::ofstream::app);\n\n  writeData(\"message to file\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4051, "user_id": 517634, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5a553115a86e5f1d7d59c4c9eefcb6f2?s=128&d=identicon&r=PG", "display_name": "T33C", "link": "https://stackoverflow.com/users/517634/t33c"}, "is_accepted": false, "score": 1, "last_activity_date": 1462393821, "creation_date": 1462393821, "answer_id": 37037454, "question_id": 37036857, "link": "https://stackoverflow.com/questions/37036857/how-to-detect-if-a-ptr-is-still-referencing-a-valid-reference-after-that-referen/37037454#37037454", "title": "How to detect if a ptr is still referencing a valid reference after that reference goes out of scope", "body": "<blockquote>\n  <p>Concrete question. Is there any way to figure out whether an ostream\n  ptr or any ptr for that matter is still referencing a valid object or\n  memory location?</p>\n  \n  <p>ps: I could use heap memory and do something with smart pointers but\n  frankly I'd want to keep it like this if possible</p>\n</blockquote>\n\n<p>No, there is no standard way to test if a raw pointer or reference is still referring to a valid object. </p>\n\n<p>RAII is the standard C++ solution to this type of problem so you should be looking at smart pointers, in my opinion. I am not aware of any library provided smart pointer that would solve this particular problem but an RAII solution based on shared ownership seems the best solution here.</p>\n"}, {"tags": [], "owner": {"reputation": 18603, "user_id": 981773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/756e2eb1fefca6917bc366d6afdce01c?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/981773/sam"}, "is_accepted": false, "score": 2, "last_activity_date": 1462546834, "last_edit_date": 1462546834, "creation_date": 1462430744, "answer_id": 37044159, "question_id": 37036857, "link": "https://stackoverflow.com/questions/37036857/how-to-detect-if-a-ptr-is-still-referencing-a-valid-reference-after-that-referen/37044159#37044159", "title": "How to detect if a ptr is still referencing a valid reference after that reference goes out of scope", "body": "<p>You could avoid these complications altogether with a function that takes the stream as input.</p>\n\n<pre><code>void writeData(std::ostream&amp; os, const std::string &amp; msg)\n{    \n     os &lt;&lt; msg &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>You can further refine it by returning the stream, to allow one to chain calls to it:</p>\n\n<pre><code>std::ostream&amp; os writeLine(std::ostream&amp; os, const std::string &amp; msg)\n{    \n     os &lt;&lt; msg &lt;&lt; '\\n';\n     return os;\n}\n\n// declare stream\nstream &lt;&lt; writeLine(stream, \"Foo\") &lt;&lt; writeLine(stream, \"Bar\");\n</code></pre>\n\n<p>In fact this function is nicer and easier to maintain, as you don't have to remember which stream is set at any given time. For large programs, this is an important quality.</p>\n"}], "owner": {"reputation": 853, "user_id": 2506915, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6cbabe9a4b97888a4b666c88c50ad786?s=128&d=identicon&r=PG", "display_name": "Montaldo", "link": "https://stackoverflow.com/users/2506915/montaldo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 983, "favorite_count": 2, "accepted_answer_id": 37037102, "answer_count": 6, "score": 14, "last_activity_date": 1462546834, "creation_date": 1462391695, "question_id": 37036857, "link": "https://stackoverflow.com/questions/37036857/how-to-detect-if-a-ptr-is-still-referencing-a-valid-reference-after-that-referen", "title": "How to detect if a ptr is still referencing a valid reference after that reference goes out of scope", "body": "<p>I am toying around with streams for a bit and can't get my head around the following. </p>\n\n<p>Here we have a basic ostream ptr that is set to different output streams, whether it is <code>cout</code>, <code>cerr</code> or a <code>file</code>.  </p>\n\n<pre><code>// ostream ptr\nstd::ostream* outstream;\n\n// set output ostream\nvoid setOutput(std::ostream &amp; os)\n{\n  outstream = &amp;os; \n}\n\n// write message to ostream\nvoid writeData(const std::string &amp; msg)\n{    \n  *outstream &lt;&lt; msg &lt;&lt; '\\n';\n}\n\nint main (int argc, char * const argv[]) \n{\n  // init to std out\n  setOutput(std::cout);\n  writeData(\"message to cout\");\n\n  setOutput(std::cerr);\n  writeData(\"message to cerr\");\n\n  std::ofstream fileout(\"test.txt\", std::ofstream::out | std::ofstream::app);\n  setOutput(fileout);\n  writeData(\"message to file\");\n  //fileout.close();\n\n  setOutput(std::cout);\n  writeData(\"message2 to cout\");\n\n  return 0;\n}\n</code></pre>\n\n<p>The above works perfectly and shows the strength of the c++ iostream implementation. Perfect. </p>\n\n<p>However, since the <code>setOutput</code> is set by reference the referenced object has to stay in scope. This is where the issue emerges. I want to figure out a way to default the output to <code>std::cout</code> if the ofstream or any other ostream is invalidated. That is, referenced object is or went out of scope.</p>\n\n<p>For example:</p>\n\n<pre><code>// write message to ostream\nvoid writeData(const std::string &amp; msg)\n{\n  if (/*stream or memory is invalid*/)\n    setOutput(std::cout);\n\n  *outstream &lt;&lt; msg &lt;&lt; '\\n';\n}\n// local fileout goes out of scope\nvoid foo()\n{\n  std::ofstream fileout(\"test.txt\", std::ofstream::out | std::ofstream::app);\n  setOutput(fileout);\n  writeData(\"message to file\");\n}\n\nint main (int argc, char * const argv[]) \n{\n  setOutput(std::cout);\n  writeData(\"message to cout\");\n\n  foo();\n  /* problem the local fileout is no longer referenced by the ostream ptr*/\n  /* the following should be redirected to std::cout cuz of default*/\n  writeData(\"message2 to cout\");\n\n  return 0;\n}\n</code></pre>\n\n<p>The above is fine until the <code>foo()</code> returns to the main function. There it goes horrible wrong because the locally defined <code>ofstream</code> is not reachable anymore.</p>\n\n<p>Obviously this is not advisable and the user should realise this. However I want to wrap all this in a logging class and thus keep the state of the object valid even thought this misuse might happen. It will cause an invalidate access violation which can be hard to find.</p>\n\n<p>Concrete question. Is there any way to figure out whether an ostream ptr or any ptr for that matter is still referencing a valid object or memory location?</p>\n\n<p><em>ps: I could use heap memory and do something with smart pointers but frankly I'd want to keep it like this if possible</em></p>\n"}, {"tags": ["c++", "c", "windows", "compilation", "wxwidgets"], "comments": [{"owner": {"reputation": 453, "user_id": 5128148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9952b45bc2ee14566935d8d86eb02b?s=128&d=identicon&r=PG&f=1", "display_name": "LBerger", "link": "https://stackoverflow.com/users/5128148/lberger"}, "edited": false, "score": 0, "creation_date": 1462392187, "post_id": 37036764, "comment_id": 61624122, "body": "I think you have to modify FindwxWidgets.cmake in cmake-3.x/share/cmake-3.x/modules. at line 468 you can insert wxWidgets-3.1.0. On my computer I have defined too wxDir=c:\\wxWidgets-3.1.0 and wxWin=c:\\wxWidgets-3.1.0"}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1462458895, "post_id": 37036764, "comment_id": 61653779, "body": "@DiegoCoelho, did you compile the wxWidgets? If yes - did you use MinGW or VS? Keep in mind you can directly use VS to compile it and then link to you own project - no CMake is required.  OK, Looking at the question I believe you should declare wxwidgets_LIBRARIES and wxwidgets_INCLUDE_DIRS instead of the &quot;R3D_ALT...&quot; ones, just like the error says."}, {"owner": {"reputation": 1560, "user_id": 2030219, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6314bf166040bf1eb9deb3a6c03d6864?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/2030219/joel"}, "edited": false, "score": 0, "creation_date": 1462458953, "post_id": 37036764, "comment_id": 61653826, "body": "<b>1.-</b> Do you have the lastest version of cmake?"}, {"owner": {"reputation": 21, "user_id": 6292500, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SgwVQin-rkQ/AAAAAAAAAAI/AAAAAAAAABk/1XZirHq2JcM/photo.jpg?sz=128", "display_name": "Diego Coelho", "link": "https://stackoverflow.com/users/6292500/diego-coelho"}, "edited": false, "score": 0, "creation_date": 1462471501, "post_id": 37036764, "comment_id": 61661656, "body": "Joel, yes, I just downloaded/installed yesterday. Igor, Many thanks, I settled that yesterday and compiled with VS too (not only MinGW) and it worked!!! Many thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 5012918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc6227136f7222e8f6d7f95d7e0d19df?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/5012918/eric"}, "is_accepted": false, "score": 0, "last_activity_date": 1462394300, "creation_date": 1462394300, "answer_id": 37037568, "question_id": 37036764, "link": "https://stackoverflow.com/questions/37036764/problems-to-compile-source-code-with-wxwidgets-mingw-mode-on-windows-10/37037568#37037568", "title": "Problems to compile source code with wxWidgets (MinGW mode) on Windows 10", "body": "<p>I'm not very familiar with wxWidgets (so this should probably be a comment, but I can't comment because reasons......), but a quick hack that should work is just throwing the path to the library in LD_LIBRARY_PATH or including it by adding</p>\n\n<pre><code>CPPFLAGS += -L C:\\wxWidgets-3.1.0\\lib\\gcc_dll -I C:\\wxWidgets-3.1.0\\include\n</code></pre>\n\n<p>to your makefile.</p>\n\n<p>Failing that, you could explicitly set the environmental variables it's complaining about outside of the makefile.</p>\n\n<p>Again, sorry, this should be a comment. It's not... If someone wants to copy it to a comment and delete this, that'd be grand.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6292500, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SgwVQin-rkQ/AAAAAAAAAAI/AAAAAAAAABk/1XZirHq2JcM/photo.jpg?sz=128", "display_name": "Diego Coelho", "link": "https://stackoverflow.com/users/6292500/diego-coelho"}, "is_accepted": false, "score": 0, "last_activity_date": 1462471683, "creation_date": 1462471683, "answer_id": 37057389, "question_id": 37036764, "link": "https://stackoverflow.com/questions/37036764/problems-to-compile-source-code-with-wxwidgets-mingw-mode-on-windows-10/37057389#37057389", "title": "Problems to compile source code with wxWidgets (MinGW mode) on Windows 10", "body": "<p>Thank all of you. Solved! Yesterday I compiled both with MinGW and VS and settled the wxWidgets-3.1.0_INCLUDE_DIRS and it worked!</p>\n"}], "owner": {"reputation": 21, "user_id": 6292500, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SgwVQin-rkQ/AAAAAAAAAAI/AAAAAAAAABk/1XZirHq2JcM/photo.jpg?sz=128", "display_name": "Diego Coelho", "link": "https://stackoverflow.com/users/6292500/diego-coelho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 618, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1462471683, "creation_date": 1462391354, "last_edit_date": 1462391707, "question_id": 37036764, "link": "https://stackoverflow.com/questions/37036764/problems-to-compile-source-code-with-wxwidgets-mingw-mode-on-windows-10", "title": "Problems to compile source code with wxWidgets (MinGW mode) on Windows 10", "body": "<p>I am having serious problems to compile a code in Windows (regard3d at <a href=\"http://www.regard3d.org\" rel=\"nofollow\">http://www.regard3d.org</a>). I have read so many post (two days blocked on this problem) here at stackoverflow and other sites, but without success.</p>\n\n<p>The problem is that it needs wxWidgets. For that I am using MinGW. I have VS Community (the latest version). I run my CMakeLists.txt and everytime I get the message</p>\n\n<pre><code>Could NOT find wxWidgets (missing: wxwidgets_LIBRARIES wxwidgets_INCLUDE_DIRS)\n</code></pre>\n\n<p>I included the wxWidgets installation directory (which is <code>C:\\wxWidgets-3.1.0</code>) in <code>PATH</code> variable (I restarted to it takes effect) and created the variable <code>WXWIN</code> (that also contains the installation directory).</p>\n\n<p>The question: What can I do to solve it?</p>\n\n<p>I think the problem is not building the wxWidgets, but make it be found my cmake.  As mentioned, I built it using MinGW, thus I have the folder <code>C:\\wxWidgets-3.1.0\\lib\\gcc_dll</code> and the folder <code>C:\\wxWidgets-3.1.0\\include</code> which contains two more folders named <code>wx</code> and <code>msvc</code>. I am using the following settings before call the cmake:</p>\n\n<pre><code>set wxWidgets_ROOT_DIR=C:\\wxWidgets-3.1.0\nset R3D_ALT_wxWidgets_INCLUDE_DIRS=include\nset R3D_ALT_wxWidgets_LIBRARIES=lib\\gcc_dll \nset wxWidgets_CONFIG_EXECUTABLE=build\\msw \n</code></pre>\n"}, {"tags": ["c++", "linked-list", "doubly-linked-list"], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 6051581, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c6e47c9ec382dd89622e8629e806b73?s=128&d=identicon&r=PG&f=1", "display_name": "StacksAndParsing", "link": "https://stackoverflow.com/users/6051581/stacksandparsing"}, "edited": false, "score": 1, "creation_date": 1462393091, "post_id": 37037142, "comment_id": 61624627, "body": "Thank you for the detailed response! Your explanation is very good and easy to understand. Sorry for the inconsistency (using <code>left</code> instead of previous), I&#39;ve been studying binary search trees for the past 2 weeks and so it must have crept in there :P"}, {"owner": {"reputation": 1282, "user_id": 807631, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/3120b244b19cab8e1c52845139b3fc23?s=128&d=identicon&r=PG&f=1", "display_name": "Misguided", "link": "https://stackoverflow.com/users/807631/misguided"}, "reply_to_user": {"reputation": 119, "user_id": 6051581, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c6e47c9ec382dd89622e8629e806b73?s=128&d=identicon&r=PG&f=1", "display_name": "StacksAndParsing", "link": "https://stackoverflow.com/users/6051581/stacksandparsing"}, "edited": false, "score": 0, "creation_date": 1462426594, "post_id": 37037142, "comment_id": 61635028, "body": "Haha, no problem! :). It&#39;s good you found it easy to understand."}], "tags": [], "owner": {"reputation": 1282, "user_id": 807631, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/3120b244b19cab8e1c52845139b3fc23?s=128&d=identicon&r=PG&f=1", "display_name": "Misguided", "link": "https://stackoverflow.com/users/807631/misguided"}, "is_accepted": true, "score": 1, "last_activity_date": 1462392705, "creation_date": 1462392705, "answer_id": 37037142, "question_id": 37036734, "link": "https://stackoverflow.com/questions/37036734/doubly-linked-lists-properly-deleting-an-adding-something-in-the-middle-of-a-li/37037142#37037142", "title": "Doubly Linked Lists: Properly deleting an adding something in the middle of a list?", "body": "<p>The deletion code is almost okay. Notice, however, a few things:</p>\n\n<ol>\n<li>You are using inconsistent naming (<code>left</code> should be <code>previous</code>).</li>\n<li>There is no need for you to set <code>p</code>'s fields to nullptr, you're going to delete it anyways.</li>\n<li>The last <code>x-&gt;previous = y</code> will make this \"circular\" that's not what you want!.</li>\n</ol>\n\n<p>This would be a better approximation:</p>\n\n<pre><code>node *x = p-&gt;next;\nnode *y = p-&gt;previous;\nx-&gt;previous = y;\ny-&gt;next = x;\ndelete p;\n</code></pre>\n\n<p>However, this has a caveat: what happens if the list is a singleton? that is, you only have <code>p</code>?. Notice that both <code>p-&gt;next</code> and <code>p-&gt;previous</code> will be <code>NULL</code>, and hence the assignment to <code>x</code> and <code>y</code> will error! (notice that being the first or the last element will cause the same problem, just with some side).</p>\n\n<p>The second part of the code is a little bit more problematic:</p>\n\n<ol>\n<li>Notice first of all that your code won't compile: <code>y</code> is a variable, and you're dereferencing it through <code>y-&gt;</code>. This is an operation that can only be done on pointers [1]. This problem is actually more profound in the sense that <code>y</code> being placed in the stack will be deleted as soon as it leaves the scope, and hence you will get an undefined behavior within your linked list if you were to use <code>&amp;y</code> to get a pointer.</li>\n<li><code>y-&gt;previous = x-&gt;previous;</code> can be simplified to <code>y-&gt;previous = p</code></li>\n<li><code>y-&gt;next = p-&gt;next;</code> can be simplified to <code>y-&gt;next = x</code></li>\n</ol>\n\n<p>With those corrections, this would turn into:</p>\n\n<pre><code>node *y = new node();\ny-&gt;previous = p;\ny-&gt;next = p-&gt;next;\np-&gt;next-&gt;previous = y;\np-&gt;next = y;\n</code></pre>\n\n<p>Notice, however, that once again this does not handle the case in which <code>p</code> points to the end of the list! (what would happen with <code>p-&gt;next-&gt;previous = y</code>?), so you should correct that. Also, does it matter if <code>p</code> points to the beginning of the list rather than the end? Should you handle that?.</p>\n\n<p>The only actual problem was the thing with dynamic memory, the rest of the corrections are just 'readability' corrections. Even though 'readability' is personal preference, you should always try to make your code as clear as possible.</p>\n\n<p>[1] Unless you're actually using the <code>operator-&gt;()</code> overload, which I assume you are not.</p>\n"}], "owner": {"reputation": 119, "user_id": 6051581, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c6e47c9ec382dd89622e8629e806b73?s=128&d=identicon&r=PG&f=1", "display_name": "StacksAndParsing", "link": "https://stackoverflow.com/users/6051581/stacksandparsing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 37037142, "answer_count": 1, "score": 1, "last_activity_date": 1462392874, "creation_date": 1462391275, "last_edit_date": 1462392874, "question_id": 37036734, "link": "https://stackoverflow.com/questions/37036734/doubly-linked-lists-properly-deleting-an-adding-something-in-the-middle-of-a-li", "title": "Doubly Linked Lists: Properly deleting an adding something in the middle of a list?", "body": "<blockquote>\n  <p>Write the code fragment that appropriately deletes the node pointed to by <code>p</code> (data value 14) in the doubly linked list.</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/q8Ouk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q8Ouk.png\" alt=\"enter image description here\"></a></p>\n\n<p>I think I have an idea of how to do this:</p>\n\n<p>(1) Make the node on the right side's <code>previous</code> element point to the node on the left</p>\n\n<p>(2) Make the node on the left side's <code>next</code> element point to the node on the right</p>\n\n<p>(3) Make the node's elements which <code>p</code> is pointing to NULL and delete it.</p>\n\n<p>However I forgot how to write this in code (it's been a while). I was thinking it would be something like this (I'm assuming node is a struct that holds an int data, node* next, and node* previous):</p>\n\n<pre><code>node* x = p-&gt;next;\nnode* y = p-&gt;previous;\nx-&gt;previous = y;\ny-&gt;next = x;\np-&gt;previous = nullptr;\np-&gt;next = nullptr;\ndelete p;\nx-&gt;previous = y;\n</code></pre>\n\n<hr>\n\n<p>Write the code fragment to insert a node between 14 and 16 (same picture):</p>\n\n<pre><code>node *x = p-&gt;next;\nnode y;\ny-&gt;previous = x-&gt;previous;\ny-&gt;next = p-&gt;next;\nx-&gt;previous = y; \np-&gt;next = y;\n</code></pre>\n\n<p>Would this be okay?</p>\n"}, {"tags": ["c++", "boost", "boost-asio", "shared-ptr"], "answers": [{"tags": [], "owner": {"reputation": 4051, "user_id": 517634, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5a553115a86e5f1d7d59c4c9eefcb6f2?s=128&d=identicon&r=PG", "display_name": "T33C", "link": "https://stackoverflow.com/users/517634/t33c"}, "is_accepted": false, "score": 1, "last_activity_date": 1462391775, "creation_date": 1462391775, "answer_id": 37036895, "question_id": 37036611, "link": "https://stackoverflow.com/questions/37036611/asio-usage-of-self-shared-pointer-in-the-examples/37036895#37036895", "title": "Asio: usage of self shared pointer in the examples", "body": "<p>The lambda's to which you refer are capturing state (for example the this pointer) from the class object and they need to ensure the object is still alive when they access the state. Remember those lambdas are being called asynchronously, for example when there is data ready to read. The function that instantiated the class initially and the async lambdas thus all share ownership of the class instance. </p>\n\n<p>Have you read <a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"nofollow\">this</a>, if not it might be helpful?</p>\n"}, {"tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 8, "last_activity_date": 1462392914, "last_edit_date": 1462392914, "creation_date": 1462391910, "answer_id": 37036933, "question_id": 37036611, "link": "https://stackoverflow.com/questions/37036611/asio-usage-of-self-shared-pointer-in-the-examples/37036933#37036933", "title": "Asio: usage of self shared pointer in the examples", "body": "<p>The purpose of <a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"noreferrer\"><code>std::enable_shared_from_this&lt;&gt;</code></a> is to create an extra <code>std::shared_ptr</code> from the <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"noreferrer\"><code>std::shared_ptr</code></a> handle that owns the object calling <a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this/shared_from_this\" rel=\"noreferrer\"><code>shared_from_this</code></a> member function.</p>\n\n<hr>\n\n<pre><code>if (!ec)\n{\n     std::make_shared&lt;session&gt;(std::move(socket_))-&gt;start();\n}\n</code></pre>\n\n<p>The above <em>-^^^-</em> is where the <a href=\"https://github.com/chriskohlhoff/asio/blob/master/asio/src/examples/cpp14/echo/async_tcp_echo_server.cpp#L84\" rel=\"noreferrer\">line</a> that creates a <code>session</code>. And as you can see, the <code>std::shared_ptr</code> that is returned by <code>std::make_shared</code> will be destroyed at the <code>;</code>, which should also destroy the <code>session</code> created...</p>\n\n<p>But because <a href=\"https://github.com/chriskohlhoff/asio/blob/master/asio/src/examples/cpp14/echo/async_tcp_echo_server.cpp#L29\" rel=\"noreferrer\"><code>start()</code></a> method calls <a href=\"https://github.com/chriskohlhoff/asio/blob/master/asio/src/examples/cpp14/echo/async_tcp_echo_server.cpp#L35\" rel=\"noreferrer\"><code>do_read()</code></a> which is defined as...</p>\n\n<pre><code>void do_read()\n  {\n    auto self(shared_from_this());\n    socket_.async_read_some(asio::buffer(data_, max_length),\n        [this, self](std::error_code ec, std::size_t length)\n        {\n          if (!ec)\n          {\n            do_write(length);\n          }\n        });\n  }\n</code></pre>\n\n<p>That <code>self</code> increases the <code>shared_ptr</code> reference count. so the destruction of the <a href=\"https://github.com/chriskohlhoff/asio/blob/master/asio/src/examples/cpp14/echo/async_tcp_echo_server.cpp#L84\" rel=\"noreferrer\">original <code>shared_ptr</code></a> created will not destroy the object, rather, it will leave self as the reference to the created object.</p>\n\n<hr>\n\n<p>Also know that a Lambda can outlive its caller... <code>boost::asio::async_write</code> is an asynchronous method that returns immediately after copying it's arguments. The passed lambda may not execute before you reach the <em>end of life</em> of your <code>session</code>. Hence without the additional <code>std::shared_ptr</code> created by <code>shared_from_this</code>, the destructor will run. That additional <code>shared_ptr</code> prevents the destructor of <code>session</code> from running, until the lambda function is called and it's arguments are destructed.</p>\n"}], "owner": {"reputation": 140, "user_id": 3955898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d139d6ed60819032e3f8cffc5c899b1b?s=128&d=identicon&r=PG&f=1", "display_name": "Hydn", "link": "https://stackoverflow.com/users/3955898/hydn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 3, "accepted_answer_id": 37036933, "answer_count": 2, "score": 4, "last_activity_date": 1463839158, "creation_date": 1462390827, "last_edit_date": 1463839158, "question_id": 37036611, "link": "https://stackoverflow.com/questions/37036611/asio-usage-of-self-shared-pointer-in-the-examples", "title": "Asio: usage of self shared pointer in the examples", "body": "<p>Looking through the examples of the Asio library, <a href=\"https://github.com/chriskohlhoff/asio/blob/master/asio/src/examples/cpp14/echo/async_tcp_echo_server.cpp\" rel=\"nofollow\">this one for example</a> (for instance, line 37), I see that sometimes they create a shared pointer from this (they name it self), and capture it in a lambda where they call some asio functions, but I don't understand what the purpose of it. I don't even see it used.</p>\n\n<p>So, why do they do this?</p>\n\n<hr>\n\n<p><em>Relevant Code:</em></p>\n\n<p>..in the server class... (where a session is created)</p>\n\n<pre><code>if (!ec)\n{\n    std::make_shared&lt;session&gt;(std::move(socket_))-&gt;start();\n}\n</code></pre>\n\n<p>... <code>session::start()</code> member method:</p>\n\n<pre><code>void start()\n  {\n    do_read();\n  }\n</code></pre>\n\n<p>... <code>session::do_read()</code> member method (where my point of interest is):</p>\n\n<pre><code>void do_read()\n  {\n    auto self(shared_from_this());                    // &lt;&lt;&lt; ---WHY THIS??????\n    socket_.async_read_some(asio::buffer(data_, max_length),\n        [this, self](std::error_code ec, std::size_t length)\n        {\n          if (!ec)\n          {\n            do_write(length);\n          }\n        });\n  }\n</code></pre>\n"}, {"tags": ["c++", "algorithm"], "owner": {"reputation": 2159, "user_id": 1080517, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2716302deba4765ec00122e0b0da833d?s=128&d=identicon&r=PG", "display_name": "sebap123", "link": "https://stackoverflow.com/users/1080517/sebap123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1462390425, "creation_date": 1462390425, "last_edit_date": 1495541773, "question_id": 37036478, "link": "https://stackoverflow.com/questions/37036478/confusion-about-leafs-in-octree-barnes-hut-algorithm", "title": "Confusion about leafs in octree (Barnes-Hut) algorithm", "body": "<p>This is partially follow up question for my main question: <a href=\"https://stackoverflow.com/questions/37033902/optimization-issues-using-barnes-hut-for-graph-placing\">Optimization issues using Barnes-Hut for graph placing</a>.</p>\n\n<p>I've been reading some additional implementations about Barns-Hut algorithm, and one thing is not fully clear to me. What I did is split octree up to:</p>\n\n<ul>\n<li>the maximum level is reached <strong>or</strong></li>\n<li>there are no more <code>Element</code>s left (so the best situation is if there is only one child per node)</li>\n</ul>\n\n<p>Although what I've found now is that some implementations are leaving leafs of octree empty. For me it looks strange, because if you will have more than one object on given level and this level is <code>nmaxLevels-1</code> you cannot add new element there, because according to their implementations leaf cannot has data.</p>\n\n<p>So is this correct implementation with leaves left empty, or not? We all know that there is various quality code on the web.</p>\n"}, {"tags": ["c++", "tree", "destructor"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1462389823, "post_id": 37036293, "comment_id": 61622860, "body": "<i><code>delete this;</code></i> Huh???? That&#39;s blatantly wrong!"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 3, "creation_date": 1462389847, "post_id": 37036293, "comment_id": 61622872, "body": "Do <i>not</i> call destructors directly. Instead use <code>delete</code> (better yet: use containers or smart pointers)."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1462389876, "post_id": 37036293, "comment_id": 61622893, "body": "Without seeing what <code>add_child</code> does all we can offer is speculation. Make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Also you access <code>this</code> right after <code>delete</code>ing it."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1462389918, "post_id": 37036293, "comment_id": 61622910, "body": "@crashmstr To note aside: <b>Certainly not with <code>this</code>!</b>."}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 4, "creation_date": 1462389938, "post_id": 37036293, "comment_id": 61622921, "body": "But only call <code>delete</code> on pointers to objects that you allocate with <code>new</code>."}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 1, "creation_date": 1462389952, "post_id": 37036293, "comment_id": 61622923, "body": "your structure only contains a vector and a reference, which are automatically destructed properly... So why write one?"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 5, "creation_date": 1462389979, "post_id": 37036293, "comment_id": 61622936, "body": "<code>delete this</code> from within a destructor? REALLY?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 3, "creation_date": 1462390151, "post_id": 37036293, "comment_id": 61623019, "body": "<code>void main</code> has never been valid in either C or C++. Code with <code>void main</code> teaches beginners a bad habit and means most readers can&#39;t just copy and paste the code to try it out. Please don&#39;t post code with <code>void main</code>. Thank you. FTFY."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462390272, "post_id": 37036293, "comment_id": 61623088, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 I upvoted your comment since it is indeed wrong here. But, there are situations where <code>delete this</code> makes sense. If an object knows it is no longer referenced by anyone and no longer serves a purpose (and was allocated on the heap - tricky) then it can commit suicide via <code>delete this</code> as long as no subsequent code references any member variables.  It <i>can</i> make sense, but if you write code like that I&#39;d suggest you get your head examined..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6230365"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1462390385, "post_id": 37036293, "comment_id": 61623134, "body": "@crashmstr i&#39;ll go ahead and try to implement smart pointers (tho i still have the inital fear of pointers, hehe). thanks for the hint."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 3, "creation_date": 1462390509, "post_id": 37036293, "comment_id": 61623186, "body": "@PattuX for smart pointers to even be relevant, you need to have pointers... which you don&#39;t seem to have at all. Your children are a <code>vector</code> of <code>node</code>, so there is no &quot;cleanup&quot; to do with <code>delete</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6230365"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1462390743, "post_id": 37036293, "comment_id": 61623319, "body": "@crashmstr Yes, I&#39;ll re-write <code>get_child()</code> and <code>children</code> to use pointers first."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1462390843, "post_id": 37036293, "comment_id": 61623384, "body": "Please go read a <i>good</i> book on C++. Then indent this code 6 feet down and cover it with dirt. It is horrible."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1462390711, "post_id": 37036431, "comment_id": 61623302, "body": "The first one is allowed in C++1z."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1462390778, "post_id": 37036431, "comment_id": 61623344, "body": "@T.C.; You mean it will most likely be supported in C++17. Thanks I didn&#39;t know. Do you have a reference?"}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 1, "last_activity_date": 1462390650, "last_edit_date": 1462390650, "creation_date": 1462390258, "answer_id": 37036431, "question_id": 37036293, "link": "https://stackoverflow.com/questions/37036293/c-destructor-for-tree-structure/37036431#37036431", "title": "C++ destructor for tree structure", "body": "<p>This is invalid and yields Undefined Behavior if it compiles:</p>\n\n<pre><code>vector&lt;node&gt; children;\n</code></pre>\n\n<p>At the point of this data member declaration the class <code>node</code> is <em>incomplete</em>; its size isn't yet known. </p>\n\n<p>You can't use an incomplete type as item type for a standard library container (but you can use pointers).</p>\n\n<hr>\n\n<p>In the destructor implementation, also</p>\n\n<pre><code>delete this;\n</code></pre>\n\n<p>yields Undefined Behavior, an infinite recursion calling the destructor which (in this <code>delete</code> expression) calls itself, and so on.</p>\n\n<hr>\n\n<p>The data member declaration </p>\n\n<pre><code>string&amp; name;\n</code></pre>\n\n<p>also has a strong, unpleasant odour about it, but since you're not showing the constructor implementations I can't state categorically 100% that it's wrong.</p>\n\n<p>However, given the rest of the code, the chance of this being correct is infinitesimal. Just use</p>\n\n<pre><code>string name_;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18808, "user_id": 924727, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bd2dcbbfd05a7c49cd74c7cb93e26488?s=128&d=identicon&r=PG", "display_name": "Emilio Garavaglia", "link": "https://stackoverflow.com/users/924727/emilio-garavaglia"}, "is_accepted": false, "score": 3, "last_activity_date": 1462514935, "last_edit_date": 1462514935, "creation_date": 1462390486, "answer_id": 37036499, "question_id": 37036293, "link": "https://stackoverflow.com/questions/37036293/c-destructor-for-tree-structure/37036499#37036499", "title": "C++ destructor for tree structure", "body": "<blockquote>\n  <p>\"(I know that ~node() is run on all objects anyway at the end of the main  funciton, but I want to make sure it is executed on the root r first)\"</p>\n</blockquote>\n\n<p>This quote is enough to say that everything into this question is based only on misconceptions.</p>\n\n<p>It doesn't even make sense to try to correct: a full rewrite is necessary.</p>\n\n<p>Instead read more about destrcuctors, their invocation and what they are for.</p>\n\n<p>Calling it explicitly does not suppress the implicit call of it. And double destruction is undefined behavior.</p>\n\n<p>Also <code>delete this</code> is something very tricky requiring you must be VERY SURE of what it means. </p>\n\n<p>And accessing class methods (<code>this-&gt;...</code>) or data after deleting them ... is only looking for troubles.</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1462391269, "creation_date": 1462391269, "answer_id": 37036733, "question_id": 37036293, "link": "https://stackoverflow.com/questions/37036293/c-destructor-for-tree-structure/37036733#37036733", "title": "C++ destructor for tree structure", "body": "<p>Ordinarily, a tree uses nodes that are allocated on the free store. That means trafficking in pointers to nodes, and deleting nodes that are no longer in use. The code in the question doesn't follow that model: it allocates the root node on the stack, and stores node objects rather than pointers within each node. With that code, all of the compiler-generated destructors will work just fine. There is no need for any user-defined destructors.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6230365"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 717, "favorite_count": 2, "answer_count": 3, "score": 0, "last_activity_date": 1462514935, "creation_date": 1462389713, "last_edit_date": 1462390080, "question_id": 37036293, "link": "https://stackoverflow.com/questions/37036293/c-destructor-for-tree-structure", "title": "C++ destructor for tree structure", "body": "<p>I have this tree structure: </p>\n\n<pre><code>public:\n    node(string&amp; const n);\n    virtual ~node();\n    string get_name() const;\n    void set_name(string&amp; new_name);\n    int get_nr_children() const;\n    node get_child(int i) const;\n    void add_child(node child);\nprivate:\n    string&amp; name;\n    vector&lt;node&gt; children;\n};\n</code></pre>\n\n<p>and my main.cpp looks like this:</p>\n\n<pre><code>int main() {\n    string s = \"root\";\n    node r(s);\n    string s2 = \"left child\";\n    node ls(s2);\n    string s3 = \"right child\";\n    node rs(s3);\n\n    r.add_child(ls);\n    r.add_child(rs);\n\n    r.~node();\n}\n</code></pre>\n\n<p>(I know that <code>~node()</code> is run on all objects anyway at the end of the <code>main</code> funciton, but I want to make sure it is executed on the root <code>r</code> first)</p>\n\n<p>All methods are working fine so far, except for the destructor. This is my first destructor, and I came up with the following recursive try, but don't know why it won't work.</p>\n\n<pre><code>node::~node() {\n    cout &lt;&lt; \"Enter ~node of \" &lt;&lt; this-&gt;get_name() &lt;&lt; endl;\n    while (this-&gt;get_nr_children() != 0) {\n        this-&gt;get_child(0).~node();\n        this-&gt;children.pop_back();\n    }\n    delete this;\n    cout &lt;&lt; \"Leave ~node of \" &lt;&lt; this-&gt;get_name() &lt;&lt; endl;\n}\n</code></pre>\n\n<p>The result is an endless output of \"Enter ~node of left child\"</p>\n"}, {"tags": ["c++", "loops", "initialization"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1462389539, "post_id": 37036180, "comment_id": 61622727, "body": "outside of a decleration statement or a function parameter list a comma is the <a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">comma operator</a>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1462389540, "post_id": 37036180, "comment_id": 61622728, "body": "Outside of variable declarations, the <a href=\"http://en.cppreference.com/w/cpp/language/operator_other\" rel=\"nofollow noreferrer\">comma operator</a> is used to evaluate a series of expressions and then return the result of the last expression."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1462389552, "post_id": 37036180, "comment_id": 61622730, "body": "It doesn&#39;t actually work like or, it&#39;s a different operator."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1462389565, "post_id": 37036180, "comment_id": 61622741, "body": "Nope, I just tested it, it does not behave as you say. Comma inside of <code>for</code> condition works in a same way as in any other expression. <code>(a, b) == b</code>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1462389794, "post_id": 37036180, "comment_id": 61622844, "body": "That thing is just horrible anyway:("}, {"owner": {"reputation": 612, "user_id": 4855672, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/cf2834daa0787f8ab428a3881dd2e69d?s=128&d=identicon&r=PG&f=1", "display_name": "Sofi Ullah Saikat", "link": "https://stackoverflow.com/users/4855672/sofi-ullah-saikat"}, "edited": false, "score": 0, "creation_date": 1462391689, "post_id": 37036180, "comment_id": 61623861, "body": "When you have to declare and initialize variabes they must have to same type because for different types declaration needs more ; in intialization part that is not accepted"}, {"owner": {"reputation": 612, "user_id": 4855672, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/cf2834daa0787f8ab428a3881dd2e69d?s=128&d=identicon&r=PG&f=1", "display_name": "Sofi Ullah Saikat", "link": "https://stackoverflow.com/users/4855672/sofi-ullah-saikat"}, "edited": false, "score": 0, "creation_date": 1462392469, "post_id": 37036180, "comment_id": 61624270, "body": "you only can initialise different variables of different types but do not declare and initialise  different types of  variables in initialization part of for loop  because it occupies more (;) in for loops that is avoided."}], "answers": [{"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1462389653, "post_id": 37036237, "comment_id": 61622777, "body": "Exactly.  If the comma was operating like OR, it would return true if the first condition was true - it doesn&#39;t, it just returns the value of the second condition."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 12, "last_activity_date": 1462389543, "creation_date": 1462389543, "answer_id": 37036237, "question_id": 37036180, "link": "https://stackoverflow.com/questions/37036180/how-comma-works-in-a-for-loop-between-two-expressions-in-conditional-part/37036237#37036237", "title": "How comma (,) works in a for loop between two expressions in conditional part", "body": "<p>Because...that's not really how things work at all.</p>\n\n<p>The comma operator evaluates and discards its left operand (so in most cases its left operand will have side effects). After the left operand is evaluated (and any side effects from it have happened), the right operand is evaluate. The value yielded from this is the value of the right operand.</p>\n"}, {"tags": [], "owner": {"reputation": 1204, "user_id": 6175422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3b916a1e5d6c8c14fd7fba892f87ad?s=128&d=identicon&r=PG", "display_name": "Vadim Key", "link": "https://stackoverflow.com/users/6175422/vadim-key"}, "is_accepted": false, "score": 8, "last_activity_date": 1462389598, "creation_date": 1462389598, "answer_id": 37036254, "question_id": 37036180, "link": "https://stackoverflow.com/questions/37036180/how-comma-works-in-a-for-loop-between-two-expressions-in-conditional-part/37036254#37036254", "title": "How comma (,) works in a for loop between two expressions in conditional part", "body": "<p>Actually it's not or, the behavior of comma operator can be described as:</p>\n\n<blockquote>\n  <p>In the C and C++ programming languages, the comma operator\n  (represented by the token ,) is a binary operator that evaluates its\n  first operand and discards the result, and then evaluates the second\n  operand and returns this value (and type).</p>\n</blockquote>\n\n<p>From wiki: <a href=\"https://en.wikipedia.org/wiki/Comma_operator\">https://en.wikipedia.org/wiki/Comma_operator</a></p>\n\n<p>So only the result of <code>k&lt;10</code> taken into the account.</p>\n"}], "owner": {"reputation": 612, "user_id": 4855672, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/cf2834daa0787f8ab428a3881dd2e69d?s=128&d=identicon&r=PG&f=1", "display_name": "Sofi Ullah Saikat", "link": "https://stackoverflow.com/users/4855672/sofi-ullah-saikat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1462390329, "creation_date": 1462389333, "last_edit_date": 1462390329, "question_id": 37036180, "link": "https://stackoverflow.com/questions/37036180/how-comma-works-in-a-for-loop-between-two-expressions-in-conditional-part", "title": "How comma (,) works in a for loop between two expressions in conditional part", "body": "<p>In the for loop at initialization part  you can declare and initialize many variables  as you like but ofcourse they have to be same type.In conditional part you can apply any expressional statements like AND(&amp;&amp;),OR(||),>,&lt;,== etc.\nbut(,) is not a expression .How it works here\njust a=1,2,3,4,5,6 and b=1,2,3,4,5,6,7,8,9,10\nand a&lt;6,b&lt;9 returns a=1,2,3,4,5,6,7,8,9=b</p>\n\n<pre><code>for(int a=1,b=1,c=2,d=5;a&lt;4,b&lt;10;a++,b++)//initialize variables and using , between expression\n{\n    cout&lt;&lt;a&lt;&lt;\" \"&lt;&lt;b&lt;&lt;endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "performance", "opencv"], "comments": [{"owner": {"reputation": 453, "user_id": 5128148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9952b45bc2ee14566935d8d86eb02b?s=128&d=identicon&r=PG&f=1", "display_name": "LBerger", "link": "https://stackoverflow.com/users/5128148/lberger"}, "edited": false, "score": 0, "creation_date": 1462389931, "post_id": 37036106, "comment_id": 61622915, "body": "I think you are testing rand() and not Mat access. You should add example &lt;br&gt;       uchar* inter = test.ptr&lt;uchar&gt;(i);        for (int j = 0; j &lt; 1000; j++,inter++){         *inter = i;"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1462390083, "post_id": 37036106, "comment_id": 61622981, "body": ".at has boundary checks only in debug mode. release mode is quite fast."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1462390187, "post_id": 37036106, "comment_id": 61623037, "body": "the last one is faster because there is a difference whether you have to compute 1 or 2 sums for each address-computation. test.ptr basixally computes &quot;address + i * widthstep&quot; and inter[j] computes &quot;inter + j * pixelsize&quot;"}, {"owner": {"reputation": 2135, "user_id": 3667089, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/591d11239b028c677149047326aa9209?s=128&d=identicon&r=PG&f=1", "display_name": "user3667089", "link": "https://stackoverflow.com/users/3667089/user3667089"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1462392442, "post_id": 37036106, "comment_id": 61624254, "body": "@Micka If that&#39;s the reason I am so surprised that the compiler cannot optimize it out... Time to change all my code. If you write an answer I will accept it"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1462392734, "post_id": 37036106, "comment_id": 61624421, "body": "I&#39;ll wait, maybe someone can confirm it or has a better reason :D"}], "owner": {"reputation": 2135, "user_id": 3667089, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/591d11239b028c677149047326aa9209?s=128&d=identicon&r=PG&f=1", "display_name": "user3667089", "link": "https://stackoverflow.com/users/3667089/user3667089"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1462389136, "creation_date": 1462389136, "question_id": 37036106, "link": "https://stackoverflow.com/questions/37036106/opencv-mat-element-access-speed-difference", "title": "OpenCV mat element access speed difference", "body": "<p>I am trying to benchmark the performance of different ways to access OpenCV mat element. I am on Ubuntu 14.04 with gcc 4.9.3 and -O3 flag with the latest OpenCV in the trunk.</p>\n\n<p>The first one is using at.</p>\n\n<pre><code>cv::Mat test = cv::Mat(1000, 1000, CV_8UC1);\n\nfor (int n = 0; n &lt; 1000; n++)\n    for (int i = 0; i &lt; 1000; i++){\n      for (int j = 0; j &lt; 1000; j++){\n        test.at&lt;uchar&gt;(i,j) = rand();\n      }\n    }\n</code></pre>\n\n<p>The second one is using ptr.</p>\n\n<pre><code>cv::Mat test = cv::Mat(1000, 1000, CV_8UC1);\n\nfor (int n = 0; n &lt; 1000; n++)\n    for (int i = 0; i &lt; 1000; i++){\n      for (int j = 0; j &lt; 1000; j++){\n        a.ptr&lt;uchar&gt;(i)[j] = rand();\n      }\n    }\n</code></pre>\n\n<p>The third one is using ptr with a intermediate variable.</p>\n\n<pre><code>cv::Mat test = cv::Mat(1000, 1000, CV_8UC1);\n\nfor (int n = 0; n &lt; 1000; n++)\n    for (int i = 0; i &lt; 1000; i++){\n\n      uchar* inter = test.ptr&lt;uchar&gt;(i);\n\n      for (int j = 0; j &lt; 1000; j++){\n        inter[j] = rand();\n      }\n    }\n</code></pre>\n\n<p>The first and second one both gives me 5000ms on average in 10 tries, and the third one gives me 4800ms on average in 10 tries.</p>\n\n<p>Why is the first one performing the same as second one? Shouldn't the first one be slower because of the extra boundary checks by at?</p>\n\n<p>Why is the third one performing 4% faster than the second one? Shouldn't the performance be identical?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3, "user_id": 5568395, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154296011346258/picture?type=large", "display_name": "Michael Wille", "link": "https://stackoverflow.com/users/5568395/michael-wille"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462388990, "post_id": 37035993, "comment_id": 61622410, "body": "So I know part of the issue is within my ten_ninety array but everything I&#39;ve tried hasn&#39;t fixed the issue."}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 0, "creation_date": 1462389139, "post_id": 37035993, "comment_id": 61622492, "body": "When amount is 100, then <code>tens</code> will be 10, your <code>ten_ninety</code> array size is 10 and you are accessing one element past your array when you say <code>ten_ninety[tens]</code> since the range is 0 to arraysize-1 which would be 9."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1462389230, "post_id": 37035993, "comment_id": 61622540, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1462389515, "post_id": 37035993, "comment_id": 61622715, "body": "1) doubles are not exact. 2) why would you code something like this by hand when the standard library contains pre-made functions to convert between strings and integer/floating point and vice versa...?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5568395, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154296011346258/picture?type=large", "display_name": "Michael Wille", "link": "https://stackoverflow.com/users/5568395/michael-wille"}, "edited": false, "score": 0, "creation_date": 1462393705, "post_id": 37036194, "comment_id": 61624970, "body": "Would you recommend I create int hundreds or is there another approach to this that I&#39;m overlooking?  (I&#39;m not asking for answers, just looking to be steered in the right direction)"}, {"owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "reply_to_user": {"reputation": 3, "user_id": 5568395, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154296011346258/picture?type=large", "display_name": "Michael Wille", "link": "https://stackoverflow.com/users/5568395/michael-wille"}, "edited": false, "score": 0, "creation_date": 1462394824, "post_id": 37036194, "comment_id": 61625509, "body": "@MichaelWille I would start with the one&#39;s digit (amount % 10) and work up the value from there."}], "tags": [], "owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "is_accepted": true, "score": 2, "last_activity_date": 1462389370, "creation_date": 1462389370, "answer_id": 37036194, "question_id": 37035993, "link": "https://stackoverflow.com/questions/37035993/issue-with-converting-numerical-values-to-string-elements/37036194#37036194", "title": "Issue with converting numerical values to string elements", "body": "<pre><code>  else\n    {\n        int tens = _amount1 / 10;\n        int ones = _amount1 - (tens * 10);\n        str_one = ten_ninety[tens] + upto20[ones];\n    }\n</code></pre>\n\n<p>if amount = 100, then tens will equal 10, which you use as reference into an array of 10 elements, which steps outside the bounds of the array. You code might work &lt; 100, but once it hits a hundred it won't function anymore. </p>\n"}], "owner": {"reputation": 3, "user_id": 5568395, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154296011346258/picture?type=large", "display_name": "Michael Wille", "link": "https://stackoverflow.com/users/5568395/michael-wille"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 37036194, "answer_count": 1, "score": -2, "last_activity_date": 1462389370, "creation_date": 1462388756, "question_id": 37035993, "link": "https://stackoverflow.com/questions/37035993/issue-with-converting-numerical-values-to-string-elements", "title": "Issue with converting numerical values to string elements", "body": "<p>So as the title implies I am having an issue with my algorithm used to convert numerical values to strings.  I can get up to a certain amount but then the program crashes once I hit 100 dollars.  I'm also off by a couple cents on some values so I'm wondering what I could do to change that as well. </p>\n\n<p>Here is my header file</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n#include &lt;string.h&gt;\nusing namespace std;\n\nclass TextVersionOfNumber\n{\nprivate:\n    double amount;\npublic:\n    string getTextVersionOfNumber();\n    void setAmount(double);\n};\n</code></pre>\n\n<p>Here is my .cpp file (this is where the algorithm is)</p>\n\n<pre><code>#include \"TextVersionOfNumber.h\"\n\n\nstring TextVersionOfNumber::getTextVersionOfNumber()\n{\n    string upto20[20] = { \"\", \"one\", \"two\", \"three\", \"four\",\n        \"five\", \"six\", \"seven\", \"eight\", \"nine\", \"ten\",\n        \"eleven\", \"twelve\",\n        \"thirteen\", \"fourteen\", \"fifteen\", \"sixteen\", \"seventeen\",\n        \"eighteen\", \"nineteen\" };\n\n    string ten_ninety[10] = { \"\", \"\", \"twenty\", \"thirty\", \"forty\",\n        \"fifty\", \"sixty\", \"seventy\", \"eighty\", \"ninety\" };\n\n    double _amount1 = (int)amount;\n    double _amount2 = (amount - _amount1) * 100;\n\n    string str_one = \"\";\n\n    if (_amount1 &lt;= 19)\n    {\n        str_one = upto20[(int)_amount1];\n    }\n    else\n    {\n        int tens = _amount1 / 10;\n        int ones = _amount1 - (tens * 10);\n        str_one = ten_ninety[tens] + upto20[ones];\n    }\n\n    string str_two = \"\";\n\n    if (_amount2 &lt;= 19)\n    {\n        str_two = upto20[(int)_amount2];\n    }\n    else\n    {\n        int tens = _amount2 / 10;\n        int ones = _amount2 - (tens * 10);\n        str_two = ten_ninety[tens] + upto20[ones];\n    }\n\n    string ret_val = \"$ \" +str_one + \" and \" + str_two + \" cents\";\n    system(\"pause\");\n    return ret_val;\n};\n\n\n\nvoid TextVersionOfNumber::setAmount(double _amount)\n{\n    amount = _amount;\n};\n</code></pre>\n\n<p>And here is the tester file (this was provided by my teacher)</p>\n\n<pre><code>//  Chapter 12--  Assignment 14:  Check Writer\n// This program can convert a dollar and cents amount given in \n// numerical form to a word description of the amount.\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n#include &lt;string.h&gt;\nusing namespace std;\n\n#include \"TextVersionOfNumber.h\"\n// Assume a maximum amount of $10,000\n\nint main()\n{\n    string date = \"03/05/2016\", payee = \"Michael Wille\";\n    TextVersionOfNumber checkAmount;\n    double testAmounts[] = { 0, .01, .25, 12, 12.45, 19, 19.02,\n        19.45, 20, 20.45,\n        34, 56.78, 100, 109, 119.78,\n        450, 678.90, 1000, 1009.45, 1056,\n        1234, 1567.98, 9999, 9999.99 };\n\n    for (int i = 0; i &lt; sizeof(testAmounts) / sizeof(double); i++)\n    {\n        double an_amount = testAmounts[i];\n        checkAmount.setAmount(an_amount);\n        cout &lt;&lt; setprecision(2) &lt;&lt; fixed;\n        cout &lt;&lt; setw(60) &lt;&lt; right;\n        cout &lt;&lt; \"Date: \" &lt;&lt; date &lt;&lt; endl;\n        cout &lt;&lt; \"Pay to the order of:  \" &lt;&lt; payee &lt;&lt; \"\\t\\t\\t\";\n        cout &lt;&lt; \"$\" &lt;&lt; an_amount &lt;&lt; endl;\n        cout &lt;&lt; checkAmount.getTextVersionOfNumber() &lt;&lt; endl;\n        cout &lt;&lt; \"---------------------------------------------------------------------\\n\";\n    }\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows-10", "event-log", "event-viewer"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1462389357, "post_id": 37035958, "comment_id": 61622611, "body": "As soon as you see the &#39;System&#39; namespace, you&#39;ve wandered in to managed-land and can stop looking for unmanaged code examples."}, {"owner": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1462389501, "post_id": 37035958, "comment_id": 61622707, "body": "Thanks, I didn&#39;t know that - I really found that weird"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1462391661, "post_id": 37035958, "comment_id": 61623838, "body": "Try reading the documentation."}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 1, "creation_date": 1462392028, "post_id": 37035958, "comment_id": 61624032, "body": "Really, this isn&#39;t off topic.  It&#39;s BROAD, but it&#39;s asking for help with a specific component of windows."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 0, "creation_date": 1462392823, "post_id": 37035958, "comment_id": 61624471, "body": "@Donnie it&#39;s still a rather bad question though. No minimal testable code. No indication of what the asker has already tried, etc.. Smells like someone who just wants to be spoon-fed a solution."}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 3, "creation_date": 1462394164, "post_id": 37035958, "comment_id": 61625181, "body": "It&#39;s true, but to be fair, the event logging document on msdn for C++ is pretty darn obtuse.  I was pretty intimidated by it the first few times through too."}, {"owner": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "edited": false, "score": 1, "creation_date": 1462395953, "post_id": 37035958, "comment_id": 61626100, "body": "What you mean? I posted the functions I was looking for, I said I didn&#39;t understand the parameters. Posted the pages I&#39;ve read. My question is pretty clear and direct, about a subject that is not very well documented on the API  - lots of parameters, that could be swapped by NULL or zero, but I didn&#39;t know..."}, {"owner": {"reputation": 734, "user_id": 2118693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVRBY.jpg?s=128&g=1", "display_name": "jmgonet", "link": "https://stackoverflow.com/users/2118693/jmgonet"}, "edited": false, "score": 3, "creation_date": 1546538591, "post_id": 37035958, "comment_id": 94891345, "body": "I&#39;ve tried to log events in windows myself, and I can say it is perfectly understandable why there is no minimal testable code: after several days, I&#39;m clueless. This question is spot on, and got dismissed; I&#39;m frustrated."}, {"owner": {"reputation": 1131, "user_id": 444620, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/596b6b0c3c142c3cd7666ef9f4e60af9?s=128&d=identicon&r=PG", "display_name": "Paulus", "link": "https://stackoverflow.com/users/444620/paulus"}, "edited": false, "score": 1, "creation_date": 1602773971, "post_id": 37035958, "comment_id": 113832239, "body": "I agree, this question is very pertinent, I am looking for an answer myself, and Microsoft&#39;s documentation on this is abysmal, with no overview or coherent examples"}], "answers": [{"comments": [{"owner": {"reputation": 1390, "user_id": 4001920, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/JNPlB.jpg?s=128&g=1", "display_name": "Alexander Tumanin", "link": "https://stackoverflow.com/users/4001920/alexander-tumanin"}, "edited": false, "score": 1, "creation_date": 1495113713, "post_id": 37036187, "comment_id": 75123155, "body": "In my case I needed to write <code>LPCWSTR custom_log_name = L&quot;MyLogName&quot;;</code> and <code>LPCWSTR message = L&quot;I&#39;m in an event log&quot;;</code> instead of <code>const char*</code>"}, {"owner": {"reputation": 1131, "user_id": 444620, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/596b6b0c3c142c3cd7666ef9f4e60af9?s=128&d=identicon&r=PG", "display_name": "Paulus", "link": "https://stackoverflow.com/users/444620/paulus"}, "edited": false, "score": 1, "creation_date": 1602774109, "post_id": 37036187, "comment_id": 113832320, "body": "Thanks for this, it does work, but writes to Windows Logs/Application. Any idea how to write to &#39;Application and Services Logs/MyCompany/MyApplication/Operation&#39; ?"}], "tags": [], "owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "is_accepted": true, "score": 12, "last_activity_date": 1462389357, "creation_date": 1462389357, "answer_id": 37036187, "question_id": 37035958, "link": "https://stackoverflow.com/questions/37035958/log-to-event-viewer-on-windows-with-c/37036187#37036187", "title": "Log to event viewer on Windows with C++", "body": "<p>Your link doesn't compile because that's managed C++ (note the use of <code>gcnew</code>)</p>\n\n<p>If all you want to write are strings it's easy, all you need is <code>RegisterEventSource</code> and <code>ReportEvent</code>.</p>\n\n<p>It's approximately this:</p>\n\n<pre><code>const char* custom_log_name = \"MyLogName\";\n\n// create registry keys for ACLing described on MSDN: http://msdn2.microsoft.com/en-us/library/aa363648.aspx\n\nHANDLE event_log = RegisterEventSource(NULL, custom_log_name);\nconst char* message = \"I'm in an event log\";\nReportEvent(event_log, EVENTLOG_SUCCESS, 0, 0, NULL, 1, 0, &amp;message, NULL);\n</code></pre>\n\n<p>This only allows for logging strings.  Much more complex (and useful) logging is possible, but it's fairly involved in straight C++.  If you can write managed code for your logging component it becomes easier to deal with.</p>\n"}], "owner": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9514, "favorite_count": 1, "closed_date": 1462390261, "accepted_answer_id": 37036187, "answer_count": 1, "score": 7, "last_activity_date": 1462389357, "creation_date": 1462388667, "question_id": 37035958, "link": "https://stackoverflow.com/questions/37035958/log-to-event-viewer-on-windows-with-c", "closed_reason": "Not suitable for this site", "title": "Log to event viewer on Windows with C++", "body": "<p>I want to use log on my C++ application. However, I'd like to use Windows (10) event viewer, instead of text files. I found out some weird calls, that I don't even know what the parameters mean - <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363679(v=vs.85).aspx\" rel=\"noreferrer\">ReportEvent</a>, <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363672(v=vs.85).aspx\" rel=\"noreferrer\">OpenEventLog</a> and some other <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363654(v=vs.85).aspx\" rel=\"noreferrer\">Event Logging functions</a>. I also can't use managed code, due to some limitations on my app.</p>\n\n<p>I've also tried to use the code on this <a href=\"https://msdn.microsoft.com/en-us/library/2awhba7a.aspx?cs-save-lang=1&amp;cs-lang=cpp#code-snippet-2\" rel=\"noreferrer\">link</a>, but I get compilation errors (namespace 'System' undefined - it seems some include files are missing...).</p>\n\n<p>I found no sample code that works yet.</p>\n\n<p>I would appreciate a sample code, if possible - just a simple logging from a local application, built in non managed C++. Can someone help?</p>\n"}, {"tags": ["c++", "r", "rounding", "precision", "rcpp"], "comments": [{"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "edited": false, "score": 1, "creation_date": 1462389591, "post_id": 37035918, "comment_id": 61622752, "body": "I&#39;m actually getting 0 for all of the calls to <code>statZn_cpp</code> listed above. What are you using for an operating system, compiler, and compiler version?"}, {"owner": {"reputation": 21821, "user_id": 3987294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4751b219bec937f1c58a18de85dcd06?s=128&d=identicon&r=PG&f=1", "display_name": "nicola", "link": "https://stackoverflow.com/users/3987294/nicola"}, "edited": false, "score": 1, "creation_date": 1462390621, "post_id": 37035918, "comment_id": 61623243, "body": "I also get always 0. Can you explain in words what the function should do?"}, {"owner": {"reputation": 329, "user_id": 4626953, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10203708442654455/picture?type=large", "display_name": "cgmil", "link": "https://stackoverflow.com/users/4626953/cgmil"}, "edited": false, "score": 0, "creation_date": 1462390898, "post_id": 37035918, "comment_id": 61623408, "body": "I am currently using a Linux distro, Lubuntu (another flavor of Ubuntu). My version of R is 3.2.4, and my version of Rcpp is 0.12.3. I presume that Rcpp uses my system compiler, which is g++ v. 5.2.1., though I don&#39;t know this for a fact (I never changed it, though)."}, {"owner": {"reputation": 329, "user_id": 4626953, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10203708442654455/picture?type=large", "display_name": "cgmil", "link": "https://stackoverflow.com/users/4626953/cgmil"}, "edited": false, "score": 0, "creation_date": 1462391074, "post_id": 37035918, "comment_id": 61623505, "body": "There is a test statistic that I am researching and this function is supposed to compute it. It&#39;s hard for me to describe in words what this statistic is, but I can provide some R code that is equivalent.  statZn &lt;- function(dat, kn = function(n) {floor(sqrt(n))}) { n = length(dat);    return(sqrt(kn(n))*max(sapply(       floor(kn(n)):(n - floor(kn(n))), function(k)         abs(1/k*sum(dat[1:k]) -               1/(n-k)*sum(dat[(k+1):n]))/sqrt((sum((dat[1:k] -                mean(dat[1:k]))^2)+sum((dat[(k+1):n] -                mean(dat[(k+1):n]))^2))/n)))); }"}, {"owner": {"reputation": 329, "user_id": 4626953, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10203708442654455/picture?type=large", "display_name": "cgmil", "link": "https://stackoverflow.com/users/4626953/cgmil"}, "edited": false, "score": 0, "creation_date": 1462391595, "post_id": 37035918, "comment_id": 61623803, "body": "I have added more equivalent code to the main post to help understand the problem. All the additional code obtains the correct answer."}, {"owner": {"reputation": 21821, "user_id": 3987294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4751b219bec937f1c58a18de85dcd06?s=128&d=identicon&r=PG&f=1", "display_name": "nicola", "link": "https://stackoverflow.com/users/3987294/nicola"}, "edited": false, "score": 0, "creation_date": 1462391713, "post_id": 37035918, "comment_id": 61623875, "body": "That function is  very hard to read. All I can say is that I&#39;m pretty sure that is not a rounding problem and you very likely have a bug in the C++ code. Without fully understanding what&#39;s going on, it&#39;s hard for me to tell where the bug is."}, {"owner": {"reputation": 329, "user_id": 4626953, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10203708442654455/picture?type=large", "display_name": "cgmil", "link": "https://stackoverflow.com/users/4626953/cgmil"}, "edited": false, "score": 0, "creation_date": 1462392121, "post_id": 37035918, "comment_id": 61624088, "body": "Let&#39;s try this: The function computes a test statistic for change point analysis. First, compute for each k between kn and n - kn the distance (an absolute value) of the means of the two sides of the dataset when split at k. Divide by a modified formula for the standard deviation (called in the code sdk). Next, take the maximum of this. Finally, multiply by the square root of kn. I will add that I am sure this is a rounding problem because I have added R code that is basically R&#39;s equivalent of the C++ code, and it works fine."}, {"owner": {"reputation": 21821, "user_id": 3987294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4751b219bec937f1c58a18de85dcd06?s=128&d=identicon&r=PG&f=1", "display_name": "nicola", "link": "https://stackoverflow.com/users/3987294/nicola"}, "edited": false, "score": 0, "creation_date": 1462392458, "post_id": 37035918, "comment_id": 61624267, "body": "A rounding problem doesn&#39;t change a 6 into a 0. Your C++ function always returns 0. You seem to know what the function should do and so you are in the best position to spot the bug. Review carefully your code and you&#39;ll solve the issue."}, {"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "edited": false, "score": 0, "creation_date": 1462393989, "post_id": 37035918, "comment_id": 61625099, "body": "Try adding a debugging step to your loop to monitor the values, <a href=\"https://gist.github.com/nathan-russell/594151d880e663d41cbb303e717375b4#file-debug-values-cpp\" rel=\"nofollow noreferrer\">for example</a>. Also, you should always initialize your variables (in C/C++) before first use, e.g. <code>long double s_upper = 0.0, s_square_upper = 0.0;</code>, etc. By doing that I was able to get <code>statZn_cpp(1:20,4)</code>, <code>statZn_cpp(1:20 * 10,4)</code>, and <code>statZn_cpp3(1:20 &#47; 10,4)</code> (but not the other two examples) to return 6.963106. You might be able to figure out what&#39;s happening by using the <code>printf</code> code linked."}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 4626953, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10203708442654455/picture?type=large", "display_name": "cgmil", "link": "https://stackoverflow.com/users/4626953/cgmil"}, "edited": false, "score": 1, "creation_date": 1462398926, "post_id": 37037546, "comment_id": 61627476, "body": "It works! Thank you very much! Aside from the failure to initialize some variables (I did earlier, but this must have been lost when translating from R to C++), it was probably the lack of namespaces that was the problem. I guess that whatever it is that Rcpp uses by default for those functions should not be trusted."}, {"owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "edited": false, "score": 0, "creation_date": 1462410191, "post_id": 37037546, "comment_id": 61630887, "body": "@bgoldst you may want to emphasize that <code>abs()</code> handles integers and <code>fabs()</code> handles doubles. However, <code>std::abs()</code> is overloaded and can handle both."}, {"owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "reply_to_user": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "edited": false, "score": 0, "creation_date": 1462414072, "post_id": 37037546, "comment_id": 61631728, "body": "@Coatless Thanks for your comment. Honestly, I&#39;m not sure exactly what the situation is with respect to the call resolution here. It depends on what names Rcpp exposes and in which namespaces; for example, whether it includes <code>math.h</code>/<code>cmath</code>/neither, <code>stdlib.h</code>/<code>cstdlib</code>/neither, possibly which C++ version and compiler is being used, whether Rcpp defines its own wrapper/shim, implicit declarations, etc. This is why I love qualifying function calls with their namespaces; you often don&#39;t have to worry about these intricate details. But you&#39;re probably right in this case."}], "tags": [], "owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "is_accepted": true, "score": 8, "last_activity_date": 1462394213, "creation_date": 1462394213, "answer_id": 37037546, "question_id": 37035918, "link": "https://stackoverflow.com/questions/37035918/problems-with-rcpp-precision/37037546#37037546", "title": "Problems with Rcpp precision", "body": "<p><strong>1:</strong> You should not be using <code>long double</code>, since R represents all numeric values in the <code>double</code> type. Using a more precise type for intermediate calculations is extremely unlikely to provide any benefit, and is more likely to result in strange inconsistencies between platforms.</p>\n\n<p><strong>2:</strong> You're not initializing <code>s_upper</code>, <code>s_square_upper</code>, <code>s_lower</code>, and <code>s_square_lower</code>. (You actually are initializing them in the R implementation, but you forgot in the C++ implementation.)</p>\n\n<p><strong>3:</strong> Minor point, but I would replace the <code>pow(x,2.0)</code> calls with <code>x*x</code>. Although this doesn't really matter.</p>\n\n<p><strong>4:</strong> This is what fixed it for me: You need to qualify calls to C++ standard library functions with their containing namespace. IOW, <code>std::sqrt()</code> instead of just <code>sqrt()</code>, <code>std::abs()</code> instead of just <code>abs()</code>, and <code>std::pow()</code> instead of just <code>pow()</code> if you continue to use it.</p>\n\n<hr>\n\n<pre><code>cppFunction('double statZn_cpp(NumericVector dat, double kn) {\n  int n = dat.size();\n  double s_upper = 0, s_square_upper = 0; // Get total sum and sum of squares; this will be the \"upper sum\" (i.e. the sum above k)\n  double s_lower = 0, s_square_lower = 0; // The \"lower sums\" (i.e. those below k)\n  for (int i = 0; i &lt; kn - 1; ++i) { s_lower += dat[i]; s_square_lower += dat[i] * dat[i]; } // Get lower sums; Go to kn - 1 to prevent double-counting in main\n  for (int i = kn - 1; i &lt; n; ++i) { s_upper += dat[i]; s_square_upper += dat[i] * dat[i]; } // Get upper sum\n  double M = 0; // The maximum, which will be returned\n  double M_candidate; // A candidate for the new maximum, used in a loop\n  // Compute the test statistic\n  for (int k = kn; k &lt;= (n - kn); ++k) {\n    // Update s and s_square for both lower and upper\n    s_lower += dat[k-1];\n    s_square_lower += dat[k-1] * dat[k-1];\n    s_upper -= dat[k-1];\n    s_square_upper -= dat[k-1] * dat[k-1];\n    // Get estimate of sd for this k\n    double sdk = std::sqrt((s_square_lower - s_lower*s_lower / k + s_square_upper - s_upper*s_upper / (n - k))/n);\n    M_candidate = std::abs(s_lower / k - s_upper / (n - k)) / sdk;\n    if (M_candidate &gt; M) M = M_candidate; // Choose new maximum\n  }\n  return std::sqrt(kn) * M;\n}');\n\nstatZn_cpp(1:20,4); ## you will get 6.963106, which is the correct answer\n## [1] 6.963106\nstatZn_cpp(1:20*10,4); ## Scaling should not matter; will also yield the correct answer of 6.963106\n## [1] 6.963106\nstatZn_cpp(1:20/10,4); ## yields the wrong answer of 6.575959\n## [1] 6.963106\nstatZn_cpp(1:20/100,4); ## again gives you the obviously wrong answer of 0.\n## [1] 6.963106\nset.seed(1L); statZn_cpp(rnorm(20),4); ## More to the point (and relevant to my research, which involves simulation studies), the answer is almost always 0, which is wrong.\n## [1] 1.270117\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 4626953, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10203708442654455/picture?type=large", "display_name": "cgmil", "link": "https://stackoverflow.com/users/4626953/cgmil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 1, "accepted_answer_id": 37037546, "answer_count": 1, "score": 1, "last_activity_date": 1462394213, "creation_date": 1462388577, "last_edit_date": 1462391546, "question_id": 37035918, "link": "https://stackoverflow.com/questions/37035918/problems-with-rcpp-precision", "title": "Problems with Rcpp precision", "body": "<p>Consider the following C++ function in R using Rcpp:</p>\n\n<pre><code>cppFunction('long double statZn_cpp(NumericVector dat, double kn) {\n  double n = dat.size();\n  // Get total sum and sum of squares; this will be the \"upper sum\"\n  // (i.e. the sum above k)\n  long double s_upper, s_square_upper;\n  // The \"lower sums\" (i.e. those below k)\n  long double s_lower, s_square_lower;\n  // Get lower sums\n  // Go to kn - 1 to prevent double-counting in main\n  // loop\n  for (int i = 0; i &lt; kn - 1; ++i) {\n    s_lower += dat[i];\n    s_square_lower += dat[i] * dat[i];\n  }\n  // Get upper sum\n  for (int i = kn - 1; i &lt; n; ++i) {\n    s_upper += dat[i];\n    s_square_upper += dat[i] * dat[i];\n  }\n  // The maximum, which will be returned\n  long double M = 0;\n  // A candidate for the new maximum, used in a loop\n  long double M_candidate;\n\n  // Compute the test statistic\n  for (int k = kn; k &lt;= (n - kn); ++k) {\n    // Update s and s_square for both lower and upper\n    s_lower += dat[k-1];\n    s_square_lower += dat[k-1] * dat[k-1];\n    s_upper -= dat[k-1];\n    s_square_upper -= dat[k-1] * dat[k-1];\n\n    // Get estimate of sd for this k\n    long double sdk = sqrt((s_square_lower - pow(s_lower, 2.0) / k +\n                      s_square_upper -\n                      pow(s_upper, 2.0) / (n - k))/n);\n    M_candidate = abs(s_lower / k - s_upper / (n - k)) / sdk;\n    // Choose new maximum\n    if (M_candidate &gt; M) {\n      M = M_candidate;\n    }\n  }\n\n  return M * sqrt(kn);\n}')\n</code></pre>\n\n<p>Try the command <code>statZn_cpp(1:20,4)</code>, and you will get <code>6.963106</code>, which is the correct answer. Scaling should not matter; <code>statZn_cpp(1:20*10,4)</code> will also yield the correct answer of 6.963106. But <code>statZn_cpp(1:20/10,4)</code> yields the wrong answer of <code>6.575959</code>, and <code>statZn_cpp(1:20/100,4)</code> again gives you the obviously wrong answer of <code>0</code>. More to the point (and relevant to my research, which involves simulation studies), when I try <code>statZn_cpp(rnorm(20),4)</code>, the answer is almost always <code>0</code>, which is wrong.</p>\n\n<p>Clearly the problem has to do with rounding errors, but I don't know where they are or how to fix them (I am brand new to C++). I've tried to expand precision as much as possible. Is there a way to fix the rounding problem? (An R wrapper function is permissible if I should be attempting what amounts to a preprocessing step, but it needs to be robust, working for general levels of precision.)</p>\n\n<p><strong>EDIT: Here is some \"equivalent\" R code:</strong></p>\n\n<pre><code>statZn &lt;- function(dat, kn = function(n) {floor(sqrt(n))}) {\n  n = length(dat)\n  return(sqrt(kn(n))*max(sapply(\n      floor(kn(n)):(n - floor(kn(n))), function(k)\n        abs(1/k*sum(dat[1:k]) -\n              1/(n-k)*sum(dat[(k+1):n]))/sqrt((sum((dat[1:k] -\n               mean(dat[1:k]))^2)+sum((dat[(k+1):n] -\n               mean(dat[(k+1):n]))^2))/n))))\n}\n</code></pre>\n\n<p>Also, the R code below basically replicates the method that should be used by the C++ code. It is capable of reaching the correct answer.</p>\n\n<pre><code>  n = length(dat)\n  s_lower = 0\n  s_square_lower = 0\n  s_upper = 0\n  s_square_upper = 0\n  for (i in 1:(kn-1)) {\n    s_lower = s_lower + dat[i]\n    s_square_lower = s_square_lower + dat[i] * dat[i]\n  }\n  for (i in kn:n) {\n    s_upper = s_upper + dat[i]\n    s_square_upper = s_square_upper + dat[i] * dat[i]\n  }\n  M = 0\n\n  for (k in kn:(n-kn)) {\n    s_lower = s_lower + dat[k]\n    s_square_lower = s_square_lower + dat[k] * dat[k]\n    s_upper = s_upper - dat[k]\n    s_square_upper = s_square_upper - dat[k] * dat[k]\n\n    sdk = sqrt((s_square_lower - (s_lower)^2/k +\n                         s_square_upper -\n                         (s_upper)^2/(n-k))/n)\n    M_candidate = sqrt(kn) * abs(s_lower / k - s_upper / (n - k)) / sdk\n\n    cat('k', k, '\\n',\n        \"s_lower\", s_lower, '\\n',\n        's_square_lower', s_square_lower, '\\n',\n        's_upper', s_upper, '\\n',\n        's_square_upper', s_square_upper, '\\n',\n        'sdk', sdk, '\\n',\n        'M_candidate', M_candidate, '\\n\\n')\n\n    if (M_candidate &gt; M) {\n      M = M_candidate\n    }\n  }\n</code></pre>\n"}, {"tags": ["c++", "function-pointers", "member-function-pointers", "bfd"], "comments": [{"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1462475388, "post_id": 37035842, "comment_id": 61663755, "body": "Thanks, I was trying to avoid external tools. After all the external tools themselves use <code>bfd</code>."}], "answers": [{"comments": [{"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1462661985, "post_id": 37041403, "comment_id": 61732780, "body": "Thank you, was trying not to use external tools, after all those external tools will use the <code>bfd</code> library. See my solution. What seems impossible to do is to take the address of the constructor or the destructor. For those your solution seems to make it possible."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1462415927, "creation_date": 1462415927, "answer_id": 37041403, "question_id": 37035842, "link": "https://stackoverflow.com/questions/37035842/make-bfd-library-find-the-location-of-a-class-member-function/37041403#37041403", "title": "Make BFD library find the location of a class member function", "body": "<p>Okay, there's good news and bad news.</p>\n\n<p>The good news: It <em>is</em> possible.</p>\n\n<p>The bad news: It's not straight forward.</p>\n\n<p>You'll need the <code>c++filt</code> utility.</p>\n\n<p>And, some way to read the symbol table of your executable, such as <code>readelf</code>. If you can enumerate the [mangled] symbols with a <code>bfd_*</code> call, you may be able to save yourself a step.</p>\n\n<p>Also, here is a <strong>biggie</strong>: You'll need the c++ name of your symbol in a <strong>text string</strong>. So, for <code>&amp;(A::my_member_function)</code>, you'll need it in a form: <code>\"A::my_member_function()\"</code> This shouldn't be too difficult since I presume you have a limited number of them that you care about.</p>\n\n<p>You'll need to get a list of symbols and their addresses from <code>readelf -s &lt;executable&gt;</code>. Be prepared to parse this output. You'll need to decode the hex address from the string to get its binary value.</p>\n\n<p>These will be the mangled names. For each symbol, do <code>c++filt -n mangled_name</code> and capture the output (i.e. a pipe) into something (e.g. <code>nice_name</code>). It will give you back the demangled name (i.e. the nice c++ name you'd like).</p>\n\n<p>Now, if <code>nice_name</code> matches \"A:my_member_function()\", you now have a match, you already have the mangled name, but, more importantly, the hex address of the symbol.  Feed this hex value [suitably cast] to bfd where you were stuffing <code>functionname_ptr</code></p>\n\n<hr>\n\n<p><em>Note:</em> The above works but can be slow with repeated invocations of <code>c++filt</code></p>\n\n<p>A faster way is to do this is to capture the piped output of:</p>\n\n<pre><code>readelf -s &lt;executable&gt; | c++filt\n</code></pre>\n\n<p>It's also [probably] easier to do it this way since you only have to parse the filtered output and look for the matching nice name.</p>\n\n<p>Also, if you had multiple symbols that you cared about, you could get all the addresses in a single invocation.</p>\n"}, {"tags": [], "owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "is_accepted": true, "score": 0, "last_activity_date": 1462661860, "last_edit_date": 1462661860, "creation_date": 1462475339, "answer_id": 37058438, "question_id": 37035842, "link": "https://stackoverflow.com/questions/37035842/make-bfd-library-find-the-location-of-a-class-member-function/37058438#37058438", "title": "Make BFD library find the location of a class member function", "body": "<p>Ok, I found a way. First, I discovered that <code>bfd</code> is pretty happy detecting member functions debug information from member pointers, as long as the pointer can be converted to <code>void*</code>.</p>\n\n<p>I was using <code>clang</code> which wouldn't allow me to cast the member function pointer to any kind of pointer or integer. \n<code>GCC</code> allows to do this but emits a warning. \nThere is even a flag to allow pointer to member cast called <code>-Wno-pmf-conversions</code>.</p>\n\n<p>With that information in mind I did my best to convert a member function pointer into <code>void*</code> and I ended up doing this using unions.</p>\n\n<pre><code>struct A{\n   int my_member_function(){return 5.;}\n};\n\nunion void_caster_t{\n    int (A::*p)(void) value;\n    void* casted_value;\n};\nvoid_caster_t void_caster = {&amp;A::my_member_function};\n\n_bfd_elf_find_nearest_line (...,\n                void_caster.casted_value, \n                ...)\n</code></pre>\n\n<p>Finally <code>bfd</code> is able to give me debug information of a member function.</p>\n\n<hr>\n\n<p><strong>What I didn't figure out yet, is how to get the pointer to the constructor and the destructor member functions.</strong></p>\n\n<p>For example</p>\n\n<pre><code>void_caster_t void_caster = {&amp;A::~A};\n</code></pre>\n\n<p>Gives compiler error: \"you can't take the address of the destructor\".</p>\n\n<p>For the constructor I wasn't even able to find the correct syntax, since this fails as a syntax error.</p>\n\n<pre><code>void_caster_t void_caster = {&amp;A::A};\n</code></pre>\n\n<p>Again all the logic behind not being able involves non-sensical callbacks, but this is different because I want the pointer (or address) to get debug information, not callbacks.</p>\n"}], "owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "accepted_answer_id": 37058438, "answer_count": 2, "score": 0, "last_activity_date": 1462661860, "creation_date": 1462388331, "last_edit_date": 1462477418, "question_id": 37035842, "link": "https://stackoverflow.com/questions/37035842/make-bfd-library-find-the-location-of-a-class-member-function", "title": "Make BFD library find the location of a class member function", "body": "<p>I am using the function <code>bfd_find_nearest_line</code> to find the source location of a function (from an executable with debugging symbols --compiled with <code>-g</code>). Naturally one of the arguments is a pointer to the function I want to locate:</p>\n\n<pre><code>boolean\n_bfd_elf_find_nearest_line (abfd, \n                section, \n                symbols, \n                offset, \n                filename_ptr, \n                functionname_ptr, // &lt;- HERE!\n                line_ptr)\n</code></pre>\n\n<p><a href=\"https://sourceware.org/ml/binutils/2000-08/msg00248.html\" rel=\"nofollow\">https://sourceware.org/ml/binutils/2000-08/msg00248.html</a></p>\n\n<p>After quite a bit of (pure C) boiler plate, I managed this to work with normal functions (where the normal function pointer is casted to <code>*void</code>).</p>\n\n<p>For example, this works:</p>\n\n<pre><code>int my_function(){return 5;}\n\nint main(){\n    _bfd_elf_find_nearest_line (...,\n                (void*)(&amp;my_function), \n                ...);\n}\n</code></pre>\n\n<p>The question is if <code>bfd_find_nearest_line</code> can be used to locate the source code of a class member function.</p>\n\n<pre><code>struct A{\n   int my_member_function(){return 5.;}\n};\n\n_bfd_elf_find_nearest_line (...,\n                what_should_I_put_here??, \n                ...)\n</code></pre>\n\n<p>Class member function (in this case if type <code>int (A::*)()</code>) are not functions, an in particular cannot be cast to any function pointer, not even to <code>void*</code>. See here: <a href=\"https://isocpp.org/wiki/faq/pointers-to-members#cant-cvt-memfnptr-to-voidptr\" rel=\"nofollow\">https://isocpp.org/wiki/faq/pointers-to-members#cant-cvt-memfnptr-to-voidptr</a></p>\n\n<p>I completely understand the logic behind this, how ever the member-function pointer is the only handle from which I have information of a member function in order to make BFD identify the function. I don't want this pointer to call a function. </p>\n\n<p>I know more or less how C++ works, the compiler will generate silently an equivalent free-C function,</p>\n\n<pre><code>__A_my_member_function(A* this){...}\n</code></pre>\n\n<p>But I don't know how to access the address of this free function or if that is even possible,and whether the <code>bfd</code> library will be able to locate the source location of the original <code>my_member_function</code> via this pointer.\n(For the moment at least I am not interested in virtual functions.)</p>\n\n<p>In other words, </p>\n\n<p>1) I need to know if <code>bfd</code> will be able to locate a member function, </p>\n\n<p>2) and if it can how can I map the member function pointer of type <code>int (A::*)()</code> to an argument that <code>bfd</code> can take (<code>void*</code>).</p>\n\n<hr>\n\n<p>I know by other means (stack trace) that the pointer exists, for example I can get that the free function is called in this case <code>_ZN1A18my_member_functionEv</code>, but the problem is how I can get this from <code>&amp;(A::my_member_function)</code>.</p>\n"}, {"tags": ["c++", "malloc", "heap"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1462388210, "post_id": 37035776, "comment_id": 61621940, "body": "It depends on which library (libraries) you link with.  The default will probably be the one in glibc \u2014 you&#39;d have to work to ensure that you&#39;re using another version.  Also, C++ uses <code>new</code> and <code>delete</code> (and variants); they&#39;re not necessarily tied to <code>malloc()</code> and <code>free()</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 8, "creation_date": 1462388245, "post_id": 37035776, "comment_id": 61621963, "body": "XY problem? Why do you care?"}, {"owner": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1462388453, "post_id": 37035776, "comment_id": 61622086, "body": "@SergeyA I care because I would like to make sure that I use a malloc which supports multithreading w.r.t. performance."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1462388554, "post_id": 37035776, "comment_id": 61622153, "body": "In essence, all versions will have to support multithreading because modern systems are multithreaded.  Until you identify a problem, you probably shouldn&#39;t worry about it."}, {"owner": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1462388627, "post_id": 37035776, "comment_id": 61622204, "body": "@Jonathan Leffler Thanks, but I am worried because adding more threads does slow down my code, which does a lot of heap allocations. Also see: <a href=\"http://stackoverflow.com/questions/7504223/malloc-performance-in-a-multithreaded-enviroment\" title=\"malloc performance in a multithreaded enviroment\">stackoverflow.com/questions/7504223/&hellip;</a>"}, {"owner": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1462388788, "post_id": 37035776, "comment_id": 61622303, "body": "@Jesper Juhl  care because I would like to make sure that I use a malloc which supports multithreading w.r.t. performance"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 4, "creation_date": 1462388793, "post_id": 37035776, "comment_id": 61622304, "body": "You should profile your code to determine where exactly the bottleneck is before you start trying to swap out the allocator"}, {"owner": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "edited": false, "score": 1, "creation_date": 1462388830, "post_id": 37035776, "comment_id": 61622324, "body": "@ Captain Obvlious  well my code is   \t#pragma omp parallel for \tfor (int i = 0; i &lt; mallocCnt; i++) { \t\tptrStore[i] = ((char*)malloc(100 * sizeof(char))); \t} And I vary the omp_set_num_threads(parallelism); with 0 &lt; parallelism &lt; 16."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1462391707, "post_id": 37035776, "comment_id": 61623871, "body": "@user695652:  Please look at your comment.  Is the code readable?  Please <b>edit</b> your question with code.  The code will look more readable in your question."}], "answers": [{"tags": [], "owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "is_accepted": true, "score": 4, "last_activity_date": 1462429497, "creation_date": 1462429497, "answer_id": 37043813, "question_id": 37035776, "link": "https://stackoverflow.com/questions/37035776/how-to-know-which-malloc-is-used/37043813#37043813", "title": "How to know which malloc is used?", "body": "<blockquote>\n  <p>I read that \"due to ptmalloc2\u2019s threading support, it became the default memory allocator for linux.\" Is there any way for me to check this myself?</p>\n</blockquote>\n\n<p><code>glibc</code> internally uses <code>ptmalloc2</code> and this isn't a recent development. Either way, it's not terribly difficult to do <code>getconf GNU_LIBC_VERSION</code>, then cross-check the version to see if <code>ptmalloc2</code> is used in that version or not, but I'm willing to bet you'd be wasting your time.</p>\n\n<blockquote>\n  <p>I am asking because I do not seem to get any speed up by paralellizing my malloc loop in the code below</p>\n</blockquote>\n\n<p>Turning your example into an <a href=\"http://coliru.stacked-crooked.com/a/5acfcc8825aaf79f\" rel=\"nofollow\">MVCE</a> (omitting code here for brevity), and compiling with <code>g++ -Wall -pedantic -O3 -pthread -fopenmp</code>, with <code>g++ 5.3.1</code> here are my results.</p>\n\n<p>With OpenMP:</p>\n\n<pre><code> parallelism = 1     itr = 10000000  malloc_time = 746   free_time = 263\n parallelism = 2     itr = 10000000  malloc_time = 541   free_time = 267\n parallelism = 3     itr = 10000000  malloc_time = 405   free_time = 259\n parallelism = 4     itr = 10000000  malloc_time = 324   free_time = 221\n parallelism = 5     itr = 10000000  malloc_time = 330   free_time = 242\n parallelism = 6     itr = 10000000  malloc_time = 287   free_time = 244\n parallelism = 7     itr = 10000000  malloc_time = 257   free_time = 226\n parallelism = 8     itr = 10000000  malloc_time = 270   free_time = 225\n parallelism = 9     itr = 10000000  malloc_time = 253   free_time = 225\n parallelism = 10    itr = 10000000  malloc_time = 236   free_time = 226\n parallelism = 11    itr = 10000000  malloc_time = 225   free_time = 239\n parallelism = 12    itr = 10000000  malloc_time = 276   free_time = 258\n parallelism = 13    itr = 10000000  malloc_time = 241   free_time = 228\n parallelism = 14    itr = 10000000  malloc_time = 254   free_time = 225\n parallelism = 15    itr = 10000000  malloc_time = 278   free_time = 272\n parallelism = 16    itr = 10000000  malloc_time = 235   free_time = 220\n\n23.87 user \n2.11 system \n0:10.41 elapsed \n249% CPU\n</code></pre>\n\n<p>Without OpenMP:</p>\n\n<pre><code> parallelism = 1     itr = 10000000  malloc_time = 748   free_time = 263\n parallelism = 2     itr = 10000000  malloc_time = 344   free_time = 256\n parallelism = 3     itr = 10000000  malloc_time = 751   free_time = 254\n parallelism = 4     itr = 10000000  malloc_time = 339   free_time = 262\n parallelism = 5     itr = 10000000  malloc_time = 748   free_time = 253\n parallelism = 6     itr = 10000000  malloc_time = 330   free_time = 256\n parallelism = 7     itr = 10000000  malloc_time = 734   free_time = 260\n parallelism = 8     itr = 10000000  malloc_time = 334   free_time = 259\n parallelism = 9     itr = 10000000  malloc_time = 750   free_time = 256\n parallelism = 10    itr = 10000000  malloc_time = 339   free_time = 255\n parallelism = 11    itr = 10000000  malloc_time = 743   free_time = 267\n parallelism = 12    itr = 10000000  malloc_time = 342   free_time = 261\n parallelism = 13    itr = 10000000  malloc_time = 739   free_time = 252\n parallelism = 14    itr = 10000000  malloc_time = 333   free_time = 252\n parallelism = 15    itr = 10000000  malloc_time = 740   free_time = 252\n parallelism = 16    itr = 10000000  malloc_time = 330   free_time = 252\n\n13.38 user \n4.66 system \n0:18.08 elapsed \n99% CPU \n</code></pre>\n\n<p>Parallelism seems to be faster by about 8 seconds. Still not convinced? OK. I went ahead and grabbed <a href=\"https://github.com/ennorehling/dlmalloc\" rel=\"nofollow\"><code>dlmalloc</code></a>, ran <code>make</code> to produce <code>libmalloc.a</code>. My new command like is <code>g++ -Wall -pedantic -O3 -pthread -fopenmp -L$HOME/Development/test/dlmalloc/lib test.cpp -lmalloc</code></p>\n\n<p>With OpenMP:</p>\n\n<pre><code>parallelism = 1  itr = 10000000  malloc_time = 814   free_time = 277\n</code></pre>\n\n<p>I <kbd>CTRL</kbd>-<kbd>C</kbd>'d after 37 seconds.</p>\n\n<p>Without OpenMP:</p>\n\n<pre><code> parallelism = 1     itr = 10000000  malloc_time = 772   free_time = 271\n parallelism = 2     itr = 10000000  malloc_time = 780   free_time = 272\n parallelism = 3     itr = 10000000  malloc_time = 783   free_time = 272\n parallelism = 4     itr = 10000000  malloc_time = 792   free_time = 277\n parallelism = 5     itr = 10000000  malloc_time = 813   free_time = 281\n parallelism = 6     itr = 10000000  malloc_time = 800   free_time = 275\n parallelism = 7     itr = 10000000  malloc_time = 795   free_time = 277\n parallelism = 8     itr = 10000000  malloc_time = 790   free_time = 273\n parallelism = 9     itr = 10000000  malloc_time = 788   free_time = 277\n parallelism = 10    itr = 10000000  malloc_time = 784   free_time = 276\n parallelism = 11    itr = 10000000  malloc_time = 786   free_time = 284\n parallelism = 12    itr = 10000000  malloc_time = 807   free_time = 279\n parallelism = 13    itr = 10000000  malloc_time = 791   free_time = 277\n parallelism = 14    itr = 10000000  malloc_time = 790   free_time = 273\n parallelism = 15    itr = 10000000  malloc_time = 785   free_time = 276\n parallelism = 16    itr = 10000000  malloc_time = 787   free_time = 275\n\n6.48 user \n11.27 system \n0:17.81 elapsed \n99% CPU\n</code></pre>\n\n<p>Pretty significant difference. I suspect that the issue lies within your more complicated code, or something's wrong with your benchmark.</p>\n"}], "owner": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 1, "accepted_answer_id": 37043813, "answer_count": 1, "score": 7, "last_activity_date": 1462429497, "creation_date": 1462388112, "last_edit_date": 1462392393, "question_id": 37035776, "link": "https://stackoverflow.com/questions/37035776/how-to-know-which-malloc-is-used", "title": "How to know which malloc is used?", "body": "<p>The way I understand it, there exist many different malloc implementations:</p>\n\n<ul>\n<li>dlmalloc \u2013 General purpose allocator</li>\n<li>ptmalloc2 \u2013 glibc</li>\n<li>jemalloc \u2013 FreeBSD and Firefox</li>\n<li>tcmalloc \u2013 Google</li>\n<li>libumem \u2013 Solaris</li>\n</ul>\n\n<p>Is there any way to determine which malloc is actually used on my (linux) system?</p>\n\n<p>I read that \"due to ptmalloc2\u2019s threading support, it became the default memory allocator for linux.\" Is there any way for me to check this myself?</p>\n\n<p>I am asking because I do not seem to get any speed up by paralellizing my malloc loop in the code below:</p>\n\n<pre><code>for (int i = 1; i &lt;= 16; i += 1 ) {\n    parallelMalloc(i);\n}\n\n void parallelMalloc(int parallelism, int mallocCnt = 10000000) {\n\n    omp_set_num_threads(parallelism);\n\n    std::vector&lt;char*&gt; ptrStore(mallocCnt);\n\n    boost::posix_time::ptime t1 = boost::posix_time::microsec_clock::local_time();\n\n    #pragma omp parallel for\n    for (int i = 0; i &lt; mallocCnt; i++) {\n        ptrStore[i] = ((char*)malloc(100 * sizeof(char)));\n    }\n\n    boost::posix_time::ptime t2 = boost::posix_time::microsec_clock::local_time();\n\n    #pragma omp parallel for\n    for (int i = 0; i &lt; mallocCnt; i++) {\n        free(ptrStore[i]);\n    }\n\n    boost::posix_time::ptime t3 = boost::posix_time::microsec_clock::local_time();\n\n\n    boost::posix_time::time_duration malloc_time = t2 - t1;\n    boost::posix_time::time_duration free_time   = t3 - t2;\n\n    std::cout &lt;&lt; \" parallelism = \"  &lt;&lt; parallelism &lt;&lt; \"\\t itr = \" &lt;&lt; mallocCnt &lt;&lt;  \"\\t malloc_time = \" &lt;&lt;\n            malloc_time.total_milliseconds() &lt;&lt; \"\\t free_time = \" &lt;&lt; free_time.total_milliseconds() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>which gives me an output of </p>\n\n<pre><code> parallelism = 1         itr = 10000000  malloc_time = 1225      free_time = 1517\n parallelism = 2         itr = 10000000  malloc_time = 1614      free_time = 1112\n parallelism = 3         itr = 10000000  malloc_time = 1619      free_time = 687\n parallelism = 4         itr = 10000000  malloc_time = 2325      free_time = 620\n parallelism = 5         itr = 10000000  malloc_time = 2233      free_time = 550\n parallelism = 6         itr = 10000000  malloc_time = 2207      free_time = 489\n parallelism = 7         itr = 10000000  malloc_time = 2778      free_time = 398\n parallelism = 8         itr = 10000000  malloc_time = 1813      free_time = 389\n parallelism = 9         itr = 10000000  malloc_time = 1997      free_time = 350\n parallelism = 10        itr = 10000000  malloc_time = 1922      free_time = 291\n parallelism = 11        itr = 10000000  malloc_time = 2480      free_time = 257\n parallelism = 12        itr = 10000000  malloc_time = 1614      free_time = 256\n parallelism = 13        itr = 10000000  malloc_time = 1387      free_time = 289\n parallelism = 14        itr = 10000000  malloc_time = 1481      free_time = 248\n parallelism = 15        itr = 10000000  malloc_time = 1252      free_time = 297\n parallelism = 16        itr = 10000000  malloc_time = 1063      free_time = 281\n</code></pre>\n"}, {"tags": ["c++", "arrays", "function", "char"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1462387809, "post_id": 37035650, "comment_id": 61621701, "body": "0 is an eos marker. Use &#39;0&#39;."}, {"owner": {"reputation": 302, "user_id": 4168338, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f0a92a5cb714cdc6783213734c16f35e?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4168338/jeff"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1462387968, "post_id": 37035650, "comment_id": 61621795, "body": "I don&#39;t want to change my array. I want to modify my function to print. @JohnnyMopp"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1462388140, "post_id": 37035650, "comment_id": 61621897, "body": "<code>cout &lt;&lt; ( _st[i] ? _st[i] : &#39;0&#39; );</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462388186, "post_id": 37035650, "comment_id": 61621926, "body": "Do you want to print a zero or a space to what? A zero byte is a string terminator in a C-style string."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1462388199, "post_id": 37035650, "comment_id": 61621934, "body": "1. <code>&lt;=</code> in your <code>for</code> loop is one too far 2. why are you passing the array as a <code>std::string</code>?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1462392762, "post_id": 37035650, "comment_id": 61624431, "body": "You should use a debugger and verify that the string contains <i>the entire content of the character array</i>.  Just saying..."}], "answers": [{"comments": [{"owner": {"reputation": 302, "user_id": 4168338, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f0a92a5cb714cdc6783213734c16f35e?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4168338/jeff"}, "edited": false, "score": 0, "creation_date": 1462388004, "post_id": 37035692, "comment_id": 61621813, "body": "I don&#39;t want to change my array. I want to modify my function to print. @bkVnet"}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "reply_to_user": {"reputation": 302, "user_id": 4168338, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f0a92a5cb714cdc6783213734c16f35e?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4168338/jeff"}, "edited": false, "score": 0, "creation_date": 1462388289, "post_id": 37035692, "comment_id": 61621994, "body": "@Keihan in that case, check for &#39;\\0&#39; and output &#39;0&#39;."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1462391859, "post_id": 37035692, "comment_id": 61623948, "body": "@bkVnet: your solution may not work since &#39;\\0&#39; is the string terminator.  How does one know if there is zero, 1 or many in the string?  Hmmm...."}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1462392223, "post_id": 37035692, "comment_id": 61624142, "body": "@ThomasMatthews You are right, for the solution in my comment to work, the string terminator has to be removed. That was the reason i initially suggested to use <code>&#39;0&#39;</code> instead of <code>0</code>. He also need use an iterator to copy the characters to the string in that case."}], "tags": [], "owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "is_accepted": false, "score": 2, "last_activity_date": 1462388060, "last_edit_date": 1462388060, "creation_date": 1462387822, "answer_id": 37035692, "question_id": 37035650, "link": "https://stackoverflow.com/questions/37035650/how-to-generate-a-function-to-print-char-array-in-c/37035692#37035692", "title": "How to generate a function to print char [ ] array in C++?", "body": "<p>put the 0 as a character <code>'0'</code>. since <code>'0'</code> and 0 are not the same. When you simple put 0, you are specifying the ASCII code of the character which is a null terminator character(marker for end of string) and you won't see anything there. And don't forget to put the null terminator at the end.</p>\n\n<pre><code>char str5[] = { 'G','o','o','d','-','b','y','e','0','l','d','0','\\0' };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1462391918, "post_id": 37035806, "comment_id": 61623976, "body": "Where&#39;s the character array?   The OP is using character arrays."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1462391956, "post_id": 37035806, "comment_id": 61623995, "body": "Also, prefer not to use leading underscores in variable names as they may conflict with internal compiler symbols."}], "tags": [], "owner": {"reputation": 1260, "user_id": 3019422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f6b790391d48f2c65f15d342ca0815?s=128&d=identicon&r=PG&f=1", "display_name": "Luci", "link": "https://stackoverflow.com/users/3019422/luci"}, "is_accepted": false, "score": 1, "last_activity_date": 1462389512, "last_edit_date": 1462389512, "creation_date": 1462388184, "answer_id": 37035806, "question_id": 37035650, "link": "https://stackoverflow.com/questions/37035650/how-to-generate-a-function-to-print-char-array-in-c/37035806#37035806", "title": "How to generate a function to print char [ ] array in C++?", "body": "<p>You could write function like this</p>\n\n<pre><code> void displayResult(string _st)\n {\n    int l = _st.length();\n    for (int i = 0; i &lt; l; i++)\n    {\n       cout &lt;&lt; ( (_st[i]== 0) ? '0' : _st[i] );\n       //printf(\"%s\\n\", _st[i]);\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1462388294, "post_id": 37035808, "comment_id": 61621999, "body": "There is also problem in the loop condition, it should be less than not less or equal"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1462388397, "post_id": 37035808, "comment_id": 61622054, "body": "@Slava thanx, I was just looking at this"}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 2, "last_activity_date": 1462388370, "last_edit_date": 1462388370, "creation_date": 1462388193, "answer_id": 37035808, "question_id": 37035650, "link": "https://stackoverflow.com/questions/37035650/how-to-generate-a-function-to-print-char-array-in-c/37035808#37035808", "title": "How to generate a function to print char [ ] array in C++?", "body": "<p>One way is to check if given character is '\\0' and output it as <code>0</code>:</p>\n\n<pre><code>    if (_st[i] == '\\0')\n      cout &lt;&lt; '0';\n    else\n      cout &lt;&lt; _st[i];\n</code></pre>\n\n<p>also to pass whole array to your function you should use different string constructor, the one that accepts iterators:</p>\n\n<pre><code>displayResult(std::string(std::begin(str5), std::end(str5)));\n</code></pre>\n\n<p>otherwise std::string will copy array contents only until first null character</p>\n\n<p>Last thing, if you dont want to include last null character in output then change loop condition to:</p>\n\n<pre><code>for (int i = 0; i&lt;l; i++)\n                ^^^\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 1, "last_activity_date": 1462392631, "creation_date": 1462392631, "answer_id": 37037120, "question_id": 37035650, "link": "https://stackoverflow.com/questions/37035650/how-to-generate-a-function-to-print-char-array-in-c/37037120#37037120", "title": "How to generate a function to print char [ ] array in C++?", "body": "<p>You've got many issues.  </p>\n\n<pre><code>char str5[] = { 'G','o','o','d','-','b','y','e',0,'l','d',0 };\n    displayResult(str5);\n</code></pre>\n\n<p>There is an implicit conversion from the character array to the <code>std::string</code> type.  </p>\n\n<p>The constructor of the <code>std::string</code> type will <em>load</em> characters from the array, <em>until it reaches a terminating nul character</em>, which is after \"bye\".  Thus \"ld\" never gets placed into the string.  </p>\n\n<p>If you want all of the character values to be placed into the string you will need to explicitly call the proper <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/basic_string\" rel=\"nofollow\"><code>std::string</code> constructor</a>:  </p>\n\n<pre><code>char str5[] = { 'G','o','o','d','-','b','y','e',0,'l','d',0 };\nstd::string s(str5, sizeof(str5));\ndisplayResult(s);\n</code></pre>\n\n<p>The <code>std::string</code> is designed to accommodate all values of a character set, including terminating nul and non printable.  </p>\n\n<p>By using the correct constructor, the offending '\\0' will be present in the string and you can search and replace it (inside the string variable).  </p>\n\n<p>You may want to declare the character array as <code>const</code> if there are no plans to modify it:</p>\n\n<pre><code>const char str5[] = { 'G','o','o','d','-','b','y','e',0,'l','d',0 };\n</code></pre>\n\n<p>You can also declare this as:</p>\n\n<pre><code>const char str6[] = {\"Good-bye\\0ld\"};\n</code></pre>\n"}], "owner": {"reputation": 302, "user_id": 4168338, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f0a92a5cb714cdc6783213734c16f35e?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4168338/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2844, "favorite_count": 0, "accepted_answer_id": 37037120, "answer_count": 4, "score": 0, "last_activity_date": 1529112280, "creation_date": 1462387647, "last_edit_date": 1529112280, "question_id": 37035650, "link": "https://stackoverflow.com/questions/37035650/how-to-generate-a-function-to-print-char-array-in-c", "title": "How to generate a function to print char [ ] array in C++?", "body": "<p>I'm trying to write a small function for printing char array that contains <strong>0</strong> in middle and end. My function doesn't print it correctly, what I'm missing :-(<br>\nExpected result: <strong>Good-bye0ld0</strong> \nActual: <strong>Good-bye ld</strong> </p>\n\n<pre><code>// call function \nchar str5[] = { 'G','o','o','d','-','b','y','e',0,'l','d',0 };\n    displayResult(str5);\n\n// This is function \n\n     void displayResult(string _st)\n    {\n        int l = _st.length();\n        for (int i = 0; i&lt;=l; i++)\n    {\n        cout &lt;&lt; _st[i];\n        //printf(\"%s\\n\", _st[i]);\n    }\n    cout &lt;&lt; endl;\n    }\n</code></pre>\n"}, {"tags": ["c++", "orders"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1462387879, "post_id": 37035639, "comment_id": 61621747, "body": "I don&#39;t see a question here."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1462388019, "post_id": 37035639, "comment_id": 61621821, "body": "It is not clear what you are asking for. <i>the program will update the number</i> you mean that&#39;s what is ACTUALLY happening or that&#39;s what you WANT to happen?"}, {"owner": {"reputation": 3, "user_id": 5432443, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lAkaqFWmVEI/AAAAAAAAAAI/AAAAAAAANUI/pRxe0grrN6M/photo.jpg?sz=128", "display_name": "Azmain Syed", "link": "https://stackoverflow.com/users/5432443/azmain-syed"}, "edited": false, "score": 0, "creation_date": 1462388120, "post_id": 37035639, "comment_id": 61621881, "body": "I apologize for not making it clear enough, but that is what I WANT to happen."}, {"owner": {"reputation": 3, "user_id": 5432443, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lAkaqFWmVEI/AAAAAAAAAAI/AAAAAAAANUI/pRxe0grrN6M/photo.jpg?sz=128", "display_name": "Azmain Syed", "link": "https://stackoverflow.com/users/5432443/azmain-syed"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1462388700, "post_id": 37035639, "comment_id": 61622245, "body": "@FirstStep I have created an array of the warehouses and first made sure that the city read in, is inside the array. Then I want it go through each line whenever it finds a match to update the amounts."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5432443, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lAkaqFWmVEI/AAAAAAAAAAI/AAAAAAAANUI/pRxe0grrN6M/photo.jpg?sz=128", "display_name": "Azmain Syed", "link": "https://stackoverflow.com/users/5432443/azmain-syed"}, "edited": false, "score": 0, "creation_date": 1462389691, "post_id": 37035939, "comment_id": 61622793, "body": "Thanks, that actually helped a lot. It makes a lot more sense now of why you would create a temporary variable first and then add to the current value. Now, however, it&#39;s adding it to each line, rather than updating by city."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 3, "user_id": 5432443, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lAkaqFWmVEI/AAAAAAAAAAI/AAAAAAAANUI/pRxe0grrN6M/photo.jpg?sz=128", "display_name": "Azmain Syed", "link": "https://stackoverflow.com/users/5432443/azmain-syed"}, "edited": false, "score": 0, "creation_date": 1462389934, "post_id": 37035939, "comment_id": 61622919, "body": "It should not do that since you are checking <code>if (city1 == records.warehouse[i])</code>, right? So watch out where to put it and how to use this post which is the idea and the fix for your issue"}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "reply_to_user": {"reputation": 3, "user_id": 5432443, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lAkaqFWmVEI/AAAAAAAAAAI/AAAAAAAANUI/pRxe0grrN6M/photo.jpg?sz=128", "display_name": "Azmain Syed", "link": "https://stackoverflow.com/users/5432443/azmain-syed"}, "edited": false, "score": 1, "creation_date": 1462390114, "post_id": 37035939, "comment_id": 61622999, "body": "@AzmainSyed if this answer helped you to solve your current issue, you might want to accept it so that other can also benefit from this answer."}], "tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": true, "score": 1, "last_activity_date": 1475758386, "last_edit_date": 1475758386, "creation_date": 1462388622, "answer_id": 37035939, "question_id": 37035639, "link": "https://stackoverflow.com/questions/37035639/assignment-help-updating-amounts-of-each-item-for-shipments-and-orders-in-a/37035939#37035939", "title": "Assignment help updating amounts of each item for &quot;shipments&quot; and &quot;orders&quot; in a specific city", "body": "<p>Whatever you find, you are assigning it right away and removing the old value:</p>\n\n<pre><code>if (city1 == records.warehouse[i])\n{\n    itemRec &gt;&gt; records.amt[0];\n    itemRec &gt;&gt; records.amt[1];\n    itemRec &gt;&gt; records.amt[2];\n}\n</code></pre>\n\n<p>So do this instead:</p>\n\n<pre><code>if (city1 == records.warehouse[i])\n{\n     itemRec &gt;&gt; temp1; // declare a place holder\n     itemRec &gt;&gt; temp2;\n     itemRec &gt;&gt; temp3;\n\n     records.amt[0] += temp1; // add the holder's value to the current value\n     records.amt[1] += temp2;\n     records.amt[2] += temp3;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5432443, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lAkaqFWmVEI/AAAAAAAAAAI/AAAAAAAANUI/pRxe0grrN6M/photo.jpg?sz=128", "display_name": "Azmain Syed", "link": "https://stackoverflow.com/users/5432443/azmain-syed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 37035939, "answer_count": 1, "score": 0, "last_activity_date": 1487591197, "creation_date": 1462387614, "last_edit_date": 1462388193, "question_id": 37035639, "link": "https://stackoverflow.com/questions/37035639/assignment-help-updating-amounts-of-each-item-for-shipments-and-orders-in-a", "title": "Assignment help updating amounts of each item for &quot;shipments&quot; and &quot;orders&quot; in a specific city", "body": "<p>My assignment asks that I create a file with a list of records in a file called \"ITEMRECORD.txt\" which I have below:</p>\n\n<pre><code>    type warehouse amt1 amt2 amt3\n    -----------------------------\n    s    NewYork    23   14   1\n    s    Miami      25   25   25\n    s    LosAngeles 40   13   17\n    s    Houston    100  30   10\n    s    Chicago    42   23   19\n    s    NewYork    0    0    15\n    s    Miami      13   17   21\n    o    LosAngeles 15   10   15\n    o    NewYork    12   24   8\n    o    Houston    75   45   10\n    o    Chicago    20   15   15\n    o    NewYork    15   0    0\n    s    LosAngeles 10   20   10\n    s    Houston    0    30   40\n    o    NewYork    15   15   25\n    o    Chicago    75   30   40\n    s    NewYork    20   15   20\n    o    Houston    10   20   10\n</code></pre>\n\n<p>I was able to write the code for reading in each line of text and numbers and distinguishing between \"shipments\" and \"orders\"</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;iomanip&gt;\n    #include &lt;fstream&gt;\n\n    using namespace std;\n    ifstream itemRec;\n\n    struct record\n    {\n        char type;\n        string warehouse[5] = {\"NewYork\", \"LosAngeles\", \"Miami\", \"Houston\",    \"Chicago\"};\n        int amt[3] = {0,0,0};\n    };\n    struct price {\n        double price;\n    };\n\n    int main ()\n    {\n        itemRec.open(\"ITEMRECORD.txt\");\n        record records;\n        price item[3];\n\n        string city1;\n        int amt1, amt2, amt3;\n\n        if(!itemRec)\n        {\n            cout &lt;&lt; \"Cannot open the record of items file!! Check file please!\" &lt;&lt; endl;\n        }\n\n        for (int i=0; i&lt;3; i++)\n        {\n            itemRec &gt;&gt; item[i].price;\n        }\n\n        while (itemRec &gt;&gt; records.type)\n        {\n\n            if (records.type == 's')                         // READING IN A      SINGLE SHIPMENT CARD\n            {       \n                itemRec &gt;&gt;  city1;\n                for(int i=0; i&lt;5; i++)\n                {\n                    if (city1 == records.warehouse[i])\n                    {\n                            itemRec &gt;&gt; records.amt[0];\n                            itemRec &gt;&gt; records.amt[1];\n                            itemRec &gt;&gt; records.amt[2];\n                    }\n                }\n            cout &lt;&lt; records.type &lt;&lt;\"\\t\" &lt;&lt; city1 &lt;&lt; \"\\t\" &lt;&lt; records.amt[0] &lt;&lt; \"\\t\" &lt;&lt; records.amt[1] &lt;&lt; \"\\t\" &lt;&lt; records.amt[2] &lt;&lt; endl;\n            }\n            else if (records.type == 'o')                           // READING IN A SINGLE ORDER CARD\n            {\n                itemRec &gt;&gt;  city1;\n                for(int i=0; i&lt;5; i++)\n                {\n                    if (city1 == records.warehouse[i])\n                    {\n                            itemRec &gt;&gt; records.amt[0];\n                            itemRec &gt;&gt; records.amt[1];\n                            itemRec &gt;&gt; records.amt[2];  \n                    }\n                }\n            cout &lt;&lt; records.type &lt;&lt;\"\\t\" &lt;&lt; city1 &lt;&lt; \"\\t\" &lt;&lt; records.amt[0] &lt;&lt; \"\\t\" &lt;&lt; records.amt[1] &lt;&lt; \"\\t\" &lt;&lt; records.amt[2] &lt;&lt; endl;\n            }\n        }\n</code></pre>\n\n<p>However, the part that I am having trouble with is, as each card is being read in to update the number of items in each warehouse. For example, the first line is\n<code>s   NewYork   23   14   1</code> when it sees <code>s    NewYork    0    0    15</code> I want the program to update the number in amt1, amt2, amt3 to <code>23    14   16</code> respectively.</p>\n\n<p>How do I begin writing the code for updating those amounts for a specific city when found?</p>\n"}, {"tags": ["c++", "templates", "c++11", "metaprogramming", "template-meta-programming"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1462393661, "post_id": 37035608, "comment_id": 61624955, "body": "I&#39;m curious about how you expect <code>getLookupInfo</code> to work. I don&#39;t see how it might be called. The return statements don&#39;t match the return type, meaning you&#39;ll either need polymorphism or template specialization."}, {"owner": {"reputation": 4035, "user_id": 759880, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd55bf483eadf8e81377407a923df5b8?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/759880/frank"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1462395057, "post_id": 37035608, "comment_id": 61625631, "body": "Andy - yes - that&#39;s where I&#39;m not managing to close the loop. The code snippet will not work, it&#39;s more intended to show what I would like to do. And you are right, the trick is somehow to make the return type of getLookupInfo return me a different type each time. I don&#39;t want virtuals though, so I would like to use template specialization. But even that IMHO is tricky. The essence of my question is probably: how do I use template specialization to write getLookupInfo?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1462395741, "post_id": 37035608, "comment_id": 61625994, "body": "The trick is to turn everything into a type... I may be able to help if you give me some pseudo code for how you&#39;d like to call it (w/o template specialization)."}, {"owner": {"reputation": 4035, "user_id": 759880, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd55bf483eadf8e81377407a923df5b8?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/759880/frank"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1462402090, "post_id": 37035608, "comment_id": 61628618, "body": "OK - what goes into getLookupInfo might as well be an int, whose value decides which type Order to use. What comes out of getLookupInfo should be something like the LookupInfo above, which carries some stuff, plus the type Order. If virtuals were possible, I guess there would be a virtual on LookupInfo to retrieve an instance of Order. Does that make sense?"}, {"owner": {"reputation": 3752, "user_id": 1001195, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dda89cff7f47651fbeee18a90949873b?s=128&d=identicon&r=PG", "display_name": "dau_sama", "link": "https://stackoverflow.com/users/1001195/dau-sama"}, "edited": false, "score": 0, "creation_date": 1462405423, "post_id": 37035608, "comment_id": 61629651, "body": "what if you store all the possible <code>LookupInfo</code> types in a tuple, and <code>getLookupInfo</code> will store the result in that tuple, and return an index to it? You will also need to template <code>some_function</code>.  Also check <code>boost fusion</code>, it may be interesting for your problem"}], "answers": [{"tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": false, "score": 0, "last_activity_date": 1462444029, "creation_date": 1462444029, "answer_id": 37048176, "question_id": 37035608, "link": "https://stackoverflow.com/questions/37035608/c-transporting-runtime-conditional-type-information/37048176#37048176", "title": "C++ Transporting runtime-conditional type information", "body": "<p>You could do it by collapsing your getLookupInfo -> apply some_function sequence into a single dispatch sequence. First, lets correct your definition of some_function to reflect the fact that it is a template function:</p>\n\n<pre><code>template&lt;typename LookupInfo&gt;\nvoid some_function(LookupInfo lookup)\n{\n    vector&lt;Record&gt; records(lookup_info.begin(), lookup_info.end());\n    sort(records.begin(), records.end(), lookup_info::order());\n}\n</code></pre>\n\n<p>Next, introduce a helper functor to invoke it (for reasons I discuss below I can't skip this, much as I would like to):</p>\n\n<pre><code>template&lt;typename LookupInfo&gt;\nstruct some_functor\n{\n    void operator()(LookupInfo lookup_info)\n    {   \n        some_function&lt;LookupInfo&gt;(lookup_info);\n    }   \n};\n</code></pre>\n\n<p>Now for the dispatch trick. Forget your getLookupInfo function above, and instead define:</p>\n\n<pre><code>template&lt;template &lt;class L&gt; class F&gt;\nvoid dispatchLookupInfo(int data)\n{\n  if (data == 0) {\n    auto lookup = LookupInfo&lt;Iterator1, Order1&gt;();\n    F&lt;LookupInfo&lt;Iterator1, Order1&gt;&gt; fn; \n    fn(lookup);\n  }\n  else  {\n    auto lookup = LookupInfo&lt;Iterator2, Order2&gt;();\n    F&lt;LookupInfo&lt;Iterator2, Order2&gt;&gt; fn; \n    fn(lookup);\n  }   \n} \n</code></pre>\n\n<p>Note here I'm pretending that <code>data</code> is an int as you said it might be. So as you can see instead of getting the LookupInfo and then calling the function separately, we do it in one go. Here dispatchLookupInfo takes a template template parameter, so it can specialise any function. This comes back to my point of needing a helper functor: I haven't been able to find a way to pass a function template (rather than a class template) as a template template parameter. However, clunky as it is I believe it satisfies your requirement of not involving virtual calls. Your final invocation might look like this:</p>\n\n<pre><code>dispatchLookupInfo&lt;some_functor&gt;(0);\n</code></pre>\n"}], "owner": {"reputation": 4035, "user_id": 759880, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd55bf483eadf8e81377407a923df5b8?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/759880/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462444029, "creation_date": 1462387496, "last_edit_date": 1462395154, "question_id": 37035608, "link": "https://stackoverflow.com/questions/37035608/c-transporting-runtime-conditional-type-information", "title": "C++ Transporting runtime-conditional type information", "body": "<p>I have a database which has 4 types of indexes. Each index type has a sort order. That is, if you know the static index type, then there is one correct functor to use to sort the objects in that index, and it is also known as soon as you know the index type, i.e. statically at compile time. </p>\n\n<p>The database has a function which contains a runtime switch statement to decide which index to talk to. I would like that function to return runtime information from the index (iterators, mostly), but also, the static order type to use. </p>\n\n<p>To show the intention, here is some pseudo-code. It does not work as is... could template specialization be used to write getLookupInfo (the return type would polymorphic). Note: I don't want to use virtuals.</p>\n\n<pre><code>template &lt;typename Iterator, typename Order&gt;\nstruct LookupInfo {\n  typedef Order order;\n  uint64_t cost;\n  Iterator it1, it2, it3, it4;\n};\n\nLookupInfo Database::getLookupInfo(LookupData data)\n{\n  if (data == ....) {\n   return LookupInfo&lt;Iterator1, Order1&gt;();\n  } \n   return LookupInfo&lt;Iterator2, Order2&gt;();\n}\n\nsome_function(LookupInfo lookup_info) {\n  vector&lt;Record&gt; records(lookup_info.begin(), lookup_info.end());\n  sort(records.begin(), records.end(), lookup_info::order());\n}\n</code></pre>\n\n<p>Is something like this at all possible?</p>\n"}, {"tags": ["android", "c++", "indexing"], "comments": [{"owner": {"reputation": 672, "user_id": 1895218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdCPV.png?s=128&g=1", "display_name": "odexcide", "link": "https://stackoverflow.com/users/1895218/odexcide"}, "edited": false, "score": 1, "creation_date": 1462395338, "post_id": 37035504, "comment_id": 61625790, "body": "Using OpenGrok (albeit a terrible UI) provides the best option IMO for exploring the AOSP tree. Remember to index the trees with the repository history information (.svn, .git, etc.) intact to be able to use the History and Annotation features. <a href=\"http://androidxref.com\" rel=\"nofollow noreferrer\">androidxref.com</a> is a great place to see OpenGrok on AOSP in action; however, newer versions of opengrok have additional features such as filetype filtering (via dropdown box)."}, {"owner": {"reputation": 1396, "user_id": 767383, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e668c580bfb6e6306d93217aa3509f7f?s=128&d=identicon&r=PG", "display_name": "Tomasz W", "link": "https://stackoverflow.com/users/767383/tomasz-w"}, "reply_to_user": {"reputation": 672, "user_id": 1895218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdCPV.png?s=128&g=1", "display_name": "odexcide", "link": "https://stackoverflow.com/users/1895218/odexcide"}, "edited": false, "score": 0, "creation_date": 1462397102, "post_id": 37035504, "comment_id": 61626638, "body": "Android M repo has a little over 700 repositories. Does that mean that I would need to index each of the 700 repositories separately? My problem with OG is mostly about the volume of junk it creates - millions of tiny files - the implications are actually observable - both in terms of space wasted and time needed by OS to access the cluttered folder.  On separate note, i don&#39;t exactly care about history, but so far my attempts to kill it with env variables have had no effect..."}, {"owner": {"reputation": 672, "user_id": 1895218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdCPV.png?s=128&g=1", "display_name": "odexcide", "link": "https://stackoverflow.com/users/1895218/odexcide"}, "edited": false, "score": 0, "creation_date": 1462463347, "post_id": 37035504, "comment_id": 61656758, "body": "I repo sync the AOSP branch and index once for all of them (usually an overnight job). It should crawl through each. If you remove all the .git dirs recursively through AOSP before you index, it may save you a decent bit of time."}], "owner": {"reputation": 1396, "user_id": 767383, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e668c580bfb6e6306d93217aa3509f7f?s=128&d=identicon&r=PG", "display_name": "Tomasz W", "link": "https://stackoverflow.com/users/767383/tomasz-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 842, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1462387763, "creation_date": 1462387172, "question_id": 37035504, "link": "https://stackoverflow.com/questions/37035504/aosp-android-source-code-indexing-tools", "title": "AOSP / Android Source code indexing tools", "body": "<p>I'm searching for tools that would allow me to index and navigate within AOSP source tree a little bit easier.</p>\n\n<p>My team works mostly at the lower level (so C and C++), but we interface with Java quite a bit. Currently we use:</p>\n\n<ul>\n<li>ack-grep,</li>\n<li>ctags,</li>\n<li>cscope.</li>\n</ul>\n\n<p>Since we're building a whole platform, we're not limited to just our code, but sometimes also need to understand better what's happening inside Android.</p>\n\n<p>I currently make an attempt to use OpenGrok -- indexing is far from being done and the log is already swollen from git warnings.</p>\n\n<p>The tools we currently use are hardly a convenient way to navigate the code. I would like to reach out for Android hackers wisdom - how do you navigate the code?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1462387641, "post_id": 37035483, "comment_id": 61621600, "body": "What is <code>myException</code>? An <code>int</code>?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1462387714, "post_id": 37035483, "comment_id": 61621643, "body": "It&#39;s like this.  You will spend, liike, 1% of your time writing code and 90% time debugging and testing.  Imagine stepping through this code and needing to check values.  Which is easiest?"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1462388035, "post_id": 37035483, "comment_id": 61621832, "body": "With MSVC 2015 it doesn&#39;t even generate any instructions for either function. It just optimizes them away completely."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1462388087, "post_id": 37035483, "comment_id": 61621863, "body": "@flatmouse, shouldn&#39;t and can&#39;t. It is an externally visible function with return value depending on input, it can&#39;t optimize it away."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1462388371, "post_id": 37035483, "comment_id": 61622037, "body": "Unless you&#39;ve travelled here from the distant past, a local primitive variable  has no cost whatsoever. Division is the more expensive operation by far, and that in turn will often be dwarfed by the branch. (A beginner&#39;s intuition about performance is usually approximately 100% wrong.)"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462388463, "post_id": 37035483, "comment_id": 61622096, "body": "@SergeyA It can, and it has. I&#39;ve posted the surprising result as an additional answer."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1462388878, "post_id": 37035483, "comment_id": 61622354, "body": "@molbdnilo, it doesn&#39;t even have to be a branch!"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1462390059, "post_id": 37035483, "comment_id": 61622973, "body": "@molbdnilo:  When you say &quot;a beginner&#39;s intuition&quot; - I have managed to intuit where the performance hotspot was in my code twice so far.  That <i>is</i> twice in 35 years!"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 6, "last_activity_date": 1462387200, "creation_date": 1462387200, "answer_id": 37035515, "question_id": 37035483, "link": "https://stackoverflow.com/questions/37035483/allocating-a-temporary-variable-or-compute-the-expression-twice/37035515#37035515", "title": "Allocating a temporary variable or compute the expression twice", "body": "<p>Use the later.</p>\n\n<ol>\n<li>You're not computing the same value twice.</li>\n<li>The code is more clear.</li>\n<li>Creating local variables on the stack doesn't take any significant amount of time.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 14, "last_activity_date": 1462387914, "last_edit_date": 1462387914, "creation_date": 1462387367, "answer_id": 37035572, "question_id": 37035483, "link": "https://stackoverflow.com/questions/37035483/allocating-a-temporary-variable-or-compute-the-expression-twice/37035572#37035572", "title": "Allocating a temporary variable or compute the expression twice", "body": "<p>Don't worry about it, write concise code and leave micro-optimizations to the compiler. </p>\n\n<p>In your example writing the same calculation twice is error prone - so do not do this. In your specific example, compiler is more than likely to avoid creating a temporary on the stack at all!</p>\n\n<p>Your example can (does on my compiler) produce following assembly (i have replaced <code>myConst</code> with <code>constexpr</code> 42 and <code>myException</code> with 0):</p>\n\n<pre><code>foo(int, int, int):\n        leal    (%rdi,%rsi), %eax       # this adds a and b, puts result to eax\n        movl    %edx, %ecx      # loads c\n        cltd\n        idivl   %ecx  # performs division, puts result into edx\n        movl    $0, %eax        #, prepares to return exception value\n        cmpl    $42, %edx       #, compares result of division with magic const\n        cmovne  %edx, %eax  # overwrites pessimized exception if all is cool\n        ret\n</code></pre>\n\n<p>As you see, there is no temporary anywhere in sight!</p>\n"}, {"tags": [], "owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "is_accepted": false, "score": 5, "last_activity_date": 1462387446, "creation_date": 1462387446, "answer_id": 37035596, "question_id": 37035483, "link": "https://stackoverflow.com/questions/37035483/allocating-a-temporary-variable-or-compute-the-expression-twice/37035596#37035596", "title": "Allocating a temporary variable or compute the expression twice", "body": "<p>Check the assembler code this generates for both versions. You most likely want the highest optimization settings for your compiler.</p>\n\n<p>You may very well find out the compiler itself can figure out the intermediate value is used twice, but only inside the function, so safe to store in a register.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1462388133, "post_id": 37035717, "comment_id": 61621892, "body": "I like the &#39;less posts on SO&#39; as a valid reason to go with a better code!"}], "tags": [], "owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "is_accepted": false, "score": 4, "last_activity_date": 1462387919, "creation_date": 1462387919, "answer_id": 37035717, "question_id": 37035483, "link": "https://stackoverflow.com/questions/37035483/allocating-a-temporary-variable-or-compute-the-expression-twice/37035717#37035717", "title": "Allocating a temporary variable or compute the expression twice", "body": "<p>To add to what has already been posted, ease of debugging is at least as important as code efficiency, (if there is any effect on code efficiency which, as others have posted, is unlikely with optimization on).</p>\n\n<p>Go with the easiest to follow, test and debug.</p>\n\n<p>Use a temp var.</p>\n\n<p>If more developers used simpler, non-compound expressions and more temp vars, there would be far fewer 'Help - I cannot debug my code!' posts to SO.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1462388603, "post_id": 37035861, "comment_id": 61622186, "body": "Never put <code>main()</code> (or compile into executable) when you want to test function-specific optimizations. It is going to inline aggressively, and shortcut all evaluations. If you must use <code>main()</code>, make sure to pass arguments of main to your check function, but better yet just not have it and compile into .o"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462389051, "post_id": 37035861, "comment_id": 61622434, "body": "@SergeyA Even if I pass the arguments it still optimizes the functions away. I understand to call from another compilation unit it will be forced to do without the full optimization. Either way I think this supports the argument that it is not worth a programmer&#39;s time to worry about this."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1462389271, "post_id": 37035861, "comment_id": 61622565, "body": "Where does OP say he calls the function with hard-coded values? If that were so, why would you need a function to do it, or the compiler to optimise the function away? Did you mean that the compiler effectively converts the function to <code>inline</code>?"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1462389747, "post_id": 37035861, "comment_id": 61622823, "body": "@WeatherVane With hardcoded values it is not even inlined. It&#39;s optimized away completely."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1462389985, "post_id": 37035861, "comment_id": 61622943, "body": "What was the point of that then? OP says nothing about hardcoded values, possibly except for <code>myConst</code>. Are you answering a question that was not asked? Please input the values from a keyboard at runtime, not in the source code that a smart compiler can detect."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1462391034, "post_id": 37035861, "comment_id": 61623478, "body": "@WeatherVane True, this doesn&#39;t show the general case."}], "tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": false, "score": 0, "last_activity_date": 1462391163, "last_edit_date": 1462391163, "creation_date": 1462388379, "answer_id": 37035861, "question_id": 37035483, "link": "https://stackoverflow.com/questions/37035483/allocating-a-temporary-variable-or-compute-the-expression-twice/37035861#37035861", "title": "Allocating a temporary variable or compute the expression twice", "body": "<h2>Hard coded values</h2>\n\n<p>The following only applies to hard coded values (even if they aren't <code>const</code> or <code>constexpr</code>)</p>\n\n<p>In the following example on MSVC 2015 they were optimized away completely and replaced only with <code>mov edx, result</code> (=1 in this example):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;exception&gt;\n\nint myConst{4};\nint myException{2};\n\nint foo1(int a,int b,int c)\n{\n    return (((a + b) % c) != myConst) ? (a + b) % c : myException;\n}\n\nint foo2(int a,int b,int c)\n{\n    int tmp = (a + b) % c;\n    return (tmp != myConst) ? tmp : myException;\n}\n\nint main()\n{\n00007FF71F0E1000 48 83 EC 28          sub         rsp,28h  \n    auto test1{foo1(5,2,3)};\n    auto test2{foo2(5,2,3)};\n\n    std::cout &lt;&lt; test1 &lt;&lt;'\\n';\n00007FF71F0E1004 48 8B 0D 75 20 00 00 mov         rcx,qword ptr [__imp_std::cout (07FF71F0E3080h)]  \n00007FF71F0E100B BA 01 00 00 00       mov         edx,1  \n00007FF71F0E1010 FF 15 72 20 00 00    call        qword ptr [__imp_std::basic_ostream&lt;char,std::char_traits&lt;char&gt; &gt;::operator&lt;&lt; (07FF71F0E3088h)]  \n00007FF71F0E1016 48 8B C8             mov         rcx,rax  \n00007FF71F0E1019 E8 B2 00 00 00       call        std::operator&lt;&lt;&lt;std::char_traits&lt;char&gt; &gt; (07FF71F0E10D0h)  \n    std::cout &lt;&lt; test2 &lt;&lt;'\\n';\n00007FF71F0E101E 48 8B 0D 5B 20 00 00 mov         rcx,qword ptr [__imp_std::cout (07FF71F0E3080h)]  \n00007FF71F0E1025 BA 01 00 00 00       mov         edx,1  \n00007FF71F0E102A FF 15 58 20 00 00    call        qword ptr [__imp_std::basic_ostream&lt;char,std::char_traits&lt;char&gt; &gt;::operator&lt;&lt; (07FF71F0E3088h)]  \n00007FF71F0E1030 48 8B C8             mov         rcx,rax  \n00007FF71F0E1033 E8 98 00 00 00       call        std::operator&lt;&lt;&lt;std::char_traits&lt;char&gt; &gt; (07FF71F0E10D0h)  \n\n\n    return 0;\n00007FF71F0E1038 33 C0                xor         eax,eax  \n}\n00007FF71F0E103A 48 83 C4 28          add         rsp,28h  \n00007FF71F0E103E C3                   ret  \n</code></pre>\n\n<p>At this point other have pointed out that the optimization will not happen if the values were passed, or if we had separate files, but it seems even if the code is in separate compilation units the optimization is still done and we don't get any instructions for these functions:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;exception&gt;\n\n\n#include \"Header.h\"\n\nint main()\n{\n00007FF667BF1000 48 83 EC 28          sub         rsp,28h  \n    int var1{5},var2{2},var3{3};\n    auto test1{foo1(var1,var2,var3)};\n    auto test2{foo2(var1,var2,var3)};\n\n    std::cout &lt;&lt; test1 &lt;&lt;'\\n';\n00007FF667BF1004 48 8B 0D 75 20 00 00 mov         rcx,qword ptr [__imp_std::cout (07FF667BF3080h)]  \n00007FF667BF100B BA 01 00 00 00       mov         edx,1  \n00007FF667BF1010 FF 15 72 20 00 00    call        qword ptr [__imp_std::basic_ostream&lt;char,std::char_traits&lt;char&gt; &gt;::operator&lt;&lt; (07FF667BF3088h)]  \n00007FF667BF1016 48 8B C8             mov         rcx,rax  \n00007FF667BF1019 E8 B2 00 00 00       call        std::operator&lt;&lt;&lt;std::char_traits&lt;char&gt; &gt; (07FF667BF10D0h)  \n    std::cout &lt;&lt; test2 &lt;&lt;'\\n';\n00007FF667BF101E 48 8B 0D 5B 20 00 00 mov         rcx,qword ptr [__imp_std::cout (07FF667BF3080h)]  \n00007FF667BF1025 BA 01 00 00 00       mov         edx,1  \n00007FF667BF102A FF 15 58 20 00 00    call        qword ptr [__imp_std::basic_ostream&lt;char,std::char_traits&lt;char&gt; &gt;::operator&lt;&lt; (07FF667BF3088h)]  \n00007FF667BF1030 48 8B C8             mov         rcx,rax  \n00007FF667BF1033 E8 98 00 00 00       call        std::operator&lt;&lt;&lt;std::char_traits&lt;char&gt; &gt; (07FF667BF10D0h)  \n\n\n    return 0;\n00007FF667BF1038 33 C0                xor         eax,eax  \n}\n00007FF667BF103A 48 83 C4 28          add         rsp,28h  \n00007FF667BF103E C3                   ret  \n</code></pre>\n"}], "owner": {"reputation": 684, "user_id": 3281352, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4174ed63dead565d6beaef12fc2ad03a?s=128&d=identicon&r=PG&f=1", "display_name": "Tandura", "link": "https://stackoverflow.com/users/3281352/tandura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "closed_date": 1605968794, "accepted_answer_id": 37035572, "answer_count": 5, "score": 5, "last_activity_date": 1488817683, "creation_date": 1462387110, "last_edit_date": 1488817683, "question_id": 37035483, "link": "https://stackoverflow.com/questions/37035483/allocating-a-temporary-variable-or-compute-the-expression-twice", "closed_reason": "Duplicate", "title": "Allocating a temporary variable or compute the expression twice", "body": "<p>I am trying to write a code as efficient as possible and I encountered the following situation:  </p>\n\n<pre><code>int foo(int a, int b, int c) \n{\n    return (a + b) % c; \n}\n</code></pre>\n\n<p>All good! But what if I want to check if the result of the expression to be different of a constant lets say <code>myConst</code>. Lets say I can afford a temporary variable. </p>\n\n<p>What method is the fastest of the following:</p>\n\n<pre><code>int foo(int a, int b, int c) \n{\n    return (((a + b) % c) != myConst) ? (a + b) % c : myException; \n} \n</code></pre>\n\n<p>or</p>\n\n<pre><code>int foo(int a, int b, int c) \n{\n    int tmp = (a + b) % c\n    return (tmp != myConst) ? tmp : myException; \n}\n</code></pre>\n\n<p>I can't decide. Where is the 'line' where recalculation is more expensive than allocating and deallocating a temporary variable or the other way around.</p>\n"}, {"tags": ["c++", "lvalue"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1462386570, "post_id": 37035316, "comment_id": 61620923, "body": "What do you expect <code>Hitcount += Br;</code> to do?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1462386622, "post_id": 37035316, "comment_id": 61620959, "body": "First of all, your comments are misleading. It is a 128-byte array buffer. Second of all, if you want to append something to the array, you need to change the value of a certain element of it, not increment the array object itself - it is meaningless operation."}, {"owner": {"reputation": 61, "user_id": 6157718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b17207a59f94dec91406f3edc346ef6?s=128&d=identicon&r=PG&f=1", "display_name": "LegitimateWorkUser", "link": "https://stackoverflow.com/users/6157718/legitimateworkuser"}, "edited": false, "score": 0, "creation_date": 1462386661, "post_id": 37035316, "comment_id": 61620982, "body": "To append Br to the array Hitcount, as described here:  <a href=\"https://www.arduino.cc/en/Tutorial/StringAppendOperator\" rel=\"nofollow noreferrer\">arduino.cc/en/Tutorial/StringAppendOperator</a>"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1462386714, "post_id": 37035316, "comment_id": 61621028, "body": "...strings aren&#39;t c-style arrays"}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 0, "creation_date": 1462386715, "post_id": 37035316, "comment_id": 61621029, "body": "the name of a static array evaluates to the address of the array which is not an lvalue, as the compiler is trying to point that out with an error."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462386723, "post_id": 37035316, "comment_id": 61621033, "body": "In the example you&#39;ve provided, it is Sring object which is being appended to, not C-style array of uint16_t elements..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462386750, "post_id": 37035316, "comment_id": 61621045, "body": "@LegitimateWorkUser An array is not a string.  I suggest you consult the <a href=\"http://en.cppreference.com/w/cpp/language/array\" rel=\"nofollow noreferrer\">documentation</a> on how arrays work."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 1, "creation_date": 1462386754, "post_id": 37035316, "comment_id": 61621050, "body": "@bkVnet, it does not evaluate to it. It decays to it in certain contexts."}, {"owner": {"reputation": 61, "user_id": 6157718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b17207a59f94dec91406f3edc346ef6?s=128&d=identicon&r=PG&f=1", "display_name": "LegitimateWorkUser", "link": "https://stackoverflow.com/users/6157718/legitimateworkuser"}, "edited": false, "score": 0, "creation_date": 1462386787, "post_id": 37035316, "comment_id": 61621072, "body": "Downvotes? Wow, I should not have asked."}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462386838, "post_id": 37035316, "comment_id": 61621108, "body": "@SergeyA Probably a wrong wording from my side, but even so isn&#39;t that going to be a prvalue in this context?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 0, "creation_date": 1462387017, "post_id": 37035316, "comment_id": 61621217, "body": "@bkVnet, it is a prvalue indeed. However, it is not an address of this array. As a matter of fact, be it the address of the array, it would be incrementable! :)"}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462387097, "post_id": 37035316, "comment_id": 61621259, "body": "@SergeyA Got you!! Oh, the irony!! :)"}, {"owner": {"reputation": 61, "user_id": 6157718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b17207a59f94dec91406f3edc346ef6?s=128&d=identicon&r=PG&f=1", "display_name": "LegitimateWorkUser", "link": "https://stackoverflow.com/users/6157718/legitimateworkuser"}, "edited": false, "score": 0, "creation_date": 1462388013, "post_id": 37035316, "comment_id": 61621819, "body": "Thanks everybody. My degree is not in CS, so I appreciate being set straight. Most of my experience with arrays comes from mathematica, which is more flexible when it comes to lists and vectors."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6157718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b17207a59f94dec91406f3edc346ef6?s=128&d=identicon&r=PG&f=1", "display_name": "LegitimateWorkUser", "link": "https://stackoverflow.com/users/6157718/legitimateworkuser"}, "edited": false, "score": 0, "creation_date": 1462387156, "post_id": 37035377, "comment_id": 61621291, "body": "Thaanks, I didn&#39;t realize += was for string arrays only. It would be easy to track the elements and append by their count numbers. I&#39;ll do that."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 61, "user_id": 6157718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b17207a59f94dec91406f3edc346ef6?s=128&d=identicon&r=PG&f=1", "display_name": "LegitimateWorkUser", "link": "https://stackoverflow.com/users/6157718/legitimateworkuser"}, "edited": false, "score": 0, "creation_date": 1462387709, "post_id": 37035377, "comment_id": 61621640, "body": "@LegitimateWorkUser C style string array is <code>char str[size]</code> and would have exactly the same issue. What you mention is C++ object <code>std::string</code>which is not string array but an object, so <code>std::vector</code> is an object as well and has functionality to dynamically add elements etc."}, {"owner": {"reputation": 61, "user_id": 6157718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b17207a59f94dec91406f3edc346ef6?s=128&d=identicon&r=PG&f=1", "display_name": "LegitimateWorkUser", "link": "https://stackoverflow.com/users/6157718/legitimateworkuser"}, "edited": false, "score": 0, "creation_date": 1462387808, "post_id": 37035377, "comment_id": 61621700, "body": "Thanks, Slava. I&#39;m using std:: &lt;vector&gt; now and it&#39;s already working."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 5, "last_activity_date": 1462386742, "creation_date": 1462386742, "answer_id": 37035377, "question_id": 37035316, "link": "https://stackoverflow.com/questions/37035316/expression-must-be-a-modifiable-lvalue-when-attempting-to-append-to-an-array/37035377#37035377", "title": "Expression must be a modifiable lvalue (when attempting to append to an array)", "body": "<pre><code>Hitcount += Br;\n</code></pre>\n\n<p>You cannot add value to a C style array like that. You either need to maintain elements count and add a value like this:</p>\n\n<pre><code>Hitcount[count++] = Br;\n</code></pre>\n\n<p>or you better use <code>std::vector</code> and add element by calling <code>push_back</code>:</p>\n\n<pre><code>std::vector&lt;uint16_t&gt; Hitcount;\n// code skipped\nHitcount.push_back( Br );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 6157718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b17207a59f94dec91406f3edc346ef6?s=128&d=identicon&r=PG&f=1", "display_name": "LegitimateWorkUser", "link": "https://stackoverflow.com/users/6157718/legitimateworkuser"}, "edited": false, "score": 0, "creation_date": 1462387881, "post_id": 37035378, "comment_id": 61621748, "body": "Yes, this is working for me now. I certainly appreciate it."}], "tags": [], "owner": {"reputation": 4956, "user_id": 4356889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Le2lz.png?s=128&g=1", "display_name": "szym", "link": "https://stackoverflow.com/users/4356889/szym"}, "is_accepted": false, "score": 1, "last_activity_date": 1462386745, "creation_date": 1462386745, "answer_id": 37035378, "question_id": 37035316, "link": "https://stackoverflow.com/questions/37035316/expression-must-be-a-modifiable-lvalue-when-attempting-to-append-to-an-array/37035378#37035378", "title": "Expression must be a modifiable lvalue (when attempting to append to an array)", "body": "<p>Plain C/C++ arrays cannot be extended the way <code>string</code> objects can. Look into using <code>std::vector</code>.</p>\n"}], "owner": {"reputation": 61, "user_id": 6157718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b17207a59f94dec91406f3edc346ef6?s=128&d=identicon&r=PG&f=1", "display_name": "LegitimateWorkUser", "link": "https://stackoverflow.com/users/6157718/legitimateworkuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 668, "favorite_count": 0, "accepted_answer_id": 37035377, "answer_count": 2, "score": -1, "last_activity_date": 1462386745, "creation_date": 1462386510, "question_id": 37035316, "link": "https://stackoverflow.com/questions/37035316/expression-must-be-a-modifiable-lvalue-when-attempting-to-append-to-an-array", "title": "Expression must be a modifiable lvalue (when attempting to append to an array)", "body": "<p>I have the following:    </p>\n\n<pre><code>uint16_t Hitcount[64]; //64-byte array buffer \nuint16_t Br; \nint StdWidth = 38;\nint widthpad = 8;\nint W;\nuint16_t blocks;\n\n\nif (W &lt;= (StdWidth + widthpad) &amp;&amp; W &gt;= (StdWidth - widthpad) &amp;&amp; blocks == 1) {\n        Hitcount += Br;\n    }\n</code></pre>\n\n<p>My goal is to appenf \"Br\" to the array \"Hitcount\" if \"W\" is within a certain range. However, \"Hitcount\" is indicating the error \"Expression must be a modifiable lvalue\". Don't I have my data types and everything in order? </p>\n\n<p>Apologies if this is too close to other questions that have been posted. I looked at them but could not relate them to this scenario with my limited knowledge. </p>\n"}, {"tags": ["c++", "forms", "qt"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1462386977, "post_id": 37035272, "comment_id": 61621196, "body": "This is done in <code>Qt</code> using signals and slots. Emit a signal on the first form <code>ageChanged(int)</code> connecting that to a slot <code>ageChanged(int)</code> in the second form."}], "answers": [{"tags": [], "owner": {"reputation": 1413, "user_id": 3008506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ErOCN.jpg?s=128&g=1", "display_name": "Lucas Araujo", "link": "https://stackoverflow.com/users/3008506/lucas-araujo"}, "is_accepted": false, "score": 4, "last_activity_date": 1462454972, "last_edit_date": 1462454972, "creation_date": 1462399611, "answer_id": 37038901, "question_id": 37035272, "link": "https://stackoverflow.com/questions/37035272/passing-variable-between-2-forms-qt/37038901#37038901", "title": "Passing Variable between 2 Forms QT", "body": "<p>For communication between objects, Qt has a mechanism called <a href=\"http://doc.qt.io/qt-5/signalsandslots.html\" rel=\"nofollow noreferrer\">Signals and Slots</a>.</p>\n\n<p>Here is a example of how you can use signals and slots:</p>\n\n<p>In this example I will use spinboxes to visually represent the variable(age) that you mentioned.</p>\n\n<p><strong>1. Open Receive form</strong></p>\n\n<p>In Send, create the button that will open the receive form.</p>\n\n<p>send.h</p>\n\n<pre><code>public:\n    QPushButton *pushButton;\n</code></pre>\n\n<p>send.cpp</p>\n\n<pre><code>   pushButton = ui-&gt;pushButtonSend;\n</code></pre>\n\n<p>Now create a slot in mainwindow to show receive form.</p>\n\n<p>mainwindow.cpp</p>\n\n<pre><code>void MainWindow::showReceiveForm()\n{\n    receiveForm-&gt;show();\n}\n</code></pre>\n\n<p>mainwindow.h</p>\n\n<pre><code>private slots:\n    void showReceiveForm();\n</code></pre>\n\n<p>Now connect clicked signal from the push button to the slot in mainwindow.cpp. This will call the slot function everytime the button is clicked.</p>\n\n<pre><code>connect(sendForm-&gt;pushButton,SIGNAL(clicked()),this,SLOT(showReceiveForm()));\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Hb9Au.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hb9Au.gif\" alt=\"enter image description here\"></a>\n<strong>2. Send Age value</strong></p>\n\n<p>To send the age value to receive form, whenever it's value is changed in send form, connect the valueChanged signal from the <a href=\"http://doc.qt.io/qt-5/qspinbox.html#valueChanged\" rel=\"nofollow noreferrer\">QSpinBox</a> in send form to a slot in receive form.</p>\n\n<p>send.h:</p>\n\n<pre><code>public:\n    QSpinBox *spinBox;\n</code></pre>\n\n<p>send.cpp</p>\n\n<pre><code>   spinBox = ui-&gt;spinBoxSend;\n</code></pre>\n\n<p>Slot in receive.cpp:</p>\n\n<pre><code>void Receive::receiveAge(int age)\n{\n   ui-&gt;spinBoxReceive-&gt;setValue(age);\n}\n</code></pre>\n\n<p>Now connect signal and slot in mainwindow.cpp.</p>\n\n<pre><code>connect(sendForm-&gt;spinBox,SIGNAL(valueChanged(int)),receiveForm,SLOT(receiveAge(int)));\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/nUhJS.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nUhJS.gif\" alt=\"enter image description here\"></a></p>\n\n<p>In this example, I used predefined signals from QPushButton and QSpinBox, but you can create your own signals and emit them whenever. </p>\n\n<p>Define custom signals in the header files:</p>\n\n<pre><code>signals:\n    void exampleSignal(int someArgument);\n</code></pre>\n\n<p>And emit them with the \"emit\" keyword.</p>\n\n<pre><code>emit exampleSignal(somenumber);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6292272, "user_type": "registered", "profile_image": "https://graph.facebook.com/678341948975077/picture?type=large", "display_name": "Amine Mokhtari", "link": "https://stackoverflow.com/users/6292272/amine-mokhtari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3023, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1478972192, "creation_date": 1462386390, "question_id": 37035272, "link": "https://stackoverflow.com/questions/37035272/passing-variable-between-2-forms-qt", "title": "Passing Variable between 2 Forms QT", "body": "<p>i'm a beginner so if it possible explain to me how to pass variable between 2 forms for example:\ni have the first Form called : Send.ui - send.cpp - send.h\nand the second form called : Receive.ui - receive.cpp - receive.h</p>\n\n<p>we gonna suppose that i have a variable called age=25 in Send.cpp and a push button</p>\n\n<p>i want that when i press the push button he will open the second form Receive.ui and i will have a variable in this second form age=25</p>\n\n<p>that's meen if i change the variable in the Send.cpp he will be automatically changed in Receive.cpp</p>\n\n<p>and thanks in advence </p>\n"}, {"tags": ["c++", "mfc", "clistctrl"], "answers": [{"tags": [], "owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1462391095, "creation_date": 1462391095, "answer_id": 37036679, "question_id": 37035177, "link": "https://stackoverflow.com/questions/37035177/why-clistctrl-update-not-necessary-in-the-example-below/37036679#37036679", "title": "Why CListCtrl Update() not necessary in the example below?", "body": "<p>How can you answer question <code>Why X is true?</code> if <code>X</code> is false???</p>\n\n<p>When you set some item's text - the list control invalidates the corresponding area; eventually, when it comes to painting - it will redraw the new text.</p>\n\n<p>According to <a href=\"https://msdn.microsoft.com/en-us/library/k6y18z6a.aspx\" rel=\"nofollow\">MSDN (CListCtrl::Update)</a>:</p>\n\n<blockquote>\n  <p>Forces the list view control to repaint the item specified by nItem.</p>\n</blockquote>\n\n<p>So you can see the result immediately.</p>\n"}, {"tags": [], "owner": {"reputation": 1723, "user_id": 2073217, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/066bde403e2c8cac1c76af6a35ad81d9?s=128&d=identicon&r=PG", "display_name": "David Ching", "link": "https://stackoverflow.com/users/2073217/david-ching"}, "is_accepted": true, "score": 4, "last_activity_date": 1462392848, "creation_date": 1462392848, "answer_id": 37037192, "question_id": 37035177, "link": "https://stackoverflow.com/questions/37035177/why-clistctrl-update-not-necessary-in-the-example-below/37037192#37037192", "title": "Why CListCtrl Update() not necessary in the example below?", "body": "<p><code>Update</code> causes the change to be put on the screen immediately.  If you don't call it, Windows automatically puts the change on the screen when your message loop next runs (after your <code>MyFunction</code> exits).  This is why you need to call it to see \"Start\", before you change it to \"End\".  Windows automatically updates it to \"End\" when your function exits.</p>\n"}], "owner": {"reputation": 43, "user_id": 2832424, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a2559b81931d8227eede8f27f640fbf5?s=128&d=identicon&r=PG&f=1", "display_name": "user2832424", "link": "https://stackoverflow.com/users/2832424/user2832424"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 816, "favorite_count": 0, "accepted_answer_id": 37037192, "answer_count": 2, "score": 2, "last_activity_date": 1462392848, "creation_date": 1462386054, "last_edit_date": 1462386429, "question_id": 37035177, "link": "https://stackoverflow.com/questions/37035177/why-clistctrl-update-not-necessary-in-the-example-below", "title": "Why CListCtrl Update() not necessary in the example below?", "body": "<p>In the code below the ListCtrl will <strong>not</strong> update the item if i do not use \"Update()\" after the <strong>first</strong> \"If\" conditon but <strong>will update even if there is no \"Update()\" method called after the Second \"If\" conditon</strong>. Why is this? I'm just curious to know when Update() is necessary and when it is not!</p>\n\n<pre><code>   class MyDialog()\n   {\n    public:\n         void MyFunction();\n    private:\n      CListCtrl myListControl;\n   }\n\n   void MyDialog::Myfunction()\n   {\n       bool bCondition;\n       for (auto i = 0, i &lt; myListControl.GetItemCount(); ++i)\n       {\n         auto n  = myListControl.SetItemText(i, 1, \"Start\");\n         if (n)\n           myListControl.Update(i);\n         /*Update() is required here */\n\n         EvaluateCondition( bConditon);\n\n         if(bConditon)\n            myListControl.SetItemText(i, 1, \"End\");\n         /* Why is Update() ***Not*** required here? */\n       }\n }\n</code></pre>\n"}, {"tags": ["c++", "qt"], "owner": {"reputation": 41, "user_id": 6292184, "user_type": "registered", "profile_image": "https://graph.facebook.com/1220383717986840/picture?type=large", "display_name": "Stanly Thomas", "link": "https://stackoverflow.com/users/6292184/stanly-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1462385396, "creation_date": 1462385396, "question_id": 37035005, "link": "https://stackoverflow.com/questions/37035005/align-and-pad-two-similar-text-files-for-text-comparison", "title": "Align and pad two similar text files for text comparison", "body": "<p>I've to compare and highlight differences between two similar text files. I'm using QT 4.8 on VC2010 and C++ as programming language. After researching, I've found google <a href=\"https://code.google.com/p/google-diff-match-patch/.\" rel=\"nofollow\">diff-match-patch library</a> which is available in QT platform.</p>\n\n<p>I've been trying to align both the text files so that similar lines appear on the same line. Padding needs to be added by adding newline wherever appropriate on either left or right text. </p>\n\n<p>Please suggest the best way based on diff match patch library and QT.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462385402, "post_id": 37034999, "comment_id": 61620192, "body": "Provide a <b><a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a></b> please. Include any error messages (compile time or runtime) into your question. For linker errors provide your linker command line please (otherwise if you even don&#39;t know refer to <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a> 1st). Also provide us with your observations for runtime errors, when you run your code in the debugger and  stepping through every single line."}, {"owner": {"reputation": 429, "user_id": 6229026, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/o3HjY.jpg?s=128&g=1", "display_name": "Abhishek Panjabi", "link": "https://stackoverflow.com/users/6229026/abhishek-panjabi"}, "edited": false, "score": 0, "creation_date": 1462385722, "post_id": 37034999, "comment_id": 61620411, "body": "You want to store a whole line in array a ? Or a single character ? Bcoz your are reading using getline and passing a single character to store the value ."}, {"owner": {"reputation": 71, "user_id": 5584112, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3b83234f67b33e774702eca974d803ec?s=128&d=identicon&r=PG&f=1", "display_name": "Thecube", "link": "https://stackoverflow.com/users/5584112/thecube"}, "edited": false, "score": 0, "creation_date": 1462385814, "post_id": 37034999, "comment_id": 61620472, "body": "The textfile is in a format of xxx/xxx/xxx/xxx, with multiple rows, I want an array to store a whole column each"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 429, "user_id": 6229026, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/o3HjY.jpg?s=128&g=1", "display_name": "Abhishek Panjabi", "link": "https://stackoverflow.com/users/6229026/abhishek-panjabi"}, "edited": false, "score": 0, "creation_date": 1462386069, "post_id": 37034999, "comment_id": 61620614, "body": "@AbhishekPanjabi That is incorrect.  <code>a</code> is an array of <code>std::string</code>s so <code>a[i]</code> is a single string which is what <code>getline</code> needs.  <code>a[i][j]</code> would be a single character."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 5584112, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3b83234f67b33e774702eca974d803ec?s=128&d=identicon&r=PG&f=1", "display_name": "Thecube", "link": "https://stackoverflow.com/users/5584112/thecube"}, "edited": false, "score": 0, "creation_date": 1462387121, "post_id": 37035109, "comment_id": 61621273, "body": "I have tried removing the original counter loop, and the for loop with <code>while(! openfile.eof()){</code>, then using the new while loop you suggested, but still am getting nothing output on the screen."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 71, "user_id": 5584112, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3b83234f67b33e774702eca974d803ec?s=128&d=identicon&r=PG&f=1", "display_name": "Thecube", "link": "https://stackoverflow.com/users/5584112/thecube"}, "edited": false, "score": 0, "creation_date": 1462387241, "post_id": 37035109, "comment_id": 61621348, "body": "@Thecube Is <a href=\"http://coliru.stacked-crooked.com/a/3465d79242b88dff\" rel=\"nofollow noreferrer\">this</a> how your code looks now?"}, {"owner": {"reputation": 71, "user_id": 5584112, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3b83234f67b33e774702eca974d803ec?s=128&d=identicon&r=PG&f=1", "display_name": "Thecube", "link": "https://stackoverflow.com/users/5584112/thecube"}, "edited": false, "score": 0, "creation_date": 1462387651, "post_id": 37035109, "comment_id": 61621608, "body": "Code looks the same, <code>while(getline( openFile, a[i], &#39;&#47;&#39;) &amp;&amp; getline( openFile, b[i], &#39;&#47;&#39;) &amp;&amp;       getline( openFile, c[i], &#39;&#47;&#39;) &amp;&amp; getline( openFile, d[i])){     counter++; }</code> has a problem where i has not be declared, which is where i used a for loop previously"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 71, "user_id": 5584112, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3b83234f67b33e774702eca974d803ec?s=128&d=identicon&r=PG&f=1", "display_name": "Thecube", "link": "https://stackoverflow.com/users/5584112/thecube"}, "edited": false, "score": 0, "creation_date": 1462387776, "post_id": 37035109, "comment_id": 61621682, "body": "@Thecube durp.  I got rid of <code>i</code>.  all those instances of <code>i</code> should be <code>counter</code>.  I updated the answer."}, {"owner": {"reputation": 71, "user_id": 5584112, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3b83234f67b33e774702eca974d803ec?s=128&d=identicon&r=PG&f=1", "display_name": "Thecube", "link": "https://stackoverflow.com/users/5584112/thecube"}, "edited": false, "score": 0, "creation_date": 1462388340, "post_id": 37035109, "comment_id": 61622027, "body": "Was looking through code and couldn&#39;t figure what I hadn&#39;t change, it is now working thanks for the help."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1462387735, "last_edit_date": 1462387735, "creation_date": 1462385799, "answer_id": 37035109, "question_id": 37034999, "link": "https://stackoverflow.com/questions/37034999/using-getline-in-loop-storing-to-an-array/37035109#37035109", "title": "Using getline in loop, storing to an array", "body": "<p>The problem is you are at the end of the file when you go to actually store the data.</p>\n\n<pre><code>while(getline(openFile, line)){\n    ++counter;\n}\n</code></pre>\n\n<p>Reads the file all the way to the end and then sets the EOF flag on the string.  Then you get to</p>\n\n<pre><code>while(! openFile.eof()){\n     for(int i = 0; i &lt; counter; i++){\n        getline( openFile, a[i], '/');\n        getline( openFile, b[i], '/');\n        getline( openFile, c[i], '/');\n        getline( openFile, d[i]);\n    }\n}\n</code></pre>\n\n<p>And since the EOF flag is set the while loop is never executed.  Since all you really need counter for is the the display loop at the end we can combine the counter loop and the reading loop into one loop like</p>\n\n<pre><code>while(getline( openFile, a[counter], '/') &amp;&amp; getline( openFile, b[counter], '/') &amp;&amp;\n      getline( openFile, c[counter], '/') &amp;&amp; getline( openFile, d[counter])){\n    counter++;\n}\n</code></pre>\n\n<p>And now we read in the full file and get a count of the number of lines read.</p>\n"}], "owner": {"reputation": 71, "user_id": 5584112, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3b83234f67b33e774702eca974d803ec?s=128&d=identicon&r=PG&f=1", "display_name": "Thecube", "link": "https://stackoverflow.com/users/5584112/thecube"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1044, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462387735, "creation_date": 1462385359, "question_id": 37034999, "link": "https://stackoverflow.com/questions/37034999/using-getline-in-loop-storing-to-an-array", "title": "Using getline in loop, storing to an array", "body": "<p>Using getline to store information, I want to have an array which store a whole column in a text file, using a <code>'/'</code> as the delimiter, but when creating a loop which goes through the first line and stores that in <code>a[i]</code> etc, then moves onto the next line.`</p>\n\n<pre><code>const int MAX = 20;\nint main(){\n\n    string menuname;\n    string a[MAX];\n    string d[MAX];\n    string b[MAX];\n    string c[MAX];\n    string line;\n    bool error = false;\n    ifstream openFile;\n    int counter = 0;\n\n    do{\n        cout  &lt;&lt; \"Please enter the name of the menu you would like to open: \";\n        cin &gt;&gt; menuname;\n        menuname +=  \".txt\";\n        openFile.open(menuname.c_str());\n        if(openFile.fail()){\n            cerr &lt;&lt; \"Unable to open file, please re-enter the name.\\n\";\n            error = true;\n        }\n    //Determine how many lines long the text file is\n        while(getline(openFile, line)){\n            ++counter;\n        }\n       //Testing the counter\n    cout &lt;&lt; counter;\n    }while(error == true);\n\n    while(! openFile.eof()){\n         for(int i = 0; i &lt; counter; i++){\n            getline( openFile, a[i], '/');\n            getline( openFile, b[i], '/');\n            getline( openFile, c[i], '/');\n            getline( openFile, d[i]);\n        }\n    }\n    for(int i = 0; i &lt; counter; i++){\n        cout &lt;&lt; a[i] &lt;&lt; b[i];\n    }\n}\n</code></pre>\n\n<p>There is currently no errors when i run the program, and I have tested the counter variable by just showing an output, which is working correctly, but at the bottom of the program I have created a small test which should print some 2 of the arrays I store, but it prints nothing and the program just ends after displaying the value of counter.</p>\n"}, {"tags": ["c++", "performance", "matlab", "transform", "fft"], "comments": [{"owner": {"reputation": 1006, "user_id": 1627585, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/71e0036ad69d81de092d2b1aa528e684?s=128&d=identicon&r=PG", "display_name": "Matthias W.", "link": "https://stackoverflow.com/users/1627585/matthias-w"}, "edited": false, "score": 2, "creation_date": 1462385407, "post_id": 37034976, "comment_id": 61620197, "body": "Hi and welcome to SO. Two possible approaches: try to understand the code and see if it does similar calculation steps. Second approach: try  numerical equivalent testing. I.e. feed in test data and compare the outputs."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 2, "creation_date": 1462385580, "post_id": 37034976, "comment_id": 61620310, "body": "If you know how to call C++ functions, then you already know how to use it. The comments at the top tell you what inputs are expected.  Also, as for your question of &quot;equivalent&quot;, they would be numerically equivalent but the process of computing the FFT is not the same. <code>fft</code> uses FFTW, which uses the radix decomposition to achieve faster runtimes."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1462385596, "post_id": 37034976, "comment_id": 61620326, "body": "A standard would be the <a href=\"http://www.fftw.org\" rel=\"nofollow noreferrer\">fftw library</a>. In your searches, it helps to favor tested, documented and widely used libraries."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462385608, "post_id": 37034976, "comment_id": 61620331, "body": "You&#39;d have more luck here with C++ experts if you start by explaining what FFT is supposed to do in Matlab. Not everybody here knows that."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1462385652, "post_id": 37034976, "comment_id": 61620367, "body": "It&#39;s impossible for anyone to tell you &quot;how&quot; to use it since we don&#39;t know in what form are your inputs."}, {"owner": {"reputation": 11, "user_id": 6292205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4475e26426ff0175641051edfa87c1?s=128&d=identicon&r=PG&f=1", "display_name": "LaGabriella", "link": "https://stackoverflow.com/users/6292205/lagabriella"}, "edited": false, "score": 0, "creation_date": 1462386684, "post_id": 37034976, "comment_id": 61621009, "body": "Thank you for your help. I will follow your advice by making some test on real data. I am a beginner in C++ , I coded several small project but I sometimes get stuck. Here, for instance, I would expect a type Complex as output. Ok for the input, I guess I will be able to take real and imag part of my complex numbers. My input is a vector of complexe numbers."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1462388106, "post_id": 37034976, "comment_id": 61621870, "body": "@LaGabriella If you want to use this code untouched, you can perhaps access your vector and declare new <code>double</code> arrays that split up the real and imaginary components and use this function. If you really want to get it working with your code, modify the above function so that it works with an input vector of complex numbers instead.  That way you simply have to provide the vector and let the algorithm do the rest. You may also want to return a vector that contains the transformed result or mutate the input to reflect this information (that&#39;s what the code currently does)."}, {"owner": {"reputation": 11, "user_id": 6292205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4475e26426ff0175641051edfa87c1?s=128&d=identicon&r=PG&f=1", "display_name": "LaGabriella", "link": "https://stackoverflow.com/users/6292205/lagabriella"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1462403485, "post_id": 37034976, "comment_id": 61629038, "body": "@rayryeng ,thank you for your answer. Actually, what i didn t understand is the output type. Why &quot;short &quot;?  In the description, it is written &quot;complex to complex&quot; .. Also, is this code seems helpful : <a href=\"http://stackoverflow.com/questions/10121574/safe-and-fast-fft\">stackoverflow.com/questions/10121574/safe-and-fast-fft</a>  ?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6292205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4475e26426ff0175641051edfa87c1?s=128&d=identicon&r=PG&f=1", "display_name": "LaGabriella", "link": "https://stackoverflow.com/users/6292205/lagabriella"}, "edited": false, "score": 0, "creation_date": 1462399057, "post_id": 37036724, "comment_id": 61627539, "body": "Thank you. I have seen this but which one should I use ? I admit I was a bit lost when i saw all these files."}, {"owner": {"reputation": 80, "user_id": 4627836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Rp80x-74Lek/AAAAAAAAAAI/AAAAAAAAADY/O16MjoRtsMM/photo.jpg?sz=128", "display_name": "K.M. Shihab Uddin", "link": "https://stackoverflow.com/users/4627836/k-m-shihab-uddin"}, "reply_to_user": {"reputation": 11, "user_id": 6292205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4475e26426ff0175641051edfa87c1?s=128&d=identicon&r=PG&f=1", "display_name": "LaGabriella", "link": "https://stackoverflow.com/users/6292205/lagabriella"}, "edited": false, "score": 0, "creation_date": 1462471974, "post_id": 37036724, "comment_id": 61661920, "body": "libfftw3-3, libfftw3f-3, libfftw3l-3 these library files (.lib) extension."}, {"owner": {"reputation": 80, "user_id": 4627836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Rp80x-74Lek/AAAAAAAAAAI/AAAAAAAAADY/O16MjoRtsMM/photo.jpg?sz=128", "display_name": "K.M. Shihab Uddin", "link": "https://stackoverflow.com/users/4627836/k-m-shihab-uddin"}, "reply_to_user": {"reputation": 11, "user_id": 6292205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4475e26426ff0175641051edfa87c1?s=128&d=identicon&r=PG&f=1", "display_name": "LaGabriella", "link": "https://stackoverflow.com/users/6292205/lagabriella"}, "edited": false, "score": 0, "creation_date": 1462472074, "post_id": 37036724, "comment_id": 61661983, "body": "You also need fftw3.h header file. 3 export definition files (.def), 3 exports libary files (.exp); Those file has same name as .lib files."}, {"owner": {"reputation": 80, "user_id": 4627836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Rp80x-74Lek/AAAAAAAAAAI/AAAAAAAAADY/O16MjoRtsMM/photo.jpg?sz=128", "display_name": "K.M. Shihab Uddin", "link": "https://stackoverflow.com/users/4627836/k-m-shihab-uddin"}, "reply_to_user": {"reputation": 11, "user_id": 6292205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4475e26426ff0175641051edfa87c1?s=128&d=identicon&r=PG&f=1", "display_name": "LaGabriella", "link": "https://stackoverflow.com/users/6292205/lagabriella"}, "edited": false, "score": 0, "creation_date": 1462472111, "post_id": 37036724, "comment_id": 61662009, "body": "Copy these 10 files in your project directory and include fftw3.h in your project."}, {"owner": {"reputation": 11, "user_id": 6292205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4475e26426ff0175641051edfa87c1?s=128&d=identicon&r=PG&f=1", "display_name": "LaGabriella", "link": "https://stackoverflow.com/users/6292205/lagabriella"}, "edited": false, "score": 0, "creation_date": 1462496018, "post_id": 37036724, "comment_id": 61671828, "body": "Thank you K.M Shihab Uddin . I will give it a try. May i ask you if i Only have to put these files in the project directory without any other configuration in visual studio ?"}, {"owner": {"reputation": 80, "user_id": 4627836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Rp80x-74Lek/AAAAAAAAAAI/AAAAAAAAADY/O16MjoRtsMM/photo.jpg?sz=128", "display_name": "K.M. Shihab Uddin", "link": "https://stackoverflow.com/users/4627836/k-m-shihab-uddin"}, "reply_to_user": {"reputation": 11, "user_id": 6292205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4475e26426ff0175641051edfa87c1?s=128&d=identicon&r=PG&f=1", "display_name": "LaGabriella", "link": "https://stackoverflow.com/users/6292205/lagabriella"}, "edited": false, "score": 0, "creation_date": 1462815675, "post_id": 37036724, "comment_id": 61785030, "body": "You have to copy the .lib file names in linker&gt;&gt;input&gt;&gt;additional dependencies"}, {"owner": {"reputation": 80, "user_id": 4627836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Rp80x-74Lek/AAAAAAAAAAI/AAAAAAAAADY/O16MjoRtsMM/photo.jpg?sz=128", "display_name": "K.M. Shihab Uddin", "link": "https://stackoverflow.com/users/4627836/k-m-shihab-uddin"}, "reply_to_user": {"reputation": 11, "user_id": 6292205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4475e26426ff0175641051edfa87c1?s=128&d=identicon&r=PG&f=1", "display_name": "LaGabriella", "link": "https://stackoverflow.com/users/6292205/lagabriella"}, "edited": false, "score": 0, "creation_date": 1462815694, "post_id": 37036724, "comment_id": 61785042, "body": "just like including any library"}], "tags": [], "owner": {"reputation": 80, "user_id": 4627836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Rp80x-74Lek/AAAAAAAAAAI/AAAAAAAAADY/O16MjoRtsMM/photo.jpg?sz=128", "display_name": "K.M. Shihab Uddin", "link": "https://stackoverflow.com/users/4627836/k-m-shihab-uddin"}, "is_accepted": false, "score": 0, "last_activity_date": 1462391249, "creation_date": 1462391249, "answer_id": 37036724, "question_id": 37034976, "link": "https://stackoverflow.com/questions/37034976/is-this-c-fft-function-equivalent-to-fft-matlab-function/37036724#37036724", "title": "Is this C++ FFT function equivalent to &quot;fft&quot; matlab function?", "body": "<p>Alternative Suggestion:</p>\n\n<p>I had same problem. I used fft library from fftw.\n<a href=\"http://www.fftw.org/download.html\" rel=\"nofollow\">http://www.fftw.org/download.html</a>\nIts performance is similar to matlab.</p>\n"}, {"tags": [], "owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "is_accepted": false, "score": 0, "last_activity_date": 1462427347, "last_edit_date": 1462427347, "creation_date": 1462412486, "answer_id": 37040940, "question_id": 37034976, "link": "https://stackoverflow.com/questions/37034976/is-this-c-fft-function-equivalent-to-fft-matlab-function/37040940#37040940", "title": "Is this C++ FFT function equivalent to &quot;fft&quot; matlab function?", "body": "<p>The code looks fine at first glance. The original FFT is not a lot of code. </p>\n\n<p>One feature of the FFT is that it is an <strong>inplace</strong> operation. Many higher level bindings effectively hide that fact.</p>\n\n<p>So you put your real and imaginary parts into the x and y arrays. After the executing the function you read those same arrays for your result. </p>\n\n<p>This particularly simple implementation will only work with powers of 2 as the original FFT. If you have inputs of lengths other than powers of 2 you could zero-pad your signal.</p>\n\n<p>Google the book <code>Numerical Recipes</code>  and <code>fft</code> (older versions are freely available) if you want to read up on the background of the FFT. The version in that book is different from other implementations in that you have to feed in the real and imaginary parts interleaved.  </p>\n\n<p>What I'm missing on the implementation that you are quoting is the use of pi or trigonometric functions. You'll have to try it out to compare against Matlab. </p>\n"}], "owner": {"reputation": 11, "user_id": 6292205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4475e26426ff0175641051edfa87c1?s=128&d=identicon&r=PG&f=1", "display_name": "LaGabriella", "link": "https://stackoverflow.com/users/6292205/lagabriella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1005, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1462427347, "creation_date": 1462385275, "question_id": 37034976, "link": "https://stackoverflow.com/questions/37034976/is-this-c-fft-function-equivalent-to-fft-matlab-function", "title": "Is this C++ FFT function equivalent to &quot;fft&quot; matlab function?", "body": "<p>I have always used the function \"fft(x)\" in matlab where \"x\" is a vector of complex numbers. I am looking for an easy to use function in C++ that would return complex numbers.</p>\n\n<p>I have found this code : <a href=\"http://paulbourke.net/miscellaneous/dft/\" rel=\"nofollow\">http://paulbourke.net/miscellaneous/dft/</a></p>\n\n<p>If it is equivalent, how can I use it ? Thank you for your time !</p>\n\n<pre><code>  /*\n   This computes an in-place complex-to-complex FFT \n   x and y are the real and imaginary arrays of 2^m points.\n   dir =  1 gives forward transform\n   dir = -1 gives reverse transform \n*/\nshort FFT(short int dir,long m,double *x,double *y)\n{\n   long n,i,i1,j,k,i2,l,l1,l2;\n   double c1,c2,tx,ty,t1,t2,u1,u2,z;\n\n   /* Calculate the number of points */\n   n = 1;\n   for (i=0;i&lt;m;i++) \n      n *= 2;\n\n   /* Do the bit reversal */\n   i2 = n &gt;&gt; 1;\n   j = 0;\n   for (i=0;i&lt;n-1;i++) {\n      if (i &lt; j) {\n         tx = x[i];\n         ty = y[i];\n         x[i] = x[j];\n         y[i] = y[j];\n         x[j] = tx;\n         y[j] = ty;\n      }\n      k = i2;\n      while (k &lt;= j) {\n         j -= k;\n         k &gt;&gt;= 1;\n      }\n      j += k;\n   }\n\n   /* Compute the FFT */\n   c1 = -1.0; \n   c2 = 0.0;\n   l2 = 1;\n   for (l=0;l&lt;m;l++) {\n      l1 = l2;\n      l2 &lt;&lt;= 1;\n      u1 = 1.0; \n      u2 = 0.0;\n      for (j=0;j&lt;l1;j++) {\n         for (i=j;i&lt;n;i+=l2) {\n            i1 = i + l1;\n            t1 = u1 * x[i1] - u2 * y[i1];\n            t2 = u1 * y[i1] + u2 * x[i1];\n            x[i1] = x[i] - t1; \n            y[i1] = y[i] - t2;\n            x[i] += t1;\n            y[i] += t2;\n         }\n         z =  u1 * c1 - u2 * c2;\n         u2 = u1 * c2 + u2 * c1;\n         u1 = z;\n      }\n      c2 = sqrt((1.0 - c1) / 2.0);\n      if (dir == 1) \n         c2 = -c2;\n      c1 = sqrt((1.0 + c1) / 2.0);\n   }\n\n   /* Scaling for forward transform */\n   if (dir == 1) {\n      for (i=0;i&lt;n;i++) {\n         x[i] /= n;\n         y[i] /= n;\n      }\n   }\n\n   return(TRUE);\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1462386247, "post_id": 37034729, "comment_id": 61620708, "body": "<b>Don&#39;t use obsolete C api</b>.  Forget about <code>getConnectedComp</code>, is just useless. You can get connected components like in <a href=\"http://stackoverflow.com/a/36935370/5008845\">this example</a>"}, {"owner": {"reputation": 161, "user_id": 4981808, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1117335851626140/picture?type=large", "display_name": "Kristina Vakarov", "link": "https://stackoverflow.com/users/4981808/kristina-vakarov"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1462459171, "post_id": 37034729, "comment_id": 61653960, "body": "That works thanks!But I have one more question, because this is the part of one project, after I get connected components I need to rectangle all connected components larger than 160 pixels. How can I proceed this labels file to it ?"}], "owner": {"reputation": 161, "user_id": 4981808, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1117335851626140/picture?type=large", "display_name": "Kristina Vakarov", "link": "https://stackoverflow.com/users/4981808/kristina-vakarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462384335, "creation_date": 1462384335, "question_id": 37034729, "link": "https://stackoverflow.com/questions/37034729/opencv-getconnectedcomponents-errors", "title": "OpenCV - getConnectedComponents errors", "body": "<p>I was writing code and I need to use function to finde connected components but I got two errors : </p>\n\n<p>Error   7   error LNK2005: \"int __cdecl getConnectedComps(struct _IplImage *,int &amp;,class std::vector > &amp;)\" (?getConnectedComps@@YAHPEAU_IplImage@@AEAHAEAV?$vector@PEAUCvConnectedComp@@V?$allocator@PEAUCvConnectedComp@@@std@@@std@@@Z) already defined in main.obj   C:\\Users\\Kristina\\Desktop\\Kompjuterska vizija\\PrviProjekat\\PrviProjekat\\getConnectedComps.obj   Domaci1</p>\n\n<p>Error   8   error LNK1169: one or more multiply defined symbols found   C:\\Users\\Kristina\\Desktop\\Kompjuterska vizija\\PrviProjekat\\x64\\Debug\\Domaci1.exe    Domaci1</p>\n\n<p>What is the problem?I have been using MicrosoftVisualStudio 2013, and functions </p>\n\n<p>getConnectedComps.h</p>\n\n<pre><code>#include \"opencv/cxcore.h\"\n#include \"opencv/cv.h\"\n#include \"opencv/cvaux.h\"\n#include \"opencv/highgui.h\"\n\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint getConnectedComps(IplImage *image, int &amp;totalComps,      vector&lt;CvConnectedComp*&gt; &amp;components);\n</code></pre>\n\n<p>getConnectedComps.cpp</p>\n\n<pre><code>#include \"getConnectedComps.h\"\n#include &lt;vector&gt;\n\nusing namespace std;\n\n#define MAX_COMPONENTS 250\n\nint getConnectedComps(IplImage *image, int &amp;totalComps, vector&lt;CvConnectedComp*&gt; &amp;components)\n{\n    int width, height;\n\n    if (!(image-&gt;roi))\n    {\n\n        width = image-&gt;width;\n        height = image-&gt;height;\n    }\nelse\n{\n\n    width = image-&gt;roi-&gt;width;\n    height = image-&gt;roi-&gt;height;\n}\n\n\nvector&lt;CvConnectedComp*&gt;::iterator itComponent = components.begin();\nint currentCompValue = 0;\n\nfor (int y = 0; y &lt; height; y++)\n    for (int x = 0; x &lt; width; x++)\n    {\n        CvScalar pixval = cvGet2D(image, y, x);\n\n\n        if (pixval.val[0] &gt; currentCompValue)\n        {\n\n            if (++currentCompValue &gt; MAX_COMPONENTS)\n                return -1;\n\n\n            if (*itComponent == NULL) *itComponent = new CvConnectedComp;\n\n\n            cvFloodFill(image,cvPoint(x, y), cvScalar(currentCompValue), cvScalar(0), \n                cvScalar(0), (*(itComponent++)), 8);\n        }\n    }\n\n\ntotalComps = currentCompValue;\nreturn 0;\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"opencv2/videoio/videoio.hpp\" \n#include \"opencv2/highgui/highgui.hpp\"\n#include \"opencv2/imgproc/imgproc.hpp\"\n#include &lt;vector&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include \"getConnectedComps.cpp\"\nusing namespace cv;\nusing namespace std;\n\nint main(int argc, char** argv){\n\nvector&lt;CvConnectedComp*&gt; components;\nVideoCapture video1;\nint vektor,s;\nint width, height, frames1, fps1;\nvideo1.open(argv[1]);\nfps1 = video1.get(CV_CAP_PROP_FPS);\nwidth = video1.get(CAP_PROP_FRAME_WIDTH);\nheight = video1.get(CAP_PROP_FRAME_HEIGHT);\nframes1 = video1.get(CAP_PROP_FRAME_COUNT);\n\ncout &lt;&lt; \"Video1 \" &lt;&lt; argv[1] &lt;&lt;\n    \": width=\" &lt;&lt; width &lt;&lt;\n    \", height=\" &lt;&lt; height &lt;&lt;\n    \", frames=\" &lt;&lt; frames1 &lt;&lt;\n    \", fps1=\" &lt;&lt; fps1 &lt;&lt; endl;\n\n\nint i = 0;\nint j = 0;\n\n\n\n\nMat frameTime2, frameForeground, frameForeground1,maska, frameForeground2, frame3[3],frameForeground3, frameForegroundOut1, frameForegroundOut2;\n\nMat frameTime1(height, width, CV_8UC3, Scalar(0, 0, 0));\n\nwhile (1){\n\n    video1 &gt;&gt; frameTime2;\n    bool bSuccess = video1.read(frameTime2);\n    if (!bSuccess) //if not success, break loop\n    {\n        cout &lt;&lt; \"ERROR: Cannot read a frame from video file\" &lt;&lt; endl;\n        break;\n    }\n    absdiff(frameTime1, frameTime2, frameForeground);\n    split(frameForeground, frame3);\n    threshold(frame3[0], frameForeground1, 15, 255, CV_THRESH_BINARY);\n    threshold(frame3[1], frameForeground2, 15, 255, CV_THRESH_BINARY);\n    threshold(frame3[2], frameForeground3, 15, 255, CV_THRESH_BINARY);\n    bitwise_or(frameForeground1, frameForeground2, frameForegroundOut1);\n    bitwise_or(frameForegroundOut1, frameForeground3, maska);\n    frameTime2.copyTo(frameTime1);\n    morphologyEx(maska, frameForegroundOut2, MORPH_OPEN, Mat());\n    erode(frameForegroundOut2, frameForegroundOut2, Mat());\n    morphologyEx(frameForegroundOut2, frameForegroundOut2, MORPH_CLOSE, Mat());\n    morphologyEx(frameForegroundOut2, frameForegroundOut2, MORPH_OPEN, Mat());\n    dilate(frameForegroundOut2, frameForegroundOut2, Mat());\n    dilate(frameForegroundOut2, frameForegroundOut2, Mat());\n    dilate(frameForegroundOut2, frameForegroundOut2, Mat());\n    dilate(frameForegroundOut2, frameForegroundOut2, Mat());\n    morphologyEx(frameForegroundOut2, frameForegroundOut2, MORPH_CLOSE, Mat());\n    morphologyEx(frameForegroundOut2, frameForegroundOut2, MORPH_CLOSE, Mat());\n    morphologyEx(frameForegroundOut2, frameForegroundOut2, MORPH_CLOSE, Mat());\n    morphologyEx(frameForegroundOut2, frameForegroundOut2, MORPH_CLOSE, Mat());\n    IplImage* img = new IplImage(frameForegroundOut2);\n    getConnectedComps(img, vektor, components);\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "class", "templates"], "comments": [{"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 5, "creation_date": 1462384347, "post_id": 37034701, "comment_id": 61619528, "body": "You are essentially asking &quot;please give me a glass of&quot;. No, please specify whether you want beer or water!"}, {"owner": {"reputation": 1401, "user_id": 2737046, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5gIpP.jpg?s=128&g=1", "display_name": "perencia", "link": "https://stackoverflow.com/users/2737046/perencia"}, "edited": false, "score": 1, "creation_date": 1462384728, "post_id": 37034701, "comment_id": 61619760, "body": "I hava a project in c++ course. is it possible? You tell me."}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1462386045, "post_id": 37034701, "comment_id": 61620595, "body": "@JohannesSchaub-litb Agreed. I think it is just as possible/useful as asking someone to help you write code to sort colored socks alphabetically by smell."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1462386176, "post_id": 37034701, "comment_id": 61620672, "body": "@callyalater, nice allegory."}, {"owner": {"reputation": 1, "user_id": 5010144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cdc3c8c0d2b8f8a7df2c746c6fe85cc?s=128&d=identicon&r=PG&f=1", "display_name": "JJseung", "link": "https://stackoverflow.com/users/5010144/jjseung"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1462387848, "post_id": 37034701, "comment_id": 61621725, "body": "@JohannesSchaub-litb OK. I will be careful about that at next time."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1462389058, "post_id": 37034701, "comment_id": 61622436, "body": "If you try to compile it you&#39;ll know if what you have written is possible (well, at least &#39;syntactically correct&#39;)..."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5010144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cdc3c8c0d2b8f8a7df2c746c6fe85cc?s=128&d=identicon&r=PG&f=1", "display_name": "JJseung", "link": "https://stackoverflow.com/users/5010144/jjseung"}, "edited": false, "score": 0, "creation_date": 1462385450, "post_id": 37034978, "comment_id": 61620225, "body": "T.A provided this code to me &quot;this is test case!!!&quot; and i got so many errors.."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1, "user_id": 5010144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cdc3c8c0d2b8f8a7df2c746c6fe85cc?s=128&d=identicon&r=PG&f=1", "display_name": "JJseung", "link": "https://stackoverflow.com/users/5010144/jjseung"}, "edited": false, "score": 1, "creation_date": 1462385550, "post_id": 37034978, "comment_id": 61620295, "body": "@seunghwanJeong Well, kick T.A. in the ass :-P ..."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1462385745, "post_id": 37034978, "comment_id": 61620429, "body": "Preferrably so hard that T.A. is launched off-campus, never to find the way back. No kidding."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462386098, "post_id": 37034978, "comment_id": 61620626, "body": "@SergeyA Sure, there seem to be loads of incompetent T.A.&#39;s nowadays."}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1462386215, "post_id": 37034978, "comment_id": 61620694, "body": "Could OP use a template specialization for <code>mylist&lt;&gt;</code> and create a using template alias for it?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1462386329, "post_id": 37034978, "comment_id": 61620770, "body": "@callyalater Not sure if such is possible using the <code>mylist</code> symbol as a type alias for that case."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 0, "last_activity_date": 1462385277, "creation_date": 1462385277, "answer_id": 37034978, "question_id": 37034701, "link": "https://stackoverflow.com/questions/37034701/c-use-template-class/37034978#37034978", "title": "c++ use template class", "body": "<blockquote>\n  <p>Is there any way to compile this code such as inheritance, overload...?</p>\n</blockquote>\n\n<p>No. Not as you are trying to at least.</p>\n\n<pre><code>mylist *y = new mylist(); //....how?\n</code></pre>\n\n<p>isn't valid since you have to provide a template parameter for <code>mylist</code> like <code>mylist&lt;MyType&gt;</code>.</p>\n\n<p>You're probably looking for <em>template specializations</em>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5010144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cdc3c8c0d2b8f8a7df2c746c6fe85cc?s=128&d=identicon&r=PG&f=1", "display_name": "JJseung", "link": "https://stackoverflow.com/users/5010144/jjseung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "closed_date": 1462401482, "accepted_answer_id": 37034978, "answer_count": 1, "score": -5, "last_activity_date": 1462387783, "creation_date": 1462384234, "last_edit_date": 1462387783, "question_id": 37034701, "link": "https://stackoverflow.com/questions/37034701/c-use-template-class", "closed_reason": "Needs details or clarity", "title": "c++ use template class", "body": "<p>I hava a project in c++ course.\nis it possible?</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include \"mylist.hpp\"\n\nint main(){\n    mylist&lt;int&gt; *x = new mylist&lt;int&gt;(); //I know this is possible.\n    mylist *y = new mylist(); //....how?\n}\n</code></pre>\n\n<p>mylist.hpp is header file contains about mylist class.\nIs there any way to compile this code such as inheritance, overload...?</p>\n"}, {"tags": ["c++", "bitset", "std-bitset"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1462384879, "post_id": 37034688, "comment_id": 61619855, "body": "Works fine for me."}, {"owner": {"reputation": 177, "user_id": 6292163, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/465cf09e38d83702935ca1b367fb9fb2?s=128&d=identicon&r=PG&f=1", "display_name": "CPP_NEW", "link": "https://stackoverflow.com/users/6292163/cpp-new"}, "edited": false, "score": 0, "creation_date": 1462385050, "post_id": 37034688, "comment_id": 61619969, "body": "I am getting this error &quot;error: no match for call to \u2018(std::bitset&lt;128ul&gt;) (uint8_t [16])\u2019&quot;"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1462385061, "post_id": 37034688, "comment_id": 61619978, "body": "@DeiDei: It would &quot;work&quot; in the sense that if <code>test</code> was zeroed, some compilers might use the string based constructor, determine it was the empty string (the first byte is <code>NUL</code>), and zero out the <code>bitset</code>; coincidentally correct if <code>test</code> is zeroed, but wrong in all other cases."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1462385154, "post_id": 37034688, "comment_id": 61620036, "body": "@ShadowRanger I assumed that was true when I wrote my comment. It seems the OP is getting a compiler error, which I couldn&#39;t reproduce."}, {"owner": {"reputation": 177, "user_id": 6292163, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/465cf09e38d83702935ca1b367fb9fb2?s=128&d=identicon&r=PG&f=1", "display_name": "CPP_NEW", "link": "https://stackoverflow.com/users/6292163/cpp-new"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1462385230, "post_id": 37034688, "comment_id": 61620078, "body": "@ShadowRanger that was byte array to biteset."}, {"owner": {"reputation": 177, "user_id": 6292163, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/465cf09e38d83702935ca1b367fb9fb2?s=128&d=identicon&r=PG&f=1", "display_name": "CPP_NEW", "link": "https://stackoverflow.com/users/6292163/cpp-new"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1462385325, "post_id": 37034688, "comment_id": 61620130, "body": "@DeiDei In my program I am populating the test[] and then trying to convert it into bitset. I first tried the one mentioned by ShadowRanger but I could not fix"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1462385416, "post_id": 37034688, "comment_id": 61620206, "body": "@CPP_NEW <code>test[]</code> must be populated only by <code>&#39;0&#39;</code>&#39;s and <code>&#39;1&#39;</code>&#39;s. If <code>test[]</code> contains anything else, the constructor will throw <code>std::invalid_argument</code>."}, {"owner": {"reputation": 177, "user_id": 6292163, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/465cf09e38d83702935ca1b367fb9fb2?s=128&d=identicon&r=PG&f=1", "display_name": "CPP_NEW", "link": "https://stackoverflow.com/users/6292163/cpp-new"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1462385502, "post_id": 37034688, "comment_id": 61620258, "body": "@DeiDei Yes, it is populating with 0s and 1s. When I printed the values in a for loop, it gave me 128 bits (11101011001110100011110001011110000011100101001111000111100&zwnj;&#8203;00000001011101110011&zwnj;&#8203;11000101111001100010&zwnj;&#8203;11010100001001011010&zwnj;&#8203;000110011)"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1462385791, "post_id": 37034688, "comment_id": 61620462, "body": "@CPP_NEW Edit the question with the actual code that&#39;s giving you a problem."}, {"owner": {"reputation": 177, "user_id": 6292163, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/465cf09e38d83702935ca1b367fb9fb2?s=128&d=identicon&r=PG&f=1", "display_name": "CPP_NEW", "link": "https://stackoverflow.com/users/6292163/cpp-new"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1462386104, "post_id": 37034688, "comment_id": 61620629, "body": "@DeiDei I am calling a function which populates the test[]. I edited the original question. It is not possible to put the entire function there."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1462387208, "post_id": 37034688, "comment_id": 61621329, "body": "You need to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1462387669, "post_id": 37034688, "comment_id": 61621617, "body": "Are you doing <code>std::bitset&lt;128&gt; bsTest(test);</code> or only <code>bsTest(test);</code>. The latter is obviously not going to work."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1462393918, "post_id": 37034688, "comment_id": 61625070, "body": "@CPP_NEW: There is no C++ <code>byte</code> type; the other question was likely referring to <code>char</code>, <code>unsigned char</code> or <code>uint8_t</code> (all of which represent bytes); it&#39;s a direct equivalent."}, {"owner": {"reputation": 177, "user_id": 6292163, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/465cf09e38d83702935ca1b367fb9fb2?s=128&d=identicon&r=PG&f=1", "display_name": "CPP_NEW", "link": "https://stackoverflow.com/users/6292163/cpp-new"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1462394572, "post_id": 37034688, "comment_id": 61625383, "body": "@ShadowRanger You are right !! I am kind of good C programmer but trying C++"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 6292163, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/465cf09e38d83702935ca1b367fb9fb2?s=128&d=identicon&r=PG&f=1", "display_name": "CPP_NEW", "link": "https://stackoverflow.com/users/6292163/cpp-new"}, "edited": false, "score": 0, "creation_date": 1462393173, "post_id": 37035371, "comment_id": 61624671, "body": "Thanks a lot !! It is somehow working for me now. I will see if I can  make it quicker. BTW your English is as good as (or better than) mine :)"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 2, "last_activity_date": 1462386702, "creation_date": 1462386702, "answer_id": 37035371, "question_id": 37034688, "link": "https://stackoverflow.com/questions/37034688/convert-uint8-t-array-to-bitset-in-c/37035371#37035371", "title": "convert uint8_t array to bitset in C++", "body": "<p>I propose you a possible solution.</p>\n\n<p>Not so good, not so quick, a little dirty but I hope it can help.</p>\n\n<pre><code>#include &lt;bitset&gt;\n#include &lt;iostream&gt;\n\nint main ()\n {\n   uint8_t  test[16] = { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h',\n                         'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p' };\n\n   std::bitset&lt;128&gt; bsTest { } ;\n\n   for ( unsigned ui = 0 ; ui &lt; 16 ; ++ui )\n    {\n      bsTest &lt;&lt;= 8;\n\n      std::bitset&lt;128&gt; bsTmp { (unsigned long) test[ui] };\n\n      bsTest |= bsTmp;\n    }\n\n   std::cout &lt;&lt; bsTest;\n\n   return 0;\n }\n</code></pre>\n\n<p>The idea is initialize the bitset to zero</p>\n\n<pre><code>std::bitset&lt;128&gt; bsTest { } ;\n</code></pre>\n\n<p>and add a <code>uint8_t</code> at a time at the end of another bitset</p>\n\n<pre><code>std::bitset&lt;128&gt; bsTmp { (unsigned long) test[ui] };\n</code></pre>\n\n<p>then merge (bit or) the two bitsets</p>\n\n<pre><code>bsTest |= bsTmp;\n</code></pre>\n\n<p>and shift 8 bit the result</p>\n\n<pre><code>bsTest &lt;&lt;= 8;\n</code></pre>\n\n<p>p.s.: sorry for my bad English</p>\n"}], "owner": {"reputation": 177, "user_id": 6292163, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/465cf09e38d83702935ca1b367fb9fb2?s=128&d=identicon&r=PG&f=1", "display_name": "CPP_NEW", "link": "https://stackoverflow.com/users/6292163/cpp-new"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1998, "favorite_count": 0, "closed_date": 1463235283, "accepted_answer_id": 37035371, "answer_count": 1, "score": 1, "last_activity_date": 1462386702, "creation_date": 1462384193, "last_edit_date": 1462386002, "question_id": 37034688, "link": "https://stackoverflow.com/questions/37034688/convert-uint8-t-array-to-bitset-in-c", "closed_reason": "Duplicate", "title": "convert uint8_t array to bitset in C++", "body": "<p>Is there a quick way to convert an array of uint8_t to a biteset.</p>\n\n<pre><code>uint8_t test[16]; \n// Call a function which populates test[16] with 128 bits\nfunction_call(&amp; test);\nfor(int i=0; i&lt;16; i++)\n  cout&lt;&lt;test[0]; // outputs a byte\ncout&lt;&lt;endl;\nstd:: bitset&lt;128&gt; bsTest;\n</code></pre>\n\n<p>I tried this but does not work</p>\n\n<pre><code>bsTest(test);\n</code></pre>\n"}, {"tags": ["c++", "winapi", "mapping", "shared-memory"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1462395651, "post_id": 37034677, "comment_id": 61625950, "body": "<code>void* p = MapViewOfFile( ... ); Labyrinth&amp; a = *reinterpret_cast&lt;Labyrinth*&gt;( p );</code> is one way to map structured data onto flat memory. Objects you put into shared memory can contain pointers. It is necessary, though, that they only contain POD&#39;s (integral data types and structures). A common convention is to use the <code>struct</code> keyword when dealing with POD structures."}, {"owner": {"reputation": 2173, "user_id": 1317574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e67222870db5dfc5194cdca848c59818?s=128&d=identicon&r=PG", "display_name": "Marc Sherman", "link": "https://stackoverflow.com/users/1317574/marc-sherman"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1462546098, "post_id": 37034677, "comment_id": 61695239, "body": "@IInspectable Objects in shared memory can contain pointers? I believe it&#39;s only safe to store offsets in shared memory."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 2173, "user_id": 1317574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e67222870db5dfc5194cdca848c59818?s=128&d=identicon&r=PG", "display_name": "Marc Sherman", "link": "https://stackoverflow.com/users/1317574/marc-sherman"}, "edited": false, "score": 0, "creation_date": 1462546759, "post_id": 37034677, "comment_id": 61695730, "body": "@MarcSherman: Like the OP you are mixing up two concepts: Transferring pointers and dereferencing pointers. Transferring pointers from one process to another process is completely safe. Dereferencing a pointer from process A in process B, on the other hand, exhibits undefined behavior. You can still use that pointer in process B, e.g. to send it back to process A, or to check against <code>NULL</code>, but you must not dereference it."}, {"owner": {"reputation": 2173, "user_id": 1317574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e67222870db5dfc5194cdca848c59818?s=128&d=identicon&r=PG", "display_name": "Marc Sherman", "link": "https://stackoverflow.com/users/1317574/marc-sherman"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1462568826, "post_id": 37034677, "comment_id": 61707622, "body": "@IInspectable Those use cases for transferring pointers but not dereferencing them are unrealistic."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 2173, "user_id": 1317574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e67222870db5dfc5194cdca848c59818?s=128&d=identicon&r=PG", "display_name": "Marc Sherman", "link": "https://stackoverflow.com/users/1317574/marc-sherman"}, "edited": false, "score": 0, "creation_date": 1462570219, "post_id": 37034677, "comment_id": 61708142, "body": "@MarcSherman: Realistic or not doesn&#39;t make a difference (sharing a pointer to be used as a reference to an object in the source process is anything but unrealistic). The point is: Transferring pointers is safe. Dereferencing pointers outside their source process isn&#39;t. You need to keep those concepts separate."}, {"owner": {"reputation": 2173, "user_id": 1317574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e67222870db5dfc5194cdca848c59818?s=128&d=identicon&r=PG", "display_name": "Marc Sherman", "link": "https://stackoverflow.com/users/1317574/marc-sherman"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1462572052, "post_id": 37034677, "comment_id": 61708786, "body": "@IInspectable In that use case then the pointer becomes an identifier and should be typed as something other than a pointer. Otherwise, someone will eventually write code that dereferences it in the wrong process. Even worse, if the source process crashes or terminates, then restarts, and maps to the <i>pre-existing</i> shared memory segment, it will dereference a pointer that is no longer valid since this is a <i>new</i> instance of the source process."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 2173, "user_id": 1317574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e67222870db5dfc5194cdca848c59818?s=128&d=identicon&r=PG", "display_name": "Marc Sherman", "link": "https://stackoverflow.com/users/1317574/marc-sherman"}, "edited": false, "score": 0, "creation_date": 1462611921, "post_id": 37034677, "comment_id": 61717324, "body": "@MarcSherman: Now you&#39;re turning the question around to make it fit your answer. This doesn&#39;t change facts, though: You can transfer any POD (including pointers) between processes. Whether it is a good idea to do so is another question altogether, one that hadn&#39;t been raised."}, {"owner": {"reputation": 7055, "user_id": 1374704, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VNVyl.png?s=128&g=1", "display_name": "manuell", "link": "https://stackoverflow.com/users/1374704/manuell"}, "edited": false, "score": 0, "creation_date": 1464705894, "post_id": 37034677, "comment_id": 62586278, "body": "Do you still wait for an answer?"}], "owner": {"reputation": 1, "user_id": 6292144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c25a0bd17eef093f4b7365f1435ee06?s=128&d=identicon&r=PG&f=1", "display_name": "throwaway50", "link": "https://stackoverflow.com/users/6292144/throwaway50"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462384763, "creation_date": 1462384165, "last_edit_date": 1462384763, "question_id": 37034677, "link": "https://stackoverflow.com/questions/37034677/mapping-a-bi-dimentional-array-via-class-object-in-shared-memory-winapi", "title": "Mapping a bi-dimentional array via class object in shared memory (WINAPI)", "body": "<p>Assuming I have the class:</p>\n\n<pre><code>class Labyrinth{\n     int maze[100][100];\n }\n</code></pre>\n\n<p>How do I map an object from this class, let's say:</p>\n\n<pre><code>labyrinth a;\n</code></pre>\n\n<p>to shared memory using <code> CreateFileMapping </code> and <code> MapViewOfFile </code> ?</p>\n\n<p>Also, after I mapped it on the shared memory, how would I access it? Via the pointer that <code> MapViewOfFile </code> returns would suffice?</p>\n\n<p>Edit: I know that I can't use pointers (therefore, polymorphism and other classes that use pointers) in shared memory if another process is set to access it as well.</p>\n"}, {"tags": ["c++", "arrays", "heap-memory"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1462383746, "post_id": 37034540, "comment_id": 61619136, "body": "Can you create an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1462383861, "post_id": 37034540, "comment_id": 61619213, "body": "u now, just use <code>std:.vector</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1462383865, "post_id": 37034540, "comment_id": 61619219, "body": "Smells like you are deleting the same array more than once or use deleted array. Replace your dynamic array with <code>std::vector</code> and never see this problem again."}, {"owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1462384005, "post_id": 37034540, "comment_id": 61619317, "body": "Don&#39;t tell him to use <code>std::vector</code>, besides the fact that it sucks, it doesn&#39;t answer his question. @maja, post the full code that reproduces your problem, we need to see what arrays are being used and how to give you an answer."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 3, "creation_date": 1462384092, "post_id": 37034540, "comment_id": 61619364, "body": "@ocket8888 What &quot;sucks&quot; about a <code>std::vector</code>?"}, {"owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1462384250, "post_id": 37034540, "comment_id": 61619462, "body": "They&#39;re featureless and require you to create iterators to perform basic operations."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 2, "creation_date": 1462384723, "post_id": 37034540, "comment_id": 61619753, "body": "@ocket8888 What basic operations does vector make you create iterators for.  You should be able to use a vector exactly like an array."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 1, "creation_date": 1462384750, "post_id": 37034540, "comment_id": 61619775, "body": "@ocket8888, what a misguided approach... std::vector is feature-rich, drop-in replacement for any C-style dynamic arrays. In fact, there is exactly 0 reasons to use C-style dynamic arrays nowadays."}, {"owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1462385004, "post_id": 37034540, "comment_id": 61619941, "body": "I&#39;d really rather not get into it, it&#39;s not what comments are for, and it&#39;s beside the point. Telling him to use something else, whatever it is, instead of what he&#39;s doing should only be done if what he&#39;s doing results in undefined behaviour, and it should never be done without an explanation. He&#39;s not asking how you would do it, he&#39;s asking why his way isn&#39;t working."}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 4, "creation_date": 1462385011, "post_id": 37034540, "comment_id": 61619948, "body": "You are not passing the pointer by reference"}, {"owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "edited": false, "score": 0, "creation_date": 1462385031, "post_id": 37034540, "comment_id": 61619955, "body": "at this point I don&#39;t have time to rewrite everything using vectors..  in fact, I would have better used linked lists for what I&#39;m doing, but at design time I didn&#39;t consider some of the features I had to implement with this program"}, {"owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1462385121, "post_id": 37034540, "comment_id": 61620009, "body": "@maja it&#39;s usually best to <code>delete</code> things in the same scope they are made in, in general."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1462385179, "post_id": 37034540, "comment_id": 61620049, "body": "@ocket8888, if one asks me how to scratch his left ear with right hand, making sure the hand passess under the right knee, I feel free to suggest achieving the same result using other technique."}, {"owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "reply_to_user": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 0, "creation_date": 1462385732, "post_id": 37034540, "comment_id": 61620419, "body": "@bkVnet, I would have accepted that as answer"}, {"owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462385858, "post_id": 37034540, "comment_id": 61620494, "body": "@SergeyA I&#39;m sorry I besmirched the name of <code>std</code>, I really don&#39;t care that you like it. When someone asks me &quot;how to scratch his left ear with right hand, making sure the hand passes under the right knee,&quot; I would also suggest that they do it a different way, but not without first telling them what they&#39;re doing wrong and answering the question they asked instead of ignoring it. And it <b>really is beside the point</b> but using <code>std::vector</code> is not <i>always</i> better than just a plain pointer. I don&#39;t pretend to know the context in which this function needs to be used."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1462386052, "post_id": 37034540, "comment_id": 61620597, "body": "@ocket8888, care to provide a scenario where using a new[] allocated pointer is better (in any technical way) than vector?"}, {"owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462386210, "post_id": 37034540, "comment_id": 61620689, "body": "@SergeyA No. Comments are not for personal discussions; this will my last post in response to you and I make it only because ignoring you would be rude. If you have something more to say I&#39;d suggest saying it in chat, which <b>is</b> for discussions."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1462386361, "post_id": 37034540, "comment_id": 61620793, "body": "Maja, I&#39;d shy away from linked lists as well, even <code>std::list</code>. The cost of 0(1) insert and delete on modern computing hardware is almost always dwarfed by the increased costs incurred by iterating through a linked list. There is often no spatial locality between nodes resulting in very poor cache performance. As always, profile the code to find out. Your case may fall into almost never camp and see significant performance improvement. It&#39;s just a lot more likely to not to."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1462390186, "post_id": 37034540, "comment_id": 61623036, "body": "The other potential issue with the expandArray function using <code>new[]</code> is that it&#39;s dumb -- it shouldn&#39;t need to resize anything if the current capacity hasn&#39;t been exceeded.  Ex:  You allocate 100, then you resize down to 1 -- that&#39;s two calls to the allocator when the first one is all you needed. Using <code>std::vector</code> and <code>resize()</code> is smarter in that it doesn&#39;t do the memory management this naively.  This could be a big deal if <code>expandArray</code> is called a good number of times using the same pointer.  Essentially you need two distinct member variables, one for size, the other, capacity."}, {"owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1462390369, "post_id": 37034540, "comment_id": 61623126, "body": "@user4581301 I&#39;m dealing with sparse matrices"}, {"owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1462390427, "post_id": 37034540, "comment_id": 61623155, "body": "@PaulMcKenzie I&#39;m not sure I understand: the function is called only if the used terms index is equal to the capacity index"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1462390835, "post_id": 37034540, "comment_id": 61623379, "body": "@maja You didn&#39;t post the rest of your code.  From the little code you posted, it gives the impression that this function is called, regardless of the value of <code>newSize</code>.  But I would seriously use <code>std::vector</code> here -- all your problems should go away if you did that, and none of the checking for capacity needs to be done."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1462392492, "post_id": 37034540, "comment_id": 61624284, "body": "I would be quite surprised if a linked list was anything but a performance killer for a sparse matrix. A note on the pointer-to-array, make sure that anything managing that array is <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">Rule of Three compliant</a>. One of the great things about <code>std::vector</code> is it handles this (and the Rule of Five) for you."}, {"owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1462394504, "post_id": 37034540, "comment_id": 61625348, "body": "@user4581301 after wasting 4 hours on a related problem I switched to vectors, took me 45 min."}], "answers": [{"comments": [{"owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "edited": false, "score": 0, "creation_date": 1462390210, "post_id": 37034880, "comment_id": 61623051, "body": "it turns out the corrected code works for an array (which is data member) and crashes for another (declared inside another member function).."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 6, "last_activity_date": 1462385393, "last_edit_date": 1462385393, "creation_date": 1462384988, "answer_id": 37034880, "question_id": 37034540, "link": "https://stackoverflow.com/questions/37034540/c-deleting-array-passed-as-parameter/37034880#37034880", "title": "C++ - Deleting array passed as parameter", "body": "<p>With the latest edit the problem is very clear. Function deletes original array, and than copies a local pointer - not affecting original pointer in any way. As a result, it keeps pointing to (now deleted) original array.</p>\n\n<p>example:</p>\n\n<pre><code>int* my_arr = new int[10];\nexpandArray(my_arr, 25);\nmy_arr[0] = 5; // crash-boom-bang! my_arr still points to the same memory as it did before expandArray was called!\n</code></pre>\n\n<p>Solution - as I said in the comments, use <code>std::vector</code>. All neccessary resize(s) will be handled for you.</p>\n\n<p>If you are hellbent on using C-style dynamic arrays, you should pass your pointer via reference, i.e.</p>\n\n<pre><code>void expandArray(MyClass*&amp; arr, size_t sz);\n</code></pre>\n"}], "owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 37034880, "answer_count": 1, "score": -1, "last_activity_date": 1462385393, "creation_date": 1462383669, "last_edit_date": 1462384740, "question_id": 37034540, "link": "https://stackoverflow.com/questions/37034540/c-deleting-array-passed-as-parameter", "title": "C++ - Deleting array passed as parameter", "body": "<p>I'm having unexpected behavior with this function:</p>\n\n<pre><code>void myClass1::expandArray(myClass2 *arr, int newSize) //myClass1 is friend of myClass2\n{\n    myClass2 *temp = new myClass2[newSize];\n    /*fill temp with data*/\n    delete[] arr;\n    arr = temp;\n    capacity = newSize; //capacity is a data member of the class\n}\n</code></pre>\n\n<p>This function executes correctly at first, then (which is what puzzles me the most) <em>either at the second or the third times it's called</em>, it just freezes, <strong>no feedback at all</strong> until a few minutes later the program crashes.</p>\n\n<p>I have a version in which the array is a private member of the class and it's not passed as a parameter and it works normally.</p>\n"}, {"tags": ["c++", "algorithm", "graph", "graph-theory"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 1, "creation_date": 1462383654, "post_id": 37034492, "comment_id": 61619082, "body": "what test cases it failed?"}, {"owner": {"reputation": 53, "user_id": 5141702, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/63e72254111b45e77ecb8242b6153cc6?s=128&d=identicon&r=PG&f=1", "display_name": "anand zutshi", "link": "https://stackoverflow.com/users/5141702/anand-zutshi"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1462383927, "post_id": 37034492, "comment_id": 61619271, "body": "It is a very large list. You can submit the code at <a href=\"https://www.hackerrank.com/challenges/clique\" rel=\"nofollow noreferrer\">hackerrank.com/challenges/clique</a> and see the test cases."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1462384154, "post_id": 37034492, "comment_id": 61619405, "body": "1) You didn&#39;t check if you&#39;re dividing by 0.  2) Using formulas from a math book many times do not translate well to computers due to computers using binary, not decimal, thus your answers could differ by a small amount from whatever the answers are for hackerrank.  This is where you need the test case that fails, and see for yourself what the issue is."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1462384414, "post_id": 37034492, "comment_id": 61619570, "body": "Constraints: <code>2 &lt;= N &lt;= 10000</code> and <code>1 &lt;= M &lt;= N*(N-1)&#47;2</code> what if m = 3 and n = 2?"}, {"owner": {"reputation": 53, "user_id": 5141702, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/63e72254111b45e77ecb8242b6153cc6?s=128&d=identicon&r=PG&f=1", "display_name": "anand zutshi", "link": "https://stackoverflow.com/users/5141702/anand-zutshi"}, "edited": false, "score": 0, "creation_date": 1462384811, "post_id": 37034492, "comment_id": 61619815, "body": "m=3 and n=2 violates the second constraint. The range for m"}, {"owner": {"reputation": 1026, "user_id": 4068338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Y8uJJ.png?s=128&g=1", "display_name": "Matsmath", "link": "https://stackoverflow.com/users/4068338/matsmath"}, "edited": false, "score": 0, "creation_date": 1462390067, "post_id": 37034492, "comment_id": 61622975, "body": "You should for the very least check if k is the lower integer part of the right hand side, or the upper integer part. Also -- I believe -- Turan&#39;s theorem <i>guarantees</i> you the existence of a clique of size k, but it does not tell you how big a clique can actually be."}, {"owner": {"reputation": 53, "user_id": 5141702, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/63e72254111b45e77ecb8242b6153cc6?s=128&d=identicon&r=PG&f=1", "display_name": "anand zutshi", "link": "https://stackoverflow.com/users/5141702/anand-zutshi"}, "reply_to_user": {"reputation": 1026, "user_id": 4068338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Y8uJJ.png?s=128&g=1", "display_name": "Matsmath", "link": "https://stackoverflow.com/users/4068338/matsmath"}, "edited": false, "score": 0, "creation_date": 1462421026, "post_id": 37034492, "comment_id": 61633308, "body": "So @Matsmath, this means that my code gives the minimum size of a clique in a graph. That is, the minimum size of clique a particular graph can have; not the maximum. Right?"}], "owner": {"reputation": 53, "user_id": 5141702, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/63e72254111b45e77ecb8242b6153cc6?s=128&d=identicon&r=PG&f=1", "display_name": "anand zutshi", "link": "https://stackoverflow.com/users/5141702/anand-zutshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 792, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1462383511, "creation_date": 1462383511, "question_id": 37034492, "link": "https://stackoverflow.com/questions/37034492/find-the-minimum-size-of-the-largest-clique-in-a-graph", "title": "Find the minimum size of the largest clique in a graph", "body": "<p>I was trying to solve a problem on finding the minimum size of the largest clique in a graph and came across the following statement of Turan's theorem.\nA graph with <code>m(k-1)</code> vertices and <code>(k-1)C2*m^2+1</code> edges contains a clique of size <code>k</code>.\nUsing the above concept, I developed two equations; given the number of edges and vertices.\nFinally, I got<br>\n<a href=\"https://i.stack.imgur.com/RlZnE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RlZnE.png\" alt=\"enter image description here\"></a> </p>\n\n<p>where k is the size of the clique. My code is as follows:</p>\n\n<pre><code>double n,m; cin&gt;&gt;n&gt;&gt;m;\n    cout&lt;&lt;round((2*m-2-2*n*n)/(2*m-2-n*n))&lt;&lt;endl;\n</code></pre>\n\n<p>I submitted my code,but it failed some of the test cases. Any help would be appreciated.\nThank you.</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 487, "user_id": 707700, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e1153716b07ad0981f63d05eeb34bdf?s=128&d=identicon&r=PG", "display_name": "Wim", "link": "https://stackoverflow.com/users/707700/wim"}, "is_accepted": false, "score": 0, "last_activity_date": 1474294148, "creation_date": 1474294148, "answer_id": 39575255, "question_id": 37034375, "link": "https://stackoverflow.com/questions/37034375/qsqlrelationaltablemodel-proper-way-to-check-if-contains-value/39575255#39575255", "title": "QSqlRelationalTableModel - proper way to check if contains value", "body": "<p>I see two possibilities (probably somebody will correct me if there are more).</p>\n\n<ol>\n<li><p>you could iterate through the column and check every instance for <code>hello</code> ?</p></li>\n<li><p>you could use a filter like <a href=\"https://forum.qt.io/topic/19079/search-bar-for-qsqltablemodel-in-qtableview/4\" rel=\"nofollow\">https://forum.qt.io/topic/19079/search-bar-for-qsqltablemodel-in-qtableview/4</a></p></li>\n</ol>\n\n<p>The sample code from that link is</p>\n\n<pre><code>model-&gt;select();\n\nQSortFilterProxyModel proxy;\nproxy.setSourceModel(model);\nproxy.setFilterWildcard(searchText);\n</code></pre>\n\n<p>I admit I did not test this code at all, just happened to stumble upon it whilst Googling, but I hope it can help you to find a correct solution?</p>\n"}], "owner": {"reputation": 5310, "user_id": 2897989, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1d8cac04b3f291c6802a58410ee1be2a?s=128&d=identicon&r=PG&f=1", "display_name": "lte__", "link": "https://stackoverflow.com/users/2897989/lte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474294148, "creation_date": 1462383095, "question_id": 37034375, "link": "https://stackoverflow.com/questions/37034375/qsqlrelationaltablemodel-proper-way-to-check-if-contains-value", "title": "QSqlRelationalTableModel - proper way to check if contains value", "body": "<p>What is the proper way to check if a certain column of a QSqlRelationalTableModel contains a certain value? If I have a <code>QSqlRelationalTableModel* tableModel</code>, and I'd like to check if the first column contains the <code>QString string = \"hello\"</code> string? Should I just loop through the items, or is there a better way?</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462382937, "post_id": 37034289, "comment_id": 61618673, "body": "Do you want the string to contain the newline characters?"}, {"owner": {"reputation": 612, "user_id": 4855672, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/cf2834daa0787f8ab428a3881dd2e69d?s=128&d=identicon&r=PG&f=1", "display_name": "Sofi Ullah Saikat", "link": "https://stackoverflow.com/users/4855672/sofi-ullah-saikat"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462383010, "post_id": 37034289, "comment_id": 61618713, "body": "yes.but a specified number of newline like 8 newlines"}], "answers": [{"tags": [], "owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "is_accepted": false, "score": 10, "last_activity_date": 1526907165, "last_edit_date": 1526907165, "creation_date": 1462383116, "answer_id": 37034383, "question_id": 37034289, "link": "https://stackoverflow.com/questions/37034289/how-to-take-a-specified-number-of-lines-as-input/37034383#37034383", "title": "How to take a specified number of lines as input?", "body": "<p>Do you want to get the first n lines?</p>\n\n<pre><code>std::string get_n_lines(std::istream&amp; input, const std::size_t n)\n{\n  std::ostringstream result;\n  std::string line;\n  std::size_t i = 0;\n\n  while (std::getline(input, line) &amp;&amp; i &lt; n)\n  {\n    result &lt;&lt; line &lt;&lt; '\\n';\n    ++i\n  }\n\n  return result.str();\n}\n\nstd::string first_4_lines = get_n_lines(std::cin, 4);\n</code></pre>\n"}], "owner": {"reputation": 612, "user_id": 4855672, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/cf2834daa0787f8ab428a3881dd2e69d?s=128&d=identicon&r=PG&f=1", "display_name": "Sofi Ullah Saikat", "link": "https://stackoverflow.com/users/4855672/sofi-ullah-saikat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1526907617, "creation_date": 1462382752, "last_edit_date": 1526907617, "question_id": 37034289, "link": "https://stackoverflow.com/questions/37034289/how-to-take-a-specified-number-of-lines-as-input", "title": "How to take a specified number of lines as input?", "body": "<p><code>cin&gt;&gt;string</code> takes input until space or new line. But <code>getline(cin,string)</code> takes input until new line. Again, <code>getline(cin,string,'c')</code> takes input until 'c'. Is there any way to ignore a few <code>'\\n'</code> character and take a specified number of lines as input?</p>\n\n<p>I tried the code below but it didn't work</p>\n\n<pre><code>int main()\n{\n   string a;\n   for(int i=0;i&lt;4;i++)\n   {\n       getline(cin,a);//take string input \n   }\n   cout&lt;&lt;a;\n}\n</code></pre>\n\n<p>here for the following input </p>\n\n<pre><code> ksafj kfaskjf(\\n)1st\n uuiiuo akjfksad(\\n)2nd\n ksafj kasfj(\\n)3rd\n asdfed kkkl(\\n) when the 4th enter comes input terminate\n</code></pre>\n\n<p>string <code>a</code> only holds <code>\"asdfed kkkl\"</code>. I want it to hold all the characters, including the end-of-lines (<code>\\n</code>).</p>\n"}, {"tags": ["c++", "opencv", "computer-vision"], "comments": [{"owner": {"reputation": 3277, "user_id": 3427404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c06cd15efe014a0e304ae60b4ef0da21?s=128&d=identicon&r=PG&f=1", "display_name": "yhenon", "link": "https://stackoverflow.com/users/3427404/yhenon"}, "edited": false, "score": 1, "creation_date": 1462383678, "post_id": 37034251, "comment_id": 61619092, "body": "If no face is detected, then <code>faces.size()</code> will be <code>0</code>."}, {"owner": {"reputation": 2372, "user_id": 2017550, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/NcmHB.jpg?s=128&g=1", "display_name": "Barney Chambers", "link": "https://stackoverflow.com/users/2017550/barney-chambers"}, "reply_to_user": {"reputation": 3277, "user_id": 3427404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c06cd15efe014a0e304ae60b4ef0da21?s=128&d=identicon&r=PG&f=1", "display_name": "yhenon", "link": "https://stackoverflow.com/users/3427404/yhenon"}, "edited": false, "score": 0, "creation_date": 1462384081, "post_id": 37034251, "comment_id": 61619360, "body": "Oh ok great thank you, I will try that"}], "owner": {"reputation": 2372, "user_id": 2017550, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/NcmHB.jpg?s=128&g=1", "display_name": "Barney Chambers", "link": "https://stackoverflow.com/users/2017550/barney-chambers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 796, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462382618, "creation_date": 1462382618, "question_id": 37034251, "link": "https://stackoverflow.com/questions/37034251/opencv-how-to-check-if-face-has-been-found", "title": "OpenCV how to check if face has been found", "body": "<p>Thanks for reading, I have modified OpenCV's Cascade Classifier to detect a face on a static image. I am now trying to work out whether or not a face has been found by the program (which then displays circles around the eyes and mouth of the inputted image), but I am not sure how to go about this.</p>\n\n<p>For reference, here is my display function, a modified version of the OpenCV tutorial for facial detection.</p>\n\n<p>Any tips or even high-level explanations would be greatly appreciated</p>\n\n<pre><code>void detectAndDisplay( Mat frame )\n{\n   std::cout &lt;&lt; \"detectAndDisplay called\" &lt;&lt; endl;\n\n   std::vector&lt;Rect&gt; faces;\n   Mat frame_gray;\n\n   cvtColor( frame, frame_gray, CV_BGR2GRAY );\n   equalizeHist( frame_gray, frame_gray );\n\n   //-- Detect faces\n   face_cascade.detectMultiScale( frame_gray, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, Size(30, 30) );\n\n   for( size_t i = 0; i &lt; faces.size(); i++ )\n   {\n      Point center( faces[i].x + faces[i].width*0.5, faces[i].y + faces[i].height*0.5 );\n      ellipse( frame, center, Size( faces[i].width*0.5, faces[i].height*0.5), 0, 0, 360, Scalar( 255, 0, 255 ), 4, 8, 0 );\n\n      Mat faceROI = frame_gray( faces[i] );\n      std::vector&lt;Rect&gt; eyes;\n\n      //-- In each face, detect eyes\n      eyes_cascade.detectMultiScale( faceROI, eyes, 1.1, 2, 0 |CV_HAAR_SCALE_IMAGE, Size(30, 30) );\n\n      for( size_t j = 0; j &lt; eyes.size(); j++ )\n      {\n          Point center( faces[i].x + eyes[j].x + eyes[j].width*0.5, faces[i].y + eyes[j].y + eyes[j].height*0.5 );\n          int radius = cvRound( (eyes[j].width + eyes[j].height)*0.25 );\n          circle( frame, center, radius, Scalar( 255, 0, 0 ), 4, 8, 0 );\n      }\n }\n   //-- Show what you got\n   imshow( window_name, frame );\n }\n</code></pre>\n"}, {"tags": ["c++", "mfc", "ofstream"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1462382897, "post_id": 37034247, "comment_id": 61618651, "body": "<code>myfile.open()</code> creates the file for you(or maybe when you create the <code>ofstream</code> object). I assume <code>myfile.is_open()</code> is not the write conditional function. Research how to check if a file is open and try other ones. Maybe <code>!myfile.fail()</code> will work"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1462382990, "post_id": 37034247, "comment_id": 61618701, "body": "<i>However, when I click the button, it creates the file but doesn&#39;t write anything inside the file</i>  -- Did you debug the program?  How do you know it entered the <code>if</code> block?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462383329, "post_id": 37034247, "comment_id": 61618879, "body": "Why do you call both constructor which opens the file and <code>open</code>? Also, do you know to check the workind directory of your app?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1462384263, "post_id": 37034247, "comment_id": 61619472, "body": "Reading on how <a href=\"http://en.cppreference.com/w/cpp/io/basic_ofstream\" rel=\"nofollow noreferrer\">std::ofstream works is required</a>. Sergey already picked off that the file is being opened twice. A flush immediately before a close is also not necessary. Close will flush. Close is also not necessary. destruction of the <code>ofstream</code> will occur on exit from the function and close the file. Further, there is no test to ensure the write was successful."}], "answers": [{"comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 51, "user_id": 6292069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a8540dcffb7ff293a6c2f3176625a624?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Ohrenberg", "link": "https://stackoverflow.com/users/6292069/samuel-ohrenberg"}, "edited": false, "score": 1, "creation_date": 1462384798, "post_id": 37034739, "comment_id": 61619806, "body": "@SamuelOhrenberg :) it usually is then you know what to look for. The standard library is extremely minimalist and expects us to fulfil all preconditions. It doesn&#39;t perform redundant checks as a rule. You&#39;ll get used to it, and learn to like the performance and elegance that is achieved as a result."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 51, "user_id": 6292069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a8540dcffb7ff293a6c2f3176625a624?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Ohrenberg", "link": "https://stackoverflow.com/users/6292069/samuel-ohrenberg"}, "edited": false, "score": 0, "creation_date": 1462384885, "post_id": 37034739, "comment_id": 61619860, "body": "@SamuelOhrenberg re your edit. it&#39;s not that you don&#39;t have to open the file. It&#39;s that you opened the file when you used the constructor that takes a filename. If you had used the default constructor, you would have had to subsequently open the file."}, {"owner": {"reputation": 51, "user_id": 6292069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a8540dcffb7ff293a6c2f3176625a624?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Ohrenberg", "link": "https://stackoverflow.com/users/6292069/samuel-ohrenberg"}, "edited": false, "score": 0, "creation_date": 1462385126, "post_id": 37034739, "comment_id": 61620015, "body": "Oooooh, I get it. So the default constructor just creates an instance of &quot;myfile&quot;, but it has an option to include the location of the file and open it automatically"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 51, "user_id": 6292069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a8540dcffb7ff293a6c2f3176625a624?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Ohrenberg", "link": "https://stackoverflow.com/users/6292069/samuel-ohrenberg"}, "edited": false, "score": 0, "creation_date": 1462385556, "post_id": 37034739, "comment_id": 61620297, "body": "@SamuelOhrenberg the ofstream is (as it&#39;s name suggests) a stream. A layer over the actual file handle. The constructor that takes a filename implicitly calls open() as part of the constructor. The destructor will automatically flush the stream and close the underlying file, if it&#39;s open. cppreference.com is a good place to read about these things. <a href=\"http://en.cppreference.com/w/cpp/io/basic_ofstream\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/basic_ofstream</a>"}, {"owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "edited": false, "score": 1, "creation_date": 1462392155, "post_id": 37034739, "comment_id": 61624104, "body": "There is no <code>undefined behaviour</code> here: the call to <code>open()</code> will fail because the stream is already associated with the file, setting the failbit. The call to <code>is_open()</code> will succeed, as the file is open. Then the call to streaming operator <code>&lt;&lt;</code> will fail (because of the failbit) - but who is checking? :)"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "edited": false, "score": 0, "creation_date": 1462399844, "post_id": 37034739, "comment_id": 61627878, "body": "@VladFeinstein if you make this an answer I&#39;ll upvote it."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 4, "last_activity_date": 1462384376, "creation_date": 1462384376, "answer_id": 37034739, "question_id": 37034247, "link": "https://stackoverflow.com/questions/37034247/ofstream-creating-file-but-not-writing-to-it-in-c/37034739#37034739", "title": "ofstream creating file but not writing to it in C++", "body": "<p>commenting out the redundant \"open\" solves it.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nint main()\n{\n    // in this function, we want to export the items to a text file\n    std::ofstream myfile(\"TodayTime.txt\");\n//    myfile.open(\"TodayTime.txt\");\n    if (myfile.is_open())\n    {\n        myfile &lt;&lt; \"The average call time is \";\n        myfile.flush();\n        myfile.close();\n    }\n    else\n    {\n        std::cerr &lt;&lt; \"didn't write\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>I strongly suspect that you're invoking undefined behaviour by opening and already-open stream.</p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 4962474, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/lFydm.jpg?s=128&g=1", "display_name": "quanta", "link": "https://stackoverflow.com/users/4962474/quanta"}, "edited": false, "score": 0, "creation_date": 1612721798, "post_id": 37052100, "comment_id": 116849532, "body": "Thanks. Then, what is the solution?"}, {"owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "reply_to_user": {"reputation": 77, "user_id": 4962474, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/lFydm.jpg?s=128&g=1", "display_name": "quanta", "link": "https://stackoverflow.com/users/4962474/quanta"}, "edited": false, "score": 0, "creation_date": 1612753002, "post_id": 37052100, "comment_id": 116856368, "body": "@quanta don&#39;t open the file twice :)"}], "tags": [], "owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "is_accepted": false, "score": 4, "last_activity_date": 1462455366, "creation_date": 1462455366, "answer_id": 37052100, "question_id": 37034247, "link": "https://stackoverflow.com/questions/37034247/ofstream-creating-file-but-not-writing-to-it-in-c/37052100#37052100", "title": "ofstream creating file but not writing to it in C++", "body": "<p>Here is the explanation:</p>\n\n<ol>\n<li>The call to <code>myfile.open(\"TodayTime.txt\");</code> will fail because the stream is already associated with the file, setting the failbit. </li>\n<li>The call to <code>is_open()</code> will succeed, as the file is open. </li>\n<li>Then the call to streaming operator <code>&lt;&lt;</code> will fail (because of the failbit).</li>\n</ol>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10306682"}, "is_accepted": false, "score": 0, "last_activity_date": 1587237412, "creation_date": 1587237412, "answer_id": 61294880, "question_id": 37034247, "link": "https://stackoverflow.com/questions/37034247/ofstream-creating-file-but-not-writing-to-it-in-c/61294880#61294880", "title": "ofstream creating file but not writing to it in C++", "body": "<p>this is because <code>myfile &lt;&lt; \"The average call time is \";</code> not working \nto fix that </p>\n\n<pre><code>std::ofstream myfile;\nmyfile.open(\"TodayTime.txt\",std::ios:app) //app for appending you can use trunc for\n  //truncating file \n  //for flushing content's of existing file use myfile.flush();\nif (!data_pack.is_open())\n{\n    std::cerr &lt;&lt; \"unable to open the file for writing\";\n}\n\n myfile &lt;&lt; \"some stuff tho write you can replace the string with variable\"\n  &lt;&lt;std::endl; //for next line\n  //at last close file\n   myfile.close();\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 6292069, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a8540dcffb7ff293a6c2f3176625a624?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Ohrenberg", "link": "https://stackoverflow.com/users/6292069/samuel-ohrenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9255, "favorite_count": 0, "accepted_answer_id": 37034739, "answer_count": 3, "score": 3, "last_activity_date": 1587237412, "creation_date": 1462382608, "last_edit_date": 1462385190, "question_id": 37034247, "link": "https://stackoverflow.com/questions/37034247/ofstream-creating-file-but-not-writing-to-it-in-c", "title": "ofstream creating file but not writing to it in C++", "body": "<p>I am writing an MFC program that has a dialog with an \"Export\" button that will take all of the data that has been entered into the file and export it to a .txt (at some point I want to change this to a .msg file...but that's a question for another day).</p>\n\n<p>However, when I click the button, it creates the file but doesn't write anything inside the file. For testing, I removed everything except just a simple literal string and even that isn't printing. Here is the current code for that event: The myfile.flush() statement is leftover from when I had a loop that I was trying to print to the file.</p>\n\n<pre><code>void CEHDAHTTimerDlg::OnBnClickedExport()\n{\n    // in this function, we want to export the items to a text file\n    std::ofstream myfile(\"TodayTime.txt\");\n    myfile.open(\"TodayTime.txt\");\n    if (myfile.is_open())\n    {\n        myfile &lt;&lt; \"The average call time is \";\n        myfile.flush();\n        myfile.close();\n    }\n    else\n    {\n        SetDlgItemText(IDC_EXPORT, L\"Export Unsuccessful! --     No File\");\n    }\n}\n</code></pre>\n\n<p>Is there anything you all can think of that could be causing this? I've been at it for a few hours trying different things, like utilizing a myfile.write() function instead. I've searched a lot around here, reddit, and google in general trying to find out why this isn't writing.</p>\n\n<p>I appreciate your help.</p>\n\n<p>EDIT:</p>\n\n<p>Okay, calling the myfile constructor the way that I did, by including the file name, went ahead and did what open file would have done</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c++", "unit-testing", "mocking", "googletest"], "comments": [{"owner": {"reputation": 472, "user_id": 1992776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/564eaaa89de37dbcc59c5f95f46f3f36?s=128&d=identicon&r=PG", "display_name": "army007", "link": "https://stackoverflow.com/users/1992776/army007"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1462383354, "post_id": 37034220, "comment_id": 61618896, "body": "@SergeyA I can&#39;t give up just like that. Can&#39;t I do some macro and/or template tricks to break the dependency? I have an idea, but I am not sure if it is good. I will post that as an answer. But I am waiting for others if someone else has a better idea."}, {"owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1462385334, "post_id": 37034220, "comment_id": 61620139, "body": "My experience is with CppUTest, so the terms might be off. But the best that could be expected is that you check that the MyClass::DoSomething functions as expected up to the external call, at which point you could test that you are passing it what you expect. In CppUTest this is acomplished through mocking, I&#39;m not sure what the GoogleTest equivelent is."}, {"owner": {"reputation": 472, "user_id": 1992776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/564eaaa89de37dbcc59c5f95f46f3f36?s=128&d=identicon&r=PG", "display_name": "army007", "link": "https://stackoverflow.com/users/1992776/army007"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462387304, "post_id": 37034220, "comment_id": 61621391, "body": "@SergeyA You are right I can&#39;t really apply the macro and/or template magic here. I tried to templatize the baseclass so that I can feed a mock to it. But it did not work."}, {"owner": {"reputation": 472, "user_id": 1992776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/564eaaa89de37dbcc59c5f95f46f3f36?s=128&d=identicon&r=PG", "display_name": "army007", "link": "https://stackoverflow.com/users/1992776/army007"}, "reply_to_user": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1462387309, "post_id": 37034220, "comment_id": 61621395, "body": "@Aumnayan GoogleTest has mocks. And your idea of expecting external calls from MyClass::DoSomething() seems the only way. That ofcourse implies I need the source code of the external class to know what external calls it would make. And by any chance if it call any static or global function then we are doomed again."}], "answers": [{"comments": [{"owner": {"reputation": 472, "user_id": 1992776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/564eaaa89de37dbcc59c5f95f46f3f36?s=128&d=identicon&r=PG", "display_name": "army007", "link": "https://stackoverflow.com/users/1992776/army007"}, "edited": false, "score": 0, "creation_date": 1462547541, "post_id": 37068037, "comment_id": 61696211, "body": "Thank you very much. Both of the ways are very effective and it has solved my problem. I like the &quot;ugly way&quot; most. Because I can use conditional compilation and replace the <code>ExternalBase</code> class with this fake class. In &quot;more correct way&quot; every base class method (that I want to test) have to have a corresponding method in derived class.  @PiotrNycz  Is there any particular reason for calling it the &quot;ugly way&quot;? Is there any problem that may arise with this approach?"}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 472, "user_id": 1992776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/564eaaa89de37dbcc59c5f95f46f3f36?s=128&d=identicon&r=PG", "display_name": "army007", "link": "https://stackoverflow.com/users/1992776/army007"}, "edited": false, "score": 0, "creation_date": 1462549322, "post_id": 37068037, "comment_id": 61697370, "body": "the problem is its thread unfriendliness and you can have effectively just one object of such &quot;ugly mocked&quot; class. In most cases in UT - they are not a big problems. The more important is that it is a little against philosophy of mocking bla bla bla...  Just use it if it is best suited for you needs..."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 472, "user_id": 1992776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/564eaaa89de37dbcc59c5f95f46f3f36?s=128&d=identicon&r=PG", "display_name": "army007", "link": "https://stackoverflow.com/users/1992776/army007"}, "edited": false, "score": 0, "creation_date": 1462549454, "post_id": 37068037, "comment_id": 61697491, "body": "BTW both problems have workarounds  - but it complicates more what you are testing - so probably not big deal"}, {"owner": {"reputation": 472, "user_id": 1992776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/564eaaa89de37dbcc59c5f95f46f3f36?s=128&d=identicon&r=PG", "display_name": "army007", "link": "https://stackoverflow.com/users/1992776/army007"}, "edited": false, "score": 0, "creation_date": 1462549893, "post_id": 37068037, "comment_id": 61697813, "body": "Yeah for me those are not problem. I am planing to test MFC&#39;s <code>CWnd</code> derived classes. I don&#39;t want to create window as that will require to have a message loop which is problematic in testing."}], "tags": [], "owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "is_accepted": true, "score": 2, "last_activity_date": 1462549491, "last_edit_date": 1495535637, "creation_date": 1462524398, "answer_id": 37068037, "question_id": 37034220, "link": "https://stackoverflow.com/questions/37034220/how-to-test-classes-that-is-derived-from-external-base-class-which-depends-on-ex/37068037#37068037", "title": "How to test classes that is derived from external base class which depends on external system", "body": "<p>There are two ways. I call them \"a little more correct\" way and \"very ugly\" way. </p>\n\n<hr>\n\n<p>The \"more correct\" way:</p>\n\n<p>Enclose external class functions with some additional layer than can be partial mocked.</p>\n\n<pre><code>class MyClass : public ExternalBase // This class is from external framework and framework requires it to derive from this class.\n{\n    int doSomePrivateThing(int );\npublic: \n    virtual void BaseDoSomething(int) { return ExternalBase::DoSomething(v); }\n    virtual int DoSomething(int v);\n    virtual ~MyClass();\n};\n\nint MyClass::DoSomething(int n)\n{\n    // Do MyClass Specific task\n    int k = doSomePrivateThing(n);\n    return BaseDoSomething(k); \n}\n</code></pre>\n\n<p>And partial mock in UT in this way:</p>\n\n<pre><code>class TestableMyClass : public MyClass\n{\npublic:\n    using MyClass::MyClass;\n    MOCK_METHOD1(BaseDoSomething, int(int));\n}; \n\nTEST(A,A)\n{\n    TestableMyClass objectUnderTest;\n    EXPECT_CALL(objectUnderTest, BaseDoSomething(112));\n\n    objectUnderTest.DoSomething(112);\n}\n</code></pre>\n\n<p>When you need to call also the true base class method in your test - use <a href=\"https://stackoverflow.com/questions/5807302/calling-a-method-when-expected-method-on-mock-was-invoked\"><code>WillOnce(Invoke...)</code></a> with EXPECT_CALL.</p>\n\n<hr>\n\n<p>The \"very ugly\" way:</p>\n\n<p>Provide your own UnitTest implementation of ExternalBase and link it to your test. This \"UnitTest\" impolementation of ExternalBase should be based on some global Mocks objects.</p>\n\n<p><strong>ExternalBaseMock.hpp:</strong></p>\n\n<pre><code>class ExternalBaseMock \n{\npublic:\n    MOCK_METHOD1(DoSomething, int(int));\n};\nextern ExternalBaseMock  externalBaseMock;\n</code></pre>\n\n<p><strong>ExternalBaseMock.cpp:</strong></p>\n\n<pre><code>ExternalBaseMock  externalBaseMock;\n\nint ExternalBase::DoSomething(int n)\n{\n    return externalBaseMock.DoSomething(n);\n}\n</code></pre>\n\n<p>Then your tests:</p>\n\n<pre><code>#include \"ExternalBaseMock.hpp\"\n\nTEST(A,A)\n{\n    MyClass objectUnderTest;\n    EXPECT_CALL(externalBaseMock, DoSomething(112));\n\n    objectUnderTest.DoSomething(112);\n}\n</code></pre>\n"}], "owner": {"reputation": 472, "user_id": 1992776, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/564eaaa89de37dbcc59c5f95f46f3f36?s=128&d=identicon&r=PG", "display_name": "army007", "link": "https://stackoverflow.com/users/1992776/army007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1071, "favorite_count": 1, "accepted_answer_id": 37068037, "answer_count": 1, "score": 1, "last_activity_date": 1462549491, "creation_date": 1462382496, "question_id": 37034220, "link": "https://stackoverflow.com/questions/37034220/how-to-test-classes-that-is-derived-from-external-base-class-which-depends-on-ex", "title": "How to test classes that is derived from external base class which depends on external system", "body": "<p>I have a class that is subclass of an external class over which I don't have any control. The external class depend on system resources. For example </p>\n\n<pre><code>class MyClass : public ExternalBase // This class is from external framework and framework requires it to derive from this class.\n{\n    int doSomePrivateThing(int );\npublic: \n\n    virtual int DoSomething(int );\n    virtual ~MyClass();\n}\n\nint MyClass::doSomePrivateThing(int )\n{\n    // do some private task\n}\n\nint MyClass::DoSomething(int n)\n{\n    // Do MyClass Specific task\n    int k = doSomePrivateThing(n);\n    return ExternalBase::DoSomething(k); // This function depends on external system resources.\n                                         // Probably try to communicate with remote server \n                                         // or attempt access Storage or Display device etc.\n}\n\nMyClass::~MyClass()\n{}\n</code></pre>\n\n<p>How can I break the dependency of MyClass and write unit test for MyClass::DoSomething(). Using composition in place of inheritance is not a choice as framework requires classes to be derived from this base class. </p>\n\n<p>I am using C++ and GoogleTest/Mock. But any generalized solution is appreciated.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "com", "directshow", "guid", "clsid"], "answers": [{"tags": [], "owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "is_accepted": true, "score": 4, "last_activity_date": 1462382935, "creation_date": 1462382935, "answer_id": 37034339, "question_id": 37034204, "link": "https://stackoverflow.com/questions/37034204/guid-and-clsid-in-different-formats/37034339#37034339", "title": "GUID and CLSID in different formats?", "body": "<p>CLSID is fundamental COM identifier for registered class. DirectShow filters which are registered to be available to public all have their CLSIDs, hardcoded by their developers. If your work on MP4 filter supposes that you are a developer of MP4 filter, then you need to put your own CLSID in (generate by <a href=\"https://msdn.microsoft.com/en-us/library/ms241442\" rel=\"nofollow noreferrer\">\"Create GUID\" (guidgen.exe)</a> tool, by API <a href=\"http://pragmateek.com/4-ways-to-generate-a-guid/\" rel=\"nofollow noreferrer\">etc</a>). If you want to look up CLSID of existing registered filter, you can find it out using GraphEdit, or rather <a href=\"https://github.com/cplussharp/graph-studio-next\" rel=\"nofollow noreferrer\">GraphStudioNext</a> browsing registered filter list:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7qi9q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7qi9q.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 390, "user_id": 1249893, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c7e0edfda15780f15f4db0a708abf2f8?s=128&d=identicon&r=PG", "display_name": "Michael Chi Lam", "link": "https://stackoverflow.com/users/1249893/michael-chi-lam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "accepted_answer_id": 37034339, "answer_count": 1, "score": 0, "last_activity_date": 1462382963, "creation_date": 1462382444, "last_edit_date": 1462382963, "question_id": 37034204, "link": "https://stackoverflow.com/questions/37034204/guid-and-clsid-in-different-formats", "title": "GUID and CLSID in different formats?", "body": "<p>I'm working on a MP4 filter in DirectShow. I am current trying to create a IBaseFilter object but one of the requirements is CLSID for CoCreateInstance.</p>\n\n<p>I am confused about where this ID comes from. Can I get it from the GraphEdit > Insert Filter? If so, it gives me in the format of {00000000-0000-0000-0000-000000000000} However most examples I've seen are in the format of</p>\n\n<pre><code>static const GUID CLSID_MPEG4Demux = { 0x025BE2E4, 0x1787, 0x4DA4, 0xA5, 0x85, 0xC5, 0xB2, 0xB9, 0xEE, 0xB5, 0x7C };\n</code></pre>\n\n<p>Do I need a converter for it?</p>\n"}, {"tags": ["c#", "c++", "garbage-collection"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1462383474, "post_id": 37034021, "comment_id": 61618965, "body": "The GC will destroy the delegate object, it cannot see it being used by native code.  It is your job to keep it alive.  Either store it in a <i>static</i> variable or use GCHandle.Alloc().  Do not set the variable back to null or call GCHandle.Free() until you are sure that the native code can no longer make the callback."}, {"owner": {"reputation": 7510, "user_id": 361455, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c58917923f3cc4e75c83f44470977e5?s=128&d=identicon&r=PG", "display_name": "Klark", "link": "https://stackoverflow.com/users/361455/klark"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1462383834, "post_id": 37034021, "comment_id": 61619192, "body": "My question is also what should I pin in this case - is it sufficient to just pin the delegate, or should I pin the <i>this</i> object which is reference by the delegate as well?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1462400097, "post_id": 37034021, "comment_id": 61627983, "body": "Only the delegate object.  You are not creating it explicitly in your snippet, use variable = new MyDelegate(MyFunc); DelegateSet(variable); where <i>variable</i> is a static variable."}], "owner": {"reputation": 7510, "user_id": 361455, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c58917923f3cc4e75c83f44470977e5?s=128&d=identicon&r=PG", "display_name": "Klark", "link": "https://stackoverflow.com/users/361455/klark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1462383630, "answer_count": 0, "score": 0, "last_activity_date": 1462382136, "creation_date": 1462381773, "last_edit_date": 1462382136, "question_id": 37034021, "link": "https://stackoverflow.com/questions/37034021/calling-a-managed-delegate-from-native-code", "closed_reason": "Duplicate", "title": "Calling a managed delegate from native code", "body": "<p>I have a native function which accepts a pointer to function which should be called periodically throughout the lifetime of the process. This function is exported from the dll where it is defined.</p>\n\n<p>Now, from managed code I want to call this function with my delegate as an argument. Also my delegate is a non-static one (it references <em>this</em>).</p>\n\n<p>So:</p>\n\n<pre><code>    [UnmanagedFunctionPointer(CallingConvention.Winapi)]\n    public delegate void MyDelegate([MarshalAs(UnmanagedType.LPWStr)] string myString);\n\n    [DllImport(\"mydll\")]\n    public static extern int DelegateSet(MyDelegate);\n\n    public void MyFunc(string myString)\n    {\n       // Do something here.\n    }\n\n    // Somewhere in managed code:\n    DelegateSet(MyFunc);\n</code></pre>\n\n<p>And this works but only for the short time. Native code calls this callback a couple of times and then I hit an AV. My guess is that garbage collector moves the object which contains the delegate and native code has a loose reference.</p>\n\n<p>I would appreciate any pointers on how to proceed.</p>\n"}, {"tags": ["c++", "algorithm", "graph"], "answers": [{"comments": [{"owner": {"reputation": 2159, "user_id": 1080517, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2716302deba4765ec00122e0b0da833d?s=128&d=identicon&r=PG", "display_name": "sebap123", "link": "https://stackoverflow.com/users/1080517/sebap123"}, "edited": false, "score": 0, "creation_date": 1462394723, "post_id": 37036514, "comment_id": 61625450, "body": "Thank you very much for all of your suggestions! I&#39;ve run additional tests and updated my question. As for the rest of your suggestions: 1) I need to check method for calculating center of mass. 2) That&#39;s good idea. I need to test it, because indeed this might be causing some problems now when I think about it. 3) I agree that name is not 100% correct but that&#39;s only because I was reading about quadtrees at the time I was implementing it and totally forget to change the name later :)"}], "tags": [], "owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "is_accepted": false, "score": 3, "last_activity_date": 1462391750, "last_edit_date": 1462391750, "creation_date": 1462390529, "answer_id": 37036514, "question_id": 37033902, "link": "https://stackoverflow.com/questions/37033902/optimization-issues-using-barnes-hut-for-graph-placing/37036514#37036514", "title": "Optimization issues using Barnes-Hut for graph placing", "body": "<p>Just off the top of my head,</p>\n\n<pre><code>#define MAX_LEVELS 5\n</code></pre>\n\n<p>seems awfully low.  You may simply be running out of depth in your octree, causing your algorithm to degenerate into O(<em>n</em>&sup2;) direct summing.  You may want to try increasing <code>MAX_LEVELS</code> to a significantly higher value (at least, say, 10 or 20) and seeing if that improves the performance.</p>\n\n<p>I haven't tested your code, so I can't be sure if this is the real issue, or the only one.  But it's definitely what I'd check first.</p>\n\n<hr>\n\n<p>Looking a bit more closely at your code, I'm seeing a couple of other potential issues, too.  These might not, strictly speaking, affect performance, but they might affect the <em>correctness</em> of the results.</p>\n\n<p>First, you have a <code>center</code> vector in your <code>Quadtree</code> class, presumably representing the center of mass of the nodes within the subtree, but you never seem to update that vector when adding nodes into the tree.  Since you do <em>use</em> that vector in your calculations, you might be getting bogus results because of that.</p>\n\n<p>(In fact, since one thing you're using the <code>center</code> vector for is calculating the distance between a node and a subtree, and so deciding whether to descend deeper into the subtree, that might also be messing up your performance.)</p>\n\n<p>Also, you seem to be updating the positions directly while traversing the tree, which means that the trajectories generated by your algorithm will depend on the order in which the nodes are traversed and the tree expanded.  For more consistent and reproducible results, you may want to first calculate the displacement of each node during the current iteration of the algorithm, storing it in a separate vector, and then run a second pass over the nodes to add the displacement to their position (and reset it for the next iterations).</p>\n\n<p>Also, surely I can't be the only one who finds the fact that you have a class named <code>Quadtree</code> that implements an <em>oc</em>tree annoying, can I? :)  </p>\n"}], "owner": {"reputation": 2159, "user_id": 1080517, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2716302deba4765ec00122e0b0da833d?s=128&d=identicon&r=PG", "display_name": "sebap123", "link": "https://stackoverflow.com/users/1080517/sebap123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1462394369, "creation_date": 1462381302, "last_edit_date": 1462394369, "question_id": 37033902, "link": "https://stackoverflow.com/questions/37033902/optimization-issues-using-barnes-hut-for-graph-placing", "title": "Optimization issues using Barnes-Hut for graph placing", "body": "<p>I've been trying to work out the problem of Force-Directed graph/Barnes-Hut in my graph visualization app. I've checked so far octree creation, and it looks correctly (tree is represented by boxes and circles are my graph nodes):\n<a href=\"https://i.stack.imgur.com/aOBDj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aOBDj.png\" alt=\"Quadtree test\"></a>\nFields in my <code>Quadtree</code> are following:</p>\n\n<pre><code>class Quadtree\n{\n    public:\n        int level;\n        Quadtree* trees[2][2][2];\n        glm::vec3 vBoundriesBox[8];\n        glm::vec3 center;\n        bool leaf;\n        float combined_weight = 0;\n        std::vector&lt;Element*&gt; objects;\n        //Addition methods/fields\n    private:\n    //Additional methods/fields\n    protected:\n}\n</code></pre>\n\n<p>This is how I am adding elements recursively to my quadtree:</p>\n\n<pre><code>#define MAX_LEVELS 5\n\nvoid Quadtree::AddObject(Element* object)\n{\n    this-&gt;objects.push_back(object);\n}\n\nvoid Quadtree::Update()\n{\n    if(this-&gt;objects.size()&lt;=1 || level &gt; MAX_LEVELS)\n    {\n        for(Element* Element:this-&gt;objects)\n        {\n            Element-&gt;parent_group = this;\n            this-&gt;combined_weight += Element-&gt;weight;\n        }\n        return;\n    }\n\n    if(leaf)\n    {\n        GenerateChildren();\n        leaf = false;\n    }\n\n    while (!this-&gt;objects.empty())\n    {\n        Element* obj = this-&gt;objects.back();\n        this-&gt;objects.pop_back();\n        if(contains(trees[0][0][0],obj))\n        {\n            trees[0][0][0]-&gt;AddObject(obj);\n            trees[0][0][0]-&gt;combined_weight += obj-&gt;weight;\n        } else if(contains(trees[0][0][1],obj))\n        {\n            trees[0][0][1]-&gt;AddObject(obj);\n            trees[0][0][1]-&gt;combined_weight += obj-&gt;weight;\n        } else if(contains(trees[0][1][0],obj))\n        {\n            trees[0][1][0]-&gt;AddObject(obj);\n            trees[0][1][0]-&gt;combined_weight += obj-&gt;weight;\n        } else if(contains(trees[0][1][1],obj))\n        {\n            trees[0][1][1]-&gt;AddObject(obj);\n            trees[0][1][1]-&gt;combined_weight += obj-&gt;weight;\n        } else if(contains(trees[1][0][0],obj))\n        {\n            trees[1][0][0]-&gt;AddObject(obj);\n            trees[1][0][0]-&gt;combined_weight += obj-&gt;weight;\n        } else if(contains(trees[1][0][1],obj))\n        {\n            trees[1][0][1]-&gt;AddObject(obj);\n            trees[1][0][1]-&gt;combined_weight += obj-&gt;weight;\n        } else if(contains(trees[1][1][0],obj))\n        {\n            trees[1][1][0]-&gt;AddObject(obj);\n            trees[1][1][0]-&gt;combined_weight += obj-&gt;weight;\n        } else if(contains(trees[1][1][1],obj))\n        {\n            trees[1][1][1]-&gt;AddObject(obj);\n            trees[1][1][1]-&gt;combined_weight += obj-&gt;weight;\n        }\n    }\n\n    for(int i=0;i&lt;2;i++)\n    {\n        for(int j=0;j&lt;2;j++)\n        {\n            for(int k=0;k&lt;2;k++)\n            {\n                trees[i][j][k]-&gt;Update();\n            }\n        }\n    }\n}\n\nbool Quadtree::contains(Quadtree* child, Element* object)\n{\n    if(object-&gt;pos[0] &gt;= child-&gt;vBoundriesBox[0][0] &amp;&amp; object-&gt;pos[0] &lt;= child-&gt;vBoundriesBox[1][0] &amp;&amp;\n       object-&gt;pos[1] &gt;= child-&gt;vBoundriesBox[4][1] &amp;&amp; object-&gt;pos[1] &lt;= child-&gt;vBoundriesBox[0][1] &amp;&amp;\n       object-&gt;pos[2] &gt;= child-&gt;vBoundriesBox[3][2] &amp;&amp; object-&gt;pos[2] &lt;= child-&gt;vBoundriesBox[0][2])\n        return true;\n    return false;\n}\n</code></pre>\n\n<p>As you can see on the picture nodes are very clustered. I've been trying to figure out the way to fix my repulsion force calculations, but it still not working and result is still this same.</p>\n\n<p>So how I'm calculating it:</p>\n\n<p>First in my main file I am running loop through all graph nodes:</p>\n\n<pre><code>for(auto&amp; n_el:graph-&gt;node_vector)\n{\n    tree-&gt;CheckNode(&amp;n_el);\n}\n</code></pre>\n\n<p>Next in my <code>Qyadtree</code> class, (<code>tree</code> is this class object), I have this recursive method:</p>\n\n<pre><code>void Quadtree::CheckNode(Node* node)\n{\n    glm::vec3 diff = this-&gt;center - node-&gt;pos;\n\n    double distance_sqr = (diff.x * diff.x) + (diff.y*diff.y) + (diff.z*diff.z);\n    double width_sqr = (vBoundriesBox[1][0] - vBoundriesBox[0][0]) * (vBoundriesBox[1][0] - vBoundriesBox[0][0]);\n    if(width_sqr/distance_sqr &lt; 10.0f || leaf)\n    {\n        if(leaf)\n        {\n            for(auto&amp; n: objects)\n            {\n                n-&gt;Repulse(&amp;objects);\n            }\n        }\n        else\n        {\n            node-&gt;RepulseWithGroup(this);\n        }\n    }\n    else\n    {\n        for(int i=0; i&lt;2; i++)\n        {\n            for(int j=0; j&lt;2; j++)\n            {\n                for(int k=0; k&lt;2; k++)\n                {\n                    trees[i][j][k]-&gt;CheckNode(node);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Finally I have two methods calculate repulse force depending on the fact if it's between group and node or between two nodes:</p>\n\n<pre><code>double Node::Repulse(std::vector&lt;Node*&gt;* nodes)\n{\n    double dx;\n    double dy;\n    double dz;\n    double force = 0.0;\n    double distance_between;\n    double delta_weights;\n    double temp;\n    for(auto&amp; element_node:*nodes)\n    {\n        if(this-&gt;name == element_node-&gt;name)\n        {\n            continue;\n        }\n        if(!element_node-&gt;use) continue;\n        delta_weights = 0.5 + abs(this-&gt;weight - element_node-&gt;weight);\n        dx = this-&gt;pos[0] - element_node-&gt;pos[0];\n        dy = this-&gt;pos[1] - element_node-&gt;pos[1];\n        dz = this-&gt;pos[2] - element_node-&gt;pos[2];\n        distance_between = dx * dx + dy * dy + dz * dz;\n        force = 0.19998 * delta_weights/(distance_between * distance_between);\n        temp = std::min(1.0, force);\n        if(temp&lt;0.0001)\n        {\n            temp = 0;\n        }\n        double mx = temp * dx;\n        double my = temp * dy;\n        double mz = temp * dz;\n        this-&gt;pos[0] += mx;\n        this-&gt;pos[1] += my;\n        this-&gt;pos[2] += mz;\n        element_node-&gt;pos[0] -= mx;\n        element_node-&gt;pos[1] -= my;\n        element_node-&gt;pos[2] -= mz;\n    }\n}\n\nvoid Node::RepulseWithGroup(Quadtree* tree)\n{\n    double dx;\n    double dy;\n    double dz;\n    double force = 0.0;\n    double distance_between;\n    double delta_weights;\n    double temp;\n\n    delta_weights = 0.5 + abs(this-&gt;weight - tree-&gt;combined_weight);\n    dx = this-&gt;pos[0] - tree-&gt;center.x;\n    dy = this-&gt;pos[1] - tree-&gt;center.y;\n    dz = this-&gt;pos[2] - tree-&gt;center.z;\n    distance_between = dx * dx + dy * dy + dz * dz;\n    force = 0.19998 * delta_weights/(distance_between * distance_between);\n    temp = std::min(1.0, force);\n    if(temp&lt;0.0001)\n    {\n        temp = 0;\n    }\n    double mx = temp * dx;\n    double my = temp * dy;\n    double mz = temp * dz;\n    this-&gt;pos[0] += mx + this-&gt;parent_group-&gt;repulsion_force.x;\n    this-&gt;pos[1] += my + this-&gt;parent_group-&gt;repulsion_force.y;\n    this-&gt;pos[2] += mz + this-&gt;parent_group-&gt;repulsion_force.z;\n}\n</code></pre>\n\n<p>In case this idea:</p>\n\n<pre><code>if(width_sqr/distance_sqr &lt; 10.0f || leaf)\n    {\n        if(leaf)\n        {\n            for(auto&amp; n: objects)\n            {\n                n-&gt;Repulse(&amp;objects);\n            }\n        }\n        else\n        {\n            node-&gt;RepulseWithGroup(this);\n        }\n    }\n</code></pre>\n\n<p>is not clear it is because I've figured out, that there might be actually multiple elements in one tree leaf. That might happen if the maximum level might be already reached and still elements are in one box. Then I need also to calculate force within box against nodes inside.</p>\n\n<p>What's more is bothering me is the speed of this approach (and it's indicating that octree is not working correctly) is the speed. This is simple plot representing time/number of nodes:\n<a href=\"https://i.stack.imgur.com/sV8pN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sV8pN.png\" alt=\"Plot\"></a>\nAs far as I know the original Force-directed graph algorithm have complexity <code>O(n^2)</code>, but with Barnes-Hut it should be <code>O(nlogn)</code>. Yet, the plot it's not even close to nlogn.</p>\n\n<p>Can someone tell me what I am doing here wrong? I've been looking at this code for quite a long now, and I don't see where I am missing something.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Based on @Ilmari Karonen answer I've run test for <code>MAX_LEVELS</code> 5, 20, 50, 100. Results are below. As it looks there is no meaningful difference I'd say (unfortunately)\n<a href=\"https://i.stack.imgur.com/iR67C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iR67C.png\" alt=\"times\"></a></p>\n"}, {"tags": ["c#", "c++", "xaml", "win-universal-app", "dds-format"], "answers": [{"tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": true, "score": 1, "last_activity_date": 1462383313, "last_edit_date": 1462383313, "creation_date": 1462382991, "answer_id": 37034353, "question_id": 37033835, "link": "https://stackoverflow.com/questions/37033835/load-and-display-dds-dxt1-file-in-uwp-app/37034353#37034353", "title": "Load and display DDS (DXT1) file in UWP app", "body": "<p>In Windows 8.1 and Windows 10, the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dn280986.aspx\" rel=\"nofollow\">Windows Imaging Component</a> has a built-in codec for loading DDS files that use BC1/DXT1 compression. The simplest way to use WIC from a C# UWP is to use <a href=\"https://github.com/Microsoft/Win2D\" rel=\"nofollow\">Win2D</a>. Keep in mind WIC is going to return an uncompressed version of the image, which if that's what you want then you are good-to-go.</p>\n\n<blockquote>\n  <p>Note that the built-in DDS codec only supports DXT1-DXT5/BC1-BC3 2D image files. It won't load other forms of DDS files. A quick way to check is to look in File Explorer. If the DDS shows up with a thumbnail, it's supported.</p>\n</blockquote>\n\n<p>It's not clear from your question what it is you are going to do with the loaded data. If you want to use Direct3D from C#, then you should look at something like <a href=\"http://sharpdx.org/\" rel=\"nofollow\">SharpDX</a> or <a href=\"http://www.slimdx.org/\" rel=\"nofollow\">SlimDX</a>. If you are using Direct2D, Win2D is the way to go.</p>\n\n<blockquote>\n  <p>For when to use <a href=\"https://github.com/Microsoft/DirectXTex\" rel=\"nofollow\">DirectXTex</a> vs. DDSTextureLoader for loading DDS files, see <a href=\"https://blogs.msdn.microsoft.com/chuckw/2012/05/04/direct3d-11-textures-and-block-compression/\" rel=\"nofollow\">this blog post</a>. In short: DirectXTex is for tools that need to handle all the various format conversions particularly legacy DDS file formats; DDSTextureLoader in <a href=\"https://github.com/Microsoft/DirectXTK\" rel=\"nofollow\">DirectX Tool Kit</a> is intended for 'runtime' use where you can ensure you are loading a DDS file that is already in a supported DXGI format.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 249, "user_id": 6178984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f06ac56aa37dfd75e80cafcf9ed977d?s=128&d=identicon&r=PG&f=1", "display_name": "Shawn Hargreaves", "link": "https://stackoverflow.com/users/6178984/shawn-hargreaves"}, "is_accepted": false, "score": 1, "last_activity_date": 1462722921, "creation_date": 1462722921, "answer_id": 37101805, "question_id": 37033835, "link": "https://stackoverflow.com/questions/37033835/load-and-display-dds-dxt1-file-in-uwp-app/37101805#37101805", "title": "Load and display DDS (DXT1) file in UWP app", "body": "<p>Win2D can load and draw directly from BC compressed pixel formats:  <a href=\"http://microsoft.github.io/Win2D/html/BlockCompression.htm\" rel=\"nofollow\">http://microsoft.github.io/Win2D/html/BlockCompression.htm</a></p>\n"}], "owner": {"reputation": 549, "user_id": 1008002, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/T1mJl.jpg?s=128&g=1", "display_name": "aPerfectMisterMan", "link": "https://stackoverflow.com/users/1008002/aperfectmisterman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 0, "accepted_answer_id": 37034353, "answer_count": 2, "score": 0, "last_activity_date": 1462722921, "creation_date": 1462381082, "last_edit_date": 1462388132, "question_id": 37033835, "link": "https://stackoverflow.com/questions/37033835/load-and-display-dds-dxt1-file-in-uwp-app", "title": "Load and display DDS (DXT1) file in UWP app", "body": "<p>I want to load a couple of directdraw surface files specifically DXT1 and display them in my very simple UWP (C# mainly) application.</p>\n\n<p>I have read of DirectXTex but I have no idea if this is the simplest way and if so, how to use it in an UWP application.</p>\n"}, {"tags": ["c++", "stl", "iterator", "containers"], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1462397767, "post_id": 37033859, "comment_id": 61626966, "body": "@Orient range <code>insert()</code> will to a single reserve up front, repeated <code>push_back()</code> might lead to multiple different allocations and unnecessary extra copies/moves. Best-case, it does the same thing anyway."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1462470038, "post_id": 37033859, "comment_id": 61660679, "body": "IIRC, Stepanov wrote somewhere that in hindsight he would like to have made generic <code>begin</code> / <code>end</code> for objects, doing <code>&amp;obj</code> and <code>&amp;obj+1</code>."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 6, "last_activity_date": 1462381506, "last_edit_date": 1462381506, "creation_date": 1462381149, "answer_id": 37033859, "question_id": 37033682, "link": "https://stackoverflow.com/questions/37033682/append-single-element-to-container-using-iterator-ranges/37033859#37033859", "title": "Append single element to container using iterator ranges", "body": "<p>Yes, it's perfectly valid. From [expr.unary.op]:</p>\n\n<blockquote>\n  <p>For purposes of pointer arithmetic (5.7) and comparison (5.9, 5.10), an object that is not an array element whose address is taken in this way is considered to belong to an array with one element of type <code>T</code>.</p>\n</blockquote>\n\n<p><code>&amp;i + 1</code> simply points to one past the end of that object, which for this purpose is one past the end of an array of size one of that type, which is a perfectly legal thing to refer to, according to [expr.add]:</p>\n\n<blockquote>\n  <p>If both the pointer operand and the result point to elements of the same array object, or one past\n  the last element of the array object, the evaluation shall not produce an overflow; otherwise, the behavior is\n  undefined.</p>\n</blockquote>\n\n<hr />\n\n<p>As a side note, your <code>append()</code> function is a strictly worse implementation of your <code>init()</code> function. </p>\n"}], "owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 37033859, "answer_count": 1, "score": 2, "last_activity_date": 1462381506, "creation_date": 1462380580, "last_edit_date": 1462381460, "question_id": 37033682, "link": "https://stackoverflow.com/questions/37033682/append-single-element-to-container-using-iterator-ranges", "title": "Append single element to container using iterator ranges", "body": "<p>I want to (copy) append single element to some (STL-like) container, but all I can use is <code>basic_string &amp; append(InputIt first, InputIt last)</code>-like interface to initialize or to append elements to the container.</p>\n\n<p>Is it wrong to do the following:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nstruct container\n{\n\n    template&lt; typename input_iterator &gt;\n    void init(input_iterator const beg, input_iterator const end)\n    {\n        v.insert(v.cend(), beg, end);\n    }\n\n    template&lt; typename input_iterator &gt;\n    void append(input_iterator beg, input_iterator const end)\n    {\n        while (beg != end) {\n            v.push_back(*beg);\n            ++beg;\n        }\n    }\n\nprivate:\n    std::vector&lt; int &gt; v;\n};\n\n#include &lt;cstdlib&gt;\n\nint main()\n{\n    int i = 123;\n    container c;\n    c.init(&amp;i, &amp;i + 1);\n    int j = 555;\n    c.init(&amp;j, &amp;j + 1);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Specifically, I am concerned with whether the <code>f(&amp;i, &amp;i + 1)</code> construction is valid (assume unary <code>operator &amp;</code> is not overloaded) or not?</p>\n"}, {"tags": ["c++", "windows", "forms", "winapi"], "comments": [{"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1462380194, "post_id": 37033270, "comment_id": 61617128, "body": "Try something simpler first, like showing dialog box, to see if your DLL is loaded properly at all."}, {"owner": {"reputation": 7, "user_id": 5932131, "user_type": "registered", "profile_image": "https://graph.facebook.com/170909833286083/picture?type=large", "display_name": "Levi Branch", "link": "https://stackoverflow.com/users/5932131/levi-branch"}, "reply_to_user": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1462385397, "post_id": 37033270, "comment_id": 61620186, "body": "I know for a fact the DLL was injected.."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1462388671, "post_id": 37033270, "comment_id": 61622231, "body": "<code>switch(WParameter){};</code> - This is why you are getting a warning."}, {"owner": {"reputation": 7, "user_id": 5932131, "user_type": "registered", "profile_image": "https://graph.facebook.com/170909833286083/picture?type=large", "display_name": "Levi Branch", "link": "https://stackoverflow.com/users/5932131/levi-branch"}, "edited": false, "score": 0, "creation_date": 1462392965, "post_id": 37033270, "comment_id": 61624556, "body": "I realized that I just wanted to rule everything out. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 2473, "user_id": 4490706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nmMcD.jpg?s=128&g=1", "display_name": "Ton Plooij", "link": "https://stackoverflow.com/users/4490706/ton-plooij"}, "reply_to_user": {"reputation": 7, "user_id": 5932131, "user_type": "registered", "profile_image": "https://graph.facebook.com/170909833286083/picture?type=large", "display_name": "Levi Branch", "link": "https://stackoverflow.com/users/5932131/levi-branch"}, "edited": false, "score": 0, "creation_date": 1462390704, "post_id": 37034254, "comment_id": 61623298, "body": "@Levi Branch, apparently there are different opinions on that. Did the blog sample fix your issue?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1462391342, "post_id": 37034254, "comment_id": 61623661, "body": "@TonPlooij: The wording of <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dn633971.aspx\" rel=\"nofollow noreferrer\">Dynamic-Link Library Best Practices</a> (<i>&quot;should never [...] call <code>CreateThread</code>&quot;</i>) is the source of confusion. What this really is trying to say is, that synchronization inside DllMain can lead to deadlocks. And when you do create a thread, you almost always implement some sort of synchronization. Creating a thread itself really is fine, since you can safely assume that <i>kernel32.dll</i> is always mapped into a running process."}, {"owner": {"reputation": 7, "user_id": 5932131, "user_type": "registered", "profile_image": "https://graph.facebook.com/170909833286083/picture?type=large", "display_name": "Levi Branch", "link": "https://stackoverflow.com/users/5932131/levi-branch"}, "edited": false, "score": 0, "creation_date": 1462392902, "post_id": 37034254, "comment_id": 61624516, "body": "@Ton Pooij I haven&#39;t tried it yet but I suspect it will."}, {"owner": {"reputation": 7, "user_id": 5932131, "user_type": "registered", "profile_image": "https://graph.facebook.com/170909833286083/picture?type=large", "display_name": "Levi Branch", "link": "https://stackoverflow.com/users/5932131/levi-branch"}, "edited": false, "score": 0, "creation_date": 1462394420, "post_id": 37034254, "comment_id": 61625312, "body": "@TonPlooij I&#39;ve rewritten my code based off the example with still no avail. Updated the thread."}, {"owner": {"reputation": 7, "user_id": 5932131, "user_type": "registered", "profile_image": "https://graph.facebook.com/170909833286083/picture?type=large", "display_name": "Levi Branch", "link": "https://stackoverflow.com/users/5932131/levi-branch"}, "edited": false, "score": 0, "creation_date": 1462394669, "post_id": 37034254, "comment_id": 61625427, "body": "Also I forgot to mention, but the message box shows &amp; the window doesn&#39;t if that helps narrow the issue. @TonPlooij"}, {"owner": {"reputation": 2473, "user_id": 4490706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nmMcD.jpg?s=128&g=1", "display_name": "Ton Plooij", "link": "https://stackoverflow.com/users/4490706/ton-plooij"}, "edited": false, "score": 0, "creation_date": 1462395538, "post_id": 37034254, "comment_id": 61625891, "body": "Your code does not show a RegisterClassEx for your windows class. You should also check in the FindWindow for the parent succeeds and provides a correct handle. I suggest to follow the sample code as close a possible."}, {"owner": {"reputation": 535, "user_id": 2120666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5286b924ee914b1e479d0ff2db3f73f9?s=128&d=identicon&r=PG&f=1", "display_name": "user2120666", "link": "https://stackoverflow.com/users/2120666/user2120666"}, "edited": false, "score": 0, "creation_date": 1462396548, "post_id": 37034254, "comment_id": 61626370, "body": "Also, your WNDCLASSEX omit CS_GLOBALCLASS."}, {"owner": {"reputation": 535, "user_id": 2120666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5286b924ee914b1e479d0ff2db3f73f9?s=128&d=identicon&r=PG&f=1", "display_name": "user2120666", "link": "https://stackoverflow.com/users/2120666/user2120666"}, "edited": false, "score": 0, "creation_date": 1462396813, "post_id": 37034254, "comment_id": 61626504, "body": "Also your wchar_t * PString = reinterpret_cast&lt;wchar_t*&gt;(LpParameter); is wrong because you pass ANSI string."}, {"owner": {"reputation": 7, "user_id": 5932131, "user_type": "registered", "profile_image": "https://graph.facebook.com/170909833286083/picture?type=large", "display_name": "Levi Branch", "link": "https://stackoverflow.com/users/5932131/levi-branch"}, "edited": false, "score": 0, "creation_date": 1462397272, "post_id": 37034254, "comment_id": 61626723, "body": "Updated code again. Still no avail, only the message box works."}, {"owner": {"reputation": 7, "user_id": 5932131, "user_type": "registered", "profile_image": "https://graph.facebook.com/170909833286083/picture?type=large", "display_name": "Levi Branch", "link": "https://stackoverflow.com/users/5932131/levi-branch"}, "edited": false, "score": 0, "creation_date": 1462397390, "post_id": 37034254, "comment_id": 61626782, "body": "I must note I did not follow the FindWindow advice because the DLL is meant for that specific process &amp; I plan on having specific instructions for using it. Also, I was unable to do the CS_GLOBALCLASS because I have no idea where to find it."}, {"owner": {"reputation": 535, "user_id": 2120666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5286b924ee914b1e479d0ff2db3f73f9?s=128&d=identicon&r=PG&f=1", "display_name": "user2120666", "link": "https://stackoverflow.com/users/2120666/user2120666"}, "edited": false, "score": 0, "creation_date": 1462397772, "post_id": 37034254, "comment_id": 61626970, "body": "If you want your dll for only one process, omit CS_GLOBALCLASS is fine. But how you test your dll?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 535, "user_id": 2120666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5286b924ee914b1e479d0ff2db3f73f9?s=128&d=identicon&r=PG&f=1", "display_name": "user2120666", "link": "https://stackoverflow.com/users/2120666/user2120666"}, "edited": false, "score": 0, "creation_date": 1462401842, "post_id": 37034254, "comment_id": 61628535, "body": "@user2120666: <code>CS_GLOBALCLASS</code> makes available a registered class to all <b>modules</b> in a process. You seem to imply that this class style would somehow allow a window class to be registered system-wide. This is not the case."}, {"owner": {"reputation": 7, "user_id": 5932131, "user_type": "registered", "profile_image": "https://graph.facebook.com/170909833286083/picture?type=large", "display_name": "Levi Branch", "link": "https://stackoverflow.com/users/5932131/levi-branch"}, "reply_to_user": {"reputation": 535, "user_id": 2120666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5286b924ee914b1e479d0ff2db3f73f9?s=128&d=identicon&r=PG&f=1", "display_name": "user2120666", "link": "https://stackoverflow.com/users/2120666/user2120666"}, "edited": false, "score": 0, "creation_date": 1462402221, "post_id": 37034254, "comment_id": 61628655, "body": "@user2120666 I inject it into RobloxPlayerBeta.exe, the actual target."}, {"owner": {"reputation": 7, "user_id": 5932131, "user_type": "registered", "profile_image": "https://graph.facebook.com/170909833286083/picture?type=large", "display_name": "Levi Branch", "link": "https://stackoverflow.com/users/5932131/levi-branch"}, "edited": false, "score": 0, "creation_date": 1462402262, "post_id": 37034254, "comment_id": 61628666, "body": "Anyways, my problem is that I have no idea what CS_GLOBALCLASS is or how to implement it, so my DLL will never be fixed :("}, {"owner": {"reputation": 535, "user_id": 2120666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5286b924ee914b1e479d0ff2db3f73f9?s=128&d=identicon&r=PG&f=1", "display_name": "user2120666", "link": "https://stackoverflow.com/users/2120666/user2120666"}, "edited": false, "score": 0, "creation_date": 1462431526, "post_id": 37034254, "comment_id": 61637248, "body": "WindowClass.style = CS_DBLCLKS | CS_GLOBALCLASS;"}], "tags": [], "owner": {"reputation": 2473, "user_id": 4490706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nmMcD.jpg?s=128&g=1", "display_name": "Ton Plooij", "link": "https://stackoverflow.com/users/4490706/ton-plooij"}, "is_accepted": false, "score": 2, "last_activity_date": 1462393693, "last_edit_date": 1495542705, "creation_date": 1462382623, "answer_id": 37034254, "question_id": 37033270, "link": "https://stackoverflow.com/questions/37033270/why-does-the-window-never-show-up-although-all-required-functions-are-present/37034254#37034254", "title": "Why does the window never show up, although all required functions are present?", "body": "<p>You can look at this <a href=\"https://sim0n.wordpress.com/2009/03/29/c-creating-a-window-from-a-dll/\" rel=\"nofollow noreferrer\" title=\"creating a window from a dll\">blog</a> for an example for your case.</p>\n\n<p>One of the differences is that it uses DllMain's provided <code>HINSTANCE</code> as the instance handle for the window class.  <code>GetModuleHandle(NULL)</code> returns the instance handle of the calling process instead of the DLL.</p>\n\n<p>Note that Windows API calls like CreateThread from DllMain are not recommended, see <a href=\"https://stackoverflow.com/questions/1688290/creating-a-thread-in-dllmain\">here</a>. </p>\n"}], "owner": {"reputation": 7, "user_id": 5932131, "user_type": "registered", "profile_image": "https://graph.facebook.com/170909833286083/picture?type=large", "display_name": "Levi Branch", "link": "https://stackoverflow.com/users/5932131/levi-branch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1462397307, "creation_date": 1462379315, "last_edit_date": 1462397307, "question_id": 37033270, "link": "https://stackoverflow.com/questions/37033270/why-does-the-window-never-show-up-although-all-required-functions-are-present", "title": "Why does the window never show up, although all required functions are present?", "body": "<p>I have been trying to make a universal DLL to where I can inject it into a process &amp; a window would pop up. I have all required functions such as WinMain (I named mine Initiate and called it manually), DllWindowProcedure, and DllMain. However, after compilation, there is one warning and no errors - I believe it is a logical error. If you spot any issues, or anything I can improve, please let me know!</p>\n\n<p>Warning:</p>\n\n<blockquote>\n  <p>1>Main.cpp(43): warning C4060: switch statement contains no 'case' or 'default' labels</p>\n</blockquote>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n\nHINSTANCE InjectedModuleHandle;\n\nLRESULT CALLBACK DllWindowProcedure(HWND, UINT, WPARAM, LPARAM);\n\nDWORD WINAPI DllThreadProcedure(void * Data)\n{\n    MessageBoxA(NULL, (LPCSTR)\"Welcome to Flames v1.1!\", (LPCSTR)\"Startup Message\", NULL);\n    MSG Messages;\n    WNDCLASSEX WindowClass;\n    WindowClass.hInstance = InjectedModuleHandle;\n    WindowClass.lpszClassName = L\"DllWindowClass\";\n    WindowClass.lpfnWndProc = DllWindowProcedure;\n    WindowClass.style = CS_DBLCLKS;\n    WindowClass.cbSize = sizeof(WNDCLASSEX);\n    WindowClass.hIcon = LoadIcon(NULL, IDI_APPLICATION);\n    WindowClass.hIconSm = LoadIcon(NULL, IDI_APPLICATION);\n    WindowClass.hCursor = LoadCursor(NULL, IDC_ARROW);\n    WindowClass.lpszMenuName = NULL;\n    WindowClass.cbClsExtra = 0;\n    WindowClass.cbWndExtra = 0;\n    WindowClass.hbrBackground = (HBRUSH)RGB(255, 255, 255);\n    RegisterClassEx(&amp;WindowClass);\n    HWND Window = CreateWindowEx(0, L\"DllWindowClass\", L\"Flames v1.1 - By XenoSaga3000\", (WS_SYSMENU | WS_MINIMIZEBOX), 200, 200, 500, 450, FindWindow(NULL, L\"ROBLOX\"), CreateMenu(), InjectedModuleHandle, NULL);\n    ShowWindow(Window, SW_SHOWNORMAL);\n    while (GetMessage(&amp;Messages, NULL, 0, 0))\n    {\n        TranslateMessage(&amp;Messages);\n        DispatchMessage(&amp;Messages);\n    };\n    return 1;\n};\n\nLRESULT CALLBACK DllWindowProcedure(HWND Window, UINT Message, WPARAM WParameter, LPARAM LParameter)\n{\n    switch (Message)\n    {\n        case WM_COMMAND:\n            switch(WParameter)\n            {\n                //Check for commands here.\n            };\n        break;\n        case WM_DESTROY:\n            PostQuitMessage(0);\n        break;\n        default:\n            return DefWindowProc(Window, Message, WParameter, LParameter);\n    };\n    return 0;\n};\n\nbool APIENTRY DllMain(HMODULE DllInstance, DWORD Reason, LPVOID Reserved)\n{\n    if(Reason == DLL_PROCESS_ATTACH)\n    {\n        InjectedModuleHandle = DllInstance;\n        CreateThread(0, NULL, DllThreadProcedure, NULL, NULL, NULL);\n    };\n    return TRUE;\n};\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "mfc"], "comments": [{"owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "edited": false, "score": 1, "creation_date": 1462387611, "post_id": 37033263, "comment_id": 61621580, "body": "What do you mean by <code>to get an ID name change to propagate to the code</code>? Propagate WHERE? The studio will never change your C++ code to update the ID of the control. Should it?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1462394524, "post_id": 37033263, "comment_id": 61625358, "body": "It&#39;s really hard to follow what you&#39;re asking here."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1462448414, "post_id": 37033263, "comment_id": 61646754, "body": "@CBGraham Did my answer help you?"}, {"owner": {"reputation": 1358, "user_id": 199793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f510921a8a5b49acc6b91cf564e02692?s=128&d=identicon&r=PG", "display_name": "CBGraham", "link": "https://stackoverflow.com/users/199793/cbgraham"}, "edited": false, "score": 0, "creation_date": 1462564714, "post_id": 37033263, "comment_id": 61705718, "body": "Oh, all the newlines got stripped.  Looked much better before.  Short version: If I change an ID in the resource editor, cpp files can&#39;t see it.  I need to change the ID and any other flag to get the resource file to notice it is dirty, even with rebuild."}, {"owner": {"reputation": 118, "user_id": 4100915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7c80b4e0735c32d0df9d6f2464b860f?s=128&d=identicon&r=PG&f=1", "display_name": "Yang Jk", "link": "https://stackoverflow.com/users/4100915/yang-jk"}, "edited": false, "score": 0, "creation_date": 1613700561, "post_id": 37033263, "comment_id": 117163484, "body": "I have the same issue in Visual Studio 2019. I got an error: <code>E0020\tidentifier &quot;IDC_CHANGETWO&quot; is undefined</code>. Build Solution, Rebuild Solution, Clean Solution did not clear this error. But, if I reopen the solution, the error is gone. The trick helps me, but I don&#39;t know why. Hope someone can help to explain it."}], "answers": [{"comments": [{"owner": {"reputation": 1358, "user_id": 199793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f510921a8a5b49acc6b91cf564e02692?s=128&d=identicon&r=PG", "display_name": "CBGraham", "link": "https://stackoverflow.com/users/199793/cbgraham"}, "edited": false, "score": 0, "creation_date": 1462509725, "post_id": 37037286, "comment_id": 61674925, "body": "I don&#39;t have the ability to get Visual Assist on the computers, but your Refactoring point makes total sense.  A variable name change in C++ doesn&#39;t propagate without Refactor of course.  I was viewing the Resource editor as being more automated than a cpp file.  (This works in Window Builder in Eclipse-Java.)  But like I keep telling the class, C++ hates you and doesn&#39;t do anything automatically.  Imma try to find Refactor for an ID without Visual Assist and come back in a bit."}, {"owner": {"reputation": 1358, "user_id": 199793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f510921a8a5b49acc6b91cf564e02692?s=128&d=identicon&r=PG", "display_name": "CBGraham", "link": "https://stackoverflow.com/users/199793/cbgraham"}, "edited": false, "score": 0, "creation_date": 1462511505, "post_id": 37037286, "comment_id": 61675402, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/0b4ffb8a.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/0b4ffb8a.aspx</a> Microsoft sez the right way to change the name is to type it in the box like I&#39;m doing.  But if I don&#39;t also change another flag at the same time, the symbol won&#39;t work in the actual code still.  100%. I never wanted to teach C++.  I wanted to be a lumberjack."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "reply_to_user": {"reputation": 1358, "user_id": 199793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f510921a8a5b49acc6b91cf564e02692?s=128&d=identicon&r=PG", "display_name": "CBGraham", "link": "https://stackoverflow.com/users/199793/cbgraham"}, "edited": false, "score": 0, "creation_date": 1462521061, "post_id": 37037286, "comment_id": 61679619, "body": "@CBGraham what about this: <a href=\"https://visualstudiogallery.msdn.microsoft.com/164904b2-3b47-417f-9b6b-fdd35757d194\" rel=\"nofollow noreferrer\">visualstudiogallery.msdn.microsoft.com/&hellip;</a>"}, {"owner": {"reputation": 1358, "user_id": 199793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f510921a8a5b49acc6b91cf564e02692?s=128&d=identicon&r=PG", "display_name": "CBGraham", "link": "https://stackoverflow.com/users/199793/cbgraham"}, "edited": false, "score": 0, "creation_date": 1462564513, "post_id": 37037286, "comment_id": 61705621, "body": "Renamed &#39;IDC_MIDDLEC2&#39; to &#39;IDC_MIDDLED&#39;: ---------------------------------------- Error occured while applying changes, partial changes may exist."}, {"owner": {"reputation": 1358, "user_id": 199793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f510921a8a5b49acc6b91cf564e02692?s=128&d=identicon&r=PG", "display_name": "CBGraham", "link": "https://stackoverflow.com/users/199793/cbgraham"}, "edited": false, "score": 0, "creation_date": 1462564592, "post_id": 37037286, "comment_id": 61705662, "body": "Rename doesn&#39;t work on Resource IDs apparently.  How is this not a thing with y&#39;all?  If I make a label, the very first thing I want to do is change the label from IDC_STATIC to well, anything else."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "reply_to_user": {"reputation": 1358, "user_id": 199793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f510921a8a5b49acc6b91cf564e02692?s=128&d=identicon&r=PG", "display_name": "CBGraham", "link": "https://stackoverflow.com/users/199793/cbgraham"}, "edited": false, "score": 0, "creation_date": 1462565791, "post_id": 37037286, "comment_id": 61706188, "body": "It is not a issue for me because i use Visual Assist you see."}, {"owner": {"reputation": 1358, "user_id": 199793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f510921a8a5b49acc6b91cf564e02692?s=128&d=identicon&r=PG", "display_name": "CBGraham", "link": "https://stackoverflow.com/users/199793/cbgraham"}, "edited": false, "score": 0, "creation_date": 1463068906, "post_id": 37037286, "comment_id": 61916698, "body": "Well, poop.  I&#39;ll suggest Visual Assist be put on the computers in the Fall.  That makes &quot;use Visual Assist&quot; the correct answer so I&#39;ll mark this done.  I&#39;ll feel bad for the next person though that the official answer is that Visual Studio hates happiness."}, {"owner": {"reputation": 1358, "user_id": 199793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f510921a8a5b49acc6b91cf564e02692?s=128&d=identicon&r=PG", "display_name": "CBGraham", "link": "https://stackoverflow.com/users/199793/cbgraham"}, "edited": false, "score": 0, "creation_date": 1463589519, "post_id": 37037286, "comment_id": 62132638, "body": "I&#39;m sorry, but the other answer made me realize this wouldn&#39;t work so I had to un-check this.  The name of the ID I&#39;m changing away from is IDC_STATIC.  Even Visual Assist couldn&#39;t resist changing every static in the app at that point."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "reply_to_user": {"reputation": 1358, "user_id": 199793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f510921a8a5b49acc6b91cf564e02692?s=128&d=identicon&r=PG", "display_name": "CBGraham", "link": "https://stackoverflow.com/users/199793/cbgraham"}, "edited": false, "score": 0, "creation_date": 1463591102, "post_id": 37037286, "comment_id": 62133489, "body": "@CBGraham Well yes, labels are named ICD_STATIC automatically so if you want them personalized you will have no choice than to do it some other way. Your original question did not state IDC_STATIC. It is a special case. My answer is for the question stated you see. Else I would have explained this to you. I do now realise your comments where you said IDC_STATIC. But it is best to rename them at design time, before adding your variables and handlers. Prevention is better than cure. Add static control, rename directly in the properties. Then add variable etc.."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "reply_to_user": {"reputation": 1358, "user_id": 199793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f510921a8a5b49acc6b91cf564e02692?s=128&d=identicon&r=PG", "display_name": "CBGraham", "link": "https://stackoverflow.com/users/199793/cbgraham"}, "edited": false, "score": 0, "creation_date": 1463597471, "post_id": 37037286, "comment_id": 62136997, "body": "I added a second answer for IDC_STATIC. Not sure what the issue is with that scenario."}], "tags": [], "owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "is_accepted": false, "score": 3, "last_activity_date": 1462393190, "creation_date": 1462393190, "answer_id": 37037286, "question_id": 37033263, "link": "https://stackoverflow.com/questions/37033263/how-do-i-get-a-resource-id-edit-in-mfc-editor-to-propagate-to-code/37037286#37037286", "title": "How do I get a Resource ID edit in MFC editor to propagate to code?", "body": "<p>If you change the name of a resource control it will not propagate that throughout your source code as you have already learned.</p>\n\n<p>Ideally you need to use something like <strong>VisualAssist</strong>: <a href=\"http://www.wholetomato.com/\" rel=\"nofollow noreferrer\">http://www.wholetomato.com/</a></p>\n\n<p>It allows you to rename your resource ID values</p>\n\n<p>What you need to use is <strong>refactoring</strong>. If you open your resource file as a text file in the IDE (as opposed to the resource editor) and locate your control, you should be able to right-click it and choose <strong>Refactor (VA)</strong>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/r13GL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r13GL.png\" alt=\"Renaming a resource ID\"></a></p>\n\n<p>Then select <strong>Rename</strong>. It should preview the changes in the various source code files:</p>\n\n<p><a href=\"https://i.stack.imgur.com/v99IA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v99IA.png\" alt=\"Refactor preview\"></a></p>\n\n<p>You can use the same procedure for renaming variables and method declarations.</p>\n"}, {"comments": [{"owner": {"reputation": 1358, "user_id": 199793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f510921a8a5b49acc6b91cf564e02692?s=128&d=identicon&r=PG", "display_name": "CBGraham", "link": "https://stackoverflow.com/users/199793/cbgraham"}, "edited": false, "score": 0, "creation_date": 1463589443, "post_id": 37258723, "comment_id": 62132598, "body": "This is a great answer for a different question.  My problem is that resource.h isn&#39;t actually getting updated if I change an ID in the property panel without touching another flag at the same time.  Place text, change IDC_Static to IDC_DoSomething, code can&#39;t see it.  Change TabStop or something at the same time, code gets the update."}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "reply_to_user": {"reputation": 1358, "user_id": 199793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f510921a8a5b49acc6b91cf564e02692?s=128&d=identicon&r=PG", "display_name": "CBGraham", "link": "https://stackoverflow.com/users/199793/cbgraham"}, "edited": false, "score": 0, "creation_date": 1463592652, "post_id": 37258723, "comment_id": 62134382, "body": "You need to save the currently edited resource, it&#39;s then only <code>resource.h</code> will get updated. Note that tabstop, and other properties of control aren&#39;t part of <code>resource.h</code> but <code>.RC</code> file. The reason is simple - <code>resource.h</code> is used by C++ compiler also. <code>.RC</code> file is not read (and isn&#39;t needed) by C++ compiler. Try to get whole picture."}], "tags": [], "owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1463416550, "last_edit_date": 1463416550, "creation_date": 1463416043, "answer_id": 37258723, "question_id": 37033263, "link": "https://stackoverflow.com/questions/37033263/how-do-i-get-a-resource-id-edit-in-mfc-editor-to-propagate-to-code/37258723#37258723", "title": "How do I get a Resource ID edit in MFC editor to propagate to code?", "body": "<p>While the answer given is good, it doesn't show what happens behind the scene when you update a resource ID.</p>\n\n<ul>\n<li>All resource IDs go into one header: <strong>resource.h</strong></li>\n<li>This file is read by C++ compiler, as well as by resource compiler (the <code>.RC</code> file.)</li>\n<li>Using resource editor, you just type an ID, and the resource-editor would simply create an entry in <strong>resource.h</strong></li>\n</ul>\n\n<p>This header looks like:</p>\n\n<pre><code>//{{NO_DEPENDENCIES}}\n// Microsoft Visual C++ generated include file.\n// Used by MFCApplication1.rc\n//\n#define IDR_MAINFRAME                   128\n#define IDM_ABOUTBOX                    0x0010\n#define IDD_ABOUTBOX                    100\n#define IDS_ABOUTBOX                    101\n#define IDD_MFCAPPLICATION1_DIALOG              102\n\n// Next default values for new objects\n//\n#ifdef APSTUDIO_INVOKED\n#ifndef APSTUDIO_READONLY_SYMBOLS\n\n#define _APS_NEXT_RESOURCE_VALUE    129\n#define _APS_NEXT_CONTROL_VALUE     1000\n#define _APS_NEXT_SYMED_VALUE       101\n#define _APS_NEXT_COMMAND_VALUE     32771\n#endif\n#endif\n</code></pre>\n\n<p>So, when you add a new control on dialog (or any other form), and name it <code>IDC_DOWNLOAD_NOW</code>, and save the resource, this header will get updated like:</p>\n\n<pre><code>#define IDR_MAINFRAME                   128\n#define IDC_DOWNLOAD_NOW                1000\n</code></pre>\n\n<p>Also, internal variable (like <code>_APS_NEXT_CONTROL_VALUE</code> gets updated).</p>\n\n<p>Well.. when you have same symbol in <strong>other dialog</strong>, VS will simply use the same macro with same value. You add another button on third dialog with same name, it doesn't modify <code>resource.h</code> either. </p>\n\n<p>But... when you modify control in these 3 dialogs to name is like <code>IDC_DOWNLOAD_LATER</code>, only <code>.RC</code> and <code>resource.h</code> get updated. Old value, and old usages still exist. You wont get any compiler error (since macros are there!). </p>\n\n<pre><code>#define IDR_MAINFRAME                   128\n#define IDC_DOWNLOAD_NOW                1000\n#define IDC_DOWNLOAD_LATER              1001\n</code></pre>\n\n<p>In another case, when you remove the button (from any of 3 dialog boxes), program will compile fine, but <code>GetDlgItem</code>, <code>DDX_Control</code> etc will fail at runtime (Since <code>IDC_DOWNLOAD_NOW</code> doesn't exist in current dialog!)</p>\n\n<p>Now think what would happen if you <strong>mass rename</strong> the symbols using any tool - <strong>boom</strong> - all resources now have <code>IDC_DOWNLOAD_LATER</code>!</p>\n\n<p>You should use <strong>Resource Symbols</strong> dialog to find what resource IDs are used by which dialog. From here you can rename and delete also.\n<a href=\"https://i.stack.imgur.com/2rIOV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2rIOV.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/9WOnB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9WOnB.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "is_accepted": false, "score": 0, "last_activity_date": 1463595956, "creation_date": 1463595956, "answer_id": 37307448, "question_id": 37033263, "link": "https://stackoverflow.com/questions/37033263/how-do-i-get-a-resource-id-edit-in-mfc-editor-to-propagate-to-code/37307448#37307448", "title": "How do I get a Resource ID edit in MFC editor to propagate to code?", "body": "<p>Here is a second possible way to handle the specific issue of <strong>IDC_STATIC</strong>. Your question should be modified to include this.</p>\n\n<p>I have started a temporary dialogue project and selected the default static text:</p>\n\n<p><a href=\"https://i.stack.imgur.com/uI8BA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uI8BA.png\" alt=\"Default static text\"></a></p>\n\n<p>As you can see, it is labelled <strong>IDC_STATIC</strong>. I now directly change the ID value in the resource editor itself and hit the <em>enter</em> key:</p>\n\n<p><a href=\"https://i.stack.imgur.com/uBQ7P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uBQ7P.png\" alt=\"Rename property\"></a></p>\n\n<p>Then I <strong>save</strong> it (this updates the resource.h file). Then, this is what we see if I use an application called <strong>ResOrg</strong>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/A4oBl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A4oBl.png\" alt=\"Using ResOrg\"></a></p>\n\n<p>As you can see, the resource.h file is correct. It is at this point you now add your variables.</p>\n\n<p>Interestingly, the IDE does not actually allow you to add variables to IDC_STATIC objects anyway. But suppose you have two if them:</p>\n\n<p><a href=\"https://i.stack.imgur.com/waYiN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/waYiN.png\" alt=\"2 Static objects\"></a></p>\n\n<p>You can still rename each one, save the file, re-build, and view your resource file:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kQ2jC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kQ2jC.png\" alt=\"Rename 2 other static controls\"></a></p>\n\n<p>As you can see, it is all still good. It is at this point that you can add variables and event handlers now. And it is in this context where VisualAssist would be used to rename variables/ID's used throughout your application.</p>\n\n<p>I was not sure to edit my existing answer with this additional information. Perhaps that might be better?</p>\n"}], "owner": {"reputation": 1358, "user_id": 199793, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f510921a8a5b49acc6b91cf564e02692?s=128&d=identicon&r=PG", "display_name": "CBGraham", "link": "https://stackoverflow.com/users/199793/cbgraham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5177, "favorite_count": 2, "answer_count": 3, "score": 1, "last_activity_date": 1563216780, "creation_date": 1462379298, "last_edit_date": 1563216780, "question_id": 37033263, "link": "https://stackoverflow.com/questions/37033263/how-do-i-get-a-resource-id-edit-in-mfc-editor-to-propagate-to-code", "title": "How do I get a Resource ID edit in MFC editor to propagate to code?", "body": "<p>I make a button in the resource editor in an MFC program.<br>\nI give it an ID.<br>\nI use the ID in code with <code>CWnd *tLabel = GetDlgItem(IDC_CHANGETWO);</code><br>\nI am pleased.  </p>\n\n<p>I go back to editor<br>\nI change the ID<br>\nCode does not acknowledge new name, even with rebuild<br>\nI change some flag (tabstop)<br>\nCode still does not care  </p>\n\n<p>In order to get an ID name change to propagate to the code, I have to change the ID AND any other field in the same save.  Only then does it realize it is dirty and update the resource table.</p>\n\n<p>This is 100% reproducible on mine and my students' computers.  This workaround has kept the class from stalling, but... what the heck is this?</p>\n\n<p>Visual Studio Enterprise 2015<br>\nVersion 14.0.23107.0 D14REL</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1462379090, "post_id": 37032992, "comment_id": 61616441, "body": "I expect the bug is in <code>MyModel</code>."}], "answers": [{"tags": [], "owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "is_accepted": true, "score": 0, "last_activity_date": 1462379350, "last_edit_date": 1495540780, "creation_date": 1462379350, "answer_id": 37033286, "question_id": 37032992, "link": "https://stackoverflow.com/questions/37032992/program-crashes-with-qt-qabstracttablemodelindex/37033286#37033286", "title": "Program Crashes with Qt QAbstractTableModel::index", "body": "<p>You are trying to access invalid indexes... This is unspecified behavior... Some implementations of <code>qabstractitemmodel</code> will return an invalid index if the parameters are crazy. But it is not guaranteed.. </p>\n\n<p>What happen in this case is that the table model use a QList under the hood and don't bother doing range checks... which cause an out of bound access. I suspect out of bound accesses to be an <a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\">undefined behavior</a>, even if Qt doesn't say what it is.</p>\n\n<p>Anyway it is wrong. <strong>Access valid indexes only</strong>. End of the story.</p>\n"}], "owner": {"reputation": 107, "user_id": 5120389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90493ce96a1b4760a8135f8def25f58f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas", "link": "https://stackoverflow.com/users/5120389/nicholas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 37033286, "answer_count": 1, "score": 0, "last_activity_date": 1462379350, "creation_date": 1462378364, "question_id": 37032992, "link": "https://stackoverflow.com/questions/37032992/program-crashes-with-qt-qabstracttablemodelindex", "title": "Program Crashes with Qt QAbstractTableModel::index", "body": "<p>I am trying to implement a custom model in qt.</p>\n\n<p>I have subclassed QAbstractTableModel into my own class. I have reimplemented the needed methods, but not the index method (as the <a href=\"http://doc.qt.io/qt-5/qabstracttablemodel.html#index\" rel=\"nofollow\">docs</a> say). columnCount() always returns 4 (there are a fixed number of columns) and rowCount returns the number of insterted rows.</p>\n\n<p>My program looks something like this:</p>\n\n<p>application.h</p>\n\n<pre><code>#include mymodel.h\nclass ContilasSimulator : public QApplication\n{\npublic:\n    Aplication(int argc, char *argv[]);\n    void someFunction();\nprivate:\n    MyModel m_model;\n    MainWindow m_window;\n};\n</code></pre>\n\n<p>application.cpp</p>\n\n<pre><code>#include application.h\nApplication::Application(int argc, char *argv[]) : QApplication(argc,argv),\n{\n    m_window.setModel(&amp;m_model);\n}\n\nvoid someFunction()\n{\n    //...\nif (m_model.insertRows(0,2))\n    {\n        QModelIndex index = m_model.index(0,0); //this statement works fine\n        index = m_model.index(1,0); // this statement also works fine\n        index = m_model.index(0,5); //this statements return an invalid index (as expected)\n        index = m_model.index(0,1); //the program crashes a few seconds after executing this line\n        //other code...\n}\n</code></pre>\n\n<p>The program crashes only after I have tried to get the m_model.index(0,1) line, but not immidiately (ie, the next few lines will execute, but a few seconds later the program crashes). When going line by line with my debugger, the program will crash either on the line after the probelm line, or a few lines later, depending on how fast I step through. I get this error message:</p>\n\n<pre><code>ASSERT failure in QList&lt;T&gt;::at: \"index out of range\", file C:\\Qt\\Qt5.5.1\\5.5\\mingw492_32\\include/QtCore/qlist.h, line 510\n</code></pre>\n\n<p>I cannot figure out why the program works fine when I am requesting an index of (0,0) and (1,0) but not (0,1). Nor can I figure out why it does not fail right away and instead takes a few seconds to fail. I am not doing anything with threads.</p>\n\n<p>Any help on why I might have this problem or further debugging steps I can take would be greatly appreciated.</p>\n\n<p>I am using Qt 5.5 with Qt Creator 3.4.2 compiling with mingw</p>\n"}, {"tags": ["c++", "linker"], "comments": [{"owner": {"reputation": 164, "user_id": 6242852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa542ff7f836ca10b739b25594ef16af?s=128&d=identicon&r=PG&f=1", "display_name": "A. FLAISCHER", "link": "https://stackoverflow.com/users/6242852/a-flaischer"}, "edited": false, "score": 0, "creation_date": 1462378828, "post_id": 37032903, "comment_id": 61616282, "body": "Can you try <code>ld -L&lt;path to my lib dir&gt; -lOpenImageIo</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 4623982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-30xoc98vIDk/AAAAAAAAAAI/AAAAAAAAABY/cwMgtj5yGKY/photo.jpg?sz=128", "display_name": "oktomus", "link": "https://stackoverflow.com/users/4623982/oktomus"}, "edited": false, "score": 0, "creation_date": 1462777978, "post_id": 37041388, "comment_id": 61761255, "body": "I just tried <code>ld</code> because my compilation was returning an error : <code>&#47;usr&#47;bin&#47;ld: cannot find -lopenimageio collect2: error: ld returned 1 exit status </code> The problem was the way I wrote &#39;openimageio&#39;, <b>I just changed to &#39;OpenImageIO&#39;</b> and it worked perfectly."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 2, "last_activity_date": 1462415815, "last_edit_date": 1495535637, "creation_date": 1462415815, "answer_id": 37041388, "question_id": 37032903, "link": "https://stackoverflow.com/questions/37032903/gnu-linker-doesnt-find-a-local-shared-library/37041388#37041388", "title": "GNU Linker doesn&#39;t find a local shared library", "body": "<blockquote>\n  <p>I don't know why my linker doesn't find my library,</p>\n</blockquote>\n\n<p>Because you didn't ask it to. This command:</p>\n\n<pre><code>ld -L&lt;path to my lib dir&gt; OpenImageIo\n</code></pre>\n\n<p>asks the linker to link file named (<em>literally</em>) <code>OpenImageIo</code> into <code>a.out</code>.</p>\n\n<p>You probably want to do this instead:</p>\n\n<pre><code>gcc -o your-exe foo.o bar.o -L&lt;path-to-lib-dir&gt; -lOpenImageIo\n</code></pre>\n\n<p>Note that you should <em>almost never</em> use <code>ld</code> to link anything on a UNIX system. See this <a href=\"https://stackoverflow.com/a/36879855/50617\">answer</a> for some of the reasons.</p>\n"}], "owner": {"reputation": 487, "user_id": 4623982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-30xoc98vIDk/AAAAAAAAAAI/AAAAAAAAABY/cwMgtj5yGKY/photo.jpg?sz=128", "display_name": "oktomus", "link": "https://stackoverflow.com/users/4623982/oktomus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1043, "favorite_count": 0, "accepted_answer_id": 37041388, "answer_count": 1, "score": 1, "last_activity_date": 1462415815, "creation_date": 1462378082, "question_id": 37032903, "link": "https://stackoverflow.com/questions/37032903/gnu-linker-doesnt-find-a-local-shared-library", "title": "GNU Linker doesn&#39;t find a local shared library", "body": "<p>I am on linux and my linker is not able to find my local libraries.</p>\n\n<p>When I run </p>\n\n<pre><code>ld -L&lt;path to my lib dir&gt; OpenImageIo\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>ld: cannot find OpenImageIO: No such file or directory\n</code></pre>\n\n<p>But libOpenImageIo is here :</p>\n\n<pre><code>[k.masson@hauser24 lib64]$ ll\ntotal 7856\nlrwxrwxrwx 1 k.masson k.masson      21 May  4 17:53 libOpenImageIO.so -&gt; libOpenImageIO.so.1.5\nlrwxrwxrwx 1 k.masson k.masson      24 May  4 17:53 libOpenImageIO.so.1.5 -&gt; libOpenImageIO.so.1.5.24\n-rwxr-xr-x 1 k.masson k.masson 7542440 May  2 16:41 libOpenImageIO.so.1.5.24\nlrwxrwxrwx 1 k.masson k.masson      26 May  4 17:53 libOpenImageIO_Util.so -&gt; libOpenImageIO_Util.so.1.5\nlrwxrwxrwx 1 k.masson k.masson      29 May  4 17:53 libOpenImageIO_Util.so.1.5 -&gt; libOpenImageIO_Util.so.1.5.24\n-rwxr-xr-x 1 k.masson k.masson  499288 May  2 16:41 libOpenImageIO_Util.so.1.5.24\ndrwxrwxr-x 3 k.masson k.masson      27 May  4 17:18 python2.7\n</code></pre>\n\n<p>And the file seems to be correct</p>\n\n<pre><code> [k.masson@hauser24 lib64]$ file libOpenImageIO.so.1.5.24 \n     libOpenImageIO.so.1.5.24: ELF 64-bit LSB shared object, x86-64,\n     version 1 (GNU/Linux), dynamically linked,\n     BuildID[sha1]=4ba0f0a40dc1287cf1a74b2530d3d0837765868b, stripped\n</code></pre>\n\n<p>I don't know why my linker doesn't find my library, I tried with other custom library and the problem is the same\nDo you have any idea why ? </p>\n"}, {"tags": ["c++", "windows", "qt"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1462378109, "post_id": 37032872, "comment_id": 61615854, "body": "A <code>QMenu</code> has no setModal(). Why do you want a modal menu instead of a modal dialog??"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1462378203, "post_id": 37032872, "comment_id": 61615900, "body": "Wait a minute you are going to have to post your header for <code>Menu</code>. How do we know what its parent is?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1462378496, "post_id": 37032872, "comment_id": 61616095, "body": "It appears that <i>&quot;&#39;class Menu&#39; has no member named &#39;setModal&#39;&quot;</i>. What is your question?"}], "answers": [{"tags": [], "owner": {"reputation": 88, "user_id": 5814010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f2570e18928f7a1d90dc67864db6a0?s=128&d=identicon&r=PG&f=1", "display_name": "ltnewberry", "link": "https://stackoverflow.com/users/5814010/ltnewberry"}, "is_accepted": true, "score": 2, "last_activity_date": 1462380799, "creation_date": 1462380799, "answer_id": 37033739, "question_id": 37032872, "link": "https://stackoverflow.com/questions/37032872/qt-has-no-member-named-setmodal/37033739#37033739", "title": "QT : has no member named &#39;setModal&#39;", "body": "<p>Ok. There is a little bit more to it than that. Try creating a new project and following along from my steps:</p>\n\n<p>Open up the mainwindow.ui and drag the pushButton onto the ui. Right click the push button and select \"Go to slot...\". From here, you should see a list of all triggering actions. Select \"clicked()\".</p>\n\n<p>This will generate a nice piece of code in mainwindow.cpp to deal with the event of a click on the pushbutton. It should look like the following:</p>\n\n<pre><code>      void MainWindow::on_pushButton_clicked()\n      {\n\n      }\n</code></pre>\n\n<p>Next, right click on the Forms folder in the project tree to the left of the text editing window. Select \"Add New...\"->\"Qt\"->\"Qt Designer Form Class\"->\"choose...\"->\"Dialog without buttons\" and then name it whatever you want. I called mine \"MyDialog\".</p>\n\n<p>This generate mydialog.ui, mydialog.cpp, and mydialog.h. We want the MainWindow class to be a parent to the MyDialog class. So we go to mainwindow.h and insert</p>\n\n<pre><code>    #include \"mydialog.h\"\n</code></pre>\n\n<p>and then we go to the private: section of mainwindow.h and create a pointer to a MyDialog object.\nChange the MainWindow class private block to read:</p>\n\n<pre><code>    private:\n        Ui::MainWindow *ui;\n        MyDialog *mDialog;\n</code></pre>\n\n<p>So now we have a pointer to the MyDialog class included within the MainWindow class.</p>\n\n<p>Next, go to mainwindow.cpp and change the event method to read:</p>\n\n<pre><code>    void MainWindow::on_pushButton_clicked()\n    {\n        mDialog = new MyDialog(this); // allocated space for a new MyDialog\n                                     // while also giving a parent class of \n                                     // this, the MainWindow class\n        mDialog-&gt;show(); // call the show method on the object\n    }\n</code></pre>\n\n<p>Voila! You did it!</p>\n"}], "owner": {"reputation": 65, "user_id": 3901041, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005379493393/picture?type=large", "display_name": "Amine Tiyal", "link": "https://stackoverflow.com/users/3901041/amine-tiyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4399, "favorite_count": 1, "closed_date": 1462830579, "accepted_answer_id": 37033739, "answer_count": 1, "score": -3, "last_activity_date": 1462380799, "creation_date": 1462377959, "question_id": 37032872, "link": "https://stackoverflow.com/questions/37032872/qt-has-no-member-named-setmodal", "closed_reason": "Not suitable for this site", "title": "QT : has no member named &#39;setModal&#39;", "body": "<p>Salam Alikom</p>\n\n<p>i have to windows in my project (login.ui and menu.ui)\nthere is a push_button on the first windows\ni want to make this button open the other window \"menu.ui\" when is clicked ()</p>\n\n<p>i did this code in push_button function</p>\n\n<pre><code>Menu menu;\nmenu.setModal(true);\nmenu.exec();\n</code></pre>\n\n<p>but it doesn't work and give this error :</p>\n\n<pre><code>C:\\Users\\Amine\\Documents\\QT\\E-LogBook\\login.cpp:43: erreur : 'class Menu' has no member named 'setModal'\n menu.setModal(true);\n      ^\n</code></pre>\n"}, {"tags": ["c++", "lambda", "c++14"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1462377774, "post_id": 37032758, "comment_id": 61615642, "body": "Well then, how do you compute the remainder of a number after division?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1462377884, "post_id": 37032758, "comment_id": 61615718, "body": "<i>Just for proof i already did something</i> yes you have the boiler plate.  Did you try to get the remainder of the two numbers and compare them to each other?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1462377992, "post_id": 37032758, "comment_id": 61615787, "body": "I think a good place to start would be by looking into the documentation for <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\">std::sort</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462378058, "post_id": 37032758, "comment_id": 61615824, "body": "You know about the <code>%</code> modulo operator?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1462378902, "post_id": 37032758, "comment_id": 61616332, "body": "<i>@Drizzt</i> &quot;Just for proof i already did something^^&quot; That&#39;s just a ridiculous statement. If such counts everyone could come here with a <code>int main() {}</code> and say <i>Look what I&#39;ve done, could u gimme teh codez goin inside the <code>{}</code> plz.</i>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1462380291, "post_id": 37032758, "comment_id": 61617190, "body": "@KerrekSB <i>Rest</i> =&gt; <a href=\"https://dict.leo.org/ende/index_de.html#/search=Rest&amp;searchLoc=1&amp;resultOrder=basic&amp;multiwordShowSingle=on\" rel=\"nofollow noreferrer\">german (2nd match)</a> =&gt; <a href=\"https://dict.leo.org/ende/index_de.html#/search=Rest&amp;searchLoc=0&amp;resultOrder=basic&amp;multiwordShowSingle=on\" rel=\"nofollow noreferrer\">english (1st match)</a> :-) ..."}, {"owner": {"reputation": 1, "user_id": 6271222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bbe209d3e359f9e8512f0088ce8c43?s=128&d=identicon&r=PG&f=1", "display_name": "Drizzt", "link": "https://stackoverflow.com/users/6271222/drizzt"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462392233, "post_id": 37032758, "comment_id": 61624146, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 true that, it was a stupid sentence. And i already had a the % modulo operator (believe me or not) i just could not get it to work."}], "answers": [{"comments": [{"owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "edited": false, "score": 0, "creation_date": 1462378545, "post_id": 37032925, "comment_id": 61616117, "body": "And add a comparison when the remainders are the same."}, {"owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "reply_to_user": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "edited": false, "score": 0, "creation_date": 1462378627, "post_id": 37032925, "comment_id": 61616167, "body": "@stefaanv right, but looks like op didn&#39;t ask about it, all though hist output says he wants it."}, {"owner": {"reputation": 1, "user_id": 6271222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bbe209d3e359f9e8512f0088ce8c43?s=128&d=identicon&r=PG&f=1", "display_name": "Drizzt", "link": "https://stackoverflow.com/users/6271222/drizzt"}, "edited": false, "score": 0, "creation_date": 1462392557, "post_id": 37032925, "comment_id": 61624328, "body": "what is an op?  I didnt know i could put statements in the return statement."}, {"owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "reply_to_user": {"reputation": 1, "user_id": 6271222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bbe209d3e359f9e8512f0088ce8c43?s=128&d=identicon&r=PG&f=1", "display_name": "Drizzt", "link": "https://stackoverflow.com/users/6271222/drizzt"}, "edited": false, "score": 0, "creation_date": 1462395771, "post_id": 37032925, "comment_id": 61626008, "body": "@Drizzt OP is the person asked question, so you are OP here."}], "tags": [], "owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "is_accepted": false, "score": 2, "last_activity_date": 1462391865, "last_edit_date": 1462391865, "creation_date": 1462378159, "answer_id": 37032925, "question_id": 37032758, "link": "https://stackoverflow.com/questions/37032758/sorting-a-vector-by-mod-with-lambda/37032925#37032925", "title": "Sorting a Vector by Mod with Lambda", "body": "<p>Just use <code>%</code> modulo operator.</p>\n\n<pre><code>std::sort(vec.begin(), vec.end(),\n           [](int a, int b) { return std::abs(a % 5) &lt; std::abs(b % 5); });\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1462392097, "creation_date": 1462392097, "answer_id": 37036996, "question_id": 37032758, "link": "https://stackoverflow.com/questions/37032758/sorting-a-vector-by-mod-with-lambda/37036996#37036996", "title": "Sorting a Vector by Mod with Lambda", "body": "<p>If you want to sort by remainder and with the same remainder by value you can use this:</p>\n\n<pre><code>void order(vector&lt;int&gt; vec){\n   sort(begin(vec), end(vec), \n   [](int i, int j) {\n       return std::make_tuple( std::abs( i % 5 ), i ) &lt; std::make_tuple( std::abs( j % 5 ), j );\n   }\n);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6271222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46bbe209d3e359f9e8512f0088ce8c43?s=128&d=identicon&r=PG&f=1", "display_name": "Drizzt", "link": "https://stackoverflow.com/users/6271222/drizzt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1598, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1462392097, "creation_date": 1462377601, "last_edit_date": 1462380516, "question_id": 37032758, "link": "https://stackoverflow.com/questions/37032758/sorting-a-vector-by-mod-with-lambda", "title": "Sorting a Vector by Mod with Lambda", "body": "<p>I' m trying different things with the lambda operator for understanding.<br>\nNow I'm hanging at a point. </p>\n\n<p>I want to sort a vector by modulo 5 like this:</p>\n\n<p>First all <code>int</code>'s with remainder <code>0</code>, then remainder <code>1</code>, remainder <code>2</code> .... remainder <code>4</code></p>\n\n<p>Input: </p>\n\n<blockquote>\n<pre><code>12,6,32,33,17,21,9,10,2,8,20\n</code></pre>\n</blockquote>\n\n<p>Output </p>\n\n<blockquote>\n<pre><code>10,20,21,6,12,32,17,2,33,8,9\n</code></pre>\n</blockquote>\n\n<p>Is that what i want possible?<br>\nAnd if yes can you give me a hint how?</p>\n\n<p>I alread found the sort operator and tried a few things like normal sorting:</p>\n\n<pre><code>    void order(vector&lt;int&gt; vec){\n       sort(begin(vec), end(vec), \n       [](int i, int j) {\n           return (i &lt; j);\n       }\n    );\n</code></pre>\n\n<p>Just for proof i already did something^^</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2010", "visual-studio-2012", "visual-studio-2015"], "comments": [{"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1462377873, "post_id": 37032686, "comment_id": 61615715, "body": "do you have access to a previous version of MSVC?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1462378528, "post_id": 37032686, "comment_id": 61616108, "body": "Use connect.microsoft.com to report this issue or call Microsoft Support when you can&#39;t wait."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462378584, "post_id": 37032686, "comment_id": 61616135, "body": "At least I can improve your observations as seen <a href=\"http://coliru.stacked-crooked.com/a/e6b49c3b451dc769\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://coliru.stacked-crooked.com/a/0c5d90a1ebbd3a68\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 2, "creation_date": 1462380992, "post_id": 37032686, "comment_id": 61617615, "body": "<b>Just an observation</b>. I was able to reproduce this issue in VS2013 and changing the order of the inherited classes fixed the issue. In other words, changing <code>struct F : public A, public E</code> to <code>struct F : public E, public A</code>."}, {"owner": {"reputation": 1485, "user_id": 2229960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/62652e679c426edd1a718d4dd9de6d66?s=128&d=identicon&r=PG", "display_name": "Eissa N.", "link": "https://stackoverflow.com/users/2229960/eissa-n"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1462381761, "post_id": 37032686, "comment_id": 61618011, "body": "@JamesAdkison The same holds if you change <code>struct C : public A, public B {...}</code> to <code>struct C : public B, public A {...}</code>."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 6290597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L0GTY.png?s=128&g=1", "display_name": "Josh Parker", "link": "https://stackoverflow.com/users/6290597/josh-parker"}, "edited": false, "score": 0, "creation_date": 1462450059, "post_id": 37033416, "comment_id": 61647768, "body": "I do believe all of the feedback (especially about swapping the order in which the classes are inherited) confirms this as a bug in the MSVC compiler; I will contact Microsoft accordingly. Thanks!"}, {"owner": {"reputation": 20218, "user_id": 7925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zFiIO.png?s=128&g=1", "display_name": "Len Holgate", "link": "https://stackoverflow.com/users/7925/len-holgate"}, "edited": false, "score": 1, "creation_date": 1470758274, "post_id": 37033416, "comment_id": 65075125, "body": "Josh, Did you contact MS? Is there a Connect issue for it?"}, {"owner": {"reputation": 133, "user_id": 6290597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L0GTY.png?s=128&g=1", "display_name": "Josh Parker", "link": "https://stackoverflow.com/users/6290597/josh-parker"}, "edited": false, "score": 0, "creation_date": 1478573575, "post_id": 37033416, "comment_id": 68200831, "body": "Yes, I contacted Microsoft, and I can confirm that their latest update (Update 3) to Visual Studio 2015 fixes the issue."}], "tags": [], "owner": {"reputation": 1485, "user_id": 2229960, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/62652e679c426edd1a718d4dd9de6d66?s=128&d=identicon&r=PG", "display_name": "Eissa N.", "link": "https://stackoverflow.com/users/2229960/eissa-n"}, "is_accepted": true, "score": 2, "last_activity_date": 1462467086, "last_edit_date": 1462467086, "creation_date": 1462379749, "answer_id": 37033416, "question_id": 37032686, "link": "https://stackoverflow.com/questions/37032686/corrupted-virtual-table-visual-studio-bug/37033416#37033416", "title": "corrupted virtual table visual studio bug", "body": "<p>A solution is to make inheritance from class A virtual. </p>\n\n<pre><code>struct C : virtual public A, public B { virtual ~C(void) override { } };\n</code></pre>\n\n<p>or</p>\n\n<pre><code>struct F : virtual public A, public E { ... }\n</code></pre>\n\n<p>The problem is most probably related to the virtual desctructors in the base classes. Maybe others can provided more explanation why this works.</p>\n\n<p>As pointed out by @JamesAdkison swapping inherited classes (changing <code>struct C : public A, public B {...}</code> to <code>struct C : public B, public A {...}</code>) resolves the issue too; so does changing <code>struct F : public A, public E { ... }</code> to <code>struct F : public E, public A { ... }</code>. So, it seems like a bug in MSVC, as mentioned by @Josh P.</p>\n"}], "owner": {"reputation": 133, "user_id": 6290597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L0GTY.png?s=128&g=1", "display_name": "Josh Parker", "link": "https://stackoverflow.com/users/6290597/josh-parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 1, "accepted_answer_id": 37033416, "answer_count": 1, "score": 6, "last_activity_date": 1462467086, "creation_date": 1462377355, "last_edit_date": 1462391336, "question_id": 37032686, "link": "https://stackoverflow.com/questions/37032686/corrupted-virtual-table-visual-studio-bug", "title": "corrupted virtual table visual studio bug", "body": "<p>I have encountered what appears to me to be a corrupted virtual table that results from building and running the example code posted below in Visual Studio 2015. </p>\n\n<p>When I run it, an exception is thrown when m_string has been assigned. </p>\n\n<p>I have verified that the code builds and runs as intended using both gcc and Clang compilers. </p>\n\n<p>I tried to make the example as minimal as possible, as it was synthesized down from a very large project. </p>\n\n<p>Also, I realize that I am returning null from some of the functions - the actual return value isn't relevant to the problem, but the return type may be. Is this a possible Visual Studio bug?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n\nstruct A { virtual ~A(void) { } };\nstruct B { virtual ~B(void) { } };\nstruct C : public A, public B { virtual ~C(void) override { } };\n\nstruct D\n{\n    virtual ~D(void) { }\n    virtual B *func(void) = 0;\n};\n\nstruct E : public D\n{\n    virtual ~E(void) override { }\n    virtual C *func(void) override { return nullptr; }\n};\n\nstruct F : public A, public E\n{\n    virtual ~F(void) override { }\n    C *func(void) override\n    {\n        m_string = \"Why does the act of setting this field cause a crash?\";\n\n        return nullptr;\n    }\n\n    std::string m_string;\n};\n\nint main(int argc, char **argv)\n{\n    std::unique_ptr&lt;F&gt; pF(new F());\n    (dynamic_cast&lt;D *&gt;(pF.get()))-&gt;func();\n    pF-&gt;func();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "static", "static-variables", "translation-unit"], "comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 4, "creation_date": 1462377339, "post_id": 37032606, "comment_id": 61615345, "body": "FWIW, you&#39;re right.  Neither implementation is thread-safe."}, {"owner": {"reputation": 688, "user_id": 1485667, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/be7271cc4fdf709d5361674982f5c16a?s=128&d=identicon&r=PG", "display_name": "ikku100", "link": "https://stackoverflow.com/users/1485667/ikku100"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1462378720, "post_id": 37032606, "comment_id": 61616213, "body": "Just to make it more clear because for some reason people focus on thread safety (I&#39;m sorry if my question is vague): I&#39;m asking why either method would be better. If they are just as thread unsafe, then thread safety shouldn&#39;t enter the discussion."}], "answers": [{"tags": [], "owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "is_accepted": true, "score": 1, "last_activity_date": 1462378437, "last_edit_date": 1495535288, "creation_date": 1462377830, "answer_id": 37032831, "question_id": 37032606, "link": "https://stackoverflow.com/questions/37032606/static-variable-inside-function-vs-static-class-variable-in-c/37032831#37032831", "title": "static variable inside function vs static class variable in c++", "body": "<p>The difference is scope/visibility of the static variable.   A class member can be shared by more than one method, the variable in the method cannot. </p>\n\n<p>On the principle that data should be as private as possible, the static variable in the method is safer if it meets your needs.</p>\n\n<p>For a discussion of thread safety when <em>initializing</em> the variable, see <a href=\"https://stackoverflow.com/questions/8102125/is-local-static-variable-initialization-thread-safe-in-c11\">this question.</a>, but using the variable is not thread safe unless you take some steps to insure that it is protected (either use and atomic (preferred for a simple value), or protect it with a mutex (if there is more than one piece of data that should be protected))</p>\n"}, {"tags": [], "owner": {"reputation": 12134, "user_id": 100724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/28c55fab931fa7153f0625a09b441674?s=128&d=identicon&r=PG", "display_name": "Viktor Sehr", "link": "https://stackoverflow.com/users/100724/viktor-sehr"}, "is_accepted": false, "score": 2, "last_activity_date": 1462378910, "last_edit_date": 1462378910, "creation_date": 1462377874, "answer_id": 37032842, "question_id": 37032606, "link": "https://stackoverflow.com/questions/37032606/static-variable-inside-function-vs-static-class-variable-in-c/37032842#37032842", "title": "static variable inside function vs static class variable in c++", "body": "<p>To make it thread-safe you should change to <code>std::atomic&lt;unsigned&gt; mID</code>, and write your function as</p>\n\n<pre><code>return mID.fetch_add(1);\n</code></pre>\n\n<p>Which version you choose shouldn't matter, although in my opinion the free function would be the one I'd prefer as it's not possible to access the variable outside of the function.</p>\n"}], "owner": {"reputation": 688, "user_id": 1485667, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/be7271cc4fdf709d5361674982f5c16a?s=128&d=identicon&r=PG", "display_name": "ikku100", "link": "https://stackoverflow.com/users/1485667/ikku100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 37032831, "answer_count": 2, "score": 1, "last_activity_date": 1462378910, "creation_date": 1462377160, "last_edit_date": 1495535288, "question_id": 37032606, "link": "https://stackoverflow.com/questions/37032606/static-variable-inside-function-vs-static-class-variable-in-c", "title": "static variable inside function vs static class variable in c++", "body": "<p>For a unique id for some object I can create a counter in two ways but I don't know <strong>which one is better</strong> while they are quite different in code (though maybe not in byte code, I have no idea).</p>\n\n<p>The first way would be to have some function which uses a static variable: </p>\n\n<p>Header:</p>\n\n<pre><code>unsigned int GetNextID();\n</code></pre>\n\n<p>cpp:</p>\n\n<pre><code>unsigned int GetNextID()\n{\n    static unsigned id{0};\n    return id++;\n}\n</code></pre>\n\n<p>The other option:</p>\n\n<p>Header:</p>\n\n<pre><code>class UniqueIdGenerator\n{\npublic:\n    static unsigned int GetNextID();\n\nprivate:\n    static unsigned int mID;\n}\n</code></pre>\n\n<p>cpp:</p>\n\n<pre><code>unsigned int UniqueIdGenerator::mID = 1;\n\nunsigned int UniqueIdGenerator::GetNextID()\n{\n    return ++mID;\n}\n</code></pre>\n\n<p>FYI, I've <a href=\"https://stackoverflow.com/questions/572547/what-does-static-mean-in-a-c-program/572550#572550\">read</a> that the former is not thread safe, but I don't see why the latter would be either. If anything, I like the simple function more as it's simpler &amp; shorter.</p>\n"}, {"tags": ["c++", "buffer", "cin", "getline"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1462377141, "post_id": 37032519, "comment_id": 61615179, "body": "Can you please provide a sample input that locks up the program? Your code looks fine. Also, what platform and compiler?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1462377159, "post_id": 37032519, "comment_id": 61615194, "body": "Did you really count it? And could you show us?"}, {"owner": {"reputation": 11, "user_id": 6291632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3397f3d2ebe16299d1bf15a97fc5a6d2?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6291632/oliver"}, "edited": false, "score": 0, "creation_date": 1462377537, "post_id": 37032519, "comment_id": 61615494, "body": "I use Xcode on a MacBook"}, {"owner": {"reputation": 11, "user_id": 6291632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3397f3d2ebe16299d1bf15a97fc5a6d2?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6291632/oliver"}, "edited": false, "score": 0, "creation_date": 1462377843, "post_id": 37032519, "comment_id": 61615695, "body": "I have added a sample input with 300 numbers that locks up the program after my code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4832129"}, "edited": false, "score": 0, "creation_date": 1462379761, "post_id": 37032519, "comment_id": 61616845, "body": "Cannot reproduce on Win10 + VS2015, it should be a platform specific bug / limitation. Probably not even related to C++."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1462387049, "post_id": 37032519, "comment_id": 61621235, "body": "If you can run this in a debugger, it might be instructive to trace into <code>getline</code> and find out exactly what it&#39;s doing."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6291632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3397f3d2ebe16299d1bf15a97fc5a6d2?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6291632/oliver"}, "edited": false, "score": 0, "creation_date": 1462379818, "post_id": 37033255, "comment_id": 61616878, "body": "Thank you ltnewberry. Have you tried on your compiler with my example with 300 numbers ? I agree with all your remarks but still need to understand my problem."}, {"owner": {"reputation": 88, "user_id": 5814010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f2570e18928f7a1d90dc67864db6a0?s=128&d=identicon&r=PG&f=1", "display_name": "ltnewberry", "link": "https://stackoverflow.com/users/5814010/ltnewberry"}, "reply_to_user": {"reputation": 11, "user_id": 6291632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3397f3d2ebe16299d1bf15a97fc5a6d2?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6291632/oliver"}, "edited": false, "score": 0, "creation_date": 1462380886, "post_id": 37033255, "comment_id": 61617564, "body": "Hi Oliver, I did try it myself and I had no issue. I ran it with Code::Blocks on a windows machine"}, {"owner": {"reputation": 11, "user_id": 6291632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3397f3d2ebe16299d1bf15a97fc5a6d2?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6291632/oliver"}, "edited": false, "score": 0, "creation_date": 1462381486, "post_id": 37033255, "comment_id": 61617860, "body": "Hi ltnewberry. Thanks for trying. Are there any specific limitations on Xcode on MacBook ?"}, {"owner": {"reputation": 88, "user_id": 5814010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f2570e18928f7a1d90dc67864db6a0?s=128&d=identicon&r=PG&f=1", "display_name": "ltnewberry", "link": "https://stackoverflow.com/users/5814010/ltnewberry"}, "reply_to_user": {"reputation": 11, "user_id": 6291632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3397f3d2ebe16299d1bf15a97fc5a6d2?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6291632/oliver"}, "edited": false, "score": 0, "creation_date": 1462383725, "post_id": 37033255, "comment_id": 61619123, "body": "Honestly, I have no idea. I&#39;ve never worked with Xcode. You may consider posting a question with an Xcode tag regarding your problem. Maybe someone else will have more luck understanding the issue"}], "tags": [], "owner": {"reputation": 88, "user_id": 5814010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f2570e18928f7a1d90dc67864db6a0?s=128&d=identicon&r=PG&f=1", "display_name": "ltnewberry", "link": "https://stackoverflow.com/users/5814010/ltnewberry"}, "is_accepted": false, "score": 0, "last_activity_date": 1462379268, "creation_date": 1462379268, "answer_id": 37033255, "question_id": 37032519, "link": "https://stackoverflow.com/questions/37032519/getline-puts-program-on-pause/37033255#37033255", "title": "Getline puts program on pause", "body": "<p>The only reason I could imagine your code is pausing is if you were overfilling the space allocated for a string. This seems extremely unlikely. There is a limit to the maximum size for a string based on the size of size_t but typically 32 bits are allocated for size_t... This means that the max number of characters for a string is typically 2^32 - 1 characters. Obviously, you are nowhere near reaching that length.</p>\n\n<p>In normal circumstances, you are far more likely to be bound by the amount of space that your system can allocate for the string. This is dependent on the amount of memory available and how your system breaks it up.</p>\n\n<p>Both of these situations seem extremely unlikely.</p>\n\n<p>In this situation, the issue is most likely an issue with your compiler or platform...</p>\n\n<p>What's your reason for taking in such a long string? Have you considered other approaches like reading in the integers from a text file? You could use a vector to store the integers in a more organized way by reading them in individually from the text file, just a thought.</p>\n"}], "owner": {"reputation": 11, "user_id": 6291632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3397f3d2ebe16299d1bf15a97fc5a6d2?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/6291632/oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1462379268, "creation_date": 1462376920, "last_edit_date": 1462377800, "question_id": 37032519, "link": "https://stackoverflow.com/questions/37032519/getline-puts-program-on-pause", "title": "Getline puts program on pause", "body": "<p>When \"text\" is larger than about 280 numbers the program waits ...\nWith any \"text\" of 280 numbers, it works fine.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n    string text;\n    getline (cin, text);\n    cout &lt;&lt; text;\n}\n</code></pre>\n\n<p>eg:</p>\n\n<pre><code>167 214 280 265 278 292 196 249 242 297 7 125 151 4 25 172 293 157 290 277 240 155 201 90 44 230 94 185 184 65 189 159 74 30 59 279 169 136 142 80 46 124 66 203 138 182 171 241 267 294 32 233 165 39 149 181 156 170 137 96 130 238 239 37 298 48 288 6 100 174 268 144 272 109 275 190 160 154 57 15 83 16 183 236 95 97 147 215 77 34 219 91 68 81 52 207 187 105 229 153 243 20 71 53 3 102 259 13 115 123 98 193 87 208 120 221 113 261 126 178 111 133 255 36 287 93 228 263 47 227 188 191 295 205 28 82 244 152 281 166 58 192 162 60 256 76 50 179 235 247 282 118 88 212 112 21 273 141 222 56 209 134 237 2 121 104 23 150 194 146 24 300 64 92 78 79 116 108 286 223 70 61 67 284 19 33 173 216 42 164 29 199 63 69 140 132 211 101 103 119 106 198 296 168 224 158 232 27 254 246 262 110 250 225 135 86 26 51 180 231 114 257 75 202 217 251 218 18 89 213 85 220 117 266 206 127 234 197 291 248 14 258 129 226 148 260 84 204 73 299 31 264 276 107 11 145 1 54 200 49 72 177 62 45 163 271 274 270 195 186 252 139 99 55 41 38 253 285 5 176 283 22 122 161 17 175 131 43 289 269 9 40 245 12 10 143 35 210 128 8\n</code></pre>\n"}, {"tags": ["c++", "valgrind", "libstdc++", "gcc5"], "answers": [{"comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1462542455, "post_id": 37032809, "comment_id": 61692665, "body": "Changing that one character <a href=\"https://github.com/svn2github/valgrind-vex/commit/1ab61656f71e94ce12b68de87f1e28cf3dc0c18c\" rel=\"nofollow noreferrer\">in the patch your linked</a> did the trick, valgrind now does the right thing."}], "tags": [], "owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "is_accepted": true, "score": 34, "last_activity_date": 1462378760, "last_edit_date": 1462378760, "creation_date": 1462377747, "answer_id": 37032809, "question_id": 37032339, "link": "https://stackoverflow.com/questions/37032339/valgrind-unrecognised-instruction/37032809#37032809", "title": "Valgrind Unrecognised instruction", "body": "<p>In fact, Valgrind emulate your program with an intermediate language (VEX) to know if it discovers memory violation.</p>\n\n<p>This VEX language capture all the instructions of several assemblers such as i386, amd64, arm, ... But, from time to time, it miss a few instructions (especially specialized ones like <a href=\"https://en.wikipedia.org/wiki/RdRand\"><code>rdrand</code></a> which is linked to the AES specific instructions set).</p>\n\n<p>Well, this is exactly what happened with your program. Valgrind did probably stumbled on an unknown instruction and could not translate it into the VEX intermediate language.</p>\n\n<p>But, you are not the only one to be in line waiting for a fix:</p>\n\n<ul>\n<li>Same issue on <a href=\"https://bugs.launchpad.net/ubuntu/+source/valgrind/+bug/1501545\">Launchpad</a>.</li>\n<li>Same issue on <a href=\"https://bugs.kde.org/show_bug.cgi?id=358988\">KDE bugtracker</a>.</li>\n<li>... and so on ...</li>\n</ul>\n\n<p>Here is <a href=\"https://github.com/svn2github/valgrind-vex/commit/1ab61656f71e94ce12b68de87f1e28cf3dc0c18c\">a patch</a> that has been applied to Valgrind and that <strong>may</strong> solve the problem for you (depending on your CPU).</p>\n\n<p>But, the only thing you can do is to install a newer version of Valgrind and hope that the instruction is supported in the newest version.</p>\n"}], "owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10535, "favorite_count": 2, "accepted_answer_id": 37032809, "answer_count": 1, "score": 30, "last_activity_date": 1462436657, "creation_date": 1462376438, "last_edit_date": 1462436657, "question_id": 37032339, "link": "https://stackoverflow.com/questions/37032339/valgrind-unrecognised-instruction", "title": "Valgrind Unrecognised instruction", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n\nint main() {\n    std::mt19937_64 rng(std::random_device{}());\n    std::cout &lt;&lt; std::uniform_int_distribution&lt;&gt;(0, 100)(rng) &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>I try to profile it using <code>valgrind</code>, but it says:</p>\n\n<pre><code>vex amd64-&gt;IR: unhandled instruction bytes: 0xF 0xC7 0xF0 0x89 0x6 0xF 0x42 0xC1\nvex amd64-&gt;IR:   REX=0 REX.W=0 REX.R=0 REX.X=0 REX.B=0\nvex amd64-&gt;IR:   VEX=0 VEX.L=0 VEX.nVVVV=0x0 ESC=0F\nvex amd64-&gt;IR:   PFX.66=0 PFX.F2=0 PFX.F3=0\n==2092== valgrind: Unrecognised instruction at address 0x4cdc1b5.  \n==2092== at 0x4CDC1B5:std::(anonymous namespace)::__x86_rdrand() (random.cc:69)  \n==2092== by 0x4CDC321: std::random_device::_M_getval() (random.cc:130)  \n==2092== by 0x4009D4: main (random.h:1619)  \n</code></pre>\n\n<p>Preceded by multiple instances of:</p>\n\n<pre><code>--2092-- WARNING: Serious error when reading debug info  \n--2092-- When reading debug info from /lib/x86_64-linux-gnu/ld-2.22.so:  \n--2092-- Ignoring non-Dwarf2/3/4 block in .debug_info  \n</code></pre>\n\n<p>I am on Debian using standard packages on an x86-64 platform compiling with gcc 5.3.1 using valgrind-3.11.0. The illegal instruction seems to be inside libstdc++6.</p>\n\n<p>How do I get <code>valgrind</code> to profile my code?</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "visual-studio-2015", "compiler-options"], "comments": [{"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1462377075, "post_id": 37032279, "comment_id": 61615127, "body": "I&#39;m not able to repro with VC++ 2015 Update 2."}, {"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 0, "creation_date": 1462377255, "post_id": 37032279, "comment_id": 61615277, "body": "Thread-safe initialization of function-local statics is <a href=\"https://msdn.microsoft.com/en-us/library/y5f6w579.aspx\" rel=\"nofollow noreferrer\">enabled by default</a>. Why do you need the option?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1462377280, "post_id": 37032279, "comment_id": 61615303, "body": "Works fine when I try it.  Check your toolset selection, ensure you have the latest update, just don&#39;t bother because it is the default as demanded by the C++ spec."}, {"owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1462377962, "post_id": 37032279, "comment_id": 61615765, "body": "@HansPassant I understand its enabled by default. I went down this road only because <b>by default</b> I started getting tons of warnings about local statics being thread un-safe (both in the std library and in my code). In trying to shut this warning down, I introduced the /Zc:threadSafeInit flag manually, only to end up with that D9025 warning. I am about ready to commit myself to an asylum now."}], "owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2286, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1462376806, "creation_date": 1462376218, "last_edit_date": 1462376806, "question_id": 37032279, "link": "https://stackoverflow.com/questions/37032279/zcthreadsafeinit-flag-in-vs-2015", "title": "/Zc:threadSafeInit flag in VS 2015", "body": "<p>VS 2015 has a new flag <code>/Zc:threadSafeInit</code> that directs the compiler to generate code to make function local statics thread safe. However, I am unable to get this directive to take effect in my IDE. If I set it as Additional Options in the compiler command line property sheet, I get the following warning during build:</p>\n\n<p>1>cl : Command line warning D9025: overriding '/Zc:threadSafeInit' with '/Zc:threadSafeInit-'</p>\n\n<p>I don't see any instance of the latter anywhere in my project property sheets or .vcxproj files.</p>\n\n<p>Anybody can guess what is going on here? Is there a possibility /Zc:threadSafeInit is conflicting with some other compiler option?</p>\n"}, {"tags": ["python", "c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1462376241, "post_id": 37032257, "comment_id": 61614489, "body": "&quot;I need to write the equivalent Python version for this as I&#39;m not too comfortable with C++&quot; huh? If you have the code already, why do you need to rewrite it? Rewriting c++ to some other language requires much more knowledge about c++ than compiling and running existing code (provided that code has no errors)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2201041"}, "edited": false, "score": 3, "creation_date": 1462376428, "post_id": 37032257, "comment_id": 61614617, "body": "It looks like the C++ loops are including the final value, but the Python ones aren&#39;t. (range(n) gives [0, n))"}, {"owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1462377775, "post_id": 37032257, "comment_id": 61615643, "body": "@tobi303: Maybe they have a requirement that it run hundreds of times more slowly. :)"}, {"owner": {"reputation": 40328, "user_id": 86967, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1", "display_name": "Brent Bradburn", "link": "https://stackoverflow.com/users/86967/brent-bradburn"}, "edited": false, "score": 0, "creation_date": 1462377913, "post_id": 37032257, "comment_id": 61615737, "body": "There are various unexplained differences.  Why not make a more direct translation?"}], "answers": [{"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 2, "last_activity_date": 1462378323, "last_edit_date": 1462378323, "creation_date": 1462377899, "answer_id": 37032851, "question_id": 37032257, "link": "https://stackoverflow.com/questions/37032257/correct-way-to-translate-c-code-to-python/37032851#37032851", "title": "Correct way to translate C++ code to Python", "body": "<p>You get the index error because your arrays aren't prepopulated, as they would be in C++.</p>\n\n<p>Try defining them like so:</p>\n\n<pre><code>from collections import defaultdict\n...\n\n#map&lt;int,double&gt; Q[N+1];\nQ = [defaultdict(float) for _ in range(N+1)]\n\n#map&lt;int,double&gt; r[N+1];\nr = [defaultdict(float) for _ in range(N+1)]\n\n#map&lt;int,double&gt; d[N+1];\nd = [defaultdict(float) for _ in range(N+1)]\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>How do I correctly translate the C++ code to it's python equivalent?</p>\n</blockquote>\n\n<p>If it were me, and I didn't understand the code I was starting with, I'd do a line-by-line, expression-by-expression translation with absolutely minimal changes.</p>\n\n<p>I would also demand a test case that runs correctly with the C++ code and adapt that to confirm the Python code.</p>\n\n<p>Here is my line-by-line, UNTESTED translation:</p>\n\n<pre><code>from collections import defaultdict\n\n\n#NameError: name 'N' is not defined\nN = 12\n\n#NameError: name 'rate' is not defined\nrate = [.03]\n\n#NameError: name 'dt' is not defined\ndt = 1.0/12\n\n\n#U[0]=rate[0];\n#  unused\n\n#map&lt;int,double&gt; Q[N+1];\nQ = [defaultdict(float) for _ in range(N+1)]\n\n#map&lt;int,double&gt; r[N+1];\nr = [defaultdict(float) for _ in range(N+1)]\n\n#map&lt;int,double&gt; d[N+1];\nd = [defaultdict(float) for _ in range(N+1)]\n\n#r[0][0]=rate[0];\nr[0][0] = rate[0]\n\n#d[0][0]=1/(1+r[0][0]*dt);\nd[0][0] = 1 / (1 + r[0][0] * dt)\n\n#Q[0][0]=1.0;\nQ[0][0] = 1.0\n\n#for(int i=1;i&lt;=N;i++)\n#{\nfor i in range(1, N+1, 1):\n\n#    for(int j=-i;j&lt;=i;j=j+2)\n#    {\n    for j in range(-i, i+1, 2):\n\n#        if(j==i)\n#            {Q[i][i]= 0.5*Q[i-1][i-1]*d[i-1][i-1];}\n        if j == i:\n            Q[i][i] = 0.5 * Q[i-1][i-1] * d[i-1][i-1]\n\n#        if(j==-i)\n#            {Q[i][-i]=0.5*Q[i-1][-i+1]*d[i-1][-i+1];}\n\n        if j == -i:\n            Q[i][-i] = 0.5 * Q[i-1][-i+1] * d[i-1][-i+1]\n\n#        Q[i][j]=0.5*(Q[i-1][j-1]*d[i-1][j-1]+Q[i-1][j+1]*d[i-1][j+1]);\n        Q[i][j] = 0.5 * (Q[i-1][j-1] * d[i-1][j-1] + Q[i-1][j+1] * d[i-1][j+1])\n#    }\n#}\n</code></pre>\n"}], "owner": {"reputation": 5301, "user_id": 1411975, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ca8818eeae6a48e4a4b67cbca112a7ba?s=128&d=identicon&r=PG", "display_name": "Newtt", "link": "https://stackoverflow.com/users/1411975/newtt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 37032851, "answer_count": 1, "score": 0, "last_activity_date": 1462378323, "creation_date": 1462376144, "question_id": 37032257, "link": "https://stackoverflow.com/questions/37032257/correct-way-to-translate-c-code-to-python", "title": "Correct way to translate C++ code to Python", "body": "<p>I have a C++ code doing the following:</p>\n\n<pre><code>U[0]=rate[0];\nmap&lt;int,double&gt; Q[N+1];           \nmap&lt;int,double&gt; r[N+1];           \nmap&lt;int,double&gt; d[N+1];           \nr[0][0]=rate[0];\nd[0][0]=1/(1+r[0][0]*dt);\nQ[0][0]=1.0;\nfor(int i=1;i&lt;=N;i++)\n{\n    for(int j=-i;j&lt;=i;j=j+2)\n    {      \n        if(j==i)\n            {Q[i][i]= 0.5*Q[i-1][i-1]*d[i-1][i-1];}\n        if(j==-i)\n            {Q[i][-i]=0.5*Q[i-1][-i+1]*d[i-1][-i+1];}\n\n        Q[i][j]=0.5*(Q[i-1][j-1]*d[i-1][j-1]+Q[i-1][j+1]*d[i-1][j+1]);\n    }\n}\n</code></pre>\n\n<p>I need to write the equivalent Python version for this as I'm not too comfortable with C++. I have done the following:</p>\n\n<pre><code>Q, U, r, d = [], [], [], []\nQ.append([])\nQ[0].append(1)\nU.append(rate[1])\nr.append([])\nr[0].append(rate[1])\nd.append([])\nd[0].append(1/(1+r[0][0]*dt))\nfor i in range(0, N):\n    for j in range(-i, i, 2):\n        if j == i:\n            Q[i].append(0.5*Q[i-1][i-1]*d[i-1][i-1])\n        elif j == -i:\n            Q[i].insert(-i, (0.5*Q[i-1][-i+1]*d[i-1][-i+1]))\n        Q[i].insert(j, 0.5*(Q[i-1][j-1]*d[i-1][j-1]+Q[i-1][j+1]*d[i-1][j+1]))\n</code></pre>\n\n<p>However, I'm getting an <code>index out of range</code> error in this line:</p>\n\n<pre><code>Q[i].insert(-i, (0.5*Q[i-1][-i+1]*d[i-1][-i+1]))\n</code></pre>\n\n<p>How do I correctly translate the C++ code to it's python equivalent?</p>\n"}, {"tags": ["c++", "multithreading", "mutex", "priority-queue", "producer-consumer"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1462376038, "post_id": 37032160, "comment_id": 61614329, "body": "<i>&quot;<b>Why four queues?</b> Because each queue has its own priority&quot;</i> Isn&#39;t such rather a job for a single <a href=\"http://en.cppreference.com/w/cpp/container/priority_queue\" rel=\"nofollow noreferrer\"><code>std::priority_queue</code></a>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1462376238, "post_id": 37032160, "comment_id": 61614484, "body": "I would just use a single <code>std::priority_queue</code> but store a priority,data <code>std::pair</code> in the queue.  The you can sort the queue by the priority part of the pair and you are guaranteed to always consume the highest priority object."}], "answers": [{"comments": [{"owner": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "edited": false, "score": 0, "creation_date": 1462539306, "post_id": 37033563, "comment_id": 61690547, "body": "Done with <code>priority_queue&lt;std::pair&lt;int,struct&gt;&gt;</code> providing it my own class <code>Compare</code>, with just one mutex and two condition variables is much simpler to handle."}], "tags": [], "owner": {"reputation": 1533, "user_id": 677915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b5b62d6c2640b7285e73c9d9967b075?s=128&d=identicon&r=PG", "display_name": "dim-an", "link": "https://stackoverflow.com/users/677915/dim-an"}, "is_accepted": true, "score": 0, "last_activity_date": 1462380213, "creation_date": 1462380213, "answer_id": 37033563, "question_id": 37032160, "link": "https://stackoverflow.com/questions/37032160/multithreaded-producer-consumer-with-four-queues/37033563#37033563", "title": "Multithreaded producer/consumer with four queues", "body": "<p>I see following problems in your code:</p>\n\n<ol>\n<li>Printing doesn't necessarily reflect order in which elements are poped. One thread extract element from queue and then can wait for <code>print</code> lock for a long time and other thread that got element after can be the first that gets <code>print</code> lock.</li>\n<li>Similar problem with priority queue. There can be such situation: first thread got element from priority queue and knows that it should pop <code>queue1</code>, then first thread is switched off by scheduler and second thread starts to work. It also pops priority queue and then proceeds to pop <code>queue2</code> (while first thread is switched off).</li>\n</ol>\n\n<p>I would follow advice from comments and use single <code>priority_queue&lt;std::pair&lt;int,int&gt;&gt;</code>, where first element of <code>std::pair&lt;int,int&gt;</code> is priority and the second one is payload. This would help you to deal with problem 2.\nAs for problem 1 you should print stuff under the same lock as you <code>pop</code> stuff.</p>\n"}], "owner": {"reputation": 1024, "user_id": 1459065, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b4f22a418c18e4c2977dede2450e695?s=128&d=identicon&r=PG", "display_name": "elmazzun", "link": "https://stackoverflow.com/users/1459065/elmazzun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 37033563, "answer_count": 1, "score": 0, "last_activity_date": 1462380213, "creation_date": 1462375886, "question_id": 37032160, "link": "https://stackoverflow.com/questions/37032160/multithreaded-producer-consumer-with-four-queues", "title": "Multithreaded producer/consumer with four queues", "body": "<p>I separated the consumer/producer problem from my application to be sure my threads work as they should.</p>\n\n<p>I have one producer thread and a thread pool of consumers: in my application, one thread accepts connections and queue them up (within a custom struct of mine) in one of four queues, and four threads pop from queues and deal with connections queued before; here, my queues will contain random <code>int</code> between 1 and 4, no custom struct.</p>\n\n<p>Four <code>mutex</code> ensure data protection for each queue (plus one mutex for a decent <code>cout</code> on terminal when printing queues size); a <code>priority_queue</code> is used to synchronize the removal from the four queues. The producer thread pushes a new <code>int</code> value in the right queue and then pushes too in <code>priority_queue</code> so that when a thread wants to read he first needs to <code>pop()</code> from <code>priority_queue</code> in order to understand what queue has been pushed (since it is sorted, after some random pushing my <code>priority_queue</code> will look like <code>1 1 1 2 3 3 3 3 4 4</code>, so a consumer thread would <code>pop()</code>, see the value <code>1</code> and understand it has to remove from queue <code>1</code>).</p>\n\n<p><strong>Why four queues?</strong> Because each queue has its own priority (1=max, 4=minimum), elements from queue 1 should be all removed before removing elements from queue 2; same reasonment for all other queues. Since here I have a random pushing of value from 1 to 4, there should be no starvation.</p>\n\n<p><strong>Compiled with</strong>: <code>g++ -std=c++11 -o producer-consumer-multiqueue producer-consumer-multiqueue.cpp -pthread</code> on Ubuntu 14.04 x86_64, gcc version 4.8.4.</p>\n\n<p><strong>The problem</strong>: aside the strange output due to the scheduler, the consumer threads do not act as I want, since as you can see in the output below it is not given priority to removing elements from queue 1, but <em>removal is done not following the priority (queue 1 max, queue 4 min)</em>.\nI'd like to achieve my goal without using external libraries, no <code>boost</code> <em>et similia</em>.</p>\n\n<pre><code>(0 0 1 0) // (elements in queue 1, in queue 2, in queue 3, in queue 4)\n(1 0 1 0)\n(1 1 1 0)\n(0 0 0 0)\n(0 0 0 0)\n(0 0 0 0)\n(1 0 0 0)\n(2 0 0 0)\n(2 1 0 0)\n(1 1 0 1)\n(1 0 0 1)\n(1 0 0 0)\n(1 0 0 0)\n(0 0 0 0)\n(1 0 0 0)\n...CTRL+c\n</code></pre>\n\n<p><strong>The code</strong>: this is my full testing file, compilable and executable as is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;queue&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n#include &lt;thread&gt;\n#include &lt;random&gt;\n\nusing namespace std;\n\n// modify this to modify the number of consumer threads\n#define WORKERS_THREADS     4\n// max size of each of four queues\n#define MAX_QUEUE_SIZE      100\n// debug\n#define DEFAULTCOLOR        \"\\033[0m\"\n#define RED                 \"\\033[22;31m\"\n#define YELLOW              \"\\033[1;33m\"\n#define GREEN               \"\\033[0;0;32m\"\n\nclass MultiQueue {\n    public:\n        void initThreadPool(void);\n        void insert(int num);\n        void remove(void);\n        void insertPriorityQueue(int num);\n        int removePriorityQueue(void);\n        void printQueues(string what);\n        int getQueue1Size(void);\n        int getQueue2Size(void);\n        int getQueue3Size(void);\n        int getQueue4Size(void);\n        int getPrioQueueSize(void);\n    private:\n        vector&lt;thread&gt; workers;\n\n        queue&lt;int&gt;q1;\n        queue&lt;int&gt;q2;\n        queue&lt;int&gt;q3;\n        queue&lt;int&gt;q4;\n\n        priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt;&gt; prioq;\n\n        // mutex for push/pop in priority queue\n        mutex priority_queue_mutex;\n        // 4 mutexes for each queue\n        mutex m1, m2, m3, m4;\n        // mutex for printing 4 queues size\n        mutex print;\n\n        // mutex for push/pop to priority_queue\n        condition_variable prioq_cond;\n        // 4 conds for consumer threads\n        condition_variable w1, w2, w3, w4;\n};\n\nint MultiQueue::getQueue1Size() { return q1.size(); }\n\nint MultiQueue::getQueue2Size() { return q2.size(); }\n\nint MultiQueue::getQueue3Size() { return q3.size(); }\n\nint MultiQueue::getQueue4Size() { return q4.size(); }\n\nint MultiQueue::getPrioQueueSize() { return prioq.size(); }\n\nvoid MultiQueue::initThreadPool(void) {\n    for (int i=0; i&lt;WORKERS_THREADS; i++) {\n        workers.push_back(thread(&amp;MultiQueue::remove, this));\n        workers[i].detach();\n    }\n}\n\nvoid MultiQueue::printQueues(string what) {\n    lock_guard&lt;mutex&gt; l(print);\n    if (what == \"insert\")\n        cout &lt;&lt; GREEN &lt;&lt; '(' &lt;&lt; getQueue1Size() &lt;&lt; ' ' &lt;&lt; getQueue2Size() &lt;&lt; ' ' &lt;&lt; getQueue3Size() &lt;&lt; ' ' &lt;&lt; getQueue4Size() &lt;&lt; ')' &lt;&lt; DEFAULTCOLOR &lt;&lt; '\\n' &lt;&lt; flush;\n    else\n        cout &lt;&lt; YELLOW &lt;&lt; '(' &lt;&lt; getQueue1Size() &lt;&lt; ' ' &lt;&lt; getQueue2Size() &lt;&lt; ' ' &lt;&lt; getQueue3Size() &lt;&lt; ' ' &lt;&lt; getQueue4Size() &lt;&lt; ')' &lt;&lt; DEFAULTCOLOR &lt;&lt; '\\n' &lt;&lt; flush;\n}\n\n// called from producer thread to tell consumer threads \n// what queues to pop() from\nvoid MultiQueue::insertPriorityQueue(int num) {\n    lock_guard&lt;mutex&gt; prio(priority_queue_mutex);\n    prioq.push(num);\n    prioq_cond.notify_one();\n}\n\n// called from consumer threads to see what queues \n// have elements to pop() from\nint MultiQueue::removePriorityQueue(void) {\n    int ret = 0;\n    unique_lock&lt;mutex&gt; prio(priority_queue_mutex);\n    prioq_cond.wait(prio, [this] () { return getPrioQueueSize() &gt; 0; });\n    ret = prioq.top();\n    prioq.pop();\n    return ret;\n}\n\n// producer thread \nvoid MultiQueue::insert(int num) {\n    switch(num) {\n        case 1: {\n            unique_lock&lt;mutex&gt; locker(m1);\n            w1.wait(locker, [this] () { return getQueue1Size() &lt; MAX_QUEUE_SIZE; });\n            q1.push(num);\n            break;\n        }\n        case 2: {\n            unique_lock&lt;mutex&gt; locker(m2);\n            w2.wait(locker, [this] () { return getQueue2Size() &lt; MAX_QUEUE_SIZE; });\n            q2.push(num);\n            break;\n        }\n        case 3: {\n            unique_lock&lt;mutex&gt; locker(m3);\n            w3.wait(locker, [this] () { return getQueue3Size() &lt; MAX_QUEUE_SIZE; });\n            q3.push(num);\n            break;      \n        }\n        case 4: {\n            unique_lock&lt;mutex&gt; locker(m4);\n            w4.wait(locker, [this] () { return getQueue4Size() &lt; MAX_QUEUE_SIZE; });\n            q4.push(num);\n            break;\n        }\n        default: {\n            cout &lt;&lt; \"number not 1, 2, 3 nor 4: \" &lt;&lt; num &lt;&lt; '\\n' &lt;&lt; flush;\n            break;\n        }\n    }\n    printQueues(\"insert\");\n    insertPriorityQueue(num);\n}\n\nvoid MultiQueue::remove(void) {\n    int which_queue = 0;\n    while (true) {\n        which_queue = removePriorityQueue();\n        switch (which_queue) {\n            case 1: {\n                lock_guard&lt;mutex&gt; lock(m1);\n                int ret = q1.front();\n                q1.pop();\n                printQueues(\"remove\");\n                break;\n            }\n            case 2: {\n                lock_guard&lt;mutex&gt; lock(m2);\n                int ret = q2.front();\n                q2.pop();\n                printQueues(\"remove\");\n                break;\n            }\n            case 3: {\n                lock_guard&lt;mutex&gt; lock(m3);\n                int ret = q3.front();\n                q3.pop();\n                printQueues(\"remove\");\n                break;\n            }\n            case 4: {\n                lock_guard&lt;mutex&gt; lock(m4);\n                int ret = q4.front();\n                q4.pop();\n                printQueues(\"remove\");\n                break;\n            }\n            default: {\n                break;\n            }\n        }\n    }\n}\n\nint main(void) {\n    int random_num = 0;\n\n    MultiQueue mq;\n    mq.initThreadPool();\n\n    default_random_engine eng((random_device())());\n    uniform_int_distribution&lt;int&gt; idis(1, 4);\n    while (true) {\n        random_num = idis(eng);\n        mq.insert(random_num);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "gdb"], "comments": [{"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1462377227, "post_id": 37031948, "comment_id": 61615248, "body": "aren&#39;t they preserved by default?"}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1462377276, "post_id": 37031948, "comment_id": 61615300, "body": "Nope.  The watchpoints disappear.  The breakpoints may be preserved."}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1462378169, "post_id": 37031948, "comment_id": 61615888, "body": "I&#39;m getting the warning <code>Error in re-setting breakpoint NUMBER: No symbol &quot;variable_name&quot; in current context</code>, but it leaves the watchpoint in the breakpoints list: <code>NUMBER    hw watchpoint keep y variable_name</code> and its value is getting printed in the next run..."}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1462378573, "post_id": 37031948, "comment_id": 61616129, "body": "Is there any simple way to reproduce your issue?"}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1462379488, "post_id": 37031948, "comment_id": 61616689, "body": "I&#39;ll update when I get back on the computer."}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1462391623, "post_id": 37031948, "comment_id": 61623813, "body": "@WojciechFrohmberg, I have updated with an example."}], "answers": [{"tags": [], "owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "is_accepted": false, "score": 2, "last_activity_date": 1462392001, "creation_date": 1462392001, "answer_id": 37036961, "question_id": 37031948, "link": "https://stackoverflow.com/questions/37031948/is-it-possible-to-preserve-hardware-watchpoint-across-re-runs-in-the-same-gdb-se/37036961#37036961", "title": "Is it possible to preserve hardware watchpoint across re-runs in the same gdb session?", "body": "<p>It should work with two conditions: first, that you disable address space randomization; and second, that you use <code>watch -location</code>.</p>\n\n<p>To disable randomization, use:</p>\n\n<pre><code>(gdb) set disable-randomization on\n</code></pre>\n\n<p>I think this is the default, so you might be able to skip this.</p>\n\n<p>Next, use:</p>\n\n<pre><code>(gdb) watch -location NeverGoOutOfScope\n</code></pre>\n\n<p>This will record the address of the variable in the watchpoint.  This is almost always what you actually want -- gdb has some fancy code to re-evaluate watchpoint expressions when a variable goes out of scope, but in practice I think this is more confusing than helpful.</p>\n\n<p>This approach works for me on your test, though I have to ignore a few hits of the watchpoint during process initialization.</p>\n"}], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1462392001, "creation_date": 1462375334, "last_edit_date": 1462391538, "question_id": 37031948, "link": "https://stackoverflow.com/questions/37031948/is-it-possible-to-preserve-hardware-watchpoint-across-re-runs-in-the-same-gdb-se", "title": "Is it possible to preserve hardware watchpoint across re-runs in the same gdb session?", "body": "<p>Suppose I start a gdb session, and create a breakpoint and run.</p>\n\n<p>After I break, I create a watchpoint based on the memory address of a symbol in the current execution, and delete the original breakpoint.</p>\n\n<p>Some time later, I interrupt the program with <code>Control-C</code>, still inside gdb, I issue the <code>run</code> command to restart the program from the beginning.</p>\n\n<p>However, I would like to preserve the hardware watchpoint across the restart of the debugged process.</p>\n\n<p>Is there a gdb setting that allows me to preserve hardware watchpoints across reruns?</p>\n\n<hr>\n\n<p>Update: Here is an example to reproduce the problem.</p>\n\n<pre><code>int main(){\n    int NeverGoOutOfScope = 0;\n    NeverGoOutOfScope = 7;\n    while (1);\n}\n</code></pre>\n\n<p>Here are the sequence of <code>gdb</code> commands.</p>\n\n<pre><code>break 3\nrun\nwatch NeverGoOutOfScope\ninfo watch \nrun \n# After this point, the breakpoint remains but the watchpoint is gone.\ninfo watch\n</code></pre>\n\n<p>Is it possible to preserve the watchpoint without having to recreate it?</p>\n"}, {"tags": ["c++", "emacs", "doxygen"], "answers": [{"comments": [{"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1462434320, "post_id": 37039488, "comment_id": 61638655, "body": "Doxygen comments take a lot of space and make interfaces scattered. This may be inconvenient if you want to look things up in the middle of implementing something without going to your browser. In this case, you do not want to hide all comments, since you want to see the comments for local variables, loops etc."}], "tags": [], "owner": {"reputation": 2381, "user_id": 2574937, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/feedcf155189fa4c0e6f0f5ef99e6201?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Malehorn", "link": "https://stackoverflow.com/users/2574937/brian-malehorn"}, "is_accepted": false, "score": 0, "last_activity_date": 1462402754, "creation_date": 1462402754, "answer_id": 37039488, "question_id": 37031890, "link": "https://stackoverflow.com/questions/37031890/hiding-all-doxygen-comments-in-the-active-emacs-buffer/37039488#37039488", "title": "Hiding all doxygen comments in the active Emacs buffer", "body": "<p>Unfortunately I don't believe such a package exists. You'll have to hide them each manually with something like <a href=\"https://www.emacswiki.org/emacs/HideShow\" rel=\"nofollow\">HideShow</a> or hide all comments with the package you mentioned.</p>\n\n<p>A better question might be: why are doxygen comments less valuable than non-doxygen comments? You'd figure the intentional, structured doxygen comments would be more useful than a haphazard scattering of non-doxygen comments.</p>\n"}], "owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1462402754, "creation_date": 1462375193, "last_edit_date": 1495541274, "question_id": 37031890, "link": "https://stackoverflow.com/questions/37031890/hiding-all-doxygen-comments-in-the-active-emacs-buffer", "title": "Hiding all doxygen comments in the active Emacs buffer", "body": "<p>Is there a way to hide all doxygen comments in the active Emacs buffer?\n<a href=\"https://stackoverflow.com/q/2936111/2725810\">This</a> question asks only about single-line comments.\nThere is also the <a href=\"https://www.emacswiki.org/emacs/HideOrIgnoreComments\" rel=\"nofollow noreferrer\">Hide Or Ignore Comments</a> package, but that hides all comments, including non-doxygen ones. </p>\n"}, {"tags": ["c++", "c++11", "std"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 4, "creation_date": 1462375453, "post_id": 37031844, "comment_id": 61613919, "body": "@KerrekSB Where is the SFINAE above?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1462375701, "post_id": 37031844, "comment_id": 61614098, "body": "@Barry the linked question is explaining different code.  They are both attempts at <code>is_base_of</code>, but the linked one looks like it solves the private inheritance problem, while (as far as I guess) the above one does not (and is simpler as a result).  Neeraj, do you want to know how <code>is_base_of</code> can be implemented in-language, or do you want to know how the code you posted works?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1462375741, "post_id": 37031844, "comment_id": 61614125, "body": "@KerrekSB: Is it? Looks like basic overload resolution to me. <code>D*</code> converts implicitly to <code>B*</code> iif (ish) <code>B</code> is a base of <code>D</code>. That overload returns a value of a type <code>Yes</code> that&#39;s three times the size of a <code>No</code>, which you can test for with <code>sizeof</code>. All other cases result in invocation of the <code>...</code> overload which returns a <code>No</code>. And the icing on the cake is that the whole thing&#39;s in an unevaluated context so nothing&#39;s actually invoked and the entire thing can be used as a compile-time constant."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1462375816, "post_id": 37031844, "comment_id": 61614190, "body": "@Yakk Yeah, but the logic behind why that <code>is_base_of</code> works also explains why this one works too - it&#39;s just more complex."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1462375880, "post_id": 37031844, "comment_id": 61614227, "body": "@Barry, I disagree with the duplicate part. The other question has very different code."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1462376019, "post_id": 37031844, "comment_id": 61614315, "body": "@Yakk: You&#39;re right, there&#39;s no substitution failure here. Just plain overload resolution."}, {"owner": {"reputation": 593, "user_id": 3759301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2fdfbcb8aa9b2afa568bb8b62af05e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj", "link": "https://stackoverflow.com/users/3759301/neeraj"}, "edited": false, "score": 0, "creation_date": 1462376349, "post_id": 37031844, "comment_id": 61614566, "body": "Thanks guys for your immediate response. I am more inclined towards understanding the logic of std::is_base_of in C++11.  Agree above code is not the actual implementation of std::is_base_of. I just found it over internet."}], "answers": [{"comments": [{"owner": {"reputation": 593, "user_id": 3759301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2fdfbcb8aa9b2afa568bb8b62af05e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj", "link": "https://stackoverflow.com/users/3759301/neeraj"}, "edited": false, "score": 0, "creation_date": 1462376736, "post_id": 37032228, "comment_id": 61614862, "body": "Thanks R Sahu.  Surely I am missing some basics here.  What is the role of 0 (expression) which is passed in static_cast operator?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 593, "user_id": 3759301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2fdfbcb8aa9b2afa568bb8b62af05e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj", "link": "https://stackoverflow.com/users/3759301/neeraj"}, "edited": false, "score": 3, "creation_date": 1462376925, "post_id": 37032228, "comment_id": 61615016, "body": "@Neeraj It is an old-school <code>nullptr</code>"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1462376412, "last_edit_date": 1462376412, "creation_date": 1462376088, "answer_id": 37032228, "question_id": 37031844, "link": "https://stackoverflow.com/questions/37031844/logic-of-stdis-base-of-in-c-11/37032228#37032228", "title": "Logic of std::is_base_of in C++ 11", "body": "<p>When <code>B</code> is a base class of <code>D</code>, the call <code>Test(static_cast&lt;D*&gt;(0))</code> resolves to <code>Yes Test(B*)</code>. Otherwise, it resolves to <code>No Test(...)</code>.</p>\n\n<p>If <code>B</code> is a base class of <code>D</code>, the value of <code>sizeof(Test(static_cast&lt;D*&gt;(0)))</code> is <code>sizeof(Yes)</code>. Otherwise, it is equal to <code>sizeof(No)</code>.</p>\n\n<p><code>Yes</code> and <code>No</code> are defined such that <code>sizeof(Yes)</code> will never be equal to <code>sizeof(No)</code>.</p>\n\n<p>If <code>B</code> is a base class of <code>D</code>,</p>\n\n<pre><code>sizeof(Test(static_cast&lt;D*&gt;(0))) == sizeof(Yes)\n</code></pre>\n\n<p>evaluates to <code>true</code>. Otherwise it evaluates to <code>false</code>.</p>\n"}], "owner": {"reputation": 593, "user_id": 3759301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2fdfbcb8aa9b2afa568bb8b62af05e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj", "link": "https://stackoverflow.com/users/3759301/neeraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 1, "accepted_answer_id": 37032228, "answer_count": 1, "score": 2, "last_activity_date": 1462376412, "creation_date": 1462375045, "question_id": 37031844, "link": "https://stackoverflow.com/questions/37031844/logic-of-stdis-base-of-in-c-11", "title": "Logic of std::is_base_of in C++ 11", "body": "<p>While going through some of the C++ concepts I stumbled upon std::is_base_of logic.</p>\n\n<p>Googling around for logic produced the below code, but I am not able to understand it.</p>\n\n<p>Could somebody explain me how it works?</p>\n\n<pre><code>template&lt;typename D, typename B&gt;\nclass IsDerivedFromHelper\n{\n    class No { };\n    class Yes { No no[3]; };\n\n    static Yes Test( B* );\n    static No Test( ... );\npublic:\n    enum { Is = sizeof(Test(static_cast&lt;D*&gt;(0))) == sizeof(Yes) };\n\n};\n\n\ntemplate &lt;class C, class P&gt; \nbool IsDerivedFrom() {\n    return IsDerivedFromHelper&lt;C, P&gt;::Is;\n}\n</code></pre>\n"}, {"tags": ["c++", "iterator", "standards", "deprecated", "c++17"], "comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 7, "creation_date": 1462375253, "post_id": 37031805, "comment_id": 61613795, "body": "@FirstStep I would hope to get an answer that would not be opinion based. If the standard committee is deprecating a class I depend on next year I&#39;d hope they&#39;d have a direction they are channeling me towards right now."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1462375468, "post_id": 37031805, "comment_id": 61613929, "body": "Just because they are deprecating it does not mean you can&#39;t keep using it for a while."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1462375739, "post_id": 37031805, "comment_id": 61614124, "body": "Note: <code>deprecating</code> means it is no longer recommended but it will still be supported for at least another version of the standard."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 4, "creation_date": 1462375792, "post_id": 37031805, "comment_id": 61614164, "body": "The iterators in the standard library have gone for option 1."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1462376273, "post_id": 37031805, "comment_id": 61614507, "body": "@BoPersson It would seem to indicate that we should do this as well then?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1462376806, "post_id": 37031805, "comment_id": 61614918, "body": "@LokiAstari - it&#39;s even weaker than that. Formally, deprecation is a notice that something might go away in the future. That&#39;s all. Note that the standard C headers have been deprecated in C++ since 1998."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1462377030, "post_id": 37031805, "comment_id": 61615096, "body": "@PeteBecker But still this <i>is</i> the standard committee trying to steer us away from these things right. I mean I&#39;ve used <code>#include &lt;c*&gt;</code> as long as I&#39;ve been writing C++ on account of this. Don&#39;t tell me that&#39;s been in vain!"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1462377104, "post_id": 37031805, "comment_id": 61615146, "body": "@JonathanMee - no, it hasn&#39;t been in vain. It hasn&#39;t been necessary, but there are advantages to it."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1462377212, "post_id": 37031805, "comment_id": 61615236, "body": "@PeteBecker And they&#39;re saying something similar here right? You&#39;ve used this for a long time but there&#39;s a better way. Hence the question..."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1462377525, "post_id": 37031805, "comment_id": 61615483, "body": "Option 1. A thing isn&#39;t an iterator unless <code>iterator_traits</code> for it has the various member typedefs, and there&#39;s no point in specializing <code>iterator_traits</code> - it&#39;s more typing."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1462377969, "post_id": 37031805, "comment_id": 61615768, "body": "@JonathanMee - I use <code>std::iterator</code> because it&#39;s convenient. I&#39;ll continue to use it until I can&#39;t."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1462378511, "post_id": 37031805, "comment_id": 61616103, "body": "@PeteBecker I respect that, but if the standard committee has decided it&#39;s time for us to move on I&#39;m ready to start making the transition."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1462382404, "post_id": 37031805, "comment_id": 61618362, "body": "@PeteBecker: I was wondering it the template specialization of iterator_traits can use inheritance to reduce typing? Would that be worth the effort if it reduced boilerplate?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1462383413, "post_id": 37031805, "comment_id": 61618936, "body": "@LokiAstari Yes, undefined behavior includes &quot;appearing to work&quot;."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1462384126, "post_id": 37031805, "comment_id": 61619387, "body": "@LokiAstari <a href=\"http://eel.is/c++draft/iterator.traits#1\" rel=\"nofollow noreferrer\">&quot;Accordingly, it is required that if Iterator is the type of an iterator, &#91;the <code>iterator_traits&lt;Iterator&gt;</code> typedefs be defined&#93;.&quot;</a>"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1462384717, "post_id": 37031805, "comment_id": 61619751, "body": "@T.C.: Thanks. Worth the reference. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1462386467, "post_id": 37035059, "comment_id": 61620869, "body": "If you really like what <code>std::iterator</code> does, you can trivially write your own version. So the risk of carpal-tunnel is highly overblown."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1462386584, "post_id": 37035059, "comment_id": 61620930, "body": "@Barry It seems that iterator_tag is the crux, but that&#39;s a bit frustrating, since it could be determined by the presence or absence of, const and index and decrement operators, right?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1462390500, "post_id": 37035059, "comment_id": 61623182, "body": "@JonathanMee Nope.  Is this an input or output iterator?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1462390545, "post_id": 37035059, "comment_id": 61623206, "body": "Barry, option 3 could be viewed as &quot;option 2 but <code>iterator_traits</code> does the work for you&quot;.  It fails on the tag type."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1462390866, "post_id": 37035059, "comment_id": 61623394, "body": "@Yakk Can&#39;t you determine that from whether it&#39;s values return <code>const</code>?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1462393472, "post_id": 37035059, "comment_id": 61624849, "body": "@JonathanMee You can&#39;t tell between input/forward, and a forward iterator is by no means required to give you a <code>const</code> reference..."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1462393792, "post_id": 37035059, "comment_id": 61625012, "body": "@Yakk A &quot;ForwardIterator&quot; is an &quot;InputIterator&quot; unless the type returned by deferencing it is <code>const</code> then it&#39;s just an &quot;OutputIterator&quot;  not an &quot;InputIterator&quot;"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1462393908, "post_id": 37035059, "comment_id": 61625064, "body": "Both input and output do not have to return values or references, if I remember that quirky corner case.  But I guess that is a corner case."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 5, "creation_date": 1462393911, "post_id": 37035059, "comment_id": 61625065, "body": "@JonathanMee That doesn&#39;t make any sense."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1462445589, "post_id": 37035059, "comment_id": 61644959, "body": "@Barry Wait, how does that not make sense? If the iterator class doesn&#39;t provide <code>T&amp; operator*()</code>, only <code>const T&amp; operator*() const</code> then this is an &quot;OutputIterator&quot;, it&#39;s an &quot;InputIterator&quot;."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1462449989, "post_id": 37035059, "comment_id": 61647720, "body": "@Jonathan  output iterators can&#39;t dereference to a <code>const T&amp;</code> - they have to be writeable to. They must support <code>*it++ = x;</code>"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1462450330, "post_id": 37035059, "comment_id": 61647932, "body": "@Barry Sooo... why can&#39;t we key off that?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1462451045, "post_id": 37035059, "comment_id": 61648392, "body": "@Jonathan Off of what? Input Iterator and Forward Iterator can dereference to a non-const lvalue reference too."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1462451762, "post_id": 37035059, "comment_id": 61648827, "body": "@Barry Note that an &quot;OutputIterator&quot; is an &quot;InputIterator&quot; as well, as long as the returns of the &quot;InputIterator&quot; dereferences are non-<code>const</code>. That&#39;s what I&#39;m keying off of."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1462452030, "post_id": 37035059, "comment_id": 61648991, "body": "@Jonathan An Output Iterator does not have to be an Input Iterator."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1462452274, "post_id": 37035059, "comment_id": 61649146, "body": "Mee and <a href=\"http://en.cppreference.com\" rel=\"nofollow noreferrer\">en.cppreference.com</a> thought it did: <a href=\"http://en.cppreference.com/w/cpp/iterator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/iterator</a> Do you have a counter example?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1462454327, "post_id": 37035059, "comment_id": 61650614, "body": "@Jonathan Nowhere does that reference claim that an Output Iterator is an Input Iterator."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1462454889, "post_id": 37035059, "comment_id": 61651051, "body": "&quot;An OutputIterator is an Iterator that can write to the pointed-to element.&quot; Help me out here. You say, &quot;An Output Iterator does not have to be an Input Iterator.&quot; Give me an example."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 7, "creation_date": 1462455391, "post_id": 37035059, "comment_id": 61651407, "body": "@JonathanMee Dude. &quot;Iterator&quot; and &quot;Input Iterator&quot; are <b>not equivalent</b>."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1462981182, "post_id": 37035059, "comment_id": 61869844, "body": "not much carpel-tunnel tribute required if you use <code>boost::iterator_facade</code> or <code>boost::iterator_adaptor</code>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 8, "creation_date": 1462989006, "post_id": 37035059, "comment_id": 61874728, "body": "@TemplateRex It was a joke. Regardless, it seems silly to deprecate <code>std::iterator</code> in favor of... everyone now writing their own copy of <code>std::iterator</code> to solve that problem anyway."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 3, "creation_date": 1462998494, "post_id": 37035059, "comment_id": 61879961, "body": "related: <a href=\"http://stackoverflow.com/q/29108958/819272\">stackoverflow.com/q/29108958/819272</a> It&#39;s a more general trend in the Standard to remove silly base classes only containing typedefs (unary_function etc.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2693780"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1463360317, "post_id": 37035059, "comment_id": 62019445, "body": "@JonathanMee The iterator might return a const proxy object through which you still can manipulate the underlying container. Thus const isn&#39;t a reliable indicator for input/forward iterators."}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "edited": false, "score": 0, "creation_date": 1476141979, "post_id": 37035059, "comment_id": 67216120, "body": "What about using <code>boost::iterator_facade</code> ?"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 33, "last_activity_date": 1462385591, "creation_date": 1462385591, "answer_id": 37035059, "question_id": 37031805, "link": "https://stackoverflow.com/questions/37031805/preparation-for-stditerator-being-deprecated/37035059#37035059", "title": "Preparation for std::iterator Being Deprecated", "body": "<p>Option 3 is a strictly more-typing version of Option 1, since you have to write all the same <code>typedefs</code> but additionally wrap <code>iterator_traits&lt;X&gt;</code>. </p>\n\n<p>Option 2 is unviable as a solution. You can deduce some types (e.g. <code>reference</code> is just <code>decltype(*it)</code>), but you cannot deduce <code>iterator_category</code>. You cannot differentiate between <code>input_iterator_tag</code> and <code>forward_iterator_tag</code> simply by presence of operations since you cannot reflexively check if the iterator satisfies the multipass guarantee. Additionally, you cannot really distinguish between those and <code>output_iterator_tag</code> if the iterator yields a mutable reference. They will have to be explicitly provided somewhere. </p>\n\n<p>That leaves Option 1. Guess we should just get used to writing all the boilerplate. I, for one, welcome our new carpal-tunnel overlords. </p>\n"}, {"comments": [{"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 2, "creation_date": 1479400066, "post_id": 38103394, "comment_id": 68551400, "body": "@AmirKirsh <code>operator*</code> should return <code>reference</code>, you need an <code>operator-&gt;</code> returning a <code>pointer</code> even though it doesn&#39;t make sense for a <code>long</code>"}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 1, "creation_date": 1608239054, "post_id": 38103394, "comment_id": 115530249, "body": "I found a pretty fantastic article about it <a href=\"https://www.fluentcpp.com/2018/05/08/std-iterator-deprecated/\" rel=\"nofollow noreferrer\">here</a>, too, that outlines the justifications."}], "tags": [], "owner": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "is_accepted": false, "score": 64, "last_activity_date": 1467220601, "last_edit_date": 1467220601, "creation_date": 1467212573, "answer_id": 38103394, "question_id": 37031805, "link": "https://stackoverflow.com/questions/37031805/preparation-for-stditerator-being-deprecated/38103394#38103394", "title": "Preparation for std::iterator Being Deprecated", "body": "<p>The discussed alternatives are clear but I feel that a code example is needed.</p>\n\n<p>Given that there will not be a language substitute and without relying on boost or on your own version of iterator base class, the following code that uses <code>std::iterator</code> will be fixed to the code underneath.</p>\n\n<h2>With <code>std::iterator</code></h2>\n\n<pre><code>template&lt;long FROM, long TO&gt;\nclass Range {\npublic:\n    // member typedefs provided through inheriting from std::iterator\n    class iterator: public std::iterator&lt;\n                        std::forward_iterator_tag, // iterator_category\n                        long,                      // value_type\n                        long,                      // difference_type\n                        const long*,               // pointer\n                        const long&amp;                // reference\n                                      &gt;{\n        long num = FROM;\n    public:\n        iterator(long _num = 0) : num(_num) {}\n        iterator&amp; operator++() {num = TO &gt;= FROM ? num + 1: num - 1; return *this;}\n        iterator operator++(int) {iterator retval = *this; ++(*this); return retval;}\n        bool operator==(iterator other) const {return num == other.num;}\n        bool operator!=(iterator other) const {return !(*this == other);}\n        long operator*() {return num;}\n    };\n    iterator begin() {return FROM;}\n    iterator end() {return TO &gt;= FROM? TO+1 : TO-1;}\n};\n</code></pre>\n\n<p>(Code from <a href=\"http://en.cppreference.com/w/cpp/iterator/iterator\">http://en.cppreference.com/w/cpp/iterator/iterator</a> with original author's permission).</p>\n\n<h2>Without <code>std::iterator</code></h2>\n\n<pre><code>template&lt;long FROM, long TO&gt;\nclass Range {\npublic:\n    class iterator {\n        long num = FROM;\n    public:\n        iterator(long _num = 0) : num(_num) {}\n        iterator&amp; operator++() {num = TO &gt;= FROM ? num + 1: num - 1; return *this;}\n        iterator operator++(int) {iterator retval = *this; ++(*this); return retval;}\n        bool operator==(iterator other) const {return num == other.num;}\n        bool operator!=(iterator other) const {return !(*this == other);}\n        long operator*() {return num;}\n        // iterator traits\n        using difference_type = long;\n        using value_type = long;\n        using pointer = const long*;\n        using reference = const long&amp;;\n        using iterator_category = std::forward_iterator_tag;\n    };\n    iterator begin() {return FROM;}\n    iterator end() {return TO &gt;= FROM? TO+1 : TO-1;}\n};\n</code></pre>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21011, "favorite_count": 34, "answer_count": 2, "score": 77, "last_activity_date": 1540228543, "creation_date": 1462374920, "last_edit_date": 1540228543, "question_id": 37031805, "link": "https://stackoverflow.com/questions/37031805/preparation-for-stditerator-being-deprecated", "title": "Preparation for std::iterator Being Deprecated", "body": "<p>On March 21<sup>st</sup> the standards committee voted to approve the deprecation of <a href=\"http://en.cppreference.com/w/cpp/iterator/iterator\" rel=\"noreferrer\"><code>std::iterator</code></a> proposed in <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0174r1.html#2.1\" rel=\"noreferrer\">P0174</a>:</p>\n\n<blockquote>\n  <p>The long sequence of void arguments is much less clear to the reader than simply providing the expected <code>typedef</code>s in the class definition itself, which is the approach taken by the current working draft, following the pattern set in <a href=\"/questions/tagged/c%2b%2b14\" class=\"post-tag\" title=\"show questions tagged &#39;c++14&#39;\" rel=\"tag\">c++14</a></p>\n</blockquote>\n\n<p>Before <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a> inheritance from <code>std::iterator</code> was encouraged to remove the tedium from iterator boilerplate implementation. But the deprecation will require one of these things:</p>\n\n<ol>\n<li>An iterator boilerplate will now need to include all required <code>typedef</code>s</li>\n<li>Algorithms working with iterators will now need to use <code>auto</code> rather than depending upon the iterator to declare types</li>\n<li><a href=\"https://stackoverflow.com/questions/37029541/inheriting-from-iterator?noredirect=1#comment61610944_37029541\">Loki Astari has suggested</a> that <a href=\"http://en.cppreference.com/w/cpp/iterator/iterator_traits\" rel=\"noreferrer\"><code>std::iterator_traits</code></a> may be updated to work without inheriting from <code>std::iterator</code></li>\n</ol>\n\n<p>Can someone enlighten me on which of these options I should expect, as I design custom iterators with an eye towards <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a> compatibility?</p>\n"}, {"tags": ["c++", "sockets", "winapi", "mfc", "network-programming"], "answers": [{"comments": [{"owner": {"reputation": 435, "user_id": 3770392, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6207865d4dbfc82b015c9d591855c555?s=128&d=identicon&r=PG&f=1", "display_name": "user3770392", "link": "https://stackoverflow.com/users/3770392/user3770392"}, "edited": false, "score": 0, "creation_date": 1462374915, "post_id": 37031788, "comment_id": 61613557, "body": "thank you, so is there no way at all  to use it without sub-classing?"}, {"owner": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "reply_to_user": {"reputation": 435, "user_id": 3770392, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6207865d4dbfc82b015c9d591855c555?s=128&d=identicon&r=PG&f=1", "display_name": "user3770392", "link": "https://stackoverflow.com/users/3770392/user3770392"}, "edited": false, "score": 1, "creation_date": 1462375070, "post_id": 37031788, "comment_id": 61613673, "body": "Not without rendering it essentially a plain CSocket."}], "tags": [], "owner": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "is_accepted": false, "score": 1, "last_activity_date": 1462374928, "last_edit_date": 1462374928, "creation_date": 1462374867, "answer_id": 37031788, "question_id": 37031675, "link": "https://stackoverflow.com/questions/37031675/casyncsocket-without-subclassing/37031788#37031788", "title": "CAsyncSocket without subclassing?", "body": "<p><code>CAsyncSocket</code> is designed to be used by subclassing it. It has virtual methods - <code>OnConnect</code>, <code>OnReceive</code> that must be overridden by a sub class in order for application code to handle the events.</p>\n"}, {"comments": [{"owner": {"reputation": 435, "user_id": 3770392, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6207865d4dbfc82b015c9d591855c555?s=128&d=identicon&r=PG&f=1", "display_name": "user3770392", "link": "https://stackoverflow.com/users/3770392/user3770392"}, "edited": false, "score": 0, "creation_date": 1462376182, "post_id": 37031915, "comment_id": 61614446, "body": "Cheers mate, I guess I already saw that tutorial. The problem with that is that it doesn&#39;t explain at all how to use it in conjunction with other classes"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 435, "user_id": 3770392, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6207865d4dbfc82b015c9d591855c555?s=128&d=identicon&r=PG&f=1", "display_name": "user3770392", "link": "https://stackoverflow.com/users/3770392/user3770392"}, "edited": false, "score": 0, "creation_date": 1462376447, "post_id": 37031915, "comment_id": 61614632, "body": "@user3770392: That&#39;s simply because there is nothing particularly interesting to know about using <code>CAsyncSocket</code> in conjunction with other classes. It&#39;s just your average C++ class. What specifically do you need to know?"}, {"owner": {"reputation": 435, "user_id": 3770392, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6207865d4dbfc82b015c9d591855c555?s=128&d=identicon&r=PG&f=1", "display_name": "user3770392", "link": "https://stackoverflow.com/users/3770392/user3770392"}, "edited": false, "score": 0, "creation_date": 1462377888, "post_id": 37031915, "comment_id": 61615721, "body": "I don&#39;t know if you are familiar to Qt, I would like to do something like that, e.g. when a packet arrives, another method is invoked. I would like to avoid subclassing whenever I can."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 435, "user_id": 3770392, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6207865d4dbfc82b015c9d591855c555?s=128&d=identicon&r=PG&f=1", "display_name": "user3770392", "link": "https://stackoverflow.com/users/3770392/user3770392"}, "edited": false, "score": 1, "creation_date": 1462378262, "post_id": 37031915, "comment_id": 61615942, "body": "@user3770392: And how exactly had you planned to get notified about incoming data without deriving from <code>CAsyncSocket</code> and implementing your own notification handlers? Since you keep repeating that you would like to avoid deriving from a class it&#39;s beginning to sound like you are really trying to avoid learning C++."}, {"owner": {"reputation": 435, "user_id": 3770392, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6207865d4dbfc82b015c9d591855c555?s=128&d=identicon&r=PG&f=1", "display_name": "user3770392", "link": "https://stackoverflow.com/users/3770392/user3770392"}, "edited": false, "score": 0, "creation_date": 1462435421, "post_id": 37031915, "comment_id": 61639197, "body": "there&#39;s always to learn for sure, but there are many ways in C++ to avoid sub-classing. Just passing a function pointer or a functor would have been ok for me"}, {"owner": {"reputation": 435, "user_id": 3770392, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6207865d4dbfc82b015c9d591855c555?s=128&d=identicon&r=PG&f=1", "display_name": "user3770392", "link": "https://stackoverflow.com/users/3770392/user3770392"}, "edited": false, "score": 0, "creation_date": 1462438429, "post_id": 37031915, "comment_id": 61640726, "body": "Anyway, I&#39;ll try it to look better into the msdn documentation.. the best thing is always read more"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 435, "user_id": 3770392, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6207865d4dbfc82b015c9d591855c555?s=128&d=identicon&r=PG&f=1", "display_name": "user3770392", "link": "https://stackoverflow.com/users/3770392/user3770392"}, "edited": false, "score": 0, "creation_date": 1462444179, "post_id": 37031915, "comment_id": 61644152, "body": "I don&#39;t see <b>any</b> reason to avoid deriving from <code>CAsyncSocket</code> (and you haven&#39;t really put anything forth either). It is part of <code>CAsyncSocket</code>s protocol to derive from it, and handle notifications in virtual overrides. If you don&#39;t want to derive from <code>CAsyncSocket</code> then there really is no reason to use <code>CAsyncSocket</code> to begin with. You could just as well go with Windows Sockets 2, with a flat C interface."}, {"owner": {"reputation": 435, "user_id": 3770392, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6207865d4dbfc82b015c9d591855c555?s=128&d=identicon&r=PG&f=1", "display_name": "user3770392", "link": "https://stackoverflow.com/users/3770392/user3770392"}, "edited": false, "score": 0, "creation_date": 1462455980, "post_id": 37031915, "comment_id": 61651810, "body": "I guess I will look into Windows Sockets 2 then, thank you again for your suggestions."}], "tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": false, "score": 1, "last_activity_date": 1462375621, "last_edit_date": 1462375621, "creation_date": 1462375252, "answer_id": 37031915, "question_id": 37031675, "link": "https://stackoverflow.com/questions/37031675/casyncsocket-without-subclassing/37031915#37031915", "title": "CAsyncSocket without subclassing?", "body": "<p>There is no requirement to derive from <a href=\"https://msdn.microsoft.com/en-us/library/3d46645f.aspx\" rel=\"nofollow\">CAsyncSocket</a> to use it, although clients usually do. If you do not derive (and implement the callback handlers) it's virtually impossible to use the socket in an asynchronous way.</p>\n\n<p><code>CAsyncSocket</code> is like any other C++ class, and can be instantiated in much the same way (either on the stack with automatic storage duration, or - more commonly - in the free store with dynamic storage duration). The MSDN offers a tutorial on using a 'naked' <code>CAsyncSocket</code>: <a href=\"https://msdn.microsoft.com/en-us/library/t7a47kk4.aspx\" rel=\"nofollow\">Windows Sockets: Using Class CAsyncSocket</a>.</p>\n"}], "owner": {"reputation": 435, "user_id": 3770392, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6207865d4dbfc82b015c9d591855c555?s=128&d=identicon&r=PG&f=1", "display_name": "user3770392", "link": "https://stackoverflow.com/users/3770392/user3770392"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1462375621, "creation_date": 1462374583, "question_id": 37031675, "link": "https://stackoverflow.com/questions/37031675/casyncsocket-without-subclassing", "title": "CAsyncSocket without subclassing?", "body": "<p>I'm looking for a way to use CAsyncSocket without subclassing it. In all the examples and tutorials I've found so far they subclass from it and I would like to avoid it.  </p>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["c++", "file", "save"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1462374386, "post_id": 37031388, "comment_id": 61613161, "body": "<a href=\"https://rads.stackoverflow.com/amzn/click/com/B00F8CWGOS\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">A Tour of C++</a>, Chapter 8."}], "answers": [{"comments": [{"owner": {"reputation": 164, "user_id": 5868441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18163b3fbfcf57f193a44cf852996aaf?s=128&d=identicon&r=PG&f=1", "display_name": "Panagiotis Iatrou", "link": "https://stackoverflow.com/users/5868441/panagiotis-iatrou"}, "edited": false, "score": 0, "creation_date": 1462375588, "post_id": 37031512, "comment_id": 61614007, "body": "Error: &quot;variable std::fstream fs has initializer but incomplete type std::fstream fs(&quot;data.txt&quot;);"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 164, "user_id": 5868441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18163b3fbfcf57f193a44cf852996aaf?s=128&d=identicon&r=PG&f=1", "display_name": "Panagiotis Iatrou", "link": "https://stackoverflow.com/users/5868441/panagiotis-iatrou"}, "edited": false, "score": 0, "creation_date": 1462375859, "post_id": 37031512, "comment_id": 61614212, "body": "@PanagiotisIatrou you need to add includes: <code>#include &lt;fstream&gt;</code> and <code>#include &lt;iostream&gt;</code>"}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 0, "last_activity_date": 1462376148, "last_edit_date": 1462376148, "creation_date": 1462374153, "answer_id": 37031512, "question_id": 37031388, "link": "https://stackoverflow.com/questions/37031388/how-can-i-store-a-variable-in-another-file/37031512#37031512", "title": "How can I store a variable in another file?", "body": "<p>You can use <a href=\"http://www.cplusplus.com/reference/fstream/fstream/\" rel=\"nofollow\">std::fstream</a>:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nint myint;\n\nint main() {\n    // when entering app:\n    std::ifstream fs(\"data.txt\");\n    if ( fs ) {\n        fs &gt;&gt; myint;\n    }\n    fs.close();\n\n    std::cout &lt;&lt; myint;\n    myint++;\n\n    // when exiting app:\n    std::ofstream fs2(\"data.txt\");\n    fs2 &lt;&lt; myint;\n}\n</code></pre>\n"}], "owner": {"reputation": 164, "user_id": 5868441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18163b3fbfcf57f193a44cf852996aaf?s=128&d=identicon&r=PG&f=1", "display_name": "Panagiotis Iatrou", "link": "https://stackoverflow.com/users/5868441/panagiotis-iatrou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 37031512, "answer_count": 1, "score": -7, "last_activity_date": 1462376148, "creation_date": 1462373808, "question_id": 37031388, "link": "https://stackoverflow.com/questions/37031388/how-can-i-store-a-variable-in-another-file", "title": "How can I store a variable in another file?", "body": "<p>I am currently programming in C++. I want my program to store an int in a file so that when i close the program and open it again to take the value of the stored int. How can I do it?</p>\n"}, {"tags": ["c++", "boost", "utf-8"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 2, "creation_date": 1462382241, "post_id": 37031247, "comment_id": 61618272, "body": "The most I can see is a <code>get()</code> on the manager that lets you grab the current backend. However the interface of the backends doesn&#39;t provide any way to identify them, and all the implementation is hidden in the compiled part of the library, so you can&#39;t even try to cast as the types aren&#39;t exposed."}, {"owner": {"reputation": 352, "user_id": 4312669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ndg3j.png?s=128&g=1", "display_name": "sebkraemer", "link": "https://stackoverflow.com/users/4312669/sebkraemer"}, "edited": false, "score": 1, "creation_date": 1464096603, "post_id": 37031247, "comment_id": 62336319, "body": "I think you cannot, at least with use of the static <code>global()</code> helper. In case you manually add backends to the list, you might be able to compare the underlying pointers of the returned auto_ptrs. But since the <code>select()</code> method may be applied to only a subset of categories <i>(allows combining different backends)</i> , I&#39;m not sure how useful the information is anyhow."}], "answers": [{"tags": [], "owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "is_accepted": true, "score": 2, "last_activity_date": 1464461905, "creation_date": 1464461905, "answer_id": 37502768, "question_id": 37031247, "link": "https://stackoverflow.com/questions/37031247/which-boost-utf-backend-is-currently-used/37502768#37502768", "title": "Which Boost UTF backend is currently used?", "body": "<p>Not really, no. There isn't a way to get the current back-end for a multitude of reasons:</p>\n\n<ul>\n<li>There's no public API function that gives you access to the back-ends used</li>\n<li><code>localization_backend</code> uses the pimpl idiom to defer the actual implementation of the back-ends. There's no reflection either in <code>localization_backend</code> or in the back-ends themselves</li>\n<li><p>This comment from <a href=\"https://github.com/boostorg/locale/blob/develop/include/boost/locale/localization_backend.hpp#L25\" rel=\"nofollow\"><code>localization_backend.hpp</code></a>:</p>\n\n<blockquote>\n  <p>Backends are usually registered inside the localization backends\n  manager and allow transparent support of different backends, so a user\n  can switch the backend by simply linking the application to the\n  correct one.</p>\n  \n  <p>...</p>\n  \n  <p>Each backend can be installed with a different default priotiry so\n  when you work with two different backends, you can specify priotiry so\n  this backend will be chosen according to their priority.</p>\n</blockquote></li>\n</ul>\n\n<p>It would needlessly complicate the implementation as on top of the priority feature, specific back-ends can be set for specific locale categories. <code>Boost.Locale</code> is designed to \"just work\" with whatever back-ends it's configured with, transparency and binary compatibility in mind. As a commenter said, it's not really useful information since you're using this library to abstract away library/platform-specific features.</p>\n"}], "owner": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "accepted_answer_id": 37502768, "answer_count": 1, "score": 14, "last_activity_date": 1464461905, "creation_date": 1462373478, "question_id": 37031247, "link": "https://stackoverflow.com/questions/37031247/which-boost-utf-backend-is-currently-used", "title": "Which Boost UTF backend is currently used?", "body": "<p>Following the boost manual (<a href=\"http://www.boost.org/doc/libs/1_56_0/libs/locale/doc/html/using_localization_backends.html\" rel=\"noreferrer\">http://www.boost.org/doc/libs/1_56_0/libs/locale/doc/html/using_localization_backends.html</a>), </p>\n\n<p>I can set a UTF backend using: </p>\n\n<pre><code>boost::locale::localization_backend_manager my = boost::locale::localization_backend_manager::global();\nmy.select(\"std\");\n</code></pre>\n\n<p>Is there any way to now check, whether indeed the std backend is used? </p>\n\n<p>I only seem to be able to get all the available backends, but not the currently active one</p>\n\n<pre><code>boost::locale::localization_backend_manager lbm = boost::locale::localization_backend_manager::global();\nauto s = lbm.get_all_backends();\nfor_each(s.begin(), s.end(), [](string&amp; x){ cout &lt;&lt; x &lt;&lt; endl; });\n</code></pre>\n"}, {"tags": ["c++", "string", "recursion"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1462372309, "post_id": 37030765, "comment_id": 61611570, "body": "Why do you want to use recursion to do that? Simple loops will work just fine."}, {"owner": {"reputation": 129, "user_id": 3494543, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WtO9N.png?s=128&g=1", "display_name": "UnWorld", "link": "https://stackoverflow.com/users/3494543/unworld"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462372618, "post_id": 37030765, "comment_id": 61611842, "body": "@ \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 I tried nesting that inside another loop but the output is not what it should be. Every string after the first one is garbage and random each time. I&#39;m missing something, not sure what"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1462372796, "post_id": 37030765, "comment_id": 61611989, "body": "Well, inspect your code with the debugger to find out what you&#39;ve been missing."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 3494543, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WtO9N.png?s=128&g=1", "display_name": "UnWorld", "link": "https://stackoverflow.com/users/3494543/unworld"}, "edited": false, "score": 0, "creation_date": 1462440507, "post_id": 37031374, "comment_id": 61641970, "body": "Thanks, this helped a bunch. The reason why I was getting garbage results was that each string was also followed by a 32 bit interger. Basically a bunch of flags. Its all fixed now :D"}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 3, "last_activity_date": 1462373781, "creation_date": 1462373781, "answer_id": 37031374, "question_id": 37030765, "link": "https://stackoverflow.com/questions/37030765/how-to-read-custom-string-with-c-from-binary-recursively/37031374#37031374", "title": "How to read custom string with C++ from binary recursively", "body": "<p>You're overcomplicating a bit - there's no need to seek to the next sequential read.</p>\n\n<p>Removing unused and pointless parameters, I would write this function something like this:</p>\n\n<pre><code>void printName(fstream&amp; fileObj, DWORD offset) {\n    char size = 0;\n    if (fileObj.seekg(offset) &amp;&amp; fileObj.read(&amp;size, sizeof(char)))\n    {\n        char* name = new char[size];\n        if (fileObj.read(name, size))\n        {\n            cout &lt;&lt; name &lt;&lt; endl;\n        }\n        delete [] name;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 3494543, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WtO9N.png?s=128&g=1", "display_name": "UnWorld", "link": "https://stackoverflow.com/users/3494543/unworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 37031374, "answer_count": 1, "score": -1, "last_activity_date": 1462373781, "creation_date": 1462372163, "question_id": 37030765, "link": "https://stackoverflow.com/questions/37030765/how-to-read-custom-string-with-c-from-binary-recursively", "title": "How to read custom string with C++ from binary recursively", "body": "<p>I've recently been getting in to IO with C++. I am trying to read a string from a binary file stream.</p>\n\n<p>The custom type is saved like this:</p>\n\n<p>The string is prefixed with the length of the string. So hello, would be stored like this: 6Hello\\0.</p>\n\n<p>I am basically reading text from a table (in this case a name table) in a binary file. The file header tells me the offset of this table (112 bytes in this case) and the number of names (318).</p>\n\n<p>Using this information I can read the first byte at this offset. This tells me the length of the string (e.g. 6). So I'll start at the next byte and read 5 more to get the full string \"Hello\". This seems to work fine with the first name at the offset. trying to recursively read the rest provides a lot of garbage really. I've tried using loops and recursive functions but its not working out so well. Not sure what the problem is, so reverted to the original one name retrieval method. Here's the code:</p>\n\n<pre><code>int printName(fstream&amp; fileObj, __int8 buff, DWORD offset, int&amp; iteration){\n    fileObj.seekg(offset);\n    fileObj.read((char*)&amp;buff, sizeof(char));\n    int nameSize = (int)buff;\n\n    char* szName = new char[nameSize];\n    for(int i=1; i &lt;= nameSize; i++){\n        fileObj.seekg(offset+i);\n        fileObj.read((char*)&amp;szName[i-1], sizeof(char));\n    }\n    cout &lt;&lt; szName &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Any idea how to iterate through all 318 names without creating dodgy output?\nThanks for taking the time to look through this, your help is greatly appreciated.</p>\n"}, {"tags": ["c++", "dll"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462371963, "post_id": 37030662, "comment_id": 61611280, "body": "Are you using avast antivirus?"}, {"owner": {"reputation": 1, "user_id": 6291308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hEuU6urxgu0/AAAAAAAAAAI/AAAAAAAAAjk/cQ2E2tZfmNs/photo.jpg?sz=128", "display_name": "PCB", "link": "https://stackoverflow.com/users/6291308/pcb"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462372294, "post_id": 37030662, "comment_id": 61611554, "body": "@NathanOliver nope.."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462372372, "post_id": 37030662, "comment_id": 61611624, "body": "Does this happen to a hello world program?  If not can you create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 1, "user_id": 6291308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hEuU6urxgu0/AAAAAAAAAAI/AAAAAAAAAjk/cQ2E2tZfmNs/photo.jpg?sz=128", "display_name": "PCB", "link": "https://stackoverflow.com/users/6291308/pcb"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462372486, "post_id": 37030662, "comment_id": 61611722, "body": "@NathanOliver i tried so many.. its d same fr hello world prgm too!"}, {"owner": {"reputation": 443, "user_id": 476315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac0f0bc3bccf9835eae84615b393ba8d?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor Liehr", "link": "https://stackoverflow.com/users/476315/viktor-liehr"}, "edited": false, "score": 0, "creation_date": 1462372611, "post_id": 37030662, "comment_id": 61611831, "body": "What is actually the question or do we have to guess?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1462374911, "post_id": 37030662, "comment_id": 61613552, "body": "Does this occur before <code>main</code> or at the end of the program?  Use the debugger.  Set break point at <code>main</code> then single step each instruction (press F10)."}, {"owner": {"reputation": 1, "user_id": 6291308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hEuU6urxgu0/AAAAAAAAAAI/AAAAAAAAAjk/cQ2E2tZfmNs/photo.jpg?sz=128", "display_name": "PCB", "link": "https://stackoverflow.com/users/6291308/pcb"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1462375940, "post_id": 37030662, "comment_id": 61614263, "body": "@ThomasMatthews it builds successfully... wen i debug.. i get this and blank output screen..."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1462376823, "post_id": 37030662, "comment_id": 61614930, "body": "Please <b>edit</b> your post with a minimal program that reproduces the issue.  Many people have Visual Studio (in different versions).  Make the program easy to copy to clipboard so people can try to recreate.  See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 6291390, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4755a888b6add28fb4bd29105473c086?s=128&d=identicon&r=PG&f=1", "display_name": "Quto", "link": "https://stackoverflow.com/users/6291390/quto"}, "is_accepted": false, "score": -2, "last_activity_date": 1462374797, "creation_date": 1462374797, "answer_id": 37031764, "question_id": 37030662, "link": "https://stackoverflow.com/questions/37030662/visual-studio-gives-blank-screen-as-output/37031764#37031764", "title": "visual studio - gives blank screen as output", "body": "<p>Did you try simply reinstalling the program and restarting your computer? Worth giving a shot.</p>\n"}], "owner": {"reputation": 1, "user_id": 6291308, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hEuU6urxgu0/AAAAAAAAAAI/AAAAAAAAAjk/cQ2E2tZfmNs/photo.jpg?sz=128", "display_name": "PCB", "link": "https://stackoverflow.com/users/6291308/pcb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1462374797, "creation_date": 1462371935, "last_edit_date": 1462374698, "question_id": 37030662, "link": "https://stackoverflow.com/questions/37030662/visual-studio-gives-blank-screen-as-output", "title": "visual studio - gives blank screen as output", "body": "<p>it shows.....</p>\n\n<pre><code>'2.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\ig7icd32.dll'. Cannot find or open the PDB file.\n'2.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\version.dll'. Symbols loaded.\n'2.exe' (Win32): Unloaded 'C:\\Windows\\SysWOW64\\version.dll'\n'2.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\ole32.dll'. Symbols loaded.\n'2.exe' (Win32): Unloaded 'C:\\Windows\\SysWOW64\\ole32.dll'\n'2.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\ole32.dll'. Symbols loaded.\n'2.exe' (Win32): Unloaded 'C:\\Windows\\SysWOW64\\ole32.dll'\nThe program '[7212] 2.exe' has exited with code 0 (0x0).\n</code></pre>\n\n<p>how to solve this!!!!!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1462372465, "post_id": 37030463, "comment_id": 61611701, "body": "You could store shared_ptr&lt;string&gt; objects instead of plain strings, that way you could store the same string in both the unordered_map and the timer queue, and there would still be only one copy of each string in memory."}], "answers": [{"tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1462371755, "creation_date": 1462371755, "answer_id": 37030575, "question_id": 37030463, "link": "https://stackoverflow.com/questions/37030463/remove-a-node-in-unordered-map-based-on-the-address-fof-a-node/37030575#37030575", "title": "Remove a node in unordered_map based on the address fof a node", "body": "<p>You can't do it from the value itself, but you <em>can</em> use <code>std::map::find</code> to get an iterator to the interesting item in the map and delete the iterator's key/value pair directly.</p>\n"}, {"comments": [{"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1462373190, "post_id": 37030609, "comment_id": 61612270, "body": "Thanks for the code snippet.  I need to keep a timer queue, for each timer, I will need to have some info to locate the node in the map. I could use string, but it&#39;s too wasteful, that&#39;s why I thought I may keep the address of the node.   I need to convert the iterator in a 8 byte field of a structure, so I need the following conversion:  <code>std::unordered_map&lt;std::string,int&gt;::const_iterator it = mymap.find(&quot;UK&quot;); \tvoid *x = (void *)it;</code>, but it failed in compiling.  Any idea how to do it? Thanks."}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 2, "last_activity_date": 1462376753, "last_edit_date": 1462376753, "creation_date": 1462371827, "answer_id": 37030609, "question_id": 37030463, "link": "https://stackoverflow.com/questions/37030463/remove-a-node-in-unordered-map-based-on-the-address-fof-a-node/37030609#37030609", "title": "Remove a node in unordered_map based on the address fof a node", "body": "<p><code>unordered_map</code> supports two <code>erase</code> overloads:</p>\n\n<ul>\n<li>by key</li>\n<li>by iterator</li>\n</ul>\n\n<p>There is no such <em>\"erase through address of mapped value\"</em>. Basically you have two ways of doing it:</p>\n\n<pre><code>int main() {\n    unordered_map&lt;string, int&gt; data;\n\n    data[\"UK\"] = 10;\n    data[\"UK\"]++;\n    data[\"US\"] = 8;\n\n    cout &lt;&lt; data.size() &lt;&lt; endl;\n    auto it = data.find(\"UK\");\n    data.erase(it);\n    cout &lt;&lt; data.size() &lt;&lt; endl;\n    data.erase(\"US\");\n    cout &lt;&lt; data.size() &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Using the iterator is more efficent because you can obtain the value (through <code>second</code> member) and together erase it without the need to do two lookups.</p>\n\n<p>By your comment you can't take the address of an iterator which is obtained by value on a local variable. That would yield a local address in any case, but the standard guarantees you that iterators in an <code>unordered_map</code> are not invalidated upon insertion and on delete only the affected one is invalidated, so storing them somewhere is allowed, something like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;unordered_map&gt;\n\nusing namespace std;\nusing map_type = unordered_map&lt;string, int&gt;;\n\nmap_type data;\nvector&lt;map_type::iterator&gt; timer_queue;\n\nvoid timeTick()\n{\n  for_each(begin(timer_queue), end(timer_queue), [](map_type::iterator&amp; it) {\n    --it-&gt;second;\n\n    if (it-&gt;second == 0)\n    {\n      cout &lt;&lt; \"pair \" &lt;&lt; it-&gt;first &lt;&lt; \" has expired\" &lt;&lt; endl;\n      data.erase(it);\n      cout &lt;&lt; \"map size: \" &lt;&lt; data.size() &lt;&lt; endl;\n    }\n  });\n}\n\ntemplate&lt;typename... Args&gt; void addElement(Args... args)\n{\n  auto it = get&lt;0&gt;(data.emplace(args...));\n  timer_queue.push_back(it);\n}\n\nint main() {\n\n  addElement(\"IT\", 5);\n  addElement(\"US\", 10);\n  addElement(\"UK\", 8);\n\n  while (!data.empty())\n  {\n    cout &lt;&lt; \"time tick\" &lt;&lt; endl;\n    timeTick();\n  }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1462374376, "post_id": 37031470, "comment_id": 61613148, "body": "Thanks @jeremy-friesner for the example code,  that&#39;s really a big assumption! I am thinking of storing the iterator (8 bytes)."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1462374593, "post_id": 37031470, "comment_id": 61613322, "body": "Note that the iterator will become invalid whenever the unordered_map is modified; dunno if that will be a problem for you or not.  (Then again, a held reference-to-a-value might become invalid when the unordered_map is modified also)"}, {"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1462375260, "post_id": 37031470, "comment_id": 61613799, "body": "Thanks for pointing it out, you are right, reference to an iterator may not be valid. Seems that it&#39;s real hard to come up with a (memory-wise) optimal solution for the tracking of frequencies of strings in a time-interval."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1462375771, "post_id": 37031470, "comment_id": 61614151, "body": "@JeremyFriesner: actually that&#39;s not true at all. As specified at &#167;23.2.4.9 of C++11 standard you have that <i>The insert and emplace members shall not affect the validity of iterators and references to the container, and the erase members shall invalidate only iterators and references to the erased elements.</i>. So storing a reference to an iterator is perfectly valid until you invalidate it, by removing the element from the map."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1462375942, "post_id": 37031470, "comment_id": 61614264, "body": "Interesting -- if inserting an item causes the unordered_map to have to resize itself larger, I wonder how the iterators remain valid after their underlying data items have been copied-and-then-deleted?"}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 0, "last_activity_date": 1462374350, "last_edit_date": 1462374350, "creation_date": 1462374023, "answer_id": 37031470, "question_id": 37030463, "link": "https://stackoverflow.com/questions/37030463/remove-a-node-in-unordered-map-based-on-the-address-fof-a-node/37031470#37031470", "title": "Remove a node in unordered_map based on the address fof a node", "body": "<p>I wouldn't recommend this for production code, but if you are okay with making the assumption that your STL's implementation of unordered_map is storing keys and values together in a struct, and that therefore the memory locations of the key and value in a given key/value pair will always be at a fixed offset from each other, you could use the GetKeyFromValue() function below to retrieve the key associated with your reference-to-a-value.  Then you could use that pass that key in to erase() or whatever, as usual.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;unordered_map&gt;\n\nusing namespace std;\n\n/** Given a reference to a value in (map), returns a reference to the associated key.\n  * @param map Reference to the unordered_map object.\n  * @param value Reference to a value in (map).  If this reference is to some object that is\n  *              not actually stored in (map), then this function's behavior is undefined, so be careful!\n  * @returns A reference to the key associated with (value).\n  */\ntemplate&lt;typename KeyType, typename ValueType&gt; const KeyType &amp; GetKeyFromValue(const unordered_map&lt;KeyType, ValueType&gt; &amp; map, const ValueType &amp; value)\n{\n   if (map.size() == 0) throw invalid_argument(\"Called GetKeyFromValue() on an empty map!?\");\n\n   auto it = map.begin();\n   const KeyType   * firstKey = &amp;it-&gt;first;\n   const ValueType * firstVal = &amp;it-&gt;second;\n\n   const char * cFirstKey = reinterpret_cast&lt;const char *&gt;(firstKey);\n   const char * cFirstVal = reinterpret_cast&lt;const char *&gt;(firstVal);\n   ptrdiff_t diff = cFirstVal-cFirstKey;\n\n   const char * cUserVal = reinterpret_cast&lt;const char *&gt;(&amp;value);\n   cUserVal -= diff;\n   return *(reinterpret_cast&lt;const KeyType *&gt;(cUserVal));\n}\n\n// Quick unit test for the above\nint main(int, char **)\n{\n   unordered_map&lt;string, int&gt; mymap;\n   mymap[\"US\"] = 10;\n   mymap[\"UK\"] = 9;\n   mymap[\"US\"]++;\n   mymap[\"France\"]=8;\n\n   int &amp; x = mymap[\"UK\"];\n   const string &amp; uk = GetKeyFromValue(mymap, x);\n   cout &lt;&lt; \"keyForX=[\" &lt;&lt; uk &lt;&lt; \"]\" &lt;&lt; endl;\n\n   int &amp; y = mymap[\"France\"];\n   const string &amp; france = GetKeyFromValue(mymap, y);\n   cout &lt;&lt; \"keyForY=[\" &lt;&lt; france &lt;&lt; \"]\" &lt;&lt; endl;\n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1462376753, "creation_date": 1462371490, "question_id": 37030463, "link": "https://stackoverflow.com/questions/37030463/remove-a-node-in-unordered-map-based-on-the-address-fof-a-node", "title": "Remove a node in unordered_map based on the address fof a node", "body": "<p>Given a unordered_map object, wonder if it's possible to erase a node by the reference (or address) of a node.  In another word, in the following code snippet, wonder if it's possible to remove the node for \"UK\" by the address of variable x or something similar. </p>\n\n<pre><code>std::unordered_map&lt;std::string,int&gt; mymap;\n\n// populating container:\nmymap[\"US\"] = 10;\nmymap[\"UK\"] = 9;\nmymap[\"US\"] ++;\nmymap[\"France\"] = 8;\nint &amp;x = mymap[\"UK\"];\n</code></pre>\n\n<p>This is useful in an app, where I need to keep track of the frequencies of various strings in a time interval (say, the last 3 hours). The strings can have size from a few bytes to thousands of bytes.  Each time a string expires (based on its arrival time and size of time interval), I will reduce the frequency for this string. If the frequency is 0, I will need to remove the node for the string. Don't want to allocate space to store the strings in timer queue, that would be a waste of space. </p>\n\n<p>Any ideas?  Thanks.</p>\n"}, {"tags": ["c++", "function", "templates", "c++14", "variadic-templates"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1462374742, "post_id": 37030419, "comment_id": 61613433, "body": "maybe I am completely misunderstanding the question (and I am almost sure i do ;), but what is the point of passing <code>vector,0,1,2,3...,vector.size()-1</code> when passing <code>vector</code> makes the same information available to that function?"}], "answers": [{"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1462375938, "post_id": 37030862, "comment_id": 61614261, "body": "<i>You&#39;ll <b>probably</b> run into compiler limits</i>. Love it. :-)"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 6, "last_activity_date": 1462376854, "last_edit_date": 1495542233, "creation_date": 1462372434, "answer_id": 37030862, "question_id": 37030419, "link": "https://stackoverflow.com/questions/37030419/passing-0-1-2-n-1-as-arguments-to-a-function/37030862#37030862", "title": "Passing 0,1,2,...,N-1 as arguments to a function", "body": "<p>No.  Well, you could do a binary search or a lookup table, but that would still generate O(max size_t^2) code.</p>\n\n<p>Few systems permit that much code to be generated and not die a horrible death: on a 64 bit computer, we are talking about on the order of 10^37 in function name length alone.  Storing all of those function names is practical if you place a copy of the current planet Earth around every star in the entire visible universe and use all of every one of those Earth's computer storage to just storing your list of function names.</p>\n\n<p>You'll probably run into compiler limits before being able to do that, but I haven't tried icpc.</p>\n\n<p>If you chose a smaller limit (say, a 1000), you could do it more practically.  With a relatively small upper bound, what I call a <a href=\"https://stackoverflow.com/a/28225557/1774667\">magic switch</a> (that dispatches run-time values to compile-time constants) solves the problem.</p>\n\n<p>Still, odds are the problem is with your plan.</p>\n"}], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462376854, "creation_date": 1462371370, "question_id": 37030419, "link": "https://stackoverflow.com/questions/37030419/passing-0-1-2-n-1-as-arguments-to-a-function", "title": "Passing 0,1,2,...,N-1 as arguments to a function", "body": "<p>I have a function</p>\n\n<pre><code>template &lt;typename T, typename... Args&gt; void foo(const T&amp;, Args...);\n</code></pre>\n\n<p>and I want to pass something like:</p>\n\n<pre><code>foo(vector, 0,1,2,3,..., vector.size() - 1);\n</code></pre>\n\n<p>where <code>vector</code> is a vector of some sort.  I can't use <code>std::make_index_sequence</code> because <code>vector.size()</code> is not a compile-time constant.  Is the above construction possible (e.g. using <code>std::iota</code> as a helper), without doing a linear search from 0 to infinity for what vector.size() equals to?</p>\n"}]