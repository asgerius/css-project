[{"tags": ["c++", "binaryfiles"], "comments": [{"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 1, "creation_date": 1434587234, "post_id": 30904400, "comment_id": 49847693, "body": "What profiling did you perform? Where exactly is it slowing down?"}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1434594468, "post_id": 30905106, "comment_id": 49849327, "body": "The <code>cout.write</code> method should be very fast.  The bottleneck is either in I/O transfer time or conversion between textual and internal representations."}], "tags": [], "owner": {"reputation": 36, "user_id": 1885576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2a5fc20be5b59fdb910ae4a373a33b1?s=128&d=identicon&r=PG", "display_name": "Ian Dingle", "link": "https://stackoverflow.com/users/1885576/ian-dingle"}, "is_accepted": true, "score": 2, "last_activity_date": 1434591713, "last_edit_date": 1495540765, "creation_date": 1434591207, "answer_id": 30905106, "question_id": 30904400, "link": "https://stackoverflow.com/questions/30904400/efficiently-writing-reading-an-array-of-1-and-1s-to-a-binary-file/30905106#30905106", "title": "Efficiently writing/reading an array of &#39;1&#39; and &#39;-1&#39;s to a binary file", "body": "<p>Check out this answer: <a href=\"https://stackoverflow.com/questions/11563963/writing-a-binary-file-in-c-very-fast\">Writing a binary file in C++ very fast</a></p>\n\n<p>In summary, try using C Style I/O, that is forget about output streams and use open() and write() to write directly to the file descriptors.</p>\n\n<p>You could even use read() with a buffer size the same number of bytes needed to store your NxN binary states in a single chunk andread them in one at a time.</p>\n"}], "owner": {"reputation": 155, "user_id": 3802072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1VcP.jpg?s=128&g=1", "display_name": "MrBrightside", "link": "https://stackoverflow.com/users/3802072/mrbrightside"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "accepted_answer_id": 30905106, "answer_count": 1, "score": 2, "last_activity_date": 1455452590, "creation_date": 1434585578, "question_id": 30904400, "link": "https://stackoverflow.com/questions/30904400/efficiently-writing-reading-an-array-of-1-and-1s-to-a-binary-file", "title": "Efficiently writing/reading an array of &#39;1&#39; and &#39;-1&#39;s to a binary file", "body": "<p>I am a computational-physics graduate student and my research requires me to write a large array storing the values of '1' and '-1' to a binary file(s). Currently I have come up with the following MWE:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;bitset&gt;\n\nconst int Num = 1024;\n\nstd::string int_array_to_string(int state[], int start, int finish){\n    std::ostringstream oss(\"\");\n    for (int i=start; i&lt;start+finish; i++)\n        switch(state[i]){\n            case -1: oss &lt;&lt; 0; break;\n            case  1: oss &lt;&lt; 1; break;\n        }\n    return oss.str();\n}\nvoid printToBinary(int state[], std::ostream &amp;output){\n    for (int i=0; i&lt;Num; i+=32){\n        std::bitset&lt;32&gt; x( int_array_to_string(state, i, 32));\n        unsigned long n = x.to_ulong();\n        output.write(reinterpret_cast&lt;const char*&gt;(&amp;n), sizeof(n));\n    }\n}\nvoid fakeUpSomeData(int state[]){\n    int ans = 1;\n    for (int i=0; i&lt;Num; i++){\n        ans *= -1;\n        state[i] = ans;\n    }\n}\nint main(void){\n    int state[Num] = {0};\n    fakeUpSomeData(state);\n\n    std::ofstream output(\"output.bin\", std::ios::binary);\n\n    printToBinary(state, output);\n\n    return 0;\n}\n</code></pre>\n\n<p>This however, makes my program run three times slower than before and I'm certain there must be a better way to do this. </p>\n\n<p>Additionally it would be useful to be able to register chunks of the data later, that is if I store the three states</p>\n\n<pre><code>{1,-1,1}\n{1,-1,1}\n{1,1,-1}\n</code></pre>\n\n<p>into one file it would be useful if a method exists to read the first chunk, then the second chunk, then the third chunk.</p>\n\n<p>A bit of background/reasoning behind why I need to do this: I will need to store roughly 1024*1e5 up to 9632*1e6 of these ints to calculate low/high resolution predictions for neutron scattering. So being able to read out chunks of some size 'N' would be extremely useful instead of storing 1e6 separate binary files in a folder (just typing that option sounds ridiculous!). </p>\n\n<p>Finally I have considered using the package HDF5 but it seems a bit overkill, and I was unable to get a MWE to work using it. </p>\n\n<p>Any thoughts on how to improve the MWE would be appreciated and thank you for your time.</p>\n"}, {"tags": ["c++", "qt5"], "comments": [{"owner": {"reputation": 4996, "user_id": 462639, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7019183695a9fbd1208d5f6e5fbc1794?s=128&d=identicon&r=PG", "display_name": "demonplus", "link": "https://stackoverflow.com/users/462639/demonplus"}, "edited": false, "score": 0, "creation_date": 1434622741, "post_id": 30904300, "comment_id": 49862511, "body": "Is Gate the main window of your application? Could you please clarify why you need to call its destructor explicitly? Usually you call show() of the main window and then exec() for app"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 2207476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59047f22b830e6cb5d26925cf5f2f7d5?s=128&d=identicon&r=PG", "display_name": "JVM", "link": "https://stackoverflow.com/users/2207476/jvm"}, "edited": false, "score": 0, "creation_date": 1434628971, "post_id": 30912773, "comment_id": 49866747, "body": "i needed the QApplication because Gate inherit from QDialog"}, {"owner": {"reputation": 13, "user_id": 2207476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59047f22b830e6cb5d26925cf5f2f7d5?s=128&d=identicon&r=PG", "display_name": "JVM", "link": "https://stackoverflow.com/users/2207476/jvm"}, "edited": false, "score": 0, "creation_date": 1434629026, "post_id": 30912773, "comment_id": 49866779, "body": "thne now i forcing the finish with a.quit, because i need w.exec for return a value"}, {"owner": {"reputation": 13, "user_id": 2207476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59047f22b830e6cb5d26925cf5f2f7d5?s=128&d=identicon&r=PG", "display_name": "JVM", "link": "https://stackoverflow.com/users/2207476/jvm"}, "edited": false, "score": 0, "creation_date": 1434630091, "post_id": 30912773, "comment_id": 49867506, "body": "this respond why a.exec dont exit never, but no how i can do properly my program."}, {"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "reply_to_user": {"reputation": 13, "user_id": 2207476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59047f22b830e6cb5d26925cf5f2f7d5?s=128&d=identicon&r=PG", "display_name": "JVM", "link": "https://stackoverflow.com/users/2207476/jvm"}, "edited": false, "score": 0, "creation_date": 1434630216, "post_id": 30912773, "comment_id": 49867602, "body": "@JVM why do you need the <code>QApplication</code>? It should work without it."}, {"owner": {"reputation": 13, "user_id": 2207476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59047f22b830e6cb5d26925cf5f2f7d5?s=128&d=identicon&r=PG", "display_name": "JVM", "link": "https://stackoverflow.com/users/2207476/jvm"}, "edited": false, "score": 0, "creation_date": 1434630370, "post_id": 30912773, "comment_id": 49867712, "body": "the program throw: QWidget: Must construct a QApplication  before a QWidget if i quit QApplication"}, {"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "reply_to_user": {"reputation": 13, "user_id": 2207476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59047f22b830e6cb5d26925cf5f2f7d5?s=128&d=identicon&r=PG", "display_name": "JVM", "link": "https://stackoverflow.com/users/2207476/jvm"}, "edited": false, "score": 0, "creation_date": 1434630414, "post_id": 30912773, "comment_id": 49867752, "body": "@JVM what did it throw?"}, {"owner": {"reputation": 13, "user_id": 2207476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59047f22b830e6cb5d26925cf5f2f7d5?s=128&d=identicon&r=PG", "display_name": "JVM", "link": "https://stackoverflow.com/users/2207476/jvm"}, "edited": false, "score": 0, "creation_date": 1434630710, "post_id": 30912773, "comment_id": 49867983, "body": "the program throw this warning and crashed if i quit QApplication:      QWidget: Must construct a QApplication before a QWidget"}, {"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "reply_to_user": {"reputation": 13, "user_id": 2207476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59047f22b830e6cb5d26925cf5f2f7d5?s=128&d=identicon&r=PG", "display_name": "JVM", "link": "https://stackoverflow.com/users/2207476/jvm"}, "edited": false, "score": 0, "creation_date": 1434630797, "post_id": 30912773, "comment_id": 49868052, "body": "@JVM you are right, I edited the code. Just don&#39;t use <code>a.exec()</code> and it works"}, {"owner": {"reputation": 13, "user_id": 2207476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59047f22b830e6cb5d26925cf5f2f7d5?s=128&d=identicon&r=PG", "display_name": "JVM", "link": "https://stackoverflow.com/users/2207476/jvm"}, "edited": false, "score": 0, "creation_date": 1434630909, "post_id": 30912773, "comment_id": 49868123, "body": "yes, but i need a.exec because the main window (w) must return Qt::Accepted, and w.show dont return a value"}, {"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "reply_to_user": {"reputation": 13, "user_id": 2207476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59047f22b830e6cb5d26925cf5f2f7d5?s=128&d=identicon&r=PG", "display_name": "JVM", "link": "https://stackoverflow.com/users/2207476/jvm"}, "edited": false, "score": 0, "creation_date": 1434631284, "post_id": 30912773, "comment_id": 49868403, "body": "@JVM you need <code>w.exec()</code> instead of <code>a.exec()</code>! please see my code above, it works for me"}, {"owner": {"reputation": 13, "user_id": 2207476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59047f22b830e6cb5d26925cf5f2f7d5?s=128&d=identicon&r=PG", "display_name": "JVM", "link": "https://stackoverflow.com/users/2207476/jvm"}, "edited": false, "score": 0, "creation_date": 1434631982, "post_id": 30912773, "comment_id": 49868896, "body": "Ok, now it work,  i am sorry, i dont know what happened, a lot of thanks for the help"}], "tags": [], "owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1434630755, "last_edit_date": 1434630755, "creation_date": 1434623038, "answer_id": 30912773, "question_id": 30904300, "link": "https://stackoverflow.com/questions/30904300/qapplication-dont-exit-after-i-close-all-qwidget/30912773#30912773", "title": "QApplication dont exit after i close all QWidget", "body": "<p>You create two event loops:</p>\n\n<ol>\n<li><code>w.exec()</code></li>\n<li><code>a.exec()</code></li>\n</ol>\n\n<p>The second event loop is started <strong>after</strong> you close the dialog, so it will wait indefinitely for a window to be closed.</p>\n\n<p>You can either call <code>show()</code> for the dialog or not use the QApplication event loop at all:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    Gate w(configOptions);\n    if(w.exec() == QDialog::Accepted)\n    {\n        qDebug(\"enter\");\n    }\n    else\n    {\n        qDebug(\"No enter\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 2207476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59047f22b830e6cb5d26925cf5f2f7d5?s=128&d=identicon&r=PG", "display_name": "JVM", "link": "https://stackoverflow.com/users/2207476/jvm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 30912773, "answer_count": 1, "score": 1, "last_activity_date": 1434630755, "creation_date": 1434584902, "last_edit_date": 1434630249, "question_id": 30904300, "link": "https://stackoverflow.com/questions/30904300/qapplication-dont-exit-after-i-close-all-qwidget", "title": "QApplication dont exit after i close all QWidget", "body": "<p>I am programming a application that return a value with QWidget::exec, but seem that i cant close the class properly (i need call Gate::~Gate explicitly for delete the class) and QApplication::exec never exit.\nGate is the main window of my aplication</p>\n\n<pre><code>Gate::Gate(List *opciones, QWidget *parent):\nQDialog(parent),\nui(new Ui::Gate)\n{\n    ParseOption *ctmp;\n    int retvalue,i;\n    ui-&gt;setupUi(this);\n    validUser = false;\n    setAttribute(Qt::WA_QuitOnClose);\n    errno = 0; // no se de donde sale el error...\n    [...code...]\n    QObject::connect(ui-&gt;closeButton,&amp;QAbstractButton::clicked,this,&amp;QDialog::close);\n    QObject::connect(ui-&gt;passwordField,&amp;QLineEdit::textChanged,this,&amp;hellGate::enableopenButton);\n    QObject::connect(ui-&gt;openButton,&amp;QAbstractButton::clicked,this,&amp;hellGate::certificateUser);\n    QObject::connect(this,&amp;hellGate::validateUser,this,&amp;QDialog::done);\n}\n</code></pre>\n\n<p>when mi program call:</p>\n\n<pre><code>emit validateUser(QDialog::Accepted);\n</code></pre>\n\n<p>then exit, but Gate when close dont call the destructor, i call this in main but with the flag WA_QuitonClose shall close automaticaly:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    QWidgetList list;\n    QApplication a(argc, argv);\n    Gate w(configOptions);\n    if(w.exec() == QDialog::Accepted) {\n        w.~Gate();\n        qDebug(\"enter\");\n    } else {\n        qDebug(\"No enter\");\n    }\n    list = a.topLevelWidgets();\n    if(!list.isEmpty()) {\n        for(int i = 0;i&lt;list.size();i++) {\n            qDebug(\"window: %i\",list[i]-&gt;close());\n        }\n    } else {\n        qDebug(\"ALL closed\");\n    }\n    return a.exec();\n}\n</code></pre>\n\n<p>the output is \"enter\" (and \"ALL closed\" if i call ~Gate).</p>\n\n<p>i am trying that the program exit from the line \"return a.exec()\".\nif i dont destruct Gate explicitly a.topLevelWidget return a list with the a QWidget(i suppose that is Gate).\ni need call w.exec() because i need that Gate return a value and w.show() is declares as:</p>\n\n<pre><code>void show();\n</code></pre>\n\n<p>I need call w.exec and that a.exec finish when the windows w(class Gate) close.\n what am i doing wrong?</p>\n\n<p>P.D Sorry if the text is difficult to understand, i dont know English very well.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "etw"], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 2963944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0f1f7eeb5c80f659413b34da3dd344?s=128&d=identicon&r=PG", "display_name": "Arthur Giss", "link": "https://stackoverflow.com/users/2963944/arthur-giss"}, "is_accepted": false, "score": 1, "last_activity_date": 1435040228, "creation_date": 1435040228, "answer_id": 30995190, "question_id": 30904242, "link": "https://stackoverflow.com/questions/30904242/error-evt-event-template-not-found-with-windows-ewt/30995190#30995190", "title": "ERROR_EVT_EVENT_TEMPLATE_NOT_FOUND with Windows EWT", "body": "<p>You can easily verify whether your <code>.rc</code> file is compiled correctly into your project by opening your compiled <code>.dll</code> or <code>.exe</code> file in Visual Studio. Go to <code>File-&gt;Open-&gt;File</code> and open your executable or library. Now check whether you can see the compiled ETW resource file. In my project it is in the folder \"WEVT_TEMPLATE\". If you do not see it in your binary, then you likely have not compiled it into your binary. To do this, add your <code>.rc</code> to your project (Choose add resource). </p>\n\n<p>A sidenote: Please also verify that the ResourceFileName and messageFileName in your Manifest file point correctly to your lib or executable.</p>\n\n<p>After running the registration command in a command prompt.</p>\n\n<p><code>wevtutil im yourProvider.man</code></p>\n\n<p>You can inspect your provider registration as well as possible errors by running the following command afterwards:</p>\n\n<p><code>wevtutil gp yourProvider</code></p>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 2664, "user_id": 3746375, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/32ac4c7ec41b718886aa7b914265f040?s=128&d=identicon&r=PG&f=1", "display_name": "bhzag", "link": "https://stackoverflow.com/users/3746375/bhzag"}, "is_accepted": true, "score": 0, "last_activity_date": 1435075755, "last_edit_date": 1495535203, "creation_date": 1435075755, "answer_id": 31007996, "question_id": 30904242, "link": "https://stackoverflow.com/questions/30904242/error-evt-event-template-not-found-with-windows-ewt/31007996#31007996", "title": "ERROR_EVT_EVENT_TEMPLATE_NOT_FOUND with Windows EWT", "body": "<p>I figured out that it was a permission issue just like in <a href=\"https://stackoverflow.com/questions/26525941/access-is-denied-while-register-provider-wevtutil\">Access is denied while register provider (wevtutil)</a>. I corrected this by placing my project at the root of my C drive. </p>\n"}], "owner": {"reputation": 2664, "user_id": 3746375, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/32ac4c7ec41b718886aa7b914265f040?s=128&d=identicon&r=PG&f=1", "display_name": "bhzag", "link": "https://stackoverflow.com/users/3746375/bhzag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 31007996, "answer_count": 2, "score": 0, "last_activity_date": 1435075755, "creation_date": 1434584411, "last_edit_date": 1495540710, "question_id": 30904242, "link": "https://stackoverflow.com/questions/30904242/error-evt-event-template-not-found-with-windows-ewt", "title": "ERROR_EVT_EVENT_TEMPLATE_NOT_FOUND with Windows EWT", "body": "<p>I am attempting to print a very simple log to Windows event viewer. When I call <code>EventWrite()</code> in my .cpp file, I get error code 15003 <code>ERROR_EVT_EVENT_TEMPLATE_NOT_FOUND</code> in the event viewer and my message is not displayed. I think the problem that I am having is that the <code>.rc</code> file that is generated when I compile my manifest is not being compiled along with the project even though I have dragged it into the resource folder in the solution explorer. </p>\n\n<p>When I registered my manifest with <code>wevtutil.exe</code> I get the following warning: <code>Publisher ExampleProvider resources are not accessible</code>.When I ask for details on this error, I receive this output: <code>Failed to open metadata for publisher ExampleProvider. Access is denied</code>.</p>\n\n<p>I have already looked at <a href=\"https://stackoverflow.com/questions/26525941/access-is-denied-while-register-provider-wevtutil\">Access is denied while register provider (wevtutil)</a> and it did not resolve the issue.</p>\n"}, {"tags": ["c++", "operator-overloading", "overloading"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1434584224, "post_id": 30904197, "comment_id": 49847005, "body": "Make your <code>operator[]</code> return a <code>char&amp;</code> and change your return statement accordingly."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1434585620, "post_id": 30904197, "comment_id": 49847331, "body": "I would also suggest checking that the request index does not exceed the length of the actual string, and throw an exception if it does."}], "answers": [{"tags": [], "owner": {"reputation": 1197, "user_id": 4931530, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-nDmPkk0Onz4/AAAAAAAAAAI/AAAAAAAABLE/oS85cViB7SA/photo.jpg?sz=128", "display_name": "Acha Bill", "link": "https://stackoverflow.com/users/4931530/acha-bill"}, "is_accepted": false, "score": 0, "last_activity_date": 1434585594, "creation_date": 1434585594, "answer_id": 30904402, "question_id": 30904197, "link": "https://stackoverflow.com/questions/30904197/c-operator-overloading-twice/30904402#30904402", "title": "C++ operator overloading, twice", "body": "<p>A little demonstration.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\nusing namespace std;\n\nclass String\n{\nprivate:\n    char *data;\n    int length;\npublic:\n    String(const char * str)\n    {\n        data = new char[strlen(str)];\n        strcpy(data, str);\n        length = strlen(data);\n    }\n    char &amp;operator[](int index)\n    {\n        //dont forget to check bounds\n        return data[index];\n    }\n    int getLength() const\n    {\n         return length;\n    }\n    friend ostream &amp; operator &lt;&lt; (ostream &amp;out, String &amp;s);\n};\nostream &amp;operator &lt;&lt; (ostream &amp;out, String &amp;s)\n{\n    for (int i = 0; i &lt; s.getLength(); i++)\n        out &lt;&lt; s[i];\n    return out;\n}\nint main()\n{\n    String string(\"test\");\n    string[1] = 'x';\n\n    cout &lt;&lt; string;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 196, "user_id": 2255732, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/UWh3m.jpg?s=128&g=1", "display_name": "Yoshi Peters", "link": "https://stackoverflow.com/users/2255732/yoshi-peters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 343, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439639831, "creation_date": 1434584066, "last_edit_date": 1439639831, "question_id": 30904197, "link": "https://stackoverflow.com/questions/30904197/c-operator-overloading-twice", "title": "C++ operator overloading, twice", "body": "<p>I'm trying to make an example exam for my test tomorrow but I ran into a small problem which will probably be a stupid mistake. There's a class which contains a <code>char*</code> that contains a C-string and an <code>int</code> that contains the length of that string. Now i need to make something like <code>class[5] = 'd'</code> work. But I've got no idea how. I know I can overload the <code>[]</code> operator to return a pointer to a specific letter of the string, but I can't assign a <code>char</code> directly to it. </p>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass DynString\n{\nprivate:\n    char * _theString;\n    int _charCount;\n\npublic:\n    DynString(char * theString = nullptr) {\n        if(theString == nullptr)\n            _charCount = 0;\n        else {\n            _charCount = strlen(theString);\n            _theString = new char[strlen(theString) + 1]; // +1 null-terminator\n            strcpy(_theString, theString);\n        }\n    }\n\n    char* operator[](int index) {\n        return &amp;_theString[index];\n    }\n\n    DynString operator+(const DynString&amp; theStringTwo) {\n        DynString conCat(strcat(_theString, theStringTwo._theString));\n        return conCat;\n    }\n\n    void operator=(const DynString &amp;obj) {\n        _theString = obj._theString;\n        _charCount = obj._charCount;\n    }\n\n    friend ostream&amp; operator&lt;&lt; (ostream &amp;stream, const DynString&amp; theString);\n    friend DynString operator+(char * ptrChar, const DynString&amp; theString);\n\n};\n\nostream&amp; operator&lt;&lt;(ostream &amp;stream, const DynString&amp; theString)\n{\n    return stream &lt;&lt; theString._theString;\n}\n\nDynString operator+(char * ptrChar, const DynString&amp; theString) {\n    char * tempStor = new char[strlen(ptrChar) + theString._charCount + 1] ;// +1 null-terminator\n    strcat(tempStor, ptrChar);\n    strcat(tempStor, theString._theString);\n\n    DynString conCat(tempStor);\n    return conCat;\n}\n\n\nint main()\n{\n    DynString stringA(\"Hello\");\n    DynString stringB(\" Worlt\");\n    cout &lt;&lt; stringA &lt;&lt; stringB &lt;&lt; std::endl;\n\n    stringB[5] = 'd'; // Problem\n\n    DynString stringC = stringA + stringB;\n    std::cout &lt;&lt; stringC &lt;&lt; std::endl;\n\n    DynString stringD;\n    stringD = \"The\" + stringB + \" Wide Web\";\n    std::cout &lt;&lt; stringD &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-graph"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 3, "last_activity_date": 1434585176, "creation_date": 1434585176, "answer_id": 30904340, "question_id": 30904005, "link": "https://stackoverflow.com/questions/30904005/degree-of-vertex-iterator-in-bgl/30904340#30904340", "title": "Degree of Vertex Iterator in BGL", "body": "<p>You need to pass the <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/graph/doc/BidirectionalGraph.html\" rel=\"nofollow\">extra argument <code>g</code> to <code>degree()</code></a>.</p>\n\n<p>Further more as the LabeledGraph adaptor doesn't model a <code>MutableGraph</code> the <code>remove_vertex</code> call can't work.</p>\n\n<p>Luckily you can get the underlying graph and mutate that. I'd have to read up on <code>LabeledGraph</code> to see whether there are adverse effects:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/c49fee56ec4cca7c\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>// g++ -O3 question.cpp -o question.exe\n#include &lt;iostream&gt;\n\n#include &lt;boost/graph/adjacency_list.hpp&gt;\n#include &lt;boost/graph/labeled_graph.hpp&gt;\n#include &lt;boost/graph/iteration_macros.hpp&gt;\n\ntypedef long long node_id_t;\n\ntypedef boost::adjacency_list&lt;boost::listS,          // Store out-edges of each vertex in a std::list\n                              boost::listS,          // Store vertex set in a std::list\n                              boost::bidirectionalS, // The file dependency graph is directed\n                              boost::no_property,    // vertex properties\n                              boost::no_property     // edge properties\n                              &gt; AdjGraph;\n\ntypedef boost::labeled_graph&lt;AdjGraph,\n                             node_id_t // Node ID\n                             &gt; LabeledGraph;\n\nint main() {\n    LabeledGraph g;\n\n    add_vertex(10, g);\n    add_vertex(20, g);\n    add_vertex(30, g);\n    add_vertex(40, g);\n    add_vertex(50, g);\n\n    boost::graph_traits&lt;LabeledGraph&gt;::vertex_iterator vi, vi_end, next;\n\n    AdjGraph&amp; underlying = g.graph();\n\n    boost::tie(vi, vi_end) = boost::vertices(underlying);\n    for (next = vi; vi != vi_end; vi = next) {\n        ++next;\n        if (boost::degree(*vi, underlying) == 0)\n            boost::remove_vertex(*vi, underlying);\n    }\n}\n</code></pre>\n\n<p>Maybe you can do without the LabeledGraph:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/f5be3b47f9ce685c\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>// g++ -O3 question.cpp -o question.exe\n#include &lt;iostream&gt;\n\n#include &lt;boost/graph/adjacency_list.hpp&gt;\n#include &lt;boost/graph/graph_utility.hpp&gt;\n\ntypedef long long node_id_t;\n\ntypedef boost::adjacency_list&lt;boost::listS,          // Store out-edges of each vertex in a std::list\n                              boost::listS,          // Store vertex set in a std::list\n                              boost::bidirectionalS, // The file dependency graph is directed\n                              node_id_t,             // vertex properties\n                              boost::no_property     // edge properties\n                              &gt; AdjGraph;\n\nint main() {\n    AdjGraph g;\n\n               add_vertex(10, g);\n    auto v20 = add_vertex(20, g);\n               add_vertex(30, g);\n    auto v40 = add_vertex(40, g);\n               add_vertex(50, g);\n\n    add_edge(v40, v20, g);\n\n    std::cout &lt;&lt; \"BEFORE:\\n\";\n    print_graph(g, boost::get(boost::vertex_bundle, g));\n\n    boost::graph_traits&lt;AdjGraph&gt;::vertex_iterator vi, vi_end, next;\n\n    boost::tie(vi, vi_end) = boost::vertices(g);\n    for (next = vi; vi != vi_end; vi = next) {\n        ++next;\n        if (boost::degree(*vi, g) == 0)\n            boost::remove_vertex(*vi, g);\n    }\n\n    std::cout &lt;&lt; \"\\n---\\nAFTER:\\n\";\n    print_graph(g, boost::get(boost::vertex_bundle, g));\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>BEFORE:\n10 --&gt; \n20 --&gt; \n30 --&gt; \n40 --&gt; 20 \n50 --&gt; \n\n---\nAFTER:\n20 --&gt; \n40 --&gt; 20 \n</code></pre>\n"}], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1279, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1434585176, "creation_date": 1434582732, "question_id": 30904005, "link": "https://stackoverflow.com/questions/30904005/degree-of-vertex-iterator-in-bgl", "title": "Degree of Vertex Iterator in BGL", "body": "<p>I am endeavouring to remove all of the nodes from my graph (using the pattern defined <a href=\"http://www.boost.org/doc/libs/1_37_0/libs/graph/doc/adjacency_list.html\" rel=\"nofollow\">here</a>) which have no connecting edges. My (MWE) code thus far is as follows:</p>\n\n<pre><code>//g++ -O3 question.cpp -o question.exe\n#include &lt;iostream&gt;\n\n#include &lt;boost/graph/adjacency_list.hpp&gt;\n#include &lt;boost/graph/labeled_graph.hpp&gt;\n#include &lt;boost/graph/iteration_macros.hpp&gt;\n\ntypedef long long node_id_t;\n\ntypedef boost::adjacency_list&lt;\n  boost::listS,           // Store out-edges of each vertex in a std::list\n  boost::listS,           // Store vertex set in a std::list\n  boost::bidirectionalS,  // The file dependency graph is directed\n  boost::no_property,     // vertex properties\n  boost::no_property      // edge properties\n&gt; AdjGraph;\n\ntypedef boost::labeled_graph&lt;\n  AdjGraph,\n  node_id_t          // Node ID\n&gt; LabeledGraph;\n\nint main(){\n  LabeledGraph g;\n\n  add_vertex( 10, g );\n  add_vertex( 20, g );\n  add_vertex( 30, g );\n  add_vertex( 40, g );\n  add_vertex( 50, g );\n\n  boost::graph_traits&lt;LabeledGraph&gt;::vertex_iterator vi, vi_end, next;\n  boost::tie(vi, vi_end) = boost::vertices(g);\n  for (next = vi; vi != vi_end; vi = next) {\n    ++next;\n    if(boost::degree(*vi)==0)\n      boost::remove_vertex(*vi, g);\n  }\n}\n</code></pre>\n\n<p>Unfortunately, the code errors out in compilation with the complaint:</p>\n\n<pre><code>question.cpp:36:25: error: no matching function for call to \u2018degree(void*&amp;)\u2019\n if(boost::degree(*vi)==0)\n</code></pre>\n\n<p>My expectation is that <code>vi</code> is a <code>vertex_iterator</code> and dereferencing it should give me a valid descriptor. I am not sure why this is not happening.</p>\n\n<p>How can I achieve this?</p>\n"}, {"tags": ["c++", "xcode", "cocos2d-x"], "answers": [{"comments": [{"owner": {"reputation": 544, "user_id": 2445733, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/WcN0U.jpg?s=128&g=1", "display_name": "ctapp1", "link": "https://stackoverflow.com/users/2445733/ctapp1"}, "edited": false, "score": 0, "creation_date": 1434641094, "post_id": 30905189, "comment_id": 49876240, "body": "Didn&#39;t work. I am getting errors on line 5 (too many arguments) and on line 6 (no member named &#39;set delegate&#39; in cocos2d::ui::ScrolView)"}, {"owner": {"reputation": 544, "user_id": 2445733, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/WcN0U.jpg?s=128&g=1", "display_name": "ctapp1", "link": "https://stackoverflow.com/users/2445733/ctapp1"}, "edited": false, "score": 0, "creation_date": 1434648802, "post_id": 30905189, "comment_id": 49880916, "body": "I added my code above, please let me know if you find a solution"}, {"owner": {"reputation": 1573, "user_id": 3886642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ut7zQ.png?s=128&g=1", "display_name": "yangguang1029", "link": "https://stackoverflow.com/users/3886642/yangguang1029"}, "reply_to_user": {"reputation": 544, "user_id": 2445733, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/WcN0U.jpg?s=128&g=1", "display_name": "ctapp1", "link": "https://stackoverflow.com/users/2445733/ctapp1"}, "edited": false, "score": 0, "creation_date": 1434676961, "post_id": 30905189, "comment_id": 49893202, "body": "@ctapp1 there are two Scrollviews in cocos2dx, you are using cocos/ui/widgets/UIScrollview and i meant cocos/extensions/GUI/CCScrollview"}], "tags": [], "owner": {"reputation": 1573, "user_id": 3886642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ut7zQ.png?s=128&g=1", "display_name": "yangguang1029", "link": "https://stackoverflow.com/users/3886642/yangguang1029"}, "is_accepted": false, "score": 0, "last_activity_date": 1434595633, "last_edit_date": 1434595633, "creation_date": 1434591911, "answer_id": 30905189, "question_id": 30903933, "link": "https://stackoverflow.com/questions/30903933/implement-a-scrollview-with-cocos2d-x-3-6/30905189#30905189", "title": "Implement a scrollview with cocos2d-x 3.6", "body": "<pre><code>Size scroll_size = Director::getInstance()-&gt;getWinSize();\nSize container_size = Size(scroll_size.width * 2, scroll_size.height);\nLayer* container = Layer::create();\ncontainer-&gt;setContentSize(container_size);\nScrollView* scroll = ScrollView::create(scroll_size, container);\nmScroll-&gt;setDelegate(this);\nmScroll-&gt;setDirection(ScrollView::Direction::HORIZONTAL);\n</code></pre>\n\n<p>1.size of container should be larger than size of scrollview</p>\n\n<p>2.add child to container, not scrollview</p>\n\n<p>3.implement ScrollViewDelegate</p>\n"}, {"comments": [{"owner": {"reputation": 1573, "user_id": 3886642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ut7zQ.png?s=128&g=1", "display_name": "yangguang1029", "link": "https://stackoverflow.com/users/3886642/yangguang1029"}, "edited": false, "score": 0, "creation_date": 1434677457, "post_id": 30923648, "comment_id": 49893295, "body": "i think the button swallows the touch event, so the scrollview can&#39;t response to the touch move event. you can add an eventListener with larger priority but will not swallow touches,  pass the event to scrollview"}], "tags": [], "owner": {"reputation": 544, "user_id": 2445733, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/WcN0U.jpg?s=128&g=1", "display_name": "ctapp1", "link": "https://stackoverflow.com/users/2445733/ctapp1"}, "is_accepted": true, "score": 1, "last_activity_date": 1434654051, "creation_date": 1434654051, "answer_id": 30923648, "question_id": 30903933, "link": "https://stackoverflow.com/questions/30903933/implement-a-scrollview-with-cocos2d-x-3-6/30923648#30923648", "title": "Implement a scrollview with cocos2d-x 3.6", "body": "<p>I figured it out, It was scrolling but I added my buttons wrong. For anyone who is interested add a button like this</p>\n\n<pre><code>auto button1 = ui::Button::create();\nbutton1-&gt;setTouchEnabled(true);\nbutton1-&gt;ignoreContentAdaptWithSize(false);\nbutton1-&gt;setContentSize(Size(100, 100));\nbutton1-&gt;loadTextures(\"pic1.png\", \"pic2.png\");\nbutton1-&gt;setPosition(Point(containerSize.width / 8, containerSize.height / 2));\nscrollView-&gt;addChild(button1);\n</code></pre>\n"}], "owner": {"reputation": 544, "user_id": 2445733, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/WcN0U.jpg?s=128&g=1", "display_name": "ctapp1", "link": "https://stackoverflow.com/users/2445733/ctapp1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5762, "favorite_count": 2, "accepted_answer_id": 30923648, "answer_count": 2, "score": 1, "last_activity_date": 1434654051, "creation_date": 1434582256, "last_edit_date": 1434648777, "question_id": 30903933, "link": "https://stackoverflow.com/questions/30903933/implement-a-scrollview-with-cocos2d-x-3-6", "title": "Implement a scrollview with cocos2d-x 3.6", "body": "<p>wondering if anyone knows how to implement a scroll view in cocos2d-x 3.6 (C++). All the tutorials I have found are for earlier cocos2d-x versions. </p>\n\n<p>Thanks</p>\n\n<p>I added my code below, I can get the grey scrollview box to show but it cant be scrolled and the buttons don't appear on it:</p>\n\n<p>header files: \"CocosGUI.h\" and \"cocos-ext.h\"</p>\n\n<pre><code>//add scroll view\nSize scollFrameSize = Size(visibleSize.width, visibleSize.height/4);\nauto scrollView = cocos2d::ui::ScrollView::create();\nscrollView-&gt;setContentSize(scollFrameSize);\nscrollView-&gt;setBackGroundColorType(cocos2d::ui::Layout::BackGroundColorType::SOLID);\nscrollView-&gt;setBackGroundColor(Color3B(200, 200, 200));\nscrollView-&gt;setPosition(Point(0, visibleSize.height/1.5));\nscrollView-&gt;setDirection(cocos2d::ui::ScrollView::Direction::HORIZONTAL);\nscrollView-&gt;setBounceEnabled(true);\nscrollView-&gt;setTouchEnabled(true);\nauto containerSize = Size(scollFrameSize.width*2, scollFrameSize.height*2);\n scrollView-&gt;setInnerContainerSize(containerSize);\n\nthis-&gt;addChild(scrollView);\n\n\nauto button1 = cocos2d::ui::Button::create();\nbutton1-&gt;setColor(Color3B(250, 200, 50));\nbutton1-&gt;setTouchEnabled(true);\nbutton1-&gt;setContentSize(Size(100, 100));\nbutton1-&gt;setPosition(Point(containerSize.width / 4, containerSize.height / 2));\nscrollView-&gt;addChild(button1);\n\nauto button2 = cocos2d::ui::Button::create();\nbutton2-&gt;setColor(Color3B(250, 200, 50));\nbutton1-&gt;setContentSize(Size(100, 100));\nbutton2-&gt;setTouchEnabled(true);\nbutton2-&gt;setPosition(Point(containerSize.width / 8, containerSize.height / 2));\nscrollView-&gt;addChild(button2);\n</code></pre>\n"}, {"tags": ["c++", "stream", "formatted-input"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1434581888, "post_id": 30903847, "comment_id": 49846408, "body": "<a href=\"http://stackoverflow.com/questions/24504582/how-to-test-whether-stringstream-operator-has-parsed-a-bad-type-and-skip-it\" title=\"how to test whether stringstream operator has parsed a bad type and skip it\">stackoverflow.com/questions/24504582/&hellip;</a>"}, {"owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 0, "creation_date": 1434582141, "post_id": 30903847, "comment_id": 49846477, "body": "What is the expected output?"}], "answers": [{"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 4, "last_activity_date": 1434585970, "last_edit_date": 1434585970, "creation_date": 1434582313, "answer_id": 30903944, "question_id": 30903847, "link": "https://stackoverflow.com/questions/30903847/c-stringstream-value-extraction/30903944#30903944", "title": "C++ stringstream value extraction", "body": "<p>The problem is that timeUnit is a string, so <code>&gt;&gt;</code> will extract anything until the first space, which you haven't in your string. </p>\n\n<p>Alternatives: </p>\n\n<ul>\n<li>you could extract parts using getline(), which extracts strings until it finds a separator.  Unfortunately, you don't have one potential separator, but 2 (+ and -).  </li>\n<li>you could opt for using regex directly on the string</li>\n<li>you could finally split the strings using <a href=\"http://www.cplusplus.com/reference/string/string/find_first_of/\" rel=\"nofollow\"><code>find_first_of()</code></a> and <code>substr()</code>.</li>\n</ul>\n\n<p>As an illustration, here the example with regex:  </p>\n\n<pre><code>  regex rg(\"([\\\\+-][0-9]+[A-Za-z]+)\", regex::extended);\n  smatch sm;\n  while (regex_search(myString2, sm, rg)) {\n      cout &lt;&lt;\"Found:\"&lt;&lt;sm[0]&lt;&lt;endl;\n      myString2 = sm.suffix().str(); \n      //... process sstring sm[0]\n  }\n</code></pre>\n\n<p>Here a <a href=\"http://ideone.com/ePwgM4\" rel=\"nofollow\">live demo</a> applying your code to extract ALL the elements. </p>\n"}, {"tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 2, "last_activity_date": 1434584420, "creation_date": 1434584420, "answer_id": 30904245, "question_id": 30903847, "link": "https://stackoverflow.com/questions/30903847/c-stringstream-value-extraction/30904245#30904245", "title": "C++ stringstream value extraction", "body": "<p>You could something more robust like <code>&lt;regex&gt;</code> like in the example below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;regex&gt;\n#include &lt;string&gt;\n\nint main () {\n  std::regex e (\"(\\\\+|\\\\-)((\\\\d)+)(years|months|weeks|minutes|seconds)\");\n  std::string str(\"+50years-4months+3weeks+5minutes\");\n  std::sregex_iterator next(str.begin(), str.end(), e);\n  std::sregex_iterator end;\n  while (next != end) {\n    std::smatch match = *next;\n    std::cout &lt;&lt; \"Expression: \" &lt;&lt; match.str() &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"  mathOperator : \" &lt;&lt; match[1] &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"  value        : \" &lt;&lt; match[2] &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"  timeUnit     : \" &lt;&lt; match[4] &lt;&lt; std::endl;\n    ++next;\n  }\n}\n</code></pre>\n\n<h2>Output:</h2>\n\n<pre><code>Expression: +50years\n  mathOperator : +\n  value        : 50\n  timeUnit     : years\nExpression: -4months\n  mathOperator : -\n  value        : 4\n  timeUnit     : months\nExpression: +3weeks\n  mathOperator : +\n  value        : 3\n  timeUnit     : weeks\nExpression: +5minutes\n  mathOperator : +\n  value        : 5\n  timeUnit     : minutes\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/ede1f6b581806c31\" rel=\"nofollow\"><strong>LIVE DEMO</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": false, "score": 1, "last_activity_date": 1434585911, "creation_date": 1434585911, "answer_id": 30904452, "question_id": 30903847, "link": "https://stackoverflow.com/questions/30903847/c-stringstream-value-extraction/30904452#30904452", "title": "C++ stringstream value extraction", "body": "<p>I'd use <code>getline</code> for the <code>timeUnit</code>, but since <code>getline</code> can take only one delimiter, I'd search the string separately for <code>mathOperator</code> and use that:</p>\n\n<pre><code>string myString2 = \"+50years-4months+3weeks+5minutes\";\nstringstream ss (myString2);\nsize_t pos=0;\n\nss &gt;&gt; mathOperator;\ndo\n  {\n    cout &lt;&lt; \"mathOperator: \" &lt;&lt; mathOperator &lt;&lt; endl;\n\n    ss &gt;&gt; value;\n    cout &lt;&lt; \"value: \" &lt;&lt; value &lt;&lt; endl;\n\n    pos = myString2.find_first_of(\"+-\", pos+1);\n    mathOperator = myString2[pos];\n    getline(ss, timeUnit, mathOperator);\n    cout &lt;&lt; \"timeUnit: \" &lt;&lt; timeUnit &lt;&lt; endl;\n  }\nwhile(pos!=string::npos);\n</code></pre>\n"}], "owner": {"reputation": 3079, "user_id": 1226655, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Yyz1i.png?s=128&g=1", "display_name": "IDDQD", "link": "https://stackoverflow.com/users/1226655/iddqd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8553, "favorite_count": 1, "accepted_answer_id": 30903944, "answer_count": 3, "score": 2, "last_activity_date": 1434586054, "creation_date": 1434581669, "last_edit_date": 1434586054, "question_id": 30903847, "link": "https://stackoverflow.com/questions/30903847/c-stringstream-value-extraction", "title": "C++ stringstream value extraction", "body": "<p>I am trying to extract values from <code>myString1</code> using <code>std::stringstream</code> like shown below:</p>\n\n<pre><code>// Example program\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;\n\nint main()\n{\n  string myString1 = \"+50years\";\n  string myString2 = \"+50years-4months+3weeks+5minutes\";\n\n  stringstream ss (myString1);\n\n  char mathOperator;\n  int value;\n  string timeUnit;\n\n  ss &gt;&gt; mathOperator &gt;&gt; value &gt;&gt; timeUnit;\n\n  cout &lt;&lt; \"mathOperator: \" &lt;&lt; mathOperator &lt;&lt; endl;\n  cout &lt;&lt; \"value: \" &lt;&lt; value &lt;&lt; endl;\n  cout &lt;&lt; \"timeUnit: \" &lt;&lt; timeUnit &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>mathOperator: +\nvalue: 50\ntimeUnit: years\n</code></pre>\n\n<p>In the output you can see me successfully extract the values I need, the math operator, the value and the time unit.</p>\n\n<p>Is there a way to do the same with <code>myString2</code>? Perhaps in a loop? I can extract the math operator, the value, but the time unit simply extracts everything else, and I cannot think of a way to get around that. Much appreciated.</p>\n"}, {"tags": ["c++", "matlab", "compilation", "shared-libraries", "mex"], "comments": [{"owner": {"reputation": 3814, "user_id": 3697273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f64bf8ecbbe130dac0956337bb181ce?s=128&d=identicon&r=PG&f=1", "display_name": "paisanco", "link": "https://stackoverflow.com/users/3697273/paisanco"}, "edited": false, "score": 0, "creation_date": 1434590411, "post_id": 30903818, "comment_id": 49848406, "body": "Can you tell us what version of Matlab you are running, it&#39;s often crucial to know in troubleshooting MEX issues."}, {"owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "edited": false, "score": 0, "creation_date": 1434605461, "post_id": 30903818, "comment_id": 49852237, "body": "You have to add the .libs for the all the other libraries (gmp.lib, etc.) to the command line."}, {"owner": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "reply_to_user": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "edited": false, "score": 0, "creation_date": 1434620570, "post_id": 30903818, "comment_id": 49861050, "body": "Ok; it is R2011b. @chappjc: What is the command to add the other libraries to the command line? E.g. &quot;-lgmp&quot;? Which other libraries do you mean - mpf, mpz etc.? In the folder /MPIR/mpir-2.7.0/mpf/, there is a file &quot;libmpf.la&quot;, but I understood the compiler (at least gcc, how about the SDK mex is using?) prepones &quot;lib&quot; and postpones &quot;.a&quot; to the name (&quot;mpf&quot;), but not &quot;.la&quot;; is this still the required file? Thanks!"}, {"owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "edited": false, "score": 0, "creation_date": 1434648668, "post_id": 30903818, "comment_id": 49880830, "body": "Don&#39;t worry about adding lib to the beginning.  You can literally list the exact name of the library after the source files.  Figure out what .lib has <code>gmpf_clear</code> and what library has the <code>mpf_*</code> commands.  List them on the command line."}, {"owner": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "edited": false, "score": 0, "creation_date": 1434659341, "post_id": 30903818, "comment_id": 49887199, "body": "Ok, so should I somewhere in the MPIR directory see files whose names end with \u201c.lib\u201d? Or find the init etc. functions in a directory called /.libs ? I can nowhere find such files. I do have files ending on \u201c.a\u201d and \u201c.la\u201d and also ending on \u201c.o\u201d and \u201c.lo\u201d, such as \u201clibmpir.la\u201d and \u201clibmpir.dll.a\u201d in the /.libs/ direct., or \u201clibmpf.a\u201d, \u201clibmpf.la\u201d and \u201cinit.o\u201d in the /mpf/.libs directory , or \u201cinit.lo\u201d in the /mpf / directory. Thus, eg for mpf_init, I found the files \u201cinit.c\u201d and \u201cinit.lo\u201d in the latter, but \u201cinit.o\u201d in the former. To which one should I link? Also, with \u2013L or \u2013I?"}, {"owner": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "edited": false, "score": 0, "creation_date": 1434659454, "post_id": 30903818, "comment_id": 49887264, "body": "Further \u2013 could it be that \u201c.dll\u201d files are required (I read that they would be the dynamic analogue to \u201c.lib\u201d files)? The only such file is \u201clibmpir-16.dll\u201d in /.libs. I now tried the command: \u201cmex -IC:/MPIR/mpir-2.7.0/ -LC:/MPIR/mpir-2.7.0/.libs/ -LC:/MPIR/mpir-2.7.0/mpf/.libs -LC:/MPIR/mpir-2.7.0/printf/.libs  mexlib.cpp myfile.cpp\u201d , which still returned \u201cmyfile.obj : error LNK2019: unresolved external symbol __imp___gmpf_clear referenced in function &quot;void __cdecl myfile(double)&quot; (?myfile@@YAXN@Z)\u201d for every function in myfile.cpp. I did also configure MPIR with --enable-shared... (ok?)"}, {"owner": {"reputation": 29526, "user_id": 2778484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzgZz.png?s=128&g=1", "display_name": "chappjc", "link": "https://stackoverflow.com/users/2778484/chappjc"}, "edited": false, "score": 0, "creation_date": 1434663189, "post_id": 30903818, "comment_id": 49889039, "body": "You can do it without -l, but with -L to specify the path to them.  You literally can list the actual file name at the end of the command line so you don&#39;t have to mess with the lower case -l syntax.  The .dll.a file is the &quot;import library&quot; for the dll (the dynamic runtime library).  The plain .a files are usually the static libraries.  The .la and .lo files are &quot;Libtool&quot; files that probably aren&#39;t relevant.  Try linking with libmpir.dll.a, which should give your MEX file a dependency on the .dll, and maybe also link with libmpf.a.  Just keep trying until the linker is happy."}, {"owner": {"reputation": 3814, "user_id": 3697273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f64bf8ecbbe130dac0956337bb181ce?s=128&d=identicon&r=PG&f=1", "display_name": "paisanco", "link": "https://stackoverflow.com/users/3697273/paisanco"}, "edited": false, "score": 0, "creation_date": 1434676380, "post_id": 30903818, "comment_id": 49893051, "body": "Did you find <a href=\"http://stackoverflow.com/questions/8552580/using-gcc-mingw-as-matlabs-mex-compiler\">this previous answer</a> about compiling Mex with MinGW? Not sure if it will help but for what it&#39;s worth."}, {"owner": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "edited": false, "score": 0, "creation_date": 1434714094, "post_id": 30903818, "comment_id": 49909239, "body": "How &quot;linking with libmpir.dll.a&quot;? adding &quot;-lmpir.dll&quot; did not work. gcc compiling of a test program involving the mpir commands in the MinGW shell works. But translating this into mex fails. I suspect that, as stated in <a href=\"http://www.mathworks.com/matlabcentral/answers/107106-error-lnk2019-unresolved-external-symbol-when-compiling-mex\" rel=\"nofollow noreferrer\">this post</a> mex needs &quot;.lib&quot; files, which I do not have yet (can they be produced during the MPIR library compilation?). Do you agree? Any further ideas are welcome."}, {"owner": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "reply_to_user": {"reputation": 3814, "user_id": 3697273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f64bf8ecbbe130dac0956337bb181ce?s=128&d=identicon&r=PG&f=1", "display_name": "paisanco", "link": "https://stackoverflow.com/users/3697273/paisanco"}, "edited": false, "score": 0, "creation_date": 1434714313, "post_id": 30903818, "comment_id": 49909384, "body": "@paisanco: Thanks, no it did not help, it should be possible to compile this with mex anyway, I am just not sure I have all the correct files in my external (MPIR) library or if any flags for mex are missing or incorrect."}], "owner": {"reputation": 75, "user_id": 4467733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b030c8fd4e7feb86f17d402ca39c395f?s=128&d=identicon&r=PG&f=1", "display_name": "Futurist", "link": "https://stackoverflow.com/users/4467733/futurist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 759, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434581522, "creation_date": 1434581522, "question_id": 30903818, "link": "https://stackoverflow.com/questions/30903818/compiling-libraries-with-mex-in-matlab", "title": "Compiling libraries with MEX in MATLAB", "body": "<p>I want to use an external library (here the (high precision arithmetic) library MPIR, but I guess the problem applies to other libraries as well) in my C code which is called via MEX from Matlab. To this end, I built MPIR using MinGW via the commands make, make install and make check, which performed without error (nevertheless I am not completely sure whether all libraries are in the correct places (see locations of file described below) - how can I test that?). Now I set up a small test program myfile.cpp with header myfile.h, which looks like the following:  </p>\n\n<pre><code>// this is myfile.cpp\n#include \"mex.h\"\n#include \"mpir.h\"\n#include \"myfile.h\"\n#include &lt;stdio.h&gt;\n\nvoid myfile(double a)\n{\n    mpf_t b;\n    mp_bitcnt_t bct = 350;\n    double f = 10.0, g = 3.0;\n\n    mpf_set_default_prec(bct);  \n    mpf_init(b);\n    mpf_set_d (b, f);\n    gmp_printf(\"b is %.*Ff \\n\",120,b );\n    mpf_clear(b);       \n}\n</code></pre>\n\n<p>where the various calls refer to high precision types of the MPIR library, with header file</p>\n\n<pre><code>// this is myfile.h\n#include \"mex.h\"\n#include \"mpir.h\"\n#include &lt;stdio.h&gt;\n\nvoid myfile(double a);\n</code></pre>\n\n<p>I hoped to call this routine by the mex file mexlib.cpp, which reads:</p>\n\n<pre><code>// this is mexlib.cpp\n#include \"mex.h\"\n#include \"mpir.h\"\n#include \"myfile.h\"\n#include &lt;stdio.h&gt;\n\nvoid mexFunction(\n         int          nlhs,\n         mxArray      *plhs[],\n         int          nrhs,\n         const mxArray *prhs[]\n         )\n{\n    double a;\n    a        = mxGetScalar(prhs[0]);        /* create pointer to the real data in the input arguments  */\n    myfile(a);                              /* call the computational routine */    \n    return;    \n}\n</code></pre>\n\n<p>The MPIR base directory is C:/MPIR/mpir-2.7.0/, in which I can see the files mpir.h, gmp.h, libmpir.la, among many others, and folders /.libs/, /mpf/, /mpz/, etc. In the /.libs/ folder, there are the files libmpir.la, libmpir.dll.a, libmpir-16.dll, libmpir-3.dll.def, among many others, but eg. no file \"libmpir.a\" or libmpirdll.a\", which I was looking for when learning from some other questions here. </p>\n\n<p>In Matlab, I tried to compile it via mex using the commands<br>\n    mex -IC:/MPIR/mpir-2.7.0/  -LC:/MPIR/mpir-2.7.0/.libs mexlib.cpp myfile.cpp -v , or<br>\n    mex -IC:/MPIR/mpir-2.7.0/  -LC:/MPIR/mpir-2.7.0/ mexlib.cpp myfile.cpp -v .</p>\n\n<p>It responded with errors stating:  </p>\n\n<pre><code>\"myfile.obj : error LNK2019: unresolved external symbol __imp___gmpf_clear referenced in function \"void __cdecl myfile(double)\" (?myfile@@YAXN@Z)\"\n</code></pre>\n\n<p>and similar lines for the other functions called in myfile.cpp , and\nexited with   </p>\n\n<pre><code>\"mexlib.mexw64 : fatal error LNK1120: 5 unresolved externals.\"  \n</code></pre>\n\n<p>In the <a href=\"http://de.mathworks.com/help/matlab/ref/mex.html#btxy24r-1\" rel=\"nofollow\" title=\"documentation\">mex documentation</a>, I read that the flags -L and -l point to locations with files ending with .lib (on Windows).<br>\nHow can I point it to the \".h\" files - or is it not what I need? I tried to add some paths to the PATH environment variable, also the MinGW paths, which did not help.<br>\nIt is a Windows 7 PC with the only compiler found by Matlab being the Microsoft SDK 7.1. Using the -v flag shows as \"COMPILER = cl\"... is this the SDK?  There is also gcc somewhere ( I guesss in the MinGW folder?).<br>\nI guess I am confused of all the #includes, header file constructs in C and compiler options; then, of most help to me would be an illumination of which ones are needed (best with an example).<br>\nThanks in advance!</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 779, "user_id": 1837353, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2PKE7.jpg?s=128&g=1", "display_name": "Hamish Moffatt", "link": "https://stackoverflow.com/users/1837353/hamish-moffatt"}, "is_accepted": false, "score": 0, "last_activity_date": 1434690365, "creation_date": 1434690365, "answer_id": 30930291, "question_id": 30903781, "link": "https://stackoverflow.com/questions/30903781/how-to-cancel-a-touch-event-in-qt-4-6-3/30930291#30930291", "title": "How to cancel a touch event in qt 4.6.3?", "body": "<p>There is version of the Qt5 QScroller code for Qt 4.8 here:\n<a href=\"https://qt.gitorious.org/qt-labs/kineticscroller\" rel=\"nofollow\">https://qt.gitorious.org/qt-labs/kineticscroller</a></p>\n\n<p>I used it successfully until I upgraded to 5. You should upgrade to 4.8 at least.</p>\n"}], "owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 426, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434690365, "creation_date": 1434581278, "question_id": 30903781, "link": "https://stackoverflow.com/questions/30903781/how-to-cancel-a-touch-event-in-qt-4-6-3", "title": "How to cancel a touch event in qt 4.6.3?", "body": "<p>In <a href=\"http://doc.qt.io/qt-4.8/qevent.html#Type-enum\" rel=\"nofollow\">Qt-4</a> there isn't a <code>QEvent::TouchCancel</code> flag as in <a href=\"http://doc.qt.io/qt-5/qevent.html\" rel=\"nofollow\">Qt-5</a>, how can I simulate a equivalent event in Qt-4?</p>\n\n<p><strong>Background:</strong></p>\n\n<p>I'm trying to implement kinetic scrolling in Qt-4, based on the approach described <a href=\"http://blog.codeimproved.net/posts/kinetic-scrolling.html\" rel=\"nofollow\">here</a>. </p>\n\n<p>The basic framework remains the same, but I changed all <code>MouseEvent</code>s to <code>TouchEvent</code>s.</p>\n\n<p>The problem is that, this code blocks <code>QEvent::TouchBegin</code> event on all child widgets and use it as the beginning of scrolling if the gesture is considered as a scroll, and posts a pair of simulated <code>QEvent::TouchBegin</code> and <code>QEvent::TouchEnd</code> when the gesture is considered as a tap.</p>\n\n<p>For <code>QPushButton</code> needs <code>QEvent::TouchBegin</code> to trigger the animation effect of the \"press\". This approach, although makes the button still usable, eliminates such effect.</p>\n\n<p>I'm trying to solve this problem by preserving the <code>QEvent::TouchBegin</code>, but cancel it when the gesture is considered as a scroll, and post a <code>QEvent::TouchEnd</code> when the gesture is considered a tap.</p>\n\n<p>Question is, <strong>how do I cancel touch event in QT-4?</strong></p>\n\n<p>or, <strong>how to construct a touch point at (0,0)?</strong></p>\n\n<p>In my application, no widget at (0,0) accepts touch events, so posting a <code>QEvent::TouchEnd</code> at (0,0) effectively invalidates all started touch events. However, touch point in Qt doesn't have a usable constructor that can be used to generate an artificial touch point at arbitrary location, this workaround seems pretty difficult, too.</p>\n\n<p>Finally, <strong>last possibly solution</strong>, how difficult is it to integrate <code>QScroller</code> class in Qt-5 to a Qt-4.6.3 project? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1434585761, "post_id": 30903753, "comment_id": 49847361, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/19672816/pointer-errors-in-the-method-of-transmissionc\">Pointer errors in the method of transmission(c++)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1270, "user_id": 2403836, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/364b2a1a765cbd232b64a2347fbc059e?s=128&d=identicon&r=PG", "display_name": "mr nooby noob", "link": "https://stackoverflow.com/users/2403836/mr-nooby-noob"}, "edited": false, "score": 0, "creation_date": 1434606071, "post_id": 30903814, "comment_id": 49852475, "body": "Thank you, I have one more question. If I reference the pointer and update it, will that parents pointer point to the new value? I&#39;m coming from Java and it seems to me that by printing out the original parent of the pointer, it does not display the new value."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 1, "last_activity_date": 1434581493, "creation_date": 1434581493, "answer_id": 30903814, "question_id": 30903753, "link": "https://stackoverflow.com/questions/30903753/c-tree-node-not-updating/30903814#30903814", "title": "C++: Tree node not updating", "body": "<p>Your code </p>\n\n<pre><code>void updateTree(Node *question) {\n             // ^^^^^^ That's a copy of the pointer variable passed.\n             //        Assignments will never affect the original pointer value                 \n    // ...\n    question = new Node(q, &amp;left, &amp;right);\n}\n</code></pre>\n\n<p>sends the newly created <code>Node</code> to void, it's lost as soon that function leaves scope. You're operating on a copy of that pointer variable.</p>\n\n<p>What you actually need is a <strong><em>reference</em></strong> that allows changing the original pointer:</p>\n\n<pre><code>void updateTree(Node*&amp; question) {\n                  // ^\n</code></pre>\n"}], "owner": {"reputation": 1270, "user_id": 2403836, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/364b2a1a765cbd232b64a2347fbc059e?s=128&d=identicon&r=PG", "display_name": "mr nooby noob", "link": "https://stackoverflow.com/users/2403836/mr-nooby-noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 30903814, "answer_count": 1, "score": -2, "last_activity_date": 1434581493, "creation_date": 1434581136, "last_edit_date": 1434581323, "question_id": 30903753, "link": "https://stackoverflow.com/questions/30903753/c-tree-node-not-updating", "title": "C++: Tree node not updating", "body": "<p>I am trying to update a node with a new value, but when I print out the node in another function, the old value is being displayed. I have also tried setting 'question' to the return value of updateTree(), in which it would return the new updated node, but that yields the same result. </p>\n\n<pre><code>void f(Node *n){//n is a pointer that has a string value with a left and right pointer. lets say that \"n\" right now is \"duck\"\n   //do stuff....\n   updateTree(n);\n   cout &lt;&lt; n-&gt;value;//prints out \"duck\" rather than the updated value..\n}\n  void updateTree(Node *question){\n\n    string animal, q;\n    cout &lt;&lt; \"Darn, I lost. What was is? \";\n     getline(cin, animal);\n     cout &lt;&lt; \"Enter a question that is true for a(n) \" &lt;&lt; animal &lt;&lt; \" and false for a(n) \" &lt;&lt; question-&gt;value &lt;&lt; \": \";\n     getline(cin, q);\n     Node right(question-&gt;value, nullptr, nullptr);//the old animal ie \"duck\"\n     Node left(animal, nullptr, nullptr);//the new animal\n     question = new Node(q, &amp;left, &amp;right);//updated \"n\" ie \"duck\" to something else\n\n  }\n</code></pre>\n"}, {"tags": ["c++", "boost", "stdstring", "boost-interprocess"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1434614362, "post_id": 30903688, "comment_id": 49856986, "body": "What is <code>my_basic_string</code>? We can&#39;t answer this if you don&#39;t specify that. I can <i>assuming</i> a <code>boost::container::basic_string&lt;char, std::char_traits&lt;char&gt;, boost::interprocess::allocator&lt;boost::interprocess::managed_&zwnj;&#8203;shared_memory::segme&zwnj;&#8203;nt_manager&gt; &gt;</code> or similar, but if e.g. <code>char</code> doesn&#39;t match, there&#39;s gonna be much more conversion logic"}, {"owner": {"reputation": 3113, "user_id": 2869509, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d6fc7be0a50b7dbfc26709f7323e4d52?s=128&d=identicon&r=PG&f=1", "display_name": "wizurd", "link": "https://stackoverflow.com/users/2869509/wizurd"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1434635743, "post_id": 30903688, "comment_id": 49871953, "body": "@sehe : Updated to show what my_basic_string is..."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1434584024, "post_id": 30904137, "comment_id": 49846960, "body": "Assuming no embedded nulls. Otherwise the dual-iterator or the pointer-and-length constructor should be used."}, {"owner": {"reputation": 7, "user_id": 5017706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rd7ld.jpg?s=128&g=1", "display_name": "Bin Li", "link": "https://stackoverflow.com/users/5017706/bin-li"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1434584660, "post_id": 30904137, "comment_id": 49847103, "body": "Thanks T.C for your comments. But I don&#39;t understand your meaning, could you please provide a simple example?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1434587097, "post_id": 30904137, "comment_id": 49847656, "body": "If the string contained in <code>my_basic_string</code> has an embedded null character - <code>&quot;abc\\0def&quot;</code>, for instance - then your code will initialize <code>s</code> to <code>&quot;abc&quot;</code> only since it stops at the first null character."}, {"owner": {"reputation": 7, "user_id": 5017706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rd7ld.jpg?s=128&g=1", "display_name": "Bin Li", "link": "https://stackoverflow.com/users/5017706/bin-li"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1434596191, "post_id": 30904137, "comment_id": 49849695, "body": "@T.C. Thanks for example. But for a basic_string with &quot;abc\\0def&quot;, what&#39;s the meaning of &quot;def&quot;? When use the basic_string, i.e. my_basic_string.c_str(), my_basic_string.data(),  my_basic_string.size(), all ignore the def.  Please refer to my example: <a href=\"http://coliru.stacked-crooked.com/a/c87c414a84b1f0c1\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1434596480, "post_id": 30904137, "comment_id": 49849775, "body": "You are seeing the same issue here - if you use constructor taking a <code>const char *</code>, it&#39;s going to assume that the string terminates at the first null character it encounters. You need to <a href=\"http://coliru.stacked-crooked.com/a/3b856ac5602cd6c4\" rel=\"nofollow noreferrer\">pass the length explicitly</a>."}], "tags": [], "owner": {"reputation": 7, "user_id": 5017706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rd7ld.jpg?s=128&g=1", "display_name": "Bin Li", "link": "https://stackoverflow.com/users/5017706/bin-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1434601783, "last_edit_date": 1434601783, "creation_date": 1434583587, "answer_id": 30904137, "question_id": 30903688, "link": "https://stackoverflow.com/questions/30903688/convert-boostcontainerboost-basic-string-to-stdstring/30904137#30904137", "title": "Convert boost::container::boost basic_string to std::string", "body": "<p>Changed according to comments from @T.C.</p>\n\n<p>You may use this:</p>\n\n<pre><code>std::string s(my_basic_string.c_str(), my_basic_string.size());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "is_accepted": true, "score": 8, "last_activity_date": 1434585956, "creation_date": 1434585956, "answer_id": 30904458, "question_id": 30903688, "link": "https://stackoverflow.com/questions/30903688/convert-boostcontainerboost-basic-string-to-stdstring/30904458#30904458", "title": "Convert boost::container::boost basic_string to std::string", "body": "<p>As @T.C. has said, you should use:</p>\n\n<pre><code>std::string s(my_basic_string.data(), my_basic_string.size());\n</code></pre>\n\n<p>or</p>\n\n<pre><code>std::string s(my_basic_string.begin(), my_basic_string.end());\n</code></pre>\n\n<p>I prefer the second, but both will work.</p>\n"}, {"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1434636111, "creation_date": 1434636111, "answer_id": 30917546, "question_id": 30903688, "link": "https://stackoverflow.com/questions/30903688/convert-boostcontainerboost-basic-string-to-stdstring/30917546#30917546", "title": "Convert boost::container::boost basic_string to std::string", "body": "<p>Just copy element-wise (which any decent standard library implementation optimizes into <code>memcpy</code>):</p>\n\n<pre><code>#include &lt;boost/interprocess/managed_shared_memory.hpp&gt;\n#include &lt;iostream&gt;\n\nusing namespace boost::interprocess;\ntypedef allocator&lt;char, managed_shared_memory::segment_manager&gt; CharAllocator;\ntypedef boost::container::basic_string&lt;char, std::char_traits&lt;char&gt;, CharAllocator&gt; my_shared_string;\n\nstd::string s(my_shared_string const&amp; ss) {\n    return std::string(ss.begin(), ss.end());\n}\n</code></pre>\n\n<p>I called the string \"my_shared_string\" (because it's not any more \"basic\" than std::string). In fact it's good to notice this has everything to do with containers with custom allocators, and nothing with std::string or Boost Interprocess in particular:</p>\n\n<pre><code>typedef std::basic_string&lt;char, std::char_traits&lt;char&gt;, CharAllocator&gt; my_shared_string;\n</code></pre>\n\n<p>behaves exactly the same for the given problem; So does e.g.:</p>\n\n<pre><code>typedef std::vector&lt;char, CharAllocator&gt; my_shared_vector;\n\nstd::vector&lt;char&gt; v(my_shared_vector const&amp; ss) {\n    return std::vector&lt;char&gt;(ss.begin(), ss.end());\n}\n</code></pre>\n"}], "owner": {"reputation": 3113, "user_id": 2869509, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d6fc7be0a50b7dbfc26709f7323e4d52?s=128&d=identicon&r=PG&f=1", "display_name": "wizurd", "link": "https://stackoverflow.com/users/2869509/wizurd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2825, "favorite_count": 2, "accepted_answer_id": 30904458, "answer_count": 3, "score": 6, "last_activity_date": 1434644595, "creation_date": 1434580818, "last_edit_date": 1434644595, "question_id": 30903688, "link": "https://stackoverflow.com/questions/30903688/convert-boostcontainerboost-basic-string-to-stdstring", "title": "Convert boost::container::boost basic_string to std::string", "body": "<p>Is there a simple way to do this?\nI've tried the following:</p>\n\n<pre><code>typedef allocator&lt;char,managed_shared_memory::segment_manager&gt;\n    CharAllocator;\ntypedef boost::container::basic_string&lt;char, std::char_traits&lt;char&gt;, CharAllocator&gt;\n    my_basic_string;\n\nstd::string s(my_basic_string);\n</code></pre>\n"}, {"tags": ["c++", "segmentation-fault", "coredump"], "comments": [{"owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1434581085, "post_id": 30903660, "comment_id": 49846196, "body": "@Jongware ok, done, please see the update"}, {"owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1434581095, "post_id": 30903660, "comment_id": 49846201, "body": "@myaut ok, done, please see the update"}, {"owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "reply_to_user": {"reputation": 31937, "user_id": 2642204, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIjBF.jpg?s=128&g=1", "display_name": "BartoszKP", "link": "https://stackoverflow.com/users/2642204/bartoszkp"}, "edited": false, "score": 0, "creation_date": 1434582129, "post_id": 30903660, "comment_id": 49846471, "body": "@BartoszKP would you show me how it would be all in C++? pelase"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1434582917, "post_id": 30903660, "comment_id": 49846684, "body": "You need to watch/print the values of <code>a</code> and <code>b</code> to make sure they are what you think they are.  I have a feeling that they are not within the range of the array, this causing the crash.  Print those values will show exactly where <code>A[b][a]</code> or <code>A[a][b]</code> are actually looking and writing into memory."}, {"owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "edited": false, "score": 0, "creation_date": 1434583251, "post_id": 30903660, "comment_id": 49846780, "body": "I have already just check it and the values of REL are below <code>tm</code> if you agree, please see the update, I put a small working file"}, {"owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1434583564, "post_id": 30903660, "comment_id": 49846846, "body": "@MichaelDorgan, Yes, you were right, the values are over <code>tm</code>. Silly of me."}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1434584189, "post_id": 30903660, "comment_id": 49846998, "body": "You&#39;ve already found the problem, but... Why did you even suspect the <code>fopen</code>? Gdb clearly told you the problem was with <code>A[b][a]=A[b][a]+1;</code>. <code>fopen</code> can&#39;t lead to segmentation faults (and it doesn&#39;t throw exceptions either); if it fails to open the file, it will simply return a NULL pointer."}, {"owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "reply_to_user": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1434584658, "post_id": 30903660, "comment_id": 49847102, "body": "@FabioTurati Last time of programming on C or similar was 5 years ago. I have returned and until now I have remembering for 2 days."}, {"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 0, "creation_date": 1434613970, "post_id": 30903660, "comment_id": 49856740, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/30880655/another-coredump-issue-in-c\">Another coredump issue in C</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "edited": false, "score": 0, "creation_date": 1434581732, "post_id": 30903833, "comment_id": 49846379, "body": "Thank you for your answer, all your suggestion were check and still got the same error"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": -1, "last_activity_date": 1434581606, "creation_date": 1434581606, "answer_id": 30903833, "question_id": 30903660, "link": "https://stackoverflow.com/questions/30903660/segmentation-fault-issue-n/30903833#30903833", "title": "segmentation fault issue # n", "body": "<pre><code>int *B;\nB = (int*) malloc(ler*sizeof(int));\n\n...\n\nif( B != NULL )\n{\n    for(i=0;i&lt;tm;i++)\n    {\n        B[i]=0;\n    }\n}\n</code></pre>\n\n<p>This is a catastrophe if <code>tm &gt; ler</code>.</p>\n\n<p>Also, why do you condition this code in <code>B</code> being valid, but then unconditionally re-assign values to every element of <code>B</code>? Neither of those things makes sense. If you're going to re-assign values to every element, why zero them? And if you're going to access the array without checking its validity later, why check its validity here?</p>\n"}, {"comments": [{"owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "edited": false, "score": 0, "creation_date": 1434583540, "post_id": 30904111, "comment_id": 49846840, "body": "Yes, you are right, the values are over <code>tm</code>. Silly of me."}], "tags": [], "owner": {"reputation": 31937, "user_id": 2642204, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIjBF.jpg?s=128&g=1", "display_name": "BartoszKP", "link": "https://stackoverflow.com/users/2642204/bartoszkp"}, "is_accepted": true, "score": 2, "last_activity_date": 1434900860, "last_edit_date": 1434900860, "creation_date": 1434583354, "answer_id": 30904111, "question_id": 30903660, "link": "https://stackoverflow.com/questions/30903660/segmentation-fault-issue-n/30904111#30904111", "title": "segmentation fault issue # n", "body": "<p>As you've indicated yourself, the size of <code>A</code> (<code>tm</code>) is 3371 x 3371. The file REL.txt contains numbers like <code>3383</code> (line 138 in the file) which are larger than the dimensions of <code>A</code>. This makes you reach out of bounds in this part, as indicated by the debugger:</p>\n\n<pre><code>for(i=0;i&lt;div;i+=2)\n{\n    a=B[i]-1;\n    b=B[i+1]-1;\n    std::cout&lt;&lt;a&lt;&lt;\"\\t\"&lt;&lt;b&lt;&lt;\"\\n\";\n    A[b][a]=A[b][a]+1;           // b or a may be larger than 3371\n    A[a][b]=A[a][b]+1;\n}\n</code></pre>\n\n<p>You don't need to verify this manually though, you can implement it:</p>\n\n<pre><code>for(i=0;i&lt;div;i+=2)\n{\n    a=B[i]-1;\n    b=B[i+1]-1;\n    std::cout&lt;&lt;a&lt;&lt;\"\\t\"&lt;&lt;b&lt;&lt;\"\\n\";\n\n    if (a &gt;= tm || b &gt;= tm)\n    {\n        std::cerr &lt;&lt; \"Out of bounds!\" &lt;&lt; std::endl;\n        continue;\n    }\n\n    A[b][a]=A[b][a]+1;           // b or a may be larger than 3371\n    A[a][b]=A[a][b]+1;\n}\n</code></pre>\n"}], "owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 30904111, "answer_count": 2, "score": -3, "last_activity_date": 1434900860, "creation_date": 1434580696, "last_edit_date": 1434583457, "question_id": 30903660, "link": "https://stackoverflow.com/questions/30903660/segmentation-fault-issue-n", "title": "segmentation fault issue # n", "body": "<p>Is this command line wrong? <code>FILE *TM = fopen(\"TM\",\"r\");</code></p>\n\n<p>When I compile my code with: <code>g++ -O3 -march=corei7 -mtune=corei7 -std=c++11 prueba3.cpp -o prueba3 -lstdc++</code> or <code>g++ -O3 -march=corei7 -mtune=corei7 -std=c++0x prueba3.cpp -o prueba3 -lstdc++</code> and then run the executable, I got:</p>\n\n<blockquote>\n  <p>Segmentation fault (core dumped)</p>\n</blockquote>\n\n<p>When I debug the code with dbg I got the following result:</p>\n\n<pre><code>Reading symbols from ./a.out...done.\n(gdb) b main\nBreakpoint 1 at 0x400e59: file prueba3.cpp, line 10.\n(gdb) r\nStarting program: /home/alejo/Desktop/CM/a.out \n\nBreakpoint 1, main () at prueba3.cpp:10\n10  {\n(gdb) s\n19      FILE *TM = fopen(\"TM\",\"r\");\n(gdb) c\nContinuing.\n2053    2618\n2618    3223\n3223    3431\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x000000000040138e in main () at prueba3.cpp:98\n98          A[b][a]=A[b][a]+1;\n(gdb) q\nA debugging session is active.\n\n    Inferior 1 [process 3977] will be killed.\n\nQuit anyway? (y or n) y\n</code></pre>\n\n<p>But, still, I don't understand how to apply it on my code, which is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{\nint a,b,i,j,div,tm,ler;  \nchar string0[256],string1[256],string2[256];\n/////////// \n//                          Load files:\n//                          TM = size of the sqaure matrix\n//                          REL = List of numbers\n//                          LER = How many numbers are in REL\n/////////// \nFILE *TM = fopen(\"TM\",\"r\");\nif(TM == NULL)\n{  \n    printf(\"Can't open %s\\n\",\"TM\");\n    exit(1);\n}\nfscanf(TM,\"%255s\",string2);\ntm = std::stoi(string2);\nfclose(TM);\n\nFILE *REL = fopen(\"REL\",\"r\");\nif(REL == NULL)\n{  \n    printf(\"Can't open %s\\n\",\"REL\");\n    exit(1);\n}\n\nFILE *LER = fopen(\"LER\",\"r\");\nif(LER == NULL)\n{  \n    printf(\"Can't open %s\\n\",\"LER\");\n    exit(1);\n}\nfscanf(LER,\"%255s\",string1);\nler = std::stoi(string1);\nfclose(LER);\n\ndiv=ler/2;\n///////////     \n//                          Allocate matrices\n///////////     \nint **A;\nA = (int **)malloc(tm*sizeof(int*));\nfor(i=0;i&lt;tm;i++)\n{\n    A[i]=(int*)malloc(tm*sizeof(int));\n}\n\nint *B;\nB = (int*) malloc(ler*sizeof(int));\n///////////     \n//                          Set zero all elementes of allocated matrices\n///////////     \nif( A != NULL )\n{\n    for(i=0;i&lt;tm;i++)\n    {\n        for(j=0;j&lt;tm;j++)\n        {\n            A[i][j]=0;\n        }\n    }\n}\n\nif( B != NULL )\n{\n    for(i=0;i&lt;ler;i++)\n    {\n        B[i]=0;\n    }\n}\n/////////// \n//                          Put the LER numbers of REL in B[i] \n//                          with converting number-string to number-int\n///////////     \nfor(i=0;i&lt;ler;i++)\n{\n    fscanf(REL,\"%255s\",string0);\n    B[i]=std::stoi(string0);\n}\nfclose(REL);\n/////////// \n//                          Reocate numbers of C[i] in A[i][j]\n/////////// \nfor(i=0;i&lt;div;i+=2)\n{\n    a=B[i]-1;\n    b=B[i+1]-1;\n    std::cout&lt;&lt;a&lt;&lt;\"\\t\"&lt;&lt;b&lt;&lt;\"\\n\";\n    A[b][a]=A[b][a]+1;\n    A[a][b]=A[a][b]+1;\n}   \nfree(B);\n/////////// \n//                          Print A[][]\n/////////// \nfor(i=0;i&lt;tm;i++)\n{\n    for(j=0;j&lt;tm;j++)\n    {\n        cout&lt;&lt;A[i][j]; \n    }\n    cout&lt;&lt;\"\\n\"; \n}\nfree(A);\n}\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<p>Just in case, the files are:</p>\n\n<pre><code>REL:\n\n2054\n2619\n2619\n3224\n3224\n3432\n194\n2619\n2619\n3224\n3224\n3432\n448\n\nLER\n\n30846\n\nTM\n\n3434\n</code></pre>\n"}, {"tags": ["c++", "c++11", "perfect-forwarding", "variadic-functions"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1434580417, "post_id": 30903449, "comment_id": 49845941, "body": "Which compiler and which version?"}, {"owner": {"reputation": 852, "user_id": 1303358, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/61f5a37164724d9a3da4c99747c85095?s=128&d=identicon&r=PG", "display_name": "MarkB", "link": "https://stackoverflow.com/users/1303358/markb"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1434580452, "post_id": 30903449, "comment_id": 49845956, "body": "g++ 4.8.2 with --std=c++11   (also fails on VS2013 with C2782)"}, {"owner": {"reputation": 3612, "user_id": 2422013, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VwKps.jpg?s=128&g=1", "display_name": "AStopher", "link": "https://stackoverflow.com/users/2422013/astopher"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1434580757, "post_id": 30903449, "comment_id": 49846068, "body": "@T.C. It happens on VC++14, so no, it&#39;s not caused by the problem you have identified."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 3612, "user_id": 2422013, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VwKps.jpg?s=128&g=1", "display_name": "AStopher", "link": "https://stackoverflow.com/users/2422013/astopher"}, "edited": false, "score": 0, "creation_date": 1434580823, "post_id": 30903449, "comment_id": 49846096, "body": "@cybermonkey It works on GCC 4.9+ and Clang. Considering how broken MSVC often is with templates, I don&#39;t take its behavior as evidence of anything."}], "answers": [{"comments": [{"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1434584683, "post_id": 30903834, "comment_id": 49847114, "body": "What does the + on a pointer do?  I can&#39;t find any references explaining the + on a pointer."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1434586894, "post_id": 30903834, "comment_id": 49847606, "body": "@cup It returns the value of the pointer unchanged; usually used to force a function/array-to-pointer decay. The idea here is that it returns a fresh value copy, which shouldn&#39;t have the const-qualification."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 4, "last_activity_date": 1434604015, "last_edit_date": 1434604015, "creation_date": 1434581613, "answer_id": 30903834, "question_id": 30903449, "link": "https://stackoverflow.com/questions/30903449/why-is-my-code-failing-to-compile-perfect-forwarding-and-parameter-packs/30903834#30903834", "title": "Why is my code failing to compile? (perfect forwarding and parameter packs)", "body": "<p>When a template parameter (or parameter pack) is used in two deduced contexts, deduction is done independently for each and the result must match. This makes things like </p>\n\n<pre><code>template&lt;typename ...Args&gt;\nvoid foo(B* b, void (B::*func)(Args...), Args&amp;&amp;... args) { /* ... */ }\n</code></pre>\n\n<p>tricky to use at best, because <code>Args</code> is being deduced from both the member function signature and the subsequent pack of arguments; coupled with the special rules for forwarding references, you'll usually not be getting an exact match.</p>\n\n<p>Now, in this case, you <em>should</em> get an exact match, because <code>this</code> is a prvalue of type <code>A*</code>, so <code>Args</code> will be deduced as the non-reference type <code>A*</code> according to the forwarding reference rules, and that happens to match the signature of <code>B::fn</code>. Unfortunately, due to <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=56701\" rel=\"nofollow\">bug 56701</a>, GCC 4.8 considers <code>this</code> to have type <code>A* const</code> and deduces <code>Args</code> accordingly (and MSVC apparently has the same bug), causing a mismatch. </p>\n\n<p>I recommend making <code>func</code>'s type a template parameter, side-stepping the double-deduction issue entirely.</p>\n\n<pre><code>template&lt;typename PMF, typename ...Args&gt;\nvoid foo(B* b, PMF func, Args&amp;&amp;... args) { /* ... */ }\n</code></pre>\n\n<p>Alternatively, you can constrain <code>func</code> to \"pointer to member of <code>B</code> of some sort\":</p>\n\n<pre><code>template&lt;typename F, typename ...Args&gt;\nvoid foo(B* b, F B::* func, Args&amp;&amp;... args) { /* ... */ }\n</code></pre>\n\n<p>Both also have the benefit of handling pointer to <code>const</code> member functions properly, compared to the original.</p>\n\n<p>If you really want to constrain <code>func</code>'s type further, use two packs:</p>\n\n<pre><code>template&lt;typename ...Args, typename... FArgs&gt;\nvoid foo(B* b, void (B::*func)(FArgs...), Args&amp;&amp;... args) \n</code></pre>\n\n<p>Another possible workaround, for this case only, involves playing with <code>this</code> to try to remove the erroneous const-qualification; <code>+this</code> works with GCC 4.8 but not MSVC; <code>&amp;*this</code> works with MSVC but not GCC 4.8; <code>+&amp;*this</code> seems to work with both but is getting into line-noise territory...</p>\n"}], "owner": {"reputation": 852, "user_id": 1303358, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/61f5a37164724d9a3da4c99747c85095?s=128&d=identicon&r=PG", "display_name": "MarkB", "link": "https://stackoverflow.com/users/1303358/markb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 30903834, "answer_count": 1, "score": 3, "last_activity_date": 1434604015, "creation_date": 1434579698, "last_edit_date": 1434580758, "question_id": 30903449, "link": "https://stackoverflow.com/questions/30903449/why-is-my-code-failing-to-compile-perfect-forwarding-and-parameter-packs", "title": "Why is my code failing to compile? (perfect forwarding and parameter packs)", "body": "<p>Here is the program:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nstruct A;\n\nstruct B {\n    void fn(A* ptr) {}\n};\n\ntemplate&lt;typename ...Args&gt;\nvoid foo(B* b, void (B::*func)(Args...), Args&amp;&amp;... args)\n{\n    (b-&gt;*func)(std::forward&lt;Args&gt;(args)...);\n}\n\nstruct A {\n    void bar() { B b; foo(&amp;b, &amp;B::fn, this); } // fails\n};\n\nint main()\n{\n    A a;\n    B b;\n    foo(&amp;b, &amp;B::fn, &amp;a); // passes\n    return 0;\n}\n</code></pre>\n\n<p>Here is the compiler output:</p>\n\n<pre><code>foo.cpp: In member function 'void A::bar()':\nfoo.cpp:16:47: error: no matching function for call to 'foo(B*, void (B::*)(A*), A* const)'\n     void bar() { B b; foo(&amp;b, &amp;B::fn, this); } // fails\n                                           ^\nfoo.cpp:16:47: note: candidate is:\nfoo.cpp:10:10: note: template&lt;class ... Args&gt; void foo(B*, void (B::*)(Args ...), Args&amp;&amp; ...)\n     void foo(B* b, void (B::*func)(Args...), Args&amp;&amp;... args)\n          ^\nfoo.cpp:10:10: note:   template argument deduction/substitution failed:\nfoo.cpp:16:47: note:   inconsistent parameter pack deduction with 'A*' and 'A* const'\n         void bar() { B b; foo(&amp;b, &amp;B::fn, this); } // fails\n</code></pre>\n\n<p>I cannot figure out why one call works and one call fails.</p>\n\n<p><strong>EDIT :</strong> Changing the parameter pack to <code>Args...</code> from <code>Args&amp;&amp;...</code> solves the compiler problem.  But, I would still like to know why it fails.</p>\n"}, {"tags": ["c++", "xcode", "makefile"], "comments": [{"owner": {"reputation": 1271, "user_id": 1835351, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c07c0ffa258f06000479cfa7df2bd5b9?s=128&d=identicon&r=PG", "display_name": "user1835351", "link": "https://stackoverflow.com/users/1835351/user1835351"}, "edited": false, "score": 0, "creation_date": 1434605223, "post_id": 30903437, "comment_id": 49852155, "body": "I&#39;m having the same type of problem, can someone post the answer? I&#39;ve tried turning it off and on again"}, {"owner": {"reputation": 577, "user_id": 633182, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d47a7cc3ba0e67abdb01989f1abcd984?s=128&d=identicon&r=PG", "display_name": "sAguinaga", "link": "https://stackoverflow.com/users/633182/saguinaga"}, "edited": false, "score": 0, "creation_date": 1434731813, "post_id": 30903437, "comment_id": 49921152, "body": "I&#39;m stuck on this too. I want to create a Makefile so I can compile this on a Mac and on a linux box. I added under &#39;Build Settings&#39; <code>-I&#47;usr&#47;local&#47;include&#47;igraph</code> to OHTER_CFLAGS and <code>-L&#47;usr&#47;local&#47;lib</code> to OTHER_LDFLAGS. Where do I add <code>-l graph</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 363, "user_id": 620526, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a27304ddf74ce5c2d41e78cead94f42?s=128&d=identicon&r=PG", "display_name": "Vanquish46", "link": "https://stackoverflow.com/users/620526/vanquish46"}, "is_accepted": true, "score": 0, "last_activity_date": 1435110279, "creation_date": 1435110279, "answer_id": 31016237, "question_id": 30903437, "link": "https://stackoverflow.com/questions/30903437/xcode-6-3-2-external-build/31016237#31016237", "title": "xcode 6.3.2 external build", "body": "<p>Well I've figured out both of my issues.</p>\n\n<p>1) In the external build tool configuration I had to uncheck 'Pass build settings in environment'.</p>\n\n<p>2) I'm a bit of an idiot here...I'd tried adding -g to my $(FLAGS) variable, but realized that was only applying to my executable. I modified the makefile to compile every single source file with -g and then breakpoints stopped on the source code (as opposed to disassembly).</p>\n"}], "owner": {"reputation": 363, "user_id": 620526, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a27304ddf74ce5c2d41e78cead94f42?s=128&d=identicon&r=PG", "display_name": "Vanquish46", "link": "https://stackoverflow.com/users/620526/vanquish46"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 873, "favorite_count": 1, "accepted_answer_id": 31016237, "answer_count": 1, "score": 1, "last_activity_date": 1435110279, "creation_date": 1434579643, "question_id": 30903437, "link": "https://stackoverflow.com/questions/30903437/xcode-6-3-2-external-build", "title": "xcode 6.3.2 external build", "body": "<p>I'm trying to compile an existing c++ project, originally developed on linux with gcc. The only external library is GSL (GNU Scientific Library). I have created an external build tool project to use xcode's debugger, but I currently have two issues.</p>\n\n<p>1) When I try to build in xcode it fails with the error <code>'gsl/gsl_matrix.h' file not found</code>. I have added <code>/usr/local/include</code> to the <code>HEADER_SEARCH_PATHS</code> and confirmed that there is a <code>gsl</code> folder in that location, which contains all of the header files (installed with brew). However, if I type <code>make</code> in the CL then the project compiles without any errors, so I know there isn't an issue with my GSL, the makefile or the switch from gcc to clang.</p>\n\n<p>I've looked at <a href=\"https://stackoverflow.com/questions/30331302/xcode-6-3-2-unable-to-build-or-run-projects\">Xcode 6.3.2 unable to build or run projects</a>, and updated my xcode CL tools just in base, but I was already on the latest (2339).</p>\n\n<p>2) While it would be nice to build from within xcode, it's not the end of the world if I have to build from the CL everytime. Once I've compiled everything I can run it from xcode, however, none of my breakpoints are hit. I have set the executable and the custom working directory in my debug scheme (as indicated by <a href=\"https://stackoverflow.com/questions/5879697/run-c-program-in-xcode-4-using-makefile\">Run C program in Xcode 4 using makefile</a>). I've also looked through <a href=\"https://stackoverflow.com/questions/64790/why-arent-my-breakpoints-working\">Why aren&#39;t my breakpoints working?</a> and haven't found anything that works. </p>\n\n<p>I thought it might be operator error since I'm running the target with Product->Run, but I don't see any option to specifically start debug mode like intellij. I'm also able to pause the code and the debugger view comes up, but when I pause it just shows me the assembly instructions.</p>\n"}, {"tags": ["c++", "gcc", "boost", "enable-if", "dlib"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1434579972, "post_id": 30903428, "comment_id": 49845792, "body": "This is weird. Did dlib copy-paste boost code or what? I hope not, that would be <i>incredibly</i> stupid."}, {"owner": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "edited": false, "score": 0, "creation_date": 1434581408, "post_id": 30903428, "comment_id": 49846295, "body": "There is an enable_if template in dlib but it&#39;s in the dlib namespace.  There should not be a conflict."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1434581712, "post_id": 30903428, "comment_id": 49846376, "body": "The list of filenames in &quot;included from&quot; etc. are very much relevant, please edit your post to restore them. Paste <i>exactly</i> the output of the compiler."}, {"owner": {"reputation": 438, "user_id": 5021685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/641d432a225c2aab06bae2f320a2f16a?s=128&d=identicon&r=PG&f=1", "display_name": "sangrey", "link": "https://stackoverflow.com/users/5021685/sangrey"}, "edited": false, "score": 0, "creation_date": 1434744704, "post_id": 30903428, "comment_id": 49927608, "body": "I added the list of &quot;included from&quot; as requested. Thank-you."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1434754867, "post_id": 30903428, "comment_id": 49931198, "body": "Use a newer version of dlib. <a href=\"https://github.com/davisking/dlib/commit/9bc90c511bb7849ff43206c8df5fe67358fbdd26\" rel=\"nofollow noreferrer\">v18.12 or later</a>."}, {"owner": {"reputation": 438, "user_id": 5021685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/641d432a225c2aab06bae2f320a2f16a?s=128&d=identicon&r=PG&f=1", "display_name": "sangrey", "link": "https://stackoverflow.com/users/5021685/sangrey"}, "edited": false, "score": 0, "creation_date": 1435164405, "post_id": 30903428, "comment_id": 50089220, "body": "That seemed to work.  Is there some way I can give you credit for it?"}], "owner": {"reputation": 438, "user_id": 5021685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/641d432a225c2aab06bae2f320a2f16a?s=128&d=identicon&r=PG&f=1", "display_name": "sangrey", "link": "https://stackoverflow.com/users/5021685/sangrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1434744673, "creation_date": 1434579609, "last_edit_date": 1434744673, "question_id": 30903428, "link": "https://stackoverflow.com/questions/30903428/dlib-optimization-and-boost-multi-array-cannot-be-included-in-the-same-file-with", "title": "dlib optimization and boost multi_array cannot be included in the same file with gcc. (enable_if)", "body": "<p>I am writing a program to estimate a mutli-dimensional function. In so doing, I'm using dlib/optimization.h for optimization and boost/multi_array.hpp to store the data.  When I try to include them both, the code will not compile with gcc. It works with clang. I'm using c++11 and using Ceemple to handle the linking, which as far as I can see works fine. </p>\n\n<p>A minimal example is the following. </p>\n\n<pre><code>#include &lt;dlib/optimization.h&gt; \n#include &lt;boost/multi_array.hpp&gt;\n#include &lt;iostream&gt;\n\nint main() {\n\nstd::cout &lt;&lt; \"Hello World!\" &lt;&lt; std::endl;\n\n}      \n</code></pre>\n\n<p>If I remove either of the dlib or boost libraries, the code compiles fine. The errors I am getting are reproduced below.</p>\n\n<pre><code>In file included from /usr/include/boost/multi_array/view.hpp:27:0,\n             from /usr/include/boost/multi_array/multi_array_ref.hpp:26,\n             from /usr/include/boost/multi_array.hpp:26,\n             from /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:5:\n/usr/include/boost/utility/enable_if.hpp:28:10: error: redefinition  of default argument for \u2018class T\u2019\nstruct enable_if_c {\n      ^\nIn file included from /opt/ceemple/include/dlib/dlib/algs.h:78:0,\n             from     /opt/ceemple/include/dlib/dlib/matrix/matrix_exp.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix.h:6,\n             from     /opt/ceemple/include/dlib/dlib/optimization/optimization_search_strategies.h:8,\n             from /opt/ceemple/include/dlib/dlib/optimization/optimization.h:9,\n             from /opt/ceemple/include/dlib/dlib/optimization.h:6,\n             from        /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:1:\n   /opt/ceemple/include/dlib/dlib/enable_if.h:28:21: note: original  definition appeared here\n template &lt;bool B, class T = void&gt;\n                 ^\n In file included from /usr/include/boost/multi_array/view.hpp:27:0,\n             from  /usr/include/boost/multi_array/multi_array_ref.hpp:26,\n             from /usr/include/boost/multi_array.hpp:26,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:5:\n /usr/include/boost/utility/enable_if.hpp:33:10: error: redefinition  of \u2018struct boost::enable_if_c&lt;false, T&gt;\u2019\nstruct enable_if_c&lt;false, T&gt; {};\n      ^\nIn file included from /opt/ceemple/include/dlib/dlib/algs.h:78:0,\n             from  /opt/ceemple/include/dlib/dlib/matrix/matrix_exp.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix.h:6,\n             from    /opt/ceemple/include/dlib/dlib/optimization/optimization_search_strategie    s.h:8,\n              from   /opt/ceemple/include/dlib/dlib/optimization/optimization.h:9,\n              from /opt/ceemple/include/dlib/dlib/optimization.h:6,\n             from    /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:1:\n /opt/ceemple/include/dlib/dlib/enable_if.h:34:10: error: previous  definition of \u2018struct boost::enable_if_c&lt;false, T&gt;\u2019\n struct enable_if_c&lt;false, T&gt; {};\n      ^\nIn file included from /usr/include/boost/multi_array/view.hpp:27:0,\n             from   /usr/include/boost/multi_array/multi_array_ref.hpp:26,\n             from /usr/include/boost/multi_array.hpp:26,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:5:\n/usr/include/boost/utility/enable_if.hpp:36:10: error: redefinition  of default argument for \u2018class T\u2019\nstruct enable_if : public enable_if_c&lt;Cond::value, T&gt; {};\n       ^\nIn file included from /opt/ceemple/include/dlib/dlib/algs.h:78:0,\n             from  /opt/ceemple/include/dlib/dlib/matrix/matrix_exp.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix.h:6,\n             from   /opt/ceemple/include/dlib/dlib/optimization/optimization_search_strategie    s.h:8,\n             from   /opt/ceemple/include/dlib/dlib/optimization/optimization.h:9,\n             from /opt/ceemple/include/dlib/dlib/optimization.h:6,\n             from    /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:1:\n/opt/ceemple/include/dlib/dlib/enable_if.h:36:25: note: original  definition appeared here\ntemplate &lt;class Cond, class T = void&gt; \n                      ^\nIn file included from /usr/include/boost/multi_array/view.hpp:27:0,\n             from   /usr/include/boost/multi_array/multi_array_ref.hpp:26,\n             from /usr/include/boost/multi_array.hpp:26,\n             from   /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:5:\n/usr/include/boost/utility/enable_if.hpp:39:10: error: redefinition  of \u2018struct boost::lazy_enable_if_c&lt;B, T&gt;\u2019\nstruct lazy_enable_if_c {\n       ^\nIn file included from /opt/ceemple/include/dlib/dlib/algs.h:78:0,\n             from    /opt/ceemple/include/dlib/dlib/matrix/matrix_exp.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix.h:6,\n             from    /opt/ceemple/include/dlib/dlib/optimization/optimization_search_strategie    s.h:8,\n             from  /opt/ceemple/include/dlib/dlib/optimization/optimization.h:9,\n             from /opt/ceemple/include/dlib/dlib/optimization.h:6,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:1:\n/opt/ceemple/include/dlib/dlib/enable_if.h:40:10: error: previous  definition of \u2018struct boost::lazy_enable_if_c&lt;B, T&gt;\u2019\nstruct lazy_enable_if_c {\n       ^\nIn file included from /usr/include/boost/multi_array/view.hpp:27:0,\n             from  /usr/include/boost/multi_array/multi_array_ref.hpp:26,\n             from /usr/include/boost/multi_array.hpp:26,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:5:\n /usr/include/boost/utility/enable_if.hpp:44:10: error: redefinition  of \u2018struct boost::lazy_enable_if_c&lt;false, T&gt;\u2019\nstruct lazy_enable_if_c&lt;false, T&gt; {};\n       ^\nIn file included from /opt/ceemple/include/dlib/dlib/algs.h:78:0,\n             from   /opt/ceemple/include/dlib/dlib/matrix/matrix_exp.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix.h:6,\n             from   /opt/ceemple/include/dlib/dlib/optimization/optimization_search_strategie    s.h:8,\n             from  /opt/ceemple/include/dlib/dlib/optimization/optimization.h:9,\n             from /opt/ceemple/include/dlib/dlib/optimization.h:6,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:1:\n /opt/ceemple/include/dlib/dlib/enable_if.h:45:10: error: previous  definition of \u2018struct boost::lazy_enable_if_c&lt;false, T&gt;\u2019\nstruct lazy_enable_if_c&lt;false, T&gt; {};\n       ^\nIn file included from /usr/include/boost/multi_array/view.hpp:27:0,\n             from   /usr/include/boost/multi_array/multi_array_ref.hpp:26,\n             from /usr/include/boost/multi_array.hpp:26,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:5:\n/usr/include/boost/utility/enable_if.hpp:47:10: error: redefinition   of \u2018struct boost::lazy_enable_if&lt;Cond, T&gt;\u2019\n   struct lazy_enable_if : public lazy_enable_if_c&lt;Cond::value, T&gt;  {};\n         ^\nIn file included from /opt/ceemple/include/dlib/dlib/algs.h:78:0,\n             from  /opt/ceemple/include/dlib/dlib/matrix/matrix_exp.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix.h:6,\n             from  /opt/ceemple/include/dlib/dlib/optimization/optimization_search_strategie    s.h:8,\n             from     /opt/ceemple/include/dlib/dlib/optimization/optimization.h:9,\n             from /opt/ceemple/include/dlib/dlib/optimization.h:6,\n             from     /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:1:\n/opt/ceemple/include/dlib/dlib/enable_if.h:48:10: error: previous     definition of \u2018struct boost::lazy_enable_if&lt;Cond, T&gt;\u2019\nstruct lazy_enable_if : public lazy_enable_if_c&lt;Cond::value, T&gt; {};\n       ^\nIn file included from /usr/include/boost/multi_array/view.hpp:27:0,\n             from     /usr/include/boost/multi_array/multi_array_ref.hpp:26,\n             from /usr/include/boost/multi_array.hpp:26,\n             from     /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:5:\n/usr/include/boost/utility/enable_if.hpp:51:10: error: redefinition  of default argument for \u2018class T\u2019\nstruct disable_if_c {\n       ^\nIn file included from /opt/ceemple/include/dlib/dlib/algs.h:78:0,\n             from  /opt/ceemple/include/dlib/dlib/matrix/matrix_exp.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix.h:6,\n             from  /opt/ceemple/include/dlib/dlib/optimization/optimization_search_strategie    s.h:8,\n             from   /opt/ceemple/include/dlib/dlib/optimization/optimization.h:9,\n             from /opt/ceemple/include/dlib/dlib/optimization.h:6,\n             from /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:1:  \n /opt/ceemple/include/dlib/dlib/enable_if.h:51:21: note: original  definition appeared here\ntemplate &lt;bool B, class T = void&gt;\n                  ^\n In file included from /usr/include/boost/multi_array/view.hpp:27:0,\n             from  /usr/include/boost/multi_array/multi_array_ref.hpp:26,\n             from /usr/include/boost/multi_array.hpp:26,\n             from   /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:5:\n /usr/include/boost/utility/enable_if.hpp:56:10: error: redefinition  of \u2018struct boost::disable_if_c&lt;true, T&gt;\u2019\nstruct disable_if_c&lt;true, T&gt; {};\n       ^\n In file included from /opt/ceemple/include/dlib/dlib/algs.h:78:0,\n             from   /opt/ceemple/include/dlib/dlib/matrix/matrix_exp.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/optimization/optimization_search_strategie    s.h:8,\n             from  /opt/ceemple/include/dlib/dlib/optimization/optimization.h:9,\n             from /opt/ceemple/include/dlib/dlib/optimization.h:6,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:1:\n /opt/ceemple/include/dlib/dlib/enable_if.h:57:10: error: previous  definition of \u2018struct boost::disable_if_c&lt;true, T&gt;\u2019\nstruct disable_if_c&lt;true, T&gt; {};\n       ^\n In file included from /usr/include/boost/multi_array/view.hpp:27:0,\n             from  /usr/include/boost/multi_array/multi_array_ref.hpp:26,\n             from /usr/include/boost/multi_array.hpp:26,\n             from     /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:5:\n /usr/include/boost/utility/enable_if.hpp:59:10: error: redefinition    of default argument for \u2018class T\u2019\nstruct disable_if : public disable_if_c&lt;Cond::value, T&gt; {};\n       ^\nIn file included from /opt/ceemple/include/dlib/dlib/algs.h:78:0,\n             from  /opt/ceemple/include/dlib/dlib/matrix/matrix_exp.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix.h:6,\n             from     /opt/ceemple/include/dlib/dlib/optimization/optimization_search_strategie    s.h:8,\n             from  /opt/ceemple/include/dlib/dlib/optimization/optimization.h:9,\n             from /opt/ceemple/include/dlib/dlib/optimization.h:6,\n             from   /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:1:\n/opt/ceemple/include/dlib/dlib/enable_if.h:59:25: note: original definition appeared here\ntemplate &lt;class Cond, class T = void&gt; \n                      ^\nIn file included from /usr/include/boost/multi_array/view.hpp:27:0,\n             from  /usr/include/boost/multi_array/multi_array_ref.hpp:26,\n             from /usr/include/boost/multi_array.hpp:26,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:5:\n/usr/include/boost/utility/enable_if.hpp:62:10: error: redefinition  of \u2018struct boost::lazy_disable_if_c&lt;B, T&gt;\u2019\nstruct lazy_disable_if_c {\n       ^\nIn file included from /opt/ceemple/include/dlib/dlib/algs.h:78:0,\n             from  /opt/ceemple/include/dlib/dlib/matrix/matrix_exp.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix.h:6,\n             from   /opt/ceemple/include/dlib/dlib/optimization/optimization_search_strategie    s.h:8,\n             from  /opt/ceemple/include/dlib/dlib/optimization/optimization.h:9,\n             from /opt/ceemple/include/dlib/dlib/optimization.h:6,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:1:\n/opt/ceemple/include/dlib/dlib/enable_if.h:63:10: error: previous  definition of \u2018struct boost::lazy_disable_if_c&lt;B, T&gt;\u2019\nstruct lazy_disable_if_c {\n       ^\nIn file included from /usr/include/boost/multi_array/view.hpp:27:0,\n             from   /usr/include/boost/multi_array/multi_array_ref.hpp:26,\n             from /usr/include/boost/multi_array.hpp:26,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:5:\n/usr/include/boost/utility/enable_if.hpp:67:10: error: redefinition  of \u2018struct boost::lazy_disable_if_c&lt;true, T&gt;\u2019\nstruct lazy_disable_if_c&lt;true, T&gt; {};\n       ^\nIn file included from /opt/ceemple/include/dlib/dlib/algs.h:78:0,\n             from  /opt/ceemple/include/dlib/dlib/matrix/matrix_exp.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix.h:6,\n             from  /opt/ceemple/include/dlib/dlib/optimization/optimization_search_strategie    s.h:8,\n             from  /opt/ceemple/include/dlib/dlib/optimization/optimization.h:9,\n             from /opt/ceemple/include/dlib/dlib/optimization.h:6,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:1:\n/opt/ceemple/include/dlib/dlib/enable_if.h:68:10: error: previous  definition of \u2018struct boost::lazy_disable_if_c&lt;true, T&gt;\u2019\nstruct lazy_disable_if_c&lt;true, T&gt; {};\n       ^\n In file included from /usr/include/boost/multi_array/view.hpp:27:0,\n             from  /usr/include/boost/multi_array/multi_array_ref.hpp:26,\n             from /usr/include/boost/multi_array.hpp:26,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:5:\n/usr/include/boost/utility/enable_if.hpp:70:10: error: redefinition  of \u2018struct boost::lazy_disable_if&lt;Cond, T&gt;\u2019\nstruct lazy_disable_if : public lazy_disable_if_c&lt;Cond::value, T&gt; {};\n       ^\nIn file included from /opt/ceemple/include/dlib/dlib/algs.h:78:0,\n             from  /opt/ceemple/include/dlib/dlib/matrix/matrix_exp.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/optimization/optimization_search_strategie    s.h:8,\n             from   /opt/ceemple/include/dlib/dlib/optimization/optimization.h:9,\n             from /opt/ceemple/include/dlib/dlib/optimization.h:6,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:1:\n /opt/ceemple/include/dlib/dlib/enable_if.h:71:10: error: previous  definition of \u2018struct boost::lazy_disable_if&lt;Cond, T&gt;\u2019\nstruct lazy_disable_if : public lazy_disable_if_c&lt;Cond::value, T&gt; {};\n       ^\nIn file included from  /usr/include/boost/type_traits/is_copy_constructible.hpp:18:0,\n             from /usr/include/boost/type_traits.hpp:53,\n             from /usr/include/boost/multi_array.hpp:30,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:5:\n/usr/include/boost/noncopyable.hpp:23:9: error: redefinition of  \u2018class boost::noncopyable_::noncopyable\u2019\nclass noncopyable\n      ^\nIn file included from /opt/ceemple/include/dlib/dlib/algs.h:77:0,\n             from  /opt/ceemple/include/dlib/dlib/matrix/matrix_exp.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix/matrix.h:6,\n             from /opt/ceemple/include/dlib/dlib/matrix.h:6,\n             from  /opt/ceemple/include/dlib/dlib/optimization/optimization_search_strategie    s.h:8,\n             from  /opt/ceemple/include/dlib/dlib/optimization/optimization.h:9,\n             from /opt/ceemple/include/dlib/dlib/optimization.h:6,\n             from  /opt/ceemple/workspaceCeemple/user/Interbank_lending_linux/main.cpp:1:\n/opt/ceemple/include/dlib/dlib/noncopyable.h:18:15: error: previous  definition of \u2018class boost::noncopyable_::noncopyable\u2019\n     class noncopyable\n           ^\n</code></pre>\n\n<p>There are a succession of very similar warnings after this.  Somehow or another including both libraries interferes with the template substitution on the part of the one library. So any help will be a greatly appreciated. Thank-you in advance. </p>\n"}, {"tags": ["c++", "bitmap", "clipboard", "alpha", "dib"], "answers": [{"comments": [{"owner": {"reputation": 1501, "user_id": 1502810, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2785f67e7be660cffe1c9d321e0bad69?s=128&d=identicon&r=PG", "display_name": "celticminstrel", "link": "https://stackoverflow.com/users/1502810/celticminstrel"}, "edited": false, "score": 0, "creation_date": 1434596298, "post_id": 30903711, "comment_id": 49849725, "body": "Thanks! With a minor tweak, that seems to work pretty well (I just had to reverse the order of the four mask parameters). Unfortunately, it appears that many programs don&#39;t read the alpha channel when getting data from the clipboard (and GIMP doesn&#39;t even recognize there&#39;s an image). Oh well!"}, {"owner": {"reputation": 1501, "user_id": 1502810, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2785f67e7be660cffe1c9d321e0bad69?s=128&d=identicon&r=PG", "display_name": "celticminstrel", "link": "https://stackoverflow.com/users/1502810/celticminstrel"}, "edited": false, "score": 0, "creation_date": 1434596742, "post_id": 30903711, "comment_id": 49849827, "body": "However, I can copy-paste with alpha from Paint.net to GIMP, so there must be a way. I&#39;ll have to keep looking."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1434582234, "last_edit_date": 1434582234, "creation_date": 1434580926, "answer_id": 30903711, "question_id": 30903416, "link": "https://stackoverflow.com/questions/30903416/how-can-i-put-a-device-independent-bitmap-into-the-windows-clipboard-using-just/30903711#30903711", "title": "How can I put a device-independent bitmap into the Windows clipboard using just direct WinAPI? (No MFC or other wrappers)", "body": "<p>You cannot pass an <code>HBITMAP</code> to <code>SetClipboardData()</code>.  It requires an <code>HGLOBAL</code> from <code>GlobalAlloc()</code> instead.  That is why <code>SetClipboardData()</code> is failing with an <code>ERROR_INVALID_HANDLE</code> error.</p>\n\n<p>You need to put your <code>BITMAPV5HEADER</code> and pixel data directly into the allocated <code>HGLOBAL</code> and put it as-is onto the clipboard, forget using <code>CreateDIBSection()</code> at all:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff729168.aspx\" rel=\"nofollow\">Standard Clipboard Formats</a></p>\n\n<blockquote>\n  <p>CF_DIBV5<br>\n  17<br> \n  A memory object containing a BITMAPV5HEADER structure followed by the bitmap color space information and the bitmap bits.</p>\n</blockquote>\n\n<p>Try something more like this:</p>\n\n<pre><code>void printErr(const char *msg)\n{\n    char str[256] = {0};\n    FormatMessageA(FORMAT_MESSAGE_FROM_SYSTEM, NULL, GetLastError(), 0, str, 255, NULL);\n    std::cerr &lt;&lt; msg &lt;&lt; \": \" &lt;&lt; str &lt;&lt; std::endl;\n}\n\n...\n\nDWORD size_pixels = img_width * img_height * 4;\n\nHGLOBAL hMem = GlobalAlloc(GHND, sizeof(BITMAPV5HEADER) + size_pixels);\nif (!hMem)\n{\n    printErr(\"Error allocating memory for bitmap data\");\n    return;\n}\n\nBITMAPV5HEADER* hdr = (BITMAPV5HEADER*) GlobalLock(hMem);\nif (!hdr)\n{\n    printErr(\"Error accessing memory for bitmap data\");\n    GlobalFree(hMem);\n    return;\n}\n\nhdr-&gt;bV5Size = sizeof(BITMAPV5HEADER);\nhdr-&gt;bV5Width = img_width;\nhdr-&gt;bV5Height = -img_height;\nhdr-&gt;bV5Planes = 1;\nhdr-&gt;bV5BitCount = 32;\nhdr-&gt;bV5Compression = BI_BITFIELDS;\nhdr-&gt;bV5SizeImage = size_pixels;\nhdr-&gt;bV5RedMask   = 0xff000000;\nhdr-&gt;bV5GreenMask = 0x00ff0000;\nhdr-&gt;bV5BlueMask  = 0x0000ff00;\nhdr-&gt;bV5AlphaMask = 0x000000ff;\n\n// img_pixels_ptr is a unsigned char* to the pixels in non-planar RGBA format\nCopyMemory(hdr+1, img_pixels_ptr, size_pixels);\nGlobalUnlock(hMem);\n\nif (!OpenClipboard(hwnd))\n{\n    printErr(\"Error opening clipboard\");\n}\nelse\n{\n    if (!EmptyClipboard())\n        printErr(\"Error emptying clipboard\");\n\n    else if (!SetClipboardData(CF_DIBV5, hMem))\n        printErr(\"Error setting bitmap on clipboard\");\n\n    else\n        hMem = NULL; // clipboard now owns the memory\n\n    CloseClipboard();\n}\n\nif (hMem)\n    GlobalFree(hMem);\n</code></pre>\n"}], "owner": {"reputation": 1501, "user_id": 1502810, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2785f67e7be660cffe1c9d321e0bad69?s=128&d=identicon&r=PG", "display_name": "celticminstrel", "link": "https://stackoverflow.com/users/1502810/celticminstrel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 2, "accepted_answer_id": 30903711, "answer_count": 1, "score": 0, "last_activity_date": 1434582234, "creation_date": 1434579571, "question_id": 30903416, "link": "https://stackoverflow.com/questions/30903416/how-can-i-put-a-device-independent-bitmap-into-the-windows-clipboard-using-just", "title": "How can I put a device-independent bitmap into the Windows clipboard using just direct WinAPI? (No MFC or other wrappers)", "body": "<p>I've been trying to get this to work for awhile now, but I can't seem to figure it out, and hours of Googling has yet to reveal any useful results.</p>\n\n<p>I have an array of 32-bit pixels in RGBA order, and I want to create a device-independent bitmap from them and place it on the clipboard using <code>SetClipboardData(CF_DIBV5, dib)</code> or similar (ideally, I want to preserve the alpha channel). Registering a custom clipboard type is not an option, since the point of putting it on the clipboard is so that it can be pasted into another program. Bonus points if I don't have to manually convert my pixel data into some other format (such as planar BGRA).</p>\n\n<p>My current code goes like this (it's all within a set_clipboard_img function):</p>\n\n<pre><code>if(!OpenClipboard(hwnd)) return;\nBITMAPV5HEADER* info = (BITMAPV5HEADER*) GlobalAlloc(GMEM_MOVEABLE, sizeof(BITMAPV5HEADER));\ninfo-&gt;bV5Size = sizeof(BITMAPV5HEADER);\ninfo-&gt;bV5Width = img_width;\ninfo-&gt;bV5Height = -img_height;\ninfo-&gt;bV5Planes = 1; // The docs say this is the only valid value here.\ninfo-&gt;bV5BitCount = 32;\ninfo-&gt;bV5Compression = BI_BITFIELDS;\ninfo-&gt;bV5SizeImage = img_width * img_height * 4;\ninfo-&gt;bV5RedMask   = 0xff000000;\ninfo-&gt;bV5GreenMask = 0x00ff0000;\ninfo-&gt;bV5BlueMask  = 0x0000ff00;\ninfo-&gt;bV5AlphaMask = 0x000000ff;\nunsigned char* buf;\n// One of the sources I found said that I can pass a BITMAPV5HEADER in place of the BITMAPINFO, hence the first reinterpret_cast.\nHBITMAP dib = CreateDIBSection(NULL, reinterpret_cast&lt;BITMAPINFO*&gt;(info), DIB_RGB_COLORS, reinterpret_cast&lt;void**&gt;(&amp;buf), NULL, 0);\nif(dib == NULL) {\n    CloseClipboard();\n    return;\n}\n// img_pixels_ptr is a unsigned char* to the pixels in non-planar RGBA format\nstd::copy_n(img_pixels_ptr, info-&gt;bV5SizeImage, buf);\nEmptyClipboard();\nauto result = SetClipboardData(CF_DIBV5, dib);\nif(result == NULL) {\n    char str[256];\n    str[255] = 0;\n    FormatMessageA(FORMAT_MESSAGE_FROM_SYSTEM, NULL, GetLastError(), 0, str, 255, NULL);\n    std::cerr &lt;&lt; \"Error setting clipboard: \" &lt;&lt; str &lt;&lt; std::endl;\n    // Here I get \"handle not valid\". I have no idea _why_ it's not valid, though.\n}\nCloseClipboard();\n</code></pre>\n\n<p>Ultimately, I'll also need to be able to reverse the process (getting a potentially-transparent bitmap off the clipboard), but one thing at a time.</p>\n"}, {"tags": ["c++", "system-verilog", "system-verilog-dpi"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1434582445, "post_id": 30903292, "comment_id": 49846564, "body": "Unrelated comment. <code>return (char*)ss.str().c_str();</code> You un-const a const pointer with a cast. Don&#39;t do this. It almost always ends badly. That pointer was made const for a reason. Fortunately you un-const the sucker and then return it as const."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1434582700, "post_id": 30903292, "comment_id": 49846618, "body": "On topic, you return a pointer to data that is inside a local variable. Once that stringstream is out of scope, all bets are off as to what that pointer you have is pointing to. Recommend returning the string: <code>string print_input_dpi(int w, int h, int p, ......int mtail)</code> and <code>return ss.str();</code>"}], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 3, "last_activity_date": 1434650382, "last_edit_date": 1434650382, "creation_date": 1434583127, "answer_id": 30904074, "question_id": 30903292, "link": "https://stackoverflow.com/questions/30903292/systemverilog-dpi-returning-string-from-c-to-verilog-ascii-charaters-at-the/30904074#30904074", "title": "SystemVerilog DPI returning string from C++ to verilog - ASCII charaters at the end?", "body": "<p>The string stream you so lovingly built went out of scope at the end of the function and was returned to the bits from whence it came. Those bits are being reused and overwritten, probably by the cout printing said bits, resulting in corruption. To be honest, you got off lucky. It could have looked like it was working fine and crashed a week from next Tuesday.</p>\n\n<pre><code>const char* print_input_dpi(int w, int h, int p, ......int mtail)\n{\n    std::stringstream ss; //&lt;&lt; local variable created here.\n    ...    \n    return (char*)ss.str().c_str();\n} // out of scope and destroyed here, so the returned pointer now points to god knows what.\n</code></pre>\n\n<p>Quick fix:</p>\n\n<pre><code>string print_input_dpi(int w, int h, int p, ......int mtail)\n{\n    std::stringstream ss; //&lt;&lt; local variable.\n    ...    \n    return ss.str();\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 7582549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/963efc99daf56e43d4b5aa64d290f903?s=128&d=identicon&r=PG&f=1", "display_name": "David Plumb", "link": "https://stackoverflow.com/users/7582549/david-plumb"}, "is_accepted": false, "score": 0, "last_activity_date": 1487366025, "creation_date": 1487366025, "answer_id": 42307490, "question_id": 30903292, "link": "https://stackoverflow.com/questions/30903292/systemverilog-dpi-returning-string-from-c-to-verilog-ascii-charaters-at-the/42307490#42307490", "title": "SystemVerilog DPI returning string from C++ to verilog - ASCII charaters at the end?", "body": "<p>The string stream went out of scope at the end of the function and the associated memory was overwritten. The correct fix that also maintains compatibility of your function with the SV DPI is simply to change the lifetime of the string stream:</p>\n\n<pre><code>std::stringstream ss; // global variable\nconst char* print_input_dpi(int w, int h, int p, ......int mtail)\n{\n    ...\n    return ss.str().c_str();\n}\n</code></pre>\n"}], "owner": {"reputation": 1949, "user_id": 749632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84b66b933a86333dcf1178eeca465efc?s=128&d=identicon&r=PG", "display_name": "user749632", "link": "https://stackoverflow.com/users/749632/user749632"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1338, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1487366025, "creation_date": 1434578930, "last_edit_date": 1478641626, "question_id": 30903292, "link": "https://stackoverflow.com/questions/30903292/systemverilog-dpi-returning-string-from-c-to-verilog-ascii-charaters-at-the", "title": "SystemVerilog DPI returning string from C++ to verilog - ASCII charaters at the end?", "body": "<p>I am returning a string from C function to SystemVerilog using DPI.</p>\n\n<pre><code>const char* print_input_dpi(int w, int h, int p, ......int mtail){\nstd::stringstream ss;\n\nss&lt;&lt;\"w=\"&lt;&lt;std::hex&lt;&lt;w&lt;&lt;\" \";\nss&lt;&lt;\"h=\"&lt;&lt;std::hex&lt;&lt;h&lt;&lt;\" \";\nss&lt;&lt;\"p=\"&lt;&lt;std::hex&lt;&lt;p&lt;&lt;\" \";\n...\nss&lt;&lt;\"mtail=\"&lt;&lt;std::hex&lt;&lt;mtail&lt;&lt;\" \";\n\nreturn (char*)ss.str().c_str();\n}\n</code></pre>\n\n<p>On the SystemVerilog  side:</p>\n\n<pre><code>string formatted_string;\nalways @* begin\n  if(en) begin\n    formatted_string = print_input_dpi(w,h,p,...mtail)l  \nend\n\n...\nalways @(nededge sclk) begin\n   $fdisplayb(log_file, \"\", formatted_string)\nend\n</code></pre>\n\n<p>Result:\nsometimes the result is like this:</p>\n\n<pre><code>w=1, h=3f, p=2f, ...mtail=0\u00e3\n</code></pre>\n\n<p>sometimes i get this:</p>\n\n<pre><code>w=1, h=3f, p=2f, ...mtail\u00ba\n</code></pre>\n\n<p>I checked the waveforms on the verilog side and they is NO X propagation.\nCan you please help me understand why I get this error.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 414, "user_id": 1733277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4dfecdc3ae2923f3ffd8f8e0af5e05d?s=128&d=identicon&r=PG", "display_name": "Brandon Haston", "link": "https://stackoverflow.com/users/1733277/brandon-haston"}, "edited": false, "score": 1, "creation_date": 1434580413, "post_id": 30903195, "comment_id": 49845937, "body": "Concerning your first question, the time to pause is not guaranteed to be exactly the time you set it for (in this case, 1 second). The thread will block for <i>at least</i> 1 second, maybe a little more. Consult <a href=\"http://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/thread/sleep_for</a> for additional details."}], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1434582148, "creation_date": 1434582148, "answer_id": 30903917, "question_id": 30903195, "link": "https://stackoverflow.com/questions/30903195/c-threads-execution-time-and-executing-thread-in-another-thread/30903917#30903917", "title": "c++ threads execution time and executing thread in another thread", "body": "<p>First question is well answered by Brandon Haston's comment.</p>\n\n<p>Answer to second question doesn't fit in a comment. </p>\n\n<pre><code>threads[i] = thread(...);\n</code></pre>\n\n<p>means that a std::thread has been created and its representative std::thread object has been assigned to a slot in your std::thread array. This raises a question I'm going to have to look into on my own later when I have a compiler to play with: What happened to the thread that was just overwritten?</p>\n\n<p>Anyway, that new thread isn't inside another thread. Threads don't have any concept of ownership mutual. A process owns threads, but threads don't. A thread can start another thread. For example, </p>\n\n<pre><code>void pause_thread(int n){\n    this_thread::sleep_for(chrono::seconds(n));\n    cout &lt;&lt; \"pause of \" &lt;&lt; n &lt;&lt; \" seconds ended\\n\";\n    if (! cows_are_home)\n    {\n        thread newthread(pause_thread, 1);\n        newthread.detach();\n    }\n}\n</code></pre>\n\n<p>Each new thread will wait about 1 second, then create a thread which will wait a second and create another thread, and this will go on until the cows come home.</p>\n"}], "owner": {"reputation": 49, "user_id": 4998798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be337add6e9bcf14dbcc741d145f75c7?s=128&d=identicon&r=PG&f=1", "display_name": "Almir", "link": "https://stackoverflow.com/users/4998798/almir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 30903917, "answer_count": 1, "score": 0, "last_activity_date": 1434582148, "creation_date": 1434578619, "question_id": 30903195, "link": "https://stackoverflow.com/questions/30903195/c-threads-execution-time-and-executing-thread-in-another-thread", "title": "c++ threads execution time and executing thread in another thread", "body": "<p>I have a code, and i'm testing how much time will take an executing of 10 threads.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n#include &lt;time.h&gt;\nusing namespace std;\n\nvoid pause_thread(int n){\n    this_thread::sleep_for(chrono::seconds(n));\n    cout &lt;&lt; \"pause of \" &lt;&lt; n &lt;&lt; \" seconds ended\\n\";\n}\n\nint main(){\n    clock_t EndTime = clock();\n    thread threads[10];\n\n    cout &lt;&lt; \"Spawning 10 threads...\\n\";\n    for (int i = 0; i&lt;10; ++i)\n        threads[i] = thread(pause_thread, i + 1);\n\n    cout &lt;&lt; \"Done spawning threads. Now waiting for them to join:\\n\";\n    for (int i = 0; i&lt;10; ++i)\n        threads[i].join();\n\n    cout &lt;&lt; \"All threads joined!\\n\";\n    cout &lt;&lt; \"==================================================\\n\";\n    cout &lt;&lt; \"Time of executing threads: \" &lt;&lt; (double)(clock() - EndTime) / CLOCKS_PER_SEC &lt;&lt; endl;\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>The output is this:</p>\n\n<pre><code>Spawning 10 threads...\nDone spawning threads. Now waiting for them to join:\npause of 1 seconds ended\npause of 2 seconds ended\npause of 3 seconds ended\npause of 4 seconds ended\npause of 5 seconds ended\npause of 6 seconds ended\npause of 7 seconds ended\npause of 8 seconds ended\npause of 9 seconds ended\npause of 10 seconds ended\nAll threads joined!\n==================================================\nTime of executing threads: 10.041\n</code></pre>\n\n<p><strong>First question is:</strong> Why execution of the program takes 10,041 seconds if the pause between each thread is 1 second? What happened with the program and it took additional 0.041s on executing?\n<strong>Second question is:</strong> Is this right way to execute thread in another thread?</p>\n\n<pre><code>threads[i] = thread(...);\n</code></pre>\n\n<p>Is this mean that thread is in the thread? </p>\n\n<p>If not, how can it be done (to execute thread in another thread)?</p>\n"}, {"tags": ["c++", "c", "linux", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4337738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40bea2e57d3b2dd21d1bbd6a451ccc86?s=128&d=identicon&r=PG&f=1", "display_name": "iulian", "link": "https://stackoverflow.com/users/4337738/iulian"}, "edited": false, "score": 0, "creation_date": 1434650837, "post_id": 30908246, "comment_id": 49882177, "body": "thanks alot. It works, but It worked in the past with my command too."}], "tags": [], "owner": {"reputation": 1923, "user_id": 3033441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5128fcd3a14587660ea0cb737aa54143?s=128&d=identicon&r=PG&f=1", "display_name": "lakshayg", "link": "https://stackoverflow.com/users/3033441/lakshayg"}, "is_accepted": true, "score": 1, "last_activity_date": 1434609834, "creation_date": 1434609834, "answer_id": 30908246, "question_id": 30903180, "link": "https://stackoverflow.com/questions/30903180/error-using-already-compiled-version-of-opencv/30908246#30908246", "title": "error using already compiled version of openCV", "body": "<p>You have not linked the executable against several libraries that are required by the program</p>\n\n<p>Try using this:</p>\n\n<pre><code>g++ -lpthread `pkg-config opencv --libs` -I/usr/local/include/ -lraspicam -lraspicam_cv -L/opt/vc/lib -lmmal -lmmal_core -lmmal_util -I/usr/include -lwiringPi test3.cpp -o test3 \n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4337738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40bea2e57d3b2dd21d1bbd6a451ccc86?s=128&d=identicon&r=PG&f=1", "display_name": "iulian", "link": "https://stackoverflow.com/users/4337738/iulian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 0, "accepted_answer_id": 30908246, "answer_count": 1, "score": 0, "last_activity_date": 1614253836, "creation_date": 1434578571, "last_edit_date": 1434579804, "question_id": 30903180, "link": "https://stackoverflow.com/questions/30903180/error-using-already-compiled-version-of-opencv", "title": "error using already compiled version of openCV", "body": "<p>I've used the already compiled version of openCV for Raspberry Pi. <a href=\"https://github.com/Nolaan/libopencv_24\" rel=\"nofollow\">link for anyone who is interested</a></p>\n\n<p>After trying to compile using this command line \n<code>g++ test3.cpp -o test3 -I/usr/local/include/ -lraspicam -lraspicam_cv -L/opt/vc/lib -lmmal -lmmal_core -lmmal_util -I/usr/include -lopencv_core -lopencv_highgui -lopencv_imgproc -lwiringPi -lpthread</code></p>\n\n<p>I get the following error lines. </p>\n\n<blockquote>\n  <p>//usr/local/lib/libopencv_stitching.so.2.4: undefined reference to `cv::gpu::ensureSizeIsEnough(int, int, int, cv::gpu::GpuMat&amp;)'</p>\n  \n  <p>//usr/local/lib/libopencv_calib3d.so.2.4: undefined reference to `cv::parallel_for_(cv::Range const&amp;, cv::ParallelLoopBody const&amp;, double)'</p>\n  \n  <p>//usr/local/lib/libopencv_calib3d.so.2.4: undefined reference to `typeinfo for cv::ParallelLoopBody'</p>\n  \n  <p>//usr/local/lib/libopencv_calib3d.so.2.4: undefined reference to `cv::Mutex::unlock()'</p>\n  \n  <p>//usr/local/lib/libopencv_calib3d.so.2.4: undefined reference to `cv::Mutex::lock()'</p>\n  \n  <p>//usr/local/lib/libopencv_ocl.so.2.4: undefined reference to cv::TLSDataContainer::getData() const</p>\n  \n  <p>//usr/local/lib/libopencv_features2d.so.2.4: undefined reference to cv::AlgorithmInfo::addParam(cv::Algorithm&amp;, char const*, unsigned char&amp;, bool, unsigned char (cv::Algorithm::<em>)(), void (cv::Algorithm::</em>)(unsigned char), std::basic_string, std::allocator > const&amp;)</p>\n  \n  <p>//usr/local/lib/libopencv_features2d.so.2.4: undefined reference to `cv::AlgorithmInfo::addParam(cv::Algorithm&amp;, char const*, float&amp;, bool, float (cv::Algorithm::<em>)(), void (cv::Algorithm::</em>)(float), std::basic_string, std::allocator > const&amp;)'</p>\n  \n  <p>//usr/local/lib/libopencv_features2d.so.2.4: undefined reference to `cv::AlgorithmInfo::addParam(cv::Algorithm&amp;, char const*, short&amp;, bool, int (cv::Algorithm::<em>)(), void (cv::Algorithm::</em>)(int), std::basic_string, std::allocator > const&amp;)'</p>\n  \n  <p>//usr/local/lib/libopencv_calib3d.so.2.4: undefined reference to `cv::Mutex::Mutex()'</p>\n  \n  <p>//usr/local/lib/libopencv_ocl.so.2.4: undefined reference to `cv::TLSDataContainer::TLSDataContainer()'</p>\n  \n  <p>//usr/local/lib/libopencv_calib3d.so.2.4: undefined reference to `cv::ParallelLoopBody::~ParallelLoopBody()'</p>\n  \n  <p>//usr/local/lib/libopencv_calib3d.so.2.4: undefined reference to `cv::Mutex::~Mutex()'</p>\n  \n  <p>//usr/local/lib/libopencv_ocl.so.2.4: undefined reference to `cv::TLSDataContainer::~TLSDataContainer()'\n  collect2: ld returned 1 exit status</p>\n</blockquote>\n"}, {"tags": ["c++", "visual-studio-2010", "sorting", "cuda", "thrust"], "comments": [{"owner": {"reputation": 10644, "user_id": 722294, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/93c0ad362f097b52bf81c30d116e7319?s=128&d=identicon&r=PG", "display_name": "Jared Hoberock", "link": "https://stackoverflow.com/users/722294/jared-hoberock"}, "edited": false, "score": 2, "creation_date": 1434615985, "post_id": 30903109, "comment_id": 49857912, "body": "Change the filename extension to <code>.cu</code> and compile with <code>nvcc</code>."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 2, "creation_date": 1434623491, "post_id": 30903109, "comment_id": 49862989, "body": "Once you fix the issue pointed out by Jared, you will need to change this line, it won&#39;t compile: <code>thrust::sort(h_vec.begin(), d_vec.end());</code>, probably simplest just to delete it, as it&#39;s not doing anything useful for the given program.  If you want to retain it, change the <code>d_vec.end()</code> to <code>h_vec.end()</code>."}, {"owner": {"reputation": 1, "user_id": 5021548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ce95071a2a1326aad1eba85db1aa97d?s=128&d=identicon&r=PG&f=1", "display_name": "Bob D", "link": "https://stackoverflow.com/users/5021548/bob-d"}, "edited": false, "score": 0, "creation_date": 1434981605, "post_id": 30903109, "comment_id": 49994060, "body": "After thinking about the build process, the solution should have been obvious, just change the extension of the file name  to .cu (Thanks Jared). Thanks for pointing out the type-o&#39;s too."}], "answers": [{"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 4, "last_activity_date": 1434747048, "last_edit_date": 1434747048, "creation_date": 1434578837, "answer_id": 30903260, "question_id": 30903109, "link": "https://stackoverflow.com/questions/30903109/how-do-you-build-the-example-cuda-thrust-device-sort/30903260#30903260", "title": "How do you build the example CUDA Thrust device sort?", "body": "<p>As @JaredHoberock pointed out, probably the key issue is that you are trying to compile a .cpp file.  You need to rename that file to .cu and also make sure it is being compiled by nvcc.</p>\n\n<p>After you fix that, you will probably run into another issue. This is not correct and will not compile:</p>\n\n<pre><code>thrust::sort(h_vec.begin(), d_vec.end());\n</code></pre>\n\n<p>The first parameter here is the start of the range to sort, the second parameter is the end of the range.  Your first parameter identifies the start of the range as being on the host, and the end of the range as being on the device.  That will trigger a compile error.</p>\n\n<p>Change it to:</p>\n\n<pre><code>thrust::sort(h_vec.begin(), h_vec.end());\n</code></pre>\n\n<p>and your code compiles and runs successfully for me.</p>\n\n<p>In your above example, this line is completely useless.  It is not needed to sort the data, and you are overwriting the result anyway here:</p>\n\n<pre><code>thrust::copy(d_vec.begin(), d_vec.end(), h_vec.begin());\n</code></pre>\n\n<p>(marking CW as the key issue was pointed out by Jared Hoberock)</p>\n"}], "owner": {"reputation": 1, "user_id": 5021548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ce95071a2a1326aad1eba85db1aa97d?s=128&d=identicon&r=PG&f=1", "display_name": "Bob D", "link": "https://stackoverflow.com/users/5021548/bob-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2376, "favorite_count": 0, "accepted_answer_id": 30903260, "answer_count": 1, "score": 0, "last_activity_date": 1434747048, "creation_date": 1434578213, "question_id": 30903109, "link": "https://stackoverflow.com/questions/30903109/how-do-you-build-the-example-cuda-thrust-device-sort", "title": "How do you build the example CUDA Thrust device sort?", "body": "<p>I am trying to build and run the Thrust example code in Visual Studio 2010 with the latest version (7.0) of CUDA and the THURST install that comes with it. I cannot get the example code to build and run. </p>\n\n<p>By eliminating parts of the code, I found the problem to be with the thrust::sort(..) call. Host vectors work great, but device vectors produce the following compile error:</p>\n\n<p><em>1>c:\\program files\\nvidia gpu computing toolkit\\cuda\\v7.0\\include\\thrust\\system\\cuda\\detail\\sort.inl(203): error C2027: use of undefined type 'thrust::detail::STATIC_ASSERTION_FAILURE' </em></p>\n\n<p>This is the example code I'm using that won't compile which is largely out of the CUDA trust example at <a href=\"https://developer.nvidia.com/Thrust\" rel=\"nofollow\">https://developer.nvidia.com/Thrust</a> </p>\n\n<pre><code>#include &lt;thrust/host_vector.h&gt;\n#include &lt;thrust/device_vector.h&gt;\n#include &lt;thrust/generate.h&gt;\n#include &lt;thrust/sort.h&gt;\n#include &lt;thrust/copy.h&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstdlib&gt;\n#include &lt;time.h&gt;\n\nint main(void)\n{\n   // generate 32M random numbers serially\n   thrust::host_vector&lt;int&gt; h_vec(32 &lt;&lt; 20);\n   std::generate(h_vec.begin(), h_vec.end(), rand);\n\n   // transfer data to the device\n   thrust::device_vector&lt;int&gt; d_vec = h_vec;\n\n   // sort data on the device (This breaks the compile)\n   thrust::sort(d_vec.begin(), d_vec.end());\n\n   // sort data on the host (This works just fine)\n   thrust::sort(h_vec.begin(), d_vec.end());\n\n   // transfer data back to host\n   thrust::copy(d_vec.begin(), d_vec.end(), h_vec.begin());\n\n   return 0;\n}\n</code></pre>\n\n<p>Playing around I found that if you comment out the line that uses the device vector: </p>\n\n<pre><code>  // thrust::sort(d_vec.begin(), d_vec.end()); \n</code></pre>\n\n<p>but leave the line that uses the host vector: </p>\n\n<pre><code>  thrust::sort(h_vec.begin(), d_vec.end()); \n</code></pre>\n\n<p>it compiles and runs just fine, though the sort seems to be running on the host.</p>\n\n<p>How do I get the example code to compile and run so the sort will take place on the device vector and not the host vector?</p>\n\n<p>My system configuration includes:</p>\n\n<ul>\n<li>Visual Studio 2010 / SP1 installed</li>\n<li>Windows 7 pro, 64bit</li>\n<li>CUDA 7.0 Development kit</li>\n<li>NVIDA Quadro K4000 with recent drivers</li>\n</ul>\n"}, {"tags": ["c++", "algorithm", "data-structures", "disjoint-sets", "disjoint-union"], "answers": [{"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 4, "last_activity_date": 1570297555, "last_edit_date": 1570297555, "creation_date": 1434578670, "answer_id": 30903212, "question_id": 30903098, "link": "https://stackoverflow.com/questions/30903098/find-the-number-of-disjoint-sets/30903212#30903212", "title": "Find the number of disjoint sets", "body": "<p>If all you need to know is the <em>number</em> of disjoint sets and not what they are, one option would be to add in a counter variable to your data structure counting how many disjoint sets there are. Initially, there are <em>n</em> of them, one per individual element. Every time you perform a union operation, if the two elements don't have the same representative, then you know you're merging two disjoint sets into one, so you can decrement the counter. That would look something like this:</p>\n\n<pre><code>if (pu != pv){ //if not in the same set.\n    numDisjointSets--;  // &lt;--- Add this line\n    mst.push_back(graph[i]);\n    total += graph[i].first;\n    parent[pu] = parent[pv]; // create the link between these two sets\n}\n</code></pre>\n\n<p>Hope this helps!</p>\n"}, {"comments": [{"owner": {"reputation": 2622, "user_id": 1458328, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/39e31e9db1234c2e55009330efc52acd?s=128&d=identicon&r=PG", "display_name": "Saurabh Rana", "link": "https://stackoverflow.com/users/1458328/saurabh-rana"}, "edited": false, "score": 0, "creation_date": 1598645446, "post_id": 30903227, "comment_id": 112536958, "body": "Is this approach any different than keeping the count of the total number of union operations? Say, count=1 initially and we increment count every time we call union."}], "tags": [], "owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "is_accepted": true, "score": 7, "last_activity_date": 1434580098, "last_edit_date": 1434580098, "creation_date": 1434578717, "answer_id": 30903227, "question_id": 30903098, "link": "https://stackoverflow.com/questions/30903098/find-the-number-of-disjoint-sets/30903227#30903227", "title": "Find the number of disjoint sets", "body": "<p>Each union operaiton on two items <code>a,b</code> in Disjoint Set Data Structure has two possible scenarios:</p>\n\n<ol>\n<li>You tried to unite items from the same set. In this case, nothing is done, and number of disjoint sets remain the same.</li>\n<li>You united items from two different sets, so you basically converged two sets into one - effectively decreasing the number of disjoint sets by exactly one.</li>\n</ol>\n\n<p>From this, we can conclude that it is easy to find the number of disjoint sets at every moment by tracking the number of unions of type (2) from the above.\n<br>If we denote this number by <code>succ_unions</code>, then the total number of sets at each point is <code>number_of_initial_sets - succ_unions</code>.</p>\n"}], "owner": {"reputation": 1433, "user_id": 3232918, "user_type": "registered", "accept_rate": 31, "profile_image": "https://graph.facebook.com/100003953877598/picture?type=large", "display_name": "nitte93user3232918", "link": "https://stackoverflow.com/users/3232918/nitte93user3232918"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5479, "favorite_count": 2, "accepted_answer_id": 30903227, "answer_count": 2, "score": 4, "last_activity_date": 1570297555, "creation_date": 1434578178, "last_edit_date": 1435075246, "question_id": 30903098, "link": "https://stackoverflow.com/questions/30903098/find-the-number-of-disjoint-sets", "title": "Find the number of disjoint sets", "body": "<p>For those not familiar with Disjoint-set data structure.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Disjoint-set_data_structure\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Disjoint-set_data_structure</a></p>\n\n<p>I'm trying to find the no. of groups of friends from the given sets of friends and their relationships. Of course, there is no doubt that this could easily be implemented using BFS/DFS. But I choose to use disjoint set, I also tend to find the friend group the person belongs, etc, and disjoint-set certainly sounds to be appropriate for that case.</p>\n\n<p>I have implemented the Disjoint set data structure, Now I need to find the number of disjoint sets it contains(which will give me the No. of groups).</p>\n\n<p>Now, I'm stuck at implementing on how to find the No. of disjoint-sets efficiently, as the number of friends can be as large as 1 00 00 0. </p>\n\n<p>Options that I think should work.</p>\n\n<ol>\n<li><p>Attach the new set at the back of the original, and destroy the old set.</p></li>\n<li><p>Change their parents of each element at every union.</p></li>\n</ol>\n\n<p>But since the number of friends are huge, I'm not sure if that's the correct approach, Perhaps if there is any other efficient way or should I go ahead and implement any of the above.  </p>\n\n<p>Here is my code for additional details.(I'have not implemented the counting disjoint-set here)</p>\n\n<pre><code>//disjoint set concept \n\n//https://www.topcoder.com/community/data-science/data-science-tutorials/disjoint-set-data-structures/\n// initially all the vertices are takes as single set and they are their own representative.\n// next we see, compare two vertices, if they have same parent(representative of the set), we leave it.\n// if they don't we merge them it one set.\n// finally we get different disjoint sets.\n\n#includes ...\nusing namespace std;\n\n#define edge pair&lt;int, int&gt;\nconst int max 1000000;\nvector&lt;pair&lt;int, edge &gt; &gt; graph, mst;\nint N, M;\nint parent[max];\n\nint findset(int x, int* parent){\n //find the set representative.\n    if(x != parent[x]){ \n        parent[x] = findset(parent[x], parent);\n    }\n\n    return parent[x];\n}\nvoid disjoints(){\n    for(int i=0; i&lt;M; i++){\n        int pu = findset(graph[i].second.first, parent);\n        int pv = findset(graph[i].second.second, parent);\n\n        if(pu != pv){ //if not in the same set.\n            mst.push_back(graph[i]);\n            total += graph[i].first;\n            parent[pu] = parent[pv]; // create the link between these two sets\n        }\n    }\n}\n void noOfDisjoints(){\n  //returns the No. of disjoint set.\n }\nvoid reset(){\n    for(int i=0; i&lt;N; i++){\n        parent[i] = i;\n    }\n}\n\nint main() {\n            cin&gt;&gt;N&gt;&gt;M; // No. of friends and M edges\n        int u,v,w;    // u= source, v= destination, w= weight(of no use here).  \n        reset();\n        for(int i =0; i&lt;M ;i++){\n            cin&gt;&gt;u&gt;&gt;v&gt;&gt;w;\n            graph.push_back(pair&lt;int, edge&gt;(w,edge(u,v)));\n        }\n        disjoints();\n        print();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "sql", "sql-server"], "comments": [{"owner": {"reputation": 1106495, "user_id": 1144035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e514b017977ebf742a418cac697d8996?s=128&d=identicon&r=PG", "display_name": "Gordon Linoff", "link": "https://stackoverflow.com/users/1144035/gordon-linoff"}, "edited": false, "score": 0, "creation_date": 1434578243, "post_id": 30903076, "comment_id": 49845055, "body": "You can repeat the columns for each column and produce the numbers in one pass through the table."}, {"owner": {"reputation": 436, "user_id": 4879550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ad624e39616c80b3829235076e9cfb?s=128&d=identicon&r=PG", "display_name": "TheMadDBA", "link": "https://stackoverflow.com/users/4879550/themaddba"}, "edited": false, "score": 0, "creation_date": 1434578486, "post_id": 30903076, "comment_id": 49845170, "body": "Using PIVOT in SQL Server doesn&#39;t require using a numeric column as the non pivot column as far as I know."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 2647029, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/21e7d5d9cb9a33228d9271d60eff3037?s=128&d=identicon&r=PG", "display_name": "Ryan Buton", "link": "https://stackoverflow.com/users/2647029/ryan-buton"}, "edited": false, "score": 0, "creation_date": 1434634996, "post_id": 30905076, "comment_id": 49871342, "body": "great @Joshua-f. I had to change &quot;nvarchar(50) = &#39;table1&#39;;&quot; to &quot;nvarchar(50) = &#39;[myProject].[dbo].[table1]&#39;;&quot; to get the Execute statement to work. It turns out that the first col is a &#39;datetime&#39; field so I will have to exclude that column; since the Avg() does not work. Also, I said one thing...but meant something else. There are 20 columns to process, but the table has 100 total columns. So I have some work to do there. But this example will help a lot."}], "tags": [], "owner": {"reputation": 26, "user_id": 4966282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e839ea440c123a4317175aebf2a45928?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua F", "link": "https://stackoverflow.com/users/4966282/joshua-f"}, "is_accepted": true, "score": 1, "last_activity_date": 1434596979, "last_edit_date": 1434596979, "creation_date": 1434590887, "answer_id": 30905076, "question_id": 30903076, "link": "https://stackoverflow.com/questions/30903076/creating-statistical-data-from-a-table/30905076#30905076", "title": "Creating statistical data from a table", "body": "<p>If your table looks the same as the code that you sent in r then the following query should work for you. It selects the data that you requested and pivots it at the same time. </p>\n\n<pre><code>create table #temp(ID int identity(1,1),columnName nvarchar(50));\ninsert into #temp \nSELECT COLUMN_NAME as columnName\nFROM myProject.INFORMATION_SCHEMA.COLUMNS               -- change myProject to the name of your database. Unless myProject is your database\nWHERE TABLE_NAME = N'table1';                           --change table1 to your table that your looking at. Unless table1 is your table\ndeclare @TableName nvarchar(50) = 'table1';             --change table1 to your table again \n\ndeclare @loop int = 1;\ndeclare @query nvarchar(max) = '';\ndeclare @columnName nvarchar(50);\ndeclare @endQuery nvarchar(max)='';\nwhile (@loop &lt;= (select count(*) from #temp))\n    begin\n        set @columnName = (select columnName from #temp where ID = @loop);\n        set @query = 'select t.columnName, avg(['+@columnName+']) as Avg ,min(['+@columnName+']) as min ,max(['+@columnName+'])as max ,stdev(['+@columnName+']) as STDEV,count(*) as totalCount from '+@tablename+' join   #temp t on t.columnName = '''+@columnName+''' group by t.columnName';\n        set @loop += 1;\n        set @endQuery += 'union all('+ @query + ')';\n    end;\nset @endQuery = stuff(@endQuery,1,9,'')\nExecute(@endQuery);\ndrop table #temp;\n</code></pre>\n\n<p>It creates a #temp table which stores the values of your column headings next to an ID. It then uses the ID when looping though the number of columns that you have. It then generates a query which selects what you want and then unions it together. This query will work on any number of columns meaning that if you add or remove more columns it should give the correct result.</p>\n\n<p>With this input:   </p>\n\n<pre><code> age   height_seca1 height_chad1 height_DL weight_alog1\n1   19         1800         1797       180           70\n2   19         1682         1670       167           69\n3   21         1765         1765       178           80\n4   21         1829         1833       181           74\n5   21         1706         1705       170          103\n6   18         1607         1606       160           76\n7   19         1578         1576       156           50\n8   19         1577         1575       156           61\n9   21         1666         1665       166           52\n10  17         1710         1716       172           65\n11  28         1616         1619       161           66\n12  22         1648         1644       165           58\n13  19         1569         1570       155           55\n14  19         1779         1777       177           55\n15  18         1773         1772       179           70\n16  18         1816         1809       181           81\n17  19         1766         1765       178           77\n18  19         1745         1741       174           76\n19  18         1716         1714       170           71\n20  21         1785         1783       179           64\n21  19         1850         1854       185           71\n22  31         1875         1880       188           95\n23  26         1877         1877       186          106\n24  19         1836         1837       185          100\n25  18         1825         1823       182           85\n26  19         1755         1754       174           79\n27  26         1658         1658       165           69\n28  20         1816         1818       183           84\n29  18         1755         1755       175           67\n</code></pre>\n\n<p>It will produce this output:</p>\n\n<pre><code>                    avg     min     max     stdev   totalcount\nage                 20      17      31      3.3     29 \nheight_seca1        1737    1569    1877    91.9    29 \nheight_chad1        1736    1570    1880    92.7    29 \nheight_DL           173     155     188     9.7     29 \nweight_alog1        73      50      106     14.5    29 \n</code></pre>\n\n<p>Hope this helps and works for you. :)</p>\n"}], "owner": {"reputation": 171, "user_id": 2647029, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/21e7d5d9cb9a33228d9271d60eff3037?s=128&d=identicon&r=PG", "display_name": "Ryan Buton", "link": "https://stackoverflow.com/users/2647029/ryan-buton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 30905076, "answer_count": 1, "score": 3, "last_activity_date": 1434596979, "creation_date": 1434578033, "last_edit_date": 1495542598, "question_id": 30903076, "link": "https://stackoverflow.com/questions/30903076/creating-statistical-data-from-a-table", "title": "Creating statistical data from a table", "body": "<p>I have a table with 20 columns of measurements. I would like 'convert' the table into a table with 20 rows with columns of Avg, Min, Max, StdDev, Count types of information.  There is another question like this but it was for the 'R' language. <a href=\"https://stackoverflow.com/questions/20997380/creating-a-summary-statistical-table-from-a-data-frame\">Other question here.</a> </p>\n\n<p>I could do the following for each column (processing the results with C++): </p>\n\n<pre><code>    Select Count(Case When [avgZ_l1] &lt;= 0.15 and avgZ_l1 &gt; 0 then 1 end) as countValue1, \nCount(case when [avgZ_l1] &lt;= 0.16 and avgZ_l1 &gt; 0.15 then 1 end) as countValue2,\nCount(case when [avgZ_l1] &lt;= 0.18 and avgZ_l1 &gt; 0.16 then 1 end) as countValue3, \nCount(case when [avgZ_l1] &lt;= 0.28 and avgZ_l1 &gt; 0.18 then 1 end) as countValue4,\nAvg(avgwall_l1) as avg1, Min(avgwall_l1) as min1, Max(avgZ_l1) as max1, \nSTDEV(avgZ_l1) as stddev1, count(*) as totalCount  from myProject.dbo.table1\n</code></pre>\n\n<p>But I do not want to process the 50,000 records 20 times (once for each column). I thought there would be away to 'pivot' the table onto its side and process the data at the same time.  I have seen examples of the 'Pivot' but they all seem to pivot on a integer type field, Month number or Device Id. Once the table is converted I could then fetch each row with C++. Maybe this is really just 'Insert into ... select ... from' statements.<br>\nWould the fastest (execution time) approach be to simply create a really long select statement that returns all the information I want for all the columns?\nWe might end up with 500,000 rows.  I am using C++ and SQL 2014.</p>\n\n<p>Any thoughts or comments are welcome. I just don't want have my naive code to be used as a shining example of how NOT to do something... ;)...</p>\n"}, {"tags": ["c++", "algorithm", "number-theory"], "answers": [{"comments": [{"owner": {"reputation": 924, "user_id": 3151270, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ocEco.gif?s=128&g=1", "display_name": "cristid9", "link": "https://stackoverflow.com/users/3151270/cristid9"}, "edited": false, "score": 0, "creation_date": 1434579430, "post_id": 30903331, "comment_id": 49845571, "body": "That was not an omission. I thought that the current <code>solution[partitions]</code> will be he previous in the next recursive call. It looks like this assumption is wrong, but I don&#39;t fully understand why."}, {"owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "reply_to_user": {"reputation": 924, "user_id": 3151270, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ocEco.gif?s=128&g=1", "display_name": "cristid9", "link": "https://stackoverflow.com/users/3151270/cristid9"}, "edited": false, "score": 1, "creation_date": 1434579564, "post_id": 30903331, "comment_id": 49845624, "body": "You never actually moved the pointer iterator of the index from what I saw. I don&#39;t get the algorithm, but modifying the same index in an array over and over again when you recurse can&#39;t seem to be good. Now, in the former algorithm, you <i>did</i> move the array index/iterator, which means you changed the position of the number you were looking at. The second one didn&#39;t."}], "tags": [], "owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "is_accepted": true, "score": 1, "last_activity_date": 1434579139, "creation_date": 1434579139, "answer_id": 30903331, "question_id": 30903004, "link": "https://stackoverflow.com/questions/30903004/different-ways-of-generating-the-partitions-of-a-number-in-order/30903331#30903331", "title": "Different ways of generating the partitions of a number in order", "body": "<p>You forgot to move the index of the <code>solution</code> array when you recurse.</p>\n\n<pre><code>generatePartitions(solution, number, sum, partitions + 1, \n            solution[partitions]);\n</code></pre>\n\n<p>becomes:</p>\n\n<pre><code>generatePartitions(solution, number, sum, partitions + 1, \n            solution[partitions-1]);\n</code></pre>\n\n<p>Coliru link: <a href=\"http://coliru.stacked-crooked.com/a/83b0418e1b1c9bc1\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/83b0418e1b1c9bc1</a></p>\n\n<p>Also, I'd propose using some form of <code>std::pair&lt;int,int&gt;</code> and a binary tree of some sort to do this for you--for me, it makes more sense to go from the top down, as we are trying to technically divide or partition a number into smaller ones; the algorithm might be a bit complex, but it might be possible to show a tree when you're done with it as well.</p>\n"}], "owner": {"reputation": 924, "user_id": 3151270, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ocEco.gif?s=128&g=1", "display_name": "cristid9", "link": "https://stackoverflow.com/users/3151270/cristid9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 30903331, "answer_count": 1, "score": 1, "last_activity_date": 1434579139, "creation_date": 1434577767, "last_edit_date": 1592644375, "question_id": 30903004, "link": "https://stackoverflow.com/questions/30903004/different-ways-of-generating-the-partitions-of-a-number-in-order", "title": "Different ways of generating the partitions of a number in order", "body": "<p>I have an exercise in my algorithms text book that asks me to generate the <a href=\"https://en.wikipedia.org/wiki/Partition_(number_theory)\" rel=\"nofollow noreferrer\">partitions of a number</a> in order. I have solved it, but while solving the exercise the traditional way I came up with a new idea of solving that problem.</p>\n<p>There is the traditional approach:</p>\n<pre><code>#include &lt;iostream&gt;\n\n#define MAX_PARTITIONS 100\n\nint count = 1;\n\nvoid printSolution(int* solution, int size)\n{\n    std::cout &lt;&lt; count &lt;&lt; &quot;| &quot;;\n    count++;\n    for(int i = 0; i &lt; size; i++)\n    {\n        std::cout &lt;&lt; solution[i] &lt;&lt; &quot; &quot;;\n    }\n    std::cout &lt;&lt; std::endl;\n}\n\nvoid generatePartitions(int* solution, int number, int sum, int partitions)\n{\n    if(sum == number)\n    {\n        printSolution(solution, partitions);\n        return;\n    }\n\n    if(partitions &gt; 1)\n    {\n        solution[partitions] = solution[partitions - 1];\n    }\n    else\n    {\n        solution[partitions] = 0;\n    }\n\n    while(solution[partitions] + sum &lt; number)\n    {\n        solution[partitions]++;\n        sum += solution[partitions];\n        generatePartitions(solution, number, sum, partitions + 1);\n        sum -= solution[partitions];\n    }\n}\n\nint main(int argc, char const *argv[])\n{\n    int solution[MAX_PARTITIONS];\n\n    generatePartitions(solution, 4, 0, 0);\n\n    return 0;\n}\n</code></pre>\n<p>Basically, when the number of partitions is bigger than <code>1</code> (there exists a previous partition) I assign to the current partition the value of the previous one, otherwise I assign <code>0</code> to it.</p>\n<p>There is the new approach:</p>\n<pre><code>#include &lt;iostream&gt;\n\n#define MAX_PARTITIONS 100\n\nint count = 1;\n\nvoid printSolution(int* solution, int size)\n{\n    std::cout &lt;&lt; count &lt;&lt; &quot;| &quot;;\n    count++;\n    for(int i = 0; i &lt; size; i++)\n    {\n        std::cout &lt;&lt; solution[i] &lt;&lt; &quot; &quot;;\n    }\n    std::cout &lt;&lt; std::endl;\n}\n\nvoid generatePartitions(int* solution, int number, int sum, int partitions, \n    int start)\n{\n    if(sum == number)\n    {\n        printSolution(solution, partitions);\n        return;\n    }\n\n    solution[partitions] = start;\n\n    while(solution[partitions] + sum &lt; number)\n    {\n        solution[partitions]++;\n        sum += solution[partitions];\n        generatePartitions(solution, number, sum, partitions + 1, \n            solution[partitions]);\n        sum -= solution[partitions];\n    }\n}\n\nint main(int argc, char const *argv[])\n{\n    int solution[MAX_PARTITIONS];\n\n    generatePartitions(solution, 4, 0, 0, 0);\n\n    return 0;\n}\n</code></pre>\n<p>As you can see, the function <code>generatePartitions</code> takes now a new parameter, <code>start</code>. Initially, the value of start is <code>0</code>, and at each recursive call <code>start</code> takes the value of the current <code>solution[partitions]</code>. So it should work in the same way as the traditional method.</p>\n<p>But it doesn't, the output of these programs is completely different. I can't figure out what is wrong. What am I doing wrong?</p>\n"}, {"tags": ["c++", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 2321, "user_id": 1229656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5vclf.jpg?s=128&g=1", "display_name": "bendervader", "link": "https://stackoverflow.com/users/1229656/bendervader"}, "is_accepted": true, "score": 2, "last_activity_date": 1434583189, "creation_date": 1434583189, "answer_id": 30904085, "question_id": 30902885, "link": "https://stackoverflow.com/questions/30902885/opencv-convertto-not-working/30904085#30904085", "title": "opencv convertTo not working", "body": "<p>This is not the right way to test for type conversion.</p>\n\n<p>OpenCV's <code>data</code> variable in <code>cv::Mat</code> is always of type <code>uchar</code>. It is basically a pointer to memory, but it doesn't mean that the data is <code>uchar</code>.</p>\n\n<p>To get the type of the image data use the <code>type()</code> function. Here is an example to test if the type was successfully converted to float (which will be)</p>\n\n<pre><code>cv::DataType&lt;float&gt;::type == image.type();\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4896882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35b57b34326e914cfdfe0cbe7b1ee433?s=128&d=identicon&r=PG&f=1", "display_name": "mtortorise", "link": "https://stackoverflow.com/users/4896882/mtortorise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 709, "favorite_count": 0, "accepted_answer_id": 30904085, "answer_count": 1, "score": 0, "last_activity_date": 1434583189, "creation_date": 1434577234, "question_id": 30902885, "link": "https://stackoverflow.com/questions/30902885/opencv-convertto-not-working", "title": "opencv convertTo not working", "body": "<p>I know this question has been asked and answered by others. But I still can't not solve my question. I read a frame from a video, which has format unsigned char (CV_8U). I hope to convert it to double precision(CV_64F). I do as following:</p>\n\n<pre><code>VideoCapture capture(fileName);\nMat image;\ncapture &gt;&gt; image;\ncvtColor(image, image, CV_BGR2GRAY);\nimage.convertTo(image, CV_32FC1, 1.0/255);\ncout &lt;&lt; typeid(image.data[0]).name() &lt;&lt; endl;\n</code></pre>\n\n<p>But the result shows the image is still unsigned char. What's wrong with my code? Thank.</p>\n"}, {"tags": ["c++", "multithreading", "client", "server"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1434575897, "post_id": 30902507, "comment_id": 49844049, "body": "You are probably looking for a word other than &quot;unknown&quot;."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1434575930, "post_id": 30902507, "comment_id": 49844065, "body": "You can keep a <code>vector</code> of all the threads you&#39;ve created if you want."}, {"owner": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "edited": false, "score": 0, "creation_date": 1434575970, "post_id": 30902507, "comment_id": 49844082, "body": "i mean unlimited, when sombody enter my server i will create a new theard for him"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 5, "creation_date": 1434576077, "post_id": 30902507, "comment_id": 49844123, "body": "The thread-per-client model turns out to scale quite poorly. You really want to create a thread pool, and push tasks into a queue that&#39;s serviced by the pool. This allows you to tune the number of threads to fit the processor(s) available."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1434576463, "post_id": 30902507, "comment_id": 49844291, "body": "If you want to, there&#39;s nothing stopping you from creating threads dynamically (just like you can create integers dynamically in a <code>std::vector&lt;int&gt;</code>). But it&#39;s not necessarily a good idea for a server. You probably want thread pool and/or non-blocking I/O."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "edited": false, "score": 0, "creation_date": 1434576452, "post_id": 30902674, "comment_id": 49844286, "body": "can i do it in vector?"}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "edited": false, "score": 0, "creation_date": 1434576561, "post_id": 30902674, "comment_id": 49844334, "body": "@user3346907: A <code>vector</code> is fine, too."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "edited": false, "score": 0, "creation_date": 1434576788, "post_id": 30902674, "comment_id": 49844436, "body": "@user3346907: The code, as I posted it, is already &quot;using it&quot; in the sense of &quot;starting the threads&quot;. The <code>join</code> is not necessary for that, the constructor does it already."}, {"owner": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "edited": false, "score": 0, "creation_date": 1434576871, "post_id": 30902674, "comment_id": 49844476, "body": "oh i think i get it, so in acceptance function do i need to do special things in order to use the thread? or just recv and send and everything will work"}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "edited": false, "score": 0, "creation_date": 1434577174, "post_id": 30902674, "comment_id": 49844611, "body": "@user3346907: I don&#39;t know what you do in <code>acceptance</code>, but from what I see it is very likely that it still works the same way as before."}, {"owner": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "edited": false, "score": 0, "creation_date": 1434577357, "post_id": 30902674, "comment_id": 49844703, "body": "yes i just check it, it still stay in the thread of the first client that enterd and just after i finish with him its go to the second client (i dont want it )"}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "edited": false, "score": 0, "creation_date": 1434577799, "post_id": 30902674, "comment_id": 49844873, "body": "@user3346907: You have to use <i>only</i> <code>ClientSocket</code> (<i>not</i> <code>ListenSocket</code>) in the function <code>acceptance</code>. And make sure you get rid of all the <code>join</code> calls."}, {"owner": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "edited": false, "score": 0, "creation_date": 1434578069, "post_id": 30902674, "comment_id": 49844988, "body": "i got rid from ListenSocket and from all the join calls but it still do one client and when it ends it do the secend one, mabey because inside the acceptance there is while with recv? because all what i want is to recv from both clients, but i can only after i finish the function (after the first client leave)"}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "edited": false, "score": 0, "creation_date": 1434579529, "post_id": 30902674, "comment_id": 49845617, "body": "@user3346907: Just tested it, to make sure. It works like a charm. The problem must be somewhere else. If you need more help, post your code somewhere."}, {"owner": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "edited": false, "score": 0, "creation_date": 1434632968, "post_id": 30902674, "comment_id": 49869690, "body": "its work, but when i send the function like a function in class it dont work, like this:threads.push_back(std::thread(&amp;Manager::connection, ClientSocket)); it dont work but like this :threads.push_back(std::thread(&amp;connection, ClientSocket)); it work, but i must use it in the class what should i do?"}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "edited": false, "score": 0, "creation_date": 1434633483, "post_id": 30902674, "comment_id": 49870103, "body": "@user3346907: If you pass a class method as function, you have to pass a pointer to the object as argument. In your case it would be a pointer to the <code>Manager</code> object. In many cases it will be <code>this</code> (use it like this: <code>threads.push_back(std::thread(&amp;connection, this, ClientSocket));</code>), but that depends on if the code that creates the thread is in the same class or not."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "edited": false, "score": 0, "creation_date": 1434636675, "post_id": 30902674, "comment_id": 49872822, "body": "@user3346907: I meant, of course: <code>threads.push_back(std::thread(&amp;Manager::connection, this, ClientSocket));</code>"}, {"owner": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "edited": false, "score": 0, "creation_date": 1434661585, "post_id": 30902674, "comment_id": 49888370, "body": "i just send the server to my teacher, thank you so much! every thing work great!"}], "tags": [], "owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "is_accepted": true, "score": 1, "last_activity_date": 1434576527, "last_edit_date": 1434576527, "creation_date": 1434576360, "answer_id": 30902674, "question_id": 30902507, "link": "https://stackoverflow.com/questions/30902507/how-to-create-unkown-amount-of-threads-c/30902674#30902674", "title": "how to create unkown amount of threads c++", "body": "<p>You are probably doing the <code>t.join();</code> in order to avoid that your thread gets killed prematurely when the <code>std::thread</code> object <code>t</code> runs out of scope at the end of the <code>else</code> branch. But this way, your main thread is blocked and you cannot create another thread.</p>\n\n<p>A better way to keep the thread alive is creating the <code>std::thread</code> object in a <code>std::list</code> or a <code>std::map</code> instead of a scoped local variable. This way you still control it, but your thread won't get terminated prematurely:</p>\n\n<pre><code>std::list&lt;std::thread&gt; workers;\n// ...\nif (ClientSocket == INVALID_SOCKET) //Check for errors\n{\n    // ...\n}\nelse\n{\n    workers.push_back(std::thread(&amp;Manager::acceptance, this, ClientSocket, ListenSocket));\n}\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 3346907, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000135731606/picture?type=large", "display_name": "Nir", "link": "https://stackoverflow.com/users/3346907/nir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 0, "accepted_answer_id": 30902674, "answer_count": 1, "score": -1, "last_activity_date": 1434576527, "creation_date": 1434575587, "question_id": 30902507, "link": "https://stackoverflow.com/questions/30902507/how-to-create-unkown-amount-of-threads-c", "title": "how to create unkown amount of threads c++", "body": "<p>I wrote a server c++ that connect to clients and i want to use thread in order to do some actions and with some clients and not to do only one client finish and go to another client. but i cant create unknown amount of theards only specific.\ncan sombody help me?</p>\n\n<pre><code>while (1)\n{\n    ClientSocket = INVALID_SOCKET;\n    ClientSocket = accept(ListenSocket, NULL, NULL); // Accept a client socket\n    if (ClientSocket == INVALID_SOCKET) //Check for errors\n    {\n        printf(\"accept failed: %d\\n\", WSAGetLastError());\n        closesocket(ListenSocket);\n        WSACleanup();\n    }\n    else\n    {\n        t-&gt;join();\n        std::thread t(&amp;Manager::acceptance, this,ClientSocket,ListenSocket);\n        t.join();\n    }\n}\n</code></pre>\n\n<p>and in the acceptnce i have the recv and send functions.\nbut it work only with one thread and i dont know how to create thread every time sombody will enter.\nThank you!\nNir</p>\n"}, {"tags": ["c++", "boost", "boost-graph"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 5, "last_activity_date": 1434824166, "last_edit_date": 1495542634, "creation_date": 1434587071, "answer_id": 30904633, "question_id": 30902294, "link": "https://stackoverflow.com/questions/30902294/get-node-label-from-boostlabeled-graph/30904633#30904633", "title": "Get node label from boost::labeled_graph", "body": "<p>Ah. I found your questions in the wrong order :)</p>\n\n<p>I don't think <code>labeled_graph&lt;&gt;</code> adaptor has this feature. Instead, like in my <a href=\"https://stackoverflow.com/a/30904340/2912901\">other answer</a> I suggest storing the label as a vertex property (bundled or vertex_index_t).</p>\n\n<h2>Bundled</h2>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/cedec9cb521a7de1\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>// g++ -O3 question.cpp -o question.exe -I. --std=c++11 -lprotobuf-lite -lpthread -lz -losmpbf\n#include &lt;iostream&gt;\n\n#include &lt;boost/graph/adjacency_list.hpp&gt;\n#include &lt;boost/graph/labeled_graph.hpp&gt;\n#include &lt;boost/graph/iteration_macros.hpp&gt;\n\nstruct MyVertex {\n    long long label;\n\n    MyVertex(long long label = 0) : label(label) {}\n};\n\n\ntypedef boost::adjacency_list&lt;boost::listS,          // Store out-edges of each vertex in a std::list\n                              boost::listS,          // Store vertex set in a std::list\n                              boost::bidirectionalS, // The file dependency graph is directed\n                              MyVertex,              // vertex properties\n                              boost::no_property     // edge properties\n                              &gt; AdjGraph;\n\nint main() {\n    AdjGraph g;\n\n    std::map&lt;size_t, AdjGraph::vertex_descriptor&gt; vertex_map;\n\n    for (int i = 1; i&lt;6; ++i)\n        vertex_map.emplace(10*i, add_vertex(10*i, g));\n\n    boost::add_edge(vertex_map[10], vertex_map[30], g);\n    boost::add_edge(vertex_map[10], vertex_map[50], g);\n    boost::add_edge(vertex_map[30], vertex_map[40], g);\n    boost::add_edge(vertex_map[50], vertex_map[20], g);\n\n    BGL_FORALL_EDGES(e, g, AdjGraph) {\n        auto source_n = boost::source(e, g);\n        std::cerr &lt;&lt; g[source_n].label &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<h2><code>vertex_index_t</code> interior property</h2>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/a1462fb94d309dcd\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>// g++ -O3 question.cpp -o question.exe -I. --std=c++11 -lprotobuf-lite -lpthread -lz -losmpbf\n#include &lt;iostream&gt;\n\n#include &lt;boost/graph/adjacency_list.hpp&gt;\n#include &lt;boost/graph/labeled_graph.hpp&gt;\n#include &lt;boost/graph/iteration_macros.hpp&gt;\n\ntypedef boost::adjacency_list&lt;boost::listS,          // Store out-edges of each vertex in a std::list\n                              boost::listS,          // Store vertex set in a std::list\n                              boost::bidirectionalS, // The file dependency graph is directed\n                              boost::property&lt;boost::vertex_index_t, size_t&gt;,    // vertex properties\n                              boost::no_property     // edge properties\n                              &gt; AdjGraph;\n\nint main() {\n    AdjGraph g;\n\n    std::map&lt;size_t, AdjGraph::vertex_descriptor&gt; vertex_map;\n\n    for (int i = 1; i&lt;6; ++i)\n        vertex_map.emplace(10*i, add_vertex(10*i, g));\n\n    boost::add_edge(vertex_map[10], vertex_map[30], g);\n    boost::add_edge(vertex_map[10], vertex_map[50], g);\n    boost::add_edge(vertex_map[30], vertex_map[40], g);\n    boost::add_edge(vertex_map[50], vertex_map[20], g);\n\n    auto index = boost::get(boost::vertex_index, g);\n\n    BGL_FORALL_EDGES(e, g, AdjGraph) {\n        auto source_n = boost::source(e, g);\n        std::cerr &lt;&lt; boost::get(index, source_n) &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1584, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1434824166, "creation_date": 1434574789, "question_id": 30902294, "link": "https://stackoverflow.com/questions/30902294/get-node-label-from-boostlabeled-graph", "title": "Get node label from boost::labeled_graph", "body": "<p>I would like to retrieve the label of a labeled node in BGL's labeled_graph but cannot find a method to do this.</p>\n\n<p>The following MWE demonstrates what I am looking for:</p>\n\n<pre><code>//g++ -O3 question.cpp -o question.exe -I. --std=c++11 -lprotobuf-lite -lpthread -lz -losmpbf\n#include &lt;iostream&gt;\n\n#include &lt;boost/graph/adjacency_list.hpp&gt;\n#include &lt;boost/graph/labeled_graph.hpp&gt;\n#include &lt;boost/graph/iteration_macros.hpp&gt;\n\ntypedef long long node_id_t;\n\ntypedef boost::adjacency_list&lt;\n  boost::listS,           // Store out-edges of each vertex in a std::list\n  boost::listS,           // Store vertex set in a std::list\n  boost::bidirectionalS,  // The file dependency graph is directed\n  boost::no_property,     // vertex properties\n  boost::no_property      // edge properties\n&gt; AdjGraph;\n\ntypedef boost::labeled_graph&lt;\n  AdjGraph,\n  node_id_t          // Node ID\n&gt; LabeledGraph;\n\nint main(){\n  LabeledGraph g;\n\n  add_vertex( 10, g );\n  add_vertex( 20, g );\n  add_vertex( 30, g );\n  add_vertex( 40, g );\n  add_vertex( 50, g );\n\n  boost::add_edge_by_label(10,30,g);\n  boost::add_edge_by_label(10,50,g);\n  boost::add_edge_by_label(30,40,g);\n  boost::add_edge_by_label(50,20,g);\n\n  BGL_FORALL_EDGES(e, g, LabeledGraph){\n    auto source_n = boost::source(e,g);\n    //How do I do the following?\n    //std::cerr&lt;&lt;boost::get_label_of_vertex(source_n)&lt;&lt;std::endl;\n  }\n}\n</code></pre>\n\n<p>The command <code>boost::get_label_of_vertex(source_n)</code> does not seem to exist in my diggings.</p>\n\n<p>Do you know if it does, or if there is another way to get this information?</p>\n"}, {"tags": ["c++", "datetime", "c++11"], "comments": [{"owner": {"reputation": 1510, "user_id": 2577784, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0UtjR.png?s=128&g=1", "display_name": "djs", "link": "https://stackoverflow.com/users/2577784/djs"}, "edited": false, "score": 2, "creation_date": 1434576124, "post_id": 30902127, "comment_id": 49844145, "body": "<a href=\"https://www.youtube.com/watch?v=-5wpm-gesOY\" rel=\"nofollow noreferrer\">youtube.com/watch?v=-5wpm-gesOY</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4161, "user_id": 4383472, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/54547d15281ae3c7d48184944f26e3f8?s=128&d=identicon&r=PG&f=1", "display_name": "Bad", "link": "https://stackoverflow.com/users/4383472/bad"}, "edited": false, "score": 0, "creation_date": 1434582492, "post_id": 30902364, "comment_id": 49846576, "body": "Sorry, I&#39;m unfamiliar with boost library. Is your <code>t1</code> timezone unaware/naive datetime or is it timezone aware (i.e. NY localized already because it&#39;s your locale)? Because if it&#39;s already NY localized then I still do not understand how to parse datetime from string and automatically make it NY (because parser automatically makes it my local timezone not NY)."}, {"owner": {"reputation": 4161, "user_id": 4383472, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/54547d15281ae3c7d48184944f26e3f8?s=128&d=identicon&r=PG&f=1", "display_name": "Bad", "link": "https://stackoverflow.com/users/4383472/bad"}, "edited": false, "score": 1, "creation_date": 1435164788, "post_id": 30902364, "comment_id": 50089459, "body": "I looked through boost date_time documentation and understood that <code>t1</code> represents here naive (timezone unaware) datetime. Then, everything is ok..."}], "tags": [], "owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "is_accepted": true, "score": 1, "last_activity_date": 1434575009, "creation_date": 1434575009, "answer_id": 30902364, "question_id": 30902127, "link": "https://stackoverflow.com/questions/30902127/c-parse-datetime-from-string-with-different-timezone/30902364#30902364", "title": "c++ parse datetime from string with different timezone", "body": "<p>Just use boost for this. Seriously. Here is what some sample code looks like for this:</p>\n\n<pre><code>using namespace boost::posix_time;\nusing namespace boost::gregorian;\n\n//eastern timezone is utc-5\ntypedef boost::date_time::local_adjustor&lt;ptime, -5, us_dst&gt; us_eastern;\n\nptime t1(date(2001,Dec,31), hours(19)); //5 hours b/f midnight NY time\n\nptime t2 =  us_eastern::local_to_utc(t1); // t2 is now in utc\n\nstd::cout &lt;&lt; to_simple_string(t1) &lt;&lt; \" in New York is \" \n          &lt;&lt; to_simple_string(t2) &lt;&lt; \" UTC time \"\n          &lt;&lt; std::endl\n</code></pre>\n\n<p>Sample code taken from <a href=\"http://www.boost.org/doc/libs/1_42_0/doc/html/date_time/examples.html\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_42_0/doc/html/date_time/examples.html</a> and adjusted for readability and brevity, while still answering the question.</p>\n\n<p>Whatever solution you do come to, make sure you are never subtracting by hand for timezone conversions, or anything like that. At some level, you need to use a library. This stuff is full of pitfalls, and very complicated, so forgetting even how much work is or isn't involved, if you do it on your own it almost certainly won't be right.</p>\n"}, {"tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": false, "score": 2, "last_activity_date": 1490901480, "creation_date": 1490901480, "answer_id": 43126635, "question_id": 30902127, "link": "https://stackoverflow.com/questions/30902127/c-parse-datetime-from-string-with-different-timezone/43126635#43126635", "title": "c++ parse datetime from string with different timezone", "body": "<p>Here is your program using <a href=\"https://howardhinnant.github.io/date/tz.html#zoned_time\" rel=\"nofollow noreferrer\">Howard Hinnant's timezone library</a> (free, open-source, will run with VS-2013, does require some <a href=\"https://howardhinnant.github.io/date/tz.html#Installation\" rel=\"nofollow noreferrer\">installation</a>).</p>\n\n<pre><code>#include \"tz.h\"\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    using namespace std;\n    using namespace date;\n    vector&lt;string&gt; datetimes{ \"2011-01-15 04:01:00\",\n                              \"2014-06-07 23:17:00\",\n                              \"2015-11-29 14:55:00\" };\n\n    zoned_seconds zt(\"America/New_York\");\n    for (auto const&amp; i : datetimes)\n    {\n        stringstream ss1(i);\n        local_seconds tm;\n        ss1 &gt;&gt; parse(\"%F %T\", tm);\n        zt = tm;\n        stringstream ss2;\n        ss2 &lt;&lt; format(\"%D %T %Z\", zt);\n        cout &lt;&lt; ss2.str() &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>01/15/11 04:01:00 EST\n06/07/14 23:17:00 EDT\n11/29/15 14:55:00 EST\n</code></pre>\n"}], "owner": {"reputation": 4161, "user_id": 4383472, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/54547d15281ae3c7d48184944f26e3f8?s=128&d=identicon&r=PG&f=1", "display_name": "Bad", "link": "https://stackoverflow.com/users/4383472/bad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1455, "favorite_count": 0, "accepted_answer_id": 30902364, "answer_count": 2, "score": 1, "last_activity_date": 1490901480, "creation_date": 1434574183, "last_edit_date": 1434574807, "question_id": 30902127, "link": "https://stackoverflow.com/questions/30902127/c-parse-datetime-from-string-with-different-timezone", "title": "c++ parse datetime from string with different timezone", "body": "<p>How to parse datetime from string which is in different timezone? I have dates and times in simple strings like <code>2011-01-15 04:01:00</code>, which are from New York timezone (Eastern: UTC -5/-4). I wrote the code below, but it automatically converts timezone to my local timezone.</p>\n\n<p>Is it possible to do it without any additional C++ 11 libraries like Boost so as not to add complexity to a very simple operation? If not, an example with Boost would be nice.</p>\n\n<p>I use Visual Studio 2013 on Windows 8.1.</p>\n\n<pre><code>#include &lt;ctime&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    vector&lt;string&gt; datetimes{ \"2011-01-15 04:01:00\",\n                              \"2014-06-07 23:17:00\",\n                              \"2015-11-29 14:55:00\" };\n\n    for (auto i : datetimes)\n    {\n        stringstream ss1(i);\n        tm tm;\n        ss1 &gt;&gt; get_time(&amp;tm, \"%Y-%m-%d %H:%M:%S\");\n        stringstream ss2;\n        ss2 &lt;&lt; put_time(&amp;tm, \"%c %Z\");\n        cout &lt;&lt; ss2.str() &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>01/15/11 04:01:00 Russia TZ 2 Daylight Time\n06/07/14 23:17:00 Russia TZ 2 Daylight Time\n11/29/15 14:55:00 Russia TZ 2 Daylight Time\n</code></pre>\n\n<p>But I need the output to be like:</p>\n\n<pre><code>01/15/11 04:01:00 New York / Eastern (or whatever right name)\n06/07/14 23:17:00 New York\n11/29/15 14:55:00 New York\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2013", "com"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 5, "creation_date": 1434574873, "post_id": 30902078, "comment_id": 49843523, "body": "CComPtr is a smart pointer wrapper for COM interface pointers.  The kind that derive from IUnknown.  Using <i>int</i> doesn&#39;t make any sense.  You get the compile error because <i>int</i> doesn&#39;t have a Release() method.  Automatically called by CComPtr in its destructor, the smart part."}, {"owner": {"reputation": 2285, "user_id": 4840567, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/317775be985b05371b977a5daedc4e5d?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Hu", "link": "https://stackoverflow.com/users/4840567/calvin-hu"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1434576178, "post_id": 30902078, "comment_id": 49844166, "body": "but how do I check if a CComPtr owns any object ? Just a  &quot;if(ccomPtr)&quot; will do the trick ?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1434576378, "post_id": 30902078, "comment_id": 49844257, "body": "You already know how to do that, the one thing you did not get wrong."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 9, "last_activity_date": 1434583196, "last_edit_date": 1434583196, "creation_date": 1434582706, "answer_id": 30904001, "question_id": 30902078, "link": "https://stackoverflow.com/questions/30902078/test-if-ccomptr-is-null-in-com/30904001#30904001", "title": "test if CComPtr is null in COM", "body": "<blockquote>\n  <p>Why is it illegal to assign a nullptr to a CComPtr object ? </p>\n</blockquote>\n\n<p>It is not.  As Hans pointed out, <code>CComPtr</code> can only be used with COM interfaces, <code>int</code> is not a compatible type.  That is what the compiler error is telling you:</p>\n\n<pre>\nerror C2227: left of '->Release' must point to class/struct/union/generic type\n\n          type is 'int *'\n</pre>\n\n<p>So the problem is not that you are assigning <code>nullptr</code>, but that <code>int</code> does not have a <code>Release()</code> method, which <code>CComPtr</code> requires.  An <code>IUnknown</code> (or derived) interface does have a <code>Release()</code> method.</p>\n\n<blockquote>\n  <p>Is there any method that we can use to check whether or not a <code>CComPtr</code> owns any objects ? Will a call like <code>if (myint == nullptr)</code> enough to check if this smart pointer does not own any object ?</p>\n</blockquote>\n\n<p>If you read the <a href=\"https://msdn.microsoft.com/en-us/library/ezzw7k98.aspx\" rel=\"noreferrer\"><code>CComPtr</code> documentation</a> more carefully, you would see that <code>CComPtr</code> derives from <code>CComPtrBase</code>, which implements <code>operator!()</code>, <code>operator T*()</code> and <code>operator==()</code> operators (so <code>CComPtr</code> will <em>act</em> like a raw pointer), as well as an <code>IsEqualObject()</code> method:</p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[])\n{\n    CComPtr&lt;IUnknown&gt; myUnk = nullptr;\n    if (!myUnk) { // calls myUnk.operator!() ...\n        std::cout &lt;&lt; \"null\" &lt;&lt; std::endl;\n    else\n        std::cout &lt;&lt; \"not null\" &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[])\n{\n    CComPtr&lt;IUnknown&gt; myUnk = nullptr;\n    if (myUnk) { // calls myUnk.operator IUnknown*() ...\n        std::cout &lt;&lt; \"not null\" &lt;&lt; std::endl;\n    else\n        std::cout &lt;&lt; \"null\" &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[])\n{\n    CComPtr&lt;IUnknown&gt; myUnk = nullptr;\n    if (myUnk == nullptr) { // calls myUnk.operator==(IUnknown*) ...\n        std::cout &lt;&lt; \"null\" &lt;&lt; std::endl;\n    else\n        std::cout &lt;&lt; \"not null\" &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[])\n{\n    CComPtr&lt;IUnknown&gt; myUnk = nullptr;\n    if (myUnk.IsEqualObject(nullptr)) {\n        std::cout &lt;&lt; \"null\" &lt;&lt; std::endl;\n    else\n        std::cout &lt;&lt; \"not null\" &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2285, "user_id": 4840567, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/317775be985b05371b977a5daedc4e5d?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Hu", "link": "https://stackoverflow.com/users/4840567/calvin-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3161, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1434583196, "creation_date": 1434574005, "last_edit_date": 1434582486, "question_id": 30902078, "link": "https://stackoverflow.com/questions/30902078/test-if-ccomptr-is-null-in-com", "title": "test if CComPtr is null in COM", "body": "<p>I have a question regarding the usage of COM smart pointer class <code>CComPtr</code>. I was following an example from the <a href=\"https://msdn.microsoft.com/en-us/library/ezzw7k98.aspx\" rel=\"nofollow\">documentation</a> and it seems the code does not call <code>CoCreateInstance()</code> on the <code>CComPtr</code> (it merely declares it before assigning it value).</p>\n\n<p>So I wrote a test program like this:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"atlbase.h\"\n#include &lt;iostream&gt;\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    CComPtr&lt;int&gt; myint = nullptr;\n    if (myint == nullptr) {\n        std::cout &lt;&lt; \"yes\" &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>And it gives the following error in visual-studio 2013:</p>\n\n<pre>\n------ Build started: Project: ConsoleApplication2, Configuration: Debug Win32 ------\n\n  ConsoleApplication2.cpp\n\nc:\\program files (x86)\\microsoft visual studio 12.0\\vc\\atlmfc\\include\\atlcomcli.h(177): error C2227: left of '->Release' must point to class/struct/union/generic type\n\n          type is 'int *'\n\n          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\atlmfc\\include\\atlcomcli.h(175) : while compiling class template member function 'ATL::CComPtrBase::~CComPtrBase(void) throw()'\n\n          with\n\n          [\n\n              T=int\n\n          ]\n\n          c:\\users\\calvi_000\\documents\\visual studio 2013\\projects\\consoleapplication2\\consoleapplication2\\consoleapplication2.cpp(18) : see reference to function template instantiation 'ATL::CComPtrBase::~CComPtrBase(void) throw()' being compiled\n\n          with\n\n          [\n\n              T=int\n\n          ]\n\n          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\atlmfc\\include\\atlcomcli.h(317) : see reference to class template instantiation 'ATL::CComPtrBase' being compiled\n\n          with\n\n          [\n\n              T=int\n\n          ]\n\n          c:\\users\\calvi_000\\documents\\visual studio 2013\\projects\\consoleapplication2\\consoleapplication2\\consoleapplication2.cpp(10) : see reference to class template instantiation 'ATL::CComPtr' being compiled\n\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</pre>\n\n<p>Why is it illegal to assign a <code>nullptr</code> to a <code>CComPtr</code> object ?  Is there any method that we can use to check whether or not a <code>CComPtr</code> owns any objects ? Will a call like <code>if (myint == nullptr)</code> enough to check if this smart pointer does not own any object ?</p>\n"}, {"tags": ["c++", "algorithm", "binary-search-tree", "doubly-linked-list"], "comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1434572222, "post_id": 30901537, "comment_id": 49842077, "body": "left and right go to the same tail? are you talking about ring linked list?"}, {"owner": {"reputation": 554, "user_id": 1834009, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5IkSw.jpg?s=128&g=1", "display_name": "raisa_", "link": "https://stackoverflow.com/users/1834009/raisa"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1434572706, "post_id": 30901537, "comment_id": 49842332, "body": "@HuStmpHrrr Yes, some kind of ring linked list / circular linked list, but instead of going circular, I need to make separate output like I write above. If I were to reverse the node order, the head and tail will swap. And advice ?"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 2, "creation_date": 1434573072, "post_id": 30901537, "comment_id": 49842536, "body": "i am very confused. doubly linked list has no left or right node but previous and next node. what you are talking about should be a binary tree, with leaves go to the same ending point. so isn&#39;t what you need to do, just assigning left and right to be tail as default, instead of null? you need to make your question clearer."}, {"owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "edited": false, "score": 0, "creation_date": 1434573146, "post_id": 30901537, "comment_id": 49842567, "body": "uh.... what? Isn&#39;t this more like a circular linked list? And isn&#39;t this just a diamond? What exactly are you asking here?... This certainly isn&#39;t a binary search tree because each node branches off into two; the way you have it described, left and right might as well be prev and next, and the only thing you need to do is to keep iterating until you find that the next pointers would be equal to each other or to one of the current pointers."}, {"owner": {"reputation": 554, "user_id": 1834009, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5IkSw.jpg?s=128&g=1", "display_name": "raisa_", "link": "https://stackoverflow.com/users/1834009/raisa"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1434573923, "post_id": 30901537, "comment_id": 49843010, "body": "@HuStmpHrrr I&#39;m really sorry about that, I know it has no left and right node, I was just so confuse how to put it, left and right was just the name I give :)"}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 3247322, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3a5447489707a208b153a4b4618075cb?s=128&d=identicon&r=PG&f=1", "display_name": "Puddinglord", "link": "https://stackoverflow.com/users/3247322/puddinglord"}, "is_accepted": false, "score": 0, "last_activity_date": 1434573307, "creation_date": 1434573307, "answer_id": 30901890, "question_id": 30901537, "link": "https://stackoverflow.com/questions/30901537/doubly-linked-list-with-separate-left-and-right-node-but-same-tail/30901890#30901890", "title": "Doubly Linked List with separate left and right node but same tail", "body": "<p>You would just need to use a circularly doubly linked list so it would go</p>\n\n<pre><code>                               Head\n                         Left        Right\n                               Tail\n</code></pre>\n\n<p>Link each one to the left and right of each other back and forth creating the double link and then what you can do is when you want to right the right side just start from the head, go to the right hand and then print and stop at the tail. Same would go for the left and if you need to start with the tail you can do that too since you have a unique pointer for it.</p>\n\n<p><a href=\"http://i.stack.imgur.com/SCNzn.png\" rel=\"nofollow\">http://i.stack.imgur.com/SCNzn.png</a></p>\n\n<p>a badly drawn picture but with arrows! </p>\n"}, {"comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1434574031, "post_id": 30901982, "comment_id": 49843071, "body": "ahaa, that&#39;s two lists sharing the same sentinels."}, {"owner": {"reputation": 554, "user_id": 1834009, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5IkSw.jpg?s=128&g=1", "display_name": "raisa_", "link": "https://stackoverflow.com/users/1834009/raisa"}, "edited": false, "score": 0, "creation_date": 1434574493, "post_id": 30901982, "comment_id": 49843336, "body": "Ahh..yes, like this O.o"}, {"owner": {"reputation": 9801, "user_id": 567650, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ccbc30c848110d05818d71e37ae8c8cf?s=128&d=identicon&r=PG", "display_name": "jwd", "link": "https://stackoverflow.com/users/567650/jwd"}, "reply_to_user": {"reputation": 554, "user_id": 1834009, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5IkSw.jpg?s=128&g=1", "display_name": "raisa_", "link": "https://stackoverflow.com/users/1834009/raisa"}, "edited": false, "score": 0, "creation_date": 1434660530, "post_id": 30901982, "comment_id": 49887880, "body": "@SylvieYunjae: Soo, what exactly are you trying to do? What does this have to do with binary trees? Could you provide: (1) sample input, (2) expected output, and (3)  code that you wrote which is having problems with that input?"}], "tags": [], "owner": {"reputation": 9801, "user_id": 567650, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ccbc30c848110d05818d71e37ae8c8cf?s=128&d=identicon&r=PG", "display_name": "jwd", "link": "https://stackoverflow.com/users/567650/jwd"}, "is_accepted": false, "score": 0, "last_activity_date": 1434573661, "creation_date": 1434573661, "answer_id": 30901982, "question_id": 30901537, "link": "https://stackoverflow.com/questions/30901537/doubly-linked-list-with-separate-left-and-right-node-but-same-tail/30901982#30901982", "title": "Doubly Linked List with separate left and right node but same tail", "body": "<p>This is more of a comment, but is this the type of structure you want?</p>\n\n<pre><code>         .-&gt; N1 &lt;---&gt; N2 &lt;---&gt; N3 &lt;-.\nHead &lt;__/                            \\ __&gt; Tail\n        \\.-&gt; N4 &lt;---&gt; N5 &lt;---&gt; N6 &lt;-./\n</code></pre>\n\n<p>I'm not sure exactly what your requirements are.</p>\n"}], "owner": {"reputation": 554, "user_id": 1834009, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5IkSw.jpg?s=128&g=1", "display_name": "raisa_", "link": "https://stackoverflow.com/users/1834009/raisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 385, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1434573661, "creation_date": 1434572094, "last_edit_date": 1592644375, "question_id": 30901537, "link": "https://stackoverflow.com/questions/30901537/doubly-linked-list-with-separate-left-and-right-node-but-same-tail", "title": "Doubly Linked List with separate left and right node but same tail", "body": "<p>I'm working on double linked list where the head has to possessing 2 &quot;hands&quot; , left and right, and both hands must end up at the same tail.\nAnd in the end, it should be able to print the value of</p>\n<ul>\n<li>Head - Left - Tail</li>\n<li>Head - Right - Tail</li>\n</ul>\n<p>Like Binary Searching but must end up at the same tail.</p>\n<p>I'm a little bit confuse about what should I use for create left and right node.\nI've tried using a lot of middle insertion methods, and after a week I still can't figure out how to get the print out I want.</p>\n<p>I tried to use Binary Searching method too, reference  <a href=\"https://ideone.com/AyJUSh\" rel=\"nofollow noreferrer\">HERE</a>, but can't figure out how to make this one tail that all the hands should end up to.</p>\n<p>This is how I write my Struct</p>\n<pre><code>struct City\n{\n    char name[20], place[20], food[20];\n    struct City *next;\n}\n*head, *tail, *new, *right,*left,*del_temp, *temp, *temp2;\n</code></pre>\n<p>I used this one too... but still not work out</p>\n<pre><code>struct City\n{\n    char name[20], place[20], food[20];\n    struct City *right;\n    struct City *left;\n}\n*head, *tail, *new, *del_temp, *temp, *temp2;\n</code></pre>\n<p>Sorry for lacking code, I made several project with each different insertion methods. I'm not sure which one to put here.</p>\n<p>My question is, how should I go from here ?\nShould I use tree and subtrees for left and right hand ? what the algorithm I should use ?</p>\n<p>If I were to continue with double linked list, how do I get the separate output for both left and right hand? Or if I were to continue with binary searching, how do I get the exact one tail in the end ?</p>\n<p>Any advice ?</p>\n<p>Thanks before</p>\n"}, {"tags": ["c++", "winapi", "int", "octal", "uint"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1434572265, "post_id": 30901500, "comment_id": 49842089, "body": "@juanchopanza: You should post that as an answer."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1434572310, "post_id": 30901500, "comment_id": 49842108, "body": "@KeithThompson I can&#39;t figure out what the question is. Feel free to post an answer."}, {"owner": {"reputation": 3, "user_id": 4554475, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CPWZqrG46vU/AAAAAAAAAAI/AAAAAAAAA7w/4dcPh7KFzE4/photo.jpg?sz=128", "display_name": "stunner2002", "link": "https://stackoverflow.com/users/4554475/stunner2002"}, "edited": false, "score": 0, "creation_date": 1434572499, "post_id": 30901500, "comment_id": 49842215, "body": "why can I use the operation number++ and it counts like ...6 -&gt; 7 -&gt; 10 -&gt; 11 -&gt; 12... ? If there is no difference how is it possible? Could you give me a hint, please? <i>edit</i> to complete... if I assign buffer = number with a value of 77 and use the operation buffer++ it count 77 -&gt; 78 -&gt; 79..."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1434573840, "post_id": 30901500, "comment_id": 49842956, "body": "&quot;the value will keep the octal-system&quot; is just baloney.  Have you configured your debugger to display certain variables in octal?"}], "answers": [{"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 6, "last_activity_date": 1434572670, "creation_date": 1434572670, "answer_id": 30901722, "question_id": 30901500, "link": "https://stackoverflow.com/questions/30901500/assign-octal-hex-declared-int-uint-to-another-variable/30901722#30901722", "title": "Assign octal/hex declared INT/UINT to another variable", "body": "<p>There's no such thing in C as an \"octal value\". Integers are stored in binary.</p>\n\n<p>For example, these three constants:</p>\n\n<ul>\n<li><code>10</code></li>\n<li><code>012</code></li>\n<li><code>0xA</code></li>\n</ul>\n\n<p>all have exactly the same type and value. They're just different notations -- and the difference exists <em>only</em> in your source code, not at run time. Assigning an octal constant to a variable doesn't make the variable octal.</p>\n\n<p>For example, this:</p>\n\n<pre><code>int n = 012;\n</code></pre>\n\n<p>stores the value <em>ten</em> in <code>n</code>. You can print that value in any of several formats:</p>\n\n<pre><code>printf(\"%d\\n\", n);\nprintf(\"0%o\\n\", n);\nprintf(\"0x%x\\n\", n);\n</code></pre>\n\n<p>In all three cases, the stored value is converted to a human-readable sequence of characters, in decimal, octal, or hexadecimal.</p>\n\n<blockquote>\n  <p>Anybody has a solution for me?</p>\n</blockquote>\n\n<p>No, because there is no actual problem.</p>\n\n<p>(Credit goes to juanchopanza for mentioning this in a comment.)</p>\n"}], "owner": {"reputation": 3, "user_id": 4554475, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CPWZqrG46vU/AAAAAAAAAAI/AAAAAAAAA7w/4dcPh7KFzE4/photo.jpg?sz=128", "display_name": "stunner2002", "link": "https://stackoverflow.com/users/4554475/stunner2002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 0, "closed_date": 1434608638, "answer_count": 1, "score": 0, "last_activity_date": 1434572670, "creation_date": 1434571954, "question_id": 30901500, "link": "https://stackoverflow.com/questions/30901500/assign-octal-hex-declared-int-uint-to-another-variable", "closed_reason": "Needs details or clarity", "title": "Assign octal/hex declared INT/UINT to another variable", "body": "<p>My <strong>WIN32</strong> (C++) code has a UINT lets call it <strong>number</strong>.\nThe value of this UINT (or INT doesn't matter) start with a <strong>0</strong> and is recognized as an <strong>octal</strong> value. It's possible to use the standart operators and the value will keep the octal-system. The same is possible with hex (with foregoing 0x).\nThe problem is I have to use the Value of <strong>number</strong> in a buffer to calculate with it without changing the value of <strong>number</strong>. I can assign a value like 07777 to buffer on declaration line but if use an operation like <strong>buffer = number</strong> the value in buffer is recognized on decimal base.</p>\n\n<p>Anybody has a solution for me?</p>\n"}, {"tags": ["c++", "c++11", "segmentation-fault", "coredump"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1434571917, "post_id": 30901406, "comment_id": 49841904, "body": "If the compiler gave you a fatal error, what makes you think it output runnable code?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1434571927, "post_id": 30901406, "comment_id": 49841913, "body": "So, what is the problem? Does it compile or not?"}, {"owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "edited": false, "score": 0, "creation_date": 1434571997, "post_id": 30901406, "comment_id": 49841951, "body": "How can I solve it? I need more clues"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1434572114, "post_id": 30901406, "comment_id": 49842012, "body": "Did it compile if you used <code>g++ -std=c++11 -g prueba2.cpp</code>?  If not what was the error?"}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 2, "creation_date": 1434572179, "post_id": 30901406, "comment_id": 49842049, "body": "Your code compiles fine and you got <code>exited normally</code> message. So, what is the problem?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1434572660, "post_id": 30901406, "comment_id": 49842310, "body": "How can you solve <i>what</i>?"}, {"owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "edited": false, "score": 0, "creation_date": 1434572822, "post_id": 30901406, "comment_id": 49842386, "body": "When I add <code>std::cout &lt;&lt; i &lt;&lt; &quot;\\n&quot;;</code>, it prints nothing."}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1434572963, "post_id": 30901406, "comment_id": 49842471, "body": "It <a href=\"http://goo.gl/J8rGPt\" rel=\"nofollow noreferrer\">does for me</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "edited": false, "score": 0, "creation_date": 1434572468, "post_id": 30901625, "comment_id": 49842195, "body": "ok, understood, it generates the file to gdb. Still, your answer is not a solution. how can I solve the general issue of <code>stoi</code>?"}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "edited": false, "score": 0, "creation_date": 1434572558, "post_id": 30901625, "comment_id": 49842255, "body": "What is the &quot;general issue&quot;? It works fine. Just use it. And if you don&#39;t want to compile with C++11, you can use the stream operators to parse your input."}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "reply_to_user": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "edited": false, "score": 0, "creation_date": 1434572575, "post_id": 30901625, "comment_id": 49842262, "body": "@beginner What is &quot;general issue of <code>stoi</code>&quot;, There is no issue in your code."}, {"owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "edited": false, "score": 0, "creation_date": 1434572829, "post_id": 30901625, "comment_id": 49842397, "body": "When I add <code>std::cout &lt;&lt; i &lt;&lt; &quot;\\n&quot;;</code>, it prints nothing."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "edited": false, "score": 0, "creation_date": 1434573434, "post_id": 30901625, "comment_id": 49842734, "body": "@beginner: Yes, it does: <a href=\"http://cpp.sh/3mfsf\" rel=\"nofollow noreferrer\">cpp.sh/3mfsf</a>"}], "tags": [], "owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "is_accepted": false, "score": 0, "last_activity_date": 1434572955, "last_edit_date": 1434572955, "creation_date": 1434572391, "answer_id": 30901625, "question_id": 30901406, "link": "https://stackoverflow.com/questions/30901406/error-with-stoi-and-debugged-with-gdb/30901625#30901625", "title": "Error with stoi and debugged with gdb", "body": "<p><code>std::stoi</code> is a C++11 feature. Therefore your code only compiles, if you use the <code>-std=c++11</code> flags (or the equivalent <code>-std=c++0x</code> flag that you mentioned, which has <em>nothing</em> to do with debugging).</p>\n\n<p>The terminal session you provided also shows that compilation works with those flags and your program runs fine without any problem. If you want to print the parsed result, you can do it like that: <code>std::cout &lt;&lt; i &lt;&lt; std::endl</code></p>\n\n<p>If you don't want to use C++11 features, you can use the <code>&gt;&gt;</code> stream operator to parse your string to an <code>int</code>:</p>\n\n<pre><code>stringstream ss(s);\nint i;\nss &gt;&gt; n;\n</code></pre>\n\n<p>But beware: Other than with <code>stoi</code>, you won't get an exception, if your input doesn't contain a valid number. You will have to check the stream's status yourself.</p>\n"}, {"comments": [{"owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "edited": false, "score": 0, "creation_date": 1434577631, "post_id": 30901972, "comment_id": 49844808, "body": "yeap, it works properly like you say"}, {"owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "reply_to_user": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "edited": false, "score": 1, "creation_date": 1434577730, "post_id": 30901972, "comment_id": 49844847, "body": "It&#39;s always nice to help."}], "tags": [], "owner": {"reputation": 4687, "user_id": 3819850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwYcz.png?s=128&g=1", "display_name": "CinchBlue", "link": "https://stackoverflow.com/users/3819850/cinchblue"}, "is_accepted": true, "score": 1, "last_activity_date": 1434573628, "creation_date": 1434573628, "answer_id": 30901972, "question_id": 30901406, "link": "https://stackoverflow.com/questions/30901406/error-with-stoi-and-debugged-with-gdb/30901972#30901972", "title": "Error with stoi and debugged with gdb", "body": "<p>Yeah, I think you're doing something pretty silly. You probably compiled the first code, which doesn't have the <code>std::cout</code> statement, and you probably executed the compilation steps without <code>-std=c++11</code> which would result in <code>std::stoi</code> not being included beecause <code>std::stoi</code> is from C++11 and onward. The result is still the old executable which prints out nothing.</p>\n\n<p>Recompile using <code>-std=c++11</code> and make sure that you saved your file correctly. <a href=\"http://coliru.stacked-crooked.com/a/5cb443dfded7d065\" rel=\"nofollow\">Your code clearly works.</a></p>\n\n<p>Note: the vanilla port of GCC of MinGW on Windows is flawed and has a few bugs related to C++11 and onwards; using MinGW-w64, if you ever decide to compile on Windows, can help the problem.</p>\n"}], "owner": {"reputation": 1984, "user_id": 1405689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7QUM.jpg?s=128&g=1", "display_name": "Another.Chemist", "link": "https://stackoverflow.com/users/1405689/another-chemist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 960, "favorite_count": 0, "closed_date": 1434607851, "accepted_answer_id": 30901972, "answer_count": 2, "score": -1, "last_activity_date": 1434573628, "creation_date": 1434571686, "last_edit_date": 1495541327, "question_id": 30901406, "link": "https://stackoverflow.com/questions/30901406/error-with-stoi-and-debugged-with-gdb", "closed_reason": "Needs details or clarity", "title": "Error with stoi and debugged with gdb", "body": "<p>My OS is ubuntu 14.04, laptop, i7.</p>\n\n<p>The g++ version is <code>g++ (Ubuntu 4.8.2-19ubuntu1) 4.8.2</code>.</p>\n\n<p>I tried to run a simple code to test <code>stoi</code>:</p>\n\n<pre><code>#include &lt;string&gt;\nint main() \n{\n   std::string s = \"123\";\n   int i = std::stoi(s);\n}\n</code></pre>\n\n<p>When I compile it with: <code>g++ -g prueba2.cpp</code>, I get:</p>\n\n<pre><code>prueba2.cpp: In function \u2018int main()\u2019:\nprueba2.cpp:6:12: error: \u2018stoi\u2019 is not a member of \u2018std\u2019\n    int i = std::stoi(s);\n            ^\n</code></pre>\n\n<p>When I debug it twice first with <code>g++ -std=c++0x -g prueba2.cpp</code> (I also tried with -std=c++11) and then with <code>dbg</code>, I got:</p>\n\n<p><img src=\"https://i.stack.imgur.com/yRq6X.png\" alt=\"enter image description here\"></p>\n\n<p>Then, I also did a simple search and followed the suggestions made in <a href=\"https://stackoverflow.com/questions/27555504/stoi-and-to-string-is-not-a-member-of-std\">here1</a>, <a href=\"https://stackoverflow.com/questions/20145488/cygwin-g-stdstoi-error-stoi-is-not-a-member-of-std\">here2</a> and <a href=\"https://stackoverflow.com/questions/14743904/stdstoi-missing-in-g-4-7-2\">here3</a>, and none worked.</p>\n\n<p>Am I doing something silly?</p>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 1046, "user_id": 1861357, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AVQEB.png?s=128&g=1", "display_name": "Signus", "link": "https://stackoverflow.com/users/1861357/signus"}, "edited": false, "score": 1, "creation_date": 1434571981, "post_id": 30901329, "comment_id": 49841944, "body": "Your matching groups for matching the arguments in <code>addNewPoint</code> were only matching the first two arguments. You may try this regex <code>(tweenArray\\\\.push\\\\(addNewPoint\\\\(posTween,)\\\\s*?((.+?\\\\s*?&zwnj;&#8203;),)+\\\\s*?(.+?)+\\\\)\\\\&zwnj;&#8203;);</code>"}, {"owner": {"reputation": 648, "user_id": 4123678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-6CZhIvQA4Y4/AAAAAAAAAAI/AAAAAAAAABY/fPebTrrOMU8/photo.jpg?sz=128", "display_name": "shockawave123", "link": "https://stackoverflow.com/users/4123678/shockawave123"}, "reply_to_user": {"reputation": 1046, "user_id": 1861357, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AVQEB.png?s=128&g=1", "display_name": "Signus", "link": "https://stackoverflow.com/users/1861357/signus"}, "edited": false, "score": 0, "creation_date": 1434572581, "post_id": 30901329, "comment_id": 49842266, "body": "I&#39;m sorry, i should have been more specific, I only want to capture the second and third argument of the addNewPoint Function. So I want to extrace the &quot;1&quot; and &quot;2&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 648, "user_id": 4123678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-6CZhIvQA4Y4/AAAAAAAAAAI/AAAAAAAAABY/fPebTrrOMU8/photo.jpg?sz=128", "display_name": "shockawave123", "link": "https://stackoverflow.com/users/4123678/shockawave123"}, "edited": false, "score": 0, "creation_date": 1434647469, "post_id": 30901830, "comment_id": 49880152, "body": "Thanks this worked perfectly!  Thank you very much for your help."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": true, "score": 2, "last_activity_date": 1434573424, "last_edit_date": 1434573424, "creation_date": 1434573084, "answer_id": 30901830, "question_id": 30901329, "link": "https://stackoverflow.com/questions/30901329/c-regex-sub-matches-not-appearing/30901830#30901830", "title": "C++ Regex Sub Matches not appearing", "body": "<p>I think regex_match requires the whole string to match.  </p>\n\n<pre><code>Important\nNote that the result is true only if the expression matches the whole of \nthe input sequence. If you want to search for an expression somewhere \nwithin the sequence then use regex_search. If you want to match a prefix of \nthe character string then use regex_search with the flag match_continuous set. \n</code></pre>\n\n<p>So, maybe this would work  </p>\n\n<p><code>\".*?tweenArray.push\\\\(addNewPoint\\\\(posTween,\\\\s*(.+?),\\\\s*(.+?),.*\"</code>  </p>\n\n<pre><code> .*? \n tweenArray . push\\(addNewPoint\\(posTween, \n \\s* \n ( .+? )                       # (1)\n , \\s* \n ( .+? )                       # (2)\n ,\n .* \n</code></pre>\n\n<p>Output:  </p>\n\n<pre><code> **  Grp 0 -  ( pos 0 , len 69 ) \ntweenArray.push(addNewPoint(posTween, 1 , 2, .3, scale, brushWidth));  \n **  Grp 1 -  ( pos 38 , len 2 ) \n1   \n **  Grp 2 -  ( pos 42 , len 1 ) \n2  \n</code></pre>\n"}], "owner": {"reputation": 648, "user_id": 4123678, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-6CZhIvQA4Y4/AAAAAAAAAAI/AAAAAAAAABY/fPebTrrOMU8/photo.jpg?sz=128", "display_name": "shockawave123", "link": "https://stackoverflow.com/users/4123678/shockawave123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 30901830, "answer_count": 1, "score": 1, "last_activity_date": 1434575257, "creation_date": 1434571418, "last_edit_date": 1434575257, "question_id": 30901329, "link": "https://stackoverflow.com/questions/30901329/c-regex-sub-matches-not-appearing", "title": "C++ Regex Sub Matches not appearing", "body": "<p>I am making a regular expression to modify the 2nd and 3rd parameters in a function. I am using the regex.h library that comes with most linux distributions. I can't seem to get the submatches to appear in the code below.</p>\n\n<p>Code:</p>\n\n<pre><code>       string s (\"tweenArray.push(addNewPoint(posTween, 1 , 2, .3, scale, brushWidth));\");\n       regex e (\"(tweenArray.push\\\\(addNewPoint\\\\(posTween,)\\s*(.+?),\\s*(.+?),\");   // matches words beginning by \"sub\"\n       smatch m;\n\n       regex_match ( s, m, e );\n       cout &lt;&lt; \"match \" &lt;&lt; 0 &lt;&lt; \" (\" &lt;&lt; m[0] &lt;&lt; \")\" &lt;&lt; endl;\n       cout &lt;&lt; \"match \" &lt;&lt; 1 &lt;&lt; \" (\" &lt;&lt; m[1] &lt;&lt; \")\" &lt;&lt; endl;\n       cout &lt;&lt; \"match \" &lt;&lt; 2 &lt;&lt; \" (\" &lt;&lt; m[2] &lt;&lt; \")\" &lt;&lt; endl;\n       cout &lt;&lt; \"match \" &lt;&lt; 3 &lt;&lt; \" (\" &lt;&lt; m[3] &lt;&lt; \")\" &lt;&lt; endl;\n       cout &lt;&lt; regex_replace (s,e,\"$1 0, 0\");\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>       match 0 ()\n       match 1 ()\n       match 2 ()\n       match 3 ()\n       tweenArray.push(addNewPoint(posTween,  0 , 0,  .3 scale, brushWidth));\n</code></pre>\n\n<p>THe replace works perfectly, which tells me that the regular expression is correct. However, the sub matches aren't being displayed. Why wont the sub matches display?</p>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1434571533, "post_id": 30901323, "comment_id": 49841694, "body": "Maybe <code>int64_t</code> is <code>long</code>."}, {"owner": {"reputation": 1381, "user_id": 1243798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a10775619c66d0f026dcc1006ab170ca?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1243798/thomas"}, "edited": false, "score": 0, "creation_date": 1434571598, "post_id": 30901323, "comment_id": 49841724, "body": "Just taking a guess here, but 4LL is still 4 and 4 will fit in both a 32bit or 64bit integer...could be wrong though"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 1381, "user_id": 1243798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a10775619c66d0f026dcc1006ab170ca?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1243798/thomas"}, "edited": false, "score": 0, "creation_date": 1434572345, "post_id": 30901323, "comment_id": 49842126, "body": "@Thomas: What&#39;s relevant for overload resolution is the type, not the value. <code>4LL</code>, <code>4L</code>, and <code>4</code> all have the same mathematical value, but they&#39;re all of different types."}, {"owner": {"reputation": 1381, "user_id": 1243798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a10775619c66d0f026dcc1006ab170ca?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1243798/thomas"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1434572436, "post_id": 30901323, "comment_id": 49842176, "body": "@KeithThompson Ok that makes sense, like I said wasn&#39;t sure. Haven&#39;t done any hard core C++ coding in a while. I need to go and get a c++11 book hah alot has changed"}, {"owner": {"reputation": 91026, "user_id": 131433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6eeaf8698180e971e169a925d8e0f4f?s=128&d=identicon&r=PG", "display_name": "bmargulies", "link": "https://stackoverflow.com/users/131433/bmargulies"}, "edited": false, "score": 0, "creation_date": 1434574116, "post_id": 30901323, "comment_id": 49843131, "body": "I expected this to be a duplicate, and, indeed, it was; I just couldn&#39;t find it for myself."}], "answers": [{"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 2, "last_activity_date": 1434573271, "creation_date": 1434573271, "answer_id": 30901880, "question_id": 30901323, "link": "https://stackoverflow.com/questions/30901323/integer-type-ambiguity-for-int64-t/30901880#30901880", "title": "Integer type ambiguity for int64_t", "body": "<p><code>int64_t</code> is a typedef (i.e., an alias) for some predefined type.  It could be <code>long long int</code>, or <code>long int</code>, or even <code>int</code> if type <code>int</code> happens to be 64 bits.</p>\n\n<p>Overload resolution is based on the type of the argument, not its value or its size. Even if <code>long long</code> and <code>int64_t</code> have exactly the same size and representation (as they very likely do), they're still distinct types. <code>4LL</code> is of type <code>long long</code>; that <em>may or may not</em> be the same type as <code>int64_t</code>.</p>\n\n<p>If you want to call <code>put()</code> with an <code>int64_t</code> value of <code>4</code>, you'll need to ensure that your argument is of the right type. For example:</p>\n\n<pre><code>const int64_t arg = 4;\nput(arg);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>put(int64_t(4));\n</code></pre>\n"}], "owner": {"reputation": 91026, "user_id": 131433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/e6eeaf8698180e971e169a925d8e0f4f?s=128&d=identicon&r=PG", "display_name": "bmargulies", "link": "https://stackoverflow.com/users/131433/bmargulies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 0, "closed_date": 1434574084, "answer_count": 1, "score": 2, "last_activity_date": 1434573271, "creation_date": 1434571398, "question_id": 30901323, "link": "https://stackoverflow.com/questions/30901323/integer-type-ambiguity-for-int64-t", "closed_reason": "Duplicate", "title": "Integer type ambiguity for int64_t", "body": "<pre><code> #include &lt;stdint.h&gt;\n class Something { ...\n  void put(int32_t value, int32_t scale = 0);\n  void put(int64_t value, int32_t scale = 0);\n  void put(bool value);\n };\n</code></pre>\n\n<p>a calls to <code>something.put(4LL)</code> is ambiguous. How is int64_t defined so that it is not a perfect match for long long int constant, which is what the error message tells me it is?</p>\n"}, {"tags": ["c++", "c++11", "stl", "constants", "delete-operator"], "comments": [{"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 7, "creation_date": 1434570922, "post_id": 30901105, "comment_id": 49841251, "body": "<i>but I haven&#39;t seen an explanation of the rationale behind the change in behaviour</i> yet, in the SO question you link to: <i>The iterator is only used to indicate a position in the (modifiable) container, and neither in case of insert or erase is the &quot;pointee&quot; of the iterator modified (in case of erase it just conceptually goes out of existence, which is a normal thing to do for const objects).</i>"}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 1, "creation_date": 1434570925, "post_id": 30901105, "comment_id": 49841253, "body": "Basically, if you have a non-const reference to the container, there&#39;s no reason to care about the const-ness of the iterator"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1434571282, "post_id": 30901105, "comment_id": 49841526, "body": "Did you read this: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2350.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2350.pdf</a>?"}, {"owner": {"reputation": 103, "user_id": 3893211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adbccf702a2cc2de27b08978c79fabdc?s=128&d=identicon&r=PG&f=1", "display_name": "j_h", "link": "https://stackoverflow.com/users/3893211/j-h"}, "reply_to_user": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1434571529, "post_id": 30901105, "comment_id": 49841689, "body": "@stijn I did read that point in the original post, but it seems to be a weak argument to say that going out of existence is a &quot;normal thing to do&quot;. The purpose of a const_iterator is to allow access the elements of a container without modifying them. In the case of insert, the existing elements are not modified. In contrast, I would consider erasing to be a particularly severe form of modification."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 4, "creation_date": 1434571710, "post_id": 30901105, "comment_id": 49841778, "body": "@j_h: But you aren&#39;t using the iterator to modify the object, you&#39;re using the collection itself to modify the collection, and you are required to have a non-const lvalue for the collection."}, {"owner": {"reputation": 103, "user_id": 3893211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adbccf702a2cc2de27b08978c79fabdc?s=128&d=identicon&r=PG&f=1", "display_name": "j_h", "link": "https://stackoverflow.com/users/3893211/j-h"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1434572345, "post_id": 30901105, "comment_id": 49842125, "body": "@NathanOliver very informative link, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 3893211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adbccf702a2cc2de27b08978c79fabdc?s=128&d=identicon&r=PG&f=1", "display_name": "j_h", "link": "https://stackoverflow.com/users/3893211/j-h"}, "edited": false, "score": 0, "creation_date": 1434572226, "post_id": 30901492, "comment_id": 49842080, "body": "This is exactly the kind of explanation I was looking for! I think the key point is that erase is being called by the non-const container. If the const_iterator itself had a member function that permitted erasing the container elements, then this would be more of an issue."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 103, "user_id": 3893211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adbccf702a2cc2de27b08978c79fabdc?s=128&d=identicon&r=PG&f=1", "display_name": "j_h", "link": "https://stackoverflow.com/users/3893211/j-h"}, "edited": false, "score": 1, "creation_date": 1434572268, "post_id": 30901492, "comment_id": 49842091, "body": "@j_h: Called on, not by.  The container is effectively a second argument to <code>erase</code>."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 8, "last_activity_date": 1434571940, "creation_date": 1434571940, "answer_id": 30901492, "question_id": 30901105, "link": "https://stackoverflow.com/questions/30901105/why-is-erasing-via-a-const-iterator-allowed-in-c11/30901492#30901492", "title": "Why is erasing via a const_iterator allowed in C++11?", "body": "<p><code>erase</code> and <code>insert</code> are non-<code>const</code> member functions of the collection.  Non-const member functions are the right way to expose mutating operations.</p>\n\n<p>The constness of the arguments are irrelevant; they aren't being used to modify anything.  The collection can be modified because <strong>the collection is non-<code>const</code></strong> (held in the hidden <code>this</code> argument).</p>\n\n<p>Compare:</p>\n\n<pre><code>template &lt;typename T&gt;\nstd::vector&lt;T&gt;::iterator std::vector&lt;T&gt;::erase( std::vector&lt;T&gt;::const_iterator pos );\n                                                                ^^^^^ ok\n</code></pre>\n\n<p>to a similar overload that is NOT allowed</p>\n\n<pre><code>template &lt;typename T&gt;\nstd::vector&lt;T&gt;::iterator std::vector&lt;T&gt;::erase( std::vector&lt;T&gt;::iterator pos ) const;\n                                                                         wrong ^^^^^\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 0, "last_activity_date": 1434572418, "last_edit_date": 1592644375, "creation_date": 1434572418, "answer_id": 30901640, "question_id": 30901105, "link": "https://stackoverflow.com/questions/30901105/why-is-erasing-via-a-const-iterator-allowed-in-c11/30901640#30901640", "title": "Why is erasing via a const_iterator allowed in C++11?", "body": "<ol>\n<li><p>The first question here is whether constness of an iterator is supposed to imply constnes of the entire container or just constness of the elements being iterated over.</p>\n<p>Apparently, it has been decided that the latter is the right approach. Constness of an iterator does not imply constness of the container, it only implies constness of container's elements.</p>\n</li>\n<li><p>Since the beginning of times, <em>construction</em> of an object and its symmetrical counterpart - <em>destruction</em> of an object - were considered meta-operations with regards to the object itself. The object has always been supposed to behave as mutable with regard to these operations, even if it was declared as <code>const</code>. This is the reason you can legally modify <code>const</code> objects in their constructors and destructors. This is the reason you can <code>delete</code> an object of type <code>T</code> through a <code>const T *</code> pointer.</p>\n</li>\n</ol>\n<p>Given the resolution referred to by 1, it becomes clear that 2 should be extended to iterators as well.</p>\n"}], "owner": {"reputation": 103, "user_id": 3893211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adbccf702a2cc2de27b08978c79fabdc?s=128&d=identicon&r=PG&f=1", "display_name": "j_h", "link": "https://stackoverflow.com/users/3893211/j-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 1, "accepted_answer_id": 30901492, "answer_count": 2, "score": 3, "last_activity_date": 1441011320, "creation_date": 1434570697, "last_edit_date": 1495535199, "question_id": 30901105, "link": "https://stackoverflow.com/questions/30901105/why-is-erasing-via-a-const-iterator-allowed-in-c11", "title": "Why is erasing via a const_iterator allowed in C++11?", "body": "<p>As of GCC 4.9.2, it's now possible to compile C++11 code that inserts or erases container elements via a const_iterator.</p>\n\n<p>I can see how it makes sense for insert to accept a const_iterator, but I'm struggling to understand why it makes sense to allow erasure via a const_iterator.</p>\n\n<p>This issue has been <a href=\"https://stackoverflow.com/questions/4885318/calling-erase-with-iterator-vs-const-iterator\">discussed previously</a>, but I haven't seen an explanation of the rationale behind the change in behaviour.</p>\n\n<p>The best answer I can think of is that the purpose of the change was to make the behaviour of const_iterator analogous to that of a const T*.</p>\n\n<p>Clearly a major reason for allowing delete with const T* is to enable declarations such as:</p>\n\n<pre><code>const T* x = new T;\n....\ndelete x;\n</code></pre>\n\n<p>However, it also permits the following less desirable behaviour:</p>\n\n<pre><code>int** x = new int*[2];\nx[0] = new int[2];\nconst int* y = x[0];\ndelete[] y; // deletes x[0] via a pointer-to-const\n</code></pre>\n\n<p>and I'm struggling to see why it's a good thing for const_iterator to emulate this behaviour.</p>\n"}, {"tags": ["c++", "arrays", "templates", "operator-overloading"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1434571013, "post_id": 30901046, "comment_id": 49841308, "body": "<code>Matrix operator + (Matrix tmp)</code>  Operator <code>+</code> should be returning a brand new <code>Matrix</code>, not the existing Matrix.  Returning the existing Matrix would be the job of <code>operator +=</code>."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1434571083, "post_id": 30901046, "comment_id": 49841363, "body": "@NathanOliver I don&#39;t see what the rule of three has to do with this."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1434571461, "post_id": 30901046, "comment_id": 49841647, "body": "@juanchopanza I retracted it.  Saw X when problem was Y."}], "answers": [{"comments": [{"owner": {"reputation": 827, "user_id": 2606441, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/pSRHC.jpg?s=128&g=1", "display_name": "Manolis Pap", "link": "https://stackoverflow.com/users/2606441/manolis-pap"}, "edited": false, "score": 0, "creation_date": 1434571930, "post_id": 30901293, "comment_id": 49841914, "body": "I tried this first and then I&#39;&#39;ve thought <code>this</code> should fix my issue because I had hard time returning the <code>temp_arr</code>. I&#39;ve tried adding <code>Matrix(T _temp[2][2]);</code> to pass the new array but it doesn&#39;t work."}, {"owner": {"reputation": 827, "user_id": 2606441, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/pSRHC.jpg?s=128&g=1", "display_name": "Manolis Pap", "link": "https://stackoverflow.com/users/2606441/manolis-pap"}, "edited": false, "score": 0, "creation_date": 1434572563, "post_id": 30901293, "comment_id": 49842259, "body": "No actually, but I am trying to make it work. You are creating <code>ret</code> and you are adding with <code>tmp</code> , but I want to add <code>tmp</code> with <code>arr</code>.  And also I don&#39;t have an opeartor <code>+=</code> , do I have to make one?"}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "reply_to_user": {"reputation": 827, "user_id": 2606441, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/pSRHC.jpg?s=128&g=1", "display_name": "Manolis Pap", "link": "https://stackoverflow.com/users/2606441/manolis-pap"}, "edited": false, "score": 0, "creation_date": 1434572649, "post_id": 30901293, "comment_id": 49842303, "body": "You cannot change data members in that array. You should implement both as practice to see the difference, but if you want you can just change it to the same looping setting the member array as you go"}, {"owner": {"reputation": 827, "user_id": 2606441, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/pSRHC.jpg?s=128&g=1", "display_name": "Manolis Pap", "link": "https://stackoverflow.com/users/2606441/manolis-pap"}, "edited": false, "score": 0, "creation_date": 1434572804, "post_id": 30901293, "comment_id": 49842373, "body": "I am upvoting this answer also because it&#39;s the part of the solution. I didn&#39;t get that I needed another operator."}], "tags": [], "owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "is_accepted": false, "score": 1, "last_activity_date": 1434571999, "last_edit_date": 1434571999, "creation_date": 1434571329, "answer_id": 30901293, "question_id": 30901046, "link": "https://stackoverflow.com/questions/30901046/templates-with-operation-for-2d-array-addition/30901293#30901293", "title": "Templates with Operation for 2d array addition", "body": "<p>You should not have <code>temp_arr</code> as a class member, instead use a temporary instance in your const operators and return it on the stack</p>\n\n<p>Also, since people should be able to add <code>const</code> instances, make your <code>operator +</code> a <code>const</code> member function:</p>\n\n<pre><code>Matrix operator + (const Matrix&amp; tmp) const\n{\n    Matrix ret(*this);\n    ret+=tmp;\n    return ret;\n}\n</code></pre>\n\n<p>The above should help illustrate the difference between + and += but you may be able to optimize it.</p>\n"}, {"comments": [{"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1434572448, "post_id": 30901594, "comment_id": 49842184, "body": "Isn&#39;t that <code>operator +=</code> ?"}, {"owner": {"reputation": 827, "user_id": 2606441, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/pSRHC.jpg?s=128&g=1", "display_name": "Manolis Pap", "link": "https://stackoverflow.com/users/2606441/manolis-pap"}, "edited": false, "score": 0, "creation_date": 1434572484, "post_id": 30901594, "comment_id": 49842209, "body": "I tried that, but I don&#39;t want the array of <code>s1</code> object to change. After the changes it works exactly as I want!"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1434572589, "post_id": 30901594, "comment_id": 49842272, "body": "There are two issues, the first being the calculation just being wrong, and that the operators are awry.  The answer fixes both."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1434578862, "post_id": 30901594, "comment_id": 49845332, "body": "Operators that don&#39;t change data members are generally made const"}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 2, "last_activity_date": 1434572959, "last_edit_date": 1434572959, "creation_date": 1434572297, "answer_id": 30901594, "question_id": 30901046, "link": "https://stackoverflow.com/questions/30901046/templates-with-operation-for-2d-array-addition/30901594#30901594", "title": "Templates with Operation for 2d array addition", "body": "<p>To fix your issue, you should </p>\n\n<ol>\n<li><p>Remove the <code>temp_arr</code> from your <code>Matrix</code> class and <code>operator +</code>.</p></li>\n<li><p>Change this line in <code>operator +</code> from this:<code>this-&gt;temp_arr[i][j]=arr[i][j]+tmp.arr[i][j];</code> to this: <code>arr[i][j] += tmp.arr[i][j];</code></p></li>\n</ol>\n\n<p>There is no need for <code>temp_arr</code> in your implementation.  </p>\n\n<p>Here is a live example using the changes above:  <a href=\"http://ideone.com/lMF3kT\" rel=\"nofollow\">http://ideone.com/lMF3kT</a></p>\n\n<hr>\n\n<p>The other issue is that you are changing the original <code>Matrix</code> object when calling <code>operator +</code>.  This is counter-intuitive, since <code>+</code> should not change the original object, instead a new object should be returned.</p>\n\n<p>To address this issue, you can move the code (once fixed) out of <code>operator +</code> and move it to <code>operator +=</code>.</p>\n\n<pre><code>Matrix&amp; operator += (const Matrix&amp; tmp)\n{\n    for (int i = 0; i &lt; 2; i++)\n        for (int j = 0; j &lt; 2; j++)\n            arr[i][j] += tmp.arr[i][j];\n    return *this;\n}\n</code></pre>\n\n<p>Note that we return the original object as a reference.  Now, we can implement <code>operator +</code> in terms of <code>operator +=</code>:</p>\n\n<pre><code>Matrix operator + (const Matrix&amp; tmp)\n{\n    Matrix temp(*this);\n    return temp += tmp;\n}\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Made parameters const references.</p>\n"}], "owner": {"reputation": 827, "user_id": 2606441, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/pSRHC.jpg?s=128&g=1", "display_name": "Manolis Pap", "link": "https://stackoverflow.com/users/2606441/manolis-pap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 30901594, "answer_count": 2, "score": -2, "last_activity_date": 1434572959, "creation_date": 1434570526, "last_edit_date": 1434571832, "question_id": 30901046, "link": "https://stackoverflow.com/questions/30901046/templates-with-operation-for-2d-array-addition", "title": "Templates with Operation for 2d array addition", "body": "<p>I have two 2d arrays <code>arr1</code> this belongs to object <code>s1</code> and <code>arr2</code> this belongs to object <code>s2</code> and I want to store the addition to the object <code>s3</code>. After a lot of searching and experimenting with <code>this</code> , this is my code:</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;sstream&gt;\n    using namespace std;\n\n    template &lt;class T&gt;\n    class Matrix\n    {\n       private:\n         T arr[2][2];\n         T temp_arr[2][2];\n\n       public:\n         Matrix();\n         void display();\n         void seter(T _var[2][2]);\n\n         Matrix operator + (Matrix tmp)\n         {\n            for(int i=0;i&lt;2;i++)\n               for(int j=0;j&lt;2;j++)\n                  this-&gt;temp_arr[i][j]=arr[i][j]+tmp.arr[i][j];\n\n            return *this;\n         }\n    };\n\n    template&lt;class T&gt;\n    Matrix&lt;T&gt;::Matrix()\n    {\n    }\n\n\n    template&lt;class T&gt;\n    void Matrix&lt;T&gt;::display()\n    {\n        for(int i=0;i&lt;2;i++)\n        for(int j=0;j&lt;2;j++)\n            cout&lt;&lt;endl&lt;&lt;arr[i][j];\n    }\n\n    template&lt;class T&gt;\n    void Matrix&lt;T&gt;::seter(T _var[2][2])\n    {\n        for(int i=0;i&lt;2;i++)\n            for(int j=0;j&lt;2;j++)\n                arr[i][j]=_var[i][j];\n    }\n\n    int main()\n    {\n     double arr1[2][2];\n     double arr2[2][2];\n\n     double x=2.5,y=3.5;\n\n     for(int i=0;i&lt;2;i++)\n        for(int j=0;j&lt;2;j++)\n            arr1[i][j]=x++;\n\n    for(int i=0;i&lt;2;i++)\n        for(int j=0;j&lt;2;j++)\n            arr2[i][j]=y++;\n\n    Matrix&lt;double&gt; s1;\n    Matrix&lt;double&gt; s2;\n    Matrix&lt;double&gt; s3;\n\n    s1.seter(arr1);\n    s2.seter(arr2);\n\n    s3=s1+s2;\n\n    s1.display();\n    cout&lt;&lt;endl;\n    s2.display();\n    cout&lt;&lt;endl;\n    s3.display();\n\n    return 0;\n }\n</code></pre>\n\n<p>It still returns the array of the object <code>s1</code>, I can't figure why since many examples on the web have something similar to my code.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 2, "creation_date": 1434581110, "post_id": 30901002, "comment_id": 49846211, "body": "Plain QWidgets over QGLWidgets were never properly supported. Can you move to Qt 5 and QOpenGLWidget?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1434581279, "post_id": 30901002, "comment_id": 49846261, "body": "It&#39;d be useful to know your version of Qt. On Qt 5.4 and up, you should be using <code>QOpenGLWidget</code> and that should solve your problem."}, {"owner": {"reputation": 1274, "user_id": 1257146, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/30c95c84e3ee54ad98c2a25b674b612e?s=128&d=identicon&r=PG", "display_name": "Harry", "link": "https://stackoverflow.com/users/1257146/harry"}, "reply_to_user": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1434973240, "post_id": 30901002, "comment_id": 49988309, "body": "Thanks a lot @peppe. It was indeed because I was using Qt &lt; 5. I updated to Qt 5.4 and the overlaying widget now works. If you post this as an answer I will happily accept it."}], "answers": [{"tags": [], "owner": {"reputation": 1274, "user_id": 1257146, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/30c95c84e3ee54ad98c2a25b674b612e?s=128&d=identicon&r=PG", "display_name": "Harry", "link": "https://stackoverflow.com/users/1257146/harry"}, "is_accepted": true, "score": 0, "last_activity_date": 1435249857, "creation_date": 1435249857, "answer_id": 31055880, "question_id": 30901002, "link": "https://stackoverflow.com/questions/30901002/qt-child-widget-does-not-paint-on-empty-canvas/31055880#31055880", "title": "Qt child widget does not paint on empty canvas", "body": "<p>The problem was down to the version of Qt I was using. I ported to Qt 5.4 and used QOpenGlWidget rather than QGLWidget and it works.</p>\n"}], "owner": {"reputation": 1274, "user_id": 1257146, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/30c95c84e3ee54ad98c2a25b674b612e?s=128&d=identicon&r=PG", "display_name": "Harry", "link": "https://stackoverflow.com/users/1257146/harry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 31055880, "answer_count": 1, "score": 0, "last_activity_date": 1435249857, "creation_date": 1434570345, "question_id": 30901002, "link": "https://stackoverflow.com/questions/30901002/qt-child-widget-does-not-paint-on-empty-canvas", "title": "Qt child widget does not paint on empty canvas", "body": "<p>I have a parent QGLWidget which has a child QWidget with only a QSlider. The initialisation of the child widget happens in the constructor of the parents:</p>\n\n<pre><code>GLWidget::GLWidget(const QGLFormat&amp; format, TimeControllers time_controllers,\n                ViewControllers view_controllers, TerrainControllers terrain_controllers, TemperatureEditDialog * temp_edit_dlg,\n                Actions * render_actions, Actions* overlay_actions, Actions * control_actions, Actions * show_actions,\n                QWidget * parent) :  m_latitude_controller(this) {\n...\n</code></pre>\n\n<p>Where <strong>m_latitude_controller</strong> is the QWidget in question.</p>\n\n<p>On first load, it looks fine:\n<img src=\"https://i.stack.imgur.com/FQiLu.png\" alt=\"on first load\"></p>\n\n<p>However, if I use the slider, it turns into this: </p>\n\n<p><img src=\"https://i.stack.imgur.com/4BKWB.png\" alt=\"on slider use\"></p>\n\n<p>Long story short, it seems that on repaint events, the QWidget is not redrawing from scratch but rather drawing over what is previously there. Any ideas?</p>\n"}, {"tags": ["c++", "std"], "comments": [{"owner": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 0, "creation_date": 1434570248, "post_id": 30900885, "comment_id": 49840803, "body": "Why do you want to get <code>0x55 0x00 0x00 0x00 0x01</code>? Are you sure you want to treat it as a byte buffer instead of a textual string? Just asking to make sure"}, {"owner": {"reputation": 3968, "user_id": 2402061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VUGa3.png?s=128&g=1", "display_name": "Ricky Mutschlechner", "link": "https://stackoverflow.com/users/2402061/ricky-mutschlechner"}, "edited": false, "score": 0, "creation_date": 1434570251, "post_id": 30900885, "comment_id": 49840807, "body": "This may be of some help (I&#39;m not flagging as duplicate because I&#39;m honestly not sure): <a href=\"http://stackoverflow.com/questions/191757/c-concatenate-string-and-int\" title=\"c concatenate string and int\">stackoverflow.com/questions/191757/c-concatenate-string-and-&zwnj;&#8203;int</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1434570261, "post_id": 30900885, "comment_id": 49840817, "body": "<code>std::string</code> is not <code>std::stringstream</code>, finding out how to use <code>std::stringstream</code> is easy, and your syntax is made-up. Which book are you using?"}, {"owner": {"reputation": 2852, "user_id": 3047318, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/QPoQU.jpg?s=128&g=1", "display_name": "Pavel Shorokhov", "link": "https://stackoverflow.com/users/3047318/pavel-shorokhov"}, "edited": false, "score": 0, "creation_date": 1434570378, "post_id": 30900885, "comment_id": 49840891, "body": "below I use std::string res(message.str());"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1434570445, "post_id": 30900885, "comment_id": 49840941, "body": "Why is your title talking about <code>std::string</code>? The code you&#39;ve shown is not valid C++, it&#39;s using C&#39;s compound literals which your compiler allows as an extension."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1434570498, "post_id": 30900885, "comment_id": 49840978, "body": "@comm1x <i>&quot;I want to get: <code>0x55 0x00 0x00 0x00 0x01</code>&quot;</i> As content or output?"}, {"owner": {"reputation": 2852, "user_id": 3047318, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/QPoQU.jpg?s=128&g=1", "display_name": "Pavel Shorokhov", "link": "https://stackoverflow.com/users/3047318/pavel-shorokhov"}, "reply_to_user": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 0, "creation_date": 1434570512, "post_id": 30900885, "comment_id": 49840988, "body": "@RaphaelMiedl I need to implement specific socket protocol where 2-5 bytes specify length of next message body"}, {"owner": {"reputation": 2852, "user_id": 3047318, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/QPoQU.jpg?s=128&g=1", "display_name": "Pavel Shorokhov", "link": "https://stackoverflow.com/users/3047318/pavel-shorokhov"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1434570537, "post_id": 30900885, "comment_id": 49841005, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 as a content. After I send It to server."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 2, "last_activity_date": 1434584773, "last_edit_date": 1495541155, "creation_date": 1434570680, "answer_id": 30901099, "question_id": 30900885, "link": "https://stackoverflow.com/questions/30900885/how-do-i-write-an-int-to-a-stringstream/30901099#30901099", "title": "How do I write an int to a stringstream?", "body": "<blockquote>\n  <p><em>\"How append <code>int a = 1;</code> (4 bytes)?\"</em></p>\n</blockquote>\n\n<p>Simply like that:</p>\n\n<pre><code>uint32_t a = 1; // Use uint32_t to be sure to have 4 bytes.\nmessage.write((const char*)&amp;a, sizeof(a));\n</code></pre>\n\n<hr>\n\n<p>As you mention <em>\"specific socket protocol\"</em>, you'll probably need to take care of the network byte order using the <a href=\"https://stackoverflow.com/questions/3173648/what-should-i-include-to-use-htonl\"><code>htonl()</code></a> function:</p>\n\n<pre><code>uint32_t a = htonl(1);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1434570887, "post_id": 30901132, "comment_id": 49841227, "body": "You forgot to right shift before inserting into the stream."}, {"owner": {"reputation": 8657, "user_id": 3042070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecea2672d02faabcfdcc3400ce7e713a?s=128&d=identicon&r=PG", "display_name": "stj", "link": "https://stackoverflow.com/users/3042070/stj"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1434571396, "post_id": 30901132, "comment_id": 49841615, "body": "Absolutely. Thanks, I&#39;ll fix my answer!"}], "tags": [], "owner": {"reputation": 8657, "user_id": 3042070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecea2672d02faabcfdcc3400ce7e713a?s=128&d=identicon&r=PG", "display_name": "stj", "link": "https://stackoverflow.com/users/3042070/stj"}, "is_accepted": false, "score": 0, "last_activity_date": 1434571699, "last_edit_date": 1434571699, "creation_date": 1434570785, "answer_id": 30901132, "question_id": 30900885, "link": "https://stackoverflow.com/questions/30900885/how-do-i-write-an-int-to-a-stringstream/30901132#30901132", "title": "How do I write an int to a stringstream?", "body": "<p>The following will do, with function <code>Append4ByteInteger</code> doing the actual work:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\nstatic std::stringstream&amp; Append4ByteInteger (std::stringstream&amp; stream, int value) {\n  auto v = static_cast&lt;uint32_t&gt;(value);\n\n  stream &lt;&lt; static_cast&lt;unsigned char&gt;(v &gt;&gt; 24);\n  stream &lt;&lt; static_cast&lt;unsigned char&gt;(v &gt;&gt; 16);\n  stream &lt;&lt; static_cast&lt;unsigned char&gt;(v &gt;&gt; 8);\n  stream &lt;&lt; static_cast&lt;unsigned char&gt;(v);\n\n  return stream;\n}\n\nint main () {\n  std::stringstream message;\n  message.write((const char[]) {0x55}, 1); \n\n  Append4ByteInteger(message, 1);\n  std::cout &lt;&lt; \"result: '\" &lt;&lt; message.str() &lt;&lt; \"'\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>You can check that the stream actually contains <code>0x00 0x00 0x00 0x01</code> using a hex dump utility (e.g. <code>hexdump</code>).</p>\n\n<p>Note that the function assumes that the integer has a value of 0 or greater. If you want to ensure that, you may want to use an <code>unsigned int</code> instead, or probably even a <code>uint32_t</code>, as the size of an int is platform-dependent.</p>\n"}, {"tags": [], "owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "is_accepted": false, "score": 0, "last_activity_date": 1434570889, "creation_date": 1434570889, "answer_id": 30901167, "question_id": 30900885, "link": "https://stackoverflow.com/questions/30900885/how-do-i-write-an-int-to-a-stringstream/30901167#30901167", "title": "How do I write an int to a stringstream?", "body": "<p>Writing an <code>int</code> might differ based on internal byte order, big endian, little endian, or others.</p>\n\n<p>It would be more portable to mask off each byte logically, and then put each unsigned char into the stream</p>\n\n<p>You will need to rebuild the <code>int</code> on the recieving side, again using logical operations like shift</p>\n\n<p>It is also likely you will not need all 4 bytes, so you could easily just send 3 for example.</p>\n\n<p>You should look up shifting and masking and understand them if you plan to do binary streams.</p>\n"}], "owner": {"reputation": 2852, "user_id": 3047318, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/QPoQU.jpg?s=128&g=1", "display_name": "Pavel Shorokhov", "link": "https://stackoverflow.com/users/3047318/pavel-shorokhov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2795, "favorite_count": 0, "accepted_answer_id": 30901099, "answer_count": 3, "score": -1, "last_activity_date": 1434584773, "creation_date": 1434569975, "last_edit_date": 1434571433, "question_id": 30900885, "link": "https://stackoverflow.com/questions/30900885/how-do-i-write-an-int-to-a-stringstream", "title": "How do I write an int to a stringstream?", "body": "<p>I have <code>std::stringstream</code> with 1 byte:</p>\n\n<pre><code>std::stringstream message;\nmessage.write((const char[]) {0x55}, 1);\nstd::string res(message.str());\n</code></pre>\n\n<p>How append <code>int a = 1;</code> (4 bytes)?</p>\n\n<p>I want to get as values stored in the <code>message</code>'s underlying <code>std::string</code>:</p>\n\n<pre><code>0x55 0x00 0x00 0x00 0x01\n</code></pre>\n\n<p>And right tool I chose for the job with the sequence of bytes?</p>\n"}, {"tags": ["c++", "c", "visual-studio-2008", "unicode", "wofstream"], "comments": [{"owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "edited": false, "score": 0, "creation_date": 1434569864, "post_id": 30900775, "comment_id": 49840575, "body": "How do you tell result is wrong. Try open the text file with Notepad and tell notepad to open it as Unicode"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1434570245, "post_id": 30900775, "comment_id": 49840799, "body": "Maybe it&#39;s a flushing problem? Try calling MyOutputStream.flush() or adding std::endl somewhere"}, {"owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "edited": false, "score": 0, "creation_date": 1434572478, "post_id": 30900775, "comment_id": 49842205, "body": "I have noticed that the file output is ansi not like with the C code."}, {"owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "edited": false, "score": 0, "creation_date": 1434572492, "post_id": 30900775, "comment_id": 49842211, "body": "i&#39;m using a hex editor to look at the file afterwards."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434578992, "post_id": 30901937, "comment_id": 49845383, "body": "You should not need to supply your own buffer. But outputting a <code>0xFEFF</code> character (Unicode codepoint <code>U+FEFF WIDTH NO-BREAK SPACE</code>) outputs a <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark\" rel=\"nofollow noreferrer\">BOM</a> at the front of the file to help text editors know the file is Unicode encoded.  You could also use <code>MyOutputStream &lt;&lt; L&quot;\\xFEFF&quot;;</code> for that instead of <code>MyOutputStream.put(0xFEFF)</code>."}, {"owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434646119, "post_id": 30901937, "comment_id": 49879375, "body": "well one would have thought so, but I found trying that I get the no output issue."}, {"owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434646209, "post_id": 30901937, "comment_id": 49879431, "body": "So I took out just the: MyOutputStream.put(0xFEFF);     and it still works/opens correctly in notepad, notepad++. but without the buffer it doesn&#39;t write anything out. I did notice by opening the C program output txt file that the FEFF wasn&#39;t in the file at all."}, {"owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434646451, "post_id": 30901937, "comment_id": 49879568, "body": "the final code that works is:-  \t wofstream MyOutputStream(L&quot;c:\\\\test2.txt&quot;, ios_base::binary);  \t if(!MyOutputStream) \t { \t\tAfxMessageBox(L&quot;Error opening file&quot;); \t\treturn; \t} \t\twchar_t buffer1[128];   \t\tMyOutputStream.rdbuf()-&gt;pubsetbuf(buffer1, 128);   \t\tMyOutputStream &lt;&lt; L&quot;test\\r\\n&quot;; \t\tMyOutputStream &lt;&lt; L&quot;\u043d\u0430\u043a\u0430\u0437\u0430\u043d\u0438\u0435\\r\\n&quot;; \t\tMyOutputStream &lt;&lt; L&quot;\u30a6\u30a7\u30d6\u5168\u4f53\u304b\u3089\u691c\u7d22\\r\\n&quot;;                  MyOutputStream.close();"}], "tags": [], "owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "is_accepted": false, "score": 1, "last_activity_date": 1434573517, "creation_date": 1434573517, "answer_id": 30901937, "question_id": 30900775, "link": "https://stackoverflow.com/questions/30900775/c-wofstream-issue-in-unicode-program/30901937#30901937", "title": "c++ wofstream issue in unicode program", "body": "<p>worked it out... here it is:-</p>\n\n<pre><code>    wofstream MyOutputStream(L\"c:\\\\test2.txt\", ios_base::binary);\n\n    wchar_t buffer1[128];  \n    MyOutputStream.rdbuf()-&gt;pubsetbuf(buffer1, 128); \n    MyOutputStream.put(0xFEFF);\n    MyOutputStream &lt;&lt; L\"test\\r\\n\";\n    MyOutputStream &lt;&lt; L\"\u043d\u0430\u043a\u0430\u0437\u0430\u043d\u0438\u0435\\r\\n\";\n    MyOutputStream &lt;&lt; L\"\u30a6\u30a7\u30d6\u5168\u4f53\u304b\u3089\u691c\u7d22\\r\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "edited": false, "score": 0, "creation_date": 1434702807, "post_id": 30921369, "comment_id": 49902223, "body": "note: wifstream is the same, have to use the buffer and use ios_base::binary"}], "tags": [], "owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "is_accepted": false, "score": 0, "last_activity_date": 1434646525, "creation_date": 1434646525, "answer_id": 30921369, "question_id": 30900775, "link": "https://stackoverflow.com/questions/30900775/c-wofstream-issue-in-unicode-program/30921369#30921369", "title": "c++ wofstream issue in unicode program", "body": "<p>the final code that works is:-</p>\n\n<pre><code>  wofstream MyOutputStream(L\"c:\\\\test2.txt\", ios_base::binary); \n  if(!MyOutputStream)\n  {\n    AfxMessageBox(L\"Error opening file\");\n    return;\n  }\n    wchar_t buffer1[128];  \n    MyOutputStream.rdbuf()-&gt;pubsetbuf(buffer1, 128); \n\n    MyOutputStream &lt;&lt; L\"test\\r\\n\";\n    MyOutputStream &lt;&lt; L\"\u043d\u0430\u043a\u0430\u0437\u0430\u043d\u0438\u0435\\r\\n\";\n    MyOutputStream &lt;&lt; L\"\u30a6\u30a7\u30d6\u5168\u4f53\u304b\u3089\u691c\u7d22\\r\\n\";\n\n    MyOutputStream.close();\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1434646525, "creation_date": 1434569604, "question_id": 30900775, "link": "https://stackoverflow.com/questions/30900775/c-wofstream-issue-in-unicode-program", "title": "c++ wofstream issue in unicode program", "body": "<p>Using unicode compile in vs2008\nHow do you output many language characters to a file in C++ with wofstream?</p>\n\n<p>I can do it in C code no problem e.g.</p>\n\n<pre><code> FILE *out;\n if( (out  = _wfopen( L\"test.txt\", L\"wb\" )) != NULL )\n {\n     fwprintf(out,L\"test\\r\\n\");\n     fwprintf(out,L\"\u043d\u0430\u043a\u0430\u0437\u0430\u043d\u0438\u0435\\r\\n\");\n     fwprintf(out,L\"\u30a6\u30a7\u30d6\u5168\u4f53\u304b\u3089\u691c\u7d22\\r\\n\");\n }\n</code></pre>\n\n<p>when I open the file it's all correct, but with below C++ program all I get is the first line and I have tried locale::global(locale(\"\")); with same result.</p>\n\n<pre><code> wofstream MyOutputStream(L\"test.txt\"); \n if(!MyOutputStream)\n {\n    AfxMessageBox(L\"Error opening file\");\n    return;\n }\n\n    MyOutputStream &lt;&lt; L\"test\\r\\n\";\n    MyOutputStream &lt;&lt; L\"\u043d\u0430\u043a\u0430\u0437\u0430\u043d\u0438\u0435\\r\\n\";\n    MyOutputStream &lt;&lt; L\"\u30a6\u30a7\u30d6\u5168\u4f53\u304b\u3089\u691c\u7d22\\r\\n\";\n\n    MyOutputStream.close();\n</code></pre>\n\n<p>and I have tried inserting this with same result:-</p>\n\n<pre><code>  std::locale mylocale(\"\"); \n  MyOutputStream.imbue(mylocale);\n</code></pre>\n"}, {"tags": ["c++", "dictionary", "stl", "unordered-map"], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 5021240, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9131f7c2e7982e208f53348c543b4643?s=128&d=identicon&r=PG&f=1", "display_name": "adrian008", "link": "https://stackoverflow.com/users/5021240/adrian008"}, "edited": false, "score": 0, "creation_date": 1434569646, "post_id": 30900722, "comment_id": 49840437, "body": "Yes I did that in count , forgot in find. Thanks a lot."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 2, "last_activity_date": 1434569412, "creation_date": 1434569412, "answer_id": 30900722, "question_id": 30900654, "link": "https://stackoverflow.com/questions/30900654/c-unordered-map/30900722#30900722", "title": "C++ Unordered Map", "body": "<p>You cannot say</p>\n\n<pre><code>c.find(k-x)\n</code></pre>\n\n<p>Because <code>k</code> is an <code>int</code> and <code>x</code> is a <code>std::pair&lt;int, int&gt;</code>. Do you mean one of these two?</p>\n\n<pre><code>c.find(k - x.first)\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>c.find(k - x.second)\n</code></pre>\n\n<p>As a side note, it is generally unsafe to directly derefernce the returned iterator from <code>find</code> because if <code>find</code> returns <code>.end()</code> (as in, it didn't find an element with that key) then you've got a problem.</p>\n"}], "owner": {"reputation": 395, "user_id": 5021240, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9131f7c2e7982e208f53348c543b4643?s=128&d=identicon&r=PG&f=1", "display_name": "adrian008", "link": "https://stackoverflow.com/users/5021240/adrian008"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 30900722, "answer_count": 1, "score": 1, "last_activity_date": 1434570040, "creation_date": 1434569185, "last_edit_date": 1434570040, "question_id": 30900654, "link": "https://stackoverflow.com/questions/30900654/c-unordered-map", "title": "C++ Unordered Map", "body": "<p>I have a program in which I am using an iterator to get access to a value of a map entry .</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;unordered_map&gt;\n#include &lt;utility&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nint main()\n{\n   int a[]={1,2,4,7,9,3,3,55,66,88,11};\n   int k = 58;\n   unordered_map&lt;int,int&gt; c;\n   int i=0;\n   for(auto x: a)\n   {\n       c.insert(make_pair(x,i));\n       i++;\n   }\n\n   for(auto x: c)\n   {\n     if(c.count(k-x.first)==1) printf(\"%d %d\\n\",x.second,(c.find(k-x))-&gt;second);\n   }\n\n}\n</code></pre>\n\n<p>In the line:</p>\n\n<pre><code>if(c.count(k-x.first)==1) printf(\"%d %d\\n\",x.second,(c.find(k-x))-&gt;second);\n</code></pre>\n\n<p>I am getting errors especially in <code>c.find()-&gt;second</code>. I think it is the way to access elements from the iterator. What is wrong?</p>\n"}, {"tags": ["c++", "typecasting-operator"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1434569521, "post_id": 30900648, "comment_id": 49840368, "body": "In your last loop: <code>cout &lt;&lt; b[j];</code> should be <code>cout &lt;&lt; b[k];</code>"}, {"owner": {"reputation": 1453, "user_id": 3195614, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qw0hw.jpg?s=128&g=1", "display_name": "Zach P", "link": "https://stackoverflow.com/users/3195614/zach-p"}, "edited": false, "score": 0, "creation_date": 1434569540, "post_id": 30900648, "comment_id": 49840379, "body": "You print <code>b[j]</code> instead of <code>b[k]</code>, that&#39;s the problem."}], "answers": [{"tags": [], "owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "is_accepted": false, "score": 1, "last_activity_date": 1434569548, "creation_date": 1434569548, "answer_id": 30900757, "question_id": 30900648, "link": "https://stackoverflow.com/questions/30900648/check-this-typecasting-in-c/30900757#30900757", "title": "Check this typecasting in C++", "body": "<p>The notes as comments below</p>\n\n<pre><code>// initialization of b[0] is required\nwhile (a[i] != ' ')\n{\n    b[j] = a[i] - '0'; // what about higher digits? a 10*b[i] is missing\n    j++; // why? b[0] is not over yet\n    i++;\n    //  cout&lt;&lt;b[j]&lt;&lt;endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 758, "user_id": 4906173, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/775dfb6f5f81291f24e55062cb755147?s=128&d=identicon&r=PG&f=1", "display_name": "cruxion effux", "link": "https://stackoverflow.com/users/4906173/cruxion-effux"}, "is_accepted": false, "score": 1, "last_activity_date": 1434570039, "creation_date": 1434570039, "answer_id": 30900906, "question_id": 30900648, "link": "https://stackoverflow.com/questions/30900648/check-this-typecasting-in-c/30900906#30900906", "title": "Check this typecasting in C++", "body": "<p>Insane outputs ?</p>\n\n<p>You are doing :</p>\n\n<p><code>b[j] = a[i] - '0'</code></p>\n\n<p><code>a[i]</code> when <code>i = 0</code> is <code>1</code> so ascii of <code>1</code>(49)- ascii of <code>0</code>(48) = 1\nso the character corresponding of ascii goes into <code>b[j]</code>(and similarly for others i and j values) and thus you get some confusing characters and not 123 , for 123 you just need to put <code>b[j] = a[i]</code> .</p>\n\n<p>Also note that in the printing loop you should have <code>cout &lt;&lt; b[k]</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 4980421, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437347446586255/picture?type=large", "display_name": "Atraente Homem", "link": "https://stackoverflow.com/users/4980421/atraente-homem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1434571501, "answer_count": 2, "score": -3, "last_activity_date": 1434571119, "creation_date": 1434569167, "last_edit_date": 1434571119, "question_id": 30900648, "link": "https://stackoverflow.com/questions/30900648/check-this-typecasting-in-c", "closed_reason": "Not suitable for this site", "title": "Check this typecasting in C++", "body": "<p>Help me in correcting this.  I want the answer as 123 only, but it shows some insane outputs.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;stack&gt;\n#include&lt;string.h&gt;\nusing namespace std;\nint main()\n{\n    char a[] = \"123 234 435 - \";\n    int i = 0;\n    int b[100];\n    int j = 0;\n    while (a[i] != ' ')\n    {\n        b[j] = a[i] - '0';\n        j++;\n        i++;\n        //  cout&lt;&lt;b[j]&lt;&lt;endl;\n    }\n    for (int k = 0; k&lt;j; k++)\n    {\n        cout &lt;&lt; b[j];\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "nested", "forward-declaration"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1434569252, "post_id": 30900599, "comment_id": 49840213, "body": "One alternative would be to move the typedef line to after the end of the &quot;class Nested {}&quot; block... of course, you wouldn&#39;t be able to use the typedef within that block anymore, so you&#39;d need to explicitly specify the underlying type (&quot;std::shared_ptr&lt;class Nested&gt;&quot;) in your method arguments, instead."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1434569374, "post_id": 30900599, "comment_id": 49840284, "body": "I believe you could also place the typedef <i>in</i> the <code>Nested</code> definition, if you were only planning to use <code>Ptr</code> in the scope of <code>Nested</code>. It certainly <a href=\"http://coliru.stacked-crooked.com/a/74c78deb314e8d87\" rel=\"nofollow noreferrer\">compiles</a>."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1434569416, "post_id": 30900599, "comment_id": 49840312, "body": "Producing the example that motivates the question would not make the example minimal anymore. Do all questions have to be fully motivated?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1434570008, "post_id": 30900599, "comment_id": 49840661, "body": "Then why not make the <code>Ptr</code> typedef of <code>Nested</code> public, if you typedef it in the <code>Nested</code> class? I&#39;m assuming there&#39;s a reason you want to use <code>Ptr</code> rather than something that indicates what <code>Ptr</code> points <i>to?</i>"}, {"owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1434570482, "post_id": 30900599, "comment_id": 49840965, "body": "Don&#39;t waste time writing a page of code motivating the question... not everyone on StackOverflow is incapable of answering unmotivated questions."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1434570733, "post_id": 30900599, "comment_id": 49841132, "body": "@Mehrdad: I thought so. Requiring the full example for the question basically demotivates the asker from doing the work to produce the minimal example."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 0, "creation_date": 1434571339, "post_id": 30900599, "comment_id": 49841570, "body": "@101010: Comments such as <i>Why not do it that way instead</i> are basically asking for the reason for the question."}, {"owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "reply_to_user": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 0, "creation_date": 1434571341, "post_id": 30900599, "comment_id": 49841571, "body": "@101010: I do have a nice sense of humor, but the original comment did not seem to be an attempt at humor. (The Hamlet comment, while humorous, did seem to be asking for a motivation regardless of that.) Either way, the problem is that I myself find it extremely irritating when people force the OP to motivate their question (I&#39;ve been in the same position as the OP and it drives me nuts to have to waste time doing that unnecessarily)."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1434571461, "post_id": 30900599, "comment_id": 49841649, "body": "@jhx. Sorry. I didn&#39;t mean it that way, more as offering a possible way of accomplishing the same task, if that makes any sense at all."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1434571816, "post_id": 30900599, "comment_id": 49841838, "body": "Except when the <i>class-key identifier;</i> syntax is used, a class first declared in an <i>elaborated-type-specifier</i> is always <a href=\"http://stackoverflow.com/questions/24423481/a-class-name-introduced-inside-a-class-is-not-treated-as-a-nested-class-name\">introduced in a namespace or block scope</a>, and never a class scope."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1434571974, "post_id": 30900599, "comment_id": 49841938, "body": "@T.C.: Thanks T.C. My question looks sort of like a duplicate of that one. Do you agree?"}], "answers": [{"comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1434571476, "post_id": 30900888, "comment_id": 49841656, "body": "The <code>class Nested</code> forward declaration makes it clear to the compiler that <code>Nested</code> is nested. Note the use of <code>class Nested</code> inside <code>shared_ptr&lt;&gt;</code>."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1434571768, "post_id": 30900888, "comment_id": 49841811, "body": "I gather you mean the keyword <code>class</code> in the template type area should be enough, so that earlier forward declaration would be redundant.  Logical."}], "tags": [], "owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "is_accepted": false, "score": 1, "last_activity_date": 1434570312, "last_edit_date": 1434570312, "creation_date": 1434569986, "answer_id": 30900888, "question_id": 30900599, "link": "https://stackoverflow.com/questions/30900599/is-there-a-syntax-for-incomplete-nested-type-without-a-forward-declaration/30900888#30900888", "title": "Is there a syntax for incomplete nested type without a forward declaration?", "body": "<p>You should keep that declaration <code>class Nested;</code> in there.</p>\n\n<p>Declaring the <code>Ptr</code> and <code>Nested</code> relationship is a chicken-and-egg problem, and  the forward declaration is the proper way to handle that.</p>\n\n<p>The compiler needs to know that the token <code>Nested</code> is a class, and not something else.  At the point when the compiler reaches <code>Ptr</code>, that info is enough, and details of the class are not yet relevant.  Then the compiler reaches the complete <code>Nested</code> declaration, and the details can be used for all future uses of the class.</p>\n"}, {"comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1434571893, "post_id": 30901339, "comment_id": 49841894, "body": "That still has a forward declaration, though.  (line 2)"}, {"owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "reply_to_user": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 1, "creation_date": 1434572006, "post_id": 30901339, "comment_id": 49841959, "body": "@donjuedo: Hence the <b>&quot;<i>No</i>&quot;</b> and the <b>&quot;<i>work around</i>&quot;</b>, if you actually read the first line."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1434572481, "post_id": 30901339, "comment_id": 49842206, "body": "Yes, I did actually read the first line.  What I&#39;m missing is the motive to reorganize the rest of the declaration, since it doesn&#39;t change the &quot;no work around&quot; part.  You said he needs to, but you didn&#39;t say why."}, {"owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "reply_to_user": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1434573028, "post_id": 30901339, "comment_id": 49842511, "body": "@donjuedo: Well that&#39;s a very different question. Yeah, you&#39;re right, it wasn&#39;t necessary here; I&#39;ll change the answer to fix that. Sometimes the members have cross-references that make this approach useful, though, so I illustrated it."}], "tags": [], "owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "is_accepted": true, "score": 1, "last_activity_date": 1434573205, "last_edit_date": 1434573205, "creation_date": 1434571451, "answer_id": 30901339, "question_id": 30900599, "link": "https://stackoverflow.com/questions/30900599/is-there-a-syntax-for-incomplete-nested-type-without-a-forward-declaration/30901339#30901339", "title": "Is there a syntax for incomplete nested type without a forward declaration?", "body": "<p>No there isn't.</p>\n\n<p>However, you shouldn't need to avoid the forward declarations at all. This works:</p>\n\n<pre><code>class Containing {\n    class NestedInterface;\n    typedef std::shared_ptr&lt;NestedInterface&gt; Ptr;\n    class NestedObject {\n        Ptr ptr_;\n        //...\n    };\n    class NestedInterface {\n        // ...\n    };\n};\n</code></pre>\n\n<p>Sometimes cross-dependencies inside the classes might make this hard to do. In that case, all you need to do is to avoid defining the referencing classes inline, and to instead declare the <em>other</em> classes out-of-line, like this:</p>\n\n<pre><code>class Containing {\n    class NestedInterface;\n    class NestedObject;\n    typedef std::shared_ptr&lt;NestedInterface&gt; Ptr;\n};\nclass Containing::NestedObject {\n    Ptr ptr_;\n    //...\n};\nclass Containing::NestedInterface {\n};\n</code></pre>\n\n<p>Note that, in general, in C++, nested classes are not to be used on a whim the way you might in other languages -- you can generally achieve the same effect with outer classes, and they behave much better that way. (They don't require the definition of the outer class.) Only in a few cases have they been absolutely necessary. (<code>std::allocator&lt;T&gt;::rebind&lt;U&gt;</code> comes to mind.)</p>\n"}], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 30901339, "answer_count": 2, "score": 4, "last_activity_date": 1434573205, "creation_date": 1434568999, "last_edit_date": 1434570211, "question_id": 30900599, "link": "https://stackoverflow.com/questions/30900599/is-there-a-syntax-for-incomplete-nested-type-without-a-forward-declaration", "title": "Is there a syntax for incomplete nested type without a forward declaration?", "body": "<p>The following program produces a diagnostic error.</p>\n\n<pre><code>#include &lt;memory&gt;\nclass Containing {\n    // class Nested;                 // [1]: This line seems required.\n    typedef std::shared_ptr&lt;class Nested&gt; Ptr;\n    class Nested {\n        Ptr &amp; ptr ();\n        void foo (const Ptr &amp;p) {\n            p-&gt;ptr() = ptr()-&gt;ptr(); // [2]: Error here without [1]\n        }\n    };\n};\nint main () {}\n</code></pre>\n\n<p>The produced diagnostic is:</p>\n\n<blockquote>\n<pre><code>prog.cpp:8:14: error: invalid use of incomplete type 'class Nested'\n             p-&gt;ptr() = ptr()-&gt;ptr();\n              ^\nprog.cpp:4:35: error: forward declaration of 'class Nested'`\n     typedef std::shared_ptr&lt;class Nested&gt; Ptr;\n                                   ^\n</code></pre>\n</blockquote>\n\n<p>However, if I uncomment the forward declaration, the compilation succeeds. I believe the reason is that <code>Nested</code> is assumed to be not nested when it is used for <code>shared_ptr&lt;&gt;</code>. If that is so, is there a syntax I can use to let <code>shared_ptr&lt;&gt;</code> know that <code>Nested</code> is nested without the forward declaration? Something like:</p>\n\n<pre><code>class Containing {\n    typedef std::shared_ptr&lt;class Containing::Nested&gt; Ptr;\n    //...\n</code></pre>\n\n<hr>\n\n<p>This question uses a minimal example to illustrate the problem. The actual structure looks like:</p>\n\n<pre><code>class Containing {\n    typedef std::shared_ptr&lt;class NestedInterface&gt; Ptr;\n    class NestedObject {\n        Ptr ptr_;\n        //...\n    };\n    class NestedInterface {\n        virtual NestedObject &amp; object () = 0;\n        void foo (const Ptr &amp;p) {\n            // ...\n        }\n        //...\n    };\n    class NestedType1 : NestedInterface {\n        NestedObject obj_;\n        NestedObject &amp; object () { return obj_; }\n        //...\n    };\n    class NestedType2 : NestedInterface {\n        Containing &amp;c_;\n        NestedObject &amp; object () { return c_.nested_object_; }\n        //...\n    };\n    //...\n</code></pre>\n"}, {"tags": ["c++", "c99"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1434569010, "post_id": 30900554, "comment_id": 49840041, "body": "<a href=\"https://stackoverflow.com/questions/737240/c-c-array-size-at-run-time-w-o-dynamic-allocation-is-allowed\" title=\"c c array size at run time w o dynamic allocation is allowed\">stackoverflow.com/questions/737240/&hellip;</a>"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1434569045, "post_id": 30900554, "comment_id": 49840066, "body": "You cannot do this <code>cin&gt;&gt;n&gt;&gt;m;</code>, then <code>int a[n][m];</code>, the array size must be know at compile time, not run time."}, {"owner": {"reputation": 39, "user_id": 5020791, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wh2xqu_cnLs/AAAAAAAAAAI/AAAAAAAAAGU/4_hp9Okpj0M/photo.jpg?sz=128", "display_name": "hammad Rahman", "link": "https://stackoverflow.com/users/5020791/hammad-rahman"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1434569146, "post_id": 30900554, "comment_id": 49840140, "body": "then how should i take input in this question?"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1434569259, "post_id": 30900554, "comment_id": 49840217, "body": "You can make a <code>std::vector&lt;std::vector&lt;int&gt;&gt;</code>."}, {"owner": {"reputation": 39, "user_id": 5020791, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wh2xqu_cnLs/AAAAAAAAAAI/AAAAAAAAAGU/4_hp9Okpj0M/photo.jpg?sz=128", "display_name": "hammad Rahman", "link": "https://stackoverflow.com/users/5020791/hammad-rahman"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1434569506, "post_id": 30900554, "comment_id": 49840359, "body": "but sir how will i read digit of integer specifically and the array size issue of decalaring its size at compile time is valid in c99"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1434571471, "post_id": 30900554, "comment_id": 49841652, "body": "C99 is not C++. More fun, I believe that trick is only optional in more recent C standards."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1434572017, "post_id": 30900554, "comment_id": 49841963, "body": "<code>if (k = m - 1 &amp;&amp; max&gt;max1) max1 = max;</code> you sure you don&#39;t want <code>k == m - 1</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1434574725, "creation_date": 1434574725, "answer_id": 30902281, "question_id": 30900554, "link": "https://stackoverflow.com/questions/30900554/chackerankerror-in-taking-input/30902281#30902281", "title": "c++:Hackerank:Error in taking input", "body": "<p>Don't have a compiler with me so there's probably a syntax boner or two in there, but the logic walks through on paper.</p>\n\n<p>Builds the storage:</p>\n\n<pre><code>std::cin &gt;&gt; n &gt;&gt; m; //for input of N and M\nstd::vector&lt;std::vector&lt;bool&gt;&gt;list(n,std::vector&lt;bool&gt;(m, false));\n</code></pre>\n\n<p>Loads the storage:</p>\n\n<pre><code>char temp;\nfor (int i = 0; i &lt; n; i++) //for input of N integers of digit size M\n{\n    for (int j = 0; j &lt; m; j++)\n    {\n        std::cin &gt;&gt; temp;\n        if (temp == 1)\n        {\n            list[i][j] = true;\n        }\n    }\n}\n</code></pre>\n\n<p>Runs the algorithm</p>\n\n<pre><code>for (int a = 0; a &lt; n; a++)\n{\n    for (int b = a+1; b &lt; n; b++)\n    {\n        int knowcount = 0;\n        for (int j = 0; j &lt; m; j++)\n        {\n            if (list[a][j] | list[b][j])\n            {\n                knowcount ++;\n            }\n        }\n        if (knowcount &gt; max)\n        {\n            groupcount = 1;\n            max = know;\n        }\n        else if(knowcount == max)\n        {\n            groupcount ++;\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1434579439, "post_id": 30902310, "comment_id": 49845576, "body": "Don&#39;t think of 10101 as the first input. It is a stream. <code>cin &gt;&gt;char</code> will read exactly one character from that stream, skipping and discarding all of the usual whitespace characters. Repeated <code>cin &gt;&gt; char</code> will continue to extract characters one at a time. Wrap <code>while (std::cin &gt;&gt; temp) cout &lt;&lt;temp; </code>in a little quickie program and watch what happens as you type."}, {"owner": {"reputation": 2531, "user_id": 3160529, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/409ccefcab7337f7dc87a4cac668de1d?s=128&d=identicon&r=PG", "display_name": "Shubham", "link": "https://stackoverflow.com/users/3160529/shubham"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1434609518, "post_id": 30902310, "comment_id": 49854130, "body": "@user4581301 yes, you were right. I did not know this. But, the way Hammad has taken input, it&#39;s wrong, isn&#39;t it?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1434609989, "post_id": 30902310, "comment_id": 49854377, "body": "Oh yeah, it&#39;s wrong. The whole line, or as much as the int can eat without causing the conversion to fail, will be read in as one integer."}], "tags": [], "owner": {"reputation": 2531, "user_id": 3160529, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/409ccefcab7337f7dc87a4cac668de1d?s=128&d=identicon&r=PG", "display_name": "Shubham", "link": "https://stackoverflow.com/users/3160529/shubham"}, "is_accepted": false, "score": 0, "last_activity_date": 1434609537, "last_edit_date": 1434609537, "creation_date": 1434574836, "answer_id": 30902310, "question_id": 30900554, "link": "https://stackoverflow.com/questions/30900554/chackerankerror-in-taking-input/30902310#30902310", "title": "c++:Hackerank:Error in taking input", "body": "<p>Your method of input is wrong. According to your method, the input will have to be given like this (with spaces between individual numbers): </p>\n\n<pre><code>1 0 1 0 1\n1 1 1 0 0\n1 1 0 1 0\n0 0 1 0 1\n</code></pre>\n\n<p>Only then it makes sense to create a matrix. But since the format in the question does not contain any space between a number in the same row, thus this method will fail. Taking into consideration the test case, you might be tempted to store the 'N' numbers in a single dimensional integer array, but keep in mind the constraints ('M' can be as big as 500 and int or even unsigned long long int data type cannot store such a big number).</p>\n"}], "owner": {"reputation": 39, "user_id": 5020791, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wh2xqu_cnLs/AAAAAAAAAAI/AAAAAAAAAGU/4_hp9Okpj0M/photo.jpg?sz=128", "display_name": "hammad Rahman", "link": "https://stackoverflow.com/users/5020791/hammad-rahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1434609537, "creation_date": 1434568865, "last_edit_date": 1434569837, "question_id": 30900554, "link": "https://stackoverflow.com/questions/30900554/chackerankerror-in-taking-input", "title": "c++:Hackerank:Error in taking input", "body": "<p>This is a part of my question.I tried many times but couldn't get the answer</p>\n\n<p><strong>Problem Statement</strong></p>\n\n<p>You are given a list of N people who are attending ACM-ICPC World Finals. Each of them are either well versed in a topic or they are not. Find out the maximum number of topics a 2-person team can know. And also find out how many teams can know that maximum number of topics.</p>\n\n<p>Note Suppose a, b, and c are three different people, then (a,b) and (b,c) are counted as two different teams.</p>\n\n<p><strong>Input Format</strong></p>\n\n<p>The first line contains two integers, N and M, separated by a single space, where N represents the number of people, and M represents the number of topics. N lines follow.\nEach line contains a binary string of length M. If the ith line's jth character is 1, then the ith person knows the jth topic; otherwise, he doesn't know the topic.</p>\n\n<p><strong>Constraints</strong> </p>\n\n<pre><code>2\u2264N\u2264500 \n1\u2264M\u2264500\n</code></pre>\n\n<p><strong>Output Format</strong></p>\n\n<p>On the first line, print the maximum number of topics a 2-person team can know. \nOn the second line, print the number of 2-person teams that can know the maximum number of topics.</p>\n\n<p><strong>Sample Input</strong></p>\n\n<pre><code>4 5\n10101\n11100\n11010\n00101\n</code></pre>\n\n<p><strong>Sample Output</strong></p>\n\n<pre><code>5\n2\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>(1, 3) and (3, 4) know all the 5 topics. So the maximal topics a 2-person team knows is 5, and only 2 teams can achieve this.</p>\n\n<p><strong>this is a a part of my work.Any clue how can i get this to work</strong></p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;cstdio&gt;  \n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\nint main() {\n    int n, m, max = 0, max1 = 0, count = 0;\n    cin &gt;&gt; n &gt;&gt; m;                                 //for input of N and M\n    int a[n][m];\n\n    for (int i = 0; i&lt;n; i++)         //for input of N integers of digit size M\n    for (int j = 0; j&lt;m; j + &gt;&gt;\n        cin &gt;&gt; a[i][j];\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        for (int j = 0; j &lt; n; j++)\n        {\n            max = 0;\n            for (int k = 0; k&lt;m; k++)\n            {\n                if (a[i][k] == 1 || a[j][k] == 1) max++;\n                cout &lt;&lt; k;\n                if (k = m - 1 &amp;&amp; max&gt;max1) max1 = max;\n                if (k == m - 1 &amp;&amp; max == max1) count++;;\n\n            }\n        }\n    }\n\n    cout &lt;&lt; max1 &lt;&lt; endl &lt;&lt; count;\n    return 0;\n}\n</code></pre>\n\n<p>I think the way of taking my input logic is wrong.could you please help me out.I am stuck in this question from 5 days.<br>\nPLease only help me on how should i take input and how to read the digit of integer. </p>\n"}, {"tags": ["java", "c++", "java-native-interface"], "comments": [{"owner": {"reputation": 15041, "user_id": 1455016, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ae8ab91a64f21f0e65b69a0bf1ca4904?s=128&d=identicon&r=PG", "display_name": "tbodt", "link": "https://stackoverflow.com/users/1455016/tbodt"}, "edited": false, "score": 0, "creation_date": 1434569156, "post_id": 30900507, "comment_id": 49840151, "body": "Have you considered using multiple arguments, instead of just one array? That would make it much easier."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1434569419, "post_id": 30900507, "comment_id": 49840315, "body": "&quot;call a constructor&quot;:  you mean a java constructor ? And how do you find the appropriate constructor, looking fo rthe appropriate signature ?"}, {"owner": {"reputation": 839, "user_id": 1797963, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/69bb808ce71a42649bde87fc746f5d9e?s=128&d=identicon&r=PG", "display_name": "popgalop", "link": "https://stackoverflow.com/users/1797963/popgalop"}, "edited": false, "score": 0, "creation_date": 1434569832, "post_id": 30900507, "comment_id": 49840542, "body": "I don&#39;t know how many arguments the constructor will take before the method is called."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 1, "creation_date": 1434570813, "post_id": 30900507, "comment_id": 49841187, "body": "Sorry to insist, but for calling a constructor you first need to find it with <code>env-&gt;GetMethodID(cls, &quot;&lt;init&gt;&quot;, signature-string)</code>. So you need to know the number of arguments in your array and their type in order to be able to find the right constructor."}, {"owner": {"reputation": 839, "user_id": 1797963, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/69bb808ce71a42649bde87fc746f5d9e?s=128&d=identicon&r=PG", "display_name": "popgalop", "link": "https://stackoverflow.com/users/1797963/popgalop"}, "edited": false, "score": 0, "creation_date": 1434570973, "post_id": 30900507, "comment_id": 49841281, "body": "I am passing the signature string from java where I it generate within a java method"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1434748258, "post_id": 30900507, "comment_id": 49929173, "body": "Why? You can do everything you&#39;ve described directly in Java using reflection. You don&#39;t need JNI for this."}, {"owner": {"reputation": 839, "user_id": 1797963, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/69bb808ce71a42649bde87fc746f5d9e?s=128&d=identicon&r=PG", "display_name": "popgalop", "link": "https://stackoverflow.com/users/1797963/popgalop"}, "edited": false, "score": 0, "creation_date": 1434759910, "post_id": 30900507, "comment_id": 49932218, "body": "I am trying to dynamically create an enum instance which is blocked by java reflection"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1434788676, "post_id": 30900507, "comment_id": 49937273, "body": "In that case you don&#39;t even need reflection, let alone JNI. You just call the enum&#39;s static <code>valueOf()</code> method wih the string name of the enum. The enum itself is already constructed, by definition."}, {"owner": {"reputation": 839, "user_id": 1797963, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/69bb808ce71a42649bde87fc746f5d9e?s=128&d=identicon&r=PG", "display_name": "popgalop", "link": "https://stackoverflow.com/users/1797963/popgalop"}, "edited": false, "score": 0, "creation_date": 1434806298, "post_id": 30900507, "comment_id": 49941867, "body": "I have a class which takes an enum value in its constructor.  I need to create a new instance of that class using different variables than any of the current enum values currently hold.  I don&#39;t have code access to the enum or class to add a new enum constant so instead I have to construct an enum constant at runtime."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1434866462, "post_id": 30900507, "comment_id": 49955612, "body": "@popgalop This is basically illegal. Even if you succeed, the result won&#39;t be a first-class member of the enum class: for example, <code>valueOf()</code> won&#39;t work. I suggest you have an XY problem here."}], "answers": [{"comments": [{"owner": {"reputation": 839, "user_id": 1797963, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/69bb808ce71a42649bde87fc746f5d9e?s=128&d=identicon&r=PG", "display_name": "popgalop", "link": "https://stackoverflow.com/users/1797963/popgalop"}, "edited": false, "score": 0, "creation_date": 1434623214, "post_id": 30905849, "comment_id": 49862813, "body": "This is not exactly what I am trying to do.  The constructor that I am calling does not take an array as an argument.  The problem is that different versions of the same class can be passed to the c++ function with each one containing a different method signature.  I need my c++ method to generically be able to create any object with its passed arguments."}], "tags": [], "owner": {"reputation": 294, "user_id": 4011478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JYmmB.jpg?s=128&g=1", "display_name": "Ruben O. Chiavone", "link": "https://stackoverflow.com/users/4011478/ruben-o-chiavone"}, "is_accepted": true, "score": 2, "last_activity_date": 1453240539, "last_edit_date": 1453240539, "creation_date": 1434596872, "answer_id": 30905849, "question_id": 30900507, "link": "https://stackoverflow.com/questions/30900507/call-newobject-method-jni-with-params-in-jobjectarray/30905849#30905849", "title": "Call NewObject method jni with params in jobjectarray", "body": "<p>EDIT:</p>\n\n<p>Sorry I misunderstood your question. You can achieve this by using the other two ways that JNI API provides for creating objects (from <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html\" rel=\"nofollow\">docs</a>):</p>\n\n<pre><code>jobject NewObjectA(JNIEnv *env, jclass clazz,\njmethodID methodID, const jvalue *args);\n\njobject NewObjectV(JNIEnv *env, jclass clazz,\njmethodID methodID, va_list args);\n</code></pre>\n\n<p><strong>NewObjectA</strong></p>\n\n<blockquote>\n  <p>Programmers place all arguments that are to be passed to the constructor in an args array of jvalues that immediately follows the methodID argument. NewObjectA() accepts the arguments in this array, and, in turn, passes them to the Java method that the programmer wishes to invoke.</p>\n</blockquote>\n\n<p><strong>NewObjectV</strong></p>\n\n<blockquote>\n  <p>Programmers place all arguments that are to be passed to the constructor in an args argument of type va_list that immediately follows the methodID argument. NewObjectV() accepts these arguments, and, in turn, passes them to the Java method that the programmer wishes to invoke.</p>\n</blockquote>\n\n<p>So, I made a sample program that shows how to use it.</p>\n\n<p><strong>Foo.java</strong></p>\n\n<pre><code>public class Foo {\n\n    private int bar;\n    private String baaz;\n\n    public Foo(int bar) {\n        this(bar, \"\");\n    }\n\n    public Foo(int bar, String baaz) {\n        this.bar = bar;\n        this.baaz = baaz;\n    }\n\n    public void method1() {\n        this.bar++;\n\n        System.out.println(bar);\n        System.out.println(baaz);\n    }\n}\n</code></pre>\n\n<p><strong>Bar.java</strong></p>\n\n<pre><code>public class Bar {\n\n    public Bar() {\n    }\n\n    public static native Foo createFoo(String signature, Object ... params);\n}\n</code></pre>\n\n<p><strong>Bar.h</strong></p>\n\n<pre><code>/* DO NOT EDIT THIS FILE - it is machine generated */\n#include &lt;jni.h&gt;\n/* Header for class Bar */\n\n#ifndef _Included_Bar\n#define _Included_Bar\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n/*\n * Class:     Bar\n * Method:    createFoo\n * Signature: (Ljava/lang/String;[Ljava/lang/Object;)LFoo;\n */\nJNIEXPORT jobject JNICALL Java_Bar_createFoo\n  (JNIEnv *, jclass, jstring, jobjectArray);\n\n#ifdef __cplusplus\n}\n#endif\n#endif\n</code></pre>\n\n<p><strong>Bar.c</strong></p>\n\n<pre><code>#include \"Bar.h\"\n\n#include &lt;stdlib.h&gt;\n\njobject JNICALL Java_Bar_createFoo\n  (JNIEnv * env, jclass class, jstring signature, jobjectArray params) {\n\n    // method signature in char *\n    const char * signatureChar = (*env)-&gt;GetStringUTFChars(env, signature, 0);\n\n    jvalue * args;\n    int i, size;\n\n    // retrieve foo class\n    jclass fooClass = (*env)-&gt;FindClass(env, \"LFoo;\");\n\n    // retrieve foo construtor\n    jmethodID fooConstructor = (*env)-&gt;GetMethodID(env, fooClass, \"&lt;init&gt;\", signatureChar);\n\n    // operate over params\n    // ...\n\n    // TODO: find out a way to retrieve size from constructor\n    size = 2;\n\n    args = malloc(size * sizeof(jvalue));\n\n    for (i = 0; i &lt; size; i++) {\n        args[i].l = (*env)-&gt;GetObjectArrayElement(env, params, i);\n    }\n\n    return (*env)-&gt;NewObjectA(env, fooClass, fooConstructor, args);\n}\n</code></pre>\n\n<p><strong>Main.java</strong></p>\n\n<pre><code>public class Main {\n\n    static {\n        System.loadLibrary(\"YOUR_LIBRARY_NAME_HERE\");\n    }\n\n    public static void main(String[] args) {\n        Foo foo = Bar.createFoo(\"(ILjava/lang/String;)V\", -12312141, \"foo\");\n\n        System.out.println(foo);\n\n        foo.method1();\n\n        foo = Bar.createFoo(\"(I)V\", -12312141, \"foo\");\n\n        System.out.println(foo);\n\n        foo.method1();\n\n        foo = Bar.createFoo(\"(I)V\", -12312141);\n\n        System.out.println(foo);\n\n        foo.method1();\n    }\n}\n</code></pre>\n\n<p>Warning: it is still not 100% funciontal because I couldn't figure out how to retrieve constructor argument size based on constructor signature.</p>\n"}, {"tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": false, "score": 2, "last_activity_date": 1434866304, "creation_date": 1434866304, "answer_id": 30961708, "question_id": 30900507, "link": "https://stackoverflow.com/questions/30900507/call-newobject-method-jni-with-params-in-jobjectarray/30961708#30961708", "title": "Call NewObject method jni with params in jobjectarray", "body": "<p>This is a bit tricky because you've been passed a <code>jobjectArray</code>. This means that primitive types have been boxed (e.g. <code>int</code>s are <code>java.lang.Integer</code> instances in your array), and you have to unbox them before passing them onto a constructor.</p>\n\n<p>What you're going to have to do is parse the method signature string (it's not nearly as bad as you might think), walk over every <code>jobject</code> in your array and convert it to the corresponding type (using an unboxing conversion if necessary).</p>\n\n<p>Sadly, there's no built-in way in JNI to perform unboxing, and thus you're going to have to do it manually by invoking the appropriate methods of the boxed values (e.g. <code>Integer.intValue</code> to get <code>int</code>s).</p>\n\n<p>The basic idea:</p>\n\n<pre><code>jobject createObject(JNIEnv *env, jclass clazz, jmethodID constructor, const char *argstr, jobjectArray *args) {\n    int n = env-&gt;GetArrayLength(args);\n    jvalue *values = new jvalue[n];\n    const char *argptr = argstr;\n    for(int i=0; i&lt;n; i++) {\n        jobject arg = env-&gt;GetObjectArrayElement(args, i);\n        if(*argptr == 'B') { /* byte */\n            values[i].b = object_to_byte(arg);\n        }\n        /* cases for all of the other primitive types...*/\n        else if(*argptr == '[') { /* array */\n            while(*argptr == '[') argptr++;\n            if(*argptr == 'L')\n                while(*argptr != ';') argptr++;\n            values[i].l = arg;\n        } else if(*argptr == 'L') { /* object */\n            while(*argptr != ';') argptr++;\n            values[i].l = arg;\n        }\n        argptr++;\n        env-&gt;DeleteLocalRef(arg);\n    }\n    return env-&gt;NewObjectA(clazz, methodID, values);\n}\n</code></pre>\n\n<p><code>object_to_byte</code> and other conversion functions will be defined as functions which unbox the relevant type (e.g. <code>object_to_byte</code> will use the JNI to call <code>java.lang.Byte.byteValue</code> on the given object).</p>\n"}], "owner": {"reputation": 839, "user_id": 1797963, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/69bb808ce71a42649bde87fc746f5d9e?s=128&d=identicon&r=PG", "display_name": "popgalop", "link": "https://stackoverflow.com/users/1797963/popgalop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4493, "favorite_count": 0, "accepted_answer_id": 30905849, "answer_count": 2, "score": 3, "last_activity_date": 1453240539, "creation_date": 1434568744, "last_edit_date": 1434769047, "question_id": 30900507, "link": "https://stackoverflow.com/questions/30900507/call-newobject-method-jni-with-params-in-jobjectarray", "title": "Call NewObject method jni with params in jobjectarray", "body": "<p>I am working in JNI with c++ and I have created a method where a series of parameters are passed to my native method as a jobjectarray.  I would like to call a constructor in JNI using those parameters.  However the NewObject method does not accept a jobject array instead using an ellipsis.  How would I accomplish this task?  I do not know how many parameters the constructor will be taking before the method is called and the signature string is passed along as well from java.  The constructor that I am calling does not take an array as an argument, instead different versions of the same class can be passed to the c++ function with each one containing a different method signature. I need my c++ method to generically be able to create any object with its passed arguments.  I am using visual studio as my IDE.  I understand I might need an array of jvalues but I don't understand how to get that from a jobjectarray.</p>\n"}, {"tags": ["c++", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 256, "user_id": 2896730, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/uswna.jpg?s=128&g=1", "display_name": "Ben Kushigian", "link": "https://stackoverflow.com/users/2896730/ben-kushigian"}, "edited": false, "score": 0, "creation_date": 1434569251, "post_id": 30900543, "comment_id": 49840212, "body": "Brilliant! I wonder why this worked for the original Makefile - I copied and pasted the source-code so everything should have been identical."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user184968"}, "is_accepted": true, "score": 1, "last_activity_date": 1434569206, "last_edit_date": 1434569206, "creation_date": 1434568842, "answer_id": 30900543, "question_id": 30900460, "link": "https://stackoverflow.com/questions/30900460/make-not-searching-in-include-path/30900543#30900543", "title": "make not searching in include path", "body": "<p>for g++ you need to define in your makefile</p>\n\n<pre><code>CXXFLAGS = $(COMPILERFLAGS) -g $(INCDIRS)\n</code></pre>\n\n<p>And since you use both C files and C++ files then define both in your makefile:</p>\n\n<pre><code>CFLAGS = $(COMPILERFLAGS) -g $(INCDIRS)\nCXXFLAGS = $(COMPILERFLAGS) -g $(INCDIRS)\n</code></pre>\n\n<p>CFLAGS is used by make when it compiles C files, CXXFLAGS is used when make compiles C++ files. See <a href=\"http://www.gnu.org/software/make/manual/html_node/Implicit-Variables.html\" rel=\"nofollow\">http://www.gnu.org/software/make/manual/html_node/Implicit-Variables.html</a></p>\n\n<pre><code>CFLAGS\n\n    Extra flags to give to the C compiler.\nCXXFLAGS\n\n    Extra flags to give to the C++ compiler.\n</code></pre>\n"}], "owner": {"reputation": 256, "user_id": 2896730, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/uswna.jpg?s=128&g=1", "display_name": "Ben Kushigian", "link": "https://stackoverflow.com/users/2896730/ben-kushigian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 30900543, "answer_count": 1, "score": 1, "last_activity_date": 1434569206, "creation_date": 1434568622, "question_id": 30900460, "link": "https://stackoverflow.com/questions/30900460/make-not-searching-in-include-path", "title": "make not searching in include path", "body": "<p>I'm working through an OpenGL tutorial (OpenGL SuperBible 5) and I'm trying to get the supplied Makefile to work for my own program. I'm trying to get <code>make</code> to access a header file <code>GLTools.h</code> in my <code>/home/ben/lib/GLTools/include/</code> directory and I'm including it in my Makefile with <code>-I/home/ben/lib/GLTools/include/</code> (actually I'm using <code>-I$(SHAREDINCPATH)</code>) but <code>make</code> complains that there is no such file. Here is my <code>Makefile</code> (I've explicitly mentioned where I have edited the original <code>Makefile</code>):</p>\n\n<pre><code>MAIN = Triangle\nSRCPATH = ./      # Edited: src is in CWD\nSHAREDPATH = /home/ben/lib/GLTools/src/ # Edited to copied GLTools/src dir\nSHAREDINCPATH = /home/ben/lib/GLTools/include/ # Edited to copied dir\nLIBDIRS = -L/usr/X11R6/lib -L/usr/X11R6/lib64 -L/usr/local/lib\nINCDIRS = -I/usr/include -I/usr/local/include -I/usr/include/GL -I$(SHAREDINCPATH)  -I$(SHAREDINCPATH)GL\n\nCC = g++\nCFLAGS = $(COMPILERFLAGS) -g $(INCDIRS)\nLIBS = -lX11 -lglut -lGL -lGLU -lm\n\nprog : $(MAIN)\n\n$(MAIN).o : $(SRCPATH)$(MAIN).cpp\nglew.o    : $(SHAREDPATH)glew.c\nGLTools.o    : $(SHAREDPATH)GLTools.cpp\nGLBatch.o    : $(SHAREDPATH)GLBatch.cpp\nGLTriangleBatch.o    : $(SHAREDPATH)GLTriangleBatch.cpp\nGLShaderManager.o    : $(SHAREDPATH)GLShaderManager.cpp\nmath3d.o    : $(SHAREDPATH)math3d.cpp\n\n$(MAIN) : $(MAIN).o glew.o\n    $(CC) $(CFLAGS) -o $(MAIN) $(LIBDIRS) $(SRCPATH)$(MAIN).cpp $(SHAREDPATH)glew.c $(SHAREDPATH)GLTools.cpp $(SHAREDPATH)GLBatch.cpp $(SHAREDPATH)GLTriangleBatch.cpp $(SHAREDPATH)GLShaderManager.cpp $(SHAREDPATH)math3d.cpp $(LIBS)\n\nclean:\n    rm -f *.o\n</code></pre>\n\n<p>...and here is the <code>make</code> complaint:</p>\n\n<pre><code>ben@crunchbang:~/Code/C++/OpenGL/SuperBible5/SB5/Listings$ make\ng++    -c -o Triangle.o Triangle.cpp\nTriangle.cpp:4:50: fatal error: GLTools.h: No such file or directory\ncompilation terminated.\nmake: *** [Triangle.o] Error 1\n</code></pre>\n\n<p>As a sanity check I'm printing out the location of <code>GLTools.h</code>:</p>\n\n<pre><code>ben@crunchbang:~/Code/C++/OpenGL/SuperBible5/SB5/Listings$ ls /home/ben/lib/GLTools/include/\nGL             GLFrame.h              GLMatrixStack.h    GLTriangleBatch.h\nGLBatchBase.h  GLFrustum.h            GLShaderManager.h  math3d.h\nGLBatch.h      GLGeometryTransform.h  GLTools.h          StopWatch.h\n</code></pre>\n\n<p>Any idea why I cannot compile? I am pointing right at the <code>GLTools.h</code> with <code>INCDIRS</code>, right? </p>\n\n<p>Also, I cannot find a declaration of <code>COMPILERFLAGS</code> anywhere in the makefile -- is this system-defined?</p>\n"}, {"tags": ["c++", "memory-management", "cuda"], "comments": [{"owner": {"reputation": 3273, "user_id": 1428839, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/2oKLx.jpg?s=128&g=1", "display_name": "JorenHeit", "link": "https://stackoverflow.com/users/1428839/jorenheit"}, "edited": false, "score": 0, "creation_date": 1434568351, "post_id": 30900329, "comment_id": 49839651, "body": "Can&#39;t you let Blitz++ work on memory that you pre-allocated with cudaHostAlloc? Or does blitz take care of all the memory management per se?"}, {"owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "reply_to_user": {"reputation": 3273, "user_id": 1428839, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/2oKLx.jpg?s=128&g=1", "display_name": "JorenHeit", "link": "https://stackoverflow.com/users/1428839/jorenheit"}, "edited": false, "score": 0, "creation_date": 1434568956, "post_id": 30900329, "comment_id": 49840005, "body": "@JorenHeit That might work initially, but all over our code we use size-changing functions. That means either rewriting blitz++ or hunting down every function call that would change the allocated memory address. Neither sounds very fun..."}, {"owner": {"reputation": 3273, "user_id": 1428839, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/2oKLx.jpg?s=128&g=1", "display_name": "JorenHeit", "link": "https://stackoverflow.com/users/1428839/jorenheit"}, "edited": false, "score": 0, "creation_date": 1434576137, "post_id": 30900329, "comment_id": 49844148, "body": "does blitz accept STL containers like <code>std::vector</code>? If so, you could write a custom allocator that uses <code>cudaHostAlloc</code>..."}, {"owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "reply_to_user": {"reputation": 3273, "user_id": 1428839, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/2oKLx.jpg?s=128&g=1", "display_name": "JorenHeit", "link": "https://stackoverflow.com/users/1428839/jorenheit"}, "edited": false, "score": 0, "creation_date": 1434648348, "post_id": 30900329, "comment_id": 49880630, "body": "@JorenHeit That is certanly worth looking into. There are plans to eventually remove blitz, so I think I may wrap blitz in some kind of adapter that ensures proper allocation (as your first comment suggests.) That would make the eventual refactor easier, but it also means I would have to implements expression templates... yuck."}], "answers": [{"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 2, "last_activity_date": 1434568658, "creation_date": 1434568658, "answer_id": 30900479, "question_id": 30900329, "link": "https://stackoverflow.com/questions/30900329/using-a-data-pointer-with-cuda-and-integrated-memory/30900479#30900479", "title": "Using a data pointer with CUDA (and integrated memory)", "body": "<p>The pointer has to be created (i.e. allocated) with <code>cudaHostAlloc</code>, even on integrated systems like Jetson.</p>\n\n<p>The reason for this is that the GPU requires (zero-copy) memory to be <em>pinned</em>, i.e. removed from the host demand-paging system.  Ordinary allocations are subject to demand-paging, and may not be used as zero-copy i.e. <em>mapped</em> memory for the GPU.</p>\n"}], "owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 30900479, "answer_count": 1, "score": 1, "last_activity_date": 1434648497, "creation_date": 1434568190, "last_edit_date": 1434648497, "question_id": 30900329, "link": "https://stackoverflow.com/questions/30900329/using-a-data-pointer-with-cuda-and-integrated-memory", "title": "Using a data pointer with CUDA (and integrated memory)", "body": "<p>I am using a board with integrated gpu and cpu memory. I am also using an external matrix library (Blitz++). I would like to be able to grab the pointer to my data from the matrix object and pass it into a cuda kernel. After doing some digging, it sounds like I want to use some form of a zero copy by calling <code>cudaHostGetDevicePointer</code>. What I am unsure of is the allocation of the memory. Do I have to have created the pointer using <code>cudaHostAlloc</code>? I do not want to have to re-write Blitz++ to do <code>cudaHostAlloc</code> if I don't have to.</p>\n\n<p>My code currently works, but does a copy of the matrix data every time. That is not needed on the integrated memory cards.</p>\n"}, {"tags": ["c++", "vector", "push-back"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 6, "creation_date": 1434566641, "post_id": 30899794, "comment_id": 49838594, "body": "<i>&quot;I know that for every new there is a delete for the correct object (debugging to cout)&quot;</i> Apparently not! What would be useful, as always, is a <a href=\"http://stackoverflow.com/mcve\">testcase that reproduces the problem</a>. :)"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1434566770, "post_id": 30899794, "comment_id": 49838660, "body": "Are you calling this like <code>addDirectoryNode(new Directory());</code>? Depending on who&#39;s claiming ownership of these pointers, you may want to consider changing <code>contents</code> to a <code>std::vector&lt;std::unique_ptr&lt;Directory&gt;&gt;</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1434566823, "post_id": 30899794, "comment_id": 49838695, "body": "<code>I am holding the pointers not only in the objects, but also in the Filesystem class and I am deleting them in Filesystem&#39;s destructor,</code>  Describing what you&#39;re doing is not enough.  If we could make programs bug-free by describing them, there would be no bugs.  Let&#39;s see the code."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1434566946, "post_id": 30899794, "comment_id": 49838769, "body": "@CoryKramer How so, if she made sure to call <code>delete</code> on every pointer held in the <code>contents</code> container?"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1434566971, "post_id": 30899794, "comment_id": 49838786, "body": "@jaggedSpire I will assume they aren&#39;t doing so until I see them prove otherwise :)"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1434567078, "post_id": 30899794, "comment_id": 49838852, "body": "@Lea In the end, you&#39;re going to need to post a code sample reproducing the problem, so we can spot where you&#39;re missing your <code>delete</code>s"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1434567211, "post_id": 30899794, "comment_id": 49838943, "body": "@CoryKramer any reason you prefer <code>unique_ptr</code> to <code>shared_ptr</code>?"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1434567334, "post_id": 30899794, "comment_id": 49839016, "body": "@user4581301 It&#39;s not up to me, I don&#39;t know the design of OP&#39;s program, they would have to decide which of the two (if either) is more appropriate. I just meant they should consider smart pointers in general"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1434568044, "post_id": 30899794, "comment_id": 49839457, "body": "@CoryKramer thanks. Just wondering if you had something sneaky in mind I wasn&#39;t seeing."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1434569876, "post_id": 30899794, "comment_id": 49840586, "body": "@user4581301: Generally speaking, you <i>should</i> prefer <code>unique_ptr</code> over <code>shared_ptr</code>. The need for shared ownership is something that should be demonstrated, and if it is not, then one should default to <code>unique_ptr</code> (assuming of course, that simply storing objects by value has already been ruled out for a very good reason)"}, {"owner": {"reputation": 213, "user_id": 2476330, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6nkAi.jpg?s=128&g=1", "display_name": "Lea", "link": "https://stackoverflow.com/users/2476330/lea"}, "edited": false, "score": 0, "creation_date": 1434570952, "post_id": 30899794, "comment_id": 49841266, "body": "sorry for the delay, I&#39;m going to edit the post now. :)"}, {"owner": {"reputation": 1031, "user_id": 535473, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/1Bkf9.jpg?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/535473/simon"}, "edited": false, "score": 0, "creation_date": 1434576866, "post_id": 30899794, "comment_id": 49844471, "body": "Do you have virtual destructor in Node class?"}], "answers": [{"tags": [], "owner": {"reputation": 1031, "user_id": 535473, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/1Bkf9.jpg?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/535473/simon"}, "is_accepted": true, "score": 1, "last_activity_date": 1434578778, "creation_date": 1434578778, "answer_id": 30903238, "question_id": 30899794, "link": "https://stackoverflow.com/questions/30899794/vectorpush-back-a-creating-leaks/30903238#30903238", "title": "vector::push_back ( A * ) creating leaks?", "body": "<p>If you do not have virtual destructor in your Node class, deleting your Directory objects through base class pointer is undefined behaviour. Your Directory class' s destructor won't be called, also the destructor of the contained vector. This might cause the memory leak.</p>\n"}], "owner": {"reputation": 213, "user_id": 2476330, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/6nkAi.jpg?s=128&g=1", "display_name": "Lea", "link": "https://stackoverflow.com/users/2476330/lea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "accepted_answer_id": 30903238, "answer_count": 1, "score": -3, "last_activity_date": 1434578778, "creation_date": 1434566489, "last_edit_date": 1434575851, "question_id": 30899794, "link": "https://stackoverflow.com/questions/30899794/vectorpush-back-a-creating-leaks", "title": "vector::push_back ( A * ) creating leaks?", "body": "<p>I'm trying to create a really simple virtual filesystem (represented as a tree)(for my FTP server) mapped to several places on my real one. Nodes are represented by a Node object which holds pointers to its contents in a vector.</p>\n\n<p>I know that for every new there is a delete for the correct object (debugging to cout), yet I get some \"definitely lost\" bytes from valgrind.</p>\n\n<p>I am holding the pointers not only in the objects, but also in the Filesystem class and I am deleting them in Filesystem's destructor, so things happening to the pointers held in Node shouldn't matter... right? Or am I missing something here?</p>\n\n<p>valgrind:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>==23638== 8 bytes in 1 blocks are definitely lost in loss record 1 of 1\n==23638==    at 0x4C2B0E0: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==23638==    by 0x407786: __gnu_cxx::new_allocator&lt;Node*&gt;::allocate(unsigned long, void const*) (new_allocator.h:104)\n==23638==    by 0x40733F: std::_Vector_base&lt;Node*, std::allocator&lt;Node*&gt; &gt;::_M_allocate(unsigned long) (stl_vector.h:168)\n==23638==    by 0x406FEB: _ZNSt6vectorIP4NodeSaIS1_EE19_M_emplace_back_auxIJS1_EEEvDpOT_ (stl_vector.h:404)\n==23638==    by 0x406F2F: _ZNSt6vectorIP4NodeSaIS1_EE12emplace_backIJS1_EEEvDpOT_ (vector.tcc:101)\n==23638==    by 0x40404F: std::vector&lt;Node*, std::allocator&lt;Node*&gt; &gt;::push_back(Node*&amp;&amp;) (stl_vector.h:920)\n==23638==    by 0x402FD1: Directory::addDirectoryNode(Directory*) (Directory.cpp:20)\n==23638==    by 0x409600: Filesystem::addDirectory(std::string, std::string) (Filesystem.cpp:47)\n==23638==    by 0x40B519: Configuration::loadPairs(std::basic_ifstream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;) (Configuration.cpp:85)\n==23638==    by 0x40B85C: Configuration::load(std::string) (Configuration.cpp:103)\n==23638==    by 0x4081A9: main (main.cpp:41)\n</code></pre>\n\n<p>I am not quite sure what else would be useful. </p>\n\n<p>Filesystem.hpp: </p>\n\n<pre><code>class Filesystem\n{\n    public:\n        Filesystem ( );\n        ~Filesystem ( );\n        void addDirectory ( string name, string path ); // the first string is the name of the dir in the virtual FS, path is where the directory actually is. \n        void addFile ( string );\n    private:\n    Directory * root;\n    Directory * pwd;\n    map &lt;string, Node *&gt; nodes;\n};\n\nFilesystem::~Filesystem ( )\n{\n    for ( auto &amp; it : nodes )\n    {\n        if ( it.second != NULL )\n        {\n            cout &lt;&lt; \"deleting \" &lt;&lt; it . second -&gt; getName ( ) &lt;&lt; endl;\n            delete it.second;\n        }\n    }\n}\n\nclass Directory : public Node\n{\n    public:\n        Directory ( string name, string path, Directory * mum ) : Node ( name, path ) { parent = mum; }; //assigns name and path, should be clear\n        void addDirectoryNode ( Directory * );\n    private:\n    Directory * parent = NULL;\n    vector &lt;Node *&gt; contents;\n};\n\nvoid Filesystem::addDirectory ( string name, string path ) \n{\n    Directory * toAdd = new Directory ( name, path + \"/\", NULL );\n    cout &lt;&lt; \"created \" &lt;&lt; name &lt;&lt; \", path: \" &lt;&lt; toAdd -&gt; getPath ( ) &lt;&lt; endl;\n    map &lt;string, Node * &gt; newEntries = toAdd -&gt; loadDirectoryContents ( toAdd -&gt; getDirectoryContents ( ) );\n    nodes . insert ( pair &lt;string, Node * &gt; ( toAdd -&gt; getPath ( ), toAdd ) );\n    nodes . insert ( newEntries . begin ( ), newEntries . end ( ) );\n\n    if ( name == \"/\" ) // I know that the first directory added will be \"/\"\n        root = pwd = toAdd;\n\n    else\n        root -&gt; addDirectoryNode ( toAdd );\n}\n\n// reads the content of this directory and returns it in a set, directories will have a \"/\" appended\nset&lt;string&gt; Directory::getDirectoryContents (  ) const\n{\n    DIR * dir;\n    dirent * currNode;\n    set&lt;string&gt; names;\n\n    dir = opendir ( path . c_str ( ) );\n\n    while ( ( currNode = readdir ( dir ) ) )\n    {\n        if ( string ( currNode -&gt; d_name ) == \".\" || string ( currNode -&gt; d_name ) == \"..\" )\n            continue;\n\n        if ( currNode -&gt; d_type == DT_DIR ) \n            names.insert ( string ( currNode-&gt; d_name ) + \"/\" ) ;\n\n        else if ( currNode -&gt; d_type == DT_REG )\n            names.insert ( string ( currNode -&gt; d_name ) ) ;\n\n    }\n\n    closedir ( dir );\n    return names;\n}\n\n// recursively loads the real contents of this directory into the virtual one\nmap &lt;string, Node * &gt; Directory::loadDirectoryContents ( set &lt;string&gt; names )\n{\n    map &lt;string, Node * &gt; newEntries;\n    for ( auto &amp; it : names )\n    {\n        if ( it [ ( it . length ( ) - 1 ) ], \"/\" )\n        {\n            Directory * newDir = new Directory ( it, path + it, this );\n            map &lt;string, Node * &gt; newSubEntries = newDir -&gt; loadDirectoryContents ( newDir -&gt; getDirectoryContents ( ) );\n            contents . push_back ( newDir );\n            newEntries . insert ( pair &lt;string, Node * &gt; ( path + it, newDir ) );\n            newEntries . insert ( newSubEntries . begin ( ), newSubEntries . end ( ) );\n        }\n        else\n        {\n            File * newFile;\n            contents . push_back ( newFile = new File ( path + it, path ) ); \n            newEntries . insert ( pair &lt;string, Node * &gt; ( it, newFile ) ); \n        }\n    }\n\n    return newEntries;\n}\n\nvoid Directory::addDirectoryNode ( Directory * directory )\n{\n    contents.push_back ( directory );\n}\n</code></pre>\n"}, {"tags": ["c++", "interface", "kinect", "kinect-sdk"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5021040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64636cc099b93d97de4ffd6a8e69b926?s=128&d=identicon&r=PG&f=1", "display_name": "ej_01", "link": "https://stackoverflow.com/users/5021040/ej-01"}, "edited": false, "score": 0, "creation_date": 1434570425, "post_id": 30899735, "comment_id": 49840926, "body": "But this is still just a declaration right? I cannot find what the function actually does and how it works."}, {"owner": {"reputation": 164, "user_id": 4941240, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QNpqsLRToaw/AAAAAAAAAAI/AAAAAAAAAMA/to7h7iMzWrY/photo.jpg?sz=128", "display_name": "GregT-MN", "link": "https://stackoverflow.com/users/4941240/gregt-mn"}, "edited": false, "score": 0, "creation_date": 1435074066, "post_id": 30899735, "comment_id": 50041903, "body": "Like, the code for the function itself?  That won&#39;t be accessible - you&#39;ll have to refer to the documentation and sample projects to see how to work with the function."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 1, "last_activity_date": 1434566309, "creation_date": 1434566309, "answer_id": 30899735, "question_id": 30899558, "link": "https://stackoverflow.com/questions/30899558/advanced-c-interfaces-tracing-kinect-skd-2-0-code/30899735#30899735", "title": "Advanced C++ interfaces -- Tracing Kinect SKD 2.0 code", "body": "<p>It is a function that has the following signature:</p>\n\n<pre><code>  HRESULT       WINAPI               GetDefaultKinectSensor(_COM_Outptr_ IKinectSensor** defaultKinectSensor);\n//^return type  ^calling convention  ^name                  ^annotation  ^argument type\n</code></pre>\n\n<p>named - <a href=\"https://msdn.microsoft.com/en-us/library/microsoft.kinect.kinect.getdefaultkinectsensor.aspx\" rel=\"nofollow\"><code>GetDefaultKinectSensor</code></a><br>\nreturns - <a href=\"https://msdn.microsoft.com/en-us/library/bb446131.aspx\" rel=\"nofollow\"><code>HRESULT</code></a><br>\ncalling convention - <a href=\"https://stackoverflow.com/questions/2348442/what-does-winapi-in-main-function-mean\"><code>WINAPI</code></a><br>\nargument annotation - <a href=\"https://msdn.microsoft.com/en-us/library/hh916382.aspx\" rel=\"nofollow\"><code>_COM_Outptr_</code></a><br>\nargument type - <a href=\"https://msdn.microsoft.com/en-us/library/microsoft.kinect.kinect.ikinectsensor.aspx\" rel=\"nofollow\"><code>IKinectSensor**</code></a></p>\n\n<p>Note that the <code>_COM_Outptr_</code> annotation has the following description:</p>\n\n<blockquote>\n  <p>The returned pointer has COM semantics, and therefore carries an _On_failure_ post-condition that the returned pointer is null.</p>\n</blockquote>\n\n<p>The <em>bare</em> function signature would be</p>\n\n<pre><code>HRESULT GetDefaultKinectSensor(IKinectSensor** defaultKinectSensor);\n</code></pre>\n\n<p>Perhaps the calling convention and argument annotation are throwing you off a bit.</p>\n"}], "owner": {"reputation": 51, "user_id": 5021040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64636cc099b93d97de4ffd6a8e69b926?s=128&d=identicon&r=PG&f=1", "display_name": "ej_01", "link": "https://stackoverflow.com/users/5021040/ej-01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434566309, "creation_date": 1434565790, "last_edit_date": 1434566072, "question_id": 30899558, "link": "https://stackoverflow.com/questions/30899558/advanced-c-interfaces-tracing-kinect-skd-2-0-code", "title": "Advanced C++ interfaces -- Tracing Kinect SKD 2.0 code", "body": "<p>I am trying to get familiar with the Kinect 2.0 SDK in c++ in order to create my own program. However, I am getting stuck with understanding some of the code. First of all, as I tried to trace back different structure declarations, I found that all of the functions are virtual and I cannot find where they are actually defined. \nFor example, If you are in visual studio, and click on 'IBody' and open declaration, it brings you to an interface where everything is virtual. How can I figure out where everything is actually defined?</p>\n\n<p>I tried tracing back through other functions, and I eventually got stuck on \"GetDefaultKinectSensor\". The definition for this function is </p>\n\n<pre><code>HRESULT WINAPI GetDefaultKinectSensor(_COM_Outptr_ IKinectSensor** defaultKinectSensor);\n</code></pre>\n\n<p>How is this a function declaration? Could anyone explain this to me?</p>\n\n<p>I understand the basics of C++ but this is new territory for me. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c++11", "stringstream"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1434566209, "post_id": 30899464, "comment_id": 49838293, "body": "For the second one, either do <code>std::ios_base::out | std::ios_base::ate</code> or use a <code>ostringstream</code>."}], "answers": [{"comments": [{"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "edited": false, "score": 0, "creation_date": 1435159486, "post_id": 30899717, "comment_id": 50085811, "body": "just out of curiosity, what&#39;s the point of having <code>streamstream</code> w/o <code>in</code> and <code>out</code> modes? Ok, I can imagine they can be added later. But why output operator doesn&#39;t throw an exception if <code>streamstream</code> doesn&#39;t have <code>out</code> mode? Ignoring silently doesn&#39;t look good"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "edited": false, "score": 0, "creation_date": 1435160864, "post_id": 30899717, "comment_id": 50086854, "body": "@AndyT Concrete <code>std::iostream</code> classes (<code>std::fstream</code> and <code>std::stringstream</code>) are built assuming you know how to initialize them. So it passes the mode to the underlying buffer as is, because it can&#39;t assume you want anything specific. I can&#39;t think of any use case for a stream that can&#39;t perform input or output. Also, streams don&#39;t throw exceptions by default but you may turn on exceptions using the <code>std::basic_ios::exceptions()</code> mask."}], "tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": false, "score": 12, "last_activity_date": 1434569591, "last_edit_date": 1434569591, "creation_date": 1434566253, "answer_id": 30899717, "question_id": 30899464, "link": "https://stackoverflow.com/questions/30899464/setting-the-content-of-a-stdstringstream-with-strconst-char-has-strange-con/30899717#30899717", "title": "Setting the content of a std::stringstream with str(const char*) has strange consequences", "body": "<p>The default open mode for a <code>std::stringstream</code> object is <code>in | out</code>. Using a different mode overrides these options. Since the stream cannot be written to, the insertion operator cannot be used to write to the stream. This is why <code>str()</code> gives the same output twice.</p>\n\n<p>You need to manually open the stream in output mode as well:</p>\n\n<pre><code>std::stringstream ssb(\"Setting string\", std::ios_base::out | std::ios_base::ate);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/e5215d8ba352eb80\" rel=\"noreferrer\"><kbd>Live Demo</kbd></a></p>\n\n<p>Alternatively, use an <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostringstream/\" rel=\"noreferrer\"><code>std::ostringstream</code></a>, which initializes the internal <code>std::stringbuf</code> subobject with <code>out | mode</code>.</p>\n\n<pre><code>std::ostringstream(\"Setting string\", std::ios_base::ate);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/f297857df8691ec4\" rel=\"noreferrer\"><kbd>Live Demo</kbd></a></p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1434566503, "post_id": 30899744, "comment_id": 49838489, "body": "This is why I prefer using <code>std::istreamstream</code> and <code>std::ostringstream</code> instead of <code>std::stringstream</code>, then there is no confusion about the input/output mode."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434566703, "post_id": 30899744, "comment_id": 49838630, "body": "Does reading from <code>str()</code> close and reopen the stream? Is that why <code>std::ios_base::ate</code> is needed to make this work? Without it, <code>&lt;&lt; &quot; adding to string&quot;</code> overwrites, rather than appends to, the data set by the previous <code>str(&quot;Setting string&quot;)</code>."}, {"owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434567256, "post_id": 30899744, "comment_id": 49838967, "body": "@RemyLebeau yes, added to the answer, it does overwrite without ios_base::ate"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434567579, "post_id": 30899744, "comment_id": 49839168, "body": "But <b>why</b> does it overwrite? <code>ate</code> is applied when a stream is <i>opened</i> to seek to the end of existing content. So is <code>cout &lt;&lt; ssb.str()</code> or <code>ssb &lt;&lt; &quot; adding ...&quot;</code> re-opening the stream? But then wouldn&#39;t the existing content get wiped? That is what I don&#39;t understand. From all indications, reading <code>str()</code> just makes a copy of the current <code>rdbuf</code> content, so why is an extra seek-to-end needed afterwards? I cannot find any documentation on that."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1434567939, "post_id": 30899744, "comment_id": 49839387, "body": "@RemyLebeau You can&#39;t open or close a stringstream. The <code>str()</code> method reinitializes the buffer by resetting the internal pointers. In particular, the <i>current pointer</i> is set to the beginning of the new buffer, which is why it is being overwritten by the next insertion. What <code>ate</code> does is keep the <i>current pointer</i> at the end of the buffer, so that each insertion appends to the stream."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434568101, "post_id": 30899744, "comment_id": 49839487, "body": "Thank you. Would be nice if the documentation explained that."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434568731, "post_id": 30899744, "comment_id": 49839877, "body": "@RemyLebeau It can be found in the documentation for <a href=\"http://en.cppreference.com/w/cpp/io/basic_stringbuf/str\" rel=\"nofollow noreferrer\"><code>std::stringbuf::str()</code></a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434570412, "post_id": 30899744, "comment_id": 49840919, "body": "I already looked at that page, but do not see it say that reading from <code>str()</code> resets the buffer unless <code>ate</code> is used. But now I do see that it says how writing to <code>str()</code> initializes the pointers for subsequent reads/writes, and that <code>ate</code> allows subsequent output to be appended to the existing characters from a previous write to <code>str()</code>, but only in C++11 and later."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434573595, "post_id": 30899744, "comment_id": 49842827, "body": "@RemyLebeau I didn&#39;t mean that calling the zero-argument overload of <code>str()</code> resets the buffer pointers, but the <code>str(basic_string)</code> overload does. Also, see <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/lwg-defects.html#1448\" rel=\"nofollow noreferrer\">LWG Issue 1448</a>. Until C++11 it was implementation-defined what would happen when using <code>ate</code>."}], "tags": [], "owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "is_accepted": true, "score": 8, "last_activity_date": 1434643232, "last_edit_date": 1434643232, "creation_date": 1434566343, "answer_id": 30899744, "question_id": 30899464, "link": "https://stackoverflow.com/questions/30899464/setting-the-content-of-a-stdstringstream-with-strconst-char-has-strange-con/30899744#30899744", "title": "Setting the content of a std::stringstream with str(const char*) has strange consequences", "body": "<p>You forgot to set flag mode: <code>std::ios_base::out</code>.\nThis will work:</p>\n\n<pre><code>std::stringstream ssb(std::ios_base::out | std::ios_base::ate);\nssb.str(\"Setting string\");\nstd::cout &lt;&lt; ssb.str() &lt;&lt; std::endl;\nssb &lt;&lt; \" adding to string\";\nstd::cout &lt;&lt; ssb.str() &lt;&lt; std::endl;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Setting string\nSetting string adding to string\n</code></pre>\n"}], "owner": {"reputation": 783, "user_id": 448317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/21e728b2b00f587a5a31c5c2cdacb086?s=128&d=identicon&r=PG", "display_name": "Troels Blum", "link": "https://stackoverflow.com/users/448317/troels-blum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3197, "favorite_count": 0, "accepted_answer_id": 30899744, "answer_count": 2, "score": 20, "last_activity_date": 1434643232, "creation_date": 1434565462, "last_edit_date": 1592644375, "question_id": 30899464, "link": "https://stackoverflow.com/questions/30899464/setting-the-content-of-a-stdstringstream-with-strconst-char-has-strange-con", "title": "Setting the content of a std::stringstream with str(const char*) has strange consequences", "body": "<p>I use <code>std::stringstream</code> extensively to generate code. I have run into some querious behavior when setting the content with the <code>str()</code> function followed by using the <code>operator&lt;&lt;</code>. Can someone explain this behavior to me. I would very much appreciate it - Thanks.</p>\n<p>Example One:</p>\n<pre><code>std::stringstream ssa;\nssa.str(&quot;Setting string&quot;);\nstd::cout &lt;&lt; ssa.str() &lt;&lt; std::endl;\nssa &lt;&lt; &quot; adding to string&quot;;\nstd::cout &lt;&lt; ssa.str() &lt;&lt; std::endl;\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<p>Setting string</p>\n<p>adding to string</p>\n</blockquote>\n<p>Expected:</p>\n<blockquote>\n<p>Setting string</p>\n<p>Setting string adding to string</p>\n</blockquote>\n<p>So after a bit of reading up on the documentation I found that I should set the open mode to <code>ios_base::ate</code>:</p>\n<pre><code>std::stringstream ssb(std::ios_base::ate);\nssb.str(&quot;Setting string&quot;);\nstd::cout &lt;&lt; ssb.str() &lt;&lt; std::endl;\nssb &lt;&lt; &quot; adding to string&quot;;\nstd::cout &lt;&lt; ssb.str() &lt;&lt; std::endl;\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<p>Setting string</p>\n<p>Setting string</p>\n</blockquote>\n<p>Again (or now) I would expect:</p>\n<blockquote>\n<p>Setting string</p>\n<p>Setting string adding to string</p>\n</blockquote>\n<p>Why am I getting the results I am, and how do I get the result I want? E.i. Being able to set the initial <code>string</code> of a <code>stringstream</code> and the append to that <code>string</code> ?</p>\n<p>I am aware that I can just set the content to the empty <code>string(&quot;&quot;)</code> and then only use the <code>&lt;&lt;operator</code>. This is in fact the workaround I am using. I just don't understand the observed behavior. And the workaround makes my code more messy.</p>\n"}, {"tags": ["c++", "windows", "com", "ms-media-foundation"], "answers": [{"comments": [{"owner": {"reputation": 2285, "user_id": 4840567, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/317775be985b05371b977a5daedc4e5d?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Hu", "link": "https://stackoverflow.com/users/4840567/calvin-hu"}, "edited": false, "score": 0, "creation_date": 1434569622, "post_id": 30899756, "comment_id": 49840421, "body": "So if I use the MFSetAttributeRatio method, then I can avoid the PROVARIANT business right ?"}, {"owner": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "edited": false, "score": 1, "creation_date": 1434569796, "post_id": 30899756, "comment_id": 49840520, "body": "Correct.  However I don&#39;t think you want to do it that way.  The best way is to enumerate the capture device&#39;s native media types, and set it to one that meets your desired characteristics."}], "tags": [], "owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1434566374, "creation_date": 1434566374, "answer_id": 30899756, "question_id": 30899390, "link": "https://stackoverflow.com/questions/30899390/media-foundation-set-video-capture-frame-rate-using-propvariant-structure/30899756#30899756", "title": "Media Foundation set video capture frame rate using PROPVARIANT structure", "body": "<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms700140\" rel=\"nofollow\"><code>MF_MT_FRAME_RATE</code> attribute</a> is a pair of 32-bit integers representing numerator and denominator. <code>MFSetAttributeRatio</code> and friends are helpers to set/get the values in a friendly way. Using <code>PROVARIANT</code> you should handle it as a 64-bit <code>UINT64</code> value.</p>\n\n<blockquote>\n  <p>The frame rate is expressed as a ratio. The upper 32 bits of the attribute value contain the numerator and the lower 32 bits contain the denominator. For example, if the frame rate is 30 frames per second (fps), the ratio is 30/1. If the frame rate is 29.97 fps, the ratio is 30,000/1001.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2285, "user_id": 4840567, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/317775be985b05371b977a5daedc4e5d?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Hu", "link": "https://stackoverflow.com/users/4840567/calvin-hu"}, "edited": false, "score": 0, "creation_date": 1434575333, "post_id": 30901123, "comment_id": 49843750, "body": "Thanks for the example. I saw you used a IMFSourceReader object to get the underlying native media types, The IMFSourceReader also has a SetCurrentMediaType() method. So should I use it to set the mediaType or the one in the IMFMediaTypeHandler class ?  If I choose to call the SetCurrentMediaType() defined in IMFMediaTypeHandler class, then I believe I have to get a mediaTypeHandler first from a IMFMediaSource object. Is using SourceReader better than directly dealing with a IMFMediaSource ?"}, {"owner": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "reply_to_user": {"reputation": 2285, "user_id": 4840567, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/317775be985b05371b977a5daedc4e5d?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Hu", "link": "https://stackoverflow.com/users/4840567/calvin-hu"}, "edited": false, "score": 0, "creation_date": 1434578026, "post_id": 30901123, "comment_id": 49844966, "body": "That depends on your project.  IMFMediaTypeHandler is necessary when you build a custom source or sink, or dealing with a specific stream descriptor.  If you are simply processing samples from a webcam or capture card, IMFSourceReader is quite simple to use, even if you are processing audio and video samples from an aggregate source."}, {"owner": {"reputation": 2285, "user_id": 4840567, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/317775be985b05371b977a5daedc4e5d?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Hu", "link": "https://stackoverflow.com/users/4840567/calvin-hu"}, "edited": false, "score": 0, "creation_date": 1434643268, "post_id": 30901123, "comment_id": 49877723, "body": "Hi Jeff. I got a question regarding your comment. You said in order to set frame rate on for the output format I need to first list native media types and reuse one of them to reset the current media type. But let say I have chosen a native media type from the list, but its frame rate is different from the value I want to set, is it still legal to set frame rate on this type ?"}, {"owner": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "reply_to_user": {"reputation": 2285, "user_id": 4840567, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/317775be985b05371b977a5daedc4e5d?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Hu", "link": "https://stackoverflow.com/users/4840567/calvin-hu"}, "edited": false, "score": 0, "creation_date": 1434649650, "post_id": 30901123, "comment_id": 49881466, "body": "No, unfortunately that generally doesn&#39;t work.  Are you using a webcam, capture card, or other?  What framerate are you looking for? Often times, a webcam will offer 30, 15, and some other frame rates at each resolution and format.  If you are using an older webcam, it is possible that it cannot produce 30fps (shutter speed, drivers, etc)."}, {"owner": {"reputation": 2285, "user_id": 4840567, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/317775be985b05371b977a5daedc4e5d?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Hu", "link": "https://stackoverflow.com/users/4840567/calvin-hu"}, "edited": false, "score": 0, "creation_date": 1434654894, "post_id": 30901123, "comment_id": 49884507, "body": "I&#39;m using a webcam, but how do I decide which frame rates are supported by the devices?  I&#39;ve looked at you previous post at <a href=\"http://stackoverflow.com/questions/30815015/get-all-supported-fps-values-of-a-camera-in-microsoft-media-foundation/30848315#30848315\" title=\"get all supported fps values of a camera in microsoft media foundation\">stackoverflow.com/questions/30815015/&hellip;</a> , and you said we can do loop through all the possible media types. But for each media type, we call  MFGetAttributeRatio(mediaType, MF_MT_FRAME_RATE, &amp;frameRate, &amp;denominator); which only returns one frame rate. But what if this media type supports more than one frame rates? Where is second one returned?"}, {"owner": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "reply_to_user": {"reputation": 2285, "user_id": 4840567, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/317775be985b05371b977a5daedc4e5d?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Hu", "link": "https://stackoverflow.com/users/4840567/calvin-hu"}, "edited": false, "score": 0, "creation_date": 1434655472, "post_id": 30901123, "comment_id": 49884887, "body": "I think you may have overlooked that it is a while loop.  It will loop until MF_E_NO_MORE_TYPES is returned.  Some webcams will have over 200 while early webcams only have 20 or so."}, {"owner": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "reply_to_user": {"reputation": 2285, "user_id": 4840567, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/317775be985b05371b977a5daedc4e5d?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Hu", "link": "https://stackoverflow.com/users/4840567/calvin-hu"}, "edited": false, "score": 0, "creation_date": 1434733581, "post_id": 30901123, "comment_id": 49922064, "body": "I have edited that answer, to include the output of an older webcam."}], "tags": [], "owner": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "is_accepted": true, "score": 3, "last_activity_date": 1434570749, "last_edit_date": 1495535203, "creation_date": 1434570749, "answer_id": 30901123, "question_id": 30899390, "link": "https://stackoverflow.com/questions/30899390/media-foundation-set-video-capture-frame-rate-using-propvariant-structure/30901123#30901123", "title": "Media Foundation set video capture frame rate using PROPVARIANT structure", "body": "<p>As Roman pointed out, you can avoid dealing with the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa380072(v=vs.85).aspx\" rel=\"nofollow noreferrer\">PROPVARIANT</a> structure, by using the utility functions to access the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms704598(v=vs.85).aspx\" rel=\"nofollow noreferrer\">IMFAttributes</a> store.  However, \nas #7 points out on the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff485859(v=vs.85).aspx\" rel=\"nofollow noreferrer\">page you referenced</a>:</p>\n\n<blockquote>\n  <ol start=\"7\">\n  <li>Query the media type for the MF_MT_FRAME_RATE_RANGE_MAX and MF_MT_FRAME_RATE_RANGE_MIN attributes. This values give the range of\n  supported frame rates. The device might support other frame rates\n  within this range.</li>\n  </ol>\n</blockquote>\n\n<p>Enumerate the native media types of the capture device, and simply select (choose one) and reuse the media type to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd374667(v=vs.85).aspx\" rel=\"nofollow noreferrer\">set the current media type</a>.  Otherwise you will be frustrated with failed calls which do not match the capabilities of the capture device.  I discuss frame rates a bit and show how to enumerate the native media type <a href=\"https://stackoverflow.com/questions/30815015/get-all-supported-fps-values-of-a-camera-in-microsoft-media-foundation/30848315#30848315\">here</a>.  Good luck.</p>\n"}], "owner": {"reputation": 2285, "user_id": 4840567, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/317775be985b05371b977a5daedc4e5d?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Hu", "link": "https://stackoverflow.com/users/4840567/calvin-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1216, "favorite_count": 0, "accepted_answer_id": 30901123, "answer_count": 2, "score": 0, "last_activity_date": 1434570749, "creation_date": 1434565293, "question_id": 30899390, "link": "https://stackoverflow.com/questions/30899390/media-foundation-set-video-capture-frame-rate-using-propvariant-structure", "title": "Media Foundation set video capture frame rate using PROPVARIANT structure", "body": "<p>I'm writing a media foundation application where I need to set the capture frame rate for a video device. The function I'm writing is something like:</p>\n\n<pre><code>bool SetRequestedFrameRate(const size_t requestedFramesPerSecond);\n</code></pre>\n\n<p>where I pass a user-defined integer as the frame rate parameter. I'm following the code snippet on <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff485859(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ff485859(v=vs.85).aspx</a>  :</p>\n\n<pre><code>PROPVARIANT var;\nif (SUCCEEDED(pType-&gt;GetItem(MF_MT_FRAME_RATE_RANGE_MAX, &amp;var)))\n{\n    hr = pType-&gt;SetItem(MF_MT_FRAME_RATE, var);\n\n    PropVariantClear(&amp;var);\n\n    if (FAILED(hr))\n    {\n        goto done;\n    }\n\n    hr = pHandler-&gt;SetCurrentMediaType(pType);\n}\n</code></pre>\n\n<p>Apparantly it uses the PROVARIANT structure to hold frame rate data. But how do I construct a PROVARIANT structure from my \"const size_t requestedFramesPerSecond\" parameter? If I already have a PROVARIANT that holds the frame rate, how do I retrieve the actual frame rate integer from it ?  Also, does COM provide a way to compare two PROVARIANT structures that represent frame rate ?</p>\n\n<p>Please help, thank!</p>\n"}, {"tags": ["c++", "algorithm", "subset-sum"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1434565497, "post_id": 30899356, "comment_id": 49837858, "body": "What is the question ?"}, {"owner": {"reputation": 45, "user_id": 4749915, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b74256962da443ce5482d015b0d8eeae?s=128&d=identicon&r=PG&f=1", "display_name": "Kuker", "link": "https://stackoverflow.com/users/4749915/kuker"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1434567035, "post_id": 30899356, "comment_id": 49838823, "body": "To check if there are any numbers in an array that can be added up so they are equal to another number :)"}, {"owner": {"reputation": 17400, "user_id": 1827903, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a65afd5c01a3afa2e75e2cb866fc02d0?s=128&d=identicon&r=PG", "display_name": "Zim-Zam O&#39;Pootertoot", "link": "https://stackoverflow.com/users/1827903/zim-zam-opootertoot"}, "edited": false, "score": 0, "creation_date": 1434577287, "post_id": 30899356, "comment_id": 49844668, "body": "This is a variant of the subset sum problem; removed code because it wasn&#39;t relevant"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4749915, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b74256962da443ce5482d015b0d8eeae?s=128&d=identicon&r=PG&f=1", "display_name": "Kuker", "link": "https://stackoverflow.com/users/4749915/kuker"}, "edited": false, "score": 0, "creation_date": 1434567191, "post_id": 30899496, "comment_id": 49838922, "body": "I really can&#39;t understand that, we can say that i&#39;m a begginer when it come&#39;s to that advanced algorithms :)"}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "reply_to_user": {"reputation": 45, "user_id": 4749915, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b74256962da443ce5482d015b0d8eeae?s=128&d=identicon&r=PG&f=1", "display_name": "Kuker", "link": "https://stackoverflow.com/users/4749915/kuker"}, "edited": false, "score": 0, "creation_date": 1434567716, "post_id": 30899496, "comment_id": 49839245, "body": "@Kuker See edit, I added a python code. It&#39;s pretty easy to follow python, since it&#39;s a very readable language,  so you are most likely to understand the code even if you don&#39;t know python."}, {"owner": {"reputation": 45, "user_id": 4749915, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b74256962da443ce5482d015b0d8eeae?s=128&d=identicon&r=PG&f=1", "display_name": "Kuker", "link": "https://stackoverflow.com/users/4749915/kuker"}, "edited": false, "score": 0, "creation_date": 1434569016, "post_id": 30899496, "comment_id": 49840044, "body": "thanks for helping. I still can&#39;t really understand python, but you gave me some ideas! It was really helpful :)"}], "tags": [], "owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "is_accepted": false, "score": 1, "last_activity_date": 1434567672, "last_edit_date": 1495540712, "creation_date": 1434565576, "answer_id": 30899496, "question_id": 30899356, "link": "https://stackoverflow.com/questions/30899356/subset-sum-variant-with-a-non-zero-target-sum/30899496#30899496", "title": "Subset sum variant with a non-zero target sum", "body": "<p>This is <a href=\"https://en.wikipedia.org/wiki/Subset_sum_problem\" rel=\"nofollow noreferrer\">subset sum problem</a>, which is <a href=\"https://en.wikipedia.org/wiki/NP-complete\" rel=\"nofollow noreferrer\">NP-Complete</a> (there is no known efficient solution to NP-Complete problems), but if your numbers are relatively small integers - there is an efficient pseudo polynomial solution to it that follows the recurrence:</p>\n\n<pre><code>D(x,i) = false   x&lt;0\nD(0,i) = true\nD(x,0) = false   x != 0\nD(x,i) = D(x,i-1) OR D(x-arr[i],i-1)\n</code></pre>\n\n<p>Later, you need to step back on your choices, see where you decided to \"reduce\" (take the element), and where you decided not to \"reduce\" (not take the element), on the generated matrix.</p>\n\n<p><a href=\"https://stackoverflow.com/q/7489398/572670\">This thread</a> and <a href=\"https://stackoverflow.com/q/29512539/572670\">this thread</a> discuss how to get the elements for similar problems.</p>\n\n<p>Here is a python code (taken from the thread I linked to) that does the trick.\n<br>If you are not familiar with python - read it as pseudo code, it's pretty easy to understand python!.</p>\n\n<pre><code>arr = [1,2,4,5]\nn = len(arr)\nSUM = 6\n#pre processing:\nD = [[True] * (n+1)]\nfor x in range(1,SUM+1):\n    D.append([False]*(n+1))\n#DP solution to populate D:\nfor x in range(1,SUM+1):\n    for i in range(1,n+1):\n        D[x][i] = D[x][i-1]\n        if x &gt;= arr[i-1]:\n            D[x][i] = D[x][i] or D[x-arr[i-1]][i-1]\nprint D\n\n#get a random solution:\n\nif D[SUM][n] == False:\n    print 'no solution'\nelse:\n    sol = []\n    x = SUM\n    i = n\n    while x != 0:\n        possibleVals = []\n        if D[x][i-1] == True:\n            possibleVals.append(x)\n        if x &gt;= arr[i-1] and D[x-arr[i-1]][i-1] == True:\n            possibleVals.append(x-arr[i-1])\n        #by here possibleVals contains 1/2 solutions, depending on how many choices we have.\n        #chose randomly one of them\n        from random import randint\n        r = possibleVals[randint(0,len(possibleVals)-1)]\n        #if decided to add element:\n        if r != x:\n            sol.append(x-r)\n        #modify i and x accordingly\n        x = r\n        i = i-1\n    print sol\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 4749915, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b74256962da443ce5482d015b0d8eeae?s=128&d=identicon&r=PG&f=1", "display_name": "Kuker", "link": "https://stackoverflow.com/users/4749915/kuker"}, "edited": false, "score": 0, "creation_date": 1434567161, "post_id": 30899760, "comment_id": 49838901, "body": "Thanks for answering. I won&#39;t lie, I can&#39;t understand what &#39;a&#39; and &#39;f&#39; stands for. What are these &#39;summands&#39;?"}, {"owner": {"reputation": 3266, "user_id": 3707125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b56d9090b628338b4e109aa6b8d8e4be?s=128&d=identicon&r=PG&f=1", "display_name": "user3707125", "link": "https://stackoverflow.com/users/3707125/user3707125"}, "reply_to_user": {"reputation": 45, "user_id": 4749915, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b74256962da443ce5482d015b0d8eeae?s=128&d=identicon&r=PG&f=1", "display_name": "Kuker", "link": "https://stackoverflow.com/users/4749915/kuker"}, "edited": false, "score": 0, "creation_date": 1434567563, "post_id": 30899760, "comment_id": 49839154, "body": "@Kuker, <code>a</code> or &#39;summands&#39; are the &quot;array elements&quot; from your statement. <code>f</code> is an array I introduced to store the result over there. If you find it hard to understand - try to read some articles on &quot;Dynamic Programming&quot; - I learned it a while ago, so unfortunately can&#39;t suggest you any good resource."}, {"owner": {"reputation": 45, "user_id": 4749915, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b74256962da443ce5482d015b0d8eeae?s=128&d=identicon&r=PG&f=1", "display_name": "Kuker", "link": "https://stackoverflow.com/users/4749915/kuker"}, "edited": false, "score": 0, "creation_date": 1434568892, "post_id": 30899760, "comment_id": 49839959, "body": "I still can&#39;t get into how to implement it. This is as far as i got:  <code>int a, b, sum, temp; \tvector&lt;int&gt; c; \twhile (cin &gt;&gt; a &gt;&gt; b){ \t\tfor (int i = 0; i &lt; b; i++){ \t\t\tcin &gt;&gt; temp; \t\t\tc.push_back(temp); \t\t} \t\tint *f = new int[a]; \t\tf[0] = true; \t\tfor (int i = 1; i &lt; b; i++){ \t\t\tfor (int x = b; x &gt; c[i]; x--){ \t\t\t\tf[x + c[i]] = f[x + c[i]] || f[x]; \t\t\t} \t\t\tcout &lt;&lt; f[a];</code>"}], "tags": [], "owner": {"reputation": 3266, "user_id": 3707125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b56d9090b628338b4e109aa6b8d8e4be?s=128&d=identicon&r=PG&f=1", "display_name": "user3707125", "link": "https://stackoverflow.com/users/3707125/user3707125"}, "is_accepted": false, "score": 0, "last_activity_date": 1434566402, "creation_date": 1434566402, "answer_id": 30899760, "question_id": 30899356, "link": "https://stackoverflow.com/questions/30899356/subset-sum-variant-with-a-non-zero-target-sum/30899760#30899760", "title": "Subset sum variant with a non-zero target sum", "body": "<p>You can solve this by using dynamic programming. </p>\n\n<p>Lets assume that:</p>\n\n<ul>\n<li><code>N</code> - is the sum that required (your first input).</li>\n<li><code>M</code> - is the number of summands available (your second input).</li>\n<li>a<sub>1</sub>...a<sub>M</sub> - are the summands available.</li>\n<li><code>f[x]</code> is <code>true</code> when you can reach the sum of <code>x</code>, and <code>false</code> otherwise</li>\n</ul>\n\n<p>Now the solution:</p>\n\n<p>Initially <code>f[0] = true</code> and <code>f[1..N] = false</code> - we can reach only the sum of zero without taking any summand.</p>\n\n<p>Now you can iterate over all a<sub>i</sub>, where <code>i</code> in [1..M], and with each of them perform next operation:</p>\n\n<p>f[x + a<sub>i</sub>] = f[x + a<sub>i</sub>] || f[x], for each x in [M..a<sub>i</sub>] - the order of processing is relevant!</p>\n\n<p>Finally you output f[N].</p>\n\n<p>This solution has the complexity of O(N*M), so it is not very useful when you either have large input numbers or large number of summands.</p>\n"}], "owner": {"reputation": 45, "user_id": 4749915, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b74256962da443ce5482d015b0d8eeae?s=128&d=identicon&r=PG&f=1", "display_name": "Kuker", "link": "https://stackoverflow.com/users/4749915/kuker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 553, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1434577287, "creation_date": 1434565203, "last_edit_date": 1434577287, "question_id": 30899356, "link": "https://stackoverflow.com/questions/30899356/subset-sum-variant-with-a-non-zero-target-sum", "title": "Subset sum variant with a non-zero target sum", "body": "<p>I have an array of integers and need to apply a variant of the <a href=\"https://en.wikipedia.org/wiki/Subset_sum_problem\" rel=\"nofollow\">subset sum algorithm</a> on it, except that instead of finding a set of integers whose sum is 0 I am trying to find a set of integers whose sum is <code>n</code>.  I am unclear as to how to adapt one of the standard subset sum algorithms to this variant and was hoping for any insight into the problem.</p>\n"}, {"tags": ["c++", "memory-management"], "comments": [{"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 0, "creation_date": 1434564731, "post_id": 30899159, "comment_id": 49837455, "body": "What operating system are you targetting ?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 7, "creation_date": 1434564740, "post_id": 30899159, "comment_id": 49837462, "body": "Take a look at ring buffers. They&#39;re commonly used for real time buffering of data."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1434564892, "post_id": 30899159, "comment_id": 49837545, "body": "What is the interface with the sensors?  IP/network?  Where is the timestamp applied, at the sensor or after trasport to the PC?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1434565202, "post_id": 30899159, "comment_id": 49837708, "body": "Allocate your buffers once and re-use them.  Allocation and deallocation of memory is a common bottleneck for performance critical systems."}, {"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 2, "creation_date": 1434565414, "post_id": 30899159, "comment_id": 49837816, "body": "Couple of megabytes per second is nothing. Before you want to worry about how to allocate memory effectively, you should be worried how to dump the data to disk effectively. If you don&#39;t hit any disk issue, memory should be the least of your concerns."}, {"owner": {"reputation": 1691, "user_id": 4355012, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cc9e7a6a654cb5f9d877dae44f90b948?s=128&d=identicon&r=PG&f=1", "display_name": "Kamajii", "link": "https://stackoverflow.com/users/4355012/kamajii"}, "edited": false, "score": 0, "creation_date": 1434565598, "post_id": 30899159, "comment_id": 49837915, "body": "Dumping it to disk is of no worry, as this can be done afterwards without real time needs. Although thinking about that makes me start wondering myself if I should actually worry."}, {"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 1, "creation_date": 1434565845, "post_id": 30899159, "comment_id": 49838053, "body": "If you can keep all the data in memory (i.e. it is one relatively short measurement), then just allocate all the memory you need in advance any way you feel comfortable and forget about it"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1434568672, "post_id": 30899159, "comment_id": 49839837, "body": "Typical double buffer will do: when software is dumping buffer B into disk, hardware is writing to buffer A. When software finishes dumping, it acknowledge hardware to switch buffer at the next gap between acquisition. When hardware have successfully switched, it acknowledges software to start dumping whenever possible."}], "answers": [{"tags": [], "owner": {"reputation": 7948, "user_id": 4899330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a19fa016a8fc6c0a3250f03f108a9?s=128&d=identicon&r=PG&f=1", "display_name": "doqtor", "link": "https://stackoverflow.com/users/4899330/doqtor"}, "is_accepted": true, "score": 1, "last_activity_date": 1434566995, "creation_date": 1434566995, "answer_id": 30899966, "question_id": 30899159, "link": "https://stackoverflow.com/questions/30899159/fast-memory-allocation-for-real-time-data-acquisition/30899966#30899966", "title": "Fast memory allocation for real time data acquisition", "body": "<p>The idea for solving this type of problems can be as follows:</p>\n\n<p>Separate the problem into 2 or more processes depending what you need to do with your data:</p>\n\n<ul>\n<li>Acquirer</li>\n<li>Analyzer (if you want to process data in real time)</li>\n<li>Writer</li>\n</ul>\n\n<p>Store data in a circular buffer in shared memory (I recommend using boost::interprocess).</p>\n\n<p>Acquirer will continuously read data from the device and store it in a shared memory. In the meantime, once is enough data read for doing any analysis, the Analyzer will start processing it. It can store results into another circular buffer shared memory  if needed. Also in the meantime Reader will read the data from shared memory (acquired or already processed) and store it in the output file.</p>\n\n<p>You need to make sure all the processes are synchronized properly so that they do their job simultaneously and you don't lose the data (the data is not being overwritten before is processed or saved into output file).</p>\n"}], "owner": {"reputation": 1691, "user_id": 4355012, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cc9e7a6a654cb5f9d877dae44f90b948?s=128&d=identicon&r=PG&f=1", "display_name": "Kamajii", "link": "https://stackoverflow.com/users/4355012/kamajii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 1, "accepted_answer_id": 30899966, "answer_count": 1, "score": 4, "last_activity_date": 1434566995, "creation_date": 1434564618, "last_edit_date": 1434566194, "question_id": 30899159, "link": "https://stackoverflow.com/questions/30899159/fast-memory-allocation-for-real-time-data-acquisition", "title": "Fast memory allocation for real time data acquisition", "body": "<p>I have a range of sensors connected to a PC that measure various physical parameters, like force, rotational speed and temperature. These sensors continuously produce samples at some sample rate. A sample consists of a timestamp and the measured dimension itself; the sample rates are in magnitudes of single-digit kilohertz (i.e., somewhere between 1 and 9000 samples per second).</p>\n\n<p>The PC is supposed to read and store these samples during a given period of time. Afterwards the collected data is further treated and evaluated.</p>\n\n<p>What would be a sensible way to buffer the samples? At some realistic setup the acquisition could easily gather a couple of megabytes per second. Also paging could be critical in case memory is allocated fast but needs swapping upon write.</p>\n\n<p>I could think of a threaded approach where a separate thread allocates and manages a pool of (locked, so non-swappable) memory chunks. Given there are always enough of these chunks pre-allocated, further allocation would only block (in case other processes' pages have to be swapped out before) this memory pool's thread and the acquisition could proceed without interruption.</p>\n\n<p>This basically is a conceptual question. Yet, to be more specific:</p>\n\n<ul>\n<li>It should only rely on portable features, like POSIX. Features out Qt's universe is fine, too.</li>\n<li>The sensors can be interfaced in various ways. IP is one possibility. Usually the sensors are directly connected to the PC via local links (RS232, USB, extension cards and such). That is, fast enough.</li>\n<li>The timestamps are mostly applied by the acquisition hardware itself if it is capable in doing so, to avoid jitter over network etc.</li>\n</ul>\n\n<h1>Thinking it over</h1>\n\n<p>Should I really worry? Apparently the problem diverts into three scenarios:</p>\n\n<ol>\n<li>There is only little data collected at all. It can easily be buffered in one large pre-allocated buffer.</li>\n<li>Data is collected slowly. Allocating the buffers on the fly is perfectly fine.</li>\n<li>There is so much data acquired at high sample rates. Then allocation is not the problem because the buffer will eventually overflow anyway. The problem is rather how to transfer the data from the memory buffer to permanent storage fast enough.</li>\n</ol>\n"}, {"tags": ["c++", "garbage-collection"], "comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1434586887, "post_id": 30899117, "comment_id": 49847602, "body": "Not really sure what you mean by not returning this as its a requirement of the program; that&#39;s the way to do it. However, you should be aware that this is extremely non-idiomatic in C++. Method chaining generally returns a reference (*this). If you want to return a new instance, it&#39;s generally preferable to write a function add or operator+ that&#39;s not a member, for various reasons. Also, the word &quot;static&quot; does not mean what you think it does in C++."}, {"owner": {"reputation": 1642, "user_id": 1406888, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f09da7bd9ee09af592d7d6a64b9dbc8a?s=128&d=identicon&r=PG", "display_name": "Klik", "link": "https://stackoverflow.com/users/1406888/klik"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1434682339, "post_id": 30899117, "comment_id": 49894377, "body": "Exactly, since method chaining generally returns (*this), but mine does not, I was wondering if it&#39;s feasible. I wrote this with specific constraints and the method chaining was an experiment for me; I see now that the destructors are indeed called and that&#39;s what was the most important question to me."}], "answers": [{"comments": [{"owner": {"reputation": 1642, "user_id": 1406888, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f09da7bd9ee09af592d7d6a64b9dbc8a?s=128&d=identicon&r=PG", "display_name": "Klik", "link": "https://stackoverflow.com/users/1406888/klik"}, "edited": false, "score": 0, "creation_date": 1434571028, "post_id": 30899134, "comment_id": 49841318, "body": "Yes, thanks--that was a typo. I do have a destructor written, but my main concern is that I&#39;m not sure if it&#39;s being called. I&#39;ll include an example of the add function so you get a better picture. Also, perhaps garbage collection is not the proper term? I thought that&#39;s how you described how the program automatically gets rid of static variables after leaving the scope."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 4, "last_activity_date": 1434564533, "creation_date": 1434564533, "answer_id": 30899134, "question_id": 30899117, "link": "https://stackoverflow.com/questions/30899117/how-is-garbage-collection-handling-these-static-instances-created-by-method-chai/30899134#30899134", "title": "How is garbage collection handling these static instances created by method chaining", "body": "<p>There is no garbage collection in C++, <strong>you</strong> need to clean up the memory, you can write a destructor.</p>\n\n<pre><code>Polynomial::~Polynomial() {\n    delete poly;\n}\n</code></pre>\n\n<p>Anything you <code>new</code> you must also <code>delete</code> or you are leaking memory. Also, if this is how you are creating your <code>poly</code> member variable, it should be of type</p>\n\n<pre><code>DoublyLinkedList* poly;\n</code></pre>\n\n<p>Know that in C++ you should avoid <code>new</code> and <code>delete</code> where it isn't needed, and prefer to use <a href=\"https://stackoverflow.com/questions/712639/understanding-the-meaning-of-the-term-and-the-concept-raii-resource-acquisiti\">RAII semantics</a>.</p>\n"}], "owner": {"reputation": 1642, "user_id": 1406888, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f09da7bd9ee09af592d7d6a64b9dbc8a?s=128&d=identicon&r=PG", "display_name": "Klik", "link": "https://stackoverflow.com/users/1406888/klik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434571446, "creation_date": 1434564450, "last_edit_date": 1434571446, "question_id": 30899117, "link": "https://stackoverflow.com/questions/30899117/how-is-garbage-collection-handling-these-static-instances-created-by-method-chai", "title": "How is garbage collection handling these static instances created by method chaining", "body": "<p>I want to use method chaining in C++, but I am worried about memory leakage--I don't know how the garbage collection is handling the intermediary instances returned by the method calls. </p>\n\n<p>Please note, I am intentionally not returning (this) because it is a requirement of the program. </p>\n\n<pre><code>//important to note that in the constructor of Polynomial, I allocate a new \n\nDoublyLinkedList instance as a private member\nclass Polynomial {\n    private:\n    DoublyLinkedList * poly;\n    //other stuff, constructors and destructor\n};\n\n//this is the primary constructor I am using. Notice that I allocated one of its members in the heap\nPolynomial::Polynomial(int array [], int size) {\n    poly = new DoublyLinkedList;\n    //fill in with the array and size etc.\n}\n\nPolynomial::~Polynomial() {\n    //deallocate the allocated members\n}\n\n//------ ADD --------\nPolynomial Polynomial::add(Polynomial* polyB){  //does addition by default\n    //perform add operations and save results into an array called \"result\" for passing into a Polynomial constructor\n\n    return Polynomial(result, maxSize); //will return a NEW instance\n}\n//example prototypes which return a Polynomial instance (not a pointer to a new instance)\nPolynomial Polynomial::add(Polynomial * polyB);\nPolynomial Polynomial::subtract(Polynomial * polyB);\nPolynomial Polynomial::multiply(Polynomial * polyB);\n\nDoublyLinkedList::DataType polyArrayA [] = {1,3,4};\nDoublyLinkedList::DataType polyArrayB [] = {5, 5, 7};\nPolynomial p1 = Polynomial(polyArrayA, 3);\nPolynomial p2 = Polynomial(polyArrayB, 3);\n\nPolynomial p3 = p1.add(&amp;p1).multiply(&amp;p1).subtract(&amp;p2);\n\np3.print();\n</code></pre>\n\n<p>Knowing that garbage collection handles statically declared variables, I decided that the methods could return \"Polynomial\" versus returning a pointer. The thing is that the Polynomial is a newly instantiated instance (created in the method) and it has a dynamically allocated member--so I need to ensure it's deconstructor is being called.</p>\n\n<p>After each method is called, a new (AFAIK) \"statically\" declared instance is created and further methods are called using the new instance. But what happens to the intermediate instance?</p>\n"}, {"tags": ["c++", "windows", "security", "winapi", "memory-mapped-files"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1434579044, "post_id": 30899107, "comment_id": 49845402, "body": "A file mapping is likely not what you want. You probably need some form of IPC message passing."}], "answers": [{"comments": [{"owner": {"reputation": 2990, "user_id": 1544, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7e67b32d3712a82788c6d54363f7ba15?s=128&d=identicon&r=PG", "display_name": "jeffm", "link": "https://stackoverflow.com/users/1544/jeffm"}, "edited": false, "score": 0, "creation_date": 1434569108, "post_id": 30899990, "comment_id": 49840106, "body": "I didn&#39;t realize this would happen automatically; I thought I would have to delete the handle. Thanks!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 2990, "user_id": 1544, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7e67b32d3712a82788c6d54363f7ba15?s=128&d=identicon&r=PG", "display_name": "jeffm", "link": "https://stackoverflow.com/users/1544/jeffm"}, "edited": false, "score": 2, "creation_date": 1434570522, "post_id": 30899990, "comment_id": 49840997, "body": "In a sense, closing the handle <i>is</i> the delete. Many kernel objects are reference counted, including file mappings.  When you create the mapping, it has a reference count of 1.  When you close the handle, its reference count decrements. When the reference count reaches zero, the mapping is freed. That is why the app needs to open its handle to the mapping before the service closes its handle, so the reference count will not fall to zero prematurely."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 6, "last_activity_date": 1434567392, "last_edit_date": 1434567392, "creation_date": 1434567072, "answer_id": 30899990, "question_id": 30899107, "link": "https://stackoverflow.com/questions/30899107/user-process-cant-see-global-shared-memory-created-by-service/30899990#30899990", "title": "User process can&#39;t see global shared memory created by service", "body": "<p>Your service is closing its handle to the file mapping immediately after creating it, thus the mapping is being destroyed before the app has a chance to open its handle to the mapping.  Your service needs to leave its handle to the mapping open, at least until after the app has opened its handle to the mapping.</p>\n\n<p>Since you are sharing configuration, you should probably be creating the mapping at service start and leave it open until service stop.  You could use a named event via <code>CreateEvent()</code> to let the service tell the app when the mapping has actually been created, and maybe use another named event whenever the content of the mapping is changed by either process.</p>\n"}], "owner": {"reputation": 2990, "user_id": 1544, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7e67b32d3712a82788c6d54363f7ba15?s=128&d=identicon&r=PG", "display_name": "jeffm", "link": "https://stackoverflow.com/users/1544/jeffm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 866, "favorite_count": 0, "accepted_answer_id": 30899990, "answer_count": 1, "score": 2, "last_activity_date": 1434567392, "creation_date": 1434564418, "last_edit_date": 1495542140, "question_id": 30899107, "link": "https://stackoverflow.com/questions/30899107/user-process-cant-see-global-shared-memory-created-by-service", "title": "User process can&#39;t see global shared memory created by service", "body": "<p>I have a Windows service (running in the system process) and a desktop application that need to share a configuration structure. The data originates in the app, but the user process doesn't have permission to create a global memory object so I create it when the service starts using CreateFileMapping() and a DACL based on <a href=\"https://stackoverflow.com/a/898863/1544\">this answer</a>. This appears to work fine: I get a non-null handle back from CreateFileMapping() and GetLastError() is 0. The problem is that the app can't see the object -- OpenFileMapping() returns a NULL handle and ERROR_FILE_NOT_FOUND -- and I also can't see it if I manually browse the global objects with WinObj. What's keeping my object from being visible?</p>\n\n<pre><code>SECURITY_ATTRIBUTES security;\nZeroMemory(&amp;security, sizeof(security));\nsecurity.nLength = sizeof(security);\nConvertStringSecurityDescriptorToSecurityDescriptor(\n    \"D:P(A;OICI;GA;;;SY)(A;OICI;GA;;;BA)(A;OICI;GWGR;;;IU)\",\n    SDDL_REVISION_1,\n    &amp;security.lpSecurityDescriptor,\n    NULL);\nHANDLE  hFile = CreateFileMapping(INVALID_HANDLE_VALUE, &amp;security, PAGE_READWRITE, 0, 1024*4, \"Global\\\\gCONFIGXFILE\");\nDWORD   fileMappingResult = GetLastError();\nif (hFile)\n{\n    CloseHandle(hFile);\n}\nLocalFree(security.lpSecurityDescriptor);\n</code></pre>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 5, "creation_date": 1434564101, "post_id": 30898967, "comment_id": 49837044, "body": "You want a <a href=\"http://en.cppreference.com/w/cpp/thread/thread\" rel=\"nofollow noreferrer\">thread</a>."}], "answers": [{"comments": [{"owner": {"reputation": 320, "user_id": 4777803, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/EVav3.png?s=128&g=1", "display_name": "JarFile", "link": "https://stackoverflow.com/users/4777803/jarfile"}, "edited": false, "score": 0, "creation_date": 1434564558, "post_id": 30899052, "comment_id": 49837344, "body": "having the same code I showed in my question, along with the thread in main, it still does not run in the background. NOTE: I have included thread."}, {"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "reply_to_user": {"reputation": 320, "user_id": 4777803, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/EVav3.png?s=128&g=1", "display_name": "JarFile", "link": "https://stackoverflow.com/users/4777803/jarfile"}, "edited": false, "score": 0, "creation_date": 1434564669, "post_id": 30899052, "comment_id": 49837411, "body": "It is an example code. Of course it is blocking because you are calling <code>join()</code> method to wait the thread to finish it&#39;s work. Read more about threading and refactor your code."}, {"owner": {"reputation": 320, "user_id": 4777803, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/EVav3.png?s=128&g=1", "display_name": "JarFile", "link": "https://stackoverflow.com/users/4777803/jarfile"}, "edited": false, "score": 0, "creation_date": 1434564858, "post_id": 30899052, "comment_id": 49837529, "body": "I have read more about threads, if I am correct I would use <code>thread.detach();</code> Anyway it works fine, thanks for the answer."}], "tags": [], "owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "is_accepted": true, "score": 2, "last_activity_date": 1434564257, "creation_date": 1434564257, "answer_id": 30899052, "question_id": 30898967, "link": "https://stackoverflow.com/questions/30898967/c-have-a-function-repeat-in-the-background/30899052#30899052", "title": "C++ Have a function repeat in the background", "body": "<p>Use <code>std::thread</code> with this function:</p>\n\n<pre><code>#include &lt;thread&gt;\n\nvoid foo() {\n    // your code\n}\n\nint main() {\n    std::thread thread(foo);\n    thread.join();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1434565591, "last_edit_date": 1434565591, "creation_date": 1434565116, "answer_id": 30899329, "question_id": 30898967, "link": "https://stackoverflow.com/questions/30898967/c-have-a-function-repeat-in-the-background/30899329#30899329", "title": "C++ Have a function repeat in the background", "body": "<p>What you want is a <code>std::thread</code> as I mentioned in my comment. But also note you need a synchronization mechanism to prevent concurrent access for your global variables:</p>\n\n<pre><code>double time_counter = 0;\nclock_t this_time = clock();\nclock_t last_time = this_time;\nconst int NUM_SECONDS = 1;\nstd::mutex protect; // &lt;&lt;&lt;&lt;\nvoid repeat() {\n    while (1) {\n        this_time = clock();\n\n        time_counter += (double)(this_time - last_time);\n        last_time = this_time;\n        if (time_counter &gt; (double)(NUM_SECONDS * CLOCKS_PER_SEC)) {\n            time_counter -= (double)(NUM_SECONDS * CLOCKS_PER_SEC);\n            std::lock_guard&lt;std::mutex&gt; lock(protect); // &lt;&lt;&lt;&lt;\n            rockSecPast++;\n        }\n    }\n}\n</code></pre>\n\n<p>and do the same in your main thread</p>\n\n<pre><code>std::thread t(repeat);\nt.detach();\n\n// ....\n\nint currentRockSecPast = 0;\n{\n    // read the asynchronously updated value safely\n    std::lock_guard&lt;std::mutex&gt; lock(protect);\n    currentRockSecPast = rockSecPast; \n}\n</code></pre>\n\n<hr>\n\n<p><sub>If I were you I'd put all that mess from above together in a separate class.</sub></p>\n"}], "owner": {"reputation": 320, "user_id": 4777803, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/EVav3.png?s=128&g=1", "display_name": "JarFile", "link": "https://stackoverflow.com/users/4777803/jarfile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 30899052, "answer_count": 2, "score": 0, "last_activity_date": 1434565591, "creation_date": 1434564023, "last_edit_date": 1495539822, "question_id": 30898967, "link": "https://stackoverflow.com/questions/30898967/c-have-a-function-repeat-in-the-background", "title": "C++ Have a function repeat in the background", "body": "<p>I am using microsoft visual express.</p>\n\n<p>I have viewed the accepted answer for <a href=\"https://stackoverflow.com/questions/10807681/loop-every-10-second\">this</a> question and it seems to not be doing what I want it to do.</p>\n\n<p>This is the function that repeats every second for me:</p>\n\n<pre><code>double time_counter = 0;\nclock_t this_time = clock();\nclock_t last_time = this_time;\nconst int NUM_SECONDS = 1;\nvoid repeat()\n{\n    while (1)\n    {\n        this_time = clock();\n\n        time_counter += (double)(this_time - last_time);\n\n        last_time = this_time;\n\n        if (time_counter &gt; (double)(NUM_SECONDS * CLOCKS_PER_SEC))\n        {\n            time_counter -= (double)(NUM_SECONDS * CLOCKS_PER_SEC);\n            rockSecPast++;\n        }\n    }\n}\n</code></pre>\n\n<p>What I am trying to accomplish is repeating this while in the background. What I mean by this is I want this function to run, but the program still go on to other functions and run normally with this function always repeating in the background.</p>\n\n<p>What I have tried is viewing that question for an answer. However I did not find one.</p>\n\n<p>My question: How would I have a function repeat in the background, while the program can still continue and run normally with other functions. Everything should still work, but the function should always run in the background.</p>\n\n<p>I have also done some google searching and most of what I find is repeating continuously only running that function and not continuing to other functions.</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1434564166, "post_id": 30898849, "comment_id": 49837083, "body": "<code>partialSumList.reserve(atoi(argv[2]));</code>  Is this what you really meant, or did you mean <code>resize</code>?"}, {"owner": {"reputation": 860, "user_id": 2954317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43697e12f5be93fc6beb8f67b485ece8?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthat", "link": "https://stackoverflow.com/users/2954317/lighthat"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1434564367, "post_id": 30898849, "comment_id": 49837222, "body": "Turns out I actually should have used <code>resize</code>. I made the change but it didn&#39;t solve the problem unfortunately."}], "answers": [{"comments": [{"owner": {"reputation": 860, "user_id": 2954317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43697e12f5be93fc6beb8f67b485ece8?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthat", "link": "https://stackoverflow.com/users/2954317/lighthat"}, "edited": false, "score": 0, "creation_date": 1434564606, "post_id": 30899130, "comment_id": 49837374, "body": "I used <code>capacity</code> because I used <code>reserve</code> when I should have used <code>resize</code> and <code>size()</code> would return zero.  I made those changes and also changed <code>capacity</code> to <code>size</code>, still getting the same error unfortunately."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 860, "user_id": 2954317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43697e12f5be93fc6beb8f67b485ece8?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthat", "link": "https://stackoverflow.com/users/2954317/lighthat"}, "edited": false, "score": 1, "creation_date": 1434564782, "post_id": 30899130, "comment_id": 49837490, "body": "@Lighthat  Please change your original post to indicate these adjustments.  The code you posted, threaded or non-threaded would not work."}, {"owner": {"reputation": 860, "user_id": 2954317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43697e12f5be93fc6beb8f67b485ece8?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthat", "link": "https://stackoverflow.com/users/2954317/lighthat"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1434564827, "post_id": 30899130, "comment_id": 49837511, "body": "@PaulMcKenzie I just did."}, {"owner": {"reputation": 860, "user_id": 2954317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43697e12f5be93fc6beb8f67b485ece8?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthat", "link": "https://stackoverflow.com/users/2954317/lighthat"}, "edited": false, "score": 0, "creation_date": 1434565989, "post_id": 30899130, "comment_id": 49838148, "body": "Regarding your edit, when I make <code>threadCount-1</code> just <code>threadCount</code>, I get a segmentation fault when it tries to join the last thread."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 860, "user_id": 2954317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43697e12f5be93fc6beb8f67b485ece8?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthat", "link": "https://stackoverflow.com/users/2954317/lighthat"}, "edited": false, "score": 0, "creation_date": 1434566220, "post_id": 30899130, "comment_id": 49838300, "body": "@Lighthat Is that after you fixed the part about setting one past the end of the vector instead of the last element of the vector?"}, {"owner": {"reputation": 860, "user_id": 2954317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43697e12f5be93fc6beb8f67b485ece8?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthat", "link": "https://stackoverflow.com/users/2954317/lighthat"}, "edited": false, "score": 0, "creation_date": 1434566242, "post_id": 30899130, "comment_id": 49838311, "body": "@NathanOliver Yes, sorry I forgot to mention that. It still looks like I should join up to <code>threadCount</code> since I&#39;m using <code>&lt;</code> and not <code>&lt;=</code> but I guess not."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 860, "user_id": 2954317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43697e12f5be93fc6beb8f67b485ece8?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthat", "link": "https://stackoverflow.com/users/2954317/lighthat"}, "edited": false, "score": 0, "creation_date": 1434566361, "post_id": 30899130, "comment_id": 49838392, "body": "@Lighthat Did you also fix <code>pthread_create(&amp;threadList[threadCount], NULL, pi_calc, &amp;parameterList[threadCount])</code> to be <code>pthread_create(&amp;threadList[threadCount - 1], NULL, pi_calc, &amp;parameterList[threadCount - 1])</code>?"}, {"owner": {"reputation": 860, "user_id": 2954317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43697e12f5be93fc6beb8f67b485ece8?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthat", "link": "https://stackoverflow.com/users/2954317/lighthat"}, "edited": false, "score": 0, "creation_date": 1434566444, "post_id": 30899130, "comment_id": 49838441, "body": "@NathanOliver I actually just increased the size of the vector by 1 so I didn&#39;t have to do that. Probably not the most efficient solution."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1434566434, "last_edit_date": 1434566434, "creation_date": 1434564508, "answer_id": 30899130, "question_id": 30898849, "link": "https://stackoverflow.com/questions/30898849/double-free-or-corruption-out-on-return/30899130#30899130", "title": "Double free or corruption (out) on return", "body": "<p>One thing I can see is you might be going past the end of the vector here:</p>\n\n<pre><code>for(int i = 0; i &lt; partialSumList.capacity(); ++i)\n</code></pre>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/container/vector/capacity\" rel=\"nofollow\"><code>capacity()</code></a> returns how many elements the vector can hold.  This can be more than the <a href=\"http://en.cppreference.com/w/cpp/container/vector/size\" rel=\"nofollow\"><code>size()</code></a> of the vector.  You can change you call to <code>capacity()</code> to <code>size()</code> to make sure you don't go past the end of the vector</p>\n\n<pre><code>for(int i = 0; i &lt; partialSumList.size(); ++i)\n</code></pre>\n\n<p>The second thing I spot is that when <code>iterations % threadCount != 0</code> you have:</p>\n\n<pre><code>parameterList[threadCount].iterations = (iterations % threadCount) + (iterations / threadCount);\nparameterList[threadCount].offset = threadCount - 1;\npthread_create(&amp;threadList[threadCount], NULL, pi_calc, &amp;parameterList[threadCount]);\n</code></pre>\n\n<p>Which is writing past the end of the vector.  Then when you join all of the threads you don't join the last thread as you do:</p>\n\n<pre><code>for(int i = 0; i &lt; threadCount-1; ++i){\n                              ^^^ uh oh.  we missed the last thread \n    pthread_join(threadList[i], &amp;status);\n    cout &lt;&lt; status &lt;&lt; endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 860, "user_id": 2954317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43697e12f5be93fc6beb8f67b485ece8?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthat", "link": "https://stackoverflow.com/users/2954317/lighthat"}, "edited": false, "score": 0, "creation_date": 1434565903, "post_id": 30899518, "comment_id": 49838086, "body": "I&#39;m pretty upset I didn&#39;t catch that. I wonder why the program continued to execute correctly if I was stepping out of bounds, I thought the program would terminate whenever that happens. Even gdb told me the problem happened on <code>return</code> rather than an out of bounds error. Thank you!"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 860, "user_id": 2954317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43697e12f5be93fc6beb8f67b485ece8?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthat", "link": "https://stackoverflow.com/users/2954317/lighthat"}, "edited": false, "score": 1, "creation_date": 1434566006, "post_id": 30899518, "comment_id": 49838161, "body": "The behavior is undefined when you access a vector element using <code>operator [ ]</code> and the index is out of bounds.  For bounds checking, use the <code>vector::at( )</code> function."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 3, "last_activity_date": 1434565657, "creation_date": 1434565657, "answer_id": 30899518, "question_id": 30898849, "link": "https://stackoverflow.com/questions/30898849/double-free-or-corruption-out-on-return/30899518#30899518", "title": "Double free or corruption (out) on return", "body": "<p>I see this issue:</p>\n\n<p>You are writing beyond the vector's bounds:</p>\n\n<pre><code>    vector&lt;threadParameterList&gt; parameterList (atoi(argv[2]));\n    //...\n    int        threadCount = atoi(argv[2]);\n    //...\n    parameterList[threadCount].iterations = (iterations % threadCount) + (iterations / threadCount);\n    parameterList[threadCount].offset = threadCount - 1;\n</code></pre>\n\n<p>Accessing <code>parameterList[threadCount]</code> is out of bounds.</p>\n\n<p>I don't see in the code where <code>threadCount</code> is adjusted, so it remains the same value throughout that snippet.</p>\n\n<p>Tip:  If the goal is to access the last item in a container, use <code>vector::back()</code>.  It works all the time for non-empty vectors.</p>\n\n<pre><code>    parameterList.back().iterations = (iterations % threadCount) + (iterations / threadCount);\n    parameterList.back().offset = threadCount - 1;\n</code></pre>\n"}], "owner": {"reputation": 860, "user_id": 2954317, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43697e12f5be93fc6beb8f67b485ece8?s=128&d=identicon&r=PG&f=1", "display_name": "Lighthat", "link": "https://stackoverflow.com/users/2954317/lighthat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2803, "favorite_count": 0, "accepted_answer_id": 30899518, "answer_count": 2, "score": 0, "last_activity_date": 1434566434, "creation_date": 1434563598, "last_edit_date": 1434564798, "question_id": 30898849, "link": "https://stackoverflow.com/questions/30898849/double-free-or-corruption-out-on-return", "title": "Double free or corruption (out) on return", "body": "<p>I'm doing an assignment that involves calculating pi with threads. I've done this using mutex and it works fine, but I would like to get this version working as well. Here is my code.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;iomanip&gt;\n#include &lt;vector&gt;\n#include &lt;pthread.h&gt;\n\nusing namespace std;\n\ntypedef struct{\n    int iterations;     //How many iterations this thread is going to do\n    int offset;         //The offset multiplier for the calculations (Makes sure each thread calculates a different part of the formula)\n}threadParameterList;\n\nvector&lt;double&gt; partialSumList;\n\nvoid* pi_calc(void* param){\n    threadParameterList* _param = static_cast&lt;threadParameterList*&gt;(param);\n    double k = 1.0;\n    for(int i = _param-&gt;iterations * _param-&gt;offset + 1; i &lt; _param-&gt;iterations * (_param-&gt;offset + 1); ++i){\n        partialSumList[_param-&gt;offset] += (double)k*(4.0/((2.0*i)*(2.0*i+1.0)*(2.0*i+2.0))); \n        k *= -1.0;\n    }\n    pthread_exit(0);\n}\n\nint main(int argc, char* argv[]){\n\n    //Error checking\n    if(argc != 3){\n        cout &lt;&lt; \"error: two parameters required [iterations][threadcount]\" &lt;&lt; endl;\n        return -1;\n    }\n    if(atoi(argv[1]) &lt;= 0 || atoi(argv[2]) &lt;= 0){\n        cout &lt;&lt; \"error: invalid parameter supplied - parameters must be &gt; 0.\" &lt;&lt; endl;\n        return -1;\n    }\n\n    partialSumList.resize(atoi(argv[2]));\n\n    vector&lt;pthread_t&gt;           threadList    (atoi(argv[2]));\n    vector&lt;threadParameterList&gt; parameterList (atoi(argv[2]));\n\n    int iterations  = atoi(argv[1]),\n        threadCount = atoi(argv[2]);\n\n    //Calculate workload for each thread\n    if(iterations % threadCount == 0){  //Threads divide evenly\n        for(int i = 0; i &lt; threadCount; ++i){\n            parameterList[i].iterations = iterations/threadCount;\n            parameterList[i].offset = i;\n            pthread_create(&amp;threadList[i], NULL, pi_calc, &amp;parameterList[i]);\n        }\n        void* status;\n        for(int i = 0; i &lt; threadCount; ++i){\n            pthread_join(threadList[i], &amp;status);\n        }\n\n    }\n    else{                               //Threads do not divide evenly\n        for(int i = 0; i &lt; threadCount - 1; ++i){\n            parameterList[i].iterations = iterations/threadCount;\n            parameterList[i].offset = i;\n            pthread_create(&amp;threadList[i], NULL, pi_calc, &amp;parameterList[i]);\n        }\n        //Add the remainder to the last thread\n        parameterList[threadCount].iterations = (iterations % threadCount) + (iterations / threadCount);\n        parameterList[threadCount].offset = threadCount - 1;\n        pthread_create(&amp;threadList[threadCount], NULL, pi_calc, &amp;parameterList[threadCount]);\n        void* status;\n        for(int i = 0; i &lt; threadCount-1; ++i){\n            pthread_join(threadList[i], &amp;status);\n            cout &lt;&lt; status &lt;&lt; endl;\n        }\n    }\n\n    //calculate pi\n    double pi = 3.0;\n    for(int i = 0; i &lt; partialSumList.size(); ++i){\n        pi += partialSumList[i];\n    }\n\n    cout &lt;&lt; \"Value of pi: \" &lt;&lt; setw(15) &lt;&lt; setprecision(15) &lt;&lt; pi &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The code works fine in most cases. There are certain combinations of parameters that cause me to get a double free or corruption error on <code>return 0</code>. For example, if I use the parameters <code>100</code> and <code>10</code> the program creates 10 threads and does 10 iterations of the formula on each thread, works fine. If I use the parameters <code>10</code> and <code>4</code> the program creates 4 threads that do 2 iterations on 3 threads and 4 on the 4th thread, works fine. However, if I use <code>5</code> and <code>3</code>, the program will correctly calculate the value and even print it out, but I get the error immediately after. This also happens for <code>17</code> and <code>3</code>, and <code>10</code> and <code>3</code>. I tried <code>15</code> and <code>7</code>, but then I get a <code>munmap_chunk(): invalid pointer</code> error when the threads are trying to be joined - although i think that's something for another question.</p>\n\n<p>If I had to guess, it has something to do with <code>pthread_exit</code> deallocating memory and then the same memory trying to be deallocated again on <code>return</code>, since I'm passing the parameter struct as a pointer. I tried a few different things like creating a local copy and defining <code>parameterList</code> as a vector of pointers, but it didn't solve anything. I've also tried <code>erase</code>ing and <code>clear</code>ing the vector before <code>return</code> but that didn't help either.</p>\n"}, {"tags": ["c++", "text", "zero", "fault"], "comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 4, "creation_date": 1434563320, "post_id": 30898709, "comment_id": 49836609, "body": "Shouldn&#39;t the second <code>while</code> be using Min, not Ein?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1434563860, "post_id": 30898709, "comment_id": 49836914, "body": "None of the code here should trigger a segmentation fault even with the mistake of trying to read from <code>Ein</code> after it already reached EOF. I suspect the actual fault is the code following this we <i>don&#39;t</i> see where <code>M</code> is indexed via <code>operator[]</code> under the assumption (<i>never</i> a good idea) it contains data (which it does not)."}], "answers": [{"comments": [{"owner": {"reputation": 201, "user_id": 4974824, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/615f1a2058dd95edef0957f1aa9c787e?s=128&d=identicon&r=PG&f=1", "display_name": "khfrekek", "link": "https://stackoverflow.com/users/4974824/khfrekek"}, "edited": false, "score": 0, "creation_date": 1434564000, "post_id": 30898807, "comment_id": 49836990, "body": "Wow! I feel so stupid now, the whole time it was just that. The perils of using copy and paste I guess. And also, I did close the files, just later on in the code :) Thank you so much!"}], "tags": [], "owner": {"reputation": 161, "user_id": 5017207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JAmde.jpg?s=128&g=1", "display_name": "c9mm9dore", "link": "https://stackoverflow.com/users/5017207/c9mm9dore"}, "is_accepted": true, "score": 2, "last_activity_date": 1434563427, "creation_date": 1434563427, "answer_id": 30898807, "question_id": 30898709, "link": "https://stackoverflow.com/questions/30898709/c-gives-segmentation-fault-from-text-file-of-all-0s/30898807#30898807", "title": "c++ gives Segmentation Fault from text file of all 0&#39;s", "body": "<p>For the second while loop, did you want to have:</p>\n\n<pre><code>while ( Min &gt;&gt; value ) {\n   M.push_back(value);\n}\n</code></pre>\n\n<p>You're getting the segmentation fault because the Ein has hit EOF.  Also, you may want to close the input streams :)</p>\n"}, {"comments": [{"owner": {"reputation": 201, "user_id": 4974824, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/615f1a2058dd95edef0957f1aa9c787e?s=128&d=identicon&r=PG&f=1", "display_name": "khfrekek", "link": "https://stackoverflow.com/users/4974824/khfrekek"}, "edited": false, "score": 0, "creation_date": 1434563997, "post_id": 30898851, "comment_id": 49836987, "body": "Wow! I feel so stupid now, the whole time it was just that. The perils of using copy and paste I guess. And also, I did close the files, just later on in the code :) Thank you so much!"}], "tags": [], "owner": {"reputation": 31, "user_id": 5016609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b162e4eb5c92295b3eb77e876ba8c400?s=128&d=identicon&r=PG&f=1", "display_name": "timtoy1", "link": "https://stackoverflow.com/users/5016609/timtoy1"}, "is_accepted": false, "score": 2, "last_activity_date": 1434563621, "creation_date": 1434563621, "answer_id": 30898851, "question_id": 30898709, "link": "https://stackoverflow.com/questions/30898709/c-gives-segmentation-fault-from-text-file-of-all-0s/30898851#30898851", "title": "c++ gives Segmentation Fault from text file of all 0&#39;s", "body": "<p>You should make sure that you close the file stream, you're also reading from the same file twice, which is why you're getting the seg fault</p>\n"}], "owner": {"reputation": 201, "user_id": 4974824, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/615f1a2058dd95edef0957f1aa9c787e?s=128&d=identicon&r=PG&f=1", "display_name": "khfrekek", "link": "https://stackoverflow.com/users/4974824/khfrekek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 30898807, "answer_count": 2, "score": -1, "last_activity_date": 1434563621, "creation_date": 1434563047, "question_id": 30898709, "link": "https://stackoverflow.com/questions/30898709/c-gives-segmentation-fault-from-text-file-of-all-0s", "title": "c++ gives Segmentation Fault from text file of all 0&#39;s", "body": "<p>I'm writing a really simple code (or so I thought) that requires 2 text files to be read in.  One is full of a bunch of data points (of type double) and the other one happens to be a bunch of 0's (this is only SOMETIMES filled with 0's, sometimes it will be other numbers, so I need it to work for both 0's and non-zero's) like so:</p>\n\n<pre><code>0\n0\n0\n..\n</code></pre>\n\n<p>I am reading these into vectors like so:</p>\n\n<pre><code>vector &lt;double&gt; E;\nvector &lt;double&gt; M;\nifstream Ein(\"E.txt\");\nifstream Min(\"M.txt\");\n\nwhile ( Ein &gt;&gt; value ) {\n        E.push_back(value);\n    }\n\n     while ( Ein &gt;&gt; value ) {\n        M.push_back(value);\n    }\n</code></pre>\n\n<p>This works perfectly for the vector E (the one with actual values) after I comment out the M vector.  But whenever I include the M vector (all 0's) I get a segmentation fault when I run the program.</p>\n\n<p>This means that C++ doesn't understand 0 as an input I guess? Does anyone have any ideas on how to get this to work?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "foreach"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1434563462, "post_id": 30898705, "comment_id": 49836701, "body": "This is actually called a <a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">ranged based for loop</a>.  <a href=\"http://en.cppreference.com/w/cpp/algorithm/for_each\" rel=\"nofollow noreferrer\">foreach</a> is something else"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2953119"}, "edited": false, "score": 0, "creation_date": 1434569443, "post_id": 30898784, "comment_id": 49840329, "body": "You mean the objects returned by the functions should behave jsut like iterators. I mean, support all overloaded operators iterators do. Is that right?"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1434619337, "post_id": 30898784, "comment_id": 49860158, "body": "An iterator is not a pointer is not an iterator (it might be though), and the Standard describes in quite exact terms what a range-based for loop is semantically. If the provided <code>begin</code> and <code>end</code> functions return objects that work in that construct (i.e. they pretty much behave as ForwardIterators) then you can use range-based for on your type."}, {"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1434619499, "post_id": 30898784, "comment_id": 49860279, "body": "@rubenvb Did I say somewhere that iterator is a pointer? I said exactly what you wrote here."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 1, "creation_date": 1434619673, "post_id": 30898784, "comment_id": 49860395, "body": "<code>begin</code> and <code>end</code> should return objects with an <i>(forward) iterator</i> interface, not a &quot;pointer interface&quot;. A pointer (to somewhere inside a contiguous block of memory) is indeed a random access iterator, but any one pointer isn&#39;t just magically an iterator. C++ algorithms and constructs like range-based for are defined in terms of iterators, not pointers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2953119"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 1, "creation_date": 1434620164, "post_id": 30898784, "comment_id": 49860757, "body": "@rubenvb Wait, but both pointers and iterators have the same semantic. So why couldn&#39;t we say that iterators are pointers in some degree?"}, {"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1434620271, "post_id": 30898784, "comment_id": 49860842, "body": "@rubenvb Josuttis, quote: &quot;The STL designers decided to use the pointer interface for the iterators to let pointers replace iterators. If something behaves like an iterator so it is an iterator. In fact, pointers are random-access iterators.&quot; I have this book right in front of me. So, for <code>int arr[]</code> we may use <code>std::begin()</code> which returns a pointer to zero element and <code>std::end()</code> which returns a pointer to <code>[0] + NumOfElementsIn(arr)</code>. I dont understand your point because you repeat exactly what I wrote."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1434620574, "post_id": 30898784, "comment_id": 49861056, "body": "You quote &quot;If something behaves like an iterator so it is an iterator.&quot; Your answer implies the inverse. Also, STL is so nineties. It&#39;s the Standard Library now. There was and is and never will be a freestanding <code>std::begin</code> nor <code>std::end</code> in the STL."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1434620751, "post_id": 30898784, "comment_id": 49861186, "body": "@Victor: Point 2 &quot;They get this object and work with it just like with a pointer. Why pointer? Because all stl- and stl-compatible iterators are using pointer interface.&quot; and Point 3: &quot;From the 2 point, you may return any thing from your begin() and end() that looks like a pointer (uses its interface)&quot;."}, {"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1434621136, "post_id": 30898784, "comment_id": 49861482, "body": "@rubenvb You got me about <code>standard library</code> and <code>stl</code> terms but a lot of people confuse this sometimes. What wrong did I say in your quote? Don&#39;t you see logic? Iterators use pointer interface. So you need to return something with pointer interface, and it will look like an iterator. Is this wrong?"}], "tags": [], "owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "is_accepted": true, "score": 4, "last_activity_date": 1434662254, "last_edit_date": 1495541155, "creation_date": 1434563341, "answer_id": 30898784, "question_id": 30898705, "link": "https://stackoverflow.com/questions/30898705/usage-of-the-foreach-loop-in-c/30898784#30898784", "title": "Usage of the foreach loop in C++", "body": "<p>The so-called <code>foreach</code> loop looks for the <code>begin()</code> and <code>end()</code> in the scope they are needed. So, if your class implements <code>begin()</code> and <code>end()</code> with iterator interface you may use new <code>foreach</code> loop.</p>\n\n<p>As @NathanOliver said, you should avoid calling this loop as <code>foreach</code> loop because you may confuse it with <code>std::for_each</code> algorithm. Call it <code>range-based for</code>.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>You may return any thing from <code>begin()</code> and <code>end()</code> methods. Let me tell you how it works from the beginning:</p>\n\n<ol>\n<li><code>std::begin()</code> and <code>std::end()</code> both look for <code>Type::begin()</code> and <code>Type::end()</code> respectively.</li>\n<li>They get this object and work with it just like with a pointer. Why pointer? Because all stl- and stl-compatible iterators are using pointer interface.</li>\n<li>From the 2 point, you may return any thing from your <code>begin()</code> and <code>end()</code> that looks like a pointer (uses its interface): a pointer, or an iterator. Pointer actually is just like a random-access iterator.</li>\n</ol>\n\n<p>Also, STL provides a small concept about iterators:</p>\n\n<blockquote>\n  <p>everything that looks like an iterator is an iterator.</p>\n</blockquote>\n\n<p>Example about <em>pointer interface</em>:</p>\n\n<pre><code>struct A\n{ \n    int* val = new int[5];\n\n    int* begin() const {\n        return val;\n    }\n\n    int* end() const {\n        return val + 5;\n    }\n};\n\n\nint main ()\n{\n    A a;\n    for (const auto &amp;v : a) {\n        std::cout &lt;&lt; \"value: \" &lt;&lt; v &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Reading section:</strong></p>\n\n<p><a href=\"http://www.cppstdlib.com/\" rel=\"nofollow noreferrer\">Nicolai M. Josuttis C++11 STDLIB</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/16434681/stl-compatible-iterators-for-custom-containers\">STL compatible iterators for custom containers</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/3182843/writing-stl-compatible-iterators\">Writing STL compatible iterators</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/8054273/how-to-implement-an-stl-style-iterator-and-avoid-common-pitfalls\">How to implement an STL-style iterator and avoid common pitfalls</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2953119"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1257, "favorite_count": 0, "accepted_answer_id": 30898784, "answer_count": 1, "score": 2, "last_activity_date": 1434662254, "creation_date": 1434563043, "last_edit_date": 1434651942, "question_id": 30898705, "link": "https://stackoverflow.com/questions/30898705/usage-of-the-foreach-loop-in-c", "title": "Usage of the foreach loop in C++", "body": "<p>I've found an example at <a href=\"http://www.cplusplus.com/reference/regex/regex_search/\" rel=\"nofollow\">cpluplus.com</a>. Here it is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;regex&gt;\n\nint main ()\n{\n  std::string s (\"This subject has a submarine as a subsequence\");\n  std::smatch m;\n  std::regex e (\"\\\\b(sub)([^ ]*)\");   // Matches words beginning by \"sub\"\n\n  std::cout &lt;&lt; \"Target sequence: \" &lt;&lt; s &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"Regular expression: /\\\\b(sub)([^ ]*)/\" &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"The following matches and submatches were found:\" &lt;&lt; std::endl;\n\n  while (std::regex_search (s,m,e)) {\n    for (auto x:m) \n      std::cout &lt;&lt; x &lt;&lt; \" \";\n    std::cout &lt;&lt; std::endl;\n    s = m.suffix().str();\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Why can we use a <code>for-each</code> loop on the object of the type <code>smatch</code>?</p>\n\n<p>I'm used to using the foreach loop only with <a href=\"http://en.wikipedia.org/wiki/Standard_Template_Library\" rel=\"nofollow\">STL</a>-containers...</p>\n"}, {"tags": ["c++", "segmentation-fault"], "comments": [{"owner": {"reputation": 2124, "user_id": 292412, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/623e4f44f3310cad6e47ac3415c57a3d?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/292412/eric"}, "edited": false, "score": 0, "creation_date": 1434564679, "post_id": 30898695, "comment_id": 49837412, "body": "What are you trying to do?  The line <code>validContactList[z] = listOfNumbers[s];</code> seems to do nothing useful since <code>validContactList</code> is a function-scoped symbol; i.e. it will be destroyed when the function returns, leaving you with a memory leak containing all those contacts you created with <code>validContactList = new Contact[tempHoldCount];</code>"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 5016609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b162e4eb5c92295b3eb77e876ba8c400?s=128&d=identicon&r=PG&f=1", "display_name": "timtoy1", "link": "https://stackoverflow.com/users/5016609/timtoy1"}, "is_accepted": false, "score": 0, "last_activity_date": 1434563870, "creation_date": 1434563870, "answer_id": 30898924, "question_id": 30898695, "link": "https://stackoverflow.com/questions/30898695/segmentation-faults/30898924#30898924", "title": "Segmentation Faults", "body": "<p>A segmentation fault generally occurs when your code accesses memory outside of what memory is assigned to the variable being used. I.E.</p>\n\n<pre><code>int myarray[10];\n\nfor(int i=0;i&lt;=10;i++)\n{\n  myarray[10] = 0;\n}\n</code></pre>\n\n<p>will create a segmentation fault on runtime because myarray[10] is not a declared variable since myarray only has 10 iterations (0-9) not 11</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1434563922, "creation_date": 1434563922, "answer_id": 30898943, "question_id": 30898695, "link": "https://stackoverflow.com/questions/30898695/segmentation-faults/30898943#30898943", "title": "Segmentation Faults", "body": "<p>Since you used <code>new []</code> to allocate memory for <code>lisOfNumbers</code>, you need to use</p>\n\n<pre><code>delete [] listOfNumbers;\n</code></pre>\n\n<p>That may not fix your segmentation fault problem but it's the right thing to do. Strictly speaking, using</p>\n\n<pre><code>delete listOfNumbers;\n</code></pre>\n\n<p>is cause for undefined behavior.</p>\n"}], "owner": {"reputation": 192, "user_id": 4606473, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NgXkw.jpg?s=128&g=1", "display_name": "grillo", "link": "https://stackoverflow.com/users/4606473/grillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "closed_date": 1434563966, "answer_count": 2, "score": 0, "last_activity_date": 1484564013, "creation_date": 1434563010, "last_edit_date": 1484564013, "question_id": 30898695, "link": "https://stackoverflow.com/questions/30898695/segmentation-faults", "closed_reason": "Duplicate", "title": "Segmentation Faults", "body": "<p>While compiling my code I came across a segmentation fault in my code and really don't understand them. \nI'm not looking for a answer to my code more something that would help me understand what a segmentation fault is, and why it happens. For reference though, here is the code I was working on (I know its not a good way of going about this, but I am still learning). </p>\n\n<pre><code>void PhoneBook::verifyAllContacts() {\n    Contact* listOfNumbers;\n    listOfNumbers = new Contact[numContacts];\n    int tempHoldCount = 0;\n\n    for(int i = 0; i &lt; numContacts; i++) {\n        if(listOfNumbers[i].verifyPhoneNumber() == true &amp;&amp; listOfNumbers[i].getEmergencyContact()-&gt;verifyPhoneNumber() == true)\n            tempHoldCount++;\n    }\n\n    Contact* validContactList;\n    validContactList = new Contact[tempHoldCount];\n\n    for(int z = 0; z &lt; tempHoldCount; z++) {\n        for(int s = 0; s &lt; numContacts; s++) {\n            if(listOfNumbers[s].verifyPhoneNumber() == true &amp;&amp; listOfNumbers[s].getEmergencyContact()-&gt;verifyPhoneNumber() == true)\n                validContactList[z] = listOfNumbers[s];\n        }\n    }\n\n    delete listOfNumbers;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost-python"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3240228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e29c59d38cb0ca53e73afa0e9cbe32?s=128&d=identicon&r=PG&f=1", "display_name": "user3240228", "link": "https://stackoverflow.com/users/3240228/user3240228"}, "edited": false, "score": 0, "creation_date": 1434625135, "post_id": 30910531, "comment_id": 49864087, "body": "Thank you very much for quick response! I think might be a problem in your fix. The shared pointer which received by MyFnc doesn&#39;t prevent collection of PythonDerived object by GC (see <a href=\"https://wiki.python.org/moin/boost.python/HowTo\" rel=\"nofollow noreferrer\">link</a> section &quot;ownership of C++ object extended in Python&quot;). As I mentioned in my original question the PythonDerived object is stored by MyFnc in a vector for future use, so the collection of the PythonDerived object by GC must be prevented."}], "tags": [], "owner": {"reputation": 7948, "user_id": 4899330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a19fa016a8fc6c0a3250f03f108a9?s=128&d=identicon&r=PG&f=1", "display_name": "doqtor", "link": "https://stackoverflow.com/users/4899330/doqtor"}, "is_accepted": false, "score": 0, "last_activity_date": 1434617116, "creation_date": 1434617116, "answer_id": 30910531, "question_id": 30898657, "link": "https://stackoverflow.com/questions/30898657/boost-python-fails-to-call-a-c-virtual-function-which-is-overridden-in-a-pyt/30910531#30910531", "title": "Boost Python: Fails to call a C++ virtual function, which is overridden in a Python derived class", "body": "<p>I have modified your wrapper class and how it is exposed to python and now that is working as expected:</p>\n\n<pre><code>class MyClassWrap : public MyClass, public python::wrapper&lt;MyClass&gt;\n{\npublic:\n    MyClassWrap() : MyClass()\n    {\n    }\n\n    virtual void PureVirtual(int i)\n    {\n        this-&gt;get_override(\"PureVirtual\")(i);\n    }\n    virtual const char* VirtualWithDefaultImpl()\n    {\n        if (python::override f = this-&gt;get_override(\"VirtualWithDefaultImpl\"))\n            return f();\n        return MyClass::VirtualWithDefaultImpl();\n    }\n    const char* DefaultVirtualWithDefaultImpl()\n    {\n        return this-&gt;MyClass::VirtualWithDefaultImpl();\n    }\n\n};\n\nBOOST_PYTHON_MODULE(MyModule)\n{\npython::class_&lt;MyClassWrap, boost::shared_ptr&lt;MyClassWrap&gt;, boost::noncopyable&gt;(\"MyClass\")\n    .def(\"PureVirtual\", python::pure_virtual(&amp;MyClassWrap::PureVirtual), python::args(\"i\"))\n    .def(\"VirtualWithDefaultImpl\", &amp;MyClassWrap::VirtualWithDefaultImpl,\n         &amp;MyClassWrap::DefaultVirtualWithDefaultImpl);\n    python::def(\"MyFnc\", &amp;MyFnc, python::args(\"obj\"));\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>PythonDerived\n0\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3240228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e29c59d38cb0ca53e73afa0e9cbe32?s=128&d=identicon&r=PG&f=1", "display_name": "user3240228", "link": "https://stackoverflow.com/users/3240228/user3240228"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1434617116, "creation_date": 1434562880, "question_id": 30898657, "link": "https://stackoverflow.com/questions/30898657/boost-python-fails-to-call-a-c-virtual-function-which-is-overridden-in-a-pyt", "title": "Boost Python: Fails to call a C++ virtual function, which is overridden in a Python derived class", "body": "<p>I have a Python class, which is derived from a C++ class and overrides part of the functions. A C++ function receives an object of the Python class and stores it in a vector, so the Python class should not be collected by the GC. I tried two different approaches, but first one doesn't compile and second doesn't see the overrides at run time (the functions of C++ are called instead of the Python class functions). Please tell me what is the right way to do this.</p>\n\n<p>The C++ code:</p>\n\n<pre><code>class MyClass\n{\npublic:\n    virtual void PureVirtual(int i) = 0;\n    virtual const char* VirtualWithDefaultImpl()\n    {\n        return \"MyClass\";\n    }\n};\n\nvoid MyFnc(boost::shared_ptr&lt;MyClass&gt; obj)\n{\n    myVector.push_back(obj);\n    std::cout &lt;&lt; obj-&gt;VirtualWithDefaultImpl() &lt;&lt; std::endl;\n    obj-&gt;PureVirtual(0);\n}\n</code></pre>\n\n<p>The python wrapper:</p>\n\n<pre><code>class MyClassWrap : public MyClass, wrapper&lt;MyClass&gt;\n{\npublic:\n    MyClassWrap(PyObject* self) : m_self(self)\n    {\n        Py_INCREF(self);\n    }\n    MyClassWrap(PyObject* self, const MyClass&amp; other) : MyClass(other), m_self(self)\n    {\n        Py_INCREF(self);\n    }\n    ~MyClassWrap()\n    {\n        Py_DECREF(m_self);\n    }\n    virtual void PureVirtual(int i)\n    {\n        this-&gt;get_override(\"PureVirtual\")(i);\n    }\n    virtual const char* VirtualWithDefaultImpl()\n    {\n        if (override f = this-&gt;get_override(\"VirtualWithDefaultImpl\"))\n            return f();\n        return MyClass::VirtualWithDefaultImpl();\n    }\n    const char* DefaultVirtualWithDefaultImpl()\n    {\n        return this-&gt;MyClass::VirtualWithDefaultImpl();\n    }\nprivate:\n    PyObject* m_self;\n};\n\nBOOST_PYTHON_MODULE(MyModule)\n{\n    // First approach:\n    // Fails in compilation with error C2243: 'type cast' : conversion from\n    // 'MyClassWrap *' to 'boost::python::wrapper&lt;T&gt; *' exists, but is inaccessible\n    //class_&lt;MyClassWrap, boost::shared_ptr&lt;MyClassWrap&gt;, boost::noncopyable&gt;(\"MyClass\")\n\n    // Second approach:\n    // Doesn't see the overrides at runtime\n    class_&lt;MyClass, boost::shared_ptr&lt;MyClassWrap&gt;, boost::noncopyable&gt;(\"MyClass\")\n        .def(\"PureVirtual\", pure_virtual(&amp;MyClass::PureVirtual), args(\"i\"))\n        .def(\"VirtualWithDefaultImpl\", &amp;MyClass::VirtualWithDefaultImpl,\n            &amp;MyClassWrap::DefaultVirtualWithDefaultImpl);\n    def(\"MyFnc\", &amp;MyFnc, args(\"obj\"));\n}\n</code></pre>\n\n<p>The Python code:</p>\n\n<pre><code>class PythonDerived(MyModule.MyClass):\n    def PureVirtual(self, i):\n        print i\n\n    def VirtualWithDefaultImpl(self):\n        return 'PythonDerived'\n\nMyModule.MyFnc(PythonDerived())\n</code></pre>\n\n<p>Output of the second approach run. As you can see the functions of MyClass are called instead of the PythonDerived functions:</p>\n\n<pre><code>MyClass\n\nFile \"z:\\tmp\\tmp.py\", line 11, in &lt;module&gt;\n  MyModule.MyFnc(PythonDerived())\n\nTypeError: 'NoneType' object is not callable\n</code></pre>\n"}, {"tags": ["c++", "namespaces", "operator-overloading", "clang", "argument-dependent-lookup"], "comments": [{"owner": {"reputation": 809, "user_id": 3973558, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7a0f190f8b6b443b9ecbc21541ce5e1?s=128&d=identicon&r=PG&f=1", "display_name": "xcvr", "link": "https://stackoverflow.com/users/3973558/xcvr"}, "edited": false, "score": 0, "creation_date": 1434563248, "post_id": 30898602, "comment_id": 49836576, "body": "From that error, it looks like it is being found by ADL. Not sure what it&#39;s complaining about though"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1434567198, "post_id": 30898602, "comment_id": 49838928, "body": "Note that your test program has undefined behaviour, since <code>x</code> is not initialized."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1434568274, "post_id": 30898602, "comment_id": 49839604, "body": "@KerrekSB You <i>are</i> reproducing because you&#39;re using gcc while can compile this. <a href=\"http://coliru.stacked-crooked.com/a/bd4cfc7eb1cc02d7\" rel=\"nofollow noreferrer\">Clang cannot</a>."}], "answers": [{"comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1434565245, "post_id": 30898911, "comment_id": 49837728, "body": "I don&#39;t think that problem should be a concern until instantiation. For example, if you <a href=\"http://coliru.stacked-crooked.com/a/a361da7a886c1a26\" rel=\"nofollow noreferrer\">remove one of the overloads</a> clang won&#39;t complain."}, {"owner": {"reputation": 809, "user_id": 3973558, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7a0f190f8b6b443b9ecbc21541ce5e1?s=128&d=identicon&r=PG&f=1", "display_name": "xcvr", "link": "https://stackoverflow.com/users/3973558/xcvr"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1434566142, "post_id": 30898911, "comment_id": 49838259, "body": "@0x499602D2 True. Something odd is happening here. If you leave in the other addition, <a href=\"http://coliru.stacked-crooked.com/a/c3dd251ee27581b3\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/c3dd251ee27581b3</a>, you still get that error popping up."}, {"owner": {"reputation": 809, "user_id": 3973558, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7a0f190f8b6b443b9ecbc21541ce5e1?s=128&d=identicon&r=PG&f=1", "display_name": "xcvr", "link": "https://stackoverflow.com/users/3973558/xcvr"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1434567566, "post_id": 30898911, "comment_id": 49839158, "body": "The error messages (both the original, and the coliru ones), indicate that it is instantiating the functions with <code>T = double</code> in those instances where it fails to compile. <code>in instantiation of function template specialization &#39;N::operator+&lt;double&gt;&#39; requested here</code>"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1434568119, "post_id": 30898911, "comment_id": 49839503, "body": "Yes, I think clang is inadvertantly instantiating the candidates while performing overload resolution."}, {"owner": {"reputation": 226, "user_id": 1029366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38c3d4133b9dd85046c1225626f4af2?s=128&d=identicon&r=PG", "display_name": "dats", "link": "https://stackoverflow.com/users/1029366/dats"}, "edited": false, "score": 0, "creation_date": 1434640705, "post_id": 30898911, "comment_id": 49875953, "body": "According to the answer by T.C I don&#39;t think enable_if will solve the problem in clang."}, {"owner": {"reputation": 809, "user_id": 3973558, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7a0f190f8b6b443b9ecbc21541ce5e1?s=128&d=identicon&r=PG&f=1", "display_name": "xcvr", "link": "https://stackoverflow.com/users/3973558/xcvr"}, "reply_to_user": {"reputation": 226, "user_id": 1029366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38c3d4133b9dd85046c1225626f4af2?s=128&d=identicon&r=PG", "display_name": "dats", "link": "https://stackoverflow.com/users/1029366/dats"}, "edited": false, "score": 0, "creation_date": 1434653499, "post_id": 30898911, "comment_id": 49883649, "body": "@dats It definitely fixes the problem. <a href=\"http://coliru.stacked-crooked.com/a/f82b2eeed3600729\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/f82b2eeed3600729</a>"}], "tags": [], "owner": {"reputation": 809, "user_id": 3973558, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7a0f190f8b6b443b9ecbc21541ce5e1?s=128&d=identicon&r=PG&f=1", "display_name": "xcvr", "link": "https://stackoverflow.com/users/3973558/xcvr"}, "is_accepted": false, "score": 3, "last_activity_date": 1434654499, "last_edit_date": 1434654499, "creation_date": 1434563820, "answer_id": 30898911, "question_id": 30898602, "link": "https://stackoverflow.com/questions/30898602/c-operator-overloading-and-associated-namespace/30898911#30898911", "title": "C++ operator overloading and associated namespace", "body": "<p>It might be complaining because <code>T</code> <em>might</em> not be a class in that definition. And you are not allowed to redefine the standard <code>operator+</code> for arithmetic types IIRC. In your example, there's nothing restricting <code>T</code> to be <code>N::A</code> for instance.</p>\n\n<p>Adding <code>typename = std::enable_if_t&lt;std::is_class&lt;T&gt;{} || std::is_enum&lt;T&gt;{}&gt;</code> seems to fix it. Visual Studio and GCC might be a bit more lax/lazy about this restriction.</p>\n\n<pre><code>namespace N\n{\n    struct A {};\n\n    template &lt;typename T, typename = std::enable_if_t&lt;std::is_class&lt;T&gt;{} || std::is_enum&lt;T&gt;{}&gt;&gt;\n    double operator+ (T a, double d) {return d;}\n\n    template &lt;typename T, typename = std::enable_if_t&lt;std::is_class&lt;T&gt;{} || std::is_enum&lt;T&gt;{}&gt;&gt;\n    double operator+ (double d, T a) {return d;}\n}\n\n void test()\n {\n    N::A a;\n    double x;\n\n    double y = a + x;\n    double z = x + a;\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1434573899, "post_id": 30900449, "comment_id": 49842997, "body": "Why would <code>operator+(double, double)</code> be deduced at all in the OP&#39;s situation?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1434574072, "post_id": 30900449, "comment_id": 49843101, "body": "@KerrekSB Given <code>template &lt;typename T&gt; double operator+ (T, double); double x; N::A a;</code> and <code>x + a</code>, <code>T</code> is deduced from the lhs, i.e., <code>double</code>. Of course there&#39;s no conversion from <code>N::A</code> to <code>double</code> for the rhs, but template argument deduction doesn&#39;t care; that&#39;s left for overload resolution."}, {"owner": {"reputation": 809, "user_id": 3973558, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7a0f190f8b6b443b9ecbc21541ce5e1?s=128&d=identicon&r=PG&f=1", "display_name": "xcvr", "link": "https://stackoverflow.com/users/3973558/xcvr"}, "edited": false, "score": 0, "creation_date": 1434592079, "post_id": 30900449, "comment_id": 49848741, "body": "Interesting hole in the standard. Thanks for the explanation. I guess clang was right, and GCC/VC will be right."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1434620353, "post_id": 30900449, "comment_id": 49860898, "body": "@T.C.: Oh, of course -- I was thinking of the other function. Yes, makes sense. This should have been a SFINAE context but isn&#39;t. I imagine the CWG issue will be a DR against 11 -- nobody will want this kind of behaviour to depend on the language version."}, {"owner": {"reputation": 226, "user_id": 1029366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38c3d4133b9dd85046c1225626f4af2?s=128&d=identicon&r=PG", "display_name": "dats", "link": "https://stackoverflow.com/users/1029366/dats"}, "edited": false, "score": 0, "creation_date": 1434640925, "post_id": 30900449, "comment_id": 49876124, "body": "Thanks for the explanation. According to this answer, I only have two alternatives: a) provide an overloaded operator for each class in namespace N, or b) use CRTP in all classes in namespace N and then define the operators in terms of the common base class. Am I right?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 226, "user_id": 1029366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38c3d4133b9dd85046c1225626f4af2?s=128&d=identicon&r=PG", "display_name": "dats", "link": "https://stackoverflow.com/users/1029366/dats"}, "edited": false, "score": 0, "creation_date": 1434644627, "post_id": 30900449, "comment_id": 49878547, "body": "@dats No, the <code>enable_if</code> in the other answer is fine. It causes a deduction failure when <code>T</code> is deduced as <code>double</code>, so the substitution (to form the ill-formed <code>operator+(double, double)</code>) doesn&#39;t take place."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 5, "last_activity_date": 1434594570, "last_edit_date": 1434594570, "creation_date": 1434568593, "answer_id": 30900449, "question_id": 30898602, "link": "https://stackoverflow.com/questions/30898602/c-operator-overloading-and-associated-namespace/30900449#30900449", "title": "C++ operator overloading and associated namespace", "body": "<p>This is caused by two different CWG issues: <a href=\"http://wg21.link/cwg2052\" rel=\"nofollow\">CWG issue 2052</a> and <a href=\"http://wg21.link/cwg1391\" rel=\"nofollow\">CWG issue 1391</a>.</p>\n\n<p>First, CWG 1391. On encountering <code>x + a</code>, the usual name lookup finds, among other overloads, </p>\n\n<pre><code>template &lt;typename T&gt; double operator+ (T, double);\n</code></pre>\n\n<p>Template argument deduction is performed by match <code>T</code> to the type of the lhs of <code>+</code>, which is <code>double</code>, so this deduces <code>T</code> to be <code>double</code>. The second parameter's type contains no template parameter, so is not considered under current rules. To be sure, <code>N::A</code> can't be converted to a <code>double</code>, so the resulting specialization is not viable, but the current rules say that template argument deduction doesn't care about this; that will be handled in overload resolution.</p>\n\n<p>The proposed resolution to CWG 1391, among other things, adds a new paragraph to the standard:</p>\n\n<blockquote>\n  <p>If deduction succeeds for all parameters that contain\n  template-parameters that participate in template argument deduction,\n  and all template arguments are explicitly specified, deduced, or\n  obtained from default template arguments, remaining parameters are\n  then compared with the corresponding arguments. For each remaining\n  parameter <code>P</code> with a type that was non-dependent before substitution of\n  any explicitly-specified template arguments, if the corresponding\n  argument A cannot be implicitly converted to <code>P</code>, deduction fails.\n  [<em>Note</em>: Parameters with dependent types in which no template-parameters\n  participate in template argument deduction, and parameters that became\n  non-dependent due to substitution of explicitly-specified template\n  arguments, will be checked during overload resolution. \u2014<em>end note</em>]</p>\n</blockquote>\n\n<p>In other words, if an argument (<code>a</code> in our case) corresponding to a non-dependent parameter (<code>double</code>) cannot be converted to the parameter's type, deduction would simply fail. So in our case, post-CWG1391 template argument deduction will fail for this overload, and everything would be well.</p>\n\n<p>Clang implements the current rules, however, so deduction succeeds with <code>T = double</code>, substitution occurs, and we encounter CWG 2052. Quoting the writeup from Richard Smith (a Clang dev):</p>\n\n<blockquote>\n  <p>In an example like</p>\n\n<pre><code>  struct A { operator int(); };\n  template&lt;typename T&gt; T operator&lt;&lt;(T, int);\n  void f(A a) { 1 &lt;&lt; a; }\n</code></pre>\n  \n  <p>Template argument deduction succeeds for the operator template,\n  producing the signature <code>operator&lt;&lt;(int,int)</code>. The resulting\n  declaration is synthesized and added to the overload set, per 14.8.3\n  [temp.over] paragraph 1. However, this violates the requirement of\n  13.5 [over.oper] paragraph 6,</p>\n  \n  <blockquote>\n    <p>An operator function shall either be a non-static member function or\n    be a non-member function that has at least one parameter whose type is\n    a class, a reference to a class, an enumeration, or a reference to an\n    enumeration.</p>\n  </blockquote>\n  \n  <p>This is not a SFINAE context, so the program is ill-formed, rather\n  than selecting the built-in operator.</p>\n</blockquote>\n\n<p>In this case, there's no conversion, so the deduced <code>operator+(double, double)</code> is actually not viable, but non-viable candidates are not eliminated until you have built the candidate set, and here building the candidate set is causing a hard error.</p>\n\n<p>The proposed resolution to CWG 2052 will make this case SFINAE instead - also making the original code work. The problem is - Clang is implementing the current version of the standard here, too.</p>\n"}], "owner": {"reputation": 226, "user_id": 1029366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38c3d4133b9dd85046c1225626f4af2?s=128&d=identicon&r=PG", "display_name": "dats", "link": "https://stackoverflow.com/users/1029366/dats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 1, "accepted_answer_id": 30900449, "answer_count": 2, "score": 5, "last_activity_date": 1481769850, "creation_date": 1434562752, "last_edit_date": 1481769850, "question_id": 30898602, "link": "https://stackoverflow.com/questions/30898602/c-operator-overloading-and-associated-namespace", "title": "C++ operator overloading and associated namespace", "body": "<p>The following simplified example compiles in <code>gcc</code> and <code>Visual Studio</code>, but fails in <code>clang</code> !?</p>\n\n<pre><code>namespace N\n{\n    struct A {};\n\n    template &lt;typename T&gt;\n    double operator+ (T a, double d) {return d;}\n\n    template &lt;typename T&gt;\n    double operator+ (double d, T a) {return d;}\n}\n\nvoid test()\n{\n    N::A a;\n    double x;\n\n    double y = a + x;\n    double z = x + a;\n}\n</code></pre>\n\n<p>As I see it, the templated <code>operator+</code> in namespace <code>N</code> should be found by ADL.</p>\n\n<p>Why does <code>clang</code> disagree ? Is it a bug in <code>clang</code> or in the other compilers ?</p>\n\n<p>Here is the compilation error from clang 3.5.1 (tested on coliru), I don't understand what is the problem here...</p>\n\n<pre><code>10 : error: overloaded 'operator+' must have at least one parameter of class or enumeration type\ndouble operator+ (double d, T a) {return d;}\n^\n18 : note: in instantiation of function template specialization 'N::operator+' requested here\ndouble y = a + x;\n^\n\n7 : error: overloaded 'operator+' must have at least one parameter of class or enumeration type\ndouble operator+ (T a, double d) {return d;}\n^\n19 : note: in instantiation of function template specialization 'N::operator+' requested here\ndouble z = x + a;\n^\n\n2 errors generated.\nCompilation failed\n</code></pre>\n\n<p>The example is simplified from real life code, of course. The intention is that any class defined inside namespace N has an overloaded operator+ with a double.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1434562773, "post_id": 30898575, "comment_id": 49836259, "body": "<i>like other built-in functions</i> which ones are you referring to?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 5, "creation_date": 1434562784, "post_id": 30898575, "comment_id": 49836266, "body": "I don&#39;t believe it was intended for the public to use."}, {"owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1434562832, "post_id": 30898575, "comment_id": 49836296, "body": "@Borgleader like sort() ,qsort()  ,swap( ) etc"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 6, "creation_date": 1434562916, "post_id": 30898575, "comment_id": 49836363, "body": "@JerryGoyal all those are standard library functions (as in, they are required to be there by the C++ standard), __gcd is gcc specific and therefore not portable. <a href=\"http://stackoverflow.com/questions/13443463/built-in-functions-in-c\">Related question</a>"}], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 15, "last_activity_date": 1434563050, "creation_date": 1434563050, "answer_id": 30898713, "question_id": 30898575, "link": "https://stackoverflow.com/questions/30898575/inbuilt-gcda-b-function-in-c/30898713#30898713", "title": "Inbuilt __gcd(A,B) function in C++", "body": "<p>Names starting with two underscores are reserved for the implementation, which means that you are not allowed to define such names in your code, and there are no standard guarantees what those names mean if they do exist. However, a vendor might choose to document some such names, in which case you can use them with the product for which the vendor documents them.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 13472206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be921b186fe3d0f7aaee8925953b3932?s=128&d=identicon&r=PG&f=1", "display_name": "Kuji", "link": "https://stackoverflow.com/users/13472206/kuji"}, "is_accepted": false, "score": 4, "last_activity_date": 1589013579, "last_edit_date": 1589013579, "creation_date": 1589011671, "answer_id": 61693639, "question_id": 30898575, "link": "https://stackoverflow.com/questions/30898575/inbuilt-gcda-b-function-in-c/61693639#61693639", "title": "Inbuilt __gcd(A,B) function in C++", "body": "<p>In C++17 there are standard library functions for GCD and LCM.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;numeric&gt;\n\nint main ()\n{\n    int a, b;\n    std::cin &gt;&gt; a &gt;&gt; b;\n    std::cout &lt;&lt; std::gcd(a,b) &lt;&lt; '\\n';\n    return (0);\n}\n</code></pre>\n"}], "owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16344, "favorite_count": 4, "accepted_answer_id": 30898713, "answer_count": 2, "score": 13, "last_activity_date": 1589013579, "creation_date": 1434562671, "last_edit_date": 1486805523, "question_id": 30898575, "link": "https://stackoverflow.com/questions/30898575/inbuilt-gcda-b-function-in-c", "title": "Inbuilt __gcd(A,B) function in C++", "body": "<p>recently I get to know about a special function in c++ :  <code>__gcd(A,B)</code>. this will return the greatest common divisor of A and B.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;algorithm&gt;\nusing namespace std;\n\nmain()\n{\ncout&lt;&lt;__gcd(10,40); //op: 10\n}\n</code></pre>\n\n<p>is there any special reason for starting function definition with 2 underscores?</p>\n\n<p>It could be as simple as <code>gcd(A,B)</code> like other STL functions.</p>\n"}, {"tags": ["c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1434562666, "post_id": 30898529, "comment_id": 49836189, "body": "You cannot compile &quot;Hello world&quot;? Something wrong with your installation maybe."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434562705, "post_id": 30898529, "comment_id": 49836213, "body": "Not without seeing your actual code. It would seem you have a bug in your code, where it is trying to assign an <code>ExportFactory&lt;StreamReader&gt;</code> to a <code>ExportFactory&lt;TextWriter&gt;</code>."}, {"owner": {"reputation": 6371, "user_id": 1136542, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/80b89bdb29a138d1b2908b4a89500f29?s=128&d=identicon&r=PG", "display_name": "Eleeist", "link": "https://stackoverflow.com/users/1136542/eleeist"}, "edited": false, "score": 0, "creation_date": 1434562814, "post_id": 30898529, "comment_id": 49836279, "body": "No, really simplest C program possible. ANY program for that matter. I also suspect some installation problem, but this is fresh install on fresh system..."}, {"owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "edited": false, "score": 1, "creation_date": 1434562814, "post_id": 30898529, "comment_id": 49836280, "body": "It looks like Visual Studio is <i>encountering</i> an error, not informing you of an error in your code. Try repairing the installation or finding another version."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1434579991, "post_id": 30898529, "comment_id": 49845796, "body": "Will it compile the Release configuration?"}, {"owner": {"reputation": 1463, "user_id": 558098, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/52d445b3234e100bc93c9accfce29d98?s=128&d=identicon&r=PG", "display_name": "NN_", "link": "https://stackoverflow.com/users/558098/nn"}, "edited": false, "score": 0, "creation_date": 1435605981, "post_id": 30898529, "comment_id": 50260254, "body": "Started happening after installing windows updates."}], "owner": {"reputation": 6371, "user_id": 1136542, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/80b89bdb29a138d1b2908b4a89500f29?s=128&d=identicon&r=PG", "display_name": "Eleeist", "link": "https://stackoverflow.com/users/1136542/eleeist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1434562742, "creation_date": 1434562513, "last_edit_date": 1434562742, "question_id": 30898529, "link": "https://stackoverflow.com/questions/30898529/cannot-build-c-projects-object-of-type-x-cannot-be-converted-to-type-y", "title": "Cannot build C++ projects - &quot;Object of type X cannot be converted to type Y&quot;", "body": "<p>This is freshly installed Visual Studio 2015 RC on fresh Windows 8.1 install.</p>\n\n<p>When I try to compile anything, even simplest C program, I get the following build error:</p>\n\n<pre><code>1&gt;------ Build started: Project: Project1, Configuration: Debug Win32 ------\n1&gt;Object of type 'System.ComponentModel.Composition.ExportFactory`1[System.IO.StreamReader]' cannot be converted to type 'System.ComponentModel.Composition.ExportFactory`1[System.IO.TextWriter]'.\n1&gt;Error: Object of type 'System.ComponentModel.Composition.ExportFactory`1[System.IO.StreamReader]' cannot be converted to type 'System.ComponentModel.Composition.ExportFactory`1[System.IO.TextWriter]'.\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>Any ideas what's the problem here?</p>\n\n<p>EDIT: Sample code:</p>\n\n<pre><code>int main(int argc, char** argv) {\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "terminal"], "comments": [{"owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 0, "creation_date": 1434562581, "post_id": 30898525, "comment_id": 49836134, "body": "Use an <code>if</code> statement. You seem to already know how to do that."}, {"owner": {"reputation": 55, "user_id": 5020796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c383dfdcc69c84595fa70c0b21ff0314?s=128&d=identicon&r=PG&f=1", "display_name": "furiousjelly", "link": "https://stackoverflow.com/users/5020796/furiousjelly"}, "reply_to_user": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 0, "creation_date": 1434562722, "post_id": 30898525, "comment_id": 49836225, "body": "How would I use an <code>if</code> statement to end the program?"}, {"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1434569585, "post_id": 30898525, "comment_id": 49840407, "body": "<code>exit()</code>? <code>abort()</code>?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1434575995, "post_id": 30898525, "comment_id": 49844091, "body": "Consider showing this to <a href=\"http://codereview.stackexchange.com/\">codereview</a> once it works as intended, Its not good to mix code and data. Consider putting the text in a file and a program that does the functionality. Use the <code>switch</code> statement instead of <code>if</code>-<code>else</code>-chains. You do not need different variables for the events. You do not check if you read the input correctly or the user put in a string."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5020796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c383dfdcc69c84595fa70c0b21ff0314?s=128&d=identicon&r=PG&f=1", "display_name": "furiousjelly", "link": "https://stackoverflow.com/users/5020796/furiousjelly"}, "edited": false, "score": 0, "creation_date": 1434563631, "post_id": 30898665, "comment_id": 49836802, "body": "Would I use a <code>break</code> statement to skip the other outputs?"}, {"owner": {"reputation": 101, "user_id": 3857917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba03aa8144f64dd19c3d566950ac1195?s=128&d=identicon&r=PG&f=1", "display_name": "Devang Jayachandran", "link": "https://stackoverflow.com/users/3857917/devang-jayachandran"}, "reply_to_user": {"reputation": 55, "user_id": 5020796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c383dfdcc69c84595fa70c0b21ff0314?s=128&d=identicon&r=PG&f=1", "display_name": "furiousjelly", "link": "https://stackoverflow.com/users/5020796/furiousjelly"}, "edited": false, "score": 0, "creation_date": 1434567202, "post_id": 30898665, "comment_id": 49838930, "body": "@furiousjelly no. Use exit statement"}], "tags": [], "owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "is_accepted": false, "score": 0, "last_activity_date": 1434562908, "creation_date": 1434562908, "answer_id": 30898665, "question_id": 30898525, "link": "https://stackoverflow.com/questions/30898525/how-do-i-make-a-condition-that-will-end-the-program-and-prevent-further-cout-st/30898665#30898665", "title": "How do i make a condition that will end the program, and prevent further cout statements?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main() \n{\n    string userName;\n    //int choice1;\n    //int choice2;\n    //int choice3;\n    int event1;\n    int event2;\n    int event3;\n    int event4;\n    int event5;\n\n    int gameOver = 0;\n\n    cout &lt;&lt; \"What is your name, traveler?\" &lt;&lt; endl;\n    cin &gt;&gt; userName;\n\n    cout &lt;&lt; \"\\nWelcome, \" &lt;&lt; userName &lt;&lt; \".\" &lt;&lt; endl;\n    cout &lt;&lt; \"I'm going to ask you a series of questions.\" &lt;&lt; endl;\n    cout &lt;&lt; \"To cotinue your adventure, answer them by typing\" &lt;&lt; endl;\n    cout &lt;&lt; \"either 1, 2, or 3.\" &lt;&lt; endl;\n\n    cout &lt;&lt; \"\\nYou're walking down a long dirt road. You hear footsteps behind you,\" &lt;&lt; endl;\n    cout &lt;&lt; \"but you're too afraid to look right now. A fork in the road lies infront of you.\" &lt;&lt; endl;\n\n    cout &lt;&lt; \"\\nWhat do you do?\" &lt;&lt; endl;\n    cout &lt;&lt; \"1 - Turn left, and run down the hill.\" &lt;&lt; endl;\n    cout &lt;&lt; \"2 - Turn right, and run towards the abandoned house in the distance.\" &lt;&lt; endl;\n    cout &lt;&lt; \"3 - Gain the courage to turn around and face whatever is behind you.\" &lt;&lt; endl;\n    cin &gt;&gt; event1;\n    if(event1 == 1)\n    {\n        cout &lt;&lt; \"Unfortunatley, you trip over a branch, and fall to your death.\\n\" &lt;&lt; endl;\n        gameOver = 1;\n    }\n    else if(event1 == 2)\n    {\n        cout &lt;&lt; \"You run towards the house, and escape the creature following you.\" &lt;&lt; endl;\n    }\n    else if(event1 == 3)\n    {\n        cout &lt;&lt; \"You turn around, but before you can make out the features of the creature behind you, it kills you.\\n\" &lt;&lt; endl;\n        gameOver = 1;\n    }   \n\n    if (!gameOver)\n    {\n        cout &lt;&lt; \"As you get closer to the house, you notice a light is on upstairs.\" &lt;&lt; endl;\n        cout &lt;&lt; \"A small path leads to the back of the house.\\n\" &lt;&lt; endl;\n        cout &lt;&lt; \"What do you do?\" &lt;&lt; endl;\n        cout &lt;&lt; \"1 - Knock on the door, and hope whoever is inside won't kill you.\" &lt;&lt; endl;\n        cout &lt;&lt; \"2 - Enter the hoouse unanounced, and sneak upstairs.\" &lt;&lt; endl;\n        cout &lt;&lt; \"3 - Follow the path to the back of the house.\" &lt;&lt; endl;\n        cin &gt;&gt; event2;\n        if(event2 == 1)\n        {\n            cout &lt;&lt; \"A drunk, confused man answers the door, shotgun in hand.\" &lt;&lt; endl;\n            cout &lt;&lt; \"You raise your hands in defense, but before you can explain yourself, he shoots.\" &lt;&lt; endl;\n            gameOver = 1;\n        }\n        else if(event2 == 2)\n        {\n            cout &lt;&lt; \"You slowly open the door, and quietly sneak upstairs.\" &lt;&lt; endl;\n        }\n        else if(event2 == 3)\n        {\n            cout &lt;&lt; \"You sneak around the house, and become face to face with a vicious gaurd dog.\" &lt;&lt; endl;\n            cout &lt;&lt; \"Before you can give it a Scooby-Snac, it bits your throat, and kills you.\" &lt;&lt; endl;\n            gameOver = 1;\n        }\n\n        if (!gameOver)\n        {\n            cout &lt;&lt; \"You see three doorways, one leads to a dimly lit room, the second to a brightly lit room, and the third to a pitch black room.\" &lt;&lt; endl;\n            cout &lt;&lt; \"\\nWhat do you do?\" &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n\n<p>Basically just store whether the game is over or not in <code>gameOver</code>. Instead of calling <code>gameOver()</code>, just set this new <code>gameOver</code> variable to <code>1</code> (which means <code>true</code>). Then, later, you can check whether the game is over or not and skip everything else if it is.</p>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 3857917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba03aa8144f64dd19c3d566950ac1195?s=128&d=identicon&r=PG&f=1", "display_name": "Devang Jayachandran", "link": "https://stackoverflow.com/users/3857917/devang-jayachandran"}, "edited": false, "score": 0, "creation_date": 1434567106, "post_id": 30899952, "comment_id": 49838871, "body": "Also since I&#39;m a grammar nazi. You misspelled house and scooby snack . Sorry"}, {"owner": {"reputation": 55, "user_id": 5020796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c383dfdcc69c84595fa70c0b21ff0314?s=128&d=identicon&r=PG&f=1", "display_name": "furiousjelly", "link": "https://stackoverflow.com/users/5020796/furiousjelly"}, "edited": false, "score": 0, "creation_date": 1434593772, "post_id": 30899952, "comment_id": 49849153, "body": "I know, I started this late last night after a full day of working. I&#39;ll be sure to fix those!"}, {"owner": {"reputation": 101, "user_id": 3857917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba03aa8144f64dd19c3d566950ac1195?s=128&d=identicon&r=PG&f=1", "display_name": "Devang Jayachandran", "link": "https://stackoverflow.com/users/3857917/devang-jayachandran"}, "reply_to_user": {"reputation": 55, "user_id": 5020796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c383dfdcc69c84595fa70c0b21ff0314?s=128&d=identicon&r=PG&f=1", "display_name": "furiousjelly", "link": "https://stackoverflow.com/users/5020796/furiousjelly"}, "edited": false, "score": 0, "creation_date": 1434631352, "post_id": 30899952, "comment_id": 49868446, "body": "Lol! Sorry about that. Be sure to upload it on code review for others to see too later on"}], "tags": [], "owner": {"reputation": 101, "user_id": 3857917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba03aa8144f64dd19c3d566950ac1195?s=128&d=identicon&r=PG&f=1", "display_name": "Devang Jayachandran", "link": "https://stackoverflow.com/users/3857917/devang-jayachandran"}, "is_accepted": true, "score": 0, "last_activity_date": 1434575029, "last_edit_date": 1434575029, "creation_date": 1434566948, "answer_id": 30899952, "question_id": 30898525, "link": "https://stackoverflow.com/questions/30898525/how-do-i-make-a-condition-that-will-end-the-program-and-prevent-further-cout-st/30899952#30899952", "title": "How do i make a condition that will end the program, and prevent further cout statements?", "body": "<p>I would suggest you use <code>switch</code> <code>case</code> for the conditions and a <code>while</code> loop for the enter 1,2,3 thing.. Something like</p>\n\n<pre><code>bool running=true;\nwhile(running)\n{ \n    running = false;\n    switch(i)\n    { \n        case 1: stuff; break;\n        case 2: stuff; break;\n        case 3: stuff; break;\n        default: cout&lt;&lt;\"enter 1,2,3\"; running = true;\n    }\n}\n</code></pre>\n\n<p>For the endgame thing make the endgame function lime this</p>\n\n<pre><code>void endgame()\n{\n    cout&lt;&lt;\"game over\";\n    system(\"PAUSE\");\n    exit(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5020796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c383dfdcc69c84595fa70c0b21ff0314?s=128&d=identicon&r=PG&f=1", "display_name": "furiousjelly", "link": "https://stackoverflow.com/users/5020796/furiousjelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 30899952, "answer_count": 2, "score": 1, "last_activity_date": 1434575029, "creation_date": 1434562495, "last_edit_date": 1434574319, "question_id": 30898525, "link": "https://stackoverflow.com/questions/30898525/how-do-i-make-a-condition-that-will-end-the-program-and-prevent-further-cout-st", "title": "How do i make a condition that will end the program, and prevent further cout statements?", "body": "<p>I'm currently making a text-based game just for kicks, which gives the user three options to choose from. One of the options allows the user to continue, while the others end the game with a \"GAME OVER\" text. I thought that making an endGame() function would do the trick, but the terminal still outputs the rest of the cout statements. How can I make the endGame() function end the program? \n(The program isn't finished yet, I still plan on adding a lot of features. I just can't continue until I solve this.)</p>\n\n<p>Also, is there a way I can confirm that the user inputs either 1, 2, or 3 for each question and return \"Enter 1, 2 or 3!\" for wrong answers, without having to code it into each question?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nvoid endGame (void)\n{\n    cout &lt;&lt; \"GAME OVER\\n\";\n}\n\nint main() \n{\n    string userName;\n    //int choice1;\n    //int choice2;\n    //int choice3;\n    int event1;\n    int event2;\n    int event3;\n    int event4;\n    int event5;\n\n    cout &lt;&lt; \"What is your name, traveler?\" &lt;&lt; endl;\n    cin &gt;&gt; userName;\n\n    cout &lt;&lt; \"\\nWelcome, \" &lt;&lt; userName &lt;&lt; \".\" &lt;&lt; endl;\n    cout &lt;&lt; \"I'm going to ask you a series of questions.\" &lt;&lt; endl;\n    cout &lt;&lt; \"To cotinue your adventure, answer them by typing\" &lt;&lt; endl;\n    cout &lt;&lt; \"either 1, 2, or 3.\" &lt;&lt; endl;\n\n    cout &lt;&lt; \"\\nYou're walking down a long dirt road. You hear footsteps behind you,\" &lt;&lt; endl;\n    cout &lt;&lt; \"but you're too afraid to look right now. A fork in the road lies infront of you.\" &lt;&lt; endl;\n\n    cout &lt;&lt; \"\\nWhat do you do?\" &lt;&lt; endl;\n    cout &lt;&lt; \"1 - Turn left, and run down the hill.\" &lt;&lt; endl;\n    cout &lt;&lt; \"2 - Turn right, and run towards the abandoned house in the distance.\" &lt;&lt; endl;\n    cout &lt;&lt; \"3 - Gain the courage to turn around and face whatever is behind you.\" &lt;&lt; endl;\n    cin &gt;&gt; event1;\n    if(event1 == 1)\n    {\n        cout &lt;&lt; \"Unfortunatley, you trip over a branch, and fall to your death.\\n\" &lt;&lt; endl;\n        endGame();\n    }\n    else if(event1 == 2)\n    {\n        cout &lt;&lt; \"You run towards the house, and escape the creature following you.\" &lt;&lt; endl;\n    }\n    else if(event1 == 3)\n    {\n        cout &lt;&lt; \"You turn around, but before you can make out the features of the creature behind you, it kills you.\\n\" &lt;&lt; endl;\n        endGame();\n    }   \n\n    cout &lt;&lt; \"As you get closer to the house, you notice a light is on upstairs.\" &lt;&lt; endl;\n    cout &lt;&lt; \"A small path leads to the back of the house.\\n\" &lt;&lt; endl;\n    cout &lt;&lt; \"What do you do?\" &lt;&lt; endl;\n    cout &lt;&lt; \"1 - Knock on the door, and hope whoever is inside won't kill you.\" &lt;&lt; endl;\n    cout &lt;&lt; \"2 - Enter the hoouse unanounced, and sneak upstairs.\" &lt;&lt; endl;\n    cout &lt;&lt; \"3 - Follow the path to the back of the house.\" &lt;&lt; endl;\n    cin &gt;&gt; event2;\n    if(event2 == 1)\n    {\n        cout &lt;&lt; \"A drunk, confused man answers the door, shotgun in hand.\" &lt;&lt; endl;\n        cout &lt;&lt; \"You raise your hands in defense, but before you can explain yourself, he shoots.\" &lt;&lt; endl;\n        endGame();\n    }\n    else if(event2 == 2)\n    {\n        cout &lt;&lt; \"You slowly open the door, and quietly sneak upstairs.\" &lt;&lt; endl;\n    }\n    else if(event2 == 3)\n    {\n        cout &lt;&lt; \"You sneak around the house, and become face to face with a vicious gaurd dog.\" &lt;&lt; endl;\n        cout &lt;&lt; \"Before you can give it a Scooby-Snac, it bits your throat, and kills you.\" &lt;&lt; endl;\n        endGame();\n    }\n    cout &lt;&lt; \"You see three doorways, one leads to a dimly lit room, the second to a brightly lit room, and the third to a pitch black room.\" &lt;&lt; endl;\n    cout &lt;&lt; \"\\nWhat do you do?\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "math", "geometry", "angle"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1434562635, "post_id": 30898515, "comment_id": 49836165, "body": "<a href=\"https://en.wikipedia.org/?title=Pythagorean_theorem#Pythagorean_trigonometric_identity\" rel=\"nofollow noreferrer\">\u03a0\u03c5\u03b8\u03b1\u03b3\u03cc\u03c1\u03b1\u03c2</a>?"}, {"owner": {"reputation": 25, "user_id": 2482248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cc78e816dfa975622f462fc4fa9abe?s=128&d=identicon&r=PG", "display_name": "Zero Memory", "link": "https://stackoverflow.com/users/2482248/zero-memory"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1434562971, "post_id": 30898515, "comment_id": 49836407, "body": "<a href=\"http://i.imgur.com/2GX0MUw.png?1\" rel=\"nofollow noreferrer\">i.imgur.com/2GX0MUw.png?1</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1434563324, "post_id": 30898515, "comment_id": 49836613, "body": "Well, so what?? It&#39;s still veeery basic geometrical math, you have all the necessary functions at hand in c++ (<a href=\"http://en.cppreference.com/w/cpp/header/cmath\" rel=\"nofollow noreferrer\"><code>#include &lt;cmath&gt;</code></a>), and my link explains well, what to do. (You should note the c++ functions use radian angle values as arguments, rather than degrees)."}, {"owner": {"reputation": 25, "user_id": 2482248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cc78e816dfa975622f462fc4fa9abe?s=128&d=identicon&r=PG", "display_name": "Zero Memory", "link": "https://stackoverflow.com/users/2482248/zero-memory"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1434563450, "post_id": 30898515, "comment_id": 49836693, "body": "p1 - start point. p2 - direction point. me need direction angle from p1 to p2"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1434563451, "post_id": 30898515, "comment_id": 49836696, "body": "Please show the code you actuallly have tried, and clearly state why it fails."}, {"owner": {"reputation": 25, "user_id": 2482248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cc78e816dfa975622f462fc4fa9abe?s=128&d=identicon&r=PG", "display_name": "Zero Memory", "link": "https://stackoverflow.com/users/2482248/zero-memory"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1434563587, "post_id": 30898515, "comment_id": 49836765, "body": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6, I tried to use: <a href=\"http://stackoverflow.com/posts/30898572/edit\">stackoverflow.com/posts/30898572/edit</a> but the code returns the 0-2, but I need from 0 to 360."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1434563678, "post_id": 30898515, "comment_id": 49836824, "body": "Convert degrees to radians (2\u03c0 == 360&#176;) , and back."}, {"owner": {"reputation": 25, "user_id": 2482248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cc78e816dfa975622f462fc4fa9abe?s=128&d=identicon&r=PG", "display_name": "Zero Memory", "link": "https://stackoverflow.com/users/2482248/zero-memory"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1434564817, "post_id": 30898515, "comment_id": 49837506, "body": "How to convert it into direction(from start point to end point)? (0-360) ?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1434565454, "post_id": 30898515, "comment_id": 49837839, "body": "I just told you radian value <a href=\"https://en.wikipedia.org/wiki/Radian#Conversion_between_radians_and_degrees\" rel=\"nofollow noreferrer\">2 * \u03c0 equivalents to 360&#176; in degree</a>s, what&#39;s actually so hard about converting the one into the other and back? Do yourself a favor and buy a college primer math book dude."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 2482248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cc78e816dfa975622f462fc4fa9abe?s=128&d=identicon&r=PG", "display_name": "Zero Memory", "link": "https://stackoverflow.com/users/2482248/zero-memory"}, "edited": false, "score": 0, "creation_date": 1434562966, "post_id": 30898572, "comment_id": 49836403, "body": "<a href=\"http://i.imgur.com/2GX0MUw.png\" rel=\"nofollow noreferrer\">i.imgur.com/2GX0MUw.png</a> ??"}, {"owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "reply_to_user": {"reputation": 25, "user_id": 2482248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cc78e816dfa975622f462fc4fa9abe?s=128&d=identicon&r=PG", "display_name": "Zero Memory", "link": "https://stackoverflow.com/users/2482248/zero-memory"}, "edited": false, "score": 1, "creation_date": 1434563145, "post_id": 30898572, "comment_id": 49836506, "body": "@ZeroMemory In your image, that angle is always 90 degrees. That&#39;s the definition of a right angle."}, {"owner": {"reputation": 25, "user_id": 2482248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cc78e816dfa975622f462fc4fa9abe?s=128&d=identicon&r=PG", "display_name": "Zero Memory", "link": "https://stackoverflow.com/users/2482248/zero-memory"}, "edited": false, "score": 0, "creation_date": 1434563296, "post_id": 30898572, "comment_id": 49836597, "body": "Your function does not return 0-360."}, {"owner": {"reputation": 25, "user_id": 2482248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cc78e816dfa975622f462fc4fa9abe?s=128&d=identicon&r=PG", "display_name": "Zero Memory", "link": "https://stackoverflow.com/users/2482248/zero-memory"}, "edited": false, "score": 0, "creation_date": 1434563342, "post_id": 30898572, "comment_id": 49836630, "body": "StartXY: -4080.929199 , -5206.329102 . NextXY: -4029.881348 , -5174.799805 . EndXY: -1141.065918 , -4052.538818 . Angle12: 0.553291"}, {"owner": {"reputation": 25, "user_id": 2482248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cc78e816dfa975622f462fc4fa9abe?s=128&d=identicon&r=PG", "display_name": "Zero Memory", "link": "https://stackoverflow.com/users/2482248/zero-memory"}, "edited": false, "score": 0, "creation_date": 1434563393, "post_id": 30898572, "comment_id": 49836662, "body": "p1 - start point. p2 - direction point. me need direction angle from p1 to p2"}, {"owner": {"reputation": 25, "user_id": 2482248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cc78e816dfa975622f462fc4fa9abe?s=128&d=identicon&r=PG", "display_name": "Zero Memory", "link": "https://stackoverflow.com/users/2482248/zero-memory"}, "edited": false, "score": 0, "creation_date": 1434563767, "post_id": 30898572, "comment_id": 49836862, "body": "How to convert into angle? (0-360) ?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 25, "user_id": 2482248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cc78e816dfa975622f462fc4fa9abe?s=128&d=identicon&r=PG", "display_name": "Zero Memory", "link": "https://stackoverflow.com/users/2482248/zero-memory"}, "edited": false, "score": 0, "creation_date": 1434582275, "post_id": 30898572, "comment_id": 49846516, "body": "@ZeroMemory <a href=\"http://stackoverflow.com/questions/30898515/calculate-the-object-angleface-having-two-points#comment49837839_30898515\"><i>&quot;How to convert into angle? (0-360) ?&quot;</i></a>"}], "tags": [], "owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "is_accepted": true, "score": 2, "last_activity_date": 1434562655, "creation_date": 1434562655, "answer_id": 30898572, "question_id": 30898515, "link": "https://stackoverflow.com/questions/30898515/calculate-the-object-angleface-having-two-points/30898572#30898572", "title": "Calculate The object angle(face) having two points?", "body": "<pre><code>#include &lt;cmath&gt;\n\n// ...\ndouble angle = atan2(p2.y - p1.y, p2.x - p1.x);\n// ...\n</code></pre>\n\n<p>If you want to, you can also make sure that <code>p1 != p2</code>, because if it is then you'll get a domain error.</p>\n"}], "owner": {"reputation": 25, "user_id": 2482248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75cc78e816dfa975622f462fc4fa9abe?s=128&d=identicon&r=PG", "display_name": "Zero Memory", "link": "https://stackoverflow.com/users/2482248/zero-memory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "closed_date": 1434571112, "accepted_answer_id": 30898572, "answer_count": 1, "score": -2, "last_activity_date": 1434563402, "creation_date": 1434562471, "last_edit_date": 1592644375, "question_id": 30898515, "link": "https://stackoverflow.com/questions/30898515/calculate-the-object-angleface-having-two-points", "closed_reason": "Needs more focus", "title": "Calculate The object angle(face) having two points?", "body": "<p>C++, I want calculate the angle of the direction of the two points.</p>\n<p>Here is a picture which shows the two points and the direction of how to get the angle of the direction?</p>\n<p><img src=\"https://i.imgur.com/RrKNOyx.png?1\" alt=\"enter image description here\" /></p>\n<p>p1 - start point. p2 - direction point. me need direction angle(facing?) from p1 to p2</p>\n"}, {"tags": ["c++", "ubuntu", "singleton", "dynamic-linking", "boost-unit-test-framework"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1434616548, "post_id": 30898469, "comment_id": 49858284, "body": "Apparently the default version or mode-of-operation of ld on Fedora doesn&#39;t optimize unused objects as aggressively."}, {"owner": {"reputation": 341, "user_id": 410146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d800f59b8dca7b0b655c3bd771d6b4e?s=128&d=identicon&r=PG", "display_name": "putnampp", "link": "https://stackoverflow.com/users/410146/putnampp"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1434764613, "post_id": 30898469, "comment_id": 49932917, "body": "The thing is that lib_case.o is used. So Fedora is correct in not optimizing them out."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1434787572, "post_id": 30898469, "comment_id": 49937044, "body": "Sigh. I don&#39;t know what you&#39;re hoping to achieve. I can change my answer, but it won&#39;t help you. Fact of life: behavior of linkers and tool-chains varies <i>wildly</i> (much more wildly than this) across platforms. I have not taken the time to get to the bottom of this enough to know whether there is a bug. But, you can assume that there aren&#39;t any glaring flaws if 47 thousand packages in their repository are built using the tool chain."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1434787608, "post_id": 30898469, "comment_id": 49937052, "body": "Long story short, you either file a bug or work with it. Anyways you&#39;ll have to work with it for now."}, {"owner": {"reputation": 341, "user_id": 410146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d800f59b8dca7b0b655c3bd771d6b4e?s=128&d=identicon&r=PG", "display_name": "putnampp", "link": "https://stackoverflow.com/users/410146/putnampp"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1434805329, "post_id": 30898469, "comment_id": 49941627, "body": "The goal is to be able dynamically load unit test modules. Basically, I want to create a shared library of unit tests per feature of my software. I can then create a single binary that dynamically links with all of the shared libraries. Subsequently, I can add new unit tests for a specific feature, rebuild the feature&#39;s library, deploy it, and simply re-run the unit test binary without having to recompile the unit test binary or any other feature&#39;s unit test library. At least in theory."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1434805446, "post_id": 30898469, "comment_id": 49941658, "body": "Yup. I know all about that goal. I&#39;ve settled for &quot;oh well. Statically loaded is OK too&quot;. Although I specifically remember having it working in both Win32 and AIX using IBM&#39;s XlC++ 7/8.0 series (I stopped bothering with later projects). So ... If you are prepared to do what it takes, chances are you will succeed. (Prepare to read about non-portable attributes, linker options, explicit symbol visibility etc.)"}], "answers": [{"comments": [{"owner": {"reputation": 341, "user_id": 410146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d800f59b8dca7b0b655c3bd771d6b4e?s=128&d=identicon&r=PG", "display_name": "putnampp", "link": "https://stackoverflow.com/users/410146/putnampp"}, "edited": false, "score": 0, "creation_date": 1434724541, "post_id": 30910319, "comment_id": 49916568, "body": "Thanks for the hack. I had figured that there was a difference in the ld optimizations between the OSs. I guess I&#39;m a little confused as to why there  though. If the same program is being used by both then the outputs should, in theory, be the same. Furthermore, any difference in operation should be controlled by some configuration parameter.  I&#39;m would like to avoid using this hack because I would have to force every library (thinking ahead to a multiple library linking). Seems to defeat the purpose of being able to use the dynamic linking."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 341, "user_id": 410146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d800f59b8dca7b0b655c3bd771d6b4e?s=128&d=identicon&r=PG", "display_name": "putnampp", "link": "https://stackoverflow.com/users/410146/putnampp"}, "edited": false, "score": 0, "creation_date": 1434724640, "post_id": 30910319, "comment_id": 49916649, "body": "I&#39;m not qualified to answer that. I encourage you to find that configuration parameter (keep in mind it could be more complicated than that, but in principle I agree). I&#39;m just happy to understand what&#39;s going on."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1434616433, "creation_date": 1434616433, "answer_id": 30910319, "question_id": 30898469, "link": "https://stackoverflow.com/questions/30898469/boost-unit-test-dynamic-linking-on-ubuntu/30910319#30910319", "title": "Boost unit test dynamic linking on Ubuntu", "body": "<p>The problem is that the <code>lib_case.o</code> is optimized out, because there are no references to anything contained there.</p>\n\n<p>If all the references refer from the test case definition to the unittest framework (for self-registration) but none back, compiling and linking the test main axes the \"unused\" library.</p>\n\n<p>I could reproduce this on my system (Ubuntu 14). Here's a simple hack to show how you could fix it by forcing a reference (in this case to a global variable called <code>force_reference_this_object_file</code>.</p>\n\n<p><strong>Notes</strong> </p>\n\n<ul>\n<li>of course you would <em>normally</em> declare that global in a header file</li>\n<li>you'll find that you need to either deploy the <code>libcase.so</code> or use LD_LIBRARY_PATH to include <code>./</code> in the library path</li>\n</ul>\n\n<p>lib_case.cpp </p>\n\n<pre><code>#define BOOST_TEST_DYN_LINK\n#include &lt;boost/test/unit_test.hpp&gt;\n\nint force_reference_this_object_file = 42;\n\nBOOST_AUTO_TEST_SUITE( test_lib )\n\nBOOST_AUTO_TEST_CASE( test_lib_case ) {\n    BOOST_ASSERT(true);\n}\nBOOST_AUTO_TEST_SUITE_END()\n</code></pre>\n\n<p>test_main.cpp </p>\n\n<pre><code>#define BOOST_TEST_DYN_LINK\n#define BOOST_TEST_MAIN\n\n#include &lt;boost/test/unit_test.hpp&gt;\n\nextern int force_reference_this_object_file;\n\nnamespace {\n    struct Local\n    {\n        int&amp; ref_;\n        Local() : ref_(force_reference_this_object_file) {}\n    };\n\n    static Local hack_;\n}\n</code></pre>\n\n<p>Makefile </p>\n\n<pre><code>all: unittest unittest3\n\nCPPFLAGS=-Wall -fPIC\nLDFLAGS+=-L ~/WORK/pocpp/3rdparty/boost_1_58_0/stage/lib/\n\n%.o: %.cpp\n    g++ -c $(CPPFLAGS) $^ -o $@\n\nlibcase.so: lib_case.o\n    g++ $(CPPFLAGS) -shared -Wl,-soname,$@ -o $@ $^\n\nunittest: test_main.o | libcase.so\n    #g++ $(CPPFLAGS) -o $@ $&lt; $(LDFLAGS) -L. -lcase -lboost_unit_test_framework\n    g++ $(CPPFLAGS) -o $@ $&lt; $(LDFLAGS) ./libcase.so -lboost_unit_test_framework\n\nunittest3: test_main.o lib_case.o\n    g++ $(CPPFLAGS) -o $@ $^ $(LDFLAGS) -lboost_unit_test_framework\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1434807234, "post_id": 30954203, "comment_id": 49942116, "body": "Awesome. Let&#39;s upvote this a bit because that&#39;s one handy option not enough know about :)"}], "tags": [], "owner": {"reputation": 341, "user_id": 410146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d800f59b8dca7b0b655c3bd771d6b4e?s=128&d=identicon&r=PG", "display_name": "putnampp", "link": "https://stackoverflow.com/users/410146/putnampp"}, "is_accepted": true, "score": 8, "last_activity_date": 1434807670, "last_edit_date": 1434807670, "creation_date": 1434804509, "answer_id": 30954203, "question_id": 30898469, "link": "https://stackoverflow.com/questions/30898469/boost-unit-test-dynamic-linking-on-ubuntu/30954203#30954203", "title": "Boost unit test dynamic linking on Ubuntu", "body": "<p>Got it!</p>\n\n<p>Ubuntu seems to use the <code>--as-needed</code> linker option by default, where as Fedora may not. Turning it off will add libcase.so library to the needed list for unittest. After deploying the library (or using LD_LIBRARY_PATH) the unittest works now.</p>\n\n<pre><code>unittest: libcase.so\n        g++ -o unittest test_main.cpp -Wl,--no-as-needed -L. -lcase -lboost_unit_test_framework\n</code></pre>\n\n<p>Figures it was something simple ...</p>\n"}], "owner": {"reputation": 341, "user_id": 410146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d800f59b8dca7b0b655c3bd771d6b4e?s=128&d=identicon&r=PG", "display_name": "putnampp", "link": "https://stackoverflow.com/users/410146/putnampp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2291, "favorite_count": 1, "accepted_answer_id": 30954203, "answer_count": 2, "score": 5, "last_activity_date": 1434807670, "creation_date": 1434562294, "last_edit_date": 1495541292, "question_id": 30898469, "link": "https://stackoverflow.com/questions/30898469/boost-unit-test-dynamic-linking-on-ubuntu", "title": "Boost unit test dynamic linking on Ubuntu", "body": "<p>I am trying to build a unit test using Boost's unit test framework. I would like to dynamically link test suite libraries with the auto generated test module that Boost provides.  Here is the basic construction I've been using:</p>\n\n<p>test_main.cpp:</p>\n\n<pre><code>#define BOOST_TEST_DYN_LINK\n#define BOOST_TEST_MAIN\n\n#include &lt;boost/test/unit_test.hpp&gt;\n</code></pre>\n\n<p>lib_case.cpp:</p>\n\n<pre><code>#define BOOST_TEST_DYN_LINK\n#include &lt;boost/test/unit_test.hpp&gt;\n\n\nBOOST_AUTO_TEST_SUITE( test_lib )\n\nBOOST_AUTO_TEST_CASE( test_lib_case ) {\n    BOOST_ASSERT(true);\n}\nBOOST_AUTO_TEST_SUITE_END()\n</code></pre>\n\n<p>Makefile:</p>\n\n<pre><code>    all: unittest unittest2 unittest3\n\n    lib_case.o: lib_case.cpp\n        g++ -g -c -Wall -fPIC lib_case.cpp -o lib_case.o\n\n    libcase.so: lib_case.o\n        g++ -shared -Wl,-soname,libcase.so -o libcase.so lib_case.o\n\n    unittest: libcase.so\n        g++ -o unittest test_main.cpp -L. -lcase -lboost_unit_test_framework\n\n    unittest2: test_main.cpp lib_case.cpp\n        g++ -o unittest2 test_main.cpp lib_case.cpp -lboost_unit_test_framework\n\n    unittest3: lib_case.o\n        g++ -o unittest3 test_main.cpp lib_case.o -lboost_unit_test_framework\n</code></pre>\n\n<p>Testing on Ubuntu 14.04, all executables compile and link without error.</p>\n\n<p>'unittest' fails to execute the 'test_lib' suite claiming that the setup failed, but 'unittest2' and 'unittest3' succeed:</p>\n\n<pre><code>$./unittest\nTest setup error: test tree is empty\n$./unittest2\nRunning 1 test case...\n*** No errors detected\n$./unittest3\nRunning 1 test case...\n*** No errors detected\n</code></pre>\n\n<p>Now for the headache: All unittest* run the test suite on Fedora 20.</p>\n\n<p>In looking at the dependency lists for 'unittest', I do see that 'libcase.so' is not listed in the Ubuntu version, but is in the Fedora 20 version. I have played around with re-ordering the dependencies, using absolute paths for the SO, and changing versions of Boost (1.54 and 1.55). Nothing worked.</p>\n\n<p>Any ideas on what may preventing the 'libcase.so' from be linked on Ubuntu 14.04 but not on Fedora 20? Am I missing some magic compiler/linker flag?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Sehe's comment and answer have helped to narrow down the problem a bit more.  If I'm understanding Boost's dynamically linked UTF implementation (at least as of 1.54/55) correctly, then the framework provides a test case manager singleton.  Every test case will automagically register with the manager upon construction.</p>\n\n<p>I think the problem is that, for whatever reason, linking on Ubuntu 'optimizes out' the static global variable used for the singleton instance of the manager during the linking of the library to the binary.  In effect, it does not link the two singleton instances despite sharing the same global static variable. It treats them as two separate instances.</p>\n\n<p>I followed the steps described in <a href=\"https://stackoverflow.com/questions/8623657/multiple-instances-of-singleton-across-shared-libraries-on-linux\">Multiple instances of singleton across shared libraries on Linux</a> to inspect the library and binary files. Unlike in their case, the -rdynamic option does not solve my problem.</p>\n\n<p>I did some more testing and found this interesting. If you preload libcase.so object, unittest works on Ubuntu. Even though the libcase.so does not appear in its ldd listing. I feel like this is expected because the singleton for the manager was 'preloaded' when unittest runs it will link with it.</p>\n\n<pre><code>$ LD_PRELOAD=/absolute/path/to/libcase.so ./unittest\nRunning 1 test case ...\n</code></pre>\n\n<p>Still have no idea why Ubuntu does not want to link as expected/intended, where Fedora does. Reading <a href=\"http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html\" rel=\"nofollow noreferrer\">this tutorial</a> (specifically the 'Comparison to the Microsoft DLL' section) makes me think Ubuntu is following a Windows linking pattern.</p>\n"}, {"tags": ["c++", "qt", "sorting", "c++11"], "comments": [{"owner": {"reputation": 386, "user_id": 4013708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "bobtheboy", "link": "https://stackoverflow.com/users/4013708/bobtheboy"}, "edited": false, "score": 0, "creation_date": 1434562247, "post_id": 30898367, "comment_id": 49835938, "body": "Are you going to make struct arrays with your struct variables?"}, {"owner": {"reputation": 976, "user_id": 341129, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1c9154d9b447754b469ac8ad67445fe8?s=128&d=identicon&r=PG", "display_name": "Dalamber", "link": "https://stackoverflow.com/users/341129/dalamber"}, "reply_to_user": {"reputation": 386, "user_id": 4013708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "bobtheboy", "link": "https://stackoverflow.com/users/4013708/bobtheboy"}, "edited": false, "score": 0, "creation_date": 1434562445, "post_id": 30898367, "comment_id": 49836034, "body": "@bobtheboy I think no. I just tried to give a generic example. Actually, I have a set of classes that have interface which provides methods like &quot;int stars()&quot;, &quot;int freeRoomCount()&quot; and &quot;int parkingPlacesAvailable()&quot;. When I populate the UI List View with these classes, I should rely on &quot;std::string&quot; sorting rule."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1434562990, "post_id": 30898367, "comment_id": 49836416, "body": "Can you use std::sort?  <a href=\"http://www.cplusplus.com/reference/algorithm/sort/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/algorithm/sort</a> shows how to use a compare function, and your sorting rules string could be used there."}], "answers": [{"comments": [{"owner": {"reputation": 976, "user_id": 341129, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1c9154d9b447754b469ac8ad67445fe8?s=128&d=identicon&r=PG", "display_name": "Dalamber", "link": "https://stackoverflow.com/users/341129/dalamber"}, "edited": false, "score": 0, "creation_date": 1434565304, "post_id": 30898589, "comment_id": 49837756, "body": "Thanks a lot guys. I like this C++11 solution!"}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 2, "last_activity_date": 1434717002, "last_edit_date": 1434717002, "creation_date": 1434562720, "answer_id": 30898589, "question_id": 30898367, "link": "https://stackoverflow.com/questions/30898367/sorting-based-on-the-rules-set-by-a-string-variable/30898589#30898589", "title": "Sorting based on the rules set by a string variable", "body": "<p>You can make a map between their choice and a functor to sort by, for example</p>\n\n<pre><code>using SortFun = bool(*)(Hotel const&amp;, Hotel const&amp;);\nstd::map&lt;char, SortFun&gt; sorters {\n    {'s', [](Hotel const&amp; lhs, Hotel const&amp; rhs){ return lhs.stars &lt; rhs.stars; }},\n    {'f', [](Hotel const&amp; lhs, Hotel const&amp; rhs){ return lhs.freeRoomCount &lt; rhs.freeRoomCount; }},\n    {'p', [](Hotel const&amp; lhs, Hotel const&amp; rhs){ return lhs.parkingPlacesAvailable &lt; rhs.parkingPlacesAvailable; }}\n};\n</code></pre>\n\n<p>Then you can use it by asking the user to input the sort criteria key, and then you can lookup the correct lambda to sort by using <a href=\"http://en.cppreference.com/w/cpp/algorithm/stable_sort\" rel=\"nofollow\"><code>std::stable_sort</code></a>. For the combinations of sort criteria, e.g. <code>\"ps\"</code>, you can loop over each sort key and <code>std::stable_sort</code> consecutively in reverse order.</p>\n\n<pre><code>int main()\n{\n    using SortFun = bool(*)(Hotel const&amp;, Hotel const&amp;);\n    std::map&lt;char, SortFun&gt; sorters {\n        {'s', [](Hotel const&amp; lhs, Hotel const&amp; rhs){ return lhs.stars &lt; rhs.stars; }},\n        {'f', [](Hotel const&amp; lhs, Hotel const&amp; rhs){ return lhs.freeRoomCount &lt; rhs.freeRoomCount; }},\n        {'p', [](Hotel const&amp; lhs, Hotel const&amp; rhs){ return lhs.parkingPlacesAvailable &lt; rhs.parkingPlacesAvailable; }}\n    };\n\n    std::vector&lt;Hotel&gt; hotels {{\"foo\", 5, 4, 10},\n                               {\"bar\", 3, 8, 20},\n                               {\"baz\", 4, 5, 15},\n                               {\"fab\", 3, 6, 18}};\n\n    std::string choice;\n    std::cout &lt;&lt; \"Pick a sort criteria s, f, p: \";\n    std::cin &gt;&gt; choice;\n\n    for (auto rit = choice.rbegin(); rit != choice.rend(); ++rit)\n    {\n        auto match = sorters.find(*rit);\n        if (match != sorters.end())\n        {\n            std::stable_sort(begin(hotels), end(hotels), match-&gt;second);\n        }\n    }\n\n    for(auto const&amp; hotel : hotels)\n    {\n        std::cout &lt;&lt; \"Name: \" &lt;&lt; hotel.name &lt;&lt; \" Stars: \" &lt;&lt; hotel.stars &lt;&lt; \" Rooms: \" &lt;&lt; hotel.freeRoomCount &lt;&lt; \" Parking: \" &lt;&lt; hotel.parkingPlacesAvailable &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>The output would be (<a href=\"http://cpp.sh/2euu\" rel=\"nofollow\">working demo</a>)</p>\n\n<pre><code>Pick a sort criteria s, f, p: sf\nName: fab Stars: 3 Rooms: 6 Parking: 18\nName: bar Stars: 3 Rooms: 8 Parking: 20\nName: baz Stars: 4 Rooms: 5 Parking: 15\nName: foo Stars: 5 Rooms: 4 Parking: 10\n</code></pre>\n\n<p>To sort from highest to lowest, just switch all the <code>&lt;</code> to <code>&gt;</code> in the lambda functions.</p>\n"}, {"comments": [{"owner": {"reputation": 485, "user_id": 4079970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21ff70aa7cfec663212ade95168e3732?s=128&d=identicon&r=PG", "display_name": "Stefan Atev", "link": "https://stackoverflow.com/users/4079970/stefan-atev"}, "edited": false, "score": 1, "creation_date": 1434565277, "post_id": 30898610, "comment_id": 49837743, "body": "That&#39;s how I would do it, too. All you need is a function that has a switch based on a single character code for how to sort; you may consider doing the first sort unstable as a possible optimization (if you frequently sort by one key, or if there are a lot of repeated keys)"}], "tags": [], "owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "is_accepted": false, "score": 3, "last_activity_date": 1434562770, "creation_date": 1434562770, "answer_id": 30898610, "question_id": 30898367, "link": "https://stackoverflow.com/questions/30898367/sorting-based-on-the-rules-set-by-a-string-variable/30898610#30898610", "title": "Sorting based on the rules set by a string variable", "body": "<p>I'd use a simple parser that reads a character, applies an <code>std::stable_sort</code> with the character's associated comparison predicate and proceeds to the next character.</p>\n\n<p>The stable_sort part is really important. This means that if you sort the items by star count first, then by parking space, the order of star count will remain.</p>\n"}], "owner": {"reputation": 976, "user_id": 341129, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1c9154d9b447754b469ac8ad67445fe8?s=128&d=identicon&r=PG", "display_name": "Dalamber", "link": "https://stackoverflow.com/users/341129/dalamber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 1, "accepted_answer_id": 30898589, "answer_count": 2, "score": 2, "last_activity_date": 1434717002, "creation_date": 1434561977, "last_edit_date": 1434647194, "question_id": 30898367, "link": "https://stackoverflow.com/questions/30898367/sorting-based-on-the-rules-set-by-a-string-variable", "title": "Sorting based on the rules set by a string variable", "body": "<p>In my hypothetical app, I receive a list of hotels from the server.</p>\n\n<pre><code>struct Hotel \n{\n  std::string name;            // e.g. Hilton, Ritz\n  int stars;                   // In range [0..5], 0 stands for \"unrated\"\n  int freeRoomCount;           // Number of available rooms [0..N]\n  int parkingPlacesAvailable;  // Number of parking places availalble [0..M]\n}\nstd::vector&lt;Hotel&gt; hotels;\n</code></pre>\n\n<p>All these items are displayed in a simple List View.<br>\nI have to provide different types of sorting. The sorting rules are also dictated by the central server.</p>\n\n<p>The sorting rules are as follows:</p>\n\n<pre><code>std::string sortingRules; \n// \"s\" - sort by stars count\n// \"f\" - sort by free room count\n// \"p\" - sort by parking places available\n// The sortingRules string can be a combination of those values. E.g.:\n// \"ps\" - first goes who has the most number of parking places available, \n//        then goes hotels who has more stars\n// More combinations available:\n//  \"s\", \"sf\", \"fp\", \"pf\", \"spf\", \"\" etc. \n// (16 possible combinations, the empty string means alphabetical sorting)\n</code></pre>\n\n<p>So the question is: how to interpret this in C++? Enums and bit mask values doesn't work since they do not provide the 'order' control.</p>\n\n<p>I am curious how would the community solve this kind of task? I feel like there is an approach for solving this type of problem, that's why I don't want to go straightforward and write code like:</p>\n\n<pre><code>if (sortingRules[0] == \"s\") ...\n</code></pre>\n\n<p>I am using C++11 along with Qt 5.4. No boost.</p>\n"}, {"tags": ["c++", "exception"], "answers": [{"tags": [], "owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "is_accepted": false, "score": 2, "last_activity_date": 1434561248, "last_edit_date": 1434561248, "creation_date": 1434560885, "answer_id": 30898029, "question_id": 30898013, "link": "https://stackoverflow.com/questions/30898013/exception-catching-for-int-divided-by-0/30898029#30898029", "title": "exception catching for int divided by 0", "body": "<p>In C++, <strong>division by zero is undefined behavior</strong> - it doesn't throw an exception.</p>\n\n<p>From a recent working draft of the C++ Standard (chapter 5, <em>Expressions</em>), regarding expressions that are not mathematically defined:</p>\n\n<blockquote>\n  <p>If during the evaluation of an expression, the result is not mathematically defined or not in the range of representable values for its type, the behavior is undefined.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "is_accepted": true, "score": 11, "last_activity_date": 1434561077, "creation_date": 1434561077, "answer_id": 30898102, "question_id": 30898013, "link": "https://stackoverflow.com/questions/30898013/exception-catching-for-int-divided-by-0/30898102#30898102", "title": "exception catching for int divided by 0", "body": "<p>Any integer when divided by zero is not an exception in standard C++.</p>\n\n<p>The section 5.6 of C++ states:</p>\n\n<blockquote>\n  <p>If the second operand of / or % is zero, the behavior is undefined.</p>\n</blockquote>\n\n<p>You may also find it interesting to read this:</p>\n\n<blockquote>\n  <p>Stroustrup says, in \"The Design and Evolution of C++\" (Addison Wesley,\n  1994), \"low-level events, such as arithmetic overflows and divide by\n  zero, are assumed to be handled by a dedicated lower-level mechanism\n  rather than by exceptions. This enables C++ to match the behaviour of\n  other languages when it comes to arithmetic. It also avoids the\n  problems that occur on heavily pipelined architectures where events\n  such as divide by zero are asynchronous.\"`</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "edited": false, "score": 0, "creation_date": 1435163577, "post_id": 30898164, "comment_id": 50088689, "body": "it&#39;s better to catch en exception by <code>const&amp;</code> if you don&#39;t plan to modify it"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "reply_to_user": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "edited": false, "score": 0, "creation_date": 1435233803, "post_id": 30898164, "comment_id": 50120597, "body": "@AndyT Of course it&#39;s better, but somehow that&#39;s not what people do for exceptions most of the time. In fact, I&#39;m surprised we can catch exceptions by non-const reference at all, since exceptions aren&#39;t really lvalues"}], "tags": [], "owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "is_accepted": false, "score": 3, "last_activity_date": 1434561314, "creation_date": 1434561314, "answer_id": 30898164, "question_id": 30898013, "link": "https://stackoverflow.com/questions/30898013/exception-catching-for-int-divided-by-0/30898164#30898164", "title": "exception catching for int divided by 0", "body": "<p>For the second question:\nWe catch exceptions by reference (&amp;) because polymorphic types can only act \"polymorphically\" through a pointer or a reference. Exceptions are polymorphic types, because we can have multiple classes deriving from <code>std::exception</code> that we want to catch generically.</p>\n\n<p>Since by convention we throw exceptions by value, only references can work at the catch site.</p>\n"}, {"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 3, "creation_date": 1434564094, "post_id": 30898181, "comment_id": 49837038, "body": "this has UB. You have to throw before doing the division."}], "tags": [], "owner": {"reputation": 628, "user_id": 4970589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VKm2N.jpg?s=128&g=1", "display_name": "Anwesha", "link": "https://stackoverflow.com/users/4970589/anwesha"}, "is_accepted": false, "score": 1, "last_activity_date": 1435390670, "last_edit_date": 1435390670, "creation_date": 1434561373, "answer_id": 30898181, "question_id": 30898013, "link": "https://stackoverflow.com/questions/30898013/exception-catching-for-int-divided-by-0/30898181#30898181", "title": "exception catching for int divided by 0", "body": "<p>Division by 0 is undefined in C++, so all you can do is throw and catch an exception :-</p>\n\n<pre><code>int main()\n{\nint x=5, y=0, z=1;\ntry\n{\n    if (y==0)\n    throw y;\n    else\n    z=x/y;\n    cout&lt;&lt;z;\n}\ncatch (int)\n{\n    cout&lt;&lt;\"division by zero error\";\n}\nreturn 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2884, "user_id": 2558027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/srmnC.jpg?s=128&g=1", "display_name": "sjdowling", "link": "https://stackoverflow.com/users/2558027/sjdowling"}, "edited": false, "score": 0, "creation_date": 1434617272, "post_id": 30898218, "comment_id": 49858766, "body": "I would advise against throwing generic objects and built in types. Although C++ does allow it the conventional behaviour is to use an exception class derived from <code>std::exception</code> such as a <a href=\"http://en.cppreference.com/w/cpp/error/domain_error\" rel=\"nofollow noreferrer\"><code>std::domain_error</code></a>."}], "tags": [], "owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "is_accepted": false, "score": 2, "last_activity_date": 1434561876, "last_edit_date": 1434561876, "creation_date": 1434561495, "answer_id": 30898218, "question_id": 30898013, "link": "https://stackoverflow.com/questions/30898013/exception-catching-for-int-divided-by-0/30898218#30898218", "title": "exception catching for int divided by 0", "body": "<p>There is no exception thrown in your code, and no exception caught.</p>\n\n<p>You could throw an exception if <code>y == 0</code> and catch it in the catch block:</p>\n\n<pre><code>try\n{\n    if (y == 0) throw(string(\"Divide by zero not allowed\"));\n    int z=x/y;\n    cout&lt;&lt;\"z=\"&lt;&lt;z;\n}\ncatch (const string &amp;e)\n{\n    cout &lt;&lt; \"exception caught: \"&lt;&lt; e;\n}\n</code></pre>\n\n<p>We don't need to catch an exception by reference but it is preferred.<br></p>\n\n<p>Since we're throwing a string, we need to catch a string too.</p>\n\n<p>We could also throw a string literal and catch it:</p>\n\n<pre><code>try\n{\n    if (y == 0) throw(\"Divide by zero not allowed\");\n    int z=x/y;\n    cout&lt;&lt;\"z=\"&lt;&lt;z;\n}\ncatch (const char* e)\n{\n    cout &lt;&lt; \"exception caught: \"&lt;&lt; e;\n}\n</code></pre>\n"}], "owner": {"reputation": 2205, "user_id": 4851927, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/12dac37ac54f43197df820b2fc26fe6a?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Acharya", "link": "https://stackoverflow.com/users/4851927/ankit-acharya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 0, "accepted_answer_id": 30898102, "answer_count": 5, "score": 1, "last_activity_date": 1435390670, "creation_date": 1434560815, "last_edit_date": 1434615601, "question_id": 30898013, "link": "https://stackoverflow.com/questions/30898013/exception-catching-for-int-divided-by-0", "title": "exception catching for int divided by 0", "body": "<p>Recently i was trying a simple exception program in C++ which goes like this:-</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;exception&gt;\n#include &lt;stdexcept&gt;\nusing namespace std;\nint main()\n{\n    int x=5, y=0;\n    try\n    {\n       int z=x/y;\n       cout&lt;&lt;\"z=\"&lt;&lt;z;\n    }\n    catch (exception&amp; e)\n    {\n       cout&lt;&lt;\"exception caught: \"&lt;&lt;e.what();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Why is no exception thrown here ? What is wrong in the code ?\nAlso I would like to know why the <code>&amp;</code> is required to catch exception ?</p>\n"}, {"tags": ["c++", "qt", "vector", "segmentation-fault"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1434565797, "post_id": 30897978, "comment_id": 49838029, "body": "Think hard about why you need a vector of pointers. Not only does it increase the memory management workload, but it is rare that this is the right choice. Also consider building the string as a std::string and converting to QString once at the end."}], "answers": [{"tags": [], "owner": {"reputation": 386, "user_id": 4806529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cca45f23ad6a0f263f17c7bddea23fe5?s=128&d=identicon&r=PG", "display_name": "dazewell", "link": "https://stackoverflow.com/users/4806529/dazewell"}, "is_accepted": false, "score": 0, "last_activity_date": 1434563019, "creation_date": 1434563019, "answer_id": 30898698, "question_id": 30897978, "link": "https://stackoverflow.com/questions/30897978/segmentation-fault-with-const-iterator-while-using-qt/30898698#30898698", "title": "Segmentation Fault with const_iterator while using QT", "body": "<p>STL iterators can't be a reason of segfault (just in case of inappropriate use) in your function. You are dereferencing some uninitialized pointer.</p>\n\n<p>Setting a breakpoint in the beginning of this function will let you an ability to check \"online\" <code>d</code> and it's content (which are pointers! danger is right here) are correct. The same for <code>friends</code>.</p>\n"}], "owner": {"reputation": 71, "user_id": 4915364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tct5k.jpg?s=128&g=1", "display_name": "ambdere", "link": "https://stackoverflow.com/users/4915364/ambdere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434563019, "creation_date": 1434560718, "last_edit_date": 1434561480, "question_id": 30897978, "link": "https://stackoverflow.com/questions/30897978/segmentation-fault-with-const-iterator-while-using-qt", "title": "Segmentation Fault with const_iterator while using QT", "body": "<p>I'm developing a software similar to linkedin in C++ using Qt.\nI have a problem when I try to save a user to the DB and in particular when I try to save his contacts.</p>\n\n<p>The function the debugger says is wrong is the following</p>\n\n<pre><code>QString network::getAllContacts(const vector&lt;user*&gt;&amp; d) const{\nQString str=\"\";\nfor(vector&lt;user*&gt;::const_iterator it=friends.begin();it!=friends.end(); ++it){\n   for(vector&lt;user*&gt;::const_iterator it2=d.begin(); it2!=d.end(); ++it2){\n      if(*it==*it2){\n        if(str.size()!=0)\n            str=str+\",\"+QString::fromStdString((*it)-&gt;getLogin());\n        else\n            str=QString::fromStdString((*it)-&gt;getLogin());\n      }\n   }\n}\nreturn str;\n}\n</code></pre>\n\n<p>It gave me a segmentation fault and shows me the line of the stl vector.h that says </p>\n\n<pre><code>{ return const_iterator(this-&gt;_M_impl._M_finish); }\n</code></pre>\n"}, {"tags": ["c++", "templates", "g++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1434560948, "post_id": 30897931, "comment_id": 49835160, "body": "Try <code>return line.template get&lt;ipos&gt;();</code>"}, {"owner": {"reputation": 889, "user_id": 1394947, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9dcb43160fd88a202d4b1eb7fb7ae63f?s=128&d=identicon&r=PG", "display_name": "maxbc", "link": "https://stackoverflow.com/users/1394947/maxbc"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1434562423, "post_id": 30897931, "comment_id": 49836020, "body": "@RSahu thank you, I didn&#39;t even know the template keyword was supposed to be used that way ! Which is why I couldn&#39;t find the duplicate topic..."}], "owner": {"reputation": 889, "user_id": 1394947, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9dcb43160fd88a202d4b1eb7fb7ae63f?s=128&d=identicon&r=PG", "display_name": "maxbc", "link": "https://stackoverflow.com/users/1394947/maxbc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "closed_date": 1434561185, "answer_count": 0, "score": 0, "last_activity_date": 1434560591, "creation_date": 1434560591, "last_edit_date": 1592644375, "question_id": 30897931, "link": "https://stackoverflow.com/questions/30897931/how-to-fix-g-error-while-parsing-template-member-function-of-dependent-type", "closed_reason": "Duplicate", "title": "How to fix g++ error while parsing template member function of dependent type?", "body": "<p>I have a template class <code>class Map&lt;typename Line, typename itype, typename ipos&gt;</code> and I'm trying to call a templated member of class <code>Line</code> from a member of <code>Map</code> :</p>\n<pre><code>template&lt;class Line, typename itype, int ipos&gt;\nclass Map\n{\npublic:\n  itype getIndex(Line &amp;line)\n  {\n    return line.get&lt;ipos&gt;();\n  }\n};\n</code></pre>\n<p>and I get the g++ error :</p>\n<blockquote>\n<p>error: expected primary-expression before \u2018)\u2019 token</p>\n<p>return line.get &lt; ipos &gt; ();</p>\n</blockquote>\n<p>Compiles fine under VS12; g++ version is 5.1.</p>\n<p>I thought the inside of functions was not parsed until instantiation, apparently I'm very wrong. How can I get around that error?</p>\n<p>Maybe I was too influenced by VC++'s &quot;whatever compiles is correct&quot; style...</p>\n"}, {"tags": ["c++", "clang"], "comments": [{"owner": {"reputation": 648, "user_id": 3811791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/649e85a70c38c5c3b44ea97f82c9e36c?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Revo", "link": "https://stackoverflow.com/users/3811791/alexander-revo"}, "edited": false, "score": 1, "creation_date": 1434563308, "post_id": 30897864, "comment_id": 49836602, "body": "Your <code>Rect</code> constructor seems to be missing the <code>height</code> argument"}], "answers": [{"comments": [{"owner": {"reputation": 3179, "user_id": 410368, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d32b8cc9643bf8d6e7c2b43d070c3520?s=128&d=identicon&r=PG", "display_name": "Zimm3r", "link": "https://stackoverflow.com/users/410368/zimm3r"}, "edited": false, "score": 0, "creation_date": 1434563576, "post_id": 30898759, "comment_id": 49836754, "body": "So there is no way to not use member intializer list syntax and not have a constructor for Rect?"}, {"owner": {"reputation": 648, "user_id": 3811791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/649e85a70c38c5c3b44ea97f82c9e36c?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Revo", "link": "https://stackoverflow.com/users/3811791/alexander-revo"}, "reply_to_user": {"reputation": 3179, "user_id": 410368, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d32b8cc9643bf8d6e7c2b43d070c3520?s=128&d=identicon&r=PG", "display_name": "Zimm3r", "link": "https://stackoverflow.com/users/410368/zimm3r"}, "edited": false, "score": 1, "creation_date": 1434563873, "post_id": 30898759, "comment_id": 49836920, "body": "Using member initializer list is the only way to pass an argument to a base class constructor, and is, in fact, the right way to do what you are trying to accomplish. It is also a preferred way to initialize class fields, so you should be using it in <code>Rect</code> constructor to set values of <code>width</code> and <code>height</code>, instead of <code>this-&gt;width = ...</code> and <code>this-&gt;height = ...</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 3179, "user_id": 410368, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d32b8cc9643bf8d6e7c2b43d070c3520?s=128&d=identicon&r=PG", "display_name": "Zimm3r", "link": "https://stackoverflow.com/users/410368/zimm3r"}, "edited": false, "score": 0, "creation_date": 1434565097, "post_id": 30898759, "comment_id": 49837657, "body": "I am going to disagree with Alexander Revo. His answer is the best way to handle this, but @Zimm3r , you can do what you want. However, this puts the onus on square to do things that the rectangle should do given your object hierarchy. Best practice is to allow squares to do square things and rectangles to do rectangle things. You and future maintainers of your software will have less surprises that way. Important point: There will be a rectangle constructor even if it does nothing and you remove the code for it."}, {"owner": {"reputation": 3179, "user_id": 410368, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d32b8cc9643bf8d6e7c2b43d070c3520?s=128&d=identicon&r=PG", "display_name": "Zimm3r", "link": "https://stackoverflow.com/users/410368/zimm3r"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1434565845, "post_id": 30898759, "comment_id": 49838054, "body": "@user4581301 I agree and this is a simple example but sometimes there may be things you want to do BEFORE you call the constructor."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 3179, "user_id": 410368, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d32b8cc9643bf8d6e7c2b43d070c3520?s=128&d=identicon&r=PG", "display_name": "Zimm3r", "link": "https://stackoverflow.com/users/410368/zimm3r"}, "edited": false, "score": 0, "creation_date": 1434566872, "post_id": 30898759, "comment_id": 49838722, "body": "@Zimm3r OK. Rethought. Square(int width) : Rect(FreeFunctionOrStaticMethodThatDoesStuffThenReturnsParam&zwnj;&#8203;(width), width). Or better, add an init(int width, int height) function to Rect. That way Rect can retake full control of its data. At the very least, change Rect&#39;s width and height to protected access."}, {"owner": {"reputation": 648, "user_id": 3811791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/649e85a70c38c5c3b44ea97f82c9e36c?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Revo", "link": "https://stackoverflow.com/users/3811791/alexander-revo"}, "edited": false, "score": 0, "creation_date": 1434567930, "post_id": 30898759, "comment_id": 49839381, "body": "I edited my answer to provide a more detailed explanation."}, {"owner": {"reputation": 648, "user_id": 3811791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/649e85a70c38c5c3b44ea97f82c9e36c?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Revo", "link": "https://stackoverflow.com/users/3811791/alexander-revo"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1434568104, "post_id": 30898759, "comment_id": 49839492, "body": "@user4581301 default constructor is not implicitly generated if there is another constructor declared in the class (unless you tell the compiler to generate it by using C++11 keyword <code>default</code>), so in this case there will be no default constructor for <code>Rect</code>."}], "tags": [], "owner": {"reputation": 648, "user_id": 3811791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/649e85a70c38c5c3b44ea97f82c9e36c?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Revo", "link": "https://stackoverflow.com/users/3811791/alexander-revo"}, "is_accepted": true, "score": 2, "last_activity_date": 1434567888, "last_edit_date": 1495540275, "creation_date": 1434563254, "answer_id": 30898759, "question_id": 30897864, "link": "https://stackoverflow.com/questions/30897864/c-grand-parent-default-constructor-call/30898759#30898759", "title": "C++ Grand Parent default constructor call", "body": "<p>You should use member initializer list syntax to call appropriate <code>Rect</code> constructor with your arguments:</p>\n\n<pre><code>Square(int width) : Rect(width, width)\n{\n    printf(\"Square constructor called.\\n\");\n}\n</code></pre>\n\n<p>Notice that you don't need to manually assign to <code>this-&gt;width</code> and <code>this-&gt;height</code>, <code>Rect</code> constructor will do this for you.</p>\n\n<p>Main advantage of using initializer list instead of assignment in constructor body, is that it allows to avoid unnecessary calls to default constructor. See <a href=\"https://stackoverflow.com/a/926795/3811791\">this answer</a> for detailed explanation.</p>\n\n<p>It also allows you to inherit from (and have data members of) classes that don't have default constructor.</p>\n\n<p>If you need to do something with the values first, it's perfectly ok to assign values in constructor body, but your base class (or member class, if you are initializing a data member) must have a default constructor.</p>\n\n<p>The reason for this is that every data member's constructor must be (and is) called BEFORE your class' constructor body starts to execute. Initializer list allows you to choose which constructor gets called, depending on arguments you provide. If you don't initialize a data member in initializer list, it will be constructed using its default constructor (that is why it must be declared) before it can be assigned any value in constructor body.</p>\n"}], "owner": {"reputation": 3179, "user_id": 410368, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d32b8cc9643bf8d6e7c2b43d070c3520?s=128&d=identicon&r=PG", "display_name": "Zimm3r", "link": "https://stackoverflow.com/users/410368/zimm3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 30898759, "answer_count": 1, "score": 0, "last_activity_date": 1434574664, "creation_date": 1434560356, "last_edit_date": 1592644375, "question_id": 30897864, "link": "https://stackoverflow.com/questions/30897864/c-grand-parent-default-constructor-call", "title": "C++ Grand Parent default constructor call", "body": "<p>I have the following code that runs just fine as long as I have the Rect default constructor included. However if I comment it out hope that it will just 'skip' to the Shape default constructor it fails to compile.</p>\n<pre><code>#include &lt;cstdio&gt;\n\nclass Shape\n{\npublic:\n    Shape()\n    {\n        printf(&quot;Shape default called\\n&quot;);\n    }\n};\n\nclass Rect : public Shape\n{\npublic:\n    int width;\n    int height;\n    \n    Rect()\n    {\n        printf(&quot;Rect default called\\n&quot;);\n    }\n\n    Rect(int width, int height)\n    {\n        this-&gt;width = width;\n        this-&gt;height = height;\n    }\n\n    int area()\n    {\n        return width*height; \n    }\n};\n\nclass Square : public Rect\n{\npublic:\n    Square(int width)\n    {   \n        printf(&quot;Square constructor called.\\n&quot;);\n        this-&gt;width = width;\n        this-&gt;height = width;\n    }\n};\n\nint main(int argv, char** argc)\n{\n    printf(&quot;...\\n&quot;);\n    Square r = Square(10);\n    printf(&quot;Area: %d\\n&quot;, r.area());\n    return 0;\n}\n</code></pre>\n<p>When the program runs and compiles I get the following output</p>\n<blockquote>\n<p>...</p>\n<p>Shape default called</p>\n<p>Rect default called</p>\n<p>Square constructor called.</p>\n<p>Area: 100</p>\n</blockquote>\n<p>I was hoping to simply remove the <code>Rect</code> default constructor and get</p>\n<blockquote>\n<p>...</p>\n<p>Shape default called</p>\n<p>Square constructor called.</p>\n<p>Area: 100</p>\n</blockquote>\n<p>because all the rect default constructor will do is sit there to satisfy clang's error. It isn't intended to do anything extra. Is there a way to accomplish this?</p>\n"}, {"tags": ["c++", "visual-studio", "opencv", "visual-studio-2013", "32bit-64bit"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1434561021, "post_id": 30897640, "comment_id": 49835222, "body": "you dont need to install anything if header, libs and dlls are given. your compiler must fit the libs though, so if you have 32 bit libs for visual studio 2010 you have to compile a 32 bit binary with vc100 compiler"}, {"owner": {"reputation": 4912, "user_id": 1953533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Vs4v8.jpg?s=128&g=1", "display_name": "CroCo", "link": "https://stackoverflow.com/users/1953533/croco"}, "edited": false, "score": 1, "creation_date": 1434579241, "post_id": 30897640, "comment_id": 49845486, "body": "Was he using same visual studio that you are going to use? If so, then you will be fine. For x64, yes you can run apps that was designed for x86 in a PC with x64 arch.. You better stick with 32bit unless you have to use 64bit. If you seriously want to work with OpenCV, then compile it by your compiler. I&#39;ve tested OpenCV 3 with visual studio 2013 and it wasn&#39;t really hard."}, {"owner": {"reputation": 111, "user_id": 5012066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-B2TNqH4BXzs/AAAAAAAAAAI/AAAAAAAAAPo/WG8ppJ6OtzE/photo.jpg?sz=128", "display_name": "Joissa.R", "link": "https://stackoverflow.com/users/5012066/joissa-r"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1434584997, "post_id": 30897640, "comment_id": 49847183, "body": "@Micka, I downloaded 32 bit versions of everything the program needed and used the opencv files that were given in the folder. Thanks! Its finally been able to generate the code."}], "owner": {"reputation": 111, "user_id": 5012066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-B2TNqH4BXzs/AAAAAAAAAAI/AAAAAAAAAPo/WG8ppJ6OtzE/photo.jpg?sz=128", "display_name": "Joissa.R", "link": "https://stackoverflow.com/users/5012066/joissa-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434559608, "creation_date": 1434559608, "question_id": 30897640, "link": "https://stackoverflow.com/questions/30897640/do-i-need-to-install-opencv-if-needed-files-were-given", "title": "Do I need to install OpenCV if needed files were given?", "body": "<p>I'm trying to run a multi-project Solution in Visual Studios 2013 and in these files the original developer included the OpenCv files used in the program.  I was wondering if I still need to download and install OpenCv, if he already included them? </p>\n\n<p>And if I do, do I have to get the same version of OpenCV? </p>\n\n<p>Also, it seems that the original developer was using a x86 computer.  Is it possible that his code might not work on my x64 computer since there are some files that specifically say theyre for Win32? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "node.js", "ibm-mq", "node-gyp"], "answers": [{"tags": [], "owner": {"reputation": 650, "user_id": 2342681, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/brdpW.jpg?s=128&g=1", "display_name": "Luis Crespo", "link": "https://stackoverflow.com/users/2342681/luis-crespo"}, "is_accepted": true, "score": 1, "last_activity_date": 1434618167, "creation_date": 1434618167, "answer_id": 30910947, "question_id": 30897604, "link": "https://stackoverflow.com/questions/30897604/how-to-locate-imqi-hpp-from-node-gyp/30910947#30910947", "title": "how to locate &#39;imqi.hpp&#39; from node-gyp", "body": "<p>Because binding.gyp is in JSON, the String <code>\"c:\\MQ\\tools\\cplus\\include\"</code>is a standard JavaScript String, and therefore the <code>\\</code> needs to be escaped to <code>\\\\</code>.</p>\n\n<p>So you should replace <code>\"c:\\MQ\\tools\\cplus\\include\"</code> into <code>\"c:\\\\MQ\\\\tools\\\\cplus\\\\include\"</code>.</p>\n\n<p>I hope that fixes the problem...</p>\n"}], "owner": {"reputation": 119, "user_id": 3309579, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/nKMIH.jpg?s=128&g=1", "display_name": "Sebastia.Net", "link": "https://stackoverflow.com/users/3309579/sebastia-net"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 0, "accepted_answer_id": 30910947, "answer_count": 1, "score": 1, "last_activity_date": 1474611754, "creation_date": 1434559487, "last_edit_date": 1495542290, "question_id": 30897604, "link": "https://stackoverflow.com/questions/30897604/how-to-locate-imqi-hpp-from-node-gyp", "title": "how to locate &#39;imqi.hpp&#39; from node-gyp", "body": "<p>I am trying to use \"nan\" module to call MQ_CONNECT() from node.js</p>\n\n<p>See</p>\n\n<p><a href=\"https://stackoverflow.com/questions/30862736/node-js-and-c-c-integration-how-to-properly-implement-callbacks\">Node.js and C/C++ integration: how to properly implement callbacks?</a>\nand\n<a href=\"https://github.com/nodejs/nan\" rel=\"nofollow noreferrer\">https://github.com/nodejs/nan</a></p>\n\n<p>When I use \"node-gyp\" it says it can not find \"imqi.hpp\", the MQ header</p>\n\n<p>As far as I can see, the path to MQ includes has to be provided in \"binding.gyp\", and I have tried this without success:</p>\n\n<pre><code>{\n    \"targets\": [\n            {\n                    \"target_name\": \"mqconn\",\n                    \"sources\": [\n                            \"initall.cc\",\n                            \"mqconn.cc\"\n                    ],\n                    \"include_dirs\": [\n                            \"&lt;!(node -e \\\"require('nan')\\\")\",\n                            \"c:\\MQ\\tools\\cplus\\include\"\n                    ]\n            }\n    ]\n}\n</code></pre>\n\n<p>Does anyboby have a clue on how to fix this ?\nSebastian.</p>\n\n<p>PD.- of course, the file is where the path indicates:</p>\n\n<pre><code>c:\\&gt;dir c:\\MQ\\tools\\cplus\\include\\imqi.hpp\nVolume in drive C is OS\nVolume Serial Number is 12AA-0601\n\nDirectory of c:\\MQ\\tools\\cplus\\include\n\n27/06/2013  02:00             1.538 imqi.hpp\n</code></pre>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1434559316, "post_id": 30897322, "comment_id": 49834140, "body": "@CoryKramer Then the code would be subject to the diamond inheritance problem.  See <a href=\"http://www.cprogramming.com/tutorial/virtual_inheritance.html\" rel=\"nofollow noreferrer\">cprogramming.com/tutorial/virtual_inheritance.html</a>"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "edited": false, "score": 0, "creation_date": 1434559492, "post_id": 30897322, "comment_id": 49834256, "body": "@Daniel You are correct!"}, {"owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1434560362, "post_id": 30897322, "comment_id": 49834820, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 that&#39;s much more precise, thanks. (still it is difficult to find that question if you&#39;re looking through the standard search),"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1434560512, "post_id": 30897322, "comment_id": 49834903, "body": "@maja Well, it&#39;s easier to find, if you know <a href=\"http://stackoverflow.com/search?tab=votes&amp;q=%5bc%2b%2b%5dredefinition%20error%20include%20guard\">the actual problem are the include guards</a> ;-)."}], "answers": [{"comments": [{"owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "edited": false, "score": 0, "creation_date": 1434559901, "post_id": 30897373, "comment_id": 49834524, "body": "All right, so that&#39;s where they go (I had tried to place them in the source files..). I&#39;m used to place them in the main source file, but I guess that&#39;s not a given (nor the most efficient way). Thanks."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 4, "last_activity_date": 1434558988, "last_edit_date": 1434558988, "creation_date": 1434558788, "answer_id": 30897373, "question_id": 30897322, "link": "https://stackoverflow.com/questions/30897322/c-multiple-inheritance-and-virtual-class/30897373#30897373", "title": "C++ multiple inheritance and virtual class", "body": "<p>You should use include guards</p>\n\n<pre><code>#ifndef VEHICLE_H\n#define VEHICLE_H\n\nclass vehicle\n{\npublic:\n    vehicle();\n    vehicle(char*, int, char*);\n    virtual void setmodel(char*);\n    //more functions..\n    ~vehicle();\nprotected:\n    char* model;\n    int speed;\n    char* color;\n};\n\n#endif\n</code></pre>\n\n<p>Because both <code>car.h</code> and <code>airplane.h</code> use <code>#include \"vehicle.h\"</code> so the <code>Vehicle</code> class will be defined twice when both of their respective headers are included in <code>flyingCar.h</code>.</p>\n\n<p>In general you should have <a href=\"https://stackoverflow.com/questions/4767068/c-header-guards\">header guards</a> around all your headers, or <a href=\"https://stackoverflow.com/questions/1143936/pragma-once-vs-include-guards\">equivalent such as <code>#pragma once</code></a>, etc.</p>\n"}], "owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "closed_date": 1434559926, "accepted_answer_id": 30897373, "answer_count": 1, "score": -1, "last_activity_date": 1434559242, "creation_date": 1434558649, "last_edit_date": 1434559242, "question_id": 30897322, "link": "https://stackoverflow.com/questions/30897322/c-multiple-inheritance-and-virtual-class", "closed_reason": "Duplicate", "title": "C++ multiple inheritance and virtual class", "body": "<p>I'm trying to write a program with four classes: vehicle, car, airplane and flying car.</p>\n\n<p>Flying car inherits from car and airplane, car and airplane both inherit from vehicle.</p>\n\n<p>vehicle.h</p>\n\n<pre><code>class vehicle\n{\npublic:\n    vehicle();\n    vehicle(char*, int, char*);\n    virtual void setmodel(char*);\n    //more functions..\n    ~vehicle();\nprotected:\n    char* model;\n    int speed;\n    char* color;\n};\n</code></pre>\n\n<p>car.h</p>\n\n<pre><code>#include \"vehicle.h\"\nclass car:public virtual vehicle\n{\npublic:\n    car();\n    car(char*, int, char*);\n    void driving(std::ostream&amp;);\n};\n</code></pre>\n\n<p>airplane.h</p>\n\n<pre><code>#include \"vehicle.h\"\nclass airplane:public virtual vehicle\n{\npublic:\n    airplane();\n    airplane(char*, int, char*);\n    void flying(std::ostream&amp;);\n};\n</code></pre>\n\n<p>flyingCar.h</p>\n\n<pre><code>#include \"car.h\"\n#include \"airplane.h\"\nclass flyingCar: public car, public airplane\n{\npublic:\n    flyingCar();\n    flyingCar(char*, int, char*);\n};\n</code></pre>\n\n<p>Also, the source files for every class include the related header files (so thart <code>vehicle.cpp</code> includes <code>vehicle.h</code>, <code>car.cpp</code> includes <code>car.h</code> and so on.. ).</p>\n\n<p>The main function includes the <code>vehicles.h</code> header and <code>ifndef..</code>.</p>\n\n<p>When I compile I get an error for redefinition of class vehicle in car.h, but since I already used the <code>virtual</code> I don't understand how I could solve the problem.</p>\n\n<p>I suspect including the class headers in the class source files may be incorrect, since the inherited headers are already included in the inheriting headers themselves, but if I don't include them here the compiler will not refer to the class prototypes. As an attempt I enclosed everything in <code>ifndef..</code> with no positive result.</p>\n"}, {"tags": ["c++", "templates", "operator-overloading", "template-meta-programming", "addressof"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1434559777, "post_id": 30897304, "comment_id": 49834445, "body": "I don&#39;t understand why GCC rejects <code>using TPtr = decltype(&amp;std::declval&lt;int&gt;());</code>. I thought the argument to <code>decltype</code> was supposed to be an unevaluated context? Just allow me to use <code>&amp;</code> to get the resulting type, gosh darnit!"}, {"owner": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1434559813, "post_id": 30897304, "comment_id": 49834458, "body": "@LightnessRacesinOrbit that code worked for me in Visual Studio 2013; undelete your answer?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1434559839, "post_id": 30897304, "comment_id": 49834482, "body": "Not until I know it&#39;s correct. VS allows all sorts of non-standard things."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1434559875, "post_id": 30897304, "comment_id": 49834505, "body": "@LightnessRacesinOrbit <code>std::declval&lt;int&gt;()</code> is an xvalue. <code>&amp;</code> can only be used on lvalues."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1434560126, "post_id": 30897651, "comment_id": 49834677, "body": "@T.C. Goddammit I hate this stupid language. You go for it: I&#39;ll leave my silly hack up :P"}, {"owner": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1434560499, "post_id": 30897651, "comment_id": 49834895, "body": "I&#39;ll confirm that <code>using TPtr = decltype(&amp;std::declval&lt;T&amp;&gt;());</code> works in Visual Studio 2013; thanks!"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 1, "last_activity_date": 1434560111, "last_edit_date": 1434560111, "creation_date": 1434559629, "answer_id": 30897651, "question_id": 30897304, "link": "https://stackoverflow.com/questions/30897304/get-the-type-of-for-built-in-and-operator/30897651#30897651", "title": "Get the type of &amp; for built-in and operator&amp;()?", "body": "<p>You can use <code>decltype</code> and <code>declval</code>, with a little hackery to force an <em>lvalue</em> to be passed to the <code>&amp;</code> operator (which is required):</p>\n\n<p>Start with <code>#include &lt;utility&gt;</code> and define the following helper function:</p>\n\n<pre><code>template &lt;typename T&gt;\nT&amp; as_lvalue(T&amp;&amp; val)\n{\n    return val;\n}\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>using TPtr = decltype(&amp;as_lvalue(std::declval&lt;T&gt;()));\n</code></pre>\n\n<h3>(<a href=\"http://coliru.stacked-crooked.com/a/1cb1c727cb701012\" rel=\"nofollow\">live demo</a>)</h3>\n"}], "owner": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 30897651, "answer_count": 1, "score": 1, "last_activity_date": 1434652395, "creation_date": 1434558578, "last_edit_date": 1495539826, "question_id": 30897304, "link": "https://stackoverflow.com/questions/30897304/get-the-type-of-for-built-in-and-operator", "title": "Get the type of &amp; for built-in and operator&amp;()?", "body": "<p><strong>Edit:</strong> The answer I've marked below isn't 100% correct, that's actually in a comment: <code>using TPtr = decltype(&amp;std::declval&lt;T&amp;&gt;());</code></p>\n\n<hr>\n\n<p>I'm trying to use <code>std::conditional&lt;&gt;</code> to get the type of <code>&amp;T</code>, where <code>T</code> may have <code>operator&amp;()</code>, or not.</p>\n\n<p>The simple solution is to not even try, instead specify another template argument:</p>\n\n<pre><code>struct Foo\n{\n    int operator&amp;() { return 314; }\n};\n\nstruct Bar { };\n\ntemplate &lt;typename T, typename TPtr = T*&gt;\nstruct A\n{\n    T&amp; _t;\n    A(T&amp; t) : _t(t) {}\n    TPtr data() {\n        return &amp;_t;\n    }\n};\n</code></pre>\n\n<p>where client code is then</p>\n\n<pre><code>Foo foo;\nA&lt;Foo, int&gt; aFoo(foo);\nint pFooData = aFoo.data();\n\nBar bar;\nA&lt;Bar&gt; aBar(bar);\nBar* pBarData = aBar.data();\n</code></pre>\n\n<p>But what I'd rather write is something like:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct B\n{\n    using TPtr = typename std::conditional&lt;has_operator_address_of&lt;T&gt;::value, typename std::result_of&lt;decltype(T::operator&amp;)&amp;()&gt;::type, T*&gt;::type;\n\n    T&amp; _t;\n    B(T&amp; t) : _t(t) {}\n    TPtr data() {\n        return &amp;t;\n    }\n};\n</code></pre>\n\n<p>where <code>has_operator_address_of</code> is modeled after <a href=\"https://stackoverflow.com/a/17202010/8877\"><code>is_call_possible</code></a>.  Client code is then</p>\n\n<pre><code>B&lt;Foo&gt; bFoo(foo); // no need to second template argument\npFooData = bFoo.data();\n</code></pre>\n\n<p>but then the class without <code>operator&amp;()</code> fails to compile:</p>\n\n<pre><code>B&lt;Bar&gt; bBar(bar);\npBarData = bBar.data();\n</code></pre>\n\n<p>It seems that <code>conditional</code> wants to compile both template arguments, so compilation fails when <code>T</code> doesn't have <code>operator&amp;()</code>.  I've tried sprinkling <code>std::enable_if</code> around, but to no avail.</p>\n"}, {"tags": ["c++", "oop", "static-cast"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1434558405, "post_id": 30897186, "comment_id": 49833511, "body": "You want <code>is_convertible</code> and <code>is_constructible</code>; e.g. see &quot;perfect initialization&quot; in <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4064\" rel=\"nofollow noreferrer\">N4064</a>."}, {"owner": {"reputation": 1139, "user_id": 5003972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f7e2d6abba63b8e54865acb63859e55?s=128&d=identicon&r=PG&f=1", "display_name": "shay ", "link": "https://stackoverflow.com/users/5003972/shay"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1434558879, "post_id": 30897186, "comment_id": 49833826, "body": "i can only use basic tools nothing that required and #include"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1434559400, "post_id": 30897186, "comment_id": 49834199, "body": "@shay: Then you&#39;d better be writing a compiler.... otherwise all you&#39;re going to be doing for the next few weeks is reinventing half the standard library so that you can reinvent a built-in operator..."}, {"owner": {"reputation": 1139, "user_id": 5003972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f7e2d6abba63b8e54865acb63859e55?s=128&d=identicon&r=PG&f=1", "display_name": "shay ", "link": "https://stackoverflow.com/users/5003972/shay"}, "edited": false, "score": 0, "creation_date": 1434559857, "post_id": 30897186, "comment_id": 49834493, "body": "I got function f() that compiles if T and U are implicitly convertible and function g() that compiles if T inherits from U, but I don&#39;t know how to do &quot;if f() doesnt compile try g()&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 0, "last_activity_date": 1434558866, "creation_date": 1434558866, "answer_id": 30897397, "question_id": 30897186, "link": "https://stackoverflow.com/questions/30897186/implement-static-cast-on-c/30897397#30897397", "title": "implement static cast on C++", "body": "<p>You could use <code>type_traits</code> and in particular <code>std::is_convertible</code> in combination with <code>std::is_base_of</code>:</p>\n\n<pre><code>template&lt;typename T, typename U, typename std::enable_if&lt;std::is_convertible&lt;T, U&gt;::value ||\nstd::is_base_of&lt;T, U&gt;::value&gt;::type* = nullptr&gt;\nT mystatic_cast(U &amp;u)\n{\n    return u;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b5e9fb7e4883019c\" rel=\"nofollow\"><strong>Live Demo</strong></a></p>\n"}], "owner": {"reputation": 1139, "user_id": 5003972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f7e2d6abba63b8e54865acb63859e55?s=128&d=identicon&r=PG&f=1", "display_name": "shay ", "link": "https://stackoverflow.com/users/5003972/shay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434558866, "creation_date": 1434558250, "question_id": 30897186, "link": "https://stackoverflow.com/questions/30897186/implement-static-cast-on-c", "title": "implement static cast on C++", "body": "<p>I am trying to implement static cast. I need to check if the types T and U are implicitly convertible, if not check if one inherites from another. I can write a class to check each on of them, but I cant understand how to check implicit convert and if it doesnt compile check the inheritance. </p>\n\n<p>all the checking need to on at compile time </p>\n"}, {"tags": ["c++", "switch-statement", "c-preprocessor"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 4, "creation_date": 1434558175, "post_id": 30897128, "comment_id": 49833355, "body": "You say the header file is generated.  Have you considered generating the &quot;long, inconcise solution&quot; as well?"}, {"owner": {"reputation": 1984, "user_id": 2132312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xv2d5.png?s=128&g=1", "display_name": "Matthew D. Scholefield", "link": "https://stackoverflow.com/users/2132312/matthew-d-scholefield"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1434564545, "post_id": 30897128, "comment_id": 49837336, "body": "@zwol The defines are generated from an external tool, so I cannot edit that tool. On the other hand, Im not opposed to writing a preprocessor hack or something of the sort to &quot;generate&quot; the long inconcise method."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1434565212, "post_id": 30897128, "comment_id": 49837711, "body": "I was thinking more along the lines of an additional tool which would generate the code you need.  One-off code generators are an underappreciated technique."}, {"owner": {"reputation": 1984, "user_id": 2132312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xv2d5.png?s=128&g=1", "display_name": "Matthew D. Scholefield", "link": "https://stackoverflow.com/users/2132312/matthew-d-scholefield"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1434565394, "post_id": 30897128, "comment_id": 49837806, "body": "In my case, I could also use something like a shell script to generate the code, but for this question, since there are already answers, let&#39;s stick to c++ only."}], "answers": [{"tags": [], "owner": {"reputation": 2417, "user_id": 2503164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/68d57915f8c4a877fe42a67251d1420a?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2503164/mike"}, "is_accepted": false, "score": 2, "last_activity_date": 1434560701, "creation_date": 1434560701, "answer_id": 30897969, "question_id": 30897128, "link": "https://stackoverflow.com/questions/30897128/concise-way-to-calculate-define/30897969#30897969", "title": "Concise way to calculate #define", "body": "<p>Storing it as data lookup is much faster and only requires processing once (when its set up). So, assuming material and sound are more or less zero-based sequential (otherwise do a lookup translation):</p>\n\n<pre><code>int soundLut [MAX_MATERIAL][MAX_SOUND][2] = {\n    {        // SOIL\n        {SFX_SOIL_DESTROY_1, SFX_SOIL_DESTROY_2},  // destroy\n        {SFX_SOIL_PLACE_1, SFX_SOIL_PLACE_2},      // Place\n        // etc - if only one effect, put 2 values the same\n    },\n    {        // WOOD\n        // and so on\n    }        \n};\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>int getSfx (MaterialType material, SoundType sound)\n{\n    return soundLut [material][sound][rand()%2];\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2417, "user_id": 2503164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/68d57915f8c4a877fe42a67251d1420a?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2503164/mike"}, "edited": false, "score": 0, "creation_date": 1434567692, "post_id": 30898468, "comment_id": 49839227, "body": "Your solution also has the advantage that the materials don&#39;t have to be zero-sequential - it&#39;s what I would have suggested to incorporate the lookup. Someone asking me for the most concise way of doing something is like a red flag to a bull, though, so I put it into 1 table (set up at compile time) and 1 line of code. :-)"}, {"owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "reply_to_user": {"reputation": 2417, "user_id": 2503164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/68d57915f8c4a877fe42a67251d1420a?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2503164/mike"}, "edited": false, "score": 1, "creation_date": 1434570168, "post_id": 30898468, "comment_id": 49840749, "body": "@Mike I think your code is just fine and works (so I upvoted your solution), but I tried to do something more C++ like."}], "tags": [], "owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1434562293, "creation_date": 1434562293, "answer_id": 30898468, "question_id": 30897128, "link": "https://stackoverflow.com/questions/30897128/concise-way-to-calculate-define/30898468#30898468", "title": "Concise way to calculate #define", "body": "<p>Maybe you can use a map for this purpose with a very similar solution as @Mike (but maybe a bit safer).</p>\n\n<pre><code>void initialize()\n{\n    // This is your class member.\n    // std::map&lt; std::pair&lt; MaterialType, SoundType &gt;, std::pair&lt; int, int &gt; &gt; sfxs;\n\n    sfxs[ std::make_pair( SOIL, DESTROY ) ] = std::make_pair( SFX_SOIL_DESTROY_1, SFX_SOIL_DESTROY_2 );\n    sfxs[ std::make_pair( SOIL, PLACE )   ] = std::make_pair( SFX_SOIL_PLACE_1,   SFX_SOIL_PLACE_2 );\n    // ...\n}\n\nint getSfx( MaterialType aMaterial, SoundType aSound )\n{\n    const auto key = std::make_pair( aMaterial, aSound );\n    if ( sfxs.find( key ) != sfxs.end() )\n    {\n        return ( rand() % 2 ) ? ( sfxs[ key ].first ) : ( sfxs[ key ].second );\n    }\n    return -1;\n}\n</code></pre>\n"}], "owner": {"reputation": 1984, "user_id": 2132312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xv2d5.png?s=128&g=1", "display_name": "Matthew D. Scholefield", "link": "https://stackoverflow.com/users/2132312/matthew-d-scholefield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467737799, "creation_date": 1434558048, "last_edit_date": 1467737799, "question_id": 30897128, "link": "https://stackoverflow.com/questions/30897128/concise-way-to-calculate-define", "title": "Concise way to calculate #define", "body": "<p>I have a set of #define's in a generated header such as this:</p>\n\n<pre><code>#define SFX_SOIL_DESTROY_1 2\n#define SFX_SOIL_DESTROY_2 14\n#define SFX_SOIL_PLACE_1 32\n#define SFX_SOIL_PLACE_2 33\n#define SFX_WOOD_DESTROY_1 5\n</code></pre>\n\n<p>I have a method that must return the correct define for the material type and sound type. Here is a long, inconcise solution:</p>\n\n<pre><code>int getSfx (MaterialType material, SoundType sound)\n{\n     switch (material)\n     {\n         case SOIL:\n         {\n             switch (sound)\n             {\n                 case DESTROY:\n                     return rand()%2 ?  SFX_SOIL_DESTROY_1 : SFX_SOIL_DESTROY_2;\n                 case PLACE:\n                 // And so on\n</code></pre>\n\n<p>Is there some sort of macro-hack that could condense this? Any help is greatly appreciated.</p>\n"}, {"tags": ["c++", "algorithm", "c++11", "unique"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1434558230, "post_id": 30897099, "comment_id": 49833390, "body": "<code>std::unique</code> only works on sorted ranges."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1434558257, "post_id": 30897099, "comment_id": 49833408, "body": "I can&#39;t think of any &quot;efficient&quot; way to do this over an unsorted range, but I&#39;m not an algorithms person (just one of a few reasons I utterly despise programming job interviews)."}, {"owner": {"reputation": 976, "user_id": 2548655, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/929PX.jpg?s=128&g=1", "display_name": "Michiel uit het Broek", "link": "https://stackoverflow.com/users/2548655/michiel-uit-het-broek"}, "edited": false, "score": 0, "creation_date": 1434558283, "post_id": 30897099, "comment_id": 49833425, "body": "I know, but that is not the reason for leave the non-unique values in an unspecified state. Furthermore, it is possible to sort the vector but in the initial situation it isn&#39;t."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1434558340, "post_id": 30897099, "comment_id": 49833461, "body": "@MichielUitHetBroek: Indeed, but it does mean your test was meaningless ;)"}, {"owner": {"reputation": 976, "user_id": 2548655, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/929PX.jpg?s=128&g=1", "display_name": "Michiel uit het Broek", "link": "https://stackoverflow.com/users/2548655/michiel-uit-het-broek"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1434558420, "post_id": 30897099, "comment_id": 49833522, "body": "@LightnessRacesinOrbit, I actually did sort it to use std::unique but forgot to mention it. See the edit."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1434559320, "post_id": 30897099, "comment_id": 49834146, "body": "@MichielUitHetBroek: Okay then :)"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1434560564, "post_id": 30897099, "comment_id": 49834949, "body": "Neither answer yet removes the smallest non-unique value from the vector. ;-)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1434561301, "post_id": 30897099, "comment_id": 49835395, "body": "@Howard: haha whoops. Well, I&#39;m out of time. OP will have to fill in the rest in a new answer"}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1434797516, "post_id": 30897099, "comment_id": 49939579, "body": "@MichielUitHetBroek you might want to have a look at my new answer, as I think the timings relevant to your case are different."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1434558835, "post_id": 30897234, "comment_id": 49833797, "body": "@Ami: Mm because of the sorting? It could be as bad as <code>NlogN</code>, I admit. I need do no hashing, though, and it&#39;s simple. I think it&#39;s going to depend on what the value type is and how long the input is, as to where the trade-off lies. As always, profiling."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1434560396, "post_id": 30897234, "comment_id": 49834840, "body": "Have added code to my solution as well. It indeed would be interesting to see what is the tipping point between these two solutions. I&#39;d also like to amend my somewhat strong statement above - it&#39;s not &quot;totally unnecessary&quot;, but rather more suitable for smaller arrays."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 7, "last_activity_date": 1434559206, "last_edit_date": 1434559206, "creation_date": 1434558389, "answer_id": 30897234, "question_id": 30897099, "link": "https://stackoverflow.com/questions/30897099/remove-smallest-non-unique-value-from-vector/30897234#30897234", "title": "Remove smallest non-unique value from vector", "body": "<p>Well, if you can sort the range then this is easy. Sort it in ascending order, then just iterate through until you encounter two equivalent, adjacent elements. Done.</p>\n\n<p>Something like this:</p>\n\n<pre><code>T findSmallestNonunique(std::vector&lt;T&gt; v)\n{\n   std::sort(std::begin(v), std::end(v));\n   auto it = std::adjacent_find(std::begin(v), std::end(v));\n   if (it == std::end(v))\n      throw std::runtime_error(\"No such element found\");\n   return *it;\n}\n</code></pre>\n\n<p>Here's <a href=\"http://coliru.stacked-crooked.com/a/07aa50c7c8a56eb4\">a demonstration</a>:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;stdexcept&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;typename Container&gt;\ntypename Container::value_type findSmallestNonunique(Container c)\n{\n   std::sort(std::begin(c), std::end(c));\n   auto it = std::adjacent_find(std::begin(c), std::end(c));\n\n   if (it == std::end(c))\n      throw std::runtime_error(\"No such element found\");\n\n   return *it;\n}\n\nint main(int argc, char** argv)\n{\n    std::vector&lt;int&gt; v;\n    for (int i = 1; i &lt; argc; i++)\n        v.push_back(std::stoi(argv[i]));\n\n    std::cout &lt;&lt; findSmallestNonunique(v) &lt;&lt; std::endl;\n}\n\n// g++ -std=c++14 -O2 -Wall -pedantic -pthread main.cpp \\\n// &amp;&amp; ./a.out 1 2 2 3 4 5 5 6 7 \\\n// &amp;&amp; ./a.out 5 2 8 3 9 3 0 1 4 \\\n// &amp;&amp; ./a.out 5 8 9 2 0 1 3 4 7\n// \n// 2\n// 3\n// terminate called after throwing an instance of 'std::runtime_error'\n//   what():  No such element found\n</code></pre>\n\n<p>Note that here I'm not performing the search in-place, but I could do by taking the container by reference. (This relies on you being allowed to sort the original input.)</p>\n\n<p>Due to the sort operation, this could be as \"bad\" as <em>O(N&times;log(N))</em>, but it's simple and easy to maintain, and does not require any allocations/copies (except for a single copy of the entire dataset which, as stated above, you may trivially completely avoid). You may want to use something else if your input is large or you are expecting to have a failed match in a majority of cases. As always: <em>profile</em>!</p>\n"}, {"comments": [{"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 3, "creation_date": 1434559125, "post_id": 30897321, "comment_id": 49834011, "body": "This sounds <i>really</i> slow.  Perhaps I&#39;m misunderstanding, but you want to put each element in an <code>unordered_map</code>?  That&#39;s N allocations!  That may be O(N), but the constant is very large.  Perhaps some code would clarify?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1434559158, "post_id": 30897321, "comment_id": 49834032, "body": "That&#39;s what I was thinking too. It may have better complexity but it does a heck of a lot more ... &quot;things&quot;. A case of thinking academically rather than practically, perhaps? Again, though, this is not really my field..."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1434559386, "post_id": 30897321, "comment_id": 49834184, "body": "@LightnessRacesinOrbit:  It would be fun to test this solution with yours and measure both.  Except there is no testable solution here..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 1, "creation_date": 1434559433, "post_id": 30897321, "comment_id": 49834217, "body": "@HowardHinnant: Indeed :-( [I&#39;d call it more &quot;interesting&quot; than &quot;fun&quot; :P]"}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1434559638, "post_id": 30897321, "comment_id": 49834351, "body": "@HowardHinnant (First, am honored to have a comment by you, albeit a negative one :-) . For large enough arrays, asymptotic complexity wins - the question is from where. Using a good allocator, e.g., Google&#39;s tcmalloc would lower the point. I will post a concrete solution."}, {"owner": {"reputation": 2363, "user_id": 3585432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b382bb722b7d630854ce0371d91120a1?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksei Shestakov", "link": "https://stackoverflow.com/users/3585432/aleksei-shestakov"}, "edited": false, "score": 1, "creation_date": 1434559872, "post_id": 30897321, "comment_id": 49834502, "body": "You can use this method in the modified quick sort algorithm. Split array until you get to the part of length 10000 (for example), then use hash map with open addressing and fixed size to count the elements. This should be slightly faster than sorting and it uses less allocations than original method."}, {"owner": {"reputation": 2396, "user_id": 2586447, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/567d7024898f875d97ed260321e8568a?s=128&d=identicon&r=PG&f=1", "display_name": "uchar", "link": "https://stackoverflow.com/users/2586447/uchar"}, "edited": false, "score": 2, "creation_date": 1434562640, "post_id": 30897321, "comment_id": 49836170, "body": "I used <a href=\"http://coliru.stacked-crooked.com/a/f7952d352f56b73b\" rel=\"nofollow noreferrer\">this code</a> for testing. It seems that for 5 million elements using hash table is 3 times faster !"}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 2396, "user_id": 2586447, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/567d7024898f875d97ed260321e8568a?s=128&d=identicon&r=PG&f=1", "display_name": "uchar", "link": "https://stackoverflow.com/users/2586447/uchar"}, "edited": false, "score": 0, "creation_date": 1434562765, "post_id": 30897321, "comment_id": 49836255, "body": "@Omid Great, very interesting. Many thanks! I suspect that using a pool allocator would speed things up even more."}], "tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": false, "score": 7, "last_activity_date": 1434560268, "last_edit_date": 1434560268, "creation_date": 1434558649, "answer_id": 30897321, "question_id": 30897099, "link": "https://stackoverflow.com/questions/30897099/remove-smallest-non-unique-value-from-vector/30897321#30897321", "title": "Remove smallest non-unique value from vector", "body": "<p>You can do this in (expected) linear time. </p>\n\n<ul>\n<li><p>use an <code>unordered_map</code> to count the elements. This is (expected) linear in the number of values. </p></li>\n<li><p>Find the smallest item among non-uniques using a naive loop.</p></li>\n</ul>\n\n<p>Here is a possible implementation:</p>\n\n<pre><code>#include &lt;unordered_map&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint main()\n{\n    const vector&lt;double&gt; elems{1, 3.2, 3.2, 2};\n    unordered_map&lt;double, size_t&gt; c;\n    for(const double &amp;d: elems)\n        ++c[d];\n    bool has = false;\n    double min_;\n    for(const auto &amp;e: c)\n        if(e.second &gt; 1)\n        {\n            min_ = has? min(e.first, min_): e.first;\n            has = true;\n        }\n    cout &lt;&lt; boolalpha &lt;&lt; has &lt;&lt; \" \" &lt;&lt; min_ &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Edit</strong> As Howard Hinnant &amp; Lightness Races In Orbit have pointed out, this contains both allocations &amp; hashes. It will therefore be linear but with a relatively large factor. Other, sorting-based solutions, might work better for small sizes. When/if profiling, it's important to use a good allocator, e.g., <a href=\"http://code.google.com/p/gperftools/\" rel=\"nofollow\">Google's <code>tcmalloc</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 976, "user_id": 2548655, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/929PX.jpg?s=128&g=1", "display_name": "Michiel uit het Broek", "link": "https://stackoverflow.com/users/2548655/michiel-uit-het-broek"}, "edited": false, "score": 0, "creation_date": 1434617763, "post_id": 30898663, "comment_id": 49859088, "body": "Great response! Although I liked all three suggested methods I accept this one since this seems to be the fastest. (+1 for all of you)"}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1434631171, "post_id": 30898663, "comment_id": 49868316, "body": "@Howard Hinnant Great answer. Unsurprisingly, having tweaked my code to avoid recreating tiny objects (you seemed to ignore my exhortations regarding this), Solution #1 (mine) drops below #2, but is still way above yours. There are a few interesting things regarding this, and some things I don&#39;t quite understand. Please let me know if I can write you regarding this."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1434636955, "post_id": 30898663, "comment_id": 49873044, "body": "@AmiTavory:  My door is open. :-)  And if you (or anyone else) provides an updated algorithm I&#39;m happy to update this answer with the latest results.  However I will insist on updates that are compilable (as opposed to human-language descriptions)."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1434743863, "post_id": 30898663, "comment_id": 49927171, "body": "Thank you for this invitation, @HowardHinnant! I just took the liberty to add a version implementing the algorithm described below. Interestingly, my results are not conclusive. It roughly takes half the time of the third algorithm and sometimes seems to get closer for larger ranges, but not consistently so."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1434797442, "post_id": 30898663, "comment_id": 49939561, "body": "@HowardHinnant Please see my new answer below. I believe there were some problems with your benchmark."}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": false, "score": 6, "last_activity_date": 1435151192, "last_edit_date": 1495535203, "creation_date": 1434562900, "answer_id": 30898663, "question_id": 30897099, "link": "https://stackoverflow.com/questions/30897099/remove-smallest-non-unique-value-from-vector/30898663#30898663", "title": "Remove smallest non-unique value from vector", "body": "<p>Well, here's an algorithm that actually <em>removes</em> the smallest non-unique item (as opposed to just prints it).</p>\n\n<pre><code>template &lt;typename Container&gt;\nvoid\nremoveSmallestNonunique(Container&amp; c)\n{\n    using value_type = typename Container::value_type;\n    if (c.size() &gt; 1)\n    {\n        std::make_heap(c.begin(), c.end(), std::greater&lt;value_type&gt;{});\n        std::pop_heap(c.begin(), c.end(), std::greater&lt;value_type&gt;{});\n        for (auto e = std::prev(c.end()); e != c.begin(); --e)\n        {\n            std::pop_heap(c.begin(), e, std::greater&lt;value_type&gt;{});\n            if (*e == e[-1])\n            {\n                c.erase(e);\n                break;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I chose this algorithm mainly because <a href=\"https://stackoverflow.com/users/560648/lightness-races-in-orbit\">Lightness Races in Orbit</a> didn't.  I don't know whether this will be faster than <code>sort/adjacent_find</code> or not.  And the answer almost certainly depends on the input.</p>\n\n<p>For example if there are no duplicates, then this algorithm is definitely slower than <code>sort/adjacent_find</code>.  If the input is very, very large, and the minimum unique is likely to be early in the sorted range, this algorithm is likely to be faster than <code>sort/adjacent_find</code>.  </p>\n\n<p>And everything I've said above is just guessing.  I'm quitting prior to performing the needed measurements on statistically likely inputs to the actual problem.</p>\n\n<p>Perhaps <a href=\"https://stackoverflow.com/users/2586447/omid\">Omid</a> can include this in his test and provide a summary answer. :-)</p>\n\n<p><strong>7 hours later ... Timings</strong></p>\n\n<p>I took <a href=\"https://stackoverflow.com/users/2586447/omid\">Omid's</a> code, corrected a minor mistake in it, corrected the other two algorithms to actually erase an element, and changed the test harness to vary the size and the number of duplicates more widely.</p>\n\n<p>Here is the code I tested using clang / libc++ at -O3:</p>\n\n<pre><code>#include &lt;unordered_map&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;random&gt;\n#include &lt;chrono&gt;\n#include &lt;cassert&gt;\n\ntemplate &lt;typename Container&gt;\nvoid\nerase_using_hashTable(Container&amp; vec)\n{\n    using T = typename Container::value_type;\n    std::unordered_map&lt;T, int&gt; c;\n    for (const auto&amp; elem : vec){\n        ++c[elem];\n    }\n    bool has = false;\n    T min_;\n    for (const auto&amp; e : c)\n    {\n        if (e.second &gt; 1)\n        {\n            min_ = has ? std::min(e.first, min_) : e.first;\n            has = true;\n        }\n    }\n    if (has)\n        vec.erase(std::find(vec.begin(), vec.end(), min_));\n}\n\ntemplate &lt;typename Container&gt;\nvoid \neraseSmallestNonunique(Container&amp; c)\n{\n   std::sort(std::begin(c), std::end(c));\n   auto it = std::adjacent_find(std::begin(c), std::end(c));\n\n   if (it != std::end(c))\n       c.erase(it);\n}\n\ntemplate &lt;typename Container&gt;\nvoid\nremoveSmallestNonunique(Container&amp; c)\n{\n    using value_type = typename Container::value_type;\n    if (c.size() &gt; 1)\n    {\n        std::make_heap(c.begin(), c.end(), std::greater&lt;value_type&gt;{});\n        std::pop_heap(c.begin(), c.end(), std::greater&lt;value_type&gt;{});\n        for (auto e = std::prev(c.end()); e != c.begin(); --e)\n        {\n            std::pop_heap(c.begin(), e, std::greater&lt;value_type&gt;{});\n            if (*e == e[-1])\n            {\n                c.erase(e);\n                break;\n            }\n        }\n    }\n}\n\ntemplate&lt;typename iterator&gt;\niterator partition_and_find_smallest_duplicate(iterator begin, iterator end)\n{\n    using std::swap;\n    if (begin == end)\n        return end; // empty sequence\n\n    // The range begin,end is split in four partitions:\n    // 1. equal to the pivot\n    // 2. smaller than the pivot\n    // 3. unclassified\n    // 4. greater than the pivot\n\n    // pick pivot (TODO: randomize pivot?)\n    iterator pivot = begin;\n    iterator first = next(begin);\n    iterator last = end;\n\n    while (first != last) {\n        if (*first &gt; *pivot) {\n            --last;\n            swap(*first, *last);\n        } else if (*first &lt; *pivot) {\n            ++first;\n        } else {\n            ++pivot;\n            swap(*pivot, *first);\n            ++first;\n        }\n    }\n\n    // look for duplicates in the elements smaller than the pivot\n    auto res = partition_and_find_smallest_duplicate(next(pivot), first);\n    if (res != first)\n        return res;\n\n    // if we have more than just one equal to the pivot, it is the smallest duplicate\n    if (pivot != begin)\n        return pivot;\n\n    // neither, look for duplicates in the elements greater than the pivot\n    return partition_and_find_smallest_duplicate(last, end);\n}\n\ntemplate&lt;typename container&gt;\nvoid remove_smallest_duplicate(container&amp; c)\n{\n    using std::swap;\n    auto it = partition_and_find_smallest_duplicate(c.begin(), c.end());\n    if (it != c.end())\n    {\n        swap(*it, c.back());\n        c.pop_back();\n    }\n}\n\nint  main()\n{\n    const int MaxArraySize = 5000000;\n    const int minArraySize = 5;\n    const int numberOfTests = 3;\n\n    //std::ofstream file;\n    //file.open(\"test.txt\");\n    std::mt19937 generator;\n\n    for (int t = minArraySize; t &lt;= MaxArraySize; t *= 10)\n    {\n        const int range = 3*t/2;\n        std::uniform_int_distribution&lt;int&gt; distribution(0,range);\n\n        std::cout &lt;&lt; \"Array size = \" &lt;&lt; t &lt;&lt; \"  range = \" &lt;&lt; range &lt;&lt; '\\n';\n\n        std::chrono::duration&lt;double&gt; avg{},avg2{}, avg3{}, avg4{};\n        for (int n = 0; n &lt; numberOfTests; n++)\n        {\n            std::vector&lt;int&gt; save_vec;\n            save_vec.reserve(t);\n            for (int i = 0; i &lt; t; i++){//por kardan array ba anasor random\n                save_vec.push_back(distribution(generator));\n            }\n            //method1\n            auto vec = save_vec;\n            auto start = std::chrono::steady_clock::now();\n            erase_using_hashTable(vec);\n            auto end = std::chrono::steady_clock::now();\n            avg += end - start;\n            auto answer1 = vec;\n            std::sort(answer1.begin(), answer1.end());\n\n            //method2\n            vec = save_vec;\n            start = std::chrono::steady_clock::now();\n            eraseSmallestNonunique(vec);\n            end = std::chrono::steady_clock::now();\n            avg2 += end - start;\n            auto answer2 = vec;\n            std::sort(answer2.begin(), answer2.end());\n            assert(answer2 == answer1);\n\n            //method3\n            vec = save_vec;\n            start = std::chrono::steady_clock::now();\n            removeSmallestNonunique(vec);\n            end = std::chrono::steady_clock::now();\n            avg3 += end - start;\n            auto answer3 = vec;\n            std::sort(answer3.begin(), answer3.end());\n            assert(answer3 == answer2);\n\n            //method4\n            vec = save_vec;\n            start = std::chrono::steady_clock::now();\n            remove_smallest_duplicate(vec);\n            end = std::chrono::steady_clock::now();\n            avg4 += end - start;\n            auto answer4 = vec;\n            std::sort(answer4.begin(), answer4.end());\n            assert(answer4 == answer3);\n        }\n        //file &lt;&lt; avg/numberOfTests &lt;&lt;\" \"&lt;&lt;avg2/numberOfTests&lt;&lt;'\\n';\n        //file &lt;&lt; \"__\\n\";\n        std::cout &lt;&lt;   \"Method1 : \" &lt;&lt; (avg  / numberOfTests).count() &lt;&lt; 's'\n                  &lt;&lt; \"\\nMethod2 : \" &lt;&lt; (avg2 / numberOfTests).count() &lt;&lt; 's'\n                  &lt;&lt; \"\\nMethod3 : \" &lt;&lt; (avg3 / numberOfTests).count() &lt;&lt; 's'\n                  &lt;&lt; \"\\nMethod4 : \" &lt;&lt; (avg4 / numberOfTests).count() &lt;&lt; 's'\n                  &lt;&lt; \"\\n\\n\";\n    }\n\n}\n</code></pre>\n\n<p>And here are my results:</p>\n\n<pre><code>Array size = 5  range = 7\nMethod1 : 8.61967e-06s\nMethod2 : 1.49667e-07s\nMethod3 : 2.69e-07s\nMethod4 : 2.47667e-07s\n\nArray size = 50  range = 75\nMethod1 : 2.0749e-05s\nMethod2 : 1.404e-06s\nMethod3 : 9.23e-07s\nMethod4 : 8.37e-07s\n\nArray size = 500  range = 750\nMethod1 : 0.000163868s\nMethod2 : 1.6899e-05s\nMethod3 : 4.39767e-06s\nMethod4 : 3.78733e-06s\n\nArray size = 5000  range = 7500\nMethod1 : 0.00124788s\nMethod2 : 0.000258637s\nMethod3 : 3.32683e-05s\nMethod4 : 4.70797e-05s\n\nArray size = 50000  range = 75000\nMethod1 : 0.0131954s\nMethod2 : 0.00344415s\nMethod3 : 0.000346838s\nMethod4 : 0.000183092s\n\nArray size = 500000  range = 750000\nMethod1 : 0.25375s\nMethod2 : 0.0400779s\nMethod3 : 0.00331022s\nMethod4 : 0.00343761s\n\nArray size = 5000000  range = 7500000\nMethod1 : 3.82532s\nMethod2 : 0.466848s\nMethod3 : 0.0426554s\nMethod4 : 0.0278986s\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>I've updated results above with <a href=\"https://stackoverflow.com/a/30899020/576911\">Ulrich Eckhardt's algorithm</a>. His algorithm is <em>quite</em> competitive.  Nice job Ulrich!</p>\n\n<p>I should warn the readers of this answer that Ulrich's algorithm is vulnerable to the \"quick-sort O(N^2) problem\" wherein for specific inputs the algorithm can degenerate badly.  The general algorithm is fixable, and Ulrich is obviously aware of the vulnerability as evidenced by this comment:</p>\n\n<pre><code>// pick pivot (TODO: randomize pivot?)\n</code></pre>\n\n<p>That is one defense against the O(N^2) problem, and there are others, such as detecting unreasonable recursion/iteration and switching to another algorithm mid-stream (such as Method 3 or Method 2).  As written Method 4 is badly impacted when given an in-order sequence, and is disastrous when given a reverse-order sequence.  On my platform Method 3 is also sub-optimal to Method 2 for these cases, though not nearly as bad as Method 4.</p>\n\n<p>Finding the ideal technique for combating the O(N^2) problem for quick-sort-like algorithms is somewhat of a black-art, but well worth the time.  I would definitely consider Method 4 as a valuable tool in the toolbox.</p>\n"}, {"tags": [], "owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "is_accepted": false, "score": 6, "last_activity_date": 1434747088, "last_edit_date": 1434747088, "creation_date": 1434564156, "answer_id": 30899020, "question_id": 30897099, "link": "https://stackoverflow.com/questions/30897099/remove-smallest-non-unique-value-from-vector/30899020#30899020", "title": "Remove smallest non-unique value from vector", "body": "<p>Firstly, concerning the task of removing the element, the hardest thing is to find it, but actually removing it is easy (swap with the last element and then <code>pop_back()</code>). I'll therefore only address the finding. Also, you mention that sorting the sequence is acceptable, but I take from that that not just sorting but any kind of reordering is acceptable.</p>\n\n<p>Take a look at the quicksort algorithm. It picks a random element and then partitions the sequence to the left and right. If you write the partitioning so that you make a distinction between not just \"less\" and \"not less\", you can partially sort the sequence and locate the smallest duplicate on the run.</p>\n\n<p>Following steps should do the job:</p>\n\n<ul>\n<li>First, pick a random pivot and partition the sequence. At the same time, you can detect detect whether the pivot is a duplicate or not. Note that if you find a duplicate here, you can discard(!) anything greater, so you don't even have to invest into storage capacity and bandwidth for both partitions.</li>\n<li>Then, recurse to the sequence of smaller elements.</li>\n<li>If there was a set of duplicates in the smaller partition, those are your solution.</li>\n<li>If the first pivot had duplicates, that is your solution.</li>\n<li>Else, recurse to the larger elements looking for duplicates.</li>\n</ul>\n\n<p>The advantage over regular sorting is that you don't sort the whole sequence if you find duplicates in the lower numbers. On a sequence of unique numbers, you will fully sort them though. Compared with the suggested counting of elements using a hashmap, this indeed has a higher asymptotic complexity. Whether it performs better depends on your implementation and input data though.</p>\n\n<p>Note that this requires that that the elements can be sorted and compared. You mention that you use <code>double</code> values, which are notoriously bad to sort when you have NaNs in there. I could imagine that the hashing algorithms in the standard containers work with NaNs though, so one more point for counting with a hash map.</p>\n\n<p>The following code implements above algorithm. It uses one recursive function to partition the input and to find duplicates, called from a second function that then finally removes the duplicate:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename iterator&gt;\niterator partition_and_find_smallest_duplicate(iterator begin, iterator end)\n{\n    using std::swap;\n\n    std::cout &lt;&lt; \"find_duplicate(\";\n    for (iterator it=begin; it!=end; ++it)\n        std::cout &lt;&lt; *it &lt;&lt; \", \";\n    std::cout &lt;&lt; \")\\n\";\n    if (begin == end)\n        return end; // empty sequence\n\n    // The range begin,end is split in four partitions:\n    // 1. equal to the pivot\n    // 2. smaller than the pivot\n    // 3. unclassified\n    // 4. greater than the pivot\n\n    // pick pivot (TODO: randomize pivot?)\n    iterator pivot = begin;\n    std::cout &lt;&lt; \"picking pivot: \" &lt;&lt; *pivot &lt;&lt; '\\n';\n\n    iterator first = next(begin);\n    iterator last = end;\n\n    while (first != last) {\n        if (*first &gt; *pivot) {\n            --last;\n            swap(*first, *last);\n        } else if (*first &lt; *pivot) {\n            ++first;\n        } else {\n            ++pivot;\n            swap(*pivot, *first);\n            ++first;\n            std::cout &lt;&lt; \"found duplicate of pivot\\n\";\n        }\n    }\n\n    // look for duplicates in the elements smaller than the pivot\n    auto res = partition_and_find_smallest_duplicate(next(pivot), first);\n    if (res != first)\n        return res;\n\n    // if we have more than just one equal to the pivot, it is the smallest duplicate\n    if (pivot != begin)\n        return pivot;\n\n    // neither, look for duplicates in the elements greater than the pivot\n    return partition_and_find_smallest_duplicate(last, end);\n}\n\ntemplate&lt;typename container&gt;\nvoid remove_smallest_duplicate(container&amp; c)\n{\n    using std::swap;\n    auto it = partition_and_find_smallest_duplicate(c.begin(), c.end());\n    if (it != c.end())\n    {\n        std::cout &lt;&lt; \"removing duplicate: \" &lt;&lt; *it &lt;&lt; std::endl;\n\n        // swap with the last last element before popping\n        // to avoid copying the elements in between\n        swap(*it, c.back());\n        c.pop_back();\n    }\n}\n\nint main()\n{\n    std::vector&lt;int&gt; data = {66, 3, 11, 7, 75, 62, 62, 52, 9, 24, 58, 72, 37, 2, 9, 28, 15, 58, 3, 60, 2, 14};\n\n    remove_smallest_duplicate(data);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1434813831, "post_id": 30953112, "comment_id": 49944115, "body": "Nice analysis.  It would be interesting to see Ulrich&#39;s approach compared above."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1434821392, "post_id": 30953112, "comment_id": 49946612, "body": "@HowardHinnant Thanks! Just noticed his interesting solution. Will add it to the bench tomorrow."}], "tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": true, "score": 4, "last_activity_date": 1435152025, "last_edit_date": 1435152025, "creation_date": 1434797355, "answer_id": 30953112, "question_id": 30897099, "link": "https://stackoverflow.com/questions/30897099/remove-smallest-non-unique-value-from-vector/30953112#30953112", "title": "Remove smallest non-unique value from vector", "body": "<p>(Am adding an additional answer, since 1) the focus of the first answer was using ready STL components, and 2) Howard Hinnant raised some interesting points since.)</p>\n\n<p>Thanks to Howard Hinnant for the principle of benchmarking the different approaches (as well as a very unique solution)! It has led to some stuff I personally find interesting (and don't entirely understand). </p>\n\n<p>The execution of the benchmark, however, was somewhat problematic, IMHO. </p>\n\n<p>The question stated that the problem was </p>\n\n<blockquote>\n  <p>... objects with a double member which is used in this case ... It is important to do it efficiently since the code is used in the bottleneck of the program</p>\n</blockquote>\n\n<p>The test, however:</p>\n\n<ul>\n<li><p>Performed the operation on <code>int</code>s, which is an advantage for the sorting-based mechanism; while both <code>double</code> comparisons and hashes are more expensive than <code>int</code>s', the number of comparisons is <em>Theta(n log(n))</em>, while the number of hashes is <em>O(n)</em>.</p></li>\n<li><p>Took the body of my <code>main</code> function, and wrapped it up in a function (rather than a class object), and did not use a pool allocator. Frankly, I consider this a flaw that renders the results meaningless, as it basically established the well known fact that dynamic allocations + needless re-initializations of large containers, are expensive.</p></li>\n<li><p>Relied on the fact that the sorting algorithms could just return the <code>vector</code> on which they operated (which could not be done for the original problem). In the following I let this point slide, as the problem for a <code>vector</code> of <code>double</code>s is interesting in itself, but the OP should note that this might change things even more.</p></li>\n</ul>\n\n<hr>\n\n<p>So, in order to deal with the second issue, I initially used the probing-based hash-table from my own <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/ext/pb_ds/\" rel=\"nofollow noreferrer\">gcc libstdc++ <code>pb_ds</code> extension</a>. This by itself reduced the running time of solution #1 below that of solution #2 (<code>sort</code> + <code>adjacent_find</code>), but it still remained more expensive than #3 (<code>make_heap</code>). </p>\n\n<p>In order to reduce this further, I used the most degenerate form of \"hash table\" that seemed relevant. </p>\n\n<pre><code>template&lt;typename T, class Hash=std::hash&lt;T&gt;&gt;\nclass smallest_dup_remover\n{\npublic:\n    explicit smallest_dup_remover(std::size_t max_size) \n    {\n        while(m_mask &lt; max_size)\n            m_mask *= 2;\n\n        m_status.resize(m_mask);\n        m_vals.resize(m_mask);\n\n        --m_mask;\n    }\n\n    void operator()(std::vector&lt;T&gt; &amp;vals)\n    {\n        std::fill(std::begin(m_status), std::end(m_status), 0);\n        bool has = false;\n        T min_;\n        std::vector&lt;T&gt; spillover;\n        spillover.reserve(vals.size());\n        for(auto v: vals)\n        {\n            const std::size_t pos = m_hash(v) &amp; m_mask;\n            char &amp;status = m_status[pos];\n            switch(status)\n            {\n            case 0:\n                status = 1;\n                m_vals[pos] = v;\n                break;\n            case 1:\n                if(m_vals[pos] == v)\n                {\n                    status = 2;\n                    min_ = has? std::min(min_, v): v;\n                    has = true;\n                }\n                else\n                    spillover.push_back(v);\n                break;\n            case 2:\n               if(m_vals[pos] != v)\n                    spillover.push_back(v);\n            }\n        }\n        std::sort(std::begin(spillover), std::end(spillover));\n        auto it = std::adjacent_find(std::begin(spillover), std::end(spillover));\n        if(has &amp;&amp; it == std::end(spillover))\n            remove_min(vals, min_);\n        else if(has &amp;&amp; it != std::end(spillover))\n            remove_min(vals, std::min(min_, *it));\n        else if(!has &amp;&amp; it != std::end(spillover))\n            remove_min(vals, *it);\n    }\n\nprivate:\n    void remove_min(std::vector&lt;T&gt; &amp;vals, T t)\n    {\n        vals.erase(std::find(vals.begin(), vals.end(), t)); \n    }\n\nprivate:\n    size_t m_mask = 1;\n    std::vector&lt;char&gt; m_status;\n    std::vector&lt;T&gt; m_vals;\n    Hash m_hash;\n};\n</code></pre>\n\n<p>The data structure contains three <code>vector</code>s:</p>\n\n<ul>\n<li><p>a \"status\" <code>vector</code>, containing codes for 0, 1, and \"many\"</p></li>\n<li><p>a \"values\" <code>vector</code>, containing \"hashed values\"</p></li>\n<li><p>a \"spillover\" vector, for collisions</p></li>\n</ul>\n\n<p>Objects with a \"many\" status are compared on the fly for the minimal. Collision objects (that is, those that have collided with other objects) are pushed to the \"spillover\" <code>vector</code>. The spillover <code>vector</code> is scrutinized for the lowest duplicate using the method from #2. This is compared to the lowest found value from the \"many\" values.</p>\n\n<hr>\n\n<p><a href=\"https://gist.github.com/atavory/97d94485e48e80b54123\" rel=\"nofollow noreferrer\">Here</a> is the code for a benchmark that retests this benchmark, and <a href=\"http://nbviewer.ipython.org/gist/atavory/903134f3c81ceb922169\" rel=\"nofollow noreferrer\">here</a> is the code producing the following graphs.</p>\n\n<p>(<strong>Reminder</strong> #1 is hash-based, #2 is quicksort-based, and #3 is heap-based.)</p>\n\n<p>Starting with the test performed by Howard Hinnant before (values are generated randomly from a range of size 1.5 the length of the values), here are the results:</p>\n\n<p><img src=\"https://i.stack.imgur.com/b9Dcx.png\" alt=\"enter image description here\"> </p>\n\n<p>So indeed his excellent heap-based algorithm performs best for this case, but it looks very different than before. In particular, the hash-based algorithm is not as abysmal when profiling its memory allocations.</p>\n\n<p>However, suppose we change range to a completely random range. Then the results change to this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/YjmUE.png\" alt=\"enter image description here\"></p>\n\n<p>In this case, the hash-based solution works best, the sort-based one next, and the heap-based solution works worst.</p>\n\n<p>In order to verify the reason, here are two more tests.</p>\n\n<p>Here is a test with completely random values + two zero values (that is, the lowest duplicate is zero):</p>\n\n<p><img src=\"https://i.stack.imgur.com/zzp7G.png\" alt=\"enter image description here\"> </p>\n\n<p>and finally, here is the case where all the values are generated from 100 possible value (irrespective of the length):</p>\n\n<p><img src=\"https://i.stack.imgur.com/GI6Ge.png\" alt=\"enter image description here\"></p>\n\n<p>What's happening is as follows. The heap-based solution is the most dependent of the three on the distribution. The MakeHeap algorithm is linear time, and if a duplicate is almost immediately encountered following that, it turned out to be a linear algorithm (but without any hashing). Conversely, taking the other extreme, there are no duplicates at all. Essentially, this algorithm then becomes <a href=\"https://en.wikipedia.org/?title=Heapsort\" rel=\"nofollow noreferrer\">heapsort</a>. The inferiority of heapsort to quicksort is both understood theoretically as well as much verified in practice.</p>\n\n<p>So, the heap-based algorithm is actually a surprising and nice algorithm. It does have high variance though, and it might be a consideration for avoiding it in practice.</p>\n\n<hr>\n\n<p>Some observations:</p>\n\n<ul>\n<li><p>The graphs don't seem to make sense: where is the <em>n log(n)</em> behavior, at least for solution #2?</p></li>\n<li><p>Why does the Hinnant test work so similarly to the random + lower repeated tests? With a 1.5 X range, and given the fact that this is very similar to <a href=\"https://en.wikipedia.org/wiki/Sampling_%28statistics%29\" rel=\"nofollow noreferrer\">Bootstrap Resampling</a>, with the known ~37% repetition result, I just don't see it.</p></li>\n<li><p>As Howard Hinnant noted, it really depends on the distribution. However, the situation is very far from the previous benchmark.</p></li>\n<li><p>Some practical points:</p>\n\n<ul>\n<li><p>OP, you might want to re-time this for your original problem, using the true distributions and the overhead of twice-copying your original vector of structs to+from the sorting solutions.</p></li>\n<li><p>I've thought much about how to parallelize this problem, without anything interesting. One way to do so (possibly raising more questions than answers) is run Howard Hinnant's solution on one thread, a different one on another, and use the first result found. Given that it is so much faster for some distributions, and so much slower for others, it might cover your bases.</p></li>\n</ul></li>\n</ul>\n"}], "owner": {"reputation": 976, "user_id": 2548655, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/929PX.jpg?s=128&g=1", "display_name": "Michiel uit het Broek", "link": "https://stackoverflow.com/users/2548655/michiel-uit-het-broek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 4, "accepted_answer_id": 30953112, "answer_count": 5, "score": 4, "last_activity_date": 1435152025, "creation_date": 1434557956, "last_edit_date": 1434558334, "question_id": 30897099, "link": "https://stackoverflow.com/questions/30897099/remove-smallest-non-unique-value-from-vector", "title": "Remove smallest non-unique value from vector", "body": "<p>I have an unsorted vector of doubles (Actually objects with a double member which is used in this case). From this vector I need to remove the smallest non-unique value. However, it is not guaranteed that a non-unique value exists. It is allowed to sort the range.</p>\n\n<p>As always I started with looking for an std::algorithm and found std::unique. In my first idea I would use this in combination with std::sort to move all non-unique values to the end of the vector and then use min_element over the non-unique values. However, std::unique will leave the non-unique values at the end in an unspecified state. And indeed I lost all non POD members.</p>\n\n<p>Does anyone have a suggestion how to do this efficiently? It is important to do it efficiently since the code is used in the bottleneck of the program (which is already a bit too slow).</p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1434557956, "post_id": 30897072, "comment_id": 49833191, "body": "It seems like you&#39;re looking to find unique/distinct elements? Also, what do you mean by &quot;rows&quot;? You have one-dimensional arrays here..."}, {"owner": {"reputation": 425, "user_id": 2166252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgqrP.jpg?s=128&g=1", "display_name": "Kyle Booth", "link": "https://stackoverflow.com/users/2166252/kyle-booth"}, "reply_to_user": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1434557987, "post_id": 30897072, "comment_id": 49833222, "body": "Updated to represent 2d vector."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1434558666, "post_id": 30897072, "comment_id": 49833687, "body": "Are the input vectors sorted? Is it OK for the output vectors to be sorted if the input vectors are not sorted?"}, {"owner": {"reputation": 425, "user_id": 2166252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgqrP.jpg?s=128&g=1", "display_name": "Kyle Booth", "link": "https://stackoverflow.com/users/2166252/kyle-booth"}, "edited": false, "score": 0, "creation_date": 1434558727, "post_id": 30897072, "comment_id": 49833725, "body": "Sorting can be used wherever and whenever required. Ordering of values is not important, so long as they end up in the required rows."}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1434559719, "post_id": 30897072, "comment_id": 49834398, "body": "This doesnt make sense. why does <code>4</code> end up on the first row?"}, {"owner": {"reputation": 425, "user_id": 2166252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgqrP.jpg?s=128&g=1", "display_name": "Kyle Booth", "link": "https://stackoverflow.com/users/2166252/kyle-booth"}, "edited": false, "score": 0, "creation_date": 1434560117, "post_id": 30897072, "comment_id": 49834671, "body": "Because row 2 has elements in common with row 1. I am looking to combine rows with any common elements such that the remaining rows in B are completely unique."}], "answers": [{"comments": [{"owner": {"reputation": 425, "user_id": 2166252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgqrP.jpg?s=128&g=1", "display_name": "Kyle Booth", "link": "https://stackoverflow.com/users/2166252/kyle-booth"}, "edited": false, "score": 0, "creation_date": 1434567995, "post_id": 30899805, "comment_id": 49839424, "body": "Thanks for taking the time to develop this. I&#39;ll test it out once I get home and let you know how it goes. Appreciate it!"}, {"owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "reply_to_user": {"reputation": 425, "user_id": 2166252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgqrP.jpg?s=128&g=1", "display_name": "Kyle Booth", "link": "https://stackoverflow.com/users/2166252/kyle-booth"}, "edited": false, "score": 0, "creation_date": 1434569975, "post_id": 30899805, "comment_id": 49840643, "body": "@KyleBooth It worked for so I hope it will be good for you too."}], "tags": [], "owner": {"reputation": 2559, "user_id": 4789375, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/LRyDO.png?s=128&g=1", "display_name": "p.i.g.", "link": "https://stackoverflow.com/users/4789375/p-i-g"}, "is_accepted": true, "score": 0, "last_activity_date": 1434566519, "creation_date": 1434566519, "answer_id": 30899805, "question_id": 30897072, "link": "https://stackoverflow.com/questions/30897072/vector-merge-algorithm-c/30899805#30899805", "title": "Vector Merge Algorithm C++", "body": "<p>Try this, it worked for me with your example matrix. It looks like a lot of code, but there are functions just for the example and for debugging purpose.</p>\n\n<pre><code>void disp( const std::vector&lt; int &gt;&amp; a )\n{\n    for ( const auto item : a )\n    {\n        std::cout &lt;&lt; item;\n    }\n    std::cout &lt;&lt; \"\\n\";\n}\n\nvoid disp( const std::vector&lt; std::vector&lt; int &gt; &gt;&amp; matrix )\n{\n    for ( const auto&amp; row : matrix )\n    {\n        disp( row );\n    }\n}\n\n// I think there shall be some easier way for this.\nbool hasCommonElements( const std::vector&lt; int &gt;&amp; aVector1, const std::vector&lt; int &gt;&amp; aVector2 )\n{\n    for ( const auto item1 : aVector1 )\n    {\n        for ( const auto item2 : aVector2 )\n        {\n            if ( item1 == item2 )\n            {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\nvoid makeAllElementsUnique( std::vector&lt; int &gt;&amp; aRow )\n{\n    std::sort( aRow.begin(), aRow.end() );\n    aRow.erase( std::unique( aRow.begin(), aRow.end() ), aRow.end() );\n}\n\nvoid mergeRowsWithCommonValues( std::vector&lt; std::vector&lt; int &gt; &gt;&amp; aMatrix )\n{\n    for ( auto it = aMatrix.begin(); it != aMatrix.end(); ++it )\n    {\n        auto it2 = it + 1;\n        while ( it2 != aMatrix.end() )\n        {\n            if ( hasCommonElements( *it, *it2 ) )\n            {\n                (*it).insert( (*it).end(), (*it2).begin(), (*it2).end() ); // Merge the rows with the common value(s).\n                makeAllElementsUnique( (*it) );\n\n                it2 = aMatrix.erase( it2 ); // Remove the merged row.\n            }\n            else\n            {\n                ++it2;\n            }\n        }\n    }\n}\n\nvoid example()\n{\n    std::vector&lt; std::vector&lt; int &gt; &gt; matrix;\n\n    matrix.push_back( { 1, 2, 3 } );\n    matrix.push_back( { 2, 3, 4 } );\n    matrix.push_back( { 5, 6 } );\n\n    disp( matrix );\n    mergeRowsWithCommonValues( matrix );\n    disp( matrix );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1434612569, "post_id": 30899841, "comment_id": 49855909, "body": "you will gain vastly in clarity, simplicity by implementing 2 methods : <code>std::vector union(std::vector a, std::vector b)</code>, <code>std::vector  intersection(std::vector a, std::vector b)</code>. Bonus for using the stl build in function to implement those."}, {"owner": {"reputation": 425, "user_id": 2166252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgqrP.jpg?s=128&g=1", "display_name": "Kyle Booth", "link": "https://stackoverflow.com/users/2166252/kyle-booth"}, "reply_to_user": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1434668980, "post_id": 30899841, "comment_id": 49891092, "body": "@UmNyobe Dang. Just looked these up and they&#39;re really nice. Will definitely try implement them. Thanks!"}], "tags": [], "owner": {"reputation": 425, "user_id": 2166252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgqrP.jpg?s=128&g=1", "display_name": "Kyle Booth", "link": "https://stackoverflow.com/users/2166252/kyle-booth"}, "is_accepted": false, "score": 0, "last_activity_date": 1434566645, "creation_date": 1434566645, "answer_id": 30899841, "question_id": 30897072, "link": "https://stackoverflow.com/questions/30897072/vector-merge-algorithm-c/30899841#30899841", "title": "Vector Merge Algorithm C++", "body": "<p>Here is my own attempt, kinda messy, I know.</p>\n\n<pre><code>    int index2 = 0;\n    int rowIndex = 0;\n    int tracker = 0;\n    int insert = 0;\n    // Loop over all rows\n    while (index2 &lt; A.size()){\n        // Check if vector is empty. If so, copy the first row in.\n        if (B.empty()){\n            B.push_back(A[index2]);\n            index2++;\n            cout&lt;&lt;\"Hit an empty.\\n\";\n        }\n        // If vector not empty, do the complicated stuff.\n        else if (!B.empty()){\n            for (int i = 0; i &lt; A[index2].size(); i++){ // element in A\n                for (int j = 0; j &lt; B.size(); j++){ // row in B\n                    for (int k = 0; k &lt; B[j].size(); k++){ // element in row in B\n                        if (A[index2][i] == B[j][k]){\n                            rowIndex = j;\n                            tracker = 1;\n                        }\n                    }\n                }\n            }\n            // If tracker activated, we know there's a common element.\n            if (tracker == 1){\n            cout&lt;&lt;\"Hit a positive tracker.\\n\";\n                for (int i = 0; i &lt; A[index2].size(); i++){ // element in A \n                    for (int j = 0; j &lt; B[rowIndex].size(); j++){ // element in B at rowIndex\n                        if (A[index2][i] != B[rowIndex][j])\n                            insert++;\n                            cout&lt;&lt;\"Hit an insert increment.\\n\";\n                    }\n                    if (insert == B[rowIndex].size()){\n                        cout&lt;&lt;\"Hit an insert.\\n\";\n                        B[rowIndex].push_back(A[index2][i]);\n                        }\n                    insert = 0;\n                }   \n            index2++;\n            }else{\n                B.push_back(A[index2]);\n                index2++;\n                cout&lt;&lt;\"Hit a zero tracker.\\n\";\n            }\n        }       \n    tracker = 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 425, "user_id": 2166252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgqrP.jpg?s=128&g=1", "display_name": "Kyle Booth", "link": "https://stackoverflow.com/users/2166252/kyle-booth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 30899805, "answer_count": 2, "score": 0, "last_activity_date": 1434566645, "creation_date": 1434557859, "last_edit_date": 1434558600, "question_id": 30897072, "link": "https://stackoverflow.com/questions/30897072/vector-merge-algorithm-c", "title": "Vector Merge Algorithm C++", "body": "<p>Having a hard time designing an efficient algorithm that accomplishes the following. If I start with a 2d vector A,</p>\n\n<pre><code>A = [1 2 3;\n     2 3 4;\n     5 6]\n</code></pre>\n\n<p>I want to take the rows that contain common elements and combine them (removing duplicates) resulting in 2d vector B:</p>\n\n<pre><code>B = [1 2 3 4;\n     5 6] \n</code></pre>\n\n<p>I can accomplish this in Matlab, but am having a hard time in C++. Any help is appreciated.</p>\n"}, {"tags": ["c++", "openssl", "jwt", "json-web-token"], "answers": [{"tags": [], "owner": {"reputation": 2332, "user_id": 365696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BryrB.png?s=128&g=1", "display_name": "Halt", "link": "https://stackoverflow.com/users/365696/halt"}, "is_accepted": true, "score": 8, "last_activity_date": 1451261561, "creation_date": 1451261561, "answer_id": 34486236, "question_id": 30897028, "link": "https://stackoverflow.com/questions/30897028/jwt-json-web-token-in-c-using-boost-and-openssl-bug/34486236#34486236", "title": "JWT (JSON Web Token) in C++ using boost and openssl bug", "body": "<p>OpenSSL inserts a newline character after each 64\u2019th character, you can disable this by using:</p>\n\n<pre><code>BIO_set_flags(b64, BIO_FLAGS_BASE64_NO_NL);\n</code></pre>\n\n<p>See <a href=\"https://www.openssl.org/docs/manmaster/crypto/BIO_f_base64.html\" rel=\"noreferrer\">the documentation</a> here.</p>\n\n<p>While testing your code I also found the following 2 problems:</p>\n\n<p>1) You skip the last character of the buffer when making it URL-safe. You should remove the - 1.</p>\n\n<pre><code>for(unsigned int i = 0; i &lt; bptr-&gt;length ; i++)\n</code></pre>\n\n<p>2) When making the Base64 output URL-safe you need to replace '+' with '-' and '/' with '_'. your code had that the other way around. So:</p>\n\n<pre><code>case '+':\n    ss &lt;&lt; '-';\n    break;\ncase '/':\n    ss &lt;&lt; '_';\n    break;\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 5020446, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-l6fxx5-Vnjs/AAAAAAAAAAI/AAAAAAAAAFU/OYPwPfxcrNk/photo.jpg?sz=128", "display_name": "Matt Sainz", "link": "https://stackoverflow.com/users/5020446/matt-sainz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4691, "favorite_count": 4, "accepted_answer_id": 34486236, "answer_count": 1, "score": 8, "last_activity_date": 1451261561, "creation_date": 1434557750, "last_edit_date": 1434566797, "question_id": 30897028, "link": "https://stackoverflow.com/questions/30897028/jwt-json-web-token-in-c-using-boost-and-openssl-bug", "title": "JWT (JSON Web Token) in C++ using boost and openssl bug", "body": "<p>I am a fairly novice c++ programmer (I'm still in college so I suppose I'm a fairly novice programmer in general) and I am trying to generate a JWT in c++. I am able to generate and encode a header and payload, but the signature I generate using openssl's hmac library seems to be invalid when I check it on jwt.io. I have a feeling this is due to some nuanced mistake I'm just not seeing. If you can find my bug I'll greatly appreciate it. If you also have suggestions for how to improve my code in general that would also be appreciated. Note I have to use openssl and boost for json.</p>\n\n<p>****UPDATE****</p>\n\n<p>I discovered that extra new lines were being added and this caused errors during authentication. Currently I am calling str.erase to remove them but if someone could let me know where they are coming I would appreciate it so I can avoid having to manipulate the string</p>\n\n<hr>\n\n<pre><code>char* Auth::genJWT()\n{\n    ptree pt;\n    std::stringstream jwt;\n\n    //Make and encode header\n    pt.put(\"typ\",\"JWT\");\n    pt.put(\"alg\",\"HS256\");\n    std::ostringstream buf;\n    write_json(buf, pt, false);\n    std::string header = buf.str();\n    jwt &lt;&lt;  base64_encode((unsigned char*)header.c_str(), (int) header.length());\n\n    //clear buffer\n    pt.clear();\n    buf.clear();\n    buf.str(\"\");\n\n    //make pay load\n    pt.put(\"org_guid\", Config::organization_guid);\n    pt.put(\"agent_guid\", Config::agent_guid);\n    write_json(buf, pt, false);\n    std::string payload = buf.str();\n    jwt &lt;&lt; '.' &lt;&lt;  base64_encode((unsigned char*)payload.c_str(), (int) payload.length());\n\n    //sign data\n    std::string signed_data = signToken(jwt.str());\n    jwt &lt;&lt; '.' &lt;&lt;  base64_encode((unsigned char*) signed_data.c_str(), (int) signed_data.length());\n\n    //jwt made\n    std::cout &lt;&lt; \"JWT Token: \" &lt;&lt; jwt.str() &lt;&lt; std::endl;\n\n    //Note I am testing by copying the token into an online debugger \n    //returning \"\" is not my bug \n    return \"\";\n}\n</code></pre>\n\n<p>This is the method I use sign the token</p>\n\n<pre><code>std::string Auth::signToken(std::string to_sign)\n{\n    //std::string key = Config::secret;\n    std::string key = \"foo\";\n\n    unsigned int len = 32;\n    unsigned char signed_data[32];\n\n    HMAC_CTX ctx;\n    HMAC_CTX_init(&amp;ctx);\n\n    HMAC_Init_ex(&amp;ctx, &amp;key[0], (int) key.length(), EVP_sha256(), NULL);\n    HMAC_Update(&amp;ctx, (unsigned char*)&amp;to_sign[0], to_sign.length());\n    HMAC_Final(&amp;ctx, signed_data, &amp;len);\n    HMAC_CTX_cleanup(&amp;ctx);\n\n    std::stringstream ss;\n    ss &lt;&lt; std::setfill('0');\n\n    for(unsigned int i = 0; i &lt; len; i++)\n    {\n        ss &lt;&lt; signed_data[i];\n    }\n\n    return (ss.str());\n}\n</code></pre>\n\n<p>This is how I encode the data in base64Url </p>\n\n<pre><code>std::string Auth::base64_encode(const unsigned char* input, int length)\n{\n    BIO *bmem, *b64;\n    BUF_MEM *bptr;\n\n    b64 = BIO_new(BIO_f_base64());\n    bmem = BIO_new(BIO_s_mem());\n    b64 = BIO_push(b64, bmem);\n    BIO_write(b64, input, length);\n    BIO_flush(b64);\n    BIO_get_mem_ptr(b64, &amp;bptr);\n\n    std::stringstream ss;\n\n    //make URL safe\n    for(unsigned int i = 0; i &lt; bptr-&gt;length - 1; i++)\n    {\n        switch(bptr-&gt;data[i])\n        {\n            case '+':\n                ss &lt;&lt; '_';\n                break;\n            case '/':\n                ss &lt;&lt; '-';\n                break;\n            case '=':\n                //don't add in padding\n                break;\n            default:\n                ss &lt;&lt; bptr-&gt;data[i];\n                break;\n        }\n    }\n\n    BIO_free_all(b64);\n    return (ss.str());\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "casting", "nested"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1434557847, "post_id": 30896984, "comment_id": 49833115, "body": "Does it work? What is wrong ..."}, {"owner": {"reputation": 171, "user_id": 4955004, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ef1e5e16e88056aa07c240d1d228ec1a?s=128&d=identicon&r=PG", "display_name": "dylan", "link": "https://stackoverflow.com/users/4955004/dylan"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1434558142, "post_id": 30896984, "comment_id": 49833327, "body": "Sorry, I will post a better example in a minute."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1434558163, "post_id": 30896984, "comment_id": 49833346, "body": "Does your basic premise even make sense when <code>e</code> and <code>q</code> have the <i>same</i> type?"}, {"owner": {"reputation": 171, "user_id": 4955004, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ef1e5e16e88056aa07c240d1d228ec1a?s=128&d=identicon&r=PG", "display_name": "dylan", "link": "https://stackoverflow.com/users/4955004/dylan"}, "edited": false, "score": 0, "creation_date": 1434558310, "post_id": 30896984, "comment_id": 49833440, "body": "Yes I have defined operators for them.  The code I am about to post will hopefully better explain."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 4955004, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ef1e5e16e88056aa07c240d1d228ec1a?s=128&d=identicon&r=PG", "display_name": "dylan", "link": "https://stackoverflow.com/users/4955004/dylan"}, "edited": false, "score": 0, "creation_date": 1434568745, "post_id": 30898501, "comment_id": 49839883, "body": "Thanks this is exactly what I was looking for.  So I can use +=."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": true, "score": 1, "last_activity_date": 1434566177, "last_edit_date": 1434566177, "creation_date": 1434562408, "answer_id": 30898501, "question_id": 30896984, "link": "https://stackoverflow.com/questions/30896984/defining-a-vector-cast-template-function-that-works-with-a-variable-amount-of/30898501#30898501", "title": "Defining a &quot;vector_cast&quot; template function that works with a variable amount of nested vectors", "body": "<p>With vector type detection you might do:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n// is_vector\n// =========\n\nnamespace Detail {\n    template&lt;typename T&gt;\n    struct is_vector_test {\n        static constexpr bool value = false;\n    };\n\n\n    template&lt;typename ... Types&gt;\n    struct is_vector_test&lt;std::vector&lt;Types...&gt;&gt; {\n        static constexpr bool value = true;\n    };\n}\n\ntemplate&lt;typename T&gt;\nstruct is_vector : Detail::is_vector_test&lt;typename std::decay&lt;T&gt;::type&gt;\n{};\n\n// vector_cast\n// ===========\n\nnamespace Detail\n{\n    template &lt;typename R, typename U, bool = is_vector&lt;U&gt;::value&gt;\n    struct vector_cast_implementation;\n\n    // Elementary\n    template &lt;typename R, typename T&gt;\n    struct vector_cast_implementation&lt;R, T, false&gt;\n    {\n        typedef T value_type;\n        typedef R result_type;\n        static result_type apply(const value_type&amp; value){\n            // Simple Conversion\n            return value;\n        }\n    };\n\n    // Vectors\n    template &lt;typename R, typename U&gt;\n    struct vector_cast_implementation&lt;R, std::vector&lt;U&gt;, true&gt;\n    {\n        private:\n        typedef vector_cast_implementation&lt;R, U&gt; base_cast;\n\n        public:\n        typedef std::vector&lt;typename base_cast::value_type&gt; value_type;\n        typedef std::vector&lt;typename base_cast::result_type&gt; result_type;\n        static result_type apply(const value_type&amp; value){\n            result_type result;\n            result.reserve(value.size());\n            for(const auto&amp; element : value)\n                result.push_back(base_cast::apply(element));\n            return result;\n        }\n    };\n}\n\ntemplate &lt;typename R, typename T&gt;\ntypename Detail::vector_cast_implementation&lt;R, std::vector&lt;T&gt;&gt;::result_type\nvector_cast(const std::vector&lt;T&gt;&amp; sequence){\n    return Detail::vector_cast_implementation&lt;R, std::vector&lt;T&gt;&gt;::apply(sequence);\n}\n\n// test\n// ====\n\nint main() {\n    std::vector&lt;std::vector&lt;std::vector&lt;double&gt;&gt;&gt; v3 = {\n        {{ 0.0 , 0.1, 0.2 },\n         { 1.0 , 1.1, 1.2 },\n         { 2.0 , 2.1, 2.2 }},\n\n        {{ 10.0 , 10.1, 10.2 },\n         { 11.0 , 11.1, 11.2 },\n         { 12.0 , 12.1, 12.2 }},\n    };\n\n    auto r3 = vector_cast&lt;int&gt;(v3);\n    for(const std::vector&lt;std::vector&lt;int&gt;&gt;&amp; r2 : r3) {\n        for(const std::vector&lt;int&gt;&amp; r1 : r2) {\n            for(int e : r1)\n                std::cout &lt;&lt; e &lt;&lt; \" \";\n        }\n        std::cout &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>To determine a common type R for a binary vector operation you might do:</p>\n\n<pre><code>// vector_common_type\n// ==================\n\nnamespace Detail\n{\n    template &lt;typename U,typename V, bool = is_vector&lt;U&gt;::value, bool = is_vector&lt;V&gt;::value&gt;\n    struct vector_common_type_implementation;\n\n    // Elementary\n    template &lt;typename U, typename V&gt;\n    struct vector_common_type_implementation&lt;U, V, false, false&gt;\n    {\n        typedef typename std::common_type&lt;U, V&gt;::type type;\n    };\n\n    // Vectors\n    template &lt;typename U, typename V&gt;\n    struct vector_common_type_implementation&lt;std::vector&lt;U&gt;, std::vector&lt;V&gt;, true, true&gt;\n    {\n        typedef typename vector_common_type_implementation&lt;U, V&gt;::type type;\n    };\n}\n\ntemplate &lt;typename U, typename V&gt;\nstruct vector_common_type;\n\ntemplate &lt;typename U, typename V&gt;\nstruct vector_common_type&lt;std::vector&lt;U&gt;, std::vector&lt;V&gt;&gt;\n: public Detail::vector_common_type_implementation&lt;std::vector&lt;U&gt;, std::vector&lt;V&gt;&gt;\n{};\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 4955004, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ef1e5e16e88056aa07c240d1d228ec1a?s=128&d=identicon&r=PG", "display_name": "dylan", "link": "https://stackoverflow.com/users/4955004/dylan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 30898501, "answer_count": 1, "score": 1, "last_activity_date": 1434566177, "creation_date": 1434557613, "last_edit_date": 1434562455, "question_id": 30896984, "link": "https://stackoverflow.com/questions/30896984/defining-a-vector-cast-template-function-that-works-with-a-variable-amount-of", "title": "Defining a &quot;vector_cast&quot; template function that works with a variable amount of nested vectors", "body": "<p>I want to be able to do something like this for example.</p>\n\n<pre><code>    std::vector&lt;std::vector&lt;int&gt;&gt;     e = {{ 1 },{ 2 }};\n    std::vector&lt;std::vector&lt;double&gt;&gt;  q = {{1.5},{2.5}};\n\n    q = vector_cast&lt;double&gt;(e);\n</code></pre>\n\n<p>But also have vector_cast be able to handle any number of nested vectors.</p>\n\n<p>Here is my attempt at this.  The code works if you comment out the line that is labled does not work.  The problem is I need help implementing the vector_cast function.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;type_traits&gt;\n\n\n//Prints nested vectors\ntemplate&lt;typename T1&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; stream, std::vector&lt;T1&gt; r){\n    if(r.size() == 0){\n        return stream;\n    }\n    else{\n        stream &lt;&lt; \"(\";\n        for(int i = 0; i &lt; r.size(); i++){\n            if(i &lt; (r.size() - 1)){\n                stream &lt;&lt; r[i] &lt;&lt; \", \";\n            }\n            else{\n                stream &lt;&lt; r[i] &lt;&lt; \")\";\n            }\n        }\n    }\n    return stream;\n};\n\n//Adds nested vectors\ntemplate &lt;typename T1, typename T2&gt;\nstruct vector_common_type : std::common_type&lt;T1, T2&gt; { };\n\ntemplate &lt;typename T1, typename T2&gt;\nstruct vector_common_type&lt;std::vector&lt;T1&gt;, std::vector&lt;T2&gt;&gt; {\n    using type = std::vector&lt;typename vector_common_type&lt;T1,T2&gt;::type&gt;;\n};\n\ntemplate &lt;typename T1, typename T2,\n          typename R = std::vector&lt;typename vector_common_type&lt;T1,T2&gt;::type&gt;&gt;\nR operator+(const std::vector&lt;T1&gt;&amp; l, const std::vector&lt;T2&gt;&amp; r)\n{\n    R ans;\n    std::transform(l.begin(),\n                   l.begin() + std::min(l.size(), r.size()),\n                   r.begin(),\n                   std::back_inserter(ans),\n                   [](const T1&amp; lhs, const T2&amp; rhs){ return lhs + rhs; });\n    return ans;\n}\n\n//supposed to cast nested vectors\ntemplate &lt;typename T1, typename T2&gt;\nstruct vector_casting : std::condition&lt;true,T1, T2&gt; { };\n\ntemplate &lt;typename T1, typename T2&gt;\nstruct vector_casting&lt;std::vector&lt;T1&gt;, std::vector&lt;T2&gt;&gt; {\n    using type = std::vector&lt;typename vector_casting&lt;T1,T2&gt;::type&gt;;\n};\n\ntemplate &lt;typename T1, typename T2,\n          typename R = std::vector&lt;typename vector_casting&lt;std::vector&lt;T1&gt;,T2&gt;::type&gt;&gt;\nR vector_cast(const std::vector&lt;T2&gt;&amp; r){\n    R l(r.begin(),r.end());\n    return l;\n};\n\nint main(){\n    std::vector&lt;std::vector&lt;int&gt;&gt; e = {{ 1 },{ 1 }};\n    std::vector&lt;std::vector&lt;double&gt;&gt; q = {{1.5},{2.5}};\n\n    //This works\n    q = q + q;\n\n    //This does not work\n    q = e;//&lt;- needs cast, but my vector_cast does not work\n\n    std::cout &lt;&lt; q &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1400995"}, "edited": false, "score": 2, "creation_date": 1434557480, "post_id": 30896878, "comment_id": 49832854, "body": "better use a smart pointer for memory management"}, {"owner": {"reputation": 83, "user_id": 4545481, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/418e881af947c7c0615f368ddcfa77b6?s=128&d=identicon&r=PG&f=1", "display_name": "rittik", "link": "https://stackoverflow.com/users/4545481/rittik"}, "edited": false, "score": 0, "creation_date": 1434557638, "post_id": 30896878, "comment_id": 49832966, "body": "@FatGiant I am just asking this for some knowledge. What happens if I do this ?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1434557714, "post_id": 30896878, "comment_id": 49833029, "body": "We really need to know more about what you&#39;re trying to do tbh."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 2, "creation_date": 1434557766, "post_id": 30896878, "comment_id": 49833063, "body": "This makes no sense. Why would you do this? Is there a problem you&#39;re trying to solve?"}], "answers": [{"tags": [], "owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "is_accepted": false, "score": 3, "last_activity_date": 1434557920, "last_edit_date": 1434557920, "creation_date": 1434557557, "answer_id": 30896963, "question_id": 30896878, "link": "https://stackoverflow.com/questions/30896878/what-happens-if-we-create-objects-within-a-loop/30896963#30896963", "title": "What happens if we create objects within a loop?", "body": "<p>Memory leaks.</p>\n\n<p>First iteration a <code>bar</code> object will be created and allocated the memory its needed. The next iteration (and all) the previous reference of <code>bar</code> will be lost and a new memory reference will be allocated. So you can not find the previously created <code>bar</code>.</p>\n\n<p>As all of the previous reference of <code>bar</code> is lost, you cannot <code>delete</code> or <code>free</code> those memory and hence, <a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow\">Memory Leak</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "edited": false, "score": 0, "creation_date": 1434560048, "post_id": 30896973, "comment_id": 49834620, "body": "Memory leaks can still happen with smart pointers, if exceptions are thrown before memory has been freed"}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 3, "last_activity_date": 1434559022, "last_edit_date": 1495542190, "creation_date": 1434557580, "answer_id": 30896973, "question_id": 30896878, "link": "https://stackoverflow.com/questions/30896878/what-happens-if-we-create-objects-within-a-loop/30896973#30896973", "title": "What happens if we create objects within a loop?", "body": "<blockquote>\n  <p>What happens if we create objects within a loop [like this]?</p>\n</blockquote>\n\n<p>Memory leaks.</p>\n\n<p>There's no way to delete them if <code>bar</code> goes out of scope (as it does, at the end of the loop body).</p>\n\n<blockquote>\n  <p>how to delete them?</p>\n</blockquote>\n\n<p>You need the address of the objects to be able to delete them. If you need to delete them outside the loop, you have to store their addresses outside the loop:</p>\n\n<pre><code>std::vector&lt;Foo*&gt; fooPointers;\nfooPointers.reserve(iterations);\n\nfor (int i = 0; i &lt; iterations; i++)\n{\n    Foo* bar = new Foo(i);\n    fooPointers.push_back(bar);\n}\n\nfor (Foo* p : fooPointers)\n{\n    delete p;\n}\n</code></pre>\n\n<p><strong>A better solution</strong> however, would be (as mentioned by @<a href=\"https://stackoverflow.com/users/1400995/fatgiant\">FatGiant</a>) to use <strong>smart pointers</strong> instead of dumb pointers to automagically prevent any memory leaks:</p>\n\n<pre><code>std::vector&lt;std::unique_ptr&lt;Foo&gt;&gt; fooPointers;\nfooPointers.reserve(iterations);\n\nfor (int i = 0; i &lt; iterations; i++)\n{\n    fooPointers.push_back(std::unique_ptr&lt;Foo&gt;(new Foo(i)));\n    Foo&amp; bar = *fooPointers.back();\n}\n\nfooPointers.clear(); // calls delete on all Foos, note that this step is optional\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 4545481, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/418e881af947c7c0615f368ddcfa77b6?s=128&d=identicon&r=PG&f=1", "display_name": "rittik", "link": "https://stackoverflow.com/users/4545481/rittik"}, "edited": false, "score": 0, "creation_date": 1434558071, "post_id": 30897022, "comment_id": 49833281, "body": "Wow that was really helpful. By the way, what happens if I do not delete objects at the end of each iteration ?"}, {"owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "edited": false, "score": 0, "creation_date": 1434558418, "post_id": 30897022, "comment_id": 49833520, "body": "You leak memory if you don&#39;t delete them."}], "tags": [], "owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "is_accepted": true, "score": 5, "last_activity_date": 1434557730, "creation_date": 1434557730, "answer_id": 30897022, "question_id": 30896878, "link": "https://stackoverflow.com/questions/30896878/what-happens-if-we-create-objects-within-a-loop/30897022#30897022", "title": "What happens if we create objects within a loop?", "body": "<p>The way you wrote, you are creating a new object on the free store (the heap) at every iteration. You may want either to destroy the object at the end of the loop:</p>\n\n<pre><code>for (int i = 0; i &lt; iterations; i++)\n{\n    Foo* bar = new Foo(i); //here Foo(i) is a parameterized constructor\n    // do stuff...\n    delete bar;\n}\n</code></pre>\n\n<p>or collect pointers in a container and destroy it later:</p>\n\n<pre><code>std::vector&lt;Foo*&gt; v;\nfor (int i = 0; i &lt; iterations; i++)\n{\n    Foo* bar = new Foo(i); //here Foo(i) is a parameterized constructor\n    v.push_back(bar);\n}\n// do stuff...\nfor(size_t i = 0; i &lt; v.size(); ++i)\n{\n    delete v[i];\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4545481, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/418e881af947c7c0615f368ddcfa77b6?s=128&d=identicon&r=PG&f=1", "display_name": "rittik", "link": "https://stackoverflow.com/users/4545481/rittik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 30897022, "answer_count": 3, "score": 4, "last_activity_date": 1434559022, "creation_date": 1434557312, "question_id": 30896878, "link": "https://stackoverflow.com/questions/30896878/what-happens-if-we-create-objects-within-a-loop", "title": "What happens if we create objects within a loop?", "body": "<p>My question is, \"What happens if we create objects within a loop?\"</p>\n\n<p>Example:</p>\n\n<pre><code>    for (int i = 0; i &lt; iterations; i++)\n    {\n        Foo* bar = new Foo(i); //here Foo(i) is a parameterized constructor\n    }\n</code></pre>\n\n<p>and how to delete them?</p>\n"}, {"tags": ["c++", "json", "rapidjson"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1434604927, "post_id": 30896857, "comment_id": 49852034, "body": "If <code>document[&quot;itemn&quot;]</code> retrieves an element of the whole structure, then <code>document[&quot;itemn&quot;][&quot;innerNestedItem1&quot;]</code> should give you the content of the nested item within. Your approach to first format the content of <code>*itr</code> to a string and then to try to retrieve elements from that nonstructured data is wrong, it would be easier to keep the structured data."}, {"owner": {"reputation": 560, "user_id": 2924386, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1ac4b60dd46abc4fa0e47b5717cb05ef?s=128&d=identicon&r=PG&f=1", "display_name": "Ruturaj", "link": "https://stackoverflow.com/users/2924386/ruturaj"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1434632926, "post_id": 30896857, "comment_id": 49869660, "body": "@UlrichEckhardt document[&quot;itemn&quot;] contains all undefined number of outernesteditems and outernesteditem is fixed type of object."}, {"owner": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "edited": false, "score": 0, "creation_date": 1447642238, "post_id": 30896857, "comment_id": 55224864, "body": "@Ruturaj, Did you ever figure out a more elegant solution?"}, {"owner": {"reputation": 560, "user_id": 2924386, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1ac4b60dd46abc4fa0e47b5717cb05ef?s=128&d=identicon&r=PG&f=1", "display_name": "Ruturaj", "link": "https://stackoverflow.com/users/2924386/ruturaj"}, "reply_to_user": {"reputation": 673, "user_id": 280904, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/381eeb9c42bf9fa35ae9fd60ba87612c?s=128&d=identicon&r=PG&f=1", "display_name": "Stradigos", "link": "https://stackoverflow.com/users/280904/stradigos"}, "edited": false, "score": 0, "creation_date": 1447730838, "post_id": 30896857, "comment_id": 55265349, "body": "@Stradigos Nope, I did the above described thing."}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 5818430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PwyzB.jpg?s=128&g=1", "display_name": "TGafford", "link": "https://stackoverflow.com/users/5818430/tgafford"}, "is_accepted": true, "score": 9, "last_activity_date": 1453330165, "last_edit_date": 1453330165, "creation_date": 1453329596, "answer_id": 34912017, "question_id": 30896857, "link": "https://stackoverflow.com/questions/30896857/iterate-and-retrieve-nested-object-in-json-using-rapidjson/34912017#34912017", "title": "iterate and retrieve nested object in JSON using rapidjson", "body": "<p>First, let me provide credit to MiloYip at this <a href=\"https://github.com/miloyip/rapidjson/issues/336\" rel=\"noreferrer\">link</a></p>\n\n<p>Second-- here's what I did for my project:</p>\n\n<pre><code>rapidjson::Document document;\n// document holds a json document retrieved from a http GET request\n// I did not include all of that in this example.  I am only showing\n// the part of iterating through a nested object and retrieving members.\n\nstd::vector&lt;std::string&gt; symbols;\n// holds the values I retrieve from the json document\n\nif (document.Parse&lt;0&gt;( symbol.c_str() ).HasParseError() )\n    Log() &lt;&lt; \"ERROR: encountered a JSON parsing error\" &lt;&lt; std::endl;\nelse {\n    // Get the nested object that contains the elements I want.\n    // In my case, the nested object in my json document was results\n    // and the values I was after were identified as \"t\"\n    rapidjson::Value&amp; results = document[\"results\"];\n    assert(results.IsArray());\n    for (rapidjson::SizeType i = 0; i &lt; results.Size(); i++) {\n        // Store the value of the element in a vector.\n        symbols.emplace_back(results[i][\"t\"].GetString());\n}                            \n</code></pre>\n\n<p>I think this is a pretty clean/efficient approach.  </p>\n"}, {"comments": [{"owner": {"reputation": 5907, "user_id": 904542, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/42e2add6bb8528370c98ddf06be170af?s=128&d=identicon&r=PG", "display_name": "user904542", "link": "https://stackoverflow.com/users/904542/user904542"}, "edited": false, "score": 1, "creation_date": 1532621086, "post_id": 43120359, "comment_id": 90054020, "body": "I tried your solution, but: <code>Value v = document.GetObject();</code> gave me ` error: \u2018rapidjson::Document {aka class rapidjson::GenericDocument&lt;rapidjson::UTF8&lt;&gt; &gt;}\u2019 has no member named \u2018GetObject\u2019`"}], "tags": [], "owner": {"reputation": 85, "user_id": 3854412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOx3Z.jpg?s=128&g=1", "display_name": "a.raya203", "link": "https://stackoverflow.com/users/3854412/a-raya203"}, "is_accepted": false, "score": 7, "last_activity_date": 1490883033, "creation_date": 1490883033, "answer_id": 43120359, "question_id": 30896857, "link": "https://stackoverflow.com/questions/30896857/iterate-and-retrieve-nested-object-in-json-using-rapidjson/43120359#43120359", "title": "iterate and retrieve nested object in JSON using rapidjson", "body": "<p>This is something I recently worked on:</p>\n\n<pre><code>void enter(const Value &amp;obj, size_t indent = 0) { //print JSON tree\n\nif (obj.IsObject()) { //check if object\n    for (Value::ConstMemberIterator itr = obj.MemberBegin(); itr != obj.MemberEnd(); ++itr) {   //iterate through object   \n        const Value&amp; objName = obj[itr-&gt;name.GetString()]; //make object value\n\n        for (size_t i = 0; i != indent; ++i) //indent\n            cout &lt;&lt; \" \";\n\n        cout &lt;&lt; itr-&gt;name.GetString() &lt;&lt; \": \"; //key name\n\n        if (itr-&gt;value.IsNumber()) //if integer\n            std::cout &lt;&lt; itr-&gt;value.GetInt() ;\n\n        else if (itr-&gt;value.IsString()) //if string\n            std::cout &lt;&lt; itr-&gt;value.GetString();\n\n\n        else if (itr-&gt;value.IsBool()) //if bool\n            std::cout &lt;&lt; itr-&gt;value.GetBool();\n\n        else if (itr-&gt;value.IsArray()){ //if array\n\n            for (SizeType i = 0; i &lt; itr-&gt;value.Size(); i++) {\n                if (itr-&gt;value[i].IsNumber()) //if array value integer\n                    std::cout &lt;&lt; itr-&gt;value[i].GetInt() ;\n\n                else if (itr-&gt;value[i].IsString()) //if array value string\n                    std::cout &lt;&lt; itr-&gt;value[i].GetString() ;\n\n                else if (itr-&gt;value[i].IsBool()) //if array value bool\n                    std::cout &lt;&lt; itr-&gt;value[i].GetBool() ;\n\n                else if (itr-&gt;value[i].IsObject()){ //if array value object\n                    cout &lt;&lt; \"\\n  \";\n                    const Value&amp; m = itr-&gt;value[i]; \n                    for (auto&amp; v : m.GetObject()) { //iterate through array object\n                        if (m[v.name.GetString()].IsString()) //if array object value is string\n                            cout &lt;&lt; v.name.GetString() &lt;&lt; \": \" &lt;&lt;   m[v.name.GetString()].GetString();\n                        else //if array object value is integer\n                            cout &lt;&lt; v.name.GetString() &lt;&lt; \": \"  &lt;&lt;  m[v.name.GetString()].GetInt();\n\n                       cout &lt;&lt;  \"\\t\"; //indent\n                    }\n                }\n                cout &lt;&lt;  \"\\t\"; //indent\n            }\n        }\n\n        cout &lt;&lt; endl; \n        enter(objName, indent + 1); //if couldn't find in object, enter object and repeat process recursively \n        }     \n }\n }\n</code></pre>\n\n<p>This can handle any type of JSON tree. All you have to do is pass a Value as such:</p>\n\n<pre><code>Value v = document.GetObject();\nValue&amp; m= v;\nenter(m);\n</code></pre>\n\n<p>And you're done!</p>\n"}, {"tags": [], "owner": {"reputation": 9649, "user_id": 1052261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4961b82d779d8b8119c69524f1a324cc?s=128&d=identicon&r=PG", "display_name": "Dawid Drozd", "link": "https://stackoverflow.com/users/1052261/dawid-drozd"}, "is_accepted": false, "score": 3, "last_activity_date": 1506083744, "creation_date": 1506083744, "answer_id": 46364987, "question_id": 30896857, "link": "https://stackoverflow.com/questions/30896857/iterate-and-retrieve-nested-object-in-json-using-rapidjson/46364987#46364987", "title": "iterate and retrieve nested object in JSON using rapidjson", "body": "<pre><code>void parseRecursive(std::string scope\n                    , rapidjson::Value::ConstMemberIterator object\n                    , std::unordered_map&lt;std::string, std::string&gt;&amp; values)\n{\n    if (scope.empty())\n    {\n        scope = object-&gt;name.GetString();\n    }\n    else\n    {\n        scope = scope + \"::\" + object-&gt;name.GetString();\n    }\n    auto inElement = scope + \"::\";\n\n    if (object-&gt;value.IsObject())\n    {\n        for (auto it = object-&gt;value.MemberBegin(); it != object-&gt;value.MemberEnd(); ++it)\n        {\n            parseRecursive(scope, it, values);\n        }\n    }\n    else if (object-&gt;value.IsDouble())\n    {\n        values.emplace(inElement, std::to_string(object-&gt;value.GetDouble()));\n    }\n    else if (object-&gt;value.IsInt())\n    {\n        values.emplace(inElement, std::to_string(object-&gt;value.GetInt()));\n    }\n    else\n    {\n        LOGW(\"Unsuported: \" &lt;&lt; inElement &lt;&lt; object-&gt;name.GetString());\n    }\n}\n</code></pre>\n\n<p>And start with document: <code>rapidjson::Document document;</code></p>\n\n<pre><code>for (auto it = document.MemberBegin(); it != document.MemberEnd(); ++it)\n{\n    parseRecursive(\"\", it, _values);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 6936429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c50a70fd61030100fe9f6682397f0b29?s=128&d=identicon&r=PG&f=1", "display_name": "Barbara RB", "link": "https://stackoverflow.com/users/6936429/barbara-rb"}, "edited": false, "score": 0, "creation_date": 1574350641, "post_id": 46839707, "comment_id": 104210157, "body": "Thank you, I very appreciate your work. It is very useful, and elegant."}], "tags": [], "owner": {"reputation": 355, "user_id": 6155053, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/69579c124e79a647882e3780ec840697?s=128&d=identicon&r=PG&f=1", "display_name": "Johann Studanski", "link": "https://stackoverflow.com/users/6155053/johann-studanski"}, "is_accepted": false, "score": 1, "last_activity_date": 1508451428, "creation_date": 1508451428, "answer_id": 46839707, "question_id": 30896857, "link": "https://stackoverflow.com/questions/30896857/iterate-and-retrieve-nested-object-in-json-using-rapidjson/46839707#46839707", "title": "iterate and retrieve nested object in JSON using rapidjson", "body": "<p><strong>a.raya203</strong>'s post <a href=\"https://stackoverflow.com/a/43120359/6155053\">https://stackoverflow.com/a/43120359/6155053</a> didn't work for me out of the box (doesn't handle all types the current rapidjson version implements, and thus ran into errors when e.g. outputting gltfs containing doubles, etc.) but it brought me on the right track for understanding how rapidjson works for parsing a document, so I thought I'd leave my (updated) code here, maybe it helps out someone else\u2026</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass JsonNodePrinter final\n{\npublic: \n    static void PrintNode(const rapidjson::Value &amp;node, size_t indent = 0, unsigned int level = 0, const std::string&amp; nodeName = \"\")\n    {\n        std::cout &lt;&lt; GetIndentString(indent, level);\n\n        if (!nodeName.empty())\n            std::cout &lt;&lt; nodeName &lt;&lt; \": \";\n\n        if (node.IsBool())\n            std::cout &lt;&lt; node.GetBool();\n\n        else if (node.IsInt())\n            std::cout &lt;&lt; node.GetInt();\n\n        else if (node.IsUint())\n            std::cout &lt;&lt; node.GetUint();\n\n        else if (node.IsInt64())\n            std::cout &lt;&lt; node.GetInt64();\n\n        else if (node.IsUint64())\n            std::cout &lt;&lt; node.GetUint64();\n\n        else if (node.IsDouble())\n            std::cout &lt;&lt; node.GetDouble();\n\n        else if (node.IsString())\n            std::cout &lt;&lt; node.GetString();\n\n        else if (node.IsArray())\n        {\n            if (!nodeName.empty()) std::cout &lt;&lt; \"\\n\" &lt;&lt; GetIndentString(indent, level);\n            PrintArray(node, indent, level);\n        }\n\n        else if (node.IsObject())\n        {\n            if (!nodeName.empty()) std::cout &lt;&lt; \"\\n\" &lt;&lt; GetIndentString(indent, level);\n            PrintObject(node, indent, level);\n        }\n\n        std::cout &lt;&lt; \"\\n\";\n    }\n\n    static void PrintObject(const rapidjson::Value &amp;node, size_t indent = 0, unsigned int level = 0)\n    {\n        std::cout &lt;&lt; \"{\\n\";\n\n        for (rapidjson::Value::ConstMemberIterator childNode = node.MemberBegin(); childNode != node.MemberEnd(); ++childNode)\n        {\n            PrintNode(childNode-&gt;value, indent, level + 1, childNode-&gt;name.GetString());\n        }\n\n        std::cout &lt;&lt; GetIndentString(indent, level) &lt;&lt; \"}\";\n    }\n\n    static void PrintArray(const rapidjson::Value&amp; node, size_t indent = 0, unsigned int level = 0)\n    {\n        std::cout &lt;&lt; \"[\\n\";\n\n        for (rapidjson::SizeType i = 0; i &lt; node.Size(); ++i)\n        {\n            PrintNode(node[i], indent, level + 1);\n        }\n\n        std::cout &lt;&lt; GetIndentString(indent, level) &lt;&lt; \"]\";\n    }\n\n    static std::string GetIndentString(size_t indent = 0, unsigned int level = 0)\n    {\n        return std::move(std::string(level * indent, ' '));\n    }\n};\n</code></pre>\n\n<p>Use it like</p>\n\n<pre><code>#include \"3rdParty/rapidjson/document.h\"\n\nrapidjson::Document document;\n{\n    document.Parse(FileHelper::ReadString(filePath)-&gt;c_str());\n}\n\nif (!document.HasParseError())\n{\n    JsonNodePrinter::PrintNode(document, 4);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 8716917, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mqW8-2bbBlU/AAAAAAAAAAI/AAAAAAAAABo/Q8XpNgQpGpc/photo.jpg?sz=128", "display_name": "bebenlebricolo", "link": "https://stackoverflow.com/users/8716917/bebenlebricolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1523196113, "creation_date": 1523196113, "answer_id": 49718661, "question_id": 30896857, "link": "https://stackoverflow.com/questions/30896857/iterate-and-retrieve-nested-object-in-json-using-rapidjson/49718661#49718661", "title": "iterate and retrieve nested object in JSON using rapidjson", "body": "<p>I was wondering the same very recently, here is what i got :</p>\n\n<pre><code>#include \"rapidjson\\filereadstream.h\"\n#include \"rapidjson\\document.h\"\n#include \"rapidjson\\istreamwrapper.h\"\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nusing namespace rapidjson;\n\n// Documentation : using file stream instead of C FILE pointers\n// http://rapidjson.org/md_doc_stream.html#FileStreams\nifstream file_stream(filepath);\nIStreamWrapper isw(file_stream);\n\nDocument doc;\ndoc.ParseStream(isw);\nfile_stream.close();\n\nif(doc.HasMember(CONF_NODE)){\nValue *config_node = &amp;(doc[CONF_NODE]);\n// Now I can use it like so:\nstd::cout &lt;&lt; (*config_node)[\"My Other Json node\"].GetString() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I used this trick several times to avoid using unterminably long accessing request like <pre> doc[\"Node1\"][\"Node2\"][\"Node3\"]...[\"NodeX\"].GetType() </pre>\nand instead rely on pointers that could be used to virtually \"split\" the doc chain:</p>\n\n<pre>\ndoc[\"Node1\"][\"Node2\"][\"Node3\"]...[\"NodeX\"].GetType()\n                     |            |\n                 pointer1         |\n                                  pointer2\n(*pointer_on_Node_N)[\"Node N+1\"] = doc[\"Node1\"][...][\"NodeN\"][\"Node N+1]\n</pre>\n\n<p>That was particularly handy when I needed to iterate over my file (when facing arrays).</p>\n"}], "owner": {"reputation": 560, "user_id": 2924386, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1ac4b60dd46abc4fa0e47b5717cb05ef?s=128&d=identicon&r=PG&f=1", "display_name": "Ruturaj", "link": "https://stackoverflow.com/users/2924386/ruturaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28298, "favorite_count": 1, "accepted_answer_id": 34912017, "answer_count": 5, "score": 10, "last_activity_date": 1523196113, "creation_date": 1434557248, "last_edit_date": 1434575580, "question_id": 30896857, "link": "https://stackoverflow.com/questions/30896857/iterate-and-retrieve-nested-object-in-json-using-rapidjson", "title": "iterate and retrieve nested object in JSON using rapidjson", "body": "<p>I am parsing a <code>JSON</code> structure which is similar as follows</p>\n\n<pre><code>{\n    \"item1\" : \"value1\"\n    \"item2\" : \"value2\"\n    // ...\n    \"itemn\" : {\n        \"outernestedItem1\" : {\n            \"innerNestedItem1\" : \"valuen1\"\n            \"innerNestedItem2\" : \"valuen2\"\n        }\n        // ....\n        \"outernestedItemn\" : {\n            \"innerNestedItem1\" : \"valuen1\"\n            \"innerNestedItem2\" : \"valuen2\"\n        }\n    }\n}\n</code></pre>\n\n<p>The number of outer nested items is not fixed, so I was iterating using iterator from rapidjson, inner-nested objects variables are fixed, so I can get access to them using [].</p>\n\n<pre><code>const rapidjson::Value&amp; itemn = document[\"itemn\"];\nfor (rapidjson::Value::ConstMemberIterator itr = itemn.MemberBegin();\nitr != itemn.MemberEnd(); ++itr)\n{\n    rapidjson::StringBuffer sb;\n    rapidjson::Writer&lt;rapidjson::StringBuffer&gt; writer( sb );\n    itr-&gt;value.Accept(writer);\n\n    std::cout &lt;&lt; sb[\"innerNestedItem1\"].GetString();\n    std::cout &lt;&lt; sb[\"innerNestedItem2\"].GetString();\n}\n</code></pre>\n\n<p>but [] is not allowed with sb(string buffer), any idea how can I do this?</p>\n\n<p>Edit1:\nI did it in very inefficient way, but just sharing the solution, so it might help someone to come up with efficient solution.</p>\n\n<pre><code>const rapidjson::Value&amp; itemn = document[\"itemn\"];\nfor (rapidjson::Value::ConstMemberIterator itr = itemn.MemberBegin();\nitr != itemn.MemberEnd(); ++itr)\n{\n    rapidjson::StringBuffer sb;\n    rapidjson::Writer&lt;rapidjson::StringBuffer&gt; writer( sb );\n    itr-&gt;value.Accept(writer);\n\n    //changed from here onwards\n    rapidjson::Document for_outer_nested_item;\n    std::string temp = sb.GetString();\n    char buffer2[100000];\n    strcpy_s(buffer2, temp.c_str());\n    for_outer_nested_item.ParseInsitu(buffer2);\n    std::cout &lt;&lt; executive_command[\"innerNestedItem1\"].GetString() &lt;&lt; std::endl;\n    std::cout &lt;&lt; executive_command[\"innerNestedItem2\"].GetString() &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "dictionary", "iterator"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "edited": false, "score": 0, "creation_date": 1434556806, "post_id": 30896519, "comment_id": 49832370, "body": "@Pixelchemist: Right, I can&#39;t read"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1434557134, "post_id": 30896519, "comment_id": 49832587, "body": "elements in a <code>map</code> are ordered by the key.  The reason <code>element1 + 1</code> can&#39;t be used is because the iterators associated with a map are not random access iterators. You can increment them, but you can&#39;t add 1 to them."}], "answers": [{"comments": [{"owner": {"reputation": 21474, "user_id": 718379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810c6c963334e5dce573e6671d746ec?s=128&d=identicon&r=PG", "display_name": "timrau", "link": "https://stackoverflow.com/users/718379/timrau"}, "edited": false, "score": 1, "creation_date": 1434556817, "post_id": 30896594, "comment_id": 49832380, "body": "The 2nd snippet moves <code>element1</code> too, which is not intended."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 21474, "user_id": 718379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810c6c963334e5dce573e6671d746ec?s=128&d=identicon&r=PG", "display_name": "timrau", "link": "https://stackoverflow.com/users/718379/timrau"}, "edited": false, "score": 0, "creation_date": 1434557135, "post_id": 30896594, "comment_id": 49832589, "body": "@timrau it moves element1 there instead of doing that in first <code>for</code>"}, {"owner": {"reputation": 21474, "user_id": 718379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810c6c963334e5dce573e6671d746ec?s=128&d=identicon&r=PG", "display_name": "timrau", "link": "https://stackoverflow.com/users/718379/timrau"}, "edited": false, "score": 0, "creation_date": 1434557503, "post_id": 30896594, "comment_id": 49832868, "body": "But the 1st element is just skipped by both iterators"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 21474, "user_id": 718379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810c6c963334e5dce573e6671d746ec?s=128&d=identicon&r=PG", "display_name": "timrau", "link": "https://stackoverflow.com/users/718379/timrau"}, "edited": false, "score": 0, "creation_date": 1434557582, "post_id": 30896594, "comment_id": 49832922, "body": "@timrau ah you mean first iterator most probably would be used as well, you are right. Removed, thanks. I did not like that code, I felt it was not right. :)"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1434557600, "last_edit_date": 1434557600, "creation_date": 1434556536, "answer_id": 30896594, "question_id": 30896519, "link": "https://stackoverflow.com/questions/30896519/c-double-iteration-through-map/30896594#30896594", "title": "c++ : double iteration through map", "body": "<p>Simplest solution would be to skip first one:</p>\n\n<pre><code>for(auto element1 = myMap.begin() ; element1 != myMap.end() ; ++element1){\n    for(auto element2 = element1; element2 != myMap.end() ; ++element2){\n         if( element2 == element1 ) continue;\n         //my stuff\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1434556859, "post_id": 30896638, "comment_id": 49832412, "body": "<code>std::next(element1, 2)</code> cannot be used here"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1434557230, "post_id": 30896638, "comment_id": 49832665, "body": "@Slava Why?  <code>next()</code> takes a forward iterator and a map has a bidirectional iterator."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1434557259, "post_id": 30896638, "comment_id": 49832688, "body": "@Daniel because element2 will go out of bounds at the end of the first loop"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1434557292, "post_id": 30896638, "comment_id": 49832710, "body": "@Daniel: the compiler will let you use it, but you can&#39;t use it in this particular situation because when <code>element1</code> happens to refer to the last element in the map you&#39;ll get undefined behavior."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1434557339, "post_id": 30896638, "comment_id": 49832752, "body": "@MichaelBurr <code>element1</code> will never equal end as the loop is <code>element1 != myMap.end() </code>"}, {"owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1434557345, "post_id": 30896638, "comment_id": 49832757, "body": "@Slava Ohhhh that&#39;s what you mean. I thought you meant it was inapplicable here. I was just trying to tell the OP about the optional second argument, not directly related to the question. I&#39;ll clarify."}, {"owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1434557369, "post_id": 30896638, "comment_id": 49832781, "body": "@NathanOliver <code>myMap.end()</code> is the iterator <i>after</i> the end of the map."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1434557557, "post_id": 30896638, "comment_id": 49832909, "body": "never mind.  Just realized I am arguing against a point that no longer exist since the comment was edited."}, {"owner": {"reputation": 3014, "user_id": 4560470, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b9512cafbd363be4b552bddb31d3f23?s=128&d=identicon&r=PG&f=1", "display_name": "Arcyno", "link": "https://stackoverflow.com/users/4560470/arcyno"}, "edited": false, "score": 0, "creation_date": 1434615164, "post_id": 30896638, "comment_id": 49857436, "body": "I have one more question : does <code>std::next(element1)</code> modify the variable element1 or not ?"}, {"owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "reply_to_user": {"reputation": 3014, "user_id": 4560470, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b9512cafbd363be4b552bddb31d3f23?s=128&d=identicon&r=PG&f=1", "display_name": "Arcyno", "link": "https://stackoverflow.com/users/4560470/arcyno"}, "edited": false, "score": 0, "creation_date": 1434626326, "post_id": 30896638, "comment_id": 49864890, "body": "@Arcyno as you can see from the implementations, <code>element1</code> is not modified."}], "tags": [], "owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "is_accepted": true, "score": 9, "last_activity_date": 1434558240, "last_edit_date": 1434558240, "creation_date": 1434556653, "answer_id": 30896638, "question_id": 30896519, "link": "https://stackoverflow.com/questions/30896519/c-double-iteration-through-map/30896638#30896638", "title": "c++ : double iteration through map", "body": "<p>You can use <code>std::next</code> to do this:</p>\n\n<pre><code>for(auto element1 = myMap.begin() ; element1 != myMap.end() ; ++element1) {\n    for(auto element2 = std::next(element1) ; element2 != myMap.end() ; ++element2) {\n        //my stuff\n    }\n}\n</code></pre>\n\n<p>Here is some additional background information about <code>std::next</code>. <code>std::next</code> has an optional second argument which is the number of elements to follow the passed iterator. For example <code>std::next(element1, 2)</code> would return an iterator for the 2nd element after <code>element1</code>. As has been pointed out in the comments, you <strong>must</strong> be careful when using <code>std::next</code>, especially in loops.  If <code>it</code> points to the element before <code>myMap.end()</code>, then using <code>std::next(it, 2)</code> results in undefined behavior. You want to make sure that using this will never pass the end of the container.</p>\n\n<p>You can think of <code>std::next</code> as if it were implemented like this:</p>\n\n<pre><code>// If distance is negative, then i must meet the requirements of BidirectionalIterator\n// Otherwise, i must meet the requirements of ForwardIterator.\ntemplate&lt;class ForwardIterator&gt;\nForwardIterator next(ForwardInterator i, int distance) {\n    for( ; distance &lt; 0 ; ++distance) {\n        --i;\n    }\n    for( ; distance &gt; 0 ; --distance) {\n        ++i;\n    }\n\n    return i;\n}\n</code></pre>\n\n<p>Which can be equivalently implemented like this:</p>\n\n<pre><code>template&lt;class ForwardIterator&gt;\nForwardIterator next(ForwardIterator i, int distance) {\n    std::advance(i, distance);\n    return i;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "is_accepted": false, "score": 1, "last_activity_date": 1434556908, "creation_date": 1434556908, "answer_id": 30896723, "question_id": 30896519, "link": "https://stackoverflow.com/questions/30896519/c-double-iteration-through-map/30896723#30896723", "title": "c++ : double iteration through map", "body": "<p>Even if you didn't know about some of the newer C++ facilities like <code>std::next()</code> (which is a good way to solve this problem), this seems to be a rather basic problem to solve:</p>\n\n<pre><code>for(auto element1 = myMap.begin() ; element1 != myMap.end() ; ++element1){\n    auto element2 = element1;\n    ++element2;\n    for(; element2 != myMap.end() ; ++element2){\n         //my stuff\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3014, "user_id": 4560470, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b9512cafbd363be4b552bddb31d3f23?s=128&d=identicon&r=PG&f=1", "display_name": "Arcyno", "link": "https://stackoverflow.com/users/4560470/arcyno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1215, "favorite_count": 1, "accepted_answer_id": 30896638, "answer_count": 3, "score": 4, "last_activity_date": 1434558240, "creation_date": 1434556301, "question_id": 30896519, "link": "https://stackoverflow.com/questions/30896519/c-double-iteration-through-map", "title": "c++ : double iteration through map", "body": "<p>I would like to iterate through a map but the inner loop would just iterate through the upper part of the elements.\nWith a vector it would look like that : </p>\n\n<pre><code>for(auto element1 = myVector.begin() ; element1 != myVector.end() ; ++element1){\n    for(auto element2 = element1 + 1; element2 != myVector.end() ; ++element2){\n         //my stuff\n    }\n}\n</code></pre>\n\n<p>But with a map <code>element1 + 1</code> returns an error <code>no operator matches this operand</code>.. I believe it comes from the fact that the element are not ordered in a map.</p>\n\n<p>So how could I do that properly ? I am currently using this messy workaround that requires a test in each loop : </p>\n\n<pre><code>for(auto element1 = myMap.begin() ; element1 != myMap.end() ; ++element1){\n    for(auto element2 = element1; element2 != myMap.end() ; ++element2){\n         if(element-&gt;first != element2-&gt;first)\n         //my stuff\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "linker", "c++14", "template-variables"], "comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 7, "creation_date": 1434556880, "post_id": 30896500, "comment_id": 49832420, "body": "Looks like <a href=\"https://llvm.org/bugs/show_bug.cgi?id=22825\" rel=\"nofollow noreferrer\">llvm.org/bugs/show_bug.cgi?id=22825</a>"}, {"owner": {"reputation": 3624, "user_id": 823682, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IABDf.jpg?s=128&g=1", "display_name": "JKor", "link": "https://stackoverflow.com/users/823682/jkor"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1434557653, "post_id": 30896500, "comment_id": 49832979, "body": "@dyp I agree, that looks like the problem."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 2, "creation_date": 1434558099, "post_id": 30896500, "comment_id": 49833300, "body": "That&#39;s the one indeed. @dyp post an <i>answer</i> not a comment!!"}], "answers": [{"comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1434563061, "post_id": 30898703, "comment_id": 49836464, "body": "Sorry, but I don&#39;t have any more information on this bug. I might have some time later to look into the clang sources."}], "tags": [], "owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "is_accepted": true, "score": 6, "last_activity_date": 1434563033, "creation_date": 1434563033, "answer_id": 30898703, "question_id": 30896500, "link": "https://stackoverflow.com/questions/30896500/linker-error-with-variable-templates/30898703#30898703", "title": "Linker error with variable templates", "body": "<p>This is a bug in clang++ <a href=\"https://llvm.org/bugs/show_bug.cgi?id=22825\" rel=\"noreferrer\">#22825</a>. The bug report has been filed on 2015-03-06 and the bug has not yet been fixed. Richard Smith supposes this definition is incorrectly treated only as a forward-declaration.</p>\n"}], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 30898703, "answer_count": 1, "score": 11, "last_activity_date": 1434563033, "creation_date": 1434556251, "question_id": 30896500, "link": "https://stackoverflow.com/questions/30896500/linker-error-with-variable-templates", "title": "Linker error with variable templates", "body": "<p>Consider the code below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nT n;\n\nint main()\n{\n    n&lt;int&gt; = 42;\n    std::cout &lt;&lt; n&lt;int&gt; &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>It <a href=\"http://melpon.org/wandbox/permlink/StNdWNQSYnIsSGsT\">compiles and links with g++5.1</a>, and it displays <code>42</code>. However, clang++ <a href=\"http://melpon.org/wandbox/permlink/1zZoXZQ7tg2G9qMF\">fails to link it</a>:</p>\n\n<blockquote>\n  <p>undefined reference to n&lt;int&gt;</p>\n</blockquote>\n\n<p>If I initialize the template variable like</p>\n\n<pre><code>template&lt;typename T&gt; T n{};\n</code></pre>\n\n<p>then <a href=\"http://melpon.org/wandbox/permlink/KNnn2CuuNjEf6Wk1\">clang++ links it too</a>. </p>\n\n<p>Any idea what's going on? Is clang++ \"correct\" in failing to link the program? And why does it work if I initialize the template variable? </p>\n\n<p>As far as I know, template variables are just syntactic sugar for template wrappers around static members, so <code>n&lt;int&gt; = 42</code> is effectively specializing the <code>int</code> instance. IMO, the code should link.</p>\n"}, {"tags": ["c++", "c", "dll", "struct", "mql4"], "comments": [{"owner": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1434556459, "post_id": 30896372, "comment_id": 49832099, "body": "Did you try: extern __declspec(dllimport)  ?"}, {"owner": {"reputation": 99, "user_id": 4980844, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c1d66b8e7122c0b46a1c51d057fc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "MehZhure", "link": "https://stackoverflow.com/users/4980844/mehzhure"}, "reply_to_user": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1434569536, "post_id": 30896372, "comment_id": 49840375, "body": "When I enter that line of code, it gives me two error messages.  1:  &quot;this declaration has no storage class or type specifier&quot;.  2: &quot;expected a &#39;;&#39; &quot;.  That said, I did try using the extern declaration as noted in the 4th code block.  And, the code is using the __declspec(dllimport) as noted in the 3rd code block."}, {"owner": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1434574951, "post_id": 30896372, "comment_id": 49843566, "body": "I think your function should be inside a public class. So there is a way to be accesible outside on call. I don&#39;t know if you understand, but given a simple function call without even declare it as public should throws an error for no defined function call. Correct me if I am wrong. A bool, an int or whatever function you call, shoulld be make public. I think is I declare a generic int A function, it shall be called inside procedure not external (as your dll assumes). So public class, function return something. Call external class-&gt;function and see what I mean."}, {"owner": {"reputation": 99, "user_id": 4980844, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c1d66b8e7122c0b46a1c51d057fc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "MehZhure", "link": "https://stackoverflow.com/users/4980844/mehzhure"}, "reply_to_user": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1434584539, "post_id": 30896372, "comment_id": 49847081, "body": "Well, I would try what you are suggesting, but...as far as all the examples, and tests, I have seen, and performed, the code I have should work exactly as is.  Which is why I finally gave up and posted it here.  I am hoping someone will have an idea of why metatrader would refuse a perfectly acceptable dll call."}, {"owner": {"reputation": 99, "user_id": 4980844, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c1d66b8e7122c0b46a1c51d057fc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "MehZhure", "link": "https://stackoverflow.com/users/4980844/mehzhure"}, "reply_to_user": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1434584680, "post_id": 30896372, "comment_id": 49847110, "body": "And just to be clear....I have even copied the relevant code into a shell program and shell dll, for the purpose of testing, and they worked perfectly.  So, I honestly don&#39;t know why it rejects the call.  There is nothing that should interfere with it."}, {"owner": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1434613822, "post_id": 30896372, "comment_id": 49856656, "body": "Last thing comes in my mind. Link .lib to compiler or #pragma comment(lib, &quot;yourdll.lib&quot;)? Try to copy your dll in system folder? Check UAC permission?"}, {"owner": {"reputation": 99, "user_id": 4980844, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c1d66b8e7122c0b46a1c51d057fc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "MehZhure", "link": "https://stackoverflow.com/users/4980844/mehzhure"}, "reply_to_user": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1434632119, "post_id": 30896372, "comment_id": 49869010, "body": "Turned off UAC, added #pragma, etc..... no change.  It finds the dll, but still cannot find the function in the dll.  I checked the dll again with the Dependency Walker, and it still found the function exactly as It found in my original post."}], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 4980844, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c1d66b8e7122c0b46a1c51d057fc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "MehZhure", "link": "https://stackoverflow.com/users/4980844/mehzhure"}, "is_accepted": false, "score": 0, "last_activity_date": 1434662070, "creation_date": 1434662070, "answer_id": 30925937, "question_id": 30896372, "link": "https://stackoverflow.com/questions/30896372/c-and-mql4-cannot-find-function-in-dll/30925937#30925937", "title": "C++ and MQL4 Cannot find function in dll", "body": "<p>Finally!  I have come to a resolution with this issue.  The issue was, the def file became unlinked to the project.  Here is what happened.</p>\n\n<p>When starting a new dll project, VS creates a dllmain.cpp file with the main function in it.  I don't like having this extra file in the project, so I prefer to move the main function into my project.cpp file.  When I do this, I remove the dllmain.cpp file from the project.  Apparently, if you have already linked your def file before you remove the dllmain.cpp, it will unlink your def file.  I never even thought to recheck this because I knew I had already linked the def file correctly.  </p>\n\n<p>To fix the issue, all I had to do was select the project.cpp file, and go into the Project/Properties menu, and relink the def file.  Now, I can finally start debugging.....</p>\n"}], "owner": {"reputation": 99, "user_id": 4980844, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c1d66b8e7122c0b46a1c51d057fc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "MehZhure", "link": "https://stackoverflow.com/users/4980844/mehzhure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1716, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434662070, "creation_date": 1434555923, "last_edit_date": 1434563816, "question_id": 30896372, "link": "https://stackoverflow.com/questions/30896372/c-and-mql4-cannot-find-function-in-dll", "title": "C++ and MQL4 Cannot find function in dll", "body": "<p>Alright, I know everyone is thinking, \"This has already been answered several times.\"  Well, you are wrong.  This time is different.  I have tried all of those other answers.  So here is the situation.</p>\n\n<p>I am creating an indicator in Metatrader 4 (mql4 code).  I am coding a dll to do the calculations in Visual Studio 2013 in C++.<br>\nThe relevant <code>MQL4</code> <strong><code>#import</code></strong> code is:</p>\n\n<pre><code>#import  \"test.dll\"\nbool  LiveChart( BarTrack &amp;bars,\n                 Stars    &amp;points,\n                 Patterns &amp;gartleys[],\n                 Patterns &amp;bats[],\n                 Patterns &amp;butterflies[],\n                 Patterns &amp;cyphers[],\n                 BarData  &amp;rates[],\n                 Basics   &amp;basics\n                 );\n#import\n</code></pre>\n\n<p>and the call to the function in the <strong><code>OnCalculate()</code></strong> function:</p>\n\n<pre><code>     bool test = LiveChart( bars,\n                            points,\n                            gartleys,\n                            bats,\n                            butterflies,\n                            cyphers,\n                            rates,\n                            basics\n                            );\n     Print( \"test: \", test );\n</code></pre>\n\n<p>NOTE: All the passed arguments are <strong><code>struct</code></strong>-references. None of the structs contain objects, pointers, references, strings, other structs, classes, methods, or arrays.  Some of the structs are arrays, but that is entirely valid as a passed argument.  So, there are NO invalid arguments being passed.  I <strong>have verified</strong> that each <code>struct</code> passes successfully, on an individual basis.</p>\n\n<p>Now the C++ code:</p>\n\n<pre><code>#define WIN32_LEAN_AND_MEAN\n#include \"stdafx.h\"\n#include &lt;windows.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#define MT4_EXPFUNC __declspec(dllexport)\n\nMT4_EXPFUNC bool __stdcall LiveChart(const BarTrack &amp;bars, Stars &amp;points, Patterns *gartleys, Patterns *bats,\nPatterns *butterflies, Patterns *cyphers, const BarData *rates, Basics &amp;basics)\n{\n   Observatory astronomer;\n\n   return astronomer.OnCalculateLive(bars, points, gartleys, bats, butterflies, cyphers, rates, basics);\n}\n</code></pre>\n\n<p>NOTE: I have also tried:</p>\n\n<pre><code>extern \"C\"\n{\n   MT4_EXPFUNC bool __stdcall LiveChart(const BarTrack &amp;bars, Stars &amp;points, Patterns *gartleys, Patterns *bats,\nPatterns *butterflies, Patterns *cyphers, const BarData *rates, Basics &amp;basics)\n   {\n      Observatory astronomer;\n\n      return astronomer.OnCalculateLive(bars, points, gartleys, bats, butterflies, cyphers, rates, basics);\n   }\n}\n</code></pre>\n\n<p>In my def file:</p>\n\n<pre><code>LIBRARY test\n\nEXPORTS\n   LiveChart\n</code></pre>\n\n<p>I have reviewed the code with the <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow\">Dependency Walker</a> program.  It tells me the name of the function is:</p>\n\n<pre><code>bool LiveChart(struct BarTrack const &amp;,struct Stars &amp;,struct Patterns *,struct Patterns *,struct Patterns *,struct Patterns *,struct BarData const *,struct Basics &amp;)\n</code></pre>\n\n<p>As far as I understand, everything is as it should be.</p>\n\n<p><strong>My question is</strong>, </p>\n\n<ol>\n<li><p>why does <strong><kbd>metatrader</kbd></strong> still say it cannot find the\nfunction name in the dll?</p></li>\n<li><p>Have I overlooked something?</p></li>\n<li><p>Am I using the wrong type of voodoo?</p></li>\n<li><p>Are the stars not aligned properly?</p></li>\n</ol>\n\n<p>Admittedly, I am still pretty new to C++ (about a month into it), but as far as can tell, everything is kosher, and it should work.</p>\n"}, {"tags": ["javascript", "c++", "c", "emscripten"], "answers": [{"tags": [], "owner": {"reputation": 4682, "user_id": 11942268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DtFEd.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/11942268/thomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1601463258, "creation_date": 1601463258, "answer_id": 64136081, "question_id": 30896318, "link": "https://stackoverflow.com/questions/30896318/emscripten-display-an-image-in-html-file/64136081#64136081", "title": "Emscripten: Display an image in HTML file", "body": "<p>You can access it through the emscripten <a href=\"https://emscripten.org/docs/api_reference/Filesystem-API.html\" rel=\"nofollow noreferrer\">File System API</a>.</p>\n<p>Let's assume you have a function in C++ that returns the path to your generated PNG file, something like this:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>std::string processImage()\n{\n    std::string filename = &quot;my.png&quot;;\n    // open and write to your file\n    return filename;\n}\n</code></pre>\n<p>In your html, add some js to read the file, convert it to a blob and then to an object URL:</p>\n<pre class=\"lang-js prettyprint-override\"><code>const filename = Module.processImage(); // Call your C++ function\nconst blob = new Blob([FS.readFile(filename)], {'type': 'image/png'});\nconst url = URL.createObjectURL(blob);\n// You can use this url as the src attribute of an img element\n</code></pre>\n"}], "owner": {"reputation": 739, "user_id": 1018322, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/498bb8369e99a9030a0a6c2bfa852deb?s=128&d=identicon&r=PG", "display_name": "Slot", "link": "https://stackoverflow.com/users/1018322/slot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1601463258, "creation_date": 1434555800, "last_edit_date": 1434614600, "question_id": 30896318, "link": "https://stackoverflow.com/questions/30896318/emscripten-display-an-image-in-html-file", "title": "Emscripten: Display an image in HTML file", "body": "<p>I've build JS program (with emscripten) from c++ files, which generates a png file.</p>\n\n<p>This program is loaded and executed in a html file.</p>\n\n<p>Now I would like to display the created png file in this html file. But Emscripten has an emulated sandboxed filesystem, so my png file is written in this filesystem.</p>\n\n<p>How can I retreive this file to display it ?</p>\n"}, {"tags": ["c++", "android-ndk", "java-native-interface", "vtk"], "comments": [{"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1434561461, "post_id": 30896155, "comment_id": 49835478, "body": "I&#39;ve seen that it&#39;s possible to use: LOCAL_ALLOW_UNDEFINED_SYMBOLS:=true but i&#39;m not sure it will solve my problem cause everything might be ignored until runtime and then it will crash no?"}], "answers": [{"comments": [{"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1434700422, "post_id": 30929399, "comment_id": 49900900, "body": "Thanks for the answer. It did change something but now I have even more errors of undefined references somehow... Could that be linked to the order of the import? Should I update my question with the output I get (which is actually really long). Thanks again for helping me so far"}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "reply_to_user": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1434700748, "post_id": 30929399, "comment_id": 49901106, "body": "Are you using every single one of those libraries in your code? Try narrowing it down and including only the ones you need, and then post any errors you may have. And yes, the order can make a difference. Libraries that define functions should come before other libraries that use them."}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1434701012, "post_id": 30929399, "comment_id": 49901247, "body": "Ok thanks for the advice. My problem is that currently I still don&#39;t know what I will be using and to be honest, the vtk library is big that you never really know what you have to include. Even in their makefiles for desktop they actually include everything. I&#39;ll try and see what could be the best order for the includes. I definitely thinks it&#39;s the order because now the undefined references come from the vtk files directly. A little extra question, does the order matter for <code>LOCAL_STATIC_LIBRARIES</code>, <code>LOCAL_MODULE</code>, <code>LOCAL_SRC_FILES</code> or the 3 of them?"}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "reply_to_user": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1434701212, "post_id": 30929399, "comment_id": 49901348, "body": "I don&#39;t think the order matters, but usually the order is LOCAL_MODULE then LOCAL_SRC_FILES then LOCAL_STATIC_LIBRARIES. It&#39;s natural to have the source files first and then the libraries you are linking against because you are compiling first and then linking second."}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1434701284, "post_id": 30929399, "comment_id": 49901375, "body": "Oh actually my question was not really clear, does the order of the &quot;includes&quot;of files matter for the three of them or just for the <code>LOCAL_SRC_FILE</code>"}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "reply_to_user": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1434701471, "post_id": 30929399, "comment_id": 49901461, "body": "It can matter for <code>LOCAL_STATIC_LIBRARIES</code>, it shouldn&#39;t matter for <code>LOCAL_SRC_FILES</code> or <code>LOCAL_MODULE</code>. Another thing: I&#39;m not familiar with VTK but you should check whether you need to use extern &quot;C&quot; when including the headers."}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1434701536, "post_id": 30929399, "comment_id": 49901494, "body": "Alright thanks for the advice. I&#39;ll come back to you after I&#39;ve tried a few things :)"}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1434704470, "post_id": 30929399, "comment_id": 49903179, "body": "It is failing again for some reasons. See my edited question. I have corrected the order somehow and I guess it is better now but the output I get is not understandable for me. I mean it should be defined because it was definitely defined 2 lines above."}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "reply_to_user": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1434705229, "post_id": 30929399, "comment_id": 49903658, "body": "The header <i>declares</i> GetOutputPort(int) with an int argument, and <i>defines</i> GetOutputPort() with no argument, which calls GetOutputPort(int). So you still need to link against the version that takes an int. According to <a href=\"http://public.kitware.com/pipermail/vtkusers/2011-May/067629.html\" rel=\"nofollow noreferrer\">this</a> it&#39;s in the filtering lib, but you seem to have already included all of them...try moving them up the list I guess"}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1434705611, "post_id": 30929399, "comment_id": 49903874, "body": "But the version that takes an int may be defined in the cpp file no? I am kinda lost here I have to admit"}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "reply_to_user": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1434705764, "post_id": 30929399, "comment_id": 49903977, "body": "Yes, and the cpp file will have been compiled into an object file that is inside one of the static libs (.a files) you are trying to link against."}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "reply_to_user": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1434706227, "post_id": 30929399, "comment_id": 49904279, "body": "Check inside VTK/build4/CMakeExternals/Install/vtk-android/lib to see if there are any .a files in there that you aren&#39;t linking against"}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1434706606, "post_id": 30929399, "comment_id": 49904544, "body": "They&#39;re all included so I&#39;m really amazed it doesn&#39;t work. But you&#39;re right the order does change the number of errors. Still this error out the GetOutputPort is bugging me"}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1435046558, "post_id": 30929399, "comment_id": 50022803, "body": "still no idea how to solve that, if you have any other suggestions, I&#39;d be willing to give it a try :)"}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "reply_to_user": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1435047541, "post_id": 30929399, "comment_id": 50023426, "body": "try adding -lm -landroid to your LOCAL_LDLIBS. That might fix some of the android_native_app_glue errors. Then try adding -lstdc++"}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1435048492, "post_id": 30929399, "comment_id": 50024036, "body": "indeed it does, now I &quot;just&quot; need to understand what is causing these 200 undefined reference errors ^^"}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1435148853, "post_id": 30929399, "comment_id": 50077653, "body": "Still no answer to that problem. From posts on the VTK mailing list it may be a problem due to VTK itself but I am quite unsure it is."}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "reply_to_user": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1435149372, "post_id": 30929399, "comment_id": 50078035, "body": "What revision of VTK are you using? According to <a href=\"http://www.kitware.com/blog/home/post/860\" rel=\"nofollow noreferrer\">this blog post</a> there is a bug that will stop VTK versions prior to v6.2.0.rc1 from building successfully. Read the comments especially."}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1435149805, "post_id": 30929399, "comment_id": 50078328, "body": "I am using a latter revision I guess because I was the one to report this bug to the Kitware team (and Tim Thirion especially). When using a prior version building was always a failure while now I have a built vtk for android but I simply cannot use it because of the errors mentioned above"}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "reply_to_user": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1435150218, "post_id": 30929399, "comment_id": 50078620, "body": "Oh right, I just noticed your name in the comments!"}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1435150659, "post_id": 30929399, "comment_id": 50078953, "body": "Maybe I&#39;ll have to start a bounty on that question because it seems I won&#39;t get an answer soon otherwise, but well don&#39;t want to lose all the rep I got so far. Will wait again a little."}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1435151149, "post_id": 30929399, "comment_id": 50079313, "body": "Thanks a lot. Don&#39;t worry you have helped enough so far and I know you&#39;ve tried your best. If you have any idea feel free to post again here. I will let you know whenever I find something that can solve this issue"}, {"owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "edited": false, "score": 0, "creation_date": 1435661868, "post_id": 30929399, "comment_id": 50283334, "body": "Apparently I&#39;ve found an answer to my problem. Not sure though but now the native code is build by idk-build at least."}], "tags": [], "owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "is_accepted": false, "score": 1, "last_activity_date": 1434684100, "creation_date": 1434684100, "answer_id": 30929399, "question_id": 30896155, "link": "https://stackoverflow.com/questions/30896155/android-ndk-undefined-reference/30929399#30929399", "title": "Android NDK: undefined reference", "body": "<p>Add your prebuilt static libraries to your <code>LOCAL_STATIC_LIBRARIES</code> list:</p>\n\n<pre><code>LOCAL_STATIC_LIBRARIES := cpufeatures android_native_app_glue ndk_helper \\\n    libvtkalglib-6.3 \\\n    libvtkCommonColor-6.3 \\\n    libvtkCommonComputationalGeometry-6.3 \\\n    libvtkCommonCore-6.3 \\\n    libvtkCommonMath-6.3 \\\n    libvtkCommonMisc-6.3 \\\n    libvtkCommonSystem-6.3 \\\n    libvtkCommonTransforms-6.3 \\\n    libvtkDICOMParser-6.3 \\\n    libvtkexpat-6.3 \\\n    libvtkFiltersCore-6.3 \\\n    libvtkFiltersExtraction-6.3 \\\n    libvtkFiltersGeneral-6.3 \\\n    libvtkFiltersGeometry-6.3 \\\n    libvtkFiltersModeling-6.3 \\\n    libvtkFiltersSources-6.3 \\\n    libvtkFiltersStatistics-6.3 \\\n    libvtkglew-6.3 \\\n    libvtkImagingCore-6.3 \\\n    libvtkImagingFourier-6.3 \\\n    libvtkImagingHybrid-6.3 \\\n    libvtkInfovisCore-6.3 \\\n    libvtkInteractionStyle-6.3 \\\n    libvtkIOCore-6.3 \\\n    libvtkIOGeometry-6.3 \\\n    libvtkIOImage-6.3 \\\n    libvtkIOInfovis-6.3 \\\n    libvtkIOLegacy-6.3 \\\n    libvtkIOPLY-6.3 \\\n    libvtkIOXML-6.3 \\\n    libvtkIOXMLParser-6.3 \\\n    libvtkjpeg-6.3 \\\n    libvtkjsoncpp-6.3 \\\n    libvtklibxml2-6.3 \\\n    libvtkmetaio-6.3 \\\n    libvtkParallelCore-6.3 \\\n    libvtkpng-6.3 \\\n    libvtkRenderingCore-6.3 \\\n    libvtkRenderingOpenGL2-6.3 \\\n    libvtksys-6.3 \\\n    libvtktiff-6.3 \\\n    libvtkzlib-6.3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "is_accepted": true, "score": 0, "last_activity_date": 1435661835, "creation_date": 1435661835, "answer_id": 31136383, "question_id": 30896155, "link": "https://stackoverflow.com/questions/30896155/android-ndk-undefined-reference/31136383#31136383", "title": "Android NDK: undefined reference", "body": "<p>It would seem that this Android.mk just did the job. I also post the Application.mk just in case, it may help others too.</p>\n\n<p>It seems that I was not linking correctly. The way we did simply does not work while I do not get any errors when using the following files.</p>\n\n<p>Android.mk:</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\n\ninclude $(CLEAR_VARS)\n\nLOCAL_MODULE := ndk1\n\n# Recursive wildcard in pure make, no external commands required\n# From: http://stackoverflow.com/a/12959764\nrwildcard=$(wildcard $1$2) $(foreach d,$(wildcard $1*),$(call rwildcard,$d/,$2))\n\n# Recursively find all *.cpp files under LOCAL_PATH\nLOCAL_SRC_FILES := $(subst $(LOCAL_PATH)/,,$(call rwildcard,$(LOCAL_PATH),*.cpp))\n\n# Compiler flags\n# LOCAL_CFLAGS += -Ofast -Wall -Wextra -pedantic -Wno-unused-parameter -DNDEBUG\nLOCAL_CFLAGS += -Ofast -Wall -Wextra -pedantic -Wno-unused-parameter -UNDEBUG\n# LOCAL_CFLAGS += -O0 -g -Wall -Wextra -pedantic -Wno-unused-parameter\n\n# (optional) Silence warnings in the NDK headers\nLOCAL_CFLAGS += -isystem ${NDK_ROOT}/platforms/$(TARGET_PLATFORM)/arch-arm/usr/include\n\n# Enable NEON instructions\nLOCAL_ARM_NEON := true\n\n# Use the more efficient 32-bit instructions, at the expense\n# of a larger code size\nLOCAL_ARM_MODE := arm\n\n# Logging library (__android_log_* functions)\nLOCAL_LDLIBS += -llog\n\n# OpenGL ES 2.0\nLOCAL_LDLIBS += -lGLESv2\n# LOCAL_CFLAGS += -DGL_GLEXT_PROTOTYPES\n\nLOCAL_LDFLAGS += -L /Users/lonnibesancon/Desktop/VTK/buildandroid2/CMakeExternals/Build/vtk-android/lib/\n\n# NOTE: the link order is important!\nLOCAL_LDFLAGS += -lvtkIOXML-6.3 -lvtkIOLegacy-6.3 -lvtkIOPLY-6.3 -lvtkIOGeometry-6.3 -lvtkFiltersModeling-6.3 -lvtkImagingCore-6.3 -lvtkRenderingCore-6.3 -lvtkIOImage-6.3 -lvtkDICOMParser-6.3 -lvtkmetaio-6.3 -lvtkpng-6.3 -lvtktiff-6.3 -lvtkjpeg-6.3 -lvtkFiltersSources-6.3 -lvtkFiltersGeometry-6.3 -lvtkIOXMLParser-6.3 -lvtkIOCore-6.3 -lvtkexpat-6.3 -lvtkFiltersExtraction-6.3 -lvtkFiltersGeneral-6.3 -lvtkFiltersCore-6.3 -lvtkCommonExecutionModel-6.3 -lvtkCommonComputationalGeometry-6.3 -lvtkCommonDataModel-6.3 -lvtkCommonMisc-6.3 -lvtkCommonTransforms-6.3 -lvtkCommonSystem-6.3 -lvtkCommonMath-6.3 -lvtkCommonCore-6.3 -lvtksys-6.3 -lvtkzlib-6.3\n#notfound : -lvtkRenderingFreeType-6.3\n\n# Use -isystem to silence warnings in the VES headers\n#LOCAL_CFLAGS += -isystem $(LOCAL_PATH)/../../thirdparty/VES/Apps/Android/CMakeBuild/build/CMakeExternals/Install/eigen\n#LOCAL_CFLAGS += -isystem $(LOCAL_PATH)/../../thirdparty/VES/Apps/Android/CMakeBuild/build/CMakeExternals/Install/vtk-android/include/vtk-6.3/\n\n# LOCAL_C_INCLUDES += ${NDK_ROOT}/sources/cxx-stl/gnu-libstdc++/4.6/include\n# LOCAL_C_INCLUDES += ${NDK_ROOT}/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/include\n\n#LOCAL_SHARED_LIBRARIES := artoolkit\n# LOCAL_SHARED_LIBRARIES := artoolkitplus\n\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<p>Application.mk:</p>\n\n<pre><code>APP_ABI := armeabi-v7a \nAPP_STL := gnustl_shared\nGCC_ENABLE_CPP_RTTI := YES\n# Set target Android API level to the application's minimum SDK version.\n\nAPP_PLATFORM := android-14\n</code></pre>\n\n<p>It builds just fine even though I still get some warnings about the android version and the shared librairies.</p>\n"}], "owner": {"reputation": 3017, "user_id": 1820086, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uyBPp.png?s=128&g=1", "display_name": "LBes", "link": "https://stackoverflow.com/users/1820086/lbes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1950, "favorite_count": 0, "accepted_answer_id": 31136383, "answer_count": 2, "score": 1, "last_activity_date": 1435661835, "creation_date": 1434555386, "last_edit_date": 1435159883, "question_id": 30896155, "link": "https://stackoverflow.com/questions/30896155/android-ndk-undefined-reference", "title": "Android NDK: undefined reference", "body": "<p>I am trying to develop an application for android using VTK for android.\nI have compile all the sources so far everything have worked just fine.</p>\n\n<p>Now I'm stuck here, an undefined reference error which is:</p>\n\n<pre><code>Android NDK: WARNING: APP_PLATFORM android-14 is larger than android:minSdkVersion 8 in /Users/lonnibesancon/Documents/workspace/TestNativecopy/AndroidManifest.xml    \n[armeabi-v7a] Compile++ thumb: ndk1 &lt;= native.cxx\n[armeabi-v7a] Compile thumb  : android_native_app_glue &lt;= android_native_app_glue.c\n[armeabi-v7a] StaticLibrary  : libandroid_native_app_glue.a\n[armeabi-v7a] SharedLibrary  : libndk1.so\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkNew.h:66: error: undefined reference to 'vtkRenderWindow::New()'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkNew.h:66: error: undefined reference to 'vtkRenderer::New()'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkNew.h:66: error: undefined reference to 'vtkAndroidRenderWindowInteractor::New()'\n/Users/lonnibesancon/Documents/workspace/TestNativecopy/jni/native.cxx:61: error: undefined reference to 'vtkRenderWindowInteractor::SetRenderWindow(vtkRenderWindow*)'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkNew.h:66: error: undefined reference to 'vtkSphereSource::New()'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkNew.h:66: error: undefined reference to 'vtkPolyDataMapper::New()'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkAlgorithm.h:391: error: undefined reference to 'vtkAlgorithm::GetOutputPort(int)'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkNew.h:66: error: undefined reference to 'vtkActor::New()'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkNew.h:66: error: undefined reference to 'vtkConeSource::New()'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkNew.h:66: error: undefined reference to 'vtkGlyph3D::New()'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkAlgorithm.h:391: error: undefined reference to 'vtkAlgorithm::GetOutputPort(int)'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkAlgorithm.h:391: error: undefined reference to 'vtkAlgorithm::GetOutputPort(int)'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkGlyph3D.h:131: error: undefined reference to 'vtkGlyph3D::SetSourceConnection(int, vtkAlgorithmOutput*)'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkNew.h:66: error: undefined reference to 'vtkPolyDataMapper::New()'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkAlgorithm.h:391: error: undefined reference to 'vtkAlgorithm::GetOutputPort(int)'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkNew.h:66: error: undefined reference to 'vtkActor::New()'\n/Users/lonnibesancon/Documents/workspace/TestNativecopy/jni/native.cxx:88: error: undefined reference to 'vtkRenderer::AddActor(vtkProp*)'\n/Users/lonnibesancon/Documents/workspace/TestNativecopy/jni/native.cxx:89: error: undefined reference to 'vtkRenderer::AddActor(vtkProp*)'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkDebugLeaksManager.h:39: error: undefined reference to 'vtkDebugLeaksManager::vtkDebugLeaksManager()'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkDebugLeaksManager.h:39: error: undefined reference to 'vtkDebugLeaksManager::~vtkDebugLeaksManager()'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:190: error: undefined reference to 'AInputQueue_getEvent'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:192: error: undefined reference to 'AInputQueue_preDispatchEvent'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:197: error: undefined reference to 'AInputQueue_finishEvent'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:211: error: undefined reference to 'AConfiguration_new'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:212: error: undefined reference to 'AConfiguration_fromAssetManager'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:66: error: undefined reference to 'AConfiguration_getLanguage'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:67: error: undefined reference to 'AConfiguration_getCountry'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:223: error: undefined reference to 'ALooper_prepare'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:224: error: undefined reference to 'ALooper_addFd'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:179: error: undefined reference to 'AInputQueue_detachLooper'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:181: error: undefined reference to 'AConfiguration_delete'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:95: error: undefined reference to 'AInputQueue_detachLooper'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:100: error: undefined reference to 'AInputQueue_attachLooper'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:134: error: undefined reference to 'AConfiguration_fromAssetManager'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:66: error: undefined reference to 'AConfiguration_getLanguage'\n/Users/lonnibesancon/android-ndk-r10e/sources/android/native_app_glue/android_native_app_glue.c:67: error: undefined reference to 'AConfiguration_getCountry'\ncollect2: error: ld returned 1 exit status\nmake: *** [/Users/lonnibesancon/Documents/workspace/TestNativecopy/obj/local/armeabi-v7a/libndk1.so] Error 1\n</code></pre>\n\n<p>The content of my android.mk file is the following:</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\n\ninclude $(CLEAR_VARS)\n# VTK Libs\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkalglib-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkalglib-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkCommonColor-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkCommonColor-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkCommonComputationalGeometry-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkCommonComputationalGeometry-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkCommonCore-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkCommonCore-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkCommonMath-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkCommonMath-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkCommonMisc-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkCommonMisc-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkCommonSystem-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkCommonSystem-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkCommonTransforms-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkCommonTransforms-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkDICOMParser-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkDICOMParser-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkexpat-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkexpat-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkFiltersCore-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkFiltersCore-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkFiltersExtraction-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkFiltersExtraction-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkFiltersGeneral-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkFiltersGeneral-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkFiltersGeometry-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkFiltersGeometry-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkFiltersModeling-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkFiltersModeling-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkFiltersSources-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkFiltersSources-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkFiltersStatistics-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkFiltersStatistics-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkglew-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkglew-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkImagingCore-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkImagingCore-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkImagingFourier-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkImagingFourier-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkImagingHybrid-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkImagingHybrid-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkInfovisCore-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkInfovisCore-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkInteractionStyle-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkInteractionStyle-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkIOCore-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkIOCore-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkIOGeometry-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkIOGeometry-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS) \nLOCAL_MODULE := libvtkIOImage-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkIOImage-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtkIOInfovis-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkIOInfovis-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtkIOLegacy-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkIOLegacy-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtkIOPLY-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkIOPLY-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtkIOXML-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkIOXML-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtkIOXMLParser-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkIOXMLParser-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtkjpeg-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkjpeg-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtkjsoncpp-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkjsoncpp-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtklibxml2-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtklibxml2-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtkmetaio-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkmetaio-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtkParallelCore-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkParallelCore-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtkpng-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkpng-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtkRenderingCore-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkRenderingCore-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtkRenderingOpenGL2-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkRenderingOpenGL2-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtksys-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtksys-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtktiff-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtktiff-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvtkzlib-6.3\nLOCAL_SRC_FILES = /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/lib/libvtkzlib-6.3.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\n\n\nLOCAL_C_INCLUDES := /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/\nLOCAL_C_INCLUDES += /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/alglib/\nLOCAL_C_INCLUDES += /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkexpat/\nLOCAL_C_INCLUDES += /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkglew/\nLOCAL_C_INCLUDES += /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkjpeg/\nLOCAL_C_INCLUDES += /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkjsoncpp/\nLOCAL_C_INCLUDES += /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtklibxml2/\nLOCAL_C_INCLUDES += /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkmetaio/\nLOCAL_C_INCLUDES += /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkpng/\nLOCAL_C_INCLUDES += /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtksys/\nLOCAL_C_INCLUDES += /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtktiff/\nLOCAL_C_INCLUDES += /Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkzlib/\n\nLOCAL_STATIC_LIBRARIES := cpufeatures android_native_app_glue ndk_helper\nLOCAL_CPP_FEATURES := rtti exceptions\nLOCAL_CPPFLAGS += --std=c++11\n\n\nLOCAL_LDLIBS := -llog\n\nLOCAL_MODULE    := ndk1\nLOCAL_SRC_FILES := native.cxx\n\ninclude $(BUILD_SHARED_LIBRARY)\n$(call import-module,android/native_app_glue)\n</code></pre>\n\n<p>It might be a really dumb error (still a newbie) but I would like some help here if possible.</p>\n\n<p>EDIT: As suggested in some posts here, I have tried <code>LOCAL_ALLOW_UNDEFINED_SYMBOLS:=true</code>\nbut what it does is just ignore the problem until runtime and when I try to run the application returns with error directly like this one:</p>\n\n<pre><code>dlopen(\"/data/app-lib/com.example.vtknative-2/libndk1.so\") failed: dlopen failed: cannot locate symbol \n\n\"_ZN32vtkAndroidRenderWindowInteractor14HandleKeyEventEbiii\" referenced by \"libndk1.so\"...\n</code></pre>\n\n<p>EDIT2: as suggested by @samgak I added the prebuilt static libraries to my LOCAL_STATIC_LIBRARIES list.\nYet the first error I get is:</p>\n\n<pre><code>/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkAlgorithm.h:391: error: undefined reference to 'vtkAlgorithm::GetOutputPort(int)'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkAlgorithm.h:391: error: undefined reference to 'vtkAlgorithm::GetOutputPort(int)'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkAlgorithm.h:391: error: undefined reference to 'vtkAlgorithm::GetOutputPort(int)'\n/Users/lonnibesancon/Desktop/VTK/build4/CMakeExternals/Install/vtk-android/include/vtk-6.3/vtkAlgorithm.h:391: error: undefined reference to 'vtkAlgorithm::GetOutputPort(int)'\n</code></pre>\n\n<p>And here is the corresponding line in the vtkAlgorithm.h (lines 389,390 and 391)</p>\n\n<pre><code>vtkAlgorithmOutput* GetOutputPort(int index);\n  vtkAlgorithmOutput* GetOutputPort() {\n    return this-&gt;GetOutputPort(0); }\n</code></pre>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 4305, "user_id": 2640636, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/NWXEh.jpg?s=128&g=1", "display_name": "SU3", "link": "https://stackoverflow.com/users/2640636/su3"}, "edited": false, "score": 0, "creation_date": 1434555601, "post_id": 30896012, "comment_id": 49831481, "body": "My answer to a similar question: <a href=\"http://stackoverflow.com/a/30364430/2640636\">stackoverflow.com/a/30364430/2640636</a>"}, {"owner": {"reputation": 35, "user_id": 3383404, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/549872715/picture?type=large", "display_name": "user3383404", "link": "https://stackoverflow.com/users/3383404/user3383404"}, "reply_to_user": {"reputation": 4305, "user_id": 2640636, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/NWXEh.jpg?s=128&g=1", "display_name": "SU3", "link": "https://stackoverflow.com/users/2640636/su3"}, "edited": false, "score": 0, "creation_date": 1434560070, "post_id": 30896012, "comment_id": 49834636, "body": "I can loops with cout to change in to BOX form...but i am looking something deep in the boost that will change it with least tying efforts"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 3383404, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/549872715/picture?type=large", "display_name": "user3383404", "link": "https://stackoverflow.com/users/3383404/user3383404"}, "edited": false, "score": 0, "creation_date": 1434559914, "post_id": 30896236, "comment_id": 49834541, "body": "writing this much of code is something will not give bliss"}, {"owner": {"reputation": 35, "user_id": 3383404, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/549872715/picture?type=large", "display_name": "user3383404", "link": "https://stackoverflow.com/users/3383404/user3383404"}, "edited": false, "score": 0, "creation_date": 1434560141, "post_id": 30896236, "comment_id": 49834693, "body": "thanks for the reply..but i could have do the same...but i am looking some thing elegant"}], "tags": [], "owner": {"reputation": 2394, "user_id": 4952137, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c40d9f94080a45d91ee151dfe960cee3?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Sparber", "link": "https://stackoverflow.com/users/4952137/thomas-sparber"}, "is_accepted": false, "score": 1, "last_activity_date": 1434555606, "creation_date": 1434555606, "answer_id": 30896236, "question_id": 30896012, "link": "https://stackoverflow.com/questions/30896012/displaying-the-boost-matrix-in-form-of-line-want-to-change-it-to-box/30896236#30896236", "title": "Displaying the Boost matrix in form of line. Want to change it to Box", "body": "<p>You can do something like this</p>\n\n<pre><code>void printMatrix(const matrix&lt;double&gt; &amp;m)\n{\n    for(unsigned i=0;i&lt;m.size1();++i)\n    {\n        cout&lt;&lt;\"| \";\n        for (unsigned j=0;j&lt;m.size2();++j)\n        {\n            cout&lt;&lt;m(i,j)&lt;&lt;\" | \";\n        }\n        cout&lt;&lt;\"|\"&lt;&lt;endl;\n    }\n}\n</code></pre>\n\n<p>this will print something like this:</p>\n\n<pre><code>| 0 | 0 | 0 |\n| 0 | 3 | 6 |\n| 0 | 6 | 9 |\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 3383404, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/549872715/picture?type=large", "display_name": "user3383404", "link": "https://stackoverflow.com/users/3383404/user3383404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434555606, "creation_date": 1434555044, "question_id": 30896012, "link": "https://stackoverflow.com/questions/30896012/displaying-the-boost-matrix-in-form-of-line-want-to-change-it-to-box", "title": "Displaying the Boost matrix in form of line. Want to change it to Box", "body": "<p>//This simple program initialize a 3x3 matrix and outputs it in the form of line.i want to display this matrix in the form of matrix. </p>\n\n<pre><code>#include &lt;boost/numeric/ublas/matrix.hpp&gt;\n#include &lt;boost/numeric/ublas/io.hpp&gt;\n\nint main(){\n  using namespace boost::numeric::ublas;\n  matrix&lt;double&gt; m1(3,3);\n\n for(unsigned i=0;i&lt;m1.size1();++i)\n for (unsigned j=0;j&lt;m1.size2();++j)\n     m(i,j)=3*i*j;\n std::cout&lt;&lt;m1&lt;&lt;std::endl;\nreturn 0;\n}\noutput\n[3,3]((0,0,0),(0,3,6),(0,6,12)\n</code></pre>\n"}, {"tags": ["c++", "menu", "mfc", "dialog", "cmfcmenubutton"], "comments": [{"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 1, "creation_date": 1434560048, "post_id": 30896006, "comment_id": 49834622, "body": "Can you post some code you&#39;re using?  I think I understand what you&#39;re trying to do."}, {"owner": {"reputation": 906, "user_id": 3906985, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6Qygd.jpg?s=128&g=1", "display_name": "Robson", "link": "https://stackoverflow.com/users/3906985/robson"}, "reply_to_user": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1434966661, "post_id": 30896006, "comment_id": 49984333, "body": "@rrirower thanks for your comment, I&#39;ve added some code, check it out."}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 1, "creation_date": 1434979285, "post_id": 30896006, "comment_id": 49992420, "body": "I&#39;ve read your code.  What is it that you want the button and menu items to do exactly?  It sounds like you want to re-use resource IDs.  I don&#39;t quite understand why you would want that."}, {"owner": {"reputation": 906, "user_id": 3906985, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6Qygd.jpg?s=128&g=1", "display_name": "Robson", "link": "https://stackoverflow.com/users/3906985/robson"}, "reply_to_user": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1434980223, "post_id": 30896006, "comment_id": 49993103, "body": "@rrirower I want that when I click on a menu item in the CMFCMenuButton I get a message that is IDC_MENU1 till IDC_MENU11 and not IDC_MFCMENUBUTTON1. because now any action done on the button will have the ID IDC_MFCMENUBUTTON1 and not the ID that is in the clicked menu"}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 1, "creation_date": 1434985157, "post_id": 30896006, "comment_id": 49996717, "body": "If you code a handler for <i>BN_CLICKED</i> for the menu button, it will respond with 0 for m_nMenuResult if the click is on the button, or, m_nMenuResult will contain the Id of the menu item selected.  If that&#39;s not what you wanted, I think you&#39;re fighting against the way the button works.  Your only  other option would be to create your own class to represent a menu button and add the behavior you want."}, {"owner": {"reputation": 906, "user_id": 3906985, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6Qygd.jpg?s=128&g=1", "display_name": "Robson", "link": "https://stackoverflow.com/users/3906985/robson"}, "reply_to_user": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1434986358, "post_id": 30896006, "comment_id": 49997592, "body": "@rrirower I was not sure how the button worked, but found strange that I didn&#39;t get the menu&#39;s ID in the message map. so I guess the button has this different behaviour than normal menus. copy your comment to an answer so I can mark it. thanks for your time =)"}], "answers": [{"tags": [], "owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "is_accepted": true, "score": 0, "last_activity_date": 1434986741, "creation_date": 1434986741, "answer_id": 30983874, "question_id": 30896006, "link": "https://stackoverflow.com/questions/30896006/how-to-correctly-send-cmfcmenubutton-selected-id-to-the-message-map/30983874#30983874", "title": "how to correctly send CMFCMenuButton selected ID to the message map?", "body": "<p>If you code a handler for <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb761825(v=vs.85).aspx\" rel=\"nofollow\">BN_CLICKED</a> for the menu button, it will respond with 0 for <em>m_nMenuResult</em> if the click is on the button, or, <em>m_nMenuResult</em> will contain the ID of the menu item selected. If that's not what you wanted, I think you're fighting against the way the button works. Your only other option would be to create your own class to represent a menu button and add the behavior you want.</p>\n"}], "owner": {"reputation": 906, "user_id": 3906985, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6Qygd.jpg?s=128&g=1", "display_name": "Robson", "link": "https://stackoverflow.com/users/3906985/robson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 30983874, "answer_count": 1, "score": 2, "last_activity_date": 1476836984, "creation_date": 1434555014, "last_edit_date": 1476836984, "question_id": 30896006, "link": "https://stackoverflow.com/questions/30896006/how-to-correctly-send-cmfcmenubutton-selected-id-to-the-message-map", "title": "how to correctly send CMFCMenuButton selected ID to the message map?", "body": "<p>firstly let me describe what I have:<br>\n<strong>scenario:</strong> <code>CMFCMenuButton</code>, loaded with a <code>CMenu</code>, in a dialog <br /><strong>test:</strong> click on an item of the menu<br /><strong>result:</strong> the message map will get the ID of the <code>CMFCMenuButton</code> and not the ID of the menu\n<br /><strong>how to get the actual menu ID clicked:</strong> use <code>CMFCMenuButton::m_nMenuResult</code><br /><br />The idea is that I want to have menu items and buttons in this dialog, and there would be buttons that share IDs with the menu items.<br /><br />So in the handler that I've created for the menu button I can get that <code>m_nMenuResult</code> and send it to the dialog or do whatever I want, but that doesn't seem to be how the <code>CMFCMenuButton</code> should work. What is the correct way of doing it?\n<br /><br /><h2>Code</h2>Here follows an example on how you can reproduce this.\n<br />I've used <code>ON_COMMAND_RANGE</code> also with <code>IDC_MFCMENUBUTTON1</code> just to reuse the code for the OnMenu function</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>void CRepositionDlg::DoDataExchange(CDataExchange* pDX)\n{\n    CDialog::DoDataExchange(pDX);\n    DDX_Control(pDX, IDC_MFCMENUBUTTON1, m_cmfcMenuButton);\n}\n\n\nBEGIN_MESSAGE_MAP(CRepositionDlg, CDialog)\n    ON_COMMAND_RANGE(IDC_MFCMENUBUTTON1,IDC_MFCMENUBUTTON1,OnMenu)\n\n    ON_COMMAND_RANGE(IDC_MENU1, IDC_MENU11, OnMenu)\nEND_MESSAGE_MAP()\n\n\n// CRepositionDlg message handlers\n\nafx_msg void CRepositionDlg::OnMenu(UINT nID)\n{\n    CString csMessage;\n    csMessage.Format(L\"OnMenu(%d)\",nID);\n    AfxMessageBox(csMessage);\n    if(nID == IDC_MFCMENUBUTTON1)\n    {\n        OnMenu(m_cmfcMenuButton.m_nMenuResult);\n    }\n}\n\n\nBOOL CRepositionDlg::OnInitDialog()\n{\n    CDialog::OnInitDialog();\n\n    // TODO:  Add extra initialization here\n\n    CMenu* pMenu = new CMenu;\n    pMenu-&gt;CreatePopupMenu();\n    for(int i = IDC_MENU1; i &lt;= IDC_MENU11; i++)\n    {\n        CString csMenu;\n        csMenu.Format(L\"menu %d\",i);\n        pMenu-&gt;AppendMenuW(MF_STRING,i,csMenu);\n    }\n    m_cmfcMenuButton.m_hMenu = pMenu-&gt;GetSafeHmenu();\n    return TRUE;  // return TRUE unless you set the focus to a control\n    // EXCEPTION: OCX Property Pages should return FALSE\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "gnu"], "comments": [{"owner": {"reputation": 2394, "user_id": 4952137, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c40d9f94080a45d91ee151dfe960cee3?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Sparber", "link": "https://stackoverflow.com/users/4952137/thomas-sparber"}, "edited": false, "score": 0, "creation_date": 1434555038, "post_id": 30895970, "comment_id": 49831083, "body": "This Looks good to me"}], "answers": [{"comments": [{"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 1, "creation_date": 1434557601, "post_id": 30896514, "comment_id": 49832939, "body": "For this to work he has to decide if this a C or C++ question.  It&#39;s currently tagged as both."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 1, "creation_date": 1434557642, "post_id": 30896514, "comment_id": 49832969, "body": "@BrianMcFarland True.  I came in from the C++ side so I didn&#39;t see the C tag."}, {"owner": {"reputation": 153, "user_id": 4035630, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bd19af688ec6c753e5314bffe32c05c9?s=128&d=identicon&r=PG&f=1", "display_name": "Pat Flegit", "link": "https://stackoverflow.com/users/4035630/pat-flegit"}, "edited": false, "score": 0, "creation_date": 1434558127, "post_id": 30896514, "comment_id": 49833317, "body": "It could be either depending on circumstances."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 7, "last_activity_date": 1434556282, "creation_date": 1434556282, "answer_id": 30896514, "question_id": 30895970, "link": "https://stackoverflow.com/questions/30895970/comparing-timespec-values/30896514#30896514", "title": "Comparing timespec values", "body": "<p>Another way you can go this is to have a global <code>operator &lt;()</code> defined for <code>timespec</code>.  Then you can just you that to compare if one time happened before another.</p>\n\n<pre><code>bool operator &lt;(const timespec&amp; lhs, const timespec&amp; rhs)\n{\n    if (lhs.tv_sec == rhs.tv_sec)\n        return lhs.tv_nsec &lt; rhs.tv_nsec;\n    else\n        return lhs.tv_sec &lt; rhs.tv_sec;\n}\n</code></pre>\n\n<p>Then in you code you can have</p>\n\n<pre><code>timespec start, end;\n//get start and end populated\nif (start &lt; end)\n   cout &lt;&lt; \"start is smaller\";\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 4035630, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bd19af688ec6c753e5314bffe32c05c9?s=128&d=identicon&r=PG&f=1", "display_name": "Pat Flegit", "link": "https://stackoverflow.com/users/4035630/pat-flegit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8750, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1434556282, "creation_date": 1434554917, "last_edit_date": 1434556156, "question_id": 30895970, "link": "https://stackoverflow.com/questions/30895970/comparing-timespec-values", "title": "Comparing timespec values", "body": "<p>What's the best way to compare two timespec values to see which happened first?</p>\n\n<p>Is there anything wrong with the following?</p>\n\n<pre><code>bool BThenA(timespec a, timespec b) {\n    //Returns true if b happened first -- b will be \"lower\".\n    if (a.tv_sec == b.tv_sec)\n        return a.tv_nsec &gt; b.tv_nsec;\n    else\n        return a.tv_sec &gt; b.tv_sec;\n}\n</code></pre>\n"}, {"tags": ["c++", "hashcode", "multimap"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1434626784, "post_id": 30895819, "comment_id": 49865201, "body": "If the hashes are not equal, the objects are distinct by definition and the equality operator will <i>never</i> be called. If you want two object to compare equal, they <i>must</i> have the same hash code."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1434627205, "post_id": 30895819, "comment_id": 49865482, "body": "You change an object&#39;s hashcode by overriding the hashCode() method, not the equals() method. Please clarify your question."}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 4923117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81228935cf84776e6f91c9c65d5d2074?s=128&d=identicon&r=PG&f=1", "display_name": "GKG DTH", "link": "https://stackoverflow.com/users/4923117/gkg-dth"}, "edited": false, "score": 0, "creation_date": 1434555832, "post_id": 30896123, "comment_id": 49831658, "body": "if in StrHash i just write &quot;return 1;&quot;, i can get a result what i want, but is not efficient.when return 1,every object have same hashcode 1,and then will run StrCompare().,in  StrCompare() i make (220,119), B(220,220), C(220, 222) as same."}, {"owner": {"reputation": 117, "user_id": 4923117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81228935cf84776e6f91c9c65d5d2074?s=128&d=identicon&r=PG&f=1", "display_name": "GKG DTH", "link": "https://stackoverflow.com/users/4923117/gkg-dth"}, "edited": false, "score": 0, "creation_date": 1434556195, "post_id": 30896123, "comment_id": 49831929, "body": "By definition if the hashes are unequal the objects are unequal.can i change this definition by overload equal method?"}, {"owner": {"reputation": 117, "user_id": 4923117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81228935cf84776e6f91c9c65d5d2074?s=128&d=identicon&r=PG&f=1", "display_name": "GKG DTH", "link": "https://stackoverflow.com/users/4923117/gkg-dth"}, "edited": false, "score": 0, "creation_date": 1434625390, "post_id": 30896123, "comment_id": 49864246, "body": "yep,something like what you said,so can i change this definition by overload equal method?"}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "reply_to_user": {"reputation": 117, "user_id": 4923117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81228935cf84776e6f91c9c65d5d2074?s=128&d=identicon&r=PG&f=1", "display_name": "GKG DTH", "link": "https://stackoverflow.com/users/4923117/gkg-dth"}, "edited": false, "score": 0, "creation_date": 1435210815, "post_id": 30896123, "comment_id": 50107007, "body": "@GKGDTH <i>&quot;can i change this definition&quot;</i> - no - during <code>unordered_map</code> operations, the equality comparison is not consulted unless the hashes have already mapped to the same bucket in the hash table."}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1434560938, "last_edit_date": 1434560938, "creation_date": 1434555310, "answer_id": 30896123, "question_id": 30895819, "link": "https://stackoverflow.com/questions/30895819/how-can-i-overload-equal-method-to-make-different-objects-have-same-hashcode-val/30896123#30896123", "title": "How can I overload equal method to make different objects have same hashcode value in unordered_multimap in my case", "body": "<p>This isn't how hash maps/<code>unordered_map</code> work. By definition if the hashes are unequal the objects are unequal. Not only that, but your \"equality\" operator allows things like <code>A(220,119)</code>, <code>B(220,220)</code>, <code>C(220, 222)</code> where A == B and B == C but A != C. I can't see any way to accomplish what you ask in this question, but is there perhaps a real problem you're trying to solve?</p>\n\n<p>Based on your comments, it sounds like you want <code>std::vector</code> instead of <code>std::unordered_map</code>. Then you just use <code>std::find</code> to find the element you care about instead of going through the indirection of having a no-op hash.</p>\n"}, {"tags": [], "owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "is_accepted": true, "score": 0, "last_activity_date": 1435213548, "creation_date": 1435213548, "answer_id": 31042738, "question_id": 30895819, "link": "https://stackoverflow.com/questions/30895819/how-can-i-overload-equal-method-to-make-different-objects-have-same-hashcode-val/31042738#31042738", "title": "How can I overload equal method to make different objects have same hashcode value in unordered_multimap in my case", "body": "<p>Got to say this as it's so much easier if your error tolerance will allow it: you could just round your values to the nearest multiple of 2 or 3.</p>\n\n<hr>\n\n<p>MarkB's suggestion of using a <code>vector</code> is excellent... just listing some others for the intellectual interest.</p>\n\n<hr>\n\n<p>It is possible to get the functionality you want using an <code>unordered_map</code>, but not very cleanly: you'll need the map-using code to orchestrate the logic for approximate equality.  First, the equality function must check for <em>actual</em> equality:</p>\n\n<pre><code>struct PointCompare{\n    bool operator()(const Point&amp; a, const Point&amp; b) const {\n        return a.x == b.x &amp;&amp; a.y == b.y;\n    }\n};\n</code></pre>\n\n<p>Then, you'll need a support function like this:</p>\n\n<pre><code>template &lt;class Map&gt;\nauto approx_find(Map&amp; map, const Point&amp; point) -&gt; decltype(map.begin())\n{\n    decltype(map.end()) it;\n    for (int x_offset = -2; x_offset &lt;= 2, ++x_offset)\n        for (int y_offset = -2; y_offset &lt;= 2, ++y_offset)\n            if (abs(x_offset) + abs(y_offset) &lt; 3 &amp;&amp;\n                (it = map.find({point.x + x_offset, point.y + y_offset})) != map.end())\n            return it;\n    return map.end();\n}\n</code></pre>\n\n<p>Then, you can use the returned iterator to see if <code>Point</code> you're thinking of inserting will be a duplicate, as well as for lookup, <code>erase</code>ing etc..</p>\n\n<p>Note that the performance will not be great.  Each <code>approx_find</code> is effectively searching around the <code>Point</code> argument as follows:</p>\n\n<pre><code>       &lt;------------- X axis --------------&gt;\n  ^\n  |                   0,-2\n  |             -1,-1 0,-1 1,-1\nY axis      -2,0 -1,0 0,0  1,0, 2,0\n  |              -1,1 0,1  1,1\n  |                   0,2\n  v\n</code></pre>\n\n<p>All up, that's 13 lookups - scattered more-or-less randomly around the hash table's buckets so not particularly cache friendly - instead of the usual 1.</p>\n\n<hr/>\n\n<p>A completely different option is to use an <code>unordered_multimap</code> to keep track of the <code>Point</code>s in a general area of the graph - close enough that they might satisfy the <code>&lt;3</code> proximity test.  For example:</p>\n\n<pre><code>std::unordered_multimap&lt;Point, Point&gt; areas;\n\nPoint p = { ...whatever... }; \n\n// keys for nearby points:\nPoint around[] = { { (p.x - 2) / 3 * 3, (p.y - 2) / 3 * 3 }, \n                   { (p.x + 2) / 3 * 3, (p.y - 2) / 3 * 3 },\n                   { (p.x - 2) / 3 * 3, (p.y + 2) / 3 * 3 },\n                   { (p.x + 2) / 3 * 3, (p.y + 2) / 3 * 3 } };\n</code></pre>\n\n<p>For each of the four <code>around[]</code> entries, do a <code>find</code> in the <code>multimap</code> to see if there's an exact or approximate match: that reduces the 13 table probes to just 4.  Each <code>multimap</code> key won't ever map to more than 2 entries, as the only non-approximate-clash would be for two <code>Points</code> at opposite corners of an area.</p>\n"}], "owner": {"reputation": 117, "user_id": 4923117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81228935cf84776e6f91c9c65d5d2074?s=128&d=identicon&r=PG&f=1", "display_name": "GKG DTH", "link": "https://stackoverflow.com/users/4923117/gkg-dth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 31042738, "answer_count": 2, "score": -1, "last_activity_date": 1435213548, "creation_date": 1434554531, "last_edit_date": 1434626927, "question_id": 30895819, "link": "https://stackoverflow.com/questions/30895819/how-can-i-overload-equal-method-to-make-different-objects-have-same-hashcode-val", "title": "How can I overload equal method to make different objects have same hashcode value in unordered_multimap in my case", "body": "<p>I have written a map like this:</p>\n\n<pre><code>unordered_multimap&lt;Point, int, StrHash, StrCompare&gt; map\n</code></pre>\n\n<p><code>StrHash()</code> is to create hashcode and <code>StrCompare()</code> is to solve the hashcode collision.\nbut I want to do something as follow:</p>\n\n<p>A and B have different hashcode value,but A equal to B, then run the <code>StrCompare()</code> method. how can I do that,just like Point <code>A(220,119)</code> and <code>Point B(220,220)</code> have different hashcode. Can I overload hashcode equal method\nto make <code>A == B</code>?\nIn my case, I want to get the <code>Points</code>,which compare with each others <code>(abs(a.x - b.x) + abs(a.y - b.y) &lt; 3)</code>. just like, <code>Point(220,220)(220,119)(220,118)(220,220)</code> \nmy code is  as follow:</p>\n\n<pre><code>#include &lt;opencv2/core/core.hpp&gt;\n#include &lt;opencv2/imgproc/imgproc.hpp&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n#include &lt;string&gt;\n\nusing std::string;\n#include &lt;unordered_map&gt;\nusing std::unordered_multimap;\nusing namespace std;\nusing namespace cv;\nclass StrHash{\npublic:\n    size_t operator()(const Point a) const {\n\n        return a.x * 1000 + a.y;\n    }\n};\nclass StrCompare{\npublic:\n    bool operator()(const Point&amp; a, const Point&amp; b) const {\n\n        if (abs(a.x - b.x) + abs(a.y - b.y) &lt; 3) {\n            return true;\n        }\n        else\n            return false;\n    }\n\n};\n\nint main()\n{\n    unordered_multimap&lt;Point, int, StrHash, StrCompare&gt; map;\n    map.insert(make_pair(Point(30, 120), 1));\n    map.insert(make_pair(Point(220, 120), 2));\n    map.insert(make_pair(Point(220, 120), 3));\n    map.insert(make_pair(Point(220, 120), 4));\n    map.insert(make_pair(Point(220, 119), 5));\n    map.insert(make_pair(Point(30, 120), 6));\n    unordered_multimap&lt;Point, int, StrCompare&gt;::iterator iter1;\n    unordered_multimap&lt;Point, int, StrCompare&gt;::iterator iter2;\n    for (iter1 = map.begin(); iter1 != map.end();)//\n    {\n        int num = map.count((*iter1).first);\n        iter2 = map.find((*iter1).first);\n        if (num &gt; 2) {\n            for (int i = 1; i &lt;= num; i++)\n            {\n                cout &lt;&lt; (*iter2).first &lt;&lt; \"  \" &lt;&lt; i &lt;&lt; endl;\n                iter2++;\n            }\n            iter1++;\n        }\n        else {\n\n            iter1++;\n\n        }\n\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 1264, "user_id": 1857229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac85290d62959cd6931313095ce2c2c8?s=128&d=identicon&r=PG", "display_name": "Uroc327", "link": "https://stackoverflow.com/users/1857229/uroc327"}, "edited": false, "score": 0, "creation_date": 1434555048, "post_id": 30895715, "comment_id": 49831093, "body": "If you know the functions at compile time, you can manually insert NOPs using the <code>asm</code> statement. But be aware that this prevents the compiler from using lots of optimisations."}, {"owner": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 0, "creation_date": 1434555191, "post_id": 30895715, "comment_id": 49831199, "body": "FYI, Detours isn&#39;t dependent on having <code>NOP</code>s at the start of a function. IIRC it disassembles the function&#39;s prologue to get a large enough space for a jump to a trampoline (and to copy those instructions out). See also <a href=\"http://stackoverflow.com/a/10458162\">stackoverflow.com/a/10458162</a>"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1434615305, "post_id": 30895715, "comment_id": 49857517, "body": "If you have the source so you can recompile with <code>__attribute__((ms_hook_prologue))</code>, why don&#39;t you just insert c(++) code to call a function pointer if it is not <code>0</code>?"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1434648957, "post_id": 30895715, "comment_id": 49881004, "body": "Are you absolutely sure you can&#39;t use <code>LD_PRELOAD</code> to replace the function at load time (and <code>dlsym</code> to call the original) instead of waiting until runtime?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5020262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e810aae45826e9ce3c051bc420ec6b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/5020262/anil"}, "edited": false, "score": 0, "creation_date": 1434560143, "post_id": 30896279, "comment_id": 49834697, "body": "I hate to ask this but if I define as you have mentioned gcc is throwing an warning1.c:16: warning: ms_hook_prologue attribute directive ignored 1.c:16: error: expected token distcc[48256] ERROR: compile 1.c on localhost failed. could you please let me know I am missing any header file to include so that these warning go off."}, {"owner": {"reputation": 2827, "user_id": 1825094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B6Mk2.png?s=128&g=1", "display_name": "Max Truxa", "link": "https://stackoverflow.com/users/1825094/max-truxa"}, "reply_to_user": {"reputation": 21, "user_id": 5020262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e810aae45826e9ce3c051bc420ec6b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/5020262/anil"}, "edited": false, "score": 1, "creation_date": 1434565810, "post_id": 30896279, "comment_id": 49838040, "body": "Depending on your version of GCC you will have to put the attribute in front of the function like this <code>__attribute__((ms_hook_prologue)) void foo() { }</code>. For an example look at <a href=\"http://ideone.com/qGBm3H\" rel=\"nofollow noreferrer\">this online demo</a>. I&#39;ll update my post later."}, {"owner": {"reputation": 2827, "user_id": 1825094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B6Mk2.png?s=128&g=1", "display_name": "Max Truxa", "link": "https://stackoverflow.com/users/1825094/max-truxa"}, "reply_to_user": {"reputation": 21, "user_id": 5020262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e810aae45826e9ce3c051bc420ec6b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/5020262/anil"}, "edited": false, "score": 0, "creation_date": 1434567559, "post_id": 30896279, "comment_id": 49839151, "body": "Another source of that sort of that error could be that you have a forward declaration of that function and specified the attribute at the wrong place. IIRC you must specify the attribute <i>only</i> at the forward declaration."}, {"owner": {"reputation": 21, "user_id": 5020262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e810aae45826e9ce3c051bc420ec6b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/5020262/anil"}, "edited": false, "score": 0, "creation_date": 1434611972, "post_id": 30896279, "comment_id": 49855545, "body": "Thanks :). I was able to compile and take a objdump.00000000004007c0 &lt;_Z3foov&gt;:   4007c0:       48 8d a4 24 00 00 00    lea    0x0(%rsp),%rsp   4007c7:       00    4007c8:       55                      push   %rbp   4007c9:       48 89 e5                mov    %rsp,%rbp   4007cc:       be d0 08 40 00          mov    $0x4008d0,%esi   4007d1:       bf 60 10 60 00          mov    $0x601060,%edi   4007d6:       e8 c5 fe ff ff          callq  4006a0   I dont see NOP is LEA load the effective address should I replace LEA to JMP ?"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "reply_to_user": {"reputation": 21, "user_id": 5020262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e810aae45826e9ce3c051bc420ec6b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/5020262/anil"}, "edited": false, "score": 0, "creation_date": 1434648794, "post_id": 30896279, "comment_id": 49880907, "body": "@Anil yes, <code>lea</code> is often used as a multi-byte <code>nop</code>. Interestingly, with <code>gcc -s</code> you can see that the assembly is emitted as a <code>.byte</code> sequence rather than actual instructions, probably to avoid peephole optimizations."}], "tags": [], "owner": {"reputation": 2827, "user_id": 1825094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B6Mk2.png?s=128&g=1", "display_name": "Max Truxa", "link": "https://stackoverflow.com/users/1825094/max-truxa"}, "is_accepted": false, "score": 1, "last_activity_date": 1434648842, "last_edit_date": 1434648842, "creation_date": 1434555707, "answer_id": 30896279, "question_id": 30895715, "link": "https://stackoverflow.com/questions/30895715/how-to-implement-detour-functions-in-linux/30896279#30896279", "title": "How to implement detour functions in Linux", "body": "<p>The question is less a \"Linux\" one but more a \"GCC\" one.</p>\n\n<p>GCC provides the <code>ms_hook_prologue</code> function attribute <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.9.2/gcc/Function-Attributes.html\" rel=\"nofollow\">(online reference)</a> which is pretty much the same as the <code>/hotpatch</code> compiler option for <code>cl.exe</code> (the MS compiler) but on a function level.</p>\n\n<p>Example:</p>\n\n<pre><code>__attribute__((ms_hook_prologue)) void foo() { }\n</code></pre>\n\n<p>If you want to use this on more than a few functions you could create a macro to hide the attribute:</p>\n\n<pre><code>#define HOTPATCHABLE    __attribute__((ms_hook_prologue))\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5020262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e810aae45826e9ce3c051bc420ec6b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/5020262/anil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1491493423, "creation_date": 1434554253, "last_edit_date": 1491493423, "question_id": 30895715, "link": "https://stackoverflow.com/questions/30895715/how-to-implement-detour-functions-in-linux", "title": "How to implement detour functions in Linux", "body": "<p>My requirement is to patch a function during runtime which is equivalent to K-Patch but for application code.\nin K-Patch vedio ( <a href=\"https://www.youtube.com/watch?v=juyQ5TsJRTA\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=juyQ5TsJRTA</a> ) it mentioned @ 1:41 it using functionality which used for traditional used for tracing (noop) beginning of the function.\nwhere we can register the handler to call new function definition.</p>\n\n<p>In Windows It looks something like this: (<a href=\"http://www.ragestorm.net/blogs/?p=17\" rel=\"nofollow noreferrer\">http://www.ragestorm.net/blogs/?p=17</a>)</p>\n\n<pre><code>0005951e (01) 90                      NOP\n0005951f (01) 90                       NOP\n00059520 (01) 90                      NOP\n00059521 (01) 90                      NOP\n00059522 (01) 90                      NOP\n00059523 (02) 8bff                   MOV EDI, EDI\n00059525 (01) 55                      PUSH EBP\n00059526 (02) 8bec                  MOV EBP, ESP\n</code></pre>\n\n<p>I wrote a simple function in Linux (2.6.32-431.el6.x86_64) in which i dont see any NOP instruction which we can used to dynamically patch a new function.</p>\n\n<pre><code>0000000000400554 &lt;mysym&gt;:\n400554:       55                      push   %rbp\n400555:       48 89 e5                mov    %rsp,%rbp\n400558:       b8 98 06 40 00          mov    $0x400698,%eax\n40055d:       be 9b 06 40 00          mov    $0x40069b,%esi\n400562:       48 89 c7                mov    %rax,%rdi\n400565:       b8 00 00 00 00          mov    $0x0,%eax\n40056a:       e8 c9 fe ff ff          callq  400438 &lt;printf@plt&gt;\n40056f:       c9                      leaveq \n400570:       c3                      retq   \n</code></pre>\n\n<p>Is there any compiler options or equivalent instructions exists in linux where every functions has some NOP instructions which used to hook up a new function by replacing NOP with near/far JUMP?</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 4, "creation_date": 1434554458, "post_id": 30895712, "comment_id": 49830646, "body": "This is broken in too many ways to address in one post. Better learn some more C++ first."}, {"owner": {"reputation": 2645, "user_id": 3310838, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/2wIwE.png?s=128&g=1", "display_name": "hayesti", "link": "https://stackoverflow.com/users/3310838/hayesti"}, "edited": false, "score": 0, "creation_date": 1434554583, "post_id": 30895712, "comment_id": 49830739, "body": "I don&#39;t think you can cast the c++ string datatype as a pointer to char array, i.e. &quot;tmp = (char *) data&quot; won&#39;t work. Have a look at <a href=\"http://www.cplusplus.com/reference/string/string/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/string/string</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "edited": false, "score": 1, "creation_date": 1434554852, "post_id": 30895839, "comment_id": 49830943, "body": "please bare in mind that this solution is prone to memory leaks."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "edited": false, "score": 0, "creation_date": 1434555618, "post_id": 30895839, "comment_id": 49831495, "body": "@Pandrei I fixed the memory leak issue."}, {"owner": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "edited": false, "score": 0, "creation_date": 1434556081, "post_id": 30895839, "comment_id": 49831853, "body": "<code>STRING s; s = nullptr;</code> will crash your implementation in the <code>strlen</code> call."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "edited": false, "score": 0, "creation_date": 1434556148, "post_id": 30895839, "comment_id": 49831895, "body": "@utnapistim: It may not. But it&#39;ll be UB regardless."}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "reply_to_user": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "edited": false, "score": 2, "creation_date": 1434556288, "post_id": 30895839, "comment_id": 49831990, "body": "@utnapistim You can always &quot;= delete&quot; an overload taking an std::nullptr_t. The caller can still pass a null char*, but at that point the caller is responsible for the Undefined Behavior"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1434555187, "last_edit_date": 1434555187, "creation_date": 1434554577, "answer_id": 30895839, "question_id": 30895712, "link": "https://stackoverflow.com/questions/30895712/c-need-solution-for-converting-from-const-string/30895839#30895839", "title": "C++ Need Solution for converting from const string", "body": "<p>You need an overload that takes a <code>const char*</code></p>\n\n<pre><code>STRING STRING::operator = (const char* s)\n{\n    if (data != nullptr)\n        delete [] data;\n    length = strlen(s);\n    data = new char[length + 1];\n\n    strcpy(data, s);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1434556269, "post_id": 30895959, "comment_id": 49831977, "body": "Faster and far less flexible."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1434556534, "post_id": 30895959, "comment_id": 49832155, "body": "Should be <code>const char (&amp;s)[length]</code>. Otherwise it will be taking an array of references."}], "tags": [], "owner": {"reputation": 2394, "user_id": 4952137, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c40d9f94080a45d91ee151dfe960cee3?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Sparber", "link": "https://stackoverflow.com/users/4952137/thomas-sparber"}, "is_accepted": false, "score": 1, "last_activity_date": 1434607711, "last_edit_date": 1434607711, "creation_date": 1434554890, "answer_id": 30895959, "question_id": 30895712, "link": "https://stackoverflow.com/questions/30895712/c-need-solution-for-converting-from-const-string/30895959#30895959", "title": "C++ Need Solution for converting from const string", "body": "<p>You Need an overloaded function for <code>const char*</code> but you can also use a template function which will be faster:</p>\n\n<pre><code>template&lt;int length&gt;\nSTRING STRING::operator = (const char (&amp;s)[length])\n{\n    //resize or allocate data if needed\n    strncpy(data, s, length);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1434555149, "creation_date": 1434555149, "answer_id": 30896061, "question_id": 30895712, "link": "https://stackoverflow.com/questions/30895712/c-need-solution-for-converting-from-const-string/30896061#30896061", "title": "C++ Need Solution for converting from const string", "body": "<p>You can change the argument types from <code>char*</code> to <code>char const*</code> in the following functions.</p>\n\n<pre><code>STRING(char * data);\nSTRING operator = (char * data);\n</code></pre>\n\n<p>Also, as a matter of general improvement, you can change</p>\n\n<pre><code>STRING operator = (STRING data);\nSTRING operator = (const string data);\nSTRING operator + (STRING data);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>STRING&amp; operator = (STRING const&amp; data);\nSTRING&amp; operator = (const string&amp; data);\nSTRING operator + (STRING const&amp; data) const;\n</code></pre>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/language/operators\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/operators</a> why my suggested prototypes are more appropriate than what you have.</p>\n"}], "owner": {"reputation": 263, "user_id": 5020085, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0yd69.png?s=128&g=1", "display_name": "missjohanna", "link": "https://stackoverflow.com/users/5020085/missjohanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 30895839, "answer_count": 3, "score": 0, "last_activity_date": 1435160061, "creation_date": 1434554245, "last_edit_date": 1435160061, "question_id": 30895712, "link": "https://stackoverflow.com/questions/30895712/c-need-solution-for-converting-from-const-string", "title": "C++ Need Solution for converting from const string", "body": "<p>I have a (little) Problem. I was going to program a little string class in C++, which should allow you to use a string in the same way as a string in C#. </p>\n\n<p>I wrote the following class:</p>\n\n<pre><code>class STRING\n{\nprivate:\n  char * data;\n  int length;\n\npublic:\n  STRING();\n  STRING(char * data);\n  //string(char[] data, int length);\n\n  void setData(char * data);\n\n  int Length();\n  char * toString();\n\n\n  STRING operator = (STRING data);\n  STRING operator = (char * data);\n  STRING operator = (char data);\n  STRING operator = (const string data);\n  STRING operator + (STRING data);\n  friend ostream&amp; operator&lt;&lt;(ostream&amp;os, const STRING&amp; data);\n\n\n  void display();\n\n\n};\n</code></pre>\n\n<p>It is working. But I have one problem. If I try to initiate a new object of my class and want to set it with a value like: </p>\n\n<pre><code>STRING test1;\ntest1 = \"TEST\";\n</code></pre>\n\n<p>The compiler give me the following warning:<br>\nwarning: deprecated conversion from string constant to \u2018char*\u2019 \n[-Wwrite-strings] test1 = \"TEST\";</p>\n\n<p>So I try to get a solution in form of an operation overloading. I tried this:</p>\n\n<pre><code>  STRING STRING::operator = (const string data)\n  {\n     char * tmp;\n     int laenge;\n     tmp = (char *) data\n     laenge = strlen(tmp);\n     this-&gt;data = new char[laenge + 1];\n     this-&gt;length = laenge;\n\n     strcpy(this-&gt;data, tmp);\n  }\n</code></pre>\n\n<p>But it dont work and I'm out of ideas. Of cause it would work if I initiate it with:</p>\n\n<pre><code>STRING test1;\ntest1 = (char *) \"TEST\";\n</code></pre>\n\n<p>but my Dream is to use it like: STRING test1; test1 = \"TEST\"; or \nSTRING test1 = \"TEST\";</p>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-2013"], "answers": [{"comments": [{"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1434557729, "post_id": 30896811, "comment_id": 49833036, "body": "Actually, you can&#39;t choose not to install C++"}], "tags": [], "owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "is_accepted": true, "score": 0, "last_activity_date": 1434557120, "creation_date": 1434557120, "answer_id": 30896811, "question_id": 30895684, "link": "https://stackoverflow.com/questions/30895684/visual-studio-2013-ultimate-missing-c-projects-templates/30896811#30896811", "title": "Visual Studio 2013 Ultimate - Missing C++ Projects Templates", "body": "<p>I had the same issue with VS2012, some time ago. I've solved <strong>installing again</strong>. Not sure if VS2013 makes you configure if you want to install \"C++ stuff\" during the installation process.</p>\n"}], "owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 30896811, "answer_count": 1, "score": 1, "last_activity_date": 1434557120, "creation_date": 1434554158, "question_id": 30895684, "link": "https://stackoverflow.com/questions/30895684/visual-studio-2013-ultimate-missing-c-projects-templates", "title": "Visual Studio 2013 Ultimate - Missing C++ Projects Templates", "body": "<p>I installed fresh install of my <code>Microsoft Visual Studio Ultimate 2013</code> and launched it. I then went to <code>FILE -&gt; New -&gt; Project</code> and wanted to create new C++ project. However, there is no option for creating such project now (I know it was there before, on my second laptop). I restarted installer and pressed repair, but nothing changed. I also tried to uninstall it and then install it back again. I also have <code>MSVC2015 RC</code> and I can create C++ Projects there. During an installation I was asked if I want to install certain features as well and I did install everything that was offered.</p>\n\n<p>This is how my <code>New Project</code> looks like. <img src=\"https://i.stack.imgur.com/8zg2L.png\" alt=\"New Project Window\"></p>\n\n<p>What is going on in there? Did I forget to install something?</p>\n"}, {"tags": ["c++", "qt", "user-interface", "graphics", "qgraphicspixmapitem"], "comments": [{"owner": {"reputation": 386, "user_id": 4806529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cca45f23ad6a0f263f17c7bddea23fe5?s=128&d=identicon&r=PG", "display_name": "dazewell", "link": "https://stackoverflow.com/users/4806529/dazewell"}, "edited": false, "score": 1, "creation_date": 1434556261, "post_id": 30895619, "comment_id": 49831973, "body": "What compilation error? What is <code>qDebug()</code> output?"}, {"owner": {"reputation": 402, "user_id": 4298311, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/46df054064c954e6443ef752f4b85482?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil Pandey", "link": "https://stackoverflow.com/users/4298311/swapnil-pandey"}, "reply_to_user": {"reputation": 386, "user_id": 4806529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cca45f23ad6a0f263f17c7bddea23fe5?s=128&d=identicon&r=PG", "display_name": "dazewell", "link": "https://stackoverflow.com/users/4806529/dazewell"}, "edited": false, "score": 0, "creation_date": 1434556576, "post_id": 30895619, "comment_id": 49832193, "body": "@dazewell: The compilation error is : &quot;error: no matching function for call to &#39;moveship::moveship(QPixmap&amp;)&#39;           moveship * player = new moveship(q);                                             ^&quot;"}, {"owner": {"reputation": 386, "user_id": 4806529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cca45f23ad6a0f263f17c7bddea23fe5?s=128&d=identicon&r=PG", "display_name": "dazewell", "link": "https://stackoverflow.com/users/4806529/dazewell"}, "edited": false, "score": 0, "creation_date": 1434556745, "post_id": 30895619, "comment_id": 49832336, "body": "you shoud have updated your question with this notice, because it changes the whole question. Don&#39;t you see what compiler says to you? Check out the signature of your <code>moveship</code> constructor. You didn&#39;t show it or it doesn&#39;t exist at all?"}, {"owner": {"reputation": 402, "user_id": 4298311, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/46df054064c954e6443ef752f4b85482?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil Pandey", "link": "https://stackoverflow.com/users/4298311/swapnil-pandey"}, "reply_to_user": {"reputation": 386, "user_id": 4806529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cca45f23ad6a0f263f17c7bddea23fe5?s=128&d=identicon&r=PG", "display_name": "dazewell", "link": "https://stackoverflow.com/users/4806529/dazewell"}, "edited": false, "score": 0, "creation_date": 1434557086, "post_id": 30895619, "comment_id": 49832558, "body": "@dazewell Question edited"}, {"owner": {"reputation": 402, "user_id": 4298311, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/46df054064c954e6443ef752f4b85482?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil Pandey", "link": "https://stackoverflow.com/users/4298311/swapnil-pandey"}, "reply_to_user": {"reputation": 386, "user_id": 4806529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cca45f23ad6a0f263f17c7bddea23fe5?s=128&d=identicon&r=PG", "display_name": "dazewell", "link": "https://stackoverflow.com/users/4806529/dazewell"}, "edited": false, "score": 0, "creation_date": 1434557134, "post_id": 30895619, "comment_id": 49832588, "body": "@dazewell sorry for being a noob but I do not know how to solve this problem :(. This is my first experience with qt and I&#39;ve got this as a school project."}], "answers": [{"comments": [{"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "edited": false, "score": 0, "creation_date": 1434558369, "post_id": 30897034, "comment_id": 49833484, "body": "Wouldn&#39;t the parent constructor be called automagically ? My guess was the argument was wrong... my guess was wrong..."}, {"owner": {"reputation": 386, "user_id": 4806529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cca45f23ad6a0f263f17c7bddea23fe5?s=128&d=identicon&r=PG", "display_name": "dazewell", "link": "https://stackoverflow.com/users/4806529/dazewell"}, "reply_to_user": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "edited": false, "score": 0, "creation_date": 1434558726, "post_id": 30897034, "comment_id": 49833723, "body": "@Thalia no, it won&#39;t. There will be default constructor created <code>moveship();</code>, and it doesn&#39;t have QPixmap as an argument and that&#39;s what causes the error. My implementation <b>does</b> call parent&#39;s constructor with given to the child class parameters."}, {"owner": {"reputation": 402, "user_id": 4298311, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/46df054064c954e6443ef752f4b85482?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil Pandey", "link": "https://stackoverflow.com/users/4298311/swapnil-pandey"}, "edited": false, "score": 0, "creation_date": 1434571055, "post_id": 30897034, "comment_id": 49841341, "body": "thanks a lot @dazewell. I know that was quite stupid on my part. Apologies."}], "tags": [], "owner": {"reputation": 386, "user_id": 4806529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cca45f23ad6a0f263f17c7bddea23fe5?s=128&d=identicon&r=PG", "display_name": "dazewell", "link": "https://stackoverflow.com/users/4806529/dazewell"}, "is_accepted": false, "score": 0, "last_activity_date": 1434557770, "creation_date": 1434557770, "answer_id": 30897034, "question_id": 30895619, "link": "https://stackoverflow.com/questions/30895619/move-a-qgraphicspixmapitem-through-keyboard/30897034#30897034", "title": "Move a QGraphicsPixmapItem through keyboard", "body": "<p>Well, there's nothing common in the question you ask and the error you get. As I see, you don't have any constructor of your class <code>moveship</code>, and that's exactly what compiler is telling to you. There's got to be smth like:</p>\n\n<pre><code>moveship(const QPixmap &amp; pixmap, QGraphicsItem * parent = 0)\n</code></pre>\n\n<p>in the header of your class with some implementation, of course and as I see, it's trivial: </p>\n\n<pre><code>moveship::moveship(const QPixmap &amp; pixmap, QGraphicsItem * parent = 0) \n                 : QGraphicsItem(pixmap, parent);\n</code></pre>\n\n<p>That's the base knowledge you should have when using c++. Here's nothing special about Qt. I advise you to learn c++ a bit.</p>\n\n<p>BTW, reimplemented <code>...event(...)</code> functions is recommended to place in the <code>protected</code> part of the class and also declare it to be <code>virtual</code>.</p>\n"}], "owner": {"reputation": 402, "user_id": 4298311, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/46df054064c954e6443ef752f4b85482?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil Pandey", "link": "https://stackoverflow.com/users/4298311/swapnil-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434558027, "creation_date": 1434553997, "last_edit_date": 1434556980, "question_id": 30895619, "link": "https://stackoverflow.com/questions/30895619/move-a-qgraphicspixmapitem-through-keyboard", "title": "Move a QGraphicsPixmapItem through keyboard", "body": "<p>I have a a character added via QgraphicsPixmapitem and now I want to move it by pressing the arrow keys on the keyboard. But I can't find a way. It gives <strong>compilation error</strong>. Help me please!</p>\n\n<p>moveship.h (header file for my QPixmapItem)</p>\n\n<pre><code>#ifndef MOVESHIP_H\n#define MOVESHIP_H\n#include &lt;QGraphicsPixmapItem&gt;\n\nclass moveship: public QGraphicsPixmapItem\n{\n    public:\n    void keyPressEvent(QKeyEvent *event);\n};\n#endif // MOVESHIP_H\n</code></pre>\n\n<p>I am just checking if it recognises any key press or not.</p>\n\n<p>Implementation of keyPressEvent:</p>\n\n<pre><code>#include \"moveship.h\"\n#include &lt;QDebug&gt;\n\nvoid moveship::keyPressEvent(QKeyEvent *event)\n{\n    qDebug() &lt;&lt; \"moved\";\n}\n</code></pre>\n\n<p>My main source file:</p>\n\n<pre><code>#include&lt;QApplication&gt;\n#include&lt;QGraphicsScene&gt;\n#include&lt;QGraphicsView&gt;\n#include&lt;QGraphicsPixmapItem&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    QGraphicsScene * scene = new QGraphicsScene();\n    QGraphicsView * view = new QGraphicsView(scene);\n\n    QPixmap q = QPixmap(\"://images/player.png\");\n    if(q.isNull())\n    {\n        printf(\"null\\n\");\n    }\n    else\n    {\n        moveship * player = new moveship(q);\n        scene-&gt;addItem(player);\n    }\n\n    view-&gt;resize(500,500);\n    view-&gt;show();\n\n    return a.exec();\n}\n</code></pre>\n\n<p><strong>Please Help :(</strong></p>\n\n<p><strong>Edit:</strong></p>\n\n<p>The <strong>compilation error</strong> which I get is:</p>\n\n<blockquote>\n  <p>error: no matching function for call to 'moveship::moveship(QPixmap&amp;)'<br>\n           moveship * player = new moveship(q);</p>\n</blockquote>\n"}, {"tags": ["c++", "visual-studio", "qt", "opencv", "visual-studio-2013"], "comments": [{"owner": {"reputation": 12459, "user_id": 2890724, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/or6PX.jpg?s=128&g=1", "display_name": "Raydel Miranda", "link": "https://stackoverflow.com/users/2890724/raydel-miranda"}, "edited": false, "score": 0, "creation_date": 1434555640, "post_id": 30895361, "comment_id": 49831513, "body": "sorry I will make you a silly question: Have you cheked the file is actually in the directory <code>$(OPENCV_DIR)\\build\\x64\\vc12\\lib</code>?"}, {"owner": {"reputation": 111, "user_id": 5012066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-B2TNqH4BXzs/AAAAAAAAAAI/AAAAAAAAAPo/WG8ppJ6OtzE/photo.jpg?sz=128", "display_name": "Joissa.R", "link": "https://stackoverflow.com/users/5012066/joissa-r"}, "reply_to_user": {"reputation": 12459, "user_id": 2890724, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/or6PX.jpg?s=128&g=1", "display_name": "Raydel Miranda", "link": "https://stackoverflow.com/users/2890724/raydel-miranda"}, "edited": false, "score": 0, "creation_date": 1434556198, "post_id": 30895361, "comment_id": 49831933, "body": "@RaydelMiranda Its actually not in that location, it is in $(OPENCV_DIR)\\build\\x64\\vc12\\staticlib. Do you think this would cause the error?"}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "edited": false, "score": 1, "creation_date": 1434556975, "post_id": 30895361, "comment_id": 49832474, "body": "it definitely would !"}, {"owner": {"reputation": 654, "user_id": 4079123, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0c28786e5157a528eb01657fda5a46b6?s=128&d=identicon&r=PG&f=1", "display_name": "Bharadwaj", "link": "https://stackoverflow.com/users/4079123/bharadwaj"}, "edited": false, "score": 0, "creation_date": 1434557334, "post_id": 30895361, "comment_id": 49832748, "body": "Just a suggestion, since you say its a multiproject solution, Did u check if all the projects are compiled in <code>Debug</code> mode itself? Because even if a single project is built is <code>Release</code> mode, then you wont get <code>d</code> letter in the library files generated with the <code>*d.lib</code> name."}, {"owner": {"reputation": 111, "user_id": 5012066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-B2TNqH4BXzs/AAAAAAAAAAI/AAAAAAAAAPo/WG8ppJ6OtzE/photo.jpg?sz=128", "display_name": "Joissa.R", "link": "https://stackoverflow.com/users/5012066/joissa-r"}, "reply_to_user": {"reputation": 654, "user_id": 4079123, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0c28786e5157a528eb01657fda5a46b6?s=128&d=identicon&r=PG&f=1", "display_name": "Bharadwaj", "link": "https://stackoverflow.com/users/4079123/bharadwaj"}, "edited": false, "score": 0, "creation_date": 1434557510, "post_id": 30895361, "comment_id": 49832870, "body": "@Bharadwaj Im not sure if this is what you&#39;re asking, but when I build the whole solution, I have it set to Debug x64. And when I click on Config. Properties for each project, they&#39;re all on Debug"}, {"owner": {"reputation": 111, "user_id": 5012066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-B2TNqH4BXzs/AAAAAAAAAAI/AAAAAAAAAPo/WG8ppJ6OtzE/photo.jpg?sz=128", "display_name": "Joissa.R", "link": "https://stackoverflow.com/users/5012066/joissa-r"}, "edited": false, "score": 0, "creation_date": 1434559073, "post_id": 30895361, "comment_id": 49833978, "body": "Also, did I need to download OpenCV, if all the needed files for it were given in the folder?"}, {"owner": {"reputation": 4912, "user_id": 1953533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Vs4v8.jpg?s=128&g=1", "display_name": "CroCo", "link": "https://stackoverflow.com/users/1953533/croco"}, "edited": false, "score": 0, "creation_date": 1434580144, "post_id": 30895361, "comment_id": 49845848, "body": "You better compile the library by the compiler you have. It is easy. What you need is CMake and Visual Studio Compiler."}], "owner": {"reputation": 111, "user_id": 5012066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-B2TNqH4BXzs/AAAAAAAAAAI/AAAAAAAAAPo/WG8ppJ6OtzE/photo.jpg?sz=128", "display_name": "Joissa.R", "link": "https://stackoverflow.com/users/5012066/joissa-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2434, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434557344, "creation_date": 1434553289, "last_edit_date": 1434557344, "question_id": 30895361, "link": "https://stackoverflow.com/questions/30895361/fatal-error-lnk1181-cannot-open-input-file-opencv-core300d-lib", "title": "fatal error LNK1181: cannot open input file &gt; &#39;opencv_core300d.lib&#39;", "body": "<p>I am trying to run a multi project file from another developer. I am using a Mac computer with a Windows 7 bootcamp partition. I'm running the code on Visual Studios 2013 with OpenCV 3.0 and Qt.5.4.2.<br>\n(Im not sure if this affects the issue, but I have all these programs basically all on separate external USB drives because there isnt enough space on my partition) </p>\n\n<p>The issue I think is that the original developer used Visual Studios 2012 and OpenCV 2.4.9.  In the files he gave to me, he included the necessary OpenCv files, but I installed OpenCV before realizing this and have tried to change the Config Properties to include the directory for the OpenCV 3.0.  Shouldn't this work? </p>\n\n<p>The exact error is : </p>\n\n<blockquote>\n  <p>LINK : fatal error LNK1181: cannot open input file\n  'opencv_core300d.lib'</p>\n</blockquote>\n\n<p>I'll also include Config Properties:</p>\n\n<h1><strong>VC++ Directories</strong></h1>\n\n<p><em>Executable Directories</em>: C:\\opencv\\build\\x64\\vc12\\bin;$(VCInstallDir)\\bin\\x86_amd64;$(VCInstallDir)\\bin;$(ExecutablePath)</p>\n\n<p><em>Include Directories</em>: $(OPENCV_DIR)\\build\\include;$(IncludePath)</p>\n\n<p><em>Library Directories</em>: </p>\n\n<p>C:\\opencv\\build\\x64\\vc12\\staticlib;C:\\opencv\\build\\x64\\vc12\\lib;E:\\eyegaze\\eyegaze\\EyeGazeDemo;$(LibraryPath)</p>\n\n<h1><strong>C/C++</strong></h1>\n\n<p><em>Additional Include Directories</em>: </p>\n\n<ul>\n<li>..\\Libraries\\OpenCV\\include;</li>\n<li>C:\\opencv\\build\\include\\opencv2;->Changed to C:\\opencv\\build\\include</li>\n<li>..\\Libraries\\Intraface\\include;</li>\n<li>$(QTDIR)\\include;</li>\n<li>$(OPENCV_DIR)\\include;</li>\n<li>$(QTDIR)\\include\\QtWidgets;</li>\n<li>$(QTDIR)\\include\\QtGui;</li>\n<li>$(QTDIR)\\include\\QtCore;</li>\n<li>debug;</li>\n<li>.;</li>\n<li>$(QTDIR)\\mkspecs\\win32-msvc2012;</li>\n<li>.\\GeneratedFiles;</li>\n<li>%(AdditionalIncludeDirectories)</li>\n</ul>\n\n<h1><strong>Linker</strong></h1>\n\n<h2>General</h2>\n\n<p><em>Additional Library Directories</em>:</p>\n\n<ul>\n<li>$(OPENCV_DIR)\\build\\x64\\vc12\\staticlib;</li>\n<li>$(OPENCV_DIR)\\build\\x64\\vc12\\lib;</li>\n<li>$(QTDIR)\\lib;</li>\n<li>E:\\eyegaze\\eyegaze\\Libraries\\OpenCV\\lib;->removed</li>\n<li>E:\\eyegaze\\eyegaze\\Libraries\\Intraface\\lib;</li>\n<li>E:\\eyegaze\\eyegaze\\EyeGazeDemo;</li>\n<li>%(AdditionalLibraryDirectories)\n<h2>Input</h2></li>\n</ul>\n\n<p><em>Additional Dependencies</em>:</p>\n\n<ul>\n<li>glu32.lib;</li>\n<li>opengl32.lib;</li>\n<li>gdi32.lib;</li>\n<li>user32.lib;</li>\n<li>$(QTDIR)\\lib\\qtmaind.lib;</li>\n<li>$(QTDIR)\\lib\\Qt5Cored.lib;</li>\n<li>$(QTDIR)\\lib\\Qt5Widgetsd.lib;</li>\n<li>$(QTDIR)\\lib\\Qt5Guid.lib;</li>\n<li>%(AdditionalDependencies);</li>\n<li>opencv_core300d.lib;</li>\n<li>opencv_imgproc300d.lib;</li>\n<li>opencv_highgui300d.lib;</li>\n<li>opencv_objdetect300d.lib;</li>\n<li>opencv_ml300d.lib;</li>\n<li>E:\\eyegaze\\eyegaze\\Libraries\\Intraface\\lib\\IntraFaceDLL-x86d.lib</li>\n</ul>\n\n<p>Also I was wondering what is the difference between Configuration Properties->C/C++->Additional Include Directories and Configuration Properties->VC++ Directories->Include Directories? </p>\n\n<p>Thank You in Advance!</p>\n\n<h1>Update</h1>\n\n<p>I changed a few things in the configuration properties (noted above), and now the error is: </p>\n\n<blockquote>\n  <p>1>opencv_core249.lib(opencv_core249.dll) : fatal error LNK1112: module\n  machine type 'X86' conflicts with target machine type 'x64'</p>\n</blockquote>\n\n<p>My computer is x64 so I had changed all the settings for x64...\nIm not sure If this made it worse, or if I fixed the problem? </p>\n"}, {"tags": ["c++", "qt", "memory-management"], "answers": [{"comments": [{"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 1, "creation_date": 1434701396, "post_id": 30895964, "comment_id": 49901424, "body": "thanks for the clear answer. welcome to SO. Looking forward to read your future answers."}], "tags": [], "owner": {"reputation": 386, "user_id": 4806529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cca45f23ad6a0f263f17c7bddea23fe5?s=128&d=identicon&r=PG", "display_name": "dazewell", "link": "https://stackoverflow.com/users/4806529/dazewell"}, "is_accepted": true, "score": 4, "last_activity_date": 1434555573, "last_edit_date": 1434555573, "creation_date": 1434554900, "answer_id": 30895964, "question_id": 30895304, "link": "https://stackoverflow.com/questions/30895304/qevent-ownership/30895964#30895964", "title": "QEvent ownership", "body": "<blockquote>\n  <p>event = &stackevent; //valid ??</p>\n</blockquote>\n\n<p>Usually that's not safe, but in this case it's valid, because the function <a href=\"http://doc.qt.io/qt-5/qcoreapplication.html#notify\" rel=\"nofollow\" title=\"notify\"><code>notify</code></a> won't return, untill the event is handled (or not) by someone (it means that <code>stackevent</code> will be \"alive\" during this operation).</p>\n\n<blockquote>\n  <p>delete heapevent; //valid? or lost ownership?</p>\n</blockquote>\n\n<p>Yap, that's valid too, because normally nobody should hold a pointer to the QEvent (and delete it, of course) and btw it has already been processed.</p>\n\n<p>The situation <strong>significantly</strong> changes when <a href=\"http://doc.qt.io/qt-5/qcoreapplication.html#postEvent\" rel=\"nofollow\" title=\"postEvent\"><code>postEvent</code></a> is used:</p>\n\n<blockquote>\n  <p>The event must be <strong>allocated on the heap</strong> since the post event queue will take ownership of the event and delete it once it has been posted. It is not safe to access the event after it has been posted.</p>\n</blockquote>\n\n<p>Well, I guess it's more suitable to use stack allocation in your situation and passing a pointer to it in case of any possible problems (memory automatically will be released).</p>\n"}], "owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 30895964, "answer_count": 1, "score": 1, "last_activity_date": 1434555573, "creation_date": 1434553148, "question_id": 30895304, "link": "https://stackoverflow.com/questions/30895304/qevent-ownership", "title": "QEvent ownership", "body": "<p>I want to send both predefined and custom <code>QEvent</code> to a Qt application.\nIs the event required be allocated on the heap or can I just pass the pointer to a object on the stack?</p>\n\n<pre><code>QKeyEvent stackevent(QEvent::KeyPress);\nQKeyEvent* heapevent = new QKeyEvent(QEvent::KeyPress);\n\nQEvent * event;\nevent = &amp;stackevent; //valid ??\nevent = heapevent;\nQCoreApplication()-&gt;notify(someobj, event);\ndelete heapevent; //valid? or lost ownership?\n</code></pre>\n"}, {"tags": ["c++", "vector", "allocation"], "comments": [{"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1434553251, "post_id": 30895294, "comment_id": 49829781, "body": "<i>Does anyone knows what can be causing the issue OR how I can potentially track what is causing this issue</i>  Track it with <code>gdb</code>."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 7, "creation_date": 1434553289, "post_id": 30895294, "comment_id": 49829817, "body": "I&#39;m really curious, why did you <code>new</code> the vector? (I ask because 9/10 times, when I see this on SO it was done for a bad reason)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1434553354, "post_id": 30895294, "comment_id": 49829867, "body": "You really shouldn&#39;t be <code>new</code>ing standard containers."}, {"owner": {"reputation": 9041, "user_id": 3216312, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/532212e9b26bc1e386a9f13dd8fa520a?s=128&d=identicon&r=PG&f=1", "display_name": "Petr", "link": "https://stackoverflow.com/users/3216312/petr"}, "edited": false, "score": 0, "creation_date": 1434553365, "post_id": 30895294, "comment_id": 49829877, "body": "Use valgrind to check for any out-of-bound access, etc."}, {"owner": {"reputation": 38771, "user_id": 31317, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3fde1f239875d7d7ce65c12108d6fdd8?s=128&d=identicon&r=PG", "display_name": "peterchen", "link": "https://stackoverflow.com/users/31317/peterchen"}, "edited": false, "score": 1, "creation_date": 1434553408, "post_id": 30895294, "comment_id": 49829911, "body": "Tge crash is a <i>symptom</i>. The <i>cause</i> is most likely somewhere else, probably earlier and in completely unrelated code. Enable memory checks and/or use a memory checker. Note that the &quot;minimal code&quot; you posted does not reliably reproduce the problem."}, {"owner": {"reputation": 1094, "user_id": 3465514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614de7121749ba3f768bee7757b674e6?s=128&d=identicon&r=PG", "display_name": "smagnan", "link": "https://stackoverflow.com/users/3465514/smagnan"}, "reply_to_user": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1434553568, "post_id": 30895294, "comment_id": 49830019, "body": "@VictorPolevoy I will check with gdb and valgrind on my linux as soon as possible (but I an currently working under windows and I am not really used too windows equivalents)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1434553594, "post_id": 30895294, "comment_id": 49830037, "body": "You don&#39;t need tools (other than your brain, that is) to construct a testcase."}, {"owner": {"reputation": 1094, "user_id": 3465514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614de7121749ba3f768bee7757b674e6?s=128&d=identicon&r=PG", "display_name": "smagnan", "link": "https://stackoverflow.com/users/3465514/smagnan"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1434553794, "post_id": 30895294, "comment_id": 49830168, "body": "@Borgleader Yes I think it was actually a bad idea to do so (I return that pointer at the end of the function because I need to read (and read only) the content somewhere else). But I did my conception quite rapidly as I needed something functionnal quickly for testing but I think the global structure of the application needs to be reworked."}, {"owner": {"reputation": 1094, "user_id": 3465514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614de7121749ba3f768bee7757b674e6?s=128&d=identicon&r=PG", "display_name": "smagnan", "link": "https://stackoverflow.com/users/3465514/smagnan"}, "reply_to_user": {"reputation": 38771, "user_id": 31317, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3fde1f239875d7d7ce65c12108d6fdd8?s=128&d=identicon&r=PG", "display_name": "peterchen", "link": "https://stackoverflow.com/users/31317/peterchen"}, "edited": false, "score": 0, "creation_date": 1434553966, "post_id": 30895294, "comment_id": 49830301, "body": "@peterchen You may be right as I had a quite similar problem before (when destroying vectors, as I was using pointers, so I get rid of pointers). Yes my minimal code is too minimal ..."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1434554176, "post_id": 30895294, "comment_id": 49830446, "body": "That you don&#39;t see &quot;Debug text&quot; is not a reliable indication of the location of the crash.  If you sent that out AND flushed, then you could count on it."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1434554319, "post_id": 30895294, "comment_id": 49830550, "body": "@smagnan I just tried out <a href=\"https://github.com/DynamoRIO/drmemory/wiki/Downloads\" rel=\"nofollow noreferrer\">Dr. Memory</a>, a memory checker akin to valgrind. Works like a charm :)"}], "answers": [{"comments": [{"owner": {"reputation": 1094, "user_id": 3465514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614de7121749ba3f768bee7757b674e6?s=128&d=identicon&r=PG", "display_name": "smagnan", "link": "https://stackoverflow.com/users/3465514/smagnan"}, "edited": false, "score": 0, "creation_date": 1434554329, "post_id": 30895538, "comment_id": 49830555, "body": "As stated before the crash occurs before any access with [] to <code>ret</code> elements."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1094, "user_id": 3465514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614de7121749ba3f768bee7757b674e6?s=128&d=identicon&r=PG", "display_name": "smagnan", "link": "https://stackoverflow.com/users/3465514/smagnan"}, "edited": false, "score": 0, "creation_date": 1434554531, "post_id": 30895538, "comment_id": 49830699, "body": "Is this the first vector you are creating this way?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 1094, "user_id": 3465514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614de7121749ba3f768bee7757b674e6?s=128&d=identicon&r=PG", "display_name": "smagnan", "link": "https://stackoverflow.com/users/3465514/smagnan"}, "edited": false, "score": 0, "creation_date": 1434554545, "post_id": 30895538, "comment_id": 49830708, "body": "@smagnan : you said the allocation was in a loop. Unless crash happens at first iteration you already passed once in the loop accessing one vector, or am I wrong?"}, {"owner": {"reputation": 1094, "user_id": 3465514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614de7121749ba3f768bee7757b674e6?s=128&d=identicon&r=PG", "display_name": "smagnan", "link": "https://stackoverflow.com/users/3465514/smagnan"}, "edited": false, "score": 0, "creation_date": 1434554614, "post_id": 30895538, "comment_id": 49830761, "body": "@Slava, no, not the first, so you may be right actually. Could be a corruption on a previous vector maybe? What I found strange is that an out of bound shoud have caused my program to crash before no?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1094, "user_id": 3465514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614de7121749ba3f768bee7757b674e6?s=128&d=identicon&r=PG", "display_name": "smagnan", "link": "https://stackoverflow.com/users/3465514/smagnan"}, "edited": false, "score": 0, "creation_date": 1434554680, "post_id": 30895538, "comment_id": 49830822, "body": "@smagnan yes that exactly what I meant"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1434553753, "creation_date": 1434553753, "answer_id": 30895538, "question_id": 30895294, "link": "https://stackoverflow.com/questions/30895294/new-vector-with-fixed-size-causes-crash/30895538#30895538", "title": "New vector with fixed size causes crash", "body": "<p>Look like your program stopped crashing not because you create a vector without size, but because you use <code>push_back()</code>. The fact that replacing <code>operator[]</code> with <code>push_back()</code> removes your symptom points that somewhere else you access element in a vector out of bounds, corrupt your memory and suddenly get it crashed. Check your code where you access the data.</p>\n"}, {"comments": [{"owner": {"reputation": 1094, "user_id": 3465514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614de7121749ba3f768bee7757b674e6?s=128&d=identicon&r=PG", "display_name": "smagnan", "link": "https://stackoverflow.com/users/3465514/smagnan"}, "edited": false, "score": 0, "creation_date": 1434554134, "post_id": 30895623, "comment_id": 49830417, "body": "Actually I am using <code>(*ret)[...]</code>. And the crash appears before any access to any <code>ret</code> element"}], "tags": [], "owner": {"reputation": 2394, "user_id": 4952137, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c40d9f94080a45d91ee151dfe960cee3?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Sparber", "link": "https://stackoverflow.com/users/4952137/thomas-sparber"}, "is_accepted": false, "score": 0, "last_activity_date": 1434554011, "creation_date": 1434554011, "answer_id": 30895623, "question_id": 30895294, "link": "https://stackoverflow.com/questions/30895294/new-vector-with-fixed-size-causes-crash/30895623#30895623", "title": "New vector with fixed size causes crash", "body": "<p>As you wrote it seems like you are trying to Access it using <code>ret[...]</code> right :-)? Sorry for my smile but this happens when you use a pointer to a vector...</p>\n\n<p>If this is the case you Need to replace it with <code>(*ret)[...]</code></p>\n"}], "owner": {"reputation": 1094, "user_id": 3465514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614de7121749ba3f768bee7757b674e6?s=128&d=identicon&r=PG", "display_name": "smagnan", "link": "https://stackoverflow.com/users/3465514/smagnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1434559148, "creation_date": 1434553127, "last_edit_date": 1434559148, "question_id": 30895294, "link": "https://stackoverflow.com/questions/30895294/new-vector-with-fixed-size-causes-crash", "title": "New vector with fixed size causes crash", "body": "<h2> Problem </h2>\n\n<p>I had a problem randomly appearing when creating a new vector (pointer) with fixed initial size.<br></p>\n\n<pre><code>std::vector&lt;double&gt; * ret = new std::vector&lt;double&gt;(size);\n</code></pre>\n\n<p>This <strong>sometimes</strong> causes my program to crash an I don't really get why ... maybe stack corruption? I didn't find any explanation on what can cause this issue on the web sadly.</p>\n\n<p><em>Example:</em></p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>// &lt;- ... Some independant code\n// [size] is an unsigned int passed as parameter to the function\ncout &lt;&lt; size &lt;&lt; endl;\nstd::vector&lt;double&gt; * ret = new std::vector&lt;double&gt;(size);\ncout &lt;&lt; \"Debug text\" &lt;&lt; endl;\n// More code ... -&gt;\n</code></pre>\n\n<p><strong>EDIT:</strong> I will update the code as soon as possible to have a clear, minimal, reproductible to have a correct question according to: <a href=\"http://How%20to%20create%20a%20Minimal,%20Complete,%20and%20Verifiable%20example\" rel=\"nofollow\">How to create a Minimal, Complete, and Verifiable example</a> </p>\n\n<p><strong>Output</strong></p>\n\n<blockquote>\n  <p>100</p>\n</blockquote>\n\n<p>... Then it crashes (the trace <code>\"Debug text\"</code> is not printed and the <code>size</code> is correct)<br>\nI tried putting the critical line of code inside a <code>try catch</code> as some people suggested (for memory related errors) but no exception is catched and I still get the crash.<br>\nThis code is inside a function called multiple times (with various values of <code>size</code>, always between <code>1</code> and <code>1000</code>) and sometimes the function end up witout problem, sometimes not (the value of <code>size</code> does not seem to have any infulence but maybe I'm wrong). </p>\n\n<p><strong>My \"solution\" (you can skip this part)</strong></p>\n\n<p>I adapted my code to use a pointer to vector without initial size</p>\n\n<pre><code>std::vector&lt;double&gt; * ret; \n</code></pre>\n\n<p>and I uses <code>push_back()</code> instead of <code>[]</code>.\n<code>[]</code> was quicker for my algorithm due to how the vector was filled at first (elements order is important and I get positions from external file but I still need a vector and not an array for its dynamic aspect later in code), but I adapted everything to use <code>push_back()</code> (less efficient in my case as I now need more iterations but nothing critical). </p>\n\n<h2>Question</h2>\n\n<p>In short: Does anyone knows what can be causing the issue OR how I can potentially track what is causing this issue?</p>\n"}, {"tags": ["c++", "templates", "abstract"], "comments": [{"owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "edited": false, "score": 1, "creation_date": 1434552769, "post_id": 30895106, "comment_id": 49829368, "body": "because you are implementing in Bar <code>add(const TVALUE&amp;)</code>, with reference. It&#39;s a different function than the one declared as pure virtual in base class"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "edited": false, "score": 2, "creation_date": 1434552827, "post_id": 30895106, "comment_id": 49829421, "body": "You would see what @Hcorg said is true by modifying the definition in <code>Bar</code> to <code>void add(const TVALUE&amp; item) override;</code> and the compiler would tell you that you aren&#39;t overriding a function from the base class."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1434553378, "post_id": 30895106, "comment_id": 49829889, "body": "That&#39;s not the issue here, as <code>TIN</code> is <code>TOUT&amp;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1434553488, "post_id": 30895316, "comment_id": 49829971, "body": "@Beakie: If <code>TIN == TOUT&amp;</code>, <code>const TIN</code> is still different from <code>const TOUT&amp;</code>. In that case <code>const TIN</code> is still just <code>TOUT&amp;</code>, which is not the same as <code>const TOUT&amp;</code>."}, {"owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1434553515, "post_id": 30895316, "comment_id": 49829990, "body": "the first function accepts as parameter a variable of type TIN, the second one accepts a reference to a variable. So even is TIN and TOUT are the same data type, a reference type and a variable are not the same thing"}], "tags": [], "owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "is_accepted": false, "score": 2, "last_activity_date": 1434553182, "creation_date": 1434553182, "answer_id": 30895316, "question_id": 30895106, "link": "https://stackoverflow.com/questions/30895106/cannot-instantiate-abstract-class-why-is-the-template-parameter-reference-cau/30895316#30895316", "title": "Cannot instantiate abstract class: Why is the template parameter (reference) causing this?", "body": "<p>Your problem goes back to basic concepts like function signature: a function signature/prototype is given by the function name, the number of parameters, datatype of parameters and the order of appearance of those parameters.</p>\n\n<p>For any two functions if any of the above differ, than you are dealing with two different functions. </p>\n\n<p>More exactly, these two represent two different signatures:</p>\n\n<pre><code>virtual void add(const TIN item) = 0; \nvirtual void add(const TOUT&amp; item) = 0;\n</code></pre>\n\n<p>Since you implement only the second one in the derived class, you get the error.</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1434553268, "creation_date": 1434553268, "answer_id": 30895353, "question_id": 30895106, "link": "https://stackoverflow.com/questions/30895106/cannot-instantiate-abstract-class-why-is-the-template-parameter-reference-cau/30895353#30895353", "title": "Cannot instantiate abstract class: Why is the template parameter (reference) causing this?", "body": "<p>We can simply your example further to:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct IFoo {\n    virtual void add(const T item) = 0;\n};\n\ntemplate &lt;typename T&gt;\nstruct Bar : IFoo&lt;T&amp;&gt; {\n    void add(const T&amp; item) { }\n};\n</code></pre>\n\n<p>In <code>Bar</code>, you are taking <code>item</code> as a reference to <code>const T</code>. In <code>IFoo</code>, you are declaring a pure virtual method that takes a <code>const</code> reference to <code>T</code>. But all references are inherently <code>const</code>, so that's redundant - it's equivalent to just taking a reference to <code>T</code>.</p>\n\n<p>For <code>Bar&lt;int&gt;</code> - the signature of <code>IFoo::add()</code> is <code>void add(int&amp; )</code> whereas <code>Bar::add()</code> is <code>void add(const int&amp; )</code>. Those signatures don't match - hence <code>Bar</code> is still an abstract class. Just one that hid <code>IFoo::add()</code>. </p>\n\n<p>If you have a C++11 compiler, you should prefer to add the <code>override</code> keyword to <code>Bar::add()</code> so that you would get a compiler error for:</p>\n\n<pre><code>main.cpp:15:10: error: 'void Bar&lt;T&gt;::add(const T&amp;) [with T = int]' marked 'override', but does not override\n     void add(const T&amp; ) override { }\n          ^\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": true, "score": 3, "last_activity_date": 1434553283, "creation_date": 1434553283, "answer_id": 30895359, "question_id": 30895106, "link": "https://stackoverflow.com/questions/30895106/cannot-instantiate-abstract-class-why-is-the-template-parameter-reference-cau/30895359#30895359", "title": "Cannot instantiate abstract class: Why is the template parameter (reference) causing this?", "body": "<p>The issue here is that when you write <code>const TIN</code> and <code>TIN</code> is a reference type, the <code>const</code> applies to the <em>reference</em> and not to the value type.</p>\n\n<p>This is why you are seeing different behaviour for <code>const TIN</code> and <code>const TOUT&amp;</code> even when you think they should be the same.</p>\n\n<p>A simple fix for this is to add the <code>const</code> to the value type in your <code>IFoo</code> instantiation:</p>\n\n<pre><code>struct Bar : IFoo&lt;const TVALUE &amp;, TVALUE, TINDEX&gt;\n//          here  ^^^^\n</code></pre>\n"}], "owner": {"reputation": 1673, "user_id": 1019908, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/G3ViE.jpg?s=128&g=1", "display_name": "Beakie", "link": "https://stackoverflow.com/users/1019908/beakie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 673, "favorite_count": 0, "accepted_answer_id": 30895359, "answer_count": 3, "score": 1, "last_activity_date": 1434553283, "creation_date": 1434552667, "question_id": 30895106, "link": "https://stackoverflow.com/questions/30895106/cannot-instantiate-abstract-class-why-is-the-template-parameter-reference-cau", "title": "Cannot instantiate abstract class: Why is the template parameter (reference) causing this?", "body": "<p>I am having trouble with some code.</p>\n\n<blockquote>\n  <p>'Bar' : cannot instantiate abstract class</p>\n</blockquote>\n\n<p>I have (finally) been able to recreate the error in a small amount of code.</p>\n\n<pre><code>struct SomeStruct\n{\n    // ******\n};\n\ntemplate &lt;typename TIN, typename TOUT, typename TINDEX&gt;\nstruct IFoo\n{\npublic:\n    virtual void add(const TIN item) = 0; // &lt;-- BAD\n    //virtual void add(const TOUT&amp; item) = 0; // &lt;-- GOOD\n\n    // ******\n};\n\ntemplate &lt;typename TVALUE, typename TINDEX&gt;\nstruct Bar : IFoo&lt;TVALUE &amp;, TVALUE, TINDEX&gt;\n{\n\npublic:\n\n    void add(const TVALUE&amp; item)\n    {\n        // ******\n    }\n\n    // ******\n};\n\nint main(int argc, char *argv[])\n{\n    SomeStruct someStruct;\n    Bar&lt;SomeStruct, int&gt; bar = Bar&lt;SomeStruct, int&gt;();\n    bar.add(someStruct);\n\n    // ******\n}\n</code></pre>\n\n<p>Can anyone please advise WHY using a reference with the template parameter is causing this?</p>\n"}, {"tags": ["c++", "algorithm", "opencv", "image-processing", "filtering"], "answers": [{"comments": [{"owner": {"reputation": 11039, "user_id": 1558037, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f1abbdabec023ba29c9ee3340d5519a3?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1558037/alex"}, "edited": false, "score": 0, "creation_date": 1434565682, "post_id": 30899238, "comment_id": 49837967, "body": "Thank you. Yes, I looked for the bilateral filter and especially for the <code>cv::gpu::DisparityBilateralFilter</code>: <a href=\"http://docs.opencv.org/modules/gpu/doc/camera_calibration_and_3d_reconstruction.html#gpu::DisparityBilateralFilter\" rel=\"nofollow noreferrer\">docs.opencv.org/modules/gpu/doc/&hellip;</a>   But as you shown on your picture - bilateral filter: 1. don&#39;t removes outliers - result image has still the same outliers, 2. it smoothes all image exclude edges.  I need remove outliers and minimize affect to other part of image."}], "tags": [], "owner": {"reputation": 1392, "user_id": 1385467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sdZVA.jpg?s=128&g=1", "display_name": "Adam Finley", "link": "https://stackoverflow.com/users/1385467/adam-finley"}, "is_accepted": false, "score": 1, "last_activity_date": 1461315972, "last_edit_date": 1486566232, "creation_date": 1434564820, "answer_id": 30899238, "question_id": 30894835, "link": "https://stackoverflow.com/questions/30894835/algorithm-which-can-remove-outliers-but-do-not-blur-other-part-of-image/30899238#30899238", "title": "Algorithm, which can remove outliers, but do not blur other part of image", "body": "<p>Perhaps you are looking for the bilateral filter?</p>\n\n<p>OpenCV says:  </p>\n\n<blockquote>\n  <p>we have explained some filters which main goal is to smooth an input\n  image. However, sometimes the filters do not only dissolve the noise,\n  but also smooth away the edges. To avoid this (at certain extent at\n  least), we can use a bilateral filter.</p>\n</blockquote>\n\n<p><img src=\"https://doi.ieeecomputersociety.org/cms/Computer.org/dl/trans/tg/2013/04/figures/ttg20130406167.gif\" alt=\"Here&#39;s what it looks like on a depth image\"></p>\n\n<p>OpenCV has this built-in: <a href=\"http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=bilateralfilter#bilateralfilter\" rel=\"nofollow noreferrer\">http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=bilateralfilter#bilateralfilter</a></p>\n"}], "owner": {"reputation": 11039, "user_id": 1558037, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f1abbdabec023ba29c9ee3340d5519a3?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1558037/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1226, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461315972, "creation_date": 1434552006, "last_edit_date": 1495540893, "question_id": 30894835, "link": "https://stackoverflow.com/questions/30894835/algorithm-which-can-remove-outliers-but-do-not-blur-other-part-of-image", "title": "Algorithm, which can remove outliers, but do not blur other part of image", "body": "<p>Is there any algorithm, which can remove outliers, but do not blur other part of image?</p>\n\n<p>Only for example, when we use <a href=\"http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#StereoBM\" rel=\"nofollow noreferrer\"><code>cv::StereoBM/SBGM</code></a> or <a href=\"http://docs.opencv.org/modules/gpu/doc/camera_calibration_and_3d_reconstruction.html#gpu::StereoConstantSpaceBP\" rel=\"nofollow noreferrer\"><code>cv::gpu::StereoConstantSpaceBP</code></a> from opencv, then we can have outliers, as shown in relevant question: <a href=\"https://stackoverflow.com/q/30784030/1558037\">opencv sgbm produces outliers on object edges</a> Also, we can get large bursts of intensity (strong variations) in local area of image with similar colors: <img src=\"https://i.stack.imgur.com/xtLZB.png\" alt=\"enter image description here\"></p>\n\n<p>And many other cases...</p>\n\n<p>The simplest solution is using <code>cv::medianBlur()</code>, but it will smooth all image, not only outliers: <a href=\"http://www.bogotobogo.com/OpenCV/images/blur/m.mp4\" rel=\"nofollow noreferrer\">Median filter example video</a></p>\n\n<p>Is there any algorithm which smoothes only outliers, and It does not affect the rest of the image?</p>\n\n<p>Is there anything better than this?</p>\n\n<pre><code>// get cv::Mat src_frame ...\nint outliers_size = 10;\nint outliers_intensive = 100;\nint ksize = outliers_size*2 + 1; // smooth all outliers smaller than 11x11\ncv::Mat smoothed;\ncv::medianBlur( src_frame, smoothed, ksize  );\ncv::Mat diff;\ncv::absdiff( src_frame, smoothed, diff );\ncv::Mat mask = diff &gt; Scalar( outliers_intensive );\n\nsmoothed.copyTo( src_frame, mask );\n// we have smoothed only small outliers areas in src_frame\n</code></pre>\n"}]