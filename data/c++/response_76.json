[{"tags": ["c++", "ios", "objective-c", "xcode", "opencv"], "comments": [{"owner": {"reputation": 786, "user_id": 5022365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec8cb396d26f840b7b772382d8e3ff70?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Patel", "link": "https://stackoverflow.com/users/5022365/sagar-patel"}, "edited": false, "score": 0, "creation_date": 1466760440, "post_id": 37980120, "comment_id": 63462797, "body": "For that you need to detect all objects in image(in above image they are iPad, pencil, ball pen etc).Then When user touch on screen ,check that from all detected object on which object user has touched.And then just display it."}, {"owner": {"reputation": 5530, "user_id": 2955997, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1253a92230fbcbda896e74fb138d619e?s=128&d=identicon&r=PG&f=1", "display_name": "ibezito", "link": "https://stackoverflow.com/users/2955997/ibezito"}, "edited": false, "score": 0, "creation_date": 1467100733, "post_id": 37980120, "comment_id": 63578295, "body": "is using a scribble made by the user instead of a single tapping is also an option?"}, {"owner": {"reputation": 3115, "user_id": 408137, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dbad78c2a1bb9392366b8bc05ae5ec1a?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/408137/matt"}, "edited": false, "score": 0, "creation_date": 1467108212, "post_id": 37980120, "comment_id": 63583199, "body": "I&#39;m not ruling out anything ibezito. What are you suggesting?"}, {"owner": {"reputation": 5530, "user_id": 2955997, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1253a92230fbcbda896e74fb138d619e?s=128&d=identicon&r=PG&f=1", "display_name": "ibezito", "link": "https://stackoverflow.com/users/2955997/ibezito"}, "edited": false, "score": 0, "creation_date": 1467132510, "post_id": 37980120, "comment_id": 63600304, "body": "@Matt I added an answer with my suggestion"}], "answers": [{"comments": [{"owner": {"reputation": 3115, "user_id": 408137, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dbad78c2a1bb9392366b8bc05ae5ec1a?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/408137/matt"}, "edited": false, "score": 0, "creation_date": 1466672919, "post_id": 37983303, "comment_id": 63418458, "body": "Hi Abhishek, thanks for the reply. This was just an example object. I&#39;m wanting to do this without any training for object detection. The object selected could be anything. I was hoping being the fact I&#39;ve got the touch point on the object I can work out the edges of the object selected and highlight it dynamically."}, {"owner": {"reputation": 59, "user_id": 6501131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ab2669173b009588d7e693e67878f3?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6501131/abhishek"}, "reply_to_user": {"reputation": 3115, "user_id": 408137, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dbad78c2a1bb9392366b8bc05ae5ec1a?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/408137/matt"}, "edited": false, "score": 0, "creation_date": 1466679878, "post_id": 37983303, "comment_id": 63423290, "body": "I don&#39;t know any other approach may be you can search for a trained image model like imagenet in Caffe deep learning framework it is trained on various classes."}], "tags": [], "owner": {"reputation": 59, "user_id": 6501131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ab2669173b009588d7e693e67878f3?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6501131/abhishek"}, "is_accepted": false, "score": 0, "last_activity_date": 1466661043, "creation_date": 1466661043, "answer_id": 37983303, "question_id": 37980120, "link": "https://stackoverflow.com/questions/37980120/using-opencv-to-touch-and-select-object/37983303#37983303", "title": "Using OpenCV to touch and select object", "body": "<p>You Can do it by Training a Classifier of Ipad images using opencv Haar Classifiers and then detecting Ipad images in a given frame.</p>\n\n<p>Now based on coordinates of the touch check if that area overlapped with detected Ipad image area. If it does Drawbounding box on the detected Object.Means from there on you can proceed towards processing your detected ipad image.</p>\n\n<p>Repeat the above procedure for Number of objects that you want to detect.</p>\n"}, {"tags": [], "owner": {"reputation": 1505, "user_id": 5589662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3be6f0835f6ef0dd2bcb887780115ec2?s=128&d=identicon&r=PG&f=1", "display_name": "taarraas", "link": "https://stackoverflow.com/users/5589662/taarraas"}, "is_accepted": false, "score": 0, "last_activity_date": 1467073627, "creation_date": 1467073627, "answer_id": 38065230, "question_id": 37980120, "link": "https://stackoverflow.com/questions/37980120/using-opencv-to-touch-and-select-object/38065230#38065230", "title": "Using OpenCV to touch and select object", "body": "<p>The task which you are trying to solve is \"Object proposal\". It doesn't work very accurate and this results are very new. \nThis two articles give you a good overview of methods for this:\n<a href=\"https://pdollar.wordpress.com/2013/12/10/a-seismic-shift-in-object-detection/\" rel=\"nofollow\">https://pdollar.wordpress.com/2013/12/10/a-seismic-shift-in-object-detection/</a>\n<a href=\"https://pdollar.wordpress.com/2013/12/22/generating-object-proposals/\" rel=\"nofollow\">https://pdollar.wordpress.com/2013/12/22/generating-object-proposals/</a></p>\n\n<p>To have state-of-the-art results, look for latest CVPR papers on Object proposals. Quite often they have code available to test.</p>\n"}, {"comments": [{"owner": {"reputation": 1505, "user_id": 5589662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3be6f0835f6ef0dd2bcb887780115ec2?s=128&d=identicon&r=PG&f=1", "display_name": "taarraas", "link": "https://stackoverflow.com/users/5589662/taarraas"}, "edited": false, "score": 0, "creation_date": 1467150626, "post_id": 38081969, "comment_id": 63610003, "body": "I guess author of question didn&#39;t have a rect around each object. He needs to find segmentation from image, not from image and object rectangles."}, {"owner": {"reputation": 5530, "user_id": 2955997, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1253a92230fbcbda896e74fb138d619e?s=128&d=identicon&r=PG&f=1", "display_name": "ibezito", "link": "https://stackoverflow.com/users/2955997/ibezito"}, "reply_to_user": {"reputation": 1505, "user_id": 5589662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3be6f0835f6ef0dd2bcb887780115ec2?s=128&d=identicon&r=PG&f=1", "display_name": "taarraas", "link": "https://stackoverflow.com/users/5589662/taarraas"}, "edited": false, "score": 0, "creation_date": 1467175782, "post_id": 38081969, "comment_id": 63616677, "body": "@taarras, The author said in the comments that he is not ruling out anything. Generating a rect requires from the user two taps on the screen, and the final result will be more accurate."}, {"owner": {"reputation": 3115, "user_id": 408137, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dbad78c2a1bb9392366b8bc05ae5ec1a?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/408137/matt"}, "edited": false, "score": 0, "creation_date": 1467191146, "post_id": 38081969, "comment_id": 63624884, "body": "Hi ibezito. That&#39;s awesome. One question, is there a way to use the grabcut method without a bounding rectangle? I.e. If you were to catch a touch event on the object like the iPad then grabcut finds the edges of the object you&#39;ve touched."}, {"owner": {"reputation": 1505, "user_id": 5589662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3be6f0835f6ef0dd2bcb887780115ec2?s=128&d=identicon&r=PG&f=1", "display_name": "taarraas", "link": "https://stackoverflow.com/users/5589662/taarraas"}, "reply_to_user": {"reputation": 3115, "user_id": 408137, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dbad78c2a1bb9392366b8bc05ae5ec1a?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/408137/matt"}, "edited": false, "score": 0, "creation_date": 1467218933, "post_id": 38081969, "comment_id": 63644867, "body": "@Matt If you want to move from point to edges of a object, you&#39;ll get something like Magic wand tool from Adobe Photoshop. You can see results of what you can get out of this method here : <a href=\"https://www.youtube.com/watch?v=qjTGmw45e2Y\" rel=\"nofollow noreferrer\">youtube.com/watch?v=qjTGmw45e2Y</a>"}], "tags": [], "owner": {"reputation": 5530, "user_id": 2955997, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1253a92230fbcbda896e74fb138d619e?s=128&d=identicon&r=PG&f=1", "display_name": "ibezito", "link": "https://stackoverflow.com/users/2955997/ibezito"}, "is_accepted": false, "score": 1, "last_activity_date": 1467132479, "creation_date": 1467132479, "answer_id": 38081969, "question_id": 37980120, "link": "https://stackoverflow.com/questions/37980120/using-opencv-to-touch-and-select-object/38081969#38081969", "title": "Using OpenCV to touch and select object", "body": "<p><strong>Explanation: why should we use the segmentation approach</strong></p>\n\n<p>According to my understanding, the task which you are trying to solve is segmentation of objects, <strong>regardless to their identity</strong>.</p>\n\n<p>The object recognition approach is one way to do it. But it has two major downsides:</p>\n\n<ol>\n<li>It requires you to train an object classifier, and to collect a dataset which contains a respectable amount of examples of objects which you would like to recognize. If you choose to take a classifier which is already trained - it won'y necessarily work on any type of object which you would like to detect.</li>\n<li>Most of the object recognition solutions find a bounding box around the recognized object, but they don't perform a complete segmentation of it. The segmentation part requires extra effort.</li>\n</ol>\n\n<p>Therefore, I believe that the best way for your case is to use an image segmentation algorithms. More precisly, we'll be using the <a href=\"https://en.wikipedia.org/wiki/GrabCut\" rel=\"nofollow noreferrer\">GrabCut segmentation algorithm</a>. </p>\n\n<p><strong>The GrabCut algorithm</strong></p>\n\n<p>This is an iterative algorithm with two stages:</p>\n\n<ol>\n<li><p>initial stage - the user specify a bounding box around the object.\ngiven this bounding box the algorithm estimates the color distribution of foreground (the object) and the background by using GMM, followed by a graph cut optimization for finding the optimal boundaries between the foreground and the background.</p></li>\n<li><p>In the next stage, the user may correct the segmentation if needed, by supplying scribbles of the foreground and the background. The algorithm fixes the model accordingly and perform a new segmentation based on the updated information.</p></li>\n</ol>\n\n<p>Using this approach has pros and cons.\nThe pros:</p>\n\n<ol>\n<li>The segmentation algorithm is easy to implement with openCV.</li>\n<li>It enables the user to fix segmentation errors if needed.</li>\n<li>It doesn't relies on a collecting a dataset and training a classifier.</li>\n</ol>\n\n<p>The main con is that you will need an extra source of information from the user beside of a single tap on the screen. This information will be a bounding box around the object, and in some cases - additional scribbles will be required to correct the segmentation. </p>\n\n<p><strong>Code</strong></p>\n\n<p>Luckily, there is an implementation of this algorithm in OpenCV. The user <em><a href=\"https://github.com/Itseez\" rel=\"nofollow noreferrer\">Itseez</a></em> create a simple and easy to use sample for using OpenCV's GrabCut algorithm, which can be found here: <a href=\"https://github.com/Itseez/opencv/blob/master/samples/cpp/grabcut.cpp\" rel=\"nofollow noreferrer\">https://github.com/Itseez/opencv/blob/master/samples/cpp/grabcut.cpp</a></p>\n\n<p>Application usage:</p>\n\n<p>The application receives a path to an image file as an command line argument input. It renders the image onto the screen and the user is required to supply an initial bounding rect.</p>\n\n<p>The user can press 'n' in order to perform the segmentation for the current iteration or press 'r' to revert his operation.</p>\n\n<p>After choosing a rect, the segmentation is calculated. If the user wants to correct it, he may choose to add foreground or background scribbles by pressing shift+left and Ctrl+left accordingly.</p>\n\n<p><strong>Examples</strong> </p>\n\n<p>Segmenting the iPod:</p>\n\n<p><a href=\"https://i.stack.imgur.com/72kaM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/72kaM.png\" alt=\"enter image description here\"></a></p>\n\n<p>Segmenting the pen:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3BrPL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3BrPL.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 3115, "user_id": 408137, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dbad78c2a1bb9392366b8bc05ae5ec1a?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/408137/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1639, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1467132479, "creation_date": 1466639957, "last_edit_date": 1466658196, "question_id": 37980120, "link": "https://stackoverflow.com/questions/37980120/using-opencv-to-touch-and-select-object", "title": "Using OpenCV to touch and select object", "body": "<p>I'm using the <code>OpenCV framework</code> in iOS Xcode objc, is there a way that I could process the image feed from the video camera and allow the user to touch an object on the screen then we use some functionality in OpenCV to highlight it.</p>\n\n<p>Here is graphically what I mean. The first image shows an example of what the user might see in the video feed:</p>\n\n<p><a href=\"https://i.stack.imgur.com/B6INu.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B6INu.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Then when they tap on the screen on the ipad i want to use OpenCV feature/object detecting to process the area they've clicked to highlight the area. Would look something like this if they clicked the ipad:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RywXF.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RywXF.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Any ideas on how this would be achievable in objc OpenCV?</p>\n\n<p>I can see quite easily how we could achieve this using trained templates of the iPad to match it using OpenCV algorithms but I want to try and get it dynamic so users can just touch anything in the screen and we'll take it from there?</p>\n"}, {"tags": ["c++", "visual-studio", "g++", "clang++", "post-increment"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1466640191, "post_id": 37980106, "comment_id": 63405917, "body": "GCC <a href=\"http://coliru.stacked-crooked.com/a/c7c7667511ece841\" rel=\"nofollow noreferrer\">gives me warnings</a>. Make sure you&#39;re using a reasonably recent version and have warnings enabled."}], "answers": [{"comments": [{"owner": {"reputation": 2600, "user_id": 875806, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/728a0ea58472a5a8c83183e1623f61e2?s=128&d=identicon&r=PG", "display_name": "CoatedMoose", "link": "https://stackoverflow.com/users/875806/coatedmoose"}, "edited": false, "score": 0, "creation_date": 1466642874, "post_id": 37980198, "comment_id": 63406592, "body": "What I expect is what gcc and clang did. Treating <code>++</code> as a f&#39;n takes a reference and returns that value (via an intermediate temp var) then incements the value at the reference makes sense to me. I concede that what Visual C++ is consistent, and I can understand how to interpret it, but I don&#39;t like it."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 1, "last_activity_date": 1466640466, "creation_date": 1466640466, "answer_id": 37980198, "question_id": 37980106, "link": "https://stackoverflow.com/questions/37980106/strange-post-increment-behaviour-in-c/37980198#37980198", "title": "Strange post-increment behaviour in C++", "body": "<p>The Clang warning is alluding to a clause in the standard, C++11 and later, that makes it undefined behaviour to execute two unsequenced modifications to the same scalar object. (In earlier versions of the standard the rule was different although similar in spirit.)</p>\n\n<p>So the answer is that the spec makes all possible answers equally valid, including the program crashing; it is indeed inherently ambiguous.</p>\n\n<p>By the way, Visual C++ actually does have somewhat consistent and logical behaviour in such cases, even though the standard does not require it: it performs all pre-increments first, then does arithmetic operations and assignments, and then finally performs all post-increments before moving on to the next statement. If you trace through the code you've given, you'll see that Visual C++'s answer is what you would expect from this procedure.</p>\n"}], "owner": {"reputation": 2600, "user_id": 875806, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/728a0ea58472a5a8c83183e1623f61e2?s=128&d=identicon&r=PG", "display_name": "CoatedMoose", "link": "https://stackoverflow.com/users/875806/coatedmoose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "closed_date": 1466643588, "answer_count": 1, "score": 0, "last_activity_date": 1466640466, "creation_date": 1466639895, "question_id": 37980106, "link": "https://stackoverflow.com/questions/37980106/strange-post-increment-behaviour-in-c", "closed_reason": "Duplicate", "title": "Strange post-increment behaviour in C++", "body": "<p>I have a friend who is getting different output than I do for the following program:</p>\n\n<pre><code>int main() {\n    int x = 20, y = 35;\n    x = y++ + x++;\n    y = ++y + ++x;\n\n    printf(\"%d%d\", x, y);\n\n    return 0;\n}\n</code></pre>\n\n<p>I am using Ubuntu, and have tried using gcc and clang. I get <code>5693</code> from both.</p>\n\n<p>My friend is using Visual Studio 2015, and gets <code>5794</code>.</p>\n\n<p>The answer I get (<code>5693</code>) makes most sense to me, since:</p>\n\n<ol>\n<li>the first line sets <code>x =  x + y</code> (which is <code>x = 20+35 = 55</code>) (note: <code>x</code> was incremented, but assigned over top of, so doesn't matter)</li>\n<li><code>y</code> was incremented and is therefore <code>36</code></li>\n<li>next line increments both, adds the result and sets it as <code>y</code> (which is  <code>y = 37 + 56 = 93</code>)</li>\n<li>which would be <code>56</code> and <code>93</code>, so the output is <code>5693</code></li>\n</ol>\n\n<p>I could see the VS answer making sense if the post-increment happened after the assignment. Is there some spec that makes one of these answers more right than the other? Is it just ambiguous? Should we fire anyone who writes code like this, making the ambiguity irrelevant?</p>\n\n<p>Note: Initially, we only tried with gcc, however clang gives this warning:</p>\n\n<pre><code>coatedmoose@ubuntu:~/playground$ clang++ strange.cpp \nstrange.cpp:8:16: warning: multiple unsequenced modifications to 'x' [-Wunsequenced]\n    x = y++ + x++;\n      ~        ^\n1 warning generated.\n</code></pre>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1466639545, "post_id": 37980022, "comment_id": 63405765, "body": "To begin with you need <i>two</i> loops: One to enter data and one to print the data."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1466639658, "post_id": 37980022, "comment_id": 63405790, "body": "As for your problem, please copy-paste the <i>actual</i> error, in full and unedited, into the body of the question. And then point out where in the source you get the error (for example by a comment)."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1466640759, "post_id": 37980022, "comment_id": 63406068, "body": "push_back() can invalidate iterators. Two loops as Joachim suggests."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 3, "creation_date": 1466641800, "post_id": 37980022, "comment_id": 63406334, "body": "I don&#39;t get any error when I run this program. In fact, I don&#39;t see how the loop could ever be entered because the loop condition is initially false."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 5122664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-iICTT0HmbI8/AAAAAAAAAAI/AAAAAAAAAf8/bNwMrVU8qjM/photo.jpg?sz=128", "display_name": "Vikranth Inti", "link": "https://stackoverflow.com/users/5122664/vikranth-inti"}, "edited": false, "score": 0, "creation_date": 1466644977, "post_id": 37980674, "comment_id": 63407076, "body": "Two loops , one for each iterator are made. Initial condition is set in the first loop of it1. i.e, it1=x.begin() and while(n!=-1)"}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 1, "creation_date": 1466650060, "post_id": 37980674, "comment_id": 63408234, "body": "<i>Using &#39;std&#39; as namespace saves much effort in repeating &quot;std::&quot;</i> Please don&#39;t advise people to do this."}, {"owner": {"reputation": 83, "user_id": 5890849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ccd539633aee4c0d63192ee7f31149fe?s=128&d=identicon&r=PG&f=1", "display_name": "Sama_science", "link": "https://stackoverflow.com/users/5890849/sama-science"}, "edited": false, "score": 0, "creation_date": 1466654352, "post_id": 37980674, "comment_id": 63409296, "body": "i tried with two loops but i&#39;m still having this error message"}, {"owner": {"reputation": 323, "user_id": 2016712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/749a2764e35dee5cd44e05c4feb371d2?s=128&d=identicon&r=PG", "display_name": "SnoozeTime", "link": "https://stackoverflow.com/users/2016712/snoozetime"}, "edited": false, "score": 0, "creation_date": 1466655620, "post_id": 37980674, "comment_id": 63409636, "body": "What is the use of it1 here ? You are pushing back elements so I don&#39;t see its use. Also, When you type -1 to leave the input loop, it will also push back -1 inside the vector, which is not I think the wanted behaviour"}], "tags": [], "owner": {"reputation": 111, "user_id": 5122664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-iICTT0HmbI8/AAAAAAAAAAI/AAAAAAAAAf8/bNwMrVU8qjM/photo.jpg?sz=128", "display_name": "Vikranth Inti", "link": "https://stackoverflow.com/users/5122664/vikranth-inti"}, "is_accepted": false, "score": 0, "last_activity_date": 1466650341, "last_edit_date": 1466650341, "creation_date": 1466644234, "answer_id": 37980674, "question_id": 37980022, "link": "https://stackoverflow.com/questions/37980022/printing-vector-elements-error-message/37980674#37980674", "title": "printing vector elements error message", "body": "<p>Two iterators are choosen, i.e, it1 and it2 variables. \nit1 is used for storing input into the vector. Initial input of the vector is stored here.</p>\n\n<pre><code>std::vector&lt;int&gt;::iterator it1;\nit1=x.begin();\nstd::cout &lt;&lt; \"enter an element in the vector: \" &lt;&lt; \"\\n\";\nstd::cin &gt;&gt; n;\nx.push_back(n);\n</code></pre>\n\n<p>To quit the loop, enter '-1'</p>\n\n<pre><code>while(n!=-1)\n{\n++it1;\nstd::cout &lt;&lt; \"enter an element in the vector: \" &lt;&lt; \"\\n\";\nstd::cin &gt;&gt; n;\nx.push_back(n);\n} ;\n</code></pre>\n\n<p>it2 for displaying output from the vector. </p>\n\n<pre><code>for(it2 = x.begin(); it2 != x.end(); ++it2)\n  std::cout&lt;&lt;*it2&lt;&lt;\" \";//no need of curly braces for single for statement\n</code></pre>\n\n<p>'\nComplete working program :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;vector&gt;\n\nint main()\n{\n  int n;\n  std::vector&lt;int&gt; x;\n  std::vector&lt;int&gt;::iterator it1;\n  std::vector&lt;int&gt;::iterator it2;\n  it1=x.begin();\n  std::cout &lt;&lt; \"enter an element in the vector: \" &lt;&lt; \"\\n\";\n  std::cin &gt;&gt; n;\n  x.push_back(n);\n\n  while(n!=-1)\n  {\n    ++it1;\n    std::cout &lt;&lt; \"enter an element in the vector: \" &lt;&lt; \"\\n\";\n    std::cin &gt;&gt; n;\n    x.push_back(n);\n  };\n\n  std::cout&lt;&lt;\"Vector : \";\n  for(it2 = x.begin(); it2 != x.end(); ++it2)\n    std::cout&lt;&lt;*it2&lt;&lt;\" \" ;\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 5890849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ccd539633aee4c0d63192ee7f31149fe?s=128&d=identicon&r=PG&f=1", "display_name": "Sama_science", "link": "https://stackoverflow.com/users/5890849/sama-science"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466650341, "creation_date": 1466639366, "last_edit_date": 1466649911, "question_id": 37980022, "link": "https://stackoverflow.com/questions/37980022/printing-vector-elements-error-message", "title": "printing vector elements error message", "body": "<p>I'm a beginner in c++. The following simple program to push elements into vector and to display them while traversing, is not working correctly. Compiler says \"Expression:vector iterator is not derrencable.\"\nCan any one help me about this ??</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include&lt;vector&gt;\n    int main()\n    {\n    int n;\n    std::vector&lt;int&gt;x;\n    std::vector&lt;int&gt;::iterator it;\n    for (it = x.begin(); it != x.end(); ++it)\n    {\n        std::cout &lt;&lt; \"enter an element in the vector:\" &lt;&lt; \"\\n\";\n        std::cin &gt;&gt; n;\n        x.push_back(n);\n        std::cout &lt;&lt; \"vector:\" &lt;&lt; \"\\n\";\n        std::cout &lt;&lt; *it;\n    }\n\n    return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "arduino", "arduino-uno"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1466638296, "post_id": 37979863, "comment_id": 63405457, "body": "And where do you declare those variables mentioned?"}, {"owner": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 0, "creation_date": 1466638413, "post_id": 37979863, "comment_id": 63405489, "body": "Where&#39;s the declaration? You&#39;ve got the initialization but the declaration with the type is missing"}], "answers": [{"tags": [], "owner": {"reputation": 167, "user_id": 5736354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4075b5fc167c126d70fc9b8b17683827?s=128&d=identicon&r=PG&f=1", "display_name": "ardayigit", "link": "https://stackoverflow.com/users/5736354/ardayigit"}, "is_accepted": false, "score": 2, "last_activity_date": 1468058533, "creation_date": 1468058533, "answer_id": 38280622, "question_id": 37979863, "link": "https://stackoverflow.com/questions/37979863/arduino-uno-error/38280622#38280622", "title": "Arduino UNO error", "body": "<p>Try to add this just before the setup: </p>\n\n<pre><code>int redSensorValue = 0; \nint greenSensorValue = 0; \nint blueSensorValue = 0; \n</code></pre>\n\n<p>Or if you prefer, you can just add <code>int</code> before the name of your variables in the loop. </p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 8878680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2adf833c515889586077ec0eca6f6d13?s=128&d=identicon&r=PG&f=1", "display_name": "Sayeed", "link": "https://stackoverflow.com/users/8878680/sayeed"}, "is_accepted": false, "score": 0, "last_activity_date": 1510814478, "creation_date": 1510814478, "answer_id": 47323207, "question_id": 37979863, "link": "https://stackoverflow.com/questions/37979863/arduino-uno-error/47323207#47323207", "title": "Arduino UNO error", "body": "<p>You did not add any sensor pin in <strong><em>setup()</em></strong> function. Edit you function just like it. </p>\n\n<pre><code>void setup() {\n\n  pinMode(redSensorpin,INPUT);\n  pinMode(greenSensorpin,INPUT);\n  pinMode(blueSensorpin,INPUT);\n\n  pinMode(greenLEDpin,OUTPUT);\n  pinMode(redLEDpin,OUTPUT);\n  pinMode(blueLEDpin,OUTPUT);\n  Serial.begin(9600);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5982826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-v5mxiitXUxY/AAAAAAAAAAI/AAAAAAAAAGg/OJZOdSeoFEc/photo.jpg?sz=128", "display_name": "IgnacioRM", "link": "https://stackoverflow.com/users/5982826/ignaciorm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510814478, "creation_date": 1466638148, "question_id": 37979863, "link": "https://stackoverflow.com/questions/37979863/arduino-uno-error", "title": "Arduino UNO error", "body": "<p>I got a problem with this code from Arduino Projects Book, a very simple code soryy if is very obvius.</p>\n\n<p>This is the code I wrote:</p>\n\n<pre><code>const int greenLEDpin = 9;\nconst int redLEDpin = 10;\nconst int blueLEDpin = 11;\n\nconst int redSensorpin = A0;\nconst int greenSensorpin = A1;\nconst int blueSensorpin = A2;\n\nint redValue = 0;\nint greenValue = 0;\nint blueValue = 0;\n\nvoid setup() {\n  Serial.begin(9600);\n\n  pinMode(greenLEDpin,OUTPUT);\n  pinMode(redLEDpin,OUTPUT);\n  pinMode(blueLEDpin,OUTPUT);\n\n}\n\nvoid loop() {\n\n  redSensorValue = analogRead(redSensorpin);\n  delay (5);\n  greenSensorValue = analogRead(greenSensorpin);\n  delay(5);\n  blueSensorValue = analogRead(blueSensorpin);\n\n  Serial.print(\"Raw Sensor Values \\t Red: \");\n  Serial.print(redSensorValue);\n  Serial.print(\"\\t Green: \");\n  Serial.print(greenSensorValue);\n  Serial.print(\"\\t Blue: \");\n  Serial.println(blueSensorValue);\n\n  redValue = redSensorValue/4;\n  greenValue = greenSensorValue/4;\n  blueValue = blueSensorValue/4;\n\n  Serial.print(\"Mapped Sensor Values \\t ReD: \");\n  Serial.print(redValue);\n  Serial.print(\"\\t Green: \");\n  Serial.print(greenValue);\n  Serial.print(\"\\t Blue: \");\n  Serial.print(blueValue);\n  analogWrite(redLEDpin, redValue);\n  analogWrite(greenLEDpin, greenValue);\n  analogWrite(blueLEDpin, blueValue);\n}\n</code></pre>\n\n<p>And here is the error:\nArduino:1.7.10 (Windows 8.1), Placa:\"Arduino Uno\"</p>\n\n<pre><code>LED_tricolor.ino: In function 'void loop()':\n\nLED_tricolor.ino:24:2: error: 'redSensorValue' was not declared in this scope\n\nLED_tricolor.ino:26:2: error: 'greenSensorValue' was not declared in this scope\n\nLED_tricolor.ino:28:2: error: 'blueSensorValue' was not declared in this scope\n</code></pre>\n\n<p>Someone knows whats happening here? I tried some things like puting the variables before, but nothing...\nHope u guys can help me ^^.</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 656, "user_id": 1052689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80cf23b75055dc4831dbd9e5d63e508?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Korous", "link": "https://stackoverflow.com/users/1052689/jan-korous"}, "edited": false, "score": 0, "creation_date": 1466639077, "post_id": 37979760, "comment_id": 63405660, "body": "I guess this question might be helpful <a href=\"https://stackoverflow.com/questions/14306797/c11-equivalent-to-boost-shared-mutex\" title=\"c11 equivalent to boost shared mutex\">stackoverflow.com/questions/14306797/&hellip;</a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1466639762, "post_id": 37979760, "comment_id": 63405816, "body": "So you don&#39;t need to synchronize the writer threads among themselves because they always access unique parts of the data?"}, {"owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1466644261, "post_id": 37979760, "comment_id": 63406908, "body": "@Galik the writer threads in this case are pooled AI&#39;s, UI and world simulation effects running at various frequencies, I need to pipe their outputs to the GPU together which is running at its own update interval but they have nothing to do with each other during the transportation"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1466644963, "post_id": 37979760, "comment_id": 63407072, "body": "@user81993 Is it possible you have typos with overusing the identifier <code>data</code> in your first code snippet? The local variable is shadowing the global one."}, {"owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1466647239, "post_id": 37979760, "comment_id": 63407606, "body": "@NirFriedman oh yea, oops."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1466647561, "post_id": 37980869, "comment_id": 63407665, "body": "Yep. RW lock seems a way to go. It raises a bunch of <i>fairness</i> questions, though."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 2, "last_activity_date": 1466645629, "creation_date": 1466645629, "answer_id": 37980869, "question_id": 37979760, "link": "https://stackoverflow.com/questions/37979760/using-a-mutex-to-block-execution-from-outside-the-critical-section/37980869#37980869", "title": "Using a mutex to block execution from outside the critical section", "body": "<p>If you have <code>C++14</code> capability then you can use a <a href=\"http://en.cppreference.com/w/cpp/thread/shared_timed_mutex\" rel=\"nofollow\">std::shared_timed_mutex</a> to separate out readers and writers. In this scenario it seems you need to give your writer threads <em>shared access</em> (allowing other writer threads at the same time) and your reader threads <em>unique access</em> (kicking all other threads out).</p>\n\n<p>So something like this may be what you need:</p>\n\n<pre><code>class MyClass\n{\npublic:\n    using mutex_type = std::shared_timed_mutex;\n    using shared_lock = std::shared_lock&lt;mutex_type&gt;;\n    using unique_lock = std::unique_lock&lt;mutex_type&gt;;\n\nprivate:\n    mutable mutex_type mtx;\n\npublic:\n\n    // All updater threads can operate at the same time\n    auto lock_for_updates() const\n    {\n        return shared_lock(mtx);\n    }\n\n    // Reader threads need to kick all the updater threads out\n    auto lock_for_reading() const\n    {\n        return unique_lock(mtx);\n    }\n};\n\n// many threads can call this\nvoid do_writing_work(std::shared_ptr&lt;MyClass&gt; sptr)\n{\n    auto lock = sptr-&gt;lock_for_updates();\n\n    // update the data here\n}\n\n// access the data from one thread only\nvoid do_reading_work(std::shared_ptr&lt;MyClass&gt; sptr)\n{\n    auto lock = sptr-&gt;lock_for_reading();\n\n    // read the data here\n}\n</code></pre>\n\n<p>The <a href=\"http://en.cppreference.com/w/cpp/thread/shared_lock\" rel=\"nofollow\">shared_lock</a>s allow other threads to gain a <a href=\"http://en.cppreference.com/w/cpp/thread/shared_lock\" rel=\"nofollow\">shared_lock</a> at the same time but prevent a <a href=\"http://en.cppreference.com/w/cpp/thread/unique_lock\" rel=\"nofollow\">unique_lock</a> gaining simultaneous access. When a reader thread tries to gain a <a href=\"http://en.cppreference.com/w/cpp/thread/unique_lock\" rel=\"nofollow\">unique_lock</a> all <a href=\"http://en.cppreference.com/w/cpp/thread/shared_lock\" rel=\"nofollow\">shared_lock</a>s will be vacated before the <a href=\"http://en.cppreference.com/w/cpp/thread/unique_lock\" rel=\"nofollow\">unique_lock</a> gets exclusive control.</p>\n"}, {"tags": [], "owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "is_accepted": false, "score": -1, "last_activity_date": 1466717483, "last_edit_date": 1466717483, "creation_date": 1466648235, "answer_id": 37981245, "question_id": 37979760, "link": "https://stackoverflow.com/questions/37979760/using-a-mutex-to-block-execution-from-outside-the-critical-section/37981245#37981245", "title": "Using a mutex to block execution from outside the critical section", "body": "<p>You can also do this with regular mutexes  and condition variables rather than shared. Supposedly <code>shared_mutex</code> has higher overhead, so I'm not sure which will be faster. With Gallik's solution you'd presumably be paying to lock the shared mutex on every <code>write</code> call; I got the impression from your post that <code>write</code> gets called way more than read so maybe this is undesirable.</p>\n\n<pre><code>int* data; // initialized somewhere\nstd::atomic&lt;size_t&gt; size = 0;\nstd::atomic&lt;bool&gt; reading = false;\nstd::atomic&lt;int&gt; num_writers = 0;\nstd::mutex entering;\nstd::mutex leaving;\nstd::condition_variable cv;\n\nvoid write(int x) {\n    ++num_writers;\n    if (reading) {\n        --num_writers;\n        if (num_writers == 0)\n        {\n            std::lock_guard l(leaving);\n            cv.notify_one();\n        }          \n        { std::lock_guard l(entering); }\n        ++num_writers;\n    }\n    auto slot = size.fetch_add(1, std::memory_order_acquire);\n    data[slot] = x;\n    --num_writers;\n    if (reading &amp;&amp; num_writers == 0)\n    {\n        std::lock_guard l(leaving);\n        cv.notify_one();\n    }\n}\n\nint* read() {\n    int* other_data = new int[capacity];\n    {\n        std::unique_lock enter_lock(entering);\n        reading = true;\n        std::unique_lock leave_lock(leaving);\n        cv.wait(leave_lock, [] () { return num_writers == 0; });\n        swap(data, other_data);\n        size = 0;\n        reading = false;\n    }\n    return other_data;\n}\n</code></pre>\n\n<p>It's a bit complicated and took me some time to work out, but I think this should serve the purpose pretty well.</p>\n\n<p>In the common case where only writing is happening, reading is always false. So you do the usual, and pay for two additional atomic increments and two untaken branches. So the common path does not need to lock any mutexes, unlike the solution involving a shared mutex, this is supposedly expensive: <a href=\"http://permalink.gmane.org/gmane.comp.lib.boost.devel/211180\" rel=\"nofollow\">http://permalink.gmane.org/gmane.comp.lib.boost.devel/211180</a>.</p>\n\n<p>Now, suppose read is called. The expensive, slow heap allocation happens first, meanwhile writing continues uninterrupted. Next, the entering lock is acquired, which has no immediate effect. Now, <code>reading</code> is set to true. Immediately, any new calls to write enter the first branch, and eventually hit the entering lock which they are unable to acquire (as its already taken), and those threads then get put to sleep.</p>\n\n<p>Meanwhile, the read thread is now waiting on the condition that the number of writers is 0. If we're lucky, this could actually go through right away. If however there are threads in write in either of the two locations between incrementing and decrementing num_writers, then it will not. Each time a write thread decrements <code>num_writers</code>, it checks if it has reduced that number to zero, and when it does it will signal the condition variable. Because <code>num_writers</code> is atomic which prevents various reordering shenanigans, it is guaranteed that the last thread will see <code>num_writers == 0</code>; it could also be notified more than once but this is ok and cannot result in bad behavior.</p>\n\n<p>Once that condition variable has been signalled, that shows that all writers are either trapped in the first branch or are done modifying the array. So the read thread can now safely swap the data, and then unlock everything, and then return what it needs to.</p>\n\n<p>As mentioned before, in typical operation there are no locks, just increments and untaken branches. Even when a read does occur, the read thread will have one lock and one condition variable wait, whereas a typical write thread will have about one lock/unlock of a mutex and that's all (one, or a small number of write threads, will also perform a condition variable notification).</p>\n"}], "owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "accepted_answer_id": 37980869, "answer_count": 2, "score": 7, "last_activity_date": 1466717483, "creation_date": 1466637469, "last_edit_date": 1466647267, "question_id": 37979760, "link": "https://stackoverflow.com/questions/37979760/using-a-mutex-to-block-execution-from-outside-the-critical-section", "title": "Using a mutex to block execution from outside the critical section", "body": "<p>I'm not sure I got the terminology right but here goes - I have this function that is used by multiple threads to write data (using pseudo code in comments to illustrate what I want)</p>\n\n<pre><code>//these are initiated in the constructor\nint* data; \nstd::atomic&lt;size_t&gt; size;\n\nvoid write(int value) {\n    //wait here while \"read_lock\"\n    //set \"write_lock\" to \"write_lock\" + 1\n    auto slot = size.fetch_add(1, std::memory_order_acquire);\n    data[slot] = value;\n    //set \"write_lock\" to \"write_lock\" - 1\n}\n</code></pre>\n\n<p>the order of the writes is not important, all I need here is for each write to go to a unique slot</p>\n\n<p>Every once in a while though, I need one thread to read the data using this function</p>\n\n<pre><code>int* read() {\n    //set \"read_lock\" to true\n    //wait here while \"write_lock\"\n    int* ret = data;\n    data = new int[capacity];\n    size = 0;\n    //set \"read_lock\" to false\n    return ret;\n}\n</code></pre>\n\n<p>so it basically swaps out the buffer and returns the old one (I've removed capacity logic to make the snippets shorter)</p>\n\n<p>In theory this should lead to 2 operating scenarios:</p>\n\n<p>1 - just a bunch of threads writing into the container</p>\n\n<p>2 - when some thread executes the read function, all new writers will have to wait, the reader will wait until all existing writes are finished, it will then do the read logic and scenario 1 can continue.</p>\n\n<p>The question part is that I don't know what kind of a barrier to use for the locks -</p>\n\n<p>A spinlock would be wasteful since there are many containers like this and they all need cpu cycles</p>\n\n<p>I don't know how to apply std::mutex since I only want the write function to be in a critical section if the read function is triggered. Wrapping the whole write function in a mutex would cause unnecessary slowdown for operating scenario 1.</p>\n\n<p>So what would be the optimal solution here?</p>\n"}, {"tags": ["c++", "qt", "sqlite"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1466665173, "post_id": 37979500, "comment_id": 63413499, "body": "What is the purpose of your application? Is it supposed to be able to open <i>any</i> SQLite database, or do you just want to access your own application&#39;s files?"}, {"owner": {"reputation": 1856, "user_id": 4116831, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a7f72171b14399db9ac49c325de619e2?s=128&d=identicon&r=PG&f=1", "display_name": "scmg", "link": "https://stackoverflow.com/users/4116831/scmg"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1466667356, "post_id": 37979500, "comment_id": 63414860, "body": "it is supposed to be able to open any SQLite database, read data, user can modify and save"}], "answers": [{"tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": true, "score": 1, "last_activity_date": 1466668023, "creation_date": 1466668023, "answer_id": 37985270, "question_id": 37979500, "link": "https://stackoverflow.com/questions/37979500/how-to-check-if-file-is-appropriated-with-database-driver-in-qt/37985270#37985270", "title": "How to check if file is appropriated with database driver in Qt", "body": "<p>Qt always uses the <a href=\"http://sqlite.org/c3ref/open.html\" rel=\"nofollow\">SQLITE_OPEN_CREATE</a> flag, so nonexistent or empty files are considered valid (for a new, empty database).</p>\n\n<p>If you don't want to change Qt, or write your own database driver, the only alternative is to manually check for a valid <a href=\"http://www.sqlite.org/fileformat2.html#section_1_2\" rel=\"nofollow\">database header</a> in the file.</p>\n"}, {"tags": [], "owner": {"reputation": 912, "user_id": 5061637, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/25fd26c204332932606f307d55e64562?s=128&d=identicon&r=PG&f=1", "display_name": "Aurelien", "link": "https://stackoverflow.com/users/5061637/aurelien"}, "is_accepted": false, "score": 1, "last_activity_date": 1466669451, "creation_date": 1466669451, "answer_id": 37985728, "question_id": 37979500, "link": "https://stackoverflow.com/questions/37979500/how-to-check-if-file-is-appropriated-with-database-driver-in-qt/37985728#37985728", "title": "How to check if file is appropriated with database driver in Qt", "body": "<p>I had to face the same problem.</p>\n\n<p>In fact, there is two issues :</p>\n\n<p>1/ As CL said, Qt always uses the SQLITE_OPEN_CREATE flag, so if you try to open a database that point to a non-existent file, the database will be created and you get a success.</p>\n\n<p>You can adress this issue by checking if the file exists before open (see QFile::Exists static method)</p>\n\n<p>2/ SQLite use \"lazy initialization\", so until you make a request on the database, the file is not really opened.\nYou can adress this issue by executing a simple request right after the database open, and check the result.</p>\n\n<p>If you don't know anything in advance about the database schema, you can try to read one of the \"PRAGMA\" values : <a href=\"http://www.sqlite.org/pragma.html#pragma_table_info\" rel=\"nofollow\">http://www.sqlite.org/pragma.html#pragma_table_info</a></p>\n"}], "owner": {"reputation": 1856, "user_id": 4116831, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a7f72171b14399db9ac49c325de619e2?s=128&d=identicon&r=PG&f=1", "display_name": "scmg", "link": "https://stackoverflow.com/users/4116831/scmg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 37985270, "answer_count": 2, "score": 0, "last_activity_date": 1466669451, "creation_date": 1466635903, "last_edit_date": 1466662459, "question_id": 37979500, "link": "https://stackoverflow.com/questions/37979500/how-to-check-if-file-is-appropriated-with-database-driver-in-qt", "title": "How to check if file is appropriated with database driver in Qt", "body": "<p>Assuming I want to open a connection to SQLite3 database in Qt. It will be connected to an existed database <code>dbName</code>.</p>\n\n<pre><code>QSqlDatabase db = QSqlDatabase::addDatabase(\"QSQLITE\");\n</code></pre>\n\n<p>Now I need to set <code>db.setDatabaseName(dbName)</code>, where <code>dbName</code> is received through a <code>QFileDialog</code>.</p>\n\n<p>However, as long as <code>dbName</code> is a valid file name, then <code>db.open()</code> is always <code>true</code>. Is there anyway to check if the file <code>dbName</code> is a SQLite3 database, but not of any other type? What I can do now is to execute a query and check for error like:</p>\n\n<pre><code>db.setDatabaseName(dbName);\nif (db.open()) {\n  QSqlQuery qr(db);\n  if (!qr.exec(\".database;\")) {\n    qDebug() &lt;&lt; qr.lastError().text();\n    return false;\n  }\n}\n</code></pre>\n\n<p>but it won't work if the file is empty.</p>\n"}, {"tags": ["c++", "encoding", "rsa", "command-line-interface"], "comments": [{"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1466640967, "post_id": 37979368, "comment_id": 63406118, "body": "Why are you using RSA instead of a symmetric cipher such as AES, is this homework? RSA is about 1000 times slowed than AES and the data is limited to the key size with RSA bit not limited with AES. Also a 1024-bit key is really to small these days, you should use a 2048-bit or preferably 4096-bit key. RSA is no more secure than AES."}, {"owner": {"reputation": 37, "user_id": 2536887, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tHxgf.jpg?s=128&g=1", "display_name": "SubSpecs", "link": "https://stackoverflow.com/users/2536887/subspecs"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1466642041, "post_id": 37979368, "comment_id": 63406391, "body": "This is not homework lol. This is my personal project. Yes, I&#39;am using AES also, but it works for AES, but doesn&#39;t for RSA."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 2536887, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tHxgf.jpg?s=128&g=1", "display_name": "SubSpecs", "link": "https://stackoverflow.com/users/2536887/subspecs"}, "edited": false, "score": 0, "creation_date": 1466642175, "post_id": 37980236, "comment_id": 63406430, "body": "I suspected as much, I just tested that Encoding is a lot faster than Base64, I just wanted confirmation that there is no possible way of using Encoding for this type of data. Thank you for your opinion."}], "tags": [], "owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "is_accepted": true, "score": 1, "last_activity_date": 1466640749, "creation_date": 1466640749, "answer_id": 37980236, "question_id": 37979368, "link": "https://stackoverflow.com/questions/37979368/encrypt-rsa-encode-to-string-on-other-end-encode-back-to-bytes-and-decrypt-rsa/37980236#37980236", "title": "Encrypt RSA, encode to string. On other end encode back to bytes and Decrypt RSA", "body": "<p>Encrypted data is not going to be ASCII, most of the bytes will fall into unprintable region, you need to convert to another encoding such as Base64 or hexadecimal if you need the encrypted data in String format.</p>\n"}], "owner": {"reputation": 37, "user_id": 2536887, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tHxgf.jpg?s=128&g=1", "display_name": "SubSpecs", "link": "https://stackoverflow.com/users/2536887/subspecs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 37980236, "answer_count": 1, "score": 1, "last_activity_date": 1601857279, "creation_date": 1466635063, "last_edit_date": 1601857279, "question_id": 37979368, "link": "https://stackoverflow.com/questions/37979368/encrypt-rsa-encode-to-string-on-other-end-encode-back-to-bytes-and-decrypt-rsa", "title": "Encrypt RSA, encode to string. On other end encode back to bytes and Decrypt RSA", "body": "<p>I've been having trouble encoding RSA Encrypted bytes to string, and then getting them back to bytes on the other end(Remote host), the other end throws an exception of 'Bad Data'. <br><br>\nI tried google, no luck.</p>\n<p>My Code so far:</p>\n<p><strong>Client</strong>:</p>\n<pre><code>array&lt;Byte&gt;^Test=Encoding::ASCII-&gt;GetBytes(Input);\narray&lt;Byte&gt;^TempByteText=RSA-&gt;Encrypt(Test,false);\nString^ TempString = Encoding::ASCII-&gt;GetString(TempByteText);\nreturn TempString;\n</code></pre>\n<p>Then I send <strong>TempString</strong> to Server. Anything else I send, any text or bytes of any sort arrive on the other end as intended, but except for RSA Encrypted bytes.</p>\n<p><strong>Server</strong>:</p>\n<pre><code>array&lt;Byte&gt;^Test=Encoding::ASCII-&gt;GetBytes(Input);\narray&lt;Byte&gt;^TempByteText=RSA-&gt;Decrypt(Test,false);\nreturn TempByteText;\n</code></pre>\n<p>Even if I return the functions locally, it's still says the same Bad Data. I have a 1024bit key, so the Encrypt size should be 128 bytes, which it <strong>IS</strong>, but it still say's 'Bad Data'.</p>\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c++", "class", "constructor", "copy"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1466634741, "post_id": 37979288, "comment_id": 63404454, "body": "you could try pasting the error message into your favourite search engine."}, {"owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 0, "creation_date": 1466635534, "post_id": 37979288, "comment_id": 63404691, "body": "See <a href=\"http://www.csee.umbc.edu/~chang/cs202/Lectures/modules/m09-const/slides.php?print\" rel=\"nofollow noreferrer\">csee.umbc.edu/~chang/cs202/Lectures/modules/m09-const/&hellip;</a>"}, {"owner": {"reputation": 41, "user_id": 6397891, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f3bbd1d1afca8f3a4457ce2c15799801?s=128&d=identicon&r=PG&f=1", "display_name": "Buck Wheat", "link": "https://stackoverflow.com/users/6397891/buck-wheat"}, "edited": false, "score": 0, "creation_date": 1466635685, "post_id": 37979288, "comment_id": 63404740, "body": "That is awesome, thank you!"}, {"owner": {"reputation": 41, "user_id": 6397891, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f3bbd1d1afca8f3a4457ce2c15799801?s=128&d=identicon&r=PG&f=1", "display_name": "Buck Wheat", "link": "https://stackoverflow.com/users/6397891/buck-wheat"}, "reply_to_user": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 0, "creation_date": 1466638317, "post_id": 37979288, "comment_id": 63405463, "body": "@PcAf, out of curiosity what or how did you search to get that exact of an answer. My searches usually lead here with the result only being a loose connection to my question."}, {"owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "edited": false, "score": 0, "creation_date": 1466662566, "post_id": 37979288, "comment_id": 63412112, "body": "@BuckWheat I searched for <i>c++ call function on constant object</i>."}], "answers": [{"comments": [{"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1466635701, "post_id": 37979404, "comment_id": 63404743, "body": "You can also overload functions by const-ness, if you need a non-const accessor as well.  For instance, you can have both <code>const char* getChar() const;</code> and <code>char* getChar();</code>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1466635308, "creation_date": 1466635308, "answer_id": 37979404, "question_id": 37979288, "link": "https://stackoverflow.com/questions/37979288/c-copy-constructor-when-class-has-an-array-of-another-class/37979404#37979404", "title": "C++ Copy Constructor when Class has an array of another Class", "body": "<p>The problem is caused by </p>\n\n<pre><code>    int getNum();\n    char *getChar();\n</code></pre>\n\n<p>Since these functions are not <code>const</code> member function, they cannot be used on a <code>const</code> object. As a general rule, make all the getter functions <code>const</code> member functions.</p>\n\n<pre><code>    int getNum() const;\n    char const* getChar() const;\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6397891, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f3bbd1d1afca8f3a4457ce2c15799801?s=128&d=identicon&r=PG&f=1", "display_name": "Buck Wheat", "link": "https://stackoverflow.com/users/6397891/buck-wheat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "accepted_answer_id": 37979404, "answer_count": 1, "score": 0, "last_activity_date": 1466635308, "creation_date": 1466634527, "question_id": 37979288, "link": "https://stackoverflow.com/questions/37979288/c-copy-constructor-when-class-has-an-array-of-another-class", "title": "C++ Copy Constructor when Class has an array of another Class", "body": "<p>I'm still learning about classes, copy constructors, and overloaded operators so any advice/help/->s is appreciated!!!</p>\n\n<p>I am trying to make a copy constructor with the class Test2 which has a private member variable from another class, Test1. I have commented in the code where the copy constructor that is giving me the business is located.</p>\n\n<p>Here is the error I get when compiling:</p>\n\n<pre><code>assOp.cpp: In copy constructor 'Test2::Test2(const Test2&amp;)':\nassOp.cpp:102:25: error: passing 'const Test2' as 'this' argument of 'int Test2:\n:getNum()' discards qualifiers [-fpermissive]\n  setNum(original.getNum());\n                         ^\nassOp.cpp:103:27: error: passing 'const Test2' as 'this' argument of 'char* Test\n2::getChar()' discards qualifiers [-fpermissive]\n  setChar(original.getChar());\n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\nusing namespace std;\n\nclass Test1\n{\n    public:\n        Test1();\n        Test1(const Test1&amp; original);\n        int getNum();\n        char *getChar();\n\n        void setNum(int x);\n        void setChar(char y[]);\n\n\n    private:\n        int num;\n        char *ch;\n\n};\n\nclass Test2\n{\n    public:\n        Test2();\n        Test2(const Test2&amp; original);\n\n        void setNum(int x);\n        void setChar(char y[]);\n\n        int getNum();\n        char *getChar();\n\n    private:\n        Test1  foo;\n\n\n};\n\nint main()\n{\n\n    Test1 a;\n    Test2 b;\n\n\n\n    return 0;\n}\n\nTest1::Test1()\n{\n    num = 1234;\n    ch = new char[5];\n    strcpy(ch,\"test\");\n}\n\nTest1::Test1(const Test1&amp; original)\n{\n    int length = strlen(original.ch); \n\n    num = original.num;\n    ch = new char[length + 1];\n    strcpy(ch, original.ch);\n    ch[length] = '\\0';\n\n}\n\nint Test1::getNum()\n{\n    return num;\n}\n\nchar *Test1::getChar()\n{\n    return ch;\n}\n\nvoid Test1::setNum(int x)\n{\n    num = x;\n}\n\nvoid Test1::setChar(char y[])\n{\n    int length = strlen(y); \n    ch = new char[length + 1];\n    strcpy(ch, y);\n    ch[length] = '\\0';\n\n}\n\nTest2::Test2()\n{\n\n}\n\n//Sassy copy constructor that thinks its better than me\nTest2::Test2(const Test2&amp; original)\n{\n\n    setNum(original.getNum());\n    setChar(original.getChar());\n\n\n}\n\nvoid Test2::setNum(int x)\n{\n    foo.setNum(x);\n}\n\nvoid Test2::setChar(char y[])\n{\n    foo.setChar(y);\n\n}\n\nint Test2::getNum()\n{\n    return foo.getNum();\n}\n\nchar *Test2::getChar()\n{\n    return foo.getChar();\n}\n                       ^\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt-creator", "qgraphicstextitem"], "answers": [{"comments": [{"owner": {"reputation": 192, "user_id": 5354773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa2479c58e48621bac4c484dbd4d06c9?s=128&d=identicon&r=PG&f=1", "display_name": "Dromnes", "link": "https://stackoverflow.com/users/5354773/dromnes"}, "edited": false, "score": 0, "creation_date": 1466638429, "post_id": 37979655, "comment_id": 63405493, "body": "I&#39;m sorry if I burned your eyes, that was not the purpose of this post. Anyways, I&#39;ve tried your suggestion about the toPlainText(), but it didn&#39;t work either."}, {"owner": {"reputation": 832, "user_id": 1659229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TLOTm.jpg?s=128&g=1", "display_name": "Nox", "link": "https://stackoverflow.com/users/1659229/nox"}, "reply_to_user": {"reputation": 192, "user_id": 5354773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa2479c58e48621bac4c484dbd4d06c9?s=128&d=identicon&r=PG&f=1", "display_name": "Dromnes", "link": "https://stackoverflow.com/users/5354773/dromnes"}, "edited": false, "score": 0, "creation_date": 1466638493, "post_id": 37979655, "comment_id": 63405511, "body": "That&#39;s OK, I&#39;ve edit my first version of the post, a bit too rude maybe ;). Could you explain how that didn&#39;t work please?"}, {"owner": {"reputation": 192, "user_id": 5354773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa2479c58e48621bac4c484dbd4d06c9?s=128&d=identicon&r=PG&f=1", "display_name": "Dromnes", "link": "https://stackoverflow.com/users/5354773/dromnes"}, "edited": false, "score": 0, "creation_date": 1466638923, "post_id": 37979655, "comment_id": 63405615, "body": "I don&#39;t think it was rude, just fun :) When I tried the toPlainText() I got this error: request for member &#39;toPlainText&#39; in &#39;* game-&gt;Game::info-&gt;GameInfo::textBoxMap.QMap&lt;Key, T&gt;::operator[]&lt;int, QGraphicsTextItem**&gt;((<i>(const int</i>)(&amp; nPlayer)))&#39;, which is of pointer type &#39;QGraphicsTextItem*&#39; (maybe you meant to use &#39;-&gt;&#39; ?)      game-&gt;info-&gt;names[nPlayer - 1] = **game-&gt;info-&gt;textBoxMap[nPlayer]-&gt;toPlainText();"}, {"owner": {"reputation": 832, "user_id": 1659229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TLOTm.jpg?s=128&g=1", "display_name": "Nox", "link": "https://stackoverflow.com/users/1659229/nox"}, "reply_to_user": {"reputation": 192, "user_id": 5354773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa2479c58e48621bac4c484dbd4d06c9?s=128&d=identicon&r=PG&f=1", "display_name": "Dromnes", "link": "https://stackoverflow.com/users/5354773/dromnes"}, "edited": false, "score": 0, "creation_date": 1466639912, "post_id": 37979655, "comment_id": 63405842, "body": "Read the error again. The answer lie within.    pssssst. &quot;maybe you meant to use &#39;-&gt;&#39; ?&quot;"}, {"owner": {"reputation": 192, "user_id": 5354773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa2479c58e48621bac4c484dbd4d06c9?s=128&d=identicon&r=PG&f=1", "display_name": "Dromnes", "link": "https://stackoverflow.com/users/5354773/dromnes"}, "edited": false, "score": 0, "creation_date": 1466640076, "post_id": 37979655, "comment_id": 63405879, "body": "That&#39;s the part I don&#39;t understand. I do use the &#39;-&gt;&#39; before toPlainText()"}, {"owner": {"reputation": 192, "user_id": 5354773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa2479c58e48621bac4c484dbd4d06c9?s=128&d=identicon&r=PG&f=1", "display_name": "Dromnes", "link": "https://stackoverflow.com/users/5354773/dromnes"}, "edited": false, "score": 0, "creation_date": 1466640351, "post_id": 37979655, "comment_id": 63405952, "body": "game-&gt;info-&gt;names[nPlayer - 1] = **game-&gt;info-&gt;textBoxMap[nPlayer]-&gt;toPlainText();"}, {"owner": {"reputation": 832, "user_id": 1659229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TLOTm.jpg?s=128&g=1", "display_name": "Nox", "link": "https://stackoverflow.com/users/1659229/nox"}, "reply_to_user": {"reputation": 192, "user_id": 5354773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa2479c58e48621bac4c484dbd4d06c9?s=128&d=identicon&r=PG&f=1", "display_name": "Dromnes", "link": "https://stackoverflow.com/users/5354773/dromnes"}, "edited": false, "score": 0, "creation_date": 1466644555, "post_id": 37979655, "comment_id": 63406969, "body": "I have updated my answer, please tick as answered if it&#39;s what you were trying to do."}], "tags": [], "owner": {"reputation": 832, "user_id": 1659229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TLOTm.jpg?s=128&g=1", "display_name": "Nox", "link": "https://stackoverflow.com/users/1659229/nox"}, "is_accepted": true, "score": 2, "last_activity_date": 1466640814, "last_edit_date": 1466640814, "creation_date": 1466636857, "answer_id": 37979655, "question_id": 37979235, "link": "https://stackoverflow.com/questions/37979235/fetch-text-from-unnamed-qgraphicstextitem/37979655#37979655", "title": "Fetch text from unnamed QGraphicsTextItem", "body": "<p>You should try to learn a bit more about C++ before trying to develop a game imo. (Having public variables is against OO's and C++ paradigm)</p>\n\n<p>But here is what you are looking for:\n<a href=\"http://doc.qt.io/qt-5/qgraphicstextitem.html#toPlainText\" rel=\"nofollow\" title=\"QGraphicsTextItem::toPlainText&#40;&#41;\">http://doc.qt.io/qt-5/qgraphicstextitem.html#toPlainText</a></p>\n\n<p>EDIT:</p>\n\n<p>If you are not able to debug some line of code, I could only recommend to try to seperate your code in order to have a minimum of call in a single line. I haven't try the code bellow, but that how you should try to debug your code:</p>\n\n<pre><code>    void Container::lock(int nPlayer)\n    {\n       qDebug() &lt;&lt; game-&gt;info-&gt;textBoxMap[nPlayer];\n       qDebug() &lt;&lt; game-&gt;info-&gt;names[nPlayer - 1];\n       QGraphicsTextItem **value = game-&gt;info-&gt;textBoxMap.value(nPlayer, nullptr);\n       game-&gt;info-&gt;names[nPlayer - 1] =(*value)-&gt;toPlainText();\n    }\n</code></pre>\n"}], "owner": {"reputation": 192, "user_id": 5354773, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa2479c58e48621bac4c484dbd4d06c9?s=128&d=identicon&r=PG&f=1", "display_name": "Dromnes", "link": "https://stackoverflow.com/users/5354773/dromnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 37979655, "answer_count": 1, "score": 0, "last_activity_date": 1466640814, "creation_date": 1466634253, "question_id": 37979235, "link": "https://stackoverflow.com/questions/37979235/fetch-text-from-unnamed-qgraphicstextitem", "title": "Fetch text from unnamed QGraphicsTextItem", "body": "<p>A friend of mine and I are currently trying to make a game in C++ using Qt. Our current problem is that we need to fetch text from a <code>QGraphicsTextItem</code> on a button <code>mousePressEvent</code>. In the game menu it is possible to choose how many players there are, therefore we've placed a <code>QGraphicsTextItem</code> in a for-loop to make it possible for all the users to type in their names. Because of the for-loop, we don't have names for every single text item object so we can store the names. We've managed to store all the memory addresses to the objects using <code>QMap</code>, but we don't know how to get the text of of this. We don't even know if this is the best way to do it.</p>\n\n<blockquote>\n  <p>GameInfo.h</p>\n</blockquote>\n\n<pre><code>class GameInfo {\npublic:\n    GameInfo();\n    int players;\n\n    QStringList names = (QStringList() // Default player names. This array should be overwritten by the custom names\n        &lt;&lt; \"Player 1\"\n        &lt;&lt; \"Player 2\"\n        &lt;&lt; \"Player 3\"\n        &lt;&lt; \"Player 4\"\n        &lt;&lt; \"Player 5\"\n        &lt;&lt; \"Player 6\"\n        &lt;&lt; \"Player 7\");\n\n    QMap&lt;int, QGraphicsTextItem**&gt; textBoxMap; // This is where we store all the addresses\n};\n</code></pre>\n\n<blockquote>\n  <p>Game.cpp</p>\n</blockquote>\n\n<pre><code>    QGraphicsRectItem * overviewBox = new QGraphicsRectItem();\n    overviewBox-&gt;setRect(0, 0, 782, 686);\n    scene-&gt;addItem(overviewBox);\n\n    int faceNo = 0;\n\n// Create the player selection section\n    for(int i = 1; i &lt;= players; i++) { // \"players\" is defined another place in the code, and is an integer between 1 and 6\n        Container * selContainer = new Container();\n        selContainer-&gt;Selection(i, faceNo);\n        selContainer-&gt;setPos(50, 70 + 110 * (i - 1));\n        scene-&gt;addItem(selContainer);\n        Container * ovContainer = new Container(overviewBox);\n        ovContainer-&gt;Overview(i, faceNo);\n        ovContainer-&gt;setPos(0, 0 + 110 * (i - 1));\n\n        info-&gt;textBoxMap.insert(i, &amp;selContainer-&gt;textBox-&gt;playerText); // This is where we save the addresses\n    }\n</code></pre>\n\n<blockquote>\n  <p>Selection.cpp</p>\n</blockquote>\n\n<pre><code>extern Game * game;\n\nContainer::Container(QGraphicsItem * parent): QGraphicsRectItem(parent) {\n\n}\n\nvoid Container::Selection(int nPlayers, int sPiceNo, QGraphicsItem *parent) {\n\n    QString numName = QString::number(nPlayers);\n\n    setRect(0, 0, 672, 110);\n    this-&gt;setPen(Qt::NoPen); // Removes border\n\n    int posY = this-&gt;rect().height() / 2;\n\n    QSignalMapper * signalMapper = new QSignalMapper(this);\n\n    arrowL = new Arrow(0, posY - 32, 0, this);\n    piece = new Piece(sPiceNo, 96, posY - 32, 1, 1, this);\n    arrowR = new Arrow(192, posY - 32, 1, this);\n    textBox = new TextBox(game-&gt;info-&gt;names[nPlayers - 1], true, this);\n    textBox-&gt;setPos(288, posY - 32);\n    lockBtn = new Button(\"Lock\", 96, 32, this);\n    connect(lockBtn, SIGNAL(clicked()), signalMapper, SLOT(map()));\n    signalMapper-&gt;setMapping(lockBtn, nPlayers);\n    connect(signalMapper, SIGNAL(mapped(int)), this, SLOT(lock(int)));\n    lockBtn-&gt;setPos(640, posY - 16);\n\n}\n\n\nvoid Container::Overview(int ovPlayers, int ovPiceNo, QGraphicsItem * parent) {\n    // Some code...\n}\n\nvoid Container::lock(int nPlayer) {\n    qDebug() &lt;&lt; game-&gt;info-&gt;textBoxMap[nPlayer];\n    qDebug() &lt;&lt; game-&gt;info-&gt;names[nPlayer - 1];\n\n    game-&gt;info-&gt;names[nPlayer - 1] = **game-&gt;info-&gt;textBoxMap[nPlayer].toPlainText(); // This line causes an error\n}\n</code></pre>\n\n<p>The error that occurs because of the last line looks like this:</p>\n\n<pre><code>error: no match for 'operator=' (operand types are 'QString' and 'QGraphicsTextItem')\n game-&gt;info-&gt;names[nPlayer - 1] = **game-&gt;info-&gt;textBoxMap[nPlayer];\n                                ^\n</code></pre>\n\n<blockquote>\n  <p>TextBox.cpp</p>\n</blockquote>\n\n<pre><code>TextBox::TextBox(QString text, bool editable, QGraphicsItem * parent): QGraphicsRectItem(parent) {\n    this-&gt;editable = editable;\n\n// Draw the textbox\n    setRect(0, 0, 320, 64);\n    if(!editable) {\n        this-&gt;setPen(Qt::NoPen); // Removes border\n    }\n    else if(editable) {\n        QBrush brush;\n        brush.setStyle(Qt::SolidPattern);\n        brush.setColor(QColor(255, 255, 255, 255));\n        setBrush(brush);\n    }\n\n// Draw the text\n    playerText = new QGraphicsTextItem(text, this);\n    int fontId = QFontDatabase::addApplicationFont(\":/fonts/built_titling_bd.ttf\");\n\n    QString family = QFontDatabase::applicationFontFamilies(fontId).at(0);\n    QFont built(family, 25);\n    playerText-&gt;setFont(built);\n    int xPos = 0;\n    int yPos = rect().height() / 2 - playerText-&gt;boundingRect().height() / 2;\n    playerText-&gt;setPos(xPos,yPos);\n}\n</code></pre>\n\n<p>My question is how do i fetch the text from the <code>QGraphicsTextItem</code>?</p>\n"}, {"tags": ["c++", "gps", "3g", "mbed", "adafruit"], "comments": [{"owner": {"reputation": 775, "user_id": 1111790, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/79dc09d34bc431d6226506aafc873c80?s=128&d=identicon&r=PG", "display_name": "Kixoka", "link": "https://stackoverflow.com/users/1111790/kixoka"}, "edited": false, "score": 0, "creation_date": 1467805975, "post_id": 37978981, "comment_id": 63868643, "body": "I am having the same sort of problems as well..."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4437756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nw74gClBrYQ/AAAAAAAAAAI/AAAAAAAAAN4/aog64rK26TU/photo.jpg?sz=128", "display_name": "Nikita Bocharov", "link": "https://stackoverflow.com/users/4437756/nikita-bocharov"}, "is_accepted": false, "score": 0, "last_activity_date": 1471811958, "creation_date": 1471811958, "answer_id": 39068654, "question_id": 37978981, "link": "https://stackoverflow.com/questions/37978981/adafruit-fona-3g-gps-shows-no-response/39068654#39068654", "title": "Adafruit FONA 3G GPS shows no response", "body": "<p>It was just a hardware failure. Adafruit sent us a new FONA module as a free replacement, and the replacement module worked fine. The output was in Degree Minutes and needs to be converted to Decimal Minutes. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11522192, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/285e97635b13de5caa4c4d7521aa75e1?s=128&d=identicon&r=PG", "display_name": "henrietta", "link": "https://stackoverflow.com/users/11522192/henrietta"}, "is_accepted": false, "score": 0, "last_activity_date": 1558228388, "creation_date": 1558228388, "answer_id": 56204026, "question_id": 37978981, "link": "https://stackoverflow.com/questions/37978981/adafruit-fona-3g-gps-shows-no-response/56204026#56204026", "title": "Adafruit FONA 3G GPS shows no response", "body": "<p>if you are using an active antenna you need to solder the jumper called 'bias'. This jumper is next to the GPS antenna connector. </p>\n\n<p>This fixed the problem straight away for me :)</p>\n"}], "owner": {"reputation": 1, "user_id": 4437756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nw74gClBrYQ/AAAAAAAAAAI/AAAAAAAAAN4/aog64rK26TU/photo.jpg?sz=128", "display_name": "Nikita Bocharov", "link": "https://stackoverflow.com/users/4437756/nikita-bocharov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 704, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1558228388, "creation_date": 1466632753, "question_id": 37978981, "link": "https://stackoverflow.com/questions/37978981/adafruit-fona-3g-gps-shows-no-response", "title": "Adafruit FONA 3G GPS shows no response", "body": "<p>I am currently working on a project with a friend of mine that involves GPS tracking. This is the FONA 3G GPS board that we are using from Adafruit. <a href=\"https://www.adafruit.com/product/3147\" rel=\"nofollow\">https://www.adafruit.com/product/3147</a></p>\n\n<p>We are also using the recommended active GPS antenna with it. I can't post a link to it because of my low reputation. </p>\n\n<p>We are prototyping the system on an mbed LPC1768 microcontroller. We wrote our own mbed code that sends AT commands to the FONA through the UART on the mbed, and then displays the reply on the computer through putty. We have tried several AT simple AT commands, such as manufacturer information and SIM card information, and those have worked fine. We have also tried more complex AT commands that request battery level and such, and those also worked. We are now having trouble with getting a GPS response. Last night at around 1 am we were able to get a GPS response with the AT+CGPSINFO command that shows us longtitude, latitude, bearing, and such. However, it was inacurrate by about 40 miles. Today when we went back to it to try and fix this, we are unable to receive any response whatsoever from the GPS. We can still receive responses from the battery level and other commands. It's just the GPS that is not responding. We have tried this indoors and out, and left the module running for over an hour in the GPSTEST mode, to no avail. </p>\n\n<p>This is the code that we have so far. </p>\n\n<pre><code>#include \"mbed.h\"\n\n#define FONA_RST p12\n#define FONA_TX p13\n#define FONA_RX p14\n#define FONA_RI p11\nSerial fona(FONA_TX, FONA_RX);\n\nSerial pc(USBTX, USBRX);\nSerial esp(p28, p27); // tx, rx\nDigitalOut reset(p26);\nTimer t;\n\nint  count,ended,timeout;\nchar buf[4024];\nchar snd[255];\n\nchar ssid[32] = \"ycp-web-wifi\";     // enter WiFi router ssid inside the                  quotes\nchar pwd [32] = \"YCPnet2005\"; // enter WiFi router password inside the quotes\n\nvoid   SendCMD(),getreply(),ESPconfig(),ESPsetbaudrate(),sendFONA(),getFONAreply(), FONAconfig(), FONAsetbaudrate();\n\n\nint main()\n{\n    reset=0; //hardware reset for 8266\n    pc.baud(9600);  // set what you want here depending on your terminal program speed\n    pc.printf(\"\\f\\n\\r-------------ESP8266 Hardware Reset-------------\\n\\r\");\n    wait(0.5);\n    reset=1;\n    timeout=2;\n    getreply();\n\n    esp.baud(115200);   // change this to the new ESP8266 baudrate if it is changed at any time.\n    fona.baud(115200);\n    //ESPsetbaudrate();   //******************  include this routine to set a different ESP8266 baudrate  ******************\n\n    //ESPconfig();        //******************  include Config to set the ESP8266 configuration  ***********************\n    FONAconfig();\n\n    while(1) {  \n    /* \n        pc.printf(\"\\n---------- GPS Test ----------\\r\\n\");\n        strcpy(snd,\"AT+CGPSFTM=1\\r\\n\");\n        sendFONA();\n        timeout=10;\n        getFONAreply();\n        pc.printf(buf);\n\n        wait(5);*/\n\n        pc.printf(\"\\n---------- Get Battery Information ----------\\r\\n\");\n        strcpy(snd,\"AT+CBC\\r\\n\");\n        sendFONA();\n        timeout=5;\n        getFONAreply();\n        pc.printf(buf);\n\n        wait(1);\n\n        pc.printf(\"\\n---------- Get GPS Coordinates ----------\\r\\n\");\n        strcpy(snd,\"AT+CGPSINFO\\r\\n\");\n        sendFONA();\n        timeout=60;\n        getFONAreply();\n        pc.printf(buf);\n\n        /*\n        wait(2);\n        pc.printf(\"\\n---------- Get Connected Devices ----------\\r\\n\");\n        strcpy(snd, \"AT+CWLIF\\r\\n\");\n        SendCMD();\n        timeout=5;\n        getreply();\n        pc.printf(buf);\n        wait(2);*/\n    }\n\n}\n\n// Sets new ESP8266 baurate, change the esp.baud(xxxxx) to match your new setting once this has been executed\nvoid ESPsetbaudrate()\n{\n    strcpy(snd, \"AT+CIOBAUD=115200\\r\\n\");   // change the numeric value to the required baudrate\n    SendCMD();\n}\n\nvoid FONAsetbaudrate()\n{\n    strcpy(snd, \"AT+IPREX=115200\\r\\n\");   // change the numeric value to the required baudrate\n    SendCMD();\n}\n\n// FONA Config\nvoid FONAconfig()\n{\n    pc.printf(\"---------- Starting FONA Config ----------\\r\\n\\n\");\n\n    strcpy(snd,\"AT\\r\\n\");\n    sendFONA();\n    timeout=1;\n    getFONAreply();\n    pc.printf(buf);\n\n    wait(2);\n    strcpy(snd,\"ATI\\r\\n\");\n    sendFONA();\n    timeout=1;\n    getFONAreply();\n    pc.printf(buf);\n\n    wait(2);\n    strcpy(snd,\"AT+CGPSAUTO=1\\r\\n\");\n    sendFONA();\n    timeout=1;\n    getFONAreply();\n    pc.printf(buf);\n\n    // Test Mode (0=off / 1=on)\n    strcpy(snd,\"AT+CGPSFTM=0\\r\\n\");\n    sendFONA();\n    timeout=1;\n    getFONAreply();\n    pc.printf(buf);\n\n    /*\n    wait(2);\n    strcpy(snd,\"AT+CGPS=0,1\\r\\n\");\n    sendFONA();\n    timeout=1;\n    getFONAreply();\n    pc.printf(buf);\n\n    wait(5);\n\n    strcpy(snd,\"AT+CGPSHOT\\r\\n\");\n    sendFONA();\n    timeout=1;\n    getFONAreply();\n    pc.printf(buf);\n\n\n    strcpy(snd,\"AT+CGPS=1,1\\r\\n\");\n    sendFONA();\n    timeout=1;\n    getFONAreply();\n    pc.printf(buf);*/\n\n}\n\n//  +++++++++++++++++++++++++++++++++ This is for ESP8266 config only, run this once to set up the ESP8266 +++++++++++++++\nvoid ESPconfig()\n{\n    wait(5);\n    strcpy(snd,\"AT\\r\\n\");\n    SendCMD();\n    wait(1);\n    strcpy(snd,\"AT\\r\\n\");\n    SendCMD();\n    wait(1);\n    strcpy(snd,\"AT\\r\\n\");\n    SendCMD();\n    timeout=1;\n    getreply();\n    wait(1);\n    pc.printf(\"\\f---------- Starting ESP Config ----------\\r\\n\\n\");\n\n    pc.printf(\"---------- Reset &amp; get Firmware ----------\\r\\n\");\n    strcpy(snd,\"AT+RST\\r\\n\");\n    SendCMD();\n    timeout=5;\n    getreply();\n    pc.printf(buf);\n\n    wait(2);\n\n    pc.printf(\"\\n---------- Get Version ----------\\r\\n\");\n    strcpy(snd,\"AT+GMR\\r\\n\");\n    SendCMD();\n    timeout=4;\n    getreply();\n    pc.printf(buf);\n\n    wait(3);\n\n    // set CWMODE to 1=Station,2=AP,3=BOTH, default mode 1 (Station)    \n    pc.printf(\"\\n---------- Setting Mode ----------\\r\\n\");\n    strcpy(snd, \"AT+CWMODE_CUR=3\\r\\n\");\n    SendCMD();\n    timeout=4;\n    getreply();\n    pc.printf(buf);\n\n    wait(2);\n\n    pc.printf(\"\\n---------- SoftAP Configuration ----------\\r\\n\");\n    strcpy(snd, \"AT+CWSAP_CUR=\\\"ESP8266\\\",\\\"\\\",11,0\\r\\n\");\n    SendCMD();\n    timeout=10;\n    getreply();\n    pc.printf(buf);\n\n    wait(2);\n\n    // set CIPMUX to 0=Single,1=Multi\n    pc.printf(\"\\n---------- Setting Connection Mode ----------\\r\\n\");\n    strcpy(snd, \"AT+CIPMUX=1\\r\\n\");\n    SendCMD();\n    timeout=4;\n    getreply();\n    pc.printf(buf);\n\n    wait(2);\n\n/*\n    pc.printf(\"\\n---------- Listing Access Points 2 ----------\\r\\n\");\n    strcpy(snd, \"AT+CWLAP\\r\\n\");\n    SendCMD();\n    timeout=15;\n    getreply();\n    pc.printf(buf);*/\n\n    wait(2);\n\n    pc.printf(\"\\n---------- Connecting to AP ----------\\r\\n\");\n    pc.printf(\"ssid = %s   pwd = %s\\r\\n\",ssid,pwd);\n    strcpy(snd, \"AT+CWJAP=\\\"\");\n    strcat(snd, ssid);\n    strcat(snd, \"\\\",\\\"\");\n    strcat(snd, pwd);\n    strcat(snd, \"\\\"\\r\\n\");\n    SendCMD();\n    timeout=10;\n    getreply();\n    pc.printf(buf);\n\n    wait(5);\n\n    pc.printf(\"\\n---------- Get IP's ----------\\r\\n\");\n    strcpy(snd, \"AT+CIFSR\\r\\n\");\n    SendCMD();\n    timeout=3;\n    getreply();\n    pc.printf(buf);\n\n    wait(1);\n\n    pc.printf(\"\\n---------- Get Connection Status ----------\\r\\n\");\n    strcpy(snd, \"AT+CIPSTATUS\\r\\n\");\n    SendCMD();\n    timeout=5;\n    getreply();\n    pc.printf(buf);\n\n    pc.printf(\"\\n++++++++++ Pinging Site ++++++++++\\r\\n\");\n    strcpy(snd, \"AT+PING=\\\"172.31.5.67\\\"\\r\\n\");  \n    timeout=5;\n    SendCMD();\n    getreply();\n    pc.printf(buf);\n\n    strcpy(snd, \"AT+PING=\\\"www.google.com\\\"\\r\\n\");  \n    timeout=5;\n    SendCMD();\n    getreply();\n    pc.printf(buf);\n\n    pc.printf(\"\\n++++++++++ List of APs ++++++++++\\r\\n\");\n        strcpy(snd, \"AT+CWLAP\\r\\n\");  \n        timeout=5;\n        SendCMD();\n        getreply();\n        pc.printf(buf);\n}\n\nvoid SendCMD()\n{\n    esp.printf(\"%s\", snd);\n}\n\nvoid sendFONA()\n{\n    fona.printf(\"%s\", snd);\n}\n\nvoid getreply()\n{\n    memset(buf, '\\0', sizeof(buf));\n    t.start();\n    ended=0;\n    count=0;\n    while(!ended) {\n        if(esp.readable()) {\n            buf[count] = esp.getc();\n            count++;\n        }\n        if(t.read() &gt; timeout) {\n            ended = 1;\n            t.stop();\n            t.reset();\n        }\n    }\n}\n\nvoid getFONAreply()\n{\n    memset(buf, '\\0', sizeof(buf));\n    t.start();\n    ended=0;\n    count=0;\n    while(!ended) {\n        if(fona.readable()) {\n            buf[count] = fona.getc();\n            count++;\n        }\n        if(t.read() &gt; timeout) {\n            ended = 1;\n            t.stop();\n            t.reset();\n        }\n    }\n}\n</code></pre>\n\n<p>There's also code for the ESP module that we're working with in here, but it's commented out and I don't believe that to be the issue. </p>\n\n<p>Here is the response that we get when we run this code. <a href=\"http://i.stack.imgur.com/zzDDg.png\" rel=\"nofollow\">Output from the FONA</a></p>\n\n<p>We have tried this indoors and outdoors, and with varying degrees of time between calling functions, and nothing seems to make it work. This is especially infuriating because this was at least giving us coordinates last night, even though it was the wrong ones. Now, as you can see, it's not giving us at coordinates at all. </p>\n\n<p>Does anyone have any idea what might be the issue here? It seems that because this board is relatively new and untested, there is not a very big support group for these problems. Thank you for any help you could give!</p>\n\n<p>Sidenote: Does anyone know what the AmpI/AmpQ values mean? We figured it had something to do with signal strength, but it seems rather arbitrary. </p>\n"}, {"tags": ["php", "c++"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 3, "creation_date": 1466632797, "post_id": 37978925, "comment_id": 63403858, "body": "the php code by itself is essentially useless, since the crash would be occuring inside your plugin. Since you&#39;ve provided none of that code, we can&#39;t help you."}, {"owner": {"reputation": 11, "user_id": 5099723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90eb86ffc7f3cf6794d766d58c9bf514?s=128&d=identicon&r=PG&f=1", "display_name": "aeh", "link": "https://stackoverflow.com/users/5099723/aeh"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1466636613, "post_id": 37978925, "comment_id": 63405009, "body": "Only supplied it to give an idea of what it&#39;s basically used for.  Extension code is too vast to include here and is proprietary, but I understand.  I can at most give a link to the interface wrapper code generated by swig if that would help, but it&#39;s long and ugly."}, {"owner": {"reputation": 4938, "user_id": 2736233, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/1R16X.png?s=128&g=1", "display_name": "Ivan Gabriele", "link": "https://stackoverflow.com/users/2736233/ivan-gabriele"}, "edited": false, "score": 1, "creation_date": 1466642413, "post_id": 37978925, "comment_id": 63406488, "body": "Welcome to SO :) The point is to <a href=\"http://stackoverflow.com/help/mcve\">create a Minimal, Complete, and Verifiable example ?</a> to make it reproducible so that SO users can help you."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5099723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90eb86ffc7f3cf6794d766d58c9bf514?s=128&d=identicon&r=PG&f=1", "display_name": "aeh", "link": "https://stackoverflow.com/users/5099723/aeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1471457405, "creation_date": 1471457405, "answer_id": 39003585, "question_id": 37978925, "link": "https://stackoverflow.com/questions/37978925/php-extension-cli-crashing/39003585#39003585", "title": "PHP extension CLI crashing", "body": "<p>Turned out to be my lack of understanding SWIG's implementation of STL.  When I removed STL from the wrapper source, the extension worked as expected.  I later added STL back in, albeit in proper SWIG fashion!</p>\n"}], "owner": {"reputation": 11, "user_id": 5099723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90eb86ffc7f3cf6794d766d58c9bf514?s=128&d=identicon&r=PG&f=1", "display_name": "aeh", "link": "https://stackoverflow.com/users/5099723/aeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471457405, "creation_date": 1466632469, "last_edit_date": 1467045394, "question_id": 37978925, "link": "https://stackoverflow.com/questions/37978925/php-extension-cli-crashing", "title": "PHP extension CLI crashing", "body": "<p>I have c++ class used for encrypting a file - works fine on it's own.  I wrapped it using swig for 5.6.x-nts-Win32-x64 PHP.  Usage:</p>\n\n<pre><code>&lt;?php\n\nrequire(\"crypt.php\");\n\n$e = new CCrypt();\n\n//(plain, encrypted)\nif ($e-&gt;EncryptFile(\"sample\",\"enc/sample\")) {\n  print \"Encrypted file\\n\";\n}\n$e = NULL;\nprint \"Goodbye\\n\"\n?&gt;\n</code></pre>\n\n<p>Problem is this seems to work <em>sometimes</em>, with no consistent line in the extension code as to where it crashes when debugging.  Error is corrupted heap.  I am new to developing PHP extensions, and I'm wondering if this has to do with unsupported 64-bit PHP version, or something unique to CLI.  Swig does not (yet) support PHP 7 :/</p>\n\n<p><strong>UPDATE</strong>\nForgot to mention encryption works fine if run as an executable from PHP.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1466632882, "post_id": 37978924, "comment_id": 63403877, "body": "How about require that the creator of those names place quotes around directories that have spaces?  If they don&#39;t follow the rules you&#39;ve set, that&#39;s the user&#39;s problem, not yours."}, {"owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "edited": false, "score": 1, "creation_date": 1466633064, "post_id": 37978924, "comment_id": 63403935, "body": "Is there a reason why you&#39;re taking all 3 parameters through a single line read from stdin? Instead you could read each parameter on its own line of stdin, or take each parameter from command-line arguments in <code>argv</code>. Either of these two approaches would solve the space issue."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1466633538, "post_id": 37978924, "comment_id": 63404081, "body": "How would you tell the difference between a space that separates parameters and a space in a directory name?"}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 1, "creation_date": 1466634404, "post_id": 37978924, "comment_id": 63404373, "body": "why don&#39;t you use <code>main (int argc, char **argv) </code> and give the arguments in command line?"}, {"owner": {"reputation": 223, "user_id": 5395760, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/910f6104290a79b2019ce80971912168?s=128&d=identicon&r=PG&f=1", "display_name": "Melissia_M", "link": "https://stackoverflow.com/users/5395760/melissia-m"}, "reply_to_user": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "edited": false, "score": 0, "creation_date": 1466634408, "post_id": 37978924, "comment_id": 63404375, "body": "@bgoldst the code need to do it in one line."}, {"owner": {"reputation": 223, "user_id": 5395760, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/910f6104290a79b2019ce80971912168?s=128&d=identicon&r=PG&f=1", "display_name": "Melissia_M", "link": "https://stackoverflow.com/users/5395760/melissia-m"}, "edited": false, "score": 0, "creation_date": 1466634464, "post_id": 37978924, "comment_id": 63404393, "body": "i edited my code, this is not a main function..."}], "answers": [{"tags": [], "owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "is_accepted": false, "score": 2, "last_activity_date": 1476867811, "last_edit_date": 1476867811, "creation_date": 1466637165, "answer_id": 37979704, "question_id": 37978924, "link": "https://stackoverflow.com/questions/37978924/split-string-path-with-space/37979704#37979704", "title": "Split string path with space", "body": "<p>I had similar problem few days ago and solve it like this:</p>\n\n<p>First I've created a copy, Then replace the quoted strings in the copy with some padding to avoid white spaces, finally I split the original string according to the white space indexes from the copy. </p>\n\n<p>Here is my full solution:</p>\n\n<p>you may want to also remove the double quotes, trim the original string and so on: </p>\n\n<pre><code>#include &lt;sstream&gt;\n#include&lt;iostream&gt;\n#include&lt;vector&gt;\n#include&lt;string&gt;\nusing namespace std;\n\n\nstring padString(size_t len, char pad)\n{\n    ostringstream ostr;\n    ostr.fill(pad);\n    ostr.width(len);\n    ostr&lt;&lt;\"\";\n    return ostr.str();\n}\nvoid splitArgs(const string&amp; s, vector&lt;string&gt;&amp; result)\n{\n    size_t pos1=0,pos2=0,len;\n    string res = s;\n\n    pos1 = res.find_first_of(\"\\\"\");\n    while(pos1 != string::npos &amp;&amp; pos2 != string::npos){\n        pos2 = res.find_first_of(\"\\\"\",pos1+1);\n        if(pos2 != string::npos ){\n            len = pos2-pos1+1;\n            res.replace(pos1,len,padString(len,'X'));\n            pos1 = res.find_first_of(\"\\\"\");\n        }\n    }\n    pos1=res.find_first_not_of(\" \\t\\r\\n\",0);\n    while(pos1 &lt; s.length() &amp;&amp; pos2 &lt; s.length()){\n        pos2 = res.find_first_of(\" \\t\\r\\n\",pos1+1);\n        if(pos2 == string::npos ){\n            pos2 = res.length();\n        }\n        len = pos2-pos1;\n        result.push_back(s.substr(pos1,len));\n        pos1 = res.find_first_not_of(\" \\t\\r\\n\",pos2+1);\n    }\n}\n\nint main()\n{\n    string s = \"234 \\\"5678 91\\\" 8989\"; \n    vector&lt;string&gt; args;\n    splitArgs(s,args);\n    cout&lt;&lt;\"original string:\"&lt;&lt;s&lt;&lt;endl;\n    for(size_t i=0;i&lt;args.size();i++)\n       cout&lt;&lt;\"arg \"&lt;&lt;i&lt;&lt;\": \"&lt;&lt;args[i]&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>and this is the output:</p>\n\n<pre><code>original string:234 \"5678 91\" 8989\narg 0: 234\narg 1: \"5678 91\"\narg 2: 8989\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "is_accepted": false, "score": 2, "last_activity_date": 1466638532, "last_edit_date": 1466638532, "creation_date": 1466638065, "answer_id": 37979856, "question_id": 37978924, "link": "https://stackoverflow.com/questions/37978924/split-string-path-with-space/37979856#37979856", "title": "Split string path with space", "body": "<p>Since you need to accept three values from a single string input, this is a problem of <a href=\"https://en.wikipedia.org/wiki/Code\" rel=\"nofollow\">encoding</a>.</p>\n\n<p>Encoding is sometimes done by imposing fixed-width requirements on some or all fields, but that's clearly not appropriate here, since we need to support variable-width file system paths, and the first value (which appears to be some kind of mode specifier) may be variable-width as well. So that's out.</p>\n\n<p>This leaves 4 possible solutions for variable-width encoding:</p>\n\n<hr>\n\n<p><strong>1:</strong> Unambiguous delimiter.</p>\n\n<p>If you can select a separator character that is guaranteed never to show up in the delimited values, then you can split on that. For example, if NUL is guaranteed never to be part of the mode value or the path values, then we can do this:</p>\n\n<pre><code>std::vector&lt;std::string&gt; v_input = split(input,'\\0');\n</code></pre>\n\n<p>Or maybe the pipe character:</p>\n\n<pre><code>std::vector&lt;std::string&gt; v_input = split(input,'|');\n</code></pre>\n\n<p>Hence the input would have to be given like this (for the pipe character):</p>\n\n<pre><code>file_upload|/home/user/Space Dir/file.out|/home/user/Other Dir/blah\n</code></pre>\n\n<hr>\n\n<p><strong>2:</strong> Escaping.</p>\n\n<p>You can write the code to iterate through the input line and properly split it on unescaped instances of the separator character. Escaped instances will not be considered separators. You can parameterize the escape character. For example:</p>\n\n<pre><code>std::vector&lt;std::string&gt; escapedSplit(std::string str, char delimiter, char escaper ) {\n    std::vector&lt;std::string&gt; res;\n    std::string cur;\n    for (size_t i = 0; i &lt; str.size(); ++i) {\n        if (str[i] == delimiter) {\n            res.push_back(cur);\n            cur.clear();\n        } else if (str[i] == escaper) {\n            ++i;\n            if (i == str.size()) break;\n            cur.push_back(str[i]);\n        } else {\n            cur.push_back(str[i]);\n        } // end if\n    } // end for\n    if (!cur.empty()) res.push_back(cur);\n    return res;\n} // end escapedSplit()\n\nstd::vector&lt;std::string&gt; v_input = escapedSplit(input,' ','\\\\');\n</code></pre>\n\n<p>With input as:</p>\n\n<pre><code>file_upload /home/user/Space\\ Dir/file.out /home/user/Other\\ Dir/blah\n</code></pre>\n\n<hr>\n\n<p><strong>3:</strong> Quoting.</p>\n\n<p>You can write the code to iterate through the input line and properly split it on unquoted instances of the separator character. Quoted instances will not be considered separators. You can parameterize the quote character.</p>\n\n<p>A complication of this approach is that it is not possible to include the quote character itself inside a quoted extent unless you introduce an escaping mechanism, similar to solution #2. A common strategy is to allow repetition of the quote character to escape it. For example:</p>\n\n<pre><code>std::vector&lt;std::string&gt; quotedSplit(std::string str, char delimiter, char quoter ) {\n    std::vector&lt;std::string&gt; res;\n    std::string cur;\n    for (size_t i = 0; i &lt; str.size(); ++i) {\n        if (str[i] == delimiter) {\n            res.push_back(cur);\n            cur.clear();\n        } else if (str[i] == quoter) {\n            ++i;\n            for (; i &lt; str.size(); ++i) {\n                if (str[i] == quoter) {\n                    if (i+1 == str.size() || str[i+1] != quoter) break;\n                    ++i;\n                    cur.push_back(quoter);\n                } else {\n                    cur.push_back(str[i]);\n                } // end if\n            } // end for\n        } else {\n            cur.push_back(str[i]);\n        } // end if\n    } // end for\n    if (!cur.empty()) res.push_back(cur);\n    return res;\n} // end quotedSplit()\n\nstd::vector&lt;std::string&gt; v_input = quotedSplit(input,' ','\"');\n</code></pre>\n\n<p>With input as:</p>\n\n<pre><code>file_upload \"/home/user/Space Dir/file.out\" \"/home/user/Other Dir/blah\"\n</code></pre>\n\n<p>Or even just:</p>\n\n<pre><code>file_upload /home/user/Space\" \"Dir/file.out /home/user/Other\" \"Dir/blah\n</code></pre>\n\n<hr>\n\n<p><strong>4:</strong> Length-value.</p>\n\n<p>Finally, you can write the code to take a length before each value, and only grab that many characters. We could require a fixed-width length specifier, or skip a delimiting character following the length specifier. For example (note: light on error checking):</p>\n\n<pre><code>std::vector&lt;std::string&gt; lengthedSplit(std::string str) {\n    std::vector&lt;std::string&gt; res;\n    size_t i = 0;\n    while (i &lt; str.size()) {\n        size_t len = std::atoi(str.c_str());\n        if (len == 0) break;\n        i += (size_t)std::log10(len)+2; // +1 to get base-10 digit count, +1 to skip delim\n        res.push_back(str.substr(i,len));\n        i += len;\n    } // end while\n    return res;\n} // end lengthedSplit()\n\nstd::vector&lt;std::string&gt; v_input = lengthedSplit(input);\n</code></pre>\n\n<p>With input as:</p>\n\n<pre><code>11:file_upload29:/home/user/Space Dir/file.out25:/home/user/Other Dir/blah\n</code></pre>\n"}], "owner": {"reputation": 223, "user_id": 5395760, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/910f6104290a79b2019ce80971912168?s=128&d=identicon&r=PG&f=1", "display_name": "Melissia_M", "link": "https://stackoverflow.com/users/5395760/melissia-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1476867811, "creation_date": 1466632468, "last_edit_date": 1466636503, "question_id": 37978924, "link": "https://stackoverflow.com/questions/37978924/split-string-path-with-space", "title": "Split string path with space", "body": "<p>I am writing a program that should receive 3 parameters by User: file_upload \"local_path\" \"remote_path\"</p>\n\n<p><strong>code example:</strong></p>\n\n<pre><code>std::vector split(std::string str, char delimiter) {\n   std::vector&lt;string&gt; v;\n   std::stringstream src(str);\n   std::string buf;\n\n   while(getline(src, buf, delimiter)) {\n       v.push_back(buf);\n   }\n   return v;\n}\n\nvoid function() {\n   std::string input\n   getline(std::cin, input);\n   // user input like this: file_upload /home/Space Dir/file c:\\dir\\file\n   std::vector&lt;std::string&gt; v_input = split(input, ' ');\n\n   // the code will do something like this\n   if(v_input[0].compare(\"file_upload\") == 0) {        \n     FILE *file;\n     file = fopen(v_input[1].c_str(), \"rb\");\n     send_upload_dir(v_input[2].c_str());\n     // bla bla bla\n   }\n}\n</code></pre>\n\n<p><strong>My question is:</strong> the second and third parameter are directories, then they can contain spaces in name. How can i make the split function does not change the spaces of the second and third parameter?</p>\n\n<p>I thought to put quotes in directories and make a function to recognize, but not work 100% because the program has other functions that take only 2 parameters not three. can anyone <strong>help?</strong></p>\n\n<p><strong>EDIT:</strong> /home/user/Space Dir/file.out  &lt;-- path with space name.</p>\n\n<p>If this happens the vector size is greater than expected, and the path to the directory will be broken.. this can not happen..</p>\n\n<p>the vector will contain something like this:</p>\n\n<p><strong>vector[1]</strong> = /home/user/Space</p>\n\n<p><strong>vector[2]</strong> = Dir/file.out</p>\n\n<p>and what I want is this:</p>\n\n<p><strong>vector[1]</strong> = /home/user/Space Dir/file.out</p>\n"}, {"tags": ["c++", "opengl", "pixels", "openscenegraph"], "answers": [{"tags": [], "owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "is_accepted": true, "score": 0, "last_activity_date": 1466889831, "last_edit_date": 1466889831, "creation_date": 1466632189, "answer_id": 37978861, "question_id": 37978860, "link": "https://stackoverflow.com/questions/37978860/how-to-make-align-objects-autorotated-to-screen-to-pixel-grid/37978861#37978861", "title": "How to make align objects, autorotated to screen, to pixel grid?", "body": "<p>The misalignment problem can be solved by using a custom vertex shader, which rounds screen coordinates to integers.</p>\n\n<p>The following example is based on the code in OP, but instead of using <code>osg::AutoTransform</code> it does the whole thing of removing rotation and scaling + rounding screen coordinates in a single shader:</p>\n\n<pre><code>#include &lt;osg/Node&gt;\n#include &lt;osgViewer/Viewer&gt;\n#include &lt;osg/Texture2D&gt;\n#include &lt;osg/Geode&gt;\n\nconst char*const vertexShader=R\"(\n    #version 120\n\n    uniform vec2 screenSize;\n\n    vec4 roundCoords(vec4 clipPos)\n    {\n        vec2 halfScreenSize=screenSize/2.;\n        vec2 ndcPos=clipPos.xy/clipPos.w;            // transform to normalized device coordinates\n        vec2 screenPos=(ndcPos+1)*halfScreenSize;    // transform from NDC space to screen space\n        vec2 screenPosRounded=floor(screenPos);      // round the screen coordinates\n        ndcPos=screenPosRounded.xy/halfScreenSize-1; // transform back to NDC space\n        clipPos.xy=ndcPos*clipPos.w;                 // transform back to clip space\n        return clipPos;\n    }\n\n    void main()\n    {\n        gl_TexCoord[0]=gl_MultiTexCoord0;\n        gl_FrontColor=gl_Color;\n\n        vec4 translCol=gl_ModelViewProjectionMatrix[3];\n        // Prevent rotation and unneeded scaling\n        mat4 mvp=mat4(vec4(2./screenSize.x,  0,       0,0),\n                      vec4(      0,   2./screenSize.y,0,0),\n                      vec4(      0,         0,        1,0),\n                      vec4(translCol.xyz/translCol.w,   1));\n\n        gl_Position=roundCoords(mvp*gl_Vertex);\n    }\n)\";\n\nstatic constexpr int windowWidth=800, windowHeight=600;\n\nosg::ref_ptr&lt;osg::Node&gt; createFixedSizeTexture(osg::Image *image,int W,int H)\n{\n    osg::Vec3Array&amp; verts = *new osg::Vec3Array(4);\n    verts[0] = osg::Vec3(-W/2., -H/2., 0);\n    verts[1] = osg::Vec3(+W/2., -H/2., 0);\n    verts[2] = osg::Vec3(+W/2., +H/2., 0);\n    verts[3] = osg::Vec3(-W/2., +H/2., 0);\n\n    osg::Vec2Array&amp; texcoords = *new osg::Vec2Array(4);\n    texcoords[0].set(0,0);\n    texcoords[1].set(1,0);\n    texcoords[2].set(1,1);\n    texcoords[3].set(0,1);\n\n    osg::Geometry*const geometry = new osg::Geometry;\n    geometry-&gt;setVertexArray( &amp;verts );\n    geometry-&gt;setTexCoordArray(0, &amp;texcoords);\n    geometry-&gt;addPrimitiveSet( new osg::DrawArrays(GL_QUADS, 0, 4));\n\n    osg::Texture2D*const texture = new osg::Texture2D( image );\n    texture-&gt;setResizeNonPowerOfTwoHint(false);\n\n    geometry-&gt;getOrCreateStateSet()-&gt;setTextureAttributeAndModes(0, texture, osg::StateAttribute::ON);\n\n    osg::Geode*const geode = new osg::Geode;\n    geode-&gt;addDrawable( geometry );\n\n    osg::Program*const program = new osg::Program;\n    program-&gt;addShader(new osg::Shader(osg::Shader::VERTEX, vertexShader));\n\n    osg::StateSet*const set = geode-&gt;getOrCreateStateSet();\n    set-&gt;setAttributeAndModes(program, osg::StateAttribute::ON);\n    set-&gt;addUniform(new osg::Uniform(\"screenSize\" , osg::Vec2(windowWidth,windowHeight)));\n\n    return geode;\n}\n\nint main()\n{\n    static constexpr int W=21, H=15;\n    unsigned bits[W*H];\n    for(int x=0;x&lt;W;++x)\n        for(int y=0;y&lt;H;++y)\n            bits[x+W*y] = (x&amp;y&amp;1)*0xffffffff;\n\n    osg::Image *formImage = new osg::Image;\n    formImage-&gt;setImage(W, H, 1, GL_RGBA, GL_RGBA, GL_UNSIGNED_BYTE,\n                        reinterpret_cast&lt;unsigned char*&gt;(bits), osg::Image::NO_DELETE);\n\n    osgViewer::Viewer viewer;\n    viewer.setUpViewInWindow(0, 0, windowWidth, windowHeight);\n    viewer.setSceneData(createFixedSizeTexture(formImage,W,H));\n\n    return viewer.run();\n}\n</code></pre>\n"}], "owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 0, "accepted_answer_id": 37978861, "answer_count": 1, "score": 0, "last_activity_date": 1466889831, "creation_date": 1466632189, "last_edit_date": 1466664030, "question_id": 37978860, "link": "https://stackoverflow.com/questions/37978860/how-to-make-align-objects-autorotated-to-screen-to-pixel-grid", "title": "How to make align objects, autorotated to screen, to pixel grid?", "body": "<p>I'm trying to show a rectangular object so that it doesn't change its look on rotations and zoom in OpenSceneGraph. I've found that <code>osg::AutoTransform</code> should work for me.</p>\n\n<p>But with the following code it appears to give broken results even if I set texture filters to <code>NEAREST</code> instead of default <code>LINEAR</code>. With <code>LINEAR</code> the result is simply blurry, but with <code>NEAREST</code> it sometimes lacks some texel lines.</p>\n\n<pre><code>#include &lt;osg/Node&gt;\n#include &lt;osgViewer/Viewer&gt;\n#include &lt;osg/Texture2D&gt;\n#include &lt;osg/Geode&gt;\n#include &lt;osg/AutoTransform&gt;\n\nosg::ref_ptr&lt;osg::Node&gt; createFixedSizeTexture(osg::Image *image,int W,int H)\n{\n    osg::Vec3Array&amp; verts = *new osg::Vec3Array(4);\n    verts[0] = osg::Vec3(-W/2., -H/2., 0);\n    verts[1] = osg::Vec3(+W/2., -H/2., 0);\n    verts[2] = osg::Vec3(+W/2., +H/2., 0);\n    verts[3] = osg::Vec3(-W/2., +H/2., 0);\n\n    osg::Vec2Array&amp; texcoords = *new osg::Vec2Array(4);\n    texcoords[0].set(0,0);\n    texcoords[1].set(1,0);\n    texcoords[2].set(1,1);\n    texcoords[3].set(0,1);\n\n    osg::Geometry*const geometry = new osg::Geometry;\n    geometry-&gt;setVertexArray( &amp;verts );\n    geometry-&gt;setTexCoordArray(0, &amp;texcoords);\n    geometry-&gt;addPrimitiveSet( new osg::DrawArrays(GL_QUADS, 0, 4));\n\n    osg::Texture2D*const texture = new osg::Texture2D( image );\n    texture-&gt;setResizeNonPowerOfTwoHint(false);\n\n    geometry-&gt;getOrCreateStateSet()-&gt;setTextureAttributeAndModes(0, texture, osg::StateAttribute::ON);\n\n    osg::Geode*const geode = new osg::Geode;\n    geode-&gt;addDrawable( geometry );\n\n    return geode;\n}\n\nint main()\n{\n    static constexpr int W=21, H=15;\n    unsigned bits[W*H];\n    for(int x=0;x&lt;W;++x)\n        for(int y=0;y&lt;H;++y)\n            bits[x+W*y] = (x&amp;y&amp;1)*0xffffffff;\n\n    osg::Image *formImage = new osg::Image;\n    formImage-&gt;setImage(W, H, 1, GL_RGBA, GL_RGBA, GL_UNSIGNED_BYTE,\n                        reinterpret_cast&lt;unsigned char*&gt;(bits), osg::Image::NO_DELETE);\n\n    osg::AutoTransform *at = new osg::AutoTransform;\n    at-&gt;setAutoScaleToScreen(true);\n    at-&gt;setAutoRotateMode( osg::AutoTransform::ROTATE_TO_SCREEN );\n    at-&gt;addChild(createFixedSizeTexture(formImage,W,H));\n\n    osgViewer::Viewer viewer;\n    viewer.setUpViewInWindow(0, 0, 800, 600);\n    viewer.setSceneData(at);\n\n    return viewer.run();\n}\n</code></pre>\n\n<p>This is due to non-integer screen coordinates of the final object. So to fix this I'll have to align the object to pixel grid. How can I achieve this?</p>\n"}, {"tags": ["c++", "constructor", "constants"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1466631122, "post_id": 37978538, "comment_id": 63403170, "body": "<code>B</code> is not a constant sub-class. <code>A</code> is a composite object of <code>B</code>"}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 1, "creation_date": 1466631488, "post_id": 37978538, "comment_id": 63403338, "body": "Prefer <code>A(const B&amp; subb = B(&quot;mmmmm&quot;))</code>. <code>A(const B subb = B(...))</code> is a pretty bad idea because you cannot <code>move</code> a <code>const</code> object... Or better still <a href=\"http://stackoverflow.com/questions/7592630/is-pass-by-value-a-reasonable-default-in-c11\">pass-by-value</a> <code>A(B subb = B(&quot;mmmmm&quot;))</code>"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 3456980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5b93420b1c0658de3f5ef4b37facee7c?s=128&d=identicon&r=PG&f=1", "display_name": "algolejos", "link": "https://stackoverflow.com/users/3456980/algolejos"}, "edited": false, "score": 0, "creation_date": 1466654726, "post_id": 37978600, "comment_id": 63409402, "body": "Thank you for your answer. You cleared me a lot of things. Now, what can you suggest if I NEED only one B object to be constructed?"}, {"owner": {"reputation": 129, "user_id": 3456980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5b93420b1c0658de3f5ef4b37facee7c?s=128&d=identicon&r=PG&f=1", "display_name": "algolejos", "link": "https://stackoverflow.com/users/3456980/algolejos"}, "edited": false, "score": 0, "creation_date": 1466657226, "post_id": 37978600, "comment_id": 63410144, "body": "I changed the A class. Now &#39;bclass&#39; is &#39;const B* bclass;&#39; and changed the &#39;A&#39; constructor to &#39;A(B* subb = new B(&quot;mmmmm&quot;)): bclass(subb){&#39; and it works great!"}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 1, "last_activity_date": 1466631859, "last_edit_date": 1495540989, "creation_date": 1466631026, "answer_id": 37978600, "question_id": 37978538, "link": "https://stackoverflow.com/questions/37978538/initialize-a-const-class-member-with-a-default-value/37978600#37978600", "title": "Initialize a const class member with a default value", "body": "<blockquote>\n  <p>The thing is that I'm constructing 2 B classes(?) when only one is\n  needed! And somehow, B constructor is called only once, while the\n  destructor is called twice... What is going on?!</p>\n</blockquote>\n\n<p>There is no magic going on. The compiler generated implicit copy and move constructors.\nTo get the true picture, implement yours</p>\n\n<hr>\n\n<pre><code>class A{\npublic:\n  A(const B subb = B(\"mmmmm\")): bclass(subb){\n    cout &lt;&lt; \"A constructor.\" &lt;&lt; endl;\n  }\n\n  ~A(){\n    cout &lt;&lt; \"A destructor.\" &lt;&lt; endl;\n  }\n\nprivate:\n  const B bclass;\n};\n</code></pre>\n\n<p>In your constructor, <code>B</code> is created using your single argument constructor, then assigned to <code>subb</code>, it is then copied to <code>bclass</code>... So there were actually 3 instances of <code>B</code> created.</p>\n\n<ul>\n<li>The first is your User-defined constructor, <em>which is why you see your output</em></li>\n<li>The second is a move constructor used to construct <code>subb</code> <em>- compiler generated default</em></li>\n<li>The third is a copy constructor used to construct <code>bclass</code> <em>- compiler generated default</em></li>\n</ul>\n\n<p>You may have seen 2 because, the compiler <a href=\"https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization\">elided a call</a></p>\n"}], "owner": {"reputation": 129, "user_id": 3456980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5b93420b1c0658de3f5ef4b37facee7c?s=128&d=identicon&r=PG&f=1", "display_name": "algolejos", "link": "https://stackoverflow.com/users/3456980/algolejos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 37978600, "answer_count": 1, "score": 1, "last_activity_date": 1466699337, "creation_date": 1466630748, "last_edit_date": 1495535644, "question_id": 37978538, "link": "https://stackoverflow.com/questions/37978538/initialize-a-const-class-member-with-a-default-value", "title": "Initialize a const class member with a default value", "body": "<p>I have two classes <code>A</code> and <code>B</code>. <code>bclass</code> of type <code>B</code> is a constant member of class <code>A</code>; what I want to do is to initialize class <code>bclass</code> with default values if no <code>B</code> object is provided to <code>A</code>.\nSomething like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;unistd.h&gt;\n\nusing namespace std;\n\nclass B{\npublic:\n  B(string Bs): Bstring(Bs){\n    cout &lt;&lt; \"B constructor: \" &lt;&lt; Bstring &lt;&lt; endl;\n  }\n\n  ~B(){\n    cout &lt;&lt; \"B destructor: \" &lt;&lt; Bstring &lt;&lt; endl;\n  }\n\nprivate:\n  const string Bstring;\n};\n\nclass A{\npublic:\n  A(const B subb = B(\"mmmmm\")): bclass(subb){\n    cout &lt;&lt; \"A constructor.\" &lt;&lt; endl;\n  }\n\n  ~A(){\n    cout &lt;&lt; \"A destructor.\" &lt;&lt; endl;\n  }\n\nprivate:\n  const B bclass;\n};\n\nint main(void){\n    A a;\n    cout &lt;&lt; \"doing work...\" &lt;&lt; endl;\n    sleep(2);\n    return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>B constructor: mmmmm\nA constructor.\nB destructor: mmmmm\ndoing work...\nA destructor.\nB destructor: mmmmm\n</code></pre>\n\n<p>The thing is that I'm constructing 2 B classes(?) when only one is needed!\nAnd somehow, B constructor is called only once, while the destructor is called twice... What is going on?!</p>\n\n<p><strong>EDIT 1:</strong></p>\n\n<p>After reading the (great) response of @WhiZTiM, I added the next two updates...</p>\n\n<p>The next code explains when the second constructor is called:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;unistd.h&gt;\n\nusing namespace std;\n\nclass B{\npublic:\n  B(string Bs): Bstring(Bs){\n    cout &lt;&lt; \"B constructor: \" &lt;&lt; Bstring &lt;&lt; endl;\n  }\n  B(const B&amp; bobj): Bstring(bobj.Bstring + \"(copy)\"){\n    cout &lt;&lt; \"B copy constructor: \" &lt;&lt; Bstring &lt;&lt; endl;\n  }\n\n  ~B(){\n    cout &lt;&lt; \"B destructor: \" &lt;&lt; Bstring &lt;&lt; endl;\n  }\n\nprivate:\n  const string Bstring;\n};\n\nclass A{\npublic:\n  A(const B&amp; subb = B(\"mmmmm\")): bobj(subb){\n    cout &lt;&lt; \"A constructor.\" &lt;&lt; endl;\n  }\n\n  ~A(){\n    cout &lt;&lt; \"A destructor.\" &lt;&lt; endl;\n  }\n\nprivate:\n  const B bobj;\n};\n\nint main(void){\n  A a;\n  cout &lt;&lt; \"doing work...\" &lt;&lt; endl;\n  sleep(2);\n  return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>B constructor: mmmmm\nB copy constructor: mmmmm(copy)\nA constructor.\nB destructor: mmmmm\ndoing work...\nA destructor.\nB destructor: mmmmm(copy)\n</code></pre>\n\n<p>As @WhiZTiM pointed to me, the compiler elided a third call to the B constructor (Thanks!).</p>\n\n<p><strong>EDIT 2:</strong>\nAs I want only 1 B object, the best idea is to use pointers. The code must be:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;unistd.h&gt;\n\nusing namespace std;\n\nclass B{\npublic:\n  B(const string Bs): Bstring(Bs){\n    cout &lt;&lt; \"B constructor: \" &lt;&lt; Bstring &lt;&lt; endl;\n  }\n  B(const B&amp; bobj): Bstring(bobj.Bstring){\n    cout &lt;&lt; \"copying an existing B object.\" &lt;&lt; endl;\n  }\n\n  ~B(){\n    cout &lt;&lt; \"B destructor: \" &lt;&lt; Bstring &lt;&lt; endl;\n  }\n\nprivate:\n  const string Bstring;\n};\n\nclass A{\npublic:\n  A(B* subb = new B(\"mmmmm\")): objb(subb){\n    cout &lt;&lt; \"A constructor.\" &lt;&lt; endl;\n  }\n\n  ~A(){\n    cout &lt;&lt; \"A destructor.\" &lt;&lt; endl;\n    delete objb;\n  }\n\nprivate:\n  const B* const objb;\n};\n\nint main(void){\n  A a1; // This will call the default B constructor.\n  A a2(new B(\"ooooo\"));// This is calling a non default B object constructor.\n  cout &lt;&lt; \"doing work...\" &lt;&lt; endl;\n  sleep(2); //I need more motivation...\n  return 0;\n}\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code>B constructor: mmmmm\nA constructor.\nB constructor: ooooo\nA constructor.\ndoing work...\nA destructor.\nB destructor: ooooo\nA destructor.\nB destructor: mmmmm\n</code></pre>\n\n<p>Thanks a lot to <a href=\"https://stackoverflow.com/users/1621391/whiztim\">@WhiZTiM</a></p>\n"}, {"tags": ["python", "c++", "r", "numpy"], "comments": [{"owner": {"reputation": 7445, "user_id": 1174378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8e5416e29987d91116420dc387e7153?s=128&d=identicon&r=PG", "display_name": "Mihai Todor", "link": "https://stackoverflow.com/users/1174378/mihai-todor"}, "edited": false, "score": 0, "creation_date": 1467281389, "post_id": 37978519, "comment_id": 63672080, "body": "I have no experience with Cython, but it looks like you need to figure out how to pass pointers (<code>double *</code>) to your C function (<code>Ckmeans_1d_dp</code>). For example, <code>cdef double y = np.repeat(1, N)</code>, doesn&#39;t look like a pointer to me. Also <code>np.ndarray[np.double_t, ndim=1] x</code> might need to be adjusted..."}, {"owner": {"reputation": 605, "user_id": 1451579, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7ab106f4a479d95bd63adebe7d58c9dd?s=128&d=identicon&r=PG", "display_name": "Brans", "link": "https://stackoverflow.com/users/1451579/brans"}, "edited": false, "score": 0, "creation_date": 1482419655, "post_id": 37978519, "comment_id": 69774334, "body": "@ssdecontrol Was you able to do this?"}], "owner": {"reputation": 8493, "user_id": 2954547, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a859521339cfc1d7bc8a3d3da7031cab?s=128&d=identicon&r=PG&f=1", "display_name": "shadowtalker", "link": "https://stackoverflow.com/users/2954547/shadowtalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1466630698, "creation_date": 1466630698, "question_id": 37978519, "link": "https://stackoverflow.com/questions/37978519/how-to-translate-an-r-wrapper-around-a-c-function-to-python-numpy", "title": "How to translate an R wrapper around a C++ function to Python/Numpy", "body": "<p>The R package <a href=\"https://cran.r-project.org/web/packages/Ckmeans.1d.dp\" rel=\"nofollow\">Ckmeans.1d.dp</a> relies on <a href=\"https://github.com/cran/Ckmeans.1d.dp/blob/master/src/Ckmeans.1d.dp_main.cpp\" rel=\"nofollow\">C++ code</a> to do 99% of its work.</p>\n\n<p>I want to use this functionality in Python without having to rely on RPy2. Therefore I want to \"translate\" the R wrapper to an analogous Python wrapper that operates on Numpy arrays the way the R code operates on R vectors. Is this possible? It seems like it should be, since the C++ code itself looks (to my untrained eye) like it stands up on its own.</p>\n\n<p>However, the documentation for Cython doesn't really cover this use case, of wrapping a existing C++ with Python. It's briefly mentioned <a href=\"http://docs.cython.org/src/userguide/external_C_code.html\" rel=\"nofollow\">here</a> and <a href=\"http://docs.cython.org/src/userguide/language_basics.html\" rel=\"nofollow\">here</a>, but I'm in way over my head since I've never worked with C++ before.</p>\n\n<p>Here's my attempt, which fails with a slew of \"<code>Cannot assign type 'double' to 'double *'</code> errors:</p>\n\n<h3>Directory structure</h3>\n\n<pre><code>.\n\u251c\u2500\u2500 Ckmeans.1d.dp  # clone of https://github.com/cran/Ckmeans.1d.dp\n\u251c\u2500\u2500 ckmeans\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 _ckmeans.pyx\n\u251c\u2500\u2500 setup.py\n\u2514\u2500\u2500 src\n \u00a0\u00a0 \u2514\u2500\u2500 Ckmeans.1d.dp_pymain.cpp\n</code></pre>\n\n<h3>src/Ckmeans.1d.dp_pymain.cpp</h3>\n\n<pre><code>#include \"../Ckmeans.1d.dp/src/Ckmeans.1d.dp.h\"\nstatic void Ckmeans_1d_dp(double *x, int* length, double *y, int * ylength,\n                          int* minK, int *maxK, int* cluster,\n                          double* centers, double* withinss, int* size)\n{\n    // Call C++ version one-dimensional clustering algorithm*/\n    if(*ylength != *length) { y = 0; }\n\n    kmeans_1d_dp(x, (size_t)*length, y, (size_t)(*minK), (size_t)(*maxK),\n                    cluster, centers, withinss, size);\n\n    // Change the cluster numbering from 0-based to 1-based\n    for(size_t i=0; i&lt; *length; ++i) {\n        cluster[i] ++;\n    }\n}\n</code></pre>\n\n<h3>ckmeans/<strong>init</strong>.py</h3>\n\n<pre><code>from ._ckmeans import ckmeans\n</code></pre>\n\n<h3>ckmeans/_ckmeans.pyx</h3>\n\n<pre><code>cimport numpy as np\nimport numpy as np\nfrom .ckmeans import ClusterResult\n\ncdef extern from \"../src/Ckmeans.1d.dp_pymain.cpp\":\n    void Ckmeans_1d_dp(double *x, int* length,\n                       double *y, int * ylength,\n                       int* minK, int *maxK,\n                       int* cluster, double* centers, double* withinss, int* size)\n\ndef ckmeans(np.ndarray[np.double_t, ndim=1] x, int* min_k, int* max_k):\n    cdef int n_x = len(x)\n    cdef double y = np.repeat(1, N)\n    cdef int n_y = len(y)\n    cdef double cluster\n    cdef double centers\n    cdef double within_ss\n    cdef int sizes\n    Ckmeans_1d_dp(x, n_x, y, n_y, min_k, max_k, cluster, centers, within_ss, sizes)\n    return (np.array(cluster), np.array(centers), np.array(within_ss), np.array(sizes))\n</code></pre>\n"}, {"tags": ["c++", "clang", "llvm", "libtooling"], "answers": [{"tags": [], "owner": {"reputation": 677, "user_id": 5789228, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/21e834737a6be97fe5804d33e9e1efa8?s=128&d=identicon&r=PG&f=1", "display_name": "Hemant", "link": "https://stackoverflow.com/users/5789228/hemant"}, "is_accepted": false, "score": 1, "last_activity_date": 1488178966, "creation_date": 1488178966, "answer_id": 42479622, "question_id": 37978446, "link": "https://stackoverflow.com/questions/37978446/keep-my-clang-based-tool-from-analyzing-header-files-in-source-code/42479622#42479622", "title": "Keep my Clang Based tool from analyzing header files in source code?", "body": "<p>What you are doing is the way to skip the system header files. \nBut if you want to skip all the included headers then you can specify your include directory with <code>--isystem=&lt;custom include dirs&gt;</code> instead of just plain <code>-I &lt;custom include dirs&gt;</code> command line option. With that change, all the custom include headers will be considered as system headers and will be skipped.</p>\n"}], "owner": {"reputation": 1, "user_id": 4877931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66075906e0c39db5033d7b905dde13d?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4877931/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488178966, "creation_date": 1466630413, "last_edit_date": 1466631440, "question_id": 37978446, "link": "https://stackoverflow.com/questions/37978446/keep-my-clang-based-tool-from-analyzing-header-files-in-source-code", "title": "Keep my Clang Based tool from analyzing header files in source code?", "body": "<p>I'm writing a stand alone tool based on LibTooling with a RecursiveASTVistor, and I don't want to have to go through the contents of header files stored in source code. Do I need to change the compilation database? I've been using this little hack to keep my tool from crashing, but I don't want my tool to analyze any header files at all included in the source code I'm dealing with. </p>\n\n<pre><code>bool VisitDecl(Decl *D) {\n\n    FullSourceLoc FullLocation = Context-&gt;getFullLoc(D-&gt;getLocStart());\n    const auto &amp;SourceManager = Context-&gt;getSourceManager();\n\n    if (FullLocation.isValid() &amp;&amp; !SourceManager.isInSystemHeader(FullLocation) &amp;&amp; Context-&gt;getSourceManager().isInMainFile(D-&gt;getLocation()))\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "recursion", "vector", "permute"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 3, "creation_date": 1466630490, "post_id": 37978445, "comment_id": 63402885, "body": "<a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1466630509, "post_id": 37978445, "comment_id": 63402890, "body": "What did you observe stepping through your code with the debugger?"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 1, "creation_date": 1466631005, "post_id": 37978445, "comment_id": 63403119, "body": "<code>auto vectors = permute(n-1);</code> looks super suss."}, {"owner": {"reputation": 1703, "user_id": 6315982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b89e76a110d9368e3282db2729f65cf6?s=128&d=identicon&r=PG&f=1", "display_name": "P. Kouvarakis", "link": "https://stackoverflow.com/users/6315982/p-kouvarakis"}, "edited": false, "score": 0, "creation_date": 1466631255, "post_id": 37978445, "comment_id": 63403227, "body": "What is the purpose of <code>vector&lt;int&gt; v {1,2,3};</code> in main()?"}, {"owner": {"reputation": 1703, "user_id": 6315982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b89e76a110d9368e3282db2729f65cf6?s=128&d=identicon&r=PG&f=1", "display_name": "P. Kouvarakis", "link": "https://stackoverflow.com/users/6315982/p-kouvarakis"}, "edited": false, "score": 0, "creation_date": 1466631395, "post_id": 37978445, "comment_id": 63403299, "body": "You mention that permute() takes a vector of ints, but in your code permute() only takes a single int parameter."}], "answers": [{"comments": [{"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1466697450, "post_id": 37978636, "comment_id": 63436693, "body": "it segfaults because of accessing the items out of bounds. At least in the release mode. For the debug mode an  out of bounds access with operator[] would result in an exception thrown"}], "tags": [], "owner": {"reputation": 1703, "user_id": 6315982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b89e76a110d9368e3282db2729f65cf6?s=128&d=identicon&r=PG&f=1", "display_name": "P. Kouvarakis", "link": "https://stackoverflow.com/users/6315982/p-kouvarakis"}, "is_accepted": false, "score": 3, "last_activity_date": 1466631197, "creation_date": 1466631197, "answer_id": 37978636, "question_id": 37978445, "link": "https://stackoverflow.com/questions/37978445/c-permutation-function/37978636#37978636", "title": "C++ - Permutation Function", "body": "<p>permute() is endlessly recursive: it will always call permute(n-1). Eventually that would cause stack overflow - not sure why you get a segmentation fault (perhaps there are other issues with the code). </p>\n\n<p>Also:</p>\n\n<pre><code>for (j=0;vectors.size();j++) {\n</code></pre>\n\n<p>will never exit. You probably meant:</p>\n\n<pre><code>for (j=0;j&lt;vectors.size();j++) {\n</code></pre>\n\n<p>Note the &lt; vs &lt;=. If j=vectors.size(), vectors[j] is accessing items out of bounds.</p>\n"}], "owner": {"reputation": 137, "user_id": 6021196, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d3e98570c86e38e7e17828e97d27dd31?s=128&d=identicon&r=PG&f=1", "display_name": "Bobbis", "link": "https://stackoverflow.com/users/6021196/bobbis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466645243, "creation_date": 1466630408, "last_edit_date": 1466645243, "question_id": 37978445, "link": "https://stackoverflow.com/questions/37978445/c-permutation-function", "title": "C++ - Permutation Function", "body": "<p>I'm writing a permute function that creates a vector of ints from the n parameter and interleaves them, using recursion. I am getting a segmentation fault, but am having much trouble trying to get it to work. Here is my code:</p>\n\n<pre><code>void print(const vector&lt;int&gt;&amp; v) \n{\n    for (auto it = v.begin(); it != v.end(); ++it) \n    {\n        cout &lt;&lt; *it &lt;&lt; ' ';\n    }\n\n    cout &lt;&lt; endl;\n}\n\nvector&lt;vector&lt;int&gt; &gt; interleave(int x, const vector&lt;int&gt;&amp; v) \n{\n    size_t i;\n    vector&lt;vector&lt;int&gt; &gt; results;\n\n    for (i=0;i&lt;=v.size();i++) \n    {\n        vector&lt;int&gt; temp(v); \n\n        temp.insert(temp.begin()+i, x);\n        results.push_back(temp);\n    }\n\n    return results;\n}\n\nvector&lt;vector&lt;int&gt; &gt; permute(size_t n) \n{\n    size_t i, j;\n    vector&lt;vector&lt;int&gt; &gt; v;\n    auto vectors = permute(n-1);\n    vector&lt;vector&lt;int&gt; &gt; results;\n    for (j=0;vectors.size();j++) \n    {\n        for (i=1;i&lt;=n-1;i++) \n        {\n            vectors[j].push_back(i);\n        }\n    }\n\n    for (j=0;j&lt;=vectors.size();j++) \n    {\n        for (i=1;i&lt;=n-1;i++) \n        {\n            vector&lt;vector&lt;int&gt; &gt; temp = interleave(i,vectors[j]);\n            results.insert(results.end(), temp.begin(), temp.end());\n        }\n    }\n\n    return results;\n}\n\nint main(void) \n{\n    size_t i;\n    vector&lt;vector&lt;int&gt; &gt; results = permute(3);\n    for (i=0;i&lt;results.size();i++) \n    {\n        print(results[i]);      \n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-date-time"], "answers": [{"comments": [{"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1466688650, "post_id": 37984687, "comment_id": 63429821, "body": "Thanks; I do find the objects to be rather confusing, so this helps."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1466666183, "creation_date": 1466666183, "answer_id": 37984687, "question_id": 37978422, "link": "https://stackoverflow.com/questions/37978422/boostgregoriandate-with-time/37984687#37984687", "title": "boost::gregorian::date with time?", "body": "<p>No, this object cannot handle that (because then <code>boost::gregorian::date</code> wouldn't be a ... <code>date</code>).</p>\n\n<p>If you need a datetime, use <code>boost::posix_time::ptime</code> (which is a tuple of <code>gregorian::date, time_duration</code>).</p>\n\n<p>If you <em>also</em> need a timezone look at <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/date_time/local_time.html#date_time.local_time.local_date_time\" rel=\"nofollow\"><code>boost::local_time::local_date_time</code></a> or Boost Locale's <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/locale/doc/html/classboost_1_1locale_1_1date__time.html\" rel=\"nofollow\">date_time</a></p>\n"}], "owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 607, "favorite_count": 0, "accepted_answer_id": 37984687, "answer_count": 1, "score": 3, "last_activity_date": 1466666183, "creation_date": 1466630342, "question_id": 37978422, "link": "https://stackoverflow.com/questions/37978422/boostgregoriandate-with-time", "title": "boost::gregorian::date with time?", "body": "<p>So far it looks like <code>boost::gregorian::date</code> only has day/month/year. I need to also store hour/minute/second. Can this object handle both? I'm having difficulty understanding how to represent all of this data.</p>\n"}, {"tags": ["c++", "reference", "initialization", "undefined-behavior"], "comments": [{"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 2, "creation_date": 1466629643, "post_id": 37978161, "comment_id": 63402510, "body": "This is legitimate code and safe as long as you initialize <code>x</code> later with some value, rather than consuming the uninitialized variable for some purpose. Better thing would be <code>int&amp; x = *new int()</code> which initializes it to Zero value as well. And ofcourse youhave to delete the allocated memory."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 4, "creation_date": 1466629740, "post_id": 37978161, "comment_id": 63402551, "body": "I don&#39;t think it&#39;s any different from <code>int y; int&amp; x = y;</code>, which is what happens by the way when you do <code>int y; std::cin &gt;&gt; y;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1466630143, "post_id": 37978254, "comment_id": 63402720, "body": "@BenjaminLindley Revised the language to say &quot;create a <i>risk</i> of a memory leak&quot;. And the reason I&#39;m calling it a memory leak in the first place is because on its own, the code itself doesn&#39;t contain a user-visible pointer to the memory."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 6, "last_activity_date": 1466630372, "last_edit_date": 1466630372, "creation_date": 1466629648, "answer_id": 37978254, "question_id": 37978161, "link": "https://stackoverflow.com/questions/37978161/does-binding-a-reference-actually-evaluate-the-operand/37978254#37978254", "title": "Does binding a reference actually evaluate the operand?", "body": "<p>As far as I can tell, none of what you've done involves undefined behavior.</p>\n\n<p>It does, however, immediately create a risk of a memory leak. It can be quickly resolved (since <code>&amp;x</code> would resolve to the address of the leaked memory, and can therefore be deleted) but if you were to leave scope, you would have no way of retrieving that pointer.</p>\n\n<p>Edit: to the point, if you were to write</p>\n\n<pre><code>int&amp; x=*new int;\nx = 5;\n\nstd::cout &lt;&lt; x &lt;&lt; std::endl;\n\nstd::cin &gt;&gt; x;\n\nstd::cout &lt;&lt; x &lt;&lt; std::endl;\n</code></pre>\n\n<p>The code would behave as though you had simply declared x as <code>int x;</code>, except that the pointer would also be left dangling after the program exited scope.</p>\n\n<p>You would achieve undefined behavior if you were to attempt to read the uninitialized variable before assigning it a value, but that wouldn't be untrue if <code>x</code> were stack allocated.</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1466630478, "post_id": 37978379, "comment_id": 63402881, "body": "I don&#39;t get this.  Of course you can&#39;t use a pointer after it had been deleted.  The only risk for the OP&#39;s is if the memory is not handled properly it could leak."}, {"owner": {"reputation": 894, "user_id": 310560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c084731bc5d9b0cf96604b7275174f83?s=128&d=identicon&r=PG", "display_name": "Assimilater", "link": "https://stackoverflow.com/users/310560/assimilater"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1466630751, "post_id": 37978379, "comment_id": 63402993, "body": "The main purpose was to demonstrate the address isn&#39;t de-allocated after <code>x</code> falls out of scope in <code>test()</code>. You later could delete <code>x</code> if you manage stuff correctly, but it&#39;s not intuitive. I&#39;ll consider how to re-word once I&#39;m off work"}, {"owner": {"reputation": 894, "user_id": 310560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c084731bc5d9b0cf96604b7275174f83?s=128&d=identicon&r=PG", "display_name": "Assimilater", "link": "https://stackoverflow.com/users/310560/assimilater"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1466634351, "post_id": 37978379, "comment_id": 63404356, "body": "Hopefully the wording is slightly better now"}], "tags": [], "owner": {"reputation": 894, "user_id": 310560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c084731bc5d9b0cf96604b7275174f83?s=128&d=identicon&r=PG", "display_name": "Assimilater", "link": "https://stackoverflow.com/users/310560/assimilater"}, "is_accepted": false, "score": 0, "last_activity_date": 1466634135, "last_edit_date": 1466634135, "creation_date": 1466630199, "answer_id": 37978379, "question_id": 37978161, "link": "https://stackoverflow.com/questions/37978161/does-binding-a-reference-actually-evaluate-the-operand/37978379#37978379", "title": "Does binding a reference actually evaluate the operand?", "body": "<p>I would not advise doing this. Aliasing dynamic memory with a variable that looks static seems dangerous to me. Consider the following code</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint* dynamicAlloc() {\n    int&amp; x = *new int;\n    std::cout &lt;&lt; \"Inside dynamicAlloc: \" &lt;&lt; x &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Modified: \" &lt;&lt; (x = 1) &lt;&lt; std::endl;\n    return &amp;x;\n}\n\nint main() {\n    int *dall = dynamicAlloc();;\n\n    std::cout &lt;&lt; \"dall (address): \" &lt;&lt; dall &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"dall -&gt; \" &lt;&lt; *dall &lt;&lt; std::endl; // Memory not cleaned\n\n    delete dall; // Don't forget to delete\n\n    return 0;\n}\n</code></pre>\n\n<p>I get output like this:</p>\n\n<pre><code>Inside dynamicAlloc: -842150451\nModified: 1\ndall (address): 00F642A0\ndall -&gt; 1\n</code></pre>\n\n<p>Note how dereferencing <code>dall</code> doesn't result in a segfault. It wasn't deallocated when x fell out of scope. Otherwise a segfault would have likely occurred.</p>\n\n<p><strong>In conclusion:</strong></p>\n\n<p><code>int&amp; x</code> makes x an alias for the dynamically allocated memory. You can legitimately modify that memory, but it will not cleanup as it falls out of scope automatically easily leading to potential memory leaks.</p>\n"}], "owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 37978254, "answer_count": 2, "score": 9, "last_activity_date": 1466634135, "creation_date": 1466629215, "question_id": 37978161, "link": "https://stackoverflow.com/questions/37978161/does-binding-a-reference-actually-evaluate-the-operand", "title": "Does binding a reference actually evaluate the operand?", "body": "<p>Consider this code:</p>\n\n<pre><code>int&amp; x=*new int;\n</code></pre>\n\n<p>Does RHS of the assignment actually dereference the newly-created pointer, leading to UB due to reading uninitialized variable? Or can this be legitimately used to later assign a value like <code>x=5;</code>?</p>\n"}, {"tags": ["c++", "opengl", "sdl-2"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1466629756, "post_id": 37978149, "comment_id": 63402560, "body": "Where&#39;s the attempt using <code>SDL_GetDisplayMode()</code> that gives you the cast errors?"}, {"owner": {"reputation": 85, "user_id": 5365988, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-AnB4IvPmwQ4/AAAAAAAAAAI/AAAAAAAAFkw/Wg4Cqzvegvw/photo.jpg?sz=128", "display_name": "Cora", "link": "https://stackoverflow.com/users/5365988/cora"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1466630263, "post_id": 37978149, "comment_id": 63402781, "body": "I&#39;m trying to find that code through the history but it doesn&#39;t seem to be there now (I think I removed it out of frustration..). Essentially, I had called SDL_GetDisplayMode() instead of SDL_ListModes, and instead of SDL_GetVideoInfo I called a SDL2 function for that. But I remember there was some sort of SDL_Rect casting issue that I was running into while trying to get it working... :/"}, {"owner": {"reputation": 1564, "user_id": 3432000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oaEr6.jpg?s=128&g=1", "display_name": "j-p", "link": "https://stackoverflow.com/users/3432000/j-p"}, "edited": false, "score": 0, "creation_date": 1466642904, "post_id": 37978149, "comment_id": 63406599, "body": "SDL2 is realy good for having a GL context on any platform, exept for transparency, so try harder..."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10148113, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cSNcex_4qCg/AAAAAAAAAAI/AAAAAAAAAGM/V-FbjCVERqM/photo.jpg?sz=128", "display_name": "Flukier Jupiter", "link": "https://stackoverflow.com/users/10148113/flukier-jupiter"}, "is_accepted": false, "score": 1, "last_activity_date": 1532800612, "last_edit_date": 1532800612, "creation_date": 1532775984, "answer_id": 51570763, "question_id": 37978149, "link": "https://stackoverflow.com/questions/37978149/sdl1-sdl2-resolution-list-building-with-a-custom-screen-mode-class/51570763#51570763", "title": "SDL1 -&gt; SDL2 resolution list building with a custom screen mode class", "body": "<p>Use a combination of SDL_GetNumDisplayModes and SDL_GetDisplayMode, then push these back into a vector of SDL_DisplayMode.</p>\n\n<pre><code>std::vector&lt;SDL_DisplayMode&gt; mResolutions;\n\nint display_count = SDL_GetNumVideoDisplays();\n\nSDL_Log(\"Number of displays: %i\", display_count);\n\nfor (int display_index = 0; display_index &lt;= display_count; display_index++)\n{\n    SDL_Log(\"Display %i:\", display_index);\n\n    int modes_count = SDL_GetNumDisplayModes(display_index);\n\n    for (int mode_index = 0; mode_index &lt;= modes_count; mode_index++)\n    {\n        SDL_DisplayMode mode = { SDL_PIXELFORMAT_UNKNOWN, 0, 0, 0, 0 };\n\n        if (SDL_GetDisplayMode(display_index, mode_index, &amp;mode) == 0)\n        {\n            SDL_Log(\" %i bpp\\t%i x %i @ %iHz\",\n                SDL_BITSPERPIXEL(mode.format), mode.w, mode.h, mode.refresh_rate);\n\n            mResolutions.push_back(mode);\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 5365988, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-AnB4IvPmwQ4/AAAAAAAAAAI/AAAAAAAAFkw/Wg4Cqzvegvw/photo.jpg?sz=128", "display_name": "Cora", "link": "https://stackoverflow.com/users/5365988/cora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 604, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532800612, "creation_date": 1466629193, "question_id": 37978149, "link": "https://stackoverflow.com/questions/37978149/sdl1-sdl2-resolution-list-building-with-a-custom-screen-mode-class", "title": "SDL1 -&gt; SDL2 resolution list building with a custom screen mode class", "body": "<p>My engine was recently converted to run with SDL2 for input, and video. However, I am having a hard time getting the resolution mode list building working correctly. I did study the Migration Guide for SDL2, as well as heavily research links -- I am not sure how to go about it, several failed attempts later.</p>\n\n<p>So, for starters, I have a file, called <a href=\"https://github.com/3dfxdev/hyper3DGE/blob/master/src/i_video.cc\" rel=\"nofollow\">i_video.cc</a>, that handles SDL2 video code. 99% of the engine runs in OpenGL, so SDL is only there to initialize the window and set any variables.</p>\n\n<p>So, here was the old way of grabbing resolution into our screen mode class. For reference, the screen mode class is defined in <a href=\"https://github.com/3dfxdev/hyper3DGE/blob/master/src/r_modes.cc\" rel=\"nofollow\">r_modes.cc</a>.</p>\n\n<p>With that said, here is the old SDL1-based code that builds the screen mode list, that I cannot, for the LIFE of me, get running under SDL2. This code starts at line 190 in i_video.cc. For reference, the old code: </p>\n\n<pre><code>// -DS- 2005/06/27 Detect SDL Resolutions\n    const SDL_VideoInfo *info = SDL_GetVideoInfo();\n    SDL_Rect **modes = SDL_ListModes(info-&gt;vfmt,\n        SDL_OPENGL | SDL_DOUBLEBUF | SDL_FULLSCREEN);\n    if (modes &amp;&amp; modes != (SDL_Rect **)-1)\n    {\n        for (; *modes; modes++)\n        {\n            scrmode_c test_mode;\n            test_mode.width = (*modes)-&gt;w;\n            test_mode.height = (*modes)-&gt;h;\n            test_mode.depth = info-&gt;vfmt-&gt;BitsPerPixel;  // HMMMM ???\n            test_mode.full = true;\n            if ((test_mode.width &amp; 15) != 0)\n                continue;\n            if (test_mode.depth == 15 || test_mode.depth == 16 ||\n                test_mode.depth == 24 || test_mode.depth == 32)\n            {\n                R_AddResolution(&amp;test_mode);\n            }\n        }\n    }\n    // -ACB- 2000/03/16 Test for possible windowed resolutions\n    for (int full = 0; full &lt;= 1; full++)\n    {\n        for (int depth = 16; depth &lt;= 32; depth = depth + 16)\n        {\n            for (int i = 0; possible_modes[i].w != -1; i++)\n            {\n                scrmode_c mode;\n                mode.width = possible_modes[i].w;\n                mode.height = possible_modes[i].h;\n                mode.depth = depth;\n                mode.full = full;\n                int got_depth = SDL_VideoModeOK(mode.width, mode.height,\n                    mode.depth, SDL_OPENGL | SDL_DOUBLEBUF |\n                    (mode.full ? SDL_FULLSCREEN : 0));\n                if (R_DepthIsEquivalent(got_depth, mode.depth))\n                {\n                    R_AddResolution(&amp;mode);\n                }\n            }\n        }\n    }\n</code></pre>\n\n<p>It is commented out, and you can see the SDL2 code above it that sets SDL_CreateWindow. The video is just fine in-game, but without resolution building, we cannot get screen-resolution changes without passing command-line arguments first before the program loads. I wish they left SOME kind of compatibility layer, because it seems SDL2 has a slight learning curve over the way I've always handled this under SDL1.</p>\n\n<p>I know that ListModes and VideoInfo no longer exist, and I've tried replacing them with equivalent SDL2 functions, such as GetDisplayModes, but the code just doesn't work correctly. I am not sure how I'm supposed to do this, or if r_modes.cc just needs to be completely refactored, but all I need it to do is grab a list of video modes to populate my scrmode_c class (in r_modes.cc). </p>\n\n<p>When I try to replace everything with SDL2, I get an invalid cast from SDL_Rect* to SDL_Rect**, so maybe I am just doing this all wrong. Several months I've spent trying to get it working, and it just doesn't want to. I don't care much about setting bits-per-pixel, as modern machines can just default to 24 now and we don't need any reason to set it to 16 or 8 anymore (nowadays, everyone has an OpenGL card that can go above 16-bit BPP) ;)</p>\n\n<p>Any advice, help...anything at this point would be greatly appreciated =)</p>\n\n<p>Thank you! \n-Coraline</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1466629145, "post_id": 37978099, "comment_id": 63402286, "body": "Where did you implement <code>const string&amp; Err ();</code>??"}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1466629188, "post_id": 37978099, "comment_id": 63402309, "body": "where&#39;s the body of <code>Exception::Err</code>?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466629202, "post_id": 37978099, "comment_id": 63402317, "body": "FYI, there is a an object <code>std::exception</code> already existing.  This is one case where you may not want to have <code>using namespace std;</code>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1466629248, "post_id": 37978099, "comment_id": 63402337, "body": "Good thing the OP named the class <code>Exception</code> instead of <code>exception</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466629316, "post_id": 37978099, "comment_id": 63402372, "body": "Your <code>main</code> function lies.  You declared it to return <code>int</code> but there is no <code>return</code> statement."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466629558, "post_id": 37978099, "comment_id": 63402471, "body": "You should really read up on <a href=\"http://en.cppreference.com/w/cpp/error/exception\" rel=\"nofollow noreferrer\"><code>std::exception</code></a> and the <a href=\"http://en.cppreference.com/w/cpp/error/exception/what\" rel=\"nofollow noreferrer\"><code>what()</code> method</a>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466629623, "post_id": 37978099, "comment_id": 63402505, "body": "@ThomasMatthews It&#39;s a well known fact that the <code>return</code> statement can be omitted from <code>main()</code> and conforms to the c++ standard."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466629784, "post_id": 37978099, "comment_id": 63402574, "body": "@ThomasMatthews <i>&quot;You should really read up ...&quot;</i> Without seeing <code>throw</code>, <code>try</code> or <code>catch</code>, I can&#39;t see how that would be relevant."}, {"owner": {"reputation": 734, "user_id": 6176919, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dbf2bb3daee58f0ee7d27914d54469cf?s=128&d=identicon&r=PG&f=1", "display_name": "Scarass", "link": "https://stackoverflow.com/users/6176919/scarass"}, "edited": false, "score": 0, "creation_date": 1466630937, "post_id": 37978099, "comment_id": 63403086, "body": "Now I see what&#39;s the problem, I&#39;m sorry for asking such a stupid question. But I really did spent half an hour looking at the code trying to figure out what&#39;s wrong."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466629237, "post_id": 37978140, "comment_id": 63402334, "body": "We actually don&#39;t need to answer these basic questions over and over again."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466629387, "post_id": 37978140, "comment_id": 63402401, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Yes, they should be answered so people can increase their reputation points. :-)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466629463, "post_id": 37978140, "comment_id": 63402428, "body": "@ThomasMatthews Sure this action will increase rep actually?"}, {"owner": {"reputation": 734, "user_id": 6176919, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dbf2bb3daee58f0ee7d27914d54469cf?s=128&d=identicon&r=PG&f=1", "display_name": "Scarass", "link": "https://stackoverflow.com/users/6176919/scarass"}, "edited": false, "score": 0, "creation_date": 1466630945, "post_id": 37978140, "comment_id": 63403089, "body": "Now I see what&#39;s the problem, I&#39;m sorry for asking such a stupid question. But I really did spent half an hour looking at the code trying to figure out what&#39;s wrong."}], "tags": [], "owner": {"reputation": 194, "user_id": 5758838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JqJa9.gif?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5758838/ryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1466629155, "creation_date": 1466629155, "answer_id": 37978140, "question_id": 37978099, "link": "https://stackoverflow.com/questions/37978099/unresolved-external-symbol-in-a-class-function/37978140#37978140", "title": "Unresolved external symbol in a class function", "body": "<p>The error means you didn't define one of your member functions. In this case, you don't have a function body for  <code>const string&amp; Err ();</code></p>\n"}], "owner": {"reputation": 734, "user_id": 6176919, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dbf2bb3daee58f0ee7d27914d54469cf?s=128&d=identicon&r=PG&f=1", "display_name": "Scarass", "link": "https://stackoverflow.com/users/6176919/scarass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "closed_date": 1466629160, "answer_count": 1, "score": -2, "last_activity_date": 1466635393, "creation_date": 1466628988, "last_edit_date": 1466635393, "question_id": 37978099, "link": "https://stackoverflow.com/questions/37978099/unresolved-external-symbol-in-a-class-function", "closed_reason": "Duplicate", "title": "Unresolved external symbol in a class function", "body": "<p>can anyone tell me what is the problem with the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nclass Exception\n{\n    string err;\npublic:\n    Exception (string _err) : err(_err) {}\n    const string&amp; Err ();\n};\n\nint main()\n{\n    Exception exc(\"error\");\n    cout &lt;&lt; exc.Err() &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I get unresolved external symbol error on call to the function Exception::Err.</p>\n\n<p>EDIT: Now I see what's the problem, I'm sorry for asking such a stupid question. But I really did spent half an hour looking at the code trying to figure out what's wrong.\nMight aswell delete the question to save me from bad reputation. :D  And you guys from a bad read. ;)</p>\n"}, {"tags": ["c++", "gdb"], "comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1466718462, "post_id": 37978017, "comment_id": 63448935, "body": "Can you easily explain why you don&#39;t simply start your session with the &#39;easier to use&#39; gdb?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1466718554, "post_id": 37978017, "comment_id": 63448984, "body": "To get this GDB session, did you use attach?  (See debugging aleady running process.)"}, {"owner": {"reputation": 7769, "user_id": 271599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/de267f213b375efca5da07890e5efc25?s=128&d=identicon&r=PG", "display_name": "dromodel", "link": "https://stackoverflow.com/users/271599/dromodel"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1466720839, "post_id": 37978017, "comment_id": 63449825, "body": "The GDB session is spawned by the program under debug."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1466721211, "post_id": 37978017, "comment_id": 63449972, "body": "Did you consider renaming the &#39;easier-to-use&#39; gdb such that the spawned session will launch it instead of current contents of &quot;/usr/local/bin/gdb&quot;?  It need not be a permanent change, just a small script to launch your app then restore the usual gdb.  (Not sure I can recommend this, but I have seen it done.)"}], "answers": [{"comments": [{"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 0, "creation_date": 1466714941, "post_id": 37980744, "comment_id": 63447194, "body": "If the OP could rebuild his program, he could easily start debugging it with the &quot;right&quot; GDB. The problem likely is that the state of the already-running process is important to preserve."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "reply_to_user": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 0, "creation_date": 1466718221, "post_id": 37980744, "comment_id": 63448849, "body": "@EmployedRussian   Agreed. My imagination fails me.  I did not ask if this was his &#39;real&#39; question. I assumed there was a reason he was starting with the &#39;less convenient gdb&#39;.  It does suggests to me that maybe his real question is more &#39;how can I do the same thing in this &#39;more convenient&#39; gdb.  I thought ddd can do anything gdb can?  Generally, I run gdb inside of emacs, and only occasionally do I have to handle things such as: task output is meant for gnome-terminal (or terminator) and does not work on emacs input/output redirect."}, {"owner": {"reputation": 7769, "user_id": 271599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/de267f213b375efca5da07890e5efc25?s=128&d=identicon&r=PG", "display_name": "dromodel", "link": "https://stackoverflow.com/users/271599/dromodel"}, "edited": false, "score": 0, "creation_date": 1466721138, "post_id": 37980744, "comment_id": 63449944, "body": "The program under debug spawns the GDB session and there is no main() to loop in, as the program debugged is a fork of the main process so I would have to add it there. I&#39;ve tried this and it should work in principle, it was just hard to specify under which conditions to run the loop.  I&#39;d rather modify the existing program as little as possible."}], "tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 0, "last_activity_date": 1466644647, "creation_date": 1466644647, "answer_id": 37980744, "question_id": 37978017, "link": "https://stackoverflow.com/questions/37978017/is-it-possible-to-transfer-control-of-a-program-between-gdb-sessions/37980744#37980744", "title": "Is it possible to transfer control of a program between GDB sessions?", "body": "<blockquote>\n  <p>Is it possible to detach the process without it continuing to run so\n  that I can attach it in the other GDB session?</p>\n</blockquote>\n\n<p>I like your question, but let me suggest an alternate approach that I find easy to use.  </p>\n\n<p>A simple function (such as the following) can hold any thread as long as it takes to attach your debugger.  Also, you can set the parkFlag using -D options to make and conditional compilation and default the settings to your liking.</p>\n\n<pre><code>bool parkFlag = true;\nvoid park()\n{\n   while(parkFlag)     // pause thread for some time\n      std::this_thread::sleep_for (std::chrono::milliseconds(100));\n}\n</code></pre>\n\n<p>Thus, for your 'more convenient' debug session,  invoke park just after main.</p>\n\n<p>Now start up the 'more convenient' debugger, attach, set some breakpoints, then clear the parkFlag.  </p>\n"}, {"comments": [{"owner": {"reputation": 7769, "user_id": 271599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/de267f213b375efca5da07890e5efc25?s=128&d=identicon&r=PG", "display_name": "dromodel", "link": "https://stackoverflow.com/users/271599/dromodel"}, "edited": false, "score": 0, "creation_date": 1466721209, "post_id": 38001573, "comment_id": 63449970, "body": "So you don&#39;t think it&#39;s possible?"}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "reply_to_user": {"reputation": 7769, "user_id": 271599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/de267f213b375efca5da07890e5efc25?s=128&d=identicon&r=PG", "display_name": "dromodel", "link": "https://stackoverflow.com/users/271599/dromodel"}, "edited": false, "score": 0, "creation_date": 1466748119, "post_id": 38001573, "comment_id": 63456501, "body": "I think it <i>may</i> work with <code>kill -9 $gdb</code>, but I wouldn&#39;t bet on it."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 0, "last_activity_date": 1466714868, "creation_date": 1466714868, "answer_id": 38001573, "question_id": 37978017, "link": "https://stackoverflow.com/questions/37978017/is-it-possible-to-transfer-control-of-a-program-between-gdb-sessions/38001573#38001573", "title": "Is it possible to transfer control of a program between GDB sessions?", "body": "<blockquote>\n  <p>Is it possible to detach the process without it continuing to run so that I can attach it in the other GDB session?</p>\n</blockquote>\n\n<p>You could do <code>(gdb) signal SIGSTOP</code> to stop the current process, but GDB will automatically resume the process on <code>detach</code> command.</p>\n\n<p>What may work is not <code>detach</code>ing the process, but killing the GDB itself with <code>kill -9</code>. Even then, the kernel may decide to resume the process anyway when it is no longer being <code>ptrace</code>d.</p>\n"}, {"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 0, "last_activity_date": 1466905792, "last_edit_date": 1466905792, "creation_date": 1466905334, "answer_id": 38034515, "question_id": 37978017, "link": "https://stackoverflow.com/questions/37978017/is-it-possible-to-transfer-control-of-a-program-between-gdb-sessions/38034515#38034515", "title": "Is it possible to transfer control of a program between GDB sessions?", "body": "<blockquote>\n  <p>The GDB session is spawned by the program under debug</p>\n</blockquote>\n\n<p>I do not know enough about how your program spawns the gdb session.\nBut you might experiment with creating an alias (line 6) prior to your test run. </p>\n\n<pre><code> 1 dmn@C5:~$ which gdb\n 2 /usr/local/bin/gdb\n 3 dmn@C5:~$ which ddd\n 4 /usr/bin/ddd\n 5 dmn@C5:~$ \n 6 dmn@C5:~$ alias gdb='ddd'\n 7 dmn@C5:~$ \n 8 dmn@C5:~$ which gdb\n 9 /usr/local/bin/gdb\n10 dmn@C5:~$ which ddd\n11 /usr/bin/ddd\n12 dmn@C5:~$ \n13 dmn@C5:~$ gdb\n14 dmn@C5:~$ ---command to start your program---\n</code></pre>\n\n<p>On my ubuntu system, line 13 invokes the alias.  </p>\n\n<hr>\n\n<p>From my embedded systems background, we could grep through the executable binary file, and any string we found (such as 'gdb') we could hex edit to something else (maybe 'ddd').  </p>\n\n<p>Not recommending it as there are more proper 'patch' approaches ... but you are just trying out the idea 'can an alias 'redirect' a spawn'.</p>\n\n<p>Perhaps this is idea is 'how do you patch an existing executable?' (i.e. without rebuilding it.</p>\n"}], "owner": {"reputation": 7769, "user_id": 271599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/de267f213b375efca5da07890e5efc25?s=128&d=identicon&r=PG", "display_name": "dromodel", "link": "https://stackoverflow.com/users/271599/dromodel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 321, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1466905792, "creation_date": 1466628608, "question_id": 37978017, "link": "https://stackoverflow.com/questions/37978017/is-it-possible-to-transfer-control-of-a-program-between-gdb-sessions", "title": "Is it possible to transfer control of a program between GDB sessions?", "body": "<p>I've got a GDB session with a c++ program process loaded. I'd like to transfer it to another GDB session on the same machine with a different interface for easier debugging. Is it possible to detach the process without it continuing to run so that I can attach it in the other GDB session?</p>\n"}, {"tags": ["c++", "cmake", "gcov"], "answers": [{"comments": [{"owner": {"reputation": 934, "user_id": 3663124, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dd2b3438ed3252dce5c184b4eace56ba?s=128&d=identicon&r=PG&f=1", "display_name": "fedest", "link": "https://stackoverflow.com/users/3663124/fedest"}, "edited": false, "score": 0, "creation_date": 1466637750, "post_id": 37979624, "comment_id": 63405321, "body": "Well, you are right, it does work. I must have tested it somewhere else then. Do you know of a way to geta general report of the files not having to run it file by file? AND, how to avoid the report of stl files, like &quot;stl_map.h&quot; and from the header files of my project?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 934, "user_id": 3663124, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dd2b3438ed3252dce5c184b4eace56ba?s=128&d=identicon&r=PG&f=1", "display_name": "fedest", "link": "https://stackoverflow.com/users/3663124/fedest"}, "edited": false, "score": 0, "creation_date": 1466667964, "post_id": 37979624, "comment_id": 63415248, "body": "<code>Do you know of a way to get a general report of the files ...</code> - probably, you want <i>lcov</i> utility. Also, you may call <code>gcov *.gcno</code>, so it will collect all data files in directory at once. <code>how to avoid the report of stl files, like &quot;stl_map.h&quot; and from the header files of my project?</code> - I don&#39;t know easy way for doing this. (Complex way is to parse intermediate format of <i>gcov</i> output and drop everything related to headers). You may ask another question about this on Stack Overflow."}, {"owner": {"reputation": 934, "user_id": 3663124, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dd2b3438ed3252dce5c184b4eace56ba?s=128&d=identicon&r=PG&f=1", "display_name": "fedest", "link": "https://stackoverflow.com/users/3663124/fedest"}, "edited": false, "score": 0, "creation_date": 1466729638, "post_id": 37979624, "comment_id": 63452046, "body": "Thank, I ended up using lcov for the whole generation, though it still gets the coverage of .h files, I&#39;ll make another post asking that soon."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1545266781, "post_id": 37979624, "comment_id": 94570167, "body": "&quot;This is because CMake creates .cpp.o object file from .cpp source&quot; It&#39;d be nice to have an explanation of how to disable that."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1545290593, "post_id": 37979624, "comment_id": 94575604, "body": "I know why they remains source extension for the object files (for differentiate object files created from sources on different languages), but I don&#39;t know how to disable this. You may create new question on Stack Overflow about that."}], "tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 6, "last_activity_date": 1466636603, "creation_date": 1466636603, "answer_id": 37979624, "question_id": 37978016, "link": "https://stackoverflow.com/questions/37978016/cmake-gcov-c-creating-wrong-gcno-files/37979624#37979624", "title": "CMake Gcov c++ creating wrong .gcno files", "body": "<blockquote>\n  <p>It is generating the report files in: project_root/build/CMakeFiles/project.dir/</p>\n</blockquote>\n\n<p>This is directory where all additional files are built for 'project' executable.</p>\n\n<blockquote>\n  <p>BUT the files it generates have extentions '.cpp.gcno', '.cpp.gcda' and '.cpp.o'</p>\n</blockquote>\n\n<p>This is because CMake creates <code>.cpp.o</code> object file from <code>.cpp</code> source (you may see that running make <code>VERBOSE=1</code>. In accordance to <code>-fprofile-arcs</code> <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Instrumentation-Options.html#Instrumentation-Options\" rel=\"noreferrer\">option's description</a>, data file has suffix <code>.cpp.gcno</code>.</p>\n\n<blockquote>\n  <p>Also, they are not in the same folder as the src files</p>\n</blockquote>\n\n<p>Data files are created in the same directory with object file.</p>\n\n<hr>\n\n<p>Actually, created files are still work, if you call</p>\n\n<pre><code>gcov main.cpp.gcno\n</code></pre>\n\n<p>from the directory with <code>.gcno</code> files.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 4569013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5ad24e90e520636784f6e3c9b7644dc?s=128&d=identicon&r=PG", "display_name": "Mathijs", "link": "https://stackoverflow.com/users/4569013/mathijs"}, "is_accepted": false, "score": 4, "last_activity_date": 1595516683, "creation_date": 1595516683, "answer_id": 63057350, "question_id": 37978016, "link": "https://stackoverflow.com/questions/37978016/cmake-gcov-c-creating-wrong-gcno-files/63057350#63057350", "title": "CMake Gcov c++ creating wrong .gcno files", "body": "<p>Apparently the standard CMake behavior to add an extension to give .cpp.o can be changed to replace an extension to give .o by using:</p>\n<pre><code>set(CMAKE_CXX_OUTPUT_EXTENSION_REPLACE ON)\n</code></pre>\n"}], "owner": {"reputation": 934, "user_id": 3663124, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dd2b3438ed3252dce5c184b4eace56ba?s=128&d=identicon&r=PG&f=1", "display_name": "fedest", "link": "https://stackoverflow.com/users/3663124/fedest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10589, "favorite_count": 3, "accepted_answer_id": 37979624, "answer_count": 2, "score": 7, "last_activity_date": 1595516683, "creation_date": 1466628607, "question_id": 37978016, "link": "https://stackoverflow.com/questions/37978016/cmake-gcov-c-creating-wrong-gcno-files", "title": "CMake Gcov c++ creating wrong .gcno files", "body": "<p>I have a CMakeLists.txt file in which I added:</p>\n\n<pre><code>set(CMAKE_CXX_FLAGS \"-fprofile-arcs -ftest-coverage -pthread -std=c++11 -O0 ${CMAKE_CXX_FLAGS}\")\n</code></pre>\n\n<p>It is generating the report files in:</p>\n\n<pre><code>project_root/build/CMakeFiles/project.dir/\n</code></pre>\n\n<p>BUT the files it generates have extentions <code>.cpp.gcno</code>, <code>.cpp.gcda</code> and <code>.cpp.o</code>.</p>\n\n<p>Also, they are not in the same folder as the src files, which are at:</p>\n\n<pre><code>project_root/src/ \n</code></pre>\n\n<p>When I move the report files to the src/ folder and execute</p>\n\n<pre><code>$ gcov main.cpp\nmain.gcno:cannot open notes file\n</code></pre>\n\n<p>But I get that error message. So I change the <code>.cpp.gcno</code>, <code>.cpp.cdna</code> and <code>cpp.o</code> to <code>.gcno</code>, <code>.gcda</code> and <code>.o</code> and finally I get the following:</p>\n\n<pre><code>gcov main.cpp\nLines executed:86.67% of 15\nCreating 'main.cpp.gcov'\n</code></pre>\n\n<p>I have over 50 files and can't do this manually for each one.</p>\n\n<p>I need to be able to run gcov once for all files and generate report for all files. I don't care where the files are generated.</p>\n"}, {"tags": ["c++", "memory-management", "memory-leaks", "linear-programming", "lpsolve"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1466645665, "post_id": 37977953, "comment_id": 63407262, "body": "Without a definition of <code>make_lp</code>no one can help you! I never used lpsolve, but i highly doubt, that there are memory leaks which are observed without some hard-core usage (=low chance of memory leaks)."}], "answers": [{"comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1466690285, "post_id": 37993328, "comment_id": 63431168, "body": "This is a general rule! Every resource allocation function comes with its \u201cpartner\u201d deallocation function. You will see this in <b>all</b> well-designed APIs. In fact, the lack of such an allocation/deallocation pairing would be a serious flaw in the API, even if all the deallocation function does is call <code>free</code>/<code>delete</code> (or even do nothing). This is even true across different languages, although in modern languages the deallocation is often hidden away; for instance, in a proper C++ library you\u2019d use a destructor instead."}], "tags": [], "owner": {"reputation": 93, "user_id": 5061779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd316665c7173b3a335739d6396b64e?s=128&d=identicon&r=PG&f=1", "display_name": "acrane", "link": "https://stackoverflow.com/users/5061779/acrane"}, "is_accepted": false, "score": 1, "last_activity_date": 1466689161, "creation_date": 1466689161, "answer_id": 37993328, "question_id": 37977953, "link": "https://stackoverflow.com/questions/37977953/freeing-lpsolve-memory/37993328#37993328", "title": "Freeing lpsolve memory", "body": "<p>It turns out this was a relatively simple error, caused by not reading docs carefully, but I'll leave this here in case somebody else finds it helpful.</p>\n\n<p>The standard C++ <code>delete</code> will <em>not</em> free memory associated with an lprec. Use lpsolve's <code>delete_lp()</code> <a href=\"http://lpsolve.sourceforge.net/5.5/delete_lp.htm\" rel=\"nofollow\">(1)</a> or <code>free_lp()</code> <a href=\"http://lpsolve.sourceforge.net/5.5/free_lp.htm\" rel=\"nofollow\">(2)</a> instead.</p>\n"}], "owner": {"reputation": 93, "user_id": 5061779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd316665c7173b3a335739d6396b64e?s=128&d=identicon&r=PG&f=1", "display_name": "acrane", "link": "https://stackoverflow.com/users/5061779/acrane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466689279, "creation_date": 1466628347, "last_edit_date": 1466689279, "question_id": 37977953, "link": "https://stackoverflow.com/questions/37977953/freeing-lpsolve-memory", "title": "Freeing lpsolve memory", "body": "<p>I'm working on a C++ project that involves using lpsolve version 5.5 to solve many linear programs. I'm having trouble with memory leaks.</p>\n\n<p>I wrote some test-code:</p>\n\n<pre><code>int main(){\n  for(int i = 0; i &lt; 100; i++){\n    lprec* lp = make_lp(0, 5000);    //0 rows, 5000 columns\n    set_verbose(lp, IMPORTANT);\n    solve(lp);\n    delete(lp);\n  }\n}\n</code></pre>\n\n<p>This code leaks about 80 million bytes, with exactly 100 errors. Is there a known leak within lpsolve, or am I handling cleanup incorrectly?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "templates", "c++11", "operators", "function-object"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 2, "creation_date": 1466628152, "post_id": 37977862, "comment_id": 63401787, "body": "your assumption is that <code>operator&lt;</code> is a member function but it isn&#39;t in the general case and definitely not for <code>int</code>, use <code>std::less</code>"}], "answers": [{"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 1, "last_activity_date": 1466628185, "creation_date": 1466628185, "answer_id": 37977908, "question_id": 37977862, "link": "https://stackoverflow.com/questions/37977862/how-do-i-assign-an-stdfunction-to-an-operator-in-c/37977908#37977908", "title": "How do I assign an std::function to an operator in C++?", "body": "<p>You need to implement Template Specialization for built-in types like <code>int</code>, <code>double</code>, <code>char</code>, etc. It's impossible to query for the relational operators on built-in types, which causes your code to fail.</p>\n"}, {"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 8, "last_activity_date": 1466628271, "creation_date": 1466628271, "answer_id": 37977927, "question_id": 37977862, "link": "https://stackoverflow.com/questions/37977862/how-do-i-assign-an-stdfunction-to-an-operator-in-c/37977927#37977927", "title": "How do I assign an std::function to an operator in C++?", "body": "<p>There is no pre-existing function in C++ that performs comparison on <code>int</code>s. Furthermore, even if <code>Key</code> is a class type, you can't know whether it has a member or non-member <code>operator&lt;</code>.</p>\n\n<p>Here are some alternatives:</p>\n\n<ol>\n<li><p>Use <code>std::less</code>,</p>\n\n<pre><code>this-&gt;lessThan = std::less&lt;Key&gt;();\n</code></pre></li>\n<li><p>Use a lambda:</p>\n\n<pre><code>this-&gt;lessThan = [](const Key&amp; k1, const Key&amp; k2){ return k1 &lt; k2; };\n</code></pre></li>\n<li><p>If you design <code>AVLTree</code> like the standard library containers, the type of the comparison object should be a type template parameter <code>Comp</code> defaulting to <code>std::less&lt;Key&gt;</code>, with an instance passed in the constructor, defaulting to <code>Comp()</code>.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": false, "score": 4, "last_activity_date": 1466628296, "creation_date": 1466628296, "answer_id": 37977936, "question_id": 37977862, "link": "https://stackoverflow.com/questions/37977862/how-do-i-assign-an-stdfunction-to-an-operator-in-c/37977936#37977936", "title": "How do I assign an std::function to an operator in C++?", "body": "<pre><code>template&lt;class Key, class Value&gt;\nAVLTree&lt;Key,Value&gt;::AVLTree()\n{\n    this-&gt;lessThan = std::less&lt;Key&gt;();\n}\n</code></pre>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/utility/functional/less\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/utility/functional/less</a></p>\n"}], "owner": {"reputation": 513, "user_id": 1583259, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/af697537499a60523545b2131353d697?s=128&d=identicon&r=PG", "display_name": "Kenkron", "link": "https://stackoverflow.com/users/1583259/kenkron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 37977927, "answer_count": 3, "score": 2, "last_activity_date": 1466628296, "creation_date": 1466627938, "question_id": 37977862, "link": "https://stackoverflow.com/questions/37977862/how-do-i-assign-an-stdfunction-to-an-operator-in-c", "title": "How do I assign an std::function to an operator in C++?", "body": "<pre><code>template&lt;class Key, class Value&gt;\nAVLTree&lt;Key,Value&gt;::AVLTree(){\n    this-&gt;lessThan = Key::operator&lt;;\n}\n</code></pre>\n\n<p>This code is supposed to make the <code>std::function&lt;bool(Key, Key)&gt; lessThan</code> field equal to the key's &lt; operator by default. However, when I try this with <code>AVLTree&lt;int,int&gt;</code>, I get:</p>\n\n<pre><code>error: \u2018operator&lt;\u2019 is not a member of \u2018int\u2019\n</code></pre>\n\n<p>Am I formatting this wrong, or is this just impossible in C++?</p>\n"}, {"tags": ["c++", "clang", "abstract-syntax-tree", "llvm-clang"], "answers": [{"tags": [], "owner": {"reputation": 317, "user_id": 1572348, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1b65670bbd0a3fc147584653d6b7bada?s=128&d=identicon&r=PG", "display_name": "Andreas Geo", "link": "https://stackoverflow.com/users/1572348/andreas-geo"}, "is_accepted": true, "score": 6, "last_activity_date": 1468237741, "creation_date": 1468237741, "answer_id": 38306194, "question_id": 37977758, "link": "https://stackoverflow.com/questions/37977758/clang-ast-visitor-avoid-traversing-include-files/38306194#38306194", "title": "Clang AST visitor, avoid traversing include files", "body": "<p>By using AST context you can get all the nescecarry information for the code you are parsing. The function which distinguish between AST nodes being in the main file or the header files is called isInMainFile() and can be used as follows.</p>\n\n<pre><code>bool VisitVarDecl(VarDecl *var)\n{\n    if (astContext-&gt;getSourceManager().isInMainFile(var-&gt;getLocStart())) //checks if the node is in the main = input file.\n    {\n        if(var-&gt;hasLocalStorage() || var-&gt;isStaticLocal())\n        {\n            //var-&gt;dump(); //prints the corresponding line of the AST.\n            FullSourceLoc FullLocation = astContext-&gt;getFullLoc(var-&gt;getLocStart());\n            numVariables++;\n            string varName = var-&gt;getQualifiedNameAsString();\n            string varType = var-&gt;getType().getAsString();\n            REPORT &lt;&lt; \"Variable Declaration [\" &lt;&lt; FullLocation.getSpellingLineNumber() &lt;&lt; \",\" &lt;&lt; FullLocation.getSpellingColumnNumber() &lt;&lt; \"]: \" &lt;&lt; varName &lt;&lt; \" of type \" &lt;&lt; varType &lt;&lt; \"\\n\";\n            APIs &lt;&lt; varType &lt;&lt; \",\";\n        }\n    }\n    return true;\n}\n</code></pre>\n\n<p>For more information on how to use astContext follow the official recursive ASTvisitor tutorial in clang website.</p>\n"}], "owner": {"reputation": 317, "user_id": 1572348, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1b65670bbd0a3fc147584653d6b7bada?s=128&d=identicon&r=PG", "display_name": "Andreas Geo", "link": "https://stackoverflow.com/users/1572348/andreas-geo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1395, "favorite_count": 2, "accepted_answer_id": 38306194, "answer_count": 1, "score": 5, "last_activity_date": 1468237741, "creation_date": 1466627533, "last_edit_date": 1466631105, "question_id": 37977758, "link": "https://stackoverflow.com/questions/37977758/clang-ast-visitor-avoid-traversing-include-files", "title": "Clang AST visitor, avoid traversing include files", "body": "<p>Hello I am trying to implement an AST Clang visitor and this is my code.</p>\n\n<pre><code>class ExampleVisitor : public RecursiveASTVisitor&lt;ExampleVisitor&gt; {\nprivate:\n    ASTContext *astContext; // used for getting additional AST info\n\npublic:\n    virtual bool VisitVarDecl(VarDecl *var) \n    {\n        numVariables++;\n        string varName = var-&gt;getQualifiedNameAsString();\n        string varType = var-&gt;getType().getAsString();\n        cout &lt;&lt; \"Found variable declaration: \" &lt;&lt; varName &lt;&lt; \" of type \" &lt;&lt; varType &lt;&lt; \"\\n\";\n        APIs &lt;&lt; varType &lt;&lt; \", \";\n        return true;\n    }\n\n    virtual bool VisitFunctionDecl(FunctionDecl *func)\n    {\n        numFunctions++;\n        string funcName = func-&gt;getNameInfo().getName().getAsString();\n        string funcType = func-&gt;getResultType().getAsString();\n        cout &lt;&lt; \"Found function declaration: \" &lt;&lt; funcName &lt;&lt; \" of type \" &lt;&lt; funcType &lt;&lt; \"\\n\";\n        APIs &lt;&lt; \"\\n\\n\" &lt;&lt; funcName &lt;&lt;\": \";\n        APIs &lt;&lt; funcType &lt;&lt; \", \";\n        return true;\n    }\n\n    virtual bool VisitStmt(Stmt *st) \n    {\n        if (CallExpr *call = dyn_cast&lt;CallExpr&gt;(st)) \n        {\n            numFuncCalls++;\n            FunctionDecl *func_decl = call-&gt;getDirectCallee();\n            string funcCall = func_decl-&gt;getNameInfo().getName().getAsString();\n            cout &lt;&lt; \"Found function call: \" &lt;&lt; funcCall &lt;&lt; \" with arguments \";\n            APIs &lt;&lt; funcCall &lt;&lt; \", \";\n            for(int i=0, j = call-&gt;getNumArgs(); i&lt;j; i++)\n            {\n                string TypeS;\n                raw_string_ostream s(TypeS);\n                call-&gt;getArg(i)-&gt;printPretty(s, 0, Policy);\n                cout&lt;&lt; s.str() &lt;&lt; \", \";\n                APIs&lt;&lt; s.str() &lt;&lt; \", \";\n           }\n            cout &lt;&lt; \"\\n\";\n        }\n        return true;\n    }\n};\n</code></pre>\n\n<p>How can I avoid traversing the included header files, but without loosing their information. I just dont want to print any information about this files but I want clang to know about these files</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 1, "creation_date": 1466627595, "post_id": 37977744, "comment_id": 63401560, "body": "The indentation isn&#39;t too clear but it looks like you are trying to define <code>Helper::ToString</code> outside the scope of the namespace <code>Helper</code>. Or, in other words, <code>Helper::ToString</code> is declared but not defined."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1466628514, "last_edit_date": 1466628514, "creation_date": 1466627728, "answer_id": 37977812, "question_id": 37977744, "link": "https://stackoverflow.com/questions/37977744/undefined-reference-to-stdstring-helpertostringintint-const/37977812#37977812", "title": "undefined reference to &#39;std::string Helper::ToString&lt;int&gt;(int const&amp;)&#39;", "body": "<p>Bind the implementation to your namespace:</p>\n\n<pre><code>template &lt;class T&gt;\nstd::string Helper::ToString(const T &amp;e)\n         // ^^^^^^^^\n{\n    std::ostringstream s;\n    s &lt;&lt; e;\n    return s.str();\n}\n</code></pre>\n\n<p>or place it inline:</p>\n\n<pre><code>namespace Helper\n{\n    template &lt;class T&gt;\n    std::string ToString(const T &amp;e) {\n         std::ostringstream s;\n         s &lt;&lt; e;\n         return s.str();\n    }\n    // ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "is_accepted": false, "score": 0, "last_activity_date": 1466627826, "creation_date": 1466627826, "answer_id": 37977840, "question_id": 37977744, "link": "https://stackoverflow.com/questions/37977744/undefined-reference-to-stdstring-helpertostringintint-const/37977840#37977840", "title": "undefined reference to &#39;std::string Helper::ToString&lt;int&gt;(int const&amp;)&#39;", "body": "<p>You have declared the method <code>Helper::ToString</code> in the namespace <code>Helper</code> but not defined it anywhere. The definition of the <code>ToString</code> method in <code>Helper.h</code> outside of the namespace knows nothing about the declaration inside the namespace.</p>\n\n<p>Either bind the implementation as the other answer suggests, or define this method inside the <code>Helper</code> namespace itself where you have declared it.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 8523897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01af53367b95f83b4382c407c4ab9bfc?s=128&d=identicon&r=PG&f=1", "display_name": "whitebug", "link": "https://stackoverflow.com/users/8523897/whitebug"}, "is_accepted": false, "score": 0, "last_activity_date": 1503848864, "creation_date": 1503848864, "answer_id": 45906730, "question_id": 37977744, "link": "https://stackoverflow.com/questions/37977744/undefined-reference-to-stdstring-helpertostringintint-const/45906730#45906730", "title": "undefined reference to &#39;std::string Helper::ToString&lt;int&gt;(int const&amp;)&#39;", "body": "<p>In header file, you need to put this part</p>\n\n<pre><code>template &lt;class T&gt;\n\nstd::string ToString(const T &amp;e)\n{\n    std::ostringstream s;\ns &lt;&lt; e;\nreturn s.str();\n}\n\nvoid WriteAppLog( const std::string &amp;s)\n{\nstd::ofstream file (\"AppLog.txt\", std::ios::app);\nfile &lt;&lt; \"[\" &lt;&lt; Helper::DateTime().GetDateTimeString() &lt;&lt; \"]\" &lt;&lt;\n\"\\n\" &lt;&lt; s &lt;&lt; std::endl &lt;&lt; \"\\n\";\nfile.close();\n}\n</code></pre>\n\n<p>into the borders of \"namespace Helper\". Currently, it is outside.\nAs well, you need to remove a semi column after \"namespace Helper\"'s ending curly bracket.</p>\n"}], "owner": {"reputation": 1, "user_id": 6501085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7e55d0e4c315c4c2863d4b1decad7a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ulysses Jaure", "link": "https://stackoverflow.com/users/6501085/ulysses-jaure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1035, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1503848864, "creation_date": 1466627466, "last_edit_date": 1466631188, "question_id": 37977744, "link": "https://stackoverflow.com/questions/37977744/undefined-reference-to-stdstring-helpertostringintint-const", "title": "undefined reference to &#39;std::string Helper::ToString&lt;int&gt;(int const&amp;)&#39;", "body": "<p>I get the error:  </p>\n\n<blockquote>\n  <p>undefined reference to 'std::string Helper::ToString&lt;int> \n  (int const&amp;)' in Helper.h on line ToString(y):</p>\n</blockquote>\n\n<p>Helper.h</p>\n\n<pre><code>#ifndef HELPER_H\n#define HELPER_H\n\n#include &lt;ctime&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;fstream&gt;\n\nnamespace Helper\n{\n    template &lt;class T&gt;\n\n    std::string ToString(const T &amp;);\n\n    struct DateTime\n    {\n        DateTime()\n        {\n            time_t ms;\n            time (&amp;ms);\n\n            struct tm *info = localtime(&amp;ms);\n\n            D = info-&gt;tm_mday;\n            m = info-&gt;tm_mon + 1;\n            y = 1900 + info-&gt;tm_year;\n            M = info-&gt;tm_min;\n            H = info-&gt;tm_hour;\n            S = info-&gt;tm_sec;\n        }\n\n        DateTime(int D, int m, int y, int H, int M, int S) : D(D), m(m), y(y), H(H), M(M), S(S) {}\n        DateTime(int D, int m, int y) : D(D), m(m), y(y), H(0), M(0), S(0) {}\n\n\n    DateTime Now() const\n    {\n        return DateTime();\n    }\n\n    int D, m, y, H, M, S;\n\n\n    std::string GetDateString() const\n    {\n        return std::string( D &lt; 10 ? \"0\" : \"\") + ToString(D) +\n               std::string( m &lt; 10 ? \".0\" : \".\") + ToString(m) + \".\" +\n               ToString(y);\n\n    }\n\n    std::string GetTimeString(const std::string &amp;sep = \":\") const\n    {\n        return std::string( H &lt; 10 ? \"0\" : \"\") + ToString(H) + sep +\n               std::string( M &lt; 10 ? \"0\" : \"\") + ToString(M) + sep +\n               std::string( S &lt; 10 ? sep : \"\") + ToString(S);\n    }\n\n    std::string GetDateTimeString( const std::string &amp;sep = \":\") const\n    {\n        return GetDateString() + \" \" + GetTimeString(sep);\n    }\n    };\n};\ntemplate &lt;class T&gt;\n\nstd::string ToString(const T &amp;e)\n{\n    std::ostringstream s;\ns &lt;&lt; e;\nreturn s.str();\n}\n\nvoid WriteAppLog( const std::string &amp;s)\n{\nstd::ofstream file (\"AppLog.txt\", std::ios::app);\nfile &lt;&lt; \"[\" &lt;&lt; Helper::DateTime().GetDateTimeString() &lt;&lt; \"]\" &lt;&lt;\n\"\\n\" &lt;&lt; s &lt;&lt; std::endl &lt;&lt; \"\\n\";\nfile.close();\n}\n\n\n#endif // HELPER_H\n</code></pre>\n\n<p>KeyConstant.h</p>\n\n<pre><code>#ifndef KEYCONSTANT_H\n#define KEYCONSTANT_H\n\n#include &lt;map&gt;\n#include &lt;string&gt;\n\nclass KeyPair\n{\npublic:\n    KeyPair (const std::string &amp;vk = \"\", const std::string &amp;name = \"\") : VKName (vk), Name (name) {}\n\nstd::string VKName;\nstd::string Name;\n};\n\nclass Keys\n{\npublic:\nstatic std::map&lt;int, KeyPair&gt; KEYS;\n\n};\n#endif // KEYCONSTANTS_H\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include \"Helper.h\"\n#include \"KeyConstant.h\"\n#include \"Base64.h\"\n\nusing namespace std;\n\nint main ()\n{\nMSG Msg;\n\nwhile (GetMessage (&amp;Msg, NULL, 0, 0))\n{\n    TranslateMessage(&amp;Msg);\n    DispatchMessage(&amp;Msg);\n}\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "class", "vector"], "comments": [{"owner": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "edited": false, "score": 0, "creation_date": 1466627869, "post_id": 37977739, "comment_id": 63401665, "body": "<b>&quot;Message.h&quot;</b>      #pragma once // do you forget pragma once?     #include &lt;string&gt;     // #include &quot;Message Box.h&quot; // why do you include message box in the message.h file?     ...     /// std::string ID2 = nullptr; // what do you mean?"}, {"owner": {"reputation": 1, "user_id": 6501111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de73ad3c0b83535ef3fcec7467cd041?s=128&d=identicon&r=PG&f=1", "display_name": "NotHereAnymore", "link": "https://stackoverflow.com/users/6501111/nothereanymore"}, "reply_to_user": {"reputation": 4113, "user_id": 2126582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tVrzW.png?s=128&g=1", "display_name": "AnatolyS", "link": "https://stackoverflow.com/users/2126582/anatolys"}, "edited": false, "score": 0, "creation_date": 1466628256, "post_id": 37977739, "comment_id": 63401844, "body": "yeah, i had the pragma once, but i forgot to copy it into this question. the #include &quot;Message Box.h&quot; in &quot;Message.h&quot; was from an old message system idea i had but then i started switching stuff around. std::string ID2 = nullptr is because it may never have a value. I took out the Message Box.h&quot; in &quot;Message.h&quot; and now i&#39;m getting link errors"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1466628558, "post_id": 37977739, "comment_id": 63401995, "body": "More in-depth discussion on what happened here: <a href=\"http://stackoverflow.com/questions/625799/resolve-header-include-circular-dependencies-in-c\">Resolve header include circular dependencies in C++</a>"}, {"owner": {"reputation": 1, "user_id": 6501111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de73ad3c0b83535ef3fcec7467cd041?s=128&d=identicon&r=PG&f=1", "display_name": "NotHereAnymore", "link": "https://stackoverflow.com/users/6501111/nothereanymore"}, "edited": false, "score": 0, "creation_date": 1466628865, "post_id": 37977739, "comment_id": 63402136, "body": "yeah, i hate refactoring code because i always have little bits left here and there. the 2nd part of the answer below got me out of the link errors. thank you all for your help"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1466630634, "post_id": 37977739, "comment_id": 63402946, "body": "You&#39;re compiling with Visual Studio, so be aware that <code>windows.h</code> has the nasty habit of #defining <code>MessageBox</code>. You might suddenly see an error on <code>ATE::MessageBoxW</code>, macro&#39;s do not respect scope."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6501111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de73ad3c0b83535ef3fcec7467cd041?s=128&d=identicon&r=PG&f=1", "display_name": "NotHereAnymore", "link": "https://stackoverflow.com/users/6501111/nothereanymore"}, "edited": false, "score": 0, "creation_date": 1466628522, "post_id": 37977951, "comment_id": 63401973, "body": "Thank you, that works (:   I&#39;m a bit rusty with C++ as you can tell. Haven&#39;t programmed in it for a few months"}], "tags": [], "owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "is_accepted": false, "score": 0, "last_activity_date": 1466628556, "last_edit_date": 1592644375, "creation_date": 1466628346, "answer_id": 37977951, "question_id": 37977739, "link": "https://stackoverflow.com/questions/37977739/compiler-doesnt-like-my-class-c-getting-undeclared-identifier-error-and-more/37977951#37977951", "title": "Compiler doesn&#39;t like my class C++. getting undeclared identifier error and more", "body": "<ol>\n<li><p>In &quot;Message.h&quot;, remove the:</p>\n<p><code>#include &quot;Message Box.h&quot;</code></p>\n</li>\n</ol>\n<p>It add the <code>Message Box</code> declaration before the <code>Message</code>.</p>\n<ol start=\"2\">\n<li><p>In &quot;Message Box.cpp&quot; Add this line after the includes:</p>\n<p><code>std::vector&lt;ATE::Message&gt; ATE::MessageBox::MsgBox;</code></p>\n</li>\n</ol>\n<p>A <code>static</code> member must be declared again outside.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6501111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de73ad3c0b83535ef3fcec7467cd041?s=128&d=identicon&r=PG&f=1", "display_name": "NotHereAnymore", "link": "https://stackoverflow.com/users/6501111/nothereanymore"}, "edited": false, "score": 0, "creation_date": 1466630560, "post_id": 37978143, "comment_id": 63402917, "body": "thank you for the full explanation, i appreciate it. I accidentally left that header in when refactoring code and didn&#39;t notice"}], "tags": [], "owner": {"reputation": 1049, "user_id": 1587418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f71f8acb7a3af01ec2bd418cd2f899?s=128&d=identicon&r=PG", "display_name": "NonNumeric", "link": "https://stackoverflow.com/users/1587418/nonnumeric"}, "is_accepted": false, "score": 1, "last_activity_date": 1466630037, "last_edit_date": 1466630037, "creation_date": 1466629171, "answer_id": 37978143, "question_id": 37977739, "link": "https://stackoverflow.com/questions/37977739/compiler-doesnt-like-my-class-c-getting-undeclared-identifier-error-and-more/37978143#37978143", "title": "Compiler doesn&#39;t like my class C++. getting undeclared identifier error and more", "body": "<p>Your headers include each other. Due to the <code>#pragma once</code> if you include <code>Message.h</code> first in some .cpp file the compiler will see <code>Message Box.h</code>'s content \"inside\" <code>Message.h</code> - exactly at the <code>#include \"Message Box.h\"</code> line. As result the compiler will process your source code in the following order:</p>\n\n<pre><code>source.cpp:\n  //#include \"Message.h\"\nmessage.h:\n  //#pragma once\n  //#include &lt;iostream&gt;\niostream:\n  //iostream's content\nmessage.h(resumed):\n  //#include &lt;string&gt;\nstring:\n  //string's content\nmessage.h(resumed):\n  #include \"Message Box.h\"\nMessage Box.h:\n  #pragma once\n  #include &lt;string&gt;\n  // string's content already included, won't include again\n  #include &lt;vector&gt;\n  // vector's content\n  #include \"Message.h\"\n  // message.h won't include again, due to the #pragma once\n\n  namespace ATE {\n      class MessageBox\n      {\n      public:\n          static std::vector&lt;Message&gt; MsgBox;\n</code></pre>\n\n<p>At this point the name <code>Message</code> is used, but the compiler has not reached it's definition in <code>Message.h</code> yet and gives you an error.</p>\n\n<p>Removing the <code>#pragma once</code> won't help. You need to remove the circular dependency. In this case remove the <code>#include \"Message Box.h\"</code> from <code>Message.h</code> and you'll be fine.</p>\n"}], "owner": {"reputation": 1, "user_id": 6501111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de73ad3c0b83535ef3fcec7467cd041?s=128&d=identicon&r=PG&f=1", "display_name": "NotHereAnymore", "link": "https://stackoverflow.com/users/6501111/nothereanymore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466630037, "creation_date": 1466627457, "last_edit_date": 1466628105, "question_id": 37977739, "link": "https://stackoverflow.com/questions/37977739/compiler-doesnt-like-my-class-c-getting-undeclared-identifier-error-and-more", "title": "Compiler doesn&#39;t like my class C++. getting undeclared identifier error and more", "body": "<p>I created a class called \"Message\". I want to store Messages that are created with the class \"Message\" in a static vector array in a class named \"MessageBox\". The compiler tells me that Message doesn't exist, but the editor is telling me otherwise. Here are the files with the code:</p>\n\n<p>\"Message.h\"</p>\n\n<pre><code>#pragma once\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"Message Box.h\"\n\nnamespace ATE {\n    class Message\n    {\n    public:\n        Message(std::string act, std::string ID, std::string IDtwo) { action = act, ID1 = ID, ID2 = IDtwo; }\n        Message(std::string act, std::string ID) { action = act, ID1 = ID; }\n\n        std::string action;\n        std::string ID1;\n        std::string ID2 = nullptr;\n\n    };\n\n}\n</code></pre>\n\n<p>\"Message Box.h\"</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include \"Message.h\"\n\nnamespace ATE {\n    class MessageBox\n    {\n    public:\n        static std::vector&lt;Message&gt; MsgBox;\n        void addMessage(Message msg);\n\n    };\n}\n</code></pre>\n\n<p>\"Message Box.cpp\"</p>\n\n<pre><code>#include \"Message Box.h\"\n\nvoid ATE::MessageBox::addMessage(Message msg)\n{\n     MsgBox.push_back(msg);\n}\n</code></pre>\n\n<p>My errors:</p>\n\n<p>Error C2065 'Message': undeclared identifier       (file: message box.h,    line: 11)   </p>\n\n<p>Error   C2923   'std::vector': 'Message' is not a valid template type argument for parameter '_Ty'                                (file: message box.h, line:   11) </p>\n\n<p>Error   C2061   syntax error: identifier 'Message'  (file: message box.h, line: 12) </p>\n\n<p>Help is much appreciated (:</p>\n"}, {"tags": ["c++", "file", "go"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1466627749, "post_id": 37977714, "comment_id": 63401615, "body": "If you&#39;re using buffered IO there may be an additional write to flush any remaining data."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1466628075, "post_id": 37977714, "comment_id": 63401749, "body": "And flushing the buffer could result in filling the disk."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 8, "last_activity_date": 1466628391, "last_edit_date": 1466628391, "creation_date": 1466628011, "answer_id": 37977877, "question_id": 37977714, "link": "https://stackoverflow.com/questions/37977714/can-i-get-an-error-when-closing-a-file/37977877#37977877", "title": "Can I get an error when closing a file?", "body": "<p>Yes. Closing a file can cause an error/fail. See for example the errors that <code>close(3)</code> can return -  <a href=\"http://linux.die.net/man/3/close\" rel=\"noreferrer\">http://linux.die.net/man/3/close</a> - stuff like filesystem corruption is one probable cause.</p>\n\n<p>Often you can't really do much about it though other than log an error and know that your data is probably screwed (depending on the error) - you can rarely \"fix it\" except for maybe re-writing the data somewhere else if you still have it etc.</p>\n\n<p>The language you are using (Go, C++, <em>whatever</em>) is irrelevant. If the filesystem is full, corrupt or someone has physically ripped out the harddrive, then your programming language just can't save you and close will fail and it is anybodys guess whether your data are safely stored somewhere or not.</p>\n"}, {"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 4, "last_activity_date": 1591383739, "last_edit_date": 1591383739, "creation_date": 1466628113, "answer_id": 37977893, "question_id": 37977714, "link": "https://stackoverflow.com/questions/37977714/can-i-get-an-error-when-closing-a-file/37977893#37977893", "title": "Can I get an error when closing a file?", "body": "<p>At OS level, things can also go wrong when closing files, especially if you have written to them (i.e. buffering issues, out of disk space, media removed, etc...).  </p>\n\n<p>The C++ <code>fstream</code> has a <a href=\"http://www.cplusplus.com/reference/fstream/ofstream/close/\" rel=\"nofollow noreferrer\"><code>void close()</code></a> function which doesn't return anything. The principle is that once you called close you can no longer use the stream whether there was an error or not.  However when a closing error occurs, the fail bit is set, so that it can be detected, and the error code can be retrieved the usual way.  </p>\n\n<p>The C <a href=\"http://www.cplusplus.com/reference/cstdio/fclose/\" rel=\"nofollow noreferrer\"><code>fclose()</code></a> returns an <code>int</code> which shows if there was an error or not.  If you want to know why it failed you have to get and analyze the <a href=\"http://www.cplusplus.com/reference/cerrno/errno/\" rel=\"nofollow noreferrer\"><code>errno</code></a> error code.  It's not as self-explaining as a void function, but here also, you can't use the FILE* anymore after the closing call, whether there was an error or not.  </p>\n"}], "owner": {"reputation": 105, "user_id": 4201010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/UBzJY.jpg?s=128&g=1", "display_name": "Jean", "link": "https://stackoverflow.com/users/4201010/jean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2663, "favorite_count": 1, "accepted_answer_id": 37977877, "answer_count": 2, "score": 4, "last_activity_date": 1591383739, "creation_date": 1466627396, "question_id": 37977714, "link": "https://stackoverflow.com/questions/37977714/can-i-get-an-error-when-closing-a-file", "title": "Can I get an error when closing a file?", "body": "<p>When programming I often open and close files. I understand that when opening a file, it's important to check for errors to see if it did in fact open. I don't know of an instance though when closing a file would be an issue (except for maybe if opening the file did give an error and it went unchecked).</p>\n\n<p>I'm currently programming in go, and under the <code>os</code> package the <code>.Close()</code> function <em>can</em> return an error if it needs to. I know in C++ this is possible as well.</p>\n\n<p>So finally, my question is what circumstances would cause an error when trying to close a file?</p>\n"}, {"tags": ["c++", "stack"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466627433, "post_id": 37977685, "comment_id": 63401452, "body": "I have no clue what you&#39;re actually asking about?"}, {"owner": {"reputation": 942, "user_id": 5189578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF2bB.jpg?s=128&g=1", "display_name": "Prasheel", "link": "https://stackoverflow.com/users/5189578/prasheel"}, "edited": false, "score": 0, "creation_date": 1466627519, "post_id": 37977685, "comment_id": 63401502, "body": "Can you please clearify your question"}, {"owner": {"reputation": 21, "user_id": 6242203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec196ef6ce50e7caf2cd22fe86c296e9?s=128&d=identicon&r=PG&f=1", "display_name": "weeurey", "link": "https://stackoverflow.com/users/6242203/weeurey"}, "edited": false, "score": 0, "creation_date": 1466627924, "post_id": 37977685, "comment_id": 63401684, "body": "Sorry guys I DID right more on the end but I think it cut off... Basically Im trying to create a stack, push numbers 1-10 onto it, display the stack and then pop it off. Ive got the code for the methods but cant figure out how to define/declare the actual stack that I will be pushing to/popping from"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1466628969, "post_id": 37977685, "comment_id": 63402195, "body": "&quot;Initialise stack ( max size = 10 )&quot; gives me a bad feeling that the stack was supposed to be in an class."}], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1466631913, "creation_date": 1466631913, "answer_id": 37978807, "question_id": 37977685, "link": "https://stackoverflow.com/questions/37977685/main-method-for-this-c-linked-list-push-pop-program/37978807#37978807", "title": "Main method for this C++ Linked list/push/pop program", "body": "<p>There are many, many ways to do this. Probably the simplest approach that allows adaptability to wider usage is to encapsulate the stack in a class.</p>\n\n<pre><code>#include&lt;iostream&gt;\n// discarded the other headers. They are noise in this example.\nusing namespace std; // avoid using this at file scope. It can result in many \n                     // interesting and hard-to-find errors.\n\n//define a stack class\nclass stack\n{\nprivate:\n    // put the rest of your code in the stack class\n    struct node\n    {\n        int data;\n        node* next;\n    };\n\n    node*head;\n    node*tail;\n    // need the following  if the stack is to have and enforce a maximum size\n    int size; // how big is the stack currently?\n    int maxsize; // how big can the stack get?\n\npublic:\n    // add a constructor and a destructor\n    stack(int maxsize):\n        head(NULL), // make sure head is NULL before it's used\n        tail(NULL), // make sure tail is NULL before it's used\n        size(0), // obviously nothing in the stack yet\n        maxsize(maxsize) // store the provided maximum stack size for later\n    {\n        // does nothing. All of the initialization is done in the member initializer list\n    }\n    ~stack()\n    {\n        // delete all of the nodes.\n        // leaving this up to OP, but one way is to add a destructor to node and \n        // allowing node to take care of the heavy lifting \n    }\n    void push(int data)\n    {\n        // add code here to test if size is less than maxsize before adding\n        if (head == NULL)\n        {\n            node* n = new node; \n            n-&gt;data = data;\n            n-&gt;next = NULL;\n            head = n;\n            tail = n;\n\n        }\n        else if (head != NULL)\n        {\n            node* n = new node;\n            n-&gt;data = data;\n            n-&gt;next = head;\n            head = n;\n        }\n        // don't forget to increment size\n    }\n\n    void showdata()\n    {\n        node* temp = new node; // why create a node...\n        temp = head;           // just to leak it by overwriting the pointer?\n        // use node * temp = head; instead.\n        if (temp == NULL)\n        {\n            cout &lt;&lt; \"Empty\" &lt;&lt; endl;\n        }\n        else\n        {\n            cout &lt;&lt; \"element: \" &lt;&lt; endl;\n            while (temp != NULL)\n            {\n                cout &lt;&lt; temp-&gt;data &lt;&lt; endl;\n                temp = temp-&gt;next;\n            }\n        }\n    }\n\n    void pop() // should return the value popped, not void\n    {\n        if (head == NULL)\n        {\n            cout &lt;&lt; \"Empty\" &lt;&lt; endl;\n        }\n        else if (head == tail)\n        {\n            cout &lt;&lt; \"value: \" &lt;&lt; head-&gt;data &lt;&lt; \" was popped\" &lt;&lt; endl;\n            delete head;\n            head = NULL;\n            tail = NULL;\n        }\n        else\n        {\n            node* delptr = new node; \n            delptr = head; \n\n            // same as last time: node* delptr = head;\n            head = head-&gt;next;\n            cout &lt;&lt; \"value: \" &lt;&lt; delptr-&gt;data &lt;&lt; \" was popped\" &lt;&lt; endl;\n            delete delptr;\n        }\n    }\n};\nint main()\n{\n\n    // Initialise stack ( max size = 10 )\n    stack teststack(10); // currently the code has no way to enforce the maximum stack size\n\n    //Write (\u201cTesting Stack\u201d)\n    cout &lt;&lt; \"Testing Stack\" &lt;&lt; endl;\n\n    //showstack()\n    teststack.showdata();\n\n    //for ( counter = 0, counter &lt; MaxSize)\n    // leaving figuring out how to write a correct for loop to OP.\n\n    //   push(counter)\n    teststack.push(1);\n    teststack.push(2);\n\n    //showstack()\n    teststack.showdata();\n\n    //for ( counter = 0, counter &lt; MaxSize)\n    // same as above.\n\n    // write(pop())\n    cout &lt;&lt; teststack.pop() &lt;&lt; endl; // currently not possible. Pop returns void\n    cout &lt;&lt; teststack.pop() &lt;&lt; endl; // currently not possible. Pop returns void\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1696, "user_id": 3762855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/091d4d0c3abe99847befd5ba66dbaa86?s=128&d=identicon&r=PG", "display_name": "Ciro Corvino", "link": "https://stackoverflow.com/users/3762855/ciro-corvino"}, "is_accepted": false, "score": 0, "last_activity_date": 1466670101, "last_edit_date": 1466670101, "creation_date": 1466635032, "answer_id": 37979360, "question_id": 37977685, "link": "https://stackoverflow.com/questions/37977685/main-method-for-this-c-linked-list-push-pop-program/37979360#37979360", "title": "Main method for this C++ Linked list/push/pop program", "body": "<p>I've removed the inclusion of the  header library because this implentation doesn't need of the standard stack class, unless that you have to implement inheritance... </p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;cstdlib&gt;\n#include&lt;iostream&gt;\n#include &lt;queue&gt;\nusing namespace std;\n\nconst int max_size = 10;\n\n\nclass Stack{\n\npublic:\n\n    Stack(int max_size);\n\n    int max_size;\n\n    void Add(int data);\n    int Extract();\n\n    void Show();\n\nprivate:\n\n    struct node {\n        int data;\n        node* next;\n    };\n\n    node*head;\n    node*tail;\n\n    void push(node *&amp; head, node *&amp;tail, int data) {\n        if (head == NULL) {\n            node* n = new node;\n            n-&gt;data = data;\n            n-&gt;next = NULL;\n            head = n;\n            tail = n;\n\n        }\n        else if (head != NULL) {\n            node* n = new node;\n            n-&gt;data = data;\n            n-&gt;next = head;\n            head = n;\n        }\n    }\n\n    void showdata(node *&amp; head) {\n        node* temp = new node;\n        temp = head;\n        if (temp == NULL) {\n            cout &lt;&lt; \"Empty\" &lt;&lt; endl;\n        }\n        else {\n            cout &lt;&lt; \"element: \" &lt;&lt; endl;\n            while (temp != NULL) {\n                cout &lt;&lt; temp-&gt;data &lt;&lt; endl;\n                temp = temp-&gt;next;\n            }\n        }\n    }\n\n    void pop(node *&amp;head, node *&amp; tail) {\n        if (head == NULL) {\n            cout &lt;&lt; \"Empty\" &lt;&lt; endl;\n        }\n        else if (head == tail) {\n            cout &lt;&lt; \"value: \" &lt;&lt; head-&gt;data &lt;&lt; \" was popped\" &lt;&lt; endl;\n            delete head;\n            head = NULL;\n            tail = NULL;\n        }\n        else {\n            node* delptr = new node;\n            delptr = head;\n            head = head-&gt;next;\n            cout &lt;&lt; \"value: \" &lt;&lt; delptr-&gt;data &lt;&lt; \" was popped\" &lt;&lt; endl;\n            delete delptr;\n        }\n\n    }\n};\n\nStack::Stack(int _max_size)\n{\n    max_size = _max_size;\n    head = NULL;\n    tail = NULL;\n}\n\n\n\nvoid Stack::Add(int data)\n{\n    push(head, tail, data);\n}\n\nint Stack::Extract()\n{\n\n    int poppedvalue = head-&gt;data;\n    pop(head, tail);\n\n    return poppedvalue;\n}\n\nvoid Stack::Show()\n{\n    showdata(head);\n}\n\n\n\nint main()\n{\n    //intialize\n    Stack stack(max_size);\n\n    cout &lt;&lt; \"Testing Stack\" &lt;&lt; endl;    \n\n    stack.Show();\n\n    for (int i = 0; i &lt; stack.max_size; i++)\n        stack.Add(i);\n\n    stack.Show();\n\n    for (int i = 0; i &lt; stack.max_size; i++)\n        cout &lt;&lt; stack.Extract() &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6242203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec196ef6ce50e7caf2cd22fe86c296e9?s=128&d=identicon&r=PG&f=1", "display_name": "weeurey", "link": "https://stackoverflow.com/users/6242203/weeurey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1023, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1566656447, "creation_date": 1466627281, "last_edit_date": 1566656447, "question_id": 37977685, "link": "https://stackoverflow.com/questions/37977685/main-method-for-this-c-linked-list-push-pop-program", "title": "Main method for this C++ Linked list/push/pop program", "body": "<p>I'm having trouble devising a main method for this code. Can anyone be of assistance?</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;cstdlib&gt;\n#include&lt;iostream&gt;\n#include &lt;queue&gt;\n#include &lt;stack&gt;\nusing namespace std;\n\n\nint main()\n{\n\nreturn 0;\n}\n\n\n\n\nstruct node {\n        int data;\n        node* next;\n    };\n\n    node*head;\nnode*tail;\n\nvoid push(node *&amp; head, node *&amp;tail, int data) {\n    if (head == NULL) {\n        node* n = new node;\n        n-&gt;data = data;\n        n-&gt;next = NULL;\n        head = n;\n        tail = n;\n\n    }\n    else if (head != NULL) {\n        node* n = new node;\n        n-&gt;data = data;\n        n-&gt;next = head;\n        head = n;\n    }\n}\n\nvoid showdata(node *&amp; head) {\n    node* temp = new node;\n    temp = head;\n    if (temp == NULL) {\n        cout &lt;&lt; \"Empty\" &lt;&lt; endl;\n    }\n    else {\n        cout &lt;&lt; \"element: \" &lt;&lt; endl;\n        while (temp != NULL) {\n            cout &lt;&lt; temp-&gt;data &lt;&lt; endl;\n            temp = temp-&gt;next;\n        }\n    }\n}\n\nvoid pop(node *&amp;head, node *&amp; tail) {\n    if (head == NULL) {\n        cout &lt;&lt; \"Empty\" &lt;&lt; endl;\n    }\n    else if (head == tail) {\n        cout &lt;&lt; \"value: \" &lt;&lt; head-&gt;data &lt;&lt; \" was popped\" &lt;&lt; endl;\n        delete head;\n        head = NULL;\n        tail = NULL;\n    }\n    else {\n        node* delptr = new node;\n        delptr = head;\n        head = head-&gt;next;\n        cout &lt;&lt; \"value: \" &lt;&lt; delptr-&gt;data &lt;&lt; \" was popped\" &lt;&lt; endl;\n        delete delptr;\n    }\n\n\n\n\n}\n</code></pre>\n\n<p>The program output should follow the following scaffold...</p>\n\n<pre><code>Initialise stack ( max size = 10 )\n\nWrite (\u201cTesting Stack\u201d)\n\nshowstack()\n\nfor ( counter = 0, counter &lt; MaxSize)\n\n   push(counter)\n\nshowstack()\n\nfor ( counter = 0, counter &lt; MaxSize)\n\n\n\nwrite(pop())\n</code></pre>\n\n<p>The main thing I'm really having a problem with is how to define/initiate the actual stack. Any help would help alot</p>\n\n<p>Basically Im trying to create a stack, push numbers 1-10 onto it, display the stack and then pop it off. Ive got the code for the methods but cant figure out how to define/declare the actual stack that I will be pushing to/popping from</p>\n"}, {"tags": ["c++", "templates", "template-specialization"], "comments": [{"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1466627271, "post_id": 37977616, "comment_id": 63401364, "body": "Have you tried it?"}, {"owner": {"reputation": 423, "user_id": 2660756, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/uBvKF.jpg?s=128&g=1", "display_name": "Loay", "link": "https://stackoverflow.com/users/2660756/loay"}, "reply_to_user": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1466627376, "post_id": 37977616, "comment_id": 63401419, "body": "@CrazyEddie yes and I&#39;m getting &quot;&#39;template&lt;class T&gt; void Type::setName()&#39; cannot be overloaded&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 2660756, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/uBvKF.jpg?s=128&g=1", "display_name": "Loay", "link": "https://stackoverflow.com/users/2660756/loay"}, "edited": false, "score": 0, "creation_date": 1466627537, "post_id": 37977742, "comment_id": 63401515, "body": "but I want setName to be a function not a struct"}, {"owner": {"reputation": 656, "user_id": 1052689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80cf23b75055dc4831dbd9e5d63e508?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Korous", "link": "https://stackoverflow.com/users/1052689/jan-korous"}, "reply_to_user": {"reputation": 423, "user_id": 2660756, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/uBvKF.jpg?s=128&g=1", "display_name": "Loay", "link": "https://stackoverflow.com/users/2660756/loay"}, "edited": false, "score": 0, "creation_date": 1466627674, "post_id": 37977742, "comment_id": 63401590, "body": "@Loay It is struct containing a static method. See the end of my answer that I just added."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1466627791, "post_id": 37977742, "comment_id": 63401631, "body": "Just make a function that calls this struct&#39;s static method, which will likely be the easiest way to to this.  <code>template &lt;class T&gt; void setName() { name = setNameImpl&lt;T&gt;::exec(); }</code>"}, {"owner": {"reputation": 656, "user_id": 1052689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80cf23b75055dc4831dbd9e5d63e508?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Korous", "link": "https://stackoverflow.com/users/1052689/jan-korous"}, "edited": false, "score": 0, "creation_date": 1466628148, "post_id": 37977742, "comment_id": 63401782, "body": "I edited the answer and added desired wrapper function template."}], "tags": [], "owner": {"reputation": 656, "user_id": 1052689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80cf23b75055dc4831dbd9e5d63e508?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Korous", "link": "https://stackoverflow.com/users/1052689/jan-korous"}, "is_accepted": false, "score": 3, "last_activity_date": 1466628094, "last_edit_date": 1466628094, "creation_date": 1466627462, "answer_id": 37977742, "question_id": 37977616, "link": "https://stackoverflow.com/questions/37977616/template-function-with-no-object-arguments-specialization/37977742#37977742", "title": "template function with no object arguments specialization", "body": "<p>Your idea is correct but partial function template specialization is not allowed in C++. Fortuately partial class template specialization is allowed so you can use static method workaround (see specialization of <code>setName_impl</code> below) and if needed function template wrapper (see <code>setName()</code> below):</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct setName_impl{ \n    static void exec() { }\n};\n\ntemplate&lt;typename T&gt;\nstruct setName_impl&lt;T*&gt;{ \n    static void exec() {\n        setName&lt;T&gt;::exec();\n    }\n};\n\ntemplate&lt;typename T&gt;\nvoid setName() { \n    setName_impl&lt;T&gt;::exec(); \n}\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 2660756, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/uBvKF.jpg?s=128&g=1", "display_name": "Loay", "link": "https://stackoverflow.com/users/2660756/loay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466628094, "creation_date": 1466627088, "question_id": 37977616, "link": "https://stackoverflow.com/questions/37977616/template-function-with-no-object-arguments-specialization", "title": "template function with no object arguments specialization", "body": "<p>I'd like to specialize a template function to take non-pointer types and if in case it gets a pointer I'd like to call it without the *. </p>\n\n<p>I'm wondering if there's a way without using std::remove_pointer.</p>\n\n<p>for example I'd like to do something like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid setName() {\n    name = __PRETTY_FUNCTION__;\n}\n\ntemplate&lt;typename T&gt;\nvoid setName&lt;T*&gt;() {\n    setName&lt;T&gt;();\n}\n</code></pre>\n\n<p><code>name</code> is defined as a private data member.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 4, "creation_date": 1466626941, "post_id": 37977478, "comment_id": 63401204, "body": "When converting money to coins, change to an integer count of the smallest unit (penny)  <code>penny = round(money_as_double * 100);</code>,  <i>then</i> proceed to determine the various coins"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 2, "creation_date": 1466627022, "post_id": 37977478, "comment_id": 63401253, "body": "Whoa dude, too much code! Read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>( <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>)."}, {"owner": {"reputation": 25, "user_id": 6500959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/408a0fd092cd9e44ead2a7aaa83fe08c?s=128&d=identicon&r=PG", "display_name": "Helgard Ferreira", "link": "https://stackoverflow.com/users/6500959/helgard-ferreira"}, "reply_to_user": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 0, "creation_date": 1466796775, "post_id": 37977478, "comment_id": 63483463, "body": "@Paul EvansThanks for the feedback will keep that in mind for future questions."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1466628492, "post_id": 37977716, "comment_id": 63401957, "body": "Using integer for money is OK for learning programs that are limited to <code>+,-,*</code>.  Integers are insufficient for interest, mortgage calculation, tips calculation, mill rates, group prices (3 for a dollar) not to mention no overflow detection.  Advice about a separate class is good."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 3, "last_activity_date": 1466627401, "creation_date": 1466627401, "answer_id": 37977716, "question_id": 37977478, "link": "https://stackoverflow.com/questions/37977478/c-double-to-int-conversion-complication/37977716#37977716", "title": "C++ Double to Int Conversion Complication", "body": "<blockquote>\n  <p>What changes to my code, specifically, would you recommend as to prevent this annoying truncation error?</p>\n</blockquote>\n\n<p>Never, ever, ever, ever, ever*100, ever<sup>1700</sup>, record monetary values with floating point values, in any programming language, for any reason.</p>\n\n<p>If you're working with US Dollars, record them in Integer (preferably 64-bit integer) cents (or tenths of a cent; you'll thank me when your code gets used with gas station prices) and multiply them up to dollar amounts when you need to textually display them. Write a custom <code>Currency</code> class which will perform these conversions automatically, and will keep the internal record of the amount as an integral fixed-point number but which will convert to floating point numbers <em>for display only</em> when needed.</p>\n"}, {"tags": [], "owner": {"reputation": 1819, "user_id": 1419970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5tKR.jpg?s=128&g=1", "display_name": "MoustafaS", "link": "https://stackoverflow.com/users/1419970/moustafas"}, "is_accepted": false, "score": 0, "last_activity_date": 1466628259, "last_edit_date": 1466628259, "creation_date": 1466627907, "answer_id": 37977857, "question_id": 37977478, "link": "https://stackoverflow.com/questions/37977478/c-double-to-int-conversion-complication/37977857#37977857", "title": "C++ Double to Int Conversion Complication", "body": "<p>@xirema is right, \nThe error mainly is in this line</p>\n\n<pre><code>int coins = change - dollars * 100;\n</code></pre>\n\n<p>Although its legit, and change = 69 and dollars = 0, but after it coins will be 68.</p>\n\n<p>Don't do this, and better use int.</p>\n\n<p>IF you want to fix this for now, here is the bad way to do it.</p>\n\n<pre><code>float dcoins = change - (dollars * 100);\n    int coins = dcoins;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 894, "user_id": 310560, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c084731bc5d9b0cf96604b7275174f83?s=128&d=identicon&r=PG", "display_name": "Assimilater", "link": "https://stackoverflow.com/users/310560/assimilater"}, "is_accepted": false, "score": 0, "last_activity_date": 1466628168, "last_edit_date": 1492087236, "creation_date": 1466628168, "answer_id": 37977904, "question_id": 37977478, "link": "https://stackoverflow.com/questions/37977478/c-double-to-int-conversion-complication/37977904#37977904", "title": "C++ Double to Int Conversion Complication", "body": "<p>To add to Xirema's answer, if you need an example of things you might consider when writing a currency class you can use my post on <a href=\"https://codereview.stackexchange.com/questions/85835/storing-currency-precision-values\">code review</a> for reference.</p>\n\n<p>I'd probably chop this specific problem up to doing <code>change - dollars * 100</code>, where the integer cast doesn't round by default.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1466636134, "last_edit_date": 1466636134, "creation_date": 1466635413, "answer_id": 37979418, "question_id": 37977478, "link": "https://stackoverflow.com/questions/37977478/c-double-to-int-conversion-complication/37979418#37979418", "title": "C++ Double to Int Conversion Complication", "body": "<p><strong>Round</strong> to whole numbers.</p>\n\n<hr>\n\n<p>Consider what values are in <code>payment, price, change</code>: 10.69, 10.00, 0.69.</p>\n\n<p>Typical <code>double</code> can represent <em>exactly</em> about 2**64 different numbers.  As most <code>double</code> use a binary representation, exact decimal values of numbers like 1.23 are not in that set.  In such cases, <code>cin&gt;&gt;price</code> will convert text to the closest <code>double</code>.</p>\n\n<pre><code>text   exact double value\n10.69: 10.6899999999999995026200849679298698902130126953125  \n10.00: 10.00  \n 0.69:  0.689999999999999946709294817992486059665679931640625\n</code></pre>\n\n<p>A key failing occurs with the below.  Let us assume that <code>change - dollars * 100</code> resulted in <code>68.99999999999998578914528479799628257751465</code>.  That value converted to <code>int coins</code> is <code>68</code> rather than the hoped for <code>69</code>.  The value was not rounded to nearest, but truncated toward zero.</p>\n\n<pre><code>int coins = change - dollars * 100;\n</code></pre>\n\n<p>To handle this are a number of approaches, all with pros and cons.</p>\n\n<ol>\n<li><p>Convert FP money to <em>nearest</em> whole number amounts of the lowest fiscal unit. And then proceed with math that only uses whole numbers. (con: easy to forget to perform rounding when needed)</p>\n\n<pre><code>const double money_base_unit = 0.01;\ndouble change = payment - price;\ncoins = round(change/money_base_unit);\n</code></pre></li>\n<li><p>Begin with integer money with type <code>long long</code> in terms of some base unit like a penny. (con: trouble with overflow, money values of a fraction of the base unit, interest/rate calculations, etc.)</p></li>\n<li><p>Use decimal floating point type.  (Not commonly available or slow in emulation)</p></li>\n<li><p>Use fixed point type. (Even less available)</p></li>\n<li><p>Use a class specifically design for money which wraps one of the above to handle financial nuances.</p></li>\n</ol>\n\n<hr>\n\n<p>For OP, the simple solution is to round those money values properly to whole number of pennies.</p>\n"}], "owner": {"reputation": 25, "user_id": 6500959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/408a0fd092cd9e44ead2a7aaa83fe08c?s=128&d=identicon&r=PG", "display_name": "Helgard Ferreira", "link": "https://stackoverflow.com/users/6500959/helgard-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 790, "favorite_count": 0, "accepted_answer_id": 37979418, "answer_count": 4, "score": 1, "last_activity_date": 1466636134, "creation_date": 1466626620, "last_edit_date": 1466627078, "question_id": 37977478, "link": "https://stackoverflow.com/questions/37977478/c-double-to-int-conversion-complication", "title": "C++ Double to Int Conversion Complication", "body": "<p>I'm trying to create a cash register application in C++ which asks for the price of an item and the payment amount from the customer, where it then displays the change in dollars, quarters, dimes, and pennies:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nvoid printChange(int&amp;, int&amp;, int&amp;, int&amp;, int&amp;);\nvoid findCoins(int&amp;, int&amp;, int&amp;, int&amp;, int&amp;);\n\n\nint main()\n{\n    double price;\n    double payment;\n    char answer = 'y';\n    int dollars, quarters, dimes, nickels, pennies;\n    while(answer == 'y')\n    {\n        cout&lt;&lt;\"Enter price of an item: \"&lt;&lt;endl;\n        cin&gt;&gt;price;\n        cout&lt;&lt;\"Enter payment from customer: \"&lt;&lt;endl;\n        cin&gt;&gt;payment;\n        double change = payment - price;\n        dollars = change;               //use implicit conversion\n        change = change * 100;          //multiplication\n\n        int coins = change - dollars * 100;\n        findCoins(coins, quarters, dimes, nickels, pennies);\n\n        printChange(dollars, quarters, dimes, nickels, pennies);\n        cout&lt;&lt;\"Do you have another transaction?\";\n        cin&gt;&gt;answer;\n    }\n    cout&lt;&lt;\"Thanks for shopping at Albertsons!\"&lt;&lt;endl;\n    return 0;\n}\n\nvoid printChange(int&amp; dol, int&amp; q, int&amp; d, int&amp; n, int&amp; p)\n{\n    cout&lt;&lt;\"dollars \"&lt;&lt;dol&lt;&lt;endl;\n    cout&lt;&lt;\"quarters: \"&lt;&lt;q&lt;&lt;endl;\n    cout&lt;&lt;\"dimes:  \"&lt;&lt;d&lt;&lt;endl;\n    cout&lt;&lt;\"nickels: \"&lt;&lt;n&lt;&lt;endl;\n    cout&lt;&lt;\"pennies: \"&lt;&lt;p&lt;&lt;endl;\n}\nvoid findCoins(int&amp; coins, int&amp; quarters, int&amp; dimes,\n        int&amp; nickels, int&amp; pennies)\n{\n    quarters = coins/25;                //use implicit conversion\n    dimes = coins % 25 / 10;            //use remainder division\n    nickels = coins % 25 % 10 / 5;\n    pennies = coins % 25 % 10 % 5;\n}\n</code></pre>\n\n<p>The problem here is that I need to convert change (which is a double) into coins (which is an integer) so that I can use modulus in determining how many quarters, dimes, nickels, and pennies the cashier owes the customer and no matter what angle I approach the problem I keep getting the same error - the original double value is subtracted by 1 (in some cases).</p>\n\n<p>E.g.</p>\n\n<pre><code>Enter price of an item: \n10\nEnter payment from customer: \n10.69\ndollars 0\nquarters: 2\ndimes:  1\nnickels: 1\npennies: 3\n</code></pre>\n\n<p>Compared to:</p>\n\n<pre><code>Enter price of an item: \n1.26\nEnter payment from customer: \n5.00\ndollars 3\nquarters: 2\ndimes:  2\nnickels: 0\npennies: 4\n</code></pre>\n\n<p>NOTE: I understand that I can utilize fmod() instead of modulus for double values, but I still ran into the same type of truncation error even when changing coins into a double, specifically in the following scenario:</p>\n\n<pre><code>Enter price of an item: \n45\nEnter payment from customer: \n47.47\ndollars 2\nquarters: 1\ndimes:  2\nnickels: 0\npennies: 1\n</code></pre>\n\n<p>Notice how I am one penny off (same issue as the first example)? I'm relatively new to C++, but I have over a year of experience in Java, and I have never run into this weird of a truncation error when converting from double to int (I understand that the decimal points are lost in certain cases, but why the subtraction of a whole double value by exactly 1 in multiple instances?)</p>\n\n<p>What changes to my code, specifically, would you recommend as to prevent this annoying truncation error?</p>\n"}, {"tags": ["c++", "qt", "scrollbar", "qtextedit", "qplaintextedit"], "comments": [{"owner": {"reputation": 4377, "user_id": 2836797, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/KMjjk.png?s=128&g=1", "display_name": "It&#39;s Your App LLC", "link": "https://stackoverflow.com/users/2836797/its-your-app-llc"}, "edited": false, "score": 0, "creation_date": 1466627167, "post_id": 37977422, "comment_id": 63401322, "body": "why do u want to do this"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 4377, "user_id": 2836797, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/KMjjk.png?s=128&g=1", "display_name": "It&#39;s Your App LLC", "link": "https://stackoverflow.com/users/2836797/its-your-app-llc"}, "edited": false, "score": 0, "creation_date": 1466627572, "post_id": 37977422, "comment_id": 63401541, "body": "@JosephMalicke maybe he/she is implementing yet another great text comparison software and wants two edit controls always have synchronized scrolling?"}, {"owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "edited": false, "score": 1, "creation_date": 1466685194, "post_id": 37977422, "comment_id": 63427141, "body": "I&#39;m loading in (a lot of) data from an SQL database, and printing it via formatted string to a PlainTextEdit in order for c/p capabilities and just general time efficiency. It could have upwards of 40000 lines, so i&#39;d like a separate textEdit above to act as a header, and should scroll horizontally with the data so the columns stay lined up."}], "answers": [{"tags": [], "owner": {"reputation": 4377, "user_id": 2836797, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/KMjjk.png?s=128&g=1", "display_name": "It&#39;s Your App LLC", "link": "https://stackoverflow.com/users/2836797/its-your-app-llc"}, "is_accepted": false, "score": 0, "last_activity_date": 1466627304, "creation_date": 1466627304, "answer_id": 37977689, "question_id": 37977422, "link": "https://stackoverflow.com/questions/37977422/qt-set-scroll-area-of-a-qplaintextedit-to-match-that-of-anothers/37977689#37977689", "title": "Qt set scroll area of a QPlainTextEdit to match that of anothers.", "body": "<p>Have you tried using signal and slots to link the widget sizes with setFixedSize()?</p>\n"}, {"comments": [{"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "edited": false, "score": 0, "creation_date": 1466685415, "post_id": 37977725, "comment_id": 63427299, "body": "maybe to give up with text editor&#39;s own scroll bar (hide it) and your own to the layout?"}, {"owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "edited": false, "score": 0, "creation_date": 1466686230, "post_id": 37977725, "comment_id": 63427861, "body": "I just did a qDebug() of myFirstTextEdit-&gt;horizontalScrollBar()-&gt;maximum and it&#39;s ouputting 0... Even though there&#39;s plenty of room to scroll"}, {"owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "edited": false, "score": 1, "creation_date": 1466686880, "post_id": 37977725, "comment_id": 63428379, "body": "Welp, turns out I just had to do it outside of the constructor... I spent hours with the right code just in the wrong place, &#175;\\_(\u30c4)_/&#175;"}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "reply_to_user": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "edited": false, "score": 0, "creation_date": 1466687756, "post_id": 37977725, "comment_id": 63429086, "body": "Well, thank you for accepting my answer that wasn&#39;t actually helpful in your situation. While I intuitively feel that this may happen I curious to know all details..."}], "tags": [], "owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "is_accepted": true, "score": 1, "last_activity_date": 1466627424, "creation_date": 1466627424, "answer_id": 37977725, "question_id": 37977422, "link": "https://stackoverflow.com/questions/37977422/qt-set-scroll-area-of-a-qplaintextedit-to-match-that-of-anothers/37977725#37977725", "title": "Qt set scroll area of a QPlainTextEdit to match that of anothers.", "body": "<p>Assuming you already have a function (SLOT?) called when first text edit is changed:</p>\n\n<pre><code>myOtherTextEdit-&gt;horizontalScrollBar()-&gt;setMaximum(myFirstTextEdit-&gt;horizontalScrollBar()-&gt;maximum());\n</code></pre>\n"}], "owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 0, "accepted_answer_id": 37977725, "answer_count": 2, "score": 1, "last_activity_date": 1466627424, "creation_date": 1466626436, "question_id": 37977422, "link": "https://stackoverflow.com/questions/37977422/qt-set-scroll-area-of-a-qplaintextedit-to-match-that-of-anothers", "title": "Qt set scroll area of a QPlainTextEdit to match that of anothers.", "body": "<p>I for the life of me can't figure out how to do this. </p>\n\n<p>I have two QPlainTextEdits, with word wrapping off.<br>\nI fill one using <code>myTextEdit-&gt;document()-&gt;setPlainText(myText);</code><br>\nNow myTextEdit has a horizontal scroll bar.\nNow I want my other textEdit to be able to scroll <em>the exact same amount</em> as myTextEdit, despite how many words are in it. How can i set the width within the scroll area of my other text edit to match that of myTextEdit?</p>\n\n<p>I want the document widths to be the same, but myTextEdit->document()->size() has been of no use. Can anyone help?</p>\n"}, {"tags": ["c++", "opencv", "mat"], "comments": [{"owner": {"reputation": 10061, "user_id": 1601291, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6dc4421361b876e9d58c10fa16f49386?s=128&d=identicon&r=PG", "display_name": "Aurelius", "link": "https://stackoverflow.com/users/1601291/aurelius"}, "edited": false, "score": 0, "creation_date": 1466628705, "post_id": 37977270, "comment_id": 63402060, "body": "Please edit your question to show the <a href=\"http://stackoverflow.com/help/mcve\">minimal</a> amount of code that reproduces your problem. Your code doesn&#39;t currently compile because some of your constants are missing declarations and values."}, {"owner": {"reputation": 10061, "user_id": 1601291, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6dc4421361b876e9d58c10fa16f49386?s=128&d=identicon&r=PG", "display_name": "Aurelius", "link": "https://stackoverflow.com/users/1601291/aurelius"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1466630286, "post_id": 37977270, "comment_id": 63402793, "body": "@Miki He&#39;s reassigning <code>blackImg</code> every iteration because he wants to start with a blank image. <code>blackImg</code> gets modified during the iteration. He should instead remove the initial assignment to <code>blackImg</code> and declare it inside the loop."}], "answers": [{"tags": [], "owner": {"reputation": 650, "user_id": 3214668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0894cd6a7c2fbcf3d985135d4492a0?s=128&d=identicon&r=PG&f=1", "display_name": "Adrien Descamps", "link": "https://stackoverflow.com/users/3214668/adrien-descamps"}, "is_accepted": false, "score": 0, "last_activity_date": 1466638122, "creation_date": 1466638122, "answer_id": 37979861, "question_id": 37977270, "link": "https://stackoverflow.com/questions/37977270/null-data-field-in-cvmat-object/37979861#37979861", "title": "Null Data field in cv::Mat object", "body": "<p>The most obvious explanation would be that patternHeight or patternWidth is 0, so blackImg is replaced with an empty image at the line:</p>\n\n<pre><code>blackImg = Mat::zeros(patternHeight, patternWidth, CV_8UC1);\n</code></pre>\n\n<p>If i understand correctly what you are trying to do at that line (refill blackImg with black pixels?), you should use instead :</p>\n\n<pre><code>blackImg.setTo(0);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6500999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d447fa01b9871d3ff3de6926f013e40f?s=128&d=identicon&r=PG&f=1", "display_name": "Jules Laffitte", "link": "https://stackoverflow.com/users/6500999/jules-laffitte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1016, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466638122, "creation_date": 1466625881, "question_id": 37977270, "link": "https://stackoverflow.com/questions/37977270/null-data-field-in-cvmat-object", "title": "Null Data field in cv::Mat object", "body": "<p>I am quite new at OpenCV. I am running into quite a puzzle ( from my naive perspective...)</p>\n\n<p>I am trying to set a region of a zero matrix to ones. In essence do the following:</p>\n\n<pre><code>Mat a = Mat::zeros(10, 10, CV_8UC1);\nMat b = Mat::ones(3, 3, CV_8UC1);\n\nRange h = Range(2, 5);\nRange w = Range(2, 5);\n\nb.copyTo(a(h, w));\n</code></pre>\n\n<p>I've checked the output of this exact code, and it works fine. The problem comes in when i try to do this in my actual code:</p>\n\n<pre><code>int key, top,left,bottom,right;\nMat blackImg = Mat::zeros(imgHeight, imgWidth, CV_8UC1);\nMat whiteBox = Mat::ones(patternHeight, patternWidth, CV_8UC1);\nwhile (true) {\n    blackImg = Mat::zeros(patternHeight, patternWidth, CV_8UC1);\n\n    top = patternPosY;\n    bottom = patternPosY + patternHeight;\n    left = patternPosX;\n    right = patternPosX + patternWidth;\n\n    Range h = Range(top, bottom);\n    Range w = Range(left, right);\n\n    whiteBox.copyTo(blackImg(h, w));\n\n    imshow(\"Pattern\", blackImg);\n    // key inputs\n    key = waitKey(30);\n\n    if (key == 27) {\n        break;\n    }\n}\n</code></pre>\n\n<p>However, the data field of the blackImg Mat object is NULL and remains so. This in turns leads to a memory error obviously.  I have checked the values of top, bottom, right, and left and they are within bounds.</p>\n\n<p>I am sure I'm missing something basic, and it would be infinitely helpful if someone could point it out.</p>\n"}, {"tags": ["c++", "lvalue", "rvalue", "overload-resolution"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1466626029, "post_id": 37977197, "comment_id": 63400752, "body": "You miss tracking the constructors."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1466626820, "post_id": 37977197, "comment_id": 63401142, "body": "... <code>foo( ) { bar( ); }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 2660747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53053e64add9cdb37c0305507792aa9f?s=128&d=identicon&r=PG", "display_name": "david", "link": "https://stackoverflow.com/users/2660747/david"}, "edited": false, "score": 0, "creation_date": 1466628174, "post_id": 37977647, "comment_id": 63401803, "body": "thanks for elaborating. does this mean that within a context where <code>this</code> is allowed (which is basically in all member-functions including ctor and dtor) the object will be treated as an lvalue while the outside value-category can be different? (voted up but do not have enough rep yet)."}, {"owner": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "reply_to_user": {"reputation": 23, "user_id": 2660747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53053e64add9cdb37c0305507792aa9f?s=128&d=identicon&r=PG", "display_name": "david", "link": "https://stackoverflow.com/users/2660747/david"}, "edited": false, "score": 0, "creation_date": 1466628472, "post_id": 37977647, "comment_id": 63401951, "body": "@david Yes. Simply using this, explicitly or implicitly will call lvalue ref-qualifiers. Added a <i>solution</i> to call rvalue ref-qualifiers."}, {"owner": {"reputation": 23, "user_id": 2660747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53053e64add9cdb37c0305507792aa9f?s=128&d=identicon&r=PG", "display_name": "david", "link": "https://stackoverflow.com/users/2660747/david"}, "edited": false, "score": 0, "creation_date": 1466628780, "post_id": 37977647, "comment_id": 63402094, "body": "no - I do not want to force calling the rvalue-overload. I was simply confused that the object appeared to be an rvalue and client-code would yield this output. dtor however said lvalue which seemed strange to me since the same object was a rvalue and lvalue depending on wheter a member-function was being called"}, {"owner": {"reputation": 23, "user_id": 2660747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53053e64add9cdb37c0305507792aa9f?s=128&d=identicon&r=PG", "display_name": "david", "link": "https://stackoverflow.com/users/2660747/david"}, "edited": false, "score": 0, "creation_date": 1466628975, "post_id": 37977647, "comment_id": 63402198, "body": "thank you for clarifying! any way of forwarding the &#39;outside&#39; value-category? (just interested, no usecase yet, would propably use a non-member function there)."}], "tags": [], "owner": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "is_accepted": true, "score": 0, "last_activity_date": 1466629033, "last_edit_date": 1466629033, "creation_date": 1466627188, "answer_id": 37977647, "question_id": 37977197, "link": "https://stackoverflow.com/questions/37977197/confusion-overloading-memberfunctions-on-rvalues-and-lvalues/37977647#37977647", "title": "confusion overloading memberfunctions on rvalues and lvalues", "body": "<p><code>this</code> is a prvalue, but <code>*this</code> is a lvalue, naturally it will call lvalue ref-qualifiers:</p>\n\n<pre><code>\u00a7 5.3.1 Unary operators [expr.unary.op]\n</code></pre>\n\n<blockquote>\n  <p>The unary * operator performs <em>indirection</em>: the expression to which it is applied shall be a pointer to an\n  object type, or a pointer to a function type and the result is an <strong>lvalue</strong> referring to the object or function\n  to which the expression points.</p>\n</blockquote>\n\n<p>From cppreference, <a href=\"http://en.cppreference.com/w/cpp/language/this\" rel=\"nofollow\">this pointer</a>:</p>\n\n<blockquote>\n  <p>When a non-static class member is used in any of the contexts where the this keyword is allowed (non-static member function bodies, member initializer lists, default member initializers), <strong>the implicit this-> is automatically added before the name</strong>, resulting in a member access expression (which, if the member is a virtual member function, results in a virtual function call).</p>\n</blockquote>\n\n<p><em>Note</em>: calling this-> is equivalent to calling (*this).</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct foo\n{\n    void bar( ) &amp;  { std::cout &lt;&lt; \"lvalue\\n\"; x(); }\n    void bar( ) &amp;&amp; { std::cout &lt;&lt; \"rvalue\\n\"; x(); }\n\n    void x( ) &amp; { std::cout &lt;&lt; \"x lvalue\\n\"; }\n    void x( ) &amp;&amp; { std::cout &lt;&lt; \"x rvalue\\n\"; }\n\n    ~foo( ) { bar( ); }\n};\n\n\nint main( int arg, char **argv )\n{\n    foo{ }.bar();\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>rvalue\nx lvalue\nlvalue\nx lvalue\n</code></pre>\n\n<p>If, for some reason, you really want to call a rvalue function, you could cast the this pointer to a rvalue reference:</p>\n\n<pre><code>~foo( ) { static_cast&lt;foo&amp;&amp;&gt;(*this).bar( ); }\n</code></pre>\n\n<p>Or using <code>std::move</code>:</p>\n\n<pre><code>~foo( ) { std::move(*this).bar( ); }\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 2660747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53053e64add9cdb37c0305507792aa9f?s=128&d=identicon&r=PG", "display_name": "david", "link": "https://stackoverflow.com/users/2660747/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 37977647, "answer_count": 1, "score": 2, "last_activity_date": 1466629033, "creation_date": 1466625597, "question_id": 37977197, "link": "https://stackoverflow.com/questions/37977197/confusion-overloading-memberfunctions-on-rvalues-and-lvalues", "title": "confusion overloading memberfunctions on rvalues and lvalues", "body": "<p>I have the following setup:</p>\n\n<pre><code>struct foo\n{\n    void bar( ) &amp;  { std::cout &lt;&lt; \"lvalue\\n\"; }\n    void bar( ) &amp;&amp; { std::cout &lt;&lt; \"rvalue\\n\"; }\n\n    ~foo( ) { bar( ); }\n};\n\n\nint main( int arg, char **argv )\n{\n    foo{ }.bar();\n}\n</code></pre>\n\n<p>which leads to the output of</p>\n\n<pre><code>rvalue\nlvalue\n</code></pre>\n\n<p>I do not understand the output of the dtor which is always <code>lvalue</code> \nno matter how hard I try. While I agree that taking the address\nsimilar to</p>\n\n<pre><code>(*this).bar( ); // sure enough this will print lvalue\n</code></pre>\n\n<p>calls the lvalue-overload I do not understand why I can never get an output of <code>rvalue</code>for the dtor.</p>\n\n<p>I find this strange since the object is an rvalue first and somehow binds to an lvalue before being destructed. What's the matter here?</p>\n"}, {"tags": ["c++", "floating-point", "double"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 4, "creation_date": 1466625480, "post_id": 37977151, "comment_id": 63400452, "body": "6.0 is already a <code>double</code> type."}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1466625525, "post_id": 37977151, "comment_id": 63400478, "body": "@chris Makes sense, but then why the difference?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1466625549, "post_id": 37977151, "comment_id": 63400493, "body": "even with only doubles or only floats you should not rely on <code>3.0 + 3.0 == 6.0</code>"}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1466625637, "post_id": 37977151, "comment_id": 63400546, "body": "@RichardCritten I disagree, I&#39;ve read that question many times and I fully understand the topics discussed there."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1466625702, "post_id": 37977151, "comment_id": 63400583, "body": "All depends on x (the fraction)"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1466625728, "post_id": 37977151, "comment_id": 63400596, "body": "@PaulWarnick As per your note you should show how you are printing and what you receive."}, {"owner": {"reputation": 147, "user_id": 5894613, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1667983593450973/picture?type=large", "display_name": "Zaki Mustafa", "link": "https://stackoverflow.com/users/5894613/zaki-mustafa"}, "edited": false, "score": 0, "creation_date": 1466625760, "post_id": 37977151, "comment_id": 63400618, "body": "whats the data type of value1 and x? the result will depend on their data types too"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1466625843, "post_id": 37977151, "comment_id": 63400654, "body": "I know I&#39;ve seen similar questions to this, but I can&#39;t find them. The difference has to do with the precision that it uses for in-line addition versus losing precision when it saves the value in a variable."}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 147, "user_id": 5894613, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1667983593450973/picture?type=large", "display_name": "Zaki Mustafa", "link": "https://stackoverflow.com/users/5894613/zaki-mustafa"}, "edited": false, "score": 0, "creation_date": 1466625855, "post_id": 37977151, "comment_id": 63400660, "body": "@ZakiMustafa I&#39;ve edited the question to include that they are type double"}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1466625985, "post_id": 37977151, "comment_id": 63400731, "body": "@Barmar Yeah I tried to look for a solution for this but I couldn&#39;t find one on SE (surprisingly due to the simplicity of the question). Also, that was along the lines of my thinking."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1466626201, "post_id": 37977151, "comment_id": 63400828, "body": "@PaulWarnick, I don&#39;t see any reason the two should be different. Perhaps the compiler is optimizing them differently or something weird."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1466626206, "post_id": 37977151, "comment_id": 63400835, "body": "You are basically doing something that is ill-defined for float/doubles.  You cannot expect == or != to give a perfect result.  I understand what you are asking here, but in truth, once you start worrying about the froth fraction digits in floating point types, you are already doing it wrong.  As to why using a double 6.0 gives a different result that letting the compiler do some work, I&#39;d guess this has to do with a standard somewhere or another.  I&#39;ll let one of the guys who has those links handy answer that assertion."}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "edited": false, "score": 0, "creation_date": 1466626273, "post_id": 37977151, "comment_id": 63400876, "body": "I&#39;m not exactly sure how this is considered the same question as <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\" title=\"is floating point math broken\">stackoverflow.com/questions/588004/&hellip;</a> as it doesn&#39;t answer what happens to the value of a double when used inline vs assigning it to a variable first (which is my question)."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1466626339, "post_id": 37977151, "comment_id": 63400923, "body": "Then re-define your question to ask why the compiler used statement is specifically different than placing it in a double class first and add info about the compiler being used, soft/hard fp support, etc.  Right now, it reads very very close to the given question."}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1466626380, "post_id": 37977151, "comment_id": 63400947, "body": "@chris My thinking as well, I was just trying to see if this is a common issue that has a standard solution / explanation."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1466626424, "post_id": 37977151, "comment_id": 63400969, "body": "As far as I can see the first answer to the duplicate question precisely answers this question."}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1466626619, "post_id": 37977151, "comment_id": 63401051, "body": "@Galik I&#39;ve never used the chat for SE before but is this something I would be able to discuss with a few people using it?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1466626942, "post_id": 37977151, "comment_id": 63401205, "body": "@PaulWarnick I have retracted my duplicate vote because I figured out what you are actually asking. However I am unable to reproduce, can you provide a working example?"}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1466627011, "post_id": 37977151, "comment_id": 63401244, "body": "@Galik Thank you! Yes I&#39;ll edit to provide a working example (although it might not be pretty)."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 1, "creation_date": 1466628231, "post_id": 37977151, "comment_id": 63401834, "body": "@PaulWarnick In addition to a complete, buildable code for repro, please also state the exact command you used when compling this code with <code>gcc</code>."}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1466628375, "post_id": 37977151, "comment_id": 63401901, "body": "@Galik I&#39;ve just updated to provide a example of the issue"}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1466628446, "post_id": 37977151, "comment_id": 63401935, "body": "@njuffa I will make the changes so that it&#39;s fully reproducible (right now it&#39;s just a sample so you can see what exactly is happening) + I&#39;ll add in the gcc commands."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 1, "creation_date": 1466628524, "post_id": 37977151, "comment_id": 63401977, "body": "@PaulWarnick Your question says the variables are of type <code>double</code>, but the code you edited in just now shows they are of type <code>long double</code>. I would suggest cleaning up this inconsistency."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 2, "creation_date": 1466628733, "post_id": 37977151, "comment_id": 63402070, "body": "@PaulWarnick can you try making the literal a long double (i.e. 6.0L)?"}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1466628957, "post_id": 37977151, "comment_id": 63402185, "body": "@AnonMail You&#39;re exactly right, the fact that I forgot I was using long doubles has completely turned me around. By changing it to 6.0L the numbers become the same. Thank you."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 1, "creation_date": 1466629324, "post_id": 37977151, "comment_id": 63402375, "body": "@Paul Warnick Compiling with godbolt shows that the first expression is computed at runtime using x87 FPU, the second expression is computed at compile time. Try <code>const long double six = 6.0</code> and see whether that makes the answer the same (by allowing compile-time computation for the first variant as well)."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1466629774, "post_id": 37977151, "comment_id": 63402568, "body": "Given that now we have a <code>long double</code> being assigned a <code>double</code> is this not just a <i>duplicate</i>?"}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1466630198, "post_id": 37977151, "comment_id": 63402743, "body": "@Galik A duplicate of <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\" title=\"is floating point math broken\">stackoverflow.com/questions/588004/&hellip;</a> ? I don&#39;t think so, surprisingly the issue was simply that I was calculating with both double and long double (when I thought I was using long double for everything)."}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "edited": false, "score": 0, "creation_date": 1466630300, "post_id": 37977151, "comment_id": 63402803, "body": "I suppose now the question title itself doesn&#39;t really make sense but I got an answer to my problem. (I&#39;m not sure what to change the title to so that it implies the question &quot;Why are my calculations different&quot;, instead of what&#39;s happening with long doubles (which is not the problem))."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1466630919, "post_id": 37977151, "comment_id": 63403075, "body": "I believe it is a duplicate because the <i>real</i> issue is that you are loading a <i>long double</i> with a value that is a <i>decimal representation</i> of a number that can not be accurately represented in a long double. That issue does not affect the results if the <i>numeric type</i> is identical in <i>both</i> examples because the <i>errors</i> are the same. But when you have a <i>double</i> and a <i>long double</i> the errors are now different."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 1, "creation_date": 1466631305, "post_id": 37977151, "comment_id": 63403255, "body": "<code>6.0</code> is exactly reprsentable in a <code>float</code>, int a <code>double</code>, or a <code>long double</code>. As I alluded to above, the main differences between the two original variants seems to be that one is computed at runtime, the other at compile time, and there may well be discrepancies between the two modes of evaluation (without consulting the source code of the compiler, compile-time computation is a black box). At least that is what a look at the disassembled object code would suggest."}, {"owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1466631409, "post_id": 37977151, "comment_id": 63403302, "body": "@Galik Wow yeah, you&#39;re completely correct."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1466631654, "post_id": 37977151, "comment_id": 63403405, "body": "@njuffa Looking at the new example I doubt either of those calculations is happening at compile time (calling <code>pow()</code>). I suspect it is because one calculation is promoted to <code>long double</code> by the inclusion of the variable <code>six</code> whereas the other is calculated to only <code>double</code> precision because it contains only doubles."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1466631935, "post_id": 37977151, "comment_id": 63403520, "body": "@PaulWarnick I actually think you have presented us with 3 separate problems at different times, one of which turned out to be a non-problem and another turned out to have been over-simplified so as to not actually be the right problem."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1466632141, "post_id": 37977151, "comment_id": 63403607, "body": "So I think the <i>actual</i> problem is one of <i>promotion</i> as I described in my previous but one post. That&#39;s not a duplicate of the other post but it probably does have duplicates somewhere."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1466632496, "post_id": 37977151, "comment_id": 63403746, "body": "@Galik Both scenarios could apply. Without knowing the gcc version, and exact compiler switches, and full, buildable code, this can&#39;t be diagnosed conclusively. I will vote to close."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1466632754, "post_id": 37977151, "comment_id": 63403847, "body": "I was unable to locate a duplicate (I am sure there must be some) so I provided an answer. I think the main thing is to always provide a <b>working example</b> that reproduces the error. Then you can&#39;t go wrong:)"}], "answers": [{"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 3, "last_activity_date": 1466633373, "last_edit_date": 1466633373, "creation_date": 1466632631, "answer_id": 37978950, "question_id": 37977151, "link": "https://stackoverflow.com/questions/37977151/what-happens-to-the-value-of-a-floating-point-number-when-its-assigned-to-a-lon/37978950#37978950", "title": "What happens to the value of a floating point number when it&#39;s assigned to a long double?", "body": "<p>The problem here I believe is one of <em>promotion</em>.</p>\n\n<pre><code>long double six = 6.0;\nlong double value1;\nlong double value2;\n\nvalue1 = (0.7854 * (pow(10, 5)) * six * (pow(0.033, 2)) * 1.01325 * (1.27 * 11.652375 / 1.01325 - 1.0));\nvalue2 = (0.7854 * (pow(10, 5)) * 6.0 * (pow(0.033, 2)) * 1.01325 * (1.27 * 11.652375 / 1.01325 - 1.0));\n</code></pre>\n\n<p>Looking at the second calculation we notice that every term in the expression is type <em>double</em>. This means the whole expression will be evaluated to <em>double precision</em>.</p>\n\n<p>However the <em>first</em> calculation contains the variable <code>six</code> that is of type <code>long double</code>. This will cause the <em>entire expression</em> to be calculated at the higher precision of a <em>long double</em>.</p>\n\n<p>So this difference in the calculation's precision is likely the cause of the discrepancy. The whole of the first expression is <em>promoted</em> to <code>long double</code> precision but the second calculation is calculated only to <code>double</code> precision.</p>\n\n<p>In fact a simple change to the code can prove this. If we change the type of the term <code>6.0</code> from <code>double</code> to <code>long double</code> by writing <code>6.0L</code> we will get identical results because <em>both</em> expressions are now calculated to the same precision:</p>\n\n<pre><code>value1 = (0.7854 * (pow(10, 5)) * six * (pow(0.033, 2)) * 1.01325 * (1.27 * 11.652375 / 1.01325 - 1.0));\nvalue2 = (0.7854 * (pow(10, 5)) * 6.0L * (pow(0.033, 2)) * 1.01325 * (1.27 * 11.652375 / 1.01325 - 1.0));\n</code></pre>\n"}], "owner": {"reputation": 843, "user_id": 4289363, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh6.googleusercontent.com/-fJJhDvcVY8I/AAAAAAAAAAI/AAAAAAAAAEQ/DRZuD7saHgw/photo.jpg?sz=128", "display_name": "Paul Warnick", "link": "https://stackoverflow.com/users/4289363/paul-warnick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 37978950, "answer_count": 1, "score": 3, "last_activity_date": 1466633373, "creation_date": 1466625403, "last_edit_date": 1466628543, "question_id": 37977151, "link": "https://stackoverflow.com/questions/37977151/what-happens-to-the-value-of-a-floating-point-number-when-its-assigned-to-a-lon", "title": "What happens to the value of a floating point number when it&#39;s assigned to a long double?", "body": "<p><strong><em>Edit</strong>: I've realised that I'm working with the type</em> <code>long double</code><em>and not just</em> <code>double</code> <em>which <strong>does</strong> make a difference. I've also added an example from my program below that reproduces the error in question.</em></p>\n\n<p><em>Note: I'm currently working in C++11 and using GCC to compile.</em></p>\n\n<p>I'm dealing with a situation where the result varies between the below two calculations:</p>\n\n<pre><code>value1 = x * 6.0;\n</code></pre>\n\n<hr>\n\n<pre><code>double six = 6.0;\nvalue2 = x * six;\n</code></pre>\n\n<hr>\n\n<pre><code>value1 != value2\n</code></pre>\n\n<p>Where all variables above are of type <code>long double</code>.</p>\n\n<p>Essentially, I wrote a line of code that gives me an incorrect answer when I use 6.0 in the actual calculation. Whereas, if I assign 6.0 to a variable of type long double first then use that variable in the calculation I receive the correct result.</p>\n\n<p>I understand the basics of floating point arithmetic, and I guess it's obvious that something is happening to the bits of 6.0 when it is assigned to the long double type.</p>\n\n<p>Sample from my actual program (I left the calculation as is to ensure the error is reproducible):</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;math.h&gt;\n\nlong double six = 6.0;\nlong double value1;\nlong double value2;\n\nvalue1 = (0.7854 * (pow(10, 5)) * six * (pow(0.033, 2)) * 1.01325 * (1.27 * 11.652375 / 1.01325 - 1.0));\nvalue2 = (0.7854 * (pow(10, 5)) * 6.0 * (pow(0.033, 2)) * 1.01325 * (1.27 * 11.652375 / 1.01325 - 1.0));\n\nstd::cout &lt;&lt; std::setprecision(25) &lt;&lt; value1 &lt;&lt; std::endl;\nstd::cout &lt;&lt; std::setprecision(25) &lt;&lt; value2 &lt;&lt; std::endl;\n</code></pre>\n\n<p>Where the output is:</p>\n\n<pre><code>7074.327896870849993415931\n7074.327896870850054256152\n</code></pre>\n\n<p>Also, I understand how floating point calculations only hold precision up to a certain number of bits (so setting such high precision shouldn't effect results, e.g. after 15-17 digits it should really matter if numbers vary but unfortunately this <strong>does</strong> affect my calculation).</p>\n\n<p><strong>Question:</strong> Why are the above two code segments producing (<em>slightly</em>) different results?</p>\n\n<p><em>Note: I'm not simply comparing the two numbers with</em> <code>==</code> <em>and receiving</em> <code>false</code><em>. I've just been printing them out using</em> <code>setprecision</code> <em>and checking each digit.</em></p>\n"}, {"tags": ["c++", "linker", "c++builder", "direct2d", "c++builder-10.1-berlin"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1466633296, "post_id": 37977041, "comment_id": 63404011, "body": "Please <a href=\"https://stackoverflow.com/posts/37977041/edit\">edit</a> your question title so it contains something meaningful. Direct2D and C++Builder are both available from the tags you&#39;ve added, and Embarcadero is irrelevant (unless you know of another company who owns C++ Builder currently). Removing those from your title leaves <i>in</i>, which clearly has no meaning alone. Your title should describe the problem you&#39;re having or question you&#39;re asking in a way that will be relevant to future readers here who see it in a search result."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5454506"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1466645824, "post_id": 37977041, "comment_id": 63407297, "body": "I&#39;ve updated my post."}, {"owner": {"reputation": 1396, "user_id": 1969759, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/93d5e1e710a7bda97c404a3ba67415da?s=128&d=identicon&r=PG", "display_name": "Mike Versteeg", "link": "https://stackoverflow.com/users/1969759/mike-versteeg"}, "edited": false, "score": 1, "creation_date": 1466663922, "post_id": 37977041, "comment_id": 63412764, "body": "Maybe we should mark every question as duplicate as they are all related to coding? That would certainly keep stackoverflow neat and tidy :). Yes, you do need to link to d2d1.lib, this is mentioned somewhere in the Help. Keep in mind even after all these years, BCB still only supports D2D 1.0..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1490997350, "post_id": 37977041, "comment_id": 73377559, "body": "Per the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd368049.aspx\" rel=\"nofollow noreferrer\"><code>D2D1MakeRotateMatrix()</code> documentation</a>, it is implemented in <code>D2d1.dll</code> and referenced by <code>D2d1.lib</code>, so make sure you are linking in <code>D2d1.lib</code> to your executable, either by adding the <code>.lib</code> file to your project (it is located in the <code>$(BDS)\\lib\\win32\\release\\psdk</code> folder), or by adding a <code>#pragma comment(lib, &quot;D2d1.lib&quot;)</code> statement in your code (and make sure the PSDK folder is in your project&#39;s library search path)."}], "owner": {"user_type": "does_not_exist", "display_name": "user5454506"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "closed_date": 1466633344, "answer_count": 0, "score": 0, "last_activity_date": 1490997206, "creation_date": 1466625006, "last_edit_date": 1490997206, "question_id": 37977041, "link": "https://stackoverflow.com/questions/37977041/direct2d-not-linking-whole-library-in-cbuilder", "closed_reason": "Duplicate", "title": "Direct2D Not Linking Whole Library in C++Builder", "body": "<p>I've got a C++ project in Embarcadero RAD Studio 10.1 Berlin.  The project is setup to use Direct2D. Canvas drawing works just fine with the <code>TDirect2DCanvas</code> class. Everything renders smoothly. However, I need to use render targets. I am getting a linking error when I try to do this. For example, when I try this:</p>\n\n<pre><code>canvas-&gt;RenderTarget-&gt;SetTransform(D2D1::Matrix3x2F::Rotation(15.0, D2D1PointF(100, 100)));\n</code></pre>\n\n<p>I get the following linking error:</p>\n\n<pre><code>[ilink32 Error] Error: Unresolved external 'D2D1MakeRotateMatrix' referenced from C:\\DP\\TRUNK\\SRC\\CLIENTSIDE\\APPLICATIONS\\VIEWER\\WIN32\\DEBUG\\MIMAGE.OBJ\n</code></pre>\n\n<p>I thought C++Builder was supposed to already be setup to link against Direct2D if I just included the headers. Can anyone help me link against the appropriate files?</p>\n"}, {"tags": ["python", "c++", "python-2.7", "qt", "pyqt"], "comments": [{"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 1, "creation_date": 1466625750, "post_id": 37977040, "comment_id": 63400611, "body": "If your codebase is in python, why would you write your GUI code in C++?  Why not just write the GUI in python (ie. pyqt) as well?"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1466632408, "post_id": 37977040, "comment_id": 63403711, "body": "If you want to make your Qt C++ extensions accessible to python, wrap them using <a href=\"http://pyqt.sourceforge.net/Docs/sip4/\" rel=\"nofollow noreferrer\">sip</a> (i.e. the same tool that is used by pyqt)."}, {"owner": {"reputation": 953, "user_id": 1095896, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f70f2db9cc735bfc663e9b0794125e2e?s=128&d=identicon&r=PG", "display_name": "james", "link": "https://stackoverflow.com/users/1095896/james"}, "reply_to_user": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 0, "creation_date": 1466633646, "post_id": 37977040, "comment_id": 63404111, "body": "@BrendanAbel, because it is possible that some of the components of the GUI app will be written in C++, esp. some 3rd party Qt controls, for instance."}, {"owner": {"reputation": 953, "user_id": 1095896, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f70f2db9cc735bfc663e9b0794125e2e?s=128&d=identicon&r=PG", "display_name": "james", "link": "https://stackoverflow.com/users/1095896/james"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1466633831, "post_id": 37977040, "comment_id": 63404184, "body": "@ekhumoro, that&#39;s good to know. At least there is a way to do this, but ideally we would prefer a solution without this hassle. PyQt is the best solution I found so far, but it is possible that there are some better options that I am not aware of."}], "owner": {"reputation": 953, "user_id": 1095896, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f70f2db9cc735bfc663e9b0794125e2e?s=128&d=identicon&r=PG", "display_name": "james", "link": "https://stackoverflow.com/users/1095896/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1466625005, "creation_date": 1466625005, "question_id": 37977040, "link": "https://stackoverflow.com/questions/37977040/qt-application-interact-with-python-2-7", "title": "Qt application interact with python 2.7", "body": "<p>We have a large library and utility tools written in Python 2.7. And we need to create a GUI application that uses these python library and tools. So I'm looking for a solution that can easily interact between the GUI app and our python code base.\nRequirements:</p>\n\n<ol>\n<li>cross-platform: Linux, Windows; </li>\n<li>these programming languages are preferred: C++, C#, Python.\nPerformance is not very essential. The key is to quickly develop the\nGUI application;</li>\n</ol>\n\n<p>I know that PyQt can be a good choice but what concerned me is - if we are to develop the GUI in Qt C++, interact with Python may not as easy as the other way round, i.e. python code can easily use Qt library because of PyQt but C++ code does not have something similar. When we have controls made in Qt C++, it would not be straightforward to use them in python.</p>\n\n<p>Any suggestions? Thanks.</p>\n"}, {"tags": ["c++", "visual-studio", "github"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1466625072, "post_id": 37977036, "comment_id": 63400240, "body": "<i>&quot;How do I maintain the structure?&quot;</i> - Create folder. Move file."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1466630100, "post_id": 37977036, "comment_id": 63402710, "body": "This question is not about programming really. It is just about how to use specific tools. I&#39;d say it is off-topic here."}], "answers": [{"comments": [{"owner": {"reputation": 3485, "user_id": 5151542, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/769d9b79c6e6c0816befac50ca1981d7?s=128&d=identicon&r=PG&f=1", "display_name": "Zanko", "link": "https://stackoverflow.com/users/5151542/zanko"}, "edited": false, "score": 1, "creation_date": 1466625271, "post_id": 37977066, "comment_id": 63400340, "body": "So this is VS and nothing related to C++?"}], "tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": true, "score": 3, "last_activity_date": 1466625090, "creation_date": 1466625090, "answer_id": 37977066, "question_id": 37977036, "link": "https://stackoverflow.com/questions/37977036/visual-studio-c-structure-on-github/37977066#37977066", "title": "Visual Studio C++ structure on Github", "body": "<p>VS doesn't create directories for you.  The view you see is \"filters\".  Organization on the disk is flat unless you tell it otherwise, and it's moderately painful.  The project on github will reflect the directory structure, not VS's \"filters\".</p>\n"}], "owner": {"reputation": 3485, "user_id": 5151542, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/769d9b79c6e6c0816befac50ca1981d7?s=128&d=identicon&r=PG&f=1", "display_name": "Zanko", "link": "https://stackoverflow.com/users/5151542/zanko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 37977066, "answer_count": 1, "score": -4, "last_activity_date": 1466626239, "creation_date": 1466624987, "last_edit_date": 1466626239, "question_id": 37977036, "link": "https://stackoverflow.com/questions/37977036/visual-studio-c-structure-on-github", "title": "Visual Studio C++ structure on Github", "body": "<p>Currently, my project structure of VS have filtered structure.\nBut my Github just have a single folder with all .cpp and .h inside it. How do I maintain the structure? </p>\n\n<p>Can't believe a massive wave of downvotes for something people can just simply share knowledge. I am new to visual studio.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 1102475, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b4a5f595716ef26e15aebd5a87f1878a?s=128&d=identicon&r=PG", "display_name": "r m", "link": "https://stackoverflow.com/users/1102475/r-m"}, "edited": false, "score": 0, "creation_date": 1466628509, "post_id": 37977075, "comment_id": 63401968, "body": "Adding inline works, but i&#39;m not fully understanding why. This is the only place I have defined this function, why does it violate the one definition rule?"}, {"owner": {"reputation": 656, "user_id": 1052689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80cf23b75055dc4831dbd9e5d63e508?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Korous", "link": "https://stackoverflow.com/users/1052689/jan-korous"}, "reply_to_user": {"reputation": 157, "user_id": 1102475, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b4a5f595716ef26e15aebd5a87f1878a?s=128&d=identicon&r=PG", "display_name": "r m", "link": "https://stackoverflow.com/users/1102475/r-m"}, "edited": false, "score": 0, "creation_date": 1466628588, "post_id": 37977075, "comment_id": 63402004, "body": "@rm Are you sure you are not including the file to different compilation units and linking those together later?"}, {"owner": {"reputation": 157, "user_id": 1102475, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b4a5f595716ef26e15aebd5a87f1878a?s=128&d=identicon&r=PG", "display_name": "r m", "link": "https://stackoverflow.com/users/1102475/r-m"}, "edited": false, "score": 0, "creation_date": 1466628859, "post_id": 37977075, "comment_id": 63402133, "body": "You&#39;re right, that&#39;s where the violation is occurring. Thanks"}], "tags": [], "owner": {"reputation": 656, "user_id": 1052689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80cf23b75055dc4831dbd9e5d63e508?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Korous", "link": "https://stackoverflow.com/users/1052689/jan-korous"}, "is_accepted": true, "score": 2, "last_activity_date": 1466629155, "last_edit_date": 1466629155, "creation_date": 1466625121, "answer_id": 37977075, "question_id": 37977002, "link": "https://stackoverflow.com/questions/37977002/operator-overloading-outside-of-a-class-in-a-namespace/37977075#37977075", "title": "Operator overloading outside of a class in a namespace", "body": "<p>You should define your <code>operator==()</code> as <code>inline</code> function if present in header file because you are very probably going to violate One Definition Rule.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/definition\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/definition</a> [One Definition Rule]</p>\n\n<blockquote>\n  <p>One and only one definition of every non-inline function or variable\n  that is odr-used (see below) is required to appear in the entire\n  program (including any standard and user-defined libraries). The\n  compiler is not required to diagnose this violation, but the behavior\n  of the program that violates it is undefined. </p>\n  \n  <p>For an inline function,\n  a definition is required in every translation unit where it is\n  odr-used.</p>\n</blockquote>\n\n<p>Basically there are bug categories how to violate ODR.</p>\n\n<ol>\n<li>Multiple definitions in single compilation unit. That's why we are using include guards in header files.</li>\n<li>No violation on compilation unit level but multiple compilation units containing the definition  that are linked together. (This case.)</li>\n</ol>\n\n<p>Fix is trivial:</p>\n\n<pre><code>namespace DirectX{\n    namespace PackedVector{\n        inline bool operator==(const DirectX::PackedVector::XMUBYTEN4 &amp; lhs, const DirectX::PackedVector::XMUBYTEN4 &amp; rhs) {\n            if (lhs.x == rhs.x &amp;&amp; lhs.y == rhs.y &amp;&amp; lhs.z == rhs.z &amp;&amp; lhs.w == rhs.w)\n                return true;\n            return false;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 1102475, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b4a5f595716ef26e15aebd5a87f1878a?s=128&d=identicon&r=PG", "display_name": "r m", "link": "https://stackoverflow.com/users/1102475/r-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "accepted_answer_id": 37977075, "answer_count": 1, "score": 3, "last_activity_date": 1466629155, "creation_date": 1466624888, "question_id": 37977002, "link": "https://stackoverflow.com/questions/37977002/operator-overloading-outside-of-a-class-in-a-namespace", "title": "Operator overloading outside of a class in a namespace", "body": "<p>I am trying to overload the comparison operator for a union class in a namespace to use it as a key in an unordered_map. </p>\n\n<p>x.h:</p>\n\n<pre><code>#include &lt;DirectXPackedVector.h&gt;\n\nnamespace std\n{\n    template&lt;&gt; struct hash&lt;DirectX::PackedVector::XMUBYTEN4&gt;\n    {\n        std::size_t operator()(DirectX::PackedVector::XMUBYTEN4 const&amp; s) const {\n            std::size_t const h1(std::hash&lt;uint8_t&gt;()(s.x));\n            std::size_t const h2(std::hash&lt;uint8_t&gt;()(s.y));\n            std::size_t const h3(std::hash&lt;uint8_t&gt;()(s.z));\n            std::size_t const h4(std::hash&lt;uint8_t&gt;()(s.w));\n            return h1 ^ (h2 &lt;&lt; 1) ^ (h3 &lt;&lt; 2) ^ (h4 &lt;&lt; 3);\n        }\n    };\n}\n\n    std::unordered_map&lt;DirectX::PackedVector::XMUBYTEN4, unsigned int&gt; mc_province_index;\n</code></pre>\n\n<p>The hashing works fine but when i try to overload the comparison operator like so:</p>\n\n<pre><code>bool operator==(const DirectX::PackedVector::XMUBYTEN4 &amp; lhs, const DirectX::PackedVector::XMUBYTEN4 &amp; rhs) {\n    if (lhs.x == rhs.x &amp;&amp; lhs.y == rhs.y &amp;&amp; lhs.z == rhs.z &amp;&amp; lhs.w == rhs.w)\n        return true;\n    return false;\n}\n</code></pre>\n\n<p>I get a </p>\n\n<pre><code>C2678: binary '==' : no operator found which takes a left-hand operand of type 'const DirectX::PackedVector::XMUBYTEN4' (or there is no acceptable conversion)\n</code></pre>\n\n<p>I tried doing it inside the namespace</p>\n\n<pre><code>namespace DirectX{\n    namespace PackedVector{\n        bool operator==(const DirectX::PackedVector::XMUBYTEN4 &amp; lhs, const DirectX::PackedVector::XMUBYTEN4 &amp; rhs) {\n            if (lhs.x == rhs.x &amp;&amp; lhs.y == rhs.y &amp;&amp; lhs.z == rhs.z &amp;&amp; lhs.w == rhs.w)\n                return true;\n            return false;\n        }\n    }\n}\n</code></pre>\n\n<p>but this gives me a LNK2005 saying it is already defined in object file.</p>\n\n<p>What am I doing wrong here and how can I overload this operator?</p>\n"}, {"tags": ["c++", "inheritance", "virtual"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5685392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1069448d550fea9add3bbcba84a80388?s=128&d=identicon&r=PG&f=1", "display_name": "forestgril", "link": "https://stackoverflow.com/users/5685392/forestgril"}, "edited": false, "score": 0, "creation_date": 1466669000, "post_id": 37976948, "comment_id": 63415827, "body": "Thank You. I think however this is not the answer I was looking for. My question is of an academic kind. I will try to ask the same again in a comment to a duplicate claim."}, {"owner": {"reputation": 61, "user_id": 5685392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1069448d550fea9add3bbcba84a80388?s=128&d=identicon&r=PG&f=1", "display_name": "forestgril", "link": "https://stackoverflow.com/users/5685392/forestgril"}, "edited": false, "score": 0, "creation_date": 1466670390, "post_id": 37976948, "comment_id": 63416702, "body": "Aha, I also have to admit, I do not understand, why the numbers in the program do not increase :( When I call Man(1000) in Son(1000), I would suppose, that call of Father(1000) would add 1000 to stories, and in Father&#39;s constructor, the call to Grandpa(1000) would add 1000 stories as well. So I expected 3000 stories in Father&#39;s case and 4000 stories in Son&#39;s. But all in all each derived classes constructor prints out only 2000 stories."}, {"owner": {"reputation": 61, "user_id": 5685392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1069448d550fea9add3bbcba84a80388?s=128&d=identicon&r=PG&f=1", "display_name": "forestgril", "link": "https://stackoverflow.com/users/5685392/forestgril"}, "edited": false, "score": 0, "creation_date": 1466671040, "post_id": 37976948, "comment_id": 63417136, "body": "Ok, I have responded myself to that in the next edit..."}], "tags": [], "owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "is_accepted": false, "score": 2, "last_activity_date": 1466624653, "creation_date": 1466624653, "answer_id": 37976948, "question_id": 37976835, "link": "https://stackoverflow.com/questions/37976835/why-a-rule-to-explicitly-call-a-virtual-base-class-constructor-in-initializer-li/37976948#37976948", "title": "Why a rule to explicitly call a virtual base class constructor in initializer list of a most derived class, when an older ancestor already has it?", "body": "<p>The call to the virtual base's constructor comes from the most-derived type of the object being created. In this case, that's <code>Son</code>, so <code>Son</code> needs to call <code>Man</code>'s constructor.</p>\n\n<p>However, it's also possible to create a <code>Father</code> that isn't actually a <code>Son</code> (e.g., <code>main</code> having <code>Father Dick(1000, 5)</code>). Because of that, <code>Father</code> might end up being the one to initialize <code>Man</code>, meaning it needs to call <code>Man</code>'s constructor. The same is true for <code>Grandpa</code>.</p>\n\n<p>If you make <code>Man</code>, <code>Grandpa</code>, and <code>Father</code> abstract classes, they can no longer possibly be the ones to initialize <code>Man</code>, and thus do not need a call to its constructor. However, GCC 6.1 gives me an error when I do this (Clang compiles it). I believe GCC to be wrong here.</p>\n"}], "owner": {"reputation": 61, "user_id": 5685392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1069448d550fea9add3bbcba84a80388?s=128&d=identicon&r=PG&f=1", "display_name": "forestgril", "link": "https://stackoverflow.com/users/5685392/forestgril"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "closed_date": 1496393815, "answer_count": 1, "score": 3, "last_activity_date": 1496393854, "creation_date": 1466624223, "last_edit_date": 1496393854, "question_id": 37976835, "link": "https://stackoverflow.com/questions/37976835/why-a-rule-to-explicitly-call-a-virtual-base-class-constructor-in-initializer-li", "closed_reason": "Duplicate", "title": "Why a rule to explicitly call a virtual base class constructor in initializer list of a most derived class, when an older ancestor already has it?", "body": "<p>The following code:</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nclass Man\n{\n    int stories;\n\npublic:\n    Man(int stories) : stories(stories) {cout &lt;&lt; \"A man is created with \" &lt;&lt; stories &lt;&lt; \" stories.\" &lt;&lt; endl;};\n};\n\nclass Grandpa : public virtual Man\n{\n    int pipes;\n\npublic:\n    Grandpa(int stories, int pipes) : Man(1000), pipes(pipes)\n    {\n        stories += stories;\n        cout &lt;&lt; \"Grandpa is created with \" &lt;&lt; stories &lt;&lt; \" stories and pipes.\" &lt;&lt; endl;\n    };\n};\n\nclass Father : public Grandpa\n{\n    int cars;\n\npublic:\n    Father(int stories, int cars) : Man(1000), Grandpa(1000, 1), cars(cars)\n    {\n        stories += stories;\n        cout &lt;&lt; \"Father is created with \" &lt;&lt; stories &lt;&lt; \" stories and cars.\" &lt;&lt; endl;\n    };\n};\n\nclass Son : public Father\n{\n    int girls;\n\npublic:\n    Son(int stories, int girls) : Man(1000), Father(1000, 3), girls(girls)\n    {\n        stories += stories;\n        cout &lt;&lt; \"Son is created with \" &lt;&lt; stories &lt;&lt; \" stories and girls.\" &lt;&lt; endl;\n    };\n};\n\nint main()\n{\n    Son Dick(1000, 5);\n    return 0;\n}\n</code></pre>\n\n<p>Gives the following output on the run:</p>\n\n<p><strong>A man is created with 1000 stories.</strong></p>\n\n<p><strong>Grandpa is created with 2000 stories and pipes.</strong></p>\n\n<p><strong>Father is created with 2000 stories and cars.</strong></p>\n\n<p><strong>Son is created with 2000 stories and girls.</strong></p>\n\n<p>And it does not compile, when I do not call Man(int) in Father's and Son's initializers' lists. It is trying to call Man(void), and Man() is not defined. Why is it so? Yet, I think, when Father's or Son's constructors were called, the virtual base's constructor had already been called in Grandpa! Moreover thus, I would expect the output to be:</p>\n\n<p><strong>A man is created with 1000 stories.</strong></p>\n\n<p><strong>Grandpa is created with 2000 stories and pipes.</strong></p>\n\n<p><strong>Father is created with 3000 stories and cars.</strong></p>\n\n<p><strong>Son is created with 4000 stories and girls.</strong></p>\n\n<p>To recapitulate then: why a virtual base class constructor has to be called explicitly in an initializer list of a derived class, although it is already placed in an younger's ancestor initializer list? Why it is seemingly not called in the younger ancestor, and a default base class is tried to be called instead?</p>\n\n<p><strong>EDIT due to finding an answer to problem with numbers</strong>\nWhat a shame :) I should have made <code>int stories</code> in Grandpa <code>protected int _stories;</code> and then the output would be as expected: 1000 stories for Man, 2000 for Grandpa, 3000 for Father and 4000 for Dick :) Otherwise <code>stories += stories</code> acts on local variable instead of the Man's member... Sorry for bothering!</p>\n"}, {"tags": ["c++", "opencv", "ffmpeg"], "owner": {"reputation": 11, "user_id": 4386020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b56e656462e56eef9a144917f5cb71?s=128&d=identicon&r=PG&f=1", "display_name": "marcassin22", "link": "https://stackoverflow.com/users/4386020/marcassin22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466623581, "creation_date": 1466623581, "question_id": 37976665, "link": "https://stackoverflow.com/questions/37976665/opencv-videocapture-interruption-callback", "title": "Opencv VideoCapture interruption callback", "body": "<p>I'm trying to add the fix referenced <a href=\"https://github.com/Itseez/opencv/pull/6053\" rel=\"nofollow\">here</a> to fix the timeout issue with an IP camera. </p>\n\n<p>As I understood, the fix was added with the new release of Opencv, but the ffmpeg binaries are not up to date. Thus the fix is ignored in the conditional compilation. </p>\n\n<p>The project linked in the comments of the above link fixes everything, but it doesn't generate the dll needed to use with Opencv (or I don't know how to..)</p>\n\n<p>I've tried to recompile Opencv with <a href=\"https://github.com/Itseez/opencv/compare/Itseez:master...alalek:ffmpeg_20160207?expand=1\" rel=\"nofollow\">this patch</a>, and then copied newly generated opencv_ffmpeg310_64.dll to my project. So far so good..</p>\n\n<p>Now, my project uses 2 cameras: one is avc, the other is mjpg. With the old opencv_ffmpeg310_64.dll file, both were working properly. With the new file, I get the warning \"could not find codec parameters\" and the mjpg camera never connects.</p>\n\n<p>So my guess would be that something went wrong while building Opencv with CMake? But I received no error in the process.</p>\n\n<p>I'm stuck here, and out of ideas on what to do next. Any help would be greatly appreciated.</p>\n\n<p>I'm using Windows 7 64 bit. IDE is Visual Studio 2013 and OpenCV 3.10.</p>\n"}, {"tags": ["c++", "boost", "mpi", "boost-mpi"], "comments": [{"owner": {"reputation": 32065, "user_id": 90002, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/717b51c0020d2a527975a5ee44026d12?s=128&d=identicon&r=PG", "display_name": "Phil Miller", "link": "https://stackoverflow.com/users/90002/phil-miller"}, "edited": false, "score": 0, "creation_date": 1466623305, "post_id": 37976538, "comment_id": 63399373, "body": "Boost is not an MPI implementation, it&#39;s just an interface wrapper to make it fit in better with C++. You want to be asking about specific MPI implementations, such as MPICH, OpenMPI, MVAPICH, Intel MPI, Cray, IBM, SGI, etc."}], "answers": [{"comments": [{"owner": {"reputation": 32065, "user_id": 90002, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/717b51c0020d2a527975a5ee44026d12?s=128&d=identicon&r=PG", "display_name": "Phil Miller", "link": "https://stackoverflow.com/users/90002/phil-miller"}, "reply_to_user": {"reputation": 107, "user_id": 6199827, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10208927311157072/picture?type=large", "display_name": "Mehrdad ", "link": "https://stackoverflow.com/users/6199827/mehrdad"}, "edited": false, "score": 0, "creation_date": 1466643171, "post_id": 37976613, "comment_id": 63406654, "body": "It does whatever the MPI library thinks will be most efficient. If the program is structured in a way that <code>MPI_Send</code> blocking can cause a deadlock, then that&#39;s a bug that should be fixed."}], "tags": [], "owner": {"reputation": 32065, "user_id": 90002, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/717b51c0020d2a527975a5ee44026d12?s=128&d=identicon&r=PG", "display_name": "Phil Miller", "link": "https://stackoverflow.com/users/90002/phil-miller"}, "is_accepted": false, "score": 1, "last_activity_date": 1466623371, "creation_date": 1466623371, "answer_id": 37976613, "question_id": 37976538, "link": "https://stackoverflow.com/questions/37976538/how-to-have-a-deadlock-scenario-with-boost-mpi-i-use-mpich-compiler/37976613#37976613", "title": "How to have a deadlock scenario with boost MPI (I use MPICH compiler)?", "body": "<p>The generally easiest way to force blocking behavior is to use larger messages that cause a switch to a so-called 'rendezvous' protocol, where the sender will wait for the recipient to post the matching receive operation before starting data transfer.</p>\n"}, {"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 2, "last_activity_date": 1466631914, "last_edit_date": 1466631914, "creation_date": 1466631613, "answer_id": 37978744, "question_id": 37976538, "link": "https://stackoverflow.com/questions/37976538/how-to-have-a-deadlock-scenario-with-boost-mpi-i-use-mpich-compiler/37978744#37978744", "title": "How to have a deadlock scenario with boost MPI (I use MPICH compiler)?", "body": "<p>Implementations may or may not complete <code>MPI_Send</code> before the recieve is posted. Your code is not a correct MPI application. It may deadlock with a specific message size, on a specific network, during full moon while it's raining.</p>\n\n<p>In practice it mostly depends on the message size as implementations commonly send small messages to preallocated buffers. There may be a tuning parameter depending on your implementation.</p>\n\n<p>MPI describes several communication modes. The default is <strong>blocking</strong><sup>1</sup> or <strong>standard</strong> mode, as described above. A <strong>synchronous</strong> send (<code>MPI_Ssend</code>) must wait for the receive to be posted. This will guarantee a deadlock.</p>\n\n<p>A <strong>buffered</strong> send (<code>MPI_Bsend</code>) must complete even if the recieve is not posted. In addition to the modes, there are <strong>nonblocking</strong> or <strong>immediate</strong> calls that will always complete locally, but may not copy the data yet. Both will guarantee no deadlock. However only the latter is supported by boost.MPI.</p>\n\n<p>1: <strong>blocking</strong> in the terminology only means that the call blocks until the send buffer can be reused. Either because it was sent, or because it was buffered locally. Also take a look at <a href=\"https://www.mpi-forum.org/docs/mpi-3.1/mpi31-report/node47.htm#Node47\" rel=\"nofollow\">the standard</a>. </p>\n"}], "owner": {"reputation": 107, "user_id": 6199827, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10208927311157072/picture?type=large", "display_name": "Mehrdad ", "link": "https://stackoverflow.com/users/6199827/mehrdad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 37978744, "answer_count": 2, "score": 0, "last_activity_date": 1466631914, "creation_date": 1466623107, "last_edit_date": 1466627406, "question_id": 37976538, "link": "https://stackoverflow.com/questions/37976538/how-to-have-a-deadlock-scenario-with-boost-mpi-i-use-mpich-compiler", "title": "How to have a deadlock scenario with boost MPI (I use MPICH compiler)?", "body": "<p>I am trying to find out in what cases a potentially blocking boost mpi \"send\" will actually block and causes a deadlock.</p>\n\n<pre><code>#include &lt;boost/mpi.hpp&gt;\n#include &lt;iostream&gt;\n\nint main(int argc, char *argv[])\n{\n  boost::mpi::environment env{argc, argv};\n  boost::mpi::communicator world;\n  if (world.rank() == 0)\n  {\n    char buffer[14];\n    const char *c = \"Hello, world from 1!\";\n    world.send(1, 1, c, 13);\n    std::cout &lt;&lt; \"1--11111\\n\";\n    world.send(1, 1, c, 13);\n    std::cout &lt;&lt; \"1--22222\\n\";\n    world.recv(1, 1, buffer, 13);\n    std::cout &lt;&lt; \"1--33333\\n\";\n    world.recv(1, 1, buffer, 13);\n    std::cout &lt;&lt; \"1--44444\\n\";\n     buffer[13] = '\\0';\n    std::cout &lt;&lt; buffer &lt;&lt; \"11 \\n\";\n  }\n  else\n  {\n    char buffer[14];\n    const char *c = \"Hello, world from 2!\";\n    world.send(0, 1, c, 13);\n    std::cout &lt;&lt; \"2--11111\\n\";\n    world.send(0, 1, c, 13);\n    std::cout &lt;&lt; \"2--22222\\n\";\n    world.recv(0, 1, buffer, 13);\n    std::cout &lt;&lt; \"2--33333\\n\";\n    world.recv(0, 1, buffer, 13);\n    std::cout &lt;&lt; \"2--44444\\n\";\n    buffer[13] = '\\0';\n    std::cout &lt;&lt; buffer &lt;&lt; \"22 \\n\";\n  }\n}\n</code></pre>\n\n<p>but it runs just fine and the with this order:</p>\n\n<pre><code>2--11111\n2--22222\n1--11111\n1--22222\n1--33333\n1--44444\nHello, world 11 \n2--33333\n2--44444\nHello, world 22\n</code></pre>\n\n<p>I will be grateful if someone could give me a scenario in which I have actually deadlock. \nHow does the potentially blocking boost mpi works?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "templates", "c++11", "variadic-templates"], "answers": [{"tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": false, "score": 0, "last_activity_date": 1466623670, "creation_date": 1466623670, "answer_id": 37976691, "question_id": 37976525, "link": "https://stackoverflow.com/questions/37976525/is-it-possible-to-interleave-parameter-packs/37976691#37976691", "title": "Is it possible to interleave parameter packs?", "body": "<p>Sure it's possible.  You can get two different packs via a wrapper:</p>\n\n<pre><code>template &lt; typename L0, typename L1 &gt;\nstruct interleave;\n\ntemplate &lt; typename ... Pack &gt;\nstruct pack {};\n\ntemplate &lt; typename ... P0, typename ... P1 &gt;\nstruct interleave&lt;pack&lt;P0...&gt;, pack&lt;P1...&gt;&gt;\n{\n   using type = ???;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1466626210, "post_id": 37976902, "comment_id": 63400840, "body": "Where are the two parameter packs? This looks like just a tuple interleaver."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1466626787, "post_id": 37976902, "comment_id": 63401129, "body": "@einpoklum Whatever parameter packs you have, just put them in tuples and then interleave the tuples."}], "tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": false, "score": 2, "last_activity_date": 1466624495, "creation_date": 1466624495, "answer_id": 37976902, "question_id": 37976525, "link": "https://stackoverflow.com/questions/37976525/is-it-possible-to-interleave-parameter-packs/37976902#37976902", "title": "Is it possible to interleave parameter packs?", "body": "<p>All the individual pieces for this have actually already been added to the standard.  I can't test this myself right now but the idea should work.</p>\n\n<pre><code>template &lt;class Tuple1, class Tuple2, std::size_t ... indices&gt;\nauto interleave(Tuple1 t1, Tuple2 t2, std::integer_sequence&lt;std::size_t, indices...&gt;)\n{\n    return std::tuple_cat(std::make_tuple(std::get&lt;indices&gt;(t1),\n                                          std::get&lt;indices&gt;(t2))...);\n}\n\n\ntemplate &lt;class Tuple1, class Tuple2&gt;\nauto interleave(Tuple1 t1, Tuple2 t2)\n{\n    return interleave(t1, t2, std::make_index_sequence&lt;std::tuple_size&lt;Tuple1&gt;::value&gt;());\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1466624635, "creation_date": 1466624635, "answer_id": 37976943, "question_id": 37976525, "link": "https://stackoverflow.com/questions/37976525/is-it-possible-to-interleave-parameter-packs/37976943#37976943", "title": "Is it possible to interleave parameter packs?", "body": "<pre><code>#include &lt;tuple&gt;\n#include &lt;iostream&gt;\n#include &lt;utility&gt;\n#include &lt;typeinfo&gt;\n\ntemplate&lt;class T1, class T2&gt;\nstruct interleave\n{\n  static constexpr std::size_t size = std::tuple_size&lt;T1&gt;::value;\n  static_assert(size == std::tuple_size&lt;T2&gt;::value, \"\"); \n\n  template&lt;class T&gt; struct impl;\n\n  template&lt;std::size_t...Is&gt;\n  struct impl&lt;std::index_sequence&lt;Is...&gt;&gt;\n  {\n    using type = std::tuple\n      &lt;\n      std::tuple&lt;std::tuple_element_t&lt;Is, T1&gt;,\n      std::tuple_element_t&lt;Is, T2&gt;&gt;...\n      &gt;;\n  };\n\n  template&lt;class T&gt; struct dedup;\n  template&lt;class...Ts&gt;\n    struct dedup&lt;std::tuple&lt;Ts...&gt;&gt;\n    {\n      using type = decltype(std::tuple_cat(std::declval&lt;Ts&gt;()...)); \n    };\n\n  using dups = typename impl&lt;decltype(std::make_index_sequence&lt;size&gt;())&gt;::type;\n\n  using type = typename dedup&lt;dups&gt;::type;\n};\n\n\nint main()\n{\n  using t = interleave&lt;std::tuple&lt;int, char, float&gt;, std::tuple&lt;unsigned, double, const char*&gt;&gt;::type;\n  std::cout &lt;&lt; typeid(t).name() &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1466660214, "post_id": 37977028, "comment_id": 63411164, "body": "I&#39;d mention <code>std::integer_sequence</code> is C++14."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1466660621, "post_id": 37977028, "comment_id": 63411337, "body": "@einpoklum Yes, it is, but you can find a C++11-implementation of it on the web, thus the solution still applies. Let me search it and integrate the answer. Can <a href=\"http://stackoverflow.com/questions/17424477/implementation-c14-make-integer-sequence\">this</a> help?"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1469744109, "post_id": 37977028, "comment_id": 64677859, "body": "@T.C. Right, it&#39;s known that way indeed. :-)"}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 2, "last_activity_date": 1469744543, "last_edit_date": 1469744543, "creation_date": 1466624963, "answer_id": 37977028, "question_id": 37976525, "link": "https://stackoverflow.com/questions/37976525/is-it-possible-to-interleave-parameter-packs/37977028#37977028", "title": "Is it possible to interleave parameter packs?", "body": "<p>With a function and a <code>decltype</code>s, you can easily do that.<br>\nHere is a working example:</p>\n\n<pre><code>#include&lt;tuple&gt;\n\ntemplate&lt;std::size_t... I&gt;\nconstexpr auto f(std::index_sequence&lt;I...&gt;, auto tup1, auto tup2) {\n    return std::tuple_cat(std::make_tuple(std::get&lt;I&gt;(tup1), std::get&lt;I&gt;(tup2))...);\n}\n\ntemplate&lt;typename... V&gt;\nstruct S {\n    template&lt;typename... U, std::enable_if_t&lt;(sizeof...(V) == sizeof...(U))&gt;* = nullptr&gt;\n    static auto generate() {\n        return f(std::make_index_sequence&lt;sizeof...(U)&gt;(), std::tuple&lt;V...&gt;{}, std::tuple&lt;U...&gt;{});\n    }\n};\n\nint main() {\n    static_assert(\n        std::is_same&lt;\n            decltype(S&lt;int, double&gt;::template generate&lt;char, void*&gt;()),\n            std::tuple&lt;int, char, double, void*&gt;\n        &gt;::value,\n        \"!\"\n    );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": false, "score": 0, "last_activity_date": 1466626811, "last_edit_date": 1466626811, "creation_date": 1466625286, "answer_id": 37977126, "question_id": 37976525, "link": "https://stackoverflow.com/questions/37976525/is-it-possible-to-interleave-parameter-packs/37977126#37977126", "title": "Is it possible to interleave parameter packs?", "body": "<p><strong>Aim:</strong></p>\n\n<p>Get a type alias to:</p>\n\n<pre><code>Foo&lt;int, double, char, const char*&gt;\n</code></pre>\n\n<p>using 2 parameter packs:</p>\n\n<pre><code>using Pack1 = Pack&lt;int, char&gt;;\nusing Pack2 = Pack&lt;double, const char*&gt;;\n</code></pre>\n\n<p>and then interleaving them:</p>\n\n<pre><code>typename ToFoo&lt;Pack1, Pack2&gt;::type\n</code></pre>\n\n<p>and performing a <code>static_assert</code> that they are equivalent:</p>\n\n<pre><code>using T1 = Foo&lt;int, double, char, const char*&gt;;\nusing T2 = typename ToFoo&lt;Pack&lt;int, char&gt;, Pack&lt;double, const char*&gt;&gt;::type;\n\nstatic_assert(std::is_same&lt;T1, T2&gt;::value, \"passed\");\n</code></pre>\n\n<p><strong>Solution:</strong></p>\n\n<p>We can interleave 2 tuples into 1 as follows:</p>\n\n<pre><code>template &lt;class Tuple1, class Tuple2, std::size_t ... indices&gt;\nauto interleave(Tuple1 t1, Tuple2 t2, std::integer_sequence&lt;std::size_t, indices...&gt;)\n{\n    return std::tuple_cat(std::make_tuple(std::get&lt;indices&gt;(t1),\n                                          std::get&lt;indices&gt;(t2))...);\n}\n\ntemplate &lt;class Tuple1, class Tuple2&gt;\nauto interleave(Tuple1 t1, Tuple2 t2)\n{\n    return interleave(t1, t2, std::make_index_sequence&lt;std::tuple_size&lt;Tuple1&gt;::value&gt;());\n}\n</code></pre>\n\n<p>We can get the type of the resulting interleaved tuple as follows:</p>\n\n<pre><code>template&lt;typename... Ts&gt;\nstruct Pack \n{\n    using type = std::tuple&lt;Ts...&gt;;\n};\n\ntemplate&lt;typename T0, typename T1&gt;\nstruct Interleaved;\n\ntemplate&lt;typename... P0, typename... P1&gt;\nstruct Interleaved&lt;Pack&lt;P0...&gt;, Pack&lt;P1...&gt;&gt;\n{\n    using Pack0 = typename Pack&lt;P0...&gt;::type;\n    using Pack1 = typename Pack&lt;P1...&gt;::type;\n\n    using type = decltype(interleave(std::declval&lt;Pack0&gt;(), std::declval&lt;Pack1&gt;()));\n};\n</code></pre>\n\n<p>We can then take that <code>std::tuple&lt;Ts...&gt;</code> type and \"convert\" it to <code>Foo&lt;Ts...&gt;</code> as follows:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct TupleToFoo;\n\ntemplate&lt;typename... Ts&gt;\nstruct TupleToFoo&lt;std::tuple&lt;Ts...&gt;&gt;\n{\n    using type = Foo&lt;Ts...&gt;;\n};\n</code></pre>\n\n<p>Finally we wrap it all up an a helper class <code>ToFoo</code> which takes 2 <code>Packs</code> and defines a type alias:</p>\n\n<pre><code>template&lt;typename T0, typename T1&gt;\nstruct ToFoo;\n\ntemplate&lt;typename... P0, typename... P1&gt;\nstruct ToFoo&lt;Pack&lt;P0...&gt;, Pack&lt;P1...&gt;&gt;\n{\n    using type = typename TupleToFoo&lt;typename Interleaved&lt;Pack&lt;int, char&gt;, Pack&lt;double, const char*&gt;&gt;::type&gt;::type;\n};\n</code></pre>\n\n<p>Full working example: (<a href=\"http://coliru.stacked-crooked.com/a/81a8703b174928a9\" rel=\"nofollow\">coliru</a>)</p>\n\n<pre><code>#include &lt;tuple&gt;\n\ntemplate &lt;class Tuple1, class Tuple2, std::size_t ... indices&gt;\nauto interleave(Tuple1 t1, Tuple2 t2, std::integer_sequence&lt;std::size_t, indices...&gt;)\n{\n    return std::tuple_cat(std::make_tuple(std::get&lt;indices&gt;(t1),\n                                          std::get&lt;indices&gt;(t2))...);\n}\n\ntemplate &lt;class Tuple1, class Tuple2&gt;\nauto interleave(Tuple1 t1, Tuple2 t2)\n{\n    return interleave(t1, t2, std::make_index_sequence&lt;std::tuple_size&lt;Tuple1&gt;::value&gt;());\n}\n\ntemplate&lt;typename... Ts&gt;\nstruct Pack \n{\n    using type = std::tuple&lt;Ts...&gt;;\n};\n\ntemplate&lt;typename T0, typename T1&gt;\nstruct Interleaved;\n\ntemplate&lt;typename... P0, typename... P1&gt;\nstruct Interleaved&lt;Pack&lt;P0...&gt;, Pack&lt;P1...&gt;&gt;\n{\n    using Pack0 = typename Pack&lt;P0...&gt;::type;\n    using Pack1 = typename Pack&lt;P1...&gt;::type;\n\n    using type = decltype(interleave(std::declval&lt;Pack0&gt;(), std::declval&lt;Pack1&gt;()));\n};\n\ntemplate&lt;typename... Ts&gt;\nstruct Foo \n{};\n\ntemplate&lt;typename T&gt;\nstruct TupleToFoo;\n\ntemplate&lt;typename... Ts&gt;\nstruct TupleToFoo&lt;std::tuple&lt;Ts...&gt;&gt;\n{\n    using type = Foo&lt;Ts...&gt;;\n};\n\ntemplate&lt;typename T0, typename T1&gt;\nstruct ToFoo;\n\ntemplate&lt;typename... P0, typename... P1&gt;\nstruct ToFoo&lt;Pack&lt;P0...&gt;, Pack&lt;P1...&gt;&gt;\n{\n    using type = typename TupleToFoo&lt;typename Interleaved&lt;Pack&lt;int, char&gt;, Pack&lt;double, const char*&gt;&gt;::type&gt;::type;\n};\n\n\nint main()\n{\n    using T1 = Foo&lt;int, double, char, const char*&gt;;\n    using T2 = typename ToFoo&lt;Pack&lt;int, char&gt;, Pack&lt;double, const char*&gt;&gt;::type;\n\n    static_assert(std::is_same&lt;T1, T2&gt;::value, \"passed\");\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 24673, "user_id": 2567683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1022957737/picture?type=large", "display_name": "Nikos Athanasiou", "link": "https://stackoverflow.com/users/2567683/nikos-athanasiou"}, "edited": false, "score": 0, "creation_date": 1466676588, "post_id": 37983898, "comment_id": 63421025, "body": "this only handles packs of equal length (any solution relying on paired pack expansion would have this limitation due to &#39;mismatched argument pack lengths while expanding&#39;). I&#39;d expect a solution that appends the types of the longest pack at the end and it seems it would take compile time integer sequences to achieve that. (+1 for the use of <code>t1</code> in the Demo)"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1466687180, "post_id": 37983898, "comment_id": 63428624, "body": "I was suspicious of this code... it doesn&#39;t look it it should compile, especially the <code>(Us, Vs)...</code> line. But it does, whaddaya know..."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 24673, "user_id": 2567683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1022957737/picture?type=large", "display_name": "Nikos Athanasiou", "link": "https://stackoverflow.com/users/2567683/nikos-athanasiou"}, "edited": false, "score": 0, "creation_date": 1466703707, "post_id": 37983898, "comment_id": 63440666, "body": "@NikosAthanasiou You just need a <code>split&lt;N, pack&lt;Ts...&gt;&gt;</code> if you want to support that. That in turn can be implemented either with integer sequences or simple recursion"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 2, "last_activity_date": 1466663629, "creation_date": 1466663629, "answer_id": 37983898, "question_id": 37976525, "link": "https://stackoverflow.com/questions/37976525/is-it-possible-to-interleave-parameter-packs/37983898#37983898", "title": "Is it possible to interleave parameter packs?", "body": "<p>Using <code>tuple_cat</code> is overkill. Not to mention unnecessarily constraining.</p>\n\n<p>Trivial pack class:</p>\n\n<pre><code>template&lt;class...&gt; struct pack {};\n</code></pre>\n\n<p>A variadic concat, fairly trivial to write:</p>\n\n<pre><code>template&lt;class T = pack&lt;&gt;, class...&gt; \nstruct concat { using type = T; };\n\ntemplate&lt;class... T1, class... T2, class... Ts&gt;\nstruct concat&lt;pack&lt;T1...&gt;, pack&lt;T2...&gt;, Ts...&gt; \n    : concat&lt;pack&lt;T1..., T2...&gt;, Ts...&gt; {};\n\ntemplate&lt;class... Ts&gt; \nusing concat_t = typename concat&lt;Ts...&gt;::type;\n</code></pre>\n\n<p>Then interleave itself is equally trivial - expand into pack of two types, then concatenate them:</p>\n\n<pre><code>template&lt;class... Us&gt;\nstruct interleave {\n     template&lt;class... Vs&gt;\n     using with = concat_t&lt;pack&lt;Us, Vs&gt;...&gt;;\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/860ddb343173ce52\" rel=\"nofollow\">Demo</a>.</p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1237, "favorite_count": 1, "answer_count": 6, "score": 4, "last_activity_date": 1469744543, "creation_date": 1466623047, "last_edit_date": 1466686673, "question_id": 37976525, "link": "https://stackoverflow.com/questions/37976525/is-it-possible-to-interleave-parameter-packs", "title": "Is it possible to interleave parameter packs?", "body": "<p>Is it possible, with C++11/14/1z, to have a templated construct with two parameter packs, and within it, instantiate some other templated construct with the two packs inteleaved? i.e. if the first pack is T1_1, T1_2, T1_3 and the second pack is T2_1, T2_2 and T2_3, the interleaved pack will be T1_1, T2_1, T1_2, T2_2, T1_3, T2_3? My guess would be \"no\", since an ellipsis should not be able to apply to two parameter pack element designators; but perhaps some kind of tuple-construction or recursive-instantiation trick could work?</p>\n\n<p><strong>Edit:</strong> Let me be explicit in assuming the packs have equal lengths (<code>sizeof...</code> values). A solution for packs of different lengths would be nice provided it doesn't make things much more convoluted.</p>\n"}, {"tags": ["c++", "qt", "dictionary", "qml"], "answers": [{"tags": [], "owner": {"reputation": 457, "user_id": 3755871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3MllR.jpg?s=128&g=1", "display_name": "Anarkopsykotik", "link": "https://stackoverflow.com/users/3755871/anarkopsykotik"}, "is_accepted": true, "score": 0, "last_activity_date": 1466765373, "last_edit_date": 1466765373, "creation_date": 1466753403, "answer_id": 38007914, "question_id": 37976512, "link": "https://stackoverflow.com/questions/37976512/how-to-add-poi-from-c-qt-code-on-a-qml-qtlocation-map/38007914#38007914", "title": "How to add PoI from C++ Qt code on a QML QtLocation map", "body": "<p>Alright, I managed to do it through a JS function in QML called from my code. Here are relevant parts :</p>\n\n<p>analyserq.cpp</p>\n\n<pre><code>    QObject *rootObj;\nanalyserQ::analyserQ(QWidget *parent)\n    : QWidget(parent)\n{\n    ui.setupUi(this);\n    QQuickView *view = new QQuickView();\n    QWidget *map = new QWidget();\n    QWidget *container = QWidget::createWindowContainer(view, map);\n    container-&gt;setMinimumSize(400, 450);\n    container-&gt;setMaximumSize(800, 800);\n    container-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);\n    container-&gt;setFocusPolicy(Qt::TabFocus  );\n    view-&gt;setSource(QUrl(\"map.qml\"));\n\n    button = new QPushButton(tr(\"&amp;Load...\"), this);\n    connect(button, &amp;QAbstractButton::clicked, this, &amp;analyserQ::loadPoI);\n\n\n    label = new QLabel(tr(\"Choix Trajets.\"), this);\n\n    liste = new QComboBox;\n    liste-&gt;setEditable(false);\n    liste-&gt;addItem(\"1\");\n\n    loadCombobox();\n\n    QGridLayout *mainLayout = new QGridLayout;\n    mainLayout-&gt;addWidget(button, 0, 0);\n    mainLayout-&gt;addWidget(map, 1, 0);\n\n    mainLayout-&gt;addWidget(label, 5, 0);\n\n    mainLayout-&gt;addWidget(liste, 5,1);\n\n\n    setLayout(mainLayout);\n    rootObj = view-&gt;rootObject();\n</code></pre>\n\n<p>[...]</p>\n\n<pre><code>void analyserQ::addPoI(QVariant latitude, QVariant longitude, QVariant type)\n{\n    QVariant returnedValue;\n\n    QMetaObject::invokeMethod(this-&gt;rootObj, \"addPoi\",\n        Q_RETURN_ARG(QVariant, returnedValue),\n        Q_ARG(QVariant, latitude), Q_ARG(QVariant, longitude), Q_ARG(QVariant, type));\n    qDebug() &lt;&lt; \"QML function returned:\" &lt;&lt; returnedValue.toString();\n}\n</code></pre>\n\n<p>map.qml</p>\n\n<pre><code>import QtQuick 2.0\nimport QtLocation 5.5\nimport QtPositioning 5.2\n\n\n\nRectangle {\n     anchors.fill: parent\n\n     Plugin{\n        id: osmplugin\n        name: \"osm\"\n    }\n    function addPoi(lat,longi,type) {\n            //console.log(\"Got message:\", lat);\n            //console.log(\"Got message:\", longi);\n            //console.log(\"Got message:\");\n            //var lat = lat;\n            var circle = Qt.createQmlObject('import QtLocation 5.3; MapCircle {   }', map, \"dynamic\");\n            if(circle == null) {\n               console.log(\"error creating object\" +  circle.errorString());\n               return false;\n            }\n            circle.center = QtPositioning.coordinate(lat, longi);\n            circle.radius = 500.0;\n\n            if(type == 0){\n                circle.color = 'blue';\n            }\n            else if(type == 1){\n                circle.color = 'yellow';\n            }\n            else if(type == 2){\n                circle.color = 'red';\n            }\n            else if(type == 3){\n                circle.color = 'green';\n            }\n            circle.border.width = 1;\n            map.addMapItem(circle);\n            map.center = QtPositioning.coordinate(lat, longi);\n            console.log(\"success creating object\");\n            return true;\n        }\n</code></pre>\n\n<p>Next step : making the PoIs clickable...</p>\n"}], "owner": {"reputation": 457, "user_id": 3755871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3MllR.jpg?s=128&g=1", "display_name": "Anarkopsykotik", "link": "https://stackoverflow.com/users/3755871/anarkopsykotik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1012, "favorite_count": 1, "accepted_answer_id": 38007914, "answer_count": 1, "score": 1, "last_activity_date": 1466765373, "creation_date": 1466622979, "last_edit_date": 1466667808, "question_id": 37976512, "link": "https://stackoverflow.com/questions/37976512/how-to-add-poi-from-c-qt-code-on-a-qml-qtlocation-map", "title": "How to add PoI from C++ Qt code on a QML QtLocation map", "body": "<p>Qt noob here. I'm trying to develop a desktop application with Qt5 that reads a json  with PoI gps coordinates and display them on a map.\nThe only native API that seemed able to do that easily was QtLocation, which is apparently QML only. Discovering about QML, I still managed to integrate a map in my code, and even a PoI if added directly to the QML, but I can't seem to be able to create them dynamically on the map from my C++ code, and I don't really get QML yet. I have tried various method but haven't really made any progress, so I'm doubting my approach of the problem.</p>\n\n<p>Here is what I have so far:</p>\n\n<p>main.cpp:</p>\n\n<pre><code>#include \"analyserq.h\"\n#include &lt;QtWidgets/QApplication&gt;\n#include &lt;QQuickView&gt;\n#include &lt;QQuickItem&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    analyserQ w;\n\n    w.show();\n    return a.exec();\n}\n</code></pre>\n\n<p>analyserq.h :</p>\n\n<pre><code>#ifndef ANALYSERQ_H\n\n#define ANALYSERQ_H\n\n#include &lt;QtWidgets/QWidget&gt;\n#include &lt;QtWidgets&gt;\n#include \"ui_analyserq.h\"\n#include &lt;QQuickView&gt;\n#include &lt;QQuickItem&gt;\n#include &lt;qqmlengine.h&gt;\n\nclass analyserQ : public QWidget\n{\n    Q_OBJECT\n\npublic:\n    analyserQ(QWidget *parent = 0);\n    ~analyserQ();\n\nprivate:\n    Ui::analyserQClass ui;\n    QPushButton *button;\nprivate slots:\n\n};\n\n#endif // ANALYSERQ_H\n</code></pre>\n\n<p>analyserq.cpp :</p>\n\n<pre><code>#include \"analyserq.h\"\n\nanalyserQ::analyserQ(QWidget *parent)\n    : QWidget(parent)\n{\n    ui.setupUi(this);\n    QQuickView *view = new QQuickView();\n    QWidget *map = new QWidget();\n    QWidget *container = QWidget::createWindowContainer(view, map);\n    container-&gt;setMinimumSize(200, 200);\n    container-&gt;setMaximumSize(200, 200);\n    container-&gt;setFocusPolicy(Qt::TabFocus  );\n    view-&gt;setSource(QUrl(\"map.qml\"));\n    button = new QPushButton(tr(\"&amp;Load...\"), this);\n\n    /*QQuickView *view2 = new QQuickView(); latest attempt. failed.\n    QWidget *poi = new QWidget();\n    QWidget *container2 = QWidget::createWindowContainer(view2, poi);\n    view2-&gt;setSource(QUrl(\"poi.qml\"));\n    container2-&gt;setParent(map);*/\n\n    QGridLayout *mainLayout = new QGridLayout;\n    mainLayout-&gt;addWidget(button, 0, 0);\n    mainLayout-&gt;addWidget(map, 3, 0);\n    setLayout(mainLayout);\n\n}\n\nanalyserQ::~analyserQ()\n{\n\n}\n</code></pre>\n\n<p>poi.qml:</p>\n\n<pre><code>MapCircle {\n            center {\n                latitude: 59.9485\n                longitude: 10.7686\n            }\n            radius: 50000.0\n            color: 'blue'\n            border.width: 3\n        }\n</code></pre>\n\n<p>map.qml:</p>\n\n<pre><code>import QtQuick 2.0\nimport QtLocation 5.5\n\nRectangle {\n     anchors.fill: parent\n\n     Plugin{\n        id: osmplugin\n        name: \"osm\"\n    }\n\n     Map {\n        anchors.fill: parent\n        id: map\n        plugin: osmplugin;\n        zoomLevel: (maximumZoomLevel - minimumZoomLevel)/2//16\n        center {\n            // The Qt Company in Oslo\n            latitude: 59.9485\n            longitude: 10.7686\n        }\n\n        MapCircle {\n            center {\n                latitude: 59.9485\n                longitude: 10.7686\n            }\n            radius: 500.0\n            color: 'green'\n            border.width: 3\n        }\n\n    }\n\n\n\n\n}\n</code></pre>\n\n<p>Edit : I am now trying to do it through a QML a function, but it's not working.\nI added a function addPoi to my map element, and trying to call it from c++ code. No more success so far.</p>\n\n<pre><code>function addPoi(latitude, longitude, type) {\n            console.log(\"Got message:\");\n            circle = Qt.createQmlObject('import QtLocation 5.3; MapCircle {  center{latitude: 59.9485; longitude: 10.7686} }', map, \"dynamic\");\n            if(circle == null) {\n               console.log(\"error creating object\" +  circle.errorString());\n            }\n\n            circle.radius = 5000.0;\n            circle.color = 'blue';\n            circle.border.width = 3;\n            map.addMapItem(circle);\n            return \"some return value\";\n        }\n</code></pre>\n\n<p>added in analyserq.cpp:</p>\n\n<pre><code>QMetaObject::invokeMethod(map, \"addPoi\",\n        Q_RETURN_ARG(QVariant, returnedValue),\n        Q_ARG(QVariant, latitude), Q_ARG(QVariant, longitude), Q_ARG(QVariant, type));\n    qDebug() &lt;&lt; \"QML function returned:\" &lt;&lt; returnedValue.toString();\n</code></pre>\n"}, {"tags": ["android", "c++", "windows", "android-ndk"], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 2936448, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c537d61dd3d3324664ad4e88f8579e07?s=128&d=identicon&r=PG&f=1", "display_name": "user2936448", "link": "https://stackoverflow.com/users/2936448/user2936448"}, "edited": false, "score": 0, "creation_date": 1466643125, "post_id": 37977065, "comment_id": 63406643, "body": "Thanks for your reply. I&#39;ve downloaded the NDK, I&#39;ve set the root folder in my PATH variable. I&#39;m trying to compile my program right now, but it&#39;s missing some headers? It says &quot;fatal error: iostream: No such file or directory #include &lt;iostream&gt;&quot; It also does the same with &lt;cassert&gt;. I am using the compiler(?) located here: toolchains\\arm-linux-androideabi-4.9\\prebuilt\\windows\\bin\\ar&zwnj;&#8203;m-linux-androideabi-&zwnj;&#8203;gcc-4.9. How do I fix this? Sorry if this is easy but I have genuinely no clue what to do and I&#39;ve been trying to research an answer for the last 20 minutes"}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1466668329, "post_id": 37977065, "comment_id": 63415434, "body": "@antlersoft Desktop Linux x86 binaries is not compatible and/or interchangeable with Android x86 ones. Regardess both systems uses linux kernel , there are few differences. First of all Android uses Bionic libc instead of Glibc and they are not 100% API compatible, then Android uses completely another interpreter for ELFs <code>&#47;system&#47;bin&#47;linker</code>, and desktop binaries even won&#39;t be loaded because there is no <code>&#47;lib&#47;ld-linux.so.2</code>. Also handheld devices may use ABI that differs from desktop devices ABI."}, {"owner": {"reputation": 14193, "user_id": 183203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf9ec57f64280ffe34ddd221d5c5151f?s=128&d=identicon&r=PG", "display_name": "antlersoft", "link": "https://stackoverflow.com/users/183203/antlersoft"}, "reply_to_user": {"reputation": 313, "user_id": 2936448, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c537d61dd3d3324664ad4e88f8579e07?s=128&d=identicon&r=PG&f=1", "display_name": "user2936448", "link": "https://stackoverflow.com/users/2936448/user2936448"}, "edited": false, "score": 0, "creation_date": 1466692700, "post_id": 37977065, "comment_id": 63433125, "body": "@user2936448 - From the error it sounds like you are not setting the right --sysroot flag on the compiler command line."}], "tags": [], "owner": {"reputation": 14193, "user_id": 183203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf9ec57f64280ffe34ddd221d5c5151f?s=128&d=identicon&r=PG", "display_name": "antlersoft", "link": "https://stackoverflow.com/users/183203/antlersoft"}, "is_accepted": false, "score": 0, "last_activity_date": 1466625485, "last_edit_date": 1466625485, "creation_date": 1466625086, "answer_id": 37977065, "question_id": 37976396, "link": "https://stackoverflow.com/questions/37976396/how-do-you-compile-a-c-console-program-to-run-as-an-android-process/37977065#37977065", "title": "How do you compile a C++ console program to run as an android process?", "body": "<p>I think the key statement is found on this page: <a href=\"http://www.aartbik.com/MISC/eng.html\" rel=\"nofollow\">UCI and XBoard Engines for Android</a></p>\n\n<blockquote>\n  <p>For x86-based Android devices (such as Google TV), any engine binary that has been compiled for 32-bit x86 Linux will work. This format is widely available for many chess engines. </p>\n</blockquote>\n\n<p>Which means that Chess for Android can use engines exactly as if they were compiled for Linux.  This isn't too surprising, since Android is based on Linux and has the native Linux APIs available.  Chess for Android is using these APIs to run the engines as normal Linux native executables.</p>\n\n<p>So if you have a 32-bit Linux x86 system and your Android device is an x86 device, just compile your engine on your Linux system as if you were using it locally and install it on your device according to the instructions on the page you linked.</p>\n\n<p>However, your Android device is probably not an x86 device, it is probably an ARM device.  In that case, you need a cross-compiler running on your computer that can compile it to a Linux executable targeting ARM (this is described briefly in the part you quoted).  The cross compiler will compile your code the same way a native compiler would, but the resulting executable will have machine instructions for the ARM chip rather than the x86 chip you have in your computer.</p>\n\n<p>Since you are (presumably) developing on Windows, it will probably be most convenient to use the Android NDK cross-compiler.  Install it according to its instructions (note that most of the instructions for actually using the NDK aren't relevant for you, since you are not creating native libraries for an Android application, you are creating an ordinary Linux executable)</p>\n\n<p>The NDK includes a gcc cross-compiler tool chain.  You will use this to build your native .exe.  Make sure your PATH contains the folder in the NDK containing the gcc compiler front-end.  Then if your engine source code is in a file call engine.cc, you should be able to compile it to an ARM binary with a command like</p>\n\n<pre><code>gcc -o MyUCIEngine engine.cc\n</code></pre>\n\n<p>You may have to set some more environment variables and the actual command to do the build will be more complex.  <a href=\"https://developer.android.com/ndk/guides/standalone_toolchain.html\" rel=\"nofollow\">This page</a> has the additional information you need for running the cross-compiling tool chain in the NDK.</p>\n"}, {"comments": [{"owner": {"reputation": 313, "user_id": 2936448, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c537d61dd3d3324664ad4e88f8579e07?s=128&d=identicon&r=PG&f=1", "display_name": "user2936448", "link": "https://stackoverflow.com/users/2936448/user2936448"}, "edited": false, "score": 0, "creation_date": 1466714307, "post_id": 37984391, "comment_id": 63446881, "body": "Thanks a bunch for the reply. Using your first method I was able to build an executable after hours of trial and error along with code correction. There was also another obnoxious error when trying to compile: I had to rename the /windows/ folder in /arm-linux-androideabi-4.9/prebuilt/ to /windows-x86_64/ because that&#39;s the directory the compiler wanted for some reason. My application is able to be loaded from his app, and I know it&#39;s working to some extent because it spits back my name as an author, but for some reason when I try to use the engine, it crashes, but that&#39;s a different problem."}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "reply_to_user": {"reputation": 313, "user_id": 2936448, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c537d61dd3d3324664ad4e88f8579e07?s=128&d=identicon&r=PG&f=1", "display_name": "user2936448", "link": "https://stackoverflow.com/users/2936448/user2936448"}, "edited": false, "score": 0, "creation_date": 1466744990, "post_id": 37984391, "comment_id": 63455479, "body": "@user2936448 If it crashes - first of all check device&#39;s logcat. It should contain crash log, that starts with <code>*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***</code> signature."}], "tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": false, "score": 4, "last_activity_date": 1466665326, "creation_date": 1466665326, "answer_id": 37984391, "question_id": 37976396, "link": "https://stackoverflow.com/questions/37976396/how-do-you-compile-a-c-console-program-to-run-as-an-android-process/37984391#37984391", "title": "How do you compile a C++ console program to run as an android process?", "body": "<p>You can build traditional console program for Android in two ways.</p>\n\n<ol>\n<li>Using of ndk-build system.</li>\n</ol>\n\n<p>You need to create two extra files: <code>Application.mk</code>:</p>\n\n<pre><code>APP_ABI := armeabi-v7a\nAPP_PLATFORM := android-16\nAPP_STL := stlport_static\nNDK_TOOLCHAIN_VERSION := 4.8\n</code></pre>\n\n<p><code>Android.mk</code>:</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := &lt;executable_name&gt;\nLOCAL_LDLIBS := -llog -lm # whatever libs you need\nLOCAL_CFLAGS := -O3 -UNDEBUG # so on\nLOCAL_C_INCLUDES := &lt;list of a non-standard header directories&gt;\nLOCAL_SRC_FILES := &lt;sources&gt;\ninclude $(BUILD_EXECUTABLE) # build executable instead of library\n</code></pre>\n\n<p>The former describes target ABIs, target android level, STL implementation and selects build toolchain. The latter is itself a simpe makefile, and it shouldn't be confusing. See <a href=\"https://developer.android.com/ndk/guides/build.html\" rel=\"nofollow\">here</a> for detais\nThen you can start build with next command:</p>\n\n<pre><code>$ ndk-build NDK_PROJECT_PATH=path/to/intermediate/results/dir NDK_LIBS_OUT=path/to/output/dir APP_BUILD_SCRIPT=path/to/Android.mk NDK_APPLICATION_MK=path/to/Application.mk\n</code></pre>\n\n<p>Also, note that <code>ndk-build</code> adds some flags by default. To check it - add <code>V=1</code> to above command line.</p>\n\n<ol start=\"2\">\n<li>Using of standalone toolchain.</li>\n</ol>\n\n<p>This approach may be useful if you already have build system for your project and you need only cross-compiler. To prepare standalone toochain run e.g next:</p>\n\n<pre><code>$NDK/build/tools/make-standalone-toolchain.sh --arch=arm --platform=android-21 --install-dir=/tmp/my-android-toolchain\n</code></pre>\n\n<p>And now export path to tools:</p>\n\n<pre><code>$ export PATH=/tmp/my-android-toolchain/bin:$PATH\n$ export CC=arm-linux-androideabi-gcc\n$ export CXX=arm-linux-androideabi-g++\n</code></pre>\n\n<p>More info <a href=\"https://developer.android.com/ndk/guides/standalone_toolchain.html\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 313, "user_id": 2936448, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c537d61dd3d3324664ad4e88f8579e07?s=128&d=identicon&r=PG&f=1", "display_name": "user2936448", "link": "https://stackoverflow.com/users/2936448/user2936448"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3531, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1466665326, "creation_date": 1466622539, "question_id": 37976396, "link": "https://stackoverflow.com/questions/37976396/how-do-you-compile-a-c-console-program-to-run-as-an-android-process", "title": "How do you compile a C++ console program to run as an android process?", "body": "<p>I wrote a chess engine in C++ which I want to compile to run on the app \"Chess for Android\". </p>\n\n<p>Here is an excerpt from a post from the author of the app who <a href=\"http://www.aartbik.com/MISC/uchess.html\" rel=\"noreferrer\">very very crudely</a> describes how to run a 3rd party chess engine on his app:</p>\n\n<blockquote>\n  <p>Finally, developers can do all development in C/C++ and generate stand-alone native code using the appropriate compiler toolchain (e.g. CodeSourcery for ARM or the toolchain that ships with the NDK). This third approach is used by Chess for Android to import engines that do not ship with the application.</p>\n</blockquote>\n\n<p>A chess engine is a straightforward program. The application runs, the user sends it commands, the program thinks, and will spit back a string with the details of the best move.</p>\n\n<p>I do NOT need an app with graphics or anything else. it's ONLY a process which is communicated with via stdin/stdout (via pipes really). The \"Chess for Android\" app takes care of talking to the process, I just need to figure out how in the world to get my engine as a process that can be run by the \"Chess for Android\" app.</p>\n"}, {"tags": ["c++", "visual-studio", "c++11", "casting", "visual-studio-2015"], "comments": [{"owner": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 0, "creation_date": 1538260780, "post_id": 37976395, "comment_id": 92082572, "body": "wow Well done. I have confirmed this to be true and MSVS 2017 doesn&#39;t have that enabled by default... Would you still recommend I enable this?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 1, "creation_date": 1538334624, "post_id": 37976395, "comment_id": 92097615, "body": "@Nik-Lz My recommendation would be to set this flag as it makes Visual C++ standard compliant in this regard."}, {"owner": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 1, "creation_date": 1538334876, "post_id": 37976395, "comment_id": 92097671, "body": "Yes, definitely. It broke a large project of mine, but thankfully the damage was minor and I just managed to fix it."}, {"owner": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 1, "creation_date": 1538827340, "post_id": 37976395, "comment_id": 92286416, "body": "I found out that starting with MSVS 2017 the <code>&#47;permissive</code> option which is enabled by default automatically enables <code>&#47;Zc:rvalueCast</code> and another option which makes compilation standard conforming. Therefore if you&#39;re compiling through the IDE this is no longer an issue. I didn&#39;t notice this before, but I did now so I&#39;ve come to report it."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 0, "creation_date": 1538946886, "post_id": 37976395, "comment_id": 92312733, "body": "@Nik-Lz Thank you so much for the update. Sadly I haven&#39;t had the opportunity to test the newer versions of Visual Studio at work :("}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1466681077, "post_id": 37976604, "comment_id": 63424112, "body": "So it seems like the &quot;Release&quot; Properties inherit from the &quot;Debug&quot; ones, but it looks like I will need to also edit &quot;Debug | x64&quot; &gt; &quot;Microsoft.Cpp.x64.user&quot; right?"}, {"owner": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1466713960, "post_id": 37976604, "comment_id": 63446728, "body": "@JonathanMee Yup. You could also create your own property sheet (like the Common_DefaultPropertySheet in my screenshot). It gives you more control, but you have to remember to include it in your projects"}], "tags": [], "owner": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "is_accepted": true, "score": 4, "last_activity_date": 1466623354, "last_edit_date": 1495535645, "creation_date": 1466623354, "answer_id": 37976604, "question_id": 37976395, "link": "https://stackoverflow.com/questions/37976395/default-visual-studio-project-settings-to-use-rvaluecast/37976604#37976604", "title": "Default Visual Studio Project Settings to Use &quot;rvalueCast&quot;", "body": "<p>Edit the microsoft.cpp.win32.user property sheet accordingly.</p>\n\n<p>To access it, open the property manager for your solution. (It's sometimes tricky to find the property manager - see <a href=\"https://stackoverflow.com/questions/10179201/cannot-find-property-manager-option-in-visual-studio-not-express-version\">this question</a>) Then, in the Property Manager, drill down, until you find the user property sheet as shown below. Then right-click and select Properties and edit any settings you like. After you're done, don't forget to save the property sheet (Right-click and select save)</p>\n\n<p><a href=\"https://i.stack.imgur.com/HEzyJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HEzyJ.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 37976604, "answer_count": 1, "score": 3, "last_activity_date": 1466623354, "creation_date": 1466622533, "last_edit_date": 1495540518, "question_id": 37976395, "link": "https://stackoverflow.com/questions/37976395/default-visual-studio-project-settings-to-use-rvaluecast", "title": "Default Visual Studio Project Settings to Use &quot;rvalueCast&quot;", "body": "<p>I've made a &lt;sarcasm&gt;shocking&lt;/sarcasam&gt; discovery: <a href=\"https://stackoverflow.com/q/37969114/2642059\">Visual Studio 2015 is not C++11 compliant by default</a></p>\n\n<p>I can follow the steps <a href=\"https://stackoverflow.com/questions/37969114/what-does-static-castt-do-to-a-t?noredirect=1#comment63397525_37969300\">I listed here</a> for each project, or use Notepad++ or similar to do a files replace, but I do notice that the \"Command Line\" Properties have a checkbox: \"Inherit from parent or project defaults\"</p>\n\n<p><a href=\"https://i.stack.imgur.com/OoCCZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OoCCZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is there a way to add \"/Zc:rvalueCast\" to my \"project defaults\" so everything will use it, including future projects?</p>\n"}, {"tags": ["c++", "makefile", "compilation", "header-files"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1466623263, "post_id": 37976258, "comment_id": 63399345, "body": "If your dependencies are set up correctly, the <code>make</code> program should compile again if any header or source file is modified."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1466624492, "post_id": 37976258, "comment_id": 63399951, "body": "@Thomas Matthews Obviously, dependencies are <i>not</i> configured correctly in this case."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466624743, "post_id": 37976258, "comment_id": 63400080, "body": "If you interpret the question as the OP wants to force a rebuild if a header file is changed, then it becomes a more interesting (or challenging) issue."}], "answers": [{"comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1466622365, "post_id": 37976320, "comment_id": 63398898, "body": "This should be a comment. It does not answer the question."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1466622770, "post_id": 37976320, "comment_id": 63399072, "body": "Thanks! I agree that OPs problem would likely be solved if they fixed their dependencies, however the core of the question is actually kind of interesting: If a .h file is changed, force a rebuild. This is something I don&#39;t know off-hand how to do, and would be interested in seeing someone answer. forcing a &quot;make clean&quot; before building is kind of a sledgehammer approach."}, {"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "edited": false, "score": 1, "creation_date": 1466624502, "post_id": 37976320, "comment_id": 63399957, "body": "everything (my answer included) is a sledgehammer approach. If dependencies aren&#39;t tracked properly, you basically have no option but to do a full rebuild."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 3, "last_activity_date": 1466622530, "last_edit_date": 1466622530, "creation_date": 1466622218, "answer_id": 37976320, "question_id": 37976258, "link": "https://stackoverflow.com/questions/37976258/changed-h-file-in-c-does-not-need-to-be-compiled-again/37976320#37976320", "title": "Changed .h file in C++ does not need to be compiled again?", "body": "<p>Sounds like your Makefile does not have dependencies configured correctly. That is what you should look into fixing.</p>\n\n<p>If you really want to just force a rebuild rather than fix the underlying problem. Then you can do a <code>make clean</code> before your <code>make all</code> or, if the Makefile does not have a \"clean\" target, delete all the generated object files and libs/executables and then run <code>make all</code> again.</p>\n"}, {"tags": [], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": false, "score": 2, "last_activity_date": 1466622332, "creation_date": 1466622332, "answer_id": 37976347, "question_id": 37976258, "link": "https://stackoverflow.com/questions/37976258/changed-h-file-in-c-does-not-need-to-be-compiled-again/37976347#37976347", "title": "Changed .h file in C++ does not need to be compiled again?", "body": "<p>You can force <code>make</code> to rebuild everything using the <code>--always-make</code> command line option. </p>\n\n<p>However, it sounds like you don't have your dependencies setup properly in your Makefile. If your code (.cpp files) actually include headers, then generally your target for compiling them should have a prerequisite on the header files that it includes.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1466624374, "post_id": 37976781, "comment_id": 63399883, "body": "Wouldn&#39;t just removing the executable and not the object files it is comprised of, just force a re-link, not a re-compile? Thus not solving the problem."}, {"owner": {"reputation": 861, "user_id": 1339735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c14e2c15dbcf0db2d57dc40a4880bdd?s=128&d=identicon&r=PG", "display_name": "Ruan Caiman", "link": "https://stackoverflow.com/users/1339735/ruan-caiman"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1466624669, "post_id": 37976781, "comment_id": 63400052, "body": "I was assuming a simpler compile as in my example, without intermediate object files.  Of course, yes, if only object files are in the dependency list, then it will just re-link."}], "tags": [], "owner": {"reputation": 861, "user_id": 1339735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c14e2c15dbcf0db2d57dc40a4880bdd?s=128&d=identicon&r=PG", "display_name": "Ruan Caiman", "link": "https://stackoverflow.com/users/1339735/ruan-caiman"}, "is_accepted": true, "score": 5, "last_activity_date": 1466623990, "creation_date": 1466623990, "answer_id": 37976781, "question_id": 37976258, "link": "https://stackoverflow.com/questions/37976258/changed-h-file-in-c-does-not-need-to-be-compiled-again/37976781#37976781", "title": "Changed .h file in C++ does not need to be compiled again?", "body": "<p>If you want your output to be updated when header files change, then you have to add it to your dependency statement:</p>\n\n<pre><code> myprogram: myprogram.cpp myprogam.h\n      c++ -o myprogram myprogram.cpp\n</code></pre>\n\n<p>Typically we don't do it this way because the code that does things stays in the cpp file.  If you are on unix and want to force a rebuild, just touch a cpp file to update its timestamp (forcing a rebuild) with \"touch myprogram.cpp\", for example, or delete your existing executable.</p>\n\n<p>If you are using make without a Makefile, letting it infer dependencies, it will probably not infer the header dependencies.  In this case, either blow away your executable or touch your source file.</p>\n"}, {"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 0, "last_activity_date": 1466626052, "last_edit_date": 1466626052, "creation_date": 1466625636, "answer_id": 37977208, "question_id": 37976258, "link": "https://stackoverflow.com/questions/37976258/changed-h-file-in-c-does-not-need-to-be-compiled-again/37977208#37977208", "title": "Changed .h file in C++ does not need to be compiled again?", "body": "<blockquote>\n  <p>Can I force the compiler to compile again even if I have only modified\n  the .h files?</p>\n</blockquote>\n\n<p>Yes ... but you probably want to improve your make (tool).</p>\n\n<p>What I do is to force the most recent compile of the file in question, where the command generated by make shows.</p>\n\n<p>Example:  </p>\n\n<blockquote>\n<pre><code># ... noise \n\ng++ -O3 -ggdb -std=c++14 -Wall -Wextra -Wshadow -Wnon-virtual-dtor -pedantic -Wcast-align -Wcast-qual -Wconversion -Wpointer-arith -Wunused -Woverloaded-virtual   -O0  lmbm101_11.cc -o lmbm101_11 -L../../bag -lbag_i686 -lnet_i686 -lposix_i686 -lzlib_i686 -lrt -pthread\n\n# ...  more noise.\n</code></pre>\n</blockquote>\n\n<p>To force a build, I highlight the \"command\" make created (starts with \"g++\", and resides between noise and more noise), and invoke it instead of make.</p>\n\n<p>This is trivial using emacs on Linux.  Might not be so easy on other systems.</p>\n\n<p>You might consider copying this command into the file, for future use.</p>\n\n<p>(  i.e. I bypass make until I choose to fix my make file.  )</p>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "edited": false, "score": 1, "creation_date": 1519903253, "post_id": 39731462, "comment_id": 85101315, "body": "Or you could do <code>SRCS = $(shell find . -name &#39;*.cpp&#39;)</code> to avoid manually listing the files."}, {"owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "reply_to_user": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "edited": false, "score": 1, "creation_date": 1520880214, "post_id": 39731462, "comment_id": 85488381, "body": "Works as long as your source files are all in the same folder/subfolders, AND you don&#39;t have any extra ones you don&#39;t necessarily want to compile. Often not the case for my projects, but would be better for some cases."}], "tags": [], "owner": {"reputation": 773, "user_id": 3841872, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/25942d11b0808ceebd7c4de253b4d4a7?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3841872/keith-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1576527559, "last_edit_date": 1576527559, "creation_date": 1474999408, "answer_id": 39731462, "question_id": 37976258, "link": "https://stackoverflow.com/questions/37976258/changed-h-file-in-c-does-not-need-to-be-compiled-again/39731462#39731462", "title": "Changed .h file in C++ does not need to be compiled again?", "body": "<p>There is a simpler way than the accepted answer. Simply add <code>-MD</code> to your compiler flags in your Makefile, and <code>-include myfile.d</code> at the end of the Makefile (listing all source files with a *.d extension instead). This will, respectively, generate and reference additional *.d dependency files in your build folder (wherever your *.o files go) when you <code>make</code>, so you do not need to explicitly add every single header file to your makefile dependencies.</p>\n\n<p>This is useful for projects with a long list of header files. Furthermore, this way, you know that you can't forget to include a header file in your Makefile dependencies, preventing troubleshooting time lost later when you think your binary updated when you changed a header file, but it actually didn't because you forgot to put it in the Makefile.</p>\n\n<p>For example, use  <code>gcc -MD -I. -c myfile.cpp -o obj/myfile.o</code>, and you can keep your Makefile dependencies as just <code>foo: myfile.cpp</code> without <code>myfile.h</code>.</p>\n\n<p>A shortcut way to do this so you only need to list all files once is something like the following:</p>\n\n\n\n<pre class=\"lang-bash prettyprint-override\"><code># Beginning of Makefile etc. etc.\n\n# Only need to list all files once, right here.\nSRCS = myfile.cpp myfile2.cpp\n\nOBJS = $(SRCS:%.cpp=%.o)\n\n# put .o and .d files in ./obj/\n# (Assumes 'obj' directory exists)\nFULLOBJS = $(addprefix obj/,$(OBJS))\n\n# rule to make object (*.o) files\n$(FULLOBJS): obj/%.o:%.cpp\n    gcc -MD -I. -c %&lt; -o $@\n\n# rule to make binary\nfoo: $(FULLOBJS)\n    g++ -o $@ $(FULLOBJS)\n\n# rule to clean (Note that it also deletes *.d files)\n.PHONY: clean\nclean:\n    rm -rf obj/*.o obj/*.d foo\n\n# include dependency files (*.d) if available\n-include $(FULLOBJS:%.o=%.d)\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 6471985, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e43135b7271cf44662dbedefd359b573?s=128&d=identicon&r=PG&f=1", "display_name": "Resorter", "link": "https://stackoverflow.com/users/6471985/resorter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7361, "favorite_count": 0, "accepted_answer_id": 37976781, "answer_count": 5, "score": 6, "last_activity_date": 1576527559, "creation_date": 1466621995, "last_edit_date": 1466622239, "question_id": 37976258, "link": "https://stackoverflow.com/questions/37976258/changed-h-file-in-c-does-not-need-to-be-compiled-again", "title": "Changed .h file in C++ does not need to be compiled again?", "body": "<p>I have the following question. After a successful compilation, if I compile it again after I only change some content in one of the .h files, the computer says:</p>\n\n<p>make: Nothing to be done for `all'.</p>\n\n<p>Can I force the compiler to compile again even if I have only modified the .h files?</p>\n"}, {"tags": ["c++", "pointers", "casting", "void-pointers"], "comments": [{"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 3, "creation_date": 1466621947, "post_id": 37976205, "comment_id": 63398651, "body": "What&#39;s wrong with <code>std::swap(a, b)</code>?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 3, "creation_date": 1466621995, "post_id": 37976205, "comment_id": 63398682, "body": "Void pointers should be avoided. Why are you using them?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466623457, "post_id": 37976205, "comment_id": 63399457, "body": "Are you talking about swapping the pointers or swapping the objects they point to?"}, {"owner": {"reputation": 53, "user_id": 3137127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5916b4d7831184e76f776b9e5d18584e?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/3137127/william"}, "edited": false, "score": 0, "creation_date": 1466623908, "post_id": 37976205, "comment_id": 63399670, "body": "Swapping the data/objects/bytes they point to"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1466624002, "post_id": 37976205, "comment_id": 63399704, "body": "watch out what you&#39;ve done here: <code>void* a = (void*)50;</code> this declares <code>a</code> as a pointer to <code>void</code> and points it at memory address 50. It doesn&#39;t store 50 at the address pointed to by <code>a</code>, it makes <code>a</code> point to data at address 50, and 50 is almost certainly not a valid address for use. Usually the first couple thousand addresses are verboten and never used because it makes trapping accidental null pointer accesses easier. <code>*a = *b;</code> then assigns the data at a bad memory address to the data at another bad memory address, and BOOM"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1466624286, "post_id": 37976205, "comment_id": 63399835, "body": "Try a test case:  <code>float f = 3.14f; char c = &#39;T&#39;; void * pf = (void *)&amp;f; void * pc = (void *)&amp;pc;</code>  You can&#39;t swap the objects that <code>pf</code> and <code>pc</code> point to because their target type info has been changed, yet they are both <code>void *</code> pointers."}], "answers": [{"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 7, "last_activity_date": 1466621964, "creation_date": 1466621964, "answer_id": 37976252, "question_id": 37976205, "link": "https://stackoverflow.com/questions/37976205/c-swap-content-of-two-void/37976252#37976252", "title": "C++ swap content of two void*", "body": "<p>No, that's not possible. In order to do such a thing, the information about the sizes of the objects pointed to by the two pointers would have to be present at runtime somewhere, which isn't the case. Furthermore, there are types that are not trivially copyable, and as such, swapping their bytes might not swap their values, and could cause undefined behaviour.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 4, "last_activity_date": 1466622491, "last_edit_date": 1466622491, "creation_date": 1466621988, "answer_id": 37976255, "question_id": 37976205, "link": "https://stackoverflow.com/questions/37976205/c-swap-content-of-two-void/37976255#37976255", "title": "C++ swap content of two void*", "body": "<blockquote>\n  <p>Is it possible to swap the content of two void pointers without knowing their \"original\" types?</p>\n</blockquote>\n\n<p>If you have no knowledge of the types then no, it is not possible. At the very least, you must know the size of the type. And that is sufficient only for <a href=\"http://en.cppreference.com/w/cpp/concept/TriviallyCopyable\" rel=\"nofollow\">trivially copyable</a> types.</p>\n"}], "owner": {"reputation": 53, "user_id": 3137127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5916b4d7831184e76f776b9e5d18584e?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/3137127/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 37976252, "answer_count": 2, "score": 0, "last_activity_date": 1466622491, "creation_date": 1466621818, "question_id": 37976205, "link": "https://stackoverflow.com/questions/37976205/c-swap-content-of-two-void", "title": "C++ swap content of two void*", "body": "<p>Is it possible to swap the content of two void pointers ? I tried swapping the values by dereferencing the two pointers: </p>\n\n<pre><code>void* a = (void*)50;\nvoid* b = (void*)90;\n*a = *b;\n</code></pre>\n\n<p>However, the last line throws an error since it's impossible to dereference a void pointer.</p>\n\n<p>I think it can be achieved by first casting the value of b to an int and then cast it back to a void* like this:</p>\n\n<pre><code>void* a = (void*)50;\nvoid* b = (void*)90;\n\nint value = (int)b;\na = (void*)value; //a now equals b\n</code></pre>\n\n<p>Unfortunately, that requires us to know what type a and b are \"supposed\" to be (I don't know if such a description is correct), in that case, they were ints. Is it possible to swap the content of two void pointers without knowing their \"original\" types ?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "math", "nan"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 4, "creation_date": 1466622167, "post_id": 37976131, "comment_id": 63398769, "body": "<a href=\"http://en.cppreference.com/w/cpp/numeric/fenv\" rel=\"nofollow noreferrer\">This page</a> has instructions at the bottom for enabling C++ exceptions to be thrown from floating-point environment exceptions (which you&#39;ll have to configure before they&#39;re raised)."}], "answers": [{"tags": [], "owner": {"reputation": 872, "user_id": 3975633, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Btk4H.png?s=128&g=1", "display_name": "samad montazeri", "link": "https://stackoverflow.com/users/3975633/samad-montazeri"}, "is_accepted": true, "score": 0, "last_activity_date": 1466676934, "last_edit_date": 1495542162, "creation_date": 1466676934, "answer_id": 37988729, "question_id": 37976131, "link": "https://stackoverflow.com/questions/37976131/c-create-actual-error-in-math-errors-instead-of-nan/37988729#37988729", "title": "c++: create actual error in math errors instead of nan", "body": "<p>Thanks to <a href=\"https://stackoverflow.com/users/962089/chris\">chris</a> here is a summery of <a href=\"http://en.cppreference.com/w/cpp/numeric/fenv\" rel=\"nofollow noreferrer\">math error handling</a>. </p>\n\n<p>These floating point exceptions are defined in <code>cfenv</code> header file: <code>FE_ALL_EXCEPT</code>, <code>FE_DIVBYZERO</code>, <code>FE_INEXACT</code>, <code>FE_INVALID</code>, <code>FE_OVERFLOW</code>, <code>FE_UNDERFLOW</code>. the names are self-explanatory.</p>\n\n<p>We can determine which of the specified subset of the floating point exceptions are currently set using <a href=\"http://en.cppreference.com/w/cpp/numeric/fenv/fetestexcept\" rel=\"nofollow noreferrer\">fetestexcept</a>. we can clear list of happened exceptions with <a href=\"http://en.cppreference.com/w/cpp/numeric/fenv/feclearexcept\" rel=\"nofollow noreferrer\">feclearexcept</a>.</p>\n\n<p>Below is a code, which shows how we can determine raised floating point exception:</p>\n\n<p>C++11 standard:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cfenv&gt;\n#include &lt;cmath&gt;\n\n#pragma STDC FENV_ACCESS ON\n\nvolatile double zero = 0.0; // volatile not needed where FENV_ACCESS is supported\nvolatile double one = 1.0;  // volatile not needed where FENV_ACCESS is supported\n\nint main()\n{\n    std::feclearexcept(FE_ALL_EXCEPT);\n    std::cout &lt;&lt;  \"1.0/0.0 = \" &lt;&lt; 1.0 / zero &lt;&lt; '\\n';\n    if(std::fetestexcept(FE_DIVBYZERO)) {\n        std::cout &lt;&lt; \"division by zero reported\\n\";\n    } else {\n        std::cout &lt;&lt; \"divsion by zero not reported\\n\";\n    }\n\n    std::feclearexcept(FE_ALL_EXCEPT);\n    std::cout &lt;&lt; \"1.0/10 = \" &lt;&lt; one/10 &lt;&lt; '\\n';\n    if(std::fetestexcept(FE_INEXACT)) {\n        std::cout &lt;&lt; \"inexact result reported\\n\";\n    } else {\n        std::cout &lt;&lt; \"inexact result not reported\\n\";\n    }\n\n    std::feclearexcept(FE_ALL_EXCEPT);\n    std::cout &lt;&lt; \"sqrt(-1) = \" &lt;&lt; std::sqrt(-1) &lt;&lt; '\\n';\n    if(std::fetestexcept(FE_INVALID)) {\n        std::cout &lt;&lt; \"invalid result reported\\n\";\n    } else {\n        std::cout &lt;&lt; \"invalid result not reported\\n\";\n    }\n}\n</code></pre>\n\n<p>In C99:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;float.h&gt;//for DBL_MIN and DBL_MAX\n#include &lt;fenv.h&gt;\n\n#pragma STDC FENV_ACCESS ON\nvoid show_fe_exceptions(void)\n{\n    printf(\"exceptions raised:\");\n    if(fetestexcept(FE_DIVBYZERO)) printf(\" FE_DIVBYZERO\");\n    if(fetestexcept(FE_INEXACT))   printf(\" FE_INEXACT\");\n    if(fetestexcept(FE_INVALID))   printf(\" FE_INVALID\");\n    if(fetestexcept(FE_OVERFLOW))  printf(\" FE_OVERFLOW\");\n    if(fetestexcept(FE_UNDERFLOW)) printf(\" FE_UNDERFLOW\");\n    feclearexcept(FE_ALL_EXCEPT);\n    printf(\"\\n\");\n}\n\nint main(void)\n{\n    printf(\"MATH_ERREXCEPT is %s\\n\",\n           math_errhandling &amp; MATH_ERREXCEPT ? \"set\" : \"not set\");\n\n    printf(\"0.0/0.0 = %f\\n\", 0.0/0.0);\n    show_fe_exceptions();\n\n    printf(\"1.0/0.0 = %f\\n\", 1.0/0.0);\n    show_fe_exceptions();\n\n    printf(\"1.0/10.0 = %f\\n\", 1.0/10.0);\n    show_fe_exceptions();\n\n    printf(\"sqrt(-1) = %f\\n\", sqrt(-1));\n    show_fe_exceptions();\n\n    printf(\"DBL_MAX*2.0 = %f\\n\", DBL_MAX*2.0);\n    show_fe_exceptions();\n\n    printf(\"nextafter(DBL_MIN/pow(2.0,52),0.0) = %.1f\\n\",\n                      nextafter(DBL_MIN/pow(2.0,52),0.0));\n    show_fe_exceptions();\n}\n</code></pre>\n"}], "owner": {"reputation": 872, "user_id": 3975633, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Btk4H.png?s=128&g=1", "display_name": "samad montazeri", "link": "https://stackoverflow.com/users/3975633/samad-montazeri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 37988729, "answer_count": 1, "score": 1, "last_activity_date": 1466676934, "creation_date": 1466621592, "question_id": 37976131, "link": "https://stackoverflow.com/questions/37976131/c-create-actual-error-in-math-errors-instead-of-nan", "title": "c++: create actual error in math errors instead of nan", "body": "<p>I have a very large code which is very hard to debug. on some occasions it gives <code>nan</code> for result.</p>\n\n<p>I know it is probably produced in a math error like <code>sqrt(-1)</code>. but i can't spot the error. If i could produce error in math errors, not nan, i'd be able to spot error very easily.</p>\n\n<p>Can i achieve this by defining a macro maybe? i think i saw some solution like this somewhere.</p>\n\n<p><strong>note</strong>: i don't want to use <code>if(isnan(res)) exit(0);</code> after each math operation.</p>\n"}, {"tags": ["c++", "macos", "homebrew", "hdf5"], "comments": [{"owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "edited": false, "score": 0, "creation_date": 1466622212, "post_id": 37976120, "comment_id": 63398801, "body": "These are linker errors -- what linker (or compiler) options have you given?"}, {"owner": {"reputation": 10578, "user_id": 756329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/53a4d0622387325b2c25401aa7e7c491?s=128&d=identicon&r=PG", "display_name": "Joseph Hansen", "link": "https://stackoverflow.com/users/756329/joseph-hansen"}, "reply_to_user": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "edited": false, "score": 0, "creation_date": 1466622362, "post_id": 37976120, "comment_id": 63398897, "body": "@Soren updated the question. I&#39;ve tried all sorts of things, but just the most basic h5c++ command gives the same error."}], "answers": [{"tags": [], "owner": {"reputation": 10578, "user_id": 756329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/53a4d0622387325b2c25401aa7e7c491?s=128&d=identicon&r=PG", "display_name": "Joseph Hansen", "link": "https://stackoverflow.com/users/756329/joseph-hansen"}, "is_accepted": true, "score": 2, "last_activity_date": 1469043310, "last_edit_date": 1469043310, "creation_date": 1467386273, "answer_id": 38148880, "question_id": 37976120, "link": "https://stackoverflow.com/questions/37976120/linker-problems-with-hdf5-c/38148880#38148880", "title": "Linker problems with HDF5 C++", "body": "<p>I discovered the problem when collaborating with some friends and using the verbose output from h5c++:</p>\n\n<pre><code>    h5c++ -v simple.cpp\n</code></pre>\n\n<p>I had installed the anaconda platform, which comes with HDF5. I'm not sure if the error is a result of a conflict between anaconda HDF5 and Homebrew HDF5, but using the Homebrew HDF5 executable fixes the problem.</p>\n\n<p>What I actually did was uninstall anaconda.</p>\n\n<p>(Alternatively, I could just fix my PATH bash variable to not include anaconda tools. In <code>~/.bash_profile</code>, the anaconda platform installation added a line that updates PATH to include its tools. Commenting out the line and restarting bash, or modifying PATH by hand stopped the conflict between versions of HDF5.)</p>\n"}], "owner": {"reputation": 10578, "user_id": 756329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/53a4d0622387325b2c25401aa7e7c491?s=128&d=identicon&r=PG", "display_name": "Joseph Hansen", "link": "https://stackoverflow.com/users/756329/joseph-hansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 833, "favorite_count": 0, "accepted_answer_id": 38148880, "answer_count": 1, "score": 3, "last_activity_date": 1469043310, "creation_date": 1466621558, "last_edit_date": 1467386043, "question_id": 37976120, "link": "https://stackoverflow.com/questions/37976120/linker-problems-with-hdf5-c", "title": "Linker problems with HDF5 C++", "body": "<p>I've started learning HDF5 and can't get passed the following issue with HDF5 C++.</p>\n\n<p>(Background info: I've installed hdf5 via Homebrew on OSX El Capitan. I've succeeded with a few programs using the generic C API and the Python module h5py, but the C++ API isn't working.)</p>\n\n<p>Here's an example of my command:</p>\n\n<pre><code>h5c++ simple.cpp\n</code></pre>\n\n<p>I try to compile but receive the following error:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"H5::H5File::H5File(...)\" ...\n  \"H5::CommonFG::createDataSet(...)\" ...\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<hr>\n\n<p>Other information:</p>\n\n<p>I include H5Cpp.h. I am under the impression it is the only file I need to include.</p>\n\n<p>At first, I thought C++ might not be enabled by default, despite what I read in the <a href=\"https://github.com/Homebrew/homebrew-science/blob/master/hdf5.rb\" rel=\"nofollow\">the Homebrew formula</a>. As a double-check, I uninstalled and re-installed with <code>--with-cxx</code> (obviously, that didn't work).</p>\n\n<p>What are these errors really telling me? Why doesn't my C++ HDF5 program work? Are there any tricks I should know about?</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1466622013, "post_id": 37976088, "comment_id": 63398690, "body": "actually I think you should rethink if overriding is really what you want, as <code>TSubclassOf&lt;AItem&gt;</code> and <code>TSubclassOf&lt;AWeapon&gt;</code> are two distinct types"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1510067558, "post_id": 37976088, "comment_id": 81272036, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19290796/override-member-field-in-derived-classes\">Override member field in derived classes</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1466622185, "post_id": 37976147, "comment_id": 63398785, "body": "Dang, this is basically what I was saying, but you beat me by 8 minutes. (I&#39;m slow at writing code :( )"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1466622323, "post_id": 37976147, "comment_id": 63398866, "body": "Nah, I&#39;m just teasing you. Good answer. :)"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1466622347, "post_id": 37976147, "comment_id": 63398887, "body": "@QPaysTaxes Thanks, you too :)"}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 9, "last_activity_date": 1466623204, "last_edit_date": 1466623204, "creation_date": 1466621630, "answer_id": 37976147, "question_id": 37976088, "link": "https://stackoverflow.com/questions/37976088/c-override-a-member-variable/37976147#37976147", "title": "C++ override a member variable", "body": "<p>By declaring <code>TSubclassof&lt;AWeapon&gt; ItemClass;</code> in the derived class, you are basically hiding <code>ItemClass</code> in the base class. So, it will look like you \"changed\" the type, but you didn't, only in the derived class will you see the new type variable.</p>\n\n<p>If you call a member function of the base class, which accesses <code>ItemClass</code>, it will use the \"old\" type variable.</p>\n\n<blockquote>\n  <p>If not, is it possible to hide a variable in a child class? i.e. I could hide ItemClass and create a new variable called WeaponClass.</p>\n</blockquote>\n\n<p>That's possible, you could declare <code>ItemClass</code> as a <code>private</code> variable, so that the derived class doesn't have access to it. Then when you can create <code>WeaponClass</code>, without there being a <code>ItemClass</code> in the derived class.</p>\n"}, {"tags": [], "owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "is_accepted": false, "score": 5, "last_activity_date": 1466622617, "last_edit_date": 1466622617, "creation_date": 1466622147, "answer_id": 37976295, "question_id": 37976088, "link": "https://stackoverflow.com/questions/37976088/c-override-a-member-variable/37976295#37976295", "title": "C++ override a member variable", "body": "<p>It depends, as many things do, on visibility. If <code>ItemClass</code> is <code>private</code>, then class <code>B</code> wouldn't even see it in the first place, so there's no chance whatsoever of a naming clash. If it's <code>protected</code>, then... things get a little complicated. It won't throw any errors, but you'll hide the name in the subclass, but not in the superclass. See this bit of code as an example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstruct message {\n    std::string the_message;\n    message() : the_message(\"default string\") {}\n    message(std::string a) : the_message(a) {}\n    virtual ~message() = default;\n\n    virtual void foo() { std::cout &lt;&lt; the_message &lt;&lt; std::endl; }\n};\n\nstruct message_sub : message {\n    int the_message;\n\n    message_sub(int a) : the_message(a) {}\n};\n\nint main(int, char**) {\n    message *a_message = new message_sub(12);\n    a_message-&gt;foo();\n    delete a_message;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/84259fe077f9d794\" rel=\"nofollow\">Try it online</a></p>\n\n<p>As you can see if you run it, the output is not <code>12</code>, as you might expect, but <code>default string</code>. That's because the superclass method <code>foo</code> will see things in <em>its</em> scope; i.e. it'll see the version whose name you're hiding in the subclass. The only way to fix this problem is to copy-and-paste <code>foo</code> into the subclass, and if it's not <code>virtual</code> in the subclass, there's no way to make it work.</p>\n\n<p>Because of this, I'd advise against whatever you're trying to do here; you can't write a default implementation that uses member variables of the subclasses, only those that exist in the superclass. Two variables with the same name but different types are different variables. If this is just wondering if you can safely name things whatever you want, yes, you can, especially if they're <code>private</code>.</p>\n"}], "owner": {"reputation": 3073, "user_id": 1833969, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/f2797faca4f6fbad015e6f935f72f35a?s=128&d=identicon&r=PG", "display_name": "Pectus Excavatum", "link": "https://stackoverflow.com/users/1833969/pectus-excavatum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7558, "favorite_count": 0, "accepted_answer_id": 37976147, "answer_count": 2, "score": 8, "last_activity_date": 1466623204, "creation_date": 1466621455, "question_id": 37976088, "link": "https://stackoverflow.com/questions/37976088/c-override-a-member-variable", "title": "C++ override a member variable", "body": "<p>This may be a silly question, but I was wondering if it is possible to override the type of a member variable as long as it is a child type.</p>\n\n<p>Basically I have a parent class A that has a variable like so:</p>\n\n<pre><code>TSubclassOf&lt;AItem&gt; ItemClass;\n</code></pre>\n\n<p>then in class B which extends class A I was wondering if I could change the type to a different one like so:</p>\n\n<pre><code>TSubclassOf&lt;AWeapon&gt; ItemClass;\n</code></pre>\n\n<p>where Weapon extends Item, so it is still a subclass of Item.</p>\n\n<p>Is this possible?</p>\n\n<p>If not, is it possible to hide a variable in a child class? i.e. I could hide ItemClass and create a new variable called WeaponClass.</p>\n\n<p>Thanks in advance for the help</p>\n"}, {"tags": ["c++", "c", "windows", "debugging", "winapi"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466626926, "post_id": 37976044, "comment_id": 63401194, "body": "@alk: If those were soft/hard links, they&#39;d be user-visible."}, {"owner": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1466629557, "post_id": 37976044, "comment_id": 63402470, "body": "@alk, These are not links."}, {"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "edited": false, "score": 1, "creation_date": 1466641105, "post_id": 37976044, "comment_id": 63406154, "body": "<code>dumpbin &#47;imports winword.exe</code> suggests that Office 2016 is using App-V"}, {"owner": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "reply_to_user": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "edited": false, "score": 0, "creation_date": 1466670666, "post_id": 37976044, "comment_id": 63416891, "body": "@theB, How does process explorer get the correct path?"}], "answers": [{"comments": [{"owner": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "edited": false, "score": 0, "creation_date": 1466686103, "post_id": 37992055, "comment_id": 63427783, "body": "will it be available only within the visualized process or other processes will be able to call it as well?"}, {"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "reply_to_user": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "edited": false, "score": 1, "creation_date": 1466686867, "post_id": 37992055, "comment_id": 63428369, "body": "I ran my test of that code in an independent scratch C++ conole application, without injecting a thread into the process. My install is a little different from yours, so there may be some unaccounted for edge cases, but it appears from experiments that Process Explorer is using this method, and all of the DLLs I get are physically present where reported."}, {"owner": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "edited": false, "score": 0, "creation_date": 1466687329, "post_id": 37992055, "comment_id": 63428724, "body": "Thank you dude. You really helped me"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1466691104, "post_id": 37992055, "comment_id": 63431841, "body": "Unrelated, but I am kind of shocked that Office is now using App-V. I can&#39;t think of a good reason why, can you? Probably something to do with licensing... Remember when Office used to be a suite of useful apps for doing productivity work?"}, {"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1466693035, "post_id": 37992055, "comment_id": 63433374, "body": "@CodyGray The only thing I can think of is that they&#39;re using App-V to abstract away the wierdness that comes from being both a store app and a shrinkwrap product. That said, I still think its a complicated solution to the problem. I&#39;d have thought just adding a module loader that uses an appropriately altered DLL search path would be enough."}, {"owner": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "edited": false, "score": 0, "creation_date": 1466977615, "post_id": 37992055, "comment_id": 63526887, "body": "@theB, just tested your code and it did not manage to find those DLLs on 2016 office. Then I saw your side comment and realized you experienced the same issue. Do you know any possible way to overcome it?"}], "tags": [], "owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "is_accepted": true, "score": 3, "last_activity_date": 1466685939, "creation_date": 1466685939, "answer_id": 37992055, "question_id": 37976044, "link": "https://stackoverflow.com/questions/37976044/getting-processs-loaded-modules-which-does-not-really-exist/37992055#37992055", "title": "Getting process&#39;s loaded modules which does not really exist", "body": "<p>Office 2016 is using App-V to redirect and virtualize some of its paths. This complicates finding the DLLs a bit. Process Explorer is using a slightly more complicated<sup>1</sup> method for finding the DLLs. In general the process is:</p>\n\n<ol>\n<li>Create a Tool Help 32 snapshot, with the <code>TH32CS_SNAPMODULE</code> and <code>TH32CS_SNAPMODULE32</code> flags.</li>\n<li>Use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684218.aspx\" rel=\"nofollow\"><code>Module32First</code></a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684221.aspx\" rel=\"nofollow\"><code>Module32Next</code></a> to obtain information about the modules in the process.</li>\n<li>To resolve symbolic links, which on my Office 2016 are present for the App-V dlls, open the file, and use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa364962.aspx\" rel=\"nofollow\"><code>GetFinalPathNameByHandle</code></a> to obtain the resolved path. (Note this will be the path including the leading <code>\\\\?\\</code> but that's easy enough to remove.)</li>\n</ol>\n\n<p>An example implementation:</p>\n\n<pre><code>// Obtain the Process ID however you like. I used GetWindowThreadProcessId.\nif (processId != 0)\n{\n    HANDLE snapshot = CreateToolhelp32Snapshot(TH32CS_SNAPMODULE | TH32CS_SNAPMODULE32, processId);\n    if (snapshot != INVALID_HANDLE_VALUE)\n    {\n        MODULEENTRY32W moduleInfo = { 0 };\n        moduleInfo.dwSize = sizeof(MODULEENTRY32W);\n\n        BOOL ok = Module32FirstW(snapshot, &amp;moduleInfo);\n        if (!ok)\n        {\n            // The read failed, handle the error here.\n        }\n        do\n        {\n            HANDLE hFile = CreateFileW(moduleInfo.szExePath, \n                                       0, \n                                       FILE_SHARE_READ | FILE_SHARE_WRITE | FILE_SHARE_DELETE, \n                                       NULL, \n                                       OPEN_EXISTING, \n                                       FILE_ATTRIBUTE_NORMAL, \n                                       NULL);\n            if (hFile)\n            {\n                WCHAR realPath[MAX_PATH];\n                DWORD result = GetFinalPathNameByHandleW(hFile, \n                                                         realPath, \n                                                         MAX_PATH, \n                                                         FILE_NAME_NORMALIZED);\n                if (result &gt; 0)\n                {\n                    wcout &lt;&lt; L\"Module: \" &lt;&lt; realPath &lt;&lt; endl;\n                }\n\n                CloseHandle(hFile);\n            }\n            else\n            {\n                wcout &lt;&lt; L\"Module Name: \" &lt;&lt; moduleInfo.szExePath &lt;&lt; endl;\n            }\n        } while (Module32NextW(snapshot, &amp;moduleInfo));\n\n        CloseHandle(snapshot);\n    }\n}\n</code></pre>\n\n<p><em><sup>1</sup> Note that Process Explorer was written by Sysinternals, and may be using lower level information. This method does resolve the DLLs on my 2016 install.</em></p>\n"}], "owner": {"reputation": 552, "user_id": 6500775, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ce0d9d9a1e41be439a231c5674e5298?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/6500775/aviv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1411, "favorite_count": 4, "accepted_answer_id": 37992055, "answer_count": 1, "score": 3, "last_activity_date": 1466685939, "creation_date": 1466621293, "last_edit_date": 1466641072, "question_id": 37976044, "link": "https://stackoverflow.com/questions/37976044/getting-processs-loaded-modules-which-does-not-really-exist", "title": "Getting process&#39;s loaded modules which does not really exist", "body": "<p>While examining Microsoft Word's loaded modules, I came across something very strange. I wrote a little program to output the location of all of the loaded DLLs. Here is the output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2eWRp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2eWRp.png\" alt=\"Loaded modules using snapshot&#39;s WinApi\"></a></p>\n\n<p>When I try to find these modules on my PC, I couldn't find them at the given location, but in another location:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6iemB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6iemB.png\" alt=\"The DLL&#39;s actual location\"></a></p>\n\n<p>I couldn't figure out why the paths of the DLLs are different, and I couldn't find anything related to it in Google either, although I suspect it has something to do with the VFS thing.</p>\n\n<p>That said, somehow Process Explorer manages to display the DLL's original location.</p>\n\n<p>Can someone tell me how Process Explorer does that, and how I can achieve the same result in my code?</p>\n\n<p><strong><em>--------------- EDIT ----------------</em></strong></p>\n\n<ol>\n<li><p>I have also tried to inject a DLL and walk the LDR of WINWORD but still I can't see the original DLLs location.</p></li>\n<li><p>Sysinternal's ListDlls utility doesn't show the original DLLs location also.\nAs for now, only Process Explorer shows the right location.</p></li>\n</ol>\n"}, {"tags": ["android", "c++", "android-ndk"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5578711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b3c2424b3efe70d63060a12a3b63a75?s=128&d=identicon&r=PG&f=1", "display_name": "desperado_98", "link": "https://stackoverflow.com/users/5578711/desperado-98"}, "edited": false, "score": 0, "creation_date": 1466645543, "post_id": 37976415, "comment_id": 63407228, "body": "there is no way than asset_manager?   other method is not exist?"}], "tags": [], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": false, "score": 0, "last_activity_date": 1466622605, "creation_date": 1466622605, "answer_id": 37976415, "question_id": 37976023, "link": "https://stackoverflow.com/questions/37976023/i-wonder-why-asset-managerandroid-ndk-have-no-interface-to-traverse-directory/37976415#37976415", "title": "I wonder why asset_manager(android ndk) have no interface to traverse directory", "body": "<p>The AssetManager provides access to a resource bundle. It is not a directory structured data storage, like a traditional file system, therefore, it has no API methods dealing with directories.</p>\n"}], "owner": {"reputation": 21, "user_id": 5578711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b3c2424b3efe70d63060a12a3b63a75?s=128&d=identicon&r=PG&f=1", "display_name": "desperado_98", "link": "https://stackoverflow.com/users/5578711/desperado-98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466622605, "creation_date": 1466621217, "question_id": 37976023, "link": "https://stackoverflow.com/questions/37976023/i-wonder-why-asset-managerandroid-ndk-have-no-interface-to-traverse-directory", "title": "I wonder why asset_manager(android ndk) have no interface to traverse directory", "body": "<p>Currently I am coding with android NDK and C++.</p>\n\n<p>But I could not understand why asset_manager have no interface to traverse directory.\n<a href=\"https://developer.android.com/ndk/reference/group___asset.html\" rel=\"nofollow\">here interface</a></p>\n\n<p>I wanna get file names from directory recursively.</p>\n\n<p>but </p>\n\n<p>AAssetManager_openDir\nAAssetDir_getNextFileName </p>\n\n<p>function get only file  except directory.</p>\n\n<p>How to get all filename from directory and subdirectory recursively?</p>\n"}, {"tags": ["c++", "poco-libraries"], "comments": [{"owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "edited": false, "score": 1, "creation_date": 1466621202, "post_id": 37975982, "comment_id": 63398263, "body": "You should paste your real code. You&#39;ve got at least one typo (is it <code>startTime</code> vs <code>mStartTime</code>). And paste the real error message, including the line number."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1466635032, "post_id": 37975982, "comment_id": 63404542, "body": "Perhaps this would be easier with <code>&lt;chrono&gt;</code>?"}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1466785695, "post_id": 37975982, "comment_id": 63478005, "body": "Howard: I looked up chrono and it looks as a good candidate for this."}], "answers": [{"comments": [{"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1466785493, "post_id": 37987881, "comment_id": 63477876, "body": "Perfect! Key was to create a new TimeSpan object  and use that for comparison. You would think that subtracting or adding two timestamps would give a timespan object as an result automatically, but not."}], "tags": [], "owner": {"reputation": 296, "user_id": 5428056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/184ec09dd88ed40b477bbf551a6dd3c1?s=128&d=identicon&r=PG", "display_name": "Patricklaf", "link": "https://stackoverflow.com/users/5428056/patricklaf"}, "is_accepted": true, "score": 1, "last_activity_date": 1466674906, "creation_date": 1466674906, "answer_id": 37987881, "question_id": 37975982, "link": "https://stackoverflow.com/questions/37975982/poco-timestamps-and-timespans/37987881#37987881", "title": "Poco TimeStamps and Timespans", "body": "<p>This works with <code>Poco::Timespan</code>:</p>\n\n<pre><code>bool isTimedOut()\n{\n    Poco::Timestamp now;\n    Poco::Timespan timeElapsed(now - startTime);\n    if( timeElapsed &gt; timeOutTime)\n    {\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1992, "favorite_count": 1, "accepted_answer_id": 37987881, "answer_count": 1, "score": 0, "last_activity_date": 1466674906, "creation_date": 1466621042, "last_edit_date": 1466623284, "question_id": 37975982, "link": "https://stackoverflow.com/questions/37975982/poco-timestamps-and-timespans", "title": "Poco TimeStamps and Timespans", "body": "<p>I'm trying to use Poco time classes to calculate some timing in my program. I want to detect a time out in a thread. </p>\n\n<p>I'm creating first a timespan denoting my timout time, a timestamp for when the thread was started, and a check for if the current timespan is larger than the timeout time, i.e.</p>\n\n<pre><code>Poco::Timestamp startTime;\nPoco::Timespan timeOutTime(60*Poco::Timespan::SECONDS); // 60s timeout\n</code></pre>\n\n<p>I want to check for the timeout in a timer function:</p>\n\n<pre><code>bool Process::isTimedOut()\n{\n    Timestamp now;\n    if((now - startTime) &gt; timeOutTime)\n    {\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n}\n</code></pre>\n\n<p>However, the check for timeout in the above if statement do not compile: saying illegal structure operation.</p>\n\n<p>Any clues on how to use these poco classes?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 1, "creation_date": 1466620936, "post_id": 37975795, "comment_id": 63398121, "body": "are you asking if functions such as this will be added to the standard library?"}, {"owner": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "edited": false, "score": 0, "creation_date": 1466620987, "post_id": 37975795, "comment_id": 63398146, "body": "Are you talking about compile time or run time evaluation of your functional programming? In the case above I&#39;d guess reasonable compilers will evaluate that during compile time. That isn&#39;t new with C++17 (except the <code>auto</code> return value)."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 3, "creation_date": 1466621134, "post_id": 37975795, "comment_id": 63398232, "body": "Just because something looks like something you know from functional programming doesn&#39;t mean that&#39;s what it is or why it is being added. Being able to expand parameter packs through expressions like this is not a feature that was added for the sake of being more functional."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1466622343, "post_id": 37975795, "comment_id": 63398884, "body": "This will not be added to C++17 AFAIK. It was part of Concepts and I highly doubt they will get in."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 2, "creation_date": 1466622785, "post_id": 37975795, "comment_id": 63399078, "body": "@chris: Fold expressions are not part of concepts. And they were already voted into C++17 (though they are undergoing modifications)."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1466622843, "post_id": 37975795, "comment_id": 63399105, "body": "@NicolBolas, My mistake. I tied them more closely because fold expressions were primarily introduced to support Concepts. It&#39;s good to see them going in separately."}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 0, "creation_date": 1466624309, "post_id": 37975795, "comment_id": 63399847, "body": "You can fake this with tuples, you just need to put <code>...</code> in a tuple and define the operators you&#39;d like (in a templated manner for both sides)."}, {"owner": {"reputation": 3649, "user_id": 294569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c97ccc8981952c53fa09dadfafb132?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/294569/damian"}, "edited": false, "score": 0, "creation_date": 1468250146, "post_id": 37975795, "comment_id": 64037661, "body": "Pattern matching from FP [this] (<a href=\"https://isocpp.org/blog/2016/07/cppcon-2015-simple-extensible-pattern-matching-in-cpp14-john-r.-bandela\" rel=\"nofollow noreferrer\">isocpp.org/blog/2016/07/&hellip;</a>)"}], "owner": {"reputation": 3649, "user_id": 294569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c97ccc8981952c53fa09dadfafb132?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/294569/damian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 712, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1466621161, "creation_date": 1466620414, "last_edit_date": 1466621161, "question_id": 37975795, "link": "https://stackoverflow.com/questions/37975795/functional-programming-in-c17", "title": "Functional programming in C++17", "body": "<p>Some of the functional programming (FP) paradigm will be added in C++17. This code folds the product function over the input values, to print the product of all the numbers.</p>\n\n<pre><code>template&lt;typename... T&gt;\nauto fold_mul(T... t){\n    return (t * ...);\n}\n</code></pre>\n\n<p>usage</p>\n\n<pre><code>cout &lt;&lt; fold_mul(1, 2, 3, 4, 5) &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Does anyone know if there are plans to expand this <em>higher order functions</em> and <em>no side-effects</em> like a fully featured FP language?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1466620417, "post_id": 37975726, "comment_id": 63397827, "body": "You have to link your executable with this lib. The linkage process may depend on your compiler, but it&#39;s mainly done by passing <code>-Lpath&#47;to&#47;lib</code> -lYourLib` or <code>YourLib.a</code> to the compiler"}, {"owner": {"reputation": 325, "user_id": 3196293, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1040298947/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/3196293/david"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1466620515, "post_id": 37975726, "comment_id": 63397877, "body": "It is linked with #pragma comment( lib, &quot;libname.lib&quot; )"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1466623631, "post_id": 37975726, "comment_id": 63399536, "body": "@David 1) you should have shown/told us that. 2) that&#39;s a terrible way to do it - that info belongs in your build system, not in individual source files."}], "owner": {"reputation": 325, "user_id": 3196293, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1040298947/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/3196293/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483812270, "creation_date": 1466620214, "last_edit_date": 1483812270, "question_id": 37975726, "link": "https://stackoverflow.com/questions/37975726/compile-c-console-application-with-command-line-arguments-as-static-lib", "title": "Compile c++ console application with command-line arguments as static lib", "body": "<p>I'm trying to call the main function from a statically linked library. </p>\n\n<pre><code> char *args[] = {\n   \"foo.exe\", \"--argument\", NULL\n };\n staticLibMainFunction(sizeof args / sizeof args[0], args);\n</code></pre>\n\n<p>The function in the lib header is declared like</p>\n\n<pre><code>extern int staticLibMainFunction(int argc, char *argv[]);\n</code></pre>\n\n<p>But I get an Error => \"unresolved external symbol \"int __cdecl staticLibMainFunction(int,char * * const)\"</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "boost", "ifstream"], "comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 4, "creation_date": 1466620342, "post_id": 37975690, "comment_id": 63397788, "body": "What toolchain are you using?  What is the command line used to build the program?  Does it repo if the posted code is simply wrapped in a  <code>main()</code> (with <code>filename</code> initialized appropriately)?  If not, can you post a MCVE? Can you post a link to the actual data file?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 1, "creation_date": 1466621065, "post_id": 37975690, "comment_id": 63398196, "body": "Inexplicable errors detected by the malloc implementation are nearly always caused by an out-of-bounds access, double-free, use-after-free, or other memory corruption error that occurred <i>some time earlier in the program execution</i>."}, {"owner": {"reputation": 87, "user_id": 4563826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10152711599666169/picture?type=large", "display_name": "sam", "link": "https://stackoverflow.com/users/4563826/sam"}, "edited": false, "score": 0, "creation_date": 1466622082, "post_id": 37975690, "comment_id": 63398731, "body": "Thanks for your attention! Please see the edits. So far i haven&#39;t been able to reproduce the problem in a small example, but i&#39;ll keep trying"}], "owner": {"reputation": 87, "user_id": 4563826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10152711599666169/picture?type=large", "display_name": "sam", "link": "https://stackoverflow.com/users/4563826/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 554, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466630541, "creation_date": 1466620045, "last_edit_date": 1466630541, "question_id": 37975690, "link": "https://stackoverflow.com/questions/37975690/unusual-malloc-assertion-error-while-using-c-ifstream-caused-by-boostbimap", "title": "Unusual malloc assertion error while using c++ ifstream caused by boost::bimap", "body": "<p>I'm very curious why I'm getting a <code>malloc</code> error here:</p>\n\n<pre><code>ifstream infile (filename);\n\nunsigned count=0; // TODO testing only\ndo {\n    string s;\n    infile &gt;&gt; s;  &lt;-- fails here at word 858\n} while( ++count &lt; 10000 );\n</code></pre>\n\n<p>error:</p>\n\n<pre><code>malloc.c:3695: _int_malloc: Assertion `(unsigned long) (size) &gt;= (unsigned long) (nb)' failed.\nAborted\n</code></pre>\n\n<p>This code is reading in newline-delimited words. It fails when it hits the 858th word, which is <em>achromobacterieae</em>. At 17, it's the first word longer than 15 characters, but other than that I can't see any sign of the problem.</p>\n\n<p>EDIT:</p>\n\n<p>The object containing this code uses boost's bimap. If I change the <code>Bimap</code> <code>typedef</code> from this</p>\n\n<pre><code>typedef boost::bimap&lt; boost::bimaps::unordered_set_of&lt;unsigned&gt;, boost::bimaps::unordered_set_of&lt;std::string&gt; &gt; Bimap;\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>typedef boost::bimap&lt; unsigned, string &gt; Bimap;\n</code></pre>\n\n<p>the error disappears. </p>\n\n<p>At the risk of being verbose, here's the complete header file:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;vector&gt;\n#include&lt;unordered_map&gt;\n\n#include&lt;boost/bimap.hpp&gt;\n#include&lt;boost/bimap/unordered_set_of.hpp&gt;\n\n#include\"board.h\"\n\nusing namespace std;\n\ntypedef unordered_map&lt;unsigned, vector&lt;unsigned&gt; &gt; Referencemap;\n// typedef boost::bimap&lt; boost::bimaps::unordered_set_of&lt;unsigned&gt;, boost::bimaps::unordered_set_of&lt;string&gt; &gt; Bimap;\ntypedef boost::bimap&lt;unsigned, string&gt; Bimap;\n\nclass Words {\n  public:\n    Referencemap referencemap;\n    Bimap reference;\n\n  public:\n    Words(char* filename, Board* b);\n\n  private:\n    void addToStringmap(const string&amp; s);\n};\n</code></pre>\n\n<p>The variables <code>referencemap</code> and <code>reference</code> are only declared, never used.</p>\n"}, {"tags": ["c++", "multithreading", "boost-geometry"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1466664347, "post_id": 37975646, "comment_id": 63412979, "body": "what methods are you using now? Why is this question tagged boost?"}, {"owner": {"reputation": 91, "user_id": 4673961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3117ca42bb09c11602f28958f509798b?s=128&d=identicon&r=PG&f=1", "display_name": "A.I.", "link": "https://stackoverflow.com/users/4673961/a-i"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1466688205, "post_id": 37975646, "comment_id": 63429421, "body": "I tagged boost, because boost is what I&#39;m using to get the convex hull and the intersection area"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1466688327, "post_id": 37975646, "comment_id": 63429535, "body": "It would be nice to know how. Why is there no code at all."}, {"owner": {"reputation": 91, "user_id": 4673961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3117ca42bb09c11602f28958f509798b?s=128&d=identicon&r=PG&f=1", "display_name": "A.I.", "link": "https://stackoverflow.com/users/4673961/a-i"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1466688749, "post_id": 37975646, "comment_id": 63429889, "body": "I didn&#39;t think it was relevant, and there is a lot of code. I tagged boost to only indicate the software package I&#39;m using (ie. that I haven&#39;t coded this myself). What would you like to see?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1466689403, "post_id": 37975646, "comment_id": 63430399, "body": "Literally what I just asked. Right now you&#39;re simply suggesting &quot;I have magic code XXX - trust me, it&#39;s good code!&quot; and asking &quot;can you make [it] faster&quot;. We&#39;re not in the code-writing business. Right now I feel it&#39;s silly for me to even spend time to think how I&#39;d approach it and tell you, because... you know, all you might say is &quot;Yeah thanks, that&#39;s what I&#39;m using&quot;. Without a status quo it&#39;s impossible to give directions."}, {"owner": {"reputation": 91, "user_id": 4673961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3117ca42bb09c11602f28958f509798b?s=128&d=identicon&r=PG&f=1", "display_name": "A.I.", "link": "https://stackoverflow.com/users/4673961/a-i"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1466781237, "post_id": 37975646, "comment_id": 63475411, "body": "I&#39;ve posted some code, but just to clarify, I&#39;m asking for suggestions on how to improve efficiency conceptually. I&#39;m not asking how to make my code faster, i&#39;m asking if there&#39;s a faster approach than computing the intersection between polygons using boost knowing that I&#39;ve narrowed down the number of candidates for the intersection calculations. Or in other words, what kinds of approximations can I use to get less accurate results faster."}], "answers": [{"tags": [], "owner": {"reputation": 4584, "user_id": 102715, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b540e45840e65f0389905d7ab6e35a47?s=128&d=identicon&r=PG", "display_name": "S.C. Madsen", "link": "https://stackoverflow.com/users/102715/s-c-madsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1466620499, "creation_date": 1466620499, "answer_id": 37975828, "question_id": 37975646, "link": "https://stackoverflow.com/questions/37975646/suggestions-to-compute-the-intersetions-of-multiple-convex-2d-polygons/37975828#37975828", "title": "Suggestions to Compute the Intersetions of Multiple Convex 2D Polygons", "body": "<p>Hm, the problem seems similar to doing \"collision-detection\" i game-engines. Or \"potentially visible sets\". </p>\n\n<p>While I don't know much about the current state-of-the-art, i remember an optimization was to enclose objects in spheres, since checking overlaps between spheres (or circles in 2D) is really cheap.\nIn order to speed-up checks for collisions, objects were often put into search-structures (e.g. a sphere-tree (circle-tree in 2D case)). Basically organizing the space into a hierarchical structure, to make queries for overlaps fast.</p>\n\n<p>So basically my suggestion boils down to: Try looking at algorithms for collision-detection i game-engines.</p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 4673961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3117ca42bb09c11602f28958f509798b?s=128&d=identicon&r=PG&f=1", "display_name": "A.I.", "link": "https://stackoverflow.com/users/4673961/a-i"}, "edited": false, "score": 0, "creation_date": 1466622060, "post_id": 37975846, "comment_id": 63398718, "body": "I like this idea, and in fact I&#39;ve considered it. Here&#39;s a question: would this provide an approximation of the intersection area as opposed to an exact number? Ie the finest bounding box would decide the approximation of the intersection area?"}, {"owner": {"reputation": 4581, "user_id": 2791577, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rFnoU.png?s=128&g=1", "display_name": "keith", "link": "https://stackoverflow.com/users/2791577/keith"}, "edited": false, "score": 0, "creation_date": 1466623270, "post_id": 37975846, "comment_id": 63399349, "body": "You test the bounding boxes, if they overlap then you do the full polygon test. There&#39;s no approximation about it, the results are the same."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5454506"}, "edited": false, "score": 0, "creation_date": 1466624028, "post_id": 37975846, "comment_id": 63399717, "body": "I can see that idea being useful somewhere A.I.. But I don&#39;t think you would get a good approximation unless the data was randomly distributed and you had multiple sets of data to perform an average on. If the data is not random there are too many factors that could cause the approximation to be wildly different.  As Keith pointed out, the huge advantage of the Axis Aligned Bounding Box (AABB) is that it gives you an easy calculation to short circuit your way out of the complex one."}, {"owner": {"reputation": 91, "user_id": 4673961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3117ca42bb09c11602f28958f509798b?s=128&d=identicon&r=PG&f=1", "display_name": "A.I.", "link": "https://stackoverflow.com/users/4673961/a-i"}, "edited": false, "score": 0, "creation_date": 1466627318, "post_id": 37975846, "comment_id": 63401391, "body": "The issue is that I&#39;m already doing bounding boxes, and like I pointed out above in my question I am already narrowing down the number of M polygons to K&lt;&lt;M (more efficiently than bounding boxes since there&#39;s a known projection geometry). The issue is: can I find a very efficient way to compute an (approximation) of the area of intersecting polygons?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5454506"}, "edited": false, "score": 0, "creation_date": 1466627856, "post_id": 37975846, "comment_id": 63401658, "body": "Okay. I understand now. I&#39;m not sure exactly how, but I&#39;ll make another post for and idea about how to do that."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5454506"}, "is_accepted": false, "score": 0, "last_activity_date": 1466620902, "last_edit_date": 1466620902, "creation_date": 1466620558, "answer_id": 37975846, "question_id": 37975646, "link": "https://stackoverflow.com/questions/37975646/suggestions-to-compute-the-intersetions-of-multiple-convex-2d-polygons/37975846#37975846", "title": "Suggestions to Compute the Intersetions of Multiple Convex 2D Polygons", "body": "<p><strong>Assumption</strong>\nI'm assuming that you mean \"intersections\" and not intersection. Moreover, It is not the expected use case that most of the individual polys from <code>M</code> and <code>N</code> will overlap at the same time. If this assumption is true then:</p>\n\n<p><strong>Answer</strong></p>\n\n<p>The way this is done with 2D game engines is by having a scene graph where every object has a bounding box. Then place all the the polygons into a node in an quadtree according to their location determined by bounding box. Then the task becomes parallel because each node can be processed separately for intersection.</p>\n\n<p>Here is the wiki for quadtree:</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Quadtree\" rel=\"nofollow\">Quadtree Wiki</a></p>\n\n<p>An octree could be used when in 3D.</p>\n\n<p>It actually doesn't even have to be a octree. You could get the same results with any space partition. You could find the maximum separation of polys (lets call it <code>S</code>). And create say <code>S/10</code> space partitions. Then you would have 10 separate spaces to execute in parallel. Not only would it be concurrent, but It would no longer be <code>M * N</code> time since not every poly must be compared against every other poly.</p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 4673961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3117ca42bb09c11602f28958f509798b?s=128&d=identicon&r=PG&f=1", "display_name": "A.I.", "link": "https://stackoverflow.com/users/4673961/a-i"}, "edited": false, "score": 1, "creation_date": 1466688381, "post_id": 37977942, "comment_id": 63429577, "body": "I thought about this, and I like it. I have to think about the details a bit more, but this is seems quite reasonable. I think I&#39;ll accept this as a solution. I&#39;ll post an update once I implement it."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5454506"}, "is_accepted": true, "score": 1, "last_activity_date": 1466629047, "last_edit_date": 1466629047, "creation_date": 1466628316, "answer_id": 37977942, "question_id": 37975646, "link": "https://stackoverflow.com/questions/37975646/suggestions-to-compute-the-intersetions-of-multiple-convex-2d-polygons/37977942#37977942", "title": "Suggestions to Compute the Intersetions of Multiple Convex 2D Polygons", "body": "<p>You could create the ratio of polygon to bounding box:</p>\n\n<p>This could be done computationally once to arrive at an avgerage poly area to BB ratio <code>R</code> constant.\nOr you could do it with geometry using a circle bounded by its BB Since your using only projected polyhedron:</p>\n\n<pre><code>R = 0.0;\ncount = 0;\nfor (each poly) {\n    count++;\n    R += polyArea / itsBoundingBoxArea;\n}\nR = R/count;\n</code></pre>\n\n<p>Then calculate the summation of intersection of bounding boxes.</p>\n\n<pre><code>Sbb = 0.0;\nfor (box1, box2 where box1.isIntersecting(box2)) {\n  Sbb += box1.intersect(box2);\n}\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>Approximation = R * Sbb\n</code></pre>\n\n<p>All of this would not work if concave polys were allowed. Because a concave poly can occupy less than 1% of it's bounding box. You will still have to find the convex hull.</p>\n\n<p>Alternatively, If you can find the polygons area quicker than its hull, you could use the actual computed average poly area. This would give you a decent approximation as well while avoiding both poly intersection and wrapping.</p>\n"}], "owner": {"reputation": 91, "user_id": 4673961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3117ca42bb09c11602f28958f509798b?s=128&d=identicon&r=PG&f=1", "display_name": "A.I.", "link": "https://stackoverflow.com/users/4673961/a-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 37977942, "answer_count": 3, "score": 1, "last_activity_date": 1466885323, "creation_date": 1466619882, "last_edit_date": 1466885323, "question_id": 37975646, "link": "https://stackoverflow.com/questions/37975646/suggestions-to-compute-the-intersetions-of-multiple-convex-2d-polygons", "title": "Suggestions to Compute the Intersetions of Multiple Convex 2D Polygons", "body": "<p>I am writing this question fishing for any state-of-the-art software or methods that can quickly compute the intersection of <code>N</code> 2D polygons (the convex hulls of projected convex polyhedrons), and <code>M</code> 2D polygons where typically <code>N &gt;&gt; M</code>. <code>N</code> may be in the order or at least 1M polygons and <code>N</code> in the order 50k. I've searched for some time now, but I keep coming up with the same answer shown below.</p>\n\n<p>Use boost and a loop to</p>\n\n<ol>\n<li>compute the projection of the polyhedron (not the bottleneck)</li>\n<li>compute the convex hull of said polyhedron (bottleneck)</li>\n<li>compute the intersection of the projected polyhedron and existing 2D polygon (major bottleneck).</li>\n</ol>\n\n<p>This loop is repeated <code>NK</code> times where typically <code>K &lt;&lt; M</code>, and <code>K</code> is the average number of 2D polygons intersecting a single projected polyhedron. This is done to reduce the number of computations.</p>\n\n<p>The problem with this is that if I have <code>N=262144</code> and <code>M=19456</code> it takes about 129 seconds (when multithreaded by polyhedron), and this must be done about 300 times. Ideally, I would like to reduce the computation time to about 1 second for the above sizes, so I was wondering if someone could help point to some software or literature that could improve efficiency.</p>\n\n<p>[EDIT]</p>\n\n<p>@sehe's request I'm posting the most relevant parts of the code. I haven't compiled it, so this is just to get the gist... this code assumes, there are voxels and pixels, but the shapes can be anything. The order of the points in the grid can be any, but the indices of where the points reside in the grid are the same.</p>\n\n<pre><code>#include &lt;boost/geometry/geometry.hpp&gt;                                \n#include &lt;boost/geometry/geometries/point.hpp&gt;\n#include &lt;boost/geometry/geometries/ring.hpp&gt;\n\nconst std::size_t Dimension = 2;\ntypedef boost::geometry::model::point&lt;float, Dimension, boost::geometry::cs::cartesian&gt; point_2d;\ntypedef boost::geometry::model::polygon&lt;point_2d, false /* is cw */, true /* closed */&gt; polygon_2d;\ntypedef boost::geometry::model::box&lt;point_2d&gt; box_2d;\n\nstd::vector&lt;float&gt; getOverlaps(std::vector&lt;float&gt; &amp; projected_grid_vx, // projected voxels\n                   std::vector&lt;float&gt; &amp; pixel_grid_vx, // pixels\n                   std::vector&lt;int&gt; &amp; projected_grid_m, // number of voxels in each dimension\n                   std::vector&lt;int&gt; &amp; pixel_grid_m, // number of pixels in each dimension\n                   std::vector&lt;float&gt; &amp; pixel_grid_omega, // size of the pixel grid in cm\n                   int projected_grid_size, // total number of voxels\n                   int pixel_grid_size) { // total number of pixels\n\n  std::vector&lt;float&gt; overlaps(projected_grid_size * pixel_grid_size);\n  std::vector&lt;float&gt; h(pixel_grid_m.size());\n  for(int d=0; d &lt; pixel_grid_m.size(); d++) {\n    h[d] = (pixel_grid_omega[2*d+1] - pixel_grid_omega[2*d]) / pixel_grid_m[d];\n  }\n  for(int i=0; i &lt; projected_grid_size; i++){\n\n    std::vector&lt;float&gt; point_indices(8);\n\n    point_indices[0] = i;\n    point_indices[1] = i + 1;\n    point_indices[2] = i + projected_grid_m[0];\n    point_indices[3] = i + projected_grid_m[0] + 1;\n    point_indices[4] = i + projected_grid_m[0]       * projected_grid_m[1];\n    point_indices[5] = i + projected_grid_m[0]       * projected_grid_m[1] + 1;\n    point_indices[6] = i + (projected_grid_m[1] + 1) * projected_grid_m[0];\n    point_indices[7] = i + (projected_grid_m[1] + 1) * projected_grid_m[0] + 1;\n\n    std::vector&lt;float&gt; vx_corners(8 * projected_grid_m.size());\n\n    for(int vn = 0; vn &lt; 8; vn++) {\n      for(int d = 0; d &lt; projected_grid_m.size(); d++) {\n    vx_corners[vn + d * 8] = projected_grid_vx[point_indices[vn] + d * projeted_grid_size];\n      }\n    }\n\n    polygon_2d proj_voxel;\n    for(int vn = 0; vn &lt; 8; vn++) {\n      point_2d poly_pt(vx_corners[2 * vn], vx_corners[2 * vn + 1]);\n      boost::geometry::append(proj_voxel, poly_pt);\n    }\n    boost::geometry::correct(proj_voxel);\n\n    polygon_2d proj_voxel_hull;\n    boost::geometry::convex_hull(proj_voxel, proj_voxel_hull);\n\n    box_2d bb_proj_vox;\n    boost::geometry::envelope(proj_voxel_hull, bb_proj_vox);\n    point_2d min_pt = bb_proj_vox.min_corner();\n    point_2d max_pt = bb_proj_vox.max_corner();\n    // then get min and max indices of intersecting bins\n    std::vector&lt;float&gt; min_idx(projected_grid_m.size() - 1), \n      max_idx(projected_grid_m.size() - 1);\n\n    // compute min and max indices of incidence on the pixel grid\n    // this is easy assuming you have a regular grid of pixels\n    min_idx[0] = std::min( (float) std::max( std::floor((min_pt.get&lt;0&gt;() - pixel_grid_omega[0]) / h[0] - 0.5 ), 0.), pixel_grid_m[0]-1);\n    min_idx[1] = std::min( (float) std::max( std::floor((min_pt.get&lt;1&gt;() - pixel_grid_omega[2]) / h[1] - 0.5 ), 0.), pixel_grid_m[1]-1);\n    max_idx[0] = std::min( (float) std::max( std::floor((max_pt.get&lt;0&gt;() - pixel_grid_omega[0]) / h[0] + 0.5 ), 0.), pixel_grid__m[0]-1);\n    max_idx[1] = std::min( (float) std::max( std::floor((max_pt.get&lt;1&gt;() - pixel_grid_omega[2]) / h[1] + 0.5 ), 0.), pixel_grid_m[1]-1);\n\n\n    // iterate only over pixels which intersect the projected voxel\n    for(int iy = min_idx[1]; iy &lt;= max_idx[1]; iy++) {\n      for(int ix = min_idx[0]; ix &lt;= max_idx[0]; ix++) {\n\n    int idx = ix + iy * pixel_grid_size[0]; // `first' index of pixel corner point\n\n    polygon_2d pix_poly;\n    for(int pn = 0; pn &lt; 4; pn++) {\n      point_2d pix_corner_pt(\n                 pixel_grid_vx[idx + pn % 2 + (pn / 2) * pixel_grid_m[0]],\n                 pixel_grid_vx[idx + pn % 2 + (pn / 2) * pixel_grid_m[0] + pixel_grid_size]\n                 );\n      boost::geometry::append(pix_poly, pix_corner_pt);\n    }\n    boost::geometry::correct( pix_poly );\n\n    //make this into a convex hull since the order of the point may be any\n    polygon_2d pix_hull;\n    boost::geometry::convex_hull(pix_poly, pix_hull);\n\n    // on to perform intersection\n    std::vector&lt;polygon_2d&gt; vox_pix_ints;\n    polygon_2d vox_pix_int;\n\n    try {\n      boost::geometry::intersection(proj_voxel_hull, pix_hull, vox_pix_ints);\n    } catch ( std::exception e ) {\n      // skip since these may coincide at a point or line\n      continue;\n    }\n\n    // both are convex so only one intersection expected\n    vox_pix_int = vox_pix_ints[0];\n\n    overlaps[i + idx * projected_grid_size] = boost::geometry::area(vox_pix_int);\n\n      }\n    } // end intersection for\n\n\n  } //end projected_voxel for\n\n  return overlaps;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "constructor", "initialization", "copy-constructor"], "comments": [{"owner": {"reputation": 1418, "user_id": 849981, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/oczcE.jpg?s=128&g=1", "display_name": "X-HuMan", "link": "https://stackoverflow.com/users/849981/x-human"}, "edited": false, "score": 2, "creation_date": 1466619726, "post_id": 37975574, "comment_id": 63397438, "body": "Continue the reading and come back to this point later, sure you will understand it then ;)"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1466620075, "post_id": 37975574, "comment_id": 63397629, "body": "@FirstStep No, the first statement sounds wrong. The second could be correct. The &quot;temporary&quot; may never happen."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1466620170, "post_id": 37975574, "comment_id": 63397679, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/10053602/c-how-does-copy-constructor-work\">c++ how does copy constructor work?</a>"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1466620242, "post_id": 37975574, "comment_id": 63397730, "body": "@Juan I did not say which is correct. But both are statementing the same information.. I might be the only one that sees both are same"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1466620798, "post_id": 37975574, "comment_id": 63398052, "body": "They both sound wrong to we.  I do not see why a temporary would be made when copy constructing an object with another object of the same type.  I also fail to see where assignment comes into the first example."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1466621046, "post_id": 37975574, "comment_id": 63398179, "body": "@FirstStep No, they don&#39;t. If they did, then both would be correct or incorrect."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1466623005, "post_id": 37975574, "comment_id": 63399189, "body": "@juan the fact that both are incorrect <i>or</i>  both are correct, should not confuse the OP then.."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1466623142, "post_id": 37975574, "comment_id": 63399275, "body": "@FirstStep No, you are confused. You&#39;re the one who thinks both statements have the same information."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1466623316, "post_id": 37975574, "comment_id": 63399380, "body": "@juwan .. Maybe.. I need to recktify? rectify? whatever it is.. I need sort my self* together then. But if I say &quot;<i>Hey I read X = A here and read X = B there.. Why and I am confused</i>&quot;.. Does not sound the same as &quot;<i>Hey I read X = A here and X = A there, is this correct or incorrect?</i>&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 6345729, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cd6a23dd59546bb2feec0e4de844af13?s=128&d=identicon&r=PG&f=1", "display_name": "winter", "link": "https://stackoverflow.com/users/6345729/winter"}, "edited": false, "score": 0, "creation_date": 1466627675, "post_id": 37976003, "comment_id": 63401591, "body": "Okay, thanks for the example. I understood this point, but the above statements confused me that if both copy constructor and overloaded assignment operator, both are being used during initialization of an object from an existing one."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "reply_to_user": {"reputation": 47, "user_id": 6345729, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cd6a23dd59546bb2feec0e4de844af13?s=128&d=identicon&r=PG&f=1", "display_name": "winter", "link": "https://stackoverflow.com/users/6345729/winter"}, "edited": false, "score": 0, "creation_date": 1466627784, "post_id": 37976003, "comment_id": 63401629, "body": "@winter I think the statements you mentioned are incorrect. What book did you find them in?"}], "tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": true, "score": 0, "last_activity_date": 1466621603, "last_edit_date": 1466621603, "creation_date": 1466621113, "answer_id": 37976003, "question_id": 37975574, "link": "https://stackoverflow.com/questions/37975574/what-happens-when-a-new-object-is-created-using-another-existing-object/37976003#37976003", "title": "What happens when a new object is created using another (existing) object?", "body": "<p>I don't think either of these statements is correct - the copy-assignment operator is not called.</p>\n\n<p>I would describe what happens as:</p>\n\n<p>When you <strong>create</strong> a new object as a copy of an existing object, then the copy constructor is called:</p>\n\n<pre><code>// creation of new objects\nTest t2(t1);\nTest t3 = t1;\n</code></pre>\n\n<p>Only when you <strong>assign to an already existing object</strong> does the copy-assignment operator get called</p>\n\n<pre><code>// assign to already existing variable\nTest t4;\nt4 = t1;\n</code></pre>\n\n<p>We can prove this with the following little example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Test\n{\npublic:\n    Test() = default;\n    Test(const Test &amp;t)\n    {\n        std::cout &lt;&lt; \"copy constructor\\n\";\n    }\n    Test&amp; operator= (const Test &amp;t)\n    {\n        std::cout &lt;&lt; \"copy assignment operator\\n\";\n       return *this;\n    }\n};\n\nint main()\n{\n    Test t1;\n\n    // both of these will only call the copy constructor\n    Test t2(t1);\n    Test t3 = t1;\n\n    // only when assigning to an already existing variable is the copy-assignment operator called\n    Test t4;\n    t4 = t1;\n\n    // prevent unused variable warnings\n    (void)t2;\n    (void)t3;\n    (void)t4;\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n<pre><code>copy constructor\ncopy constructor\ncopy assignment operator\n</code></pre>\n</blockquote>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/2b9ee8baa56081da\" rel=\"nofollow\">working example</a></p>\n"}], "owner": {"reputation": 47, "user_id": 6345729, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cd6a23dd59546bb2feec0e4de844af13?s=128&d=identicon&r=PG&f=1", "display_name": "winter", "link": "https://stackoverflow.com/users/6345729/winter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 1, "accepted_answer_id": 37976003, "answer_count": 1, "score": 2, "last_activity_date": 1466621603, "creation_date": 1466619623, "question_id": 37975574, "link": "https://stackoverflow.com/questions/37975574/what-happens-when-a-new-object-is-created-using-another-existing-object", "title": "What happens when a new object is created using another (existing) object?", "body": "<p>I read in a book, it says:\nwhen we initialize a newly created object using another - uses copy constructor to create a temporary object and then uses assignment operator to copy values to the new object!</p>\n\n<p>And later in the book I read:\nWhen a new object is initialized using another object, compiler creates a temporary object which is copied to the new object using copy constructor. The temporary object is passed as an argument to the copy constructor.</p>\n\n<p>Really confused, what actually happens!! </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 4, "creation_date": 1466619610, "post_id": 37975552, "comment_id": 63397364, "body": "What is your question? If your question is &quot;<i>What is the O-Notation of this code</i>&quot; then you are not on the right website"}, {"owner": {"reputation": 466742, "user_id": 224671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c90de868a7e95d75bdfd6a906dfedac7?s=128&d=identicon&r=PG", "display_name": "kennytm", "link": "https://stackoverflow.com/users/224671/kennytm"}, "edited": false, "score": 0, "creation_date": 1466619759, "post_id": 37975552, "comment_id": 63397459, "body": "What is <code>n</code>? <code>x + y + z</code>? The amount of numbers? <code>max(2^x*3^y*5^z)</code>?"}, {"owner": {"reputation": 7379, "user_id": 1267942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ce65832647423d2c793e7a2fb2669c3?s=128&d=identicon&r=PG", "display_name": "Andrei Zhytkevich", "link": "https://stackoverflow.com/users/1267942/andrei-zhytkevich"}, "edited": false, "score": 2, "creation_date": 1466619991, "post_id": 37975552, "comment_id": 63397576, "body": "Looks like a homework."}, {"owner": {"reputation": 29, "user_id": 6500701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47098fd7fdaaef36b0221c3f6dae512f?s=128&d=identicon&r=PG&f=1", "display_name": "user6500701", "link": "https://stackoverflow.com/users/6500701/user6500701"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1466620070, "post_id": 37975552, "comment_id": 63397622, "body": "@FirstStep I want to know how you can generate the sequence in order in O(n) where n is how many numbers you generate"}, {"owner": {"reputation": 29, "user_id": 6500701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47098fd7fdaaef36b0221c3f6dae512f?s=128&d=identicon&r=PG&f=1", "display_name": "user6500701", "link": "https://stackoverflow.com/users/6500701/user6500701"}, "reply_to_user": {"reputation": 7379, "user_id": 1267942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ce65832647423d2c793e7a2fb2669c3?s=128&d=identicon&r=PG", "display_name": "Andrei Zhytkevich", "link": "https://stackoverflow.com/users/1267942/andrei-zhytkevich"}, "edited": false, "score": 0, "creation_date": 1466620195, "post_id": 37975552, "comment_id": 63397698, "body": "@Andzhik It&#39;s not. It was an exam (2010) given in order to join a university. I will also have an exam in summer and I&#39;m getting ready for it. (Proof: <a href=\"http://fmi.unibuc.ro/ro/pdf/2010/admitere/subiecte_barem/dl_info/subiecte.pdf\" rel=\"nofollow noreferrer\">fmi.unibuc.ro/ro/pdf/2010/admitere/subiecte_barem/dl_info/&hellip;</a>)"}, {"owner": {"reputation": 16306, "user_id": 448810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4b14d4a7503a55cb803c049700ed83b?s=128&d=identicon&r=PG", "display_name": "user448810", "link": "https://stackoverflow.com/users/448810/user448810"}, "edited": false, "score": 0, "creation_date": 1466620224, "post_id": 37975552, "comment_id": 63397717, "body": "This is an old problem. Search for &quot;hamming sequence&quot; on this site or elsewhere, or see <a href=\"http://oeis.org/A051037\" rel=\"nofollow noreferrer\">A051037</a>."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1466620225, "post_id": 37975552, "comment_id": 63397719, "body": "Just use a sieve, and scan the result."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1466620240, "post_id": 37975552, "comment_id": 63397728, "body": "Consider an sieving algorithm similar to the sieve of eratosthenes used to compute primes. Generating the sieve will be O(N) and using the sieve O(1)"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1466620498, "post_id": 37975552, "comment_id": 63397868, "body": "It is an interesting problem then. So <b>Edit</b> your Original Post and add the question. Maybe state stuff (like you said in the comments) to get better responses"}, {"owner": {"reputation": 29, "user_id": 6500701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47098fd7fdaaef36b0221c3f6dae512f?s=128&d=identicon&r=PG&f=1", "display_name": "user6500701", "link": "https://stackoverflow.com/users/6500701/user6500701"}, "reply_to_user": {"reputation": 16306, "user_id": 448810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4b14d4a7503a55cb803c049700ed83b?s=128&d=identicon&r=PG", "display_name": "user448810", "link": "https://stackoverflow.com/users/448810/user448810"}, "edited": false, "score": 0, "creation_date": 1466621499, "post_id": 37975552, "comment_id": 63398413, "body": "@user448810 You are right this is what I&#39;m looking for but I don&#39;t really understand it since we didn&#39;t do a lot of programming in high school and also English is not my native language so that makes things even harder. TY nonetheless."}, {"owner": {"reputation": 29, "user_id": 6500701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47098fd7fdaaef36b0221c3f6dae512f?s=128&d=identicon&r=PG&f=1", "display_name": "user6500701", "link": "https://stackoverflow.com/users/6500701/user6500701"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1466622121, "post_id": 37975552, "comment_id": 63398751, "body": "@user4581301 from what i understant you want me to take the numbers 1,2,3,4,.... and mark the ones that are multiples of 2,3 and 5? If so that wouldn&#39;t work since i don&#39;t want 14 on the list for example)"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 6500701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47098fd7fdaaef36b0221c3f6dae512f?s=128&d=identicon&r=PG&f=1", "display_name": "user6500701", "link": "https://stackoverflow.com/users/6500701/user6500701"}, "edited": false, "score": 0, "creation_date": 1466622847, "post_id": 37976378, "comment_id": 63399108, "body": "Thank you very much for your answer! As i said in other comments it&#39;s not really homework, I&#39;m preparing for the exam to joining a university and this was given in 2010, but you are right I need layman&#39;s explanation. In your answer I could help but notice you had two small mistakes:1. the code scans more than n numbers , it scans until it finds n GOOD/fit numbers (it scans 7 but dismisses it for example) and removing factors isn&#39;t a linear process. For example 2 ^100 would take 100 steps in that algorithm , not 2 ^100. Also could you give a very brief  explanation on what a sieve is?"}, {"owner": {"reputation": 29, "user_id": 6500701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47098fd7fdaaef36b0221c3f6dae512f?s=128&d=identicon&r=PG&f=1", "display_name": "user6500701", "link": "https://stackoverflow.com/users/6500701/user6500701"}, "edited": false, "score": 0, "creation_date": 1466623269, "post_id": 37976378, "comment_id": 63399348, "body": "From what I found on google (all was Sieve of Eratosthenes ) sieve is the algorithm itself and not a structure like deque or queue. I am asking because English is not my native language so I don&#39;t know all the terms in english"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 29, "user_id": 6500701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47098fd7fdaaef36b0221c3f6dae512f?s=128&d=identicon&r=PG&f=1", "display_name": "user6500701", "link": "https://stackoverflow.com/users/6500701/user6500701"}, "edited": false, "score": 0, "creation_date": 1466623282, "post_id": 37976378, "comment_id": 63399353, "body": "Oh, I need to amend this short answer, because the &quot;can be very short&quot; is wrong. I&#39;ve now had half a cup of coffee + coding, and that statement is just wrong. Sorry. :)"}, {"owner": {"reputation": 29, "user_id": 6500701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47098fd7fdaaef36b0221c3f6dae512f?s=128&d=identicon&r=PG&f=1", "display_name": "user6500701", "link": "https://stackoverflow.com/users/6500701/user6500701"}, "edited": false, "score": 0, "creation_date": 1466623896, "post_id": 37976378, "comment_id": 63399663, "body": "No problem :) The question got down-voted pretty hard so you are my last shot at understanding. I want something that uses arrays, since I worked only a little bit with dynamic memory,queues and such so I don&#39;t master them."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 29, "user_id": 6500701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47098fd7fdaaef36b0221c3f6dae512f?s=128&d=identicon&r=PG&f=1", "display_name": "user6500701", "link": "https://stackoverflow.com/users/6500701/user6500701"}, "edited": false, "score": 0, "creation_date": 1466625003, "post_id": 37976378, "comment_id": 63400200, "body": "@user6500701: Searching for an exponential limit function for the sequence (to allocate proper size set or array) I found a probable <b>duplicate</b> with a good answer, including code (the &quot;spread&quot; function is an example of using a sieve, the <code>std::set</code> is the sieve): (<a href=\"http://stackoverflow.com/questions/29286845/finding-hamming-numbers-not-code-or-distance\" title=\"finding hamming numbers not code or distance\">stackoverflow.com/questions/29286845/&hellip;</a>). Does this answer your question? If so I&#39;ll close it as duplicate."}, {"owner": {"reputation": 29, "user_id": 6500701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47098fd7fdaaef36b0221c3f6dae512f?s=128&d=identicon&r=PG&f=1", "display_name": "user6500701", "link": "https://stackoverflow.com/users/6500701/user6500701"}, "edited": false, "score": 0, "creation_date": 1466626158, "post_id": 37976378, "comment_id": 63400806, "body": "It doesn&#39;t do exactly what I want in the sense that it shows the hamming numbers smaller than n and not the first n hamming numbers. Also the code uses some things that I did not learn yet like the sieve,therefore it&#39;s a bit hard to understand"}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 1, "last_activity_date": 1466643698, "last_edit_date": 1495539853, "creation_date": 1466622464, "answer_id": 37976378, "question_id": 37975552, "link": "https://stackoverflow.com/questions/37975552/linear-solution-for-2x-3y5z/37976378#37976378", "title": "Linear solution for 2^x *3^y*5^z", "body": "<p>Since you're asking for the complexity of the given code,</p>\n\n<pre><code>bool s_a (int a)\n{\n    while (a % 2 == 0)\n        a = a / 2;\n    while (a % 3 == 0)\n        a = a / 3;\n    while (a % 5 == 0)\n        a = a / 5;\n    if (a == 1)\n        return true;\n    else\n        return false;\n}\nvoid s_b (int n)\n{\n    unsigned int k = 1,nc = 1;\n    while ( k &lt;= n)\n    {\n        if(s_a(nc) == true)\n        {\n            cout &lt;&lt; nc &lt;&lt; \" \";\n            k++;\n        }\n        nc++;\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p><strong>&rdquo;</strong> would also appreciate an answer on its complexity</p>\n</blockquote>\n\n<p>&hellip; it seems clear that this needs a more in-depth answer than just &ldquo;use a sieve&rdquo;.</p>\n\n<p>The code computes numbers of the form 2<sup><em>a</em></sup>\u00d73<sup><em>b</em></sup>\u00d75<sup><em>c</em></sup>, where <em>a</em>, <em>b</em> and <em>c</em> are non-negative integers.</p>\n\n<p>These numbers are called <strong>Hamming numbers</strong> in computer science, and more generally they're called <a href=\"https://en.wikipedia.org/wiki/Regular_number\" rel=\"nofollow noreferrer\"><strong>Regular numbers</strong></a>.</p>\n\n<hr>\n\n<p>In passing, the code above can be made more clear by</p>\n\n<ul>\n<li><p>using self-describing names,</p></li>\n<li><p>using a boolean expression directly in a <code>return</code> statement, rather than an <code>if</code>-<code>else</code> construction, and saying just <code>if(</code><em>expression</em><code>)</code> rather than <code>if(</code><em>expression</em><code>==true)</code>, and</p></li>\n<li><p>not doing i/o in basic computational functions (consider: such a function can't be used in a GUI), but rather returning the results.</p></li>\n</ul>\n\n<p>Then modulo formatting and basic syntax &ndash; I use my preferences here &ndash; the code can look like this:</p>\n\n<pre><code>auto is_hamming_number( int a )\n    -&gt; bool\n{\n    while( a % 2 == 0 ) { a = a / 2; }\n    while( a % 3 == 0 ) { a = a / 3; }\n    while( a % 5 == 0 ) { a = a / 5; }\n    return (a == 1);\n}\n\nauto hamming_numbers( int const n )\n    -&gt; vector&lt;int&gt;\n{\n    vector&lt;int&gt; result;\n    for( int i = 1; n != n_items( result ); ++i )\n    {\n        if( is_hamming_number( i ) )\n        {\n            result.push_back( i );\n        }\n    }\n    return result;\n}\n</code></pre>\n\n<p>&hellip; where <code>n_items</code> is defined as e.g.</p>\n\n<pre><code>template&lt; class Container &gt;\nauto n_items( Container const&amp; c )\n    -&gt; ptrdiff_t\n{ return c.size(); }\n</code></pre>\n\n<p>&hellip; in order to avoid problems with signed/unsigned comparisons, and associated compilation warnings.</p>\n\n<hr>\n\n<p>In the first short version of this answer, which I posted to get an editable answer in place before the question was possibly closed, I wrote that</p>\n\n<blockquote>\n  <p><strong>&rdquo;</strong> The short answer to the complexity is that the above code scans all numbers <del>up to and including <em>n</em></del> up to and including apparently <em>n<sup>k</sup></em> where <em>k</em> is rather small, e.g. <em>k</em> = 1.36, and for each number checks it by removing all factors of 2, 3 and 5, which I believe on average is a <del>linear</del> logarithmic process, hence (under these assumptions) its complexity is O(<em>n</em><sup>1.36</sup>log<em>n</em>). A mathematical analysis must surely be available on the net, but I didn't find it.</p>\n</blockquote>\n\n<p>I now have better data, from coding up an O(<em>n</em> log <em>n</em>) time sequence generator:</p>\n\n<pre>\n    <i>n</i>        <i>max Ham</i>\n    1              1\n    2              2\n    4              4\n    8              9\n   16             25\n   32             90\n   64            450\n  128           3375\n  256          43200\n  512        1049760\n 1024       60466176\n</pre>\n\n<p>This indicates that the <em>n</em><sup>th</sup> Hamming number increases faster than the square of <em>n</em>. Intuitively I'd expect exponential behavior. But I'm no mathematician, and simple googling did not lead me to any description or mathematical analysis of the behavior.</p>\n\n<p>The complexity of the simple code is necessarily at least as high as the behavior of the <em>n</em><sup>th</sup> Hamming number, since it checks all numbers up that. Then multiply with the time needed to remove 2, 3 and 5 factors from each number, which I believe is logarithmic in the size of the number. So we're talking at least O( <em>n</em><sup>2</sup>\u00d7log(<em>n</em>) ), but I'm not sure about how bad it is.</p>\n\n<hr>\n\n<p>Researching (googling) the behavior of the <em>n</em><sup>th</sup> Hamming number, I found a partial duplicate of this question, namely (<a href=\"https://stackoverflow.com/questions/29286845/finding-hamming-numbers-not-code-or-distance\">Finding Hamming Numbers - not code or distance</a>). The second code example in <a href=\"https://stackoverflow.com/a/29296906/464581\">M Oehm's answer there</a> is almost exactly what you ask for, modulo the linear complexity requirement. However, as you <a href=\"https://stackoverflow.com/questions/37975552/linear-solution-for-2x-3y5z/37976378?noredirect=1#comment63400806_37976378\">clarified in a comment on this answer</a>,</p>\n\n<blockquote>\n  <p><strong>&rdquo;</strong>  It doesn't do exactly what I want in the sense that it shows the hamming numbers smaller than n and not the first n hamming numbers. Also the code uses some things that I did not learn yet like the sieve,therefore it's a bit hard to understand</p>\n</blockquote>\n\n<p>Instead of a sieve the following code uses the main idea of the second of Oehm's examples, namely to directly generate all products of (2,3,5) factor combinations that are smaller than some limit, and then sort them.</p>\n\n<p>In order to generate at least <em>n</em> such products the code below makes a guess about the <em>n</em><sup>th</sup> Hamming number. If that guess turns out to be too low &ndash; because fewer than <em>n</em> Hamming numbers were generated &ndash; the guess is doubled and the Hamming numbers are generated anew. The doubling means that the complexity of the final generation overwhelms the complexity of any earlier generations, so that they can be ignored wrt. complexity.</p>\n\n<pre><code>#include &lt;algorithm&gt;        // std::sort\n#include &lt;assert.h&gt;         // assert\n#include &lt;iostream&gt;\n#include &lt;limits.h&gt;         // INT_MAX\n#include &lt;math.h&gt;           // pow\n#include &lt;stddef.h&gt;         // ptrdiff_t\n#include &lt;unordered_set&gt;    // std::unordered_set\n#include &lt;vector&gt;           // std::vector\nusing namespace std;\n\nusing Size = ptrdiff_t;     // Signed integer corresponding to size_t.\n\ntemplate&lt; class Container &gt;\nauto n_items( Container const&amp; c )\n    -&gt; Size\n{ return c.size(); }\n\nclass Hamming_sequence\n{\nprivate:\n    int             n_;\n    vector&lt;int&gt;     numbers_;\n\npublic:\n    auto computed_numbers() const\n        -&gt; vector&lt;int&gt; const&amp;\n    { return numbers_; }\n\n    auto size() const -&gt; Size   { return n_; }\n    auto begin() const          { return numbers_.begin(); }\n    auto end() const            { return begin() + size(); }\n\n    auto operator[]( Size const i ) const\n        -&gt; int\n    { return numbers_[i]; }\n\n    Hamming_sequence( int const n )\n        : n_( n )\n    {\n        double const fp_max_number = pow( n, 2.5 );     // Reasonable\n        assert( fp_max_number &lt;= INT_MAX );\n\n        int max_number  = static_cast&lt;int&gt;( fp_max_number );\n        while( n_items( numbers_ ) &lt; n )\n        {\n            numbers_.clear();\n            clog &lt;&lt; \": trying with max number \" &lt;&lt; max_number &lt;&lt; endl;\n            for( int two = 1; two &lt;= max_number/2; two *= 2 )\n            {\n                for( int three = 1; three &lt;= max_number/two/3; three *= 3 )\n                {\n                    for( int five = 1; five &lt;= max_number/two/three/5; five *= 5 )\n                    {\n                        int const number = two*three*five;\n                        numbers_.push_back( number );\n                    }\n                }\n            }\n            assert( max_number &lt;= INT_MAX/2 );\n            max_number *= 2;\n        }\n        sort( numbers_.begin(), numbers_.end() );       // O( n*log(n) )\n    }\n};\n\n#include &lt;iomanip&gt;      // setw\nauto main() -&gt; int\n{\n    for( int const number : Hamming_sequence{ 720 } )\n    {\n        cout &lt;&lt; number &lt;&lt; \" \";\n    }\n    cout &lt;&lt; \"\\n\";\n\n    cout &lt;&lt; \"\\n\";\n    Hamming_sequence const h{ 1024 };\n    for( int i = 1; i &lt;= n_items( h ); i *= 2 )\n    {\n        cout &lt;&lt; setw( 5 ) &lt;&lt; i &lt;&lt; setw( 15 ) &lt;&lt; h[i-1] &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>The <code>assert</code>s are not assertions about what I believe to be true at those points in the execution, but are rather a device to make the program crash if the numbers get too large to be handled. So this is not &ldquo;production code&rdquo;. For more robust code replace with e.g. exception throwing.</p>\n\n<p>Regarding complexity, the final guess about the max Hamming number is necessarily within a factor of 2 of the true value, for not too small <em>n</em>. And because doubling the value of the Hamming number quite evidently (see the behavior table above) does not double the sequence length, so the number of computed Hamming numbers is within 2<i>n</i>. With the added sorting this gives O(<em>n</em> log <em>n</em>) in the number of Hamming numbers.</p>\n\n<hr>\n\n<p>The <a href=\"https://en.wikipedia.org/wiki/Regular_number\" rel=\"nofollow noreferrer\">Wikipedia article</a> describes Edsger W. Dijkstra's <em>linear time</em> algorithm, which in short is to merge the three number sequences 2\u00d7H, 3\u00d7H and 5\u00d7H, where H is the basic Hamming number sequence. This works because every Hamming number <em>h</em> is of at least one of the forms 2\u00d7<em>h</em>, 3\u00d7<em>h</em> and 5\u00d7<em>h</em>, where <em>h</em> is some smaller Hamming number. And so one can just work forward:</p>\n\n<pre><code>#include &lt;algorithm&gt;        // std::min_element\n#include &lt;array&gt;            // std::array\n#include &lt;assert.h&gt;         // assert\n#include &lt;iostream&gt;\n#include &lt;limits.h&gt;         // INT_MAX\n#include &lt;math.h&gt;           // pow\n#include &lt;stddef.h&gt;         // ptrdiff_t\n#include &lt;unordered_set&gt;    // std::unordered_set\n#include &lt;vector&gt;           // std::vector\nusing namespace std;\n\nusing Size = ptrdiff_t;     // Signed integer corresponding to size_t.\n\ntemplate&lt; class Container &gt;\nauto n_items( Container const&amp; c )\n    -&gt; Size\n{ return c.size(); }\n\nclass Hamming_sequence\n{\nprivate:\n    int             n_;\n    vector&lt;int&gt;     numbers_;\n\n    template&lt; int factor &gt;\n    struct H_\n    {\n        vector&lt;int&gt;&amp;    h_;\n        int             i_  = 0;\n\n        auto operator*()\n            -&gt; int\n        {\n            assert( h_[i_] &lt;= INT_MAX/factor );\n            return factor*h_[i_];\n        }\n\n        void operator++() { ++i_; }\n\n        H_( vector&lt;int&gt;&amp; numbers ): h_( numbers ) {}\n    };\n\npublic:\n    auto computed_numbers() const\n        -&gt; vector&lt;int&gt; const&amp;\n    { return numbers_; }\n\n    auto size() const -&gt; Size   { return n_; }\n    auto begin() const          { return numbers_.begin(); }\n    auto end() const            { return begin() + size(); }\n\n    auto operator[]( Size const i ) const\n        -&gt; int\n    { return numbers_[i]; }\n\n    Hamming_sequence( int const n )\n        : n_( n )\n    {\n        H_&lt;2&gt;   h2{ numbers_ };\n        H_&lt;3&gt;   h3{ numbers_ };\n        H_&lt;5&gt;   h5{ numbers_ };\n\n        numbers_ = {1};\n        array&lt;int, 3&gt;   h = {*h2, *h3, *h5};\n        int previous = 1;\n        while( n_items( numbers_ ) &lt; n_ )\n        {\n            int const i = min_element( h.begin(), h.end() ) - h.begin();\n            if( h[i] != previous )\n            {\n                numbers_.push_back( h[i] );\n                previous = h[i];\n            }\n            switch( i )\n            {\n                case 0: ++h2; h[0] = *h2; break;\n                case 1: ++h3; h[1] = *h3; break;\n                case 2: ++h5; h[2] = *h5; break;\n            }\n        }\n    }\n};\n\n#include &lt;iomanip&gt;      // setw\nauto main() -&gt; int\n{\n    for( int const number : Hamming_sequence{ 720 } )\n    {\n        cout &lt;&lt; number &lt;&lt; \" \";\n    }\n    cout &lt;&lt; \"\\n\";\n\n    cout &lt;&lt; \"\\n\";\n    Hamming_sequence const h{ 1024 };\n    for( int i = 1; i &lt;= n_items( h ); i *= 2 )\n    {\n        cout &lt;&lt; setw( 5 ) &lt;&lt; i &lt;&lt; setw( 15 ) &lt;&lt; h[i-1] &lt;&lt; endl;\n    }\n\n    cout &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"The 1500'th Hamming number is \" &lt;&lt; Hamming_sequence( 1'500 )[1'499] &lt;&lt; \".\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre>\n1 2 3 4 5 6 8 9 10 12 15 16 18 20 24 25 27 30 32 36 40 45 48 50 54 60 64 72 75 80 81 90 96 100 108 120 125 128 135 144 150 160 162 180 192 200 216 225 240 243 250 256 270 288 300 320 324 360 375 384 400 405 432 450 480 486 500 512 540 576 600 625 640 648 675 720 729 750 768 800 810 864 900 960 972 1000 1024 1080 1125 1152 1200 1215 1250 1280 1296 1350 1440 1458 1500 1536 1600 1620 1728 1800 1875 1920 1944 2000 2025 2048 2160 2187 2250 2304 2400 2430 2500 2560 2592 2700 2880 2916 3000 3072 3125 3200 3240 3375 3456 3600 3645 3750 3840 3888 4000 4050 4096 4320 4374 4500 4608 4800 4860 5000 5120 5184 5400 5625 5760 5832 6000 6075 6144 6250 6400 6480 6561 6750 6912 7200 7290 7500 7680 7776 8000 8100 8192 8640 8748 9000 9216 9375 9600 9720 10000 10125 10240 10368 10800 10935 11250 11520 11664 12000 12150 12288 12500 12800 12960 13122 13500 13824 14400 14580 15000 15360 15552 15625 16000 16200 16384 16875 17280 17496 18000 18225 18432 18750 19200 19440 19683 20000 20250 20480 20736 21600 21870 22500 23040 23328 24000 24300 24576 25000 25600 25920 26244 27000 27648 28125 28800 29160 30000 30375 30720 31104 31250 32000 32400 32768 32805 33750 34560 34992 36000 36450 36864 37500 38400 38880 39366 40000 40500 40960 41472 43200 43740 45000 46080 46656 46875 48000 48600 49152 50000 50625 51200 51840 52488 54000 54675 55296 56250 57600 58320 59049 60000 60750 61440 62208 62500 64000 64800 65536 65610 67500 69120 69984 72000 72900 73728 75000 76800 77760 78125 78732 80000 81000 81920 82944 84375 86400 87480 90000 91125 92160 93312 93750 96000 97200 98304 98415 100000 101250 102400 103680 104976 108000 109350 110592 112500 115200 116640 118098 120000 121500 122880 124416 125000 128000 129600 131072 131220 135000 138240 139968 140625 144000 145800 147456 150000 151875 153600 155520 156250 157464 160000 162000 163840 164025 165888 168750 172800 174960 177147 180000 182250 184320 186624 187500 192000 194400 196608 196830 200000 202500 204800 207360 209952 216000 218700 221184 225000 230400 233280 234375 236196 240000 243000 245760 248832 250000 253125 256000 259200 262144 262440 270000 273375 276480 279936 281250 288000 291600 294912 295245 300000 303750 307200 311040 312500 314928 320000 324000 327680 328050 331776 337500 345600 349920 354294 360000 364500 368640 373248 375000 384000 388800 390625 393216 393660 400000 405000 409600 414720 419904 421875 432000 437400 442368 450000 455625 460800 466560 468750 472392 480000 486000 491520 492075 497664 500000 506250 512000 518400 524288 524880 531441 540000 546750 552960 559872 562500 576000 583200 589824 590490 600000 607500 614400 622080 625000 629856 640000 648000 655360 656100 663552 675000 691200 699840 703125 708588 720000 729000 737280 746496 750000 759375 768000 777600 781250 786432 787320 800000 810000 819200 820125 829440 839808 843750 864000 874800 884736 885735 900000 911250 921600 933120 937500 944784 960000 972000 983040 984150 995328 1000000 1012500 1024000 1036800 1048576 1049760 1062882 1080000 1093500 1105920 1119744 1125000 1152000 1166400 1171875 1179648 1180980 1200000 1215000 1228800 1244160 1250000 1259712 1265625 1280000 1296000 1310720 1312200 1327104 1350000 1366875 1382400 1399680 1406250 1417176 1440000 1458000 1474560 1476225 1492992 1500000 1518750 1536000 1555200 1562500 1572864 1574640 1594323 1600000 1620000 1638400 1640250 1658880 1679616 1687500 1728000 1749600 1769472 1771470 1800000 1822500 1843200 1866240 1875000 1889568 1920000 1944000 1953125 1966080 1968300 1990656 2000000 2025000 2048000 2073600 2097152 2099520 2109375 2125764 2160000 2187000 2211840 2239488 2250000 2278125 2304000 2332800 2343750 2359296 2361960 2400000 2430000 2457600 2460375 2488320 2500000 2519424 2531250 2560000 2592000 2621440 2624400 2654208 2657205 2700000 2733750 2764800 2799360 2812500 2834352 2880000 2916000 2949120 2952450 2985984 3000000 3037500 3072000 3110400 3125000 3145728 3149280 3188646 3200000 3240000 3276800 3280500 3317760 3359232 3375000 3456000 3499200 3515625 3538944 3542940 3600000 3645000 3686400 3732480 3750000 3779136 3796875 3840000 3888000 3906250 3932160 3936600 3981312 4000000 4050000 4096000 4100625 4147200 4194304 4199040 4218750 4251528 4320000 4374000 4423680 4428675 4478976 4500000 4556250 4608000 4665600 4687500 4718592 4723920 4782969 4800000 4860000 4915200 4920750 4976640 5000000 5038848 5062500 5120000 5184000 5242880 5248800 5308416 5314410 5400000 5467500 5529600 5598720 5625000 5668704 5760000 5832000 5859375 5898240 5904900 5971968 6000000 6075000 6144000 6220800 6250000 6291456 6298560 6328125 6377292 6400000 6480000 6553600 6561000 6635520 6718464 6750000 6834375 6912000\n\n    1              1\n    2              2\n    4              4\n    8              9\n   16             25\n   32             90\n   64            450\n  128           3375\n  256          43200\n  512        1049760\n 1024       60466176\n\nThe 1500'th Hamming number is 859963392.\n</pre>\n"}], "owner": {"reputation": 29, "user_id": 6500701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47098fd7fdaaef36b0221c3f6dae512f?s=128&d=identicon&r=PG&f=1", "display_name": "user6500701", "link": "https://stackoverflow.com/users/6500701/user6500701"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "closed_date": 1468076849, "answer_count": 1, "score": -2, "last_activity_date": 1466643698, "creation_date": 1466619565, "last_edit_date": 1466619946, "question_id": 37975552, "link": "https://stackoverflow.com/questions/37975552/linear-solution-for-2x-3y5z", "closed_reason": "Needs details or clarity", "title": "Linear solution for 2^x *3^y*5^z", "body": "<p>I need to generate 1,2,3,4,5,6,8,9,10,12,15,16 etc (a given n numbers) (containing only powers of 2,3 and 5) in ascending order in linear time(O(n)).</p>\n\n<p>I have the following code(I'm not very sure of its complexity,would also appreciate an answer on its complexity)</p>\n\n<pre><code>bool s_a (int a)\n{\n    while (a % 2 == 0)\n        a = a / 2;\n    while (a % 3 == 0)\n        a = a / 3;\n    while (a % 5 == 0)\n        a = a / 5;\n    if (a == 1)\n        return true;\n    else\n        return false;\n}\nvoid s_b (int n)\n{\n    unsigned int k = 1,nc = 1;\n    while ( k &lt;= n)\n    {\n        if(s_a(nc) == true)\n        {\n            cout &lt;&lt; nc &lt;&lt; \" \";\n            k++;\n        }\n        nc++;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "g++", "g++4.8"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 2, "creation_date": 1466619443, "post_id": 37975466, "comment_id": 63397251, "body": "<a href=\"http://stackoverflow.com/q/23047198/1782465\">Related question</a>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1466619527, "post_id": 37975466, "comment_id": 63397312, "body": "Take baby-steps, by first trying to build in C++03 mode, and fix potential errors and warnings. Then rebuild in C++11 mode, and again fix errors and warnings. Each of these steps are not that big, and C++11 is mostly backward compatible to C++03 which is mostly backward compatible with C++98. The big breaking things comes in the future C++17 which will remove some deprecated functionality."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1466619612, "post_id": 37975466, "comment_id": 63397365, "body": "The biggest thing to think about is that <a href=\"http://en.cppreference.com/w/cpp/memory/auto_ptr\" rel=\"nofollow noreferrer\"><code>std::auto_ptr</code></a> has been deprecated, you should replace it with <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\"><code>std::unique_ptr</code></a>."}, {"owner": {"reputation": 2836, "user_id": 747145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9ccb901b2ba0f661c581a419722dba04?s=128&d=identicon&r=PG", "display_name": "LeviX", "link": "https://stackoverflow.com/users/747145/levix"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1466620257, "post_id": 37975466, "comment_id": 63397740, "body": "Very helpful @Angew !"}], "answers": [{"comments": [{"owner": {"reputation": 2836, "user_id": 747145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9ccb901b2ba0f661c581a419722dba04?s=128&d=identicon&r=PG", "display_name": "LeviX", "link": "https://stackoverflow.com/users/747145/levix"}, "edited": false, "score": 1, "creation_date": 1466620468, "post_id": 37975576, "comment_id": 63397856, "body": "This is exactly what I would like to do @Jesper Juhl . I want to also compile with clang and use some of their tools for analysis."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 2, "last_activity_date": 1466619971, "last_edit_date": 1466619971, "creation_date": 1466619634, "answer_id": 37975576, "question_id": 37975466, "link": "https://stackoverflow.com/questions/37975466/upgrading-c98-code-to-c11/37975576#37975576", "title": "Upgrading c++98 code to c++11", "body": "<p>Just turning on <code>-std=c++11</code> and nothing else should be fairly low risk. You may see some small speed improvements due to moves suddenly being performed where they previously couldn't be, but I doubt you'll run into any problems (unless the code contains undefined behaviour and gcc exploits that more agressively in C++11 mode - I don't know if it does).</p>\n\n<p>As for modernizing the code you may want to look at clang tidy/clang modernize. But once you start to actually actively replace old working code with new modern C++11 versions, that is where you need to be really careful and make sure you got it right and fully understand both the code you are replacing as well as the new feature(s) you use to replace it.</p>\n\n<p><a href=\"http://clang.llvm.org/extra/clang-tidy/index.html\" rel=\"nofollow\">http://clang.llvm.org/extra/clang-tidy/index.html</a></p>\n\n<p>See especially the 'modernize-*' checks: <a href=\"http://clang.llvm.org/extra/clang-tidy/checks/list.html\" rel=\"nofollow\">http://clang.llvm.org/extra/clang-tidy/checks/list.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1466620017, "post_id": 37975585, "comment_id": 63397587, "body": "Nitpick: the current standard is C++14, not C++11 ."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1466620404, "last_edit_date": 1466620404, "creation_date": 1466619677, "answer_id": 37975585, "question_id": 37975466, "link": "https://stackoverflow.com/questions/37975466/upgrading-c98-code-to-c11/37975585#37975585", "title": "Upgrading c++98 code to c++11", "body": "<blockquote>\n  <p>What kind of risk does this introduce? What things do I need to watch out for?</p>\n</blockquote>\n\n<p>Not much usually, the current standard (<a href=\"/questions/tagged/c%2b%2b14\" class=\"post-tag\" title=\"show questions tagged &#39;c++14&#39;\" rel=\"tag\">c++14</a>) seamlessly compiles older standards code.</p>\n\n<blockquote>\n  <p>What type of things could break (besides things just not compiling)?</p>\n</blockquote>\n\n<p>You may see some warnings about deprecated stuff, like e.g. <code>std::auto_ptr</code> but it will still work correctly though.</p>\n\n<hr>\n\n<p>You have to judge, if it's actually worth to refactor your older code, or just leave it as is.</p>\n\n<p>If there may be improvement for interfaces using newer language features, you mey consider refactoring.</p>\n"}], "owner": {"reputation": 2836, "user_id": 747145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9ccb901b2ba0f661c581a419722dba04?s=128&d=identicon&r=PG", "display_name": "LeviX", "link": "https://stackoverflow.com/users/747145/levix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2817, "favorite_count": 1, "accepted_answer_id": 37975576, "answer_count": 2, "score": 5, "last_activity_date": 1466620404, "creation_date": 1466619282, "question_id": 37975466, "link": "https://stackoverflow.com/questions/37975466/upgrading-c98-code-to-c11", "title": "Upgrading c++98 code to c++11", "body": "<p>I have inherited a large c++ code base and have finally got it to compile and run on 64-bit Red Hat 7 (gcc version 4.8.5 20150623).</p>\n\n<p>By default the makefiles in the project are compiling for c++98. I would like to turn on c++11 as that obviously provides many language benefits. g++ 4.8 has <a href=\"https://gcc.gnu.org/gcc-4.8/cxx0x_status.html\" rel=\"noreferrer\">rather complete support</a> for c++11. </p>\n\n<p><strong>My question is:</strong> What kind of risk does this introduce? What things do I need to watch out for? What type of things could break (besides things just not compiling)?</p>\n\n<p>My google-foo is rather low on this because I've searched and just haven't been able to find any kind of analysis on this. (Maybe because their really isn't any risk, I just don't know.)</p>\n"}, {"tags": ["c++", "pointers", "member-function-pointers"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1466619368, "post_id": 37975445, "comment_id": 63397207, "body": "Why would two instances of a class have different member functions?"}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 2, "creation_date": 1466619669, "post_id": 37975445, "comment_id": 63397403, "body": "It sounds like you might be looking for function+bind but it&#39;s hard to say for sure without more detail in your question."}, {"owner": {"reputation": 7, "user_id": 6447099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9dadf9c4238ef72ca68f104a61292d?s=128&d=identicon&r=PG&f=1", "display_name": "baboulinet", "link": "https://stackoverflow.com/users/6447099/baboulinet"}, "edited": false, "score": 0, "creation_date": 1466619734, "post_id": 37975445, "comment_id": 63397446, "body": "Actually, they don&#39;t. Both have the same member function <code>void foo()</code>, so that we can do <code>a1-&gt;foo()</code> and <code>a2-&gt;foo()</code>."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 1, "creation_date": 1466622698, "post_id": 37975445, "comment_id": 63399054, "body": "&quot;I want to be able to get a pointer that refers to the void foo() method inside the a1 object&quot; You must understand that there is no such thing so you cannot get it. There is only one <code>A::foo</code> method in the memory that serves all objects of type (class) <code>A</code>. That&#39;s why you <b>must</b> specify object to which you want to apply this method (for example in the form <code>a1-&gt;foo()</code> - unless that method is static. To answer question &quot;how can we make a difference&quot; - method get&#39;s &quot;hidden&quot; parameter <code>this</code> by which you know to what instance current call is made"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1466676394, "post_id": 37975445, "comment_id": 63420891, "body": "Right, that is the point. They are the same, so why would you expect to be able to compare them as if they were different? If you already know that, I don&#39;t understand what you are asking here."}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 1391674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2778d0a2630ee5251de820cde54cd4d1?s=128&d=identicon&r=PG", "display_name": "A. Sen", "link": "https://stackoverflow.com/users/1391674/a-sen"}, "is_accepted": false, "score": 0, "last_activity_date": 1466622483, "creation_date": 1466622483, "answer_id": 37976381, "question_id": 37975445, "link": "https://stackoverflow.com/questions/37975445/compare-member-function-pointers/37976381#37976381", "title": "Compare member function pointers", "body": "<p>I dont think you can make them different. a1->foo() and a2->foo() are basically same.</p>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 3490804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cd18e760451dc9e68e7ef7df90169a5?s=128&d=identicon&r=PG", "display_name": "Vivek Vijayan", "link": "https://stackoverflow.com/users/3490804/vivek-vijayan"}, "is_accepted": false, "score": 0, "last_activity_date": 1466687194, "creation_date": 1466687194, "answer_id": 37992552, "question_id": 37975445, "link": "https://stackoverflow.com/questions/37975445/compare-member-function-pointers/37992552#37992552", "title": "Compare member function pointers", "body": "<p>I think you're confused here about the concept of an object (or instance of a class). An object is like a blueprint of a class. <em>You cannot have different members / member functions for each object</em>.</p>\n\n<p>for eg.</p>\n\n<pre><code>class A\n{\n  int result;\n\n  public: \n  void add(int x, int y)\n  {\n    this-&gt;result = x + y;\n  }\n}\n</code></pre>\n\n<p>All the objects of Class A will have member variable result and member function <code>add()</code> in it. So <code>obj1-&gt;add()</code> and <code>obj2-&gt;add()</code> would call the same <code>add()</code> function, even though the objects itself would have different attributes from each other.</p>\n\n<p><code>obj1-&gt;add(1,2)</code> would result in <code>obj1-&gt;result</code> to be <strong>3</strong>, whereas</p>\n\n<p><code>obj2-&gt;add(1,3)</code> would result in <code>obj2-&gt;result</code> to be <strong>4</strong>.</p>\n"}], "owner": {"reputation": 7, "user_id": 6447099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9dadf9c4238ef72ca68f104a61292d?s=128&d=identicon&r=PG&f=1", "display_name": "baboulinet", "link": "https://stackoverflow.com/users/6447099/baboulinet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1466687194, "creation_date": 1466619234, "question_id": 37975445, "link": "https://stackoverflow.com/questions/37975445/compare-member-function-pointers", "title": "Compare member function pointers", "body": "<p>Let's say we have a class <code>A</code> which has a method <code>void foo()</code>. I know that I can get the pointer to <code>foo()</code> by using <code>&amp;A::foo</code>, but this pointer only seems to rely on the class type, not on the instantiated object. If we have two objects <code>a1</code> and <code>a2</code> of type <code>A</code>, how can we make a difference between the <code>foo()</code> method of <code>a1</code>, and the one of <code>a2</code> using pointers, member function pointers, or even pointer addresses ? Basically, I want to be able to get a pointer that refers to the <code>void foo()</code> method inside the <code>a1</code> object, which would be different from a pointer that refers to the <code>void foo()</code> method inside <code>a2</code>. Thank you.</p>\n"}, {"tags": ["c++", "c++11", "visual-c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1466618937, "post_id": 37975252, "comment_id": 63396959, "body": "I am having trouble understanding what you need to do but it sounds like you may need a <code>static</code> local variable in there somewhere."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 6389079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/63d116949ddbce01dd4c23dc761d03a1?s=128&d=identicon&r=PG&f=1", "display_name": "noman", "link": "https://stackoverflow.com/users/6389079/noman"}, "edited": false, "score": 0, "creation_date": 1466619669, "post_id": 37975529, "comment_id": 63397404, "body": "Thank you so much Cheers and hth - Alf . Will this code store all the 42 values? Because my next step is to find out the max value among all the stored value."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 65, "user_id": 6389079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/63d116949ddbce01dd4c23dc761d03a1?s=128&d=identicon&r=PG&f=1", "display_name": "noman", "link": "https://stackoverflow.com/users/6389079/noman"}, "edited": false, "score": 0, "creation_date": 1466658863, "post_id": 37975529, "comment_id": 63410654, "body": "This code only stores the most recent value. You can modify to store all the values. Whatever you want. A <code>std::vector</code> is usually a good choice for storing a dynamic number of values."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 1, "last_activity_date": 1466619489, "creation_date": 1466619489, "answer_id": 37975529, "question_id": 37975252, "link": "https://stackoverflow.com/questions/37975252/storing-values-in-array-whenever-the-function-is-being-called/37975529#37975529", "title": "storing values in array whenever the function is being called", "body": "<p>In the given code</p>\n\n<pre><code>static double\nCalculatemyValue(Node* ch)\n{ \nfloat gamma=0.3;\ndouble myValue = 0.0;\n   int n[10];\n   int i = 0;\n   n[i] = myValue;\n   myValue = ((1-gamma)*n[i-1]) //previous value\n   return myValue;\n}\n</code></pre>\n\n<p>&hellip; the array <code>n</code> is a local automatic variable. It's created anew each time execution reaches the declaration, and destroyed when execution leaves the block. No information is retained between calls.</p>\n\n<hr>\n\n<p>One good way to retain state between calls is to make the function a member function of a class, whose data members constitute the state you want to keep, e.g. like this:</p>\n\n<pre><code>class Power_sequence\n{\nprivate:\n    double   gamma_;\n    double   value_;\npublic:\n    auto gamma() const -&gt; double { return gamma_; }\n\n    void advance() { value_ *= 1 - gamma_; }\n    auto current() const -&gt; double { return value_; }\n\n    auto next()\n        -&gt; double\n    {\n        double const result = current();\n        advance();\n        return result;\n    }\n\n    Power_sequence( double const gamma = 0.3 )\n        : gamma_( gamma )\n        , value_( 1.0 )\n    {}\n};\n</code></pre>\n\n<p>&hellip; which you would use like this:</p>\n\n<pre><code>Power_sequence seq;\nfor( int i = 1; i &lt;= 42; ++i )\n{\n    cout &lt;&lt; seq.next() &lt;&lt; endl;\n}\n</code></pre>\n\n<p><sup>Disclaimer: above code not checked by a compiler.</sup></p>\n\n<p>Another way is to pass the state as an explicit argument to the function.</p>\n"}], "owner": {"reputation": 65, "user_id": 6389079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/63d116949ddbce01dd4c23dc761d03a1?s=128&d=identicon&r=PG&f=1", "display_name": "noman", "link": "https://stackoverflow.com/users/6389079/noman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1466619489, "creation_date": 1466618550, "question_id": 37975252, "link": "https://stackoverflow.com/questions/37975252/storing-values-in-array-whenever-the-function-is-being-called", "title": "storing values in array whenever the function is being called", "body": "<p>I am new to c++. I have to calculate a value via equation and store that value each time whenever the function is being called. I have created an array of size 10 and calculated myValue then tried to store that value. Is this right way to do so? Will it work in way that each time whenever the function is called it will calculate and store myValue and use that value n[i-1] in the next call to calculate my value n[i]. Let's say in 1st call myvalue is 0.5. In next call it would be myValue = (1-0.3)* 0.5. Will it store all 10 values in 10 calls and use the last stored value to calculate myValue. It is not showing me any error when I am compiling it but still I have doubt. </p>\n\n<pre><code>static double\nCalculatemyValue(Node* ch)\n{ \nfloat gamma=0.3;\ndouble myValue = 0.0;\n   int n[10];\n   int i = 0;\n   n[i] = myValue;\n   myValue = ((1-gamma)*n[i-1]) //previous value\n   return myValue;\n} \n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "gcc"], "comments": [{"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1466622091, "post_id": 37975178, "comment_id": 63398741, "body": "You had double dashes <code>configure: error: unrecognized option: --Wl,-rpath,&#47;home&#47;gccprefix&#47;lib64</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1156, "user_id": 4772791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9e0e4bd022920a359eac1b22749ca6?s=128&d=identicon&r=PG&f=1", "display_name": "arsv", "link": "https://stackoverflow.com/users/4772791/arsv"}, "is_accepted": false, "score": 0, "last_activity_date": 1466638748, "last_edit_date": 1466638748, "creation_date": 1466637982, "answer_id": 37979846, "question_id": 37975178, "link": "https://stackoverflow.com/questions/37975178/linux-correct-syntax-to-pass-custom-directory-for-libstdc-so-6-via-config/37979846#37979846", "title": "linux correct syntax to pass custom directory for libstdc++.so.6 via config", "body": "<p>The correct syntax would be</p>\n\n<pre><code>./configure ... LDFLAGS=-Wl,-rpath=/home/gccprefix/lib64\n</code></pre>\n\n<p>Looking at the generated Makefiles, you could probably get away with CXXFLAGS but not with CFLAGS which are not used at all for a C++-only project.</p>\n\n<p>Note <code>CFLAGS=-fPIC CFLAGS=-Wfatal-errors CFLAGS=-I...</code> is pointless, only <code>-I...</code> will be passed to the compiler, and only to a C compiler. Try <code>CXXFLAGS=\"-fPIC -Wfatal-errors -I...\"</code> instead, making sure configure gets that as a single argument. Passing it via MYFLAGS probably won't work. </p>\n"}], "owner": {"reputation": 1973, "user_id": 1187098, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c31da844ec3d4c6889e2dd5e9323037?s=128&d=identicon&r=PG", "display_name": "art vanderlay", "link": "https://stackoverflow.com/users/1187098/art-vanderlay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466638748, "creation_date": 1466618307, "last_edit_date": 1466620552, "question_id": 37975178, "link": "https://stackoverflow.com/questions/37975178/linux-correct-syntax-to-pass-custom-directory-for-libstdc-so-6-via-config", "title": "linux correct syntax to pass custom directory for libstdc++.so.6 via config", "body": "<p>I have a custom compiled gcc 5.4.0 with the following folder structure <code>/home/gccprefix/lib64/libstdc++.so.6</code>.</p>\n\n<p>So far compiling has been going well passing extra flags via configure such as <code>CC=/home/gccprfix/bin/gcc CFLAGS=-fPIC CFLAGS=-Wfatal-errors CFLAGS=-I/home/gccprefix/header/tr1</code>. </p>\n\n<p>But now I have it a problem compiling cairo with <code>/home/gccprefix/bin/ragel</code>. To compile I have a bash script with the flags allocated as a variable, such as </p>\n\n<pre><code>MYFLAGS=\"CC=/home/gccprfix/bin/gcc CFLAGS=-fPIC CFLAGS=-Wfatal-errors CFLAGS=-I/home/gccprefix/header/tr1\"\n.../configure ${MYFLAGS}\n</code></pre>\n\n<p>Ragel was compiled with the <code>/home/gccprefix/bin/gcc</code> as above with no errors.</p>\n\n<p>However during <code>make</code> for cairo, I get</p>\n\n<pre><code>ragel: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by ragel) \n</code></pre>\n\n<p>This is due to gcc finding the default <code>/usr/lib64/libstdc++.so.6</code>. So following several threads on SO I believe I need to extend the flags passed to configure.</p>\n\n<p>What is the correct syntax</p>\n\n<pre><code>`CFLAGS=-Wl,-rpath,/home/gccprefix/lib64`\n</code></pre>\n\n<p>or do I drop the <code>CFLAGS=</code></p>\n\n<pre><code>`-Wl,-rpath,/home/gccprefix/lib64` \n</code></pre>\n\n<p>Using the first option with <code>CFLAGS=</code> the new <code>libstdc++.so.6</code> is not passed and the same error occurs, using the send without a <code>CFLAGS</code> just gives an error </p>\n\n<pre><code>configure: error: unrecognized option: `--Wl,-rpath,/home/gccprefix/lib64'\n</code></pre>\n\n<p>So what prefix do I use?</p>\n"}, {"tags": ["c++", "hdf5"], "comments": [{"owner": {"reputation": 291, "user_id": 5305568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fac245637898e8eaf56370a68ad1b11?s=128&d=identicon&r=PG&f=1", "display_name": "michbad", "link": "https://stackoverflow.com/users/5305568/michbad"}, "reply_to_user": {"reputation": 2113, "user_id": 1927176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d4YlH.jpg?s=128&g=1", "display_name": "fnc12", "link": "https://stackoverflow.com/users/1927176/fnc12"}, "edited": false, "score": 0, "creation_date": 1466620326, "post_id": 37974789, "comment_id": 63397773, "body": "I don&#39;t mean storing the data in memory, but saving it to a file. If the the row dimensions is bigger than of the data that I have, then I will have unfilled entries in the file. ArrayType refers to a HDF5 datatype, and I want to make that resizable. I know you can make datasets extensible, but can you do the same with datatypes?"}], "owner": {"reputation": 291, "user_id": 5305568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fac245637898e8eaf56370a68ad1b11?s=128&d=identicon&r=PG&f=1", "display_name": "michbad", "link": "https://stackoverflow.com/users/5305568/michbad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466690733, "creation_date": 1466616928, "last_edit_date": 1466690733, "question_id": 37974789, "link": "https://stackoverflow.com/questions/37974789/changing-array-shape-in-a-compound-type", "title": "Changing array shape in a compound type", "body": "<p>I'm starting from a struct </p>\n\n<pre><code>typedef struct SpikeInfo {\n        uint64 timestamp;\n        int recording;\n        int16 waveform[MAX_TRANSFORM_SIZE];\n    } SpikeInfo;\n</code></pre>\n\n<p>and then I create a HDF5 compound datatype:</p>\n\n<pre><code>CompType spiketype(sizeof(SpikeInfo));\nhsize_t dims[2] = {MAX_TRANSFORM_SIZE/nChannels, nChannels};\nspiketype.insertMember(H5std_string(\"waveform\"), HOFFSET(SpikeInfo, waveform), ArrayType(getNativeType(I16), 2, dims));\nspiketype.insertMember(H5std_string(\"recording\"), HOFFSET(SpikeInfo, recording), getNativeType(U16));\nspiketype.insertMember(H5std_string(\"timestamp\"), HOFFSET(SpikeInfo, timestamp), getNativeType(U64));\n</code></pre>\n\n<p>Thus the array has allocated <code>MAX_TRANSFORM_SIZE/nChannels</code> rows. However, it's most likely that I will be constantly receiving less data (for example with the number of rows being  onlyhalf of <code>MAX_TRANSFORM_SIZE/nChannels</code>), and then I end up having to fill the rest with zeros, which unnecessarily increases the filesize. I was wondering if there's a way to make that <code>ArrayType</code> resizable, so that I can make it bigger if it's necessary, but it's small at first.</p>\n\n<p>I know there is a type VarLenType, but the documentation doesn't show any useful methods for it. Is such a thing possible at all?</p>\n"}, {"tags": ["c++", "algorithm", "base"], "comments": [{"owner": {"reputation": 31, "user_id": 6497101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b906660ab4b897c20f3528c5e5b4e5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Qor Bobo", "link": "https://stackoverflow.com/users/6497101/qor-bobo"}, "edited": false, "score": 0, "creation_date": 1466617616, "post_id": 37974773, "comment_id": 63396244, "body": "Why are you down-voting this without telling me the reason for doing so? How else am I supposed to ask this question?"}, {"owner": {"reputation": 2029, "user_id": 6016064, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a5c4e2adb9a67f0af1a58f9c9c651c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Peters", "link": "https://stackoverflow.com/users/6016064/edward-peters"}, "edited": false, "score": 0, "creation_date": 1466617820, "post_id": 37974773, "comment_id": 63396354, "body": "I&#39;m guessing you&#39;re getting downvoted partially for readability (not entirely your fault, it&#39;s a tricky thing to phrase), and partially because you haven&#39;t really shown us what&#39;s going wrong - from what I read, the example you gave is one where it works? Also, a description of your algorithm would be nice (deciphering it from source code, not so much.)"}, {"owner": {"reputation": 31, "user_id": 6497101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b906660ab4b897c20f3528c5e5b4e5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Qor Bobo", "link": "https://stackoverflow.com/users/6497101/qor-bobo"}, "reply_to_user": {"reputation": 2029, "user_id": 6016064, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a5c4e2adb9a67f0af1a58f9c9c651c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Peters", "link": "https://stackoverflow.com/users/6016064/edward-peters"}, "edited": false, "score": 0, "creation_date": 1466618630, "post_id": 37974773, "comment_id": 63396792, "body": "I am following this algorithm: <a href=\"https://mathematics.knoji.com/how-to-convert-a-decimal-number-into-negative-base-a-tutorial/\" rel=\"nofollow noreferrer\">mathematics.knoji.com/&hellip;</a> It is a basic algorithm where you keep dividing the number until you reach zero, saving remainders into a vector as you go along."}, {"owner": {"reputation": 31, "user_id": 6497101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b906660ab4b897c20f3528c5e5b4e5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Qor Bobo", "link": "https://stackoverflow.com/users/6497101/qor-bobo"}, "reply_to_user": {"reputation": 2029, "user_id": 6016064, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a5c4e2adb9a67f0af1a58f9c9c651c1d?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Peters", "link": "https://stackoverflow.com/users/6016064/edward-peters"}, "edited": false, "score": 0, "creation_date": 1466621636, "post_id": 37974773, "comment_id": 63398496, "body": "@EdwardPeters, I edited my question, taking into account your suggestions."}, {"owner": {"reputation": 5203, "user_id": 3995261, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/54754c59e35649b7d22d70b72ce2989a?s=128&d=identicon&r=PG&f=1", "display_name": "YakovL", "link": "https://stackoverflow.com/users/3995261/yakovl"}, "edited": false, "score": 0, "creation_date": 1466629573, "post_id": 37974773, "comment_id": 63402478, "body": "Wait, there can&#39;t be any longer and shorter versions: if the base is -2, than there&#39;s only one way to present each number, so the answer is either right or wrong, isn&#39;t it?"}, {"owner": {"reputation": 31, "user_id": 6497101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b906660ab4b897c20f3528c5e5b4e5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Qor Bobo", "link": "https://stackoverflow.com/users/6497101/qor-bobo"}, "reply_to_user": {"reputation": 5203, "user_id": 3995261, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/54754c59e35649b7d22d70b72ce2989a?s=128&d=identicon&r=PG&f=1", "display_name": "YakovL", "link": "https://stackoverflow.com/users/3995261/yakovl"}, "edited": false, "score": 0, "creation_date": 1466640860, "post_id": 37974773, "comment_id": 63406093, "body": "@YakovL, maybe you&#39;re right. I think my solution was totally wrong. It was not generating a different version, but the wrong one."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6497101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b906660ab4b897c20f3528c5e5b4e5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Qor Bobo", "link": "https://stackoverflow.com/users/6497101/qor-bobo"}, "is_accepted": false, "score": 1, "last_activity_date": 1466622445, "creation_date": 1466622445, "answer_id": 37976371, "question_id": 37974773, "link": "https://stackoverflow.com/questions/37974773/positive-to-negative-negative-to-positive-in-negative-base/37976371#37976371", "title": "Positive to negative &amp;&amp; Negative to positive in negative base", "body": "<p>I found what's wrong with the code. Here's the new version:</p>\n\n<pre><code>vector&lt;int&gt; negative_base(vector&lt;int&gt; &amp;A) {\n//first convert number to decimal base\nint n = 0;\nlong count = A.size();\nint power_of_two = 1;\nfor(int i=0;i&lt;count;i++){\n    n+=power_of_two*A[i];\n    power_of_two = power_of_two*-2;\n}\ncout&lt;&lt;\"number: \"&lt;&lt;n&lt;&lt;endl;\nvector&lt;int&gt; base_minus_two;\nn=-n;\nwhile(n!=0){\n    int x;\n    if(n&lt;0){\n        x = n%2;\n        if(x!=0){ x+=2;\n        n = (n/-2) +1;\n        }else{\n            n = (n/-2);\n        }\n\n    }else{\n        x= n%2;\n        n = n/-2;\n\n    }\n    cout&lt;&lt;\"n: \"&lt;&lt; n &lt;&lt;\" x: \"&lt;&lt;x&lt;&lt;endl;\n    base_minus_two.push_back(x);\n\n}\nreturn base_minus_two;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 6497101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b906660ab4b897c20f3528c5e5b4e5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Qor Bobo", "link": "https://stackoverflow.com/users/6497101/qor-bobo"}, "edited": false, "score": 0, "creation_date": 1466637047, "post_id": 37977826, "comment_id": 63405133, "body": "If you note, I am checking if n is negative, not the remainder. n is the decimal number that&#39;s being changed in the while loop. And my program generates the exact same output as yours."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 31, "user_id": 6497101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b906660ab4b897c20f3528c5e5b4e5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Qor Bobo", "link": "https://stackoverflow.com/users/6497101/qor-bobo"}, "edited": false, "score": 0, "creation_date": 1466638800, "post_id": 37977826, "comment_id": 63405575, "body": "You fix it in your answer, but it was your problem."}, {"owner": {"reputation": 31, "user_id": 6497101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b906660ab4b897c20f3528c5e5b4e5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Qor Bobo", "link": "https://stackoverflow.com/users/6497101/qor-bobo"}, "edited": false, "score": 0, "creation_date": 1466640768, "post_id": 37977826, "comment_id": 63406071, "body": "Oh ok. Thanks. Got it."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1466627786, "creation_date": 1466627786, "answer_id": 37977826, "question_id": 37974773, "link": "https://stackoverflow.com/questions/37974773/positive-to-negative-negative-to-positive-in-negative-base/37977826#37977826", "title": "Positive to negative &amp;&amp; Negative to positive in negative base", "body": "<p>Your logic to test if remainder is negative is wrong (and you can split into sub functions).</p>\n\n<pre><code>struct div_with_positive_remainder_t\n{\n    int quot;\n    int rem;\n};\n\ndiv_with_positive_remainder_t div_with_positive_remainder(int x, int y)\n{\n    if (y == 0)\n        throw std::runtime_error(\"division by zero\");\n    int r = x % y;\n    if (r &lt; 0) {\n        r += std::abs(y);\n    }\n    int q = (x - r) / y;\n    return {q, r};\n}\n\nstd::vector&lt;int&gt; to_negbase(int n, int negbase = -2)\n{\n    std::vector&lt;int&gt; res;\n\n    while (n != 0) {\n        auto div = div_with_positive_remainder(n, negbase);\n        res.push_back(div.rem);\n        n = div.quot;\n    }\n    return res;\n}\n</code></pre>\n\n<p>And</p>\n\n<pre><code>int to_int(const std::vector&lt;int&gt; &amp;digits, int base = -2) {\n    int res = 0;\n    int power = 1;\n    for (auto digit : digits){\n        res += power * digit;\n        power *= base;\n    }\n    return res;\n}\n\nstd::vector&lt;int&gt; negative_base(const std::vector&lt;int&gt; &amp;v)\n{\n    return to_negbase(-to_int(v));\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/BPDcvT\" rel=\"nofollow\">Demo</a></p>\n"}], "owner": {"reputation": 31, "user_id": 6497101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b906660ab4b897c20f3528c5e5b4e5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Qor Bobo", "link": "https://stackoverflow.com/users/6497101/qor-bobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466634482, "creation_date": 1466616889, "last_edit_date": 1466634482, "question_id": 37974773, "link": "https://stackoverflow.com/questions/37974773/positive-to-negative-negative-to-positive-in-negative-base", "title": "Positive to negative &amp;&amp; Negative to positive in negative base", "body": "<p>We are given an array consisting of 0's and 1's. They represent a number in base -2. Example:\n    A = (1, 1, 0, 1, 0)\n    in decimal = (-2)^0 *(1) + (-2)^1 *(1) + (-2)^2 *(0) + (-2)^3 *(1) + (-2)^4 *(0) = 1 + (-2) + 0 + (-8) + 0 = -9</p>\n\n<p>Now, we need to convert -9 to 9 in base -2. Here's my code so far:</p>\n\n<pre><code>vector&lt;int&gt; negative_base(vector&lt;int&gt; &amp;A) {\n    //first convert number to decimal base\n    int n = 0;\n    long count = A.size();\n    int power_of_two = 1;\n    for(int i=0;i&lt;count;i++){\n        n+=power_of_two*A[i];\n        power_of_two = power_of_two*-2;\n    }\n    cout&lt;&lt;\"number: \"&lt;&lt;n&lt;&lt;endl;\n    vector&lt;int&gt; base_minus_two;\n    n=-n;\n    while(n!=0){\n        int x;\n        if(n&lt;0) {\n\n            x = n%2;\n            if(x!=0) x+=2;\n            n = (n/-2) +1;\n\n        } else {\n            x = n%2;\n            n = n/-2;\n        }\n        base_minus_two.push_back(x);\n    }\n    return base_minus_two;\n}\n</code></pre>\n\n<p>I am asked to return the shortest possible chain of 0's and 1's. However, my code does not always do that. For this example, it generates (1, 0, 1, 1, 1). I think it's fine for this example, yet in some cases it give me long chains while there are other shorter versions. In some cases, it's generating wrong results. For instance, if we have to convert 23 to -23, we get {1, 0, 0, 0, 0, 0, 1, 1} as a result. However, this number is not equal to -23, but to -63. So, there must be something wrong going on with my calculation. I am following the simplest base conversion algorithm, where you keep dividing until you hit zero, saving all the remainders in a vector as you go on. It's a negative base, so result * (-2) + remainder should give you what you had previously.</p>\n\n<pre><code>-23 = (-2) *  12  + 1\n 12 = (-2) * (-6) + 0\n- 6 = (-2) *   3  + 0\n  3 = (-2) * (-1) + 1\n -1 = (-2) *   1  + 1\n  1 = (-2) *   0  + 1\n</code></pre>\n\n<p>The result should be (1, 0, 0, 1, 1, 1), yet I am getting {1, 0, 0, 0, 0, 0, 1, 1} as I stated. What's wrong with my code?</p>\n"}, {"tags": ["c++", "opengl", "glfw"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1466631188, "post_id": 37974752, "comment_id": 63403198, "body": "Your &quot;solution&quot; seems coincidental. It&#39;s more likely that you are passing in an invalid pointer to an OpenGL function, and that it only causes a failure later on, under specific circumstances. Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "owner": {"reputation": 444, "user_id": 2889738, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/NEWgI.png?s=128&g=1", "display_name": "Kevin Streicher", "link": "https://stackoverflow.com/users/2889738/kevin-streicher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1466671351, "creation_date": 1466616789, "last_edit_date": 1466671351, "question_id": 37974752, "link": "https://stackoverflow.com/questions/37974752/opengl-access-violation-when-using-gltransformfeedbackvaryings-and-gldrawelemen", "title": "OpenGL: Access violation when using glTransformFeedbackVaryings and glDrawElements", "body": "<p>My shader works fine and now I want to add transform feedback during the same render pass by simply specifying one additional out variable in my geometry shader <code>out vec3 vertexPosition</code>.</p>\n\n<p>However when I add\n<code>glTransformFeedbackVaryings(_programHandle, _numVaryings, _varyings, _bufferMode);</code></p>\n\n<p>then my drawCall:</p>\n\n<p><code>glDrawElements(GL_TRIANGLES, meshRenderable._mesh-&gt;_indices.size(), GL_UNSIGNED_INT, NULL);</code></p>\n\n<p>results in an access violation.</p>\n\n<pre><code>Exception thrown at 0x000000005851968A (atio6axx.dll) in Shady.exe: 0xC0000005: Access violation reading location 0x0000000000000014.\nIf there is a handler for this exception, the program may be safely continued.`\n</code></pre>\n\n<p>Without <code>glTransformFeedbackVaryings</code> the <code>glDrawElements</code> call works fine. The shader consists of a vertex shader, a geometry shader (which transforms each triangle into 4 triangles) and a fragment shader.</p>\n\n<p>Why would specifying the transformFeedback varyings cause an access violation? I did not even use <code>glGetBufferSubData</code> yet and neither did create a buffer for TF and I assume the bound VAO is fine otherwise I would not get a corect draw call without the <code>glTransformFeedbackVaryings</code>!</p>\n\n<p>I used <code>glGetString</code> to verify that <code>EXT_transform_feedback</code> is supported and the EXT shows up and also validated the shader which returned <code>Validation successful</code>.</p>\n\n<p>Update: The reason drawElements caused an access violation was likely because I did not specify all TF elements (no buffer, no TF object, no <code>glBindBufferBase</code>). I assumed if I never call <code>glBeginTransformFeedback</code> this would not cause any side effects as no transform feedback would be active. However, this seems to be a wrong assumption. It would be very nice if someone could explain if it is valid to specify varyings without setting up the other TF objects and why OpenGL requires a proper setup for TF even if TF is never enabled.</p>\n"}, {"tags": ["c++", "c++11", "constants", "placement-new"], "answers": [{"comments": [{"owner": {"reputation": 1473, "user_id": 139996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/139e403bc51d49d3de61db25632e8ec4?s=128&d=identicon&r=PG", "display_name": "Bitrex", "link": "https://stackoverflow.com/users/139996/bitrex"}, "edited": false, "score": 0, "creation_date": 1466617477, "post_id": 37974818, "comment_id": 63396160, "body": "Understood. Since static variables are common to the class, I guess it wouldn&#39;t make sense to re-initialize them each time the class was instantiated. However, in this case I wanted MyClass1 to be a singleton, so as it can only be instantiated once anyway, I suppose it wouldn&#39;t really matter."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1466617679, "post_id": 37974818, "comment_id": 63396279, "body": "You are missing <code>type</code> for std::aligned_storage&lt;sizeof(T), alignof(T)&gt;::type - very bad !"}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1466617768, "post_id": 37974818, "comment_id": 63396330, "body": "@DieterL&#252;cking he&#39;s using <code>aligned_storage_t</code> not <code>aligned_storage</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1466617907, "post_id": 37974818, "comment_id": 63396409, "body": "@DieterL&#252;cking, I am not :) (in the declaration, at least)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1466618258, "post_id": 37974818, "comment_id": 63396598, "body": "Anyway, you do not need <code>std::aligned_storage_t</code>, a plain <code>char storage[sizeof(MyClass2)];</code> will do it too."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 4, "last_activity_date": 1466617930, "last_edit_date": 1466617930, "creation_date": 1466617062, "answer_id": 37974818, "question_id": 37974622, "link": "https://stackoverflow.com/questions/37974622/use-placement-new-to-create-a-static-const-pointer-to-a-static-memory-buffer/37974818#37974818", "title": "Use placement new to create a static const pointer to a static memory buffer", "body": "<p>When your variables are static, you can't initialize them in constructor. It just doesn't make sense! What you want to do is something like</p>\n\n<p>(in header)</p>\n\n<pre><code>class MyClass1 {\n   // member    \n   public:\n      static MyClass2 *const  _my_class_2_ptr;\n      static std::aligned_storage_t&lt;sizeof(MyClass2)&gt; _my_class_2_buf; \n};\n</code></pre>\n\n<p>(in cpp)</p>\n\n<pre><code>std::aligned_storage_t&lt;sizeof(MyClass2)&gt; MyClass1::_my_class_2_buf;\nMyClass2* const MyClass1::_my_class_2_ptr = new (&amp;MyClass1::_my_class_2_buf) MyClass2;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1466617070, "creation_date": 1466617070, "answer_id": 37974823, "question_id": 37974622, "link": "https://stackoverflow.com/questions/37974622/use-placement-new-to-create-a-static-const-pointer-to-a-static-memory-buffer/37974823#37974823", "title": "Use placement new to create a static const pointer to a static memory buffer", "body": "<p>You can move the definitions and intializations of the <code>static</code> member variables outside the class.</p>\n\n<pre><code>class MyClass1 {\n   public:\n       MyClass1() {}\n\n   private:\n      static MyClass2 *const  _my_class_2_ptr;\n      static char *_my_class_2_buf; \n};\n\nchar *MyClass2::_my_class_2_buf = new char[sizeof(MyClass2)]; \nMyClass2 *const  MyClass1::_my_class_2_ptr = new (_my_class_2_buf) MyClass2();\n</code></pre>\n"}], "owner": {"reputation": 1473, "user_id": 139996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/139e403bc51d49d3de61db25632e8ec4?s=128&d=identicon&r=PG", "display_name": "Bitrex", "link": "https://stackoverflow.com/users/139996/bitrex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 37974818, "answer_count": 2, "score": 2, "last_activity_date": 1466617930, "creation_date": 1466616284, "question_id": 37974622, "link": "https://stackoverflow.com/questions/37974622/use-placement-new-to-create-a-static-const-pointer-to-a-static-memory-buffer", "title": "Use placement new to create a static const pointer to a static memory buffer", "body": "<p>I'd like to initialize a static, constant pointer to an object of class type MyClass2, which is stored in a static data buffer in class MyClass1 when it is instantiated.</p>\n\n<p>This doesn't work:</p>\n\n<pre><code>class MyClass1 {\n   public:\n       MyClass1()\n       {\n           _my_class_2_ptr = new (_my_class_2_buf) MyClass2();\n       }\n\n   private:\n      static MyClass2 *const  _my_class_2_ptr;\n      static char *_my_class_2_buf = new char[sizeof(MyClass2)]; \n};\n</code></pre>\n\n<p>Is there a way to accomplish something like this?</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "constructor", "variadic-templates"], "comments": [{"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1466616386, "post_id": 37974603, "comment_id": 63395482, "body": "can you add the parameter on the beginning of the constructor? <code>Ts&amp;&amp;...</code> at the front of the function/constructor parameter list is non deduced context..."}, {"owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1466616508, "post_id": 37974603, "comment_id": 63395560, "body": "@W.F. Why is it not a template deduction context? When can it be deduced?"}, {"owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1466616604, "post_id": 37974603, "comment_id": 63395622, "body": "@W.F. Yes, it compiles, when I put the additional arguments before the <code>Ts&amp;&amp;...</code> argument pack. But I would like to have them come after the pack."}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 1, "creation_date": 1466616716, "post_id": 37974603, "comment_id": 63395682, "body": "unfortunately it is due to c++11 specification where function template parameter pack can only be deduced when it appears as a last parameter..."}, {"owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1466616804, "post_id": 37974603, "comment_id": 63395740, "body": "@W.F. Is there a way to work around this?"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1466616974, "post_id": 37974603, "comment_id": 63395841, "body": "You could try to play with a std::tuple to make it work... I&#39;ll try to figure it out and post an answer..."}], "answers": [{"tags": [], "owner": {"reputation": 2113, "user_id": 1927176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d4YlH.jpg?s=128&g=1", "display_name": "fnc12", "link": "https://stackoverflow.com/users/1927176/fnc12"}, "is_accepted": false, "score": 3, "last_activity_date": 1466617653, "creation_date": 1466617653, "answer_id": 37974999, "question_id": 37974603, "link": "https://stackoverflow.com/questions/37974603/how-do-i-derive-and-add-new-arguments-to-the-base-version-of-the-constructor/37974999#37974999", "title": "How do I derive and add new arguments to the base version of the constructor?", "body": "<p>You have to move varargs to the end of arguments list.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;utility&gt;\n\nstruct X\n{\n    X( int i_ ) : i(i_) {}\n    int i;\n};\n\nstruct Y : X\n{\n    template &lt;typename ...Ts&gt;        \n    Y( std::string s_, Ts&amp;&amp;...args )     //   &lt;==== like this\n    : X( std::forward&lt;Ts&gt;(args)... )\n    , s( std::move(s_) )\n    {}\n\n    std::string s;\n};\n\nint main()\n{\n    Y y( \"\", 1 ); \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1466618710, "post_id": 37975278, "comment_id": 63396840, "body": "Don&#39;t copy my solution! :)"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1466619283, "post_id": 37975278, "comment_id": 63397156, "body": "By the way shouldn&#39;t there be <code>std::tuple&lt;Ts&amp;&amp;...&gt;{std::forward&lt;Ts&gt;(args)...}}</code> in line 24?"}, {"owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "edited": false, "score": 0, "creation_date": 1466619356, "post_id": 37975278, "comment_id": 63397200, "body": "That&#39;s kinda what I suspected. I seems to work, but it is all but obvious from the code what is happening."}, {"owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1466619473, "post_id": 37975278, "comment_id": 63397265, "body": "@W.F. I agree. This is where <code>std::forward_as_tuple()</code> can be used."}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "reply_to_user": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "edited": false, "score": 0, "creation_date": 1466619725, "post_id": 37975278, "comment_id": 63397437, "body": "@RalphTandetzky well I believe the code above is your best shot if you need add argument through inheritance at the end of constructor"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "edited": false, "score": 0, "creation_date": 1466623029, "post_id": 37975278, "comment_id": 63399209, "body": "@RalphTandetzky I agree, used <code>std::forward_as_tuple</code>. Right."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1466623088, "post_id": 37975278, "comment_id": 63399242, "body": "@W.F. Sorry, I didn&#39;t like the <code>all_but_the_last</code>-like structure... :-)"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 1, "creation_date": 1466624387, "post_id": 37975278, "comment_id": 63399892, "body": "@skypjack Heh actually I didn&#39;t use it just forgot to delete it :) And you ware first with complete answer... I was just playing around :)"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 1, "creation_date": 1466625620, "post_id": 37975278, "comment_id": 63400537, "body": "@W.F. I know, me too. ;-)"}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 3, "last_activity_date": 1466622869, "last_edit_date": 1466622869, "creation_date": 1466618643, "answer_id": 37975278, "question_id": 37974603, "link": "https://stackoverflow.com/questions/37974603/how-do-i-derive-and-add-new-arguments-to-the-base-version-of-the-constructor/37975278#37975278", "title": "How do I derive and add new arguments to the base version of the constructor?", "body": "<p>Here is a possible solution:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;utility&gt;\n#include&lt;functional&gt;\n#include&lt;tuple&gt;\n#include&lt;iostream&gt;\n\nstruct X\n{\n    X( int i_ ) : i(i_) {}\n    int i;\n};\n\nstruct Y : X\n{\n    template&lt;std::size_t... I, typename... A&gt;\n    Y(std::integer_sequence&lt;std::size_t, I...&gt;, std::tuple&lt;A...&gt; &amp;&amp;a)\n        : X( std::get&lt;I&gt;(a)... ),\n          s(std::move(std::get&lt;sizeof...(I)&gt;(a)))\n    { }\n\n    template &lt;typename ...Ts&gt;\n    Y( Ts&amp;&amp;...args )\n        : Y{std::make_index_sequence&lt;sizeof...(Ts)-1&gt;(),\n          std::forward_as_tuple(std::forward&lt;Ts&gt;(args)...)}\n    { }\n\n    std::string s;\n};\n\nint main()\n{\n    Y y( 1, \"foo\" );\n    std::cout &lt;&lt; y.s &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 37975278, "answer_count": 2, "score": 5, "last_activity_date": 1466622869, "creation_date": 1466616196, "question_id": 37974603, "link": "https://stackoverflow.com/questions/37974603/how-do-i-derive-and-add-new-arguments-to-the-base-version-of-the-constructor", "title": "How do I derive and add new arguments to the base version of the constructor?", "body": "<p>I'm trying to extend a base class with some data members and hence need some additional constructor arguments in addition to the constructor arguments that my base class needs. I want to forward the first constructor arguments to the base class. Here's what I tried:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;utility&gt;\n\nstruct X\n{\n    X( int i_ ) : i(i_) {}\n    int i;\n};\n\nstruct Y : X\n{\n    template &lt;typename ...Ts&gt;        // note: candidate constructor not viable: \n    Y( Ts&amp;&amp;...args, std::string s_ ) // requires single argument 's_', but 2 arguments \n//  ^                                // were provided\n    : X( std::forward&lt;Ts&gt;(args)... )\n    , s( std::move(s_) )\n    {}\n\n    std::string s;\n};\n\nint main()\n{\n    Y y( 1, \"\" ); // error: no matching constructor for initialization of 'Y'\n//    ^  ~~~~~\n}\n</code></pre>\n\n<p>However, the compiler (clang 3.8, C++14 mode) spits the following error messages at me (the main messages are also in the above source code for reading convenience):</p>\n\n<pre><code>main.cpp:23:7: error: no matching constructor for initialization of 'Y'\n    Y y( 1, \"\" );\n      ^  ~~~~~\nmain.cpp:13:5: note: candidate constructor not viable: requires single argument 's_', but 2 arguments were provided\n    Y( Ts&amp;&amp;...args, std::string s_ )\n    ^\nmain.cpp:10:8: note: candidate constructor (the implicit move constructor) not viable: requires 1 argument, but 2 were provided\nstruct Y : X\n       ^\nmain.cpp:10:8: note: candidate constructor (the implicit copy constructor) not viable: requires 1 argument, but 2 were provided\n1 error generated.\n</code></pre>\n\n<p>Why is clang trying to tell me, that my templated constructor has only one arguments, even though the number of arguments is variadic? How can I solve this?</p>\n"}, {"tags": ["python", "c++", "inheritance", "cython"], "owner": {"reputation": 1729, "user_id": 511184, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e0fd4d639161946649c90797396d320?s=128&d=identicon&r=PG", "display_name": "kiyo", "link": "https://stackoverflow.com/users/511184/kiyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1466615907, "creation_date": 1466615907, "question_id": 37974526, "link": "https://stackoverflow.com/questions/37974526/initialization-lists-in-cython-c-classes", "title": "Initialization lists in Cython c++ classes", "body": "<p>In the \"experimental_cpp_class_def\" functionality where you can write a C++ class in Cython (<a href=\"https://github.com/cython/cython/blob/master/tests/run/cpp_classes_def.pyx\" rel=\"nofollow\">https://github.com/cython/cython/blob/master/tests/run/cpp_classes_def.pyx</a>), is there syntax for initialization lists? This seems necessary to control which constructors get called in inherited classes.</p>\n\n<h2>Example</h2>\n\n<p>C++ \"myclass.h\":</p>\n\n<pre><code>namespace myclass\n{\n\nclass MyClass {\n      MyClass() { };\n      MyClass(int x) { };\n};\n</code></pre>\n\n<p>Cython:</p>\n\n<pre><code>cdef extern from \"myclass.h\" namespace \"myclass\":\n    cdef cppclass MyClass:\n         MyClass()\n         MyClass(int x)\n\ncdef cppclass SubClass(MyClass):\n         def __init__(int x):\n             # Implicitly calls MyClass::MyClass(), but would like to\n             # call MyClass::MyClass(x)            \n             pass\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "edited": false, "score": 0, "creation_date": 1466616372, "post_id": 37974510, "comment_id": 63395475, "body": "Note: use <a href=\"http://en.cppreference.com/w/cpp/language/nullptr\" rel=\"nofollow noreferrer\"><code>nullptr</code></a> instead of <code>NULL</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1584, "user_id": 3255098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8hsvD.png?s=128&g=1", "display_name": "Wikiti", "link": "https://stackoverflow.com/users/3255098/wikiti"}, "is_accepted": false, "score": 3, "last_activity_date": 1466616789, "last_edit_date": 1466616789, "creation_date": 1466616226, "answer_id": 37974611, "question_id": 37974510, "link": "https://stackoverflow.com/questions/37974510/how-is-the-recursive-call-to-destructor-made-in-linked-list/37974611#37974611", "title": "How is the recursive call to destructor made in linked list?", "body": "<p>It's basically a chain.</p>\n\n<p>Starting from the root node (which is the one who loses the ambit, and therefore, its deconstructor is called automatically), when calling <code>delete next;</code>, you are calling the deconstructor of the <code>next</code> element, and so on. When <code>next</code> is <code>NULL</code>, <code>0</code> or <code>nullptr</code>, the process will stop.</p>\n\n<p>You can also add indexes to the nodes, and see by yourself the destruction order.</p>\n"}, {"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 1, "last_activity_date": 1466643505, "last_edit_date": 1466643505, "creation_date": 1466616309, "answer_id": 37974632, "question_id": 37974510, "link": "https://stackoverflow.com/questions/37974510/how-is-the-recursive-call-to-destructor-made-in-linked-list/37974632#37974632", "title": "How is the recursive call to destructor made in linked list?", "body": "<blockquote>\n  <p>how did the destructor got called four times and how did it\n  automatically traverse through the linked list</p>\n</blockquote>\n\n<p>This is a common form of recursion.  </p>\n\n<hr>\n\n<p>A linked list is a recursive data structure.  </p>\n\n<p>I thought you might be interested in seeing a few more examples of recursion in a (home built and simple) single linked list.  </p>\n\n<hr>\n\n<p>Here is the ctor (simplified).  The parameter a_max specifies how many node elements to create. </p>\n\n<pre><code>LMBM::Node::Node(uint8_t a_max) :\n   m_nodeId            (++M_nodeCount),\n   m_next              (0), // linked list\n   //... other node initializers items\n{\n   if(a_max &gt; 1)\n   {\n      uint8_t nmax = static_cast&lt;uint8_t&gt;(a_max - 1);\n      m_next = new Node(nmax); // recurse create another Node\n      dtbAssert(m_next)(a_max); // confirm \n   }\n   else // (1 &gt;= a_max)\n   {\n      dtbAssert(1 == a_max)(a_max); // at least one node\n      // all requested nodes created\n   }\n\n   if (1 == m_nodeId) //i.e. the 1st node\n   {\n      M_firstNode   = this;   // capture list anchor to static\n      M_MAX_THREADS = a_max;  // capture list size to static\n\n      // ...  a few more actions\n   }\n\n} // LMBM::Node::Node(uint8_t a_max)\n</code></pre>\n\n<p>The above is extracted from running code, but I now consider this code not suitable to ship because when new fails (for any reason) the code asserts.  While my dtbAssert provides debugger support, it is not suitable for client use.  </p>\n\n<p>Yes, there are no loops here.</p>\n\n<p>Perhaps when you get used to it, the simplicity and ease of use are typical of recursion.</p>\n\n<p>The ctor extends the list with simple new (typically discouraged by many of your peers who prefer a smart pointer).  </p>\n\n<p>Each node gets assigned a unique m_node_id to aid debug.  </p>\n\n<p>The invocation to create this list is simply:</p>\n\n<pre><code>LMBM::Node nodes(LMBM::Node::DEFAULT_MAX_NODES);\n</code></pre>\n\n<p>Code in main (with limit checks) can pass in a user value for larger or smaller lists.  </p>\n\n<hr>\n\n<p>The dtor is much like from your blog finding (though in reversed sequence)</p>\n\n<pre><code>LMBM::Node::~Node(void)\n{\n   if(m_next) // delete objects and list\n      delete m_next; // recurse down the list\n\n   // ... clean up actions, if any \n\n   m_nodeId = 0;\n\n} // Node::~Node(void)\n</code></pre>\n\n<p>This dtor first spins to the end of the list, then while unwinding the stack does cleanup and delete activity.</p>\n\n<hr>\n\n<p>This init() method initializes some resources (semaphores, etc.), again, using recursion, and completing the last node's init() first.  </p>\n\n<pre><code>void LMBM::Node::init(void)\n{\n   if(m_next)\n      m_next-&gt;init(); // tail first\n\n   // 1. ALLOCATE resource, such as a semaphore\n   m_semIn = new Sem_t; // create 1 semaphore per thread\n   dtbAssert(m_semIn)(m_nodeId);\n\n   //std::cout &lt;&lt; \"m_semIn \" &lt;&lt; m_nodeId &lt;&lt; \" = \" &lt;&lt; (void*)m_semIn &lt;&lt; \"\\n\";\n\n   // 2. INITIALIZE default Sem_t ctor is ok\n\n} // void LMBM::Node::init(void)\n</code></pre>\n\n<p>(No loops here, either.)</p>\n\n<p>FYI - LMBM::Sem_t has 4 lines of C++ code, and via the Linux API wraps a single Posix Process Semaphore, set to local mode (unnamed, unshared).  </p>\n\n<p>It turns out that this Posix semaphore does work with std::threads as well as posix threads - one of the things I was testing here.</p>\n\n<hr>\n\n<p>Here is startApp().  I won't show much more than the recursion used... in the example from which I snapshot this code, a thread performs each node's activities.</p>\n\n<pre><code>void LMBM::Node::startApp(void)   // activate threads\n{\n   if(m_next)\n      m_next-&gt;startApp(); // recurse to end of linked list\n\n   // 4. start my thread\n   m_thread = new std::thread (LMBM::Node::threadEntry, this);\n   dtbAssert(m_thread);\n\n   // ... confirm thread running state\n\n} // void LMBM::Node::startApp(void)   // activate threads\n</code></pre>\n\n<p>All the threads cooperate in one way or another.</p>\n\n<hr>\n\n<p>At this point, I have N nodes; each node has a thread; and what the thread does can be determined by m_node_id; and debugger cout's can be augmented with thread id's that are of 1..10 nature instead of the system id's.  </p>\n"}, {"comments": [{"owner": {"reputation": 1069, "user_id": 1811449, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5276b79cbfae8a0bd6373d6c96039e0c?s=128&d=identicon&r=PG", "display_name": "pokche", "link": "https://stackoverflow.com/users/1811449/pokche"}, "edited": false, "score": 0, "creation_date": 1466617484, "post_id": 37974705, "comment_id": 63396165, "body": "So basically next is initially pointing to root or 1 ( suppose next is not null and there are chain of nodes) (1-&gt;2-&gt;3), so the root gets deleted and it becomes (2-&gt;3) .. I am still curious how did the 2&#39;s destructor now gets called since I have not advanced my pointer to 2"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 1069, "user_id": 1811449, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5276b79cbfae8a0bd6373d6c96039e0c?s=128&d=identicon&r=PG", "display_name": "pokche", "link": "https://stackoverflow.com/users/1811449/pokche"}, "edited": false, "score": 2, "creation_date": 1466619990, "post_id": 37974705, "comment_id": 63397574, "body": "@pokche You have a list of objects all with a <code>next</code> pointer pointing to the next object. When you call <code>delete</code> on the first object, its destructor calls delete on <i>its</i> next object which calls <code>delete</code> on <i>its</i> next object etc.. until there is no next object because the pointer is <code>nullptr</code>."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 9, "last_activity_date": 1466617113, "last_edit_date": 1466617113, "creation_date": 1466616625, "answer_id": 37974705, "question_id": 37974510, "link": "https://stackoverflow.com/questions/37974510/how-is-the-recursive-call-to-destructor-made-in-linked-list/37974705#37974705", "title": "How is the recursive call to destructor made in linked list?", "body": "<p>This code:</p>\n\n<pre><code>~LNode() { delete next; } // destructor\n</code></pre>\n\n<p>If <code>next</code> is set to <code>0</code>, <code>NULL</code> or <code>nullptr</code> nothing will happen. However if it is set to the address of the following <code>LNode</code> it will cause the following <code>LNode's</code> <em>destructor</em> to run. Its <em>destructor</em> will do the same thing causing <em>its</em> following <code>LNode</code> to be destroyed and so on until you encounter a <code>next</code> variable that equals <code>nullptr</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 656, "user_id": 1052689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80cf23b75055dc4831dbd9e5d63e508?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Korous", "link": "https://stackoverflow.com/users/1052689/jan-korous"}, "is_accepted": false, "score": 2, "last_activity_date": 1466620284, "last_edit_date": 1466620284, "creation_date": 1466617329, "answer_id": 37974903, "question_id": 37974510, "link": "https://stackoverflow.com/questions/37974510/how-is-the-recursive-call-to-destructor-made-in-linked-list/37974903#37974903", "title": "How is the recursive call to destructor made in linked list?", "body": "<p><code>delete</code> and destructor call are two subtly different things. But each time you delete (non NULL) pointer to <code>LNode</code> it's destructor is called.</p>\n\n<p>See this question for details: <a href=\"https://stackoverflow.com/questions/677653/does-delete-call-the-destructor\">Does delete call the destructor?</a></p>\n\n<p>Destructor of <code>root</code> instance is called when it goes out of scope at the end of <code>main()</code>:</p>\n\n<pre><code>int main()\n{   \n   LNode root(1);\n   root.add_to_end(2);\n   root.add_to_end(3);\n   root.add_to_end(4);\n/* Destructor of root is called here. Imagine this is present here: */\n   root.~LNode(); // calling destructor on object root\n}\n</code></pre>\n\n<p><code>~LNode</code> destructor calls <code>delete next;</code> which in turns calls destructor of that object which in turn... The whole recursion is stopped when <code>delete next;</code> is called on <code>NULL</code> pointer which does nothing (definitely not calling any destructor).</p>\n\n<p>Your callstack when the last destructor is called will look like this:</p>\n\n<pre><code>root.~LNode()\ndelete root.next\nroot.next.~LNode()\ndelete root.next-&gt;next\nroot.next-&gt;next-&gt;~LNode()\ndelete root.next-&gt;next-&gt;next\nroot.next-&gt;next-&gt;next-&gt;~LNode()\n</code></pre>\n\n<p>and then <code>delete next;</code> is actually called on <code>NULL</code> and recursion stops.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6501053, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/c9c9c02c05c8913372c1cddea9d09a55?s=128&d=identicon&r=PG", "display_name": "PMar", "link": "https://stackoverflow.com/users/6501053/pmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1466625263, "creation_date": 1466625263, "answer_id": 37977116, "question_id": 37974510, "link": "https://stackoverflow.com/questions/37974510/how-is-the-recursive-call-to-destructor-made-in-linked-list/37977116#37977116", "title": "How is the recursive call to destructor made in linked list?", "body": "<p>A tiny clarification: The <strong>delete next;</strong> call causes the destructor to be called on the nodes from first to last - <em>but the actual storage reclamation occurs from last to first</em>.  I.e, this is the sequence:</p>\n\n<pre><code> 1) destructor invoked on node 1.\n 2)   delete called with pointer to node 2.\n 3)   destructor invoked on node 2.\n 4)     delete called with pointer to node 3.\n 5)     destructor invoked on node 3.\n 6)       delete called with pointer to node 4.\n 7)       destructor invoked on node 4.\n 8)         delete called with nullptr.\n 9)       destructor call at (7) reclaims node 4 and returns.\n10)     destructor call at (5) reclaims node 3 and returns.\n11)   destructor call at (3) reclaims node 2 and returns.\n12) destructor call at (1) reclaims node 1 and returns.\n</code></pre>\n"}], "owner": {"reputation": 1069, "user_id": 1811449, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5276b79cbfae8a0bd6373d6c96039e0c?s=128&d=identicon&r=PG", "display_name": "pokche", "link": "https://stackoverflow.com/users/1811449/pokche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4923, "favorite_count": 1, "accepted_answer_id": 37974705, "answer_count": 5, "score": 4, "last_activity_date": 1466694973, "creation_date": 1466615852, "last_edit_date": 1466694973, "question_id": 37974510, "link": "https://stackoverflow.com/questions/37974510/how-is-the-recursive-call-to-destructor-made-in-linked-list", "title": "How is the recursive call to destructor made in linked list?", "body": "<p>I was going through <a href=\"http://www.informit.com/articles/article.aspx?p=2085179\" rel=\"nofollow\">this</a> blog post and came across this code.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nstruct LNode {\n   int data;\n   LNode* next;\n\n   LNode(int n){data = n; next = nullptr;}\n\n   void add_to_end(int n) {\n      if (next)\n         next-&gt;add_to_end(n);\n      else\n         next = new LNode(n);\n   }\n   ~LNode() { cout &lt;&lt; \" I am from LNode Destructor \" &lt;&lt; endl; delete next; }\n};\n\nint main()\n{   \n   LNode root(1);\n   root.add_to_end(2);\n   root.add_to_end(3);\n   root.add_to_end(4);\n\n}\n</code></pre>\n\n<p>The output of this code is </p>\n\n<pre><code> I am from LNode Destructor \n I am from LNode Destructor \n I am from LNode Destructor \n I am from LNode Destructor \n</code></pre>\n\n<p>For some reason I always thought I had to traverse through the linked list using some kind of <strong>while or for loop</strong> and go on deleting all the nodes that I had dynamically allocated using new. But in above code how did the destructor got called four times and how did it automatically traverse through the linked list creating this domino effect (completely deleting the allocated memory by itself ).</p>\n"}, {"tags": ["c++", "machine-learning", "neural-network"], "comments": [{"owner": {"reputation": 40758, "user_id": 3886, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fd04cb73de5ffd81321a85c45dc75724?s=128&d=identicon&r=PG", "display_name": "dicroce", "link": "https://stackoverflow.com/users/3886/dicroce"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466616856, "post_id": 37973950, "comment_id": 63395769, "body": "Given enough iterations, the output should match the expected output (which is passed to backward). It never does."}], "answers": [{"comments": [{"owner": {"reputation": 40758, "user_id": 3886, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fd04cb73de5ffd81321a85c45dc75724?s=128&d=identicon&r=PG", "display_name": "dicroce", "link": "https://stackoverflow.com/users/3886/dicroce"}, "edited": false, "score": 0, "creation_date": 1466616995, "post_id": 37974362, "comment_id": 63395852, "body": "Do all the layers need a bias?"}, {"owner": {"reputation": 656, "user_id": 1052689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80cf23b75055dc4831dbd9e5d63e508?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Korous", "link": "https://stackoverflow.com/users/1052689/jan-korous"}, "reply_to_user": {"reputation": 40758, "user_id": 3886, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fd04cb73de5ffd81321a85c45dc75724?s=128&d=identicon&r=PG", "display_name": "dicroce", "link": "https://stackoverflow.com/users/3886/dicroce"}, "edited": false, "score": 0, "creation_date": 1466617416, "post_id": 37974362, "comment_id": 63396117, "body": "@dicroce Only hidden one in this case."}], "tags": [], "owner": {"reputation": 656, "user_id": 1052689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80cf23b75055dc4831dbd9e5d63e508?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Korous", "link": "https://stackoverflow.com/users/1052689/jan-korous"}, "is_accepted": false, "score": 4, "last_activity_date": 1466615246, "creation_date": 1466615246, "answer_id": 37974362, "question_id": 37973950, "link": "https://stackoverflow.com/questions/37973950/super-minimal-xor-neural-network-cannot-learn-what-did-i-do-wrong/37974362#37974362", "title": "Super minimal XOR neural network cannot learn... What did I do wrong?", "body": "<p>I am missing bias (treshold, base signal) in your neuron model.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Artificial_neuron#Basic_structure\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Artificial_neuron#Basic_structure</a></p>\n\n<p>You also probably don't want to make such drastic correction in backpropagation.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Backpropagation#Phase_2:_Weight_update\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Backpropagation#Phase_2:_Weight_update</a></p>\n\n<blockquote>\n  <p>Subtract a ratio (percentage) of the gradient from the weight.</p>\n</blockquote>\n\n<p>Ratio might be lower than 100%.</p>\n"}], "owner": {"reputation": 40758, "user_id": 3886, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fd04cb73de5ffd81321a85c45dc75724?s=128&d=identicon&r=PG", "display_name": "dicroce", "link": "https://stackoverflow.com/users/3886/dicroce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466616030, "creation_date": 1466613854, "last_edit_date": 1466616030, "question_id": 37973950, "link": "https://stackoverflow.com/questions/37973950/super-minimal-xor-neural-network-cannot-learn-what-did-i-do-wrong", "title": "Super minimal XOR neural network cannot learn... What did I do wrong?", "body": "<p>Teaching myself the basics of neural networks and I decided to take a crack at a super minimal network learning the XOR function. It consists of two input neurons, two hidden neurons and an output neuron. The problem is that it doesn't learn.. so I must be doing something wrong in my backward()? The code is super minimal and should compile with any c++11 supporting compiler.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;algorithm&gt;\n#include &lt;numeric&gt;\n\nusing namespace std;\n\nfloat tanh_activate(float x) { return (exp(2*x)-1)/(exp(2*x)+1); }\nfloat tanh_gradient(float x) { return 1-x*x; }\n\nvector&lt;float&gt; input = { 0.0f, 0.0f };\nvector&lt;float&gt; hiddenW = { 0.5f, 0.5f };\nvector&lt;float&gt; hidden = { 0.0f, 0.0f };\nvector&lt;float&gt; output = { 0.0f };\n\nvoid forward()\n{\n    float inputSum = accumulate( input.begin(), input.end(), 0.0f );\n    hidden[0] = tanh_activate( inputSum ) * hiddenW[0];\n    hidden[1] = tanh_activate( inputSum ) * hiddenW[1];\n    output[0] = tanh_activate( accumulate( hidden.begin(), hidden.end(), 0.0f ) );\n}\n\nvoid backward( float answer )\n{\n    auto outputError = answer - output[0];\n\n    auto error = outputError * tanh_gradient( output[0] );\n\n    auto layerError = accumulate( hiddenW.begin(),\n                                  hiddenW.end(),\n                                  0.0f,\n                                  [error]( float sum, float w ) {\n                                      return sum + (w * error);\n                                  } );\n\n    // Calculating error for each activation in hidden layer but this is unused\n    // currently since their is only one hidden layer.\n    vector&lt;float&gt; layerE( hidden.size() );\n\n    transform( hidden.begin(),\n               hidden.end(),\n               layerE.begin(),\n               [layerError]( float a ) {\n                   return tanh_gradient( a ) * layerError;\n               } );\n\n    // update weights\n    for( auto wi = hiddenW.begin(), ai = hidden.begin(); wi != hiddenW.end(); ++wi, ++ai )\n        *wi += *ai * error;\n}\n\nint main( int argc, char* argv[] )\n{\n    for( int i = 0; i &lt; 10000000; ++i )\n    {\n        // pick two bits at random...\n        int i1 = ((random() % 2)==0)?1.0f:0.0f;\n        int i2 = ((random() % 2)==0)?1.0f:0.0f;\n\n        // load our input layer...\n        input[0] = (float)i1;\n        input[1] = (float)i2;\n\n        // compute network output...\n        forward();\n\n        // we're teaching our network XOR\n        float expected = ((i1^i2)==0) ? 0.0f : 1.0f;\n\n        if( i % 10000 == 0 )\n        {\n            printf(\"output = %f\\n\",output[0]);\n            printf(\"expected = %f\\n\",expected);\n        }\n\n        // backprop...\n        backward( expected );\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "boost"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1466634273, "post_id": 37973803, "comment_id": 63404331, "body": "Sure, it&#39;s just a library, link with it and there you go (you may need to link with python lib as well, don&#39;t recall of the top of my head). I guess I&#39;m lazy, so I&#39;ve never even bothered using bjam for anything else than building boost itself. TBH the official tutorial is rather unfortunate, since i constantly see people here struggling with boost.python usually since they believe that they have to use bjam (and fail in doing so)."}], "answers": [{"tags": [], "owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "is_accepted": false, "score": 1, "last_activity_date": 1466635136, "creation_date": 1466635136, "answer_id": 37979379, "question_id": 37973803, "link": "https://stackoverflow.com/questions/37973803/can-i-compile-boost-python-module-without-bjam/37979379#37979379", "title": "Can I compile boost.python module without bjam?", "body": "<p>Yes, absolutely, it's a library like any other.</p>\n\n<p>I always use it with CMake, but anything will do. You need to</p>\n\n<ul>\n<li>Add to include paths the location of the boost headers.</li>\n<li>Add to include paths the location of python headers (usually installed with Python, location depends on OS)</li>\n<li>Link with the appropriate boost.python library (e.g. in my case it's <code>boost_python-vc120-mt-1_58.lib</code> or <code>boost_python-vc120-mt-gd-1_58.lib</code>, again depends on version/os/toolkit)</li>\n</ul>\n"}], "owner": {"reputation": 9429, "user_id": 1264018, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c0338476eea2e564d77246b7234773e1?s=128&d=identicon&r=PG&f=1", "display_name": "feelfree", "link": "https://stackoverflow.com/users/1264018/feelfree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1466635136, "creation_date": 1466613417, "question_id": 37973803, "link": "https://stackoverflow.com/questions/37973803/can-i-compile-boost-python-module-without-bjam", "title": "Can I compile boost.python module without bjam?", "body": "<p>Boost.python module provides a easy way of blinding c/c++ codes into Python. However, most tutorials assume that bjam is used to compile this module. I was wondering if I do not compile this module can I still use this module? What I mean \"do not compile this module\" is  including all the source files of Boost.python in my current project. I did it for other modules from Boost. For example, the Boost.filesystem module, when I use this module, I just include all the files from this module and compile them with the codes I have written. Thanks. </p>\n"}, {"tags": ["python", "c++", "boost", "graph-tool"], "answers": [{"tags": [], "owner": {"reputation": 2040, "user_id": 3338479, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6rBMk.jpg?s=128&g=1", "display_name": "lucidyan", "link": "https://stackoverflow.com/users/3338479/lucidyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1475668542, "creation_date": 1475668542, "answer_id": 39873286, "question_id": 37973680, "link": "https://stackoverflow.com/questions/37973680/importerror-libboost-iostreams-so-1-61-0-cannot-open-shared-object-file-no-su/39873286#39873286", "title": "ImportError: libboost_iostreams.so.1.61.0: cannot open shared object file: No such file or directory", "body": "<p>Seems you have wrong <code>boost</code> package version installed by conda</p>\n\n<ol>\n<li>List installed conda boost package in current environment <code>conda list | grep boost</code>, you can see wrong version (not 1.61.0)</li>\n<li>Search required version <code>anaconda search -t conda boost | grep 1.61.0</code></li>\n<li>Install correct version with <strong>same</strong> name <code>conda install boost -c CHANNEL_NAME</code></li>\n</ol>\n\n<p>In my case I also have conflicts with this message:</p>\n\n<p><code>Linking packages ...\nCondaOSError: OS error: failed to link (src='/home/user/anaconda3/pkgs/icu-54.1-0/lib/icu/pkgdata.inc', dst='/home/user/anaconda3/envs/py3_graph/lib/icu/pkgdata.inc', type=3, error=FileExistsError(17, 'File exists'))</code></p>\n\n<p>Removing <code>/home/user/anaconda3/envs/py3_graph/lib/icu</code> folder helps me</p>\n"}], "owner": {"reputation": 999, "user_id": 5313508, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cc324fd94b4258a000a5aa5e79da99a5?s=128&d=identicon&r=PG&f=1", "display_name": "P-M", "link": "https://stackoverflow.com/users/5313508/p-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1845, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1475668542, "creation_date": 1466612970, "question_id": 37973680, "link": "https://stackoverflow.com/questions/37973680/importerror-libboost-iostreams-so-1-61-0-cannot-open-shared-object-file-no-su", "title": "ImportError: libboost_iostreams.so.1.61.0: cannot open shared object file: No such file or directory", "body": "<p>I am using Anaconda as my main python distribution (though also have the system's default python installed) so have to compile graph-tool from source to get it to work with Anaconda. </p>\n\n<p>I am using Ubuntu 14.04 so also have to compile boost from source to be able to use the full functionality of graph-tool as the boost-coroutine library is currently only compiled as a static library (<a href=\"https://bugs.launchpad.net/ubuntu/+source/boost1.54/+bug/1529289\" rel=\"noreferrer\">https://bugs.launchpad.net/ubuntu/+source/boost1.54/+bug/1529289</a>). </p>\n\n<p>I have done so and they have both installed without any error messages, however, when then importing graph-tool in python using <code>from graph_tool.all import *</code> I get the error message <code>ImportError: libboost_iostreams.so.1.61.0: cannot open shared object file: No such file or directory</code>.</p>\n\n<p>How could I go about solving that problem/what is this caused by?</p>\n"}, {"tags": ["c++", "opencv", "neural-network"], "comments": [{"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 4, "creation_date": 1466624896, "post_id": 37973579, "comment_id": 63400154, "body": "C++ doesn&#39;t produce such exceptions, seems you are using a .NET language like C++/CLI."}, {"owner": {"reputation": 2124, "user_id": 6055233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041547c8fcabcab4b2536d730fa01d03?s=128&d=identicon&r=PG&f=1", "display_name": "Catree", "link": "https://stackoverflow.com/users/6055233/catree"}, "edited": false, "score": 0, "creation_date": 1466672744, "post_id": 37973579, "comment_id": 63418355, "body": "Maybe you could look to the <a href=\"https://github.com/Itseez/opencv/blob/master/samples/cpp/neural_network.cpp\" rel=\"nofollow noreferrer\">neural_network.cpp</a> sample if it helps. Also, I think it should be: <code>cv::Ptr&lt;cv::ml::ANN_MLP&gt; network = cv::ml::ANN_MLP::create();</code>?"}, {"owner": {"reputation": 29, "user_id": 6203061, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ihIafD-hoyg/AAAAAAAAAAI/AAAAAAAAAdY/GJLxreZehSQ/photo.jpg?sz=128", "display_name": "Patricia Javierre", "link": "https://stackoverflow.com/users/6203061/patricia-javierre"}, "edited": false, "score": 0, "creation_date": 1466674092, "post_id": 37973579, "comment_id": 63419271, "body": "Yes, thank you! It solved my problem!"}], "owner": {"reputation": 29, "user_id": 6203061, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ihIafD-hoyg/AAAAAAAAAAI/AAAAAAAAAdY/GJLxreZehSQ/photo.jpg?sz=128", "display_name": "Patricia Javierre", "link": "https://stackoverflow.com/users/6203061/patricia-javierre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 456, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1466675083, "creation_date": 1466612673, "last_edit_date": 1466675083, "question_id": 37973579, "link": "https://stackoverflow.com/questions/37973579/neural-networks-with-opencv", "title": "Neural Networks with openCV", "body": "<p>I am trying to train a Neural Network. But when I try to set the layers I get an exception: </p>\n\n<pre><code>An unhandled exception of type 'System.NullReferenceException' occurred.\n</code></pre>\n\n<p>I thought that it was because I create the Network outside the method i am using to train it; but when I create it inside, I get the same exception. Here is my code:</p>\n\n<pre><code>ml::ANN_MLP* nnetwork =ml::ANN_MLP::create ();\n\nstring eyes_cascadeclas2 = \"haarcascade_eye_tree_eyeglasses.xml\";\nCascadeClassifier eyes_cascade2;\n\n\n\nvoid TrainEye(string path) {\n\nvector &lt;Rect&gt; eyes;\neyes_cascade2.load(eyes_cascadeclas2);\nread_csvNN(path, images, Labels, ';');\nMat LabelsMat = Mat::zeros(72, 3, CV_32F);\nMat Images;\ncout &lt;&lt; images.size() &lt;&lt; endl;\nfor (int i = 0; i &lt; images.size(); i++) {\n    Size size(30, 30);\n    Mat image = imread(images[i]);\n    Boolean Empty = image.empty();\n    cout &lt;&lt; Empty &lt;&lt; endl;\n    imshow(\"Try\",image);\n    Mat imageHSV;\n    cvtColor(image, imageHSV, CV_BGR2HSV);\n    Mat ImgRE;\n    resize(imageHSV, ImgRE, size);\n    vector &lt;Mat&gt; HSV;\n    split(ImgRE, HSV);\n    //pongo todos los pixeles en una fila\n    HSV[0].reshape(0, 1);//Lo meto con solo la H\n    Images.push_back(HSV[0]);\n    vector &lt;int&gt; label (3);\n    label = { 0,0,0 };\n    label[Labels[i]-1] = 1;\n    Mat ForLabel = Mat(1, 3, CV_32F, &amp;label);\n    LabelsMat.push_back(ForLabel);\n}\n\nint layers_d[] = { 200,400,100,20,3 };\nMat layers = Mat(1, 5, CV_32S);\nlayers.at&lt;int&gt;(0,0) = layers_d[0];\nlayers.at&lt;int&gt;(0,1) = layers_d[1];\nlayers.at&lt;int&gt;(0,2) = layers_d[2];\nlayers.at&lt;int&gt;(0,3) = layers_d[3];\nlayers.at&lt;int&gt;(0,4) = layers_d[4];\n\n\nnnetwork-&gt;setLayerSizes(layers);\nnnetwork-&gt;setActivationFunction(ml::ANN_MLP::SIGMOID_SYM);\n//Ptr&lt;TrainData&gt; data = ;\n//ANN_MLP::TrainParams params = ANN_MLP_TrainParams(cvTermCriteria(CV_TERMCRIT_ITER + CV_TERMCRIT_EPS, 1000, 0.000001), ANN_MLP_TrainParams::BACKPROP, 0.1, 0.1);\n//no poner params se ajustan por defecto\nint iterations = nnetwork-&gt;train(Images,ROW_SAMPLE, LabelsMat);\ncout &lt;&lt; \"Number of iterations :\" &lt;&lt; endl;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "serialization"], "comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 2, "creation_date": 1466623173, "post_id": 37973490, "comment_id": 63399296, "body": "Note also that Qt does not even compile unless <code>CHAR_BIT == 8</code> and <code>sizeof(int) == 4</code>. This is explicitely tested: <a href=\"https://code.woboq.org/qt5/qtbase/src/corelib/global/qglobal.cpp.html#106\" rel=\"nofollow noreferrer\">code.woboq.org/qt5/qtbase/src/corelib/global/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1466614037, "creation_date": 1466614037, "answer_id": 37974011, "question_id": 37973490, "link": "https://stackoverflow.com/questions/37973490/how-to-portably-deserialize-qint32/37974011#37974011", "title": "How to portably (de)serialize qint32?", "body": "<p>I'm fairly certain that for all platforms supported by Qt the following holds <code>assert(CHAR_BIT == 8)</code>.</p>\n\n<p>Given that assumption, the only thing to worry about is byte endianness. Unfortunately, your cast does not take endianness into consideration. It writes the integer in native endianness, and reads assuming the data is native.</p>\n\n<p>De facto standard solution is to always convert to/from the <em>network endianness</em>, which is big endian. You'll find that Qt provides functions to do exactly that: <a href=\"http://doc.qt.io/qt-4.8/qtendian.html\" rel=\"nofollow\">http://doc.qt.io/qt-4.8/qtendian.html</a></p>\n\n<p>Edit: although, you might want to check out G.M.'s answer rather than implement serialization yourself.</p>\n"}, {"comments": [{"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "edited": false, "score": 0, "creation_date": 1466614584, "post_id": 37974016, "comment_id": 63394440, "body": "Thanks, the docs are even explicit : &quot;A data stream is a binary stream of encoded information which is 100% independent of the host computer&#39;s operating system, CPU or byte order. For example, a data stream that is written by a PC under Windows can be read by a Sun SPARC running Solaris.&quot; which I have missed for some reason."}], "tags": [], "owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "is_accepted": true, "score": 8, "last_activity_date": 1466614040, "creation_date": 1466614040, "answer_id": 37974016, "question_id": 37973490, "link": "https://stackoverflow.com/questions/37973490/how-to-portably-deserialize-qint32/37974016#37974016", "title": "How to portably (de)serialize qint32?", "body": "<p>You can use <a href=\"http://doc.qt.io/qt-5/qdatastream.html\" rel=\"noreferrer\">QDataStream</a> for (de)serializing.  It writes to/reads from anything that inherits from QIODevice and has explicit input and output operators for qint32.</p>\n"}, {"tags": [], "owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "is_accepted": false, "score": 0, "last_activity_date": 1470322081, "last_edit_date": 1470322081, "creation_date": 1466614194, "answer_id": 37974065, "question_id": 37973490, "link": "https://stackoverflow.com/questions/37973490/how-to-portably-deserialize-qint32/37974065#37974065", "title": "How to portably (de)serialize qint32?", "body": "<p>You are not limited with binary representation. Serialize them to a string (Qt has JSON support for example)</p>\n"}], "owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 37974016, "answer_count": 3, "score": 1, "last_activity_date": 1470322081, "creation_date": 1466612423, "last_edit_date": 1495539979, "question_id": 37973490, "link": "https://stackoverflow.com/questions/37973490/how-to-portably-deserialize-qint32", "title": "How to portably (de)serialize qint32?", "body": "<p>The documentation of Qt states that <code>qint32</code> is a typedef for <code>signed int</code> and is guaranteed to be 32-bit on all platforms supported by Qt. <a href=\"http://doc.qt.io/qt-5/qtglobal.html#qint32-typedef\" rel=\"nofollow noreferrer\">[docs]</a></p>\n\n<p><a href=\"http://www.cplusplus.com/doc/tutorial/variables/\" rel=\"nofollow noreferrer\">This</a> states that <code>signed int</code> must not be smaller than <code>short</code> and must be at least 16 bit in size. So there is no guarantee of the size in the typedef alone. Qt gets around that <a href=\"https://stackoverflow.com/questions/10692051/exact-width-integers-in-c-qt-is-typedef-int-qint32-really-correct\">it seems</a> though.</p>\n\n<p>So for (de)serialization with Qt this is good because the size will always be that. However this does not say anything about binary representation of those numbers I assume. And that matters when (de)serializing portably. For example doing this:</p>\n\n<pre><code>QFile file(\"somefile\");\nfile.open(QIODevice::WriteOnly);\nqint32 i = 10;\nfile.write(reinterpret_cast&lt;const char*&gt;(&amp;i), sizeof(i));\nfile.flush();\nfile.close();\n</code></pre>\n\n<p>will write <code>qint32</code> of value 10 to a file in a binary form. When I send that file over a network to another app written in Qt doing this:</p>\n\n<pre><code>QFile file(\"somefile\");\nfile.open(QIODevice::ReadOnly);\nqint32 i = 0;\nfile.read(reinterpret_cast&lt;char*&gt;(&amp;i), sizeof(i));\nfile.close();\n</code></pre>\n\n<p>I will indeed get a number back but is it guaranteed to always be 10? I do not think so as the binary representation of 10 on that machine might differ. But it is possible I understand it wrong and this is a non-issue (for Qt supported platforms at least).</p>\n\n<p>Hence my question: How to portably (de)serialize primitive types in Qt? Or is the size guarantee enough?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 63, "user_id": 4851872, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6ed96212c897cb7d83c336ee3116520d?s=128&d=identicon&r=PG&f=1", "display_name": "fdghfgdhfgh fghfghdfghdfghfg", "link": "https://stackoverflow.com/users/4851872/fdghfgdhfgh-fghfghdfghdfghfg"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1466613190, "post_id": 37973486, "comment_id": 63393589, "body": "That was an example, not what I was actually trying to do. Thanks either way."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1466613379, "post_id": 37973486, "comment_id": 63393702, "body": "Learn <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a> here please."}, {"owner": {"reputation": 63, "user_id": 4851872, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6ed96212c897cb7d83c336ee3116520d?s=128&d=identicon&r=PG&f=1", "display_name": "fdghfgdhfgh fghfghdfghdfghfg", "link": "https://stackoverflow.com/users/4851872/fdghfgdhfgh-fghfghdfghdfghfg"}, "edited": false, "score": 0, "creation_date": 1466614017, "post_id": 37973486, "comment_id": 63394077, "body": "Sir, learn how to read good questions please."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466614195, "post_id": 37973486, "comment_id": 63394170, "body": "@fdghfgdhfghfghfghdfghdfghfg This, is certainly not a <i>good question</i> regarding what&#39;s said in the help center article I pointed you. And other of your questions look the same train wreck."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "is_accepted": false, "score": 2, "last_activity_date": 1466612880, "creation_date": 1466612880, "answer_id": 37973646, "question_id": 37973486, "link": "https://stackoverflow.com/questions/37973486/c-how-to-fill-up-array-from-next-available-position-in-array/37973646#37973646", "title": "C++ How to fill up array from next available position in array?", "body": "<p>You need to have one more variable, <code>nextAvailablePosition</code>.</p>\n\n<pre><code>array[nextAvailablePosition++] = 5;\narray[nextAvailablePosition++] = 10;\n</code></pre>\n\n<p>Or just use <code>std::vector</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6500282, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/283b30ac6f4fd9ca6ac4fe2ad90f48fb?s=128&d=identicon&r=PG", "display_name": "DevereauxMcGill", "link": "https://stackoverflow.com/users/6500282/devereauxmcgill"}, "is_accepted": false, "score": 2, "last_activity_date": 1466612946, "creation_date": 1466612946, "answer_id": 37973666, "question_id": 37973486, "link": "https://stackoverflow.com/questions/37973486/c-how-to-fill-up-array-from-next-available-position-in-array/37973666#37973666", "title": "C++ How to fill up array from next available position in array?", "body": "<p>If you want to fill your array with incrementing multiples of 5:</p>\n\n<pre><code>int array[5];\nfor(int i=0; i&lt;5; i++) {\n    array[i] = (i+1) * 5;\n}\n</code></pre>\n\n<p>If you want to alternate between 5 and 10:</p>\n\n<pre><code>int array[5];\nfor(int i=0; i&lt;5; i++) {\n    array[i] = (i % 2 == 0) ? 5 : 10;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3265, "user_id": 4508758, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ELK6p.jpg?s=128&g=1", "display_name": "WiseTap", "link": "https://stackoverflow.com/users/4508758/wisetap"}, "is_accepted": false, "score": 0, "last_activity_date": 1466617790, "creation_date": 1466617790, "answer_id": 37975035, "question_id": 37973486, "link": "https://stackoverflow.com/questions/37973486/c-how-to-fill-up-array-from-next-available-position-in-array/37975035#37975035", "title": "C++ How to fill up array from next available position in array?", "body": "<p>See that the array will content the numbers between 0 and 14, because you are using the &lt; operator (i &lt; 5), if you want between 0 and 15, use &lt;=</p>\n\n<p>The answer for the specific question is creating a new variable</p>\n\n<pre><code>int array[5];\nint aux = 0; //New variable\nfor (int i=0; i&lt;15; i++){\n      if(i == 5 || i == 10){\n             array[aux] = i;\n             aux++; // aux = aux+1\n      }\n}\n</code></pre>\n\n<p>But in this case, the array will content the values of the i, it's not necessary to use the loop, you can do in this way:</p>\n\n<pre><code>array[0] = 5;\narray[1] = 10;\n</code></pre>\n\n<p>But maybe what you really want is put in the array the integers multiples of 5, so in this case, you can note that:</p>\n\n<p>A number multiple of 5 is a number that when divided by 5 left a remainder of 0, that is:</p>\n\n<pre><code>if (number % 5 == 0){\n      //number is multiple of 5\n}\n</code></pre>\n\n<p>So, if you want to put all numbers multiple of 5 betwen 0 and 15, what you can do is:</p>\n\n<pre><code>int array[5];\nint aux = 0; //New variable\nfor (int i=0; i&lt;=15; i++){ // &lt;= to use 15 too\n      if(i%5){\n             array[aux] = i;\n             aux++; // aux = aux+1\n      }\n}\n</code></pre>\n\n<p>Or a best way:</p>\n\n<pre><code>int value = 5;\nint array[5];\nint aux = 0;\nwhile(value &lt;= 15) {\n    array[aux] = value;\n    aux++;\n    value += 5; // value = value+5\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4851872, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6ed96212c897cb7d83c336ee3116520d?s=128&d=identicon&r=PG&f=1", "display_name": "fdghfgdhfgh fghfghdfghdfghfg", "link": "https://stackoverflow.com/users/4851872/fdghfgdhfgh-fghfghdfghdfghfg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 943, "favorite_count": 0, "closed_date": 1467968881, "answer_count": 3, "score": -1, "last_activity_date": 1466617790, "creation_date": 1466612416, "question_id": 37973486, "link": "https://stackoverflow.com/questions/37973486/c-how-to-fill-up-array-from-next-available-position-in-array", "closed_reason": "Needs details or clarity", "title": "C++ How to fill up array from next available position in array?", "body": "<p>I've initialised an array that will be filled up with values during runtime though I cannot figure out how to assign the next available position in the array with a value. For example</p>\n\n<pre><code>int array[5];\nfor (int i=0; i&lt;15; i++)\n    if(i == 5 || i == 10)\n        array[0] = i\n</code></pre>\n\n<p>I'd want the first value, 5 to be assigned to array[0] then the second value 10 to be assigned to array[1] etc. How would I go about doing this?</p>\n"}, {"tags": ["c++", "voxels", "openvdb"], "answers": [{"tags": [], "owner": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "is_accepted": false, "score": 0, "last_activity_date": 1469237036, "creation_date": 1469237036, "answer_id": 38537264, "question_id": 37973439, "link": "https://stackoverflow.com/questions/37973439/how-to-fill-openvdb-voxels-that-are-inside-a-given-plane/38537264#38537264", "title": "How to fill OpenVDB voxels that are inside a given plane?", "body": "<p>If the four points build a rectangle, it could be possible using the </p>\n\n<pre><code>void fill(const CoordBBox&amp; bbox, const ValueType&amp; value, bool active = true);\n</code></pre>\n\n<p>function that exists in the <code>Grid</code>-class. It is not possible to transform the <code>CoordBBox</code> for rotations, instead you would have to do that by changing the transformation of the grid. With pseudo-code it could look like</p>\n\n<pre><code>CoordBBox plane; // created from your points\nTransform old = grid.transform();\ngrid.setTransform(...); // Some transformation that places the grid correctly with respect to the plane\ngrid.fill(plane, 1);\ngrid.setTransform(old);\n</code></pre>\n\n<p>If this is not the case, you would have to set the values yourself.</p>\n"}], "owner": {"reputation": 102, "user_id": 1973207, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/557d7fa74d7ec23c6726f1c16986b032?s=128&d=identicon&r=PG", "display_name": "DuckQueen", "link": "https://stackoverflow.com/users/1973207/duckqueen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1469237036, "creation_date": 1466612318, "question_id": 37973439, "link": "https://stackoverflow.com/questions/37973439/how-to-fill-openvdb-voxels-that-are-inside-a-given-plane", "title": "How to fill OpenVDB voxels that are inside a given plane?", "body": "<p>I have a quad defined by 4 (x,y,z) points (like a plane that has edges). I have an OpenVDB grid. I want to fill all the voxels with value 1 that are inside my quad (including edges). Is such thing possible with out setting each voxel of the quad (limited plane) manually?</p>\n"}, {"tags": ["c++", "metaprogramming"], "comments": [{"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1466615012, "post_id": 37973436, "comment_id": 63394717, "body": "It is not clear what you want to achieve... Do you want to pass <code>T1</code> and <code>T2</code> struct to <code>GetConst</code> as template param or <code>Const&lt;Tx, val&gt;</code> or maybe <code>Compound</code> that would inherit from some <code>Const</code>?"}, {"owner": {"reputation": 7497, "user_id": 674683, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5ebc4b1bcbfecfd4e911798d5583fa00?s=128&d=identicon&r=PG", "display_name": "paperjam", "link": "https://stackoverflow.com/users/674683/paperjam"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1466632028, "post_id": 37973436, "comment_id": 63403566, "body": "Tried to clarify in an edit. Yes, want to pass T1 or T2 as template param and get back the corresponding int (111 or 222) as a constexpr."}], "answers": [{"comments": [{"owner": {"reputation": 7497, "user_id": 674683, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5ebc4b1bcbfecfd4e911798d5583fa00?s=128&d=identicon&r=PG", "display_name": "paperjam", "link": "https://stackoverflow.com/users/674683/paperjam"}, "edited": false, "score": 0, "creation_date": 1466633306, "post_id": 37978850, "comment_id": 63404014, "body": "I don&#39;t think this would work because <code>Compound</code> isn&#39;t allowed to be constructed within a <code>constexpr</code> f  - also C might not have copy/move constructors. It might be possible to have <code>getVal()</code> take a pointer and it might work???."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 7497, "user_id": 674683, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5ebc4b1bcbfecfd4e911798d5583fa00?s=128&d=identicon&r=PG", "display_name": "paperjam", "link": "https://stackoverflow.com/users/674683/paperjam"}, "edited": false, "score": 0, "creation_date": 1466633961, "post_id": 37978850, "comment_id": 63404226, "body": "Ah sorry, in my test case, Compound was a POD."}], "tags": [], "owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "is_accepted": true, "score": 2, "last_activity_date": 1466634268, "last_edit_date": 1466634268, "creation_date": 1466632123, "answer_id": 37978850, "question_id": 37973436, "link": "https://stackoverflow.com/questions/37973436/c-metafunction-to-retrieve-constexpr-from-templated-base-classes/37978850#37978850", "title": "C++ metafunction to retrieve constexpr from templated base classes", "body": "<p>Slightly different syntax ( constexpr function instead of a static member variable), but here you go:</p>\n\n<pre><code>template &lt;typename Tag, int v&gt;\nconstexpr int getVal(Const&lt;Tag, v&gt;) {\n    return v;\n}\n\ntemplate &lt;class C, typename Tag&gt;\nconstexpr int GetConst() {\n    return getVal&lt;Tag&gt;((C*)nullptr);\n}\n\nconstexpr int value = GetConst&lt;Compound,T2&gt;();\nint main() {        \n    std::cout &lt;&lt; value &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 2, "last_activity_date": 1466632986, "creation_date": 1466632986, "answer_id": 37979019, "question_id": 37973436, "link": "https://stackoverflow.com/questions/37973436/c-metafunction-to-retrieve-constexpr-from-templated-base-classes/37979019#37979019", "title": "C++ metafunction to retrieve constexpr from templated base classes", "body": "<p>A possible solution:</p>\n\n<pre><code>#include&lt;utility&gt;\n#include&lt;type_traits&gt;\n\ntemplate &lt;typename Tag, int v&gt;\nstruct Const { static constexpr int value = v; };\n\nstruct T1 {};\nstruct T2 {};\n\nstruct Compound: Const&lt;T1, 111&gt;, Const&lt;T2, 222&gt; { };\n\ntemplate &lt;typename Tag, int N&gt;\nconstexpr auto f(Const&lt;Tag, N&gt;) {\n    return std::integral_constant&lt;int, N&gt;{};\n};\n\nint main() {\n    static_assert((111 == decltype(f&lt;T1&gt;(std::declval&lt;Compound&gt;()))::value), \"!\");\n    static_assert((222 == decltype(f&lt;T2&gt;(std::declval&lt;Compound&gt;()))::value), \"!\");\n}\n</code></pre>\n\n<p>You can add one more function to capture the constant and return it if needed.</p>\n"}], "owner": {"reputation": 7497, "user_id": 674683, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5ebc4b1bcbfecfd4e911798d5583fa00?s=128&d=identicon&r=PG", "display_name": "paperjam", "link": "https://stackoverflow.com/users/674683/paperjam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 37978850, "answer_count": 2, "score": 2, "last_activity_date": 1466634268, "creation_date": 1466612305, "last_edit_date": 1466628799, "question_id": 37973436, "link": "https://stackoverflow.com/questions/37973436/c-metafunction-to-retrieve-constexpr-from-templated-base-classes", "title": "C++ metafunction to retrieve constexpr from templated base classes", "body": "<p>I have code that looks something like this:</p>\n\n<pre><code>template &lt;typename Tag, int v&gt;\nstruct Const\n{\n    static constexpr int value = v;\n};\n\n\nstruct Compound\n    :\n    Const&lt;struct T1, 111&gt;,\n    Const&lt;struct T2, 222&gt;\n{\n    Compound(); // constructor is not constexpr\n};\n</code></pre>\n\n<p>I would like to know a compile-time construct (e.g. metafunction) that given either <code>struct T1</code> or <code>struct T2</code> as argument can extract as <code>constexpr int</code> <code>111</code> or <code>222</code> respectively from <code>Compound</code>. </p>\n\n<p>I think I want a metafunction that looks something like this but don't know how to write it:</p>\n\n<pre><code>template &lt;class C, typename Tag&gt;\nstruct GetConst\n{\n    static constexpr int value = /* some magic */\n};\n\nGetConst&lt;Compound, struct T1&gt;::value == 111\nGetConst&lt;Compound, struct T2&gt;::value == 222\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "c", "build", "embedded", "code-duplication"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1466612431, "post_id": 37973363, "comment_id": 63393129, "body": "Most modern linkers get that optimized correctly anyways, I would simply ignore the SCA tools warnings for such case."}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 1, "creation_date": 1466612496, "post_id": 37973363, "comment_id": 63393173, "body": "The answer to this question explains that compilers can do such deduplication automatically: <a href=\"http://stackoverflow.com/questions/11399682/c-optimisation-of-string-literals\" title=\"c optimisation of string literals\">stackoverflow.com/questions/11399682/&hellip;</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466612572, "post_id": 37973363, "comment_id": 63393215, "body": "@Leon: Not a duplicate.  The text literals are not in a single file.  The issue also contains scoping."}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 2, "creation_date": 1466612809, "post_id": 37973363, "comment_id": 63393357, "body": "@ThomasMatthews I didn&#39;t mean that your question was a duplicate. Just wanted to provide some info."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1466612846, "post_id": 37973363, "comment_id": 63393374, "body": "The compiler will do constant folding and get rid of most (possibly all) the duplicates - across compilation units as well if you use LTO."}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466613005, "post_id": 37973363, "comment_id": 63393476, "body": "@ThomasMatthews gcc can perform string literal merging across translation units (during the linking stage): <a href=\"http://stackoverflow.com/a/26279717/6394138\">stackoverflow.com/a/26279717/6394138</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1466613166, "post_id": 37973363, "comment_id": 63393576, "body": "@Leon: That would not be gcc along, but requires support by the linker. (gcc is not a linker!)"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466613380, "post_id": 37973363, "comment_id": 63393703, "body": "Did you inspect the binary. Does it contain duplicates?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1466614150, "post_id": 37973363, "comment_id": 63394145, "body": "@2501: The library contains duplicate text literals."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 2, "creation_date": 1466615271, "post_id": 37973363, "comment_id": 63394854, "body": "What about putting all the strings in one global extern array, and using an enum type to give meaningful names to the indices? (though it&#39;s not quite &quot;no global variables&quot;)"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1466616961, "post_id": 37973363, "comment_id": 63395834, "body": "Can you use <a href=\"https://www.gnu.org/software/libc/manual/html_node/Message-Translation.html\" rel=\"nofollow noreferrer\">message catalogs</a>?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1466619445, "post_id": 37973363, "comment_id": 63397252, "body": "@MarkPlotnick:  The IAR compiler is not supporting message catalogs; but the concept seems to be the same as a <i>getter</i> function."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1466678737, "post_id": 37973363, "comment_id": 63422535, "body": "Are you using both C and C++ <i>compilation</i> or rather C++ compilation of code that is also valid C?  If you use C++ compilation, then the code <i>is</i> C++ - (even if it is also valid C)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1466719862, "post_id": 37973363, "comment_id": 63449497, "body": "There is no &quot;more C language than C++&quot;. They are different languages. Either you compile a compilation unit as C or as C++. If you mean &quot;C coding-style&quot;, it still would be C++ due to different semantics of identical syntax/grammar."}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1466619229, "creation_date": 1466619229, "answer_id": 37975443, "question_id": 37973363, "link": "https://stackoverflow.com/questions/37973363/best-practice-consolidating-duplicate-text-literals-across-many-translation-un/37975443#37975443", "title": "Best Practice - Consolidating duplicate text literals across many translation units", "body": "<p>I think if the linker really does have a problem with de-duplication, I'd use static functions to deliver literal strings:</p>\n\n<pre><code>// header file\n\nstruct text\n{\n  static const char* hello_world();\n};\n\n\n// one source file\n// #include \"text.hpp\"\nconst char* text::hello_world() {\n  static const char _[] = \"Hello, World\";\n  return _;\n}\n\n\n\n// use case\n\n// #include \"text.hpp\"\n#include &lt;iostream&gt;\n\nint main()\n{\n  std::cout &lt;&lt; text::hello_world() &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1466662637, "creation_date": 1466662637, "answer_id": 37983664, "question_id": 37973363, "link": "https://stackoverflow.com/questions/37973363/best-practice-consolidating-duplicate-text-literals-across-many-translation-un/37983664#37983664", "title": "Best Practice - Consolidating duplicate text literals across many translation units", "body": "<p>If the concern is only about string literals, you shouldn't need to change your code.</p>\n\n<p>What you need to do is to investigate how to enable <em>string pooling</em> on your compiler. This is an optimizer option which goes looking for identical string literals throughout your program. If it finds that the very same literals are used twice, it will allocate both of them at the very same memory address. This <em>should</em> work across several translation units.</p>\n\n<p>(In GCC this is called <code>-fmerge-constants</code>. I don't know what it is called in IAR.)</p>\n"}], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 1, "accepted_answer_id": 37983664, "answer_count": 2, "score": 3, "last_activity_date": 1466662637, "creation_date": 1466612099, "last_edit_date": 1466614106, "question_id": 37973363, "link": "https://stackoverflow.com/questions/37973363/best-practice-consolidating-duplicate-text-literals-across-many-translation-un", "title": "Best Practice - Consolidating duplicate text literals across many translation units", "body": "<p>Our company's static analysis tool is stating that there are duplicated strings (text literals).  The issue is that they are spread across many translation units (source files).  </p>\n\n<p>For example, the string \"NULL console pointer\" exists 1 time in module_a.c, 5 times in module_b.c and 1 time in module_f.c.  </p>\n\n<p>We also have coding guidelines that state there is to be no global variables.  </p>\n\n<p>We are to prefer to have no variables in header files.  </p>\n\n<p>Our platform is an embedded system, so consolidation of constant text will provide room for other purposes (and make the program load faster). In other words, there should only be one instance of the text literal.</p>\n\n<p><strong>So, what is an efficient design or architecture for consolidating constant text literals across multiple translation units?</strong>  </p>\n\n<p>Is there a length limit where duplication is not worth consolidating (such as the string <code>\"\\r\\n\"</code>?</p>\n\n<p>We would prefer solutions that are performance efficient, such as preferring direct access over calling a <em>getter</em> function.  </p>\n\n<p><em>(Note: at this time, the text does not need to be translated into multiple languages.)</em>  </p>\n\n<p>Languages:  C and C++ (The code base is more C language than C++).<br>\nProcessor:  ARM Cortex A8<br>\nPlatform:   Embedded system, safety and quality and performance critical (medical device).<br>\nCompilers:  IAR Embedded Workbench (for ARM processor).  </p>\n\n<p><strong>Edit 1: Linker Not Consolidating</strong><br>\nI scanned the BIN file and it does contain multiple instances of \"NULL console pointer\".  </p>\n\n<p>The linker has the option \"Merge duplicate section\" and I checked that.  The binary still contains duplicates.  </p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1466612305, "post_id": 37973300, "comment_id": 63393056, "body": "Your message loop is rather odd. Use the standard loop. Why write <code>#pragma once</code> twice? Declaring <code>hWnd</code> in the header file is going to comeback to haunt you. Don&#39;t do that. You&#39;ll have multiple instances which is not what you want. You don&#39;t want to use <code>tchar</code> these days. You are not supporting Windows 98."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1466615425, "post_id": 37973300, "comment_id": 63394935, "body": "TranslateMessage() goes before DispatchMessage(), not after."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1466616257, "post_id": 37973300, "comment_id": 63395413, "body": "That&#39;s pretty broken code, I&#39;m not going to point out all that&#39;s wrong. To get your immediate issue resolved do the following: In the project settings, go to <i>General</i> and select <i>&quot;Use Unicode Character Set&quot;</i>. On the Linker settings tab, choose <i>System</i> and change the subsystem to <i>&quot;/SUBSYSTEM:WINDOWS&quot;</i>. Replace your function name <code>winMain</code> with <code>wWinMain</code>. That&#39;ll link your executable. It&#39;ll break horribly at runtime, though."}, {"owner": {"reputation": 88, "user_id": 4332562, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/506316592/picture?type=large", "display_name": "Metric", "link": "https://stackoverflow.com/users/4332562/metric"}, "edited": false, "score": 0, "creation_date": 1466624219, "post_id": 37973300, "comment_id": 63399807, "body": "Thanks, that at least got it working, I know the code was pretty terrabad it was just the first example I&#39;ve worked through for win32 that I could find."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1466691549, "post_id": 37973300, "comment_id": 63432209, "body": "<i>Strongly</i> favor using the Win32 Project template to get you up and going. It ensures that you will not make these basic mistakes. Furthermore, I would recommend skipping the YouTube videos and purchasing <a href=\"https://rads.stackoverflow.com/amzn/click/com/157231995X\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">a used copy of Petzold&#39;s 5th Edition</a> if you want to learn Windows programming."}, {"owner": {"reputation": 88, "user_id": 4332562, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/506316592/picture?type=large", "display_name": "Metric", "link": "https://stackoverflow.com/users/4332562/metric"}, "edited": false, "score": 0, "creation_date": 1466694119, "post_id": 37973300, "comment_id": 63434227, "body": "Might not be a bad idea to get some sort of reference. Plus as it is out of date a bit, the knowledge would mostly be the rules rather then the current (constantly) changing aplication. Thanks, looks like a good text, I&#39;ll look into it."}], "answers": [{"tags": [], "owner": {"reputation": 871, "user_id": 4304844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vSjQh.jpg?s=128&g=1", "display_name": "tsandy", "link": "https://stackoverflow.com/users/4304844/tsandy"}, "is_accepted": false, "score": 2, "last_activity_date": 1466612248, "creation_date": 1466612248, "answer_id": 37973417, "question_id": 37973300, "link": "https://stackoverflow.com/questions/37973300/stuck-getting-windows-h-to-work-no-error-message-until-compile/37973417#37973417", "title": "Stuck getting Windows.h to work, no error message until compile.", "body": "<p>In main.cpp, you need to capitalize the function name: <code>int WINAPI WinMain</code></p>\n"}], "owner": {"reputation": 88, "user_id": 4332562, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/506316592/picture?type=large", "display_name": "Metric", "link": "https://stackoverflow.com/users/4332562/metric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "closed_date": 1466612251, "answer_count": 1, "score": 0, "last_activity_date": 1466612248, "creation_date": 1466611920, "question_id": 37973300, "link": "https://stackoverflow.com/questions/37973300/stuck-getting-windows-h-to-work-no-error-message-until-compile", "closed_reason": "Duplicate", "title": "Stuck getting Windows.h to work, no error message until compile.", "body": "<p>So I'm currently stuck trying to get the windows api to show up (language is c++), when I try to run the program I get the following errors. (though I am getting now error showing up in regards to the red underline). I am currently using visual studio community as my IDE. </p>\n\n<p>\"unresolved external symbol _main reference in function \"int _cdel invoke(main(void))\"</p>\n\n<p>\"1 resolved externals\"</p>\n\n<p>I've already checked online, and tried it both as a win 32 console program and a win 32 project (which some have listed as a way to resolve the program.) However no results. I have no idea what the error could be. (also for reference I am using the following tutorial as a starting base <a href=\"https://www.youtube.com/watch?v=012pFrYE5_k\" rel=\"nofollow\">https://www.youtube.com/watch?v=012pFrYE5_k</a>, but am not using the open GL library as all I am trying to accomplish is make a very simplified template of a win32 window). Any Idea's?</p>\n\n<p>Code: main.h</p>\n\n<pre><code>#pragma once\n#pragma once\n#include&lt;Windows.h&gt;\n#include&lt;tchar.h&gt;\n#include&lt;iostream&gt;\n#define WINDOW_WIDTH = 800 //remember to leave off the ; at the end of define sets(currently not being used\n#define WINDOW_HEIGHT = 600\nHWND hWnd;\n</code></pre>\n\n<p>Code: main.cpp</p>\n\n<pre><code>#include \"main.h\" //remember &lt;&gt; means library, \"\" means within your project. \n// long results, CALL BACK, windows procedure, basically the basics of what to do. UINT (unsigned INT)\nLRESULT CALLBACK WndProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam) {\n    switch (msg) {\n    case WM_CREATE:\n        break;\n    case WM_DESTROY:\n    case WM_QUIT:\n    case WM_CLOSE:\n        PostQuitMessage(0);\n        break;\n    }\n    return DefWindowProc(hWnd, msg, wParam, lParam);\n}\n/*\nremember that this is a run time instance, and is in essence the same as Main (char[args]) {}\nreturning 0 ends the operation of the win32 library.\n*/\nint WINAPI winMain(HINSTANCE hInstance, HINSTANCE hPrevious, LPSTR lpCmdLine, int nCmdShow)\n{\n    WNDCLASS wc; //default instance for the scope of the window (new window named WC for WINDOW CLASS)\n    MSG msg;\n    wc.cbClsExtra = 0;\n    wc.cbWndExtra = 0;\n    wc.hbrBackground = (HBRUSH)GetStockObject(LTGRAY_BRUSH); //default background color, set to stock light gray\n    wc.hCursor = LoadCursor(hInstance, IDC_ARROW); //default cursor\n    wc.hInstance = hInstance;\n    wc.lpfnWndProc = WndProc;\n    wc.lpszClassName = _T(\"NAME\");\n    wc.lpszMenuName = NULL;\n    wc.style = CS_VREDRAW | CS_HREDRAW;  //windows style in bit form, 0X00 hex if you were to print them\n    if (!RegisterClass(&amp;wc)) //pointer the to the window, if it doesn't exist call this simple error handle\n    {\n        MessageBox(NULL, _T(\"error: cannot reg window class\"), _T(\"error\"), MB_OK);\n        return 0; // kills \n    }\n    hWnd = CreateWindow(L\"NAME\", //reference of the object already defined as wc\n        L\"Window Title\", //title\n        WS_OVERLAPPEDWINDOW, //basic window style\n        0, //x start,\n        0, //y start,\n        800,\n        600,       //set all the dimensions to default value\n        NULL,                //no parent window\n        NULL,                //no menu\n        hInstance,\n        NULL);\n    if (!hWnd)\n    {\n        MessageBox(NULL, L\"ERROR: cannot create window\", L\"ERROR!\", MB_OK);\n        return 0;\n    }\n    while (1)\n    {\n        while (PeekMessage(&amp;msg, NULL, 0, 0, PM_NOREMOVE)) {\n            if (GetMessage(&amp;msg, NULL, 0, 0))\n            {\n                break;\n            }\n        }\n        DispatchMessage(&amp;msg);\n        TranslateMessage(&amp;msg);\n    }\n    return(int)msg.wParam;\n}\n</code></pre>\n"}, {"tags": ["c++", "build", "sublimetext3", "sublime-build"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1466619631, "post_id": 37973263, "comment_id": 63397381, "body": "Please <a href=\"https://stackoverflow.com/posts/37973263/edit\">edit</a> your question and give the contents of your <code>.sublime-build</code> file."}, {"owner": {"reputation": 57, "user_id": 2719475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e57d2e95a2e2f082f9a71641eacce1a4?s=128&d=identicon&r=PG&f=1", "display_name": "devidduma", "link": "https://stackoverflow.com/users/2719475/devidduma"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1466676005, "post_id": 37973263, "comment_id": 63420633, "body": "@MattDMo just did it."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1466700654, "post_id": 37973263, "comment_id": 63438649, "body": "I&#39;m assuming you ran the &quot;Run&quot; variant of the build system? If your program didn&#39;t exit normally, Sublime still thinks it&#39;s running. Does Windows still think it&#39;s running - i.e., does it show up in the Task Manager, or by running <code>ps -ax | grep programname.exe</code> from the Cygwin/bash shell, assuming you installed that. If so, try killing all instances through Task Manager (you may need to run it with Admin privileges) or by getting the PID(s) (Process ID) from the <code>ps</code> command earlier and running <code>kill -9 123456</code> or whatever the PID is."}, {"owner": {"reputation": 57, "user_id": 2719475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e57d2e95a2e2f082f9a71641eacce1a4?s=128&d=identicon&r=PG&f=1", "display_name": "devidduma", "link": "https://stackoverflow.com/users/2719475/devidduma"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1466702676, "post_id": 37973263, "comment_id": 63439942, "body": "@MattDMo thanks for pointing out the &quot;Run&quot; variant. Did a little check and found there is a difference in behaviour from the normal variant. I have reformulated the question from scratch now."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 2719475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e57d2e95a2e2f082f9a71641eacce1a4?s=128&d=identicon&r=PG&f=1", "display_name": "devidduma", "link": "https://stackoverflow.com/users/2719475/devidduma"}, "edited": false, "score": 0, "creation_date": 1466705283, "post_id": 37998448, "comment_id": 63441589, "body": "you are right, it is waiting for input. i copied the code above, but now this error shows up: &quot;shell_cmd or cmd is required [cmd: None] ...&quot; should i add a system variable cmd to point to cmd? or maybe change the cmd to ComSpec since it already points to the location of cmd.exe?"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 57, "user_id": 2719475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e57d2e95a2e2f082f9a71641eacce1a4?s=128&d=identicon&r=PG&f=1", "display_name": "devidduma", "link": "https://stackoverflow.com/users/2719475/devidduma"}, "edited": false, "score": 0, "creation_date": 1466706137, "post_id": 37998448, "comment_id": 63442170, "body": "@devidduma I erroneously removed the square brackets. Take a look at the JSON now and add <i>that</i> to the build system. The error has to do with the formatting, not <code>cmd.exe</code> itself. <code>&quot;variants&quot;</code> is an array, not a dict."}, {"owner": {"reputation": 57, "user_id": 2719475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e57d2e95a2e2f082f9a71641eacce1a4?s=128&d=identicon&r=PG&f=1", "display_name": "devidduma", "link": "https://stackoverflow.com/users/2719475/devidduma"}, "edited": false, "score": 0, "creation_date": 1466711006, "post_id": 37998448, "comment_id": 63445099, "body": "i did not know i had to install Package Control and PackageResourceViewer to modify the files, i was trying to edit them on my own. Everything works perfectly now, thanks a lot"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "reply_to_user": {"reputation": 57, "user_id": 2719475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e57d2e95a2e2f082f9a71641eacce1a4?s=128&d=identicon&r=PG&f=1", "display_name": "devidduma", "link": "https://stackoverflow.com/users/2719475/devidduma"}, "edited": false, "score": 0, "creation_date": 1466723898, "post_id": 37998448, "comment_id": 63450740, "body": "@devidduma Oh, sorry about that. I assumed since you had the contents of the build file you already had PackageResourceViewer."}], "tags": [], "owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1466706093, "last_edit_date": 1466706093, "creation_date": 1466703785, "answer_id": 37998448, "question_id": 37973263, "link": "https://stackoverflow.com/questions/37973263/building-c-files-on-sublime-text-3-not-ending/37998448#37998448", "title": "Building C++ files on Sublime Text 3 not ending", "body": "<p>Try editing the `\"Variants\" section like so:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\"variants\":\n[\n    {\n        \"name\": \"Run\",\n        \"shell_cmd\": \"g++ \\\"${file}\\\" -o \\\"${file_path}/${file_base_name}\\\" &amp;&amp; start cmd /k \\\"${file_path}/${file_base_name}\\\"\"\n    }\n]\n</code></pre>\n\n<p>This will start a separate instance of <code>cmd.exe</code> and run your newly-built executable within it. One possible reason your build isn't succeeding is the <code>.exe</code> may be waiting for input, which Sublime's console doesn't allow (it's not a true terminal).</p>\n"}], "owner": {"reputation": 57, "user_id": 2719475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e57d2e95a2e2f082f9a71641eacce1a4?s=128&d=identicon&r=PG&f=1", "display_name": "devidduma", "link": "https://stackoverflow.com/users/2719475/devidduma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 0, "accepted_answer_id": 37998448, "answer_count": 1, "score": 0, "last_activity_date": 1466706093, "creation_date": 1466611772, "last_edit_date": 1466703880, "question_id": 37973263, "link": "https://stackoverflow.com/questions/37973263/building-c-files-on-sublime-text-3-not-ending", "title": "Building C++ files on Sublime Text 3 not ending", "body": "<p>As you know, you can build a file in Sublime either:</p>\n\n<p><em>1) Through Ctrl+Shift+B (Build With) -> C++ Single File</em></p>\n\n<p><em>2) Through Ctrl+Shift+B (Build With) -> C++ Single File - Run</em></p>\n\n<p>Via the first option I have no problems: file compiles, Sublime confirms, and I don't experience any problems.</p>\n\n<p>If I do it the second way, Sublime can't stop the build process. Right after I click build, a process <em>'(file_name).exe(32 bit)'</em> on Task Manager is created, but the .exe program never runs automatically from Sublime (I have to run it myself), and Sublime never confirms the build.</p>\n\n<p>How can I fix this?</p>\n\n<p>Here is the sublime-build file:</p>\n\n<pre><code>{\n    \"shell_cmd\": \"g++ \\\"${file}\\\" -o \\\"${file_path}/${file_base_name}\\\"\",\n    \"file_regex\": \"^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$\",\n    \"working_dir\": \"${file_path}\",\n    \"selector\": \"source.c, source.c++\",\n\n    \"variants\":\n    [\n        {\n            \"name\": \"Run\",\n            \"shell_cmd\": \"g++ \\\"${file}\\\" -o \\\"${file_path}/${file_base_name}\\\" &amp;&amp; \\\"${file_path}/${file_base_name}\\\"\"\n        }\n    ]\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "cuda", "variadic-templates", "thrust"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1466611551, "post_id": 37973128, "comment_id": 63392555, "body": "<i>Maybe</i> unrelated to your problem, but tou might take a hint from just about <a href=\"http://en.cppreference.com/w/cpp/algorithm\" rel=\"nofollow noreferrer\">all standard algorithm functions</a> that take a &quot;predicate&quot; as argument. They don&#39;t really care about the arguments to the function, they just have a single <code>typename</code> template argument for the function."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 3, "creation_date": 1466611729, "post_id": 37973128, "comment_id": 63392669, "body": "If <code>someFunction</code> is a CUDA kernel (i.e. a <code>__global__</code> function), why have you not configured it in your example (at launch) or decorated it accordingly?  In my view this question is pretty unclear.  Is <code>otherFunction</code> intended to be callable from a <code>__global__</code> function?  If so, why haven&#39;t you decorated it accordingly?  You cannot take the address of a device function in host code, which appears to be what you are doing here (even if you decorated <code>otherFunction</code> with <code>__device__</code>, it still won&#39;t work as written)"}, {"owner": {"reputation": 225, "user_id": 3523927, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3e8f7c03d5a7614698a467212e161171?s=128&d=identicon&r=PG&f=1", "display_name": "martin", "link": "https://stackoverflow.com/users/3523927/martin"}, "edited": false, "score": 0, "creation_date": 1466612890, "post_id": 37973128, "comment_id": 63393403, "body": "The question is not about calling kernels from kernel function pointers. I leave this part out, becuase it works. It&#39;s about a compiler error when passing two arguments with variadic templates to a global function."}], "answers": [{"comments": [{"owner": {"reputation": 225, "user_id": 3523927, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3e8f7c03d5a7614698a467212e161171?s=128&d=identicon&r=PG&f=1", "display_name": "martin", "link": "https://stackoverflow.com/users/3523927/martin"}, "edited": false, "score": 0, "creation_date": 1466613486, "post_id": 37973630, "comment_id": 63393756, "body": "The reason why I use variadic templates is, that I want to pass arbitrary kernel function pointers to a scheduler. The tuple contains one set of parameters for one kernel."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "reply_to_user": {"reputation": 225, "user_id": 3523927, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3e8f7c03d5a7614698a467212e161171?s=128&d=identicon&r=PG&f=1", "display_name": "martin", "link": "https://stackoverflow.com/users/3523927/martin"}, "edited": false, "score": 0, "creation_date": 1466615449, "post_id": 37973630, "comment_id": 63394953, "body": "I&#39;ve added a second approach which I think addresses that concern.  You can pass arbitrary kernel function pointers to a scheduling kernel, which then dispatches those kernels with the supplied parameter pack."}, {"owner": {"reputation": 225, "user_id": 3523927, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3e8f7c03d5a7614698a467212e161171?s=128&d=identicon&r=PG&f=1", "display_name": "martin", "link": "https://stackoverflow.com/users/3523927/martin"}, "edited": false, "score": 0, "creation_date": 1466616525, "post_id": 37973630, "comment_id": 63395571, "body": "Thank you so much for your help! I don&#39;t want to change kernels outside the scheduler (e.g. otherFunction). I unpack the tuple to call kernels. I already have a CPU scheduler which works fine and this is the only missing part in a working GPU scheduler. Any further ideas? Thanks."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "reply_to_user": {"reputation": 225, "user_id": 3523927, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3e8f7c03d5a7614698a467212e161171?s=128&d=identicon&r=PG&f=1", "display_name": "martin", "link": "https://stackoverflow.com/users/3523927/martin"}, "edited": false, "score": 0, "creation_date": 1466625202, "post_id": 37973630, "comment_id": 63400305, "body": "I don&#39;t think sharing the parameter pack from <code>thrust::tuple&lt;Args...&gt;</code> with <code>(*fp)(Args...)</code> is going to work.  In the case of the <code>Args...</code> associated with your function, it is just <code>int</code>, but in the case of a thrust tuple with a single <code>int</code>, the <code>Args...</code> are actually <code>int, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type</code>, so we get the following note after your substitution failed message: <code>note:  inconsistent parameter pack deduction...</code>"}, {"owner": {"reputation": 225, "user_id": 3523927, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3e8f7c03d5a7614698a467212e161171?s=128&d=identicon&r=PG&f=1", "display_name": "martin", "link": "https://stackoverflow.com/users/3523927/martin"}, "edited": false, "score": 0, "creation_date": 1466656625, "post_id": 37973630, "comment_id": 63409910, "body": "Exactly! thrust::tuple is fixed size to 10, so that&#39;s the problem. As I said, it works with static functions, but not with global functions."}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": false, "score": 2, "last_activity_date": 1466615729, "last_edit_date": 1466615729, "creation_date": 1466612824, "answer_id": 37973630, "question_id": 37973128, "link": "https://stackoverflow.com/questions/37973128/passing-a-function-pointer-and-its-parameters-as-a-thrusttuple-to-a-global-fun/37973630#37973630", "title": "Passing a function pointer and its parameters as a thrust::tuple to a global function", "body": "<blockquote>\n  <p>Passing a function pointer and its parameters as a thrust::tuple to a global function</p>\n</blockquote>\n\n<p>Something like this should be workable:</p>\n\n<pre><code>$ cat t1161.cu\n#include &lt;thrust/tuple.h&gt;\n#include &lt;stdio.h&gt;\n\ntemplate &lt;typename T, typename T1&gt;\n__global__ void kernel(void (*fp)(T1), T params){ // \"someFunction\"\n\n  fp(thrust::get&lt;0&gt;(params));\n  fp(thrust::get&lt;1&gt;(params));\n}\n\n__device__ void df(int n){                        // \"otherFunction\"\n\n  printf(\"parameter = %d\\n\", n);\n}\n\n__device__ void (*ddf)(int) = df;\n\nint main(){\n\n  void (*hdf)(int);\n  thrust::tuple&lt;int, int&gt; my_tuple = thrust::make_tuple(1,2);\n  cudaMemcpyFromSymbol(&amp;hdf, ddf, sizeof(void *));\n  kernel&lt;&lt;&lt;1,1&gt;&gt;&gt;(hdf, my_tuple);\n  cudaDeviceSynchronize();\n}\n\n\n$ nvcc -o t1161 t1161.cu\n$ cuda-memcheck ./t1161\n========= CUDA-MEMCHECK\nparameter = 1\nparameter = 2\n========= ERROR SUMMARY: 0 errors\n$\n</code></pre>\n\n<p>A similar methodology should also be workable if you intend <code>df</code> to be a <code>__global__</code> function, you will just need to account properly for the dynamic parallelism case.   Likewise, only a slight variation on above should allow you to pass the tuple directly to the child function (i.e. <code>df</code>, whether device function or kernel). It's not clear to me why you need variadic template arguments if your parameters are nicely packaged up in a thrust tuple.</p>\n\n<p>EDIT:  If you can pass your tuple to the child kernel (I don't see why you wouldn't be able to, since according to your updated example the tuple and the child kernel share the same variadic parameter pack), then you may still be able to avoid variadic templates using this approach:</p>\n\n<pre><code>$ cat t1162.cu\n#include &lt;thrust/tuple.h&gt;\n#include &lt;stdio.h&gt;\n\ntemplate&lt;typename T&gt;\n__global__ void someFunction(void (*fp)(T), T params) {\n  fp&lt;&lt;&lt;1,1&gt;&gt;&gt;(params);\n  cudaDeviceSynchronize();\n}\n\n__global__ void otherFunction(thrust::tuple&lt;int&gt; t) {\n  printf(\"param 0 = %d\\n\", thrust::get&lt;0&gt;(t));\n}\n\n__global__ void otherFunction2(thrust::tuple&lt;float, float&gt; t) {\n  printf(\"param 1 = %f\\n\", thrust::get&lt;1&gt;(t));\n}\n__device__ void (*kfp)(thrust::tuple&lt;int&gt;) = &amp;otherFunction;\n__device__ void (*kfp2)(thrust::tuple&lt;float, float&gt;) = &amp;otherFunction2;\n\nint main(int argc, char **argv) {\n    void (*h_kfp)(thrust::tuple&lt;int&gt;);\n    void (*h_kfp2)(thrust::tuple&lt;float, float&gt;);\n    cudaMemcpyFromSymbol(&amp;h_kfp, kfp, sizeof(void *), 0, cudaMemcpyDeviceToHost);\n    someFunction&lt;&lt;&lt;1,1&gt;&gt;&gt;(h_kfp, thrust::make_tuple(1));\n    cudaDeviceSynchronize();\n    cudaMemcpyFromSymbol(&amp;h_kfp2, kfp2, sizeof(void *), 0, cudaMemcpyDeviceToHost);\n    someFunction&lt;&lt;&lt;1,1&gt;&gt;&gt;(h_kfp2, thrust::make_tuple(0.5f, 1.5f));\n    cudaDeviceSynchronize();\n    return 0;\n}\n$ nvcc -arch=sm_35 -rdc=true -o t1162 t1162.cu -lcudadevrt\n$ CUDA_VISIBLE_DEVICES=\"1\" cuda-memcheck ./t1162\n========= CUDA-MEMCHECK\nparam 0 = 1\nparam 1 = 1.500000\n========= ERROR SUMMARY: 0 errors\n$\n</code></pre>\n\n<p>In terms of functionality (being able to dispatch multiple child kernels with varying parameter packs) I don't see any difference in capability, again assuming your parameters are nicely packaged in a tuple.</p>\n"}, {"comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1466625667, "post_id": 37975124, "comment_id": 63400560, "body": "I had assumed you wanted to be able to dispatch kernels with arbitrary parameter sets.  This can only dispatch kernels where the parameter set is known (e.g. to be <code>int</code> in the example you have shown).  I don&#39;t see how that fits your problem description, but, whatever.  My 2nd suggestion about passing the tuple to the child kernel avoids this limitation, so that the parent kernel need not know anything about the parameter order."}, {"owner": {"reputation": 225, "user_id": 3523927, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3e8f7c03d5a7614698a467212e161171?s=128&d=identicon&r=PG&f=1", "display_name": "martin", "link": "https://stackoverflow.com/users/3523927/martin"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1466657512, "post_id": 37975124, "comment_id": 63410230, "body": "someFunction can be used to dispatch kernels with arbitrary parameter sets. <code>someFunction&lt;float, float&gt;&lt;&lt;&lt;1,1&gt;&gt;&gt;(h_kfp, thrust::make_tuple(1.0, 1.5)</code>. someFunction can use parameter unpacking to support a variable length of parameters as schown here: <a href=\"http://stackoverflow.com/questions/7858817/unpacking-a-tuple-to-call-a-matching-function-pointer\" title=\"unpacking a tuple to call a matching function pointer\">stackoverflow.com/questions/7858817/&hellip;</a>"}], "tags": [], "owner": {"reputation": 225, "user_id": 3523927, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3e8f7c03d5a7614698a467212e161171?s=128&d=identicon&r=PG&f=1", "display_name": "martin", "link": "https://stackoverflow.com/users/3523927/martin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466657741, "last_edit_date": 1466657741, "creation_date": 1466618099, "answer_id": 37975124, "question_id": 37973128, "link": "https://stackoverflow.com/questions/37973128/passing-a-function-pointer-and-its-parameters-as-a-thrusttuple-to-a-global-fun/37975124#37975124", "title": "Passing a function pointer and its parameters as a thrust::tuple to a global function", "body": "<p>A quick and dirty solution is to cast the function pointer:</p>\n\n<pre><code>#include &lt;thrust/tuple.h&gt;\n#include &lt;tuple&gt;\n\ntemplate&lt;typename... Args&gt;\n__global__ void someFunction(void (*fp)(), thrust::tuple&lt;Args...&gt; params) {\n    void (*kfp)(Args...) = (void (*)(Args...)) fp;\n    kfp&lt;&lt;&lt;1,1&gt;&gt;&gt;(thrust::get&lt;0&gt;(params));\n}\n\n__global__ void otherFunction(int n) {\n    printf(\"n = %d\\n\", n);\n}\n__constant__ void (*kfp)(int) = &amp;otherFunction;\n\nint testPassMain(int argc, char **argv) {\n    void (*h_kfp)();\n    cudaMemcpyFromSymbol(&amp;h_kfp, kfp, sizeof(void *), 0, cudaMemcpyDeviceToHost);\n    someFunction&lt;int&gt;&lt;&lt;&lt;1,1&gt;&gt;&gt;(h_kfp, thrust::make_tuple(1));\n    return 0;\n}\n</code></pre>\n\n<p>I'm open to nicer solutions!</p>\n"}], "owner": {"reputation": 225, "user_id": 3523927, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3e8f7c03d5a7614698a467212e161171?s=128&d=identicon&r=PG&f=1", "display_name": "martin", "link": "https://stackoverflow.com/users/3523927/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1467406399, "creation_date": 1466611333, "last_edit_date": 1467406399, "question_id": 37973128, "link": "https://stackoverflow.com/questions/37973128/passing-a-function-pointer-and-its-parameters-as-a-thrusttuple-to-a-global-fun", "title": "Passing a function pointer and its parameters as a thrust::tuple to a global function", "body": "<p>I want to do the following:</p>\n\n<pre><code>#include &lt;thrust/tuple.h&gt;\n#include &lt;tuple&gt;\n\ntemplate&lt;typename... Args&gt;\nvoid someFunction(void (*fp)(Args...), thrust::tuple&lt;Args...&gt; params) {\n}\n\nvoid otherFunction(int n) {\n}\n\nint main(int argc, char **argv) {\n    //// template argument deduction/substitution failed ////\n    someFunction&lt;int&gt;(&amp;otherFunction, thrust::make_tuple(1));\n    return 0;\n}\n</code></pre>\n\n<p>What I have tried:</p>\n\n<ol>\n<li>Removing one of the two parameter leads to a working solution of course.</li>\n<li>It works when I make <code>someFunction</code> a static function in a <code>struct</code> with template parameter. But in the original code <code>someFunction</code> is a CUDA kernel, so I can't do that. Any further ideas?</li>\n<li>It works when I change thrust::tuple to std::tuple. Is there a way to construct a thrust::tuple out of a std::tuple?</li>\n</ol>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>To make it clearer: <code>someFunction</code> and <code>otherFunction</code> are <code>__global__</code>!</p>\n\n<pre><code>#include &lt;thrust/tuple.h&gt;\n#include &lt;tuple&gt;\n\ntemplate&lt;typename... Args&gt;\n__global__ void someFunction(void (*fp)(Args...), thrust::tuple&lt;Args...&gt; params) {\n}\n\n__global__ void otherFunction(int n) {\n}\n__constant__ void (*kfp)(int) = &amp;otherFunction;\n\nint testPassMain(int argc, char **argv) {\n    void (*h_kfp)(int);\n    cudaMemcpyFromSymbol(&amp;h_kfp, kfp, sizeof(void *), 0, cudaMemcpyDeviceToHost);\n    someFunction&lt;int&gt;&lt;&lt;&lt;1,1&gt;&gt;&gt;(h_kfp, thrust::make_tuple(1));\n    return 0;\n}\n</code></pre>\n\n<p>I get a compiler error: <code>template argument deduction/substitution failed</code> in both examples.</p>\n"}, {"tags": ["c++", "boost", "random"], "answers": [{"comments": [{"owner": {"reputation": 58, "user_id": 6500069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57f01de2d3428afb972cf3512f0a04ce?s=128&d=identicon&r=PG&f=1", "display_name": "mrhd", "link": "https://stackoverflow.com/users/6500069/mrhd"}, "edited": false, "score": 0, "creation_date": 1466632462, "post_id": 37973339, "comment_id": 63403728, "body": "Thanks for pointing out my rookie mistake... answer accepted and appreciated! Switching to the standard <code>&lt;random&gt;</code> header is good advice as well. +1 for the solution using lambda functions - one small catch, though: in C++11 member vars (like <code>generator</code>) cannot be captured directly, had to resort to a local variable and capture that one: <code>boost::mt19937 &amp;g = generator</code>"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 58, "user_id": 6500069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57f01de2d3428afb972cf3512f0a04ce?s=128&d=identicon&r=PG&f=1", "display_name": "mrhd", "link": "https://stackoverflow.com/users/6500069/mrhd"}, "edited": false, "score": 0, "creation_date": 1466633303, "post_id": 37973339, "comment_id": 63404013, "body": "@mrhd I think member variables can be captured if you capture <code>this</code>. I&#39;ve revised the answer to account for that."}, {"owner": {"reputation": 58, "user_id": 6500069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57f01de2d3428afb972cf3512f0a04ce?s=128&d=identicon&r=PG&f=1", "display_name": "mrhd", "link": "https://stackoverflow.com/users/6500069/mrhd"}, "edited": false, "score": 0, "creation_date": 1466668586, "post_id": 37973339, "comment_id": 63415574, "body": "Thanks for the update, your solution is more concise. I realize now that it was really the boost::bind() that made a copy since you did not need to pass by reference in <code>uni_dist(generator)</code>."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 0, "last_activity_date": 1466633313, "last_edit_date": 1466633313, "creation_date": 1466612010, "answer_id": 37973339, "question_id": 37973076, "link": "https://stackoverflow.com/questions/37973076/c-boost-random-ints-from-multiple-ranges-using-single-generator/37973339#37973339", "title": "c++ Boost random ints from multiple ranges using single generator", "body": "<pre><code>f = boost::bind(uni_dist, generator);\n</code></pre>\n\n<p>You need to pass a reference to the generator. Right now, you're passing a copy of the generator, which means that each <code>f</code> object has a copy of the generator in its initial state.</p>\n\n<pre><code>f = boost::bind(uni_dist, boost::ref(generator));\n</code></pre>\n\n<p>A different version using Lambdas would make the ambiguity more visible (and easier to detect/resolve):</p>\n\n<pre><code>f = [uni_dist, this] {return uni_dist(generator);};\n</code></pre>\n\n<p>Also, c++11 introduced the <code>&lt;random&gt;</code> header, which provides all the same functions and more that boost's <code>random</code> headers provide, so there's not really any reason to keep using the boost version anymore.</p>\n"}], "owner": {"reputation": 58, "user_id": 6500069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57f01de2d3428afb972cf3512f0a04ce?s=128&d=identicon&r=PG&f=1", "display_name": "mrhd", "link": "https://stackoverflow.com/users/6500069/mrhd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 37973339, "answer_count": 1, "score": 0, "last_activity_date": 1466685769, "creation_date": 1466611171, "question_id": 37973076, "link": "https://stackoverflow.com/questions/37973076/c-boost-random-ints-from-multiple-ranges-using-single-generator", "title": "c++ Boost random ints from multiple ranges using single generator", "body": "<p>Using <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost_random.html\" rel=\"nofollow\">boost::random</a> I'm trying to sample sets of uniformly distributed integers from different ranges, but using the same underlying random number generator. For each range I am defining a different function returning the the random numbers.\nHowever, it seems that each function returns the same number.</p>\n\n<p>An example illustrating the approach:</p>\n\n<pre><code>#include &lt;boost/bind.hpp&gt;\n#include &lt;boost/function.hpp&gt;\n#include &lt;boost/random.hpp&gt;\n\nstruct RandomNumberGenerator {\n  boost::mt19937 generator;\n\n  RandomNumberGenerator(long seed) {\n    generator.seed(seed);\n  }\n\n  boost::function&lt;int()&gt; getRandomFunctionInt(int min, int max) {\n    boost::uniform_int&lt;&gt; uni_dist(min, max);\n    boost::variate_generator&lt;boost::mt19937&amp;, boost::uniform_int&lt;&gt; &gt; uni(generator, uni_dist);\n\n    boost::function&lt;int()&gt; f;\n    f = boost::bind(uni_dist, generator);\n    return f;\n  }\n};\n\nint main (int argc, char* argv[]) {\n  RandomNumberGenerator rng(1729);\n  boost::function&lt;int()&gt; runif1 = rng.getRandomFunctionInt(0,  1000);\n  boost::function&lt;int()&gt; runif2 = rng.getRandomFunctionInt(0, 10000);\n\n  for (int i=0; i&lt;10; ++i) {\n    std::cout &lt;&lt; runif1() &lt;&lt; \", \" &lt;&lt; runif2() &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n\n<p>The output was:</p>\n\n<pre><code>212, 2121\n623, 6226\n259, 2590\n[...]\n</code></pre>\n\n<p>Is there any way to un-correlate the functions? For the sake of reproducibility of my experiment I would like to work with a single seed.</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466611197, "post_id": 37973012, "comment_id": 63392306, "body": "<a href=\"http://stackoverflow.com/questions/29477567/using-cin-for-char-array\" title=\"using cin for char array\">stackoverflow.com/questions/29477567/using-cin-for-char-arra&zwnj;&#8203;y</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1466611275, "post_id": 37973012, "comment_id": 63392363, "body": "You may post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of what you tried, and may be we can help you fixing the errors."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1466611359, "post_id": 37973012, "comment_id": 63392428, "body": "A <code>while(&#39;\\0&#39;)</code> loop won&#39;t ever even start."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1466614355, "post_id": 37973012, "comment_id": 63394271, "body": "Programming by randomly guessing will never work. You need to pick up a good book, and actually learn the language."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1466614431, "post_id": 37973012, "comment_id": 63394332, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: <i>&quot;How can you input &#39;\\0&#39; via std::cin.getc() actually?&quot;</i> Um, <a href=\"http://coliru.stacked-crooked.com/a/a23076369478fd68\" rel=\"nofollow noreferrer\">quite easily</a>? (Assuming you fix the typo, seeing as <code>std::cin.getc()</code> doesn&#39;t exist)"}], "answers": [{"tags": [], "owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "is_accepted": false, "score": -1, "last_activity_date": 1466611242, "creation_date": 1466611242, "answer_id": 37973103, "question_id": 37973012, "link": "https://stackoverflow.com/questions/37973012/how-to-read-a-string-in-the-form-of-char-array-using-cin/37973103#37973103", "title": "How to read a string in the form of char array using cin?", "body": "<p>If you have a character array, e.g:</p>\n\n<pre><code>    char szExample[] = \"Hello World\";\n</code></pre>\n\n<p>You can process it with:</p>\n\n<pre><code>    char* ptr = &amp;szExample[0];\n    //Look while ptr doesn't point to null terminator\n    while( *ptr ) {\n    //Do something...\n    //Increment pointer\n       ptr++;\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 5711505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d3BL9PUOKU4/AAAAAAAAAAI/AAAAAAAAAOQ/Y3HsMstweM8/photo.jpg?sz=128", "display_name": "Koushal Deva", "link": "https://stackoverflow.com/users/5711505/koushal-deva"}, "edited": false, "score": 0, "creation_date": 1466831430, "post_id": 37973149, "comment_id": 63491143, "body": "The size is not given bro"}, {"owner": {"reputation": 2156, "user_id": 1441826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/331d666aac116e8c92324e2b0a9e2c97?s=128&d=identicon&r=PG", "display_name": "iedoc", "link": "https://stackoverflow.com/users/1441826/iedoc"}, "reply_to_user": {"reputation": 119, "user_id": 5711505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d3BL9PUOKU4/AAAAAAAAAAI/AAAAAAAAAOQ/Y3HsMstweM8/photo.jpg?sz=128", "display_name": "Koushal Deva", "link": "https://stackoverflow.com/users/5711505/koushal-deva"}, "edited": false, "score": 0, "creation_date": 1466853005, "post_id": 37973149, "comment_id": 63495815, "body": "I&#39;m aware, which is why I&#39;m using a large array. If you expect the input to be larger than that, make the array larger. Its just one of multiple ways. cin.getline will return once the user inputs 1024 characters or presses enter (the \\n character), both of which you can change"}], "tags": [], "owner": {"reputation": 2156, "user_id": 1441826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/331d666aac116e8c92324e2b0a9e2c97?s=128&d=identicon&r=PG", "display_name": "iedoc", "link": "https://stackoverflow.com/users/1441826/iedoc"}, "is_accepted": false, "score": 0, "last_activity_date": 1466611403, "creation_date": 1466611403, "answer_id": 37973149, "question_id": 37973012, "link": "https://stackoverflow.com/questions/37973012/how-to-read-a-string-in-the-form-of-char-array-using-cin/37973149#37973149", "title": "How to read a string in the form of char array using cin?", "body": "<p>You could use cin.getline():</p>\n\n<pre><code>char s[1024];\nstd::cin.getline(s, 1024, '\\n');\nstd::cout &lt;&lt;  s &lt;&lt; std::endl;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1466614387, "post_id": 37973734, "comment_id": 63394305, "body": "Don&#39;t do these things. That&#39;s old fashioned C. The question is about C++."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1466675391, "post_id": 37973734, "comment_id": 63420209, "body": "I don&#39;t need to &quot;try this&quot;; it is bad advice and poor C++. And if you can&#39;t get <code>cin</code> and <code>cout</code> to work properly then you&#39;re not using them correctly. There are many questions on SO about this."}, {"owner": {"reputation": 119, "user_id": 5711505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d3BL9PUOKU4/AAAAAAAAAAI/AAAAAAAAAOQ/Y3HsMstweM8/photo.jpg?sz=128", "display_name": "Koushal Deva", "link": "https://stackoverflow.com/users/5711505/koushal-deva"}, "edited": false, "score": 0, "creation_date": 1466831833, "post_id": 37973734, "comment_id": 63491218, "body": "In cpp bro. that is in c"}], "tags": [], "owner": {"reputation": 7, "user_id": 6495128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9I4UX.jpg?s=128&g=1", "display_name": "jay", "link": "https://stackoverflow.com/users/6495128/jay"}, "is_accepted": false, "score": -1, "last_activity_date": 1466613169, "creation_date": 1466613169, "answer_id": 37973734, "question_id": 37973012, "link": "https://stackoverflow.com/questions/37973012/how-to-read-a-string-in-the-form-of-char-array-using-cin/37973734#37973734", "title": "How to read a string in the form of char array using cin?", "body": "<p>if size is not given then you can set char array size to maximun as u wanted and use \n<strong><em>scanf()</em></strong> for reading the char array and also add header <strong>stdio.h</strong> for use <strong>scanf()</strong> .</p>\n\n<p>example:</p>\n\n<pre><code>#include&lt;stdio.h&gt;/#include&lt;cstdio&gt;\nchar array[100000];\nscanf(\"%s\",&amp;array);\n</code></pre>\n\n<p>for knowing the length of inputed char use strlen()</p>\n\n<pre><code>int size=strlen(array);\n printf(\"%s\\n\",array);\n printf(\"%d\\n\",size);\n</code></pre>\n\n<p>input:</p>\n\n<p>ghostrecon</p>\n\n<p>output:</p>\n\n<p>ghostrecon</p>\n\n<p>10</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3794191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a276d2f95bf631a958f75d8b92bbb7?s=128&d=identicon&r=PG&f=1", "display_name": "shashank21j", "link": "https://stackoverflow.com/users/3794191/shashank21j"}, "is_accepted": false, "score": 0, "last_activity_date": 1466864867, "creation_date": 1466864867, "answer_id": 38029504, "question_id": 37973012, "link": "https://stackoverflow.com/questions/37973012/how-to-read-a-string-in-the-form-of-char-array-using-cin/38029504#38029504", "title": "How to read a string in the form of char array using cin?", "body": "<p>If you are not strict about using a char array it's better to use string datatype. </p>\n\n<pre><code>string s;\nchar delimiter = '\\n';\ngetline(cin, s, delimiter);\n</code></pre>\n\n<p>Here s will read whole line.<br>\nIf you can keep delimiter as <code>'\\0'</code> and then s will contain the whole file till EOF. </p>\n"}], "owner": {"reputation": 119, "user_id": 5711505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-d3BL9PUOKU4/AAAAAAAAAAI/AAAAAAAAAOQ/Y3HsMstweM8/photo.jpg?sz=128", "display_name": "Koushal Deva", "link": "https://stackoverflow.com/users/5711505/koushal-deva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 6507, "favorite_count": 0, "answer_count": 4, "score": -5, "last_activity_date": 1546309105, "creation_date": 1466610966, "last_edit_date": 1546309105, "question_id": 37973012, "link": "https://stackoverflow.com/questions/37973012/how-to-read-a-string-in-the-form-of-char-array-using-cin", "title": "How to read a string in the form of char array using cin?", "body": "<p>how to read a string in the form of char array using cin and using other string functions in cpp.\nI tried using a while loop but what is the condition for ending the loop if the size is not given.\nLike i used <code>while('\\0')</code> but it didn't worked.</p>\n"}, {"tags": ["c++", "qt", "qtreeview"], "comments": [{"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1466611056, "post_id": 37972839, "comment_id": 63392195, "body": "check these: <a href=\"https://github.com/commontk/QtPropertyBrowser\" rel=\"nofollow noreferrer\">github.com/commontk/QtPropertyBrowser</a>, <a href=\"https://github.com/intbots/QtPropertyBrowser\" rel=\"nofollow noreferrer\">github.com/intbots/QtPropertyBrowser</a>, <a href=\"https://doc.qt.io/archives/qq/qq18-propertybrowser.html\" rel=\"nofollow noreferrer\">doc.qt.io/archives/qq/qq18-propertybrowser.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5154225, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ad5b28b333a19cc7b2f195c13986c4d?s=128&d=identicon&r=PG&f=1", "display_name": "ccptleu", "link": "https://stackoverflow.com/users/5154225/ccptleu"}, "edited": false, "score": 0, "creation_date": 1466619292, "post_id": 37974731, "comment_id": 63397161, "body": "Thanks for your input.  As my treeview is large containing many datasets, it&#39;s probably not good to use setIndexWidget.  If I reimplement QStyledItemDelegate and change createEditor to set the editor depending on the QModelIndex index, how do i then set it for a specific child cell in my model?"}, {"owner": {"reputation": 1277, "user_id": 6367468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvquX.png?s=128&g=1", "display_name": "Kirill Chernikov", "link": "https://stackoverflow.com/users/6367468/kirill-chernikov"}, "reply_to_user": {"reputation": 39, "user_id": 5154225, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ad5b28b333a19cc7b2f195c13986c4d?s=128&d=identicon&r=PG&f=1", "display_name": "ccptleu", "link": "https://stackoverflow.com/users/5154225/ccptleu"}, "edited": false, "score": 0, "creation_date": 1466657502, "post_id": 37974731, "comment_id": 63410227, "body": "If you know specific widget which will be in particular cell - you know QModelIndex for this cell. When you reimplement createEditor you must return specific widget for particular QModelIndex. I don&#39;t see the problem. Algorithm is the same as you use when determine which widget must be in particular cell. For example, if for first column you wiil be use SomeWidget for editing, make such inspection in createEditor reimplementation: if(index.column() == 0) return SomeWidget; Something like this."}, {"owner": {"reputation": 39, "user_id": 5154225, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ad5b28b333a19cc7b2f195c13986c4d?s=128&d=identicon&r=PG&f=1", "display_name": "ccptleu", "link": "https://stackoverflow.com/users/5154225/ccptleu"}, "edited": false, "score": 0, "creation_date": 1466699910, "post_id": 37974731, "comment_id": 63438222, "body": "Actually after i made that question, i&#39;ve since implemented a solution which i have added in the edit to my first post. Thanks!"}], "tags": [], "owner": {"reputation": 1277, "user_id": 6367468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yvquX.png?s=128&g=1", "display_name": "Kirill Chernikov", "link": "https://stackoverflow.com/users/6367468/kirill-chernikov"}, "is_accepted": false, "score": 0, "last_activity_date": 1466657879, "last_edit_date": 1466657879, "creation_date": 1466616721, "answer_id": 37974731, "question_id": 37972839, "link": "https://stackoverflow.com/questions/37972839/dynamic-qtreeview-with-custom-delegates/37974731#37974731", "title": "dynamic qtreeview with custom delegates", "body": "<p>As you can see from <a href=\"http://doc.qt.io/qt-5/qabstractitemview.html\" rel=\"nofollow\">QAbstractItemView documentation</a>, there is only methods for set delegate for<br>\nwhole view, for columns or for rows. As you noticed, this methods are:  <code>setItemDelegate</code>, <code>setItemDelegateForColumn</code>, <code>setItemDelegateForRow</code>. That's why you can not set delegate for certain cell.</p>\n\n<p>There is another way, you can use for showing different widgets in QTreeView - method <a href=\"http://doc.qt.io/qt-5/qabstractitemview.html#setIndexWidget\" rel=\"nofollow\">SetIndexWidget</a> of <code>QAbstractItemView</code>. But you must keep in mind that:</p>\n\n<blockquote>\n  <p>This function should only be used to display static content within the\n  visible area corresponding to an item of data. If you want to display\n  custom dynamic content or implement a custom editor widget, subclass\n  QItemDelegate instead.</p>\n</blockquote>\n\n<p>Use <code>SetIndexWidget</code> method is very \"expensive\" and if you have many rows in you <code>QTreeView</code>, you can see performance degradation.</p>\n\n<p><strong>Addition:</strong>\nIf you need widgets in QTreeView only for edit data items from your model, the best way to solve you problem will be reimplement <a href=\"http://doc.qt.io/qt-5/qstyleditemdelegate.html\" rel=\"nofollow\">QStyledItemDelegate</a>. Look for method <code>createEditor</code>.</p>\n\n<p><strong>Addition:</strong>\n<a href=\"http://doc.qt.io/qt-5/qtwidgets-itemviews-stardelegate-example.html\" rel=\"nofollow\">Example of reimplement QStyledItemDelegate</a></p>\n"}], "owner": {"reputation": 39, "user_id": 5154225, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ad5b28b333a19cc7b2f195c13986c4d?s=128&d=identicon&r=PG&f=1", "display_name": "ccptleu", "link": "https://stackoverflow.com/users/5154225/ccptleu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2588, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466657879, "creation_date": 1466610494, "last_edit_date": 1466638286, "question_id": 37972839, "link": "https://stackoverflow.com/questions/37972839/dynamic-qtreeview-with-custom-delegates", "title": "dynamic qtreeview with custom delegates", "body": "<p>I'm using Qt 5.6 and my goal is to develop a dynamic tree using QTreeView that needs to populate items such as combo boxes, edit box, checkbox, buttons..etc depending on the settings loaded and the tree data can change as new data is loaded.  There will be many nodes to populate in the tree with parent and child nodes. </p>\n\n<p>I've read about different options to implement this type of treeview such as populating a QTreeView and implementing my own delegate by inheriting from QITemDelegate or QStyledItemDelegate or using Qt Quick's QML treeview.</p>\n\n<p>For my purposes I've chosen the first option to dynamically populate a tree and modify parameters but I'm having trouble setting the delegate i want for a selected cell only as the only options to set the delegate in the tree is to setItemDelegateForRow, setItemDelegateForColumn or setItemDelegate.  The tree will look something like the below.  How should i set a different delegate for each of the child nodes?</p>\n\n<pre><code>by (col, row)\n\nParent(cell 0,0)\n  -&gt;Child(cell 0,1) -combo box(1,1)\n  -&gt;Child(cell 0,2) -button(1,2)\n  -&gt;Child(cell 0,3) -check box(1,3)\n ...\n ...etc\n\nParent(cell 0,10)\n  -&gt;Child(cell 0,11) - edit box(1,11)\n  -&gt;Child(cell 0,12) - edit box(1,12)\n  -&gt;Child(cell 0,13) - check box(1,13)\n ...\n ...etc\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>This is a simplified version of how I have setup my tree view so far. Found out the answer to why my child node column 1 was not showing was because i did not set the column count of the model.  I have updated the code below and it works now. </p>\n\n<pre><code>enum EditType\n{\n    TYPE_Text,\n    TYPE_CheckBox,\n    TYPE_ComboBox,\n    TYPE_Button\n};\n\nQTreeView* tree = new QTreeView(this);\nQStandardItemModel* model = new QStandardItemModel; \nmodel-&gt;setColumnCount(2);\ntree-&gt;setModel(model);\n\n//set custom delegate for column 1 of the tree \nCustomDelegate *customDelegate = new CustomDelegate(this);\ntree-&gt;setItemDelegateForColumn(1, customDelegate); \n\n// Add parent nodes\nQStandardItem* parent1 = new QStandardItem(tr(\"parent1\"));\nQStandardItem* parent2 = new QStandardItem(tr(\"parent2\"));\n\nmodel-&gt;appendRow(parent1);\nmodel-&gt;appendRow(parent2);\n\n// add a child\nQList&lt;QStandardItem*&gt; childrow;\nQStandardItem* child = new QStandardItem(tr(\"child1\"));\nchildrow.append(child);\nQStandardItem* child_value = new QStandardItem();\nchild_value-&gt;setData(TYPE_ComboBox, Qt::UserRole);\nchildrow.append(child_value);\nparent1-&gt;appendRow(it_child);\n</code></pre>\n"}, {"tags": ["c++", "memory-leaks", "address-sanitizer"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1466610543, "post_id": 37972807, "comment_id": 63391861, "body": "Looks like your code (or somebody&#39;s code running in your program) wrote 8 bytes, past the end of a dynamically allocated memory buffer."}, {"owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "edited": false, "score": 0, "creation_date": 1466611376, "post_id": 37972807, "comment_id": 63392446, "body": "You might get something more readable if you compile your binary with debug symbols turned on (<code>-g</code>)"}, {"owner": {"reputation": 14942, "user_id": 1179925, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5403975c3b25b9407b19a26b65d1ce72?s=128&d=identicon&r=PG", "display_name": "mrgloom", "link": "https://stackoverflow.com/users/1179925/mrgloom"}, "reply_to_user": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "edited": false, "score": 0, "creation_date": 1466611484, "post_id": 37972807, "comment_id": 63392524, "body": "@Smeeheey I already built it with <code>-O0 -g</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": false, "score": 3, "last_activity_date": 1466612051, "creation_date": 1466612051, "answer_id": 37973351, "question_id": 37972807, "link": "https://stackoverflow.com/questions/37972807/how-to-interpret-addresssanitizer-output/37973351#37973351", "title": "How to interpret AddressSanitizer output?", "body": "<p>It sounds like you need to set some environment variables before executing your program in order to get readable output: namely <code>ASAN_OPTIONS</code>, <code>symbolize</code> and <code>ASAN_SYMBOLIZER_PATH</code> (which assumes you have a suitable symbolizer). So something like this:</p>\n\n<pre><code>ASAN_OPTIONS=symbolize=1 ASAN_SYMBOLIZER_PATH=$(shell which llvm-symbolizer) ./a.out\n</code></pre>\n\n<p>This is from the documentation <a href=\"https://gist.github.com/kwk/4171e37f4bcdf7705329\" rel=\"nofollow\">here</a></p>\n"}, {"comments": [{"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1575016136, "post_id": 59095632, "comment_id": 104434720, "body": "OP is using GCC, symbolizer is not needed there (GCC uses libbacktrace library instead)."}], "tags": [], "owner": {"reputation": 96, "user_id": 2631969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34952e70fba933882b3c2ab949633f22?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmad Hazimeh", "link": "https://stackoverflow.com/users/2631969/ahmad-hazimeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1574972051, "creation_date": 1574972051, "answer_id": 59095632, "question_id": 37972807, "link": "https://stackoverflow.com/questions/37972807/how-to-interpret-addresssanitizer-output/59095632#59095632", "title": "How to interpret AddressSanitizer output?", "body": "<p>It looks like you also copied the ANSI color codes into your output.\nHere's a clearer version:</p>\n\n<pre><code>==27467== ERROR: AddressSanitizer: heap-buffer-overflow on address 0x60a4000b2a80 at pc 0x40730e bp 0x7fffffffcf10 sp 0x7fffffffcf08\nWRITE of size 8 at 0x60a4000b2a80 thread T0\n    #0 0x40730d (/home/user/Desktop/ImageRegistration/ImageRegistration+0x40730d)\n    #1 0x406624 (/home/user/Desktop/ImageRegistration/ImageRegistration+0x406624)\n    #2 0x40211b (/home/user/Desktop/ImageRegistration/ImageRegistration+0x40211b)\n    #3 0x402bf3 (/home/user/Desktop/ImageRegistration/ImageRegistration+0x402bf3)\n    #4 0x7ffff3866f44 (/lib/x86_64-linux-gnu/libc-2.19.so+0x21f44)\n    #5 0x401d78 (/home/user/Desktop/ImageRegistration/ImageRegistration+0x401d78)\n0x60a4000b2a80 is located 0 bytes to the right of 74368-byte region [0x60a4000a0800,0x60a4000b2a80)\nallocated by thread T0 here:\n    #0 0x7ffff413941a (/usr/lib/x86_64-linux-gnu/libasan.so.0.0.0+0x1541a)\n    #1 0x7ffff7b3bfb7 (/home/user/libs/opencv-2.4.13_QT/lib/libopencv_core.so.2.4.13+0x203fb7)\nShadow bytes around the buggy address:\n  0x0c150000e500: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n  0x0c150000e510: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n  0x0c150000e520: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n  0x0c150000e530: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n  0x0c150000e540: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n=&gt;0x0c150000e550:[fa]fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n  0x0c150000e560: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n  0x0c150000e570: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n  0x0c150000e580: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n  0x0c150000e590: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n  0x0c150000e5a0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\nShadow byte legend (one shadow byte represents 8 application bytes):\n  Addressable:           00\n  Partially addressable: 01 02 03 04 05 06 07 \n  Heap left redzone:     fa\n  Heap righ redzone:     fb\n  Freed Heap region:     fd\n  Stack left redzone:    f1\n  Stack mid redzone:     f2\n  Stack right redzone:   f3\n  Stack partial redzone: f4\n  Stack after return:    f5\n  Stack use after scope: f8\n  Global redzone:        f9\n  Global init order:     f6\n  Poisoned by user:      f7\n  ASan internal:         fe\n==27467== ABORTING\n</code></pre>\n\n<p>To get line numbers, you must specify the path to the llvm-symbolizer binary, either by having it accessible through the <code>PATH</code> environment variable, or by specifying its pathname directly in the <code>ASAN_SYMBOLIZER_PATH</code> environment variable.</p>\n"}], "owner": {"reputation": 14942, "user_id": 1179925, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/5403975c3b25b9407b19a26b65d1ce72?s=128&d=identicon&r=PG", "display_name": "mrgloom", "link": "https://stackoverflow.com/users/1179925/mrgloom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3936, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1574972051, "creation_date": 1466610392, "last_edit_date": 1466611811, "question_id": 37972807, "link": "https://stackoverflow.com/questions/37972807/how-to-interpret-addresssanitizer-output", "title": "How to interpret AddressSanitizer output?", "body": "<p>Seems AddressSanitizer detected <code>heap-buffer-overflow</code> but output not so clear as for example <a href=\"https://en.wikipedia.org/wiki/AddressSanitizer#Heap-buffer-overflow\" rel=\"nofollow\">here</a>.</p>\n\n<p>How can I get line at which overflow occurred?</p>\n\n<p>How can I interpret this results? </p>\n\n<pre><code>[1m[31m==27467== ERROR: AddressSanitizer: heap-buffer-overflow on address 0x60a4000b2a80 at pc 0x40730e bp 0x7fffffffcf10 sp 0x7fffffffcf08\n[1m[0m[1m[34mWRITE of size 8 at 0x60a4000b2a80 thread T0[1m[0m\n    #0 0x40730d (/home/user/Desktop/ImageRegistration/ImageRegistration+0x40730d)\n    #1 0x406624 (/home/user/Desktop/ImageRegistration/ImageRegistration+0x406624)\n    #2 0x40211b (/home/user/Desktop/ImageRegistration/ImageRegistration+0x40211b)\n    #3 0x402bf3 (/home/user/Desktop/ImageRegistration/ImageRegistration+0x402bf3)\n    #4 0x7ffff3866f44 (/lib/x86_64-linux-gnu/libc-2.19.so+0x21f44)\n    #5 0x401d78 (/home/user/Desktop/ImageRegistration/ImageRegistration+0x401d78)\n[1m[32m0x60a4000b2a80 is located 0 bytes to the right of 74368-byte region [0x60a4000a0800,0x60a4000b2a80)\n[1m[0m[1m[35mallocated by thread T0 here:[1m[0m\n    #0 0x7ffff413941a (/usr/lib/x86_64-linux-gnu/libasan.so.0.0.0+0x1541a)\n    #1 0x7ffff7b3bfb7 (/home/user/libs/opencv-2.4.13_QT/lib/libopencv_core.so.2.4.13+0x203fb7)\nShadow bytes around the buggy address:\n  0x0c150000e500: [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m\n  0x0c150000e510: [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m\n  0x0c150000e520: [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m\n  0x0c150000e530: [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m\n  0x0c150000e540: [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m [1m[0m00[1m[0m\n=&gt;0x0c150000e550:[[1m[31mfa[1m[0m][1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m\n  0x0c150000e560: [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m\n  0x0c150000e570: [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m\n  0x0c150000e580: [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m\n  0x0c150000e590: [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m\n  0x0c150000e5a0: [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m [1m[31mfa[1m[0m\nShadow byte legend (one shadow byte represents 8 application bytes):\n  Addressable:           [1m[0m00[1m[0m\n  Partially addressable: [1m[0m01[1m[0m [1m[0m02[1m[0m [1m[0m03[1m[0m [1m[0m04[1m[0m [1m[0m05[1m[0m [1m[0m06[1m[0m [1m[0m07[1m[0m \n  Heap left redzone:     [1m[31mfa[1m[0m\n  Heap righ redzone:     [1m[31mfb[1m[0m\n  Freed Heap region:     [1m[35mfd[1m[0m\n  Stack left redzone:    [1m[31mf1[1m[0m\n  Stack mid redzone:     [1m[31mf2[1m[0m\n  Stack right redzone:   [1m[31mf3[1m[0m\n  Stack partial redzone: [1m[31mf4[1m[0m\n  Stack after return:    [1m[35mf5[1m[0m\n  Stack use after scope: [1m[35mf8[1m[0m\n  Global redzone:        [1m[31mf9[1m[0m\n  Global init order:     [1m[36mf6[1m[0m\n  Poisoned by user:      [1m[34mf7[1m[0m\n  ASan internal:         [1m[33mfe[1m[0m\n==27467== ABORTING\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1466609924, "post_id": 37972572, "comment_id": 63391408, "body": "I&#39;m not sure this is entirely possible because a tuple is a type, which must be known at compile time, while the containers within the tuple are not constexpr containers, and thus their elements will not be known until runtime."}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "reply_to_user": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 3, "creation_date": 1466610257, "post_id": 37972572, "comment_id": 63391673, "body": "@ArchbishopOfBanterbury You can&#39;t <code>std::sort</code> a tuple, because their order is immutable. To do so would create a new type."}, {"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 0, "creation_date": 1466610315, "post_id": 37972572, "comment_id": 63391707, "body": "Ah crap yeah, what am I talking about, never mind then."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1466610471, "post_id": 37972572, "comment_id": 63391807, "body": "If your sorted container did some serious type erasure on the containers held within, then they could move around at runtime, I suppose (like all the way down to <code>void*</code>). They&#39;d have to &quot;quack&quot; nicely, though."}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1466610591, "post_id": 37972572, "comment_id": 63391888, "body": "@AndyG I was thinking about that too, but how would I cast them back to their real types?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 2, "creation_date": 1466610754, "post_id": 37972572, "comment_id": 63392002, "body": "You say &quot;I want to sort the containers inside tuples by their sizes.&quot; What do you mean by &quot;sizes&quot;? The number of elements they contain? If so that&#39;s run time information and the ordering of types in a <code>tuple</code> is type information and thereby required at compile time."}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1466610921, "post_id": 37972572, "comment_id": 63392106, "body": "@JonathanMee Yes, by the number of elements they contain. I don&#39;t mean the ordering of the actual <code>tuple</code>s, I mean the ordering of the <code>sortedArray</code> I create. This <code>sortedArray</code> can be a <code>vector</code> or whatever type you need it to be."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1466611479, "post_id": 37972572, "comment_id": 63392520, "body": "A <code>vector</code> has a singular type. You are suggesting that it contain elements of different types? That would not be possible.An alternative would be to use a <code>tuple</code> to contain your other containers, but you&#39;d need to set up the order at compile time. Which seems to be what you&#39;re trying to avoid."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1466612411, "post_id": 37972572, "comment_id": 63393120, "body": "If you have tried to write the function signature, you would have seen the problem runtime/compile time."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1466612481, "post_id": 37972572, "comment_id": 63393166, "body": "I&#39;m curious as to how you arrived at this requirement."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1466613111, "post_id": 37972572, "comment_id": 63393535, "body": "@LightnessRacesinOrbit I agree. Someone will undoubtedly suggest this be handled with <code>void*</code> or some other method for skirting the rules of the language. But this problem <i>fights against</i> the language itself. The best solution would involve using the power of templates and <i>working with</i> the power of the language. But to find such a solution more information on the motivation of the requirement will be needed."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1466617649, "post_id": 37972572, "comment_id": 63396262, "body": "@user975989: You&#39;d have to attach some kind of type information object to these containers, and then perform a bunch of gross if..else if checking (dynamic dispatch), followed by a cast."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1466618315, "post_id": 37972572, "comment_id": 63396636, "body": "@AndyG Which as I mention in my comment, &quot;fights against the language&quot;. We need more information so we can come up with a solution that works with the language."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1466630648, "last_edit_date": 1495541306, "creation_date": 1466630648, "answer_id": 37978508, "question_id": 37972572, "link": "https://stackoverflow.com/questions/37972572/how-do-i-sort-two-tuples-of-containers/37978508#37978508", "title": "How do I sort two tuples of containers?", "body": "<p>This is possible but not easy.</p>\n\n<p>First, you need to generate a compile-time list of every permutation of N elements (there are N factorial of them).</p>\n\n<p>Write both a runtime and compile time permutation object (separate).</p>\n\n<p>Make a runtime map from permutation to index.  (map step)</p>\n\n<p>Convert your tuple to a vector of (index, size).  Sort this by size.  Extract the permutation.  Map this to the index of the set of permutations.  (Sort step, uses map step)</p>\n\n<p>Write a \"magic switch\" that takes a function object <code>f</code> and a permutation index, and invokes the <code>f</code> with the compile time permutation.  (magic step)</p>\n\n<p>Write code that takes a compile time permutation and reorders a tuple based on it.  (reorder step)</p>\n\n<p>Write code that takes a function object <code>f</code> and a <code>tuple</code>.  Do (sort step).  Do (magic step), feeding it a second function object <code>g</code> that takes the passed in permutation and the tuple and (reorder step), then calls <code>f</code> with it.</p>\n\n<p>Call the function that does this <code>bob</code>.</p>\n\n<pre><code>std::tuple&lt;list&lt;int&gt;, list&lt;float&gt;&gt; tupleA {{2}, {3.3f, 4.2f}};\nstd::tuple&lt;deque&lt;double&gt;, deque&lt;uint8_t&gt;&gt; tupleB {{2.0, 1.2, 4.4}, {}};\n\nbob(concat_tuple_tie(tupleA, tupleB), [&amp;](auto&amp;&amp; sorted_array){\n  assert( std::is_same&lt;\n    std::tuple&lt;deque&lt;uint8_t&gt;&amp;, list&lt;int&gt;&amp;, list&lt;float&gt;&amp;, deque&lt;double&gt;&amp;&gt;,\n    std::decay_t&lt;decltype(sorted_array)&gt;\n  &gt;::value, \"wrong order\" );\n  sortedArray.get&lt;list&lt;float&gt;&gt;() == {3.3f, 4.2f};\n});\nstd::get&lt;list&lt;int&gt;&gt;(tupleA).push_back(4);\nstd::get&lt;list&lt;int&gt;&gt;(tupleA).push_back(5);\nstd::get&lt;list&lt;int&gt;&gt;(tupleA).push_back(6);\nbob(concat_tuple_tie(tupleA, tupleB), [&amp;](auto&amp;&amp; sorted_array){\n  assert( std::is_same&lt;\n    std::tuple&lt;deque&lt;uint8_t&gt;&amp;, list&lt;float&gt;&amp;, deque&lt;double&gt;&amp;, list&lt;int&gt;&amp;&gt;,\n    std::decay_t&lt;decltype(sorted_array)&gt;\n  &gt;::value, \"wrong order\" );\n});\n</code></pre>\n\n<p>Personally, I doubt you need to do this.</p>\n\n<p>I could do this, but it might take me hours, so I'm not going to do it for a SO answer.  You can look at my <a href=\"https://stackoverflow.com/a/23431173/1774667\">magic switch</a> code for the most magic of the above.  The other hard part is that permutation step.</p>\n\n<p>Note that the code uses continuation passing style.  Also note that <em>every</em> permutation of the lambda is instantiated, including the wrong ones, so your code must be valid for every permutation.  This can result in an insane amount of code bloat.</p>\n\n<p>An alternative solution could involve creating type-erasure wrappers around your containers and simply sorting those, but that is not what you asked for.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": false, "score": 1, "last_activity_date": 1466632208, "last_edit_date": 1466632208, "creation_date": 1466631846, "answer_id": 37978795, "question_id": 37972572, "link": "https://stackoverflow.com/questions/37972572/how-do-i-sort-two-tuples-of-containers/37978795#37978795", "title": "How do I sort two tuples of containers?", "body": "<p>The problem you <em>describe</em> sounds very much like you want <em>dynamic</em> polymorphism, not <em>static</em> polymorphism &mdash; and your difficulty in solving it is because you're stuck on trying to express with tools for doing static polymorphism.</p>\n\n<p>i.e. you need a type (hierarchy) for collections (or pointers to collections) that let you select the type of collection and the type of data at run-time, but still provides a unified interface to functions you need like <code>size</code> (e.g. by inheritance and virtual functions).</p>\n\n<p>e.g. a beginning of a sketch might look like</p>\n\n<pre><code>struct SequencePointer\n{\n    virtual size_t size() const = 0;\n    virtual boost::any operator[](size_t n) const = 0;\n};\n\ntemplate &lt;typename Sequence&gt;\nstruct SLSequencePointer\n{\n    const Sequence *ptr;\n    size_t size() const { return ptr-&gt;size(); }\n    boost::any operator[](size_t n) const { return (*ptr)[n]; }\n};\n</code></pre>\n"}], "owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1466632208, "creation_date": 1466609748, "question_id": 37972572, "link": "https://stackoverflow.com/questions/37972572/how-do-i-sort-two-tuples-of-containers", "title": "How do I sort two tuples of containers?", "body": "<p>I have two tuples, each containing containers of different types.</p>\n\n<pre><code>std::tuple&lt;containerA&lt;typesA&gt;...&gt; tupleA;\nstd::tuple&lt;containerB&lt;typesB&gt;...&gt; tupleB;\n</code></pre>\n\n<p>So, as an example <code>tupleA</code> might be defined like this:</p>\n\n<pre><code>std::tuple&lt;list&lt;int&gt;, list&lt;float&gt;&gt; tupleA;\n</code></pre>\n\n<p>The two containers, <code>containerA</code> and <code>containerB</code> are different types. <code>typesA</code> and <code>typesB</code> do not intersect. I want to sort the containers inside the tuples by their sizes, and be able to access them by their type. So, as an example</p>\n\n<pre><code>std::tuple&lt;list&lt;int&gt;, list&lt;float&gt;&gt; tupleA {{2}, {3.3f, 4.2f}};\nstd::tuple&lt;deque&lt;double&gt;, deque&lt;uint8_t&gt;&gt; tupleB {{2.0, 1.2, 4.4}, {}};\n\nauto sortedArray = sort(tupleA, tupleB);\nsortedArray == {deque&lt;uint8_t&gt;, list&lt;int&gt;, list&lt;float&gt;, deque&lt;double&gt;};\nsortedArray.get&lt;list&lt;float&gt;&gt;() == {3.3f, 4.2f};\nstd::get&lt;list&lt;int&gt;&gt;(tupleA).push_back(4);\nstd::get&lt;list&lt;int&gt;&gt;(tupleA).push_back(5);\nstd::get&lt;list&lt;int&gt;&gt;(tupleA).push_back(6);\nsortedArray = sort(tupleA, tupleB);\nsortedArray == {deque&lt;uint8_t&gt;, list&lt;float&gt;, deque&lt;double&gt;, list&lt;int&gt;};\n</code></pre>\n\n<p>The most important part is that I have to store <code>sortedArray</code> and that the sizes of the elements in the tuple may change. I have not been able to create such a <code>sort</code> function. The actual syntax of accessing the <code>sortedArray</code> is not important.</p>\n\n<p>I tried to use naive indexes to the container data inside the <code>sortedArray</code>, such as using <code>std::pair&lt;A, 1&gt;</code> to refer to the second element in tuple A, however I can't access the information of the tuple through it because it is not a constexpr</p>\n"}, {"tags": ["c++", "constants", "unreal-engine4"], "comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1466610060, "post_id": 37972531, "comment_id": 63391528, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/15506094/const-function-pointers\">const function pointers</a>"}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1466612253, "post_id": 37972531, "comment_id": 63393030, "body": "Constructor of <code>B</code> is binding pointer <code>Abc</code> to a temporary. Just lucky that <code>Print</code> is not accessing any data-member otherwise it would be invalid read."}, {"owner": {"reputation": 173, "user_id": 4516436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1063a8a453c1bfe698ac90c6071b43e2?s=128&d=identicon&r=PG", "display_name": "karnage", "link": "https://stackoverflow.com/users/4516436/karnage"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1466612435, "post_id": 37972531, "comment_id": 63393135, "body": "@Ajay Okay, that makes sense to me, but then how does GetMesh()-&gt;SetSimulatePhysics(true) work in Unreal?"}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1466612526, "post_id": 37972531, "comment_id": 63393190, "body": "Well, because the return type is non-const. The object being returned is not a const object. Change it to <code>const class UStaticMeshComponent* GetMesh() const</code>"}, {"owner": {"reputation": 173, "user_id": 4516436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1063a8a453c1bfe698ac90c6071b43e2?s=128&d=identicon&r=PG", "display_name": "karnage", "link": "https://stackoverflow.com/users/4516436/karnage"}, "edited": false, "score": 0, "creation_date": 1466612720, "post_id": 37972531, "comment_id": 63393296, "body": "Hmm, let me try to rephrase: what is the point of <code>const</code> in <code>GetMesh() const</code> above?"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 4516436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1063a8a453c1bfe698ac90c6071b43e2?s=128&d=identicon&r=PG", "display_name": "karnage", "link": "https://stackoverflow.com/users/4516436/karnage"}, "edited": false, "score": 0, "creation_date": 1466611717, "post_id": 37972771, "comment_id": 63392660, "body": "Thanks for the response, but b.GetA() seems to work even if GetA() is not const (I tested this on VS 2015 right now). I&#39;ve added more details in the question."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 173, "user_id": 4516436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1063a8a453c1bfe698ac90c6071b43e2?s=128&d=identicon&r=PG", "display_name": "karnage", "link": "https://stackoverflow.com/users/4516436/karnage"}, "edited": false, "score": 0, "creation_date": 1466612228, "post_id": 37972771, "comment_id": 63393008, "body": "@sloth If you mean my answer to 1st question, I meant make <code>b</code> const and <code>GetA()</code> non-const. But according to your screenshot, <code>b</code> is not const and <code>GetA()</code> is const."}, {"owner": {"reputation": 173, "user_id": 4516436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1063a8a453c1bfe698ac90c6071b43e2?s=128&d=identicon&r=PG", "display_name": "karnage", "link": "https://stackoverflow.com/users/4516436/karnage"}, "edited": false, "score": 0, "creation_date": 1466612617, "post_id": 37972771, "comment_id": 63393231, "body": "So if GetA() is const, but neither the returned pointer nor the object is const (meaning the caller can access Print()), then what purpose does GetA() const serve?"}, {"owner": {"reputation": 173, "user_id": 4516436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1063a8a453c1bfe698ac90c6071b43e2?s=128&d=identicon&r=PG", "display_name": "karnage", "link": "https://stackoverflow.com/users/4516436/karnage"}, "edited": false, "score": 0, "creation_date": 1466613036, "post_id": 37972771, "comment_id": 63393492, "body": "I had misunderstood your first bullet point! I finally got it. Thanks for that! But I&#39;m still confused about what the point of having a <code>const</code> in <code>A* GetA() const</code> is?"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 173, "user_id": 4516436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1063a8a453c1bfe698ac90c6071b43e2?s=128&d=identicon&r=PG", "display_name": "karnage", "link": "https://stackoverflow.com/users/4516436/karnage"}, "edited": false, "score": 0, "creation_date": 1466614684, "post_id": 37972771, "comment_id": 63394512, "body": "@sloth I tried add some explanations, see my edited answer."}, {"owner": {"reputation": 173, "user_id": 4516436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1063a8a453c1bfe698ac90c6071b43e2?s=128&d=identicon&r=PG", "display_name": "karnage", "link": "https://stackoverflow.com/users/4516436/karnage"}, "edited": false, "score": 0, "creation_date": 1466636513, "post_id": 37972771, "comment_id": 63404980, "body": "Thanks a lot! Much appreciated."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 2, "last_activity_date": 1466615136, "last_edit_date": 1466615136, "creation_date": 1466610295, "answer_id": 37972771, "question_id": 37972531, "link": "https://stackoverflow.com/questions/37972531/what-are-the-properties-of-a-const-member-functions-return-value-being-a-point/37972771#37972771", "title": "What are the properties of a const member function&#39;s return value, being a pointer?", "body": "<blockquote>\n  <ol>\n  <li>What would be different had the function not been const?</li>\n  </ol>\n</blockquote>\n\n<p>If the function is a non-const member function, you can't call it on a const object.</p>\n\n<pre><code>const B b;\nb.GetA();  // Fail, can't call a non-const member function on a const object\n</code></pre>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Are there any restrictions to what I can do with the pointer obtained via GetA()? Is it const? Does it point to a const A?</li>\n  </ol>\n</blockquote>\n\n<p>No, nothing is different here. The returned value is not const itself, and not a pointer to const, it's just <code>A*</code> as it declared. If the object is const, the member variable <code>obj</code> will be const too, i.e. <code>A* const</code>, note it's still not a pointer to const, i.e. <code>const A*</code>. Anyway you return it by value with type <code>A*</code>, so nothing is different here.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>When is this useful?</li>\n  </ol>\n</blockquote>\n\n<p>Const member function and non-const member function could be overloaded. You might use them for different purpose. e.g.</p>\n\n<pre><code>class B\n{\n    public:\n        A* GetA() { return obj; }             // returns A*\n        const A* GetA() const { return obj; } // returns const A*\n    private:\n        A* obj;\n}\n\n... \n\nB b;\nb.GetA();  // get A*\nconst B cb;\ncb.GetA(); // get const A*\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1466611525, "creation_date": 1466611525, "answer_id": 37973191, "question_id": 37972531, "link": "https://stackoverflow.com/questions/37972531/what-are-the-properties-of-a-const-member-functions-return-value-being-a-point/37973191#37973191", "title": "What are the properties of a const member function&#39;s return value, being a pointer?", "body": "<blockquote>\n  <p>What would be different had the function not been const?</p>\n</blockquote>\n\n<p>const method has a contract - it does not change internal state of object <code>B</code> directly or indirectly, for example it would not change pointer <code>obj</code> to point somewhere else. So this code:</p>\n\n<pre><code>A* GetA() const { obj = new A; return obj; }\n</code></pre>\n\n<p>would fail to compile.</p>\n\n<blockquote>\n  <p>Are there any restrictions to what I can do with the pointer obtained via GetA()? Is it const? Does it point to a const A?</p>\n</blockquote>\n\n<p>No, object of type <code>A</code> is unrelated and to make this method to return pointer of const <code>A</code> you need to change type of the returned pointer:</p>\n\n<pre><code>const A *GetA() const { return obj; } // now you cannot change A through pointer you get, unless you const_cast it.\n</code></pre>\n\n<blockquote>\n  <p>When is this useful?</p>\n</blockquote>\n\n<p>You can control separately what you can change inside method and what can be done with object, pointer to which you return. You just have choice.</p>\n"}], "owner": {"reputation": 173, "user_id": 4516436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1063a8a453c1bfe698ac90c6071b43e2?s=128&d=identicon&r=PG", "display_name": "karnage", "link": "https://stackoverflow.com/users/4516436/karnage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466615136, "creation_date": 1466609646, "last_edit_date": 1466612356, "question_id": 37972531, "link": "https://stackoverflow.com/questions/37972531/what-are-the-properties-of-a-const-member-functions-return-value-being-a-point", "title": "What are the properties of a const member function&#39;s return value, being a pointer?", "body": "<pre><code>class B\n{\n    public:\n        A* GetA() const { return obj; }\n    private:\n        A* obj;\n}\n\n... \n\nB b;\nb.GetA()-&gt;AInterfaceMethod(params);\n</code></pre>\n\n<p>So my questions are:</p>\n\n<ol>\n<li>What would be different had the function not been const?</li>\n<li>Are there any restrictions to what I can do with the pointer obtained via GetA()? Is it const? Does it point to a const A?</li>\n<li>When is this useful?</li>\n</ol>\n\n<p>I encountered this in an Unreal tutorial (<code>A</code> is forward declared in the tutorial).</p>\n\n<p>EDIT: I probably messed up, but the call <em>does</em> work. I've included the actual Unreal code below:</p>\n\n<pre><code>class ABatteryPickup : public APickup\n{\n    ABatteryPickup()\n    {\n        GetMesh()-&gt;SetSimulatePhysics(true);\n    }\n}\n\nclass Pickup\n{\n    public:\n        class UStaticMeshComponent* GetMesh() const { return PickupMesh; }\n\n    private:\n        class UStaticMeshComponent* PickupMesh;\n}\n</code></pre>\n\n<p><code>UStaticMeshComponent::SetSimulatePhysics()</code> is not <code>const</code>. </p>\n\n<p>Also, just tested this on a new, clean C++ project, and it works. <a href=\"https://i.imgur.com/JHAXxnQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.imgur.com/JHAXxnQ.jpg\" alt=\"screenshot proof\"></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1466609730, "post_id": 37972504, "comment_id": 63391276, "body": "You don&#39;t. It&#39;s automatically deleted when the stack rewinds and the variable goes out of scope."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1466609935, "post_id": 37972504, "comment_id": 63391417, "body": "Reminder:  <code>new</code> and <code>delete</code> are a pair.  When you use <code>new</code> to allocate, use <code>delete</code> when finished."}, {"owner": {"reputation": 1096, "user_id": 4477125, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JYZmH.jpg?s=128&g=1", "display_name": "Lorence Hernandez", "link": "https://stackoverflow.com/users/4477125/lorence-hernandez"}, "edited": false, "score": 2, "creation_date": 1466610017, "post_id": 37972504, "comment_id": 63391485, "body": "you dont need to worry about deleting variables that is putted on stack"}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 4929136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dbUvB.png?s=128&g=1", "display_name": "Irminsul", "link": "https://stackoverflow.com/users/4929136/irminsul"}, "is_accepted": false, "score": 3, "last_activity_date": 1466611695, "last_edit_date": 1466611695, "creation_date": 1466610792, "answer_id": 37972952, "question_id": 37972504, "link": "https://stackoverflow.com/questions/37972504/how-to-delete-1d-array/37972952#37972952", "title": "How to delete 1D array", "body": "<p>The array will be automatically deleted when leaving the scope in which the variable has been declared.\nIf you really need to free memory fast you can try put your code between embraces:</p>\n\n<pre><code>{ //create new scope\n    int size = 5;\n    double my_arr[m_size];\n\n    for (int i = 0; i &lt; size; i++)\n    {\n        my_arr[i] = (rand()%10+1) +  ((double) rand() / (RAND_MAX));;\n    }\n\n    //some stuff\n\n} //all non-pointer objects (or arrays) will be deleted\n</code></pre>\n\n<p>Or you can use pointers :</p>\n\n<pre><code>double *pMyarr =  new double[m_size] ;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 1, "creation_date": 1466614252, "post_id": 37973817, "comment_id": 63394197, "body": "An extra guideline for the second bullet point would be &quot;But generally in C++, you don&#39;t want this. You prefer using <code>std::make_unique</code> and <code>std::make_shared</code> (or <code>std::array</code> and <code>std::vector</code> like the previous item)&quot;"}, {"owner": {"reputation": 138, "user_id": 6314871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f70c41db74b7a8f9f4caecc346d4b285?s=128&d=identicon&r=PG&f=1", "display_name": "Lor&#232;loi", "link": "https://stackoverflow.com/users/6314871/lor%c3%a8loi"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1466671658, "post_id": 37973817, "comment_id": 63417575, "body": "@KABoissonneault ; I didn&#39;t know about the functions <code>make_unique</code> and <code>make_shared</code> (Partly because I&#39;m stuck to C++11). But you make a good point by mentionning smart pointers. I&#39;ll edit my answer. I just wonder; <code>std::make_unique&lt;string&gt;(&quot;hello&quot;)</code> has the same purpose as <code>std::unique_ptr&lt;string&gt;(new string(&quot;hello&quot;))</code>, doesn&#39;t it ?"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1466693051, "post_id": 37973817, "comment_id": 63433388, "body": "@Lor&#232;loi there is a stronger protection against memory-leaks in some cases, see <a href=\"http://stackoverflow.com/questions/22571202/differences-between-stdmake-unique-and-stdunique-ptr\" title=\"differences between stdmake unique and stdunique ptr\">stackoverflow.com/questions/22571202/&hellip;</a>"}], "tags": [], "owner": {"reputation": 138, "user_id": 6314871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f70c41db74b7a8f9f4caecc346d4b285?s=128&d=identicon&r=PG&f=1", "display_name": "Lor&#232;loi", "link": "https://stackoverflow.com/users/6314871/lor%c3%a8loi"}, "is_accepted": false, "score": 0, "last_activity_date": 1466672813, "last_edit_date": 1466672813, "creation_date": 1466613468, "answer_id": 37973817, "question_id": 37972504, "link": "https://stackoverflow.com/questions/37972504/how-to-delete-1d-array/37973817#37973817", "title": "How to delete 1D array", "body": "<p>First of all, I think you should consider using a <strong>memory leak detector</strong> in your programms, so you can know by yourself if your code is leaking and if you have to do something about it. In your code you would have seen that there is no need to delete anything. :)</p>\n\n<p>As far as I know, <strong>you should worry about memory in only two cases</strong>:</p>\n\n<ul>\n<li>You have allocated a C-style array with <code>malloc</code> or <code>calloc</code>. In this case, you need to use the function <code>free</code> to deallocate the array. But generally in C++, you don't want this. You prefer using a container like <code>std::array</code> or <code>std::vector</code> instead.</li>\n<li>You have created a new instance of an class with <code>new</code> and you have got a pointer to this instance. In this case, you have to use <code>delete</code> on the pointer when you don't need this instance anymore. But generally in C++11 (or further), you don't want this. If you <em>really</em> have to use a pointer, you prefer creating a smart pointer like <code>std::unique_ptr</code> or <code>std::shared_ptr</code> which will handle the memory for you.</li>\n</ul>\n\n<p>When you define a variable <strong>without</strong> using <code>new</code>, <code>malloc</code> or <code>calloc</code>, (for example <code>int a = 1 ;</code>), <strong>it will be automatically deleted</strong> when it goes out of scope. So you don't need to worry. </p>\n\n<p>Here is a simple example of a variable going out of scope:</p>\n\n<pre><code>int a = 1 ;\n{\n    int b = 1 ;\n\n    // b is implictly deleted here, just before the bracket.\n}\na++; // It works, because a exists in this scope\nb++; // It doesn't work, because b is out of scope.\n\n// a is implicitly deleted here, assuming we are at the end of a function\n</code></pre>\n"}], "owner": {"reputation": 3288, "user_id": 3128796, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a938da1334bd8a4de72edfe2740ac6e0?s=128&d=identicon&r=PG", "display_name": "asdfkjasdfjk", "link": "https://stackoverflow.com/users/3128796/asdfkjasdfjk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466672813, "creation_date": 1466609583, "question_id": 37972504, "link": "https://stackoverflow.com/questions/37972504/how-to-delete-1d-array", "title": "How to delete 1D array", "body": "<p>I create an array like as below</p>\n\n<pre><code>int size = 5;\ndouble my_arr[m_size];\n\nfor (int i = 0; i &lt; size; i++)\n{\n    my_arr[i] = (rand()%10+1) +  ((double) rand() / (RAND_MAX));;\n}\n</code></pre>\n\n<p>after doing some calculation on array I want to delete the array. So I do this </p>\n\n<pre><code>for (int i = 0; i &lt; size; i++)\n    {\n       delete my_arr[i]; \n    }\n</code></pre>\n\n<p>and I get this error </p>\n\n<pre><code>error: type \u2018double\u2019 argument given to \u2018delete\u2019, expected pointer\n</code></pre>\n\n<p>I searched internet and all solutions are related to pointer array. But I am not using any pointer. So how can I delete this array?</p>\n"}, {"tags": ["c++", "static-assert"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1466610151, "post_id": 37972394, "comment_id": 63391595, "body": "Be aware that the best answers (at the moment) rely on <code>std::true_type</code> and such. Those are part of the upcoming c++17, and you may need to rewrite the solution using the currently available <code>std::integral_constant</code>"}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1466610658, "post_id": 37972394, "comment_id": 63391929, "body": "@StoryTeller Huh? <code>std::true_type</code> is available since c++11. You might have confused it with the <code>std::bool_constant</code> alias template."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1466610791, "post_id": 37972394, "comment_id": 63392029, "body": "@cpplearner, you seem to be correct. I got it stuck in my mind that the three go hand in hand. Oh well."}], "answers": [{"comments": [{"owner": {"reputation": 2376, "user_id": 3387453, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DoHe7.png?s=128&g=1", "display_name": "Class Skeleton", "link": "https://stackoverflow.com/users/3387453/class-skeleton"}, "edited": false, "score": 1, "creation_date": 1506798224, "post_id": 37972522, "comment_id": 79966586, "body": "Above example doesn&#39;t seem to work for <code>const</code> unique pointers.  For example, <code>is_unique_ptr&lt;const std::unique_ptr&lt;int&gt;&gt;::value</code> is false."}, {"owner": {"reputation": 10789, "user_id": 668963, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/46cf01443d69ee2e3034de2d77ae1732?s=128&d=identicon&r=PG", "display_name": "neevek", "link": "https://stackoverflow.com/users/668963/neevek"}, "reply_to_user": {"reputation": 2376, "user_id": 3387453, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DoHe7.png?s=128&g=1", "display_name": "Class Skeleton", "link": "https://stackoverflow.com/users/3387453/class-skeleton"}, "edited": false, "score": 1, "creation_date": 1555169027, "post_id": 37972522, "comment_id": 98020485, "body": "@ClassSkeleton You can use <code>is_unique_ptr&lt;std::remove_cv_t&lt;const std::unique_ptr&lt;int&gt;&gt;&gt;::value</code>."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 8, "last_activity_date": 1466610018, "last_edit_date": 1466610018, "creation_date": 1466609624, "answer_id": 37972522, "question_id": 37972394, "link": "https://stackoverflow.com/questions/37972394/static-assert-for-unique-ptr-of-any-type/37972522#37972522", "title": "static_assert for unique_ptr of any type", "body": "<p>Create your own trait, with the appropriate partial specialisation:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct is_unique_ptr : std::false_type\n{};\n\ntemplate &lt;class T, class D&gt;\nstruct is_unique_ptr&lt;std::unique_ptr&lt;T, D&gt;&gt; : std::true_type\n{};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 4, "last_activity_date": 1466610306, "last_edit_date": 1466610306, "creation_date": 1466609667, "answer_id": 37972541, "question_id": 37972394, "link": "https://stackoverflow.com/questions/37972394/static-assert-for-unique-ptr-of-any-type/37972541#37972541", "title": "static_assert for unique_ptr of any type", "body": "<p>You can create a trait for that:</p>\n\n<pre><code>template &lt;typename T, typename D&gt;\nstd::true_type is_unique_ptr_impl(const std::unique_ptr&lt;T, D&gt;&amp;, int);\n\ntemplate &lt;typename T&gt;\nstd::false_type is_unique_ptr_impl(const T&amp;, ...);\n\ntemplate &lt;typename T&gt;\nusing is_unique_ptr = decltype(is_unique_ptr_impl(std::declval&lt;T&gt;(), 0));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2199, "user_id": 311567, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/05bdf9f352a8a7611279c5a662ef8ff5?s=128&d=identicon&r=PG", "display_name": "dashesy", "link": "https://stackoverflow.com/users/311567/dashesy"}, "edited": false, "score": 0, "creation_date": 1466615361, "post_id": 37972556, "comment_id": 63394901, "body": "what if <code>exp</code> does not implement <code>.get</code>?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 2199, "user_id": 311567, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/05bdf9f352a8a7611279c5a662ef8ff5?s=128&d=identicon&r=PG", "display_name": "dashesy", "link": "https://stackoverflow.com/users/311567/dashesy"}, "edited": false, "score": 0, "creation_date": 1466616191, "post_id": 37972556, "comment_id": 63395371, "body": "@dashesy Then it would still fail :)"}, {"owner": {"reputation": 2199, "user_id": 311567, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/05bdf9f352a8a7611279c5a662ef8ff5?s=128&d=identicon&r=PG", "display_name": "dashesy", "link": "https://stackoverflow.com/users/311567/dashesy"}, "edited": false, "score": 0, "creation_date": 1466641617, "post_id": 37972556, "comment_id": 63406293, "body": "So it works in a way :) only not with the given assertion message"}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": false, "score": 1, "last_activity_date": 1466609713, "creation_date": 1466609713, "answer_id": 37972556, "question_id": 37972394, "link": "https://stackoverflow.com/questions/37972394/static-assert-for-unique-ptr-of-any-type/37972556#37972556", "title": "static_assert for unique_ptr of any type", "body": "<p>You can use this:</p>\n\n<pre><code>static_assert(std::is_same&lt;decltype(expr),\n    std::unique_ptr&lt;std::remove_pointer&lt;decltype(expr.get())&gt;::type&gt;&gt;::value, \"\");\n</code></pre>\n\n<p>Basically, what it does is creating a <code>std::unique_ptr</code> out of the type from <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/get\" rel=\"nofollow\"><code>std::unique_ptr::get()</code></a>, and comparing that to <code>expr</code>. This will only ever be true if <code>expr</code> is a <code>std::unique_ptr</code>.</p>\n"}], "owner": {"reputation": 2199, "user_id": 311567, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/05bdf9f352a8a7611279c5a662ef8ff5?s=128&d=identicon&r=PG", "display_name": "dashesy", "link": "https://stackoverflow.com/users/311567/dashesy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1266, "favorite_count": 1, "accepted_answer_id": 37972522, "answer_count": 3, "score": 7, "last_activity_date": 1466610306, "creation_date": 1466609279, "question_id": 37972394, "link": "https://stackoverflow.com/questions/37972394/static-assert-for-unique-ptr-of-any-type", "title": "static_assert for unique_ptr of any type", "body": "<p>How can I statically assert that an expression is a <code>std::unique_ptr</code> i.e. <code>std::unique_ptr&lt;T&gt;</code> for any <code>T</code>.</p>\n\n<pre><code>static_assert (std::is_pointer&lt;decltype(exp)&gt;()), \"not a smart pointer\")\n</code></pre>\n\n<p>Above does not work. If nothing straight forward, I am only interested if <code>bool()</code> operator is defined for the type.</p>\n"}, {"tags": ["c++", "algorithm", "opencv", "image-processing", "computer-vision"], "comments": [{"owner": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 0, "creation_date": 1466626028, "post_id": 37972263, "comment_id": 63400751, "body": "What exactly do you mean by &quot;project the IR Image onto a 2D plane&quot;? which plane? Is the image you&#39;ve given as example the one you want to project?"}, {"owner": {"reputation": 155, "user_id": 6494801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06d439e46d86cb3765e454b9c4748fa7?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/6494801/andre"}, "reply_to_user": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 0, "creation_date": 1466626999, "post_id": 37972263, "comment_id": 63401234, "body": "@Raluca yes the image that&#39;s in the example I want to project it, including the point cloud"}, {"owner": {"reputation": 155, "user_id": 6494801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06d439e46d86cb3765e454b9c4748fa7?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/6494801/andre"}, "reply_to_user": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 1, "creation_date": 1466627426, "post_id": 37972263, "comment_id": 63401450, "body": "@Raluca If I have the IR image and point cloud from depth map, how would I recognize the pallet ?"}, {"owner": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 1, "creation_date": 1466627818, "post_id": 37972263, "comment_id": 63401643, "body": "Sorry, but I still don&#39;t get it. You want to project that image onto a plane? If so, which plane? or you want to project the point cloud onto that image?"}, {"owner": {"reputation": 155, "user_id": 6494801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06d439e46d86cb3765e454b9c4748fa7?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/6494801/andre"}, "reply_to_user": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 1, "creation_date": 1466627845, "post_id": 37972263, "comment_id": 63401654, "body": "yes I want to project the point cloud onto that image"}, {"owner": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 1, "creation_date": 1466627897, "post_id": 37972263, "comment_id": 63401676, "body": "If your goal is to detect the pallet, why don&#39;t you use machine learning? OpenCV has such algorithms. You would need a database with images with and without a pallet, labelled accordingly."}, {"owner": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 0, "creation_date": 1466628049, "post_id": 37972263, "comment_id": 63401733, "body": "do you have the point cloud as an image or as a set of 3D data?"}, {"owner": {"reputation": 155, "user_id": 6494801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06d439e46d86cb3765e454b9c4748fa7?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/6494801/andre"}, "reply_to_user": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 1, "creation_date": 1466628212, "post_id": 37972263, "comment_id": 63401826, "body": "can you guide me to opencv maching learning algorithms ?  I have a point cloud converted to a height map and I have the point cloud as a set of 3D Data"}, {"owner": {"reputation": 155, "user_id": 6494801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06d439e46d86cb3765e454b9c4748fa7?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/6494801/andre"}, "reply_to_user": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 1, "creation_date": 1466628320, "post_id": 37972263, "comment_id": 63401877, "body": "is there an easier way instead of machine learning. I&#39;m a beginner and I dont have much experience with opencv"}, {"owner": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 0, "creation_date": 1466628451, "post_id": 37972263, "comment_id": 63401937, "body": "I can see you are a beginner in image processing/OpenCV and you&#39;re trying to resolve a complex problem. Who&#39;s asking you that? Is it a school project?"}, {"owner": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 0, "creation_date": 1466628497, "post_id": 37972263, "comment_id": 63401961, "body": "Regarding the machine learning techniques: it&#39;s been a while since I last used one and OpenCV evolved since. You could take a look at their documentation. I think they should have some sample code. I guess SVM could work for you <a href=\"http://docs.opencv.org/3.1.0/dd/ded/group__ml.html#gsc.tab=0\" rel=\"nofollow noreferrer\">docs.opencv.org/3.1.0/dd/ded/group__ml.html#gsc.tab=0</a>"}, {"owner": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 0, "creation_date": 1466628724, "post_id": 37972263, "comment_id": 63402066, "body": "Regarding you question if there is an easier way: it is still not clear to me what&#39;s your goal. Just to detect the presence of the pallet in an image? You want to segment/locate it in the image? would it always be a forklift there? What&#39;s the context of all of this?"}, {"owner": {"reputation": 155, "user_id": 6494801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06d439e46d86cb3765e454b9c4748fa7?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/6494801/andre"}, "reply_to_user": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 0, "creation_date": 1466628893, "post_id": 37972263, "comment_id": 63402158, "body": "yes I want to segmnet and locate it in the image. yes there will be always a fork lift, and I have the point cloud from two depth camera and I also have the point cloud converted to height map for blob selection."}, {"owner": {"reputation": 155, "user_id": 6494801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06d439e46d86cb3765e454b9c4748fa7?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/6494801/andre"}, "reply_to_user": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 1, "creation_date": 1466630020, "post_id": 37972263, "comment_id": 63402674, "body": "how SVM would work in my case ? I have seen that post.<a href=\"http://stackoverflow.com/questions/14694810/using-opencv-and-svm-with-images\" title=\"using opencv and svm with images\">stackoverflow.com/questions/14694810/&hellip;</a>, but I don&#39;t know what should I do, I&#39;m a beginner and have no clue. Do you have a better idea ?"}, {"owner": {"reputation": 155, "user_id": 6494801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06d439e46d86cb3765e454b9c4748fa7?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/6494801/andre"}, "reply_to_user": {"reputation": 281, "user_id": 2874295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC97H.png?s=128&g=1", "display_name": "Raluca", "link": "https://stackoverflow.com/users/2874295/raluca"}, "edited": false, "score": 0, "creation_date": 1466630248, "post_id": 37972263, "comment_id": 63402771, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/115347/discussion-between-andre-and-raluca\">continue this discussion in chat</a>."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1466663739, "post_id": 37972263, "comment_id": 63412663, "body": "@andre added few idies as an answer. You should add the RGB and Depth image data (Your image is neither) + FOV of your Kinect cameras in case anyone would like to give it a shot...."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 6494801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06d439e46d86cb3765e454b9c4748fa7?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/6494801/andre"}, "edited": false, "score": 0, "creation_date": 1466667349, "post_id": 37983864, "comment_id": 63414859, "body": "I have added the RGB image and Depth Image. Can you please write a pseudo code or opencv code of approach 2, to help me more. I have no idea how to do it properly."}, {"owner": {"reputation": 155, "user_id": 6494801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06d439e46d86cb3765e454b9c4748fa7?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/6494801/andre"}, "edited": false, "score": 0, "creation_date": 1466691851, "post_id": 37983864, "comment_id": 63432444, "body": "please I need help :)"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "reply_to_user": {"reputation": 155, "user_id": 6494801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06d439e46d86cb3765e454b9c4748fa7?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/6494801/andre"}, "edited": false, "score": 0, "creation_date": 1466693319, "post_id": 37983864, "comment_id": 63433576, "body": "@andre addded edit ... need help with what exactly (I do not use OpenCV so no I can not write the code in it)"}, {"owner": {"reputation": 155, "user_id": 6494801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06d439e46d86cb3765e454b9c4748fa7?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/6494801/andre"}, "edited": false, "score": 0, "creation_date": 1466696291, "post_id": 37983864, "comment_id": 63435889, "body": "so you converted the image to HSV ? and then what should I do next ? how would I detect the size, shape, area ? should I use findcontours to extract the pallet ?"}, {"owner": {"reputation": 155, "user_id": 6494801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06d439e46d86cb3765e454b9c4748fa7?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/6494801/andre"}, "edited": false, "score": 0, "creation_date": 1466696488, "post_id": 37983864, "comment_id": 63436045, "body": "can you segmentate it and show an example please ? even in pseudo code to implement the algorithm my self"}], "tags": [], "owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "is_accepted": true, "score": 1, "last_activity_date": 1466702963, "last_edit_date": 1495540738, "creation_date": 1466663508, "answer_id": 37983864, "question_id": 37972263, "link": "https://stackoverflow.com/questions/37972263/how-to-project-ir-image-on-a-2d-plane-using-opencv-and-pcl/37983864#37983864", "title": "How to project IR image on a 2D plane using OpenCV and PCL", "body": "<p>Where are the <strong>RGB</strong> data? You can use it to help with the detection. You do not need to project the image onto any plane to detect a pellet. There are basically 2 ways used for detection</p>\n\n<ol>\n<li><p><strong>non-deterministic based on neural network, fuzzy logic, machine learning, etc</strong></p>\n\n<p>This approach need a training dataset to recognize the object. Much experience is needed for proper training set and classifier architecture/topology selection. But other then that you do not need to program it... as usually some readily available lib/tool is used just configure and pass the data.</p></li>\n<li><p><strong>deterministic based on distance or correlation coefficients</strong></p>\n\n<p>I would start with detecting specific features like:</p>\n\n<ul>\n<li><strong>pallet has specific size</strong></li>\n<li>pallet has sharp edges and <strong>specific geometry</strong> shape in depth data</li>\n<li>pallet has <strong>specific range of colors</strong> (yellowish wood +/- lighting and dirt)</li>\n<li>Wood has specific texture patterns</li>\n</ul>\n\n<p>So compute some coefficient for each feature how close the object is to real pallet. And then just treshold the distance of all coefficients combined (possibly weighted as some features are more robust).</p></li>\n</ol>\n\n<p>I do not use the <strong>#1</strong> approach so I would go for <strong>#2</strong>. So combine the <strong>RGB</strong> and depth data (they have to be matched exactly). Then segmentate the image (based on depth and color). After that for each found object classify if it is pallet ...</p>\n\n<p><strong>[Edit1]</strong></p>\n\n<p>Your colored image does not correspond to depth data. The aligned gray-scale has poor quality and the depth data image is also very poor. Is the depth data processed somehow (loosing precision)? If you look at your data from different sides:</p>\n\n<p><a href=\"https://i.stack.imgur.com/AM76b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AM76b.png\" alt=\"image\"></a></p>\n\n<p>You can see how poor it is so I doubt you can use depth data for detection at all...</p>\n\n<p>PS. I used my <a href=\"https://stackoverflow.com/a/35914008/2521214\">Align already captured rgb and depth images</a> for the visualization.</p>\n\n<p>The only thing left is the colored image and detect areas with matching color only. Then detect the features and classify. The color of your pallet in the image is almost white. Here HSV reduced colors to basic 16 colors (too lazy to segmentate) </p>\n\n<p><a href=\"https://i.stack.imgur.com/SbIXe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SbIXe.png\" alt=\"color reduction\"></a></p>\n\n<p>You should obtain range of colors of the pallets possible by your setup to ease up the detection. Then check those objects for the features like size, shape,area,circumference...</p>\n\n<p><strong>[Edit2]</strong></p>\n\n<p><strong>So I would start with Image preprocessing:</strong></p>\n\n<ol>\n<li><strong>convert to HSV</strong></li>\n<li><p><strong>treshold only pixels close to pallet color</strong></p>\n\n<p>I chose <code>(H=40,S=18,V&gt;100)</code> as a pallet color. My HSV  ranges are <code>&lt;0,255&gt;</code> per channel so <code>Hue</code> angle difference can be only <code>&lt;-180deg,+180deg&gt;</code> max which corresponds to <code>&lt;-128,+128&gt;</code> in my ranges.</p></li>\n<li><p><strong>remove too thin areas</strong></p>\n\n<p>Just scan all Horizontal an Vertical lines count consequent set pixels and if too small size recolor them to black...</p></li>\n</ol>\n\n<p>This is the result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pTsLs.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pTsLs.jpg\" alt=\"example1\"></a></p>\n\n<p>On the left the original image (downsized so it fits to this page), In the middle is the color treshold result and last is the filtering out of small areas. You can play with tresholds and pallet color to change behavior to suite your needs.</p>\n\n<p>Here <strong>C++</strong> code:</p>\n\n<pre><code>int tr_d=10;    // min size of pallet [pixels[\nint h,s,v,x,y,xx;\ncolor c;\n\npic1=pic0;\npic1.pf=_pf_rgba;\npic2.resize(pic1.xs*3,pic1.ys); xx=0;\npic2.bmp-&gt;Canvas-&gt;Draw(xx,0,pic0.bmp); xx+=pic1.xs;\n\n// [color selection]\nfor (y=0;y&lt;pic1.ys;y++)\n for (x=0;x&lt;pic1.xs;x++)\n    {\n    // get color from image\n    c=pic0.p[y][x];\n    rgb2hsv(c);\n    // distance to white-yellowish color in HSV (H=40,S=18,V&gt;100)\n    h=c.db[picture::_h]-40;\n    s=c.db[picture::_s]-18;\n    v=c.db[picture::_v];\n    // hue is cyclic angular so use only shorter angle\n    if (h&lt;-128) h+=256;\n    if (h&gt;+128) h-=256;\n    // abs value\n    if (h&lt;   0) h=-h;\n    if (s&lt;   0) s=-s;\n    // treshold close colors\n    c.dd=0;\n    if (h&lt;25)\n     if (s&lt;25)\n      if (v&gt;100)\n       c.dd=0x00FFFFFF;\n    pic1.p[y][x]=c;\n    }\npic2.bmp-&gt;Canvas-&gt;Draw(xx,0,pic1.bmp); xx+=pic1.xs;\n\n// [remove too thin areas]\nfor (y=0;y&lt;pic1.ys;y++)\n for (x=0;x&lt;pic1.xs;)\n    {\n    for (   ;x&lt;pic1.xs;x++) if ( pic1.p[y][x].dd) break;    // find set pixel\n    for (h=x;x&lt;pic1.xs;x++) if (!pic1.p[y][x].dd) break;    // find unset pixel\n    if (x-h&lt;tr_d) for (;h&lt;x;h++) pic1.p[y][h].dd=0;         // if too small size recolor to zero\n    }\nfor (x=0;x&lt;pic1.xs;x++)\n for (y=0;y&lt;pic1.ys;)\n    {\n    for (   ;y&lt;pic1.ys;y++) if ( pic1.p[y][x].dd) break;    // find set pixel\n    for (h=y;y&lt;pic1.ys;y++) if (!pic1.p[y][x].dd) break;    // find unset pixel\n    if (y-h&lt;tr_d) for (;h&lt;y;h++) pic1.p[h][x].dd=0;         // if too small size recolor to zero\n    }\npic2.bmp-&gt;Canvas-&gt;Draw(xx,0,pic1.bmp); xx+=pic1.xs;\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/a/37963338/2521214\">how to extract the borders of an image (OCT/retinal scan image)</a> for the description of <code>picture</code> and <code>color</code>.  Or look at any of my <strong>DIP/CV</strong> tagged answers. Now the code is well commented and straightforward but just need to add:</p>\n\n<p>You can ignore <code>pic2</code> stuff it is just the image posted above so I do not need to manually print screen and merge the subresult in paint...  To improve robustness you should add enhancing of dynamic range (so the tresholds have the same conditions for any input images). Also you should compare to more then just single color (if more wood types of pallet is present).</p>\n\n<p><strong>Now you should segmentate or label the areas</strong></p>\n\n<ol>\n<li><strong>loop through entire image</strong></li>\n<li><strong>find first pixel set with the pallet color</strong></li>\n<li><p><strong>flood fill the area with some distinct ID color different from set pallet color</strong></p>\n\n<p>I use black <code>0x00000000</code> space and white <code>0x00FFFFFF</code> as pallete pixel color. So use <code>ID={1,2,3,4,5...}</code>. Also remember number of filled pixels (that is your area) so you do not need to compute it again. You can also compute bounding box directly while filling.</p></li>\n<li><p><strong>compute and compare features</strong></p>\n\n<p>You need to experiment with more then one image. To find out what properties are good for detection. I would go for circumference length vs area ratio. and or bounding box size... The circumference can be extracted by simply selecting all pixels with proper ID color neighboring black pixel.</p></li>\n</ol>\n\n<p>See also similar <a href=\"https://stackoverflow.com/a/37046721/2521214\">Fracture detection in hand using image proccessing</a></p>\n\n<p>Good luck and have fun ...</p>\n"}], "owner": {"reputation": 155, "user_id": 6494801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/06d439e46d86cb3765e454b9c4748fa7?s=128&d=identicon&r=PG&f=1", "display_name": "andre", "link": "https://stackoverflow.com/users/6494801/andre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 986, "favorite_count": 0, "accepted_answer_id": 37983864, "answer_count": 1, "score": 2, "last_activity_date": 1467375835, "creation_date": 1466608938, "last_edit_date": 1467375835, "question_id": 37972263, "link": "https://stackoverflow.com/questions/37972263/how-to-project-ir-image-on-a-2d-plane-using-opencv-and-pcl", "title": "How to project IR image on a 2D plane using OpenCV and PCL", "body": "<p>I have a <strong>Kinect</strong> and I'm using <strong>OpenCV</strong> and point cloud library. I would like to project the <strong>IR</strong> Image onto a <strong>2D</strong> plane for forklift pallet detection. How would I do that? </p>\n\n<p>I'm trying to detect the pallet in the forklift here is an image:</p>\n"}, {"tags": ["c++", "binaryfiles", "access-violation", "reinterpret-cast"], "comments": [{"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 2, "creation_date": 1466608462, "post_id": 37972036, "comment_id": 63390377, "body": "Have you tried stepping through the code in a debugger?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 5, "creation_date": 1466608470, "post_id": 37972036, "comment_id": 63390386, "body": "Reading and writing the bytes of a <code>std::string</code> (or most any slightly complicated class object) doesn&#39;t work. You have to write each element&#39;s value separately (or use a serialization package)."}, {"owner": {"reputation": 126174, "user_id": 23501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7f65a2f291636c0bd19920b2b6d525b?s=128&d=identicon&r=PG", "display_name": "Ates Goral", "link": "https://stackoverflow.com/users/23501/ates-goral"}, "edited": false, "score": 1, "creation_date": 1466608828, "post_id": 37972036, "comment_id": 63390627, "body": "General hint: Avoid using <code>reinterpret_cast</code> unless you absolutely absolutely have to use it for a particular purpose."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1466609123, "creation_date": 1466609123, "answer_id": 37972331, "question_id": 37972036, "link": "https://stackoverflow.com/questions/37972036/access-violation-reading-location-using-binary-file/37972331#37972331", "title": "Access violation reading location using binary file", "body": "<blockquote>\n<pre><code>dataFile.write(reinterpret_cast&lt;char *&gt;(&amp;divisionData), sizeof(divisionData)); \n</code></pre>\n</blockquote>\n\n<p>Works only if you have POD types. It does not work when you have a <code>std::string</code> in there. You'll need to use something along the lines of:</p>\n\n<pre><code>// Write the size of the string.\nstd::string::size_type size = divisionDat.divisionName.size();\ndataFile.write(reinterpret_cast&lt;char*&gt;(&amp;size), sizeof(size));\n\n// Now write the string.\ndataFile.write(reinterpret_cast&lt;char*&gt;(divisionDat.divisionName.c_str()), size);\n\n// Write the quarter and the sales.\ndataFile.write(reinterpret_cast&lt;char*&gt;(&amp;divisionDat.quarter), sizeof(divisionDat.quarter));\ndataFile.write(reinterpret_cast&lt;char*&gt;(&amp;divisionDat.sales), sizeof(divisionDat.sales));\n</code></pre>\n\n<p>Change the read calls to match the write calls.</p>\n"}, {"comments": [{"owner": {"reputation": 200, "user_id": 3284178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/db60cb6fc3284317d795b31663c308c4?s=128&d=identicon&r=PG&f=1", "display_name": "vasilescur", "link": "https://stackoverflow.com/users/3284178/vasilescur"}, "edited": false, "score": 0, "creation_date": 1466619561, "post_id": 37972752, "comment_id": 63397335, "body": "Okay, big problem. I swapped out the string with a char[300], but when I try to do <code>divisionData.divisionName = name.c_str();</code> (where <code>name</code> was just inputted), I get the error: <code>Expression must be a modifyable lvalue</code>. what???"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 200, "user_id": 3284178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/db60cb6fc3284317d795b31663c308c4?s=128&d=identicon&r=PG&f=1", "display_name": "vasilescur", "link": "https://stackoverflow.com/users/3284178/vasilescur"}, "edited": false, "score": 0, "creation_date": 1466620404, "post_id": 37972752, "comment_id": 63397820, "body": "@user3284178 You&#39;re encountering a similar problem: you&#39;re trying to assign a pointer. You should use something like this: <code>std::copy(name.begin(), name.end(), divisionData.divisionName)</code>. Note that in this case, you&#39;ll need to make sure that you do proper bounds checking."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 1, "last_activity_date": 1466610216, "creation_date": 1466610216, "answer_id": 37972752, "question_id": 37972036, "link": "https://stackoverflow.com/questions/37972036/access-violation-reading-location-using-binary-file/37972752#37972752", "title": "Access violation reading location using binary file", "body": "<pre><code>// Dump struct into binary file\ndataFile.write(reinterpret_cast&lt;char *&gt;(&amp;divisionData), sizeof(divisionData)); \n\n/*...*/\n\n// Read an object from the file, cast as DIVISION_DATA_S\ndataFile.read(reinterpret_cast&lt;char *&gt;(&amp;divisionData), sizeof(divisionData));\n</code></pre>\n\n<p>This will categorically not work under any circumstances.</p>\n\n<p><code>std::string</code> uses heap-allocated pointers to store any string data it contains. What you're writing to the file is <em>not</em> the contents of the string, but simply the address where the string's data is located (along with some meta-data). If you arbitrarily read those pointers and treat them as memory (like you are in the <code>cout</code> statement) you'll reference deleted memory.</p>\n\n<p>You have two options.</p>\n\n<p>If all you want is a struct that can be easily serialized, then simply convert it like so:</p>\n\n<pre><code>// Struct to hold division data\nstruct DIVISION_DATA_S\n{\n    char divisionName[500];\n    int quarter;\n    double sales;\n};\n</code></pre>\n\n<p>Of course, with this style, you're limited to interacting with the name as a c-string, and also are limited to 500 characters.</p>\n\n<p>The other option is to <em>properly</em> serialize this object.</p>\n\n<pre><code>// Struct to hold division data\nstruct DIVISION_DATA_S\n{\n    string divisionName;\n    int quarter;\n    double sales;\n\n    string serialize() const { //Could also have the signature be std::vector&lt;char&gt;, but this will make writing with it easier.\n        string output;\n        std::array&lt;char, 8&gt; size_array;\n        size_t size_of_string = divisionName.size();\n        for(char &amp; c : size_array) {\n            c = size_of_string &amp; 0xFF;\n            size_of_string &gt;&gt;= 8;\n        }\n        output.insert(output.end(), size_array.begin(), size_array.end());\n        output.insert(output.end(), divisionName.begin(), divisionName.end());\n        int temp_quarter = quarter;\n        for(char &amp; c : size_array) {\n            c = temp_quarter &amp; 0xFF;\n            temp_quarter &gt;&gt;= 8;\n        }\n        output.insert(output.end(), size_array.begin(), size_array.begin() + sizeof(int));\n        size_t temp_sales = reinterpret_cast&lt;size_t&gt;(sales);\n        for(char &amp; c : size_array) {\n            c = temp_sales &amp; 0xFF;\n            temp_sales &gt;&gt;= 8;\n        }\n        output.insert(output.end(), size_array.begin(), size_array.end());\n        return output;\n    }\n\n    size_t unserialize(const string &amp; input) {\n        size_t size_of_string = 0;\n        for(int i = 7; i &gt;= 0; i--) {\n            size_of_string &lt;&lt;= 8;\n            size_of_string += unsigned char(input[i]);\n        }\n        divisionName = input.substr(7, 7 + size_of_string);\n        quarter = 0;\n        for(int i = 10 + size_of_string; i &gt;= 7 + size_of_string; i--) {\n            quarter &lt;&lt;= 8;\n            quarter += unsigned char(input[i]);\n        }\n        size_t temp_sales = 0;\n        for(int i = 18 + size_of_string; i &gt;= 11 + size_of_string; i--) {\n            temp_sales &lt;&lt;= 8;\n            temp_sales += unsigned char(input[i]);\n        }\n        sales = reinterpret_cast&lt;double&gt;(temp_sales);\n        return 8 + size_of_string + 4 + 8;\n    }\n};\n</code></pre>\n\n<p>Writing to files is pretty easy:</p>\n\n<pre><code>dataFile &lt;&lt; divisionData.serialize();\n</code></pre>\n\n<p>Reading can be a little harder:</p>\n\n<pre><code>stringstream ss;\nss &lt;&lt; dataFile.rdbuf();\nstring file_data = ss.str();\nsize_t size = divisionData.unserialize(file_data);\nfile_data = file_data.substr(size);\nsize = divisionData.unserialize(file_data);\n/*...*/\n</code></pre>\n\n<p>By the way, I haven't checked my code for syntax or completeness. This example is meant to serve as a reference for the kind of code that you'd need to write to properly serialize/unserialize complex objects. I <em>believe</em> it to be correct, but I wouldn't just throw it in untested.</p>\n"}, {"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 1, "last_activity_date": 1466610924, "creation_date": 1466610924, "answer_id": 37972995, "question_id": 37972036, "link": "https://stackoverflow.com/questions/37972036/access-violation-reading-location-using-binary-file/37972995#37972995", "title": "Access violation reading location using binary file", "body": "<p>welcome to the world of serialization. You are trying to 'bit blit' your structure into a file. This only works for very simple types (int, float, char[xxx]) where the data is actually inline. And even when it does work you are stuck with reloading the data into the same type of machine (same word size, same endianness). </p>\n\n<p>What you need to do is serilaze the data and then deserialize it back. You can invent ways of doing that yourself or you can use one on <em>many</em> standards. There are 2 basic types - binary (efficient, not human readable) and text (less efficient but human readable)</p>\n\n<p>text</p>\n\n<ul>\n<li>json</li>\n<li>yaml</li>\n<li>xml</li>\n<li>csv</li>\n</ul>\n\n<p>binary</p>\n\n<ul>\n<li>protobuf</li>\n</ul>\n\n<p>boost has a serialization library <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/serialization/doc/\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_61_0/libs/serialization/doc/</a></p>\n\n<p>Also you might like to look here</p>\n\n<p><a href=\"https://isocpp.org/wiki/faq/serialization\" rel=\"nofollow\">https://isocpp.org/wiki/faq/serialization</a></p>\n"}], "owner": {"reputation": 200, "user_id": 3284178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/db60cb6fc3284317d795b31663c308c4?s=128&d=identicon&r=PG&f=1", "display_name": "vasilescur", "link": "https://stackoverflow.com/users/3284178/vasilescur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 860, "favorite_count": 0, "accepted_answer_id": 37972752, "answer_count": 3, "score": 0, "last_activity_date": 1466618385, "creation_date": 1466608350, "last_edit_date": 1466618385, "question_id": 37972036, "link": "https://stackoverflow.com/questions/37972036/access-violation-reading-location-using-binary-file", "title": "Access violation reading location using binary file", "body": "<p>First off, I know there are posts with similar problems, but I cannot find the solution to mine in any of them. </p>\n\n<p>This is for a programming assignment using binary and text files to store \"Corporate sales data.\" (Division name, quarter, and sales), and then to search for specified records inside the binary data file and display them.</p>\n\n<p>Here are the important parts of my code:</p>\n\n<pre><code>#include stuff\n...\n\n// Struct to hold division data\nstruct DIVISION_DATA_S\n{\n    string divisionName;\n    int quarter;\n    double sales;\n};\n\nint main()\n{\n    ...\n\n    // Open the data file\n    fstream dataFile;\n    dataFile.open(dataFilePath, ios::in | ios::out | ios::binary);\n\n    ... Get data from user, store in an instance of my struct ...\n\n    // Dump struct into binary file\n    dataFile.write(reinterpret_cast&lt;char *&gt;(&amp;divisionData), sizeof(divisionData));        \n\n    // Cycle through the targets file and display the record from divisiondata.dat for each entry\nwhile(targetsFile &gt;&gt; targetDivisionName)\n{       \n    int targetQuarter;  // Target quarter\n    string targetQuarterStr;\n    targetsFile.ignore();   // Ignore the residual '\\n' from the \"&gt;&gt;\" read\n    getline(targetsFile, targetQuarterStr);\n    targetQuarter = atoi(targetQuarterStr.c_str()); // Parses into an int\n\n    cout &lt;&lt; \"Target: \" &lt;&lt; targetDivisionName &lt;&lt; \" \" &lt;&lt; targetQuarter &lt;&lt; endl;\n\n    // Linear search the data file for the required name and quarter to find sales amount\n    double salesOfTarget;\n    bool isFound = false;\n    while (!isFound &amp;&amp; !dataFile.eof())\n    {\n        cout &lt;&lt; \"Found division data: \" &lt;&lt; targetDivisionName &lt;&lt; \" \" &lt;&lt; targetQuarter &lt;&lt; endl;\n        DIVISION_DATA_S divisionData;\n\n        // Read an object from the file, cast as DIVISION_DATA_S\n        dataFile.read(reinterpret_cast&lt;char *&gt;(&amp;divisionData), sizeof(divisionData));\n        cout &lt;&lt; \"Successfully read data for \" &lt;&lt; targetDivisionName &lt;&lt; \" \" &lt;&lt; targetQuarter &lt;&lt; endl\n            &lt;&lt; \"Name: \" &lt;&lt; divisionData.divisionName &lt;&lt; \", Q: \" &lt;&lt; divisionData.quarter &lt;&lt; \", \"\n            &lt;&lt; \"Sales: \" &lt;&lt; divisionData.sales &lt;&lt; endl;\n\n        // Test for a match of both fields\n        if (divisionData.divisionName == targetDivisionName &amp;&amp; divisionData.quarter == targetQuarter)\n        {\n            isFound = true;\n            cout &lt;&lt; \"Match!\" &lt;&lt; endl;\n            salesOfTarget = divisionData.sales;\n        }\n    }\n    if (!isFound)   // Error message if record is not found in data file\n    {\n        cout &lt;&lt; \"\\nError. Could not find record for \" &lt;&lt; targetDivisionName\n            &lt;&lt; \" division, quarter \" &lt;&lt; targetQuarter &lt;&lt; endl;\n    }\n    else\n    {\n        // Display the corresponding record\n        cout &lt;&lt; \"Division: \" &lt;&lt; targetDivisionName &lt;&lt; \", Quarter: \" &lt;&lt; targetQuarter\n            &lt;&lt; \"Sales: \" &lt;&lt; salesOfTarget &lt;&lt; endl;\n        totalSales += salesOfTarget;    // Add current sales to the sales accumulator\n        numberOfSalesFound++;   // Increment total number of sales found\n    }\n}\n</code></pre>\n\n<p>Sorry for the lack of indent for the while loop, copy/paste kind of messed it up. </p>\n\n<p>My problem appears when attempting to access information read from the binary file. For instance, when it tries to execute the <code>cout</code> statement I added for debugging, it gives me this error: </p>\n\n<pre><code>Unhandled exception at 0x0FED70B6 (msvcp140d.dll) in CorporateSalesData.exe: 0xC0000005: Access violation reading location 0x310A0D68.\n</code></pre>\n\n<p>Now, from what I have read, it seems that this means something is trying to read from the very low regions of memory, AKA something somewhere has something to do with a null pointer, but I can't imagine how that would appear. This whole read operation is copied exactly from my textbook, and I have no idea what a <code>reinterpret_chast</code> is, let alone how it works or how to fix errors with it. Please help?</p>\n\n<p>EDIT: Thanks for all the help. To avoid complications or using something I don't fully understand, I'm gonna go with switching to a c-string for the divisionName.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1466608291, "post_id": 37971945, "comment_id": 63390269, "body": "Overflow... Try with a slightly smaller value."}, {"owner": {"reputation": 96748, "user_id": 74757, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/10331bb0b4eb995500acc85fb0d16aea?s=128&d=identicon&r=PG", "display_name": "C\u1d0f\u0280\u028f", "link": "https://stackoverflow.com/users/74757/c%e1%b4%8f%ca%80%ca%8f"}, "edited": false, "score": 0, "creation_date": 1466608351, "post_id": 37971945, "comment_id": 63390308, "body": "Maximum value of a integer before it overflows is about 2.1 billion. If you multiple 1.5 by 10 you get 10.5 billion, so it overflows, a few times. Whatever result you got is divided by 10. Use a <code>long</code> if you need to do math with bigger integers."}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1466608495, "post_id": 37971945, "comment_id": 63390402, "body": "Fire up the Windows Calculator app and select View|Programmer.  Then try your example and watch what happens with the bits."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1466608665, "post_id": 37971945, "comment_id": 63390515, "body": "Note that signed integer overflow is <a href=\"http://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">undefined behavior</a>, and that compilers can take advantage of that status to optimize the produced program. gcc, for one, generally exploits it with something approaching glee."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1466608734, "post_id": 37971945, "comment_id": 63390557, "body": "@JoachimPileborg I&#39;m not sure if that dupe target applies.  It appears the OP does not understand the order of evaluation and how overflow plays into that."}, {"owner": {"reputation": 3, "user_id": 6043125, "user_type": "registered", "profile_image": "https://graph.facebook.com/202909370072742/picture?type=large", "display_name": "Galal Ramzy", "link": "https://stackoverflow.com/users/6043125/galal-ramzy"}, "edited": false, "score": 0, "creation_date": 1466608959, "post_id": 37971945, "comment_id": 63390720, "body": "i think when i multiply by 10 and then divide by 10 in the same statement nothing will chang as we do in math when for example (5 * 10)/10 still be 5 am i wrong?"}, {"owner": {"reputation": 96748, "user_id": 74757, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/10331bb0b4eb995500acc85fb0d16aea?s=128&d=identicon&r=PG", "display_name": "C\u1d0f\u0280\u028f", "link": "https://stackoverflow.com/users/74757/c%e1%b4%8f%ca%80%ca%8f"}, "edited": false, "score": 0, "creation_date": 1466609336, "post_id": 37971945, "comment_id": 63390987, "body": "@GalalRamzy: The computer doesn&#39;t recognize that the *10 and / 10 cancel each other out. It actually performs the math. First it does 5 * 10 = 50, then divides 50 by 10. The problem in your question is that 1.5B * 10 is a bigger number than can fit in the <code>int</code> data type. If you took the maximum integer value and added 1, you would get the minimum integer value, a negative number."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1466609581, "post_id": 37971945, "comment_id": 63391169, "body": "@NathanOliver Reading the comments by the OP it&#39;s clear that the question is actually about the evaluation order. Reopened."}, {"owner": {"reputation": 3, "user_id": 6043125, "user_type": "registered", "profile_image": "https://graph.facebook.com/202909370072742/picture?type=large", "display_name": "Galal Ramzy", "link": "https://stackoverflow.com/users/6043125/galal-ramzy"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1466609804, "post_id": 37971945, "comment_id": 63391331, "body": "@Joachim Pileborg you are right my question is about  evaluation order,thank you"}, {"owner": {"reputation": 3, "user_id": 6043125, "user_type": "registered", "profile_image": "https://graph.facebook.com/202909370072742/picture?type=large", "display_name": "Galal Ramzy", "link": "https://stackoverflow.com/users/6043125/galal-ramzy"}, "reply_to_user": {"reputation": 96748, "user_id": 74757, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/10331bb0b4eb995500acc85fb0d16aea?s=128&d=identicon&r=PG", "display_name": "C\u1d0f\u0280\u028f", "link": "https://stackoverflow.com/users/74757/c%e1%b4%8f%ca%80%ca%8f"}, "edited": false, "score": 0, "creation_date": 1466609942, "post_id": 37971945, "comment_id": 63391418, "body": "@C\u1d0f\u0280\u028f I get it thank you"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1466610198, "post_id": 37971945, "comment_id": 63391631, "body": "@JoachimPileborg Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6043125, "user_type": "registered", "profile_image": "https://graph.facebook.com/202909370072742/picture?type=large", "display_name": "Galal Ramzy", "link": "https://stackoverflow.com/users/6043125/galal-ramzy"}, "edited": false, "score": 0, "creation_date": 1466608576, "post_id": 37972017, "comment_id": 63390464, "body": "do you mean that the variable is multiplied by 10 then assigned to the variable which is not able to hold so the result is a different number which is divided by 10"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 3, "user_id": 6043125, "user_type": "registered", "profile_image": "https://graph.facebook.com/202909370072742/picture?type=large", "display_name": "Galal Ramzy", "link": "https://stackoverflow.com/users/6043125/galal-ramzy"}, "edited": false, "score": 0, "creation_date": 1466608667, "post_id": 37972017, "comment_id": 63390518, "body": "@GalalRamzy Not quite. <code>1500000000 * 10</code> has to briefly get stored in a register in memory before it then gets divided by 10. When it gets stored in a register, it has to get truncated, which we usually refer to as integer overflow."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 2, "last_activity_date": 1466608310, "creation_date": 1466608310, "answer_id": 37972017, "question_id": 37971945, "link": "https://stackoverflow.com/questions/37971945/get-confused-by-mutlibly-by-10-and-then-divide-by-10/37972017#37972017", "title": "get confused by mutlibly by 10 and then divide by 10", "body": "<p>The range of a 32-bit <code>int</code> is <code>-(1 &lt;&lt; 32)</code> to <code>(1 &lt;&lt; 32) - 1</code>.</p>\n\n<p>When 1.5 billion gets multiplied by ten, it exceeds the upper limit on <code>int</code> (which is about 2.1 billion) and overflows to a different number, and when that gets divided by 10, you get the result of that [new] number divided by ten.</p>\n"}], "owner": {"reputation": 3, "user_id": 6043125, "user_type": "registered", "profile_image": "https://graph.facebook.com/202909370072742/picture?type=large", "display_name": "Galal Ramzy", "link": "https://stackoverflow.com/users/6043125/galal-ramzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1466609544, "creation_date": 1466608115, "last_edit_date": 1466608192, "question_id": 37971945, "link": "https://stackoverflow.com/questions/37971945/get-confused-by-mutlibly-by-10-and-then-divide-by-10", "title": "get confused by mutlibly by 10 and then divide by 10", "body": "<p>I am confused a little bit as when I  multiply an int variable by 10 and then divide it by 10  I thought the variable value should not be changed but I get a different result am I missing something or there is something I should know \nhere is the code </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n   int intVar = 1500000000; //1,500,000,000\n   intVar = (intVar * 10) / 10; //result too large\n   cout &lt;&lt; \u201cintVar = \u201c &lt;&lt; intVar &lt;&lt; endl; //wrong answer\n   return 0 ;\n}\n</code></pre>\n\n<p>any help to explain that, please </p>\n"}, {"tags": ["c++", "winapi", "dll", "reverse-engineering"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1466608098, "post_id": 37971724, "comment_id": 63390107, "body": "Someone <i>&quot;found stable addresses in MSO.dll&quot;</i> - I have no idea, what that is supposed to mean."}, {"owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1466608294, "post_id": 37971724, "comment_id": 63390273, "body": "Ok let me give more background info, thanks for catching this ambiguity."}, {"owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1466608700, "post_id": 37971724, "comment_id": 63390535, "body": "@IInspectable is this better?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1466609035, "post_id": 37971724, "comment_id": 63390769, "body": "<i>&quot;most of the exported entry points to the dll don&#39;t have names so I can&#39;t call the function I want pragmatically by normal means&quot;</i> - Why? You can pass an ordinal to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683212.aspx\" rel=\"nofollow noreferrer\">GetProcAddress</a> as well. No name required. <i>&quot;So I need to find out how Lee Benfield found these stable addresses in MSO.dll&quot;</i> - Why? What are you going to do with that information?"}, {"owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1466609128, "post_id": 37971724, "comment_id": 63390840, "body": "@IInspectable The last version of office his project supports is 2007. I&#39;d like to update it for 2010-16"}, {"owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1466609310, "post_id": 37971724, "comment_id": 63390965, "body": "you are right I can pass an ordinal (in fact that is what I am doing to generate the two dump file), but I&#39;m not sure if the ordinals are stable from one release of office to another. so I don&#39;t know if I am calling the same function he does mention the following on the ordinals &quot;Ordinals 2959 and 1560 in mso.dll look like they might be useful for a more dependable office clipboard api, however there&#39;s other stuff going on which make them less useful (memmoves etc).&quot;"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 3, "creation_date": 1466610113, "post_id": 37971724, "comment_id": 63391564, "body": "Why would you expect to be able to call an undocumented private interface? Why are you hacking like this?"}, {"owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1466610786, "post_id": 37971724, "comment_id": 63392022, "body": "@DavidHeffernan If there was a nice API to call into the office clipboard I would use it in a heartbeat. The primary reason that it is an undocumented interface is forcing me down this road. I expect to be able to call it the same way the office suite of application call these functions. They have been around since office 2000 <a href=\"https://support.microsoft.com/en-us/kb/221190\" rel=\"nofollow noreferrer\">support.microsoft.com/en-us/kb/221190</a> but never got an API in the last 16 years. I doubt much has changed in the calling convention. Probably the only real changes are a result of the compiler moving things around."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1466611086, "post_id": 37971724, "comment_id": 63392214, "body": "If you want to build your program on top of undocumented private reverse engineered interfaces that&#39;s on you. But you should not expect any stability. If MS don&#39;t want to provide you an API, that is entirely their prerogative."}, {"owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1466611733, "post_id": 37971724, "comment_id": 63392671, "body": "@DavidHeffernan I understand that, I&#39;m not asking or expecting MS to provide and API. I totally get this is not the desired way to go about solving problems. I&#39;m not exploiting a security vulnerability and my intent is not malicious so I doubt MS would even care. I read an interesting blog post and wanted to replicate the results for newer versions of office."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1466621549, "post_id": 37971724, "comment_id": 63398443, "body": "@user1881587: since you are relying on a private undocumented API, you are responsible for validating that API on every new release and make adjustments to your code accordingly. There is no guarantee that exported ordinals will not change from one release to the next.  Public DLL exports should be exported by name to avoid this problem."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 6, "creation_date": 1466622002, "post_id": 37971724, "comment_id": 63398684, "body": "&quot;I doubt MS would even care.&quot; We care because it means that the user installs the new version of Office and your app stops working. The user then says &quot;The new version of Office doesn&#39;t work. It makes this app crash. I rely on this app for my day-to-day work. This is a critical bug in Office.&quot;"}, {"owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1466622810, "post_id": 37971724, "comment_id": 63399091, "body": "I never thought this question would get the attention of @RaymondChen. Thank you for your blog! While you&#39;re here could I ask for an office clipboard API? In all seriousness though if MS does not provide the functionality we as app developers need, are we suppose to just give up?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1466625467, "post_id": 37971724, "comment_id": 63400444, "body": "The clipboard already has its own set of API functions. Why do you need anything from Office?"}, {"owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1466626648, "post_id": 37971724, "comment_id": 63401069, "body": "@MarkRansom I can&#39;t get into to much of the details but my app already hooks the windows clipboard  and drag and drop functions. So I am aware of them and am using them. That said there remains a hole in my implementation that requires a bit further digging. I wish I could be a bit less ambiguous here, but I can&#39;t."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1466629278, "post_id": 37971724, "comment_id": 63402353, "body": "Not only are the addresses of the functions subject to change, but the function signatures or behaviors could change as well. Since they&#39;re not publicly exposed, Microsoft could change things on a whim - they only have to coordinate the changes within their own team.I wish I could be more helpful here, but I can&#39;t."}, {"owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "edited": false, "score": 0, "creation_date": 1466630127, "post_id": 37971724, "comment_id": 63402716, "body": "I am aware Microsoft can change the functions signatures at any time. that the compiler can change the ordinal values and addresses especially as new patch come in. It is not helpful to continue the line of discussion that I should not do this. I fully realize the support criteria goes up by doing so and that any update or service pack could be a breaking change. Hopefully we can move past all the reasons not to do this and instead come up with why this is a) no longer possible  or b) how it was Lee Benfield did it in the first place."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1466631299, "post_id": 37971724, "comment_id": 63403253, "body": "Sending feature requests to me doesn&#39;t really accomplish much."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1466634067, "post_id": 37971724, "comment_id": 63404260, "body": "The reason I can&#39;t help you is that I&#39;ve never tried to do anything so ill-advised, so I don&#39;t have any experience in this area. Giving us more information about what you&#39;re trying to accomplish, rather than how you want to do it, would enable an entirely different discussion that would be more productive. Good luck to you."}, {"owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1466635414, "post_id": 37971724, "comment_id": 63404656, "body": "@RaymondChen thanks for taking the time to look at my question. I meant the feature request as a joke, I hope you did not take any offense."}, {"owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1466635420, "post_id": 37971724, "comment_id": 63404659, "body": "@MarkRansom I don&#39;t mean to do anything ill advised here. I&#39;ll try and get more clarification as to what I can and can&#39;t talk about and maybe do another post to hopefully get the ball rolling.  I appreciate the outreach everyone, Thanks so much to you all for taking the time!"}], "answers": [{"tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": false, "score": 0, "last_activity_date": 1466676684, "creation_date": 1466676684, "answer_id": 37988640, "question_id": 37971724, "link": "https://stackoverflow.com/questions/37971724/how-to-get-stable-address-from-a-dll/37988640#37988640", "title": "How to get stable Address from a dll?", "body": "<p>1.) \"what makes the higher order word stable and the lower order word vary?\" - at first this is not true at all. if take CONCRETE binary mso.dll - every func have some RVA (relative VA from module base). but if you take any another mso.dll build - with almost 100% posibility - you got another RVA for functions. you looking for VA - absolute address. but VA = ImageBase + RVA, where ImageBase - address(HMODULE) at which your mso.dll is loaded. however it call all time load at different addreses (ASLR) - so VA will be not stable at all. RVA will be stable only while you use same mso.dll version (in another versions and RVA will be another)</p>\n\n<p>2.) how do I get the stable addresses that Lee found in the MSO.dll? - Lee nothing found. this, as i describe, mistake question at all. if function exported - you can got in address by name or ordinal (ordinal may be also not stable, but this is very depended from dll). also possible, if you have pdb file, get public symbol address (RVA), from pdb by name(even for not exported symbols) </p>\n\n<p>3)how do I find out which one is the clearclipboard and getClipboardCount function should I find a stable address? - again - no any \"stable address\" exist. only exports or symbols in pdb</p>\n"}], "owner": {"reputation": 494, "user_id": 1881587, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/38f7ff00d6bd3da48f7e6660c1821707?s=128&d=identicon&r=PG", "display_name": "noztol", "link": "https://stackoverflow.com/users/1881587/noztol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 614, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1466676684, "creation_date": 1466607479, "last_edit_date": 1466623776, "question_id": 37971724, "link": "https://stackoverflow.com/questions/37971724/how-to-get-stable-address-from-a-dll", "title": "How to get stable Address from a dll?", "body": "<p>A DLL has a set of exported functions that other applications can call. Typically to call these functions you either have a function name or an ordinal number.</p>\n\n<p>In <code>MSO.dll</code>, most of the exported entry points to the DLL don't have names, so I can't call the function I want pragmatically by normal means.</p>\n\n<p>Upon a bit of Google searching I ran into a blogger that claims to have found stable addresses (addresses that don't change) to the very function I want to call.</p>\n\n<p>The issue with these addresses is that they can't be counted on to be the same from one release of Office to another, or even from one update to the next. So I need to find out how Lee Benfield found these stable addresses in <code>MSO.dll</code> when he wrote his <a href=\"http://www.benf.org/excel/officeclip/\" rel=\"nofollow noreferrer\">blog post</a>. You can find the source code on his blog.</p>\n\n<p>The portion of Lee's code I am trying to understand:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VkNzm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VkNzm.png\" alt=\"image\"></a></p>\n\n<p>Here is some code I wrote to find these addresses:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;iostream&gt;\n#include &lt;map&gt;\n\nint main()\n{\n    HMODULE hGetProcIDDLL = LoadLibrary(\"C:\\\\Program Files\\\\Microsoft Office 15\\\\root\\\\vfs\\\\ProgramFilesCommonX86\\\\Microsoft Shared\\\\OFFICE15\\\\mso.dll\");\n\n    PIMAGE_NT_HEADERS header = (PIMAGE_NT_HEADERS)((char *)hGetProcIDDLL + ((PIMAGE_DOS_HEADER)hGetProcIDDLL)-&gt;e_lfanew);\n    PIMAGE_EXPORT_DIRECTORY exports = (PIMAGE_EXPORT_DIRECTORY)((char *)hGetProcIDDLL + header-&gt;\n        OptionalHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_EXPORT].VirtualAddress);\n\n    char** names = (char**)((int)hGetProcIDDLL + exports-&gt;AddressOfNames);\n    std::cout &lt;&lt; \"Total # of functions: \" &lt;&lt; exports-&gt;NumberOfFunctions &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Total # of named functions: \" &lt;&lt; exports-&gt;NumberOfNames &lt;&lt; std::endl;\n\n    std::map&lt;uintptr_t, char*&gt; addressToName;\n\n    for (uint16_t i = 0; i &lt; exports-&gt;NumberOfNames; i++)\n    {\n        char* name = (char*)hGetProcIDDLL + (int)names[i];\n        void* fn = GetProcAddress(hGetProcIDDLL, name);\n        addressToName[(uintptr_t)fn] = name;\n        //std::cout &lt;&lt; \"Export: Name: \" &lt;&lt; name &lt;&lt; \" Address: \" &lt;&lt; fn &lt;&lt; \"\\n\";\n\n    }\n\n    for (uint16_t i = 1; i &lt; exports-&gt;NumberOfFunctions; i++)\n    {\n        void* fn = GetProcAddress(hGetProcIDDLL, MAKEINTRESOURCE(i));\n        std::map&lt;uintptr_t, char*&gt;::iterator it;\n        it = addressToName.find((uintptr_t)fn);\n        std::cout &lt;&lt; \"oridinal #: \" &lt;&lt; i &lt;&lt; \" address: \" &lt;&lt; fn &lt;&lt; \" Name: \" &lt;&lt; (it != addressToName.end() ? it-&gt;second : \"N\\\\A\") &lt;&lt; \"\\n\";\n    }\n\n    // Free the DLL module.\n    if (!FreeLibrary(hGetProcIDDLL))\n    {\n        return E_FAIL;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>It essentially does the same thing as <a href=\"https://msdn.microsoft.com/en-us/library/c1h23y6c.aspx\" rel=\"nofollow noreferrer\">Dumpbin.exe</a> <a href=\"https://msdn.microsoft.com/en-us/library/30e78zd0.aspx\" rel=\"nofollow noreferrer\">/Export</a>, but also prints out the <code>procAddress</code>, name, and ordinal value. Below you can see a picture of a diff of two runs. The two byte of the higher order word are stable.</p>\n\n<p><a href=\"https://i.stack.imgur.com/2CBkd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2CBkd.png\" alt=\"diff example\"></a></p>\n\n<p>see <a href=\"http://pastebin.com/A5BsLdJK\" rel=\"nofollow noreferrer\">bin dump 1</a> and <a href=\"http://pastebin.com/5irDX5Ec\" rel=\"nofollow noreferrer\">bin dump 2</a>.</p>\n\n<p>My question has a few parts:</p>\n\n<ol>\n<li><p>what makes the higher order word stable and the lower order word vary?</p></li>\n<li><p>how do I get the stable addresses that Lee found in the MSO.dll?</p></li>\n<li><p>how do I find out which one is the <code>clearclipboard</code> and <code>getClipboardCount</code> function should I find a stable address?</p></li>\n</ol>\n"}, {"tags": ["c++", "dll", "header-files", "libraries"], "comments": [{"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 3, "creation_date": 1466607059, "post_id": 37971494, "comment_id": 63389349, "body": "Are you sure the header is always consumed like this, in every compilation scenario? There might be some conditional compilation at work, which makes the class a &quot;dummy class&quot; in certain conditions."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1466607184, "post_id": 37971494, "comment_id": 63389434, "body": "The missing returns types concern me.  That is not valid C++."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1466607198, "post_id": 37971494, "comment_id": 63389447, "body": "This is not valid C++."}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1466607287, "post_id": 37971494, "comment_id": 63389518, "body": "@juanchopanza <code>DLL</code> is probably a precompilation macro for compiler specific class attributes. The missing return types are probably a mistake, but we&#39;ll have to wait for OP&#39;s answer to know"}, {"owner": {"reputation": 439, "user_id": 2465194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E9MG0.png?s=128&g=1", "display_name": "rtmh", "link": "https://stackoverflow.com/users/2465194/rtmh"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1466607668, "post_id": 37971494, "comment_id": 63389811, "body": "@jaunchopanza and @NathanOliver and @Lightness My sincere apologies, I forgot the return types when rewriting the code as an example. Also, @juanchopanza Indeed, it is defined as <code>__declspec(dllimport)</code> in the standard conditional way. sorry I didn&#39;t include that before"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1466607854, "post_id": 37971494, "comment_id": 63389950, "body": "@rtmh Thanks, I wasn&#39;t worried about the <code>DLL</code>, but about the missing return types."}, {"owner": {"reputation": 352, "user_id": 3930348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e835f05895ef7a4a3e2e717dd7705083?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Vargo", "link": "https://stackoverflow.com/users/3930348/jim-vargo"}, "edited": false, "score": 0, "creation_date": 1466609227, "post_id": 37971494, "comment_id": 63390918, "body": "The following link explains the DLL definition. <a href=\"http://stackoverflow.com/questions/8863193/what-does-declspecdllimport-really-mean\" title=\"what does declspecdllimport really mean\">stackoverflow.com/questions/8863193/&hellip;</a>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1466615320, "post_id": 37971494, "comment_id": 63394878, "body": "The public interface of a DLL is immutable if you don&#39;t control the apps that use the DLL.  Stubbing functions that you no longer need keeps the DLL compatible with old client apps that are not getting recompiled."}, {"owner": {"reputation": 439, "user_id": 2465194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E9MG0.png?s=128&g=1", "display_name": "rtmh", "link": "https://stackoverflow.com/users/2465194/rtmh"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1466617275, "post_id": 37971494, "comment_id": 63396012, "body": "@HansPassant So that would suggest that the stubbed functions are not to be used? Somewhat like a &#39;depreciated&#39; tag?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1466619942, "post_id": 37971494, "comment_id": 63397558, "body": "Roughly, yes.  Backwards binary compatibility is the larger goal here.  Ideally this api is properly documented and when the revision was made that stubbed out the functions, it was updated by removing these functions."}, {"owner": {"reputation": 439, "user_id": 2465194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E9MG0.png?s=128&g=1", "display_name": "rtmh", "link": "https://stackoverflow.com/users/2465194/rtmh"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1466631247, "post_id": 37971494, "comment_id": 63403225, "body": "@HansPassant Thank you very much, I think I will move on to discern the version of my library and .h files which might illuminate the situation some more for me. I think, though, that this composes a significant answer for my question, if you would like to write it up as such, I would love to credit you."}], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 2465194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E9MG0.png?s=128&g=1", "display_name": "rtmh", "link": "https://stackoverflow.com/users/2465194/rtmh"}, "edited": false, "score": 0, "creation_date": 1466609818, "post_id": 37972491, "comment_id": 63391338, "body": "Is it advisable then when using the .h file to comment out the dummy definitions to get at the library definitions instead?"}, {"owner": {"reputation": 2500, "user_id": 6499716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/L11cU.jpg?s=128&g=1", "display_name": "Shiro", "link": "https://stackoverflow.com/users/6499716/shiro"}, "reply_to_user": {"reputation": 439, "user_id": 2465194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E9MG0.png?s=128&g=1", "display_name": "rtmh", "link": "https://stackoverflow.com/users/2465194/rtmh"}, "edited": false, "score": 0, "creation_date": 1466612107, "post_id": 37972491, "comment_id": 63392924, "body": "If they are implemented somewhere else then yes. Otherwise you would have to implement them yourself."}], "tags": [], "owner": {"reputation": 2500, "user_id": 6499716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/L11cU.jpg?s=128&g=1", "display_name": "Shiro", "link": "https://stackoverflow.com/users/6499716/shiro"}, "is_accepted": true, "score": 0, "last_activity_date": 1466609554, "creation_date": 1466609554, "answer_id": 37972491, "question_id": 37971494, "link": "https://stackoverflow.com/questions/37971494/reason-for-return-0-or-in-librarys-h-file/37972491#37972491", "title": "Reason for &quot;{return 0;}&quot; or &quot;{;}&quot; in library&#39;s .h file", "body": "<p>One scenario where you put this code to some use would be to override the functions. These functions hold some default code and could be overridden later.</p>\n"}], "owner": {"reputation": 439, "user_id": 2465194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E9MG0.png?s=128&g=1", "display_name": "rtmh", "link": "https://stackoverflow.com/users/2465194/rtmh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 1, "accepted_answer_id": 37972491, "answer_count": 1, "score": 8, "last_activity_date": 1466609554, "creation_date": 1466606879, "last_edit_date": 1466608316, "question_id": 37971494, "link": "https://stackoverflow.com/questions/37971494/reason-for-return-0-or-in-librarys-h-file", "title": "Reason for &quot;{return 0;}&quot; or &quot;{;}&quot; in library&#39;s .h file", "body": "<p>I am currently working on a project with some old poorly documented code, and am trying to navigate my way through the various .h files that they have provided complete documentation on the use of all of the functions contained (the definitions are held in .lib and .dll files). One of the .h files has functions the are not only declared, but defined with either simple return statements or empty statements as such</p>\n\n<pre><code>class DLL ExampleLibraryClass {\npublic:\n    int exampleGetValue() {return 0;}\n    void exampleSetValue(Type val) {;}\n    void exampleActionFxn() {;}\n};\n</code></pre>\n\n<p>These would be functions that I expect to return current variable states or perform certain actions, which is why this puzzles me.</p>\n\n<p><strong>Additionally:</strong></p>\n\n<ul>\n<li><p>I have used Dependency Walker and found that each function does have a matching definition in a dll.</p></li>\n<li><p>The Keyword DLL has been defined with</p>\n\n<pre><code>#ifndef _PWSDLL_\n#   define _PWSDLL_\n#   define WINCALL  _stdcall\n#   ifdef _USRDLL\n#       define DLL  __declspec(dllexport)\n#   else\n#       define DLL  __declspec(dllimport)\n#   endif\n#endif\n</code></pre>\n\n<p>_USRDLL is not defined and therefore <code>DLL</code> is defined as <code>__declspec(dllimport)</code></p></li>\n</ul>\n\n<p>My question revolves less about the apparent effect of the empty definitions (which do nothing I suppose, and have already been discussed on SO) and more about why the .h file has been written this way and how to utilize the file. Is this a common or known practice? Will the linker still look for definitions to the function in my linked libraries? Are there other pieces of code that I should look for for more clues? Or perhaps in the broadest sense, how should I respond to this?</p>\n\n<p>Many thanks, and please let me know if you need more information to address this, I am unsure what exactly is important in this matter.</p>\n\n<p><strong>EDIT:</strong> Added forgotten return types in example code.</p>\n\n<p><strong>EDIT:</strong> Added note about DLL definition.</p>\n"}, {"tags": ["c++", "gcc", "lambda", "c++14", "generic-lambda"], "answers": [{"comments": [{"owner": {"reputation": 291, "user_id": 3161376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080a1a031d43095283afb6b64566e94b?s=128&d=identicon&r=PG", "display_name": "texus", "link": "https://stackoverflow.com/users/3161376/texus"}, "edited": false, "score": 0, "creation_date": 1466610806, "post_id": 37972633, "comment_id": 63392041, "body": "That code seems to compiles with gcc but not with clang. But changing my code to take <code>void(*)(AllArgs...)</code> as first parameter of findArgTypes still gives the same error with gcc (and no longer works with clang). Capturing a local variable also doesn&#39;t seems to make a difference."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 291, "user_id": 3161376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080a1a031d43095283afb6b64566e94b?s=128&d=identicon&r=PG", "display_name": "texus", "link": "https://stackoverflow.com/users/3161376/texus"}, "edited": false, "score": 0, "creation_date": 1466611382, "post_id": 37972633, "comment_id": 63392448, "body": "You need two overloaded functions - one for free functions, one for object functions - or just change a little your design..."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 291, "user_id": 3161376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080a1a031d43095283afb6b64566e94b?s=128&d=identicon&r=PG", "display_name": "texus", "link": "https://stackoverflow.com/users/3161376/texus"}, "edited": false, "score": 0, "creation_date": 1466611847, "post_id": 37972633, "comment_id": 63392751, "body": "clang could be wrong - see example from linked page: <code>int&amp; (*fpi)(int*) = [](auto* a)-&gt;auto&amp; { return *a; }; &#47;&#47; ok</code>"}, {"owner": {"reputation": 291, "user_id": 3161376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080a1a031d43095283afb6b64566e94b?s=128&d=identicon&r=PG", "display_name": "texus", "link": "https://stackoverflow.com/users/3161376/texus"}, "edited": false, "score": 0, "creation_date": 1466612078, "post_id": 37972633, "comment_id": 63392909, "body": "The real code is a lot more complex and actually does handle free functions already. I&#39;ll update the question to capture a variable. The example from the linked page does work, but not the code you posted for some reason (it says it can&#39;t convert from the lambda to the function type). But that&#39;s an unrelated problem."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 291, "user_id": 3161376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080a1a031d43095283afb6b64566e94b?s=128&d=identicon&r=PG", "display_name": "texus", "link": "https://stackoverflow.com/users/3161376/texus"}, "edited": false, "score": 0, "creation_date": 1466613628, "post_id": 37972633, "comment_id": 63393833, "body": "Looks like you are trying to reimplement <a href=\"http://en.cppreference.com/w/cpp/utility/functional/invoke\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/functional/invoke</a> from C++17? Am I right?"}, {"owner": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1466613815, "post_id": 37972633, "comment_id": 63393947, "body": "That sounds like it might be a clang bug. If I use an approximately equivalent handwritten functor, the conversion works: <a href=\"http://coliru.stacked-crooked.com/a/6e2ba84e61622b91\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/6e2ba84e61622b91</a>"}, {"owner": {"reputation": 291, "user_id": 3161376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080a1a031d43095283afb6b64566e94b?s=128&d=identicon&r=PG", "display_name": "texus", "link": "https://stackoverflow.com/users/3161376/texus"}, "edited": false, "score": 0, "creation_date": 1466614668, "post_id": 37972633, "comment_id": 63394493, "body": "@PiotrNycz I&#39;m rewriting a callback system where you can leave parameters unbound (not provided when calling connect) and where the code detects what parameters are to be filled in with information about the callback. For instance when a button is clicked, the connected function would be called with the text of the button as argument if the function had an unbound std::string parameter. If all arguments were provided to connect then the function is called without this string. So the code is all about detecting the types of the parameters that the user doesn&#39;t provide when calling connect."}, {"owner": {"reputation": 291, "user_id": 3161376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080a1a031d43095283afb6b64566e94b?s=128&d=identicon&r=PG", "display_name": "texus", "link": "https://stackoverflow.com/users/3161376/texus"}, "edited": false, "score": 0, "creation_date": 1466617174, "post_id": 37972633, "comment_id": 63395954, "body": "Splitting it in 2 lines solved the issue, thanks. I&#39;m mostly just playing around with this code though, it isn&#39;t something that I really need. And since I also have to keep VC++ supported I doubt the code that I am writing now is going to be used anywhere soon."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1466620672, "post_id": 37972633, "comment_id": 63397984, "body": "Ok. Ibelieve compiler vendors need so strong testers of their products. I also like to explore new and dark areas of c++... ;)"}], "tags": [], "owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "is_accepted": true, "score": 1, "last_activity_date": 1466615220, "last_edit_date": 1466615220, "creation_date": 1466609894, "answer_id": 37972633, "question_id": 37971428, "link": "https://stackoverflow.com/questions/37971428/detecting-parameter-types-from-generic-lambda-compile-error-with-gcc/37972633#37972633", "title": "Detecting parameter types from generic lambda - compile error with GCC", "body": "<p>You have error because you are expecting functor (object) but lambda with empty capture is convertible to free function:</p>\n\n<pre><code>int main() {\n    using function = void (*)(int, float);\n    function a = [](auto, float){};\n}\n</code></pre>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow\">lambda from cppreference</a>:</p>\n\n<hr>\n\n<p>For the <strong><em>newest</em></strong> version of your question that implementation satisfies both compilers:</p>\n\n<pre><code>template &lt;typename Func, typename... ProvidedArgs&gt;\nvoid connect(Func func, ProvidedArgs... providedArgs)\n{\n    auto mf = &amp;Func::template operator()&lt;ProvidedArgs...&gt;;\n    findArgTypes(mf, func, providedArgs...);\n}\n</code></pre>\n\n<p>I think this is gcc compiler bug that gcc needs this <code>auto</code> local variable to work correctly... </p>\n\n<p>BTW, one question - one bug in clang, one in gcc - I really advice you to find simpler way to achieve your goals - maybe consider to just use <code>std::function</code> instead of quite fresh generic-lambda? </p>\n"}], "owner": {"reputation": 291, "user_id": 3161376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/080a1a031d43095283afb6b64566e94b?s=128&d=identicon&r=PG", "display_name": "texus", "link": "https://stackoverflow.com/users/3161376/texus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 37972633, "answer_count": 1, "score": 5, "last_activity_date": 1466615220, "creation_date": 1466606711, "last_edit_date": 1466612276, "question_id": 37971428, "link": "https://stackoverflow.com/questions/37971428/detecting-parameter-types-from-generic-lambda-compile-error-with-gcc", "title": "Detecting parameter types from generic lambda - compile error with GCC", "body": "<p>I wrote some code that retrieves the types of the non-auto parameters when given a generic lambda function. As you can see in the code below, the idea is to call the connect function with a generic lambda and provide arguments for the auto parameters (which will always be at the front in my use case). So in the code below my goal was to detect that the second parameter is of type float.</p>\n\n<p>The code works fine with clang 3.8 but it doesn't compile with gcc 6.1.1, so I was wondering whether this was a bug in gcc or if this is just not valid c++ code? Can I assume that a generic lambda is implemented with a templated operator() function or is this compiler-specific?</p>\n\n<pre><code>template &lt;typename Functor, typename... AllArgs, typename... ProvidedArgs&gt;\nvoid findArgTypes(void(Functor::*)(AllArgs...) const, Functor, ProvidedArgs...)\n{\n    // AllArgs == int, float\n    // ProvidedArgs == int\n}\n\ntemplate &lt;typename Func, typename... ProvidedArgs&gt;\nvoid connect(Func func, ProvidedArgs... providedArgs)\n{\n    findArgTypes(&amp;Func::template operator()&lt;ProvidedArgs...&gt;, func, providedArgs...);\n}\n\nint main()\n{\n    int tmp = 0;\n    connect([&amp;](auto, float){ ++tmp; }, 0);\n}\n</code></pre>\n\n<p>The error that gcc gives is this:</p>\n\n<pre><code>main.cpp: In instantiation of \u2018void connect(Func, ProvidedArgs ...) [with Func = main()::&lt;lambda(auto:1, float)&gt;; ProvidedArgs = {int}]\u2019:\nmain.cpp:16:33:   required from here\nmain.cpp:11:17: error: no matches converting function \u2018operator()\u2019 to type \u2018void (struct main()::&lt;lambda(auto:1, float)&gt;::*)() const\u2019\n     findArgTypes(&amp;Func::template operator()&lt;ProvidedArgs...&gt;, func, providedArgs...);\n     ~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nmain.cpp:16:27: note: candidate is: template&lt;class auto:1&gt; main()::&lt;lambda(auto:1, float)&gt;\n     connect([](auto, float){}, 0);\n                           ^\n</code></pre>\n\n<p>Removing the <code>const</code> in findArgTypes gives the same result.</p>\n\n<p>Using the following code works with both compilers:</p>\n\n<pre><code>struct Foo\n{\n    template &lt;typename T&gt;\n    void operator()(T, float) const {}\n};\n\nint main()\n{\n    Foo f;\n    connect(f, 0);\n}\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1466606943, "post_id": 37971393, "comment_id": 63389251, "body": "An alternative to having many virtual functions in your interface is the <a href=\"https://en.wikipedia.org/wiki/Visitor_pattern\" rel=\"nofollow noreferrer\">visitor pattern</a>. It works with function templates well. Of course it has downsides of its own."}, {"owner": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1466607131, "post_id": 37971393, "comment_id": 63389397, "body": "You have comment <code>&#47;&#47;I know this isn&#39;t allowed</code>, so why did you write <code>foo</code> this way? What is wrong with <code>template&lt;typename TYPE&gt;     void foo(TYPE type)</code>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1466607315, "post_id": 37971393, "comment_id": 63389545, "body": "<a href=\"http://stackoverflow.com/search?q=virtual+template\">By the way</a>."}, {"owner": {"reputation": 59, "user_id": 6499653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38d278d3e2d44f08b0b40d23eeeb5dbb?s=128&d=identicon&r=PG&f=1", "display_name": "Just some dude", "link": "https://stackoverflow.com/users/6499653/just-some-dude"}, "reply_to_user": {"reputation": 2037, "user_id": 1468415, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wx7N9.png?s=128&g=1", "display_name": "mvidelgauz", "link": "https://stackoverflow.com/users/1468415/mvidelgauz"}, "edited": false, "score": 0, "creation_date": 1466607356, "post_id": 37971393, "comment_id": 63389572, "body": "@mvidelgauz it&#39;s the <code>virtual</code> part which isn&#39;t allowed, but <code>template&lt;typename TYPE&gt; void foo(TYPE type)</code> would not work as <code>bar</code> would always call his version of <code>foo</code> and not the specialized ones"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1466610000, "post_id": 37971393, "comment_id": 63391466, "body": "Whenever this type of question is asked, it&#39;s quite evident the OP thinks this is a solution to some design problem. So why not ask about the original problem directly?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1466659997, "post_id": 37971393, "comment_id": 63411076, "body": "This seems like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem</a>. What&#39;s the real problem you are trying to solve?"}], "owner": {"reputation": 59, "user_id": 6499653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38d278d3e2d44f08b0b40d23eeeb5dbb?s=128&d=identicon&r=PG&f=1", "display_name": "Just some dude", "link": "https://stackoverflow.com/users/6499653/just-some-dude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1466609790, "creation_date": 1466606640, "last_edit_date": 1466609790, "question_id": 37971393, "link": "https://stackoverflow.com/questions/37971393/how-to-obtain-similar-result-as-virtual-function-template-c", "title": "How to obtain similar result as virtual function template c++", "body": "<p>Here's my issue, I'm trying to create a base class which can get a reference to a queue member in a derived class. I have two template functions in my base class :</p>\n\n<pre><code>class Base\n{\n    template&lt;TYPE type&gt;\n    virtual void foo(std::queue&lt;TYPE&gt;*&amp; typeQueue) //I know virtual isn't allowed\n    {\n        //do nothing as it's general case\n    }\n\n    template&lt;typename TYPE&gt;\n    void bar(TYPE type)\n    {\n        std::queue&lt;TYPE&gt;* typeQueue;\n        foo(typeQueue);\n        //... do some stuff with type\n    }\n}\n</code></pre>\n\n<p>and a derived class which would theoretically be able to specialize the function <code>foo</code> for any types</p>\n\n<pre><code>class Derived : public Base\n{\npublic:\n\n    template&lt;&gt;\n    void foo&lt;int&gt;(std::queue&lt;int&gt;*&amp; m_integerQueue)\n    {\n        integerQueue= &amp;m_integerQueue;\n    }\n\n    template&lt;&gt;\n    void foo&lt;double&gt;(std::queue&lt;double&gt;*&amp; doubleQueue)\n    {\n        doubleQueue = &amp;m_doubleQueue;\n    }\n\nprivate:\n\n    std::queue&lt;int&gt; m_integerQueue;\n    std::queue&lt;double&gt; m_doubleQueue;\n}\n</code></pre>\n\n<p>code above is more of about an ideology then a code to take word for word, I'd like the function <code>bar</code> to call the according function <code>foo</code> in derived class based on the type specified when <code>bar</code> is called. Of course this solution isn't working and the problem here is that we can't make template functions virtual.</p>\n\n<p>I'm not sure if it's an error of design, but that's the general idea and I couldn't find an appropriate solution anywhere so I posted my own question here.</p>\n\n<p><em>EDITED to make my problem clear</em></p>\n"}, {"tags": ["c++", "visual-studio", "static-linking", "debug-symbols"], "comments": [{"owner": {"reputation": 73, "user_id": 5464830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5f493ae0605e70e1503b5f1e717e5e?s=128&d=identicon&r=PG&f=1", "display_name": "F. Schaaf", "link": "https://stackoverflow.com/users/5464830/f-schaaf"}, "edited": false, "score": 1, "creation_date": 1466608136, "post_id": 37971324, "comment_id": 63390143, "body": "/ignore:4099 indeed works. The downside is, I actually don&#39;t want LNK4099 to be suppressed completely, but this is better than nothing."}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1466608747, "post_id": 37971324, "comment_id": 63390569, "body": "@Gibet: Please turn your comment into an answer.  It&#39;s a good response and will help people in the future.  They are more likely to find it if it is an answer."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5464830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5f493ae0605e70e1503b5f1e717e5e?s=128&d=identicon&r=PG&f=1", "display_name": "F. Schaaf", "link": "https://stackoverflow.com/users/5464830/f-schaaf"}, "edited": false, "score": 0, "creation_date": 1466610326, "post_id": 37972420, "comment_id": 63391718, "body": "I accept this answer, because /ignore:4099 worked. I didn&#39;t test extracting the symbols, and I&#39;m not sure if this is fixable when I don&#39;t have the pdb. It might still be worth a try."}, {"owner": {"reputation": 2328, "user_id": 673593, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/65f36c1de0e158f5bf2b5e861ded8efd?s=128&d=identicon&r=PG", "display_name": "JonN", "link": "https://stackoverflow.com/users/673593/jonn"}, "edited": false, "score": 0, "creation_date": 1577156391, "post_id": 37972420, "comment_id": 105107295, "body": "I have this issue using VS2019.  I am getting LNK4099 on the x64 build and LNK4204 on the Win32 build.  Have added /ignore:4099 and /ignore:4204 in the Additional Options in the Linker:Command Line section but am still getting the warning"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6418134"}, "is_accepted": true, "score": 3, "last_activity_date": 1466609362, "creation_date": 1466609362, "answer_id": 37972420, "question_id": 37971324, "link": "https://stackoverflow.com/questions/37971324/how-to-deal-with-3rd-party-c-libraries-lnk4099-warning-in-visualstudio/37972420#37972420", "title": "How to deal with 3rd party c++ libraries LNK4099 Warning in VisualStudio", "body": "<p>Easiest way if you use a VS post 2010 (so 2012/2013/2015) is to add the /ignore:4099 option to the linker. Should ignore this specific warning. Sure that before 2012 this warning was specifically ignored... It existed but was a kind of \"yeah but we do not care\" warning.</p>\n\n<p>More complex way... If you have the \"energy/motivation/advanced user courage/Visual studio 2010 or before [2008/VC6/...]\"\nYou can actually extract the symbols used during linking using the lib command <code>lib /list obj.lib</code>. \nYou will obtain a lit of the obj included in the lib, that you can extract with the <code>lib /extact ../path/to/my/obj</code> command. \nTHEN you have to extract the debug section using the <code>dumpbin /section:.debug$</code> And there you will find the pdb problem... using /fd command you can relink correctly the pdb. \nIt is somehow a lot of work. This is the short summary of what you can find here : <a href=\"https://cldoten.wordpress.com/2009/07/01/vs2008-fixing-the-warning-pdb-vc90-pdb-not-found/\" rel=\"nofollow\">https://cldoten.wordpress.com/2009/07/01/vs2008-fixing-the-warning-pdb-vc90-pdb-not-found/</a>\nFollow the link I gave carefully. </p>\n\n<p>Obviously the ignore method is probably the easiest and less problematic, especially if you use a lot of third-party libraries.</p>\n"}], "owner": {"reputation": 73, "user_id": 5464830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5f493ae0605e70e1503b5f1e717e5e?s=128&d=identicon&r=PG&f=1", "display_name": "F. Schaaf", "link": "https://stackoverflow.com/users/5464830/f-schaaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2615, "favorite_count": 4, "accepted_answer_id": 37972420, "answer_count": 1, "score": 4, "last_activity_date": 1466609362, "creation_date": 1466606432, "last_edit_date": 1466606669, "question_id": 37971324, "link": "https://stackoverflow.com/questions/37971324/how-to-deal-with-3rd-party-c-libraries-lnk4099-warning-in-visualstudio", "title": "How to deal with 3rd party c++ libraries LNK4099 Warning in VisualStudio", "body": "<p>I have a Visual Studio c++ project where I use the linker Settings</p>\n\n<pre><code>/WX (TreatWarningsAsLinkerErrors=true)\n</code></pre>\n\n<p>In Debug, I compile with /Zi (Debug Database), which works fine.</p>\n\n<p>Now I have a 3rd party SDK which comes with a static library, but no .pdb file.\nAs soon as I link this file in Debug, I get </p>\n\n<pre><code>LNK4099: 3rd-party.lib(3rd-party.obj) : warning LNK4099: PDB \"vc90.pdb\" was not found \"3rd-party.lib(3rd-party.obj)\" or with \"C:\\OutDir\\vc90.pdb\"\n</code></pre>\n\n<p>Please note that this message is misleading, as placing vc90.pdb next to 3rd-party.lib does not solve the problem, because the source code and pdb of that 3rd-party lib is not available, so the linker would then still complain.</p>\n\n<p>In order to get rid of this linker warning, what are my options here?</p>\n"}]