[{"tags": ["c++", "linux", "cmake", "cross-compiling", "winsock"], "comments": [{"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 1, "creation_date": 1535588471, "post_id": 52087180, "comment_id": 91125611, "body": "Looking at those undefined symbol names, they look very much like the entry points you&#39;d find for those function in <code>ws2_32.lib</code>.  I am <i>NOT</i> a mingw expert so I have no idea if this will actually work, but try installing Visual Studio Community on your Windows system.  Among other things, that&#39;ll install the full Windows SDK somewhere under <code>C:\\Program Files (x86)\\Windows Kits</code>.  Have a dig round in there for <code>ws2_32.lib</code> and then do whatever it takes to make that file get included in your link."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 1, "creation_date": 1535594959, "post_id": 52087180, "comment_id": 91126862, "body": "Found <a href=\"https://gitlab.kitware.com/cmake/community/wikis/doc/cmake/cross_compiling/Mingw\" rel=\"nofollow noreferrer\">a link to this</a> from the old <a href=\"https://cmake.org/Wiki/CmakeMingw\" rel=\"nofollow noreferrer\">CmakeMingw entry on the CMake wiki</a>, which I found using Google. That first link provides an example toolchain file that appears to be very close to what you&#39;ll need, based on the fact that it looks like you&#39;re using a cross-compile toolchain obtained using your system&#39;s package manager (i.e. <code>ls &#47;usr&#47;i686-w64-mingw32&#47;lib&#47;libwsock32.a</code> doesn&#39;t yield an error, assuming my guess is correct)."}], "answers": [{"tags": [], "owner": {"reputation": 590, "user_id": 2026195, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yoGcO.gif?s=128&g=1", "display_name": "Micka&#235;l C. Guimar&#227;es", "link": "https://stackoverflow.com/users/2026195/micka%c3%abl-c-guimar%c3%a3es"}, "is_accepted": true, "score": 0, "last_activity_date": 1536883215, "creation_date": 1536883215, "answer_id": 52323255, "question_id": 52087180, "link": "https://stackoverflow.com/questions/52087180/how-to-link-to-winsock-when-cross-compiling-a-windows-app-on-linux/52323255#52323255", "title": "How to link to Winsock when cross-compiling a Windows app on Linux?", "body": "<p>After some while testing various configuration, I finally found out how to solve the issue :</p>\n\n<ol>\n<li>Get ws2_32.lib directly from Windows installation. No need to install Windows SDK.</li>\n<li><p>Link to it using a path name : </p>\n\n<p><code>target_link_libraries (TaskTool ToolsLib \"${TOOLS_ROOT}/ToolsLib/lib/ws2_32.lib\")</code></p></li>\n<li><p><strong>Include directly on the dependencies the module that will need it</strong>. Without cross-compiling that was not necessary, but now it is.</p></li>\n</ol>\n\n<p>With these 3 steps the program builds fine. However, it doesn't run on Windows. In order to do so, additional changes are necessary :</p>\n\n<ol>\n<li>Link statically C runtime environment :</li>\n</ol>\n\n<p><code>target_link_libraries (TaskTool \"-static-libgcc\" \"-static-libstdc++\")</code></p>\n\n<ol start=\"2\">\n<li>Provide <strong>libwinpthread-1.dll</strong> in the same folder as the executable. I didnt' find it on my OS, so I downloaded it.</li>\n</ol>\n"}], "owner": {"reputation": 590, "user_id": 2026195, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yoGcO.gif?s=128&g=1", "display_name": "Micka&#235;l C. Guimar&#227;es", "link": "https://stackoverflow.com/users/2026195/micka%c3%abl-c-guimar%c3%a3es"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1317, "favorite_count": 0, "accepted_answer_id": 52323255, "answer_count": 1, "score": 2, "last_activity_date": 1536883215, "creation_date": 1535583709, "last_edit_date": 1535585593, "question_id": 52087180, "link": "https://stackoverflow.com/questions/52087180/how-to-link-to-winsock-when-cross-compiling-a-windows-app-on-linux", "title": "How to link to Winsock when cross-compiling a Windows app on Linux?", "body": "<p>I am porting a Cmake project from Linux to Windows. It uses sockets, so uses pthread in Linux and needs Winsock in Windows.</p>\n\n<p>The project is being compiled in Linux, using cross-compilation to create Windows binaries.</p>\n\n<p>The project is already compiling fine, and there is a switch to link pthreads when building for Linux and winsock for Windows.</p>\n\n<p>However, there is a linking issue with sockets, it seems that winsock is not found.</p>\n\n<p>Here is part of the Cmake file I am using :</p>\n\n<pre><code>find_library(lib1 wsock32)\nfind_library(lib2 ws2_32)\n\nmessage(\"${lib1}  ${lib2}\")\n\nif (WIN32)\n    target_link_libraries (TaskTool wsock32 ws2_32)\nendif(WIN32)\n</code></pre>\n\n<p>And here is the output I get :</p>\n\n<pre><code>lib1-NOTFOUND  lib2-NOTFOUND\n-- Configuring done\n-- Generating done\n-- Build files have been written to: \nLinking CXX executable TaskTool.exe\nToolsLib/libToolsLib.a(networkwaker.cpp.obj):networkwaker.cpp:(.text+0x522): refer\u00eancia indefinida a `_imp__socket@12'\nToolsLib/libToolsLib.a(networkwaker.cpp.obj):networkwaker.cpp:(.text+0x559): refer\u00eancia indefinida a `_imp__setsockopt@20'\nToolsLib/libToolsLib.a(networkwaker.cpp.obj):networkwaker.cpp:(.text+0x596): refer\u00eancia indefinida a `_imp__bind@12'\nToolsLib/libToolsLib.a(networkwaker.cpp.obj):networkwaker.cpp:(.text+0x5b0): refer\u00eancia indefinida a `_imp__inet_addr@4'\nToolsLib/libToolsLib.a(networkwaker.cpp.obj):networkwaker.cpp:(.text+0x5c3): refer\u00eancia indefinida a `_imp__htons@4'\nToolsLib/libToolsLib.a(networkwaker.cpp.obj):networkwaker.cpp:(.text+0x614): refer\u00eancia indefinida a `_imp__sendto@24'\n</code></pre>\n\n<p>How is the proper way to add/link to winsock? I understand that winsock is not readily available in Linux as it is a Windows library.</p>\n\n<ul>\n<li><p>Is there a standard package I can install to have it? (like apt-get install windowssdk...).</p></li>\n<li><p>Should I copy it manually and link it from a Windows installation?</p></li>\n<li><p>Is there something I need to add to the Cmake toolchain file?</p></li>\n</ul>\n\n<p>Here is the toolchain file I am using :</p>\n\n<pre><code>SET(CMAKE_SYSTEM_NAME Windows)\nSET(CMAKE_C_COMPILER   /usr/bin/i686-w64-mingw32-gcc)\nSET(CMAKE_CXX_COMPILER /usr/bin/i686-w64-mingw32-g++)\n</code></pre>\n"}, {"tags": ["c++", "windows", "qt", "unix"], "comments": [{"owner": {"reputation": 329, "user_id": 7424032, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mNUt2R2XeSo/AAAAAAAAAAI/AAAAAAAAAAk/J91o7VsUih0/photo.jpg?sz=128", "display_name": "Michael Strobel", "link": "https://stackoverflow.com/users/7424032/michael-strobel"}, "edited": false, "score": 0, "creation_date": 1535583319, "post_id": 52087117, "comment_id": 91124530, "body": "Pretty sure you need to use double backslash, as single backslash is considered a byte.   Try   \\\\NAS\\\\FOLDER\\\\With\\\\BackSLASH\\\\file.ext"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 329, "user_id": 7424032, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mNUt2R2XeSo/AAAAAAAAAAI/AAAAAAAAAAk/J91o7VsUih0/photo.jpg?sz=128", "display_name": "Michael Strobel", "link": "https://stackoverflow.com/users/7424032/michael-strobel"}, "edited": false, "score": 0, "creation_date": 1535585904, "post_id": 52087117, "comment_id": 91125156, "body": "@MichaelStrobel that only applies to <b>string literals</b> at compile-time, not to user-provided data at runtime."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1535586061, "post_id": 52087117, "comment_id": 91125187, "body": "@Jonas you really should be using the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/shlobj_core/nf-shlobj_core-shopenfolderandselectitems\" rel=\"nofollow noreferrer\"><code>SHOpenFolderAndSelectItems()</code></a> function instead of using <code>system()</code> to invoke <code>explorer.exe</code> via a command line.  If you can navigate to the target folder in Explorer, you can also programmably obtain PIDLs to the folder and its files for use with the function."}, {"owner": {"reputation": 7044, "user_id": 7670262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zdDY.jpg?s=128&g=1", "display_name": "Azeem", "link": "https://stackoverflow.com/users/7670262/azeem"}, "edited": false, "score": 0, "creation_date": 1535606504, "post_id": 52087117, "comment_id": 91129324, "body": "Question (maybe not directly relevant; just curious): Why are you not using <code>QProcess</code> instead of <code>system()</code>? You won&#39;t have to call <code>toStdString().c_str()</code> as it accepts a <code>QString</code>. As you are in Qt realm, you ought to make use of most of its facilities."}, {"owner": {"reputation": 329, "user_id": 7424032, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mNUt2R2XeSo/AAAAAAAAAAI/AAAAAAAAAAk/J91o7VsUih0/photo.jpg?sz=128", "display_name": "Michael Strobel", "link": "https://stackoverflow.com/users/7424032/michael-strobel"}, "edited": false, "score": 0, "creation_date": 1535608006, "post_id": 52087117, "comment_id": 91129729, "body": "Yeah i obviously didn&#39;t read the question too well. &gt;.&lt;"}, {"owner": {"reputation": 21, "user_id": 10236016, "user_type": "registered", "profile_image": "https://graph.facebook.com/2198273866852857/picture?type=large", "display_name": "Jonas Sorgenfrei", "link": "https://stackoverflow.com/users/10236016/jonas-sorgenfrei"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1535756007, "post_id": 52087117, "comment_id": 91198064, "body": "Thanks for your answers. @remy i updated the code but still have the issue, i think its because of toStdString().c_str() this."}, {"owner": {"reputation": 21, "user_id": 10236016, "user_type": "registered", "profile_image": "https://graph.facebook.com/2198273866852857/picture?type=large", "display_name": "Jonas Sorgenfrei", "link": "https://stackoverflow.com/users/10236016/jonas-sorgenfrei"}, "reply_to_user": {"reputation": 7044, "user_id": 7670262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zdDY.jpg?s=128&g=1", "display_name": "Azeem", "link": "https://stackoverflow.com/users/7670262/azeem"}, "edited": false, "score": 0, "creation_date": 1535756076, "post_id": 52087117, "comment_id": 91198075, "body": "@azeem i tried QProcess but there was the same issue with the unix backslashes, so i tried the system call."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1535759958, "post_id": 52087117, "comment_id": 91198775, "body": "@JonasSorgenfrei well, for starters, <code>\\uF022</code> represents a <b>private use</b> Unicode codepoint, it is not a real character. So that is the first thing you need to deal with. Second, you shouldn&#39;t be converting the <code>QString</code> to <code>std::string</code> at all, let alone to a <code>TCHAR[]</code> buffer. Converting a <code>QString</code> with non-ASCII characters in it to <code>std::string</code> will loss data. Use <code>ILCreateFromPathW()</code> instead, then you can use the <code>QString</code>&#39;s Unicode data as-is, passing either <code>(WCHAR*)filename.data()</code> or <code>filename.toStdWString().c_str()</code> to <code>ILCreateFromPathW()</code>, thus ensuring there is no data loss."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1535760365, "post_id": 52087117, "comment_id": 91198836, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/3194725/608639\">Cross-platform way of constructing an FS path with Qt</a> and <a href=\"https://stackoverflow.com/q/13014145/608639\">Qt equivalent of PathAppend?</a>. Also reference <code>QDir::separator</code>."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10236016, "user_type": "registered", "profile_image": "https://graph.facebook.com/2198273866852857/picture?type=large", "display_name": "Jonas Sorgenfrei", "link": "https://stackoverflow.com/users/10236016/jonas-sorgenfrei"}, "edited": false, "score": 0, "creation_date": 1535754032, "post_id": 52087477, "comment_id": 91197647, "body": "Hello @HasanPatel, i tried to use the code with the function call: BrowseToFile((LPCTSTR)&quot;C:\\\\Windows\\\\CSUP.txt&quot;);  But it didn&#39;t work ... Can you tell me what i did wrong?"}, {"owner": {"reputation": 21, "user_id": 10236016, "user_type": "registered", "profile_image": "https://graph.facebook.com/2198273866852857/picture?type=large", "display_name": "Jonas Sorgenfrei", "link": "https://stackoverflow.com/users/10236016/jonas-sorgenfrei"}, "edited": false, "score": 1, "creation_date": 1535754845, "post_id": 52087477, "comment_id": 91197813, "body": "Okay got it, the Cast was Wrong. I corrected it:                                                          TCHAR tchar[512]; USES_CONVERSION; _tcscpy(tchar, A2T(stdStr.c_str()));"}], "tags": [], "owner": {"reputation": 388, "user_id": 10252378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cX6kb.jpg?s=128&g=1", "display_name": "Hasan Patel", "link": "https://stackoverflow.com/users/10252378/hasan-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1535586614, "creation_date": 1535586614, "answer_id": 52087477, "question_id": 52087117, "link": "https://stackoverflow.com/questions/52087117/convert-unix-path-with-slashes-to-windows-path/52087477#52087477", "title": "Convert Unix path with slashes to Windows path", "body": "<p>You need to use a function called <code>SHOpenFolderAndSelectItems()</code>to invoke the <code>explorer.exe</code> via command line.\nThis is a sample code to do so:</p>\n\n<pre><code>void BrowseToFile(LPCTSTR filename)\n{\n    ITEMIDLIST *pidl = ILCreateFromPath(filename);\n    if(pidl) {\n        SHOpenFolderAndSelectItems(pidl,0,0,0);\n        ILFree(pidl);\n    }\n}\n</code></pre>\n\n<p>Hope this help; cheers</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10236016, "user_type": "registered", "profile_image": "https://graph.facebook.com/2198273866852857/picture?type=large", "display_name": "Jonas Sorgenfrei", "link": "https://stackoverflow.com/users/10236016/jonas-sorgenfrei"}, "edited": false, "score": 0, "creation_date": 1535757748, "post_id": 52123583, "comment_id": 91198401, "body": "Hello Marek, thanks for your responds. I tried using openUrl but it opens the file itself and not the selected file inside of an explorer window."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 21, "user_id": 10236016, "user_type": "registered", "profile_image": "https://graph.facebook.com/2198273866852857/picture?type=large", "display_name": "Jonas Sorgenfrei", "link": "https://stackoverflow.com/users/10236016/jonas-sorgenfrei"}, "edited": false, "score": 0, "creation_date": 1535757969, "post_id": 52123583, "comment_id": 91198444, "body": "ok so you need this: <a href=\"https://stackoverflow.com/a/3546503/1387438\">stackoverflow.com/a/3546503/1387438</a>"}], "tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1535758057, "last_edit_date": 1535758057, "creation_date": 1535757543, "answer_id": 52123583, "question_id": 52087117, "link": "https://stackoverflow.com/questions/52087117/convert-unix-path-with-slashes-to-windows-path/52123583#52123583", "title": "Convert Unix path with slashes to Windows path", "body": "<p>Qt is multi platform framework so you should take advantage of it as much as it is possible.</p>\n\n<p>There is nice API which will do everything for you without such complications: <a href=\"http://doc.qt.io/qt-5/qdesktopservices.html#openUrl\" rel=\"nofollow noreferrer\">QDesktopServices::openUrl</a>.</p>\n\n<p><hr>\nedit:\nBased on comment <a href=\"https://stackoverflow.com/a/3546503/1387438\">there is already a solution on SO for that</a>.</p>\n"}], "owner": {"reputation": 21, "user_id": 10236016, "user_type": "registered", "profile_image": "https://graph.facebook.com/2198273866852857/picture?type=large", "display_name": "Jonas Sorgenfrei", "link": "https://stackoverflow.com/users/10236016/jonas-sorgenfrei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 476, "favorite_count": 0, "closed_date": 1535761615, "answer_count": 2, "score": 2, "last_activity_date": 1535761671, "creation_date": 1535583185, "last_edit_date": 1535761671, "question_id": 52087117, "link": "https://stackoverflow.com/questions/52087117/convert-unix-path-with-slashes-to-windows-path", "closed_reason": "Duplicate", "title": "Convert Unix path with slashes to Windows path", "body": "<p>I am trying to run a command to open a specific location in the <code>explorer.exe</code> and select a specific file:</p>\n\n<pre><code>QUrl url = QUrl::fromUserInput(file.absoluteFilePath());\nQString str = \"explorer.exe /select,\\\"\" + url.toString() + \"\\\"\";\nsystem(str.toStdString().c_str());\n</code></pre>\n\n<p>This works great with Windows locations.</p>\n\n<p>But since I open as well locations from a NAS and MAC user can create folders there I have a problem with folders like this:</p>\n\n<blockquote>\n  <p>//NAS/<strong>FOLDER/With/BackSLASH</strong>/file.ext</p>\n</blockquote>\n\n<p>Since it's possible on a Mac to use slashes for file/folder naming it cannot be recognized by the <code>system()</code> funciton and <code>QString</code> converts it to <code>U+002F</code>.</p>\n\n<p>In Windows explorer it is shown as:</p>\n\n<blockquote>\n  <p><strong>FOLDER\u2022With\u2022BackSLASH</strong></p>\n</blockquote>\n\n<p>and, if I use the command prompt to navigate into such a folder it shows the folder name as following:</p>\n\n<blockquote>\n  <p><strong>PRODUCER'S NOTES 8\uf0226</strong></p>\n</blockquote>\n\n<p>Does anyone have an idea how to handle this special case or how to convert this path to a path which can be passed as argument for the <code>explorer.exe</code>?</p>\n\n<p><strong>/* EDIT 08/31/2018*/</strong></p>\n\n<p>I changed my Code to:</p>\n\n<pre><code>#include &lt;Shlobj.h&gt;\n#include &lt;atlstr.h&gt;\nvoid exportManager::BrowseToFile(QString filename)\n{\nTCHAR tchar[512];\nUSES_CONVERSION;\n_tcscpy(tchar, A2T(filename.toStdString().c_str()));\n\nITEMIDLIST *pidl = ILCreateFromPath(tchar);\n if (pidl) {\n    SHOpenFolderAndSelectItems(pidl, 0, 0, 0);\n    ILFree(pidl);\n }\n}\n....\nQString path = qFile.absoluteFilePath();\nBrowseToFile(path.replace('/', '\\\\'));\n</code></pre>\n\n<p>But this still doesn't solve the Problem with the Backslashes and Slashes in Folder/FileNames.\nSeems the conversion \"filename.toStdString().c_str()\" causes the Problem. </p>\n\n<p>If i print (qDebug()) the path it looks like this: \n//NAS/Folder\\uF022With\\uF022BackSLASH/file.ext</p>\n\n<p>I found this Question and this Solved my problem.\n<a href=\"https://stackoverflow.com/questions/9137692/qdesktopservicesopenurl-with-selecting-specified-file-in-explorer\">QDesktopServices::openUrl with selecting specified file in explorer</a></p>\n"}, {"tags": ["c++", "file"], "comments": [{"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 1, "creation_date": 1535583258, "post_id": 52087100, "comment_id": 91124519, "body": "instantiate ofstream fout; call fout.open(&#39;file.ext&quot;); use fout instead of cout. when done, call fout.close()"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 1, "creation_date": 1535583546, "post_id": 52087100, "comment_id": 91124579, "body": "Are you able to print &quot;Hello, world!&quot; to a file?"}, {"owner": {"reputation": 1, "user_id": 10292360, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o1vDj2CXFsE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaObH-o56xpGipwQsZO7MtaN86jIFA/mo/photo.jpg?sz=128", "display_name": "alex hayter", "link": "https://stackoverflow.com/users/10292360/alex-hayter"}, "edited": false, "score": 0, "creation_date": 1535583749, "post_id": 52087100, "comment_id": 91124624, "body": "Yes i can print hello world to a file im just stuck never done it for a for loop"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1535585459, "post_id": 52087100, "comment_id": 91125048, "body": "This is not compiling.  I can&#39;t find the definition of <code>alexisgay</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1535585505, "post_id": 52087100, "comment_id": 91125061, "body": "You should pass <code>thestruct</code> by <code>const</code> reference, e.g. <code>const MyStruct &amp; thestruct</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1535585590, "post_id": 52087100, "comment_id": 91125084, "body": "You don&#39;t need the 2nd <code>if</code> statement (that follows the <code>else</code>).  The <code>else</code> clause means all values <code>&lt;=30</code> because that is the <i>opposite</i> of greater than."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1535611511, "post_id": 52087100, "comment_id": 91131204, "body": "It&#39;s nice that you&#39;re happy and want to tell the world about it, but it&#39;s also nice to consider that other people may not use words in the same old-fashioned sense as you."}], "answers": [{"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1535611427, "creation_date": 1535611427, "answer_id": 52090704, "question_id": 52087100, "link": "https://stackoverflow.com/questions/52087100/how-would-i-save-the-output-of-this-forloop/52090704#52090704", "title": "How would I save the output of this forloop", "body": "<p>If you add a stream parameter to your printing function you can choose where it goes.</p>\n\n<pre><code>void printStruct(ostream&amp; os, const MyStruct&amp; thestruct);\n\nint main(){\n    MyStruct alex[4] = {{15, 20},{30, 35},{45, 50},{60, 65}};\n    int sizeofarray = 4;\n\n    // Print to a file\n    ofstream output(\"results.txt\");\n    output &lt;&lt; \"Number\" &lt;&lt; \"\\t\" &lt;&lt; \"Numbertwo\" &lt;&lt; endl;\n    for(int x = 0; x &lt; sizeofarray; x = x+1){\n        printStruct(output, alex[x]);\n    }\n\n    // Print the same to stdout\n    cout &lt;&lt; \"Number\" &lt;&lt; \"\\t\" &lt;&lt; \"Numbertwo\" &lt;&lt; endl;\n    for(int x = 0; x &lt; sizeofarray; x = x+1){\n        printStruct(cout, alex[x]);\n    }\n\n}\n\nvoid printStruct(ostream&amp; os, const MyStruct&amp; thestruct){\n    if(thestruct.number &gt; 30){\n        os &lt;&lt; thestruct.number*10 &lt;&lt; \"\\t\" &lt;&lt; thestruct.numbertwo &lt;&lt; endl;\n    else\n        os &lt;&lt; thestruct.number*10 &lt;&lt; \"\\t\" &lt;&lt; thestruct.numbertwo &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10292360, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o1vDj2CXFsE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaObH-o56xpGipwQsZO7MtaN86jIFA/mo/photo.jpg?sz=128", "display_name": "alex hayter", "link": "https://stackoverflow.com/users/10292360/alex-hayter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1535611427, "creation_date": 1535583065, "last_edit_date": 1535611078, "question_id": 52087100, "link": "https://stackoverflow.com/questions/52087100/how-would-i-save-the-output-of-this-forloop", "title": "How would I save the output of this forloop", "body": "<p>This is the code I've already written but I would like to be able to save my for loop output to a file. I have tried using different ways like using ofstream around the loop outside the loop and inside the loop. However even though using these my code runs it does not output information to the file like I would like.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nstruct MyStruct {\n    int number;\n    int numbertwo;\n};\n\nvoid printStruct(MyStruct thestruct);\n\nint main(){\n    MyStruct alex[4] = {{15, 20},{30, 35},{45, 50},{60, 65}};\n\n    cout&lt;&lt;\"Number\"&lt;&lt;\"\\t\"&lt;&lt;\"Numbertwo\"&lt;&lt;endl;\n\n    int sizeofarray = 4;\n\n    for(int x = 0; x &lt; sizeofarray; x = x+1){\n        printStruct(alex[x]);\n    }\n}\n\nvoid printStruct(MyStruct thestruct){\n    for(int x = 0;x &lt; 1; x++)\n     if(thestruct.number &gt; 30){\n      cout&lt;&lt;thestruct.number*10&lt;&lt;\"\\t\"&lt;&lt;thestruct.numbertwo&lt;&lt;endl;}\n     else if(thestruct.number &lt;= 30){\n      cout&lt;&lt;thestruct.number*10&lt;&lt;\"\\t\"&lt;&lt;thestruct.numbertwo&lt;&lt;endl;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "json"], "comments": [{"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1535583423, "post_id": 52087092, "comment_id": 91124554, "body": "have you tried int WinMain(..) ? this project is a Windows Application not a console ,right?"}], "answers": [{"comments": [{"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "reply_to_user": {"reputation": 57, "user_id": 10292289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-155t3a7qX7A/AAAAAAAAAAI/AAAAAAAABFU/eu2tJSX83HA/photo.jpg?sz=128", "display_name": "Jiffis28", "link": "https://stackoverflow.com/users/10292289/jiffis28"}, "edited": false, "score": 0, "creation_date": 1535996209, "post_id": 52087204, "comment_id": 91258565, "body": "Cool - thank you for the update.  Please feel free to &quot;accept&quot; this answer (so the question won&#39;t remain &quot;open&quot;)."}], "tags": [], "owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "is_accepted": false, "score": 1, "last_activity_date": 1535583866, "creation_date": 1535583866, "answer_id": 52087204, "question_id": 52087092, "link": "https://stackoverflow.com/questions/52087092/i-cannot-figure-out-the-undefined-reference-to-winmain16-error/52087204#52087204", "title": "I cannot figure out the &quot;undefined reference to Winmain@16 error&quot;", "body": "<p>Try adding this line before your SDL include:</p>\n\n<pre><code>#define SDL_MAIN_HANDLED\n</code></pre>\n\n<p>Look here for more details:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5259714/undefined-reference-to-winmain16\">undefined reference to `WinMain@16&#39;</a></p>\n"}], "owner": {"reputation": 57, "user_id": 10292289, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-155t3a7qX7A/AAAAAAAAAAI/AAAAAAAABFU/eu2tJSX83HA/photo.jpg?sz=128", "display_name": "Jiffis28", "link": "https://stackoverflow.com/users/10292289/jiffis28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1219, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535583866, "creation_date": 1535583005, "question_id": 52087092, "link": "https://stackoverflow.com/questions/52087092/i-cannot-figure-out-the-undefined-reference-to-winmain16-error", "title": "I cannot figure out the &quot;undefined reference to Winmain@16 error&quot;", "body": "<p>Before I start, I know there are a lot of other questions on stack that are the same as mine. Trust me, I've checked them all, and I wouldn't be asking this question if they had helped me in any way shape or form. Also I would very much like an easy to understand answer, because while looking at the other questions, it took me 10 minutes of looking at them just to figure out what they meant. That being said, let's get to my problem.</p>\n\n<p>I am trying to get SDL to work with Visual Studio Code (Not Visual Studio. My computer doesn't have enough space for Visual Studio or I'd be using it.) I am in the tasks.json file trying to link the SDL2.lib library to the file I'm working with, main.cpp (I'm using c++). I have moved all the files in the SDL include and lib folders to be loose in my mingw bin folder. This is my tasks.json file:</p>\n\n<pre><code>{\n    // See https://go.microsoft.com/fwlink/?LinkId=733558\n    // for the documentation about the tasks.json format\n    \"version\": \"2.0.0\",\n    \"tasks\": [\n        {\n            \"label\": \"echo\",\n            \"type\": \"shell\",\n            \"command\": \"g++\",\n            \"args\": [\n               \"-g\",\n               \"-o\",\n               \"-c\",\n               \"C:/MinGW/bin/main.cpp\",\n               \"C:/MinGW/bin/SDL2.lib\",\n               \"-lmingw32\"\n            ],\n            \"group\": {\n                \"kind\": \"build\",\n                \"isDefault\": true\n            },\n            \"problemMatcher\": [\n                \"$gcc\"\n            ]\n        },\n    ]\n}\n</code></pre>\n\n<p>And here is my main.cpp file:</p>\n\n<pre><code>#include \"windows.h\"\n#include \"SDL.h\"\n#include &lt;iostream&gt;\n\nint main(int argc, char** argv) {\n\n    SDL_Init(SDL_INIT_EVERYTHING);\n\n    return 0;\n}\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>c:/mingw/bin/../lib/gcc/mingw32/6.3.0/../../../libmingw32.a(main.o):(.text.startup+0xa0): undefined reference to `WinMain@16'\ncollect2.exe: error: ld returned 1 exit status\nThe terminal process terminated with exit code: 1\n</code></pre>\n\n<p>From what I can tell, this error is fairly common, but I have been keeping track, and over the past two weeks, I have tried 37 different ways to solve this problem (including the solutions to the other posts about this). I don't know what the problem is, but maybe someone here can figure it out. I have posted this in four other forums with no responses and I am so lost. It's really hard to be enthusiastic right now, but please respond and thank you in advance!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1535583156, "post_id": 52087077, "comment_id": 91124488, "body": "Searching &quot;C++ Order of Precedence&quot; yielded <a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=3&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwj4ydX1rJPdAhVBwZ8KHfbfCbwQFjACegQIChAB&amp;url=https%3A%2F%2Fen.cppreference.com%2Fw%2Fcpp%2Flanguage%2Foperator_precedence&amp;usg=AOvVaw3eamnEOW0bOP2kMaWdB_PJ\" rel=\"nofollow noreferrer\">this cppreference page</a> as the first result."}, {"owner": {"reputation": 153, "user_id": 3307593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9184d0b722a6fe25e829de4475f708?s=128&d=identicon&r=PG&f=1", "display_name": "Megadardery", "link": "https://stackoverflow.com/users/3307593/megadardery"}, "edited": false, "score": 0, "creation_date": 1535583479, "post_id": 52087077, "comment_id": 91124562, "body": "^ That and be aware of integer division."}, {"owner": {"reputation": 19, "user_id": 10274142, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T50pInzzYto/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP97VbJVpzJ0CafMlCvj4-SlWCRpQ/mo/photo.jpg?sz=128", "display_name": "Ebeli", "link": "https://stackoverflow.com/users/10274142/ebeli"}, "edited": false, "score": 0, "creation_date": 1535583544, "post_id": 52087077, "comment_id": 91124578, "body": "Integer division?  The page you gave me is too complicated for me! Can you explain it to me like I&#39;m stupid.. because I sure do feel stupid right now."}, {"owner": {"reputation": 19, "user_id": 10274142, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T50pInzzYto/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP97VbJVpzJ0CafMlCvj4-SlWCRpQ/mo/photo.jpg?sz=128", "display_name": "Ebeli", "link": "https://stackoverflow.com/users/10274142/ebeli"}, "edited": false, "score": 0, "creation_date": 1535583610, "post_id": 52087077, "comment_id": 91124593, "body": "My question is: Does my code have to follow PEMDAS? my formulas? do I need to rearrange them in order for them to work?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1535583810, "post_id": 52087077, "comment_id": 91124639, "body": "@Ebeli The page does seem complicated, but take it slow and read carefully. You see this massive table with a lot of information. So, understanding the very first sentence (it says this is a table of precedence and associativity for C++ operators), skip to the bottom of the table. If you read carefully from there to the Notes section carefully, we can see that it gives some examples and gives the rules needed to take an arbitrary C++ expression and get the order of operations on it"}, {"owner": {"reputation": 2022, "user_id": 1236128, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DxsJR.png?s=128&g=1", "display_name": "Jonathan Komar", "link": "https://stackoverflow.com/users/1236128/jonathan-komar"}, "edited": false, "score": 0, "creation_date": 1595183976, "post_id": 52087077, "comment_id": 111379907, "body": "Prof. Bergman explains why PEMDAS is misleading: <a href=\"https://math.berkeley.edu/~gbergman/misc/numbers/ord_ops.html#:~:text=From\" rel=\"nofollow noreferrer\">math.berkeley.edu/~gbergman/misc/numbers/&hellip;</a> correspondence with people on,%2C Division%2C Addition%2C Subtraction"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10274142, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T50pInzzYto/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP97VbJVpzJ0CafMlCvj4-SlWCRpQ/mo/photo.jpg?sz=128", "display_name": "Ebeli", "link": "https://stackoverflow.com/users/10274142/ebeli"}, "edited": false, "score": 0, "creation_date": 1535609393, "post_id": 52087283, "comment_id": 91130227, "body": "Thank you, this makes sense. I was using int, it works with double. I hadn&#39;t realized that there&#39;s no E in c++"}], "tags": [], "owner": {"reputation": 153, "user_id": 3307593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9184d0b722a6fe25e829de4475f708?s=128&d=identicon&r=PG&f=1", "display_name": "Megadardery", "link": "https://stackoverflow.com/users/3307593/megadardery"}, "is_accepted": true, "score": 2, "last_activity_date": 1535585134, "last_edit_date": 1535585134, "creation_date": 1535584645, "answer_id": 52087283, "question_id": 52087077, "link": "https://stackoverflow.com/questions/52087077/c-and-pemdas-order-of-precedence-operations/52087283#52087283", "title": "C++ and PEMDAS Order of Precedence/Operations?", "body": "<p>The <a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">C++ Operator Precedence</a> cppreference page contains the order of all operations in c++. It's a bit hard to digest all at once, but for simple mathematical operations you are concerned about row #5 and #6.</p>\n\n<p>So yes, you can say that C++ somewhat follows PEMDAS, except, it doesn't have an exponent operator (see <a href=\"https://en.cppreference.com/w/cpp/numeric/math/pow\" rel=\"nofollow noreferrer\">std::pow</a>). But to clarify, multiplication and division are of the same priority (evaluated left to right) so are addition and subtraction (also left to right)</p>\n\n<p>Assuming you mean in <code>5/9 * (34/.2)</code> that <code>5/9</code> is a fraction, or in other words, the <code>(34/.2)</code> is not in the denominator, <code>5/9 * (34/.2)</code> and <code>(34/.2) * 5/9</code> should in theory evaluate to the same thing, right?</p>\n\n<p>The reason they don't is because of integer division. When you write <code>5/9</code> what you should get is 0.555556, but because both 5 and 9 are integers, the / operator returns only the integral part of the result, in this case 0. However, when you evaluate the brackets first, you start by dividing an integer by a non-integer value (in this case, double). This returns a double result which when multiplied by 5 gives another double result, and dividing it by 9 doesn't do the integer division (because the first operand is double).</p>\n\n<p>To reclarify the fault is not that the order is <em>wrong</em>, it's because of unexpected integer division. You can fix this problem by changing 5 into 5.0. This way, it's a double value and the / operator will never do integer division.</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 10274142, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T50pInzzYto/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP97VbJVpzJ0CafMlCvj4-SlWCRpQ/mo/photo.jpg?sz=128", "display_name": "Ebeli", "link": "https://stackoverflow.com/users/10274142/ebeli"}, "edited": false, "score": 0, "creation_date": 1535609257, "post_id": 52087312, "comment_id": 91130172, "body": "This makes so much sense! Thank you. We were getting 0s and I was a bit confused, but the way you laid it out explains it nicely and simply."}], "tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": false, "score": 1, "last_activity_date": 1535586608, "last_edit_date": 1535586608, "creation_date": 1535584926, "answer_id": 52087312, "question_id": 52087077, "link": "https://stackoverflow.com/questions/52087077/c-and-pemdas-order-of-precedence-operations/52087312#52087312", "title": "C++ and PEMDAS Order of Precedence/Operations?", "body": "<p>The simple answer is \"Yes\" C++ follows the standard order of precedence.</p>\n\n<p>I would note that in PEMDAS the E stands for \"exponent\" and there is no way to express that in C++ you need to make a function call to achieve it but the rest is correct.</p>\n\n<pre><code>Definition:\n\nP       Parathasis first.\nE       Exponent second.\nMD      Multiplication and Division third  (have the same precedence)\nAS      Addition and Subtraction    fourth (have the same precedence)\n\nMD happen left to right\nAS happen left to right\n</code></pre>\n\n<blockquote>\n  <p>5/9 * (34/.2)</p>\n  \n  <p>it will have a hard time computing this formula due to the fact that the parentheses are at the end and not the front. Is this correct?</p>\n</blockquote>\n\n<p>Wrong. The above expression is well define in maths and in C++ and has the same meaning.</p>\n\n<blockquote>\n  <p>(34/.2) *5/9</p>\n  \n  <p>my formula works. Any tips, pointers, guidance is appreciated.</p>\n</blockquote>\n\n<p>These are not the same expression. Multiplication and division have the same precedence and are applied left to right. You have changed the order of how these operators are applied. But you say they are supposed to be associative (i.e. order is not important). That is true. But you also have to throw in the type information. One easy thing to forget is that integer division is not what you expect (it throws away the remainder). </p>\n\n<p>Version 1:</p>\n\n<pre><code> 5/9 * (34/.2)\n 34/.2   =&gt; P1       170.0\n 5/9     =&gt; P2       0      // Integer division\n P2 * P1 =&gt; P3       0    \n</code></pre>\n\n<p>Version 2</p>\n\n<pre><code> (34/.2) *5/9\n 34/.2    =&gt; P1      170.0\n P1 * 5   =&gt; P2      850.0\n P2 / 9   =&gt; P3       94.4\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10274142, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T50pInzzYto/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaP97VbJVpzJ0CafMlCvj4-SlWCRpQ/mo/photo.jpg?sz=128", "display_name": "Ebeli", "link": "https://stackoverflow.com/users/10274142/ebeli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4092, "favorite_count": 1, "accepted_answer_id": 52087283, "answer_count": 2, "score": -1, "last_activity_date": 1535586608, "creation_date": 1535582871, "last_edit_date": 1535586218, "question_id": 52087077, "link": "https://stackoverflow.com/questions/52087077/c-and-pemdas-order-of-precedence-operations", "title": "C++ and PEMDAS Order of Precedence/Operations?", "body": "<p>I have a question I was not able to find an answer for, I'm looking for some clarification.</p>\n\n<p>From my understanding, C++ follows PEMDAS, is this correct?</p>\n\n<p>So if I do something like <code>5/9 * (34/.2)</code>, it will have a hard time computing this formula due to the fact that the parentheses are at the end and not the front. Is this correct?</p>\n\n<p>When I do <code>(34/.2) *5/9</code>, my formula works.</p>\n\n<p>Any tips, pointers, guidance is appreciated. I feel like I'm really lost here. </p>\n"}, {"tags": ["c++", "visual-studio", "windows-10"], "comments": [{"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 3, "creation_date": 1535582995, "post_id": 52087066, "comment_id": 91124426, "body": "<i>it doesn&#39;t work</i> could you please clarify? It doesn&#39;t compile, or it runs but doesn&#39;t do what you want? What are you expecting from 10 integers?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1535583071, "post_id": 52087066, "comment_id": 91124456, "body": "Don&#39;t reseed the generator in the loop. Generate in the loop, move everything else outside the loop. And make sure <code>INT_MAX</code> is 0x7FFFFFFF or you&#39;re possibly in for another fun surprise."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1535583146, "post_id": 52087066, "comment_id": 91124484, "body": "Also, for integers <code>uniform_real_distribution</code> isn&#39;t the best choice. <code>uniform_int_distribution</code> is a better choice."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1535583336, "post_id": 52087066, "comment_id": 91124536, "body": "Oh and watch out. Some ports of GCC have hilariously bad <code>random_device</code> implementations."}, {"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1535589034, "post_id": 52087066, "comment_id": 91125707, "body": "@user4581301  Yup.  Under close scrutiny, even the venerable MT <a href=\"https://cs.stackexchange.com/questions/50059/why-is-the-mersenne-twister-regarded-as-good\">isn&#39;t that great</a>."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10184085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/651a05f032cc06d32be747fc68dbbfdc?s=128&d=identicon&r=PG&f=1", "display_name": "Ziggi", "link": "https://stackoverflow.com/users/10184085/ziggi"}, "edited": false, "score": 0, "creation_date": 1535625739, "post_id": 52087305, "comment_id": 91140034, "body": "Appreciate your help very much."}], "tags": [], "owner": {"reputation": 63, "user_id": 1889897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/321da2d4dd336295456ea3921eab40d3?s=128&d=identicon&r=PG", "display_name": "maxmati", "link": "https://stackoverflow.com/users/1889897/maxmati"}, "is_accepted": false, "score": 4, "last_activity_date": 1535584835, "creation_date": 1535584835, "answer_id": 52087305, "question_id": 52087066, "link": "https://stackoverflow.com/questions/52087066/how-to-generate-random-integers-0-to-0x7fffffff/52087305#52087305", "title": "How to generate random integers 0 to 0x7FFFFFFF?", "body": "<p>You have few mistakes in your code.</p>\n\n<ol>\n<li>You should move creation of <code>random_device</code> and seeding <code>mt19937</code> outside the for loop. I'll also suggest the same for <code>uniform_real_distribution&lt;int&gt;</code></li>\n<li><code>mt19937</code> takes in the constructor value of seed not <code>random_device</code> so you have to call it to get seed(<code>rd()</code>)</li>\n<li>You should use <code>uniform_int_distribution&lt;int&gt;</code> if you are generating integers</li>\n<li>If your intention is to generate number to 0x7FFFFFFF you should put this number explicitly but if you want to get numbers to max <code>int</code> value i'll suggest using more C++ style <code>std::numeric_limits&lt;int&gt;::max()</code></li>\n</ol>\n\n<p>Here is working example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;cstdio&gt;\n#include &lt;random&gt;\n#include &lt;limits&gt;\nusing namespace std;\n\nint main(){\n  random_device rd;\n  mt19937 gen(rd());\n  uniform_int_distribution&lt;int&gt; dis(0, std::numeric_limits&lt;int&gt;::max());\n  for (int p = 0; p &lt; 10; p++) {\n    printf(\"%i\\n\", dis(gen));\n  }\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10184085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/651a05f032cc06d32be747fc68dbbfdc?s=128&d=identicon&r=PG&f=1", "display_name": "Ziggi", "link": "https://stackoverflow.com/users/10184085/ziggi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1535584835, "creation_date": 1535582821, "question_id": 52087066, "link": "https://stackoverflow.com/questions/52087066/how-to-generate-random-integers-0-to-0x7fffffff", "title": "How to generate random integers 0 to 0x7FFFFFFF?", "body": "<p>This doesn't work:</p>\n\n<pre><code>for (int p = 0; p &lt; 10; p++) {\n    random_device rd;\n    mt19937 gen(rd);\n    uniform_real_distribution&lt;int&gt; dis(0, INT_MAX);\n    printf(\"%i\\n\", dis(gen));\n}\n</code></pre>\n\n<p>Any advice would be appreciated.</p>\n"}, {"tags": ["c++", "eclipse"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1535582773, "post_id": 52086944, "comment_id": 91124365, "body": "No easy answer for you, I&#39;m afraid. If the library developers did not provide instructions for building on your tool chain, you&#39;ll probably have to come up with them yourself. If your tools are GCC-based and came with a Linux-like build environment (cygwin, msys) you can probably use the instructions given with minimal modification. If not... I feel your pain."}, {"owner": {"reputation": 483, "user_id": 7903454, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d4e413a1ee54a14559917559af99d48b?s=128&d=identicon&r=PG&f=1", "display_name": "Noe Cano", "link": "https://stackoverflow.com/users/7903454/noe-cano"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1535753761, "post_id": 52086944, "comment_id": 91197565, "body": "@user4581301 Maybe if I saw an example of one I could replicate it in others, the problem is that there is no info or tutorial or I have not found it"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1535754169, "post_id": 52086944, "comment_id": 91197683, "body": "If IngeDev is backed by the GCC tool chain, you may find the offerings from <a href=\"https://www.msys2.org/\" rel=\"nofollow noreferrer\">msys2.org</a> allow you to closely follow the Linux build instructions, but like I said, if you aren&#39;t given build instructions to produce a static library building your own set could be a dramatic chore. Now way to tell without knowing which library you&#39;re fighting with. Recommend adding one of the repositories to your question. I might recognize it, but more likely someone else will. Perhaps even one of the writers. Lot of interesting folks hanging around here."}, {"owner": {"reputation": 483, "user_id": 7903454, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d4e413a1ee54a14559917559af99d48b?s=128&d=identicon&r=PG&f=1", "display_name": "Noe Cano", "link": "https://stackoverflow.com/users/7903454/noe-cano"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1535755303, "post_id": 52086944, "comment_id": 91197914, "body": "@user4581301 All this started because IngeDev does not come with &quot;libcurl&quot; so I thought to create the static library from the source code &quot;src&quot; but it was not as easy as I thought, so I wanted to try to build it from the &quot;makefile&quot; (all apparently do it so) but I got more questions than answers, this is the link of libcurl in git <a href=\"https://github.com/curl/curl\" rel=\"nofollow noreferrer\">github.com/curl/curl</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1535758253, "post_id": 52086944, "comment_id": 91198500, "body": "I have successfully built cURL under windows 10 with GCC 4.8 supplied by Mingw-64 and msys. My notes unfortunately are sparse: /*  The making of curl:   First make openssl  ./configure mingw64  make depends  make   then hack lib/Makefile.m32 to point at openssl and remove references to  alternative locations for ssl  Enter lib directory and  make -n -f Makefile.m32 CFG=-ssl */ This may (probably) have been after I ran ./configure. Your tool chain is likely not mingw64, so some research is required."}], "owner": {"reputation": 483, "user_id": 7903454, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d4e413a1ee54a14559917559af99d48b?s=128&d=identicon&r=PG&f=1", "display_name": "Noe Cano", "link": "https://stackoverflow.com/users/7903454/noe-cano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535581820, "creation_date": 1535581820, "question_id": 52086944, "link": "https://stackoverflow.com/questions/52086944/create-static-libraries-from-github-repositories-in-windows", "title": "Create Static Libraries from Github repositories in Windows", "body": "<p>I want to understand what is the process to follow to create a static library (.a) from the files downloaded from a Github repository. I've noticed that usually come \"Makefile\" \"Config\" \"Build\" files but I do not know how to run them and at what point the library is created. I'm using Windows 10 and I do not know if it's any good but download the Ubuntu application that is in Microsoft Store (I did this because I thought they were Linux commands).</p>\n\n<p>I need to create static libraries because apparently they are the only ones that IngeDev (IDE based on Eclipse) supports and allows to use.</p>\n"}, {"tags": ["c++", "visual-studio", "cmd", "exe"], "comments": [{"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "edited": false, "score": 0, "creation_date": 1535582565, "post_id": 52086927, "comment_id": 91124302, "body": "@downvote, the question is crystal-clear: how to view the command that VS is using to start an application."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1535584627, "post_id": 52086927, "comment_id": 91124841, "body": "What do you mean by &quot;without success&quot;?  Do you get an error?"}], "answers": [{"tags": [], "owner": {"reputation": 23051, "user_id": 84507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b5ec4a143dd4a12a8be0a65f71b0df?s=128&d=identicon&r=PG", "display_name": "Sergey Vlasov", "link": "https://stackoverflow.com/users/84507/sergey-vlasov"}, "is_accepted": true, "score": 1, "last_activity_date": 1535603630, "creation_date": 1535603630, "answer_id": 52089263, "question_id": 52086927, "link": "https://stackoverflow.com/questions/52086927/how-to-view-complete-cmd-execution-command-including-arguments-and-flags/52089263#52089263", "title": "How to view complete CMD execution command, including arguments and flags?", "body": "<p>If your app is running, <a href=\"https://docs.microsoft.com/en-us/sysinternals/downloads/process-explorer\" rel=\"nofollow noreferrer\">Process Explorer</a> shows complete command line. If your app is short lived, <a href=\"https://docs.microsoft.com/en-us/sysinternals/downloads/procmon\" rel=\"nofollow noreferrer\">Process Monitor</a> records what arguments were used to start it.</p>\n"}], "owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 52089263, "answer_count": 1, "score": -1, "last_activity_date": 1535603630, "creation_date": 1535581713, "last_edit_date": 1535585165, "question_id": 52086927, "link": "https://stackoverflow.com/questions/52086927/how-to-view-complete-cmd-execution-command-including-arguments-and-flags", "title": "How to view complete CMD execution command, including arguments and flags?", "body": "<p>In Visual Studio, how can the run command for a console application be viewed?</p>\n\n<p>Imagine a complex C++ application with a lot of startup flags and arguments.</p>\n\n<p>It runs fine from the \"Debug -> Start Without Debugging\" option from the menu.</p>\n\n<p>I would like to run the executable within a Command Prompt window, without starting Visual Studio. I try and run the executable, without success, like so:</p>\n\n<pre><code>./myProgram.exe\n</code></pre>\n\n<p>How can the command that VS uses to start the application--with all flags and arguments--be viewed?</p>\n"}, {"tags": ["c++", "performance", "c++11", "lambda", "auto"], "comments": [{"owner": {"reputation": 153, "user_id": 3307593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9184d0b722a6fe25e829de4475f708?s=128&d=identicon&r=PG&f=1", "display_name": "Megadardery", "link": "https://stackoverflow.com/users/3307593/megadardery"}, "edited": false, "score": 0, "creation_date": 1535582075, "post_id": 52086897, "comment_id": 91124164, "body": "have you tried to compile both and check the resulting assembly code for differences?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1535582322, "post_id": 52086897, "comment_id": 91124246, "body": "Have you heard of the Compiler Explorer? It allows you to see the assembly for a given piece of code. In this case, there is no difference in the assembly (there&#39;s a change of <code>x == y</code> becoming <code>y == x</code>, but that&#39;s not really a difference): <a href=\"https://godbolt.org/z/iBmO0M\" rel=\"nofollow noreferrer\">godbolt.org/z/iBmO0M</a>"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1535582780, "post_id": 52086897, "comment_id": 91124368, "body": "A reasonable compiler will generate equivalent asm. There&#39;s rarely a difference between a temporary and declared variable. This discounts variables assigned to a non-moveable temporary, in which case there may be a legitimate performance benefit to passing a temporary arg without declaring a variable for it (sometimes... depends on the compiler and environment). When writing new code that needs to be performant, i&#39;d be more concerned with things like making sure you avoid cache misses, or other horrible bottlenecks by profiling often."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1535583607, "post_id": 52086897, "comment_id": 91124592, "body": "And a tangent note: involving a <code>std::function</code> object would make it considerably less likely you would get the same assembly/performance as the two cases compared here."}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 1, "creation_date": 1535585415, "post_id": 52086897, "comment_id": 91125034, "body": "You can compare the assembly on <a href=\"https://godbolt.org/z/rmjLq3\" rel=\"nofollow noreferrer\">Compiler Explorer</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1535582912, "post_id": 52087069, "comment_id": 91124404, "body": "Normally when doing assembly comparisons, you should turn on optimizations, but it&#39;s interesting that there&#39;s no difference even without optimizations"}, {"owner": {"reputation": 96, "user_id": 5568851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98040feaf6fc8fe41f328a965311d57?s=128&d=identicon&r=PG&f=1", "display_name": "heke", "link": "https://stackoverflow.com/users/5568851/heke"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1535584451, "post_id": 52087069, "comment_id": 91124799, "body": "I thought that if non optimized produces the same code, turning on the optimizations wouldn&#39;t probably change the result, since there isn&#39;t really anything that could result in different optimized code for the two cases."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1535584705, "post_id": 52087069, "comment_id": 91124863, "body": "Yeah, that&#39;s almost guaranteed (I&#39;d be extremely surprised if you got different optimized code from identical unoptimized code). I just wanted to clarify that if someone were to see a difference between two pieces of code, if optimizations are turned off, that doesn&#39;t mean anything."}], "tags": [], "owner": {"reputation": 96, "user_id": 5568851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98040feaf6fc8fe41f328a965311d57?s=128&d=identicon&r=PG&f=1", "display_name": "heke", "link": "https://stackoverflow.com/users/5568851/heke"}, "is_accepted": false, "score": 6, "last_activity_date": 1535582841, "creation_date": 1535582841, "answer_id": 52087069, "question_id": 52086897, "link": "https://stackoverflow.com/questions/52086897/can-assigning-a-name-to-a-lambda-impact-performance/52087069#52087069", "title": "Can assigning a name to a lambda impact performance?", "body": "<p>Using <a href=\"https://godbolt.org/z/be9F9A\" rel=\"noreferrer\"> gcc 8.2</a> with following code:</p>\n\n<pre><code>#include&lt;algorithm&gt;\n#include&lt;vector&gt;\n\nint main ()\n{\n    std::vector&lt;int&gt; v;\n    std::sort(v.begin(), v.end(), [](int a, int b) { return a &gt; b; });\n\n\n    auto a_greater_than_b = [](int a, int b) { return a &lt; b; };\n    std::sort(v.begin(), v.end(), a_greater_than_b);\n}\n</code></pre>\n\n<p>Outputs for the nameless:</p>\n\n<pre><code>main::{lambda(int, int)#1}::operator()(int, int) const:\n  pushq %rbp\n  movq %rsp, %rbp\n  movq %rdi, -8(%rbp)\n  movl %esi, -12(%rbp)\n  movl %edx, -16(%rbp)\n  movl -12(%rbp), %eax\n  cmpl -16(%rbp), %eax\n  setg %al\n  popq %rbp\n  ret\n\n.....\n\nleaq -48(%rbp), %rax\n  movq %rax, %rdi\n  call std::vector&lt;int, std::allocator&lt;int&gt; &gt;::end()\n  movq %rax, %rbx\n  leaq -48(%rbp), %rax\n  movq %rax, %rdi\n  call std::vector&lt;int, std::allocator&lt;int&gt; &gt;::begin()\n  movq %rbx, %rsi\n  movq %rax, %rdi\n  call void std::sort&lt;__gnu_cxx::__normal_iterator&lt;int*, std::vector&lt;int, std::allocator&lt;int&gt; &gt; &gt;, main::{lambda(int, int)#1}&gt;(__gnu_cxx::__normal_iterator&lt;int*, std::vector&lt;int, std::allocator&lt;int&gt; &gt; &gt;, main::{lambda(int, int)#1}, main::{lambda(int, int)#1})\n</code></pre>\n\n<p>and for the named one:</p>\n\n<pre><code>main::{lambda(int, int)#2}::operator()(int, int) const:\n  pushq %rbp\n  movq %rsp, %rbp\n  movq %rdi, -8(%rbp)\n  movl %esi, -12(%rbp)\n  movl %edx, -16(%rbp)\n  movl -12(%rbp), %eax\n  cmpl -16(%rbp), %eax\n  setl %al\n  popq %rbp\n  ret\n\n.....\n\nleaq -48(%rbp), %rax\n  movq %rax, %rdi\n  call std::vector&lt;int, std::allocator&lt;int&gt; &gt;::end()\n  movq %rax, %rbx\n  leaq -48(%rbp), %rax\n  movq %rax, %rdi\n  call std::vector&lt;int, std::allocator&lt;int&gt; &gt;::begin()\n  movq %rbx, %rsi\n  movq %rax, %rdi\n  call void std::sort&lt;__gnu_cxx::__normal_iterator&lt;int*, std::vector&lt;int, std::allocator&lt;int&gt; &gt; &gt;, main::{lambda(int, int)#2}&gt;(__gnu_cxx::__normal_iterator&lt;int*, std::vector&lt;int, std::allocator&lt;int&gt; &gt; &gt;, main::{lambda(int, int)#2}, main::{lambda(int, int)#2})\n</code></pre>\n\n<p>Both are the same. So no difference. </p>\n"}], "owner": {"reputation": 21, "user_id": 4394780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fba8950d0ff208dd2669d75611787030?s=128&d=identicon&r=PG&f=1", "display_name": "vldtecno", "link": "https://stackoverflow.com/users/4394780/vldtecno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535582841, "creation_date": 1535581450, "question_id": 52086897, "link": "https://stackoverflow.com/questions/52086897/can-assigning-a-name-to-a-lambda-impact-performance", "title": "Can assigning a name to a lambda impact performance?", "body": "<p>What is the difference in terms of performance, if any, between using a lambda directly and defining a named lambda and then passing it as an argument?</p>\n\n<p>For example this:</p>\n\n<pre><code>std::sort(v.begin(), v.end(), [](int a, int b) { return a &gt; b; });\n</code></pre>\n\n<p>versus this:</p>\n\n<pre><code>auto a_greater_than_b = [](int a, int b) { return a &gt; b; };\nstd::sort(v.begin(), v.end(), a_greater_than_b);\n</code></pre>\n"}, {"tags": ["c++", "floating-point", "precision"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1535582149, "post_id": 52086887, "comment_id": 91124193, "body": "When I run your code, the first line prints <code>3.35544e+07</code>. Did you use an I/O manipulator to change the output format?"}, {"owner": {"reputation": 3936, "user_id": 690639, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ac26ea82f8d95a6f853f3d8533c9b52a?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/690639/david"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1535582308, "post_id": 52086887, "comment_id": 91124239, "body": "cout&lt;&lt; setprecision(10) maybe that caused it"}, {"owner": {"reputation": 153, "user_id": 3307593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9184d0b722a6fe25e829de4475f708?s=128&d=identicon&r=PG&f=1", "display_name": "Megadardery", "link": "https://stackoverflow.com/users/3307593/megadardery"}, "edited": false, "score": 2, "creation_date": 1535582913, "post_id": 52086887, "comment_id": 91124405, "body": "Because the != operator converts the integer to a float before comparing. This loses enough precision for them to be equal."}, {"owner": {"reputation": 153, "user_id": 3307593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9184d0b722a6fe25e829de4475f708?s=128&d=identicon&r=PG&f=1", "display_name": "Megadardery", "link": "https://stackoverflow.com/users/3307593/megadardery"}, "edited": false, "score": 0, "creation_date": 1535583092, "post_id": 52086887, "comment_id": 91124468, "body": "sorry, silly mistake. Fixed :)"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1535583105, "post_id": 52086887, "comment_id": 91124474, "body": "I&#39;ve added <code>cout&lt;&lt; setprecision(10);</code> to the code in your question. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1535584118, "post_id": 52086887, "comment_id": 91124709, "body": "I&#39;ve updated my answer with an illustrative example."}], "answers": [{"comments": [{"owner": {"reputation": 3936, "user_id": 690639, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ac26ea82f8d95a6f853f3d8533c9b52a?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/690639/david"}, "edited": false, "score": 0, "creation_date": 1535582568, "post_id": 52086962, "comment_id": 91124303, "body": "Based on your explanation , I have added another snippet which i don&#39;t understand"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 3936, "user_id": 690639, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ac26ea82f8d95a6f853f3d8533c9b52a?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/690639/david"}, "edited": false, "score": 2, "creation_date": 1535583970, "post_id": 52086962, "comment_id": 91124671, "body": "@David rather than moving the goalposts for a well-answered question, prefer asking another question. The more you pack into one question, the less general and less useful to future askers it typically becomes."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1535585370, "post_id": 52086962, "comment_id": 91125026, "body": "IEEE-754 basic 32-bit binary floating-point has 24-bit significands. 23 are encoded in the significand field, and one is encoded via the exponent field. Mathematically, they have as 24-bit significands, which is why all integers from 0 to 2^24 can be represented exactly."}, {"owner": {"reputation": 3936, "user_id": 690639, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ac26ea82f8d95a6f853f3d8533c9b52a?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/690639/david"}, "edited": false, "score": 0, "creation_date": 1535585421, "post_id": 52086962, "comment_id": 91125037, "body": "Great. Thanks Keith. very well said and explained"}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 9, "last_activity_date": 1535584089, "last_edit_date": 1535584089, "creation_date": 1535581957, "answer_id": 52086962, "question_id": 52086887, "link": "https://stackoverflow.com/questions/52086887/exact-representation-of-integers-in-floating-points/52086962#52086962", "title": "Exact representation of integers in floating points", "body": "<p>It's true that IEEE floating-point only has a limited number of mantissa bits. If there are 23 mantissa bits, then it can represent 2<sup>23</sup> distinct integer values exactly.</p>\n\n<p>But since floating-point stores a power-of-two exponent separately, it can (subject to the limited exponent range) represent exactly any of those 2<sup>23</sup> values <em>times a power of two</em>.</p>\n\n<p><code>33554432</code> is exactly 2<sup>25</sup>, so it requires just one mantissa bit to represent it exactly (plus a binary exponent that denotes multiplication by a power of two). Its binary representation is <code>10000000000000000000000000</code>, which has 26 bits but only 1 <em>significant</em> bit. (Well, actually they're all significant, but you get the idea.)</p>\n\n<p>You'll find that its neighboring integer values <code>33554431</code> and <code>33554433</code> <em>cannot</em> be represented exactly in 32-bit <code>float</code>. (But they can be represented in 64-bit <code>double</code>.)</p>\n\n<p>More generally, the difference between consecutive representable values of type <code>float</code> varies with the magnitude of the value. On my system (most systems use IEEE format, but the standard doesn't require that), this program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;cmath&gt;\n\nvoid show(float f) {\n    std::cout &lt;&lt; std::nextafterf(f, 0.0) &lt;&lt; \"\\n\"\n              &lt;&lt; f &lt;&lt; \"\\n\"\n              &lt;&lt; std::nextafterf(f, f*2) &lt;&lt; \"\\n\";\n    putchar('\\n');\n}\n\nint main(void) {\n    std::cout &lt;&lt; std::setprecision(24);\n\n    show(1);\n    show(1&lt;&lt;23);\n    show(1&lt;&lt;24);\n    show(1&lt;&lt;30);\n}\n</code></pre>\n\n<p>produces this output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0.999999940395355224609375\n1\n1.00000011920928955078125\n\n8388607.5\n8388608\n8388609\n\n16777215\n16777216\n16777218\n\n1073741760\n1073741824\n1073741952\n</code></pre>\n\n<p>It shows the immediate predecessor and successor, in type <code>float</code>, of the numbers 1, 2<sup>23</sup>, 2<sup>24</sup>, and 2<sup>30</sup>. As you can see, the gaps get bigger for larger numbers, with the gap doubling in size at each power of 2.</p>\n\n<p>You'd get similar results, but with smaller gaps, with type <code>double</code> or <code>long double</code>.</p>\n"}], "owner": {"reputation": 3936, "user_id": 690639, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ac26ea82f8d95a6f853f3d8533c9b52a?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/690639/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 836, "favorite_count": 0, "accepted_answer_id": 52086962, "answer_count": 1, "score": 1, "last_activity_date": 1535584089, "creation_date": 1535581404, "last_edit_date": 1535583087, "question_id": 52086887, "link": "https://stackoverflow.com/questions/52086887/exact-representation-of-integers-in-floating-points", "title": "Exact representation of integers in floating points", "body": "<p>I am trying to understand the representation of integers in floating point format.</p>\n\n<p>Since the IEEE floating point format have only 23 bits for mantissa, i expect any integer which is greater than 1&lt;&lt;22 to be only a approx representation. This is not what i am observing in g++</p>\n\n<p>both of the cout below prints the same value 33554432. </p>\n\n<p>Since the mantissa part is the one which is responsible for the precision how can we be able to represent (store) exact number which need more than 23 bits to be stored accurately. </p>\n\n<pre><code>void floating_point_precision(){\n  cout&lt;&lt; setprecision(10);\n  float fp = (1&lt;&lt;25);\n  cout&lt;&lt; fp &lt;&lt;endl;\n  cout&lt;&lt; (1&lt;&lt;25) &lt;&lt;endl;\n}\n</code></pre>\n\n<p>As a followup based on the answer below why is the following code not executing \"Not Equal\" even though the print of both the fp,i are different.</p>\n\n<pre><code>void floating_point_precision(){\n  cout&lt;&lt; setprecision(10);\n  float fp = ((1&lt;&lt;25)+1);\n  cout&lt;&lt; fp &lt;&lt;endl;\n  int i = ((1&lt;&lt;25)+1)  ;\n  cout&lt;&lt; i &lt;&lt;endl;\n  if(i != fp)\n    cout&lt;&lt; \"Not equal\" &lt;&lt;endl;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1535581425, "post_id": 52086823, "comment_id": 91124000, "body": "Too little information to be able to help you, I&#39;m afraid. Are you building these other libraries? Are you <a href=\"https://msdn.microsoft.com/en-us/library/ba1z7822.aspx\" rel=\"nofollow noreferrer\">adding the built libraries or a downloaded pre-built library to your project&#39;s dependencies?</a>. Are pre-built libraries compatible with your version of Visual Studio?"}, {"owner": {"reputation": 31, "user_id": 4566361, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203644721660560/picture?type=large", "display_name": "Ahmet Emin Ko&#231;al", "link": "https://stackoverflow.com/users/4566361/ahmet-emin-ko%c3%a7al"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1535581795, "post_id": 52086823, "comment_id": 91124101, "body": "@user4581301 Thank you for response! Well, the problem is I don&#39;t really know anything. What I did is installing Visual Studio 2017 and then trying to use c++ libraries by copying directly &quot;main&quot; source code files (Files that are in &quot;includes&quot; directory of CPR&quot;) into the main folder of my project.   So best answer would be answer of what to do after these steps: 1- Download .zip source files: <a href=\"https://github.com/whoshuu/cpr\" rel=\"nofollow noreferrer\">github.com/whoshuu/cpr</a> 2- ?? 3- Use it."}, {"owner": {"reputation": 31, "user_id": 4566361, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203644721660560/picture?type=large", "display_name": "Ahmet Emin Ko&#231;al", "link": "https://stackoverflow.com/users/4566361/ahmet-emin-ko%c3%a7al"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1535581875, "post_id": 52086823, "comment_id": 91124114, "body": "If I can&#39;t find out how to do it, I think I will have to learn Java instead of C++"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1535582076, "post_id": 52086823, "comment_id": 91124165, "body": "Follow whatever building instructions the library provides or go hunting for libraries prebuilt for MSVS2017. Once you have the libraries built (or downloaded) add them as descrived here: <a href=\"https://msdn.microsoft.com/en-us/library/ba1z7822.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ba1z7822.aspx</a> . Or learn Java. It is generally a much more forgiving language, but it has it&#39;s own sticky spots."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1535582944, "post_id": 52086823, "comment_id": 91124411, "body": "Google &quot;visual c++ how to use a library&quot;.  Everything on the first page of hits tells you what to do and is worth reading to learn more."}, {"owner": {"reputation": 31, "user_id": 4566361, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203644721660560/picture?type=large", "display_name": "Ahmet Emin Ko&#231;al", "link": "https://stackoverflow.com/users/4566361/ahmet-emin-ko%c3%a7al"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1535913929, "post_id": 52086823, "comment_id": 91229729, "body": "@HansPassant of course I did it. I wouldn&#39;t write here if I hadn&#39;t done it before. Anyways, I moved to Java."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1535649813, "post_id": 52088323, "comment_id": 91155702, "body": "Only useful if the asker has a library compiled for VS2017. I do not believe this to be the case."}], "tags": [], "owner": {"reputation": 388, "user_id": 10252378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cX6kb.jpg?s=128&g=1", "display_name": "Hasan Patel", "link": "https://stackoverflow.com/users/10252378/hasan-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1535595171, "creation_date": 1535595171, "answer_id": 52088323, "question_id": 52086823, "link": "https://stackoverflow.com/questions/52086823/how-can-i-use-a-library-on-visual-studio/52088323#52088323", "title": "How can I use a library on Visual Studio?", "body": "<p>This might help you with VS 2017</p>\n\n<pre><code>#pragma comment(lib, \"Your library name here\") \n</code></pre>\n\n<p>Add it to your source.</p>\n"}], "owner": {"reputation": 31, "user_id": 4566361, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203644721660560/picture?type=large", "display_name": "Ahmet Emin Ko&#231;al", "link": "https://stackoverflow.com/users/4566361/ahmet-emin-ko%c3%a7al"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1535595171, "creation_date": 1535581028, "question_id": 52086823, "link": "https://stackoverflow.com/questions/52086823/how-can-i-use-a-library-on-visual-studio", "title": "How can I use a library on Visual Studio?", "body": "<p>I am trying to use cpr library but I cannot use it properly probably because I can't include the library properly. I tried other libraries like curlpp or plain curl, but every time I tried, I got errors like this:</p>\n\n<blockquote>\n  <p>cpr::Session::Session(void)\" (??0Session@cpr@@QAE@XZ), \"class cpr::Response __cdecl cpr::Get,class std::allocator >,class cpr::Authentication,class cpr::Parameters>(class std::basic_string,class std::allocator > &amp;&amp;,class cpr::Authentication &amp;&amp;,class cpr::Parameters &amp;&amp;)\" (??$Get@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@VAuthentication@cpr@@VParameters@4@@cpr@@YA?AVResponse@0@$$QAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@$$QAVAuthentication@0@$$QAVParameters@0@@Z)</p>\n</blockquote>\n\n<p>I think I got this error because of my method of including classes. I need to know how to use these classes with Visual Studio 2017.\nI searched everywhere but probably because I don't know what exactly I need to look, I couldn't find anything. \nHere is the library I want to use: <a href=\"https://whoshuu.github.io/cpr/\" rel=\"nofollow noreferrer\">https://whoshuu.github.io/cpr/</a></p>\n\n<p>The solution is learning how to use this kind of libraries with Visual Studio. This is where I need help.</p>\n"}, {"tags": ["c++", "sockets"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1535579655, "post_id": 52086560, "comment_id": 91123462, "body": "Related, this is much easier if you learn <a href=\"https://stackoverflow.com/questions/11423338/same-output-for-htonl-and-ntohl-on-an-integer\">how htonl and family work</a>, and just send the length (encoded, then decoded)"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1535579811, "post_id": 52086560, "comment_id": 91123521, "body": "There is not a 1:1 correspondence between send and recv in TCP.  You need to keep calling recv until you either get the bytes you expect or time out."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1535579873, "post_id": 52086560, "comment_id": 91123537, "body": "Does <code>send(sock, std::to_string(length), 10, 0);</code> really compile?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1535579912, "post_id": 52086560, "comment_id": 91123552, "body": "<code>if (bytesProcessed &gt; 0) break;</code> should be <code>if (bytesProcessed &lt;= 0) return;</code> instead.  And <code>package = &amp;recvBuffer[0];</code> should be changed to <code>package = std::string(&amp;recvBuffer[0], length);</code>"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1535579954, "post_id": 52086560, "comment_id": 91123566, "body": "adding on what @stark said, TCP is a stream of bytes.   While you will eventually get all the bytes you sent, how quickly they come in and how many read calls will be required to get them all is not guaranteed at all.   It&#39;s actually a somewhat complicated protocol to use because you have to constantly read into buffers and parse them at the right time."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1535580321, "post_id": 52086560, "comment_id": 91123667, "body": "And never use atoi() in either C or C++."}], "answers": [{"comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1535584668, "post_id": 52086696, "comment_id": 91124854, "body": "You should use <i>unsigned int</i> to remain portable. Also you can&#39;t just <i>reinterpret_cast</i> to an <code>std::uint32_t</code> from an arbitrary byte buffer. It is better to cast the <code>std::int32_t</code> to a <code>char*</code> and read directly into that."}, {"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1535617482, "post_id": 52086696, "comment_id": 91134636, "body": "@Galik Not quite sure why you consider using an unsigned type to be more portable. Especially when we consider that the receiving end could be written in another language that doesn&#39;t support unsigned types, like Java. The casting order seems to be more about personal preference, but I am eager to learn if there are technical reasons why it should be better."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1535625999, "post_id": 52086696, "comment_id": 91140195, "body": "Ok, yes on balance I do think you are right about this. The wording does suggest the <code>C</code> standard should be definitive in all respects - not just the declarations but their semantic mening."}], "tags": [], "owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "is_accepted": false, "score": 0, "last_activity_date": 1535581694, "last_edit_date": 1535581694, "creation_date": 1535580290, "answer_id": 52086696, "question_id": 52086560, "link": "https://stackoverflow.com/questions/52086560/send-length-and-data-through-socket-c/52086696#52086696", "title": "Send length and data through socket c++", "body": "<pre><code>send(sock, std::to_string(length).c_str(), 10, 0);\n</code></pre>\n\n<p>This is UB. You are telling it that the data has 10 bytes, but that's not correct. Apart from that there is no need to convert your int into a string and then send the string. Just sent the int, and to avoid any platform incompatibilities I recommend using a fixed size type:</p>\n\n<pre><code>std::int32_t length = package.length();\nsend(sock, &amp;length, sizeof(length), 0);\n</code></pre>\n\n<p>On the receiving end you must make sure that you actually wait for all bytes to be there. You can't simply call <code>recv</code> and assume it gives you all the bytes you need. You need to call it in a loop and check it's return value, which tells you how many bytes you got. To receive the <code>length</code>, you need to read the appropriate amount of bytes into a buffer, then reinterpret that buffer as the type you chose (e.g. <code>std::int32_t</code>.</p>\n\n<p>Additionally you should make sure that the endianness of your int is correct. It is a de facto standard to use big-endian for network data, but at the end of the day this is up to you. Not part of the standard (afaik), but available on common platforms are the helper functions <code>htonl</code> and <code>ntohl</code>, which stand for \"host to network, long\" and \"network to host, long\". They take and return a <code>std::int32_t</code>, and you can simply use them to be sure the endianness works for both sides.</p>\n\n<p>Sender:</p>\n\n<pre><code>std::int32_t length = htonl(package.length());\nsend(sock, &amp;length, sizeof(length), 0);\n</code></pre>\n\n<p>Receiver:</p>\n\n<pre><code>// after successfully reading all bytes for the length value into an adequately sized buffer:\nstd::int32_t length = ntohl(*reinterpret_cast&lt;std::int32_t*&gt;(buffer));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1535581058, "post_id": 52086728, "comment_id": 91123891, "body": "Remember that <code>recv</code> may return having read only part of <code>length</code> from the socket. The <code>MSG_WAITALL</code> flag may help with this. Also <code>length</code> may have different sizes at the sender and the receiver."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1535584307, "post_id": 52086728, "comment_id": 91124767, "body": "Also different CPU architectures may store the <code>int</code> in a different a byte order in memory. I would stick to sending text if at all possible."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1535584760, "post_id": 52086728, "comment_id": 91124880, "body": "Also you can run into sign portability problems so you should really send <i>unsigned</i> numbers."}, {"owner": {"reputation": 2617, "user_id": 3697870, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/krATc.jpg?s=128&g=1", "display_name": "Heath Raftery", "link": "https://stackoverflow.com/users/3697870/heath-raftery"}, "edited": false, "score": 0, "creation_date": 1535592662, "post_id": 52086728, "comment_id": 91126370, "body": "Heh, sounds like people solving their own problems instead of the OP&#39;s. Clearly <code>SendPackage</code> and <code>ReceivePackage</code> are running on the same architecture so endianess is irrelevant. Clearly the question is not about recv returning with no data so waiting is irrelevant (quite possibly this is handled outside the code we can see). The OP&#39;s question is answered, and as a bonus I&#39;ve added some audience-appropriate tips on the code we can see. We all gotta start somewhere."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1535649603, "post_id": 52086728, "comment_id": 91155603, "body": "Endian and different sized integers (which may differ due to compiler and compiler options even if the target architecture does not) may be a sideshow in this question, but they are still things to watch out for. I wouldn&#39;t downvote over them unless there was some egregious abuse going on or the question was specifically about them. <code>recv</code> possibly not getting all of <code>length</code> in one shot is a fatal flaw, though, and has a relatively simple resolution. I can&#39;t think of a good reason not to address it."}], "tags": [], "owner": {"reputation": 2617, "user_id": 3697870, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/krATc.jpg?s=128&g=1", "display_name": "Heath Raftery", "link": "https://stackoverflow.com/users/3697870/heath-raftery"}, "is_accepted": true, "score": -2, "last_activity_date": 1535580469, "creation_date": 1535580469, "answer_id": 52086728, "question_id": 52086560, "link": "https://stackoverflow.com/questions/52086560/send-length-and-data-through-socket-c/52086728#52086728", "title": "Send length and data through socket c++", "body": "<p>As far as the socket interface is concerned, you are not sending twice. The socket just takes everything you stuff in one end with one or more <code>send</code> calls and sends it out in its own time (I'm assuming you don't exceed the socket buffer with the first call, which is a fairly safe assumption). Similarly, you don't need to match your <code>recv</code> calls with the <code>send</code> calls. You could <code>recv</code> the whole lot at once and then break it up later, but really, no big gain to do so.</p>\n\n<p>So it's really a wash whether you pack the string first and then send it, or call <code>send</code> twice. The time and RAM necessary to create a new string with the length concatenated to the start is not going to be more efficient than just called <code>send</code> twice.</p>\n\n<p>However, you should definitely send the length as the <code>int</code> it comes in, not as a string. That way it will always occupy <code>sizeof(int)</code> bytes. Your buffer length of <code>10</code> will usually not be true, and result in reading off the end of the string. For instance:</p>\n\n<pre><code>send(sock, &amp;length, sizeof(length), 0);\n</code></pre>\n\n<p>and </p>\n\n<pre><code>recv(sock, &amp;length, sizeof(length), 0); //Receiving length\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9015927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BcHYA.jpg?s=128&g=1", "display_name": "Edixon Van Vliet", "link": "https://stackoverflow.com/users/9015927/edixon-van-vliet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1264, "favorite_count": 0, "accepted_answer_id": 52086728, "answer_count": 2, "score": -3, "last_activity_date": 1535581694, "creation_date": 1535579466, "last_edit_date": 1535579944, "question_id": 52086560, "link": "https://stackoverflow.com/questions/52086560/send-length-and-data-through-socket-c", "title": "Send length and data through socket c++", "body": "<p>So i'm currently working on a app that uses socket, for now everything is working, i just want to know if there is a more efficient way to send the length of the data and the data instead of sending twice. </p>\n\n<p>i.e: Sending everything in one string.</p>\n\n<pre><code>void SendPackage(const SOCKET sock, const std::string package)\n{\n    int length = package.lenth();\n\n    send(sock, std::to_string(length).c_str(), 10, 0);     //Buffer length is 10 assuming data length\n    send(sock, package.c_str(), length, 0);        //will never be greater than 9,999,999,999\n}\n\nvoid ReceivePackage(const SOCKET sock, std::string &amp;package, int bufferLength)\n{\n    std::vector&lt;char&gt; recvBuffer(10);\n    int length, bytesProcessed;\n\n    recv(sock, &amp;recvBuffer[0], 10, 0); //Receiving length\n    length = atoi(&amp;recvBuffer[0]);\n    recvBuffer.resize(length);\n\n    for (int i = 0; i &lt; length; i += bytesProcessed)\n    {\n        bytesProcessed = recv(sock, &amp;recvBuffer[0] + i, bufferLength, 0);\n        if (bytesProcessed &lt; 0) break;\n    }\n\n    package = &amp;recvBuffer[0];\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glsl", "opengl-3", "freetype"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10285959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c8ca38d86545bade6fb14d1a496831b?s=128&d=identicon&r=PG&f=1", "display_name": "cs.spathis", "link": "https://stackoverflow.com/users/10285959/cs-spathis"}, "is_accepted": false, "score": -1, "last_activity_date": 1535579936, "creation_date": 1535579936, "answer_id": 52086631, "question_id": 52086217, "link": "https://stackoverflow.com/questions/52086217/outline-fonts-with-true-type-and-opengl-core-3-3/52086631#52086631", "title": "Outline fonts with true type and opengl core (3.3)", "body": "<p>Simplest way you can do it is to draw each letter a second time with some scaling and a different color in the same position. Just make sure you draw them in the correct order (first the scaled up and then the normal one)</p>\n"}, {"comments": [{"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1535648737, "post_id": 52095795, "comment_id": 91155196, "body": "Did you test this code? I managed to get it to work, but characters are not aligned <a href=\"https://i.imgur.com/HNM82IA.png\" rel=\"nofollow noreferrer\">i.imgur.com/HNM82IA.png</a> Using other valid TTF than deja fonts crashes."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1535648932, "post_id": 52095795, "comment_id": 91155303, "body": "@jokoon Yes, I tested it, but not that part of the code. I tested the part which creates the bitmaps and the shader in an existing example in my test suite. I&#39;ll have a look on your issue."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1535650705, "post_id": 52095795, "comment_id": 91156130, "body": "@jokoon The setup of the <code>Character</code> structure has to be adapted, too. See the changes to the answer."}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 1, "creation_date": 1535652752, "post_id": 52095795, "comment_id": 91157042, "body": "Text is aligned now! Unfortunately it&#39;s crashing inside ftobjs.c at line 2955 when I load a TTF font I made..."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1535653028, "post_id": 52095795, "comment_id": 91157163, "body": "@jokoon I tested the code with <i>FreeSans.ttf</i>, <i>37043_SYMBOL.ttf</i> (greek letters) and <i>Pacifico.ttf</i> (script) and it worked fine."}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1535653897, "post_id": 52095795, "comment_id": 91157606, "body": "<a href=\"https://github.com/jokoon/eio/blob/master/__data__/fonts/mine/pixlim(2).ttf\" rel=\"nofollow noreferrer\">github.com/jokoon/eio/blob/master/__data__/fonts/mine/&hellip;</a> this will crash... Although I would not know why, and I guess you&#39;re not a freetype dev. It was generated with this online font generator: <a href=\"https://www.pentacom.jp/pentacom/bitfontmaker2/\" rel=\"nofollow noreferrer\">pentacom.jp/pentacom/bitfontmaker2</a>"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1535654820, "post_id": 52095795, "comment_id": 91158040, "body": "@jokoon <i>pixlim(2).ttf</i> seems to work for me. May be it depends on the version of the library. I&#39;m using version 2.9"}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1535657696, "post_id": 52095795, "comment_id": 91159483, "body": "<a href=\"https://i.imgur.com/qCRtE20.png\" rel=\"nofollow noreferrer\">i.imgur.com/qCRtE20.png</a> top text is rendering with SFML, same font, bottom is with opengl. I tried different values of the outline value, but the text looks ghostly and hollow... What do you think?"}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1535660420, "post_id": 52095795, "comment_id": 91160680, "body": "SFML is using FT_LOAD_FORCE_AUTOHINT, and I&#39;ve seen an other font shader do something like <code>fill = clamp(fill * 2.0, 0.0, 1.0);</code> <a href=\"https://wildfiregames.com/forum/index.php?/topic/17365-freetype-ttf-fonts-in-opengl/\" rel=\"nofollow noreferrer\">wildfiregames.com/forum/index.php?/topic/&hellip;</a> . In your screenshot, your result fill space seems good... I might be missing something... What outline value/font size are you using?"}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1535662129, "post_id": 52095795, "comment_id": 91161381, "body": "<a href=\"https://i.imgur.com/MmLuTHu.png\" rel=\"nofollow noreferrer\">i.imgur.com/MmLuTHu.png</a> pretty satisfied with the result, thanks! The detail is setting outline to 64 even at small size, not exactly sure why, but I guess it defines a radius. I did not use clamping. Last issue is kerning, as you can see a lot of outlines being cut off. I have no idea how to fix this, but the SFML code might help."}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1535662802, "post_id": 52095795, "comment_id": 91161651, "body": "Although it doesn&#39;t seem to be a kerning issue, it&#39;s just textures overriding alpha, for some reason..."}, {"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 1, "creation_date": 1535718371, "post_id": 52095795, "comment_id": 91181363, "body": "FYI if you want to display an example string with all letters look up a pangram like &quot;The quick brown fox jumps over the lazy dog&quot;."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 3, "last_activity_date": 1535654753, "last_edit_date": 1535654753, "creation_date": 1535628078, "answer_id": 52095795, "question_id": 52086217, "link": "https://stackoverflow.com/questions/52086217/outline-fonts-with-true-type-and-opengl-core-3-3/52095795#52095795", "title": "Outline fonts with true type and opengl core (3.3)", "body": "<p>What you want to do is not that easy. The first miss understanding is that <a href=\"https://www.freetype.org/freetype2/docs/reference/ft2-glyph_management.html\" rel=\"nofollow noreferrer\"><code>FT_Glyph_To_Bitmap</code></a> won't create 2 channels, one for the stroke outlines and on for the filled body, as you expected.<br/>\nYou have to create 2 bitmaps from the glyph and you have to merge them manually to one bitmap with 2 channels.</p>\n\n<p>An issue is, that the bitmaps won't even have the same size. The \"outline\" bitmap will be slightly taller, then the \"filled\" one.</p>\n\n<p>First create the outline bitmap:</p>\n\n<pre><code>FT_Error err_code = FT_Load_Char( face, i, FT_LOAD_NO_BITMAP | FT_LOAD_TARGET_NORMAL );\nif ( err_code != 0 )\n{\n  // error handling\n}\n\nFT_Glyph glyphDescStroke;\nerr_code = FT_Get_Glyph( face-&gt;glyph, &amp;glyphDescStroke );\n\nstatic double outlineThickness = 2.0;\nFT_Stroker_Set( stroker, static_cast&lt;FT_Fixed&gt;(outlineThickness * static_cast&lt;float&gt;(1 &lt;&lt; 6)), FT_STROKER_LINECAP_ROUND, FT_STROKER_LINEJOIN_ROUND, 0 );\nif ( err_code == 0 )\n  err_code = FT_Glyph_Stroke( &amp;glyphDescStroke, stroker, true );\n\nif ( err_code == 0 )\n  err_code = FT_Glyph_To_Bitmap( &amp;glyphDescStroke, FT_RENDER_MODE_NORMAL, 0, 1);\n\nFT_BitmapGlyph glyph_bitmap;\nFT_Bitmap *bitmap_stroke = nullptr;\nif ( err_code == 0 )\n{\n    glyph_bitmap  = (FT_BitmapGlyph)glyphDescStroke;\n    bitmap_stroke = &amp;glyph_bitmap-&gt;bitmap;\n}\n</code></pre>\n\n<p>Create a temporary buffer with 2 color channels and copy the outline bitmap to the 2nd color channel of the buffer:</p>\n\n<pre><code>#include &lt;vector&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>unsigned int cx = 0, cy = 0, ox = 0, oy = 0;\n\nstd::vector&lt;unsigned char&gt; buffer\nif ( error_code == 0 &amp;&amp; bitmap_stroke )\n{\n    cx = bitmap_stroke-&gt;width;\n    cy = bitmap_stroke-&gt;rows;\n    ox = glyph_bitmap-&gt;left;\n    oy = glyph_bitmap-&gt;top;\n\n    buffer = std::vector&lt;unsigned char&gt;(cx * cy * 2, 0); // * 2 -&gt; 2 color channels (red and green)\n    for ( unsigned int i = 0; i &lt; cx * cy; ++ i)\n        buffer[i*2 + 1] = bitmap_stroke-&gt;buffer[i];      // + 1 -&gt; 2nd color channel\n}\n\nFT_Done_Glyph( glyphDescStroke );\n</code></pre>\n\n<p>Create the \"filled\" bitmap:</p>\n\n<pre><code>FT_Glyph glyphDescFill;\nerr_code = FT_Get_Glyph( face-&gt;glyph, &amp;glyphDescFill );\nif ( err_code == 0 )\n    err_code = FT_Glyph_To_Bitmap( &amp;glyphDescFill, FT_RENDER_MODE_NORMAL, 0, 1);\n\nFT_Bitmap *bitmap_fill = nullptr;\nif ( err_code == 0 )\n{\n    FT_BitmapGlyph glyph_bitmap = (FT_BitmapGlyph)glyphDescFill;\n    bitmap_fill = &amp;glyph_bitmap-&gt;bitmap;\n}\n</code></pre>\n\n<p>Add the \"filled\" bitmap to the 1st color channel of the buffer:</p>\n\n<pre><code>if ( err_code == 0 &amp;&amp; bitmap_fill )\n{\n    unsigned int cx_fill  = bitmap_fill-&gt;width;\n    unsigned int cy_fill  = bitmap_fill-&gt;rows;\n    unsigned int offset_x = (cx - cx_fill) / 2; // offset because the bitmap my be smaller, \n    unsigned int offset_y = (cy - cy_fill) / 2; // then the former\n\n    for ( unsigned int y = 0; y &lt; cy_fill; ++ y )\n    {\n        for ( unsigned int x = 0; x &lt; cx_fill; ++ x )\n        {\n            unsigned int i_source = y * cx_fill + x;\n            unsigned int i_target = (y + offset_y) * cx + x + offset_x;\n            buffer[i_target*2 + 0] = bitmap_fill-&gt;buffer[i_source]; // + 0 -&gt; 1st color channel\n        }\n    }\n}\n\nFT_Done_Glyph( glyphDescFill );\n</code></pre>\n\n<p>When you load the buffer to the texture object, the you have toe set the <code>GL_UNPACK_ALIGNMENT</code> parameter, because the glyph bitmap <code>buffer</code> is tightly packed and a row  of the bitmap may not be aligned to 4 bytes. See <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glPixelStore.xhtml\" rel=\"nofollow noreferrer\"><code>glPixelStore</code></a>. </p>\n\n<pre><code>GLuint texture;\nglGenTextures(1, &amp;texture);\n\nglBindTexture(GL_TEXTURE_2D, texture);\n\nglPixelStore( GL_UNPACK_ALIGNMENT, 1 ); // of course 2 will work too (2 channels)     \nglTexImage2D( \n    GL_TEXTURE_2D,\n    0,\n    GL_RG8, // 2 channels each with 8 bits\n    cx,\n    cy,\n    GL_RG,  // \"GL_RG\" - \"GL_RG16\" is not a valid format\n    GL_UNSIGNED_BYTE,\n    buffer.data() );\nglPixelStore( GL_UNPACK_ALIGNMENT, 4 );\n\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n</code></pre>\n\n<p>Add the character data to the data structure: </p>\n\n<pre><code>Character character = {\n    texture,\n    glm::ivec2(cx, cy),\n    glm::ivec2(ox, oy),\n    face-&gt;glyph-&gt;advance.x\n};\nCharacters.insert(std::pair&lt;GLchar, Character&gt;(c, character));\n</code></pre>\n\n<p>The GLSL code, which draw a glyph with a separate color for the outline and the filled interior, which uses the GLSL function <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/mix.xhtml\" rel=\"nofollow noreferrer\"><code>mix</code></a> may look like this:</p>\n\n<pre><code>#version 330 core\nin vec2 TexCoords;\nout vec4 color;\n\nuniform sampler2D text;\nuniform vec3 textColor;\nuniform vec3 outlinecolor;\n\nvoid main()\n{  \n    vec3 fill_col    = vec3(0.0, 0.0, 1.0); // e.g blue\n    vec3 outline_col = vec3(1.0, 0.0, 0.0); // e.g red\n\n    vec2 tex = texture2D(text, TexCoords).rg;\n    float fill    = tex.r;\n    float outline = tex.g;\n\n    float alpha    = max( fill, outline );\n    vec3 mix_color = mix( mix(vec3(0.0), fill_col, fill), outline_col, outline );\n\n    color = vec4(mix_color, alpha);\n}\n</code></pre>\n\n<hr>\n\n<p>Preview with <em>pixlim(2).ttf</em> font, from the repository which you linked in the comments:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vOMW0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vOMW0.png\" alt=\"text\"></a></p>\n"}], "owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1039, "favorite_count": 2, "accepted_answer_id": 52095795, "answer_count": 2, "score": 2, "last_activity_date": 1535654753, "creation_date": 1535577619, "last_edit_date": 1535629794, "question_id": 52086217, "link": "https://stackoverflow.com/questions/52086217/outline-fonts-with-true-type-and-opengl-core-3-3", "title": "Outline fonts with true type and opengl core (3.3)", "body": "<p>I used the text rendering example from learnopengl.com here:</p>\n\n<p><a href=\"https://learnopengl.com/In-Practice/Text-Rendering\" rel=\"nofollow noreferrer\">https://learnopengl.com/In-Practice/Text-Rendering</a></p>\n\n<p>I'm trying to change this example to render an outline, but I'm a little lost between all functions to call, and the shader code seems a little tricky.</p>\n\n<p>Here is my attempt:</p>\n\n<pre><code>void inittext_stroked() {\n    cout &lt;&lt; \"initializing text, stroken\" &lt;&lt; endl;\n\n    glEnable(GL_BLEND);\n    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n\n    // Compile and setup the shader\n    shader = Shader(\"text.vs\", \"text.fs\");\n        //Shader shader(\"text.vs\", \"text.fs\");\n\n    glm::mat4 projection = glm::ortho(0.0f, static_cast&lt;GLfloat&gt;(WIDTH), 0.0f, static_cast&lt;GLfloat&gt;(HEIGHT));\n    shader.use();\n    //shader.\n    glUniformMatrix4fv(glGetUniformLocation(shader.ID, \"projection\"), 1, GL_FALSE, glm::value_ptr(projection));\n\n    // FreeType\n    FT_Library ft;\n    // All functions return a value different than 0 whenever an error occurred\n    if (FT_Init_FreeType(&amp;ft))\n        std::cout &lt;&lt; \"ERROR::FREETYPE: Could not init FreeType Library\" &lt;&lt; std::endl;\n\n    string fontfile = base::config.getstr(\"fontfile\");\n    cout &lt;&lt; fontfile &lt;&lt; endl;\n    // Load font as face\n    FT_Face face;\n    // if (FT_New_Face(ft, \"DejaVuSansMono.ttf\", 0, &amp;face))\n    if (FT_New_Face(ft, fontfile.c_str(), 0, &amp;face))\n        std::cout &lt;&lt; \"ERROR::FREETYPE: Failed to load font \" &lt;&lt; fontfile &lt;&lt; std::endl;\n\n    // stroke, added \n    // void * m_stroker;\n    FT_Stroker stroker;\n    if (FT_Stroker_New(static_cast&lt;FT_Library&gt;(ft), &amp;stroker) != 0)\n    {\n        cerr &lt;&lt; \"Failed to load font \\\"\" &lt;&lt; fontfile &lt;&lt; \"\\\" (failed to create the stroker)\" &lt;&lt; std::endl;\n        FT_Done_Face(face);\n        return;\n    }\n    // m_stroker = stroker;\n    // m_face = face;\n    // end added\n\n\n    // Set size to load glyphs as\n    int fontsize;\n    //cfg.SET(fontsize);\n    // fontsize = 16;\n    fontsize = base::config.getvar&lt;int&gt;(\"fontsize\");\n\n\n    FT_Set_Pixel_Sizes(face, 0, fontsize);\n    //FT_Set_Pixel_Sizes(face, 0, 48);\n\n    // Disable byte-alignment restriction\n    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);\n\n    // Load first 128 characters of ASCII set\n    for (GLubyte c = 0; c &lt; 128; c++)\n    {\n        // Load character glyph \n\n        if (FT_Load_Char(face, c,\n            //FT_LOAD_RENDER|\n            FT_LOAD_NO_BITMAP|FT_LOAD_TARGET_NORMAL\n\n        )) // modified, added FT_LOAD_NO_BITMAP (also 2 more so 3)\n        {\n            std::cout &lt;&lt; \"ERROR::FREETYTPE: Failed to load Glyph\" &lt;&lt; std::endl;\n            continue;\n        }\n        // added outlining _________________\n        float outlineThickness = 10.0f;\n        // Retrieve the glyph\n        FT_Glyph glyphDesc;\n        if (FT_Get_Glyph(face-&gt;glyph, &amp;glyphDesc) != 0)\n        {\n            cerr &lt;&lt; \"bad return from FT_Get_Glyph\" &lt;&lt; endl;\n            return;\n        }\n\n        {\n            // FT_Stroker stroker = static_cast&lt;FT_Stroker&gt;(m_stroker);\n\n            FT_Stroker_Set(stroker, static_cast&lt;FT_Fixed&gt;(outlineThickness * static_cast&lt;float&gt;(1 &lt;&lt; 6)), FT_STROKER_LINECAP_ROUND, FT_STROKER_LINEJOIN_ROUND, 0);\n            FT_Glyph_Stroke(&amp;glyphDesc, stroker, true);\n        }\n\n        FT_Glyph_To_Bitmap(&amp;glyphDesc, FT_RENDER_MODE_NORMAL, 0, 1);\n        // FT_Bitmap&amp; bitmap = reinterpret_cast&lt;FT_BitmapGlyph&gt;(glyphDesc)-&gt;bitmap;\n\n        // added end _________________\n\n        // Generate texture\n        GLuint texture;\n        glGenTextures(1, &amp;texture);\n        glBindTexture(GL_TEXTURE_2D, texture);\n        glTexImage2D(\n            GL_TEXTURE_2D,\n            0,\n                //GL_RED,\n            GL_RG16,\n            face-&gt;glyph-&gt;bitmap.width,\n            face-&gt;glyph-&gt;bitmap.rows,\n            0,\n                //GL_RED,\n            GL_RG16,\n            GL_UNSIGNED_BYTE,\n            face-&gt;glyph-&gt;bitmap.buffer\n        );\n        // Set texture options\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n        // Now store character for later use\n        Character character = {\n            texture,\n            glm::ivec2(face-&gt;glyph-&gt;bitmap.width, face-&gt;glyph-&gt;bitmap.rows),\n            glm::ivec2(face-&gt;glyph-&gt;bitmap_left, face-&gt;glyph-&gt;bitmap_top),\n            face-&gt;glyph-&gt;advance.x\n        };\n        Characters.insert(std::pair&lt;GLchar, Character&gt;(c, character));\n    }\n    glBindTexture(GL_TEXTURE_2D, 0);\n    // Destroy FreeType once we're finished\n    FT_Done_Face(face);\n    FT_Done_FreeType(ft);\n\n\n    // Configure VAO/VBO for texture quads\n    glGenVertexArrays(1, &amp;VAO_text);\n    glGenBuffers(1, &amp;VBO_text);\n    glBindVertexArray(VAO_text);\n    glBindBuffer(GL_ARRAY_BUFFER, VBO_text);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(GLfloat) * 6 * 4, NULL, GL_DYNAMIC_DRAW);\n    glEnableVertexAttribArray(0);\n    glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 4 * sizeof(GLfloat), 0);\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n    glBindVertexArray(0);\n\n\n    texts[\"popo\"] = \"haha\";\n}\n</code></pre>\n\n<p>and the shader code:</p>\n\n<pre><code>#version 330 core\nin vec2 TexCoords;\nout vec4 color;\n\nuniform sampler2D text;\nuniform vec3 textColor;\nuniform vec3 outlinecolor;\n\nvoid main()\n{   \n    // old shader code:\n    // vec4 sampled = vec4(1.0, 1.0, 1.0, texture(text, TexCoords).r);\n    // color = vec4(textColor, 1.0) * sampled;\n\n    vec2 tex = texture2D(text, TexCoords).rg;\n    color = vec4(textColor, tex.g)\n    +vec4(outlinecolor, tex.g)\n    ;\n}  \n</code></pre>\n\n<p>As you can see I used GL_RG16 instead of RG_RED to have one channel for the fill and one for the outline. I don't understand all those freetype calls, and I'm not familiar with the notion of face, glyph and stroker, and I'm not sure my shader code is adequate either.</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1535578206, "post_id": 52086186, "comment_id": 91122987, "body": "Are you sure, that there is no whitespace characters on this line (spaces/tabs)?"}, {"owner": {"reputation": 7700, "user_id": 126027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d083341daacfb4942b835e3f6f2fd804?s=128&d=identicon&r=PG", "display_name": "TheUndeadFish", "link": "https://stackoverflow.com/users/126027/theundeadfish"}, "edited": false, "score": 3, "creation_date": 1535578495, "post_id": 52086186, "comment_id": 91123090, "body": "I googled &quot;visual studio cursor line position&quot; and came up with <a href=\"https://stackoverflow.com/questions/34501511/visual-studio-2015-arbitrary-cursor-position-on-empty-line\" title=\"visual studio 2015 arbitrary cursor position on empty line\">stackoverflow.com/questions/34501511/&hellip;</a> with an answer regarding an option called Enable virtual space. Could that be your issue?"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1535579633, "post_id": 52086186, "comment_id": 91123454, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34501511/visual-studio-2015-arbitrary-cursor-position-on-empty-line\">Visual Studio 2015 - arbitrary cursor position on empty line</a>"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1535579688, "post_id": 52086186, "comment_id": 91123477, "body": "I just tested this in Visual Studio and it appears the linked question has the fix for this. I could see this having some use when trying to draw or explain something but not for much else. Note of course the duplicate mentions to change the C# setting but you&#39;re writing C++ so you&#39;d obviously change the C++ one"}, {"owner": {"reputation": 367, "user_id": 5025254, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x8pDIEkRT8M/AAAAAAAAAAI/AAAAAAAAABY/YD-dC7q-5Es/photo.jpg?sz=128", "display_name": "Alexander Shubert", "link": "https://stackoverflow.com/users/5025254/alexander-shubert"}, "edited": false, "score": 0, "creation_date": 1535580807, "post_id": 52086186, "comment_id": 91123808, "body": "Yes! Thabk you!"}], "owner": {"reputation": 367, "user_id": 5025254, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x8pDIEkRT8M/AAAAAAAAAAI/AAAAAAAAABY/YD-dC7q-5Es/photo.jpg?sz=128", "display_name": "Alexander Shubert", "link": "https://stackoverflow.com/users/5025254/alexander-shubert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535577396, "creation_date": 1535577396, "question_id": 52086186, "link": "https://stackoverflow.com/questions/52086186/visual-studio-2017-cursor-odd-behaviour", "title": "Visual Studio 2017 cursor odd behaviour", "body": "<p>I might've changed some settings in Visual Studio, but now if I write code like this and then write the comment (for <code>Elem elem</code>) and move cursor down, it moves to the same column as it was on the previous line (rather than right after <code>next</code>;)</p>\n\n<pre><code>#include &lt;string&gt;\nusing std::string;\n\ntypedef string Elem;\n\nclass CircleListNode {\n private:\n  Elem elem; // the element of the list\n  CircleListNode* next;                |//&lt;-where cursor moves \n\n public:\n  CircleListNode();\n  ~CircleListNode();                        \n};\n</code></pre>\n\n<p>How would I change it?</p>\n"}, {"tags": ["c++", "virtual", "delete-operator"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 9, "creation_date": 1535576978, "post_id": 52086094, "comment_id": 91122539, "body": "delete twice the same non null pointer is Undefined behavior (UB)."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1535577025, "post_id": 52086094, "comment_id": 91122554, "body": "You are <code>delete</code>ing <code>derived</code> twice. Don&#39;t do that."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1535577040, "post_id": 52086094, "comment_id": 91122561, "body": "<code>derived-&gt;x</code> is also UB once deleted."}, {"owner": {"reputation": 28136, "user_id": 3906760, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/289d797f9cfa60788698c79e8bf25241?s=128&d=identicon&r=PG&f=1", "display_name": "MrTux", "link": "https://stackoverflow.com/users/3906760/mrtux"}, "edited": false, "score": 0, "creation_date": 1535577156, "post_id": 52086094, "comment_id": 91122604, "body": "You are deleting an already deleted object."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1535577228, "post_id": 52086094, "comment_id": 91122636, "body": "You cannot eat what has already been consumed....wait...there is a movie for that."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1535577342, "post_id": 52086094, "comment_id": 91122677, "body": "What you&#39;re overlooking is that <code>delete derived</code> does more than just call <code>Derived::operator delete()</code>.  It also runs the destructor.  (Your debug output clearly shows this.)  Even though your <code>operator delete()</code> implementation doesn&#39;t make the memory inaccessible, doing anything further with <code>derived</code> is forbidden because its destructor has already run."}, {"owner": {"reputation": 9, "user_id": 10291768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd3cc4e1bb1973c1d19af363888957fa?s=128&d=identicon&r=PG", "display_name": "Lord", "link": "https://stackoverflow.com/users/10291768/lord"}, "edited": false, "score": 0, "creation_date": 1535580624, "post_id": 52086094, "comment_id": 91123746, "body": "Indeed the problem was that, once called the destructor, the virtual table seems to stop working and does not take into account the class hierarchy. I have made a test code to verify it and that happens with an explicit call to the destructor: <a href=\"https://www.onlinegdb.com/SkHVK9EwX\" rel=\"nofollow noreferrer\">onlinegdb.com/SkHVK9EwX</a> Thank you very much"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1535579223, "post_id": 52086123, "comment_id": 91123337, "body": "To be picky, <code>delete</code> is not a dereference operation. The standard explicitly says that deleting such a pointer is UB (with no diagnostic required)"}, {"owner": {"reputation": 9, "user_id": 10291768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd3cc4e1bb1973c1d19af363888957fa?s=128&d=identicon&r=PG", "display_name": "Lord", "link": "https://stackoverflow.com/users/10291768/lord"}, "edited": false, "score": 0, "creation_date": 1535579929, "post_id": 52086123, "comment_id": 91123555, "body": "So even if the delete operator is overloaded and the memory is not released, nobody assures us that this object will continue to exist?"}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 5, "last_activity_date": 1535577016, "creation_date": 1535577016, "answer_id": 52086123, "question_id": 52086094, "link": "https://stackoverflow.com/questions/52086094/c-custom-delete-operator-does-not-work-well/52086123#52086123", "title": "C ++ custom delete operator does not work well?", "body": "<pre><code>Derived *derived = new Derived();\nprintf(\"1) delete derived (%i)\\r\\n\", ((Derived*)derived)-&gt;x);\ndelete derived;\nprintf(\"2) delete derived (%i)\\r\\n\", ((Derived*)derived)-&gt;x);\ndelete derived;\n</code></pre>\n\n<p>The above code is incorrect, and is invoking undefined behavior.  You can only delete an object once; above you are (attempting to) delete the same object twice.  The problem is that after the first call to delete, <code>derived</code> is now a dangling pointer (i.e. it's not pointing to a valid object anymore) and it's an error to try to dereference it in any way (including calling <code>delete</code> on it).</p>\n"}], "owner": {"reputation": 9, "user_id": 10291768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd3cc4e1bb1973c1d19af363888957fa?s=128&d=identicon&r=PG", "display_name": "Lord", "link": "https://stackoverflow.com/users/10291768/lord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1535577047, "creation_date": 1535576872, "last_edit_date": 1535577047, "question_id": 52086094, "link": "https://stackoverflow.com/questions/52086094/c-custom-delete-operator-does-not-work-well", "title": "C ++ custom delete operator does not work well?", "body": "<p>First of all to say that I am Spanish and my English is really bad, I used a translator with what I apologize for looking like an illiterate :)</p>\n\n<hr>\n\n<p>I have not played c ++ for years and I have forgotten so much that maybe the doubt I have or the possible failure is really something basic in the language.</p>\n\n<p>I have written a small code to test the overhead of the delete operator in c ++ with a virtual destructor and I have found that it only works correctly the first time that delete is called.</p>\n\n<p>The code is here (it's a page that allows you to write code online and execute it, I've tested it in visual studio and gcc and it's exactly the same): <a href=\"https://onlinegdb.com/SkiI1dNDQ\" rel=\"nofollow noreferrer\">https://onlinegdb.com/SkiI1dNDQ</a></p>\n\n<p>Could someone tell me why this is happening? Only the first time works well and the second one is not going well</p>\n\n<p>I put the code here also and the result it gives:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nclass Base\n{\npublic:\n    virtual ~Base() { printf(\"~Base\\r\\n\"); }\n    void operator delete(void *m) { printf(\"delete Base\\r\\n\"); }\n};\nclass Derived : public Base\n{\npublic:\n    Derived() { x = 1; }\n    ~Derived() { printf(\"~Derived\\r\\n\"); }\n    void operator delete(void *m) { printf(\"delete Derived\\r\\n\"); }\n    int x;\n};\n\nint main()\n{\n    Derived *derived = new Derived();\n    printf(\"1) delete derived (%i)\\r\\n\", ((Derived*)derived)-&gt;x);\n    delete derived;\n    printf(\"2) delete derived (%i)\\r\\n\", ((Derived*)derived)-&gt;x);\n    delete derived;\n    return 0;\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>1) delete derived (1)\n~Derived\n~Base\ndelete Derived\n2) delete derived (1)\n~Base\ndelete Base\n</code></pre>\n\n<p>Now, if we remove the \"virtual\" class called \"Base\" everything is perfect, logically whenever we call the delete with \"Derived\" (the code is ready to remove the virtual and nothing fails). To execute it: <a href=\"https://onlinegdb.com/SkXkgdVP7\" rel=\"nofollow noreferrer\">https://onlinegdb.com/SkXkgdVP7</a></p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "linux", "clang", "clang-tidy"], "answers": [{"tags": [], "owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "is_accepted": false, "score": 2, "last_activity_date": 1535580220, "creation_date": 1535580220, "answer_id": 52086680, "question_id": 52085962, "link": "https://stackoverflow.com/questions/52085962/do-clang-vs-clang-tidy-detect-the-same-warnings-and-errors/52086680#52086680", "title": "Do Clang vs Clang tidy detect the same warnings and errors ?", "body": "<p>Yes, their is a difference and a common ground. Let me start with the common ground: both of them are part of the LLVM project, which is know to provide libraries and executables build on top of it.</p>\n\n<p>In this case, the clang compiler uses the frontend to create an AST and creates the compiler warnings at that time. It is extended with optimizations and codegen.</p>\n\n<p>Clang-tidy uses the same frontend and than runs AST matchers on it to detect issues.</p>\n\n<p>In general, compiler warnings are cheap to check and contain (almost) no false positives. Clang-tidy has the expensive checks or the ones with more risk on false positives. The later also contains less common checks, or stylistic checks.</p>\n\n<p>Some checks are indeed similar, for example the missing override, however, tidy catches all cases, where the warning is suppressed when override isn't used in the file.</p>\n\n<p>In general, I like to enable all warnings and disable the ones that should be fixed later on. This will be checked as side effect when compiling. Clang-tidy usually get ran later in the progress (precommit or CI).</p>\n"}], "owner": {"reputation": 31, "user_id": 10291903, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-685GElAa0H8/AAAAAAAAAAI/AAAAAAAAC-s/VccsyqjrWTo/photo.jpg?sz=128", "display_name": "Rig&#243; Zolt&#225;n", "link": "https://stackoverflow.com/users/10291903/rig%c3%b3-zolt%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1204, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1535580220, "creation_date": 1535576182, "question_id": 52085962, "link": "https://stackoverflow.com/questions/52085962/do-clang-vs-clang-tidy-detect-the-same-warnings-and-errors", "title": "Do Clang vs Clang tidy detect the same warnings and errors ?", "body": "<p>As far as I know the Clan-tidy can do these checks  <a href=\"https://clang.llvm.org/extra/clang-tidy/checks/list.html\" rel=\"nofollow noreferrer\">https://clang.llvm.org/extra/clang-tidy/checks/list.html</a>\nover and above default checks set (clang-analyser)\nand Clang can also detect errors and warnings\n<a href=\"https://clang.llvm.org/docs/DiagnosticsReference.html\" rel=\"nofollow noreferrer\">https://clang.llvm.org/docs/DiagnosticsReference.html</a>\nCan they detect different list of errors or warnings ?<br>\nDoes the Clang-Tidy use Clang in background ? \nIs there any connection between both ?   </p>\n"}, {"tags": ["c++", "winapi", "gdi"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1535575441, "post_id": 52085740, "comment_id": 91121895, "body": "The standard C++ language has no facilities for font creation; it is OS or platform dependent.  Please edit your post with the GUI framework or OS that you are using."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1535575582, "post_id": 52085740, "comment_id": 91121941, "body": "Also, edit your post with <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, in which you create and use the font."}, {"owner": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "edited": false, "score": 0, "creation_date": 1535575754, "post_id": 52085740, "comment_id": 91122027, "body": "CreateFontA is a Win32 function."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1535576087, "post_id": 52085740, "comment_id": 91122168, "body": "Come on guys this is a decent question. I tried to answer and realized I forgot how to do it."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1535576164, "post_id": 52085740, "comment_id": 91122202, "body": "Start by reading the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/wingdi/nf-wingdi-createfonta\" rel=\"nofollow noreferrer\">documentation</a>. The Height and Width are expressed in <b>logical units</b>, not in <b>pixels</b>. You have to calculate the units yourself. The documentation tells you how."}, {"owner": {"reputation": 137, "user_id": 1913644, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/61c35b42ee127d2fd926a7366802cd8d?s=128&d=identicon&r=PG", "display_name": "user1913644", "link": "https://stackoverflow.com/users/1913644/user1913644"}, "edited": false, "score": 0, "creation_date": 1535576518, "post_id": 52085740, "comment_id": 91122356, "body": "Damn, sorry for asking something that I genuinly didn&#39;t know.. I guess it was a dumb question. I obviously saw the documentation, and I asked here because I didn&#39;t understand how this units worked."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1535576569, "post_id": 52085740, "comment_id": 91122371, "body": "@RemyLebeau Which units are supposed to be used to specify <code>PointSize</code> in this context?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1535576863, "post_id": 52085740, "comment_id": 91122493, "body": "Side note: This is one area in which MFC honestly did make a useful contribution. Even though the difference isn&#39;t huge, <code>CreatePointFont</code> is quite a bit easier to use."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1535579708, "post_id": 52086418, "comment_id": 91123485, "body": "Also see <a href=\"https://docs.microsoft.com/en-us/windows/desktop/learnwin32/dpi-and-device-independent-pixels\" rel=\"nofollow noreferrer\">DPI and Device-Independent Pixels</a> for a detailed explanation of units and pixels in different screen resolutions (72 PPI is not the only possibility)"}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1535591412, "post_id": 52086418, "comment_id": 91126159, "body": "You are thinking of the traditional value of 96 pixels per inch, not the 72 points per inch. The former varies but as MS uses the term the latter does not."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 3, "last_activity_date": 1535578992, "last_edit_date": 1535578992, "creation_date": 1535578687, "answer_id": 52086418, "question_id": 52085740, "link": "https://stackoverflow.com/questions/52085740/how-to-set-font-size-using-createfonta/52086418#52086418", "title": "How to set font size using CreateFontA?", "body": "<p>The answer is (or at least can be) somewhat non-trivial.</p>\n\n<p>First of all, there are two separate heights you can choose from: the height of the characters themselves, or the height of cell in which a \"normal\" character lives (but, for example, letters with descenders like <code>y</code> will usually extend outside the cell). So, for the same size of font, the character cell will usually be slightly larger than the size of the characters themselves.</p>\n\n<p>To choose the font based on the character <em>cell</em> height, you pass a positive number for the height. To choose based on the height of the characters themselves, you pass a negative number (and its absolute value will be used as the height).</p>\n\n<p>So let's assume that you want the characters <em>themselves</em> to be 11 points tall (so we'll need to pass a negative number for the height), and that you want the width to be the default for the font at hand. Let's also assume that you're dealing with MM_TEXT mode, where a logical unit is equal to one pixel.</p>\n\n<p>As Windows uses the term, one point is 1/72<sup>nd</sup> of an inch (note: 72 points to the inch isn't universal--for example, some use 72.72 points to the inch instead--feel free to modify the following code if you need to comply with a different definition of a \"point\").</p>\n\n<p>So, to compute the size, we can start by retrieving the number of pixels per inch (vertically) on the screen, then compute the number of pixels for the right number of points:</p>\n\n<pre><code>static const int points_per_inch = 72;\nint pixels_per_inch = GetDeviceCaps(hDC, LOGPIXELSY);\nint pixels_height = - (points * pixels_per_inch / points_per_inch);\n</code></pre>\n\n<p>[Microsoft has a <code>MulDiv</code> function to assure against an intermediate value overflowing in that computation, but unless you're using a 16-bit machine or a truly immense font, that's mostly a solution in search of a problem.]</p>\n\n<p>Since we want the default width, we'll pass 0 for the width.</p>\n\n<p>So, we end up with something like this:</p>\n\n<pre><code>HFONT font = CreateFont(pixels_height, 0, // size\n                        0, 0, 0, // normal orientation\n                        FW_NORMAL,   // normal weight--e.g., bold would be FW_BOLD\n                        false, false, false, // not italic, underlined or strike out\n                        DEFAULT_CHARSET,\n                        OUT_OUTLINE_PRECIS, // select only outline (not bitmap) fonts\n                        CLIP_DEFAULT_PRECIS,\n                        CLEARTYPE_QUALITY,\n                        VARIABLE_PITCH | FF_SWISS,\n                        \"Arial\");\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 1913644, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/61c35b42ee127d2fd926a7366802cd8d?s=128&d=identicon&r=PG", "display_name": "user1913644", "link": "https://stackoverflow.com/users/1913644/user1913644"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1100, "favorite_count": 0, "closed_date": 1535606342, "answer_count": 1, "score": -1, "last_activity_date": 1535578992, "creation_date": 1535575139, "last_edit_date": 1535576012, "question_id": 52085740, "link": "https://stackoverflow.com/questions/52085740/how-to-set-font-size-using-createfonta", "closed_reason": "Needs details or clarity", "title": "How to set font size using CreateFontA?", "body": "<p>I'm not used to <code>CreateFontA</code>, but I'm doing a mod for a game that uses this function and I have to use it too.</p>\n\n<p>I managed to change the font, but I'm having some trouble to change font size.</p>\n\n<p>I want to use font size 11px, how can I achieve this? I tried just setting width and height to 11 but it went terrible wrong. </p>\n"}, {"tags": ["c++", "c++14", "c++17"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 6, "creation_date": 1535574371, "post_id": 52085547, "comment_id": 91121440, "body": "Are you sure <code>std::any</code> is what you want and not like <code>std::variant&lt;short,int,long,double,bool&gt;</code>?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 4, "creation_date": 1535574407, "post_id": 52085547, "comment_id": 91121454, "body": "I think an effective answer to this is likely to involve taking a broader look at your architecture. How and why are you using <code>std::any</code> so much in the first place? How are you using the result, when you don&#39;t know ahead of time what it is or what it will do/support?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1535574443, "post_id": 52085547, "comment_id": 91121468, "body": "This seems like you are wanting to remove type-checking from a strongly-typed language. I&#39;d question a design that did this."}, {"owner": {"reputation": 389, "user_id": 1008943, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/l3Ert.png?s=128&g=1", "display_name": "markf78", "link": "https://stackoverflow.com/users/1008943/markf78"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1535574634, "post_id": 52085547, "comment_id": 91121558, "body": "@JerryCoffin trying to build a test framework that can accept custom configuration files. I can&#39;t really predict what types will be needed etc."}, {"owner": {"reputation": 389, "user_id": 1008943, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/l3Ert.png?s=128&g=1", "display_name": "markf78", "link": "https://stackoverflow.com/users/1008943/markf78"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1535574768, "post_id": 52085547, "comment_id": 91121611, "body": "@DietmarK&#252;hl This sounds intriguing. Could you please provide a little more details?"}, {"owner": {"reputation": 389, "user_id": 1008943, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/l3Ert.png?s=128&g=1", "display_name": "markf78", "link": "https://stackoverflow.com/users/1008943/markf78"}, "edited": false, "score": 0, "creation_date": 1535575090, "post_id": 52085547, "comment_id": 91121751, "body": "@NeilButterworth I actually think of it the opposite way. I like that a std::any treats types explicitly.. an int is an int, a short is a short, etc. However, when its time to retrieve the data and act on it in a certain way based on the datatype, I need a common way to get at it without writing large quantities of the same code."}], "answers": [{"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1535575167, "post_id": 52085696, "comment_id": 91121795, "body": "And now for multiple any&#39;s :P"}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1535575352, "post_id": 52085696, "comment_id": 91121866, "body": "<code>for(auto &amp;&amp;t: {std::any{42}, std::any{3.14}, std::any{&quot;lo&quot;}, std::any{}}) try_visit&lt;short, int, double, bool, long&gt;(std::move(t));</code> 8-)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1535575526, "post_id": 52085696, "comment_id": 91121922, "body": "He meant <code>try_visit&lt;short, int, double, bool, long&gt;(std::any{42}, std::any{3.14});</code>."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1535575593, "post_id": 52085696, "comment_id": 91121947, "body": "Your recursion doesn&#39;t quite look right.  Ie, I don&#39;t think your code compiles."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1535575805, "post_id": 52085696, "comment_id": 91122048, "body": "@SombreroChicken Would need an extra struct to be defined. &gt;_&gt;"}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1535576026, "post_id": 52085696, "comment_id": 91122137, "body": "@Yakk-AdamNevraumont It&#39;s obviously compilable."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1535577483, "post_id": 52085696, "comment_id": 91122711, "body": "Yes, it&#39;s easily compilable by a simple obvious change."}], "tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 1, "last_activity_date": 1535576008, "last_edit_date": 1535576008, "creation_date": 1535574911, "answer_id": 52085696, "question_id": 52085547, "link": "https://stackoverflow.com/questions/52085547/avoid-writing-the-same-repetitive-type-checking-code-with-stdany/52085696#52085696", "title": "avoid writing the same repetitive type-checking code with std::any", "body": "<p>Well, if you're sure you need such a broad range stored in <code>any</code>...</p>\n\n<pre><code>template&lt;typename T&gt; void visit(T &amp;&amp;t) { std::cout &lt;&lt; \"Hi \" &lt;&lt; t &lt;&lt; \"!\\n\"; }\n\nvoid try_visit(std::any &amp;&amp;) { std::cout &lt;&lt; \"Unknown type\\n\"; }\n\ntemplate&lt;typename T, typename... Ts&gt; void try_visit(std::any thing) {\n     if(thing.type() == typeid(T)) {\n         visit(std::any_cast&lt;T&gt;(thing));\n         return;\n     }\n     if constexpr(sizeof...(Ts) &gt; 0) try_visit&lt;Ts...&gt;(std::move(thing));\n     else try_visit(std::move(thing));\n}\n\nint main() {\n    try_visit&lt;short, int, double, bool, long&gt;(std::any{42});\n}\n</code></pre>\n\n<p>%-}</p>\n"}, {"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 1, "last_activity_date": 1535577966, "last_edit_date": 1535577966, "creation_date": 1535576411, "answer_id": 52086011, "question_id": 52085547, "link": "https://stackoverflow.com/questions/52085547/avoid-writing-the-same-repetitive-type-checking-code-with-stdany/52086011#52086011", "title": "avoid writing the same repetitive type-checking code with std::any", "body": "<p>The basic idea is to create an <code>std::any</code> visitor and do the necessary processing in a function called from the visitor. That basic principle is straight forward. Let's start with supporting just one type:</p>\n\n<pre><code>#include &lt;any&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename T, typename Any, typename Visitor&gt;\nauto any_visit1(Any&amp;&amp; any, Visitor visit)\n    -&gt; std::enable_if_t&lt;std::is_same_v&lt;std::any, std::decay_t&lt;Any&gt;&gt;&gt;\n{\n    if (any.type() == typeid(T)) {\n        visit(std::any_cast&lt;T&gt;(std::forward&lt;Any&gt;(any)));\n    }\n}\n\nint main() {\n    std::any a0(17);\n\n    any_visit1&lt;int&gt;(a0, [](auto value){ std::cout &lt;&lt; \"value=\" &lt;&lt; value &lt;&lt; \"\\n\"; });\n}\n</code></pre>\n\n<p>The next step is to remove the one type restriction. As the explicit template parameters come first and are an open-ended list and the function object should be a deduced template parameter, you can't quite use a function template. However, a variable template (with an <code>inline constexpr</code>, of course, hence <em>variable</em>...) does the trick:</p>\n\n<pre><code>#include &lt;any&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename... T&gt;\ninline constexpr auto any_visit =\n    [](auto&amp;&amp; any, auto visit) -&gt; std::enable_if_t&lt;std::is_same_v&lt;std::any, std::decay_t&lt;decltype(any)&gt;&gt;&gt; {\n    (\n    (any.type() == typeid(T) &amp;&amp; (visit(std::any_cast&lt;T&gt;(std::forward&lt;decltype(any)&gt;(any))), true))\n    || ...)\n    // Uncomment the line below to have visit(any) called for unhandled types\n    // || (visit(std::forward&lt;decltype(any)&gt;(any)), true)\n    ;\n};\n\nvoid test(std::any any)\n{\n    any_visit&lt;int, double, char const*&gt;(any, [](auto value){ std::cout &lt;&lt; \"value=\" &lt;&lt; value &lt;&lt; \"\\n\"; });\n}\n\nint main() {\n    test(17);\n    test(3.14);\n    test(+\"foo\");\n}\n</code></pre>\n\n<p>If you need multiple <code>std::any</code> objects decoded you'd just pass suitable [lambda?] functions into it which refer to the other objects and keep building up the object until you got all the ones you need.</p>\n"}, {"comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 1, "creation_date": 1535577274, "post_id": 52086081, "comment_id": 91122654, "body": "I agree that using <code>std::variant&lt;T...&gt;</code> is the way to go. I do like the trick with the variable template to have the variadic argument list go first, though, and quite enjoyed knocking up this bit of code."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1535577451, "post_id": 52086081, "comment_id": 91122703, "body": "@DietmarK&#252;hl Yeah, it&#39;s definitely fun to write :-)"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 3, "last_activity_date": 1535576794, "creation_date": 1535576794, "answer_id": 52086081, "question_id": 52085547, "link": "https://stackoverflow.com/questions/52085547/avoid-writing-the-same-repetitive-type-checking-code-with-stdany/52086081#52086081", "title": "avoid writing the same repetitive type-checking code with std::any", "body": "<p>If you have a known, fixed list of possible types, don't use <code>std::any</code>. Use <code>std::variant&lt;Ts...&gt;</code>. That makes <a href=\"https://stackoverflow.com/a/52086011/2069064\">Dietmar's</a> answer look like this:</p>\n\n<pre><code>#include &lt;variant&gt;\n\nvoid test(std::variant&lt;int, double, char const*&gt; v)\n{\n    std::visit([](auto value){ std::cout &lt;&lt; \"value=\" &lt;&lt; value &lt;&lt; \"\\n\"; }, v);\n}\n</code></pre>\n\n<p>which is the same thing, except (a) you don't have to implement <code>visit</code> yourself (b) this is massively more efficient at runtime and (c) this is type safe - you can't forget to check a particular type! Really even if you don't care about (a) or (b), (c) is a huge win.</p>\n\n<p>And if you <em>don't</em> have a known, fixed list of possible types - which is the typical use-case for wanting <code>std::any</code> - then anything you're doing with <code>std::any</code> doesn't make sense anyway. You can't enumerate all possible copyable types (there are an infinite amount of them), so you can't necessarily retrieve the contents. So I really think <code>variant</code> is what you want. </p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1535577143, "last_edit_date": 1535577143, "creation_date": 1535576804, "answer_id": 52086083, "question_id": 52085547, "link": "https://stackoverflow.com/questions/52085547/avoid-writing-the-same-repetitive-type-checking-code-with-stdany/52086083#52086083", "title": "avoid writing the same repetitive type-checking code with std::any", "body": "<p>I find this type of code fun to write.</p>\n\n<p><code>any_visitor&lt;types...&gt;</code> is a function object that visits a set of types.</p>\n\n<p>You invoke it with an any followed by a function object.  It then invokes the function object with whichever of the <code>types...</code> is in the <code>any</code>.</p>\n\n<p>So you do <code>any_vistor&lt;int, double&gt;{}( something, [](auto&amp;&amp; x) { /* some code */ } )</code>.</p>\n\n<p>If none of the <code>types...</code> are in the <code>any</code>, it invokes the function object with a <code>std::any</code> for you to deal with the extra case.</p>\n\n<p>We can also write a variant that instead of passing the <code>std::any</code> to the functor, throws or returns false or something.</p>\n\n<pre><code>template&lt;class...Ts&gt;\nstruct any_visitor;\n\ntemplate&lt;&gt;\nstruct any_visitor&lt;&gt; {\n    template&lt;class F&gt;\n    decltype(auto) operator()( std::any&amp; a, F&amp;&amp; f ) const {\n        return std::forward&lt;F&gt;(f)(a);\n    }\n};\n\ntemplate&lt;class...Ts&gt;\nstruct any_visitor {\nprivate:\n    struct accum {\n        std::size_t x = 0;\n        friend accum operator+( accum lhs, accum rhs ) {\n            if (lhs.x || rhs.x) return {lhs.x+1};\n            else return {};\n        }\n    };\npublic:\n    template&lt;class Any, class F&gt;\n    void operator()(Any&amp;&amp; any, F&amp;&amp; f) const {\n        // sizeof...(Ts) none in the list\n        // otherwise, index of which any is in the list\n        std::size_t which = sizeof...(Ts) - (accum{} + ... + accum{ any.type() == typeid(Ts) }).x;\n\n        using table_entry = void(*)(Any&amp;&amp;, F&amp;&amp;);\n\n        static const table_entry table[] = {\n            +[](Any&amp;&amp; any, F&amp;&amp; f) {\n                std::forward&lt;F&gt;(f)( std::any_cast&lt;Ts&gt;( std::forward&lt;Any&gt;(any) ) );\n            }...,\n            +[](Any&amp;&amp; any, F&amp;&amp; f) {\n                std::forward&lt;F&gt;(f)( std::forward&lt;Any&gt;(any) );\n            }\n        };\n\n        table[which]( std::forward&lt;Any&gt;(any), std::forward&lt;F&gt;(f) );\n    }\n};\n\ntemplate&lt;class...Fs&gt;\nstruct overloaded:Fs... {\n    using Fs::operator()...;\n};\ntemplate&lt;class...Fs&gt;\noverloaded(Fs&amp;&amp;...)-&gt;overloaded&lt;std::decay_t&lt;Fs&gt;...&gt;;\n</code></pre>\n\n<p>I also included <code>overloaded</code> which makes it easier to dispatch.  If you want to handle all types uniformly, except handle an error case, you can do:</p>\n\n<pre><code>overloaded{\n  [](auto const&amp; x){ std::cout &lt;&lt; x &lt;&lt; \"\\n\"; },\n  [](std::any const&amp;){ std::cout &lt;&lt; \"Unknown type\\n\"; }\n}\n</code></pre>\n\n<p>and pass that as the function object to <code>any_visitor</code>.</p>\n\n<p>Here is some test code:</p>\n\n<pre><code>std::any foo=7;\nstd::any bar=3.14;\n\nauto visitor = overloaded{\n    [](int x){std::cout &lt;&lt; x &lt;&lt; \"\\n\";},\n    [](auto&amp;&amp;){std::cout &lt;&lt; \"Unknown\\n\";}\n};\nany_visitor&lt;int&gt;{}( foo, visitor );\nany_visitor&lt;int&gt;{}( bar, visitor );\n</code></pre>\n\n<p>which outputs:</p>\n\n<blockquote>\n<pre><code>7\nUnknown\n</code></pre>\n</blockquote>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/8b7ce477ce877f09\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n\n<p>Implementation wise, this code uses a dispatch table (sort of like a vtable) to map the index of the type stored in the any to which overload of the function object we invoke.</p>\n\n<hr>\n\n<p>Yet another approach would be to write:</p>\n\n<pre><code>template&lt;class...Ts&gt;\nstd::optional&lt;std::variant&lt;Ts...&gt;&gt; to_variant( std::any );\n</code></pre>\n\n<p>which converts a <code>std::any</code> to a variant if its types match.  Then use the usual visiting machinery on <code>std::variant</code> instead of rolling your own.</p>\n"}], "owner": {"reputation": 389, "user_id": 1008943, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/l3Ert.png?s=128&g=1", "display_name": "markf78", "link": "https://stackoverflow.com/users/1008943/markf78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1535577966, "creation_date": 1535574242, "question_id": 52085547, "link": "https://stackoverflow.com/questions/52085547/avoid-writing-the-same-repetitive-type-checking-code-with-stdany", "title": "avoid writing the same repetitive type-checking code with std::any", "body": "<p>I want to use std::any in my program but I find myself writing a lot of conditional statements like this:</p>\n\n<pre><code>   if (anything.type() == typeid(short)) {\n      auto s = std::any_cast&lt;short&gt;(anything);\n   } else if (anything.type() == typeid(int)) {\n      auto i = std::any_cast&lt;int&gt;(anything);\n   } else if (anything.type() == typeid(long)) {\n      auto l = std::any_cast&lt;long&gt;(anything);\n   } else if (anything.type() == typeid(double)) {\n      auto d = std::any_cast&lt;double&gt;(anything);\n   } else if (anything.type() == typeid(bool)) {\n      auto b = std::any_cast&lt;bool&gt;(anything);\n   } \n</code></pre>\n\n<p>Note that I omitted much of the else if conditions for brevity. </p>\n\n<p>My program can use any of the defined types that can be stored in std::any so these if-then statements are quite long. Is there a way to refactor the code so that I can write it once?</p>\n\n<p>My original inclination was to use templates like so:</p>\n\n<pre><code>template&lt;typename T&gt;\nT AnyCastFunction(std::any) {\n\n   T type;\n   if (anything.type() == typeid(short)) {\n      type = std::any_cast&lt;short&gt;(anything);\n   } else if (anything.type() == typeid(int)) {\n      type = std::any_cast&lt;int&gt;(anything);\n   } else if (anything.type() == typeid(long)) {\n      type = std::any_cast&lt;long&gt;(anything);\n   } else if (anything.type() == typeid(double)) {\n      type = std::any_cast&lt;double&gt;(anything);\n   } else if (anything.type() == typeid(bool)) {\n      type = std::any_cast&lt;bool&gt;(anything);\n   } \n\n   return type;\n}\n</code></pre>\n\n<p>However, this leads to \"couldn't deduce template parameter T\" errors. How can I refactor this to avoid writing the large if/else blocks many times throughout the program?</p>\n"}, {"tags": ["c++", "c++11", "visual-c++"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1535574227, "post_id": 52085504, "comment_id": 91121365, "body": "Missing virtual destructor."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1535574265, "post_id": 52085504, "comment_id": 91121386, "body": "&quot;<i>I would not expect the application of my interface to cause a situation where an attempt to copy a <code>unique_ptr</code> might occur</i>&quot; What do you expect happens, when you call <code>void push(T&amp; p) { q.push(p); }</code>, where <code>T = std::unique_ptr&lt;int&gt;</code>?"}, {"owner": {"reputation": 1545, "user_id": 2687589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0ca2e33a502cc32f12a023a29886f8e7?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon McKenzie", "link": "https://stackoverflow.com/users/2687589/brandon-mckenzie"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1535574649, "post_id": 52085504, "comment_id": 91121563, "body": "@AlgirdasPreid\u017eius Per <a href=\"https://en.cppreference.com/w/cpp/container/queue/push\" rel=\"nofollow noreferrer\">std::queue&#39;s documentation</a>, the push accepts parameters by reference, so not a copy."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1535575242, "post_id": 52085504, "comment_id": 91121828, "body": "@BrandonMcKenzie That same documentation states &quot;<i>Effectively calls c.push_back(value)</i>&quot;. The default container for <a href=\"https://en.cppreference.com/w/cpp/container/queue\" rel=\"nofollow noreferrer\"><code>std::queue&lt;T&gt;</code></a> is <a href=\"https://en.cppreference.com/w/cpp/container/deque\" rel=\"nofollow noreferrer\"><code>std::deque&lt;T&gt;</code></a>. <a href=\"https://en.cppreference.com/w/cpp/container/deque/push_back\" rel=\"nofollow noreferrer\"><code>push_back</code></a> of which states &quot;<i>The new element is initialized as a copy of value.</i>&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1535575418, "creation_date": 1535575418, "answer_id": 52085793, "question_id": 52085504, "link": "https://stackoverflow.com/questions/52085504/unique-ptr-reference-to-deleted-function-when-implementing-interface/52085793#52085793", "title": "unique_ptr reference to deleted function when implementing interface", "body": "<p>The problem is this function:</p>\n\n<pre><code>void push(T&amp; p) { q.push(p); }\n</code></pre>\n\n<p>This copies <code>p</code>, and if <code>p</code> is a <code>std::unique_ptr&lt;int&gt;</code>, that's not going to work - it's not copyable.</p>\n\n<p>If you <em>just</em> have <code>WrappedQueue&lt;T&gt;</code>, non-<code>virtual</code> member functions of class templates are never instantiated until they're actually used. So this is not an error until somebody actually tries to <code>push</code> an lvalue. This is why <code>std::vector&lt;T&gt;::push_back(T const&amp;)</code> can exist and yet allow you to have a <code>std::vector&lt;std::unique_ptr&lt;int&gt;&gt;</code> anyway. This is fine - it's only an error when you try to do something that is obviously wrong. </p>\n\n<p>However, once you have <code>AbstractWrappedQueue&lt;T&gt;</code> - that has virtual member functions, and there the rule is more fuzzy: <a href=\"http://eel.is/c++draft/temp.inst#10.sentence-2\" rel=\"nofollow noreferrer\">[temp.inst]/10</a>:</p>\n\n<blockquote>\n  <p>It is unspecified whether or not an implementation implicitly instantiates a virtual member function of a class template if the virtual member function would not otherwise be instantiated. </p>\n</blockquote>\n\n<p>Your implementation is instantiating it anyway - and that function is ill-formed for <code>T=std::unique_ptr&lt;int&gt;</code>. Hence the problem.</p>\n\n<p>You can prevent it by either not having that virtual function, or only using copyable types. </p>\n\n<hr />\n\n<p>Side-note: you probably want <code>push(T const&amp;)</code>, not <code>push(T&amp;)</code>.</p>\n"}], "owner": {"reputation": 1545, "user_id": 2687589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0ca2e33a502cc32f12a023a29886f8e7?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon McKenzie", "link": "https://stackoverflow.com/users/2687589/brandon-mckenzie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 52085793, "answer_count": 1, "score": 0, "last_activity_date": 1535575418, "creation_date": 1535574032, "last_edit_date": 1535575177, "question_id": 52085504, "link": "https://stackoverflow.com/questions/52085504/unique-ptr-reference-to-deleted-function-when-implementing-interface", "title": "unique_ptr reference to deleted function when implementing interface", "body": "<p>I have the following code, which is being built using the MSVC2013 toolchain, C++11 (Old stuff a function of work constraints):</p>\n\n<pre><code>template&lt;class T&gt;\nclass AbstractWrappedQueue {\npublic:\n    virtual bool empty() = 0;\n    virtual size_t size() = 0;\n    virtual void push(T&amp; value) = 0;\n    virtual void push(T&amp;&amp; value) = 0;\n    virtual T pop() = 0;\n};\n\ntemplate&lt;class T&gt;\nclass WrappedQueue // : public AbstractWrappedQueue&lt;T&gt;\n{\nprivate:\n    std::queue&lt;T&gt; q;\npublic:\n    WrappedQueue() {}\n    ~WrappedQueue() {}\n    bool empty() { return q.empty(); }\n    size_t size() { return q.size(); }\n    void push(T&amp; p) { q.push(p); }\n    void push(T&amp;&amp; p) { q.push(std::move(p)); }\n    T pop() {\n        T r = std::move(q.front());\n        q.pop();\n        return r;\n    }\n};\n\nWrappedQueue&lt;std::unique_ptr&lt;int&gt;&gt; ptr;\n</code></pre>\n\n<p>As long as <code>WrappedQueue</code> stands alone, the class, and it's functionality, plays with <code>unique_ptr</code>s without a problem.  However, should it implement the <code>AbstractWrappedQueue</code> interface (i.e., uncomment the <code>: AbstractWrappedQueue&lt;T&gt;</code> part of the class definition, then I get the following error:</p>\n\n<pre><code>error C2280: 'std::unique_ptr&lt;int,std::default_delete&lt;_Ty&gt;&gt;::unique_ptr(const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)': attempting to reference a deleted function.\n</code></pre>\n\n<p>I would not expect the application of my interface to cause a situation where an attempt to copy a <code>unique_ptr</code> might occur.  Why is this occurring?  What can be done to prevent it (aside from simply not using the interface)?</p>\n"}, {"tags": ["c++", "stl", "iterator", "language-lawyer", "overloading"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1535572929, "post_id": 52085240, "comment_id": 91120733, "body": "Did you try defining the non-member functions? That should have given a multiple definition error."}, {"owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1535573159, "post_id": 52085240, "comment_id": 91120843, "body": "@juanchopanza you are 100% correct, after doing that there was an error."}], "answers": [{"comments": [{"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1535619192, "post_id": 52085325, "comment_id": 91135644, "body": "Note that &quot;both iterator are same type&quot; is not necessarily true."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 3, "last_activity_date": 1535619401, "last_edit_date": 1535619401, "creation_date": 1535573157, "answer_id": 52085325, "question_id": 52085240, "link": "https://stackoverflow.com/questions/52085240/member-function-cannot-be-overloaded-for-input-of-set-iterator-and-const-iterato/52085325#52085325", "title": "member function cannot be overloaded for input of set iterator and const_iterator (but can for other stl iterators)", "body": "<p>In global scope, these are just declaration of the same function (when both iterator are same type).</p>\n\n<pre><code>int foo(std::set&lt;int&gt;::iterator);\nint foo(std::set&lt;int&gt;::const_iterator);\n</code></pre>\n\n<p>In class, you cannot declare twice the same method.</p>\n\n<p>If you define the functions:</p>\n\n<pre><code>int foo(std::set&lt;int&gt;::iterator) {return 0;}\nint foo(std::set&lt;int&gt;::const_iterator) {return 0;} // program is ill formed (when iterator are same type)\n</code></pre>\n\n<p>You break ODR (One Definition Rule) with 2 definitions of the same function (and probably have duplicated symbol error with linker).</p>\n"}], "owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 52085325, "answer_count": 1, "score": 1, "last_activity_date": 1535619401, "creation_date": 1535572792, "question_id": 52085240, "link": "https://stackoverflow.com/questions/52085240/member-function-cannot-be-overloaded-for-input-of-set-iterator-and-const-iterato", "title": "member function cannot be overloaded for input of set iterator and const_iterator (but can for other stl iterators)", "body": "<p>Compiling the following code</p>\n\n<pre><code>struct foo {\n    int foo(std::set&lt;int&gt;::iterator);\n    int foo(std::set&lt;int&gt;::const_iterator);\n};\n</code></pre>\n\n<p>I get the following error from gcc (mingw)</p>\n\n<pre><code>func.cpp:5:9: error: 'int functor::foo(std::set&lt;int&gt;::const_iterator)' cannot be overloaded\n    int foo(std::set&lt;int&gt;::const_iterator);\n\nfunc.cpp:4:9: error: with 'int functor::foo(std::set&lt;int&gt;::iterator)'\n    int foo(std::set&lt;int&gt;::iterator);\n</code></pre>\n\n<p>and I get similar errors from msvc and clang. I would guess that the problem is that they represent the same underlying type\nsince in std::set, members are const. This seems to be confirmed by the fact that replacing <code>set</code> with <code>vector</code> causes it to \ncomile perfectly fine.</p>\n\n<p>weirdly, when I remove the functions from the struct and put them in the global namespace</p>\n\n<pre><code>int foo(std::set&lt;int&gt;::iterator);\nint foo(std::set&lt;int&gt;::const_iterator);\n</code></pre>\n\n<p>it compiles without error. This might be due to different overload rules for nonmember functions that I'm unaware of, I'm not sure</p>\n\n<p>So my questions:</p>\n\n<ul>\n<li>Why exactly is this overload not allowed?</li>\n<li>Why does putting them in the global namespace allow them to compile?</li>\n</ul>\n"}, {"tags": ["c++", "c++11", "templates", "cuda", "variadic-templates"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1535572943, "post_id": 52085131, "comment_id": 91120742, "body": "You might want <code>std::tuple</code>: <code>std::tuple&lt;Args...&gt; t{args...};</code>."}, {"owner": {"reputation": 590, "user_id": 4260902, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100000665496061/picture?type=large", "display_name": "Michael Choi", "link": "https://stackoverflow.com/users/4260902/michael-choi"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1535580581, "post_id": 52085131, "comment_id": 91123738, "body": "unfortunately I receive an &quot;incomplete type is not allowed&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 590, "user_id": 4260902, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100000665496061/picture?type=large", "display_name": "Michael Choi", "link": "https://stackoverflow.com/users/4260902/michael-choi"}, "edited": false, "score": 0, "creation_date": 1535578457, "post_id": 52085946, "comment_id": 91123072, "body": "Sorry, I made a type in the example, I meant something along the lines of &quot;Args... args2&quot; I have edited my question above. In any if I passed lets say an int, int, char, then args2 would always be the same types. Is this possible?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 590, "user_id": 4260902, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100000665496061/picture?type=large", "display_name": "Michael Choi", "link": "https://stackoverflow.com/users/4260902/michael-choi"}, "edited": false, "score": 1, "creation_date": 1535579657, "post_id": 52085946, "comment_id": 91123463, "body": "@MichaelChoi - no, as far I know isn&#39;t possible exactly as you want. But, as suggested by Jarod42 and as I&#39;ve written in my answer, you can write something <code>std::tuple&lt;Args...&gt; tpl;</code>, so you can obtain <code>args2...</code> wrapped in a tuple."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1535577340, "last_edit_date": 1535577340, "creation_date": 1535576130, "answer_id": 52085946, "question_id": 52085131, "link": "https://stackoverflow.com/questions/52085131/duplicate-variadic-template-parameter/52085946#52085946", "title": "Duplicate variadic template parameter", "body": "<blockquote>\n  <ol>\n  <li>Is it possible to duplicate variadic template inputs, if so how? EX (not real code):</li>\n  </ol>\n</blockquote>\n\n<pre><code>template &lt;typename... Args&gt;\n void foo(Args... args) {\n  Args2... args;\n }\n</code></pre>\n\n<blockquote>\n  <p></p>\n</blockquote>\n\n<p>Not that way.</p>\n\n<p>The <code>Args...</code> typenames are deductibles from <code>args...</code> parameters.</p>\n\n<p>But about <code>Args2...</code>? How can you deduce they? Do you want explicate they?</p>\n\n<p>But are you sure that you need different types?</p>\n\n<p>If you don't need a different list of types, the best I can imagine, as suggested by Jarod42, is the use of a tuple</p>\n\n<p>Something as follows</p>\n\n<pre><code>template &lt;typename ... Args&gt;\nvoid foo (Args ... args)  \n {\n   std::tuple&lt;Args...&gt; tpl { args... };\n\n   // do something with tpl`\n }\n</code></pre>\n\n<p>or, if you want enable perfect forwarding,</p>\n\n<pre><code>template &lt;typename ... Args&gt;\nvoid foo (Args &amp;&amp; ... args)  \n {\n   std::tuple&lt;Args...&gt; tpl { std::forward&lt;Args&gt;(args)... };\n\n   // do something with tpl`\n }\n</code></pre>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>How would I go about the ith tuple of a variadic array parameter, like zipping in python. EX (not real code):</li>\n  </ol>\n</blockquote>\n\n<pre><code>template&lt;typename... Args, size_t N&gt;\nvoid bar(Args(&amp;...argsarray)[N]) {\n  // (python) ithvariadic = zip(*argsarray)[i]\n  auto ithvariadic = argsarray[i]...;\n}\n</code></pre>\n\n<blockquote>\n  <p></p>\n</blockquote>\n\n<p>What about </p>\n\n<pre><code>template &lt;typename ... Args, std::size_t N&gt;\nvoid bar (Args (&amp;...argsarray)[N])\n {\n   for ( auto ui = 0u ; ui &lt; N ; ++ui )\n    {\n      std::tuple&lt;Args...&gt; ithvariadic { argsarray[ui]... };\n\n      // do something with ithvariadic\n    }\n }\n</code></pre>\n\n<p>?</p>\n"}], "owner": {"reputation": 590, "user_id": 4260902, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100000665496061/picture?type=large", "display_name": "Michael Choi", "link": "https://stackoverflow.com/users/4260902/michael-choi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535578479, "creation_date": 1535572373, "last_edit_date": 1535578479, "question_id": 52085131, "link": "https://stackoverflow.com/questions/52085131/duplicate-variadic-template-parameter", "title": "Duplicate variadic template parameter", "body": "<p>Context:</p>\n\n<p>I am a Jr. Software Engineer, hopefully I am not reinventing the wheel, please let me know.\nI'd like to create a template function which wraps and calls another function element wise. For example:</p>\n\n<pre><code>// returns a*x + y\n__device__ float saxpy(float a, float x, float y) {\n  return a*x + y;\n}\n\n\nint main() {\n  int A[4] = { 1,2,3,4 };\n  int X[4] = { 1,2,3,4 };\n  int Y[4] = { 1,1,1,1 };\n\n  // A*X   = 1,4,9,16\n  // A*X+Y = 2,5,10,17\n  float *C = cudaReduce(saxpy, A, X, Y);\n\n  for (int i = 0; i &lt; 4; i++)\n    printf(\"%d, \", C[i]); // should print \"2, 5, 10, 17, \"\n\n  std::cin.ignore();\n  return 0;\n}\n</code></pre>\n\n<p>Importantly, I want to create this wrapper so that cuda calls are nicely wrapped when I perform element-wise operations. Though very incomplete, here is my pseudo-code attempt at the function wrapper.</p>\n\n<p>I'd like to provide a minimal example; however, I have very little idea how to go about certain aspects of C++, so please forgive the large amounts of commented pseudocode:</p>\n\n<pre><code>#include \"cuda_runtime.h\"\n#include \"device_launch_parameters.h\"\n\n#include &lt;iostream&gt;\n\n// returns a*x + y\n__device__ float saxpy(float a, float x, float y) {\n  return a*x + y;\n}\n\n// finds return type of function pointer\ntemplate&lt;typename R, typename... A&gt;\nR ret(R(*)(A...));\ntemplate&lt;typename C, typename R, typename... A&gt;\nR ret(R(C::*)(A...));\n\ntemplate&lt;typename F, size_t N, typename... Args&gt;\nauto cudaReduce(F &amp;f, Args(&amp;...argsarray)[N]) {\n  cudaSetDevice(0);\n\n  // ret is function f's return type\n  typedef decltype(ret(f)) ret;\n  ret d_out[N], h_out[N];\n  // cudaMalloc((void**)&amp;d_out, sizeof(d_out));\n  sendToCuda(argsarray...); // allocates and copies all contents of argsarray to cuda\n\n  // reduceKernel&lt;&lt;&lt;1, N&gt;&gt;&gt;(f, d_out, dev_argsarray...);\n\n  // cudaDeviceSynchronize();\n  // cudaMemcpy(h_out, d_out, sizeof(h_out), cudaMemcpyDeviceToHost);\n  // cudaFree(d_out);\n\n  // for d_args in d_argsarray\n  //   cudaFree(d_args);\n\n  return h_out;\n}\n\ntemplate&lt;typename F, size_t N, typename Out, typename... Args&gt;\n__global__ void cudaReduceKernel(F &amp;f, Out(&amp;out)[N], Args(&amp;...argsarray)[N]) {\n  int tid = threadIdx.x;\n  int i = tid + blockIdx.x * blockDim.x;\n\n  // Below is invalid syntax; however, the 'pseudo-code' is what I'd like to achieve.\n  // out[i] = f(argsarray[i]...);\n}\n\n// cuda malloc and memcpy\ntemplate&lt;typename Arg, size_t N&gt;\nvoid sendToCuda(Arg(&amp;args)[N]) {\n  size_t buffer = sizeof(args);\n  //cudaMalloc((void**)&amp;dev_arg[ ??? ], buffer);\n  //cudaMemcpy((void**)&amp;dev_arg[ ??? ], args, buffer, cudaMemcpyHostToDevice);\n}\ntemplate&lt;typename Arg, size_t N, typename... Args&gt;\nvoid sendToCuda(Arg(&amp;args)[N], Args(&amp;...argsarray)[N]) {\n  sendToCuda(args);\n  sendToCuda(argsarray...);\n}\n\nint main() {\n  int A[4] = { 1,2,3,4 };\n  int X[4] = { 1,2,3,4 };\n  int Y[4] = { 1,1,1,1 };\n\n  // A*X   = 1,4,9,16\n  // A*X+Y = 2,5,10,17\n  float *C = cudaReduce(saxpy, A, X, Y);\n\n  for (int i = 0; i &lt; 4; i++)\n    printf(\"%d, \", C[i]); // should print \"2, 5, 10, 17, \", currently prints undefined behaviour\n\n  std::cin.ignore();\n  return 0;\n}\n</code></pre>\n\n<p>I realize not everyone has time to completely review the code, so I will boil down the key problems into several points:</p>\n\n<p>1.\nIs it possible to duplicate variadic template inputs, if so how?\nEX (not real code):</p>\n\n<pre><code>template&lt;typename... Args&gt;\nvoid foo(Args... args) {\n  Args... args2;\n}\n</code></pre>\n\n<p>This is needed so that I can duplicate my input parameters to input parameters for my cuda <code>malloc()</code> and <code>memcpy()</code>.</p>\n\n<p>2.\nHow would I go about the ith tuple of a variadic array parameter, like zipping in python.\nEX (not real code):</p>\n\n<pre><code>template&lt;typename... Args, size_t N&gt;\nvoid bar(Args(&amp;...argsarray)[N]) {\n  // (python) ithvariadic = zip(*argsarray)[i]\n  auto ithvariadic = argsarray[i]...;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1535577215, "post_id": 52084858, "comment_id": 91122629, "body": "What is the square root of -5 (minus 5)?"}], "answers": [{"tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": true, "score": 2, "last_activity_date": 1535574361, "last_edit_date": 1535574361, "creation_date": 1535572510, "answer_id": 52085166, "question_id": 52084858, "link": "https://stackoverflow.com/questions/52084858/how-to-handle-nan-output-in-c/52085166#52085166", "title": "How to handle -nan output in c++", "body": "<p>The best would be to not use <code>int</code> for point coordinates at all:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n\nstruct point { double x, y; };\n\nstruct point_pair { point a, b; };\n\ndouble calc_distance(point_pair pair) {\n    return (std::sqrt((pair.a.x - pair.b.x) * (pair.a.x - pair.b.x) + (pair.a.y - pair.b.y) * (pair.a.y - pair.b.y)));\n}\n\nint main() {\n    point_pair pp{{651760491, 595516649}\n            , {716636914, 955747792}};\n    std::cout &lt;&lt; calc_distance(pp) &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>But if you have a reason to do that, well, then at least convert coordinate differences to <code>double</code>:</p>\n\n<pre><code>struct point { int x, y; };\n\nstruct point_pair { point a, b; };\n\ndouble calc_distance(point_pair pair) {\n    return (std::sqrt(double(pair.a.x - pair.b.x) * (pair.a.x - pair.b.x) + double(pair.a.y - pair.b.y) * (pair.a.y - pair.b.y)));\n}\n</code></pre>\n\n<p>Because otherwise you face integer overflow at large orders, and signed overflow is an UB in C++.</p>\n"}, {"tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 5, "last_activity_date": 1535572712, "creation_date": 1535572712, "answer_id": 52085213, "question_id": 52084858, "link": "https://stackoverflow.com/questions/52084858/how-to-handle-nan-output-in-c/52085213#52085213", "title": "How to handle -nan output in c++", "body": "<p>Right way to do it would be use of standard <code>hypot()</code> function.</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/numeric/math/hypot\" rel=\"noreferrer\">https://en.cppreference.com/w/cpp/numeric/math/hypot</a></p>\n\n<p>\"Computes the square root of the sum of the squares of x and y, without undue overflow or underflow at intermediate stages of the computation.\"</p>\n"}], "owner": {"reputation": 163, "user_id": 8147810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0ffdd14f155a97e209610069b58a404?s=128&d=identicon&r=PG", "display_name": "nglglhtr", "link": "https://stackoverflow.com/users/8147810/nglglhtr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 52085166, "answer_count": 2, "score": 1, "last_activity_date": 1535574361, "creation_date": 1535571139, "last_edit_date": 1535573307, "question_id": 52084858, "link": "https://stackoverflow.com/questions/52084858/how-to-handle-nan-output-in-c", "title": "How to handle -nan output in c++", "body": "<p>Let's say I have a function that calculates Euclidean distance between a pair of points. <code>point</code> and <code>point_pair</code> are two structs defined as:</p>\n\n<pre><code>struct point {\n    int x, y;\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>struct point_pair {\n    point a, b;\n}\n</code></pre>\n\n<p>The following functions calculates the distance taking a pair of points as an input:</p>\n\n<pre><code>double calc_distance(point_pair pair)\n{\n  return (sqrt((pair.a.x - pair.b.x) * (pair.a.x - pair.b.x) + (pair.a.y - pair.b.y) * (pair.a.y - pair.b.y)));\n}\n</code></pre>\n\n<p>The function works fine for small point pair values; but for a point pair such as: </p>\n\n<pre><code>651760491 595516649\n716636914 955747792\n</code></pre>\n\n<p>The output is <code>-nan</code></p>\n\n<p>I'm not sure how to workaround this, is there something else I should be using in place of double? </p>\n\n<p>Here is the entire code: <a href=\"https://pastebin.com/5XEr9bTD\" rel=\"nofollow noreferrer\">https://pastebin.com/5XEr9bTD</a></p>\n"}, {"tags": ["c++", "opencv", "sqlite", "blob", "imread"], "comments": [{"owner": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "edited": false, "score": 0, "creation_date": 1535620876, "post_id": 52084561, "comment_id": 91136787, "body": "if you managed to solve the issue yourself you should post the solution as an answer instead of edit to the question"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1535621874, "post_id": 52084561, "comment_id": 91137477, "body": "I have never understood why anyone would want to put an image in a database where you can&#39;t see it, or edit it without writing SQL and where it bloats your database and makes backups bigger. Do you have a moment to explain the rationale please?"}, {"owner": {"reputation": 47, "user_id": 6108653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07833e2aca94f761539761ccf82dd2d6?s=128&d=identicon&r=PG&f=1", "display_name": "Murokill", "link": "https://stackoverflow.com/users/6108653/murokill"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1536301202, "post_id": 52084561, "comment_id": 91381490, "body": "@MarkSetchell You can store in an image some data of your process or something else what you don&#39;t want to see. The content of the image (values of each pixels) is important only for the behind processes."}], "owner": {"reputation": 47, "user_id": 6108653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07833e2aca94f761539761ccf82dd2d6?s=128&d=identicon&r=PG&f=1", "display_name": "Murokill", "link": "https://stackoverflow.com/users/6108653/murokill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535619958, "creation_date": 1535569878, "last_edit_date": 1535619958, "question_id": 52084561, "link": "https://stackoverflow.com/questions/52084561/store-output-of-cvimencode-into-sqlite3", "title": "Store output of cv::imencode into sqlite3", "body": "<p>I'm trying to store an image (<code>.png</code>) into a <code>sqlite3</code> database. A simple grayscale image will be creating by <code>opencv</code> and will be storing into a buffer by using of <code>cv::imencode(cv::Mat img, params)</code> command (the output of function is a <code>std::vector&lt;uchar&gt;</code>).</p>\n\n<p>Next I'd like push this into a database. Therefore I'm preparing a <code>sqlite3</code> table, statement and so on... this works well.<br>\nTo adding a <code>blob</code> content I'm doing following steps (minimal example): </p>\n\n<pre><code>bool MyClass::bindTableContent(int index, std::vector&lt;uchar&gt; data){\n\n char * blob_imdecode = reinterpret_cast&lt;char*&gt;(data.data());\n\n this-&gt;rc = sqlite3_bind_blob(this-&gt;statement, index, blob_imdecode, sizeof(blob_imdecode[0]) * data.size(), SQLITE_STATIC);\n if (this-&gt;rc != SQLITE_OK) {\n  return false;\n }\n\n if(sqlite3_step(this-&gt;statement) == SQLITE_DONE){\n  return true;\n }\n else{\n  return false;\n }\n}\n</code></pre>\n\n<p>After doing this, the <code>blob</code> data is namely stored in a database, but as wrong data type (I guess something goes wrong, perhaps the length is wrong, ... ).\nIf I do <code>imdecode</code> of this vector and save that by using <code>imwrite</code> then the image will be saving correctly. </p>\n\n<p>Nevertheless, if I read the image with <code>fstream</code> and do the same as above, the data will store correctly (as <code>.png</code>) into a database (minimal example): </p>\n\n<pre><code>bool MyClass::bindTableContent(int index, std::string image_path){\n\n char * blob;\n std::ifstream::pos_type size;\n std::ifstream file(image_path, std::ios::in | std::ios::binary | std::ios::ate);\n if (file.is_open()) {\n  size = file.tellg();\n  blob = new char[size];\n  file.seekg(0, std::ios::beg);\n  file.read(blob, size);\n  file.close();\n }\n\n else{\n  blob = NULL;\n }\n\n this-&gt;rc = sqlite3_bind_blob(this-&gt;statement, index, blob, size, SQLITE_STATIC);\n\n delete [] blob;\n if (this-&gt;rc != SQLITE_OK) {\n  return false;\n }\n\n if(sqlite3_step(this-&gt;statement) == SQLITE_DONE){\n  return true;\n }\n else{\n  return false;\n }\n}\n</code></pre>\n\n<p>Does anyone have any ideas?<br>\nI would be very grateful for any help :)</p>\n\n<p><strong>* Solution *</strong> \nIf someone has the same issue, here is the solution: </p>\n\n<p>Make a hard copy of the inputed vector data / replace:</p>\n\n<pre><code>char * blob_imdecode = reinterpret_cast&lt;char*&gt;(data.data());\n</code></pre>\n\n<p>to</p>\n\n<pre><code>char * blob;\nblob = new char[data.size()];\nfor(int i = 0; i &lt; data.size(); i++){\n blob[i] = data[i];\n} \n</code></pre>\n"}, {"tags": ["c++", "mingw"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 3, "creation_date": 1535569843, "post_id": 52084531, "comment_id": 91119379, "body": "What error message do you get when you run the program? Is there a missing C++ runtime library?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1535569857, "post_id": 52084531, "comment_id": 91119387, "body": "&quot;but it will not run&quot; - what error message are you getting? Also, your compiler is a bit old - an easy to install and more up-to-date one can be got at <a href=\"https://nuwen.net/mingw.html\" rel=\"nofollow noreferrer\">nuwen.net/mingw.html</a>"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 4, "creation_date": 1535570198, "post_id": 52084531, "comment_id": 91119540, "body": "1) OT: &quot;<i>so I assume it is the most recent version.</i>&quot; The release date of GCC 6.3.0 is December 21, 2016, so, no, it&#39;s far behind the recent version. 2) &quot;Program will not run&quot; is useless problem description. It&#39;s the same, as calling into a repair shop, while stating that your car won&#39;t run, and asking them to explain what is wrong with it."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1535570293, "post_id": 52084531, "comment_id": 91119582, "body": "&quot;Why does string type cause c++ program to not run?&quot; - Using a <code>std::string</code> does not on its own cause a program to not run. You have some other problem"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1535570296, "post_id": 52084531, "comment_id": 91119584, "body": "Can you post what command you used to compile the program?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1535570451, "post_id": 52084531, "comment_id": 91119649, "body": "Btw, as of this moment, gcc 8.2 is the latest version - see <a href=\"https://gcc.gnu.org\" rel=\"nofollow noreferrer\">gcc.gnu.org</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1535570796, "post_id": 52084531, "comment_id": 91119795, "body": "The compiler may optimize-away the <code>string</code> variable since it is not used in the program, making both examples equivalent."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1535571034, "post_id": 52084531, "comment_id": 91119906, "body": "But exactly <i>how</i> are you compiling and running the code? Post the actual commands!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1535571273, "post_id": 52084531, "comment_id": 91120002, "body": "OK, that&#39;s how you are compiling it - how are you running the executable?"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1535571304, "post_id": 52084531, "comment_id": 91120020, "body": "<a href=\"https://stackoverflow.com/questions/41847967/during-startup-program-exited-with-code-0xc0000139\" title=\"during startup program exited with code 0xc0000139\">stackoverflow.com/questions/41847967/&hellip;</a> could help"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1535571668, "post_id": 52084531, "comment_id": 91120171, "body": "Use <code>g++ -S main.cpp</code>.  Open up <code>main.s</code>.  Search for &quot;greeting&quot;.  I have found that g++ 5.3.0 (on Cygwin, Windows 7), is optimizing-away the <code>string</code>.  Also, the program works correctly for me; not able to reproduce the issue."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1535571785, "post_id": 52084531, "comment_id": 91120230, "body": "@Thomas Why should that cause the program to fail to execute?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1535571992, "post_id": 52084531, "comment_id": 91120331, "body": "@NeilButterworth:  The cause of the program failing to execute could be anything from an incorrect translation of the source code to operating system issues.  In <i>theory</i>, inclusion of the <code>string</code> should not affect the operation of the program."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1535572357, "post_id": 52084531, "comment_id": 91120487, "body": "@Thomas Yes, it <i>could</i> be anything at all - I don&#39;t see how this is helpful, however."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1535574028, "post_id": 52084531, "comment_id": 91121268, "body": "&quot;If I use a debugger, I get program exited with code 0xc0000139&quot; - a debugger is not some magic tool that tells you where the bug is. You have to use it to inspect your program (you need to do some work). Take a look at the stack trace when it breaks your program, think about how you got there. Then run it again, but this time step through it line by line, don&#39;t just wait for it to fail, and observe the state of your program (variable values etc) as you step through it."}, {"owner": {"reputation": 157, "user_id": 4270630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gx3y5.png?s=128&g=1", "display_name": "jay", "link": "https://stackoverflow.com/users/4270630/jay"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1535574429, "post_id": 52084531, "comment_id": 91121463, "body": "@JesperJuhl That would be great advice if it got to the first line of code before exiting. As far as the stack trace part goes: <i>that</i> is useful advice for my situation."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 1, "creation_date": 1535582897, "post_id": 52084531, "comment_id": 91124400, "body": "Note that returning a value other than 0 from <code>main()</code> is generally used to signal that the program did not run successfully."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1535573162, "post_id": 52085285, "comment_id": 91120845, "body": "Should be a comment."}, {"owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "edited": false, "score": 1, "creation_date": 1535573307, "post_id": 52085285, "comment_id": 91120926, "body": "Not enough of a reputation to comment!"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1535573390, "post_id": 52085285, "comment_id": 91120965, "body": "See <a href=\"https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead\" title=\"why do i need 50 reputation to comment what can i do instead\">meta.stackexchange.com/questions/214173/&hellip;</a>"}, {"owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1535573639, "post_id": 52085285, "comment_id": 91121081, "body": "Thanks @alter igel"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1535645438, "post_id": 52085285, "comment_id": 91153527, "body": "&quot;Not enough reputation to comment&quot; doesn&#39;t mean &quot;so you can comment in the wrong place instead&quot;"}, {"owner": {"reputation": 157, "user_id": 4270630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gx3y5.png?s=128&g=1", "display_name": "jay", "link": "https://stackoverflow.com/users/4270630/jay"}, "edited": false, "score": 0, "creation_date": 1536242829, "post_id": 52085285, "comment_id": 91360987, "body": "I could see the executable was not being generated in my file explorer. Thanks, though!"}], "tags": [], "owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "is_accepted": false, "score": 0, "last_activity_date": 1535573005, "creation_date": 1535573005, "answer_id": 52085285, "question_id": 52084531, "link": "https://stackoverflow.com/questions/52084531/why-does-string-type-cause-c-program-to-not-run/52085285#52085285", "title": "Why does string type cause c++ program to not run?", "body": "<p>Mingw has a long standing issue with certain consoles (see their <a href=\"http://www.mingw.org/wiki/FAQ\" rel=\"nofollow noreferrer\">faq</a>). It might be worth checking whether it's failing to output rather than execute by e.g. redirecting to a file <code>./b.exe &gt;out.txt</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 4270630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gx3y5.png?s=128&g=1", "display_name": "jay", "link": "https://stackoverflow.com/users/4270630/jay"}, "is_accepted": true, "score": 0, "last_activity_date": 1535644794, "creation_date": 1535644794, "answer_id": 52101210, "question_id": 52084531, "link": "https://stackoverflow.com/questions/52084531/why-does-string-type-cause-c-program-to-not-run/52101210#52101210", "title": "Why does string type cause c++ program to not run?", "body": "<p>After some useful comments, and much frustration, I decided to try to build the most current compiler. I caved and used Cygwin. (I really have no problem with Cygwin, I just wanted to get MinGW to work.)</p>\n\n<p>I followed this site's instructions (after downloading the current source from <a href=\"https://gcc.gnu.org\" rel=\"nofollow noreferrer\">https://gcc.gnu.org</a>).</p>\n\n<p><a href=\"http://preshing.com/20141108/how-to-install-the-latest-gcc-on-windows/\" rel=\"nofollow noreferrer\">http://preshing.com/20141108/how-to-install-the-latest-gcc-on-windows/</a></p>\n\n<p><strong>Notes:</strong></p>\n\n<ul>\n<li><p>This is for an older version of gcc, but I replaced the appropriate version numbers with 8.2.0 (current at this time).</p></li>\n<li><p>I was missing some prerequisites, and had to <code>cd</code> into the source directory and run <code>./contrib/download_prerequisites</code> from the Cygwin terminal. It handled everything seamlessly, and while it took a little bit, I am now able to use <code>string</code> data types and run the program (successfully).</p></li>\n<li><p>Don't forget the final <code>make install</code> command. I did, and it was a headache.</p></li>\n</ul>\n\n<p>Lastly, thanks to all the <em>helpful</em> comments, and those that asked for clarification. When I call the mechanic, and say, \"my car won't run\", they ask helpful questions, and we work together to get them the relevant information they need. That's what happened above, and I learned some things (and solved my issue).</p>\n"}], "owner": {"reputation": 157, "user_id": 4270630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gx3y5.png?s=128&g=1", "display_name": "jay", "link": "https://stackoverflow.com/users/4270630/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 852, "favorite_count": 1, "accepted_answer_id": 52101210, "answer_count": 2, "score": 1, "last_activity_date": 1535644794, "creation_date": 1535569729, "last_edit_date": 1535574639, "question_id": 52084531, "link": "https://stackoverflow.com/questions/52084531/why-does-string-type-cause-c-program-to-not-run", "title": "Why does string type cause c++ program to not run?", "body": "<p>I have a simple program, written in C++, on a Windows 10 machine, compiled with the MinGW g++ compiler.</p>\n\n<p>I am including the <code>&lt;string&gt;</code> header, and it runs fine. When I include the <code>string</code> data type, it will compile, but it will not run.</p>\n\n<p>The minimum amount of code to reproduce this is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main() {\n    string greeting;\n    cout &lt;&lt; \"hi\" &lt;&lt; endl;\n    return 1;\n}\n</code></pre>\n\n<p>Please note, <strong>this</strong> works fine:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main() {\n    //string greeting;\n    cout &lt;&lt; \"hi\" &lt;&lt; endl;\n    return 1;\n}\n</code></pre>\n\n<p>The version of the compiler is 6.3.0<br>\n<code>g++.exe (MinGW.org GCC-6.3.0-1) 6.3.0</code></p>\n\n<p>I downloaded it 3 days ago, so I assume it is the most recent version. (Maybe not?)</p>\n\n<p>I have googled and browsed stackoverflow for answers.</p>\n\n<p>The closest question I could find, the person gave up and changed operating systems.</p>\n\n<p>One other solution I found was to use Cygwin's compiler. I would rather not, as I already have a seemingly otherwise fine compiler.  It seems that MinGW tools are widely used enough that I should be able to use the compiler.</p>\n\n<p>Any other forum/blog/etc resources have problems about converting strings or calling string methods.</p>\n\n<p><strong>NOTE:</strong> The same exact code runs fine on Ubuntu 16.04, with the included compiler.</p>\n\n<p>EDITS:</p>\n\n<p>While I realize that \"It does not run\" is not helpful, I don't know how else to describe it. I run the compiled program, and it behaves the same as if I entered <code>echo ''</code>. There is no output, no indication that anything has happened.  What is the most helpful way to phrase that behavior?</p>\n\n<p>If I use a debugger, I get <code>program exited with code 0xc0000139</code></p>\n\n<p>A quick google search returns results indication that it <em>is</em> a problem with the compiler. Same as the comments below about my compiler version...</p>\n\n<p>To compile the program, I run <code>g++ main.cpp -o b.exe</code>\nTo execute it, I run <code>./b.exe</code></p>\n"}, {"tags": ["c++", "c++11", "std-function", "stdbind"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1535570382, "post_id": 52084516, "comment_id": 91119625, "body": "Provide a snippet please."}, {"owner": {"reputation": 680, "user_id": 2303176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47107aaff2c656bb305e866155258f1?s=128&d=identicon&r=PG", "display_name": "badola", "link": "https://stackoverflow.com/users/2303176/badola"}, "edited": false, "score": 3, "creation_date": 1535570543, "post_id": 52084516, "comment_id": 91119688, "body": "There is a sample program on <a href=\"https://en.cppreference.com/w/cpp/utility/functional/bind\" rel=\"nofollow noreferrer\">std::bind</a>. I think you should read and try that first. If something is still not clear after that, just post your doubt with some sample code."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1535571006, "post_id": 52084516, "comment_id": 91119893, "body": "I edited that into the question for you. Can you edit your question to include more details about the problem? Are you asking how to use <code>std::bind</code> with <code>&amp;MyClass::myFunction</code>?"}, {"owner": {"reputation": 41, "user_id": 7782650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea29b6a71f58edd8d933234cf7e6c3e6?s=128&d=identicon&r=PG&f=1", "display_name": "SuryaRao", "link": "https://stackoverflow.com/users/7782650/suryarao"}, "edited": false, "score": 0, "creation_date": 1535571127, "post_id": 52084516, "comment_id": 91119937, "body": "Yes, my question is the function bindFunction can take any parameter (function of the same type)  which can be binded. what is the correct syntax of the parameter of the function bindFunction ?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1535571304, "post_id": 52084516, "comment_id": 91120021, "body": "Possible dupe: <a href=\"https://stackoverflow.com/q/17131768/2069064\">stackoverflow.com/q/17131768/2069064</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1535571516, "post_id": 52084516, "comment_id": 91120106, "body": "Just a suggestion: use a lambda instead. They can do all that <code>std::bind</code> does and more + they are more readable (IMO)."}, {"owner": {"reputation": 41, "user_id": 7782650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea29b6a71f58edd8d933234cf7e6c3e6?s=128&d=identicon&r=PG&f=1", "display_name": "SuryaRao", "link": "https://stackoverflow.com/users/7782650/suryarao"}, "edited": false, "score": 0, "creation_date": 1535571616, "post_id": 52084516, "comment_id": 91120153, "body": "Can function pointers be used instead here ?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1535590941, "post_id": 52084516, "comment_id": 91126076, "body": "Let&#39;s step back from implementation details - what is the point of the exercise? What should <code>bindFunction</code> do, exactly? What&#39;s the expected outcome of <code>bindFunction(&amp;MyClass::myFunction)</code> call?"}, {"owner": {"reputation": 41, "user_id": 7782650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea29b6a71f58edd8d933234cf7e6c3e6?s=128&d=identicon&r=PG&f=1", "display_name": "SuryaRao", "link": "https://stackoverflow.com/users/7782650/suryarao"}, "edited": false, "score": 0, "creation_date": 1535597884, "post_id": 52084516, "comment_id": 91127448, "body": "I will try to explain with an example."}, {"owner": {"reputation": 41, "user_id": 7782650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea29b6a71f58edd8d933234cf7e6c3e6?s=128&d=identicon&r=PG&f=1", "display_name": "SuryaRao", "link": "https://stackoverflow.com/users/7782650/suryarao"}, "edited": false, "score": 0, "creation_date": 1535598456, "post_id": 52084516, "comment_id": 91127568, "body": "@ Igor Tandetnik I have modified the question accordingly. please check"}, {"owner": {"reputation": 41, "user_id": 7782650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea29b6a71f58edd8d933234cf7e6c3e6?s=128&d=identicon&r=PG&f=1", "display_name": "SuryaRao", "link": "https://stackoverflow.com/users/7782650/suryarao"}, "edited": false, "score": 0, "creation_date": 1535828769, "post_id": 52084516, "comment_id": 91213095, "body": "I guess I found what I was looking for, by using function pointers in this way.      `typedef void(MyClass::*MY_CLASS_PTR)(int);      void testFunctions( MY_CLASS_PTR fptr)     {          serviceClass.ServiceFunc( std::bind( fptr , this, std::placeholders::_1 ));     }       // passing myFunction as a parameter to be used for std::bind     testFunctions(&amp;MyClass::myFunction);"}], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 2, "creation_date": 1535836990, "post_id": 52131364, "comment_id": 91215012, "body": "Simply posting some code isn&#39;t terribly helpful. Can you explain your code? That way others can understand and learn from your answer instead of just copying &amp; pasting some code from the web."}, {"owner": {"reputation": 41, "user_id": 7782650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea29b6a71f58edd8d933234cf7e6c3e6?s=128&d=identicon&r=PG&f=1", "display_name": "SuryaRao", "link": "https://stackoverflow.com/users/7782650/suryarao"}, "reply_to_user": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1535869372, "post_id": 52131364, "comment_id": 91219073, "body": "The format of the function which takes a function pointer which can be used to bind that function pointer was the question.     typedef void(MyClass::*MY_CLASS_PTR)(int);     We have to give the name of the class while defining a function pointer which points to functions within the class. This was missing when I tried. So the function could look like this. void testFunctions( MY_CLASS_PTR fptr)  @Robert : The answer was not juts copied from any website.  It was part of the sample program. Referred to <a href=\"https://en.wikipedia.org/wiki/Function_pointer\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Function_pointer</a>"}], "tags": [], "owner": {"reputation": 41, "user_id": 7782650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea29b6a71f58edd8d933234cf7e6c3e6?s=128&d=identicon&r=PG&f=1", "display_name": "SuryaRao", "link": "https://stackoverflow.com/users/7782650/suryarao"}, "is_accepted": false, "score": 0, "last_activity_date": 1535829259, "creation_date": 1535829259, "answer_id": 52131364, "question_id": 52084516, "link": "https://stackoverflow.com/questions/52084516/how-to-pass-a-parameter-to-stdbind-from-a-function/52131364#52131364", "title": "How to pass a parameter to std::bind from a function", "body": "<pre><code>typedef void(MyClass::*MY_CLASS_PTR)(int);\n// function which takes function pointer as parameter\nvoid testFunctions( MY_CLASS_PTR fptr)\n{\n// fptr should have which function to bind \n  serviceClass.ServiceFunc( std::bind( fptr , this, std::placeholders::_1 ));\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7782650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea29b6a71f58edd8d933234cf7e6c3e6?s=128&d=identicon&r=PG&f=1", "display_name": "SuryaRao", "link": "https://stackoverflow.com/users/7782650/suryarao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1535829259, "creation_date": 1535569660, "last_edit_date": 1535598399, "question_id": 52084516, "link": "https://stackoverflow.com/questions/52084516/how-to-pass-a-parameter-to-stdbind-from-a-function", "title": "How to pass a parameter to std::bind from a function", "body": "<p>I am working on c++ 11.</p>\n\n<p>I want to write a function funA in a class, which binds another function funB within the same class. And funB function is a parameter in the function funA.\nWhat could be the syntax of the funcA ?\nI tried using std::function func, but i am not able to compile.\nPlease explain.</p>\n\n<p>Thanks.</p>\n\n<pre><code>class ServiceClass\n{\ntypedef std::function&lt;void(const int&amp;, const int&amp;)&gt; ServiceCallBack;\n\npublic:\nvoid ServiceFunc(ServiceCallBack callback)\n{\n    callback(1,2);\n}\n};\n</code></pre>\n\n<hr>\n\n<pre><code>class MyClass\n{\npublic:\n\nServiceClass serviceClass;\n\nvoid myFunction(int i)\n{\n    cout &lt;&lt; __FUNCTION__ &lt;&lt; endl;\n    cout &lt;&lt; i &lt;&lt; endl;\n}\n\nvoid myFunction2(int i)\n{\n    cout &lt;&lt; __FUNCTION__ &lt;&lt; endl &lt;&lt; i &lt;&lt; endl;\n}\n\nvoid bindFunction(std::function&lt;void()&gt; func)\n{\n    std::bind(func, this, std::placeholders::_1);\n    func();\n}\n\nvoid testmyFunction()\n{\n    serviceClass.ServiceFunc( std::bind(\n                                  MyClass::myFunction,\n                                  this,\n                                  std::placeholders::_1\n                                  ));\n}\n\nvoid testmyFunction2()\n{\n    serviceClass.ServiceFunc( std::bind(\n                                  MyClass::myFunction2,\n                                  this,\n                                  std::placeholders::_1\n                                  ));\n}\n\nvoid testFunctions( int i )\n{\n    if( i == 1 )\n    {\n        serviceClass.ServiceFunc( std::bind( MyClass::myFunction, this, std::placeholders::_1 ));\n    }\n    else if( i == 2 )\n    {\n        serviceClass.ServiceFunc( std::bind( MyClass::myFunction2, this, std::placeholders::_1 ));\n    }\n}\n};\n</code></pre>\n\n<p>Based on some condition, in the function testFunctions, i want to call any of the callback functions, myFunction or myFunction2. So if a can modify the testFunctions to receive a parameter which can take any of the callback functions, then I dont have to write the if else conditions.</p>\n\n<p>Please suggest.</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1535570533, "post_id": 52084511, "comment_id": 91119682, "body": "Maybe a simple overload can do the job here, <code>int op2(test &amp;&amp;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 961, "user_id": 4867923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2abb5213dc8af66ed03bcaf7eecf6023?s=128&d=identicon&r=PG&f=1", "display_name": "byteunit", "link": "https://stackoverflow.com/users/4867923/byteunit"}, "edited": false, "score": 0, "creation_date": 1535570181, "post_id": 52084602, "comment_id": 91119524, "body": "But than I can use this functions with l-values too, this is not what I want."}, {"owner": {"reputation": 961, "user_id": 4867923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2abb5213dc8af66ed03bcaf7eecf6023?s=128&d=identicon&r=PG&f=1", "display_name": "byteunit", "link": "https://stackoverflow.com/users/4867923/byteunit"}, "edited": false, "score": 0, "creation_date": 1535570457, "post_id": 52084602, "comment_id": 91119652, "body": "Acually, the std:declval&lt;T&gt; is what I need:  <code>template&lt;typename T&gt;    &#47;&#47; This is B typename std::enable_if&lt;std::conjunction&lt;std::is_same&lt;test, T&gt;, std::is_rvalue_reference&lt;decltype(std::declval&lt;T&gt;())&gt;&gt;::valu&zwnj;&#8203;e, int&gt;::type op2(T&amp;&amp; x) {     std::cout &lt;&lt; &quot;op2: B: &quot; &lt;&lt; std::move(x) &lt;&lt; std::endl;     return EXIT_SUCCESS; }</code> Thanks a lot!"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 961, "user_id": 4867923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2abb5213dc8af66ed03bcaf7eecf6023?s=128&d=identicon&r=PG&f=1", "display_name": "byteunit", "link": "https://stackoverflow.com/users/4867923/byteunit"}, "edited": false, "score": 0, "creation_date": 1535570576, "post_id": 52084602, "comment_id": 91119697, "body": "@byteunit You can&#39;t use that function with lvalues, that&#39;s the point."}, {"owner": {"reputation": 961, "user_id": 4867923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2abb5213dc8af66ed03bcaf7eecf6023?s=128&d=identicon&r=PG&f=1", "display_name": "byteunit", "link": "https://stackoverflow.com/users/4867923/byteunit"}, "edited": false, "score": 0, "creation_date": 1535570705, "post_id": 52084602, "comment_id": 91119756, "body": "but as I said, that is exactly, what I wanted, I want to use that function only by rvalues."}, {"owner": {"reputation": 961, "user_id": 4867923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2abb5213dc8af66ed03bcaf7eecf6023?s=128&d=identicon&r=PG&f=1", "display_name": "byteunit", "link": "https://stackoverflow.com/users/4867923/byteunit"}, "edited": false, "score": 0, "creation_date": 1535570990, "post_id": 52084602, "comment_id": 91119878, "body": "This was because of your modification approach."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 961, "user_id": 4867923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2abb5213dc8af66ed03bcaf7eecf6023?s=128&d=identicon&r=PG&f=1", "display_name": "byteunit", "link": "https://stackoverflow.com/users/4867923/byteunit"}, "edited": false, "score": 0, "creation_date": 1535571130, "post_id": 52084602, "comment_id": 91119939, "body": "The modification approach works. You can&#39;t call it with lvalues."}, {"owner": {"reputation": 961, "user_id": 4867923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2abb5213dc8af66ed03bcaf7eecf6023?s=128&d=identicon&r=PG&f=1", "display_name": "byteunit", "link": "https://stackoverflow.com/users/4867923/byteunit"}, "edited": false, "score": 0, "creation_date": 1535571577, "post_id": 52084602, "comment_id": 91120135, "body": "Now, I get what you acually ment. You are right, I apologize."}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 1, "last_activity_date": 1535570067, "creation_date": 1535570067, "answer_id": 52084602, "question_id": 52084511, "link": "https://stackoverflow.com/questions/52084511/how-can-i-use-type-traits-to-limit-the-universal-reference-parameters-of-a-funct/52084602#52084602", "title": "How can I use type traits to limit the universal reference parameters of a function to r-value references?", "body": "<p>To use <code>decltype</code> when you only have types, you have to use <code>std::declval</code>:</p>\n\n<pre><code>decltype(std::declval&lt;T&gt;())\n</code></pre>\n\n<p>But you will always get a rvalue reference out of it, so that's not what you want. Instead, leverage the type that gets deduced by the forwarding reference. <code>T</code> won't be a reference if you pass in an rvalue and will be a <code>T&amp;</code> for an lvalue.</p>\n\n<p>What this means is that you can modify B to:</p>\n\n<pre><code>template&lt;typename T&gt;\nstd::enable_if_t&lt;std::is_same_v&lt;test, T&gt;, int&gt; op2(T&amp;&amp; x);\n</code></pre>\n\n<p>Because as said before, if you pass in an rvalue of type <code>test</code>, <code>T</code> will get deduced to just <code>test</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 3, "last_activity_date": 1535570093, "creation_date": 1535570093, "answer_id": 52084610, "question_id": 52084511, "link": "https://stackoverflow.com/questions/52084511/how-can-i-use-type-traits-to-limit-the-universal-reference-parameters-of-a-funct/52084610#52084610", "title": "How can I use type traits to limit the universal reference parameters of a function to r-value references?", "body": "<p>A forwarding reference <code>T&amp;&amp;</code> will never deduce its template argument <code>T</code> as an rvalue reference type. If the argument is an rvalue of type <code>test</code>, then <code>T</code> will be deduced as <code>test</code>, while if the argument is an lvalue of type <code>test</code>, then <code>T</code> will be deduced as <code>test&amp;</code>.</p>\n\n<p>The overloads should therefore be rewritten as:</p>\n\n<pre><code>template&lt;typename T&gt;\nstd::enable_if_t&lt;!std::is_same_v&lt;test, T&gt;, void&gt; op2(T&amp;&amp; x) {\n    std::cout &lt;&lt; \"op2: A: \" &lt;&lt; std::forward&lt;T&gt;(x) &lt;&lt; std::endl;\n}\n\ntemplate&lt;typename T&gt;\nstd::enable_if_t&lt;std::is_same_v&lt;test, T&gt;, int&gt; op2(T&amp;&amp; x) {\n    std::cout &lt;&lt; \"op2: B: \" &lt;&lt; std::move(x) &lt;&lt; std::endl;\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 961, "user_id": 4867923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2abb5213dc8af66ed03bcaf7eecf6023?s=128&d=identicon&r=PG&f=1", "display_name": "byteunit", "link": "https://stackoverflow.com/users/4867923/byteunit"}, "edited": false, "score": 0, "creation_date": 1535570599, "post_id": 52084697, "comment_id": 91119712, "body": "In this case, you are right, but as I said, I have to use universal references, since my originial problem is not exactly the minial problem."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 961, "user_id": 4867923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2abb5213dc8af66ed03bcaf7eecf6023?s=128&d=identicon&r=PG&f=1", "display_name": "byteunit", "link": "https://stackoverflow.com/users/4867923/byteunit"}, "edited": false, "score": 0, "creation_date": 1535570762, "post_id": 52084697, "comment_id": 91119778, "body": "tag dispatching might help in your more complicated case."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1535570478, "creation_date": 1535570478, "answer_id": 52084697, "question_id": 52084511, "link": "https://stackoverflow.com/questions/52084511/how-can-i-use-type-traits-to-limit-the-universal-reference-parameters-of-a-funct/52084697#52084697", "title": "How can I use type traits to limit the universal reference parameters of a function to r-value references?", "body": "<p>In your case, simple overload is simpler:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid op2(T&amp;&amp; x) { // This is A\n    std::cout &lt;&lt; \"op2: A: \" &lt;&lt; std::forward&lt;T&gt;(x) &lt;&lt; std::endl;\n}\n\nint op2(test&amp;&amp; x) { // This is B\n    std::cout &lt;&lt; \"op2: B: \" &lt;&lt; std::move(x) &lt;&lt; std::endl;\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/8W76Ko\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 961, "user_id": 4867923, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2abb5213dc8af66ed03bcaf7eecf6023?s=128&d=identicon&r=PG&f=1", "display_name": "byteunit", "link": "https://stackoverflow.com/users/4867923/byteunit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 52084602, "answer_count": 3, "score": 0, "last_activity_date": 1535570478, "creation_date": 1535569653, "question_id": 52084511, "link": "https://stackoverflow.com/questions/52084511/how-can-i-use-type-traits-to-limit-the-universal-reference-parameters-of-a-funct", "title": "How can I use type traits to limit the universal reference parameters of a function to r-value references?", "body": "<p>I want to define a function <code>op2()</code> with a universal reference parameter.</p>\n\n<p>Depending on the type, I want to distinguish further, if the function parameter in <code>op2()</code> is an r-value reference of type <code>test</code>.\nIf this is the case, I want to define the return type of <code>op2</code> as <code>int</code>.\nIn all other cases, the return type should be <code>void</code>.</p>\n\n<p>Here is my ME:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass test {\n    public:\n    test(const std::string&amp; str) : _str(str){}\n    test(test&amp;&amp; t) = default;\n    test(const test&amp; t) = default;\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, test&amp;&amp; t) {\n        os &lt;&lt; t._str;\n        return os;\n    }\n\n    private:\n    std::string _str;\n};\n\ntemplate&lt;typename T&gt;\nvoid op(T&amp;&amp; x) {\n    std::cout &lt;&lt; \" is rvalue ref? \" &lt;&lt; std::is_rvalue_reference&lt;decltype(x)&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; \" is a test rvalue ref? \" &lt;&lt; std::is_same&lt;test&amp;&amp;, decltype(x)&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; std::forward&lt;T&gt;(x) &lt;&lt; std::endl;\n}\n\ntemplate&lt;typename T&gt;        // This is A\ntypename std::enable_if&lt;std::negation&lt;std::conjunction&lt;std::is_same&lt;test, T&gt;, std::is_rvalue_reference&lt;T&gt;&gt;&gt;::value&gt;::type op2(T&amp;&amp; x) {\n    std::cout &lt;&lt; \"op2: A: \" &lt;&lt; std::forward&lt;T&gt;(x) &lt;&lt; std::endl;\n}\n\ntemplate&lt;typename T&gt;    // This is B\ntypename std::enable_if&lt;std::conjunction&lt;std::is_same&lt;test, T&gt;, std::is_rvalue_reference&lt;T&gt;&gt;::value, int&gt;::type op2(T&amp;&amp; x) {\n    std::cout &lt;&lt; \"op2: B: \" &lt;&lt; std::move(x) &lt;&lt; std::endl;\n    return EXIT_SUCCESS;\n}\n\nint main() {\n    op(std::string{\"r-value string\"});\n    std::string str{\"l-value string\"};\n    op(str);\n    op(test{\"test\"});\n\n    op2(std::string{\"r-value string\"}); //gets into A\n    op2(str); //gets into A\n    op2(test{\"r-value string\"}); //Should get into B, but actually gets into A\n}\n</code></pre>\n\n<p>The problem with the code is, that the last <code>op2()</code>-call gets into the wrong overload.</p>\n\n<p>I have tried another function, <code>op()</code> which gets the right types via <code>decltype()</code>, but I don't know how I can use <code>decltype()</code> in the type-trait.</p>\n\n<p>I am using C++17 with gcc8.2</p>\n"}, {"tags": ["c++", "arrays", "algorithm", "containers"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 4, "creation_date": 1535569529, "post_id": 52084432, "comment_id": 91119239, "body": "Look up &quot;Sparse Matrix&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 6657299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d87b37e40bb0083371fe132dd3de0d?s=128&d=identicon&r=PG", "display_name": "Adrian Micha\u0142ek", "link": "https://stackoverflow.com/users/6657299/adrian-micha%c5%82ek"}, "edited": false, "score": 0, "creation_date": 1535617058, "post_id": 52084510, "comment_id": 91134394, "body": "It seems to be the most accurate way of how I can go through this, thanks"}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": true, "score": 1, "last_activity_date": 1535569644, "creation_date": 1535569644, "answer_id": 52084510, "question_id": 52084432, "link": "https://stackoverflow.com/questions/52084432/2d-array-some-cells-hold-specific-data/52084510#52084510", "title": "2D array, some cells hold specific data", "body": "<p>Use an <a href=\"https://en.cppreference.com/w/cpp/container/unordered_set\" rel=\"nofollow noreferrer\">unordered set</a></p>\n\n<p>The <code>key</code> can be a tuple of x,y</p>\n\n<p>Provide also a class <code>KeyEqual</code> that replaces the default one with your custom compare function.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 6657299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d87b37e40bb0083371fe132dd3de0d?s=128&d=identicon&r=PG", "display_name": "Adrian Micha\u0142ek", "link": "https://stackoverflow.com/users/6657299/adrian-micha%c5%82ek"}, "edited": false, "score": 0, "creation_date": 1535617243, "post_id": 52084818, "comment_id": 91134476, "body": "I&#39;ve never seen sth like Sparse Matrix, It seems to be really interesting, but I would go for unordered_set, anyway, thank you for sharing solutions"}], "tags": [], "owner": {"reputation": 388, "user_id": 10252378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cX6kb.jpg?s=128&g=1", "display_name": "Hasan Patel", "link": "https://stackoverflow.com/users/10252378/hasan-patel"}, "is_accepted": false, "score": 1, "last_activity_date": 1535571018, "creation_date": 1535571018, "answer_id": 52084818, "question_id": 52084432, "link": "https://stackoverflow.com/questions/52084432/2d-array-some-cells-hold-specific-data/52084818#52084818", "title": "2D array, some cells hold specific data", "body": "<p>A Matrix is a two dimensional object defined by m row and n columns if most of the element in this Matrix have 0 value is called a <strong>Sparse Matrix</strong></p>\n\n<pre><code>int sparseMatrix[x][y]\n</code></pre>\n\n<p>This is used to reduce computing time by traversing only non-zero elements.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 6657299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d87b37e40bb0083371fe132dd3de0d?s=128&d=identicon&r=PG", "display_name": "Adrian Micha\u0142ek", "link": "https://stackoverflow.com/users/6657299/adrian-micha%c5%82ek"}, "edited": false, "score": 0, "creation_date": 1535617440, "post_id": 52085641, "comment_id": 91134608, "body": "The problem I described is about something more after you hold some data in an array, some of the cells are unique, like having another data in another container, but this second container is way smaller in size (because there are less unique cells). Then unique cells are bonded with this second container etc."}], "tags": [], "owner": {"reputation": 13, "user_id": 9203519, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wm712v6kolc/AAAAAAAAAAI/AAAAAAAABTM/BPLnMlw_58M/photo.jpg?sz=128", "display_name": "Marko Bo\u0161njak", "link": "https://stackoverflow.com/users/9203519/marko-bo%c5%a1njak"}, "is_accepted": false, "score": 0, "last_activity_date": 1535574634, "creation_date": 1535574634, "answer_id": 52085641, "question_id": 52084432, "link": "https://stackoverflow.com/questions/52084432/2d-array-some-cells-hold-specific-data/52085641#52085641", "title": "2D array, some cells hold specific data", "body": "<p>Use this:</p>\n\n<pre><code>int a[sizex][sizey]; //this creates an array with empty slots\na[x][y]=somenumber; //this changes a value of slot on (x,y) coordinates\n</code></pre>\n\n<p><code>sizex</code>: size of x in array</p>\n\n<p><code>sizey</code>: size of y in array  </p>\n\n<p>Example:</p>\n\n<p><code>e</code>=empty</p>\n\n<pre><code>int a[4][5]; /*creates an array: e, e ,e ,e\n                                 e, e ,e ,e\n                                 e, e ,e ,e\n                                 e, e ,e ,e\n                                 e, e ,e ,e*/\na[1][2]=5; /*Now array look like this: e, e ,e ,e\n                                       5, e ,e ,e\n                                       e, e ,e ,e\n                                       e, e ,e ,e\n                                       e, e ,e ,e*/\ncout&lt;&lt;a[1][2]; //this prints number 5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 6657299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d87b37e40bb0083371fe132dd3de0d?s=128&d=identicon&r=PG", "display_name": "Adrian Micha\u0142ek", "link": "https://stackoverflow.com/users/6657299/adrian-micha%c5%82ek"}, "edited": false, "score": 0, "creation_date": 1535617535, "post_id": 52086211, "comment_id": 91134658, "body": "Yeah, but I would go for 1D unordered_set, anyway, thanks for help"}], "tags": [], "owner": {"reputation": 1368, "user_id": 10291310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ejlRX.jpg?s=128&g=1", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/10291310/nilesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1535577591, "creation_date": 1535577591, "answer_id": 52086211, "question_id": 52084432, "link": "https://stackoverflow.com/questions/52084432/2d-array-some-cells-hold-specific-data/52086211#52086211", "title": "2D array, some cells hold specific data", "body": "<p>A HashMap of HashMaps should do just about fine and will serve as a sparse matrix for your use case. It's implementation in different languages would be,</p>\n\n<ul>\n<li>C++11: <code>unordered_map&lt;int, unordered_map&lt;int, int&gt;&gt; store;</code></li>\n<li>Java: <code>HashMap&lt;Integer, HashMap&lt;String, Integer&gt;&gt; store = new HashMap&lt;&gt;();</code></li>\n<li>Python: <code>store = defaultdict(dict)</code></li>\n</ul>\n"}], "owner": {"reputation": 39, "user_id": 6657299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d87b37e40bb0083371fe132dd3de0d?s=128&d=identicon&r=PG", "display_name": "Adrian Micha\u0142ek", "link": "https://stackoverflow.com/users/6657299/adrian-micha%c5%82ek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 52084510, "answer_count": 4, "score": -1, "last_activity_date": 1535577591, "creation_date": 1535569285, "question_id": 52084432, "link": "https://stackoverflow.com/questions/52084432/2d-array-some-cells-hold-specific-data", "title": "2D array, some cells hold specific data", "body": "<p>I have an array of let's say (to make it easier) x and y position. I want to hold <strong>specific data</strong> only for some of the cells and it seems to be complicated. I could hold <strong>specific data</strong> for all cells but I want to hold it only for some of them (no waste of memory, for small 3000x3000 array there is 9 000 000 cells). Also, It has to be really fast. I don't know what to do. Hashing algorithms seem to be for a different kind of problem. I would like to have by e.g. x=50 and y=100 go to the <strong>container</strong> and get <strong>data</strong> quickly but what if x=100 and y=50 etc. Thank you for help.</p>\n"}, {"tags": ["c++", "qt", "nat", "pjsua2"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1535571808, "post_id": 52084066, "comment_id": 91120247, "body": "With NAT (Network Address <i>Translation</i>) you don&#39;t really have a public IP the peer can connect back to (at least not without some extra work/complication). NAT is <i>not</i> how the internet is/was supposed to work - it&#39;s an ugly hack."}, {"owner": {"reputation": 378, "user_id": 1775025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7d9b73fd49dee3c84cc0aeb7b748c17?s=128&d=identicon&r=PG", "display_name": "Sileno Brito", "link": "https://stackoverflow.com/users/1775025/sileno-brito"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1536003108, "post_id": 52084066, "comment_id": 91260862, "body": "@JesperJuhl the my problem the use of library pjsip, has error from communication. Something is missing."}], "owner": {"reputation": 378, "user_id": 1775025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7d9b73fd49dee3c84cc0aeb7b748c17?s=128&d=identicon&r=PG", "display_name": "Sileno Brito", "link": "https://stackoverflow.com/users/1775025/sileno-brito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536002997, "creation_date": 1535567661, "last_edit_date": 1536002997, "question_id": 52084066, "link": "https://stackoverflow.com/questions/52084066/failure-when-try-register-pjsua2-over-nat", "title": "Failure when try register pjsua2 over NAT", "body": "<p>I am trying register the pjsua2 \"(pjsip)\" at a pabx sip, this register and work fine when not have nat, but when have nat it do not register. <a href=\"http://www.pjsip.org/docs/book-latest/html/intro_pjsua2.html#using-in-c-application\" rel=\"nofollow noreferrer\">I am using the standard settings used by demo</a>.</p>\n\n<pre><code>bool SipAccount::start(){\n    this-&gt;ep.libCreate();\n    // Initialize endpoint\n    this-&gt;ep.libInit(this-&gt;ep_cfg );\n\n    // Create SIP transport. Error handling sample is shown\n    this-&gt;tcfg.port = this-&gt;port;\n    try {\n        this-&gt;ep.transportCreate(PJSIP_TRANSPORT_UDP, this-&gt;tcfg);\n    } catch (Error &amp;err) {\n        std::cout &lt;&lt; err.info() &lt;&lt; std::endl;\n        return false;\n    }\n\n    // Start the library (worker threads etc)\n    this-&gt;ep.libStart();\n    std::cout &lt;&lt; \"*** PJSUA2 STARTED ***\" &lt;&lt; std::endl;\n\n    // Configure an AccountConfig\n\n\n    this-&gt;acfg.idUri = idUri.toLatin1().data();\n    this-&gt;acfg.regConfig.registrarUri =  regUri.toLatin1().data();\n\n    this-&gt;acfg.callConfig.timerMinSESec = 120;\n    this-&gt;acfg.callConfig.timerSessExpiresSec = 1800;\n\n    this-&gt;cred.username = this-&gt;username.toLatin1().data();\n    this-&gt;cred.scheme = \"digest\";\n    this-&gt;cred.realm = \"*\";\n    this-&gt;cred.dataType = 0;\n    this-&gt;cred.data = this-&gt;password.toLatin1().data();\n\n    this-&gt;acfg.sipConfig.authCreds.push_back( this-&gt;cred );\n\n    // Setup the account\n    SipLine *l = new SipLine();\n    l-&gt;setHandler(this-&gt;handler);\n    l-&gt;create(acfg);\n\n    // Here we don't have anything else to do..\n    this-&gt;line = l;\n    // pj_thread_sleep(10000);\n    return true;\n}\n</code></pre>\n\n<p>My problem is with the rport using the pjsip, i no set the credential, the port used to communication is invalid.</p>\n\n<p>This is a sample from a header used in a test</p>\n\n<p><a href=\"https://i.stack.imgur.com/EZivl.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EZivl.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "qt", "qml", "qt5"], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 4181457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c89b6bded5da0d5211b38161e7ab1f?s=128&d=identicon&r=PG&f=1", "display_name": "tr1cks", "link": "https://stackoverflow.com/users/4181457/tr1cks"}, "edited": false, "score": 1, "creation_date": 1535626543, "post_id": 52085129, "comment_id": 91140531, "body": "It help, thanks. In my case I additionally was need to register Currency in Q_PROPERTY by full name with namespace like"}, {"owner": {"reputation": 97, "user_id": 4181457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c89b6bded5da0d5211b38161e7ab1f?s=128&d=identicon&r=PG&f=1", "display_name": "tr1cks", "link": "https://stackoverflow.com/users/4181457/tr1cks"}, "edited": false, "score": 0, "creation_date": 1535626965, "post_id": 52085129, "comment_id": 91140800, "body": "Q_PROPERTY(MyNamespace::Currency currency READ getCurrency CONSTANT)"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 4, "last_activity_date": 1535572358, "creation_date": 1535572358, "answer_id": 52085129, "question_id": 52083923, "link": "https://stackoverflow.com/questions/52083923/can-q-gadget-be-the-property-of-other-q-gadget/52085129#52085129", "title": "Can Q_GADGET be the property of other Q_GADGET?", "body": "<p>The error I get when executing your code is:</p>\n\n<pre><code>QMetaProperty::read: Unable to handle unregistered datatype 'Currency' for property 'Money::currency'\nqml: Money(12345, )\n</code></pre>\n\n<p>According to the <a href=\"http://doc.qt.io/qt-5/properties.html#requirements-for-declaring-properties\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>...<br>\n  The property type can be any type supported by QVariant, or it can be\n  a user-defined type. In this example, class QDate is considered to be\n  a user-defined type.<br>\n  ...</p>\n</blockquote>\n\n<p>In your case Currency is not supported by <code>QVariant</code>, so the solution is to use <code>Q_DECLARE_METATYPE</code> to be supported by <code>QVariant</code>:</p>\n\n<pre><code>class Currency\n{\n    ...\n};\n\nQ_DECLARE_METATYPE(Currency)\n</code></pre>\n\n<p>The complete example can be found in the following <a href=\"https://github.com/eyllanesc/stackoverflow/tree/master/52083923\" rel=\"nofollow noreferrer\">link</a>.</p>\n"}], "owner": {"reputation": 97, "user_id": 4181457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c89b6bded5da0d5211b38161e7ab1f?s=128&d=identicon&r=PG&f=1", "display_name": "tr1cks", "link": "https://stackoverflow.com/users/4181457/tr1cks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 0, "accepted_answer_id": 52085129, "answer_count": 1, "score": 2, "last_activity_date": 1543200800, "creation_date": 1535567006, "last_edit_date": 1543200800, "question_id": 52083923, "link": "https://stackoverflow.com/questions/52083923/can-q-gadget-be-the-property-of-other-q-gadget", "title": "Can Q_GADGET be the property of other Q_GADGET?", "body": "<p>When I tried to pass such object in qml to some QML component property, it's just crashed in release or hung up in debug on:</p>\n\n<pre><code>Currency&amp; operator=(const Currency&amp; that) = default;\n</code></pre>\n\n<p>currency.h:</p>\n\n<pre><code>#ifndef CURRENCY_H\n#define CURRENCY_H\n\n#include &lt;QObject&gt;\n\nclass Currency\n{\n    Q_GADGET\n\n    Q_PROPERTY(QString name READ getName CONSTANT)\n\npublic:\n    Currency() : name(\"\") {}\n\n    Currency(const Currency&amp; that) = default;\n    Currency&amp; operator=(const Currency&amp; that) = default;\n\n    static Currency getUSD() {\n        return Currency(\"USD\");\n    }\n\n    QString getName() {\n        return this-&gt;name;\n    }\n\nprivate:\n    Currency(const QString&amp; name) : name(name) {}\n\n    QString name;\n};\n\n#endif // CURRENCY_H\n</code></pre>\n\n<p>money.h:</p>\n\n<pre><code>#ifndef MONEY_H\n#define MONEY_H\n\n#include &lt;QObject&gt;\n\n#include \"currency.h\"\n\nclass Money {\n    Q_GADGET\n\n    Q_PROPERTY(int amount READ getAmount CONSTANT)\n    Q_PROPERTY(Currency currency READ getCurrency CONSTANT)\n\npublic:\n    Money() :\n        Money(0, Currency())\n    {\n\n    }\n\n    Money(int amount, const Currency&amp; currency) :\n        amount(amount),\n        currency(currency)\n    {\n\n    }\n\n\n    int getAmount() {\n        return this-&gt;amount;\n    }\n\n    Currency getCurrency() {\n        return this-&gt;currency;\n    }\n\nprivate:\n    int amount;\n    Currency currency;\n};\n\n#endif // MONEY_H\n</code></pre>\n\n<p>factory.h:</p>\n\n<pre><code>#ifndef FACTORY_H\n#define FACTORY_H\n\n#include &lt;QObject&gt;\n#include &lt;QVariant&gt;\n\n#include \"money.h\"\n\nclass Factory : public QObject {\n    Q_OBJECT\n    Q_DISABLE_COPY(Factory)\n\npublic:\n    static Factory* instance() {\n        static Factory factory;\n        return &amp;factory;\n    }\n\n    Q_INVOKABLE QVariant getMoney() {\n        return QVariant::fromValue(Money(12345, Currency::getUSD()));\n    }\n\nprivate:\n    explicit Factory(QObject* parent = nullptr) :\n        QObject(parent)\n    {\n\n    }\n};\n\n#endif // FACTORY_H\n</code></pre>\n\n<p>main.cpp:</p>\n\n<pre><code>#include &lt;QGuiApplication&gt;\n#include &lt;QQmlApplicationEngine&gt;\n\n#include \"factory.h\"\n#include \"money.h\"\n\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);\n\n    QGuiApplication app(argc, argv);\n\n    qmlRegisterUncreatableType&lt;Money&gt;(\"test\", 1, 0, \"Money\", \"error\");\n    qmlRegisterUncreatableType&lt;Currency&gt;(\"test\", 1, 0, \"Currency\", \"error\");\n    qmlRegisterSingletonType&lt;Factory&gt;(\"test\", 1, 0, \"Factory\",\n                                      [](QQmlEngine* engine, QJSEngine* scriptEngine) -&gt; QObject* {\n        Q_UNUSED(scriptEngine)\n\n        Factory* instance = Factory::instance();\n        engine-&gt;setObjectOwnership(instance, QQmlEngine::ObjectOwnership::CppOwnership);\n\n        return instance;\n    });\n\n    QQmlApplicationEngine engine;\n    engine.load(QUrl(QStringLiteral(\"qrc:/main.qml\")));\n    if (engine.rootObjects().isEmpty())\n        return -1;\n\n    return app.exec();\n}\n</code></pre>\n\n<p>main.qml:</p>\n\n<pre><code>import QtQuick 2.11\nimport QtQuick.Window 2.11\n\nimport test 1.0\n\nWindow {\n    visible: true\n    width: 640\n    height: 480\n    title: qsTr(\"Hello World\")\n\n    MyItem {\n        value: {\n            var money = Factory.getMoney()\n            console.log(money)\n\n            return money\n        }\n\n        anchors.centerIn: parent\n    }\n}\n</code></pre>\n\n<p>MyItem.qml:</p>\n\n<pre><code>import QtQuick 2.10\nimport QtQuick.Controls 2.3\n\n\nItem {\n    id: root\n    property var value\n\n    width: label.width\n    height: label.height\n\n    Component.onCompleted: {\n        console.log(root.value)\n    }\n\n    Label {\n        id: label\n\n        text: root.value.currency.name\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "winforms", "opencv", "user-interface", "c++-cli"], "comments": [{"owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "edited": false, "score": 0, "creation_date": 1535569945, "post_id": 52083910, "comment_id": 91119421, "body": "Have you read this <a href=\"https://www.opencv-srf.com/2011/11/mouse-events.html\" rel=\"nofollow noreferrer\">opencv-srf.com/2011/11/mouse-events.html</a> ?"}, {"owner": {"reputation": 25, "user_id": 10165745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f84f8ab57841a48279ae35bbbb70cda2?s=128&d=identicon&r=PG&f=1", "display_name": "user10165745", "link": "https://stackoverflow.com/users/10165745/user10165745"}, "reply_to_user": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "edited": false, "score": 0, "creation_date": 1535606336, "post_id": 52083910, "comment_id": 91129280, "body": "Yes I&#39;ve gone through that tutorial but I don&#39;t know how to use that callback function in user interface. If you do know how to do it please help me out."}, {"owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "edited": false, "score": 0, "creation_date": 1535615830, "post_id": 52083910, "comment_id": 91133665, "body": "if you use highgui you can try this   <a href=\"https://docs.opencv.org/2.4.13.6/modules/highgui/doc/user_interface.html#setmousecallback\" rel=\"nofollow noreferrer\">docs.opencv.org/2.4.13.6/modules/highgui/doc/&hellip;</a>"}, {"owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "edited": false, "score": 0, "creation_date": 1535616721, "post_id": 52083910, "comment_id": 91134188, "body": "like in this <a href=\"https://jayrambhia.wordpress.com/2012/09/20/roi-bounding-box-selection-of-mat-images-in-opencv/\" rel=\"nofollow noreferrer\">jayrambhia.wordpress.com/2012/09/20/&hellip;</a>"}, {"owner": {"reputation": 25, "user_id": 10165745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f84f8ab57841a48279ae35bbbb70cda2?s=128&d=identicon&r=PG&f=1", "display_name": "user10165745", "link": "https://stackoverflow.com/users/10165745/user10165745"}, "reply_to_user": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "edited": false, "score": 0, "creation_date": 1535649793, "post_id": 52083910, "comment_id": 91155694, "body": "Hey @ralfhtp, I appreciate your help and the links you&#39;ve provided helped me a lot. Again thank you so much."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 10165745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f84f8ab57841a48279ae35bbbb70cda2?s=128&d=identicon&r=PG&f=1", "display_name": "user10165745", "link": "https://stackoverflow.com/users/10165745/user10165745"}, "edited": false, "score": 0, "creation_date": 1535606600, "post_id": 52083970, "comment_id": 91129351, "body": "I understand that when while loop is running inside UI thread, it will make the application hang, then how to get video stream from webcam?"}, {"owner": {"reputation": 847, "user_id": 1593837, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4df3551cd97b874fb063af73ec976f6c?s=128&d=identicon&r=PG", "display_name": "virusrocks", "link": "https://stackoverflow.com/users/1593837/virusrocks"}, "reply_to_user": {"reputation": 25, "user_id": 10165745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f84f8ab57841a48279ae35bbbb70cda2?s=128&d=identicon&r=PG&f=1", "display_name": "user10165745", "link": "https://stackoverflow.com/users/10165745/user10165745"}, "edited": false, "score": 0, "creation_date": 1535705713, "post_id": 52083970, "comment_id": 91174168, "body": "What is the UI Framework that you are using ? I think you need a different pointer event like Pointer over. It depends on the UI framework that you are using."}, {"owner": {"reputation": 25, "user_id": 10165745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f84f8ab57841a48279ae35bbbb70cda2?s=128&d=identicon&r=PG&f=1", "display_name": "user10165745", "link": "https://stackoverflow.com/users/10165745/user10165745"}, "edited": false, "score": 0, "creation_date": 1535722832, "post_id": 52083970, "comment_id": 91184301, "body": "Hey @virusrocks, Above code is written in Microsoft visual studio 2017"}, {"owner": {"reputation": 847, "user_id": 1593837, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4df3551cd97b874fb063af73ec976f6c?s=128&d=identicon&r=PG", "display_name": "virusrocks", "link": "https://stackoverflow.com/users/1593837/virusrocks"}, "reply_to_user": {"reputation": 25, "user_id": 10165745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f84f8ab57841a48279ae35bbbb70cda2?s=128&d=identicon&r=PG&f=1", "display_name": "user10165745", "link": "https://stackoverflow.com/users/10165745/user10165745"}, "edited": false, "score": 0, "creation_date": 1535789835, "post_id": 52083970, "comment_id": 91203139, "body": "That is the IDE that you are working with. I want to know the technology used for creating the UI like XAML or WPF. Anyway, try to find another event like mouse over where you will get the event every time mouse is over a particular part of your UI. there write the logic to do what you want to do. Make sure dont add the while loop, because with every mouse movement you will get the event back. For every mouse over if the mouse hit tests to the surface area of your requirement draw cross hair once."}, {"owner": {"reputation": 25, "user_id": 10165745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f84f8ab57841a48279ae35bbbb70cda2?s=128&d=identicon&r=PG&f=1", "display_name": "user10165745", "link": "https://stackoverflow.com/users/10165745/user10165745"}, "edited": false, "score": 0, "creation_date": 1535811136, "post_id": 52083970, "comment_id": 91208247, "body": "Hi @virusrocks, I used windows form and thanks for your idea i will give it a shot."}, {"owner": {"reputation": 25, "user_id": 10165745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f84f8ab57841a48279ae35bbbb70cda2?s=128&d=identicon&r=PG&f=1", "display_name": "user10165745", "link": "https://stackoverflow.com/users/10165745/user10165745"}, "edited": false, "score": 0, "creation_date": 1536505622, "post_id": 52083970, "comment_id": 91439694, "body": "Hey @virusrocks, yes it did and i got another suggestion from my friend and both of your ideas have really helped me a lot. So thank you so much and have a nice day."}, {"owner": {"reputation": 847, "user_id": 1593837, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4df3551cd97b874fb063af73ec976f6c?s=128&d=identicon&r=PG", "display_name": "virusrocks", "link": "https://stackoverflow.com/users/1593837/virusrocks"}, "reply_to_user": {"reputation": 25, "user_id": 10165745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f84f8ab57841a48279ae35bbbb70cda2?s=128&d=identicon&r=PG&f=1", "display_name": "user10165745", "link": "https://stackoverflow.com/users/10165745/user10165745"}, "edited": false, "score": 0, "creation_date": 1536558917, "post_id": 52083970, "comment_id": 91451044, "body": "Please mark this question as answered if everything worked fine."}], "tags": [], "owner": {"reputation": 847, "user_id": 1593837, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4df3551cd97b874fb063af73ec976f6c?s=128&d=identicon&r=PG", "display_name": "virusrocks", "link": "https://stackoverflow.com/users/1593837/virusrocks"}, "is_accepted": true, "score": 2, "last_activity_date": 1535790274, "last_edit_date": 1535790274, "creation_date": 1535567228, "answer_id": 52083970, "question_id": 52083910, "link": "https://stackoverflow.com/questions/52083910/how-could-i-display-a-crosshair-cursor-with-x-y-coordinates-when-hovering-over-a/52083970#52083970", "title": "How could I display a crosshair cursor with x-y coordinates when hovering over a picturebox?", "body": "<p>IO happens on the UI thread, which is the main application UI rendering thread. Button click is an event handler and will come on the UI thread. If you have a while loop running inside your UI thread, it will make the application hang. Work done on UI thread should be small or Asynchronous.</p>\n\n<p>Edit 1: Just found out that you have marked winform as one of the tag. If you are using winforms, you have to add a MouseHover event handler to your UI controls. Whenever the mouse reaches in this area, this method will be called (<a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.control.mousehover?view=netframework-4.7.2\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.control.mousehover?view=netframework-4.7.2</a>). In this method just write the above code without the while loop. Something like this. </p>\n\n<pre><code>private: System::Void button1_MouseHover(System::Object^  sender, System::EventArgs^  e) {\n    cv::VideoCapture cap;\n    cap.open(0);\n\n    if (!cap.isOpened()) {\n        MessageBox::Show(\"Failed To Open WebCam\");\n        _getch();\n        return;\n    }\n\n    ///query_maximum_resolution(cap, pictureBox1-&gt;Width, pictureBox1-&gt;Height);\n    cap.set(CV_CAP_PROP_FRAME_WIDTH, pictureBox1-&gt;Width);\n    cap.set(CV_CAP_PROP_FRAME_HEIGHT, pictureBox1-&gt;Height);\n\n    Pen^ myPen = gcnew Pen(Brushes::Red);\n\n    cap.read(frame);\n\n    pictureBox1-&gt;Image = mat2bmp.Mat2Bimap(frame);\n    Graphics^ g = Graphics::FromImage(pictureBox1-&gt;Image);\n    Point pos = this-&gt;PointToClient(System::Windows::Forms::Cursor::Position);\n    g-&gt;DrawLine(myPen, pos.X, 0, pos.X, pictureBox1-&gt;Height);\n    g-&gt;DrawLine(myPen, 0, pos.Y, pictureBox1-&gt;Width, pos.Y);\n    pictureBox1-&gt;Refresh();\n    delete g;\n}\n</code></pre>\n\n<p>Note: This event also comes in the UI thread. This will come everytime mouse oves in the region of interest. Hence you will not need the while loop. Adding a while loop here will again result in the same issue that you have asked in the question.</p>\n"}], "owner": {"reputation": 25, "user_id": 10165745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f84f8ab57841a48279ae35bbbb70cda2?s=128&d=identicon&r=PG&f=1", "display_name": "user10165745", "link": "https://stackoverflow.com/users/10165745/user10165745"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "accepted_answer_id": 52083970, "answer_count": 1, "score": 0, "last_activity_date": 1535790274, "creation_date": 1535566941, "question_id": 52083910, "link": "https://stackoverflow.com/questions/52083910/how-could-i-display-a-crosshair-cursor-with-x-y-coordinates-when-hovering-over-a", "title": "How could I display a crosshair cursor with x-y coordinates when hovering over a picturebox?", "body": "<p>I want to make a crosshair pointer when hovering over a picturebox and store a co-ordinates when mouse left button is pressed over a picturebox.</p>\n\n<p>My code looks like below:</p>\n\n<pre><code>private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {\n        cv::VideoCapture cap;\n        cap.open(0);\n\n        if (!cap.isOpened()) {\n            MessageBox::Show(\"Failed To Open WebCam\");\n            _getch();\n            return;\n        }\n\n        ///query_maximum_resolution(cap, pictureBox1-&gt;Width, pictureBox1-&gt;Height);\n        cap.set(CV_CAP_PROP_FRAME_WIDTH, pictureBox1-&gt;Width);\n        cap.set(CV_CAP_PROP_FRAME_HEIGHT, pictureBox1-&gt;Height);\n\n        Pen^ myPen = gcnew Pen(Brushes::Red);\n\n        while (1)\n        {\n            cap.read(frame);\n\n            pictureBox1-&gt;Image = mat2bmp.Mat2Bimap(frame);\n            Graphics^ g = Graphics::FromImage(pictureBox1-&gt;Image);\n            Point pos = this-&gt;PointToClient(System::Windows::Forms::Cursor::Position);\n            g-&gt;DrawLine(myPen, pos.X, 0, pos.X, pictureBox1-&gt;Height);\n            g-&gt;DrawLine(myPen, 0, pos.Y, pictureBox1-&gt;Width, pos.Y);\n            pictureBox1-&gt;Refresh();\n            delete g;\n        }\n    }\n</code></pre>\n\n<p>But when I run the code it becomes slower and non responsive. Any idea to make it fast and efficient.\nAny help would be helpful.</p>\n"}, {"tags": ["c++", "c++11", "templates", "sfinae", "enable-if"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1535567262, "post_id": 52083873, "comment_id": 91118223, "body": "It doesn&#39;t look like you&#39;re actually using C++11. If you&#39;re actually using C++17 we can make things easier with a constexpr if statement"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1535567370, "post_id": 52083873, "comment_id": 91118284, "body": "Related: <a href=\"https://stackoverflow.com/q/51292574/1896169\">stackoverflow.com/q/51292574/1896169</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1535567067, "post_id": 52083919, "comment_id": 91118125, "body": "Ah, and I would need to add the same <code>typename std::enable_if&lt;...&gt;</code> in the definition as well, got it."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1535567156, "post_id": 52083919, "comment_id": 91118160, "body": "Yeah, the gist is not to use <code>class = </code> syntax, but rather use an explicit type. Preferably an integral one so that you can default its value (like we did with <code>int</code> and <code>0</code>)"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1535567240, "post_id": 52083919, "comment_id": 91118212, "body": "My approach is <code>typename&lt;class S, std::enable_if_t&lt;condition&gt;* = nullptr&gt;</code>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1535567306, "post_id": 52083919, "comment_id": 91118247, "body": "@milleniumbug: Whether that is defined behavior or not is up for debate (<code>void*</code> is not a pointer to a class type) Let me find the issue page for that."}, {"owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1535567327, "post_id": 52083919, "comment_id": 91118258, "body": "I see - so why do we need to set = 0 or = nullptr? I&#39;ve seen usages where you didn&#39;t need to do that. Also, could you add the constexpr answer? I&#39;d love to learn about it. I am using c++11 in this case, but still. I have since upvoted and will accept your answer, thanks"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1535567523, "post_id": 52083919, "comment_id": 91118353, "body": "@OneRaynyDay: Updated with C++17"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1535567674, "post_id": 52083919, "comment_id": 91118424, "body": "@milleniumbug: Here&#39;s the reference: <a href=\"https://cplusplus.github.io/EWG/ewg-active.html#175\" rel=\"nofollow noreferrer\">cplusplus.github.io/EWG/ewg-active.html#175</a>"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1535570228, "post_id": 52083919, "comment_id": 91119552, "body": "@AndyG Wow, C++, never failing to surprise me. I hope the issue will be resolved to make it legal."}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 11, "last_activity_date": 1535567846, "last_edit_date": 1535567846, "creation_date": 1535566976, "answer_id": 52083919, "question_id": 52083873, "link": "https://stackoverflow.com/questions/52083873/c-sfinae-enable-if-t-in-member-function-how-to-disambiguate/52083919#52083919", "title": "C++ SFINAE enable_if_t in member function, how to disambiguate?", "body": "<p>since default arguments are not part of a function signature, make them not default</p>\n\n<pre><code>class foo{\n    template &lt;class S, typename std::enable_if&lt;std::is_integral&lt;S&gt;::value, int&gt;::type = 0&gt;\n    void bar(S&amp;&amp; s);\n    template &lt;class S, typename std::enable_if&lt;!std::is_integral&lt;S&gt;::value, int&gt;::type = 0&gt;\n    void bar(S&amp;&amp; s);\n};\n</code></pre>\n\n<h2><a href=\"https://wandbox.org/permlink/JDmCSFLrsMkdiAxY\" rel=\"noreferrer\">Live Demo</a></h2>\n\n<hr>\n\n<p>EDIT: by popular demand, Here's the same code in C++17:</p>\n\n<pre><code>class foo{\npublic:\n    template &lt;class S&gt;\n    void bar(S&amp;&amp; s)\n    {\n        if constexpr(std::is_integral_v&lt;S&gt;)\n            std::cout &lt;&lt; \"is integral\\n\";\n        else\n            std::cout &lt;&lt; \"NOT integral\\n\";\n    }\n};\n</code></pre>\n\n<p>constexpr if statements are special to the compiler because the branch is chosen at compile time, and the non-taken branch <em>isn't even instantiated</em></p>\n\n<p><a href=\"https://wandbox.org/permlink/sjPAFNhXYFHb9xKd\" rel=\"noreferrer\">C++17 Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1535567502, "post_id": 52084023, "comment_id": 91118344, "body": "Ah, thank you, I haven&#39;t yet familiarized myself with constexpr. Since I am using c++11 I&#39;ll have to accept Andy&#39;s answer, but I have upvoted yours"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1535568214, "post_id": 52084023, "comment_id": 91118667, "body": "@OneRaynyDay, Andy has updated his answer, so I removed <code>constexpr</code> solution and added another one for C++11."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1535570058, "post_id": 52084023, "comment_id": 91119460, "body": "@Evgeny: Love tagged dispatch +1. You can just pass std::is_integral&lt;S&gt;{} directly to <code>bar</code> without needing to wrap it with an <code>integral_constant</code> <a href=\"https://wandbox.org/permlink/vwAZpZFsb6rtff10\" rel=\"nofollow noreferrer\">Demo</a>"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1535570306, "post_id": 52084023, "comment_id": 91119586, "body": "@AndyG, very good remark, thanks. <code>std::is_integral</code> inherits from <code>std::integral_constant</code>. Corrected the answer."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1535570442, "post_id": 52084023, "comment_id": 91119645, "body": "@Evgeny: Precisely. Possible object slicing? Definitely! Do we care? Heck no!"}], "tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": false, "score": 6, "last_activity_date": 1535570111, "last_edit_date": 1535570111, "creation_date": 1535567450, "answer_id": 52084023, "question_id": 52083873, "link": "https://stackoverflow.com/questions/52083873/c-sfinae-enable-if-t-in-member-function-how-to-disambiguate/52084023#52084023", "title": "C++ SFINAE enable_if_t in member function, how to disambiguate?", "body": "<p>With C++11 compiler another option is to use tag dispatching.</p>\n\n<pre><code>template &lt;class S&gt;\nvoid bar(S&amp;&amp; s)\n{\n    bar(std::forward&lt;S&gt;(s), std::is_integral&lt;S&gt;{});\n}\n\ntemplate &lt;class S&gt;\nvoid bar(S&amp;&amp; s, std::true_type)\n{\n    ... \n}\n\ntemplate &lt;class S&gt;\nvoid bar(S&amp;&amp; s, std::false_type)\n{\n    ... \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1535567695, "post_id": 52084053, "comment_id": 91118435, "body": "Ah, that&#39;s clever. Thanks :)"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1535569187, "post_id": 52084053, "comment_id": 91119099, "body": "What is the point of redefining <code>std::enable_if_t</code> which already has <code>T = void</code> as a default argument? Your code compiles with <code>std::enable_if_t</code> just fine (using C++14). Maybe you wanted to write <code>template &lt;bool B, typename T = void&gt; using enable_if_t = typename std::enable_if&lt;B, T&gt;::type;</code> to make it C++11?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1535569225, "post_id": 52084053, "comment_id": 91119115, "body": "@Evgeny Yeah that&#39;s what I meant. Thanks!"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 5, "last_activity_date": 1535569239, "last_edit_date": 1535569239, "creation_date": 1535567613, "answer_id": 52084053, "question_id": 52083873, "link": "https://stackoverflow.com/questions/52083873/c-sfinae-enable-if-t-in-member-function-how-to-disambiguate/52084053#52084053", "title": "C++ SFINAE enable_if_t in member function, how to disambiguate?", "body": "<p>You can still do this in the return type just fine. Just keep the default of <code>enable_if</code> (which is <code>void</code>). Even if you're just on C++11, just add this alias:</p>\n\n<pre><code>template &lt;bool B, typename T=void&gt;\nusing enable_if_t = typename std::enable_if&lt;B, T&gt;::type;\n</code></pre>\n\n<p>And then you can do:</p>\n\n<pre><code>template &lt;class S&gt;\nenable_if_t&lt;std::is_integral&lt;S&gt;::value&gt;\nbar(S);\n\ntemplate &lt;class S&gt;\nenable_if_t&lt;!std::is_integral&lt;S&gt;::value&gt;\nbar(S);\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>template &lt;class S&gt;\nauto bar(S) -&gt; enable_if_t&lt;std::is_integral&lt;S&gt;::value&gt;\n\ntemplate &lt;class S&gt;\nauto bar(S) -&gt; enable_if_t&lt;!std::is_integral&lt;S&gt;::value&gt;\n</code></pre>\n\n<p>Either way, you have two properly disambiguated functions that return <code>void</code>.</p>\n"}], "owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1582, "favorite_count": 0, "accepted_answer_id": 52083919, "answer_count": 3, "score": 6, "last_activity_date": 1535570111, "creation_date": 1535566745, "last_edit_date": 1535567653, "question_id": 52083873, "link": "https://stackoverflow.com/questions/52083873/c-sfinae-enable-if-t-in-member-function-how-to-disambiguate", "title": "C++ SFINAE enable_if_t in member function, how to disambiguate?", "body": "<p>Suppose we have some SFINAE member function:</p>\n\n<pre><code>class foo{\n    template &lt;class S, class = std::enable_if_t&lt;std::is_integral&lt;S&gt;::value, S&gt;\n    void bar(S&amp;&amp; s);\n    template &lt;class S, class = std::enable_if_t&lt;!std::is_integral&lt;S&gt;::value, S&gt;\n    void bar(S&amp;&amp; s);\n}\n</code></pre>\n\n<p>If we declared it as above, then how can we define them? Both of their function signatures would look like:</p>\n\n<pre><code>template &lt;class S, class&gt;\ninline void foo::bar(S&amp;&amp; s){ ... do something ... }\n</code></pre>\n\n<p>I have seen examples where one returns an <code>std::enable_if_t&lt;...&gt;</code> like:</p>\n\n<pre><code>template &lt;class S, class&gt;\nauto bar(S&amp;&amp; s) -&gt; std::enable_if_t&lt;!std::is_integral&lt;S&gt;::value, S&gt;(...){\n    ... do something ...\n}\n</code></pre>\n\n<p>To disambiguate based off of the return type. But I don't want to return anything.</p>\n"}, {"tags": ["c++", "matrix", "graph", "shortest-path"], "answers": [{"tags": [], "owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "is_accepted": true, "score": 0, "last_activity_date": 1535567609, "last_edit_date": 1535567609, "creation_date": 1535566764, "answer_id": 52083878, "question_id": 52083792, "link": "https://stackoverflow.com/questions/52083792/shortest-path-between-q-matrix-cells/52083878#52083878", "title": "Shortest Path Between Q Matrix Cells", "body": "<p>Calculate the shortest path between every Q and starting and finishing point.  Create a graph with these distances. </p>\n\n<p>Since you can only move orthogonally, the shortest distance between two points is the sum of the absolute differences between their co-ordinates.</p>\n\n<p>Select an algorithm to visit all nodes in your distance graph.  <a href=\"https://math.stackexchange.com/q/55221/408127\">Possible starting point</a>  Bottom line is that this has become the \"travelling salesman problem\" and you will need to decide which of the many available algorithms suits you best.</p>\n\n<p>If I am understanding your input, the distance graph looks like this</p>\n\n<pre><code>Locations\n\nB  0 0\nQ1 0 1    \nQ2 4 2  \nQ3 5 2 \nE  3 3\n\nDistances\n\nB  0  1  6  7  6\nQ1 0  0  5  6  5\nQ2 0  0  0  1  2\nQ3 0  0  0  0  3\nE  0  0  0  0  0\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 8954496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec422da175e6c5db8f3028b46d1e7fb?s=128&d=identicon&r=PG&f=1", "display_name": "Xx_DarDoAzuL_xX", "link": "https://stackoverflow.com/users/8954496/xx-dardoazul-xx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 52083878, "answer_count": 1, "score": 0, "last_activity_date": 1535567609, "creation_date": 1535566384, "last_edit_date": 1535566645, "question_id": 52083792, "link": "https://stackoverflow.com/questions/52083792/shortest-path-between-q-matrix-cells", "title": "Shortest Path Between Q Matrix Cells", "body": "<p>I saw this problem in a local competition and I am trying to solve it,</p>\n\n<p>I am given a matrix with '<strong>r</strong>' rows and '<strong>c</strong>' columns. Then I am given '<strong>Q</strong>' cells,</p>\n\n<p>My task is to find the shortest path: Starting at the top left corner '<strong>(0,0)</strong>' , ending at the bottom right corner '<strong>(row-1,column-1)</strong>' and travessing all '<strong>Q</strong>' cells . I can move either right, left, up and down.</p>\n\n<p>Brute Force is out of option (has I only have 1 second of CPU time and I can be given at most 50 columns and rows).</p>\n\n<p>Here is a Sample Input:</p>\n\n<pre><code>6 3   \n3        \n0 1    \n4 2  \n5 2 \n</code></pre>\n\n<p>Here is the Sample Output:</p>\n\n<pre><code>7\n</code></pre>\n\n<p>I am thinking about some sort of BFS, but I have no idea how to apply it to this specific problem.</p>\n\n<p>Any help or advise would be much appreciated !</p>\n"}, {"tags": ["c++", "arrays", "valgrind"], "comments": [{"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 4, "creation_date": 1535566485, "post_id": 52083748, "comment_id": 91117877, "body": "Arrays are 0-based and include n elements not n + 1.  So <code>int foo[10]</code> is only valid for foo[0] ... foo[9] not foo[10] and this is a bug: <code>if (_count &lt;= _size)</code>."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 3, "creation_date": 1535566574, "post_id": 52083748, "comment_id": 91117922, "body": "Please, edit your question and show a <a href=\"https://stackoverflow.com/help/mcve\">mcve</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1535566709, "post_id": 52083748, "comment_id": 91117981, "body": "Use containers and/or smart pointers. <i>Not</i> manual memory management (<code>new</code>/<code>delete</code>) - that stuff is error prone and mostly obsolete these days."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1535566756, "post_id": 52083748, "comment_id": 91118001, "body": "[OT]: <code>top + 1</code> and <code>count</code> seems to be always equal, so one seems redundant. Traditional terms are <code>size</code> and <code>capacity</code> btw."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1535566911, "post_id": 52083748, "comment_id": 91118073, "body": "Resizing policy is generally to multiply by a constant (<code>2</code>) to reduce amortized complexity to <code>O(1)</code>, instead of your current <code>O(n)</code>."}, {"owner": {"reputation": 3033, "user_id": 2061081, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/1bc7f790fa87d4b7c2cd1996b41d13b6?s=128&d=identicon&r=PG", "display_name": "4xy", "link": "https://stackoverflow.com/users/2061081/4xy"}, "edited": false, "score": 0, "creation_date": 1535566946, "post_id": 52083748, "comment_id": 91118083, "body": "Just use <code>std::stack</code> and don\u2019t waste the time."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1535567131, "post_id": 52083748, "comment_id": 91118152, "body": "I once introduced another index variable in order to avoid off-by-one bugs. Then I had twice as many sources for off-by-one bugs. It was not the best idea I&#39;ve ever had. (Not the worst either, unfortunately.)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1535568227, "post_id": 52083748, "comment_id": 91118675, "body": "Use std::stack and head off early for a drink."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9540059, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216083692553392/picture?type=large", "display_name": "Riccardo", "link": "https://stackoverflow.com/users/9540059/riccardo"}, "edited": false, "score": 0, "creation_date": 1535567536, "post_id": 52083895, "comment_id": 91118358, "body": "actually I tried also this condition but with that It prints _count=0 after adding the 11th element"}, {"owner": {"reputation": 21, "user_id": 9540059, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216083692553392/picture?type=large", "display_name": "Riccardo", "link": "https://stackoverflow.com/users/9540059/riccardo"}, "edited": false, "score": 0, "creation_date": 1535567976, "post_id": 52083895, "comment_id": 91118553, "body": "okay I was putting _count++ after the delete statement, now it works fine. Thank you."}], "tags": [], "owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "is_accepted": false, "score": 2, "last_activity_date": 1535566850, "creation_date": 1535566850, "answer_id": 52083895, "question_id": 52083748, "link": "https://stackoverflow.com/questions/52083748/invalid-read-of-size-4-incrementing-size-of-an-array/52083895#52083895", "title": "Invalid read of size 4 incrementing size of an array", "body": "<p>As mentioned by Dave S, the <code>if (_count &lt;= _size)</code> condition is causing your heap corruption. Changing the condition to <code>if (_count &lt; _size)</code> will result in the behavior you expect.</p>\n\n<p>As it is, you will iterate from 0 to 10, for eleven total pushes before triggering overflow.</p>\n"}, {"tags": [], "owner": {"reputation": 3033, "user_id": 2061081, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/1bc7f790fa87d4b7c2cd1996b41d13b6?s=128&d=identicon&r=PG", "display_name": "4xy", "link": "https://stackoverflow.com/users/2061081/4xy"}, "is_accepted": false, "score": 0, "last_activity_date": 1535567999, "last_edit_date": 1535567999, "creation_date": 1535567659, "answer_id": 52084065, "question_id": 52083748, "link": "https://stackoverflow.com/questions/52083748/invalid-read-of-size-4-incrementing-size-of-an-array/52084065#52084065", "title": "Invalid read of size 4 incrementing size of an array", "body": "<p>You said 11th push causes the error. It seems the reason is the <code>&lt;=</code>. When the <code>count</code> is equal <code>size</code> you should extend the array, but your code pushes the item past the end element.</p>\n\n<p>Note, that common case is the errors on the range edges. To avoid such a things use unit tests. Also try to avoid develop things that are already done, just use one of existing.</p>\n"}], "owner": {"reputation": 21, "user_id": 9540059, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216083692553392/picture?type=large", "display_name": "Riccardo", "link": "https://stackoverflow.com/users/9540059/riccardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1535567999, "creation_date": 1535566188, "question_id": 52083748, "link": "https://stackoverflow.com/questions/52083748/invalid-read-of-size-4-incrementing-size-of-an-array", "title": "Invalid read of size 4 incrementing size of an array", "body": "<p>i'm having 4 errors running Valgrind trying to increment an array (initially of size 10) that i use for a templated stack, valgrind gives me 4 errors when i try to add an 11th element to the array (exactly when I have to increase the dimensions during the push):</p>\n\n<pre><code>class stack {\n\nprivate:\n    int _size = 10;\n    T *_data;\n    int _top;\n    int _count = 0;\n\npublic:\n\n// costructor used\n   stack(int s) {\n       this-&gt;_size = s;\n       _data = new T[_size];\n       this-&gt;_top = -1;\n\n   }\n\n   ....\n\n   void push(T v) {\n        if (_count &lt;= _size) {\n\n        this-&gt;_top++;\n        this-&gt;_data[_top] = v;  \n        this-&gt;_count++;\n       }else{\n        //HEAP ERRORS HERE ++++++++\n        _size++;\n        T *temp = new T[_size];\n         for(int i = 0; i &lt; _top; i++) {\n            temp[i] = _data[i];\n        }\n        delete [] _data;\n        _data=temp;\n        _data[_top] = v;        \n        this-&gt;_top++;\n        this-&gt;_count++;         \n    }\n</code></pre>\n\n<p>I'm not sure about the new operator and the delete[] after the else statement, I think I'm having problems just there but i couldn't figure out another way to solve it. </p>\n\n<p>In main.cpp i only push 11 elements in the templated stack: </p>\n\n<pre><code>stack&lt;int&gt; s;\ns.push(1);\ns.push(2);\ns.push(3);\ns.push(4);\ns.push(5);\ns.push(6);\ns.push(7);\ns.push(8);\ns.push(9);\ns.push(10);\ns.push(11);\n</code></pre>\n\n<p>this is valgrind's output</p>\n\n<pre><code> ==4178== Invalid write of size 4\n ==4178==    at 0x10921E: stack&lt;int&gt;::push(int) (stack.h:85)\n ==4178==    by 0x108ED2: main (main.cpp:32)\n ==4178==  Address 0x5b82ca8 is 0 bytes after a block of size \n 40 alloc'd\n ==4178==    at 0x4C3089F: operator new[](unsigned long) (in \n /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n ==4178==    by 0x109144: stack&lt;int&gt;::stack() (stack.h:28)\n ==4178==    by 0x108B8D: main (main.cpp:9)\n  HEAP SUMMARY:\n ==4178==     in use at exit: 0 bytes in 0 blocks\n ==4178==   total heap usage: 4 allocs, 4 frees, 73,808 bytes \n allocated\n ==4178== \n ==4178== All heap blocks were freed -- no leaks are possible\n ==4178== \n ==4178== For counts of detected and suppressed errors, rerun with: -v\n ==4178== ERROR SUMMARY: 4 errors from 4 contexts (suppressed: 0 from \n 0)\n</code></pre>\n\n<p>Thank you. </p>\n"}, {"tags": ["c++", "backtracking"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1535567251, "post_id": 52083711, "comment_id": 91118218, "body": "<i>&quot;it is not displaying anything on the output screen.&quot;</i> So computation is not finished yet. There is a huge number of possibility to test, so unless you have infinite loop, checking each those possibilities take times."}, {"owner": {"reputation": 27, "user_id": 10291359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8431ea41ecb425879c60a18f1e4261b5?s=128&d=identicon&r=PG&f=1", "display_name": "pijush biswas", "link": "https://stackoverflow.com/users/10291359/pijush-biswas"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1535568200, "post_id": 52083711, "comment_id": 91118661, "body": "Ah, but is my code correct,I mean can it produce the correct output?"}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1535583903, "post_id": 52083711, "comment_id": 91124654, "body": "@FeiXiang n is a macro, decl is possible"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "reply_to_user": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1535588508, "post_id": 52083711, "comment_id": 91125619, "body": "@138 Oops, missed that at the top."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1535588552, "post_id": 52083711, "comment_id": 91125628, "body": "Returning anything other than 0 from <code>main()</code> generally signals that the program did not run successfully."}], "answers": [{"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1535596412, "post_id": 52088022, "comment_id": 91127173, "body": "The pattern is obviously not quadratic. (It has a minimum when x=-b/2a near 5.432?) Recursive algorithms tend to take exponential time, which is more like your data."}, {"owner": {"reputation": 767718, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1535607411, "post_id": 52088022, "comment_id": 91129554, "body": "@aschepler, yes, that was just an initial calculation. Have changed the text to show that it may not be what the actual formula is. Regardless of that, the large jump at 6x6 and <i>massive</i> jump at 7x7 means that 8x8 may well not be finished before the heat death of the universe :-)"}], "tags": [], "owner": {"reputation": 767718, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 3, "last_activity_date": 1535617252, "last_edit_date": 1535617252, "creation_date": 1535592114, "answer_id": 52088022, "question_id": 52083711, "link": "https://stackoverflow.com/questions/52083711/having-difficulty-in-chess-knights-tour/52088022#52088022", "title": "Having difficulty in chess knights tour", "body": "<p>Let's assume for the time being that your algorithm is correct since it appears to produce something useful for at least <code>n == 6</code>:</p>\n\n<pre><code> 0  13  20  23  34  11  \n21  30  35  12  19  24  \n14   1  22  31  10  33  \n29   4   7  16  25  18  \n 6  15   2  27  32   9  \n 3  28   5   8  17  26  \n</code></pre>\n\n<p>Here are the clock time results for running your code with various values of <code>n</code>:</p>\n\n<pre><code>===== 1  0m  0.001s\n===== 2  0m  0.001s\n===== 3  0m  0.003s\n===== 4  0m  0.002s\n===== 5  0m  0.070s\n===== 6  0m 35.997s\n===== 7  ...\n</code></pre>\n\n<p>You'll notice I <em>don't</em> yet have the figure for <code>n = 7</code> in there, it's still going, at 5.5 hours and counting :-)</p>\n\n<p>Since it will be going for at <em>least</em> that long (some 330 minutes), we can probably calculate a <em>minimal</em> figure for size 8 using regression analysis (with a quadratic polynomial using just the data for sizes 5, 6 and as yet incomplete 7)<sup>(a)</sup>. Based on those calculations, that minimal figure would be about 16.5 hours.</p>\n\n<p>However, even if it's <em>not</em> quadratic, the fact that it jumps to 36 seconds for a 6x6 board and to (at least) 5.5 hours for 7x7 means that the algorithm you are using just does not scale well. So what you'll probably find is that it <em>is</em> working, you may just have to wait a while. Possibly a <em>long</em> while :-)</p>\n\n<hr>\n\n<p><sup>(a)</sup> In case you're interested (or want to check/critique my methods), this was my analysis. Warning: math ahead ...</p>\n\n<p>We have the data set:</p>\n\n<pre><code>x (value of n)   y (seconds taken)\n--------------   -----------------\n      5                 0.07\n      6                36.00\n      7               600.00 (when it had been running ten minutes)\n</code></pre>\n\n<p>Using the formula:</p>\n\n<pre><code>y = ax^2 + bx + c\n</code></pre>\n\n<p>We end up with the simultaneous equations:</p>\n\n<pre><code>  0.07 = 25a + 5b + c (1)\n 36    = 36a + 6b + c (2)\n600    = 49a + 7b + c (3)\n</code></pre>\n\n<p>Subtracting pairs gives us:</p>\n\n<pre><code>(2) - (1):  35.93 = 11a + b (4)\n(3) - (2): 564    = 13a + b (5)\n\n(5) - (4): 528.07 = 2a\n</code></pre>\n\n<p>So <code>a = 264.035</code>. Substituting that back in to <code>(5)</code> gives us <code>b = -2868.455</code> and substituting <code>a</code> and <code>b</code> into <code>(3)</code> gives us <code>c = 7741.47</code>. Putting those three values into equations <code>(1)</code>, <code>(2)</code> and <code>(3)</code> gives us the expected values.</p>\n\n<p>That's the <em>method</em> used (from my high school days) but, of course, it can be better done with a quick and dirty Python program that works quicly when the <code>600</code> figure changes:</p>\n\n<pre><code>import sys\n\ny5 = 0.07 ; y6 = 36 ; y7 = int(sys.argv[1]) * 60\n\na = ((y7 - y6) - (y6 - y5)) / 2\nb = (y7 - y6) - 13 * a\nc = y7 - 49 * a - 7 * b\n\ny8 = 64 * a + 8 * b + c\nprint(y8, y8 / 3600)\n</code></pre>\n\n<p>You can just run that, providing the current value for size 7 and it will push out the minimal figure (in seconds and hours).</p>\n"}], "owner": {"reputation": 27, "user_id": 10291359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8431ea41ecb425879c60a18f1e4261b5?s=128&d=identicon&r=PG&f=1", "display_name": "pijush biswas", "link": "https://stackoverflow.com/users/10291359/pijush-biswas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1535617252, "creation_date": 1535566006, "last_edit_date": 1535590855, "question_id": 52083711, "link": "https://stackoverflow.com/questions/52083711/having-difficulty-in-chess-knights-tour", "title": "Having difficulty in chess knights tour", "body": "<p>I've tried writing a code for knight's tour problem using backtracking. My code is working for 4x4 matrix, but for 8x8 matrix it is not displaying anything on the output screen.</p>\n\n<p>I don't know what am I doing wrong.</p>\n\n<p>This is how my code works:</p>\n\n<p>If all squares are visited</p>\n\n<pre><code>print the solution\n</code></pre>\n\n<p>else</p>\n\n<ul>\n<li><p>Add one of the next moves to solution vector and recursively \ncheck if this move leads to a solution. (A Knight can make maximum \neight moves. We choose one of the 8 moves in this step).</p></li>\n<li><p>If the move chosen in the above step doesn't lead to a solution\nthen remove this move from the solution vector and try other \nalternative moves.</p></li>\n<li><p>If none of the alternatives work then return false (Returning false \nwill remove the previously added item in recursion and if false is \nreturned by the initial call of recursion then \"no solution exists\")</p></li>\n</ul>\n\n<p>Here is the code that I wrote:   </p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n#define n 8\nint safe(int c[n][n],int i, int j)\n{\n    if((i&gt;=0&amp;&amp;i&lt;n)&amp;&amp;(j&gt;=0&amp;&amp;j&lt;n))\n    {\n     if(c[i][j])\n      return 0;\n     else \n      return 1;\n    }\n    return 0;\n}\n\n    int knightstour(int c[n][n],int i,int j,int k)\n  {\n      if(k==n*n)\n     {\n      for(i=0;i&lt;n;i++)\n      {\n          for(j=0;j&lt;n;j++)\n             cout&lt;&lt;c[i][j]&lt;&lt;\"  \";\n           cout&lt;&lt;endl;     \n       }\n       return 1;\n      }\n     else\n     {\n       c[i][j]=k;\n          if(safe(c,i+2,j+1))\n          {\n              if(knightstour(c,i+2,j+1,k+1))\n                return 1;\n          }\n\n          if(safe(c,i+2,j-1))\n          {\n              if(knightstour(c,i+2,j-1,k+1))\n                return 1;\n          }\n\n          if(safe(c,i-2,j+1))\n          {\n              if(knightstour(c,i-2,j+1,k+1))\n                return 1;\n          }\n\n          if(safe(c,i-2,j-1))\n          {\n              if(knightstour(c,i-2,j-1,k+1))\n                return 1;\n          }\n\n          if(safe(c,i+1,j+2))\n          {\n           if(knightstour(c,i+1,j+2,k+1))\n             return 1;\n           }\n\n          if(safe(c,i-1,j+2))\n          {\n           if(knightstour(c,i-1,j+2,k+1))\n             return 1;\n          }\n\n          if(safe(c,i+1,j-2))\n          {\n           if(knightstour(c,i+1,j-2,k+1))\n             return 1;\n          }\n\n          if(safe(c,i-1,j-2))\n          {\n           if(knightstour(c,i-1,j-2,k+1))\n             return 1;\n          }\n\n        c[i][j]=0;\n        return 0;\n      }\n   }\n  int main()\n {\n   int c[n][n]={0};\n   if(!knightstour(c,0,0,0))\n   cout&lt;&lt;\"solution doesn't exist\";\n   return 1;\n }\n</code></pre>\n"}, {"tags": ["c++", "timer", "arduino", "cpu-registers", "pwm"], "answers": [{"comments": [{"owner": {"reputation": 417, "user_id": 892482, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cbe4a87f12b55f0b68cbd5b2a3a5402?s=128&d=identicon&r=PG", "display_name": "Bort", "link": "https://stackoverflow.com/users/892482/bort"}, "edited": false, "score": 0, "creation_date": 1535723312, "post_id": 52088936, "comment_id": 91184601, "body": "Your example results in both outputs being held HIGH. I don&#39;t understand <i>why</i> though. In fact pretty much any change to the code has the same result. See me edits. I&#39;m in over my head here, so I&#39;m sorry but I am not yet able to take what you&#39;ve provided and get something working. I&#39;m reading the datasheet over and over but I don&#39;t understand why your example doesn&#39;t work."}, {"owner": {"reputation": 6294, "user_id": 786489, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/afd6478b35f6094efdf29e87da002d81?s=128&d=identicon&r=PG", "display_name": "Stefan Bossbaly", "link": "https://stackoverflow.com/users/786489/stefan-bossbaly"}, "reply_to_user": {"reputation": 417, "user_id": 892482, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cbe4a87f12b55f0b68cbd5b2a3a5402?s=128&d=identicon&r=PG", "display_name": "Bort", "link": "https://stackoverflow.com/users/892482/bort"}, "edited": false, "score": 0, "creation_date": 1535727331, "post_id": 52088936, "comment_id": 91187056, "body": "In your code you set <code>OCR1A</code> to <code>0x0009</code>. That is an extremely low value and means your duty cycle is less than 1%. For a 35% duty cycle you should set <code>OCR1A</code> to <code>0x5999</code>. Are you measuring the output with a oscilloscope?"}, {"owner": {"reputation": 417, "user_id": 892482, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cbe4a87f12b55f0b68cbd5b2a3a5402?s=128&d=identicon&r=PG", "display_name": "Bort", "link": "https://stackoverflow.com/users/892482/bort"}, "edited": false, "score": 0, "creation_date": 1535730918, "post_id": 52088936, "comment_id": 91188945, "body": "Yes, I&#39;m using a scope. With OCR1A set to 0x0009, I get a freq of 25.00kHz and a HIGH duration of 4.00\u03bcs. With it set to 0x00FF, I get a freq of 976.6Hz and it&#39;s HIGH for 4.00\u03bcs. Can you deduce why that would be?"}, {"owner": {"reputation": 6294, "user_id": 786489, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/afd6478b35f6094efdf29e87da002d81?s=128&d=identicon&r=PG", "display_name": "Stefan Bossbaly", "link": "https://stackoverflow.com/users/786489/stefan-bossbaly"}, "reply_to_user": {"reputation": 417, "user_id": 892482, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cbe4a87f12b55f0b68cbd5b2a3a5402?s=128&d=identicon&r=PG", "display_name": "Bort", "link": "https://stackoverflow.com/users/892482/bort"}, "edited": false, "score": 0, "creation_date": 1535731299, "post_id": 52088936, "comment_id": 91189146, "body": "<code>OCR1A</code> is the compare register. Changing it should only effect your duty cycle and not your frequency since the &quot;Fast PWM&quot; mode 14 (<code>WGM11</code>, <code>WGM12</code>, <code>WGM13</code>) is selected. To change the frequency you would have to set the &quot;Clock Selection Bit&quot; in the <code>TCCR1B</code> register. The timer should count up to the value in <code>OCR1A</code> then invert the value then count up to the value in <code>ICR1</code> and then invert again. You can try selecting another PWM Mode with less resolution if you want. I can update my answer to include another mode if you want."}, {"owner": {"reputation": 417, "user_id": 892482, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cbe4a87f12b55f0b68cbd5b2a3a5402?s=128&d=identicon&r=PG", "display_name": "Bort", "link": "https://stackoverflow.com/users/892482/bort"}, "edited": false, "score": 0, "creation_date": 1535732540, "post_id": 52088936, "comment_id": 91189738, "body": "If I set just CS11 with <code>TCCR1B |= (1 &lt;&lt; CS11);</code>, I still get the 25kHz 4\u03bcs signal (no change). If I set just CS12, then both D9 and D10 are held LOW. (Keep in mind that the oscillating signal I see is on D10, and D9 is typically HIGH.) I will try anything you throw at me. I didn&#39;t find changing the mode to help either, but I may have used it wrong. Once I get something actually working as it should, I should be able to work out the specifics for my project. But right now, it seems like the registers are doing something they shouldn&#39;t be.  Odd that timer2 works as expected and timer1 does not."}], "tags": [], "owner": {"reputation": 6294, "user_id": 786489, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/afd6478b35f6094efdf29e87da002d81?s=128&d=identicon&r=PG", "display_name": "Stefan Bossbaly", "link": "https://stackoverflow.com/users/786489/stefan-bossbaly"}, "is_accepted": false, "score": 1, "last_activity_date": 1535600640, "creation_date": 1535600640, "answer_id": 52088936, "question_id": 52083686, "link": "https://stackoverflow.com/questions/52083686/proper-implementation-of-timer1-for-pwm-generation/52088936#52088936", "title": "Proper implementation of Timer1 for PWM generation", "body": "<p>Timer1 has 2 outputs, <code>OC1A</code> and <code>OC1B</code>. Both run off the same hardware timer and are therefore synchronized. The timer is capable to running in three different modes: Fast PWM Mode, Phase Corrected PWM Mode and Phase and Frequency Corrected Mode. You will need to chose the correct mode for you as well as the correct timer prescaler that fits your application. Below is an example.</p>\n\n<pre><code>// Timer1 Resolution 16-bit\n// Timer1 A output at 25% Duty Cycle, Fast PWM Mode\n// Timer1 B output at 75% Duty Cycle, Fast PWM Mode \n\n#include &lt;avr/io.h&gt;\n\nint main(void)\n{\n    // Set GPIO for timer1 output for OC1A and OC1B\n    DDRB |= (1 &lt;&lt; DDB1) | (1 &lt;&lt; DDB2);\n\n    ICR1 = 0xFFFF;\n\n    // 25% duty cycle\n    OCR1A = 0x3FFF;\n\n    // 75% duty cycle\n    OCR1B = 0xBFFF;\n\n    // set none-inverting mode\n    TCCR1A |= ((1 &lt;&lt; COM1A1) | (1 &lt;&lt; COM1B1));\n\n    // Fast PWM mode\n    TCCR1A |= (1 &lt;&lt; WGM11);\n    TCCR1B |= (1 &lt;&lt; WGM12)|(1 &lt;&lt; WGM13);\n\n    // START the timer with no prescaler\n    TCCR1B |= (1 &lt;&lt; CS10);\n\n    while (1);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 417, "user_id": 892482, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cbe4a87f12b55f0b68cbd5b2a3a5402?s=128&d=identicon&r=PG", "display_name": "Bort", "link": "https://stackoverflow.com/users/892482/bort"}, "edited": false, "score": 0, "creation_date": 1605640997, "post_id": 64864315, "comment_id": 114711768, "body": "It looks like you&#39;ve solved this. I will test this out and report back."}, {"owner": {"reputation": 23253, "user_id": 23118, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fab0965d392f9190012e9f8368c203d0?s=128&d=identicon&r=PG", "display_name": "hlovdal", "link": "https://stackoverflow.com/users/23118/hlovdal"}, "reply_to_user": {"reputation": 417, "user_id": 892482, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cbe4a87f12b55f0b68cbd5b2a3a5402?s=128&d=identicon&r=PG", "display_name": "Bort", "link": "https://stackoverflow.com/users/892482/bort"}, "edited": false, "score": 0, "creation_date": 1606996416, "post_id": 64864315, "comment_id": 115136034, "body": "@Bort Did you have any success?"}, {"owner": {"reputation": 417, "user_id": 892482, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cbe4a87f12b55f0b68cbd5b2a3a5402?s=128&d=identicon&r=PG", "display_name": "Bort", "link": "https://stackoverflow.com/users/892482/bort"}, "edited": false, "score": 0, "creation_date": 1611941952, "post_id": 64864315, "comment_id": 116621008, "body": "Sadly I still haven&#39;t been able to setup my bench for this test yet. Stay tuned!"}], "tags": [], "owner": {"reputation": 23253, "user_id": 23118, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fab0965d392f9190012e9f8368c203d0?s=128&d=identicon&r=PG", "display_name": "hlovdal", "link": "https://stackoverflow.com/users/23118/hlovdal"}, "is_accepted": false, "score": 0, "last_activity_date": 1605554245, "creation_date": 1605554245, "answer_id": 64864315, "question_id": 52083686, "link": "https://stackoverflow.com/questions/52083686/proper-implementation-of-timer1-for-pwm-generation/64864315#64864315", "title": "Proper implementation of Timer1 for PWM generation", "body": "<p>Your problem is the order of initialization of the registers. Your Timer 2 code</p>\n<pre><code>TCCR2B = _BV(WGM22) | _BV(CS21);\nTCCR2A = _BV(COM2A0) | _BV(COM2B1) | _BV(COM2B0) | _BV(WGM20);\nOCR2A = 40; \nOCR2B = 16; //40*0.35=16\n</code></pre>\n<p>works because OCR2A and OCR2B are initialized <strong>after</strong> TCCR2A and TCCR2A are configured. Your Timer 1 code</p>\n<pre><code>ICR1 = 0xFFFF;\nOCR1A = 0x0009;\nOCR1B = 0xBFFF;\nTCCR1A |= ((1 &lt;&lt; COM1A1) | (1 &lt;&lt; COM1B1));\nTCCR1A |= (1 &lt;&lt; WGM11);\nTCCR1B |= (1 &lt;&lt; WGM12) | (1 &lt;&lt; WGM13);\nTCCR1B |= (1 &lt;&lt; CS10);\n</code></pre>\n<p>does not work because ICR1, OCR1A and OCR1B are initialized <strong>before</strong> TCCR1A and TCCR1B are configured. There are two different issues at play here, see the comments in the code below for explanation.</p>\n<pre><code>#include &lt;inttypes.h&gt;\n\n#include &quot;Arduino.h&quot;\n#include &lt;avr/io.h&gt;\n\n// http://ww1.microchip.com/downloads/en/DeviceDoc/ATmega48A-PA-88A-PA-168A-PA-328-P-DS-DS40002061B.pdf\n// https://content.arduino.cc/assets/Pinout-UNOrev3_latest.pdf\n\nvoid setup()\n{\n    uint8_t sreg = SREG;\n    cli();\n\n    // Stop timer before configuring\n    TCCR1B = 0;\n\n    // 16.11.1 TCCR1A \u2013 Timer/Counter1 Control Register A\n    TCCR1A =\n        0\n        | (1 &lt;&lt; COM1A1) | (0 &lt;&lt; COM1A0)  // Clear OC1A on Compare Match, set OC1A at BOTTOM (non-inverting mode)\n        | (1 &lt;&lt; COM1B1) | (0 &lt;&lt; COM1B0)  // Clear OC1B on Compare Match, set OC1B at BOTTOM (non-inverting mode)\n        | (1 &lt;&lt; WGM11) | (0 &lt;&lt; WGM10)    // Fast PWM mode 14 (TOP = ICR1), part 1/2\n        ;\n\n    // 16.11.2 TCCR1B \u2013 Timer/Counter1 Control Register B\n    TCCR1B =\n        0\n        | (1 &lt;&lt; WGM13) | (1 &lt;&lt; WGM12)    // Fast PWM mode 14 (TOP = ICR1), part 2/2\n        ;\n\n    // IMPORTANT NOTE ABOUT ORDER OF INITIALIZATION:\n    //   &quot;The ICR1 Register can only be written when using a Waveform\n    //   Generation mode that utilizes the ICR1 Register for defining\n    //   the counter\u2019s TOP value. In these cases the Waveform\n    //   Generation mode (WGM13:0) bits must be set before the TOP\n    //   value can be written to the ICR1 Register.&quot;\n    // Thus initializing OCR1 before TCCR1A and TCCR1B has been\n    // configured with Fast PWM mode 14 is wrong.\n\n    // Set TOP value\n    ICR1 = 0xFFFF;\n\n    // IMPORTANT NOTE ABOUT ORDER OF INITIALIZATION:\n    //   &quot;The OCR1x Register is double buffered when using any of the\n    //   twelve Pulse Width Modulation (PWM) modes. For the Normal\n    //   and Clear Timer on Compare (CTC) modes of operation, the\n    //   double buffering is disabled.&quot;\n    // If initializing OCR1A before configuring TCCR1A and TCCR1B to\n    // a PWM mode the value is written to the non-buffered OCR1A\n    // register and the buffered OCR1A register contains some &quot;random&quot;,\n    // unused garbage value. When later changing to PWM the buffered\n    // register will be enabled, and its existing garbage value will\n    // be used.\n    // Thus initializing OCR1A/OCR1B before TCCR1A and TCCR1B has\n    // been configured with Fast PWM is wrong.\n\n    // 25% duty cycle - yellow scope signal\n    OCR1A = 0x3FFF;\n\n    // 75% duty cycle - blue scope signal\n    OCR1B = 0xBFFF;\n\n    // 14.4.3 DDRB \u2013 The Port B Data Direction Register\n    DDRB =\n        0\n        | (1 &lt;&lt; DDB1) // PB1 (aka OC1A) as output - pin 9 on Arduino Uno\n        | (1 &lt;&lt; DDB2) // PB2 (aka OC1B) as output - pin 10 on Arduino Uno\n        ;\n\n    // Start the timer with no prescaler\n    TCCR1B |= (0 &lt;&lt; CS12) | (0 &lt;&lt; CS11) | (1 &lt;&lt; CS10);\n\n    SREG = sreg;\n}\n\nvoid loop()\n{\n}\n</code></pre>\n<p>With the code above I get the following signals</p>\n<p><a href=\"https://i.stack.imgur.com/q1QgI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q1QgI.png\" alt=\"working screenshot\" /></a></p>\n<p>If I move the ICR1, OCR1A and OCR1B initializations to between <code>TCCR1B = 0</code> and <code>TCCR1A = ...</code> I get the following</p>\n<p><a href=\"https://i.stack.imgur.com/8ZpTu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8ZpTu.png\" alt=\"non-working screenshot\" /></a></p>\n<p>which I assume corresponds to that 4\u03bcs spike you observed.</p>\n"}], "owner": {"reputation": 417, "user_id": 892482, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cbe4a87f12b55f0b68cbd5b2a3a5402?s=128&d=identicon&r=PG", "display_name": "Bort", "link": "https://stackoverflow.com/users/892482/bort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1626, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1605554245, "creation_date": 1535565854, "last_edit_date": 1535730889, "question_id": 52083686, "link": "https://stackoverflow.com/questions/52083686/proper-implementation-of-timer1-for-pwm-generation", "title": "Proper implementation of Timer1 for PWM generation", "body": "<p>On the Atmel ATmega328P (<a href=\"http://ww1.microchip.com/downloads/en/DeviceDoc/Atmel-42735-8-bit-AVR-Microcontroller-ATmega328-328P_Datasheet.pdf\" rel=\"nofollow noreferrer\">datasheet</a>), there are three timers available for PWM generation (timer0, timer1, and timer2).</p>\n\n<p>I already have what I need using the 8-bit timer2, I am just concerned with using different timer instad of timer2, because timer2 is used in various libraries, and I'd like to have more granularity. Thus I'd like to use the 16-bit timer1.</p>\n\n<p>Here is what I am using to generate a 25 kHz, variable duty cycle using timer2. For this example, lets consider a 35% duty cycle:</p>\n\n<pre><code>void setup() \n{\n\n    /*\n    16*10^6/ [prescalar] / ([OCR2A]) / 2 = [desired frequency]\n    16*10^6/ 8 / [OCR2A] / 2 = 25*10^3\n\n    Prescalar table for Timer2 (from datasheet section 17-9):\n    CS22    CS21    CS20\n      0     0       0       = No clock source (Timer/couter stopped)\n      0     0       1       = clkT2S/(No prescaling)\n      0     1       0       = clkT2S/8 (From prescaler)\n      0     1       1       = clkT2S/32 (From prescaler)\n      1     0       0       = clkT2S/64 (From prescaler)\n      1     0       1       = clkT2S/128 (From prescaler)\n      1     1       0       = clkT2S/256 (From prescaler)\n      1     1       1       = clkT2S/1024 (From prescaler)\n    */\n\n    pinMode(3, OUTPUT);\n    TCCR2B = _BV(WGM22) | _BV(CS21);\n    TCCR2A = _BV(COM2A0) | _BV(COM2B1) | _BV(COM2B0) | _BV(WGM20);\n    OCR2A = 40; \n    OCR2B = 16; //40*0.35=16\n}\n\nvoid loop()\n{ \n}\n</code></pre>\n\n<p>To get the same result using timer1 must be incredibly simple, however I'm not familiar with these registers.\nI have been looking around for explanations outside the datasheet. I have found this post: <a href=\"http://lars.mec.ua.pt/public/LAR%20Projects/Perception/2016_CarolinaMatos/Development_of_a_stereo_vision_rig_CODE%20/SynchronizeArduino/www-righto-com.pdf\" rel=\"nofollow noreferrer\">Secrets of Arduino PWM</a>, however it only covers the use of timer2.</p>\n\n<p>I have tried the following as per Stephan's suggestion, however it just leads to both outputs (D9 and D10) being held HIGH:</p>\n\n<pre><code>void setup() \n{\n\n    pinMode(9, OUTPUT); //D9\n    pinMode(10, OUTPUT); //D10\n\n    // Set GPIO for timer1 output for OC1A and OC1B\n    //DDRB |= (1 &lt;&lt; DDB1) | (1 &lt;&lt; DDB2);\n\n    ICR1 = 0xFFFF;\n\n    // 25% duty cycle\n    OCR1A = 0x0009;\n\n    // 75% duty cycle\n    //OCR1B = 0xBFFF;\n\n    //20.14.1, pg170\n    // set none-inverting mode\n    TCCR1A |= ((1 &lt;&lt; COM1A1) | (1 &lt;&lt; COM1B1));\n\n    //Table 20-6, pg171\n    // Fast PWM mode\n    TCCR1A |= (1 &lt;&lt; WGM11);\n    TCCR1B |= (1 &lt;&lt; WGM12) | (1 &lt;&lt; WGM13);\n\n    // START the timer with no prescaler\n    TCCR1B |= (1 &lt;&lt; CS10);\n\n}\n\nvoid loop()\n{\n}\n</code></pre>\n\n<p>I tried changing everything (ICR1, OCR1A, TCCR1A), but the only combination that did anything different was the following, which gives a 25kHz frequency on D10, and D9 held HIGH, but the HIGH duration is stuck at 4\u03bcs regardless of the registers. (I just guessed and checked with OCR1A to get 25kHz. I'm not sure why that works.)</p>\n\n<pre><code>void setup() \n{\n\n    pinMode(9, OUTPUT);\n    pinMode(10, OUTPUT);\n\n    // Set GPIO for timer1 output for OC1A and OC1B\n    //DDRB |= (1 &lt;&lt; DDB1) | (1 &lt;&lt; DDB2);\n\n    ICR1 = 0xFFFF;\n\n    // 25% duty cycle\n    OCR1A = 0x0009;\n\n    // 75% duty cycle \n    //This line causes both outputs to be held HIGH\n    //OCR1B = 0xBFFF;\n\n    //20.14.1, pg170\n    // set none-inverting mode\n    TCCR1A |= ((1 &lt;&lt; COM1A1) | (1 &lt;&lt; COM1B1));\n\n    //Table 20-6, pg171\n    // Fast PWM mode\n    TCCR1A |= (1 &lt;&lt; WGM11);\n    TCCR1B |= (1 &lt;&lt; WGM12) | (1 &lt;&lt; WGM13);\n\n    // START the timer with no prescaler\n    TCCR1B |= (1 &lt;&lt; CS10);\n\n}\n\nvoid loop()\n{\n}\n</code></pre>\n\n<p>I'm using an Arduino Nano breakout board for prototyping, with D9 and D10 being the timer1 output pins:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4tzSR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4tzSR.png\" alt=\"Arduino Nano pins highlighted for B1 and B2\"></a>\n(Image from <a href=\"https://bigdanzblog.wordpress.com/2015/01/30/cant-get-i2c-to-work-on-an-arduino-nano-pinout-diagrams/\" rel=\"nofollow noreferrer\">https://bigdanzblog.wordpress.com</a>)</p>\n\n<p>I've tried changing the board but I have the same result.</p>\n\n<p>Here is relevant information from the datasheet:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ozElo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ozElo.png\" alt=\"atmega28p table 20-3 through 20-5\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/PL75W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PL75W.png\" alt=\"atmega328p table 20-6\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/A56t2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A56t2.png\" alt=\"atmega328p table 20-7 timer prescaler\"></a></p>\n"}, {"tags": ["c#", "c++", "forms", "credential-providers", "unmanagedexports"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 10145818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2a32adad3350a8a2fb359dc3f902ad?s=128&d=identicon&r=PG&f=1", "display_name": "js.hrt", "link": "https://stackoverflow.com/users/10145818/js-hrt"}, "edited": false, "score": 0, "creation_date": 1535623956, "post_id": 52089207, "comment_id": 91138924, "body": "Thanks. How should I pass the handle to C# code? Like, to receive string I am doing &quot;[MarshalAs(UnmanagedType.LPWStr)]string message&quot; in c#. How will I marshal the handle?"}, {"owner": {"reputation": 886, "user_id": 3868464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3JnBN.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3868464/alexander"}, "reply_to_user": {"reputation": 141, "user_id": 10145818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2a32adad3350a8a2fb359dc3f902ad?s=128&d=identicon&r=PG&f=1", "display_name": "js.hrt", "link": "https://stackoverflow.com/users/10145818/js-hrt"}, "edited": false, "score": 0, "creation_date": 1535636977, "post_id": 52089207, "comment_id": 91147812, "body": "You may pass <code>HWND</code> as <code>IntPtr</code> ant there convert it using   <code>public static System.Windows.Forms.NativeWindow FromHandle (IntPtr handle);</code>"}, {"owner": {"reputation": 886, "user_id": 3868464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3JnBN.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3868464/alexander"}, "reply_to_user": {"reputation": 141, "user_id": 10145818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2a32adad3350a8a2fb359dc3f902ad?s=128&d=identicon&r=PG&f=1", "display_name": "js.hrt", "link": "https://stackoverflow.com/users/10145818/js-hrt"}, "edited": false, "score": 0, "creation_date": 1535637216, "post_id": 52089207, "comment_id": 91148001, "body": "Have a look onto this <a href=\"https://stackoverflow.com/questions/2481835/convert-an-intptr-window-handle-to-iwin32window\">post</a>"}, {"owner": {"reputation": 141, "user_id": 10145818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2a32adad3350a8a2fb359dc3f902ad?s=128&d=identicon&r=PG&f=1", "display_name": "js.hrt", "link": "https://stackoverflow.com/users/10145818/js-hrt"}, "edited": false, "score": 0, "creation_date": 1535642650, "post_id": 52089207, "comment_id": 91151814, "body": "Thank you so much. It is working now! I&#39;ll mark that answer. Thanks again"}, {"owner": {"reputation": 141, "user_id": 10145818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2a32adad3350a8a2fb359dc3f902ad?s=128&d=identicon&r=PG&f=1", "display_name": "js.hrt", "link": "https://stackoverflow.com/users/10145818/js-hrt"}, "edited": false, "score": 0, "creation_date": 1535792601, "post_id": 52089207, "comment_id": 91203842, "body": "One thing more, if I use Show(owner) instead of ShowDialog(owner) so that the code moves forward after displaying the form, can this be done? Because when I do this, the form does not display properly (it becomes unclickable and hung)"}, {"owner": {"reputation": 886, "user_id": 3868464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3JnBN.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3868464/alexander"}, "reply_to_user": {"reputation": 141, "user_id": 10145818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2a32adad3350a8a2fb359dc3f902ad?s=128&d=identicon&r=PG&f=1", "display_name": "js.hrt", "link": "https://stackoverflow.com/users/10145818/js-hrt"}, "edited": false, "score": 0, "creation_date": 1538399256, "post_id": 52089207, "comment_id": 92118324, "body": "In this case you have to create separate thread and run your windows inside it. Main thread of logon UI thinks that you have finished your work and stops serving child windows."}], "tags": [], "owner": {"reputation": 886, "user_id": 3868464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3JnBN.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3868464/alexander"}, "is_accepted": true, "score": 1, "last_activity_date": 1553873999, "last_edit_date": 1553873999, "creation_date": 1535603211, "answer_id": 52089207, "question_id": 52083206, "link": "https://stackoverflow.com/questions/52083206/form-not-displaying-in-credential-provider/52089207#52089207", "title": "Form not displaying in credential provider", "body": "<p>Try this out:</p>\n\n<p>Call <code>ICredentialProviderCredentialEvents::OnCreatingWindow</code> method </p>\n\n<pre><code>HRESULT OnCreatingWindow(\n    HWND *phwndOwner\n);\n</code></pre>\n\n<p>to get window handle, pass additional parameter into your library and use overloaded method <code>ShowDialog</code>. </p>\n\n<pre><code>public DialogResult ShowDialog(\n    IWin32Window owner\n);\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 10145818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac2a32adad3350a8a2fb359dc3f902ad?s=128&d=identicon&r=PG&f=1", "display_name": "js.hrt", "link": "https://stackoverflow.com/users/10145818/js-hrt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 52089207, "answer_count": 1, "score": 2, "last_activity_date": 1553873999, "creation_date": 1535563843, "last_edit_date": 1535564112, "question_id": 52083206, "link": "https://stackoverflow.com/questions/52083206/form-not-displaying-in-credential-provider", "title": "Form not displaying in credential provider", "body": "<p>I have a function in C# that displays a form. I have exposed the function using Unmanaged Exports and calling it from C++ in credential provider sample on a command link. The form does not display (nothing happens). However, when I call the same C# form using C++ console application, the form displays without any issue. What could be the difference that C++ console application is loading it but C++ credential provider code is not loading it?</p>\n\n<p>C++ Code:</p>\n\n<pre><code>using CSharpForm = void(__stdcall *)(wchar_t* message);\nint _tmain(int argc, _TCHAR* argv[])\n{\nHMODULE mod = LoadLibraryA(\"CSharp.dll\");\nCSharpForm form = reinterpret_cast&lt;CSharpForm&gt;(GetProcAddress(mod, \"form1\"));\nform(L\"This is a c# form\");\ngetchar();\nreturn 0;\n}\n</code></pre>\n\n<p>C# Code:</p>\n\n<pre><code>[DllExport(ExportName = \"form1\", CallingConvention = CallingConvention.StdCall)]\npublic static void showForm([MarshalAs(UnmanagedType.LPWStr)]string message)\n{\n    Form_Test form = new Form_Test();\n    form.Text = message;\n    form.ShowDialog();\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "for-loop", "stdlist"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1535563792, "post_id": 52083107, "comment_id": 91116546, "body": "<i>&quot;...implement my own range-for iterable...&quot;</i> then you need to write an iterator implementation for your data structure(s) See here for the requirements placed on iterators: <a href=\"https://en.cppreference.com/w/cpp/named_req/Iterator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/named_req/Iterator</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1535563811, "post_id": 52083107, "comment_id": 91116558, "body": "You <i>do know</i> that a linked list is just about the <i>worst</i> performing data structure you can ask a modern CPU to work with - right? Take a hard look at <code>std::vector</code> ..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1535572628, "post_id": 52083107, "comment_id": 91120606, "body": "@Codesmith You missed the part of the <a href=\"https://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">documentation</a> where <code>begin_expr</code> and <code>end_expr</code> will resolve to the <code>begin()</code> and <code>end()</code> methods for a <code>std::list</code>: &quot;<i><code>begin_expr</code> and <code>end_expr</code> are defined as follows: ... If <code>range_expression</code> is an expression of a class type <code>C</code> that has both a member named <code>begin</code> and a member named <code>end</code> (regardless of the type or accessibility of such member), then <code>begin_expr</code> is <code>__range.begin()</code> and <code>end_expr</code> is <code>__range.end()</code>; ...</i>&quot; The <code>begin()</code> and <code>end()</code> methods return <b>iterators</b>, not <b>pointers</b>"}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 11, "last_activity_date": 1535563683, "last_edit_date": 1535563683, "creation_date": 1535563579, "answer_id": 52083137, "question_id": 52083107, "link": "https://stackoverflow.com/questions/52083107/c11-range-based-for-loop-for-stdlist/52083137#52083137", "title": "C++11 Range-based for loop for std::list", "body": "<p>Yes, iterators generally overload <code>++</code>, <code>*</code>, <code>-&gt;</code>, <code>==</code>, <code>!=</code> and sometimes <code>+ integral</code> and <code>--</code> and <code>- integral</code> and <code>&lt;</code> etc, depending on <a href=\"https://en.cppreference.com/w/cpp/iterator#Iterator_categories\" rel=\"noreferrer\">\"iterator category\"</a>.</p>\n\n<p><code>std::list::iterator</code> is a bidirectional iterator, so overrides the first set of operators and only <code>--</code> from the second.</p>\n\n<p>Iterators are not pointers.  On the other hand, pointers are both iterators, and the model upon which iterators where based.</p>\n\n<p>Iterators that are fundamentally pointers are iterators into random access containers that store their data contiguously; vector, string, array and initializer_list.</p>\n\n<p>Most of those still aren't raw pointers, but rather wrappers around the pointer.  This both permits some additional type safety and allows debug builds to do bounds checking and similar other checks.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 6, "last_activity_date": 1535563757, "creation_date": 1535563757, "answer_id": 52083181, "question_id": 52083107, "link": "https://stackoverflow.com/questions/52083107/c11-range-based-for-loop-for-stdlist/52083181#52083181", "title": "C++11 Range-based for loop for std::list", "body": "<blockquote>\n  <p>thus incrementing the pointer</p>\n</blockquote>\n\n<p>Nope, incrementing the <em>iterator</em>.</p>\n\n<p>And a <code>std::list</code> iterator knows what to do&hellip; otherwise it would be useless and you wouldn't be able to do anything with your lists. :)</p>\n\n<p>Only for contiguous data like vectors can an iterator be implemented as a basic pointer, though even then you'll often find that the iterator type is at least some kind of wrapper around pointers (e.g. in debug mode Visual Studio adds bounds checking).</p>\n"}], "owner": {"reputation": 4388, "user_id": 586652, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IkTVT.png?s=128&g=1", "display_name": "Codesmith", "link": "https://stackoverflow.com/users/586652/codesmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3551, "favorite_count": 0, "accepted_answer_id": 52083137, "answer_count": 2, "score": 1, "last_activity_date": 1535563757, "creation_date": 1535563465, "question_id": 52083107, "link": "https://stackoverflow.com/questions/52083107/c11-range-based-for-loop-for-stdlist", "title": "C++11 Range-based for loop for std::list", "body": "<p>If I understand the range-based for loop correctly, which expands</p>\n\n<pre><code>for ( range_declaration : range_expression ) loop_statement\n</code></pre>\n\n<p>into</p>\n\n<pre><code>{\n    auto &amp;&amp; __range = range_expression ;\n    for (auto __begin = begin_expr, __end = end_expr;\n            __begin != __end; ++__begin) {\n        range_declaration = *__begin;\n        loop_statement\n    }\n}\n</code></pre>\n\n<p>thus incrementing the pointer, and if I understand that <code>std::list</code>s are internally implemented as doubly linked lists, isn't it correct to assume that something like this would <em>not</em> print <code>0 1 2 3</code>, since the memory addresses are not sequential (implied by the <code>++__begin</code>)?</p>\n\n<pre><code>std::list&lt;int&gt; myList = {0, 1};\nstd::list&lt;int&gt; otherList = {10, 11};\nmyList.push_back(2);\nmyList.push_back(3);\n\nfor(auto&amp; i: myList)\n    std::cout &lt;&lt; i &lt;&lt; \" \";\n</code></pre>\n\n<p>And yet it does print correctly. So then, is <code>std::list::iterator</code> overriding the behavior of the operators used in the range-for-loop expansion?</p>\n\n<p>This is of particular importance to me if I choose to implement my own range-for iterable data structures.</p>\n"}, {"tags": ["c++", "constructor", "destructor"], "comments": [{"owner": {"reputation": 42401, "user_id": 768110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UKahT.jpg?s=128&g=1", "display_name": "RiaD", "link": "https://stackoverflow.com/users/768110/riad"}, "edited": false, "score": 4, "creation_date": 1535563310, "post_id": 52083002, "comment_id": 91116291, "body": "It gets destructed after getch"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1535563345, "post_id": 52083002, "comment_id": 91116313, "body": "Put a scope around add a; a.disp(); like this <code>{ add a; a.disp(); }</code> and see what happens."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1535563435, "post_id": 52083002, "comment_id": 91116358, "body": "&quot;or turbo c++&quot; - don&#39;t even bother with that. It is several decades out of date, doesn&#39;t even support standard C++98, it&#39;s obsolete and I&#39;d personally consider using it to be actually harmful when trying to learn modern C++ that&#39;s actually used in the real world. Drop that thing <i>now</i> and don&#39;t ever look back."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1535563496, "post_id": 52083002, "comment_id": 91116389, "body": "Run your program from the console instead of from inside your IDE or by double-clicking it."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1535565759, "post_id": 52083002, "comment_id": 91117523, "body": "@ClumsyKnight Which version of Visual Studio are you using that you still feel the need of using some input operation (<code>getch()</code>) to keep the console open?"}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1535563279, "creation_date": 1535563279, "answer_id": 52083033, "question_id": 52083002, "link": "https://stackoverflow.com/questions/52083002/destructor-not-displayed-in-c/52083033#52083033", "title": "Destructor not displayed in C++", "body": "<p>The destructor does output it after <code>getch</code>. But you probably do not see that because the window closes. </p>\n\n<p>Change your code to:</p>\n\n<pre><code>int main() {  \n    {\n        add a;  \n        a.disp();  \n    }\n    getch();  \n}  \n</code></pre>\n\n<p>So that you can see destructor output.</p>\n"}, {"tags": [], "owner": {"reputation": 937, "user_id": 9242445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IaxD.jpg?s=128&g=1", "display_name": "Marker", "link": "https://stackoverflow.com/users/9242445/marker"}, "is_accepted": false, "score": 3, "last_activity_date": 1535563292, "creation_date": 1535563292, "answer_id": 52083039, "question_id": 52083002, "link": "https://stackoverflow.com/questions/52083002/destructor-not-displayed-in-c/52083039#52083039", "title": "Destructor not displayed in C++", "body": "<p>The destructor is not called until main exits.  Try doing this:</p>\n\n<pre><code>void test()\n{\n   add a;  \n   a.disp();  \n}\n\nint main()  \n{\n   test();\n   getch();  \n}  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "is_accepted": false, "score": 2, "last_activity_date": 1535563311, "creation_date": 1535563311, "answer_id": 52083045, "question_id": 52083002, "link": "https://stackoverflow.com/questions/52083002/destructor-not-displayed-in-c/52083045#52083045", "title": "Destructor not displayed in C++", "body": "<p>The destructor (not <em>deconstructor</em>) will be called at the very end of <code>main()</code> function - <strong>after</strong> your <code>getch()</code> executes. I assume you call it to make te console wait for your input, instead of closing right away. The problem is - the destructor will be called <em>after</em> you press the key, which makes it unlikely for you to spot.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7714493, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155231470364701/picture?type=large", "display_name": "Ben Efrat", "link": "https://stackoverflow.com/users/7714493/ben-efrat"}, "is_accepted": false, "score": -1, "last_activity_date": 1535566828, "last_edit_date": 1535566828, "creation_date": 1535566496, "answer_id": 52083822, "question_id": 52083002, "link": "https://stackoverflow.com/questions/52083002/destructor-not-displayed-in-c/52083822#52083822", "title": "Destructor not displayed in C++", "body": "<p>getch() pauses the console until a key is hit and it returns a char for the value of the key pressed.\nso i guess that u didnt pressed any key so the main function actually does not ends,therefore a isnt finished its existence >> destructor does not being called.\n<a href=\"http://en.wikipedia.org/wiki/Conio\" rel=\"nofollow noreferrer\">You can read about getch() here</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10291176"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1535566828, "creation_date": 1535563186, "last_edit_date": 1535563482, "question_id": 52083002, "link": "https://stackoverflow.com/questions/52083002/destructor-not-displayed-in-c", "title": "Destructor not displayed in C++", "body": "<pre><code>#include&lt;iostream&gt;  \n#include&lt;conio.h&gt;  \nusing namespace std;  \nclass add  \n{  \npublic:  \nadd()  \n{  \n    cout&lt;&lt;\"Constructor is WORKING\"&lt;&lt; endl;  \n}  \nvoid disp()  \n{  \n    cout&lt;&lt;\"Function is Working\"&lt;&lt; endl;  \n}  \n~add()  \n{  \n    cout&lt;&lt;\"Destructor is WORKING\"&lt;&lt; endl;  \n}  \n};  \nint main()  \n{  \nadd a;  \na.disp();  \ngetch();  \n}  \n</code></pre>\n\n<p>I can see the constructor and function.<br>\nBut, the destructor is not being displayed in visual studio or turbo c++ (I have tried both).<br>\nIs there an error in my code? or does it ends without being displayed?</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 40, "user_id": 8814712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4bc997c2492abd07ae68cf98c449b20?s=128&d=identicon&r=PG&f=1", "display_name": "A cool programmer", "link": "https://stackoverflow.com/users/8814712/a-cool-programmer"}, "is_accepted": true, "score": 0, "last_activity_date": 1535572402, "last_edit_date": 1535572402, "creation_date": 1535562874, "answer_id": 52082914, "question_id": 52082842, "link": "https://stackoverflow.com/questions/52082842/c-how-to-store-numbers-in-a-text-file-with-contents-of-characters-numbers/52082914#52082914", "title": "C++ How to store numbers in a text file with contents of characters , numbers , and comma delimited in a 2D matrix", "body": "<p><code>std::stoi</code> converts a string to an integer. If you are using decimal numbers use <code>std::stod</code>. That means string to double <code>m_value[i][j] = std::stoi(myvector[k]);</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 0, "last_activity_date": 1535564854, "creation_date": 1535564854, "answer_id": 52083427, "question_id": 52082842, "link": "https://stackoverflow.com/questions/52082842/c-how-to-store-numbers-in-a-text-file-with-contents-of-characters-numbers/52083427#52083427", "title": "C++ How to store numbers in a text file with contents of characters , numbers , and comma delimited in a 2D matrix", "body": "<p>Please go and eat/read a good book on C++</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n\ntemplate&lt;typename T, std::size_t N&gt;\nstd::size_t sizeof_array(T(&amp;)[N])\n{\n    return N;\n}\n\nstruct record\n{\n    std::string name;\n    int a;\n    int b;\n    int c;\n};\n\nstd::istream&amp; operator&gt;&gt;(std::istream &amp;is, record &amp;r)\n{\n    record tmp;\n    std::getline(is, tmp.name, ',');\n\n    char ch;    \n    int *dst[] = { &amp;tmp.a, &amp;tmp.b, &amp;tmp.c };\n\n    for (std::size_t i{}; i &lt; sizeof_array(dst); ++i)\n    {\n        if(!( is &gt;&gt; *dst[i] ))\n            return is;\n        if (i &lt; sizeof_array(dst) - 1)\n            is &gt;&gt; ch;\n    }\n\n    while (is.peek() != '\\n' &amp;&amp; is.peek() != EOF)\n        is.get();\n    is.get();\n\n    r = tmp;\n\n    return is;\n}\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream &amp;os, record const &amp;r)\n{\n    os &lt;&lt; r.name &lt;&lt; '\\t' &lt;&lt; r.a &lt;&lt; '\\t' &lt;&lt; r.b &lt;&lt; '\\t' &lt;&lt; r.c;\n    return os;\n}\n\nint main()\n{\n    constexpr char const *input_file_name{ \"input.txt\" };\n    std::ifstream input_file{ input_file_name };\n\n    if (!input_file) {\n        std::cerr &lt;&lt; \"Failed to open \\\"\" &lt;&lt; input_file_name &lt;&lt; \"\\\" for reading!\\n\\n\";\n        return EXIT_FAILURE;\n    }\n\n    std::vector&lt;record&gt; data{ std::istream_iterator&lt;record&gt;{input_file}, std::istream_iterator&lt;record&gt;{} };\n    for (auto const &amp;d : data)\n        std::cout &lt;&lt; d &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6438393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1fe5e7fba13454b6a477a808032b936?s=128&d=identicon&r=PG&f=1", "display_name": "tpham1002002", "link": "https://stackoverflow.com/users/6438393/tpham1002002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 52082914, "answer_count": 2, "score": -1, "last_activity_date": 1535572402, "creation_date": 1535562641, "last_edit_date": 1535563017, "question_id": 52082842, "link": "https://stackoverflow.com/questions/52082842/c-how-to-store-numbers-in-a-text-file-with-contents-of-characters-numbers", "title": "C++ How to store numbers in a text file with contents of characters , numbers , and comma delimited in a 2D matrix", "body": "<p><br/></p>\n\n<p>I am creating a C++ program that reading a text file with contents<br/></p>\n\n<blockquote>\n<pre><code>San Jose, 2, 10 , 1&lt;br/&gt;\nSunnyvale, 2, 5, 4&lt;br/&gt;\nGilroy, 8, 4, 3&lt;br/&gt;\nOakland, 5, 8, 9&lt;br/&gt;\nmountain View, 7, 5, 12&lt;br/&gt;\nSanta Clara, 6, 4, 6&lt;br/&gt;\nFremont, 1, 2, 0&lt;br/&gt;\nBelmont, 4, 9, 5&lt;br/&gt;\n</code></pre>\n</blockquote>\n\n<p>My attempt is to store all the numbers in a matrix (8x3). Here is my code<br/></p>\n\n<pre><code>int main () {\nvector &lt;vector &lt;string&gt; &gt; data;\nifstream infile( \"test.txt\" );\nint data_row = 0;\nwhile (infile)\n{\nstring s;\nif (!getline( infile, s )) break;\ndata_row++;\nistringstream ss( s );\nvector &lt;string&gt; record;\nwhile (ss)\n{\n  string s;\n  if (!getline( ss, s, ',' )) break;\n  record.push_back( s );\n}\ndata_column = record.size() - 1;\ndata.push_back( record );\n}\nif (!infile.eof())\n{\ncerr &lt;&lt; \"Fooey!\\n\";\n}\n\ncout &lt;&lt; data_row &lt;&lt; \" \" &lt;&lt; data_column &lt;&lt; \"\\n\";\n\ndata_type** m_value;\nm_value = new  data_type*[data_row];\nfor(int i=0;i&lt;data_row;i++) {\n  m_value[i] = new data_type[data_column];\n}\nvector&lt;string&gt;myvector;\nfor (int i = 0; i &lt; data.size(); i++) {\n    for (int j = 0; j &lt; data[i].size(); j++) {\n        cout &lt;&lt; i &lt;&lt; \"****\" &lt;&lt; j &lt;&lt; \" \" &lt;&lt; data[i][j] &lt;&lt; \"\\n \";\n      if ( j != 0) {\n        myvector.push_back(data[i][j]);\n}\n} \n}\nfor(int i=0;i&lt;data_row;i++) {\nfor(int j=0;j&lt; data_column;j++) {\n  for (int k = 0; k &lt; myvector.size(); k++) {\n    cout &lt;&lt; k &lt;&lt; \" \" &lt;&lt; myvector[k] &lt;&lt; \"\\n\";\n     m_value[i][j] = myvector[k];\n}\n}}\n</code></pre>\n\n<p>The program fails with getline.cpp:57:24: error: cannot convert <br/>\n'std::basic_string' to 'int' in assignment<br/>\n          m_value[i][j] = myvector[k];<br/></p>\n\n<p>Please help me to resolve the problem<br/>\nThank you<br/></p>\n"}, {"tags": ["c++", "visual-studio-2017"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1535562430, "post_id": 52082738, "comment_id": 91115790, "body": "Why do you need to use explorer to do this?"}, {"owner": {"reputation": 13, "user_id": 10291190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CbluH.jpg?s=128&g=1", "display_name": "Shinji", "link": "https://stackoverflow.com/users/10291190/shinji"}, "edited": false, "score": 0, "creation_date": 1535562637, "post_id": 52082738, "comment_id": 91115906, "body": "@NeilButterworth the work I inherited had hardcoded paths. I need to be able to select different file types and different files without relying on where the path is on my local machine."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1535562678, "post_id": 52082738, "comment_id": 91115934, "body": "@Shinji That doesn&#39;t mean that you have to use an explorer window for that."}, {"owner": {"reputation": 13, "user_id": 10291190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CbluH.jpg?s=128&g=1", "display_name": "Shinji", "link": "https://stackoverflow.com/users/10291190/shinji"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1535562861, "post_id": 52082738, "comment_id": 91116040, "body": "@Swordfish 100% I know there&#39;s probably an infinite number of ways to do it, but this way made the most sense to me and I don&#39;t have much experience with any functions like this so I thought it would be a good thing to do."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1535573005, "post_id": 52082802, "comment_id": 91120770, "body": "Or <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/commdlg/nf-commdlg-getopenfilenamew\" rel=\"nofollow noreferrer\"><code>GetOpenFileName()</code></a>/<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/commdlg/nf-commdlg-getsavefilenamew\" rel=\"nofollow noreferrer\"><code>GetSaveFileName()</code></a> if you need to support Windows versions prior to Vista."}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 1, "last_activity_date": 1535562485, "creation_date": 1535562485, "answer_id": 52082802, "question_id": 52082738, "link": "https://stackoverflow.com/questions/52082738/how-to-select-a-file-from-windows-file-explorer/52082802#52082802", "title": "How to select a file from windows file explorer", "body": "<p>Use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb776913(v=vs.85).aspx#api\" rel=\"nofollow noreferrer\">IFileDialog, IFileOpenDialog or IFileSaveDialog</a></p>\n"}], "owner": {"reputation": 13, "user_id": 10291190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CbluH.jpg?s=128&g=1", "display_name": "Shinji", "link": "https://stackoverflow.com/users/10291190/shinji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 52082802, "answer_count": 1, "score": 1, "last_activity_date": 1535562485, "creation_date": 1535562283, "question_id": 52082738, "link": "https://stackoverflow.com/questions/52082738/how-to-select-a-file-from-windows-file-explorer", "title": "How to select a file from windows file explorer", "body": "<p>Is there a way to use ShellExecute and grab the file (or rather the file path) and save it in a variable upon selecting it?</p>\n\n<p>Should I use a different function all together?</p>\n\n<p>I've looked at some of the other similar functions for opening the windows file explorer and all of them need a path first, before opening the window. </p>\n\n<pre><code>ShellExecute(NULL, L\"explore\", NULL, NULL, NULL, SW_SHOWNORMAL); \n</code></pre>\n\n<p>My goal is to open the file explorer (like ShellExecute does) and select one file, plug the path of that file into a variable and do a thing with it later.</p>\n"}, {"tags": ["c++", "qt", "qt5", "qprocess", "qfile"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1535562574, "post_id": 52082733, "comment_id": 91115876, "body": "not use pointer: change <code>QFile *lof_mh = new QFile(...)</code> to <code>QFile lof_mh(...)</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1535562682, "post_id": 52082733, "comment_id": 91115939, "body": "provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 83, "user_id": 8216415, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xaDxAm14ANc/AAAAAAAAAAI/AAAAAAAAAEE/1Wl5hYXMVnA/photo.jpg?sz=128", "display_name": "Jorge Augusto Santos", "link": "https://stackoverflow.com/users/8216415/jorge-augusto-santos"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1535563557, "post_id": 52082733, "comment_id": 91116426, "body": "The code is just it, since those files are generated by the external process that has been called. I used qDebug() and discovered it&#39;s giving me a &quot;Negated Access&quot; error."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1535563736, "post_id": 52082733, "comment_id": 91116510, "body": "then probably your .bat application still owns those files or another process that launches .bat owns that file and is still active, so QFile can not do anything, so we need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, there are many things that they are not defined. Also as I pointed out in my first comment, do not use pointers, if you use it you are responsible for eliminating them, but I do not see what you are doing."}, {"owner": {"reputation": 83, "user_id": 8216415, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xaDxAm14ANc/AAAAAAAAAAI/AAAAAAAAAEE/1Wl5hYXMVnA/photo.jpg?sz=128", "display_name": "Jorge Augusto Santos", "link": "https://stackoverflow.com/users/8216415/jorge-augusto-santos"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1535564483, "post_id": 52082733, "comment_id": 91116873, "body": "I stopped using pointers, but the problem persisted. Sorry for the question, but how can I post a Minimum, Complete, and Verifiable example if the code is dependant of external files? Should I zip it and post a download link?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1535564659, "post_id": 52082733, "comment_id": 91116957, "body": "Okay, I see that you have changed the pointers, never point out that this is the solution, for example it shows what the .bat does."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1535566755, "post_id": 52082733, "comment_id": 91118000, "body": "You can post a complete example by 1. minimizing everything (external files can be either generated by your code or included in the question), 2. compiling and running your code <b>as presented in the question</b> (nothing more, nothing less) and ensuring that it reproduces the problem. Feel free to use <code>##</code> header lines to separate source files if there are multiple."}], "answers": [{"comments": [{"owner": {"reputation": 196, "user_id": 7517688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/702ed33e853d743c00538347959ab018?s=128&d=identicon&r=PG", "display_name": "klanmiko", "link": "https://stackoverflow.com/users/7517688/klanmiko"}, "edited": false, "score": 0, "creation_date": 1535568678, "post_id": 52083933, "comment_id": 91118881, "body": "A quick workaround would be to use QTimer::singleShot to delay the file remove slot by some time. But I do not know why finished() is called before the process exits"}, {"owner": {"reputation": 743, "user_id": 10067555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23629f32bc51e9dff04aec6b8eb51123?s=128&d=identicon&r=PG&f=1", "display_name": "karamazovbros", "link": "https://stackoverflow.com/users/10067555/karamazovbros"}, "edited": false, "score": 0, "creation_date": 1582919586, "post_id": 52083933, "comment_id": 106955470, "body": "This helped me!"}], "tags": [], "owner": {"reputation": 83, "user_id": 8216415, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xaDxAm14ANc/AAAAAAAAAAI/AAAAAAAAAEE/1Wl5hYXMVnA/photo.jpg?sz=128", "display_name": "Jorge Augusto Santos", "link": "https://stackoverflow.com/users/8216415/jorge-augusto-santos"}, "is_accepted": false, "score": 2, "last_activity_date": 1535567066, "creation_date": 1535567066, "answer_id": 52083933, "question_id": 52082733, "link": "https://stackoverflow.com/questions/52082733/qfile-remove-not-deleting-files-that-are-well-known-at-execution-time/52083933#52083933", "title": "QFile &quot;remove()&quot; not deleting files that are well-known at execution time", "body": "<p>I managed to delete the files changing the permission of the files with:</p>\n\n<pre><code>lof_mh.setPermissions(QFileDevice::WriteUser | QFileDevice::ReadUser | QFileDevice::ExeUser);\nlibgomp.setPermissions(QFileDevice::WriteUser | QFileDevice::ReadUser | QFileDevice::ExeUser);\nlibwin.setPermissions(QFileDevice::WriteUser | QFileDevice::ReadUser | QFileDevice::ExeUser);\ntests_env.setPermissions(QFileDevice::WriteUser | QFileDevice::ReadUser | QFileDevice::ExeUser);\nexecute.setPermissions(QFileDevice::WriteUser | QFileDevice::ReadUser | QFileDevice::ExeUser);\nexecute_bat.setPermissions(QFileDevice::WriteUser | QFileDevice::ReadUser | QFileDevice::ExeUser);\n</code></pre>\n\n<p>After that, I deleted them with QFile::remove() just as normal. This brings another problem, though: the <em>DeleteFiles()</em> slot should be called when the <em>finished()</em> signal of the QProcess* is emmited, yet, the slot is called when the proccess is <strong>still running</strong>, so the files get deleted and it loses track of the files and crash. Anyway, I'll create another post to check for answers specific to this subject.</p>\n\n<p>Thanks to everybody that helped!</p>\n"}], "owner": {"reputation": 83, "user_id": 8216415, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xaDxAm14ANc/AAAAAAAAAAI/AAAAAAAAAEE/1Wl5hYXMVnA/photo.jpg?sz=128", "display_name": "Jorge Augusto Santos", "link": "https://stackoverflow.com/users/8216415/jorge-augusto-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1377, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535567066, "creation_date": 1535562269, "last_edit_date": 1535563846, "question_id": 52082733, "link": "https://stackoverflow.com/questions/52082733/qfile-remove-not-deleting-files-that-are-well-known-at-execution-time", "title": "QFile &quot;remove()&quot; not deleting files that are well-known at execution time", "body": "<p>I have a process being called by a <strong>QProcess*</strong>. After creation, I'm connecting its <em>finished()</em> signal to a slot that deletes some resulting files. This process creates a set of files that are well-known at execution time. I'm creating a <strong>QFile*</strong> object for each one of them. I'm trying to delete those files <strong>after</strong> that specified process has finished.</p>\n\n<p>The problem is: if I try to delete them with <em>QFile::remove()</em> or <em>QDir::remove()</em>, nothing seems to happen. If I try to rename them, though, it renames, but <strong>before</strong> the process has finished - even though its finished signal has been emitted. Also, <em>QDir::removeRecursively()</em> deletes them. I tried to create a new directory, move the files to that folder and use <em>Qdir::removeRecursively()</em> - and even deleted all my desktop -, but, as I said, the \"delete files\" slot is being called before the process has really finished. I tried to use <em>QProcess::waitForFinished()</em> to prevent this premature call, but it didn't work. </p>\n\n<p>By the way, I'm asking the user where to save the files, so they can be saved anywhere when I try to delete them. Also, I cannot ask for admin privileges.</p>\n\n<p>Thank you!</p>\n\n<p><strong>QProcess call</strong></p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>QProcess *execute_call = new QProcess(this);\nexecute_call-&gt;setWorkingDirectory(lastSavingLocation + \"/control/\");\nexecute_call-&gt;setProgram(execute_call-&gt;workingDirectory() + \"execute.bat\");\nconnect(execute_call, SIGNAL(finished(int)), this, SLOT(DeleteExecutionFiles(int)));\nexecute_call-&gt;start();\nexecute_call-&gt;waitForFinished(-1);\n//I tried to put this \n//before the start() call, but nothing seems to change\n</code></pre>\n\n<p><strong>DeleteFiles Slot</strong></p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>void MainWindow::DeleteExecutionFiles(int status)\n{\n    if(status == 0)\n    {\n        qDebug() &lt;&lt; \"slot called\";\n        QFile *lof_mh = new QFile(lastSavingLocation + \"/lof-mh.exe\");\n        QFile *libgomp = new QFile(lastSavingLocation + \"/libgomp-1.dll\");\n        QFile *libwin = new QFile(lastSavingLocation + \"/libwinpthread-1.dll\");\n        QFile *tests_env = new QFile(lastSavingLocation + \"/control/lof-mh-testenvironment-tool.exe\");\n        QFile *execute = new QFile(lastSavingLocation + \"/control/execute.bat\");\n        QFile *execute_bat = new QFile(lastSavingLocation + \"/control/executeParallel.bat\");\n\n        lof_mh-&gt;setFileName(lastSavingLocation + \"/lof-mh.exe\");\n        libgomp-&gt;setFileName(lastSavingLocation + \"/libgomp-1.dll\");\n        libwin-&gt;setFileName(lastSavingLocation + \"/libwinpthread-1.dll\");\n        tests_env-&gt;setFileName(lastSavingLocation + \"/control/lof-mh-testenvironment-tool.exe\");\n        execute-&gt;setFileName(lastSavingLocation + \"/control/execute.bat\");\n        execute_bat-&gt;setFileName(lastSavingLocation + \"/control/executeParallel.bat\");\n\n        lof_mh-&gt;remove();\n        libgomp-&gt;remove();\n        libwin-&gt;remove();\n        tests_env-&gt;remove();\n        execute-&gt;remove();\n        execute_bat-&gt;remove();\n    }\n}\n</code></pre>\n\n<p><strong>Edit 1</strong></p>\n\n<p>After using <em>qDebug()</em> with <em>QFile::errorString()</em> got this</p>\n\n<pre><code>lof_mh.remove();                      \nqDebug() &lt;&lt; lof_mh.errorString(); //\"Negated Access\"  \nlibgomp.remove();                     \nqDebug() &lt;&lt; libgomp.errorString(); //\"Negated Access\"  \nlibwin.remove();                      \nqDebug() &lt;&lt; libwin.errorString(); //\"Negated Access\"     \ntests_env.remove();                   \nqDebug() &lt;&lt; tests_env.errorString(); //\"Negated Access\"  \nexecute.remove();                     \nqDebug() &lt;&lt; execute.errorString(); //\"Unknown Error\"    \nexecute_bat.remove();                 \nqDebug() &lt;&lt; execute_bat.errorString(); //\"Unknown Error\"\n</code></pre>\n"}, {"tags": ["c++", "c++11", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 1, "creation_date": 1535566074, "post_id": 52082731, "comment_id": 91117688, "body": "Visual studios debug C++ runtime standard library types or their iterators may have different sizes from the release versions. This means that you can&#39;t pass C++ standard library types from something compiled with debug standard library to something compiled with release standard library .Also, the issue may equally be present in release mode, but hidden by the fact that the <a href=\"https://docs.microsoft.com/en-gb/cpp/standard-library/iterator-debug-level?view=vs-2017\" rel=\"nofollow noreferrer\">iterator debug level</a> is just set to a value where the error is not detected by default in release mode."}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1535594148, "creation_date": 1535594148, "answer_id": 52088219, "question_id": 52082731, "link": "https://stackoverflow.com/questions/52082731/boostasio-hangs-endthreadx/52088219#52088219", "title": "boost::asio hangs _endthreadx", "body": "<p>The code shown doesn't do anything with strings. Also you don't show what <code>io_context</code> is being used in <code>Client</code> instances. </p>\n\n<p>As given, everything is a giant race-condition, because none of the client work might ever get run, <strong>but</strong> you always set <code>done = true</code> immediately after posting the (supposedly) asynchronous operation of <code>Client::start</code>. </p>\n\n<p><em>(The potentially sane interpretation here would be if <code>Client::start()</code> were actually completely synchronous, but that really would make the whole existence of <code>static Client&amp; Client::create(...)</code> pretty strange and useless?).</em></p>\n\n<p>Using a thread to sleep is an anti-pattern, and doubly so in asynchronous code.</p>\n\n<hr>\n\n<blockquote>\n  <p>cannot dereference string iterator because string iterator was invalidated</p>\n</blockquote>\n\n<p>This is a clear sign that MSVC's <a href=\"https://stackoverflow.com/questions/2731419/what-does-enabling-stl-iterator-debugging-really-do\">Iterator Debugging</a> is working. It just tells you you have a programming error. </p>\n\n<p>Your error causes string iterators to be used when they're no longer valid. I can't see it, but 99% of the time this would be caused by asynchronous operations using a buffer that gets destroyed (or modified) before the async operation completes. In a nutshell:</p>\n\n<pre><code>void foo() {\n    std::string msg = \"message\";\n    boost::asio::async_write(_socket, boost::asio::buffer(msg), /*...*/);\n}\n</code></pre>\n\n<h2>Suggested Code</h2>\n\n<p>Simplifying from your code, and showing some hints:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/50962633c7b53b76\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/asio.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nusing boost::asio::ip::tcp;\nusing boost::system::error_code;\n\nstatic std::string const SOCKET_ADDRESS = \"127.0.0.1\";\nstatic unsigned short const SOCKET_PORT = 6767;\n\nbool check(error_code const&amp; ec, char const* message) {\n    std::cout &lt;&lt; message &lt;&lt; \" (\" &lt;&lt; ec.message() &lt;&lt; \")\\n\";\n    return !ec;\n}\n\nstruct Server {\n    boost::asio::io_context&amp; io_;\n    Server(boost::asio::io_context&amp; io, std::string host, unsigned short port) : io_(io), host_(host), port_(port) {}\n\n    void start() {\n        acc_.set_option(tcp::acceptor::reuse_address(true));\n        acc_.listen(5);\n\n        accept_loop();\n    }\n\n    void stop() {\n        io_.post([this] { // thread safety\n            acc_.cancel();\n            acc_.close();\n        });\n    }\n\n  private:\n    void accept_loop() {\n        acc_.async_accept(sock_, [this](error_code ec) {\n            if (check(ec, \"accepted\")) {\n                std::make_shared&lt;Connection&gt;(std::move(sock_))-&gt;start();\n                accept_loop();\n            }\n        });\n    }\n\n    struct Connection : std::enable_shared_from_this&lt;Connection&gt; {\n        tcp::socket sock_;\n        std::string buffer_;\n\n        Connection(tcp::socket&amp;&amp; sock) : sock_(std::move(sock)) {}\n\n        ~Connection() {\n            error_code ec;\n            std::cout &lt;&lt; \"Disconnected \" &lt;&lt; sock_.remote_endpoint(ec) &lt;&lt; \"\\n\";\n        }\n\n        void start() {\n            auto self = shared_from_this();\n\n            async_read_until(sock_, boost::asio::dynamic_buffer(buffer_), \"\\n\", [self,this](error_code ec, size_t bytes) {\n                 if (check(ec, \"received request\")) {\n                     std::cout &lt;&lt; \"Request: \" &lt;&lt; std::quoted(buffer_.substr(0, bytes), '\\'') &lt;&lt; \"\\n\";\n                     if (bytes &gt; 0)\n                         std::reverse(buffer_.begin(), buffer_.begin() + bytes - 1); // reverse the request for the response\n\n                     async_write(sock_, boost::asio::buffer(buffer_, bytes), [self,this](error_code ec, size_t bytes) {\n                          if (check(ec, \"response sent\")) {\n                              buffer_.erase(0, bytes);\n                              start(); // handle more requests, if any\n                          }\n                     });\n                 }\n            });\n        }\n    };\n\n    std::string host_;\n    unsigned short port_;\n\n    tcp::acceptor acc_{io_, {boost::asio::ip::address_v4::from_string(host_), port_}};\n    tcp::socket sock_{io_};\n};\n\nstruct Client {\n    Client(std::string host, std::string port) : host_(host), port_(port) {}\n\n    void start() { \n        boost::asio::io_context io;\n\n        tcp::socket s(io);\n        tcp::resolver r(io);\n        connect(s, r.resolve(host_, port_));\n\n        send_request(s, \"hello world\\n\");\n        send_request(s, \"bye world\\n\");\n    }\n\n  private:\n    void send_request(tcp::socket&amp; s, std::string const&amp; request) {\n        write(s, boost::asio::buffer(request));\n\n        boost::asio::streambuf sb;\n        read_until(s, sb, \"\\n\");\n\n        std::cout &lt;&lt; \"Received server response: '\" &lt;&lt; &amp;sb &lt;&lt; \"'\\n\";\n    }\n\n    std::string host_;\n    std::string port_;\n};\n\nint main(){\n    boost::asio::io_context io_context;\n    Server server(io_context, SOCKET_ADDRESS, SOCKET_PORT);\n    server.start();\n\n    std::thread thread_server([&amp;]() { io_context.run(); });\n\n    {\n        Client client {SOCKET_ADDRESS, std::to_string(SOCKET_PORT)};\n        client.start();\n    }\n\n    {\n        Client client {SOCKET_ADDRESS, std::to_string(SOCKET_PORT)};\n        client.start();\n    }\n\n    server.stop();\n    thread_server.join();\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>accepted (Success)\nreceived request (Success)\nRequest: 'hello world\n'\nresponse sent (Success)\nReceived server response: 'dlrow olleh\n'\nreceived request (Success)\nRequest: 'bye world\n'\nresponse sent (Success)\nReceived server response: 'dlrow eyb\n'\nreceived request (End of file)\nDisconnected 127.0.0.1:49778\naccepted (Success)\nreceived request (Success)\nRequest: 'hello world\n'\nresponse sent (Success)\nReceived server response: 'dlrow olleh\n'\nreceived request (Success)\nRequest: 'bye world\n'\nresponse sent (Success)\nReceived server response: 'dlrow eyb\n'\nreceived request (End of file)\nDisconnected 127.0.0.1:49780\naccepted (Operation canceled)\n</code></pre>\n\n<blockquote>\n  <p><strong>Note</strong> There's a startup race. Depending on your luck, the first <code>Client</code> might try to connect before the <code>Server</code> has started listening. I'm assuming this is not your worst worry, and I'll leave it as an exercise for the reader.</p>\n</blockquote>\n"}], "owner": {"reputation": 441, "user_id": 10101256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUiTR.png?s=128&g=1", "display_name": "PStarczewski", "link": "https://stackoverflow.com/users/10101256/pstarczewski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 52088219, "answer_count": 1, "score": 1, "last_activity_date": 1535594148, "creation_date": 1535562267, "question_id": 52082731, "link": "https://stackoverflow.com/questions/52082731/boostasio-hangs-endthreadx", "title": "boost::asio hangs _endthreadx", "body": "<pre><code>int main(){\n  boost::asio::io_context io_context;\n  Server server(io_context, SOCKET_ADDRESS, SOCKET_PORT);\n\n  std::thread thread_server([&amp;]() {\n    server.start();\n    io_context.run();\n  });\n\n  std::thread thread_client([&amp;]() {\n    Client &amp;client = Client::create(SOCKET_ADDRESS, SOCKET_PORT);\n    client.start();\n    done = true; // &lt;-----atomic\n  });\n\n  std::thread thread_stop([&amp;]() {\n    while (done == false) {\n      std::this_thread::sleep_for(std::chrono::milliseconds(5));\n    }\n    server.stop();\n  });\n\n  thread_server.join();\n  thread_client.join();\n  thread_stop.join();\n}\n</code></pre>\n\n<p>I am experimenting with <code>boost::asio</code> and encountered problem which I am unable to solve. When I run program(simpler example above) on Linux(compiled with gcc) everything is fine. Same when I run it on Release in VS2017CE. However when I run it on Debug(VS2017CE as well) it crash with and exception:</p>\n\n<blockquote>\n  <p>cannot dereference string iterator because string iterator was invalidated</p>\n</blockquote>\n\n<p>It crash on <code>_endthreadx</code> either when exiting <code>thread_stop</code> or <code>thread_server</code>(most likely second one). Here are my questions then: </p>\n\n<ol>\n<li><p>What are the differences between Release and Debug basic configurations which might affect code execution and point me where should I look.(I am aware of some but couldn't find anything connected with this particular problem.)</p></li>\n<li><p>What mistakes were made by me which affects code execution.</p></li>\n</ol>\n\n<p>I've made some classes so I will provide more code if neccessary, but code basically works so I am starting with just a piece of it. </p>\n"}, {"tags": ["c++", "android-studio", "android-ndk", "java-native-interface", "native-activity"], "comments": [{"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1536099544, "post_id": 52082590, "comment_id": 91300239, "body": "&quot;in android studio I can&#39;t use android_main&quot; why not?"}], "owner": {"reputation": 103, "user_id": 10006396, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QnpFQAWbMio/AAAAAAAAAAI/AAAAAAAAAAU/-0DdSKXjCYY/photo.jpg?sz=128", "display_name": "Mohamed Moussa", "link": "https://stackoverflow.com/users/10006396/mohamed-moussa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535561752, "creation_date": 1535561752, "question_id": 52082590, "link": "https://stackoverflow.com/questions/52082590/handle-inputs-in-nativeactivity", "title": "Handle inputs in NativeActivity", "body": "<p>I have a Native Activity android project with Android studio, I added the <code>ANativeActivity_onCreate</code>. now I wanna handle inputs, I found <code>callbacks</code> in the activity pointer but I can't find a good tutorial to know how to handle them.</p>\n\n<p>In Eclipse there is a <code>android_main</code> void where I can make a loop and listen to user inputs, but in android studio I can't use <code>android_main</code> but only <code>ANativeActivity_onCreate</code>.</p>\n"}, {"tags": ["c++", "debugging", "visual-studio-code", "gdb"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1535561453, "post_id": 52082387, "comment_id": 91115271, "body": "&quot;to find a workaround&quot; --&gt; Rename all the files to only contain ASCII characters. That&#39;s one workaround."}], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 4250135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b3307aae5e0003343e78466067684f?s=128&d=identicon&r=PG", "display_name": "Pierson", "link": "https://stackoverflow.com/users/4250135/pierson"}, "is_accepted": false, "score": 0, "last_activity_date": 1537483787, "creation_date": 1537483787, "answer_id": 52434369, "question_id": 52082387, "link": "https://stackoverflow.com/questions/52082387/vscode-c-plugin-broken-when-debugging-files-that-have-chinese-character-in-fil/52434369#52434369", "title": "VSCode C++ plugin broken when debugging files that have Chinese character in file name", "body": "<p>As I mentioned in the GitHub issue, this is a problem where gdb's MI interpreter is not handling the Chinese characters correctly. The workaround would be, as @jesper_juhl mentioned, to only contain ASCII characters in the path.</p>\n"}], "owner": {"reputation": 1, "user_id": 9042659, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kGKmnaisvxo/AAAAAAAAAAI/AAAAAAAAABI/2tYPJHBAuqQ/photo.jpg?sz=128", "display_name": "coffee_sgr", "link": "https://stackoverflow.com/users/9042659/coffee-sgr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537483787, "creation_date": 1535560964, "question_id": 52082387, "link": "https://stackoverflow.com/questions/52082387/vscode-c-plugin-broken-when-debugging-files-that-have-chinese-character-in-fil", "title": "VSCode C++ plugin broken when debugging files that have Chinese character in file name", "body": "<p>Moved from <a href=\"https://github.com/Microsoft/vscode-cpptools/issues/2462\" rel=\"nofollow noreferrer\">github issue</a> to find a workaround. Details are listed below. Thanks for help.</p>\n\n<ul>\n<li>OS and Version: Windows 10 1803</li>\n<li>VS Code Version: 1.26.1</li>\n<li>C/C++ Extension Version: 0.18.1</li>\n<li><p>Other extensions: Clang-Format, Code Runner, and a few themes. Disabled them and the issue persisted</p></li>\n<li><p>Bug: When debugging the debugger notice \"Can't open file\". Chinese characters in the file name become meaningless numbers.\nexample:\n\"test \u6d4b\u8bd5.cpp\" (original) / \u201ctest 262342312324.cpp\u201d (after)</p></li>\n<li><p>Full error message:</p></li>\n</ul>\n\n<p>\u65e0\u6cd5\u6253\u5f00\u201ctest 262342312324.cpp\u201d: \u627e\u4e0d\u5230\u6587\u4ef6(file:///c:/Users/me/Documents/C++ Code/test 262342312324.cpp)\u3002</p>\n\n<ul>\n<li>Translation: can't open \"test ..... .cpp\": file not found (.../test .... .cpp)</li>\n</ul>\n\n<p><strong>To Reproduce</strong></p>\n\n<p>Steps to reproduce the behavior: (Related files below)</p>\n\n<ol>\n<li><p>Create a file and name it in Chinese, or any other symbols, and add a breakpoint.</p></li>\n<li><p>Hit F5 to start debugging. </p></li>\n<li><p>Error message appears.</p></li>\n</ol>\n\n<p><strong>launch.json</strong></p>\n\n<p><code>{\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"name\": \"G++\",\n            \"type\": \"cppdbg\",\n            \"request\": \"launch\",\n            \"program\": \"${fileDirname}/${fileBasenameNoExtension}.exe\",\n            \"args\": [],\n            \"stopAtEntry\": false,\n            \"cwd\": \"${fileDirname}\",\n            \"environment\": [],\n            \"externalConsole\": true,\n            \"MIMode\": \"gdb\",\n            \"miDebuggerPath\": \"C:\\MinGW\\bin\\gdb.exe\",\n            \"setupCommands\": [\n                {\n                    \"description\": \"Enable pretty-printing for gdb\",\n                    \"text\": \"-enable-pretty-printing\",\n                    \"ignoreFailures\": true\n                },\n            ],\n            \"preLaunchTask\": \"Compile\",\n            \"logging\": {\n                \"engineLogging\": true,\n                \"trace\": true,\n                \"traceResponse\": true\n            }\n        }\n    ]\n}\n</code></p>\n\n<p><strong>tasks.json</strong></p>\n\n<p><code>{\n    \"version\": \"2.0.0\",\n    \"tasks\": [\n        {\n            \"label\": \"Compile\",\n            \"command\": \"g++\",\n            \"args\": [\n                \"-g\",\n                \"${file}\",\n                \"-o\",\n                \"${fileDirname}/${fileBasenameNoExtension}.exe\",\n                \"-std=c++11\",\n                \"-finput-charset=utf-8\",\n                \"-fexec-charset=gbk\"\n            ],\n            \"problemMatcher\": \"$gcc\",\n        },\n    ]\n}</code></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1535560129, "post_id": 52082151, "comment_id": 91114645, "body": "You have to explicitly request references in C++. You didn&#39;t, so it&#39;s return by value."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 5, "creation_date": 1535560255, "post_id": 52082151, "comment_id": 91114708, "body": "Officially what&#39;s returned is a copy and the original is destroyed, but modern compilers go out of their way to avoid the copy and destruction. Search term: Copy Elision."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1535560649, "post_id": 52082151, "comment_id": 91114898, "body": "Near Duplicate and good reading: <a href=\"https://stackoverflow.com/questions/11379797/returning-an-object-in-c\">Returning an object in C++</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1535561738, "post_id": 52082151, "comment_id": 91115412, "body": "Had to go a bit out of the box, but the many answers here cover the rest of the question: <a href=\"https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization\">What are copy elision and return value optimization?</a>"}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 0, "creation_date": 1535568818, "post_id": 52082151, "comment_id": 91118939, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11379797/returning-an-object-in-c\">Returning an object in C++</a>"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1535562453, "post_id": 52082716, "comment_id": 91115804, "body": "&quot;copy of a will return first, then a will delete.&quot; I&#39;ve been mulling this over and I cannot find anything in the C++ Standard guaranteeing this ordering. I suspect it will be more like make copy, destroy <code>a</code>, return copy. if RVO doesn&#39;t eliminate all of the copying and destruction."}, {"owner": {"reputation": 1334, "user_id": 2156785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQr9B.jpg?s=128&g=1", "display_name": "ANjaNA", "link": "https://stackoverflow.com/users/2156785/anjana"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1535562551, "post_id": 52082716, "comment_id": 91115859, "body": "deleting happen when it is going out of scope only. that mens at the end of returning right ?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1535563160, "post_id": 52082716, "comment_id": 91116196, "body": "What I&#39;m trying to get at is it really doesn&#39;t matter which happens first when the goal should be not doing any of them."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1535563171, "post_id": 52082716, "comment_id": 91116207, "body": "@user4581301 return semantics wouldn&#39;t make sense if it was the other way around. First destroy <code>a</code> and then copy it to return it? That makes no sense. Anyway, neither will happen with RVO."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1535563459, "post_id": 52082716, "comment_id": 91116373, "body": "@SombreroChicken agree on that. The copy, if it takes place, must be before destruction, but destruction after the function has returned doesn&#39;t make much sense either. I think where I&#39;m going wrong is looking for answers in the C++ Standard when I should be looking at the calling convention."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1535563499, "post_id": 52082716, "comment_id": 91116392, "body": "@user4581301 Exactly. I think it states nowhere that <code>a</code> should be returned or a copy of <code>a</code> before returning and after destroying a` in the standard so that won&#39;t get you anywhere."}, {"owner": {"reputation": 253, "user_id": 10154526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aNDH_BpAFe4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oVo7ENxsm5QlFZxxDOTOZmj8Omiw/mo/photo.jpg?sz=128", "display_name": "Tki Lio", "link": "https://stackoverflow.com/users/10154526/tki-lio"}, "edited": false, "score": 0, "creation_date": 1535563579, "post_id": 52082716, "comment_id": 91116437, "body": "@ANjaNA you mean another &quot;a&quot; is created, and the original &quot;a&quot; in find() will be deleted, don&#39;t you?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 253, "user_id": 10154526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aNDH_BpAFe4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oVo7ENxsm5QlFZxxDOTOZmj8Omiw/mo/photo.jpg?sz=128", "display_name": "Tki Lio", "link": "https://stackoverflow.com/users/10154526/tki-lio"}, "edited": false, "score": 1, "creation_date": 1535564008, "post_id": 52082716, "comment_id": 91116640, "body": "@TkiLio another <code>A</code> may be constructed from <code>a</code> using <code>A</code>&#39;s copy constructor. <code>a</code> will be deleted if <code>a</code> is copied. Otherwise any of dozens of tricks will be used to avoid copying and destroying at all. For example, the caller may be required pass in sufficient storage to allow <code>find</code> to construct <code>a</code> in the caller&#39;s space on the stack. No copying or destruction is required because <code>a</code> no longer needs to be destroyed on return."}, {"owner": {"reputation": 253, "user_id": 10154526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aNDH_BpAFe4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oVo7ENxsm5QlFZxxDOTOZmj8Omiw/mo/photo.jpg?sz=128", "display_name": "Tki Lio", "link": "https://stackoverflow.com/users/10154526/tki-lio"}, "edited": false, "score": 1, "creation_date": 1535564126, "post_id": 52082716, "comment_id": 91116699, "body": "I&#39;m confused now because it is nonsense if &quot;a&quot; is returned, then being deleted, how can we get &quot;a&quot; in the caller?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1535564519, "post_id": 52082716, "comment_id": 91116888, "body": "When passing by value <code>a</code> is never actually returned. Either a copy of it is returned or the program is arranged by the compiler such that <code>a</code> never needs to be returned. Any time the compiler can shuffle things around to eliminate work without getting caught, it will. See <a href=\"https://stackoverflow.com/questions/15718262/what-exactly-is-the-as-if-rule\">The As If Rule</a>. However, return by value is one of the cases where the compiler is allowed to eliminate work AND get caught. RVO is allowed to eliminate side effects in the name of faster code."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 253, "user_id": 10154526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aNDH_BpAFe4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oVo7ENxsm5QlFZxxDOTOZmj8Omiw/mo/photo.jpg?sz=128", "display_name": "Tki Lio", "link": "https://stackoverflow.com/users/10154526/tki-lio"}, "edited": false, "score": 1, "creation_date": 1535564550, "post_id": 52082716, "comment_id": 91116902, "body": "@TkiLio though it doesn&#39;t look like it, you&#39;ve actually asked a pretty hard question. Most of it is covered in <a href=\"https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization\">What are copy elision and return value optimization?</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1535565460, "post_id": 52082716, "comment_id": 91117385, "body": "Example code to demonstrate: <a href=\"https://ideone.com/eFBZRj\" rel=\"nofollow noreferrer\">ideone.com/eFBZRj</a> note how no copying or assignment is performed and there is only one destruction right at the end of the program"}, {"owner": {"reputation": 1334, "user_id": 2156785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQr9B.jpg?s=128&g=1", "display_name": "ANjaNA", "link": "https://stackoverflow.com/users/2156785/anjana"}, "edited": false, "score": 0, "creation_date": 1567427389, "post_id": 52082716, "comment_id": 101950344, "body": "thanks for all the suggestions. I understand RVO comes in to the action. I&#39;ve update the answer accordingly. Thanks again all."}], "tags": [], "owner": {"reputation": 1334, "user_id": 2156785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oQr9B.jpg?s=128&g=1", "display_name": "ANjaNA", "link": "https://stackoverflow.com/users/2156785/anjana"}, "is_accepted": false, "score": 3, "last_activity_date": 1567427662, "last_edit_date": 1567427662, "creation_date": 1535562216, "answer_id": 52082716, "question_id": 52082151, "link": "https://stackoverflow.com/questions/52082151/returning-an-object-from-a-function-in-c-its-process-and-nature/52082716#52082716", "title": "Returning an object from a function in C++: its process and nature", "body": "<p>In your function, you are returning a value, not reference.</p>\n\n<pre><code>A find();\n</code></pre>\n\n<p>return type is <code>A</code>. Is is value, a copy of <code>a</code> will return.</p>\n\n<p>In order to return a reference, you should write your function as follows.</p>\n\n<pre><code>A&amp; find();\n</code></pre>\n\n<p>return type <code>A&amp;</code> means a reference to A. But your function body should be change accordingly, in order to return a valid reference. </p>\n\n<p>With the current implementation, you are creating object <code>a</code> inside the function. So it get delete when it goes out of the scope, at the end of function execution. </p>\n\n<p>Your question \"Moreover, does \"find\" delete \"a\" first, then return or return first, then delete \"a\"?\"</p>\n\n<p>copy of <code>a</code> will return first, then <code>a</code> will delete.</p>\n\n<p>If you return a reference, reference will be return,  then object <code>a</code> will get deleted. </p>\n\n<p>In this code you return by value and this is where return value optimization comes(<a href=\"https://en.wikipedia.org/wiki/Copy_elision#Return_value_optimization\" rel=\"nofollow noreferrer\">RVO</a>) in to the play. a copy of 'a' is created, then origianal 'a' deleted, return copy of 'a'. The correct sequence is not sure. </p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 2, "last_activity_date": 1535566919, "last_edit_date": 1592644375, "creation_date": 1535566919, "answer_id": 52083906, "question_id": 52082151, "link": "https://stackoverflow.com/questions/52082151/returning-an-object-from-a-function-in-c-its-process-and-nature/52083906#52083906", "title": "Returning an object from a function in C++: its process and nature", "body": "<h1>The easy part: <em>Does it return &quot;a&quot; by reference or by value?</em></h1>\n<pre><code>A find()\n{\n    ...\n    A a;\n    return a; \n}\n</code></pre>\n<p>Returns by value.</p>\n<h1>The hard part: <em>Moreover, does &quot;find&quot; delete &quot;a&quot; first, then return or return first, then delete &quot;a&quot;?</em></h1>\n<p>Technically a copy of <code>a</code> is constructed, <code>a</code> is destroyed and the copy is returned. I cannot find anything in the C++ standard that specifies any particular ordering to those operations, but some are logically implied. Obviously you cannot copy after destruction.</p>\n<p>I suspect this is left unspecified to allow C++ implementations to support a wide variety of <a href=\"https://en.wikipedia.org/wiki/Calling_convention\" rel=\"nofollow noreferrer\">calling conventions</a>.</p>\n<p>Note: This means the returned object must be copy-able. If the copy constructor is deleted or inaccessible, you cannot return by value.</p>\n<p>There is no way to be certain of whether the return or the destruction is first. It should not matter and if you are designing a program where it does, give your head a shake.</p>\n<h1>Caveat</h1>\n<p>However in practice a modern optimizing compiler will do anything in its power to avoid copying and destroying using a variety of approaches under the blanket name of <a href=\"https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization\">Return Value Optimization</a>.</p>\n<p>Note that this is a rare case where the <a href=\"https://stackoverflow.com/questions/15718262/what-exactly-is-the-as-if-rule\">As-If Rule</a> is allowed to be violated. By skipping the copy construction and destruction, some side effects may not take place.</p>\n<p>Also note that even if the need to copy is eliminated, the object must still be copy-able.</p>\n<h1>Sidenote:</h1>\n<pre><code>A &amp; find()\n{\n    ...\n    A a;\n    return a; \n}\n</code></pre>\n<p>will return a reference, but this is a very bad idea. <code>a</code> has Automatic storage duration scoped by the function and will be destroyed on return. This leaves the caller with a <a href=\"https://stackoverflow.com/questions/17997228/what-is-a-dangling-pointer\">dangling reference</a>, a reference to a variable that no longer exists.</p>\n<p>To get around this,</p>\n<pre><code>std::unique_ptr&lt;A&gt; find()\n{\n    ...\n    auto a = std::make_unique&lt;A&gt;();\n    return a; \n}\n</code></pre>\n<p>but you will find that, with a modern compiler, this is no better than returning by value in most cases.</p>\n"}], "owner": {"reputation": 253, "user_id": 10154526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aNDH_BpAFe4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oVo7ENxsm5QlFZxxDOTOZmj8Omiw/mo/photo.jpg?sz=128", "display_name": "Tki Lio", "link": "https://stackoverflow.com/users/10154526/tki-lio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 52083906, "answer_count": 2, "score": 0, "last_activity_date": 1567427662, "creation_date": 1535560044, "question_id": 52082151, "link": "https://stackoverflow.com/questions/52082151/returning-an-object-from-a-function-in-c-its-process-and-nature", "title": "Returning an object from a function in C++: its process and nature", "body": "<p>I'm quite confused about returning an object from a function. For example:</p>\n\n<pre><code>class A\n{\npublic:\n    ~A(){}\n};\n\nA find()\n{\n    ...\n    A a;\n    return a; \n}\n</code></pre>\n\n<p>Does it return \"a\" by reference or by value? Moreover, does \"find\" delete \"a\" first, then return or return first, then delete \"a\"?</p>\n"}, {"tags": ["c++", "arrays", "string"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1535560055, "post_id": 52082107, "comment_id": 91114613, "body": "<code>sizeof(strWords)</code> ==&gt; <code>counter</code> . Learn what <a href=\"https://en.cppreference.com/w/cpp/language/sizeof\" rel=\"nofollow noreferrer\"><code>sizeof</code> really does <b>here</b></a>."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 3, "creation_date": 1535561064, "post_id": 52082107, "comment_id": 91115100, "body": "use std::vector for strWords"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1535561578, "post_id": 52082107, "comment_id": 91115334, "body": "@molbdnilo &quot;and nothing more.&quot; it will ouput &quot;1\\n2\\n3\\n&quot; and then <code>sizeof(std::string[24]) - 3</code> times garbage."}], "answers": [{"comments": [{"owner": {"reputation": 2142, "user_id": 1689504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af4a48f5ed0d4a54a43844ea1ecc395?s=128&d=identicon&r=PG", "display_name": "HerrJoebob", "link": "https://stackoverflow.com/users/1689504/herrjoebob"}, "edited": false, "score": 1, "creation_date": 1535566344, "post_id": 52082581, "comment_id": 91117819, "body": "I think the OP needs more basic info rather than a &quot;here&#39;s your code&quot; answer"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 2142, "user_id": 1689504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af4a48f5ed0d4a54a43844ea1ecc395?s=128&d=identicon&r=PG", "display_name": "HerrJoebob", "link": "https://stackoverflow.com/users/1689504/herrjoebob"}, "edited": false, "score": 1, "creation_date": 1535566486, "post_id": 52082581, "comment_id": 91117878, "body": "@HerrJoebob I think the OP needs so way much more basic info than in a SO answer can be given so he should read a good(tm) book on C++."}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": -1, "last_activity_date": 1535562063, "last_edit_date": 1535562063, "creation_date": 1535561728, "answer_id": 52082581, "question_id": 52082107, "link": "https://stackoverflow.com/questions/52082107/splitting-a-string-into-an-array-unwanted-element-in-the-array-it-seems/52082581#52082581", "title": "Splitting a string into an array, unwanted element in the array (it seems)", "body": "<p>Use Locales, <code>std::stringstream</code> and <code>std::vector&lt;std::string&gt;</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n\n\nstruct comma_is_space : std::ctype&lt;char&gt;\n{\n    colon_is_space()\n    : std::ctype&lt;char&gt;(get_table())\n    {}\n\n    static mask const* get_table()\n    {\n        static mask rc[table_size];\n        rc[',']  = std::ctype_base::space;\n        rc['\\n'] = std::ctype_base::space;\n        return rc;\n    }\n};\n\nvoid SplitRowIntoArray(std::string row)\n{\n    std::stringstream ss{ row };\n    ss.imbue(std::locale(ss.getloc(), new comma_is_space));\n\n    std::vector&lt;std::string&gt; words{\n        std::istream_iterator&lt;std::string&gt;{ss},\n        std::istream_iterator&lt;std::string&gt;{}\n    };\n\n    for (auto const &amp; word : words)\n        std::cout &lt;&lt; word &lt;&lt; '\\n';\n}\n\nint main()\n{\n    SplitRowIntoArray(\"1,2,3\");\n}\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 10291039, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Xs8xbUeFDVk/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPxI5G8SuqEEDtBSbwAs3nyEkJWKw/mo/photo.jpg?sz=128", "display_name": "Adam G", "link": "https://stackoverflow.com/users/10291039/adam-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1536584826, "answer_count": 1, "score": 0, "last_activity_date": 1535588530, "creation_date": 1535559866, "last_edit_date": 1535588530, "question_id": 52082107, "link": "https://stackoverflow.com/questions/52082107/splitting-a-string-into-an-array-unwanted-element-in-the-array-it-seems", "closed_reason": "Duplicate", "title": "Splitting a string into an array, unwanted element in the array (it seems)", "body": "<p>My code splits just fine, but when I iterate through and cout each element, the last cout is always the original string with no modification. </p>\n\n<p>For example:</p>\n\n<pre><code>SplitRowIntoArray(\"1,2,3\");\n</code></pre>\n\n<p>Will output: <code>1 2 3  1,2,3</code></p>\n\n<pre><code>void SplitRowIntoArray(std::string row){\n\n    std::string str = row;\n    std::string strWords[24];\n    short counter = 0;\n\n    for(short i=0;i&lt;str.length();i++){\n        if(str[i] == ','){\n            counter++;\n        }\n        else\n        strWords[counter] += str[i];\n\n    }\n\n    for(int i = 0; i &lt; sizeof(strWords); i++){\n        std::cout &lt;&lt; strWords[i] &lt;&lt; std::endl;\n\n    }\n}  \n</code></pre>\n"}, {"tags": ["c++", "c++11", "template-meta-programming", "sfinae", "typetraits"], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1535560702, "creation_date": 1535560702, "answer_id": 52082316, "question_id": 52082069, "link": "https://stackoverflow.com/questions/52082069/sfinae-failing-to-work-with-intermediary-type-traits/52082316#52082316", "title": "SFINAE failing to work with intermediary type traits", "body": "<p>If you read the description of <a href=\"https://en.cppreference.com/w/cpp/language/sfinae\" rel=\"nofollow noreferrer\">SFINAE</a>, there is this sentence:</p>\n\n<blockquote>\n  <p>Only the failures in the types and expressions in the immediate context of the function type or its template parameter types or its explicit specifier (since C++20) are SFINAE errors.</p>\n</blockquote>\n\n<p>That <code>traits&lt;T, U&gt;::type</code> is accessed within the <em>immediate context</em> of <code>function</code> and not that of <code>sfinae</code>. This is why it results in a compiler error.</p>\n"}, {"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 3, "last_activity_date": 1535560725, "creation_date": 1535560725, "answer_id": 52082322, "question_id": 52082069, "link": "https://stackoverflow.com/questions/52082069/sfinae-failing-to-work-with-intermediary-type-traits/52082322#52082322", "title": "SFINAE failing to work with intermediary type traits", "body": "<p>SFINAE requires substitution failures to be \"in the immediate context\" of the instantiation. Otherwise a hard error will occur.</p>\n\n<p>Without the intermediate <code>traits</code> type, the instantiation of <code>function&lt;invalid&lt;int&gt;, valid&lt;int&gt;, invalid&lt;int&gt;::type&gt;</code> causes an error in the immediate context because <code>invalid&lt;int&gt;</code> doesn't have a member named <code>type</code>, so SFINAE kicks in.</p>\n\n<p>With the intermediate <code>traits</code> type, the error occurs during the instantiation of the definition <code>traits&lt;invalid&lt;int&gt;&gt;</code> since this requires the nonexistent <code>invalid&lt;int&gt;::type</code>. This is not in the immediate context, so a hard error occurs.</p>\n\n<p>To fix this, you must ensure that <code>traits</code> always has a valid definition. This can be done like so:</p>\n\n<pre><code>template &lt;class T, class = void&gt;\nstruct traits {};\n\ntemplate &lt;class T&gt;\nstruct traits&lt;T, std::void_t&lt;typename T::type&gt;&gt; {\n    using type = typename T::type;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 49861, "user_id": 882932, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/KdHtK.png?s=128&g=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/882932/vincent"}, "edited": false, "score": 0, "creation_date": 1535577960, "post_id": 52082371, "comment_id": 91122907, "body": "Corollary question: is there a legitimate reason for the &quot;immediate context&quot; thing in the standard (for example would open a pandora box and lead to bad things), or is it just a historical thing with no good technical motivation?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 49861, "user_id": 882932, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/KdHtK.png?s=128&g=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/882932/vincent"}, "edited": false, "score": 0, "creation_date": 1535580987, "post_id": 52082371, "comment_id": 91123866, "body": "@Vincent Avoiding arbitrary compiler complexity probably."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1535561201, "last_edit_date": 1535561201, "creation_date": 1535560889, "answer_id": 52082371, "question_id": 52082069, "link": "https://stackoverflow.com/questions/52082069/sfinae-failing-to-work-with-intermediary-type-traits/52082371#52082371", "title": "SFINAE failing to work with intermediary type traits", "body": "<p>Fundamentally, this boils down to what \"immediate context\" means in <a href=\"http://eel.is/c++draft/temp.deduct#8\" rel=\"nofollow noreferrer\">[temp.deduct]/8</a>, the sfinae rule, which isn't super clearly defined (see <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1844\" rel=\"nofollow noreferrer\">cwg 1844</a>):</p>\n\n<blockquote>\n  <p>If a substitution results in an invalid type or expression, type deduction fails. An invalid type or expression is one that would be ill-formed, with a diagnostic required, if written using the substituted arguments. <em>[\u2009Note:</em> If no diagnostic is required, the program is still ill-formed. Access checking is done as part of the substitution process. <em>\u2014\u2009end note\u2009]</em> <strong>Only invalid types and expressions in the immediate context of the function type, its template parameter types, and its explicit-specifier can result in a deduction failure.</strong> <em>[\u2009Note:</em> The substitution into types and expressions can result in effects such as the instantiation of class template specializations and/or function template specializations, the generation of implicitly-defined functions, etc. Such effects are not in the \u201cimmediate context\u201d and can result in the program being ill-formed. <em>\u2014\u2009end note\u2009]</em></p>\n</blockquote>\n\n<p>In this case, arguably the immediate context is just to see that <code>traits&lt;T,U&gt;::type</code> is a thing that exists. Which it does. But it's only when we go through and instantiate that type as the default argument that we have to look at what <code>T::type</code> is. But that's a little delayed from what we actually need.</p>\n\n<p>What you need is to either force the instantiation of <code>traits</code> itself to fail or force <code>traits</code> to not have a member alias named <code>type</code> if <code>T</code> does not. The cop-out short version would just be:</p>\n\n<pre><code>template &lt;class T, class... Args&gt;\nstruct traits;\n\ntemplate &lt;class T&gt;\nstruct traits&lt;valid&lt;T&gt;&gt; {\n    using type = T;\n};\n</code></pre>\n\n<p>But you'll want something slightly more robust than that.</p>\n\n<hr />\n\n<p>Unfortunately, you cannot add a trailing defaulted template argument like:</p>\n\n<pre><code>template &lt;typename T, typename... Args, typename = typename T::type&gt;\nstruct traits {\n    using type = typename T::type;\n};\n</code></pre>\n\n<p>due to <a href=\"http://eel.is/c++draft/temp.param#15.sentence-2\" rel=\"nofollow noreferrer\">[temp.param]/15</a>, but with Concepts, you could do:</p>\n\n<pre><code>template &lt;typename T&gt;\nconcept Typed = requires {\n    typename T::type;\n};\n\ntemplate &lt;Typed T, typename... Args&gt;\nstruct traits {\n    using type = typename T::type;\n};\n</code></pre>\n"}], "owner": {"reputation": 49861, "user_id": 882932, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/KdHtK.png?s=128&g=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/882932/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 52082371, "answer_count": 3, "score": 1, "last_activity_date": 1535561201, "creation_date": 1535559715, "last_edit_date": 1535560468, "question_id": 52082069, "link": "https://stackoverflow.com/questions/52082069/sfinae-failing-to-work-with-intermediary-type-traits", "title": "SFINAE failing to work with intermediary type traits", "body": "<p>Consider the following test code:</p>\n\n<pre><code>// Preprocessor\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\n// Structure with no type alias\ntemplate &lt;class T&gt;\nstruct invalid {\n};\n\n// Structure with a type alias\ntemplate &lt;class T&gt;\nstruct valid {\n    using type = T;\n};\n\n// Traits getting the type of the first type\ntemplate &lt;class T, class... Args&gt;\nstruct traits {\n    using type = typename T::type;\n};\n\n// One argument function\ntemplate &lt;class T, class = typename traits&lt;T&gt;::type&gt;\nvoid function(T) {\n    std::cout &lt;&lt; \"function(T)\" &lt;&lt; std::endl;\n}\n\n// Two arguments function\ntemplate &lt;class T, class U, class = typename traits&lt;T, U&gt;::type&gt;\nvoid function(T, U) {\n    std::cout &lt;&lt; \"function(T, U)\" &lt;&lt; std::endl;\n}\n\n// When function can be called on all arguments\ntemplate &lt;\n    class... Args,\n    class = decltype(function(std::declval&lt;Args&gt;()...))\n&gt;\nvoid sfinae(Args&amp;&amp;... args) {\n    function(std::forward&lt;Args&gt;(args)...);\n    std::cout &lt;&lt; \"sfinae(Args&amp;&amp;...)\" &lt;&lt; std::endl;\n}\n\n// When function can be called on all arguments except the first one\ntemplate &lt;\n    class T,\n    class... Args,\n    class = decltype(function(std::declval&lt;Args&gt;()...))\n&gt;\nvoid sfinae(const invalid&lt;T&gt;&amp;, Args&amp;&amp;... args) {\n    function(std::forward&lt;Args&gt;(args)...);\n    std::cout &lt;&lt; \"sfinae(const invalid&lt;T&gt;&amp;, Args&amp;&amp;...)\" &lt;&lt; std::endl;\n}\n\n// Main function\nint main(int argc, char* argv[]) {\n    valid&lt;int&gt; v;\n    invalid&lt;int&gt; i;\n    sfinae(v);\n    sfinae(i, v);\n    return 0;\n}\n</code></pre>\n\n<p>The code involves:</p>\n\n<ul>\n<li>a structure <code>invalid</code> that has no <code>::type</code></li>\n<li>a structure <code>valid</code> that has a <code>::type</code></li>\n<li>a structure <code>traits</code> that defines <code>::type</code> as <code>T::type</code></li>\n<li>an overloaded <code>function</code> which should work only if the type of the first argument is such that <code>traits&lt;T&gt;::type</code> is defined</li>\n<li>an overloaded <code>sfinae</code> function that should be able to call <code>function</code> even if the first argument is <code>invalid</code></li>\n</ul>\n\n<p>However, the SFINAE mechanism does not seem to work in this instance, and I am not sure to understand why. The error is the following:</p>\n\n<pre><code>sfinae_problem_make.cpp:19:30: error: no type named 'type' in 'invalid&lt;int&gt;'\n    using type = typename T::type;\n                 ~~~~~~~~~~~~^~~~\nsfinae_problem_make.cpp:29:46: note: in instantiation of template class 'traits&lt;invalid&lt;int&gt;, valid&lt;int&gt; &gt;' requested here\ntemplate &lt;class T, class U, class = typename traits&lt;T, U&gt;::type&gt;\n                                             ^\nsfinae_problem_make.cpp:30:6: note: in instantiation of default argument for 'function&lt;invalid&lt;int&gt;, valid&lt;int&gt; &gt;' required here\nvoid function(T, U) {\n     ^~~~~~~~~~~~~~~~\nsfinae_problem_make.cpp:37:22: note: while substituting deduced template arguments into function template 'function' [with T = invalid&lt;int&gt;, U = valid&lt;int&gt;, $2 = (no value)]\n    class = decltype(function(std::declval&lt;Args&gt;()...))\n                     ^\nsfinae_problem_make.cpp:39:6: note: in instantiation of default argument for 'sfinae&lt;invalid&lt;int&gt; &amp;, valid&lt;int&gt; &amp;&gt;' required here\nvoid sfinae(Args&amp;&amp;... args) {\n     ^~~~~~~~~~~~~~~~~~~~~~~~\nsfinae_problem_make.cpp:60:5: note: while substituting deduced template arguments into function template 'sfinae' [with Args = &lt;invalid&lt;int&gt; &amp;, valid&lt;int&gt; &amp;&gt;, $1 = (no value)]\n    sfinae(i, v);\n</code></pre>\n\n<p>The very surprising thing is that if traits is removed from the problem:</p>\n\n<pre><code>// Preprocessor\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\n// Structure with no type alias\ntemplate &lt;class T&gt;\nstruct invalid {\n};\n\n// Structure with a type alias\ntemplate &lt;class T&gt;\nstruct valid {\n    using type = T;\n};\n\n// Traits getting the type of the first type\ntemplate &lt;class T, class... Args&gt;\nstruct traits {\n    using type = typename T::type;\n};\n\n// One argument function\ntemplate &lt;class T, class = typename T::type&gt;\nvoid function(T) {\n    std::cout &lt;&lt; \"function(T)\" &lt;&lt; std::endl;\n}\n\n// Two arguments function\ntemplate &lt;class T, class U, class = typename T::type&gt;\nvoid function(T, U) {\n    std::cout &lt;&lt; \"function(T, U)\" &lt;&lt; std::endl;\n}\n\n// When function can be called on all arguments\ntemplate &lt;\n    class... Args,\n    class = decltype(function(std::declval&lt;Args&gt;()...))\n&gt;\nvoid sfinae(Args&amp;&amp;... args) {\n    function(std::forward&lt;Args&gt;(args)...);\n    std::cout &lt;&lt; \"sfinae(Args&amp;&amp;...)\" &lt;&lt; std::endl;\n}\n\n// When function can be called on all arguments except the first one\ntemplate &lt;\n    class T,\n    class... Args,\n    class = decltype(function(std::declval&lt;Args&gt;()...))\n&gt;\nvoid sfinae(const invalid&lt;T&gt;&amp;, Args&amp;&amp;... args) {\n    function(std::forward&lt;Args&gt;(args)...);\n    std::cout &lt;&lt; \"sfinae(const invalid&lt;T&gt;&amp;, Args&amp;&amp;...)\" &lt;&lt; std::endl;\n}\n\n// Main function\nint main(int argc, char* argv[]) {\n    valid&lt;int&gt; v;\n    invalid&lt;int&gt; i;\n    sfinae(v);\n    sfinae(i, v);\n    return 0;\n}\n</code></pre>\n\n<p>then it works as expected and outputs:</p>\n\n<pre><code>function(T)\nsfinae(Args&amp;&amp;...)\nfunction(T)\nsfinae(const invalid&lt;T&gt;&amp;, Args&amp;&amp;...)\n</code></pre>\n\n<p><strong>Question:</strong> Why the first version does not work, and is there a way to make it work with the intermediary type traits?</p>\n"}, {"tags": ["c++", "class", "public"], "comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1535559763, "post_id": 52081958, "comment_id": 91114459, "body": "Off-topic: don&#39;t implement singleton pattern <i>and</i> provide public constructor(s)! Better variant (guaranteed by standard even to be threadsafe): <code>SC&amp; instance() { static SC sc; return sc; }</code>"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1535559811, "post_id": 52081958, "comment_id": 91114490, "body": "Where did you <i>try</i> using those members? I can&#39;t see any code in <code>parser</code> that does. What error message did you get?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1535559816, "post_id": 52081958, "comment_id": 91114491, "body": "When you say, &quot;I can&#39;t use members variables in parser class&quot;, what does that mean <i>exactly</i> ? Does the compiler fail to ingest your code ? Is there some error when you <i>run</i> the code after successful compile? Fwiw, that&#39;s not a proper singleton pattern (if there even is such a thing), but somehow I don&#39;t think that&#39;s related to whatever problem you&#39;re <i>really</i> having. Even if this compiles <code>buffer_size</code> is indeterminate, so that <code>memset</code> call is a recipe for a runtime fault."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1535559956, "post_id": 52081958, "comment_id": 91114550, "body": "As <code>parser</code> inherits from <code>uart</code>, creating a <code>parser</code> object will end up in both singletons point to the same instance, losing a possibly previously created separate <code>uart</code> singleton object! Is this what you intended?"}, {"owner": {"reputation": 23, "user_id": 10285974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55adfabcb1a0bb16c670ce307c698577?s=128&d=identicon&r=PG&f=1", "display_name": "Meliodas", "link": "https://stackoverflow.com/users/10285974/meliodas"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1535560137, "post_id": 52081958, "comment_id": 91114649, "body": "@Aconcagua, yes, that is my goal"}, {"owner": {"reputation": 23, "user_id": 10285974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55adfabcb1a0bb16c670ce307c698577?s=128&d=identicon&r=PG&f=1", "display_name": "Meliodas", "link": "https://stackoverflow.com/users/10285974/meliodas"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1535560250, "post_id": 52081958, "comment_id": 91114705, "body": "@Useless, I said I cant use the variable members, becuase they are not updating or changing their values on my formal code"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1535560275, "post_id": 52081958, "comment_id": 91114719, "body": "Do you rely on <code>parser</code> being a <code>uart</code>? Class names rather imply that they adhere to orthogonal concepts. Maybe better not inheriting and let <code>parser</code> get and use the <code>uart</code> singleton?"}, {"owner": {"reputation": 23, "user_id": 10285974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55adfabcb1a0bb16c670ce307c698577?s=128&d=identicon&r=PG&f=1", "display_name": "Meliodas", "link": "https://stackoverflow.com/users/10285974/meliodas"}, "edited": false, "score": 0, "creation_date": 1535560459, "post_id": 52081958, "comment_id": 91114814, "body": "I  just want to use the members variables from <b>uart</b>, inside the  <b>parser</b>, but I am not sure the correct way to do it, for me the simpler way is using extern variables, but it probably is not the proper way when we are using singleton"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1535560799, "post_id": 52081958, "comment_id": 91114981, "body": "Don&#39;t really get the issue... <code>void parser::f() { state = BufferingEmpty; }</code> is fine... Only if you have a separate <code>state</code> variable within parser, you&#39;d need for accessing the base class instance: <code>uart::state = BufferingEmpty;</code>."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1535561056, "post_id": 52081958, "comment_id": 91115095, "body": "From the little bit of code you provided, I&#39;d assume the singleton is just not needed, so you might prefer just to drop it. <i>If</i> you still decide you need it, implement it correctly. Current design is flawed and at some point in future, you&#39;re bound to <i>fail</i>, either already in current project or in a future one, if you transfer the design as is..."}, {"owner": {"reputation": 23, "user_id": 10285974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55adfabcb1a0bb16c670ce307c698577?s=128&d=identicon&r=PG&f=1", "display_name": "Meliodas", "link": "https://stackoverflow.com/users/10285974/meliodas"}, "edited": false, "score": 0, "creation_date": 1535561350, "post_id": 52081958, "comment_id": 91115215, "body": "when I tried to printf: <b>void parser::test(){\tprintf(&quot;state %s&quot;, state);</b> I got nothing or if I try to printf any variable member from uart, it returns null it is not updating with changes to the variables on uart.cpp"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1535561481, "post_id": 52081958, "comment_id": 91115287, "body": "@Meliodas <code>state</code> is not a C string!!! <code>%s</code> only is for C strings (i. e. null terminated character arrays). Try <code>printf(&quot;state %u&quot;, (unsigned int)state);</code> instead."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1535561939, "post_id": 52081958, "comment_id": 91115517, "body": "It was just too easy to overlook the <code>%s</code> problem because your example is not minimal. Have a look at <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You should remove all parts that are not relevant for the error. Iterative steps: remove part of code, test if problem persists, if so, go on, else keep the code part just removed. You might start with entire classes, when done, functions of the classes that remained, finally function blocks... During this process, chances are that you already discover the problem yourself (most likely, though, not in given case...)."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1535562121, "post_id": 52081958, "comment_id": 91115602, "body": "I&#39;m afraid I can&#39;t see any useful way to answer this question without code that actually demonstrates the problem. The suggestion to reduce it to a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete and Verifiable Example</a> is correct - code that isn&#39;t required to reproduce the issue just makes it harder to read, but the code really <i>does</i> need to demonstrate the problem you&#39;re asking about. Right now I still don&#39;t know if you&#39;re not sure what to write in the first place, or have a compile error, or it builds but gives unexpected results at runtime."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1535562164, "post_id": 52081958, "comment_id": 91115626, "body": "Back to dropping singletons: Even if you do so, I still recommend <code>parser</code> not letting inherit from <code>uart</code>, instead rather have an aggregated object: <code>class parser { uart m_uart;; };</code>. Access is: <code>void parser::f() { m_uart.state = ...; }</code>. Consider correct encapsulation, though, providing getters and setters only to what other objects <i>really</i> should be able to access (so e. g. the buffer might be private)."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10285974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55adfabcb1a0bb16c670ce307c698577?s=128&d=identicon&r=PG&f=1", "display_name": "Meliodas", "link": "https://stackoverflow.com/users/10285974/meliodas"}, "edited": false, "score": 0, "creation_date": 1535572535, "post_id": 52083238, "comment_id": 91120560, "body": "dude thanks for your help, I absolutely should learn a lot more about programming patterns, I am just using singleton because some code I am working on uses it. I am new in c++ world so I don&#39;t have enough experience yet"}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 1, "last_activity_date": 1535564327, "last_edit_date": 1535564327, "creation_date": 1535564005, "answer_id": 52083238, "question_id": 52081958, "link": "https://stackoverflow.com/questions/52081958/how-is-the-proper-way-to-use-class-members-in-another-class/52083238#52083238", "title": "How is the proper way to use class members in another class?", "body": "<p>Initial problem apparently was using a bad format specifier:</p>\n\n<pre><code>void parser::test()\n{       \n    printf(\"state %s\", state);\n    //            ^^\n}\n</code></pre>\n\n<p><code>%s</code> is for C strings only (i. e. null terminated <code>char</code> arrays). Here, <code>state</code> is interpreted as a pointer, but it points to invalid addresses (undefined behaviour), so you're application might have crashed before it was able to produce any output at all.</p>\n\n<p>Even if <code>state</code> <em>did</em> contain a valid address, you would still suffer from undefined behaviour because <code>%s</code> requires an argument of type <code>char*</code> (to avoid UB, you need to cast).</p>\n\n<p>Use the correct format specifier to get around the problem:</p>\n\n<pre><code>printf(\"state %u\", static_cast&lt;unsigned int&gt;(state));\n</code></pre>\n\n<p>You still need the cast to avoid UB as <code>%u</code> requires <code>unsigned int</code>, but your enum is not (alternatively you could use <code>%d</code> and cast to <code>int</code>).</p>\n\n<p>Apparently, too, you now tried (because of not having discovered the actual error) to get around what you <em>assumed</em> it to be by use of singletons &ndash; unfortunaly, by badly implementing the pattern, you flawed your design.</p>\n\n<p>How to repair? At first, drop the singletons. There absolutely is no need for in given case. Then think twice (the following already was an issue <em>before</em>): Is a parser really an UART? Not considering the code, but the concepts, I clearly say \"no\". So you should not let <em>inherit</em> <code>parser</code> from <code>uart</code> either. Rather let it aggregate one:</p>\n\n<pre><code>class parser // : public uart\n{\n    uart m_uart;\npublic:\n    // ...\n    void test()\n    {\n        printf(\"%u\", static_cast&lt;unsigned int&gt;(m_uart.state);\n    }\n</code></pre>\n\n<p>};</p>\n\n<p>Alternatively, you might provide it externally via pointer or reference (to the constructor) and store it as such, but then you will quickly run into life time management as well, more advanced concepts I'd recommend you to come back to with a little bit more of experience...</p>\n\n<p>What you <em>should</em> get used to, though: encapsulation. Don't make member variables public unless you <em>really</em> want them to be changed from <em>anywhere</em>. For instance, the <code>buffer</code> is a hot candidate for being private (not even protected).</p>\n\n<p>Finally <code>buffer_size</code>: If you intend this to be used to count number of values <em>currently</em> in buffer, then it is fine. If it shall represent the maximum number of data that <em>can</em> be stored, then it is redundant. Wherever you need it, you can get the size by <code>sizeof(buffer)/sizeof(*buffer)</code> (unless the array has decayed to pointer!). Division by size of first element is necessary as <code>sizeof</code> always delivers size in bytes, <em>not</em> in number of elements.</p>\n\n<p>Size in number of elements is what you get by <code>std::array::size</code>; you should prefer <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">std::array</a> over raw arrays due to the superior interface! Maybe <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">std::vector</a> even is a yet better choice?</p>\n"}], "owner": {"reputation": 23, "user_id": 10285974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55adfabcb1a0bb16c670ce307c698577?s=128&d=identicon&r=PG&f=1", "display_name": "Meliodas", "link": "https://stackoverflow.com/users/10285974/meliodas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 52083238, "answer_count": 1, "score": 0, "last_activity_date": 1535564327, "creation_date": 1535559230, "last_edit_date": 1535560286, "question_id": 52081958, "link": "https://stackoverflow.com/questions/52081958/how-is-the-proper-way-to-use-class-members-in-another-class", "title": "How is the proper way to use class members in another class?", "body": "<p>I am trying to use class members from a different class adding the \"<strong>class uart</strong>\" to \"<strong>class parser : public uart</strong>\"</p>\n\n<p>But I can't use members variables in parser class for example (bufer_size, buffer, or state Enum the values are not changing or updating) the only way I can use these variables are using them as external variables, but I would like do it in a class member way.</p>\n\n<p>Below please find my code:</p>\n\n<p><strong>main:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"parser.h\"\nint main()\n{\n    parser m_parser;\n    m_parser.test();\n    return 0;\n}\n</code></pre>\n\n<p><strong>uart.h</strong></p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n\n//extern uint16_t buffer_size;\n//extern char buffer[1024];\n\nclass uart\n{\npublic:\n    // Construction\n    uart();\n\n    //..... some functions\n    void Initialize();\n\n    //members\n    enum STATE_enum\n    {\n        Buffering_message=0,\n        Message_received,\n        Buffering_empty\n    };\n    STATE_enum state;\n\n    uint16_t buffer_size;\n    char buffer[1024];\nprotected:\n    //  static void UARTHandler(app_uart_evt_t * p_event);\n    void Message();\n    // Singleton instance\n    static uart * m_instance;\n};\n</code></pre>\n\n<p><strong>uart.cpp</strong></p>\n\n<pre><code>#include \"uart.h\"\n//uint16_t buffer_size=0;\n//char buffer[1024];\n\nuart * uart::m_instance = 0; // Singleton instance\n\nuart::uart()// Construction\n{\n    state = Buffering_empty;\n    m_instance = this;\n}\n\nvoid uart::Initialize()\n{\n}\n/*void UART::UARTHandler(app_uart_evt_t * p_event)\n{\n    Message();\n}*/\nvoid uart::Message()\n{\n    uint8_t value;\n//  while ((app_uart_get(&amp;value)) == NRF_SUCCESS) //specific function from my microcontroller stack for reading RX bytes\n    {\n        if(value == 0x0A ) // message end /r\n            state = Message_received;\n    }       \n    switch (state)\n    {\n        case Message_received:\n                printf(\"message:[%s] buffer_size:[%d]\", buffer,buffer_size); //printf fine from there\n        break;      \n        case Buffering_message:\n                buffer[buffer_size++] = value;              \n        break;\n        default:\n        break;      \n    }       \n}\n</code></pre>\n\n<p><strong>parser.h</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include \"uart.h\"\n\nclass parser : public uart\n{\npublic: \n    parser();\n\n    void test();\n    static parser * m_instance; \n\n    static inline parser &amp; Instance()// Singleton access\n    {\n        return *m_instance;\n    }       \n};\n</code></pre>\n\n<p><strong>parser.cpp</strong></p>\n\n<pre><code>#include \"parser.h\"\n\nclass parser * parser::m_instance = 0;\n\n// Constructor\nparser::parser()\n{\n    m_instance = this;\n}\n\nvoid parser::test()\n{       \n    printf(\"state %s\", state); // sending AT command\n\n//  memset(buffer, 0, buffer_size); \n//  buffer_size = 0;    \n}\n</code></pre>\n\n<p>Should I use the above as a Public class or add it as a friend class, or simply use as external variables?</p>\n"}, {"tags": ["c++", "optimization", "inlining"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1535558656, "post_id": 52081564, "comment_id": 91113880, "body": "These days in most situations its best to let the compiler do its job and avoid manual intervention unless absolutely necessary (meaning you profiled and found a need to optimize)."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1535558866, "post_id": 52081564, "comment_id": 91113992, "body": "&quot;Does a programmer have to look for example to the size of the produced executable?&quot; if you dont know then most likely no. Size of the executable can be important when you target a system with scarce ressources"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1535559102, "post_id": 52081564, "comment_id": 91114114, "body": "Normally, you do fine by giving the compiler the appropriate compiler flags, e. g. <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html\" rel=\"nofollow noreferrer\">GCC</a>: <code>-O3</code> (speed) or <code>-Os</code> (size), possibly <code>-Ofast</code> or <code>-Og</code> as well."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1535559440, "post_id": 52081564, "comment_id": 91114297, "body": "If you have an issue, rather take the effort to <i>profile</i> your application. Chances (less small than you think probably) are that the bottle neck will be at some totally different location you didn&#39;t even have in mind before. Then optimise <i>this specific</i> function (maybe even on assembler level)."}, {"owner": {"reputation": 75, "user_id": 9262035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v6SJ8.png?s=128&g=1", "display_name": "Achrouf Abdenour", "link": "https://stackoverflow.com/users/9262035/achrouf-abdenour"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1535573440, "post_id": 52081564, "comment_id": 91120993, "body": "@user463035818 From what i now inlining is only performed on small functions ,if program size is not important why we don&#39;t inline big functions?can we always trust the compiler to find the right combination between the size and the speed of a program?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1535574377, "post_id": 52081564, "comment_id": 91121443, "body": "well, my comment was a bit sloppy. Of course the size of the executable does matter, but the details of all the trade-offs are that complex that you cannot trust a programmer to find the right combination in his lifetime. Note that for example gcc has the <a href=\"https://stackoverflow.com/questions/19689014/gcc-difference-between-o3-and-os\">-Os flag to optimize for size</a>(but not for performance)"}, {"owner": {"reputation": 75, "user_id": 9262035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v6SJ8.png?s=128&g=1", "display_name": "Achrouf Abdenour", "link": "https://stackoverflow.com/users/9262035/achrouf-abdenour"}, "edited": false, "score": 0, "creation_date": 1535624706, "post_id": 52081564, "comment_id": 91139418, "body": "Let say that we do an aggressive method inlining and the size will be 3 times or more than usually?how do this will affect the performance of the program if we run it in desktop ,iphone or Android where these days we have 4 GB up to 32 gb of ram,if aggressive inlining is benefit in all situations why we don&#39;t compile programs every time with the -O3 flag for exemple rather than using the -O2 flag wich is the most commun by default."}], "answers": [{"tags": [], "owner": {"reputation": 9784, "user_id": 227755, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4a4377b8beefc590e722a17b7fa5da66?s=128&d=identicon&r=PG", "display_name": "nurettin", "link": "https://stackoverflow.com/users/227755/nurettin"}, "is_accepted": false, "score": 1, "last_activity_date": 1535559100, "creation_date": 1535559100, "answer_id": 52081924, "question_id": 52081564, "link": "https://stackoverflow.com/questions/52081564/who-to-take-the-write-numbers-when-it-came-to-function-inlining-in-c/52081924#52081924", "title": "Who to take the write numbers when it&#39; came to function inlining in C++?", "body": "<p>If you have a need to spend time with micro-optimization, output the assembly and see if your function is inlined within the contexts you use it. There are online <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">tools</a> that does this with multiple versions of gcc and clang. You will get the hang of it after a few experiments. </p>\n"}], "owner": {"reputation": 75, "user_id": 9262035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v6SJ8.png?s=128&g=1", "display_name": "Achrouf Abdenour", "link": "https://stackoverflow.com/users/9262035/achrouf-abdenour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535559100, "creation_date": 1535557948, "last_edit_date": 1535558165, "question_id": 52081564, "link": "https://stackoverflow.com/questions/52081564/who-to-take-the-write-numbers-when-it-came-to-function-inlining-in-c", "title": "Who to take the write numbers when it&#39; came to function inlining in C++?", "body": "<p>When developing C++ programs with clang or gcc inlining metrics are taken by default so how a user can choose the inlining parameters like the max size of the inlinee method or the container size for example to optimize for the best his program? Does a programmer have to look for example to the size of the produced executable? number of virtual methods? how inlining metrics should be taken?</p>\n"}, {"tags": ["c++", "cmake", "botan", "vcpkg"], "comments": [{"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 0, "creation_date": 1535558617, "post_id": 52081449, "comment_id": 91113852, "body": "Use powershell and vcpkg to install botan without cmake. IDE is VC2017?"}, {"owner": {"reputation": 21, "user_id": 10290901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4c8315ba432920a6329f0e7193dacd?s=128&d=identicon&r=PG&f=1", "display_name": "c3664698", "link": "https://stackoverflow.com/users/10290901/c3664698"}, "reply_to_user": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 1, "creation_date": 1535563280, "post_id": 52081449, "comment_id": 91116274, "body": "@seccpur If possible I want to use CMake to be able to compile it on different platforms. I installed botan, however CMake does not find it."}, {"owner": {"reputation": 3649, "user_id": 294569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c97ccc8981952c53fa09dadfafb132?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/294569/damian"}, "edited": false, "score": 0, "creation_date": 1618476291, "post_id": 52081449, "comment_id": 118614133, "body": "vcpkg can now install botan, but <code>find_package(botan REQUIRED)</code> still fails with the same error"}], "answers": [{"tags": [], "owner": {"reputation": 371, "user_id": 603646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9fc81626ef71ac9a325a7cbdce698f6?s=128&d=identicon&r=PG", "display_name": "Placinta", "link": "https://stackoverflow.com/users/603646/placinta"}, "is_accepted": false, "score": 1, "last_activity_date": 1563432973, "creation_date": 1563432973, "answer_id": 57088688, "question_id": 52081449, "link": "https://stackoverflow.com/questions/52081449/vcpkg-cmake-does-not-find-botan/57088688#57088688", "title": "vcpkg cmake does not find botan", "body": "<p>vcpkg does not provide a Config file for a built and installed Botan. </p>\n\n<p>You will either have to use find_path() and find_library() directly in your CMake project, or write a FindBotan.cmake file which would be found by a find_package() call. Inside this FindBotan.cmake you would still need to use find_path() and find_library() plus some other usual boilerplate that appears in Find modules.</p>\n\n<p>If you search on the internet, you can already find some versions of FindBotan.cmake, but none of them are official.</p>\n"}], "owner": {"reputation": 21, "user_id": 10290901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4c8315ba432920a6329f0e7193dacd?s=128&d=identicon&r=PG&f=1", "display_name": "c3664698", "link": "https://stackoverflow.com/users/10290901/c3664698"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1563432973, "creation_date": 1535557523, "last_edit_date": 1535563329, "question_id": 52081449, "link": "https://stackoverflow.com/questions/52081449/vcpkg-cmake-does-not-find-botan", "title": "vcpkg cmake does not find botan", "body": "<p>I use vcpkg as my package manager, following the example it was quite easy to build the <a href=\"https://github.com/Microsoft/vcpkg/blob/master/docs/examples/using-sqlite.md\" rel=\"nofollow noreferrer\">example</a> with sqlite. </p>\n\n<p>Afterwards I successfully installed botan and tried to find the library using\n<code>find_package(botan REQUIRED)</code> as shown in the example <a href=\"https://github.com/Microsoft/vcpkg/blob/master/docs/examples/using-sqlite.md\" rel=\"nofollow noreferrer\">here</a>.\nHowever unfortunately this does not work and the generation exits with the error</p>\n\n<pre><code>CMake Error at vcpkg/scripts/buildsystems/vcpkg.cmake:247 (_find_package):\n  By not providing \"Findbotan.cmake\" in CMAKE_MODULE_PATH this project has\n  asked CMake to find a package configuration file provided by \"botan\", but\n  CMake did not find one.\n\n  Could not find a package configuration file provided by \"botan\" with any of\n  the following names:\n\n    botanConfig.cmake\n    botan-config.cmake\n\n  Add the installation prefix of \"botan\" to CMAKE_PREFIX_PATH or set\n  \"botan_DIR\" to a directory containing one of the above files.  If \"botan\"\n  provides a separate development package or SDK, be sure it has been\n  installed.\nCall Stack (most recent call first):\n  CMakeLists.txt:4 (find_package\n</code></pre>\n\n<p>The CMakeLists.txt looks like the following</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.0)\nproject(botanTest)\n\nfind_package(botan REQUIRED)\n\nadd_executable(main main.cpp)\ntarget_link_libraries(main botan)\n</code></pre>\n\n<p>Is there a way to build an application that depends on botan with cmake and vcpkg? If not for cmake, how to use botan as vcpkg package at all? Hardcoding the location is not a viable solution.</p>\n\n<p>Thanks four your help.</p>\n"}, {"tags": ["c++", "pointers", "integer", "swap", "memory-address"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 7, "creation_date": 1535557365, "post_id": 52081367, "comment_id": 91113026, "body": "Is it me, or is <code>swap1</code> the same as <code>swap2</code> and <code>swap3</code> the same as <code>swap 4</code>?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1535557430, "post_id": 52081367, "comment_id": 91113071, "body": "<code>p2 = &amp;num2;</code> won&#39;t be a problem, since <code>p2</code> is already equal to <code>&amp;num2</code>. The line doesn&#39;t do anything."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1535557442, "post_id": 52081367, "comment_id": 91113076, "body": "<code>swap3</code> and <code>swap4</code> swap the values the the pointers point to, they don&#39;t swap the pointers themselves."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 3, "creation_date": 1535557487, "post_id": 52081367, "comment_id": 91113100, "body": "You&#39;re printing <code>p1</code> and <code>p2</code>, which are pointers, so you are getting address, which is normal. If you want the associated value, you should print <code>num1</code> and <code>num2</code> since these are the values pointed to by <code>p1</code> and <code>p2</code>, or print <code>*p1</code> and <code>*p2</code> instead."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1535557827, "post_id": 52081367, "comment_id": 91113336, "body": "After you digest all that, <code>std::swap(num1, num2);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1535558812, "post_id": 52081550, "comment_id": 91113978, "body": "Just a (very) minor one, but still: mixing C style <code>\\n</code> and C++ style <code>std::endl</code>..."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 2, "creation_date": 1535560556, "post_id": 52081550, "comment_id": 91114859, "body": "@Aconcagua There&#39;s nothing wrong with using <code>&#39;\\n&#39;</code> with <code>std::cout</code>. <code>std::endl</code> does extra stuff like flushing the stream which you may not necessarily need every time you need to end a line. It&#39;s not a question of style, <code>&#39;\\n&#39;</code> and <code>std::endl</code> do slightly different things."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 4, "last_activity_date": 1535558292, "last_edit_date": 1535558292, "creation_date": 1535557886, "answer_id": 52081550, "question_id": 52081367, "link": "https://stackoverflow.com/questions/52081367/fixing-a-program-using-4-swap-functions-in-c/52081550#52081550", "title": "Fixing a program using 4 swap functions in C++", "body": "<p>The entire exercise is really unclear because the code is \"poorly written\" in many aspects:</p>\n\n<ul>\n<li><p>Using almost the same function name for functions that are (maybe) supposed to do very different things (swap pointers vs swap pointer contents). Or, if they are supposed to all do the same thing, ...</p></li>\n<li><p>...using identical functions on identical inputs for no deeper reason. Note in particular the amount of code duplication that should probably be abstracted away.</p></li>\n<li><p><code>using namespace std;</code> is a pretty bad idea.</p></li>\n<li><p>Writing custom swap functions instead of using <code>std::swap</code> as appropriate.</p></li>\n</ul>\n\n<p>It's pretty obvious that the point is to demonstrate the difference between references and pointers, but the instruction \"it's bad, fix it\" is too broad to allow a definitive solution.</p>\n\n<p>More to the point, there is no specification whether <code>swap4</code> should swap pointers or their contents. If the former is correct then the function is wrong, if it's the latter then the printout is at least misleading.</p>\n"}], "owner": {"reputation": 11, "user_id": 7024018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e1e90e9b16616d7e8680d8c34437cb7?s=128&d=identicon&r=PG&f=1", "display_name": "warriorpx", "link": "https://stackoverflow.com/users/7024018/warriorpx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535558292, "creation_date": 1535557191, "question_id": 52081367, "link": "https://stackoverflow.com/questions/52081367/fixing-a-program-using-4-swap-functions-in-c", "title": "Fixing a program using 4 swap functions in C++", "body": "<p>Beginner programmer here. I have an assignment due tomorrow that demonstrates a poorly written program, and we have to \"fix\" it for a grade. There is no description about what the program is supposed to do. I'm assuming they want us to swap numbers using 4 different methods.</p>\n\n<p>All of the methods work up until swap4, where it shows me an address of memory instead of a value. </p>\n\n<p>I'm almost certain it's the line:</p>\n\n<pre><code>int *p1 = &amp;num1;\nint *p2 = &amp;num2;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           \np2 = &amp;num2;\n</code></pre>\n\n<p>That is making it not work. </p>\n\n<p>If anyone could help me out, it would be greatly appreciated. Here is the full code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nvoid swap1(int&amp; n1, int&amp; n2)\n{\n    int temp = n1;\n    n1 = n2;\n    n2 = temp;\n}\n\nvoid swap2(int&amp; n1, int&amp; n2)\n{\n    int temp = n1;\n    n1 = n2;\n    n2 = temp;\n}\n\nvoid swap3(int* p1, int* p2)\n{\n    int temp = *p1;\n    *p1 = *p2;\n    *p2 = temp;\n}\n\nvoid swap4(int *p1, int *p2)\n{\n    int temp = *p1;\n    *p1 = *p2;\n    *p2 = temp;\n}\n\nint main()\n{\n    int num1 = 1;\n    int num2 = 2;\n\n    cout &lt;&lt; \"Before invoking the swap1 function, num1 is: \" \n    &lt;&lt; num1 &lt;&lt; \" and num2 is: \" &lt;&lt; num2 &lt;&lt; endl;\n\n    swap1(num1, num2);\n\n    cout &lt;&lt; \"After invoking the swap1 function, num1 is \" &lt;&lt; num1 &lt;&lt;\n    \" and num 2 is: \" &lt;&lt; num2 &lt;&lt; endl;\n\n    cout &lt;&lt; \"\\nBefore invoking the swap2 function, num1 is: \"\n    &lt;&lt; num1 &lt;&lt; \" and num2 is: \" &lt;&lt; num2 &lt;&lt; endl;\n\n    swap2(num1, num2);\n\n    cout &lt;&lt; \"After invoking the swap2 function, num1 is: \" &lt;&lt; num1 &lt;&lt; \n    \" and num2 is: \" &lt;&lt; num2 &lt;&lt; endl;\n\n    cout &lt;&lt; \"\\nBefore invoking the swap3 function, num1 is: \" &lt;&lt; num1 &lt;&lt;\n    \" and num2 is \" &lt;&lt; num2 &lt;&lt; endl;\n\n    swap3(&amp;num1, &amp;num2);\n\n    cout &lt;&lt; \"After invoking the swap3 function, num1 is: \" &lt;&lt; num1 &lt;&lt;\n    \" and num2 is: \" &lt;&lt; num2 &lt;&lt; endl;\n\n    int *p1 = &amp;num1;\n    int *p2 = &amp;num2;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           \n    p2 = &amp;num2;\n\n    cout &lt;&lt; \"\\nBefore invoking the swap4 function, p1 is \" &lt;&lt; p1 &lt;&lt; \" and p2 is\"\n    &lt;&lt; p2 &lt;&lt; endl;\n\n    swap4(p1, p2);\n\n    cout &lt;&lt; \"After invoking the swap4 function, p1 is \" &lt;&lt; p1 &lt;&lt; \"and p2 is\"\n    &lt;&lt; p2 &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "goto"], "comments": [{"owner": {"reputation": 355, "user_id": 7727881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c152f477205ff3100d5ebcf7eb0f169?s=128&d=identicon&r=PG&f=1", "display_name": "AlexL", "link": "https://stackoverflow.com/users/7727881/alexl"}, "edited": false, "score": 2, "creation_date": 1535557259, "post_id": 52081341, "comment_id": 91112959, "body": "You could use a cycle <code>while True</code> with <code>continue</code> where are your <code>goto Jump</code>&#39;s, with break at the end of last &quot;goto&quot; behind the following indentation."}, {"owner": {"reputation": 1230, "user_id": 5779186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0599f9b586109ce9c0093b56aa66a267?s=128&d=identicon&r=PG&f=1", "display_name": "E.Serra", "link": "https://stackoverflow.com/users/5779186/e-serra"}, "edited": false, "score": 0, "creation_date": 1535557270, "post_id": 52081341, "comment_id": 91112965, "body": "Since Jump is In the beginning, you could make it all a function and return a call to itself instead of the GOTO. if I am not horribly mistaken."}, {"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 1, "creation_date": 1535558032, "post_id": 52081341, "comment_id": 91113469, "body": "You left out the <code>break</code> at the end of your <code>while</code> loop (and I believe the <code>roi = ...</code> and <code>hsv = ...</code> lines should be indented another level)."}, {"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1535633264, "post_id": 52081341, "comment_id": 91145130, "body": "seriously man, use a <code>continue</code> instead of a <code>goto</code>"}], "answers": [{"tags": [], "owner": {"reputation": 336, "user_id": 1945756, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/FhWJ6.jpg?s=128&g=1", "display_name": "Stephen Ellwood", "link": "https://stackoverflow.com/users/1945756/stephen-ellwood"}, "is_accepted": false, "score": 0, "last_activity_date": 1535557953, "creation_date": 1535557953, "answer_id": 52081566, "question_id": 52081341, "link": "https://stackoverflow.com/questions/52081341/pythonizing-c-block-with-goto-statement/52081566#52081566", "title": "Pythonizing C++ block with goto statement", "body": "<p>Since all the jumps seem to be preceeded by j++ and jump is the start of the loop, it would seem that the Python continue statement would solve your problem quite easily?</p>\n\n<pre><code># Loop over all detected circles of the input image\nfor in range(1, circle_radius_vec.size()):\n\n    # Variables for ROI\n    roi_height_width = 0\n    roi_corner_x = 0\n    roi_corner_y = 0\n\n    Point center_now(roi_height_width/2, roi_height_width/2)\n\n    # Load aktuellen center point\n    center_now = center_vec[j]\n\n    # Calculate ROI \n    roi_height_width = circle_radius_vec[j]\n    roi_corner_x = center_now.x - roi_height_width/2\n    roi_corner_y = center_now.y - roi_height_width/2   \n\n    # If ROI is outside of image skip circle\n    if roi_corner_x &lt; 0 or roi_corner_y &lt; 0 or roi_corner_x + roi_height_width &gt; input_img.cols or roi_corner_y + roi_height_width &gt; input_img.rows:\n        continue\n\n    # Create ROI from input image\n    Rect roi = Rect(roi_corner_x, roi_corner_y, roi_height_width, roi_height_width)\n    img_roi = input_img(roi)\n\n    # Create HSV representation of ROI\n    hsv()\n    cvtColor(img_roi, hsv, COLOR_BGR2HSV)\n    ...\n</code></pre>\n\n<p>I would personally just invert the if statement and execute the bottom half of the code conditionally as follows:</p>\n\n<pre><code># Loop over all detected circles of the input image\nfor in range(1, circle_radius_vec.size()):\n\n    # Variables for ROI\n    roi_height_width = 0\n    roi_corner_x = 0\n    roi_corner_y = 0\n\n    Point center_now(roi_height_width/2, roi_height_width/2)\n\n    # Load aktuellen center point\n    center_now = center_vec[j]\n\n    # Calculate ROI \n    roi_height_width = circle_radius_vec[j]\n    roi_corner_x = center_now.x - roi_height_width/2\n    roi_corner_y = center_now.y - roi_height_width/2   \n\n    # If ROI is outside of image skip circle\n    if roi_corner_x &gt;= 0 and roi_corner_y &gt;= 0 and roi_corner_x + roi_height_width &lt;= input_img.cols and roi_corner_y + roi_height_width &lt;= input_img.rows:\n\n\n        # Create ROI from input image\n        Rect roi = Rect(roi_corner_x, roi_corner_y, roi_height_width, roi_height_width)\n        img_roi = input_img(roi)\n\n        # Create HSV representation of ROI\n        hsv()\n        cvtColor(img_roi, hsv, COLOR_BGR2HSV)\n        ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 786, "user_id": 6533075, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d9231d59d8dc4b15e1d1329e60928b30?s=128&d=identicon&r=PG&f=1", "display_name": "Sch&#252;tze", "link": "https://stackoverflow.com/users/6533075/sch%c3%bctze"}, "edited": false, "score": 0, "creation_date": 1535558402, "post_id": 52081608, "comment_id": 91113714, "body": "Are you saying that simply replacing goto with continue does the job? I doubt that."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 786, "user_id": 6533075, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d9231d59d8dc4b15e1d1329e60928b30?s=128&d=identicon&r=PG&f=1", "display_name": "Sch&#252;tze", "link": "https://stackoverflow.com/users/6533075/sch%c3%bctze"}, "edited": false, "score": 0, "creation_date": 1535558463, "post_id": 52081608, "comment_id": 91113756, "body": "try it then, because the problem is the original C++ code which is &quot;emulating&quot; continue because the author didn&#39;t know that <code>continue</code> existed."}, {"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "reply_to_user": {"reputation": 786, "user_id": 6533075, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d9231d59d8dc4b15e1d1329e60928b30?s=128&d=identicon&r=PG&f=1", "display_name": "Sch&#252;tze", "link": "https://stackoverflow.com/users/6533075/sch%c3%bctze"}, "edited": false, "score": 0, "creation_date": 1535633395, "post_id": 52081608, "comment_id": 91145243, "body": "@Sch&#252;tze yes, because who wrote that code thought in C instead of C++"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 1, "creation_date": 1535633455, "post_id": 52081608, "comment_id": 91145278, "body": "<code>continue</code> exists in C as well. @Moia"}, {"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1535633657, "post_id": 52081608, "comment_id": 91145434, "body": "@Jean-Fran&#231;oisFabre even worse"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1535633737, "post_id": 52081608, "comment_id": 91145501, "body": "proper C++11 loop on a vector should be <code>for (auto &amp;c : circle_radius_vec)</code> not <code>for (int j = 0; j &lt; circle_radius_vec.size(); ++j)</code> then <code>c</code> is the element, no more indices... modern languages at work"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 4, "last_activity_date": 1535630753, "last_edit_date": 1535630753, "creation_date": 1535558064, "answer_id": 52081608, "question_id": 52081341, "link": "https://stackoverflow.com/questions/52081341/pythonizing-c-block-with-goto-statement/52081608#52081608", "title": "Pythonizing C++ block with goto statement", "body": "<p>The C++ code needs rework: the <code>goto</code> statement and index increase is equivalent to a <code>continue</code> instruction (you almost <em>never</em> need <code>goto</code> in a C/C++ program, and definitely not here, the original C++ code which is \"emulating\" <code>continue</code> because the author didn't know that it existed):</p>\n\n<pre><code>for (int j = 0; j &lt; circle_radius_vec.size(); ++j)\n    {   \n        ..\n        // If ROI is outside of image skip circle\n        if(roi_corner_x &lt; 0){continue;}\n</code></pre>\n\n<p>Note that now you don't need to increase manually the index, as <code>continue</code> skips to the next iteration, calling the <code>++j</code> of your loop.</p>\n\n<p>(the other issue of the incrementation+goto is that if the special case happens at the end of the array, then you can read outside the bounds of the array: <em>undefined behaviour</em>)</p>\n\n<p>Now, you can transpose that directly in python: you have 2 options:</p>\n\n<p>Either you go with indices (like your C++ code does)</p>\n\n<pre><code>for index in range(size):        \n    ...\n    if some_condition:\n        continue\n</code></pre>\n\n<p>or just iterate on elements (more pythonic, because it doesn't use indices):</p>\n\n<pre><code>for a in the_list:\n    # a is the current element of the list, not the index\n    ...\n    if some_condition:\n        continue\n</code></pre>\n\n<p>In both cases, the <code>for</code> loop controls the iteration. You just tell python to skip to the next iteration with <code>continue</code>, just like in the \"new\" C++ code.</p>\n"}, {"tags": [], "owner": {"reputation": 636, "user_id": 8700767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cI4sM.jpg?s=128&g=1", "display_name": "Federico Rubbi", "link": "https://stackoverflow.com/users/8700767/federico-rubbi"}, "is_accepted": false, "score": 0, "last_activity_date": 1535558777, "creation_date": 1535558777, "answer_id": 52081837, "question_id": 52081341, "link": "https://stackoverflow.com/questions/52081341/pythonizing-c-block-with-goto-statement/52081837#52081837", "title": "Pythonizing C++ block with goto statement", "body": "<p>Sure.\nI'd suggest this.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># Loop over all detected circles ot the input image.\nfor j in range(len(circle_radius_vec)):\n    # Variables for ROI.\n    roi_height_width = 0\n    roi_corner_x = 0\n    roi_corner_y = 0\n\n    # Calculate ROI \n    roi_height_width = circle_radius_vec[j]\n    roi_corner_x = center_now.x - roi_height_width/2\n    roi_corner_y = center_now.y - roi_height_width/2\n\n    center_now = Point(roi_height_width/2, roi_height_width/2)\n\n    # Load aktuellen center point.\n    center_now = center_vec[j]\n\n    # Calculate ROI.\n    if roi_corner_x &lt; 0:\n        continue\n    if roi_corner_y &lt; 0:\n        continue\n    if roi_corner_x + roi_height_width &gt; input_img.cols:\n        continue\n\n\n    # Create ROI from input image.\n    roi = Rect(roi_corner_x, roi_corner_y, roi_height_width, roi_height_width)\n    img_roi = input_img(roi)\n\n    # Create HSV representation of ROI.\n    hsv = None\n    cvtColor(img_roi, hsv, COLOR_BGR2HSV)\n</code></pre>\n\n<p>Since I don't know the rest of the code I can't be much accurate.\nPlease, tell me if any error occurs.</p>\n"}], "owner": {"reputation": 786, "user_id": 6533075, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d9231d59d8dc4b15e1d1329e60928b30?s=128&d=identicon&r=PG&f=1", "display_name": "Sch&#252;tze", "link": "https://stackoverflow.com/users/6533075/sch%c3%bctze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 52081608, "answer_count": 3, "score": 3, "last_activity_date": 1535630753, "creation_date": 1535557099, "last_edit_date": 1535557943, "question_id": 52081341, "link": "https://stackoverflow.com/questions/52081341/pythonizing-c-block-with-goto-statement", "title": "Pythonizing C++ block with goto statement", "body": "<p>I have been Pythonising a C++ code and I came across a situation in which I kinda got stuck. The programmer used goto statements to implement his logic, and since there is no goto statement in Python and since I'd rather not to delve into funny goto implementations of it, I was wondering if we could somehow Pythonize the following block:</p>\n\n<pre><code>// Loop over all detected circles of the input image\n    for (int j = 0; j &lt; circle_radius_vec.size(); ++j)\n    {   \n        Jump: \n\n        // Variables for ROI\n        int roi_height_width = 0;\n        int roi_corner_x = 0;\n        int roi_corner_y = 0;\n\n        Point center_now(roi_height_width/2, roi_height_width/2);\n\n        // Load aktuellen center point\n        center_now = center_vec[j];\n\n        // Calculate ROI \n        roi_height_width = circle_radius_vec[j];\n        roi_corner_x = center_now.x - roi_height_width/2;\n        roi_corner_y = center_now.y - roi_height_width/2;   \n\n        // If ROI is outside of image skip circle\n        if(roi_corner_x &lt; 0){j++; goto Jump;}\n        if(roi_corner_y &lt; 0){j++; goto Jump;}\n        if((roi_corner_x+roi_height_width) &gt; input_img.cols){j++; goto Jump;}\n        if((roi_corner_y+roi_height_width) &gt; input_img.rows){j++; goto Jump;}\n\n        // Create ROI from input image\n        Rect roi = Rect(roi_corner_x, roi_corner_y, roi_height_width, roi_height_width);\n        Mat img_roi = input_img(roi);\n\n        // Create HSV representation of ROI\n        Mat hsv;\n        cvtColor(img_roi, hsv, COLOR_BGR2HSV);\n        ...\n</code></pre>\n\n<p>He has the label called \"Jump\" to which he goes to. How could we Pythonize this one? Since we are already in a for loop, I am a bit hesistant to introduce more loops.</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>EDIT:</strong> Thanks to the contributors, the following was suggested, however this gets stuck in an infinite loop:</p>\n\n<pre><code># Loop over all detected circles of the input image\n    for j in range(len(center_vec)):\n        while True:\n            # arrange the ROI\n            # load the current center point\n            center_now = center_vec[j] # take the center of ROI as the center of circle\n            roi_height_width = int(round(circle_radius_vec[j])) # take the radius as height and width of the ROI\n            roi_height_width = int(round(circle_radius_vec[j]))\n\n            roi_corner_x = int(round(center_now[0] - roi_height_width / 2))\n            roi_corner_y = int(round(center_now[1] - roi_height_width / 2))\n\n            # If ROI is outside of image skip circle\n            if roi_corner_x &lt; 0:\n                j += 1\n                continue\n            if roi_corner_y &lt; 0:\n                j += 1\n                continue\n            if roi_corner_x + roi_height_width &gt; img.shape[1]:\n                j += 1\n                continue\n            if roi_corner_y + roi_height_width &gt; img.shape[0]:\n                j += 1\n                continue\n\n        # create ROI from input image Rect\n        roi = img[roi_corner_y:roi_corner_y+roi_height_width, roi_corner_x:roi_corner_x+roi_height_width]\n\n        # Create HSV representation of ROI\n        hsv = cv2.cvtColor(roi, cv2.COLOR_BGR2HSV)\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 1, "creation_date": 1535557109, "post_id": 52081310, "comment_id": 91112855, "body": "Replace <code>void setattack{int aw</code>} by <code>void setattack(int aw)</code> . Same with <code>void setdefense{int dw}</code> to <code>void setdefense(int dw)</code>"}, {"owner": {"reputation": 322, "user_id": 4196438, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cd0f579e72df81152cf465a1e2ad765b?s=128&d=identicon&r=PG&f=1", "display_name": "CaptainQuint", "link": "https://stackoverflow.com/users/4196438/captainquint"}, "edited": false, "score": 0, "creation_date": 1535557199, "post_id": 52081310, "comment_id": 91112913, "body": "You should be using parenthesis when calling or defining a function"}, {"owner": {"reputation": 53, "user_id": 9569085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fQ1du.jpg?s=128&g=1", "display_name": "mohamed_ashraf51", "link": "https://stackoverflow.com/users/9569085/mohamed-ashraf51"}, "edited": false, "score": 0, "creation_date": 1535557227, "post_id": 52081310, "comment_id": 91112939, "body": "thank you i didn&#39;t notice it"}, {"owner": {"reputation": 176, "user_id": 3838215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1942f82515d96fbbfab07aeacd727182?s=128&d=identicon&r=PG&f=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/3838215/ray"}, "edited": false, "score": 0, "creation_date": 1535557244, "post_id": 52081310, "comment_id": 91112950, "body": "also some typos. defenset=dw; should be defense=dw"}, {"owner": {"reputation": 53, "user_id": 9569085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fQ1du.jpg?s=128&g=1", "display_name": "mohamed_ashraf51", "link": "https://stackoverflow.com/users/9569085/mohamed-ashraf51"}, "edited": false, "score": 0, "creation_date": 1535557347, "post_id": 52081310, "comment_id": 91113016, "body": "i edited it and the program run correctly thanks alot"}], "answers": [{"tags": [], "owner": {"reputation": 785, "user_id": 9514156, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-66vQMgOUbuw/AAAAAAAAAAI/AAAAAAAABnI/Im71EjDp9a4/photo.jpg?sz=128", "display_name": "R. Gurung", "link": "https://stackoverflow.com/users/9514156/r-gurung"}, "is_accepted": true, "score": 0, "last_activity_date": 1535557511, "creation_date": 1535557511, "answer_id": 52081447, "question_id": 52081310, "link": "https://stackoverflow.com/questions/52081310/errorfunction-definition-does-not-declare-parameters-in-setter/52081447#52081447", "title": "error:function definition does not declare parameters in setter", "body": "<p>In your set function you have used {} curly braces for arguments I think it should be (), and there is an extra } after main.</p>\n"}], "owner": {"reputation": 53, "user_id": 9569085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fQ1du.jpg?s=128&g=1", "display_name": "mohamed_ashraf51", "link": "https://stackoverflow.com/users/9569085/mohamed-ashraf51"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 52081447, "answer_count": 1, "score": 1, "last_activity_date": 1535557511, "creation_date": 1535556988, "question_id": 52081310, "link": "https://stackoverflow.com/questions/52081310/errorfunction-definition-does-not-declare-parameters-in-setter", "title": "error:function definition does not declare parameters in setter", "body": "<p>I wrote a simple c++ program and it gave me error in the setter, function definition does not declare parameters, although there was a setter above it and it worked correctly the error is in the function named setattack here is the code:\n{</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\n\nclass Warrior{\nprivate:\nstring name;\nint attack;\nint defense;\npublic:\nvoid setname(string m){\nname=m;\n}\nstring getname(){\nreturn name;}\n\nvoid setattack{int aw}{\nattack=aw;\n}\nint getattack(){\nreturn attack;}\n\nvoid setdefense{int dw}{\ndefenset=dw;\n}\nint getdefense(){\nreturn defense;}\n\n\nvoid kill(const Monster &amp;monster){\n\n}\n\n\n};\n\nint main()\n{\n\n\nreturn 0;\n}\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c++builder", "hunspell"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1535584813, "post_id": 52081289, "comment_id": 91124888, "body": "Most 3rd party libraries are NOT compatible with C++Builder out of the box (mainly because Borland compilers have gotten a bad reputation for being too old and not worth supporting, until recent years as Embarcadero has released new C++11 and soon C++17 compilers). Such libraries usually require some amount of tweaking first.  What are the actual troubles you are having with using the DLL?  You are probably just not using it correctly, which would more likely be easier to fix than trying to recompiling the entire library. Also, which version of C++Builder are you using?"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 1, "creation_date": 1535652340, "post_id": 52081289, "comment_id": 91156850, "body": "As Remy said, if you already have a DLL, it should be quite easy to <i>use</i> the DLL, instead of recompiling things. So rather tell us what problems you have with the DLL."}, {"owner": {"reputation": 3104, "user_id": 974700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee45cd52f0db0a7d720d97c45809ee03?s=128&d=identicon&r=PG", "display_name": "Coder12345", "link": "https://stackoverflow.com/users/974700/coder12345"}, "edited": false, "score": 0, "creation_date": 1535743934, "post_id": 52081289, "comment_id": 91194635, "body": "Thank you for helping - as you&#39;ve said, it turned out to be easier to use DLL, once I figured out how to remove the dependencies from the DLL. I&#39;ll write an answer to describe this. I&#39;ve created a new question though - <a href=\"https://stackoverflow.com/questions/52121623/dynamically-linked-dll-is-loaded-immediately-after-starting-the-application\" title=\"dynamically linked dll is loaded immediately after starting the application\">stackoverflow.com/questions/52121623/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3104, "user_id": 974700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee45cd52f0db0a7d720d97c45809ee03?s=128&d=identicon&r=PG", "display_name": "Coder12345", "link": "https://stackoverflow.com/users/974700/coder12345"}, "is_accepted": true, "score": 0, "last_activity_date": 1535745344, "last_edit_date": 1535745344, "creation_date": 1535744446, "answer_id": 52121778, "question_id": 52081289, "link": "https://stackoverflow.com/questions/52081289/compiling-hunspell-as-static-library-in-c-builder/52121778#52121778", "title": "Compiling Hunspell as static library in C++ Builder", "body": "<p>As Remy Lebeau and Rudy Velthuis pointed out it turned out to be easier to use DLL instead. I've also discovered a few more tricks along the way which I will describe below.</p>\n\n<p>1) when trying to create static lib file using C++ Builder (Berlin), it turned out that the current <strong>hunspell-1.6.2.zip</strong> is not compiling without errors. However, the <strong>hunspell-master.zip</strong> which is a clone of the SVN master, it at least compiled, although there were some linker errors - but I figured that master version is better to use as a base for building the DLL. So I used the current master version (<a href=\"https://github.com/hunspell/hunspell\" rel=\"nofollow noreferrer\">https://github.com/hunspell/hunspell</a>).</p>\n\n<p>2) used Visual Studio 2015 Community to build the DLL - <strong>libhunspell.dll</strong>. To avoid dependencies, I used the <code>/MT</code> option in the compiler. I had many problems using the version of the DLL which was dependent on <strong>VC++ 2015 Redistributable</strong> (\"Access Violation\" errors immediately after calling some DLL functions), so statically linking the Redistributable to remove the dependency, all of these problems magically disappeared. Even though the compiler reported some warnings which is probably another question, it did manage to build the DLL.</p>\n\n<p>3) created import library using <code>implib -a -c -f libhunspell.lib libhunspell.dll</code></p>\n\n<p>4) finally, linked to the .cpp file using <code>#pragma comment(lib, \"libhunspell.lib\")</code> (for older RAD Studio versions) or <code>#pragma comment(lib, \"libhunspell\")</code> for newer RAD Studio versions which support 64bit compiler). Another option is to add the lib to the project instead of the <code>#pragma</code> statement.</p>\n"}], "owner": {"reputation": 3104, "user_id": 974700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee45cd52f0db0a7d720d97c45809ee03?s=128&d=identicon&r=PG", "display_name": "Coder12345", "link": "https://stackoverflow.com/users/974700/coder12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 52121778, "answer_count": 1, "score": 0, "last_activity_date": 1535745344, "creation_date": 1535556939, "last_edit_date": 1535745291, "question_id": 52081289, "link": "https://stackoverflow.com/questions/52081289/compiling-hunspell-as-static-library-in-c-builder", "title": "Compiling Hunspell as static library in C++ Builder", "body": "<p>I am attempting to use Hunspell DLL in C++ Builder but have nothing but troubles.</p>\n\n<p>So I try to resort to compiling as static library. But even that doesn't go smooth. The steps I did so far:</p>\n\n<ol>\n<li><p>downloaded the latest Hunspell from <a href=\"https://github.com/hunspell/hunspell/releases\" rel=\"nofollow noreferrer\">https://github.com/hunspell/hunspell/releases</a></p></li>\n<li><p>unzipped and created in C++ Builder - New / Other / <strong>Static Library</strong></p></li>\n<li><p>right clicked and added all <strong>*.cxx</strong> files from <code>src/hunspell</code> folder</p></li>\n<li><p>Clicked <code>Build</code></p></li>\n</ol>\n\n<p>The error which comes up is:</p>\n\n<p><code>[BCC32 Error] cwchar(33): E2141 Declaration syntax error</code></p>\n\n<p>cwchar is a file which is part of C++ Builder and not Hunspell as it seems (which only includes it).</p>\n\n<p>Any help in building static hunspell lib (or even DLL) from C++ Builder appreciated.</p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>Edit: I was able to progress further by using more recent C++ Builder Berlin (the above error was in 2010 version) but it still reported linker errors, so I ended up using the DLL - see the answer.</strong></p>\n"}, {"tags": ["c++", "multithreading", "qt", "qtgui"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1535556609, "post_id": 52081003, "comment_id": 91112500, "body": "provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 29, "user_id": 4834655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4108b99b5377776d2619693614d4da78?s=128&d=identicon&r=PG&f=1", "display_name": "Jineapple", "link": "https://stackoverflow.com/users/4834655/jineapple"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1535557720, "post_id": 52081003, "comment_id": 91113270, "body": "I&#39;m sorry, but since this isn&#39;t an issue with a specific section of the code, I find it difficult to create a minmal example. I can try later if I can create some kind of mock with the same issue, but I have no idea if that will work."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1535557855, "post_id": 52081003, "comment_id": 91113356, "body": "Well, if you can not believe that we can, you think that we will take the time to debug a software, here we do not help to implement projects, here we help solve specific problems, a project is too broad."}, {"owner": {"reputation": 566, "user_id": 5998466, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LJotP.jpg?s=128&g=1", "display_name": "Bearded Beaver", "link": "https://stackoverflow.com/users/5998466/bearded-beaver"}, "edited": false, "score": 0, "creation_date": 1535559403, "post_id": 52081003, "comment_id": 91114276, "body": "maybe you send signals too often so main thread is unable to process all of them. try to comment out connects that are related to progress and see if it helps"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 1, "creation_date": 1535561731, "post_id": 52081003, "comment_id": 91115408, "body": "Why do you call <code>converter-&gt;run()</code> from the current thread after moving <code>converter</code> to the new thread?  That doesn&#39;t look right."}, {"owner": {"reputation": 566, "user_id": 5998466, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LJotP.jpg?s=128&g=1", "display_name": "Bearded Beaver", "link": "https://stackoverflow.com/users/5998466/bearded-beaver"}, "edited": false, "score": 0, "creation_date": 1535562212, "post_id": 52081003, "comment_id": 91115661, "body": "G.M. is right. you need <code>converter-&gt;start()</code>"}, {"owner": {"reputation": 29, "user_id": 4834655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4108b99b5377776d2619693614d4da78?s=128&d=identicon&r=PG&f=1", "display_name": "Jineapple", "link": "https://stackoverflow.com/users/4834655/jineapple"}, "edited": false, "score": 0, "creation_date": 1535563382, "post_id": 52081003, "comment_id": 91116342, "body": "Thank you very much, that was indeed the problem. I thought I was starting the new thread, but actually still had the leftover from the version without threads in there, starting it normally. Do you want to add it as an answer so I can accept it?"}], "owner": {"reputation": 29, "user_id": 4834655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4108b99b5377776d2619693614d4da78?s=128&d=identicon&r=PG&f=1", "display_name": "Jineapple", "link": "https://stackoverflow.com/users/4834655/jineapple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535555965, "creation_date": 1535555965, "question_id": 52081003, "link": "https://stackoverflow.com/questions/52081003/qt-program-not-responding-despite-separate-thread", "title": "Qt: Program not responding despite separate thread", "body": "<p>I have a program written with C++/Qt converting certain game files. This is the first time I've done something like this, so I'm not particularly experienced yet. I've had issues with the window occasionally showing the \"Not responding...\" message. After reading up on it, the problem seemed to be that the processing was done in the main thread, blocking the gui.\nSo I tried running a separate thread for the actual work being done, however the problem still occurs.</p>\n\n<p>Here's the section creating the extra thread:</p>\n\n<pre><code>QThread* thread = new QThread;\nWKConverter* converter = new WKConverter(settings);\nconverter-&gt;moveToThread(thread);\nconnect(converter, SIGNAL(log(std::string)), this, SLOT(log(std::string)));\nconnect(converter, SIGNAL(setInfo(std::string)), this, SLOT(setInfo(std::string)));\nconnect(converter, SIGNAL(createDialog(std::string)), this, SLOT(createDialog(std::string)));\nconnect(converter, SIGNAL(createDialog(std::string, std::string)), this, SLOT(createDialog(std::string, std::string)));\nconnect(converter, SIGNAL(createDialog(std::string, std::string, std::string)), this, SLOT(createDialog(std::string, std::string, std::string)));\nconnect(converter, SIGNAL(setProgress(int)), this, SLOT(setProgress(int)));\nconnect(converter, SIGNAL(increaseProgress(int)), this, SLOT(increaseProgress(int)));\n\nconnect(thread, SIGNAL(started()), converter, SLOT(run(bool)));\nconnect(converter, SIGNAL(finished()), thread, SLOT(quit()));\nconnect(converter, SIGNAL(finished()), converter, SLOT(deleteLater()));\nconnect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));\nthread-&gt;start();\nconverter-&gt;run();\n</code></pre>\n\n<p>With signals/slots to push updates for a progress bar and a label indicating what's being worked on to the gui. Generally this works, but as said I still encounter the \"Not responding...\" issue (Though interestingly, this doesn't seem to happen if I'm debugging with Qt Creator, only when running the compiled exe afterwards)</p>\n\n<p>Have I missed something? Is there something else I need to do? I would appreciate any pointers.</p>\n\n<p>If it helps, here is the github for the project, though I have not pushed the work done on threading there yet: <a href=\"https://github.com/Jineapple/WololoKingdoms\" rel=\"nofollow noreferrer\">https://github.com/Jineapple/WololoKingdoms</a></p>\n"}, {"tags": ["c++", "visual-studio-2017"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1535555966, "post_id": 52080961, "comment_id": 91112069, "body": "Yes it&#39;s wrong since that&#39;s now how <code>main</code> is supposed to be declared. If you&#39;re on Windows and using Visual Studio and its compiler look into using <code>wmain</code> instead (as <a href=\"https://msdn.microsoft.com/en-us/library/6wd819wh.aspx\" rel=\"nofollow noreferrer\">documented here</a>)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1535556629, "post_id": 52080961, "comment_id": 91112522, "body": "@OP do you have <code>int main(int argc, wchar_t* argv)</code> or <code>int main(int argc, wchar_t** argv)</code>?"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1535557283, "post_id": 52080961, "comment_id": 91112978, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2438049/what-is-the-difference-between-wmain-and-main\">What is the difference between wmain and main?</a>"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1535557428, "post_id": 52080961, "comment_id": 91113069, "body": "@NathanOliver The OPs <code>wchar_t *argv[]</code> is exactly the same as <code>wchar_t **argv</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1535557516, "post_id": 52080961, "comment_id": 91113121, "body": "@Swordfish The Q was edited by another user.  Originally the user had <code>int main(int argc, wchar_t* argv)</code> which is not the same"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1535558711, "post_id": 52080961, "comment_id": 91113918, "body": "@NathanOliver Sorry then."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 2, "last_activity_date": 1535556094, "last_edit_date": 1592644375, "creation_date": 1535556094, "answer_id": 52081051, "question_id": 52080961, "link": "https://stackoverflow.com/questions/52080961/using-wchar-t-in-the-main-function/52081051#52081051", "title": "using wchar_t in the main function", "body": "<p>Please go and read the remarks section on <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683156(v=vs.85).aspx?appid=dev15idef1&amp;l=en-us&amp;k=k(getcommandlinew)%3bk(devlang-c%2b%2b)%3bk(targetos-windows)&amp;rd=true\" rel=\"nofollow noreferrer\"><code>GetCommandLine</code></a>:</p>\n<blockquote>\n<p>ANSI console processes written in C can use the argc and argv arguments of the main function to access the command-line arguments. ANSI GUI applications can use the lpCmdLine parameter of the WinMain function to access the command-line string, excluding the program name. The main and WinMain functions cannot return Unicode strings.</p>\n<p>Unicode console process written in C can use the wmain or _tmain function to access the command-line arguments. Unicode GUI applications must use the GetCommandLineW function to access Unicode strings.</p>\n<p>To convert the command line to an argv style array of strings, call the CommandLineToArgvW function.</p>\n</blockquote>\n"}], "owner": {"reputation": 51, "user_id": 9657149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19a7201350aece883584de62b7961d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Simz", "link": "https://stackoverflow.com/users/9657149/simz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1371, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1535557989, "creation_date": 1535555834, "last_edit_date": 1535557085, "question_id": 52080961, "link": "https://stackoverflow.com/questions/52080961/using-wchar-t-in-the-main-function", "title": "using wchar_t in the main function", "body": "<p>Is it wrong to use the main function in C++ Visual Studio 2017 as following:</p>\n\n<pre><code>int main(int argc, wchar_t* argv[])\n</code></pre>\n\n<p>as my program can receive special characters.</p>\n"}, {"tags": ["c++", "boost-python"], "comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 2, "creation_date": 1535554821, "post_id": 52080549, "comment_id": 91111197, "body": "There are no arrays in that piece of code. Also don&#39;t cast the result of malloc but use <code>new</code> instead. Even better, use <code>std::vector</code>."}, {"owner": {"reputation": 13675, "user_id": 5046896, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7GplC.jpg?s=128&g=1", "display_name": "GoingMyWay", "link": "https://stackoverflow.com/users/5046896/goingmyway"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1535555290, "post_id": 52080549, "comment_id": 91111582, "body": "@Swordfish thank you for your suggestion, I will try <code>std::vector</code>."}], "owner": {"reputation": 13675, "user_id": 5046896, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7GplC.jpg?s=128&g=1", "display_name": "GoingMyWay", "link": "https://stackoverflow.com/users/5046896/goingmyway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535661064, "creation_date": 1535554585, "last_edit_date": 1535661064, "question_id": 52080549, "link": "https://stackoverflow.com/questions/52080549/boost-python-how-to-return-a-numpy-arrray-from-c-array", "title": "Boost.Python, how to return a numpy arrray from C++ array?", "body": "<p>I defined a 2d and 3d C++ array</p>\n\n<pre><code>// ROW x COL\nauto ** arr1 = (double **)malloc(ROW * sizeof(double *));\nfor (int i = 0; i &lt; ROW; i++) arr1[i] = (double *)malloc(COL * sizeof(double));\n\n// ROW x COL1 x COL2\nauto *** arr2 = (double ***)malloc(ROW * sizeof(double **));\nfor (int i=0; i &lt; ROW; i++) {\n    arr2[i] = (double **)malloc(COL1 * sizeof(double *));\n    for (int j=0; j &lt; COL1; j++) {\n        arr2[i][j] = (double *)malloc(COL2 * sizeof(double));\n    }\n}\n</code></pre>\n\n<p>How can I convert these arrays into numpy arrays with low overhead using <code>Boost.Python</code>?</p>\n"}, {"tags": ["c++", "ubuntu", "netbeans"], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 10290608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2466544ae62ccdad66dcc73cc861c47?s=128&d=identicon&r=PG&f=1", "display_name": "Geek", "link": "https://stackoverflow.com/users/10290608/geek"}, "edited": false, "score": 0, "creation_date": 1535567170, "post_id": 52081640, "comment_id": 91118172, "body": "Actually I have gone through the page you mentioned  already and found very useful. However I was confused about how to tell netbeans to use <code>-llapack</code> while compiling."}, {"owner": {"reputation": 345, "user_id": 10290608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2466544ae62ccdad66dcc73cc861c47?s=128&d=identicon&r=PG&f=1", "display_name": "Geek", "link": "https://stackoverflow.com/users/10290608/geek"}, "edited": false, "score": 1, "creation_date": 1535567274, "post_id": 52081640, "comment_id": 91118229, "body": "I figured out that doing the following would work, <code>Project properties</code> -&gt; <code>Build</code> -&gt; <code>linker</code> -&gt; <code>Compilation line</code> -&gt; <code>-llapack</code>"}], "tags": [], "owner": {"reputation": 816, "user_id": 8283706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hbcwh.png?s=128&g=1", "display_name": "handlerFive", "link": "https://stackoverflow.com/users/8283706/handlerfive"}, "is_accepted": true, "score": 0, "last_activity_date": 1535558161, "creation_date": 1535558161, "answer_id": 52081640, "question_id": 52080400, "link": "https://stackoverflow.com/questions/52080400/configuring-netbeans-for-c-code-with-options/52081640#52081640", "title": "Configuring Netbeans for C++ code with options", "body": "<p>All you need (including compilers) comes in that NetBeans IDE package.</p>\n\n<p>I would suggest that you read <a href=\"https://netbeans.org/kb/docs/cnd/quickstart.html\" rel=\"nofollow noreferrer\">this</a> guide which will show you how to create a new project and run code. </p>\n\n<p>Its pretty easy.</p>\n\n<p>In NetBeans IDE press <strong>F1</strong> for more documentation.</p>\n"}], "owner": {"reputation": 345, "user_id": 10290608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2466544ae62ccdad66dcc73cc861c47?s=128&d=identicon&r=PG&f=1", "display_name": "Geek", "link": "https://stackoverflow.com/users/10290608/geek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 52081640, "answer_count": 1, "score": 0, "last_activity_date": 1535558161, "creation_date": 1535554173, "last_edit_date": 1535556012, "question_id": 52080400, "link": "https://stackoverflow.com/questions/52080400/configuring-netbeans-for-c-code-with-options", "title": "Configuring Netbeans for C++ code with options", "body": "<p>I can compile a C++ code from ubuntu terminal with lapack library as</p>\n\n<pre><code>$g++ -lstdc++ -o  fast_solver fast_solver.cpp -llapack\n</code></pre>\n\n<p>My question is if I want to use Netbeans IDE to compile the same code how do I configure Netbeans? More specifically, how do I ask Netbeans to compile with <code>-lstdc++</code> and <code>-llapack</code> options?</p>\n\n<p>Thank you in advance.</p>\n\n<p>Best,\nGeek</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6475, "user_id": 7008416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1aa92fca6ba297f9420e519fd789ac64?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Tacca", "link": "https://stackoverflow.com/users/7008416/arthur-tacca"}, "edited": false, "score": 0, "creation_date": 1535554241, "post_id": 52080388, "comment_id": 91110737, "body": "Hi Raven! Could you please paste absolutely all of your code, even <code>#include</code> statements that might not seem important. (If you don&#39;t have any <code>#include</code> statements, that would be your problem right there.)"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 3, "creation_date": 1535554277, "post_id": 52080388, "comment_id": 91110764, "body": "<code>!dec.compare(&#39;y&#39;)</code> char has no <code>operator.</code> because it is not a union/struct as the error says. I dont know what you were attempting to do with that. most likely dec != &#39;y&#39; ?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1535554279, "post_id": 52080388, "comment_id": 91110769, "body": "Your problem can be reduced to <code>char dec; dec.compare;</code>."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 2, "creation_date": 1535554305, "post_id": 52080388, "comment_id": 91110798, "body": "<code>char</code> is a basic type. In C++, basic types can&#39;t have methods. You should simply compare <code>dec != &#39;y&#39;</code>"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 6475, "user_id": 7008416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1aa92fca6ba297f9420e519fd789ac64?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Tacca", "link": "https://stackoverflow.com/users/7008416/arthur-tacca"}, "edited": false, "score": 2, "creation_date": 1535554312, "post_id": 52080388, "comment_id": 91110807, "body": "@ArthurTacca No #include will fix trying to call a non-existant <code>compare</code> method on a <code>char</code>"}, {"owner": {"reputation": 6475, "user_id": 7008416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1aa92fca6ba297f9420e519fd789ac64?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Tacca", "link": "https://stackoverflow.com/users/7008416/arthur-tacca"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1535554410, "post_id": 52080388, "comment_id": 91110892, "body": "@Borgleader But it would&#39;ve helped me paste the code and run it through a compiler and see where the error was without having to pick through it myself. At the moment it will probably complain about unknown symbol <code>cout</code>. (Pasting the exact error message including the line number would probably have sufficed too.) Plus it is good practice to let new people know about."}, {"owner": {"reputation": 1, "user_id": 5855301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd3a8b01eae9d8821d7afae43bec0fa0?s=128&d=identicon&r=PG&f=1", "display_name": "Raven", "link": "https://stackoverflow.com/users/5855301/raven"}, "edited": false, "score": 0, "creation_date": 1535554629, "post_id": 52080388, "comment_id": 91111064, "body": "I&#39;m trying to compare the decision of the user. I think my statement if incorrect can you help me to correct it?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1535554710, "post_id": 52080388, "comment_id": 91111122, "body": "Please <b><a href=\"https://stackoverflow.com/posts/52080388/edit\">edit</a></b> your question with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1535554807, "post_id": 52080388, "comment_id": 91111185, "body": "@Raven As the other people stated, char does not have compare (or any other method). Are you mistaking it for string? Simply write <code>dec != &#39;y&#39;</code> as already stated. != and == are also perfectly fine on string, by the way."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 2, "creation_date": 1535554896, "post_id": 52080388, "comment_id": 91111264, "body": "@Raven If you think your statement is correct, you should start with <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">a good C++ book</a>. C++ is not Java or Python and don&#39;t try to draw parallels. <code>char</code> has no methods. You can&#39;t call a method on <code>char</code> variable."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1535555059, "post_id": 52080388, "comment_id": 91111377, "body": "You cannot &quot;debug&quot; compiler errors, you just need to fix them"}, {"owner": {"reputation": 1, "user_id": 5855301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd3a8b01eae9d8821d7afae43bec0fa0?s=128&d=identicon&r=PG&f=1", "display_name": "Raven", "link": "https://stackoverflow.com/users/5855301/raven"}, "edited": false, "score": 0, "creation_date": 1535555236, "post_id": 52080388, "comment_id": 91111529, "body": "Thank You everyone. You helped me fix my problem :)"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1535555620, "post_id": 52080388, "comment_id": 91111851, "body": "@Raven <code>j</code> is uninitialized and doesn&#39;t change between iterations of the loop.        <code>month</code>, <code>date</code>, <code>aHours</code>, <code>aMins</code>, <code>aHours</code> and <code>aMins</code> are undefined. Are you using global variables? If so, stop it."}, {"owner": {"reputation": 1, "user_id": 5855301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd3a8b01eae9d8821d7afae43bec0fa0?s=128&d=identicon&r=PG&f=1", "display_name": "Raven", "link": "https://stackoverflow.com/users/5855301/raven"}, "edited": false, "score": 0, "creation_date": 1535555785, "post_id": 52080388, "comment_id": 91111956, "body": "okay sir. ill take not all your responses. =)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1535555454, "post_id": 52080732, "comment_id": 91111720, "body": "There is no such thing as <code>operator==</code> for <code>char</code>."}, {"owner": {"reputation": 1043, "user_id": 7742987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cda94a2733ee551a94d437561510f27?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/7742987/mohit"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1535555674, "post_id": 52080732, "comment_id": 91111879, "body": "@Swordfish Why does that work?"}, {"owner": {"reputation": 1, "user_id": 5855301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd3a8b01eae9d8821d7afae43bec0fa0?s=128&d=identicon&r=PG&f=1", "display_name": "Raven", "link": "https://stackoverflow.com/users/5855301/raven"}, "edited": false, "score": 0, "creation_date": 1535555743, "post_id": 52080732, "comment_id": 91111932, "body": "it works tho. i dont know why but yes it works."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1535555759, "post_id": 52080732, "comment_id": 91111941, "body": "@Mohit new your explanation is not misleading anymore."}, {"owner": {"reputation": 1043, "user_id": 7742987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cda94a2733ee551a94d437561510f27?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/7742987/mohit"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1535555811, "post_id": 52080732, "comment_id": 91111973, "body": "@Swordfish Sorry, But I mean that."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 1, "user_id": 5855301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd3a8b01eae9d8821d7afae43bec0fa0?s=128&d=identicon&r=PG&f=1", "display_name": "Raven", "link": "https://stackoverflow.com/users/5855301/raven"}, "edited": false, "score": 0, "creation_date": 1535555814, "post_id": 52080732, "comment_id": 91111976, "body": "@Raven it was just about using the term <code>operator==</code> which is a different thing than <code>==</code> in C++."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1535556812, "post_id": 52080732, "comment_id": 91112641, "body": "More correct term for C++ is fundamental types, not primitive. <a href=\"https://en.cppreference.com/w/cpp/language/types\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/types</a>"}], "tags": [], "owner": {"reputation": 1043, "user_id": 7742987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cda94a2733ee551a94d437561510f27?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/7742987/mohit"}, "is_accepted": true, "score": 1, "last_activity_date": 1535556931, "last_edit_date": 1535556931, "creation_date": 1535555103, "answer_id": 52080732, "question_id": 52080388, "link": "https://stackoverflow.com/questions/52080388/member-reference-base-type-char-is-not-a-structure-or-union-in-c/52080732#52080732", "title": "Member reference base type &#39;char&#39; is not a structure or union in C++", "body": "<p>You should use <code>==</code> operator to check if two <a href=\"https://en.cppreference.com/w/cpp/language/types\" rel=\"nofollow noreferrer\">fundamental types</a> are equal or not, because the fundamental types in C++ can't have methods.</p>\n\n<pre><code>void typeA(){\n    int j;\n    char dec;\n    do{\n        cout &lt;&lt; \"Enter Month: \";\n        cin &gt;&gt; month[j];\n        cout &lt;&lt; \"Enter Date: \";\n        cin &gt;&gt; date[j];\n        cout &lt;&lt; \"Enter Time in Hour: \";\n        cin &gt;&gt; aHours[j];\n        cout &lt;&lt; \"Enter Time in Minutes: \";\n        cin &gt;&gt; aMins[j];\n        cout &lt;&lt; \"Enter Time Out Hour: \";\n        cin &gt;&gt; aHours[j];\n        cout &lt;&lt; \"Enter Time Out Minutes: \";\n        cin &gt;&gt; aMins[j];\n\n        cout &lt;&lt; \"Enter Again?: [y/n]\";\n        cin &gt;&gt; dec;\n\n    }while(dec == 'y');\n    cout &lt;&lt; \"Exit\";\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5855301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd3a8b01eae9d8821d7afae43bec0fa0?s=128&d=identicon&r=PG&f=1", "display_name": "Raven", "link": "https://stackoverflow.com/users/5855301/raven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "closed_date": 1535581514, "accepted_answer_id": 52080732, "answer_count": 1, "score": 0, "last_activity_date": 1535556931, "creation_date": 1535554129, "last_edit_date": 1535554192, "question_id": 52080388, "link": "https://stackoverflow.com/questions/52080388/member-reference-base-type-char-is-not-a-structure-or-union-in-c", "closed_reason": "Not suitable for this site", "title": "Member reference base type &#39;char&#39; is not a structure or union in C++", "body": "<p>Can someone help me to debug this problem in C++? \nI want it to loop if the user want to enter once again, but the error keeps on showing up.</p>\n\n<pre><code>void typeA(){\n    int j;\n    char dec;\n    do{\n        cout &lt;&lt; \"Enter Month: \";\n        cin &gt;&gt; month[j];\n        cout &lt;&lt; \"Enter Date: \";\n        cin &gt;&gt; date[j];\n        cout &lt;&lt; \"Enter Time in Hour: \";\n        cin &gt;&gt; aHours[j];\n        cout &lt;&lt; \"Enter Time in Minutes: \";\n        cin &gt;&gt; aMins[j];\n        cout &lt;&lt; \"Enter Time Out Hour: \";\n        cin &gt;&gt; aHours[j];\n        cout &lt;&lt; \"Enter Time Out Minutes: \";\n        cin &gt;&gt; aMins[j];\n\n        cout &lt;&lt; \"Enter Again?: [y/n]\";\n        cin &gt;&gt; dec;\n\n    }while(!dec.compare('y'));\n    cout &lt;&lt; \"Exit\";\n\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1535554399, "post_id": 52080350, "comment_id": 91110875, "body": "Could this be problem with MSVC? Since I couldn&#39;t reproduce this issue with both GCC, and clang."}], "answers": [{"comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1535554841, "post_id": 52080484, "comment_id": 91111215, "body": "Doing the shift before the AND does work for <code>r</code> ...but the same pattern would produce a warning for <code>g</code>. Perhaps I&#39;m just being a perfectionist?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1535555010, "post_id": 52080484, "comment_id": 91111343, "body": "@TimRandall that&#39;s odd, I didn&#39;t get a warning for <code>unsigned char g( ( ARGB &gt;&gt; 8) &amp; 0xFF )</code> either, anyway it seems MSVC is pretty inconsistent in its ability to figure out whether these operations are safe.."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1535555127, "post_id": 52080484, "comment_id": 91111441, "body": "So, are you saying that in this form, OP&#39;s compiler can assume that the result is a vaild 8-bit value, while in the original form it can&#39;t predict that?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1535555580, "post_id": 52080484, "comment_id": 91111825, "body": "@Bob__ that&#39;s what it looks like to me (even though range propagation on the original form does not look hard), but I don&#39;t know for sure what the compiler is doing internally, there could be other reasons why the warning goes away"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1535558068, "post_id": 52080484, "comment_id": 91113493, "body": "@harold I retract my previous comment. Reading the answer below makes it clear: doing the mask last makes it very easy for the compiler to see that we&#39;re left with 8 bits, because the mask is always the same."}], "tags": [], "owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "is_accepted": true, "score": 3, "last_activity_date": 1535554398, "creation_date": 1535554398, "answer_id": 52080484, "question_id": 52080350, "link": "https://stackoverflow.com/questions/52080350/when-stripping-bits-out-of-an-int-the-compiler-warns-about-one-conversion-but-n/52080484#52080484", "title": "When stripping bits out of an int, the compiler warns about one conversion but not others. Is there a workaround?", "body": "<p>The warning goes away when the order of the shift and AND is swapped, so:</p>\n\n<pre><code>unsigned char r( ( ARGB &gt;&gt; 16) &amp; 0xFF );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1535558111, "post_id": 52081350, "comment_id": 91113527, "body": "Thanks for this. Seeing that the mask is always the same, it&#39;s much easier to see why the compiler wouldn&#39;t issue a warning."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 2, "last_activity_date": 1535557515, "last_edit_date": 1535557515, "creation_date": 1535557145, "answer_id": 52081350, "question_id": 52080350, "link": "https://stackoverflow.com/questions/52080350/when-stripping-bits-out-of-an-int-the-compiler-warns-about-one-conversion-but-n/52081350#52081350", "title": "When stripping bits out of an int, the compiler warns about one conversion but not others. Is there a workaround?", "body": "<p>As mentioned in the other answer, changing operations might help, but it comes with another advantage: consistency (and if you consider dropping obsolete parentheses another one, well, a second): </p>\n\n<pre><code>unsigned char a( ARGB &gt;&gt; 24         );\nunsigned char r( ARGB &gt;&gt; 16 &amp; 0xffU );\nunsigned char g( ARGB &gt;&gt;  8 &amp; 0xffU ); // same value as above\nunsigned char b( ARGB       &amp; 0xffU ); //      -- \" --\n</code></pre>\n\n<p>(You might add masking to first line as well and shifting by 0 to last one and hope for the compiler to optimise them away again &ndash; actually, it should do so for all the masks, as you assign to 8-bit-size variable anyway...)</p>\n\n<p>Now back to the warning (which you apparently still did not get rid of): An explicit cast should now really force the compiler to drop it:</p>\n\n<pre><code>unsigned char x(static_cast&lt;unsigned char&gt;(argb &gt;&gt; y &amp; 0xffU));\n</code></pre>\n"}], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 52080484, "answer_count": 2, "score": 1, "last_activity_date": 1535557515, "creation_date": 1535553988, "last_edit_date": 1535554520, "question_id": 52080350, "link": "https://stackoverflow.com/questions/52080350/when-stripping-bits-out-of-an-int-the-compiler-warns-about-one-conversion-but-n", "title": "When stripping bits out of an int, the compiler warns about one conversion but not others. Is there a workaround?", "body": "<p>In the following code, my compiler is complaining about one of these conversions, but not the others.</p>\n\n<pre><code>unsigned ARGB;\nunsigned char a( ARGB &gt;&gt; 24 );\nunsigned char r( ( ARGB &amp; 0xFF0000 ) &gt;&gt; 16 ); // warning!\nunsigned char g( ( ARGB &amp; 0xFF00 ) &gt;&gt; 8 );\nunsigned char b( ARGB &amp; 0xFF );\n</code></pre>\n\n<p>The compiler reports \"warning C4244: 'initializing': conversion from 'int' to 'char', possible loss of data\" ... but only for the second conversion. </p>\n\n<p>I can see why it's doing this, I suppose. <code>a</code> and <code>b</code> are clearly the result of single operations that only leave 8 significant bits, and in the case of <code>g</code>, the bitwise <code>&amp;</code> results in 16 significant bits (which could be stored in a <code>short</code> without loss) and that result is then shifted right leaving only 8 bits. But the bitwise <code>&amp;</code> operation done on <code>r</code>, by contrast, leaves an intermediate value with 24 significant bits, which would require an <code>int</code> if it were to be stored somewhere. I'm guessing that the compiler treats the shift as a separate process, acting on an integer, and that that's why it is warning about possible loss of data.</p>\n\n<p>Since we treat (almost all) warnings as errors, this is something I need to resolve. Obviously I can use <code>static_cast</code> to explicitly document what I want, but that is (in my opinion) an ugly tool, and a sign that the code could be written better.</p>\n\n<p>Does anyone know of a nice, neat, standard-compliant and portable form of code that will perform the required data conversion?</p>\n\n<p>I prefer not to rely on bitfields due to portability concerns.</p>\n"}, {"tags": ["c++", "boost", "c++98", "boost-bind"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1535553919, "post_id": 52080030, "comment_id": 91110527, "body": "cant you use c++11 or later? just asking because there is <code>std::bind</code> and moreover with lambdas the need to use <code>bind</code> is extremely rare"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1535554044, "post_id": 52080030, "comment_id": 91110604, "body": "please include the errors in the question. btw <code>F</code> is a type, while <code>boost::bind</code> expects a value"}, {"owner": {"reputation": 4330, "user_id": 805896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/59a6876246562cd041ccb3a45c393774?s=128&d=identicon&r=PG", "display_name": "rahman", "link": "https://stackoverflow.com/users/805896/rahman"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1535554434, "post_id": 52080030, "comment_id": 91110910, "body": "@user463035818 no we can&#39;t :("}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1535554474, "post_id": 52080030, "comment_id": 91110945, "body": "then better use the C++98 tag, and I hope you can post the errors"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1535568614, "post_id": 52080030, "comment_id": 91118849, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/30930350/why-member-functions-cant-be-used-as-template-arguments\">Why member functions can&#39;t be used as template arguments?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4330, "user_id": 805896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/59a6876246562cd041ccb3a45c393774?s=128&d=identicon&r=PG", "display_name": "rahman", "link": "https://stackoverflow.com/users/805896/rahman"}, "edited": false, "score": 0, "creation_date": 1535561073, "post_id": 52081203, "comment_id": 91115104, "body": "Amazingly nice!"}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": true, "score": 3, "last_activity_date": 1535556610, "creation_date": 1535556610, "answer_id": 52081203, "question_id": 52080030, "link": "https://stackoverflow.com/questions/52080030/generalize-the-argument-passed-to-boostbind/52081203#52081203", "title": "Generalize the argument passed to boost::bind", "body": "<p>Like the error says, a member function isn't a type, so it can't be used for a template type parameter.</p>\n\n<p>Instead, you need to use a non-type parameter:</p>\n\n<pre><code>template&lt;void(MyThread::*F)()&gt;\nstruct MyCounter : public Job\n{   \n    MyCounter(const unsigned int interval, MyThread &amp;myThread)\n    : Job(interval)\n    {\n        _functor = boost::bind(F, &amp;myThread);\n    }\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/92aa456b54cc44fc\" rel=\"nofollow noreferrer\">Live Example</a></p>\n\n<p>Note that I made <code>F</code> a pointer to a member function of <code>MyThread</code> instead of a <code>typename</code>.</p>\n"}], "owner": {"reputation": 4330, "user_id": 805896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/59a6876246562cd041ccb3a45c393774?s=128&d=identicon&r=PG", "display_name": "rahman", "link": "https://stackoverflow.com/users/805896/rahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 52081203, "answer_count": 1, "score": 0, "last_activity_date": 1535556610, "creation_date": 1535553119, "last_edit_date": 1535554608, "question_id": 52080030, "link": "https://stackoverflow.com/questions/52080030/generalize-the-argument-passed-to-boostbind", "title": "Generalize the argument passed to boost::bind", "body": "<p>I am trying to write a generic struct <code>MyCounter</code> which uses <code>boost::bind</code> . What I am trying to do is to write <code>MyCounter</code> such a way that by changing its template argument type, I could bind to different methods. I was under the impression that if I pass something like <code>MyThread::send</code> as a template argument, I will be able to use it directly in <code>bind()</code>. Apparently I was wrong. Could you kindly help me with the alternatives? Thank you</p>\n\n<pre><code>#include &lt;boost/bind.hpp&gt;\n#include &lt;boost/function.hpp&gt;\n#include &lt;boost/shared_ptr.hpp&gt;\n#include &lt;boost/make_shared.hpp&gt;\n#include &lt;vector&gt;\n#include &lt;utility&gt;\n\nstruct MyThread //simplified\n{\n    void send1()\n    {\n        std::cout &lt;&lt; \"In Send1\\n\";\n    }\n    void send2()\n    {\n        std::cout &lt;&lt; \"In Send2\\n\";\n    }\n};\n\nstruct Job //ignore me\n{\n    Job(const unsigned int interval)\n        : _tChk(0)\n        , _tInterval(interval)\n    {}\n\n    void operator()(unsigned long nowSec)\n    {\n        if (nowSec &gt; _tChk)\n        {\n            _functor();\n            _tChk += nowSec + _tInterval;\n        }\n    }\n\nprivate:\n    unsigned long  _tChk;\n    const unsigned int  _tInterval;\n\nprotected:\n    boost::function&lt;void()&gt; _functor;\n};\n\nstruct JobInvoker //ignore me\n{\n    typedef boost::shared_ptr&lt;Job&gt; JobPtr;\n    JobInvoker(MyThread &amp;myThread)\n        : _myThread(myThread)\n    {}\n\n    template&lt;typename JOB&gt;\n    void addJob(const unsigned int interval)\n    {\n        JobPtr job = boost::make_shared&lt;JOB&gt;(interval, _myThread);\n        _jobs.push_back(job);\n    }\n\n    void operator() (JobPtr job)\n    {\n        (*job)(_now.tv_sec);\n    }\n\n    void invoke(timeval now)\n    {\n        _now = now;\n        std::for_each(_jobs.begin(), _jobs.end(), *this);\n    }\n\n    timeval _now;\n    std::vector&lt;JobPtr&gt; _jobs;\n    MyThread &amp;_myThread;\n};\n\n//my struggle\ntemplate&lt;typename F&gt;\nstruct MyCounter : public Job\n{\n    MyCounter(const unsigned int interval, MyThread &amp;myThread)\n    : Job(interval)\n    {\n        _functor = boost::bind(&amp;F, &amp;myThread); //&lt;-- Error\n    }\n};\n\nint main()\n{\n  MyThread t;\n  JobInvoker jobInvoker(t);\n  jobInvoker.addJob&lt;MyCounter&lt;MyThread::send1&gt; &gt;(2); //&lt;-- Error\n  jobInvoker.addJob&lt;MyCounter&lt;MyThread::send2&gt; &gt;(2); //&lt;-- Error\n  timeval now;//...\n  jobInvoker.invoke(timeval now)\n  return 0;\n}\n</code></pre>\n\n<p><strong>UPDATE:</strong>\ncompiled with:\n<code>g++ boost_f.cpp -lboost_system</code></p>\n\n<p>we get the following errors:</p>\n\n<pre><code>boost_f.cpp: In constructor \u2018MyCounter&lt;F&gt;::MyCounter(unsigned int, MyThread&amp;)\u2019:\nboost_f.cpp:81:34: error: expected primary-expression before \u2018,\u2019 token\n         _functor = boost::bind(&amp;F, &amp;myThread); //&lt;-- Error\n                                  ^\nboost_f.cpp: In function \u2018int main()\u2019:\nboost_f.cpp:89:46: error: type/value mismatch at argument 1 in template parameter list for \u2018template&lt;class F&gt; struct MyCounter\u2019\n   jobInvoker.addJob&lt;MyCounter&lt;MyThread::send1&gt; &gt;(2); //&lt;-- Error\n                                              ^\nboost_f.cpp:89:46: error:   expected a type, got \u2018MyThread::send1\u2019\nboost_f.cpp:89:51: error: no matching function for call to \u2018JobInvoker::addJob(int)\u2019\n   jobInvoker.addJob&lt;MyCounter&lt;MyThread::send1&gt; &gt;(2); //&lt;-- Error\n                                                   ^\nboost_f.cpp:89:51: note: candidate is:\nboost_f.cpp:52:10: note: template&lt;class JOB&gt; void JobInvoker::addJob(unsigned int)\n     void addJob(const unsigned int interval)\n          ^\nboost_f.cpp:52:10: note:   template argument deduction/substitution failed:\nboost_f.cpp:89:51: error: template argument 1 is invalid\n   jobInvoker.addJob&lt;MyCounter&lt;MyThread::send1&gt; &gt;(2); //&lt;-- Error\n                                                   ^\nboost_f.cpp:90:46: error: type/value mismatch at argument 1 in template parameter list for \u2018template&lt;class F&gt; struct MyCounter\u2019\n   jobInvoker.addJob&lt;MyCounter&lt;MyThread::send2&gt; &gt;(2); //&lt;-- Error\n                                              ^\nboost_f.cpp:90:46: error:   expected a type, got \u2018MyThread::send2\u2019\nboost_f.cpp:90:51: error: no matching function for call to \u2018JobInvoker::addJob(int)\u2019\n   jobInvoker.addJob&lt;MyCounter&lt;MyThread::send2&gt; &gt;(2); //&lt;-- Error\n                                                   ^\nboost_f.cpp:90:51: note: candidate is:\nboost_f.cpp:52:10: note: template&lt;class JOB&gt; void JobInvoker::addJob(unsigned int)\n     void addJob(const unsigned int interval)\n          ^\nboost_f.cpp:52:10: note:   template argument deduction/substitution failed:\nboost_f.cpp:90:51: error: template argument 1 is invalid\n   jobInvoker.addJob&lt;MyCounter&lt;MyThread::send2&gt; &gt;(2); //&lt;-- Error\n                                                   ^\nboost_f.cpp:92:29: error: expected primary-expression before \u2018now\u2019\n   jobInvoker.invoke(timeval now)\n</code></pre>\n"}, {"tags": ["c++", "templates", "conditional", "short-circuiting", "enable-if"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1535553707, "post_id": 52079896, "comment_id": 91110377, "body": "Typos: <code>extent_v</code> and <code>const T&amp; param</code>. You could of course use specialization to define a trait to control the SFINAE, which avoids repeating the function body."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1535554871, "post_id": 52079896, "comment_id": 91111242, "body": "@aschepler Good call on the typos. I just typed it from memory rather than copying :( Always a bad plan. Your trait comment may be what I&#39;m looking for. Could you elaborate?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1535583167, "post_id": 52079896, "comment_id": 91124492, "body": "The <code>my_is_array</code> or <code>array_size_or_zero</code> pieces from bolov&#39;s answer are the sort of thing I meant by the &quot;define a trait&quot; part."}], "answers": [{"tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 3, "last_activity_date": 1538904062, "last_edit_date": 1538904062, "creation_date": 1535553533, "answer_id": 52080178, "question_id": 52079896, "link": "https://stackoverflow.com/questions/52079896/short-circuiting-operators-in-an-enable-if/52080178#52080178", "title": "Short Circuiting Operators in an enable_if", "body": "<p>I would suggest a alternate approach: 2 overloads (always prefer overloads to template specializations) that call a common function which contains the common code:</p>\n\n<pre><code>namespace detail\n{\ntemplate &lt;class T&gt;\nauto foo_impl(const T&amp; a)\n{\n    // common code\n}\n}\n\ntemplate &lt;class T&gt;\nauto foo(const std::array&lt;T, 3&gt;&amp; a)\n{\n    detail::foo_impl(a);\n}\n\ntemplate &lt;class T&gt;\nauto foo(const T(&amp;a)[3])\n{\n    detail::foo_impl(a);\n}\n</code></pre>\n\n<p>This is clear, hassle-free and avoids code repetition.</p>\n\n<p>An alternate is to create your own trait:</p>\n\n<pre><code>template &lt;class T, std::size_t Size&gt;\nstruct my_is_array : std::false_type\n{};\n\ntemplate &lt;class T, std::size_t Size&gt;\nstruct my_is_array&lt;std::array&lt;T, Size&gt;, Size&gt; : std::true_type\n{};\n\ntemplate &lt;class T, std::size_t Size&gt;\nstruct my_is_array&lt;T[Size], Size&gt; : std::true_type\n{};\n\ntemplate&lt;typename T&gt;\nstd::enable_if_t&lt;my_is_array&lt;T, 3&gt;::value&gt; foo(const T&amp; param) {}\n</code></pre>\n\n<p>or (I actually like this one better):</p>\n\n<pre><code>template &lt;class T&gt;\nstruct array_size_or_zero : std::integral_constant&lt;std::size_t, 0&gt;\n{};\n\ntemplate &lt;class T, std::size_t Size&gt;\nstruct array_size_or_zero&lt;std::array&lt;T, Size&gt;&gt; : std::integral_constant&lt;std::size_t, Size&gt;\n{};\n\ntemplate &lt;class T, std::size_t Size&gt;\nstruct array_size_or_zero&lt;T[Size]&gt; : std::integral_constant&lt;std::size_t, Size&gt;\n{};\n\ntemplate&lt;typename T&gt;\nstd::enable_if_t&lt;array_size_or_zero&lt;T&gt;::value == 3&gt; foo(const T&amp; param) {}\n</code></pre>\n\n<p>Careful!!: <code>foo</code> must have parameter by reference, otherwise the array decays to pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 4, "creation_date": 1535554507, "post_id": 52080266, "comment_id": 91110973, "body": "Simpler to inherit <code>std::false_type</code> or <code>std::true_type</code>, plus that matches what all the library traits do."}], "tags": [], "owner": {"reputation": 161, "user_id": 9260020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f709479154c250e6f3a7f0314eeb608?s=128&d=identicon&r=PG&f=1", "display_name": "Karl", "link": "https://stackoverflow.com/users/9260020/karl"}, "is_accepted": false, "score": 4, "last_activity_date": 1535553768, "creation_date": 1535553768, "answer_id": 52080266, "question_id": 52079896, "link": "https://stackoverflow.com/questions/52079896/short-circuiting-operators-in-an-enable-if/52080266#52080266", "title": "Short Circuiting Operators in an enable_if", "body": "<p>In short no, the template substitutions always have to be valid. It would probably be easier to just define a specific template to match the arrays:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct IsArrayInt3 { enum: bool { value = false }; };\n\ntemplate &lt;&gt;\nstruct IsArrayInt3&lt;int[3]&gt; { enum: bool { value = true }; };\n\ntemplate &lt;&gt;\nstruct IsArrayInt3&lt;std::array&lt;int, 3&gt;&gt; { enum: bool { value = true }; };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1535554126, "post_id": 52080329, "comment_id": 91110653, "body": "@aschepler if I upvote your comment can we count that as an extra vote for TC?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1535554755, "post_id": 52080329, "comment_id": 91111150, "body": "I had to read through <a href=\"https://en.cppreference.com/w/cpp/types/disjunction#Notes\" rel=\"nofollow noreferrer\">the Notes section of <code>disjunction</code></a> to understand this. But it appears <code>disjunction</code> will continue to evaluate subsequent arguments till it finds one that does not cast to 0. And more importantly, <i>when it find one that doesn&#39;t cast to 0, it stops evaluating arguments.</i>"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1535555237, "post_id": 52080329, "comment_id": 91111531, "body": "Wow, so help me understand here then, <code>tuple_size&lt;int[3]&gt;</code> isn&#39;t valid... why doesn&#39;t the compiler care unless I use the <code>_v</code>?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1535555395, "post_id": 52080329, "comment_id": 91111664, "body": "@JonathanMee As noted in the answer, this is the code you asked for but probably not the code you should write. The &quot;write your own metafunction&quot; answers are orders of magnitude easier to understand in the final code."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 2, "creation_date": 1535555524, "post_id": 52080329, "comment_id": 91111776, "body": "@JonathanMee Just naming <code>tuple_size&lt;int[3]&gt;</code> is perfectly valid. What&#39;s not valid is asking for its member <code>value</code>."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1535555569, "post_id": 52080329, "comment_id": 91111817, "body": "@MaxLanghof Hmmm... am I missing something? What advantages does the trait have over the <code>conditional</code> or <code>disjunction</code> here?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1535556724, "post_id": 52080329, "comment_id": 91112589, "body": "@JonathanMee That you don&#39;t have to read through a notes section on a reference site to understand how/why it works. Also, giving the condition you are looking to use a name is as good as (or better than) finding some terse combination of library tools to express the same thing. However, you might combine the two: <code>template&lt;class T&gt; inline constexpr bool isArray3 = (conditional_t&lt;is_array_v&lt;T&gt;, extent&lt;T&gt;, tuple_size&lt;T&gt;&gt;::value == 3U);</code>"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 7, "last_activity_date": 1535555101, "last_edit_date": 1535555101, "creation_date": 1535553946, "answer_id": 52080329, "question_id": 52079896, "link": "https://stackoverflow.com/questions/52079896/short-circuiting-operators-in-an-enable-if/52080329#52080329", "title": "Short Circuiting Operators in an enable_if", "body": "<p>Taking advantage of the fact that <code>extent&lt;T&gt;</code> for non-array types is zero and hence falsy, and <code>disjunction</code> derives from the first truthy type in the list with short circuiting:</p>\n\n<pre><code>template&lt;typename T&gt;\nenable_if_t&lt;disjunction&lt;extent&lt;T&gt;, tuple_size&lt;T&gt;&gt;::value == 3U&gt; foo(const T&amp; param) {}\n</code></pre>\n\n<p>This is probably too clever. Note that you can't use <code>disjunction_v</code> here.</p>\n\n<hr>\n\n<p><code>conditional</code> should work just fine too. The trick is to not ask for <code>::value</code> until you've picked the right type:</p>\n\n<pre><code>template&lt;typename T&gt;\nenable_if_t&lt;conditional_t&lt;is_array_v&lt;T&gt;, extent&lt;T&gt;, tuple_size&lt;T&gt;&gt;::value == 3U&gt; \n    foo(const T&amp; param) {}\n</code></pre>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 1, "accepted_answer_id": 52080329, "answer_count": 3, "score": 4, "last_activity_date": 1538904062, "creation_date": 1535552828, "last_edit_date": 1535554784, "question_id": 52079896, "link": "https://stackoverflow.com/questions/52079896/short-circuiting-operators-in-an-enable-if", "title": "Short Circuiting Operators in an enable_if", "body": "<p>I want to write a templatized function which takes either an <code>array&lt;int, 3&gt;</code> or an <code>int[3]</code>. I'm trying to capture that in an <code>enable_if</code>:</p>\n\n<pre><code>template&lt;typename T&gt;\nenable_if_t&lt;is_array_v&lt;T&gt; &amp;&amp; extent_v&lt;T&gt; == 3U || !is_array_v&lt;T&gt; &amp;&amp; tuple_size&lt;T&gt;::value == 3U&gt; foo(const T&amp; param) {}\n</code></pre>\n\n<p>Unfortunately for an <code>int[3]</code>, <code>tupple_size</code> is not defined, which causes the template to fail to compile, before short circuiting is evaluated.</p>\n\n<p>I have also tried to do this using a <code>conditional</code> but that has the same problem of ensuring both options are valid for <code>T</code> before considering the condition.</p>\n\n<p>I know that I can do this by specializing. But the code is the exact same in the body of the function. I hate the fact that I'm specializing when the implementation is the same.</p>\n\n<p><strong>Is there a way I can force the short circuit before evaluating the conditions?</strong></p>\n"}, {"tags": ["c#", "c++", "visual-studio", "installation"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1535552485, "post_id": 52079654, "comment_id": 91109461, "body": "what type of installer are you using?"}, {"owner": {"reputation": 10328, "user_id": 4798077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A03gw.jpg?s=128&g=1", "display_name": "Ron Beyer", "link": "https://stackoverflow.com/users/4798077/ron-beyer"}, "edited": false, "score": 0, "creation_date": 1535552716, "post_id": 52079654, "comment_id": 91109632, "body": "This is usually called a &quot;pre-requisite&quot; and many installers allow you to do this, how though depends on what installer you are using to generate your package."}, {"owner": {"reputation": 45, "user_id": 5731325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14483d3a41367320d2f4ac2456187c4?s=128&d=identicon&r=PG&f=1", "display_name": "theNewOne92", "link": "https://stackoverflow.com/users/5731325/thenewone92"}, "edited": false, "score": 0, "creation_date": 1535552913, "post_id": 52079654, "comment_id": 91109778, "body": "I was just using the standard visual studio installer project."}], "owner": {"reputation": 45, "user_id": 5731325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14483d3a41367320d2f4ac2456187c4?s=128&d=identicon&r=PG&f=1", "display_name": "theNewOne92", "link": "https://stackoverflow.com/users/5731325/thenewone92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535563617, "creation_date": 1535552168, "last_edit_date": 1535563617, "question_id": 52079654, "link": "https://stackoverflow.com/questions/52079654/can-a-windows-package-be-included-in-an-installer", "title": "Can a windows package be included in an installer?", "body": "<p>I'm fairly new and inexperienced when it comes to creating installers and adding needed packages to them so please forgive me if this is a stupid question. </p>\n\n<p>I have written a program in C# that uses the <a href=\"https://www.codeproject.com/Tips/540963/ST-Micro-electronics-Device-Firmware-Upgrade-DFU-D\" rel=\"nofollow noreferrer\">STDFU library</a>. I've created a setup project to create an installer for the application so it can be installed onto other Windows machines. The installer created works fine on my machine but did not work on one of my colleagues as they did not have Visual Studio installed and so they were receiving the error:</p>\n\n<blockquote>\n  <p>Unable to load DLL 'STDFU.dll': The specified module could not be found. </p>\n</blockquote>\n\n<p>I discovered that the problem for this error was because they didn't have the Visual C++ Redistributable package (vcredist_x86) installed. So my question is: </p>\n\n<p>Is there a way in which I can get the package installed on each users machine as part of the installer for the application I'm creating or does each person have to install this package individually? And if I can add it as part of my installer how do I go about that? Any help is greatly appreciated.</p>\n"}, {"tags": ["c++", "linux", "boost"], "answers": [{"comments": [{"owner": {"reputation": 739, "user_id": 3237841, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9bf988fa14967bc4b975782a04ec92dd?s=128&d=identicon&r=PG&f=1", "display_name": "quantum_well", "link": "https://stackoverflow.com/users/3237841/quantum-well"}, "edited": false, "score": 0, "creation_date": 1535759675, "post_id": 52088610, "comment_id": 91198725, "body": "So the receive buffer size must be at least max message size. Not very intuitive."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 739, "user_id": 3237841, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9bf988fa14967bc4b975782a04ec92dd?s=128&d=identicon&r=PG&f=1", "display_name": "quantum_well", "link": "https://stackoverflow.com/users/3237841/quantum-well"}, "edited": false, "score": 0, "creation_date": 1535759706, "post_id": 52088610, "comment_id": 91198727, "body": "Agreed, Haven&#39;t found documentation for it either, just something I arrived at by experimenting. It does make a modicum of sense, if you consider that the implementation wants to avoid double buffering."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1535597680, "creation_date": 1535597680, "answer_id": 52088610, "question_id": 52079547, "link": "https://stackoverflow.com/questions/52079547/boost-interprocess-message-queue-and-fork/52088610#52088610", "title": "boost interprocess message_queue and fork", "body": "<p>The problem is that your receive buffer is smaller than <code>max_msg_size</code>. Assuming 4-byte integers, this should work:</p>\n\n<pre><code>int num[8];\nmq.receive(num, sizeof(num), bytes, priority);\nstd::cout &lt;&lt; *num &lt;&lt; std::endl;\n</code></pre>\n\n<p>Also, I see no reason to play fast and loose with the actual queue instance. Just create it per process:</p>\n\n<pre><code>#include &lt;boost/interprocess/ipc/message_queue.hpp&gt;\n#include &lt;boost/exception/diagnostic_information.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;unistd.h&gt;\n\nint main() {\n    namespace bip = boost::interprocess;\n\n    const char *name = \"foo-552b8ae9-6037-4b77-aa0d-d4dc9dad790b\";\n    {\n        const int max_num_msg = 100;\n        const int max_msg_size = 32;\n        bip::message_queue::remove(name);\n        bip::message_queue mq(bip::create_only, name, max_num_msg, max_msg_size);\n    }\n\n    auto child_pid = fork();\n    if (child_pid == -1) {\n        std::cout &lt;&lt; \"fork failed\" &lt;&lt; std::endl;\n        return -1;\n    }\n    bip::message_queue mq(bip::open_only, name);\n\n    if (bool const is_child = (child_pid == 0)) {\n        while (true) {\n            unsigned int priority = 0;\n            bip::message_queue::size_type bytes = 0;\n\n            try {\n                int num[8];\n                mq.receive(num, sizeof(num), bytes, priority);\n                std::cout &lt;&lt; *num &lt;&lt; std::endl;\n            } catch (const bip::interprocess_exception &amp;e) {\n                std::cout &lt;&lt; \"Receive caused execption \" &lt;&lt; boost::diagnostic_information(e, true) &lt;&lt; std::endl;\n            }\n            sleep(1);\n        }\n    } else {\n        // parent\n        int send_num = 0;\n        while (true) {\n            unsigned int priority = 0;\n\n            mq.send(&amp;send_num, sizeof(send_num), priority);\n            send_num++;\n            sleep(5);\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 739, "user_id": 3237841, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9bf988fa14967bc4b975782a04ec92dd?s=128&d=identicon&r=PG&f=1", "display_name": "quantum_well", "link": "https://stackoverflow.com/users/3237841/quantum-well"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 52088610, "answer_count": 1, "score": 3, "last_activity_date": 1535597680, "creation_date": 1535551928, "last_edit_date": 1535552603, "question_id": 52079547, "link": "https://stackoverflow.com/questions/52079547/boost-interprocess-message-queue-and-fork", "title": "boost interprocess message_queue and fork", "body": "<p>I am trying to communicate with forked child process using message queue from boost interprocess library. When child process calls <em>receive</em> it causes exception with message </p>\n\n<blockquote>\n  <p>boost::interprocess_exception::library_error</p>\n</blockquote>\n\n<p>I am using GCC 6.3 on Debian 9 x64.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;unistd.h&gt;\n#include &lt;boost/interprocess/ipc/message_queue.hpp&gt;\n#include &lt;memory&gt;\n\nint main(int argc, char* argv[])\n{\n    using namespace boost::interprocess;\n\n    const char* name = \"foo-552b8ae9-6037-4b77-aa0d-d4dc9dad790b\";\n    const int max_num_msg = 100;\n    const int max_msg_size = 32;\n    bool is_child = false;\n\n    message_queue::remove(name);\n    auto mq = std::make_unique&lt;message_queue&gt;(create_only, name, max_num_msg, max_msg_size);\n\n    auto child_pid = fork();\n    if (child_pid == -1)\n    {\n        std::cout &lt;&lt; \"fork failed\" &lt;&lt; std::endl;\n        return -1;\n    }\n    else if (child_pid == 0)\n    {\n        is_child = true;\n    }\n\n    if (is_child)\n    {\n        // does child needs to reopen it?\n        mq.reset( new message_queue(open_only, name) );\n    }\n\n    int send_num = 0;\n    while(true)\n    {\n        unsigned int priority = 0;\n        if (is_child)\n        {\n            message_queue::size_type bytes = 0;\n            try\n            {\n                int num;\n                // Always throws. What is wrong ???????\n                mq-&gt;receive(&amp;num, sizeof(num), bytes, priority);\n                std::cout &lt;&lt;  num &lt;&lt; std::endl;\n            }\n            catch(const std::exception&amp; e)\n            {\n                std::cout &lt;&lt; \"Receive caused execption \" &lt;&lt; e.what() &lt;&lt; std::endl;\n            }\n            sleep(1);\n        }\n        else\n        {\n            mq-&gt;send(&amp;send_num, sizeof(send_num), priority);\n            send_num++;\n            sleep(5);\n        }\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>Also, in child process is it required to reopen the message queue created by the parent process? I tried it both ways and neither worked. I am getting the same exception on <em>receive</em>.</p>\n"}, {"tags": ["android", "c++", "ios", "android-library", "ios-library"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1535551885, "post_id": 52079499, "comment_id": 91109039, "body": "Anything is possible in a Turing complete language like C++."}, {"owner": {"reputation": 2011, "user_id": 2757447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQg87.png?s=128&g=1", "display_name": "Taier", "link": "https://stackoverflow.com/users/2757447/taier"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 1, "creation_date": 1535552031, "post_id": 52079499, "comment_id": 91109152, "body": "@Flimzy the question is not about C++, but about Android/iOS platform. Would they support such a library?"}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1535552168, "post_id": 52079499, "comment_id": 91109238, "body": "The answer is the same. Both execute Turing-complete code, so of course it&#39;s possible to integrate them with C++ (or any other language).  The interesting question would be: How easy is this?"}, {"owner": {"reputation": 2011, "user_id": 2757447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQg87.png?s=128&g=1", "display_name": "Taier", "link": "https://stackoverflow.com/users/2757447/taier"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1535552212, "post_id": 52079499, "comment_id": 91109269, "body": "@Flimzy now that makes sense :)"}], "answers": [{"tags": [], "owner": {"reputation": 2448, "user_id": 2000140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f64b1cd7eaa29004e093ec54d04ca5?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Richardson", "link": "https://stackoverflow.com/users/2000140/adam-richardson"}, "is_accepted": true, "score": 1, "last_activity_date": 1535552221, "creation_date": 1535552221, "answer_id": 52079668, "question_id": 52079499, "link": "https://stackoverflow.com/questions/52079499/is-it-possible-to-write-a-c-library-that-could-be-used-in-ios-and-android-nati/52079668#52079668", "title": "Is it possible to write a C++ library that could be used in iOS and Android Native projects?", "body": "<p>Yes it is possible as iOS is capable of running <code>c++</code> files and libraries and via the NDK Android is also capable of running c++ and c++ libraries.</p>\n\n<p>There are plenty of resources online but you might find the following from Medium useful:</p>\n\n<p><a href=\"https://medium.com/safetycultureengineering/how-to-build-a-shared-c-library-for-ios-and-android-a3817aba5798\" rel=\"nofollow noreferrer\">https://medium.com/safetycultureengineering/how-to-build-a-shared-c-library-for-ios-and-android-a3817aba5798</a></p>\n\n<p>Be careful though as there will be a performance overhead and you have to be careful when compiling the builds if you want it to run on both an iOS device and also the simulator, you will need to create a fat binary as they are built on different chip architectures.</p>\n"}], "owner": {"reputation": 2011, "user_id": 2757447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQg87.png?s=128&g=1", "display_name": "Taier", "link": "https://stackoverflow.com/users/2757447/taier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 52079668, "answer_count": 1, "score": 0, "last_activity_date": 1535552221, "creation_date": 1535551819, "question_id": 52079499, "link": "https://stackoverflow.com/questions/52079499/is-it-possible-to-write-a-c-library-that-could-be-used-in-ios-and-android-nati", "title": "Is it possible to write a C++ library that could be used in iOS and Android Native projects?", "body": "<p>I want to write an app for both platforms, and I want it to be a native. </p>\n\n<p>Still, I would like to have a <strong>write once run anywhere</strong> conception. Since the business logic would take a huge part of an app. And it would be pretty simple regarding frameworks (mostly math calculations). I would like to move it into the common part of the app. </p>\n\n<p>So my question is, are there any successful examples on C++ library that could be used for both native platforms? </p>\n"}, {"tags": ["c++", "visual-studio", "configuration"], "comments": [{"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1535553935, "post_id": 52079450, "comment_id": 91110543, "body": "good question.  I have wondered that myself as I was going through all of the mouse clicks needed to set up properties...  I will be watching this thread to see what the answers are."}], "owner": {"reputation": 496, "user_id": 4040643, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/cff61ba3998d185363575058b4361d3b?s=128&d=identicon&r=PG&f=1", "display_name": "Imago", "link": "https://stackoverflow.com/users/4040643/imago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535551702, "creation_date": 1535551702, "question_id": 52079450, "link": "https://stackoverflow.com/questions/52079450/one-configuration-to-run-them-all-in-visual-studio", "title": "One configuration to run them all in Visual Studio", "body": "<p>The \"Configuration Properties\" menu in visual studio allows one to configure additional properties of the nodes of a project. For example, one can adjust environment variables, additional dependencies etc. </p>\n\n<p>How can one set up one configuration that is then used by all nodes? </p>\n"}, {"tags": ["c++", "qt", "qt5"], "answers": [{"tags": [], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "is_accepted": false, "score": 4, "last_activity_date": 1535551779, "creation_date": 1535551779, "answer_id": 52079480, "question_id": 52079296, "link": "https://stackoverflow.com/questions/52079296/change-background-color-of-a-qlayout-containing-qbuttons/52079480#52079480", "title": "Change background color of a Qlayout containing QButtons", "body": "<p>QLayout is not a visual element, it's a container that adjust location of contained widgets. You can change background of QFrame or other widgets you included QLayout into.</p>\n"}, {"tags": [], "owner": {"reputation": 924, "user_id": 6853090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9672c1ff8637fd1cdf43bfa35e50cc3?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantin T.", "link": "https://stackoverflow.com/users/6853090/konstantin-t"}, "is_accepted": false, "score": 2, "last_activity_date": 1535551800, "creation_date": 1535551800, "answer_id": 52079489, "question_id": 52079296, "link": "https://stackoverflow.com/questions/52079296/change-background-color-of-a-qlayout-containing-qbuttons/52079489#52079489", "title": "Change background color of a Qlayout containing QButtons", "body": "<p>Since <code>QHBoxLayout</code> is not a <code>QWidget</code> it hasn't its own appearance. So you can't change its color.</p>\n"}, {"comments": [{"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1535617601, "post_id": 52084380, "comment_id": 91134692, "body": "Static members might no longer work properly with Qt 4.8 and later, because that implies  possibility of either destructor bomb or attempts  of call to members of destroyed objects. Thing is that Qt automatically deletes child widgets and owned layouts. Issue is if if object is destroyed by call to destructor outside of framework, the message pump might still address it  after destruction. It&#39;s more likely with complex GUI where some elements are updated by timer, by messages from other threads, etc."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1535639678, "post_id": 52084380, "comment_id": 91149806, "body": "That&#39;s not true. I have no idea what you mean by &quot;destructor bomb&quot;. Qt only deletes children that exist. If you get rid of a child, it doesn&#39;t exist by definition, and Qt would be <b>very</b> broken if it tried to mess with children that don&#39;t exist anymore. Since C++ had specified the order of class member construction and destruction for decades, it&#39;s not hard at all to order the members in the correct way. I have hundreds of thousands of lines of projects in total, all written this way."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1535639769, "post_id": 52084380, "comment_id": 91149865, "body": "There&#39;s no such thing as &quot;a call to destructor outside of framework&quot; -- I mean go ahead: try and provide an example (code, not words). No clue what that would even mean. Qt objects, like QObject, are just C++ classes, and proper RAII classes at that. They can be destroyed at any time, by anyone, and when they are destroyed, they wipe any events pending for themselves, as well as any references to themselves. There&#39;s a reason why Qt has quite on the order of 1k lines of code dealing with various corner cases on that."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1535640045, "post_id": 52084380, "comment_id": 91150050, "body": "All member objects that have the same lifetime with the owning object should be held by value, by C++ semantics that Qt doesn&#39;t (and can&#39;t!) alter. If an object&#39;s lifetime ends before that of the owning object - then indeed it must not be held by naked value. <code>std::optional</code> works for that, or explicit dynamic allocation via a smart pointer - or via parent object."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1535986765, "post_id": 52084380, "comment_id": 91254677, "body": "You actually was called out before about this point of view. And one of examples given was link to this article: <a href=\"http://wiki.qt.io/Threads_Events_QObjects\" rel=\"nofollow noreferrer\">wiki.qt.io/Threads_Events_QObjects</a> When message loop is involved, private implementation of widgets own its children even if you don&#39;t put them into class. Forcing them to be destroyed by class destructor enforces particular order. Removing widget from tree automatically forces framework to try/delete its childrens. What if order would be different? Also, how platform would deal with double deletion? This doesn&#39;t work on all platforms, what I saw myself."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1536074687, "post_id": 52084380, "comment_id": 91289588, "body": "C++ has a fixed destruction order, and you order children after their parents. Simple. Removal of any child will neither force Qt to remove the siblings nor the parents, and of course the destructor invocation order + all children of a parent having to be declared after the parent in the member list of the class, to avoid UB per basic C++ rules - simply leverages it. The children will be gone before the base class&#39;s <code>~QWidget</code> gets going. No double deletion. I can&#39;t divine what the problem was in your case, but I don&#39;t know of any code in Qt codebase that would precipitate this. It&#39;d be bad."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1536075010, "post_id": 52084380, "comment_id": 91289813, "body": "But if you have a reproducer and a description of the platform and Qt version that didn&#39;t work, I&#39;ll gladly look at it. If the code is solid, it&#39;d be a clean-cut Qt bug. Perhaps there&#39;s some corner case I never ran into - but it&#39;s absolutely supposed to work, lots of code in Qt itself would break if it didn&#39;t."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1536075140, "post_id": 52084380, "comment_id": 91289909, "body": "The only valid way of being &quot;called out&quot; on something that supposedly inherently has UB (e.g. crashes) is to be given a hopefully simple example that reproduces the issue under e.g. valgrind or another runtime memory checker. I mean - if this approach is so fundamentally broken, providing a simple example should be trivial. woboq has an awesome code browser for Qt as well. I take English prose into consideration, but ultimately the code is the standard of truth here. After being pestered enough about something and being shown no code, I lose interest. And so should anyone, really."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1536075461, "post_id": 52084380, "comment_id": 91290116, "body": "After all, at the end of the day, this site is for discussion of code, not trading stories."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1535569064, "creation_date": 1535569064, "answer_id": 52084380, "question_id": 52079296, "link": "https://stackoverflow.com/questions/52079296/change-background-color-of-a-qlayout-containing-qbuttons/52084380#52084380", "title": "Change background color of a Qlayout containing QButtons", "body": "<p>You'll have to add an intervening widget that you set the layout on, and change that widget's background. E.g.</p>\n\n<pre><code>auto *taggerBox = new QWidget;\nauto *layout = new QHBoxLayout(taggerbox);\nfalseBtn = new QToolButton(tr(\"False\"));\nvoidBtn = new QToolButton(tr(\"Void\"));\nlayout-&gt;addWidget(falseBtn);\nlayout-&gt;addWidget(voidBtn);\nauto palette = taggerBox-&gt;palette();\npalette.setColor(QPalette::Window, Qt::blue);\ntaggerBox-&gt;setPalette(palette);\n</code></pre>\n\n<p>If you're doing this in the constructor of some class, then likely the objects have the same lifetime as the class as there's no point to dynamically allocate them. In such circumstances, the widgets and layouts should be class members instead:</p>\n\n<pre><code>class MyClass : ... {\n  QWidget taggerBox;\n  QHBoxLayout taggerLayout{&amp;taggerBox};\n  QToolButton falseBtn{tr(\"False\")};\n  QToolButton voidBtn{tr(\"Void\")};\npublic:\n  MyClass(...);\n};\n\nMyClass::MyClass(...) : ... {\n    taggerLayout.addWidget(&amp;falseBtn);\n    taggerLayout.addWidget(&amp;voidBtn);\n    auto palette = taggerBox.palette();\n    palette.setColor(QPalette::Window, Qt::blue);\n    taggerBox.setPalette(palette);\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 5976895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da21ed9c2477a09c57e4c95e8908f3d0?s=128&d=identicon&r=PG", "display_name": "E.F", "link": "https://stackoverflow.com/users/5976895/e-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4620, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1535569064, "creation_date": 1535551283, "question_id": 52079296, "link": "https://stackoverflow.com/questions/52079296/change-background-color-of-a-qlayout-containing-qbuttons", "title": "Change background color of a Qlayout containing QButtons", "body": "<p>I have this Qt code:</p>\n\n<pre><code>QHBoxLayout *taggerBox = new QHBoxLayout;\nfalseBtn = new QToolButton;\nfalseBtn-&gt;setText(tr(\"False\"));\nvoidBtn = new QToolButton;\nvoidBtn-&gt;setText(tr(\"Void\"));\ntaggerBox-&gt;addWidget(falseBtn);\ntaggerBox-&gt;addWidget(voidBtn);\n</code></pre>\n\n<p>I would like to change the background of the QHBoxLayout (NOT the background of each button). I didn't find any way to change the background color of a QLayout.</p>\n\n<p>How can I do this ?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "assembly", "iostream"], "comments": [{"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 1, "creation_date": 1535621189, "post_id": 52079248, "comment_id": 91136990, "body": "The C++ design philosophy of <i>What you don&#39;t use, you don&#39;t pay for</i> (<a href=\"http://www.stroustrup.com/ETAPS-corrected-draft.pdf\" rel=\"nofollow noreferrer\">Foundations of C++, p. 4</a>) is a lofty goal, however there are some situations in which it is not attained. There are quite a few things that can bloat a C++ binary and yet be useless, and you&#39;ve stumbled upon one of them. Do note that the language itself does not mandate them; those are failures of tools to optimize them away."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 3, "creation_date": 1535623765, "post_id": 52079248, "comment_id": 91138805, "body": "@MatthieuM. - To be fair, this can be called a <a href=\"https://stackoverflow.com/questions/52079248/include-of-iostream-leads-to-different-binary/52079357#comment91126611_52079357\">programming error</a>. Kinda like making a a function needlessly virtual. The goal can be better expressed as &quot;you don&#39;t pay for what you don&#39;t ask&quot;. It&#39;s the programmer that needs to know what they are asking for."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1535626308, "post_id": 52079248, "comment_id": 91140379, "body": "@StoryTeller: I disagree. If the optimizer removes any instance of calls to <code>cout</code> because it proved the branches were never taken; you still will end-up with those useless leftovers. If you had used <code>printf</code> instead, then it would be fully eliminated."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1535552592, "post_id": 52079348, "comment_id": 91109545, "body": "In other words, link-time optimisation <i>may</i> be able to elide this, right?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1535552712, "post_id": 52079348, "comment_id": 91109630, "body": "@LightnessRacesinOrbit - Theoretically, and hopefully."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 4, "creation_date": 1535593954, "post_id": 52079348, "comment_id": 91126629, "body": "Even with link-time optimization, I don&#39;t think the compiler has enough information to understand that <code>__ioinit</code> is superfluous in a translation unit that makes no reference to any of the standard streams."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 23, "last_activity_date": 1535551414, "creation_date": 1535551414, "answer_id": 52079348, "question_id": 52079248, "link": "https://stackoverflow.com/questions/52079248/include-of-iostream-leads-to-different-binary/52079348#52079348", "title": "Include of iostream leads to different binary", "body": "<p>Including the <code>iostream</code> header has the effect of adding the definition of a static <code>std::ios_base::Init</code> object. The constructor of this static object initializes the standard stream objects <code>std::cout</code>, <code>std::cerr</code> and so forth.</p>\n\n<p>The reason it's done is to avoid the static initialization order fiasco. It ensures the stream objects are properly initialized across translation units.</p>\n"}, {"comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 3, "creation_date": 1535551510, "post_id": 52079357, "comment_id": 91108775, "body": "Initialize, and (perhaps more importantly) flush them before normal termination."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1535552001, "post_id": 52079357, "comment_id": 91109128, "body": "Interestingly, no storage for <code>__ioinit</code> itself is allocated.  At the same time I wonder why the constructor is not in marked comdat.  Is this code really duplicated in every single translation unit that uses <code>iostream</code>?  Seems really inefficient."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1535552049, "post_id": 52079357, "comment_id": 91109160, "body": "@fuz <code>_ZStL8__ioinit</code> is the storage for <code>__ioinit</code>."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1535552114, "post_id": 52079357, "comment_id": 91109207, "body": "@MaximEgorushkin Ah, I see.  Even less efficient.  One useless byte wasted just because there is no better way to do a singleton initialisation in C++."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1535553000, "post_id": 52079357, "comment_id": 91109849, "body": "@fuz - C++17&#39;s inline variable definitions can."}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1535575915, "post_id": 52079357, "comment_id": 91122088, "body": "@StoryTeller is defining the stream (cout for example) as inline variable inside the iostream header making the whole schwartz/niffty counter obsolete? and is it even superior? because we can still make the schwartz counter fail"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 5, "creation_date": 1535593875, "post_id": 52079357, "comment_id": 91126611, "body": "This is why you should include <code>&lt;istream&gt;</code> and/or <code>&lt;ostream&gt;</code> instead of <code>&lt;iostream&gt;</code> in translation units that don&#39;t need to refer to cin, cout, cerr, wcin, wcout, and wcerr."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "edited": false, "score": 0, "creation_date": 1535609948, "post_id": 52079357, "comment_id": 91130488, "body": "@ph&#246;n - I don&#39;t know. But it sounds like a great topic for a language lawyer question. Personally, I don&#39;t think it&#39;s a silver bullet, but inline variables do seem promising."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 33, "last_activity_date": 1535552500, "last_edit_date": 1535552500, "creation_date": 1535551447, "answer_id": 52079357, "question_id": 52079248, "link": "https://stackoverflow.com/questions/52079248/include-of-iostream-leads-to-different-binary/52079357#52079357", "title": "Include of iostream leads to different binary", "body": "<p>Each translation unit that includes <code>&lt;iostream&gt;</code> contains a copy of <code>ios_base::Init</code> object:</p>\n\n<pre><code>static ios_base::Init __ioinit;\n</code></pre>\n\n<p>This object is used to initialize the standard streams (<code>std::cout</code> and its friends). This method is called <a href=\"https://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Nifty_Counter\" rel=\"noreferrer\">Schwarz Counter</a> and it ensures that the standard streams are always initialized before their first use (provided <code>iostream</code> header has been included).</p>\n\n<p>That function <code>_GLOBAL__sub_I_main</code> is code the compiler generates for each translation unit that calls the constructors of global objects in that translation unit and also arranges for the corresponding destructor calls to be invoked at exit. This code is invoked by the C++ standard library start-up code before <code>main</code> is called.</p>\n"}], "owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1994, "favorite_count": 5, "accepted_answer_id": 52079357, "answer_count": 2, "score": 37, "last_activity_date": 1537770731, "creation_date": 1535551161, "last_edit_date": 1537770731, "question_id": 52079248, "link": "https://stackoverflow.com/questions/52079248/include-of-iostream-leads-to-different-binary", "title": "Include of iostream leads to different binary", "body": "<p>Compiling the following code </p>\n\n<pre><code>int main() {\n    return 0;\n}\n</code></pre>\n\n<p>gives the assembly</p>\n\n<pre><code>main:\n        xorl    %eax, %eax\n        ret\n</code></pre>\n\n<p><a href=\"https://gcc.godbolt.org/z/oQvRDd\" rel=\"nofollow noreferrer\">https://gcc.godbolt.org/z/oQvRDd</a></p>\n\n<p>If now <code>iostream</code> is included</p>\n\n<pre><code>#include &lt;iostream&gt;   \nint main() {\n    return 0;\n}\n</code></pre>\n\n<p>this assembly is created.  </p>\n\n<pre><code>main:\n        xorl    %eax, %eax\n        ret\n_GLOBAL__sub_I_main:\n        subq    $8, %rsp\n        movl    $_ZStL8__ioinit, %edi\n        call    std::ios_base::Init::Init() [complete object constructor]\n        movl    $__dso_handle, %edx\n        movl    $_ZStL8__ioinit, %esi\n        movl    $_ZNSt8ios_base4InitD1Ev, %edi\n        addq    $8, %rsp\n        jmp     __cxa_atexit\n</code></pre>\n\n<p>Full optimization is turned on (-O3).\n<a href=\"https://gcc.godbolt.org/z/EtrEX8\" rel=\"nofollow noreferrer\">https://gcc.godbolt.org/z/EtrEX8</a></p>\n\n<p>Can someone explain, why including an unused header changes the binary. What is <code>_GLOBAL__sub_I_main:</code>?</p>\n"}, {"tags": ["python", "c++", "object"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1535550937, "post_id": 52079129, "comment_id": 91108364, "body": "I think you want <code>dir(some_object)</code> but it&#39;s unclear to me what you&#39;re asking"}, {"owner": {"reputation": 2890, "user_id": 4027688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87fcbc5d23f768c0aa1c7b0f716feafb?s=128&d=identicon&r=PG&f=1", "display_name": "bphi", "link": "https://stackoverflow.com/users/4027688/bphi"}, "edited": false, "score": 0, "creation_date": 1535551047, "post_id": 52079129, "comment_id": 91108459, "body": "With type hinting and the <code>inspect</code> module, you can make Python look more like C++. But the point of learning a new language IMO isn&#39;t to try and replicate what you already know, but rather to learn the pros and cons of doing something a new way e.g. Python&#39;s duck typing."}, {"owner": {"reputation": 1230, "user_id": 5779186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0599f9b586109ce9c0093b56aa66a267?s=128&d=identicon&r=PG&f=1", "display_name": "E.Serra", "link": "https://stackoverflow.com/users/5779186/e-serra"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1535551158, "post_id": 52079129, "comment_id": 91108548, "body": "the full list of the &quot;variables&quot; (and their types) NO, no types in python, unless you mean at runtime, you can get the attributes you would have at runtime like @roganjosh suggested. but not before hand"}, {"owner": {"reputation": 682, "user_id": 5371102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/51ac51cf06c5efe15773ba7e75f1e3d3?s=128&d=identicon&r=PG&f=1", "display_name": "Peter M&#248;lgaard Pallesen", "link": "https://stackoverflow.com/users/5371102/peter-m%c3%b8lgaard-pallesen"}, "edited": false, "score": 0, "creation_date": 1535551267, "post_id": 52079129, "comment_id": 91108621, "body": "You can use an IDE PyCharm is my choice it will help you show what is available without running the code."}, {"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1535552019, "post_id": 52079129, "comment_id": 91109143, "body": "That&#39;s the beauty of Python, creating dynamic objects on the fly. You can think of the variables in Python as a <code>var</code> (in c#) or <code>auto</code> in c++ 2010+. There&#39;s no need for hard typing because we trust the coder to use their variables correctly. If for some reason you wanted to check a typing in your code, you can use <code>type()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10290165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0f7b814e7bda46cda788fa906f42ca0?s=128&d=identicon&r=PG&f=1", "display_name": "Syn", "link": "https://stackoverflow.com/users/10290165/syn"}, "edited": false, "score": 0, "creation_date": 1535638836, "post_id": 52079568, "comment_id": 91149186, "body": "Thank you, vars() is exactly what I was looking for. In addition I have found that using PyCharm you can visualize the structure of the classes with Ctrl+F12."}], "tags": [], "owner": {"reputation": 10059, "user_id": 4819449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Sbkk.png?s=128&g=1", "display_name": "FHTMitchell", "link": "https://stackoverflow.com/users/4819449/fhtmitchell"}, "is_accepted": true, "score": 0, "last_activity_date": 1535551975, "creation_date": 1535551975, "answer_id": 52079568, "question_id": 52079129, "link": "https://stackoverflow.com/questions/52079129/understanding-type-of-object-in-python/52079568#52079568", "title": "Understanding type of object in Python", "body": "<p>Python is a dynamic language. Variables don't have types, variables hold references to objects. Only objects have types. So before runtime, there is no way to know what type a variable holds. Python developers should work around this with good clear documentation explaining what the expected type is.</p>\n\n<p>At runtime, we can see what the type of each attribute (aka member) of a python object (the instance, not the class) is:</p>\n\n<pre><code>def types_of_instance_attributes(instance):\n    return {k: type(v) for k, v in vars(instance).items()}\n</code></pre>\n\n<hr>\n\n<p>However, in python 3.6+ static type <em>hints</em> have become part of the language to help users document and allow static type checkers to work better. These look more similar to C++:</p>\n\n<pre><code>class ComplexNumber:\n\n    _re: int\n    _im: int\n\n    def __init__(self, real: int, imaginary: int) -&gt; None:\n         self._re = real\n         self._im = imaginary\n\n    def magnitude(self) -&gt; float:\n       return (self._re**2 + self._im**2)**0.5\n\n\ncom = ComplexNumber(12, -3)\n\nx = com._re  # type checker knows is an int\ny = com.magnitude()  # type checker knows is a float\nz: str = com._im  # ERROR in type checker (int -&gt; str mismatch)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10290165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0f7b814e7bda46cda788fa906f42ca0?s=128&d=identicon&r=PG&f=1", "display_name": "Syn", "link": "https://stackoverflow.com/users/10290165/syn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 52079568, "answer_count": 1, "score": -2, "last_activity_date": 1535551975, "creation_date": 1535550827, "question_id": 52079129, "link": "https://stackoverflow.com/questions/52079129/understanding-type-of-object-in-python", "title": "Understanding type of object in Python", "body": "<p>I've always programmed in C++ and now I'm learning Python. \nI find very confusing the absence of declaration of objects in Python, especially the fact that members of classes are not declared before being defined. </p>\n\n<p>For example in C++ I would write:</p>\n\n<pre><code>Class ComplexNumber {\n    protected:\n    int _re,_im;\n\n    public:\n    ...\n\n}\n</code></pre>\n\n<p>In Python the declaration of _re and _im would be missing and their initialization would be hidden in the definition of public members. When you are lucky you find them in the constructor, but sometimes they are initialized in other members.</p>\n\n<p>Is there any method to figure out the complete structure of classes in Python without reading the whole code? In particular I'm interested in the full list of the \"variables\" (and their types) contained in the classes, which in C++ are usually protected/private members.</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 0, "last_activity_date": 1535616154, "last_edit_date": 1535616154, "creation_date": 1535557915, "answer_id": 52081555, "question_id": 52079058, "link": "https://stackoverflow.com/questions/52079058/why-segment-fault-occurs-when-redirect-outstream-to-a-file/52081555#52081555", "title": "Why segment fault occurs when redirect outstream to a file?", "body": "<p>The problem is caused (as you've identified) by allowing the two output streams to be closed while they both share a single buffer.  We can see this by compiling the code and running it in Valgrind:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ g++ -g -Wall -Wextra 52079058.cpp -o 52079058\n$ valgrind -q --leak-check=full ./52079058\n==27111== Invalid read of size 8\n==27111==    at 0x4985EC8: pubsync (streambuf:278)\n==27111==    by 0x4985EC8: std::ostream::flush() (ostream.tcc:219)\n==27111==    by 0x491C0EB: std::ios_base::Init::~Init() (ios_init.cc:134)\n==27111==    by 0x4BE28F0: __run_exit_handlers (exit.c:108)\n==27111==    by 0x4BE29E9: exit (exit.c:139)\n==27111==    by 0x4BCCB1D: (below main) (libc-start.c:344)\n</code></pre>\n\n<p>Here, we can see that one stream is trying to flush to the buffer that the other stream has deleted.  Hence, we always need to ensure that each buffer is owned by exactly one stream before this point.</p>\n\n<hr>\n\n<p>If you need to ensure that <code>std::cout</code> has its buffer restored regardless of code path, you might want to create a scope-based guard object that will restore it when it's destructed.</p>\n\n<p>Something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nclass stream_redirection\n{\n    std::ostream&amp; from;\n    std::ofstream to;\n    std::streambuf *const saved;\npublic:\n    stream_redirection(std::ostream&amp; from, const std::string&amp; filename)\n        : from{from},\n          to{filename},\n          saved{from.rdbuf(to.rdbuf())}\n    {}\n    stream_redirection(const stream_redirection&amp;) = delete;\n    void operator=(const stream_redirection&amp;) = delete;\n    ~stream_redirection()\n    {\n        from.rdbuf(saved);\n    }\n};\n\nint main()\n{\n    {\n        auto guard = stream_redirection(std::cout, \"out.txt\");\n\n        std::cout &lt;&lt; \"Testn\"&lt;&lt;std::endl;  // write to out.txt\n        std::cout &lt;&lt; \"Test2n\"&lt;&lt;std::endl;\n        std::cout &lt;&lt; \"Test3n\"&lt;&lt;std::endl;\n    }\n    std::cout &lt;&lt; \"Test4n\"&lt;&lt;std::endl; // write to screen\n    std::cout &lt;&lt; \"Test5n\"&lt;&lt;std::endl;\n}\n</code></pre>\n\n<p>If you create <code>guard</code> directly in <code>main()</code>, rather than in an inner scope as I've done here to demonstrate the switching, then the redirection will be cleaned up at program exit (i.e. when <code>main()</code> returns).</p>\n\n<hr>\n\n<p>I'd argue that having to create such a class indicates a severe design flaw somewhere in your program.  Any subsystem that needs to produce output ought to be passed a stream on which to write that output (some would go further, and argue that logging and error streams should also be passed where needed, too).</p>\n"}], "owner": {"reputation": 33, "user_id": 5939596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3mZ51.png?s=128&g=1", "display_name": "Perlman Song", "link": "https://stackoverflow.com/users/5939596/perlman-song"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 52081555, "answer_count": 1, "score": 1, "last_activity_date": 1535616154, "creation_date": 1535550638, "last_edit_date": 1535561243, "question_id": 52079058, "link": "https://stackoverflow.com/questions/52079058/why-segment-fault-occurs-when-redirect-outstream-to-a-file", "title": "Why segment fault occurs when redirect outstream to a file?", "body": "<p>The following code runs OK, but when line 9 <code>cout.rdbuf(x);</code> is removed , segment fault occurs.\nWould everyone tell me the reason? \nI'm not familiar with C++...\nBut I must cout continually after the outstream directing to out.txt.\nMy environment is Ubuntu 12.\nThanks a lot!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\nint main(void)\n{\n    ofstream outf(\"out.txt\");\n    streambuf* x = cout.rdbuf(outf.rdbuf());// redirect to out.txt\n    cout &lt;&lt; \"Testn\"&lt;&lt;endl;  // write to out.txt\n    cout.rdbuf(x);  // recovery\n    cout &lt;&lt; \"Test2n\"&lt;&lt;endl; // write to screen\n    return 0;\n}\n</code></pre>\n\n<p>Segment fault occurs in code below, though all content is printed to out.txt.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\nint main(void)\n{\n    ofstream outf(\"out.txt\");\n    streambuf* x = cout.rdbuf(outf.rdbuf());// redirect to out.txt\n    cout &lt;&lt; \"Testn\"&lt;&lt;endl;  // write to out.txt\n//    cout.rdbuf(x);        // recovery\n    cout &lt;&lt; \"Test2n\"&lt;&lt;endl;     \n    cout &lt;&lt; \"Test3n\"&lt;&lt;endl; \n    cout &lt;&lt; \"Test4n\"&lt;&lt;endl; \n    cout &lt;&lt; \"Test5n\"&lt;&lt;endl; \n    //Test2n~Test5n is printed to out.txt, but segment fault occurs now.    \n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++17", "boost-spirit-x3"], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1535579534, "post_id": 52084948, "comment_id": 91123429, "body": "... D&#39;oh! That&#39;s such a nasty symptom for a basic error... Well thank you very much, this certainly sheds some light."}, {"owner": {"reputation": 3425, "user_id": 3621421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/995874e8bbb9cf8df99e63de231709cc?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Kniazev", "link": "https://stackoverflow.com/users/3621421/nikita-kniazev"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1535585089, "post_id": 52084948, "comment_id": 91124949, "body": "Spirits wide character support is undertested and has some flaws. I suggest you to file a bug report on the issue tracker."}], "tags": [], "owner": {"reputation": 3425, "user_id": 3621421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/995874e8bbb9cf8df99e63de231709cc?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Kniazev", "link": "https://stackoverflow.com/users/3621421/nikita-kniazev"}, "is_accepted": true, "score": 2, "last_activity_date": 1535572383, "last_edit_date": 1535572383, "creation_date": 1535571485, "answer_id": 52084948, "question_id": 52078975, "link": "https://stackoverflow.com/questions/52078975/simple-spirit-x3-word-splitter-wont-compile-attribute-mismatch/52084948#52084948", "title": "Simple Spirit X3 word splitter won&#39;t compile, attribute mismatch", "body": "<p>I am not sure it actually should work even for the first case.</p>\n\n<p>You are using ASCII version of character parsers (<code>x3::alpha</code> is a synonym for <code>x3::standard::alpha</code>), passed iterator value type is <code>wchar_t</code>, but  <code>boost::spirit::char_encoding::standard::ischar()</code> returns false for non-ascii characters.</p>\n\n<p>With <code>x3::standard_wide::alpha</code> it works:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;boost/spirit/home/x3.hpp&gt;\n\nint main() {\n    namespace x3 = boost::spirit::x3;\n\n    std::wstring const str = L\"bonjour je suis un  petit panda\";\n\n    auto word = x3::lexeme[+x3::standard_wide::alpha];\n\n    std::wstring s;\n    x3::phrase_parse(begin(str), end(str), word, x3::space, s); // OK\n\n    std::vector&lt;std::wstring&gt; v;\n    x3::phrase_parse(begin(str), end(str), *word, x3::space, v); // OK\n}\n</code></pre>\n\n<p>Another good question should it work with ASCII skipper, and if there a difference between <code>x3::standard::space</code> and <code>x3::standard_wide::space</code> (wide one might consider more characters as white spaces because of Unicode).</p>\n"}], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 52084948, "answer_count": 1, "score": 1, "last_activity_date": 1535572383, "creation_date": 1535550371, "question_id": 52078975, "link": "https://stackoverflow.com/questions/52078975/simple-spirit-x3-word-splitter-wont-compile-attribute-mismatch", "title": "Simple Spirit X3 word splitter won&#39;t compile, attribute mismatch", "body": "<p>I'm trying to use a Spirit X3 parser to process the output from a command-line tool, but have been having issues. I've narrowed them down to a minimal example whose behaviour I don't understand:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;boost/spirit/home/x3.hpp&gt;\n\nint main() {\n    namespace x3 = boost::spirit::x3;\n\n    std::wstring const str = L\"bonjour je suis un  petit panda\";\n\n    auto word = x3::lexeme[+x3::alpha];\n\n    std::wstring s;\n    x3::phrase_parse(begin(str), end(str), word, x3::space, s); // OK\n\n    std::vector&lt;std::wstring&gt; v;\n    x3::phrase_parse(begin(str), end(str), *word, x3::space, v); // Compiler error\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/fe24e913ae3eff03\" rel=\"nofollow noreferrer\">Live demo on Coliru</a></p>\n\n<p>The error is very hairy, but boils down to not being able to call <code>move_to</code>, which IIUC is a symptom of an attribute type mismatch.</p>\n\n<pre><code>/usr/local/include/boost/spirit/home/x3/support/traits/move_to.hpp:180:9: error: no matching function for call to 'move_to'\n        detail::move_to(std::move(src), dest\n        ^~~~~~~~~~~~~~~\n\n[...]\n\n/usr/local/include/boost/spirit/home/x3/support/traits/move_to.hpp:56:9: note: candidate function not viable: no known conversion from 'typename attribute_category&lt;basic_string&lt;wchar_t, char_traits&lt;wchar_t&gt;, allocator&lt;wchar_t&gt; &gt; &gt;::type' (aka 'boost::spirit::x3::traits::container_attribute') to 'boost::spirit::x3::traits::unused_attribute' for 3rd argument\n        move_to(Source&amp;&amp;, Dest&amp;, unused_attribute) {}\n        ^\n/usr/local/include/boost/spirit/home/x3/support/traits/move_to.hpp:74:9: note: candidate function not viable: no known conversion from 'typename attribute_category&lt;basic_string&lt;wchar_t, char_traits&lt;wchar_t&gt;, allocator&lt;wchar_t&gt; &gt; &gt;::type' (aka 'boost::spirit::x3::traits::container_attribute') to 'boost::spirit::x3::traits::plain_attribute' for 3rd argument\n        move_to(Source&amp;&amp; src, Dest&amp; dest, plain_attribute)\n        ^\n/usr/local/include/boost/spirit/home/x3/support/traits/move_to.hpp:97:9: note: candidate function not viable: no known conversion from 'typename attribute_category&lt;basic_string&lt;wchar_t, char_traits&lt;wchar_t&gt;, allocator&lt;wchar_t&gt; &gt; &gt;::type' (aka 'boost::spirit::x3::traits::container_attribute') to 'boost::spirit::x3::traits::tuple_attribute' for 3rd argument\n        move_to(Source&amp;&amp; src, Dest&amp; dest, tuple_attribute)\n        ^\n/usr/local/include/boost/spirit/home/x3/support/traits/move_to.hpp:106:9: note: candidate function not viable: no known conversion from 'typename attribute_category&lt;basic_string&lt;wchar_t, char_traits&lt;wchar_t&gt;, allocator&lt;wchar_t&gt; &gt; &gt;::type' (aka 'boost::spirit::x3::traits::container_attribute') to 'boost::spirit::x3::traits::tuple_attribute' for 3rd argument\n        move_to(Source&amp;&amp; src, Dest&amp; dest, tuple_attribute)\n        ^\n/usr/local/include/boost/spirit/home/x3/support/traits/move_to.hpp:150:9: note: candidate function not viable: no known conversion from 'typename attribute_category&lt;basic_string&lt;wchar_t, char_traits&lt;wchar_t&gt;, allocator&lt;wchar_t&gt; &gt; &gt;::type' (aka 'boost::spirit::x3::traits::container_attribute') to 'boost::spirit::x3::traits::variant_attribute' for 3rd argument\n        move_to(Source&amp;&amp; src, Dest&amp; dest, variant_attribute tag)\n        ^\n/usr/local/include/boost/spirit/home/x3/support/traits/move_to.hpp:85:35: note: candidate template ignored: disabled by 'enable_if' [with Source = const wchar_t, Dest = std::__1::basic_string&lt;wchar_t, std::__1::char_traits&lt;wchar_t&gt;, std::__1::allocator&lt;wchar_t&gt; &gt;]\n        inline typename enable_if&lt;is_container&lt;Source&gt;&gt;::type\n                                  ^\n/usr/local/include/boost/spirit/home/x3/support/traits/move_to.hpp:113:9: note: candidate function template not viable: requires 4 arguments, but 3 were provided\n        move_to(Source&amp;&amp; src, Dest&amp; dest, variant_attribute, mpl::false_)\n        ^\n/usr/local/include/boost/spirit/home/x3/support/traits/move_to.hpp:143:9: note: candidate function template not viable: requires 4 arguments, but 3 were provided\n        move_to(Source&amp;&amp; src, Dest&amp; dest, variant_attribute, mpl::true_)\n        ^\n/usr/local/include/boost/spirit/home/x3/support/traits/move_to.hpp:157:9: note: candidate function template not viable: requires 4 arguments, but 3 were provided\n        move_to(Iterator, Iterator, unused_type, unused_attribute) {}\n        ^\n/usr/local/include/boost/spirit/home/x3/support/traits/move_to.hpp:161:9: note: candidate function template not viable: requires 4 arguments, but 3 were provided\n        move_to(Iterator first, Iterator last, Dest&amp; dest, container_attribute)\n        ^\n/usr/local/include/boost/spirit/home/x3/support/traits/move_to.hpp:171:9: note: candidate function template not viable: requires 4 arguments, but 3 were provided\n        move_to(Iterator first, Iterator last, boost::iterator_range&lt;Iterator&gt;&amp; rng, container_attribute)\n        ^\n</code></pre>\n\n<p>My goal is to word-split the sentence by whitespace. The <code>word</code> parser returns the first full word into a <code>std::string</code> as expected. Why isn't <code>*word</code> directly compatible with <code>std::vector&lt;std::string&gt;</code>, and what am I supposed to write instead?</p>\n"}, {"tags": ["c++", "c++11", "compilation", "c++17", "constexpr"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1535550746, "post_id": 52078752, "comment_id": 91108211, "body": "Here&#39;s a better question: why do you need to? Let the compiler do its job and optimize where it sees fit. <code>constexpr</code> is not a tool of optimization; it&#39;s a tool to allow you to write code in places you could not do so previously. To write code that generates constant expressions in contexts which require constant expressions."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1535550808, "post_id": 52078752, "comment_id": 91108263, "body": "Do you need it during the run-time, or is compile time failure fine? It&#39;s possible to assign to a <code>constexpr</code> variable and the compiler will error out if the function is evaluate in non-constexpr context. But I am not sure i that helps in your case."}, {"owner": {"reputation": 111, "user_id": 6578688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/877b4646a104166a15caa0aa217f7f83?s=128&d=identicon&r=PG&f=1", "display_name": "old123987", "link": "https://stackoverflow.com/users/6578688/old123987"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1535551024, "post_id": 52078752, "comment_id": 91108439, "body": "@NicolBolas: There is always a better question."}, {"owner": {"reputation": 111, "user_id": 6578688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/877b4646a104166a15caa0aa217f7f83?s=128&d=identicon&r=PG&f=1", "display_name": "old123987", "link": "https://stackoverflow.com/users/6578688/old123987"}, "edited": false, "score": 0, "creation_date": 1535551072, "post_id": 52078752, "comment_id": 91108478, "body": "I want to make sure that it is evaluated at compile-time. So, yes, it IS a performance optimization!"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1535551628, "post_id": 52078752, "comment_id": 91108852, "body": "Well, you can try to force it, see &quot;<i><a href=\"https://stackoverflow.com/questions/52004389/constexpr-does-not-work-apply-inside-function-call/52004692#52004692\">constexpr does not work/apply inside function call</a></i>&quot;. But in the end, there isn&#39;t <i>quite</i> a way to force it, only make not doing so too complicated for most compilers. And aside from runtime and assessing the compiled cCode, there&#39;s no way to be sure."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 2, "creation_date": 1535551883, "post_id": 52078752, "comment_id": 91109038, "body": "@Deduplicator I knew I saw it not-so-long-ago, but couldn&#39;t find it. Turns out it&#39;s same asker. I guess it makes my answer obsolete."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1535552382, "post_id": 52078752, "comment_id": 91109393, "body": "@old123987: &quot;<i>So, yes, it IS a performance optimization!</i>&quot; Well, that&#39;s not what the feature is for. Just like <code>inline</code> doesn&#39;t mean that the compiler will inline the function, <code>constexpr</code> does not guarantee the compiler will only evaluate the function at compile-time."}, {"owner": {"reputation": 111, "user_id": 6578688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/877b4646a104166a15caa0aa217f7f83?s=128&d=identicon&r=PG&f=1", "display_name": "old123987", "link": "https://stackoverflow.com/users/6578688/old123987"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1535553662, "post_id": 52078752, "comment_id": 91110348, "body": "@Deduplicator: Which is the preferred way of &quot;assessing&quot;? That exacly is my question."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1535560001, "post_id": 52078752, "comment_id": 91114579, "body": "It looks like there is a nearly- duplicate question by yourself <a href=\"https://stackoverflow.com/questions/52004389\">here</a>. Please explain why are you not satisfied by the accepted answer."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1535564905, "post_id": 52078752, "comment_id": 91117093, "body": "@n.m.: in my opinion, it&#39;s not a duplicate. Same subject, but a very different question. The accepted answer there doesn&#39;t answer the question &quot;How to tell if <code>constexpr</code> is evaluated at compile time (without manual inspection)?&quot; at all."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1535566427, "post_id": 52078752, "comment_id": 91117848, "body": "@geza it does (you can&#39;t, the as-if-rule always allows evaluation at runtime)."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1535567001, "post_id": 52078752, "comment_id": 91118104, "body": "@n.m.: That&#39;s not an answer to this question. As-if rule doesn&#39;t matter here at all. For example, a compiler could have an option, which puts a warning, if it cannot evaluate an appropriately marked constexpr function compile-time. Just like there are compilers, which can warn, if an inline function won&#39;t be inlined. OP wants to solve a problem regarding constexpr functions. As OP cannot force compile-time evaluation easily (the other question), OP wants to know how to analyse easily the resulting compilation whether the compiler used compile-time evaluation (this question)."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 6578688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/877b4646a104166a15caa0aa217f7f83?s=128&d=identicon&r=PG&f=1", "display_name": "old123987", "link": "https://stackoverflow.com/users/6578688/old123987"}, "edited": false, "score": 0, "creation_date": 1535551860, "post_id": 52079274, "comment_id": 91109016, "body": "So how do you figure out, if #3 is REALLY evaluated at compile time. It could be, but it is still up to the compiler."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 111, "user_id": 6578688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/877b4646a104166a15caa0aa217f7f83?s=128&d=identicon&r=PG&f=1", "display_name": "old123987", "link": "https://stackoverflow.com/users/6578688/old123987"}, "edited": false, "score": 1, "creation_date": 1535552165, "post_id": 52079274, "comment_id": 91109235, "body": "You don&#39;t have compiler guarantees enforced on the compiler by the c++ standard except for mandatory copy elision, so it&#39;s always up to compiler. Wrap <code>f</code> assignment to a <code>constexpr</code> into lambda and return the value, that enforces <code>constexpr</code> path. But this is only <code>constexpr</code> context. FWIW compiler can throw in bogus NOPs and loops into your code to slow it down based on the &quot;as-if&quot; rule, so there is never a guarantee it emitted concrete assembly or used particular optimization and there are not language level tools to check it."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 111, "user_id": 6578688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/877b4646a104166a15caa0aa217f7f83?s=128&d=identicon&r=PG&f=1", "display_name": "old123987", "link": "https://stackoverflow.com/users/6578688/old123987"}, "edited": false, "score": 0, "creation_date": 1535552908, "post_id": 52079274, "comment_id": 91109775, "body": "@old123987 BTW it would be extremely weird if compiler had to be able to evaluate return value at a compile time, and didn&#39;t do so when it can. Even in case #2 it&#39;s up to the compiler to use the evaluated value or emit the code to calculate it. Binding the return value to a <code>constexpr</code> variable is to make sure that you as a programmer use a path that is possible to be evaluated at compile time, but it does not force the optimization. In #2 you know that if code compiles compiler <i>can</i> optimize it, not that it <i>will</i>. In #3 you don&#39;t know if it can. That&#39;s the only difference."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1535554386, "post_id": 52079274, "comment_id": 91110866, "body": "Did you make your test with any optimizations? Because evidently, without optimization many compilers only assure feasibility, but still deferr to runtime."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1535556225, "post_id": 52079274, "comment_id": 91112242, "body": "@Deduplicator Yes. <a href=\"https://godbolt.org/z/dAoiM-\" rel=\"nofollow noreferrer\">I did so on a slightly more complicated case, taken from SO.</a> It does agree with what you say. Only since <code>-O2</code> everything is inlined and the map gets dissolved. Though <code>constexpr</code> does not guarantee anything. On the other hand, if you remove <code>constexpr</code> specifiers, even on <code>O3</code> clang and gcc fail to optimize the map. So the <code>constexpr</code> does help the optimizers. It seems to be a useful hint rather than only semantic changer. (Some might argue that compiler would optimize things just as good regardless of <code>constexpr</code>, it&#39;s not the case.)"}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1535558158, "post_id": 52079274, "comment_id": 91113564, "body": "@Deduplicator I reworded the answer and incorporated those conclusions into the answer. Hopefully it&#39;s more substantial and not just a reiteration of yours."}], "tags": [], "owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "is_accepted": false, "score": 2, "last_activity_date": 1535558186, "last_edit_date": 1535558186, "creation_date": 1535551241, "answer_id": 52079274, "question_id": 52078752, "link": "https://stackoverflow.com/questions/52078752/how-to-tell-if-constexpr-is-evaluated-at-compile-time-without-manual-inspecti/52079274#52079274", "title": "How to tell if `constexpr` is evaluated at compile time (without manual inspection)", "body": "<p><strong>It's impossible.</strong> <code>constexpr</code> does not guarantee value inlining, you can see this manipulating optimization level here: <a href=\"https://godbolt.org/z/dAoiM-\" rel=\"nofollow noreferrer\">https://godbolt.org/z/dAoiM-</a></p>\n\n<p>Only since -O2 everything is inlined and the structure gets dissolved. Below that compiler happily uses runtime evaluation even for code used in <code>constexpr</code> context.</p>\n\n<p><strong>There are no standard language tools to inquire whether compiler applies particular optimization.</strong> It all boils down to the <a href=\"https://en.cppreference.com/w/cpp/language/as_if\" rel=\"nofollow noreferrer\">as-if rule</a>. If the code behaves the same compiler can do anything to it. The only exception is mandatory RVO and other RVOs (they are allowed to changed observed behaviour.)</p>\n\n<p>That being said. The <code>constexpr</code> is a useful hint. In the linked example if one removes <code>constexpr</code> specifiers even <code>O3</code> (on recent clang and gcc) does not manage to remove the map.</p>\n\n<p>It's worthwhile optimization-wise to write <code>constexpr</code> functions and data structure, making sure the compiler can optimize, though you cannot force it to. </p>\n\n<p>You can force function to be evaluated in <code>constexpr</code> context, and you can also guard non-constexpr paths to throw, to prevent guaranteed run-time evaluation.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nconstexpr int f(int el) {\n    return el &gt; 0 ? el : throw \"error\";\n}\n\nint main() {\n    // constexpr auto r = f(-1); // #1 compiler errors that throw is forbidden in  \n                                 // constexpr, so it went into a non-constexpr path\n                                 // and failed\n\n    constexpr auto r = f(1);     // #2 fine - has to be interpreted in constexpr context\n    cout &lt;&lt; f(1) &lt;&lt; '\\n';        // #3 fine - can be interpreted in both contexts\n\n    try {\n        cout &lt;&lt; f(-1) &lt;&lt; '\\n'; // # 4 // throws - i.e. runtime evaluation\n    }\n    catch (const char* e) {\n        cout &lt;&lt; e &lt;&lt; '\\n';\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": false, "score": 0, "last_activity_date": 1582538835, "creation_date": 1582538835, "answer_id": 60373525, "question_id": 52078752, "link": "https://stackoverflow.com/questions/52078752/how-to-tell-if-constexpr-is-evaluated-at-compile-time-without-manual-inspecti/60373525#60373525", "title": "How to tell if `constexpr` is evaluated at compile time (without manual inspection)", "body": "<p>As we now have the current C++20 standard, we can use <code>consteval</code>.</p>\n\n<p>From the docs:</p>\n\n<blockquote>\n  <p>consteval - specifies that a function is an immediate function, that is, every call to the function must produce a compile-time constant.\n  <a href=\"https://en.cppreference.com/w/cpp/language/consteval\" rel=\"nofollow noreferrer\">doc</a></p>\n</blockquote>\n\n<p>This will fix the problem with <code>constexpr</code>.</p>\n"}], "owner": {"reputation": 111, "user_id": 6578688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/877b4646a104166a15caa0aa217f7f83?s=128&d=identicon&r=PG&f=1", "display_name": "old123987", "link": "https://stackoverflow.com/users/6578688/old123987"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1582538835, "creation_date": 1535549688, "last_edit_date": 1535551448, "question_id": 52078752, "link": "https://stackoverflow.com/questions/52078752/how-to-tell-if-constexpr-is-evaluated-at-compile-time-without-manual-inspecti", "title": "How to tell if `constexpr` is evaluated at compile time (without manual inspection)", "body": "<p>Is there a standard way to find out what the compiler does to <code>constexpr</code> functions?</p>\n\n<p>(Side note: For debug, every constexpr function is deferred to runtime by default. Why is this sensible? Is there a way to influence this?)</p>\n\n<p>For release it depends on the context. Obviously, for small test settings you can easily inspect the generated machine code, but this cannot be the way to go for a real project.</p>\n\n<p>My current 'workaround' (VC++) is to break somewhere, go to my constexpr function and (try to) inspect the disassembly. If none is there, I conclude that it was all done at compile time.\nBut it is not 100% reliable this way. (Optimization, etc.)\nOnly the other way around is certain: If I do find disassembly (and can even break there), I know that it was NOT done at compile time. </p>\n"}, {"tags": ["c++", "multithreading", "qt", "pjsip", "pjsua2"], "comments": [{"owner": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 3, "creation_date": 1535549169, "post_id": 52078532, "comment_id": 91107102, "body": "The easiest to do this is to use Slots and Signals (which make for some sort of interface after all). Then Qt will do the thread-crossing. You should call moveToThread on the SipLine"}, {"owner": {"reputation": 378, "user_id": 1775025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7d9b73fd49dee3c84cc0aeb7b748c17?s=128&d=identicon&r=PG", "display_name": "Sileno Brito", "link": "https://stackoverflow.com/users/1775025/sileno-brito"}, "reply_to_user": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 0, "creation_date": 1535549655, "post_id": 52078532, "comment_id": 91107461, "body": "@Amfasis I really believe what this is easy, but i studying the Qt and C++ does exactly seven days, and i do not have idea of how this is make. But you helped me, now i have a direction to try resolve."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 3, "creation_date": 1535550824, "post_id": 52078532, "comment_id": 91108274, "body": "The Qt. doc shows how to add a signal to a class derived from <code>QObject</code> here: <a href=\"http://doc.qt.io/qt-5/signalsandslots.html#a-small-example\" rel=\"nofollow noreferrer\">Signals &amp; Slots - A Small Example</a>. When signal and signal slot belong to objects associated to different threads, the connection becomes automatically a queued connection. If in doubt (or using a lambda as slot), you can explicitly append a <a href=\"http://doc.qt.io/qt-5/qt.html#ConnectionType-enum\" rel=\"nofollow noreferrer\"><code>Qt::QueuedConnection</code></a> to the arguments of <a href=\"http://doc.qt.io/qt-5/qobject.html#connect\" rel=\"nofollow noreferrer\"><code>QObject::connect()</code></a>."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 3, "creation_date": 1535550900, "post_id": 52078532, "comment_id": 91108333, "body": "Another part of Qt doc. concerning this: <a href=\"http://doc.qt.io/qt-5/threads-qobject.html#signals-and-slots-across-threads\" rel=\"nofollow noreferrer\">Signals and Slots Across Threads</a>."}], "answers": [{"tags": [], "owner": {"reputation": 378, "user_id": 1775025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7d9b73fd49dee3c84cc0aeb7b748c17?s=128&d=identicon&r=PG", "display_name": "Sileno Brito", "link": "https://stackoverflow.com/users/1775025/sileno-brito"}, "is_accepted": false, "score": 1, "last_activity_date": 1535562230, "creation_date": 1535562230, "answer_id": 52082721, "question_id": 52078532, "link": "https://stackoverflow.com/questions/52078532/how-communicate-two-thread-using-a-interface-class-with-qt-and-c/52082721#52082721", "title": "How communicate two thread, using a &quot;Interface Class&quot; with Qt and C++", "body": "<p>Was solved using the signals e emit:</p>\n\n<p>Added the signals</p>\n\n<pre><code>class Start : public QMainWindow, public SearchHandler, public FooterHandler, public SipHandlerController, public PhonebookHandler\n{\n    Q_OBJECT\n   public:\n        explicit Start(QWidget *parent = nullptr);\n        ~Start();\n        virtual void onSipIncomingRinging(Call * call);\n    signals:\n        void onSipIncomingRingingEvent(Call * call);\n}\n</code></pre>\n\n<p>The implementation was changed to emit a signal</p>\n\n<pre><code>void Start::onSipIncomingRinging(Call * call){\n    emit onSipIncomingRingingEvent(call);\n}\n</code></pre>\n\n<p>The slot change the front-end</p>\n\n<pre><code>void Start::on_Start_onSipOutgoingRingingEvent(Call * call)\n{\n    this-&gt;call = call;\n    ui-&gt;nav-&gt;setCurrentIndex(NavigationTabs::CONTACT);\n}\n</code></pre>\n"}], "owner": {"reputation": 378, "user_id": 1775025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7d9b73fd49dee3c84cc0aeb7b748c17?s=128&d=identicon&r=PG", "display_name": "Sileno Brito", "link": "https://stackoverflow.com/users/1775025/sileno-brito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535562230, "creation_date": 1535548963, "question_id": 52078532, "link": "https://stackoverflow.com/questions/52078532/how-communicate-two-thread-using-a-interface-class-with-qt-and-c", "title": "How communicate two thread, using a &quot;Interface Class&quot; with Qt and C++", "body": "<p>I am using the Qt and i am trying call a method from main thread (navigate to other tab) when a event ocorr in other thread (pjsip library receive a call).</p>\n\n<p>I make a class to use how interface your name is \"SipHandlerController\". I extend this class in my main class (mainwindow from Qt in my code has the name Start). </p>\n\n<p>My class is used at thread from pjsip to \"receive a call\". The class from pjsip to handler this event has too a property from type \"SipHandlerController\" this property receive the instance of my main class (this is running in other thread to to manipulate all ui). When the event to \"receive a call\" is called by pjsip thread, it really call the method from my main thread (the method to implement the SipHandlerController), but a received a error and the application broken: </p>\n\n<p>ASSERT failure in QCoreApplication::sendEvent: \"Cannot send events to objects owned by a different thread. Current thread 0x0x26545658. Receiver 'pageDialer' (of type 'QWidget') was created in thread 0x0x2071ab68\", file kernel\\qcoreapplication.cpp, line 576</p>\n\n<p>My interface</p>\n\n<pre><code>#ifndef SIP_HANDLER_CONTROLLER_H\n#define SIP_HANDLER_CONTROLLER_H\n\n#include &lt;pjsua2.hpp&gt;\n\nusing namespace pj;\n\nclass SipHandlerController\n{\npublic:\n    virtual void onSipIncomingRinging(Call * call) = 0;\n};\n\n#endif // SIP_HANDLER_CONTROLLER_H\n</code></pre>\n\n<p>My implementation in class from pjsip to listen the event</p>\n\n<pre><code>void SipLine::onIncomingCall(OnIncomingCallParam &amp;iprm){\n    SipCall *call = new SipCall(*this, iprm.callId);\n    call-&gt;setHandler(this-&gt;handler);\n\n    if(this-&gt;handler != nullptr){\n        // Here is call the method from main thread\n        this-&gt;handler-&gt;onSipIncomingRinging(call);\n    }\n}\n</code></pre>\n\n<p>My the header from main class (implementing the class \"SipHandlerController\", this class is my main thread).</p>\n\n<pre><code>class Start : public QMainWindow, public SearchHandler, public FooterHandler, public SipHandlerController, public PhonebookHandler\n{\n    Q_OBJECT\n\npublic:\n    explicit Start(QWidget *parent = nullptr);\n    ~Start();\n    virtual void onSipIncomingRinging(Call * call);\n}\n</code></pre>\n\n<p>The source from my main implement the SipHandlerController. (nav is a QStackedWidget), the method onSipIncomingRinging is called but the application is broken in this moment.</p>\n\n<pre><code>void  Start::onSipIncomingRinging(Call * call){\n    this-&gt;call = call;\n    ui-&gt;nav-&gt;setCurrentIndex(NavigationTabs::RINGING);\n}\n</code></pre>\n"}, {"tags": ["c++", "binding", "data-management"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 6, "creation_date": 1535549023, "post_id": 52078511, "comment_id": 91107012, "body": "Good old fashioned, non-owning, raw pointers? Or <a href=\"https://en.cppreference.com/w/cpp/utility/functional/reference_wrapper\" rel=\"nofollow noreferrer\"><code>std::reference_wrapper</code></a>?"}, {"owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "edited": false, "score": 0, "creation_date": 1535549903, "post_id": 52078511, "comment_id": 91107614, "body": "You can also store <code>std::shared_ptr</code> and return <code>std::weak_ptr</code>. This way Map mostly retains ownership and you can check if the pointer has been deleted before using it in <code>floatBindings</code>."}, {"owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 0, "creation_date": 1535551040, "post_id": 52078511, "comment_id": 91108451, "body": "First figure your chain of ownership out: who owns those objects? Who&#39;s allowed to either share ownership (<code>std::shared_ptr</code>) or just access the object if it hasn&#39;t been deleted yet (<code>std::weak_ptr</code>)?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1535551530, "post_id": 52078511, "comment_id": 91108787, "body": "Will the element in your <i>map</i> always live longer than the parts that use the reference to it?"}, {"owner": {"reputation": 81, "user_id": 8894272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870eae6abbcb73fbfb23aa540b1a9e46?s=128&d=identicon&r=PG&f=1", "display_name": "str0yd", "link": "https://stackoverflow.com/users/8894272/str0yd"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1535552022, "post_id": 52078511, "comment_id": 91109146, "body": "@Galik yes, the elements in the map will always be deleted last. Thank you guys for the answers so far!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1535553508, "post_id": 52078511, "comment_id": 91110235, "body": "Note that your <code>GetObject()</code> will fail miserably if the specified <code>name</code> does not exist in the <code>map</code>. <code>Map[name]</code> will return a default-constructed <code>unique_ptr</code> holding a <code>nullptr</code>, and then <code>operator*</code> will have <i>undefined behavior</i>. If <code>name</code> doesn&#39;t exist, you should either raise an exception, or else create a default object to return a reference to."}, {"owner": {"reputation": 406, "user_id": 2102925, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/582cb201d06c59f1521cbe4e2a5667c3?s=128&d=identicon&r=PG", "display_name": "AdityaG", "link": "https://stackoverflow.com/users/2102925/adityag"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1535553643, "post_id": 52078511, "comment_id": 91110334, "body": "@RemyLebeau one can always check the string exists as a key in the map right ?! you can use reference_wrapper I have had good experiences with it !"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 406, "user_id": 2102925, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/582cb201d06c59f1521cbe4e2a5667c3?s=128&d=identicon&r=PG", "display_name": "AdityaG", "link": "https://stackoverflow.com/users/2102925/adityag"}, "edited": false, "score": 0, "creation_date": 1535556558, "post_id": 52078511, "comment_id": 91112458, "body": "@AdityaG yes, the <code>name</code> can be  checked for existance, by using <code>std::map::find()</code>, but the function would still need to decide what it should do/return in that situation"}, {"owner": {"reputation": 81, "user_id": 8894272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870eae6abbcb73fbfb23aa540b1a9e46?s=128&d=identicon&r=PG&f=1", "display_name": "str0yd", "link": "https://stackoverflow.com/users/8894272/str0yd"}, "edited": false, "score": 0, "creation_date": 1535572239, "post_id": 52078511, "comment_id": 91120446, "body": "Thanks for advide, I do check the map content, don&#39;t worry. Just tried to ceep  it small."}], "owner": {"reputation": 81, "user_id": 8894272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870eae6abbcb73fbfb23aa540b1a9e46?s=128&d=identicon&r=PG&f=1", "display_name": "str0yd", "link": "https://stackoverflow.com/users/8894272/str0yd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1535552301, "creation_date": 1535548914, "last_edit_date": 1535552301, "question_id": 52078511, "link": "https://stackoverflow.com/questions/52078511/smart-pointers-unique-pointers-and-references", "title": "Smart pointers (unique pointers) and references", "body": "<p>In my code I have a static class to store objects. To do stuff with inherence (casting etc) I store the objects in a map with <code>unique_ptr</code>s.</p>\n\n<pre><code>std::map&lt;std::string, std::unique_ptr&lt;DummyClass&gt;&gt;Map;\n</code></pre>\n\n<p>The stored objects have some member variables I want to update in my code (via variable bindings) so I pass out a reference to the stored objects to being able to modify them.</p>\n\n<pre><code>DummyClass&amp; GetObject(std::string name)\n{\n  return *Map[name];\n}\n</code></pre>\n\n<p>To update the members I store them in another map, in another class, to bind them to a string (I get the values via TCP/IP), something like this:</p>\n\n<pre><code>updater-&gt;registerVariable(\"bindingString\", dummyObject.position.x);\n</code></pre>\n\n<p>The <code>registerVariable</code> Method also takes a reference (to <code>dummyObject.position.x</code>) and stores it in it's map. </p>\n\n<pre><code>std::map&lt;std::string, std::vector&lt;float&amp;&gt;&gt; floatBindings;\n</code></pre>\n\n<p>But here raises the problem: I can't store references in the bindings map.</p>\n\n<p>Anyone has a good idea what I could do instead? Would <code>shared_ptr</code>s the way to go? But the thing is that I don't really want do use <code>shared_ptr</code> s because the owner should only be the static class.</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 2202, "user_id": 1363011, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1eed4387e0d2c0483ac20ec249c92c4c?s=128&d=identicon&r=PG", "display_name": "Thangadurai", "link": "https://stackoverflow.com/users/1363011/thangadurai"}, "edited": false, "score": 1, "creation_date": 1535548518, "post_id": 52078271, "comment_id": 91106653, "body": "You should post your current working code or relevant code parts, so that others can suggest some solutions."}, {"owner": {"reputation": 1, "user_id": 10290051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680efabaa4e529078ba2d1d34847ffc0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodBoy", "link": "https://stackoverflow.com/users/10290051/goodboy"}, "reply_to_user": {"reputation": 2202, "user_id": 1363011, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1eed4387e0d2c0483ac20ec249c92c4c?s=128&d=identicon&r=PG", "display_name": "Thangadurai", "link": "https://stackoverflow.com/users/1363011/thangadurai"}, "edited": false, "score": 0, "creation_date": 1535549388, "post_id": 52078271, "comment_id": 91107264, "body": "Yep, i update post."}, {"owner": {"reputation": 939, "user_id": 6312818, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-exa9fGlNwbI/AAAAAAAAAAI/AAAAAAAAHQ8/CXKe0oTPiYc/photo.jpg?sz=128", "display_name": "Eyal Cinamon", "link": "https://stackoverflow.com/users/6312818/eyal-cinamon"}, "edited": false, "score": 0, "creation_date": 1535549615, "post_id": 52078271, "comment_id": 91107430, "body": "What do you mean by &quot;dragging the window beyond the screen&quot; ?"}, {"owner": {"reputation": 1, "user_id": 10290051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680efabaa4e529078ba2d1d34847ffc0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodBoy", "link": "https://stackoverflow.com/users/10290051/goodboy"}, "edited": false, "score": 0, "creation_date": 1535549677, "post_id": 52078271, "comment_id": 91107469, "body": "Check 2nd and 3rd screenshots"}, {"owner": {"reputation": 6964, "user_id": 2261657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de05cbfc9a0fbef64f55eb69e761bee5?s=128&d=identicon&r=PG", "display_name": "\u03b3\u03b7\u03c1\u03ac\u03c3\u03ba\u03c9 \u03b4&#39; \u03b1\u03b5\u03af \u03c0\u03bf\u03bb\u03bb\u03ac \u03b4\u03b9\u03b4\u03b1\u03c3\u03ba\u03cc\u03bc\u03b5", "link": "https://stackoverflow.com/users/2261657/%ce%b3%ce%b7%cf%81%ce%ac%cf%83%ce%ba%cf%89-%ce%b4-%ce%b1%ce%b5%ce%af-%cf%80%ce%bf%ce%bb%ce%bb%ce%ac-%ce%b4%ce%b9%ce%b4%ce%b1%cf%83%ce%ba%cf%8c%ce%bc%ce%b5"}, "edited": false, "score": 0, "creation_date": 1535556929, "post_id": 52078271, "comment_id": 91112725, "body": "Can you show the <code>CreateNativeControls</code> method?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1535557679, "post_id": 52078271, "comment_id": 91113241, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. It&#39;s usually best to leave out all layers of abstraction (i.e. the C++ code) and only show the bare minimum. It&#39;s also not required to have repetitive code: If it fails for 3 button controls, it surely also fails for a single button control, so simply keep a single button in your MCVE."}, {"owner": {"reputation": 1, "user_id": 10290051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680efabaa4e529078ba2d1d34847ffc0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodBoy", "link": "https://stackoverflow.com/users/10290051/goodboy"}, "edited": false, "score": 0, "creation_date": 1535559469, "post_id": 52078271, "comment_id": 91114304, "body": "UPD. Full code is here."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1535564638, "post_id": 52078271, "comment_id": 91116943, "body": "An MCVE is required to be <i>minimal</i>. There&#39;s no need to show the button handlers, or a lot of other, unrelated code. The C++ abstraction certainly doesn&#39;t help see through the code to identify the issue. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (make sure to read the link thoroughly)."}, {"owner": {"reputation": 1, "user_id": 10290051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680efabaa4e529078ba2d1d34847ffc0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodBoy", "link": "https://stackoverflow.com/users/10290051/goodboy"}, "edited": false, "score": 0, "creation_date": 1535565162, "post_id": 52078271, "comment_id": 91117242, "body": "Now its good?; I think its perfect."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1535565686, "post_id": 52078271, "comment_id": 91117489, "body": "This is still neither complete nor minimal. We don&#39;t need to see code for 3 buttons, when a single button exhibits the undesired behavior. Neither is it relevant, that fonts are created or text is rendered. You can simply fill a solid rectangle, and use a system brush for that (call <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/wingdi/nf-wingdi-getstockobject\" rel=\"nofollow noreferrer\">GetStockObject</a> to get one)."}, {"owner": {"reputation": 6964, "user_id": 2261657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de05cbfc9a0fbef64f55eb69e761bee5?s=128&d=identicon&r=PG", "display_name": "\u03b3\u03b7\u03c1\u03ac\u03c3\u03ba\u03c9 \u03b4&#39; \u03b1\u03b5\u03af \u03c0\u03bf\u03bb\u03bb\u03ac \u03b4\u03b9\u03b4\u03b1\u03c3\u03ba\u03cc\u03bc\u03b5", "link": "https://stackoverflow.com/users/2261657/%ce%b3%ce%b7%cf%81%ce%ac%cf%83%ce%ba%cf%89-%ce%b4-%ce%b1%ce%b5%ce%af-%cf%80%ce%bf%ce%bb%ce%bb%ce%ac-%ce%b4%ce%b9%ce%b4%ce%b1%cf%83%ce%ba%cf%8c%ce%bc%ce%b5"}, "edited": false, "score": 0, "creation_date": 1535566069, "post_id": 52078271, "comment_id": 91117687, "body": "LOL! Minimal isn&#39;t 1000 lines of code. Just create an empty window with <b>one</b> button and fill its background. No need to draw lines etc..."}, {"owner": {"reputation": 1, "user_id": 10290051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680efabaa4e529078ba2d1d34847ffc0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodBoy", "link": "https://stackoverflow.com/users/10290051/goodboy"}, "edited": false, "score": 0, "creation_date": 1535566305, "post_id": 52078271, "comment_id": 91117799, "body": "Ok... now it minimal and returns main idea. Maybe you will help or wrote your ideas about this issue?"}, {"owner": {"reputation": 6964, "user_id": 2261657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de05cbfc9a0fbef64f55eb69e761bee5?s=128&d=identicon&r=PG", "display_name": "\u03b3\u03b7\u03c1\u03ac\u03c3\u03ba\u03c9 \u03b4&#39; \u03b1\u03b5\u03af \u03c0\u03bf\u03bb\u03bb\u03ac \u03b4\u03b9\u03b4\u03b1\u03c3\u03ba\u03cc\u03bc\u03b5", "link": "https://stackoverflow.com/users/2261657/%ce%b3%ce%b7%cf%81%ce%ac%cf%83%ce%ba%cf%89-%ce%b4-%ce%b1%ce%b5%ce%af-%cf%80%ce%bf%ce%bb%ce%bb%ce%ac-%ce%b4%ce%b9%ce%b4%ce%b1%cf%83%ce%ba%cf%8c%ce%bc%ce%b5"}, "edited": false, "score": 0, "creation_date": 1535566423, "post_id": 52078271, "comment_id": 91117846, "body": "Nop. Your code <b>should</b> run as <b>is</b> <b>and</b> reproduce the issue! Yours doesn&#39;t run."}, {"owner": {"reputation": 1, "user_id": 10290051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680efabaa4e529078ba2d1d34847ffc0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodBoy", "link": "https://stackoverflow.com/users/10290051/goodboy"}, "edited": false, "score": 0, "creation_date": 1535566634, "post_id": 52078271, "comment_id": 91117947, "body": "Ok give me 10min, i implement this."}], "answers": [{"comments": [{"owner": {"reputation": 939, "user_id": 6312818, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-exa9fGlNwbI/AAAAAAAAAAI/AAAAAAAAHQ8/CXKe0oTPiYc/photo.jpg?sz=128", "display_name": "Eyal Cinamon", "link": "https://stackoverflow.com/users/6312818/eyal-cinamon"}, "edited": false, "score": 0, "creation_date": 1535551788, "post_id": 52079209, "comment_id": 91108960, "body": "Additionally you might want to set CS_HREDRAW | CS_VREDRAW in the window class style."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1535552026, "post_id": 52079209, "comment_id": 91109148, "body": "Proposing an answer, without diagnosing the issue or explaining, why it works, usually doesn&#39;t. Applying a solution without understand what it does or why it&#39;s necessary leads to what is called <a href=\"https://en.wikipedia.org/wiki/Cargo_cult_programming\" rel=\"nofollow noreferrer\">cargo cult programming</a>."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1535552167, "post_id": 52079209, "comment_id": 91109236, "body": "Besides, the <code>CS_HREDRAW</code> and <code>CS_VREDRAW</code> <a href=\"https://docs.microsoft.com/en-us/windows/desktop/winmsg/window-class-styles\" rel=\"nofollow noreferrer\">window class styles</a> won&#39;t fix the issue. They pertain to behavior, when the <i>size of the client area changes</i>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1535552951, "post_id": 52079209, "comment_id": 91109818, "body": "The <i>correct</i> way to trigger a redraw of a window is to use <code>InvalidateRect()</code> and let the system generate a new <code>WM_PAINT</code> message when it is ready to do so."}, {"owner": {"reputation": 1, "user_id": 10290051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680efabaa4e529078ba2d1d34847ffc0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodBoy", "link": "https://stackoverflow.com/users/10290051/goodboy"}, "edited": false, "score": 0, "creation_date": 1535554695, "post_id": 52079209, "comment_id": 91111113, "body": "Nope, it&#39;s not working... I know i need trigger WM_PAINT by some api&#39;s like InvalidateRect or UpdateWindow... but when?"}, {"owner": {"reputation": 1, "user_id": 10290051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680efabaa4e529078ba2d1d34847ffc0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodBoy", "link": "https://stackoverflow.com/users/10290051/goodboy"}, "edited": false, "score": 0, "creation_date": 1535559624, "post_id": 52079209, "comment_id": 91114387, "body": "I know this, but why custom buttons not redraws, when i move window beyond the screen(screenshot2 and screenshot3 illustrate this)?"}], "tags": [], "owner": {"reputation": 939, "user_id": 6312818, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-exa9fGlNwbI/AAAAAAAAAAI/AAAAAAAAHQ8/CXKe0oTPiYc/photo.jpg?sz=128", "display_name": "Eyal Cinamon", "link": "https://stackoverflow.com/users/6312818/eyal-cinamon"}, "is_accepted": false, "score": -2, "last_activity_date": 1535551046, "creation_date": 1535551046, "answer_id": 52079209, "question_id": 52078271, "link": "https://stackoverflow.com/questions/52078271/c-winapigdi-custom-gui-correct-redraw/52079209#52079209", "title": "C++ WinAPI[GDI]. Custom gui correct redraw", "body": "<p>You can force a repaint in answer to a WM_MOVE</p>\n\n<pre><code>case WM_MOVE:\n    this-&gt;OnWindow_Paint();\n    break;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10290051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680efabaa4e529078ba2d1d34847ffc0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodBoy", "link": "https://stackoverflow.com/users/10290051/goodboy"}, "is_accepted": true, "score": 0, "last_activity_date": 1535567569, "creation_date": 1535567569, "answer_id": 52084045, "question_id": 52078271, "link": "https://stackoverflow.com/questions/52078271/c-winapigdi-custom-gui-correct-redraw/52084045#52084045", "title": "C++ WinAPI[GDI]. Custom gui correct redraw", "body": "<p>So i fixed it!.</p>\n\n<pre><code>        case WM_DRAWITEM:\n        {\n            LPDRAWITEMSTRUCT pdis = reinterpret_cast&lt;LPDRAWITEMSTRUCT&gt;(lParam);\n            switch (pdis-&gt;CtlID)\n            ...\n        }\n</code></pre>\n\n<p>Pointer to <code>DRAWITEMSTRUCT</code> should be non-static!. It's logic error, my mistake.\nWorks perfectly =).</p>\n"}], "owner": {"reputation": 1, "user_id": 10290051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680efabaa4e529078ba2d1d34847ffc0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodBoy", "link": "https://stackoverflow.com/users/10290051/goodboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 52084045, "answer_count": 2, "score": 0, "last_activity_date": 1535567569, "creation_date": 1535548181, "last_edit_date": 1535566170, "question_id": 52078271, "link": "https://stackoverflow.com/questions/52078271/c-winapigdi-custom-gui-correct-redraw", "title": "C++ WinAPI[GDI]. Custom gui correct redraw", "body": "<p>I'm creating custom gui, using WinAPI and GDI. I have some problems, with redrawing it. If i will drag window, it redraw great, but if i drag window beyond the screen it not redraw. Look at screenshots below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jyZtp.png\" rel=\"nofollow noreferrer\">Normal window moving</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/z2HsF.png\" rel=\"nofollow noreferrer\">Move window beyond the screen</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/7w9pq.png\" rel=\"nofollow noreferrer\">Move back</a></p>\n\n<p>ToxicInjector.cpp:</p>\n\n<pre><code>#include \"ToxicInjector.h\"\n\n...\n\n// Method register native window object\nbool ToxicInject::Application::RegisterNativeWindow()\n{\n    WNDCLASSEX wc{ sizeof(WNDCLASSEX) };\n    ...\n    wc.style = CS_VREDRAW | CS_HREDRAW;\n\n    ...\n}\n\n// Window message procedure\nLRESULT ToxicInject::Application::WindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    switch (uMsg)\n    {\n        // Executes when window creates\n        case WM_CREATE:\n        {\n            this-&gt;CreateNativeControls();\n            ...\n        }\n        break;\n\n        ...\n\n        // Need for draw custom controls\n        case WM_DRAWITEM:\n        {\n            static LPDRAWITEMSTRUCT pdis = reinterpret_cast&lt;LPDRAWITEMSTRUCT&gt;(lParam);\n            switch (pdis-&gt;CtlID)\n            {\n                case UPDATE_BUTTON:\n                {\n                    if (pdis-&gt;itemState &amp; ODS_SELECTED)\n                        this-&gt;isMouseOnUpdateBtn = true;\n                    else\n                        this-&gt;isMouseOnUpdateBtn = false;\n\n                    this-&gt;DrawUpdateButton(pdis-&gt;hDC);\n                }\n                break;\n\n                case INJECT_BUTTON:\n                {\n                    if (pdis-&gt;itemState &amp; ODS_SELECTED)\n                        this-&gt;isMouseOnInjectBtn = true;\n                    else\n                        this-&gt;isMouseOnInjectBtn = false;\n                    this-&gt;DrawInjectButton(pdis-&gt;hDC);\n                }\n                break;\n\n                case BROWSE_BUTTON:\n                {\n                    if (pdis-&gt;itemState &amp; ODS_SELECTED)\n                        this-&gt;isMouseOnBrowseBtn = true;\n                    else\n                        this-&gt;isMouseOnBrowseBtn = false;\n\n                    this-&gt;DrawBrowseButton(pdis-&gt;hDC);\n                }\n                break;\n            }\n        }\n        break;\n\n        ...\n\n    }\n    return DefWindowProc(hWnd, uMsg, wParam, lParam);\n}\n\n...\n\n// Method creates all native-window controls\nvoid ToxicInject::Application::CreateNativeControls()\n{\n    ...\n\n    this-&gt;hUpdate_Button = CreateWindow(L\"BUTTON\", L\"\", WS_VISIBLE| WS_CHILD | BS_OWNERDRAW, 224, 50, 212, 26, this-&gt;hwnd, reinterpret_cast&lt;HMENU&gt;(this-&gt;UPDATE_BUTTON), 0, 0);\n    this-&gt;hInject_Button = CreateWindow(L\"BUTTON\", L\"\", WS_VISIBLE| WS_CHILD | BS_OWNERDRAW, 224, 76 + 15, 212, 26, this-&gt;hwnd, reinterpret_cast&lt;HMENU&gt;(this-&gt;INJECT_BUTTON), 0, 0);\n    this-&gt;hBrowse_Button = CreateWindow(L\"BUTTON\", L\"\", WS_VISIBLE| WS_CHILD | BS_OWNERDRAW, 224, 91 + 26 + 15, 212, 26, this-&gt;hwnd, reinterpret_cast&lt;HMENU&gt;(this-&gt;BROWSE_BUTTON), 0, 0);\n}\n\n...\n\n// Method draw update button\nvoid ToxicInject::Application::DrawUpdateButton(HDC hDC)\n{\n    ...\n\n    if (this-&gt;isMouseOnUpdateBtn)\n    {\n        bg = CreateSolidBrush(RGB(44, 97, 46));\n\n        /*DRAW BACKGROUND*/\n        FillRect(hDC, &amp;rc, bg);\n\n        /*DRAW BOTTOM LINE*/\n        SelectObject(hDC, hPen);\n        MoveToEx(hDC, 0, 26, 0);\n        LineTo(hDC, 212, 26);\n\n        /*DRAW TEXT*/\n        SetBkColor(hDC, RGB(44, 97, 46));\n        SetTextColor(hDC, RGB(255, 255, 255));\n        SelectObject(hDC, hTahoma_Regular);\n\n        TextOut(hDC, 83, 3, L\"Update\", 7);\n\n        /*FREE GDI MEMORY*/\n        DeleteObject(bg);\n        DeleteObject(hTahoma_Regular);\n        DeleteObject(hPen);\n    }\n    else\n    {\n        bg = CreateSolidBrush(RGB(67, 156, 70));\n\n        /*DRAW BACKGROUND*/\n        FillRect(hDC, &amp;rc, bg);\n\n        /*DRAW BOTTOM LINE*/\n        SelectObject(hDC, hPen);\n        MoveToEx(hDC, 0, 26, 0);\n        LineTo(hDC, 212, 26);\n\n        /*DRAW TEXT*/\n        SetBkColor(hDC, RGB(67, 156, 70));\n        SetTextColor(hDC, RGB(255, 255, 255));\n        SelectObject(hDC, hTahoma_Regular);\n\n        TextOut(hDC, 83, 2, L\"Update\", 7);\n\n        /*FREE GDI MEMORY*/\n        DeleteObject(bg);\n        DeleteObject(hTahoma_Regular);\n        DeleteObject(hPen);\n    }\n}\n\n...\n</code></pre>\n\n<p>Sorry for my english =). How to fix that issue?</p>\n"}, {"tags": ["javascript", "c++", "canvas", "glfw", "emscripten"], "answers": [{"tags": [], "owner": {"reputation": 4817, "user_id": 513034, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/29ebc95bcc5d5aec8ad0d583e0d69aa1?s=128&d=identicon&r=PG", "display_name": "pandoragami", "link": "https://stackoverflow.com/users/513034/pandoragami"}, "is_accepted": true, "score": 0, "last_activity_date": 1535586183, "creation_date": 1535586183, "answer_id": 52087436, "question_id": 52077995, "link": "https://stackoverflow.com/questions/52077995/basic-setup-for-glfw-causes-a-runtime-error-with-regards-to-eventlistener-in-ems/52087436#52087436", "title": "Basic setup for glfw causes a runtime error with regards to eventlistener in emscripten generated js file", "body": "<p>I managed to reverse engineer a working example and base my answer on it so this is the working code below that compiles fine and doesn't give any errors, just two warnings from the JavaScript file. </p>\n\n<p>emcc -std=c++11 glfw.cpp -o glfw.js  -s USE_WEBGL2=3 -s FULL_ES3=3 -s USE_GLFW=3 -s WASM=3</p>\n\n<pre><code>   &lt;!doctype html&gt;\n&lt;html lang=\"en-us\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"&gt;\n    &lt;title&gt;Emscripten-Generated Code&lt;/title&gt;\n    &lt;style&gt;\n      body \n      {\n        font-family: arial;\n        margin: 0;\n        padding: none;\n      }\n\n      .emscripten { padding-right: 0; margin-left: auto; margin-right: auto; display: block; }\n      div.emscripten { text-align: center; }      \n      div.emscripten_border { border: 1px solid black; } \n      canvas.emscripten { border: 0px none; background-color: black; }\n\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;    \n    &lt;canvas class=\"emscripten\" id=\"canvas\" oncontextmenu=\"event.preventDefault()\"&gt;&lt;/canvas&gt;\n    &lt;script type='text/javascript'&gt;     \n\n      var Module = \n      {        \n        canvas: (function() {\n          var canvas = document.getElementById('canvas');      \n          canvas.addEventListener(\"webglcontextlost\", function(e) { alert('WebGL context lost. You will need to reload the page.'); e.preventDefault(); }, false);\n\n          return canvas;\n        })()\n      };    \n\n    &lt;/script&gt;\n    &lt;script async type=\"text/javascript\" src=\"glfw.js\"&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>The bind.h isn't really needed except for an error with the namespace if it's not included.</p>\n\n<pre><code>#include &lt;emscripten/emscripten.h&gt;\n#include &lt;emscripten/bind.h&gt;\n\n#define GLFW_INCLUDE_ES3\n#include &lt;GLFW/glfw3.h&gt;\n#include &lt;GLES3/gl3.h&gt;\nusing namespace emscripten;\n\nint main()\n{\n // Initialise GLFW\n    if( !glfwInit() )\n    {\n\n        EM_ASM_({\n          console.log(' failed: ');\n        }, 0);  \n    }\n\n    EM_ASM_({\n      console.log(' end initialization: ');\n    }, 0);  \n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 4817, "user_id": 513034, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/29ebc95bcc5d5aec8ad0d583e0d69aa1?s=128&d=identicon&r=PG", "display_name": "pandoragami", "link": "https://stackoverflow.com/users/513034/pandoragami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 52087436, "answer_count": 1, "score": 0, "last_activity_date": 1535586183, "creation_date": 1535547271, "question_id": 52077995, "link": "https://stackoverflow.com/questions/52077995/basic-setup-for-glfw-causes-a-runtime-error-with-regards-to-eventlistener-in-ems", "title": "Basic setup for glfw causes a runtime error with regards to eventlistener in emscripten generated js file", "body": "<p>To make a long story short I tried to create the simplest possible setup for a an opengl c++ demo and the problem I have seems to be related to the\nthe initialization of the canvas with regards to the eventlistener that is found in the javascript wrapper for the wasm file. I'm new to this so I'll just post \nthe code in cpp, the html file, and the command line used to compile the project plus the error in chromium.</p>\n\n<p>This is the glfw.cpp</p>\n\n<pre><code>#include &lt;emscripten/emscripten.h&gt;\n#include &lt;emscripten/bind.h&gt;\nusing namespace emscripten;\n\n#define GLFW_INCLUDE_ES3\n\n#include &lt;GLFW/glfw3.h&gt;\n#include &lt;GLES3/gl3.h&gt;\n\n\nvoid initialize()\n{\n // Initialise GLFW\n    if( !glfwInit() )\n    {\n\n        EM_ASM_({\n          console.log(' failed: ');\n        }, 0);  \n    }\n\n    EM_ASM_({\n      console.log(' end initialization: ');\n    }, 0);  \n}\nEMSCRIPTEN_BINDINGS(glfw) \n{   \n    function(\"initialize\", &amp;initialize);\n}\n</code></pre>\n\n<p>This is the glfw.html</p>\n\n<pre><code>&lt;!doctype html&gt;\n&lt;html&gt; \n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;canvas id=\"canvas\" oncontextmenu=\"event.preventDefault()\" style = \"height: 100%; width: 100%; background-color:red;\"&gt;&lt;/canvas&gt;\n    &lt;script&gt;    \n        var Module = \n        {\n            canvas: function() \n            {\n                console.log(\"canvas\");\n                var canvas = document.getElementById('canvas');\n                canvas.addEventListener(\"webglcontextlost\", function(e) { alert('WebGL context lost. You will need to reload the page.'); e.preventDefault(); }, false);\n\n                return canvas;\n            },\n            onRuntimeInitialized: function() \n            {\n                Module.initialize();\n            }               \n        };  \n    &lt;/script&gt;\n    &lt;script type=\"text/javascript\" src=\"glfw.js\"&gt; &lt;/script&gt; \n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>the command to compile the project</p>\n\n<p>emcc --bind -o glfw.js glfw.cpp -s USE_GLFW=3 </p>\n\n<p>and this is the complete error from the console.log in chromium</p>\n\n<pre><code>glfw.js:1645 Fetch finished loading: GET \"http://localhost:8080/glfw.wasm\".\ndoNativeWasm @ glfw.js:1645\nModule.asm @ glfw.js:1735\n(anonymous) @ glfw.js:4813\nglfw.js:1650 wasm streaming compile failed: TypeError: Module.canvas.addEventListener is not a function\n(anonymous) @ glfw.js:1650\nPromise.catch (async)\ndoNativeWasm @ glfw.js:1647\nModule.asm @ glfw.js:1735\n(anonymous) @ glfw.js:4813\nglfw.js:1651 falling back to ArrayBuffer instantiation\n(anonymous) @ glfw.js:1651\nPromise.catch (async)\ndoNativeWasm @ glfw.js:1647\nModule.asm @ glfw.js:1735\n(anonymous) @ glfw.js:4813\nglfw.js:1560 Fetch finished loading: GET \"http://localhost:8080/glfw.wasm\".\ngetBinaryPromise @ glfw.js:1560\ninstantiateArrayBuffer @ glfw.js:1633\n(anonymous) @ glfw.js:1652\nPromise.catch (async)\ndoNativeWasm @ glfw.js:1647\nModule.asm @ glfw.js:1735\n(anonymous) @ glfw.js:4813\nglfw.js:5228 Assertion failed: the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?\nglfw.js:5229 Assertion failed: the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?\nabort @ glfw.js:5229\nassert @ glfw.js:434\nreceiveInstantiatedSource @ glfw.js:1628\nPromise.then (async)\ninstantiateArrayBuffer @ glfw.js:1635\n(anonymous) @ glfw.js:1652\nPromise.catch (async)\ndoNativeWasm @ glfw.js:1647\nModule.asm @ glfw.js:1735\n(anonymous) @ glfw.js:4813\nglfw.js:1636 failed to asynchronously prepare wasm: abort(\"Assertion failed: the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?\") at Error\n    at jsStackTrace (http://localhost:8080/glfw.js:1033:13)\n    at stackTrace (http://localhost:8080/glfw.js:1050:12)\n    at abort (http://localhost:8080/glfw.js:5239:44)\n    at assert (http://localhost:8080/glfw.js:434:5)\n    at receiveInstantiatedSource (http://localhost:8080/glfw.js:1628:7)\n(anonymous) @ glfw.js:1636\nPromise.catch (async)\ninstantiateArrayBuffer @ glfw.js:1635\n(anonymous) @ glfw.js:1652\nPromise.catch (async)\ndoNativeWasm @ glfw.js:1647\nModule.asm @ glfw.js:1735\n(anonymous) @ glfw.js:4813\nglfw.js:5228 abort(\"Assertion failed: the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?\") at Error\n    at jsStackTrace (http://localhost:8080/glfw.js:1033:13)\n    at stackTrace (http://localhost:8080/glfw.js:1050:12)\n    at abort (http://localhost:8080/glfw.js:5239:44)\n    at assert (http://localhost:8080/glfw.js:434:5)\n    at receiveInstantiatedSource (http://localhost:8080/glfw.js:1628:7)\nglfw.js:5229 abort(\"Assertion failed: the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?\") at Error\n    at jsStackTrace (http://localhost:8080/glfw.js:1033:13)\n    at stackTrace (http://localhost:8080/glfw.js:1050:12)\n    at abort (http://localhost:8080/glfw.js:5239:44)\n    at assert (http://localhost:8080/glfw.js:434:5)\n    at receiveInstantiatedSource (http://localhost:8080/glfw.js:1628:7)\nabort @ glfw.js:5229\n(anonymous) @ glfw.js:1637\nPromise.catch (async)\ninstantiateArrayBuffer @ glfw.js:1635\n(anonymous) @ glfw.js:1652\nPromise.catch (async)\ndoNativeWasm @ glfw.js:1647\nModule.asm @ glfw.js:1735\n(anonymous) @ glfw.js:4813\nglfw.html:1 Uncaught (in promise) abort(\"abort(\\\"Assertion failed: the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?\\\") at Error\\n    at jsStackTrace (http://localhost:8080/glfw.js:1033:13)\\n    at stackTrace (http://localhost:8080/glfw.js:1050:12)\\n    at abort (http://localhost:8080/glfw.js:5239:44)\\n    at assert (http://localhost:8080/glfw.js:434:5)\\n    at receiveInstantiatedSource (http://localhost:8080/glfw.js:1628:7)\") at Error\n    at jsStackTrace (http://localhost:8080/glfw.js:1033:13)\n    at stackTrace (http://localhost:8080/glfw.js:1050:12)\n    at abort (http://localhost:8080/glfw.js:5239:44)\n    at http://localhost:8080/glfw.js:1637:9\n</code></pre>\n"}, {"tags": ["c++", "compilation", "libraries", "qmake", "static-linking"], "comments": [{"owner": {"reputation": 4270, "user_id": 2707359, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8754698c78ca3a082e1593688a9df99c?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/2707359/ilya"}, "edited": false, "score": 2, "creation_date": 1535546922, "post_id": 52077841, "comment_id": 91105477, "body": "Have you had a chance to read <a href=\"http://doc.qt.io/qt-5/linux-deployment.html\" rel=\"nofollow noreferrer\">Qt for Linux/X11 - Deployment</a>?"}, {"owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 0, "creation_date": 1535548916, "post_id": 52077841, "comment_id": 91106939, "body": "Are you cross-compiling from one computer to another? Is the architecture different? Is the OS different?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 1, "creation_date": 1535549041, "post_id": 52077841, "comment_id": 91107027, "body": "@IvanRubinson I doubt it.  The OP wants to create a single, standalone, executable that doesn&#39;t depend on any shared libraries.  His problem is that <code>gvc</code> is only available as a .so, not a .a file."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1535559902, "post_id": 52077841, "comment_id": 91114526, "body": "Did you consider shipping your source code to the target remote computer and build it there? BTW, you might not be legally allowed to link Qt statically (with its free software license)"}, {"owner": {"reputation": 163, "user_id": 10077673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35fff83398af8ae0fec59673b135b31d?s=128&d=identicon&r=PG&f=1", "display_name": "froz", "link": "https://stackoverflow.com/users/10077673/froz"}, "edited": false, "score": 0, "creation_date": 1535560195, "post_id": 52077841, "comment_id": 91114676, "body": "I linked Qt and all libraries as shared libraries in a specific folder as explained in Ilya&#39; s link. The idea is good to compile on the other computer. However I cant because it s a centos and a looooot of libraries are impossible to install on centos"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1535620447, "post_id": 52077841, "comment_id": 91136505, "body": "Build gvc as a static library yourself. (I suspect it&#39;s only the first of many libraries you will have to build). Alternatively, <a href=\"https://www.docker.com/resources/what-container\" rel=\"nofollow noreferrer\">docker.com/resources/what-container</a>"}], "owner": {"reputation": 163, "user_id": 10077673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35fff83398af8ae0fec59673b135b31d?s=128&d=identicon&r=PG&f=1", "display_name": "froz", "link": "https://stackoverflow.com/users/10077673/froz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 368, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535618791, "creation_date": 1535546744, "last_edit_date": 1535618791, "question_id": 52077841, "link": "https://stackoverflow.com/questions/52077841/compile-c-application-standalone-with-qt-creator", "title": "Compile c++ application standalone with Qt creator", "body": "<p>I am new in the community and I would like to ask a question.\nI have written an application in c++ with QT that I can compile and use on my linux distribution.\nHowever, I cannot use the binary file on another computer which is normal because the libraries are different.\nUsing the ldd command on my aplication, I see that shared libraries are the following:</p>\n\n<pre><code>    linux-vdso.so.1 (0x00007ffee0fee000)\n    libgvc.so.6 =&gt; /usr/lib/libgvc.so.6 (0x00007f2124aea000)\n    libcgraph.so.6 =&gt; /usr/lib/libcgraph.so.6 (0x00007f21248d4000)\n    libcdt.so.5 =&gt; /usr/lib/libcdt.so.5 (0x00007f21246cd000)\n    libQt5PrintSupport.so.5 =&gt; /opt/Qt5.9.1/5.9.1/gcc_64/lib/libQt5PrintSupport.so.5 (0x00007f212445f000)\n    libQt5Widgets.so.5 =&gt; /opt/Qt5.9.1/5.9.1/gcc_64/lib/libQt5Widgets.so.5 (0x00007f2123c2e000)\n    libQt5Gui.so.5 =&gt; /opt/Qt5.9.1/5.9.1/gcc_64/lib/libQt5Gui.so.5 (0x00007f2123480000)\n    libQt5Core.so.5 =&gt; /opt/Qt5.9.1/5.9.1/gcc_64/lib/libQt5Core.so.5 (0x00007f2122d46000)\n    libGL.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libGL.so.1 (0x00007f2122ad4000)\n    libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f21228b7000)\n    libstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f2122535000)\n    libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f2122231000)\n    libgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f212201a000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f2121c7b000)\n    libltdl.so.7 =&gt; /usr/lib/x86_64-linux-gnu/libltdl.so.7 (0x00007f2121a71000)\n    libxdot.so.4 =&gt; /usr/lib/libxdot.so.4 (0x00007f212186b000)\n    libpathplan.so.4 =&gt; /usr/lib/libpathplan.so.4 (0x00007f2121663000)\n    libexpat.so.1 =&gt; /lib/x86_64-linux-gnu/libexpat.so.1 (0x00007f2121439000)\n    libz.so.1 =&gt; /lib/x86_64-linux-gnu/libz.so.1 (0x00007f212121f000)\n    libicui18n.so.56 =&gt; /opt/Qt5.9.1/5.9.1/gcc_64/lib/libicui18n.so.56 (0x00007f2120d86000)\n    libicuuc.so.56 =&gt; /opt/Qt5.9.1/5.9.1/gcc_64/lib/libicuuc.so.56 (0x00007f21209ce000)\n    libicudata.so.56 =&gt; /opt/Qt5.9.1/5.9.1/gcc_64/lib/libicudata.so.56 (0x00007f211efeb000)\n    libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f211ede7000)\n    libgthread-2.0.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libgthread-2.0.so.0 (0x00007f211ebe5000)\n    libglib-2.0.so.0 =&gt; /lib/x86_64-linux-gnu/libglib-2.0.so.0 (0x00007f211e8d1000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007f2125102000)\n    libxcb-dri3.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libxcb-dri3.so.0 (0x00007f211e6ce000)\n    libxcb-present.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libxcb-present.so.0 (0x00007f211e4cb000)\n    libxcb-sync.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libxcb-sync.so.1 (0x00007f211e2c4000)\n    libxshmfence.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libxshmfence.so.1 (0x00007f211e0c2000)\n    libglapi.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libglapi.so.0 (0x00007f211de93000)\n    libXext.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libXext.so.6 (0x00007f211dc81000)\n    libXdamage.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libXdamage.so.1 (0x00007f211da7e000)\n    libXfixes.so.3 =&gt; /usr/lib/x86_64-linux-gnu/libXfixes.so.3 (0x00007f211d878000)\n    libX11-xcb.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libX11-xcb.so.1 (0x00007f211d676000)\n    libX11.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libX11.so.6 (0x00007f211d336000)\n    libxcb.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libxcb.so.1 (0x00007f211d10e000)\n    libxcb-glx.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libxcb-glx.so.0 (0x00007f211cef3000)\n    libxcb-dri2.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libxcb-dri2.so.0 (0x00007f211ccee000)\n    libXxf86vm.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libXxf86vm.so.1 (0x00007f211cae8000)\n    libdrm.so.2 =&gt; /usr/lib/x86_64-linux-gnu/libdrm.so.2 (0x00007f211c8d8000)\n    libpcre.so.3 =&gt; /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007f211c665000)\n    libXau.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libXau.so.6 (0x00007f211c461000)\n    libXdmcp.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libXdmcp.so.6 (0x00007f211c25b000)\n    libbsd.so.0 =&gt; /lib/x86_64-linux-gnu/libbsd.so.0 (0x00007f211c045000)\n    librt.so.1 =&gt; /lib/x86_64-linux-gnu/librt.so.1 (0x00007f211be3d000)\n</code></pre>\n\n<p>I would like to include these libraries in my application to be able to use it on another computer.</p>\n\n<p>I don't know if i have to use it as static or shared and I do not care, I just want it works :).</p>\n\n<p>I have tried adding them in my .pro file on QTcreator by the following way (examples with libgvc):</p>\n\n<pre><code>unix:!macx: LIBS += -L$$PWD/../../../../usr/lib/ -lgvc\nINCLUDEPATH += $$PWD/../../../../usr/lib\nDEPENDPATH += $$PWD/../../../../usr/lib\n</code></pre>\n\n<p>The compilation goes well. However, it still does not work on another computer like if libraries were not included in the binary file.</p>\n\n<p>I also tried to add the following commands:</p>\n\n<pre><code>QMAKE_LFLAGS += -static\nLIBS +=-Wl,-Bstatic\n</code></pre>\n\n<p>But in this case, I get an error message during compilation</p>\n\n<pre><code>Cannot find -lgvc\n</code></pre>\n\n<p>Do you have an idea of how I can compile my program as standalone on Linux with Qt creator?</p>\n"}, {"tags": ["c++", "arrays", "stack", "variable-length-array"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 10, "creation_date": 1535546633, "post_id": 52077767, "comment_id": 91105256, "body": "Because you didn&#39;t disable compiler extensions."}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 5, "creation_date": 1535546648, "post_id": 52077767, "comment_id": 91105271, "body": "The first was never originally valid in C or C++. In 1999 it was added to C, and some compilers will support it in C++ too. The compiler can add code to adjust the size of the stack when the array definition is reached. In the second case, no size is provided even at runtime."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1535547864, "post_id": 52077767, "comment_id": 91106189, "body": "see <a href=\"https://stackoverflow.com/a/21273849/1708801\">Does \u201cint size = 10;\u201d yield a constant expression?</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1535552749, "post_id": 52077767, "comment_id": 91109660, "body": "Note, this is an automatic array, not a static one"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1535555055, "post_id": 52077767, "comment_id": 91111374, "body": "@Deduplicator Your edit kindof invalidated the question because it is not as surprising to determine automatic object sizes at run time..."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1535555386, "post_id": 52077767, "comment_id": 91111655, "body": "@PeterA.Schneider Everyone handled that as just using wrong terminology which wasn&#39;t even worth pointing out. But feel free to Change those two words back, leaving only the rest."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1535556618, "post_id": 52077767, "comment_id": 91112510, "body": "@Deduplicator Well, he claims it was allocated at compile time which is surely not the case with automatic objects."}, {"owner": {"reputation": 1101, "user_id": 2011041, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e432d8717d8483df5f3ed3de5d02d4ce?s=128&d=identicon&r=PG", "display_name": "Floella", "link": "https://stackoverflow.com/users/2011041/floella"}, "edited": false, "score": 0, "creation_date": 1535573114, "post_id": 52077767, "comment_id": 91120823, "body": "Now I&#39;m confused... Why exactly is this not a static array and what is an automatic array?"}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 19, "last_activity_date": 1535546647, "creation_date": 1535546647, "answer_id": 52077805, "question_id": 52077767, "link": "https://stackoverflow.com/questions/52077767/why-is-it-allowed-to-declare-an-automatic-array-with-size-depending-on-user-inpu/52077805#52077805", "title": "Why is it allowed to declare an automatic array with size depending on user input?", "body": "<p>It's <em>not</em>. C++ doesn't have <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"noreferrer\">variable-length arrays</a>, though some compilers allow it as an <em>extension</em> of the language.</p>\n"}, {"tags": [], "owner": {"reputation": 347, "user_id": 6667472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35bc5e0732cddae25fba8e310b3fca82?s=128&d=identicon&r=PG&f=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/6667472/carsten"}, "is_accepted": false, "score": 20, "last_activity_date": 1553504893, "last_edit_date": 1553504893, "creation_date": 1535551293, "answer_id": 52079299, "question_id": 52077767, "link": "https://stackoverflow.com/questions/52077767/why-is-it-allowed-to-declare-an-automatic-array-with-size-depending-on-user-inpu/52079299#52079299", "title": "Why is it allowed to declare an automatic array with size depending on user input?", "body": "<p>You are apparently not aware of the GNU GCC extension <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html\" rel=\"nofollow noreferrer\">Arrays of Variable Length</a>. Therefore your first code compiles.</p>\n\n<p>The error message is something different. You have to specify the array length.</p>\n\n<p><code>gcc</code> has the <a href=\"http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html\" rel=\"nofollow noreferrer\"><code>-pedantic</code></a> switch - enabling this switch the compiler will report your first code as invalid:</p>\n\n<blockquote>\n  <p>warning: ISO C++ forbids variable length array \u2018array\u2019</p>\n</blockquote>\n\n<p>Read also this thread <a href=\"https://stackoverflow.com/questions/2855121/what-is-the-purpose-of-using-pedantic-in-gcc-g-compiler\">What is the purpose of using -pedantic in GCC/G++ compiler?</a></p>\n\n<p>Use very carefully compiler extensions because should you port your code to another compiler then you are in <em>big trouble</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1535555619, "post_id": 52080660, "comment_id": 91111850, "body": "An arguably <i>better</i> alternative in <code>std::vector</code>, which is safer, and problems integrating dynamic-sized types into the type-system."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1535556454, "post_id": 52080660, "comment_id": 91112389, "body": "@Deduplicator I thought I said that part with vector ..."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1535557320, "post_id": 52080660, "comment_id": 91113004, "body": "Hm. Perhaps I should have emphasized the <i>arguably</i>: It&#39;s safer but much more expensive. And anyway, the real kicker is the type-system."}], "tags": [], "owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1535554928, "creation_date": 1535554928, "answer_id": 52080660, "question_id": 52077767, "link": "https://stackoverflow.com/questions/52077767/why-is-it-allowed-to-declare-an-automatic-array-with-size-depending-on-user-inpu/52080660#52080660", "title": "Why is it allowed to declare an automatic array with size depending on user input?", "body": "<p>[This answers the original version of the question which asked about a static array; Deduplicator corrected this misconception, but now the question is missing a part.]</p>\n\n<p>If your assumption that this piece of code defined a static array were correct, you'd be wondering for a good reason indeed: Something that is determined at <em>compile time,</em> like data with static storage duration, can obviously not depend on user input at <em>run time.</em> This truism is independent of any specific language.</p>\n\n<p>The array defined in your code snippet has, by contrast, <em>automatic</em> storage duration, vulgo is created on the stack. A complete minimal working example would have made the case clearer: It would have shown that the code is in a function.</p>\n\n<p>Objects with automatic storage duration can be created as needed at run time; there is no logical problem preventing that, which should fix your general headache ;-).</p>\n\n<p>But note that, as some programmer dude correctly remarked, standard C++ nevertheless does not permit the definition of arrays whose size is not known at compile time; standard C does though, since C99. The rationale for C++ no following that amendment is that C++ provides better means for the use case, like the vector template. gcc, which is the compiler used in MinGW, permits this as an extension (and why not &mdash; it's available in the compiler anyway).</p>\n"}], "owner": {"reputation": 1101, "user_id": 2011041, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e432d8717d8483df5f3ed3de5d02d4ce?s=128&d=identicon&r=PG", "display_name": "Floella", "link": "https://stackoverflow.com/users/2011041/floella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1198, "favorite_count": 0, "closed_date": 1535558900, "answer_count": 3, "score": 15, "last_activity_date": 1553504893, "creation_date": 1535546543, "last_edit_date": 1535554621, "question_id": 52077767, "link": "https://stackoverflow.com/questions/52077767/why-is-it-allowed-to-declare-an-automatic-array-with-size-depending-on-user-inpu", "closed_reason": "Duplicate", "title": "Why is it allowed to declare an automatic array with size depending on user input?", "body": "<p>I'm using MinGW to compile for C++11 and I found out that this doesn't throw an error:</p>\n\n<pre><code>int S;\ncin&gt;&gt;S;\nchar array[S];\n</code></pre>\n\n<p>While this does (\"storage size of 'array' isn't known\"):</p>\n\n<pre><code>char array[];\n</code></pre>\n\n<p>To me, the size is also unknown in the first case, as it depends on what the user input is.</p>\n\n<p>As far as I knew, automatic arrays are allocated at compile time in stack memory. So why wouldn't the first example fail?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "edited": false, "score": 0, "creation_date": 1535548264, "post_id": 52077689, "comment_id": 91106484, "body": "Is the code piece you shared being run every frame?"}, {"owner": {"reputation": 677, "user_id": 1418351, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7a7dba2123954dce6d12c48c0c74d785?s=128&d=identicon&r=PG", "display_name": "John_Sharp1318", "link": "https://stackoverflow.com/users/1418351/john-sharp1318"}, "edited": false, "score": 0, "creation_date": 1535550468, "post_id": 52077689, "comment_id": 91108002, "body": "Technical details rather than looping on your matrix you can directly do:      outputFile&lt;&lt;trans&lt;&lt;std::endl;  Another advise try to use a binary file rather than a text file. The fact <code>MyFile.txt</code> does contains only a scalar mean that the variable <code>trans</code> does only contains a single scalar.  Maybe you should take a look to that."}, {"owner": {"reputation": 103, "user_id": 10121783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b83b0334602ecf3d2efe956dd9cb12c?s=128&d=identicon&r=PG&f=1", "display_name": "slayer2309", "link": "https://stackoverflow.com/users/10121783/slayer2309"}, "reply_to_user": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "edited": false, "score": 0, "creation_date": 1535550941, "post_id": 52077689, "comment_id": 91108370, "body": "yes the snippet is under a previous while loop. So it runs every frame. If that&#39;s what you meant. @unlut"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 10121783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b83b0334602ecf3d2efe956dd9cb12c?s=128&d=identicon&r=PG&f=1", "display_name": "slayer2309", "link": "https://stackoverflow.com/users/10121783/slayer2309"}, "edited": false, "score": 0, "creation_date": 1535552265, "post_id": 52079277, "comment_id": 91109317, "body": "Thank you !! It helped. You saved me a lot of hassle."}], "tags": [], "owner": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "is_accepted": false, "score": 0, "last_activity_date": 1535551249, "creation_date": 1535551249, "answer_id": 52079277, "question_id": 52077689, "link": "https://stackoverflow.com/questions/52077689/writing-pose-values-real-time-using-opencv-to-a-text-file/52079277#52079277", "title": "Writing Pose values real time using Opencv to a text file", "body": "<p>First, lets make sure this is not just a c++ problem, instead of override myFile.txt in each frame, just append new information to file. Change from  </p>\n\n<pre><code>outputFile.open( \"myFile.txt\", std::ios::out );  \n</code></pre>\n\n<p>to  </p>\n\n<pre><code>outputFile.open( \"myFile.txt\", std::fstream::out | std::fstream::app);  \n</code></pre>\n\n<p>If problem still occurs I will edit this answer.</p>\n"}], "owner": {"reputation": 103, "user_id": 10121783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b83b0334602ecf3d2efe956dd9cb12c?s=128&d=identicon&r=PG&f=1", "display_name": "slayer2309", "link": "https://stackoverflow.com/users/10121783/slayer2309"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535563974, "creation_date": 1535546335, "last_edit_date": 1535563974, "question_id": 52077689, "link": "https://stackoverflow.com/questions/52077689/writing-pose-values-real-time-using-opencv-to-a-text-file", "title": "Writing Pose values real time using Opencv to a text file", "body": "<p>Hi all I am working on camera pose estimation of a moving camera. I would like to store the values of the distance between the camera and marker real time to a text file so that I can validate my algorithm.</p>\n\n<p>So far I tried </p>\n\n<pre><code>  std::fstream outputFile;\n  outputFile.open( \"myFile.txt\", std::ios::out );\n  outputFile &lt;&lt; trans.rows &lt;&lt; std::endl;\n  outputFile &lt;&lt; trans.cols &lt;&lt; std::endl;\n  for(int c = 0; c&lt;trans.rows; c++)\n      {\n          for(int j = 0; j &lt; trans.cols; j++)\n                  {\n                    outputFile &lt;&lt; trans.at&lt;float&gt;(c,j)&lt;&lt;std::endl;\n                  }\n     }\n outputFile.close();\n\n\n FileStorage fs(\"newfile.txt\",FileStorage::WRITE);\n while(true)\n     fs &lt;&lt; \"mat1\" &lt;&lt; x22  ;//the distance value\n</code></pre>\n\n<p>\"myfile.txt\" gives just one value which is not what I want. I want the value for every frame real time. \"newfile.txt\" from while loop is alright but the program crashes when I use it.\nHow do I go about it?</p>\n\n<p>Thank you </p>\n"}, {"tags": ["c++", "glade", "gtkmm3"], "answers": [{"tags": [], "owner": {"reputation": 251, "user_id": 10285173, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Tb_TzigmAAU/AAAAAAAAAAI/AAAAAAAAAEQ/BDrXAAChLKk/photo.jpg?sz=128", "display_name": "Bret Joseph", "link": "https://stackoverflow.com/users/10285173/bret-joseph"}, "is_accepted": true, "score": 0, "last_activity_date": 1535624056, "creation_date": 1535624056, "answer_id": 52094526, "question_id": 52077648, "link": "https://stackoverflow.com/questions/52077648/how-to-set-theme-from-css-resource-for-multiple-glade-widgets-in-gtkmm3/52094526#52094526", "title": "How to set theme from css resource for multiple glade widgets in gtkmm3", "body": "<p>After revisiting my code. I tried to copy the statements for</p>\n\n<pre><code>try{}\ncatch {}\n</code></pre>\n\n<p>This is how I was able to get it to work</p>\n\n<pre><code>refBuilder-&gt;get_widget(\"winFrame\", appWindow);\nif(appWindow)\n{\n    try\n    {\n        refProvider-&gt;load_from_resource(\"/res/default-theme.css\");\n        Glib::RefPtr&lt;Gdk::Screen&gt; refScreen = appWindow-&gt;get_screen();\n        refStyleContext-&gt;add_provider_for_screen(refScreen, refProvider, GTK_STYLE_PROVIDER_PRIORITY_APPLICATION);\n    }\n    catch(const Gio::ResourceError&amp; ex)\n    {\n        cerr &lt;&lt; \"ResourceError: \" &lt;&lt; ex.what() &lt;&lt; endl;\n        return 1;\n    }\n    catch(const Glib::MarkupError&amp; ex)\n    {\n        cerr &lt;&lt; \"MarkupError: \" &lt;&lt; ex.what() &lt;&lt; endl;\n        return 1;\n    }\n    catch(const Gtk::CssProviderError&amp; ex)\n    {\n        cerr &lt;&lt; \"CssProviderError: \" &lt;&lt; ex.what() &lt;&lt; endl;\n        return 1;\n    }\n    catch(const Glib::Error&amp; ex)\n    {\n        cerr &lt;&lt; \"GlibError: \" &lt;&lt; ex.what() &lt;&lt; endl;\n        return 1;\n    };\n\n};\n</code></pre>\n\n<p>I also found out that my css file format had issues. I got help from <a href=\"https://developer.gnome.org/gtk3/stable/chap-css-overview.html\" rel=\"nofollow noreferrer\">GTK+ CSS Reference</a>. My glade has a GtkBox after the windows so new css has </p>\n\n<pre><code>box * {\nbackground-color: teal;\nfont: italic bold 14px Ani;\n}\n</code></pre>\n\n<p>Which was applied to child under the GtkBox\nSaddly I'm still working on getting borders around widgets to work but atleast now I know the css theme is being applied</p>\n"}], "owner": {"reputation": 251, "user_id": 10285173, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Tb_TzigmAAU/AAAAAAAAAAI/AAAAAAAAAEQ/BDrXAAChLKk/photo.jpg?sz=128", "display_name": "Bret Joseph", "link": "https://stackoverflow.com/users/10285173/bret-joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 52094526, "answer_count": 1, "score": 0, "last_activity_date": 1535624056, "creation_date": 1535546242, "last_edit_date": 1535622871, "question_id": 52077648, "link": "https://stackoverflow.com/questions/52077648/how-to-set-theme-from-css-resource-for-multiple-glade-widgets-in-gtkmm3", "title": "How to set theme from css resource for multiple glade widgets in gtkmm3", "body": "<p>I did all the includes and used name spaces</p>\n\n<pre><code>#include \"include/main.h\"\n#include &lt;iostream&gt;\n#include &lt;gtkmm.h&gt;\n\nusing namespace std;\nusing namespace Gtk;\n\nWindow* appWindow = nullptr;\n</code></pre>\n\n<p>Loaded the glade file and tried to load a theme for widgets</p>\n\n<pre><code>    auto refBuilder = Builder::create();\n    auto refProvider = CssProvider::create();\n    auto refStyleContext = StyleContext::create();\n\ntry\n{\n    refBuilder-&gt;add_from_resource(\"/res/gui.glade\");\n    refProvider-&gt;load_from_resource(\"/res/theme.css\");\n}\n</code></pre>\n\n<p>Caught errors. Which it does. It gives an error when it cannnot load either of the resources.</p>\n\n<pre><code>catch(const Glib::FileError&amp; ex)\n{\n    cerr &lt;&lt; \"FileError: \" &lt;&lt; ex.what() &lt;&lt; endl;\n    return 1;\n}\ncatch(const Glib::MarkupError&amp; ex)\n{\n    cerr &lt;&lt; \"MarkupError: \" &lt;&lt; ex.what() &lt;&lt; endl;\n    return 1;\n}\ncatch(const Gtk::BuilderError&amp; ex)\n{\n    cerr &lt;&lt; \"BuilderError: \" &lt;&lt; ex.what() &lt;&lt; endl;\n    return 1;\n}\n</code></pre>\n\n<p>Now I cant seem to apply the css for my widgets</p>\n\n<pre><code>refBuilder-&gt;get_widget(\"winFrame\", appWindow);\nif(appWindow)\n{\n    Glib::RefPtr&lt;Gdk::Screen&gt;refScreen = appWindow-&gt;get_screen();\n\n    refBuilder-&gt;get_widget(\"quit_Item\", quitItem);\n    refStyleContext-&gt;add_provider_for_screen(refScreen, refProvider, GTK_STYLE_PROVIDER_PRIORITY_USER);\n\n    if(quitItem)\n    {\n        quitItem-&gt;signal_activate().connect( sigc::ptr_fun(on_button_clicked) );\n    };\n\n};\napp-&gt;run(*appWindow);\ndelete appWindow;\nreturn 0;\n</code></pre>\n\n<p>I have the following css which i used to try, but not even a button changed colour</p>\n\n<pre><code>.recordButton {\ncolor: red;\nbackground: blue;\nborder-color: red;\n}\n\nGtkBox{\nbackground: #669999;\ntext-shadow: 1px 1px 5px black;\nbox-shadow: 0px 0px 5px black;\nborder: 1px solid black;\n}\nButon{\nbackground: #669999;\ntext-shadow: 1px 1px 5px black;\nbox-shadow: 0px 0px 5px black;\nborder: 1px solid black;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1535546073, "post_id": 52077522, "comment_id": 91104852, "body": "The pointer-to-pointer function doesn&#39;t copy <code>ptr</code> either."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 3, "creation_date": 1535546354, "post_id": 52077522, "comment_id": 91105046, "body": "in C++ it&#39;s preferred to not use raw pointers"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2176127"}, "edited": false, "score": 0, "creation_date": 1535546537, "post_id": 52077522, "comment_id": 91105185, "body": "There is no difference in performance, references are pointers in the end"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1535547052, "post_id": 52077522, "comment_id": 91105576, "body": "@user2176127 The &quot;As-If&quot; rule would be a better reference for there being no difference in performance. References don&#39;t have to be implemented as pointers, and pointers can sometimes be &quot;dereferenced&quot; by the compiler"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1535554454, "post_id": 52077522, "comment_id": 91110929, "body": "<code>ptr*</code> names a type; <code>ptr**</code> is a pointer to that type, and <code>ptr*&amp;</code> is a reference to that type. This question is exactly the same as asking about the difference between <code>int*</code> and <code>int&amp;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1535546252, "creation_date": 1535546252, "answer_id": 52077655, "question_id": 52077522, "link": "https://stackoverflow.com/questions/52077522/is-there-a-difference-or-preferred-between-ptr-and-ptr-in-c-when-calling/52077655#52077655", "title": "Is there a difference, or preferred between ptr** and ptr*&amp; in C++ when calling functions?", "body": "<p>It's largely a matter of personal taste.</p>\n\n<p>That said, when calling <code>void change(int** ptr)</code>, because you'd tend to pass the address of something using <code>&amp;</code>, it is clearer at the calling site that the \"something\" <em>could</em> be modified by the function. If you use the <code>int*&amp; ptr</code> overload, it's not as clear as the calling syntax is identical for pass-by-value and pass-by-reference.</p>\n\n<p>Aside from the above, I tend to use pointers as function parameters if <code>nullptr</code> is allowed, and references if not.</p>\n"}, {"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 3, "last_activity_date": 1535547316, "last_edit_date": 1535547316, "creation_date": 1535546280, "answer_id": 52077667, "question_id": 52077522, "link": "https://stackoverflow.com/questions/52077522/is-there-a-difference-or-preferred-between-ptr-and-ptr-in-c-when-calling/52077667#52077667", "title": "Is there a difference, or preferred between ptr** and ptr*&amp; in C++ when calling functions?", "body": "<p>You can have a null pointer, but not a null reference. </p>\n\n<p>You can supply the first with <code>nullptr</code>, and it will compile<sup>1</sup>, because there is an implicit conversion from <code>std::nullptr_t</code> to <code>int**</code>. If you tried to supply the second with <code>nullptr</code>, it will fail. The best match would be the conversion <code>std::nullptr_t</code> to <code>int*</code>, but you can't bind a mutable reference to a temporary.</p>\n\n<p>I go over various situations for different ways of parameter passing <a href=\"https://stackoverflow.com/a/51399163/2610810\">in this answer</a>, which also includes object ownership considerations (with <code>std::unique_ptr</code>)</p>\n\n<p><sub>1. The behaviour will be undefined, because you dereference it.</sub></p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1535551928, "last_edit_date": 1535551928, "creation_date": 1535546536, "answer_id": 52077764, "question_id": 52077522, "link": "https://stackoverflow.com/questions/52077522/is-there-a-difference-or-preferred-between-ptr-and-ptr-in-c-when-calling/52077764#52077764", "title": "Is there a difference, or preferred between ptr** and ptr*&amp; in C++ when calling functions?", "body": "<blockquote>\n  <p>Is there a difference ... between ptr** and ptr*&amp; ...</p>\n</blockquote>\n\n<p>Yes. The former is a pointer, to an object of type <code>ptr*</code>, while the latter is a reference to an object of type <code>ptr*</code>.</p>\n\n<blockquote>\n  <p>or preferred ...</p>\n\n<pre><code>void change(int** ptr) {\n    **ptr = 50;\n    *ptr = nullptr;\n}\n\nvoid change(int*&amp; ptr) {\n    *ptr = 50;\n    ptr = nullptr;\n}\n</code></pre>\n</blockquote>\n\n<p>Advantages of a reference</p>\n\n<p>You'll find that the reference is implicitly indirected, which makes the syntax simpler and that usually helps readability. This is particularly important in case of reference / pointer to a pointer. Same advantage applies to getting a reference: You don't need to use the address-of operator.</p>\n\n<p>Another advantage is that a reference cannot be reassigned to refer to another object. This makes it simpler to read programs that use references, since you don't need to figure out whether a reference is reassigned within a long algorithm; You know that it isn't.</p>\n\n<p>Another advantage is that a reference cannot be null. Therefore you don't need to check for such eventuality within the function. If you pass null to the first example function, the behaviour would be undefined, which is a very bad thing.</p>\n\n<p>Disadvantages of a reference</p>\n\n<p>You'll find that the reference is implicitly indirected. This can be confusing to people who are familiar with only value types (C programmers).</p>\n\n<p>Another disadvantage is that a reference cannot be reassigned to refer to another object. This appears to not be a problem for your function since you don't need to refer to more than one object, but in general, there are situations where it would be useful.</p>\n\n<p>Another disadvantage is that a reference cannot be null. This appears to not be a problem for your function which is presumably never intended to handle such case. But in general, there are situations where you want to represent a referential relation to non-existing object.</p>\n\n<hr>\n\n<p>Preferences are personal, but in my opinion, the advantages of the reference outweigh the disadvantages, except when you need one of the features that are not possible (nullability, re-assignment)</p>\n"}], "owner": {"reputation": 675, "user_id": 9115056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/03b215b328c73e80b4ddf39ebc75a79d?s=128&d=identicon&r=PG&f=1", "display_name": "jjmcc", "link": "https://stackoverflow.com/users/9115056/jjmcc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 1, "accepted_answer_id": 52077667, "answer_count": 3, "score": 5, "last_activity_date": 1535551928, "creation_date": 1535545839, "question_id": 52077522, "link": "https://stackoverflow.com/questions/52077522/is-there-a-difference-or-preferred-between-ptr-and-ptr-in-c-when-calling", "title": "Is there a difference, or preferred between ptr** and ptr*&amp; in C++ when calling functions?", "body": "<p>Is there a difference or preferred way of altering a pointer in a function? Take this snippet for example</p>\n\n<pre><code>    void change(int** ptr) {\n        **ptr = 50;\n        *ptr = nullptr;\n    }\n\n    void change(int*&amp; ptr) {\n        *ptr = 50;\n        ptr = nullptr;\n    }\n\n    int main()\n    {\n        int a = 5;\n\n        int* ptr = &amp;a;\n        int** ptr2 = &amp;ptr;\n\n        std::cout &lt;&lt; \"value: \" &lt;&lt; a &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"value: \" &lt;&lt; ptr &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"value: \" &lt;&lt; ptr2 &lt;&lt; std::endl;\n\n        change(ptr2);\n        //change(ptr);\n\n        std::cout &lt;&lt; \"value: \" &lt;&lt; a &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"value: \" &lt;&lt; ptr &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"value: \" &lt;&lt; ptr2 &lt;&lt; std::endl;\n\n\n        system(\"pause\");\n\n    }\n</code></pre>\n\n<p>It seems like both of the change functions can achieve what I'm asking, but I'm not sure on the difference, other than the reference function doesn't create a copy of the pointer?</p>\n"}, {"tags": ["c++", "qt", "opencv3.0", "sift", "cmake-gui"], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 9705404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f2529e44ba2e9f996cc05840494394?s=128&d=identicon&r=PG&f=1", "display_name": "PowerNow", "link": "https://stackoverflow.com/users/9705404/powernow"}, "is_accepted": true, "score": 0, "last_activity_date": 1535704066, "creation_date": 1535704066, "answer_id": 52111432, "question_id": 52077410, "link": "https://stackoverflow.com/questions/52077410/missing-xfeatures2d-hpp-in-opencv2-folder/52111432#52111432", "title": "Missing xfeatures2d.hpp in opencv2 folder?", "body": "<p>For who is interested: The equivalent to VS+INSTALL project is mingw32-make install. The clue is the CMAKE_INSTALL_PREFIX in cmake where this files (headers/libs/dlls) are saved. Add to your Qt .pro file INCLUDEPATH += \\install\\include.</p>\n"}], "owner": {"reputation": 137, "user_id": 9705404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f2529e44ba2e9f996cc05840494394?s=128&d=identicon&r=PG&f=1", "display_name": "PowerNow", "link": "https://stackoverflow.com/users/9705404/powernow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1179, "favorite_count": 0, "accepted_answer_id": 52111432, "answer_count": 1, "score": 0, "last_activity_date": 1535704066, "creation_date": 1535545450, "question_id": 52077410, "link": "https://stackoverflow.com/questions/52077410/missing-xfeatures2d-hpp-in-opencv2-folder", "title": "Missing xfeatures2d.hpp in opencv2 folder?", "body": "<p>I just installed via cmake (OPENCV_EXTRA_MODULS_PATH) and mingw530 (Qt)</p>\n\n<ul>\n<li>opencv-3.4.2</li>\n<li>opencv_contrib-3.4.2</li>\n<li>mingw32-make</li>\n<li>mingw32-make install</li>\n</ul>\n\n<p>Filestructur is</p>\n\n<ul>\n<li>opencv/source</li>\n<li>opencv/build</li>\n<li>opencv/release (compile folder)</li>\n<li>opencv/contrib</li>\n</ul>\n\n<p>But if I try to insert </p>\n\n<p>#include \"opencv2/xfeatures2d.hpp\" </p>\n\n<p>it does not find it.</p>\n\n<p>The same problem is already descript here:\n<a href=\"http://answers.opencv.org/question/57397/cant-find-xfeatures2dhpp/\" rel=\"nofollow noreferrer\">http://answers.opencv.org/question/57397/cant-find-xfeatures2dhpp/</a></p>\n\n<p>But I don't understand the solution\n<strong>\"@Bhatt, on win, you will have to build the INSTALL project. this will copy headers/libs/dlls to your install folder\"</strong>.</p>\n\n<p>My fallback is to insert</p>\n\n<p>#include \"E:/PROGRAMS/opencv/opencv_contrib-3.4.2/modules/xfeatures2d/include/opencv2/xfeatures2d/nonfree.hpp\"</p>\n\n<p>then it works. Can someone explain me what's going wrong?</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1535545603, "post_id": 52077397, "comment_id": 91104534, "body": "Think about it. If it was a free non-member function, it would work fine."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 4, "creation_date": 1535545631, "post_id": 52077397, "comment_id": 91104551, "body": "When such code is compiled with GCC, the error it provides is more verbose: &quot;<i>\u2018static constexpr std::size_t FixedMatchResults::count()\u2019 called in a constant expression before its definition is complete</i>&quot;"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1535545883, "post_id": 52077397, "comment_id": 91104718, "body": "Could be a similar underlying issue to <a href=\"https://stackoverflow.com/questions/51959135/inline-static-member-variable/51959546#51959546\" title=\"inline static member variable\">stackoverflow.com/questions/51959135/&hellip;</a>  ... the compiler decides not to compile the function body until after the end of the class definition, so it doesn&#39;t &quot;know&quot; that <code>count()</code> is a constant expression yet. I&#39;m not sure if this is conforming or not"}], "answers": [{"tags": [], "owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "is_accepted": true, "score": 3, "last_activity_date": 1535547719, "last_edit_date": 1535547719, "creation_date": 1535546574, "answer_id": 52077781, "question_id": 52077397, "link": "https://stackoverflow.com/questions/52077397/why-does-stdarrayint-count-not-compile-if-count-is-a-constexpr-functio/52077781#52077781", "title": "Why does std::array&lt;int, count()&gt; not compile, if count() is a constexpr function?", "body": "<p>The body of the function is parsed after the complete struct definition. This is to allow you to potentially reference other members that you define after the function body.</p>\n\n<p>However this means that when the compiler parses <code>results</code> it doesn't have the body of the <code>count</code> function, so it can't run it.</p>\n\n<p>For a more detailed answer see this question: <a href=\"https://stackoverflow.com/questions/16493652/constexpr-not-working-if-the-function-is-declared-inside-class-scope\">constexpr not working if the function is declared inside class scope</a></p>\n"}], "owner": {"reputation": 2463, "user_id": 9261322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b650360d7c40aefdce125dcf8eb3ac37?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Starinsky", "link": "https://stackoverflow.com/users/9261322/alexey-starinsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "closed_date": 1535546760, "accepted_answer_id": 52077781, "answer_count": 1, "score": 7, "last_activity_date": 1535547719, "creation_date": 1535545395, "last_edit_date": 1535547411, "question_id": 52077397, "link": "https://stackoverflow.com/questions/52077397/why-does-stdarrayint-count-not-compile-if-count-is-a-constexpr-functio", "closed_reason": "Duplicate", "title": "Why does std::array&lt;int, count()&gt; not compile, if count() is a constexpr function?", "body": "<p>Why does the following C++ code not compile with VC2017?</p>\n\n<pre><code>struct FixedMatchResults\n{\n    static constexpr std::size_t count() { return 20; };\n\n    std::array&lt;int, count()&gt; results;\n};\n</code></pre>\n\n<p>The error is: </p>\n\n<blockquote>\n  <p>error C2975: '_Size': invalid template argument for 'std::array',\n  expected compile-time constant expression</p>\n</blockquote>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1535545103, "post_id": 52077274, "comment_id": 91104230, "body": "Do you have in mind a use case where it would matter?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 4, "creation_date": 1535545135, "post_id": 52077274, "comment_id": 91104253, "body": "Top-level const qualifiers on function arguments are discarded anyway (ie, <code>void foo(const int)</code> is identical to <code>void foo(int)</code>). So what difference would it make?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 4, "creation_date": 1535545168, "post_id": 52077274, "comment_id": 91104277, "body": "Not a duplicate - the title specifically excludes string literals, so a question about string literals literally cannot be a duplicate."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1535545948, "post_id": 52077274, "comment_id": 91104767, "body": "I <i>really</i> can&#39;t think of a way for this to make a difference, except for literally writing <code>decltype(42)</code>. Can you elaborate on what it would bring?"}, {"owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1535547229, "post_id": 52077274, "comment_id": 91105701, "body": "@Angew consider a template accepting a reference. <a href=\"https://stackoverflow.com/questions/52076660/template-accepts-const-but-not-literal/52076811#52076811\" title=\"template accepts const but not literal\">stackoverflow.com/questions/52076660/&hellip;</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1535547613, "post_id": 52077274, "comment_id": 91106000, "body": "Historical accident. In C, what you can and cannot modify was determined purely by the value category of the thing in question (lvalues are modifiable, rvalues are not), with a caveat that modifying a string literal (an lvalue) is UB, which is a typesystem wart. So when C++ tried to fix this, it added <code>const</code> to the type of string literals to make them statically non-modifiable. Other literals were statically non-modifiable to begin with, so no one felt there&#39;s a need to make them <code>const</code>."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1535559202, "post_id": 52077274, "comment_id": 91114169, "body": "@IvanRubinson I fail to see how this would help there, though. If the function accepts <code>T&amp;</code>, it probably modifies its argument (otherwise it could accept <code>const T &amp;</code>). Which means it would fail again for prvalues."}], "answers": [{"comments": [{"owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 0, "creation_date": 1535547136, "post_id": 52077480, "comment_id": 91105638, "body": "&quot;There&#39;s no way to modify a numeric literal value&quot; - So why isn&#39;t it <code>const</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 1, "creation_date": 1535547278, "post_id": 52077480, "comment_id": 91105740, "body": "@IvanRubinson Because you can&#39;t do <code>42 = 5</code>? There&#39;s simply no need to make numeric literals constant since they by their very nature already are. Once you store a numeric literal in a variable, you have a <b><i>copy</i></b> of the numeric literal, a copy that you can modify as much as you want, because it&#39;s no longer the original literal value."}, {"owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 0, "creation_date": 1535547446, "post_id": 52077480, "comment_id": 91105878, "body": "&quot;There&#39;s no need to make numeric literals constant since they by their very nature already are&quot; - That smells fishy. If it&#39;s <code>const</code> by its very nature, why isn&#39;t it <code>const</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 0, "creation_date": 1535547683, "post_id": 52077480, "comment_id": 91106045, "body": "@IvanRubinson It seems you&#39;re not listening. For the last time, once you put a numeric literal value into a variable, it is the <i>variable</i> you work with, not the literal itself! A numeric literal is a <a href=\"http://en.cppreference.com/w/cpp/language/value_category#prvalue\" rel=\"nofollow noreferrer\"><i>prvalue</i></a>, they can <i>never</i> be on the left side of an assignment. You can&#39;t get the address of (pointer to) a numeric literal, there is no way in the language to modify one."}, {"owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 0, "creation_date": 1535548057, "post_id": 52077480, "comment_id": 91106338, "body": "Literals have a type. An int literal has the type of int. If the literal can&#39;t be modified, why isn&#39;t its type const int (in addition to being a prvalue)?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 1, "creation_date": 1535549829, "post_id": 52077480, "comment_id": 91107563, "body": "@IvanRubinson - Because being a <b>pure rvalue</b> is enough. It&#39;s not an object, it&#39;s just a (nebulous) value that can be used to create an object."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1535545746, "creation_date": 1535545746, "answer_id": 52077480, "question_id": 52077274, "link": "https://stackoverflow.com/questions/52077274/why-are-literals-not-const-except-strings/52077480#52077480", "title": "Why are literals not const (except strings)?", "body": "<p>Remember that by default C++ is <em>pass by <strong>value</em></strong>, meaning values are <em>copied</em>.</p>\n\n<p>There's no way to modify a numeric literal value like 42, because all you have is a copy in a variable. The literal value itself doesn't even have to be stored in memory, the compiler could use it directly in the generated code.</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 5, "last_activity_date": 1535552124, "creation_date": 1535552124, "answer_id": 52079630, "question_id": 52077274, "link": "https://stackoverflow.com/questions/52077274/why-are-literals-not-const-except-strings/52079630#52079630", "title": "Why are literals not const (except strings)?", "body": "<p>The literal answer is probably because literals predate the addition of <code>const</code> to the language, so naturally they are not <code>const</code>.</p>\n\n<p>But the practical answer is - <code>const</code> prvalues are fundamentally strange things. You cannot create them from any of the fundamental types, but you can have a <code>const</code> prvalue of class type. But... why? Typically, we make things <code>const</code> to prevent further modifications right. But if it's a prvalue, it's not even a thing with identity - who is going to be there to observe its unintended modification? <code>const</code> prvalues prevent moving - because they're <code>const</code>, so you can't move from them, so its a premature pessimization. </p>\n\n<p>Note that the one thing that <em>could</em> go wrong, that a hypothetical <code>const</code> literal would prevent, is already explicitly forbidden by the language:</p>\n\n<pre><code>void foo(int&amp;);\nfoo(42); // error\n</code></pre>\n\n<p>But rather than making <code>42</code> <code>const</code>, the language made lvalue references non-<code>const</code> not allowed to bind to rvalues. </p>\n"}], "owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1535552124, "creation_date": 1535544982, "last_edit_date": 1535545352, "question_id": 52077274, "link": "https://stackoverflow.com/questions/52077274/why-are-literals-not-const-except-strings", "title": "Why are literals not const (except strings)?", "body": "<p>Literals are, in general, <code>prvalue</code>s.\nStrings are a special case, defined as an array of <code>char</code> (meaning <code>lvalue</code>).\nThis question is specifically about <em>not string</em> literals.</p>\n\n<p>Why are non-string literals not <code>const</code>?</p>\n\n<pre><code>foo(42); // passes foo an `int`, not a `const int`.\n</code></pre>\n\n<p>You can't modify a non-string literal, so doesn't it make sense for it to be <code>const</code>?</p>\n"}, {"tags": ["c++", "lambda", "c++14", "language-lawyer", "trailing-return-type"], "answers": [{"comments": [{"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 1, "creation_date": 1535545144, "post_id": 52077239, "comment_id": 91104259, "body": "Do you know maybe - why for c++11 this code does not compile? Your answer suggests that this default is here from the very beginning (what for lambda is C++11). Was that some fix ?"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 1, "creation_date": 1535545689, "post_id": 52077239, "comment_id": 91104594, "body": "@PiotrNycz, there was no <code>auto</code> return type for functions in C++11. In C++11 you can&#39;t write <code>auto foo() { return 4; }</code>. It&#39;s a C++14 feature."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 2, "creation_date": 1535546364, "post_id": 52077239, "comment_id": 91105054, "body": "@PiotrNycz - Bear in mind that the C++14 rule allows <code>decltype(auto)</code>, <code>auto&amp;&amp;</code>, <code>auto const&amp;</code> and so forth. The degenerate case is just not something worth bending backwards to disallow."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1535547424, "post_id": 52077239, "comment_id": 91105859, "body": "@StoryTeller that makes sense!  I see usages for <code>-&gt; auto const&amp;</code> and others. thanks for pointing out."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1535549472, "post_id": 52077239, "comment_id": 91107339, "body": "@PiotrNycz, <code>-&gt; decltype(auto)</code> and <code>-&gt; auto&amp;&amp;</code> can also be useful. Consider, for example, a lambda taking <code>auto&amp;&amp; var</code>."}], "tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": true, "score": 20, "last_activity_date": 1535608962, "last_edit_date": 1535608962, "creation_date": 1535544909, "answer_id": 52077239, "question_id": 52077143, "link": "https://stackoverflow.com/questions/52077143/what-is-the-usage-of-lambda-trailing-return-type-auto/52077239#52077239", "title": "What is the usage of lambda trailing return type auto?", "body": "<p>It is <code>auto</code> by default. The Standard, <a href=\"http://eel.is/c++draft/expr.prim.lambda#4\" rel=\"noreferrer\">[expr.prim.lambda]/4</a>, reads:</p>\n\n<blockquote>\n  <p>If a <em>lambda-expression</em> does not include a <em>lambda-declarator</em>, it is as if the <em>lambda-declarator</em> were <code>()</code>. The lambda return type is <code>auto</code>, which is replaced by the <em>trailing-return-type</em> if provided and/or deduced from <code>return</code> statements as described in [dcl.spec.auto].</p>\n</blockquote>\n\n<p><strong>My addition.</strong></p>\n\n<p>So, <code>-&gt; auto</code> itself is not useful. However, we can form other return types with <code>auto</code>, namely: <code>-&gt; auto&amp;</code>, <code>-&gt; const auto&amp;</code>, <code>-&gt; auto&amp;&amp;</code>, <code>-&gt; decltype(auto)</code>. Standard <a href=\"https://en.cppreference.com/w/cpp/language/auto\" rel=\"noreferrer\">rules</a> of return type deduction apply. One should bear in mind that <code>auto</code> is never deduced to be a reference type, so by default a lambda returns a non-reference type.</p>\n\n<p>A few (trivial) examples:</p>\n\n<pre><code>// 1.\nint foo(int);\nint&amp; foo(char);\n\nint x;\n\nauto lambda1 = [](auto&amp; x) { return x; };\nstatic_assert(std::is_same_v&lt;decltype(lambda1(x)), int&gt;);\n\nauto lambda2 = [](auto&amp; x) -&gt; auto&amp; { return x; };\nstatic_assert(std::is_same_v&lt;decltype(lambda2(x)), int&amp;&gt;);\n\n// 2.\nauto lambda3 = [](auto x) { return foo(x); };\nstatic_assert(std::is_same_v&lt;decltype(lambda3(1)), int&gt;);\nstatic_assert(std::is_same_v&lt;decltype(lambda3('a')), int&gt;);\n\nauto lambda4 = [](auto x) -&gt; decltype(auto) { return foo(x); };\nstatic_assert(std::is_same_v&lt;decltype(lambda4(1)), int&gt;);\nstatic_assert(std::is_same_v&lt;decltype(lambda4('a')), int&amp;&gt;);\n\n// 3.\nauto lambda5 = [](auto&amp;&amp; x) -&gt; auto&amp;&amp; { return std::forward&lt;decltype(x)&gt;(x); };\nstatic_assert(std::is_same_v&lt;decltype(lambda5(x)), int&amp;&gt;);\nstatic_assert(std::is_same_v&lt;decltype(lambda5(foo(1))), int&amp;&amp;&gt;);\nstatic_assert(std::is_same_v&lt;decltype(lambda5(foo('a'))), int&amp;&gt;);\n</code></pre>\n\n<hr>\n\n<p><strong>PiotrNycz's addition.</strong> As pointed out in comments (credit to @StoryTeller) - the real usage is version with <code>auto&amp;</code> and <code>const auto&amp;</code> and \"The degenerate case is just not something worth bending backwards to disallow.\"</p>\n\n<p>See:</p>\n\n<pre><code>int p = 7;\nauto p_cr = [&amp;]()  -&gt; const auto&amp; { return p; };\nauto p_r = [&amp;]()  -&gt; auto&amp; { return p; };\nauto p_v = [&amp;]()  { return p; }; \n\nconst auto&amp; p_cr1 = p_v(); // const ref to copy of p\nconst auto&amp; p_cr2 = p_cr(); // const ref to p\np_r() = 9; // we change p here\n\nstd::cout &lt;&lt; p_cr1 &lt;&lt; \"!=\" &lt;&lt; p_cr2 &lt;&lt; \"!\\n\";\n// print 7 != 9 !\n</code></pre>\n"}], "owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1187, "favorite_count": 4, "accepted_answer_id": 52077239, "answer_count": 1, "score": 11, "last_activity_date": 1535608962, "creation_date": 1535544676, "question_id": 52077143, "link": "https://stackoverflow.com/questions/52077143/what-is-the-usage-of-lambda-trailing-return-type-auto", "title": "What is the usage of lambda trailing return type auto?", "body": "<p>What is the usage of adding <code>-&gt; auto</code> in <code>[]() -&gt; auto { return 4; }</code>?</p>\n\n<p>For me - it is not different than <code>[]() { return 4; }</code></p>\n"}, {"tags": ["c++", "binary", "bitset"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1535544669, "post_id": 52077081, "comment_id": 91103926, "body": "Please read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a> and read <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>. Lastly learn to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1535544780, "post_id": 52077081, "comment_id": 91104006, "body": "Finally, <a href=\"https://en.cppreference.com/w/cpp/utility/bitset\" rel=\"nofollow noreferrer\">a <code>std::bitset</code> reference</a> could be helpful. There are ways to get a 64-bit integer out of your bitset, which can then be used to copy the bits to your array of bytes."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8591770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94274988b21c76c79a326d0d76e292f8?s=128&d=identicon&r=PG&f=1", "display_name": "StanWell", "link": "https://stackoverflow.com/users/8591770/stanwell"}, "edited": false, "score": 0, "creation_date": 1535548126, "post_id": 52077977, "comment_id": 91106383, "body": "Worked for me! Thanks a lot !"}], "tags": [], "owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "is_accepted": true, "score": 1, "last_activity_date": 1535548215, "last_edit_date": 1535548215, "creation_date": 1535547196, "answer_id": 52077977, "question_id": 52077081, "link": "https://stackoverflow.com/questions/52077081/convert-bitset64-to-quint8/52077977#52077977", "title": "Convert bitset&lt;64&gt; to quint8", "body": "<p>If I understood you correctly then this accomplishes what you ask:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;bitset&gt;\n\nint main()\n{\n    std::bitset&lt;64&gt; bits64{0b0111101111011001110011010101110001111011110110011100110101011100};\n\n    /*\n    01111011\n    11011001\n    11001101\n    01011100\n    01111011\n    11011001\n    11001101\n    01011100\n    */\n\n    for (auto i = 7; i &gt;= 0 ; i--)\n        std::cout &lt;&lt; std::bitset&lt;8&gt;{bits64.to_ullong() &gt;&gt; (i * 8)} &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>01111011\n11011001\n11001101\n01011100\n01111011\n11011001\n11001101\n01011100\n</code></pre>\n\n<p>You can change the <code>for</code> loop statement to make it emit in whatever ordering of bytes you choose.</p>\n\n<p>The key thing is employing <a href=\"http://eel.is/c++draft/expr.shift#2\" rel=\"nofollow noreferrer\">the <em>shift</em> operator</a> (<code>&lt;&lt;</code> or <code>&gt;&gt;</code>) on the integral value.</p>\n"}], "owner": {"reputation": 35, "user_id": 8591770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94274988b21c76c79a326d0d76e292f8?s=128&d=identicon&r=PG&f=1", "display_name": "StanWell", "link": "https://stackoverflow.com/users/8591770/stanwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 52077977, "answer_count": 1, "score": 1, "last_activity_date": 1535554313, "creation_date": 1535544514, "last_edit_date": 1535554313, "question_id": 52077081, "link": "https://stackoverflow.com/questions/52077081/convert-bitset64-to-quint8", "title": "Convert bitset&lt;64&gt; to quint8", "body": "<p>I have a <code>bitset&lt;64&gt;</code> (16bit serial and 48bit timestamp), which I want to write to <code>quint8 *data</code> .</p>\n\n<p>When the <code>bitset&lt;64&gt;</code>looks like:</p>\n\n<pre><code>1111001010100101...\n</code></pre>\n\n<p>I want <code>data</code> to look like:</p>\n\n<pre><code>data[0] = 11110010\ndata[1] = 10100101\n...\n</code></pre>\n\n<p>Would be thankful if somebody could help me to implement that.</p>\n"}, {"tags": ["c++", "c++11", "sfinae", "clang++"], "answers": [{"comments": [{"owner": {"reputation": 1556, "user_id": 1861346, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/AQaJK.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1861346/matt"}, "edited": false, "score": 0, "creation_date": 1535545161, "post_id": 52077208, "comment_id": 91104271, "body": "Hi, I&#39;ll give this a try ASAP (within the hour.)  I&#39;m actually unclear about the two problems you pointed out though.  Why is the declaration is ill-formed?  And I don&#39;t understand &quot;we aren&#39;t resolving overloads when the class template is instantiated&quot;, what do you mean by that?  I thought that&#39;s exactly what <code>enable_if</code> is for?   Thanks for the help!"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1556, "user_id": 1861346, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/AQaJK.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1861346/matt"}, "edited": false, "score": 1, "creation_date": 1535545488, "post_id": 52077208, "comment_id": 91104469, "body": "@Matt - SFINAE isn&#39;t magic that removes declarations. It&#39;s a mechanic that allows ill-formed template functions to be silently ignored during overload resolution, in favor of more fitting overloads. Simply appearing as a member in a class, isn&#39;t something SFINAE is applicable for. When the class is instantiated, so are the declarations of the members. But the compiler can&#39;t instantiate a declaration for <code>notify_exit</code>, since there is no return type. It&#39;s simply ill-formed. The template declaration is valid, since now the enable if doesn&#39;t fail immediately. It only fails at the call site."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1535548989, "post_id": 52077208, "comment_id": 91106987, "body": "It&#39;s more accurate to say that SFINAE disables things during <i>template argument substitution</i> (that&#39;s what the S in SFINAE stands for). That substitution is done during template argument deduction, which occurs during overload resolution. If a substitution failure happens, deduction fails, and the function can&#39;t be called. But in the OP&#39;s example there is no template argument deduction, the template arguments are explicitly provided: <code>MyQueue&lt;std::queue&lt;int&gt;&gt;</code>. Since you&#39;re not deducing the arguments, a substitution failure doesn&#39;t just cause deduction failure, it causes an error."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1535544834, "creation_date": 1535544834, "answer_id": 52077208, "question_id": 52077051, "link": "https://stackoverflow.com/questions/52077051/sfinae-enable-if-cannot-be-used-to-disable-this-declaration/52077208#52077208", "title": "SFINAE: &quot;enable_if cannot be used to disable this declaration&quot;", "body": "<p>Instantiating a template causes the member instantiation of all the declarations it contains. The declaration you provide is simply ill-formed at that point. Furthermore, SFINAE doesn't apply here, since we aren't resolving overloads when the class template is instantiated.</p>\n\n<p>You need to make the member into something with a valid declaration and also make sure the check is delayed until overload resolution. We can do both by making <code>notify_exit</code> a template itself:</p>\n\n<pre><code>template&lt;typename Q = Queue&gt;\nauto notify_exit() -&gt; typename std::enable_if&lt;\n        has_member_function_notify_exit&lt;Q, void&gt;::value,\n        void\n    &gt;::type;\n</code></pre>\n\n<p><kbd><a href=\"http://cpp.sh/57pl5\" rel=\"nofollow noreferrer\">A working cpp.sh example</a></kbd></p>\n"}, {"comments": [{"owner": {"reputation": 1556, "user_id": 1861346, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/AQaJK.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1861346/matt"}, "edited": false, "score": 0, "creation_date": 1535549546, "post_id": 52078351, "comment_id": 91107383, "body": "That&#39;s awesome to know.  Right now thought I&#39;m still on C++11- with MSVC 2013."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 7, "last_activity_date": 1535548438, "creation_date": 1535548438, "answer_id": 52078351, "question_id": 52077051, "link": "https://stackoverflow.com/questions/52077051/sfinae-enable-if-cannot-be-used-to-disable-this-declaration/52078351#52078351", "title": "SFINAE: &quot;enable_if cannot be used to disable this declaration&quot;", "body": "<p>With C++20 and concept, you may use <code>requires</code>:</p>\n\n<pre><code>void notify_exit() requires has_member_function_notify_exit&lt;Queue, void&gt;::value;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1535550282, "post_id": 52078691, "comment_id": 91107887, "body": "The last example of <code>MyQueue</code> can also be <code>MyQueueBase</code>, so that <code>class MyQueue : public MyQueueBase&lt;Queue&gt;</code> could truly give the OP the conditional member they want, without repeating the class definition twice. I know I&#39;m writing this under the answer of a standard library implementor, but I hope you will add it for the OP&#39;s benefit. Otherwise, fantastic answer."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1535550361, "post_id": 52078691, "comment_id": 91107944, "body": "Yes, I&#39;ll add that, because that&#39;s how I&#39;d do it in reality."}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 9, "last_activity_date": 1535551710, "last_edit_date": 1535551710, "creation_date": 1535549466, "answer_id": 52078691, "question_id": 52077051, "link": "https://stackoverflow.com/questions/52077051/sfinae-enable-if-cannot-be-used-to-disable-this-declaration/52078691#52078691", "title": "SFINAE: &quot;enable_if cannot be used to disable this declaration&quot;", "body": "<p>When you instantiate <code>MyQueue&lt;std::queue&lt;int&gt;&gt;</code> the template argument <code>std::queue&lt;int&gt;</code> gets substituted into the class template. In the member function declaration that leads to a use of <code>typename std::enable_if&lt;false, void&gt;::type</code> which does not exist. That's an error. You can't declare a function using a type that doesn't exist.</p>\n\n<p>Correct uses of <code>enable_if</code> must depend on a template parameter that is <a href=\"https://en.cppreference.com/w/cpp/language/template_argument_deduction\" rel=\"noreferrer\">deduced</a>. During template argument deduction, if substituting the deduced template argument for the template parameter fails (i.e. a \"substitution failure\") then you don't get an immediate error, it just causes deduction to fail. If deduction fails, the function isn't a candidate for overload resolution (but any other overloads will still be considered).</p>\n\n<p>But in your case the template argument is not deduced when calling the function, it's already known because it comes from the surrounding class template. That means that substitution failure <strong>is</strong> an error, because the function's declaration is ill-formed before you even try to perform overload resolution to call it.</p>\n\n<p>You can fix your example by turning the function into a function template, so it has a template parameter that must be deduced:</p>\n\n<pre><code>template&lt;typename T = Queue&gt;\n  auto notify_exit() -&gt; typename std::enable_if&lt;\n              has_member_function_notify_exit&lt;T, void&gt;::value,\n              void\n          &gt;::type;\n</code></pre>\n\n<p>Here the <code>enable_if</code> condition depends on <code>T</code> instead of <code>Queue</code>, so whether the <code>::type</code> member exists or not isn't known until you try to substitute a template argument for <code>T</code>. The function template has a default template argument, so that if you just call <code>notify_exit()</code> without any template argument list, it's equivalent to <code>notify_exit&lt;Queue&gt;()</code>, which means the <code>enable_if</code> condition depends on <code>Queue</code>, as you originally wanted.</p>\n\n<p>This function can be misused, as callers could invoke it as <code>notify_exit&lt;SomeOtherType&gt;()</code> to trick the <code>enable_if</code> condition into depending on the wrong type. If callers do that they deserve to get compilation errors.</p>\n\n<p>Another way to make the code work would be to have a partial specialization of the entire class template, to simply remove the function when it's not wanted:</p>\n\n<pre><code>template &lt;typename Queue,\n          bool Notifiable\n            = has_member_function_notify_exit&lt;Queue, void&gt;::value&gt;\nclass MyQueue\n{\n  public:\n    void notify_exit();\n\n    Queue queue_a;\n};\n\n// partial specialization for queues without a notify_exit member:\ntemplate &lt;typename Queue&gt;\nclass MyQueue&lt;Queue, false&gt;\n{\n  public:\n    Queue queue_a;\n};\n</code></pre>\n\n<p>You can avoid repeating the whole class definition twice in a few different ways. You could either hoist all the common code into a base class and only have the <code>notify_exit()</code> member added in the derived class that depends on it. Alternatively you can move just the conditional part into a base class, for example:</p>\n\n<pre><code>template &lt;typename Queue,\n          bool Notifiable\n            = has_member_function_notify_exit&lt;Queue, void&gt;::value&gt;\nclass MyQueueBase\n{\n  public:\n    void notify_exit();\n};\n\n// partial specialization for queues without a notify_exit member:\ntemplate &lt;typename Queue&gt;\nclass MyQueueBase&lt;Queue, false&gt;\n{ };\n\ntemplate&lt;typename Queue&gt;\nclass MyQueue : public MyQueueBase&lt;Queue&gt;\n{\npublic:\n  // rest of the class ...\n\n  Queue queue_a;\n};\n\ntemplate&lt;typename Queue, bool Notifiable&gt;\nvoid MyQueueBase&lt;Queue, Notifiable&gt;::notify_exit()\n{\n  static_cast&lt;MyQueue&lt;Queue&gt;*&gt;(this)-&gt;queue_a.notify_exit();\n}\n</code></pre>\n"}], "owner": {"reputation": 1556, "user_id": 1861346, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/AQaJK.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1861346/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3047, "favorite_count": 2, "accepted_answer_id": 52078691, "answer_count": 3, "score": 6, "last_activity_date": 1535551710, "creation_date": 1535544410, "question_id": 52077051, "link": "https://stackoverflow.com/questions/52077051/sfinae-enable-if-cannot-be-used-to-disable-this-declaration", "title": "SFINAE: &quot;enable_if cannot be used to disable this declaration&quot;", "body": "<p>Why can I not use <code>enable_if</code> in the following context?</p>\n\n<p>I'd like to detect whether my templated object has the member function <code>notify_exit</code></p>\n\n<pre><code>template &lt;typename Queue&gt;\nclass MyQueue\n{\n   public:\n    auto notify_exit() -&gt; typename std::enable_if&lt;\n            has_member_function_notify_exit&lt;Queue, void&gt;::value,\n            void\n        &gt;::type;\n\n    Queue queue_a;\n};\n</code></pre>\n\n<p>Initialised with:</p>\n\n<pre><code>MyQueue&lt;std::queue&lt;int&gt;&gt; queue_a;\n</code></pre>\n\n<p>I keep getting (clang 6):</p>\n\n<pre><code>example.cpp:33:17: error: failed requirement 'has_member_function_notify_exit&lt;queue&lt;int, deque&lt;int, allocator&lt;int&gt; &gt; &gt;, void&gt;::value';\n      'enable_if' cannot be used to disable this declaration\n            has_member_function_notify_exit&lt;Queue, void&gt;::value,\n</code></pre>\n\n<p>or (g++ 5.4):</p>\n\n<pre><code>In instantiation of 'class MyQueue&lt;std::queue&lt;int&gt; &gt;':\n33:35:   required from here\n22:14: error: no type named 'type' in 'struct std::enable_if&lt;false, void&gt;'\n</code></pre>\n\n<p>I've tried a bunch of different things, but can't figure out why I can't use <code>enable_if</code> to disable this function.  Isn't this exactly what <code>enable_if</code> is for?</p>\n\n<p>I've put a <a href=\"https://gist.github.com/kheaactua/251310d109dc80cd3a983824bd72d30c\" rel=\"noreferrer\">full example here</a> (and <a href=\"http://cpp.sh/3d6fu\" rel=\"noreferrer\">cpp.sh link that often fails</a>)</p>\n\n<p>I've found similar Q/As on SO, but generally those were more complicated and attempting something different.</p>\n"}, {"tags": ["c++", "visual-studio-code", "code-formatting"], "comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1535545077, "post_id": 52076978, "comment_id": 91104206, "body": "@bolov there are several C++ extensions available"}], "answers": [{"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 2, "last_activity_date": 1535545025, "creation_date": 1535545025, "answer_id": 52077288, "question_id": 52076978, "link": "https://stackoverflow.com/questions/52076978/visual-code-removes-whitespace-from-within-function-parentheses/52077288#52077288", "title": "Visual Code Removes whitespace from within function parentheses", "body": "<p>The VSCode beautifier is <a href=\"https://code.visualstudio.com/docs/languages/cpp#_editing-code\" rel=\"nofollow noreferrer\"><code>clang-format</code></a>, and the <a href=\"https://clang.llvm.org/docs/ClangFormatStyleOptions.html\" rel=\"nofollow noreferrer\">clang-format option</a>  you're looking for is <code>SpacesInParentheses = true</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 10289738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95eed3c06d822ed4b4d8c9161f3a548e?s=128&d=identicon&r=PG&f=1", "display_name": "MarkH", "link": "https://stackoverflow.com/users/10289738/markh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1535551835, "creation_date": 1535544156, "last_edit_date": 1535551835, "question_id": 52076978, "link": "https://stackoverflow.com/questions/52076978/visual-code-removes-whitespace-from-within-function-parentheses", "title": "Visual Code Removes whitespace from within function parentheses", "body": "<p>I'm finding that the most recent Visual code build 1.26.1 (on Windows 10) is removing spaces from within C++ function parentheses when I add a ; at the end of the line. How can I stop this without turning off formatting completely?</p>\n\n<p>An example</p>\n\n<pre><code>void this_is_a_test( Parameter_type &amp;parameter )\n</code></pre>\n\n<p>becomes </p>\n\n<pre><code>void this_is_a_test(Parameter_type &amp;parameter);\n</code></pre>\n\n<p>This seems a minor thing to complain/ask about but these spaces are required by the coding standards for the company I'm working at so is a severe pain in the proverbial.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1535544351, "post_id": 52076973, "comment_id": 91103720, "body": "Yes. That&#39;s it."}, {"owner": {"reputation": 4121, "user_id": 4290866, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0727d9acdc35a0359d0703da9e11f239?s=128&d=identicon&r=PG&f=1", "display_name": "user32434999", "link": "https://stackoverflow.com/users/4290866/user32434999"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1535544392, "post_id": 52076973, "comment_id": 91103736, "body": "Where could I have found that information, except for trying?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 1, "creation_date": 1535544440, "post_id": 52076973, "comment_id": 91103777, "body": "The rules are most likely defined in standard, but I don&#39;t know where exactly."}, {"owner": {"reputation": 406, "user_id": 2102925, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/582cb201d06c59f1521cbe4e2a5667c3?s=128&d=identicon&r=PG", "display_name": "AdityaG", "link": "https://stackoverflow.com/users/2102925/adityag"}, "edited": false, "score": 0, "creation_date": 1535544447, "post_id": 52076973, "comment_id": 91103781, "body": "try printing from the getter functions you can observe this."}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1535544453, "post_id": 52076973, "comment_id": 91103786, "body": "@Pi We have a list of <a href=\"https://stackoverflow.com/q/388242/1171191\">recommended books</a>."}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1535547697, "post_id": 52076973, "comment_id": 91106056, "body": "@Pi Well you can probably just pick one of the beginner ones, any of those should cover <code>const</code>-correctness. If you are a student, your college or university library probably has one of them. If you are already working but learning C++ as a new language, your employer should have some sort of library, ebook resource, or training budget."}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1535544721, "creation_date": 1535544721, "answer_id": 52077160, "question_id": 52076973, "link": "https://stackoverflow.com/questions/52076973/const-and-non-const-getter-with-same-name/52077160#52077160", "title": "const and non-const getter with same name", "body": "<p>You can test it yourself:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass ConstTest\n{\npublic:\n    ConstTest() : myPrivateData(42) {}\n\n    const int* getMyPrivateData() const {std::cout &lt;&lt; \"const\" &lt;&lt; std::endl; return &amp;myPrivateData;}\n    int* getMyPrivateData() {std::cout &lt;&lt; \"non-const\" &lt;&lt; std::endl; return &amp;myPrivateData;}\n\nprivate:\n    int myPrivateData;\n};\n\nint main()\n{\n    auto a = ConstTest();\n    const auto b = ConstTest();\n\n    a.getMyPrivateData();\n    b.getMyPrivateData();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3819, "user_id": 4289700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GGKsgSVN_n4/AAAAAAAAAAI/AAAAAAAAAvQ/_IAucbb8ss8/photo.jpg?sz=128", "display_name": "HugoTeixeira", "link": "https://stackoverflow.com/users/4289700/hugoteixeira"}, "is_accepted": false, "score": 1, "last_activity_date": 1535544755, "creation_date": 1535544755, "answer_id": 52077173, "question_id": 52076973, "link": "https://stackoverflow.com/questions/52076973/const-and-non-const-getter-with-same-name/52077173#52077173", "title": "const and non-const getter with same name", "body": "<p>That's correct. So if you have a code like this:</p>\n\n<pre><code>ConstTest a;\na.getMyPrivateData();\n\nconst ConstTest b;\nb.getMyPrivateData();\n</code></pre>\n\n<p>It prints:</p>\n\n<pre><code>non-const\nconst\n</code></pre>\n\n<p>The same applies to other modifiers, like <code>volatile</code>. So your class could also have another method to handle the <code>volatile</code> case:</p>\n\n<pre><code>class ConstTest\n{\npublic:\n    ConstTest() : myPrivateData(42) {}\n\n    const int* getMyPrivateData() const {std::cout &lt;&lt; \"const\" &lt;&lt; std::endl; return &amp;myPrivateData;}\n    int getMyPrivateData() volatile {std::cout &lt;&lt; \"volatile\" &lt;&lt; std::endl; return volatilePrivateData;}\n    int* getMyPrivateData() {std::cout &lt;&lt; \"non-const\" &lt;&lt; std::endl; return &amp;myPrivateData;}\n\nprivate:\n    int myPrivateData;\n    volatile int volatilePrivateData;\n};\n</code></pre>\n\n<p>And this code:</p>\n\n<pre><code>ConstTest a;\na.getMyPrivateData();\n\nconst ConstTest b;\nb.getMyPrivateData();\n\nvolatile ConstTest c;\nc.getMyPrivateData();\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>non-const\nconst\nvolatile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 3, "last_activity_date": 1535548654, "last_edit_date": 1535548654, "creation_date": 1535546966, "answer_id": 52077915, "question_id": 52076973, "link": "https://stackoverflow.com/questions/52076973/const-and-non-const-getter-with-same-name/52077915#52077915", "title": "const and non-const getter with same name", "body": "<blockquote>\n  <p>I am aware I can try it. But can I rely on it in terms of the standard?</p>\n</blockquote>\n\n<p><a href=\"http://eel.is/c++draft/over.match.funcs#4\" rel=\"nofollow noreferrer\">over.match.funcs/4+5</a>:</p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li><p>For non-static member functions, the type of the implicit object parameter is</p>\n  \n  <ul>\n  <li><p>\u201clvalue reference to cv X\u201d for functions declared without a ref-qualifier or with the &amp; ref-qualifier</p></li>\n  <li><p>\u201crvalue reference to cv X\u201d for functions declared with the &amp;&amp; ref-qualifier</p>\n  \n  <p>where X is the class of which the function is a member and cv is the cv-qualification on the member function declaration. [\u2009Example: For a const member function of class X, the extra parameter is assumed to have type \u201creference to const X\u201d. \u2014\u2009end example\u2009] For conversion functions, the function is considered to be a member of the class of the implied object argument for the purpose of defining the type of the implicit object parameter. For non-conversion functions introduced by a using-declaration into a derived class, the function is considered to be a member of the derived class for the purpose of defining the type of the implicit object parameter. For static member functions, the implicit object parameter is considered to match any object (since if the function is selected, the object is discarded). [\u2009Note: No actual type is established for the implicit object parameter of a static member function, and no attempt will be made to determine a conversion sequence for that parameter ([over.match.best]). \u2014\u2009end note\u2009]</p></li>\n  </ul></li>\n  <li><p>During overload resolution, the implied object argument is indistinguishable from other arguments. The implicit object parameter, however, retains its identity since no user-defined conversions can be applied to achieve a type match with it.</p></li>\n  </ol>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 1, "last_activity_date": 1535547997, "creation_date": 1535547997, "answer_id": 52078220, "question_id": 52076973, "link": "https://stackoverflow.com/questions/52076973/const-and-non-const-getter-with-same-name/52078220#52078220", "title": "const and non-const getter with same name", "body": "<p>A good indication that this is <strong>allowed by design</strong> is that the standard library uses it.</p>\n\n<p>See for example <a href=\"https://en.cppreference.com/w/cpp/container/vector/data\" rel=\"nofollow noreferrer\"><code>std::vector::data</code></a></p>\n\n<pre><code>T* data() noexcept;\nconst T* data() const noexcept;\n</code></pre>\n"}], "owner": {"reputation": 4121, "user_id": 4290866, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0727d9acdc35a0359d0703da9e11f239?s=128&d=identicon&r=PG&f=1", "display_name": "user32434999", "link": "https://stackoverflow.com/users/4290866/user32434999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 52077915, "answer_count": 4, "score": 2, "last_activity_date": 1535548654, "creation_date": 1535544150, "last_edit_date": 1535544853, "question_id": 52076973, "link": "https://stackoverflow.com/questions/52076973/const-and-non-const-getter-with-same-name", "title": "const and non-const getter with same name", "body": "<p>Consider the following class:</p>\n\n<pre><code>class ConstTest\n{\npublic:\n    ConstTest() : myPrivateData(42) {}\n\n    const int* getMyPrivateData() const {std::cout &lt;&lt; \"const\" &lt;&lt; std::endl; return &amp;myPrivateData;}\n    int* getMyPrivateData() {std::cout &lt;&lt; \"non-const\" &lt;&lt; std::endl; return &amp;myPrivateData;}\n\nprivate:\n    int myPrivateData;\n};\n</code></pre>\n\n<p>is there any rule in which context which getter is used. My impression is that only in a const environemtn the const getter is called. Can anyone confirm this? I would very much appreciate an offical source because I would like to rely on that feature.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I am aware I can try it. But can I rely on it in terms of the standard?</p>\n"}, {"tags": ["c++", "tbb"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 6225954, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3cb4218fe73c4a1ac594b907dd90235e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6225954/thomas"}, "edited": false, "score": 0, "creation_date": 1535568674, "post_id": 52082642, "comment_id": 91118878, "body": "Thanks for your reply."}, {"owner": {"reputation": 95, "user_id": 6225954, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3cb4218fe73c4a1ac594b907dd90235e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6225954/thomas"}, "edited": false, "score": 0, "creation_date": 1535569150, "post_id": 52082642, "comment_id": 91119089, "body": "Thanks for your reply. My questions has to be made clearer. For clarification, I am not really interested by this memcopy-like tests but with more complex operations where tasks based parallelism is far better suited. However, the same test with openmp (simple raw #pragram parallel for instructions) <b>does</b> show a gain in performance as the number of threads increases (and as far as I know, OpenMP also has to starts its pool of threads). Even though the scalability is bad, my point is that in the performances decreases with TBB has the number of threads increases."}, {"owner": {"reputation": 95, "user_id": 6225954, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3cb4218fe73c4a1ac594b907dd90235e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6225954/thomas"}, "edited": false, "score": 0, "creation_date": 1535569244, "post_id": 52082642, "comment_id": 91119122, "body": "I&#39;ll make the same tests with <code>parallel_for</code> as you suggested, however, as I said in the previous comment, <code>parallel_for</code> will not be suitable for my real needs."}, {"owner": {"reputation": 5833, "user_id": 2527797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83539ee8bca535eca6c4be5c856a738d?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/2527797/anton"}, "reply_to_user": {"reputation": 95, "user_id": 6225954, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3cb4218fe73c4a1ac594b907dd90235e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6225954/thomas"}, "edited": false, "score": 0, "creation_date": 1535575497, "post_id": 52082642, "comment_id": 91121914, "body": "parallel_for works almost always. even if you don&#39;t have a finite number of elements, even if their number is not easily discoverable in constant time but well expressed via divisible range. e.g. a binary tree, then parallel_for works for that very well. If you don&#39;t want to write a custom range class, with <code>paralle_do</code>, you can add additional items later <a href=\"https://www.threadingbuildingblocks.org/docs/help/reference/algorithms/parallel_do_func.html\" rel=\"nofollow noreferrer\">threadingbuildingblocks.org/docs/help/reference/algorithms/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5833, "user_id": 2527797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83539ee8bca535eca6c4be5c856a738d?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/2527797/anton"}, "is_accepted": false, "score": 5, "last_activity_date": 1535561979, "creation_date": 1535561979, "answer_id": 52082642, "question_id": 52076777, "link": "https://stackoverflow.com/questions/52076777/poor-performance-with-intel-threading-building-blocks-using-task-group-new-user/52082642#52082642", "title": "Poor performance with Intel Threading Building Blocks using task_group (new user)", "body": "<ol>\n<li>such a short benchmark does not make sense as TBB needs to create threads and get them started, it does not happen immediately on the first call to TBB since it is lazy asynchronous process. Though, your user times suggest that threads are up and running but probably don't have work to do.</li>\n<li>memcopy is bad for scalability study because it does not scale beyond the number of memory controllers/channels. So, it doesn't matter if you have 4 CPUs or 24, it's unlikely you can get more than x4 speedup even for good hardware. Yours might have less channels.</li>\n<li>instead of manually splitting the range, use <code>tbb::parallel_for</code>, you don't need <code>task_group</code> there. Moreover, invoking tasks one by one has linear complexity, <code>parallel_for</code> has logarithmic complexity.</li>\n</ol>\n"}], "owner": {"reputation": 95, "user_id": 6225954, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3cb4218fe73c4a1ac594b907dd90235e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6225954/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1535561979, "creation_date": 1535543449, "question_id": 52076777, "link": "https://stackoverflow.com/questions/52076777/poor-performance-with-intel-threading-building-blocks-using-task-group-new-user", "title": "Poor performance with Intel Threading Building Blocks using task_group (new user)", "body": "<p>I recently got interested in Intel Threading Building Blocks. I would like to make use of the <code>tbb::task_group</code> class to manage a thread pool.</p>\n\n<p>My first attempt was to build a test where a copy a vector in another: I create nth tasks each taking care of copying a continuous slice of the vector.</p>\n\n<p>However, performances decreases with the number of threads. I have the same results with another thread pool implementation. With TBB 2018 Update 5, gcc 6.3 on debian strecth on an 8 i7 core box, I get the following figures to copy a vector of 1'000'000 of elements:</p>\n\n<p>nth  real      user</p>\n\n<p>1    0.808s 0.807s</p>\n\n<p>2    1.068s 2.105s</p>\n\n<p>4    1.109s 4.282s</p>\n\n<p>May be some of you would me help understanding the issue. Here is the code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;cstdlib&gt;\n#include&lt;vector&gt;\n#include&lt;algorithm&gt;\n#include \"tbb/task_group.h\"\n#include \"tbb/task_scheduler_init.h\"\n\nnamespace mgis{\n  using real = double;\n  using size_type = size_t;\n}\n\nvoid my_copy(std::vector&lt;mgis::real&gt;&amp; d,\n         const std::vector&lt;mgis::real&gt;&amp; s,\n         const mgis::size_type b,\n         const mgis::size_type e){\n  const auto pb = s.begin()+b;\n  const auto pe = s.begin()+e;\n  const auto po = d.begin()+b;\n  std::copy(pb,pe,po);\n}\n\nint main(const int argc, const char* const* argv) {\n  using namespace mgis;\n  if (argc != 3) {\n    std::cerr &lt;&lt; \"invalid number of arguments\\n\";\n    std::exit(-1);\n  }\n  const auto ng = std::stoi(argv[1]);\n  const auto nth = std::stoi(argv[2]);\n  tbb::task_scheduler_init init(nth);\n  tbb::task_group g;\n  std::vector&lt;real&gt; v(ng,0);\n  std::vector&lt;real&gt; v2(ng);\n  for(auto i =0; i!=2000;++i){\n    const auto d = ng / nth;\n    const auto r = ng % nth;\n    size_type b = 0;\n    for (size_type i = 0; i != r; ++i) {\n      g.run([&amp;v2, &amp;v, b, d] { my_copy(v2, v, b, b + d + 1); });\n      b += d+1;\n    }\n    for (size_type i = r; i != nth; ++i) {\n      g.run([&amp;v2, &amp;v, b, d] { my_copy(v2, v, b, b + d); });\n      b += d ;\n    }\n    g.wait();\n  }\n  return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "generic-programming"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 4, "creation_date": 1535543221, "post_id": 52076660, "comment_id": 91102998, "body": "<i>&quot;Isn&#39;t an int literal a <code>const int</code>&quot;</i> - No"}, {"owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1535556429, "post_id": 52076660, "comment_id": 91112367, "body": "Follow-up question: <a href=\"https://stackoverflow.com/questions/52077274/why-are-literals-not-const-except-strings\">Why are literals not const (except strings)?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 0, "creation_date": 1535543401, "post_id": 52076692, "comment_id": 91103097, "body": "But a <code>const</code> may be optmized to be &quot;non living&quot;"}, {"owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "reply_to_user": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 0, "creation_date": 1535543505, "post_id": 52076692, "comment_id": 91103178, "body": "@IvanRubinson, well, not exactly. It might be placed into a read only section. So it will have an address but you won&#39;t be able to modify its value. Literals on the other hand do not exist while they aren&#39;t &quot;materialized&quot; (assigned to some variable)"}], "tags": [], "owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "is_accepted": false, "score": 0, "last_activity_date": 1535543657, "last_edit_date": 1535543657, "creation_date": 1535543189, "answer_id": 52076692, "question_id": 52076660, "link": "https://stackoverflow.com/questions/52076660/template-accepts-const-but-not-literal/52076692#52076692", "title": "Template accepts const but not literal", "body": "<p>Literal produces a prvalue expression which <code>T&amp;</code> can not accept. <code>T&amp;</code> accepts only lvalues. </p>\n\n<p>You can think about it this way: integral literal is a \"non-living\" thing as it has no address anywhere, how could you bind it to the lvalue reference and then modify it? Where that object would be located? Where the changes would be written?</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 2, "creation_date": 1535543893, "post_id": 52076790, "comment_id": 91103430, "body": "<code>const T&amp;</code> has the added benefit that it allows <code>int a; const int b; min(a, b)</code>: there is no question of whether <code>T</code> should deduce to <code>int</code> or <code>const int</code>."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1535544015, "post_id": 52076790, "comment_id": 91103497, "body": "@hvd Good point, is there an easy fix to the perfectly forwarded version? Or is it tedious? Or is it in fact not that big a deal?"}, {"owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "edited": false, "score": 0, "creation_date": 1535544131, "post_id": 52076790, "comment_id": 91103575, "body": "Proper version of <code>max</code>/<code>min</code> should have 2 template parameters SFINAEing out non-comparable versions. But I doubt the OP needs all that complexity. His question about literals not the max function, I believe"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1535544232, "post_id": 52076790, "comment_id": 91103636, "body": "@PasserBy I think you&#39;d need to have two template parameters and return <code>std::common_type_t&lt;T1&amp;&amp;, T2&amp;&amp;&gt;</code> to let that work. The SFINAE mentioned by ixSci should be implicitly handled by that already."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1535544598, "post_id": 52076790, "comment_id": 91103875, "body": "@hvd I&#39;m wondering if <code>std::common_type</code> is correct. Ideally, the function should return a xvalue with two xvalues of the same type as arguments, which <code>std::common_type</code> doesn&#39;t support. But going through all the cases, I think it&#39;s just <i>way</i> too tedious."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1535544884, "post_id": 52076790, "comment_id": 91104082, "body": "@PasserBy I think you&#39;re right, I missed <code>common_type</code>&#39;s decaying property. You&#39;d need something like <code>std::common_type</code> except without that decay. Easily made yourself, but I don&#39;t know if the standard library has something readily available already."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1535545322, "post_id": 52076790, "comment_id": 91104369, "body": "@hvd Surprisingly, I think this handles everything."}, {"owner": {"reputation": 1751, "user_id": 3536140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcc1b905bfd7fe58a60cbf8bc991408a?s=128&d=identicon&r=PG&f=1", "display_name": "vdavid", "link": "https://stackoverflow.com/users/3536140/vdavid"}, "edited": false, "score": 0, "creation_date": 1535545503, "post_id": 52076790, "comment_id": 91104478, "body": "@PasserBy Do you still need <code>template&lt;typename T&gt; const T&amp; min(const T&amp; a, const T&amp; b)</code> once you have setup the perfect forwarding with types <code>T&amp;&amp;</code> and <code>U&amp;&amp;</code>?"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 1751, "user_id": 3536140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcc1b905bfd7fe58a60cbf8bc991408a?s=128&d=identicon&r=PG&f=1", "display_name": "vdavid", "link": "https://stackoverflow.com/users/3536140/vdavid"}, "edited": false, "score": 0, "creation_date": 1535545522, "post_id": 52076790, "comment_id": 91104488, "body": "@vdavid No, it&#39;s there for exposition."}, {"owner": {"reputation": 1751, "user_id": 3536140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcc1b905bfd7fe58a60cbf8bc991408a?s=128&d=identicon&r=PG&f=1", "display_name": "vdavid", "link": "https://stackoverflow.com/users/3536140/vdavid"}, "edited": false, "score": 0, "creation_date": 1535545630, "post_id": 52076790, "comment_id": 91104549, "body": "@PasserBy Will <code>decltype(a &lt; b ? std::forward&lt;T&gt;(a) : std::forward&lt;U&gt;(b))</code> be allowed if <code>a &lt; b</code> can&#39;t give the answer at compile-time?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1535545632, "post_id": 52076790, "comment_id": 91104553, "body": "@PasserBy Considering what you have is basically <code>std::common_type</code> without the decay, I&#39;m not surprised. Nicely done :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 1751, "user_id": 3536140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcc1b905bfd7fe58a60cbf8bc991408a?s=128&d=identicon&r=PG&f=1", "display_name": "vdavid", "link": "https://stackoverflow.com/users/3536140/vdavid"}, "edited": false, "score": 0, "creation_date": 1535545724, "post_id": 52076790, "comment_id": 91104624, "body": "@vdavid Sure. The type of the expression does not depend on which operand is selected. <code>true ? 0 : &quot;&quot;</code> gives you a null pointer of type <code>const char *</code>, for instance."}, {"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1535549401, "post_id": 52076790, "comment_id": 91107278, "body": "This will return a <i>dangling reference</i> when a temporary is used. See <a href=\"https://stackoverflow.com/a/667415/3893262\">this answer</a>."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1535551052, "post_id": 52076790, "comment_id": 91108463, "body": "@O&#39;Neil I am well aware, but seeing as how <code>std::min</code> also returns references, I decided to follow the convention."}], "tags": [], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "is_accepted": true, "score": 3, "last_activity_date": 1535545540, "last_edit_date": 1535545540, "creation_date": 1535543467, "answer_id": 52076790, "question_id": 52076660, "link": "https://stackoverflow.com/questions/52076660/template-accepts-const-but-not-literal/52076790#52076790", "title": "Template accepts const but not literal", "body": "<p><code>int</code> literals have type <code>int</code>, not <code>const int</code>. <code>T</code> is therefore deduced to be <code>int</code>, and <a href=\"https://stackoverflow.com/questions/7701221/how-to-pass-literal-integers-by-reference-in-c-newbie\"><code>int&amp;</code> can't bind to a prvalue</a>.</p>\n\n<p>The correct way to write such a function is to either perfect forward the arguments, or use <code>const T&amp;</code>, both of which can bind to anything.</p>\n\n<pre><code>template&lt;typename T, typename U&gt;\nauto min(T&amp;&amp; a, U&amp;&amp; b) -&gt; decltype(a &lt; b ? std::forward&lt;T&gt;(a) : std::forward&lt;U&gt;(b))\n{\n    return a &lt; b ? std::forward&lt;T&gt;(a) : std::forward&lt;U&gt;(b); \n}\n\n// Or...\ntemplate&lt;typename T&gt;\nconst T&amp; min(const T&amp; a, const T&amp; b)\n{\n    return a &lt; b ? a : b;\n}\n</code></pre>\n\n<p>In the case of perfectly forwarding the arguments, the two template parameters are needed in order for <code>int a{}; min(a, 42);</code> to compile, as their deduced types are different.</p>\n"}, {"comments": [{"owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 0, "creation_date": 1535543974, "post_id": 52076811, "comment_id": 91103469, "body": "Which version of the standard begins allowing <code>T&amp;&amp;</code> syntax?"}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "edited": false, "score": 1, "creation_date": 1535544113, "post_id": 52076811, "comment_id": 91103562, "body": "@IvanRubinson Since C++11. Added an edit to make clearer."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1535548037, "post_id": 52076811, "comment_id": 91106323, "body": "You will have issue with <code>min(T&amp;&amp; a, T&amp;&amp; b)</code>, <code>a</code> and <code>b</code> should be deduced to the same type. <code>min(T&amp;&amp; a, U&amp;&amp; b)</code> would be valid though."}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1535549138, "post_id": 52076811, "comment_id": 91107081, "body": "@Jarod42 excuse me I mistyped the correction, in haste. Apologies."}, {"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1535549413, "post_id": 52076811, "comment_id": 91107288, "body": "This will return a <i>dangling reference</i> when a temporary is used. See <a href=\"https://stackoverflow.com/a/667415/3893262\">this answer</a>."}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1535549992, "post_id": 52076811, "comment_id": 91107684, "body": "@O&#39;Neil I actually think that because you initialize the reference with a pure rvalue, the life-time of the tempoary object gets extended to the life-time of the reference. thanks to the perfect forwarding this should stand."}, {"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1535550351, "post_id": 52076811, "comment_id": 91107935, "body": "The life-time extension only stands inside the function. Leaving the function, the two parameters <code>a</code> and <code>b</code> are destroyed, and you&#39;re returning a dangling reference."}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1535550464, "post_id": 52076811, "comment_id": 91107999, "body": "@O&#39;Neil Oh I see, you are talking about this? <a href=\"http://eel.is/c++draft/class.temporary#6.10\" rel=\"nofollow noreferrer\">eel.is/c++draft/class.temporary#6.10</a>"}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1535550535, "post_id": 52076811, "comment_id": 91108040, "body": "@O&#39;Neil if so then I&#39;ll edit immediately to reflect this, thus discarding with the first version and explain why."}, {"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1535550892, "post_id": 52076811, "comment_id": 91108324, "body": "Almost, this is the previous one: <a href=\"http://eel.is/c++draft/class.temporary#6.9\" rel=\"nofollow noreferrer\">eel.is/c++draft/class.temporary#6.9</a>."}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1535551713, "post_id": 52076811, "comment_id": 91108898, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/179033/discussion-between-skepticalempiricist-and-oneil\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "is_accepted": false, "score": 2, "last_activity_date": 1535558280, "last_edit_date": 1535558280, "creation_date": 1535543568, "answer_id": 52076811, "question_id": 52076660, "link": "https://stackoverflow.com/questions/52076660/template-accepts-const-but-not-literal/52076811#52076811", "title": "Template accepts const but not literal", "body": "<blockquote>\n  <p>Isn't an int literal a const int?</p>\n</blockquote>\n\n<p>No, it is just an <code>int</code>, not <code>const</code>, and <a href=\"https://en.cppreference.com/w/cpp/language/value_category#prvalue\" rel=\"nofollow noreferrer\">is <strong>defined as a <em>prvalue</em></strong></a>, hence an <em>lvalue reference</em> cannot bind to it -- as is in your case.</p>\n\n<p>Easily corrected by having the original template like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nconst T&amp; min(const T&amp; a, const T&amp; b){\n    return a &lt; b ? a : b;\n}\n</code></pre>\n\n<p>as <code>const T&amp;</code> will bind to <em>rvalue</em>s as well.</p>\n\n<p>Avoid changing to or adding anything the likes of this:</p>\n\n<pre><code>template&lt;typename T, typename U&gt;\nauto&amp;&amp; min(T&amp;&amp; a, U&amp;&amp; b){\n    return std::forward&lt;T&gt;(a &lt; b ? a : b); \n}\n</code></pre>\n\n<p>as here we do not create a copy from the materialized temporary, and as such we're at the risk of returning a <em>dangling reference</em>. See here in <a href=\"http://eel.is/c++draft/class.temporary#6.9\" rel=\"nofollow noreferrer\">[class.temporary]</a>:</p>\n\n<blockquote>\n  <p>A temporary object bound to a reference parameter in a function call\n  ([expr.call]) persists until the completion of the full-expression\n  containing the call.</p>\n</blockquote>\n\n<p>... at which point it dies. Hence the dangling-ness.</p>\n"}], "owner": {"reputation": 2438, "user_id": 6517320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5AiJr.jpg?s=128&g=1", "display_name": "Ivan Rubinson", "link": "https://stackoverflow.com/users/6517320/ivan-rubinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "accepted_answer_id": 52076790, "answer_count": 3, "score": 1, "last_activity_date": 1535558280, "creation_date": 1535543092, "last_edit_date": 1535543242, "question_id": 52076660, "link": "https://stackoverflow.com/questions/52076660/template-accepts-const-but-not-literal", "title": "Template accepts const but not literal", "body": "<p>When writing a template, <code>class T</code> may be substituted by a <code>const</code> type.</p>\n\n<p>Consider:</p>\n\n<pre><code>template&lt;class T&gt; T&amp; min(T&amp; a, T&amp; b) {\n    return a &lt; b ? a : b;\n}\n</code></pre>\n\n<p>This will work in the following cases:</p>\n\n<pre><code>int a = 1, b = 5;\nconst int c = 1, d = 5;\nmin(a, b); // T is int\nmin(c, d); // T is const int\n</code></pre>\n\n<p>But will throw a compilation error when called with a literal (like so):</p>\n\n<pre><code>min(1, 5); // T is const int literal\n</code></pre>\n\n<blockquote>\n  <p>invalid initialization of non-const reference of type \u2018int&amp;\u2019 from an rvalue of type \u2018int\u2019</p>\n</blockquote>\n\n<p>Why? Isn't an int literal a <code>const int</code>? And how can the template be modified to allow working with literals?</p>\n\n<p>(consistent with gcc 6.3 and MSVC 2015)</p>\n"}, {"tags": ["c++", "while-loop"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1535542467, "post_id": 52076457, "comment_id": 91102518, "body": "First of all, what is <code>Choice1</code>? Secondly, please read about <a href=\"http://en.cppreference.com/w/cpp/language/operator_other#Built-in_comma_operator\" rel=\"nofollow noreferrer\">the built-in comma operator</a> as your <code>if</code> condition uses it (in a way that makes the first condition useless)."}, {"owner": {"reputation": 33, "user_id": 10208391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HJZu9fQvhtM/AAAAAAAAAAI/AAAAAAAAARE/L8jRMPRvuPE/photo.jpg?sz=128", "display_name": "Dat boi", "link": "https://stackoverflow.com/users/10208391/dat-boi"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1535542743, "post_id": 52076457, "comment_id": 91102709, "body": "Choice 1 is an integer variable that the user inputs at &#39;cin&#39; which increments one of 12 destinations. Also, does the comma operator have to do something with this?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1535543454, "post_id": 52076457, "comment_id": 91103140, "body": "The comma is not a logical operator - <code>a, b</code> means &quot;evaluate <code>a</code> and ignore the result, then evaluate <code>b</code>&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10208391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HJZu9fQvhtM/AAAAAAAAAAI/AAAAAAAAARE/L8jRMPRvuPE/photo.jpg?sz=128", "display_name": "Dat boi", "link": "https://stackoverflow.com/users/10208391/dat-boi"}, "edited": false, "score": 0, "creation_date": 1535545342, "post_id": 52076699, "comment_id": 91104379, "body": "Okay, your code seems to work but there is a problem. The first time the program is run, even if a valid input e.g. 4 is fed, it is still ignored and input is required again. Secondly, I have to achieve the aforementioned task with just the <code>&lt;iostream&gt;</code> header file since my assignment restricts me to do so. So, is there a workaround for this?"}, {"owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "reply_to_user": {"reputation": 33, "user_id": 10208391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HJZu9fQvhtM/AAAAAAAAAAI/AAAAAAAAARE/L8jRMPRvuPE/photo.jpg?sz=128", "display_name": "Dat boi", "link": "https://stackoverflow.com/users/10208391/dat-boi"}, "edited": false, "score": 0, "creation_date": 1535546110, "post_id": 52076699, "comment_id": 91104889, "body": "@Datboi I ran just now and entering 4 is not ignored and the program is finished execution. About using only &lt;iostream&gt; header as you can see it is the only thing being used."}], "tags": [], "owner": {"reputation": 5319, "user_id": 2754173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b0a0fd9004b29fa441e5bbf6904e69?s=128&d=identicon&r=PG&f=1", "display_name": "Geezer", "link": "https://stackoverflow.com/users/2754173/geezer"}, "is_accepted": true, "score": 1, "last_activity_date": 1535599121, "last_edit_date": 1535599121, "creation_date": 1535543219, "answer_id": 52076699, "question_id": 52076457, "link": "https://stackoverflow.com/questions/52076457/c-ignoring-input-after-first-cin-ignore/52076699#52076699", "title": "C++: Ignoring input after first cin.ignore", "body": "<p>Perhaps this is what you intended:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;limits&gt;\n\nint main()\n{\n    int Choice1{0};\n\n    while (!(std::cin &gt;&gt; Choice1) || Choice1 &lt; 1 || Choice1 &gt; 11) \n    {\n        std::cin.clear();\n        std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n\n        std::cout &lt;&lt; \"Error! Please enter a valid input!\" &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"Now please enter the first code: \" &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>You can read <a href=\"https://stackoverflow.com/questions/54142/how-does-the-comma-operator-work\">here</a> and/or <a href=\"https://en.cppreference.com/w/cpp/language/operator_other\" rel=\"nofollow noreferrer\">here</a> about the <em>comma operator</em> which I didn't find to belong there as part of the <em>conditional expression</em>. Also, I don't think you really wanted that <code>if</code> en-scoping the <em><code>while</code> loop</em>. I've made some additional small changes, leaving most of the original structure -- which still could use some work.</p>\n"}], "owner": {"reputation": 33, "user_id": 10208391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HJZu9fQvhtM/AAAAAAAAAAI/AAAAAAAAARE/L8jRMPRvuPE/photo.jpg?sz=128", "display_name": "Dat boi", "link": "https://stackoverflow.com/users/10208391/dat-boi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 52076699, "answer_count": 1, "score": 2, "last_activity_date": 1535599121, "creation_date": 1535542362, "question_id": 52076457, "link": "https://stackoverflow.com/questions/52076457/c-ignoring-input-after-first-cin-ignore", "title": "C++: Ignoring input after first cin.ignore", "body": "<p>Okay, so this is a part of my program which is basically a recurring error message to the user until a valid input is fed. So basically the issue I'm facing is that whenever I enter a number that is invalid (such as 0, 12 or a negative number), nothing will output and the program will await another input, only then will it identify the input as an error or a valid input. This is not a problem when a symbol or alphabet is input. Is there any workaround I can use?</p>\n\n<pre><code>while (Choice1 &lt; 1 || Choice1 &gt; 11) \n{\n    if(!(cin &gt;&gt; Choice1), Choice1 &lt; 1 || Choice1 &gt; 11)\n    {   \n        cin.clear();\n        cin.ignore(512, '\\n');\n        cout &lt;&lt; \"\\n\\aError! Please enter a valid input!\" &lt;&lt; endl;\n        cout &lt;&lt; \"Now please enter the first code: \";\n        cin &gt;&gt; Choice1;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "google-benchmark"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10145168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60d5f4eb4f975789d37a42f9b753af1c?s=128&d=identicon&r=PG&f=1", "display_name": "Orangeberry", "link": "https://stackoverflow.com/users/10145168/orangeberry"}, "edited": false, "score": 0, "creation_date": 1535551686, "post_id": 52078337, "comment_id": 91108884, "body": "True, but it&#39;s not a just a little variance. Locally the chrono versions are 5x faster, but on QuickBench they are 1,000x <i>slower</i>, indicating there may be something wrong in the test. But I looked at the assembly on QuickBench and it seems to be calling the functions so I don&#39;t think it&#39;s optimizing them out."}, {"owner": {"reputation": 1219, "user_id": 431033, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/847f3f4282d7fa43c368219840c123ad?s=128&d=identicon&r=PG&f=1", "display_name": "Lack", "link": "https://stackoverflow.com/users/431033/lack"}, "edited": false, "score": 0, "creation_date": 1540748744, "post_id": 52078337, "comment_id": 92968795, "body": "You&#39;re basically timing system calls on an AWS virtual machine. Slightly related: <a href=\"https://blog.packagecloud.io/eng/2017/03/08/system-calls-are-much-slower-on-ec2/\" rel=\"nofollow noreferrer\">blog.packagecloud.io/eng/2017/03/08/&hellip;</a>"}], "tags": [], "owner": {"reputation": 161, "user_id": 9260020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f709479154c250e6f3a7f0314eeb608?s=128&d=identicon&r=PG&f=1", "display_name": "Karl", "link": "https://stackoverflow.com/users/9260020/karl"}, "is_accepted": false, "score": 1, "last_activity_date": 1535548387, "creation_date": 1535548387, "answer_id": 52078337, "question_id": 52076296, "link": "https://stackoverflow.com/questions/52076296/google-benchmark-inconsistent-results/52078337#52078337", "title": "Google/benchmark inconsistent results", "body": "<p>Benchmark results are platform/architecture/machine dependent. It isn't even practical to assume your benchmarks will always be the same when you are running them on the same machine, things like temperature, performance scaling options, wear and tear, etc., can affect performance.</p>\n"}, {"tags": [], "owner": {"reputation": 321, "user_id": 3278350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baa10d5bbb5f85739263730bf9a03ddd?s=128&d=identicon&r=PG&f=1", "display_name": "talekeDskobeDa", "link": "https://stackoverflow.com/users/3278350/talekedskobeda"}, "is_accepted": false, "score": 0, "last_activity_date": 1587126534, "creation_date": 1587126534, "answer_id": 61271695, "question_id": 52076296, "link": "https://stackoverflow.com/questions/52076296/google-benchmark-inconsistent-results/61271695#61271695", "title": "Google/benchmark inconsistent results", "body": "<p>I just run your example on my machine and I see the below result: </p>\n\n<pre><code>----------------------------------------------------------------\nBenchmark                      Time             CPU   Iterations\n----------------------------------------------------------------\nBM_ctime                    3.26 ns         3.25 ns    215110555\nBM_sysTime                  3.26 ns         3.25 ns    215154791\nBM_chronoMilliseconds       2502 ns         2502 ns       279856\nBM_chronoSececonds          2502 ns         2501 ns       279854\n</code></pre>\n\n<p>Assuming that a <code>NOP</code> instruction takes 1 clock cycle, which is <code>0.5 ns</code> on my system, the ratio <code>CPU time / NoOp time</code> is around <code>5000</code>.</p>\n\n<p>However, I should not be really concerned because that is not what bench-marking is meant for at least for me. It doesn't make sense to compare values on my system with the values from Quick bench. Rather, I use benchmark values to compare different implementations or algorithms on the same machine, eliminating such doubts.</p>\n"}], "owner": {"reputation": 31, "user_id": 10145168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60d5f4eb4f975789d37a42f9b753af1c?s=128&d=identicon&r=PG&f=1", "display_name": "Orangeberry", "link": "https://stackoverflow.com/users/10145168/orangeberry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1587126534, "creation_date": 1535541790, "last_edit_date": 1535541902, "question_id": 52076296, "link": "https://stackoverflow.com/questions/52076296/google-benchmark-inconsistent-results", "title": "Google/benchmark inconsistent results", "body": "<p>I'm new to using Google Benchmark and receive different results running the same benchmark (below), which retrieves the local time using C++, when running the code locally vs on <a href=\"http://quick-bench.com\" rel=\"nofollow noreferrer\">Quick-Bench.com</a>. Both times I used GCC 8.2 and -O3. </p>\n\n<p>Why do the results vary dramatically between running locally vs on quick-bench.com? Which is correct?  </p>\n\n<pre><code>#include &lt;benchmark/benchmark.h&gt;\n#include &lt;ctime&gt;      \n#include &lt;sys/time.h&gt; \n#include &lt;chrono&gt;     \n\n\nstatic void BM_ctime(benchmark::State&amp; state) {\n  unsigned long long count = 0;\n\n  for (auto _ : state) {\n    std::time_t sec = std::time(0);  \n\n    benchmark::DoNotOptimize(count += sec);\n  }\n}\n\nBENCHMARK(BM_ctime);\n\n\nstatic void BM_sysTime(benchmark::State&amp; state) {\n  unsigned long long count = 0;\n\n  for (auto _ : state) {\n    unsigned long sec = time(NULL);\n\n    benchmark::DoNotOptimize(count += sec);\n  }\n}\n\nBENCHMARK(BM_sysTime);\n\n\nstatic void BM_chronoMilliseconds(benchmark::State&amp; state) {\n  unsigned long long count = 0;\n\n  for (auto _ : state) {\n    unsigned long long ms = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(\n      std::chrono::system_clock::now().time_since_epoch()\n    ).count();\n\n    benchmark::DoNotOptimize(count += ms);\n  }\n}\n\nBENCHMARK(BM_chronoMilliseconds);\n\nstatic void BM_chronoSececonds(benchmark::State&amp; state) {\n  unsigned long long count = 0;\n\n  for (auto _ : state) {\n    unsigned long long sec = std::chrono::duration_cast&lt;std::chrono::seconds&gt;(\n      std::chrono::system_clock::now().time_since_epoch()\n    ).count();\n\n    benchmark::DoNotOptimize(count += sec);\n  }\n}\n\nBENCHMARK(BM_chronoSececonds);\n</code></pre>\n\n<p>Locally the following results are produced:</p>\n\n<pre><code>-------------------------------------------------------------\nBenchmark                      Time           CPU Iterations\n-------------------------------------------------------------\nBM_ctime                     183 ns        175 ns    4082013\nBM_sysTime                   197 ns        179 ns    4004829\nBM_chronoMilliseconds         37 ns         36 ns   19092506\nBM_chronoSececonds            37 ns         36 ns   19057991\n</code></pre>\n\n<p>QuickBench results:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PqnyS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PqnyS.png\" alt=\"\"></a></p>\n"}, {"tags": ["c++", "type-conversion", "const-iterator"], "comments": [{"owner": {"reputation": 1441, "user_id": 4403144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1wpGT.png?s=128&g=1", "display_name": "brianolive", "link": "https://stackoverflow.com/users/4403144/brianolive"}, "edited": false, "score": 0, "creation_date": 1535540039, "post_id": 52075579, "comment_id": 91100949, "body": "I am not sure about your idea of type unmanageability. Being explicit in your type declaration, if that solves your problem, is a fine approach. <code>auto</code> is convenient, but I wouldn\u2019t say it is necessarily more manageable than being clear on the types you are using."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1535540218, "post_id": 52075579, "comment_id": 91101067, "body": "I would definitely move all this stuff out of loop prologue. <code>auto Iter{Target.cbegin()}; decltype(Target)::const_iterator const IterEnd{std::stable_partition(Target.begin(), Target.end(), Check)};</code>"}, {"owner": {"reputation": 2787, "user_id": 2717959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015c694e000283d0e5ff92aad3232e88?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Singh", "link": "https://stackoverflow.com/users/2717959/nishant-singh"}, "edited": false, "score": 2, "creation_date": 1535540220, "post_id": 52075579, "comment_id": 91101068, "body": "you can use <code>decltype(Target.cbegin()) IterEnd</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1535540514, "post_id": 52075579, "comment_id": 91101252, "body": "Careful with your terminology: making the iterator const <i>doesn&#39;t</i> make sense as you&#39;ll be incrementing it. ;)"}, {"owner": {"reputation": 293, "user_id": 10175089, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/8e02341885a5deb7306e7049d659cbdf?s=128&d=identicon&r=PG", "display_name": "dan", "link": "https://stackoverflow.com/users/10175089/dan"}, "edited": false, "score": 2, "creation_date": 1535540948, "post_id": 52075579, "comment_id": 91101557, "body": "Also note that <code>stable_partition</code> reorders the elements of <code>Target</code> (and possibly the first), so <code>Iter</code> might not point to the first element (depends on the container used). Invoke <code>stable_partition</code> first before you initialize <code>Iter</code>."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1535540579, "post_id": 52075804, "comment_id": 91101300, "body": "The call to <code>std::stable_partition</code> is in the preamble, so while philosophically we may claim it&#39;s &quot;during the loop&quot;, it&#39;s not really, and thus your solution is not only good but also equivalent to the request. +1 but consider de-wrongising that opening para"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1535540944, "post_id": 52075804, "comment_id": 91101553, "body": "You still say that the OP &quot;needs&quot; to pull <code>std::stable_partition</code> before the <code>for</code>, which is not true, though it does look much better this way (and I&#39;m not sure the OP can get exactly what they want without it due to the single declaration statement in the preamble mixed with <code>for</code> - perhaps that&#39;s what you meant acutally?)"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1535541010, "post_id": 52075804, "comment_id": 91101602, "body": "@LightnessRacesinOrbit hm... he could by using a cast"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1535541163, "post_id": 52075804, "comment_id": 91101713, "body": "Indeed but I believe the point of the question is &quot;cast to what? (without writing everything out rigidly)&quot; - your answer does solve that perfectly by splitting the declaration into two, allowing us to use auto/decltype at both stages."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1535541220, "post_id": 52075804, "comment_id": 91101750, "body": "Does <code>auto x = f(), y = (decltype(x))g()</code> work I wonder (bet not)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1535541645, "post_id": 52075804, "comment_id": 91102016, "body": "Well, holy hannah!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1535541660, "post_id": 52075804, "comment_id": 91102027, "body": "(Answer&#39;s perfect now IMO)"}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 2, "last_activity_date": 1535541237, "last_edit_date": 1535541237, "creation_date": 1535540369, "answer_id": 52075804, "question_id": 52075579, "link": "https://stackoverflow.com/questions/52075579/casting-a-returned-iterator-to-const/52075804#52075804", "title": "casting a returned iterator to const", "body": "<p>The most clear solution in my opinion is to pull <code>std::stable_partition</code> before the <code>for</code>. This will result in an equivalent algorithm.</p>\n\n<p>The problem is that <code>stable_partition</code> returns a iterator that can modify elements. Fortunately there is an implicit conversion from <code>container::iterator</code> to <code>container::const_iterator</code> (for most standard containers). To make the conversion you can specify the type of <code>IterEnd</code> with <code>std::vector&lt;T::const_iterator</code>, or <code>decltyp(Target.cbegin()</code> or my personal preference:</p>\n\n<pre><code>auto Iter = Target.cbegin();\ndecltype(Iter) IterEnd = std::stable_partition(Target.begin(), Target.end(), Check);\n\nfor (; Iter != IterEnd; ++Iter)\n{\n}\n</code></pre>\n\n<p>For completeness you could keep all inside the <code>for</code> if you wish but it's less readable in my opinion:</p>\n\n<pre><code>for (auto Iter = Target.cbegin(),\n        IterEnd = (decltype(Iter)) std::stable_partition(Target.begin(), Target.end(), Check);\n     Iter != IterEnd;\n     ++Iter)\n{}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1535541094, "creation_date": 1535541094, "answer_id": 52076061, "question_id": 52075579, "link": "https://stackoverflow.com/questions/52075579/casting-a-returned-iterator-to-const/52076061#52076061", "title": "casting a returned iterator to const", "body": "<p>Here's one way to express the idea through a functional interface:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\nnamespace detail {\n    template&lt;class Container, class F&gt;\n    struct const_partitioned_target\n    {\n        using container_type = std::decay_t&lt;Container&gt;;\n        using const_iterator = typename container_type::const_iterator;\n\n        const_partitioned_target(Container&amp; cont, F f)\n            : first(cont.cbegin())\n            , last(std::partition(cont.begin(), cont.end(), f))\n        {\n\n        }\n\n        const_iterator begin() const { return first; }\n\n        const_iterator end() const { return last; }\n\n        const_iterator first, last;\n    };\n}\n\ntemplate&lt;class Container, class F&gt;\nauto const_partitioned_target(Container&amp; cont, F&amp;&amp; f)\n{\n    return detail::const_partitioned_target&lt;Container, std::decay_t&lt;F&gt;&gt;(cont, std::forward&lt;F&gt;(f));\n};\n\nint main()\n{\n    std::vector&lt;int&gt; Target { 1, 2, 6, 9, 10, 20, 30, 40 };\n\n    auto Check = [](auto&amp;&amp; x)\n    {\n        return x &lt; 10;\n    };\n\n    for(auto&amp;&amp; elem : const_partitioned_target(Target, Check))\n    {\n        // elem will have the type: int const&amp;\n        std::cout &lt;&lt; elem &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p>expected output:</p>\n\n<pre><code>1\n2\n6\n9\n</code></pre>\n"}], "owner": {"reputation": 782, "user_id": 10030931, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kzp76oFZb2w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ogXL9KxWaKfJmOrkOHZqSaF-my0g/mo/photo.jpg?sz=128", "display_name": "Andrea Bocco", "link": "https://stackoverflow.com/users/10030931/andrea-bocco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1535544601, "creation_date": 1535539661, "last_edit_date": 1535544601, "question_id": 52075579, "link": "https://stackoverflow.com/questions/52075579/casting-a-returned-iterator-to-const", "title": "casting a returned iterator to const", "body": "<p>I have the following <code>for</code> statement in my code:</p>\n\n<pre><code>for (auto Iter = Target.begin(), \n        IterEnd = std::stable_partition(Target.begin(), Target.end(), Check);\n    Iter != IterEnd; ++Iter)\n    { /* loop statement */ }\n</code></pre>\n\n<p>The point is that the loop doesn't modify elements of the container, so it would make sense to declare iterators as <code>const_iterator</code>. I can easily solve the problem for the first using <code>cbegin()</code>, but the second is more complex. I can't declare <code>cbegin()</code> and <code>cend()</code> inside <code>stable_partition</code>, since of course <code>stable_partition</code> needs <code>non const_iterators</code> to do its work.</p>\n\n<p>A possible solution is to replace auto with the proper type, which in this case was <code>std::vector&lt; std::string &gt;::const_iterator</code>. This forces the conversion from <code>iterator</code> to <code>const_iterator</code> on the second assignment.</p>\n\n<p>Though, I don't like it. Types can easily and rapidly become unmanageable, so I'm looking for a solution that lets me use auto, without the need to declare something weird outside the loop. Any suggestion?</p>\n"}, {"tags": ["c++", "function", "methods"], "comments": [{"owner": {"reputation": 151, "user_id": 8997005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96419829db8a57b0989928489a07b229?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Peedah", "link": "https://stackoverflow.com/users/8997005/daniel-peedah"}, "reply_to_user": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "edited": false, "score": 0, "creation_date": 1535541156, "post_id": 52075563, "comment_id": 91101700, "body": "fetchRecEv is a public member method of recEvent, and that&#39;s why its as a member function in the cpp file"}, {"owner": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "edited": false, "score": 0, "creation_date": 1535541272, "post_id": 52075563, "comment_id": 91101785, "body": "ok, I misunderstood, I&#39;m deleting previous comment"}, {"owner": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "edited": false, "score": 1, "creation_date": 1535541498, "post_id": 52075563, "comment_id": 91101918, "body": "I would prefer a different <code>someClass</code> (with a meaningful name) with a (non static) member method <code>fetchRecEvent</code>, vs a plain global function. It can help you later in modify the code if you want, e.g, use a derived <code>SomeInheritedClass</code> for fetching records, with little or no modification in client code. In every case, I would avoid having a method <code>fetchRecEvent</code> (which could be also named <code>loadRecEventsFromDatabase</code>) in your <code>recEvents</code> class. google for Single Responsability Principle (SRP)"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "edited": false, "score": 1, "creation_date": 1535542427, "post_id": 52075563, "comment_id": 91102495, "body": "@GianPaolo: Why are you introducing an artificial class just so that <code>fetchRecEvent</code> can be a member? Having a <code>SomeInheritedClass</code> is not an argument. Yes, you can now change <code>SomeBaseClass::fetchRecEvent( )</code> to <code>SomeInheritedClass::fetchRecEvent( )</code> in client code. That is <i>worse</i> than changing client code to <code>fetchRecEvent_withRetry( )</code> - both are a name change, but <code>SomeInheritedClass</code> would introduce yet another unnecessary class."}, {"owner": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1535543016, "post_id": 52075563, "comment_id": 91102877, "body": "@MSalters I would go with some factory pattern: have a method <code>CreateRecEventLoader</code>, which returns a <code>shared_ptr&lt;BaseRecEventLoader&gt;</code>, and client code will use something such <code>auto loader = CreateRecEventLoader(); loader-&gt;fetchRecEvent();</code>. when later you will introduce a loader that read from file and not from db, just modify the factory method and return a <code>RecEventLoaderFromFile</code> (the new inherited class) and don&#39;t touch client code.(ok, methods and classes naming can be enhanced, but that&#39;s not the point)."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "edited": false, "score": 1, "creation_date": 1535543454, "post_id": 52075563, "comment_id": 91103139, "body": "@GianPaolo: If you want a factory, just make that return a <code>std::function&lt; decltype(fetchRecEvent) &gt;</code>. And when you say <b>method</b> <code>CreateRecEventLoader</code>, you&#39;re implying that is also a class member, so we&#39;re talking factory factories at this point. It looks like you&#39;re suffering from a rather severe case of Java."}, {"owner": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1535543777, "post_id": 52075563, "comment_id": 91103347, "body": "@MSalter, I agree with your last comment, factory can be achieved like you say, and not only with a different class. I&#39;m C# biased, not Java, but actually there is not much difference. The point is to write client code that can be open to implementation modification without the need to rewrite the client code. a method returning a function used in client code gets the goal. I would add to your answer the function factory suggestion"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "edited": false, "score": 0, "creation_date": 1535550022, "post_id": 52075563, "comment_id": 91107705, "body": "@GianPaolo and MSalters&#39; point is that you can do that outside the keyword <code>class</code> in C++"}, {"owner": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1535553569, "post_id": 52075563, "comment_id": 91110276, "body": "yes @Caleth, as I told, I agree with with MSalter that you can get the goal using an <code>std:function</code> instead of a <code>class</code>. My point is that in general is better to decouple and to write code robust to further requirements changes. both my suggestion and the factory pattern returning a function get this. I don&#39;t see any problem having one more class with its method(s), no big difference from writing one or more global methods. But using a std::function is maybe the &quot;right&quot; way to do it in modern c++."}], "answers": [{"comments": [{"owner": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "edited": false, "score": 0, "creation_date": 1535541810, "post_id": 52076110, "comment_id": 91102130, "body": "The question is maybe opinion based, this answer is an opinion I disagree with. See my comment on OP on why I would prefer a class method vs a global function as in your suggestion, even if enclosed in some namespace"}, {"owner": {"reputation": 151, "user_id": 8997005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96419829db8a57b0989928489a07b229?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Peedah", "link": "https://stackoverflow.com/users/8997005/daniel-peedah"}, "edited": false, "score": 0, "creation_date": 1535542139, "post_id": 52076110, "comment_id": 91102324, "body": "Sorry, to make things clear, I am in an internship and am doing some code for a new part of their system while learning, I am offline and so a lot of my code does not run due to not having access to the whole platform as of yet. I will make sure to clean up my format thank you."}], "tags": [], "owner": {"reputation": 7044, "user_id": 7670262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zdDY.jpg?s=128&g=1", "display_name": "Azeem", "link": "https://stackoverflow.com/users/7670262/azeem"}, "is_accepted": false, "score": 0, "last_activity_date": 1535542300, "last_edit_date": 1535542300, "creation_date": 1535541231, "answer_id": 52076110, "question_id": 52075563, "link": "https://stackoverflow.com/questions/52075563/placement-and-use-of-function-and-methods/52076110#52076110", "title": "Placement and use of Function and Methods", "body": "<p>The best approach would be to declare / define these in separate <code>.h</code> / <code>.cpp</code> files under a <code>Utils</code> namespace. Please note that the namespace <code>Utils</code> is just an idea. You should have a better idea where your free functions logically belong and to which namespace.</p>\n\n<p>For example:</p>\n\n<p>In <code>utils.h</code> header:</p>\n\n<pre><code>namespace Utils {\n\nvoid doSomething();\n\n} // Utils\n</code></pre>\n\n<p>And, in <code>.cpp</code> source file:</p>\n\n<pre><code>namespace Utils {\n\nvoid doSomething()\n{\n    // ...\n}\n\n} // Utils\n</code></pre>\n\n<hr>\n\n<p>Apart from this, your code had some serious formatting problems. Make use of your IDE's source code formatting features so it would not take much of your time.</p>\n\n<hr>\n\n<p>You are using <a href=\"https://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">range-for</a> in your code so I assume you are working with at least C++11. And, there's a raw pointer, use <a href=\"https://en.cppreference.com/book/intro/smart_pointers\" rel=\"nofollow noreferrer\">smart pointers</a> instead.</p>\n\n<p><a href=\"https://github.com/isocpp/CppCoreGuidelines\" rel=\"nofollow noreferrer\">C++ Core Guidelines</a> would be a quite useful resource for incorporating C++ features safely.</p>\n"}, {"comments": [{"owner": {"reputation": 151, "user_id": 8997005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96419829db8a57b0989928489a07b229?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Peedah", "link": "https://stackoverflow.com/users/8997005/daniel-peedah"}, "edited": false, "score": 0, "creation_date": 1535542284, "post_id": 52076307, "comment_id": 91102410, "body": "Thanks for the response, I&#39;ve decided to move the database handling features to the main cpp file of the program, my main issue before was that functions like fetchEvents were part of class recEvents but were outputting vectors of recEvents, in short, to utilise the program, an instance of recEvents would have to be made to then use these functions? Functions that themselves create recEvents."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 151, "user_id": 8997005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96419829db8a57b0989928489a07b229?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Peedah", "link": "https://stackoverflow.com/users/8997005/daniel-peedah"}, "edited": false, "score": 1, "creation_date": 1535542595, "post_id": 52076307, "comment_id": 91102606, "body": "@DanielPeedah: Actually, a <code>static</code> method can be called without an object instance - check your C++ book for details. You would call it as <code>auto events = RecEvent::fetchRecEv( );</code> so class name instead of object name, and <code>::</code> instead of <code>.</code> in front of <code>fetchRecEv</code>."}, {"owner": {"reputation": 151, "user_id": 8997005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96419829db8a57b0989928489a07b229?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Peedah", "link": "https://stackoverflow.com/users/8997005/daniel-peedah"}, "edited": false, "score": 0, "creation_date": 1535543299, "post_id": 52076307, "comment_id": 91103033, "body": "@MSalters I think as a beginner programmer it keeps bugging me that have a method in a class that creates instances of the class, should I not be bothered?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 151, "user_id": 8997005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96419829db8a57b0989928489a07b229?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Peedah", "link": "https://stackoverflow.com/users/8997005/daniel-peedah"}, "edited": false, "score": 0, "creation_date": 1535543653, "post_id": 52076307, "comment_id": 91103271, "body": "@DanielPeedah: Well, in a sense that is perfectly normal. Constructors are methods of a class that create <i>one</i> instance of that class. In this case, you want to create <i>multiple</i> instances of that class with a single function call, so you can&#39;t use a constructor, but it still could be a <code>static</code> method."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 2, "last_activity_date": 1535541830, "creation_date": 1535541830, "answer_id": 52076307, "question_id": 52075563, "link": "https://stackoverflow.com/questions/52075563/placement-and-use-of-function-and-methods/52076307#52076307", "title": "Placement and use of Function and Methods", "body": "<p>Free functions are first-class citizens in C++. If there's no reason for <code>fetchRecEv</code> to be  a member of <code>class RecEvent</code>, then it's perfectly OK for it to be a free function.</p>\n\n<p>Yet the function apparently  is related directly to <code>class RecEvent</code>, which is an argument in favor of sharing the same header. If you would put <code>fetchRecEv</code> in its own header, then that header would still need to include the header declaring <code>class RecEvent</code>. Nested headers are not a real improvement.</p>\n\n<p>@Azeem suggests a <code>Utils</code> namespace. That's probably a bad idea. It's good C++ practice to keep free functions in the namespace to which they logically belong. This becomes essential when you need Argument-Dependent Lookup. Defining an <code>operator+</code> in a \"utils\" namespace simply will not work.</p>\n"}], "owner": {"reputation": 151, "user_id": 8997005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96419829db8a57b0989928489a07b229?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Peedah", "link": "https://stackoverflow.com/users/8997005/daniel-peedah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 52076307, "answer_count": 2, "score": 0, "last_activity_date": 1535542300, "creation_date": 1535539595, "last_edit_date": 1535540311, "question_id": 52075563, "link": "https://stackoverflow.com/questions/52075563/placement-and-use-of-function-and-methods", "title": "Placement and use of Function and Methods", "body": "<p>I have some code that manipulates a database, for this it requires a class to translate the rows of a table into.</p>\n\n<p>Below is part of the <code>.h</code> file I have right now of the class in question, with its prototypes, which are then defined in a <code>.cpp</code> file:</p>\n\n<pre><code>namespace A {\nnamespace B {\nnamespace C {\n\nclass recEvent\n{\npublic:\n  struct filedEvent\n  {\n    int id;\n    std::string title;\n    std::string desc;\n    std::string stime;\n    std::string dur;\n    int recid;\n    int venid;\n  };\n\n  recEvent();\n  recEvent(int recid, std::string title, std::string description, int duration,\n           recurringType recurType, time_t startFrom, endType endingType,\n           time_t dateEnd, int occurences, int venueid);\n\n  void setId(int recid);\n  void setTitle(std::string title);\n  // ...\n\n  int getId();\n  std::string getTitle();\n  // ...\n};\n\n} // A\n} // B\n} // C\n</code></pre>\n\n<p>I then have the prototype functions that deal with the database within this header, the problem I have is that these functions do not deal with any of the values in <code>RecEvent</code>, however they use <code>recEvent</code> classes to work [like creating vectors of type <code>recEvent</code>].</p>\n\n<p>Just to ask the question, where would be best to declare / define these functions, they don't particularly require to be within a class, and are just a bunch of functions that work together to do a couple of database queries like so:</p>\n\n<p>The public <code>fetchRecEv()</code> method prototype in class header <code>recEv</code>:</p>\n\n<pre><code>std::vector&lt;recEvent&gt; fectchRecEv();\n</code></pre>\n\n<p>the <code>.cpp</code> definition:</p>\n\n<pre><code>std::vector&lt;recEvent&gt; recEvent::fetchRecEv()\n{\n    Pocco::Data::Session* db_session = this-&gt;platform-&gt;getLocalInterfaceSession();\n    Statement ss(*db_session);\n    std::vector&lt;recEvent&gt; allRecEv;\n\n    ss &lt; \"SELECT Id,Title,Description,Duration,RecurringType,StartFrom,EndType,DateEnd,Occurences,Venueid FROM RecurringEvents\", now;\n    Poco::Data::RecordSet RecordSet(ss);\n    for (auto&amp; record : RecordSet) {\n        /*recEvents made and put in vector allRecEv*/\n    }\n    return allRecEv;\n}\n</code></pre>\n\n<p>I'm tempted to just keep the <code>recEvent</code> class simple and create another <code>.h</code> file specifically for these database functions, however these functions don't require a class, so I am not sure as to how to go about this.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 736, "user_id": 8614565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223dd9dad7b32ac3a1881be17469e545?s=128&d=identicon&r=PG&f=1", "display_name": "KYHSGeekCode", "link": "https://stackoverflow.com/users/8614565/kyhsgeekcode"}, "edited": false, "score": 0, "creation_date": 1535540020, "post_id": 52075523, "comment_id": 91100941, "body": "Please note that <code>char</code> is <code>signed</code> by default on some compilers."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535540514, "post_id": 52075523, "comment_id": 91101250, "body": "What is <code>LPCSTR</code>?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535540723, "post_id": 52075523, "comment_id": 91101394, "body": "@melpomene <a href=\"https://stackoverflow.com/a/321448/560648\">stackoverflow.com/a/321448/560648</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1535540805, "post_id": 52075523, "comment_id": 91101457, "body": "Something&#39;s not quite right here because <code>LPCSTR</code> is supposed to be <code>const char*</code> (<a href=\"https://msdn.microsoft.com/en-us/library/cc230350.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/cc230350.aspx</a>). What is &quot;the&quot; security tool?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 38927, "user_id": 279313, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ab0299c28ce807a9ca21041ed6ef085?s=128&d=identicon&r=PG", "display_name": "Alex F", "link": "https://stackoverflow.com/users/279313/alex-f"}, "edited": false, "score": 0, "creation_date": 1535540853, "post_id": 52075523, "comment_id": 91101492, "body": "@AlexF It would be preferable to understand the cause of the problem."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 736, "user_id": 8614565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223dd9dad7b32ac3a1881be17469e545?s=128&d=identicon&r=PG&f=1", "display_name": "KYHSGeekCode", "link": "https://stackoverflow.com/users/8614565/kyhsgeekcode"}, "edited": false, "score": 0, "creation_date": 1535540880, "post_id": 52075523, "comment_id": 91101509, "body": "@KYHSGeekCode Signed yes, <code>signed</code> no - <code>char</code> is still just <code>char</code> in any case"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1535541580, "post_id": 52075523, "comment_id": 91101976, "body": "@LightnessRacesinOrbit That assumes OP is using the standard windows headers. I&#39;d like to see a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1001, "user_id": 2713353, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b1ac2661ae8385d6d7d6ce7d406e01f0?s=128&d=identicon&r=PG&f=1", "display_name": "Siva", "link": "https://stackoverflow.com/users/2713353/siva"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1535542929, "post_id": 52075523, "comment_id": 91102824, "body": "@LightnessRacesinOrbit I updated my question with what tool i am using. The code that i added in my question is where the security tool is complaining about. On what basis it is considering char array in return statement as signed and const char*(return type) as unsigned? That is what exactly i meant. Please suggest if any way."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1535544921, "post_id": 52075523, "comment_id": 91104110, "body": "@Siva Yeah I don&#39;t know. Unless the tool is buggy, or <code>Text</code> is not what the question says it is, or LPCSTR is not the MS definition... <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please!"}, {"owner": {"reputation": 1001, "user_id": 2713353, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b1ac2661ae8385d6d7d6ce7d406e01f0?s=128&d=identicon&r=PG&f=1", "display_name": "Siva", "link": "https://stackoverflow.com/users/2713353/siva"}, "edited": false, "score": 0, "creation_date": 1535545477, "post_id": 52075523, "comment_id": 91104458, "body": "I found the answer finally. As i told &quot;Text&quot; is a char array which is of type signed whereas LPCTSTR which is const char* the return type for the method GetText() which is of unsigned type. As the method expects an unsigned value as return but in actual the method is returning signed value(char array) and this is the reason why the tool is complaining. I found out the type of const char* is signed or unsigned by using &quot;std::is_signed&quot; from &quot;type_traits.h&quot; file."}, {"owner": {"reputation": 779, "user_id": 9220132, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70Mx.jpg?s=128&g=1", "display_name": "jwm", "link": "https://stackoverflow.com/users/9220132/jwm"}, "edited": false, "score": 0, "creation_date": 1605826331, "post_id": 52075523, "comment_id": 114779170, "body": "even with your edit, the type of <code>CHAR</code> is not stated."}], "owner": {"reputation": 1001, "user_id": 2713353, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b1ac2661ae8385d6d7d6ce7d406e01f0?s=128&d=identicon&r=PG&f=1", "display_name": "Siva", "link": "https://stackoverflow.com/users/2713353/siva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1535542716, "creation_date": 1535539489, "last_edit_date": 1535542716, "question_id": 52075523, "link": "https://stackoverflow.com/questions/52075523/type-mismatch-signed-to-unsigned", "title": "Type Mismatch: Signed to Unsigned", "body": "<p>I have the following line of code,</p>\n\n<pre><code>const CHAR* GetText() { return Text; } // Text is char[16]\"Character Array\"\n</code></pre>\n\n<p>The Fortify security tool is complaining about the above line as follows:\n<strong>Type Mismatch: Signed to Unsigned</strong> GetText()is declared to return an unsigned value, but on line xxx it returns a signed value.</p>\n\n<p>I did not understand where i am converting it from signed to unsigned. I do understand the signed to unsigned conversion stuff if it is related to integers.</p>\n\n<p>If i inferred correctly from the line of code,\nIs char which being returned a signed char?\nIs LPCSTR(const char*)the return type is unsigned char?</p>\n\n<p>How do we assume (Text-which is a string) is signed and unsigned?</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c++", "lambda", "compiler-errors", "clang", "derived-class"], "comments": [{"owner": {"reputation": 1751, "user_id": 3536140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcc1b905bfd7fe58a60cbf8bc991408a?s=128&d=identicon&r=PG&f=1", "display_name": "vdavid", "link": "https://stackoverflow.com/users/3536140/vdavid"}, "edited": false, "score": 1, "creation_date": 1535543784, "post_id": 52075445, "comment_id": 91103352, "body": "I do not see why the body of a lambda function should be treated any differently than the body of a non-lambda function. And since your inheritance is perfectly valid in a non-lambda function, what you describe looks like a bug to me. Moreover, if you add <code>static_assert(std::is_base_of&lt;Base, Derived&gt;::value,&quot;Not base of&quot;);</code> in your lambda function, the compiler is just fine (tested with godbolt, clang 3.6, --std=c++1y)."}, {"owner": {"reputation": 1751, "user_id": 3536140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcc1b905bfd7fe58a60cbf8bc991408a?s=128&d=identicon&r=PG&f=1", "display_name": "vdavid", "link": "https://stackoverflow.com/users/3536140/vdavid"}, "edited": false, "score": 0, "creation_date": 1535543846, "post_id": 52075445, "comment_id": 91103404, "body": "As for <code>using Base=Base;</code> it is exactly as if you wrote <code>typedef Base Base;</code> and the typedef-name is equivalent to the type without the <code>typedef</code> keyword. In other words, <code>Base</code> after the typedef (or using) is strictly the same as <code>Base</code> before typedef (or using)."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1535545849, "post_id": 52075445, "comment_id": 91104698, "body": "What does <code>explicit</code> do in the default constructor <code>explicit Derived()</code>?  I&#39;ve seen <code>explicit</code> used for single parameter constructors, but not for a default constructor and I&#39;m intrigued (and my Google-fu has failed me)."}, {"owner": {"reputation": 30359, "user_id": 255688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74b63650ed07d745fd9accf52e4d286b?s=128&d=identicon&r=PG", "display_name": "phimuemue", "link": "https://stackoverflow.com/users/255688/phimuemue"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1535546586, "post_id": 52075445, "comment_id": 91105221, "body": "@Eljay See <a href=\"https://stackoverflow.com/questions/2836939/purpose-of-explicit-default-constructors\" title=\"purpose of explicit default constructors\">stackoverflow.com/questions/2836939/&hellip;</a> for more information on <code>explicit</code>. For my example, it is redundant (was actually a leftover from my original problem)."}], "owner": {"reputation": 30359, "user_id": 255688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74b63650ed07d745fd9accf52e4d286b?s=128&d=identicon&r=PG", "display_name": "phimuemue", "link": "https://stackoverflow.com/users/255688/phimuemue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1535546498, "creation_date": 1535539250, "last_edit_date": 1535546498, "question_id": 52075445, "link": "https://stackoverflow.com/questions/52075445/clang-not-recognizing-base-class-within-lambda", "title": "clang not recognizing base class within lambda", "body": "<p>I have the following struct <code>MyStruct</code> that calls <code>Foo&lt;int&gt;</code> on construction:</p>\n\n<pre><code>struct MyStruct {\n    MyStruct() {\n        Foo&lt;int&gt;();\n    }\n\n    template&lt;typename T&gt;\n    void Foo() {\n        []() {\n            struct Base {\n                Base(int n) {}\n            };\n            struct Derived : Base {\n                // using Base=Base; // needs to be uncommented for Apple LLVM version 9.1.0 (clang-902.0.39.2)\n                Derived() :\n                    Base(0) // problematic line\n                {}\n            } derived;\n        };\n    }\n};\n</code></pre>\n\n<p>I tried to compile this with clang (via <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">godbolt</a>, command line params <code>--std=c++1y</code>):</p>\n\n<ul>\n<li>3.6: <code>error: type 'Base' is not a direct or virtual base of 'Derived'</code> (see <code>problematic line</code> in code above)</li>\n<li>3.7 and newer: compiles (with a warning about unused expressions)</li>\n</ul>\n\n<p>So I expected that with newer versions this should be ok. However, when I tried to compile it on a Mac using XCode9 (which, <a href=\"https://news.ycombinator.com/item?id=16545037\" rel=\"nofollow noreferrer\">according to this</a>, uses clang 4.0 (<code>clang --version</code> gives <code>Apple LLVM version 9.1.0 (clang-902.0.39.2)</code>)), I get an error from the same line as issued by clang 3.6:</p>\n\n<pre><code>error: member initializer 'Base' does not name a non-static data member or base class\n</code></pre>\n\n<p>As a workaround, I tried introducing <code>using Base=Base</code> within <code>struct Derived</code> (as indicated), which made it compile via XCode. (As a sidenote: Using the same workaround did not work for clang 3.6 on godbolt.)</p>\n\n<p>So here are my questions:</p>\n\n<ul>\n<li>Is this a compiler bug? If yes: Is it documented somewhere?</li>\n<li>Is my workaround <code>using Base=Base</code> valid, well-defined C++?</li>\n</ul>\n"}, {"tags": ["c++", "c++11", "language-lawyer"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 4, "creation_date": 1535543519, "post_id": 52075586, "comment_id": 91103186, "body": "+1 and see also <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_closed.html#1501\" rel=\"nofollow noreferrer\">core language issue 1501</a> which follows the same logic as this answer to explicitly say that it&#39;s invalid."}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 34, "last_activity_date": 1546166372, "last_edit_date": 1546166372, "creation_date": 1535539686, "answer_id": 52075586, "question_id": 52075339, "link": "https://stackoverflow.com/questions/52075339/is-double-braced-scalar-initialization-allowed-by-the-c-standard/52075586#52075586", "title": "Is double-braced scalar initialization allowed by the C++ standard?", "body": "<p>This is ill-formed. gcc is wrong to accept it and clang seems to allow it as an extension, as <a href=\"https://godbolt.org/z/1Xa35k\" rel=\"nofollow noreferrer\">it warns about it</a>.</p>\n\n<p>I'm going to quote the latest draft, but it doesn't make a difference. List initialization works as follows as per <a href=\"http://eel.is/c++draft/dcl.init.list#3\" rel=\"nofollow noreferrer\">[dcl.init.list]</a>, where T is <code>int</code> in this case:</p>\n\n<ul>\n<li>If the initializer list is a <em>designated initializer list</em>, [...] => it's not</li>\n<li>If T is an aggregate class [...] => it's not</li>\n<li>If T is a character array [...] => it's not.</li>\n<li>If T is an aggregate [...] => it's not (only arrays and classes can be aggregates)</li>\n<li>If the initializer list has no elements [...] => it doesn't</li>\n<li>If T is a specialization of std::initializer_list [...] => it's not</li>\n<li>If T is a class type [...] => it's not</li>\n<li>If T is an enumeration with fixed underlying type [...] => it's not</li>\n<li>If the initializer list has a single element of type E [...] => a braced initializer list has no type, so no</li>\n<li>If T is a reference type [...] => it isn't</li>\n<li>If the initializer list has no elements [...] => it doesn't</li>\n<li>Otherwise the program is ill-formed</li>\n</ul>\n"}], "owner": {"reputation": 1193, "user_id": 5935594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/22667135bcdc2057427f772000a1fc73?s=128&d=identicon&r=PG&f=1", "display_name": "Igor", "link": "https://stackoverflow.com/users/5935594/igor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1756, "favorite_count": 2, "accepted_answer_id": 52075586, "answer_count": 1, "score": 34, "last_activity_date": 1546166372, "creation_date": 1535538863, "last_edit_date": 1535547623, "question_id": 52075339, "link": "https://stackoverflow.com/questions/52075339/is-double-braced-scalar-initialization-allowed-by-the-c-standard", "title": "Is double-braced scalar initialization allowed by the C++ standard?", "body": "<p>I have the following code:</p>\n\n<pre><code>int x = {{}};\n</code></pre>\n\n<p>Is this syntax valid according to the C++ standard? (I'm interested in C++11 and later.)</p>\n\n<p>When using the latest compilers there is no problem, however in some older ones (e.g. GCC 4.8.5) it gives following error:</p>\n\n<blockquote>\n  <p>error: braces around scalar initializer for type 'int'</p>\n</blockquote>\n"}, {"tags": ["c++", "c++17", "type-erasure", "range-v3"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1535573429, "post_id": 52075309, "comment_id": 91120985, "body": "Do you care if it is 3x-10x slower than the non-type erased version?  Because that makes it easier.  Have you tried any of the type erasure in rangesv3?"}, {"owner": {"reputation": 2363, "user_id": 4588453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51da95e02741a304f3620d3b9697eda9?s=128&d=identicon&r=PG&f=1", "display_name": "pseyfert", "link": "https://stackoverflow.com/users/4588453/pseyfert"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1535616642, "post_id": 52075309, "comment_id": 91134142, "body": "This is meant to go into a time critical application. If type erasure comes at a price, I&#39;ll still give it a try and profile if I can afford it."}], "answers": [{"comments": [{"owner": {"reputation": 2363, "user_id": 4588453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51da95e02741a304f3620d3b9697eda9?s=128&d=identicon&r=PG&f=1", "display_name": "pseyfert", "link": "https://stackoverflow.com/users/4588453/pseyfert"}, "edited": false, "score": 0, "creation_date": 1535708098, "post_id": 52085464, "comment_id": 91175568, "body": "One nitpick so far: this results in a warning <code>\u2018using any_input_view = struct ranges::v3::any_view&lt;int, (ranges::v3::category)1, void \u2019 is deprecated: Use any_view&lt;Ref, category::input&gt; instead. [-Wdeprecated-declarations]</code>. replacing <code>any_input_view</code> by <code>any_view</code> appears to work."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 1, "last_activity_date": 1535573817, "creation_date": 1535573817, "answer_id": 52085464, "question_id": 52075309, "link": "https://stackoverflow.com/questions/52075309/return-different-range-constructs-from-function/52085464#52085464", "title": "return different range constructs from function", "body": "<p>Return <code>ranges::v3::any_input_view &lt; bool &gt;</code> instead of <code>auto</code>.</p>\n\n<p>This will be 10x slower even in optimized builds.  Type erasure is expensive.</p>\n\n<p>A hand rolled solution that knows that the input range has a length and gets data in buffered chunks before doling it out could probably get the performance closer to non-type erased.  I'd expect it would still be noticable slower however.</p>\n"}], "owner": {"reputation": 2363, "user_id": 4588453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51da95e02741a304f3620d3b9697eda9?s=128&d=identicon&r=PG&f=1", "display_name": "pseyfert", "link": "https://stackoverflow.com/users/4588453/pseyfert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 52085464, "answer_count": 1, "score": 0, "last_activity_date": 1535573817, "creation_date": 1535538769, "last_edit_date": 1535573337, "question_id": 52075309, "link": "https://stackoverflow.com/questions/52075309/return-different-range-constructs-from-function", "title": "return different range constructs from function", "body": "<p>I try to get range views that behave like true-false masks. To do logical operations I want to implement ands and ors of masks. I have a working compile time or:</p>\n\n<pre><code>struct make_or_mask_fn\n{\n    template&lt;typename... Msks&gt;\n    auto operator()(Msks&amp;&amp;... msks) const\n    {\n        CONCEPT_ASSERT((Range&lt;Msks&gt;() || ...));\n        return ranges::view::zip(std::forward&lt;Msks&gt;(msks)...) |\n               ranges::view::transform(\n                   [](auto&amp;&amp; range_item) -&gt; bool {\n                       return tuple_or(range_item);\n                   });\n    }\n\nprivate:\n    template&lt;typename... T&gt;\n    static bool variable_length_or(const T... v)\n    {\n        return (v || ...);\n    }\n    template&lt;typename... T, std::size_t... Idx&gt;\n    static bool tuple_or(const std::tuple&lt;T...&gt; t,\n                         std::index_sequence&lt;Idx...&gt;)\n    {\n        return variable_length_or(std::get&lt;Idx&gt;(t)...);\n    }\n    template&lt;typename... T&gt;\n    static bool tuple_or(const std::tuple&lt;T...&gt; t)\n    {\n        return tuple_or(t, std::index_sequence_for&lt;T...&gt;{});\n    }\n};\nRANGES_INLINE_VARIABLE(make_or_mask_fn, make_or_masker)\n</code></pre>\n\n<p>which I can call just fine</p>\n\n<pre><code>std::vector&lt;bool&gt; mask1 = ...\nstd::vector&lt;bool&gt; mask2 = ...\nstd::vector&lt;bool&gt; mask3 = ...\nauto or_of_masks = make_or_masker(mask1, mask2, mask3);\n</code></pre>\n\n<p>What this cannot do at the moment is build the or of a number of masks that is unknown at compile time. My current attempt is to accept a <code>vector</code> of ranges, check its size and then call the variadic template or from before:</p>\n\n<pre><code>struct make_vector_or_mask_fn\n{\n    template&lt;typename Msk&gt;\n    auto operator()(std::vector&lt;Msk&gt; msks)\n        const // TODO const and reference types\n    {\n        CONCEPT_ASSERT(Range&lt;Msk&gt;());\n        // todo return range with all true (an or of zero elements is true)\n        assert(msks.size() != 0);\n        if(msks.size() == 1)\n            return or_ranges(msks[0]);\n        if(msks.size() == 2)\n            return or_ranges(msks[0], msks[1]);\n        if(msks.size() == 3)\n            return or_ranges(msks[0], msks[1], msks[2]);\n        /// TODO: go until ... maybe 8 and recurse afterwards\n    }\nprivate:\n    template&lt;typename... Msks&gt;\n    static auto or_ranges(Msks&amp;&amp;... msks)\n    {\n        CONCEPT_ASSERT((Range&lt;Msks&gt;() || ...));\n        return ranges::view::zip(std::forward&lt;Msks&gt;(msks)...) |\n               ranges::view::transform(\n                   [](auto&amp;&amp; range_item) -&gt; bool {\n                       return tuple_or(range_item);\n                   });\n    }\n    template&lt;typename... T&gt;\n    static bool variable_length_or(const T... v)\n    {\n        return (v || ...);\n    }\n    template&lt;typename... T, std::size_t... Idx&gt;\n    static bool tuple_or(const std::tuple&lt;T...&gt; t,\n                         std::index_sequence&lt;Idx...&gt;)\n    {\n        return variable_length_or(std::get&lt;Idx&gt;(t)...);\n    }\n    template&lt;typename... T&gt;\n    static bool tuple_or(const std::tuple&lt;T...&gt; t)\n    {\n        return tuple_or(t, std::index_sequence_for&lt;T...&gt;{});\n    }\n};\nRANGES_INLINE_VARIABLE(make_vector_or_mask_fn, make_vector_or_masker)\n</code></pre>\n\n<p>This does not compile with the following error:</p>\n\n<pre><code>../include/range/v3/view/mask.hpp:221:25: error: 'auto' in return type deduced as 'ranges::v3::transform_view&lt;ranges::v3::zip_view&lt;ranges::v3::iterator_range&lt;__gnu_cxx::__normal_iterator&lt;int *, std::vector&lt;int, std::allocator&lt;int&gt; &gt; &gt;, __gnu_cxx::__normal_iterator&lt;int *, std::vector&lt;int, std::allocator&lt;int&gt; &gt; &gt; &gt;, ranges::v3::iterator_range&lt;__gnu_cxx::__normal_iterator&lt;int *, std::vector&lt;int, std::allocator&lt;int&gt; &gt; &gt;,\n  __gnu_cxx::__normal_iterator&lt;int *, std::vector&lt;int, std::allocator&lt;int&gt; &gt; &gt; &gt; &gt;, (lambda at ../include/range/v3/view/mask.hpp:188:32)&gt;' here but deduced as 'ranges::v3::transform_view&lt;ranges::v3::zip_view&lt;ranges::v3::iterator_range&lt;__gnu_cxx::__normal_iterator&lt;int *, std::vector&lt;int, std::allocator&lt;int&gt; &gt; &gt;, __gnu_cxx::__normal_iterator&lt;int *, std::vector&lt;int, std::allocator&lt;int&gt; &gt; &gt; &gt; &gt;,\n  (lambda at ../include/range/v3/view/mask.hpp:188:32)&gt;' in earlier return statement\n                    return or_ranges(msks[0], msks[1]);\n                    ^\n</code></pre>\n\n<p>To my understanding this is telling me that my <code>or_ranges</code> returns a different type depending on the number of arguments. (The <code>zip</code> I'm using retains knowledge of what got zipped together).</p>\n\n<p>So I'm wondering, how do I type erase what is in a range?</p>\n"}, {"tags": ["c++", "c++11", "move-semantics", "rvalue-reference"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1535538802, "post_id": 52075259, "comment_id": 91100184, "body": "You don&#39;t need the <code>std::bind</code> call, just assignment <code>m_callback = callback;</code>"}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1535538941, "post_id": 52075259, "comment_id": 91100271, "body": "@Someprogrammerdude I know - you&#39;ll have to just forgive this crappy example! (its hard to make a simple example just to show a point without makeing crap code)... but I do want to pass and store the callback in this way (i.e. with lambda or bind). I just really want to focus on the pass type (i.e. by value or by <code>&amp;&amp;</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1535539214, "post_id": 52075376, "comment_id": 91100437, "body": "I am reading and re-reading the words you wrote, but I think I am too simple to get it!. I think I understand what you are saying about the <code>std::move()</code> - this means that if its an lvalue (like an object or such?) then you move it. Could you explain that last part like I am a child, as in: what happens in the two cases in my code (i.e. is it actually moved?). Thanks :)"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1535539365, "post_id": 52075376, "comment_id": 91100542, "body": "No, it isn&#39;t moved, because even though you use rvalue-references at <i>some</i> points, you don&#39;t use them anywhere they would cause a change in behaviour, aka cause the object to be moved from."}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1535539464, "post_id": 52075376, "comment_id": 91100605, "body": "Out of curiosity, what is your issue with <code>std::bind</code>? are you referring to both/all usages of it, or just the usage with passing functions (i.e. the second one)?"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1535539611, "post_id": 52075376, "comment_id": 91100696, "body": "@code_fodder: My issue with <code>std::bind</code> is that a lambda is both cleaner, and sometimes potentially more efficient. Admittedly, <code>std::bind</code> has the Advantage of producing the same type for the same arguments repeatedly, instead of being unique to each case."}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 1, "creation_date": 1535539739, "post_id": 52075376, "comment_id": 91100768, "body": "Ok thanks, I was just checking there was not somthing explcitly bad about it - your just saying its effectivly obsoleted by lambdas :)"}], "tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 3, "last_activity_date": 1535539010, "creation_date": 1535539010, "answer_id": 52075376, "question_id": 52075259, "link": "https://stackoverflow.com/questions/52075259/is-it-safe-to-pass-stdfunctionboolstdstring-callback-i-e-as-a-rvalue/52075376#52075376", "title": "Is it safe to pass std::function&lt;bool(std::string)&gt; &amp;&amp;callback (i.e. as a rvalue move) and what is the effect?", "body": "<p>If the parameter is defined as an rvalue-reference, you must pass a temporary or cast an lvalue to an rvalue, like with <code>std::move()</code>.</p>\n\n<p>And the semantics of rvalue-references are that the caller should expect the passed argument to be plundered, rendering it valid but arbitrary, meaning mostly useless.</p>\n\n<p>But the function receiving an rvalue-reference, despite having <em>license to plunder</em>, does not have any <em>obligation to plunder</em>. And if it doesn't explicitly do so, for example by passing that license on, then it doesn't come to pass, and nothing special happens.</p>\n\n<p>Your code is such a case.</p>\n\n<p>While I would ban <code>std::bind</code> from my vocabulary, using it or not doesn't actually make any significant difference.</p>\n"}, {"comments": [{"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1535539579, "post_id": 52075451, "comment_id": 91100675, "body": "Ok, so, in general, passing a lambda by copy is just the easier/flexible method and we don&#39;t by using rvalref?"}, {"owner": {"reputation": 956, "user_id": 6449949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a920ba06a595d7137a076ab1de7425?s=128&d=identicon&r=PG&f=1", "display_name": "paler123", "link": "https://stackoverflow.com/users/6449949/paler123"}, "reply_to_user": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 1, "creation_date": 1535541892, "post_id": 52075451, "comment_id": 91102184, "body": "You are not passing a lamda here really, you are using it to create a temporary std::function object, which is then passed into the function. so there are a couple of things that can happen here, e.g. the temporary will be created and then moved into the function or the std::function will be created in place. In practice the second one is much more likely, which is the same thing that would happen if you passed by rval ref."}], "tags": [], "owner": {"reputation": 956, "user_id": 6449949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a920ba06a595d7137a076ab1de7425?s=128&d=identicon&r=PG&f=1", "display_name": "paler123", "link": "https://stackoverflow.com/users/6449949/paler123"}, "is_accepted": false, "score": 1, "last_activity_date": 1535541692, "last_edit_date": 1535541692, "creation_date": 1535539273, "answer_id": 52075451, "question_id": 52075259, "link": "https://stackoverflow.com/questions/52075259/is-it-safe-to-pass-stdfunctionboolstdstring-callback-i-e-as-a-rvalue/52075451#52075451", "title": "Is it safe to pass std::function&lt;bool(std::string)&gt; &amp;&amp;callback (i.e. as a rvalue move) and what is the effect?", "body": "<p>In this case regardless of whether you pass by value or by rval ref a temporary std::function will have to be created, that's because a lambda is not really a std::function. In any case, you should move the std::function before assigning, to avoid making an unnecessary copy.<br>\nI'd recommend passing by value in this case, as this is a bit more flexible, and if you are passing lambdas, then it does not cause any harm, as the std::function will usually be constructed in place (so the temporary will not be moved into the function; this move can, and usually will, be elided).    </p>\n"}], "owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 2, "accepted_answer_id": 52075376, "answer_count": 2, "score": 0, "last_activity_date": 1535541692, "creation_date": 1535538609, "last_edit_date": 1535538737, "question_id": 52075259, "link": "https://stackoverflow.com/questions/52075259/is-it-safe-to-pass-stdfunctionboolstdstring-callback-i-e-as-a-rvalue", "title": "Is it safe to pass std::function&lt;bool(std::string)&gt; &amp;&amp;callback (i.e. as a rvalue move) and what is the effect?", "body": "<p>Given the following working code (main.cpp):</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\nstruct worker\n{\n   std::function&lt;bool(std::string)&gt; m_callback;\n   void do_work(std::function&lt;bool(std::string)&gt; callback) // &lt;--- this line\n   {\n      m_callback = std::bind(callback, std::placeholders::_1);\n      callback(\"hello world!\\n\");\n   }\n};\n\n\n// pretty boring class - a cut down of my actual class\nstruct helper\n{\n   worker the_worker;\n   bool work_callback(std::string str)\n   {\n      std::cout &lt;&lt; str &lt;&lt; std::endl;\n      return false;\n   }\n};\n\nint main()\n{\n   helper the_helper;\n   the_helper.the_worker.do_work( [&amp;](std::string data){ return the_helper.work_callback(data); });\n}\n</code></pre>\n\n<p>Compiled with: <code>-std=c++11 -O2 -Wall -Wextra -pedantic-errors -O2 main.cpp</code></p>\n\n<p>I have comment the line in question (<code>&lt;-- this line</code> - around line 7), where I think it would be more efficient to use: <code>void do_work(std::function&lt;bool(std::string)&gt;&amp;&amp; callback)</code> i.e. using the <code>&amp;&amp;</code> move semantic.</p>\n\n<p>I have never really used this, mostly because I still don't quite understand it.</p>\n\n<p>My understanding is this:</p>\n\n<p><code>void do_work(std::function&lt;bool(std::string)&gt; callback)</code> - will take a copy of the lambda that I pass in (which is an rvalue I think).</p>\n\n<p><code>void do_work(std::function&lt;bool(std::string)&gt; callback)</code> - will move the lambda that I pass in because it is an rvalue.</p>\n\n<p>My crude idea of an rvalue is any temporary variable.</p>\n\n<p>Questions:</p>\n\n<ol>\n<li><p>What I am not 100% clear about is, is what I wrote correct? and therefore is it safe to use <code>&amp;&amp;</code>. Both seem to work.</p></li>\n<li><p>Does this <code>&amp;&amp;</code> method also work if instead of passing a lambda like this:</p></li>\n</ol>\n\n<p><code>the_helper.the_worker.do_work( [&amp;](std::string data){ return the_helper.work_callback(data); });</code></p>\n\n<p>we pass in std::bind(...):</p>\n\n<p><code>the_worker.do_work(std::bind(&amp;helper::work_callback, the_helper, std::placeholders::_1));</code></p>\n"}]