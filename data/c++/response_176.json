[{"tags": ["c++", "qt", "qtablewidget"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1527121208, "post_id": 50499063, "comment_id": 88011143, "body": "provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6359324, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vH-LpuOUPHg/AAAAAAAAAAI/AAAAAAAAABY/TsyHEzv8i6A/photo.jpg?sz=128", "display_name": "minjee", "link": "https://stackoverflow.com/users/6359324/minjee"}, "edited": false, "score": 0, "creation_date": 1527241602, "post_id": 50502053, "comment_id": 88064173, "body": "Thanks for reply. I solved this problem. This problem was caused by setting setSectionResizeMode () to QHeaderView :: Stretch after setting the minimum and maximum size of QTableWidget to the same value. So when I set the minimum size to 0, the problem is solved. I do not know what effect it changed the minimum size, but it was resolved anyway."}], "tags": [], "owner": {"reputation": 35, "user_id": 4622902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m9Hi6.jpg?s=128&g=1", "display_name": "Subrata Das", "link": "https://stackoverflow.com/users/4622902/subrata-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1527141899, "creation_date": 1527141899, "answer_id": 50502053, "question_id": 50499063, "link": "https://stackoverflow.com/questions/50499063/qtablewidget-is-later-expanded-or-drawn/50502053#50502053", "title": "QTablewidget is later expanded (or drawn)", "body": "<p>Try once i hope it will work:</p>\n\n<p>Table header costume:</p>\n\n<pre><code>horizontalHeader()-&gt;setResizeMode(QHeaderView::Fixed );\nhorizontalHeader()-&gt;setDefaultAlignment(Qt::AlignHCenter);\nhorizontalHeader()-&gt;setStretchLastSection(true);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6359324, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vH-LpuOUPHg/AAAAAAAAAAI/AAAAAAAAABY/TsyHEzv8i6A/photo.jpg?sz=128", "display_name": "minjee", "link": "https://stackoverflow.com/users/6359324/minjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527141899, "creation_date": 1527119942, "last_edit_date": 1527120374, "question_id": 50499063, "link": "https://stackoverflow.com/questions/50499063/qtablewidget-is-later-expanded-or-drawn", "title": "QTablewidget is later expanded (or drawn)", "body": "<p>I am using <code>QTableWidget</code>, and when I open a dialog with <code>QTableWidget</code>, I notice that <code>QTableWidgetis</code> drawn later. \nThe screen configuration is different, but other dialogs with the same set <code>QTableWidget</code> do not have this problem.</p>\n\n<p>I know what code caused it.\nIt looks like a late extension because of <code>verticlaHeader () -&gt; setSectionResizeMode (QHeader :: Stretch)</code>. The problem is, however, that setting QTableWidget equally in other dialogs does not seem like that. I've used <code>setSectionResizeMode</code> without any problems, but suddenly I have this problem.</p>\n\n<p><img src=\"https://i.stack.imgur.com/FVOUp.png\" alt=\"Result table image\"></p>\n\n<p>The picture above is not an exact picture. Because I can not take a screenshot to fit the timing.</p>\n\n<p>To be more precise, the QTableWidget seems to be expanded in the picture, but the size of the QTableWidget does not change. The size of the cell changes. The size of the cell is small and increases by the height of qtableWidget according to the setting of SectionResizeMode.</p>\n\n<pre><code>void MyWidget::init() {\n\n    QStringList horizontalHeader = QStringList() &lt;&lt; \"Max\" &lt;&lt; \"Min\";\n    QStringList verticalHeader = QStringList() &lt;&lt; \"Velocity[m/s]\" &lt;&lt; \"Acceleration[m/s\u00b2]\" &lt;&lt; \"Density[kg/m\u00b3\" &lt;&lt; \"Pressure[kg/(ms\u00b2)]\";\n    ui.PropertyTableWidget-&gt;setHorizontalHeaderLabels(horizontalHeader);\n    ui.PropertyTableWidget-&gt;setVerticalHeaderLabels(verticalHeader);\n    for (int i = 0; i &lt; ui.PropertyTableWidget-&gt;columnCount(); ++i)\n        ui.PropertyTableWidget-&gt;verticalHeaderItem(i)-&gt;setTextAlignment(Qt::AlignmentFlag(Qt::AlignLeft + Qt::AlignVCenter));\n\n    ui.PropertyTableWidget-&gt;horizontalHeader()-&gt;setSectionResizeMode(QHeaderView::Stretch);\n    ui.PropertyTableWidget-&gt;verticalHeader()-&gt;setSectionResizeMode(QHeaderView::Stretch);\n    ui.PropertyTableWidget-&gt;horizontalHeader()-&gt;setFixedHeight(24);\n    ui.PropertyTableWidget-&gt;SetDelegateType(TABLE_DELEGATE_TYPE_ROW);\n    ui.PropertyTableWidget-&gt;setItemDelegateForRow(0, new LineEditDelegate(ui.PropertyTableWidget, -FLT_MAX, FLT_MAX, EDIT_DECIMAL, UNIT_TYPE_VELOCITY));\n    ui.PropertyTableWidget-&gt;setItemDelegateForRow(1, new LineEditDelegate(ui.PropertyTableWidget, -FLT_MAX, FLT_MAX, EDIT_DECIMAL, UNIT_TYPE_ACCELERATION));\n    ui.PropertyTableWidget-&gt;setItemDelegateForRow(2, new LineEditDelegate(ui.PropertyTableWidget, -FLT_MAX, FLT_MAX, EDIT_DECIMAL, UNIT_TYPE_DENSITY));\n    ui.PropertyTableWidget-&gt;setItemDelegateForRow(3, new LineEditDelegate(ui.PropertyTableWidget, -FLT_MAX, FLT_MAX, EDIT_DECIMAL, UNIT_TYPE_PRESS));\n    ui.PropertyTableWidget-&gt;EnableRowRemove(false);\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "std", "corruption", "double-free"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 3, "creation_date": 1527119910, "post_id": 50498998, "comment_id": 88010892, "body": "It&#39;s probably related to the <code>Vector3</code> class not having a set of constructors, destructor, and assignment operators that work together correctly.  Look up rule of three (before C++11), rule of five (C++11 or later), and rule of zero (also C++11 or later)."}, {"owner": {"reputation": 215, "user_id": 7577675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbe3e4ded3ed2a1b6d059b8473140cc?s=128&d=identicon&r=PG&f=1", "display_name": "JustHeavy", "link": "https://stackoverflow.com/users/7577675/justheavy"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1527119969, "post_id": 50498998, "comment_id": 88010906, "body": "Got it. That class comes from a library that I am using. I will look into it. Thank you."}, {"owner": {"reputation": 480, "user_id": 3693539, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Jb8O2.jpg?s=128&g=1", "display_name": "solarflare", "link": "https://stackoverflow.com/users/3693539/solarflare"}, "edited": false, "score": 1, "creation_date": 1527120041, "post_id": 50498998, "comment_id": 88010921, "body": "Whats in Axiom[]?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1527120053, "post_id": 50498998, "comment_id": 88010923, "body": "Although there can be bugs in implementation of <code>std::vector</code>, such code with most compilers is normally pretty well verified.   But <code>std::vector</code> ASSUMES the objects it contains play right."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1527120174, "post_id": 50498998, "comment_id": 88010954, "body": "Assuming the library you got <code>Vector3</code> from is even remotely sane, it should comply with the rule of 3/5/0 and shouldn&#39;t cause any problems with used with <code>std::vector</code>. The problem is somewhere else, in code you didn&#39;t show us."}, {"owner": {"reputation": 215, "user_id": 7577675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbe3e4ded3ed2a1b6d059b8473140cc?s=128&d=identicon&r=PG&f=1", "display_name": "JustHeavy", "link": "https://stackoverflow.com/users/7577675/justheavy"}, "reply_to_user": {"reputation": 480, "user_id": 3693539, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Jb8O2.jpg?s=128&g=1", "display_name": "solarflare", "link": "https://stackoverflow.com/users/3693539/solarflare"}, "edited": false, "score": 0, "creation_date": 1527120224, "post_id": 50498998, "comment_id": 88010963, "body": "Sorry @solarflare. It contains the string that I mentioned: [PPPPrrFp[[X]PX]pXRR] Which includes the square-brackets at the start and end."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1527120350, "post_id": 50498998, "comment_id": 88010989, "body": "@Peter the Rule of Zero isn&#39;t new in C++11. Even RuleOf3 classes in pre-C++11 compilers should strive for RuleOf0 whenever possible."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1527120675, "post_id": 50498998, "comment_id": 88011051, "body": "Why you do <code>if&#47;else</code> and then switch on the same variable? Just use one switch."}, {"owner": {"reputation": 215, "user_id": 7577675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbe3e4ded3ed2a1b6d059b8473140cc?s=128&d=identicon&r=PG&f=1", "display_name": "JustHeavy", "link": "https://stackoverflow.com/users/7577675/justheavy"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527120843, "post_id": 50498998, "comment_id": 88011079, "body": "@Slava Very good point and I do not think I could explain it. I got desperate looking for a reason why I&#39;m getting the error in my post and was playing around with something. I see that it does not make sense."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1527120963, "post_id": 50498998, "comment_id": 88011100, "body": "validate at least on processing &#39;]&#39; that <code>b</code> is not empty. Also get a stack trace on failure - it should give idea where problem is."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1527121182, "post_id": 50498998, "comment_id": 88011141, "body": "@JustHeavy What does <code>X</code> do in your axiom? <code>&#39;X&#39;</code> is not in your <code>switch</code> block. Does X manipulate the contents of <code>b</code> or the members of <code>this</code> in any way? In addition to what Slava said, make sure that <code>f</code> and <code>F</code> also validate that <code>b</code> is not empty before calling <code>back()</code>."}, {"owner": {"reputation": 215, "user_id": 7577675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbe3e4ded3ed2a1b6d059b8473140cc?s=128&d=identicon&r=PG&f=1", "display_name": "JustHeavy", "link": "https://stackoverflow.com/users/7577675/justheavy"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1527121789, "post_id": 50498998, "comment_id": 88011264, "body": "Turns out that @Peter was more correct. His comment led me to getting rid of any instance of the Vector3 class. Turns out that changing <code>std::vector&lt;Vector3&gt; LSystem::Turtle()</code> to <code>void LSystem::Turtle()</code> solved all my problems."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1527121815, "post_id": 50498998, "comment_id": 88011268, "body": "@JustHeavy you weren&#39;t <code>return</code>ing a valid vector to begin with, so if the caller tried to use that return value, it would have undefined behavior. On a side note, it looks like <code>LSystem::branches</code> and <code>branchInfo::branchPoints</code> can be eliminated. <code>branches</code> doesn&#39;t seem to be used for anything, so what is the point of it? When you encounter a <code>[</code>, save just the current rotation/position only, and have <code>]</code> restore them. Done. Accordingly to your commented requirements, <code>f</code> and <code>F</code> should be manipulating the turtle&#39;s current <code>position</code>, not caching them off to the side, isn&#39;t that right?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1527121869, "post_id": 50498998, "comment_id": 88011281, "body": "@JustHeavy it is unrelated to <code>Vector3</code> - problem is you are missing return statement. You should read warnings. Of course changing function return type to <code>void</code> solved that problem."}, {"owner": {"reputation": 215, "user_id": 7577675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbe3e4ded3ed2a1b6d059b8473140cc?s=128&d=identicon&r=PG&f=1", "display_name": "JustHeavy", "link": "https://stackoverflow.com/users/7577675/justheavy"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1527121939, "post_id": 50498998, "comment_id": 88011296, "body": "Corrent. There may be fragments from some of my older code where I was not using a struct to represent my branches. I will get to fixing/cleaning. Thanks for your time @RemyLebeau."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1527122071, "post_id": 50498998, "comment_id": 88011325, "body": "@RemyLebeau there is UB unrelated to if caller using return value or not."}, {"owner": {"reputation": 215, "user_id": 7577675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbe3e4ded3ed2a1b6d059b8473140cc?s=128&d=identicon&r=PG&f=1", "display_name": "JustHeavy", "link": "https://stackoverflow.com/users/7577675/justheavy"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527122132, "post_id": 50498998, "comment_id": 88011339, "body": "@Slava I see that now. The only errors I had were ones that gave me a readout of the memory and the one that I mentioned. Those may contain information that you understand but to me it was not clear. Sorry that I wasted your time. I did spend a lot of time trying to solve this myself; I used the debugger and stepped through the program one step at a time, I googled the error, I read the error and really tried to understand it. I only came here as a last resort."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1527122316, "post_id": 50498998, "comment_id": 88011372, "body": "@JustHeavy I am not talking about runtime error, I am talking about compilation warnings. Compiler should warn you that function must return a value. Even better if you make compiler to treat that as error, not warning."}, {"owner": {"reputation": 215, "user_id": 7577675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbe3e4ded3ed2a1b6d059b8473140cc?s=128&d=identicon&r=PG&f=1", "display_name": "JustHeavy", "link": "https://stackoverflow.com/users/7577675/justheavy"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527122615, "post_id": 50498998, "comment_id": 88011433, "body": "@Slava I see. My compiler (g++/gcc) did not give me any warnings and my IDE (Netbeans) did not display them (most likely the complier&#39;s fault, I would think or maybe it is in my settings). The only way I would have known/remembered this is from when I read my C++ textbook long ago, but sadly it has been awhile since then and I have not used C++ much since then. Thank you again for your time, this interaction has taught me a lot. I should probably go review my text once again."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1527123139, "post_id": 50498998, "comment_id": 88011529, "body": "@JustHeavy: Compile with <code>-Wall</code> (and <code>-Werror</code> if you want to fail hard). If you&#39;re really looking for completely clean code, <code>-Wextra</code> will turn on really nitpicky warnings, but <code>-Wall</code> usually covers the major correctness issues."}], "answers": [{"comments": [{"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1527143351, "post_id": 50499359, "comment_id": 88017096, "body": "FYI: there are compiler warnings to detect these kind of issues, they can save you a lot of time"}], "tags": [], "owner": {"reputation": 215, "user_id": 7577675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbe3e4ded3ed2a1b6d059b8473140cc?s=128&d=identicon&r=PG&f=1", "display_name": "JustHeavy", "link": "https://stackoverflow.com/users/7577675/justheavy"}, "is_accepted": false, "score": 0, "last_activity_date": 1527122873, "creation_date": 1527122873, "answer_id": 50499359, "question_id": 50498998, "link": "https://stackoverflow.com/questions/50498998/stdvector-using-back-pop-back-push-back-get-double-free-or-corruptio/50499359#50499359", "title": "std::vector using back(), pop_back(), push_back(), get &#39;double free or corruption&#39; error", "body": "<p>In case someone from the future comes across this problem. What I was doing wrong was not returning anything in my function even though I specified a non-void return type for the function. Changing the return type to <code>void</code> solved my problem.</p>\n"}], "owner": {"reputation": 215, "user_id": 7577675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fbe3e4ded3ed2a1b6d059b8473140cc?s=128&d=identicon&r=PG&f=1", "display_name": "JustHeavy", "link": "https://stackoverflow.com/users/7577675/justheavy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 278, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527132674, "creation_date": 1527119395, "last_edit_date": 1527132674, "question_id": 50498998, "link": "https://stackoverflow.com/questions/50498998/stdvector-using-back-pop-back-push-back-get-double-free-or-corruptio", "title": "std::vector using back(), pop_back(), push_back(), get &#39;double free or corruption&#39; error", "body": "<p>I have the following code:</p>\n\n<pre><code>struct branchInfo{\n    Quaternion r;\n    Vector3 p;\n\n    std::vector&lt;Vector3&gt; branchPoints;\n};\n\nstd::vector&lt;Vector3&gt; LSystem::Turtle(){\n\n    std::vector&lt;branchInfo&gt; b;\n\n    // The axiom should always start with a '[' at the start and a ']' at the end\n    for(unsigned int i = 0; i &lt; axiom.length(); i++) {\n        char c = axiom[i];\n\n        if (c == '[') {\n            branchInfo temp;\n\n            temp.r = rotationQuat;\n            temp.p = position;\n            temp.branchPoints.push_back(position);\n\n            b.push_back(temp);\n        } else if (c == ']') {\n            branchInfo temp = b.back();\n\n            rotationQuat = temp.r;\n            position = temp.p;\n            branches.push_back(temp.branchPoints);\n\n            b.pop_back();\n        } else {\n            // Evaluate the character and move the turtle\n            // F = move forward according to pitched, rolled, and yawed axis\n            // f = move backward according to pitched, rolled, and yawed axis\n            // p = pitch -45 degrees\n            // P = pitch +45 degrees\n            // r = roll -45 degrees\n            // R = Roll +45 degrees\n            // y = yaw -45 degrees\n            // Y = yaw +45 degrees\n            // [ = start new branch\n            // ] = end new branch\n\n            switch(c) {\n            case 'f':\n                b.back().branchPoints.push_back(Forward(-1.5f));\n                break;\n            case 'F':\n                b.back().branchPoints.push_back(Forward(1.5f));\n                break;\n            case 'p':\n                Pitch(-angle);\n                break;\n            case 'P':\n                Pitch(angle);\n                break;\n            case 'r':\n                Roll(-angle);\n                break;\n            case 'R':\n                Roll(angle);\n                break;\n            case 'y':\n                Yaw(-angle);\n                break;\n            case 'Y':\n                Yaw(angle);\n                break;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The point of this code is to evaluate the axiom string which the turtle will follow. This is an L-system and part of the point of an L-system is to have branching and that occurs when there is a '[' character which means the rotation and position get saved and will be used later. As an example, If my L-system class contains the string <code>\"[PPPPrrFp[[X]PX]pXRR]\"</code> I will get the following error: \n<code>*** Error in /home/user/program/dist/Debug/GNU-Linux/world': double free or corruption (fasttop): 0x0000000003f43240 ***</code></p>\n\n<p>I know it is not easy to step-by-step go through this program and I don't expect anyone to do that. I'm just wondering if it is easy to see what is wrong with the program. I understand that the error probably has to do with using some of the std::vector methods/functions but I'm am not seeing why or how it is causing it.</p>\n\n<p>Also, it is not consistent. Sometimes the program will run and without a hitch, and other times it will crash with the error I mentioned.</p>\n\n<p>Functions for Yaw, Pitch, and Roll should not matter.</p>\n\n<p>From what I have googled, I can only ever find examples of this error when dealing with classes that have constructors, destructors, and when deleting arrays, etc.</p>\n\n<p>Thanks for any help! I hope it is obvious what is happening and doesn't take too much time. If it does look like it will take too long then do not bother. Thanks again.</p>\n\n<p>EDIT: To make it eaiser to understand what is happening in the function, I will do a step-by-step explanation of the function:\nStart at index 0 of the axiom string and check if it starts a new branch ('['), and if it does then push/save 3D vector pos and rot -> if the current char is not an '[' or ']' then move pos or rotate -> if the branch ends (']') resusme from the last saved pos and rot, and pop the top of the stack -> keep going for every char in the string.</p>\n"}, {"tags": ["c++", "opencv", "kinect", "camera-calibration"], "comments": [{"owner": {"reputation": 2124, "user_id": 6055233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041547c8fcabcab4b2536d730fa01d03?s=128&d=identicon&r=PG&f=1", "display_name": "Catree", "link": "https://stackoverflow.com/users/6055233/catree"}, "edited": false, "score": 0, "creation_date": 1527119539, "post_id": 50498939, "comment_id": 88010824, "body": "Please explain what do you mean by calibration. For color or infrared intrinsic parameters, this is the usual <a href=\"http://www.vision.caltech.edu/bouguetj/calib_doc/\" rel=\"nofollow noreferrer\">camera calibration procedure</a>. For extrinsic calibration, see stereo calibration. You can also refer to similar topics in the <a href=\"http://wiki.ros.org/openni_launch/Tutorials/ExtrinsicCalibration\" rel=\"nofollow noreferrer\">ROS community</a>. Another <a href=\"http://nicolas.burrus.name/index.php/Research/KinectCalibration\" rel=\"nofollow noreferrer\">pointer</a>."}, {"owner": {"reputation": 1, "user_id": 9643831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c3b6c2c318df0fbac514d48ab0f76e9?s=128&d=identicon&r=PG&f=1", "display_name": "Asmax", "link": "https://stackoverflow.com/users/9643831/asmax"}, "reply_to_user": {"reputation": 2124, "user_id": 6055233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041547c8fcabcab4b2536d730fa01d03?s=128&d=identicon&r=PG&f=1", "display_name": "Catree", "link": "https://stackoverflow.com/users/6055233/catree"}, "edited": false, "score": 0, "creation_date": 1527205461, "post_id": 50498939, "comment_id": 88051746, "body": "Thank you for you answer, I will do more research about the setero Calibration"}], "owner": {"reputation": 1, "user_id": 9643831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c3b6c2c318df0fbac514d48ab0f76e9?s=128&d=identicon&r=PG&f=1", "display_name": "Asmax", "link": "https://stackoverflow.com/users/9643831/asmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527118909, "creation_date": 1527118909, "question_id": 50498939, "link": "https://stackoverflow.com/questions/50498939/kinect-v1-calibration-with-opencv-and-c", "title": "Kinect V1 calibration with OpenCv and C++", "body": "<p>I am working on a project with: openCv, C++, and Kinect v1 and I am using the 3rd dimension in my work but the problem is that the kinect needs to be calibrated and I didn't find a way to do it simply ( especially that I don't have much time ) .</p>\n\n<p>Is there any simple way to calibrate the kinect ? I really need it  desperately. </p>\n\n<p>PS: I already tried this code <a href=\"https://github.com/devkicks/OpenCVKinect\" rel=\"nofollow noreferrer\">https://github.com/devkicks/OpenCVKinect</a> it works just fine but when I use the openCv function: findCountour() I get errors with vectors. </p>\n"}, {"tags": ["c++", "methods", "abstract-class", "superclass", "subclassing"], "comments": [{"owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 0, "creation_date": 1527119053, "post_id": 50498938, "comment_id": 88010719, "body": "Also, the <code>Player</code> class compiles fine if I add in an empty definition for its static <code>make_move</code> method. I can create an object with it and do <code>obj.make_move(game)</code> and it compiles. However, with <code>HumanPlayer</code>, that doesn&#39;t seem to be the case."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1527119064, "post_id": 50498938, "comment_id": 88010721, "body": "Where is the int? You&#39;re supposed to pass a int as first parameter. Edit: Ah you want the parents non-static <code>make_move</code> to be called?"}, {"owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1527119194, "post_id": 50498938, "comment_id": 88010746, "body": "The <code>HumanPlayer</code> should inherit the <code>make_move(TicTacToe&amp;)</code> method from the <code>Player</code> class. The <code>make_move(TicTacToe&amp;)</code> method then calls the static <code>make_move(int, TicTacToe&amp;)</code> method, using the protected variable <code>player_number</code> as the <code>int</code>."}, {"owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1527119232, "post_id": 50498938, "comment_id": 88010753, "body": "@tkausl precisely"}], "answers": [{"comments": [{"owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 0, "creation_date": 1527120144, "post_id": 50499054, "comment_id": 88010945, "body": "How can I tell if a function will hide the one I want to use? I had assumed that having different parameter types would cause it to not hide."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 0, "creation_date": 1527120311, "post_id": 50499054, "comment_id": 88010980, "body": "@ProQ Overload resolution is only done after determining which class defines the name."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1527120358, "post_id": 50499054, "comment_id": 88010991, "body": "In other words, redefining a function in a derived class replaces all overloads, not just the ones with the same parameter types."}, {"owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 0, "creation_date": 1527121432, "post_id": 50499054, "comment_id": 88011192, "body": "If I add <code>using Player::make_move;</code> it complains because <code>Player</code> is just an abstract class, so it doesn&#39;t have a definition for <code>make_move(int,  TicTacToe&amp;)</code>. Is there any easy way to get around this? Do I include <code>using Player::make_move;</code> <i>after</i> I define the static function in <code>HumanPlayer</code>?"}, {"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "reply_to_user": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 1, "creation_date": 1527122133, "post_id": 50499054, "comment_id": 88011340, "body": "@ProQ You can&#39;t leave the static function unimplemented. A class is made abstract by providing (at least one) pure virtual member functions."}, {"owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 0, "creation_date": 1527122615, "post_id": 50499054, "comment_id": 88011434, "body": "Ah, so I think I&#39;m now running into issues more along the lines of <a href=\"https://stackoverflow.com/questions/3313754/static-abstract-methods-in-c\">this</a>. I&#39;ll do more research."}, {"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "reply_to_user": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 0, "creation_date": 1527122660, "post_id": 50499054, "comment_id": 88011446, "body": "@ProQ No. You&#39;re looking for <a href=\"https://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Non-Virtual_Interface\" rel=\"nofollow noreferrer\">Non-Virtual interface idiom</a>."}, {"owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 0, "creation_date": 1527122951, "post_id": 50499054, "comment_id": 88011490, "body": "I don&#39;t see any static functions in the Non-Virtual interface idiom. How would I convert my current classes into something that uses that format?"}, {"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "reply_to_user": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 0, "creation_date": 1527123080, "post_id": 50499054, "comment_id": 88011518, "body": "@ProQ Turn your static function into the virtual one."}, {"owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "edited": false, "score": 0, "creation_date": 1527130689, "post_id": 50499054, "comment_id": 88013167, "body": "In my case, that takes away the point of there being a static version that can be called without an object being created. I think I&#39;m better off just not using a <code>Player</code> class at all."}], "tags": [], "owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "is_accepted": true, "score": 2, "last_activity_date": 1527119856, "creation_date": 1527119856, "answer_id": 50499054, "question_id": 50498938, "link": "https://stackoverflow.com/questions/50498938/why-cant-the-compiler-find-the-superclasss-method/50499054#50499054", "title": "Why can&#39;t the compiler find the superclass&#39;s method?", "body": "<p>The redefinition of the static function with the same name is hiding the one you want to use.</p>\n\n<p>Either rename it differently or add</p>\n\n<pre><code>public:\n    using Player::make_move;\n</code></pre>\n\n<p>Note that unlike Java you don't need to repeat <code>public:</code> before every function, the same visibility applies as long as you don't change it.</p>\n\n<pre><code>class YourClass {\npublic:\n    void foo1(); // public\n    void bar1(); // also public\nprotected:\n    void foo2(); // protected\n    void bar2(); // also protected\n};\n</code></pre>\n"}], "owner": {"reputation": 2677, "user_id": 5049813, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24c885a2c774f7375807e048793cffa3?s=128&d=identicon&r=PG&f=1", "display_name": "Pro Q", "link": "https://stackoverflow.com/users/5049813/pro-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 50499054, "answer_count": 1, "score": 1, "last_activity_date": 1527119856, "creation_date": 1527118898, "question_id": 50498938, "link": "https://stackoverflow.com/questions/50498938/why-cant-the-compiler-find-the-superclasss-method", "title": "Why can&#39;t the compiler find the superclass&#39;s method?", "body": "<p>I'm trying to do class inheritance in C++, but it obviously works very differently than in Python.</p>\n\n<p>Right now, I have two classes, one called <code>Player</code> that is the base class, and another one called <code>HumanPlayer</code> that's the subclass.</p>\n\n<p>The <code>Player</code> class is an abstract class that has two ways of working.</p>\n\n<p>The first is that it acts like a singleton. It has one static function called <code>make_move</code> that people can call with an <code>int</code> and a <code>TicTacToeGame&amp;</code>, and it will make a move for the player with that <code>int</code> as the player's number in that game of <code>TicTacToe</code>.</p>\n\n<p>The second is that it works as a class for creating objects that have a player number as a property. So, if you construct an object with the class, you should get back an object with a <code>player_number</code> property. Then, if you call the <code>make_move</code> function with just a <code>TicTacToeGame&amp;</code> on the object, it will automatically plug in its player number and use the static class method to make the move in the game.</p>\n\n<p>I want the same functionality for <code>HumanPlayer</code>, except I just want to have to write a new static function for <code>HumanPlayer</code>, and that's it, since the other functionality remains the same.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nclass TicTacToeGame {\n\n};\n\nclass Player {\n    public:\n        static void make_move(int player_number, TicTacToeGame&amp; game);\n\n    protected:\n        int player_number;\n\n    public:\n        explicit Player(int player_number_param) {\n            player_number = player_number_param;\n        }\n\n    public:\n        void make_move(TicTacToeGame&amp; game) {\n            return make_move(player_number, game);\n        }\n};\n\nclass HumanPlayer: public Player {\n    public:\n        static void make_move(int player_number, TicTacToeGame&amp; game) {}\n\n    public:\n        HumanPlayer(int player_number_param): Player(player_number_param) {}\n};\n\nint main()\n{\n    TicTacToeGame game;\n    HumanPlayer human_player = HumanPlayer(2);\n    human_player.make_move(game);\n    return 0;\n}\n</code></pre>\n\n<p>I learned recently that subclasses don't inherit constructors, so it turns out I have to write both a new static function and a constructor, which I have done.\nHowever, whenever I initialize a new <code>HumanPlayer</code> object, the compiler can't seem to find a match for the <code>make_move(TicTacToeGame&amp;)</code> method, and I'm not sure why.</p>\n\n<p>The specific error message I'm getting is</p>\n\n<blockquote>\n  <p>C:\\Users\\London\\Desktop\\Python\n  Programs\\LearningC++\\FirstProgram_SO.cpp: In function 'int main()': \n  C:\\Users\\London\\Desktop\\Python\n  Programs\\LearningC++\\FirstProgram_SO.cpp:41:29: error: no matching\n  function for call to 'HumanPlayer::make_move(TicTacToeGame&amp;)' \n  human_player.make_move(game);  ^  C:\\Users\\London\\Desktop\\Python\n  Programs\\LearningC++\\FirstProgram_SO.cpp:29:15: note: candidate:\n  static void HumanPlayer::make_move(int, TicTacToeGame&amp;)  static void\n  make_move(int player_number, TicTacToeGame&amp; game) {}  ^~~~~ \n  C:\\Users\\London\\Desktop\\Python\n  Programs\\LearningC++\\FirstProgram_SO.cpp:29:15: note: candidate\n  expects 2 arguments, 1 provided</p>\n</blockquote>\n\n<p>How can I get the <code>HumanPlayer</code> class to work in the same way the <code>Player</code> class does?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1527117488, "post_id": 50498717, "comment_id": 88010308, "body": "&quot;I&#39;ve tried to shorten the code below to only include sections that actually use this vector.&quot; -- this accomplishes nothing useful. Just because your code crashes while it does something with a vector doesn&#39;t mean that there&#39;s a bug with how the code uses a vector. C++ does not work this way. The bug can be anywhere in your program, which is why a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, as explained in stackoverflow.com&#39;s <a href=\"https://stackoverflow.com/help\">help center</a>, is required in order for anyone to be able to reproduce your problem. Unless someone can copy exactly the shown code in your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, and observe the same bug, it&#39;s unlikely that anyone can help you."}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1527117551, "post_id": 50498717, "comment_id": 88010320, "body": "What&#39;s an <code>Adapter</code>? What&#39;s <code>T</code>?"}, {"owner": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1527118065, "post_id": 50498717, "comment_id": 88010430, "body": "@SamVarshavchik I removed redundant code that repeats the logic in the readLines function to find &quot;a&quot;, it is minimal and complete since getInstance is the only point of entry from my main function.  If you want me to include the class T then I will, however it makes literally no appearance up to the point at which this error occurs, if I try to access the vector in the constructor of T it still happens."}, {"owner": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "reply_to_user": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1527118068, "post_id": 50498717, "comment_id": 88010431, "body": "@Tas I&#39;ve edited it now since that was an accident, T is the class that contains the information read in from the .ini file and is then stored in a unique_ptr and moved to the vector."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1527119177, "post_id": 50498717, "comment_id": 88010742, "body": "The nature of undefined behaviour is that code which causes a crash is not necessarily the code where a crash occurs.   For example, one section of code might do an invalid operation with a pointer (undefined behaviour).  The actual consequence of that is overwriting some area of memory that is used by completely unrelated code.   Some time later, that unrelated code is executed, and the overwritten memory is used in a calculation, and then results in a crash.   That&#39;s why it is necessary to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  Just presenting the code where the crash occurs does not help find the cause."}, {"owner": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1527124132, "post_id": 50498717, "comment_id": 88011736, "body": "@Peter I&#39;ve now changed it.  The code I originally put up excluded the T class that the vector was storing, but it is irrelevant in regards to the error itself.  The error is caused by the vector and the C object (not clang) that is accessing it, everything that happens here is happening inside the C class, the getInstance() method is called from main, which triggers this logic.  Providing the full implementation which I&#39;ve now done won&#39;t affect the error, it will however allow you to debug it if you wish to help me and so I&#39;ve included it now, thanks in advance if you do :)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1527125169, "post_id": 50498717, "comment_id": 88011931, "body": "Compiler say &quot;warning: &#39;new_t&#39; may be used uninitialized in this function&quot; and highlights: <code>if(new_t-&gt;Active())</code>. Never ignore compiler warnings until after you have justified them. They are your first line of defence against trivial (and sometimes not so trivial) logic errors. Anyway, you are still putting garbage in the <code>vector</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1527125437, "post_id": 50498717, "comment_id": 88011980, "body": "style note: the <code>_t</code> suffix is often used to denote a datatype, so using this for the name of anything else may result in confusion among readers."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1527127867, "post_id": 50498717, "comment_id": 88012549, "body": "I think wintermute&#39;s answer is relevant.   Also, no need to use <code>std::move()</code> for the argument of <code>push_back()</code>.."}, {"owner": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1527129111, "post_id": 50498717, "comment_id": 88012827, "body": "@user4581301 Thanks, noted.  Even after adding the initialisation it doesn&#39;t stop the error.  It is any action that calls the vector which is causing the exception, none this is even before new_t gets added."}, {"owner": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1527129563, "post_id": 50498717, "comment_id": 88012935, "body": "@Peter I modified my code according to his comment, however the issue has nothing to do with the data types being stored, the problem arises when I try to access a member variable from within the class, in this case it is a vector.  There is no other class or method trying to access this vector, removing mentions of the vector fixes the issue, using local variables fixes the issue.  I  cannot access members without a segfault and that is what I need to be doing."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1527130979, "post_id": 50498717, "comment_id": 88013228, "body": "Please update the code with how you are initializing <code>new_t</code> and any other modifications you made. There is still plenty of room for crouching tigers and hidden dragons. There are almost countless ways pointers can get messed up, smart or not. Wintermute&#39;s suggestion of ditching them entirely is highly recommended."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1527131346, "post_id": 50498717, "comment_id": 88013302, "body": "By the way, it looks like <code>C</code> is a lazy-loaded singleton. The first answer to <a href=\"https://stackoverflow.com/questions/1008019/c-singleton-design-pattern\">C++ Singleton design pattern</a> gives a rundown on the Meyers Singleton, a much easier and safer (even thread-safe in C++11 or later) way to write one. Note zero pointers are involved."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1527163163, "post_id": 50498717, "comment_id": 88029518, "body": "<code>new_t</code> is obviously being used before it is initialized. Kaboom! There&#39;s your bug."}, {"owner": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1527232995, "post_id": 50498717, "comment_id": 88059166, "body": "@SamVarshavchik That&#39;s not the cause of this bug, I&#39;ve said this already:  The issue has nothing to do with the data types being stored.  Remove any instance of an object being added and simply call the vector from anywhere, including .size() inside the constructor and it segfaults.  I have said this a few times and yet everyone is still focusing on the way I&#39;m using my T class."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1527249036, "post_id": 50498717, "comment_id": 88068631, "body": "The only thing anyone can comment on is the code that&#39;s shown. As shown, this is dereferencing an initialized pointer, undefined behavior, and a bug. Nobody knows, except you, what other changes were made with the alleged crash still allegedly still occurring, and because of that nothing further can be said about it."}, {"owner": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1527291802, "post_id": 50498717, "comment_id": 88088033, "body": "@SamVarshavchik Well you&#39;re obviously not one of those trying to help and hence didn&#39;t bother debugging it, since you&#39;d have noticed the problem lies in any call to the vector, even before I try to add new_t to it, it is written into the example too so you don&#39;t really have an excuse there.  Also it turns out that you were wrong anyway, something further was said about it and I managed to fix the problem without even touching new_t, but thanks for offering no help and simply criticising the way I wrote my post, it&#39;s good to know that some people are here to not help others."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "edited": false, "score": 0, "creation_date": 1527118336, "post_id": 50498801, "comment_id": 88010508, "body": "@MattIan Once you cause undefined behavior, anything can happen."}, {"owner": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "edited": false, "score": 0, "creation_date": 1527118910, "post_id": 50498801, "comment_id": 88010678, "body": "@Wintermute I have tried refactoring to store the objects themselves, and also pointers to the objects, I have also tried a test vector&lt;int&gt; and then adding numbers in both the initializer list and the constructor, they all cause a segfault.  I believe it is something above specifically using the vector itself but I don&#39;t know what."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1527119623, "post_id": 50498801, "comment_id": 88010838, "body": "It is possible that there are other bugs in the code, but I have no way of knowing that. My advice is to run the code in a debugger to see where it breaks and in what state the objects involved are. It can also help to run the code in valgrind or to pass various <code>-fsanitize=stuff</code> or <code>-fstack-protector</code> options to the compiler. In order for me to help you here, however, you&#39;ll have to trim the code down to a minimal example that I can just copy&amp;paste out of my browser and throw into a compiler and debugger. It&#39;s entirely possible that in doing so you&#39;ll find the error yourself, too."}, {"owner": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "edited": false, "score": 0, "creation_date": 1527123301, "post_id": 50498801, "comment_id": 88011560, "body": "@Wintermute You should be able to copy and paste it now, it gets the same error and points to the same line in st_vector.h as before."}, {"owner": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "edited": false, "score": 0, "creation_date": 1527233664, "post_id": 50498801, "comment_id": 88059532, "body": "@Wintermute I was going to write an answer to my own question last night, but I didn&#39;t get a chance to do so.  For the record, I did try not using this-&gt;instance and it still threw the segfault.  I managed to fix it by writing a public function read() and calling it from a separate class, since for this implementation that is where this object will be kept anyway."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1527235953, "post_id": 50498801, "comment_id": 88060889, "body": "Well, if you only fixed one of the errors it&#39;s not a surprise that it&#39;d still throw a segfault, although I&#39;d expect the segfault to be thrown in a different place (when accessing objects in the vector rather than just the vector). It is the nature of undefined behavior that its results are sometimes difficult to predict -- broken code may even sometimes appear to work until you change something completely unrelated. Frankly, I don&#39;t see why you&#39;re so set on ignoring these issues."}, {"owner": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "edited": false, "score": 0, "creation_date": 1527376981, "post_id": 50498801, "comment_id": 88106217, "body": "@Wintermute It&#39;s not throwing a segfault anymore, and have not had any issues since.  This example does not include the checks I have in place because they are completely irrelevant to the problem I was having, considering the example throws the fault before new_t is even used, I don&#39;t see why everyone was so hellbent on ignoring that.  Simply debugging the program would&#39;ve showed that, and while everyone was too busy calling out an uninitialised T object, moving the instance() call fixed all segfaults. I do appreciate the feedback, especially on Singleton design, thanks."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1527379950, "post_id": 50498801, "comment_id": 88106683, "body": "Well, the uninitialized <code>T</code> pointer (not a T object, because the program never creates any) is still a UB-causing problem, and with UB-causing bugs like this all bets about the behavior of the program are off. It&#39;s not unreasonable to say &quot;well, as long as this is in there, you have no guarantees about anything,&quot; although it&#39;s not the way I would argue. If it interests you, my take is that as long as all that was in there, it wasn&#39;t really a minimal example, and stripping it down to a minimal example would have exposed the error more clearly and have gotten you more  pertinent suggestions."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1527380325, "post_id": 50498801, "comment_id": 88106754, "body": "I&#39;m trying to be nice here, but I also have to be frank: In the first iteration, you slapped an incomplete example into your question that no one had any way of running through a debugger. In the second, you slapped in a grand total of five different files and several hundred lines of code in there after people asked for a <b>minimal</b> verifiable example. The point of MCVEs is both to help you narrow down where the error could be and to make it easy for others to reproduce it and understand your code within a few minutes. This was not making it easy, and so you didn&#39;t get lots of effort. Sorry."}, {"owner": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "edited": false, "score": 0, "creation_date": 1527861121, "post_id": 50498801, "comment_id": 88300328, "body": "@Wintermute Uh, the example is close to 100 lines of code, not several hundreds, and took me less than 1 minute to copy and paste. I also said many times that the error is related to the member vector, NOT the objects it is storing.  It&#39;s hard to justify why every single person ignored me every time I say that and then say it&#39;s reasonable for you to call out unrelated issues instead of looking at the problem I&#39;ve asked for help with.  I gave an MCVE of my problem because I genuinely wanted insight, there&#39;s no justifying ignorance.  Still, I do thank you for your help, but I resolved it myself."}], "tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": false, "score": 2, "last_activity_date": 1527151371, "last_edit_date": 1527151371, "creation_date": 1527117872, "answer_id": 50498801, "question_id": 50498717, "link": "https://stackoverflow.com/questions/50498717/why-does-my-class-stdvector-member-always-throw-a-segfault/50498801#50498801", "title": "Why does my class std::vector member always throw a segfault?", "body": "<p><strong>UPDATE after code change:</strong> </p>\n\n<p>I see two things now: One is that <code>new_t</code> in <code>C::readlines</code> is never initialized, so this could break when <code>new_t-&gt;Active()</code> is called a bit later in the function. However, I believe that the main problem you're running into is in <code>C::C()</code>, where it says</p>\n\n<pre><code>instance-&gt;readLines(\"a.ini\");\n</code></pre>\n\n<p>At this point in the execution, <code>C::instance</code> is not yet initialized -- you're only just constructing the object that would later be assigned to it. Because of this, <code>this</code> in the <code>readlines</code> call is invalid, and any attempt to access object members will cause UB. This latter problem can be fixed by just calling</p>\n\n<pre><code>readLines(\"a.ini\");\n</code></pre>\n\n<p>in which case the currently constructed object (that will later be <code>instance</code>) is used for <code>this</code>. I have no idea what you want to happen for the first, though, so all I can say is: If you want to have a <code>vector&lt;unique_ptr&lt;T&gt;&gt;</code>, you will have to create objects of type <code>T</code> with either <code>new T()</code> or (arguably preferrably) <code>std::make_unique&lt;T&gt;()</code> and put them in there.</p>\n\n<p>I'll also say that this is a rather ugly way to implement a singleton in C++. I mean, singletons are never really pretty, but if you're going to do it in C++, the usual way is something like the accepted answer of <a href=\"https://stackoverflow.com/questions/1008019/c-singleton-design-pattern\">C++ Singleton design pattern</a> .</p>\n\n<p><strong>Old answer:</strong></p>\n\n<p>The problem (if it is the only one, which I cannot verify because you didn't provide an MCVE) is in the lines</p>\n\n<pre><code>T move_t = new_T;\nstd::unique_ptr&lt;Adapter&gt; ptr_t(&amp;move_t); // &lt;-- particularly this one\n\nm_ts.push_back(std::move(ptr_t));\n</code></pre>\n\n<p>You're passing a pointer to a local object into a <code>std::unique_ptr</code>, but the whole purpose of <code>std::unique_ptr</code> is to handle objects allocated with <code>new</code> to avoid memory leaks. Not only will the pointer you pass into it be invalid once the scope surrounding this declaration is left, even if that weren't the case the <code>unique_ptr</code> would attempt to <code>delete</code> an object that's not on the heap at the end of its lifecycle. Both problems cause undefined behavior.</p>\n\n<p>To me, it looks as though you really want to use a <code>std::vector&lt;T&gt;</code> instead of <code>std::vector&lt;std::unique_ptr&lt;T&gt;&gt;</code>, but that's a design issue you'll have to answer yourself.</p>\n"}, {"comments": [{"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1527888159, "post_id": 50645224, "comment_id": 88313172, "body": "This is incorrect. Once the constructor body is entered, all member variables are initialized. The problem you had wasn&#39;t that the member vector of the singleton object you were constructing wasn&#39;t initiialized; as I pointed out in my answer, it was that you weren&#39;t <i>using</i> it. Instead of calling <code>this-&gt;readLines()</code>, you were calling <code>instance-&gt;readLines()</code>, at a time when the <code>instance</code> pointer was not yet initialized (more precisely: still zero-initialized, i.e. <code>nullptr</code>). What you did likely works because it postpones the <code>readLines</code> call until after the <code>instance</code> pointer is initialized."}], "tags": [], "owner": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "is_accepted": true, "score": 0, "last_activity_date": 1527861884, "creation_date": 1527861884, "answer_id": 50645224, "question_id": 50498717, "link": "https://stackoverflow.com/questions/50498717/why-does-my-class-stdvector-member-always-throw-a-segfault/50645224#50645224", "title": "Why does my class std::vector member always throw a segfault?", "body": "<p>Answering my own question here.  I am trying to call a member variable from within the constructor of the object that holds it, so the vector I am trying to access is not yet instantiated and doesn't exist in memory.  That is what causes the Segmentation fault to occur, I am trying to access memory that is not allocated yet, hence any call acting on any member of my C class was causing this issue.  </p>\n\n<p>I fixed this problem by adding a public function to the  class that then calls the private <code>readLines()</code> function.  I call that public function from the object that will take ownership of it, and since this occurs after it has been instantiated, the memory is accessible and the problem disappears.</p>\n"}], "owner": {"reputation": 11, "user_id": 9483299, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Matt Ian", "link": "https://stackoverflow.com/users/9483299/matt-ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 50645224, "answer_count": 2, "score": -2, "last_activity_date": 1527861884, "creation_date": 1527117179, "last_edit_date": 1527291485, "question_id": 50498717, "link": "https://stackoverflow.com/questions/50498717/why-does-my-class-stdvector-member-always-throw-a-segfault", "title": "Why does my class std::vector member always throw a segfault?", "body": "<p>I've searched endlessly on SE for a logical explanation for why this is happening.  It is probably something very simple that I've overlooked, however I cannot spot it and would really appreciate some assistance with this.</p>\n\n<p>Last week I implemented a class to read the output of a system call from a .ini file and then find and store the required information into custom objects that are then stored in a vector inside a Config class.  It is a Singleton config class storing a unique_ptr for each instance of my custom class that is created.</p>\n\n<p>The thing is, when I implemented this last week on my laptop, I had <strong>zero</strong> issues reading and writing to my member vector and was able to get it working exactly how I needed it.  Since pulling to my desktop computer, this vector, and any STL container that I use as a member of my class, throws a segmentation fault when I try to do anything on it, even get it's size.</p>\n\n<p>I've tried to shorten the code below to only include sections that actually use this vector.  I have replaced my config with A, and custom class with T, and no matter where I try to use my member container, or any other test STL containers that I add to the class, I get a segfault.</p>\n\n<p>For the record, I am using Qt with C++11.</p>\n\n<p><strong>Update</strong>: This example breaks on line 50 of c.cpp when debugging, and anywhere that tries to call the vector.  </p>\n\n<p><strong>Debug points to this line in stl_vector.h</strong></p>\n\n<pre><code>  // [23.2.4.2] capacity\n      /**  Returns the number of elements in the %vector.  */\n      size_type\n      size() const _GLIBCXX_NOEXCEPT\n      /*-&gt; this line */ { return size_type(this-&gt;_M_impl._M_finish - this-&gt;_M_impl._M_start); }\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"c.h\"\n\nint main(int argc, char *argv[])\n{\n\n    C *c = C::getInstance();\n\n    delete c;\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>t.h - Class stores information from file</strong></p>\n\n<pre><code>#include &lt;string&gt;\n\nclass T\n{\npublic:\n    T();\n\n    bool Active();\n\n    std::string getA();\n    void setA(std::string);\n\nprivate:\n\n    std::string a;\n};\n</code></pre>\n\n<p><strong>t.cpp</strong></p>\n\n<pre><code>#include \"t.h\"\n\nT::T()\n{\n\n}\n\nbool T::Active()\n{\n    if(a == \"\")\n    {\n        return false;\n    }\n    return true;\n}\n\nstd::string T::getA()\n{\n    return this-&gt;a;\n}\n\nvoid T::setA(std::string newa)\n{\n    this-&gt;a = newa;\n}\n</code></pre>\n\n<p><strong>c.h - Class stores T objects and parses file for information</strong></p>\n\n<pre><code>#include \"t.h\"\n#include &lt;QDebug&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;sstream&gt;\n#include &lt;fstream&gt;\n\nclass C\n{\npublic:\n\n    static C* getInstance();\n\nprivate:\n    C();\n\n    static C* instance;\n    static bool init;\n\n    std::vector&lt;std::unique_ptr&lt;T&gt;&gt; t_list;\n    void readLines(const std::string&amp;);\n};\n</code></pre>\n\n<p><strong>c.cpp</strong></p>\n\n<pre><code>#include \"c.h\"\n\nbool C::init = false;\nC* C::instance = nullptr;\n\nC::C()\n{\n    system(\"echo this is a test command &gt; a.ini\");\n    instance-&gt;readLines(\"a.ini\");\n}\n\nC* C::getInstance()\n{\n    if(!init)\n    {\n        instance = new C;\n        init = true;\n    }\n    return instance;\n}\n\nvoid C::readLines(const std::string &amp;path)\n{\n    T* new_t;\n    std::ifstream file(path.c_str());\n\n    if(!file.is_open())\n    {\n        qDebug() &lt;&lt; \"Unable to open \" &lt;&lt; path.c_str();\n    }\n\n    std::ofstream o(\"test.txt\");\n    std::string line;\n    while(std::getline(file, line))\n    {\n        // Split string before searching\n        std::stringstream ss(line);\n        std::string seg;\n        std::vector&lt;std::string&gt; split;\n        std::string left, right;\n\n        // Search patterns\n        size_t find_a = line.find(\"a\");\n\n        size_t del = line.find(':');\n\n        if(find_a != std::string::npos)\n        {\n\n            o &lt;&lt; \"test_Size: \" &lt;&lt; t_list.size() &lt;&lt; std::endl;\n\n\n            if(new_t-&gt;Active())\n            {\n                T* temp = new_t;\n                std::unique_ptr&lt;T&gt; move_t(temp);\n                t_list.push_back(std::move(move_t));\n            }\n\n            o &lt;&lt; \"test: \" &lt;&lt; t_list.size() &lt;&lt; std::endl;\n\n            std::string n;\n\n            // Check if previous ahas any null elements\n\n            // Split string to find a\n            n = line.substr(line.find(\"a \"));\n            n = n.substr(n.find(\" \", +2));\n\n            new_t-&gt;setA(n);\n\n        }\n\n        else\n        {\n            continue;\n        }\n    }\n\n    // Add last a\n    T* t = new_t;\n    std::unique_ptr&lt;T&gt; move_t(t);\n    //t_list.push_back(std::move(move_t));\n\n    o &lt;&lt; \"a: \" &lt;&lt; t_list.back().get()-&gt;getA() &lt;&lt; std::endl;\n    o &lt;&lt; t_list.size() &lt;&lt; std::endl;\n\n    o.close();\n    file.close();\n\n}\n</code></pre>\n"}, {"tags": ["c++", "ros"], "comments": [{"owner": {"reputation": 109, "user_id": 9071644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c447d96d80d5b9c03b9426f8abcfb2fd?s=128&d=identicon&r=PG", "display_name": "ShivamPR21", "link": "https://stackoverflow.com/users/9071644/shivampr21"}, "edited": false, "score": 0, "creation_date": 1527117030, "post_id": 50498684, "comment_id": 88010185, "body": "<a href=\"https://i.stack.imgur.com/Ey0KO.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/Ey0KO.png</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1527118606, "post_id": 50498684, "comment_id": 88010588, "body": "There is no link to code. That said, you do not want a link to code.  All code links do for you is collect downvotes. You do not want to post images of code. Same deal.  The hatred is because links rot and images are hard to search and compile. You want to craft a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces a single problem. If creating the MCVE doesn&#39;t reveal the bug and the solution to you, you post the MCVE. Personally, I&#39;m not clicking the image because there&#39;s little I can do with it, and there is no damn way I&#39;m downloading anonymous files from an anonymous dropbox onto my computer."}], "answers": [{"tags": [], "owner": {"reputation": 1984, "user_id": 8911468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dh52m.jpg?s=128&g=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/8911468/arash"}, "is_accepted": false, "score": 1, "last_activity_date": 1527119182, "creation_date": 1527119182, "answer_id": 50498977, "question_id": 50498684, "link": "https://stackoverflow.com/questions/50498684/how-to-remove-insufficient-memory-error-in-ros-opencv/50498977#50498977", "title": "How to remove insufficient memory error in ROS openCV?", "body": "<p>Look at that huge memory allocation request.\nWhere does it come from?</p>\n\n<p>I would say this is because of </p>\n\n<pre><code>int x=argv[1];\n</code></pre>\n\n<p>You should convert a <code>string</code> to <code>int</code> instead of assigning a memory address into integer.</p>\n\n<p>If the type of <code>argv</code> is <code>char **</code> then what will be the type of <code>argv[1]</code>?</p>\n"}], "owner": {"reputation": 109, "user_id": 9071644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c447d96d80d5b9c03b9426f8abcfb2fd?s=128&d=identicon&r=PG", "display_name": "ShivamPR21", "link": "https://stackoverflow.com/users/9071644/shivampr21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1545069977, "creation_date": 1527116838, "last_edit_date": 1545069977, "question_id": 50498684, "link": "https://stackoverflow.com/questions/50498684/how-to-remove-insufficient-memory-error-in-ros-opencv", "title": "How to remove insufficient memory error in ROS openCV?", "body": "<p>I am trying to make an image of a chess board with opencv and ROS but it's giving the error: the image which I am uploading <a href=\"https://i.stack.imgur.com/Ey0KO.png\" rel=\"nofollow noreferrer\">here</a> contains\nthe screenshot of the command prompt with an error. </p>\n\n<p>and the link contains code.</p>\n\n<p>I tried to make an image of a chessboard via ROS and openCV but it stars giving error while starting node that makes the image and publishes it.</p>\n\n<pre><code>#include \"ros/ros.h\"\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n#include &lt;image_transport/image_transport.h&gt;\n#include &lt;sensor_msgs/image_encodings.h&gt;\n#include &lt;cv_bridge/cv_bridge.h&gt;\n\nusing namespace cv;\nint main(int argc , char **argv){\n    ros::init(argc , argv ,\"cb_publisher\");\n    ros::NodeHandle n(\"~\");\n    image_transport::ImageTransport it(n);\n    image_transport::Publisher pub_image_raw;\n    int x=argv[1];\n    int y=argv[2];\n    int z=argv[3];\n    //int d=y/z;\n    unsigned char color =0;\n\n    cv_bridge::CvImagePtr frame;\n    cv::Mat img(x,y,CV_8UC3,cv::Scalar(0,0,0));\n    for (int i=0;i&lt;x;i++){\n        color=~color;\n        for (int j=0;j&lt;y;j++){\n            cv::Mat ROI=frame -&gt; image(Rect(i,j));\n            ROI.setTo(cv::Scalar(180,180,180));\n            color=~color;\n        }\n    } \n\n    pub_image_raw =it.advertise(\"image\" , 1);\n\n    ros::Rate loop_rate(10);\n    while(ros::ok()){\n        pub_image_raw.publish(frame -&gt;toImageMsg());\n        ros::spinOnce();\n        loop_rate.sleep();    \n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "rest", "http"], "answers": [{"tags": [], "owner": {"reputation": 39380, "user_id": 54734, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ea91774321962f70f19362f43568cda9?s=128&d=identicon&r=PG", "display_name": "VoiceOfUnreason", "link": "https://stackoverflow.com/users/54734/voiceofunreason"}, "is_accepted": false, "score": 0, "last_activity_date": 1527128190, "creation_date": 1527128190, "answer_id": 50499965, "question_id": 50498673, "link": "https://stackoverflow.com/questions/50498673/correct-and-restful-way-of-executing-actions-on-a-server/50499965#50499965", "title": "Correct and RESTful way of executing actions on a server?", "body": "<blockquote>\n  <p>But I am not sure what request (GET, POST, etc.) should I transmit if I want to execute something on the server? What is the RESTful way of doing things? </p>\n</blockquote>\n\n<p>One thing to keep in mind is that REST/HTTP is about semantics; the client and the server exchange messages, but what the server actually does on its side is an implementation detail, so long as the implementation is consistent with the semantics of the message.</p>\n\n<p>It may be good to review RFC 7231, both <a href=\"https://tools.ietf.org/html/rfc7231#section-4.2\" rel=\"nofollow noreferrer\">section 4.2</a>, which describes the common method properties, and <a href=\"https://tools.ietf.org/html/rfc7231#section-4.3\" rel=\"nofollow noreferrer\">section 4.3</a>, which describes the semantics associated with each of the HTTP methods.</p>\n\n<p>But the short version is: don't use <a href=\"https://tools.ietf.org/html/rfc7231#section-4.3\" rel=\"nofollow noreferrer\">safe</a> methods when your intention is to change the server.</p>\n\n<p>Here's how <a href=\"https://lists.w3.org/Archives/Public/www-tag/2002Apr/0207.html\" rel=\"nofollow noreferrer\">Roy Fielding</a> described the situation in 2002</p>\n\n<blockquote>\n  <p>HTTP does not attempt to require the results of a GET to be safe. What it does is require that the semantics of the operation be safe, and therefore it is a fault of the implementation, not the interface or the user of that interface, if anything happens as a result that causes loss of property (money, BTW, is considered property for the sake of this definition).</p>\n</blockquote>\n\n<p>Using polling in your protocol is a perfectly satisfactory way of fetching updates from the client.  WebSockets might be a viable alternative for your situation.</p>\n"}], "owner": {"reputation": 525, "user_id": 2042546, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gLrXB.jpg?s=128&g=1", "display_name": "CorellianAle", "link": "https://stackoverflow.com/users/2042546/corellianale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1527128190, "creation_date": 1527116767, "last_edit_date": 1527117714, "question_id": 50498673, "link": "https://stackoverflow.com/questions/50498673/correct-and-restful-way-of-executing-actions-on-a-server", "title": "Correct and RESTful way of executing actions on a server?", "body": "<p>My application provides a REST server as a way of controlling it.\nI use GET requests to retrieve various status information:</p>\n\n<ul>\n<li>/current_status - returns JSON object and 200 OK</li>\n<li>/programs - returns JSON array and 200 OK</li>\n<li>/configuration - returns JSON object and 200 OK</li>\n<li>...</li>\n</ul>\n\n<p>But I am not sure what request (GET, POST, etc.) should I transmit if I want to execute something on the server? \nWhat is the RESTful way of doing things?\nSome function may fail so I need to notify a client about it which means I need to send a correct status code. </p>\n\n<p>For example:</p>\n\n<ul>\n<li>execute task (number of task, additional parameters): <code>bool execute(int task, const std::string&amp; data)</code> or <code>bool execute(int task, std::vector&lt;std::uint8_t&gt;&amp; data)</code> </li>\n<li>shutdown (timeout): <code>bool shutdown(int timeout)</code></li>\n<li>restart: <code>bool restart()</code></li>\n</ul>\n\n<p>Should GET with parameters or POST with a JSON object that describes a task?</p>\n\n<p>How to handle progress updates? A client-app may ask to execute a task which takes some time to complete and I need to show it's progress on this client.\nDo I need to ask the server constantly? Are there different approaches?</p>\n\n<p>P.S. I am used to working with BSD sockets which means having open connection, but REST approach is connectionless, which totally breaks my understanding.</p>\n"}, {"tags": ["c++", "tensorflow", "eigen"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "edited": false, "score": 0, "creation_date": 1572626880, "post_id": 50936645, "comment_id": 103628964, "body": "How do you get the detected name?"}], "tags": [], "owner": {"reputation": 49, "user_id": 9404007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aacc8e68d65aef341d282268d829d54?s=128&d=identicon&r=PG&f=1", "display_name": "Tomingsun", "link": "https://stackoverflow.com/users/9404007/tomingsun"}, "is_accepted": false, "score": 4, "last_activity_date": 1529440930, "creation_date": 1529440930, "answer_id": 50936645, "question_id": 50498561, "link": "https://stackoverflow.com/questions/50498561/how-to-access-tensorflowtensor-c/50936645#50936645", "title": "How to access tensorflow::Tensor C++", "body": "<p>I'm able to do like this</p>\n\n<pre><code>// tensor&lt;float, 3&gt;: 3 here because it's a 3-dimension tensor\nauto output_detection_boxes = outputs[0].tensor&lt;float, 3&gt;();\nstd::cout &lt;&lt; \"detection boxes\" &lt;&lt; std::endl;\nfor (int i = 0; i &lt; 100; ++i) {\n  for (int j = 0; j &lt; 4; ++j)\n    // using (index_1, index_2, index_3) to access the element in a tensor\n    std::cout &lt;&lt; output_detection_boxes(0, i, j)\n              &lt;&lt; \"\\t\";\n  std::cout &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>and here is the output</p>\n\n<pre><code>detection boxes\n0.0370  0.0465  0.8914  0.3171\n0.0924  0.3944  0.9344  0.9769\n0.0155  0.2988  0.8812  0.5263\n0.1518  0.3817  0.9316  1.0000\n0.0000  0.3285  0.8447  0.6669\n0.0389  0.2030  0.8504  0.4749\n...\n\n(100 in total)\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 7548187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2b4fa3f29e2e77de45259eabc76d69?s=128&d=identicon&r=PG&f=1", "display_name": "codepro", "link": "https://stackoverflow.com/users/7548187/codepro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4278, "favorite_count": 3, "answer_count": 1, "score": 3, "last_activity_date": 1529440930, "creation_date": 1527115896, "question_id": 50498561, "link": "https://stackoverflow.com/questions/50498561/how-to-access-tensorflowtensor-c", "title": "How to access tensorflow::Tensor C++", "body": "<p>I am running Tensorflow using its C++ API.</p>\n\n<p>I have the following call that returns four tensors in finalOutput:</p>\n\n<pre><code>        std::string str1 = \"detection_boxes\";\n        std::string str2 = \"detection_scores\";\n        std::string str3 = \"detection_classes\";\n        std::string str4 = \"num_detections\";\n\n        std::vector&lt;Tensor&gt; finalOutput;\n        status = session-&gt;Run({ {InputName, inputTensor} }, { str1, str2, str3, str4 }, {}, &amp;finalOutput);\n        std::cout &lt;&lt; finalOutput[0].DebugString() &lt;&lt; std::endl;\n</code></pre>\n\n<p>The print statement outputs the following:</p>\n\n<p>\"Tensor&lt;\ntype: float shape: [1,100,4] values: [[0.00710274419 0.766219556 0.0347728245]]...>\"</p>\n\n<p>Now that I have a Tensor with 100 elements and each element has 4 values, how can I iterate through the elements and values?  </p>\n\n<p>It seems like I have to call a function to return a Eigen::TensorMap then somehow access the elements.  I am just not sure quite how to do that.  </p>\n\n<p>Thank you very much for your help!</p>\n"}, {"tags": ["c++", "eclipse"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1527115929, "post_id": 50498439, "comment_id": 88009918, "body": "&quot;The problem with this is I cannot deal with real time data while I build my program.&quot;  explain what you mean by &quot;real time data&quot;."}, {"owner": {"reputation": 825, "user_id": 1890742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a6e4dd1927f88fa2d6589eec2c7c96c?s=128&d=identicon&r=PG", "display_name": "Mark Walsh", "link": "https://stackoverflow.com/users/1890742/mark-walsh"}, "edited": false, "score": 0, "creation_date": 1527116202, "post_id": 50498439, "comment_id": 88009985, "body": "The other program grabs sensor data and logs it.  The &quot;-pipe&quot; argument also pipes the data out standard output.  I want to be able to handle sensor drop outs and the like by sending commands via UDP to fix those problems.  That is why I would like to be able to build/debug in real time."}, {"owner": {"reputation": 17233, "user_id": 27905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f54c977d97a90429c73f3323dc59532a?s=128&d=identicon&r=PG&f=1", "display_name": "nitind", "link": "https://stackoverflow.com/users/27905/nitind"}, "edited": false, "score": 0, "creation_date": 1527119414, "post_id": 50498439, "comment_id": 88010796, "body": "Does the <b>Common</b> tab of the C++ launch configuration not allow you to set a file as the input?"}], "answers": [{"comments": [{"owner": {"reputation": 825, "user_id": 1890742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a6e4dd1927f88fa2d6589eec2c7c96c?s=128&d=identicon&r=PG", "display_name": "Mark Walsh", "link": "https://stackoverflow.com/users/1890742/mark-walsh"}, "edited": false, "score": 0, "creation_date": 1527115512, "post_id": 50498490, "comment_id": 88009836, "body": "Can I do that from Eclipse?  In the arguments tab?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1527115535, "post_id": 50498490, "comment_id": 88009837, "body": "You may want to add to your answer suggestions on how to do this with eclipse&#39;s console."}], "tags": [], "owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "is_accepted": false, "score": -1, "last_activity_date": 1527115411, "creation_date": 1527115411, "answer_id": 50498490, "question_id": 50498439, "link": "https://stackoverflow.com/questions/50498439/how-to-change-standard-input-from-console-to-another-program-in-eclipse/50498490#50498490", "title": "How to change standard input from console to another program in eclipse", "body": "<p>You can simply feed your program with input redirect:</p>\n\n<p><code>./my_program &lt; testFile.txt &gt; saveFile.txt</code></p>\n"}, {"comments": [{"owner": {"reputation": 825, "user_id": 1890742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a6e4dd1927f88fa2d6589eec2c7c96c?s=128&d=identicon&r=PG", "display_name": "Mark Walsh", "link": "https://stackoverflow.com/users/1890742/mark-walsh"}, "edited": false, "score": 0, "creation_date": 1527179706, "post_id": 50498638, "comment_id": 88040850, "body": "For those who want the script exactly for debugging: &quot;./someprogram -pipe | ./Debug/my_program -file saveFile.txt&quot;"}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 1, "last_activity_date": 1527116483, "creation_date": 1527116483, "answer_id": 50498638, "question_id": 50498439, "link": "https://stackoverflow.com/questions/50498439/how-to-change-standard-input-from-console-to-another-program-in-eclipse/50498638#50498638", "title": "How to change standard input from console to another program in eclipse", "body": "<p>You can create a script to do the piping:</p>\n\n<pre><code>#!/bin/bash\n\n./someprogram -pipe | ./my_program -file saveFile.txt\n</code></pre>\n\n<p>Remember to make your script executable:</p>\n\n<pre><code>$ chmod u+x ./my_script.sh\n</code></pre>\n\n<p>Then go to menu <code>Run -&gt; Run configurations...</code></p>\n\n<p>Create a new run configuration and select your script under <code>C/C++Application</code> using the <code>Browse</code> button.</p>\n"}, {"tags": [], "owner": {"reputation": 21982, "user_id": 6505250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FgNJn.jpg?s=128&g=1", "display_name": "howlger", "link": "https://stackoverflow.com/users/6505250/howlger"}, "is_accepted": false, "score": 0, "last_activity_date": 1527140152, "creation_date": 1527140152, "answer_id": 50501695, "question_id": 50498439, "link": "https://stackoverflow.com/questions/50498439/how-to-change-standard-input-from-console-to-another-program-in-eclipse/50501695#50501695", "title": "How to change standard input from console to another program in eclipse", "body": "<p>An input file can be set in the run/debug configuration:</p>\n\n<ol>\n<li><strong><em>Run > Run Configurations...</em></strong></li>\n<li>In the tab <strong><em>Common</em></strong> check <strong><em>Input File</em></strong> and enter or select the <code>testFile.txt</code> file</li>\n</ol>\n"}], "owner": {"reputation": 825, "user_id": 1890742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a6e4dd1927f88fa2d6589eec2c7c96c?s=128&d=identicon&r=PG", "display_name": "Mark Walsh", "link": "https://stackoverflow.com/users/1890742/mark-walsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 50498638, "answer_count": 3, "score": 1, "last_activity_date": 1527140152, "creation_date": 1527115063, "last_edit_date": 1527115865, "question_id": 50498439, "link": "https://stackoverflow.com/questions/50498439/how-to-change-standard-input-from-console-to-another-program-in-eclipse", "title": "How to change standard input from console to another program in eclipse", "body": "<p>I am trying to create a program that parses data received from another program.  Once the program is built, I could do something like this:</p>\n\n<pre><code>./someprogram -pipe | ./my_program -file saveFile.txt\n</code></pre>\n\n<p>As I am making my program in Eclipse, is there a way I can debug/run my program so that standard input  is taken from the other program instead of the console?</p>\n\n<p>A workaround could be to do something like this:</p>\n\n<pre><code>./someprogram -pipe &gt; testFile.txt\n./my_program -infile testFile.txt -outfile saveFile.txt\n</code></pre>\n\n<p>The problem with this is I cannot deal with real time data while I build my program.</p>\n\n<p>Any solutions?</p>\n"}, {"tags": ["c++", "qt", "qt5", "qgraphicsscene", "qgraphicsitem"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1527113815, "post_id": 50498219, "comment_id": 88009354, "body": "You could explain yourself better, I do not understand you"}, {"owner": {"reputation": 55, "user_id": 2447534, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/4be4e6a2c0d2208fc0255f67c944ba20?s=128&d=identicon&r=PG", "display_name": "ALH", "link": "https://stackoverflow.com/users/2447534/alh"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1527113899, "post_id": 50498219, "comment_id": 88009372, "body": "I added a bit more info. Which part is not clear?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1527113910, "post_id": 50498219, "comment_id": 88009375, "body": "You want it to be shown only if it is inside an area, for example the rectangle, and if it is outside that part is cut. I am right?"}, {"owner": {"reputation": 55, "user_id": 2447534, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/4be4e6a2c0d2208fc0255f67c944ba20?s=128&d=identicon&r=PG", "display_name": "ALH", "link": "https://stackoverflow.com/users/2447534/alh"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1527114265, "post_id": 50498219, "comment_id": 88009495, "body": "yes, that is correct."}], "answers": [{"comments": [{"owner": {"reputation": 3380, "user_id": 3308570, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Mzz9.jpg?s=128&g=1", "display_name": "JustWe", "link": "https://stackoverflow.com/users/3308570/justwe"}, "edited": false, "score": 0, "creation_date": 1527126058, "post_id": 50499173, "comment_id": 88012119, "body": "I wonder what&#39;s the <code>certain boundary</code> which the OP means. Why not just use a layer contains transparent stack on the basketball..."}, {"owner": {"reputation": 55, "user_id": 2447534, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/4be4e6a2c0d2208fc0255f67c944ba20?s=128&d=identicon&r=PG", "display_name": "ALH", "link": "https://stackoverflow.com/users/2447534/alh"}, "edited": false, "score": 0, "creation_date": 1527132996, "post_id": 50499173, "comment_id": 88013635, "body": "I&#39;ve edited the question to clarify <code>certain boundary</code>. There is no fixed approach at the moment."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 55, "user_id": 2447534, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/4be4e6a2c0d2208fc0255f67c944ba20?s=128&d=identicon&r=PG", "display_name": "ALH", "link": "https://stackoverflow.com/users/2447534/alh"}, "edited": false, "score": 0, "creation_date": 1527133274, "post_id": 50499173, "comment_id": 88013730, "body": "@ALH  a QGraphicSscene is everyone in QGraphicsView, that has no limits, explain how you determine that area, do not confuse sceneRect () with QGraphicsScene. in my example I add an item so that the area is visible but you can delete the path_item, in my example it is determined by the QPainterPath."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 55, "user_id": 2447534, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/4be4e6a2c0d2208fc0255f67c944ba20?s=128&d=identicon&r=PG", "display_name": "ALH", "link": "https://stackoverflow.com/users/2447534/alh"}, "edited": false, "score": 0, "creation_date": 1527135246, "post_id": 50499173, "comment_id": 88014235, "body": "@ALH  I have added a clearer explanation to my answer, please review it."}, {"owner": {"reputation": 55, "user_id": 2447534, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/4be4e6a2c0d2208fc0255f67c944ba20?s=128&d=identicon&r=PG", "display_name": "ALH", "link": "https://stackoverflow.com/users/2447534/alh"}, "edited": false, "score": 0, "creation_date": 1527137814, "post_id": 50499173, "comment_id": 88014873, "body": "Hmm, with your code, it still seems like the image is visible on the grey background."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 55, "user_id": 2447534, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/4be4e6a2c0d2208fc0255f67c944ba20?s=128&d=identicon&r=PG", "display_name": "ALH", "link": "https://stackoverflow.com/users/2447534/alh"}, "edited": false, "score": 0, "creation_date": 1527149198, "post_id": 50499173, "comment_id": 88020448, "body": "@ALH  have you tried my code ?, the images that I have published prove it, you could show me what you get."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 3380, "user_id": 3308570, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Mzz9.jpg?s=128&g=1", "display_name": "JustWe", "link": "https://stackoverflow.com/users/3308570/justwe"}, "edited": false, "score": 0, "creation_date": 1527155686, "post_id": 50499173, "comment_id": 88024577, "body": "@Jiu  If my code works, you could give it an upvote. :D"}, {"owner": {"reputation": 3380, "user_id": 3308570, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Mzz9.jpg?s=128&g=1", "display_name": "JustWe", "link": "https://stackoverflow.com/users/3308570/justwe"}, "edited": false, "score": 0, "creation_date": 1527155891, "post_id": 50499173, "comment_id": 88024709, "body": "The answer gives correct result as I understand the question...But <i>it still seems like the image is visible on the grey background</i> How could this possible?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 3380, "user_id": 3308570, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Mzz9.jpg?s=128&g=1", "display_name": "JustWe", "link": "https://stackoverflow.com/users/3308570/justwe"}, "edited": false, "score": 0, "creation_date": 1527156011, "post_id": 50499173, "comment_id": 88024788, "body": "@Jiu  What I think is that the askers do not know how to correctly implement the solution in their own project, that happens a lot with the beginners. ;-D"}, {"owner": {"reputation": 55, "user_id": 2447534, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/4be4e6a2c0d2208fc0255f67c944ba20?s=128&d=identicon&r=PG", "display_name": "ALH", "link": "https://stackoverflow.com/users/2447534/alh"}, "edited": false, "score": 0, "creation_date": 1527180726, "post_id": 50499173, "comment_id": 88041402, "body": "Thanks all. The given answer works. I had a line: <code>painter-&gt;drawPixmap(offset(), pixmap());</code> in the <code>paint</code> function before <code>setClipPath</code>, which seemed to override the clipPath. I got it to work by switching the order."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1527135113, "last_edit_date": 1527135113, "creation_date": 1527120986, "answer_id": 50499173, "question_id": 50498219, "link": "https://stackoverflow.com/questions/50498219/hide-area-of-qgraphicsitem-that-is-out-of-boundary/50499173#50499173", "title": "Hide area of QGraphicsItem that is out of boundary", "body": "<p>You have to use <code>setClipPath()</code>.</p>\n\n<p>In the following code I have created a class that inherits from <code>QGraphicsPixmapItem</code> (the same could do with other classes that inherit from <code>QGraphicsItem</code>) and I created the method <code>setBoundaryPath()</code> that receives a <code>QPainterPath</code> that indicates the visible area, for example in the code use:</p>\n\n<pre><code>QPainterPath path;\npath.addRect(QRectF(100, 100, 400, 200));\n</code></pre>\n\n<p>That QPainterPath is a rectangle whose topleft is the point <code>(100, 100)</code> of the QGraphicsScene with size of <code>400</code> in width and <code>200</code> in height.</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QGraphicsRectItem&gt;\n#include &lt;QGraphicsView&gt;\n\nclass GraphicsPixmapItem: public QGraphicsPixmapItem{\n\npublic:\n    GraphicsPixmapItem(const QPixmap &amp; pixmap,  QGraphicsItem *parent = 0):\n        QGraphicsPixmapItem(pixmap, parent)\n    {\n        setFlag(QGraphicsItem::ItemIsMovable, true);\n        setFlag(QGraphicsItem::ItemIsSelectable, true);\n    }\n    void paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget){\n        if(!m_boundaryPath.isEmpty()){\n            QPainterPath path = mapFromScene(m_boundaryPath);\n            if(!path.isEmpty())\n                painter-&gt;setClipPath(path);\n        }\n        QGraphicsPixmapItem::paint(painter, option, widget);\n    }\n\n    QPainterPath boundaryPath() const{\n        return m_boundaryPath;\n    }\n    void setBoundaryPath(const QPainterPath &amp;boundaryPath){\n        m_boundaryPath = boundaryPath;\n        update();\n    }\n\nprivate:\n    QPainterPath m_boundaryPath;\n};\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    QGraphicsView view;\n    QGraphicsScene scene(0, 0, 600, 400);\n    view.setScene(&amp;scene);\n    view.setBackgroundBrush(QBrush(Qt::gray));\n\n    GraphicsPixmapItem *p_item = new GraphicsPixmapItem(QPixmap(\":/ball.png\"));\n    p_item-&gt;setPos(100, 100);\n\n    // Define the area that will be visible\n    QPainterPath path;\n    path.addRect(QRectF(100, 100, 400, 200));\n\n    p_item-&gt;setBoundaryPath(path);\n    scene.addItem(p_item);\n\n    // the item is added to visualize the intersection\n    QGraphicsPathItem *path_item = scene.addPath(path, QPen(Qt::black), QBrush(Qt::white));\n    path_item-&gt;setZValue(-1);\n    view.show();\n    return a.exec();\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1islL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1islL.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/rIZJy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rIZJy.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can find the example code in this <a href=\"https://github.com/eyllanesc/stackoverflow/tree/master/50498219\" rel=\"nofollow noreferrer\">link</a>.</p>\n"}], "owner": {"reputation": 55, "user_id": 2447534, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/4be4e6a2c0d2208fc0255f67c944ba20?s=128&d=identicon&r=PG", "display_name": "ALH", "link": "https://stackoverflow.com/users/2447534/alh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 664, "favorite_count": 0, "accepted_answer_id": 50499173, "answer_count": 1, "score": 1, "last_activity_date": 1544335524, "creation_date": 1527113501, "last_edit_date": 1544335524, "question_id": 50498219, "link": "https://stackoverflow.com/questions/50498219/hide-area-of-qgraphicsitem-that-is-out-of-boundary", "title": "Hide area of QGraphicsItem that is out of boundary", "body": "<p>I have a <code>QGraphicsPixmap</code> item in a <code>QGraphicsScene</code>. The item has flags set to <code>ItemIsMovable</code>, and <code>ItemIsSelectable</code>. How do I ensure that when the item is moved out of a certain boundary - it can be a QGraphicsScene or just a fixed frame size at fixed coordinates - the part becomes hidden?</p>\n\n<p>Eg. <a href=\"https://i.stack.imgur.com/g0MyU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g0MyU.png\" alt=\"enter image description here\"></a></p>\n\n<p>The left part of the basketball becomes hidden.</p>\n"}, {"tags": ["c++", "opencv", "address-sanitizer"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1527113526, "post_id": 50498065, "comment_id": 88009275, "body": "<code>imgs[0].size()</code> is Undefined Behavior if <code>imgs</code> is ever empty."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1527113579, "post_id": 50498065, "comment_id": 88009288, "body": "Compile with <code>-g -fno-omit-frame-pointer</code> and ASAN will give you more information. <a href=\"https://clang.llvm.org/docs/AddressSanitizer.html\" rel=\"nofollow noreferrer\">clang.llvm.org/docs/AddressSanitizer.html</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7891436"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1527145509, "post_id": 50498065, "comment_id": 88018280, "body": "@DrewDormann I wrote that I printed almost the entire matrix..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7891436"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1527145582, "post_id": 50498065, "comment_id": 88018325, "body": "@Justin with those flags I have the same error. Notice that <code>AddressSanitizer can not provide additional info.</code>"}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1527149820, "post_id": 50498065, "comment_id": 88020778, "body": "@Justin <code>-fno-omit-frame-pointer</code> is only needed to get locations of heap allocations so it won&#39;t help here. Clang documentation should have been more explicit on this."}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1527149870, "post_id": 50498065, "comment_id": 88020800, "body": "@DrewDormann True but even then it probly won&#39;t be able to cause SEGV in <code>operator ()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": false, "score": 1, "last_activity_date": 1527149391, "creation_date": 1527149391, "answer_id": 50504193, "question_id": 50498065, "link": "https://stackoverflow.com/questions/50498065/c-opencv-addresssanitizer-segv-on-unknown-address-0x000000000040/50504193#50504193", "title": "C++ Opencv AddressSanitizer: SEGV on unknown address 0x000000000040", "body": "<p>Your code accesses <code>NULL</code> pointer at some point when calling <code>Mat::operator ()</code>. Reasons for this are unclear from the snippet you've posted but should be obvious if you run your code from debugger.</p>\n\n<p>Undefined references when removing <code>-fsanitize=address</code> suggests that some code wasn't recompiled after you changed <code>Makefile</code>. Can you first do <code>make clean</code>?</p>\n\n<p>As a side note, you should append <code>-fsanitize=address</code> to your <code>LDFLAGS</code> as well (to link in runtime library).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7891436"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1706, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1527149391, "creation_date": 1527112704, "question_id": 50498065, "link": "https://stackoverflow.com/questions/50498065/c-opencv-addresssanitizer-segv-on-unknown-address-0x000000000040", "title": "C++ Opencv AddressSanitizer: SEGV on unknown address 0x000000000040", "body": "<p>I can't get my head around this error. I'm working on a project using opencv trying to use hog and svm, inspired by this example: <a href=\"https://docs.opencv.org/3.4.1/d5/d77/train_HOG_8cpp-example.html#_a33\" rel=\"nofollow noreferrer\">https://docs.opencv.org/3.4.1/d5/d77/train_HOG_8cpp-example.html#_a33</a> (the code is really similar). The error is in the second line of this function on imgs[0]. I understood that the error is there because I tried to print the entire image with <code>cout &lt;&lt; imgs[0];</code> and it doesn't print the entire matrix but the error appears at a certain point.</p>\n\n<pre><code>void computeHOG(const vector&lt;Mat&gt; &amp;imgs, vector&lt;Mat&gt; &amp;gradients) {\n  HOGDescriptor hog;\n  hog.winSize = imgs[0].size() / 8 * 8;\n  vector&lt;float&gt; descriptors;\n  Mat gray;\n\n  for (size_t i = 0; i &lt; imgs.size(); ++i) {\n    if (imgs[i].rows &gt;= hog.winSize.height &amp;&amp; imgs[i].cols &gt;= hog.winSize.width) {\n      Rect r = Rect((imgs[i].rows - hog.winSize.height) / 2,\n                    (imgs[i].cols - hog.winSize.width) / 2,\n                    hog.winSize.width,\n                    hog.winSize.height);\n\n      cvtColor(imgs[i](r), gray, COLOR_BGR2GRAY);\n      hog.compute(gray, descriptors, Size(8, 8), Size(0, 0));\n      gradients.push_back(Mat(descriptors).t());\n    }\n  }\n}\n</code></pre>\n\n<p>This is my Makefile</p>\n\n<pre><code>LDIR=lib\nODIR=build\n\nCXX=g++\nCXXFLAGS= -std=c++11 -Wall -Wextra -fsanitize=address -I$(LDIR)\n\nLIBS=-lopencv_calib3d -lopencv_core -lopencv_features2d -lopencv_flann -lopencv_highgui -lopencv_imgcodecs -lopencv_imgproc -lopencv_ml -lopencv_objdetect -lopencv_photo -lopencv_shape -lopencv_stitching -lopencv_superres -lopencv_video -lopencv_videoio\n\n_DEPS=io.hpp hog.hpp\nDEPS=$(patsubst %,$(LDIR)/%,$(_DEPS))\n\n_OBJ=main.o io.o hog.o\nOBJ=$(patsubst %,$(ODIR)/%,$(_OBJ))\n\n$(ODIR)/%.o: $(LDIR)/%.cpp\n    $(CXX) -c -o $@ $&lt; $(CXXFLAGS)\n\n$(ODIR)/%.o: main.cpp $(DEPS)\n    $(CXX) -c -o $@ $&lt; $(CXXFLAGS)\n\nmain: $(OBJ)\n    $(CXX) -o $@ $^ $(CXXFLAGS) $(LIBS)\n\nclean:\n    rm -f $(ODIR)/*.o\n\n.PHONY: clean\n</code></pre>\n\n<p>It compiles but when I run it I get:</p>\n\n<pre><code>ASAN:SIGSEGV\n=================================================================\n==670==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000040 (pc 0x00000040c917 bp 0x7ffe8906f990 sp 0x7ffe8906f980 T0)\n    #0 0x40c916 in cv::MatSize::operator()() const (/[...]/opencv-project/main+0x40c916)\n    #1 0x40ada0 in computeHOG(std::vector&lt;cv::Mat, std::allocator&lt;cv::Mat&gt; &gt; const&amp;, std::vector&lt;cv::Mat, std::allocator&lt;cv::Mat&gt; &gt;&amp;) (/[...]/opencv-project/main+0x40ada0)\n    #2 0x4030df in main (/[...]/opencv-project/main+0x4030df)\n    #3 0x7f511da2082f in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2082f)\n    #4 0x402b48 in _start (/[...]/opencv-project/main+0x402b48)\n\nAddressSanitizer can not provide additional info. SUMMARY: AddressSanitizer: SEGV ??:0 cv::MatSize::operator()() const\n==670==ABORTING\n</code></pre>\n\n<p>If I remove <code>-fsanitize=address</code> from the Makefile,the error comes from compiling, is really too big to paste here but starts with something like this</p>\n\n<pre><code>main.cpp:(.text+0x20): undefined reference to `__asan_option_detect_stack_use_after_return'\nmain.cpp:(.text+0x30): undefined reference to `__asan_stack_malloc_4'\nbuild/main.o: In function `__static_initialization_and_destruction_0(int, int)':\nmain.cpp:(.text+0x970): undefined reference to `__asan_before_dynamic_init'\nmain.cpp:(.text+0x9d4): undefined reference to `__asan_report_load1'\nmain.cpp:(.text+0xa14): undefined reference to `__asan_report_store1'\nmain.cpp:(.text+0xa64): undefined reference to `__asan_report_load1'\n</code></pre>\n\n<p>My g++ version is <code>g++ (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609</code>\nDidn't find any solution looking for it...</p>\n"}, {"tags": ["c++", "string", "parsing"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1527112581, "post_id": 50498000, "comment_id": 88008955, "body": "You could leave the string alone entirely and represent the filtered view as <code>std::vector&lt;std::string_view&gt;</code>. or <code>std::array&lt;std::string_view, 2&gt;</code>."}, {"owner": {"reputation": 2154, "user_id": 362792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/283347e31dc72eedd581c8b744e681f4?s=128&d=identicon&r=PG", "display_name": "Hitobat", "link": "https://stackoverflow.com/users/362792/hitobat"}, "edited": false, "score": 0, "creation_date": 1527112619, "post_id": 50498000, "comment_id": 88008973, "body": "I would use <code>memmove</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1527112723, "post_id": 50498000, "comment_id": 88009010, "body": "Does it matter? Can you not just ignore it or are you prefiltering for a future consumer?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527112780, "post_id": 50498000, "comment_id": 88009034, "body": "filter view of your character buffer (but you filter would be called each time :/)"}, {"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 2, "creation_date": 1527112828, "post_id": 50498000, "comment_id": 88009047, "body": "What are you trying to achieve? Are you trying to actually remove this from the buffer? Then the most efficient way to move it is to just shift everything after it over it with a single move (not n-2). If the message isn&#39;t using a lot of memory you can probably just skip over it for most applications though."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1527113034, "post_id": 50498000, "comment_id": 88009105, "body": "Do the remaining messages need to be contiguous?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1527113070, "post_id": 50498000, "comment_id": 88009115, "body": "What do you want to do with the buffer after you remove the unused data?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1527117848, "post_id": 50498000, "comment_id": 88010384, "body": "According to the laws of physics of our shared universe, if <code>#N</code> bytes need to be shifted in memory, to replace the gap caused by removed data, then the only way to do this is to copy <code>#N</code> bytes. Unfortunately, there is no convenient wormhole that can be employed to make all these bytes move all by themselves, in less time than it takes to copy <code>#N</code> bytes in memory."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1527119933, "post_id": 50498919, "comment_id": 88010896, "body": "You don&#39;t have to make the <code>length</code> field be a signed type for this to work. As long as you can preserve the high bit, an unsigned field will also work fine. Simply set/test the high bit when needed, and mask off that bit when reading the value of the length. No negation needed, that is just wasted cycles"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1527217659, "post_id": 50498919, "comment_id": 88054089, "body": "I&#39;d be very surprised if there was any measurable efficiency-difference between (negating an integer) and (performing bit-mask operations on an integer).  Therefore either way will work fine; it&#39;s mostly a matter of coding-style preference."}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 1, "last_activity_date": 1527118736, "creation_date": 1527118736, "answer_id": 50498919, "question_id": 50498000, "link": "https://stackoverflow.com/questions/50498000/efficient-ways-to-filter-unwanted-data-from-a-buffer-in-c/50498919#50498919", "title": "Efficient ways to filter unwanted data from a buffer in c++", "body": "<p>You don't say how many bits are in your length field, but assuming you can spare an extra bit to make the length-values signed rather than unsigned, I'd be tempted to adopt a convention that says \"if a length-header has a negative value, that indicates that the its message-body is invalid and should be ignored\".</p>\n\n<p>Once you've adopted that convention, then flagging message 2 as invalid is just a matter of overwriting its length-header with the negation of its current value.</p>\n\n<p>Of course, the code that is reading the buffer later on has to also follow the convention, so if e.g. if it sees a length-header with value of -57 then it should just skip ahead by 57 bytes without processing them.</p>\n"}], "owner": {"reputation": 363, "user_id": 2756674, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4e144b57d2642fbbd4ba460ab032f12d?s=128&d=identicon&r=PG&f=1", "display_name": "bvb", "link": "https://stackoverflow.com/users/2756674/bvb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1527139372, "creation_date": 1527112333, "last_edit_date": 1527139372, "question_id": 50498000, "link": "https://stackoverflow.com/questions/50498000/efficient-ways-to-filter-unwanted-data-from-a-buffer-in-c", "title": "Efficient ways to filter unwanted data from a buffer in c++", "body": "<p>Lets assume, data is stored in a character buffer in below format</p>\n\n<pre><code>===========================================================================\n|length| message1| length| message2| length| message3|...|length |messagen|\n===========================================================================\n</code></pre>\n\n<p>Length - indicates size of following message</p>\n\n<p>From this character buffer, suppose only message2 is unwanted and rest all are relevant,\nHow efficiently, message2 can be removed so that rest all data in buffer can be used happily?</p>\n\n<p>I have come accross, in-place algorithm, where we can shift the messages in the buffer itself without any additional copy</p>\n\n<p>But with this also, there is an overhead of shifting (n-2) messages because message2 is irrelevant</p>\n\n<p>Is there any better approach/ solution to it to do in c++?</p>\n\n<p>Let me add more details- \nRequirement here is need to remove/filter irrelevant data from the buffer and then pass it as input to another function for further processing</p>\n\n<p>irrelevant data can come at any position in the character buffer. Just for example, referred as message 2</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527113554, "post_id": 50497965, "comment_id": 88009280, "body": "Do you compile with c++11 or higher, it seems you do a copy whereas it should be a move."}, {"owner": {"reputation": 351, "user_id": 6427897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ccbf3b5709e92f8fa860f74a67b0b64a?s=128&d=identicon&r=PG&f=1", "display_name": "SeeSoftware", "link": "https://stackoverflow.com/users/6427897/seesoftware"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527114101, "post_id": 50497965, "comment_id": 88009440, "body": "@Jarod42 MSVC++, C++17. Im not sure why it is not a move, i tried using a rvalue reference to it but it gave me the same result."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527114528, "post_id": 50497965, "comment_id": 88009553, "body": "Seems to works as expected <a href=\"http://rextester.com/MVNC33947\" rel=\"nofollow noreferrer\">here</a> (Microsoft (R) C/C++ Optimizing Compiler Version 19.00.23506 for x64)."}, {"owner": {"reputation": 351, "user_id": 6427897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ccbf3b5709e92f8fa860f74a67b0b64a?s=128&d=identicon&r=PG&f=1", "display_name": "SeeSoftware", "link": "https://stackoverflow.com/users/6427897/seesoftware"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527115257, "post_id": 50497965, "comment_id": 88009767, "body": "@Jarod42 quite strange trying the exact same code in my IDE results in the same error: <a href=\"http://prntscr.com/jltfi5\" rel=\"nofollow noreferrer\">prntscr.com/jltfi5</a> (screenshot). I installed boost with vcpkg if that matters."}, {"owner": {"reputation": 351, "user_id": 6427897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ccbf3b5709e92f8fa860f74a67b0b64a?s=128&d=identicon&r=PG&f=1", "display_name": "SeeSoftware", "link": "https://stackoverflow.com/users/6427897/seesoftware"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527115453, "post_id": 50497965, "comment_id": 88009819, "body": "@Jarod42 ah ok i tried changing the C++ version to 14 and it compiles fine now but i need version 17 because i want to use structured binding. Is there a way to fix the issue?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527115639, "post_id": 50497965, "comment_id": 88009860, "body": "C++17 should even omit the move constructor... Can you try <code>auto&amp;&amp; tuple = boost::synchronize(val1, val2);</code> ?"}, {"owner": {"reputation": 351, "user_id": 6427897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ccbf3b5709e92f8fa860f74a67b0b64a?s=128&d=identicon&r=PG&f=1", "display_name": "SeeSoftware", "link": "https://stackoverflow.com/users/6427897/seesoftware"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527115748, "post_id": 50497965, "comment_id": 88009882, "body": "@Jarod42 nope doesnt work, i allready tried that before."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527116070, "post_id": 50497965, "comment_id": 88009952, "body": "It compiles on same site with <code>g++ -std=c++17</code>, so it should be a bug of visual."}, {"owner": {"reputation": 351, "user_id": 6427897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ccbf3b5709e92f8fa860f74a67b0b64a?s=128&d=identicon&r=PG&f=1", "display_name": "SeeSoftware", "link": "https://stackoverflow.com/users/6427897/seesoftware"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527116813, "post_id": 50497965, "comment_id": 88010129, "body": "anyone else with Visual Studio 2017 should try the code, because it might be that im having a broken install of it and i want to exclude that"}], "owner": {"reputation": 351, "user_id": 6427897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ccbf3b5709e92f8fa860f74a67b0b64a?s=128&d=identicon&r=PG&f=1", "display_name": "SeeSoftware", "link": "https://stackoverflow.com/users/6427897/seesoftware"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 405, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1527113030, "creation_date": 1527112106, "last_edit_date": 1527113030, "question_id": 50497965, "link": "https://stackoverflow.com/questions/50497965/c-how-to-use-boostsynchronized-value-with-boostsynchronize", "title": "C++: How to use boost::synchronized_value with boost::synchronize?", "body": "<p>I'm trying to synchronize 2 <code>boost::synchronized_value</code> without potential dead-lock and I'm trying to do this:</p>\n\n<pre><code>boost::synchronized_value&lt;int&gt; val1;\nboost::synchronized_value&lt;int&gt; val2;\n\nauto tuple = boost::synchronize(val1, val2);\n</code></pre>\n\n<p>but this results in this compiler error:</p>\n\n<pre><code>error: use of deleted function 'boost::mutex::mutex(const boost::mutex&amp;)'\n</code></pre>\n\n<p>my snippet is not far off the last example provided in <a href=\"https://www.boost.org/doc/libs/1_54_0/doc/html/thread/sds.html#thread.sds.synchronized_valuesxxx.tutorial.operations_across_multiple_objects\" rel=\"nofollow noreferrer\">here</a>, so I cannot explain it to myself.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1209, "user_id": 234913, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3b8ae5534ab11c7ad6c33ab28874baa9?s=128&d=identicon&r=PG", "display_name": "CrociDB", "link": "https://stackoverflow.com/users/234913/crocidb"}, "edited": false, "score": 0, "creation_date": 1527111981, "post_id": 50497924, "comment_id": 88008741, "body": "<a href=\"https://stackoverflow.com/questions/22698653/looser-throw-specifier-in-c\" title=\"looser throw specifier in c\">stackoverflow.com/questions/22698653/&hellip;</a>"}, {"owner": {"reputation": 101, "user_id": 9205665, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209058435453162/picture?type=large", "display_name": "Foivos Allayiotis", "link": "https://stackoverflow.com/users/9205665/foivos-allayiotis"}, "reply_to_user": {"reputation": 1209, "user_id": 234913, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3b8ae5534ab11c7ad6c33ab28874baa9?s=128&d=identicon&r=PG", "display_name": "CrociDB", "link": "https://stackoverflow.com/users/234913/crocidb"}, "edited": false, "score": 1, "creation_date": 1527112217, "post_id": 50497924, "comment_id": 88008826, "body": "Sorry i didn&#39;t see that it was already answered.. Thanks :)"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 9205665, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209058435453162/picture?type=large", "display_name": "Foivos Allayiotis", "link": "https://stackoverflow.com/users/9205665/foivos-allayiotis"}, "edited": false, "score": 0, "creation_date": 1527112262, "post_id": 50497962, "comment_id": 88008841, "body": "Sorry about the typos :) but i still shows the same error.. Thanks though i think i found the answer from another post :)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 101, "user_id": 9205665, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209058435453162/picture?type=large", "display_name": "Foivos Allayiotis", "link": "https://stackoverflow.com/users/9205665/foivos-allayiotis"}, "edited": false, "score": 0, "creation_date": 1527112453, "post_id": 50497962, "comment_id": 88008914, "body": "Just added <a href=\"http://coliru.stacked-crooked.com/a/07b3150c41bfd7a3\" rel=\"nofollow noreferrer\">Demo</a> link. No errors."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1527112415, "last_edit_date": 1527112415, "creation_date": 1527112091, "answer_id": 50497962, "question_id": 50497924, "link": "https://stackoverflow.com/questions/50497924/custom-exception-in-c/50497962#50497962", "title": "Custom Exception in c++", "body": "<p>You have some typos:</p>\n\n<ul>\n<li>constructor name mismatch</li>\n<li>signature of <code>what</code> mismatch (<code>override</code> helps to spot those issues).</li>\n</ul>\n\n<p>Your code should be:</p>\n\n<pre><code>class OversizeException : public std::exception\n{\nprivate:    \n    std::string message = \" \";\n\npublic:\n    OversizeException()\n    {\n         message = \" Cannot put ship there! Oversize Exception\";\n    }\n    const char* what() const noexcept override\n    {\n        return message.c_str();\n    }\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/07b3150c41bfd7a3\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 101, "user_id": 9205665, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209058435453162/picture?type=large", "display_name": "Foivos Allayiotis", "link": "https://stackoverflow.com/users/9205665/foivos-allayiotis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 952, "favorite_count": 0, "closed_date": 1527112041, "answer_count": 1, "score": 2, "last_activity_date": 1527112415, "creation_date": 1527111893, "question_id": 50497924, "link": "https://stackoverflow.com/questions/50497924/custom-exception-in-c", "closed_reason": "Duplicate", "title": "Custom Exception in c++", "body": "<p>I'm trying to create my own exception class but it is not working. Specifically, i am getting these errors:\n    \"looser throw specifier for 'virtual OversizeException::~OversizeException()'\" \n    \"overriding 'virtual std::exception::~exception() throw()'\"\nI'm relatively new to C++ so i would like some help!\nHere is the the code</p>\n\n<pre><code>class OversizeException : public exception\n{\nprivate:    \n    string message = \" \";\n\npublic:\n    OverlapTilesException()\n    {\n         message = \" Cannot put ship there! Oversize Exception\";\n    }\n    const string what()\n    {\n        return message;\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "gcc", "language-lawyer", "compiler-optimization", "undefined-behavior"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1527111691, "post_id": 50497854, "comment_id": 88008620, "body": "@CoryKramer: aggregate initialization."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1527111701, "post_id": 50497854, "comment_id": 88008625, "body": "&quot;Undefined behavior&quot; is a term defined by the C++ Standard to describe a sort of incorrect C++ program. It is not (usually) related to what compiler, compiler flags, etc. you use to process a program."}, {"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1527111708, "post_id": 50497854, "comment_id": 88008629, "body": "@CoryKramer A is an aggregate type"}, {"owner": {"reputation": 2756, "user_id": 2487730, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/738346725144dd27b32670cc7316ee80?s=128&d=identicon&r=PG", "display_name": "zipzit", "link": "https://stackoverflow.com/users/2487730/zipzit"}, "edited": false, "score": 0, "creation_date": 1527111712, "post_id": 50497854, "comment_id": 88008632, "body": "Mystery abbreviation \u2018UB\u2019??"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 2756, "user_id": 2487730, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/738346725144dd27b32670cc7316ee80?s=128&d=identicon&r=PG", "display_name": "zipzit", "link": "https://stackoverflow.com/users/2487730/zipzit"}, "edited": false, "score": 0, "creation_date": 1527111751, "post_id": 50497854, "comment_id": 88008641, "body": "@zipzit: UB stand for <b>U</b>ndefined <b>B</b>ehavior."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527111803, "post_id": 50497854, "comment_id": 88008664, "body": "The compiler is <i>not</i> required to warn you about engaging in UB. It is <i>your</i> responsibility to just not do that. Sorry, but such are the rules of the language."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 2756, "user_id": 2487730, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/738346725144dd27b32670cc7316ee80?s=128&d=identicon&r=PG", "display_name": "zipzit", "link": "https://stackoverflow.com/users/2487730/zipzit"}, "edited": false, "score": 1, "creation_date": 1527111875, "post_id": 50497854, "comment_id": 88008689, "body": "@zipzit - &quot;UB&quot; == &quot;Undefined Behaviour&quot;."}, {"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527111929, "post_id": 50497854, "comment_id": 88008717, "body": "@JesperJuhl That&#39;s what I&#39;m trying to do. Is there a compiler  flag that would prevent this faulty optimization?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1527112098, "post_id": 50497854, "comment_id": 88008787, "body": "@Ayrosa huh? <i>What</i> are you trying to do? If you are trying to invoke UB then all bets are off.. please be specific, <i>what</i> are you trying to do?"}, {"owner": {"reputation": 2283, "user_id": 4526030, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-s05ILbxi6YA/AAAAAAAAAAI/AAAAAAAAACc/yAd6W8jNSBI/photo.jpg?sz=128", "display_name": "John Perry", "link": "https://stackoverflow.com/users/4526030/john-perry"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527112137, "post_id": 50497854, "comment_id": 88008800, "body": "@JesperJuhl I think he wants the compilation to fail with an error."}, {"owner": {"reputation": 2283, "user_id": 4526030, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-s05ILbxi6YA/AAAAAAAAAAI/AAAAAAAAACc/yAd6W8jNSBI/photo.jpg?sz=128", "display_name": "John Perry", "link": "https://stackoverflow.com/users/4526030/john-perry"}, "edited": false, "score": 0, "creation_date": 1527112146, "post_id": 50497854, "comment_id": 88008806, "body": "@Ayrosa FWIW clang++ does the same thing"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 2283, "user_id": 4526030, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-s05ILbxi6YA/AAAAAAAAAAI/AAAAAAAAACc/yAd6W8jNSBI/photo.jpg?sz=128", "display_name": "John Perry", "link": "https://stackoverflow.com/users/4526030/john-perry"}, "edited": false, "score": 0, "creation_date": 1527112256, "post_id": 50497854, "comment_id": 88008838, "body": "@John Perry - then we are back to the definition of UB; it may or may not fail.. you just can&#39;t tell. Just don&#39;t write UB.."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1527112270, "post_id": 50497854, "comment_id": 88008845, "body": "I&#39;m also having trouble understanding what&#39;s being asked.  Don&#39;t <i>describe</i> the code that you&#39;re asking about, please show that exact code."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1527112639, "post_id": 50497854, "comment_id": 88008975, "body": "I think the program (with one translation unit, without <code>a.i</code>) is actually ill-formed no diagnostic required, not undefined behavior.  [basic.def.odr]/10 has &quot;shall&quot; but never &quot;undefined behavior&quot;.  (Though, does that difference have any consequences?)"}, {"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1527112798, "post_id": 50497854, "comment_id": 88009038, "body": "@aschepler This code is UB. Did you look at [intro.compliance]/2 (2.3) <a href=\"http://eel.is/c++draft/intro.compliance#2.3\" rel=\"nofollow noreferrer\">eel.is/c++draft/intro.compliance#2.3</a> ?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1527113498, "post_id": 50497854, "comment_id": 88009263, "body": "@Ayrosa: That&#39;s not the same thing as &quot;undefined behavior&quot;, strictly speaking. UB is a <i>runtime</i> property. Now, you can write code that always provokes UB. But the things the standard defines as UB are things which are properties of runtime values, not compile-time constructs. Yes, the standard does not impose any particular behavior on ill-formed programs, but that&#39;s different (technically) from declaring the construct to have UB."}, {"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1527115600, "post_id": 50497854, "comment_id": 88009851, "body": "@NicolBolas I&#39;m pretty sure, but I don&#39;t remember where, I read a comment by Daniel Kr&#252;gler, saying this, i.e., that an ill-formed code with no diagnostic required is basically a code with undefined behavior. And AFAICT,  [intro.compliance]/2 (2.3) seems to confirm this."}], "answers": [{"comments": [{"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "edited": false, "score": 0, "creation_date": 1527113479, "post_id": 50498178, "comment_id": 88009256, "body": "But why can&#39;t the language verify the odr-use of the the variable <code>a</code> <b>before</b> the optimization is done? That&#39;s basically what I&#39;m trying to understand. If the compiler did that an error could be emitted in this case."}, {"owner": {"reputation": 2283, "user_id": 4526030, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-s05ILbxi6YA/AAAAAAAAAAI/AAAAAAAAACc/yAd6W8jNSBI/photo.jpg?sz=128", "display_name": "John Perry", "link": "https://stackoverflow.com/users/4526030/john-perry"}, "reply_to_user": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "edited": false, "score": 0, "creation_date": 1527113712, "post_id": 50498178, "comment_id": 88009318, "body": "This is where you need someone who knows more about C++ than I do, but I <i>think</i> it&#39;s due to the nature of C and C++: the whole point of <code>extern</code> is that it&#39;s defined in a separate linker object, possibly defined with a different language -- something elegant, perhaps, like Ada ;-) -- and C/C++ typically don&#39;t check that you cross your t&#39;s and dot your i&#39;s. For instance, you can write a function <code>int do_something()</code> that doesn&#39;t return anything, and the compiler lets it go. It&#39;s just in the nature of the language. <b>Keep in mind that that&#39;s my opinion only.</b>"}, {"owner": {"reputation": 2283, "user_id": 4526030, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-s05ILbxi6YA/AAAAAAAAAAI/AAAAAAAAACc/yAd6W8jNSBI/photo.jpg?sz=128", "display_name": "John Perry", "link": "https://stackoverflow.com/users/4526030/john-perry"}, "reply_to_user": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "edited": false, "score": 0, "creation_date": 1527113808, "post_id": 50498178, "comment_id": 88009347, "body": "Incidentally, I&#39;m shocked that the linker let it go through. I have to put up with &quot;undefined symbol&quot; errors so often when working in C or C++ -- more so in the past than now, but still! -- that I actually thought the linked always checked for these things. Go figure."}, {"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "edited": false, "score": 0, "creation_date": 1527113976, "post_id": 50498178, "comment_id": 88009401, "body": "I have to leave now. I&#39;ll be back in 20 minutes. Thanks for your reply and comments."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1527120693, "post_id": 50498178, "comment_id": 88011056, "body": "@JohnPerry: &quot;<i>I&#39;m shocked that the linker let it go through.</i>&quot; Why <i>shouldn&#39;t</i> it go through? The linker probably never sees the access of <code>j</code> through <code>a</code>. Any compiler worth using will see <code>a.j</code> and immediately convert it into <code>A::j</code>, since they&#39;re conceptually <i>identical</i>. The only times it wouldn&#39;t be identical would be if <code>a</code> is not defined, which is ill-formed/NDR, so they don&#39;t have to take that possibility into account."}, {"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1527121670, "post_id": 50498178, "comment_id": 88011234, "body": "@NicolBolas &quot;Any compiler worth using will see <code>a.j</code> and <b>immediately</b> convert it into <code>A::j</code>&quot; (my emphases) . But why do they have to that before verifying the odr-use of the variable <code>a</code> in the expression <code>std::cout &lt;&lt; a.k &lt;&lt; &#39;\\n&#39;;</code> ?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "edited": false, "score": 0, "creation_date": 1527121891, "post_id": 50498178, "comment_id": 88011286, "body": "@Ayrosa: The whole point of making ODR violations ill-formed/NDR is so that <i>nobody has to</i> verify them at all. If the committee wanted compilers/linkers to verify the ODR of all definitions, they wouldn&#39;t have made them &quot;no diagnostic required&quot;. And in this particular case, the transformation would be done by the <i>compiler</i>, not the linker, which has no information about where <code>a</code> is actually defined."}, {"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1527122262, "post_id": 50498178, "comment_id": 88011362, "body": "@NicolBolas I can understand that for the case when there are more than one definition of a non-inline variable in different translation units, because that would be much harder to detect.  But that is not the case in the example above. To verify whether <code>a</code> is odr-used or not in <code>std::cout &lt;&lt; a.k &lt;&lt; &#39;\\n&#39;;</code> seems to me, to be straightforward."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "edited": false, "score": 0, "creation_date": 1527123193, "post_id": 50498178, "comment_id": 88011544, "body": "@Ayrosa: By using <code>extern</code>, you told the compiler &quot;assume this exists&quot;. So it is no longer up to the compiler to decide whether the object is defined; that&#39;s now the linker&#39;s job. But there&#39;s no reason for the linker to ever see <code>a.k</code> because that expression never actually accesses <code>a</code>. Whatever the standard says about that expression, the fact is that the existence of <code>a</code> is irrelevant to resolving to which object the expression accesses. And since ODR violations are NDR, the compiler can convert it to <code>A::k</code> freely."}, {"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1527123692, "post_id": 50498178, "comment_id": 88011638, "body": "@NicolBolas You have a point with the <code>extern</code> specifier. But in relation to &quot;that expression never actually accesses <code>a</code>&quot;, I have to disagree. See this phrase in <a href=\"http://eel.is/c++draft/class.static#1\" rel=\"nofollow noreferrer\">&#91;class.static&#93;/1</a>: &quot;in which case the object expression is evaluated&quot;."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "edited": false, "score": 0, "creation_date": 1527123873, "post_id": 50498178, "comment_id": 88011675, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/171653/discussion-between-nicol-bolas-and-ayrosa\">continue this discussion in chat</a>."}, {"owner": {"reputation": 2283, "user_id": 4526030, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-s05ILbxi6YA/AAAAAAAAAAI/AAAAAAAAACc/yAd6W8jNSBI/photo.jpg?sz=128", "display_name": "John Perry", "link": "https://stackoverflow.com/users/4526030/john-perry"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1527126671, "post_id": 50498178, "comment_id": 88012258, "body": "@NicolBolas &quot;Why shouldn&#39;t it go through?&quot; Because the stupid linker is always complaining that it can&#39;t find some symbol that I know I compiled, no more, no less! :-) I wasn&#39;t aware there are some &quot;loopholes,&quot; so to speak; I certainly didn&#39;t mean it in a &quot;language lawyer&quot; sense. I&#39;m simply speaking from the experience of having had to figure out many times why the linker reports it can&#39;t find some symbol. I try to keep things modular, so I&#39;m not used to using <code>extern</code> anything."}, {"owner": {"reputation": 2283, "user_id": 4526030, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-s05ILbxi6YA/AAAAAAAAAAI/AAAAAAAAACc/yAd6W8jNSBI/photo.jpg?sz=128", "display_name": "John Perry", "link": "https://stackoverflow.com/users/4526030/john-perry"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1527126866, "post_id": 50498178, "comment_id": 88012302, "body": "@NicolBolas &quot;Any compiler worth using will see <code>a.j</code> and immediately convert it into <code>A::j</code>, since they&#39;re conceptually identical.&quot; I confess I don&#39;t get why they&#39;re conceptually <i>identical</i>. The first is attached to a specific field of a specific variable of structured type; the second is not attached to a specific variable. Can you explain?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1527127078, "post_id": 50498178, "comment_id": 88012350, "body": "@JohnPerry: Please go to the chatroom for the answer."}], "tags": [], "owner": {"reputation": 2283, "user_id": 4526030, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-s05ILbxi6YA/AAAAAAAAAAI/AAAAAAAAACc/yAd6W8jNSBI/photo.jpg?sz=128", "display_name": "John Perry", "link": "https://stackoverflow.com/users/4526030/john-perry"}, "is_accepted": false, "score": 1, "last_activity_date": 1527113290, "creation_date": 1527113290, "answer_id": 50498178, "question_id": 50497854, "link": "https://stackoverflow.com/questions/50497854/is-there-any-compiler-flag-that-i-could-use-in-the-code-below-to-report-a-warnin/50498178#50498178", "title": "Is there any compiler flag that I could use in the code below to report a warning about UB?", "body": "<p>The compiler probably won't have an option to make it fail because the compiler merely checks the language, and the language allows that.</p>\n\n<p>The <strong>linker</strong> will have an option that makes it fail, and you can pass options to the linker through most compilers, including <code>g++</code>. I can make it fail with gcc in the following way:</p>\n\n<pre><code>g++ -std=c++11 -Xlinker --require-defined=a main.cpp\n</code></pre>\n\n<p>which gives the error</p>\n\n<pre><code>/usr/bin/ld: required symbol `a' not defined\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>You didn't ask for this, but <code>clang++</code> is a little easier:</p>\n\n<pre><code>clang++ -std=c++11 -u a main.cpp \n</code></pre>\n\n<p>and more verbose, too:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"a\", referenced from:\n     -u command line option\n     (maybe you meant: __ZNSt3__124__put_character_sequenceIcNS_11char_traitsIcEEEERNS_13basic_ostreamIT_T0_EES7_PKS4_m, _main , __ZNSt3__111char_traitsIcE3eofEv , __ZNSt3__116__pad_and_outputIcNS_11char_traitsIcEEEENS_19ostreambuf_iteratorIT_T0_EES6_PKS4_S8_S8_RNS_8ios_baseES4_ , __ZNSt3__1lsINS_11char_traitsIcEEEERNS_13basic_ostreamIcT_EES6_c , ___clang_call_terminate , __ZNSt3__111char_traitsIcE11eq_int_typeEii )\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Give that a shot.</p>\n"}, {"comments": [{"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "edited": false, "score": 0, "creation_date": 1527184314, "post_id": 50508149, "comment_id": 88043219, "body": "I think your answer above to a different question, not only illuminating, but brilliant. You answered all the reservations I had about the example in question."}, {"owner": {"reputation": 1035, "user_id": 1577873, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/h4UOY.jpg?s=128&g=1", "display_name": "John Kalane", "link": "https://stackoverflow.com/users/1577873/john-kalane"}, "edited": false, "score": 0, "creation_date": 1527247577, "post_id": 50508149, "comment_id": 88067726, "body": "Apparently compilers prefer the first strategy, i.e., they replace <code>a.k</code> with 1 (GCC, clang and VS do this). Given that the first strategy is UB and the second is not, why do they prefer the first option?"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "reply_to_user": {"reputation": 1035, "user_id": 1577873, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/h4UOY.jpg?s=128&g=1", "display_name": "John Kalane", "link": "https://stackoverflow.com/users/1577873/john-kalane"}, "edited": false, "score": 0, "creation_date": 1527250474, "post_id": 50508149, "comment_id": 88069508, "body": "@JohnKalane I do not know. Perhaps the designers of the compilers disagree with the claim that the first strategy is undefined behavior? (The specs in question do not explicitly call this &quot;undefined behavior&quot; so there is at least room for interpretation.)"}], "tags": [], "owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "is_accepted": true, "score": 4, "last_activity_date": 1527161085, "creation_date": 1527161085, "answer_id": 50508149, "question_id": 50497854, "link": "https://stackoverflow.com/questions/50497854/is-there-any-compiler-flag-that-i-could-use-in-the-code-below-to-report-a-warnin/50508149#50508149", "title": "Is there any compiler flag that I could use in the code below to report a warning about UB?", "body": "<p>I think the answer to a different question would be more illuminating. The dread of undefined behavior lies in the inability to guarantee the same runtime results when using different compilers. So:</p>\n\n<p><strong>Don't I need an error message to ensure that runtime behavior does not depend on the compiler used?</strong>\nNo. There are two cases to consider.</p>\n\n<p><em>First case:</em> the compiler replaces <code>a.k</code> with the value <code>1</code>. The runtime behavior is the intended result.</p>\n\n<p><em>Second case:</em> the compiler does not replace <code>a.k</code> with a fixed value, instead producing some machine code that references the <code>a</code> variable. (This is what you are trying to trigger with a compiler option.) In this case, the linker sees the reference and will emit an error when the variable is not found in any of the translation units. You cannot progress to runtime behavior, so you do not get runtime results that are inconsistent with the first case.</p>\n\n<p>So there could in theory be a few pains when switching compilers, but not the obscure bugs typical of undefined behavior.</p>\n\n<p>In case some do not find this answer illuminating, I now return to the original question, rephrased a bit.</p>\n\n<p><strong>Is there any flag I can use to force a diagnostic message (error or warning) when this sort of violation of the one-definition rule occurs?</strong>\nDepends on the compiler, but probably not. Note that [basic.def.odr]/10 mentions \"no diagnostic required\", so a compiler is not required to provide a diagnostic message when this particular violation occurs. Why not? Presumably because of the above: either a message will be triggered at a later stage (i.e. linking) or the intended behavior will shine through. There is no benefit to increasing the compiler's bookkeeping burden by requiring an error/warning in this case.</p>\n"}], "owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 50508149, "answer_count": 2, "score": 1, "last_activity_date": 1527161085, "creation_date": 1527111487, "last_edit_date": 1527113007, "question_id": 50497854, "link": "https://stackoverflow.com/questions/50497854/is-there-any-compiler-flag-that-i-could-use-in-the-code-below-to-report-a-warnin", "title": "Is there any compiler flag that I could use in the code below to report a warning about UB?", "body": "<p>I'm not very familiar with the GCC compiler, and I'm trying to run a code using two source files in <a href=\"https://wandbox.org/permlink/WroY2XLK0PxCH5ob\" rel=\"nofollow noreferrer\">wandbox</a>. Let's start with the first code using the main file (default) and a second source file named <code>other.cc</code>, as follows:</p>\n\n<p><strong>main file</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\nstruct A {\n    int i = 1;\n    static const int k = 1;\n};\nextern A a;    // The object a is defined in other.cc\n\nint main() {\n    std::cout &lt;&lt; a.i &lt;&lt; '\\n';\n    std::cout &lt;&lt; a.k &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p><strong>other.cc</strong></p>\n\n<pre><code>struct A {\n    int i = 1;\n    static const int k = 1;\n};\nA a{2};\n</code></pre>\n\n<p>Note that I have to insert the name of the file <code>other.cc</code> in the box <strong>Compiler Options</strong>, on the left of the Wandbox, in order for this file to be compiled and linked into the final object file. Running this code I get the numbers 2 and 1 printed below, and they are correct.</p>\n\n<pre><code>2\n1\n</code></pre>\n\n<p>Now, if I exclude the file <code>other.cc</code> from the compilation and linking processes, by deleting its name from the <strong>Compilation options</strong> box, I get a linking error, about the reference to the non-static data member <code>A::i</code> being used in the expression</p>\n\n<pre><code>std::cout &lt;&lt; a.i &lt;&lt; '\\n';\n</code></pre>\n\n<p>If I then erase this statement from the code, it <em>apparently</em> runs normally, because the compiler replaces the variable <code>a.k</code> by its constant value 1 in the remaining statement <code>std::cout &lt;&lt; a.k &lt;&lt; '\\n';</code> in main(), printing 1. But this is considered undefined behavior, according to <a href=\"http://eel.is/c++draft/basic.def.odr#10\" rel=\"nofollow noreferrer\">[basic.def.odr]/10</a> and <a href=\"http://eel.is/c++draft/intro.compliance#2.3\" rel=\"nofollow noreferrer\">[intro.compliance]/2 (2.3)</a>. Note the \"no diagnostic required\" mentioned on [basic.def.odr]/10.</p>\n\n<p>I'm trying then to force the compiler to emit an error in this case, by the use of some flag that will prevent this optimization. I have already tried with the flags <code>-fkeep-static-consts</code> and <code>-fno-keep-static-consts</code>, to no avail. Is there any other flag that I could use to avoid this undefined behavior?</p>\n\n<p>I got this example from <a href=\"https://groups.google.com/a/isocpp.org/d/msg/std-discussion/zmRxdNdVUNI/Q-976qkUBgAJ\" rel=\"nofollow noreferrer\">this discussion</a> in C++ std-discussion.</p>\n\n<p><strong>I know that by defining the object <code>a</code> in the first file would solve the problem. But that's not what I am looking for with this weird example. I'm just trying to get a better picture of how compilers work in these unusual circumstances.</strong></p>\n"}, {"tags": ["c++", "debugging", "memory-leaks", "windbg"], "comments": [{"owner": {"reputation": 4058, "user_id": 754407, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1b5c51ae68d0d76ce0e178f777f1742d?s=128&d=identicon&r=PG", "display_name": "hauron", "link": "https://stackoverflow.com/users/754407/hauron"}, "edited": false, "score": 0, "creation_date": 1527111646, "post_id": 50497823, "comment_id": 88008604, "body": "Your name hints to what&#39;s the reason: optmization. In release build, the compiler usually works under high optimization levels (-O2, or maybe even -O3) scanning through the code for unused assignments (removing variables and functions calls), calculating values &quot;in place&quot; if they could be evaluated at compile time, etc. Consider this: some constant expression used in an <code>if</code> renders half of your code base never to be used. Release build will optimize that half away."}, {"owner": {"reputation": 277, "user_id": 3225698, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7be3c02bfbe3667d0f2d2ab37289c7a0?s=128&d=identicon&r=PG&f=1", "display_name": "Optimus Prime", "link": "https://stackoverflow.com/users/3225698/optimus-prime"}, "reply_to_user": {"reputation": 4058, "user_id": 754407, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1b5c51ae68d0d76ce0e178f777f1742d?s=128&d=identicon&r=PG", "display_name": "hauron", "link": "https://stackoverflow.com/users/754407/hauron"}, "edited": false, "score": 0, "creation_date": 1527111865, "post_id": 50497823, "comment_id": 88008686, "body": "@hauron Then how can I tell which detected memory leaks are true leaks and which are just false due to compiler optimization."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1527113070, "post_id": 50497823, "comment_id": 88009114, "body": "The debug CRT uses a completely different heap structure, algorithms etc see: <a href=\"https://msdn.microsoft.com/en-us/library/974tc9t1.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/974tc9t1.aspx</a>"}], "owner": {"reputation": 277, "user_id": 3225698, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7be3c02bfbe3667d0f2d2ab37289c7a0?s=128&d=identicon&r=PG&f=1", "display_name": "Optimus Prime", "link": "https://stackoverflow.com/users/3225698/optimus-prime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527111367, "creation_date": 1527111367, "question_id": 50497823, "link": "https://stackoverflow.com/questions/50497823/huge-difference-for-heap-l-results-in-windbg-between-debug-and-release-build", "title": "Huge difference for !heap -l results in Windbg between debug and release build", "body": "<p>I am trying to duplicate a potential memory leak issue with one of our applications. I started a debug version and a release version of the application and used Windbg to see if I can find any potential memory leak. The command I used is !heap -l. For the debug build,  </p>\n\n<pre><code>68 potential unreachable blocks were detected.\n</code></pre>\n\n<p>and for release build</p>\n\n<pre><code>94494 potential unreachable blocks were detected.\n</code></pre>\n\n<p>Can anyone tell me why there is such a huge difference between the results of the debug and release build?</p>\n"}, {"tags": ["c++", "string", "fstream"], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1527111245, "creation_date": 1527111245, "answer_id": 50497801, "question_id": 50497751, "link": "https://stackoverflow.com/questions/50497751/c-truncating-decimal-places-of-a-double-inside-a-variable-filename/50497801#50497801", "title": "C++ - Truncating decimal places of a double inside a variable filename", "body": "<p>You cannot set precision of <code>std::to_string</code>, you might write your own, something like:</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;iomanip&gt;\n\ntemplate &lt;typename T&gt;\nstd::string to_string_with_precision(const T&amp; a_value, const int n = 6)\n{\n    std::ostringstream out;\n    out &lt;&lt; std::setprecision(n) &lt;&lt; a_value;\n    return out.str();\n}\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>resultfile += std::to_string(Nx) + \"_mu\" + to_string_with_precision(mu, 2) + \".csv\";\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9812780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff78df35ad1eb1dac83a40727d9f4a6f?s=128&d=identicon&r=PG&f=1", "display_name": "SMartens", "link": "https://stackoverflow.com/users/9812780/smartens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 50497801, "answer_count": 1, "score": 0, "last_activity_date": 1527111253, "creation_date": 1527110955, "last_edit_date": 1527111253, "question_id": 50497751, "link": "https://stackoverflow.com/questions/50497751/c-truncating-decimal-places-of-a-double-inside-a-variable-filename", "title": "C++ - Truncating decimal places of a double inside a variable filename", "body": "<p>I am trying to write some code to generate appropriate filenames for simulation data. Here, I have created a string, resultfile, which takes text, ints, and doubles and concatenates them into a filename.</p>\n\n<p>Here is my (simplified) current code:</p>\n\n<pre><code>string resultfile;\nint Nx = 5;\ndouble mu = 0.4;\n\n//Simulation code here\n\nresultfile += to_string(Nx) + \"_mu\" + to_string(mu) + \".csv\"; \nofstream myfile;\nmyfile.open (\"./Datasets/\"+ resultfile);\nmyfile &lt;&lt; SimulationOutputs;\nmyfile.close();\n</code></pre>\n\n<p>This saves a .csv file to my /Datasets/ folder, however, the file name of the data ends up as:</p>\n\n<p>\"5_mu0.4000000.csv\"</p>\n\n<p>When your file title contains 2 or more doubles, the filename becomes obnoxiously large very quickly. I am trying to get the filename to be:</p>\n\n<p>\"5_mu0.4.csv\"</p>\n\n<p>I found a question that seemed relevant here: <a href=\"https://stackoverflow.com/questions/12738892/how-to-truncate-a-floating-point-number-after-a-certain-number-of-decimal-places\">How to truncate a floating point number after a certain number of decimal places (no rounding)?</a>, where they seem to suggest:</p>\n\n<pre><code>to_string(((int)(100 * mu)) / 100.0)\n</code></pre>\n\n<p>however, this edit does not change the file name of my data outputs. I am fairly new to C++, so there might be an obvious solution here that isn't obvious to me. </p>\n"}, {"tags": ["c++", "postfix-notation"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1527110506, "post_id": 50497521, "comment_id": 88008187, "body": "Please edit your post with the results of using your debugger.  Indicate which statement caused the issue.  Also, show any actual values and their associated expected values."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1527110631, "post_id": 50497521, "comment_id": 88008235, "body": "FYI, you don&#39;t need to use a class.  You can have those methods as free standing (your variables are global and not in the class anyway)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527112588, "post_id": 50497521, "comment_id": 88008957, "body": "You should never use <code>gets()</code>. It&#39;s an obsolete and dangerous function, and has been removed from the language. Since you&#39;re using C++ you should use <code>std::string</code> and <code>std::getline()</code>."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 0, "creation_date": 1527112796, "post_id": 50497521, "comment_id": 88009037, "body": "a regular expression might parse your infix better"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527112873, "post_id": 50497521, "comment_id": 88009062, "body": "Your code treats each digit as a separate operand, it never combines multiple-digit numbers into a single value."}], "answers": [{"tags": [], "owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "is_accepted": false, "score": 1, "last_activity_date": 1527112911, "creation_date": 1527112911, "answer_id": 50498100, "question_id": 50497521, "link": "https://stackoverflow.com/questions/50497521/reverse-polish-notation-calculator/50498100#50498100", "title": "Reverse Polish notation Calculator", "body": "<p>Consider what happens when <code>eval_post()</code> is given <code>213*102/+</code> to work with. Let's start in the middle, with the '1' after the asterisk. The '1' is a digit, so push it [stack ends with: 1]. Similarly, the 0 and 2 get pushed [stack ends with: 1, 0, 2]. Then the division symbol is encountered, so pop 2 and 0, then push 0/2 = 0 [stack ends with: 1, 0]. Finally, the addition symbol is encountered, so pop 0 and 1, then push 1+0=1, which is then popped as your answer.</p>\n\n<p>One symptom of your problem is that, if things work, the stack should be empty when <code>eval_post()</code> returns. However, it is not empty when your infix includes <strong>numbers with more than one digit</strong>. Note that \"10\" gets pushed onto the stack as two numbers: \"1\" followed by \"0\". You want the value 10 pushed.</p>\n\n<p>There are also some style problems with the code, but this appears to be the main functional problem.</p>\n"}], "owner": {"reputation": 3, "user_id": 9837056, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Victoria", "link": "https://stackoverflow.com/users/9837056/victoria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1527112911, "creation_date": 1527109883, "last_edit_date": 1527112498, "question_id": 50497521, "link": "https://stackoverflow.com/questions/50497521/reverse-polish-notation-calculator", "title": "Reverse Polish notation Calculator", "body": "<p>I am currently working on a RPN calculator, it takes an infix expression converts it to postfix and shows the answer. I mostly got it right, but when I pop the answer from the stack if shows only the last digit of the result \nex </p>\n\n<pre><code>Enter infix: (1+1)*13+10/2\nPostfix: 11+13*102/+\nResult is: 1\nEnter infix: 2*13+10/2\nPostfix: 213*102/+\nResult is:1\n</code></pre>\n\n<p>It gets it right for this kind of inputs\nEnter infix: 3*2+5\nPostfix: 32*5+\nResult is : 11</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;math.h&gt;\n#include&lt;stdlib.h&gt;\n\nusing namespace std;\n\nclass infix2postfix\n{\npublic:\n    void push(int symbol);\n    int pop();\n    void infix_to_postfix();\n    int priority(char symbol);\n    int isEmpty();\n    int white_space(char);\n    int eval_post();\n};\n\nchar infix[100], postfix[100];\nint stack[100];\nint top;\n\nint main()\n{\n    infix2postfix ip;\n    top=-1;\n    cout&lt;&lt;\"Enter infix : \";\n    gets(infix);\n    ip.infix_to_postfix();\n    cout&lt;&lt;\"Postfix : \"&lt;&lt;postfix&lt;&lt;endl;\n    cout&lt;&lt;\"Result is : \"&lt;&lt;ip.eval_post()&lt;&lt;endl;\n    return 1;\n}\n\nvoid infix2postfix :: infix_to_postfix()\n{\n    int i,p=0;\n    char next;\n    char symbol;\n    for(i=0; i&lt;strlen(infix); i++)\n    {\n        symbol=infix[i];\n        if(!white_space(symbol))\n        {\n            switch(symbol)\n            {\n            case '(':\n                push(symbol);\n                break;\n            case ')':\n                while((next=pop())!='(')\n                    postfix[p++] = next;\n                break;\n            case '+':\n            case '-':\n            case '*':\n            case '/':\n            case '%':\n            case '^':\n                while( !isEmpty( ) &amp;&amp;  priority(stack[top])&gt;= priority(symbol) )\n                    postfix[p++]=pop();\n                push(symbol);\n                break;\n            default: /*if an operand comes*/\n                postfix[p++]=symbol;\n            }\n        }\n    }\n    while(!isEmpty( ))\n        postfix[p++]=pop();\n    postfix[p]='\\0'; /*End postfix with'\\0' to make it a string*/\n}\n\n/*This function returns the priority of the operator*/\nint infix2postfix :: priority(char symbol)\n{\n    switch(symbol)\n    {\n    case '(':\n        return 0;\n    case '+':\n    case '-':\n        return 1;\n    case '*':\n    case '/':\n    case '%':\n        return 2;\n    case '^':\n        return 3;\n    default :\n        return 0;\n    }\n}\n\nvoid infix2postfix :: push(int symbol)\n{\n    if(top&gt;100)\n    {\n        cout&lt;&lt;\"Stack overflow\\n\";\n        exit(1);\n    }\n    stack[++top]=symbol;\n}\n\nint infix2postfix :: pop()\n{\n    if( isEmpty() )\n    {\n        cout&lt;&lt;\"Stack underflow\\n\";\n        exit(1);\n    }\n    return (stack[top--]);\n}\n\n\nint infix2postfix :: isEmpty()\n{\n    if(top==-1)\n        return 1;\n    else\n        return 0;\n}\n\nint infix2postfix :: white_space(char symbol)\n{\n    if( symbol == ' ' || symbol == '\\t' )\n        return 1;\n    else\n        return 0;\n}\n\nint infix2postfix :: eval_post()\n{\n    int a,b,i,temp,result;\n    for(i=0; i&lt;strlen(postfix); i++)\n    {\n        if(postfix[i]&lt;='9' &amp;&amp; postfix[i]&gt;='0')\n            push(postfix[i]-'0');\n        else\n        {\n            a=pop();\n            b=pop();\n            switch(postfix[i])\n            {\n            case '+':\n                temp=b+a;\n                break;\n            case '-':\n                temp=b-a;\n                break;\n            case '*':\n                temp=b*a;\n                break;\n            case '/':\n                temp=b/a;\n                break;\n            case '%':\n                temp=b%a;\n                break;\n            case '^':\n                temp=pow(b,a);\n            }\n            push(temp);\n        }\n    }\n    result=pop();\n    return result;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "dll", "wrapper", "ctypes"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527110529, "post_id": 50497472, "comment_id": 88008195, "body": "The ABI of C++ object files/libraries is usually not stable across compiler vendors/versions. Are you sure the dll was compiled with the exact same compiler as the program you are running that tries to load the dll? If not, you <i>may</i> have some fun trouble."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1527112445, "post_id": 50497472, "comment_id": 88008912, "body": "Changing the header file to have <code>extern &quot;C&quot;</code>, <code>EXPORTED_FUNCTION</code>, etc., without recompiling the DLL won&#39;t work.  If those were missing, likely the functions are exported as C++-mangled names instead of C names.  Use <code>dumpbin &#47;EXPORTS your.dll</code> to see what the names look like.  Also <code>LOAD_LIBRARY_AS_DATAFILE</code> doesn&#39;t load the function table from the DLL, IIRC."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1527158209, "post_id": 50497472, "comment_id": 88026264, "body": "The fact that it can be loaded by <i>pywin32</i> but not  by <i>ctypes</i> doesn&#39;t make sense. You&#39;re definitely doing smth wrong (maybe not using the same path)? So what is your <i>Python</i> (also <i>ctypes</i>, and <i>pywin32</i>) version? What tools are used to compile the <i>.dll</i> by the other person? The 2nd case it&#39;s normal not to find the symbol, based on how you load the dll. So with the test dll which loads the dll (everything compiled by you) everything works? What about with test dll which loads the external compiled dll?"}, {"owner": {"reputation": 41, "user_id": 8353724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a45aa901d852f8f6d9b78e3c4adb8?s=128&d=identicon&r=PG&f=1", "display_name": "ilbi", "link": "https://stackoverflow.com/users/8353724/ilbi"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1527175225, "post_id": 50497472, "comment_id": 88038216, "body": "@MarkTolonen The DLL was indeed compiled by the other person with <code>extern &quot;C&quot;</code>, <code>EXPORTED_FUNCTION</code> already in the header file. Using <code>dumpbin &#47;exports aa_Function.dll</code> I could see the function names, which match the names shown in Dependency Walker. I am making function calls in Python using the same function names in Python - unsuccessfully. Your point about <code>LOAD_LIBRARY_AS_DATAFILE</code> not loading the DLL function table is interesting. Couldn&#39;t find anything in the documentation about this method of loading. This would make sense as the DLLS are loaded, but functions can&#39;t be called."}, {"owner": {"reputation": 41, "user_id": 8353724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a45aa901d852f8f6d9b78e3c4adb8?s=128&d=identicon&r=PG&f=1", "display_name": "ilbi", "link": "https://stackoverflow.com/users/8353724/ilbi"}, "edited": false, "score": 0, "creation_date": 1527175717, "post_id": 50497472, "comment_id": 88038540, "body": "I&#39;m using Python 3.6.4 64-bit, (built using MSC v.1900 on win32, which is Visual Studio 2013 ver 14.0) through module Ctypes to try and load DLLs compiled using Visual Studio 2013. The person who compiled the DLLs said this difference in compiler versions should not cause any conflicts... Unsure what next steps should be..."}, {"owner": {"reputation": 41, "user_id": 8353724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a45aa901d852f8f6d9b78e3c4adb8?s=128&d=identicon&r=PG&f=1", "display_name": "ilbi", "link": "https://stackoverflow.com/users/8353724/ilbi"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1527176148, "post_id": 50497472, "comment_id": 88038820, "body": "@CristiFati <i>Python</i> version: 3.6.4 <i>Ctypes</i> version: 1.1.0 <i>pywin32</i> version: 222. From my understanding, the other person used Visual Studio 2013 to compile the <i>.dll</i>. The test <i>.dll</i> I wrote from scratch and loaded in Python works successfully, I can also call its functions. The <i>.dll</i> compiled by the other person does not load through <code>ctypes.CDLL(dll_path)</code>. However, this <i>.dll</i> will load using the <code>LOAD_LIBRARY_AS_DATAFILE</code>, but as Mark suggested, loading DLL this way may not load its function table, which may explain why functions cannot be called given this DLL load method."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1527177410, "post_id": 50497472, "comment_id": 88039623, "body": "Read about <code>LOAD_LIBRARY_AS_DATAFILE</code> <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684179(v=vs.85).aspx\" rel=\"nofollow noreferrer\">here</a>.  It simply maps the DLL into memory and does no other preparation like looking for other dependencies or preparing the functions to be called.  If method 1 doesn&#39;t work, it looks like a dependency is missing."}, {"owner": {"reputation": 41, "user_id": 8353724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a45aa901d852f8f6d9b78e3c4adb8?s=128&d=identicon&r=PG&f=1", "display_name": "ilbi", "link": "https://stackoverflow.com/users/8353724/ilbi"}, "edited": false, "score": 0, "creation_date": 1527257921, "post_id": 50497472, "comment_id": 88074460, "body": "Update: may <i>potentially</i> be a MATLAB (dependency) issue. Prior to any MATLAB license configurations, the dependency <i>libmx.dll</i> could not be loaded in Python via <code>ctypes.CDLL()</code>. However, after initial license configurations, the <i>libmx.dll</i> is able to be loaded. But given that MATLAB is not 100% configured yet, the <i>aa_Functions.dll</i> still cannot be loaded. Will provide further updates as they&#39;re received and verified."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 8353724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a45aa901d852f8f6d9b78e3c4adb8?s=128&d=identicon&r=PG&f=1", "display_name": "ilbi", "link": "https://stackoverflow.com/users/8353724/ilbi"}, "is_accepted": false, "score": 0, "last_activity_date": 1527774734, "creation_date": 1527774734, "answer_id": 50625960, "question_id": 50497472, "link": "https://stackoverflow.com/questions/50497472/python-ctypes-loading-c-dll-module-not-found-or-function-fn-123-not-fo/50625960#50625960", "title": "Python Ctypes: Loading C++ DLL - &quot;module not found&quot; or &quot;function &#39;fn_123&#39; not found&quot;", "body": "<p>The solution to my specific problem was:</p>\n\n<ol>\n<li>Ensure a proper installation of MATLAB</li>\n<li>Ensure the dependent MATLAB DLL (libmx.dll) directory is added to PATH and can be loaded using <code>ctypes</code> PRIOR to loading the actual DLL</li>\n</ol>\n\n<p>In hindsight, this was a very straightforward issue - missing DLL dependency. But it can be a challenge to find the SPECIFIC missing DLL.</p>\n"}], "owner": {"reputation": 41, "user_id": 8353724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a45aa901d852f8f6d9b78e3c4adb8?s=128&d=identicon&r=PG&f=1", "display_name": "ilbi", "link": "https://stackoverflow.com/users/8353724/ilbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1112, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527774734, "creation_date": 1527109637, "last_edit_date": 1527165277, "question_id": 50497472, "link": "https://stackoverflow.com/questions/50497472/python-ctypes-loading-c-dll-module-not-found-or-function-fn-123-not-fo", "title": "Python Ctypes: Loading C++ DLL - &quot;module not found&quot; or &quot;function &#39;fn_123&#39; not found&quot;", "body": "<p>I'm trying to load AND call functions from an already compiled (not by me) C++ DLL file.</p>\n\n<p>I'm faced with two problematic scenarios:</p>\n\n<ol>\n<li><p>Loading DLL by using CDLL():</p>\n\n<pre><code>from ctypes import *\n__path_aa_Fn_dll__ = r'C:\\user\\aacad_2017\\aa_Functions.dll' # DLL file path\naa_Fn_dll = CDLL(__path_aa_Fn_dll__) # load DLL\n</code></pre>\n\n<p>which gives me the module not found OSError:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"C:/user/aacad_2017/cadClass.py\", line 189, in &lt;module&gt;\naa_Fn_dll = CDLL(__path_aa_Fn_dll__)\nFile \"C:\\Users\\user\\AppData\\Local\\Continuum\\anaconda3\\lib\\ctypes\\__init__.py\", line 348, in __init__\nself._handle = _dlopen(self._name, mode)\nOSError: [WinError 126] The specified module could not be found\n</code></pre></li>\n<li><p>Loading the same DLL by using win32api.LoadLibraryEx() then CDLL()</p>\n\n<pre><code>aa_Fn_dll_handle = win32api.LoadLibraryEx(__path_aa_Fn_dll__, 0, win32con.LOAD_LIBRARY_AS_DATAFILE) # get DLL handle\naa_Fn_dll = CDLL(__path_aa_Fn_dll__, handle=aa_Fn_dll_handle) # load DLL\n</code></pre>\n\n<p>which is able to load the DLL.</p>\n\n<p>However, when attempting to call functions within this DLL, the following AttributeError is raised:</p>\n\n<pre><code>aa_Fn_dll.aaBIN2iv.restype = c_double # set function return type\naa_Fn_dll.aaBIN2iv.argtypes = [c_double, c_double, c_double, c_double, c_double, c_double, c_double, c_char_p] # set function argument types\naa_Fn_dll.aaBIN2iv(10, 10, 10, 10, 10, 10, 10, b\"C\") # call DLL function\n\n\nTraceback (most recent call last):\nFile \"C:/user/aacadMatlabWrap_2017_new_test/cadClass.py\", line 196, in &lt;module&gt;\naa_Fn_dll.aaBIN2iv.restype = c_double\nFile \"C:\\Users\\user\\AppData\\Local\\Continuum\\anaconda3\\lib\\ctypes\\__init__.py\", line 361, in __getattr__\nfunc = self.__getitem__(name)\nFile \"C:\\Users\\user\\AppData\\Local\\Continuum\\anaconda3\\lib\\ctypes\\__init__.py\", line 366, in __getitem__\nfunc = self._FuncPtr((name_or_ordinal, self))\nAttributeError: function 'aaBIN2iv' not found\n</code></pre></li>\n</ol>\n\n<p>After extensive online research and consulting the Ctypes documentation, I have tried the following historical solutions:</p>\n\n<ul>\n<li>Use Dependency Walker to check dependencies</li>\n<li>Ensure all DLL dependencies are placed in the same directory</li>\n<li>Add the DLL directory to system PATH</li>\n<li>Ensure <code>extern \"C\"</code> is added to the C++ header file to prevent name mangling</li>\n<li>Using keyword <code>EXPORTED_FUNCTION</code> in the C++ header file</li>\n<li>Setting the current working directory in Python to that of the DLL file directory prior to loading DLLs</li>\n</ul>\n\n<p>without any success...</p>\n\n<p>I've also compiled my own SEPARATE 64-bit C++ DLL file (completely independent from the aa_Functions.dll file previously mentioned) in Microsoft Visual Studio 2010 in both Debug and Release modes, with test functions included inside.</p>\n\n<p>This test DLL is able to be loaded, and its functions called successfully, per the following:</p>\n\n<pre><code>__path_test_dll__ = r'C:\\user\\dllTest\\x64\\Release\\dllTest.dll' # test DLL file path\ntest_dll = CDLL(__path_test_dll__) # load test DLL\ntest_dll.fn4.restype = c_void_p # set test DLL function return type\ntest_dll.fn4.argtypes = [c_double, c_double, c_double, c_char_p, c_bool] # set test DLL function argument types\ntest_dll.fn4(10, 12, 1, b\"Pay\", True) # make test DLL function call\n</code></pre>\n\n<p>With the expected console output:</p>\n\n<pre><code>Min_P * Rate == $10\nPay: 1 Min_P: 10 Max_P: 12 Iteration #: 1\nMin_P * Rate == $11\nPay: 0 Min_P: 11 Max_P: 12 Iteration #: 2\nMin_P * Rate == $12\nPay: 1 Min_P: 12 Max_P: 12 Iteration #: 3\n\nProcess finished with exit code 0\n</code></pre>\n\n<p>I've spent the last several days on this issue and a point in the right direction would be tremendously appreciated.</p>\n"}, {"tags": ["c++", "visual-studio", "msbuild", "tfsbuild"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527110747, "post_id": 50497421, "comment_id": 88008276, "body": "&quot;I&#39;m guessing Microsoft&#39;s installer is broken for this product&quot; - not in general. I successfully use it."}, {"owner": {"reputation": 21063, "user_id": 555518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f529e0afa52a1be2bb225acb3d4e162?s=128&d=identicon&r=PG", "display_name": "Chris Gessler", "link": "https://stackoverflow.com/users/555518/chris-gessler"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527110946, "post_id": 50497421, "comment_id": 88008346, "body": "I\u2019ve tried uninstalling/ reinstalling and repair. No change. Did I miss installing an important feature?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527111215, "post_id": 50497421, "comment_id": 88008439, "body": "no idea. It worked fine out of the box for me."}, {"owner": {"reputation": 21063, "user_id": 555518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f529e0afa52a1be2bb225acb3d4e162?s=128&d=identicon&r=PG", "display_name": "Chris Gessler", "link": "https://stackoverflow.com/users/555518/chris-gessler"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527111360, "post_id": 50497421, "comment_id": 88008493, "body": "Can you share which options you selected and which version of VS your using?  Toolset version might help too."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527111437, "post_id": 50497421, "comment_id": 88008523, "body": "Latest msvc 15.7 . Not Actually using it locally (use Linux) but that&#39;s what&#39;s installed on our Windows build server."}, {"owner": {"reputation": 21063, "user_id": 555518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f529e0afa52a1be2bb225acb3d4e162?s=128&d=identicon&r=PG", "display_name": "Chris Gessler", "link": "https://stackoverflow.com/users/555518/chris-gessler"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527112289, "post_id": 50497421, "comment_id": 88008849, "body": "I upgraded the project to latest but still get the same error. Do you have any suggestions?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527112348, "post_id": 50497421, "comment_id": 88008879, "body": "Nope. Sorry...."}, {"owner": {"reputation": 21063, "user_id": 555518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f529e0afa52a1be2bb225acb3d4e162?s=128&d=identicon&r=PG", "display_name": "Chris Gessler", "link": "https://stackoverflow.com/users/555518/chris-gessler"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527113087, "post_id": 50497421, "comment_id": 88009120, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/171648/discussion-between-chris-gessler-and-jesper-juhl\">continue this discussion in chat</a>."}, {"owner": {"reputation": 49661, "user_id": 781754, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4ee1072483e3ab3c7302820d04935328?s=128&d=identicon&r=PG", "display_name": "Daniel Mann", "link": "https://stackoverflow.com/users/781754/daniel-mann"}, "edited": false, "score": 0, "creation_date": 1527133240, "post_id": 50497421, "comment_id": 88013717, "body": "What is the issue with installing Visual Studio?"}, {"owner": {"reputation": 51483, "user_id": 7460777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938b7ee32587b28c8634edec4a0f90c2?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Liu-MSFT", "link": "https://stackoverflow.com/users/7460777/leo-liu-msft"}, "edited": false, "score": 0, "creation_date": 1527471630, "post_id": 50497421, "comment_id": 88127055, "body": "Any update for this issue? Have you resolved this issue? If not, would you please let me know the latest information about this issue?"}, {"owner": {"reputation": 21063, "user_id": 555518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f529e0afa52a1be2bb225acb3d4e162?s=128&d=identicon&r=PG", "display_name": "Chris Gessler", "link": "https://stackoverflow.com/users/555518/chris-gessler"}, "reply_to_user": {"reputation": 51483, "user_id": 7460777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938b7ee32587b28c8634edec4a0f90c2?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Liu-MSFT", "link": "https://stackoverflow.com/users/7460777/leo-liu-msft"}, "edited": false, "score": 0, "creation_date": 1527619402, "post_id": 50497421, "comment_id": 88191242, "body": "@LeoLiu-MSFT, Apparently, using the TFS 2015 agents with the VS 2017 build tools is not an option without modifying the registry, system variables or both. I did not fix the issue, but decided to move forward with TFS 2018 which solves the issue."}], "answers": [{"tags": [], "owner": {"reputation": 51483, "user_id": 7460777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938b7ee32587b28c8634edec4a0f90c2?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Liu-MSFT", "link": "https://stackoverflow.com/users/7460777/leo-liu-msft"}, "is_accepted": true, "score": 5, "last_activity_date": 1527151239, "last_edit_date": 1592644375, "creation_date": 1527151239, "answer_id": 50504751, "question_id": 50497421, "link": "https://stackoverflow.com/questions/50497421/vs-2017-build-tools-failing-with-error-msb4019-the-imported-project-d-microso/50504751#50504751", "title": "VS 2017 Build Tools failing with Error MSB4019: The imported project &quot;D:\\Microsoft.Cpp.Default.props&quot; was not found", "body": "<blockquote>\n<p>VS 2017 Build Tools failing with Error MSB4019: The imported project \u201cD:\\Microsoft.Cpp.Default.props\u201d was not found</p>\n</blockquote>\n<p>Try to pass <code>VCTargetsPath</code> explicitly as property to msbuild from your build configuration:</p>\n<ol>\n<li><p>Edit the build definition for the build.</p>\n</li>\n<li><p>Click the process tab.</p>\n</li>\n<li><p>In the Advanced section, set the MSBuild Arguments to include the following property:</p>\n<p><code>/p:VCTargetsPath=&quot;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\xxx\\Common7\\IDE\\VC\\VCTargets\\&quot;</code></p>\n</li>\n<li><p>Save the build definition.</p>\n</li>\n</ol>\n<p><strong>Note:</strong> You should change the value of <code>VCTargetsPath</code> to the location of the <code>VCTargets</code> folder.</p>\n<p><strong>Or</strong> pass <code>VisualStudioVersion</code> as property to msbuild:<code>/p:VisualStudioVersion=15.0</code></p>\n<p>If you are interesting in the value of <code>$(VCTargetsPath)</code>, you can check following threads for some more details:</p>\n<p><a href=\"https://developercommunity.visualstudio.com/content/problem/2813/cant-find-registry-entries-for-visual-studio-2017.html\" rel=\"noreferrer\">Can't find registry entries for Visual Studio 2017</a></p>\n<p><a href=\"https://github.com/Microsoft/vswhere\" rel=\"noreferrer\">Visual Studio Locator</a></p>\n<blockquote>\n<p><strong>Over the years Visual Studio could be discovered using registry keys,\nbut with recent changes to the deployment and extensibility models a\nnew method is needed to discover possibly more than once installed\ninstance</strong>. These changes facilitate a smaller, faster default install\ncomplimented by on-demand install of other workloads and components.</p>\n<p><strong>vswhere is designed to be a redistributable, single-file executable\nthat can be used in build or deployment scripts to find where Visual\nStudio - or other products in the Visual Studio family - is located</strong>.\nFor example, if you know the relative path to MSBuild, you can find\nthe root of the Visual Studio install and combine the paths to find\nwhat you need.</p>\n<p>You can emit different formats for information based on what your\nscripts can consume, including plain text, JSON, and XML. Pull\nrequests may be accepted for other common formats as well.</p>\n<p>vswhere is included with the installer as of Visual Studio 2017\nversion 15.2 and later, and can be found at the following location:\n%ProgramFiles(x86)%\\Microsoft Visual Studio\\Installer\\vswhere.exe.</p>\n</blockquote>\n"}], "owner": {"reputation": 21063, "user_id": 555518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f529e0afa52a1be2bb225acb3d4e162?s=128&d=identicon&r=PG", "display_name": "Chris Gessler", "link": "https://stackoverflow.com/users/555518/chris-gessler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2614, "favorite_count": 1, "accepted_answer_id": 50504751, "answer_count": 1, "score": 2, "last_activity_date": 1527151239, "creation_date": 1527109400, "last_edit_date": 1527110415, "question_id": 50497421, "link": "https://stackoverflow.com/questions/50497421/vs-2017-build-tools-failing-with-error-msb4019-the-imported-project-d-microso", "title": "VS 2017 Build Tools failing with Error MSB4019: The imported project &quot;D:\\Microsoft.Cpp.Default.props&quot; was not found", "body": "<p>I'm building a new TFS build server and decided to use the VS 2017 Build Tools instead of installing the full versions of VS.  When I attempt to build our C++ projects, it throws the following error:</p>\n\n<pre><code>Error MSB4019: The imported project \"D:\\Microsoft.Cpp.Default.props\" was not found.\n</code></pre>\n\n<p>After many hours of research I'm no closer to resolving this issue.  I tried adding the following registry settings but it did not help.</p>\n\n<pre><code>Windows Registry Editor Version 5.00\n\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\MSBuild\\ToolsVersions\\14.0]\n\"VCTargetsPath\"=\"$([MSBuild]::ValueOrDefault('$(VCTargetsPath)','$(MSBuildExtensionsPath32)\\Microsoft.Cpp\\v4.0\\V140\\'))\"\n\"VCTargetsPath11\"=\"$([MSBuild]::ValueOrDefault('$(VCTargetsPath11)','$(MSBuildExtensionsPath32)\\Microsoft.Cpp\\v4.0\\V110\\'))\"\n\"VCTargetsPath14\"=\"$([MSBuild]::ValueOrDefault('$(VCTargetsPath14)','$(MSBuildExtensionsPath32)\\Microsoft.Cpp\\v4.0\\V140\\'))\"\n\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\MSBuild\\ToolsVersions\\14.0\\11.0]\n\"VCTargetsPath\"=\"$([MSBuild]::ValueOrDefault('$(VCTargetsPath)','$(MSBuildExtensionsPath32)\\Microsoft.Cpp\\v4.0\\V110\\'))\"\n\"VCTargetsPath11\"=\"$([MSBuild]::ValueOrDefault('$(VCTargetsPath11)','$(MSBuildExtensionsPath32)\\Microsoft.Cpp\\v4.0\\V110\\'))\"\n\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\MSBuild\\ToolsVersions\\14.0\\14.0]\n\"VCTargetsPath\"=\"$([MSBuild]::ValueOrDefault('$(VCTargetsPath)','$(MSBuildExtensionsPath32)\\Microsoft.Cpp\\v4.0\\V140\\'))\"\n\"VCTargetsPath11\"=\"$([MSBuild]::ValueOrDefault('$(VCTargetsPath11)','$(MSBuildExtensionsPath32)\\Microsoft.Cpp\\v4.0\\V110\\'))\"\n\"VCTargetsPath14\"=\"$([MSBuild]::ValueOrDefault('$(VCTargetsPath14)','$(MSBuildExtensionsPath32)\\Microsoft.Cpp\\v4.0\\V140\\'))\"\n</code></pre>\n\n<p>I'm guessing Microsoft's installer is broken for this product. Is there a standard fix for this error or should I scrap my efforts and simply install the full versions?</p>\n\n<p>In the project file, I found this entry:</p>\n\n<pre><code>&lt;Import Project=\"$(VCTargetsPath)\\Microsoft.Cpp.Default.props\" /&gt;\n</code></pre>\n\n<p>So, I guess this means that the variable VSTargetsPath is somehow pointing to the root of the D: drive but I haven't got a clue where that value is being set.  Our current build server does not have an environment variable set named VSTargetsPath, but it does have the missing registry entries. It also has full versions of VS installed.</p>\n"}, {"tags": ["c++", "function", "side-effects", "qualifiers"], "comments": [{"owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1527106801, "post_id": 50496766, "comment_id": 88006414, "body": "@BoPersson Thanks, I didn&#39;t see that one when searching"}], "owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "closed_date": 1527106616, "answer_count": 0, "score": 1, "last_activity_date": 1527106490, "creation_date": 1527106490, "question_id": 50496766, "link": "https://stackoverflow.com/questions/50496766/indicate-a-function-has-no-side-effects", "closed_reason": "Duplicate", "title": "Indicate a function has no side effects", "body": "<p>Member functions in C++ may be qualified as <code>const</code> to guarantee that they don't alter <code>this</code>, but I don't know of anyway to show that a function in general does not cause any changes to any data anywhere.</p>\n\n<p>This would be helpful information to be able to put in a function signature, but I don't know of any way to accomplish this. How can I qualify a function as having no side effects in C++, preferably something not compiler specific but that may be too much to ask</p>\n\n<p>Bonus points if there is a way that works for C as well.</p>\n"}, {"tags": ["c#", "c++", "unreal-engine4", "lnk2005"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9836756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-r0CLMipZL-Q/AAAAAAAAAAI/AAAAAAAAAEs/lmKSZjhZIg4/photo.jpg?sz=128", "display_name": "Skits", "link": "https://stackoverflow.com/users/9836756/skits"}, "edited": false, "score": 0, "creation_date": 1559238444, "post_id": 54848231, "comment_id": 99366598, "body": "I&#39;m sorry it took me so long to see this, you&#39;re a savior, I ended up recompiling several libraries that UE4 came with (the ones LuaJit was having issues with) and the _vsprintf error dissipated and everything was functioning correctly. Definitely using this when I start up UE4 again, thanks &lt;3"}], "tags": [], "owner": {"reputation": 1, "user_id": 11107880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PeMnv.jpg?s=128&g=1", "display_name": "Samuel Waugh", "link": "https://stackoverflow.com/users/11107880/samuel-waugh"}, "is_accepted": false, "score": 0, "last_activity_date": 1550975960, "creation_date": 1550975960, "answer_id": 54848231, "question_id": 50496746, "link": "https://stackoverflow.com/questions/50496746/lnk2005-error-when-integrating-luajit-in-ue4-unreal-engine-4/54848231#54848231", "title": "LNK2005 error when integrating LuaJit in UE4 (Unreal Engine 4)", "body": "<p>I know this is a pretty old question, but since I haven't seen an appropriate answer anywhere else and spent far too long figuring this out, I figured I'd help out any poor soul that is running into the same issue.</p>\n\n<p>The basic, afaik unavoidable problem is that the <em>msvcbuild</em> version of LuaJIT has extra symbols in it for (apparently) no reason. Here are the steps I took to compile a working version:</p>\n\n<ul>\n<li>Download the LuaJIT Windows source</li>\n<li>Open the Makefile and\n\n<ul>\n<li>Set the mode to dynamic</li>\n<li>OPTIONALLY enable the DLUAJIT_ENABLE_LUA52COMPAT flag</li>\n</ul></li>\n<li>Compile <em>using mingw32-make (mingw-w64)</em></li>\n<li>Copy the lua51.dll file to another folder.</li>\n<li>Using the x64 Native Tools Comand Prompt for VS 2017, export the external symbols found in the DLL\n<code>dumpbin /EXPORTS lua51.dll &gt; lua51.exports</code></li>\n<li>From the exports file, create a separate .def file pointing to the dll containing all the symbol references</li>\n<li>Using the x64 Native Tools Comand Prompt for VS 2017, generate the lib and exp files based on the def file\n<code>lib /def:lua51.def /out:lua51.lib</code></li>\n</ul>\n\n<p>You now have a DLL and a LIB that links to it!</p>\n\n<ul>\n<li>You may now copy the dll, lib and exp file to the location you want to install Lua to.</li>\n<li>Finish following the Installation instructions on the LuaJIT website, for my own paths, that was\n\n<ul>\n<li>Copy all files from K:/Git Repos/luajit205-52-libdll/luajit205-52-dll/src to C:/LUA</li>\n<li>Copy the files from K:/Git Repos/luajit205-52-libdll/luajit205-52-dll/src/jit to C:/LUA/lua/jit</li>\n</ul></li>\n</ul>\n\n<p>I wrote out the full procedure and how I worked through it, along with the dll/lib/exp I use to one of my git repos, so for extra doc and potentially useful files, head here:<br>\n<a href=\"https://github.com/Zaltu/luajit205-52-libdll\" rel=\"nofollow noreferrer\">https://github.com/Zaltu/luajit205-52-libdll</a></p>\n"}], "owner": {"reputation": 11, "user_id": 9836756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-r0CLMipZL-Q/AAAAAAAAAAI/AAAAAAAAAEs/lmKSZjhZIg4/photo.jpg?sz=128", "display_name": "Skits", "link": "https://stackoverflow.com/users/9836756/skits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550975960, "creation_date": 1527106389, "last_edit_date": 1527108654, "question_id": 50496746, "link": "https://stackoverflow.com/questions/50496746/lnk2005-error-when-integrating-luajit-in-ue4-unreal-engine-4", "title": "LNK2005 error when integrating LuaJit in UE4 (Unreal Engine 4)", "body": "<p>lua51.lib(lua51.dll) : error LNK2005: _vsnprintf already defined in libcurl_a.lib(cryptlib.obj)</p>\n\n<p>GameName.Build.cs -></p>\n\n<pre><code>// Fill out your copyright notice in the Description page of Project Settings.\n\nusing System.IO;\nusing UnrealBuildTool;\n\npublic class GameName : ModuleRules\n{\n    private string ThirdPartyPath\n    {\n        get { return Path.GetFullPath(Path.Combine(ModuleDirectory, \"../../ThirdParty/\")); }\n    }  \n    private bool LoadLua()\n    {\n        bool isLibSupported = false;\n\n        string LibrariesPath = Path.Combine(ThirdPartyPath, \"Lua\", \"libraries\");\n\n        PublicAdditionalLibraries.Add(Path.Combine(LibrariesPath, \"lua51.lib\"));\n\n        PublicIncludePaths.Add(Path.Combine(ThirdPartyPath, \"Lua\", \"includes\"));\n\n        Definitions.Add(string.Format(\"WITH_LUA_BINDING={0}\", isLibSupported ? 1 : 0));\n\n        return true;\n    }\n    public GameName(ReadOnlyTargetRules Target) : base(Target)\n    {\n        PCHUsage = PCHUsageMode.UseExplicitOrSharedPCHs;\n\n        PublicDependencyModuleNames.AddRange(new string[] { \"Core\", \"CoreUObject\", \"Engine\", \"InputCore\" });\n\n        PrivateDependencyModuleNames.AddRange(new string[] {  });\n\n        LoadLua();\n\n        // Uncomment if you are using Slate UI\n        // PrivateDependencyModuleNames.AddRange(new string[] { \"Slate\", \"SlateCore\" });\n\n        // Uncomment if you are using online features\n        // PrivateDependencyModuleNames.Add(\"OnlineSubsystem\");\n\n        // To include OnlineSubsystemSteam, add it to the plugins section in your uproject file with the Enabled attribute set to true\n    }\n}\n</code></pre>\n\n<p>ActorName.cpp -></p>\n\n<pre><code>// Fill out your copyright notice in the Description page of Project Settings.\n\n#include \"ActorName.h\"\n\nextern \"C\" {\n#include \"lua.h\"\n#include \"lualib.h\"\n#include \"lauxlib.h\"\n#include \"luaconf.h\"\n#pragma comment(lib, \"lua51.lib\")\n}\n\n// Sets default values\nAPart::APart()\n{\n    // Set this actor to call Tick() every frame.  You can turn this off to improve performance if you don't need it.\n    PrimaryActorTick.bCanEverTick = true;\n}\n\n// Called when the game starts or when spawned\nvoid APart::BeginPlay()\n{\n    Super::BeginPlay();\n    lua_State *L = luaL_newstate();\n    luaL_openlibs(L);\n    FVector NewLocation = GetActorLocation();\n    NewLocation.Z = NewLocation.Z + 200.0f;\n}\n\n// Called every frame\nvoid APart::Tick(float DeltaTime)\n{\n    Super::Tick(DeltaTime);\n    /*FVector NewLocation = GetActorLocation();\n    float DeltaHeight = (FMath::Sin(RunningTime + DeltaTime) - FMath::Sin(RunningTime));\n    NewLocation.Z += DeltaHeight * 100.0f;\n    NewLocation.Y += DeltaHeight * 800.0f;//Scale our height by a factor of 20\n    RunningTime += DeltaTime;\n    SetActorLocation(NewLocation);*/\n}\n</code></pre>\n\n<p>I compiled LuaJit for 64x, I'm not including the 32x build, do I need to? I don't intend to release my game for 32 bit systems as there's no point lol (Other than IOS because I'm pretty sure you have to upload 32 bit and 64 bit versions of the app :3)</p>\n\n<p>I only ever included Lua51.lib once? Have I done something wrong?</p>\n"}, {"tags": ["c++", "function", "static", "non-static"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 4, "creation_date": 1527106449, "post_id": 50496729, "comment_id": 88006228, "body": "Have you tried to do this? It would take less effort than this post. live link: <a href=\"https://godbolt.org/g/U4291s\" rel=\"nofollow noreferrer\">godbolt.org/g/U4291s</a>"}], "answers": [{"tags": [], "owner": {"reputation": 147, "user_id": 9806702, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mark Hollis", "link": "https://stackoverflow.com/users/9806702/mark-hollis"}, "is_accepted": true, "score": 0, "last_activity_date": 1527107209, "creation_date": 1527107209, "answer_id": 50496940, "question_id": 50496729, "link": "https://stackoverflow.com/questions/50496729/can-a-static-variable-be-access-by-nonstatic-functions/50496940#50496940", "title": "Can a static variable be access by nonstatic functions?", "body": "<p>The answer is yes.</p>\n\n<p>This question was already somewhat asked here: <a href=\"https://stackoverflow.com/questions/17242649/can-non-static-methods-modify-static-variables\">Can non-static methods modify static variables</a></p>\n\n<p>You are just asking if it can access it though - I am fairly certain if you can modify something, that means you can also access it.</p>\n"}], "owner": {"reputation": 27, "user_id": 5534576, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ha_U7n9aZNo/AAAAAAAAAAI/AAAAAAAAATk/nGOXXmUql7w/photo.jpg?sz=128", "display_name": "Kamal Ahmad", "link": "https://stackoverflow.com/users/5534576/kamal-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1527110001, "accepted_answer_id": 50496940, "answer_count": 1, "score": -5, "last_activity_date": 1527107209, "creation_date": 1527106324, "question_id": 50496729, "link": "https://stackoverflow.com/questions/50496729/can-a-static-variable-be-access-by-nonstatic-functions", "closed_reason": "Duplicate", "title": "Can a static variable be access by nonstatic functions?", "body": "<p>My questions is: if a static variable (access level: private) is defined in a class and we want to access it by non static function of that class. .  is it possible in c++?</p>\n"}, {"tags": ["c++", "arrays", "vector"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1527106194, "post_id": 50496664, "comment_id": 88006119, "body": "What do you mean by &quot;non-explicit amount&quot;?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 9, "creation_date": 1527106215, "post_id": 50496664, "comment_id": 88006127, "body": "<code>std::vector</code> can very much be initialized using braces <code>{ }</code> - it&#39;s called <a href=\"http://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">list initialization</a>. Are you using a pre-c++11 compiler?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1527107520, "post_id": 50496664, "comment_id": 88006810, "body": "Or a post C++11 compiler that defaults to building to a pre C++11 standard? You may need a <code>-std=c++0x</code> or <code>-std=c++11</code> command line option to force C++11."}, {"owner": {"reputation": 615, "user_id": 2477239, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91c2d314b28a66dbaa2647262ff92aa6?s=128&d=identicon&r=PG", "display_name": "Delrog", "link": "https://stackoverflow.com/users/2477239/delrog"}, "edited": false, "score": 0, "creation_date": 1527107571, "post_id": 50496664, "comment_id": 88006831, "body": "How would I determine the version of the compiler that I&#39;m using?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1527109557, "post_id": 50496664, "comment_id": 88007813, "body": "@Delrog &quot;How would I determine the version of the compiler&quot; - <code>compiler-name --version</code> - for example <code>g++ --version</code> usually does the trick ;-) for other compilers different incantations may be needed, but the compiler <i>documentation</i> will usually tell you (you <i>do</i> read the documentation, don&#39;t you?).."}, {"owner": {"reputation": 615, "user_id": 2477239, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91c2d314b28a66dbaa2647262ff92aa6?s=128&d=identicon&r=PG", "display_name": "Delrog", "link": "https://stackoverflow.com/users/2477239/delrog"}, "edited": false, "score": 0, "creation_date": 1527112927, "post_id": 50496664, "comment_id": 88009083, "body": "Looks like my version lists  &quot;MSVC++ 11 _MSC_VER == 1700&quot; meaning the compiler is C++ 11. What defines the compiler that is used? Is it the platform Toolset? What is the Windows SDKs role in all of this?"}], "answers": [{"comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1527106671, "post_id": 50496788, "comment_id": 88006336, "body": "&quot;simplest, most flexible, and clearest&quot; ... can you share <i>why</i>?  Or <i>how</i>?"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1527106861, "post_id": 50496788, "comment_id": 88006440, "body": "Aside from the trivial code included, why and how are where <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list?lq=1\">a good book</a> comes in."}, {"owner": {"reputation": 615, "user_id": 2477239, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91c2d314b28a66dbaa2647262ff92aa6?s=128&d=identicon&r=PG", "display_name": "Delrog", "link": "https://stackoverflow.com/users/2477239/delrog"}, "edited": false, "score": 0, "creation_date": 1527107420, "post_id": 50496788, "comment_id": 88006756, "body": "That&#39;s what I initially tried. However, I receive the following intellisense error in VS2012?  Error: initialization with &#39;{...}&#39; is not allowed for an object of type &quot;std::vector&lt;std::string, std::allocator&lt;std::string&gt;&gt;"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1527107528, "post_id": 50496788, "comment_id": 88006814, "body": "Visual Studio 2012 does not fully support c++11. Also Intellisense has false positives."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 1, "creation_date": 1527107770, "post_id": 50496788, "comment_id": 88006929, "body": "Upgrade your version of Visual Studio. There&#39;s no reason to still be using 2012."}], "tags": [], "owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "is_accepted": true, "score": 4, "last_activity_date": 1527106594, "creation_date": 1527106594, "answer_id": 50496788, "question_id": 50496664, "link": "https://stackoverflow.com/questions/50496664/vectorstring-vs-string-when-passing-to-function/50496788#50496788", "title": "vector&lt;string&gt; vs string[] when passing to function", "body": "<p>Use a <code>std::vector&lt; std::string &gt;</code> and pass it by reference if you need to change its contents, const reference if you don't need to change them. This is the simplest, most flexible, and clearest way.</p>\n\n<p>Thus:</p>\n\n<pre><code>void inspectDetails( std::vector&lt; std::string &gt; &amp; details );\n\nstd::vector&lt; std::string &gt; details = { \"Name\",\"Height\",\"Weight\" };\ninspectDetails( details );\n</code></pre>\n\n<p>cf. <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/container/vector</a></p>\n"}, {"comments": [{"owner": {"reputation": 615, "user_id": 2477239, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91c2d314b28a66dbaa2647262ff92aa6?s=128&d=identicon&r=PG", "display_name": "Delrog", "link": "https://stackoverflow.com/users/2477239/delrog"}, "edited": false, "score": 0, "creation_date": 1527107473, "post_id": 50496840, "comment_id": 88006781, "body": "That&#39;s what I initially tried. However, I receive the following intellisense error in VS2012? Error: initialization with &#39;{...}&#39; is not allowed for an object of type &quot;std::vector&lt;std::string, std::allocator&lt;std::string&gt;&gt;"}, {"owner": {"reputation": 818, "user_id": 2424611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mY3Hk.jpg?s=128&g=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/2424611/mahesh"}, "reply_to_user": {"reputation": 615, "user_id": 2477239, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91c2d314b28a66dbaa2647262ff92aa6?s=128&d=identicon&r=PG", "display_name": "Delrog", "link": "https://stackoverflow.com/users/2477239/delrog"}, "edited": false, "score": 0, "creation_date": 1527108148, "post_id": 50496840, "comment_id": 88007095, "body": "Intellisense probably has that problem due to older C++ version or VC++ not supporting this initialization format. If the compiler too complains, you need to <code>push_back(...)</code> each string."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 615, "user_id": 2477239, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91c2d314b28a66dbaa2647262ff92aa6?s=128&d=identicon&r=PG", "display_name": "Delrog", "link": "https://stackoverflow.com/users/2477239/delrog"}, "edited": false, "score": 0, "creation_date": 1527109830, "post_id": 50496840, "comment_id": 88007935, "body": "@Delrog Intellisense is <i>not</i> the compiler."}], "tags": [], "owner": {"reputation": 818, "user_id": 2424611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mY3Hk.jpg?s=128&g=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/2424611/mahesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1527106835, "creation_date": 1527106835, "answer_id": 50496840, "question_id": 50496664, "link": "https://stackoverflow.com/questions/50496664/vectorstring-vs-string-when-passing-to-function/50496840#50496840", "title": "vector&lt;string&gt; vs string[] when passing to function", "body": "<p>Passing by const reference is an option. This is what a possible program might look then:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nvoid inspectDetails( const std::vector&lt;std::string&gt; &amp; details )\n{\n    int v = details.size();\n    std::cout&lt;&lt;v&lt;&lt;std::endl;\n}\n\nint main()\n{\n    std::vector&lt;std::string&gt; details = {\"name\", \"height\", \"weight\"};\n\n    inspectDetails(details);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 117, "user_id": 5929436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb211e925d24472acdd112357a965e8?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Garnier", "link": "https://stackoverflow.com/users/5929436/joseph-garnier"}, "is_accepted": false, "score": 0, "last_activity_date": 1527109570, "creation_date": 1527109570, "answer_id": 50497457, "question_id": 50496664, "link": "https://stackoverflow.com/questions/50496664/vectorstring-vs-string-when-passing-to-function/50497457#50497457", "title": "vector&lt;string&gt; vs string[] when passing to function", "body": "<p>Rob K answered right to you question. I will add that sometimes it's usefull to use std::array rather than a simple array : <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/container/array</a> For example, you can easily know the size of your array.</p>\n"}], "owner": {"reputation": 615, "user_id": 2477239, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/91c2d314b28a66dbaa2647262ff92aa6?s=128&d=identicon&r=PG", "display_name": "Delrog", "link": "https://stackoverflow.com/users/2477239/delrog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 0, "accepted_answer_id": 50496788, "answer_count": 3, "score": 0, "last_activity_date": 1527109570, "creation_date": 1527106073, "last_edit_date": 1527106246, "question_id": 50496664, "link": "https://stackoverflow.com/questions/50496664/vectorstring-vs-string-when-passing-to-function", "title": "vector&lt;string&gt; vs string[] when passing to function", "body": "<p>I'm new to C++ and I'm trying to pass a collection of a nonvariable amount strings to a function that exists in separate class file in an easy to read manner as such:</p>\n\n<pre><code>//main in Caller.cpp\nint main()\n{\n   string details[] = {\"Name\",\"Height\",\"Weight\"};\n\n    /* vector&lt;string&gt; detailsV = {\"Name\",\"Height\",\"Weight\"}; \n     * Would like to use a vector but can't do this because vector cannot be \n     * initialized to = {...} in C++\n     */\n\n   Person p = Person();\n   p.inspectDetails(details);\n}\n\n//Person class in Person.cpp\nvoid inspectDetails(string details [])\n{\n   int sz = sizeof(details); // this will result in details = \"Name\" only\n}\n</code></pre>\n\n<p>I've tried:</p>\n\n<pre><code>//Person class in Person.cpp\n&lt;template size_t N&gt;\nvoid inspectDetails(string (&amp;details)[N])\n{\n   int sz = sizeof(details); \n}\n</code></pre>\n\n<p>However, I don't now how to let the main in the Caller class know about the <code>&lt;template size_t N&gt;</code> which might allow me to use an array of a non-explicit amount. I seem to get an error of \"no suitable conversion of std:string[3] to std:string\" when trying to call <code>inpectDetails</code> this way. </p>\n\n<p>What is the best way to pass a collection of strings of a non-explicit amount to a function outside of the Caller class whilst maintaining the ability to hardcode the collection's contents like so <code>Collection c = {\"...\", \"...\", \"...\"}</code> in C++? \nIs there an easier way to pass the full collection of strings to a function with a pointer to a vector or something of that sort?</p>\n"}, {"tags": ["c++", "c", "scope", "function-declaration"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 5, "creation_date": 1527104405, "post_id": 50496264, "comment_id": 88005250, "body": "Pick a language."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1527104424, "post_id": 50496264, "comment_id": 88005260, "body": "<i>Is it a perk of the C programming language</i> - yes, it is. C is naive and thinks that the programmer knows what they are doing."}, {"owner": {"reputation": 1810, "user_id": 5500589, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/IldVR.jpg?s=128&g=1", "display_name": "Galaxy", "link": "https://stackoverflow.com/users/5500589/galaxy"}, "edited": false, "score": 0, "creation_date": 1527104476, "post_id": 50496264, "comment_id": 88005289, "body": "This question pertains to both C and C++, although I usually use them interchangeably as one single language."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1527104489, "post_id": 50496264, "comment_id": 88005294, "body": "Why wouldn&#39;t it let you call an undeclared function? Declaration just specifies the function signature, not anything real about the function."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1527104538, "post_id": 50496264, "comment_id": 88005316, "body": "@MadPhysicist ... which is quite important. If not provided, it has to <i>assume</i> some default signature."}, {"owner": {"reputation": 1810, "user_id": 5500589, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/IldVR.jpg?s=128&g=1", "display_name": "Galaxy", "link": "https://stackoverflow.com/users/5500589/galaxy"}, "edited": false, "score": 0, "creation_date": 1527104582, "post_id": 50496264, "comment_id": 88005336, "body": "Doesn&#39;t a declaration of a function say, &quot;Hey, I&#39;m defined in another translation unit, but I&#39;ll let you call me.&quot; A declaration extends scope of the function into another translation unit."}, {"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 1, "creation_date": 1527104659, "post_id": 50496264, "comment_id": 88005373, "body": "@Galaxy A declaration more or less just tells you what type something has (type of function in C and C++ is usually called a signature). It doesn&#39;t really have anything to do with multiple translation units and what not, although it&#39;s also useful for that."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1527104666, "post_id": 50496264, "comment_id": 88005379, "body": "@Galaxy Not really. Functions linkage is external by default. Once you have function in some translation unit, it is visible for all."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 2, "creation_date": 1527104695, "post_id": 50496264, "comment_id": 88005393, "body": "@Galaxy The question can\u2019t pertain to both languages since C++ doesn\u2019t allow this. ;-)"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1527104715, "post_id": 50496264, "comment_id": 88005400, "body": "<i>&quot;Also, in C89, functions returning int may be implicitly declared by the function call operator and function parameters of type int do not have to be declared when using old-style function definitions.&quot;</i> see: <a href=\"http://en.cppreference.com/w/c/language/declarations\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/declarations</a>"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 3, "creation_date": 1527104900, "post_id": 50496264, "comment_id": 88005494, "body": "It&#39;s a backward compatibility thing. C was born without prototypes. The programmer was supposed to know how to call each function and each undeclared function was assumed to return int (and take an unspecified number of (promoted) arguments, which is a consequence of no prototypes)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1527105079, "post_id": 50496264, "comment_id": 88005584, "body": "@PSkocik True about early C.  At <a href=\"https://jcmit.net/memoryprice.htm\" rel=\"nofollow noreferrer\">$0.02/byte</a> in 1978, why use any code/functionality unless it was absolutely required?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1527105695, "post_id": 50496264, "comment_id": 88005888, "body": "&quot;g++ does what it&#39;s supposed to do...But gcc did not&quot;  That is an incorrect assumption.   They are both implementing a different language, correctly.  Are you asking why C and C++ are <i>different</i> in this particular regard?  That&#39;s not what you&#39;re asking in the title to this question."}], "answers": [{"comments": [{"owner": {"reputation": 1810, "user_id": 5500589, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/IldVR.jpg?s=128&g=1", "display_name": "Galaxy", "link": "https://stackoverflow.com/users/5500589/galaxy"}, "edited": false, "score": 0, "creation_date": 1527104801, "post_id": 50496348, "comment_id": 88005446, "body": "But WHY does C allow undeclared functions to be called, unlike C++?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1527104837, "post_id": 50496348, "comment_id": 88005464, "body": "Because it <i>can</i>. C++ is a different language with some more strict rules."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1527105090, "post_id": 50496348, "comment_id": 88005588, "body": "Or with <code>-Werror</code> (<code>-Werror=implicit-function-declaration</code>). That&#39;s even more serious. :)"}, {"owner": {"reputation": 1190, "user_id": 962670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b7cb6dca5f7ca6b68e700e7c8a9c2415?s=128&d=identicon&r=PG", "display_name": "Triang3l", "link": "https://stackoverflow.com/users/962670/triang3l"}, "reply_to_user": {"reputation": 1810, "user_id": 5500589, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/IldVR.jpg?s=128&g=1", "display_name": "Galaxy", "link": "https://stackoverflow.com/users/5500589/galaxy"}, "edited": false, "score": 0, "creation_date": 1527332047, "post_id": 50496348, "comment_id": 88095117, "body": "@Galaxy Historic reasons, coming from the B language which had only one storage type \u2014 which became <code>int</code> in C. Though you needed to declare functions you used within blocks, like <code>main() { extrn &#47;* sic *&#47; printn, char, putchar; \u2026 }</code>, but I&#39;m not sure if that was mandatory."}, {"owner": {"reputation": 447, "user_id": 6100005, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ci6HLXLJSCQ/AAAAAAAAAAI/AAAAAAAADCw/Z70ZfBgThKk/photo.jpg?sz=128", "display_name": "Max Coplan", "link": "https://stackoverflow.com/users/6100005/max-coplan"}, "edited": false, "score": 0, "creation_date": 1568061941, "post_id": 50496348, "comment_id": 102148178, "body": "Consider two parts of making a program: compiling and linking.  Why don&#39;t you try getting rid of <code>say_hello</code> in <code>test1.c</code> and see what happens?  The program compiles fine, but when the linker tries to search for <code>say_hello</code> (since it&#39;s called in <code>test2.c</code>), it fails.  So one way to phrase this difference between C and C++ is that C will throw a linker error and C++ will throw a compiler error."}], "tags": [], "owner": {"reputation": 623, "user_id": 2008273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VTTvj.jpg?s=128&g=1", "display_name": "ricco19", "link": "https://stackoverflow.com/users/2008273/ricco19"}, "is_accepted": false, "score": 5, "last_activity_date": 1527104740, "creation_date": 1527104740, "answer_id": 50496348, "question_id": 50496264, "link": "https://stackoverflow.com/questions/50496264/why-does-c-allow-me-to-call-an-undeclared-function/50496348#50496348", "title": "Why does C allow me to call an undeclared function?", "body": "<p>Simple, because C allows undeclared functions to be called and C++ does not. Either way, <code>gcc</code> warns you and you may want to take warnings seriously.</p>\n"}], "owner": {"reputation": 1810, "user_id": 5500589, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/IldVR.jpg?s=128&g=1", "display_name": "Galaxy", "link": "https://stackoverflow.com/users/5500589/galaxy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1068, "favorite_count": 0, "closed_date": 1527104824, "answer_count": 1, "score": 3, "last_activity_date": 1527104740, "creation_date": 1527104333, "question_id": 50496264, "link": "https://stackoverflow.com/questions/50496264/why-does-c-allow-me-to-call-an-undeclared-function", "closed_reason": "Duplicate", "title": "Why does C allow me to call an undeclared function?", "body": "<p>I have two files: <code>test1.c</code>, and <code>test2.c</code>, which contains the <code>main()</code> function.</p>\n\n<p>test1.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;  // printf() function declaration/prototype\n\n// function definition\nvoid say_hello() {\n  printf(\"\\tHello, world!\\n\");\n}\n</code></pre>\n\n<p>test2.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;  // printf() function declaration/prototype\nint main() {\n  printf(\"Inside main()\\n\");\n  say_hello();\n\n  return 0;\n}\n</code></pre>\n\n<p>And this is my makefile:</p>\n\n<pre><code>a.out: test1.o test2.o\n    $(CXX) -o a.out test1.o test2.o\n\ntest1.o: test1.c\n    $(CXX) -c test1.c\n\ntest2.o: test2.c\n    $(CXX) -c test2.c\n</code></pre>\n\n<p>Now it should be clear where the problem lies: The main() function in test2.c calls say_hello() without declaring it!\nI run the following command, to use the gcc compiler:\n<code>make CXX=gcc</code>\nI get this warning to the screen:</p>\n\n<pre><code>gcc -c test1.c\ngcc -c test2.c\ntest2.c: In function \u2018main\u2019:\ntest2.c:16:3: warning: implicit declaration of function \u2018say_hello\u2019 [-Wimplicit-function-declaration]\n   say_hello();\n   ^\ngcc -o a.out test1.o test2.o\n</code></pre>\n\n<p>Although the *.o files got compiled and linked into the executable. That's weird. Imagine my surprise when I run the a.out file, and I see that <code>main()</code> successfully called <code>say_hello()</code>, a function which is not declared inside of main's translation unit, as if there were no issue at all! I reason that since <code>say_hello()</code> was not previously declared in <code>test2.c</code>, it should not allowed to be called by <code>main()</code> at all. Notice that I've added comments to the <code>#include &lt;stdio.h&gt;</code>. These preprocessor directives include the function declarations/prototypes, which extend their scope into the corresponding *.c files. That is why we are able to use them. No function declaration/prototype == no scope in that translation unit, or so I thought until now.</p>\n\n<p>Then I compiled the above code as C++ code:\n<code>make CXX=g++</code></p>\n\n<p>I get this error to the screen:</p>\n\n<pre><code>test2.c: In function \u2018int main()\u2019:\ntest2.c:16:13: error: \u2018say_hello\u2019 was not declared in this scope\n   say_hello();\n             ^\nmakefile:18: recipe for target 'test2.o' failed\nmake: *** [test2.o] Error 1\n</code></pre>\n\n<p>g++ does what it's supposed to do, and stops the compilation process. But gcc did not do this! What's going on? Is it a perk of the C programming language? Is it an issue with the compiler?</p>\n"}, {"tags": ["c++", "linux", "random", "openssl", "aes"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527104403, "post_id": 50496176, "comment_id": 88005249, "body": "&quot;Then encrypt the input_data(that is &quot;boom&quot;)&quot; your data sounds suspicious"}, {"owner": {"reputation": 3, "user_id": 9596638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14d0b5c0fd2fc820496560852f1d7d4?s=128&d=identicon&r=PG&f=1", "display_name": "hari", "link": "https://stackoverflow.com/users/9596638/hari"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527104550, "post_id": 50496176, "comment_id": 88005322, "body": "it is not &quot;boom&quot; but something else"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527104587, "post_id": 50496176, "comment_id": 88005338, "body": "Yea right, &quot;detonate&quot; or whatever"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1527104683, "post_id": 50496176, "comment_id": 88005385, "body": "What is the purpose of the encryption? And are there three devices involved -- the two GSM embedded devices and the Linux machine? Or are the embedded devices running Linux? Why roll your own solution rather than using something well understood like TLS?"}, {"owner": {"reputation": 3, "user_id": 9596638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14d0b5c0fd2fc820496560852f1d7d4?s=128&d=identicon&r=PG&f=1", "display_name": "hari", "link": "https://stackoverflow.com/users/9596638/hari"}, "edited": false, "score": 0, "creation_date": 1527104774, "post_id": 50496176, "comment_id": 88005429, "body": "sorry no need to get suspicious I am not doing anything likethat"}, {"owner": {"reputation": 3, "user_id": 9596638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14d0b5c0fd2fc820496560852f1d7d4?s=128&d=identicon&r=PG&f=1", "display_name": "hari", "link": "https://stackoverflow.com/users/9596638/hari"}, "edited": false, "score": 0, "creation_date": 1527105072, "post_id": 50496176, "comment_id": 88005581, "body": "this will be used to alert the user by ringing/stop ringing etc. if there is thresh hold distance separation and more features. So, do not want someone to know  what command we are using."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1527105155, "post_id": 50496176, "comment_id": 88005620, "body": "You say &quot;I do not know how to use random number generator. Can anyone suggest?&quot; Apart from that the question is a torrent of words."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1527105164, "post_id": 50496176, "comment_id": 88005627, "body": "Unrelated, you understand that the encrypted blocks will likely contain embedded zero-octets or non-printable values when treated as characters, <i>right</i> ? The null-termination management is pointless. That data is simple bytes; not ascii chars, so dumping to your output stream is worthless."}, {"owner": {"reputation": 3, "user_id": 9596638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14d0b5c0fd2fc820496560852f1d7d4?s=128&d=identicon&r=PG&f=1", "display_name": "hari", "link": "https://stackoverflow.com/users/9596638/hari"}, "edited": false, "score": 0, "creation_date": 1527105256, "post_id": 50496176, "comment_id": 88005672, "body": "there are 2 devices only, they may have any OS like linux,ios,android etc"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527105345, "post_id": 50496176, "comment_id": 88005717, "body": "&quot;I do not know how to use random number generator&quot; - then <i>please</i> stay away from cryptography of any kind."}, {"owner": {"reputation": 3, "user_id": 9596638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14d0b5c0fd2fc820496560852f1d7d4?s=128&d=identicon&r=PG&f=1", "display_name": "hari", "link": "https://stackoverflow.com/users/9596638/hari"}, "edited": false, "score": 0, "creation_date": 1527105387, "post_id": 50496176, "comment_id": 88005739, "body": "null termination is not part of the code, I am using AES 1st time, so I was seeing what I get.This is just a sample code"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1527105441, "post_id": 50496176, "comment_id": 88005766, "body": "<a href=\"https://www.openssl.org/docs/man1.0.2/crypto/RAND_bytes.html\" rel=\"nofollow noreferrer\"><code>RAND_bytes</code></a> is pretty straight forward, and literally self documenting. I would think it likely to accomplish whatever random needs you may have. Don&#39;t abuse it, btw."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1527106740, "post_id": 50496176, "comment_id": 88006384, "body": "Are you sure encryption is actually what you want? Are the messages secret? Is the actual object something else such as authentication? Why not just use SSL/TLS?"}, {"owner": {"reputation": 3, "user_id": 9596638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14d0b5c0fd2fc820496560852f1d7d4?s=128&d=identicon&r=PG&f=1", "display_name": "hari", "link": "https://stackoverflow.com/users/9596638/hari"}, "edited": false, "score": 0, "creation_date": 1527111422, "post_id": 50496176, "comment_id": 88008516, "body": "I think the messages should be  secret,it needs to prevent someone from stopping ringing/sending location, distance etc in child theft, object theft etc. I am reading about TLS/SSL"}, {"owner": {"reputation": 3, "user_id": 9596638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14d0b5c0fd2fc820496560852f1d7d4?s=128&d=identicon&r=PG&f=1", "display_name": "hari", "link": "https://stackoverflow.com/users/9596638/hari"}, "edited": false, "score": 0, "creation_date": 1527111602, "post_id": 50496176, "comment_id": 88008586, "body": "I am using bluetooth for communication(BT communication is similar to socket communicationas per linux bluezAPIs)"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1527417147, "post_id": 50496176, "comment_id": 88113302, "body": "You should <i>not</i> use <code>AES_encrypt</code> and friends. That&#39;s a software-only implementation, so you will not enjoy hardware support, like AES-NI. You should be using <code>EVP_*</code> functions. See <a href=\"http://wiki.openssl.org/index.php/EVP_Symmetric_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">EVP Symmetric Encryption and Decryption</a> on the OpenSSL wiki. In fact, you should probably be using authenticated encryption because it provides <i>both</i> confidentiality and authenticity. See <a href=\"http://wiki.openssl.org/index.php/EVP_Authenticated_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">EVP Authenticated Encryption and Decryption</a> on the OpenSSL wiki."}], "answers": [{"tags": [], "owner": {"reputation": 2223, "user_id": 325181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26de4aa17ab84757b1233714af5fec84?s=128&d=identicon&r=PG", "display_name": "Clarus", "link": "https://stackoverflow.com/users/325181/clarus"}, "is_accepted": true, "score": 1, "last_activity_date": 1527111920, "creation_date": 1527111920, "answer_id": 50497928, "question_id": 50496176, "link": "https://stackoverflow.com/questions/50496176/double-aes-encryption-with-random-key-generation/50497928#50497928", "title": "Double AES encryption with random key generation", "body": "<blockquote>\n  <p>Is encrypted data always the same for same input_data and aes_key?</p>\n</blockquote>\n\n<p>No. It is the same for the same <strong>key</strong>, <strong>iv</strong>, &amp; <strong>data</strong>. </p>\n\n<blockquote>\n  <p>Is there any random key generator API?</p>\n</blockquote>\n\n<p>Yes, OpenSSL has one, for instance. </p>\n\n<blockquote>\n  <p>What systemcall is there for random numbers in Linux c++?</p>\n</blockquote>\n\n<p>A \"good\" random number generator is /dev/urandom. Arguably better, if available, is /dev/hwrng, however it is different, not necessarily better. /dev/random is similar, possibly better to /dev/urandom but will block when sufficient entropy is not available. </p>\n\n<p>In all cases you read these devices just as you would read data from a file. </p>\n"}, {"tags": [], "owner": {"reputation": 2142, "user_id": 1689504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af4a48f5ed0d4a54a43844ea1ecc395?s=128&d=identicon&r=PG", "display_name": "HerrJoebob", "link": "https://stackoverflow.com/users/1689504/herrjoebob"}, "is_accepted": false, "score": 1, "last_activity_date": 1527112656, "creation_date": 1527112656, "answer_id": 50498061, "question_id": 50496176, "link": "https://stackoverflow.com/questions/50496176/double-aes-encryption-with-random-key-generation/50498061#50498061", "title": "Double AES encryption with random key generation", "body": "<p><code>enc_buffer[buffer_size+1]='\\0'</code></p>\n\n<p>Don't do that, this is a buffer overflow. The maximum index on both your buffers is [buffer_size].</p>\n\n<p><code>memset(iv,0x00,AES_BLOCK_SIZE);</code></p>\n\n<p>Don't do that, using the same iv (Initialization Vector) guarantees that your ciphertext will also be the same. For encryption, initialize the iv with random bits as Claris mentioned. For decryption you can ignore the iv output.</p>\n"}], "owner": {"reputation": 3, "user_id": 9596638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14d0b5c0fd2fc820496560852f1d7d4?s=128&d=identicon&r=PG&f=1", "display_name": "hari", "link": "https://stackoverflow.com/users/9596638/hari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 50497928, "answer_count": 2, "score": -1, "last_activity_date": 1527417530, "creation_date": 1527103966, "last_edit_date": 1527417530, "question_id": 50496176, "link": "https://stackoverflow.com/questions/50496176/double-aes-encryption-with-random-key-generation", "title": "Double AES encryption with random key generation", "body": "<p>I am using 2 embedded GSM devices. There needs to send data between devices. Suppose I require to send the string \"ring\" from one device to another. It is a command and needs to be sent multiple times. 1st thing I do is keep the aes_key same in both devices. Then encrypt the input_data(that is \"boom\") and get the enc_buffer. Send this enc_buffer over socket to other device. The other device has same aes_key. Using that I decrypt the buffer received into dec_buffer. My doubt is that will the encrypted message enc_buffer be same every time I send the encrypted text for \"boom\". If it is same, then I need to follow another approach. I have a 1st level aes_key, that is constant. Then I need to generate a 2nd level aes_key. Encrypt the 2nd level aes_key and send it over socket. In the receiving device, decrypt it using 1st level aes_key to get the 2nd level aes_key. Store it. In 1st device again encrypt string \"boom\" using 2nd level aes_key, send it over socket. In the 2nd device decrypt the encrypted message using 2nd level aes_key to get text \"boom\". But another problem is how to generate the 2nd level aes_key in 1st device. Is there some random key generator API present in Linux. Or can I use random number generator API. I need a 10 character-length key. For that I call random number generator 10 times to generate a number between 0-26 and convert this to character. Then gather then together to get the desired key.  I am using the AES code sample as below. Pasted for reference to above text.</p>\n\n<pre><code>unsigned char aes_key[]= \"asytfuhcilejnco\";\nunsigned char input_data[]= \"Sandeep\";\nint data_size= strlen((char*)input_data);\nint buffer_size = ((int)(data_size/AES_BLOCK_SIZE) + 1)*AES_BLOCK_SIZE;\n\nAES_KEY enc_key,dec_key;\nunsigned char iv[AES_BLOCK_SIZE];\n\nint main()\n{\nunsigned char enc_buffer[buffer_size+1];\nunsigned char dec_buffer[buffer_size+1];\n\n    memset(iv,0x00,AES_BLOCK_SIZE);\n    AES_set_encrypt_key(aes_key,sizeof(aes_key)*8,&amp;enc_key);\n    AES_cbc_encrypt(input_data,enc_buffer,sizeof(input_data),&amp;enc_key,iv,AES_ENCRYPT);\n    enc_buffer[buffer_size+1]='\\0';\n\n    memset(iv,0x00,AES_BLOCK_SIZE);\n    AES_set_decrypt_key(aes_key,sizeof(aes_key)*8,&amp;dec_key);\n    AES_cbc_encrypt(enc_buffer,dec_buffer,sizeof(input_data),&amp;dec_key,iv,AES_DECRYPT);\n    dec_buffer[buffer_size+1]='\\0';\n\n    cout&lt;&lt;\"input_data=\"&lt;&lt;input_data&lt;&lt;endl;\n    cout&lt;&lt;\"enc_buffer=\"&lt;&lt;enc_buffer&lt;&lt;endl;\n    cout&lt;&lt;\"dec_buffer=\"&lt;&lt;dec_buffer&lt;&lt;endl;\n}\n</code></pre>\n\n<p>so, I have 3 questions</p>\n\n<ol>\n<li>Is encrypted data always the same for same input_data and aes_key?</li>\n<li>Is there any random key generator API?</li>\n<li>What systemcall is there for random numbers in Linux c++?</li>\n</ol>\n"}, {"tags": ["c++", "c++11", "iterator", "iterator-traits"], "answers": [{"comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1527105753, "post_id": 50496320, "comment_id": 88005916, "body": "@user463035818 You can&#39;t just define one of the types. You must define all of them. Since C++17, at least, &quot;If <code>Iterator</code> does not have all five member types <code>difference_type</code>, <code>value_type</code>, <code>pointer</code>, <code>reference</code>, and <code>iterator_category</code>, then this template has no members by any of those names (<code>std::iterator_traits</code> is SFINAE-friendly)&quot;"}], "tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 4, "last_activity_date": 1527104609, "creation_date": 1527104609, "answer_id": 50496320, "question_id": 50496160, "link": "https://stackoverflow.com/questions/50496160/how-to-avoid-specializing-iterator-traits-for-each-possible-instantiation-of-a-t/50496320#50496320", "title": "How to avoid specializing iterator_traits for each possible instantiation of a templated iterator?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/iterator/iterator_traits#Member_types\" rel=\"nofollow noreferrer\"><code>std::iterator_traits&lt;Iterator&gt;::something</code> is simply <code>Iterator::something</code></a> by default. Thus, simply add the typedefs into your <code>reversed_iterator</code> type:</p>\n\n<pre><code>struct reversed_iterator {\n    using difference_type = typename std::iterator_traits&lt;IT&gt;::difference_type;\n    using value_type = typename std::iterator_traits&lt;IT&gt;::value_type;\n    using pointer = typename std::iterator_traits&lt;IT&gt;::pointer;\n    using reference = typename std::iterator_traits&lt;IT&gt;::reference;\n    using iterator_category = /* appropriate category */;\n\n    // ...\n};\n</code></pre>\n"}], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 50496320, "answer_count": 1, "score": 3, "last_activity_date": 1527104609, "creation_date": 1527103914, "question_id": 50496160, "link": "https://stackoverflow.com/questions/50496160/how-to-avoid-specializing-iterator-traits-for-each-possible-instantiation-of-a-t", "title": "How to avoid specializing iterator_traits for each possible instantiation of a templated iterator?", "body": "<p>I want to pimp up my ranged based for loops, for example by enabling reversed iteraton. I managed to get it working to some degree by writing an adaptor, but I am lost on how to make the adpaptor composable. </p>\n\n<pre><code>#include &lt;iostream&gt;\ntemplate &lt;typename IT&gt; struct reversed_range {\n        struct reversed_iterator {\n            IT it;\n            reversed_iterator(IT it): it(it){}\n            reversed_iterator&amp; operator++(){\n                --it;\n                return (*this);\n            }\n            typename std::iterator_traits&lt;IT&gt;::reference operator*(){\n                IT tmp = it;\n                --tmp;\n                return *tmp;\n            }\n            bool operator==(const reversed_iterator&amp; other) const {\n                return it == other.it;\n            }\n            bool operator!=(const reversed_iterator&amp; other) const { \n                return !(*this == other);\n            }\n        };\n        IT itbegin;\n        IT itend;\n        reversed_range(const IT&amp; b,const IT&amp; e): itbegin(b),itend(e){}\n        reversed_iterator begin() const { return reversed_iterator(itend); }\n        reversed_iterator end() const { return reversed_iterator(itbegin); }\n    };\n    template &lt;typename IT&gt;\n    reversed_range&lt;IT&gt; reverse_range(const IT&amp; begin,const IT&amp; end) { \n        return reversed_range&lt;IT&gt;(begin,end); \n    }\n    template &lt;typename C&gt;\n    reversed_range&lt;C&gt; reverse_range(const C&amp; c) {\n        return reversed_range&lt;typename C::iterator&gt;(std::begin(c),std::end(c));\n    }\n\nint main() {\n    int x[] = {1,2,3,4,5};\n    for (auto y : reverse_range(std::begin(x),std::end(x))){\n        std::cout &lt;&lt; y &lt;&lt; \"\\t\";\n    }\n    for (auto y : reverse_range(reverse_range(std::begin(x),std::end(x)))){\n        std::cout &lt;&lt; y &lt;&lt; \"\\t\";\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The first loop works like a charm, but for the second I get the error:</p>\n\n<pre><code>error: no type named \u2018reference\u2019 in \u2018struct std::iterator_traits&lt;reversed_range&lt;int*&gt; &gt;\u2019\n             typename std::iterator_traits&lt;IT&gt;::reference operator*(){\n                                                          ^~~~~~~~\n</code></pre>\n\n<p>I know why this happens and I know how I could fix it for this particular case. However, if i correclty understand <a href=\"https://stackoverflow.com/a/7928010/4117728\">this answer</a> I would have to specialize <code>iterator_traits</code> for each possible instantiation of my <code>reversed_iterator</code> which isnt really feasible. I am a bit lost, most of the time I write my own iterators I find myself writing lots of boilerplate just to reach a point where I realize that I would need exponentially more boilerplate to get it working. I mean I didnt even start to consider <code>const_iterator</code>s.</p>\n\n<p><strong>Is there a way to get the above working (whithout having to specialize <code>iterator_traits</code> for each <code>iterator</code> I ever want to reverse?</strong> </p>\n\n<p>PS: tagged as C++11, because thats my current scope, but if there are improvements with respect to this, I wouldnt mind to use a newer standard.</p>\n"}, {"tags": ["c++", "class", "eigen", "preprocessor"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1527102791, "post_id": 50495829, "comment_id": 88004418, "body": "When the preprocessor is running, <i>no class exists</i>.  A &quot;class&quot; is a property of the C++ language.  The preprocessor processes <b>before</b> any code is compiled."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1527103020, "post_id": 50495829, "comment_id": 88004531, "body": "You can use template for that not macro"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1527103569, "post_id": 50495829, "comment_id": 88004830, "body": "Indeed.  Templates would solve the described problem handily."}], "owner": {"reputation": 161, "user_id": 3875310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/098711fa7188cf1bc5ed8959f0b4be09?s=128&d=identicon&r=PG&f=1", "display_name": "MattKelly", "link": "https://stackoverflow.com/users/3875310/mattkelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "closed_date": 1527102943, "answer_count": 0, "score": 0, "last_activity_date": 1527102812, "creation_date": 1527102644, "question_id": 50495829, "link": "https://stackoverflow.com/questions/50495829/c-preprocessor-test-if-class-exists", "closed_reason": "Duplicate", "title": "C++ preprocessor: test if class exists", "body": "<p><strong>Is it possible for the C++ preprocessor to test if a class exists? If so, how would I do this?</strong></p>\n\n<p>I am writing C++ code that uses an Eigen class (CompleteOrthogonalDecomposition) that is only in the newer version of Eigen. The code that I am currently using just checks the version:</p>\n\n<pre><code>#if EIGEN_VERSION_AT_LEAST(3,3,4) \n// code for new version of eigen here\n#else \n// fall-back code for old version of eigen\n#endif\n</code></pre>\n\n<p>I would be able to check if the specific class that I need exists. The following does not compile but it shows what I would like to do:</p>\n\n<pre><code>#if CLASS_EXISTS(CompleteOrthogonalDecomposition)  // does not compile\n// code for new version of eigen here\n#else \n// fall-back code for old version of eigen\n#endif\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc", "compiler-construction", "compiler-optimization"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1527102075, "post_id": 50495572, "comment_id": 88004064, "body": "Related: <a href=\"https://stackoverflow.com/questions/37825859/cache-miss-a-tlb-miss-and-page-fault\">cache miss, a TLB miss and page fault</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1527102220, "post_id": 50495572, "comment_id": 88004131, "body": "Are you getting TLB misses due to data fetching (memory accessing) or due to instruction fetching?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1527103024, "post_id": 50495572, "comment_id": 88004535, "body": "There are a lot of &quot;it depends&quot; items.  It depends on the memory on your machine, whether the OS has room for all of your code, how often a function is called, and how sparse the function calls are.  There are not many TLB misses if a function is loaded and accessed frequently.  However, you may get more TLB misses if your code is calling many different functions that are not in memory.  The order is not much of an issue as the length of the function and whether it needs to be replaced."}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1527103162, "post_id": 50495572, "comment_id": 88004605, "body": "The likely answer would be to place the functions in named sequential sub-sections ((.text.prefix.1 ... .text.prefix.N) and then count on the linker placing those sub-sections in contiguous memory."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1527103220, "post_id": 50495572, "comment_id": 88004627, "body": "You may get some benefit by ordering the functions by frequency of being called.  Functions called more frequently should be placed closer to the caller than less frequently called functions."}, {"owner": {"reputation": 81, "user_id": 6401867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ed9983843252230d840a54cc214f437?s=128&d=identicon&r=PG&f=1", "display_name": "Modestas Jur\u010dius", "link": "https://stackoverflow.com/users/6401867/modestas-jur%c4%8dius"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1527105575, "post_id": 50495572, "comment_id": 88005833, "body": "@ThomasMatthews Yes I&#39;m planing to do just that, functions who are more likely to be called to place them closer. The question is with what tools I actually can do this."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1527130668, "post_id": 50495572, "comment_id": 88013158, "body": "This can certainly be done relatively easily, but at compile-time. Doing it at run-time is also technically possible, but is much more complicated and requires a lot of effort from your side. It&#39;s unusual to reorder functions at run-time, are you sure this is what you want?"}, {"owner": {"reputation": 81, "user_id": 6401867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ed9983843252230d840a54cc214f437?s=128&d=identicon&r=PG&f=1", "display_name": "Modestas Jur\u010dius", "link": "https://stackoverflow.com/users/6401867/modestas-jur%c4%8dius"}, "reply_to_user": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1527147135, "post_id": 50495572, "comment_id": 88019300, "body": "@HadiBrais I would be pleased if you could give me both scenarios on how I would have to do it, compile-time and run-time."}, {"owner": {"reputation": 352, "user_id": 3473433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa87ec32236bf2a31994b1067e633067?s=128&d=identicon&r=PG&f=1", "display_name": "eugenioperez", "link": "https://stackoverflow.com/users/3473433/eugenioperez"}, "edited": false, "score": 0, "creation_date": 1527174938, "post_id": 50495572, "comment_id": 88038011, "body": "You should be able to put similar functions together with your compiler&#39;s inter-procedural profiled guide optimizations. The compiler should be able then to put hot (or temporal nearest) functions together, and cold ones far away. You need to compile your software once, run it under the PGO, and then compile it again with the generated feedback. In gcc, that option is ` --profile-generate` and ` --profile-use`. Take care that if the tests suite you use to generate profile information is too different from the actual software use, it will could perform worse than default!"}, {"owner": {"reputation": 61, "user_id": 7531575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71c42b5e8566b24cccdbba651c02f798?s=128&d=identicon&r=PG&f=1", "display_name": "Deandre Thomson", "link": "https://stackoverflow.com/users/7531575/deandre-thomson"}, "reply_to_user": {"reputation": 352, "user_id": 3473433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa87ec32236bf2a31994b1067e633067?s=128&d=identicon&r=PG&f=1", "display_name": "eugenioperez", "link": "https://stackoverflow.com/users/3473433/eugenioperez"}, "edited": false, "score": 0, "creation_date": 1527178481, "post_id": 50495572, "comment_id": 88040239, "body": "@eugenioperez How does putting related functions together actually help to decrease TLB misses? I can see that improving overall need of traversing memory when reaching the called function, but I would imaging TLB be independent of order in the actual program. Maybe you have a specific optimzation flag in mind?"}], "owner": {"reputation": 81, "user_id": 6401867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ed9983843252230d840a54cc214f437?s=128&d=identicon&r=PG&f=1", "display_name": "Modestas Jur\u010dius", "link": "https://stackoverflow.com/users/6401867/modestas-jur%c4%8dius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 3, "answer_count": 0, "score": 1, "last_activity_date": 1527103127, "creation_date": 1527101716, "last_edit_date": 1527103127, "question_id": 50495572, "link": "https://stackoverflow.com/questions/50495572/subroutine-reordering-reducing-tlb-misses", "title": "Subroutine reordering, reducing TLB misses", "body": "<p>Let's say I have an algorithm which would optimize subroutine ordering, in hopes to reduce TLB misses.</p>\n\n<p>How would one be able actually to reorder subroutines at run-time in gcc compiler? So far I presume that it would be possible to write a gcc plugin for this. How ever I have no idea how to actually write them let alone that it is possible at all.</p>\n"}, {"tags": ["c++", "c++11", "googletest", "googlemock"], "comments": [{"owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1527102773, "post_id": 50495559, "comment_id": 88004409, "body": "@Justin Yes, it does, thanks a lot. Can you please add this as an answer to be able to accept it?"}], "answers": [{"comments": [{"owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "edited": false, "score": 0, "creation_date": 1527103272, "post_id": 50495959, "comment_id": 88004659, "body": "@Thanks, this was the solution. What I do not understand it, why does it work if everything is the same but <code>Bar</code> receives pure pointer (<code>Foo*</code>)? The situation should be the same but the error message does not occur."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "edited": false, "score": 0, "creation_date": 1527103726, "post_id": 50495959, "comment_id": 88004925, "body": "@TiborTak&#225;cs Unfortunately, I don&#39;t know how googletest&#39;s leak checking works. Assuming you wrote <code>new MockFoo</code>, if you did write <code>delete m_foo</code>, that would be Undefined Behavior. If you didn&#39;t write <code>new</code>, but wrote smth like <code>MockFoo mock_foo</code> then passed in <code>&amp;mock_foo</code>, then that&#39;s completely expected"}], "tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 8, "last_activity_date": 1527103121, "creation_date": 1527103121, "answer_id": 50495959, "question_id": 50495559, "link": "https://stackoverflow.com/questions/50495559/why-does-google-test-mock-show-leaked-mock-object-error-by-stdunique-ptr/50495959#50495959", "title": "Why does Google Test/Mock show leaked mock object error by std::unique_ptr?", "body": "<p>The problem is that <code>Foo</code> does not have a virtual destructor. <code>std::unique_ptr&lt;Foo&gt;</code> thus won't be calling the derived class's destructor, just <code>Foo</code>'s destructor.</p>\n\n<pre><code>class Foo\n{\n  public:\n    virtual ~Foo() = default;\n    virtual int F() = 0;\n};\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/q/461203/1896169\">When to use virtual destructors?</a> If a base class <code>Foo</code> has virtual functions, it should either have a virtual destructor or a non-public destructor.</p>\n"}], "owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3199, "favorite_count": 2, "accepted_answer_id": 50495959, "answer_count": 1, "score": 6, "last_activity_date": 1527103121, "creation_date": 1527101677, "question_id": 50495559, "link": "https://stackoverflow.com/questions/50495559/why-does-google-test-mock-show-leaked-mock-object-error-by-stdunique-ptr", "title": "Why does Google Test/Mock show leaked mock object error by std::unique_ptr?", "body": "<p>Let's assume that there is <code>Bar</code> object which uses a <code>Foo</code> object. The ownership is exclusive, so <code>Bar</code> gets <code>Foo</code> as a <code>std::unique_ptr</code> in its constructor. I would like to test <code>Bar</code> with Google Test framework, so I made a following code:</p>\n\n<pre><code>using namespace testing;\n\nclass Foo\n{\n  public:\n    virtual int F() = 0;\n};\n\nclass Bar\n{\n  public:\n    Bar(std::unique_ptr&lt;Foo&gt;&amp;&amp; foo) : m_foo(std::move(foo))\n    {\n    }\n\n    int B()\n    {\n        return m_foo-&gt;F();\n    }\n\n  private:\n    std::unique_ptr&lt;Foo&gt; m_foo;\n};\n\nclass MockFoo : public Foo\n{\n  public:\n    MOCK_METHOD0(F, int());\n};\n\nclass BarTest : public Test\n{\n};\n\nTEST_F(BarTest, Test1)\n{\n    auto mock_foo = std::make_unique&lt;MockFoo&gt;();\n    ON_CALL(*mock_foo, F()).WillByDefault(Return(1));\n\n    Bar bar(std::move(mock_foo));\n\n    auto val = bar.B();\n\n    EXPECT_THAT(val, 1);\n}\n</code></pre>\n\n<p>The test runs well but I got the following error:</p>\n\n<p><strong>...test.cpp:293: ERROR: this mock object (used in test BarTest.Test1) should be deleted but never is. Its address is @0x1c7c590.\nERROR: 1 leaked mock object found at program exit.</strong></p>\n\n<p>I think Google Test thinks that I have not destroyed <code>mock_foo</code> but it does not see that it does not have to be deleted here because it has been moved. The test is safe because the object itself is the same, just the ownership has changed (which is my intention).</p>\n\n<p>Is my assumption correct? If yes, how can I suppress this error message? I no, where is the memory leak?</p>\n"}, {"tags": ["c++", "arrays", "sorting", "data-structures", "char"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1527103396, "post_id": 50495527, "comment_id": 88004740, "body": "This would be easier by using <code>std::string</code>.  You could use <code>std::map&lt;std::string, int&gt;</code> to associate words with frequencies.  The sorting would be handled for you.  Natural sorting of <code>std::string</code> is by letter, then length, e.g. `&quot;aa&quot; before &quot;ba&quot;."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1527115143, "post_id": 50495527, "comment_id": 88009727, "body": "It&#39;s unclear here what the purpose of <code>swap_pos</code> is. Is it supposed to be <code>min_pos</code>?"}, {"owner": {"reputation": 90, "user_id": 9836412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iMxhf.jpg?s=128&g=1", "display_name": "feight", "link": "https://stackoverflow.com/users/9836412/feight"}, "edited": false, "score": 0, "creation_date": 1527115239, "post_id": 50495527, "comment_id": 88009762, "body": "Yes, forgot to change it back."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1527128251, "post_id": 50495527, "comment_id": 88012620, "body": "The second <code>for</code> - where is it&#39;s opening brace? The first <code>for</code> where is it&#39;s closing brace?"}], "answers": [{"comments": [{"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1527153096, "post_id": 50495687, "comment_id": 88022852, "body": "Great idea. I would combine it with my idea to: Use tuple lexicographical compare operators. (answer below)"}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 6, "last_activity_date": 1527102589, "last_edit_date": 1527102589, "creation_date": 1527102137, "answer_id": 50495687, "question_id": 50495527, "link": "https://stackoverflow.com/questions/50495527/sorting-array-of-chars-alphabetically-then-by-length/50495687#50495687", "title": "Sorting array of chars alphabetically then by length", "body": "<p><strong>Make a comparator function</strong>.</p>\n\n<p>Add an <code>operator&lt;</code> to your <code>List</code>:</p>\n\n<pre><code>bool operator&lt;(const List &amp;lhs) const {\n    if(word[0] != lhs.word[0]) {\n        return word[0] &lt; lhs.word[0];\n    }\n    return strlen(word) &lt; strlen(lhs.word);\n}\n</code></pre>\n\n<p>And now use this operator to sort, using whichever algorithm strikes your fancy.</p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527104760, "post_id": 50495717, "comment_id": 88005422, "body": "OP wants length, no <code>repeat</code>"}, {"owner": {"reputation": 90, "user_id": 9836412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iMxhf.jpg?s=128&g=1", "display_name": "feight", "link": "https://stackoverflow.com/users/9836412/feight"}, "edited": false, "score": 0, "creation_date": 1527107707, "post_id": 50495717, "comment_id": 88006899, "body": "All right, I&#39;ve added your code and <code>tuple</code> library to my project, but nothing happens. Like it just doesn&#39;t execute. I&#39;ve read about <code>std::tie</code> for a while, but I guess I missed something."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 90, "user_id": 9836412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iMxhf.jpg?s=128&g=1", "display_name": "feight", "link": "https://stackoverflow.com/users/9836412/feight"}, "edited": false, "score": 0, "creation_date": 1527128009, "post_id": 50495717, "comment_id": 88012572, "body": "@enjoy where did You use this code? In the <code>if</code> statement?"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527128772, "post_id": 50495717, "comment_id": 88012746, "body": "@Jarod42 I thought that <code>repeat</code> was the other variable to be compared. I modified the answer to suggest using <code>make_tuple</code> when function results have to be compared."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1527149743, "post_id": 50495717, "comment_id": 88020736, "body": "I would combine this answer and use it in the &quot;Make a comparator function.&quot;"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527151360, "post_id": 50495717, "comment_id": 88021603, "body": "<code>std::forward_as_tuple</code> might also be used to avoid any copy."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527152137, "post_id": 50495717, "comment_id": 88022188, "body": "@Jarod42 Great! Added to the answer."}], "tags": [], "owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1527190300, "last_edit_date": 1527190300, "creation_date": 1527102248, "answer_id": 50495717, "question_id": 50495527, "link": "https://stackoverflow.com/questions/50495527/sorting-array-of-chars-alphabetically-then-by-length/50495717#50495717", "title": "Sorting array of chars alphabetically then by length", "body": "<p><strong>Use tuple lexicographical compare operators</strong></p>\n\n<p>An easy way to not write this condition is to</p>\n\n<pre><code>#include &lt;tuple&gt;\n</code></pre>\n\n<p>Then <a href=\"http://en.cppreference.com/w/cpp/utility/tuple/tie\" rel=\"nofollow noreferrer\"><code>std::tie</code></a> can be used:</p>\n\n<pre><code>std::tie(array[j].word[0], array[j].repeat) &lt; std::tie(array[min_pos].word[0], array[min_pos].repeat)\n</code></pre>\n\n<p>This works because <a href=\"http://en.cppreference.com/w/cpp/utility/tuple/tie\" rel=\"nofollow noreferrer\"><code>std::tie</code></a> creates a tuple of lvalue references to its arguments. (Which means <code>std::tie</code> requires variables. If You want to compare results from functions <a href=\"https://en.cppreference.com/w/cpp/utility/tuple/make_tuple\" rel=\"nofollow noreferrer\"><code>std::make_tuple</code></a> or <a href=\"https://en.cppreference.com/w/cpp/utility/tuple/forward_as_tuple\" rel=\"nofollow noreferrer\"><code>std::forward_as_tuple</code></a> would be better)</p>\n\n<p>And <code>std::tuple</code> has <a href=\"http://en.cppreference.com/w/cpp/utility/tuple/operator_cmp\" rel=\"nofollow noreferrer\">operators</a> which </p>\n\n<blockquote>\n  <p>Compares lhs and rhs lexicographically, that is, compares the first elements, if they are equivalent, compares the second elements, if those are equivalent, compares the third elements, and so on. </p>\n</blockquote>\n\n<p>And the above description is also the idea how to make a comparison of more than value.</p>\n"}, {"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 1, "last_activity_date": 1527112108, "last_edit_date": 1527112108, "creation_date": 1527111646, "answer_id": 50497878, "question_id": 50495527, "link": "https://stackoverflow.com/questions/50495527/sorting-array-of-chars-alphabetically-then-by-length/50497878#50497878", "title": "Sorting array of chars alphabetically then by length", "body": "<p>You can pass a lambda to <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\"><code>sort</code></a> to do this:</p>\n\n<pre><code>sort(begin(array), end(array), [](const auto&amp; lhs, const auto&amp; rhs){ return *lhs.word &lt; *rhs.word || *lhs.word == *rhs.word &amp;&amp; (strlen(lhs.word) &lt; strlen(rhs.word) || strlen(lhs.word) == strlen(rhs.word) &amp;&amp; strcmp(lhs.word, rhs.word) &lt; 0); });\n</code></pre>\n\n<p><a href=\"https://ideone.com/9pMhzy\" rel=\"nofollow noreferrer\"><kbd>Live Example</kbd></a></p>\n"}, {"comments": [{"owner": {"reputation": 90, "user_id": 9836412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iMxhf.jpg?s=128&g=1", "display_name": "feight", "link": "https://stackoverflow.com/users/9836412/feight"}, "edited": false, "score": 0, "creation_date": 1527157196, "post_id": 50498541, "comment_id": 88025585, "body": "Ended up putting your loop in <code>do ... while (doSwap)</code> Works like a charm, thank you."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "reply_to_user": {"reputation": 90, "user_id": 9836412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iMxhf.jpg?s=128&g=1", "display_name": "feight", "link": "https://stackoverflow.com/users/9836412/feight"}, "edited": false, "score": 0, "creation_date": 1527172803, "post_id": 50498541, "comment_id": 88036593, "body": "@enjoy I don&#39;t think that conditional loop is a good idea with selection sort. The general case of selection sort doesn&#39;t allow for an early out."}, {"owner": {"reputation": 90, "user_id": 9836412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iMxhf.jpg?s=128&g=1", "display_name": "feight", "link": "https://stackoverflow.com/users/9836412/feight"}, "edited": false, "score": 0, "creation_date": 1527179323, "post_id": 50498541, "comment_id": 88040658, "body": "Actually, I have this: <code>bool loop; int n = 2; do {      ... } while ((loop &amp;&amp; n) || n--);</code> So it runs several times to sort everything correctly. I am 100% sure this code is awful, but I am very new to programming and pretty happy with this."}], "tags": [], "owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "is_accepted": true, "score": 1, "last_activity_date": 1527115664, "creation_date": 1527115664, "answer_id": 50498541, "question_id": 50495527, "link": "https://stackoverflow.com/questions/50495527/sorting-array-of-chars-alphabetically-then-by-length/50498541#50498541", "title": "Sorting array of chars alphabetically then by length", "body": "<p>Others have pointed out that there are faster and cleaner ways to sort. But if you want to use your own selection sort, as you've written, then you just need to make a few changes to your code.</p>\n\n<p>Separate the \"do I need to swap\" logic from the swapping logic itself. Then the code becomes much cleaner and it's more clear where to add the extra check.</p>\n\n<p>I've only copied the inner loop here. You'd want to replace your existing inner loop with this one. I'm not clear on why you need <code>swap_pos</code> and <code>min_pos</code>, so I've left the semantics alone.</p>\n\n<pre><code>    for (j = i + 1; j &lt; length; j++) { // find min\n        // first, determine whether you need to swap\n        // You want to swap if the first character of the new word is\n        // smaller, or if the letters are equal and the length is smaller.\n        bool doSwap = false;\n        if (array[j].word[0] &lt; array[min_pos].word[0]) {\n            doSwap = true;\n        }\n        else if (array[j].word[0] == array[min_pos].word[0] &amp;&amp;\n                 strlen(array[j].word) &lt; array[min_pos].word) {\n            doSwap = true;\n        }\n\n        // do the swap if necessary\n        if (doSwap) {\n            swap_pos = j;\n            swap = array[min_pos]; // swap\n            array[min_pos] = array[i];\n            array[i] = swap;\n        }\n    }\n</code></pre>\n\n<p>To more clearly illustrate the necessary logic changes, I've purposely avoided making major style changes or simple optimizations.</p>\n"}], "owner": {"reputation": 90, "user_id": 9836412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iMxhf.jpg?s=128&g=1", "display_name": "feight", "link": "https://stackoverflow.com/users/9836412/feight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 50498541, "answer_count": 4, "score": 1, "last_activity_date": 1527190300, "creation_date": 1527101548, "last_edit_date": 1527115310, "question_id": 50495527, "link": "https://stackoverflow.com/questions/50495527/sorting-array-of-chars-alphabetically-then-by-length", "title": "Sorting array of chars alphabetically then by length", "body": "<p>I have an array of structs where I keep track of how many times each unique word was seen in a given text:</p>\n\n<pre><code>struct List {\n  char word[20];\n  int repeat;\n};\n</code></pre>\n\n<p>Now I need to sort this:</p>\n\n<pre><code>as             6\na              1\nappetite       1\nangry          1\nare            2\nand            4\n...\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>a            1\nas           6\nand          4\nare          2\nangry        1\nappetite     1\n...\n</code></pre>\n\n<p>(By alphabetically I mean only by first letter)\nSo far, I have come up with this:</p>\n\n<pre><code>for (i = 0; i &lt; length - 1; i++) {\n        min_pos = i;\n        for (j = i + 1; j &lt; length; j++) // find min\n            if (array[j].word[0] &lt; array[min_pos].word[0]) {\n                min_pos = j;\n            }\n            swap = array[min_pos]; // swap\n            array[min_pos] = array[i];\n            array[i] = swap;\n        }\n</code></pre>\n\n<p>This code works perfectly for sorting alphabetically, but I just can't write proper code to sort BOTH alphabetically and by length.</p>\n"}, {"tags": ["c++", "c", "assembly"], "comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1527101995, "post_id": 50495208, "comment_id": 88004029, "body": "<i>you can return results from assembly by moving the value into the eax register</i>.  That might appear to work, but only works by accident.  You can&#39;t use GNU C inline asm safely unless you use input and output operands to tell the compiler what you&#39;re doing.  It will break when the compiler inlines your function into a caller.  See <a href=\"https://stackoverflow.com/questions/34520013/using-base-pointer-register-in-c-inline-asm\">this answer</a> for some more links about inline asm, and the kind of trouble you can get into from using it wrong."}], "answers": [{"comments": [{"owner": {"reputation": 780, "user_id": 3741284, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/38b1ab011312cb05bbd578dfc03f2587?s=128&d=identicon&r=PG&f=1", "display_name": "CRoemheld", "link": "https://stackoverflow.com/users/3741284/croemheld"}, "edited": false, "score": 0, "creation_date": 1527111715, "post_id": 50496319, "comment_id": 88008633, "body": "This sounds reasonable. Also, writing more in a high level language should also circumvent the problem regarding assembly, since the compiler translates a program/file to the architecture the compiler is targeting. So only some (few) parts of the OS should be written in assembly, if there is no C-equivalent code or if you need to manipulate some specific register for the OS?"}, {"owner": {"reputation": 6093, "user_id": 2189500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/109f747845a9ce762a1fff72eb8cf6f3?s=128&d=identicon&r=PG", "display_name": "David Wohlferd", "link": "https://stackoverflow.com/users/2189500/david-wohlferd"}, "edited": false, "score": 0, "creation_date": 1527129977, "post_id": 50496319, "comment_id": 88013002, "body": "Inline asm can be... well, inlined, whereas a call to an asm routine must always incur the cost of the call/ret, so there&#39;s that.  But mostly I&#39;m of the opinion that <a href=\"https://gcc.gnu.org/wiki/DontUseInlineAsm\" rel=\"nofollow noreferrer\">you should not use inline asm</a>."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1527104604, "creation_date": 1527104604, "answer_id": 50496319, "question_id": 50495208, "link": "https://stackoverflow.com/questions/50495208/inline-assembly-or-separate-assembly-files/50496319#50496319", "title": "Inline assembly or separate assembly files", "body": "<h2>Interface, Procotol &amp; Conventions</h2>\n\n<p>In a pure assembly language project, you need to set up protocols or conventions for passing values and returning values.  </p>\n\n<p>When mixing assembly language functions with C or C++, you will need to follow the parameter passing conventions of C or C++ as dictated by the compiler you are using.  </p>\n\n<p>Some compilers may use a convention of passing the first parameter in R0, while others may pass the last parameter in R0.  Some compilers may place the variables on the stack and not use registers.  Others may use registers for a few parameters and the remaining on the stack.  </p>\n\n<h2>Inline vs Separate Assembly functions</h2>\n\n<p>One issue is portability.  Assembly language is processor specific.  For example, ARM assembly doesn't have an EAX register.  Intel assembly doesn't have R10 register.  When using inline assembly, the assembly must change depending on the processor, which includes modifying the high level language function to account for all target processors.  When implementing as a separate assembly function (file), only the file needs to be swapped out when porting to other processors.  </p>\n\n<p>IMHO, pure assembly functions are easier to read than intermixed C and inline assembly.</p>\n\n<h2>Guidelines for High Level Language Usage in OS</h2>\n\n<p>The quantity of assembly language should be minimized.  Assembly language takes longer to develop (typing, and debugging, more lines == high possible injected defects), whereas the high level language is more productive with lower risks.  </p>\n\n<p>Prefer to write the entire OS in a high level language.  Get this version working robustly.  Replace C functions with assembly functions for more efficiency, or when specific assembly language instructions are required.</p>\n"}], "owner": {"reputation": 780, "user_id": 3741284, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/38b1ab011312cb05bbd578dfc03f2587?s=128&d=identicon&r=PG&f=1", "display_name": "CRoemheld", "link": "https://stackoverflow.com/users/3741284/croemheld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 0, "closed_date": 1527111565, "answer_count": 1, "score": -1, "last_activity_date": 1527104604, "creation_date": 1527100419, "question_id": 50495208, "link": "https://stackoverflow.com/questions/50495208/inline-assembly-or-separate-assembly-files", "closed_reason": "Opinion-based", "title": "Inline assembly or separate assembly files", "body": "<p>I'm currently trying to get into OS development, mostly following the articles and tutorials from <a href=\"https://wiki.osdev.org/\" rel=\"nofollow noreferrer\">OSDev</a>. As os now, I have multiple assembly files I need to e.g. enable paging and setting up long mode. </p>\n\n<p>While the only assembler code I'm certain about needs to be separated in an own file is the boot assembly file, I'm curious about the practices and \"standards\" how to deal with assembly in an OS written in C. Is it convenient to separate assembler from C or is there a reason why e.g. Linux wraps most of the assembly code inside C functions and calls them using the <code>asm volatile</code> directives? </p>\n\n<p>I don't see much difference, as you can return results from assembly by moving the value into the <code>eax</code> register, or when using <code>asm</code> and <code>asm volatile</code>, you can specify parameters and output operands where to store the result. However, you always need to separate multiple instructions by using <code>\\n</code> or <code>\\n\\t</code>.</p>\n\n<p>As of now, I only found out about the different ways of dealing with assembly in a larger project, but not why some chose to separate assembly code from C or C++, and why some chose to use inline assembly thorough the whole program.</p>\n\n<p>I hope you could give me some insights about the different ways used regarding this topic.</p>\n"}, {"tags": ["c++", "qt", "qt5", "qmenu", "qaction"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1527099499, "post_id": 50494931, "comment_id": 88002702, "body": "explain yourself better please, do you only want the QActions to be executed at most once?"}, {"owner": {"reputation": 211, "user_id": 2337945, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/490d8becc8b4322c0552496af93dd85a?s=128&d=identicon&r=PG", "display_name": "Sonicpath", "link": "https://stackoverflow.com/users/2337945/sonicpath"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1527099716, "post_id": 50494931, "comment_id": 88002810, "body": "\u0399 want the user to be able to select the action only once."}], "owner": {"reputation": 211, "user_id": 2337945, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/490d8becc8b4322c0552496af93dd85a?s=128&d=identicon&r=PG", "display_name": "Sonicpath", "link": "https://stackoverflow.com/users/2337945/sonicpath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536982035, "creation_date": 1527099381, "last_edit_date": 1536982035, "question_id": 50494931, "link": "https://stackoverflow.com/questions/50494931/how-to-disable-menu-action-items-after-they-are-selected-in-qt", "title": "How to disable menu action items after they are selected in qt", "body": "<p>How can I disable menu action items after they are selected?\u0399 want the user to be able to select the action only once.</p>\n\n<pre><code>Menu=MainMenu-&gt;addMenu(\"menu\");\nsub1 =Menu-&gt;addAction(\"sub 1\");\nsub2 =Menu-&gt;addAction(\"sub 2\");\n\nconnect(sub1, &amp;QAction::triggered, [item, this](){\nsetBlock1();\n});\nconnect(sub2, &amp;QAction::triggered, [item, this](){\nsetBlock2();\n});\n</code></pre>\n"}, {"tags": ["c++", "inline"], "comments": [{"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 2, "creation_date": 1527099193, "post_id": 50494839, "comment_id": 88002554, "body": "<code>inline</code> is a &quot;hint&quot; to the compiler, indicating that you&#39;d like the function to be inlined. So, sure: if you would like the function in question to be inlined, go for it. It&#39;s not useless - though a good optimizer should, in theory, inline any functions that lend themselves to such treatment. Note that functions defined in header files are typically inlined by default (at the discretion of the compiler)."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "reply_to_user": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 4, "creation_date": 1527099449, "post_id": 50494839, "comment_id": 88002678, "body": "@Dav3 <i>functions defined in header files are typically inlined by default (at the discretion of the compiler)</i> This is kind of misleading. Functions defined in header files should be explicitly declared <code>inline</code> by the user, so as to avoid multiple definition errors."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1527100310, "post_id": 50494839, "comment_id": 88003113, "body": "@Dav3, no. You are wrong on multiple occasions. First of, <code>inline</code> is not a hint to the compiler, modern compilers completely ignore <code>inline</code> for optimization purposes. Second, no, functions defined in header are not typically inlined."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1527100343, "post_id": 50494839, "comment_id": 88003131, "body": "@SergeyA Strictly speaking, <code>inline</code> <i>is</i> a hint to the compiler, though all modern compilers ignore it."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1527100364, "post_id": 50494839, "comment_id": 88003143, "body": "@DeiDei not every function defined in the header must be declared inline. Templates and members defined in-class do not need to be declarted <code>inline</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1527100423, "post_id": 50494839, "comment_id": 88003179, "body": "@Fran&#231;oisAndrieux I am not sure if you can call something a hint if the hint is not even considered. But I am not philosophy major."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527100470, "post_id": 50494839, "comment_id": 88003203, "body": "Beyond having some real meaning in relation to ODR (the One Definition Rule), which has nothing to do with actual inlining, <code>inline</code> is nothing more than a hint/piece of advice to the compiler - which it is completely free to ignore."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1527100475, "post_id": 50494839, "comment_id": 88003209, "body": "@SergeyA The language treats it as a non-binding request. Whether or not an implementation takes it into consideration does not change how the language is specified."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1527100645, "post_id": 50494839, "comment_id": 88003299, "body": "@Fran&#231;oisAndrieux I think when it comes to optimizations, it&#39;s important to understand the actual behavior. I actually believe, standard should remove all wording regarding optimization aspect of <code>inline</code> and leave ODR aspect in it. This would be in line (pun intended) with modern compiler behavior."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1527100974, "post_id": 50494839, "comment_id": 88003478, "body": "@SergeyA See the spec, *Since this meaning of the keyword inline is non-binding, compilers are free to use inline substitution for any function that&#39;s not marked inline, and are free to generate function calls to any function marked inline. Those optimization choices do not change the rules regarding multiple definitions and shared statics listed above. * (<a href=\"http://en.cppreference.com/w/cpp/language/inline\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/inline</a>) Not sure about you, but &quot;non-binding&quot;, to me, means &quot;hint&quot;."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1527101587, "post_id": 50494839, "comment_id": 88003821, "body": "And here&#39;s a nice discussion of how it&#39;s handled in GCC and clang. <a href=\"https://blog.tartanllama.xyz/inline-hints/\" rel=\"nofollow noreferrer\">blog.tartanllama.xyz/inline-hints</a>"}, {"owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "edited": false, "score": 0, "creation_date": 1527131334, "post_id": 50494839, "comment_id": 88013298, "body": "You did not specify which version of C++ - note that in C++17, the <code>inline</code> keyword has new capabilities, and there it is <i>required</i>. For example, you can declare a non-integral static variable inside the header and initialize it right there: <code>inline static std::string s{&quot;MyText&quot;};</code>"}], "owner": {"user_type": "does_not_exist", "display_name": "user3818260"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "closed_date": 1527099141, "answer_count": 0, "score": 1, "last_activity_date": 1527099085, "creation_date": 1527099029, "last_edit_date": 1527099085, "question_id": 50494839, "link": "https://stackoverflow.com/questions/50494839/do-i-need-to-use-inline-keywords", "closed_reason": "Duplicate", "title": "Do I need to use inline keywords?", "body": "<p>Some books say that the inline keyword does not force a method/function to be inlined. It is a request. And some compilers automatically inline the code without the inline keyword(as judged by the compiler). If so, do not have to use the inline keyword?</p>\n"}, {"tags": ["c++", "functional-programming", "predicate"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1527099089, "post_id": 50494813, "comment_id": 88002502, "body": "Why is it static?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1527099093, "post_id": 50494813, "comment_id": 88002505, "body": "You need to return a functionoid that, when called, will itself call <code>a</code> and <code>b</code> (which it has previously stored) with its own parameter and return the <code>and</code> of their results. You&#39;re not far ;)"}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1527099217, "creation_date": 1527099217, "answer_id": 50494889, "question_id": 50494813, "link": "https://stackoverflow.com/questions/50494813/and-two-predicate-functions-in-c/50494889#50494889", "title": "and two predicate functions in c++", "body": "<p>This should work:</p>\n\n<pre><code>template &lt;typename T&gt;\nstatic Predicate&lt;T&gt; andPredicate(Predicate&lt;T&gt; a, Predicate&lt;T&gt; b) {\n   return [a,b]( T const &amp;val ) { return a( val ) and b( val ) };\n}\n</code></pre>\n\n<p>it is not clear why you want to make it static though.</p>\n"}, {"comments": [{"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527099599, "post_id": 50494957, "comment_id": 88002754, "body": "@Slava oops, yep, fixed."}, {"owner": {"reputation": 584, "user_id": 4178596, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/14035948eefbc57c777f73014852e10f?s=128&d=identicon&r=PG&f=1", "display_name": "t4dohx", "link": "https://stackoverflow.com/users/4178596/t4dohx"}, "edited": false, "score": 0, "creation_date": 1527100202, "post_id": 50494957, "comment_id": 88003063, "body": "Thank you very much, exactly what I was looking for."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527101162, "post_id": 50494957, "comment_id": 88003575, "body": "It would be interesting to create <code>predicateCombiner</code> and create <code>andPredicate</code> using <code>predicateCombiner</code> and <code>std::logical_and</code>"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527102080, "post_id": 50494957, "comment_id": 88004068, "body": "@Slava Sure, <a href=\"http://coliru.stacked-crooked.com/a/b2e873cced933ff8\" rel=\"nofollow noreferrer\">you could do that</a>, but I don&#39;t think it really buys much in this situation."}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": true, "score": 4, "last_activity_date": 1527100070, "last_edit_date": 1527100070, "creation_date": 1527099476, "answer_id": 50494957, "question_id": 50494813, "link": "https://stackoverflow.com/questions/50494813/and-two-predicate-functions-in-c/50494957#50494957", "title": "and two predicate functions in c++", "body": "<p>Sure, just use a lambda:</p>\n\n<pre><code>template &lt;typename T&gt;\nPredicate&lt;T&gt; andPredicate(Predicate&lt;T&gt; a, Predicate&lt;T&gt; b) {\n    return [=](T i) { return a(i) &amp;&amp; b(i); };\n}\n</code></pre>\n\n<p>You can even avoid the extra overhead of <code>std::function</code> by leveraging templates:</p>\n\n<pre><code>template &lt;typename P1, typename P2&gt;\nauto andPredicate(P1&amp;&amp; a, P2&amp;&amp; b) {\n    return [a = std::forward&lt;P1&gt;(a), b = std::forward&lt;P2&gt;(b)](const auto&amp; i) {\n        return a(i) &amp;&amp; b(i);\n    };\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/366bac0cfd8e4d3d\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n\n<p>This avoids the extra type-erasure overhead of <code>std::function</code> by accepting the actual types needed for the original predicates and returning the lambda directly.  You can then store that in a <code>std::function</code> if you need, or just let the compiler deduce the type with <code>auto</code>.</p>\n"}], "owner": {"reputation": 584, "user_id": 4178596, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/14035948eefbc57c777f73014852e10f?s=128&d=identicon&r=PG&f=1", "display_name": "t4dohx", "link": "https://stackoverflow.com/users/4178596/t4dohx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 50494957, "answer_count": 2, "score": 0, "last_activity_date": 1527100070, "creation_date": 1527098886, "question_id": 50494813, "link": "https://stackoverflow.com/questions/50494813/and-two-predicate-functions-in-c", "title": "and two predicate functions in c++", "body": "<p>I am looking for a way to create a binary operation between two predicate functions. This is my predicate function declaration:</p>\n\n<pre><code>template &lt;typename T&gt;\nusing Predicate = std::function&lt;bool(T const&amp;)&gt;;\n</code></pre>\n\n<p>I am looking for a way to 'concat' two predicate functions into one:</p>\n\n<pre><code>template &lt;typename T&gt;\nstatic Predicate&lt;T&gt; andPredicate(Predicate&lt;T&gt; a, Predicate&lt;T&gt; b) {\n   // ???\n}\n</code></pre>\n\n<p>Expected behaviour:</p>\n\n<pre><code>Predicate&lt;int&gt; a = [](int a) { return a &lt; 5; };\nPredicate&lt;int&gt; b = [](int a) { return a &gt; 0; };\n\nPredicate&lt;int&gt; c = andPredicate(a, b); // a &lt; 5 &amp;&amp; a &gt; 0\n\nint number = 3;\nbool result = c(number);\n</code></pre>\n\n<p>Is something like this possible in C++?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1527098913, "post_id": 50494788, "comment_id": 88002431, "body": "is <i>std::vector&lt;&gt;</i> totally prohibited by your teacher?"}, {"owner": {"reputation": 697, "user_id": 1792344, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/daafde8b05ba02d5f1ad1bde80ebe071?s=128&d=identicon&r=PG", "display_name": "Tobal", "link": "https://stackoverflow.com/users/1792344/tobal"}, "reply_to_user": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1527099268, "post_id": 50494788, "comment_id": 88002594, "body": "vscode not support c++11 or c++17"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1527099792, "post_id": 50494788, "comment_id": 88002858, "body": "in <code>infinite_norm</code> <code>b</code> is a pointer, so <code>sizeof(b)</code> resolves to the size of a pointer in bytes, not the size of whatever is being pointed at. You will have to pass in the size as a parameter or use <code>std::vector</code> or <code>std::array</code> (or another, less-likely standard library container) because they carry their size with them."}, {"owner": {"reputation": 697, "user_id": 1792344, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/daafde8b05ba02d5f1ad1bde80ebe071?s=128&d=identicon&r=PG", "display_name": "Tobal", "link": "https://stackoverflow.com/users/1792344/tobal"}, "edited": false, "score": 0, "creation_date": 1527100156, "post_id": 50494788, "comment_id": 88003041, "body": "vector&lt;double&gt; b = {1.0, 2.0, 3.0} not work with vscode"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1527100286, "post_id": 50494788, "comment_id": 88003097, "body": "VSCode is just an editor, it does not come with a C++ compiler.  Any problems you are having are a result of your compiler and/or compile options.  C++11 and C++17 source code is still just text, same as C++03, and you can write it just fine with VSCode."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1527100294, "post_id": 50494788, "comment_id": 88003102, "body": "Add <code>-std=c++11</code> (or the code for a newer standard if you wish) to the command line to enable <a href=\"http://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">list initialization</a>."}], "answers": [{"comments": [{"owner": {"reputation": 697, "user_id": 1792344, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/daafde8b05ba02d5f1ad1bde80ebe071?s=128&d=identicon&r=PG", "display_name": "Tobal", "link": "https://stackoverflow.com/users/1792344/tobal"}, "edited": false, "score": 0, "creation_date": 1527099469, "post_id": 50494900, "comment_id": 88002690, "body": "Can you add the code please? I tried to create a new array but I didn&#39;t get the solution, thanks"}, {"owner": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "reply_to_user": {"reputation": 697, "user_id": 1792344, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/daafde8b05ba02d5f1ad1bde80ebe071?s=128&d=identicon&r=PG", "display_name": "Tobal", "link": "https://stackoverflow.com/users/1792344/tobal"}, "edited": false, "score": 0, "creation_date": 1527099910, "post_id": 50494900, "comment_id": 88002922, "body": "I&#39;ll get at it, but it may take a couple of minutes, as your use of c-style arrays confuses my c++ sensibilities. BTW, I think your use of sizeof(x) is also a but, since it will return the size of one pointer, not of an array."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 697, "user_id": 1792344, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/daafde8b05ba02d5f1ad1bde80ebe071?s=128&d=identicon&r=PG", "display_name": "Tobal", "link": "https://stackoverflow.com/users/1792344/tobal"}, "edited": false, "score": 2, "creation_date": 1527100030, "post_id": 50494900, "comment_id": 88002973, "body": "@Tobal <code>k &lt;= sizeof(x);</code> has three flaws. <code>sizeof(x)</code> provides the size of a pointer and once that is fixed  <code>sizeof(x)</code> returns the size in bytes, not elements. Finally once those are fixed, <code>&lt;=</code> will allow <code>k</code> to exceed the bounds of <code>x</code> by one. <code>vector</code> solves the first two, but not the third. Use a range-based for loop to handle the third."}, {"owner": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1527100719, "post_id": 50494900, "comment_id": 88003355, "body": "@user4581301 good point with the bounds, that one slipped past me"}], "tags": [], "owner": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "is_accepted": true, "score": 2, "last_activity_date": 1527114894, "last_edit_date": 1527114894, "creation_date": 1527099269, "answer_id": 50494900, "question_id": 50494788, "link": "https://stackoverflow.com/questions/50494788/finding-out-relative-error-with-infinite-norm-in-c/50494900#50494900", "title": "Finding out relative error with infinite norm in c++", "body": "<pre><code>double *subtract_vectors(double x[], double y[]) {\nfor(int k = 0; k &lt;= sizeof(x); k++) x[k] = x[k] - y[k];\nreturn x;\n</code></pre>\n\n<p>C++ passes arrays like <code>x[]</code> by reference by default, so your assignment to <code>x[k]</code> changes the array. After calling <code>subtract_vectors(x, y)</code>, you are calling the subtracted version every time you call <code>x</code>.</p>\n\n<p>Create a new array in subtract_vectors and return that instead.</p>\n\n<p>Edit: also, use vector, it's not c++11 but standard library from c++98 :)</p>\n\n<p>Edit2: <code>sizeof(x)</code> returns the size of a pointer, not of the array. This is a bug that can be easily avoided by using <code>std::vector</code>, but if you are glued to pure arrays, you should pass a dimension to <code>subtract_vectors</code>:</p>\n\n<pre><code>double *subtract_vectors(double x[], double y[], int const dim) {\n</code></pre>\n\n<p><strong>Final code</strong></p>\n\n<p>Since passing around dim so much is pretty annoying, I'd actually set a global variable (<code>constexpr int dim = 4</code> if arrays are required, <code>#define dim 4</code> if actual pre-c++11 code is necessary), but I've written it this way now, so you'd have to adapt it yourself. Also, what I'd actually, actually do is use vector or <code>std::array</code> wherever possible.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n\nusing namespace std;\n\ndouble infinite_norm(double b[], int const dim) {\n    double maximum;\n    for(int i = 0; i &lt; dim; i++) b[i] = fabs(b[i]);\n    maximum = b[0];\n    for(int i = 1; i &lt; dim; i++) maximum = fmax(maximum, b[i]);\n    return maximum;\n}\n\ndouble *subtract_vectors(double x[], double y[], int const dim) {\n      double *result = new double[dim];\n    for(int k = 0; k &lt; dim; k++) result[k] = x[k] - y[k];\n    return result;\n}\n\ndouble relative_error(double x[], double y[], int const dim) {\n    return infinite_norm(subtract_vectors(x, y, dim), dim) / infinite_norm(x, dim);\n}\n\nint main() {\n  int const dimension{4};\n  static double b[] = {6., 25., -11., 15.};\n  static double c[] = {1., 1., 1., 1.};\n  cout&lt;&lt;relative_error(b, c, dimension)&lt;&lt;endl;\n  cout&lt;&lt;24. / 25. &lt;&lt;endl;\n\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "edited": false, "score": 1, "creation_date": 1527153599, "post_id": 50496461, "comment_id": 88023168, "body": "This is not actually true in this case. The trick only works for arrays themselves, but in the functions in this example, the arrays have decayed to pointers. <code>sizeof(x)&#47;sizeof(x[0])</code> returns <code>1</code>! To reiterate, once you enter any of the functions that take double x[] type arguments, these are now pure pointers to doubles."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "edited": false, "score": 0, "creation_date": 1527153845, "post_id": 50496461, "comment_id": 88023329, "body": "@GeckoGeorge True; it&#39;s been so long since I&#39;ve worked with <code>raw arrays</code> been so use to using standard containers... and for pointers, been use to working with smart pointers... Thank you for bringing that up!"}, {"owner": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "edited": false, "score": 0, "creation_date": 1527154581, "post_id": 50496461, "comment_id": 88023836, "body": "It would be kind to future readers if you edited your text to reflect that this won&#39;t work here, though it&#39;s good to know that the possibility is there for other situations."}, {"owner": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "reply_to_user": {"reputation": 697, "user_id": 1792344, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/daafde8b05ba02d5f1ad1bde80ebe071?s=128&d=identicon&r=PG", "display_name": "Tobal", "link": "https://stackoverflow.com/users/1792344/tobal"}, "edited": false, "score": 0, "creation_date": 1527154787, "post_id": 50496461, "comment_id": 88023968, "body": "Oh, and BTW, both g++ and clang++ warned me by default about the fact that <code>sizeof(x)</code> returns the size of a <code>double*</code>, citing <code>-Wsizeof-array-argument</code>. I imagine VS would also mention it, though I have no proof. Read the warnings, kids! (to be clear, this would have helped @Tobal with the original sizeof-problem, too)"}], "tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": false, "score": 1, "last_activity_date": 1527124806, "last_edit_date": 1527124806, "creation_date": 1527105262, "answer_id": 50496461, "question_id": 50494788, "link": "https://stackoverflow.com/questions/50494788/finding-out-relative-error-with-infinite-norm-in-c/50496461#50496461", "title": "Finding out relative error with infinite norm in c++", "body": "<p>I know that this already has an accepted answer but to illustrate a simple point, there is one section of code from the OP that I will focus on.</p>\n\n<blockquote>\n<pre><code>double *subtract_vectors(double x[], double y[]) {\n    for(int k = 0; k &lt;= sizeof(x); k++) x[k] = x[k] - y[k];\n    return x;\n}\n</code></pre>\n</blockquote>\n\n<p>It has to deal with the expression <code>k &lt;= sizeof(x)</code> where <code>x</code> is an array. You are only obtaining the size of a pointer because the fact that when passing arrays into function arguments they end up decaying to pointer behaviors within the function signature when a stack copy is made for the variable <code>x</code>. In order to get the full size of the array one would need to do this instead: <code>sizeof(x) / sizeof(x[0])</code>. This will return to you how many elements that are in the array.</p>\n\n<p>The easiest and quickest way to resolve this bug is by the following:</p>\n\n<pre><code>double *subtract_vectors(double x[], double y[]) {\n    for(int k = 0; k &lt;= (sizeof(x) / sizeof(x[0])) ; k++) x[k] = x[k] - y[k];\n    return x;\n}\n</code></pre>\n\n<p>You can refer to this answer for how and why <code>sizeof(arr) / sizeof(arr[0])</code> works from here: <a href=\"https://stackoverflow.com/questions/33523585/how-do-sizeofarr-sizeofarr0-work\">How do sizeof(arr) / sizeof(arr[0]) work?</a></p>\n\n<p>However this only resolves the issue of finding out how many elements are in the array. And since arrays decay to pointers when being passed as function arguments, the accepted answer already describes how to resolve the issue with getting the proper results:</p>\n\n<blockquote>\n  <p>C++ passes arrays like x[] by reference by default, so your assignment to x[k] changes the array. After calling subtract_vectors(x, y), you are calling the subtracted version every time you call x.</p>\n  \n  <p>Create a new array in subtract_vectors and return that instead.</p>\n</blockquote>\n"}], "owner": {"reputation": 697, "user_id": 1792344, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/daafde8b05ba02d5f1ad1bde80ebe071?s=128&d=identicon&r=PG", "display_name": "Tobal", "link": "https://stackoverflow.com/users/1792344/tobal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 1, "accepted_answer_id": 50494900, "answer_count": 2, "score": 2, "last_activity_date": 1527124806, "creation_date": 1527098781, "question_id": 50494788, "link": "https://stackoverflow.com/questions/50494788/finding-out-relative-error-with-infinite-norm-in-c", "title": "Finding out relative error with infinite norm in c++", "body": "<p>I'm trying to finding out the relative error with tbe infinite norm with two vectors for the Jacobi method and I obtain an unexpected solution, 1. But the exact value is 24 / 25. Here's my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n\nusing namespace std;\n\ndouble infinite_norm(double b[]) {\n    double maximum;\n    for(int i = 0; i &lt; sizeof(b); i++) b[i] = fabs(b[i]);\n    maximum = b[0];\n    for(int i = 1; i &lt; sizeof(b); i++) maximum = fmax(maximum, b[i]);\n    return maximum;\n}\n\ndouble *subtract_vectors(double x[], double y[]) {\n    for(int k = 0; k &lt;= sizeof(x); k++) x[k] = x[k] - y[k];\n    return x;\n}\n\ndouble relative_error(double x[], double y[]) {\n    return infinite_norm(subtract_vectors(x, y)) / infinite_norm(x);\n}\nint main() {\n    static double b[] = {6., 25., -11., 15.};\n    static double c[] = {1., 1., 1., 1.};\n   cout&lt;&lt;relative_error(b, c)&lt;&lt;endl;\n   cout&lt;&lt;24. / 25. &lt;&lt;endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>In relative_error function calculates well <strong>infinite_norm(subtract_vectors(x, y))</strong> and <strong>infinite_norm(x)</strong>, but not the division.</p>\n"}, {"tags": ["html", "c++", "arduino", "wifi", "webpage"], "comments": [{"owner": {"reputation": 353, "user_id": 7274292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/331010930615630/picture?type=large", "display_name": "Md . Sojib Ahmed", "link": "https://stackoverflow.com/users/7274292/md-sojib-ahmed"}, "edited": false, "score": 0, "creation_date": 1527118216, "post_id": 50494710, "comment_id": 88010476, "body": "I think your connection is closed by the server. to send the reminder data you need to connect your arduino with the server again."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9034004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4476f7b5d9d260a7d9c922f62d33ee74?s=128&d=identicon&r=PG&f=1", "display_name": "BenjiProgramming", "link": "https://stackoverflow.com/users/9034004/benjiprogramming"}, "edited": false, "score": 0, "creation_date": 1527178858, "post_id": 50507503, "comment_id": 88040445, "body": "Thanks for the help."}], "tags": [], "owner": {"reputation": 1002, "user_id": 8078317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ldZij.jpg?s=128&g=1", "display_name": "Nitro", "link": "https://stackoverflow.com/users/8078317/nitro"}, "is_accepted": false, "score": 0, "last_activity_date": 1527159171, "creation_date": 1527159171, "answer_id": 50507503, "question_id": 50494710, "link": "https://stackoverflow.com/questions/50494710/how-to-update-title-on-web-page-arduino/50507503#50507503", "title": "How to update title on web page Arduino", "body": "<p>The server.send closes the connection with the requesting system.</p>\n\n<p>To achieve what you are trying to achieve, you will have to do the following.<br>\n1) Make a javascript page, which can connect to a TCP server.<br>\n2) The javascript page should listen to the TCP server for updates, and should put these updates on the browser.<br>\n3) Use WiFiServer on your (I am guessing esp8266) Arduino, to start a server to which the javascript will connect to. <br>\n<a href=\"http://arduino-esp8266.readthedocs.io/en/latest/esp8266wifi/server-examples.html\" rel=\"nofollow noreferrer\">http://arduino-esp8266.readthedocs.io/en/latest/esp8266wifi/server-examples.html</a><br>\n4) Embed the javascript into your Arduino code, so that the full javascript file is sent as a response to a web query.<br>\n5) At the end of the delay, send the updated data via the WiFiServer object.</p>\n\n<p>This is a based on how most dynamic web-pages that I know work. \nI have not tested this, but in my opinion this should work.</p>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 21, "user_id": 9034004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4476f7b5d9d260a7d9c922f62d33ee74?s=128&d=identicon&r=PG&f=1", "display_name": "BenjiProgramming", "link": "https://stackoverflow.com/users/9034004/benjiprogramming"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527159171, "creation_date": 1527098434, "question_id": 50494710, "link": "https://stackoverflow.com/questions/50494710/how-to-update-title-on-web-page-arduino", "title": "How to update title on web page Arduino", "body": "<p>Now I have a problem with my Arduino web page. I would do that the title updates every 5 seconds.</p>\n\n<p>My problem is that this code sents the data  to web page 1 time and its works fine but the other messages will not sented. </p>\n\n<p>My code now is</p>\n\n<pre><code>statusCode = 200;\ncontent = \"Nice to see you whats is your name?\";\nserver.send(statusCode, \"application/json\", content);\n\ndelay(5000);\ncontent = \"Hello, How are you?\";\n\nserver.send(statusCode, \"application/json\", content);\n</code></pre>\n\n<p>Please can somebody show me how to get this to sent to the website again after five seconds.</p>\n\n<pre><code>server.send(statusCode, \"application/json\", \"Hi\");\ndelay(1000);\nserver.send(statusCode, \"application/json\", \"Hello\");\ndelay(1000);\n</code></pre>\n\n<p>why this not works?</p>\n"}, {"tags": ["c++", "c", "linux", "gcc", "msvcrt"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1527098233, "post_id": 50494605, "comment_id": 88002120, "body": "GCC has GNU extensions, yes. Linux has it&#39;s own specific APIs. Not clear what the point of the question though..."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1527098308, "post_id": 50494605, "comment_id": 88002165, "body": "@EugeneSh. I imagine OP&#39;s question is &#39;can you compile glibc source by non-gcc compiler&#39;. I do not know the answer to it. I guess, OP can always try."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1527098513, "post_id": 50494605, "comment_id": 88002248, "body": "All of the gcc extensions have names starting with <code>__</code>, which makes them pretty visible. If your program uses one of these, it might not compile on other compilers, although Clang tries to emulate many of them."}, {"owner": {"reputation": 172, "user_id": 8396910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60cac67c4aa7fc1e07e883d0ba58fb73?s=128&d=identicon&r=PG&f=1", "display_name": "hescobar", "link": "https://stackoverflow.com/users/8396910/hescobar"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1527100949, "post_id": 50494605, "comment_id": 88003468, "body": "@EugeneSh...... the question is pretty specific so I am not sure what the confusion is. I posted an example so that others would know exactly what I meant...I was able to answer my own question now, so I will answer myself on here as well. Basically either of you could have provided this link, <a href=\"https://gcc.gnu.org/onlinedocs/gcc/C-Extensions.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/C-Extensions.html</a>, and answer my question...."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1527101702, "post_id": 50494605, "comment_id": 88003891, "body": "@rici &quot;All of the gcc extensions have names starting with __&quot; - not quite true. There are also language extensions like allowing VLAs (Variable Length Arrays) and nested functions (although that one is C only) and many more, that are not so easily identifiable as extensions. Luckily, if you build your code with, for example, <code>-std=c++14</code> rather than the (unfortunate) default of <code>-std=gnu++14</code> then the extension support goes away."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527102757, "post_id": 50494605, "comment_id": 88004403, "body": "@jesper: that&#39;s true. I meant to type that all of gcc&#39;s extension functions have names of that form, but by the time I noticed I&#39;d missed the word, it was too late to edit. (VLAs aren&#39;t really an extension; they&#39;re an optional feature, at least in C since C99)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1527104947, "post_id": 50494605, "comment_id": 88005515, "body": "I&#39;m voting to close this question as off-topic because the information on GCC extensions is readily available in the GCC documentation."}], "answers": [{"tags": [], "owner": {"reputation": 172, "user_id": 8396910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60cac67c4aa7fc1e07e883d0ba58fb73?s=128&d=identicon&r=PG&f=1", "display_name": "hescobar", "link": "https://stackoverflow.com/users/8396910/hescobar"}, "is_accepted": false, "score": 2, "last_activity_date": 1527100987, "creation_date": 1527100987, "answer_id": 50495374, "question_id": 50494605, "link": "https://stackoverflow.com/questions/50494605/glibc-specific-functions-for-gcc/50495374#50495374", "title": "glibc specific functions for gcc", "body": "<p>Extensions to the C language in gcc can be found here <a href=\"https://gcc.gnu.org/onlinedocs/gcc/C-Extensions.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/C-Extensions.html</a></p>\n"}], "owner": {"reputation": 172, "user_id": 8396910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60cac67c4aa7fc1e07e883d0ba58fb73?s=128&d=identicon&r=PG&f=1", "display_name": "hescobar", "link": "https://stackoverflow.com/users/8396910/hescobar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1527146598, "answer_count": 1, "score": -2, "last_activity_date": 1527100987, "creation_date": 1527098032, "question_id": 50494605, "link": "https://stackoverflow.com/questions/50494605/glibc-specific-functions-for-gcc", "closed_reason": "Not suitable for this site", "title": "glibc specific functions for gcc", "body": "<p>I have read that the Windows C library msvcrt has functions(and other things) that can only be compiled by Microsoft's own compiler. <br>\nIs there anything equivalent to \"Microsoft extensions to c and c++\" in linux/glibc? Thank you.</p>\n"}, {"tags": ["c++", "operator-overloading", "one-definition-rule"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1527097753, "post_id": 50494515, "comment_id": 88001879, "body": "Yes, this is a violation of ODR rule. No, there is no solution rather than stop defining globally visible operator== for the same type in two TUs."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1527097754, "post_id": 50494515, "comment_id": 88001881, "body": "Why can you not merely consolidate the two definitions into one file?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 2, "creation_date": 1527097900, "post_id": 50494515, "comment_id": 88001948, "body": "Why do you even have two <i>different</i> equality operators for the <i>same</i> type?"}, {"owner": {"reputation": 27, "user_id": 1915199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aadb7bfa18f251dce45bf4b01d3d352?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1915199/eugene"}, "edited": false, "score": 0, "creation_date": 1527097907, "post_id": 50494515, "comment_id": 88001956, "body": "@ Nicol Bolas This is absolutely different modules tests that use shared data type but need to compare it in the different manner."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1527098032, "post_id": 50494515, "comment_id": 88002028, "body": "It would seem that you are trying to outsmart a poorly-written library.  Does this library work with multiple types, or only your one <code>TYPE</code>?"}, {"owner": {"reputation": 27, "user_id": 1915199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aadb7bfa18f251dce45bf4b01d3d352?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1915199/eugene"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1527099007, "post_id": 50494515, "comment_id": 88002472, "body": "@DrewDormann I&#39;ve updated my request. This library is &quot;boost test&quot; and I would like to use BOOST_CHECK_EQUAL macro for example."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1527100486, "post_id": 50494515, "comment_id": 88003218, "body": "the way to avoid it is to not provide multiple implementations. Even if you could find a way to workaround the rules of the language you would still be left with the confusing fact of having multiple implementations of the same operator"}, {"owner": {"reputation": 27, "user_id": 1915199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aadb7bfa18f251dce45bf4b01d3d352?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1915199/eugene"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1527153854, "post_id": 50494515, "comment_id": 88023333, "body": "@user463035818 Yes, I agree with you. I think it will be mach more bedder way to provide functor ussage mechanism but I can&#39;t change test framework implementation. As a workaround I use next solution: I defined a similar comparison macro and moved operator in anonimous namespace. This works but sometimes similar macro definition is not trivial. Also I always should keep it in mind I need to use my own macro. If You put your comment to answers I&#39;ll apply it."}], "owner": {"reputation": 27, "user_id": 1915199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aadb7bfa18f251dce45bf4b01d3d352?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1915199/eugene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527098804, "creation_date": 1527097649, "last_edit_date": 1592644375, "question_id": 50494515, "link": "https://stackoverflow.com/questions/50494515/how-to-avoid-c-odr-violation-in-case-of-multiple-operator-overloads-for-the-sa", "title": "How to avoid C++ ODR violation in case of multiple operator overloads for the same type", "body": "<p>I have a problem with ODR violation in case of multiple implementation of an operator for the same type in different translation units but in the same build target.</p>\n<h3>Example:</h3>\n<p>Module Test.exe is being compiled with Test1.cpp and Test2.cpp. Which are use common type <strong>TYPE</strong></p>\n<pre><code>struct TYPE\n{\n   FieldType1 Field1\n   ...\n   FieldTypeN FieldN\n};\n</code></pre>\n<p>Test1.cpp and Test2.cpp implement specific <strong>operator==()</strong> for <strong>TYPE</strong> to compare <strong>TYPE</strong> only in terms of some values. For example I need to check only <strong>Id</strong> field and don't want to fill all another fields to keep test short and clear. The same for another operators like <strong>operator&lt;&lt;()</strong></p>\n<p>Both test files uses external test library(BOOST TEST, hippomock, etc) which uses <strong>operator==()</strong> for types comparison. When I try to build test I have an error about multiple definition (or just random linked function in case of MSVC).</p>\n<p>I've tried to place each operator into the separate namespace and then type</p>\n<pre><code>using namespace::operator==;\n</code></pre>\n<p>inside *.cpp file but it doesn't help.</p>\n<p>Is it possible to avoid this issue?</p>\n"}, {"tags": ["c++", "visual-studio-2013"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1527098010, "post_id": 50494493, "comment_id": 88002010, "body": "winsock2.h is unusual, it must be #included <i>before</i> windows.h"}, {"owner": {"reputation": 444, "user_id": 4730778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/698ec16b61164c94aee6a20da396f0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tawm", "link": "https://stackoverflow.com/users/4730778/tawm"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1527098239, "post_id": 50494493, "comment_id": 88002123, "body": "I <code>#include &lt;Windows.h&gt;</code> in my main .cpp file and have tried to <code>#include &lt;WinSock2.h&gt;</code> just above that statement, but it didn&#39;t fix anything."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1527101124, "post_id": 50494493, "comment_id": 88003560, "body": "In that case please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1527102513, "post_id": 50494493, "comment_id": 88004278, "body": "The problem is likely because <code>#include &lt;windows.h&gt;</code> pulls in the original <code>winsock.h</code> stuff which isn&#39;t compatible with <code>winsock2.h</code>. The usual solution is to use <code>#define WIN32_LEAN_AND_MEAN</code> before the <code>#include &lt;windows.h&gt;</code> and then manually include <code>winsock2.h</code> after that."}], "answers": [{"tags": [], "owner": {"reputation": 444, "user_id": 4730778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/698ec16b61164c94aee6a20da396f0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tawm", "link": "https://stackoverflow.com/users/4730778/tawm"}, "is_accepted": true, "score": 0, "last_activity_date": 1527698853, "creation_date": 1527698853, "answer_id": 50609826, "question_id": 50494493, "link": "https://stackoverflow.com/questions/50494493/vc-c2011-redefinition-errors-unused-header-files/50609826#50609826", "title": "VC++ C2011 redefinition errors - unused header files", "body": "<p>The issue seems to have mostly been based on the horrible file structure of the original large project.\nTrying to create a new project within the solution to replicate another project as a GUI instead of Console project meant that the compilation of the project was doubling up on many files.</p>\n\n<p>I found another post (can't find it right now) that stated that when a Visual Studio solution compiles, all of the project files are combined, much like all the <code>#include</code> statements in a <code>.c/.cpp/.h</code> file really just copy all of those files into the file which <code>#included</code> them.</p>\n\n<p>My solution was to create a copy of the large project (for backup purposes), and in the copied project, remove the original Console project and only include the UI Project. Files are not longer doubling up because they don't exist in both projects anymore, just the one still existing in the solution.</p>\n"}], "owner": {"reputation": 444, "user_id": 4730778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/698ec16b61164c94aee6a20da396f0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tawm", "link": "https://stackoverflow.com/users/4730778/tawm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 50609826, "answer_count": 1, "score": -1, "last_activity_date": 1527698853, "creation_date": 1527097547, "question_id": 50494493, "link": "https://stackoverflow.com/questions/50494493/vc-c2011-redefinition-errors-unused-header-files", "title": "VC++ C2011 redefinition errors - unused header files", "body": "<p>I am working with a large console application. The solution contains 5 projects.\nI am adding a 6th project to replace one of the existing projects to allow for the use of a GUI.</p>\n\n<p>I am getting many compiler C2011 errors regarding type redefinition. In particular, they are <code>'struct' type redefinitions</code> or <code>'[function]: redefinition; different linkage</code>. They come from the header files <code>ws2def.h</code> and <code>winsock2.h</code>.</p>\n\n<p>I've been searching the entire project and the entire solution for where these are included, but I don't see any <code>#include &lt;ws2def.h&gt;</code> or <code>#include &lt;winsock2.h&gt;</code> statements, nor anything to indicate they are used.</p>\n\n<p>However, there are <code>External Dependencies</code> folders/filters included in both the project I'm replacing, and my new project. Both <code>ws2def.h</code> and <code>WinSock2.h</code> exist in those filters. I wouldn't think that having the same file included in separate projects under one solution would cause these issues. Also, I'm getting these errors when building just my new project, meaning it shouldn't see the old project anyway.</p>\n\n<p>Based on the information I've given, are you able to see where my problem may lie? Is it the case that these header files <strong>must</strong> be <code>#included</code> somewhere within the project and I'm just not seeing it? I've considered deleting both the header files from the <code>External Dependencies</code> filter because it seems I don't need them. Is there a different, common header file that also includes these header files so that they wouldn't show up in a <code>CTRL-Find</code>?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "pip"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1527097378, "post_id": 50494411, "comment_id": 88001722, "body": "Why double backslashes in the command?  That looks like a mistake was made assuming a non-C++ entity requires C++ string-literal syntax."}, {"owner": {"reputation": 427, "user_id": 8925572, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1803343869896528/picture?type=large", "display_name": "UWGOOSE", "link": "https://stackoverflow.com/users/8925572/uwgoose"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1527097605, "post_id": 50494411, "comment_id": 88001813, "body": "@PaulMcKenzie I only did the <code>pip install python-ldap</code> command I&#39;m assuming they were the ones who put double backslashes ?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1527097759, "post_id": 50494411, "comment_id": 88001882, "body": "Maybe.  When I see errors like that, it looks like double slashes were placed in a string, assuming that whatever reads that string uses the same rules C++ has for string-literals."}, {"owner": {"reputation": 427, "user_id": 8925572, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1803343869896528/picture?type=large", "display_name": "UWGOOSE", "link": "https://stackoverflow.com/users/8925572/uwgoose"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1527097946, "post_id": 50494411, "comment_id": 88001979, "body": "@PaulMcKenzie Do you know how I should fix this issue? I tried to run the install command on the native tools command promp for vs 2017 too and received the same error"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1527098004, "post_id": 50494411, "comment_id": 88002002, "body": "I don&#39;t know where to fix this.  Just letting you know what could be the issue.  Try and search your toolchain for weird looking double-slashed strings like that."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 8379653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-y5FV4s1XSrs/AAAAAAAAAAI/AAAAAAAAAlM/JkYQSc2T418/photo.jpg?sz=128", "display_name": "gomathi subramanian", "link": "https://stackoverflow.com/users/8379653/gomathi-subramanian"}, "edited": false, "score": 2, "creation_date": 1567858735, "post_id": 50495138, "comment_id": 102096000, "body": "Is it safe to install the unofficial windows library"}], "tags": [], "owner": {"reputation": 427, "user_id": 8925572, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1803343869896528/picture?type=large", "display_name": "UWGOOSE", "link": "https://stackoverflow.com/users/8925572/uwgoose"}, "is_accepted": true, "score": 3, "last_activity_date": 1527100102, "creation_date": 1527100102, "answer_id": 50495138, "question_id": 50494411, "link": "https://stackoverflow.com/questions/50494411/error-command-c-visual-studio-2017-community-vc-tools-msvc-14-14-2642/50495138#50495138", "title": "error: command &#39;C:\\\\ Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.14.26428\\\\bin\\\\HostX86\\\\x64\\\\cl.exe&#39; failed with exit status 2", "body": "<p>There doesn't seem to be a valid solution for this error but one workaround is to install the windows binary package from <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/#python-ldap\" rel=\"nofollow noreferrer\">https://www.lfd.uci.edu/~gohlke/pythonlibs/#python-ldap</a></p>\n"}, {"tags": [], "owner": {"reputation": 1102, "user_id": 1710956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba96169513e96916e3ddc6e6fc9919a?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/1710956/ryan"}, "is_accepted": false, "score": 1, "last_activity_date": 1537569614, "last_edit_date": 1537569614, "creation_date": 1537567960, "answer_id": 52451604, "question_id": 50494411, "link": "https://stackoverflow.com/questions/50494411/error-command-c-visual-studio-2017-community-vc-tools-msvc-14-14-2642/52451604#52451604", "title": "error: command &#39;C:\\\\ Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.14.26428\\\\bin\\\\HostX86\\\\x64\\\\cl.exe&#39; failed with exit status 2", "body": "<p>In my case, I had to copy or link (using <a href=\"http://schinagl.priv.at/nt/hardlinkshellext/linkshellextension.html\" rel=\"nofollow noreferrer\">link shell extension</a>) the x64 version of \"C Connector\" to the x86 folder.</p>\n\n<h3>If you can't find the x64 C connector...</h3>\n\n<ol>\n<li>Download <code>mysql-installer-web-community-8.0.12.0.msi</code> from their website:\n<a href=\"https://dev.mysql.com/downloads/installer/\" rel=\"nofollow noreferrer\">https://dev.mysql.com/downloads/installer/</a></li>\n<li>Run the Installer, and click the <code>Add</code> button on the right, then locate the <code>Connector C 6.1 x64</code></li>\n</ol>\n\n<p>The C++ Connector has C compatible header files, but hard-linking to it does not work, as explained here: <a href=\"https://dev.mysql.com/downloads/connector/c/\" rel=\"nofollow noreferrer\">https://dev.mysql.com/downloads/connector/c/</a></p>\n\n<p>You cannot install the x86 version alongside the x64 version. The installer does not permit this.</p>\n\n<h3>Otherwise, Hard-Link the x64 version</h3>\n\n<ol>\n<li>Install <a href=\"http://schinagl.priv.at/nt/hardlinkshellext/linkshellextension.html\" rel=\"nofollow noreferrer\">link shell extension</a>.</li>\n<li>Navigate to \"C:\\Program Files\\MySQL\\\" then right click on \"MySQL Connector C 6.1\" and click <code>Pick Link Source</code></li>\n<li>Navigate to \"C:\\Program Files (x86)\\MySQL\\\" and <code>Drop Link As...</code> > <code>Junction</code>\n\n<ul>\n<li>A Junction is a duplicate reference in the file system to a folder. Creating a second junction reclassifies the original folder a junction as well, but they are both authentic references to the same folder, and so, unlike symbolic links, they will work with scripts, because they are real, and are implemented on the file system level.</li>\n</ul></li>\n<li><p>Then, if the connector you have installed is a different version number and you want to try to force it to work with a non-compatible script, rename it to match the folder mentioned in the error message. For example...</p>\n\n<ul>\n<li>C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\VC\\Tools\\MSVC\\14.15.26726\n\\bin\\HostX86\\x64\\cl.exe /c /nologo /Ox /W3 /GL /DNDEBUG /MD -Dversion_info=(1,3,13,'final',0) -D__version__=1.3.13 \"-I <strong><code>C:\\Program Files (x86)\\MySQL\\MySQL Connector C 6.1</code></strong> \\include\" \"-Ic:\\program files\\python37\\include\" \"-Ic:\\program files\\python37\\include\" \"-IC:\\Program Files (x86)\\Microsoft Visu...</li>\n</ul></li>\n</ol>\n\n<p>Crappy pip code failing to pass variables from the system environment :(</p>\n"}, {"comments": [{"owner": {"reputation": 3063, "user_id": 3040893, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/JaV1X.jpg?s=128&g=1", "display_name": "smoothumut", "link": "https://stackoverflow.com/users/3040893/smoothumut"}, "edited": false, "score": 1, "creation_date": 1607355206, "post_id": 55493847, "comment_id": 115239426, "body": "thank you sooo much. I had been at the point where I was about to lose all my home"}, {"owner": {"reputation": 322, "user_id": 14266189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oyuas.jpg?s=128&g=1", "display_name": "nihilok", "link": "https://stackoverflow.com/users/14266189/nihilok"}, "edited": false, "score": 0, "creation_date": 1612098584, "post_id": 55493847, "comment_id": 116654819, "body": "didn&#39;t work for me, same error even after restarting"}, {"owner": {"reputation": 1739, "user_id": 7454706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qXrkz.jpg?s=128&g=1", "display_name": "ASHu2", "link": "https://stackoverflow.com/users/7454706/ashu2"}, "edited": false, "score": 0, "creation_date": 1612168188, "post_id": 55493847, "comment_id": 116672109, "body": "if you can provide your pc specs and windows version details, may be I can point you towards something more concrete"}], "tags": [], "owner": {"reputation": 1739, "user_id": 7454706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qXrkz.jpg?s=128&g=1", "display_name": "ASHu2", "link": "https://stackoverflow.com/users/7454706/ashu2"}, "is_accepted": false, "score": 0, "last_activity_date": 1554290127, "creation_date": 1554290127, "answer_id": 55493847, "question_id": 50494411, "link": "https://stackoverflow.com/questions/50494411/error-command-c-visual-studio-2017-community-vc-tools-msvc-14-14-2642/55493847#55493847", "title": "error: command &#39;C:\\\\ Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.14.26428\\\\bin\\\\HostX86\\\\x64\\\\cl.exe&#39; failed with exit status 2", "body": "<p>Install Visual C++ 2015 Build Tools from <a href=\"https://go.microsoft.com/fwlink/?LinkId=691126\" rel=\"nofollow noreferrer\">https://go.microsoft.com/fwlink/?LinkId=691126</a> with default selection.</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 8445557, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tfhfU6yQ8ks/AAAAAAAAAAI/AAAAAAAAAAk/rKGtC5hxhVA/photo.jpg?sz=128", "display_name": "Stefano G.", "link": "https://stackoverflow.com/users/8445557/stefano-g"}, "edited": false, "score": 0, "creation_date": 1607353756, "post_id": 60170231, "comment_id": 115238653, "body": "I&#39;ve the same issue: -  src/spt_setup.c(23): warning C4273: &#39;__p__environ&#39;  but I&#39;ve Python 64bit: - Python 3.7.2 (tags/v3.7.2:9a3ffc0492, Dec 23 2018, 23:09:28) [MSC v.1916 64 bit (AMD64)] on win32 and I&#39;ve - Visual Studio Builds tools 2019 with MS Visual C++ 2013, 2015-2019 On Windows 10Pro x64."}], "tags": [], "owner": {"reputation": 63, "user_id": 6469276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13400d86b06e83899df2af31e7a2bafa?s=128&d=identicon&r=PG&f=1", "display_name": "Yasiru", "link": "https://stackoverflow.com/users/6469276/yasiru"}, "is_accepted": false, "score": 0, "last_activity_date": 1581428593, "creation_date": 1581428593, "answer_id": 60170231, "question_id": 50494411, "link": "https://stackoverflow.com/questions/50494411/error-command-c-visual-studio-2017-community-vc-tools-msvc-14-14-2642/60170231#60170231", "title": "error: command &#39;C:\\\\ Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.14.26428\\\\bin\\\\HostX86\\\\x64\\\\cl.exe&#39; failed with exit status 2", "body": "<p>I had a similar issue. </p>\n\n<p>I had installed a 32-bit python interpreter from <a href=\"https://www.python.org/downloads/windows/\" rel=\"nofollow noreferrer\">https://www.python.org/downloads/windows/</a> mistakenly in my 64-bit windows machine.</p>\n\n<p>Then I downloaded the correct 64-bit interpreter setup and installed it. Then I pointed the Pycharm interpreter path to it. </p>\n\n<p>Then my issue was solved. I hope this will help you...</p>\n"}], "owner": {"reputation": 427, "user_id": 8925572, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1803343869896528/picture?type=large", "display_name": "UWGOOSE", "link": "https://stackoverflow.com/users/8925572/uwgoose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57337, "favorite_count": 0, "accepted_answer_id": 50495138, "answer_count": 4, "score": 4, "last_activity_date": 1581428593, "creation_date": 1527097180, "question_id": 50494411, "link": "https://stackoverflow.com/questions/50494411/error-command-c-visual-studio-2017-community-vc-tools-msvc-14-14-2642", "title": "error: command &#39;C:\\\\ Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.14.26428\\\\bin\\\\HostX86\\\\x64\\\\cl.exe&#39; failed with exit status 2", "body": "<p>Hi so I was trying to <code>pip install python-ldap</code> using my git bash but at first it told me that i don't have <code>cl.exe</code> so i downloaded the visual studio C++ pack now it's showing this error </p>\n\n<pre><code> error: command 'C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.14.26428\\\\bin\\\\HostX86\\\\x64\\\\cl.exe' failed with exit status 2\n</code></pre>\n\n<p>I never coded with C++ so I'm not sure what the error is. I downloaded the CLI tools for C++ too and I don't think it's because the <code>cl.exe</code> isn't in the path since it found it. Any insights ??</p>\n"}, {"tags": ["c++", "class", "operator-overloading"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9610032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a642595d809f6b4b136ad7586a2232a?s=128&d=identicon&r=PG&f=1", "display_name": "InputLag", "link": "https://stackoverflow.com/users/9610032/inputlag"}, "edited": false, "score": 0, "creation_date": 1527099299, "post_id": 50494531, "comment_id": 88002606, "body": "Thank you!! The area equation I have works now!! I&#39;ve upvoted but I&#39;m pretty sure it doesn&#39;t really matter given my reputation. You&#39;re awesome (:"}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 1, "last_activity_date": 1527098675, "last_edit_date": 1527098675, "creation_date": 1527097723, "answer_id": 50494531, "question_id": 50494386, "link": "https://stackoverflow.com/questions/50494386/how-to-plug-a-value-entered-in-an-overloaded-operator-into-a-setter/50494531#50494531", "title": "How to plug a value entered in an overloaded &gt;&gt; operator into a setter", "body": "<p><strong>You need to modify <code>inSides</code></strong>.</p>\n\n<p>You get the input you need to construct a <code>Rectangle</code> object, but you never do anything with it! Try this (making some assumptions about your <code>Rectangle</code> class...):</p>\n\n<pre><code>istream&amp; operator &gt;&gt; (istream&amp; ins, Rectangle&amp; inSides)\n{\n    double len, wid;\n    ins &gt;&gt; len &gt;&gt; wid;\n\n    inSides = Rectangle(len, wid);\n    //or if you haven't made a constructor/assignment operator...\n    inSides._length = len;\n    inSides._width = wid;\n\n    return ins;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9610032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a642595d809f6b4b136ad7586a2232a?s=128&d=identicon&r=PG&f=1", "display_name": "InputLag", "link": "https://stackoverflow.com/users/9610032/inputlag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 50494531, "answer_count": 1, "score": 0, "last_activity_date": 1527099352, "creation_date": 1527097096, "last_edit_date": 1527099352, "question_id": 50494386, "link": "https://stackoverflow.com/questions/50494386/how-to-plug-a-value-entered-in-an-overloaded-operator-into-a-setter", "title": "How to plug a value entered in an overloaded &gt;&gt; operator into a setter", "body": "<p>I really really apologize if this has already been asked. I'm sincerely trying to become more literate with the site, but still struggle with specific questions. Anyways, I've figured out how to overload the \">>\" operator, but I'm now struggling with how to set the value determined in that function as a variable (Sorry if none of this makes sense) </p>\n\n<p>Here's what I have for the overloaded >> function</p>\n\n<pre><code>istream&amp; operator &gt;&gt; (istream&amp; ins, Rectangle&amp; inSides)\n{\ndouble insSide1, insSide2;\n\nins &gt;&gt; insSide1;\n\ninsSide1 = inSides._length;\n\nins &gt;&gt; insSide2;\n\ninsSide2 = inSides._width;\n\nreturn ins;\n}\n</code></pre>\n\n<p>Here's what I have so far in my main()</p>\n\n<pre><code>Rectangle bothOpp;\n{\n        cin &gt;&gt; bothOpp;\n\n        bothOpp.getLength();\n        bothOpp.getWidth();\n\n        bothOpp.print();\n\n}\n</code></pre>\n\n<p>I guess what I'm asking is how do I set the user's input to be the value defined in the setter? Thank you so much for your time (:</p>\n\n<p>Oh &amp; if need be I can upload the setter function I have created, I just didn't want to bombard you guys.</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 12, "creation_date": 1527096854, "post_id": 50494286, "comment_id": 88001458, "body": "This definitely smells like a poor design..."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 3, "creation_date": 1527096870, "post_id": 50494286, "comment_id": 88001469, "body": "Why in the world can&#39;t an invalid <code>Member</code> object be destructed? This makes no sense IMO, what&#39;s the reasoning behind this decision?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1527097009, "post_id": 50494286, "comment_id": 88001534, "body": "@CoryKramer, or buggy implementation of some policy."}, {"owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "edited": false, "score": 0, "creation_date": 1527097073, "post_id": 50494286, "comment_id": 88001559, "body": "@Dimaleks If you could explain in more concrete terms why this design is the way it is, we might be able to help better. (See also: XY problem.)"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1527097145, "post_id": 50494286, "comment_id": 88001591, "body": "&quot;Invalidates the members so the destructors fail&quot;?  Is <code>important_cleanup()</code> freeing memory or resources that are associated with <code>a</code> and <code>b</code> instead of letting them clean up for themselves?"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1527097199, "post_id": 50494286, "comment_id": 88001621, "body": "Perhaps make <code>a</code> and <code>b</code> <code>std::unique_ptr</code>s? That way <code>important_cleanup()</code> can assure their destruction by replacing <code>a</code> and <code>b</code> with <code>nullptr</code>s."}, {"owner": {"reputation": 428, "user_id": 3535276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ae9105201d2d13e363c4da3f68219d?s=128&d=identicon&r=PG&f=1", "display_name": "Dimaleks", "link": "https://stackoverflow.com/users/3535276/dimaleks"}, "edited": false, "score": 0, "creation_date": 1527097201, "post_id": 50494286, "comment_id": 88001625, "body": "In concrete terms, <code>a</code> and <code>b</code> are CUDA arrays, that have their own destructors that free the memory nicely. And <code>important_cleanup()</code> has to destroy CUDA context completely"}, {"owner": {"reputation": 428, "user_id": 3535276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ae9105201d2d13e363c4da3f68219d?s=128&d=identicon&r=PG&f=1", "display_name": "Dimaleks", "link": "https://stackoverflow.com/users/3535276/dimaleks"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1527097847, "post_id": 50494286, "comment_id": 88001926, "body": "@CoryKramer What would be an alternative design? Basically that is what I&#39;m looking for! =)"}], "answers": [{"comments": [{"owner": {"reputation": 428, "user_id": 3535276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ae9105201d2d13e363c4da3f68219d?s=128&d=identicon&r=PG&f=1", "display_name": "Dimaleks", "link": "https://stackoverflow.com/users/3535276/dimaleks"}, "edited": false, "score": 0, "creation_date": 1527097321, "post_id": 50494408, "comment_id": 88001686, "body": "Right, I like that much more than a cleanup member, thanks!"}, {"owner": {"reputation": 428, "user_id": 3535276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ae9105201d2d13e363c4da3f68219d?s=128&d=identicon&r=PG&f=1", "display_name": "Dimaleks", "link": "https://stackoverflow.com/users/3535276/dimaleks"}, "edited": false, "score": 0, "creation_date": 1527097745, "post_id": 50494408, "comment_id": 88001874, "body": "Well, I don&#39;t like the second variant, because it seems very error-prone, that&#39;s what I wrote in the text."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 428, "user_id": 3535276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ae9105201d2d13e363c4da3f68219d?s=128&d=identicon&r=PG&f=1", "display_name": "Dimaleks", "link": "https://stackoverflow.com/users/3535276/dimaleks"}, "edited": false, "score": 0, "creation_date": 1527098162, "post_id": 50494408, "comment_id": 88002082, "body": "@Dimaleks Yes, you are right. Your question stated that you were seeking an alternative. Updated to reflect that"}], "tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 4, "last_activity_date": 1527098629, "last_edit_date": 1527098629, "creation_date": 1527097167, "answer_id": 50494408, "question_id": 50494286, "link": "https://stackoverflow.com/questions/50494286/how-to-execute-some-code-in-destructor-after-member-are-destroyed/50494408#50494408", "title": "How to execute some code in destructor *after* member are destroyed", "body": "<p>Relying on destruction order really isn't error-prone, assuming you also put a comment stating that the member order matters for the specific member. It's put in the language for a reason, so it's totally fine to use it.</p>\n\n<p>That said, if you are uncomfortable relying on it, <a href=\"http://en.cppreference.com/w/cpp/language/destructor#Destruction_sequence\" rel=\"nofollow noreferrer\">destructors of members are called before those of the base classes,</a> so you can use a base class to do this:</p>\n\n<pre><code>class ManagerCleanup {\npublic:\n    ~ManagerCleanup() {\n        important_cleanup();\n    }\n\nprivate:\n    some_native_resource resource;\n};\n\n// Might as well inherit privately\nclass Manager : private ManagerCleanup\n{\n    Member a, b;\n};\n</code></pre>\n\n<p>Note that it's more idiomatic if you wrap the resource:</p>\n\n<pre><code>// Note: this could probably be a std::unique_ptr. std::unique_ptr can\n// manage arbitrary resources, not just pointers.\nclass ItemRequiringCleanup {\npublic:\n    // Ensure you implement/disable copy/move operations appropriately\n\n    ~ItemRequiringCleanup() {\n        important_cleanup();\n    }\n\nprivate:\n    some_native_resource resource;\n};\n\nclass ManagerCleanup {\nprivate: // or protected:\n    ItemRequiringCleanup resource;\n};\n\n// Might as well inherit privately\nclass Manager : private ManagerCleanup\n{\n    Member a, b;\n};\n</code></pre>\n"}], "owner": {"reputation": 428, "user_id": 3535276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6ae9105201d2d13e363c4da3f68219d?s=128&d=identicon&r=PG&f=1", "display_name": "Dimaleks", "link": "https://stackoverflow.com/users/3535276/dimaleks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 50494408, "answer_count": 1, "score": 4, "last_activity_date": 1527098629, "creation_date": 1527096759, "question_id": 50494286, "link": "https://stackoverflow.com/questions/50494286/how-to-execute-some-code-in-destructor-after-member-are-destroyed", "title": "How to execute some code in destructor *after* member are destroyed", "body": "<p>I have a \"manager\" class that has to do certain clean-up <strong>after</strong> the members are destroyed:</p>\n\n<pre><code>class Manager\n{\n    Member a, b;\n\n    ~Manager()\n    {\n        // this code will be executed BEFORE the a and b destructors\n        important_cleanup();\n    }\n};\n</code></pre>\n\n<p>The problem here is that <code>important_cleanup()</code> invalidates my variables <code>a</code> and <code>b</code>, so their destructors fail.</p>\n\n<p>Is there a nice way around the problem?</p>\n\n<p><strong>PS</strong> I know I can define some kind of clenup member, and make it be the first created member of <code>Manager</code>, but this looks quite ugly and makes things order-dependent...</p>\n"}, {"tags": ["c++", "qt", "networking", "udp", "ssdp"], "comments": [{"owner": {"reputation": 669, "user_id": 509665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa32d53dfcffd4589da949d822aa0f93?s=128&d=identicon&r=PG", "display_name": "Wilco", "link": "https://stackoverflow.com/users/509665/wilco"}, "edited": false, "score": 0, "creation_date": 1585300446, "post_id": 50494278, "comment_id": 107716212, "body": "The echo is probably because you are binding to listen on port 1900, so when you send a broadcast to everyone on port 1900 the router sends it straight back to you and you receive it. Whether this is also interfering with actual responses from other devices on the network, possibly?"}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 3203046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcd3cfd5439872769d5fdfad4719e275?s=128&d=identicon&r=PG&f=1", "display_name": "jsseu", "link": "https://stackoverflow.com/users/3203046/jsseu"}, "is_accepted": false, "score": 1, "last_activity_date": 1549297378, "creation_date": 1549297378, "answer_id": 54520269, "question_id": 50494278, "link": "https://stackoverflow.com/questions/50494278/qt-ssdp-with-qudpsocket-works-on-rare-occasions/54520269#54520269", "title": "Qt: SSDP with QUdpSocket works on rare occasions", "body": "<p>I ran into similar problems on Mac but not the same code on iOS.\nDid you managed to fix it? How?</p>\n\n<p>Well, the only way I had to get the responses is binding to a different port than 1900 but I don't know if is the correct way.\nI found this by using wireshark, for example Google Chrome uses \"random\" port as a source port when sending a M-SEARCH and 1900 as destination.</p>\n\n<p>By setting the bind port to 1900 I was only able to get the datagrams sent to \"239.255.255.250\" for example other software M-SEARCH or devices NOTIFY messages.</p>\n\n<p>This is supossed to make your code work:</p>\n\n<pre><code>auto ok = m_sock-&gt;bind(QHostAddress::AnyIPv4, 56123, QUdpSocket::ShareAddress);\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 7402183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1f450f6c0d7a3d0c0f6af26e848428c6?s=128&d=identicon&r=PG", "display_name": "AAS.N", "link": "https://stackoverflow.com/users/7402183/aas-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549297378, "creation_date": 1527096729, "question_id": 50494278, "link": "https://stackoverflow.com/questions/50494278/qt-ssdp-with-qudpsocket-works-on-rare-occasions", "title": "Qt: SSDP with QUdpSocket works on rare occasions", "body": "<p>This one has been driving me crazy for a while. Since I have never done any network related code, I am unable to conclude the results of this experiment.</p>\n\n<p>I am provided with information about a server that broadcasts relevant information using SSDP. I was given the IP and port as per the standard. I was also given the query and search target I need to use on the receiver side. I am using my latest iteration for this example in which I decided to use a singleton class that manages the discovery. The true ST string I am using is one I was provided as well, disregard the one below...</p>\n\n<blockquote>\n  <p><strong>DiscoveryManager.h</strong></p>\n</blockquote>\n\n<pre><code>class DiscoveryManager : public QObject\n{\n\nprivate:\n    DiscoveryManager( QObject *parent=0 );\npublic:\n    ~DiscoveryManager();\n\n    // Public Accessor for the singleton instance of the class\n    static DiscoveryManager* Instance();\n\n    void Discover();\n\npublic:\n    void readPending();\n\nprivate:\n    // Singleton instance of the class\n    static DiscoveryManager* _instance;\n    QUdpSocket* socket;\n};\n</code></pre>\n\n<blockquote>\n  <p><strong>DiscoveryManager.cpp</strong></p>\n</blockquote>\n\n<pre><code>// Definition of singleton instance\nDiscoveryManager* DiscoveryManager::_instance;\n\n// Network Parameters\nquint16 port = 1900;\nQHostAddress groupAddress = QHostAddress(\"239.255.255.250\");\n\nDiscoveryManager::DiscoveryManager(QObject *parent)\n    : QObject(parent)   \n    , socket( nullptr )\n{\n    socket = new QUdpSocket(this);\n    auto ok = m_sock-&gt;bind(QHostAddress::AnyIPv4, port, QUdpSocket::ShareAddress);\n    if (!ok) \n    {\n        printf(\"Bind Error\\n\");\n        return;\n    }\n\n    ok = socket-&gt;joinMulticastGroup(groupAddress);\n    if (!ok) {\n        printf(\"Join Multicast Group Failed\\n\");\n        return;\n    }\n\n    connect(socket, SIGNAL(readyRead()), this, SLOT(readPending()));\n}\n\nDiscoveryManager* DiscoveryManager::Instance()\n{\n  if(_instance == nullptr)\n  {\n    _instance = new DiscoveryManager();\n  }\n  return _instance;\n}\n\nvoid\nDiscoveryManager::startDiscovery()\n{\n    QByteArray message(\"M-SEARCH * HTTP/1.1\\r\\n\"        \\\n                       \"HOST: 239.255.255.250:1900\\r\\n\" \\\n                       \"MAN: \\\"ssdp:discover\\\"\\r\\n\" \\\n                       \"MX: 5\\r\\n\" \\\n                       \"ST: ***:******-****-***:*******:***********:*\\r\\n\" \\\n                       \"\\r\\n\");\n\n    auto writeOk = socket-&gt;writeDatagram(message.data(), groupAddress, port);\n    if (writeOk == -1) {\n        printf(\"Writing Datagram failed\\n\");\n        return;\n    }\n}\n\n\nvoid\nDiscoveryManager::readPending()\n{\n    while (socket-&gt;hasPendingDatagrams()) {\n        QByteArray reply;\n        reply.resize(socket-&gt;pendingDatagramSize());\n        socket-&gt;readDatagram(reply.data(), reply.size());\n\n        // ... Parse Text Here ...\n    }\n}\n</code></pre>\n\n<p><strong>Results:</strong> 90% of the time, this fails. When I attempt to print the messages, the response I get is always an echo of what I queried. Regardless of how long I leave it, the correct response never arrives. On the other hand, when the conditions are \"just right\", the discovery is flawless and always returns a result immediately.</p>\n\n<p><strong>Expected Results:</strong> I expect to see a server response with more information such as the location.</p>\n\n<p><strong>Considerations:</strong></p>\n\n<ol>\n<li>Since I have difficulty understanding why network related code fail, I cannot conclude from the results whether my receiver code is not correct, or whether the server was not set up correctly. What could be an indicator for me to use? Can things such as VPNs set up in the space affect this? Does it matter if the server is running on my local machine?</li>\n<li>I have gone through plenty of iterations where I tried using different connection flags, destroying and resetting the object or socket before attempting again, and even executed a loop that would query over 5000 times to understand the behavior.</li>\n<li>If this code does not look like one, I have tried reproducing the exact same code and order provided by Qt documentation.</li>\n</ol>\n"}, {"tags": ["c++", "string", "bits"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 8215595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPO1ViKY98I/AAAAAAAAAAI/AAAAAAAABoo/HMq-U7JYO4M/photo.jpg?sz=128", "display_name": "CsgoTalks Com", "link": "https://stackoverflow.com/users/8215595/csgotalks-com"}, "edited": false, "score": 0, "creation_date": 1527097288, "post_id": 50494394, "comment_id": 88001671, "body": "I edited str1 and str2. Can you please edit them also so it&#39;s really clear for the people who might use this later on? Thanks."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 95, "user_id": 8215595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPO1ViKY98I/AAAAAAAAAAI/AAAAAAAABoo/HMq-U7JYO4M/photo.jpg?sz=128", "display_name": "CsgoTalks Com", "link": "https://stackoverflow.com/users/8215595/csgotalks-com"}, "edited": false, "score": 0, "creation_date": 1527097356, "post_id": 50494394, "comment_id": 88001703, "body": "@CsgoTalksCom Done."}, {"owner": {"reputation": 95, "user_id": 8215595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPO1ViKY98I/AAAAAAAAAAI/AAAAAAAABoo/HMq-U7JYO4M/photo.jpg?sz=128", "display_name": "CsgoTalks Com", "link": "https://stackoverflow.com/users/8215595/csgotalks-com"}, "edited": false, "score": 0, "creation_date": 1527097762, "post_id": 50494394, "comment_id": 88001883, "body": "I&#39;m getting some &quot;not a member of&quot; errors. Am I missing any library?Already have these: iostream, algorithm, fstream, iomanip, sstream, string, cmath, algorithm, iterator."}, {"owner": {"reputation": 623, "user_id": 2008273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VTTvj.jpg?s=128&g=1", "display_name": "ricco19", "link": "https://stackoverflow.com/users/2008273/ricco19"}, "edited": false, "score": 0, "creation_date": 1527097929, "post_id": 50494394, "comment_id": 88001969, "body": "<code>std::bitset</code> via <code>&lt;bitset&gt;</code>"}, {"owner": {"reputation": 95, "user_id": 8215595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPO1ViKY98I/AAAAAAAAAAI/AAAAAAAABoo/HMq-U7JYO4M/photo.jpg?sz=128", "display_name": "CsgoTalks Com", "link": "https://stackoverflow.com/users/8215595/csgotalks-com"}, "edited": false, "score": 0, "creation_date": 1527098309, "post_id": 50494394, "comment_id": 88002167, "body": "added it, still &quot;bitset is not a member of &#39;std&#39;&quot;"}, {"owner": {"reputation": 623, "user_id": 2008273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VTTvj.jpg?s=128&g=1", "display_name": "ricco19", "link": "https://stackoverflow.com/users/2008273/ricco19"}, "edited": false, "score": 0, "creation_date": 1527100087, "post_id": 50494394, "comment_id": 88003009, "body": "the above compiles on <a href=\"https://godbolt.org/g/ETUn8A\" rel=\"nofollow noreferrer\">godbolt</a> with gcc, clang, and MSVC using at least <code>-std=c++11</code>"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 95, "user_id": 8215595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPO1ViKY98I/AAAAAAAAAAI/AAAAAAAABoo/HMq-U7JYO4M/photo.jpg?sz=128", "display_name": "CsgoTalks Com", "link": "https://stackoverflow.com/users/8215595/csgotalks-com"}, "edited": false, "score": 0, "creation_date": 1527268157, "post_id": 50494394, "comment_id": 88079840, "body": "@CsgoTalksCom Made it C++03 compatible."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1527268393, "last_edit_date": 1527268393, "creation_date": 1527097118, "answer_id": 50494394, "question_id": 50494270, "link": "https://stackoverflow.com/questions/50494270/string-vector-to-uint8-t-c/50494394#50494394", "title": "String vector to uint8_t C++", "body": "<p>There is no standard function to parse binary strings with \"0b\" prefix, unfortunately.</p>\n\n<p>You can employ good old <a href=\"http://en.cppreference.com/w/cpp/string/byte/strtoul\" rel=\"nofollow noreferrer\"><code>std::strtoul</code></a> (1 line to call <code>std::strtoul</code> and 5 lines of error checking):</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;stdexcept&gt;\n#include &lt;cstdlib&gt;\n#include &lt;string&gt;\n\nuint8_t binary_string_to_uint8(std::string const&amp; s) {\n    if(s.size() != 10 || '0' != s[0] || 'b' != s[1])\n        throw std::runtime_error(\"Invalid bit string format: \" + s);\n    char* end = 0;\n    auto n = std::strtoul(s.c_str() + 2, &amp;end, 2);\n    if(end != s.c_str() + s.size())\n        throw std::runtime_error(\"Invalid bit string format: \" + s);\n    return n;\n}\n\nint main() {\n    std::string str1[] = { \"0b01100001\", \"0b01100101\", \"0b01011101\", \"0b11001111\"};\n    uint8_t str2[sizeof str1 / sizeof *str1];\n    std::transform(std::begin(str1), std::end(str1), std::begin(str2), binary_string_to_uint8);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1527117387, "post_id": 50494924, "comment_id": 88010282, "body": "If you are not using C++11, you can use <code>std::strtoul()</code> instead, which <code>std::stoul()</code> calls anyway. You might also consider using <code>s.c_str()+2</code> instead of <code>&amp;s[2]</code>."}], "tags": [], "owner": {"reputation": 623, "user_id": 2008273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VTTvj.jpg?s=128&g=1", "display_name": "ricco19", "link": "https://stackoverflow.com/users/2008273/ricco19"}, "is_accepted": false, "score": 0, "last_activity_date": 1527102728, "last_edit_date": 1527102728, "creation_date": 1527099364, "answer_id": 50494924, "question_id": 50494270, "link": "https://stackoverflow.com/questions/50494270/string-vector-to-uint8-t-c/50494924#50494924", "title": "String vector to uint8_t C++", "body": "<p>Note that these will likely output nearly the same or the same assembly as an algorithm, so an algorithm like in the other answer is almost always preferred. Nonetheless, here are a few more options using loops:</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stoul\" rel=\"nofollow noreferrer\"><code>std::stoul</code></a> - at least C++11 required. We also do not bounds check here, we assume all strings are <code>&gt;=</code> 2 in size.</p>\n\n<pre><code>std::string str1[] = {\"0b01100101\", \"0b01100101\", \"0b01011101\", \"0b11001111\"};\nconst size_t sz = sizeof str1 / sizeof *str1;\nuint8_t str2[sz];\nfor (size_t i = 0; i &lt; sz; ++i)\n    str2[i] = static_cast&lt;uint8_t&gt;(std::stoul(&amp;str1[i][2], nullptr, 2));\n</code></pre>\n\n<p>Since in reality these are most likely going to be variable sized arrays, you may be better off using the actual <code>vector</code> type here.</p>\n\n<pre><code>std::vector&lt;std::string&gt; vs;\n// add a bunch of stuff to vs\n...\n\nstd::vector&lt;uint8_t&gt; vi;\nvi.reserve(vs.size());\nfor (const auto &amp;s : vs)\n    vi.push_back(static_cast&lt;uint8_t&gt;(std::stoul(&amp;s[2], nullptr, 2)));\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 8215595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPO1ViKY98I/AAAAAAAAAAI/AAAAAAAABoo/HMq-U7JYO4M/photo.jpg?sz=128", "display_name": "CsgoTalks Com", "link": "https://stackoverflow.com/users/8215595/csgotalks-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 50494394, "answer_count": 2, "score": 0, "last_activity_date": 1527268393, "creation_date": 1527096707, "last_edit_date": 1527097252, "question_id": 50494270, "link": "https://stackoverflow.com/questions/50494270/string-vector-to-uint8-t-c", "title": "String vector to uint8_t C++", "body": "<p>I have a vector <strong>with strings</strong> that represent bits as follows:</p>\n\n<pre><code>string str1[] = { \"0b01100101\", \"0b01100101\", \"0b01011101\", \"0b11001111\"}\n</code></pre>\n\n<p>and I need the exact values added to a uint8_t bits vector: </p>\n\n<pre><code>uint8_t str2[] = { 0b01100101, 0b01100101, 0b01011101, 0b11001111}\n</code></pre>\n\n<p>The end result should look exactly like above. \nIf anyone has any idea how I could do that I would appreciate it. </p>\n"}, {"tags": ["c++", "netbeans-7", "include-path"], "comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1527100206, "post_id": 50494237, "comment_id": 88003065, "body": "Yes, Visual Studio doesn&#39;t recognise environment variables unfortunately.  It is a glaring omission.  You could consider using Sysinternals&#39; <a href=\"https://docs.microsoft.com/en-us/sysinternals/downloads/junction\" rel=\"nofollow noreferrer\">junction</a> utility to make the desired header files directory appear to be in the same place regardless of its physical location.  This approach solves a similar problem for me."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1527100259, "post_id": 50494237, "comment_id": 88003088, "body": "Meta comment: assuming I have guessed right, you could do with a visual-studio tag there."}, {"owner": {"reputation": 2494, "user_id": 370132, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/32962f2e057da55303dd023bab7e2617?s=128&d=identicon&r=PG", "display_name": "Eleno", "link": "https://stackoverflow.com/users/370132/eleno"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1527101006, "post_id": 50494237, "comment_id": 88003499, "body": "@PaulSanders I will test your suggestion, thanks.  Actually, the question relates to Netbeans, as indicated by the <code>netbeans-7</code> tag.  I have updated the title to avoid further misundertandings."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1527102693, "post_id": 50494237, "comment_id": 88004360, "body": "OK, sorry, my mistake, but if that doesn&#39;t recognise environment variables either then the same trick should work for you."}], "owner": {"reputation": 2494, "user_id": 370132, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/32962f2e057da55303dd023bab7e2617?s=128&d=identicon&r=PG", "display_name": "Eleno", "link": "https://stackoverflow.com/users/370132/eleno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527100697, "creation_date": 1527096571, "last_edit_date": 1527100697, "question_id": 50494237, "link": "https://stackoverflow.com/questions/50494237/per-user-include-directories-in-netbeans-7-2", "title": "Per-user &quot;Include Directories&quot; in NetBeans 7.2", "body": "<p>Let's assume that two developers have the same include files in different directories on their PCs.  How then can they customize the <code>Include Directories</code> parameter of a C++ project to take this difference into account?</p>\n\n<p>I have tried setting an environment variable (for example: <code>MY_INCLUDE_DIR</code>) and adding it (either <code>${MY_INCLUDE_DIR}</code> or <code>%MY_INCLUDE_DIR%</code>) to the <code>Include Directories</code> list, but NetBeans displays an error when I include a header.</p>\n\n<p>I'm sure that the environment variable is properly set because if I add it to the compiler command line (<code>\"-I${MY_INCLUDE_DIR}\"</code>) then the code compiles even if NetBeans does not find the header.</p>\n"}, {"tags": ["c++", "object", "arduino"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1527096653, "post_id": 50494121, "comment_id": 88001339, "body": "life would be much easier if you adopted a naming convecntion for member variables - ie _readings for the Task member"}], "answers": [{"comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1527096831, "post_id": 50494185, "comment_id": 88001444, "body": "Seems like a big workaround. Couldn&#39;t he just move the <code>push_back</code> into <code>addTemperatureReading</code> after modifying <code>r</code>? Wouldn&#39;t it make more sense to be pushing back there too?"}, {"owner": {"reputation": 371, "user_id": 2145184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a12012a773737fba075cf0134a9e653?s=128&d=identicon&r=PG", "display_name": "user2145184", "link": "https://stackoverflow.com/users/2145184/user2145184"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1527097515, "post_id": 50494185, "comment_id": 88001774, "body": "@scohe001 The reason I&#39;m doing push_back in newReading is to hopefully avoid a bunch of copy paste code since addTemperatureReading is just one of many sensor reading functions.  I tried changing newReading to <code>InuReading&amp; newReading(String t, String l);</code>, then changed the definition to <code>InuReading&amp; InuTask::newReading(String t, String l){</code> and finally did <code>InuReading &amp;r = newReading(&quot;temperature&quot;, sensor);</code>, but then the program crashes when run."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1527097579, "post_id": 50494185, "comment_id": 88001799, "body": "@scohe001 That would be equivalent to simply removing the <code>newReading</code> function altogether (as it would exactly duplicate the reading&#39;s ctor then). I wouldn&#39;t consider this a workaround. To me, the semantics is sound: &quot;Register a new reading, and allow me to customise it.&quot; However, I can see where you&#39;re coming from too, and if you were my reviewer, I&#39;d be willing to adapt."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1527097833, "post_id": 50494185, "comment_id": 88001917, "body": "@Angew ahh fair enough, I suppose OP has his reasons for sticking it in there then. +1 for making it work while doing it OP&#39;s way :)"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 371, "user_id": 2145184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a12012a773737fba075cf0134a9e653?s=128&d=identicon&r=PG", "display_name": "user2145184", "link": "https://stackoverflow.com/users/2145184/user2145184"}, "edited": false, "score": 0, "creation_date": 1527098020, "post_id": 50494185, "comment_id": 88002019, "body": "@user2145184 There was a piece of needed change missing, I&#39;ve added it."}, {"owner": {"reputation": 371, "user_id": 2145184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a12012a773737fba075cf0134a9e653?s=128&d=identicon&r=PG", "display_name": "user2145184", "link": "https://stackoverflow.com/users/2145184/user2145184"}, "edited": false, "score": 0, "creation_date": 1527098537, "post_id": 50494185, "comment_id": 88002261, "body": "One thing has me confused though, why was I unable to create the InuReading object, then push into the vector before returning it? Instead of pushing into vector and then reading from the vector as return value?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 371, "user_id": 2145184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a12012a773737fba075cf0134a9e653?s=128&d=identicon&r=PG", "display_name": "user2145184", "link": "https://stackoverflow.com/users/2145184/user2145184"}, "edited": false, "score": 0, "creation_date": 1527098985, "post_id": 50494185, "comment_id": 88002467, "body": "@user2145184 Because local variables go out of scope when the function exits. You can of course still have the local variable <code>r</code> in <code>newReading</code> if you need it, but you need to return a reference to the object <i>actually</i> in the vector."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 3, "last_activity_date": 1527097993, "last_edit_date": 1527097993, "creation_date": 1527096334, "answer_id": 50494185, "question_id": 50494121, "link": "https://stackoverflow.com/questions/50494121/why-are-my-values-in-a-c-map-class-member-wiped/50494185#50494185", "title": "Why are my values in a C++ map class member wiped?", "body": "<p><code>newReading</code> returns the <code>InuReading</code> by value, which means that <code>r</code> in <code>addTemperatureReading</code> is a local object and has no relationship whatsoever to the objects stored in the task's <code>readings</code> vector.</p>\n\n<p>You probably want <code>newReading</code> to return a reference, and change <code>addTemperatureReading</code> to use a reference too:</p>\n\n<pre><code>void InuTask::addTemperatureReading(String sensor, float temperature){\n    InuReading &amp;r = newReading(\"temperature\", sensor);\n    r.set(\"d\", temperature);\n    // Size here after setting \"d\" to 30.0 is 1, which is proper\n    Serial.printf(\"Size of %s is now: %i \\n\", r.type.c_str(), r.data.size());\n}\n</code></pre>\n\n<p>Note that this change also requires you to return a reference <em>into</em> the <code>readings</code> vector from <code>newReading</code>:</p>\n\n<pre><code>InuReading&amp; InuTask::newReading(String t, String l){\n    readings.push_back(InuReading(t, l);\n    return readings.back();\n}\n</code></pre>\n"}], "owner": {"reputation": 371, "user_id": 2145184, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a12012a773737fba075cf0134a9e653?s=128&d=identicon&r=PG", "display_name": "user2145184", "link": "https://stackoverflow.com/users/2145184/user2145184"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 50494185, "answer_count": 1, "score": 2, "last_activity_date": 1527098527, "creation_date": 1527096076, "question_id": 50494121, "link": "https://stackoverflow.com/questions/50494121/why-are-my-values-in-a-c-map-class-member-wiped", "title": "Why are my values in a C++ map class member wiped?", "body": "<p>I have 2 classes: <code>InuReading</code> and <code>InuTask</code>. Looking like this:</p>\n\n<p>InuReading header:</p>\n\n<pre><code>class InuReading{\n    public:\n        InuReading(String t, String l){\n            type = t;\n            label = l;\n        };\n        String type;\n        String label;\n        std::map&lt;String, String&gt; data;\n        void set(String key, float d);\n};\n</code></pre>\n\n<p>InuTask header:</p>\n\n<pre><code>class InuTask{\n    public:\n        InuTask(String);\n        String type;\n        void addTemperatureReading(String sensor, float temperature);\n        std::vector&lt;InuReading&gt; readings;\n    private:\n        InuReading newReading(String t, String l);\n\n};\n</code></pre>\n\n<p>InuReading method:</p>\n\n<pre><code>void InuReading::set(String key, float d){\n    data[key] = String(d); \n};\n</code></pre>\n\n<p>InuTask methods:</p>\n\n<pre><code>InuTask::InuTask(String t){\n    type = t;\n}\n\nInuReading InuTask::newReading(String t, String l){\n    InuReading r(t, l);\n    readings.push_back(r);\n    return r;\n}\n\nvoid InuTask::addTemperatureReading(String sensor, float temperature){\n    InuReading r = newReading(\"temperature\", sensor);\n    r.set(\"d\", temperature);\n    // Size here after setting \"d\" to 30.0 is 1, which is proper\n    Serial.printf(\"Size of %s is now: %i \\n\", r.type.c_str(), r.data.size());\n}\n</code></pre>\n\n<p>Main:</p>\n\n<pre><code>InuTask task(\"Log\");\ntask.addTemperatureReading(\"Temperature\", 30);\n// This returns 0, all data is missing now?\nSerial.println(task.readings[0].data.size());\n</code></pre>\n\n<p>Immediately after data is set on the map, it has 1 element, but once I get the InuReading from the vector its data property is empty. How do I get the data to stick in the map?</p>\n"}, {"tags": ["c++", "expression", "emplace"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1527096054, "post_id": 50494094, "comment_id": 88001073, "body": "<code>first</code> and <code>second</code> are not functions, but member variables."}], "answers": [{"tags": [], "owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "is_accepted": true, "score": 3, "last_activity_date": 1527096073, "creation_date": 1527096073, "answer_id": 50494120, "question_id": 50494094, "link": "https://stackoverflow.com/questions/50494094/expression-cannot-be-used-as-a-function-in-return-statement/50494120#50494120", "title": "&quot;expression cannot be used as a function&quot; in return statement", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/utility/pair\" rel=\"nofollow noreferrer\">The <code>second</code> member of <code>std::pair</code></a> is a member variable, not a member function. You just need to omit the parentheses, as you're getting its value (as opposed to calling it):</p>\n\n<pre><code>return vertices.emplace(std::piecewise_construct,\n    std::forward_as_tuple(new_vert),\n    std::forward_as_tuple()).second;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6529950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y8XJz.png?s=128&g=1", "display_name": "extremely_unwelcome", "link": "https://stackoverflow.com/users/6529950/extremely-unwelcome"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "closed_date": 1527137221, "accepted_answer_id": 50494120, "answer_count": 1, "score": -2, "last_activity_date": 1527096073, "creation_date": 1527095983, "question_id": 50494094, "link": "https://stackoverflow.com/questions/50494094/expression-cannot-be-used-as-a-function-in-return-statement", "closed_reason": "Not suitable for this site", "title": "&quot;expression cannot be used as a function&quot; in return statement", "body": "<p>Code (also\n<a href=\"https://i.stack.imgur.com/8deX0.png\" rel=\"nofollow noreferrer\">screenshot</a>):</p>\n\n<pre><code>/***\nAttempts to emplace new_vert in vertices,\n    returning false\n        if it failed (i.e., the vertex was already in vertices)\n    or true\n        if it succeeded\n***/\ntemplate &lt;typename T&gt;\nbool Graph&lt;T&gt;::addVert(const T&amp; new_vert) {\n    return vertices.emplace(std::piecewise_construct,\n        std::forward_as_tuple(new_vert),\n        std::forward_as_tuple()).second();\n};\n</code></pre>\n\n<p>As the screenshot shows, the error occurs on the last parenthesis of \"<code>.second()</code>\".</p>\n\n<p><code>vertices</code> is of type <code>std::map&lt;T, std::set&lt;T&gt;&gt;</code>, and <code>emplace()</code> <a href=\"http://www.cplusplus.com/reference/map/map/emplace/\" rel=\"nofollow noreferrer\">should return a <code>pair&lt;iterator,bool&gt;</code></a>, with the bool accessible via <code>second()</code>, hence returning it. Different versions of the code (e.g., catching the pair with a variable <code>foo</code> and returning <code>foo.second()</code>) makes no difference; the error follows the last parenthesis of <code>second()</code>.</p>\n\n<p>Looking at other questions with this error, they seem to boil down to operators missing somewhere, but that doesn't seem to be the case here. Why is it happening?</p>\n"}, {"tags": ["c++", "avl-tree"], "comments": [{"owner": {"reputation": 856, "user_id": 8596064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/084b34b91f354c0088137116f0c42c7a?s=128&d=identicon&r=PG&f=1", "display_name": "Absent", "link": "https://stackoverflow.com/users/8596064/absent"}, "edited": false, "score": 0, "creation_date": 1527098207, "post_id": 50494093, "comment_id": 88002105, "body": "This question is not good for stackoverflow. Read something about the topic and start coding and once you are stuck, people will be happy to help you with a specific problem. &quot;How to implement&quot; not only tend to be very broad questions (which are not good questions for SO), they also lack showable effort (Something which SO requires from the user)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1527106976, "post_id": 50494093, "comment_id": 88006497, "body": "I&#39;m confused.  I thought in a binary or AVL tree, each node can be another AVL (subtree) or a leaf node.  So how is your implementation different?"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 0, "last_activity_date": 1527107336, "creation_date": 1527107336, "answer_id": 50496977, "question_id": 50494093, "link": "https://stackoverflow.com/questions/50494093/how-to-implement-an-avl-tree-in-c-with-each-node-being-another-avl-tree/50496977#50496977", "title": "How to implement an avl tree in c++ with each node being another avl tree", "body": "<p>Implement this as you would with an integer node:  </p>\n\n<pre><code>struct AVL_node\n{\n  bool color;\n  int key;\n  AVL_Tree value;\n  AVL_Node * left_subtree;\n  AVL_Node * right_subtree;\n};\n</code></pre>\n\n<p>In a tree, you need to separate the key, value and link fields.  The key is what you are using for ordering the nodes.  The value is the data.  </p>\n\n<p>The value doesn't make a difference.  It could be <code>std::vector</code> or <code>std::map</code> or missing.  Nodes in general are not copied, only the links change.  However, if a node is copied, both the key and value fields are copied.  </p>\n\n<p>Remembering, when organizing nodes, only the link fields change.  The key is used to determine ordering.</p>\n"}], "owner": {"reputation": 23, "user_id": 8780775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391a6102897c9e22c786fb9033cee289?s=128&d=identicon&r=PG&f=1", "display_name": "lefteris", "link": "https://stackoverflow.com/users/8780775/lefteris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 50496977, "answer_count": 1, "score": 0, "last_activity_date": 1527107336, "creation_date": 1527095981, "question_id": 50494093, "link": "https://stackoverflow.com/questions/50494093/how-to-implement-an-avl-tree-in-c-with-each-node-being-another-avl-tree", "title": "How to implement an avl tree in c++ with each node being another avl tree", "body": "<p>I Have an input.txt file which contains number like this:<a href=\"https://i.stack.imgur.com/ZADac.png\" rel=\"nofollow noreferrer\">input.txt file </a></p>\n\n<p>I am trying to make an avl tree in which every node is a number form the first column and each of these nodes point to another avl tree containing numbers from the second column.Could someone explain how to implement this in c++?</p>\n"}, {"tags": ["c++", "visual-c++", "dll", "include"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1527105928, "post_id": 50494052, "comment_id": 88005988, "body": "With the forward declaration no magic is going on. This is working as expected."}], "answers": [{"tags": [], "owner": {"reputation": 655, "user_id": 7484210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ghd9L.jpg?s=128&g=1", "display_name": "0x400921FB54442D18", "link": "https://stackoverflow.com/users/7484210/0x400921fb54442d18"}, "is_accepted": false, "score": 0, "last_activity_date": 1527096247, "creation_date": 1527096247, "answer_id": 50494165, "question_id": 50494052, "link": "https://stackoverflow.com/questions/50494052/clarification-on-includes-in-dlls/50494165#50494165", "title": "Clarification on Includes in DLLs", "body": "<p>When you <code>#include</code> a file, it gets automatically \"copypasted\" into your source.<br>\nBecause you included <code>vector.h</code> right before including <code>point.h</code>, the <code>Point</code> class will see it. <br><br>\nHowever, it's not a good idea to rely on this behavior as the order of includes might change and thus it will not work anymore, so you should <code>#include \"vector.h\"</code> in your <code>point.h</code>.</p>\n"}], "owner": {"reputation": 32, "user_id": 5627786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4515a80c13ea0f4aa1cae38fa4c1fc28?s=128&d=identicon&r=PG&f=1", "display_name": "Braddock Bres", "link": "https://stackoverflow.com/users/5627786/braddock-bres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527101628, "creation_date": 1527095843, "last_edit_date": 1527101628, "question_id": 50494052, "link": "https://stackoverflow.com/questions/50494052/clarification-on-includes-in-dlls", "title": "Clarification on Includes in DLLs", "body": "<p>I recently came across something that goes against my understanding of includes.</p>\n\n<p>I am creating a dll to hold basic coordinate objects for a personal game engine I'm developing (for fun).</p>\n\n<p>Main dll header file.</p>\n\n<pre><code>#pragma once\n\n#include \"sclapi.h\"\n#include \"vector.h\"\n#include \"point.h\"\n// Other includes and stuff.\n// Unimportant for this demonstration.\n</code></pre>\n\n<p>sclapi.h</p>\n\n<pre><code>#pragma once\n\n#ifdef SCL_EXPORTS\n#define SCL_API __declspec(dllexport)\n#else\n#define SCL_API __declspec(dllimport)\n#endif\n</code></pre>\n\n<p>vector.h</p>\n\n<pre><code>#pragma once\n\n// No includes\n\n/*EDIT*/struct Point;\n\nstruct SCL_API Vector {\n    float x, y;\n\n    // Other stuff\n\n    explicit operator Point() const;\n};\n</code></pre>\n\n<p>point.h</p>\n\n<pre><code>#pragma once\n\n// No includes\n\nstruct SCL_API Point {\n    int x, y;\n\n    // Other stuff\n\n    explicit operator Vector() const;\n};\n</code></pre>\n\n<p>My code works perfectly fine; but to my understanding, it shouldn't. A header file should only know what's declared in it (includes being shorthand for pasting in code). None of these objects are declared in the other's header files. [EDITED] point.h should have no knowledge of a Vector struct. Whats more, both even have knowledge of the SCL_API macro. If I comment out individual includes in the main header file, I get the expected compiler errors. What am I missing?</p>\n\n<p>EDIT:</p>\n\n<p>After further testing, I discovered that a declaration of the later objects needs to be in the first header file 'vector.h'; but after, they do not need to be declared again in any other header file. Also, declaring the classes in the main header file does not work. The Point forward declaration must be inside the vector.h file.</p>\n"}, {"tags": ["c++", "linux", "openssl", "aes"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1527417281, "post_id": 50493945, "comment_id": 88113341, "body": "You should <i>not</i> use <code>AES_encrypt</code> and friends. That&#39;s a software-only implementation, so you will not enjoy hardware support, like AES-NI. You should be using <code>EVP_*</code> functions. See <a href=\"http://wiki.openssl.org/index.php/EVP_Symmetric_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">EVP Symmetric Encryption and Decryption</a> on the OpenSSL wiki. In fact, you should probably be using authenticated encryption because it provides <i>both</i> confidentiality and authenticity. See <a href=\"http://wiki.openssl.org/index.php/EVP_Authenticated_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">EVP Authenticated Encryption and Decryption</a> on the OpenSSL wiki."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1527417333, "post_id": 50493945, "comment_id": 88113358, "body": "Also see <a href=\"https://wiki.openssl.org/index.php/EVP_Symmetric_Encryption_and_Decryption#C.2B.2B_Programs\" rel=\"nofollow noreferrer\">EVP Symmetric Encryption and Decryption | C++ Programs</a> for an example of using C++ and OpenSSL."}], "answers": [{"tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1527096494, "creation_date": 1527096494, "answer_id": 50494219, "question_id": 50493945, "link": "https://stackoverflow.com/questions/50493945/encryption-and-decryption-not-showing-proper-value/50494219#50494219", "title": "Encryption and decryption not showing proper value", "body": "<p>AES is a block encrypting algorithm. So <code>enc_buffer</code> must be declared like below</p>\n\n<pre><code>unsigned char enc_buffer[AES_BLOCK_SIZE];\n</code></pre>\n\n<p>The size must be multiplied <code>AES_BLOCK_SIZE</code> and greater or equal to size of input data.</p>\n\n<p>You do not have to reserve place for the zero and insert the zero into the end of <code>enc_buffer</code>. It will contain binary data, not string charts, thus it cannot be printed like <code>cout &lt;&lt;  enc_buffer</code>. If you want to print it you have to think how to dump binary data, maybe in hex or in base64 format.</p>\n"}], "owner": {"reputation": 3, "user_id": 9596638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14d0b5c0fd2fc820496560852f1d7d4?s=128&d=identicon&r=PG&f=1", "display_name": "hari", "link": "https://stackoverflow.com/users/9596638/hari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1527417493, "creation_date": 1527095450, "last_edit_date": 1527417493, "question_id": 50493945, "link": "https://stackoverflow.com/questions/50493945/encryption-and-decryption-not-showing-proper-value", "title": "Encryption and decryption not showing proper value", "body": "<p>my code is as follows</p>\n\n<pre><code>unsigned char aes_key[]= \"asytfuhcilejnco\";\nunsigned char input_data[]= \"Sandeep\";\nunsigned char enc_buffer[sizeof(input_data)+1];\nunsigned char dec_buffer[sizeof(input_data)+1];\n\nAES_KEY enc_key,dec_key;\nunsigned char iv[AES_BLOCK_SIZE];\n\nint main()\n{\n\n    memset(iv,0x00,AES_BLOCK_SIZE);\n    AES_set_encrypt_key(aes_key,sizeof(aes_key)*8,&amp;enc_key);\n    AES_cbc_encrypt(input_data,enc_buffer,sizeof(input_data),&amp;enc_key,iv,AES_ENCRYPT);\n    enc_buffer[sizeof(input_data)+1]='\\0';//b\n\n    memset(iv,0x00,AES_BLOCK_SIZE);\n    AES_set_decrypt_key(aes_key,sizeof(aes_key)*8,&amp;dec_key);\n    AES_cbc_encrypt(enc_buffer,dec_buffer,sizeof(input_data),&amp;dec_key,iv,AES_DECRYPT);\n    dec_buffer[sizeof(input_data)+1]='\\0';//a\n\n    cout&lt;&lt;\"input_data=\"&lt;&lt;input_data&lt;&lt;endl;\n    cout&lt;&lt;\"enc_buffer=\"&lt;&lt;enc_buffer&lt;&lt;endl;\n    cout&lt;&lt;\"dec_buffer=\"&lt;&lt;dec_buffer&lt;&lt;endl;\n}\n</code></pre>\n\n<p>I am using input_data as the data to encrypt. 2 buffers enc_buffer and dec_buffer to hold encrypted and decrypted data. But when I run the following program, the buffers do not show the decrypted data matching with original input data.If I comment the lines \"a\" and \"b\" the encrypted and decrypted data  values match.But in that case the original data is shown in encrypted data.</p>\n\n<p>output of the program</p>\n\n<pre><code>input_data=Sandeep\nenc_buffer=X\ufffd\ufffd8\ufffd\ufffd\u020e\ndec_buffer=2\ufffd\ufffd\ufffdyT\ufffd\n</code></pre>\n\n<p>output of the program with a and b commented</p>\n\n<pre><code>input_data=Sandeep\nenc_buffer=X\ufffd\ufffd8\ufffd\ufffd\u020e\ufffd\ufffdY\u0654\ufffdiSandeep\ndec_buffer=Sandeep\n</code></pre>\n"}, {"tags": ["c#", "c++", "unit-testing", "visual-studio-2017"], "comments": [{"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1527096374, "post_id": 50493922, "comment_id": 88001213, "body": "Please explain your solution and projects."}, {"owner": {"reputation": 1, "user_id": 9836039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ytbm9.jpg?s=128&g=1", "display_name": "Brian Womack", "link": "https://stackoverflow.com/users/9836039/brian-womack"}, "reply_to_user": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1527099301, "post_id": 50493922, "comment_id": 88002608, "body": "Nothing special on the project, an empty solution with one static C++ library and one C# library, with a unit test project for each (native C++ and C#).  The C# one works fine (as did the C++ one before I added the C#)."}, {"owner": {"reputation": 578, "user_id": 5945089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6a32dbdb795aea85f857496071b00f?s=128&d=identicon&r=PG&f=1", "display_name": "Gregory Prescott", "link": "https://stackoverflow.com/users/5945089/gregory-prescott"}, "edited": false, "score": 0, "creation_date": 1527682762, "post_id": 50493922, "comment_id": 88218275, "body": "What test frameworks are you using?"}, {"owner": {"reputation": 1, "user_id": 9836039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ytbm9.jpg?s=128&g=1", "display_name": "Brian Womack", "link": "https://stackoverflow.com/users/9836039/brian-womack"}, "edited": false, "score": 0, "creation_date": 1527776081, "post_id": 50493922, "comment_id": 88262832, "body": "Only the one built into Visual Studio 2017 -- no other dependencies."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9793141"}, "is_accepted": false, "score": 2, "last_activity_date": 1528799508, "creation_date": 1528799508, "answer_id": 50815017, "question_id": 50493922, "link": "https://stackoverflow.com/questions/50493922/visual-studio-2017-unit-tests-with-c-and-c-with-undiscovered-c-tests/50815017#50815017", "title": "Visual Studio 2017 Unit Tests with C++ and C# with undiscovered C++ tests", "body": "<p>Try running your test from the \"Test Explorer\" and see if it detects your c++ and c# tests.</p>\n"}], "owner": {"reputation": 1, "user_id": 9836039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ytbm9.jpg?s=128&g=1", "display_name": "Brian Womack", "link": "https://stackoverflow.com/users/9836039/brian-womack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1528799508, "creation_date": 1527095339, "question_id": 50493922, "link": "https://stackoverflow.com/questions/50493922/visual-studio-2017-unit-tests-with-c-and-c-with-undiscovered-c-tests", "title": "Visual Studio 2017 Unit Tests with C++ and C# with undiscovered C++ tests", "body": "<p>With the latest Visual Studio Enterprise 15.7.2 installed cleanly, my solution unit tests work fine for my C# tests, but it acts like there are no C++ unit tests present.  Before I added the C# tests, the C++ tests worked just fine.  Is it possible to get both working?  I went the direction of a separate TestConfig.runsettings, but could not figure out how to specify native code vs. a .NET framework.  Even when I right click on the C++ unit test file to 'Run Tests' it says 'No tests found to run', despite compiling that specific .cpp project fine.  Any ideas?</p>\n"}, {"tags": ["c++", "manipulators"], "owner": {"reputation": 283, "user_id": 5718403, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-yP0Mj5naWaI/AAAAAAAAAAI/AAAAAAAAABg/cEkPp45dCUI/photo.jpg?sz=128", "display_name": "Dmitry Sokolov", "link": "https://stackoverflow.com/users/5718403/dmitry-sokolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1527095090, "answer_count": 0, "score": 1, "last_activity_date": 1527094897, "creation_date": 1527094897, "question_id": 50493819, "link": "https://stackoverflow.com/questions/50493819/how-i-can-create-stream-manipulator-for-string-processing", "closed_reason": "Duplicate", "title": "How I can create stream manipulator for string processing?", "body": "<p>For example I want to create manipulator to convert string from lowercase to uppercase, and it must to use like: <code>cout &lt;&lt; toUpper &lt;&lt; \"abc\";</code>\nHow can I get source string from ostream type for further use?</p>\n"}, {"tags": ["c++", "smart-pointers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1527094826, "post_id": 50493777, "comment_id": 88000459, "body": "Can you please elaborate, possibly with some code, what you want to do?  <code>*pointer_name</code> gives you a reference to what the pointer points to."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1527095440, "post_id": 50493777, "comment_id": 88000746, "body": "Why exactly do you want to return a reference when you store a pointer? And what do you return if your pointer doesn&#39;t have a valid <code>Point</code> (e.g.: is a null pointer)?"}, {"owner": {"reputation": 119, "user_id": 8658775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c232b0fe87361b4c32eb5c0dcc269e4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Meltzer", "link": "https://stackoverflow.com/users/8658775/daniel-meltzer"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1527095453, "post_id": 50493777, "comment_id": 88000752, "body": "I&#39;ve put an example @NathanOliver"}, {"owner": {"reputation": 119, "user_id": 8658775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c232b0fe87361b4c32eb5c0dcc269e4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Meltzer", "link": "https://stackoverflow.com/users/8658775/daniel-meltzer"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1527095537, "post_id": 50493777, "comment_id": 88000800, "body": "@UnholySheep I have to implement task for school and I get a bonus if I don&#39;t use raw allocations, so I want to store everything using smart pointers or by value, that said I have functions with signatures predfined"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527096641, "post_id": 50493777, "comment_id": 88001329, "body": "&quot;Why exactly do you want to return a reference when you store a pointer?&quot; why do you ask such question? Function signature is a public interface, how data is stored is internal implementation, one does not have to reflect another at all."}], "answers": [{"comments": [{"owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "edited": false, "score": 0, "creation_date": 1527098177, "post_id": 50494017, "comment_id": 88002088, "body": "I won&#39;t say there are no reasons to do this but think very carefully about what you are doing.  You are returning a reference to an object owned by a <code>shared_ptr</code> without incrementing the reference count.  If the shared pointer&#39;s reference count reaches zero the object will be deallocated and the reference you returned will now point to an invalid object."}, {"owner": {"reputation": 119, "user_id": 8658775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c232b0fe87361b4c32eb5c0dcc269e4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Meltzer", "link": "https://stackoverflow.com/users/8658775/daniel-meltzer"}, "reply_to_user": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "edited": false, "score": 0, "creation_date": 1527101561, "post_id": 50494017, "comment_id": 88003800, "body": "@FrankBoyne when I return shared_ptr the ref count increases"}, {"owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "reply_to_user": {"reputation": 119, "user_id": 8658775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c232b0fe87361b4c32eb5c0dcc269e4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Meltzer", "link": "https://stackoverflow.com/users/8658775/daniel-meltzer"}, "edited": false, "score": 0, "creation_date": 1527115173, "post_id": 50494017, "comment_id": 88009738, "body": "@DanielMeltzer That&#39;s not my experience in Visual Studio 2017 C++ or GDB.  Here&#39;s a <a href=\"https://onlinegdb.com/BJ0D5vX1X\" rel=\"nofollow noreferrer\">test program in GDB</a>.  Run the program and you&#39;ll get a segmentation fault after the ~Target() destructor is called by the shared pointer reaching reference count = 0.  Fork the code and run it in the debugger and you&#39;ll see that the shared pointer has a strong reference count of 1 even after the reference has been returned."}, {"owner": {"reputation": 119, "user_id": 8658775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c232b0fe87361b4c32eb5c0dcc269e4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Meltzer", "link": "https://stackoverflow.com/users/8658775/daniel-meltzer"}, "edited": false, "score": 0, "creation_date": 1527165861, "post_id": 50494017, "comment_id": 88031547, "body": "cpp.sh/3tgj5 is an exempale"}, {"owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "reply_to_user": {"reputation": 119, "user_id": 8658775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c232b0fe87361b4c32eb5c0dcc269e4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Meltzer", "link": "https://stackoverflow.com/users/8658775/daniel-meltzer"}, "edited": false, "score": 0, "creation_date": 1527273452, "post_id": 50494017, "comment_id": 88082158, "body": "@DanielMeltzer The penny drops.  Note that in <a href=\"http://www.cpp.sh/3tgj5\" rel=\"nofollow noreferrer\">your example</a> the method <code>getPrice</code> returns a result of type <code>std::shared_ptr&lt;int&gt;</code> not <code>T&amp;</code> as your original question asked for (and as the answer you have accepted does).  It would help future readers if you edited your original question to show you want a result of <code>shared_ptr&lt;Point&gt;</code> rather than <code>Point &amp;</code>.  It would also help if @xirema updated their answer to reflect that change."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 3, "last_activity_date": 1527095765, "creation_date": 1527095765, "answer_id": 50494017, "question_id": 50493777, "link": "https://stackoverflow.com/questions/50493777/turning-shared-ptrt-to-reference/50494017#50494017", "title": "Turning shared_ptr&lt;T&gt; to reference", "body": "<p>Your code should work as-is. The call to <code>get()</code> is redundant though: The shared pointer itself can be dereferenced as-is using the dereference operator, yielding the reference you want. So it's sufficient to simply write</p>\n\n<pre><code>Point&amp; MyClass::getLastLocation(){\n    return *lastLocation;\n}\n</code></pre>\n\n<p>Bear in mind that <code>Point</code>, unless its name is not descriptive of what it is, probably doesn't need to be stored in dynamic memory in the first place. Examine your code design and consider whether you need a pointer of any kind in the first place.</p>\n"}], "owner": {"reputation": 119, "user_id": 8658775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c232b0fe87361b4c32eb5c0dcc269e4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Meltzer", "link": "https://stackoverflow.com/users/8658775/daniel-meltzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 50494017, "answer_count": 1, "score": -2, "last_activity_date": 1527095765, "creation_date": 1527094762, "last_edit_date": 1527095422, "question_id": 50493777, "link": "https://stackoverflow.com/questions/50493777/turning-shared-ptrt-to-reference", "title": "Turning shared_ptr&lt;T&gt; to reference", "body": "<p>What is a good practice to return <code>T&amp;</code> reference when storing <code>shared_ptr&lt;T&gt;</code>?\n<br> \nExample Scenario:\nI store  <code>std::shared_ptr&lt;Point&gt; lastLocation;</code>\nand have a signature:<br><code>Point&amp; getlastPosition();</code><br>\nI thought to make something like:</p>\n\n<pre><code>Point&amp; MyClass::getLastLocation(){\n    return *lastLocation.get()\n}\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "edited": false, "score": 0, "creation_date": 1527094545, "post_id": 50493666, "comment_id": 88000325, "body": "you need to derive <code>public</code> or it will not be visible in the derived class: <code>struct derived : public base {...</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "edited": false, "score": 0, "creation_date": 1527094600, "post_id": 50493666, "comment_id": 88000351, "body": "@Aganju No you don&#39;t.  <code>struct</code> has <code>public</code> access by default."}], "answers": [{"comments": [{"owner": {"reputation": 15006, "user_id": 2797826, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3bab2302a0d633206bdcfca569f666c8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan Brindle", "link": "https://stackoverflow.com/users/2797826/tristan-brindle"}, "edited": false, "score": 0, "creation_date": 1527336779, "post_id": 50498055, "comment_id": 88096435, "body": "That quote seems to settle it, I agree that it doesn&#39;t seem possible to unhide the base class operator (or hidden base-class member function templates in general, apparently). Thanks for your help."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1527112625, "creation_date": 1527112625, "answer_id": 50498055, "question_id": 50493666, "link": "https://stackoverflow.com/questions/50493666/bring-templated-base-class-conversion-operator-into-derived-scope/50498055#50498055", "title": "Bring templated base class conversion operator into derived scope", "body": "<p>I would say it is not possible. and even if it was, your derived operator would hide base one as template argument is not part according to <a href=\"http://eel.is/c++draft/namespace.udecl#15.sentence-1\" rel=\"nofollow noreferrer\">namespace.udecl#15.sentence-1</a>:</p>\n\n<blockquote>\n  <p>When a using-declarator brings declarations from a base class into a derived class, member functions and member function templates in the derived class override and/or hide member functions and member function templates with the same name, parameter-type-list, cv-qualification, and ref-qualifier (if any) in a base class (rather than conflicting)</p>\n</blockquote>\n\n<p>Unfortunately, template parameter doesn't count and both conversion <code>operator</code> has empty parameter-type-list, are <code>const</code> and no ref-qualifier.</p>\n"}, {"comments": [{"owner": {"reputation": 15006, "user_id": 2797826, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3bab2302a0d633206bdcfca569f666c8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan Brindle", "link": "https://stackoverflow.com/users/2797826/tristan-brindle"}, "edited": false, "score": 0, "creation_date": 1527335436, "post_id": 50527169, "comment_id": 88096027, "body": "This is a great solution for GCC, but unfortunately it doesn&#39;t work with Clang: <a href=\"https://wandbox.org/permlink/PuJmLIIMs1GJN8CB\" rel=\"nofollow noreferrer\">wandbox.org/permlink/PuJmLIIMs1GJN8CB</a>"}, {"owner": {"reputation": 914, "user_id": 9822560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870d2a5ff12cb2b1553ee02e5e271dde?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Saulue-Laborde", "link": "https://stackoverflow.com/users/9822560/vincent-saulue-laborde"}, "reply_to_user": {"reputation": 15006, "user_id": 2797826, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3bab2302a0d633206bdcfca569f666c8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan Brindle", "link": "https://stackoverflow.com/users/2797826/tristan-brindle"}, "edited": false, "score": 0, "creation_date": 1527339728, "post_id": 50527169, "comment_id": 88097242, "body": "@TristanBrindle Answer updated to mention it is not portable. I have no idea if the C++ standard allows this syntax, or if g++ is just being flexible."}], "tags": [], "owner": {"reputation": 914, "user_id": 9822560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870d2a5ff12cb2b1553ee02e5e271dde?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Saulue-Laborde", "link": "https://stackoverflow.com/users/9822560/vincent-saulue-laborde"}, "is_accepted": false, "score": 1, "last_activity_date": 1527339398, "last_edit_date": 1527339398, "creation_date": 1527244271, "answer_id": 50527169, "question_id": 50493666, "link": "https://stackoverflow.com/questions/50493666/bring-templated-base-class-conversion-operator-into-derived-scope/50527169#50527169", "title": "Bring templated base class conversion operator into derived scope", "body": "<p>Following trick requires GNU g++, with C++14.</p>\n\n<p>If <code>some_constraints</code> and <code>different_constraints</code> are mutually exclusive, you can add <code>using base::operator auto;</code> in <code>derived</code> class to make all the conversion operators of <code>base</code> available.</p>\n\n<p>Example:</p>\n\n<pre><code>struct Base {\nprotected:\n    // conversion to pointer types (protected).\n    template&lt;typename T, typename= typename std::enable_if&lt;std::is_pointer&lt;T&gt;::value&gt;::type&gt;\n    operator T() const;\n};\n\nstruct Derived : public Base{\n    // Make all Base conversion operators public.\n    using Base::operator auto;\n\n    // conversion to default constructible &amp; non-pointer types.\n    // added an extra typename=void to distinguish from Base template operator.\n    template&lt;typename T, typename= typename std::enable_if&lt;!std::is_pointer&lt;T&gt;::value&gt;::type,typename=void&gt;\n    operator T() const;\n};\n</code></pre>\n\n<p><a href=\"http://cpp.sh/34gbs\" rel=\"nofollow noreferrer\">Live demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 1574, "user_id": 9099261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdee0bc280ec08abb8a3031341c9e113?s=128&d=identicon&r=PG&f=1", "display_name": "Bernd", "link": "https://stackoverflow.com/users/9099261/bernd"}, "edited": false, "score": 1, "creation_date": 1597139040, "post_id": 63349361, "comment_id": 112029473, "body": "The idea is good, but you would need to check both conditions, otherwise traits like std::is_convertible would likely cause compilation errors by instantiating that template..."}], "tags": [], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "is_accepted": false, "score": 1, "last_activity_date": 1597101697, "creation_date": 1597101697, "answer_id": 63349361, "question_id": 50493666, "link": "https://stackoverflow.com/questions/50493666/bring-templated-base-class-conversion-operator-into-derived-scope/63349361#63349361", "title": "Bring templated base class conversion operator into derived scope", "body": "<p>To achieve a similar effect, you could move the constraints inside the operator and call the base conversion operator if the constraints are not satisfied:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>struct base {\n    template &lt;typename C, std::enable_if_t&lt;some_constraints&lt;C&gt;, int&gt; = 0&gt;\n    operator C() const;\n};\n\nstruct derived : base {\n    template &lt;typename P&gt;\n    operator P() const {\n        if constexpr (different_constraints&lt;P&gt;) {\n            // Overridden operator\n        } else {\n            return base::operator P();\n        }\n    }\n};\n</code></pre>\n<p>Or equivalently have one regular <code>std::enable_if_t&lt;different_constraints&lt;P&gt;, int&gt; = 0</code> conversion operator and another <code>std::enable_if_t&lt;!different_constraints&lt;P&gt;, int&gt; = 0</code>  that calls the base conversion operator.</p>\n"}, {"tags": [], "owner": {"reputation": 1574, "user_id": 9099261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdee0bc280ec08abb8a3031341c9e113?s=128&d=identicon&r=PG&f=1", "display_name": "Bernd", "link": "https://stackoverflow.com/users/9099261/bernd"}, "is_accepted": false, "score": 0, "last_activity_date": 1597146631, "creation_date": 1597146631, "answer_id": 63357531, "question_id": 50493666, "link": "https://stackoverflow.com/questions/50493666/bring-templated-base-class-conversion-operator-into-derived-scope/63357531#63357531", "title": "Bring templated base class conversion operator into derived scope", "body": "<p>Sometimes you can &quot;solve&quot; this issue by using a conversion constructor - but this is not always possible (like converting to pointer T).</p>\n"}], "owner": {"reputation": 15006, "user_id": 2797826, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3bab2302a0d633206bdcfca569f666c8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan Brindle", "link": "https://stackoverflow.com/users/2797826/tristan-brindle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 50498055, "answer_count": 4, "score": 3, "last_activity_date": 1597146631, "creation_date": 1527094351, "question_id": 50493666, "link": "https://stackoverflow.com/questions/50493666/bring-templated-base-class-conversion-operator-into-derived-scope", "title": "Bring templated base class conversion operator into derived scope", "body": "<p>I have a base class that defines a constrained templated conversion operator</p>\n\n<pre><code>struct base {\n    template &lt;typename C, std::enable_if_t&lt;some_constraints&lt;C&gt;, int&gt; = 0&gt;\n    operator C() const;\n};\n</code></pre>\n\n<p>I also have a derived class that implements another conversion operator with different constraints:</p>\n\n<pre><code>struct derived : base {\n    template &lt;typename P, std::enable_if_t&lt;different_constraints&lt;P&gt;, int&gt; = 0&gt;\n    operator P() const;\n};\n</code></pre>\n\n<p>Unfortunately, the declaration in the derived class hides the operator in the base class. I would like to bring the base operator into the derived scope, but the \"obvious\" syntax</p>\n\n<pre><code>template &lt;typename C&gt;\nusing base::operator C;\n</code></pre>\n\n<p>doesn't work (the compiler seems to try to parse it as an alias template declaration).</p>\n\n<p>Does anyone know of the correct syntax to achieve this?</p>\n"}, {"tags": ["c++", "qt", "mingw", "qt-creator", "mingw32"], "comments": [{"owner": {"reputation": 2503, "user_id": 2014561, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/644933f10c01449f3be20f40717ab5da?s=128&d=identicon&r=PG", "display_name": "Antonio Dias", "link": "https://stackoverflow.com/users/2014561/antonio-dias"}, "edited": false, "score": 0, "creation_date": 1527094650, "post_id": 50493448, "comment_id": 88000373, "body": "Are you sure to not mixing the Qt version and or compiler when build and use <code>windeployqt</code>?"}, {"owner": {"reputation": 2727, "user_id": 2590987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/74cc547d5f8abe676ba67698ee7c0537?s=128&d=identicon&r=PG", "display_name": "Raffaele Rossi", "link": "https://stackoverflow.com/users/2590987/raffaele-rossi"}, "reply_to_user": {"reputation": 2503, "user_id": 2014561, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/644933f10c01449f3be20f40717ab5da?s=128&d=identicon&r=PG", "display_name": "Antonio Dias", "link": "https://stackoverflow.com/users/2014561/antonio-dias"}, "edited": false, "score": 0, "creation_date": 1527094802, "post_id": 50493448, "comment_id": 88000448, "body": "I am new to Qt, I&#39;m not sure..."}, {"owner": {"reputation": 2503, "user_id": 2014561, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/644933f10c01449f3be20f40717ab5da?s=128&d=identicon&r=PG", "display_name": "Antonio Dias", "link": "https://stackoverflow.com/users/2014561/antonio-dias"}, "edited": false, "score": 0, "creation_date": 1527095413, "post_id": 50493448, "comment_id": 88000728, "body": "OK! Due to size of the dlls gave by <code>windeployqt</code> i&#39;m guess that you are in debug mode, please look at the Qt Creator in the box at left side and above the compile (play) button and tell us if it&#39;s true!"}, {"owner": {"reputation": 2727, "user_id": 2590987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/74cc547d5f8abe676ba67698ee7c0537?s=128&d=identicon&r=PG", "display_name": "Raffaele Rossi", "link": "https://stackoverflow.com/users/2590987/raffaele-rossi"}, "reply_to_user": {"reputation": 2503, "user_id": 2014561, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/644933f10c01449f3be20f40717ab5da?s=128&d=identicon&r=PG", "display_name": "Antonio Dias", "link": "https://stackoverflow.com/users/2014561/antonio-dias"}, "edited": false, "score": 0, "creation_date": 1527095467, "post_id": 50493448, "comment_id": 88000760, "body": "Yes it&#39;s debug! I&#39;ve turned it into Release, then Clean All and now I&#39;ve made Build All. I&#39;ll test now and see how it goes!"}, {"owner": {"reputation": 2503, "user_id": 2014561, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/644933f10c01449f3be20f40717ab5da?s=128&d=identicon&r=PG", "display_name": "Antonio Dias", "link": "https://stackoverflow.com/users/2014561/antonio-dias"}, "edited": false, "score": 0, "creation_date": 1527095544, "post_id": 50493448, "comment_id": 88000804, "body": "We&#39;re waiting for your reply! ;)"}, {"owner": {"reputation": 2727, "user_id": 2590987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/74cc547d5f8abe676ba67698ee7c0537?s=128&d=identicon&r=PG", "display_name": "Raffaele Rossi", "link": "https://stackoverflow.com/users/2590987/raffaele-rossi"}, "reply_to_user": {"reputation": 2503, "user_id": 2014561, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/644933f10c01449f3be20f40717ab5da?s=128&d=identicon&r=PG", "display_name": "Antonio Dias", "link": "https://stackoverflow.com/users/2014561/antonio-dias"}, "edited": false, "score": 0, "creation_date": 1527095985, "post_id": 50493448, "comment_id": 88001043, "body": "@AntonioDias it works now! I had to put it into release mode. By the way I had to add a lot of dlls like QtGui.dll, QtCore.dll, libwinpthread, libstdc++ and libstd_gcc!"}, {"owner": {"reputation": 2727, "user_id": 2590987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/74cc547d5f8abe676ba67698ee7c0537?s=128&d=identicon&r=PG", "display_name": "Raffaele Rossi", "link": "https://stackoverflow.com/users/2590987/raffaele-rossi"}, "reply_to_user": {"reputation": 2503, "user_id": 2014561, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/644933f10c01449f3be20f40717ab5da?s=128&d=identicon&r=PG", "display_name": "Antonio Dias", "link": "https://stackoverflow.com/users/2014561/antonio-dias"}, "edited": false, "score": 0, "creation_date": 1527096019, "post_id": 50493448, "comment_id": 88001054, "body": "Is it possible to statically link them to the exe? so I have only the exe (the standalone file). Thank you very much btw antonio!!"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1527096352, "post_id": 50493448, "comment_id": 88001205, "body": "<a href=\"https://stackoverflow.com/questions/1011197/qt-static-linking-and-deployment\" title=\"qt static linking and deployment\">stackoverflow.com/questions/1011197/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2503, "user_id": 2014561, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/644933f10c01449f3be20f40717ab5da?s=128&d=identicon&r=PG", "display_name": "Antonio Dias", "link": "https://stackoverflow.com/users/2014561/antonio-dias"}, "is_accepted": true, "score": 1, "last_activity_date": 1527097899, "creation_date": 1527097899, "answer_id": 50494569, "question_id": 50493448, "link": "https://stackoverflow.com/questions/50493448/qt-cannot-create-standalone-exe/50494569#50494569", "title": "Qt cannot create standalone exe", "body": "<p>From the comments:  Due to size of the dlls gave by <code>windeployqt</code> i guess that you are in Debug mode, switch to Release mode and yours problems will gone!</p>\n\n<p>For a static linking, you can either search for some instructions to make your own static build of Qt or search for a precompiled binaries if you trust the origin! :)</p>\n"}], "owner": {"reputation": 2727, "user_id": 2590987, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/74cc547d5f8abe676ba67698ee7c0537?s=128&d=identicon&r=PG", "display_name": "Raffaele Rossi", "link": "https://stackoverflow.com/users/2590987/raffaele-rossi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 50494569, "answer_count": 1, "score": 0, "last_activity_date": 1527097899, "creation_date": 1527093522, "question_id": 50493448, "link": "https://stackoverflow.com/questions/50493448/qt-cannot-create-standalone-exe", "title": "Qt cannot create standalone exe", "body": "<p>I have seen a lot of topics, questions and solutions online but still I cannot fix this issue. I have an exe which is 1.7 KB size but when I move it to another computer and I try to open it there is the typical error. I use QtCreator <strong>4.4.0</strong>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pm3pg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pm3pg.png\" alt=\"enter image description here\"></a></p>\n\n<p>When I try to add <code>Qt5Core.dll</code>, <code>Qt5Gui.dll</code> and <code>QtWidgets.dll</code> then I get the error </p>\n\n<blockquote>\n  <p>Unable to find the entry point</p>\n</blockquote>\n\n<p>What to do now?</p>\n\n<hr>\n\n<ul>\n<li><p>I have executed <code>windeployqt</code> but I have a 600 MB of dlls!! There are <code>Qt5Core.dll</code> and <code>Qt5Cored.dll</code> among these</p></li>\n<li><p>I have tested the solution I have found online which says \"use static linking\". Well I have added \"<code>CONFIG += static</code>\" then in the IDE I give a Project > Build and Project > Run qmake.</p></li>\n</ul>\n\n<p>Still the errors. I have been struggling with this since yesterday. So what do I have to do? I need to have a single executable or if it's not possible at least an exe with some dlls (but not 600 MB of dlls).</p>\n"}, {"tags": ["c++", "linux", "compilation", "mingw", "cplex"], "answers": [{"comments": [{"owner": {"reputation": 626, "user_id": 2769944, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5fbc09e20c33cb1318804359fae1029d?s=128&d=identicon&r=PG&f=1", "display_name": "Greg K.", "link": "https://stackoverflow.com/users/2769944/greg-k"}, "edited": false, "score": 1, "creation_date": 1527096024, "post_id": 50494061, "comment_id": 88001057, "body": "hmm so this is probably why the platform versions are sufficed with vs2017 and vs2015. Thank you very much. I guess I&#39;ll use my home pc for the rescue :D"}, {"owner": {"reputation": 626, "user_id": 2769944, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5fbc09e20c33cb1318804359fae1029d?s=128&d=identicon&r=PG&f=1", "display_name": "Greg K.", "link": "https://stackoverflow.com/users/2769944/greg-k"}, "edited": false, "score": 0, "creation_date": 1527096405, "post_id": 50494061, "comment_id": 88001231, "body": "Oh btw @rkersh, since you&#39;re part of the cplex optimizer team, I suppose that you can confirm if include files are not different between different cplex distributions? I&#39;m asking because I&#39;m thinking maybe I can at least install the windows version over the linux one and just save a bit of space. Is this going to cause any conflicts of any sort?"}, {"owner": {"reputation": 4187, "user_id": 1718477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iisrz.jpg?s=128&g=1", "display_name": "rkersh", "link": "https://stackoverflow.com/users/1718477/rkersh"}, "reply_to_user": {"reputation": 626, "user_id": 2769944, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5fbc09e20c33cb1318804359fae1029d?s=128&d=identicon&r=PG&f=1", "display_name": "Greg K.", "link": "https://stackoverflow.com/users/2769944/greg-k"}, "edited": false, "score": 0, "creation_date": 1527096836, "post_id": 50494061, "comment_id": 88001447, "body": "As far as I know, the include files are the same regardless of the platform. However, the build process is quite complex and it wouldn\u2019t surprise me if there is an exception to this rule. Disk space is quite cheap these days, so I don\u2019t know that I would waste any effort on this...."}], "tags": [], "owner": {"reputation": 4187, "user_id": 1718477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iisrz.jpg?s=128&g=1", "display_name": "rkersh", "link": "https://stackoverflow.com/users/1718477/rkersh"}, "is_accepted": true, "score": 1, "last_activity_date": 1527095874, "creation_date": 1527095874, "answer_id": 50494061, "question_id": 50493419, "link": "https://stackoverflow.com/questions/50493419/compile-a-windows-executable-from-linux-using-mingw-and-linking-with-cplex-libra/50494061#50494061", "title": "Compile a windows executable from linux using MINGW and linking with CPLEX libraries", "body": "<p>The short answer is no; you probably don't have any hope of getting this to work.</p>\n\n<p>In <code>ilosys.h</code> at line 262, we see the following:</p>\n\n<pre><code>#if !(defined(name2))\n# if defined(ILO_MSVC) || defined(ILO_LINUX) || defined(ILO_APPLE) || defined(ILO_HP11)\n#  undef name2\n#  define name2(a,b)      _name2_aux(a,b)\n#  define _name2_aux(a,b)      a##b\n# else\n#include \"generic.h\"\n# endif\n#endif\n</code></pre>\n\n<p>The suspicious part is that <code>ILO_MSVC</code> is not defined and this is why <code>generic.h</code> is being included. If we go to <code>ilosys.h</code> at line 11, we see:</p>\n\n<pre><code>#if defined(_MSC_VER)\n# undef  _Windows\n# define _Windows\n# undef  _WINDOWS\n# define _WINDOWS\n# undef  ILO_WINDOWS\n# define ILO_WINDOWS\n# undef  ILO_MSVC\n# define ILO_MSVC\n#include &lt;stddef.h&gt;\n# if defined(_WIN64)\n#  undef  ILO64\n#  define ILO64\n#  undef  ILO_WIN64\n#  define ILO_WIN64\n# else\n#  undef  ILO_WIN32\n#  define ILO_WIN32\n# endif\n//# if defined(ILO_MSVC8)\n//#  undef _WIN32_WINNT\n//#  define _WIN32_WINNT 0x0400\n//# endif\n#endif\n</code></pre>\n\n<p>So, <code>ILO_MSVC</code> is only defined if <code>_MSC_VER</code> is defined. And, <code>_MSC_VER</code> is only defined if you have a Microsoft Visual C++ compiler installed (e.g., see <a href=\"https://msdn.microsoft.com/en-us/library/b0084kay.aspx\" rel=\"nofollow noreferrer\">here</a>).</p>\n\n<p>Finally, if you look at the <a href=\"https://www-01.ibm.com/support/docview.wss?uid=swg27019100\" rel=\"nofollow noreferrer\">detailed system requirements</a> for CPLEX and Windows,  it's pretty clear that Microsoft Visual Studio 2015 or 2017 is required.</p>\n"}], "owner": {"reputation": 626, "user_id": 2769944, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5fbc09e20c33cb1318804359fae1029d?s=128&d=identicon&r=PG&f=1", "display_name": "Greg K.", "link": "https://stackoverflow.com/users/2769944/greg-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 50494061, "answer_count": 1, "score": 2, "last_activity_date": 1527095874, "creation_date": 1527093422, "question_id": 50493419, "link": "https://stackoverflow.com/questions/50493419/compile-a-windows-executable-from-linux-using-mingw-and-linking-with-cplex-libra", "title": "Compile a windows executable from linux using MINGW and linking with CPLEX libraries", "body": "<p>The point of this effort is to prevent me from dual booting windows ,having to install CPLEX twice in the same system (storage is quite limited) and ofc be able to compile the required cross-platform executables from my main os which is debian linux.</p>\n\n<p>For this reason i'm using mingw64 and my compilation script looks like this:</p>\n\n<pre><code>#!/bin/sh\n#COMPILATION FLAGS\nFLAGS='-DIL_STD -DILOUSEMT -D_REENTRANT'\nEXTRA='-std=c++11 -static -static-libgcc -static-libstdc++'\n#INCLUDES\nOPL_INCL='-I/opt/ibm/ILOG/CPLEX_Studio128/opl/include'\nCPL_INCL='-I/opt/ibm/ILOG/CPLEX_Studio128/cplex/include'\nCON_INCL='-I/opt/ibm/ILOG/CPLEX_Studio128/concert/include'\n#LINKER\nOPL_LIB='-L/opt/ibm/ILOG/CPLEX_Studio128/opl/lib/x64_windows_vs2017/stat_mda'\nCPL_LIB='-L/opt/ibm/ILOG/CPLEX_Studio128/cplex/lib/x64_windows_vs2017/stat_mda'\nCON_LIB='-L/opt/ibm/ILOG/CPLEX_Studio128/concert/lib/x64_windows_vs2017/stat_mda'\n\n#echo $FLAGS\n/usr/bin/x86_64-w64-mingw32-g++ $FLAGS $OPL_INCL $EXTRA main.cpp $OPL_LIB $CON_LIB $CPL_LIB -lcplex -lm -lpthread\n#g++ -std=c++11 $FLAGS $OPL_INCL main.cpp $OPL_LIB $CON_LIB $CPL_LIB -lcplex -lm -lpthread\n</code></pre>\n\n<p>What I have done is that I copied the windows version of the library files from another windows installation, and I'm now trying to compile my code using the global (I suppose) include files but using the windows version (.lib) of the necessary cplex libraries.</p>\n\n<p>I thought that the nightmare would be the linking, but to my surprise, I didn't even manage to get there. The Mingw compiler is aborting compilation because of a <code>generic.h</code> file missing (which from what I understand with a bit of searching, it should be related with the kernel or something)</p>\n\n<pre><code>In file included from /opt/ibm/ILOG/CPLEX_Studio128/opl/include/ilconcert/iloenv.h:21:0,\n                 from /opt/ibm/ILOG/CPLEX_Studio128/opl/include/ilconcert/iloalg.h:21,\n                 from /opt/ibm/ILOG/CPLEX_Studio128/opl/include/ilconcert/ilomodel.h:21,\n                 from /opt/ibm/ILOG/CPLEX_Studio128/opl/include/ilcplex/ilocplex.h:27,\n                 from /opt/ibm/ILOG/CPLEX_Studio128/opl/include/ilopl/iloopl.h:23,\n                 from main.cpp:3:\n/opt/ibm/ILOG/CPLEX_Studio128/opl/include/ilconcert/ilosys.h:262:21: fatal error: generic.h: No such file or directory\n #include \"generic.h\"\n                     ^\ncompilation terminated.\n</code></pre>\n\n<p>I also tried just for testing to compile using <code>g++</code> and this error was quickly bypassed and as expected the new errors are related with linking the cplex library : <code>/usr/bin/ld: cannot find -lcplex</code>, which is probably missing cause I have not included the linux library folders. </p>\n\n<p>Do I have any hopes to do that or is this impossible in the first place? </p>\n\n<p>PS: I have a much simpler piece of code where I'm doing exactly the same thing (no CPLEX) involved and compilation works like a charm. So I suppose that the issue should be also CPLEX related.</p>\n"}, {"tags": ["c++", "qt", "containers", "initializer-list", "qhash"], "answers": [{"tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1527094397, "last_edit_date": 1527094397, "creation_date": 1527093951, "answer_id": 50493562, "question_id": 50493244, "link": "https://stackoverflow.com/questions/50493244/initializing-const-qhash-by-joining-with-an-existing-qhash/50493562#50493562", "title": "Initializing const QHash by joining with an existing QHash", "body": "<pre><code>const QHash&lt;QString,int&gt; hash2 = QHash&lt;QString,int&gt;{\n    {\"four\", 4},\n    {\"five\", 5}\n}.unite(hash1);\n</code></pre>\n\n<p>Bit shorter</p>\n\n<pre><code>const auto hash2 = QHash&lt;QString,int&gt;{\n    {\"four\", 4},\n    {\"five\", 5}\n}.unite(hash1);\n</code></pre>\n\n<p>If you remember how <code>operator+</code> is expanded then you will understand that call of <code>unite</code> or call of <code>operator+</code> are grammatically the same.</p>\n\n<pre><code>const QList&lt;QString&gt; data2 =\n     data1.operator+(\n     QList&lt;QString&gt;({\n        \"four\",\n        \"five\"\n     }));\n</code></pre>\n"}], "owner": {"reputation": 527, "user_id": 5707690, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/12b77683ed5dba1c5193befbdaee28f5?s=128&d=identicon&r=PG", "display_name": "Maximko", "link": "https://stackoverflow.com/users/5707690/maximko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "accepted_answer_id": 50493562, "answer_count": 1, "score": 1, "last_activity_date": 1527094397, "creation_date": 1527092760, "question_id": 50493244, "link": "https://stackoverflow.com/questions/50493244/initializing-const-qhash-by-joining-with-an-existing-qhash", "title": "Initializing const QHash by joining with an existing QHash", "body": "<p>In my project I need several constant hash-containers which are defined outside classes and functions and so are global. With that, some of these containers should overlap. With lists I would do the following to combine second <code>const</code> list with the first <code>const</code> list:</p>\n\n<pre><code>const QList&lt;QString&gt; data1({\n     \"one\",\n     \"two\",\n     \"three\"\n });\n\nconst QList&lt;QString&gt; data2 =\n     data1 + \n     QList&lt;QString&gt;({\n        \"four\",\n        \"five\"\n     });\n</code></pre>\n\n<p>But this doesn't work with QHashes, as there is no <code>+</code> operator for them. Instead, they have <code>unite</code> member function, but I cannot use it since containers are <code>const</code>. So what I want is something like this:</p>\n\n<pre><code>const QHash&lt;QString,int&gt; hash1{\n    {\"one\", 1},\n    {\"two\", 2},\n    {\"three\", 3}\n};\n\nconst QHash&lt;QString,int&gt; hash2 = \n    hash1 +\n    QHash&lt;QString,int&gt;({\n    {\"four\", 4},\n    {\"five\", 5}\n});\n</code></pre>\n\n<p>or</p>\n\n<pre><code>const QHash&lt;QString,int&gt; hash2({\n    {\"four\", 4},\n    {\"five\", 5}\n}).unite(hash1);\n</code></pre>\n"}, {"tags": ["c++", "c", "makefile", "shared-libraries", "gnu"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1527092939, "post_id": 50493108, "comment_id": 87999480, "body": "Have you added your libyaml location to <code>LD_LIBRARY_PATH</code>?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1527094334, "post_id": 50493108, "comment_id": 88000219, "body": "I dislike how people come, ask incomplete questions, and then leave..."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1527096649, "post_id": 50493108, "comment_id": 88001337, "body": "There are so many ways the linking could go wrong. without being able to reproduce we can only guess."}, {"owner": {"reputation": 37, "user_id": 4908929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270be1d222ba1a39ebd937df33307873?s=128&d=identicon&r=PG&f=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/4908929/pankaj"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1527183283, "post_id": 50493108, "comment_id": 88042723, "body": "@YSC Yes I have added that."}], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 4908929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270be1d222ba1a39ebd937df33307873?s=128&d=identicon&r=PG&f=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/4908929/pankaj"}, "is_accepted": false, "score": 1, "last_activity_date": 1527183601, "creation_date": 1527183601, "answer_id": 50515207, "question_id": 50493108, "link": "https://stackoverflow.com/questions/50493108/linking-shared-library-dependency-not-being-listing-in-ldd/50515207#50515207", "title": "Linking shared library dependency not being listing in ldd", "body": "<p>The one approach which I found is disabling optimization using the gcc flag  -Wl,--no-as-needed. Since I am already linking using -lyaml, symbols are getting resolved. It works but not efficient.</p>\n"}], "owner": {"reputation": 37, "user_id": 4908929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270be1d222ba1a39ebd937df33307873?s=128&d=identicon&r=PG&f=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/4908929/pankaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527183601, "creation_date": 1527092274, "last_edit_date": 1527092663, "question_id": 50493108, "link": "https://stackoverflow.com/questions/50493108/linking-shared-library-dependency-not-being-listing-in-ldd", "title": "Linking shared library dependency not being listing in ldd", "body": "<p>There is library which is compiled against -lyaml. But libyaml.so is not getting listed as dependency by ldd. Build is happening successfully using autoconf tool chain. </p>\n\n<pre><code>$ nm libxxxx.so | grep -i yaml\n U yaml_document_delete\n U yaml_document_get_node\n U yaml_parser_delete\n U yaml_parser_initialize\n U yaml_parser_load\n U yaml_parser_set_input_file\n\n\n$ readelf -d libxxxx.so\n    Tag        Type                         Name/Value\n    0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]\n    0x000000000000000e (SONAME)             Library soname: [libxxxx.so.0] \n</code></pre>\n\n<p>There is another shared library which depends depend upon libxxxx.so. </p>\n\n<pre><code>$ ldd  lib/libxxxx1.so\n    libzmq.so.5 =&gt; /usr/lib/x86_64-linux-gnu/libzmq.so.5 (0x00007fd45e072000)\n    libxmaapi.so.0 =&gt; \n</code></pre>\n\n<p>When I am linking my executable with libxxxx1.so, it is giving undefined symbols error. The question is how do I link against library not found in dependency tree? </p>\n\n<p>This question provides approaches to ignore the problem.\n<a href=\"https://stackoverflow.com/questions/11055569/linking-with-dynamic-library-with-dependencies\">Linking with dynamic library with dependencies</a></p>\n"}, {"tags": ["c++", "templates", "constructor", "template-meta-programming"], "comments": [{"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 2, "creation_date": 1527092171, "post_id": 50492960, "comment_id": 87999064, "body": "Careful, <code>std::vector&lt;bool&gt; z();</code> is the declaration of a function."}, {"owner": {"reputation": 607, "user_id": 8225336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418c2e0a00933c6e12a63c1bca55ea27?s=128&d=identicon&r=PG&f=1", "display_name": "tangoal", "link": "https://stackoverflow.com/users/8225336/tangoal"}, "edited": false, "score": 0, "creation_date": 1527092253, "post_id": 50492960, "comment_id": 87999102, "body": "Do you just want to store the different data types or do you want to do something &quot;similar&quot; with the data, for example by calling a method &quot;doSomething()&quot; on an instance of A or B and the specific implementation of &quot;doSomething()&quot; correctly handles the data members? If so, you can also think of an abstract base class for A and B, which has a virtual method &quot;doSomething()&quot;."}, {"owner": {"reputation": 131, "user_id": 6804029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2aedd04816e2740dcec19e44693ccf9?s=128&d=identicon&r=PG&f=1", "display_name": "Jaeya", "link": "https://stackoverflow.com/users/6804029/jaeya"}, "reply_to_user": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1527092999, "post_id": 50492960, "comment_id": 87999517, "body": "@O&#39;Neil yes, most-vexing parse, I wrote this on a rush :) Thanks."}, {"owner": {"reputation": 131, "user_id": 6804029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2aedd04816e2740dcec19e44693ccf9?s=128&d=identicon&r=PG&f=1", "display_name": "Jaeya", "link": "https://stackoverflow.com/users/6804029/jaeya"}, "reply_to_user": {"reputation": 607, "user_id": 8225336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418c2e0a00933c6e12a63c1bca55ea27?s=128&d=identicon&r=PG&f=1", "display_name": "tangoal", "link": "https://stackoverflow.com/users/8225336/tangoal"}, "edited": false, "score": 0, "creation_date": 1527276942, "post_id": 50492960, "comment_id": 88083595, "body": "@tangoal The second. My use case is highly performance-sensitive. It was first implemented with virtual methods. Then moved to hard-code each would-be specialization, got significant speedup. Now I need to do this for a couple more specializations and the code is becoming a pain to maintain."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1527092282, "post_id": 50493033, "comment_id": 87999117, "body": "That will have VERY unpleasing effect of screwing up the copy constructor for holder class."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527092296, "post_id": 50493033, "comment_id": 87999131, "body": "Care with template constructor, which might be better match than copy constructor. SFINAE might help in that regards."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527093079, "post_id": 50493033, "comment_id": 87999569, "body": "@Jarod42 Tried."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1527093655, "post_id": 50493033, "comment_id": 87999871, "body": "There is still the (evil) case when <code>T</code> can be constructed with <code>TpC&lt;T&gt;</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527095712, "post_id": 50493033, "comment_id": 88000905, "body": "You can check that decayed 1st arg is not <code>TpC&lt;T&gt;</code> (when there are only one argument). It becomes complicated and verbose :/"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527096375, "post_id": 50493033, "comment_id": 88001216, "body": "@Jarod42 Just go the in_place route. This is what they use for <code>std::variant</code> constructor."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1527099742, "post_id": 50493033, "comment_id": 88002821, "body": "That&#39;s not the right way to check for constructibility."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1527099772, "post_id": 50493033, "comment_id": 88002844, "body": "@T.C. that being?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1527108110, "post_id": 50493033, "comment_id": 88007077, "body": "@SergeyA <code>is_constructible</code>."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527128392, "post_id": 50493033, "comment_id": 88012654, "body": "@Jarod42 Tried again."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 3, "last_activity_date": 1527128366, "last_edit_date": 1527128366, "creation_date": 1527092004, "answer_id": 50493033, "question_id": 50492960, "link": "https://stackoverflow.com/questions/50492960/writing-constructor-of-template-class-with-template-argument-depending-parameter/50493033#50493033", "title": "Writing constructor of template class with template argument-depending parameters", "body": "<p>You could write a template constructor with <a href=\"https://en.cppreference.com/w/cpp/language/parameter_pack\" rel=\"nofollow noreferrer\">parameter pack</a> for <code>TpC</code>. (As the comments suggested I used <a href=\"https://en.cppreference.com/w/cpp/language/sfinae\" rel=\"nofollow noreferrer\">SFINAE</a> to constrain template, otherwise it might be better match than copy constructor. See the whole code snippet from the link I posted.)</p>\n\n<pre><code>template &lt;typename T, typename... U&gt;\nstruct my_is_same {\n    constexpr static bool value = false;\n};\ntemplate &lt;typename T1, typename T2, typename... U&gt;\nstruct my_is_same&lt;T1, T2, U...&gt; {\n    constexpr static bool value = std::is_same_v&lt;T1, std::remove_cvref_t&lt;T2&gt;&gt;;\n};\ntemplate &lt;typename T, typename... U&gt;\ninline constexpr bool my_is_same_v = my_is_same&lt;T, U...&gt;::value;\n\ntemplate &lt;typename T&gt;\nclass TpC {\n    T t;\npublic:\n    template &lt;typename... Args, typename = std::enable_if_t&lt;\n                                             !my_is_same_v&lt;TpC, Args...&gt; &amp;&amp;\n                                             std::is_constructible_v&lt;T, Args&amp;&amp;...&gt;\n                                           &gt;&gt;\n    TpC(Args&amp;&amp; ... args) : t(std::forward&lt;Args&gt;(args)...) {}\n};\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>int x;\ndouble y;\nstd::vector&lt;bool&gt; z;\nTpC&lt;A&gt; obj_a (x, y);\nTpC&lt;B&gt; obj_b (z);\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/sNSxx7pAnMrGtI41\" rel=\"nofollow noreferrer\">LIVE</a></p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 2, "last_activity_date": 1527092638, "last_edit_date": 1527092638, "creation_date": 1527092451, "answer_id": 50493156, "question_id": 50492960, "link": "https://stackoverflow.com/questions/50492960/writing-constructor-of-template-class-with-template-argument-depending-parameter/50493156#50493156", "title": "Writing constructor of template class with template argument-depending parameters", "body": "<p>You would need to use a template constructor. However, in order to prevent this constructor being called instead of the copy constructor, you need to add a bit of disambiguation. For example:</p>\n\n<pre><code>template&lt;class T&gt;\nclass TpC {\n     T t;\npublic:\n     struct in_place_t { };\n     static constexpr in_place_t in_place;\n     template&lt;class... ARGS&gt;\n     TpC(in_place_t, ARGS... args) : t(std::forward&lt;ARGS&gt;(args)...) {}\n};\n</code></pre>\n\n<p>In C++17 <code>in_place</code> is available in <code>std</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1527096285, "post_id": 50493800, "comment_id": 88001173, "body": "This answer doesn&#39;t add anything to the one already posted and it suffers the same flaw if the original version of it."}, {"owner": {"reputation": 89, "user_id": 5103768, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_wt3s7M5drc/AAAAAAAAAAI/AAAAAAAAAEY/2dhtwo11jUw/photo.jpg?sz=128", "display_name": "flamewing", "link": "https://stackoverflow.com/users/5103768/flamewing"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1527098482, "post_id": 50493800, "comment_id": 88002229, "body": "I am sorry that typing on my phone made me slow enough that I went from typing when there where no answers to bring the third."}], "tags": [], "owner": {"reputation": 89, "user_id": 5103768, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_wt3s7M5drc/AAAAAAAAAAI/AAAAAAAAAEY/2dhtwo11jUw/photo.jpg?sz=128", "display_name": "flamewing", "link": "https://stackoverflow.com/users/5103768/flamewing"}, "is_accepted": false, "score": -1, "last_activity_date": 1527094839, "creation_date": 1527094839, "answer_id": 50493800, "question_id": 50492960, "link": "https://stackoverflow.com/questions/50492960/writing-constructor-of-template-class-with-template-argument-depending-parameter/50493800#50493800", "title": "Writing constructor of template class with template argument-depending parameters", "body": "<p>If you are using c++11 or later, you can use a variadic template constructor with a parameter pack expansion calling std::forward on the constructor arguments. Something like:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass TpC {\n    T base;\npublic:\n    template &lt;typename... Args&gt;\n    TpC(Args&amp;&amp;... args)\n    : base(std::forward&lt;Args&gt;(args)...) {\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 6804029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2aedd04816e2740dcec19e44693ccf9?s=128&d=identicon&r=PG&f=1", "display_name": "Jaeya", "link": "https://stackoverflow.com/users/6804029/jaeya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 50493156, "answer_count": 3, "score": 0, "last_activity_date": 1527277140, "creation_date": 1527091671, "last_edit_date": 1527277140, "question_id": 50492960, "link": "https://stackoverflow.com/questions/50492960/writing-constructor-of-template-class-with-template-argument-depending-parameter", "title": "Writing constructor of template class with template argument-depending parameters", "body": "<p>Consider the following two classes with constructors that accept wildly different sets of parameters.</p>\n\n<pre><code>class A {\npublic:\n  A(int x, double y) {\n    //do something\n  }\n};\n\nclass B {\npublic:\n  B(const std::vector&lt;bool&gt;&amp; x) {\n    //do something\n  }\n};\n</code></pre>\n\n<p>Now, I want to write a class template TpC that will have an object (which might be A or B or something else). In other words, I want to be able to use the following:</p>\n\n<pre><code>int x;\ndouble y;\nstd::vector&lt;bool&gt; z;\nTpC&lt;A&gt; obj_a (x, y);\nTpC&lt;B&gt; obj_b (z);\n</code></pre>\n\n<p>How can I write a constructor for TpC that is dependent on the parameters of the constructors of A and B? It would be acceptable to write something like a trait/policy to tell TpC what the parameters should be for each particular specialization.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1527091929, "post_id": 50492934, "comment_id": 87998940, "body": "Don&#39;t post links to results as images. Put it <i>in</i> the question as <i>text</i>."}, {"owner": {"reputation": 39, "user_id": 9835675, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JianYuan Kou", "link": "https://stackoverflow.com/users/9835675/jianyuan-kou"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527123988, "post_id": 50492934, "comment_id": 88011704, "body": "@JesperJuhl ok, thank you"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 9, "last_activity_date": 1527091756, "creation_date": 1527091756, "answer_id": 50492979, "question_id": 50492934, "link": "https://stackoverflow.com/questions/50492934/why-is-this-the-output-using-pointing-c/50492979#50492979", "title": "Why is this the output using pointing c++", "body": "<p>There is a special overload for <code>const char*</code> to display c-string content, to print the address, cast it to <code>void*</code>:</p>\n\n<pre><code>cout &lt;&lt; static_cast&lt;void*&gt;(p) &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 9835675, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JianYuan Kou", "link": "https://stackoverflow.com/users/9835675/jianyuan-kou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1527092122, "answer_count": 1, "score": 3, "last_activity_date": 1527092463, "creation_date": 1527091564, "last_edit_date": 1527092463, "question_id": 50492934, "link": "https://stackoverflow.com/questions/50492934/why-is-this-the-output-using-pointing-c", "closed_reason": "Duplicate", "title": "Why is this the output using pointing c++", "body": "<p>I don't know why this code gives the result it does.  I thought the pointer <code>p</code> should be the address of <code>str</code> and the output should always be the address in the while loop.  Why is the result is the real value of <code>str</code> like that?</p>\n\n<pre><code>char str[] = \"we are poor students\";//\u8fd9\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\ncout&lt;&lt;str&lt;&lt;endl;\nchar *p = str;\nwhile (*p != '\\0')\n{\n    cout &lt;&lt; p&lt;&lt;endl;\n    p++;\n}\nreturn 0;\n</code></pre>\n\n<p>This is the result it gives:</p>\n\n<blockquote>\n<pre><code>we are poor students\nwe are poor students\ne are poor students\n are poor students\nare poor students\nre poor students\ne poor students\n poor students\npoor students\noor students\nor students\nr students\n students\nstudents\ntudents\nudents\ndents\nents\nnts\nts\ns\n</code></pre>\n</blockquote>\n"}, {"tags": ["c++", "sql", "c", "database", "sqlite"], "comments": [{"owner": {"reputation": 627, "user_id": 1976388, "user_type": "registered", "profile_image": "https://graph.facebook.com/771700761/picture?type=large", "display_name": "Rajat Jaiswal", "link": "https://stackoverflow.com/users/1976388/rajat-jaiswal"}, "edited": false, "score": 0, "creation_date": 1527091610, "post_id": 50492892, "comment_id": 87998761, "body": "Use Count  SELECT COUNT(ORDER_STATUS) As Counter FROM REPAIR WHERE ORDER_STATUS = &#39;Waiting for client&#39;&quot;"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1527091614, "post_id": 50492892, "comment_id": 87998764, "body": "Did you search the web : <a href=\"https://www.tutorialspoint.com/sqlite/sqlite_c_cpp.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/sqlite/sqlite_c_cpp.htm</a>?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1527091621, "post_id": 50492892, "comment_id": 87998768, "body": "Your &quot;query&quot; is currently just a C-string. you should probably have a query object somewhere."}, {"owner": {"reputation": 11, "user_id": 9835697, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j4q7kHBUnO4/AAAAAAAAAAI/AAAAAAAAAwA/jT-h4d4GvO8/photo.jpg?sz=128", "display_name": "PyQ", "link": "https://stackoverflow.com/users/9835697/pyq"}, "reply_to_user": {"reputation": 627, "user_id": 1976388, "user_type": "registered", "profile_image": "https://graph.facebook.com/771700761/picture?type=large", "display_name": "Rajat Jaiswal", "link": "https://stackoverflow.com/users/1976388/rajat-jaiswal"}, "edited": false, "score": 0, "creation_date": 1527098007, "post_id": 50492892, "comment_id": 88002006, "body": "Thanks @RajatJaiswal. I&#39;ve used your idea and changed some lines in callback and it works."}, {"owner": {"reputation": 627, "user_id": 1976388, "user_type": "registered", "profile_image": "https://graph.facebook.com/771700761/picture?type=large", "display_name": "Rajat Jaiswal", "link": "https://stackoverflow.com/users/1976388/rajat-jaiswal"}, "edited": false, "score": 0, "creation_date": 1527128554, "post_id": 50492892, "comment_id": 88012695, "body": "You are welcome @PyQ"}], "owner": {"reputation": 11, "user_id": 9835697, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j4q7kHBUnO4/AAAAAAAAAAI/AAAAAAAAAwA/jT-h4d4GvO8/photo.jpg?sz=128", "display_name": "PyQ", "link": "https://stackoverflow.com/users/9835697/pyq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527091423, "creation_date": 1527091423, "question_id": 50492892, "link": "https://stackoverflow.com/questions/50492892/return-information-about-existing-data-sqlite", "title": "Return information about existing data SQLite", "body": "<p>I want to have information if data exists or not.\nHere is a sample:</p>\n\n<pre><code>if(\"SELECT ORDER_STATUS FROM REPAIR WHERE ORDER_STATUS = 'Waiting for client'\" != NULL) {\n   printf(\"\\nNotification:\");\n   printf(\"\\nThere are unclaimed cars.\");}\n</code></pre>\n\n<p>I know that it doesn't work. SQL commands don't return NULL in this situation. Do you have any ideas how to do it?</p>\n"}, {"tags": ["c++", "omnet++"], "answers": [{"comments": [{"owner": {"reputation": 466, "user_id": 2033140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ec63a8b33f3136c8de743fb282e3be4?s=128&d=identicon&r=PG&f=1", "display_name": "mapf", "link": "https://stackoverflow.com/users/2033140/mapf"}, "edited": false, "score": 0, "creation_date": 1527235826, "post_id": 50516841, "comment_id": 88060820, "body": "Thanks, this works. However, this seems to me like a brute-force method. I think it should not be my task as a developer to do this when I am using an IDE including the possibilities to set all the options mentioned above, but at least it works now."}, {"owner": {"reputation": 5342, "user_id": 4653172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c894c1021e3092a98cdd62d88e69819?s=128&d=identicon&r=PG&f=1", "display_name": "Jerzy D.", "link": "https://stackoverflow.com/users/4653172/jerzy-d"}, "reply_to_user": {"reputation": 466, "user_id": 2033140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ec63a8b33f3136c8de743fb282e3be4?s=128&d=identicon&r=PG&f=1", "display_name": "mapf", "link": "https://stackoverflow.com/users/2033140/mapf"}, "edited": false, "score": 1, "creation_date": 1527244041, "post_id": 50516841, "comment_id": 88065631, "body": "I agree with you. It looks like a bug, and I have reported it in <a href=\"https://dev.omnetpp.org/bugs/view.php?id=1002\" rel=\"nofollow noreferrer\">OMNeT++ Bugtracker</a>."}], "tags": [], "owner": {"reputation": 5342, "user_id": 4653172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c894c1021e3092a98cdd62d88e69819?s=128&d=identicon&r=PG&f=1", "display_name": "Jerzy D.", "link": "https://stackoverflow.com/users/4653172/jerzy-d"}, "is_accepted": true, "score": 1, "last_activity_date": 1527190143, "creation_date": 1527190143, "answer_id": 50516841, "question_id": 50492792, "link": "https://stackoverflow.com/questions/50492792/reference-header-from-other-project-in-omnet/50516841#50516841", "title": "Reference header from other project in Omnet++", "body": "<p>Try to manually add directory with header files to the referencing project.<br>\nTo do that: in the referencing project go to <code>Project</code> | <code>Properties</code> | <code>OMNeT++</code> | <code>Makemeke</code> | select root or <code>src</code> directory | <code>Options</code>, then <code>Custom</code> | <code>Makefrag</code> and write the following line:<br></p>\n\n<pre><code>CFLAGS += -IC:/path/to/sharedproject\n</code></pre>\n\n<p>where <code>C:/path/to/sharedproject</code> is the directory that contains header files of your shared project.</p>\n"}], "owner": {"reputation": 466, "user_id": 2033140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ec63a8b33f3136c8de743fb282e3be4?s=128&d=identicon&r=PG&f=1", "display_name": "mapf", "link": "https://stackoverflow.com/users/2033140/mapf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 1, "accepted_answer_id": 50516841, "answer_count": 1, "score": 1, "last_activity_date": 1527190143, "creation_date": 1527090991, "question_id": 50492792, "link": "https://stackoverflow.com/questions/50492792/reference-header-from-other-project-in-omnet", "title": "Reference header from other project in Omnet++", "body": "<p>I am currently trying to build a shared library with C++ code which I can use in multiple Omnet++ projects. I am using Omnet++ 5.3. I created a new Omnet++ project for this purpose, put in my source files and selected the following options in the makemake options:</p>\n\n<p>Target type: <code>Shared library</code> and <code>Export this shared/static library for other projects</code></p>\n\n<p>Compile: <code>Export include paths for other projects</code> and <code>Force compiling object files for use in DLLs</code></p>\n\n<p>In the referencing project I did the following in the makemake options:</p>\n\n<p>Target: <code>Executable</code></p>\n\n<p>Compile: <code>Add include paths exported from referenced projects</code> and <code>Add include dirs and other compile options from enabled project features</code></p>\n\n<p>Link: <code>Link with libraries exported from referenced projects</code> and <code>Add libraries and other linker options from enabled project features</code></p>\n\n<p>Additionally, I added the shared library project to the project references. In the referencing project I want to include a header file of the shared library project. However, I cannot include it. I tried different schemes for including it such as <code>\"MODULENAME/HEADERFILE\"</code>, <code>&lt;MODULENAME/HEADERFILE&gt;</code>, <code>\"HEADERFILE\"</code>, <code>&lt;HEADERFILE&gt;</code>. I tried it on macOS and on Windows. Any ideas how to fix this? Has this something to do with the changed include scheme in the newer Omnet versions where the relative path to header files has to be provided? Thanks a lot!</p>\n"}, {"tags": ["c++", "algorithm", "recursion", "karatsuba"], "comments": [{"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1527092592, "post_id": 50492747, "comment_id": 87999281, "body": "What is the Karatsuba algorithm?"}, {"owner": {"reputation": 15, "user_id": 9724217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf66eb015cde070c5a88627470d5231?s=128&d=identicon&r=PG&f=1", "display_name": "Jithakrishna Prakash", "link": "https://stackoverflow.com/users/9724217/jithakrishna-prakash"}, "reply_to_user": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1527098557, "post_id": 50492747, "comment_id": 88002269, "body": "It&#39;s an algorithm to multiply two integers. It&#39;s more efficient than the conventional elementary school approach. But unfortunately I do not have the adequate knowledge to elaborate more."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1527145772, "post_id": 50492747, "comment_id": 88018420, "body": "using power and modulo for multiplication seems to be not very effective implementation. Usually power of 2 is used as base so you can get rid of those and use bit operations instead. In case of base 10 you can do this on strings or BCD ... see my <a href=\"https://stackoverflow.com/q/18465326/2521214\">Fast bignum square computation</a> for comparison of more multiplication methods (Karatsuba with code included)"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9724217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf66eb015cde070c5a88627470d5231?s=128&d=identicon&r=PG&f=1", "display_name": "Jithakrishna Prakash", "link": "https://stackoverflow.com/users/9724217/jithakrishna-prakash"}, "edited": false, "score": 0, "creation_date": 1527098353, "post_id": 50493484, "comment_id": 88002181, "body": "This community is so responsive! Thank you so much for the answer! I still didn&#39;t get why passing n as a parameter didn&#39;t work albeit a messy approach.. Nevertheless I&#39;m quite happy that there weren&#39;t any major modifications to my code"}, {"owner": {"reputation": 818, "user_id": 2424611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mY3Hk.jpg?s=128&g=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/2424611/mahesh"}, "reply_to_user": {"reputation": 15, "user_id": 9724217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf66eb015cde070c5a88627470d5231?s=128&d=identicon&r=PG&f=1", "display_name": "Jithakrishna Prakash", "link": "https://stackoverflow.com/users/9724217/jithakrishna-prakash"}, "edited": false, "score": 0, "creation_date": 1527105422, "post_id": 50493484, "comment_id": 88005755, "body": "According to the algorithm, you need to set the value of n to the approxLog of the bigger number in every recursion. You were not passing that value. You could theoretically calculate it at the end of every recursion and pass the new value, but that would be wasteful."}, {"owner": {"reputation": 818, "user_id": 2424611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mY3Hk.jpg?s=128&g=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/2424611/mahesh"}, "reply_to_user": {"reputation": 15, "user_id": 9724217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf66eb015cde070c5a88627470d5231?s=128&d=identicon&r=PG&f=1", "display_name": "Jithakrishna Prakash", "link": "https://stackoverflow.com/users/9724217/jithakrishna-prakash"}, "edited": false, "score": 0, "creation_date": 1527105495, "post_id": 50493484, "comment_id": 88005790, "body": "Passing n wasn&#39;t the problem in itself, but not correctly calculating the value of n in every recursion was the root cause. Not passing n is a by-product of fixing the actual issue."}], "tags": [], "owner": {"reputation": 818, "user_id": 2424611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mY3Hk.jpg?s=128&g=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/2424611/mahesh"}, "is_accepted": true, "score": 0, "last_activity_date": 1527093654, "creation_date": 1527093654, "answer_id": 50493484, "question_id": 50492747, "link": "https://stackoverflow.com/questions/50492747/queston-on-karatsuba-recursion/50493484#50493484", "title": "Queston on Karatsuba Recursion", "body": "<p>The problem is that in each recursion, you should take the approx. log of the the bigger of <code>x</code> and <code>y</code>. So the following alteration in your code would fix the problem (notice the commented out portions too!):</p>\n\n<pre><code>long long int multiply(int x, int y)//, int n)\n{\n    int a = 0, b = 0, c = 0, d = 0;\n    int ac = 0, bd = 0, total = 0, sum = 0;\n    int *ptr_a = &amp;a;\n    int *ptr_b = &amp;b;\n    int *ptr_c = &amp;c;\n    int *ptr_d = &amp;d;\n    int n = (x&gt;y)?approxLog(x, 10):approxLog(y, 10);\n    num_split(x, n, ptr_a, ptr_b);\n    num_split(y, n, ptr_c, ptr_d);\n\n    if((x &lt; 10) || (y &lt; 10)) {\n        return x*y;\n    }\n    else {\n        ac = multiply(a, c);//, odd2(n));\n        bd = multiply(b, d);//, n/2);\n        total = multiply((a+b), (c+d));//, odd2(n));\n        cout &lt;&lt; total &lt;&lt;  endl;\n        sum = total - ac - bd;\n        return power(10, odd1(n))*ac + power(10, (n/2))*sum + bd;\n    }\n}\n\nint main() {\n    int x = 134546, y = 1234;\n    //int n = approxLog(x, 10);\n    long long int product = multiply(x, y);//, n);\n    cout&lt;&lt;\"Karatsuba: \"&lt;&lt;product&lt;&lt;endl;\n    cout&lt;&lt;\"Normal:    \"&lt;&lt;x*y&lt;&lt;endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9724217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf66eb015cde070c5a88627470d5231?s=128&d=identicon&r=PG&f=1", "display_name": "Jithakrishna Prakash", "link": "https://stackoverflow.com/users/9724217/jithakrishna-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 50493484, "answer_count": 1, "score": 0, "last_activity_date": 1527093654, "creation_date": 1527090857, "question_id": 50492747, "link": "https://stackoverflow.com/questions/50492747/queston-on-karatsuba-recursion", "title": "Queston on Karatsuba Recursion", "body": "<p>I'm trying to implement a recursive Karatsuba algorithm. I successfully coded a recursive algorithm for multiplication but it calculates ad and bc. \nHowever, for this program, I've tried noting down each intermediate value namely ac, bd, total, sum. Many values don't turn up as the expected value. I can't figure out where my code is getting messed up. I'm still an amateur programmer and I've spent already several hours trying to debug but now I have no choice but to post my large code here:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint approxLog(int n, int b) {\n    return !(n/b &lt; 1) ? 1+approxLog(n/b, b) : 1;\n}\n\nint power(int b, int e) {\n    return (e &lt; 1) ? 1 : b*power(b, e-1);\n}\n\nint odd1(int n) {\n    if(n%2 != 0)\n        return n-1;\n    else\n        return n;\n}\n\nint odd2(int n) {\n    if(n%2 == 0)\n        return n/2;\n    else\n        return n/2 + 1;\n}\n\nvoid num_split (int num, int d, int *a, int *b) {\n    int  i = 1, tmp = 0, j = 1, k = 0;\n    while (i &lt;= d/2) {\n        tmp += (num%10)*power(10, i-1);\n        num /= 10;\n        i++;\n    }\n    *b = tmp;\n    tmp = 0;\n    while (i &lt;= d) {\n        tmp += (num%10)*power(10, j-1);\n        num /= 10;\n        i++;\n        j++;\n    }\n    *a = tmp;\n    tmp = 0;\n}\n\nlong long int multiply(int x, int y, int n) {\n    int a = 0, b = 0, c = 0, d = 0;\n    int ac = 0, bd = 0, total = 0, sum = 0;\n    int *ptr_a = &amp;a;\n    int *ptr_b = &amp;b;\n    int *ptr_c = &amp;c;\n    int *ptr_d = &amp;d;\n    num_split(x, n, ptr_a, ptr_b);\n    num_split(y, n, ptr_c, ptr_d);\n\n    if((x &lt; 10) || (y &lt; 10)) {\n        return x*y;\n    }\n    else {\n        ac = multiply(a, c, odd2(n));\n        bd = multiply(b, d, n/2);\n        total = multiply((a+b), (c+d), odd2(n));\n        // cout &lt;&lt; total &lt;&lt;  endl;\n        sum = total - ac - bd;\n        return power(10, odd1(n))*ac + power(10, n/2))*sum + bd;\n    }\n}\n\nint main() {\n    int x = 1234, y = 1234;\n    int n = approxLog(x, 10);\n    long long int product = multiply(x, y, n);\n    cout &lt;&lt; product &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "gdb", "kcachegrind"], "comments": [{"owner": {"reputation": 1651, "user_id": 635822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd51a3c79639c315af5864adc731298?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/635822/jason"}, "edited": false, "score": 0, "creation_date": 1527090910, "post_id": 50492175, "comment_id": 87998374, "body": "I don&#39;t know if there is an option for that, but I do something similar with   smbclient in a bash script.  Something like <code>smbclient \\\\\\\\some_network\\\\subdirectory --user=${smbuser} -c &quot;prompt; cd \\\\directory\\\\on\\\\network; mget *&quot; &gt;&gt; log 2&gt;&gt; log</code> pulls everything out of that directory into my current directory on my Linux machine.  Now I am pulling files from a Windows server, but it works on Linux servers as well.  Also, I never played with it, but smb also has mount capabilities.  That might be better suited for your situation."}, {"owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "edited": false, "score": 1, "creation_date": 1527169997, "post_id": 50492175, "comment_id": 88034517, "body": "I don&#39;t know of a general facility, but gdb in particular has a few things here -- the <code>directory</code> command (best for relative paths), <code>set sysroot</code>, and <code>set substitute-path</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2363, "user_id": 4588453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51da95e02741a304f3620d3b9697eda9?s=128&d=identicon&r=PG&f=1", "display_name": "pseyfert", "link": "https://stackoverflow.com/users/4588453/pseyfert"}, "is_accepted": true, "score": 0, "last_activity_date": 1527493733, "creation_date": 1527493733, "answer_id": 50561519, "question_id": 50492175, "link": "https://stackoverflow.com/questions/50492175/read-debug-symbols-when-source-file-was-relocated/50561519#50561519", "title": "read debug symbols when source file was relocated", "body": "<p>@tom-tromey's comment for gdb is also what works for kcachegrind. In the menu</p>\n\n<p>Settings\u2192Configure KCachegrind\u2192Annotations\u2192Add</p>\n\n<p>One can add additional search paths, so specifying <code>/software/</code> there is enough to get sources found.\nI have not yet tested what happens if similar sources exist in the search path (in the original example, multiple versions of the same source file exist in differently versionned directories), but in practice the search from <code>/software/</code> is anyway too slow (too many subdirectories to search).\nFor this reason I'm now using <code>/software/PROJECT/VERSION/dirs_with_sources</code> in that menu.</p>\n\n<p>From how I understand the docs, this kcachegrind search path does not do the same as gdb's <code>substitue-path</code> (which would probably be better suited in the example here).</p>\n"}], "owner": {"reputation": 2363, "user_id": 4588453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51da95e02741a304f3620d3b9697eda9?s=128&d=identicon&r=PG&f=1", "display_name": "pseyfert", "link": "https://stackoverflow.com/users/4588453/pseyfert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 1, "accepted_answer_id": 50561519, "answer_count": 1, "score": 1, "last_activity_date": 1527493733, "creation_date": 1527089196, "last_edit_date": 1527251822, "question_id": 50492175, "link": "https://stackoverflow.com/questions/50492175/read-debug-symbols-when-source-file-was-relocated", "title": "read debug symbols when source file was relocated", "body": "<p>When using kcachegrind or just <code>objdump -C -l -d somelib.so</code> I noticed that some debug information in my shared libraries is not up to date, due to the copy process from the local file system of the build machine to the shared network file system of the installation.</p>\n\n<p>The workflow is:</p>\n\n<ul>\n<li>the build machine checks out the sources to <code>/workspace/build/PROJECT/VERSION/dirs_with_sources</code></li>\n<li>builds locally with <code>-g</code></li>\n<li>after building copies the sources to <code>/software/PROJECT/VERSION/dirs_with_sources</code> and the built shared libraries to <code>/software/PROJECT/VERSION/InstallArea/ARCHITECTURE/lib</code></li>\n</ul>\n\n<p>When I now open the shared libs with <code>objdump -C -l -d somelib.so</code> I see debug symbols like:</p>\n\n<pre><code>0000000000001a89 &lt;_GLOBAL__sub_I_somesource.cpp&gt;:\n_GLOBAL__sub_I_somesource.cpp():\n/workspace/build/PROJECT/VERSION/subdir/subsubdir/src/somesource.cpp:33\n    1a89: 48 83 ec 08           sub    $0x8,%rsp\n    1a8d: be ff ff 00 00        mov    $0xffff,%esi\n    1a92: bf 01 00 00 00        mov    $0x1,%edi\n    1a97: e8 a4 fb ff ff        callq  1640 &lt;__static_initialization_and_destruction_0(int, int)&gt;\n    1a9c: 48 83 c4 08           add    $0x8,%rsp\n    1aa0: c3                    retq\n</code></pre>\n\n<p>The filename here cannot just be copy and pasted as I don't have the build directory mounted on my user machine and need to replace <code>/workspace/build</code> by <code>software</code>.</p>\n\n<p>This is annoying enough but dramatically fails when running e.g. kcachegrind where the source lookup just fails. (And I assume other debug tools that are meant to help me navigate between source code and build output will encounter similar problems).</p>\n\n<p>Is there a general way to deal with debug symbols of relocatable files? I assume this should always be an issue when shipping a binary version of a library with debug symbols.</p>\n\n<p>EDIT:</p>\n\n<p>What I have used as workaround and would like to avoid as general solution:</p>\n\n<ul>\n<li><p>mount <code>/software</code> to <code>/workspace/build</code>: a (kcachegrind) user might not have the permissions to create <code>/workspace</code></p></li>\n<li><p>recompile from source to have fixed debug information: This may demand more compilation time (and possibly user-disk) than a user is willing to invest (that's partially why we have the build machine and the network installation in the first place).</p></li>\n</ul>\n"}, {"tags": ["c++", "visual-studio", "mingw", "static-libraries"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 5, "creation_date": 1527089207, "post_id": 50492134, "comment_id": 87997229, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9346054/convert-from-mingw-a-to-vc-lib\">Convert from MinGW .a to VC++ .lib</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1527089808, "post_id": 50492134, "comment_id": 87997655, "body": "<b><i>But I have no idea how to get this &quot;.def&quot; file.</i></b> I am pretty sure you can&#39;t get a <code>.def</code> file for a static library. Also read the link above which says you likely can&#39;t do what you want because of ABI incompatibilities and other incompatibilities unless you are talking about <code>c</code> code."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1527090230, "post_id": 50492134, "comment_id": 87997901, "body": "My advice is get scons to generate Visual Studio project files and compile the library with Visual Studio 2013."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1527091359, "post_id": 50492134, "comment_id": 87998638, "body": "In C++ tag the question is moot, since C++ ABI is likely incompatible between two compilers. In C tag the question is valid, but I do not know the answer."}], "owner": {"reputation": 37, "user_id": 9835072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfea1113a126db1fd86e9ba268e8f188?s=128&d=identicon&r=PG&f=1", "display_name": "Thieuma", "link": "https://stackoverflow.com/users/9835072/thieuma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 305, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527089544, "creation_date": 1527089080, "last_edit_date": 1527089544, "question_id": 50492134, "link": "https://stackoverflow.com/questions/50492134/use-mingw-static-library-a-within-visual-studio-environment", "title": "Use MinGW static library (.a) within Visual studio environment", "body": "<p>I work on a project that generate several static libraries (.a) from MinGW with Scons project files.</p>\n\n<p>And I need to use these libs into an other project that work on C++ Visual Studio 2013.</p>\n\n<p>First I tried to just add MinGW lib to my VS project and obviously it didn't work out. </p>\n\n<p>I read some things about using a \".def\" file to switch from \".lib\" to \".a\" but found nothing about convertion from \".a\" to \".lib\". But I have no idea how to get this \".def\" file.</p>\n\n<p>Does anyone have some clue that what I am trying to realise is possible (use MinGW into VS2013) ? Or even a solution that can help me :)</p>\n\n<p>Mathieu.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1527089110, "post_id": 50492095, "comment_id": 87997155, "body": "Ask yourself, Which constructor should <code>const Contmem obj;</code> use?"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1527089114, "post_id": 50492095, "comment_id": 87997158, "body": "This line <code>const Contmem obj</code> is trying to call the <code>Constmem</code> default constructor, which you do not have, you only have a constructor which takes arguments"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1527089263, "post_id": 50492095, "comment_id": 87997274, "body": "Some of that code looked like it was formatted specifically to be misleading."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1527089696, "post_id": 50492095, "comment_id": 87997568, "body": "Seriously, you just have to read the error message <i>carefully</i>, and look at the line it mentions. Don&#39;t just glance at it and assume the error must be something else on a different line."}, {"owner": {"reputation": 619, "user_id": 8139278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QPCpT.jpg?s=128&g=1", "display_name": "Allaye", "link": "https://stackoverflow.com/users/8139278/allaye"}, "edited": false, "score": 0, "creation_date": 1527107922, "post_id": 50492095, "comment_id": 88007007, "body": "Thanks everyone, but am having difficulties implementing the default constructor..  the compiler stills throws some errors... somebody should help me with the implementation. Thanks in advance"}], "answers": [{"comments": [{"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 1, "creation_date": 1527090860, "post_id": 50492273, "comment_id": 87998342, "body": "perhaps a follow-up question is, what happened to the implicit default constructor?"}], "tags": [], "owner": {"reputation": 1835, "user_id": 3195314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiMED.png?s=128&g=1", "display_name": "alseether", "link": "https://stackoverflow.com/users/3195314/alseether"}, "is_accepted": false, "score": 6, "last_activity_date": 1552030216, "last_edit_date": 1552030216, "creation_date": 1527089445, "answer_id": 50492273, "question_id": 50492095, "link": "https://stackoverflow.com/questions/50492095/keep-getting-error-when-i-call-a-const-function-with-a-const-object-in-main/50492273#50492273", "title": "keep getting error when i call a const function with a const object in main", "body": "<p>You're missing a <strong>default constructor</strong> for your class. You only have this one</p>\n\n<pre><code>Contmem::Contmem(int a, int b, int c)\n    : mem(a), constmem(b), constant(c)\n{\n    total = mem * constmem * constant;\n}\n</code></pre>\n\n<p>but here</p>\n\n<pre><code>int main()\n{\n    Contmem cont(3, 4, 5);\n    cont.print();\n    const Contmem obj; // &lt;--here\n    obj.printconst();\n}\n</code></pre>\n\n<p>you are trying to construct a new <code>Contmem</code> object without passing those 3 arguments</p>\n\n<hr>\n\n<p>Actually, those compiler errors are telling you what the real problem is.</p>\n"}, {"tags": [], "owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "is_accepted": true, "score": 5, "last_activity_date": 1527091427, "last_edit_date": 1527091427, "creation_date": 1527090050, "answer_id": 50492465, "question_id": 50492095, "link": "https://stackoverflow.com/questions/50492095/keep-getting-error-when-i-call-a-const-function-with-a-const-object-in-main/50492465#50492465", "title": "keep getting error when i call a const function with a const object in main", "body": "<pre><code>const Contmem obj;\n</code></pre>\n\n<p>attempts to call the default constructor, <code>Contmem()</code>.</p>\n\n<p><strong>BUT</strong> because of:</p>\n\n<pre><code>Contmem::Contmem(int a, int b, int c)\n    : mem(a), constmem(b), constant(c)\n</code></pre>\n\n<p>which has a mem-initializer and a <code>const</code> member, your default constructor <strong>is</strong> <a href=\"http://en.cppreference.com/w/cpp/language/default_constructor#Deleted_implicitly-declared_default_constructor\" rel=\"nofollow noreferrer\"><em>deleted</em></a>.</p>\n\n<p>Thus, compiler can't match that statement to any of the existing constructor, since only your mem-initializer constructor exists.</p>\n"}], "owner": {"reputation": 619, "user_id": 8139278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QPCpT.jpg?s=128&g=1", "display_name": "Allaye", "link": "https://stackoverflow.com/users/8139278/allaye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 1, "accepted_answer_id": 50492465, "answer_count": 2, "score": -1, "last_activity_date": 1552030216, "creation_date": 1527088956, "last_edit_date": 1527089228, "question_id": 50492095, "link": "https://stackoverflow.com/questions/50492095/keep-getting-error-when-i-call-a-const-function-with-a-const-object-in-main", "title": "keep getting error when i call a const function with a const object in main", "body": "<p>header file:</p>\n\n<pre><code>#ifndef CONTMEM_H\n#define CONTMEM_H\n\nclass Contmem {\npublic:\n    Contmem(int a, int b, int c);\n\n    int total;\n    int mem;\n    const int constmem;\n    int printconst() const;\n    const int constant;\n    void print();\n};\n\n#endif // CONTMEM_H\n</code></pre>\n\n<p>Contmem.cpp file:</p>\n\n<pre><code>#include \"Contmem.h\"\n#include &lt;iostream&gt; \n\nContmem::Contmem(int a, int b, int c)\n    : mem(a), constmem(b), constant(c)\n{\n    total = mem * constmem * constant;\n}\n\nvoid Contmem::print()\n{\n    std::cout &lt;&lt; \"This is my variable member \" &lt;&lt; mem &lt;&lt; \" and this is my constmem member \" &lt;&lt; constmem &lt;&lt; \"with the constant member\" &lt;&lt; constant &lt;&lt; std::endl;  \n}\n\nint  Contmem::printconst() const\n{\n    return total;\n    std::cout &lt;&lt; \"This is the total variable \" &lt;&lt; total &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>main function :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Contmem.h\"\n\nint main()\n{\n    Contmem cont(3, 4, 5);\n    cont.print();\n    const Contmem obj;\n    obj.printconst();\n}\n</code></pre>\n\n<p>error file: </p>\n\n<pre><code>|=== Build: Debug in CONST_&amp;_MEMBER_INITIALIZER\n\n (compiler: GNU GCC Compiler) ===| C:\\C++\n\nCODEBLOCK\\CONST_&amp;_MEMBER_INITIALIZER\\main.cpp||\n\nIn function 'int  main()':| C:\\C++\n\n CODEBLOCK\\CONST_&amp;_MEMBER_INITIALIZER\\main.cpp|9|error: \n\n no matching function for call to 'Contmem::Contmem()'| \n\nC:\\C++  CODEBLOCK\\CONST_&amp;_MEMBER_INITIALIZER\\Contmem.h|8|note: candidate:\n\n Contmem::Contmem(int, int, int)| C:\\C++\n\n CODEBLOCK\\CONST_&amp;_MEMBER_INITIALIZER\\Contmem.h|8|note:   candidate\n\n expects 3 arguments, 0 provided| C:\\C++\n\n CODEBLOCK\\CONST_&amp;_MEMBER_INITIALIZER\\Contmem.h|5|note: candidate:\n\n Contmem::Contmem(const Contmem&amp;)| C:\\C++\n\n CODEBLOCK\\CONST_&amp;_MEMBER_INITIALIZER\\Contmem.h|5|note:   candidate\n\n expects 1 argument, 0 provided| ||=== Build failed: 1 error(s), 0\n\n warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1527089138, "post_id": 50492084, "comment_id": 87997177, "body": "you can use <code>std::for_each(begin(data), end(data), ...);</code> but that&#39;s not a whole lot different than a range-<code>for</code> loop."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 8, "creation_date": 1527089144, "post_id": 50492084, "comment_id": 87997186, "body": "Just use a loop with <code>std::stringstream</code> and <code>std::hex</code>."}, {"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1527090827, "post_id": 50492084, "comment_id": 87998323, "body": "@DeiDei, why not submit this as an answer? (I might not fully understand SO etiquette....)"}, {"owner": {"reputation": 697, "user_id": 1160404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431cd02524d6ee187fcd1b3d9658498c?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/1160404/maddy"}, "reply_to_user": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 1, "creation_date": 1527091305, "post_id": 50492084, "comment_id": 87998608, "body": "@MPops: Look at the sample code I posted which is what DeiDei is talking about"}], "answers": [{"comments": [{"owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "edited": false, "score": 0, "creation_date": 1527092330, "post_id": 50492841, "comment_id": 87999143, "body": "You could use a range-for to make the purpose of the loop more immediately obvious, e.g., <code>for (const auto&amp; c : data)</code> and then use <code>c</code> in place of <code>data[i]</code>"}, {"owner": {"reputation": 697, "user_id": 1160404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431cd02524d6ee187fcd1b3d9658498c?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/1160404/maddy"}, "reply_to_user": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "edited": false, "score": 0, "creation_date": 1527092499, "post_id": 50492841, "comment_id": 87999246, "body": "It can be done. We could even make use of std:for_each STL function"}, {"owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "edited": false, "score": 0, "creation_date": 1527094301, "post_id": 50492841, "comment_id": 88000204, "body": "Certainly <code>std::for_each</code> would also work.  In a case like this I think the extra complexity of creating a lambda or function to apply to each element would make the code less readable?"}], "tags": [], "owner": {"reputation": 697, "user_id": 1160404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431cd02524d6ee187fcd1b3d9658498c?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/1160404/maddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1527091172, "creation_date": 1527091172, "answer_id": 50492841, "question_id": 50492084, "link": "https://stackoverflow.com/questions/50492084/creating-a-hex-representative-from-a-stdarray/50492841#50492841", "title": "Creating a hex representative from a std::array", "body": "<p>you can do something like below</p>\n\n<pre><code>string getString(array&lt;unsigned char, 10&gt; data)\n{\n   std::stringstream ss;\n   ss &lt;&lt; std::hex &lt;&lt; std::setfill('0');\n   for(int i=0; i&lt;data.size(); ++i)\n      ss &lt;&lt; std::setw(2) &lt;&lt; (int)data[i];\n   return ss.str();\n} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1527091968, "post_id": 50492993, "comment_id": 87998964, "body": "Also works for other standard containers (vector, list, ...) and other value_types (char, short, unsigned int, ...)."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1527093249, "post_id": 50492993, "comment_id": 87999669, "body": "Can it output each byte as 2 hex digits always?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1527093309, "post_id": 50492993, "comment_id": 87999699, "body": "@MaximEgorushkin not simply: See <a href=\"https://stackoverflow.com/q/405039/5470596\">stackoverflow.com/q/405039/5470596</a>"}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 1, "last_activity_date": 1527091820, "creation_date": 1527091820, "answer_id": 50492993, "question_id": 50492084, "link": "https://stackoverflow.com/questions/50492084/creating-a-hex-representative-from-a-stdarray/50492993#50492993", "title": "Creating a hex representative from a std::array", "body": "<p>If you want to have a bit of fun, you can use an <a href=\"http://en.cppreference.com/w/cpp/iterator/ostream_iterator\" rel=\"nofollow noreferrer\" title=\"cppreference.com\"><code>std::ostream_iterator</code></a>:</p>\n\n<pre><code>template&lt;class Container&gt;\nstd::string hex(Container const&amp; c)\n{\n    std::stringstream out;\n    std::copy(begin(c), end(c), std::ostream_iterator&lt;unsigned int&gt;(out &lt;&lt; std::hex, \" \"));\n    return out.str();\n}\n</code></pre>\n\n<h3>Usage</h3>\n\n<pre><code>std::cout &lt;&lt; hex(array) &lt;&lt; \"\\n\";\n</code></pre>\n\n<h3>Demo</h3>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/9bc542742b1566e2\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/9bc542742b1566e2</a></p>\n"}], "owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1527091820, "creation_date": 1527088932, "last_edit_date": 1527089077, "question_id": 50492084, "link": "https://stackoverflow.com/questions/50492084/creating-a-hex-representative-from-a-stdarray", "title": "Creating a hex representative from a std::array", "body": "<p>I have an <code>std::array</code> and I want to create a string from it by converting each byte to its equal HEX value something like this:</p>\n\n<pre><code> string getString(array&lt;unsigned char, 10&gt; data)\n {\n     // what is the faster way to do this?\n } \n\nmain()\n{\n    array&lt;unsigned char, 10&gt; data={0,1,2,3,4,5,6,7,8,9};\n\n   string result=getString(data);\n   out&lt;&lt;result&lt;&lt;endl;\n}\n</code></pre>\n\n<p>and it should print something such as:</p>\n\n<pre><code>0x00 0x01 0x02 0x03\n</code></pre>\n\n<p>or even </p>\n\n<p>00010203040506070809</p>\n\n<p>any way that is faster.</p>\n\n<p>I know that I can use a for loop and do this job, but if there any neater way to do this?</p>\n"}, {"tags": ["c++", "eigen", "kalman-filter"], "comments": [{"owner": {"reputation": 1979, "user_id": 6484358, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/mnuro.jpg?s=128&g=1", "display_name": "Anu", "link": "https://stackoverflow.com/users/6484358/anu"}, "edited": false, "score": 0, "creation_date": 1547508907, "post_id": 50491938, "comment_id": 95209509, "body": "I am curious about your implementation. could you point me to on your github! thanks"}], "answers": [{"comments": [{"owner": {"reputation": 180, "user_id": 8716544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c042ac55bbb7ff57e68e9e777d21b27a?s=128&d=identicon&r=PG&f=1", "display_name": "MaskedAfrican", "link": "https://stackoverflow.com/users/8716544/maskedafrican"}, "edited": false, "score": 0, "creation_date": 1527243591, "post_id": 50519318, "comment_id": 88065366, "body": "I didn&#39;t have a high enough score to attach images to posts which is why I provided them as links instead. They were there but not obvious enough. But after applying the same dataset to other kalman filter implementations I found online, the results were similar to mine.  My concusion is I believe the noise parameters and my initial state covariance matrix just needs some tuning"}, {"owner": {"reputation": 165, "user_id": 4764898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X6Id2.jpg?s=128&g=1", "display_name": "ggcg", "link": "https://stackoverflow.com/users/4764898/ggcg"}, "reply_to_user": {"reputation": 180, "user_id": 8716544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c042ac55bbb7ff57e68e9e777d21b27a?s=128&d=identicon&r=PG&f=1", "display_name": "MaskedAfrican", "link": "https://stackoverflow.com/users/8716544/maskedafrican"}, "edited": false, "score": 0, "creation_date": 1527972714, "post_id": 50519318, "comment_id": 88332132, "body": "What is the actual system you are estimating?  Looks like the z-position variable has a jump discontinuity in the derivative.  There is no way, in all likelihood, that a simple white noise filter will catch that.  You have applied your first attempt to a difficult system to track!  It looks like it did damn good until the first &quot;bounce&quot;.  You have what we might call a maneuvering target.  You need a Jerk filter to catch that point, or an MMI - a lib or maneuvering filters and the logic to branch off into a new filter when such a maneuver is detected."}, {"owner": {"reputation": 165, "user_id": 4764898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X6Id2.jpg?s=128&g=1", "display_name": "ggcg", "link": "https://stackoverflow.com/users/4764898/ggcg"}, "reply_to_user": {"reputation": 180, "user_id": 8716544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c042ac55bbb7ff57e68e9e777d21b27a?s=128&d=identicon&r=PG&f=1", "display_name": "MaskedAfrican", "link": "https://stackoverflow.com/users/8716544/maskedafrican"}, "edited": false, "score": 0, "creation_date": 1527972718, "post_id": 50519318, "comment_id": 88332135, "body": "In short I&#39;d say your filter works where it should but you applied a simple filter to a complex moving target.  Keep at it."}], "tags": [], "owner": {"reputation": 165, "user_id": 4764898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X6Id2.jpg?s=128&g=1", "display_name": "ggcg", "link": "https://stackoverflow.com/users/4764898/ggcg"}, "is_accepted": false, "score": 2, "last_activity_date": 1527202821, "creation_date": 1527202821, "answer_id": 50519318, "question_id": 50491938, "link": "https://stackoverflow.com/questions/50491938/kalman-filter-implementation-for-3d-position-using-eigen/50519318#50519318", "title": "Kalman Filter Implementation for 3D Position using Eigen", "body": "<p>I am not sure if it's a code related issue, an algorithm implementation issue, or an expectation issue.</p>\n\n<p>You do realize that a filter like this will NOT reproduce truth data, or even anything close to it, if the fake data has too much maneuvering in it.</p>\n\n<p>Also, your graphs are not present.</p>\n\n<p>I know my response doesn't follow community standards but I cannot comment or I'd do that.</p>\n\n<p>Until you provide the plots and check the curvature of the path against the update rate I would not attempt to go into detail.  Also filters need to be \"tuned\" to a specific system.  You may need to play with noise parameters to tune it better.  For maneuvering tracks one may need to go to higher order filters, Singer, or Jerk filters...  The filter needs to model the system well enough.  Based on your update matrix it looks like you have a parabolic (second order) estimate.  You may also want to ask about this in other forums that are not s/w or code specific.  </p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 10351640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89593d3dcc552733e8c1ffaad9fea847?s=128&d=identicon&r=PG", "display_name": "NightDragon", "link": "https://stackoverflow.com/users/10351640/nightdragon"}, "is_accepted": false, "score": 0, "last_activity_date": 1536736782, "creation_date": 1536736782, "answer_id": 52289562, "question_id": 50491938, "link": "https://stackoverflow.com/questions/50491938/kalman-filter-implementation-for-3d-position-using-eigen/52289562#52289562", "title": "Kalman Filter Implementation for 3D Position using Eigen", "body": "<p>Every System has variances. Let's say the Filter has a variance of +-1% and the real value has +-5%; If you predict a value you have to make a choice for the update to use the predicted or the meassures value. Depending on which one you believe more. \nOtherwise your filter does develop always based on it's own values... </p>\n"}], "owner": {"reputation": 180, "user_id": 8716544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c042ac55bbb7ff57e68e9e777d21b27a?s=128&d=identicon&r=PG&f=1", "display_name": "MaskedAfrican", "link": "https://stackoverflow.com/users/8716544/maskedafrican"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2496, "favorite_count": 3, "answer_count": 2, "score": 6, "last_activity_date": 1536736782, "creation_date": 1527088416, "last_edit_date": 1527242736, "question_id": 50491938, "link": "https://stackoverflow.com/questions/50491938/kalman-filter-implementation-for-3d-position-using-eigen", "title": "Kalman Filter Implementation for 3D Position using Eigen", "body": "<p>I wrote a kalman Filter implementation using the Eigen Library in C++ and also using the implementation at this <a href=\"https://i.stack.imgur.com/Fcu2h.png\" rel=\"noreferrer\">link</a> to test my filter: My prediction step looks like this:</p>\n\n<pre><code>void KalmanFilter::Predict()\n{\n    // state Estimate = state transition matrix * previous state\n    // No control input present.\n    x = A * x;\n\n\n   // State Covariance Matrix = (State Transition Matrix * Previous State \n   Covariance matrix * (State Transition Matrix)^T ) + Process Noise\n\n   P = A * P * A.transpose() + Q;\n}\n</code></pre>\n\n<p>while my update step is: </p>\n\n<pre><code>void KalmanFilter::Update(VectorXd z)\n{\n    //Kalman Gain = (State Covariance Matrix * Measurement matrix.transpose) * (H*P*H^T + Measurement Noise)^-1\n    K = (P * H.transpose()) * (H * P * H.transpose()+ R).inverse();\n\n    //Estimated Stated = Estimated state + Kalman Gain (Measurement Innovation)\n    x = x + K*(z - H * x);\n\n   //State Covariance matrix = (Identity Matrix of the size of  x.size * x.size) - K* H * P;\n    long x_size = x.size();\n    MatrixXd I = MatrixXd::Identity(x_size, x_size);\n    P = (I - K * H) * P ;\n\n}\n</code></pre>\n\n<p>My initial values are:  </p>\n\n<pre><code>pos_x = 0.0;\npos_y = 0.0;\npos_z = 1.0;\nvel_x = 10.0;\nvel_y = 0.0;\nvel_z = 0.0;\nacc_x = 0.0;\nacc_y = 0.0;\nacc_z = -9.81;\n</code></pre>\n\n<p>and I'm generating \"fake data\" by doing the following in a loop:</p>\n\n<pre><code>double c = 0.1; // Drag resistance coefficient\ndouble damping = 0.9 ; // Damping\n\ndouble sigma_position = 0.1 ; // position_noise\n\n// Create simulated position data\nfor (int i = 0; i &lt; N; i ++)\n{\n    acc_x = -c * pow(vel_x, 2);  // calculate acceleration ( Drag Resistance)\n\n    vel_x += acc_x * dt;  // Integrate acceleration to give you velocity in the x axis.\n\n    pos_x += vel_x * dt; // Integrate velocity to return the position in the x axis\n\n    acc_z = -9.806 + c * pow(vel_z, 2); // Gravitation + Drag\n\n    vel_z += acc_z * dt;   // z axis velocity\n\n    pos_z += vel_z * dt;  // position in z axis\n\n    // generate y position here later.\n\n    if(pos_z &lt; 0.01)\n    {\n        vel_z = -vel_z * damping;\n        pos_z += vel_z * dt;\n    }\n\n    if (vel_x &lt; 0.1)\n    {\n        acc_x = 0.0;\n        acc_z = 0.0;\n    }\n\n    // add some noise\n    pos_x = pos_x + sigma_position * process_noise(generator); \n    pos_y = pos_y + sigma_position * process_noise(generator);\n    pos_z = pos_z + sigma_position * process_noise(generator);\n</code></pre>\n\n<p>I then run my prediction and update step by: </p>\n\n<pre><code>// Prediction Step\nkalmanFilter.Predict();\n\n// Correction Step\nkalmanFilter.Update(z);\n</code></pre>\n\n<p>where z is a 3 x 1 vector containing <code>pos_x, pos_y and pos_z</code></p>\n\n<p>My State Transition Matrix <code>A</code> looks like this: </p>\n\n<pre><code>A &lt;&lt;    1, 0, 0, dt, 0, 0, dt_squared, 0 , 0,\n        0, 1, 0, 0,  dt, 0, 0, dt_squared, 0,\n        0, 0, 1, 0, 0, dt, 0, 0, dt_squared,\n        0, 0, 0, 1, 0, 0, dt, 0, 0,\n        0, 0, 0, 0, 1, 0, 0 , dt, 0,\n        0, 0, 0, 0, 0, 1, 0, 0, dt,\n        0, 0, 0, 0, 0, 0, 1, 0, 0,\n        0, 0, 0, 0, 0, 0, 0, 1, 0,\n        0, 0, 0, 0, 0, 0, 0, 0, 1;\n</code></pre>\n\n<p>where <code>dt_squared</code> is <code>(dt * dt) /2;</code></p>\n\n<pre><code>P is  \n\nP&lt;&lt; 100, 0, 0, 0, 0, 0, 0, 0, 0,\n            0, 100, 0, 0, 0, 0, 0, 0, 0,\n            0, 0, 100, 0, 0, 0, 0, 0, 0,\n            0, 0, 0, 100, 0, 0, 0, 0, 0,\n            0, 0, 0, 0, 100, 0, 0, 0, 0,\n            0, 0, 0, 0, 0, 100, 0, 0, 0,\n            0, 0, 0, 0, 0, 0, 100, 0, 0,\n            0, 0, 0, 0, 0, 0, 0, 100, 0,\n            0, 0, 0, 0, 0, 0, 0, 0, 100;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>   R &lt;&lt; 1, 0, 0,\n         0, 1, 0,\n         0, 0, 1;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Q = G * G.transpose()* a * a;  \n</code></pre>\n\n<p>where <code>G</code> is a 9 x 1 Matrix of </p>\n\n<pre><code>G &lt;&lt; dt_squared, dt_squared, dt_squared, dt, dt, dt, 1, 1, 1;\n\na =  0.1 //( acceleration process noise)\n</code></pre>\n\n<p>My issue is my estimated position for y and z are off and diverge from the \"real\" positions. If you look at the following graphs, </p>\n\n<p>This is what pos_x looks like: <a href=\"https://i.stack.imgur.com/akHBB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/akHBB.png\" alt=\"X\"></a></p>\n\n<p>This is what pos_y looks like: <a href=\"https://i.stack.imgur.com/03TMJ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/03TMJ.png\" alt=\"Y\"></a></p>\n\n<p>And finally Z:  <a href=\"https://i.stack.imgur.com/vsdPG.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vsdPG.png\" alt=\"Z\"></a></p>\n\n<p>This is my first foray with Kalman filters and I'm not sure what I'm doing wrong here. My final goal would be to use this to estimate the position of a drone. Additionally, I have the following questions:</p>\n\n<p>In a real life situation for a drone for example, how do you about choosing your Process Noise if you can't directly observe the process? Do you simply just pick arbitrary values?</p>\n\n<p>My apologies for the long post. Any help is appreciated.</p>\n"}, {"tags": ["c++", "c++11", "stdmap", "stdtuple"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9462517"}, "edited": false, "score": 0, "creation_date": 1527128280, "post_id": 50499527, "comment_id": 88012631, "body": "Thank you!That is exactly what i need."}], "tags": [], "owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "is_accepted": false, "score": 1, "last_activity_date": 1527124453, "creation_date": 1527124453, "answer_id": 50499527, "question_id": 50491890, "link": "https://stackoverflow.com/questions/50491890/insert-value-to-a-stdmap-from-a-tuple/50499527#50499527", "title": "Insert value to a std::map from a tuple", "body": "<p><code>std::map&lt;char,size_t&gt;</code> or <code>std::map&lt;size_t,char&gt;</code>?<br>\nI'll go with <code>std::map&lt;size_t,char&gt;</code>.</p>\n\n<p>You need C++14's <a href=\"https://en.cppreference.com/w/cpp/utility/integer_sequence\" rel=\"nofollow noreferrer\">std::index_sequence</a><sup>1</sup>.</p>\n\n<pre><code>template &lt;char... Chars, std::size_t... Ints&gt;\nvoid fill_map(std::map&lt;size_t, char&gt; &amp; your_map, std::index_sequence&lt;Ints...&gt;) {\n    using swallow = int[];\n    (void)swallow{0, (your_map.emplace(Ints, Chars), 0)... };\n}\n\ntemplate &lt;char... Chars&gt;\nvoid fill_map(std::map&lt;size_t, char&gt; &amp; your_map) {\n    fill_map&lt;Chars...&gt;(your_map, std::make_index_sequence&lt;sizeof...(Chars)&gt;{});\n}\n</code></pre>\n\n<p>use:</p>\n\n<pre><code>std::map&lt;size_t,char&gt; your_map;\nfill_map&lt;Args...&gt;(your_map);\n</code></pre>\n\n<p><hr/>\n<sup>1</sup> <a href=\"https://stackoverflow.com/questions/17424477/implementation-c14-make-integer-sequence\">implementation for C++11</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9462517"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1527124453, "creation_date": 1527088292, "last_edit_date": 1527120733, "question_id": 50491890, "link": "https://stackoverflow.com/questions/50491890/insert-value-to-a-stdmap-from-a-tuple", "title": "Insert value to a std::map from a tuple", "body": "<p>I am just learning data structure of graph.And i'm trapped in such a situation.<br>\nI have written my <code>Graph</code> class like   </p>\n\n<pre><code>template &lt;char... Args&gt;\n    class Graph{}; \n</code></pre>\n\n<p>where the <code>Args</code> of type <code>char</code> means the vertex of my <code>Graph</code>.\nHowever, when i want to search in my Graph,i need to insert each vertex of <code>char</code> and its index in <code>Args</code> as a <code>std::pair&lt;char,size_t&gt;</code> into a <code>std::map&lt;char,size_t&gt;</code>.What i have done is that i constructed a <code>std::tuple</code> like</p>\n\n<pre><code> std::tuple&lt;decltype(Args)...&gt; t(Args...);\n</code></pre>\n\n<p>Then i want to do like this</p>\n\n<pre><code> for(size_t i =0;i&lt;sizeof...(Args);++i)\n      Map.insert({0,std::get&lt;i&gt;(t)});\n</code></pre>\n\n<p>which Map means a <code>std::map&lt;size_t,char&gt;</code>.\nIt certainly doesn't work because the <code>i</code> used in <code>std::get&lt;&gt;</code> is not a <code>constexpr</code>.\nWhat can i do now is to insert into the Map one by one like   </p>\n\n<pre><code>Map.insert({0,std::get&lt;0&gt;(t)});\nMap.insert({1,std::get&lt;1&gt;(t)});\nMap.insert({2,std::get&lt;2&gt;(t)});\n</code></pre>\n\n<p>But it is not the result i want.So are there any other solutions for me?<br>\nThanks for any help!</p>\n"}, {"tags": ["c++", "vector", "initialization"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1527088348, "post_id": 50491870, "comment_id": 87996657, "body": "You create local variable with same name (<code>verticies</code>) than your member in <code>Graph</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1527088354, "post_id": 50491870, "comment_id": 87996660, "body": "<code>vector&lt;Vertex&gt; verticies;</code> in your constructor body is making a new local vector that shadows your member named <code>verticies</code>. That&#39;s what you are initializing."}], "answers": [{"comments": [{"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1527088563, "post_id": 50491922, "comment_id": 87996806, "body": "does shadowing prompt a warning?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1527088738, "post_id": 50491922, "comment_id": 87996935, "body": "Depends on what and how you shadow. Member variables, usually no."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 4, "creation_date": 1527089133, "post_id": 50491922, "comment_id": 87997174, "body": "@codekaizer <i>guaranteed</i> to generate a warning? No, since it&#39;s perfectly valid to shadow variables according to the language spec. <i>Can</i> generate a warning? Yes. With the right compiler flags - for GCC, look up <code>-Wshadow</code> (and friends)."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 7, "last_activity_date": 1527089439, "last_edit_date": 1527089439, "creation_date": 1527088388, "answer_id": 50491922, "question_id": 50491870, "link": "https://stackoverflow.com/questions/50491870/vector-initialization-in-c/50491922#50491922", "title": "vector initialization in c++", "body": "<blockquote>\n  <p>Can someone explain to me why verticies.size() in Graph constructor\n  equals '4' but when called again in addEdge verticies.size() equals 0?</p>\n</blockquote>\n\n<p>This is because those are two different objects. Here</p>\n\n<pre><code>Graph(int _vertexCount)\n{\n    this-&gt;vertexCount = _vertexCount;\n    vector&lt;Vertex&gt; verticies;\n    // ....\n}\n</code></pre>\n\n<p>You are creating a local vector called <code>verticies</code> that shadows the member variable. Simply removing that line should be fine. I mean you already declared the member, no need to do it twice ;).</p>\n\n<p>Moreoever, I would suggest you to either resize the vector before filling it with data, or at least reserve to the capacity you need. </p>\n"}, {"tags": [], "owner": {"reputation": 3805, "user_id": 4165552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b32c5e142791fca01cbf252f663ac?s=128&d=identicon&r=PG&f=1", "display_name": "pptaszni", "link": "https://stackoverflow.com/users/4165552/pptaszni"}, "is_accepted": false, "score": 1, "last_activity_date": 1527088478, "creation_date": 1527088478, "answer_id": 50491958, "question_id": 50491870, "link": "https://stackoverflow.com/questions/50491870/vector-initialization-in-c/50491958#50491958", "title": "vector initialization in c++", "body": "<p>Here you are shadowing your class field:</p>\n\n<pre><code>Graph(int _vertexCount)\n{\n    this-&gt;vertexCount = _vertexCount;\n    vector&lt;Vertex&gt; verticies;  // &lt;--- exactly here\n    for (size_t i = 0; i &lt; _vertexCount; i++)\n    {\n        Vertex v = Vertex(i);\n        verticies.push_back(v);\n    }\n    cout &lt;&lt; \"verticies count \" &lt;&lt; verticies.size() &lt;&lt; endl;\n}\n</code></pre>\n\n<p>And you are doing all the operations on the local (in the context of the constructor) <code>verticies</code> instead of <code>Graph::verticies</code>. BTW, correct English plural form is <code>vertices</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 4701669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ada087676d3382cd16f8e76f28d637?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Fawkes", "link": "https://stackoverflow.com/users/4701669/guy-fawkes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1527089439, "creation_date": 1527088226, "question_id": 50491870, "link": "https://stackoverflow.com/questions/50491870/vector-initialization-in-c", "title": "vector initialization in c++", "body": "<p>Can someone explain to me why verticies.size() in Graph constructor equals '4' but when called again in addEdge verticies.size() equals 0?  The program crashes at verticies[fromVertex].addEdge(toVertex) because the size of verticies is 0.</p>\n\n<p>I'm sure this is something I should know, but I don't where I am going wrong.  </p>\n\n<pre><code>class Vertex {\n\npublic:\n    int value;\n    vector&lt;int&gt; adj;\n    bool isVisited = false;\n\n    Vertex(int _value)\n    {\n        value = _value;\n    }\n\n    void addEdge(int destination)\n    {\n        adj.push_back(destination);\n    }   \n};\n\nclass Graph\n{\n\npublic:\n\n    int vertexCount;    // No. of vertices            \n    vector&lt;Vertex&gt; verticies;\n\n    Graph(int _vertexCount)\n    {\n        this-&gt;vertexCount = _vertexCount;\n        vector&lt;Vertex&gt; verticies;\n        for (size_t i = 0; i &lt; _vertexCount; i++)\n        {\n            Vertex v = Vertex(i);\n            verticies.push_back(v);\n        }\n        cout &lt;&lt; \"verticies count \" &lt;&lt; verticies.size() &lt;&lt; endl;\n    }\n    void addEdge(int fromVertex, int toVertex)  \n    {\n        cout &lt;&lt; \"verticies count in addEdge: \" &lt;&lt; verticies.size() &lt;&lt; endl;\n        verticies[fromVertex].addEdge(toVertex); \n    }\n    void findPath(int fromVertex, int toVertex, vector&lt;int&gt; pathSoFar)  \n    {\n        pathSoFar.push_back(fromVertex);\n        if (fromVertex == toVertex)\n        {\n            for (int i = 0; i &lt; pathSoFar.size(); i++)\n            {\n               cout &lt;&lt; pathSoFar.at(i) &lt;&lt; \" \";\n            }\n            cout &lt;&lt; endl;\n            return;\n        }\n        else\n        {\n            for (size_t i = 0; i &lt; verticies[fromVertex].adj.size(); i++)\n            {   \n                int nextToVisit = verticies[fromVertex].adj.at(i);\n                if (verticies[nextToVisit].isVisited == false)\n                {\n                    findPath(nextToVisit, toVertex, pathSoFar);\n                }\n\n            }\n        }\n    }\n};\n\nint main()\n{\n    // Create a graph given in the above diagram\n    Graph g(4);\n    g.addEdge(0, 1);\n    g.addEdge(0, 2);\n    g.addEdge(1, 2);\n    g.addEdge(2, 0);\n    g.addEdge(2, 3);\n    g.addEdge(3, 3);\n\n\n    vector&lt;int&gt; path;\n    g.findPath(2, 1, path);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "readfile", "ifstream"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1527088231, "post_id": 50491833, "comment_id": 87996592, "body": "even if you want to process chunks of 100bytes you should read the whole file at once (unless it is some Gbs in size)"}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1527088382, "post_id": 50491833, "comment_id": 87996681, "body": "@user463035818 hmm... the files length could be anything so to save on ram I wanted to break it into 10k chunks. I doubt it will be Gb&#39;s but it could be large number of Mbs.... also this needs to scale down onto platforms with more limited ram, so I am just trying to be cautious : )"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1527088469, "post_id": 50491833, "comment_id": 87996743, "body": "hm. ok, low ram is something to consider, but usually I&#39;d try to limit the number of reads/writes to files rather than the amount of each individual read/write"}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1527088805, "post_id": 50491833, "comment_id": 87996974, "body": "@user463035818 I do get your point, very valid : ) ... for another part of my system I am just read small text files where I will do as you suggest (makes life easier!)"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1527089696, "post_id": 50491833, "comment_id": 87997567, "body": "@user463035818: I don&#39;t agree. C++ standard library is smart enough to internally use buffers to limit the numbers of physical io operations. So you should never do explicit buffering, except if you are writing a library module requiring a particular buffering for optimization reasons. For any other use case, just rely on the standard library."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1527090103, "post_id": 50491833, "comment_id": 87997831, "body": "@SergeBallesta i dont really understand. if the size of the file is bigger than the available memory you&#39;ll get a out-of-memory and I dont know how the standard library would help on that. Or are you arguing against reading the whole file at once (that was my actual point)"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1527090422, "post_id": 50491833, "comment_id": 87998041, "body": "@user463035818: I&#39;m sorry that it was not clear, but it was a response to your first comment advising to read the whole file in memory to later process chunks. So yes I am arguing against reading the whole file at once."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1527090572, "post_id": 50491833, "comment_id": 87998157, "body": "@SergeBallesta OPs code is creating a new stream on each call of the method, so buffering of the <code>std::stream</code> alone wont help. Repeatedly reading from the same stream is a different situation and then maybe I could agree with you"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1527091846, "post_id": 50491833, "comment_id": 87998899, "body": "@user463035818: IMHO the way to go here is the accepted answer that repeatedly reads 100 bytes from the stream..."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1527088443, "creation_date": 1527088443, "answer_id": 50491948, "question_id": 50491833, "link": "https://stackoverflow.com/questions/50491833/how-do-you-read-n-bytes-from-a-file-and-put-them-into-a-vectoruint8-t-using-it/50491948#50491948", "title": "How do you read n bytes from a file and put them into a vector&lt;uint8_t&gt; using iterators?", "body": "<p>You can use <code>ifstream::read</code> for that.</p>\n\n<pre><code>std::vector&lt;BYTE&gt; v(100);\nwhile ( file.read(reinterpret_cast&lt;char*&gt;(v.data()), 100) )\n{\n   // Find out how many characters were actually read.\n   auto count = file.gcount();\n\n   // Use v up to count BTYEs.\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1527089945, "post_id": 50492130, "comment_id": 87997723, "body": "Thanks - this is a good example of the minimal code I need to write for my loop : )"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1527089078, "creation_date": 1527089078, "answer_id": 50492130, "question_id": 50491833, "link": "https://stackoverflow.com/questions/50491833/how-do-you-read-n-bytes-from-a-file-and-put-them-into-a-vectoruint8-t-using-it/50492130#50492130", "title": "How do you read n bytes from a file and put them into a vector&lt;uint8_t&gt; using iterators?", "body": "<p>You could write a function to:</p>\n\n<pre><code>void readFile( const std::string &amp;fileName, size_t chunk, std::function&lt;void(const std::vector&lt;BYTE&gt;&amp;)&gt; proc )\n{\n    std::ifstream f( fileName );\n    std::vector&lt;BYTE&gt; v(chunk);\n    while( f.read( v.data(), v.size() ) ) {\n        v.resize( f.gcount() );\n        proc( v );\n        v.resize( chunk );\n    }\n}\n</code></pre>\n\n<p>then usage is simple:</p>\n\n<pre><code>void process( const std::vector&lt;BYTE&gt; &amp;v ) { ... }\n\nreadFile( \"foobar\", 100, process ); // call process for every 100 bytes of data\n</code></pre>\n\n<p>or you can use lambda etc for callback.</p>\n"}, {"tags": [], "owner": {"reputation": 1471, "user_id": 3655463, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c567c095653589d1b50f37aeb72dbab1?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Wojtczak", "link": "https://stackoverflow.com/users/3655463/mateusz-wojtczak"}, "is_accepted": false, "score": 0, "last_activity_date": 1527091502, "last_edit_date": 1527091502, "creation_date": 1527090677, "answer_id": 50492699, "question_id": 50491833, "link": "https://stackoverflow.com/questions/50491833/how-do-you-read-n-bytes-from-a-file-and-put-them-into-a-vectoruint8-t-using-it/50492699#50492699", "title": "How do you read n bytes from a file and put them into a vector&lt;uint8_t&gt; using iterators?", "body": "<p>Or you can write your own function for that:</p>\n\n<pre><code>template&lt;typename Data&gt;\nstd::istreambuf_iterator&lt;Data&gt; readChunk(std::istreambuf_iterator&lt;Data&gt;&amp; curr, std::vector&lt;Data&gt;&amp; vec, size_t chunk = 100) {\n    for (int i = 0; curr != std::istreambuf_iterator&lt;Data&gt;() &amp;&amp; i &lt; chunk; ++i, ++curr) {\n        vec.emplace_back(*curr);\n    }\n    return curr;\n}\n</code></pre>\n\n<p>and use it as:</p>\n\n<pre><code>std::ifstream file(\"test.cpp\");\nstd::vector&lt;BYTE&gt; v;\nstd::istreambuf_iterator&lt;BYTE&gt; curr(file);\nreadChunk&lt;BYTE&gt;(curr, v);\n</code></pre>\n\n<p>And you can call this function again.</p>\n"}], "owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2265, "favorite_count": 1, "accepted_answer_id": 50491948, "answer_count": 3, "score": 1, "last_activity_date": 1527094328, "creation_date": 1527088113, "last_edit_date": 1527094328, "question_id": 50491833, "link": "https://stackoverflow.com/questions/50491833/how-do-you-read-n-bytes-from-a-file-and-put-them-into-a-vectoruint8-t-using-it", "title": "How do you read n bytes from a file and put them into a vector&lt;uint8_t&gt; using iterators?", "body": "<p>Based on this this question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15138353/\">How to read a binary file into a vector of unsigned chars</a></p>\n\n<p>In the answer they have:</p>\n\n<pre><code>std::vector&lt;BYTE&gt; readFile(const char* filename)\n{\n    // open the file:\n    std::basic_ifstream&lt;BYTE&gt; file(filename, std::ios::binary);\n\n    // read the data:\n    return std::vector&lt;BYTE&gt;((std::istreambuf_iterator&lt;BYTE&gt;(file)),\n                              std::istreambuf_iterator&lt;BYTE&gt;());\n}\n</code></pre>\n\n<p>Which reads the entire file into the vector.</p>\n\n<p>What I want to do is read (for example) 100 bytes at a time in the vector, then do stuff, and then read the next 100 bytes into the vector (clear the vector between). I don't see how to specify how much of the file to read (i.e. how to setup the iterators). Is that even possible?</p>\n\n<p>I am trying to avoid having to write my own code loop to copy each byte at a time.</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 12, "creation_date": 1527087877, "post_id": 50491738, "comment_id": 87996366, "body": "<code>V[i-1, j- Wt[i]]</code> doesn&#39;t do what you think it does."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1527088065, "post_id": 50491738, "comment_id": 87996489, "body": "You probably want <code>V[i-1][j - Wt[i]]</code> instead."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1527088077, "post_id": 50491738, "comment_id": 87996498, "body": "be warned that the differences between java and c++ are more fundamental than syntax. Actually syntax is the only thing where the two have some similarities, but you better forget everything you know and learn c++ from scratch"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527088141, "post_id": 50491738, "comment_id": 87996547, "body": "<code>int V[N+1][totW+1];</code> is non standard C++, use VLA extension."}, {"owner": {"reputation": 444, "user_id": 9796174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dStb.jpg?s=128&g=1", "display_name": "Helium_1s2", "link": "https://stackoverflow.com/users/9796174/helium-1s2"}, "edited": false, "score": 0, "creation_date": 1527089618, "post_id": 50491738, "comment_id": 87997520, "body": "Or use dynamic allocation and delete it at the end (although OP, coming from Java, should do so with caution)."}, {"owner": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 1, "creation_date": 1527092769, "post_id": 50491738, "comment_id": 87999380, "body": "<i>My question is, why does . . . .</i>  <code>int Va[i]</code> doesn&#39;t evaluate to a pointer. <code>Va</code> is an array parameter that decays to a pointer. If you add the index <code>[i]</code> to <code>Va</code>, the i-th element of that <code>int</code> array is selected. So <code>Va[i]</code> evaluates to an <code>int</code> not a pointer to <code>int</code>."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 5075287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GsSdt9eKrJI/AAAAAAAAAAI/AAAAAAAAANk/WgOkfoW14Bw/photo.jpg?sz=128", "display_name": "Felix Hu", "link": "https://stackoverflow.com/users/5075287/felix-hu"}, "edited": false, "score": 1, "creation_date": 1527091941, "post_id": 50492532, "comment_id": 87998948, "body": "Wow, I completely misread how C++ does arrays. Literally same as Java. How embarrassing!"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 111, "user_id": 5075287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GsSdt9eKrJI/AAAAAAAAAAI/AAAAAAAAANk/WgOkfoW14Bw/photo.jpg?sz=128", "display_name": "Felix Hu", "link": "https://stackoverflow.com/users/5075287/felix-hu"}, "edited": false, "score": 0, "creation_date": 1527092465, "post_id": 50492532, "comment_id": 87999217, "body": "@LittleDragon The fun part about C++ is that you can create data structures that overload e.g. <code>operator()</code> and provide this exact functionality, so you can get <code>matrix(row, column)</code> accessors. Sadly, <code>operator[]</code> may only ever take on argument."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 3, "last_activity_date": 1527090881, "last_edit_date": 1527090881, "creation_date": 1527090195, "answer_id": 50492532, "question_id": 50491738, "link": "https://stackoverflow.com/questions/50491738/c-why-does-accessing-elements-in-an-array-return-a-pointer/50492532#50492532", "title": "C++ Why Does Accessing Elements in an Array Return a Pointer?", "body": "<p><code>V[i-1, j- Wt[i]]</code> is not how you access a two-dimensional array in C++. In fact, there is no such thing as a primitive two-dimensional array, only arrays of arrays (that's what <code>V</code> is). You always need to access them with several consecutive <code>[]</code>.</p>\n\n<p>The <code>,</code> in that expression (and in other expressions where it does not mean something else) is the <a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">comma operator</a> that evaluates and then discards its left operand. So what your code tries to do is:</p>\n\n<ol>\n<li>Calculate <code>i-1</code>, then discard the result.</li>\n<li>Calculate <code>j-Wt[i]</code> and then access <code>V[j-Wt[i]]</code>. That's not what you wanted.</li>\n</ol>\n"}], "owner": {"reputation": 111, "user_id": 5075287, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GsSdt9eKrJI/AAAAAAAAAAI/AAAAAAAAANk/WgOkfoW14Bw/photo.jpg?sz=128", "display_name": "Felix Hu", "link": "https://stackoverflow.com/users/5075287/felix-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "accepted_answer_id": 50492532, "answer_count": 1, "score": -1, "last_activity_date": 1527092086, "creation_date": 1527087828, "last_edit_date": 1527092086, "question_id": 50491738, "link": "https://stackoverflow.com/questions/50491738/c-why-does-accessing-elements-in-an-array-return-a-pointer", "title": "C++ Why Does Accessing Elements in an Array Return a Pointer?", "body": "<p>My comfort language is Java, but recently I decided to learn C++ syntax.</p>\n\n<pre><code>int ks(int Wt[], int Va[], int N, int totW){\n\nif(N==0){\n    return 0;\n}\n\nint V[N+1][totW+1];\n\nfor(int i = 0; i &lt; N+1; i++){\n    V[i][0] = 0; // fill first row with 0's\n}\nfor(int i = 0; i &lt; totW+1; i++){\n    V[0][i] = 0; // fill first column with 0's\n}\n\nfor(int i = 1; i &lt; N+1; i++){\n    for(int j = 0; j &lt; totW+1; j++){\n        if(Wt[i] &lt;= j) {\n            V[i][j] = std::max(V[i-1][j], Va[i]+V[i-1, j- Wt[i]]);\n        } else {\n            V[i][j] = V[i-1][j];\n        }\n    }\n}\nreturn V[N][totW];\n}\n</code></pre>\n\n<p>This is my implementation of 01 knapsack. However, I get an error in the line:</p>\n\n<pre><code>V[i][j] = std::max(V[i-1][j], Va[i]+V[i-1, j- Wt[i]]);\n</code></pre>\n\n<p>The error reads: </p>\n\n<blockquote>\n  <p>no instance of overloaded function \"std::max\" matches the argument list -- argument types are: (int, int *)</p>\n</blockquote>\n\n<p>My question is, why does <code>Va[i]</code> return a pointer whereas <code>V[i-1][j]</code> doesn't?</p>\n"}, {"tags": ["c++", "winapi", "keyboard", "mouse-cursor"], "comments": [{"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1527088236, "post_id": 50491604, "comment_id": 87996595, "body": "Timer would do it. For full 360 rotation you can use: <code>x = r * cos(theta), y = r * sin(theta)</code>. Just swap <code>cos</code> and <code>sin</code> for clockwise rotation"}, {"owner": {"reputation": 194, "user_id": 5758838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JqJa9.gif?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5758838/ryan"}, "edited": false, "score": 0, "creation_date": 1527088295, "post_id": 50491604, "comment_id": 87996623, "body": "Do you just want to MoveUp--&gt;(other key press)--&gt;MoveRight--&gt;(other key)--&gt;MoveDown--&gt;(other key)---&gt;MoveLeft--&gt;(other key)?  Or do you need more fine tuned angles, like moveup--&gt;moveup/right--&gt;moveright, etc?"}, {"owner": {"reputation": 7, "user_id": 9754140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7026c3281182fedf0da86ac9db47cb49?s=128&d=identicon&r=PG&f=1", "display_name": "Vellety", "link": "https://stackoverflow.com/users/9754140/vellety"}, "edited": false, "score": 0, "creation_date": 1527091160, "post_id": 50491604, "comment_id": 87998497, "body": "Thanks for the help, I managed to do what I wanted using a simple timer loop. (Using <code>WaitForSingleObject</code>)"}, {"owner": {"reputation": 7, "user_id": 9754140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7026c3281182fedf0da86ac9db47cb49?s=128&d=identicon&r=PG&f=1", "display_name": "Vellety", "link": "https://stackoverflow.com/users/9754140/vellety"}, "reply_to_user": {"reputation": 194, "user_id": 5758838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JqJa9.gif?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5758838/ryan"}, "edited": false, "score": 0, "creation_date": 1527091519, "post_id": 50491604, "comment_id": 87998725, "body": "@Ryan No, I simply wanted to do a full look-around with a key-press and the answer I posted does the job for me.. although i&#39;m sure this could be done in a much, much better way.."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1527108799, "post_id": 50492885, "comment_id": 88007421, "body": "You are creating an event object which you never actually use. This has got to be the most convoluted way to avoid calling <code>Sleep</code>."}], "tags": [], "owner": {"reputation": 7, "user_id": 9754140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7026c3281182fedf0da86ac9db47cb49?s=128&d=identicon&r=PG&f=1", "display_name": "Vellety", "link": "https://stackoverflow.com/users/9754140/vellety"}, "is_accepted": false, "score": -2, "last_activity_date": 1527091378, "creation_date": 1527091378, "answer_id": 50492885, "question_id": 50491604, "link": "https://stackoverflow.com/questions/50491604/simulate-a-360-mouse-movement-inside-a-game-using-sendinput/50492885#50492885", "title": "Simulate a 360 mouse movement inside a game using SendInput", "body": "<p>I managed to do what I wanted (in what might not be the best way, but it does what I intended for it to do..)</p>\n\n<pre><code>if (GetAsyncKeyState(i1x1Value) &amp; 1)\n{\n    cMouseInput mInput;\n\n    int iCount = 0;\n    HANDLE hTimer = CreateEvent(NULL, FALSE, FALSE, NULL);\n    while (iCount &lt; 4)\n    {\n        WaitForSingleObject(hTimer, i1x1Sleep); // Wait for x amount\n        mInput.MouseMove(50, 0); // Right\n\n        iCount++; // Repeat 4 times\n    }\n    CloseHandle(hTimer);\n}\n</code></pre>\n\n<p>If u have any suggestions to improve this, please do say.</p>\n"}], "owner": {"reputation": 7, "user_id": 9754140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7026c3281182fedf0da86ac9db47cb49?s=128&d=identicon&r=PG&f=1", "display_name": "Vellety", "link": "https://stackoverflow.com/users/9754140/vellety"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527091378, "creation_date": 1527087453, "last_edit_date": 1527088002, "question_id": 50491604, "link": "https://stackoverflow.com/questions/50491604/simulate-a-360-mouse-movement-inside-a-game-using-sendinput", "title": "Simulate a 360 mouse movement inside a game using SendInput", "body": "<p>Ok so, I have this code right now which makes the mouse cursor move to the right as long as you hold down the <code>Z</code> key on the keyboard.</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>if (GetAsyncKeyState(0x5A))\n{\n    cMouseInput mInput;\n    mInput.MouseMove(1, 0);  // Right\n    //mInput.MouseMove(-1, 0); // Left\n}\n</code></pre>\n\n<p><strong>The function:</strong></p>\n\n<pre><code>void cMouseInput::MouseMove(int X, int Y)\n{\n    double fScreenWidth = GetSystemMetrics(SM_CXSCREEN) - 1;\n    double fScreenHeight = GetSystemMetrics(SM_CYSCREEN) - 1;\n    double fX = X * (65535.0f / fScreenWidth);\n    double fY = Y * (65535.0f / fScreenHeight);\n\n    INPUT mInput = { 0 };\n    mInput.type = INPUT_MOUSE;\n    mInput.mi.dwFlags = MOUSEEVENTF_MOVE;\n    mInput.mi.dx = fX;\n    mInput.mi.dy = fY;\n\n    SendInput(1, &amp;mInput, sizeof(INPUT));\n}\n</code></pre>\n\n<p>Now, I want it to do a full circle spin(<em>a 360 basically</em>) inside a game with just <strong>1 key press</strong>.\nAnd also <strong>while</strong> it is doing that spin, I want to execute another key-press 4 times.</p>\n\n<p>I can't figure out a good way to do this.. maybe using a timer would be a good idea?</p>\n\n<p>Like, <code>Start timer on key-press -&gt; execute other key-press -&gt; End timer and release key</code></p>\n\n<p>But how would I go about this?</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 4, "creation_date": 1527087483, "post_id": 50491577, "comment_id": 87996089, "body": "You don&#39;t want to capture <code>thr</code> by reference."}, {"owner": {"reputation": 75, "user_id": 8204275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0zTIm.jpg?s=128&g=1", "display_name": "David W. Romero", "link": "https://stackoverflow.com/users/8204275/david-w-romero"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1527088045, "post_id": 50491577, "comment_id": 87996478, "body": "@molbdnilo Thanks for your commentary. Why don&#39;t I? It should not be of importance, am I wrong?"}, {"owner": {"reputation": 75, "user_id": 8204275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0zTIm.jpg?s=128&g=1", "display_name": "David W. Romero", "link": "https://stackoverflow.com/users/8204275/david-w-romero"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1527088401, "post_id": 50491577, "comment_id": 87996696, "body": "@molbdnilo Your advise did work. Could you please explain me why is this the case or redirect me to a place where I can get to understand it better? Thank you!"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1527089281, "post_id": 50491577, "comment_id": 87997289, "body": "The the loop gives each thread a reference to <code>thr</code>, and then it <i>changes the value</i> of <code>thr</code>. If you think that is &quot;not of importance&quot;, then you might want to spend some more time learning the basics of the language (esp., the meaning of &quot;reference&quot;) before you dive in to the deep end with threads."}, {"owner": {"reputation": 75, "user_id": 8204275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0zTIm.jpg?s=128&g=1", "display_name": "David W. Romero", "link": "https://stackoverflow.com/users/8204275/david-w-romero"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1527089798, "post_id": 50491577, "comment_id": 87997648, "body": "@jameslarge that is exactly my point. The thr is not being changed inside the lambda. It is exclusively used to address a thr-th element in the array. So, it should not matter, does it?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1527089962, "post_id": 50491577, "comment_id": 87997734, "body": "<code>thr</code> is changed outside the lambda, that is the problem."}, {"owner": {"reputation": 75, "user_id": 8204275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0zTIm.jpg?s=128&g=1", "display_name": "David W. Romero", "link": "https://stackoverflow.com/users/8204275/david-w-romero"}, "edited": false, "score": 0, "creation_date": 1527106311, "post_id": 50491577, "comment_id": 88006169, "body": "Thank you all for your commentaries and advices."}], "answers": [{"tags": [], "owner": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "is_accepted": true, "score": 3, "last_activity_date": 1527089945, "creation_date": 1527089945, "answer_id": 50492429, "question_id": 50491577, "link": "https://stackoverflow.com/questions/50491577/c-for-loop-does-not-stop-sometimes-multithreading/50492429#50492429", "title": "C++ - For loop does not stop sometimes - Multithreading", "body": "<p>You're capturing <code>thr</code> by reference, so as the <code>for</code> loop increases the variable your thread will see the changes to it. Capture it by value instead:</p>\n\n<pre><code>threads.push_back(std::thread([&amp;, thr]() {\n            for (auto &amp;kp : queryKPs_split.at(thr)) { ... }});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1527105193, "creation_date": 1527105193, "answer_id": 50496452, "question_id": 50491577, "link": "https://stackoverflow.com/questions/50491577/c-for-loop-does-not-stop-sometimes-multithreading/50496452#50496452", "title": "C++ - For loop does not stop sometimes - Multithreading", "body": "<p>You're capturing <code>thr</code> by reference.</p>\n\n<p>This means that all the threads reference the same <code>int</code>, and when you use <code>thr</code> inside the lambda you don't get the value that <code>thr</code> had when the thread was created, but its current value.</p>\n\n<p>If a thread accesses that value after the last increment but before the loop has ended, its value will be <code>N_THREADS</code> and <code>at</code> throws an exception.</p>\n\n<p>If a thread accesses it after the loop has ended, the behaviour is undefined.</p>\n\n<p>The moral of this story is that <code>[&amp;]</code> is convenient to write but easily leads to surprising behaviours.<br>\nIt's usually best to capture as explicitly as possible;</p>\n\n<pre><code>std::thread([thr, &amp;queryKPs_split]() {\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 8204275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0zTIm.jpg?s=128&g=1", "display_name": "David W. Romero", "link": "https://stackoverflow.com/users/8204275/david-w-romero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 50492429, "answer_count": 2, "score": 0, "last_activity_date": 1527105193, "creation_date": 1527087371, "question_id": 50491577, "link": "https://stackoverflow.com/questions/50491577/c-for-loop-does-not-stop-sometimes-multithreading", "title": "C++ - For loop does not stop sometimes - Multithreading", "body": "<p>I am having a quite obscure problem while developing a function in C++. I am using multithreading on a splitted huge array to improve processing velocity.</p>\n\n<p>My code:</p>\n\n<pre><code>    std::mutex mu;\n    std::vector&lt;std::thread&gt; threads;\n    int N_THREADS = std::thread::hardware_concurrency();\n\n    std::vector&lt;std::vector&lt;KP&gt;&gt; queryKPs_split = splitVector(queryKPs, N_THREADS);\n    std::cout &lt;&lt; queryKPs_split.size() &lt;&lt; std::endl;\n\n    for (int thr = 0; thr &lt; N_THREADS; thr++) {\n        std::cout &lt;&lt; thr &lt;&lt; \" \" &lt;&lt; N_THREADS &lt;&lt; std::endl;\n\n        threads.push_back(std::thread([&amp;]() {\n            for (auto &amp;kp : queryKPs_split.at(thr)) { ... }});\n    }\n</code></pre>\n\n<p>The problem is that sometimes (not always) i get a out of range exception on the <code>queryKPs_split</code> at <code>queryKPs_split.at(thr)</code>. The reason is that the value of thr goes up to 8, while it should stop at 7 as described in the for loop (<code>N_THREADS = 8</code>). Does anyone has an idea of why this might be ocurring?</p>\n\n<p>Here is the result of an unsuccessful run before the exception appears:</p>\n\n<pre><code>8\n0 8\n1 8\n2 8\n3 8\n4 8\n5 8\n6 8\n7 8\n</code></pre>\n\n<p>Thank you in advance! </p>\n\n<p>David</p>\n"}, {"tags": ["c++", "lambda"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 10, "creation_date": 1527086844, "post_id": 50491347, "comment_id": 87995584, "body": "Did <code>obj</code> go out of scope when the lambda&#39;s are called?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 2, "creation_date": 1527086914, "post_id": 50491347, "comment_id": 87995626, "body": "Yeah, we really need to know the scope of that declaration. An <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> would make this obvious."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527086958, "post_id": 50491347, "comment_id": 87995675, "body": "Please edit your question to contain <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 153, "user_id": 7402183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1f450f6c0d7a3d0c0f6af26e848428c6?s=128&d=identicon&r=PG", "display_name": "AAS.N", "link": "https://stackoverflow.com/users/7402183/aas-n"}, "edited": false, "score": 0, "creation_date": 1527087685, "post_id": 50491347, "comment_id": 87996224, "body": "I am sorry, I tried to strip it down as much as I could because I was not allowed to share the context of this code. I can say that the code I showed (alongside many other lambda expressions) are within a Initialization function that gets called when the application first runs. Please feel free to delete the question if that is not enough information."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1527089523, "post_id": 50491347, "comment_id": 87997453, "body": "Is there a good reason that you can&#39;t wrap <code>obj</code> instead a smart pointer, i.e. <code>std::unique_ptr&lt;Object&gt;</code>?"}, {"owner": {"reputation": 153, "user_id": 7402183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1f450f6c0d7a3d0c0f6af26e848428c6?s=128&d=identicon&r=PG", "display_name": "AAS.N", "link": "https://stackoverflow.com/users/7402183/aas-n"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1527092270, "post_id": 50491347, "comment_id": 87999111, "body": "@Xirema I think it defeats the purpose of providing the means to explicitly create and delete that object and hence manage the lifetime of the object. Nonetheless I did try using a unique_ptr but a similar error was thrown."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1527092591, "post_id": 50491347, "comment_id": 87999279, "body": "Well, what I&#39;m trying to hint at is that <a href=\"https://stackoverflow.com/questions/22250859/c-14-and-manual-memory-management\">you should avoid manual resource management as much as possible</a>, and smart pointers are the usual mechanism for achieving that. Manually and explicitly managing the lifetime of a resource <i>is not something you should desire</i>. In the best-case scenario, it&#39;s a necessary evil, and in the worst-case scenario, it&#39;s the engine for all your bugs and mishaps (like, for example, the access violation you&#39;re getting in your code)."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 7402183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1f450f6c0d7a3d0c0f6af26e848428c6?s=128&d=identicon&r=PG", "display_name": "AAS.N", "link": "https://stackoverflow.com/users/7402183/aas-n"}, "edited": false, "score": 0, "creation_date": 1527094515, "post_id": 50493503, "comment_id": 88000311, "body": "So, is the reason this works is because we captured objptr by VALUE - otherwise, it would fall for the same scoping issue as the original example?"}], "tags": [], "owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "is_accepted": true, "score": 1, "last_activity_date": 1527093744, "creation_date": 1527093744, "answer_id": 50493503, "question_id": 50491347, "link": "https://stackoverflow.com/questions/50491347/c-access-violation-when-reading-pointer-captured-by-lambda/50493503#50493503", "title": "C++: Access Violation when reading pointer captured by Lambda", "body": "<p>While we cannot tell from your example alone, I suspect <code>obj</code> is perhaps a local variable which goes out of scope after being captured. One way to solve this would be to add another level of indirection:</p>\n\n<pre><code>Object** objptr = new Object*();\n\nstd::function&lt;void(std::function&lt;void(const String&amp;)&gt;)&gt; SetObject\n    = [objptr](std::function&lt;void(const String&amp;)&gt; func) \n{\n    *objptr = new Object();\n};\n\nstd::function&lt;void()&gt; ResetObject\n= [objptr]() // Note we are now capturing objptr by value\n{\n    if(*objptr)\n    {\n        delete *objptr;\n        *objptr = nullptr;\n    }\n    // Is objptr reused by another call to SetObject?\n    // If not, delete it here as well.\n    // delete objptr;\n};\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 7402183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1f450f6c0d7a3d0c0f6af26e848428c6?s=128&d=identicon&r=PG", "display_name": "AAS.N", "link": "https://stackoverflow.com/users/7402183/aas-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 1, "accepted_answer_id": 50493503, "answer_count": 1, "score": 2, "last_activity_date": 1527093744, "creation_date": 1527086734, "last_edit_date": 1527092377, "question_id": 50491347, "link": "https://stackoverflow.com/questions/50491347/c-access-violation-when-reading-pointer-captured-by-lambda", "title": "C++: Access Violation when reading pointer captured by Lambda", "body": "<p>I am not gonna pretend I am very experienced with lambdas, but with this seemingly simple issue, I think I need deeper insight on how it actually works.</p>\n\n<p>I am instantiating an object on an outer scope, and using 2 lambdas, I attempt to modify that pointer.</p>\n\n<pre><code>// Object to be manipulated\nObject* obj= nullptr;\n\n// To be invoked externally in order to construct and initialize obj\nstd::function&lt;void(std::function&lt;void(const String&amp;)&gt;)&gt; SetObject\n    = [&amp;obj](std::function&lt;void(const String&amp;)&gt; func) \n{\n    obj= new Object();\n    // ... Initialize Values\n};\n\n// To be invoked externally to reset and delete obj\nstd::function&lt;void()&gt; ResetObject\n= [&amp;obj]() \n{\n    if(obj)\n    {\n        delete obj;\n        obj= nullptr;\n    }\n};\n</code></pre>\n\n<p>A main code executes and first calls the <strong>RESET</strong> method before creating a new instance of Object. Assume the \"main\" code has no way of accessing, reading, or modifying obj - hence the reliance on a blind reset.</p>\n\n<p><strong>Expected Result</strong>: The first time the reset expression is invoked, the check on obj should return false because obj was set to nullptr in the outer scope -- nothing happens.</p>\n\n<p><strong>Actual Result:</strong> By the time reset is executed, obj no longer points to NULL, the check returns true and delete is called, causing an access violation.</p>\n\n<p>I would like to know if the whatever I am attempting to do is an invalid operation to begin with, or whether the way I am capturing my variables is incorrect. I tried capturing the pointer by value, setting the function to mutable, and a combination of reference and value capture out of desperation.</p>\n\n<blockquote>\n  <p><strong>EDIT:</strong> At this point, I believe the scope of the object is the main culprit as pointed out by others. I will attempt a workaround with\n  that in mind and report back.</p>\n</blockquote>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 566, "user_id": 9811353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d0c1a7821c6e57550be4f8c0ffb4d2c?s=128&d=identicon&r=PG&f=1", "display_name": "BUY", "link": "https://stackoverflow.com/users/9811353/buy"}, "reply_to_user": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 0, "creation_date": 1527142686, "post_id": 50491202, "comment_id": 88016771, "body": "@cbuchart That was not the same with my question but it was similar. I should have checked for that question too. Thanks for guiding me to it."}], "answers": [{"comments": [{"owner": {"reputation": 566, "user_id": 9811353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d0c1a7821c6e57550be4f8c0ffb4d2c?s=128&d=identicon&r=PG&f=1", "display_name": "BUY", "link": "https://stackoverflow.com/users/9811353/buy"}, "edited": false, "score": 0, "creation_date": 1527142741, "post_id": 50492057, "comment_id": 88016791, "body": "Thank you for your answer ,it worked."}], "tags": [], "owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "is_accepted": true, "score": 1, "last_activity_date": 1527088839, "creation_date": 1527088839, "answer_id": 50492057, "question_id": 50491202, "link": "https://stackoverflow.com/questions/50491202/qtreewidget-expanding-the-width-of-column-header-dynamically-c/50492057#50492057", "title": "QTreeWidget Expanding The Width Of Column Header Dynamically C++", "body": "<p>Because QTreeWidget inherits QTreeView you can do this for say column index 0:</p>\n\n<pre><code>ui-&gt;treeWidget-&gt;resizeColumnToContents(0);\n</code></pre>\n"}], "owner": {"reputation": 566, "user_id": 9811353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d0c1a7821c6e57550be4f8c0ffb4d2c?s=128&d=identicon&r=PG&f=1", "display_name": "BUY", "link": "https://stackoverflow.com/users/9811353/buy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "closed_date": 1527142780, "accepted_answer_id": 50492057, "answer_count": 1, "score": 0, "last_activity_date": 1527088839, "creation_date": 1527086317, "question_id": 50491202, "link": "https://stackoverflow.com/questions/50491202/qtreewidget-expanding-the-width-of-column-header-dynamically-c", "closed_reason": "Duplicate", "title": "QTreeWidget Expanding The Width Of Column Header Dynamically C++", "body": "<p>I am working on an application with Qt/c++ that includes a QTreeWidget that has 2 columns. The column headers are \"Name:\" and \"Value:\".</p>\n\n<p>I am logging more and more information to the QTreeWidget but when I run the application it opens smaller than the length of many items (Words), inside.</p>\n\n<p>I want to dynamicially expand the column header's width according to the items inside the columns.</p>\n\n<p>I would be really glad if someone could help me.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1527086283, "post_id": 50491148, "comment_id": 87995198, "body": "<code>std::map&lt;std::tuple&lt;int, int, int&gt;, int&gt;&gt;</code>?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1527086344, "post_id": 50491148, "comment_id": 87995243, "body": "@NathanOliver not compile time."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1527086390, "post_id": 50491148, "comment_id": 87995272, "body": "What do you mean by &#39;generates non-readable code&#39; You mean ASM is not readable, or you can&#39;t read your own code which you wrote?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1527086488, "post_id": 50491148, "comment_id": 87995337, "body": "we certainly cannot read your code, if you dont show it :P, seriously, creating some constexpr lookup is &quot;the better way&quot;, please show your code"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1527086658, "post_id": 50491148, "comment_id": 87995457, "body": "Are ranges (of <code>a</code>, <code>b</code>, <code>c</code>) contiguous as your boolean example, then you can flatten your map to a simple array."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 2, "creation_date": 1527086679, "post_id": 50491148, "comment_id": 87995475, "body": "is there an equation that links a,b,c and d?  You can then make that function a constexpr"}, {"owner": {"reputation": 6563, "user_id": 1020072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ARs87.jpg?s=128&g=1", "display_name": "Sean Cline", "link": "https://stackoverflow.com/users/1020072/sean-cline"}, "edited": false, "score": 1, "creation_date": 1527086979, "post_id": 50491148, "comment_id": 87995692, "body": "The question is vague, but it sounds like you&#39;re looking for <a href=\"https://en.wikipedia.org/wiki/Pattern_matching#Declarative_programming\" rel=\"nofollow noreferrer\">pattern matching</a>. There&#39;s nothing simple built into the language, but there are a few libraries (<a href=\"https://github.com/solodon4/Mach7\" rel=\"nofollow noreferrer\">Mach7</a>, <a href=\"https://github.com/mpark/patterns\" rel=\"nofollow noreferrer\">MPark.Patterns</a>, <a href=\"https://github.com/jbandela/simple_match/\" rel=\"nofollow noreferrer\">simple_match</a>) that try to make the code as clear and declarative as possible. Maybe you can take some hints from them about how to structure your code for readability."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1527087084, "creation_date": 1527087084, "answer_id": 50491465, "question_id": 50491148, "link": "https://stackoverflow.com/questions/50491148/how-to-const-map-variables/50491465#50491465", "title": "How to const map variables", "body": "<p>If you can supply <code>a</code>, <code>b</code>, and <code>c</code> as template arguments, rather than function parameters, you could define a template with three <code>bool</code> arguments, and then supply explicit implementations for the combinations of interest, like this:</p>\n\n<pre><code>template&lt;bool A, bool B, bool C&gt; constexpr int index() { return -1; }\n// Truth table\ntemplate&lt;&gt; constexpr int index&lt; true, false,  true&gt;() { return 9; }\ntemplate&lt;&gt; constexpr int index&lt; true, false, false&gt;() { return 24; }\n...\n</code></pre>\n\n<p>Here is how you would invoke these functions:</p>\n\n<pre><code>cout &lt;&lt; index&lt;true,false,true&gt;() &lt;&lt; endl; // Prints 9\n</code></pre>\n\n<p><a href=\"https://ideone.com/jVkM5D\" rel=\"nofollow noreferrer\">Demo.</a></p>\n"}], "owner": {"reputation": 447, "user_id": 6071697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ea2947bcc835bb3b6ab9ca5303272b8b?s=128&d=identicon&r=PG&f=1", "display_name": "Epic", "link": "https://stackoverflow.com/users/6071697/epic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "accepted_answer_id": 50491465, "answer_count": 1, "score": 1, "last_activity_date": 1527087084, "creation_date": 1527086178, "question_id": 50491148, "link": "https://stackoverflow.com/questions/50491148/how-to-const-map-variables", "title": "How to const map variables", "body": "<p>I have three variables int a,b,c which I use to select a value of a fourth variable d.</p>\n\n<p>A short boolean example:</p>\n\n<pre><code>a=0, b=0, c=0 -&gt; d=0\na=0, b=0, c=1 -&gt; d=1\na=0, b=1, c=0 -&gt; d=2\na=0, b=1, c=1 -&gt; d=1\nand so on...\n</code></pre>\n\n<p>I thought about creating a constexpr matrix to create the mapping. The down side is the it generates non readable code. Is there a better option?  Maybe some boost library or a known design pattern?</p>\n\n<p>I am programming in c++11</p>\n\n<p>Thank you :)</p>\n"}, {"tags": ["c++", "c++11", "initializer-list", "auto"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 7, "creation_date": 1527086104, "post_id": 50491107, "comment_id": 87995075, "body": "` since C++11 we should try to use auto everywhere` - no. AAA is a terrible idea. The correct and idiomatic way in C++11 is <code>std::vector&lt;int&gt; w{1, 2, 3};</code> and <code>std::vector w{1, 2, 3}</code> in C++17."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1527086341, "post_id": 50491107, "comment_id": 87995242, "body": "For AAA, <code>auto w = std::vector&lt;int&gt;{1, 2, 3};</code>..."}, {"owner": {"reputation": 3805, "user_id": 4165552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b32c5e142791fca01cbf252f663ac?s=128&d=identicon&r=PG&f=1", "display_name": "pptaszni", "link": "https://stackoverflow.com/users/4165552/pptaszni"}, "edited": false, "score": 2, "creation_date": 1527086382, "post_id": 50491107, "comment_id": 87995266, "body": "Your <code>auto w</code> is automatically recognized as <code>initializer_list</code>, which is reasonable. You cannot expect compiler to recognize it as <code>std::vector&lt;int&gt;</code>, because <code>{x, x, x}</code> is not necessarily a <code>vector</code> (might be any kind of container or a raw array) and <code>x</code> is not necessarily an <code>int</code>."}, {"owner": {"reputation": 11828, "user_id": 1175080, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5c1ca2e94db0e6c1dba18ddd8d563216?s=128&d=identicon&r=PG", "display_name": "Lone Learner", "link": "https://stackoverflow.com/users/1175080/lone-learner"}, "edited": false, "score": 0, "creation_date": 1527086458, "post_id": 50491107, "comment_id": 87995320, "body": "Why is providing a code that does not work and asking for a way to fix it opinion-based? I believe there would be at most two or three ways to fix it. If those two or three ways are documented in an answer, it should be an objective answer."}], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1527088030, "post_id": 50491302, "comment_id": 87996470, "body": "The cast will just invoke the constructor, so using <code>std::vector&lt;int&gt;{w}</code> instead would be more direct."}], "tags": [], "owner": {"reputation": 19, "user_id": 1926677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252a6d832d79aad82bba0d79cf3035f0?s=128&d=identicon&r=PG", "display_name": "erkut", "link": "https://stackoverflow.com/users/1926677/erkut"}, "is_accepted": false, "score": 0, "last_activity_date": 1527086573, "creation_date": 1527086573, "answer_id": 50491302, "question_id": 50491107, "link": "https://stackoverflow.com/questions/50491107/c-error-no-matching-function-for-call-to-print-size/50491302#50491302", "title": "C++ error: no matching function for call to &#39;print_size&#39;", "body": "<p>casting w would be a solution</p>\n\n<pre><code>    print_size((std::vector&lt;int&gt;)w);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1527086605, "creation_date": 1527086605, "answer_id": 50491310, "question_id": 50491107, "link": "https://stackoverflow.com/questions/50491107/c-error-no-matching-function-for-call-to-print-size/50491310#50491310", "title": "C++ error: no matching function for call to &#39;print_size&#39;", "body": "<p>Without C++17 deduction guides the compiler cannot deduce <code>T</code> for <code>std::vector&lt;T&gt;</code> parameter from argument of type <code>std::initializer_list&lt;T&gt;</code>, unfortunately.</p>\n\n<p>I would suggest adding an overload for <code>print_size(std::initializer_list&lt;T&gt; const&amp;)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1527087021, "last_edit_date": 1527087021, "creation_date": 1527086698, "answer_id": 50491336, "question_id": 50491107, "link": "https://stackoverflow.com/questions/50491107/c-error-no-matching-function-for-call-to-print-size/50491336#50491336", "title": "C++ error: no matching function for call to &#39;print_size&#39;", "body": "<p>Problem is argument type of <code>print_size</code>.\nYour <code>auto w = {1, 2, 3};</code> has type <code>std::initializer_list&lt;int&gt;</code> and this doesn't match to a <code>vector&lt;T&gt;</code>, there is no automatic conversion.</p>\n\n<p>So you can correct <code>print_size</code> this way:</p>\n\n<pre><code>template&lt;class T&gt;\nvoid print_size(std::initializer_list&lt;T&gt; a)\n{\n    std::cout &lt;&lt; a.size() &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Or even better change how template is parametrized:</p>\n\n<pre><code>template&lt;class T&gt;\nvoid print_size(const T&amp; a)\n{\n    std::cout &lt;&lt; a.size() &lt;&lt; '\\n';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 5, "last_activity_date": 1527093728, "last_edit_date": 1527093728, "creation_date": 1527086863, "answer_id": 50491397, "question_id": 50491107, "link": "https://stackoverflow.com/questions/50491107/c-error-no-matching-function-for-call-to-print-size/50491397#50491397", "title": "C++ error: no matching function for call to &#39;print_size&#39;", "body": "<p>For <code>auto w = {1, 2, 3};</code> the type of <code>w</code> will be <code>std::initializer_list&lt;int&gt;</code>, and <code>print_size(w);</code> fails because template parameter <code>T</code> can't be deduced; <a href=\"http://en.cppreference.com/w/cpp/language/template_argument_deduction#Implicit_conversions\" rel=\"nofollow noreferrer\">template argument deduction</a> does not consider implicit conversions.</p>\n\n<blockquote>\n  <p>Type deduction does not consider implicit conversions (other than type adjustments listed above): that's the job for overload resolution, which happens later.</p>\n</blockquote>\n\n<p>You can specify template argument explicitly, </p>\n\n<pre><code>print_size&lt;int&gt;(w);\n</code></pre>\n\n<p>Or you can make <code>w</code> to be a <code>std::vector&lt;int&gt;</code> instead; and if you persist using <code>auto</code> you need to specify the type explicitly.</p>\n\n<pre><code>auto w = std::vector&lt;int&gt;{1, 2, 3};\nprint_size(w);\n</code></pre>\n"}], "owner": {"reputation": 11828, "user_id": 1175080, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5c1ca2e94db0e6c1dba18ddd8d563216?s=128&d=identicon&r=PG", "display_name": "Lone Learner", "link": "https://stackoverflow.com/users/1175080/lone-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1672, "favorite_count": 0, "accepted_answer_id": 50491397, "answer_count": 4, "score": 2, "last_activity_date": 1527124950, "creation_date": 1527086044, "last_edit_date": 1527124950, "question_id": 50491107, "link": "https://stackoverflow.com/questions/50491107/c-error-no-matching-function-for-call-to-print-size", "title": "C++ error: no matching function for call to &#39;print_size&#39;", "body": "<p>I have this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;typename T&gt;\nvoid print_size(std::vector&lt;T&gt; a)\n{\n    std::cout &lt;&lt; a.size() &lt;&lt; '\\n';\n}\n\nint main()\n{\n    std::vector&lt;int&gt; v {1, 2, 3};\n    print_size(v);\n\n    auto w = {1, 2, 3};\n    // print_size(w); // error: no matching function for call to 'print_size'\n                      // candidate template ignored: could not match 'vector' against 'initializer_list'\n}\n</code></pre>\n\n<p>...which compiles and runs without any issues. But if I enable the commented-out line, it produces the error <code>no matching function for call to 'print_size'</code>.</p>\n\n<p>I would like to know what is the correct way to write this code in C++11 and later versions.</p>\n"}, {"tags": ["c++", "linux", "qt", "qt5", "touchscreen"], "comments": [{"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 1, "creation_date": 1527714911, "post_id": 50491050, "comment_id": 88236750, "body": "<code>QT::popup</code> is always <code>modal</code>, this could be the issue. while testing with <code>Qt::FramelessWindowHint | Qt::Tool</code> might provide needed functionality"}, {"owner": {"reputation": 3380, "user_id": 3308570, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Mzz9.jpg?s=128&g=1", "display_name": "JustWe", "link": "https://stackoverflow.com/users/3308570/justwe"}, "edited": false, "score": 0, "creation_date": 1527728687, "post_id": 50491050, "comment_id": 88240437, "body": "Moving the finger on the tableView or the scrollbar? If on the scrollbar, Qt 5.10.1 + Win10 didn&#39;t see the issue as described..."}, {"owner": {"reputation": 5913, "user_id": 1244932, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d2c608e688b798896e8b516855fc1ab1?s=128&d=identicon&r=PG", "display_name": "user1244932", "link": "https://stackoverflow.com/users/1244932/user1244932"}, "reply_to_user": {"reputation": 3380, "user_id": 3308570, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Mzz9.jpg?s=128&g=1", "display_name": "JustWe", "link": "https://stackoverflow.com/users/3308570/justwe"}, "edited": false, "score": 0, "creation_date": 1527747124, "post_id": 50491050, "comment_id": 88245199, "body": "@Jiu the tableview"}, {"owner": {"reputation": 3380, "user_id": 3308570, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Mzz9.jpg?s=128&g=1", "display_name": "JustWe", "link": "https://stackoverflow.com/users/3308570/justwe"}, "edited": false, "score": 1, "creation_date": 1527831153, "post_id": 50491050, "comment_id": 88283194, "body": "I meet the similar issue before, Qt generate completed different event by touching between Freescale Yocto &amp; Windows with the same code. I run your code in Win10+mingw, the table view even can&#39;t scroll...Better mention the device may help."}], "answers": [{"tags": [], "owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "is_accepted": true, "score": 2, "last_activity_date": 1527752814, "last_edit_date": 1592644375, "creation_date": 1527752814, "answer_id": 50619252, "question_id": 50491050, "link": "https://stackoverflow.com/questions/50491050/qtpopup-breaks-qscroller-kinetic-scroll/50619252#50619252", "title": "Qt::Popup breaks QScroller kinetic scroll?", "body": "<p>Qt doesn't fully implement gestures in scrollable areas as <a href=\"https://wiki.qt.io/ScrollGestures\" rel=\"nofollow noreferrer\">explained in their own documentation</a>:</p>\n<blockquote>\n<p>Qt does not really reflect the system behavior wrt gestures on scrollable views (widget classes inheriting QAbstractItemView, QML classes) well.</p>\n<p>[...]</p>\n<p>In widgets, the pan recognizer is currently hard-coded to use 2 touch points. For touchscreens, it should be changed to one. But that can't be done as long as single-finger-panning is reserved for selecting text.</p>\n<p>When using a touch screen, the selection in widgets is driven by mouse events synthesized from touch by the system (Windows) or Qt itself (other platforms). The same touch events drive QGestureManager.</p>\n</blockquote>\n<p>On the other hand, there is a <a href=\"https://doc.qt.io/qt-5/qtouchevent.html\" rel=\"nofollow noreferrer\">known</a> (and <a href=\"https://doc.qt.io/archives/qt-4.8/qtouchevent.html\" rel=\"nofollow noreferrer\">old</a>) undefined behavior with <code>QTouchEvents</code> and pop-up widgets:</p>\n<blockquote>\n<p>The behavior of QTouchEvents is undefined when opening a pop-up or grabbing the mouse while there are more than one active touch points.</p>\n</blockquote>\n<p>Probably the combination of both issues is the origin of your problem.</p>\n<p>As a possible workaround (although not completely what you want), you can enable the two-fingers scroll with <code>QWidget::grabGesture(Qt::PanGesture)</code> as an alternative. Also, as mentioned by @mohammad-kanan in a comment, you may try with <code>Qt::FramelessWindowHint | Qt::Tool</code> instead of <code>Qt::Popup</code>.</p>\n"}], "owner": {"reputation": 5913, "user_id": 1244932, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d2c608e688b798896e8b516855fc1ab1?s=128&d=identicon&r=PG", "display_name": "user1244932", "link": "https://stackoverflow.com/users/1244932/user1244932"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 50619252, "answer_count": 1, "score": 3, "last_activity_date": 1527752814, "creation_date": 1527085887, "last_edit_date": 1527515133, "question_id": 50491050, "link": "https://stackoverflow.com/questions/50491050/qtpopup-breaks-qscroller-kinetic-scroll", "title": "Qt::Popup breaks QScroller kinetic scroll?", "body": "<p>First of all my problem is reproducible only on device with touch screen,\nwith PC/mouse all works fine.</p>\n\n<p>The problem that if I use <code>QTableView</code> + <code>QScroller</code> as standalone window all works fine - I move finger from bottom to top content scrolls down, from top to bottom scrolls up.</p>\n\n<p>But if I put <code>QTableView</code> inside <code>QWidget</code> with <code>Qt::Popup</code> attribute, then scrolling changes direction! I move finger from bottom to top and it scrolls up, from top to bottom scrolls down.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;QAbstractTableModel&gt;\n#include &lt;QScroller&gt;\n#include &lt;QTouchDevice&gt;\n#include &lt;QVBoxLayout&gt;\n#include &lt;QtDebug&gt;\n#include &lt;QtWidgets/QApplication&gt;\n#include &lt;QtWidgets/QTableView&gt;\n\nclass MyModel : public QAbstractTableModel {\npublic:\n  MyModel(QObject *parent) : QAbstractTableModel(parent) {}\n\n  int rowCount(const QModelIndex &amp;parent = QModelIndex()) const override {\n    return 100;\n  }\n  int columnCount(const QModelIndex &amp;parent = QModelIndex()) const override {\n    return 3;\n  }\n  QVariant data(const QModelIndex &amp;index,\n                int role = Qt::DisplayRole) const override {\n    if (role == Qt::DisplayRole) {\n      return QString(\"Row%1, Column%2\")\n          .arg(index.row() + 1)\n          .arg(index.column() + 1);\n    }\n    return QVariant();\n  }\n  QVariant headerData(int section, Qt::Orientation orientation,\n                      int role) const override {\n    if (role == Qt::DisplayRole) {\n      if (orientation == Qt::Horizontal) {\n        switch (section) {\n        case 0:\n          return QString(\"first\");\n        case 1:\n          return QString(\"second\");\n        case 2:\n          return QString(\"third\");\n        }\n      }\n    }\n    return QVariant();\n  }\n};\n\nbool is_touch_screen_avaible() {\n  const auto devs = QTouchDevice::devices();\n  for (const auto &amp;dev : devs) {\n    if (dev-&gt;type() == QTouchDevice::TouchScreen) {\n      return true;\n    }\n  }\n  return false;\n}\n\nvoid configure_scoller_for_item_view(QAbstractItemView *view) {\n  QScroller *scroller = QScroller::scroller(view);\n  view-&gt;setVerticalScrollMode(QAbstractItemView::ScrollPerPixel);\n  view-&gt;setHorizontalScrollMode(QAbstractItemView::ScrollPerPixel);\n  QScrollerProperties properties =\n      QScroller::scroller(scroller)-&gt;scrollerProperties();\n  QVariant overshootPolicy =\n      QVariant::fromValue&lt;QScrollerProperties::OvershootPolicy&gt;(\n          QScrollerProperties::OvershootAlwaysOff);\n  properties.setScrollMetric(QScrollerProperties::VerticalOvershootPolicy,\n                             overshootPolicy);\n  scroller-&gt;setScrollerProperties(properties);\n  properties.setScrollMetric(QScrollerProperties::HorizontalOvershootPolicy,\n                             overshootPolicy);\n  scroller-&gt;setScrollerProperties(properties);\n  if (is_touch_screen_avaible())\n    scroller-&gt;grabGesture(view, QScroller::TouchGesture);\n  else\n    scroller-&gt;grabGesture(view, QScroller::LeftMouseButtonGesture);\n}\n\n#define POPUP\n\nint main(int argc, char *argv[]) {\n  QApplication a(argc, argv);\n#ifdef POPUP\n  QWidget *mainWin = new QWidget;\n  mainWin-&gt;setWindowFlags(Qt::Popup);\n  auto lay = new QVBoxLayout(mainWin);\n  mainWin-&gt;setLayout(lay);\n  auto tableView = new QTableView(mainWin);\n  lay-&gt;addWidget(tableView);\n#else\n  auto tableView = new QTableView;\n#endif\n  MyModel myModel(nullptr);\n  tableView-&gt;setModel(&amp;myModel);\n  tableView-&gt;setSelectionMode(QAbstractItemView::NoSelection);\n  tableView-&gt;setFocusPolicy(Qt::NoFocus);\n  configure_scoller_for_item_view(tableView);\n\n#ifdef POPUP\n  mainWin-&gt;resize(500, 500);\n  mainWin-&gt;show();\n#else\n  tableView-&gt;resize(500, 500);\n  tableView-&gt;show();\n#endif\n\n  return a.exec();\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "memory-leaks", "glut"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 1, "creation_date": 1527092408, "post_id": 50491022, "comment_id": 87999188, "body": "Shouldn&#39;t there be a call to <code>glDeleteLists</code> somewhere?"}, {"owner": {"reputation": 835, "user_id": 8048699, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-s4d5w6ggaYg/AAAAAAAAAAI/AAAAAAAAAGY/Ju5C6zMEbr0/photo.jpg?sz=128", "display_name": "Kyu96", "link": "https://stackoverflow.com/users/8048699/kyu96"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1527095817, "post_id": 50491022, "comment_id": 88000961, "body": "@BDL Does <code>glDeleteLists</code> need to be called every time the object was drawn?"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 2, "creation_date": 1527096696, "post_id": 50491022, "comment_id": 88001366, "body": "In general: No. But you should delete every list when you don&#39;t need them anymore. Since you create a new list every time you draw the object, I guess you should be deleting one list every time too."}, {"owner": {"reputation": 835, "user_id": 8048699, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-s4d5w6ggaYg/AAAAAAAAAAI/AAAAAAAAAGY/Ju5C6zMEbr0/photo.jpg?sz=128", "display_name": "Kyu96", "link": "https://stackoverflow.com/users/8048699/kyu96"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1527121501, "post_id": 50491022, "comment_id": 88011210, "body": "that fixed it thanks"}], "answers": [{"tags": [], "owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "is_accepted": true, "score": 0, "last_activity_date": 1527148041, "creation_date": 1527148041, "answer_id": 50503795, "question_id": 50491022, "link": "https://stackoverflow.com/questions/50491022/glcalllist-memory-leak/50503795#50503795", "title": "glCallList Memory Leak", "body": "<p>The memory leak happens because a new displaylist gets created (<code>glNewList</code>) everytime <code>drawObject</code> is called, but they never get deleted. A quick fix is to delete the displaylist after drawing them, but the current code suggests that there is a more fundamental problem.</p>\n\n<p>Usually, display lists should only be used when there is a list of OpenGL commands that has to be executed <em>more than once</em>. When a group of commands is executed only once (as in the current code), then there is no point in storing them first in a display list. In fact, this can make the code slower than it would have been without the list.</p>\n\n<p>I'd suggest to either compile the list once at startup (since the mesh seems to be static anyway) and just use this one list in every frame to draw the object. If the mesh is fully dynamic, I would remove the list at all (since it is executed only once). The last option (fully dynamic mesh, drawn more than once) would be to reuse the existing display list instead of creating a new one.</p>\n\n<p><em>Note, that display lists have been deprecated in OpenGL 3.0 around 2008. Unless you have to support a legacy project, using modern OpenGL should be the preferred way.</em></p>\n"}], "owner": {"reputation": 835, "user_id": 8048699, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-s4d5w6ggaYg/AAAAAAAAAAI/AAAAAAAAAGY/Ju5C6zMEbr0/photo.jpg?sz=128", "display_name": "Kyu96", "link": "https://stackoverflow.com/users/8048699/kyu96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 50503795, "answer_count": 1, "score": -1, "last_activity_date": 1527148041, "creation_date": 1527085812, "question_id": 50491022, "link": "https://stackoverflow.com/questions/50491022/glcalllist-memory-leak", "title": "glCallList Memory Leak", "body": "<p>I am creating a 3D object by creating a <code>glCallList</code> with vectors, faces and and normal vectors. Even tho I delete all vectors items after usage, I noticed that the memory is filling up until the system freezes.\nI already analyzed the application with valgrind but didn't notice anything problematic.\nFor example, here I create a 3D object:</p>\n\n<pre><code>void MyClass::drawObject() {\n\n\n    glPushMatrix();\n\n    std::vector&lt;ObjCoordinate *&gt; vertex;\n    std::vector&lt;ObjFace *&gt; faces;\n    std::vector&lt;ObjCoordinate *&gt; normals;\n\n    vertex.push_back(new ObjCoordinate(-1.30287, -1.44034, 0.216688));\n    vertex.push_back(new ObjCoordinate(-1.27961, -1.50539, 0.072052));\n    vertex.push_back(new ObjCoordinate(-1.08061, -1.28665, 0.206139));\n    vertex.push_back(new ObjCoordinate(-1.21638, -1.35257, 0.180025));\n    vertex.push_back(new ObjCoordinate(-1.15207, -1.32099, 0.229603));\n    vertex.push_back(new ObjCoordinate(-1.28515, -1.44447, 0.363248));\n    vertex.push_back(new ObjCoordinate(-1.28928, -1.50988, 0.32576));\n    vertex.push_back(new ObjCoordinate(-1.26158, -1.53761, 0.241082));\n    vertex.push_back(new ObjCoordinate(-1.20301, -1.55354, 0.160082));\n    vertex.push_back(new ObjCoordinate(-1.23054, -1.41658, 0.439494));\n    vertex.push_back(new ObjCoordinate(-1.2319, -1.48643, 0.476053));\n    vertex.push_back(new ObjCoordinate(-1.20001, -1.54897, 0.426928));\n    vertex.push_back(new ObjCoordinate(-1.13637, -1.39263, 0.466446));\n    vertex.push_back(new ObjCoordinate(-1.12158, -1.45057, 0.544793));\n    vertex.push_back(new ObjCoordinate(-1.11357, -1.5188, 0.532664));\n    vertex.push_back(new ObjCoordinate(-1.10002, -1.55842, 0.464288));\n    vertex.push_back(new ObjCoordinate(-1.04322, -1.4075, 0.50493));\n    vertex.push_back(new ObjCoordinate(-0.987058, -1.49763, 0.54012));\n    vertex.push_back(new ObjCoordinate(-0.950752, -1.55954, 0.42481));\n    vertex.push_back(new ObjCoordinate(-1.07206, -1.56899, 0.385537));\n    vertex.push_back(new ObjCoordinate(-0.932486, -1.41533, 0.459069));\n    vertex.push_back(new ObjCoordinate(-0.874065, -1.47041, 0.441795));\n    vertex.push_back(new ObjCoordinate(-0.881756, -1.52362, 0.426011));\n    vertex.push_back(new ObjCoordinate(-0.921452, -1.29853, 0.206971));\n    vertex.push_back(new ObjCoordinate(-0.771931, -1.42509, 0.210098));\n    vertex.push_back(new ObjCoordinate(-0.746773, -1.48725, 0.182829));\n    vertex.push_back(new ObjCoordinate(-0.774339, -1.53451, 0.177566));\n    vertex.push_back(new ObjCoordinate(-0.855455, -1.3279, 0.167282));\n    vertex.push_back(new ObjCoordinate(-1.01916, -1.26652, 0.155538));\n    vertex.push_back(new ObjCoordinate(-0.991061, -1.28652, 0.22452));\n    vertex.push_back(new ObjCoordinate(-0.756721, -1.45955, 0.030918));\n    vertex.push_back(new ObjCoordinate(-0.770647, -1.51682, 0.03924));\n    vertex.push_back(new ObjCoordinate(-0.817663, -1.55395, 0.119195));\n    vertex.push_back(new ObjCoordinate(-0.886225, -1.56266, 0.225088));\n    vertex.push_back(new ObjCoordinate(-0.7967, -1.38249, 0.035854));\n    vertex.push_back(new ObjCoordinate(-0.904208, -1.29591, 0.044522));\n    vertex.push_back(new ObjCoordinate(-0.819127, -1.47748, -0.078676));\n    vertex.push_back(new ObjCoordinate(-0.838126, -1.5358, -0.033324));\n    vertex.push_back(new ObjCoordinate(-0.848241, -1.41404, -0.094209));\n    vertex.push_back(new ObjCoordinate(-1.02568, -1.55382, 0.176562));\n    vertex.push_back(new ObjCoordinate(-0.971872, -1.26754, 0.086063));\n    vertex.push_back(new ObjCoordinate(-0.92238, -1.54838, -0.059034));\n    vertex.push_back(new ObjCoordinate(-0.948484, -1.32027, -0.059503));\n    vertex.push_back(new ObjCoordinate(-0.981524, -1.42006, -0.157504));\n    vertex.push_back(new ObjCoordinate(-0.920155, -1.49055, -0.145955));\n    vertex.push_back(new ObjCoordinate(-1.04709, -1.55412, -0.033783));\n    vertex.push_back(new ObjCoordinate(-1.03018, -1.28025, 0.012423));\n    vertex.push_back(new ObjCoordinate(-1.07872, -1.3425, -0.081606));\n    vertex.push_back(new ObjCoordinate(-1.07475, -1.51965, -0.127059));\n    vertex.push_back(new ObjCoordinate(-1.17664, -1.36255, -0.030069));\n    vertex.push_back(new ObjCoordinate(-1.12364, -1.42699, -0.138141));\n    vertex.push_back(new ObjCoordinate(-1.07618, -1.27108, 0.0936));\n    vertex.push_back(new ObjCoordinate(-1.19638, -1.53617, -0.015344));\n    vertex.push_back(new ObjCoordinate(-1.14774, -1.3108, 0.054986));\n    vertex.push_back(new ObjCoordinate(-1.23368, -1.46416, -0.053383));\n    vertex.push_back(new ObjCoordinate(-1.28552, -1.43121, 0.076094));\n    normals.push_back(new ObjCoordinate(0.005, -0.9974, -0.0713));\n    normals.push_back(new ObjCoordinate(-0.6866, 0.7197, 0.1033));\n    normals.push_back(new ObjCoordinate(-0.2374, -0.9712, 0.0193));\n    normals.push_back(new ObjCoordinate(-0.5388, 0.8243, 0.174));\n    normals.push_back(new ObjCoordinate(-0.3386, 0.8976, 0.2822));\n    normals.push_back(new ObjCoordinate(-0.505, -0.8554, 0.115));\n    normals.push_back(new ObjCoordinate(-0.8265, 0.2736, 0.4919));\n    normals.push_back(new ObjCoordinate(-0.6855, -0.6326, 0.3604));\n    normals.push_back(new ObjCoordinate(-0.1487, -0.9887, 0.0186));\n    normals.push_back(new ObjCoordinate(-0.3148, 0.9007, 0.2993));\n    normals.push_back(new ObjCoordinate(-0.4678, -0.2077, 0.8591));\n    normals.push_back(new ObjCoordinate(-0.3541, 0.7187, 0.5984));\n    normals.push_back(new ObjCoordinate(-0.2487, -0.8586, 0.4483));\n    normals.push_back(new ObjCoordinate(-0.0634, 0.9513, 0.3016));\n    normals.push_back(new ObjCoordinate(-0.0757, 0.9291, 0.362));\n    normals.push_back(new ObjCoordinate(0.1903, 0.4577, 0.8685));\n    normals.push_back(new ObjCoordinate(-0.0352, -0.9962, -0.0801));\n    normals.push_back(new ObjCoordinate(0.2365, 0.8754, 0.4217));\n    normals.push_back(new ObjCoordinate(0.561, 0.3614, 0.7447));\n    normals.push_back(new ObjCoordinate(0.6664, -0.299, 0.683));\n    normals.push_back(new ObjCoordinate(0.2555, 0.8729, 0.4156));\n    normals.push_back(new ObjCoordinate(0.0658, -0.9972, 0.0368));\n    normals.push_back(new ObjCoordinate(0.8883, 0.1729, 0.4254));\n    normals.push_back(new ObjCoordinate(0.8611, -0.255, 0.4399));\n    normals.push_back(new ObjCoordinate(0.4462, -0.8647, 0.2308));\n    normals.push_back(new ObjCoordinate(0.5542, 0.7458, 0.3698));\n    normals.push_back(new ObjCoordinate(0.2842, -0.9528, 0.1063));\n    normals.push_back(new ObjCoordinate(0.7447, 0.665, 0.0567));\n    normals.push_back(new ObjCoordinate(0.4361, 0.8979, 0.0608));\n    normals.push_back(new ObjCoordinate(0.4257, -0.8901, -0.163));\n    normals.push_back(new ObjCoordinate(0.1881, -0.972, -0.1409));\n    normals.push_back(new ObjCoordinate(0.7938, 0.4388, -0.421));\n    normals.push_back(new ObjCoordinate(0.8547, -0.2721, -0.4422));\n    normals.push_back(new ObjCoordinate(0.5532, 0.7275, -0.4058));\n    normals.push_back(new ObjCoordinate(0.5494, 0.0479, -0.8342));\n    normals.push_back(new ObjCoordinate(0.1958, 0.9286, -0.3154));\n    normals.push_back(new ObjCoordinate(0.3177, 0.6087, -0.727));\n    normals.push_back(new ObjCoordinate(-0.0255, -0.9401, -0.3399));\n    normals.push_back(new ObjCoordinate(-0.0367, 0.9985, -0.0397));\n    normals.push_back(new ObjCoordinate(-0.0541, 0.8452, -0.5316));\n    normals.push_back(new ObjCoordinate(0.0016, 0.7004, -0.7138));\n    normals.push_back(new ObjCoordinate(-0.4998, -0.5926, -0.6317));\n    normals.push_back(new ObjCoordinate(-0.3383, 0.8943, -0.2928));\n    normals.push_back(new ObjCoordinate(-0.6296, 0.4915, -0.6018));\n    normals.push_back(new ObjCoordinate(-0.6613, 0.7193, -0.213));\n    normals.push_back(new ObjCoordinate(-0.4933, 0.8696, 0.0197));\n    normals.push_back(new ObjCoordinate(-0.4528, -0.8835, -0.1201));\n    normals.push_back(new ObjCoordinate(-0.7207, 0.6918, -0.044));\n    normals.push_back(new ObjCoordinate(-0.4009, 0.9095, 0.1101));\n    normals.push_back(new ObjCoordinate(-0.9893, -0.0719, -0.1268));\n    normals.push_back(new ObjCoordinate(-0.7662, -0.6414, -0.0406));\n    normals.push_back(new ObjCoordinate(0.1119, -0.85, 0.5148));\n    normals.push_back(new ObjCoordinate(-0.6144, 0.7732, 0.1572));\n    normals.push_back(new ObjCoordinate(-0.9928, -0.0059, 0.1199));\n    normals.push_back(new ObjCoordinate(-0.9144, -0.1563, 0.3735));\n    normals.push_back(new ObjCoordinate(-0.1262, -0.9881, 0.0878));\n    normals.push_back(new ObjCoordinate(-0.575, 0.3882, 0.7202));\n    normals.push_back(new ObjCoordinate(-0.4591, -0.6816, 0.5698));\n    normals.push_back(new ObjCoordinate(-0.0159, 0.9191, 0.3936));\n    normals.push_back(new ObjCoordinate(-0.1244, 0.7864, 0.6051));\n    normals.push_back(new ObjCoordinate(0.0306, -0.9892, 0.1436));\n    normals.push_back(new ObjCoordinate(-0.0282, -0.1782, 0.9836));\n    normals.push_back(new ObjCoordinate(0.8872, 0.4611, -0.0134));\n    normals.push_back(new ObjCoordinate(0.3572, 0.5244, 0.773));\n    normals.push_back(new ObjCoordinate(0.385, -0.7571, 0.5277));\n    normals.push_back(new ObjCoordinate(0.6855, 0.5957, 0.4187));\n    normals.push_back(new ObjCoordinate(0.787, -0.4994, 0.3622));\n    normals.push_back(new ObjCoordinate(0.6173, 0.6939, 0.3709));\n    normals.push_back(new ObjCoordinate(0.2872, -0.9518, 0.1076));\n    normals.push_back(new ObjCoordinate(0.5118, -0.8538, -0.0955));\n    normals.push_back(new ObjCoordinate(0.9622, -0.2497, -0.1086));\n    normals.push_back(new ObjCoordinate(0.0349, -0.9979, -0.0546));\n    normals.push_back(new ObjCoordinate(0.6244, 0.7798, -0.0448));\n    normals.push_back(new ObjCoordinate(0.2659, 0.9494, 0.167));\n    normals.push_back(new ObjCoordinate(0.8224, 0.2526, -0.5097));\n    normals.push_back(new ObjCoordinate(-0.124, -0.1821, -0.9754));\n    normals.push_back(new ObjCoordinate(0.6663, -0.5808, -0.4677));\n    normals.push_back(new ObjCoordinate(0.4165, 0.9072, 0.0589));\n    normals.push_back(new ObjCoordinate(-0.0661, -0.9978, 0.0082));\n    normals.push_back(new ObjCoordinate(0.4853, -0.6298, -0.6065));\n    normals.push_back(new ObjCoordinate(0.5503, 0.7349, -0.3963));\n    normals.push_back(new ObjCoordinate(0.2805, -0.8024, -0.5267));\n    normals.push_back(new ObjCoordinate(0.4113, 0.2129, -0.8863));\n    normals.push_back(new ObjCoordinate(0.1927, 0.934, -0.3007));\n    normals.push_back(new ObjCoordinate(-0.0434, 0.9897, -0.1365));\n    normals.push_back(new ObjCoordinate(0.089, -0.8303, -0.5501));\n    normals.push_back(new ObjCoordinate(-0.3589, 0.8528, -0.3793));\n    normals.push_back(new ObjCoordinate(-0.1366, 0.6001, -0.7882));\n    normals.push_back(new ObjCoordinate(-0.0018, -1, 0.0016));\n    normals.push_back(new ObjCoordinate(-0.1506, -0.941, -0.3031));\n    normals.push_back(new ObjCoordinate(-0.214, 0.9687, 0.1257));\n    normals.push_back(new ObjCoordinate(-0.454, 0.6495, -0.6099));\n    normals.push_back(new ObjCoordinate(-0.4923, -0.3548, -0.7948));\n    normals.push_back(new ObjCoordinate(-0.1313, -0.986, -0.1026));\n    normals.push_back(new ObjCoordinate(-0.68, -0.5854, -0.4414));\n    normals.push_back(new ObjCoordinate(-0.7424, 0.5151, -0.4284));\n    normals.push_back(new ObjCoordinate(-0.9317, -0.0547, -0.3591));\n    normals.push_back(new ObjCoordinate(-0.6636, 0.7388, -0.1175));\n    normals.push_back(new ObjCoordinate(-0.4752, 0.878, 0.0571));\n    normals.push_back(new ObjCoordinate(-0.3939, -0.9131, -0.1053));\n    normals.push_back(new ObjCoordinate(-0.9664, -0.2537, -0.0413));\n    normals.push_back(new ObjCoordinate(0.1258, -0.857, 0.4997));\n    normals.push_back(new ObjCoordinate(0.928, 0.3724, 0.0071));\n    normals.push_back(new ObjCoordinate(0.865, -0.5001, -0.0409));\n    normals.push_back(new ObjCoordinate(0.0412, -0.9976, -0.0554));\n    normals.push_back(new ObjCoordinate(0.2071, 0.965, 0.161));\n    normals.push_back(new ObjCoordinate(-0.0763, -0.2255, -0.9712));\n    normals.push_back(new ObjCoordinate(-0.3754, 0.843, -0.3853));\n    faces.push_back(new ObjFace(1, 40, 9, 20));\n    faces.push_back(new ObjFace(2, 1, 4, 6));\n    faces.push_back(new ObjFace(3, 8, 12, 9));\n    faces.push_back(new ObjFace(4, 4, 5, 10));\n    faces.push_back(new ObjFace(5, 5, 3, 10));\n    faces.push_back(new ObjFace(6, 7, 12, 8));\n    faces.push_back(new ObjFace(7, 6, 10, 11));\n    faces.push_back(new ObjFace(8, 7, 11, 12));\n    faces.push_back(new ObjFace(9, 12, 20, 9));\n    faces.push_back(new ObjFace(10, 10, 3, 13));\n    faces.push_back(new ObjFace(11, 11, 14, 15));\n    faces.push_back(new ObjFace(12, 10, 13, 14));\n    faces.push_back(new ObjFace(13, 12, 15, 16));\n    faces.push_back(new ObjFace(14, 3, 29, 30));\n    faces.push_back(new ObjFace(15, 3, 30, 13));\n    faces.push_back(new ObjFace(16, 14, 17, 18));\n    faces.push_back(new ObjFace(17, 40, 20, 34));\n    faces.push_back(new ObjFace(18, 30, 21, 17));\n    faces.push_back(new ObjFace(19, 21, 22, 18));\n    faces.push_back(new ObjFace(20, 18, 22, 23));\n    faces.push_back(new ObjFace(21, 30, 24, 21));\n    faces.push_back(new ObjFace(22, 20, 19, 34));\n    faces.push_back(new ObjFace(23, 22, 25, 26));\n    faces.push_back(new ObjFace(24, 22, 26, 23));\n    faces.push_back(new ObjFace(25, 23, 27, 19));\n    faces.push_back(new ObjFace(26, 24, 28, 21));\n    faces.push_back(new ObjFace(27, 27, 33, 19));\n    faces.push_back(new ObjFace(28, 28, 35, 25));\n    faces.push_back(new ObjFace(29, 24, 36, 28));\n    faces.push_back(new ObjFace(30, 32, 38, 33));\n    faces.push_back(new ObjFace(31, 38, 42, 33));\n    faces.push_back(new ObjFace(32, 35, 39, 31));\n    faces.push_back(new ObjFace(33, 31, 37, 32));\n    faces.push_back(new ObjFace(34, 36, 43, 35));\n    faces.push_back(new ObjFace(35, 39, 45, 37));\n    faces.push_back(new ObjFace(36, 41, 47, 36));\n    faces.push_back(new ObjFace(37, 43, 44, 39));\n    faces.push_back(new ObjFace(38, 42, 49, 46));\n    faces.push_back(new ObjFace(39, 29, 52, 41));\n    faces.push_back(new ObjFace(40, 43, 47, 48));\n    faces.push_back(new ObjFace(41, 43, 48, 44));\n    faces.push_back(new ObjFace(42, 49, 55, 53));\n    faces.push_back(new ObjFace(43, 47, 52, 54));\n    faces.push_back(new ObjFace(44, 51, 50, 55));\n    faces.push_back(new ObjFace(45, 50, 54, 56));\n    faces.push_back(new ObjFace(46, 54, 52, 4));\n    faces.push_back(new ObjFace(47, 53, 2, 8));\n    faces.push_back(new ObjFace(48, 56, 4, 1));\n    faces.push_back(new ObjFace(49, 52, 3, 5));\n    faces.push_back(new ObjFace(50, 1, 2, 56));\n    faces.push_back(new ObjFace(51, 8, 2, 7));\n    faces.push_back(new ObjFace(52, 18, 16, 15));\n    faces.push_back(new ObjFace(53, 6, 4, 10));\n    faces.push_back(new ObjFace(54, 7, 1, 6));\n    faces.push_back(new ObjFace(55, 7, 6, 11));\n    faces.push_back(new ObjFace(56, 12, 16, 20));\n    faces.push_back(new ObjFace(57, 11, 10, 14));\n    faces.push_back(new ObjFace(58, 12, 11, 15));\n    faces.push_back(new ObjFace(59, 13, 30, 17));\n    faces.push_back(new ObjFace(60, 14, 13, 17));\n    faces.push_back(new ObjFace(61, 20, 16, 19));\n    faces.push_back(new ObjFace(62, 15, 14, 18));\n    faces.push_back(new ObjFace(63, 31, 25, 35));\n    faces.push_back(new ObjFace(64, 18, 17, 21));\n    faces.push_back(new ObjFace(65, 19, 18, 23));\n    faces.push_back(new ObjFace(66, 22, 21, 25));\n    faces.push_back(new ObjFace(67, 23, 26, 27));\n    faces.push_back(new ObjFace(68, 21, 28, 25));\n    faces.push_back(new ObjFace(69, 19, 33, 34));\n    faces.push_back(new ObjFace(70, 27, 32, 33));\n    faces.push_back(new ObjFace(71, 32, 26, 31));\n    faces.push_back(new ObjFace(72, 34, 42, 46));\n    faces.push_back(new ObjFace(73, 28, 36, 35));\n    faces.push_back(new ObjFace(74, 41, 30, 29));\n    faces.push_back(new ObjFace(75, 31, 39, 37));\n    faces.push_back(new ObjFace(76, 49, 44, 51));\n    faces.push_back(new ObjFace(77, 32, 37, 38));\n    faces.push_back(new ObjFace(78, 24, 41, 36));\n    faces.push_back(new ObjFace(79, 34, 46, 40));\n    faces.push_back(new ObjFace(80, 37, 45, 38));\n    faces.push_back(new ObjFace(81, 35, 43, 39));\n    faces.push_back(new ObjFace(82, 38, 45, 42));\n    faces.push_back(new ObjFace(83, 39, 44, 45));\n    faces.push_back(new ObjFace(84, 36, 47, 43));\n    faces.push_back(new ObjFace(85, 41, 52, 47));\n    faces.push_back(new ObjFace(86, 42, 45, 49));\n    faces.push_back(new ObjFace(87, 54, 48, 47));\n    faces.push_back(new ObjFace(88, 44, 48, 51));\n    faces.push_back(new ObjFace(89, 40, 46, 9));\n    faces.push_back(new ObjFace(90, 46, 49, 53));\n    faces.push_back(new ObjFace(91, 29, 3, 52));\n    faces.push_back(new ObjFace(92, 51, 48, 50));\n    faces.push_back(new ObjFace(93, 49, 51, 55));\n    faces.push_back(new ObjFace(94, 9, 46, 53));\n    faces.push_back(new ObjFace(95, 53, 55, 2));\n    faces.push_back(new ObjFace(96, 55, 50, 56));\n    faces.push_back(new ObjFace(97, 2, 55, 56));\n    faces.push_back(new ObjFace(98, 56, 54, 4));\n    faces.push_back(new ObjFace(99, 4, 52, 5));\n    faces.push_back(new ObjFace(100, 9, 53, 8));\n    faces.push_back(new ObjFace(101, 1, 7, 2));\n    faces.push_back(new ObjFace(102, 18, 19, 16));\n    faces.push_back(new ObjFace(103, 31, 26, 25));\n    faces.push_back(new ObjFace(104, 32, 27, 26));\n    faces.push_back(new ObjFace(105, 34, 33, 42));\n    faces.push_back(new ObjFace(106, 41, 24, 30));\n    faces.push_back(new ObjFace(107, 49, 45, 44));\n    faces.push_back(new ObjFace(108, 54, 50, 48));\n\n\n    int listName = vertexObjectConverter.ConvertVerticesToObject(vertex, faces, normals);\n\n    glColor3f(Red, Green, Blue);\n    glTranslatef(0, 2, 0);\n    glScalef(6.2, 6.2, 6.2);\n    glCallList(listName);\n    glPopMatrix();\n\n    // Delete vector data to prevent memory leaks\n    for (int i = 0; i &lt; faces.size(); i++)\n        delete faces[i];\n    for (int i = 0; i &lt; normals.size(); i++)\n        delete normals[i];\n    for (int i = 0; i &lt; vertex.size(); i++)\n        delete vertex[i];\n}\n</code></pre>\n\n<p>To create the object from the triangles I wrote this function:</p>\n\n<pre><code>int VertexObjectConverter::ConvertVerticesToObject(const std::vector&lt;ObjCoordinate *&gt; &amp;vertex,\n                                                   const std::vector&lt;ObjFace *&gt; &amp;faces,\n                                                   const std::vector&lt;ObjCoordinate *&gt; &amp;normals) {\n    int displayListName;\n    displayListName = glGenLists(1);\n    glNewList(displayListName, GL_COMPILE);\n   //\n\n   for (int i = 0; i &lt; faces.size(); i++) {\n\n        // Triangle faces\n        glBegin(GL_TRIANGLES);\n        glNormal3f(normals[faces[i]-&gt;facenum-1]-&gt;x,normals[faces[i]-&gt;facenum-1]-&gt;y,normals[faces[i]-&gt;facenum-1]-&gt;z);\n        glVertex3f(vertex[faces[i]-&gt;faces[0]-1]-&gt;x,vertex[faces[i]-&gt;faces[0]-1]-&gt;y,vertex[faces[i]-&gt;faces[0]-1]-&gt;z);\n        glVertex3f(vertex[faces[i]-&gt;faces[1]-1]-&gt;x,vertex[faces[i]-&gt;faces[1]-1]-&gt;y,vertex[faces[i]-&gt;faces[1]-1]-&gt;z);\n        glVertex3f(vertex[faces[i]-&gt;faces[2]-1]-&gt;x,vertex[faces[i]-&gt;faces[2]-1]-&gt;y,vertex[faces[i]-&gt;faces[2]-1]-&gt;z);\n        glEnd();\n\n    }\n    glEndList();\n\n    return displayListName;\n}\n</code></pre>\n\n<p>I created two structs, <code>ObjCoordinate</code> and <code>ObjFace</code> to store the vector and face information:</p>\n\n<pre><code>struct ObjCoordinate {\n    float x, y, z;\n\n    ObjCoordinate(float a, float b, float c) : x(a), y(b), z(c) {};\n};\n\nstruct ObjFace {\n    int facenum;\n    int faces[4];\n    bool four;\n\n    ObjFace(int facen, int f1, int f2, int f3) : facenum(facen) { \n        faces[0] = f1;\n        faces[1] = f2;\n        faces[2] = f3;\n    }\n\n    ObjFace(int facen, int f1, int f2, int f3, int f4) : facenum(facen) { \n        faces[0] = f1;\n        faces[1] = f2;\n        faces[2] = f3;\n        faces[3] = f4;\n        four = true;\n    }\n};\n</code></pre>\n\n<p>The scene is simply rendered by calling the draw function multiple times:</p>\n\n<pre><code>/// Renders the scene\nvoid RenderScene() {\n\n    // Presets\n    glLoadIdentity();\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    glClearColor(0.0f, 1.0f, 1.0f, 1.0f);\n    glOrtho(-20, 20, -20, 20, -20, 20);\n\n    // Scene Stuff\n    setCameraPerspective(Perspective::ROTATE);\n\n    // Orbit the camera around the origin\n    if (rotateCamera) {\n\n        cameraX = initCameraX * cos(theta) - initCameraY * sin(theta);\n        cameraZ = initCameraX * sin(theta) + initCameraY * cos(theta);\n\n        glTranslatef(cameraX, cameraY, cameraZ);\n        gluLookAt(cameraX, cameraY, cameraZ, 0, 0, 0, 0, 1, 0);\n\n        theta += 0.01;\n        glPushMatrix();\n    }\n\n    drawCoordinateAxes();\n    createLight();\n\n    // Draw element\n    MyObject.drawObject();\n\n    // Swap buffers\n    glutSwapBuffers();\n}\n</code></pre>\n\n<p>Is there anything I am missing? What is filling up the memory?\nMy assumption is that glCallList has something to do with it, because normal openGL object like spheres and cubes are no problem, only those custom created forms trigger that problem.</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 5879, "user_id": 1017853, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EfEqD.gif?s=128&g=1", "display_name": "Alexander Stepaniuk", "link": "https://stackoverflow.com/users/1017853/alexander-stepaniuk"}, "edited": false, "score": 1, "creation_date": 1527085693, "post_id": 50490868, "comment_id": 87994756, "body": "Did you try writing visitor lambda according to those examples: <a href=\"http://en.cppreference.com/w/cpp/utility/variant/visit\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/variant/visit</a> ? Can you show what you have tried?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1527086015, "post_id": 50490868, "comment_id": 87995006, "body": "FYI you missed a few references in there, even if it did compile you would be modifying local copies and not <code>callbacks</code>."}, {"owner": {"reputation": 621, "user_id": 6018652, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/789cd26372e294e2d5af130f51d021ff?s=128&d=identicon&r=PG", "display_name": "Fluffy", "link": "https://stackoverflow.com/users/6018652/fluffy"}, "edited": false, "score": 0, "creation_date": 1527086141, "post_id": 50490868, "comment_id": 87995101, "body": "Yes, so I&#39;ve tried what&#39;s commented out in the question, I also tried copying the &quot;overloaded operator()&quot; example in your link, without success. But to be fair I&#39;m still wrapping my mind around this and I don&#39;t fully comprehend it."}, {"owner": {"reputation": 621, "user_id": 6018652, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/789cd26372e294e2d5af130f51d021ff?s=128&d=identicon&r=PG", "display_name": "Fluffy", "link": "https://stackoverflow.com/users/6018652/fluffy"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1527086259, "post_id": 50490868, "comment_id": 87995189, "body": "@Rakete1111 Could you be more specific? <code>auto func</code> should probably be <code>auto&amp; func</code> but variant &quot;must have no reference alternative&quot;"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1527086299, "post_id": 50490868, "comment_id": 87995207, "body": "@Fluffy I mean <code>callbacksVec</code>. (and the one you mentioned, although that is not that bad)"}, {"owner": {"reputation": 621, "user_id": 6018652, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/789cd26372e294e2d5af130f51d021ff?s=128&d=identicon&r=PG", "display_name": "Fluffy", "link": "https://stackoverflow.com/users/6018652/fluffy"}, "edited": false, "score": 0, "creation_date": 1527086433, "post_id": 50490868, "comment_id": 87995304, "body": "You&#39;re right, edited that in. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 621, "user_id": 6018652, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/789cd26372e294e2d5af130f51d021ff?s=128&d=identicon&r=PG", "display_name": "Fluffy", "link": "https://stackoverflow.com/users/6018652/fluffy"}, "edited": false, "score": 0, "creation_date": 1527087015, "post_id": 50491266, "comment_id": 87995727, "body": "Sorry but unless I&#39;m doing it wrong, this doesn&#39;t seem to be working? Call is ambiguous: <a href=\"https://godbolt.org/g/opi2Nn\" rel=\"nofollow noreferrer\">godbolt.org/g/opi2Nn</a>"}, {"owner": {"reputation": 621, "user_id": 6018652, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/789cd26372e294e2d5af130f51d021ff?s=128&d=identicon&r=PG", "display_name": "Fluffy", "link": "https://stackoverflow.com/users/6018652/fluffy"}, "edited": false, "score": 0, "creation_date": 1527089364, "post_id": 50491266, "comment_id": 87997340, "body": "Alright, thanks! I can work with that; both answers are valid, I&#39;m choosing this one for the effort or fixing my code on godbolt, the extra explanation and because you were somewhat ahead in timing ;D"}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 2, "last_activity_date": 1527087284, "last_edit_date": 1527087284, "creation_date": 1527086462, "answer_id": 50491266, "question_id": 50490868, "link": "https://stackoverflow.com/questions/50490868/visit-and-invoke-a-variant-of-stdfunction/50491266#50491266", "title": "Visit and invoke a variant of std::function", "body": "<p><code>std::visit</code> requires that every type inside the variant has a valid \"action\". If <code>func</code> were to have a <code>std::function&lt;void(int)&gt;</code> instead of <code>std::function&lt;void(void)&gt;</code> as it does right now, then there would be no way act on it. And because this (can) depends on the runtime, <code>std::visit</code> has to check at compile time that every possible alternative of the variant can be used to call your callable.</p>\n\n<p>You can merge lambdas together for example, or have an <code>if constexpr</code> cascade for each type in the variant.</p>\n\n<pre><code>template&lt;typename ...Ts&gt; struct overloaded : Ts... { using Ts::operator()...; };\ntemplate&lt;typename ...Ts&gt; overloaded(Ts...) -&gt; overloaded&lt;Ts...&gt;;\n\nstd::visit(overloaded{\n    [](const std::function&lt;void(void)&gt; &amp;Void) { std::invoke(Void); },\n    [](const std::function&lt;void(int)&gt; &amp;Int) { std::invoke(Int, 1); }}, func);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5879, "user_id": 1017853, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EfEqD.gif?s=128&g=1", "display_name": "Alexander Stepaniuk", "link": "https://stackoverflow.com/users/1017853/alexander-stepaniuk"}, "is_accepted": false, "score": 2, "last_activity_date": 1527087036, "creation_date": 1527087036, "answer_id": 50491450, "question_id": 50490868, "link": "https://stackoverflow.com/questions/50490868/visit-and-invoke-a-variant-of-stdfunction/50491450#50491450", "title": "Visit and invoke a variant of std::function", "body": "<p>Here is another example, adapted from <a href=\"http://en.cppreference.com/w/cpp/utility/variant/visit\" rel=\"nofollow noreferrer\">cppreference page</a> to your situation:</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;type_traits&gt;\n#include &lt;variant&gt;\n#include &lt;vector&gt;\n#include &lt;functional&gt;\n\n using var_t = std::variant&lt;std::function&lt;void(void)&gt;, std::function&lt;void(int)&gt;&gt;;\n\ntemplate&lt;class... Ts&gt; struct overloaded : Ts... { using Ts::operator()...; };\ntemplate&lt;class... Ts&gt; overloaded(Ts...) -&gt; overloaded&lt;Ts...&gt;;\n\nint main() {\n    std::vector&lt;var_t&gt; vec = {\n        []() {std::cout &lt;&lt; \"void\" &lt;&lt; std::endl;},\n        [](int arg) {std::cout &lt;&lt; \"int \" &lt;&lt; arg &lt;&lt; std::endl;}\n    };\n\n    for (auto&amp; v: vec) {\n        std::visit(overloaded {\n            [](const std::function&lt;void(void)&gt;&amp; fv) { fv(); },\n            [](const std::function&lt;void(int)&gt;&amp; fi) { fi(42); }\n        }, v);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 621, "user_id": 6018652, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/789cd26372e294e2d5af130f51d021ff?s=128&d=identicon&r=PG", "display_name": "Fluffy", "link": "https://stackoverflow.com/users/6018652/fluffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1090, "favorite_count": 1, "accepted_answer_id": 50491266, "answer_count": 2, "score": 4, "last_activity_date": 1527087284, "creation_date": 1527085387, "last_edit_date": 1527086399, "question_id": 50490868, "link": "https://stackoverflow.com/questions/50490868/visit-and-invoke-a-variant-of-stdfunction", "title": "Visit and invoke a variant of std::function", "body": "<p>I'm using a <a href=\"http://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\"><code>std::variant</code></a> to store different signatures of <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\"><code>std::function</code></a>s. Said functions are stored in a vector, the latter being retrieved from a map. </p>\n\n<p>How do I invoke each function in a vector of <a href=\"http://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\"><code>std::variant</code></a>? I feel like I should use <a href=\"http://en.cppreference.com/w/cpp/utility/variant/visit\" rel=\"nofollow noreferrer\"><code>std::visit</code></a> but I can't figure out the correct usage.</p>\n\n<pre><code>#include &lt;variant&gt;\n#include &lt;functional&gt;\n#include &lt;map&gt;\n#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nusing var_t = std::variant&lt;std::function&lt;void(void)&gt;, std::function&lt;void(int)&gt;&gt;;\nenum class EventEnum { A, B, C };\n\nstruct Controller {\n    template&lt;EventEnum E&gt;\n    void subscribe(var_t fn) {\n        auto&amp; callbacksVec = callbacks.at(E);\n        callbacksVec.push_back(fn);\n    }\n\n    template&lt;EventEnum E&gt;\n    void notify() {\n        auto&amp; callbacksVec = callbacks.at(E);\n        for (auto&amp; func : callbacksVec) {\n            // std::visit([](auto&amp; arg){ std::invoke(arg); }, func);\n        }\n    }\n\n    std::map&lt;EventEnum, std::vector&lt;var_t&gt;&gt; callbacks;\n};\n\nint main() {\n    auto fn = []() { std::cout &lt;&lt; \"lambda callback\" &lt;&lt; std::endl; };\n    Controller myController;\n    myController.subscribe&lt;EventEnum::A&gt;(fn);\n    myController.notify&lt;EventEnum::A&gt;();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "qt"], "comments": [{"owner": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "edited": false, "score": 0, "creation_date": 1527085366, "post_id": 50490342, "comment_id": 87994503, "body": "In order to answer this kind of question we need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1, "user_id": 9684734, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216595849628170/picture?type=large", "display_name": "Michel Nosseir", "link": "https://stackoverflow.com/users/9684734/michel-nosseir"}, "reply_to_user": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "edited": false, "score": 0, "creation_date": 1527152820, "post_id": 50490342, "comment_id": 88022657, "body": "sorry,now i just added the code"}, {"owner": {"reputation": 42375, "user_id": 21567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23a053b78fc2567576235b77fa2e4c16?s=128&d=identicon&r=PG", "display_name": "Christian.K", "link": "https://stackoverflow.com/users/21567/christian-k"}, "reply_to_user": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "edited": false, "score": 0, "creation_date": 1527235896, "post_id": 50490342, "comment_id": 88060861, "body": "FWIW, the error code is actually 0xC0000001 (ERROR_INVALID_FUNCTION). Try googling &quot;RtlWerpReportException failed with status code qt&quot; and you&#39;ll quite some related hits. Otherwise please provide a truly &quot;minimal, <i>complete</i> and <i>verifiable</i>&quot; example like @Johan said. A code snippet won&#39;t likely help."}, {"owner": {"reputation": 1, "user_id": 9684734, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216595849628170/picture?type=large", "display_name": "Michel Nosseir", "link": "https://stackoverflow.com/users/9684734/michel-nosseir"}, "edited": false, "score": 0, "creation_date": 1527332226, "post_id": 50490342, "comment_id": 88095165, "body": "I &#39;m using namespace OpenTwebstLib from <a href=\"https://github.com/codecentrix/open-twebst\" rel=\"nofollow noreferrer\">github.com/codecentrix/open-twebst</a>, that can answer your question?thank you."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9684734, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216595849628170/picture?type=large", "display_name": "Michel Nosseir", "link": "https://stackoverflow.com/users/9684734/michel-nosseir"}, "is_accepted": false, "score": 0, "last_activity_date": 1527333037, "creation_date": 1527333037, "answer_id": 50542135, "question_id": 50490342, "link": "https://stackoverflow.com/questions/50490342/rtlwerpreportexception-application-crashed/50542135#50542135", "title": "RtlWerpReportException, application crashed", "body": "<p>in my headers :</p>\n\n<pre><code>#include \"OPENTWEBSTQT.h\"\n\nusing namespace OpenTwebstLib;\n</code></pre>\n\n<p>OPENTWEBSTQT.h is a file that I built from <a href=\"https://github.com/codecentrix/open-twebst\" rel=\"nofollow noreferrer\">https://github.com/codecentrix/open-twebst</a></p>\n"}], "owner": {"reputation": 1, "user_id": 9684734, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216595849628170/picture?type=large", "display_name": "Michel Nosseir", "link": "https://stackoverflow.com/users/9684734/michel-nosseir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 529, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1527333037, "creation_date": 1527083974, "last_edit_date": 1527148192, "question_id": 50490342, "link": "https://stackoverflow.com/questions/50490342/rtlwerpreportexception-application-crashed", "title": "RtlWerpReportException, application crashed", "body": "<p>I have this Message on QT: <strong>Error - \nRtlWerpReportException failed with status code :-1073741823. Will try to launch the process directly.</strong>\nI use OpenTwebst, this my code:</p>\n\n<p>ICore ptr;</p>\n\n<pre><code>IBrowser *pBrowser = new IBrowser;\n\nptr.setControl(\"{7C3D11C2-14A2-45cb-A40F-6696D6685021}\");\n\npBrowser = ptr.StartBrowser(\"http://sesam.sso.infra.ftgroup/LoginDispatch\");\n\nif(!pBrowser)\n{\n    pBrowser = new IBrowser;\n    pBrowser = ptr.FindBrowser(\"URL=http://sesam.sso.infra.ftgroup/LoginDispatch\");\n}\n\nptr.setSearchTimeout(30000);\nptr.setLoadTimeout(60000);\n\nwhile(pBrowser-&gt;isLoading())\n    continue;\n\nif(pBrowser-&gt;FindElement(\"a\",\"uiname=SIO\"))\n    pBrowser-&gt;FindElement(\"a\",\"uiname=SIO\")-&gt;Click();\n</code></pre>\n\n<p>Can we catch this exception on QT?\nThank you.</p>\n"}, {"tags": ["c++", "heap", "heapsort"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527084334, "post_id": 50490332, "comment_id": 87993794, "body": "your loop should be <code>while( a.size() &gt; 1 ) { swap( a.front(), a.back() ); ... }</code> it would be much easier to read the logic"}, {"owner": {"reputation": 31, "user_id": 9782908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b5f0cb9f501eb7d625e871f11cc5b2?s=128&d=identicon&r=PG&f=1", "display_name": "kancha", "link": "https://stackoverflow.com/users/9782908/kancha"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527086490, "post_id": 50490332, "comment_id": 87995341, "body": "Tried. Readability sure becomes better but output still remains wrong"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1527086670, "post_id": 50490332, "comment_id": 87995463, "body": "That was not suppose to fix your issue, otherwise I put that into answer, not comment. Anyway you need to learn how to use a debugger. I know posting to SO is easier, but sometimes people do not want to do your work - they are lazy."}, {"owner": {"reputation": 31, "user_id": 9782908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b5f0cb9f501eb7d625e871f11cc5b2?s=128&d=identicon&r=PG&f=1", "display_name": "kancha", "link": "https://stackoverflow.com/users/9782908/kancha"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527140963, "post_id": 50490332, "comment_id": 88015982, "body": "Noted. Thanks! any good GDB resources?"}], "answers": [{"tags": [], "owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "is_accepted": false, "score": 1, "last_activity_date": 1527086847, "creation_date": 1527086847, "answer_id": 50491392, "question_id": 50490332, "link": "https://stackoverflow.com/questions/50490332/heap-sort-giving-wrong-output-cpp/50491392#50491392", "title": "Heap Sort giving wrong output ( Cpp )", "body": "<p>in short: you do not handle case when left is inside vector, but right is not.</p>\n\n<p>more in depth explanation:\nin heap_sort after a.pop_back() a.size() is 6, calling max_heapify(a, 0), may, in turn call max_heapify(a, 2) , and when you call max_heapify(a, 2), and a.size() is 6, right will be 2*2+2 == 6, so you will attempt to access out of range for vector a (and there seems to be value 32 you popped from vector).</p>\n"}, {"tags": [], "owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "is_accepted": false, "score": 1, "last_activity_date": 1527100925, "creation_date": 1527100925, "answer_id": 50495356, "question_id": 50490332, "link": "https://stackoverflow.com/questions/50490332/heap-sort-giving-wrong-output-cpp/50495356#50495356", "title": "Heap Sort giving wrong output ( Cpp )", "body": "<p>You have a bug in your <code>max_heapify</code>.</p>\n\n<pre><code>void max_heapify(vector&lt;int&gt; &amp;a,int i)\n{\n\n    int left=2*i+1;\n    int right=2*i+2;\n    if(i &gt;= (int)a.size()/2 )\n    {\n        return;\n    }\n    int max=i;\n    if(a[i]&lt;a[left])\n    {\n        max=left;\n    }\n // Bug is here\n    if(a[max]&lt;a[right])\n    {\n        max=right;\n    }\n    if(max!=i)\n    {\n        swap(a[i],a[max]);\n        max_heapify(a,max);\n    }    \n}   \n</code></pre>\n\n<p>You always check <code>a[max] &lt; a[right]</code>, even if <code>right &gt;= size</code>. So you can have this situation:</p>\n\n<pre><code>size = 2\ni = 0\nleft = 1\nright = 2\n</code></pre>\n\n<p>And the array contains: <code>[0,1,3, ...]</code></p>\n\n<p>Because you don't check to see if <code>right &gt;= size</code>, the '3' will get re-inserted into your heap.</p>\n"}], "owner": {"reputation": 31, "user_id": 9782908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17b5f0cb9f501eb7d625e871f11cc5b2?s=128&d=identicon&r=PG&f=1", "display_name": "kancha", "link": "https://stackoverflow.com/users/9782908/kancha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1527100925, "creation_date": 1527083938, "question_id": 50490332, "link": "https://stackoverflow.com/questions/50490332/heap-sort-giving-wrong-output-cpp", "title": "Heap Sort giving wrong output ( Cpp )", "body": "<p>I have written the following code for Heap Sort using Max-Heap logic.</p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt;\n#include&lt;algorithm&gt;\n#include&lt;vector&gt;\nusing namespace std;   \n\nvoid max_heapify(vector&lt;int&gt; &amp;a,int i)\n{\n\n    int left=2*i+1;\n    int right=2*i+2;\n    if(i &gt;= (int)a.size()/2 )\n    {\n        return;\n    }\n    int max=i;\n    if(a[i]&lt;a[left])\n    {\n        max=left;\n    }\n    if(a[max]&lt;a[right])\n    {\n        max=right;\n    }\n    if(max!=i)\n    {\n        swap(a[i],a[max]);\n        max_heapify(a,max);\n    }    \n}   \n\nvoid build_maxHeap(vector&lt;int&gt; &amp;a)\n{\n    int l=a.size();\n    for(int i=l/2-1;i&gt;=0;i--)\n    {\n        max_heapify(a,i);\n    }\n}\n\n\nvoid heap_sort(vector&lt;int&gt; &amp;a)\n{\n    build_maxHeap(a); // max element at top.\n    for(int i=a.size()-1;i&gt;=1;i--)\n    {\n        swap(a[i],a[0]);\n        cout&lt;&lt;a[i]&lt;&lt;\" \";\n        a.pop_back();\n        max_heapify(a,0);\n    }\n    cout&lt;&lt;a[0]&lt;&lt;endl;       \n}  \n\nint main()\n{\n    vector&lt;int&gt; a={6,7,8,1,2,9,32};\n    heap_sort(a);\n    return 0;\n}\n</code></pre>\n\n<p>Output : 32 9 32 7 32 32</p>\n\n<p>Expected Output: Print elements in descending order.</p>\n\n<p>I don't know why there is a repetition of 32. I am popping the element from the end but can't figure out why such behavior.</p>\n"}, {"tags": ["c++", "visual-studio", "printers", "virtual-printer", "v4-printer-driver"], "answers": [{"tags": [], "owner": {"reputation": 166, "user_id": 9087376, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZIr8ilf11Wk/AAAAAAAAAAI/AAAAAAAAEW4/GvsEGyR3xe0/photo.jpg?sz=128", "display_name": "amirfg", "link": "https://stackoverflow.com/users/9087376/amirfg"}, "is_accepted": false, "score": 0, "last_activity_date": 1544458626, "creation_date": 1544458626, "answer_id": 53709548, "question_id": 50490327, "link": "https://stackoverflow.com/questions/50490327/how-to-set-fix-directory-for-output-file-in-v4-printer-driver/53709548#53709548", "title": "How to set fix directory for output file in V4 Printer Driver", "body": "<p>You can create a render filter and use the code from Microsoft sample (<a href=\"https://docs.microsoft.com/en-us/windows/desktop/printdocs/create-a-blank-xps-om\" rel=\"nofollow noreferrer\">here</a>) in it. At the end you could use \"WriteToFile\" method of your XPS package to write the modified content to your specific file and folder.</p>\n"}], "owner": {"reputation": 13131, "user_id": 201387, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/351abc94ca64fe4cfed5a4f7e99a8518?s=128&d=identicon&r=PG", "display_name": "Dr. Rajesh Rolen", "link": "https://stackoverflow.com/users/201387/dr-rajesh-rolen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571828274, "creation_date": 1527083931, "last_edit_date": 1527088299, "question_id": 50490327, "link": "https://stackoverflow.com/questions/50490327/how-to-set-fix-directory-for-output-file-in-v4-printer-driver", "title": "How to set fix directory for output file in V4 Printer Driver", "body": "<p>I am working with V4 printer driver, i need to store output xps file to a specific folder instead of letting user select output folder.</p>\n"}, {"tags": ["c++", "winapi", "mfc"], "comments": [{"owner": {"reputation": 886, "user_id": 5477126, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6VrvP.jpg?s=128&g=1", "display_name": "rak007", "link": "https://stackoverflow.com/users/5477126/rak007"}, "edited": false, "score": 0, "creation_date": 1527085020, "post_id": 50490325, "comment_id": 87994252, "body": "On <a href=\"https://msdn.microsoft.com/fr-fr/library/windows/desktop/dd162620(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/fr-fr/library/windows/desktop/&hellip;</a> I just found this in Remarks :  <code>lfCharSet = DEFAULT_CHARSET lfFaceName = a specific font || Enumerates all character sets and styles in a specific font.</code>"}, {"owner": {"reputation": 319, "user_id": 4246164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b302a6348d5859bad773a03af0880c25?s=128&d=identicon&r=PG&f=1", "display_name": "Penachia", "link": "https://stackoverflow.com/users/4246164/penachia"}, "reply_to_user": {"reputation": 886, "user_id": 5477126, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6VrvP.jpg?s=128&g=1", "display_name": "rak007", "link": "https://stackoverflow.com/users/5477126/rak007"}, "edited": false, "score": 0, "creation_date": 1527085874, "post_id": 50490325, "comment_id": 87994908, "body": "@rak007 I will have to check font by font for the styles, but i believe that is the best and only option. i was kinda hoping for a function that would bring all font with those styles. Thanks!"}, {"owner": {"reputation": 319, "user_id": 4246164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b302a6348d5859bad773a03af0880c25?s=128&d=identicon&r=PG&f=1", "display_name": "Penachia", "link": "https://stackoverflow.com/users/4246164/penachia"}, "reply_to_user": {"reputation": 886, "user_id": 5477126, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6VrvP.jpg?s=128&g=1", "display_name": "rak007", "link": "https://stackoverflow.com/users/5477126/rak007"}, "edited": false, "score": 0, "creation_date": 1527095095, "post_id": 50490325, "comment_id": 88000574, "body": "@BarmakShemirani as far i understand not all fonts have italic and bold options, windows can &quot;fake&quot; these behavior, but i need to know which fonts really have these options so i can embed them in a PDF."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1527095494, "post_id": 50490325, "comment_id": 88000777, "body": "That&#39;s true. You should put that information in the question to clarify that you are doing something in PDF"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1527113518, "post_id": 50490325, "comment_id": 88009271, "body": "Asking for a <i>&quot;better way&quot;</i> without explaining what <i>&quot;better&quot;</i> means to you does not constitute an answerable question. Please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": true, "score": 1, "last_activity_date": 1527097962, "creation_date": 1527097962, "answer_id": 50494585, "question_id": 50490325, "link": "https://stackoverflow.com/questions/50490325/how-to-check-installed-fonts-styles/50494585#50494585", "title": "How to check installed fonts styles?", "body": "<p>As you are using \"EnumFontFamiliesEx\",the call back function recieves the structure LOGFONT....</p>\n\n<p><code>LOGFONT</code> has two variables <code>lfWeight</code> and <code>lfItalic</code>.</p>\n\n<p>Use those two variables to check if the enumerated font has style or not.</p>\n\n<p>if <code>lfWeight</code> value is 0 (<code>FW_DONTCARE</code>) and <code>lfItalic</code> is false, you can consider this do not have any style.</p>\n\n<p>Or if you want to be very specific, for example, you want to consider fonts with only Bold and Regular, then you can validate, if  <code>lfWeight</code>  has value from {400 (REGULAR), 600 (BOLD), 700 (BOLD), 800 (BOLD)}</p>\n\n<p>Below link has all the details.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd145037(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/dd145037(v=vs.85).aspx</a></p>\n"}], "owner": {"reputation": 319, "user_id": 4246164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b302a6348d5859bad773a03af0880c25?s=128&d=identicon&r=PG&f=1", "display_name": "Penachia", "link": "https://stackoverflow.com/users/4246164/penachia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 50494585, "answer_count": 1, "score": 0, "last_activity_date": 1527097962, "creation_date": 1527083929, "last_edit_date": 1527095829, "question_id": 50490325, "link": "https://stackoverflow.com/questions/50490325/how-to-check-installed-fonts-styles", "title": "How to check installed fonts styles?", "body": "<p>I need a list of all installed fonts in the client machine (Always Windows) that contain the styles <strong>bold</strong>, <em>italic</em> and <strong><em>bold</em> <em>italic</em></strong>. Is there a function for that?</p>\n\n<p>I'm already able to list all installed fonts with <code>EnumFontFamiliesEx</code> and i suppose that is possible to filter that list, but i'm looking for a \"better way\" :)</p>\n\n<p>Thanks!<br>\n<strong>PS:</strong> I'm using C++ with MFC.</p>\n\n<p><strong>EDIT:</strong><br>\nFor fonts that doesn't have these styles Windows can \"fake\" that behavior (force a font look bold or italic), but i need to know which fonts really have these styles.</p>\n"}, {"tags": ["c++", "cmake", "pkg-config"], "comments": [{"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1527084094, "post_id": 50490099, "comment_id": 87993643, "body": "Why don&#39;t you try the following <code>MESSAGE(&quot;INCLUDE_DIRECTORIES: ${INCLUDE_DIRECTORIES}&quot;)</code>"}, {"owner": {"reputation": 818, "user_id": 6854564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3e863e9aa31107cc90b44d0047cc312?s=128&d=identicon&r=PG&f=1", "display_name": "Kubuntuer82", "link": "https://stackoverflow.com/users/6854564/kubuntuer82"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1527084452, "post_id": 50490099, "comment_id": 87993879, "body": "Thank you @VictorGubin , unfortunately <code>INCLUDE_DIRECTORIES</code> seems empty."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1527085461, "post_id": 50490099, "comment_id": 87994570, "body": "So print all compiller flags then, i.e. <code>CMAKE_C_FLAGS</code> and <code>CMAKE_CXX_FLAGS</code>"}, {"owner": {"reputation": 818, "user_id": 6854564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3e863e9aa31107cc90b44d0047cc312?s=128&d=identicon&r=PG&f=1", "display_name": "Kubuntuer82", "link": "https://stackoverflow.com/users/6854564/kubuntuer82"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1527086311, "post_id": 50490099, "comment_id": 87995218, "body": "The first one is empty, the second one contains <code>-std=c++11 -Wall</code>"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1527087096, "post_id": 50490099, "comment_id": 87995794, "body": "Try to remove cache (<code>CMakeCache.txt</code> in build directory) and re-run <code>cmake</code>. If this won&#39;t help, then it seems that CMake processes the first include directory <i>incorrectly</i>. If you want us to help in debugging that, we need to see <b>exact output</b> of <code>pkg-config</code>."}, {"owner": {"reputation": 818, "user_id": 6854564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3e863e9aa31107cc90b44d0047cc312?s=128&d=identicon&r=PG&f=1", "display_name": "Kubuntuer82", "link": "https://stackoverflow.com/users/6854564/kubuntuer82"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1527088405, "post_id": 50490099, "comment_id": 87996700, "body": "@Tsyvarev I think this is a very suggestion, as I have just noticed that <code>CMakeCache.txt</code> contains the wrong version of <code>thelibrary</code> (an older deleted version), which is also the one which appears when I print <code>THELIBRARY_VERSION</code>. When I use <code>pkg-config</code> from terminal, the correct version appears instead. I will check everything now."}, {"owner": {"reputation": 818, "user_id": 6854564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3e863e9aa31107cc90b44d0047cc312?s=128&d=identicon&r=PG&f=1", "display_name": "Kubuntuer82", "link": "https://stackoverflow.com/users/6854564/kubuntuer82"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1527088954, "post_id": 50490099, "comment_id": 87997070, "body": "That was the problem, thank you @Tsyvarev ! Since your advice (removing <code>CMakeCache.txt</code>) solved the problem independently of the used library and it may help other people in general, I suggest you put it as an answer and I would be happy to accept it."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1527090747, "post_id": 50490099, "comment_id": 87998266, "body": "Clean reconfiguration (by removing <code>CMakeCache.txt</code>, or by removing whole build directory) is a &quot;universal cure&quot;, which could be tried with almost any error. It is like &quot;If you got error, restart PC and try again&quot;."}, {"owner": {"reputation": 818, "user_id": 6854564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3e863e9aa31107cc90b44d0047cc312?s=128&d=identicon&r=PG&f=1", "display_name": "Kubuntuer82", "link": "https://stackoverflow.com/users/6854564/kubuntuer82"}, "edited": false, "score": 0, "creation_date": 1527091112, "post_id": 50490099, "comment_id": 87998473, "body": "Ok understood... thanks again!"}], "answers": [{"tags": [], "owner": {"reputation": 818, "user_id": 6854564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3e863e9aa31107cc90b44d0047cc312?s=128&d=identicon&r=PG&f=1", "display_name": "Kubuntuer82", "link": "https://stackoverflow.com/users/6854564/kubuntuer82"}, "is_accepted": true, "score": 1, "last_activity_date": 1527179497, "last_edit_date": 1527179497, "creation_date": 1527091586, "answer_id": 50492937, "question_id": 50490099, "link": "https://stackoverflow.com/questions/50490099/pkgconfig-module-include-dirs-not-listing-all-directories/50492937#50492937", "title": "PkgConfig module: INCLUDE_DIRS not listing all directories", "body": "<p>Thanks to the suggestion by Tsyvarev (deleting <code>CMakeCache.txt</code>), I understood what the cause was, and since this may happen to other people, I hope this explanation helps.</p>\n\n<p>The reason why the directory <code>/opt/thelibrary/include</code> wasn't appearing in <code>THELIBRARY_INCLUDE_DIRS</code> is that file <strong><code>CMakeCache.txt</code></strong> contained information about a <strong>previous version</strong> of the library, whose header files were installed in a directory with a slightly different name, which was <em>removed</em> when that previous version was <strong>uninstalled</strong>. </p>\n\n<p>Since that directory does not exist anymore, then it doesn't appear in <code>THELIBRARY_INCLUDE_DIRS</code>, and the new directory does not appear simply because the file <code>CmakeCache.txt</code> was still pointing to the previous version.</p>\n\n<p><strong>Solution:</strong> delete <code>CmakeCache.txt</code> and re-run <code>cmake</code>.</p>\n"}], "owner": {"reputation": 818, "user_id": 6854564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3e863e9aa31107cc90b44d0047cc312?s=128&d=identicon&r=PG&f=1", "display_name": "Kubuntuer82", "link": "https://stackoverflow.com/users/6854564/kubuntuer82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 0, "accepted_answer_id": 50492937, "answer_count": 1, "score": 1, "last_activity_date": 1527179497, "creation_date": 1527083251, "last_edit_date": 1592644375, "question_id": 50490099, "link": "https://stackoverflow.com/questions/50490099/pkgconfig-module-include-dirs-not-listing-all-directories", "title": "PkgConfig module: INCLUDE_DIRS not listing all directories", "body": "<h2>Short version (TL;DR)</h2>\n<p>Using CMake with the PkgConfig module I try to print all the include directories for a library I need for my project, let's call it <code>thelibrary</code>. I do this by printing the value of the <code>THELIBRARY_INCLUDE_DIRS</code> variable. The list of include directories is printed, but one directory is missing.</p>\n<p>This really surprised it, as if I type the following on a terminal:</p>\n<pre><code>pkg-config thelibrary --cflags\n</code></pre>\n<p>then <em>all</em> the include directories are printed, <em>including</em> the one missing from <code>THELIBRARY_INCLUDE_DIRS</code>.</p>\n<p>The same happens if I try to print the value of <code>THELIBRARY_CFLAGS</code>.</p>\n<p>How is this possible? Where is the mistake? (Hoping it is a mistake of mine)</p>\n<h2>Details</h2>\n<h3>Context</h3>\n<p>I am working on a C++ Cmake project which is compiled correctly under Mac OS but not under Linux (Ubuntu), and when investigating on the possible reasons I found the issue below.</p>\n<h3>Problem</h3>\n<p>I included the <code>PkgConfig</code> module in file <code>CMakeLists.txt</code> by writing:</p>\n<pre><code>find_package(PkgConfig REQUIRED)    \n</code></pre>\n<p>After that, in order to use the library, I set the <code>PKG_CONFIG_PATH</code> environment variable by writing:</p>\n<pre><code>set(ENV{PKG_CONFIG_PATH} &quot;/usr/local/opt/thelibrary/pkgconfig:$ENV{PKG_CONFIG_PATH}&quot;)\n</code></pre>\n<p>Finally, I put this instruction to search the library.</p>\n<pre><code>pkg_check_modules(THELIBRARY thelibrary)\n</code></pre>\n<p>Finally, in order to debug, I have tried to print the list of included directories by writing:</p>\n<pre><code>MESSAGE( STATUS &quot;THELIBRARY DIRS: &quot; ${THELIBRARY_INCLUDE_DIRS} )\n</code></pre>\n<p>The problem is, <strong>it worked</strong>, in fact it printed a list of include directories, but the problem is that the most important one is missing. In fact, the output is something like:</p>\n<pre><code>/opt/auxlib1/include/opt/auxlib2/include ...\n</code></pre>\n<p>where <code>auxlib1</code>, <code>auxlib2</code> etc. are auxiliary include directories I need to compile.</p>\n<p>But I also expected the dir <code>/opt/thelibrary/include</code> in output, which is printed if I use the <code>pkg-config</code> command on the terminal as said at the beginning. How is it possible that only that directory is not printed?</p>\n"}, {"tags": ["c++", "openssl", "checksum", "sha256"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1527082891, "post_id": 50489951, "comment_id": 87992796, "body": "&quot;Took me about 2 days to realize that hashing is different from a text string to sha256 than bytes to sha256.&quot; What do you mean? Hashing always hashes bytes, it doesn&#39;t know anything about text at all."}, {"owner": {"reputation": 95, "user_id": 8215595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPO1ViKY98I/AAAAAAAAAAI/AAAAAAAABoo/HMq-U7JYO4M/photo.jpg?sz=128", "display_name": "CsgoTalks Com", "link": "https://stackoverflow.com/users/8215595/csgotalks-com"}, "edited": false, "score": 0, "creation_date": 1527082944, "post_id": 50489951, "comment_id": 87992827, "body": "I might be wrong but, if you add the same binary string as text, and as bytes you get different results: <a href=\"https://cryptii.com/hash-function\" rel=\"nofollow noreferrer\">cryptii.com/hash-function</a>"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1527083003, "post_id": 50489951, "comment_id": 87992875, "body": "Unclear exactly what you are asking - please clarify"}, {"owner": {"reputation": 95, "user_id": 8215595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPO1ViKY98I/AAAAAAAAAAI/AAAAAAAABoo/HMq-U7JYO4M/photo.jpg?sz=128", "display_name": "CsgoTalks Com", "link": "https://stackoverflow.com/users/8215595/csgotalks-com"}, "edited": false, "score": 0, "creation_date": 1527083017, "post_id": 50489951, "comment_id": 87992887, "body": "101111100110010101011101110011110101000111110110101100011101&zwnj;&#8203;01111011110111000101&zwnj;&#8203;10100110001111010001&zwnj;&#8203;01000111010000110110&zwnj;&#8203;11100000  this used as text gives me this hash: 2d7ffa3c8f9c3fc043045f2564101eabf80bcdb983d1d560b6b93f52ea82&zwnj;&#8203;4942  and used as bytes give me this correct hash: 5e5c92432e692f803539715bb624cd2e35b5b491c6bc67aee87ae82600de&zwnj;&#8203;df12"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1527083079, "post_id": 50489951, "comment_id": 87992924, "body": "@CsgoTalksCom please do not add details in the comments, instead add/clarify your original post."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1527083672, "post_id": 50489951, "comment_id": 87993336, "body": "Interpreting a sequence of bits as ascii text will obviously give you a different result than interpreting them as bits."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 8215595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPO1ViKY98I/AAAAAAAAAAI/AAAAAAAABoo/HMq-U7JYO4M/photo.jpg?sz=128", "display_name": "CsgoTalks Com", "link": "https://stackoverflow.com/users/8215595/csgotalks-com"}, "edited": false, "score": 0, "creation_date": 1527091689, "post_id": 50490229, "comment_id": 87998804, "body": "any idea how can I get my vector of strings into uint8_t?"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "reply_to_user": {"reputation": 95, "user_id": 8215595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPO1ViKY98I/AAAAAAAAAAI/AAAAAAAABoo/HMq-U7JYO4M/photo.jpg?sz=128", "display_name": "CsgoTalks Com", "link": "https://stackoverflow.com/users/8215595/csgotalks-com"}, "edited": false, "score": 0, "creation_date": 1527091930, "post_id": 50490229, "comment_id": 87998942, "body": "What vector? That might be a whole new question in itself."}, {"owner": {"reputation": 95, "user_id": 8215595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPO1ViKY98I/AAAAAAAAAAI/AAAAAAAABoo/HMq-U7JYO4M/photo.jpg?sz=128", "display_name": "CsgoTalks Com", "link": "https://stackoverflow.com/users/8215595/csgotalks-com"}, "edited": false, "score": 0, "creation_date": 1527092334, "post_id": 50490229, "comment_id": 87999144, "body": "right now I have the stream of bits in a string vector: 0b10111110, 0b01100101, 0b01011101.. is it possible to get them into the uint8? sadly it most likely is another question/problem."}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 0, "last_activity_date": 1527083671, "creation_date": 1527083671, "answer_id": 50490229, "question_id": 50489951, "link": "https://stackoverflow.com/questions/50489951/openssl-convert-binary-bytes-to-sha256-c/50490229#50490229", "title": "OPENSSL Convert binary bytes to SHA256 C++", "body": "<p>So it seems you need to interpret your input as a <strong>stream of bits</strong>. Group them into bytes and off you go:</p>\n\n<pre><code>unsigned char hash[SHA256_DIGEST_LENGTH];\nSHA256_CTX sha256;\nSHA256_Init(&amp;sha256);\nuint8_t str[] = { 0b10111110, 0b01100101, 0b01011101, 0b11001111, 0b01010001, 0b11110110, 0b10110001, 0b11010111, 0b10111101, 0b11000101, 0b10100110, 0b00111101, 0b00010100, 0b01110100, 0b00110110, 0b11100000 };\nSHA256_Update(&amp;sha256, str, sizeof(str));\nSHA256_Final(hash, &amp;sha256);\n</code></pre>\n\n<p>Hash output:</p>\n\n<pre><code>5e5c92432e692f803539715bb624cd2e35b5b491c6bc67aee87ae82600dedf12\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/f2b8ccff6b12d07e\" rel=\"nofollow noreferrer\">Live demo</a></p>\n"}], "owner": {"reputation": 95, "user_id": 8215595, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPO1ViKY98I/AAAAAAAAAAI/AAAAAAAABoo/HMq-U7JYO4M/photo.jpg?sz=128", "display_name": "CsgoTalks Com", "link": "https://stackoverflow.com/users/8215595/csgotalks-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 0, "accepted_answer_id": 50490229, "answer_count": 1, "score": 1, "last_activity_date": 1527083671, "creation_date": 1527082784, "last_edit_date": 1527083130, "question_id": 50489951, "link": "https://stackoverflow.com/questions/50489951/openssl-convert-binary-bytes-to-sha256-c", "title": "OPENSSL Convert binary bytes to SHA256 C++", "body": "<p>I'm basically trying to get a checksum for my mnemonic words.\nI have the binary bytes and want to convert them to sha256 to get the first 4 bits and validate it. </p>\n\n<p>Took me about 2 days to realize that hashing is different from a text string to sha256 than bytes to sha256.\nThe below function works but it hashes as strings not as bytes. </p>\n\n<pre><code>string sha256(const string str)\n{\n    unsigned char hash[SHA256_DIGEST_LENGTH];\n    SHA256_CTX sha256;\n    SHA256_Init(&amp;sha256);\n    SHA256_Update(&amp;sha256, str.c_str(), str.size());\n    SHA256_Final(hash, &amp;sha256);\n    stringstream ss;\n    for(int i = 0; i &lt; SHA256_DIGEST_LENGTH; i++)\n    {\n        ss &lt;&lt; hex &lt;&lt; setw(2) &lt;&lt; setfill('0') &lt;&lt; (int)hash[i];\n    }\n    return ss.str();\n}\n</code></pre>\n\n<p>I'm new to openssl and wasn't able to find any solutions online.\nIf someone could adapt my function to hash the binary bytes input correctly I would really appreciate it. \nThanks. </p>\n\n<p>To clarify here's an example:\n10111110011001010101110111001111010100011111011010110001110101111011110111000101101001100011110100010100011101000011011011100000</p>\n\n<p>this used as text gives me this hash:\n2d7ffa3c8f9c3fc043045f2564101eabf80bcdb983d1d560b6b93f52ea824942</p>\n\n<p>and used as bytes give me this correct hash:\n5e5c92432e692f803539715bb624cd2e35b5b491c6bc67aee87ae82600dedf12</p>\n\n<p>I used this website to hash: <a href=\"https://cryptii.com/hash-function\" rel=\"nofollow noreferrer\">https://cryptii.com/hash-function</a></p>\n"}, {"tags": ["c++", "tensorflow"], "comments": [{"owner": {"reputation": 19375, "user_id": 1735003, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qNeQo.png?s=128&g=1", "display_name": "P-Gn", "link": "https://stackoverflow.com/users/1735003/p-gn"}, "edited": false, "score": 0, "creation_date": 1527089446, "post_id": 50489898, "comment_id": 87997401, "body": "Does the C++ API actually allow you to allocate the outputs yourself?"}, {"owner": {"reputation": 232, "user_id": 346365, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UPBkK.jpg?s=128&g=1", "display_name": "Kasper Marstal", "link": "https://stackoverflow.com/users/346365/kasper-marstal"}, "reply_to_user": {"reputation": 19375, "user_id": 1735003, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qNeQo.png?s=128&g=1", "display_name": "P-Gn", "link": "https://stackoverflow.com/users/1735003/p-gn"}, "edited": false, "score": 0, "creation_date": 1527155769, "post_id": 50489898, "comment_id": 88024635, "body": "No. I am wrapping TensorFlow in an external tool that needs to know the size of the outputs before running the graph. I have updated the answer to reflect this. Thanks for the input"}, {"owner": {"reputation": 5452, "user_id": 6824418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Du0yh.jpg?s=128&g=1", "display_name": "Allen Lavoie", "link": "https://stackoverflow.com/users/6824418/allen-lavoie"}, "edited": false, "score": 0, "creation_date": 1528748460, "post_id": 50489898, "comment_id": 88616863, "body": "In general the graph may have variable output shapes, right? People can export the most refined static shape information as node attributes: <a href=\"https://www.tensorflow.org/api_docs/python/tf/Graph#as_graph_def\" rel=\"nofollow noreferrer\">tensorflow.org/api_docs/python/tf/Graph#as_graph_def</a>  Otherwise re-building the graph with the C++ API would call the shape functions (running it may not be necessary)."}, {"owner": {"reputation": 232, "user_id": 346365, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UPBkK.jpg?s=128&g=1", "display_name": "Kasper Marstal", "link": "https://stackoverflow.com/users/346365/kasper-marstal"}, "reply_to_user": {"reputation": 5452, "user_id": 6824418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Du0yh.jpg?s=128&g=1", "display_name": "Allen Lavoie", "link": "https://stackoverflow.com/users/6824418/allen-lavoie"}, "edited": false, "score": 0, "creation_date": 1534152285, "post_id": 50489898, "comment_id": 90591946, "body": "What do you mean by &quot;re-building the graph&quot; @AllenLavoie? Can you somehow get the shape information using the C++ graphdef builder?"}, {"owner": {"reputation": 5452, "user_id": 6824418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Du0yh.jpg?s=128&g=1", "display_name": "Allen Lavoie", "link": "https://stackoverflow.com/users/6824418/allen-lavoie"}, "edited": false, "score": 0, "creation_date": 1534193005, "post_id": 50489898, "comment_id": 90614888, "body": "By rebuilding I mean looping over the GraphDef in topological order, seeing an AddOp and adding a new AddOp to the graph using the C++ API. I wouldn&#39;t recommend it; exporting with shapes (<code>add_shapes=True</code> in my link above) sounds much more pleasant. It&#39;s worth noting though that most graphs have a dynamic batch size, so often the output size depends on the fed inputs rather than the graph itself. In which case you need to do <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/grappler/costs/graph_properties.h\" rel=\"nofollow noreferrer\">something like Grappler to specialize for feeds+fetches</a>"}, {"owner": {"reputation": 232, "user_id": 346365, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UPBkK.jpg?s=128&g=1", "display_name": "Kasper Marstal", "link": "https://stackoverflow.com/users/346365/kasper-marstal"}, "edited": false, "score": 0, "creation_date": 1534772711, "post_id": 50489898, "comment_id": 90814193, "body": "Thanks for your input! If you write up your suggestions I&#39;ll accept it as an answer."}], "owner": {"reputation": 232, "user_id": 346365, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UPBkK.jpg?s=128&g=1", "display_name": "Kasper Marstal", "link": "https://stackoverflow.com/users/346365/kasper-marstal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528363889, "creation_date": 1527082643, "last_edit_date": 1528363889, "question_id": 50489898, "link": "https://stackoverflow.com/questions/50489898/is-it-possible-do-shape-inference-using-the-tensorflow-c-api-without-running-t", "title": "Is it possible do shape inference using the TensorFlow C++ API without running the TensorFlow graph?", "body": "<p>I am wrapping TensorFlow in an external tool that needs to know the size of the outputs before the graph is run. The <code>tensorflow::GraphDef</code> is loaded from disk in C++. </p>\n\n<p>I could run the graph for a single iteration and read the output shapes, but this might amount to a lot of processing just for reading the shapes.</p>\n\n<p>One could imagine feeding inputs to a graph, propagate only shape information to the output nodes and read it from there, but I haven't been able to find a way to do so.</p>\n\n<p>Is it possible do shape inference using the TensorFlow C++ API without running the TensorFlow graph?</p>\n"}, {"tags": ["c++", "winapi", "gtk3"], "comments": [{"owner": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 0, "creation_date": 1527156076, "post_id": 50489836, "comment_id": 88024835, "body": "Do you use pure WinApi for GUI?"}, {"owner": {"reputation": 6973, "user_id": 12082, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b5817de0db66f3aac3a5761249e4e7ca?s=128&d=identicon&r=PG", "display_name": "decasteljau", "link": "https://stackoverflow.com/users/12082/decasteljau"}, "reply_to_user": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 0, "creation_date": 1527161360, "post_id": 50489836, "comment_id": 88028363, "body": "No, we have an MFC application."}], "answers": [{"tags": [], "owner": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "is_accepted": false, "score": 0, "last_activity_date": 1527280650, "creation_date": 1527280650, "answer_id": 50536538, "question_id": 50489836, "link": "https://stackoverflow.com/questions/50489836/hosting-a-gtk3-context-inside-a-win32-application/50536538#50536538", "title": "Hosting a GTK+3 context inside a Win32 application", "body": "<p>I doubt it is possible. You will need 2 event loops: one for GTK part and one for MFC as you can not just use random <em>gui toolkit 1</em> widgets with <em>gui toolkit 2</em>. Syncronising these loops, interchanging events is going to be huge, HUGE pain. That's why this migration should be done atomically.</p>\n"}], "owner": {"reputation": 6973, "user_id": 12082, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b5817de0db66f3aac3a5761249e4e7ca?s=128&d=identicon&r=PG", "display_name": "decasteljau", "link": "https://stackoverflow.com/users/12082/decasteljau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527280650, "creation_date": 1527082439, "last_edit_date": 1527083852, "question_id": 50489836, "link": "https://stackoverflow.com/questions/50489836/hosting-a-gtk3-context-inside-a-win32-application", "title": "Hosting a GTK+3 context inside a Win32 application", "body": "<p>We have a mature C++ Win32 application that we want to migrate to GTK+. We want to do it incrementally. We would like to initialize GTK+ on a child HWND inside our Win32 application. So, at first, GTK+ would only be used in some regions inside our application.</p>\n\n<p>I could not find any Win32-GTK+ interopability helpers in GTK+.</p>\n\n<p>How can I achieve that? How can I host a GTK+ panel in an existing Win32 application?</p>\n"}, {"tags": ["c++", "arrays", "c++11", "stl", "stdarray"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1527082153, "post_id": 50489719, "comment_id": 87992238, "body": "Size of array parameter does not work this way, it is equal to <code>int *input</code>"}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1527082243, "post_id": 50489719, "comment_id": 87992320, "body": "@Slava How to fix it?"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 9, "creation_date": 1527082474, "post_id": 50489719, "comment_id": 87992479, "body": "Simply don&#39;t use C style arrays. They don&#39;t know their size and get converted to pointers when used as function parameters. No <code>std::begin</code> overload accepts pointer type."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 2, "creation_date": 1527083472, "post_id": 50489719, "comment_id": 87993205, "body": "@Ron Avoiding arrays might be the intention of the question - possibly there is an array somewhere in code mans cannot change?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1527084676, "post_id": 50489719, "comment_id": 87994038, "body": "see <a href=\"https://stackoverflow.com/a/26219764/2785528\">stackoverflow.com/a/26219764/2785528</a>"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1527084924, "post_id": 50489719, "comment_id": 87994189, "body": "Possible duplicate -- <a href=\"https://stackoverflow.com/q/26219721/2785528\">stackoverflow.com/q/26219721/2785528</a>"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1527109292, "post_id": 50489719, "comment_id": 88007672, "body": "You can also copy between them with <code>std::memcpy( result.data(), input, sizeof(input) );</code> It might be a good habit to define both array sizes as the same <code>constexpr size_t</code> value. If you retype <code>16</code> in multiple places, and they get out of sync, you would have a buffer overflow or underflow."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 12, "creation_date": 1527082392, "post_id": 50489769, "comment_id": 87992418, "body": "...or use raw pointers (<code>input</code> and <code>input+16</code>) for the algorithm. Of course not recommended, but sometimes one has no other choice"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 8, "creation_date": 1527082520, "post_id": 50489769, "comment_id": 87992519, "body": "You can even add missing <code>const</code>."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 40, "last_activity_date": 1527084826, "last_edit_date": 1527084826, "creation_date": 1527082263, "answer_id": 50489769, "question_id": 50489719, "link": "https://stackoverflow.com/questions/50489719/why-can-i-not-copy-a-c-style-array-to-stdarray/50489769#50489769", "title": "Why can I not copy a C-style array to std::array?", "body": "<p>In parameter declaration, <code>int input[16]</code> is same as <code>int* input</code>. And when you pass argument array would <a href=\"http://en.cppreference.com/w/cpp/language/array#Array-to-pointer_decay\" rel=\"noreferrer\">decay to pointer</a>, both mean the information about size of the array is lost. And <a href=\"http://en.cppreference.com/w/cpp/iterator/begin\" rel=\"noreferrer\"><code>std::begin</code></a> and <a href=\"http://en.cppreference.com/w/cpp/iterator/end\" rel=\"noreferrer\"><code>std::end</code></a> can't work with pointers.</p>\n\n<p>You could change it to pass-by-reference, which reserve the array's size.</p>\n\n<pre><code>std::array&lt;int,16&gt; copyarray(int (&amp;input)[16])\n</code></pre>\n\n<p>Note that you can only pass array with exact size of <code>16</code> to the function now.</p>\n"}, {"comments": [{"owner": {"reputation": 182, "user_id": 2957581, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/xMkFp.jpg?s=128&g=1", "display_name": "Ulrich Von Rekkenin", "link": "https://stackoverflow.com/users/2957581/ulrich-von-rekkenin"}, "edited": false, "score": 0, "creation_date": 1527174587, "post_id": 50490008, "comment_id": 88037775, "body": "template &lt;typename T, size_t N&gt; it is from &lt;array&gt; to <code>std::array</code> definition"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 182, "user_id": 2957581, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/xMkFp.jpg?s=128&g=1", "display_name": "Ulrich Von Rekkenin", "link": "https://stackoverflow.com/users/2957581/ulrich-von-rekkenin"}, "edited": false, "score": 0, "creation_date": 1527243879, "post_id": 50490008, "comment_id": 88065553, "body": "@UlrichVonRekkenin What are you trying to tell with? Template parameters are the same because they need to be, how else could you have a generic reference to an array? The pattern yet occurs at many other locations, too - have you looked at the std::begin/end variants for arrays, for example?"}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 34, "last_activity_date": 1562308860, "last_edit_date": 1562308860, "creation_date": 1527083016, "answer_id": 50490008, "question_id": 50489719, "link": "https://stackoverflow.com/questions/50489719/why-can-i-not-copy-a-c-style-array-to-stdarray/50490008#50490008", "title": "Why can I not copy a C-style array to std::array?", "body": "<p>Everything important <a href=\"https://stackoverflow.com/a/50489769/1312382\">said</a> already, you can get the function just a little bit more flexible:</p>\n\n<pre><code>template &lt;typename T, size_t N&gt;\nstd::array&lt;T, N&gt; copyarray(T const (&amp;input)[N])\n{\n    std::array&lt;T, N&gt; result;\n    std::copy(std::begin(input), std::end(input), std::begin(result));\n    return result;\n}\n</code></pre>\n\n<p>(Late) edit: There <em>is</em> a disadvantage with the approach above: You'll need to copy the returned array on assignment, as it doesn't contain any truely movable data (that's the same for raw arrays already). You can avoid this drawback by directly copying into the target array:</p>\n\n<pre><code>template &lt;typename T, size_t N&gt;\nvoid copyarray(std::array&lt;T, N&gt;&amp; target, T const (&amp;source)[N])\n{\n    std::copy(std::begin(source), std::end(source), std::begin(target));\n}\n</code></pre>\n\n<p>This mimicks the assignment <code>target = source</code>; if you like better, you can swap the parameters, of course, to have the output parameter last.</p>\n\n<p>Usage (as is):</p>\n\n<pre><code>int source[7] = { };\nstd::array&lt;int, sizeof(source)/sizeof(*source)&gt; target;\ncopyarray(target, source);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1050, "user_id": 1043529, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dc8S5.png?s=128&g=1", "display_name": "John P", "link": "https://stackoverflow.com/users/1043529/john-p"}, "edited": false, "score": 0, "creation_date": 1527086400, "post_id": 50490224, "comment_id": 87995278, "body": "You can preserve size using <code>template&lt;unsigned N&gt; array&lt;int,N&gt; copyarray(const int (&amp;input)[N]) { ... }</code> if you aren&#39;t attached to 16. Edit -- Aconcagua parametrized this way but with <code>class T</code> instead of <code>int</code> as well."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 1050, "user_id": 1043529, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dc8S5.png?s=128&g=1", "display_name": "John P", "link": "https://stackoverflow.com/users/1043529/john-p"}, "edited": false, "score": 0, "creation_date": 1527086818, "post_id": 50490224, "comment_id": 87995563, "body": "@JohnP Yup, just presenting this as an alternative."}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 1, "last_activity_date": 1527083656, "creation_date": 1527083656, "answer_id": 50490224, "question_id": 50489719, "link": "https://stackoverflow.com/questions/50489719/why-can-i-not-copy-a-c-style-array-to-stdarray/50490224#50490224", "title": "Why can I not copy a C-style array to std::array?", "body": "<p>As stated already the problem here is that arrays decay to pointers when passed to a function, meaning that the size is not preserved.</p>\n\n<p>If however you <em>knew</em> that there were 16 elements in the array you could do this:</p>\n\n<pre><code>array&lt;int,16&gt; copyarray(const int input[]) {\n    array&lt;int, 16&gt; result;\n    copy_n(input, size(result), begin(result));\n    return result;\n}    \n</code></pre>\n"}], "owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3131, "favorite_count": 4, "closed_date": 1527145966, "answer_count": 3, "score": 20, "last_activity_date": 1562308860, "creation_date": 1527082109, "last_edit_date": 1527098207, "question_id": 50489719, "link": "https://stackoverflow.com/questions/50489719/why-can-i-not-copy-a-c-style-array-to-stdarray", "closed_reason": "Duplicate", "title": "Why can I not copy a C-style array to std::array?", "body": "<p>I have this code:</p>\n\n<pre><code> std::array&lt;int,16&gt; copyarray(int input[16])\n{\n    std::array&lt;int, 16&gt; result;\n    std::copy(std::begin(input), std::end(input), std::begin(result));\n    return result;\n}\n</code></pre>\n\n<p>When I try to compile this code, I am getting this error:</p>\n\n<pre><code>'std::begin': no matching overloaded function found \n</code></pre>\n\n<p>and a similar error for <code>std::end</code>.</p>\n\n<p>What is the problem and how I can fix it?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1527082035, "post_id": 50489637, "comment_id": 87992130, "body": "What &quot;packages&quot;? In C++ you have either static libraries (statically linked into your executable) or dynamic libraries (which you can just copy into the folder of your executable)"}, {"owner": {"reputation": 753, "user_id": 5735646, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1DDfK.jpg?s=128&g=1", "display_name": "nick", "link": "https://stackoverflow.com/users/5735646/nick"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1527082121, "post_id": 50489637, "comment_id": 87992204, "body": "like this :<a href=\"https://github.com/nlohmann/json\" rel=\"nofollow noreferrer\">my-json-dependency</a>"}, {"owner": {"reputation": 1651, "user_id": 635822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd51a3c79639c315af5864adc731298?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/635822/jason"}, "edited": false, "score": 1, "creation_date": 1527082270, "post_id": 50489637, "comment_id": 87992338, "body": "There is no equivalent to python&#39;s python-pip.  You are going get the &quot;dev&quot; packages the way you would get any other package for your distribution. For example pacman on Arch or apt-get/synaptic for Debian based systems."}, {"owner": {"reputation": 1651, "user_id": 635822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd51a3c79639c315af5864adc731298?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/635822/jason"}, "edited": false, "score": 0, "creation_date": 1527082706, "post_id": 50489637, "comment_id": 87992664, "body": "Also, you will need to add -ljson or -l&lt;library&gt; to your compiler flags."}, {"owner": {"reputation": 753, "user_id": 5735646, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1DDfK.jpg?s=128&g=1", "display_name": "nick", "link": "https://stackoverflow.com/users/5735646/nick"}, "edited": false, "score": 0, "creation_date": 1527082757, "post_id": 50489637, "comment_id": 87992702, "body": "thanks, I see now!"}], "answers": [{"comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1527082528, "post_id": 50489736, "comment_id": 87992528, "body": "You forgot &quot;ditch the language for another&quot; :)"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1527084825, "post_id": 50489736, "comment_id": 87994129, "body": "5th - write your own language"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 4, "last_activity_date": 1527082153, "creation_date": 1527082153, "answer_id": 50489736, "question_id": 50489637, "link": "https://stackoverflow.com/questions/50489637/how-to-manage-and-migrate-c-libraries/50489736#50489736", "title": "How to manage and migrate C++ libraries?", "body": "<p>C++ doesn't have a standard package manager or build system: this is one of the major pain points of the language. You have a few options:</p>\n\n<ul>\n<li><p>Manually install dependencies when required.</p></li>\n<li><p>Use your OS's package manager.</p></li>\n<li><p>Adopt a third-party package manager such as <a href=\"http://conan.io\" rel=\"nofollow noreferrer\">conan.io</a>.</p></li>\n</ul>\n\n<p>None of the above solutions is perfect and dependency management will likely always require some more effort on your part compared to languages such as Python or Rust.</p>\n"}, {"tags": [], "owner": {"reputation": 818, "user_id": 2424611, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mY3Hk.jpg?s=128&g=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/2424611/mahesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1527082658, "creation_date": 1527082658, "answer_id": 50489904, "question_id": 50489637, "link": "https://stackoverflow.com/questions/50489637/how-to-manage-and-migrate-c-libraries/50489904#50489904", "title": "How to manage and migrate C++ libraries?", "body": "<p>As far as I know, there is no central library management system in C++ similar to <code>pip</code>. You need to download and install the packages you need manually or through some package manager if your OS supports it.</p>\n\n<p>As for managing multiple libraries in a C++ project, you could use <a href=\"https://cmake.org/\" rel=\"nofollow noreferrer\">CMAKE</a> or something similar. If you link your libraries dynamically (i.e., though .dll or .so files), then you need to supply these dynamic library binaries along with your application. To find out which dll files may be needed, you could something like the <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">Dependency Walker</a> or <a href=\"http://www.purinchu.net/software/elflibviewer.php\" rel=\"nofollow noreferrer\">ELF Library Viewer</a>.</p>\n\n<p>Personally, I use a development environment - specifically <a href=\"https://www.qt.io/\" rel=\"nofollow noreferrer\">Qt</a> (with the QtCreator), containing many of these components like <code>qmake</code> etc. - which simplifies the process of development and distribution.</p>\n"}], "owner": {"reputation": 753, "user_id": 5735646, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1DDfK.jpg?s=128&g=1", "display_name": "nick", "link": "https://stackoverflow.com/users/5735646/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1527082658, "creation_date": 1527081889, "question_id": 50489637, "link": "https://stackoverflow.com/questions/50489637/how-to-manage-and-migrate-c-libraries", "title": "How to manage and migrate C++ libraries?", "body": "<p>I am learning C++, is there something like python-pip in C++? I am uing <code>json</code>/<code>YAML</code> packages in my 1st project, I want to know which is the correct way to manage dependencies in my project, and after I finished developing, which is the correct way to migrate dependencies to production environment?</p>\n"}, {"tags": ["c++", "visual-studio", "assembly", "masm"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1527082378, "post_id": 50489582, "comment_id": 87992409, "body": "The assembly code doesn&#39;t know that this is an stdcall.  So it looks for the wrong identifier, <code>_get_key</code> instead of <code>_get_key@0</code>.  Either extend PROTO or drop stdcall."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1527085727, "post_id": 50489582, "comment_id": 87994787, "body": "you need declare in asm <code>extern __imp__get_key@4:proc</code> for x86 and <code>extern __imp_get_key:proc</code> for x64"}], "owner": {"reputation": 1, "user_id": 8685900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ErBUuOD_d2U/AAAAAAAAAAI/AAAAAAAAABA/x4DWUg5ZMco/photo.jpg?sz=128", "display_name": "Ioana Cheres", "link": "https://stackoverflow.com/users/8685900/ioana-cheres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527081993, "creation_date": 1527081764, "last_edit_date": 1527081993, "question_id": 50489582, "link": "https://stackoverflow.com/questions/50489582/cant-import-c-code-written-in-vs-2015-in-win32-with-staticlibrary-dll-that", "title": "Can&#39;t import C++ code, written in VS 2015 in Win32 with StaticLibrary dll, that takes keyboard input in masm as .lib and .dll file", "body": "<p>I have written the following code in VS 2015, Win32 project</p>\n\n<p>MyLib.h</p>\n\n<pre><code>    #pragma once\n#include &lt;conio.h&gt;\n\n\nextern \"C\"\n{\n     __declspec(dllexport) extern int __stdcall get_key(int a);\n}\n</code></pre>\n\n<p>MyLib.cpp</p>\n\n<pre><code>       #include \"stdafx.h\"\n\n#include \"MyLib.h\"\n\nextern \"C\" {\n    _declspec(dllexport) extern int __stdcall get_key(int a)\n    {\n        int c = 0;\n\n            if (_kbhit()) {\n                c = _getch();\n                return(c);\n            }\n        a = c;\n        return c;\n    }\n}\n</code></pre>\n\n<p>And this, on build generates MyLib.dll and MyLib.lib\nBut when I try to import in in masm:</p>\n\n<pre><code>includelib MyLib.lib\nget_key PROTO C,: DWORD\n.data\ndoamne_ajuta dd 0\n</code></pre>\n\n<p>...</p>\n\n<pre><code> push eax\n    invoke get_key, doamne_ajuta\n</code></pre>\n\n<p>I have the following error: \nexample.obj : error LNK2019: unresolved external symbol _get_key referenced in function _draw@0\nexample.exe : fatal error LNK1120: 1 unresolved externals</p>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 2071, "user_id": 7478530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGr5i.png?s=128&g=1", "display_name": "Dragonthoughts", "link": "https://stackoverflow.com/users/7478530/dragonthoughts"}, "edited": false, "score": 0, "creation_date": 1527081970, "post_id": 50489565, "comment_id": 87992071, "body": "As a general rule, you should only include .h files and not .cpp files. It is normal practice to put either <code>#pragma once</code> or guard <code>#define</code>s to prevent the same headers being included more than once. see <a href=\"https://stackoverflow.com/questions/787533/is-pragma-once-a-safe-include-guard\" title=\"is pragma once a safe include guard\">stackoverflow.com/questions/787533/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1527082083, "last_edit_date": 1527082083, "creation_date": 1527081949, "answer_id": 50489658, "question_id": 50489565, "link": "https://stackoverflow.com/questions/50489565/c-multiple-definition-of-methods-or-undefined-reference/50489658#50489658", "title": "C++ multiple definition of methods or undefined reference", "body": "<p>You always include the \"class.h\", never the \"class.cpp\". That's because <code>#include</code> is handled during the compilation phase, while the different .cpp files are pieced together in the linking phase. More accurately, each .cpp file is translated into an object file, and those are then linked.</p>\n\n<p>Your missing virtual methods are the result of a missing object file. We know main.cpp is, but is \"class.cpp\" compiled? </p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 7080804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0ajXR.png?s=128&g=1", "display_name": "A. Cloete", "link": "https://stackoverflow.com/users/7080804/a-cloete"}, "is_accepted": false, "score": 0, "last_activity_date": 1527082321, "creation_date": 1527082321, "answer_id": 50489794, "question_id": 50489565, "link": "https://stackoverflow.com/questions/50489565/c-multiple-definition-of-methods-or-undefined-reference/50489794#50489794", "title": "C++ multiple definition of methods or undefined reference", "body": "<p>Only include hpp files and then you need to add the cpp file to the compiler. If you are using the command line, it should look like this:</p>\n\n<pre><code>g++ main.cpp class.cpp -o a.out\n</code></pre>\n\n<p>If you are using a C++ IDE, it will compile the class.cpp file as long is it is part of your project.</p>\n"}], "owner": {"reputation": 11, "user_id": 9096283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34ebc3c96f5cf288ddd4b2dc02de5261?s=128&d=identicon&r=PG&f=1", "display_name": "Tsam", "link": "https://stackoverflow.com/users/9096283/tsam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1527082321, "creation_date": 1527081711, "last_edit_date": 1527081772, "question_id": 50489565, "link": "https://stackoverflow.com/questions/50489565/c-multiple-definition-of-methods-or-undefined-reference", "title": "C++ multiple definition of methods or undefined reference", "body": "<p>I make a project to c++ and i need some methods to be virtual in my class.. so When i include in my main.cpp the \"class\".h , compiler says undefined reference to my method and when i change \"class\".h to \"class\".cpp it says first defined in main.o and multiple definition in class.cpp</p>\n\n<pre><code>class Avl {\n\npublic:\n\n    Avlnode* insert(unsigned int key , Avlnode *root);\n    AvlofAvlnodes* insert(unsigned int key, unsigned int neighbors[],int size, AvlofAvlnodes *id );\n\n    template &lt;typename nodeptr&gt;\n    bool findElement(unsigned int element, nodeptr* root);\n    bool findConecion(unsigned int id, unsigned int neighbor,AvlofAvlnodes* root);\n\n    Avlnode* deletion(Avlnode* root,unsigned int key );\n    void deletion(unsigned int key , unsigned int neighbor,AvlofAvlnodes* root);\n\n    // methods to help avl\n    template &lt;typename nodeptr&gt;\n    nodeptr* rightRotate(nodeptr* root);\n    template &lt;typename nodeptr&gt;\n    nodeptr* leftRotate(nodeptr* root);\n\n    int max(int a,int b);\n    template &lt;typename nodeptr&gt;\n    int height(nodeptr* root);\n    template &lt;typename nodeptr&gt;\n    int getBalance(nodeptr* root);\n    template &lt;typename nodeptr&gt;\n    nodeptr* minValueNode(nodeptr* root);\n    template &lt;typename nodeptr&gt;\n    void preOrder(nodeptr* node);\n\n};\n</code></pre>\n"}, {"tags": ["c++", "performance", "pointers"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1527081699, "post_id": 50489532, "comment_id": 87991886, "body": "Does <code>object</code> overload unary <code>&amp;</code>?"}, {"owner": {"reputation": 97, "user_id": 5327441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9745b83e14d4fbd5fc9de1fa2ccc96f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel D.", "link": "https://stackoverflow.com/users/5327441/daniel-d"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1527081723, "post_id": 50489532, "comment_id": 87991902, "body": "No, it does not"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1527081812, "post_id": 50489532, "comment_id": 87991963, "body": "Can you show an example of the code you found where they do this?  Unless <code>&amp;</code> is overloaded I see no reason to do this."}, {"owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "edited": false, "score": 2, "creation_date": 1527081852, "post_id": 50489532, "comment_id": 87991993, "body": "It could be that someone wrote object-&gt;something and the compiler rejected it, so he &quot;corrected&quot; his code..."}, {"owner": {"reputation": 97, "user_id": 5327441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9745b83e14d4fbd5fc9de1fa2ccc96f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel D.", "link": "https://stackoverflow.com/users/5327441/daniel-d"}, "edited": false, "score": 0, "creation_date": 1527081879, "post_id": 50489532, "comment_id": 87992012, "body": "I fear that i can not remember where exactly i found it, but your answer was all i was searching for."}, {"owner": {"reputation": 97, "user_id": 5327441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9745b83e14d4fbd5fc9de1fa2ccc96f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel D.", "link": "https://stackoverflow.com/users/5327441/daniel-d"}, "edited": false, "score": 0, "creation_date": 1527081905, "post_id": 50489532, "comment_id": 87992031, "body": "Yet, does the compiler optimize such code?"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1527084051, "post_id": 50489532, "comment_id": 87993613, "body": "It could be the result of a global search-and-replace.  Some singleton object that used to be referenced by a pointer, and somebody decided just to make it a global static object:  <code>s&#47;object_ptr&#47;(&amp;object)&#47;g</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4058, "user_id": 754407, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1b5c51ae68d0d76ce0e178f777f1742d?s=128&d=identicon&r=PG", "display_name": "hauron", "link": "https://stackoverflow.com/users/754407/hauron"}, "is_accepted": true, "score": 4, "last_activity_date": 1527082587, "creation_date": 1527082587, "answer_id": 50489877, "question_id": 50489532, "link": "https://stackoverflow.com/questions/50489532/c-acess-object-via-pointer-instead-of-direct-access/50489877#50489877", "title": "C++ acess object via pointer instead of direct access", "body": "<p>If <code>operator&amp;</code> is not overloaded it's essentially the same <a href=\"https://godbolt.org/g/iPTjRY\" rel=\"nofollow noreferrer\">https://godbolt.org/g/iPTjRY</a>:</p>\n\n<pre><code>auto v_1 = f_1.get(); \nauto v_2 = (&amp;f_1)-&gt;get();\n</code></pre>\n\n<p>resolved to pretty much the same:</p>\n\n<pre><code>lea rax, [rbp-12]               ; load object address\nmov rdi, rax                    ; move object address into rdi, not sure why not just: 'lea rdi, [rbp-12]'\ncall Foo::get() const           ; invoke the subroutine\nmov DWORD PTR [rbp-4], eax      ; save the result at [rbp-4]\n</code></pre>\n\n<p>(already with no optimizations they are the same; with optmizations turned on... the entire calls get discarded, so that's left for the curious reader)</p>\n"}], "owner": {"reputation": 97, "user_id": 5327441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9745b83e14d4fbd5fc9de1fa2ccc96f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel D.", "link": "https://stackoverflow.com/users/5327441/daniel-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 50489877, "answer_count": 1, "score": 0, "last_activity_date": 1527082587, "creation_date": 1527081632, "question_id": 50489532, "link": "https://stackoverflow.com/questions/50489532/c-acess-object-via-pointer-instead-of-direct-access", "title": "C++ acess object via pointer instead of direct access", "body": "<p>In some code i have seen the following:\n<code>(&amp;object)-&gt;something</code>.</p>\n\n<ol>\n<li>Is there any advantage to <code>object.something</code> ?</li>\n<li>Does the compiler somehow optimize such code, or is it faster in any way?</li>\n</ol>\n"}, {"tags": ["c++", "visual-studio-2012", "decltype"], "answers": [{"comments": [{"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1527082481, "post_id": 50489798, "comment_id": 87992486, "body": "Are you talking about <code>#pragma once</code> or <code>#ifndef headername ...</code> ? I forgot to put that in my little example. I can add that - that is not the problem I am facing though I think?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 1, "creation_date": 1527082633, "post_id": 50489798, "comment_id": 87992607, "body": "@code_fodder: That&#39;s a header guard. It prevents a single header from being included twice <b>in the same .cpp</b>. It won&#39;t prevent a header from being included in different .cpp files. So, no, this answer is not about header guards."}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1527082765, "post_id": 50489798, "comment_id": 87992711, "body": "ah crap - you are right - I copied my example from my other PC... but it was implemented as a class and they are class members... I think I need to update my example..."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1527082327, "creation_date": 1527082327, "answer_id": 50489798, "question_id": 50489486, "link": "https://stackoverflow.com/questions/50489486/can-you-implement-auto-fn-decltypeexp-as-a-header-implementation-or-does/50489798#50489798", "title": "Can you implement auto fn() -&gt; decltype(exp) as a header/implementation or does it need to be header only?", "body": "<p>There are a number of problems with your sample, but <code>auto</code> isn't one of them.</p>\n\n<p>You should know about the One Definition Rule. Many C++ entities may be defined only once. For instance, functions and global objects may be defined only once. By putting <code>mymap</code> and <code>get_mymap_value_range</code> in a header and including that header twice, you violate both rules.</p>\n\n<p>You may need <code>extern std::multimap&lt;int, int&gt; mymap;</code> in the header, as that is <em>not</em> a definition.</p>\n\n<p>Note that compilers do not have to detect violations of the One Definition Rule. They're getting better at it, but it's quite possible that you end up with a runtime problem. E.g. it would be no surprise when a single variable has two different addresses, each of which holds a different value. </p>\n"}], "owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527082935, "creation_date": 1527081492, "last_edit_date": 1527082935, "question_id": 50489486, "link": "https://stackoverflow.com/questions/50489486/can-you-implement-auto-fn-decltypeexp-as-a-header-implementation-or-does", "title": "Can you implement auto fn() -&gt; decltype(exp) as a header/implementation or does it need to be header only?", "body": "<p>So I have the following example:</p>\n\n<p>header file:</p>\n\n<pre><code>class mymapclass\n{\n    std::multimap&lt;int, int&gt; mymap;\n\n    auto get_mymap_value_range(int key_val) -&gt; decltype(mymap.equal_range(key_val))\n    {\n        return mymap-&gt;equal_range(key_val);\n    }\n};\n</code></pre>\n\n<p>In cpp file:</p>\n\n<pre><code>int main()\n{\n    mymapclass m;\n    auto test = m.get_mymap_value_range(1);\n    return 0;\n}\n</code></pre>\n\n<p>But if I want to move the implementation of get_mymap_value_range() into the cpp file I get a compiler error (MSVS2012 - not fully c++11, but seems to support this feature): C2228 left of equal_range must have class/struct/union...</p>\n\n<p>If I leave the implementation in the header it seems to work. When I moved the implementation into the cpp file it looked like:</p>\n\n<p>header:</p>\n\n<pre><code>auto get_mymap_value_range(int key_val) -&gt; decltype(mymap.equal_range(key_val));\n</code></pre>\n\n<p>cpp:</p>\n\n<pre><code>auto mymapclass::get_mymap_value_range(int key_val) -&gt; decltype(mymap.equal_range(key_val))\n{\n    return mymap-&gt;equal_range(key_val);\n}\n</code></pre>\n"}, {"tags": ["c++", "sudoku"], "comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1527081279, "post_id": 50489387, "comment_id": 87991607, "body": "You should probably read Knuth: &quot;Dancing links&quot;. <a href=\"https://arxiv.org/abs/cs/0011047\" rel=\"nofollow noreferrer\">arxiv.org/abs/cs/0011047</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5956451"}, "edited": false, "score": 0, "creation_date": 1527081541, "post_id": 50489387, "comment_id": 87991783, "body": "Which message did you get?"}, {"owner": {"reputation": 9, "user_id": 9753543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e291ff132ff26e1f344b677cb5221b5?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9753543/j-doe"}, "edited": false, "score": 0, "creation_date": 1527082710, "post_id": 50489387, "comment_id": 87992668, "body": "It was saying I can&#39;t use two variables when adding !checksquare(i,j) in the bool isValid() if condition. I&#39;m just not sure what to do for the bool checkSquare function, I&#39;ve tried a lot of things so I&#39;m desperate now.  I read the dancing links but I don&#39;t understand"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9753543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e291ff132ff26e1f344b677cb5221b5?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9753543/j-doe"}, "edited": false, "score": 0, "creation_date": 1527084362, "post_id": 50489972, "comment_id": 87993807, "body": "The code I pasted doesn&#39;t have any error when compiling, it&#39;s just that I&#39;m not getting a grid which respects sudoku rules, and I&#39;m using visual studio, I&#39;m not sure if that&#39;s good."}, {"owner": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "reply_to_user": {"reputation": 9, "user_id": 9753543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e291ff132ff26e1f344b677cb5221b5?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9753543/j-doe"}, "edited": false, "score": 0, "creation_date": 1527085533, "post_id": 50489972, "comment_id": 87994625, "body": "I ran your edited code, and I get a six-by-six square following sudoku rules, as far as I can tell. So I&#39;m not sure what the problem could be. I&#39;ve also compared this code to the old one, and it looks like some formatting problems came up either on your side when pasting the code, or on mine when copying it."}, {"owner": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "reply_to_user": {"reputation": 9, "user_id": 9753543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e291ff132ff26e1f344b677cb5221b5?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9753543/j-doe"}, "edited": false, "score": 0, "creation_date": 1527085745, "post_id": 50489972, "comment_id": 87994816, "body": "Visual Studio should be fine, btw, and I can&#39;t think of compiler flags that would ruin the thing for you. -O0, -O2 and -O3 (/O0, /O2 etc for VS) all are correct."}, {"owner": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "reply_to_user": {"reputation": 9, "user_id": 9753543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e291ff132ff26e1f344b677cb5221b5?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9753543/j-doe"}, "edited": false, "score": 0, "creation_date": 1527085883, "post_id": 50489972, "comment_id": 87994916, "body": "In what way does your square fail? Actual output is generally pretty helpful."}, {"owner": {"reputation": 9, "user_id": 9753543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e291ff132ff26e1f344b677cb5221b5?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9753543/j-doe"}, "edited": false, "score": 0, "creation_date": 1527085959, "post_id": 50489972, "comment_id": 87994958, "body": "Yeah I edited it because there was some errors when I pasted it but it should be better now. If I make a 9x9 grid, my problem is that I don&#39;t have a checksquare function (I&#39;m not sure how I would even implement it, and when I did it didn&#39;t work well), so the grid is actually working in terms of row and column validity, but I want the grid to respect sudoku rules, so each 3x3 square should only have one example of 1 to 9 numbers"}, {"owner": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "reply_to_user": {"reputation": 9, "user_id": 9753543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e291ff132ff26e1f344b677cb5221b5?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9753543/j-doe"}, "edited": false, "score": 0, "creation_date": 1527086409, "post_id": 50489972, "comment_id": 87995285, "body": "Ah, so that&#39;s the actual problem. What you need is a function to test one square, and apply it to each square, e.g. in the isValid() function. So I&#39;d need more info on the trouble you&#39;re running into -- exact function you&#39;ve tried, exact error message, or a description of the conceptual problem you&#39;re facing."}, {"owner": {"reputation": 9, "user_id": 9753543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e291ff132ff26e1f344b677cb5221b5?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9753543/j-doe"}, "edited": false, "score": 0, "creation_date": 1527086579, "post_id": 50489972, "comment_id": 87995398, "body": "Yes, I need a function that tests the square validity and then put it in isValid(), but I&#39;m not sure how I can do that, since I need to go through multiple (3) lines and/or columns for that"}, {"owner": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "reply_to_user": {"reputation": 9, "user_id": 9753543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e291ff132ff26e1f344b677cb5221b5?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9753543/j-doe"}, "edited": false, "score": 0, "creation_date": 1527087619, "post_id": 50489972, "comment_id": 87996180, "body": "I&#39;ve edited my answer, check if that&#39;s enough to help you through!"}, {"owner": {"reputation": 9, "user_id": 9753543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e291ff132ff26e1f344b677cb5221b5?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9753543/j-doe"}, "edited": false, "score": 0, "creation_date": 1527191339, "post_id": 50489972, "comment_id": 88046731, "body": "Alright, I honestly don&#39;t know what I&#39;m doing. I thought about it a little and thought the best way to figure out the top left numbers of the square s should be done with a double loop. This is what I wrote so far, but I don&#39;t know if it would even work \tvector&lt;pair&lt;int, int&gt;&gt; squareMembers(const int x, const int y) \t{ \t\tfor (int i = 0; i &lt; linesize_; i+3) \t\t{ \t\t\tfor (int j = 0; j &lt; linesize_; j + 3) \t\t\t{ \t\t\t\tint square = gridElements_[x][y]; \t\t\t}  \t\t} \t}"}, {"owner": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "reply_to_user": {"reputation": 9, "user_id": 9753543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e291ff132ff26e1f344b677cb5221b5?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9753543/j-doe"}, "edited": false, "score": 0, "creation_date": 1527274903, "post_id": 50489972, "comment_id": 88082796, "body": "new answer which hopefully will help you through"}], "tags": [], "owner": {"reputation": 436, "user_id": 4070489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DqUop.jpg?s=128&g=1", "display_name": "GeckoGeorge", "link": "https://stackoverflow.com/users/4070489/geckogeorge"}, "is_accepted": false, "score": 1, "last_activity_date": 1527274761, "last_edit_date": 1527274761, "creation_date": 1527082874, "answer_id": 50489972, "question_id": 50489387, "link": "https://stackoverflow.com/questions/50489387/making-a-sudoku-generator-and-checking-squares-in-c/50489972#50489972", "title": "Making a sudoku generator and checking squares in C++", "body": "<p><strong>Rewrite:</strong> So I noticed that I misunderstood your fill function rather severely, and had to do quite some testing to get the checker to work, since my original idea wasn't feasible. I did not check out the paper referenced in the comments, which probably would give you a far more optimized solution, but tried to extend your ansatz to include correct squares. In the end, what worked best was to simply adapt the attemptedNumbers array: it's pre-filled with all the numbers already present in the square in question. This necessitates a couple of helper functions in the class: <code>activeSquareStart</code>, <code>activeSquareMembers</code>, <code>numsInSquare</code> and as a checker the, as of now still failing, <code>isSquareValid</code>.</p>\n\n<p>Note that the exact code I used has structured bindings, and will have to be compiled using a flag like <code>-std=c++17</code> or some such:</p>\n\n<pre><code>g++ -g -std=c++17 sudoku.cpp\n</code></pre>\n\n<p>or</p>\n\n<pre><code>g++ -O3 -std=c++17 -DNDEBUG sudoku.cpp\n</code></pre>\n\n<p>for no debug output. Similar flags must exist for Visual Studio, I just don't know offhand what they are. Except setting NDEBUG somewhere in the project properties, which may be VS' default behavior.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;numeric&gt;\n#include &lt;time.h&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;cmath&gt;\n#include &lt;iterator&gt;\n#include &lt;iomanip&gt;\n\nusing std::vector;\n\n// helper for std::accumulate\nbool logical_and(bool x, bool y) {\n    return x &amp; y;\n}\n //because I was curious how many cycles of filling attempts are required\nstatic ulong cycles = 0;\n\nclass Grid {\n    public:\n        typedef int ElementType;\n        typedef vector&lt; vector&lt;ElementType&gt; &gt; GridElements;\n        typedef std::pair &lt;size_t, size_t&gt; Coordinate;\n\n        Grid(const size_t linesize) :\n            linesize_(linesize)\n    {\n        srand(time(NULL));\n\n        // some check to make sure I can create subsquares\n        // I think it needs square numbers so that subsquares work correctly\n        // using any int != 0 is true\n        if( sqrt(linesize_)*sqrt(linesize_) != linesize_) {\n            throw \"ERROR: can't create required squares\";\n        }\n        // resizes to linesize_ rows &amp; columns, with initial values == 0\n        gridElements_.resize(linesize_, vector&lt;ElementType&gt;(linesize_, 0));\n    }\n\n        // use like this: cout &lt;&lt; grid.to_s();\n        std::string to_s() const {\n            std::stringstream ss;\n            for (size_t row = 0; row &lt; gridElements_.size(); row++) {\n                if(row%(size_t)sqrt(linesize_) == 0){\n                    ss &lt;&lt; \"\\n\";\n                }\n                for (size_t col = 0; col &lt; gridElements_[row].size(); col++) {\n                    if(col%(size_t)sqrt(linesize_) == 0){\n                        ss &lt;&lt; \"| \";\n                    }\n                    ss &lt;&lt; std::setw(2) &lt;&lt; gridElements_[row][col] &lt;&lt; std::setw(0) &lt;&lt; \" \";\n                }\n                ss &lt;&lt; std::endl;\n            }\n\n            ss &lt;&lt; std::endl;\n\n            return ss.str();\n        }\n\n        // return true if there are no repeated numbers within filled elements in\n        // rows/columns, false otherwise\n        bool isValid() const {\n            // you would also need to write and call a checkSquare method if you're doing a sudoku puzzle\n            for (size_t i = 0; i &lt; linesize_; i++) {\n                if (!isRowValid(i) || !isColValid(i)) {\n                    return false;\n                }\n            }\n\n            // I had a isSquareValid function being called for all squares here, but that destroyed the puzzle (only 0s)\n            // since valid squares are now invariants for this problem, I'll leave it to you to actually implement the check :)\n            // it does test the correct squares, so far\n\n            /* for(size_t i = 0; i &lt; linesize_; i+=(size_t)sqrt(linesize_)){ */\n            /*  for(size_t j = 0; j &lt; linesize_; j+=(size_t)sqrt(linesize_)){ */\n            /*      if(!isSquareValid(i,j)){ */\n            /*          return false; */\n            /*      } */\n            /*  } */\n            /* } */\n\n            return true;\n        }\n\n        // the recursive function that actually puts values in the grid elements\n        // max recursion depth (I think) is linesize_^2\n        bool fill(size_t row, size_t col) {\n            // stopping conditions\n            if (!isValid()) {\n                return false;\n            }\n            if ((row == linesize_) || (col == linesize_)) {\n                return true;\n            }\n\n            size_t nextCol = (col + 1) % linesize_;\n            size_t nextRow = row;\n            if (nextCol &lt; col) {\n                nextRow++;\n            }\n\n            // keep a record of what numbers have been tried in this element\n            // exclude all numbers already present in the active squre before beginning\n            vector&lt;bool&gt; attemptedNumbers = numsInSquare(row, col);\n            attemptedNumbers[0] = true;\n\n            // We will continue choosing values for gridElements_[row][col]\n            // as long as we haven't tried all the valid numbers, and as long as\n            // the rest of the grid is not valid with this choice\n            int value = 0;\n            bool triedAllNumbers = false;\n            bool restOfGridValid = false;\n            while (!triedAllNumbers &amp;&amp; !restOfGridValid) {\n\n                while (attemptedNumbers[value]) {\n                    value = rand() % linesize_ + 1;\n                }\n                attemptedNumbers[value] = true;\n                gridElements_[row][col] = value;\n\n                // uncomment this for debugging/intermediate grids\n#ifndef NDEBUG\n                std::cout &lt;&lt; ++cycles &lt;&lt; '\\n';\n                std::cout &lt;&lt; to_s();\n#endif\n\n                // triedAllNumbers == true if all the numbers in [1, linesize_] have been tried\n                triedAllNumbers = std::accumulate(attemptedNumbers.begin(), attemptedNumbers.end(), true, logical_and);\n                restOfGridValid = fill(nextRow, nextCol);\n            } \n            if (triedAllNumbers &amp;&amp; !restOfGridValid) {\n                // couldn't find a valid number for this location\n                gridElements_[row][col] = 0;\n            }\n\n            return restOfGridValid;\n        }\n\n    private:\n        // checks that a number is used only once in the row\n        // assumes that values in gridElements_ are in [1, linesize_]\n        // return false when the row contains repeated values, true otherwise\n        bool isRowValid(size_t row) const {\n            vector&lt;bool&gt; numPresent (linesize_ + 1, false);\n\n            for (size_t i = 0; i &lt; linesize_; i++) {\n                int element = gridElements_[row][i];\n\n                if (element != 0) {\n                    if (numPresent[element]) {\n                        return false;\n                    }\n                    else {\n                        numPresent[element] = true;\n                    }\n                }\n                // don't do anything if element == 0\n            }\n\n            return true;\n        }\n\n        // checks that a number is used only once in the column\n        // assumes that values in gridElements_ are in [1, linesize_]\n        // return false when the column contains repeated values, true otherwise\n        bool isColValid(int col) const {\n            vector&lt;bool&gt; numPresent (linesize_ + 1, false);\n\n            for (size_t i = 0; i &lt; linesize_; i++) {\n                int element = gridElements_[i][col];\n\n                if (element != 0) {\n                    if (numPresent[element]) {\n                        return false;\n                    }\n                    else {\n                        numPresent[element] = true;\n                    }\n                }\n                else {\n\n                    break;\n                }\n            }\n\n            return true;\n        }\n\n//NEW HELPER FUNCTIONS START HERE\n\n        //upper left corner of square the coordinate (row,col) lies in\n        Coordinate activeSquareStart(size_t row, size_t col) const {\n            return Coordinate{ row - (row % int(std::sqrt(linesize_))), col - (col % int(std::sqrt(linesize_)))};\n        }\n\n        vector&lt;Coordinate&gt; activeSquareMembers(size_t const row, size_t const col) const{\n            //requires -std=c++17 or similar flag for structured binding auto [..] = .. to work!\n            // if that is a problem, create a temporary std::pair instead\n            auto [x, y] = activeSquareStart(row, col); \n            vector&lt;Coordinate&gt; members;\n            members.reserve(linesize_);\n            for(size_t i=0; i&lt;sqrt(linesize_); ++i){\n                for(size_t j=0; j&lt;sqrt(linesize_); ++j){\n                    members.push_back({x+i, y+j});\n                }\n            }\n            return members;\n        }\n\n        vector&lt;bool&gt; numsInSquare(size_t const row, size_t const col) const{\n            vector&lt;bool&gt; numPresent (linesize_ + 1, false);\n            numPresent[0] = true;\n            vector&lt;Coordinate&gt; squareMembers = activeSquareMembers(row, col);\n            for(auto e : squareMembers){\n                numPresent[ gridElements_.at(e.first).at(e.second) ] = true;\n            }\n            return numPresent;\n        }\n\n        bool isSquareValid(size_t const row, size_t const col) const{\n            vector&lt;bool&gt; numPresent = numsInSquare(row, col);\n            // logical error probably here\n            return std::accumulate(numPresent.begin(), numPresent.end(), true, logical_and);\n        }\n\n        // the size of each row/column\n        size_t linesize_;\n\n        // the 2d array\n        GridElements gridElements_;\n};\n\n\nint main(int argc, char** argv) {\n    // 9x9 grid\n    Grid grid(16);\n\n    // pretty sure this is mathematically guaranteed to always return true, assuming the algorithm is implemented correctly ;)\n    grid.fill(0, 0);\n\n    std::cout &lt;&lt; grid.to_s();\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9753543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e291ff132ff26e1f344b677cb5221b5?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9753543/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1445, "favorite_count": 0, "closed_date": 1527083655, "answer_count": 1, "score": -2, "last_activity_date": 1527274761, "creation_date": 1527081175, "last_edit_date": 1527198457, "question_id": 50489387, "link": "https://stackoverflow.com/questions/50489387/making-a-sudoku-generator-and-checking-squares-in-c", "closed_reason": "Not suitable for this site", "title": "Making a sudoku generator and checking squares in C++", "body": "<p>I'm trying to check square validity while generating a sudoku grid. (if you delete isSquarevalid()) the code will work properly.\nSo I added a isSquareValid(), but doing so fills my 9x9 grid with 0.\nI wasn't sure how to do it so I did it in an ugly way (checking if square makes 45), and if it doesnt then it returns false. I don't understand why it fills my grid with 0's though.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;numeric&gt;\n#include &lt;time.h&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\nusing std::vector;\nusing std::pair;\n\n// helper for std::accumulate\nbool logical_and(bool x, bool y) {\n    return x &amp; y;\n}\n\nclass Grid {\npublic:\n    typedef int ElementType;\n    typedef vector&lt; vector&lt;ElementType&gt; &gt; GridElements;\n\n    Grid(const int linesize) :\n        linesize_(linesize)\n    {\n        srand(time(NULL));\n\n        // resizes to linesize_ rows &amp; columns, with initial values == 0\n        gridElements_.resize(linesize_, vector&lt;ElementType&gt;(linesize_, 0));\n    }\n\n    // use like this: cout &lt;&lt; grid.to_s();\n    std::string to_s() const {\n        std::stringstream ss;\n        for (int row = 0; row &lt; gridElements_.size(); row++) {\n            for (int col = 0; col &lt; gridElements_[row].size(); col++) {\n                ss &lt;&lt; gridElements_[row][col] &lt;&lt; \" \";\n            }\n            ss &lt;&lt; std::endl;\n        }\n\n        ss &lt;&lt; std::endl;\n\n        return ss.str();\n    }\n\n    // return true if there are no repeated numbers within filled elements in\n    // rows/columns, false otherwise\n    bool isValid() const {\n        // you would also need to write and call a checkSquare method if you're doing a sudoku puzzle\n        for (int i = 0; i &lt; linesize_; i++) {\n            if (!isRowValid(i) || !isColValid(i) || !isSquareValid()) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    // the recursive function that actually puts values in the grid elements\n    // max recursion depth (I think) is linesize_^2\n    bool fill(int row, int col) {\n        // stopping conditions\n        if (!isValid()) {\n            return false;\n        }\n        if ((row == linesize_) || (col == linesize_)) {\n            return true;\n        }\n\n        int nextCol = (col + 1) % linesize_;\n        int nextRow = row;\n        if (nextCol &lt; col) {\n            nextRow++;\n        }\n\n        // keep a record of what numbers have been tried in this element\n        vector&lt;bool&gt; attemptedNumbers(linesize_ + 1, false);\n        attemptedNumbers[0] = true;\n\n        // We will continue choosing values for gridElements_[row][col]\n        // as long as we haven't tried all the valid numbers, and as long as\n        // the rest of the grid is not valid with this choice\n        int value = 0;\n        bool triedAllNumbers = false;\n        bool restOfGridValid = false;\n        while (!triedAllNumbers &amp;&amp; !restOfGridValid) {\n            while (attemptedNumbers[value]) {\n                value = rand() % linesize_ + 1;\n            }\n            attemptedNumbers[value] = true;\n            gridElements_[row][col] = value;\n\n            // uncomment this for debugging/intermediate grids\n            //std::cout &lt;&lt; to_s();\n\n            // triedAllNumbers == true if all the numbers in [1, linesize_] have been tried\n            triedAllNumbers = std::accumulate(attemptedNumbers.begin(), attemptedNumbers.end(), true, logical_and);\n            restOfGridValid = fill(nextRow, nextCol);\n        }\n        if (triedAllNumbers &amp;&amp; !restOfGridValid) {\n            // couldn't find a valid number for this location\n            gridElements_[row][col] = 0;\n        }\n\n        return restOfGridValid;\n    }\n\nprivate:\n    // checks that a number is used only once in the row\n    // assumes that values in gridElements_ are in [1, linesize_]\n    // return false when the row contains repeated values, true otherwise\n    bool isRowValid(int row) const \n    {\n        vector&lt;bool&gt; numPresent(linesize_ + 1, false);\n\n        for (int i = 0; i &lt; linesize_; i++) {\n            int element = gridElements_[row][i];\n\n            if (element != 0) {\n                if (numPresent[element]) {\n                    return false;\n                }\n                else {\n                    numPresent[element] = true;\n                }\n            }\n            // don't do anything if element == 0\n        }\n\n        return true;\n    }\n\n    // checks that a number is used only once in the column\n    // assumes that values in gridElements_ are in [1, linesize_]\n    // return false when the column contains repeated values, true otherwise\n    bool isColValid(int col) const \n    {\n        vector&lt;bool&gt; numPresent(linesize_ + 1, false);\n\n        for (int i = 0; i &lt; linesize_; i++) {\n            int element = gridElements_[i][col];\n            if (element != 0) {\n                if (numPresent[element]) {\n                    return false;\n                }\n                else {\n                    numPresent[element] = true;\n                }\n            }\n            else {\n\n                break;\n            }\n        }\n\n        return true;\n    }\n\n    bool isSquareValid() const\n    {\n        int square1 = gridElements_[0][0] + gridElements_[0][1] + gridElements_[0][2] + gridElements_[1][0] + gridElements_[2][0] + gridElements_[2][1] + gridElements_[1][1] + gridElements_[1][2] + gridElements_[2][2];\n        int square2 = gridElements_[3][0] + gridElements_[4][0] + gridElements_[5][0] + gridElements_[3][1] + gridElements_[3][2] + gridElements_[4][1] + gridElements_[4][2] + gridElements_[5][1] + gridElements_[5][2];\n        int square3 = gridElements_[6][0] + gridElements_[7][0] + gridElements_[8][0] + gridElements_[6][1] + gridElements_[6][2] + gridElements_[7][1] + gridElements_[7][2] + gridElements_[8][1] + gridElements_[8][2];\n        int square4 = gridElements_[0][3] + gridElements_[0][4] + gridElements_[0][5] + gridElements_[1][3] + gridElements_[1][4] + gridElements_[1][5] + gridElements_[2][3] + gridElements_[2][4] + gridElements_[2][5];\n        int square5 = gridElements_[0][6] + gridElements_[0][7] + gridElements_[0][8] + gridElements_[1][6] + gridElements_[1][7] + gridElements_[1][8] + gridElements_[2][6] + gridElements_[2][7] + gridElements_[2][8];\n        int square6 = gridElements_[3][3] + gridElements_[3][4] + gridElements_[3][5] + gridElements_[4][3] + gridElements_[4][4] + gridElements_[4][5] + gridElements_[5][3] + gridElements_[5][4] + gridElements_[5][5];\n        int square7 = gridElements_[6][3] + gridElements_[7][3] + gridElements_[8][3] + gridElements_[6][4] + gridElements_[7][4] + gridElements_[8][4] + gridElements_[6][5] + gridElements_[7][5] + gridElements_[8][5];\n        int square8 = gridElements_[3][6] + gridElements_[3][7] + gridElements_[3][8] + gridElements_[4][6] + gridElements_[4][7] + gridElements_[4][8] + gridElements_[5][6] + gridElements_[5][7] + gridElements_[5][8];\n        int square9 = gridElements_[6][6] + gridElements_[6][7] + gridElements_[6][8] + gridElements_[7][6] + gridElements_[7][7] + gridElements_[7][8] + gridElements_[8][6] + gridElements_[8][7] + gridElements_[8][8]; /*obsol\u00e8te */\n        if (square1 != 45)\n            return false;\n        if (square2 != 45)\n            return false;\n        if (square3 != 45)\n            return false;\n        if (square4 != 45)\n            return false;\n        if (square5 != 45)\n            return false;\n        if (square6 != 45)\n            return false;\n        if (square7 != 45)\n            return false;\n        if (square8 != 45)\n            return false;\n        if (square9 != 45)\n            return false;\n        return true;\n    }\n\n    // the size of each row/column\n    int linesize_;\n\n    // the 2d array\n    GridElements gridElements_;\n};\n\n\n\n\nint main(int argc, char** argv) {\n    // 9x9 grid\n    Grid grid(9);\n\n    // pretty sure this is mathematically guaranteed to always return true, assuming the algorithm is implemented correctly ;)\n    grid.fill(0, 0);\n\n    std::cout &lt;&lt; grid.to_s();\n    system(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2017", "visual-studio-debugging", "pdb-files"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1527081695, "post_id": 50489343, "comment_id": 87991883, "body": "Well apparently the new toolchain needs the object files, too."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1527082134, "post_id": 50489343, "comment_id": 87992220, "body": "@rustyx this would be far from practical, but in any case we just tried moving the <code>.obj</code> file next to the executable, and the error message doesn&#39;t change. VS definitely tries the one path, and bails out if it fails."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1527084320, "post_id": 50489343, "comment_id": 87993785, "body": "@rustyx That&#39;s not my experience.  I routinely delete my .obj files when I seal off a release and I can still debug the .exe, no problem.  Quentin, what do you mean by &#39;toolchain&#39;?  Are you referring to the platform toolset?  If so, I&#39;m using v141_xp, so if that works for your app you might try it."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1527085387, "post_id": 50489343, "comment_id": 87994515, "body": "@PaulSanders I am (<code>&lt;PlatformToolset&gt;v141&lt;&#47;PlatformToolset&gt;</code>). I just tried <code>v141_xp</code>: VS hallucinates an error about the source file being out-of-date, but once overriden everything works. Unfortunately I don&#39;t think switching to another toolchain altogether is possible, but this is certainly interesting."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1527086388, "post_id": 50489343, "comment_id": 87995270, "body": "Certainly is.  I&#39;m glad I found out about this.  I don&#39;t know if this is what you mean, but VS would / should rebuild your entire project when you switch platform toolset.  You&#39;re still using the same tool <i>chain</i> by the way.  That&#39;s the compiler, linker and whatever.  The platform tool <i>set</i> is the set of libraries you link against (which makes the behaviour you are seeing even more bizarre)."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1527086683, "post_id": 50489343, "comment_id": 87995482, "body": "@PaulSanders Switching between <code>v100</code> and <code>v141</code> definitely switches compilers, however it makes sense that switching to <code>v141_xp</code> only switches system libraries. The problem I have is that all of our projects here are using <code>v141</code> and can&#39;t be retargeted that easily (for organisational as well as technical reasons)."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1527090603, "post_id": 50489343, "comment_id": 87998188, "body": "My crystal ball says that the executable was linked with the /DEBUG:FASTLINK option.  Which links fast by leaving debug info in the intermediary files instead of trying to construct a clean PDB file.  Not an option you&#39;d ever need on a build server."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1527093133, "post_id": 50489343, "comment_id": 87999604, "body": "@Quentin: Ah yes, silly me, the ABI has changed since VS2010."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1527093382, "post_id": 50489343, "comment_id": 87999744, "body": "@HansPassant: close, so close, but not quite.  The change you need to make is Configuration Properties -&gt; Linker -&gt; Debugging -&gt; Generate Debug Info <b>Generate Debug Information optimized for sharing and publishing</b>.  That seems to do the trick.  The v141_xp thing was a red herring (and, fwiw, does use the same compiler).  Weirdly, my projects <i>are</i> using the FASTLINK option yet I don&#39;t have this problem."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1527095197, "post_id": 50489343, "comment_id": 88000624, "body": "@Quentin: Did you see the fix?  Looks good to me."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1527097988, "post_id": 50489343, "comment_id": 88001994, "body": "@PaulSanders this looks very promising, unfortunately(?) my workday ended and I&#39;m running linux over here... Be assured that I&#39;ll try that first thing tomorrow morning!"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1527149131, "post_id": 50489343, "comment_id": 88020402, "body": "@PaulSanders that was it! This is unbelievable... Would you mind making this an answer?"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1527150318, "post_id": 50489343, "comment_id": 88021019, "body": "Sure thing.  I know Hans posted a big clue but I did get there independently, God&#39;s honour."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1527150452, "post_id": 50489343, "comment_id": 88021089, "body": "@PaulSanders well just duel to the death to decide or something. I&#39;m off to raise goats and forget about that insane toolchain."}], "answers": [{"tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": true, "score": 7, "last_activity_date": 1555594045, "last_edit_date": 1555594045, "creation_date": 1527150984, "answer_id": 50504682, "question_id": 50489343, "link": "https://stackoverflow.com/questions/50489343/vs2017-blocking-on-non-existing-object-files-when-debugging-with-pdb-file/50504682#50504682", "title": "VS2017 blocking on non-existing object files when debugging with pdb file", "body": "<p>To fix this, make the following change in the property pages of the project(s) that build your executable(s) and DLL(s):</p>\n\n<p>Configuration Properties -> Linker -> Debugging -> Generate Debug Info -> <strong>Generate Debug Information optimized for sharing and publishing</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/bolen.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bolen.png\" alt=\"Visual Studio Property Page\"></a></p>\n\n<p>Static libraries, having no link step, don't need this.  .EXEs and DLLs do.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11896625, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-96G9gcTqRjM/AAAAAAAAAAI/AAAAAAAABxI/ngWEk_24_qc/photo.jpg?sz=128", "display_name": "Umakanta Singha", "link": "https://stackoverflow.com/users/11896625/umakanta-singha"}, "is_accepted": false, "score": 1, "last_activity_date": 1565188340, "creation_date": 1565188340, "answer_id": 57396808, "question_id": 50489343, "link": "https://stackoverflow.com/questions/50489343/vs2017-blocking-on-non-existing-object-files-when-debugging-with-pdb-file/57396808#57396808", "title": "VS2017 blocking on non-existing object files when debugging with pdb file", "body": "<p>When you specify /DEBUG with no additional options, the linker defaults to /DEBUG:FULL for command line and makefile builds, for release builds in the Visual Studio IDE, and for both debug and release builds in Visual Studio 2015 and earlier versions. Beginning in Visual Studio 2017, the build system in the IDE defaults to /DEBUG:FASTLINK when you specify the /DEBUG option for debug builds. Other defaults are unchanged to maintain backward compatibility. \nSource : <a href=\"https://developercommunity.visualstudio.com/content/problem/259283/error-unable-to-open-file-mainobj-error-code-0x800.html\" rel=\"nofollow noreferrer\">https://developercommunity.visualstudio.com/content/problem/259283/error-unable-to-open-file-mainobj-error-code-0x800.html</a></p>\n"}], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2307, "favorite_count": 1, "accepted_answer_id": 50504682, "answer_count": 2, "score": 6, "last_activity_date": 1565188340, "creation_date": 1527081083, "last_edit_date": 1527149525, "question_id": 50489343, "link": "https://stackoverflow.com/questions/50489343/vs2017-blocking-on-non-existing-object-files-when-debugging-with-pdb-file", "title": "VS2017 blocking on non-existing object files when debugging with pdb file", "body": "<p>We are in the process of switching Visual C++ projects to the vc141 toolchain (VS 2017). We have encountered a problem where Visual Studio is unable to use a <code>.pdb</code> file whose source <code>.obj</code> files don't exist anymore (for example because they have been compiled on a build server).</p>\n\n<p>Let's take a very simple executable project:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n    std::cout &lt;&lt; \"Hello world\\n\";\n    std::cin.ignore();\n}\n</code></pre>\n\n<p>The <code>.vcxproj</code> file is all default, except for <code>&lt;GenerateDebugInformation&gt;true&lt;/GenerateDebugInformation&gt;</code> to generate the pdb file.</p>\n\n<p>Reproduction steps are, always using VS2017:</p>\n\n<ul>\n<li>Compiling the project</li>\n<li>Placing a breakpoint inside <code>main</code></li>\n<li>Removing the intermediate <code>Debug/</code> directory containing the <code>.obj</code> files</li>\n<li>Disabling build-on-run through the configuration manager (so it won't recreate them)</li>\n<li>Starting a debug session</li>\n</ul>\n\n<p>This works fine with the vc100 (VS 2010) toolchain, and the breakpoint works, but it immediately triggers the following error with vc141:</p>\n\n<p><img src=\"https://i.stack.imgur.com/LhhsX.png\" alt=\"\"></p>\n\n<blockquote>\n  <p>Error: Unable to open file<br>\n  &lt;path&gt;\\Debug\\main.obj. Error code = 0x80070003.</p>\n</blockquote>\n\n<p>This very generic error code corresponds indeed to <code>FACILITY_WIN32/ERROR_PATH_NOT_FOUND</code>. The path to <code>main.obj</code> can be found inside both versions of the <code>.pdb</code> file, thus it is unclear to us why VS suddenly breaks down when it doesn't find it.</p>\n\n<p>The \"Modules\" view shows that the <code>.pdb</code> file seems to be loaded correctly. Additionally, the breakpoint's tooltip shows the following error:</p>\n\n<p><img src=\"https://i.stack.imgur.com/gOzzH.png\" alt=\"\"></p>\n\n<blockquote>\n  <p>The breakpoint will not currently be hit. Unexpected symbol reader error while processing MyUser_141.exe.</p>\n</blockquote>\n\n<p>What could be a solution or a workaround for this problem, given that we cannot debug on the machine that compiles the binaries in our real-case application?</p>\n\n<p>Here is the full <code>.vcxproj</code> file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;Project DefaultTargets=\"Build\" ToolsVersion=\"15.0\" xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\"&gt;\n  &lt;ItemGroup Label=\"ProjectConfigurations\"&gt;\n    &lt;ProjectConfiguration Include=\"Debug|Win32\"&gt;\n      &lt;Configuration&gt;Debug&lt;/Configuration&gt;\n      &lt;Platform&gt;Win32&lt;/Platform&gt;\n    &lt;/ProjectConfiguration&gt;\n  &lt;/ItemGroup&gt;\n  &lt;PropertyGroup Label=\"Globals\"&gt;\n    &lt;VCProjectVersion&gt;15.0&lt;/VCProjectVersion&gt;\n    &lt;RootNamespace&gt;MyUser_141&lt;/RootNamespace&gt;\n    &lt;WindowsTargetPlatformVersion&gt;10.0.17134.0&lt;/WindowsTargetPlatformVersion&gt;\n    &lt;ProjectGuid&gt;{90982029-29B8-4C9B-AFB7-B8F555F15C1E}&lt;/ProjectGuid&gt;\n  &lt;/PropertyGroup&gt;\n  &lt;Import Project=\"$(VCTargetsPath)\\Microsoft.Cpp.Default.props\" /&gt;\n  &lt;PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Debug|Win32'\" Label=\"Configuration\"&gt;\n    &lt;ConfigurationType&gt;Application&lt;/ConfigurationType&gt;\n    &lt;UseDebugLibraries&gt;true&lt;/UseDebugLibraries&gt;\n    &lt;PlatformToolset&gt;v141&lt;/PlatformToolset&gt;\n    &lt;CharacterSet&gt;MultiByte&lt;/CharacterSet&gt;\n  &lt;/PropertyGroup&gt;\n  &lt;Import Project=\"$(VCTargetsPath)\\Microsoft.Cpp.props\" /&gt;\n  &lt;ImportGroup Label=\"ExtensionSettings\"&gt;\n  &lt;/ImportGroup&gt;\n  &lt;ImportGroup Label=\"Shared\"&gt;\n  &lt;/ImportGroup&gt;\n  &lt;ImportGroup Label=\"PropertySheets\" Condition=\"'$(Configuration)|$(Platform)'=='Debug|Win32'\"&gt;\n    &lt;Import Project=\"$(UserRootDir)\\Microsoft.Cpp.$(Platform).user.props\" Condition=\"exists('$(UserRootDir)\\Microsoft.Cpp.$(Platform).user.props')\" Label=\"LocalAppDataPlatform\" /&gt;\n  &lt;/ImportGroup&gt;\n  &lt;PropertyGroup Label=\"UserMacros\" /&gt;\n  &lt;ItemDefinitionGroup Condition=\"'$(Configuration)|$(Platform)'=='Debug|Win32'\"&gt;\n    &lt;Link&gt;\n      &lt;GenerateDebugInformation&gt;true&lt;/GenerateDebugInformation&gt;\n    &lt;/Link&gt;\n  &lt;/ItemDefinitionGroup&gt;\n  &lt;ItemGroup&gt;\n    &lt;ClCompile Include=\"main.cpp\" /&gt;\n  &lt;/ItemGroup&gt;\n  &lt;Import Project=\"$(VCTargetsPath)\\Microsoft.Cpp.targets\" /&gt;\n  &lt;ImportGroup Label=\"ExtensionTargets\"&gt;\n  &lt;/ImportGroup&gt;\n&lt;/Project&gt;\n</code></pre>\n\n<hr>\n\n<h3>Further research:</h3>\n\n<ul>\n<li><p>We tried some other toolchain versions. The bug is not present in v14.0 (VS 2015), but is present as soon as 14.11 (VS2017 15.3).</p></li>\n<li><p>Using <code>v141_xp</code>, which as far as we can tell uses the same toolchain but older system libraries, <em>works</em>.</p></li>\n</ul>\n"}, {"tags": ["c++", "class", "c++11", "constructor", "stdinitializerlist"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 5, "creation_date": 1527080927, "post_id": 50489257, "comment_id": 87991346, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/list_initialization</a>"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 3, "creation_date": 1527081030, "post_id": 50489257, "comment_id": 87991420, "body": "Write a ctor accepting <code>std::initializer_list</code> as  an argument."}, {"owner": {"reputation": 173, "user_id": 5582368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ebe3d29bc9995cc2fa59c0c14c223b6?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/5582368/markus"}, "edited": false, "score": 1, "creation_date": 1527081078, "post_id": 50489257, "comment_id": 87991446, "body": "I think, that&#39;s it, thanks, I didn&#39;t knew the word list_initialization, so I couldn&#39;t find it."}], "answers": [{"tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": true, "score": 10, "last_activity_date": 1558302231, "last_edit_date": 1558302231, "creation_date": 1527081103, "answer_id": 50489350, "question_id": 50489257, "link": "https://stackoverflow.com/questions/50489257/constructor-using-a-b-c-as-argument-or-what-is-a-b-c-actually-doing/50489350#50489350", "title": "Constructor using {a,b,c} as argument or what is {a,b,c} actually doing?", "body": "<p>It is called <em><a href=\"http://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">list initialization</a></em> and you need a <em><a href=\"http://en.cppreference.com/w/cpp/utility/initializer_list\" rel=\"nofollow noreferrer\">std::initilizer_list</a></em> constructor, that to be achieved in your <code>my_class</code>. </p>\n\n<p>See <strong>(<a href=\"https://wandbox.org/permlink/EwL2xSbscN7Y5Sii\" rel=\"nofollow noreferrer\">Live Demo</a>)</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;initializer_list&gt; // std::initializer_list\n\nclass my_class\n{\n    std::vector&lt;int&gt; A;\npublic:\n    // std::initilizer_list constructor \n    my_class(const std::initializer_list&lt;int&gt; v) : A(v) {}    \n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const my_class&amp; obj) /* noexcept */;\n};\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const my_class&amp; obj) /* noexcept */\n{\n    for(const int it: obj.A) out &lt;&lt; it &lt;&lt; \" \";\n    return out;\n}\n\nint main()\n{\n    my_class obj = {1,2,3,4};  // now possible\n    std::cout &lt;&lt; obj &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1527082176, "post_id": 50489416, "comment_id": 87992259, "body": "is there a need for a copy constructor?"}, {"owner": {"reputation": 1240, "user_id": 5317459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd9f6135b6a4aac6f1947ba02adabafc?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Jha", "link": "https://stackoverflow.com/users/5317459/sumit-jha"}, "reply_to_user": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1527083265, "post_id": 50489416, "comment_id": 87993072, "body": "Yes it is required. <code>Q(Q const&amp;) = delete;</code> will through error at compile time <code>initializer-list constructor (not copy constructor)</code>."}], "tags": [], "owner": {"reputation": 1240, "user_id": 5317459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd9f6135b6a4aac6f1947ba02adabafc?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Jha", "link": "https://stackoverflow.com/users/5317459/sumit-jha"}, "is_accepted": false, "score": 3, "last_activity_date": 1527081288, "creation_date": 1527081288, "answer_id": 50489416, "question_id": 50489257, "link": "https://stackoverflow.com/questions/50489257/constructor-using-a-b-c-as-argument-or-what-is-a-b-c-actually-doing/50489416#50489416", "title": "Constructor using {a,b,c} as argument or what is {a,b,c} actually doing?", "body": "<p>You can use <a href=\"http://en.cppreference.com/w/cpp/utility/initializer_list\" rel=\"nofollow noreferrer\">initializer_list</a> in the constructor to have such option.</p>\n\n<pre><code>struct X {\n    X() = default;\n    X(const X&amp;) = default;\n};\n\nstruct Q {\n    Q() = default;\n    Q(Q const&amp;) = default;\n    Q(std::initializer_list&lt;Q&gt;) {}\n};\n\nint main() {\n  X x;\n  X x2 = X { x }; // copy-constructor (not aggregate initialization)\n  Q q;\n  Q q2 = Q { q }; // initializer-list constructor (not copy constructor)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "is_accepted": false, "score": 3, "last_activity_date": 1527085704, "last_edit_date": 1527085704, "creation_date": 1527081413, "answer_id": 50489457, "question_id": 50489257, "link": "https://stackoverflow.com/questions/50489257/constructor-using-a-b-c-as-argument-or-what-is-a-b-c-actually-doing/50489457#50489457", "title": "Constructor using {a,b,c} as argument or what is {a,b,c} actually doing?", "body": "<blockquote>\n  <p>how is it possible?</p>\n</blockquote>\n\n<p>If you have an initializer list.</p>\n\n<pre><code>#include  &lt;initializer_\u00adlist&gt; // use std::initializer_list template\nmy_class(const std::initializer_list&lt;int&gt;&amp; v) : A(v) {}\n</code></pre>\n\n<blockquote>\n  <p>What is this statement \"{{1, 2}, {3, 4}}\" actually doing?</p>\n</blockquote>\n\n<p>This is called <a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.init#17.1\" rel=\"nofollow noreferrer\"><code>list-initialization</code></a></p>\n\n<blockquote>\n  <p>If the initializer is a (non-parenthesized) <em>braced-init-list</em> or is <code>=</code>\n  <em>braced-init-list</em>, the object or reference is <em>list-initialized</em>.</p>\n</blockquote>\n"}], "owner": {"reputation": 173, "user_id": 5582368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ebe3d29bc9995cc2fa59c0c14c223b6?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/5582368/markus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 2, "accepted_answer_id": 50489350, "answer_count": 3, "score": 6, "last_activity_date": 1558302231, "creation_date": 1527080830, "last_edit_date": 1557603987, "question_id": 50489257, "link": "https://stackoverflow.com/questions/50489257/constructor-using-a-b-c-as-argument-or-what-is-a-b-c-actually-doing", "title": "Constructor using {a,b,c} as argument or what is {a,b,c} actually doing?", "body": "<p>I know, that I can initialize data like this.</p>\n\n<pre><code>int array[3] = { 1, 2, 3 };\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>int array[2][2] = { {1, 2}, {3, 4} };\n</code></pre>\n\n<p>I can also do it with <code>std::vector</code></p>\n\n<pre><code>std::vector&lt;int&gt; A = { 1, 2, 3 };\n</code></pre>\n\n<p>Let's say I want to write my own class:</p>\n\n<pre><code>class my_class\n{\n     std::vector&lt; int &gt; A;\n     public:\n     //pseudo code\n           my_class(*x) { store x in A;} //with x={ {1, 2}, {3, 4} }\n     // do something\n};\n</code></pre>\n\n<p>Is it possible to write such a constructor and how is it possible? What is this statement </p>\n\n<p><code>{{1, 2}, {3, 4}}</code> actually doing?</p>\n\n<p>I always just find, that you can initialize data in this way, but never what it is doing precisely. </p>\n"}, {"tags": ["c++", "linux", "g++", "c++17"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527082126, "post_id": 50489239, "comment_id": 87992210, "body": "Note that <code>&quot;abc&quot;</code> can have different address than (an other) <code>&quot;abc&quot;</code>."}, {"owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527082508, "post_id": 50489239, "comment_id": 87992507, "body": "I am okay with different addresses even though the contents are exactly the same.  Thanks for pointing out :)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1527082647, "post_id": 50489239, "comment_id": 87992618, "body": "You might create <code>operator &quot;&quot;_some_suffix</code> to register static c-string manually."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1527084361, "post_id": 50489239, "comment_id": 87993806, "body": "There are no facilities in C++ to gather all the strings; this is an implementation issue.  Your compiler <i>may</i> have some API for this or command line switches or <code>pragma</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1527084410, "post_id": 50489239, "comment_id": 87993837, "body": "Many projects use a database of strings.  This is very useful when having to present text in different languages."}, {"owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "edited": false, "score": 0, "creation_date": 1527085564, "post_id": 50489239, "comment_id": 87994649, "body": "Any idea about GCC in particular?"}, {"owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1528178785, "post_id": 50489239, "comment_id": 88395631, "body": "@Jarod42  Thanks for your suggestion.  It is very close to what I want but apparently, the &quot;registration&quot; is done whenever operator&quot;&quot; is called, and for the same C string (with same memory address), it gets called multiple times if the string appears in multiple places.  Thanks for mentioning this operator, learning something new and useful!"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1528243108, "post_id": 50489239, "comment_id": 88429992, "body": "@HCSF: Provided solution exposing my suggestion, with only one registration by similar string."}], "answers": [{"comments": [{"owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "edited": false, "score": 0, "creation_date": 1528179090, "post_id": 50491164, "comment_id": 88395787, "body": "thanks for your answer.  Technically, your answer is indeed the right answer -- no way to do so at compile time (so I realized I asked a dumb question).  If you don&#39;t mind, I would like to expand the question a bit -- when foo() is called, is it possible to map bar to the corresponding address of its entry in .rodata in a very fast manner (e.g. less than 10 ns)?  I know I can parse .rodata into a map (e.g. std::unordered_map, std::map) and then look up the map when foo() is called but it seems quit slow."}, {"owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "edited": false, "score": 0, "creation_date": 1528181115, "post_id": 50491164, "comment_id": 88396752, "body": "Actually playing around more with readelf more.  It seems like the runtime (virtual) memory address of each static C string is the beginning memory address of .rodata section + the offset stated in readelf -W -p .rodata output.  Am I right?"}, {"owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "edited": false, "score": 0, "creation_date": 1528209088, "post_id": 50491164, "comment_id": 88414641, "body": "I also noticed some function names also are part of .rodata.  Anyway to filter them out?  Thanks in advance!"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1527086209, "creation_date": 1527086209, "answer_id": 50491164, "question_id": 50489239, "link": "https://stackoverflow.com/questions/50489239/gather-addresses-of-all-static-c-strings-at-compile-time/50491164#50491164", "title": "Gather Addresses of all Static C Strings at Compile Time", "body": "<blockquote>\n  <p>Is it possible to gather addresses of all static strings that are known at compile time in <code>main()</code>?</p>\n</blockquote>\n\n<p>At compile time strings from other translation units are unavailable.</p>\n\n<p>You can dump string literals from your executable or shared library using <code>readelf -W -p .rodata &lt;executable&gt;</code> command. </p>\n"}, {"comments": [{"owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "edited": false, "score": 0, "creation_date": 1528265393, "post_id": 50710495, "comment_id": 88435306, "body": "I actually came up something similar but ugly (using a macro to create a scope with a local static variable to track whether it has been called once and without literal operator template).  Your solution is very elegant.  Taking advantage that local static variable will only be assigned once and so Register() won&#39;t be called again, it is a very smart trick!"}, {"owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "edited": false, "score": 0, "creation_date": 1528265560, "post_id": 50710495, "comment_id": 88435371, "body": "FYI, it seems like C++17 includes literal operator template as I think GCC used to print warning when it is used.  Now with -std=c++17, it doesn&#39;t emit such warning."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1528242990, "creation_date": 1528242990, "answer_id": 50710495, "question_id": 50489239, "link": "https://stackoverflow.com/questions/50489239/gather-addresses-of-all-static-c-strings-at-compile-time/50710495#50710495", "title": "Gather Addresses of all Static C Strings at Compile Time", "body": "<p>If you agree to use registration, you might do something like</p>\n\n<pre><code>// Would contain each registered string.\nstd::vector&lt;const char*&gt;&amp; registered_vector()\n{\n    static std::vector&lt;const char*&gt; v;\n    return v;\n}\n\nbool Register(const char* s)\n{\n    registered_vector().push_back(s);\n    return true;\n}\n\n// Class which holds the unique pointer as buffer.\ntemplate &lt;typename Char, Char... Cs&gt;\nstruct static_string\n{\n    static constexpr Char s[] = {Cs..., 0};\n};\n\ntemplate &lt;typename Char, Char... Cs&gt;\nconstexpr Char static_string&lt;Char, Cs...&gt;::s[];\n\n// string literal operator templates are a GNU extension\n// MACRO can replace the operator to avoid that extension.\ntemplate &lt;typename Char, Char... Cs&gt;\nstatic_string&lt;Char, Cs...&gt; operator \"\"_ss()\n{\n    static_string&lt;Char, Cs...&gt; res;\n    static const bool dummy = Register(res.s); // Register only once :-)\n    static_cast&lt;void&gt;(dummy); // Avoid warning for unused variable\n    return res;\n}\n</code></pre>\n\n<p>And now, test it:</p>\n\n<pre><code>int main() {\n    \"Hello\"_ss;\n    \"World\"_ss;\n    \"Hello\"_ss;\n    \"Hi\"_ss;\n    \"42\"_ss;\n\n    for (const auto s : registered_vector()) {\n        std::cout &lt;&lt; s &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b84a121638dd7580\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 1592, "user_id": 9784373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "HCSF", "link": "https://stackoverflow.com/users/9784373/hcsf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 1, "accepted_answer_id": 50710495, "answer_count": 2, "score": 2, "last_activity_date": 1528242990, "creation_date": 1527080789, "last_edit_date": 1527082064, "question_id": 50489239, "link": "https://stackoverflow.com/questions/50489239/gather-addresses-of-all-static-c-strings-at-compile-time", "title": "Gather Addresses of all Static C Strings at Compile Time", "body": "<p>Let's say I have a function like</p>\n\n<pre><code>void foo(const char* bar, ...)\n</code></pre>\n\n<p>And it has been called in multiple places.</p>\n\n<p>Is it possible to gather addresses of all static strings that are known at compile time in <code>main()</code>?</p>\n\n<p>For example, <code>foo(\"abc\")</code>, I want in <code>main()</code> to be able to get the address of <code>\"abc\"</code>.  If someone calls <code>foo(someVariable)</code>, the address of <code>someVariable</code> might not be known, and so it can be ignored.</p>\n\n<p>Is it possible?</p>\n"}]