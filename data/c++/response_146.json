[{"tags": ["c++", "boost", "compiler-errors", "boost-filesystem"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1508975938, "post_id": 46943780, "comment_id": 80835022, "body": "Does this file exist in your boost\\stage\\lib folder?"}, {"owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 0, "creation_date": 1508977241, "post_id": 46943780, "comment_id": 80835333, "body": "Take a look at the &quot;command line&quot; category of those settings.  There you will see every single library include folder that your link references.  Verify that the library is in one of them"}, {"owner": {"reputation": 55, "user_id": 6918664, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a353819c30c3d4a4c9ac47c737980e32?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/6918664/adam"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1508977832, "post_id": 46943780, "comment_id": 80835464, "body": "@tkausl The file does exist in the folder."}, {"owner": {"reputation": 55, "user_id": 6918664, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a353819c30c3d4a4c9ac47c737980e32?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/6918664/adam"}, "reply_to_user": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 0, "creation_date": 1508977892, "post_id": 46943780, "comment_id": 80835477, "body": "@Joe Also the command line category shows the following &quot;/ERRORREPORT:PROMPT /NOLOGO /LIBPATH:&quot;C:\\Users\\skudt\\source\\boost_1_65_1\\stage\\lib&quot; /TLBID:1&quot;"}, {"owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 0, "creation_date": 1509036515, "post_id": 46943780, "comment_id": 80866812, "body": "OK, well then the lib you&#39;re looking for must not be there (in c:\\users\\skudt\\source\\boost_1_64\\stage\\lib) because the linker isn&#39;t finding it.  And it&#39;s not being found anywhere else.  Next step is to change the linker settings to be as verbose as possible.  This will show you (if you have the patience to read it all) every single path the linker searches for link libraries."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6109330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edabaa0ed06f3d0380040a4ee15513a0?s=128&d=identicon&r=PG&f=1", "display_name": "Proxenus", "link": "https://stackoverflow.com/users/6109330/proxenus"}, "is_accepted": false, "score": 3, "last_activity_date": 1519667468, "creation_date": 1519667468, "answer_id": 48994267, "question_id": 46943780, "link": "https://stackoverflow.com/questions/46943780/error-lnk1104-cannot-open-file-libboost-filesystem-vc141-mt-gd-1-65-1-lib/48994267#48994267", "title": "Error LNK1104 cannot open file &#39;libboost_filesystem-vc141-mt-gd-1_65_1.lib&#39;", "body": "<p>the most common causes of this error are:</p>\n\n<p>1- Architecture. \n      The .lib is x64 and the build is 32 bits or viceversa (.libs are 32 and build is x64). </p>\n\n<p>2- Path to the files. \n      Check the boost path is the same. \n      If you are using the precompiled libraries the path is similar to \n       .....\\boost_1_65_1\\lib64-msvc-14.1 \n      But if you have compiled, it will be like stage\\lib. \n      Search for it in the explorer and cut and paste the path. </p>\n\n<p>Regards</p>\n"}, {"comments": [{"owner": {"reputation": 557, "user_id": 11503182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GixIj.jpg?s=128&g=1", "display_name": "Nguy\u1ec5n \u0110\u1ee9c T&#226;m", "link": "https://stackoverflow.com/users/11503182/nguy%e1%bb%85n-%c4%90%e1%bb%a9c-t%c3%a2m"}, "edited": false, "score": 0, "creation_date": 1575867294, "post_id": 50588262, "comment_id": 104696340, "body": "The boost-binaries are the full library after you run the b2.exe right?"}], "tags": [], "owner": {"reputation": 101, "user_id": 3356699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f285eacd9bbc1de901bd60b8341e176?s=128&d=identicon&r=PG&f=1", "display_name": "Kokeb", "link": "https://stackoverflow.com/users/3356699/kokeb"}, "is_accepted": false, "score": 0, "last_activity_date": 1579540152, "last_edit_date": 1579540152, "creation_date": 1527608645, "answer_id": 50588262, "question_id": 46943780, "link": "https://stackoverflow.com/questions/46943780/error-lnk1104-cannot-open-file-libboost-filesystem-vc141-mt-gd-1-65-1-lib/50588262#50588262", "title": "Error LNK1104 cannot open file &#39;libboost_filesystem-vc141-mt-gd-1_65_1.lib&#39;", "body": "<p>I was getting similar errors after installing the pre-build boost using <strong>boost_1_67_0-msvc-14.0-64.exe</strong> (downloaded from  <a href=\"https://sourceforge.net/projects/boost/files/boost-binaries/1.67.0/\" rel=\"nofollow noreferrer\">https://sourceforge.net/projects/boost/files/boost-binaries/1.67.0/</a>). It turns out that pre-build (14.0) has lib naming issues like referencing files with names containing the string \"-vc141-\" in them instead of \"-vc140-\".</p>\n\n<p>I abandoned that and used the installer <strong>boost_1_67_0-msvc-14.1-64.exe</strong> (note the msvc14.1). All the issues I was seeing are gone now.</p>\n"}, {"tags": [], "owner": {"reputation": 163, "user_id": 2202981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dea29b9aec281b7e637e8f866c417af?s=128&d=identicon&r=PG", "display_name": "Csuszmusz", "link": "https://stackoverflow.com/users/2202981/csuszmusz"}, "is_accepted": false, "score": 0, "last_activity_date": 1591693299, "creation_date": 1591693299, "answer_id": 62278809, "question_id": 46943780, "link": "https://stackoverflow.com/questions/46943780/error-lnk1104-cannot-open-file-libboost-filesystem-vc141-mt-gd-1-65-1-lib/62278809#62278809", "title": "Error LNK1104 cannot open file &#39;libboost_filesystem-vc141-mt-gd-1_65_1.lib&#39;", "body": "<p>Its because the configured platform toolset differs from the library that you want to use.\nYou can set it easily in visual studio '19 under the following setting: Configuration Properties -> General -> Platform Toolset and select the one you want to use. </p>\n\n<p>e.g.:\n<a href=\"https://i.stack.imgur.com/VYIGR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VYIGR.png\" alt=\"PlatformToolset\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 14721249, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/7d9340fc23e17830847d5096428328fa?s=128&d=identicon&r=PG", "display_name": "James Reboulet", "link": "https://stackoverflow.com/users/14721249/james-reboulet"}, "is_accepted": false, "score": 2, "last_activity_date": 1606503090, "creation_date": 1606503090, "answer_id": 65042446, "question_id": 46943780, "link": "https://stackoverflow.com/questions/46943780/error-lnk1104-cannot-open-file-libboost-filesystem-vc141-mt-gd-1-65-1-lib/65042446#65042446", "title": "Error LNK1104 cannot open file &#39;libboost_filesystem-vc141-mt-gd-1_65_1.lib&#39;", "body": "<p>Make sure you add the &quot;&lt;location of boost installation directory, where ever it was extracted&gt;\\stage\\lib&quot; to the linker library include path in the Visual Studio Debug Properties for the project.  If you install boost via the Command Prompt by first running the bootstap.bat batch file followed by b2.exe , when the compiling process is complete, a message will be displayed instructing you to add that path, so the linker doesn't get confused when it looks for it.</p>\n"}], "owner": {"reputation": 55, "user_id": 6918664, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a353819c30c3d4a4c9ac47c737980e32?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/6918664/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9272, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1606503090, "creation_date": 1508975835, "question_id": 46943780, "link": "https://stackoverflow.com/questions/46943780/error-lnk1104-cannot-open-file-libboost-filesystem-vc141-mt-gd-1-65-1-lib", "title": "Error LNK1104 cannot open file &#39;libboost_filesystem-vc141-mt-gd-1_65_1.lib&#39;", "body": "<p>I cannot seem to solve this issue. I would like to use boost but continue to get the error LNK1104 cannot open file 'libboost_filesystem-vs141-mt-gd-1_65_1.lib'. I have followed the steps i.e: \n1. Running the bat \n2. Running the b2 (originally bjam)\n3. Linked the files.\nAfter receiving the error I did digging and have changed a few other things. See images below for a better understanding of what I have completed<a href=\"https://i.stack.imgur.com/vD5sl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vD5sl.png\" alt=\"This is the VC++ where I added the boost_path\"></a>.<a href=\"https://i.stack.imgur.com/Inwgk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Inwgk.png\" alt=\"This is the linker\"></a></p>\n\n<p>I appreciate all answers in the future, and thank you for taking the time.</p>\n"}, {"tags": ["javascript", "c++", "arrays", "emscripten"], "answers": [{"tags": [], "owner": {"reputation": 1813, "user_id": 1514010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BLtSx.png?s=128&g=1", "display_name": "zakki", "link": "https://stackoverflow.com/users/1514010/zakki"}, "is_accepted": false, "score": 2, "last_activity_date": 1509631783, "creation_date": 1509631783, "answer_id": 47077346, "question_id": 46943653, "link": "https://stackoverflow.com/questions/46943653/how-to-pass-char-array-to-emscripten-compiled-code/47077346#47077346", "title": "How to pass char* array to emscripten compiled code?", "body": "<p>We can convert <code>strArr</code> to <code>char**</code> JavaScript side. But if you modify c++ code, Embind would be better.</p>\n\n<pre><code>var myFunc = Module.cwrap('myFunc', 'number', ['string', 'number', 'number']);\n\nRuntime.stackSave();\nvar strArr = ['abc', 'def', 'ghi', 'jkl'];\nvar ptrArr = Runtime.stackAlloc(strArr.length * 4);\nfor (var i = 0; i &lt; strArr.length; i++) {\n    var len = strArr[i].length + 1;\n    var ptr = Runtime.stackAlloc(len);\n    stringToUTF8(strArr[i], ptr, len);\n    Module.setValue(ptrArr + i * 4, ptr, \"i32\");\n}\nvar rst = myFunc('abc', ptrArr, 1);\nRuntime.stackRestore();\n</code></pre>\n"}], "owner": {"reputation": 6658, "user_id": 3697757, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/0aQ16.jpg?s=128&g=1", "display_name": "hackjutsu", "link": "https://stackoverflow.com/users/3697757/hackjutsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1379, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1509631783, "creation_date": 1508974844, "last_edit_date": 1508975855, "question_id": 46943653, "link": "https://stackoverflow.com/questions/46943653/how-to-pass-char-array-to-emscripten-compiled-code", "title": "How to pass char* array to emscripten compiled code?", "body": "<p>I'm trying to pass a <code>char*</code> array to the Emscripten compiled function, and haven't figured out how to do it properly.</p>\n\n<p>All the examples(<a href=\"http://kapadia.github.io/emscripten/2013/09/13/emscripten-pointers-and-pointers.html\" rel=\"nofollow noreferrer\">here</a>, and <a href=\"http://www.bluemathsoftware.com/3_emscripten/2017/05/31/how-to-emscripten-c-function-array-argument.html\" rel=\"nofollow noreferrer\">here</a>) I found so far are about passing number array which however cannot be applied to <code>char*</code> array directly. The <a href=\"http://kripken.github.io/emscripten-site/docs/porting/connecting_cpp_and_javascript/Interacting-with-code.html\" rel=\"nofollow noreferrer\">Emscripten docs</a> mentions that a <strong>typed array</strong> has to be <code>Unit8Array</code> or <code>Int8Array</code>. </p>\n\n<blockquote>\n  <p>the third is an array of parameter types...\u201carray\u201d (for a JavaScript array or typed array that corresponds to\n  a C array; for typed arrays, it must be a Uint8Array or Int8Array)...</p>\n</blockquote>\n\n<p>Does it mean we need to convert the string array into either of these formats and revert it back on C++ side? And, what's the difference between a JS array and a typed array? I don't think a number array needs this explicit conversion.</p>\n\n<p><strong>JS code:</strong></p>\n\n<pre><code>var myFunc = Module.cwrap('myFunc', 'number', ['string', 'array', 'number']);\nvar strArr = ['abc', 'def', 'ghi', 'jkl'];\nvar rst = myFunc('abc', strArr, 0);\n</code></pre>\n\n<p><strong>C++ code:</strong></p>\n\n<pre><code>int myFunc(char* str, char** strArr, int i) {\n  std::cout &lt;&lt; \"[C++] The i is \" &lt;&lt; i &lt;&lt; std::endl; // 0\n  std::cout &lt;&lt; \"[C++] The str is \" &lt;&lt; str &lt;&lt; std::endl; // abc\n  std::cout &lt;&lt; \"[C++] The strArr[i] is \" &lt;&lt; strArr[i] &lt;&lt; std::endl; // not 'abc' ??\n  return strcmp(str, strArr[i]);\n}\n</code></pre>\n"}, {"tags": ["c++", "identifier"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1508975212, "post_id": 46943651, "comment_id": 80834834, "body": "What is the return type <code>const void</code>?  The <code>void</code> return type means that the function doesn&#39;t return a value.  How does <code>const</code> apply to a value that is not returned?  Maybe you want to place the <code>const</code> afterwards:  <code>void write(std::ostream&amp; output) const;</code>?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1508975406, "post_id": 46943651, "comment_id": 80834879, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20981540/a-method-cant-access-a-member-variable-of-the-same-class-c\">A method can&#39;t access a member variable of the same class (C++)</a>"}, {"owner": {"reputation": 83, "user_id": 4512389, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c09575b2d70168cd7bda5c8cc8004da?s=128&d=identicon&r=PG&f=1", "display_name": "Scanner", "link": "https://stackoverflow.com/users/4512389/scanner"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1508977570, "post_id": 46943651, "comment_id": 80835396, "body": "@ThomasMatthews what does the const at the end mean?  What I am trying to achieve is to write a function which uses the ostream reference to call write on the root. With write being marked as a const."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1508978532, "post_id": 46943651, "comment_id": 80835622, "body": "The <code>const</code> at the end of a method means that the method will not write to any of the class members."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1508980083, "post_id": 46943651, "comment_id": 80835956, "body": "&quot;Use of undeclared identifier for root&quot;: is that what it really says? Doesn&#39;t make sense. Sure it isn&#39;t &quot;Use of undeclared identifier: root&quot;? Be accurate."}, {"owner": {"reputation": 83, "user_id": 4512389, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c09575b2d70168cd7bda5c8cc8004da?s=128&d=identicon&r=PG&f=1", "display_name": "Scanner", "link": "https://stackoverflow.com/users/4512389/scanner"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1508980676, "post_id": 46943651, "comment_id": 80836100, "body": "@ThomasMatthews interesting. never knew that!"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4512389, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c09575b2d70168cd7bda5c8cc8004da?s=128&d=identicon&r=PG&f=1", "display_name": "Scanner", "link": "https://stackoverflow.com/users/4512389/scanner"}, "edited": false, "score": 0, "creation_date": 1508975744, "post_id": 46943686, "comment_id": 80834968, "body": "It tells me when I do that X is not a class, namespace, or enumeration"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 83, "user_id": 4512389, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c09575b2d70168cd7bda5c8cc8004da?s=128&d=identicon&r=PG&f=1", "display_name": "Scanner", "link": "https://stackoverflow.com/users/4512389/scanner"}, "edited": false, "score": 0, "creation_date": 1508975993, "post_id": 46943686, "comment_id": 80835035, "body": "@Scanner Is the definition of <code>write</code> after the definition of <code>X</code> and in the same file? Or after an <code>#include</code> of the file containing the definition of <code>X</code>?"}, {"owner": {"reputation": 83, "user_id": 4512389, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c09575b2d70168cd7bda5c8cc8004da?s=128&d=identicon&r=PG&f=1", "display_name": "Scanner", "link": "https://stackoverflow.com/users/4512389/scanner"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1508976160, "post_id": 46943686, "comment_id": 80835084, "body": "@aschepler the definition of write is after the definition of X and in the same file. They are all under a template&lt;typename T&gt;. The write has been declared under public in the class as const void write(std::ostream &amp; output);"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 83, "user_id": 4512389, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c09575b2d70168cd7bda5c8cc8004da?s=128&d=identicon&r=PG&f=1", "display_name": "Scanner", "link": "https://stackoverflow.com/users/4512389/scanner"}, "edited": false, "score": 1, "creation_date": 1508976262, "post_id": 46943686, "comment_id": 80835115, "body": "@Scanner The template parameter is very likely relevant to your problem. You can edit your question to show exactly what you mean."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1508979063, "last_edit_date": 1508979063, "creation_date": 1508975118, "answer_id": 46943686, "question_id": 46943651, "link": "https://stackoverflow.com/questions/46943651/trouble-with-identifying-why-the-ide-is-saying-undeclared-identifier-in-c/46943686#46943686", "title": "Trouble with identifying why the IDE is saying undeclared identifier in C++", "body": "<p>Try using the scope resolution operator to tell the compiler that your <code>write</code> function belongs to <code>class X</code>:</p>\n\n<pre><code>const void X::write(std::ostream &amp; output)\n{\n    root-&gt;write(output);\n}\n</code></pre>\n\n<p><strong>Edit 1: templates</strong><br>\nWith templates, the syntax becomes:</p>\n\n<pre><code>template&lt;typename T&gt;\nconst void\nX&lt;T&gt;::write(std::ostream &amp; output)\n{\n    root-&gt;write(output);\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4512389, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c09575b2d70168cd7bda5c8cc8004da?s=128&d=identicon&r=PG&f=1", "display_name": "Scanner", "link": "https://stackoverflow.com/users/4512389/scanner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1508979063, "creation_date": 1508974842, "last_edit_date": 1508977428, "question_id": 46943651, "link": "https://stackoverflow.com/questions/46943651/trouble-with-identifying-why-the-ide-is-saying-undeclared-identifier-in-c", "title": "Trouble with identifying why the IDE is saying undeclared identifier in C++", "body": "<p>I have a class at the moment with these lines of code. What I am struggling with is the function write in that my IDE says \"Use of undeclared identifier for root\"</p>\n\n<p>Why is this?</p>\n\n<pre><code>template&lt;typename T&gt;\n    class X\n    {\n    public:\n        const void write(std::ostream &amp; output);\n\n    private:\n        std::unique_ptr&lt; TreeNode&lt;Ty&gt; &gt; root;\n\n\n    };\n\n\n    const void write(std::ostream &amp; output)\n    {\n        root-&gt;write(output);\n    }\n</code></pre>\n\n<p>Edit to show more full extent of the code with the Template.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1508974945, "post_id": 46943626, "comment_id": 80834763, "body": "What type is <code>Y</code>? What type is <code>iter</code>? How does <code>if (Y != iter)</code> even compiling? Also lastly, to populate your map, you can use: <code>myMap[iter] = 1;</code>"}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1508975562, "post_id": 46943626, "comment_id": 80834923, "body": "hi Scohe001! Y is a set with some integer value! itter is in loop if you see the first line of my code you will see what is itter!"}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1508975819, "post_id": 46943626, "comment_id": 80834988, "body": "I wanna make one of the element of my set equal 1 and rest of elements equal 0!"}], "answers": [{"comments": [{"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1508976413, "post_id": 46943828, "comment_id": 80835161, "body": "dear @Scohe001 I appreciate for your answer! thanks for your time! this is what I wanna do: I have a set with integer value! I want to make one of the elements equal 1 and other elements equal 0! and I want to repeat this for all elements of the set! I mean all element of the set should map to 1 for one time!how I can do that? I used map function and this is a part of my code! Y is a set! but there are some error"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1508976482, "post_id": 46943828, "comment_id": 80835168, "body": "@sherek_66 I&#39;m not sure what you mean...can you give me some example input and what the output should be?"}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1508976731, "post_id": 46943828, "comment_id": 80835227, "body": "sure! input: Y={2,3,4}      output: [1,0,0],[0,1,0],[0,0,1] or in other words: {2-&gt;1, 3-&gt;0, 4-&gt;0},{2-&gt;0, 3-&gt;1,4-&gt;0},{2-&gt;0,3-&gt;0,4-&gt;1}"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1508976820, "post_id": 46943828, "comment_id": 80835247, "body": "@sherek_66 Ahh so you&#39;d like the output to be a vector of maps? or a set of maps?? (also, these things--the more in depth description and example input/output--would be great to edit into your question. It would keep away the downvoters and maybe even get you some upvotes!)"}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1508976950, "post_id": 46943828, "comment_id": 80835268, "body": "thanks for your help! I will edit my post with a example! and I want my answer to be a vector with 0 and 1 element1"}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1508978852, "post_id": 46943828, "comment_id": 80835689, "body": "wooowwww! you wrote it very fast! I am really prod of you! smart brain! thank you very very much friend"}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1508978903, "post_id": 46943828, "comment_id": 80835700, "body": "I just get crazy error when I want to cout vectore!                                cannot bind &#39;std::ostream {aka std::basic_ostream&lt;char&gt;}&#39; lvalue to &#39;std::basic_ostream&lt;char&gt;&amp;&amp;&#39;"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1508995784, "post_id": 46943828, "comment_id": 80839979, "body": "@sherek_66 see the link I gave you for one way to print it"}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1509023602, "post_id": 46943828, "comment_id": 80857692, "body": "thanks so much! I am new in this website! if there is any way that I can give u positive feedback let me know! you helped me a lot"}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1509029450, "post_id": 46943828, "comment_id": 80862296, "body": "just one more question is any way that I can use an array insist of vectore? becouse for example I have an array with size 5. and Y={1,5} so I need the first place of array to be 1 and 5th place 0, and again the first place to be 0 and 5th 1. I meant I need a output like this:[1,0,0,0,0],[0,0,0,0,1]"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1509033178, "post_id": 46943828, "comment_id": 80864780, "body": "@sherek_66 if this is the answer you were looking for, you can give me a boost in reputation by <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">accepting it</a>."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1509033196, "post_id": 46943828, "comment_id": 80864798, "body": "@sherek_66 Ahh so you want the output to be an array of arrays of int?"}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1509033669, "post_id": 46943828, "comment_id": 80865096, "body": "sure i will! thanks again! yes I need an array! and actually the elements of the set are indices of that vector! for example input: Y={1,3,4} and B[6]={}  output: [1,e,0,0,e] , [0,e,1,0,e] , [0,e,0,1,e]  (e means it will be filled in the other parts of code}"}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1509038024, "post_id": 46943828, "comment_id": 80867670, "body": "I do appreciate!"}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1509038410, "post_id": 46943828, "comment_id": 80867864, "body": "I am phd student in mathematics! let me know if u needed any help in math"}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 1, "last_activity_date": 1509042316, "last_edit_date": 1509042316, "creation_date": 1508976179, "answer_id": 46943828, "question_id": 46943626, "link": "https://stackoverflow.com/questions/46943626/how-i-can-assign-input-to-map-function-with-set-in-the-for-loop/46943828#46943828", "title": "how I can assign input to map function with set in the for loop", "body": "<p>Note that since you've declared your map, <code>myMap</code> inside the for loop, you're creating an entirely new map every iteration of the loop. You also won't be able to access it outside the loop. Therefore you should declare it before the loop.</p>\n\n<p>From your comment, it looks like you're trying to map all items in your set to 0 except the first. In that case, begin by mapping them all to 0, and then just change the first after:</p>\n\n<pre><code>map&lt;int, int&gt; m;\nfor(auto iter = Y.begin(); iter != Y.end(); iter++) {\n    m[*iter] = 0;\n}\nif(Y.size() != 0) {\n    m[*Y.begin()] = 1;\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>As per your comments below, this should be what you're looking for:</p>\n\n<pre><code>vector&lt;map&lt;int,int&gt;&gt; v;\nfor(auto iter = Y.begin(); iter != Y.end(); iter++) {\n    map&lt;int, int&gt; m;\n    for(auto iter2 = Y.begin(); iter2 != Y.end(); iter2++) {\n        m[*iter2] = (*iter == *iter2);\n    }\n    v.push_back(m);\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/V3X8mZ\" rel=\"nofollow noreferrer\">See it in action here</a></p>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>After more comments, it sounds like this is what you're actually looking for:</p>\n\n<pre><code>int arr[ARR_SIZE][ARR_SIZE] = {0}; //initialize whole array to 0's\n\nint count = 0;\nfor(auto iter = Y.begin(); iter != Y.end(); iter++, count++) {\n    arr[count][*iter-1] = 1; //pick out the specific values we want to be 1\n}\n</code></pre>\n\n<p>(Note that I'm not sure what you mean by <code>e</code>, so I'm ignoring it)</p>\n\n<p><a href=\"https://ideone.com/UVBEYR\" rel=\"nofollow noreferrer\">See it in action here</a></p>\n"}], "owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 46943828, "answer_count": 1, "score": 0, "last_activity_date": 1509042316, "creation_date": 1508974682, "last_edit_date": 1508977097, "question_id": 46943626, "link": "https://stackoverflow.com/questions/46943626/how-i-can-assign-input-to-map-function-with-set-in-the-for-loop", "title": "how I can assign input to map function with set in the for loop", "body": "<p>I am wondering how I can use for loop and set for my input map!\nhere is what I think but there is some error!</p>\n\n<p>actually I have a set Y and I want to map one element to 1 and other to zero! for example:</p>\n\n<p>input: Y={2,3,4} \noutput: [1,0,0],[0,1,0],[0,0,1] or in other words: {2->1, 3->0, 4->0},{2->0, 3->1,4->0},{2->0,3->0,4->1} \nI need my out put as a vector </p>\n\n<pre><code>for (iter = Y.begin(); iter != Y.end(); ++iter) {\n  Map myMap;\n  myMap.insert(std::make_pair(iter, 1));\n  if (Y != iter) {\n    myMap.insert(std::make_pair(Y, 0));\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "file", "loops", "fstream"], "comments": [{"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1508973308, "post_id": 46943410, "comment_id": 80834316, "body": "<code>inFile.open</code> not <code>File</code>."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1508973399, "post_id": 46943410, "comment_id": 80834347, "body": "<code>readin()</code> must return a value."}], "answers": [{"tags": [], "owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "is_accepted": true, "score": 1, "last_activity_date": 1508973334, "creation_date": 1508973334, "answer_id": 46943446, "question_id": 46943410, "link": "https://stackoverflow.com/questions/46943410/loop-skips-lines-when-reading-data-from-a-file-into-array-c/46943446#46943446", "title": "Loop skips lines when reading data from a file into array C++", "body": "<p>The reason is that you are reading from your file stream in your conditional query:</p>\n\n<pre><code>while(inFile &gt;&gt; arr[n]) // reads the first element in the file\n</code></pre>\n\n<p>and then reading it again and <em>rewriting</em> this value inside the loop:</p>\n\n<pre><code>{\n    inFile &gt;&gt; arr[n];  // reads the next element in the file, puts it in the same place\n    n++;\n}\n</code></pre>\n\n<p>Just do:</p>\n\n<pre><code>while(inFile &gt;&gt; arr[n]) n++;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 1, "last_activity_date": 1508973758, "creation_date": 1508973758, "answer_id": 46943500, "question_id": 46943410, "link": "https://stackoverflow.com/questions/46943410/loop-skips-lines-when-reading-data-from-a-file-into-array-c/46943500#46943500", "title": "Loop skips lines when reading data from a file into array C++", "body": "<p>You can simply do it like this:</p>\n\n<pre><code>while(inFile &gt;&gt; arr[n]){\n    n++;\n}\n</code></pre>\n\n<p>But what if the number of values in the file is greater than the array size?\nThen you are facing an <code>undefined behavior</code>.</p>\n\n<ul>\n<li><p>I recommend using <code>vectors</code>:</p>\n\n<pre><code>std::vector&lt;int&gt; vecInt;\nint value;\n\nwhile(inFile &gt;&gt; value)\n   vecInt.push_back(value);\n\nfor(int i(0); i &lt; vecInt.size(); i++)\n    std::cout &lt;&lt; vecInt[i] &lt;&lt; std::endl;\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 8834406, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K_m69zY4xW0/AAAAAAAAAAI/AAAAAAAAAkA/Nd_3USByKI0/photo.jpg?sz=128", "display_name": "CGaups", "link": "https://stackoverflow.com/users/8834406/cgaups"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 46943446, "answer_count": 2, "score": 0, "last_activity_date": 1508973758, "creation_date": 1508973134, "last_edit_date": 1508973441, "question_id": 46943410, "link": "https://stackoverflow.com/questions/46943410/loop-skips-lines-when-reading-data-from-a-file-into-array-c", "title": "Loop skips lines when reading data from a file into array C++", "body": "<p>I'm working on a project for my CS 1 class where we have to make a function that reads data from a file into an array. However when it runs it only reads in every other line of data.</p>\n\n<p>The file contains 22 3 14 8 12 and the output I get: 3 8 12</p>\n\n<p>Any help is very appreciated. Sorry if this has already been answered, I couldn't find it.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint readin();\n\nint main() {\n  readin();\n  return 0;\n}\n\nint readin(){\n  ifstream inFile;\n  int n = 0;\n  int arr[200];\n\n  inFile.open(\"data.txt\");\n\n  while(inFile &gt;&gt; arr[n]){\n    inFile &gt;&gt; arr[n];\n    n++;\n  }\n\n  inFile.close();\n\n  for(int i = 0; i &lt; n; i++){\n    cout &lt;&lt; arr[i] &lt;&lt; \" \" &lt;&lt; endl;\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++builder", "epson"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508975628, "post_id": 46943382, "comment_id": 80834941, "body": "The traditional way devices worked in MS-Windows was that the device name must be specified with a trailing colon, i.e. &quot;LPT1:&quot;, although MS-Windows still opened the port if the trailing colon was omitted. Perhaps this is now required in Windows 10."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1508982452, "post_id": 46943382, "comment_id": 80836526, "body": "Not according to MSDN documentation"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1508982972, "post_id": 46943382, "comment_id": 80836629, "body": "Are you sure <code>ESDPRT001</code> is a device name that can be opened using <code>CreateFile()</code> (which <code>fopen()</code> wraps on Windows) to begin with? I don&#39;t think it is.  You might need to setup a <a href=\"http://www.beaglehardware.com/howtovirtualcomport.html\" rel=\"nofollow noreferrer\">Virtual COM port</a> for it (<a href=\"http://support.epostraders.co.uk/support-files/documents/3/KPm-TMVirtualPortDriverVer7_UserManual.pdf\" rel=\"nofollow noreferrer\">see also this</a>), and then you can open the COM port like before"}, {"owner": {"reputation": 9, "user_id": 8834215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc615cecae36251963d983efcb8cb12?s=128&d=identicon&r=PG&f=1", "display_name": "Gustavo U.", "link": "https://stackoverflow.com/users/8834215/gustavo-u"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1509061129, "post_id": 46943382, "comment_id": 80878428, "body": "You are right, @RemyLebeau. Setting up a virtual COM port, assigning the printer to it, and then using the function above mentioned, pointing to the assigned COM port, worked like a charm! Thank you! :D"}], "owner": {"reputation": 9, "user_id": 8834215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc615cecae36251963d983efcb8cb12?s=128&d=identicon&r=PG&f=1", "display_name": "Gustavo U.", "link": "https://stackoverflow.com/users/8834215/gustavo-u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508972950, "creation_date": 1508972950, "question_id": 46943382, "link": "https://stackoverflow.com/questions/46943382/opening-a-cashdrawer-in-c", "title": "Opening a CashDrawer in C++", "body": "<p>At my workplace, we use our own Point Of Sales software which works with Epson Printers TM-U950s connected to 3nStar Mini Cashdrawers. So far, when cash is involved, the software sends a command to the printer in order to open the CashDrawer. </p>\n\n<p>Here is the code for it:</p>\n\n<pre><code>void M::OpenDrawer()\n{\n    FILE *stream;\n    try {\n        stream = fopen(\"LPT1\", \"w\");\n        fprintf(stream, \"%c%c%c%c%c\", char(27), char(112), char(0), char(50), char(250));\n        fclose(stream);\n    } catch(Exception &amp;E) {\n        Application-&gt;ShowException(&amp;E);\n        fclose(stream);\n    }\n}\n</code></pre>\n\n<p>Our POS software has been working on Windows XP this whole time but we have managed to update it so it can work on Windows 10. However, the previous command won't work. When the TM-U950 gets installed, unlike Windows XP where it uses the existing LPT1 Port, on Windows 10 it creates its own port ESDPRT001. I tried changing the code from </p>\n\n<pre><code>stream = fopen(\"LPT1\", \"w\");\n</code></pre>\n\n<p>to </p>\n\n<pre><code>stream = fopen(\"ESDPRT001\", \"w\");\n</code></pre>\n\n<p>But it won't open the Cashdrawer. I've already searched several websites to verify if the epson command has changed or not, or if we are actually using the right one, and we are. (See <a href=\"http://www.itsmetor.com/wp/epson-esc-commands/\" rel=\"nofollow noreferrer\">http://www.itsmetor.com/wp/epson-esc-commands/</a>)</p>\n\n<p>Long story short, I need help figuring out if the function is the right one to use when sending a direct command to the LPT1 port, so it can open the Cashdrawer, or not, and if possible any advise on how to fix it.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "javascriptcore"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5287517, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y4DN_YWkiiE/AAAAAAAAAAI/AAAAAAAAAFY/dOsOAOKbMsc/photo.jpg?sz=128", "display_name": "Alexis Barra", "link": "https://stackoverflow.com/users/5287517/alexis-barra"}, "edited": false, "score": 0, "creation_date": 1509380254, "post_id": 47017909, "comment_id": 80986345, "body": "Thanks! this is gonna be my guide to do this,"}], "tags": [], "owner": {"reputation": 3890, "user_id": 1689609, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/pBVjm.jpg?s=128&g=1", "display_name": "Borys Verebskyi", "link": "https://stackoverflow.com/users/1689609/borys-verebskyi"}, "is_accepted": false, "score": 1, "last_activity_date": 1509374160, "creation_date": 1509374160, "answer_id": 47017909, "question_id": 46943350, "link": "https://stackoverflow.com/questions/46943350/how-to-use-jsexport-and-javascriptcore-in-c/47017909#47017909", "title": "How to use JSExport and JavascriptCore in C++", "body": "<p>Looks like you need to use C API to achieve that. See <a href=\"https://karhm.com/JavaScriptCore_C_API/\" rel=\"nofollow noreferrer\">this article</a> for details. Especially, \"Defining native objects to JavaScript\" section.</p>\n\n<p>Listing from referenced article looks very similar to what you want to achieve:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;JavaScriptCore/JavaScriptCore.h&gt;\n#include &lt;sys/stat.h&gt;\n\nusing namespace std;\n\nstruct FilesystemPrivate {\n    string path;\n    bool is_directory;\n    bool is_file;\n    bool is_symlink;\n    size_t size;\n    bool exists;\n};\n\nstd::string JSStringToStdString(JSStringRef jsString) {\n    size_t maxBufferSize = JSStringGetMaximumUTF8CStringSize(jsString);\n    char* utf8Buffer = new char[maxBufferSize];\n    size_t bytesWritten = JSStringGetUTF8CString(jsString, utf8Buffer, maxBufferSize);\n    std::string utf_string = std::string (utf8Buffer, bytesWritten -1); // the last byte is a null \\0 which std::string doesn't need.\n    delete [] utf8Buffer;\n    return utf_string;\n}\n\nJSValueRef ObjectCallAsFunctionCallback(JSContextRef ctx, JSObjectRef function, JSObjectRef thisObject, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception) {\n    for (size_t i=0; i&lt;argumentCount; i++) {\n        JSStringRef pathString = JSValueToStringCopy(ctx, arguments[i], nullptr);\n        cout &lt;&lt; JSStringToStdString(pathString);\n    }\n    cout &lt;&lt; endl ;\n    return JSValueMakeUndefined(ctx);\n}\n\nvoid setAttributes(FilesystemPrivate *fs, std::string path) {\n    fs-&gt;path = path;\n\n    struct stat statbuf;\n\n    if (lstat(path.c_str(), &amp;statbuf) != -1) {\n        switch (statbuf.st_mode &amp; S_IFMT){\n            case S_IFREG:\n                fs-&gt;is_file = true;\n                break;\n            case S_IFLNK:\n                fs-&gt;is_symlink = true;\n                break;\n            case S_IFDIR:\n                fs-&gt;is_directory = true;\n                break;\n        }\n        fs-&gt;size = statbuf.st_size;\n        fs-&gt;exists = true;\n    }else{\n        fs-&gt;exists = false;\n        fs-&gt;is_file = false;\n        fs-&gt;is_directory = false;\n        fs-&gt;is_symlink = false;\n        fs-&gt;size = 0;\n    }\n}\n\n/* callbacks */\n\nvoid Filesystem_Finalize(JSObjectRef object){\n    FilesystemPrivate *fs = static_cast&lt;FilesystemPrivate*&gt;(JSObjectGetPrivate(object));\n    delete fs;\n}\n\nJSObjectRef Filesystem_CallAsConstructor(JSContextRef ctx, JSObjectRef constructor, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception){\n    FilesystemPrivate *fs = new FilesystemPrivate();\n\n    JSStringRef pathString = JSValueToStringCopy(ctx, arguments[0], nullptr);\n    setAttributes(fs, JSStringToStdString(pathString));\n    JSObjectSetPrivate(constructor, static_cast&lt;void*&gt;(fs));\n\n    return constructor;\n}\n\n/* static values */\n\nJSValueRef Filesystem_getPath(JSContextRef ctx, JSObjectRef object,JSStringRef propertyName, JSValueRef* exception) {\n    FilesystemPrivate *fs = static_cast&lt;FilesystemPrivate*&gt;(JSObjectGetPrivate(object));\n    JSStringRef pathString = JSStringCreateWithUTF8CString(fs-&gt;path.c_str());\n\n    return JSValueMakeString(ctx, pathString);\n}\n\nbool Filesystem_setPath(JSContextRef ctx, JSObjectRef object, JSStringRef propertyName, JSValueRef value, JSValueRef* exception) {\n    FilesystemPrivate *fs = static_cast&lt;FilesystemPrivate*&gt;(JSObjectGetPrivate(object));\n    JSStringRef pathString = JSValueToStringCopy(ctx, value, nullptr);\n\n    setAttributes(fs, JSStringToStdString(pathString));\n\n    return true;\n}\n\nJSValueRef Filesystem_getType(JSContextRef ctx, JSObjectRef object, JSStringRef propertyName, JSValueRef* exception) {\n    FilesystemPrivate *fs = static_cast&lt;FilesystemPrivate*&gt;(JSObjectGetPrivate(object));\n    JSStringRef pathType;\n\n    if (fs-&gt;is_file) {\n        pathType = JSStringCreateWithUTF8CString(\"File\");\n    }else if (fs-&gt;is_directory) {\n        pathType = JSStringCreateWithUTF8CString(\"Directory\");\n    }else if (fs-&gt;is_symlink) {\n        pathType = JSStringCreateWithUTF8CString(\"Symlink\");\n    }else{\n        pathType = JSStringCreateWithUTF8CString(\"Unknown\");\n    }\n\n    return JSValueMakeString(ctx, pathType);\n}\n\nJSValueRef Filesystem_getExist(JSContextRef ctx, JSObjectRef object, JSStringRef propertyName, JSValueRef* exception) {\n    FilesystemPrivate *fs = static_cast&lt;FilesystemPrivate*&gt;(JSObjectGetPrivate(object));\n\n    return JSValueMakeBoolean(ctx, fs-&gt;exists);\n}\n\nJSValueRef Filesystem_getSize(JSContextRef ctx, JSObjectRef object,JSStringRef propertyName, JSValueRef* exception) {\n    FilesystemPrivate *fs = static_cast&lt;FilesystemPrivate*&gt;(JSObjectGetPrivate(object));\n\n    return JSValueMakeNumber(ctx, static_cast&lt;double&gt;(fs-&gt;size));\n}\n\nJSValueRef Filesystem_remove(JSContextRef ctx, JSObjectRef function, JSObjectRef object, size_t argumentCount, const JSValueRef arguments[], JSValueRef* exception){\n    FilesystemPrivate *fs = static_cast&lt;FilesystemPrivate*&gt;(JSObjectGetPrivate(object));\n    remove(fs-&gt;path.c_str());\n\n    return JSValueMakeUndefined(ctx);\n}\n\nJSClassRef FilesystemClass() {\n    static JSClassRef filesystem_class;\n    if (!filesystem_class) {\n        JSClassDefinition classDefinition = kJSClassDefinitionEmpty;\n\n        static JSStaticFunction staticFunctions[] = {\n            { \"remove\", Filesystem_remove, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },\n            { 0, 0, 0 }\n        };\n\n        static JSStaticValue staticValues[] = {\n            { \"path\", Filesystem_getPath, Filesystem_setPath, kJSPropertyAttributeDontDelete },\n            { \"type\", Filesystem_getType, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },\n            { \"exists\", Filesystem_getExist, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },\n            { \"size\", Filesystem_getSize, 0, kJSPropertyAttributeReadOnly | kJSPropertyAttributeDontDelete },\n            { 0, 0, 0, 0 }\n        };\n\n        classDefinition.className = \"Filesystem\";\n        classDefinition.attributes = kJSClassAttributeNone;\n        classDefinition.staticFunctions = staticFunctions;\n        classDefinition.staticValues = staticValues;\n        classDefinition.finalize = Filesystem_Finalize;\n        classDefinition.callAsConstructor = Filesystem_CallAsConstructor;\n\n        filesystem_class = JSClassCreate(&amp;classDefinition);\n    }\n    return filesystem_class;\n}\n\nint main(int argc, const char * argv[]) {\n\n    JSContextGroupRef contextGroup = JSContextGroupCreate();\n    JSGlobalContextRef globalContext = JSGlobalContextCreateInGroup(contextGroup, nullptr);\n    JSObjectRef globalObject = JSContextGetGlobalObject(globalContext);\n\n    JSObjectRef functionObject = JSObjectMakeFunctionWithCallback(globalContext, JSStringCreateWithUTF8CString(\"log\"), ObjectCallAsFunctionCallback);\n    JSObjectSetProperty(globalContext, globalObject, JSStringCreateWithUTF8CString(\"log\"), functionObject, kJSPropertyAttributeNone, nullptr);\n\n    JSObjectRef filesystemObject = JSObjectMake(globalContext, FilesystemClass(), nullptr);\n    JSObjectSetProperty(globalContext, globalObject, JSStringCreateWithUTF8CString(\"Filesystem\"), filesystemObject, kJSPropertyAttributeNone, nullptr);\n\n    JSEvaluateScript(globalContext, JSStringCreateWithUTF8CString(\"var fs = new Filesystem('/Users/{user}/Desktop/file');log(fs.exists);\"), nullptr, nullptr, 1, nullptr);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5287517, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y4DN_YWkiiE/AAAAAAAAAAI/AAAAAAAAAFY/dOsOAOKbMsc/photo.jpg?sz=128", "display_name": "Alexis Barra", "link": "https://stackoverflow.com/users/5287517/alexis-barra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1247, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1509374160, "creation_date": 1508972743, "question_id": 46943350, "link": "https://stackoverflow.com/questions/46943350/how-to-use-jsexport-and-javascriptcore-in-c", "title": "How to use JSExport and JavascriptCore in C++", "body": "<p>I'm working with JavascriptCore in a C++ project and I don't know how to expose a C++ class to javascript. For example in Objective-C is something like this:</p>\n\n<pre><code>@protocol MyPointExports &lt;JSExport&gt;\n@property double x;\n@property double y;\n- (NSString *)description;\n- (instancetype)initWithX:(double)x y:(double)y;\n+ (MyPoint *)makePointWithX:(double)x y:(double)y;\n@end\n\n@interface MyPoint : NSObject &lt;MyPointExports&gt;\n- (void)myPrivateMethod;  // Not in the MyPointExports protocol, so not visible to JavaScript code.\n@end\n\n@implementation MyPoint\n// ...\n@end\n\nJSContext *context = [[JSContext alloc] init];\n\n// export MyPoint class\ncontext[@\"MyPoint\"] = [MyPoint class];\n</code></pre>\n\n<p>But I have not idea how to translate JSExport and protocol into C++. </p>\n"}, {"tags": ["c++", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 4, "creation_date": 1508972737, "post_id": 46943335, "comment_id": 80834144, "body": "Undefined behavior. Don&#39;t do this"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 3, "creation_date": 1508972846, "post_id": 46943335, "comment_id": 80834177, "body": "Use std::vector instead of new. Then you wouldn\u2019t have used the wrong delete."}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 1, "creation_date": 1508972884, "post_id": 46943335, "comment_id": 80834190, "body": "C/C++ does not enforce bounds checking, you&#39;re accessing an undefined chunk of memory that might or might not hold something else.  Try this using a struct with  {  int a[3], b[3] } and notice that &amp;a[4] might have the same address as &amp;b[1]"}, {"owner": {"reputation": 41, "user_id": 3289822, "user_type": "registered", "profile_image": "https://graph.facebook.com/595089246/picture?type=large", "display_name": "Usama Chaudhary", "link": "https://stackoverflow.com/users/3289822/usama-chaudhary"}, "edited": false, "score": 0, "creation_date": 1508972961, "post_id": 46943335, "comment_id": 80834213, "body": "Please refer to this link: <a href=\"https://stackoverflow.com/questions/1239938/accessing-an-array-out-of-bounds-gives-no-error-why\" title=\"accessing an array out of bounds gives no error why\">stackoverflow.com/questions/1239938/&hellip;</a> Possibly duplicate of this question."}, {"owner": {"reputation": 1, "user_id": 8834453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1b9a5ab1d3c9637da5c593644b4deb?s=128&d=identicon&r=PG&f=1", "display_name": "cainsr2", "link": "https://stackoverflow.com/users/8834453/cainsr2"}, "edited": false, "score": 0, "creation_date": 1508973107, "post_id": 46943335, "comment_id": 80834265, "body": "Ah I see, thanks guys for the quick reply!"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508973661, "post_id": 46943335, "comment_id": 80834398, "body": "@cainsr2 -- Think of it this way -- if you had your driver&#39;s license suspended, does that mean you can&#39;t get into a car and drive it, possibly for hundreds of miles without being stopped once by a policeman?  Of course you can.  Does it mean it is legal for you to do so? Of course it isn&#39;t legal.  C++ works in this fashion -- you&#39;re &quot;allowed&quot; to do things that are undefined, and you may have nothing go wrong, or your whole program may collapse."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1508973736, "post_id": 46943335, "comment_id": 80834432, "body": "By the way, <code>delete nums;</code> should be <code>delete[] nums;</code>."}, {"owner": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "edited": false, "score": 0, "creation_date": 1508973916, "post_id": 46943335, "comment_id": 80834484, "body": "@manni66 The availability of better options like <code>std::vector</code> is not a valid excuse for not understanding which delete operator to use. It&#39;s still an important concept to understand. Using vector doesn&#39;t help OP understand that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "reply_to_user": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "edited": false, "score": 0, "creation_date": 1508974056, "post_id": 46943335, "comment_id": 80834519, "body": "@MillieSmith how do you know that the concept is not understood?"}, {"owner": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "edited": false, "score": 0, "creation_date": 1508974147, "post_id": 46943335, "comment_id": 80834537, "body": "@manni66 I&#39;m guessing I suppose based on the fact that OP doesn&#39;t know buffer overflows will compile but are undefined behavior. Which I think is a pretty reasonable guess."}], "answers": [{"tags": [], "owner": {"reputation": 1305, "user_id": 2902161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1261558429/picture?type=large", "display_name": "Ante Jablan Adamovi\u0107", "link": "https://stackoverflow.com/users/2902161/ante-jablan-adamovi%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1508973649, "creation_date": 1508973649, "answer_id": 46943485, "question_id": 46943335, "link": "https://stackoverflow.com/questions/46943335/c-dynamic-memory-allocation-not-working-as-expected/46943485#46943485", "title": "C++ dynamic memory allocation not working as expected", "body": "<p>As mentioned in the comments you're accessing additional memory and assigning values to it on lines:</p>\n\n<pre><code>nums[3] = 7;\nnums[4] = 8;\n</code></pre>\n\n<p>Since you allocated <code>3</code> slots for your array it allocated memory required, but when you're using <code>pointers</code> you're accessing the memory location directly so you can freely jump out of your array memory space and venture into <code>unknown</code> memory.</p>\n\n<p>This is <strong>VERY BAD</strong> practice as you don't know what's located on those memory slots.</p>\n"}, {"tags": [], "owner": {"reputation": 277, "user_id": 8827807, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b09adbdf2c49943cf4546013acb73ad9?s=128&d=identicon&r=PG&f=1", "display_name": "IdleCustard", "link": "https://stackoverflow.com/users/8827807/idlecustard"}, "is_accepted": false, "score": -1, "last_activity_date": 1508989594, "creation_date": 1508989594, "answer_id": 46945541, "question_id": 46943335, "link": "https://stackoverflow.com/questions/46943335/c-dynamic-memory-allocation-not-working-as-expected/46945541#46945541", "title": "C++ dynamic memory allocation not working as expected", "body": "<p>C++ is an unsafe language. If you allocate 3 <code>int</code>s on the heap, you have to make sure that you do not later try to write to where there would be a 4th or 5th <code>int</code>. C++ will allow you write there even though it's a bad idea.</p>\n\n<p>One solution to this problem is to almost never use the pointers built into the language. You can make, or use someone else's, pointer class. It should be a template class, that way you can make a pointer to anything: <code>pntr&lt;int&gt;</code>, <code>pntr&lt;Car&gt;</code>,<code>pntr&lt;ostream&gt;</code>, <code>pntr&lt;string&gt;</code>, etc... </p>\n\n<p>Overload:</p>\n\n<ul>\n<li><code>operator new[]</code></li>\n<li>the deference operator,</li>\n<li>operator bracket-bracket</li>\n<li>etc...</li>\n</ul>\n\n<p>Your pointer class can throw an error if you try to write to  where you are not supposed to.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"pntr.h\"\n\nint main() {\n    pntr&lt;int&gt; nums = new int[3];\n    nums[0] = 5;\n    nums[1] = 6;\n    nums[2] = 5;    \n    nums[3] = 7; // THROWS AN ERROR\n    nums[4] = 8; \n\n    delete nums;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8834453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1b9a5ab1d3c9637da5c593644b4deb?s=128&d=identicon&r=PG&f=1", "display_name": "cainsr2", "link": "https://stackoverflow.com/users/8834453/cainsr2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 346, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1508989594, "creation_date": 1508972673, "question_id": 46943335, "link": "https://stackoverflow.com/questions/46943335/c-dynamic-memory-allocation-not-working-as-expected", "title": "C++ dynamic memory allocation not working as expected", "body": "<p>I'm trying to wrap my head around why this works. As far as I understand when i dynamically allocate 3 ints it shouldn't let me add more after index 2 but the code below compiles and runs perfectly well. Why is this?</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main() {\n    int* nums = new int[3];\n    nums[0] = 5;\n    nums[1] = 6;\n    nums[2] = 5;\n\n    nums[3] = 7;\n    nums[4] = 8;\n\n    for(int i = 0; i &lt;= 4; i++) {\n        std::cout &lt;&lt; nums[i] &lt;&lt; std::endl;\n    }\n\n    delete nums;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "runtime-error", "corrupt"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8834410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384e86f267340223a175bb4e4eb873ef?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin J Griggs", "link": "https://stackoverflow.com/users/8834410/benjamin-j-griggs"}, "edited": false, "score": 0, "creation_date": 1508975548, "post_id": 46943622, "comment_id": 80834917, "body": "Fixed thank you, sorry I did not see such a simple mistake"}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 0, "last_activity_date": 1508974623, "creation_date": 1508974623, "answer_id": 46943622, "question_id": 46943305, "link": "https://stackoverflow.com/questions/46943305/ms-studio-17-stack-around-the-variable-was-corrupted/46943622#46943622", "title": "MS studio 17 Stack around the variable was corrupted", "body": "<p>You declare <code>nminute</code> as an array with two elements, but when you use it you're accessing elements 3 and 4 (which requires the array to have 5 elements).  Since you're accessing past the ends of the array, you run into Undefined Behavior.  In this case, your compiler has inserted code to detect this problem and is telling you about it.</p>\n\n<p>To fix it, change the subscripting on <code>nminute</code> when used in the code to only access elements 0 and 1.</p>\n"}], "owner": {"reputation": 1, "user_id": 8834410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384e86f267340223a175bb4e4eb873ef?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin J Griggs", "link": "https://stackoverflow.com/users/8834410/benjamin-j-griggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1508974661, "creation_date": 1508972401, "last_edit_date": 1508974661, "question_id": 46943305, "link": "https://stackoverflow.com/questions/46943305/ms-studio-17-stack-around-the-variable-was-corrupted", "title": "MS studio 17 Stack around the variable was corrupted", "body": "<p>Hi i keep getting a stack around the variable nhour was corrupted error, and I can not figure out why. I am trying to have a time entered and check it to make sure it is a good input. making the array bigger or smaller seems not to work. I have also added checks in and the output seems find until I get the error</p>\n\n<pre><code>void DEPARTURETIME(string&amp; szdepartureTime)\n{\nbool berror;\nchar cdeparture[9];\nint nhour[2],\n    nminute[2],\n    nhourValue,\n    nminuteValue;\nnhour[0] = 0;\ndo\n    {\n        berror = false;\n        system(\"CLS\");\n        cout &lt;&lt; \"Enter departure time. (HH:DDAM/PM)\" &lt;&lt; endl;\n        cin &gt;&gt; cdeparture;\n        cin.ignore();\n        berror = ERRORCHECK();\n        for (int i = 0; i &lt; 2 &amp;&amp; berror != true; i++)\n            {\n                nhour[i] = CONVTOINT(cdeparture[i]);\n            }\n//Beginning of testing hour for errors\n        if (nhour[0] &gt; 1 &amp;&amp; berror != true)\n            {\n                cout &lt;&lt; \"Error, can not exceed 12 hours.\" &lt;&lt; endl;\n                system(\"pause\");\n                berror = true;\n            }\n        else if (nhour[0] == 1)\n            {\n                nhour[0] *= 10;\n            }\n        cout &lt;&lt; nhour[0] &lt;&lt; nhour[1] &lt;&lt; endl;\n        nhourValue = nhour[0] + nhour[1];\n        cout &lt;&lt; nhourValue &lt;&lt; endl;\n        if (nhourValue &gt; 12 || nhourValue &lt;= 0 &amp;&amp; berror != true)\n            {\n                cout &lt;&lt; \"Error, can not exceed 12 hours and can not be \nzero.\" &lt;&lt; endl;\n                system(\"pause\");\n                berror = true;\n            }\n//End of testing hour for errors\n//Beginning of testing for a colon\n        if (cdeparture[2] != ':' &amp;&amp; berror != true)\n            {\n                cout &lt;&lt; \"Error, you need a colon inbetween hours and minutes.\" &lt;&lt; endl;\n                system(\"pause\");\n                berror = true;\n            }\n//End of testing for a colon\n        for (int i = 3; i &lt; 5 &amp;&amp; berror != true; i++)\n            {\n                nminute[i] = CONVTOINT(cdeparture[i]);\n            }\n//Beginning of testing for minute errors\n        if (nminute[3] &gt; 6 &amp;&amp; berror != true)\n            {\n                cout &lt;&lt; \"Error, minutes can not exceed 60.\" &lt;&lt; endl;\n                system(\"pause\");\n                berror = true;\n            }\n        else if (nminute[3] &gt; 0 || berror != true)\n            {\n                nminute[3] *= 10;\n            }\n        nminuteValue = nminute[3] + nminute[4];\n        if (nminuteValue &gt; 60 &amp;&amp; berror != true)\n            {\n                cout &lt;&lt; \"Error, minutes can not exceed 60.\" &lt;&lt; endl;\n                system(\"pause\");\n                berror = true;\n            }\n//End of testing for minute errors\n        cdeparture[5] = toupper(cdeparture[5]);\n        cdeparture[6] = toupper(cdeparture[6]);\n//Beginning of testing for AM and PM errors\n        if (cdeparture[5] != 'A' &amp;&amp; cdeparture[5] != 'P' || cdeparture[6] != 'M' &amp;&amp; berror != true)\n            {\n                cout &lt;&lt; \"Error, must have AM or PM.\" &lt;&lt; endl;\n                system(\"pause\");\n                berror = true;\n            }\n    } while (berror != false);\n//End of testing for AM and PM errors\n    for (int i = 0; i &lt; 7; i++)\n        {\n            szdepartureTime += cdeparture[i];\n        }\nreturn;\n</code></pre>\n\n<p>}</p>\n\n<p>and this is the other function that is called</p>\n\n<pre><code>int CONVTOINT(char cchar)\n{\n    int value = cchar - '0';\n    if (value &lt; 0 || value &gt; 9)\n        {\n            cout &lt;&lt; \"Error, Convertion failed\" &lt;&lt; endl;\n            system(\"pause\");\n            return 0;\n        }\n    return value;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++14", "constexpr", "stdtuple"], "answers": [{"comments": [{"owner": {"reputation": 515, "user_id": 832745, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/42d23de5379da839b4bf3fcad7411a22?s=128&d=identicon&r=PG", "display_name": "nachum", "link": "https://stackoverflow.com/users/832745/nachum"}, "edited": false, "score": 0, "creation_date": 1508974965, "post_id": 46943360, "comment_id": 80834767, "body": "I changed the code to show the need for both values. In my real use case, I need both values and they both help to produce the constexpr result."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 1, "last_activity_date": 1508972802, "creation_date": 1508972802, "answer_id": 46943360, "question_id": 46943190, "link": "https://stackoverflow.com/questions/46943190/how-to-return-a-tuple-for-a-constexpr/46943360#46943360", "title": "how to return a tuple for a constexpr", "body": "<p>The implementation of your <code>ret1</code> just needs <a href=\"http://en.cppreference.com/w/cpp/utility/tuple/get\" rel=\"nofollow noreferrer\"><code>std::get</code></a>:</p>\n\n<pre><code>constexpr int ret1() {\n    return std::get&lt;0&gt;(ret2());\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/c5df9152b807059d\" rel=\"nofollow noreferrer\">Demo</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1508973055, "post_id": 46943367, "comment_id": 80834254, "body": "<code>constexpr auto tmp = ret1();</code> does not directly use any <code>operator=</code>: it is an initialization, not an assignment expression."}, {"owner": {"reputation": 515, "user_id": 832745, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/42d23de5379da839b4bf3fcad7411a22?s=128&d=identicon&r=PG", "display_name": "nachum", "link": "https://stackoverflow.com/users/832745/nachum"}, "edited": false, "score": 0, "creation_date": 1508974954, "post_id": 46943367, "comment_id": 80834766, "body": "I changed the code to show the need for both values. In my real use case, I need both values and they both help to produce the constexpr result."}, {"owner": {"reputation": 515, "user_id": 832745, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/42d23de5379da839b4bf3fcad7411a22?s=128&d=identicon&r=PG", "display_name": "nachum", "link": "https://stackoverflow.com/users/832745/nachum"}, "edited": false, "score": 0, "creation_date": 1508975145, "post_id": 46943367, "comment_id": 80834815, "body": "Is it possible to do this in one call?"}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "reply_to_user": {"reputation": 515, "user_id": 832745, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/42d23de5379da839b4bf3fcad7411a22?s=128&d=identicon&r=PG", "display_name": "nachum", "link": "https://stackoverflow.com/users/832745/nachum"}, "edited": false, "score": 0, "creation_date": 1508975207, "post_id": 46943367, "comment_id": 80834830, "body": "@nachum: updated. anyway it&#39;s <code>constexpr</code> so it wasn&#39;t a big deal to call it twice"}, {"owner": {"reputation": 515, "user_id": 832745, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/42d23de5379da839b4bf3fcad7411a22?s=128&d=identicon&r=PG", "display_name": "nachum", "link": "https://stackoverflow.com/users/832745/nachum"}, "edited": false, "score": 0, "creation_date": 1508975387, "post_id": 46943367, "comment_id": 80834871, "body": "Perfect. Thanks!"}], "tags": [], "owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "is_accepted": true, "score": 1, "last_activity_date": 1508975175, "last_edit_date": 1508975175, "creation_date": 1508972849, "answer_id": 46943367, "question_id": 46943190, "link": "https://stackoverflow.com/questions/46943190/how-to-return-a-tuple-for-a-constexpr/46943367#46943367", "title": "how to return a tuple for a constexpr", "body": "<p>You cannot use <code>std::tuple::operator=</code> because it's not <code>constexpr</code>. Your example can be converted to:</p>\n\n<pre><code>constexpr std::tuple&lt;int, int&gt; ret2 () {\n    int a = 1;\n    int b = 2;\n    return std::make_tuple(a, b);\n}\n\nconstexpr int ret1 () {\n    constexpr auto t = ret2();\n    return std::get&lt;0&gt;(t) + std::get&lt;1&gt;(t);\n}\n\nconstexpr auto tmp = ret1();\n</code></pre>\n\n<p>which does the same as the original, though I'm not sure if it satisfies your real needs.</p>\n"}], "owner": {"reputation": 515, "user_id": 832745, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/42d23de5379da839b4bf3fcad7411a22?s=128&d=identicon&r=PG", "display_name": "nachum", "link": "https://stackoverflow.com/users/832745/nachum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 617, "favorite_count": 0, "accepted_answer_id": 46943367, "answer_count": 2, "score": 2, "last_activity_date": 1508975175, "creation_date": 1508971694, "last_edit_date": 1508974915, "question_id": 46943190, "link": "https://stackoverflow.com/questions/46943190/how-to-return-a-tuple-for-a-constexpr", "title": "how to return a tuple for a constexpr", "body": "<p>After searching for a while, I still can't quite get this. Can someone please tell me how to return a tuple in a constant expression. Here's the code:</p>\n\n<pre><code>#include &lt;tuple&gt;\nconstexpr std::tuple&lt;int, int&gt; ret2 () {\n    int a = 1;\n    int b = 2;\n    return std::make_tuple(a, b);\n}\n\nconstexpr int ret1 () {\n    int a = 0;\n    int b = 0;\n    std::tie(a, b) = ret2();\n    return a + b;\n}\n\nconstexpr auto tmp = ret1();\n</code></pre>\n\n<p>clang++ -std=c++14 -o test test.cpp</p>\n\n<pre><code>test.cpp:15:16: error: constexpr variable 'tmp' must be initialized by a constant expression\nconstexpr auto tmp = ret1();\n               ^     ~~~~~~\ntest.cpp:11:17: note: non-constexpr function\n      'operator=&lt;std::__1::tuple&lt;int, int&gt;, void&gt;' cannot be used in a constant expression\n        std::tie(a, b) = ret2();\n                       ^\ntest.cpp:15:22: note: in call to 'ret1()'\nconstexpr auto tmp = ret1();\n                     ^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/tuple:899:9: note: \n      declared here\n        operator=(_Tuple&amp;&amp; __t) _NOEXCEPT_((is_nothrow_assignable&lt;base&amp;...\n        ^\n1 error generated.\n</code></pre>\n\n<p>clang --version</p>\n\n<pre><code>Apple LLVM version 9.0.0 (clang-900.0.38)\nTarget: x86_64-apple-darwin17.0.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n</code></pre>\n\n<p>I have tried changing this to <code>std::tuple&lt;int&amp;, int&amp;&gt;</code>, and using <code>std::ref</code>, etc... I just can't seem to find the correct sequence.</p>\n\n<p>Also, calling std::get 2x would be verbose in code and possibly wasteful in runtime. Is there some way to get both values through one call - as shown?</p>\n"}, {"tags": ["c++", "pointers", "shared-ptr"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1508971745, "post_id": 46943154, "comment_id": 80833819, "body": "The type of <code>q.front()</code> is <code>const std::shared_ptr&lt;Base&gt;&amp;</code>. That&#39;s not a <code>const std::shared_ptr&lt;Derived&gt;&amp;</code>. Sure, in this case you <i>know</i> that it&#39;s actually a <code>const std::shared_ptr&lt;Derived&gt;&amp;</code>, but the compiler doesn&#39;t. In general, it can&#39;t / you can&#39;t. Either your queue should be <code>std::queue&lt;std::shared_ptr&lt;Derived&gt;&gt;</code>, or you might need to downcast (downcasting is usually a sign of bad design, though)."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1508971786, "post_id": 46943154, "comment_id": 80833833, "body": "Remember: All <code>Derived</code> are <code>Base</code> but not all <code>Base</code> are <code>Derived</code>."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1508971794, "post_id": 46943154, "comment_id": 80833838, "body": "The &quot;best&quot; way is to use <code>virtual</code> functions."}, {"owner": {"reputation": 1393, "user_id": 1267833, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9fe1935d074ce793c65971b3ef42b09f?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/1267833/taylor"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1508972409, "post_id": 46943154, "comment_id": 80834049, "body": "@Justin are you suggesting that I make foo a member function and make it virtual? Or are you suggesting that the existence of a virtual function would help foo resolve this automatically? What if I can&#39;t put foo in a class?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 3, "creation_date": 1508972617, "post_id": 46943154, "comment_id": 80834103, "body": "Don\u2019t use shared_ptr as function parameter when you don\u2019t want to share ownership."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1508974116, "post_id": 46943154, "comment_id": 80834530, "body": "@Taylor You pretty much nailed it there. The only think you are missing is a virtual destructor for <code>Base</code>. The virtual destructor is required to allow the system to track down and destroy the correct objects when deleting a <code>Base</code>.  Leaving this out results in the dreaded Undefined Behaviour where many magical things could happen from the program appearing to work to the program raising an army of machines and exterminating all organic life on earth."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1508974592, "post_id": 46943154, "comment_id": 80834664, "body": "To answer the question in the edit: please don&#39;t ask two questions in one question ;) Without seeing all of the program I think it&#39;s impossible to say how the design could be improved. If you can make <code>foo</code> a virtual function and it solves a problem you can&#39;t solve in a simpler way: yes, do that."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1509053517, "post_id": 46943154, "comment_id": 80876069, "body": "Actually, these classes are not polymorphic (with the C++ definition of polymorphic class). There is no runtime polymorphism here."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1509167057, "post_id": 46943154, "comment_id": 80919789, "body": "@user4581301 &quot;<i>The virtual destructor is required to allow the system to track down and destroy the correct objects</i>&quot; actually it is not"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1509222087, "post_id": 46943154, "comment_id": 80934603, "body": "@curiousguy <b>[class.virtual]</b> says: &quot; A class that declares or inherits a virtual function is called a <i>polymorphic class.</i>&quot; <code>virtual void foo () { std:: cout &lt;&lt; &quot;base\\n&quot;; };</code> is a virtual function. Checking with <code>std::is_polymorphic</code>: <a href=\"https://ideone.com/duUS7r\" rel=\"nofollow noreferrer\">ideone.com/duUS7r</a>"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1509290278, "post_id": 46943154, "comment_id": 80950221, "body": "@user4581301 <code>class Base{ public:     Base() {}; }; </code> no virtual function here"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1509293199, "post_id": 46943154, "comment_id": 80951131, "body": "I see your confusion. My first comment was in response to the edit where Taylor started experimenting with <code>virtual</code> and asked if they had gotten anything wrong."}], "answers": [{"comments": [{"owner": {"reputation": 1393, "user_id": 1267833, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9fe1935d074ce793c65971b3ef42b09f?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/1267833/taylor"}, "edited": false, "score": 0, "creation_date": 1508972046, "post_id": 46943204, "comment_id": 80833925, "body": "so if I put a virtual in there not only will it resolve calls to that virtual function, but also it will resolve the objects type as well?"}, {"owner": {"reputation": 41, "user_id": 3289822, "user_type": "registered", "profile_image": "https://graph.facebook.com/595089246/picture?type=large", "display_name": "Usama Chaudhary", "link": "https://stackoverflow.com/users/3289822/usama-chaudhary"}, "reply_to_user": {"reputation": 1393, "user_id": 1267833, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9fe1935d074ce793c65971b3ef42b09f?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/1267833/taylor"}, "edited": false, "score": 0, "creation_date": 1508972322, "post_id": 46943204, "comment_id": 80834028, "body": "Because of that function it will be able to distinguish between the functionality that whether it should treat the child as one of its forms or not. So, yes, using virtual functions will solve your problem as Justin has already suggested it."}, {"owner": {"reputation": 41, "user_id": 3289822, "user_type": "registered", "profile_image": "https://graph.facebook.com/595089246/picture?type=large", "display_name": "Usama Chaudhary", "link": "https://stackoverflow.com/users/3289822/usama-chaudhary"}, "reply_to_user": {"reputation": 1393, "user_id": 1267833, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9fe1935d074ce793c65971b3ef42b09f?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/1267833/taylor"}, "edited": false, "score": 0, "creation_date": 1508972588, "post_id": 46943204, "comment_id": 80834099, "body": "The functions which are common in your base class and child class, you should declare them as virtual in your base class and override them in child classes according to your functionality."}], "tags": [], "owner": {"reputation": 41, "user_id": 3289822, "user_type": "registered", "profile_image": "https://graph.facebook.com/595089246/picture?type=large", "display_name": "Usama Chaudhary", "link": "https://stackoverflow.com/users/3289822/usama-chaudhary"}, "is_accepted": false, "score": 1, "last_activity_date": 1508971804, "creation_date": 1508971804, "answer_id": 46943204, "question_id": 46943154, "link": "https://stackoverflow.com/questions/46943154/why-doesnt-the-function-cast-a-pointer-correctly-from-base-class-to-derived-cl/46943204#46943204", "title": "Why doesn&#39;t the function cast a pointer correctly (from base class to derived class)", "body": "<p>You need to have a <strong>Virtual Function</strong> in your Base class otherwise it will treat it as <strong>Inheritance</strong> not <strong>Polymorphism</strong> so it will not refer your child object with base class pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 2, "last_activity_date": 1508973425, "last_edit_date": 1508973425, "creation_date": 1508972819, "answer_id": 46943362, "question_id": 46943154, "link": "https://stackoverflow.com/questions/46943154/why-doesnt-the-function-cast-a-pointer-correctly-from-base-class-to-derived-cl/46943362#46943362", "title": "Why doesn&#39;t the function cast a pointer correctly (from base class to derived class)", "body": "<p>Two changes are needed:</p>\n\n<p>Enabling polymorphism by adding a <code>virtual</code> function to the <code>Base</code> class. It is a good idea to have a virtual destructor, so</p>\n\n<pre><code>virtual ~Base() {};\n</code></pre>\n\n<p>Then, a <code>std::shared_ptr&lt;Base&gt;</code> can't be converted to <code>std::shared_ptr&lt;Derived&gt;</code> automatically. You have to use a <code>dynamic_pointer_cast</code>:</p>\n\n<pre><code>foo(dynamic_pointer_cast&lt;Derived&gt;(q.front())); // error\n</code></pre>\n\n<p>Please also check if this is really needed, because designs not requiring casts from base to derived are usually better.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/2b71c18a06e65a68\" rel=\"nofollow noreferrer\">Working code online</a></p>\n"}, {"comments": [{"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1508975959, "post_id": 46943439, "comment_id": 80835027, "body": "Well... We have not seen the program, so it&#39;s hard to give design recommendations. But mine was a quick answer of course :)"}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 2, "last_activity_date": 1508975112, "last_edit_date": 1508975112, "creation_date": 1508973312, "answer_id": 46943439, "question_id": 46943154, "link": "https://stackoverflow.com/questions/46943154/why-doesnt-the-function-cast-a-pointer-correctly-from-base-class-to-derived-cl/46943439#46943439", "title": "Why doesn&#39;t the function cast a pointer correctly (from base class to derived class)", "body": "<pre><code>std::queue&lt;std::shared_ptr&lt;Base&gt;&gt; q;\n</code></pre>\n\n<p>is a queue of (shared) pointers to <code>Base</code>s, so </p>\n\n<pre><code>q.front()\n</code></pre>\n\n<p>will return a <code>std::shared_ptr&lt;Base&gt;</code>.</p>\n\n<pre><code>void foo(const std::shared_ptr&lt;Derived&gt;&amp; dp)\n</code></pre>\n\n<p>Requires a <code>std::shared_ptr&lt;Derived&gt;</code></p>\n\n<p>While there is a relationship between <code>Base</code> and <code>Derived</code>, there is no relationship between <code>std::shared_ptr&lt;Base&gt;</code> and <code>std::shared_ptr&lt;Derived&gt;</code>. They are two different types of <code>shared_ptr</code>.</p>\n\n<p>\"Well then,\" you might think, \"I will just <code>shared_ptr::get</code> the pointer out. Winning!\" You can think that, but... no. <code>Derived</code> is a <code>Base</code>, but <code>Base</code> is not a <code>Derived</code>.</p>\n\n<p>At this point you have two options: cast <code>Base</code> to a <code>Derived</code> since you know dang well that it is a <code>Derived</code>, but this is only really viable in toy code where you DO know it's a <code>Derived</code>. Real code gets messier. It's a bad idea.</p>\n\n<p>So lets just skip to the good idea, shall we? Virtual Functions.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;queue&gt;\n\nclass Base\n{\npublic:\n    // none of the constructors do anything, so I got rid of them.\n    // code that's not there has no bugs.\n    virtual ~Base() = default; // must provide virtual destructor so that\n                               // correct destructors get called when a Base\n                               // is destroyed\n    virtual void foo() = 0; // pure virtual function. All descendants must\n                            // provide this function\n                            // Pure virtual has the side effect of  making \n                            // it impossible to instantiate a Base.\n                            // This may or may not be what you want. If it \n                            // isn't, remove the =0 and implement the function.\n/*\n    virtual void foo()\n    {\n        std::cout &lt;&lt; \"I pity the foo who derives from Base.\\n\"\n    }\n*/\n};\n\nclass Derived: public Base\n{\npublic:\n    void foo() // implement Base::foo\n    {\n        std::cout &lt;&lt; \"it runs\\n\";\n    }\n};\n\n\nint main()\n{\n    std::queue&lt;std::shared_ptr&lt;Base&gt;&gt; q;\n    q.push(std::make_shared&lt;Derived&gt;());\n    q.front()-&gt;foo();\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1393, "user_id": 1267833, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9fe1935d074ce793c65971b3ef42b09f?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/1267833/taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 46943439, "answer_count": 3, "score": 0, "last_activity_date": 1509056212, "creation_date": 1508971484, "last_edit_date": 1509056212, "question_id": 46943154, "link": "https://stackoverflow.com/questions/46943154/why-doesnt-the-function-cast-a-pointer-correctly-from-base-class-to-derived-cl", "title": "Why doesn&#39;t the function cast a pointer correctly (from base class to derived class)", "body": "<p>What's the best way to have a function cast a pointer to a base type, to a pointer to derived type? Why doesn't the following work automatically? </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;queue&gt;\n\nclass Base{\npublic:\n    Base() {};\n};\n\nclass Derived : public Base{\npublic:\n    Derived() : Base() {};\n};\n\nvoid foo(const std::shared_ptr&lt;Derived&gt;&amp; dp){ // \"wrong\" signature\n    std::cout &lt;&lt; \"it runs\\n\";\n}\n\nint main(int argc, char **argv)\n{\n    std::queue&lt;std::shared_ptr&lt;Base&gt;&gt; q;\n    q.push( std::make_shared&lt;Derived&gt;() );\n    foo(q.front()); // error\n\n    return 0;\n}\n</code></pre>\n\n<p>Replacing <code>foo</code> with the following works. However this might not enforce the argument to be a Derived class, which is the only thing it should be in the program I am writing.</p>\n\n<pre><code>void foo(const std::shared_ptr&lt;Base&gt;&amp; dp){\n    std::cout &lt;&lt; \"it runs\\n\";\n}\n</code></pre>\n\n<p>I could probably also cast the pointer manually. Any other ideas?</p>\n\n<p><strong>Edit:</strong> \na few people have suggested that I use virtual functions. I imagine that they mean I should put <code>foo</code> inside the classes as a virtual function like the following. However, if I am wrong, then please correct my understanding.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;queue&gt;\n\nclass Base{\npublic:\n    Base() {};\n    virtual void foo () { std:: cout &lt;&lt; \"base\\n\"; };\n};\n\nclass Derived : public Base{\npublic:\n    Derived() : Base() {};\n    void foo() {std::cout &lt;&lt; \"derived\\n\";};\n};\n\nint main(int argc, char **argv)\n{\n    std::queue&lt;std::shared_ptr&lt;Base&gt;&gt; q;\n    q.push( std::make_shared&lt;Derived&gt;() );\n    q.front()-&gt;foo();\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Edit 2:</strong>\nThanks, everyone, for the help. At the moment I've accepted an answer, but in my real program I will probably lean toward using @alain's casting answer, actually. In this program, my queue is full of events that I pop off one at a time. In addition to this queue, I have multiple event-handlers--depending on what type of derived class it is, I will use a different event handler's function. So it doesn't make much sense to me to think about these event's possessing the event-handlers function. Actually this makes me think I need to reconsider having inheritance in the events altogether. I wouldn't have this issue at all if there was some queue that would allow objects of different type. Maybe that's bad for other reasons, though, I'm not sure.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1508972636, "post_id": 46943134, "comment_id": 80834109, "body": "Show what you&#39;ve tried."}], "answers": [{"comments": [{"owner": {"reputation": 1016, "user_id": 8269032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2c7bff737322fb694d63211fb05a746?s=128&d=identicon&r=PG&f=1", "display_name": "Tazo leladze", "link": "https://stackoverflow.com/users/8269032/tazo-leladze"}, "reply_to_user": {"reputation": 219, "user_id": 6791322, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2RgQr.png?s=128&g=1", "display_name": "Alessandro95", "link": "https://stackoverflow.com/users/6791322/alessandro95"}, "edited": false, "score": 0, "creation_date": 1509010580, "post_id": 46947157, "comment_id": 80848620, "body": "do you know about SIGNAL and SLOT ?  if not, first of all <a href=\"http://doc.qt.io/qt-4.8/signalsandslots.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-4.8/signalsandslots.html</a> go to study this."}, {"owner": {"reputation": 219, "user_id": 6791322, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2RgQr.png?s=128&g=1", "display_name": "Alessandro95", "link": "https://stackoverflow.com/users/6791322/alessandro95"}, "edited": false, "score": 0, "creation_date": 1509016737, "post_id": 46947157, "comment_id": 80852794, "body": "Thanks! There are so many documentation and example for QT, wow! I can&#39;t believe it&#39;s an open source.   I didn&#39;t understand one thing: ::finished,         this, [=](QNetworkReply *reply)"}, {"owner": {"reputation": 1016, "user_id": 8269032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2c7bff737322fb694d63211fb05a746?s=128&d=identicon&r=PG&f=1", "display_name": "Tazo leladze", "link": "https://stackoverflow.com/users/8269032/tazo-leladze"}, "reply_to_user": {"reputation": 219, "user_id": 6791322, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2RgQr.png?s=128&g=1", "display_name": "Alessandro95", "link": "https://stackoverflow.com/users/6791322/alessandro95"}, "edited": false, "score": 1, "creation_date": 1509017043, "post_id": 46947157, "comment_id": 80852984, "body": "this is lambda signal slot.  <a href=\"https://wiki.qt.io/New_Signal_Slot_Syntax\" rel=\"nofollow noreferrer\">wiki.qt.io/New_Signal_Slot_Syntax</a> search lambda"}, {"owner": {"reputation": 219, "user_id": 6791322, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2RgQr.png?s=128&g=1", "display_name": "Alessandro95", "link": "https://stackoverflow.com/users/6791322/alessandro95"}, "edited": false, "score": 0, "creation_date": 1509055251, "post_id": 46947157, "comment_id": 80876761, "body": "I have a problem... This API call using https and I found SSL err"}, {"owner": {"reputation": 219, "user_id": 6791322, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2RgQr.png?s=128&g=1", "display_name": "Alessandro95", "link": "https://stackoverflow.com/users/6791322/alessandro95"}, "edited": false, "score": 0, "creation_date": 1509093848, "post_id": 46947157, "comment_id": 80889120, "body": "qt.network.ssl: QSslSocket: cannot call unresolved function SSLv23_client_method qt.network.ssl: QSslSocket: cannot call unresolved function SSL_CTX_new qt.network.ssl: QSslSocket: cannot call unresolved function SSL_library_init qt.network.ssl: QSslSocket: cannot call unresolved function ERR_get_error qt.network.ssl: QSslSocket: cannot call unresolved function ERR_get_error &quot;Error creating SSL context ()&quot;   -  I download OpenSSL and I put libeay32.dll and ssleay32.dll in project directory but it still not works"}, {"owner": {"reputation": 219, "user_id": 6791322, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2RgQr.png?s=128&g=1", "display_name": "Alessandro95", "link": "https://stackoverflow.com/users/6791322/alessandro95"}, "edited": false, "score": 0, "creation_date": 1509095053, "post_id": 46947157, "comment_id": 80889886, "body": "I solved. I put those dll into GT bin directory. They were in bad position. A question, if I would to put this call into a function that i call every 10 seconds to update data, have I to declare a private method in .h and put the code into it in .cpp file and maybe using Sleep() and calling it recursively? And another question: I don&#39;y want button in my application, I just would to open it, call api and print value and update every 10 seconds"}, {"owner": {"reputation": 1016, "user_id": 8269032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2c7bff737322fb694d63211fb05a746?s=128&d=identicon&r=PG&f=1", "display_name": "Tazo leladze", "link": "https://stackoverflow.com/users/8269032/tazo-leladze"}, "reply_to_user": {"reputation": 219, "user_id": 6791322, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2RgQr.png?s=128&g=1", "display_name": "Alessandro95", "link": "https://stackoverflow.com/users/6791322/alessandro95"}, "edited": false, "score": 0, "creation_date": 1509096533, "post_id": 46947157, "comment_id": 80890920, "body": "it is not recursive. forget recursive. you can use QTimer <a href=\"http://doc.qt.io/qt-5/qtimer.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtimer.html</a>. set interval your QTimer object and every timeout SLOT send request using manager."}], "tags": [], "owner": {"reputation": 1016, "user_id": 8269032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2c7bff737322fb694d63211fb05a746?s=128&d=identicon&r=PG&f=1", "display_name": "Tazo leladze", "link": "https://stackoverflow.com/users/8269032/tazo-leladze"}, "is_accepted": true, "score": 28, "last_activity_date": 1557789842, "last_edit_date": 1557789842, "creation_date": 1508998978, "answer_id": 46947157, "question_id": 46943134, "link": "https://stackoverflow.com/questions/46943134/how-do-i-write-a-qt-http-get-request/46947157#46947157", "title": "How do I write a Qt HTTP GET request?", "body": "<p>You need three things:</p>\n\n<ul>\n<li><code>QNetworkAccessManager * manager;</code> -> To send us a request.</li>\n<li><code>QNetworkRequest request;</code> -> what type of demand? get, post, ...</li>\n<li><code>QNetworkReply</code>. -> What's the answer?</li>\n</ul>\n\n<p>for more detail: </p>\n\n<ul>\n<li><p><a href=\"http://doc.qt.io/qt-5/qnetworkaccessmanager.html#details\" rel=\"noreferrer\">http://doc.qt.io/qt-5/qnetworkaccessmanager.html#details</a></p></li>\n<li><p><a href=\"http://doc.qt.io/qt-5/qnetworkrequest.html#details\" rel=\"noreferrer\">http://doc.qt.io/qt-5/qnetworkrequest.html#details</a></p></li>\n<li><p><a href=\"http://doc.qt.io/qt-5/qnetworkreply.html#details\" rel=\"noreferrer\">http://doc.qt.io/qt-5/qnetworkreply.html#details</a></p></li>\n</ul>\n\n<p>for example:</p>\n\n<p>.cpp</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>MainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n\n    manager = new QNetworkAccessManager();\n    QObject::connect(manager, &amp;QNetworkAccessManager::finished,\n        this, [=](QNetworkReply *reply) {\n            if (reply-&gt;error()) {\n                qDebug() &lt;&lt; reply-&gt;errorString();\n                return;\n            }\n\n            QString answer = reply-&gt;readAll();\n\n            qDebug() &lt;&lt; answer;\n        }\n    );\n}\n\nvoid MainWindow::on_pushButton_clicked()\n{\n    request.setUrl(QUrl(\"http://url\"));\n    manager-&gt;get(request);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n    delete manager;\n}\n</code></pre>\n\n<p>.h file</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>private:\n    Ui::MainWindow *ui;\n    QNetworkAccessManager *manager;\n    QNetworkRequest request;\n</code></pre>\n\n<p><strong>EDIT LAMBDA SLOT:</strong>\nif not use lambda SIGNAL SLOT.</p>\n\n<p>Discribe one slot in your .h file\nfor example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>private slots:\n    void managerFinished(QNetworkReply *reply);\n</code></pre>\n\n<p>in .cpp constructor replace lambda to</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>QObject::connect(manager, SIGNAL(finished(QNetworkReply*)),\n    this, SLOT(managerFinished(QNetworkReply*)));\n</code></pre>\n\n<p>now in your slot:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void MainWindow::managerFinished(QNetworkReply *reply) {\n    if (reply-&gt;error()) {\n        qDebug() &lt;&lt; reply-&gt;errorString();\n        return;\n    }\n\n    QString answer = reply-&gt;readAll();\n\n    qDebug() &lt;&lt; answer;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1016, "user_id": 8269032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2c7bff737322fb694d63211fb05a746?s=128&d=identicon&r=PG&f=1", "display_name": "Tazo leladze", "link": "https://stackoverflow.com/users/8269032/tazo-leladze"}, "edited": false, "score": 0, "creation_date": 1610989833, "post_id": 65364650, "comment_id": 116301506, "body": "Are you realy tested and make it work? I dont think so.."}, {"owner": {"reputation": 231, "user_id": 7211502, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WvlcP.jpg?s=128&g=1", "display_name": "BlueManCZ", "link": "https://stackoverflow.com/users/7211502/bluemancz"}, "reply_to_user": {"reputation": 1016, "user_id": 8269032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2c7bff737322fb694d63211fb05a746?s=128&d=identicon&r=PG&f=1", "display_name": "Tazo leladze", "link": "https://stackoverflow.com/users/8269032/tazo-leladze"}, "edited": false, "score": 0, "creation_date": 1611003726, "post_id": 65364650, "comment_id": 116306554, "body": "@Tazoleladze Yes, I did. Why?"}], "tags": [], "owner": {"reputation": 231, "user_id": 7211502, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WvlcP.jpg?s=128&g=1", "display_name": "BlueManCZ", "link": "https://stackoverflow.com/users/7211502/bluemancz"}, "is_accepted": false, "score": 1, "last_activity_date": 1608329984, "creation_date": 1608329984, "answer_id": 65364650, "question_id": 46943134, "link": "https://stackoverflow.com/questions/46943134/how-do-i-write-a-qt-http-get-request/65364650#65364650", "title": "How do I write a Qt HTTP GET request?", "body": "<p>I just managed to get HTTP requests working.</p>\n<p>This example simply downloads google HTML page and prints its content to the terminal.</p>\n<p><strong>main.cpp</strong></p>\n<pre><code>#include &lt;iostream&gt;\n#include &quot;main.h&quot;\n\nMyObject::MyObject(QApplication* app) {\n    manager = new QNetworkAccessManager(app);\n}\n\nvoid MyObject::TestConnection() const {\nauto status = connect(manager, &amp;QNetworkAccessManager::finished,\n                      this, &amp;MyObject::ReplyFinished);\n    qDebug() &lt;&lt; &quot;Connection status:&quot; &lt;&lt; status;\n\n    manager-&gt;get(QNetworkRequest(QUrl(&quot;https://www.google.com&quot;)));\n}\n\nvoid MyObject::ReplyFinished(QNetworkReply *reply) {\n    QString answer = reply-&gt;readAll();\n    qDebug() &lt;&lt; answer;\n    QApplication::quit();\n}\n\nint main(int argc, char *argv[]) {\n    auto *app = new QApplication(argc, argv);\n    auto myObject = new MyObject(app);\n    myObject-&gt;TestConnection();\n    return QApplication::exec();\n}\n</code></pre>\n<p><strong>main.h</strong></p>\n<pre><code>#include &lt;QtNetwork/QNetworkAccessManager&gt;\n#include &lt;QtNetwork/QNetworkReply&gt;\n#include &lt;QApplication&gt;\n\nclass MyObject : public QObject {\nQ_OBJECT\npublic:\n    explicit MyObject(QApplication* application);\n    void TestConnection() const;\n    static void ReplyFinished(QNetworkReply *reply);\n\n    QNetworkAccessManager *manager;\n};\n</code></pre>\n<p>To compile this on <strong>Linux</strong> with <strong>CMake</strong>, use following <strong>CMakeLists.txt</strong>:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>cmake_minimum_required(VERSION 3.17)\nproject(http)\n\nset(CMAKE_CXX_STANDARD 20)\nset(CMAKE_AUTOMOC ON) # important\n\nadd_executable(${PROJECT_NAME} main.cpp main.h)\n\nfind_package(Qt5Widgets REQUIRED)\nfind_package(Qt5Network REQUIRED) # important\n\ntarget_link_libraries(${PROJECT_NAME} Qt5::Widgets Qt5::Network) # important\n</code></pre>\n"}], "owner": {"reputation": 219, "user_id": 6791322, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/2RgQr.png?s=128&g=1", "display_name": "Alessandro95", "link": "https://stackoverflow.com/users/6791322/alessandro95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29620, "favorite_count": 5, "accepted_answer_id": 46947157, "answer_count": 2, "score": 11, "last_activity_date": 1608329984, "creation_date": 1508971373, "last_edit_date": 1532623426, "question_id": 46943134, "link": "https://stackoverflow.com/questions/46943134/how-do-i-write-a-qt-http-get-request", "title": "How do I write a Qt HTTP GET request?", "body": "<p>I'd like to write a small HTTP <code>GET</code> request in C++ but I'm not finding a solution.</p>\n\n<p>Maybe I have to use <code>QNetworkAccessManager</code> class but I'm not an expert in C++ and it's really hard to understand something about this class.</p>\n\n<p>I have an URL to fetch, which will give me a JSON response; I have to extract a single key (<code>key2</code>) and put the value in a variable. This is an example: </p>\n\n<pre><code>{\"key1\": \"value1\", \"key2\": \"**value2**\", \"key3\": \"value3\"}\n</code></pre>\n\n<p>This is my debug code:</p>\n\n<pre><code>char value[20]\nvalue = &lt;**value2**&gt;\n</code></pre>\n\n<p>After this I have to print this value in a form .ui</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 967, "user_id": 4539385, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/29be607a88cff96db2b54dd68abada43?s=128&d=identicon&r=PG&f=1", "display_name": "Programmerzzz", "link": "https://stackoverflow.com/users/4539385/programmerzzz"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1508971779, "post_id": 46943099, "comment_id": 80833827, "body": "do u have a quick short example to show me your idea?"}], "answers": [{"comments": [{"owner": {"reputation": 967, "user_id": 4539385, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/29be607a88cff96db2b54dd68abada43?s=128&d=identicon&r=PG&f=1", "display_name": "Programmerzzz", "link": "https://stackoverflow.com/users/4539385/programmerzzz"}, "edited": false, "score": 0, "creation_date": 1508973208, "post_id": 46943346, "comment_id": 80834290, "body": "ok.what if we want to compare each object in vector with all other objects and find those that have the same <code>pins</code> and <code>pinnumnamemap</code>"}], "tags": [], "owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "is_accepted": true, "score": 1, "last_activity_date": 1508973883, "last_edit_date": 1508973883, "creation_date": 1508972734, "answer_id": 46943346, "question_id": 46943099, "link": "https://stackoverflow.com/questions/46943099/find-objects-that-have-the-same-value-for-an-attribute-in-a-vector-of-objects/46943346#46943346", "title": "find objects that have the same value for an attribute in a vector of objects", "body": "<p>You would need to define a custom <code>operator==</code> to loop over <code>Pins</code> and pinNumNameMap (incidentally, I just answered another question about comparing custom objects in a vector <a href=\"https://stackoverflow.com/questions/46942657/find-iterator-in-a-stdvector/46943104#46943104\">here</a>).</p>\n\n<p>Here is what I came up with, although it might not be exactly what you need depending on whether you need all the entries in <code>Pins</code> and <code>pinNumNameMap</code> to match exactly or if comparing the size of the containers is enough.</p>\n\n<p>EDIT: I merged the two sections into one to illustrate the possible use.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;list&gt;\n#include &lt;functional&gt;\n\nstruct myObject\n{\n    int numberOfSymbols;\n    std::list&lt;int&gt; symbolNumbers;\n    std::list&lt;int&gt; Pins;\n    std::list&lt;std::string&gt; pinNumList;\n    std::map&lt;std::string, std::string&gt; pinNumNameMap;\n\n    friend bool operator == (const myObject&amp; _this, const myObject&amp; _other)\n    {\n        // Check if entry sizes match\n        if (_this.Pins.size() != _other.Pins.size() ||\n            _this.pinNumNameMap.size() != _this.pinNumNameMap.size())\n        {\n            return false;\n        }\n\n        // Now check if the things inside the entries also match\n        bool same(true);\n        for (auto this_it = _this.Pins.begin(), other_it = _other.Pins.begin(); this_it != _this.Pins.end(); ++this_it, ++other_it)\n        {\n            same &amp;= (*this_it == *other_it);\n        }\n\n        for (const auto&amp; name : _this.pinNumNameMap)\n        {\n            same &amp;= (_other.pinNumNameMap.find(name.first) != _other.pinNumNameMap.end() &amp;&amp;\n                    _other.pinNumNameMap.at(name.first) == name.second);\n        }\n        return same;\n    }\n\n};\n\n// std::reference_wrapper is used when you want to\n// store references to objects in a container like\n// std::vector (you can't store myObject&amp;)\ntypedef std::reference_wrapper&lt;myObject&gt; ObjRef;\n\nint main()\n{\n\n    std::vector&lt;myObject&gt; m_myObject;\n\n    // This is your comparison object.\n    // Use this to identify objectsin the original\n    // container with matching Pins and pinNumNameMaps.\n    myObject tmp;\n    tmp.Pins = {1, 2, 3};\n    tmp.pinNumNameMap =\n    {\n        {\"pin 1\", \"name 1\"},\n        {\"pin 2\", \"name 2\"},\n        {\"pin 3\", \"name 3\"}\n    };\n\n    std::vector&lt;ObjRef&gt; objectsWithCertainPins;\n\n    for (auto&amp; obj : m_myObject)\n    {\n        if (obj == tmp)\n        {\n            // Use std::reference_wrapper to avoid\n            // copying large myObject instances\n            objectsWithCertainPins.emplace_back(std::ref(obj));\n        }\n    }\n\n    // Now you can iterate over objects in your\n    // objectsWithCertainPins container.\n    for (auto&amp; obj : objectsWithCertainPins)\n    {\n        std::cout &lt;&lt; \"Pins:\";\n        for (const auto&amp; p : obj.get().Pins)\n        {\n            std::cout &lt;&lt; \" \" &lt;&lt; p;\n        }\n        std::cout &lt;&lt; \"\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 967, "user_id": 4539385, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/29be607a88cff96db2b54dd68abada43?s=128&d=identicon&r=PG&f=1", "display_name": "Programmerzzz", "link": "https://stackoverflow.com/users/4539385/programmerzzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 46943346, "answer_count": 1, "score": 0, "last_activity_date": 1508973883, "creation_date": 1508971186, "last_edit_date": 1508971904, "question_id": 46943099, "link": "https://stackoverflow.com/questions/46943099/find-objects-that-have-the-same-value-for-an-attribute-in-a-vector-of-objects", "title": "find objects that have the same value for an attribute in a vector of objects", "body": "<p>I have a random object as follows</p>\n\n<pre><code>struct myObject\n{\n    int numberOfSymbols;\n    std::vector&lt;int&gt; symbolNumbers;\n    std::vector&lt;int&gt; Pins;\n    std::vector&lt;std::string&gt; pinNumList;\n    std::map&lt;std::string, std::string&gt; pinNumNameMap;\n\n}\n\nstd::vector&lt;myObject&gt; m_myObject;\n</code></pre>\n\n<p>And a function loads up this myObject vector with information. I need to do some sanity checking on that populated data as follows:</p>\n\n<p>See what all objects have the same number of <code>Pins</code>and <code>pinNumNameMap</code>and then do an action based on the result of that comparison.</p>\n\n<p>I am not sure on how to group/find the objects that have the same number of pins because, sometimes this vector can grow as long as 50-100 objects. I am new to C++ coming from C#. In C# we use lambda expressoins/iterators etc to do this..not sure how do we do it in C++</p>\n"}, {"tags": ["c++", "arrays", "destructor"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 4, "creation_date": 1508971191, "post_id": 46943086, "comment_id": 80833665, "body": "You only need to <code>delete</code> if you use <code>new</code>. So no. This is an array literal that can be stored on the stack."}, {"owner": {"reputation": 55, "user_id": 8218649, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/41371f4d51e71165cb768280ecc4f036?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Bernat", "link": "https://stackoverflow.com/users/8218649/adrian-bernat"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1508971331, "post_id": 46943086, "comment_id": 80833714, "body": "@PaulRooney what is a way that I could declare this method as dynamic? Would it be <code>char ** arr = new char*[3];</code> ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1508972723, "post_id": 46943086, "comment_id": 80834141, "body": "Use std::string for strings. Your compiler should complain about a missing const."}, {"owner": {"reputation": 55, "user_id": 8218649, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/41371f4d51e71165cb768280ecc4f036?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Bernat", "link": "https://stackoverflow.com/users/8218649/adrian-bernat"}, "edited": false, "score": 1, "creation_date": 1508972783, "post_id": 46943086, "comment_id": 80834154, "body": "@manni66 I can\u2019t use the string class, it\u2019s a programming assignment and they want all strings to be stored as char*"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1508972979, "post_id": 46943086, "comment_id": 80834222, "body": "A pointer to a string constant has to be <code>const char*</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508974142, "post_id": 46943086, "comment_id": 80834534, "body": "@AdrianBernat -- <i>It\u2019s a programming assignment and they want all strings to be stored as char</i> * -- That shouldn&#39;t stop you from creating a home-made simple string class, so as to thwart these restrictions."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508978538, "post_id": 46943086, "comment_id": 80835625, "body": "@PaulMcKenzie The time required to do this is IMO prohibitive."}], "answers": [{"tags": [], "owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "is_accepted": false, "score": 1, "last_activity_date": 1508978466, "creation_date": 1508978466, "answer_id": 46944081, "question_id": 46943086, "link": "https://stackoverflow.com/questions/46943086/how-to-delete-an-array-of-char-in-c/46944081#46944081", "title": "How to delete an array of char* in C++", "body": "<blockquote>\n  <blockquote>\n    <p>Would I need to delete this member in the destructor?</p>\n  </blockquote>\n</blockquote>\n\n<p>No.</p>\n\n<p>And of course:</p>\n\n<blockquote>\n  <blockquote>\n    <p>I can\u2019t use the string class, it\u2019s a programming assignment and they want all strings to be stored as char*</p>\n  </blockquote>\n</blockquote>\n\n<p>This is a quite silly restriction in a C++ assignment.</p>\n"}], "owner": {"reputation": 55, "user_id": 8218649, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/41371f4d51e71165cb768280ecc4f036?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Bernat", "link": "https://stackoverflow.com/users/8218649/adrian-bernat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508978466, "creation_date": 1508971100, "question_id": 46943086, "link": "https://stackoverflow.com/questions/46943086/how-to-delete-an-array-of-char-in-c", "title": "How to delete an array of char* in C++", "body": "<p>I looked around the web for this but I did not find an answer. If my class has a protected member declared as such: <code>char * arr[3] = {\"Blah\", \"Blah\", \"Blah\"}</code>\nWould I need to delete this member in the destructor? If so, what is the correct syntax? Thank you!</p>\n"}, {"tags": ["c++", "makefile", "sdl", "clion", "sdl-ttf"], "comments": [{"owner": {"reputation": 2686, "user_id": 170501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9eac522c31c923f2bb5640c36d6af51a?s=128&d=identicon&r=PG", "display_name": "silent", "link": "https://stackoverflow.com/users/170501/silent"}, "edited": false, "score": 1, "creation_date": 1508971069, "post_id": 46943009, "comment_id": 80833623, "body": "It isn&#39;t linking against the TTF library. Have a glance at the generated Makefile to see if its attempting to link the TTF library and whether its set to the correct path."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7087036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PUGot.jpg?s=128&g=1", "display_name": "LaCumbancha", "link": "https://stackoverflow.com/users/7087036/lacumbancha"}, "edited": false, "score": 0, "creation_date": 1508975769, "post_id": 46943195, "comment_id": 80834975, "body": "I&#39;m stil getting the same error. I think that find_library and PKG_SEARCH_MODULO do almost the same, don&#39;t they?"}], "tags": [], "owner": {"reputation": 2686, "user_id": 170501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9eac522c31c923f2bb5640c36d6af51a?s=128&d=identicon&r=PG", "display_name": "silent", "link": "https://stackoverflow.com/users/170501/silent"}, "is_accepted": false, "score": 0, "last_activity_date": 1508971743, "creation_date": 1508971743, "answer_id": 46943195, "question_id": 46943009, "link": "https://stackoverflow.com/questions/46943009/clion-undefined-reference-using-sdl-ttf/46943195#46943195", "title": "CLIon - Undefined reference using SDL_TTF", "body": "<p>try including:</p>\n\n<pre><code>find_library(SDL2TTF_LIBRARIES SDL_ttf)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7087036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PUGot.jpg?s=128&g=1", "display_name": "LaCumbancha", "link": "https://stackoverflow.com/users/7087036/lacumbancha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 792, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508971743, "creation_date": 1508970522, "question_id": 46943009, "link": "https://stackoverflow.com/questions/46943009/clion-undefined-reference-using-sdl-ttf", "title": "CLIon - Undefined reference using SDL_TTF", "body": "<p>I'm coding a small game and I'm using SDLs libraries for the graphics (with a CLion IDE). I've already downloaded SDL2, SDL2_image and SDL2_ttf. In the code, I include the three libraries and use TTF to make some text:</p>\n\n<pre><code>#include &lt;SDL2/SDL.h&gt;\n#include &lt;SDL2/SDL_ttf.h&gt;\n\nbool foo() {\n\n    if(SDL_Init(SDL_INIT_EVERYTHING)) {\n        return false;\n    }\n\n    if (TTF_Init() == -1){\n        cerr &lt;&lt; \"Error .\" &lt;&lt; endl;\n    }\n\n    TTF_Font* font = TTF_OpenFont(\"Sans.ttf\", 20);\n    SDL_Color color = {100, 0, 0};\n    SDL_Surface* text;\n\n    ...\n</code></pre>\n\n<p>Also, I've the following makefile linking this libraries:</p>\n\n<pre><code>set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11 -pthread\")\n\nset(CLIENT_FILES core/client.h core/client.cpp)\nset(CONFIGURATION_FILES configuration/configurationClient.cpp configuration/configurationClient.h)\nfile(GLOB_RECURSE GAME_FILES \"game/*.cpp\" \"game/*.h\")\nfile(GLOB_RECURSE MENU_FILES \"menu/*.cpp\" \"menu/*.h\")\n\nadd_executable(client main.cpp ${CLIENT_FILES} ${MENU_FILES} ${CONFIGURATION_FILES} ${GAME_FILES})\n\ninclude(FindPkgConfig)\n\nPKG_SEARCH_MODULE(SDL2 REQUIRED sdl2)\nPKG_SEARCH_MODULE(SDL2IMAGE REQUIRED SDL2_image&gt;=2.0.0)\nPKG_SEARCH_MODULE(SDL2TTF REQUIRED SDL2_ttf&gt;=2.0.0)\n\ninclude_directories(${SDL2_INCLUDE_DIRS} ${SDL2IMAGE_INCLUDE_DIRS} ${SDL2TTF_INCLUDE_DIRS})\n\ntarget_link_libraries(client common SDLPrimitives ${SDL2_LIBRARIES} ${SDL2IMAGE_LIBRARIES} ${SDL2TTF_LIBRARIES})\n</code></pre>\n\n<p>My problem is that the IDE recognize the SDL_ttf library (it doesn't mark in red as an error the TTF functions), but when I try to compile the code, I got many undefined references.</p>\n\n<pre><code>CMakeFiles/client.dir/menu/menuClientVisual.cpp.o: In function `foo()':\nsource/client/menu/foo.cpp:137: undefined reference to `TTF_Init'\nsource/client/menu/foo.cpp:141: undefined reference to `TTF_OpenFont'\nsource/client/menu/foo.cpp:145: undefined reference to `TTF_RenderText_Solid'\nsource/client/menu/foo.cpp:152: undefined reference to `TTF_RenderText_Solid'\nsource/client/menu/foo.cpp:157: undefined reference to `TTF_SetFontStyle'\nsource/client/menu/foo.cpp:160: undefined reference to `TTF_RenderText_Solid'\n</code></pre>\n\n<p>Any idea?</p>\n"}, {"tags": ["c++", "c++11", "pass-by-reference", "smart-pointers"], "comments": [{"owner": {"reputation": 109, "user_id": 7945066, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3DsQYwrIm2M/AAAAAAAAAAI/AAAAAAAAA4Y/f5XIpAPVkBs/photo.jpg?sz=128", "display_name": "pellucidcoder", "link": "https://stackoverflow.com/users/7945066/pellucidcoder"}, "edited": false, "score": 1, "creation_date": 1508970149, "post_id": 46942927, "comment_id": 80833303, "body": "If you are allowed to change the signature of <code>bar</code> then why not just make it <code>void bar(MyStruct&amp; s)</code> just like <code>foo</code>?"}, {"owner": {"reputation": 5594, "user_id": 1645784, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/xZW4T.jpg?s=128&g=1", "display_name": "Aleksei Petrenko", "link": "https://stackoverflow.com/users/1645784/aleksei-petrenko"}, "edited": false, "score": 0, "creation_date": 1508970173, "post_id": 46942927, "comment_id": 80833314, "body": "What behavior do you expect? You should be able to modify the object in both cases."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 3, "creation_date": 1508970266, "post_id": 46942927, "comment_id": 80833340, "body": "Either <code>bar</code> actually requires a <code>std::shared_ptr</code> to work correctly, or it only requires a <code>MyStruct&amp;</code> to work correctly. If the latter, <code>bar</code> is written incorrectly and should be fixed."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1508970701, "post_id": 46942927, "comment_id": 80833499, "body": "Insofar as there is a low level technical solution to your problem, it likely involves <code>enabled_shared_from_this</code>. That said, I think the design is the issue here. If bar requires ownership, and <code>mainFunction</code> calls bar, then transitively <code>mainFunction</code> requires ownership too. But free functions should relatively rarely need to take ownership anyhow."}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1508970627, "post_id": 46942993, "comment_id": 80833473, "body": "It may be hacky, but it&#39;s clever and I didn&#39;t even know this was possible. Nice. :-)"}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1508970683, "post_id": 46942993, "comment_id": 80833492, "body": "I&#39;d appreciate a few words on how this &#39;hack&#39; works."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 1, "creation_date": 1508970747, "post_id": 46942993, "comment_id": 80833519, "body": "@CaptainGiraffe: See constructor note 8 <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/shared_ptr\" rel=\"nofollow noreferrer\">here</a>. Basically, the outer constructor does reference counting for the first argument, but all other behaviors are in terms of the second argument. So it&#39;s managing a null pointer (the first argument), while exposing the second argument as if it were managing it. It&#39;s not safe if the function being called keeps its own copy though, since now it believes it can extend the lifetime of the value when that&#39;s not true (the lifetime of <code>s</code> is not tied to the shared pointer at all)."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 2, "creation_date": 1508970897, "post_id": 46942993, "comment_id": 80833563, "body": "@CaptainGiraffe: No, you don&#39;t get to keep the pointer, that&#39;s the whole point. So no need for thanks."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 1, "creation_date": 1508970977, "post_id": 46942993, "comment_id": 80833592, "body": "Can&#39;t we just all share and get along!"}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 4, "last_activity_date": 1508970431, "creation_date": 1508970431, "answer_id": 46942993, "question_id": 46942927, "link": "https://stackoverflow.com/questions/46942927/how-to-pass-in-a-stdshared-ptr-but-do-pass-by-reference-job/46942993#46942993", "title": "how to pass in a std::shared_ptr but do &quot;pass by reference&quot; job?", "body": "<p>You could use a null-aliasing shared pointer:</p>\n\n<pre><code>bar(std::shared_ptr&lt;MyStruct&gt;(std::shared_ptr&lt;MyStruct&gt;(), &amp;s));\n</code></pre>\n\n<p>The temporary shared pointer created in this call shares ownership with a null shared pointer, so it does nothing on destruction.</p>\n\n<p>This is perhaps a bit of a hack.</p>\n"}], "owner": {"reputation": 388, "user_id": 4285543, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh5.googleusercontent.com/-1hjlOj5JWxM/AAAAAAAAAAI/AAAAAAAAADc/mOs5vOi4q28/photo.jpg?sz=128", "display_name": "Emerson Xu", "link": "https://stackoverflow.com/users/4285543/emerson-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 46942993, "answer_count": 1, "score": 0, "last_activity_date": 1508972373, "creation_date": 1508969956, "last_edit_date": 1508972373, "question_id": 46942927, "link": "https://stackoverflow.com/questions/46942927/how-to-pass-in-a-stdshared-ptr-but-do-pass-by-reference-job", "title": "how to pass in a std::shared_ptr but do &quot;pass by reference&quot; job?", "body": "<p>I have a main function that takes in a reference of a class object and try to update it via <code>foo()</code> and <code>bar()</code>, however, the <code>bar()</code> only allows to pass into a shared_ptr type. How can I guarantee it behaves as expected, assuming I am NOT allowed to modify the signature of <code>bar()</code>.</p>\n\n<pre><code>void foo(MyStruct&amp; s) {\n  modifyS(s);\n}\n\nvoid bar(std::shared_ptr&lt;MyStruct&gt; s) {\n  modifySAgain(s);\n}\n\nmainFunction(MyStruct&amp; s) {\n  foo(s);\n  // bar(?) how should I do here such that s would be modified by bar()\n  // bar(std::make_shared&lt;Mystruct&gt;(std::move(s)) ?\n}\n</code></pre>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1508969833, "post_id": 46942861, "comment_id": 80833209, "body": "Its C++, use std::list."}, {"owner": {"reputation": 787, "user_id": 5666503, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/03717a78503b9c561206ff55176b3174?s=128&d=identicon&r=PG&f=1", "display_name": "Gustavo", "link": "https://stackoverflow.com/users/5666503/gustavo"}, "edited": false, "score": 0, "creation_date": 1508969877, "post_id": 46942861, "comment_id": 80833219, "body": "Is there any specific reason not using std::list?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1508969987, "post_id": 46942861, "comment_id": 80833252, "body": "One option is <a href=\"http://en.cppreference.com/w/cpp/language/friend\" rel=\"nofollow noreferrer\">declare <code>compareLists</code> to be a friend of <code>List</code>.</a> Another is to make <code>compareLists</code> a member function. I think I prefer <code>friend</code> here."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1508970018, "post_id": 46942861, "comment_id": 80833267, "body": "Unless this is a school/collage exercise start from here <code>std::set_intersection</code>: <a href=\"http://en.cppreference.com/w/cpp/algorithm/set_intersection\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/set_intersection</a>"}, {"owner": {"reputation": 9, "user_id": 6163623, "user_type": "registered", "profile_image": "https://graph.facebook.com/123242564741872/picture?type=large", "display_name": "Joseph Tillman", "link": "https://stackoverflow.com/users/6163623/joseph-tillman"}, "edited": false, "score": 0, "creation_date": 1508971636, "post_id": 46942861, "comment_id": 80833794, "body": "It is for a school exercise or else I would use std::list. Also, I haven&#39;t learned friend yet."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1508976520, "post_id": 46942861, "comment_id": 80835176, "body": "[OT]: Rule of 5/3/0. (even if your currently don&#39;t broke it as you leak...)"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6163623, "user_type": "registered", "profile_image": "https://graph.facebook.com/123242564741872/picture?type=large", "display_name": "Joseph Tillman", "link": "https://stackoverflow.com/users/6163623/joseph-tillman"}, "edited": false, "score": 0, "creation_date": 1508978242, "post_id": 46943048, "comment_id": 80835554, "body": "struct node is in the private section of List, so I can&#39;t use List::node* in this function"}], "tags": [], "owner": {"reputation": 6050, "user_id": 1030410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e13caf6116a45714153bd145754fd292?s=128&d=identicon&r=PG", "display_name": "Daniel Trugman", "link": "https://stackoverflow.com/users/1030410/daniel-trugman"}, "is_accepted": false, "score": 0, "last_activity_date": 1508970798, "creation_date": 1508970798, "answer_id": 46943048, "question_id": 46942861, "link": "https://stackoverflow.com/questions/46942861/chow-do-i-create-a-function-that-receives-two-sorted-linked-lists-and-return/46943048#46943048", "title": "(C++)How do I create a function that receives two sorted linked lists and returns a third list of elements appearing in both lists?", "body": "<p>Assuming this is a school exercise (because otherwise, USE <code>std::list</code>), this is a classic case of publishing an iterator, like this:</p>\n\n<pre><code>List::node* List::NextNode(List::node* curr) {\n    return (curr == NULL) ? head : curr-&gt;next;\n}\n</code></pre>\n\n<p>And the use it in your <code>compareLists</code>:</p>\n\n<pre><code>void compareLists(List L1, List L2) {\n    List::node* iter1 = NULL;\n    List::node* iter2 = NULL;\n\n    while ((iter1 = L1.NextNode(iter1)) != NULL &amp;&amp;\n           (iter2 = L2.NextNode(iter2)) != NULL)\n    {\n        if (iter1-&gt;data == iter2-&gt;data) {\n            // Use shared item\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 0, "last_activity_date": 1508977140, "creation_date": 1508977140, "answer_id": 46943933, "question_id": 46942861, "link": "https://stackoverflow.com/questions/46942861/chow-do-i-create-a-function-that-receives-two-sorted-linked-lists-and-return/46943933#46943933", "title": "(C++)How do I create a function that receives two sorted linked lists and returns a third list of elements appearing in both lists?", "body": "<p><code>struct node</code> is indeed in private section of <code>List</code>,<br>\nwhereas you provide public getter <code>List::node* List::getHead()</code>.</p>\n\n<p>So from outside of the class, we cannot use name <code>List::node</code>. we can work around that using <code>auto</code>:</p>\n\n<pre><code>void compareLists(const List&amp; L1, const List&amp; L2){\n    const auto* L1HeadPtr = L1.getHead();\n    const auto* L2HeadPtr = L2.getHead();\n    // ...\n}\n</code></pre>\n\n<p>Simpler and more intuitive would be to move struct <code>List::node</code> in public section (as you provide <code>getHead()</code>):</p>\n\n<pre><code>class List {\npublic:\n struct node {\n    int data;\n    node* next = nullptr;\n  };\n\nprivate:\n  node* head = nullptr;\n\npublic:\n\n  List();\n  void AddNode(int addData);\n  void DeleteNode(int delData);\n  void PrintList() const;\n  node* getHead();\n};\n</code></pre>\n\n<p>but unfortunately, with your getter <code>getHead()</code>, you broke encapsulation of your class as <code>node*</code> content can be modified.</p>\n"}], "owner": {"reputation": 9, "user_id": 6163623, "user_type": "registered", "profile_image": "https://graph.facebook.com/123242564741872/picture?type=large", "display_name": "Joseph Tillman", "link": "https://stackoverflow.com/users/6163623/joseph-tillman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 46943933, "answer_count": 2, "score": -2, "last_activity_date": 1509562904, "creation_date": 1508969536, "last_edit_date": 1509562904, "question_id": 46942861, "link": "https://stackoverflow.com/questions/46942861/chow-do-i-create-a-function-that-receives-two-sorted-linked-lists-and-return", "title": "(C++)How do I create a function that receives two sorted linked lists and returns a third list of elements appearing in both lists?", "body": "<p>Because this is an assignment, I can not use STD::List.</p>\n\n<p>Struct List::Node is private so I can't access it from the compareLists function. How can I use the getHead() function to pass the head pointer for each list to a variable I can use to navigate through the list? </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include&lt;list&gt;\n#include \"List.h\"\n\nusing namespace std;\n\nvoid compareLists(List L1, List L2){\n    List::node* L1HeadPtr = L1.getHead();\n    List::node* L2HeadPtr = L2.getHead();\n}\n</code></pre>\n\n<p>List.h:</p>\n\n<pre><code>#ifndef LIST_H\n#define LIST_H\n\nclass List {\nprivate:\n\n struct node {\n    int data;\n    node* next;\n  };\n\n  node* head;\n  node* curr;\n  node* temp;\n\npublic:\n\n  List();\n  void AddNode(int addData);\n  void DeleteNode(int delData);\n  void PrintList();\n  node* getHead();\n};\n #endif // LIST_H\n</code></pre>\n\n<p>Separate file:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n\n#include \"List.h\"\n\nusing namespace std;\n\nList::List(){\n    head = NULL;\n    curr = NULL;\n    temp = NULL;\n}\n\nList::node* List::getHead(){\n    return head;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "polymorphism", "virtual-functions", "lnk2019"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1508969683, "post_id": 46942851, "comment_id": 80833145, "body": "You can\u2019t call a virtual function of a derived class in the constructor of the base."}, {"owner": {"reputation": 21, "user_id": 7239860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395b1aee6f21dcdd958264f050b53e8b?s=128&d=identicon&r=PG", "display_name": "Yang", "link": "https://stackoverflow.com/users/7239860/yang"}, "edited": false, "score": 0, "creation_date": 1508970012, "post_id": 46942851, "comment_id": 80833261, "body": "@manni66 you mean in the moveBy and setSize functions?But I commented them and the problem still persists"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1508970087, "post_id": 46942851, "comment_id": 80833289, "body": "Why should I call these functions constructor?"}, {"owner": {"reputation": 21, "user_id": 7239860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395b1aee6f21dcdd958264f050b53e8b?s=128&d=identicon&r=PG", "display_name": "Yang", "link": "https://stackoverflow.com/users/7239860/yang"}, "edited": false, "score": 0, "creation_date": 1508970254, "post_id": 46942851, "comment_id": 80833335, "body": "@manni66 I see. Sorry for misunderstanding."}], "owner": {"reputation": 21, "user_id": 7239860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395b1aee6f21dcdd958264f050b53e8b?s=128&d=identicon&r=PG", "display_name": "Yang", "link": "https://stackoverflow.com/users/7239860/yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "closed_date": 1508969689, "answer_count": 0, "score": 0, "last_activity_date": 1508969508, "creation_date": 1508969508, "question_id": 46942851, "link": "https://stackoverflow.com/questions/46942851/one-of-my-member-functions-which-is-a-purely-virtual-void-has-an-lnk-2019-erro", "closed_reason": "Duplicate", "title": "One of my member functions, which is a purely virtual void, has an LNK 2019 error", "body": "<p>I am working on drawing shapes using strings with C++. So I wrote a class of Shapes that serves as a base class to 2 derived classes, which are Diamond and Square. My virtual void function setStars() basically stores the coordinates of the points of the shape that I am going to print on a board of strings. Nevertheless, the function is involved with a LNK 2019 problem which I have no idea why. This is my code for the base class.</p>\n\n<pre><code>#ifndef _SHAPE_\n#define _SHAPE_\n\n#include &lt;utility&gt;\n#include &lt;vector&gt;\n\nclass Shape {\nprotected:\n    int x, y, sz;//x-coordinate, y-coordinate, size of Shape\n\n\npublic:\n    std::vector&lt;std::pair&lt;int, int&gt;&gt; listOfPoints;\n    Shape(int xPos, int yPos, int size) : x(xPos), y(yPos), sz(size) { setStars(); }\n    virtual void setStars() = 0;\n    void moveBy(int xMove, int yMove) {\n        x += xMove;\n        y += yMove;\n        setStars();\n    }\n    void setSize(int size) {\n        sz = size;\n        setStars();\n    }\n    virtual ~Shape() = default;\n\n};\n\n#endif\n</code></pre>\n\n<p>The setStars() function is defined in the other derived classes. But I get this error:</p>\n\n<pre><code>unresolved external symbol \"public: virtual void __thiscall Shape::setStars(void)\" (?setStars@Shape@@UAEXXZ) referenced in function \"public: __thiscall Shape::Shape(int,int,int)\" (??0Shape@@QAE@HHH@Z)    \n</code></pre>\n\n<p>Can someone explain to me what is wrong?</p>\n"}, {"tags": ["c++", "function", "syntax"], "comments": [{"owner": {"reputation": 2664, "user_id": 3746375, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/32ac4c7ec41b718886aa7b914265f040?s=128&d=identicon&r=PG&f=1", "display_name": "bhzag", "link": "https://stackoverflow.com/users/3746375/bhzag"}, "edited": false, "score": 0, "creation_date": 1508969361, "post_id": 46942783, "comment_id": 80833039, "body": "What command are you using to compile? Certain compiler flags will throw an error if you don&#39;t use arguments passed to a function."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1508969444, "post_id": 46942783, "comment_id": 80833070, "body": "The error messages aren&#39;t as helpful as they could be, but the indentation of the code lines you added is a clue:  you have semicolons that you need to remove."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1508969449, "post_id": 46942783, "comment_id": 80833073, "body": "Note your question title describes the warnings, not the errors. So which lines are 56 and 91?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1508969518, "post_id": 46942783, "comment_id": 80833091, "body": "Unrelated: <code>cout &lt;&lt; endl                          &lt;&lt; &quot;Total # of Students: &quot; &lt;&lt; count;                     &lt;&lt; &quot;Overall Class Average: &quot; &lt;&lt; overallAvg;</code> Got an extra semi colon in there."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1508969596, "post_id": 46942783, "comment_id": 80833114, "body": "Unrelated: Recommended reading: <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a>"}, {"owner": {"reputation": 787, "user_id": 5666503, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/03717a78503b9c561206ff55176b3174?s=128&d=identicon&r=PG&f=1", "display_name": "Gustavo", "link": "https://stackoverflow.com/users/5666503/gustavo"}, "edited": false, "score": 1, "creation_date": 1508969663, "post_id": 46942783, "comment_id": 80833139, "body": "You try to modify values which are not passed by reference so the modification will not be accessible in main"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 7516097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-8_8MRSuDdD4/AAAAAAAAAAI/AAAAAAAAABQ/jDP1zIXluok/photo.jpg?sz=128", "display_name": "Charles Carrington", "link": "https://stackoverflow.com/users/7516097/charles-carrington"}, "edited": false, "score": 0, "creation_date": 1508970377, "post_id": 46942843, "comment_id": 80833386, "body": "i changed what you suggested, but now it just crashes.  here is the updated code: <a href=\"https://pastebin.com/60haZ7eV\" rel=\"nofollow noreferrer\">pastebin.com/60haZ7eV</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 91, "user_id": 7516097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-8_8MRSuDdD4/AAAAAAAAAAI/AAAAAAAAABQ/jDP1zIXluok/photo.jpg?sz=128", "display_name": "Charles Carrington", "link": "https://stackoverflow.com/users/7516097/charles-carrington"}, "edited": false, "score": 0, "creation_date": 1508971260, "post_id": 46942843, "comment_id": 80833685, "body": "Why are you taking all those parameters that you never use? The function reads the values from the file, not from the parameters."}, {"owner": {"reputation": 91, "user_id": 7516097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-8_8MRSuDdD4/AAAAAAAAAAI/AAAAAAAAABQ/jDP1zIXluok/photo.jpg?sz=128", "display_name": "Charles Carrington", "link": "https://stackoverflow.com/users/7516097/charles-carrington"}, "edited": false, "score": 0, "creation_date": 1508971333, "post_id": 46942843, "comment_id": 80833715, "body": "do i not have to pass the values between the different functions?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 91, "user_id": 7516097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-8_8MRSuDdD4/AAAAAAAAAAI/AAAAAAAAABQ/jDP1zIXluok/photo.jpg?sz=128", "display_name": "Charles Carrington", "link": "https://stackoverflow.com/users/7516097/charles-carrington"}, "edited": false, "score": 0, "creation_date": 1508971428, "post_id": 46942843, "comment_id": 80833738, "body": "You would if the different functions didn&#39;t read them from the file. But both functions get the variables from the file. I think you need to go back and study how function arguments are used."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1508969828, "last_edit_date": 1508969828, "creation_date": 1508969467, "answer_id": 46942843, "question_id": 46942783, "link": "https://stackoverflow.com/questions/46942783/parameter-not-being-used-in-function-c/46942843#46942843", "title": "Parameter not being used in function C++", "body": "<p><code>printGrade</code> takes <code>overallAvg</code> as an argument. But it never uses the argument, instead it reassigns the variable with:</p>\n\n<pre><code>overallAvg = gradeSum / count;\n</code></pre>\n\n<p><code>gradeCalc()</code> has the same problem. In fact, these functions seem to do all the same calculations.</p>\n\n<p>You're also calling the functions with uninitialized variables.</p>\n\n<p>If <code>overallAvg</code> is supposed to be an output argument, you need to make it a reference parameter.</p>\n\n<pre><code>void printGrade(int studentID, int count, double midterm, double finalExam, double researchPaper, double groupProject, double participation, double studentAvg, double &amp;overallAvg, double gradeSum)\n</code></pre>\n\n<p>The expression error is due to these lines:</p>\n\n<pre><code>                cout &lt;&lt; endl\n                     &lt;&lt; \"Total # of Students: \" &lt;&lt; count;\n                &lt;&lt; \"Overall Class Average: \" &lt;&lt; overallAvg;\n</code></pre>\n\n<p>The semicolon at the end of the second line is ending the <code>cout</code>, so the third line is starting with an invalid operator. Get rid of that semicolon.</p>\n\n<pre><code>                cout &lt;&lt; endl\n                     &lt;&lt; \"Total # of Students: \" &lt;&lt; count\n                     &lt;&lt; \"Overall Class Average: \" &lt;&lt; overallAvg;\n</code></pre>\n\n<p>This might also fix the warning about the unused variable, since you're using the variable in this output statement.</p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 7516097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-8_8MRSuDdD4/AAAAAAAAAAI/AAAAAAAAABQ/jDP1zIXluok/photo.jpg?sz=128", "display_name": "Charles Carrington", "link": "https://stackoverflow.com/users/7516097/charles-carrington"}, "edited": false, "score": 0, "creation_date": 1508970997, "post_id": 46942875, "comment_id": 80833597, "body": "i have made those changes, but now it just crashes. here is the updated code: <a href=\"https://pastebin.com/60haZ7eV\" rel=\"nofollow noreferrer\">pastebin.com/60haZ7eV</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 91, "user_id": 7516097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-8_8MRSuDdD4/AAAAAAAAAAI/AAAAAAAAABQ/jDP1zIXluok/photo.jpg?sz=128", "display_name": "Charles Carrington", "link": "https://stackoverflow.com/users/7516097/charles-carrington"}, "edited": false, "score": 0, "creation_date": 1508972150, "post_id": 46942875, "comment_id": 80833964, "body": "@CharlesCarrington sounds like you have a new question. Take a few kicks at solving it, Gustavo &#39;s comment under the question may help, and ask a new question if you get stuck."}], "tags": [], "owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "is_accepted": true, "score": 2, "last_activity_date": 1508969620, "creation_date": 1508969620, "answer_id": 46942875, "question_id": 46942783, "link": "https://stackoverflow.com/questions/46942783/parameter-not-being-used-in-function-c/46942875#46942875", "title": "Parameter not being used in function C++", "body": "<p>You have some syntax issues you need to resolve:</p>\n\n<p><code>printGrade()</code>:</p>\n\n<pre><code>    outfile &lt;&lt; endl\n            &lt;&lt; \"Total # of Students: \" &lt;&lt; count; //&lt;-- bad semicolon\n    &lt;&lt; \"Overall Class Average: \" &lt;&lt; overallAvg;\n</code></pre>\n\n<p><code>gradeCalc()</code>:</p>\n\n<pre><code>    cout &lt;&lt; endl\n            &lt;&lt; \"Total # of Students: \" &lt;&lt; count; //&lt;-- bad semicolon\n    &lt;&lt; \"Overall Class Average: \" &lt;&lt; overallAvg;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1508972078, "post_id": 46942876, "comment_id": 80833935, "body": "Hiding the error rather than fixing it is poor solution."}], "tags": [], "owner": {"reputation": 5458, "user_id": 311148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b0922ad7a0d0aff5b1200fa928e67c26?s=128&d=identicon&r=PG", "display_name": "veda", "link": "https://stackoverflow.com/users/311148/veda"}, "is_accepted": false, "score": -1, "last_activity_date": 1508969624, "creation_date": 1508969624, "answer_id": 46942876, "question_id": 46942783, "link": "https://stackoverflow.com/questions/46942783/parameter-not-being-used-in-function-c/46942876#46942876", "title": "Parameter not being used in function C++", "body": "<p>It depends on the compiler. Compile with <code>-Wno-unused-parameter</code> flag. It should do the trick.</p>\n"}], "owner": {"reputation": 91, "user_id": 7516097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-8_8MRSuDdD4/AAAAAAAAAAI/AAAAAAAAABQ/jDP1zIXluok/photo.jpg?sz=128", "display_name": "Charles Carrington", "link": "https://stackoverflow.com/users/7516097/charles-carrington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 46942875, "answer_count": 3, "score": 0, "last_activity_date": 1508970791, "creation_date": 1508969138, "last_edit_date": 1508970791, "question_id": 46942783, "link": "https://stackoverflow.com/questions/46942783/parameter-not-being-used-in-function-c", "title": "Parameter not being used in function C++", "body": "<p>I am making a program that will read from a file and output the data both on screen and in a file.  I had it working prior to adding an Overall Average and Total Count, but now it just crashes with no errors in the compliling process. </p>\n\n<p>I have searched similar threads, but am unable to find anything that helps me fix these errors.  Any assistance is appreciated.  </p>\n\n<p>Edit: updated teh code with some of the changes suggested.  Now just crashing w/ no errors. </p>\n\n<pre><code>                          #include &lt;iostream&gt;\n            #include &lt;string&gt;\n            #include &lt;limits&gt;\n            #include &lt;cmath&gt;\n            #include &lt;iomanip&gt;\n            #include &lt;fstream&gt;\n\n            using namespace std;\n\n            void gradeCalc(int studentID, int count, double midterm, double finalExam, double researchPaper, double groupProject, double participation, double studentAvg, double&amp; overallAvg, double gradeSum);\n            void printGrade(int studentID, int count, double midterm, double finalExam, double researchPaper, double groupProject, double participation, double studentAvg, double&amp; overallAvg, double gradeSum);\n\n            int main()\n            {\n                int studentID;\n                int count = 0;\n\n                double midterm;\n                double finalExam;\n                double researchPaper;\n                double groupProject;\n                double participation;\n                double studentAvg;\n                double overallAvg;\n                double gradeSum;\n\n                gradeCalc(studentID, count, midterm, finalExam, researchPaper, groupProject, participation, studentAvg, overallAvg, gradeSum);\n                printGrade(studentID, count, midterm, finalExam, researchPaper, groupProject, participation, studentAvg, overallAvg, gradeSum);\n\n                return 0;\n            }\n\n            void printGrade(int studentID, int count, double midterm, double finalExam, double researchPaper, double groupProject, double participation, double studentAvg, double&amp; overallAvg, double gradeSum)\n            {\n\n                ifstream infile;\n                ofstream outfile;\n\n                infile.open(\"grades.dat\");\n                outfile.open(\"grades.txt\");\n                outfile &lt;&lt; \"STUDENT GRADING REPORT: \";\n                outfile &lt;&lt; fixed &lt;&lt; showpoint &lt;&lt; setprecision(2);\n\n                while (!infile.eof()) {\n\n                    infile &gt;&gt; studentID &gt;&gt; midterm &gt;&gt; finalExam &gt;&gt; researchPaper &gt;&gt; groupProject &gt;&gt; participation;\n\n                    if (studentID &gt; 1 &amp;&amp; studentID &lt;= 999) {\n\n                        outfile &lt;&lt; endl\n                                &lt;&lt; \"Student ID: \" &lt;&lt; studentID &lt;&lt; ' ' &lt;&lt; \"Midterm: \" &lt;&lt; midterm &lt;&lt; ' ' &lt;&lt; \"Final Exam: \" &lt;&lt; finalExam &lt;&lt; ' ' &lt;&lt; \"Research Paper: \" &lt;&lt; researchPaper &lt;&lt; ' ' &lt;&lt; \"Group Project: \" &lt;&lt; groupProject\n                                &lt;&lt; \"Participation: \" &lt;&lt; participation &lt;&lt; ' ' &lt;&lt; \"Student Average: \" &lt;&lt; studentAvg;\n                    }\n                    overallAvg = gradeSum / count;\n                    outfile &lt;&lt; endl\n                            &lt;&lt; \"Total # of Students: \" &lt;&lt; count\n                            &lt;&lt; \"Overall Class Average: \" &lt;&lt; overallAvg;\n                }\n\n                infile.close();\n                outfile.close();\n            };\n\n            void gradeCalc(int studentID, int count, double midterm, double finalExam, double researchPaper, double groupProject, double participation, double studentAvg, double&amp; overallAvg, double gradeSum)\n            {\n\n                //midterm = .25\n                //finalExam = .25\n                //researchPaper = .20\n                //groupProject = .20\n                //participation = .10\n\n                ifstream infile;\n                ofstream outfile;\n\n                infile.open(\"grades.dat\");\n\n                while (!infile.eof()) {\n\n                    infile &gt;&gt; studentID &gt;&gt; midterm &gt;&gt; finalExam &gt;&gt; researchPaper &gt;&gt; groupProject &gt;&gt; participation;\n                    studentAvg = ((midterm * .25) + (finalExam * .25) + (researchPaper * .20) + (groupProject * .20) + (participation * .10));\n                    overallAvg = gradeSum / count;\n\n                    if (studentID &gt; 1 &amp;&amp; studentID &lt;= 999) {\n                        count++;\n                        gradeSum += studentAvg;\n\n                        cout &lt;&lt; endl\n                             &lt;&lt; fixed &lt;&lt; showpoint &lt;&lt; setprecision(2) &lt;&lt; \"Student ID: \" &lt;&lt; studentID &lt;&lt; ' ' &lt;&lt; \"Average:  \" &lt;&lt; studentAvg;\n                    }\n                    cout &lt;&lt; endl\n                         &lt;&lt; \"Total # of Students: \" &lt;&lt; count\n                         &lt;&lt; \"Overall Class Average: \" &lt;&lt; overallAvg;\n                }\n\n                infile.close();\n            };\n</code></pre>\n"}, {"tags": ["c++", "segmentation-fault"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 5, "creation_date": 1508969161, "post_id": 46942749, "comment_id": 80832971, "body": "This is definitely a stack overflow, and it has nothing to do with your search: it&#39;s your <code>operator&lt;&lt;</code> that&#39;s buggy. Please post its code if you want us to be able to help."}, {"owner": {"reputation": 1040, "user_id": 4154993, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Bv8Wx.jpg?s=128&g=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/4154993/valentin"}, "edited": false, "score": 2, "creation_date": 1508969167, "post_id": 46942749, "comment_id": 80832975, "body": "Looks like you overloaded &lt;&lt; operator to accept a <code>Person</code>? Can you provide it?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1508969172, "post_id": 46942749, "comment_id": 80832977, "body": "You say <i>Here is the operator overloading for == and &lt;&lt; operators:</i> but the posted code does not have the <code>operator&lt;&lt;</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1508969224, "post_id": 46942749, "comment_id": 80832991, "body": "Looks like you have infinite recursion in your <code>&lt;&lt;</code> operator."}, {"owner": {"reputation": 45, "user_id": 8811850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff2088cd086d4cd877a3aab18f42f426?s=128&d=identicon&r=PG&f=1", "display_name": "Shitpost12", "link": "https://stackoverflow.com/users/8811850/shitpost12"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1508975484, "post_id": 46942749, "comment_id": 80834902, "body": "@user4581301 I fixed it now, sorry i am a bit tired..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1508975590, "post_id": 46942749, "comment_id": 80834932, "body": "No worries. Going to delete the nag comment. Feel free to clean up as well."}], "answers": [{"comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1508970896, "post_id": 46942979, "comment_id": 80833562, "body": "this code simply calls itself, hence the stack overflow"}], "tags": [], "owner": {"reputation": 45, "user_id": 8811850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff2088cd086d4cd877a3aab18f42f426?s=128&d=identicon&r=PG&f=1", "display_name": "Shitpost12", "link": "https://stackoverflow.com/users/8811850/shitpost12"}, "is_accepted": false, "score": 0, "last_activity_date": 1508970344, "creation_date": 1508970344, "answer_id": 46942979, "question_id": 46942749, "link": "https://stackoverflow.com/questions/46942749/segmentation-fault-when-searching-in-vector/46942979#46942979", "title": "Segmentation fault when searching in vector", "body": "<p>Oh i am sorry, copy pasted i little wrong. Here is my operator&lt;&lt; overloading:</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream &amp;stream, const Person &amp;it){\n    stream &lt;&lt; it;\n    return stream;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 8811850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff2088cd086d4cd877a3aab18f42f426?s=128&d=identicon&r=PG&f=1", "display_name": "Shitpost12", "link": "https://stackoverflow.com/users/8811850/shitpost12"}, "edited": false, "score": 0, "creation_date": 1508971154, "post_id": 46943029, "comment_id": 80833645, "body": "Sweet lord, savior. Thank you so much for the help. I had a total brain drain on that one."}], "tags": [], "owner": {"reputation": 1333, "user_id": 4722843, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/10153743703823206/picture?type=large", "display_name": "Felipe Centeno", "link": "https://stackoverflow.com/users/4722843/felipe-centeno"}, "is_accepted": true, "score": 1, "last_activity_date": 1508970648, "creation_date": 1508970648, "answer_id": 46943029, "question_id": 46942749, "link": "https://stackoverflow.com/questions/46942749/segmentation-fault-when-searching-in-vector/46943029#46943029", "title": "Segmentation fault when searching in vector", "body": "<p>Your operator should print the primitive types of your Person class. Like this:</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream &amp;stream, const Person &amp;it){\n    stream &lt;&lt; \"This is the name: \" &lt;&lt; it.name;\n    return stream;\n}\n</code></pre>\n\n<p>If you do stream &lt;&lt; it inside of your function, it will keep trying to print Person in an infinite recursion call. </p>\n"}], "owner": {"reputation": 45, "user_id": 8811850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff2088cd086d4cd877a3aab18f42f426?s=128&d=identicon&r=PG&f=1", "display_name": "Shitpost12", "link": "https://stackoverflow.com/users/8811850/shitpost12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 46943029, "answer_count": 2, "score": 1, "last_activity_date": 1508975417, "creation_date": 1508968931, "last_edit_date": 1508975417, "question_id": 46942749, "link": "https://stackoverflow.com/questions/46942749/segmentation-fault-when-searching-in-vector", "title": "Segmentation fault when searching in vector", "body": "<p>I am getting a segmentation fault when I am trying to search for a specific value in a vector. The vector is of type Person</p>\n\n<pre><code>struct Person{\n    string name;\n    string address;\n    string email;\n    string number;\n    string SocialSec;\n    string other;\n};\n</code></pre>\n\n<p>Here is my search function:</p>\n\n<pre><code>void searchContact(vector&lt;Person&gt; &amp;people) {\n    string searchTerm;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Enter search term: \";\n    getline(cin, searchTerm);\n    vector&lt;Person&gt;::iterator it=find(people.begin(), people.end(), searchTerm);\n\n    if (it != people.end()){\n        cout &lt;&lt; *it;\n    }else{\n        cout &lt;&lt; \"Element not found\\n\";\n    }\n}\n</code></pre>\n\n<p>Here is the operator overloading for == and &lt;&lt; operators:</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream &amp;stream, const Person &amp;it){\n    stream &lt;&lt; it;\n    return stream;\n}\n\n    bool operator==(const Person &amp;lhs, const string &amp;rhs){\n        return lhs.name == rhs;     \n    }\n</code></pre>\n\n<p>This is how the segmentation fault looks like:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x00005555555565ae in operator&lt;&lt; (\n    stream=&lt;error reading variable: Cannot access memory at address 0x7fffff7feff8&gt;, \n    it=&lt;error reading variable: Cannot access memory at address 0x7fffff7feff0&gt;) at class.cpp:114\n114 ostream&amp; operator&lt;&lt;(ostream &amp;stream, const Person &amp;it){\n(gdb) \n</code></pre>\n\n<p>Doing a backtrace:</p>\n\n<pre><code>#1  0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#2  0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#3  0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#4  0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#5  0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#6  0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#7  0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#8  0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#9  0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#10 0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#11 0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#12 0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#13 0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#14 0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#15 0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#16 0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#17 0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n#18 0x00005555555565c9 in operator&lt;&lt; (stream=..., it=...) at class.cpp:115\n</code></pre>\n\n<p>Why is this occurring, and how can I fix this?\nIs it a stack overflow?</p>\n\n<p>EDIT: added the operator&lt;&lt; overload in the original post for clarification.</p>\n"}, {"tags": ["c++", "class", "constructor", "eigen"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1508969017, "post_id": 46942667, "comment_id": 80832925, "body": "<code>vars &amp; vars</code>?? That&#39;s terrible naming. I am sure you can come up with something more meaningful -- either the type, the variable, or both."}], "answers": [{"comments": [{"owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "edited": false, "score": 0, "creation_date": 1508968811, "post_id": 46942712, "comment_id": 80832851, "body": "In fact, I want to take in a <code>vars</code> and return a <code>MatrixXd</code>. Also, why do I need <code>const</code>?"}], "tags": [], "owner": {"reputation": 1040, "user_id": 4154993, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Bv8Wx.jpg?s=128&g=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/4154993/valentin"}, "is_accepted": true, "score": 1, "last_activity_date": 1508968831, "last_edit_date": 1508968831, "creation_date": 1508968716, "answer_id": 46942712, "question_id": 46942667, "link": "https://stackoverflow.com/questions/46942667/c-passing-a-function-to-a-constructor-when-using-eigen/46942712#46942712", "title": "C++: passing a function to a constructor when using Eigen", "body": "<p><code>std::function&lt;Eigen::MatrixXd()&gt;</code> implies that it takes a function which accepts no arguments and returns an <code>Eigen::MatrixXd</code>, which I think is not what you want to do. You probably want to change it to <code>std::function&lt;Eigen::MatrixXd(vars&amp;)&gt;</code></p>\n"}], "owner": {"reputation": 713, "user_id": 8408902, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/91bc8741e6c127bdede3317e71dc9d9c?s=128&d=identicon&r=PG&f=1", "display_name": "tryingtosolve", "link": "https://stackoverflow.com/users/8408902/tryingtosolve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 46942712, "answer_count": 1, "score": 0, "last_activity_date": 1508968831, "creation_date": 1508968506, "question_id": 46942667, "link": "https://stackoverflow.com/questions/46942667/c-passing-a-function-to-a-constructor-when-using-eigen", "title": "C++: passing a function to a constructor when using Eigen", "body": "<p>I'm using Eigen in a class that I'm working on. Here's the code excerpt:</p>\n\n<pre><code>class model {\n\npublic:\n    Eigen::MatrixXd Ac;\n\n    model (vars &amp;, std::function&lt;Eigen::MatrixXd()&gt;, std::function&lt;Eigen::MatrixXd()&gt;);\n};\n\nmodel::model (vars &amp; vars, std::function&lt;Eigen::MatrixXd()&gt; muX, \nstd::function&lt;Eigen::MatrixXd()&gt; muX2)\n\n    //update Ac\n    Ac = muX(vars) + muX2(vars);\n\n\n};\n</code></pre>\n\n<p>The idea is that when creating an object of <code>model</code>, the user will have to supply the functions <code>muX</code> and <code>muX2</code>, and the class will fill in values in <code>MatrixXd Ac</code> using <code>muX</code> and <code>muX2</code>. <code>vars</code> is just a class consisting of multiple variables that I created, and <code>muX</code> and <code>muX2</code> are expected to use the data in <code>vars</code> as input.</p>\n\n<p>However, in my XCode, it's giving me an error saying: \"No matching function for call to object of type `std::function\". I haven't compiled yet but I think the compiler will give me the same error.</p>\n"}, {"tags": ["c++", "c++11", "vector", "iterator"], "comments": [{"owner": {"reputation": 391, "user_id": 4872099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fb364272966c092f667b6e280ad1aa2?s=128&d=identicon&r=PG&f=1", "display_name": "harandk", "link": "https://stackoverflow.com/users/4872099/harandk"}, "edited": false, "score": 0, "creation_date": 1508968974, "post_id": 46942657, "comment_id": 80832910, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/6939129/how-to-use-stdfind-stdfind-if-with-a-vector-of-custom-class-objects\">How to use std::find/std::find_if with a vector of custom class objects?</a>"}, {"owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1508969090, "post_id": 46942657, "comment_id": 80832955, "body": "You should provide a custom <code>operator ==</code>  to compare <code>IniSection*</code> entries for equality. Also, <code>tempSection</code> is of type <code>IniSection</code>, but <code>Sections</code> contains <code>IniSection *</code> entries (pointers)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1508969405, "post_id": 46942657, "comment_id": 80833059, "body": "Unrelated: You might find <code>std::map</code> a useful replacement for <code>std::vector</code> here."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508971159, "post_id": 46942657, "comment_id": 80833649, "body": "<code>std::map&lt;std::string, IniSection&gt;</code> -- where the key is the section name.  All that linear search logic and pointers basically disappear if set up this way."}, {"owner": {"reputation": 151, "user_id": 8362964, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8d0bc24e838a68d85f4b3028b164c7fd?s=128&d=identicon&r=PG&f=1", "display_name": "SupaDupa", "link": "https://stackoverflow.com/users/8362964/supadupa"}, "reply_to_user": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1508971178, "post_id": 46942657, "comment_id": 80833655, "body": "@cantordust Thanks for pointing it out, i corrected it :)"}, {"owner": {"reputation": 151, "user_id": 8362964, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8d0bc24e838a68d85f4b3028b164c7fd?s=128&d=identicon&r=PG&f=1", "display_name": "SupaDupa", "link": "https://stackoverflow.com/users/8362964/supadupa"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508971203, "post_id": 46942657, "comment_id": 80833668, "body": "@PaulMcKenzie could you go a bit more into detail?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508971293, "post_id": 46942657, "comment_id": 80833699, "body": "@SupaDupa -- You are associating a section name with an <code>IniSection</code>.  The keyword is <i>associating</i>.  The container that fits this description is a <code>std::map</code> or <code>std::unordered_map</code>.  A <code>std::vector</code> of pointers is IMO clumsy and error prone for this job."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508972843, "post_id": 46942657, "comment_id": 80834176, "body": "@SupaDupa <a href=\"http://coliru.stacked-crooked.com/a/dd6385e4bb60e44f\" rel=\"nofollow noreferrer\">See this small example</a>.  Note that adding a section requires no check for the name, as the map&#39;s <code>insert()</code> function will either insert a new item if the key doesn&#39;t exist, or will skip inserting if it does exist.  In any of those scenarios, a std::pair is returned describing the outcome of the <code>insert()</code> call."}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 8362964, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8d0bc24e838a68d85f4b3028b164c7fd?s=128&d=identicon&r=PG&f=1", "display_name": "SupaDupa", "link": "https://stackoverflow.com/users/8362964/supadupa"}, "edited": false, "score": 0, "creation_date": 1508970870, "post_id": 46942854, "comment_id": 80833555, "body": "I tried to implement your code, but it gives me an error saying it has too many parameters for this operator function :/"}], "tags": [], "owner": {"reputation": 552, "user_id": 5007125, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QbIq9.jpg?s=128&g=1", "display_name": "seladb", "link": "https://stackoverflow.com/users/5007125/seladb"}, "is_accepted": false, "score": 1, "last_activity_date": 1508969512, "creation_date": 1508969512, "answer_id": 46942854, "question_id": 46942657, "link": "https://stackoverflow.com/questions/46942657/find-iterator-in-a-stdvector/46942854#46942854", "title": "Find Iterator in a std::vector", "body": "<p>You need to add an <code>operator==</code> to your class <code>IniSection</code> which answers the question \"are 2 instances of <code>IniSection</code> equal?\". Something like this:</p>\n\n<pre><code>bool operator==(const IniSection&amp; lhs, const IniSection&amp; rhs)\n{\n   return (lhs.sectionName == rhs.sectionName);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 151, "user_id": 8362964, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8d0bc24e838a68d85f4b3028b164c7fd?s=128&d=identicon&r=PG&f=1", "display_name": "SupaDupa", "link": "https://stackoverflow.com/users/8362964/supadupa"}, "edited": false, "score": 0, "creation_date": 1508973619, "post_id": 46943104, "comment_id": 80834392, "body": "Okay it seems like you understand what you are doing, but this is completely different from what i did, so it&#39;s messing with all my other stuff and now i just have errors all over the place... I know i&#39;m asking for much, but could you tell me what i have to do in order to get it working, i&#39;m kind of new to using vectors and such, i always used arrays, but it seemed the wrong thing to do here. I posted all of my code so far here: <a href=\"https://pastebin.com/w2yqVhec\" rel=\"nofollow noreferrer\">pastebin.com/w2yqVhec</a>"}, {"owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "reply_to_user": {"reputation": 151, "user_id": 8362964, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8d0bc24e838a68d85f4b3028b164c7fd?s=128&d=identicon&r=PG&f=1", "display_name": "SupaDupa", "link": "https://stackoverflow.com/users/8362964/supadupa"}, "edited": false, "score": 0, "creation_date": 1508978785, "post_id": 46943104, "comment_id": 80835676, "body": "I have modified the code from pastebin, but it needs further work (there are some redundant member functions and so on). I don&#39;t have the time to do this now, but maybe if you post it on CodeReview you might get good suggestions."}, {"owner": {"reputation": 151, "user_id": 8362964, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8d0bc24e838a68d85f4b3028b164c7fd?s=128&d=identicon&r=PG&f=1", "display_name": "SupaDupa", "link": "https://stackoverflow.com/users/8362964/supadupa"}, "edited": false, "score": 0, "creation_date": 1509011706, "post_id": 46943104, "comment_id": 80849454, "body": "first of all thanks for all your efort, but im still having a small problem now: <a href=\"https://imgur.com/dTyz4lW\" rel=\"nofollow noreferrer\">link</a> I&#39;m not using C++11, if that&#39;s of importance..."}, {"owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "reply_to_user": {"reputation": 151, "user_id": 8362964, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8d0bc24e838a68d85f4b3028b164c7fd?s=128&d=identicon&r=PG&f=1", "display_name": "SupaDupa", "link": "https://stackoverflow.com/users/8362964/supadupa"}, "edited": false, "score": 0, "creation_date": 1509012994, "post_id": 46943104, "comment_id": 80850329, "body": "Try replacing it with <code>return Keys.insert(Keys.end(), IniKey(*this, key));</code>"}, {"owner": {"reputation": 151, "user_id": 8362964, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8d0bc24e838a68d85f4b3028b164c7fd?s=128&d=identicon&r=PG&f=1", "display_name": "SupaDupa", "link": "https://stackoverflow.com/users/8362964/supadupa"}, "edited": false, "score": 0, "creation_date": 1509016223, "post_id": 46943104, "comment_id": 80852436, "body": "It worked, sadly now i get this error when trying to build:  <i>Error\tC2582\t&#39;operator =&#39; function is unavailable in &#39;Ini::IniSection::IniKey&#39;\tProject\tC:\\Program Files (x86)\\Microsoft Xbox 360 SDK\\include\\xbox\\xutility\t2514</i> Any idea how to fix this? I added the Operator to my project, but i&#39;m not sure what it should return <code>IniKey&amp; IniKey::operator=(IniKey &amp;){}</code>"}, {"owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "reply_to_user": {"reputation": 151, "user_id": 8362964, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8d0bc24e838a68d85f4b3028b164c7fd?s=128&d=identicon&r=PG&f=1", "display_name": "SupaDupa", "link": "https://stackoverflow.com/users/8362964/supadupa"}, "edited": false, "score": 0, "creation_date": 1509053133, "post_id": 46943104, "comment_id": 80875916, "body": "That would be because you are storing a reference to <code>IniSection</code> as a data member. References cannot be reseated, so as a consequence your default <code>operator =</code> is disabled. But this would only happen if you try to reassign a key to another key (<code>iniKey1</code> = <code>iniKey2</code>). Is that the case? If you want that functionality, the easiest thing to do would be to either not store a reference at all (I think you don&#39;t need to anyway) or to store pointers, as in your original code. And I again strongly recommend that you consider <code>std::unordered_map</code> as your container."}], "tags": [], "owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "is_accepted": false, "score": 1, "last_activity_date": 1509013355, "last_edit_date": 1509013355, "creation_date": 1508971245, "answer_id": 46943104, "question_id": 46942657, "link": "https://stackoverflow.com/questions/46942657/find-iterator-in-a-stdvector/46943104#46943104", "title": "Find Iterator in a std::vector", "body": "<p>There are several issues with the above code. As suggested, you need to define an <code>operator ==</code> for <code>IniSection</code> in order for <code>std::find</code> to be able to compare the entries in your <code>Sections</code> vector. However, there is another problem: your <code>FindSection</code> is somewhat useless because you cannot test whether the iterator returned points at <code>Sections::end()</code> because <code>Sections</code> is a private member. If I may suggest, you need to add something like a <code>hasSection</code> method which returns <code>bool</code>, and test for the presence or absence of sections using that. I took the liberty of modifying the code to illustrate the point, feel free to change it as you see fit.</p>\n\n<h2><strong>main.hpp</strong></h2>\n\n<pre><code>#ifndef MAIN_HPP\n#define MAIN_HPP\n\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nclass Ini\n{\npublic:\n    class IniSection\n    {\n        friend class Ini;\n\n        Ini&amp; pIni;\n        std::string sectionName;\n    public:\n        IniSection(Ini&amp; ini, const std::string&amp; section);\n\n        friend bool operator == (const IniSection&amp; _this, const IniSection&amp; _other)\n        {\n            return _this.sectionName == _other.sectionName;\n        }\n    };\n\n    std::vector&lt;IniSection&gt;::iterator FindSection(const std::string&amp; section);\n\n    std::vector&lt;IniSection&gt;::iterator AddSection(const std::string&amp; section);\n\n    bool hasSection(const std::string&amp; section);\n\n    std::vector&lt;std::string&gt; sectionNames();\n\nprivate:\n    std::vector&lt;IniSection&gt; Sections;\n};\n\ntypedef Ini::IniSection IniSection;\n\n\n#endif // MAIN_HPP\n</code></pre>\n\n<h2><strong>main.cpp</strong></h2>\n\n<pre><code>#include \"main.hpp\"\n\n\nIniSection::IniSection(Ini&amp; ini, const std::string&amp; section)\n    :\n      pIni(ini),\n      sectionName(section)\n{}\n\nstd::vector&lt;IniSection&gt;::iterator Ini::FindSection(const std::string&amp; section)\n{\n    IniSection tempSection(*this, section);\n    return std::find(Sections.begin(), Sections.end(), tempSection);\n}\n\nstd::vector&lt;IniSection&gt;::iterator Ini::AddSection(const std::string&amp; section)\n{\n    std::vector&lt;IniSection&gt;::iterator iter = FindSection(section);\n\n    if (iter == Sections.end())\n    {\n        Sections.emplace_back(*this, section);\n        return Sections.end() - 1;\n    }\n    else\n    {\n        return iter;\n    }\n}\n\nbool Ini::hasSection(const std::string&amp; section)\n{\n    return FindSection(section) != Sections.end();\n}\n\nstd::vector&lt;std::string&gt; Ini::sectionNames()\n{\n    std::vector&lt;std::string&gt; names;\n    for (const auto&amp; s : Sections)\n    {\n        names.push_back(s.sectionName);\n    }\n    return names;\n}\n\nint main()\n{\n    Ini ini;\n\n    ini.AddSection(\"Section1\");\n    ini.AddSection(\"Section2\");\n    ini.AddSection(\"Section3\");\n\n    if (ini.hasSection(\"Section1\"))\n    {\n        std::cout &lt;&lt; \"Ini contains section 1!\\n\";\n    }\n\n    if (!ini.hasSection(\"Section4\"))\n    {\n        std::cout &lt;&lt; \"Adding section 4...\\n\";\n        ini.AddSection(\"Section4\");\n    }\n\n    std::cout &lt;&lt; \"Ini contains the following sections:\\n\";\n    for (const auto&amp; s : ini.sectionNames())\n    {\n        std::cout &lt;&lt; \"\\t\" &lt;&lt; s &lt;&lt; \"\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>Ini contains section 1!\nAdding section 4...\nIni contains the following sections:\n    Section1\n    Section2\n    Section3\n    Section4\n</code></pre>\n\n<p>Also, as suggested in the comments, <code>std::unordered_map</code> is a great performer and quite suitable for such scenarios.</p>\n\n<p>P.S. You may have noticed that I replaced raw pointers with objects. STL containers like <code>std::vector</code> handle the allocation and deallocation internally, so there is no need to use raw pointers.</p>\n\n<p><strong>EDIT</strong> </p>\n\n<p>I have modified the code from pastebin, but there are some things missing (I'm not sure what type <code>IniPath</code> is - maybe a <code>std::string</code>?). There is a lot of room for improvement, for example, you can add a couple of lines to <code>getSection</code> to add a section automatically if it doesn't exist (so you don't have to check for existence with <code>hasSection</code> first). As mentioned before, you could greatly benefit from using <code>std::unordered_map</code> as insertion, deletion and lookup are all amortised constant time. With <code>std::vector</code>, finding and retrieving an element would be linear time. Another thing I am not clear about is why you need to store a reference (or a pointer in your original code) to the parent object (such as <code>IniSection&amp;</code> inside <code>IniKey</code>). As far as I can tell, you are not using these. You also don't need to implement your own destructors as long as you are not storing raw pointers.</p>\n\n<p>Disclaimer: I have not compiled and tested this code.</p>\n\n<p>P.S. You might want to post this on CodeReview for further improvements.</p>\n\n<p><strong>main.hpp</strong></p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;algorithm&gt;\n\nclass Ini\n{\n\npublic:\n\n    Ini();\n    ~Ini();\n\n    bool Load(std::string path);\n\n    void Load(std::istream&amp; input);\n\n    bool Save(std::string path);\n\n    void Save(std::ostream&amp; output);\n\n    void Create(std::string path);\n\n    class IniSection\n    {\n        friend class Ini;\n\n        Ini&amp; pIni;\n        std::string sectionName;\n\n    public:\n        IniSection(Ini&amp; ini, const std::string&amp; section);\n        ~IniSection();\n\n        friend bool operator == (const IniSection&amp; _this, const IniSection&amp; _other)\n        {\n            return _this.sectionName == _other.sectionName;\n        }\n\n\n        std::string GetSectionName();\n\n        class IniKey\n        {\n            friend class IniSection;\n\n            IniSection&amp; pSection;\n            std::string keyName;\n            std::string keyValue;\n            std::string commentValue;\n\n        public:\n            IniKey(IniSection&amp; section, const std::string&amp; key);\n            ~IniKey();\n\n            friend bool operator == (const IniKey&amp; _this, const IniKey&amp; _other)\n            {\n                return _this.keyName == _other.keyName;\n            }\n\n            void SetValue(std::string value);\n\n            std::string GetValue();\n\n            std::string GetKeyName();\n\n            void AddComment(std::string comment);\n\n            std::string GetComment();\n        };\n\n        void RemoveAllKeys();\n\n        std::vector&lt;IniKey&gt;::iterator FindKey(const std::string&amp; key);\n\n        std::vector&lt;IniKey&gt;::iterator AddKey(const std::string&amp; key);\n\n        std::vector&lt;IniKey&gt;::iterator GetKey(const std::string&amp; key);\n\n        bool hasKey(const std::string&amp; key);\n\n        std::string GetKeyValue(const std::string&amp; key);\n\n        void SetKeyValue(const std::string&amp; key, const std::string&amp; value);\n\n    private:\n        std::vector&lt;IniKey&gt; Keys;\n    };\n\n    void RemoveAllSections();\n\n    std::vector&lt;IniSection&gt;::iterator FindSection(const std::string&amp; section);\n\n    std::vector&lt;IniSection&gt;::iterator AddSection(const std::string&amp; section);\n\n    std::vector&lt;IniSection&gt;::iterator GetSection(const std::string&amp; section);\n\n    bool hasSection(const std::string&amp; section);\n\n    std::string GetKeyValue(std::string section, std::string key);\n\n    void SetKeyValue(std::string section, std::string key, std::string value);\n\nprivate:\n    std::vector&lt;IniSection&gt; Sections;\n};\n\ntypedef Ini::IniSection IniSection;\ntypedef IniSection::IniKey IniKey;\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"main.hpp\"\n\nbool Ini::Load(std::string path)\n{\n    std::ifstream input;\n\n    input.open(path.c_str(), std::ios::binary);\n\n    if (!input.is_open())\n        return false;\n\n    Load(input);\n\n    input.close();\n\n    return true;\n}\n\nvoid Ini::Load(std::istream&amp; input)\n{\n    std::vector&lt;IniSection&gt;::iterator section;\n    std::string lineValue;\n\n    enum\n    {\n        KEY,\n        SECTION,\n        COMMENT,\n        OTHER\n    };\n\n    while (getline(input, lineValue))\n    {\n//      TrimLeft(lineValue);\n//      TrimRight(lineValue, \"\\n\\r\");\n\n        if (!lineValue.empty())\n        {\n            unsigned int type = OTHER;\n\n            type = (lineValue.find_first_of(\"[\") == 0 &amp;&amp; (lineValue[lineValue.find_last_not_of(\" \\t\\r\\n\")] == ']')) ? SECTION : OTHER;\n            type = ((type == OTHER) &amp;&amp; (lineValue.find_first_of(\"=\") != std::string::npos &amp;&amp; lineValue.find_first_of(\"=\") &gt; 0)) ? KEY : type;\n            type = ((type == OTHER) &amp;&amp; (lineValue.find_first_of(\"#\") == 0)) ? COMMENT : type;\n\n            switch (type)\n            {\n            case SECTION:\n                section = AddSection(lineValue.substr(1, lineValue.size() - 2));\n                break;\n            case KEY:\n                {\n                    size_t equalSpot = lineValue.find_first_of(\"=\");\n                    std::string keyName = lineValue.substr(0, equalSpot);\n                    std::string keyValue = lineValue.substr(equalSpot + 1);\n                    std::vector&lt;IniKey&gt;::iterator key = section-&gt;AddKey(keyName);\n                    key-&gt;SetValue(keyValue);\n                    break;\n                }\n\n            default:\n                break;\n            }\n        }\n    }\n}\n\nvoid Ini::Create(std::string path)\n{\n    std::fstream file;\n\n    file.open(path, std::fstream::out);\n\n    file.close();\n}\n\nbool Ini::Save(std::string path)\n{\n    std::ofstream output;\n\n    output.open(path.c_str(), std::ios::binary);\n\n    if (!output.is_open())\n    {\n        output.close();\n\n        return false;\n    }\n\n    Save(output);\n\n    output.close();\n\n    return true;\n}\n\nvoid Ini::Save(std::ostream&amp; output)\n{\n    std::string section;\n    std::vector&lt;IniSection&gt;::iterator iter1;\n\n    for (iter1 = Sections.begin(); iter1 != Sections.end(); iter1++)\n    {\n        section = \"[\" + iter1-&gt;GetSectionName() + \"]\";\n\n        output &lt;&lt; section &lt;&lt; \"\\r\\n\";\n\n        std::vector&lt;IniKey&gt;::iterator iter2;\n\n        for (iter2 = iter1-&gt;Keys.begin(); iter2 != iter1-&gt;Keys.end(); iter2++)\n        {\n            std::string comment = \"# \" + iter2-&gt;GetComment();\n\n            if (comment != \"# \")\n                output &lt;&lt; comment &lt;&lt; \"\\r\\n\";\n\n            std::string key = iter2-&gt;GetKeyName() + \"=\" + iter2-&gt;GetValue();\n\n            output &lt;&lt; key &lt;&lt; \"\\r\\n\";\n        }\n\n        output &lt;&lt; \"\\r\\n\";\n    }\n}\n\nstd::string Ini::GetKeyValue(std::string section, std::string key)\n{\n    if (hasSection(section))\n    {\n        auto s = GetSection(section);\n        if (s-&gt;hasKey(key))\n        {\n            return s-&gt;GetKey(key)-&gt;GetValue();\n        }\n    }\n    return std::string();\n}\n\nvoid Ini::SetKeyValue(std::string section, std::string key, std::string value)\n{\n    if (hasSection(section))\n    {\n        auto s = GetSection(section);\n        if (s-&gt;hasKey(key))\n        {\n            s-&gt;GetKey(key)-&gt;SetValue(value);\n        }\n    }\n}\n\n// IniSection -----------------------------------------------------------------------------------\n\nIniSection::IniSection(Ini&amp; ini, const std::string&amp; section) : pIni(ini), sectionName(section)\n{\n\n}\n\nvoid Ini::RemoveAllSections()\n{\n//  std::vector&lt;IniSection *&gt;::iterator iter;\n\n//  for (iter = Sections.begin(); iter != Sections.end(); iter++)\n//      delete *iter;\n\n    Sections.clear();\n}\n\nstd::vector&lt;IniSection&gt;::iterator Ini::FindSection(const std::string&amp; section)\n{\n    IniSection tempSection(*this, section);\n\n    return std::find(Sections.begin(), Sections.end(), tempSection);\n}\n\nstd::vector&lt;IniSection&gt;::iterator Ini::AddSection(const std::string&amp; section)\n{\n    std::vector&lt;IniSection&gt;::iterator iter = FindSection(section);\n\n    if (iter == Sections.end())\n    {\n        Sections.emplace_back(*this, section);\n\n        return Sections.end() - 1;\n    }\n    else\n        return iter;\n}\n\nstd::vector&lt;IniSection&gt;::iterator Ini::GetSection(const std::string&amp; section)\n{\n    return FindSection(section);\n}\n\nstd::string IniSection::GetSectionName()\n{\n    return sectionName;\n}\n\nstd::string IniSection::GetKeyValue(const std::string&amp; key)\n{\n    if (hasKey(key))\n    {\n        return GetKey(key)-&gt;GetValue();\n    }\n    return std::string();\n}\n\nvoid IniSection::SetKeyValue(const std::string&amp; key, const std::string&amp; value)\n{\n    if (hasKey(key))\n        GetKey(key)-&gt;SetValue(value);\n}\n\n// IniKey -----------------------------------------------------------------------------------\n\nvoid IniSection::RemoveAllKeys()\n{\n    //  std::vector&lt;IniKey *&gt;::iterator iter;\n\n    //  for (iter = Keys.begin(); iter != Keys.end(); iter++)\n    //      delete *iter;\n\n    // std::vector manages the allocations automatically\n    // as long as you are not using raw pointers\n    Keys.clear();\n}\n\nstd::vector&lt;IniKey&gt;::iterator IniSection::FindKey(const std::string&amp; key)\n{\n    IniKey tempKey(*this, key);\n    return std::find(Keys.begin(), Keys.end(), tempKey);\n}\n\nstd::vector&lt;IniKey&gt;::iterator IniSection::AddKey(const std::string&amp; key)\n{\n    if (hasKey(key))\n    {\n        return GetKey(key);\n    }\n    else\n        return Keys.insert(Keys.end(), {*this, key});\n}\n\nbool IniSection::hasKey(const std::string&amp; key)\n{\n    return FindKey(key) != Keys.end();\n}\n\nvoid IniKey::SetValue(std::string value)\n{\n    keyValue = value;\n}\n\nstd::string IniKey::GetValue()\n{\n    return keyValue;\n}\n\nstd::string IniKey::GetKeyName()\n{\n    return keyName;\n}\n\nstd::vector&lt;IniKey&gt;::iterator IniSection::GetKey(const std::string&amp; key)\n{\n    if (hasKey(key))\n        return GetKey(key);\n\n    return Keys.end();\n}\n\nbool Ini::hasSection(const std::string&amp; section)\n{\n    return FindSection(section) != Sections.end();\n}\n\nvoid IniKey::AddComment(std::string comment)\n{\n    commentValue = comment;\n}\n\nstd::string IniKey::GetComment()\n{\n    return commentValue;\n}\n\n\nint main()\n{\n    // How i want to use it:\n    // Write:\n    Ini ini;\n\n    ini.Create(IniPath);\n\n    ini.Load(IniPath);\n\n    // Check if \"Test\" section exists and add it if it doesn't\n    if (!ini.hasSection(\"Test\"))\n    {\n        ini.AddSection(\"Test\");\n    }\n\n    auto secTest(ini.GetSection(\"Test\"));\n    secTest-&gt;AddKey(\"Key1\")-&gt;SetValue(\"KeyValue1\");\n    secTest-&gt;GetKey(\"Key1\")-&gt;AddComment(\"This is a Test\");\n\n    ini.Save(IniPath);\n\n    // Read:\n    Ini ini1;\n\n    ini1.Load(IniPath);\n\n//  IniSection *Section = ini.GetSection(\"Test\");\n\n    if (ini1.hasSection(\"Test\"))\n    {\n        if (ini1.GetSection(\"Test\")-&gt;hasKey(\"Key1\"))\n        {\n            std::string keyValue = ini.GetSection(\"Test\")-&gt;GetKeyValue(\"Key1\");\n        }\n    }\n\n    return 0;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 8362964, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8d0bc24e838a68d85f4b3028b164c7fd?s=128&d=identicon&r=PG&f=1", "display_name": "SupaDupa", "link": "https://stackoverflow.com/users/8362964/supadupa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1509013355, "creation_date": 1508968465, "question_id": 46942657, "link": "https://stackoverflow.com/questions/46942657/find-iterator-in-a-stdvector", "title": "Find Iterator in a std::vector", "body": "<p>I'm having a problem, i'm trying to create a System to read and write .ini files, but i'm stuck at how to correctly add the sections/keys. I thought i could add them as objects to a std::vector, so i wrote the following snippet (i removed code that is irrelevant):</p>\n\n<pre><code>// .h\n\nclass Ini\n{\npublic:\n    class IniSection\n    {\n        friend class Ini;\n\n    private:\n        IniSection(Ini *ini, std::string section);\n        ~IniSection();\n\n    private: \n        Ini *pIni;\n        std::string sectionName;\n    };\n\n    vector&lt;IniSection *&gt;::iterator Ini::FindSection(std::string section);\n\n    IniSection *AddSection(std::string name);\n\nprivate:\n    vector&lt;IniSection *&gt; Sections;\n};\n\ntypedef Ini::IniSection IniSection;\n\n\n\n// .cpp\n\n\nIniSection::IniSection(Ini *ini, std::string section) : pIni(ini), sectionName(section)\n{\n\n}\n\nvector&lt;IniSection *&gt;::iterator Ini::FindSection(std::string section)\n{\n    IniSection tempSection(NULL, section);\n\n    return find(Sections.begin(), Sections.end(), tempSection); // ERROR\n}\n\nIniSection *Ini::AddSection(std::string name)\n{\n    vector&lt;IniSection *&gt;::const_iterator iter = FindSection(name);\n\n    if (iter == Sections.end())\n    {\n        IniSection *newSection = new IniSection(this, name);\n        Sections.push_back(newSection);\n        return newSection;\n    }\n    else\n        return *iter;\n}\n</code></pre>\n\n<p>As you can see i marked a line with </p>\n\n<blockquote>\n  <p>// ERROR</p>\n</blockquote>\n\n<p>that's because when i try to build it, i get this error:</p>\n\n<blockquote>\n  <p>Error C2679   binary '==' : no operator found which takes a right-hand\n  operand of type 'const Ini::IniSection' (or there is no acceptable\n  conversion)</p>\n</blockquote>\n\n<p>It occurs in the algorithm library. So i guess the way i try to get the iterator is wrong, so maybe someone is able to help me out. I couldn't find something on the Internet that suited me. Thanks in advance!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508968576, "post_id": 46942636, "comment_id": 80832779, "body": "<code>int output[size];</code> --&gt; <code>int *output = new int[size];</code> (C++ forbids variable length array)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1508968675, "post_id": 46942636, "comment_id": 80832809, "body": "Alternative: <code>std::vector&lt;int&gt; output(size);</code>"}, {"owner": {"reputation": 11, "user_id": 7242697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9c21ef22d258553551453252b876a7?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Pham", "link": "https://stackoverflow.com/users/7242697/sean-pham"}, "edited": false, "score": 0, "creation_date": 1508968818, "post_id": 46942636, "comment_id": 80832853, "body": "it works now. thank you so much for your help"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1508968973, "post_id": 46942636, "comment_id": 80832909, "body": "Some useful reading: <a href=\"https://stackoverflow.com/questions/1887097/why-arent-variable-length-arrays-part-of-the-c-standard\">Why aren&#39;t variable-length arrays part of the C++ standard?</a>"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1508975849, "post_id": 46942636, "comment_id": 80834995, "body": "You are printing the unsorted array twice before it is sorted. You probably want to print it once more after it is sorted."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7242697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9c21ef22d258553551453252b876a7?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Pham", "link": "https://stackoverflow.com/users/7242697/sean-pham"}, "edited": false, "score": 0, "creation_date": 1508971056, "post_id": 46942728, "comment_id": 80833618, "body": "thank you so much, and can i ask you one more question."}, {"owner": {"reputation": 11, "user_id": 7242697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9c21ef22d258553551453252b876a7?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Pham", "link": "https://stackoverflow.com/users/7242697/sean-pham"}, "edited": false, "score": 0, "creation_date": 1508971086, "post_id": 46942728, "comment_id": 80833626, "body": "i dont know what diff between binary merge sort and natural merge sort ."}], "tags": [], "owner": {"reputation": 1103, "user_id": 4200424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1bb83ff2ad5dcb60ee8e408792526e49?s=128&d=identicon&r=PG&f=1", "display_name": "bennji_of_the_overflow", "link": "https://stackoverflow.com/users/4200424/bennji-of-the-overflow"}, "is_accepted": false, "score": 1, "last_activity_date": 1508968777, "creation_date": 1508968777, "answer_id": 46942728, "question_id": 46942636, "link": "https://stackoverflow.com/questions/46942636/radix-sort-need-to-be-fix-with-const-value/46942728#46942728", "title": "Radix sort need to be fix with const value?", "body": "<p>You can't declare an array with a size unknown at compile time like this:</p>\n\n<pre><code>int output[size];\n</code></pre>\n\n<p>You need to declare it dynamically like this:</p>\n\n<pre><code>int* output = new int[size];\n</code></pre>\n\n<p>Note that you are now responsible for cleaning up the memory you have allocated here and will need to delete it when you're finished with it:</p>\n\n<pre><code>delete[] output;\n</code></pre>\n\n<p>Or better yet use a standard c++ container like std::vector</p>\n"}], "owner": {"reputation": 11, "user_id": 7242697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9c21ef22d258553551453252b876a7?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Pham", "link": "https://stackoverflow.com/users/7242697/sean-pham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508969007, "creation_date": 1508968338, "last_edit_date": 1508969007, "question_id": 46942636, "link": "https://stackoverflow.com/questions/46942636/radix-sort-need-to-be-fix-with-const-value", "title": "Radix sort need to be fix with const value?", "body": "<p>iam writing the code for the radix sort, i saw some online but when i wrote in the visual studio, it doesnot accept the const size in countSort. can you guys help me with this. thank you so much \nit has [problem at function countsort (output[size])/ \nIDK how to fix it, can you guys give me a hand </p>\n\n<pre><code>#include &lt;iostream&gt;\n#pragma comment(linker, \"/STACK:8000000\")\n#include &lt;ctime&gt;\n#include &lt;iomanip&gt;\n#include &lt;stdio.h&gt;\nusing namespace std;\nvoid radixSort (int [], int);\nint maxNumber ( int[], int);\nvoid countSort(int [], int , int );\n\nint main(){\n    const int size = 8;\n    int arr [] = {110, 5, 10,3 ,22, 100, 1, 23};\n    //int size = sizeof(arr)/sizeof(arr[0]);\n    for ( int i = 0; i &lt;size; i++){\n        cout &lt;&lt; setw(7) &lt;&lt;arr[i] ;\n    }\nfor ( int i = 0; i &lt; size; i++){\n        cout &lt;&lt; setw(7)  &lt;&lt;arr[i] ;\n    }\n    cout &lt;&lt; endl;\n\n    radixSort (arr, size);\n\n    system(\"pause\");\n    return 0;\n}\n\n\nvoid radixSort ( int arr[], int size){\n    int exp, m;\n\n    m  = maxNumber(arr, size);\n\n    for (exp = 1; m/exp &gt; 0; exp *= 10)\n        countSort(arr, size, exp);\n}\n\nint maxNumber ( int arr[], int size){\n    int max = arr[0];\n    for (int i = 1; i &lt; size; i++)\n        if (arr[i] &gt; max)\n            max = arr[i];\n    return max;\n}\n\nvoid countSort(int arr[],  int size , int exp)\n{ \n\n\n    **int output[size];**\n    int i, count[10] = {0};\n\n\n    for (i = 0; i &lt; size; i++)\n        count[(arr[i] / exp) % 10]++;\n\n\n    for (i = 1; i &lt; 10; i++)\n        count[i] += count[i-1];\n\n    for (i = size - 1; i &gt;= 0; i--)\n    {\n        output[count[(arr[i] / exp) % 10] - 1] = arr[i];\n        count[(arr[i] / exp) % 10]--;\n    }\n\n    for (i = 0; i &lt; size; i++)\n        arr[i] = output[i];\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "clang++", "unresolved-external"], "comments": [{"owner": {"reputation": 2135, "user_id": 4967497, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a0c6d09001cf39a7646ed2d22bc23352?s=128&d=identicon&r=PG", "display_name": "JojOatXGME", "link": "https://stackoverflow.com/users/4967497/jojoatxgme"}, "edited": false, "score": 0, "creation_date": 1508967630, "post_id": 46942331, "comment_id": 80832388, "body": "If you are using C++11 or newer, you can use the keyword <a href=\"http://en.cppreference.com/w/cpp/language/override\" rel=\"nofollow noreferrer\"><code>override</code></a> in the declaration of the overriding function. This insures that you have not missed some detail in the functions prototype. It would look like this: <code>void foo() override {...}</code>."}, {"owner": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "reply_to_user": {"reputation": 2135, "user_id": 4967497, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a0c6d09001cf39a7646ed2d22bc23352?s=128&d=identicon&r=PG", "display_name": "JojOatXGME", "link": "https://stackoverflow.com/users/4967497/jojoatxgme"}, "edited": false, "score": 0, "creation_date": 1508967713, "post_id": 46942331, "comment_id": 80832428, "body": "In visual studio compiles and works just fine."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508967770, "post_id": 46942331, "comment_id": 80832454, "body": "you simply need add lib file where this symbols defined. for example <code>msvcurt.lib</code>"}, {"owner": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "reply_to_user": {"reputation": 2135, "user_id": 4967497, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a0c6d09001cf39a7646ed2d22bc23352?s=128&d=identicon&r=PG", "display_name": "JojOatXGME", "link": "https://stackoverflow.com/users/4967497/jojoatxgme"}, "edited": false, "score": 0, "creation_date": 1508967817, "post_id": 46942331, "comment_id": 80832472, "body": "@JojOatXGME thanks for the tip, but I already knew that. Unfortunately I cannot use c++11 in this project."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508968091, "post_id": 46942331, "comment_id": 80832590, "body": "you yourself use <code>typeid</code> (which internally call <code>__imp___RTtypeid</code>) and <code>dynamic_cast</code> (which internally call <code>__imp___RTDynamicCast </code>). as result you need use lib file, where this symbols is defined. <code>msvcurt.lib</code> or <code>vcruntime.lib</code>. and are your target platform is x64 ?"}, {"owner": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508969164, "post_id": 46942331, "comment_id": 80832974, "body": "@RbMm maybe I&#39;m inexperienced, but shouldn&#39;t the compiler know of the library and import the symbols? I mean, typeid and dynamic_cast are part of the language..."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508969280, "post_id": 46942331, "comment_id": 80833019, "body": "@MassimoCastrioto - of course no. compiler don&#39;t know this and don&#39;t must know. and linker don&#39;t know. this you must know and add this lib to linker input. and your problem absolute not related to <code>inheritance</code>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508970015, "post_id": 46942331, "comment_id": 80833264, "body": "and for which target platform you build your code ? <i>x64</i> (<i>amd64</i>) ?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1508970018, "post_id": 46942331, "comment_id": 80833268, "body": "What exact compile commands are you using?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1508970057, "post_id": 46942331, "comment_id": 80833278, "body": "@aschepler - this absolute not related to any compiler options"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508970128, "post_id": 46942331, "comment_id": 80833299, "body": "@RbMm Driver, then. One would normally use clang++ for the link step, and not link.exe directly."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1508970319, "post_id": 46942331, "comment_id": 80833363, "body": "@aschepler and list of <i>libs</i> also can be defined in <i>clang++</i> ? in any case need found lib file, which containing this unresolved symbols and add to linker (or compiler) library list"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508970438, "post_id": 46942331, "comment_id": 80833412, "body": "@RbMm Sure, you can pass library names to the clang++ driver. I haven&#39;t used clang on Windows, but on most systems if you use it for a link step, it will <i>automatically</i> add appropriate C++ and C runtime libraries."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1508970650, "post_id": 46942331, "comment_id": 80833479, "body": "@aschepler - usually all <i>c/c++</i> use some run-time default library (depend from compiler option). but if some symbol not found - obvious he not containing in this library and need search lib where he is located. problem at all trivial"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "edited": false, "score": 0, "creation_date": 1508970595, "post_id": 46942818, "comment_id": 80833458, "body": "What you say makes sense, but now i&#39;m trying to add either vcruntime.lib or msvcurt.lib to the linker output, and what happens is that it finds more definnitions for some other functions, like : libvcruntime.lib(std_type_info.obj) : error LNK2005: __std_type_info_compare already defined in vcruntime.lib(VCRUNTIME140_APP.dll)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "edited": false, "score": 0, "creation_date": 1508970757, "post_id": 46942818, "comment_id": 80833522, "body": "@MassimoCastrioto - this is absolute normal - 2 libs conflict. you need use only <b>one</b> . remove <code>libvcruntime.lib</code> from default libs"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "edited": false, "score": 0, "creation_date": 1508971055, "post_id": 46942818, "comment_id": 80833617, "body": "@MassimoCastrioto - you need use <code>&#47;NODEFAULTLIB:libvcruntime.lib</code> in linker options or at all <code>&#47;NODEFAULTLIB</code> and direct add <code>msvcurt.lib</code> or <code>vcruntime.lib</code> to linker. you must use only <b>one</b> crt lib"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "edited": false, "score": 0, "creation_date": 1508971429, "post_id": 46942818, "comment_id": 80833740, "body": "@MassimoCastrioto - i try explain very basic and obvious things - every used symbol must be defined somewhere and only once. <code>libvcruntime.lib</code> not containing <b>all</b> symbols which you need. think <code>vcruntime.lib</code> or <code>msvcurt.lib</code> containing all symbols. but when you use 2+ crt libs at once - many symbols exist in several libs - linker simply don&#39;t know - which use and give you error LNK2005 - symbol already defined.  if understand this - very easy resolve problem"}, {"owner": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "edited": false, "score": 0, "creation_date": 1508972679, "post_id": 46942818, "comment_id": 80834119, "body": "I understand that, what I do not understand is why do I have to tell the linker not to link the library vcruntime.lib by default, and then pass manually the same library? If I the compiler already links the library by default, why is it missing symbols?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "edited": false, "score": 0, "creation_date": 1508973229, "post_id": 46942818, "comment_id": 80834295, "body": "@MassimoCastrioto - if you ask this - you still not understand. different libraries containing different symbols set. for example <code>__imp___RTDynamicCast</code> <b>not exist</b> in <code>libvcruntime.lib</code> but <b>exist</b> in <code>vcruntime.lib</code> and <code>msvcurt.lib</code> - so you need use one of this 2 libs. and compiler <b>never links any libs</b>. this do only linker. compiler can <b>indirect</b> pass <code>&#47;DEFAULTLIB: libvcruntime.lib</code> directive to linker. but this will be superseded by <code>&#47;NODEFAULTLIB</code> option. you need <b>remove</b> <code>libvcruntime.lib</code> and add <code>msvcurt.lib</code>."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "edited": false, "score": 0, "creation_date": 1508973376, "post_id": 46942818, "comment_id": 80834337, "body": "@MassimoCastrioto <i>why is it missing symbols</i> ? missing and all. strange question. why exist several crt libs ? why internal content of <code>libvcruntime.lib</code> != <code>msvcurt.lib</code> ? different libraries, different symbol sets.. <i>why do I have to tell the linker</i> - if you want resolve your problem - just do it as I say"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "edited": false, "score": 0, "creation_date": 1508973534, "post_id": 46942818, "comment_id": 80834368, "body": "@MassimoCastrioto <i>why do I have to tell the linker not to link the library vcruntime.lib by default, and then pass manually the same library?</i> - look like you not understand. you must tell linker not use <b>libvcruntime.lib</b> by default. and pass manually <b>vcruntime.lib</b> - this is not the <b>same</b> library"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "edited": false, "score": 0, "creation_date": 1508973692, "post_id": 46942818, "comment_id": 80834414, "body": "@MassimoCastrioto - however <i>vcruntime.lib</i> is too small. I think it not containing <b>all</b> symbols which you need. so you need use exactly <i>msvcurt.lib</i>"}, {"owner": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "edited": false, "score": 0, "creation_date": 1508974623, "post_id": 46942818, "comment_id": 80834670, "body": "yes, now I see what you say (I misread libvcruntime.lib and thought it was the same as vcruntime.lib), sorry for being stubborn."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "edited": false, "score": 0, "creation_date": 1508974719, "post_id": 46942818, "comment_id": 80834698, "body": "@MassimoCastrioto - use exactly <code>msvcurt.lib</code>. I think <code>vcruntime.lib</code> not containing all symbols which you use(because it too small by size)"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 0, "last_activity_date": 1508969709, "last_edit_date": 1508969709, "creation_date": 1508969344, "answer_id": 46942818, "question_id": 46942331, "link": "https://stackoverflow.com/questions/46942331/unresolved-external-to-typeinfo-and-dynamic-cast/46942818#46942818", "title": "unresolved external to typeinfo and dynamic_cast", "body": "<p>when you use <code>dynamic_cast&lt;Derived *&gt;(base);</code> in code compiler internally generate <code>call [__imp___RTDynamicCast]</code> instruction (this is for not x86 platform, for x86 will be call <code>[__imp____RTDynamicCast]</code> ). when you use  <code>typeid(base1) == typeid(base2)</code> compiler generate <code>call [__imp___RTtypeid]</code> (on x86 platform will be <code>call [__imp____RTtypeid]</code>). when you begin link - linker view that in code used 2 symbols: <code>__imp___RTDynamicCast</code> and <code>__imp___RTtypeid</code> - he search it in all obj and lib files which you pass to him as input, but can not find. as result and give you error <code>LNK2019: unresolved external symbol</code></p>\n\n<p>you need search your crt lib files - which is containing exactly this strings - <code>__imp____RTtypeid</code> and <code>__imp___RTDynamicCast</code> - because exist very many different of crt versions - impossible say, which lib will be containing this symbols. say this can be <code>msvcurt[d].lib</code> or <code>vcruntime[d].lib</code>. may be in <code>msvcrt.lib</code>. all what you need - add one of this libs to linker input. and he find this symbols</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8997605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11a96de02d690ba8f3a932445821879?s=128&d=identicon&r=PG&f=1", "display_name": "Paul A. Bristow", "link": "https://stackoverflow.com/users/8997605/paul-a-bristow"}, "reply_to_user": {"reputation": 2049, "user_id": 4640431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dOpj1.jpg?s=128&g=1", "display_name": "Pierre.Vriens", "link": "https://stackoverflow.com/users/4640431/pierre-vriens"}, "edited": false, "score": 0, "creation_date": 1512904779, "post_id": 47719390, "comment_id": 82436768, "body": "Linked and ran as expected  on both Codeblocks and Visual studio platforms (identical timings so probably same asm/exe code?)."}], "tags": [], "owner": {"reputation": 1, "user_id": 8997605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11a96de02d690ba8f3a932445821879?s=128&d=identicon&r=PG&f=1", "display_name": "Paul A. Bristow", "link": "https://stackoverflow.com/users/8997605/paul-a-bristow"}, "is_accepted": false, "score": 0, "last_activity_date": 1512754120, "creation_date": 1512754120, "answer_id": 47719390, "question_id": 46942331, "link": "https://stackoverflow.com/questions/46942331/unresolved-external-to-typeinfo-and-dynamic-cast/47719390#47719390", "title": "unresolved external to typeinfo and dynamic_cast", "body": "<p>I got this problem using Clang 5.0 Platform Toolset LLVM-VS2014 on Visual studio and also on CodeBlocks.</p>\n\n<p>I added msvcrt.lib to provide the missing __imp____RTDynamicCast.</p>\n\n<p>How one is supposed to deduce this, I have yet to understand :-(</p>\n"}], "owner": {"reputation": 25, "user_id": 6184119, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MduEeT6ovNY/AAAAAAAAAAI/AAAAAAAAABE/IZQ2wjaCHFQ/photo.jpg?sz=128", "display_name": "Massimo Castrioto", "link": "https://stackoverflow.com/users/6184119/massimo-castrioto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 859, "favorite_count": 0, "accepted_answer_id": 46942818, "answer_count": 2, "score": 2, "last_activity_date": 1512754120, "creation_date": 1508966877, "last_edit_date": 1508969672, "question_id": 46942331, "link": "https://stackoverflow.com/questions/46942331/unresolved-external-to-typeinfo-and-dynamic-cast", "title": "unresolved external to typeinfo and dynamic_cast", "body": "<p>The problem I have is very similar to the one discussed here:\n<a href=\"https://stackoverflow.com/questions/307352/g-undefined-reference-to-typeinfo\">g++ undefined reference to typeinfo</a></p>\n\n<p>Even so, I believe I so not have the same issue, and the answers to that topi do not really help me.\nWhat i have is :</p>\n\n<pre><code>class Base\n{\n    virtual ~Base() {}\n    virtual void foo() = 0;\n    // some other pure virtual behaviors\n};\n\nclass Derived : public Base\n{\n    void foo() {/* do stuff */}\n    // override for all other virtual behaviors\n};\n</code></pre>\n\n<p>then in different functions I have :</p>\n\n<pre><code>void bar( Base * base )\n{\n    Derived * derived = dynamic_cast&lt;Derived *&gt;(base);\n}\n\nvoid foobar( const Base &amp; base1, const Base &amp; base2 )\n{\n    if ( typeid(base1) == typeid(base2) )\n        /* do something */;\n}\n</code></pre>\n\n<p>So I'm sure the function is either pure virtual or defined (even though the object can never be Base). This should not give any problems, and it is different from the quoted\ndiscussion because i'm sure i override the virtual function.\nEven so, when compiling with clang++, it issues an unresolved external for both typeid and dynamic_cast when used on Derived, while it doesn't do so for other classes that inherit from Base, and override the same foo behaviors.\nWhy does it do so?</p>\n\n<p>here the errors:</p>\n\n<pre><code>error LNK2019: unresolved external symbol __imp___RTDynamicCast\nerror LNK2019: unresolved external symbol __imp___RTtypeid\n</code></pre>\n\n<p>Am i just missing something silly, or misinterpreting these errors?</p>\n\n<h2>Edit</h2>\n\n<p>I realized the code examples I first gave were not descriptive enough :</p>\n\n<pre><code>class Base\n{\npublic:\n    virtual ~Base() {}\n};\n\nclass Interface : public Base\n{\npublic:\n    virtual void foo() = 0;\n    // some other pure virtual behaviors\n};\n\nclass Derived : public Interface\n{\npublic:\n    void foo() {/* do stuff */}\n    // override for all other virtual behaviors\n};\n</code></pre>\n\n<p>and</p>\n\n<pre><code>void bar()\n{\n    Base * base = new Derived;\n    Interface * interface = dynamic_cast&lt;Interface *&gt;(base);\n    interface-&gt;foo()\n}\n</code></pre>\n\n<p>fit better to what i'm trying to do.</p>\n"}, {"tags": ["c++", "windows", "sockets"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 2, "creation_date": 1508966189, "post_id": 46942104, "comment_id": 80831744, "body": "you got <code>WSAETIMEDOUT</code>. you yourself set some timeout <code>aTimeout</code> on socket and it expired before you got any datagram"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1508967222, "post_id": 46942104, "comment_id": 80832214, "body": "What is the actual value of <code>lResult</code> when <code>recvfrom()</code> exits?  How is <code>LAST_ERROR</code> being set? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, and the actual Wireshark capture (or a screenshot of it) showing the details of the datagram that <code>recvfrom()</code> is not receiving.  Just because a packet arrives on the machine does not guarantee it gets routed to an active socket."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1508971488, "post_id": 46942104, "comment_id": 80833757, "body": "It isn&#39;t valid to call <code>WSALastError()</code> <i>unless</i> there <i>was</i> am error. Was there?"}, {"owner": {"reputation": 270, "user_id": 1156580, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/723a3388694475db06baf745955b8481?s=128&d=identicon&r=PG", "display_name": "David Levy", "link": "https://stackoverflow.com/users/1156580/david-levy"}, "edited": false, "score": 0, "creation_date": 1509028086, "post_id": 46942104, "comment_id": 80861286, "body": "Post edited for clarification"}], "answers": [{"comments": [{"owner": {"reputation": 270, "user_id": 1156580, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/723a3388694475db06baf745955b8481?s=128&d=identicon&r=PG", "display_name": "David Levy", "link": "https://stackoverflow.com/users/1156580/david-levy"}, "edited": false, "score": 0, "creation_date": 1509030061, "post_id": 46942401, "comment_id": 80862762, "body": "It&#39;s indeed the firewall, but why is wireshark able to see the incoming data if the firewall blocks it? And why is windows firewall blocking data on a port im listening to? The same program is already communicating with the same device in TCP and UDP using other port. On this last port, im just trying to receive data, and windows firewall only blocks this data"}, {"owner": {"reputation": 270, "user_id": 1156580, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/723a3388694475db06baf745955b8481?s=128&d=identicon&r=PG", "display_name": "David Levy", "link": "https://stackoverflow.com/users/1156580/david-levy"}, "edited": false, "score": 0, "creation_date": 1509030757, "post_id": 46942401, "comment_id": 80863254, "body": "For windows firewall : I had to delete the rule for my program, so windows pop up would appear again, so I could allow trafic."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 270, "user_id": 1156580, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/723a3388694475db06baf745955b8481?s=128&d=identicon&r=PG", "display_name": "David Levy", "link": "https://stackoverflow.com/users/1156580/david-levy"}, "edited": false, "score": 1, "creation_date": 1509035917, "post_id": 46942401, "comment_id": 80866475, "body": "@DavidLevy Wireshark captures at a lower level than where the firewall operates at, so it sees inbound packets first. And just because you open a port doesn&#39;t mean a firewall can&#39;t still block data on it, as it operates at a level between you and the hardware. Since UDP is connection-less, firewalls usually block inbound UDP packets to a port unless an outbound packet is sent from the same port first, or you tel the firewall to allow inbound traffic on the port"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1508967184, "creation_date": 1508967184, "answer_id": 46942401, "question_id": 46942104, "link": "https://stackoverflow.com/questions/46942104/recvfrom-in-udp-not-getting-anything/46942401#46942401", "title": "recvfrom in UDP not getting anything", "body": "<p>The only way I can see the code as shown timing out is if either:</p>\n\n<ul>\n<li><p>the datagram is not arriving before <code>aTimeout</code> elapses (what is the actual value of <code>aTimeout</code>?)</p></li>\n<li><p>the datagram is not using IPv4</p></li>\n<li><p>the datagram is not being sent to an IP on the machine, or is not being sent to port 48640</p></li>\n<li><p>the datagram is being blocked, such as by a firewall.</p></li>\n</ul>\n"}], "owner": {"reputation": 270, "user_id": 1156580, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/723a3388694475db06baf745955b8481?s=128&d=identicon&r=PG", "display_name": "David Levy", "link": "https://stackoverflow.com/users/1156580/david-levy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1998, "favorite_count": 0, "accepted_answer_id": 46942401, "answer_count": 1, "score": 1, "last_activity_date": 1515585991, "creation_date": 1508965772, "last_edit_date": 1515585991, "question_id": 46942104, "link": "https://stackoverflow.com/questions/46942104/recvfrom-in-udp-not-getting-anything", "title": "recvfrom in UDP not getting anything", "body": "<p>i'm trying to receive data on a UDP socket, but I cant find a way to receive anything.</p>\n\n<p>I can see with wireshark that the data is actually coming to the computer, but recvfrom always timeout.</p>\n\n<p>The involved code is pretty simple :</p>\n\n<pre><code>mUDPSocket = socket( AF_INET, SOCK_DGRAM, IPPROTO_UDP );\nif( mUDPSocket == INVALID_SOCKET )\n    return 1;\n\nuint32_t aTimeout = 5000;\nconst int lResult = setsockopt( mUDPSocket, SOL_SOCKET, SO_RCVTIMEO, ( char * )&amp;aTimeout, sizeof( aTimeout ) );\n\nif( SOCKET_ERROR == lResult )\n    return 1;\n\nstruct sockaddr_in addr = {};\naddr.sin_family = AF_INET;\naddr.sin_addr.s_addr = htonl( INADDR_ANY ); //also tried with my local ip\naddr.sin_port = htons( 48640 );\n\nif( bind( mUDPSocket, ( const sockaddr * )&amp;addr, sizeof( addr ) ) &lt; 0 )\n    return 1;\n</code></pre>\n\n<p>And later when trying to receive data </p>\n\n<pre><code>if(recvfrom( mUDPSocket, ( char * )aData, aSize, 0, NULL, 0 )&lt;0) //function return -1\n    std::cout &lt;&lt; WSAGetLastError() &lt;&lt; std::endl; //10060\n</code></pre>\n\n<p>Im trying to do something basic, so I guess im missing something simple.</p>\n\n<p>Edit : the packet is sent several time by second and the timeout is 5second, so I should receive it before the real timeout</p>\n\n<p>I've attached a screen of the wireshark capture<a href=\"https://i.stack.imgur.com/sOIg8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sOIg8.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "c++11", "templates", "recursion", "variadic-templates"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508965874, "post_id": 46941949, "comment_id": 80831602, "body": "There is no universal &quot;best way&quot; to eliminate ambiguity. Each individual siuation gets solved by its own merits. An individual solution may involve techniques such as: renaming; using <code>std::enable_if</code>; or partially-specialized template classes invoked as workarounds for partially specialized a template function. No single size fits all."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1508971872, "post_id": 46941949, "comment_id": 80833865, "body": "What is<code>quint32</code>?  This matters because I doubt it is <code>int</code> which may be your problem."}, {"owner": {"reputation": 61, "user_id": 5719930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87233067c06cfc153790366f9ad2931f?s=128&d=identicon&r=PG&f=1", "display_name": "Koopa", "link": "https://stackoverflow.com/users/5719930/koopa"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1508973021, "post_id": 46941949, "comment_id": 80834240, "body": "@Yakk it&#39;s just a typedef for an unsigned int."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5719930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87233067c06cfc153790366f9ad2931f?s=128&d=identicon&r=PG&f=1", "display_name": "Koopa", "link": "https://stackoverflow.com/users/5719930/koopa"}, "edited": false, "score": 0, "creation_date": 1508973454, "post_id": 46942123, "comment_id": 80834353, "body": "Unless I&#39;m misunderstanding, I believe there still is ambiguity between the recursive function and the function to be used by external code."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 61, "user_id": 5719930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87233067c06cfc153790366f9ad2931f?s=128&d=identicon&r=PG&f=1", "display_name": "Koopa", "link": "https://stackoverflow.com/users/5719930/koopa"}, "edited": false, "score": 0, "creation_date": 1508978194, "post_id": 46942123, "comment_id": 80835548, "body": "@Koopa - haven&#39;t you solved this ambiguity naming the helper function <code>MakeByte_</code> ?"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1508966190, "last_edit_date": 1508966190, "creation_date": 1508965858, "answer_id": 46942123, "question_id": 46941949, "link": "https://stackoverflow.com/questions/46941949/what-is-the-best-way-to-reduce-ambiguity-for-templated-variadic-functions/46942123#46942123", "title": "What is the best way to reduce ambiguity for templated variadic functions?", "body": "<p>Maybe it's question of personal taste but I prefer to avoid to have two version of the function that are doing the same thing (in this case: shift and or).</p>\n\n<p>I suggest to write the terminal case that simply return a value (no shift, no or)</p>\n\n<pre><code>template &lt;typename T1&gt;\nconstexpr T1 MakeByte_ (T1 byte, quint32)\n{ return byte; }\n</code></pre>\n\n<p>and the recursive case</p>\n\n<pre><code>template &lt;typename T1, typename... T2&gt;\nconstexpr T1 MakeByte_(T1 byte, quint32 pos, T1 bit, T2... bits)\n{ return MakeByte_(byte | (bit &lt;&lt; pos), pos + 1, bit, bits...); }\n</code></pre>\n\n<p>This avoid ambiguity because if <code>MakeByte_</code> receive three or more arguments, the recursive version is called; if receive two arguments, it's called the final version.</p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1508973581, "post_id": 46943432, "comment_id": 80834380, "body": "your non-c++17 is C++14 (c++11 has too restrictive constraints on <code>constexpr</code> function)."}, {"owner": {"reputation": 61, "user_id": 5719930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87233067c06cfc153790366f9ad2931f?s=128&d=identicon&r=PG&f=1", "display_name": "Koopa", "link": "https://stackoverflow.com/users/5719930/koopa"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1508973852, "post_id": 46943432, "comment_id": 80834473, "body": "The <code>bits</code> in <code>((byte = (byte &lt;&lt; 1) | bits), ...);</code> is intentional, it&#39;s referring to the parameter pack, unless you&#39;re talking about something else."}], "tags": [], "owner": {"reputation": 61, "user_id": 5719930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87233067c06cfc153790366f9ad2931f?s=128&d=identicon&r=PG&f=1", "display_name": "Koopa", "link": "https://stackoverflow.com/users/5719930/koopa"}, "is_accepted": false, "score": 0, "last_activity_date": 1508974011, "last_edit_date": 1508974011, "creation_date": 1508973293, "answer_id": 46943432, "question_id": 46941949, "link": "https://stackoverflow.com/questions/46941949/what-is-the-best-way-to-reduce-ambiguity-for-templated-variadic-functions/46943432#46943432", "title": "What is the best way to reduce ambiguity for templated variadic functions?", "body": "<p>I worked out a solution thanks to <code>eracpp</code> on the Coding Den Discord server, using a <a href=\"http://en.cppreference.com/w/cpp/language/fold\" rel=\"nofollow noreferrer\">fold expression</a>:</p>\n\n<pre><code>template &lt;typename T1, typename... T2&gt;\nconstexpr T1 MakeByte(T1 bit, T2... bits)\n{\n  T1 byte = bit;\n  quint32 pos = 0;\n  ((byte |= ((bits &amp; 1) &lt;&lt; ++pos)), ...);\n  return byte;\n}\n</code></pre>\n\n<p>This reduces the code down to one function, but does require C++17. This takes parameters going from left to right as LSB to MSB, but this can be used to take left to right as MSB to LSB (Correlating to the binary layout):</p>\n\n<pre><code>template &lt;typename T1, typename... T2&gt;\nconstexpr T1 MakeByte(T1 bit, T2... bits) {\n    uint32_t pos  = sizeof...(bits);\n    T1      byte = bit;\n\n    ((byte = (byte &lt;&lt; 1) | bits), ...);\n\n    return byte;\n}\n</code></pre>\n\n<p>Finally, a non-C++17 solution they suggested that I haven't tested:</p>\n\n<pre><code>template &lt;typename T1, typename... T2&gt;\nconstexpr T1 MakeByte(T1 bit, T2... bits) {\n    T1 byte = bit;\n\n    using init_t = int[];\n    (void)init_t{((byte = (byte &lt;&lt; 1) | bits), 0)...};\n\n    return byte;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1508973419, "creation_date": 1508973419, "answer_id": 46943458, "question_id": 46941949, "link": "https://stackoverflow.com/questions/46941949/what-is-the-best-way-to-reduce-ambiguity-for-templated-variadic-functions/46943458#46943458", "title": "What is the best way to reduce ambiguity for templated variadic functions?", "body": "<p>In your case, there are clearly different methods, as</p>\n\n<pre><code>quint32 bank_bit_0 = Bit((y / (16 * m_num_pipes)) ^ x_3);\nquint32 bank_bit_1 = Bit((y / (8 * m_num_pipes)) ^ x_4);\nquint32 bank_bit_2 = Bit((y / (m_num_pipes)) ^ x_5);\n\nquint32 bank = MakeByte(bank_bit_0, bank_bit_1, bank_bit_1);\n</code></pre>\n\n<p>Would call your helper function</p>\n\n<pre><code>template &lt;typename T1, typename T2&gt;\nconstexpr T1 MakeByte(T1 byte, quint32 pos, T2 bit)\n</code></pre>\n\n<p>Note: In C++17, you might even write your code:</p>\n\n<pre><code>template &lt;typename Tuple, std::size_t ... Is&gt;\nconstexpr auto MakeByte_(const Tuple&amp; tuple, std::index_sequence&lt;Is...&gt;)\n{\n    return ((std::get&lt;Is&gt;(tuple) &lt;&lt; Is) | ...) ;\n}\ntemplate &lt;typename T1, typename... T2&gt;\nconstexpr T1 MakeByte(T1 bit, T2... bits)\n{\n  return MakeByteHelper(std::make_tuple(bit, bits...),\n                        std::make_index_sequence&lt;1 + sizeof...(T2)&gt;());\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5719930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87233067c06cfc153790366f9ad2931f?s=128&d=identicon&r=PG&f=1", "display_name": "Koopa", "link": "https://stackoverflow.com/users/5719930/koopa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1508974011, "creation_date": 1508965133, "last_edit_date": 1508966008, "question_id": 46941949, "link": "https://stackoverflow.com/questions/46941949/what-is-the-best-way-to-reduce-ambiguity-for-templated-variadic-functions", "title": "What is the best way to reduce ambiguity for templated variadic functions?", "body": "<p>I'm currently trying to make a variadic templated function named <code>MakeByte</code> that will take any number of arguments of bits, and put them into one byte. Here's an example of the usage for it:</p>\n\n<pre><code>// The Wii U has 4 RAM chips, here we select a seemingly \"random\" one using an\n// algorithm to generate one from the coordinates.\nquint32 bank_bit_0 = Bit((y / (16 * m_num_pipes)) ^ x_3);\nquint32 bank_bit_1 = Bit((y / (8 * m_num_pipes)) ^ x_4);\nquint32 bank = MakeByte(bank_bit_0, bank_bit_1);\n</code></pre>\n\n<p>I have three functions, in a separate header involved:</p>\n\n<ul>\n<li><code>template &lt;typename T1, typename... T2&gt; T1 MakeByte(T1 bit, T2... bits)</code>, the function that will be used by external code that calls the recursive functions.</li>\n<li><code>template &lt;typename T1, typename... T2&gt; T1 MakeByte(T1 byte, quint32 pos, T1 bit, T2... bits)</code>, the recursive function that iterates over each bit. This function has additional arguments to keep track of the final byte, and the current position to put the next bit in.</li>\n<li><code>template &lt;typename T1, typename T2&gt; T1 MakeByte(T1 byte, quint32 pos, T2 bit)</code>, the function that deals with the final bit.</li>\n</ul>\n\n<p>Here's the complete 3 definitions:</p>\n\n<pre><code>template &lt;typename T1, typename T2&gt;\nconstexpr T1 MakeByte(T1 byte, quint32 pos, T2 bit)\n{\n  return byte | (bit &lt;&lt; pos);\n}\ntemplate &lt;typename T1, typename... T2&gt;\nconstexpr T1 MakeByte(T1 byte, quint32 pos, T1 bit, T2... bits)\n{\n  return MakeByte(byte | (bit &lt;&lt; pos), pos + 1, bit, bits...);\n}\ntemplate &lt;typename T1, typename... T2&gt;\nconstexpr T1 MakeByte(T1 bit, T2... bits)\n{\n  return MakeByte(static_cast&lt;T1&gt;(0), 0, bit, bits...);\n}\n</code></pre>\n\n<p>The issue is that, when compiling with g++, I get this error:</p>\n\n<pre><code>/home/kyle/Documents/Projects/C++/Qt/MK8Studio/Source/Common.h:44: error: template instantiation depth exceeds maximum of 900 (use -ftemplate-depth= to increase the maximum)\n   return MakeByte(static_cast&lt;T1&gt;(0), 0, bit, bits...);\n          ~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n</code></pre>\n\n<p>At this point, I renamed the two recursive functions, in case there was ambiguity:</p>\n\n<pre><code>template &lt;typename T1, typename T2&gt;\nconstexpr T1 MakeByte_(T1 byte, quint32 pos, T2 bit)\n{\n  return byte | (bit &lt;&lt; pos);\n}\ntemplate &lt;typename T1, typename... T2&gt;\nconstexpr T1 MakeByte_(T1 byte, quint32 pos, T1 bit, T2... bits)\n{\n  return MakeByte_(byte | (bit &lt;&lt; pos), pos + 1, bit, bits...);\n}\ntemplate &lt;typename T1, typename... T2&gt;\nconstexpr T1 MakeByte(T1 bit, T2... bits)\n{\n  return MakeByte_(static_cast&lt;T1&gt;(0), 0, bit, bits...);\n}\n</code></pre>\n\n<p>This code does compile, but I can't help but feel this is a bit of a hack. From a design perspective, what is the best way to reduce ambiguity within variadic templated functions?</p>\n"}, {"tags": ["c++", "arrays", "recursion"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1508966304, "post_id": 46941912, "comment_id": 80831801, "body": "The error messages following the one you showed, &quot;candidate is...&quot; will provide more information as to the reason for the substitution failure. Since your question fails to meet all the requirements for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, as explained in stackoverflow.com&#39;s <a href=\"https://stackoverflow.com/help\">help center</a>, and the shown error message is incomplete, it&#39;s unlikely that anyone will be able to figure out an answer."}, {"owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508966836, "post_id": 46941912, "comment_id": 80832039, "body": "This code is verifiable and complete.  I might be able to chop out a few lines, but it&#39;s pretty minimal.  I will post the full error message, but this is the code that produces that error."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508967013, "post_id": 46941912, "comment_id": 80832114, "body": "No, it is not complete. The definition of <code>string_join</code> is not found anywhere. Additionally, it clearly needs some header files, like <code>&lt;vector&gt;</code> and <code>&lt;iostream&gt;</code>. If it cannot be copy-pasted and the compilation attempt does not produce the claimed results, it is not complete, or verifiable. Fail."}, {"owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508967140, "post_id": 46941912, "comment_id": 80832182, "body": "oops.  This is a couple of files pasted together, so I missed the <code>string_join</code>.  Good catch."}], "answers": [{"comments": [{"owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "edited": false, "score": 0, "creation_date": 1508968394, "post_id": 46942326, "comment_id": 80832712, "body": "Was there a good reason to totally rewrite it?  Can you point out the problems with the original design?"}, {"owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "reply_to_user": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "edited": false, "score": 1, "creation_date": 1508970947, "post_id": 46942326, "comment_id": 80833577, "body": "@Scott I don&#39;t know that is was a good reason, but my approach works with arbitrarily nested containers without requiring knowledge of the depth up front. With a little effort, it could be extended to walk tuples or user defined structures where the depth is not uniform."}, {"owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "edited": false, "score": 0, "creation_date": 1509032346, "post_id": 46942326, "comment_id": 80864271, "body": "&quot;without requiring knowledge of the depth up front&quot; ----niiiiccceeeee"}, {"owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "reply_to_user": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "edited": false, "score": 0, "creation_date": 1509032723, "post_id": 46942326, "comment_id": 80864500, "body": "Thanks. I updated it to walk tuples too. The one missing piece is fine grain control over delimiters. From what I see of your use case, I would just walk the top level container independently in insert newlines there."}], "tags": [], "owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "is_accepted": false, "score": 2, "last_activity_date": 1508973513, "last_edit_date": 1508973513, "creation_date": 1508966853, "answer_id": 46942326, "question_id": 46941912, "link": "https://stackoverflow.com/questions/46941912/recursive-iterable-template-functions-c/46942326#46942326", "title": "recursive iterable template functions c++", "body": "<p>Here is a sketch of how I would approach it:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;type_traits&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;tuple&gt;\n\n// this allows us to test if a element should be recursed into\n\ntemplate &lt;typename iterable, typename tag = void&gt;\nstruct is_iterable\n{\n    static constexpr bool value = false;\n};\n\ntemplate &lt;typename iterable&gt;\nstruct is_iterable &lt;iterable, std::void_t &lt;decltype (std::begin (std::declval &lt;iterable&gt; ()))&gt;&gt;\n{\n    static constexpr bool value = true;\n};\n\ntemplate &lt;typename iterable&gt;\nconstexpr bool is_iterable_v = is_iterable &lt;iterable&gt;::value;\n\n// visit elements of a tuple\n\ntemplate &lt;size_t Index, typename visitor, typename ...types&gt;\nvoid visit_tuple (std::tuple &lt;types...&gt; const &amp; Tuple, visitor &amp;&amp; Visitor)\n{\n    Visitor (std::get &lt;Index&gt; (Tuple));\n\n    constexpr auto nextIndex = Index + 1;\n\n    if constexpr (nextIndex &lt; sizeof... (types))\n        visit_tuple &lt;nextIndex&gt; (Tuple, Visitor);\n}\n\n// this function generically walks the elements of a container, with an overload for tuples and pairs\n\ntemplate &lt;typename container, typename visitor&gt;\nstd::enable_if_t &lt;is_iterable_v &lt;container&gt;&gt;\nvisit_elements (container const &amp; Container, visitor &amp;&amp; Visitor)\n{\n    for (auto &amp;&amp; Element: Container)\n        Visitor (Element);\n}\n\ntemplate &lt;typename visitor, typename ...element_types&gt;\nvoid visit_elements (std::tuple &lt;element_types...&gt; const &amp; Tuple, visitor &amp;&amp; Visitor)\n{\n    if constexpr (sizeof... (element_types) &gt; 0)\n        visit_tuple &lt;0&gt; (Tuple, Visitor);\n}\n\ntemplate &lt;typename visitor, typename first_type, typename second_type&gt;\nvoid visit_elements (std::pair  &lt;first_type, second_type&gt; const &amp; Pair, visitor &amp;&amp; Visitor)\n{\n    Visitor (Pair.first);\n    Visitor (Pair.second);\n}\n\n// type trait for testing if a value is \"visitable\"\n\nstruct dummy_visitor { template &lt;typename type&gt; void operator () (type &amp;&amp;); };\n\ntemplate &lt;typename container, typename tag = void&gt;\nstruct is_visitable\n{\n    static constexpr bool value = false;\n};\n\ntemplate &lt;typename container&gt;\nstruct is_visitable &lt;container, std::void_t &lt;decltype (visit_elements (std::declval &lt;container&gt; (), dummy_visitor()))&gt;&gt;\n{\n    static constexpr bool value = true;\n};\n\ntemplate &lt;typename container&gt;\nconstexpr bool  is_visitable_v =  is_visitable &lt;container&gt;::value;\n\n// this function walks each item and either emits it or recurses into it\n\ntemplate &lt;typename iterable&gt;\nbool join_impl (std::ostream &amp; os, char delim, bool emitted_anything, iterable const &amp; Iterable)\n{\n  using std::begin;\n  using std::end;\n\n  visit_elements (Iterable, [&amp;] (auto &amp;&amp; Element) {\n\n    if constexpr (!is_visitable_v &lt;decltype (Element)&gt;)\n    {\n        if (emitted_anything)\n          os &lt;&lt; delim;\n\n        os &lt;&lt; Element;\n\n        emitted_anything = true;\n    }\n    else\n    {\n      emitted_anything = join_impl (os, delim, emitted_anything, Element);\n    }\n\n  });\n\n  return emitted_anything;\n}\n\n// these are wrappers to adapt join_impl for different use cases\n\ntemplate &lt;typename container&gt;\nstruct joiner\n{\n    char delim;\n    container const &amp; Container;\n\n    operator std::string () const { return to_string &lt;char&gt; (); }\n\n    template &lt;typename char_t&gt;\n    std::basic_string &lt;char_t&gt; to_string () const;\n};\n\ntemplate &lt;typename container&gt;\nstd::ostream &amp; operator &lt;&lt; (std::ostream &amp; os, joiner &lt;container&gt; j)\n{\n    bool emitted_anything = false;\n    join_impl (os, j.delim, emitted_anything, j.Container);\n    return os;\n}\n\ntemplate &lt;typename container&gt;\ntemplate &lt;typename char_t&gt;\nstd::basic_string &lt;char_t&gt; joiner &lt;container&gt;::to_string () const\n{\n    std::ostringstream os;\n    os &lt;&lt; *this;\n    return os;\n}\n\ntemplate &lt;typename container&gt;\nstd::enable_if_t &lt;is_visitable_v &lt;container&gt;, joiner &lt;container&gt;&gt;\njoin (char delim, container const &amp; Container)\n{\n    return joiner &lt;container&gt; { delim, Container };\n}\n\n// test the streaming use case\n\nint main ()\n{\n    std::vector &lt;std::vector &lt;std::tuple &lt;int, float&gt;&gt;&gt; x {\n        { { 1, 1.0f }, { 2, 2.0f }},\n        { { 3, 3.0f }, { 4, 4.0f }},\n    };\n\n    std::cout &lt;&lt; join (',', x) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This should work only any recursion of things that support the standard iteration protocols. It also supports tuples and pairs. In can be extended to user define structures by defining a overload of <code>visit_elements</code> that visits each exposed field. The <code>is_iterable</code> type trait needs work to be more precise in its expected interface.</p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1508975359, "post_id": 46942689, "comment_id": 80834862, "body": "I would suggest some changes to ease usage and clean the code: <a href=\"https://ideone.com/rsPHjY\" rel=\"nofollow noreferrer\">Demo</a>"}, {"owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1509032478, "post_id": 46942689, "comment_id": 80864350, "body": "Oh yeah, you can get the end with <code>std::end</code>!  That&#39;s a good suggestion."}], "tags": [], "owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "is_accepted": false, "score": 0, "last_activity_date": 1508968609, "creation_date": 1508968609, "answer_id": 46942689, "question_id": 46941912, "link": "https://stackoverflow.com/questions/46941912/recursive-iterable-template-functions-c/46942689#46942689", "title": "recursive iterable template functions c++", "body": "<p>I managed to clean up the errors.  I was merely miscalling a functor.  My original intent with this was to have it work for arrays as well, which it does not.  Anyway, this is bascially a csv-writer for csvs of arbitrary dimension.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;typeinfo&gt;\n#include &lt;vector&gt;\n\ntemplate &lt;typename RAI&gt;\nstd::string string_join(RAI begin, RAI end, std::string delimiter) {\n    if (begin == end) { return \"\"; }\n    std::string joint = std::to_string(*begin);\n    begin++;\n    for (; begin != end; begin++) {\n        joint += delimiter + std::to_string(*begin);\n    }\n    return joint;\n}\n\ntemplate &lt;typename RAI, int depth&gt;\nstruct string_join_recursive {\n    std::string operator()(RAI iterator, std::string *delimiters, int *dimensions) {\n        typedef typename std::iterator_traits&lt;RAI&gt;::value_type::iterator value_iterator_type;\n        std::string joint = string_join_recursive&lt;value_iterator_type, depth-1&gt;()(std::begin(*iterator), delimiters+1, dimensions+1);\n        iterator++;\n        for (int i=1; i&lt;*dimensions; i++) {\n            joint += *delimiters + string_join_recursive&lt;value_iterator_type, depth-1&gt;()(std::begin(*iterator), delimiters+1, dimensions+1);\n            iterator++;\n        }\n        return joint;\n    }\n};\n\ntemplate &lt;typename RAI&gt;\nstruct string_join_recursive&lt;RAI,1&gt; {\n    std::string operator()(RAI iterator, std::string *delimiters, int *dimensions) {\n        return string_join(iterator, iterator + *dimensions, *delimiters);\n    }\n};\n\nint main() {\n    std::vector&lt;int&gt; a = {1,2,3};\n    std::vector&lt;int&gt; b = {4,5,6};\n    std::vector&lt;int&gt; c = {7,8,9};\n    std::vector&lt;int&gt; d = {10,11,12};\n    std::vector&lt;std::vector&lt;int&gt;&gt; e = {a,b};\n    std::vector&lt;std::vector&lt;int&gt;&gt; f = {c,d};\n    std::vector&lt;std::vector&lt;std::vector&lt;int&gt;&gt;&gt; g = {e,f};\n    std::string delimiters[3] = {\"\\n\",\";\",\",\"};\n    int dimensions[3] = {2, 2, 3};\n    std::cout &lt;&lt; string_join_recursive&lt;std::vector&lt;std::vector&lt;std::vector&lt;int&gt;&gt;&gt;::iterator, 3&gt;()(g.begin(), delimiters, dimensions) &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1508973513, "creation_date": 1508964994, "last_edit_date": 1508967213, "question_id": 46941912, "link": "https://stackoverflow.com/questions/46941912/recursive-iterable-template-functions-c", "title": "recursive iterable template functions c++", "body": "<p>I'm confused about how to pass type info down a recurrence chain.</p>\n\n<p>The goal of the following code is to do something like python's <code>\",\".join([\"a\",\"b\",\"c\"])</code>, but recursively, so that I can join an array of arrays of arrays of... of strings, where there are as many delimiters as the structure is deep.</p>\n\n<p>Here is my somewhat commented-out (in an attempt to get it to compile) code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;typeinfo&gt;\n#include &lt;vector&gt;\n\n\ntemplate &lt;typename RAI&gt;\nstd::string string_join(RAI begin, RAI end, std::string delimiter) {\n    if (begin == end) { return \"\"; }\n    std::string joint = std::to_string(*begin);\n    begin++;\n    for (; begin != end; begin++) {\n        joint += delimiter + std::to_string(*begin);\n    }\n    return joint;\n}\n\n\ntemplate &lt;typename RAI, int depth&gt;\nstruct string_join_recursive {\n    std::string operator()(RAI iterator, std::string *delimiter, int *dimensions) {\n        typedef typename std::iterator_traits&lt;RAI&gt;::value_type::iterator value_iterator_type;\n        std::cout &lt;&lt; typeid(value_iterator_type).name() &lt;&lt; \" \" &lt;&lt; typeid(std::begin(*iterator)).name() &lt;&lt; std::endl;\n        std::string joint = string_join_recursive&lt;value_iterator_type, depth-1&gt;(std::begin(*iterator), delimiter+1, dimensions+1);\n        iterator++;\n        for (int i=1; i&lt;*dimensions; i++) {\n            //joint += *delimiter + string_join_recursive&lt;value_iterator_type, depth-1&gt;(std::begin(*iterator), delimiter+1, dimensions+1);\n            iterator++;\n        }\n        return \"\";//joint;\n    }\n};\n\ntemplate &lt;typename RAI&gt;\nstruct string_join_recursive&lt;RAI,1&gt; {\n    std::string operator()(RAI iterator, std::string *delimiter, int *dimensions) {\n        return string_join(iterator, iterator + *dimensions, *delimiter);\n    }\n};\n\nint main() {\n    std::vector&lt;std::vector&lt;int&gt;&gt; a;\n    std::vector&lt;int&gt; b = {1,2,3};\n    std::vector&lt;int&gt; c = {1,2,4};\n    std::string delimiters[2] = {\"\\n\",\",\"};\n    int dimensions[2] = {2, 3};\n    std::cout &lt;&lt; string_join_recursive&lt;std::vector&lt;std::vector&lt;int&gt;&gt;::iterator, 2&gt;()(a.begin(), delimiters, dimensions) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I'm no veteran c++ programmer, so this probably has more than one issue, but for the time being, it won't even compile.  Apparently <code>value_iterator_type</code> is not the type that I'm thinking it is as this program runs, but I'm not sure exactly what it is.  OTOH, when I comment out the line 5, it compiles, and the print line above it says that those two things are the same type.</p>\n\n<p>Here's the error I'm getting: </p>\n\n<pre><code>error: no matching function for call to \u2018string_join_recursive&lt;__gnu_cxx::__normal_iterator&lt;int*, std::vector&lt;int&gt; &gt;, 1&gt;::string_join_recursive(std::vector&lt;int&gt;::iterator, std::__cxx11::string*, int*)\u2019\n         std::string joint = string_join_recursive&lt;value_iterator_type, depth-1&gt;(std::begin(*iterator), delimiter+1, dimensions+1);\n</code></pre>\n\n<p>Bonus points for ways to do this thing in a cleaner fashion.\nMore bonus points for ways to make this work with arbitrary iterables (arrays, etc)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1508965011, "post_id": 46941899, "comment_id": 80831133, "body": "The key type for you map is a set!? Shouldn&#39;t it be the other way around?"}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1508965104, "post_id": 46941899, "comment_id": 80831184, "body": "it should be an array,vector or set"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 4, "creation_date": 1508965278, "post_id": 46941899, "comment_id": 80831293, "body": "<code>it-&gt;first</code> is a <code>std::set&lt;int&gt;</code>, and there&#39;s no stream insertion operator for that. I have no solution as I have no idea what you&#39;re attempting to accomplish."}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1508965322, "post_id": 46941899, "comment_id": 80831326, "body": "so what I can do?"}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1508965400, "post_id": 46941899, "comment_id": 80831363, "body": "I have some integer in a set or it can be in array or vector and I want to map some of them to zero and some of them to 1"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1509663969, "post_id": 46941899, "comment_id": 81121554, "body": "thats very weird to have a set as a key of a map. What do you expect the operations to be? What is op= for a set of int,  and op&lt;?"}], "answers": [{"comments": [{"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1508966829, "post_id": 46942216, "comment_id": 80832032, "body": "Beyond disliking it, it\u2019s <a href=\"http://en.cppreference.com/w/cpp/language/extending_std\" rel=\"nofollow noreferrer\">undefined behavior</a> to do so!"}, {"owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "edited": false, "score": 0, "creation_date": 1508967555, "post_id": 46942216, "comment_id": 80832361, "body": "its very complex for me"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 8, "creation_date": 1508967610, "post_id": 46942216, "comment_id": 80832382, "body": "It&#39;s c++, I&#39;m afraid it will not get less complex."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1508967854, "post_id": 46942216, "comment_id": 80832481, "body": "Here&#39;s something that might help you understand the code: <a href=\"http://coliru.stacked-crooked.com/a/8d812dece2ea19c1\" rel=\"nofollow noreferrer\">in imperative fashion</a>. It results in less generic and less idiomatic C++. Notably, now it will not work for <code>set&lt;int&gt;</code> and <code>vector&lt;int&gt;</code> at the same time, but perhaps you like it better?"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 6, "last_activity_date": 1508966736, "last_edit_date": 1508966736, "creation_date": 1508966292, "answer_id": 46942216, "question_id": 46941899, "link": "https://stackoverflow.com/questions/46941899/how-do-i-output-a-set-used-as-key-for-a-map/46942216#46942216", "title": "How do I output a set used as key for a map?", "body": "<p>Make a stream operator for the key type.</p>\n\n<p>I personally dislike creating the overload in the <code>std</code> namespace, so I create a \"manipulator\" wrapper:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/b782340c5747434f\" rel=\"noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;set&gt;\n#include &lt;map&gt;\n#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n\ntemplate &lt;typename T&gt;\nstruct io {\n    io(T const&amp; t) : t(t) {}\n  private:\n    T const&amp; t;\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, io const&amp; o) {\n        os &lt;&lt; \"{ \";\n        using namespace std;\n        copy(begin(o.t), end(o.t), ostream_iterator&lt;typename T::value_type&gt;(os, \" \"));\n        return os &lt;&lt; \"}\";\n    }\n};\n\nint main() {  \n    using namespace std;\n    auto myMap = map&lt;set&lt;int&gt;, int&gt; { { { { 4, 3 }, 8 } } };\n\n    for (auto&amp; [k,v] : myMap)\n        std::cout &lt;&lt; io{k} &lt;&lt; \" -&gt; \" &lt;&lt; v &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>{ 3 4 } -&gt; 8\n</code></pre>\n\n<ul>\n<li>A version just using c++11: <a href=\"http://coliru.stacked-crooked.com/a/bfb571f3e43bda18\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/bfb571f3e43bda18</a></li>\n<li>A version just using c++03: <a href=\"http://coliru.stacked-crooked.com/a/3f28f8f90c386b50\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/3f28f8f90c386b50</a> (man that was tedious)</li>\n</ul>\n"}], "owner": {"reputation": 519, "user_id": 8834051, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/732bb442e3169d2a0d852109facc938f?s=128&d=identicon&r=PG&f=1", "display_name": "sherek_66", "link": "https://stackoverflow.com/users/8834051/sherek-66"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 46942216, "answer_count": 1, "score": 3, "last_activity_date": 1509662869, "creation_date": 1508964920, "last_edit_date": 1509649844, "question_id": 46941899, "link": "https://stackoverflow.com/questions/46941899/how-do-i-output-a-set-used-as-key-for-a-map", "title": "How do I output a set used as key for a map?", "body": "<p>I get this error when I compile this code:</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;set&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    using std::set;\n    using std::map;\n\n    set&lt;int&gt; s;\n    s.insert(4);\n    s.insert(3);\n\n    map&lt;set&lt;int&gt;, int&gt; myMap;\n\n    myMap.insert(make_pair(s, 8));\n\n    for (map&lt;set&lt;int&gt;, int&gt;::iterator it = myMap.begin(); it != myMap.end();\n            it++) {\n\n        std::cout &lt;&lt; it-&gt;first &lt;&lt; \"-&gt;\" &lt;&lt; it-&gt;second &lt;&lt; std::endl; // HERE\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The error is from the line marked <code>//HERE</code>:</p>\n\n<blockquote>\n  <p>error: cannot bind <code>std::ostream</code> {aka <code>std::basic_ostream&lt;char&gt;</code>} lvalue to <code>std::basic_ostream&lt;char&gt;&amp;&amp;</code></p>\n</blockquote>\n"}, {"tags": ["c++", "unicode", "utf-8"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 5, "creation_date": 1508964044, "post_id": 46941667, "comment_id": 80830592, "body": "The <code>CP437</code> character set of <code>&#246;</code> is 148, which has nothing to do with Unicode.  The unicode value for <code>&#246;</code> is 246, which has nothing to do with CP437. Linux has nothing to do with any of this. UTF8 is an encoding, not a locale."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1508964155, "post_id": 46941667, "comment_id": 80830642, "body": "The question is: &quot;how to convert text from CP437 encoding to UTF8 encoding?&quot;"}, {"owner": {"reputation": 3, "user_id": 8806495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9a2a864fd6ad6d63a409d0111373fb?s=128&d=identicon&r=PG&f=1", "display_name": "adam", "link": "https://stackoverflow.com/users/8806495/adam"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1508964334, "post_id": 46941667, "comment_id": 80830754, "body": "@MooingDuck Thanks. Any suggesstions on how to do this?"}, {"owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 5, "creation_date": 1508964582, "post_id": 46941667, "comment_id": 80830878, "body": "Interpreting UTF-8 as little-endian 16-bit integers is also not a thing anyone should do."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8806495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9a2a864fd6ad6d63a409d0111373fb?s=128&d=identicon&r=PG&f=1", "display_name": "adam", "link": "https://stackoverflow.com/users/8806495/adam"}, "edited": false, "score": 0, "creation_date": 1508965845, "post_id": 46941999, "comment_id": 80831592, "body": "That&#39;s actually a good information. Could you please help sharing more information about the usage these conversion library which could be helpful"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 3, "user_id": 8806495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9a2a864fd6ad6d63a409d0111373fb?s=128&d=identicon&r=PG&f=1", "display_name": "adam", "link": "https://stackoverflow.com/users/8806495/adam"}, "edited": false, "score": 0, "creation_date": 1508966674, "post_id": 46941999, "comment_id": 80831972, "body": "Read their respective documentations and examples"}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 3, "user_id": 8806495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9a2a864fd6ad6d63a409d0111373fb?s=128&d=identicon&r=PG&f=1", "display_name": "adam", "link": "https://stackoverflow.com/users/8806495/adam"}, "edited": false, "score": 0, "creation_date": 1508967753, "post_id": 46941999, "comment_id": 80832446, "body": "@adam if you want to roll your own the <a href=\"https://en.wikipedia.org/wiki/Code_page_437\" rel=\"nofollow noreferrer\">Wikipedia page for CP437</a> contains the code points for all 256 characters. Encoding those into UTF-8 is easy, see <a href=\"https://stackoverflow.com/a/148766/5987\">stackoverflow.com/a/148766/5987</a> for just one example."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1508969471, "post_id": 46941999, "comment_id": 80833082, "body": "Here&#39;s a better link for the conversion table: <a href=\"ftp://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/PC/CP437.TXT\" rel=\"nofollow noreferrer\">unicode.org/Public/MAPPINGS/VENDORS/MICSFT/PC/CP437.TXT</a>"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 5, "last_activity_date": 1508966659, "last_edit_date": 1508966659, "creation_date": 1508965295, "answer_id": 46941999, "question_id": 46941667, "link": "https://stackoverflow.com/questions/46941667/how-to-convert-text-from-cp437-encoding-to-utf8-encoding/46941999#46941999", "title": "how to convert text from CP437 encoding to UTF8 encoding?", "body": "<p>On Windows, you can use the Win32 <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd319072.aspx\" rel=\"nofollow noreferrer\"><code>MultiByteToWideChar()</code></a> function to convert data from CP437 to UTF-16, and then use the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd374130.aspx\" rel=\"nofollow noreferrer\"><code>WideCharToMultiByte()</code></a> function to convert data from UTF-16 to UTF-8.</p>\n\n<p>On Linux, you can use a Unicode conversion library, like <a href=\"https://www.gnu.org/software/libiconv/\" rel=\"nofollow noreferrer\">libiconv</a> or <a href=\"http://site.icu-project.org/\" rel=\"nofollow noreferrer\">ICU</a> (which are available for Windows, too).</p>\n\n<hr>\n\n<p>In C++11 and later, you can use <a href=\"http://en.cppreference.com/w/cpp/locale/wstring_convert\" rel=\"nofollow noreferrer\"><code>std::wstring_convert</code></a> to:</p>\n\n<ul>\n<li><p>convert from CP437 to either UTF-16 or UTF-32/UCS-4 (if you can get/make a <code>codecvt</code> for CP437, that is).</p></li>\n<li><p>then, convert from UTF-16 or UTF-32/UCS-4 to UTF-8.</p></li>\n</ul>\n\n<p>You can't use <a href=\"http://en.cppreference.com/w/cpp/locale/codecvt_utf8\" rel=\"nofollow noreferrer\"><code>codecvt_utf8</code></a> to convert from CP437 to UTF-8 directly.  It only supports conversions between:</p>\n\n<ul>\n<li><p>UTF-8 and UCS-2 (not UTF-16!)</p></li>\n<li><p>UTF-8 and UTF-32/UCS-4.</p></li>\n</ul>\n\n<p>You have to use <a href=\"http://en.cppreference.com/w/cpp/locale/codecvt_utf8_utf16\" rel=\"nofollow noreferrer\"><code>codecvt_utf8_utf16</code></a> for conversions between UTF-8 and UTF-16.</p>\n\n<p>Or, you can use <a href=\"http://en.cppreference.com/w/cpp/string/multibyte/mbrtoc16\" rel=\"nofollow noreferrer\"><code>mbrtoc16()</code></a> to convert CP437 to UTF-16 using a CP437 locale, and then use <a href=\"http://en.cppreference.com/w/cpp/string/multibyte/c16rtomb\" rel=\"nofollow noreferrer\"><code>c16rtomb()</code></a> to convert UTF-16 to UTF-8 using a UTF-8 locale (if your STL library implements a fix for <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2059.htm#dr_488\" rel=\"nofollow noreferrer\">DR488</a>, otherwise <code>c16rtomb()</code> only supports UCS-2 and not UTF-16!).</p>\n\n<hr>\n\n<p>Otherwise, just create your own CP437-to-UTF8 lookup table for the 256 possible CP437 bytes, and then do the conversion manually, one byte at a time.</p>\n"}, {"comments": [{"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1509044137, "post_id": 46961671, "comment_id": 80871072, "body": "No, this is only half of the solution. You still need something to convert the bytes of CP437 to Unicode codepoints. If you don&#39;t you&#39;ll get valid UTF-8 output, but it will be the wrong characters."}], "tags": [], "owner": {"reputation": 3, "user_id": 8806495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9a2a864fd6ad6d63a409d0111373fb?s=128&d=identicon&r=PG&f=1", "display_name": "adam", "link": "https://stackoverflow.com/users/8806495/adam"}, "is_accepted": false, "score": -1, "last_activity_date": 1509043520, "creation_date": 1509043520, "answer_id": 46961671, "question_id": 46941667, "link": "https://stackoverflow.com/questions/46941667/how-to-convert-text-from-cp437-encoding-to-utf8-encoding/46961671#46961671", "title": "how to convert text from CP437 encoding to UTF8 encoding?", "body": "<p>I found this solution to Convert CP437 to UTF8. This works perfectly in LINUX</p>\n\n<pre><code>        BYTE high, low;\n        WORD result;\n        if (sCMResult.wChar &gt; 0x80 &amp;&amp; sCMResult.wChar &lt;= 0x7ff)\n        {\n            low = (0xc0 | ((sCMResult.wChar &gt;&gt; 6) &amp; 0x1f));\n            high = (0x80 | (sCMResult.wChar &amp; 0x3f));\n            result = low | (high &lt;&lt; 8);\n        }\n</code></pre>\n\n<p>Full post can be found <a href=\"https://stackoverflow.com/a/148766/5987\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 592, "user_id": 2037998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W4XBV.png?s=128&g=1", "display_name": "Ralph Bisschops", "link": "https://stackoverflow.com/users/2037998/ralph-bisschops"}, "is_accepted": false, "score": 0, "last_activity_date": 1581633119, "creation_date": 1581633119, "answer_id": 60217481, "question_id": 46941667, "link": "https://stackoverflow.com/questions/46941667/how-to-convert-text-from-cp437-encoding-to-utf8-encoding/60217481#60217481", "title": "how to convert text from CP437 encoding to UTF8 encoding?", "body": "<p>It is not in C++, but you can also use bash to convert a file:</p>\n\n<pre><code>$ iconv -f CP437 -t UTF-8 input_file_name.txt -o output_file_name.txt\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8806495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9a2a864fd6ad6d63a409d0111373fb?s=128&d=identicon&r=PG&f=1", "display_name": "adam", "link": "https://stackoverflow.com/users/8806495/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3700, "favorite_count": 0, "accepted_answer_id": 46941999, "answer_count": 3, "score": 0, "last_activity_date": 1581633119, "creation_date": 1508963961, "last_edit_date": 1508966957, "question_id": 46941667, "link": "https://stackoverflow.com/questions/46941667/how-to-convert-text-from-cp437-encoding-to-utf8-encoding", "title": "how to convert text from CP437 encoding to UTF8 encoding?", "body": "<p>In Windows, the value of the Unicode character <code>\u00f6</code> (Latin small letter o with diaeresis) in the CP437 character set is <code>148</code>.</p>\n\n<p>In Linux, the byte value for <code>\u00f6</code> in the UTF-8 encoding is:</p>\n\n<pre><code>-61(Hi Byte) \n-74(Lo Byte)\n(unsigned value = 46787)\n</code></pre>\n\n<p>My Question is, how can I convert from <code>148</code> from CP437 to UTF-8 in C++ on Linux?</p>\n\n<p>The detailed info for my problem lies here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/46849332/\">open() function in Linux with extended characters (128-255) returns -1 error</a></p>\n\n<p>Temporary solution:\n<a href=\"https://i.stack.imgur.com/hA8S7.png\" rel=\"nofollow noreferrer\">C++11 supports the conversion to UTF-8  using <code>codecvt_utf8</code></a></p>\n"}, {"tags": ["c++", "linear-algebra", "armadillo"], "comments": [{"owner": {"reputation": 1382, "user_id": 3928744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b904e3280e386d51bd888433c8ab0fa4?s=128&d=identicon&r=PG&f=1", "display_name": "hbrerkere", "link": "https://stackoverflow.com/users/3928744/hbrerkere"}, "edited": false, "score": 1, "creation_date": 1508986861, "post_id": 46941551, "comment_id": 80837585, "body": "Since your matrix is tiny (3x3), use a dense matrix instead of a sparse matrix. Then use the <a href=\"http://arma.sourceforge.net/docs.html#eig_gen\" rel=\"nofollow noreferrer\">eig_gen()</a> function for dense matrices. (As the <a href=\"http://arma.sourceforge.net/docs.html#SpMat\" rel=\"nofollow noreferrer\">docs for SpMat</a> state, sparse matrices are only meant for &quot;large matrices where only a small minority of the elements are non-zero&quot;. There is little point in finding all the eigenvectors of a sparse matrix, as this ends up with a dense matrix with the eigenvectors, which defeats the purpose of sparse matrices.)"}, {"owner": {"reputation": 29435, "user_id": 458742, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ee0a7599f30c29076a3c9a2c022e473b?s=128&d=identicon&r=PG", "display_name": "spraff", "link": "https://stackoverflow.com/users/458742/spraff"}, "reply_to_user": {"reputation": 1382, "user_id": 3928744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b904e3280e386d51bd888433c8ab0fa4?s=128&d=identicon&r=PG&f=1", "display_name": "hbrerkere", "link": "https://stackoverflow.com/users/3928744/hbrerkere"}, "edited": false, "score": 0, "creation_date": 1509009115, "post_id": 46941551, "comment_id": 80847606, "body": "@hbrerkere I know what dense/sparse matrices are for. This is something that my test suite exposed.The error message seems to indicate that you can only get the first 998 eigenvalues out of a 1,000-square matrix. This just seems odd."}, {"owner": {"reputation": 180, "user_id": 1362962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84f3c9451d36a5d3d20b92cfe00468e4?s=128&d=identicon&r=PG", "display_name": "Zythos", "link": "https://stackoverflow.com/users/1362962/zythos"}, "reply_to_user": {"reputation": 1382, "user_id": 3928744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b904e3280e386d51bd888433c8ab0fa4?s=128&d=identicon&r=PG&f=1", "display_name": "hbrerkere", "link": "https://stackoverflow.com/users/3928744/hbrerkere"}, "edited": false, "score": 0, "creation_date": 1535384701, "post_id": 46941551, "comment_id": 91036400, "body": "@hbrerkere would it reduce memory? I would be interested in getting only some but I don&#39;t know beforehand how many are going to be significant."}, {"owner": {"reputation": 180, "user_id": 1362962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84f3c9451d36a5d3d20b92cfe00468e4?s=128&d=identicon&r=PG", "display_name": "Zythos", "link": "https://stackoverflow.com/users/1362962/zythos"}, "edited": false, "score": 0, "creation_date": 1535398580, "post_id": 46941551, "comment_id": 91042807, "body": "@spraff You can get all eigenvalues if you want, at least with the newest version it worked for me. I have found <a href=\"https://mathoverflow.net/q/283696/128094\">here</a> how to determine how many are important if your matrix is normal."}], "owner": {"reputation": 29435, "user_id": 458742, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ee0a7599f30c29076a3c9a2c022e473b?s=128&d=identicon&r=PG", "display_name": "spraff", "link": "https://stackoverflow.com/users/458742/spraff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 332, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1508963469, "creation_date": 1508963469, "question_id": 46941551, "link": "https://stackoverflow.com/questions/46941551/how-to-get-all-eigenvalues-from-sparse-matrix-with-eigs-gen", "title": "How to get all eigenvalues from sparse matrix with eigs_gen", "body": "<p>I'm using Armadillo. The <a href=\"http://arma.sourceforge.net/docs.html#eigs_gen\" rel=\"nofollow noreferrer\"><code>eigs_gen</code></a> function (for <code>SpMat</code> sparse matrices) has a parameter <code>k</code> for the number of eigenvalues to compute.</p>\n\n<p>I have a 3x3 matrix <code>my_matrix</code>, when I run</p>\n\n<pre><code>arma::cx_fvec values;\narma::cx_fmat vectors;\n\narma::eigs_gen (values, vectors, my_matrix, 3);\n</code></pre>\n\n<p>I get the following exception</p>\n\n<pre><code>eigs_gen(): n_eigvals + 1 must be less than the number of rows in the matrix\n</code></pre>\n\n<p>To have 3 eigenvalues for a 3x3 matrix is well-defined in general, so I don't understand this restriction.</p>\n\n<p>On the other hand, the <code>eig_gen</code> function, which computes all eigenvalues, only compiles for the dense matrix <code>Mat</code> type.</p>\n\n<p>How do I find all eigenvalues for a sparse matrix with Armadillo?</p>\n"}, {"tags": ["c++", "c++11", "templates", "overload-resolution", "explicit-conversion"], "comments": [{"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1509014713, "post_id": 46941515, "comment_id": 80851488, "body": "But why would you even do this? What&#39;s the point of having both <code>operator T()</code> and <code>operator const T&amp;</code>?"}, {"owner": {"reputation": 55, "user_id": 4297846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0343c564a449d788a5c4385ef3eca1a9?s=128&d=identicon&r=PG&f=1", "display_name": "aclex", "link": "https://stackoverflow.com/users/4297846/aclex"}, "reply_to_user": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 1, "creation_date": 1509104896, "post_id": 46941515, "comment_id": 80895995, "body": "@ArneVogel The intention of it in the real code was to provide alternative conversion sequences, e.g., if the variant holds <code>long double</code>, then <code>operator T()</code> would help to cast it to <code>int</code>. But apparently I misunderstood things <code>static_cast</code> actually performs, so this conversion to value is indeed redundant."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4297846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0343c564a449d788a5c4385ef3eca1a9?s=128&d=identicon&r=PG&f=1", "display_name": "aclex", "link": "https://stackoverflow.com/users/4297846/aclex"}, "edited": false, "score": 0, "creation_date": 1509106818, "post_id": 46945276, "comment_id": 80897164, "body": "Yes, I tend to agree. Apparently <code>static_cast</code> doesn&#39;t perform explicit user-defined conversion as-is, without direct initialization of <code>new-type</code>, and for this initialization both <code>operator T</code> and <code>operator const T&amp;</code> looks suitable. Thanks for pointing out on this. Still it&#39;s not quite clear, how the suitable user-defined conversion is being chosen. If the conversion procedure is as implicit conversion, but also considering defined explicit conversions, than the resolution is based on the possibility of copy construction, and yes, both operators are equally suitable for that."}], "tags": [], "owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "is_accepted": true, "score": 0, "last_activity_date": 1508987511, "creation_date": 1508987511, "answer_id": 46945276, "question_id": 46941515, "link": "https://stackoverflow.com/questions/46941515/priority-and-ambiguity-of-explicit-conversion-operator-templates/46945276#46945276", "title": "Priority and ambiguity of explicit conversion operator templates", "body": "<p><code>static_cast</code> performs either implicit conversion or direct initialisation. In your case, implicit conversion is not viable, but direct initialisation <em>is</em> because <code>static_cast</code> considers <a href=\"http://en.cppreference.com/w/cpp/language/implicit_conversion\" rel=\"nofollow noreferrer\">explicit constructors and conversion functions</a>. So my guess is that clang (in my opinion correctly) identifies that there are two possible direct intialisations and complains accordingly. Not sure what is going on inside GCC, maybe it defaults to <code>operator T()</code> if it can find one, regardless of whether other ones exist.</p>\n"}], "owner": {"reputation": 55, "user_id": 4297846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0343c564a449d788a5c4385ef3eca1a9?s=128&d=identicon&r=PG&f=1", "display_name": "aclex", "link": "https://stackoverflow.com/users/4297846/aclex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 1, "accepted_answer_id": 46945276, "answer_count": 1, "score": 4, "last_activity_date": 1508987511, "creation_date": 1508963345, "question_id": 46941515, "link": "https://stackoverflow.com/questions/46941515/priority-and-ambiguity-of-explicit-conversion-operator-templates", "title": "Priority and ambiguity of explicit conversion operator templates", "body": "<p>I've been playing around with templated explicit conversion operators in my project, to implement explicit conversion from custom variant-like type. The minimal example reproducing my problem looks like the following (in C++14 mode):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\nclass A\n{\n        public:\n        template&lt;typename T&gt; explicit operator T() const // 1\n        {\n                cout &lt;&lt; \"operator T\" &lt;&lt; endl;\n                return T();\n        }\n\n        template&lt;typename T&gt; explicit operator const T&amp;() const // 2\n        {\n                cout &lt;&lt; \"operator const T&amp;\" &lt;&lt; endl;\n                throw runtime_error(\"operator const T&amp;\");\n        }\n\n        template&lt;typename T&gt; explicit operator T&amp;() // 3\n        {\n                cout &lt;&lt; \"operator T&amp;\" &lt;&lt; endl;\n                throw runtime_error(\"operator T&amp;\");\n        }\n\n\n};\n\n\nint main(int, char**)\n{\n        try\n        {\n                const A&amp; a = A();\n                cout &lt;&lt; abs(static_cast&lt;double&gt;(a) - 3.14) &lt;&lt; endl;\n        }\n        catch (const runtime_error&amp;)\n        {\n\n        }\n\n        return 0;\n}\n</code></pre>\n\n<p>The problem I faced is the operator chosen for the static_cast conversion. With the GCC it's sort of expected (1) case. The output is:</p>\n\n<pre><code>operator T\n3.14\n</code></pre>\n\n<p>But Clang refuses to compile this with the following output:</p>\n\n<pre><code>main.cpp:37:20: error: ambiguous conversion for static_cast from 'const A' to 'double'\n            cout &lt;&lt; std::abs(static_cast&lt;double&gt;(a) - 3.14) &lt;&lt; endl;\n                             ^~~~~~~~~~~~~~~~~~~~~~\nmain.cpp:10:32: note: candidate function [with T = double]\n    template&lt;typename T&gt; explicit operator T() const\n                                  ^\nmain.cpp:16:32: note: candidate function [with T = double]\n    template&lt;typename T&gt; explicit operator const T&amp;() const\n                                  ^\n1 error generated.\n</code></pre>\n\n<p>Why Clang considers conversion (2), when it apparently would require additional constructor call in the conversion sequence, while (1) wouldn't? And is it right (and GCC is then wrong) doing so?</p>\n"}, {"tags": ["c++", "opencv", "threshold"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1508965194, "post_id": 46941464, "comment_id": 80831239, "body": "A simple <a href=\"https://docs.opencv.org/2.4/modules/core/doc/basic_structures.html#matrix-expressions\" rel=\"nofollow noreferrer\">matrix expression</a> -- cv::Mat result(a &gt;= b);"}], "answers": [{"comments": [{"owner": {"reputation": 727, "user_id": 1956840, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/tcvy0.jpg?s=128&g=1", "display_name": "Zock77", "link": "https://stackoverflow.com/users/1956840/zock77"}, "edited": false, "score": 0, "creation_date": 1509632114, "post_id": 46942101, "comment_id": 81103347, "body": "Ahh. Why can&#39;t it always be that simple in coding? :D"}], "tags": [], "owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "is_accepted": true, "score": 0, "last_activity_date": 1508965751, "creation_date": 1508965751, "answer_id": 46942101, "question_id": 46941464, "link": "https://stackoverflow.com/questions/46941464/use-one-image-to-threshold-another/46942101#46942101", "title": "Use one image to threshold another", "body": "<p>A simple <a href=\"https://docs.opencv.org/2.4/modules/core/doc/basic_structures.html#matrix-expressions\" rel=\"nofollow noreferrer\">matrix expression</a> will do the job here.</p>\n\n<blockquote>\n  <p>This is a list of implemented matrix operations that can be combined in arbitrary complex expressions (here <code>A</code>, <code>B</code> stand for matrices (<code>Mat</code>), <code>s</code> for a scalar (<code>Scalar</code>), <code>alpha</code> for a real-valued scalar (<code>double</code>)):</p>\n  \n  <p>...</p>\n  \n  <p>Comparison: <code>A cmpop B</code>, <code>A cmpop alpha</code>, <code>alpha cmpop A</code>, where <code>cmpop</code> is one of:  <code>&gt;</code>, <code>&gt;=</code>, <code>==</code>, <code>!=</code>, <code>&lt;=</code>, <code>&lt;</code>. The result of comparison is an 8-bit single channel mask whose elements are set to 255 (if the particular element or pair of elements satisfy the condition) or 0.</p>\n</blockquote>\n\n<p>Hence, something as simple as the following one-liner does what you ask:</p>\n\n<pre><code>cv::Mat result(source &gt;= threshold);\n</code></pre>\n"}], "owner": {"reputation": 727, "user_id": 1956840, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/tcvy0.jpg?s=128&g=1", "display_name": "Zock77", "link": "https://stackoverflow.com/users/1956840/zock77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 46942101, "answer_count": 1, "score": 2, "last_activity_date": 1508965751, "creation_date": 1508963119, "question_id": 46941464, "link": "https://stackoverflow.com/questions/46941464/use-one-image-to-threshold-another", "title": "Use one image to threshold another", "body": "<p>I need to apply a threshold to an image in a very specific way, so I came here to see if it is possible.</p>\n\n<p>Say I had two images: one source image, and one threshold image. What I want to is take the source image and use the threshold image to filter it. The operation would compare each pixel of the source image to the threshold image. I the pixel was the same or greater brightness, it would set it to white. If the pixel was less then the brightness, it would set it to black.</p>\n\n<p>Here is an example of what the threshold image might look like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CoNRM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CoNRM.png\" alt=\"enter image description here\"></a></p>\n\n<p>Please let me know if I can clarify myself at all.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 772, "user_id": 1896094, "user_type": "registered", "accept_rate": 3, "profile_image": "https://www.gravatar.com/avatar/b25379d9ed76c06b46f7d9a1868914c9?s=128&d=identicon&r=PG", "display_name": "Arthur Schwarez", "link": "https://stackoverflow.com/users/1896094/arthur-schwarez"}, "edited": false, "score": 0, "creation_date": 1508964801, "post_id": 46941556, "comment_id": 80831020, "body": "tAvoiding the design is indeed wise and judicious. Now comes an additional issue. in Vector&lt;T&gt;operator[] when ndx exceeds the current size of the allocated space a non-const function is called (getSpace()) to expand the space. Warning messages are issued.Any way of altering the code so warning messages are not issued?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 772, "user_id": 1896094, "user_type": "registered", "accept_rate": 3, "profile_image": "https://www.gravatar.com/avatar/b25379d9ed76c06b46f7d9a1868914c9?s=128&d=identicon&r=PG", "display_name": "Arthur Schwarez", "link": "https://stackoverflow.com/users/1896094/arthur-schwarez"}, "edited": false, "score": 0, "creation_date": 1508965411, "post_id": 46941556, "comment_id": 80831367, "body": "@ArthurSchwarez  <code>_ptr</code> also to be <code>mutable</code>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1508963839, "last_edit_date": 1508963839, "creation_date": 1508963502, "answer_id": 46941556, "question_id": 46941448, "link": "https://stackoverflow.com/questions/46941448/how-do-i-dynamically-allocate-space-in-a-template-class-without-violating-const/46941556#46941556", "title": "How do I dynamically allocate space in a template class without violating const restrictions?", "body": "<p>If we disregard the appropriateness of the design for a moment, you can change <code>ndx_</code> to be a <code>mutable</code> member and change the member function to be a <code>const</code> member function to get <code>const</code> reference to the member. You can add a non-<code>const</code> member function to get a non-<code>const</code> reference to allow you to modify the contents of a vector using the array operator.</p>\n\n<pre><code>using namespace std;\ntemplate &lt;typename T&gt;\nclass  Vector {\n   private:\n\n      // |\n      // v\n      mutable long _ndx = 0;\n\n      T*    _ptr;                               // storage for T objects\n   public:\n      Vector() { }\n\n      // The const version\n      // |                                 |\n      // v                                 v\n      T const&amp;  operator[](const long ndx) const { _ndx = ndx; return _ptr[ndx]; }\n\n      // The non-const version\n      T&amp;  operator[](const long ndx) { _ndx = ndx; return _ptr[ndx]; }\n };\n</code></pre>\n"}], "owner": {"reputation": 772, "user_id": 1896094, "user_type": "registered", "accept_rate": 3, "profile_image": "https://www.gravatar.com/avatar/b25379d9ed76c06b46f7d9a1868914c9?s=128&d=identicon&r=PG", "display_name": "Arthur Schwarez", "link": "https://stackoverflow.com/users/1896094/arthur-schwarez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508968130, "creation_date": 1508963035, "last_edit_date": 1508968130, "question_id": 46941448, "link": "https://stackoverflow.com/questions/46941448/how-do-i-dynamically-allocate-space-in-a-template-class-without-violating-const", "title": "How do I dynamically allocate space in a template class without violating const restrictions?", "body": "<p>This is my first experience with templates, consider this a newbie question (please).</p>\n\n<p>What I would like to do is to keep the convenience of using operator[] but structure the function to dynamic array growth, e.g., vector. I keep getting trashed with const violation errors. I would have preferred to use vector but I cam across a runtime error whenever I did an <code>x[ndx] = value</code>. I finally gave up and am trying to create my own version of vector.</p>\n\n<p>The example code is:</p>\n\n<pre><code>#ifndef VECTOR_H\n#define VECTOR_H\n\nusing namespace std;\ntemplate &lt;typename T&gt;\nclass  Vector {\n   private:\n      long _ndx = 0;\n      T*    _ptr;                               // storage for T objects\n   public:\n      Vector() { }\n      T&amp;   operator[](const long ndx) { _ndx = ndx; return _ptr[ndx]; }\n};\n\n#endif   // VECTOR_H\n\n\n\n# include &lt;iostream&gt;\n# include \"Vector.h\"\n\nusing namespace std;\n\nstruct X {\n   long a;\n   long b;\n   void toString() { cout &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; endl; }\n};\n\nclass Y {\nprivate:\n   long _ndx =0;\n   Vector&lt;X*&gt; word;\npublic:\n   Y() { }\n   X* operator[](const long ndx) const {  return word[ndx]; }\n};\n\nint main(int argc, char** argv) {\n   Y y;\n   X* x = y[0];\n}\n</code></pre>\n\n<p>The error is:</p>\n\n<pre><code>    main.cpp:20:58: error: passing 'const Vector&lt;X*&gt;' as 'this' argument\n    discards qualifiers [-fpermissive]\n    X* operator[](const long ndx) const {  return word[ndx]; }\n\n   In file included from main.cpp:4:0: Vector.h:13:12: note:   in call to 'T&amp; Vector&lt;T&gt;::operator[](long int) [with T = X*]'\n   T&amp;   operator[](const long ndx) { _ndx = ndx; return _ptr[ndx]; }\n</code></pre>\n\n<p>From other questions on stackoverflow I understand the error. I haven't been able to get -fpermissive to work. The actual code changes Vector::operator[] to do two things, adjust the high water mark for _ndx and, when _ndx exceeds some threshold, increase the vector size, here T* _ptr, copy the old information into the new space and delete the vector and use the new space. I can't figure how to do this 'gracefully'. </p>\n"}, {"tags": ["c++", "mfc", "linker", "odbc", "visual-studio-2017"], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1509050466, "post_id": 46941475, "comment_id": 80874633, "body": "This is not a sufficient error analysis. What is the issue? What have you done to diagnose it? What results did you get? Is there an official statement?"}, {"owner": {"reputation": 15062, "user_id": 60647, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5hguA.png?s=128&g=1", "display_name": "mwigdahl", "link": "https://stackoverflow.com/users/60647/mwigdahl"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1509113743, "post_id": 46941475, "comment_id": 80901728, "body": "Fair enough.  Answer updated with the details I have.  As this was an internal linker error, little of the flailing around I did trying to get past it (other than linking in non-debug mode, which works and which I mentioned) is relevant."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1509116188, "post_id": 46941475, "comment_id": 80903415, "body": "That&#39;s better. Still unfortunate, that there are no details communicated by MSFT about the bug itself, what causes it to surface, and which libraries of build configurations are affected."}], "tags": [], "owner": {"reputation": 15062, "user_id": 60647, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5hguA.png?s=128&g=1", "display_name": "mwigdahl", "link": "https://stackoverflow.com/users/60647/mwigdahl"}, "is_accepted": false, "score": 2, "last_activity_date": 1509113646, "last_edit_date": 1509113646, "creation_date": 1508963145, "answer_id": 46941475, "question_id": 46941432, "link": "https://stackoverflow.com/questions/46941432/lnk1103-when-linking-odbccp32-lib-using-visual-c-2017-targetting-xp-v141-xp/46941475#46941475", "title": "LNK1103 when linking ODBCCP32.lib using Visual C++ 2017 targetting XP (v141_xp) in debug mode", "body": "<p>It turns out that this is actually a compiler problem with certain versions of Visual Studio 2017.  Versions 15.3 and 15.4 have this problem, and short of linking in non-debug mode, I was unable to find a good solution in these compiler versions.</p>\n\n<p>I did, however, find a <a href=\"https://developercommunity.visualstudio.com/content/problem/99785/mfcs140libstdafxobj-fatal-error-lnk1103-debugging.html\" rel=\"nofollow noreferrer\">Developer Community</a> thread detailing this issue, which apparently affects a number of legacy libraries when linking using Visual Studio 2017 versions 15.3.x and 15.4.x.</p>\n\n<p>According to MSFT staff in that thread, the problem is resolved in 15.5.  From the thread linked above:</p>\n\n<blockquote>\n  <p>YongKang Zhu [MSFT] \u00b7 Oct 04 at 11:08 AM\n  Thanks for the report. The problem has been fixed in VS 2017 Update 5.</p>\n</blockquote>\n\n<p>I was able to confirm this is the case by installing the current 15.5 preview version and successfully linking the library.</p>\n\n<p>I added this question and answer because existing search information on this topic seems extremely poor.</p>\n"}], "owner": {"reputation": 15062, "user_id": 60647, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5hguA.png?s=128&g=1", "display_name": "mwigdahl", "link": "https://stackoverflow.com/users/60647/mwigdahl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1509113646, "creation_date": 1508962989, "question_id": 46941432, "link": "https://stackoverflow.com/questions/46941432/lnk1103-when-linking-odbccp32-lib-using-visual-c-2017-targetting-xp-v141-xp", "title": "LNK1103 when linking ODBCCP32.lib using Visual C++ 2017 targetting XP (v141_xp) in debug mode", "body": "<p>When attempting to upgrade a program that was originally built in Visual Studio 2010 to target 2017, I am getting LNK1103 errors when linking odbccp32.lib indicating:</p>\n\n<p><code>debugging information corrupt; recompile module</code></p>\n\n<p>I have included legacy_stdio_definitions.lib, which seems to be required to resolve symbol issues with legacy static libraries, but I still get the error about debug information.</p>\n\n<p>Release builds work fine.</p>\n"}, {"tags": ["c++", "matlab", "ode", "odeint"], "answers": [{"comments": [{"owner": {"reputation": 3216, "user_id": 327071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/804fa6ec98664af629d6dd90288eb95b?s=128&d=identicon&r=PG", "display_name": "Jacob", "link": "https://stackoverflow.com/users/327071/jacob"}, "reply_to_user": {"reputation": 4912, "user_id": 1953533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Vs4v8.jpg?s=128&g=1", "display_name": "CroCo", "link": "https://stackoverflow.com/users/1953533/croco"}, "edited": false, "score": 0, "creation_date": 1508966426, "post_id": 46941927, "comment_id": 80831861, "body": "In your code where you&#39;re writing the results to data. Here you seem to be trying to compute Cx. (Going by the naming convention in the equations describing how the system can be modelled) Instead you&#39;re doing element-wise multiplication of C and x."}, {"owner": {"reputation": 4912, "user_id": 1953533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Vs4v8.jpg?s=128&g=1", "display_name": "CroCo", "link": "https://stackoverflow.com/users/1953533/croco"}, "edited": false, "score": 0, "creation_date": 1508966594, "post_id": 46941927, "comment_id": 80831935, "body": "Oh man. What a careless mistake. Thank you. this is correct. now I can sleep."}], "tags": [], "owner": {"reputation": 3216, "user_id": 327071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/804fa6ec98664af629d6dd90288eb95b?s=128&d=identicon&r=PG", "display_name": "Jacob", "link": "https://stackoverflow.com/users/327071/jacob"}, "is_accepted": true, "score": 2, "last_activity_date": 1508965051, "creation_date": 1508965051, "answer_id": 46941927, "question_id": 46941402, "link": "https://stackoverflow.com/questions/46941402/cant-get-same-results-matlab-generates/46941927#46941927", "title": "can&#39;t get same results Matlab generates", "body": "<p>Look at the expression you have for y. When you multiply a 1x3 matrix with a 3x1 matrix, the result should be a 1x1 matrix, where the value of the single element is the dot product of the two matrices. What you're currently doing is element-wise multiplication when you write to <code>data</code> instead of calculating the dot product.</p>\n"}], "owner": {"reputation": 4912, "user_id": 1953533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Vs4v8.jpg?s=128&g=1", "display_name": "CroCo", "link": "https://stackoverflow.com/users/1953533/croco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 46941927, "answer_count": 1, "score": 1, "last_activity_date": 1508965051, "creation_date": 1508962868, "question_id": 46941402, "link": "https://stackoverflow.com/questions/46941402/cant-get-same-results-matlab-generates", "title": "can&#39;t get same results Matlab generates", "body": "<p>Take a look at the following transfer function:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1e9Pd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1e9Pd.png\" alt=\"enter image description here\"></a></p>\n\n<p>With Matlab Simulink: </p>\n\n<p><a href=\"https://i.stack.imgur.com/bI6Ym.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bI6Ym.png\" alt=\"enter image description here\"></a></p>\n\n<p>The result is </p>\n\n<p><a href=\"https://i.stack.imgur.com/9ssz2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9ssz2.png\" alt=\"enter image description here\"></a></p>\n\n<p>In State-space representation, the system can be modeled as follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0l8z8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0l8z8.png\" alt=\"enter image description here\"></a></p>\n\n<p>In Matlab, we can model the system in the state-space representation:</p>\n\n<p><a href=\"https://i.stack.imgur.com/HFX3o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HFX3o.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/QPnUT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QPnUT.png\" alt=\"enter image description here\"></a></p>\n\n<p>which yields the following plot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Qb5zY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Qb5zY.png\" alt=\"enter image description here\"></a></p>\n\n<p>which is exactly the result generated by using transfer function. I'm trying to generate same results with odeint but failed. This is the code </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Eigen/Dense&gt;\n#include &lt;boost/numeric/odeint.hpp&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\n\n\nusing namespace std;\nusing namespace boost::numeric::odeint;\n\ntypedef std::vector&lt; double &gt; state_type;\n\nvoid equations(const state_type &amp;y, state_type &amp;dy, double x)\n{\n    Eigen::MatrixXd A(3, 3), B(3,1);\n\n    /*\n        x = y[0]\n       dx = y[1] = dy[0]\n      ddx = y[2] = dy[1]\n     dddx =        dy[2]\n\n    */\n    const double r(1);\n\n    A &lt;&lt;   0,   1,  0,\n           0,   0,  1,\n         -24, -26, -9;\n\n    B &lt;&lt; 0, 0, 1;      \n    //#####################( ODE Equations )################################\n    Eigen::MatrixXd X(3, 1), dX(3,1);\n    X &lt;&lt; y[0], y[1], y[2];\n    dX = A*X + B*r;\n\n    dy[0] = dX(0,0);\n    dy[1] = dX(1,0);\n    dy[2] = dX(2,0);\n}\n\n\nint main(int argc, char **argv)\n{\n    const double dt = 0.01;\n    runge_kutta_dopri5 &lt; state_type &gt; stepper;\n\n    state_type y(3); \n    // initial values\n    y[0] = 0.0; //  x1 \n    y[1] = 0.0; //  x2\n    y[2] = 0.0; //  x3\n\n    ofstream data(\"file.txt\");\n\n    for (double t(0.0); t &lt;= 5.0; t += dt){\n        data &lt;&lt; t &lt;&lt; \" \" &lt;&lt; 2*y[0] &lt;&lt; \" \" &lt;&lt; 7*y[1] &lt;&lt; \" \" &lt;&lt; 1*y[2] &lt;&lt; std::endl;\n        stepper.do_step(equations, y, t, dt);\n    }\n\n    return 0;\n\n}\n</code></pre>\n\n<p>And this is the result for all state vector</p>\n\n<p><a href=\"https://i.stack.imgur.com/OOJgh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OOJgh.png\" alt=\"enter image description here\"></a></p>\n\n<p>None of the preceding variables match the results generated by Matlab. Any suggestions to fix this code?</p>\n"}, {"tags": ["c++", "opencv", "labview", "camera-calibration"], "comments": [{"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1509022598, "post_id": 46941270, "comment_id": 80856916, "body": "I don&#39;t see the relationship between VS and Labview?"}, {"owner": {"reputation": 276, "user_id": 6945150, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/17893f2075ab76f7b027e331728cd2ed?s=128&d=identicon&r=PG&f=1", "display_name": "jok23", "link": "https://stackoverflow.com/users/6945150/jok23"}, "reply_to_user": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1509024726, "post_id": 46941270, "comment_id": 80858642, "body": "Ja_cpp, what do You mean by that. I want to use perspective camera calibration dll to fix issues that are apearing in one of LV programs. So for that I need dll for camera to self calibrate. This is not the rule that VS has to be used..."}, {"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1509027264, "post_id": 46941270, "comment_id": 80860626, "body": "I believe that you need to develop that yourself to take snaps from the camera and when it is done then the program of calibration get launched automatically to read the images and calibration the camera, that&#39;s all the steps. The link you shared is only for calibration manually, you need to prepare the photos yourself and launch the program..etc"}], "owner": {"reputation": 276, "user_id": 6945150, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/17893f2075ab76f7b027e331728cd2ed?s=128&d=identicon&r=PG&f=1", "display_name": "jok23", "link": "https://stackoverflow.com/users/6945150/jok23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508962350, "creation_date": 1508962350, "question_id": 46941270, "link": "https://stackoverflow.com/questions/46941270/how-to-create-camera-calibration-opencv-dll-for-labview", "title": "How to create camera calibration opencv dll for Labview", "body": "<p>How can I create camera calibration dll for Labview? I'm using Visual Studio. I want to perform calibration that is explaned here:\n<a href=\"https://docs.opencv.org/2.4/doc/tutorials/calib3d/camera_calibration/camera_calibration.html\" rel=\"nofollow noreferrer\">https://docs.opencv.org/2.4/doc/tutorials/calib3d/camera_calibration/camera_calibration.html</a><a href=\"https://docs.opencv.org/2.4/doc/tutorials/calib3d/camera_calibration/camera_calibration.html\" rel=\"nofollow noreferrer\">cameraCalibrationOpenCV</a>\nSoo when dll will be caled from Labview it will take imput image for calibration and calibrate itself and return calibrated image.</p>\n\n<p>Problem discovered so far:\n1. My Labview is 32-bit, OpenCV is 64-bit. \n2. Don't know much about camera calibration and how to use reference link, so need help here. </p>\n"}, {"tags": ["c++", "eigen"], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 6317189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32100da0dae880a572156abe2640cf24?s=128&d=identicon&r=PG&f=1", "display_name": "Jean Mercat", "link": "https://stackoverflow.com/users/6317189/jean-mercat"}, "edited": false, "score": 0, "creation_date": 1509652175, "post_id": 46941450, "comment_id": 81116245, "body": "Thank you for your answer, I never thought of explicitly telling Eigen to allow this operation. I&#39;m not sure what you mean by &quot;abusing Eigen&#39;s features&quot; though. Using unary and binary Expr seems to be the most explicit way to do what I want.  To me it looks a lot better than raw loops because I do not have to think about access order and I can give an explicit name to the functor.  I don&#39;t know why but it seems to be more efficient than the raw loops too."}], "tags": [], "owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": true, "score": 2, "last_activity_date": 1508963050, "creation_date": 1508963050, "answer_id": 46941450, "question_id": 46940914, "link": "https://stackoverflow.com/questions/46940914/eigen-binaryexpr-with-eigen-type-output/46941450#46941450", "title": "Eigen binaryExpr with eigen type output", "body": "<p>Adding:</p>\n\n<pre><code>namespace Eigen {\ntemplate&lt;&gt;\nstruct ScalarBinaryOpTraits&lt;Matrix&lt;float,9,1&gt;,float,myBinaryFunctor&gt; {\n  typedef Vector2f ReturnType;\n};\n}\n</code></pre>\n\n<p>will do the job. This is because implicit scalar conversion are explicitly disallowed within Eigen, so you must explicit say that two different scalar types are compatible. For instance adding a <code>VectorXd</code> to a <code>VectorXf</code> is disallowed.</p>\n\n<p>Nonetheless, it seems to me that your abusing Eigen's features here.</p>\n"}], "owner": {"reputation": 88, "user_id": 6317189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32100da0dae880a572156abe2640cf24?s=128&d=identicon&r=PG&f=1", "display_name": "Jean Mercat", "link": "https://stackoverflow.com/users/6317189/jean-mercat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 777, "favorite_count": 1, "accepted_answer_id": 46941450, "answer_count": 1, "score": 2, "last_activity_date": 1508963050, "creation_date": 1508960799, "last_edit_date": 1508960826, "question_id": 46940914, "link": "https://stackoverflow.com/questions/46940914/eigen-binaryexpr-with-eigen-type-output", "title": "Eigen binaryExpr with eigen type output", "body": "<p>I'm having a problem while trying to use binaryExpr. It is the first use I'm making of it so I have been following the <a href=\"http://eigen.tuxfamily.org/dox/classEigen_1_1MatrixBase.html#a1bf966395d085b345d952e3ee839236b\" rel=\"nofollow noreferrer\">Eigen documentation</a> </p>\n\n<p>For my use I need a functor with Eigen type inputs and outputs but this does not want to compile and I do not understand why. I've looked up the explanation in the code but I didn't think this would apply here because I use floats and an array of floats</p>\n\n<pre><code>// We require Lhs and Rhs to have \"compatible\" scalar types.\n// It is tempting to always allow mixing different types but remember that this is often impossible in the vectorized paths.\n// So allowing mixing different types gives very unexpected errors when enabling vectorization, when the user tries to\n// add together a float matrix and a double matrix.\n</code></pre>\n\n<p>Here is a short example of the use I would need that gets me the same compilation error:</p>\n\n<pre><code>#include &lt;eigen3/Eigen/Dense&gt;\n\nusing namespace std;\nusing namespace Eigen;\n\nstruct myBinaryFunctor {\n  EIGEN_EMPTY_STRUCT_CTOR(myBinaryFunctor)\n  typedef Vector2f result_type;\n  Vector2f operator()(const Matrix&lt;float,9,1&gt;&amp; a,const float&amp; f) const\n  {\n      float x = a.head(4).sum()*f;\n      float y = a.tail(5).sum()/f;\n      return Vector2f(x,y);\n  }\n};\n\nint main()\n{\n    constexpr int n = 3;\n    Matrix&lt;Matrix&lt;float,9,1&gt;,n,n&gt; Ma;\n    Matrix&lt;float,n,n&gt; F;\n    Matrix&lt;Vector2f,n,n&gt; R;\n\n    for(size_t i = 0, sizeMa = Ma.size(); i&lt;sizeMa; i++)\n    {\n        Ma(i).setOnes();\n    }\n\n    F.setConstant(n,n,2);\n\n    R = Ma.binaryExpr(F,myBinaryFunctor());\n\n    return 0;\n}\n</code></pre>\n\n<p>The compilation output is :</p>\n\n<pre><code>/usr/local/include/eigen3/Eigen/src/Core/CwiseBinaryOp.h:107: erreur : static assertion failed: YOU_MIXED_DIFFERENT_NUMERIC_TYPES__YOU_NEED_TO_USE_THE_CAST_METHOD_OF_MATRIXBASE_TO_CAST_NUMERIC_TYPES_EXPLICITLY\n       EIGEN_CHECK_BINARY_COMPATIBILIY(BinaryOp,typename Lhs::Scalar,typename Rhs::Scalar);\n       ^\n</code></pre>\n\n<p>If you have a solution that could make this work this would be a huge help for me :) If not I would still enjoy an explanation to understand what is happening. Thanks a lot.</p>\n"}, {"tags": ["c++", "mysql", "eclipse"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 1, "creation_date": 1508960945, "post_id": 46940898, "comment_id": 80829075, "body": "Impossible to tell from the tiny snippet you posted. Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508961353, "post_id": 46940898, "comment_id": 80829297, "body": "Your design is strange -- you have the <code>DBManager</code> constructor catching the exception instead of throwing the exception back to the client.  Your <code>DBManager</code> object is thus not initialized properly, but still available to the user."}, {"owner": {"reputation": 1448, "user_id": 4509338, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/UdgWd.jpg?s=128&g=1", "display_name": "mkkekkonen", "link": "https://stackoverflow.com/users/4509338/mkkekkonen"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1508961520, "post_id": 46940898, "comment_id": 80829378, "body": "@RustyX Ok, I&#39;ll post more information."}, {"owner": {"reputation": 1448, "user_id": 4509338, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/UdgWd.jpg?s=128&g=1", "display_name": "mkkekkonen", "link": "https://stackoverflow.com/users/4509338/mkkekkonen"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508961559, "post_id": 46940898, "comment_id": 80829401, "body": "@PaulMcKenzie That&#39;s a good point. I might have to rethink the design."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508962644, "post_id": 46940898, "comment_id": 80829950, "body": "@mkkekkonen <code>catch(SQLException ex) </code> -- Too much C# programming in your blood?  In C++, catch exceptions by reference or const reference, not by value.  That should be <code>catch(const SQLException&amp; ex)</code>.  <a href=\"https://stackoverflow.com/questions/2522299/c-catch-blocks-catch-exception-by-value-or-reference\">See this</a>"}, {"owner": {"reputation": 1448, "user_id": 4509338, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/UdgWd.jpg?s=128&g=1", "display_name": "mkkekkonen", "link": "https://stackoverflow.com/users/4509338/mkkekkonen"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508963069, "post_id": 46940898, "comment_id": 80830158, "body": "@PaulMcKenzie Thanks for the info, edited, though it had no effect on the output."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508963295, "post_id": 46940898, "comment_id": 80830261, "body": "@mkkekkonen Instead of just <code>catch(const SQLException&amp;)</code>, add a <code>catch(...)</code> to see if any exception is actually being thrown."}, {"owner": {"reputation": 1448, "user_id": 4509338, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/UdgWd.jpg?s=128&g=1", "display_name": "mkkekkonen", "link": "https://stackoverflow.com/users/4509338/mkkekkonen"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508963648, "post_id": 46940898, "comment_id": 80830420, "body": "@PaulMcKenzie No exception seems to be thrown even with the ellipsis <code>(...)</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508970526, "post_id": 46940898, "comment_id": 80833438, "body": "@mkkekkonen So maybe there is nothing wrong.  I would recommend first making sure you know how to use the API as-is before you start making class wrappers.  If you can&#39;t get a simple program to work, wrapping non-working code in a class with destructors, exception handling, etc. just adds more complexity."}], "answers": [{"tags": [], "owner": {"reputation": 1448, "user_id": 4509338, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/UdgWd.jpg?s=128&g=1", "display_name": "mkkekkonen", "link": "https://stackoverflow.com/users/4509338/mkkekkonen"}, "is_accepted": true, "score": 0, "last_activity_date": 1509026742, "creation_date": 1509026742, "answer_id": 46956508, "question_id": 46940898, "link": "https://stackoverflow.com/questions/46940898/mysql-c-connector-fails-without-an-error-message/46956508#46956508", "title": "MySQL C++ connector fails without an error message", "body": "<p>I finally got it to work, I was using the generic Linux binaries first, which did not work. When I switched to using the binaries for Ubuntu, the program started to work.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ziH9z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ziH9z.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1448, "user_id": 4509338, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/UdgWd.jpg?s=128&g=1", "display_name": "mkkekkonen", "link": "https://stackoverflow.com/users/4509338/mkkekkonen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 46956508, "answer_count": 1, "score": 0, "last_activity_date": 1509033010, "creation_date": 1508960728, "last_edit_date": 1509033010, "question_id": 46940898, "link": "https://stackoverflow.com/questions/46940898/mysql-c-connector-fails-without-an-error-message", "title": "MySQL C++ connector fails without an error message", "body": "<p>I'm having trouble with the simple task of creating a connection to a MySQL database in C++. No errors are printed except for the program return value, which is -1.</p>\n\n<p>I'm using Eclipse Oxygen as the IDE, and the OS is Ubuntu 16.04. The MySQL connector version is 1.1.9., and it's the generic Linux version (glibc 2.12). </p>\n\n<p>The connector files reside in my home folder. I've added the directory path of the \"include\" folder to Properties -> C/C++ Build -> Settings -> GCC C++ Compiler -> Includes. I've also added the \"lib\" path and \"mysqlcppconn\" library name to Properties -> C/C++ Build -> Settings -> GCC C++ Linker -> Libraries and Library search path, respectively. Finally, I've added the \"lib\" path into the LD_LIBRARY_PATH environment variable in Properties -> Run/Debug Settings -> (Launch configuration) -> Environment.</p>\n\n<p>DBManager.cpp:</p>\n\n<pre><code>DBManager::DBManager() {\n    try {\n        std::cout &lt;&lt; \"Getting driver instance\" &lt;&lt; std:endl;\n        driver = sql::mysql::get_mysql_driver_instance();\n        std::cout &lt;&lt; \"Creating connection\" &lt;&lt; std::endl;\n        connection = driver-&gt;connect(\"tcp://127.0.0.1:3306\", \"username\", \"password\");\n        std::cout &lt;&lt; \"Connected!\" &lt;&lt; std::endl; // NOT REACHING THIS LINE\n    } catch(const SQLException&amp; ex) {\n        // these lines are not printed\n        std::cout &lt;&lt; \"Exception!\" &lt;&lt; std::endl;\n        std::cout &lt;&lt; ex.what() &lt;&lt; std::endl;\n        exit(1);\n    }\n}\n\nDBManager::~DBManager() {\n    std::cout &lt;&lt; \"Deleting connection\" &lt;&lt; std::endl;\n    delete connection;\n}\n</code></pre>\n\n<p>DBManager.h</p>\n\n<pre><code>#ifndef DBMANAGER_H_\n#define DBMANAGER_H_\n\n#include &lt;iostream&gt;\n#include &lt;mysql_connection.h&gt;\n#include &lt;mysql_driver.h&gt;\n#include &lt;cppconn/exception.h&gt;\n\nclass DBManager {\npublic: \n    DBManager();\n    virtual ~DBManager();\nprivate:\n    sql::mysql::MySQL_Driver* driver;\n    sql::Connection* connection;\n};\n\n#endif\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"DBManager.h\"\n\nint main(int argc, char* argv[]) {    \n\n    std::cout &lt;&lt; \"Starting\" &lt;&lt; std::endl;\n\n    DBManager* dbManager = new DBManager();\n    // ... program logic not reached\n    delete dbManager; // not reached\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "compiler-errors", "mpi"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1508963188, "post_id": 46940822, "comment_id": 80830225, "body": "Where did you get <code>MPI_CXX_LIBRARIES_PATH</code> from? Shouldn&#39;t it be <code>${MPI_LIBRARIES}</code> instead?"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1508971040, "post_id": 46940822, "comment_id": 80833610, "body": "actually <code>MPI_CXX_LIBRARIES</code>."}, {"owner": {"reputation": 1, "user_id": 8833681, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KQ2Vyd7l5v4/AAAAAAAAAAI/AAAAAAAAABQ/xt8M07LKLJk/photo.jpg?sz=128", "display_name": "jose santiago rodriguez", "link": "https://stackoverflow.com/users/8833681/jose-santiago-rodriguez"}, "edited": false, "score": 0, "creation_date": 1508989735, "post_id": 46940822, "comment_id": 80838250, "body": "Thanks I found the problem. First I had the wrong name for the library variable. Second I have more than one mpi installation in my machine. After setting properly the environment variables I got the library to compile and link.  CMAKE_INCLUDE_PATH, CMAKE_LIBRARY_PATH"}], "owner": {"reputation": 1, "user_id": 8833681, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KQ2Vyd7l5v4/AAAAAAAAAAI/AAAAAAAAABQ/xt8M07LKLJk/photo.jpg?sz=128", "display_name": "jose santiago rodriguez", "link": "https://stackoverflow.com/users/8833681/jose-santiago-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 391, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508960448, "creation_date": 1508960448, "question_id": 46940822, "link": "https://stackoverflow.com/questions/46940822/error-undefined-symbols-for-architecture-x86-64-when-compiling-a-shared-library", "title": "ERROR: Undefined symbols for architecture x86_64 when compiling a Shared library that uses MPI", "body": "<p>I want to compile a library that uses mpi. I am running into an error when compiling the very simple example presented below:</p>\n\n<pre><code>#ifndef __MPIWRAPPER_HPP__\n#define __MPIWRAPPER_HPP__\n\n#include &lt;ostream&gt;\n#include \"mpi.h\"\n\nclass MPIWrapper\n{\n   public:\n\n   MPIWrapper(MPI_Comm comunicator);\n   void sayhello();\n\n   private:\n\n   int rank_;\n   int n_processes_;\n};\n#endif\n</code></pre>\n\n<p>The source file</p>\n\n<pre><code>#include \"MPIWrapper.hpp\"\n#include \"mpi.h\"\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n\nMPIWrapper::MPIWrapper(MPI_Comm comunicator){\n   MPI_Comm_size(comunicator, &amp;n_processes_);   \n   MPI_Comm_rank(comunicator, &amp;rank_); \n}\n\nvoid MPIWrapper::sayhello(){\n   std::cout &lt;&lt; \"Hello, World! \" &lt;&lt; \"I am process \"&lt;&lt; rank_ &lt;&lt;\" of \"&lt;&lt; \n   n_processes_&lt;&lt;\"\\n\";\n}\n</code></pre>\n\n<p>And the CMakeList.txt</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.2)\nPROJECT( mpi_wrapper )\nset(CMAKE_BUILD_TYPE release)\n\nfind_package(MPI REQUIRED)\n\nADD_LIBRARY( wrapper SHARED MPIWrapper.cpp)\nTARGET_INCLUDE_DIRECTORIES( wrapper PUBLIC \"${MPI_CXX_INCLUDE_PATH}\")\nTARGET_LINK_LIBRARIES( wrapper \"${MPI_CXX_LIBRARIES_PATH}\")\n</code></pre>\n\n<p>When I try to compile the code I get an error with the linker. I wonder if the problem is related to my compiler or if I am missing any property that I need to specify. I am running cmake 3.2 on MAC OS X with gnu compiler 4.9 and mpich-3.2</p>\n\n<p>and the output from make</p>\n\n<pre><code>Scanning dependencies of target wrapper\n[100%] Building CXX object CMakeFiles/wrapper.dir/MPIWrapper.cpp.o\nLinking CXX shared library libwrapper.dylib\nUndefined symbols for architecture x86_64:\n  \"_MPI_Comm_rank\", referenced from:\n      MPIWrapper::MPIWrapper(int) in MPIWrapper.cpp.o\n      MPIWrapper::MPIWrapper(int) in MPIWrapper.cpp.o\n  \"_MPI_Comm_size\", referenced from:\n      MPIWrapper::MPIWrapper(int) in MPIWrapper.cpp.o\n      MPIWrapper::MPIWrapper(int) in MPIWrapper.cpp.o\nld: symbol(s) not found for architecture x86_64\ncollect2: error: ld returned 1 exit status\nmake[2]: *** [libwrapper.dylib] Error 1\nmake[1]: *** [CMakeFiles/wrapper.dir/all] Error 2\nmake: *** [all] Error 2\n</code></pre>\n\n<p>I appreciate any help. \nThanks</p>\n"}, {"tags": ["c++", "c++17", "stdatomic"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1508960057, "post_id": 46940680, "comment_id": 80828585, "body": "You can&#39;t have a <code>std::atomic&lt;SomeCustomClass&gt;</code> where <code>SomeCustomClass</code> isn&#39;t trivially copyable. That&#39;s why you get that error"}, {"owner": {"reputation": 2175, "user_id": 966567, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3b1316baf012590d2d76b8b6f5ce5939?s=128&d=identicon&r=PG", "display_name": "basteln", "link": "https://stackoverflow.com/users/966567/basteln"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1508960210, "post_id": 46940680, "comment_id": 80828655, "body": "I know\u2026but why isn&#39;t that just a substitution failure, causing a fallback to the general template?"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 4, "creation_date": 1508960279, "post_id": 46940680, "comment_id": 80828693, "body": "In the expression <code>std::atomic&lt;T&gt;::is_always_lock_free</code> the instantation of <code>std::atomic&lt;T&gt;</code> fails (for the non-triviably copyable types), and that&#39;s not immediate context, hence the compilation fails. You need to not instantiate <code>std::atomic&lt;T&gt;</code> in that case. SFINAE would have worked here if <code>std::atomic&lt;T&gt;</code> was legal, but <code>std::atomic&lt;T&gt;::is_always_lock_free</code> would not be."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1508960354, "post_id": 46940680, "comment_id": 80828739, "body": "@basteln You also have a problem that <code>std::atomic::is_always_lock_free</code> is only available in C++17 and over..."}, {"owner": {"reputation": 2175, "user_id": 966567, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3b1316baf012590d2d76b8b6f5ce5939?s=128&d=identicon&r=PG", "display_name": "basteln", "link": "https://stackoverflow.com/users/966567/basteln"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1508960431, "post_id": 46940680, "comment_id": 80828786, "body": "@Rakete1111 Right. I would use a #ifdef to check for its availability."}, {"owner": {"reputation": 2175, "user_id": 966567, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3b1316baf012590d2d76b8b6f5ce5939?s=128&d=identicon&r=PG", "display_name": "basteln", "link": "https://stackoverflow.com/users/966567/basteln"}, "edited": false, "score": 0, "creation_date": 1508960455, "post_id": 46940680, "comment_id": 80828807, "body": "So how do I get the desired result?"}], "answers": [{"tags": [], "owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "is_accepted": false, "score": 1, "last_activity_date": 1508961056, "creation_date": 1508961056, "answer_id": 46940978, "question_id": 46940680, "link": "https://stackoverflow.com/questions/46940680/how-to-use-stdatomictis-always-lock-free-for-sfinae/46940978#46940978", "title": "How to use std::atomic&lt;T&gt;::is_always_lock_free for SFINAE?", "body": "<p>In the expression <code>std::atomic&lt;T&gt;::is_always_lock_free</code> the instantation of <code>std::atomic&lt;T&gt;</code> fails (for the non-triviably copyable types), and that's not immediate context, hence the compilation fails. You need to not instantiate <code>std::atomic&lt;T&gt;</code> in that case. SFINAE would have worked here if <code>std::atomic&lt;T&gt;</code> was legal, but <code>std::atomic&lt;T&gt;::is_always_lock_free</code> would not be.</p>\n\n<blockquote>\n  <p>So how do I get the desired result? </p>\n</blockquote>\n\n<p>With a custom trait:</p>\n\n<pre><code>#include &lt;atomic&gt;\n#include &lt;array&gt;\n#include &lt;iostream&gt;\n\nclass SomeClass { SomeClass&amp; operator=(const SomeClass&amp;) { return *this; } };\n\ntemplate&lt;typename... T&gt;\nstruct make_void { typedef void type; };\n\ntemplate&lt;typename... T&gt;\nusing void_t = typename make_void&lt;T...&gt;::type;\n\ntemplate&lt;typename T, typename = void&gt;\nstruct IsAlwaysLockFree\n{\n    static constexpr bool value = false;\n};\n\ntemplate&lt;typename T&gt;\nstruct IsAlwaysLockFree&lt;T, void_t&lt;typename std::enable_if&lt;!std::is_trivially_copyable&lt;T&gt;::value&gt;::type&gt;&gt;\n{\n    static constexpr bool value = false;\n};\n\ntemplate&lt;typename T&gt;\nstruct IsAlwaysLockFree&lt;T, void_t&lt;typename std::enable_if&lt;std::is_trivially_copyable&lt;T&gt;::value&gt;::type&gt;&gt;\n{\n    static constexpr bool value = std::atomic&lt;T&gt;::is_always_lock_free;\n};\n\ntemplate&lt;typename T, typename Enable = void&gt;\nclass MyClass {\n// Fallback implementation\npublic:\n    MyClass(){ std::cout &lt;&lt; \"Fallback\\n\"; }\n};\n\ntemplate&lt;typename T&gt;\nclass MyClass&lt;T, typename std::enable_if&lt;IsAlwaysLockFree&lt;T&gt;::value&gt;::type&gt; {\n// Optimized implementation using std::atomic\npublic:\n    MyClass(){ std::cout &lt;&lt; \"Optimized\\n\"; }\n};\n\nint main()\n{\n    MyClass&lt;SomeClass&gt; a;\n    MyClass&lt;std::array&lt;int, 1024&gt;&gt; b;\n    MyClass&lt;int&gt; c;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/4af0411b2a4f3302\" rel=\"nofollow noreferrer\">Live on Coliru</a></p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 8, "last_activity_date": 1508961207, "creation_date": 1508961207, "answer_id": 46941011, "question_id": 46940680, "link": "https://stackoverflow.com/questions/46940680/how-to-use-stdatomictis-always-lock-free-for-sfinae/46941011#46941011", "title": "How to use std::atomic&lt;T&gt;::is_always_lock_free for SFINAE?", "body": "<p>You need to delay checking <code>std::atomic&lt;T&gt;::is_always_lock_free</code> until <em>after</em> you know that <code>T</code> is trivially copyable. Otherwise, <code>atomic&lt;T&gt;</code> is ill-formed.</p>\n\n<p>For that, there's <a href=\"http://en.cppreference.com/w/cpp/types/conjunction\" rel=\"noreferrer\"><code>std::conjunction</code></a> - which is lazy / short-circuits:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct is_lock_free_impl\n: std::integral_constant&lt;bool, std::atomic&lt;T&gt;::is_always_lock_free&gt; { };\n\ntemplate &lt;typename T&gt;\nusing is_lock_free = std::conjunction&lt;\n    std::is_trivially_copyable&lt;T&gt;,\n    is_lock_free_impl&lt;T&gt;&gt;;\n</code></pre>\n\n<p>Now, this trait will abort early and yield <code>false_type</code> if <code>T</code> isn't trivially copyable. And if it <em>is</em> trivially copyable, then it's valid to instantiate <code>atomic&lt;T&gt;</code>, so then we check that trait. </p>\n"}], "owner": {"reputation": 2175, "user_id": 966567, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3b1316baf012590d2d76b8b6f5ce5939?s=128&d=identicon&r=PG", "display_name": "basteln", "link": "https://stackoverflow.com/users/966567/basteln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "accepted_answer_id": 46941011, "answer_count": 2, "score": 2, "last_activity_date": 1508961207, "creation_date": 1508959884, "last_edit_date": 1508960683, "question_id": 46940680, "link": "https://stackoverflow.com/questions/46940680/how-to-use-stdatomictis-always-lock-free-for-sfinae", "title": "How to use std::atomic&lt;T&gt;::is_always_lock_free for SFINAE?", "body": "<p>How can I use <code>std::atomic&lt;T&gt;::is_always_lock_free</code> with SFINAE? I have a class template <code>MyClass&lt;T&gt;</code> and I would like to switch between 2 implementations, depending on whether <code>std::atomic&lt;T&gt;::is_always_lock_free</code> is <code>true</code>. This is what I have:</p>\n\n<pre><code>template&lt;typename T, typename Enable = void&gt;\nclass MyClass {\n// Fallback implementation\n};\n\ntemplate&lt;typename T&gt;\nclass MyClass&lt;T, typename std::enable_if&lt;std::atomic&lt;T&gt;::is_always_lock_free&gt;::type&gt; {\n// Optimized implementation using std::atomic\n};\n</code></pre>\n\n<p>Now, when I try to create an instance of <code>MyClass&lt;SomeCustomClass&gt;</code>, I get a compiler error:</p>\n\n<blockquote>\n  <p>_Atomic cannot be applied to type 'SomeCustomClass' which is not trivially copyable</p>\n</blockquote>\n\n<p>It tries to use the template specialization, but instead of using the fallback implementation, it doesn't compile at all. Could someone kindly explain what's wrong here? And how do I get the desired result?</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 4, "creation_date": 1508959462, "post_id": 46940532, "comment_id": 80828289, "body": "Because they related to diferents things. p is the content of the variable, while &amp;p is the address of this variable"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1508959489, "post_id": 46940532, "comment_id": 80828306, "body": "Why would it be the same?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1508961002, "post_id": 46940532, "comment_id": 80829118, "body": "There is nothing special about pointers. It follows the same rules as if you wrote <code>int p;</code>."}], "owner": {"reputation": 99, "user_id": 8802865, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a534b2b0e209d5117eaaec516029870a?s=128&d=identicon&r=PG&f=1", "display_name": "H. M. MOHIDUL ISLAM SHOVON", "link": "https://stackoverflow.com/users/8802865/h-m-mohidul-islam-shovon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "closed_date": 1508959472, "answer_count": 0, "score": 0, "last_activity_date": 1508959550, "creation_date": 1508959341, "question_id": 46940532, "link": "https://stackoverflow.com/questions/46940532/why-output-of-p-and-p-is-not-same-for-int-p-in-c", "closed_reason": "Duplicate", "title": "Why output of &#39;p&#39; and &#39;&amp;p&#39; is not same for &#39;int* p&#39; in c++;?", "body": "<p>Here <code>p</code> is <code>int</code> type of pointer variable.In my code as per I understand output will be same for two line.But it doesn't.So I want to konw why it doesn.t?</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main(){\n\n    int* p;\n\n    cout&lt;&lt;p&lt;&lt;endl; //0x41c2de\n    cout&lt;&lt;&amp;p&lt;&lt;endl;  //0x28ff0c\n}\n</code></pre>\n\n<p><strong>Question: Why output of two line is not same??</strong></p>\n"}, {"tags": ["c++", "data-structures"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1508959164, "post_id": 46940387, "comment_id": 80828120, "body": "<code>reSize</code> is broken. <code>for(int i =0; i&lt;maxSize; i++)</code> shadows parameter <code>i</code>. Doesn&#39;t look like you ever increase <code>maxsize</code>"}, {"owner": {"reputation": 11, "user_id": 3791091, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/43f1d0cc118d47875a42a828a2230a11?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Ciam", "link": "https://stackoverflow.com/users/3791091/fernando-ciam"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1508959251, "post_id": 46940387, "comment_id": 80828160, "body": "I dont quite get it, mind to expand you answer a bit??"}, {"owner": {"reputation": 2659, "user_id": 2026276, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/8wAi8.jpg?s=128&g=1", "display_name": "Bauss", "link": "https://stackoverflow.com/users/2026276/bauss"}, "edited": false, "score": 1, "creation_date": 1508959305, "post_id": 46940387, "comment_id": 80828195, "body": "You pass <code>i</code> as parameter, but then you declare a new <code>i</code> in the loop. <b>void Vector::reSize(<code>int i</code>){ ... for(<code>int i =0</code>; i&lt;maxSize; i++)</b>"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1508959329, "post_id": 46940387, "comment_id": 80828201, "body": "@FernandoCiam try to run it on a debugger and see how those variables change they values"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1508959796, "post_id": 46940387, "comment_id": 80828468, "body": "You are invoking undefined behavior. Possibly in more locations."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508960459, "post_id": 46940387, "comment_id": 80828811, "body": "Can&#39;t you just search for it? We can&#39;t explain UB on every thread people post about it, or we&#39;d never get anything useful done."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1508960595, "post_id": 46940387, "comment_id": 80828888, "body": "@FernandoCiam Updated answer and added a link to a definition of undefined behaviour."}], "answers": [{"comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1508960636, "post_id": 46940582, "comment_id": 80828913, "body": "Well explained. Isn&#39;t accessing deleted pointer also UB? Not that code reaches that point anyway."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1508960693, "post_id": 46940582, "comment_id": 80828938, "body": "@Ron Would be. Not seeing that happen though."}, {"owner": {"reputation": 11, "user_id": 3791091, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/43f1d0cc118d47875a42a828a2230a11?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Ciam", "link": "https://stackoverflow.com/users/3791091/fernando-ciam"}, "edited": false, "score": 0, "creation_date": 1508960887, "post_id": 46940582, "comment_id": 80829047, "body": "Thank you so much, i\u2019ll look further on the UB later. I didnt notice the shadow parameter because the name of variable obviously a mistake."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 1, "last_activity_date": 1508960896, "last_edit_date": 1508960896, "creation_date": 1508959528, "answer_id": 46940582, "question_id": 46940387, "link": "https://stackoverflow.com/questions/46940387/console-crash-at-the-endloop-not-out-of-bound-error/46940582#46940582", "title": "Console Crash At the end(Loop) Not Out of Bound Error", "body": "<p>In </p>\n\n<pre><code>void Vector::add(long i){\n    if(position==maxSize-1)\n        reSize(maxSize * 2);\n\n    anArray[position] = i;\n    position++;\n}\n</code></pre>\n\n<p>when <code>position==maxSize-1</code>, reSize is called to double the size of the array. Unfortunately, <code>reSize</code> is broken.</p>\n\n<pre><code>void Vector::reSize(int i){\n    long *temp = new long[maxSize];\n    for(int i =0; i&lt;maxSize; i++)\n    {\n        temp[i] = anArray[i];\n    }\n    delete[] anArray;\n    anArray = temp;\n}\n</code></pre>\n\n<p>The parameter <code>i</code> is never used. This should be the new size of the <code>Vector</code>, but instead the new array is allocated with the same <code>maxSize</code> as the previous array. <code>maxSize</code> goes unchanged. </p>\n\n<p>Back in <code>add</code>, data is stored at <code>position</code> and <code>position</code> is increased by one. This means on the next <code>add</code> <code>position</code> is equal to <code>maxSize</code>, so the check to prevent overrunning the array,</p>\n\n<pre><code>if(position==maxSize-1)\n</code></pre>\n\n<p>will not do what you want and the program writes outside the bounds of the array. From there, <code>position</code> keeps getting larger, will never be equal to <code>maxSize</code> minus one, and writes even further out of bounds, not that it matters at that point. <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined Behaviour has already been invoked</a>, and Crom only knows what will happen. Maybe the program crashes, maybe the program crashes later, maybe it does something bizarre, and maybe it even chugs on looking like everything is working just fine. </p>\n\n<p>You want something more along the lines of </p>\n\n<pre><code>void Vector::reSize(int newSize){ // note more descriptive name\n    long *temp = new long[newSize]; // using new size, not old size\n    for(int i =0; i&lt;maxSize; i++)\n    {\n        temp[i] = anArray[i];\n    }\n    delete[] anArray;\n    anArray = temp;\n    maxSize = newSize; // store new size.\n}\n</code></pre>\n\n<p><code>Vector</code> also needs a destructor to clean up <code>anArray</code>, but in order to properly fix this error, here's a bit of recommended reading: <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is The Rule of Three?</a></p>\n"}], "owner": {"reputation": 11, "user_id": 3791091, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/43f1d0cc118d47875a42a828a2230a11?s=128&d=identicon&r=PG&f=1", "display_name": "Fernando Ciam", "link": "https://stackoverflow.com/users/3791091/fernando-ciam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 46940582, "answer_count": 1, "score": 0, "last_activity_date": 1508963391, "creation_date": 1508958839, "last_edit_date": 1508963391, "question_id": 46940387, "link": "https://stackoverflow.com/questions/46940387/console-crash-at-the-endloop-not-out-of-bound-error", "title": "Console Crash At the end(Loop) Not Out of Bound Error", "body": "<p>Hi i was creating a simple Vector Class for my studies. \nJust to store Variable <strong>LONG</strong>\ni kept everything simple. When i build nothing was return error/ warning. \nThen after run the program, it works but the program crash. </p>\n\n<p>Code Vector.h</p>\n\n<pre><code>class Vector{\npublic:\n    Vector();\n    void add(long i);\n    void getData();\nprivate:\n    long *anArray;\n    long maxSize;\n    long position;\n    void reSize(int i);\n</code></pre>\n\n<p>};</p>\n\n<p>Vector.cpp</p>\n\n<pre><code>    Vector::Vector(){\n    maxSize = 2;\n    anArray = new long[maxSize];\n    position = 0;\n}\n\nvoid Vector::add(long i){\n    if(position==maxSize-1)\n        reSize(maxSize * 2);\n\n    anArray[position] = i;\n    position++;\n}\n\nvoid Vector::reSize(int i){\n    long *temp = new long[maxSize];\n    for(int i =0; i&lt;maxSize; i++)\n    {\n        temp[i] = anArray[i];\n    }\n    delete[] anArray;\n    anArray = temp;\n}\n\nvoid Vector::getData(){\n\n    for(int i = 0; i&lt;position; i++)\n    {\n        cout &lt;&lt; \"Element\" &lt;&lt; i+1 &lt;&lt; \" : \" &lt;&lt; anArray[i] &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>Main</p>\n\n<pre><code>    int main()\n{\n    Vector vecStore;\n\n\n\n    for(int i = 0; i &lt;  1000; i++)\n    {\n        long a;\n        vecStore.add(a = i + 1);\n    }\n\n     cout &lt;&lt; \"GET DATA _________ :: \" &lt;&lt; endl;\n    vecStore.getData();\n    return 0;\n}\n</code></pre>\n\n<p>The program wouldn't crash if the input data small(e.g. 10-20)\nbut when i change it to 100 or even bigger. the program sometime crash and sometime its not. </p>\n\n<p>Did i make a mistake? </p>\n"}, {"tags": ["c++", "c++11", "makefile"], "comments": [{"owner": {"reputation": 61, "user_id": 7537272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sTNBD.gif?s=128&g=1", "display_name": "Riemann-bitcoin.", "link": "https://stackoverflow.com/users/7537272/riemann-bitcoin"}, "reply_to_user": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1508958942, "post_id": 46940324, "comment_id": 80827983, "body": "I have my out put posted now"}, {"owner": {"reputation": 61, "user_id": 7537272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sTNBD.gif?s=128&g=1", "display_name": "Riemann-bitcoin.", "link": "https://stackoverflow.com/users/7537272/riemann-bitcoin"}, "reply_to_user": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1508959154, "post_id": 46940324, "comment_id": 80828111, "body": "I am coding on a linux machine if that makes any difference but I don&#39;t see how it can."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1508959561, "post_id": 46940324, "comment_id": 80828338, "body": "Are you sure you are running the makefile that you posted and not some different makefile?"}, {"owner": {"reputation": 61, "user_id": 7537272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sTNBD.gif?s=128&g=1", "display_name": "Riemann-bitcoin.", "link": "https://stackoverflow.com/users/7537272/riemann-bitcoin"}, "edited": false, "score": 0, "creation_date": 1508959757, "post_id": 46940324, "comment_id": 80828451, "body": "I just named the files generic things"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1508959840, "post_id": 46940324, "comment_id": 80828492, "body": "What does <code>ls</code> output?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1508960149, "post_id": 46940324, "comment_id": 80828629, "body": "Can you post the output of <code>xxd makefile</code>?"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1508961172, "post_id": 46940324, "comment_id": 80829201, "body": "Nice to get infos peace by peace... and also nice, that people downvote answers which should help, based on outdated infos from OP. So I am off, find your problems self... sorry, so I could not work together!"}, {"owner": {"reputation": 61, "user_id": 7537272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sTNBD.gif?s=128&g=1", "display_name": "Riemann-bitcoin.", "link": "https://stackoverflow.com/users/7537272/riemann-bitcoin"}, "edited": false, "score": 0, "creation_date": 1508961436, "post_id": 46940324, "comment_id": 80829338, "body": "only one makefile as you can see from ls comannd do I need to save the file some special way?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 1, "creation_date": 1508961745, "post_id": 46940324, "comment_id": 80829495, "body": "@Klaus Your answer wasn&#39;t helpful because it was based on a guess that turned out to be incorrect. It was not based on outdated information, it was based on incomplete information. Consider asking for more information before writing up an answer, or accept that guesses can be wrong occasionally."}], "answers": [{"tags": [], "owner": {"reputation": 2991, "user_id": 3877787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPxhf.jpg?s=128&g=1", "display_name": "Zalman Stern", "link": "https://stackoverflow.com/users/3877787/zalman-stern"}, "is_accepted": false, "score": 0, "last_activity_date": 1508959857, "creation_date": 1508959857, "answer_id": 46940669, "question_id": 46940324, "link": "https://stackoverflow.com/questions/46940324/makefile-with-std-c11/46940669#46940669", "title": "Makefile with -std=c++11", "body": "<p>Generally you want to use the <code>CXXFLAGS</code> implicit variable to specify this switch. I am not sure why the current pattern rule is failing, but using CXXFLAGS will allow getting rid of it entirely</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 7537272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sTNBD.gif?s=128&g=1", "display_name": "Riemann-bitcoin.", "link": "https://stackoverflow.com/users/7537272/riemann-bitcoin"}, "edited": false, "score": 0, "creation_date": 1508961789, "post_id": 46941072, "comment_id": 80829521, "body": "You are right works not and thanks for the explanation and tips not just the answer."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1508961490, "creation_date": 1508961490, "answer_id": 46941072, "question_id": 46940324, "link": "https://stackoverflow.com/questions/46940324/makefile-with-std-c11/46941072#46941072", "title": "Makefile with -std=c++11", "body": "<p>I believe the problem is in this line:</p>\n\n<pre><code>HEADERS = card.h sortedLinkedList.h deck.h\n#----------------^\n</code></pre>\n\n<p>You have specified a dependency on <code>sortedLinkedList.h</code>, but that file doesn't exist. You only have <code>SortedLinkedList.h</code> with a capital <code>S</code>.</p>\n\n<p>The rule</p>\n\n<pre><code>%.o: %.cpp $(HEADERS)\n    g++ -c -std=c++11 $&lt; -o $@\n</code></pre>\n\n<p>is considered for making <code>card.o</code> but rejected because one of the prerequisites (namely <code>sortedLinkedList.h</code>) doesn't exist.</p>\n\n<p>So <code>make</code> falls back to its built-in rule for making <code>.o</code> files from <code>.cpp</code> files, which is <code>$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c</code>.</p>\n\n<p><code>CXX</code> is set to <code>g++</code> by default, but <code>CPPFLAGS</code> and <code>CXXFLAGS</code> are empty. This explains the extra spaces between <code>g++</code> and <code>-c</code> in the output:</p>\n\n<pre><code>g++    -c -o card.o card.cpp\n</code></pre>\n\n<p>You can confirm this by running <code>make -r</code>, which disables all built-in rules. It should now fail to find a rule for making <code>card.o</code>.</p>\n\n<p>To solve this, you should fix the capitalization of <code>SortedLinkedList.h</code>. You should also consider using the built-in rules and just set <code>CXXFLAGS = -std=c++11</code>.</p>\n"}], "owner": {"reputation": 61, "user_id": 7537272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sTNBD.gif?s=128&g=1", "display_name": "Riemann-bitcoin.", "link": "https://stackoverflow.com/users/7537272/riemann-bitcoin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3284, "favorite_count": 0, "accepted_answer_id": 46941072, "answer_count": 2, "score": 1, "last_activity_date": 1508961490, "creation_date": 1508958618, "last_edit_date": 1508961126, "question_id": 46940324, "link": "https://stackoverflow.com/questions/46940324/makefile-with-std-c11", "title": "Makefile with -std=c++11", "body": "<p>I am writing a makefile for my program (that is tested and works)   The problem I can tell is that some how my '-std=c++11' is not running in the function.  The code pops out a unrecognized error that I dont get when I simply run 'g++ -o exe -std=c++11 *.cpp'.  Here is my make file.   </p>\n\n<pre><code>HEADERS = card.h sortedLinkedList.h deck.h\nOBJECTS = card.o sortedLinkedList.o deck.o main.o\nexe: $(OBJECTS)\n   g++ -std=c++11 $^ -o $@\n%.o: %.cpp $(HEADERS)\n   g++ -c -std=c++11 $&lt; -o $@\nclean:\n   rm -i *.o exe\n</code></pre>\n\n<p>The output of my makefile is </p>\n\n<pre><code>me@root:~/Documents/CS216/Lab8$ make\ng++    -c -o card.o card.cpp\ncard.cpp: In member function \u2018void Card::print()\u2019:\ncard.cpp:55:28: error: \u2018to_string\u2019 was not declared in this scope\n       cardN=to_string(point);\n                            ^\n&lt;builtin&gt;: recipe for target 'card.o' failed\nmake: *** [card.o] Error 1\n</code></pre>\n\n<p>note: to_string() is not defined until c++11</p>\n\n<pre><code>daniel@Reimann:~/Documents/CS216/Lab8$ ls \ncard.cpp  deck.cpp  Lab8      lab8source.zip        SortedLinkedList.h\ncard.h    deck.h    lab8.cpp  makefile              SortedLinkedList.o\ncard.o    deck.o    lab8.o    SortedLinkedList.cpp\n</code></pre>\n\n<p>Output of xxd makefile </p>\n\n<pre><code>00000000: 4845 4144 4552 5320 3d20 6361 7264 2e68  HEADERS = card.h\n00000010: 2073 6f72 7465 644c 696e 6b65 644c 6973   sortedLinkedLis\n00000020: 742e 6820 6465 636b 2e68 0a4f 424a 4543  t.h deck.h.OBJEC\n00000030: 5453 203d 2063 6172 642e 6f20 536f 7274  TS = card.o Sort\n00000040: 6564 4c69 6e6b 6564 4c69 7374 2e6f 2064  edLinkedList.o d\n00000050: 6563 6b2e 6f20 6c61 6238 2e6f 0a4c 6162  eck.o lab8.o.Lab\n00000060: 383a 2024 284f 424a 4543 5453 290a 0967  8: $(OBJECTS)..g\n00000070: 2b2b 202d 7374 643d 632b 2b31 3120 245e  ++ -std=c++11 $^\n00000080: 202d 6f20 2440 0a25 2e6f 3a20 252e 6370   -o $@.%.o: %.cp\n00000090: 7020 2428 4845 4144 4552 5329 200a 0967  p $(HEADERS) ..g\n000000a0: 2b2b 202d 6320 2d73 7464 3d63 2b2b 3131  ++ -c -std=c++11\n000000b0: 2024 3c20 2d6f 2024 400a 636c 6561 6e3a   $&lt; -o $@.clean:\n000000c0: 0a09 726d 202d 6920 2a2e 6f20 4c61 6238  ..rm -i *.o Lab8\n000000d0: 0a                            \n</code></pre>\n"}, {"tags": ["c++", "class", "virtual", "multiple-inheritance", "virtual-inheritance"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1508958430, "post_id": 46940134, "comment_id": 80827699, "body": "Do you <i>really</i> need to include member variables and multiple member functions in your &quot;mock up&quot;? Reduce the noise please. Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508959712, "post_id": 46940134, "comment_id": 80828423, "body": "I rolled back your changes. Those typos are an error, and a major one. Rather than apply fixes posed in answers, take the time to work on that <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1508960619, "post_id": 46940134, "comment_id": 80828901, "body": "@StoryTeller did you read the comment underneath that answer? It explains <i>why</i> it was fixed, and it seems perfectly legitimate. With that said the code shouldn&#39;t be posted until it&#39;s known to compile and show the error in question."}, {"owner": {"reputation": 1964, "user_id": 8666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e412c92534ae5c8ae3b0e9cb7b7360?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel S\u0119k", "link": "https://stackoverflow.com/users/8666197/daniel-s%c4%99k"}, "edited": false, "score": 0, "creation_date": 1508962263, "post_id": 46940134, "comment_id": 80829760, "body": "This code has to many errors. Constructors returning value, semicolons before function body. Dont write code in SO editor. Copy from real files."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1509003356, "post_id": 46940134, "comment_id": 80843829, "body": "<code>explicit B()</code> what are you trying to do with <b>explicit</b>?"}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508959145, "post_id": 46940434, "comment_id": 80828103, "body": "I salute you for sifting through all that to spot this error."}, {"owner": {"reputation": 19, "user_id": 8833007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb350765278c422b688a2504717fe87?s=128&d=identicon&r=PG&f=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/8833007/scott"}, "edited": false, "score": 0, "creation_date": 1508959662, "post_id": 46940434, "comment_id": 80828396, "body": "Thanks for the reply!  That was unfortunately a typo in my submission; I had to re-create the code and incorrectly omitted the qualifiers in the implementation, much to my chagrin.  I&#39;ve corrected the submission to more accurately reflect the code (I can&#39;t directly copy)."}], "tags": [], "owner": {"reputation": 1964, "user_id": 8666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e412c92534ae5c8ae3b0e9cb7b7360?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel S\u0119k", "link": "https://stackoverflow.com/users/8666197/daniel-s%c4%99k"}, "is_accepted": false, "score": 2, "last_activity_date": 1508961442, "last_edit_date": 1508961442, "creation_date": 1508958974, "answer_id": 46940434, "question_id": 46940134, "link": "https://stackoverflow.com/questions/46940134/c-undefined-reference-to-base-class-functions-at-link-time-not-vtables-c/46940434#46940434", "title": "C++ Undefined reference to base class functions at link time (--not-- vtables, constructors, templates, or pure virtual functions)", "body": "<p>You are defining global functions instead of class methods.</p>\n\n<p>In <code>class A</code></p>\n\n<pre><code>int doA1(const A&amp; X) const;\nint doA2() const;\n</code></pre>\n\n<p>Implemetation</p>\n\n<pre><code>int A::doA1(const A&amp; X) const\nint doA2() const\n</code></pre>\n\n<p>Thera is no <code>A::</code> in second case.</p>\n"}], "owner": {"reputation": 19, "user_id": 8833007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb350765278c422b688a2504717fe87?s=128&d=identicon&r=PG&f=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/8833007/scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1704, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508961442, "creation_date": 1508957974, "last_edit_date": 1508961064, "question_id": 46940134, "link": "https://stackoverflow.com/questions/46940134/c-undefined-reference-to-base-class-functions-at-link-time-not-vtables-c", "title": "C++ Undefined reference to base class functions at link time (--not-- vtables, constructors, templates, or pure virtual functions)", "body": "<p>I'm working on a project attempting to implement a stand-alone base class (A) that can be extended by later classes (such as B and C).  I want to be able to use them all independently, hence no pure virtual functions, and I want only one copy of each class in any derived classes (hence the virtuals to avoid the Dreaded Diamond). Some classes, like D, need to combine all the previously extended classes, retaining all their functions while implementing additional ones.</p>\n\n<p>For added fun I'm (stuck) using C++03, gcc 4.4.6, and make 3.81.</p>\n\n<p>Everything compiles fine, but I keep getting 'undefined reference to '[base class function]' at link whenever and however I attempt to use the base class functions in the derived class.</p>\n\n<p>All the answers I've been able to find so far are about incorrectly implementing pure virtual functions, trying to monkey with constructors, or have failed to implement all the members of a class (hence the vtable errors).  I'm not (knowingly) doing or intending any of these things.</p>\n\n<p>It would be cool if these were implemented as templates, but it's unfortunately not possible due to the complexity.  I can't post the actual code, but I've mocked up examples resembling the basic structure and behavior:</p>\n\n<p>Header file declaring the classes:</p>\n\n<pre><code>#ifndef CODE_H\n#define CODE_H\n\nclass A\n{\nprotected:\n   int a_;\n   int b_;\n   int c_;\n\npublic:\n\n   explicit A() :\n      a_(0), b_(0), c_(0) {}\n\n   A(const int X, const int Y, const int Z) :\n      a_(X), b_(Y), c_(Z) {}\n\n   A(const A&amp; X) :\n      a_(X.A()), b_(X.B()), c_(X.C()) {}\n\n   int doA1(const A&amp; X) const;\n\n   int doA2() const;\n\n   A getA() const;\n\n   A&amp; operator=(const A&amp; X);\n\n   const int&amp; A() const {return a_;}\n   const int&amp; B() const {return b_;}\n   const int&amp; C() const {return c_;}\n\n   //One for each operator but not shown for brevity\n   A operator+(const A&amp; X) const;\n   void operator+=(const A&amp; X);\n   A operator+(const int X) const;\n   void operator+=(const int X);\n};\n\nclass B : public virtual A\n{\nprotected:\n   int d_;\n\npublic:\n\n   explicit B() :\n      A(), d_(0) {}\n\n   B(const int D, A X) :\n      A(X), d_(D) {}\n\n   B(const int D) :\n      d_(D) {}\n\n   int doB1(const B&amp; X) const;\n\n   B getB() const;\n\n   B&amp; operator=(const B&amp; X);\n\n   const int&amp; D() const {return d_;}\n\n   //One for each operator but not shown for brevity.\n   //int d_ doesn't need to be modified by the operators, so it's ignored in their implementation.\n   B operator+(const B&amp; X) const {return B(d_, (A::operator+(X.getA())));}\n   void operator+=(const B&amp; X)   {A::operator+=(X.getA());}\n   B operator+(const int X) const; {return B(d_, (A::operator+(X)));}\n   void operator+=(const int X)    {A::operator+(X);}\n};\n\nclass C : public virtual A\n{\nprotected:\n   int e_;\n   int f_;\n   int g_;\n\npublic:\n\n   explicit C() :\n      A(), e_(0), f_(0), g_(0) {}\n\n   C(const int U, const int V, const int W, \n     const int X, const int Y, const int Z) :\n         A(U, V, W), e_(X), f_(Y), g_(Z) {}\n\n   C(const A&amp; W, \n     const int X, const int Y, const int Z) :\n         A(W), e_(X), f_(Y), g_(Z) {}\n\n   C(const C&amp; X) :\n         C(X.A(), X.B(), X.C()), e_(X.E()), f_(X.F()), g_(X.G()) {}\n\n   int doC1(const C&amp; X) const;\n\n   C getC() const;\n\n   C&amp; operator=(const C&amp; X);\n\n   const int&amp; E() const {return e_;}\n   const int&amp; F() const {return f_;}\n   const int&amp; G() const {return g_;}\n\n   //One for each operator but not shown for brevity\n   C operator+(const C&amp; X) const;\n   void operator+=(const C&amp; X);\n   C operator+(const int X) const;\n   void operator+=(const int X);\n};\n\nclass D : public virtual B, public virtual C\n{\npublic:\n\n   explicit D() :\n      B(), C() {}\n\n   D(const int D, C Y) :\n      B(D), C(Y) {}\n\n   int doD1(const D&amp; X) const;\n\n   int doD2() const;\n\n   D getD() const;\n\n   D&amp; operator=(const D&amp; X);\n\n   //One for each operator but not shown for brevity.\n   D operator+(const D&amp; X) const {return D(d_, (C::operator+(X.getC())));}\n   void operator+=(const D&amp; X)   {C::operator+=(X.getC());}\n   D operator+(const int X) const; {return D(d_, (C::operator+(X)));}\n   void operator+=(const int X)    {C::operator+(X);}\n};\n#endif\n</code></pre>\n\n<p>File implementing A:</p>\n\n<pre><code>#include header.h\n\nint A::doA1(const A&amp; X) const\n{\n   int doStuff;\n   //does stuff.\n   return doStuff;\n}\n\nint A::doA2() const\n{\n   int doStuff2;\n   //does stuff.\n   return doStuff2;\n}\n\nA A::getA() const\n{\n   A out(a_, b_, c_);\n   return out;\n}\n\nA&amp; A::operator=(const A&amp; X)\n{\n   if (this != &amp;X)\n   {\n      a_ = X.a_;\n      b_ = X.b_;\n      c_ = X.c_;\n   }\n   return *this;\n}\n\n//One for each operator but not shown for brevity\nA A::operator+(const A&amp; X) const\n{\n   return A(a_ + X.a_, b_ + X.b_, c_ + X.c_);\n}\n\nvoid A::operator+=(const A&amp; X)\n{\n   a_ += X.a_;\n   b_ += X.b_;\n   c_ += X.c_;\n}   \n\n A A::operator+(const int X) const\n{\n   return A(a_ + X, b_ + X, c_ + X);\n}\n\nvoid A::operator+=(const int X)\n{\n   a_ += X;\n   b_ += X;\n   c_ += X;\n}   \n</code></pre>\n\n<p>File implementing B:</p>\n\n<pre><code>#include header.h\n\nint B::doB1(const B&amp; X) const\n{\n   //Linker complains on both doA1 and getA, even if I qualify them or remove all the qualifiers\n   return (A::doA1(X.getA()));\n}\n\nB B::getB() const\n{\n   //Also complains here, with or without qualifiers.\n   B out(d_, A::getA());\n   return out;\n}\n\nB&amp; B::operator=(const B&amp; X)\n{\n   if (this != &amp;X)\n   {\n      //Also here, for presumably the same reason.\n      A::operator=(D.getA());\n      d_ = X.d_;\n   }\n   return *this;\n}\n</code></pre>\n\n<p>I can provide mockups for C and D as well, though they follow the same basic pattern as A and B.</p>\n\n<p>Based on the answers I've seen so far I should, at most, only need to add the base class qualifier to the functions to avoid any accidental name hiding, but that doesn't appear to work.  Also strangely: instantiated objects can't seem to find their public functions (like in doB1).  Am I just a moron missing something obvious (which I wouldn't be surprised coming from a C background)?</p>\n"}, {"tags": ["c++", "graphics", "mouseevent", "sfml", "mousepress"], "comments": [{"owner": {"reputation": 450, "user_id": 3303838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c6cf06f7a2dd6f76501f47f598557c2?s=128&d=identicon&r=PG", "display_name": "Martin Sand", "link": "https://stackoverflow.com/users/3303838/martin-sand"}, "edited": false, "score": 0, "creation_date": 1509093242, "post_id": 46940004, "comment_id": 80888733, "body": "It is not clear what your question is. I answered the question about the moving view. If you have multiple image (not including the background image) you need to either check the click and z-order or find another way to select an image, e.g. by pressing the 1, 2, 3 etc. key and then only move this image."}], "answers": [{"tags": [], "owner": {"reputation": 450, "user_id": 3303838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c6cf06f7a2dd6f76501f47f598557c2?s=128&d=identicon&r=PG", "display_name": "Martin Sand", "link": "https://stackoverflow.com/users/3303838/martin-sand"}, "is_accepted": false, "score": 0, "last_activity_date": 1509054286, "creation_date": 1509054286, "answer_id": 46964327, "question_id": 46940004, "link": "https://stackoverflow.com/questions/46940004/how-to-move-multiple-images-separately-using-sfml-mouse-movements/46964327#46964327", "title": "How to move multiple images separately using SFML mouse movements?", "body": "<p>The issue is that you are moving the view and not the sprite itself:</p>\n\n<pre><code>view.setCenter(view.getCenter() + deltaPos);\nwindow.setView(view);\n</code></pre>\n\n<p>Instead you should move the sprite. So exchange the two lines above with this line and it should work</p>\n\n<pre><code>bd.setPosition(bd.getPosition() - deltaPos);\n</code></pre>\n"}], "owner": {"reputation": 461, "user_id": 8082729, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-VT5daPfDHbM/AAAAAAAAAAI/AAAAAAAAEBw/A-F5P4uEqFg/photo.jpg?sz=128", "display_name": "David Gladson", "link": "https://stackoverflow.com/users/8082729/david-gladson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1509054286, "creation_date": 1508957425, "last_edit_date": 1508957565, "question_id": 46940004, "link": "https://stackoverflow.com/questions/46940004/how-to-move-multiple-images-separately-using-sfml-mouse-movements", "title": "How to move multiple images separately using SFML mouse movements?", "body": "<p>Below is my code which displays two images inside a window.</p>\n\n<p>Now by moving mouse both the images move together but how should i access them separately? </p>\n\n<pre><code>int main()\n{\n// Let's setup a window\nsf::RenderWindow window(sf::VideoMode(640, 480), \"SFML ViewTransformation\");\n\n// Let's create the background image here, where everything initializes.\nsf::Texture BackgroundTexture;\nsf::Sprite bd;\nsf::Vector2u TextureSize;  //Added to store texture size.\nsf::Vector2u WindowSize;   //Added to store window size.\n\n if(!BackgroundTexture.loadFromFile(\"bg1.jpg\"))\n    {\n      return -1;\n    }\nelse\n{\nTextureSize = BackgroundTexture.getSize(); //Get size of texture.\nWindowSize = window.getSize();             //Get size of window.\n\nfloat ScaleX = (float) WindowSize.x / TextureSize.x;\nfloat ScaleY = (float) WindowSize.y / TextureSize.y;     //Calculate scale.\n\nbd.setTexture(BackgroundTexture);\nbd.setScale(ScaleX, ScaleY);      //Set scale.\n}\n// Create something simple to draw\nsf::Texture texture;\ntexture.loadFromFile(\"background.jpg\");\nsf::Sprite background(texture);\nsf::Vector2f oldPos;\nbool moving = false;\n\nsf::View view = window.getDefaultView();\n\nwhile (window.isOpen()) {\n    sf::Event event;\n    while (window.pollEvent(event)) {\n        switch (event.type) {\n            case sf::Event::Closed:\n                window.close();\n                break;\n            case sf::Event::MouseButtonPressed:\n                if (event.mouseButton.button == 0) {\n                    moving = true;\n                    oldPos = window.mapPixelToCoords(sf::Vector2i(event.mouseButton.x, event.mouseButton.y));\n                }\n                break;\n            case  sf::Event::MouseButtonReleased:\n\n                if (event.mouseButton.button == 0) {\n                    moving = false;\n                }\n                break;\n            case sf::Event::MouseMoved:\n                {\n                    if (!moving)\n                        break;\n\n                    const sf::Vector2f newPos = window.mapPixelToCoords(sf::Vector2i(event.mouseMove.x, event.mouseMove.y));\n\n                    const sf::Vector2f deltaPos = oldPos - newPos;\n                    view.setCenter(view.getCenter() + deltaPos);\n                    window.setView(view);\n\n\n\n oldPos = window.mapPixelToCoords(sf::Vector2i(event.mouseMove.x, event.mouseMove.y));\n                    break;\n                }\n }\n    }\n\n    window.clear(sf::Color::White);\n    window.draw(bd);\n    window.draw(background);\n\n    window.display();\n}\n}\n</code></pre>\n\n<p>Also I would love to hear the suggestions where I could find such examples with proper insights and good explanation as well. Thanks in advance.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1508957453, "post_id": 46939939, "comment_id": 80827100, "body": "<code>std::cout &lt;&lt; std::setprecision(2); std::cout &lt;&lt; price1; std::cout &lt;&lt; price2; std::cout &lt;&lt; priceofitemplustax1; std::cout &lt;&lt; priceofitemplustax2; std::cout &lt;&lt; total;</code> here you write 5 floats."}, {"owner": {"reputation": 1, "user_id": 8833497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a-zOP1HjAn4/AAAAAAAAAAI/AAAAAAAAAhI/GDwt0oIYS0c/photo.jpg?sz=128", "display_name": "RubyShaymin", "link": "https://stackoverflow.com/users/8833497/rubyshaymin"}, "edited": false, "score": 0, "creation_date": 1508957777, "post_id": 46939939, "comment_id": 80827270, "body": "Is that bad? I&#39;m still not sure how to fix that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 2, "creation_date": 1508957864, "post_id": 46939939, "comment_id": 80827316, "body": "Weren\u2019t that you who saw more output than he wanted? Don\u2019t output if you don\u2019t want it."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 1, "creation_date": 1508958090, "post_id": 46939939, "comment_id": 80827480, "body": "Editorial aside : Never use floating point numbers to represent currency values."}, {"owner": {"reputation": 1, "user_id": 8833497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a-zOP1HjAn4/AAAAAAAAAAI/AAAAAAAAAhI/GDwt0oIYS0c/photo.jpg?sz=128", "display_name": "RubyShaymin", "link": "https://stackoverflow.com/users/8833497/rubyshaymin"}, "edited": false, "score": 0, "creation_date": 1508958651, "post_id": 46939939, "comment_id": 80827834, "body": "Oh I&#39;m dumb, I got it, I didn&#39;t realize those were output lines, I should have realized that by the &quot;cout&quot; part of it. Thank you, also how do I mark your comment as the correct answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1508960099, "post_id": 46939939, "comment_id": 80828603, "body": "I made it an answer."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508960594, "post_id": 46939939, "comment_id": 80828887, "body": "Why did you think you had to <code>cout</code> them and what that would do? Also, even if it&#39;s moot in this context, for emphasis: by doing that, you were reading uninitialised variables, which is UB. Don&#39;t do that."}], "answers": [{"tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": false, "score": 0, "last_activity_date": 1508957976, "creation_date": 1508957976, "answer_id": 46940136, "question_id": 46939939, "link": "https://stackoverflow.com/questions/46939939/basic-c-application-has-extra-output-then-it-should/46940136#46940136", "title": "Basic C++ Application has extra output then it should", "body": "<p>The lines</p>\n\n<pre><code>std::cout &lt;&lt; std::fixed;   // sets a format\nstd::cout &lt;&lt; std::setprecision(2);  // sets a format\n</code></pre>\n\n<p>set the streams output format. </p>\n\n<p>The lines</p>\n\n<pre><code>std::cout &lt;&lt; price1;  // outputs a number\nstd::cout &lt;&lt; price2;  // outputs a number\nstd::cout &lt;&lt; priceofitemplustax1;  // outputs a number\nstd::cout &lt;&lt; priceofitemplustax2;  // outputs a number\nstd::cout &lt;&lt; total;  // outputs a number\n</code></pre>\n\n<p>print the variables to the stream.</p>\n\n<p>Just remove the variable output lines. Do not accept this answer - Credit goes to manni66</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "is_accepted": false, "score": 1, "last_activity_date": 1508960081, "creation_date": 1508960081, "answer_id": 46940737, "question_id": 46939939, "link": "https://stackoverflow.com/questions/46939939/basic-c-application-has-extra-output-then-it-should/46940737#46940737", "title": "Basic C++ Application has extra output then it should", "body": "<pre><code>std::cout &lt;&lt; std::setprecision(2); \nstd::cout &lt;&lt; price1;\nstd::cout &lt;&lt; price2;\nstd::cout &lt;&lt; priceofitemplustax1; \nstd::cout &lt;&lt; priceofitemplustax2; std::cout &lt;&lt; total;\n</code></pre>\n\n<p>here you write 5 floats</p>\n"}], "owner": {"reputation": 1, "user_id": 8833497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a-zOP1HjAn4/AAAAAAAAAAI/AAAAAAAAAhI/GDwt0oIYS0c/photo.jpg?sz=128", "display_name": "RubyShaymin", "link": "https://stackoverflow.com/users/8833497/rubyshaymin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1508960081, "creation_date": 1508957176, "last_edit_date": 1508957548, "question_id": 46939939, "link": "https://stackoverflow.com/questions/46939939/basic-c-application-has-extra-output-then-it-should", "title": "Basic C++ Application has extra output then it should", "body": "<p>So I'm writing a basic application and for some reason when I run the program a bunch of numbers pop up before my intended output. It was working fine until I added the \"std::cout\" lines to have the outputs only be 2 decimals. The general gist of the application is a program acts as a self-checkout register at a store and lets the user buy 2 items. And yes I know the code probably looks really bad, I'm still super new to C++.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\nint main()\n{\n\nfloat price1;\nfloat number1;\nfloat price2;\nfloat number2;\nfloat priceofitemplustax1;\nfloat priceofitemplustax2;\nfloat total;\n\nstd::cout &lt;&lt; std::fixed;\nstd::cout &lt;&lt; std::setprecision(2);\nstd::cout &lt;&lt; price1;\nstd::cout &lt;&lt; price2;\nstd::cout &lt;&lt; priceofitemplustax1;\nstd::cout &lt;&lt; priceofitemplustax2;\nstd::cout &lt;&lt; total;\n\ncout &lt;&lt; endl &lt;&lt; \"Please scan your first item.\" &lt;&lt;endl;\n\ncin.get();\n\ncout &lt;&lt; endl &lt;&lt; \"How many of that item are you buying? \"&lt;&lt;endl;\n\ncin &gt;&gt; number1;\n\ncout &lt;&lt; endl &lt;&lt; \"How much is that item?\"&lt;&lt;endl;\n\ncin &gt;&gt; price1;\n\npriceofitemplustax1 = (number1 * price1) * 1.0875;\n\ncout &lt;&lt; endl &lt;&lt; \"So you want \" &lt;&lt; number1 &lt;&lt; \" of this item? Adding tax that will be \" &lt;&lt; priceofitemplustax1 &lt;&lt; \".\"&lt;&lt;endl;\n\ncin.get();\n\ncout &lt;&lt; endl &lt;&lt; \"Please scan your second item.\"&lt;&lt;endl;\n\ncin.get();\n\ncout &lt;&lt; endl &lt;&lt; \"How many of that item are you buying? \"&lt;&lt;endl;\n\ncin &gt;&gt; number2;\n\ncout &lt;&lt; endl &lt;&lt; \"How much is that item?\"&lt;&lt;endl;\n\ncin &gt;&gt; price2;\n\npriceofitemplustax2 = (number2 * price2) * 1.0875;\n\ncout &lt;&lt; endl &lt;&lt; \"So you want \" &lt;&lt; number2 &lt;&lt; \" of this item? Adding tax that will be \" &lt;&lt; priceofitemplustax2 &lt;&lt; \".\"&lt;&lt;endl;\n\ncin.get();\n\ntotal = priceofitemplustax1 + priceofitemplustax2;\n\ncout &lt;&lt; endl &lt;&lt; \"So your final total for this shopping trip including tax is \" &lt;&lt; total &lt;&lt; \".\"&lt;&lt;endl;\n\ncin.get();\n\ncout &lt;&lt; endl &lt;&lt; \"Your reciept will print below.\"&lt;&lt;endl;\n\ncin.get();\n\ncout &lt;&lt; setw(14) &lt;&lt; right &lt;&lt; \"Number of Item\" &lt;&lt; setw(10) &lt;&lt; right &lt;&lt; \"Price\" &lt;&lt; setw(20) &lt;&lt; \"Price plus tax\" &lt;&lt; endl;\n\ncout &lt;&lt; setw(14) &lt;&lt; right &lt;&lt; number1 &lt;&lt; setw(10) &lt;&lt; right &lt;&lt; price1 &lt;&lt; setw(20) &lt;&lt; priceofitemplustax1 &lt;&lt; endl;\n\ncout &lt;&lt; setw(14) &lt;&lt; right &lt;&lt; number2 &lt;&lt; setw(10) &lt;&lt; right &lt;&lt; price2 &lt;&lt; setw(20) &lt;&lt; priceofitemplustax2 &lt;&lt; endl;\n\ncout &lt;&lt; endl;\n\ncout &lt;&lt; endl;\n\ncout &lt;&lt; setw(8) &lt;&lt; right &lt;&lt; \"Total is\" &lt;&lt; setw(10) &lt;&lt; total &lt;&lt; price2 &lt;&lt; endl;\n\ncin.get();\n}\n</code></pre>\n"}, {"tags": ["c++", "matrix"], "comments": [{"owner": {"reputation": 518, "user_id": 6311345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a65a545ae99255cd1293774ed2e53c43?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Rasa", "link": "https://stackoverflow.com/users/6311345/matthew-rasa"}, "edited": false, "score": 0, "creation_date": 1508957512, "post_id": 46939738, "comment_id": 80827130, "body": "What about using nested initializer lists? Something like: template&lt;data_type&gt; Matrix(std::initializer_list &lt;std::initializer_list&lt;data_type&gt;&gt; rows)"}, {"owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 0, "creation_date": 1508958987, "post_id": 46939738, "comment_id": 80828021, "body": "Out of curiosity, is this as a programming exercise? If not, any reason you can&#39;t use one of the many extremely optimized linear algebra libraries, such as <a href=\"http://eigen.tuxfamily.org\" rel=\"nofollow noreferrer\">Eigen</a>?"}, {"owner": {"reputation": 219, "user_id": 8656219, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d36c81b0acbd81918cfb5a4a32df87c6?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Ghiani", "link": "https://stackoverflow.com/users/8656219/marco-ghiani"}, "edited": false, "score": 0, "creation_date": 1508965984, "post_id": 46939738, "comment_id": 80831658, "body": "not an exercize ... just i want develop my matrix class with special operation included :)"}], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 8656219, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d36c81b0acbd81918cfb5a4a32df87c6?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Ghiani", "link": "https://stackoverflow.com/users/8656219/marco-ghiani"}, "edited": false, "score": 0, "creation_date": 1508997240, "post_id": 46943639, "comment_id": 80840562, "body": "looks nice .. but i don&#39;t understand .. how then i can manage the index for row and columns ? how to store this data from initialization (the 2 size of the matrix)"}, {"owner": {"reputation": 518, "user_id": 6311345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a65a545ae99255cd1293774ed2e53c43?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Rasa", "link": "https://stackoverflow.com/users/6311345/matthew-rasa"}, "reply_to_user": {"reputation": 219, "user_id": 8656219, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d36c81b0acbd81918cfb5a4a32df87c6?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Ghiani", "link": "https://stackoverflow.com/users/8656219/marco-ghiani"}, "edited": false, "score": 0, "creation_date": 1509060624, "post_id": 46943639, "comment_id": 80878330, "body": "By &quot;manage the index&quot;, do you mean you want to be able to get the number of rows and columns?  Do you mind updating your question to show example usage?"}], "tags": [], "owner": {"reputation": 518, "user_id": 6311345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a65a545ae99255cd1293774ed2e53c43?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Rasa", "link": "https://stackoverflow.com/users/6311345/matthew-rasa"}, "is_accepted": true, "score": 0, "last_activity_date": 1508974790, "creation_date": 1508974790, "answer_id": 46943639, "question_id": 46939738, "link": "https://stackoverflow.com/questions/46939738/matrix-elegant-constructor-with-curly-brakets/46943639#46943639", "title": "Matrix elegant constructor with curly brakets", "body": "<p>Would something like this work?</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;initializer_list&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;typename data_type&gt;\nclass Matrix {\npublic:\n\n        constexpr Matrix(std::initializer_list&lt;std::initializer_list&lt;data_type&gt;&gt; rows) {\n                // Add rows to data\n                data.reserve(rows.size());\n                for (auto &amp;row : rows)\n                        data.push_back(std::vector&lt;data_type&gt;{row});\n        }\n\nprivate:\n\n        // 2-D array-type for storing data\n        std::vector&lt;std::vector&lt;data_type&gt;&gt; data;\n\n};\n\nint main() {\n        // New matrix:\n        //  1 2 3\n        //  4 5 6\n        Matrix&lt;int&gt; mat = {{1, 2, 3}, {4, 5, 6}};\n\n        return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 219, "user_id": 8656219, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d36c81b0acbd81918cfb5a4a32df87c6?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Ghiani", "link": "https://stackoverflow.com/users/8656219/marco-ghiani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 46943639, "answer_count": 1, "score": -1, "last_activity_date": 1509189990, "creation_date": 1508956432, "last_edit_date": 1509189990, "question_id": 46939738, "link": "https://stackoverflow.com/questions/46939738/matrix-elegant-constructor-with-curly-brakets", "title": "Matrix elegant constructor with curly brakets", "body": "<p>I'm trying to develop a nice basic class Matrix , it's container is a simpler pointer to data_type (template argument);</p>\n\n<p>I'would like to figure out how can i construct my Matrix in this way :</p>\n\n<pre><code>Matrix&lt;type&gt; mat = { {1,2,3}, {4,5,6} };\n</code></pre>\n\n<p>right now the only way to construct with given an arbitrary number of parameter is using this constructor :</p>\n\n<pre><code>//--- construct by list of arguments\ntemplate&lt;typename data_type&gt;\ntemplate &lt;typename ... Ts&gt;   \nconstexpr Matrix&lt;data_type&gt;::Matrix(std::size_t row , \n                                    std::size_t col ,\n                                    Ts&amp;&amp;... args     ) noexcept : row{row}, columns{col},\n                                                                   data{ new data_type[row*col] }\n\n{       \n        assert(sizeof...(args) == row*columns );\n\n        std::initializer_list&lt;data_type&gt; il ( { std::forward&lt;Ts&gt;(args)... } );\n        std::copy(il.begin(), il.end(), data);\n}\n</code></pre>\n\n<p>but for using this I have to use this crap expression in the user-side code :</p>\n\n<pre><code> Matrix&lt;double&gt; m3(3,2,1.12,2.434,3.546546,4.657,5.675675,6.542354);\n</code></pre>\n\n<p>thanks in advance for your precious support !</p>\n\n<p>I've found this solutions.. but i don't know if there is a better way to doing so .... here the completly code (I wrote a matrix class with only this constructor in order to doing some try ) :</p>\n\n<pre><code># include &lt;iostream&gt;\n\n# include &lt;initializer_list&gt;\n# include &lt;iterator&gt;\n\n\n\n\nusing namespace std;\n\ntemplate &lt;typename data_type&gt;\nclass Matrix {\n    public:  \n\n    constexpr Matrix(std::initializer_list&lt;std::initializer_list&lt;data_type&gt;&gt; rows) {\n\n            size_t row = rows.size() ;\n            cout &lt;&lt; \"Here\" &lt;&lt; endl;      \n            auto il = *(rows.begin()); \n            size_t col = il.size();\n            cout &lt;&lt; row &lt;&lt; ' ' &lt;&lt; col &lt;&lt; endl;\n\n\n            size_t i=0;\n\n            size_t n = row * col;\n\n            cout &lt;&lt; n &lt;&lt; endl;;\n            data = new data_type[ n ];\n            i=0; \n            for(auto&amp; row : rows )\n                  for(auto &amp; r : row){\n                        data[i] = r ;\n                        i++;\n                  }\n            for (i=0; i &lt; n ; i++ ) \n                   cout &lt;&lt; data[i] &lt;&lt; endl;\n\n\n\n\n    }\n\n    private:\n\n    data_type* data;\n\n};\n\n\n\n\n\nint main(){\n\n\n      Matrix&lt;int&gt;  mat = {{1,2,3}, {4,5,6}};\n\n\n   return 0;   \n}\n</code></pre>\n"}, {"tags": ["c++", "function", "constructor"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1508957886, "post_id": 46939701, "comment_id": 80827336, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/120876/what-are-the-rules-for-calling-the-superclass-constructor\">What are the rules for calling the superclass constructor?</a>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1508958039, "post_id": 46939701, "comment_id": 80827443, "body": "The error is precisely correct and clear. There is no constructor of the base class that accepts an empty argument list, and yet here you are trying to call one. Put another way: what should happen to the base class&#39;s members if the subclass didn&#39;t get the base to initialise them? Or does the subclass not use/care about those variables? If so, why does it inherit from a class that has them? It shouldn&#39;t. Also, why do you declare one signature of constructor in <code>EixoDinamico.hpp</code> but define another in <code>EixoDinamico.cpp</code>? I think a bit more background reading on how constructors work is in order"}, {"owner": {"reputation": 1, "user_id": 8833340, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jgAU3FAlHwc/AAAAAAAAAAI/AAAAAAAAAA4/bPJ-e0ZGPQg/photo.jpg?sz=128", "display_name": "121 Gigamatts ", "link": "https://stackoverflow.com/users/8833340/121-gigamatts"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508958526, "post_id": 46939701, "comment_id": 80827751, "body": "@underscore_d The diferent declaration was a mistake when creating the question, thank you for pointing it out. The subclass uses the <code>Serie* base</code> to get the variables needed to inicialise the class constructor. In other words, the variables <code>(string titulo, double minimo, double maximo)</code> need to be located inside <code>Serie* base</code> by the EixoDinamico constructor."}, {"owner": {"reputation": 818, "user_id": 8736713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886e531b2c204538cc46e6d32e37a211?s=128&d=identicon&r=PG&f=1", "display_name": "Knoep", "link": "https://stackoverflow.com/users/8736713/knoep"}, "edited": false, "score": 0, "creation_date": 1508958974, "post_id": 46939701, "comment_id": 80828010, "body": "That still means that you should probably hand them over to the constructor of the base class."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508959170, "post_id": 46939701, "comment_id": 80828125, "body": "What is a <code>Serie</code>? And yes, prefer using the ctor init list, not setting members in the ctor body, which in this case means calling the existing non-default constructor of <code>Eixo</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508958370, "post_id": 46940231, "comment_id": 80827656, "body": "...and then really consider why your subclass does not initialise those member variables in its base, and whether the answer to that question means it shouldn&#39;t be a subclass or those members should be somewhere else."}], "tags": [], "owner": {"reputation": 818, "user_id": 8736713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886e531b2c204538cc46e6d32e37a211?s=128&d=identicon&r=PG&f=1", "display_name": "Knoep", "link": "https://stackoverflow.com/users/8736713/knoep"}, "is_accepted": false, "score": 1, "last_activity_date": 1508958525, "last_edit_date": 1508958525, "creation_date": 1508958298, "answer_id": 46940231, "question_id": 46939701, "link": "https://stackoverflow.com/questions/46939701/no-matching-function-for-call-to-constructor-class/46940231#46940231", "title": "No matching function for call to constructor class", "body": "<p>In the constructor of <code>EixoDinamico</code> you're calling the default constructor of <code>Eixo</code> (<code>Eixo()</code>), but that doesn't exist. The declaration of a custom construct for <code>Eixo</code> disables the automatic generation of a default constructor and you haven't declared one explicitly. To do that, add</p>\n\n<pre><code>Eixo() = default;\n</code></pre>\n\n<p>to the declaration of <code>Eixo</code> or implement one yourself.</p>\n\n<p>Also make sure that calling the default constructor is really what you want. As underscore_d has pointed out, that doesn't make much sense.</p>\n"}], "owner": {"reputation": 1, "user_id": 8833340, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jgAU3FAlHwc/AAAAAAAAAAI/AAAAAAAAAA4/bPJ-e0ZGPQg/photo.jpg?sz=128", "display_name": "121 Gigamatts ", "link": "https://stackoverflow.com/users/8833340/121-gigamatts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1508958976, "creation_date": 1508956303, "last_edit_date": 1508958976, "question_id": 46939701, "link": "https://stackoverflow.com/questions/46939701/no-matching-function-for-call-to-constructor-class", "title": "No matching function for call to constructor class", "body": "<p>I'm trying to make the constructor for a subclass. But I keep getting this error message. I've tried searching here, but none of the answers I found applied to my problem. Sorry if it's been asked before.</p>\n\n<p>In constructor 'EixoDinamico::EixoDinamico(double, double, Serie*, bool)':<br>\nerror: no matching function for call to 'Eixo::Eixo()'<br>\nnote: candidates are:\nnote: Eixo::Eixo(std::string, double, double)<br>\nnote: candidate expects 3 arguments, 0 provided<br>\nnote: Eixo::Eixo(const Eixo&amp;)<br>\nnote: candidate expects 1 argument, 0 provided</p>\n\n<p>EDIT: If I rewrite the code so that the subclass is now a class on its own, the problem disappears, but I need it to be a subclass.</p>\n\n<p>Here are the codes:</p>\n\n<p><strong>Eixo.h</strong></p>\n\n<pre><code>#ifndef EIXO_H\n#define EIXO_H\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Eixo\n{\npublic:\n    Eixo(string titulo, double minimo, double maximo);\n    virtual ~Eixo();\n\nprivate:\n    string titulo;\n    double minimo;\n    double maximo;\n};\n\n#endif // EIXO_H'\n</code></pre>\n\n<p><strong>Eixo.cpp</strong></p>\n\n<pre><code>#include \"Eixo.h\"\n#include &lt;iostream&gt;\n\nEixo::Eixo(string titulo, double minimo, double maximo)\n{\nthis-&gt;maximo = maximo;\nthis-&gt;minimo = minimo;\nthis-&gt;titulo = titulo;\n}\n\nEixo::~Eixo()\n{\n    //dtor\n}\n</code></pre>\n\n<p><strong>EixoDinamico.h</strong></p>\n\n<pre><code>#ifndef EIXODINAMICO_H\n#define EIXODINAMICO_H\n#include \"Eixo.h\"\n\n\nclass EixoDinamico : public Eixo\n{\npublic:\n    EixoDinamico(double minimoPadrao, double maximoPadrao, Serie* \nbase, bool orientacaoHorizontal);\n    virtual ~EixoDinamico();\n\nprivate:\n\n};\n\n#endif // EIXODINAMICO_H\n</code></pre>\n\n<p><strong>EixoDinamico.cpp</strong></p>\n\n<pre><code>#include \"EixoDinamico.h\"\n#include \"Eixo.h\"\nEixoDinamico::EixoDinamico(double minimoPadrao, double maximoPadrao, Serie* \nbase, bool orientacaoHorizontal):Eixo()\n{\n     if(base-&gt;getQuantidade()&lt;2){\n    inicioEixo = minimoPadrao;\n    fimEixo = maximoPadrao;\n}\n    limiteInferior = base-&gt;getLimiteInferior();\n    limiteSuperior = base-&gt;getLimiteSuperior();\n    if (orientacaoHorizontal){\n        inicioEixo = limiteInferior-&gt;getX();\n        fimEixo = limiteSuperior-&gt;getX();\n}\n    else{\n    inicioEixo = limiteInferior-&gt;getY();\n    fimEixo = limiteSuperior-&gt;getY();\n}\n}\n\nEixoDinamico::~EixoDinamico()\n{\n//dtor\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "templates"], "comments": [{"owner": {"reputation": 2967, "user_id": 8616205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3o2ct.png?s=128&g=1", "display_name": "frslm", "link": "https://stackoverflow.com/users/8616205/frslm"}, "edited": false, "score": 1, "creation_date": 1508956418, "post_id": 46939699, "comment_id": 80826508, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/13636540/how-to-check-for-the-type-of-a-template-parameter\">How to check for the type of a template parameter?</a>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1508956436, "post_id": 46939699, "comment_id": 80826513, "body": "You can turn <code>vec3</code> and <code>vec2</code> into templates"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 2967, "user_id": 8616205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3o2ct.png?s=128&g=1", "display_name": "frslm", "link": "https://stackoverflow.com/users/8616205/frslm"}, "edited": false, "score": 2, "creation_date": 1508956493, "post_id": 46939699, "comment_id": 80826541, "body": "@frslm That post is about checking in the body of a function, which may be different from the definition of a class. Class definition is entirely compile-time dependent while function bodies can be evaluated at runtime."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1508956600, "post_id": 46939699, "comment_id": 80826605, "body": "The easiest solution may be to use <a href=\"http://en.cppreference.com/w/cpp/types/conditional\" rel=\"nofollow noreferrer\"><code>std::conditional</code></a>."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1508956633, "post_id": 46939699, "comment_id": 80826619, "body": "@Justin Hmmm, these vec2 and vec3 and so on are from a library, but I suppose I could wrap them in my own templated type."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1508956657, "post_id": 46939699, "comment_id": 80826633, "body": "One option is to use type traits. This might be helpful: <a href=\"https://stackoverflow.com/questions/35070288/c-class-template-specialization-with-pointers/35070474#35070474\" title=\"c class template specialization with pointers\">stackoverflow.com/questions/35070288/&hellip;</a>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1508956689, "post_id": 46939699, "comment_id": 80826652, "body": "You don&#39;t want to specialize because?"}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508956969, "post_id": 46939699, "comment_id": 80826827, "body": "@StoryTeller, Ummm, I wanted to use the &quot;power&quot; of C++ generics instead of rewriting all the methods for each type. If it&#39;s not possible I get it, although I&#39;m looking into this std::conditional that was suggested."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1508957160, "post_id": 46939699, "comment_id": 80826944, "body": "<code>std::conditional</code> could indeed work. You&#39;d end up with something that looks like <code>std::conditional_t&lt;std::is_same_v&lt;float, P&gt;, vec3, std::conditional_t&lt;std::is_same_v&lt;double, P&gt;, dvec3, std::conditional_t&lt;std::is_same_v&lt;int, P&gt;, ivec3, void&gt;&gt;&gt;</code> (of course with nicer formatting). So you could just wrap that inside an alias template and call it good (although it&#39;s not very readable IMO)"}, {"owner": {"reputation": 8790, "user_id": 1261432, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd64a8b152ef096abdd8d03925bf34?s=128&d=identicon&r=PG&f=1", "display_name": "Synxis", "link": "https://stackoverflow.com/users/1261432/synxis"}, "edited": false, "score": 1, "creation_date": 1508971225, "post_id": 46939699, "comment_id": 80833672, "body": "The most important point here: please use Eigen. It is a C++ linear algebra library that provides templated vectors (and matrices) and it was also designed for your use case."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 8790, "user_id": 1261432, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd64a8b152ef096abdd8d03925bf34?s=128&d=identicon&r=PG&f=1", "display_name": "Synxis", "link": "https://stackoverflow.com/users/1261432/synxis"}, "edited": false, "score": 1, "creation_date": 1508971752, "post_id": 46939699, "comment_id": 80833821, "body": "@Synxis I&#39;ve heard of Eigen. I&#39;m currently using GLM. Because I would like to start using the Bullet physics library I thought I may adopt their vectors and matrices, it&#39;s really annoying having 15 different types of the same thing and converting.  For example if I want to use the Bullet library and I&#39;m using another library for vector type, I&#39;d have to convert to btVector3 or some such."}, {"owner": {"reputation": 8790, "user_id": 1261432, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd64a8b152ef096abdd8d03925bf34?s=128&d=identicon&r=PG&f=1", "display_name": "Synxis", "link": "https://stackoverflow.com/users/1261432/synxis"}, "edited": false, "score": 1, "creation_date": 1508973168, "post_id": 46939699, "comment_id": 80834285, "body": "I used to use GLM, but now I switched to Eigen and I find it better. More complete, and better designed I think. If you cannot change, then the given answer will do, but with eigen all of this is already done: <code>Eigen::Matrix&lt;Scalar, N, 1&gt;</code> for a vector in <code>Scalar^N</code>."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1508974167, "post_id": 46939699, "comment_id": 80834543, "body": "If you use GLM, the different vector types are all just typedefs to the same templated vector type. Pass your own template parameter through to them. See <a href=\"https://glm.g-truc.net/0.9.8/api/a00127.html\" rel=\"nofollow noreferrer\">glm.g-truc.net/0.9.8/api/a00127.html</a>"}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1508974580, "post_id": 46939699, "comment_id": 80834660, "body": "@tkausi Yeah, I know their types are typedeffed too, but I&#39;m trying to make a container called Vertex which is made up of one of the GLM typedeffed types. For example I might want to have an array of double type vertices for terrain, and float vertices for other objects.... Not sure, still thinking about it."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1508975327, "post_id": 46939699, "comment_id": 80834857, "body": "@Zebrafish Since you seem to be using GLM, definitely just use their types. For your vec3: <code>tvec3&lt;P, highp&gt;</code> does exactly what you want"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1508975995, "post_id": 46939699, "comment_id": 80835038, "body": "Perhaps you like this better: <a href=\"http://coliru.stacked-crooked.com/a/8ba299fee117a4af\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/8ba299fee117a4af</a>"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1508976597, "post_id": 46939699, "comment_id": 80835199, "body": "Alternative syntax using lambdas: <a href=\"http://coliru.stacked-crooked.com/a/e8310688ec528343\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/e8310688ec528343</a>"}, {"owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 0, "creation_date": 1508979642, "post_id": 46939699, "comment_id": 80835863, "body": "@Zebrafish It&#39;s bad form to edit the solution into your question. People who want to know how you solved the problem will just look down to the accepted answer. (Or if you really think there is something lacking about all the answers, you can post your own answer and accept that.) Would you mind reverting your last edit?"}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 0, "creation_date": 1508986384, "post_id": 46939699, "comment_id": 80837469, "body": "@David Z The solution I used is quite different from the answer given by Justin in his answer. However I basically used his implementation that he gave in the comments. Being different from Justin&#39;s answer, should I still revert the edit, tell Justin to add it to his answer? Or give my own answer?"}, {"owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 1, "creation_date": 1508986788, "post_id": 46939699, "comment_id": 80837567, "body": "@Zebrafish Definitely revert the edit, and then I would suggest posting your own answer because the solution you used is significantly different from what Justin suggested. For future reference, if an existing answer is enough to point a reader in the direction of what you did, then it&#39;s best to accept that answer, and you can <i>suggest</i> that the poster add something to their post if you think it&#39;d help. But the accepted answer doesn&#39;t have to show exactly what you did. It only has to explain how to solve the essential problem you&#39;re asking about, so future readers can also find the solution."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 0, "creation_date": 1508986899, "post_id": 46939699, "comment_id": 80837599, "body": "@David Right I&#39;ll do that."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1508987835, "post_id": 46939699, "comment_id": 80837820, "body": "@Johannes Schaub So I was wrong when I thought that &quot;if&quot; statements aren&#39;t evaluated at compile-time. In your constexpr case it is."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 1, "creation_date": 1508957958, "post_id": 46939818, "comment_id": 80827385, "body": "@Zebrafish - This idea is behind everything you deemed the power of C++."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508958572, "post_id": 46939818, "comment_id": 80827777, "body": "@StoryTeller Do you think D or Rust will have any chance to overpass C++ as the more popular low level language with bells and whistles? I mean in a way when designing something many years later we have the experience to not repeat our mistakes or silly choices in design, in this way I would think they should have the potential to be &quot;better&quot;, if done wisely of course."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1508958685, "post_id": 46939818, "comment_id": 80827852, "body": "@Zebrafish There&#39;s always a chance, but I&#39;m not counting on it. If they eventually do become more popular than C++, that will be quite far in the future. I personally think that companies will be more willing to spend money to improve C++ than to replace C++, since C++ already has a massive head start"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1508958809, "post_id": 46939818, "comment_id": 80827914, "body": "@Zebrafish - IDK, I&#39;m not familiar with either. Besides, historically the template mechanism&#39;s strength was a happy coincidence, not a conscious design choice."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1508959259, "post_id": 46939818, "comment_id": 80828166, "body": "@Zebrafish - BTW, I gather from your first comment that this works for you. You should accept the answer then. It&#39;d be good SO netiquette."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508986824, "post_id": 46939818, "comment_id": 80837578, "body": "@StoryTeller That&#39;s why I like to wait a bit before accepting answers, Johannes Schaub provided two different solutions in the comments."}], "tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 21, "last_activity_date": 1508956750, "creation_date": 1508956750, "answer_id": 46939818, "question_id": 46939699, "link": "https://stackoverflow.com/questions/46939699/how-can-i-use-c-template-argument-to-decide-which-type-of-member-is-in-a-class/46939818#46939818", "title": "How can I use C++ template argument to decide which type of member is in a class", "body": "<p>You may want to have some sort of <code>vec3</code> and <code>vec2</code> selector type. If there are already templated versions of <code>vec3</code> and <code>vec2</code>, just use them. Otherwise, you can use template specialization:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct vec_selector {};\n\ntemplate &lt;&gt;\nstruct vec_selector&lt;float&gt; {\n    using vec3_type = vec3;\n    using vec2_type = vec2;\n};\n\ntemplate &lt;&gt;\nstruct vec_selector&lt;double&gt; {\n    using vec3_type = dvec3;\n    using vec2_type = dvec2;\n};\n\ntemplate &lt;&gt;\nstruct vec_selector&lt;int&gt; {\n    using vec3_type = ivec3;\n    using vec2_type = ivec2;\n};\n\ntemplate &lt;typename P&gt;\nusing vec3_select_t = typename vec_selector&lt;P&gt;::vec3_type;\n\ntemplate &lt;typename P&gt;\nusing vec2_select_t = typename vec_selector&lt;P&gt;::vec2_type;\n</code></pre>\n\n<p>Then you can simply write:</p>\n\n<pre><code>template &lt;typename P&gt;\nstruct Vertex\n{\n    vec3_select_t&lt;P&gt; position;\n    vec3_select_t&lt;P&gt; normal;\n    vec2_select_t&lt;P&gt; texcoords;\n};\n</code></pre>\n\n<p>You could also just specialize the <code>Vertex</code> template, but it seems likely that it would be useful to have <code>vec3_select_t</code> elsewhere, and you'd have to repeat any member functions on <code>Vertex</code> (or else make the code more complicated)</p>\n"}, {"comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1508992346, "post_id": 46945266, "comment_id": 80838920, "body": "If you&#39;re using <code>std::is_same_v</code>, that&#39;s C++17, so you can replace the <code>typename std::conditional&lt;..&gt;::type</code> with <code>std::conditional_t&lt;...&gt;</code> (that&#39;s C++14). I&#39;d also recommend using <code>using</code> for type-aliases, but that can come to personal preference"}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1508994167, "post_id": 46945266, "comment_id": 80839501, "body": "@Justin nice. I tried to remove the std:: also but it seems &quot;using namespace&quot; isn&#39;t allowed within a struct."}], "tags": [], "owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "is_accepted": false, "score": 0, "last_activity_date": 1508994092, "last_edit_date": 1508994092, "creation_date": 1508987452, "answer_id": 46945266, "question_id": 46939699, "link": "https://stackoverflow.com/questions/46939699/how-can-i-use-c-template-argument-to-decide-which-type-of-member-is-in-a-class/46945266#46945266", "title": "How can I use C++ template argument to decide which type of member is in a class", "body": "<p>This is just an addition to Justin's solution. It's actually his anyway. The idea to use std::conditional was Fran\u00e7ois Andrieux's idea given in the comments. Something along these lines:</p>\n\n<pre><code>template &lt;typename P&gt;\nstruct vertex\n{\n    using vec3_t = std::conditional_t &lt;std::is_same_v&lt;float, P&gt;,\n        /*IF FLOAT*/     vec3,\n        /*OTHERWISE*/    std::conditional_t &lt;is_same_v&lt;double, P&gt;,\n        /*IF DOUBLE*/    dvec3,\n        /*IF INT*/       ivec3&gt;&gt;;\n\n    vec3_t position;\n    vec3_t normal;\n    //vec2_t texcoords; WILL HAVE TO TYPEDEF THIS AS WELL.\n};\n</code></pre>\n\n<p>Johannes Schaub has given two different solutions in the comments based on constexpr and decltype also.</p>\n"}, {"comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1509038649, "post_id": 46954679, "comment_id": 80868007, "body": "Why is the <code>Choose</code> needed? it seems to me like it <i>should</i> work without it (and without the ternaries)"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1509048861, "post_id": 46954679, "comment_id": 80873810, "body": "@Justin lambdas are not constexpr (as far as I&#39;m aware), so you can&#39;t directly put it as initializer. The chooser trick is explained here: <a href=\"http://www.artima.com/cppsource/foreach.html\" rel=\"nofollow noreferrer\">artima.com/cppsource/foreach.html</a>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1509048932, "post_id": 46954679, "comment_id": 80873853, "body": "Thought they were supposed to be constexpr in C++17"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1509048993, "post_id": 46954679, "comment_id": 80873887, "body": "@Justin Ah, you are right! Well, it didn&#39;t compile for me. Perhaps the compiler didn&#39;t support it yet or I made some mistake. So I guess you can actually remove all the Choose noise."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1509049279, "post_id": 46954679, "comment_id": 80874027, "body": "@Justin I retested it, and GCC / Clang accepts it without the Choose. Thanks for asking. I removed the confusing trick from the answer ."}], "tags": [], "owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "is_accepted": false, "score": 6, "last_activity_date": 1509049241, "last_edit_date": 1509049241, "creation_date": 1509021771, "answer_id": 46954679, "question_id": 46939699, "link": "https://stackoverflow.com/questions/46939699/how-can-i-use-c-template-argument-to-decide-which-type-of-member-is-in-a-class/46954679#46954679", "title": "How can I use C++ template argument to decide which type of member is in a class", "body": "<p>Here's an alternative</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct Type { typedef T type; };\n\ntemplate&lt;typename T&gt;\ninline constexpr Type&lt;T&gt; type{};\n\ntemplate &lt;typename P&gt;\nstruct Vertex\n{\n    static constexpr auto D3 = []{ \n        if constexpr(std::is_same_v&lt;P,float&gt;)\n            return type&lt;vec3&gt;;\n        else if constexpr(std::is_same_v&lt;P,double&gt;)\n            return type&lt;dvec3&gt;;\n        else if constexpr(std::is_same_v&lt;P,int&gt;)\n            return type&lt;ivec3&gt;;\n    }();\n\n    static constexpr auto D2 = []{ \n        if constexpr(std::is_same_v&lt;P,float&gt;)\n            return type&lt;vec2&gt;;\n        else if constexpr(std::is_same_v&lt;P,double&gt;)\n            return type&lt;dvec2&gt;;\n        else if constexpr(std::is_same_v&lt;P,int&gt;)\n            return type&lt;ivec2&gt;;\n    }();\n\n    typename decltype(D3)::type position;\n    typename decltype(D3)::type normal;\n    typename decltype(D2)::type texcoords;\n};\n</code></pre>\n\n<p>With a little bit of more effort on the <code>Type</code> template, you can improve the code of the lambdas quite a bit (perhaps you've seen boost hana, which follows this idea aswell)</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct Type {\n   typedef T type;   \n   friend constexpr bool operator==(Type, Type) {\n       return true;\n   }\n};\n\ntemplate&lt;typename T1, typename T2&gt;\nconstexpr bool operator==(Type&lt;T1&gt;, Type&lt;T2&gt;) {\n    return false;\n}\n\ntemplate&lt;typename T&gt;\ninline constexpr Type&lt;T&gt; type{};\n</code></pre>\n\n<p>Now it will not need <code>std::is_same_v</code> anymore </p>\n\n<pre><code>template &lt;typename P&gt;\nstruct Vertex\n{\n    static constexpr auto D3 = [](auto t) { \n        if constexpr(t == type&lt;float&gt;)\n            return type&lt;vec3&gt;;\n        else if constexpr(t == type&lt;double&gt;)\n            return type&lt;dvec3&gt;;\n        else if constexpr(t == type&lt;int&gt;)\n            return type&lt;ivec3&gt;;\n    }(type&lt;P&gt;);\n\n    static constexpr auto D2 = [](auto t) { \n        if constexpr(t == type&lt;float&gt;)\n            return type&lt;vec2&gt;;\n        else if constexpr(t == type&lt;double&gt;)\n            return type&lt;dvec2&gt;;\n        else if constexpr(t == type&lt;int&gt;)\n            return type&lt;ivec2&gt;;\n    }(type&lt;P&gt;);\n\n    typename decltype(D3)::type position;\n    typename decltype(D3)::type normal;\n    typename decltype(D2)::type texcoords;\n};\n</code></pre>\n\n<p>The ugly <code>decltype</code> writing could be fixed by using <code>auto</code> aswell</p>\n\n<pre><code>template&lt;auto &amp;t&gt;\nusing type_of = typename std::remove_reference_t&lt;decltype(t)&gt;::type;\n</code></pre>\n\n<p>So you can write</p>\n\n<pre><code>type_of&lt;D3&gt; position;\ntype_of&lt;D3&gt; normal;\ntype_of&lt;D2&gt; texcoords;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1509063095, "post_id": 46963425, "comment_id": 80878920, "body": "You&#39;re completely right. Gee I feel silly. I didn&#39;t realise you can instantiate the templated classes themselves, as I&#39;ve only used vec3, vec4, etc. They&#39;re typedeffed as something like highp_vec3, which is typedeffed as typedef tvec3&lt;float, highp&gt;. Thanks."}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": false, "score": 2, "last_activity_date": 1509050437, "creation_date": 1509050437, "answer_id": 46963425, "question_id": 46939699, "link": "https://stackoverflow.com/questions/46939699/how-can-i-use-c-template-argument-to-decide-which-type-of-member-is-in-a-class/46963425#46963425", "title": "How can I use C++ template argument to decide which type of member is in a class", "body": "<p>OP has mentioned in comments that they're using GML.</p>\n\n<p>GLM vectors are actually templates, so there is no need for intricate solutions:</p>\n\n<pre><code>template &lt;typename P&gt;\nstruct Vertex\n{\n     tvec3&lt;P&gt; position;\n     tvec3&lt;P&gt; normal;\n     tvec2&lt;P&gt; texcoords;\n};\n</code></pre>\n"}], "owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1690, "favorite_count": 5, "accepted_answer_id": 46939818, "answer_count": 4, "score": 11, "last_activity_date": 1509050437, "creation_date": 1508956301, "last_edit_date": 1508987015, "question_id": 46939699, "link": "https://stackoverflow.com/questions/46939699/how-can-i-use-c-template-argument-to-decide-which-type-of-member-is-in-a-class", "title": "How can I use C++ template argument to decide which type of member is in a class", "body": "<p>I would like to create a Vertex class, and would like to genericise it by being able to create a 32 bit float and 64 bit double version, and maybe int version. I would like to do this:</p>\n\n<pre><code>template &lt;typename P&gt;\nstruct Vertex\n{\n    if (typeid(P) == typeid(float))\n    {\n         vec3 position;\n         vec3 normal;\n         vec2 texcoords;\n    }\n    else if (typeid(P) == typeid(double))\n    {\n         dvec3 position; // This is a double vector\n         dvec3 normal;\n         dvec2 texcoords;\n    }\n    else if (typeid(P) == typeid(int))\n    {\n         ivec3 position; // This is an integer vector\n         ivec3 normal;\n         ivec2 texcoords;\n    }\n\n};\n</code></pre>\n\n<p>I don't think if statements aren't evaluated at compile-time, so this is just an illustration of what I would like to do. Is there any way to do this? Or do I have to specialise each type, or just rewrite all the different versions?</p>\n"}, {"tags": ["c++", "git", "visual-studio", "visual-studio-2015", "visual-studio-2017"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1508956100, "post_id": 46939549, "comment_id": 80826332, "body": "When opening a v140 project in VS 17, it prompts to convert the project to v141. You need to answer &quot;No&quot; and it won&#39;t ask again (need to have v140 toolset installed though). Everyone on the team should be on the same toolset or else you can&#39;t benefit from new features at all and it&#39;s a wild guess if your code still works in the old toolset."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1508956108, "post_id": 46939549, "comment_id": 80826336, "body": "This is a use case for switching to CMake and not putting project files in your version control at all. Although it would be simpler to just have everyone use the same version of Visual Studio."}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1508956158, "post_id": 46939549, "comment_id": 80826371, "body": "When writing your program source code let&#39;s say with the <code>most recent toolset</code> hopelessly you cannot predict what toolset will be released in the few next years."}, {"owner": {"reputation": 121, "user_id": 1824757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f43e3f4e858e4b714d8d97402027ad9?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Rodrigues", "link": "https://stackoverflow.com/users/1824757/andr%c3%a9-rodrigues"}, "edited": false, "score": 0, "creation_date": 1509383469, "post_id": 46939549, "comment_id": 80988149, "body": "But that&#39;s also true for most other things, from OS version to SDK version, etc. But I still prefer dependencies like <code>toolset &gt;= v140</code> than <code>toolset == v140</code>..."}], "answers": [{"tags": [], "owner": {"reputation": 5196, "user_id": 6501141, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UhrNj.jpg?s=128&g=1", "display_name": "LightCC", "link": "https://stackoverflow.com/users/6501141/lightcc"}, "is_accepted": false, "score": -1, "last_activity_date": 1508972997, "creation_date": 1508972997, "answer_id": 46943383, "question_id": 46939549, "link": "https://stackoverflow.com/questions/46939549/always-use-the-most-recent-toolset-available-in-visual-studio/46943383#46943383", "title": "Always use the most recent toolset available in Visual Studio", "body": "<p>Save 2 solution files, one <code>*_2015.sln</code>, and one <code>*_2017.sln</code>.</p>\n\n<p>Start out after this by figuring out the most efficient solution for manually updating only one of these whenever needed.  Then write a script to modify the one as to create the other.  Add that script to CI or build script, Git push script, or whatever.</p>\n\n<p>Anytime you find yourself uttering the words, \"I find myself having to constantly do x, y, z.\" you should think, \"How can I automate this?\", followed by figuring out one or more manual methods to complete the task, then choosing the easiest one to automate - especially when a task can be completed by changing text in a file...</p>\n\n<p>If you have CI set up, you should be able to tie such a script to trigger on any new commit.</p>\n\n<p>(sorry if this answer is too basic...)</p>\n"}], "owner": {"reputation": 121, "user_id": 1824757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f43e3f4e858e4b714d8d97402027ad9?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Rodrigues", "link": "https://stackoverflow.com/users/1824757/andr%c3%a9-rodrigues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1509022826, "creation_date": 1508955759, "last_edit_date": 1509022826, "question_id": 46939549, "link": "https://stackoverflow.com/questions/46939549/always-use-the-most-recent-toolset-available-in-visual-studio", "title": "Always use the most recent toolset available in Visual Studio", "body": "<p>I have a VC++ project that some people in the team open using VS2105 and others VS2017, but the former ones need to constantly edit the project to select v140 instead of v141 in order to be able to build. Is there a way to automatically select the most recent toolset available? I.e., in such a way that the VS2015 users use the v140 toolset automatically, and the VS2017 users use the v141 also automatically.</p>\n\n<p>One idea that comes to my mind would be to have two projects referring the same source-code files, each using a different toolset. But then, any change (e.g., add a new file or a new library to the project) would have to be done twice :(</p>\n\n<p>Another one could be a branch which only differs in the toolset specified, and constantly rebase as the master branch evolves, but then contributing back becomes clumsy :(</p>\n"}, {"tags": ["c++", "qt5", "qsqldatabase"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1509025476, "post_id": 46943406, "comment_id": 80859218, "body": "COpied from my makefile: QMAKE         = /usr/lib/i386-linux-gnu/qt5/bin/qmake"}, {"owner": {"reputation": 1584, "user_id": 2734675, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28b6516a9f1218cf03ad6125a78333e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ashif", "link": "https://stackoverflow.com/users/2734675/ashif"}, "reply_to_user": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1509060082, "post_id": 46943406, "comment_id": 80878198, "body": "If that is the case, you are using Qt5,  did you include #include &lt;QSqlError&gt; ?"}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1509101597, "post_id": 46943406, "comment_id": 80894030, "body": "I believe so ://"}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1509200817, "post_id": 46943406, "comment_id": 80928043, "body": "Please, anyone any suggestions??"}], "tags": [], "owner": {"reputation": 1584, "user_id": 2734675, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28b6516a9f1218cf03ad6125a78333e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ashif", "link": "https://stackoverflow.com/users/2734675/ashif"}, "is_accepted": false, "score": 0, "last_activity_date": 1508973106, "creation_date": 1508973106, "answer_id": 46943406, "question_id": 46939400, "link": "https://stackoverflow.com/questions/46939400/class-qsqlerror-has-no-member-nativeerrorcode/46943406#46943406", "title": "Class QSqlError has no member nativeErrorCode()", "body": "<p>I am not sure which OS you encounter this issue. However In most of the Linux OS Image, prebuild with Qt4, Even we build Qt5 libraries additionally, the system environment may use old Qt4 libraries to generate make files. This is very common if we are building Qt5 from source codes.  So it would be better you can try to execute qmake from Qt5 path. So the <em>Makefile</em> will be created to build for Qt5 libraries.  </p>\n\n<p>In order to confirm, Open the <em>Makefile</em> and check the variable <em>QMAKE</em> is refering to Qt5 or Qt4 libraries.</p>\n\n<p>I am updating this from my system for your reference, <strong>\"QMAKE  = /home/user1/Qt5.6.0/5.6/gcc_64/bin/qmake\"</strong>  From this, It is clear that Makefile is using Qt5 libraries and further compilation, Qt5 libraries will be used to compile my application source code.</p>\n"}], "owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1508973106, "creation_date": 1508955271, "question_id": 46939400, "link": "https://stackoverflow.com/questions/46939400/class-qsqlerror-has-no-member-nativeerrorcode", "title": "Class QSqlError has no member nativeErrorCode()", "body": "<p>I have been struggling with this problem for quite a while, and unfortunately neither my own reasoning, nor google search helped me. In simple terms, I am trying to use nativeErrorCode() function with QSqlError class. Compiler says: mainwindow.cpp:43:86: error: \u2018class QSqlError\u2019 has no member named \u2018nativeErrorCode\u2019. This is the line that it references (to be exact, two lines):</p>\n\n<pre><code>errorCreatingBooksTableMessageBox.setDetailedText((query.lastError().nativeErrorCode().isEmpty()) ?\n                query.lastError().text() : query.lastError().nativeErrorCode() + \"\\n\" + query.lastError().text());\n</code></pre>\n\n<p>Problem seems trivial, but I can't find an answer on my own. #include  is in mainwindow.h file. After some research, I noticed other people on other forums suggesting that compiler uses wrong version of the header file, which would seem very likely to happen since function nativeErrorCode() was introduced in Qt5. I tried to move qt4 folder to trash, but still, no effect. Any help would be appriciated</p>\n"}, {"tags": ["c++", "matlab", "mex"], "answers": [{"comments": [{"owner": {"reputation": 217, "user_id": 4564152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bea80813f05143fd5302d12e2a4d41a0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/4564152/matt"}, "edited": false, "score": 0, "creation_date": 1509026105, "post_id": 46940504, "comment_id": 80859710, "body": "Thanks, but I don&#39;t think the mexMakePersistent methods will work on non-Matlab objects (which I need to interface with).  I believe simply declaring the needed variables as static will work, though I haven&#39;t yet tried with this case."}, {"owner": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "reply_to_user": {"reputation": 217, "user_id": 4564152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bea80813f05143fd5302d12e2a4d41a0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/4564152/matt"}, "edited": false, "score": 1, "creation_date": 1509027340, "post_id": 46940504, "comment_id": 80860688, "body": "I also found <a href=\"https://www.mathworks.com/matlabcentral/answers/783-i-have-a-c-class-how-can-i-interface-to-it-through-a-matlab-class#answer_192044\" rel=\"nofollow noreferrer\">this on Mathworks Answers</a>.  It references a GitHub Repo.  The design goals sound more closely to what you are looking for.    It does sound a lot more complicated than decarling the variables as static."}], "tags": [], "owner": {"reputation": 3271, "user_id": 1106634, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3BqOO.png?s=128&g=1", "display_name": "Aero Engy", "link": "https://stackoverflow.com/users/1106634/aero-engy"}, "is_accepted": true, "score": 2, "last_activity_date": 1508959247, "creation_date": 1508959247, "answer_id": 46940504, "question_id": 46939226, "link": "https://stackoverflow.com/questions/46939226/interacting-with-c-objects-through-mex-files/46940504#46940504", "title": "Interacting with C++ objects through Mex files", "body": "<p>Not sure if possible between Mex functions but you can make some things persistent between calls to the same mex routine.  </p>\n\n<p>See documentation for:</p>\n\n<ul>\n<li><p><a href=\"https://www.mathworks.com/help/matlab/apiref/mexmakememorypersistent.html\" rel=\"nofollow noreferrer\">mexMakeMemoryPersistent</a></p></li>\n<li><p><a href=\"https://www.mathworks.com/help/matlab/apiref/mexmakearraypersistent.html\" rel=\"nofollow noreferrer\">mexMakeArrayPersistent</a></p></li>\n</ul>\n\n<p>Also see this answer on the Mathworks site:\n<a href=\"https://www.mathworks.com/matlabcentral/answers/103891-how-can-i-make-memory-persistent-between-calls-to-a-mex-file-in-matlab\" rel=\"nofollow noreferrer\">How can I make memory persistent between calls to a MEX-file in MATLAB</a></p>\n\n<p>I have not done this myself so can't give more specific help but this might point you in the right direction.</p>\n"}], "owner": {"reputation": 217, "user_id": 4564152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bea80813f05143fd5302d12e2a4d41a0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/4564152/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "accepted_answer_id": 46940504, "answer_count": 1, "score": 5, "last_activity_date": 1508959247, "creation_date": 1508954643, "last_edit_date": 1508955369, "question_id": 46939226, "link": "https://stackoverflow.com/questions/46939226/interacting-with-c-objects-through-mex-files", "title": "Interacting with C++ objects through Mex files", "body": "<p>I'm a bit stuck on if my current goal is feasible, and if so, how to do this.  I'm hoping to interact with some C++ classes through a Mex file, but I would need the instances of the objects I am accessing to be persistent across calls from different Mex functions.  For example, suppose I do the following within an initialization Mex file:</p>\n\n<pre><code>void mexFunction (int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])\n{\n    size_t nCats = (size_t) *mxGetPr(prhs[0]);\n\n    std::vector&lt;Cat&gt; cats;\n    for(size_t i = 0; i &lt;nCats; i++){\n         cats[i] = Cat(/* arguments to constructor*/);\n    }\n}\n</code></pre>\n\n<p>So I've initialized my Cat objects from my external C++ code.  Now, later down the line, I need to update info about my Cat objects, so in a different Mex file I have</p>\n\n<pre><code>void mexFunction (int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])\n{\n\n     for(size_t i = 0; i &lt; nCats; i++){\n          cats[i].feed(/*parameters to feed method*/);\n     }\n}\n</code></pre>\n\n<p>Here are my questions: </p>\n\n<ol>\n<li><p>How would I make this std::vector persist across calls to <em>different</em> Mex files?  There isn't a way to return non-Matlab types from Mex files (that I'm aware of), and Mathworks says that local variables within Mex functions are generally garbage collected when the function returns, which I do not want.  How can I call the same std::vector with the stored objects I am interested in across different functions?   Or even calls to the same function?</p></li>\n<li><p>Is there a better way to do this with Matlab?  Essentially I'm trying to use Matlab to drive some C++ code, which does the heavy lifting, and then brings it all back to Matlab for analysis.  The trouble is that the C++ code is already written, and I need to try to bend Matlab to fit those classes.</p></li>\n</ol>\n"}, {"tags": ["c++", "mingw", "sdl", "segmentation-fault"], "comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1508968906, "post_id": 46939001, "comment_id": 80832887, "body": "In gdb you can use the print command to display values of variables and expressions.  You may want to look at this:L <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 473, "user_id": 1715586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc2aa29013b4d0aed59b956b06320b0?s=128&d=identicon&r=PG", "display_name": "M4rc", "link": "https://stackoverflow.com/users/1715586/m4rc"}, "edited": false, "score": 0, "creation_date": 1508979368, "post_id": 46939001, "comment_id": 80835791, "body": "While you handle if <code>g_pWindow</code> is not <code>NULL</code> you do not handle if <code>g_pWindow</code> <i>IS</i> <code>NULL</code>. My suspicion is that it&#39;s returning <code>NULL</code> and that is carrying over through the rest of the program. Which could be something such as parameters, to permissions."}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 1, "creation_date": 1509016793, "post_id": 46939001, "comment_id": 80852836, "body": "Use <code>backtrace</code> (or <code>bt</code>) gdb command to get stack trace add its output to question. Which SDL version do you use? Are you sure you have correct lib/dll for mingw (and not, say, MSVC)? Can you create software renderer (with <code>SDL_RENDERER_SOFTWARE</code>) and if not, is stacktrace different in that case?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6247541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef91e506d5294dbfcf0b28e222d070cb?s=128&d=identicon&r=PG&f=1", "display_name": "Hagartinger", "link": "https://stackoverflow.com/users/6247541/hagartinger"}, "edited": false, "score": 2, "creation_date": 1509015451, "post_id": 46939512, "comment_id": 80851937, "body": "That couldn&#39;t be the case because of if statement which prevents this call from using nullptr. I suppose the problem was that I didn&#39;t had drivers for gpu on my machine. I will try to install it later and try again."}], "tags": [], "owner": {"reputation": 2192, "user_id": 3817790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uosws.jpg?s=128&g=1", "display_name": "Naseef Chowdhury", "link": "https://stackoverflow.com/users/3817790/naseef-chowdhury"}, "is_accepted": false, "score": 0, "last_activity_date": 1508955634, "creation_date": 1508955634, "answer_id": 46939512, "question_id": 46939001, "link": "https://stackoverflow.com/questions/46939001/sigsegv-error-in-c-sdl/46939512#46939512", "title": "SIGSEGV error in c++ SDL", "body": "<p>You are getting Segmentation fault because of this line - </p>\n\n<pre><code>g_pRenderer = SDL_CreateRenderer(g_pWindow, -1, 0);\n</code></pre>\n\n<p>The reason is <code>g_pWindow</code> is <code>NULL</code>. As you have initialized it with <code>NULL</code> in this line - </p>\n\n<pre><code>SDL_Window* g_pWindow = 0;\n</code></pre>\n\n<p>You need to provide valid pointer of <code>SDL_Window</code>.</p>\n\n<p>For details, please check <a href=\"https://wiki.libsdl.org/SDL_CreateRenderer\" rel=\"nofollow noreferrer\">this.</a></p>\n"}], "owner": {"reputation": 1, "user_id": 6247541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef91e506d5294dbfcf0b28e222d070cb?s=128&d=identicon&r=PG&f=1", "display_name": "Hagartinger", "link": "https://stackoverflow.com/users/6247541/hagartinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508981507, "creation_date": 1508953898, "last_edit_date": 1508981507, "question_id": 46939001, "link": "https://stackoverflow.com/questions/46939001/sigsegv-error-in-c-sdl", "title": "SIGSEGV error in c++ SDL", "body": "<p>This code is making SIGSEGV error and I couldn't puzzle out why. </p>\n\n<pre><code>#include&lt;SDL.h&gt;\n\nSDL_Window* g_pWindow = 0;\nSDL_Renderer* g_pRenderer = 0;\nint main(int argc, char* args[])\n{\n    // initialize SDL\n    if(SDL_Init(SDL_INIT_EVERYTHING) &gt;= 0)\n    {\n       // if succeeded create our window\n       g_pWindow = SDL_CreateWindow(\"Chapter 1: Setting up SDL\",\n       SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED,640, 480,SDL_WINDOW_SHOWN);\n       // if the window creation succeeded create our renderer\n       if(g_pWindow != 0)\n       {\n           g_pRenderer = SDL_CreateRenderer(g_pWindow, -1, 0);\n       }\n    }\n    else\n    {\n            return 1; // sdl could not initialize\n    }\n    // everything succeeded lets draw the window\n    // set to black // This function expects Red, Green, Blue and\n    // Alpha as color values\n    SDL_SetRenderDrawColor(g_pRenderer, 0, 0, 0, 255);\n    // clear the window to black\n    SDL_RenderClear(g_pRenderer);\n    // show the window\n    SDL_RenderPresent(g_pRenderer);\n    // set a delay before quitting\n    SDL_Delay(5000);\n    // clean up SDL\n    SDL_Quit();\n    return 0;\n}\n</code></pre>\n\n<p>This code is from \"SDL game development\" book by Sean Mitchell. But instead of Visual Studio as suggested in the book I'm using mingw. I've configured everything as described in lazyfoo's tutorials: <a href=\"http://lazyfoo.net/tutorials/SDL/01_hello_SDL/windows/mingw/index.php\" rel=\"nofollow noreferrer\">http://lazyfoo.net/tutorials/SDL/01_hello_SDL/windows/mingw/index.php</a>\nBtw his \"Hello SDL\" works fine.\nHere is my Makefile:</p>\n\n<pre><code>#OBJS specifies which files to compile as part of the project\nOBJS = main.cpp\n\n#OBJ_NAME specifies the name of our exectuable\nOBJ_NAME = hello\n\n#This is the target that compiles our executable\nall : $(OBJS)\n    g++ $(OBJS) -IC:\\Artur\\Projects\\SDL\\include\\SDL2 -LC:\\Artur\\Projects\\SDL\\lib -w  -lmingw32 -lSDL2main -lSDL2 -o $(OBJ_NAME) -g\n</code></pre>\n\n<p>And what I've found with gdb:</p>\n\n<pre><code>(gdb) run\nStarting program: C:\\Artur\\Projects\\CPP\\Snake/hello.exe\n[New Thread 4800.0x45c]\n[New Thread 4800.0xc7c]\n[New Thread 4800.0xc48]\n[New Thread 4800.0xa8c]\n[New Thread 4800.0xbc0]\n[New Thread 4800.0x1350]\n\nBreakpoint 1, SDL_main (argc=argc@entry=1, args=args@entry=0x3b0008)\n    at main.cpp:17\n17      g_pRenderer = SDL_CreateRenderer(g_pWindow, -1, 0);\n(gdb) s\n[New Thread 4800.0xf98]\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x00000000 in ?? &lt;&gt;\n</code></pre>\n\n<p>So I know that the problem in SDL_CreateRenderer function but I don't know what's wrong.</p>\n"}, {"tags": ["c++", "pointers", "char", "getline"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1508954016, "post_id": 46938932, "comment_id": 80825162, "body": "First I recommend you read <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a>. Then you should remember that <code>char</code> strings in C++ are really called <b><i>null-terminate</b> byte strings</i>. The null-terminator (not to be confused with a null pointer) is important. Also remember that the memory you allocate will <i>not</i> be initialized, and even reading it leads to <i>undefined behavior</i>. Lastly, you probably have a few memory leaks here and there."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1508954422, "post_id": 46938932, "comment_id": 80825399, "body": "<code>sizeof name</code> what value do you expect?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 3, "creation_date": 1508954557, "post_id": 46938932, "comment_id": 80825474, "body": "<i>i&#39;m not at liberty to use std::string</i> YAIT (yet another incompetent teacher)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1508954683, "post_id": 46938932, "comment_id": 80825533, "body": "It doesn&#39;t make sense that you are not allowed to use <code>std::string</code> but you are allowed to use <code>std::stringstream</code> which is based on <code>std:: string</code>"}, {"owner": {"reputation": 11, "user_id": 6706417, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/748d042868f44d371a13e1c4ae3300ad?s=128&d=identicon&r=PG&f=1", "display_name": "Multi-Cab", "link": "https://stackoverflow.com/users/6706417/multi-cab"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1508954894, "post_id": 46938932, "comment_id": 80825664, "body": "Why is this marked -1, the question is clear. @Someprogrammerdude i know chars are called null-terminate byte strings. That why couldn&#39;t use std::string and just convert it directly to with <code>c_str()</code> so im not working with a string. the memory leak are not in here because that part is processed else where. it get cleaned up when it should be, it&#39;s a getter after all. everything that is imported get initialized, to what far are you referring exectly? @ manni, the maximum capacity of the var type name has."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1508955013, "post_id": 46938932, "comment_id": 80825728, "body": "And where do you free <code>portLine</code>? And where do you fill or read into <code>portLine</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1508955069, "post_id": 46938932, "comment_id": 80825758, "body": "<code>sizeof name</code> is the size of a pointer in byte."}, {"owner": {"reputation": 11, "user_id": 6706417, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/748d042868f44d371a13e1c4ae3300ad?s=128&d=identicon&r=PG&f=1", "display_name": "Multi-Cab", "link": "https://stackoverflow.com/users/6706417/multi-cab"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1508955093, "post_id": 46938932, "comment_id": 80825773, "body": "@RemyLebeau the rule is to not use containers, <code>std::string</code> is considered as. stringstream is likely the same but i&#39;m first processing the logic before handle the type rules, problem is with std::string instead of char* it is working when using std::getline instead <code>var.getline(dest, size)</code>."}, {"owner": {"reputation": 11, "user_id": 6706417, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/748d042868f44d371a13e1c4ae3300ad?s=128&d=identicon&r=PG&f=1", "display_name": "Multi-Cab", "link": "https://stackoverflow.com/users/6706417/multi-cab"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1508955304, "post_id": 46938932, "comment_id": 80825903, "body": "@Someprogrammerdude the filereading is working, i know that because with std::string it is working. but i will add just to make the way it works clear. @ manni66, might be but that&#39;s not solution to the issue here, even if i change it to 100 (the given size) or something else it&#39;s still not gonna work."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1508955477, "post_id": 46938932, "comment_id": 80826006, "body": "How could the reading be working since you never even read from <code>stream</code>?"}, {"owner": {"reputation": 11, "user_id": 6706417, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/748d042868f44d371a13e1c4ae3300ad?s=128&d=identicon&r=PG&f=1", "display_name": "Multi-Cab", "link": "https://stackoverflow.com/users/6706417/multi-cab"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1508956340, "post_id": 46938932, "comment_id": 80826466, "body": "@Someprogrammerdude magic? seriously I don&#39;t know how it works but whenever i put a breakpoint and i see the content of the file i&#39;m glad. this it literally the code i have, so there nothing i&#39;m hiding from you. this is how it works, the stuff behind it i don&#39;t know."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1508956500, "post_id": 46938932, "comment_id": 80826549, "body": "@Multi-Cab: the code you showed never reads ANYTHING from <code>stream</code>, so there is no possible way you can be seeing the file data in your buffers"}, {"owner": {"reputation": 11, "user_id": 6706417, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/748d042868f44d371a13e1c4ae3300ad?s=128&d=identicon&r=PG&f=1", "display_name": "Multi-Cab", "link": "https://stackoverflow.com/users/6706417/multi-cab"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1508957074, "post_id": 46938932, "comment_id": 80826890, "body": "@Someprogrammerdude maybe it&#39;s the difference between ifstream and istream but i can garantee you there is no other part. it&#39;s like this and it compiles correctly, breakpoints and hover are showing the correct content."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6706417, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/748d042868f44d371a13e1c4ae3300ad?s=128&d=identicon&r=PG&f=1", "display_name": "Multi-Cab", "link": "https://stackoverflow.com/users/6706417/multi-cab"}, "edited": false, "score": 0, "creation_date": 1508956671, "post_id": 46939368, "comment_id": 80826639, "body": "Thanks for your support and explanation i got it working for the most part now at the end it crashes but that is in different section i gotta fix. In relation to the string, i find it ridiculous aswell but nothing i can do about it unfortunately. the container thing i get because it makes sure the student understands the logic behind pointers and stack &amp; heap and that kind of stuff but the std::string thing was just &quot;isn&#39;t that a container aswell? oh yeah you&#39;re right, you can&#39;t use that aswell&quot;. so no logic behind it and doesn&#39;t teach anything at all besides anger management."}, {"owner": {"reputation": 11, "user_id": 6706417, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/748d042868f44d371a13e1c4ae3300ad?s=128&d=identicon&r=PG&f=1", "display_name": "Multi-Cab", "link": "https://stackoverflow.com/users/6706417/multi-cab"}, "edited": false, "score": 0, "creation_date": 1508958278, "post_id": 46939368, "comment_id": 80827607, "body": "The original answers was more related. as my previous comment suggest, this part of the course wants to let the student/me learn memory management, so smart pointers are not allowed. For some reason I get memory leaks but I will be able to solve those. Again thanks for your solution(s) provided."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 11, "user_id": 6706417, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/748d042868f44d371a13e1c4ae3300ad?s=128&d=identicon&r=PG&f=1", "display_name": "Multi-Cab", "link": "https://stackoverflow.com/users/6706417/multi-cab"}, "edited": false, "score": 0, "creation_date": 1508961733, "post_id": 46939368, "comment_id": 80829485, "body": "I reverted the code back to using raw <code>char*</code> pointers, but I kept the other code in as extra suggestions."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1508961922, "post_id": 46939368, "comment_id": 80829588, "body": "++ for effort. I would say that emphasising manual memory management in a C++ course is rather contrary to the point of the language... to me, that&#39;s something that should be taught later, and perhaps only if the student expresses an interest in using those facilities, because for some reason the RAII classes of the stdlib don&#39;t fulfil their needs. For most people, the stdlib does what&#39;s needed, and they should be taught more useful things, IMO."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508962468, "post_id": 46939368, "comment_id": 80829861, "body": "@underscore_d: yes, many agree that the STL should be taught first as it is core to the C++ standard, and then lower-level techniques should be taught later on as more advanced topics like algorithm design, optimization,etc."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1508961687, "last_edit_date": 1508961687, "creation_date": 1508955121, "answer_id": 46939368, "question_id": 46938932, "link": "https://stackoverflow.com/questions/46938932/read-a-file-with-only-char-pointers-in-c/46939368#46939368", "title": "Read a file with only char pointers in c++", "body": "<p>You are not populating <code>portLine</code> with any data.  In fact, you are not reading any data from <code>stream</code> at all.</p>\n\n<p>You are misusing <code>eof()</code>.  The <code>eofbit</code> flag is not updated until AFTER a read operation is attempted first.  So you must read before elavulating <code>eof()</code>.</p>\n\n<p>You are leaking your <code>portLine</code> and <code>name</code> buffers.  And worse, since you are not allowed to use <code>std::string</code>, that implies that the <code>Port::name</code> member is a <code>char*</code> pointer, which means you have (potentially) multiple <code>Port</code> objects pointing at the same physical buffer in memory.  If <code>Port</code> tries to free that buffer later on, such as in its destructor, you are going to have memory errors.</p>\n\n<p>Try something more like this instead:</p>\n\n<pre><code>PortsContainer game::ParsePort(std::istream&amp; stream)\n{\n    if (!stream)\n        throw std::system_error(Error::STREAM_ERROR);\n\n    PortsContainer ports;\n\n    bool passFirstRow = false;\n\n    // better would be to use std::unique_ptr&lt;char[]&gt;, std::vector&lt;char&gt;,\n    // or std::string instead so the memory is freed automatically ...\n    char *portLine = new char[1000000];\n\n    int i = 0;\n\n    do\n    {\n        if (!stream.getline(portLine, 1000000))\n        {\n            delete[] portLine; // &lt;-- free the buffer for line data...\n            throw std::system_error(Error::STREAM_ERROR);\n        }\n\n        if ((stream.gcount() == 0) || (portLine[0] == '#'))\n            continue;\n\n        if (!passFirstRow)\n        {\n            std::istringstream iss(portLine);\n\n            // better would be to use std::unique_ptr&lt;char[]&gt;, std::vector&lt;char&gt;,\n            // or std::string instead so the memory is freed automatically ...\n            char* name = new char[100];\n\n            while (iss.getline(name, 100, ';'))\n            {\n                if (iss.gcount() == 0) continue;\n\n                Port *port = new Port();\n                port-&gt;name = name; // &lt;-- assumes ownership is transferred!\n                ports.addItem(port);\n                name = new char[100]; // &lt;-- have to reallocate a new buffer each time!\n            }\n            delete[] name; // &lt;-- free the last buffer not used...\n            passFirstRow = true;\n        } else {\n            ++i;\n        }\n    }\n    while (!stream.eof());\n\n    delete[] portLine; // &lt;-- free the buffer for line data...\n\n    return ports;\n}\n\nPortsContainer game::ParsePort(std::istream&amp; stream, std::error_code&amp; errorBuffer)\n{\n    try\n    {\n        return ParsePort(stream);\n    }\n    catch (const std::system_error &amp;exception)\n    {\n        errorBuffer = exception.code();\n        return PortsContainer(); // &lt;-- don't forget to return something!\n    }\n}\n\nPortsContainer game::GetAvailablePorts()\n{\n    std::ifstream stream(\"./ports.csv\");\n    std::error_code errorBuffer;\n    return ParsePort(stream, errorBuffer); // &lt;-- no need to check errorBuffer before returning!\n}\n</code></pre>\n\n<p>however, I strongly suggest you using the STL smart pointers to help ensure safer memory management:</p>\n\n<pre><code>PortsContainer game::ParsePort(std::istream&amp; stream)\n{\n    if (!stream)\n        throw std::system_error(Error::STREAM_ERROR);\n\n    PortsContainer ports;\n\n    bool passFirstRow = false;\n\n    // since you are using std::error_code, that means you are\n    // using C++11 or later, so use std::unique_ptr to ensure\n    // safe memory management...\n    std::unique_ptr&lt;char[]&gt; portLine(new char[1000000]);\n\n    int i = 0;\n\n    do\n    {\n        if (!stream.getline(portLine.get(), 1000000))\n            throw std::system_error(Error::STREAM_ERROR);\n\n        if ((stream.gcount() == 0) || (portLine[0] == '#'))\n            continue;\n\n        if (!passFirstRow)\n        {\n            std::istringstream iss(portLine.get());\n\n            // use std::unique_ptr here, too...\n            std::unique_ptr&lt;char[]&gt; name(new char[100]);\n\n            while (iss.getline(name.get(), 100, ';'))\n            {\n                if (iss.gcount() == 0) continue;\n\n                // use std::unique_ptr here, too...\n                std::unique_ptr&lt;Port&gt; port(new Port);\n                port-&gt;name = name.release(); // &lt;-- assumes ownership is transferred!\n                                             // better to make Port::name use std::unique_ptr&lt;char[]&gt; and then std::move() ownership of name to it...\n                ports.addItem(port.get());\n                port.release();\n\n                name.reset(new char[100]); // &lt;-- have to reallocate a new buffer each time!\n            }\n            passFirstRow = true;\n        } else {\n            ++i;\n        }\n    }\n    while (!stream.eof());\n\n    return ports;\n}\n</code></pre>\n\n<p>Though, using <code>std::string</code> would be the best option:</p>\n\n<pre><code>PortsContainer game::ParsePort(std::istream&amp; stream)\n{\n    if (!stream)\n        throw std::system_error(Error::STREAM_ERROR);\n\n    PortsContainer ports;\n\n    bool passFirstRow = false;\n    std::string portLine;\n    int i = 0;\n\n    while (std::getline(stream, portLine))\n    {\n        if (portLine.empty() || (portLine[0] == '#'))\n            continue;\n\n        if (!passFirstRow)\n        {\n            std::istringstream iss(portLine);\n            std::string name;\n\n            while (std::getline(iss, name, ';'))\n            {\n                if (name.empty()) continue;\n\n                std::unique_ptr&lt;Port&gt; port(new Port);\n                port-&gt;name = name; // &lt;-- make Port::name be std::string as well!\n                ports.addItem(port.get());\n                port.release();\n            }\n            passFirstRow = true;\n        } else {\n            ++i;\n        }\n    }\n\n    if (!stream)\n        throw std::system_error(Error::STREAM_ERROR);\n\n    return ports;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6706417, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/748d042868f44d371a13e1c4ae3300ad?s=128&d=identicon&r=PG&f=1", "display_name": "Multi-Cab", "link": "https://stackoverflow.com/users/6706417/multi-cab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 1, "accepted_answer_id": 46939368, "answer_count": 1, "score": -2, "last_activity_date": 1508961687, "creation_date": 1508953651, "last_edit_date": 1508955399, "question_id": 46938932, "link": "https://stackoverflow.com/questions/46938932/read-a-file-with-only-char-pointers-in-c", "title": "Read a file with only char pointers in c++", "body": "<p>I need to read a file content into certain objects, unfortunately i'm not at liberty to use std::string and thereby have to use char pointers.\nHowever when i do this i get weird signs coming directly from the memory, the <a href=\"https://stackoverflow.com/questions/19080313/char-pointer-giving-me-some-really-strange-characters\">solution</a> to that is however not working. \nSo i rebuilded by using getline directly from the istream instead of the std library, but the same happens.\nHow can i read the file correctly without making use of std::string.</p>\n\n<pre><code>PortsContainer game::ParsePort(std::istream&amp; stream)\n{\n    PortsContainer ports;\n\n    bool passFirstRow = false;\n\n    char* portLine = new char[1000000];\n    int i = 0;\n    while (!stream.eof())\n    {\n        if (!stream)\n            throw std::system_error(Error::STREAM_ERROR);\n\n        if (portLine[0] == '\\0' || portLine == nullptr || portLine[0] == '#')\n            continue;\n\n        std::stringstream ss(portLine);\n\n        if (!passFirstRow) {\n            char* name = new char[100];\n            while (!ss.eof()) {\n                ss.getline(name, sizeof name, ';');\n                Port* port = new Port();\n                //port-&gt;name = const_cast&lt;char*&gt;(name);\n                port-&gt;name = const_cast&lt;char*&gt;(name);\n                ports.addItem(port);\n            }\n\n            passFirstRow = true;\n        } else {\n            i++;\n        }\n\n        if (!stream)\n            throw std::system_error(Error::STREAM_ERROR);\n    }\n\n    return ports;\n}\n\nPortsContainer game::ParsePort(std::istream&amp; stream, std::error_code&amp; errorBuffer)\n{\n    try\n    {\n        return ParsePort(stream);\n    }\n    catch (std::system_error exception)\n    {\n        errorBuffer = exception.code();\n    }\n}\n\nPortsContainer game::GetAvailablePorts()\n{\n    PortsContainer ports;\n\n    std::ifstream stream(\"./ports.csv\");\n\n    std::error_code errorBuffer;\n    ports = ParsePort(stream, errorBuffer);\n    if (errorBuffer)\n        return PortsContainer();\n\n    return ports;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 15006, "user_id": 2797826, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3bab2302a0d633206bdcfca569f666c8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan Brindle", "link": "https://stackoverflow.com/users/2797826/tristan-brindle"}, "edited": false, "score": 0, "creation_date": 1508958418, "post_id": 46938763, "comment_id": 80827690, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords\">Where and why do I have to put the &quot;template&quot; and &quot;typename&quot; keywords?</a>"}, {"owner": {"reputation": 1026, "user_id": 807307, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/decd3ea69d3387db2ffb5394ab7abebd?s=128&d=identicon&r=PG", "display_name": "Giovanni Mascellani", "link": "https://stackoverflow.com/users/807307/giovanni-mascellani"}, "reply_to_user": {"reputation": 15006, "user_id": 2797826, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3bab2302a0d633206bdcfca569f666c8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan Brindle", "link": "https://stackoverflow.com/users/2797826/tristan-brindle"}, "edited": false, "score": 0, "creation_date": 1508963345, "post_id": 46938763, "comment_id": 80830277, "body": "@TristanBrindle I&#39;m not sure of how these cases are handled, but the question is not a duplicate: maybe, in a sense, the answers convey the same information, but the questions are different; OP in the question you link already knows what the &quot;template&quot; keyword is and asks precisations on it; I did not know what it is."}], "answers": [{"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 2, "last_activity_date": 1508953897, "last_edit_date": 1508953897, "creation_date": 1508953263, "answer_id": 46938811, "question_id": 46938763, "link": "https://stackoverflow.com/questions/46938763/error-when-passing-template-parameters-to-inner-structure/46938811#46938811", "title": "Error when passing template parameters to inner structure", "body": "<p>In this context <code>A2</code> is actually a shorthand for <code>B&lt;T&gt;::A2</code>. Since <code>A2</code> is a type dependent on the template parameter <code>T</code>, you have to refer to its member templates with an explicit <code>template</code> keyword</p>\n\n<pre><code>a2.template fun&lt; true &gt;();\n</code></pre>\n\n<p><code>A</code> is not a dependent type and its member templates can be referred to with \"plain\" syntax without that extra <code>template</code> keyword.</p>\n\n<p>See 14.2/4 and a similar example there</p>\n\n<blockquote>\n  <p><strong>14.2 Names of template specializations [temp.names]</strong>  </p>\n  \n  <p><strong>4</strong> When the name of a member template specialization appears after <code>.</code> or <code>-&gt;</code> in a <em>postfix-expression</em> or after a <em>nested-name-specifier</em> in a <em>qualified-id</em>, and the object expression of the <em>postfix-expression</em> is type-dependent or the <em>nested-name-specifier</em> in the <em>qualified-id</em> refers to a dependent type, but the name is not a member of the current instantiation (14.6.2.1), the member template name must be prefixed by the keyword <code>template</code>.\n  Otherwise the name is assumed to name a non-template. [ Example:  </p>\n\n<pre><code>struct X { \n   template&lt;std::size_t&gt; X* alloc();\n   template&lt;std::size_t&gt; static X* adjust();\n };\n template&lt;class T&gt; void f(T* p) {\n   T* p1 = p-&gt;alloc&lt;200&gt;();          // ill-formed: &lt; means less than\n   T* p2 = p-&gt;template alloc&lt;200&gt;(); // OK: &lt; starts template argument list\n   T::adjust&lt;100&gt;();                 // ill-formed: &lt; means less than\n   T::template adjust&lt;100&gt;();        // OK: &lt; starts template argument list\n }\n</code></pre>\n  \n  <p>\u2014end example ]</p>\n</blockquote>\n"}], "owner": {"reputation": 1026, "user_id": 807307, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/decd3ea69d3387db2ffb5394ab7abebd?s=128&d=identicon&r=PG", "display_name": "Giovanni Mascellani", "link": "https://stackoverflow.com/users/807307/giovanni-mascellani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 46938811, "answer_count": 1, "score": 0, "last_activity_date": 1508953897, "creation_date": 1508953097, "question_id": 46938763, "link": "https://stackoverflow.com/questions/46938763/error-when-passing-template-parameters-to-inner-structure", "title": "Error when passing template parameters to inner structure", "body": "<p>I try to compile the following C++ code:</p>\n\n<pre><code>struct A {\n    template&lt; bool x &gt;\n    bool fun() {\n        return x;\n    }\n};\n\ntemplate&lt; typename T &gt;\nstruct B {\n    struct A2 {\n        template&lt; bool x &gt;\n        bool fun() {\n            return x;\n        }\n    };\n\n    void test() {\n        A a;\n        A2 a2;\n        a.fun&lt; true &gt;();\n        a2.fun&lt; true &gt;();\n    }\n};\n</code></pre>\n\n<p>The compiler complains that:</p>\n\n<pre><code>source_file.cpp: In member function \u2018void B&lt;T&gt;::test()\u2019:\nsource_file.cpp:22:24: error: expected primary-expression before \u2018)\u2019 token\n         a2.fun&lt; true &gt;();\n                        ^\n</code></pre>\n\n<p>However the line just above (<code>a.fun&lt; true &gt;()</code>) compiles just fine. Interestingly, if I remove the line <code>template&lt; typename T &gt;</code>, then compilation succeeds. However that line is required for reasons that do not appear from the minimal (not) working example. What is wrong here?</p>\n"}, {"tags": ["c++", "recursion"], "answers": [{"tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": false, "score": 2, "last_activity_date": 1508953199, "creation_date": 1508953199, "answer_id": 46938798, "question_id": 46938761, "link": "https://stackoverflow.com/questions/46938761/c-recursive-iterable-access/46938798#46938798", "title": "c++ recursive iterable access", "body": "<p>You want <code>recursive_function(std::begin(*rai))</code>.</p>\n"}], "owner": {"reputation": 4240, "user_id": 2886575, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mZtIe.jpg?s=128&g=1", "display_name": "Him", "link": "https://stackoverflow.com/users/2886575/him"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508953199, "creation_date": 1508953094, "question_id": 46938761, "link": "https://stackoverflow.com/questions/46938761/c-recursive-iterable-access", "title": "c++ recursive iterable access", "body": "<p>I am writing a recursive function that takes an iterable of an iterable of an.... of some base type.  Signature something like <code>&lt;template typename RandomAccessIterator&gt; void recursive_function(RandomAccessIterator rai);</code>My problem is that if an intermediate iterable is, say, a vector, I will need some code like <code>recursive_function((*rai).begin())</code>, whereas if an intermediate iterable is an array, I would use <code>recursive_function(*rai)</code></p>\n\n<p>Is there some way to make these two things compatible with each other?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1508956007, "post_id": 46938741, "comment_id": 80826273, "body": "<i>&quot;in my implementation file&quot;</i>. template&#39;s places are in header in general."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1508956180, "post_id": 46938741, "comment_id": 80826385, "body": "Unclear what you do: template declaration doesn&#39;t match with non template code."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1508956200, "post_id": 46938741, "comment_id": 80826401, "body": "What is this <code>return</code> in class definition ?"}, {"owner": {"reputation": 2284, "user_id": 3684792, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/24880a587c5f7bece55cd19c733e223e?s=128&d=identicon&r=PG&f=1", "display_name": "user3684792", "link": "https://stackoverflow.com/users/3684792/user3684792"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1508963791, "post_id": 46938741, "comment_id": 80830485, "body": "edited, hopefully this is clearer"}], "owner": {"reputation": 2284, "user_id": 3684792, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/24880a587c5f7bece55cd19c733e223e?s=128&d=identicon&r=PG&f=1", "display_name": "user3684792", "link": "https://stackoverflow.com/users/3684792/user3684792"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508963766, "creation_date": 1508953045, "last_edit_date": 1508963766, "question_id": 46938741, "link": "https://stackoverflow.com/questions/46938741/c-only-define-specialisation-of-template-member-function", "title": "C++ only define specialisation of template member function", "body": "<p>I have the following class that maintains some global state:</p>\n\n<pre><code>struct StateController{\n\n..\n..\n..\n\nStateChanger1Inverse apply_state_changer(const StateChanger1Inverse&amp; s1);\nStateChanger2Inverse apply_state_changer(const StateChanger2Inverse&amp; s1);\nStateChanger3Inverse apply_state_changer(const StateChanger3Inverse&amp; s1);   \n\nreturn\n\n}\n</code></pre>\n\n<p>i.e the apply change gives the inverse of the change (which in this case is always 1 to 1)</p>\n\n<p>I thought of templating this to cut out some repeated code as follows:</p>\n\n<pre><code>struct StateController{\n\n    ..\n    ..\n    ..\n    template&lt;class StateChange&gt;\n    typename StateChange::inverse_change apply_state_changer(const StateChange&amp; s1);\n\n}\n</code></pre>\n\n<p>for a StateChange object that must define inverse_change typedef:</p>\n\n<p>i.e </p>\n\n<pre><code>struct StateChanger1{\n    typedef StateChanger1Inverse inverse_change\n     ..\n    other stuff\n}\n</code></pre>\n\n<p>Now, in my implementation file, I have only the specialisations of these member functions as the general case is meaningless, and consequently the ide is warning me that I have not defined the function. I should say that the code compiles just fine.</p>\n\n<p>Is it acceptable to do this, and not define the general member function?</p>\n"}, {"tags": ["python", "c++", "arrays", "numpy"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 2, "creation_date": 1508953043, "post_id": 46938718, "comment_id": 80824630, "body": "<code>new float[batch*h*w*ch_in];</code> What language is this again? Do you mean C++?"}], "answers": [{"comments": [{"owner": {"reputation": 513, "user_id": 4170533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f6d7e9e1d005c09df672403daa8d72e6?s=128&d=identicon&r=PG&f=1", "display_name": "Lugi", "link": "https://stackoverflow.com/users/4170533/lugi"}, "edited": false, "score": 0, "creation_date": 1508953532, "post_id": 46938825, "comment_id": 80824889, "body": "So does the program automatically call <code>delete</code> on objects defined with <code>new</code> when returning from the function?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 513, "user_id": 4170533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f6d7e9e1d005c09df672403daa8d72e6?s=128&d=identicon&r=PG&f=1", "display_name": "Lugi", "link": "https://stackoverflow.com/users/4170533/lugi"}, "edited": false, "score": 0, "creation_date": 1508953596, "post_id": 46938825, "comment_id": 80824927, "body": "The array <code>ret</code> was not created with <code>new</code>. (The two pointers placed into the array were, and they are not deleted, so you also have a memory leak.)"}, {"owner": {"reputation": 513, "user_id": 4170533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f6d7e9e1d005c09df672403daa8d72e6?s=128&d=identicon&r=PG&f=1", "display_name": "Lugi", "link": "https://stackoverflow.com/users/4170533/lugi"}, "edited": false, "score": 0, "creation_date": 1508953775, "post_id": 46938825, "comment_id": 80825029, "body": "<code>ret</code> preserves the proper address. But <code>ret[0]</code> and <code>ret[1]</code> don&#39;t. How should I fix it?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 513, "user_id": 4170533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f6d7e9e1d005c09df672403daa8d72e6?s=128&d=identicon&r=PG&f=1", "display_name": "Lugi", "link": "https://stackoverflow.com/users/4170533/lugi"}, "edited": false, "score": 1, "creation_date": 1508953931, "post_id": 46938825, "comment_id": 80825114, "body": "Don&#39;t try to observe UB. Avoid it. Never return a pointer to a local object. Of course, the dangling pointer does not change, but since what it points to is vacuum, the contents can be reused for other purposes."}, {"owner": {"reputation": 513, "user_id": 4170533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f6d7e9e1d005c09df672403daa8d72e6?s=128&d=identicon&r=PG&f=1", "display_name": "Lugi", "link": "https://stackoverflow.com/users/4170533/lugi"}, "edited": false, "score": 0, "creation_date": 1508954076, "post_id": 46938825, "comment_id": 80825200, "body": "So how can I make that local object global?"}, {"owner": {"reputation": 513, "user_id": 4170533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f6d7e9e1d005c09df672403daa8d72e6?s=128&d=identicon&r=PG&f=1", "display_name": "Lugi", "link": "https://stackoverflow.com/users/4170533/lugi"}, "edited": false, "score": 0, "creation_date": 1508955531, "post_id": 46938825, "comment_id": 80826022, "body": "Should I just use keyword <code>static</code>?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 513, "user_id": 4170533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f6d7e9e1d005c09df672403daa8d72e6?s=128&d=identicon&r=PG&f=1", "display_name": "Lugi", "link": "https://stackoverflow.com/users/4170533/lugi"}, "edited": false, "score": 0, "creation_date": 1508956584, "post_id": 46938825, "comment_id": 80826597, "body": "If it were me, I&#39;d return a std::tuple. Or even a std::pair"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 513, "user_id": 4170533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f6d7e9e1d005c09df672403daa8d72e6?s=128&d=identicon&r=PG&f=1", "display_name": "Lugi", "link": "https://stackoverflow.com/users/4170533/lugi"}, "edited": false, "score": 0, "creation_date": 1508957638, "post_id": 46938825, "comment_id": 80827194, "body": "Otherwise, dynamically allocate a float*[2] and return that."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 513, "user_id": 4170533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f6d7e9e1d005c09df672403daa8d72e6?s=128&d=identicon&r=PG&f=1", "display_name": "Lugi", "link": "https://stackoverflow.com/users/4170533/lugi"}, "edited": false, "score": 0, "creation_date": 1508958120, "post_id": 46938825, "comment_id": 80827505, "body": "And don&#39;t forget to delete it and the arrays its elements point to."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 3, "last_activity_date": 1508953313, "creation_date": 1508953313, "answer_id": 46938825, "question_id": 46938718, "link": "https://stackoverflow.com/questions/46938718/c-program-memory-violation-dependant-on-stdcout/46938825#46938825", "title": "C program memory violation dependant on std::cout (?)", "body": "<p>You are returning a pointer to an object with automatic lifetime. In other words, your function returns a dangling pointer, which is Undefined Behaviour.</p>\n\n<p>Although aerostatic lizards are an uncommon result of UB, <em>anything can happen</em> and the symptom you observe, unlike the lizards,  is common.</p>\n"}], "owner": {"reputation": 513, "user_id": 4170533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f6d7e9e1d005c09df672403daa8d72e6?s=128&d=identicon&r=PG&f=1", "display_name": "Lugi", "link": "https://stackoverflow.com/users/4170533/lugi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508953313, "creation_date": 1508952976, "last_edit_date": 1508953210, "question_id": 46938718, "link": "https://stackoverflow.com/questions/46938718/c-program-memory-violation-dependant-on-stdcout", "title": "C program memory violation dependant on std::cout (?)", "body": "<p>I've written an extension in C++ for Python, and I'm currently debugging it.\nThe extension takes 3 numpy matrices and produces 2 as a result. To the inner C++ function that does the actualy calculation I pass 3 float C arrays (just flattened and converted from input numpy arrays), and return a C float array of arrays. Everything works as intended but <strong>ONLY</strong> if I print this output array of arrays before returning it.</p>\n\n<p>What the hell is going on in here?</p>\n\n<pre><code>float** gradient(float* inputs, float* kernels, float* grads, npy_intp* input_dims, npy_intp* kernels_dims, npy_intp* output_dims){\n\n\nfloat* g_inputs = new float[batch*h*w*ch_in];\nfor (int i = 0; i &lt; batch*h*w*ch_in; i++) g_inputs[i] = 0;\nfloat* g_kernels = new float[size*ch_out];\nfor (int i = 0; i &lt; size*ch_out; i++) g_kernels[i] = 0;\n\n\nfloat* ret[2] = {{g_inputs}, {g_kernels}};\nstd::cout&lt;&lt;ret&lt;&lt;std::endl; //&lt;---without this it doesn't work\nreturn ret;\n}\n</code></pre>\n\n<p>I've omitted irrelevant code for clarity.</p>\n"}, {"tags": ["c++", "arrays", "recursion", "reverse", "swap"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508953053, "post_id": 46938583, "comment_id": 80824638, "body": "If your compiler isn&#39;t warning you about a likely bug, switch to a better compiler. If your compiler <i>is</i> warning you about a likely bug, your take-away from this is to never ignore warning messages from your compiler. The reason the compiler issues a warning message is not because it likes to do that, for no good reason whatsoever. Review the warning message from your compiler, and try to understand it."}, {"owner": {"reputation": 726, "user_id": 8412643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08d3f1d9aecce587f6b36cdf4cc2324?s=128&d=identicon&r=PG&f=1", "display_name": "Cuber", "link": "https://stackoverflow.com/users/8412643/cuber"}, "edited": false, "score": 1, "creation_date": 1508953064, "post_id": 46938583, "comment_id": 80824644, "body": "Where are you assigning <code>k</code> in your reverse function?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1508955897, "post_id": 46938583, "comment_id": 80826231, "body": "<code>swap</code> would allow to avoid that mistake."}], "answers": [{"tags": [], "owner": {"reputation": 726, "user_id": 8412643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08d3f1d9aecce587f6b36cdf4cc2324?s=128&d=identicon&r=PG&f=1", "display_name": "Cuber", "link": "https://stackoverflow.com/users/8412643/cuber"}, "is_accepted": false, "score": 1, "last_activity_date": 1508953185, "creation_date": 1508953185, "answer_id": 46938793, "question_id": 46938583, "link": "https://stackoverflow.com/questions/46938583/specific-recursive-reverse-program-issue-in-outputting/46938793#46938793", "title": "Specific Recursive Reverse Program Issue in Outputting", "body": "<p>Set <code>int k = a[num1];</code> in your <code>recursive_reverse_array</code> function, and that should work. Currently, you have it uninitialized, which I believe gives you your partially correct output.</p>\n"}, {"tags": [], "owner": {"reputation": 402, "user_id": 8805085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a35bfb24036bd5fcd7cab953e120e12?s=128&d=identicon&r=PG&f=1", "display_name": "Jayesh Vyas", "link": "https://stackoverflow.com/users/8805085/jayesh-vyas"}, "is_accepted": true, "score": 1, "last_activity_date": 1508953399, "creation_date": 1508953399, "answer_id": 46938856, "question_id": 46938583, "link": "https://stackoverflow.com/questions/46938583/specific-recursive-reverse-program-issue-in-outputting/46938856#46938856", "title": "Specific Recursive Reverse Program Issue in Outputting", "body": "<p>you are doing a silly mistake in your code. please see below code and replace your code with it.</p>\n\n<pre><code>   #include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iomanip&gt;\n#include &lt;ctime&gt;\n\nconst int SIZE = 10;\nunsigned int seed = int (time(0));\n\nusing namespace std;\n\ndouble random(unsigned int &amp;seed);\nvoid initialize(int a[]);\nvoid print_array(int a[]);\nvoid recursive_reverse_array(int a[], int[], int[]);\n\ndouble random(unsigned int &amp;seed)\n{\n  const int MODULUS = 15749;\n  const int MULTIPLIER = 69069;\n  const int INCREMENT = 1;\n  seed  = ((MULTIPLIER *seed) + INCREMENT) % MODULUS;\n  return double (seed)/double(MODULUS);\n}\n\nvoid initialize(int a[])\n{\n  for (int i = 0; i &lt; SIZE; ++i)\n     a[i] = (20 * (random(seed)));\n}\n\nvoid print_array (int a[])\n{\n  for (int i = 0; i &lt; SIZE; ++i)\n     cout &lt;&lt; setw(4) &lt;&lt; a[i];\n  cout &lt;&lt; endl;\n}\n\nvoid recursive_reverse_array(int a[],int num1, int num2)\n{\n  int k;\n  if(num1 &lt; num2)\n  {\n    k=a[num1];\n    a[num1] = a[num2];\n    a[num2] = k;\n\n    recursive_reverse_array(a, num1 + 1, num2 - 1);\n  }\n}\n\nint main ()\n{\n  int arr[SIZE];\n  cout &lt;&lt; \"Original Array:\";\n  initialize(arr);\n  print_array(arr);\n  recursive_reverse_array(arr, 0, SIZE - 1);\n  cout &lt;&lt; \"Reversed Array:\";\n  print_array(arr);\n  return 0;\n}\n</code></pre>\n\n<p>you have to use <code>k = a[num1];</code> in your code. hope it will work.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8666325"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 46938856, "answer_count": 2, "score": 2, "last_activity_date": 1508953399, "creation_date": 1508952514, "question_id": 46938583, "link": "https://stackoverflow.com/questions/46938583/specific-recursive-reverse-program-issue-in-outputting", "title": "Specific Recursive Reverse Program Issue in Outputting", "body": "<p>I completed my recursive reverse (array) C++ program however, it is outputting partially correctly, with an extra \"10\" which I believe is because my const int SIZE = 10. I am unsure about where I made the error(s) in my program and would like some advice on where the error has happened. Thank you. Any help will be greatly appreciated. This is the output I am receiving:</p>\n\n<pre><code>Original Array:   9   2   6  11   0  18   4  13   2   7\nReversed Array:   7   2  13   4  18   0327053270532705  10\n</code></pre>\n\n<p>The following is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iomanip&gt;\n#include &lt;ctime&gt;\n\nconst int SIZE = 10;\nunsigned int seed = int (time(0));\n\nusing namespace std;\n\ndouble random(unsigned int &amp;seed);\nvoid initialize(int a[]);\nvoid print_array(int a[]);\nvoid recursive_reverse_array(int a[], int[], int[]);\n\ndouble random(unsigned int &amp;seed)\n{\n  const int MODULUS = 15749;\n  const int MULTIPLIER = 69069;\n  const int INCREMENT = 1;\n  seed  = ((MULTIPLIER *seed) + INCREMENT) % MODULUS;\n  return double (seed)/double(MODULUS);\n}\n\nvoid initialize(int a[])\n{\n  for (int i = 0; i &lt; SIZE; ++i)\n     a[i] = (20 * (random(seed)));\n}\n\nvoid print_array (int a[])\n{\n  for (int i = 0; i &lt; SIZE; ++i)\n     cout &lt;&lt; setw(4) &lt;&lt; a[i];\n  cout &lt;&lt; endl;\n}\n\nvoid recursive_reverse_array(int a[],int num1, int num2)\n{\n  int k;\n  if(num1 &lt; num2)\n  {\n    a[num1] = a[num2];\n    a[num2] = k;\n    recursive_reverse_array(a, num1 + 1, num2 - 1);\n  }\n}\n\nint main ()\n{\n  int arr[SIZE];\n  cout &lt;&lt; \"Original Array:\";\n  initialize(arr);\n  print_array(arr);\n  recursive_reverse_array(arr, 0, SIZE - 1);\n  cout &lt;&lt; \"Reversed Array:\";\n  print_array(arr);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 8833174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/782b0da5b9fdb4f88d52b6d3f32842a6?s=128&d=identicon&r=PG&f=1", "display_name": "Kodsnmd Jsurin", "link": "https://stackoverflow.com/users/8833174/kodsnmd-jsurin"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1508952680, "post_id": 46938560, "comment_id": 80824409, "body": "Sorry my English is bad what I want to do is have the if statement then inside check the bullets and if the bullets are above 1 or equal it will skip to the else"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1508952901, "post_id": 46938560, "comment_id": 80824532, "body": "Have you considered simply reversing the condition, and placing the instruction in the <code>if</code>&#39;s body? &quot;Skip the next instruction if and only if my condition is true&quot; is equivalent to &quot;Execute the next instruction if and only if my condition is false&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1508955998, "post_id": 46938714, "comment_id": 80826264, "body": "From the description, it should probably be <code>if (!HasStaticRealAngle(cur) || (Global::bulletresolver[player-&gt;EntIndex()].missedbullets &lt; 1)) new_yaw = 10; else new_yaw = 32;</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1508957618, "post_id": 46938714, "comment_id": 80827183, "body": "@scohe001: almost. You need to use <code>&gt;=</code> instead of <code>&lt;</code>.  The OP clearly stated that the <code>else</code> (ie <code>new_yaw=10</code>) should be used when &quot;<i>the bullets are above 1 or equal</i>&quot;. Whether you use your code or mine, the end result of <code>new_yaw</code> will be the same"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1508969806, "post_id": 46938714, "comment_id": 80833198, "body": "Ahhh I missed your <code>&lt;</code>. That was some sneaky DeMorgan&#39;s. Well played."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1508952961, "creation_date": 1508952961, "answer_id": 46938714, "question_id": 46938560, "link": "https://stackoverflow.com/questions/46938560/skipping-an-if-statement-from-inside-and-skip-to-next/46938714#46938714", "title": "Skipping an if statement from inside and skip to next", "body": "<p>If you want to set <code>new_yaw</code> to <code>10</code> when <code>missedbullets &gt;= 1</code>, then you can combine the two checks into a single <code>if</code> statement using the <code>&amp;&amp;</code> operator:</p>\n\n<pre><code>else if (HasStaticRealAngle(cur) &amp;&amp; (Global::bulletresolver[player-&gt;EntIndex()].missedbullets &lt; 1))\n    new_yaw = 32;\nelse\n    new_yaw = 10;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8833174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/782b0da5b9fdb4f88d52b6d3f32842a6?s=128&d=identicon&r=PG&f=1", "display_name": "Kodsnmd Jsurin", "link": "https://stackoverflow.com/users/8833174/kodsnmd-jsurin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1508952961, "creation_date": 1508952436, "last_edit_date": 1508952639, "question_id": 46938560, "link": "https://stackoverflow.com/questions/46938560/skipping-an-if-statement-from-inside-and-skip-to-next", "title": "Skipping an if statement from inside and skip to next", "body": "<p>I have an <code>if</code> statement.  If the check equals to what I want, I want to continue to another <code>if</code> statement.</p>\n\n<pre><code>  else if (HasStaticRealAngle(cur))\n  {\n        if (Global::bulletresolver[player-&gt;EntIndex()].missedbullets &gt;= 1)\n        //skip to next statement\n        new_yaw = 32;\n  }\n  else\n    new_yaw = 10;\n</code></pre>\n\n<p>I've commented where I want to skip to the <code>else</code>.</p>\n"}, {"tags": ["c++", "qt", "user-interface", "qcombobox"], "comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 2, "creation_date": 1508952298, "post_id": 46938467, "comment_id": 80824194, "body": "<a href=\"http://doc.qt.io/qt-5/qobject.html#blockSignals\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qobject.html#blockSignals</a>"}, {"owner": {"reputation": 168, "user_id": 5020292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c329c7989d6a74e7345f809b5f0a8c?s=128&d=identicon&r=PG", "display_name": "amoose136", "link": "https://stackoverflow.com/users/5020292/amoose136"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1508952665, "post_id": 46938467, "comment_id": 80824399, "body": "@scopchanov That is a way of blocking signals but I already have that. The problem still remains that there is no good way of detecting the start of a user interaction generically."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1508952734, "post_id": 46938467, "comment_id": 80824439, "body": "Did you block them in the <code>on_comboBox_highlighted</code> slot or outside?"}, {"owner": {"reputation": 168, "user_id": 5020292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c329c7989d6a74e7345f809b5f0a8c?s=128&d=identicon&r=PG", "display_name": "amoose136", "link": "https://stackoverflow.com/users/5020292/amoose136"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1508953021, "post_id": 46938467, "comment_id": 80824612, "body": "They were blocked at the start of on_comboBox_highlighted and unblocked at the end. This stopped it from trying to erase and write to the list at the same time but it still updates every time the item hovered over changes and it leaves the item under the mouse unhighlighted at the end of operation. It also doesn&#39;t work if the interaction is invoked by keyboard instead of mouse."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1508953393, "post_id": 46938467, "comment_id": 80824814, "body": "@amoose136 I have a suggestion, because do not create a thread that is continuously checking the ports and every time they change send the new ports, so you avoid the inconveniences."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1508953582, "post_id": 46938467, "comment_id": 80824919, "body": "@amoose136 Another suggestion is to use the focusInEvent event, but keep in mind that this is triggered each time the mouse enters the widget, for this you must create a subclass of QComboBox."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1508953653, "post_id": 46938467, "comment_id": 80824964, "body": "@amoose136 Another option is to use eventFilter () and filter the QEvent :: FocusIn event and be issued by the QComboBox object."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1508953689, "post_id": 46938467, "comment_id": 80824983, "body": "Because QSerialPortInfo doesn&#39;t have any signals, you could install an event filter on the QComboBox and watch for its ShowEvent and then update the list."}, {"owner": {"reputation": 168, "user_id": 5020292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c329c7989d6a74e7345f809b5f0a8c?s=128&d=identicon&r=PG", "display_name": "amoose136", "link": "https://stackoverflow.com/users/5020292/amoose136"}, "reply_to_user": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1508953835, "post_id": 46938467, "comment_id": 80825062, "body": "@scopchanov It&#39;s still not that simple because sometimes the field could be highlighted and moved through with the arrow keys. In this case ShowEvent signal is not sent."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1508953895, "post_id": 46938467, "comment_id": 80825095, "body": "Then go with focusIn as eyllanesc suggested."}], "owner": {"reputation": 168, "user_id": 5020292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44c329c7989d6a74e7345f809b5f0a8c?s=128&d=identicon&r=PG", "display_name": "amoose136", "link": "https://stackoverflow.com/users/5020292/amoose136"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 560, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508952037, "creation_date": 1508952037, "question_id": 46938467, "link": "https://stackoverflow.com/questions/46938467/proper-way-of-updating-the-contents-of-a-qcombobox", "title": "Proper way of updating the contents of a QComboBox", "body": "<p>I have a <a href=\"https://doc.qt.io/qt-5/qcombobox.html\" rel=\"nofollow noreferrer\">QComboBox</a> that is a selector for available serial ports. I want to update this combobox whenever a new user interaction with element starts but I have a couple of problems.  Normally when it is clicked or messed with by keyboard, no signals exist to know when it is clicked or otherwise the focus of a user. A close approximation is the <code>void mainwindow::on_comboBox_highlighted(const QString &amp;arg1)</code> slot but this receives a signal every time the option under the cursor changes, not just when the form initially receives focus. This is problematic because if I erase the contents of the list and repopulate the contents of the list, the method will immediately be called again and multiple instances of the method will run and try to do opposite things indefinitely (race condition) unless some sort of state consideration is implemented in the method. </p>\n\n<p>Sometimes items may disappear from the list on update because they are no longer available to the system. For this reason, it is desirable to just erase and repopulate the entire list on update instead of detecting unavailable items and removing them and then adding new items not already found in the list. The trouble is that even with state consideration, doing this will deselect whatever item is under the mouse cursor and retrigger the update. </p>\n\n<p>An example naive approach that would create a race condition could be:</p>\n\n<pre><code>void mainwindow::on_comboBox_highlighted(const QString &amp;arg1)\n{\n    delete port;\n    ui-&gt;comboBox-&gt;clear();\n    for (int i=0;i&lt;QSerialPortInfo::availablePorts().length();i++){\n        const QString comport=QSerialPortInfo::availablePorts()[i].portName();\n        ui-&gt;comboBox-&gt;addItem(comport);\n    }\n    port = openport(getport());\n}\n</code></pre>\n\n<p><strong>What is a way of detecting interaction with and updating a combobox without creating a race condition?</strong></p>\n"}, {"tags": ["c++", "matrix"], "comments": [{"owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 0, "creation_date": 1508950936, "post_id": 46937988, "comment_id": 80823410, "body": "Note that your code snippet does not match the error. In the code you have round braces around the <code>std::forward</code> call, in the error it&#39;s curly ones. Did you forget <code>data_type</code> in front of <code>std::forward</code>?"}, {"owner": {"reputation": 219, "user_id": 8656219, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d36c81b0acbd81918cfb5a4a32df87c6?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Ghiani", "link": "https://stackoverflow.com/users/8656219/marco-ghiani"}, "reply_to_user": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 0, "creation_date": 1508950989, "post_id": 46937988, "comment_id": 80823434, "body": "what do you mean ?"}, {"owner": {"reputation": 219, "user_id": 8656219, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d36c81b0acbd81918cfb5a4a32df87c6?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Ghiani", "link": "https://stackoverflow.com/users/8656219/marco-ghiani"}, "reply_to_user": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 0, "creation_date": 1508951152, "post_id": 46937988, "comment_id": 80823520, "body": "oh yes I&#39;ve tried with both round and curly brackets"}, {"owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 0, "creation_date": 1508951195, "post_id": 46937988, "comment_id": 80823551, "body": "Please post the error you get for the code you&#39;ve put in your post. It makes no sense to show an error for code we can&#39;t see."}], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 8656219, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d36c81b0acbd81918cfb5a4a32df87c6?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Ghiani", "link": "https://stackoverflow.com/users/8656219/marco-ghiani"}, "edited": false, "score": 0, "creation_date": 1508952731, "post_id": 46938443, "comment_id": 80824437, "body": "I see ... ?  how can I repair ?"}, {"owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "reply_to_user": {"reputation": 219, "user_id": 8656219, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d36c81b0acbd81918cfb5a4a32df87c6?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Ghiani", "link": "https://stackoverflow.com/users/8656219/marco-ghiani"}, "edited": false, "score": 0, "creation_date": 1508955010, "post_id": 46938443, "comment_id": 80825726, "body": "@MarcoGhiani Repair what? The errors? The compiler tells you what is wrong and most of the time how to solve it (most errors seemed to be e.g. functions not returning something)."}], "tags": [], "owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "is_accepted": false, "score": 0, "last_activity_date": 1508951953, "creation_date": 1508951953, "answer_id": 46938443, "question_id": 46937988, "link": "https://stackoverflow.com/questions/46937988/matrix-class-variadic-constructor/46938443#46938443", "title": "matrix class , variadic constructor", "body": "<p>The way you're trying to <a href=\"http://en.cppreference.com/w/cpp/language/parameter_pack\" rel=\"nofollow noreferrer\">parameter pack expansion</a> doesn't work. It will expand the whole list of arguments and try and assign them to <code>data[1]</code>.</p>\n\n<p>The answer from <a href=\"https://stackoverflow.com/questions/10364874/create-stdarray-from-variadic-template\">Create std::array from variadic template</a> works here as well:</p>\n\n<pre><code>template&lt;typename data_type&gt;\ntemplate &lt;typename ... Ts&gt;\nconstexpr Matrix&lt;data_type&gt;::Matrix(std::size_t row ,\n                                    std::size_t col ,\n                                    Ts&amp;&amp;... args     ) noexcept : row{row}, columns{col},\n                                                                   data{ new data_type[row*col] }\n\n{\n        std::size_t i =0;\n        assert(sizeof...(args) == row*columns );\n\n        std::initializer_list&lt;data_type&gt; il ( { std::forward&lt;Ts&gt;(args)... } );\n        std::copy(il.begin(), il.end(), data);\n}\n</code></pre>\n\n<p>Note that the code you posted has a bunch of bugs. It doesn't even compile, since there's a semi-colon missing in the main function. There's also a bunch of warnings you get if you compile with <code>-Wall -Wextra -pendantic</code>.</p>\n"}], "owner": {"reputation": 219, "user_id": 8656219, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d36c81b0acbd81918cfb5a4a32df87c6?s=128&d=identicon&r=PG&f=1", "display_name": "Marco Ghiani", "link": "https://stackoverflow.com/users/8656219/marco-ghiani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508951953, "creation_date": 1508950305, "last_edit_date": 1508950711, "question_id": 46937988, "link": "https://stackoverflow.com/questions/46937988/matrix-class-variadic-constructor", "title": "matrix class , variadic constructor", "body": "<p>I'm trying to create a simple matrix class, the point is that i'm using standard pointer to store the data .. and I don't know 2 things \nhow can i solve the problem of this constructor :</p>\n\n<pre><code>template&lt;typename data_type&gt;\ntemplate &lt;typename ... Ts&gt;   \nconstexpr Matrix&lt;data_type&gt;::Matrix(std::size_t row , \n                                    std::size_t col ,\n                                    Ts&amp;&amp;... args     ) noexcept : row{row}, columns{col},\n                                                                   data{ new data_type[row*col] },\n\n{\n        std::size_t i =0;    \n        assert(sizeof...(args) == row*columns );    \n        data[i++] = (std::forward&lt;Ts&gt;(args)...);          \n}\n</code></pre>\n\n<p>i got the error : </p>\n\n<pre><code>In file included from matrixDrive.cpp:3:0:\nmatrix.H: In constructor \u2018constexpr Matrix&lt;U&gt;::Matrix(std::size_t, std::size_t, Ts&amp;&amp; ...)\u2019:\nmatrix.H:93:1: error: expected identifier before \u2018{\u2019 token\n {\n ^\nmatrix.H: In instantiation of \u2018constexpr Matrix&lt;U&gt;::Matrix(std::size_t, std::size_t, Ts&amp;&amp; ...) [with Ts = {double, double, double, double, double, double}; data_type = double; std::size_t = long unsigned int]\u2019:\nmatrixDrive.cpp:11:68:   required from here\nmatrix.H:96:19: error: cannot convert \u2018&lt;brace-enclosed initializer list&gt;\u2019 to \u2018double\u2019 in assignment\n         data[i++] = {std::forward&lt;Ts&gt;(args)...};\n         ~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nmatrixDrive.cpp: In function \u2018int main()\u2019:\nmatrixDrive.cpp:13:3: error: expected \u2018,\u2019 or \u2018;\u2019 before \u2018return\u2019\n   return 0;\n   ^~~~~~\n</code></pre>\n\n<p>here the whole implementation:</p>\n\n<pre><code># include &lt;iostream&gt;\n# include &lt;utility&gt;\n# include &lt;iomanip&gt;\n# include &lt;vector&gt;\n# include &lt;exception&gt;\n# include &lt;iterator&gt;\n# include &lt;cassert&gt;\n\ntemplate &lt;class U&gt; class Matrix ;\n\ntemplate &lt;class U&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; , Matrix&lt;U&gt;&amp; );\n\ntemplate &lt;class U&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; ,const Matrix&lt;U&gt;&amp; ); \n\n\n//- class declararation\n//\ntemplate &lt;typename data_type = double&gt;\nclass Matrix {\n\n   public:   \n    //- friend function\n    template &lt;class U&gt;\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; ,Matrix&lt;U&gt;&amp; ); \n\n    template &lt;class U&gt;\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; ,const Matrix&lt;U&gt;&amp; ); \n\n\n\n\n\n   public:\n    constexpr Matrix(std::size_t r = 3 , std::size_t c = 3) noexcept;  \n\n    constexpr Matrix(std::size_t r, std::size_t c, data_type val) noexcept;  \n\n    template &lt;typename ... Ts&gt;   \n    constexpr Matrix(std::size_t row , std::size_t col, Ts&amp;&amp;... args) noexcept;  \n\n    virtual ~Matrix() noexcept ; \n\n\n    auto constexpr zeros() noexcept ;\n\n    auto constexpr initialize(data_type) noexcept ;\n\n    data_type&amp; operator()(std::size_t, std::size_t);  \n\n//-------\n   private:   \n\n      data_type *data     ;\n      std::size_t row     ;\n      std::size_t columns ;\n\n      auto constexpr isAllocate() noexcept { return data != nullptr ; } \n\n};\n\n// Matrix definition\n\n//- standard constructor\ntemplate&lt;typename data_type&gt;\nconstexpr Matrix&lt;data_type&gt;::Matrix(std::size_t r, std::size_t c) noexcept : row{r}, columns{c}, \n                                                                     data{new data_type[r*c]}\n{\n      this-&gt;zeros();\n}\n\n\ntemplate&lt;typename data_type&gt;\nconstexpr Matrix&lt;data_type&gt;::Matrix(std::size_t r, std::size_t c, data_type val) noexcept : row{r}, columns{c}, \n                                                                                            data{new data_type[r*c]}\n{\n      this-&gt;initialize(val);\n}  \n\n\n//--- construct by list of arguments\ntemplate&lt;typename data_type&gt;\ntemplate &lt;typename ... Ts&gt;   \nconstexpr Matrix&lt;data_type&gt;::Matrix(std::size_t row , \n                                    std::size_t col ,\n                                    Ts&amp;&amp;... args     ) noexcept : row{row}, columns{col},\n                                                                   data{ new data_type[row*col] },\n\n{\n        std::size_t i =0;    \n        assert(sizeof...(args) == row*columns );    \n        data[i++] = (std::forward&lt;Ts&gt;(args)...);          \n}\n\n\n// destructor\ntemplate&lt;typename data_type&gt;\nMatrix&lt;data_type&gt;::~Matrix() noexcept \n{\n      if( isAllocate() )\n            delete[] data; \n}\n\n\n\n\n\n//----------------------------------------------------------------------------------------------------\n//\n\ntemplate &lt;typename data_type&gt;\nauto constexpr Matrix&lt;data_type&gt;::zeros() noexcept {\n   if(isAllocate())\n     for(size_t i=0; i&lt; row*columns ; i++)\n            data[i] = 0; \n}\n\n\ntemplate &lt;typename data_type&gt;\nauto constexpr Matrix&lt;data_type&gt;::initialize(data_type val) noexcept\n{\n      if(isAllocate())\n         for(size_t i=0 ; i &lt; row*columns; i++)\n            data[i] = val ;\n}\n\n\n\n\n//-----------\n\ntemplate &lt;typename data_type&gt;\ndata_type&amp; Matrix&lt;data_type&gt;::operator()(std::size_t i, std::size_t j) { return data[(i-1) + row* (j-1)] ; }  \n\n\n// non member function \n\ntemplate &lt;class U&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; out ,Matrix&lt;U&gt;&amp; mat)\n{\n    for(std::size_t r = 1; r &lt; mat.row+1 ; r++)\n    {\n      for(std::size_t c = 1; c &lt; mat.columns+1 ; c++)\n      {\n          out &lt;&lt; mat(r,c) &lt;&lt; ' ' ;  \n      }\n      out &lt;&lt; \"\\n\" ;\n    }\n}\n\ntemplate &lt;class U&gt;\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; out , const Matrix&lt;U&gt;&amp; mat) \n{\n    for(std::size_t r = 1; r &lt; mat.row+1 ; r++)\n    {\n      for(std::size_t c = 1; c &lt; mat.columns+1 ; c++)\n      {\n          out &lt;&lt; mat(r,c) &lt;&lt; ' ';  \n      }\n      out &lt;&lt; \"\\n\" ;\n    }\n}\n</code></pre>\n\n<p>and the main function : </p>\n\n<pre><code># include &lt;iostream&gt;\n# include &lt;iomanip&gt;\n# include \"matrix.H\"\n\nusing namespace std;\n\nint main() {\n\n  Matrix&lt;double&gt; m1, m2(6,3);    \n\n  Matrix&lt;double&gt; m3(3,2,1.12,2.434,3.546546,4.657,5.675675,6.542354)    \n\n  return 0;    \n}\n</code></pre>\n\n<p>thanks in advance for your precious help! </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1508949697, "post_id": 46937796, "comment_id": 80822727, "body": "Just because the command prompt closes doesn&#39;t mean anything is broken."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1508949714, "post_id": 46937796, "comment_id": 80822737, "body": "Why would you expect it to do anything else? After <code>cout &lt;&lt; d &lt;&lt; endl;</code>, your code is finished, and the application exits. It&#39;s working exactly as you&#39;ve written it, and nothing is broken at all."}, {"owner": {"reputation": 2836, "user_id": 3529197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ceed214a6e603c456a8ebaacc036b407?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/3529197/neo"}, "edited": false, "score": 0, "creation_date": 1508949819, "post_id": 46937796, "comment_id": 80822786, "body": "You really shouldn&#39;t use so many exclamation marks. We would help you anyway, you know. (Or we wouldn&#39;t, but the exclamation marks won&#39;t change that)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8832865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40c245906a6ccd885e50f9a92c5d6699?s=128&d=identicon&r=PG&f=1", "display_name": "A. Gain", "link": "https://stackoverflow.com/users/8832865/a-gain"}, "edited": false, "score": 0, "creation_date": 1508949978, "post_id": 46937839, "comment_id": 80822883, "body": "oh sorry! I didn&#39;t mean that! I meant after running the code...cmd stops working!"}, {"owner": {"reputation": 2836, "user_id": 3529197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ceed214a6e603c456a8ebaacc036b407?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/3529197/neo"}, "reply_to_user": {"reputation": 1, "user_id": 8832865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40c245906a6ccd885e50f9a92c5d6699?s=128&d=identicon&r=PG&f=1", "display_name": "A. Gain", "link": "https://stackoverflow.com/users/8832865/a-gain"}, "edited": false, "score": 0, "creation_date": 1508950146, "post_id": 46937839, "comment_id": 80822983, "body": "What do you mean stop working? Getting stuck?"}], "tags": [], "owner": {"reputation": 2836, "user_id": 3529197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ceed214a6e603c456a8ebaacc036b407?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/3529197/neo"}, "is_accepted": false, "score": 0, "last_activity_date": 1508949740, "creation_date": 1508949740, "answer_id": 46937839, "question_id": 46937796, "link": "https://stackoverflow.com/questions/46937796/check-my-c-code-my-cmd-screen-is-closing-after-running-it-what-could-be-my-e/46937839#46937839", "title": "check my c++ code! My cmd screen is closing after running it! What could be my error?", "body": "<p>It's completely normal, as far as I understand.<br>\nThe program is executed, and once finished it's closed.<br>\nIf you want to see the results execute the program from an existing CMD.  </p>\n\n<pre><code>C:/location&gt; program.exe\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7995152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/774acd4ef6b27e05c459c1a676d7316a?s=128&d=identicon&r=PG&f=1", "display_name": "oceanic helicopter", "link": "https://stackoverflow.com/users/7995152/oceanic-helicopter"}, "is_accepted": false, "score": 0, "last_activity_date": 1508949847, "creation_date": 1508949847, "answer_id": 46937870, "question_id": 46937796, "link": "https://stackoverflow.com/questions/46937796/check-my-c-code-my-cmd-screen-is-closing-after-running-it-what-could-be-my-e/46937870#46937870", "title": "check my c++ code! My cmd screen is closing after running it! What could be my error?", "body": "<p>Did you try running without debugging? Try hitting ctrl + f5 if you're in visual studio and the command should stay opened when your code finishes.</p>\n"}], "owner": {"reputation": 1, "user_id": 8832865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40c245906a6ccd885e50f9a92c5d6699?s=128&d=identicon&r=PG&f=1", "display_name": "A. Gain", "link": "https://stackoverflow.com/users/8832865/a-gain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1508949680, "answer_count": 2, "score": 0, "last_activity_date": 1512861493, "creation_date": 1508949577, "last_edit_date": 1512861493, "question_id": 46937796, "link": "https://stackoverflow.com/questions/46937796/check-my-c-code-my-cmd-screen-is-closing-after-running-it-what-could-be-my-e", "closed_reason": "Duplicate", "title": "check my c++ code! My cmd screen is closing after running it! What could be my error?", "body": "<p>I can't detect the error in the following code:</p>\n\n<pre><code>int add(int x[], int size, int y[]=0) {\nint sum = 0;\nfor (int i = 0; i &lt; size; i++) {\n    sum += x[i];\n}\nfor (int i = 0; i &lt; size; i++) {\n    sum += y[i];\n}\nreturn sum;\n}\n\nint main() {\n\n   int a[] = { 1,2,3,4,5 };\n   int b[] = { 6,7,8,9,10 };\n   int c = add(a, 5);\n   int d = add(a, 5, b);\n   cout &lt;&lt; c &lt;&lt; endl;\n   cout &lt;&lt; d &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1508950037, "post_id": 46937653, "comment_id": 80822926, "body": "C++ has neither <code>FrameMove</code> nor <code>AddListener</code>."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1508955764, "post_id": 46937653, "comment_id": 80826152, "body": "Look up &quot;pointer to member function&quot;."}, {"owner": {"reputation": 1878, "user_id": 585806, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/998e3347b19f88f46e11970f1b27ae29?s=128&d=identicon&r=PG", "display_name": "Entretoize", "link": "https://stackoverflow.com/users/585806/entretoize"}, "reply_to_user": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1508993178, "post_id": 46937653, "comment_id": 80839184, "body": "@harper I know it is just a notation to make my problem understandable."}, {"owner": {"reputation": 1878, "user_id": 585806, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/998e3347b19f88f46e11970f1b27ae29?s=128&d=identicon&r=PG", "display_name": "Entretoize", "link": "https://stackoverflow.com/users/585806/entretoize"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1508993192, "post_id": 46937653, "comment_id": 80839192, "body": "@Rusty I&#39;ll see"}], "answers": [{"tags": [], "owner": {"reputation": 1878, "user_id": 585806, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/998e3347b19f88f46e11970f1b27ae29?s=128&d=identicon&r=PG", "display_name": "Entretoize", "link": "https://stackoverflow.com/users/585806/entretoize"}, "is_accepted": false, "score": 0, "last_activity_date": 1508996717, "creation_date": 1508996717, "answer_id": 46946665, "question_id": 46937653, "link": "https://stackoverflow.com/questions/46937653/a-kind-of-addeventlistener-in-c/46946665#46946665", "title": "A kind of addeventlistener in c++", "body": "<p>So thanks to Rusty, this is what I made:</p>\n\n<p>In main.cpp:</p>\n\n<pre><code>struct PFUNC\n{\n    void (*func)(void* classvar, void* arg0);\n    void* classvar;\n}\nvector &lt;PFUNC&gt; onFrameMove;\n\nvoid FrameMove(int frame,POINT pt)\n{\n    #some jobs here\n\n    for(int i=0;i&lt;onFrameMove.size();i++)\n         onFrameMove[i].func(onFrameMove[i].classvar, onFrameMove[i].arg0);\n}\n</code></pre>\n\n<p>in SPRITE.cpp:</p>\n\n<pre><code>SPRITE::SPRITE(MAINCLASS* main)\n{\n    PFUNC fc;\n    fc.classvar = this;\n    fc.func = &amp;FrameMoveCB;\n    main-&gt;onFrameMove.push_back(fc);        //add to the main job\n}\n\nvoid FrameMoveCB(void* classobject, void* arg0)   //callback to translate the void*s\n{\n    SPRITE* Sprite= (SPRITE*)classobject;\n\n    Sprite-&gt;FrameMove(*(POINT*)arg0);     //call the true method\n}\n\nvoid SPRITE::FrameMove(POINT pt)\n{\n    //more job here\n}\n</code></pre>\n\n<p>So my main loop handle all the job and I don't have to modify it while adding new classes.</p>\n\n<p>If someone have simpler I'll be happy, but that's good I think (and it work)</p>\n"}], "owner": {"reputation": 1878, "user_id": 585806, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/998e3347b19f88f46e11970f1b27ae29?s=128&d=identicon&r=PG", "display_name": "Entretoize", "link": "https://stackoverflow.com/users/585806/entretoize"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508996717, "creation_date": 1508949057, "last_edit_date": 1508993097, "question_id": 46937653, "link": "https://stackoverflow.com/questions/46937653/a-kind-of-addeventlistener-in-c", "title": "A kind of addeventlistener in c++", "body": "<p>I think it doesn't exists in c++ but it would be very convenient.\nSay I have a class:</p>\n\n<pre><code>class SPRITE\n{\n    void RunTo(POINT pt);\n    SPRITE(MAINCLASS* main);\n}\n</code></pre>\n\n<p>And a main function:</p>\n\n<pre><code>SPRITE sprite=new SPRITE();\nwhile(1)\n{\n    GetCursorPos(&amp;pt);\n    FrameMove(frame,pt);\n}\n</code></pre>\n\n<p>So if I want to call <code>SPRITE::RunTo</code> with the cursor position I need to call it from the main loop which is simple with one class but less with many.</p>\n\n<p>The good thing I'm thinking about is something like that:</p>\n\n<pre><code>SPRITE::SPRITE(MAINCLASS* main)\n{\n    main-&gt;AddListener(main::Framemove(int frame,POINT pt){ RunTo(pt); });\n}\n</code></pre>\n\n<p>It's a pure invention but maybe there's something that can do the same ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "while-loop", "cin"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1508949467, "post_id": 46937644, "comment_id": 80822598, "body": "The incorrect input is being left in the stream, so it gets read by <code>cin &gt;&gt; h</code> instead of waiting for the next input."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1508949548, "post_id": 46937644, "comment_id": 80822638, "body": "You need to validate the radius input <i>before</i> asking for height."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1508949621, "post_id": 46937644, "comment_id": 80822677, "body": "Either that, or read each with <code>getline()</code>, and parse them after reading both."}, {"owner": {"reputation": 1, "user_id": 8832708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fea870a98e6942d41bc80420f1449e?s=128&d=identicon&r=PG&f=1", "display_name": "lotsOfSnow", "link": "https://stackoverflow.com/users/8832708/lotsofsnow"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1508950088, "post_id": 46937644, "comment_id": 80822946, "body": "Thanks for the answers. I managed to fix it by adding <code>cin.clear();cin.ignore()</code> after <code>cin &gt;&gt; r;</code>. Guess it&#39;s fine too? Didn&#39;t learn about getline() yet."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1508950147, "post_id": 46937644, "comment_id": 80822985, "body": "If you do that, you won&#39;t be able to tell if <code>cin &gt;&gt; r;</code> succeeded or failed."}, {"owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 0, "creation_date": 1508950342, "post_id": 46937644, "comment_id": 80823097, "body": "@lotsOfSnow Saying you didn&#39;t learn about something yet hardly seems a valid argument after someone points the function out to you. Here&#39;s <code>getline</code>&#39;s documentation: <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/getline\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/basic_istream/getline</a>."}, {"owner": {"reputation": 1, "user_id": 8832708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fea870a98e6942d41bc80420f1449e?s=128&d=identicon&r=PG&f=1", "display_name": "lotsOfSnow", "link": "https://stackoverflow.com/users/8832708/lotsofsnow"}, "edited": false, "score": 0, "creation_date": 1508950523, "post_id": 46937644, "comment_id": 80823196, "body": "Ok, I see that a negative value is assigned to the variable when it gets something other than an int as input so  <code>cin.fail();</code> isn&#39;t needed but it still falls under remaining conditions. For this program it won&#39;t matter but I&#39;ll use <code>getline()</code> next time."}], "owner": {"reputation": 1, "user_id": 8832708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fea870a98e6942d41bc80420f1449e?s=128&d=identicon&r=PG&f=1", "display_name": "lotsOfSnow", "link": "https://stackoverflow.com/users/8832708/lotsofsnow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508949410, "creation_date": 1508949046, "last_edit_date": 1508949410, "question_id": 46937644, "link": "https://stackoverflow.com/questions/46937644/program-goes-to-a-while-loop-before-second-cin", "title": "Program goes to a while loop before second cin", "body": "<p>I have a problem with 2 cins before a while loop in C++. I want them both to only take numbers greater than 0. The problem is that if I give r a value other than a number, this is what happens:</p>\n\n<pre><code>Radius: a\nHeight: Wrong radius. Input a number bigger than 0.\nRadius: 7\nWrong height. Input a number bigger than 0.\nHeight: 10\nr=7\nh=10\n</code></pre>\n\n<p>(it doesn't ask for value of h before loop). For negative numbers it is fine and the program won't go to loop before getting value of height if I make radius -1 for example.</p>\n\n<p>This is my code:</p>\n\n<pre><code>int r;\nint h;\ncout &lt;&lt; \"Radius: \";\ncin &gt;&gt; r;\ncout &lt;&lt; \"Height: \";\ncin &gt;&gt; h;\nwhile (cin.fail() || !(r &gt; 0) || !(h &gt; 0)) {\n    cin.clear();\n    cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n    if (!(r &gt; 0)) {\n        cout &lt;&lt; \"Wrong radius. Input a number bigger than 0.\\nRadius: \";\n        cin &gt;&gt; r;\n    }\n    else {\n        cout &lt;&lt; \"Wrong height. Input a number bigger than 0.\\nHeight: \";\n        cin &gt;&gt; h;\n    }\n</code></pre>\n"}, {"tags": ["c++", "constructor", "constructor-chaining"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 6, "creation_date": 1508949183, "post_id": 46937616, "comment_id": 80822445, "body": "You can compute <code>i</code> in a function and do <code>A() : A(foo())</code>."}, {"owner": {"reputation": 3670, "user_id": 2681057, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c2135aa4c462b83c2844bf35d03c447?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Chapman", "link": "https://stackoverflow.com/users/2681057/nick-chapman"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1508949820, "post_id": 46937616, "comment_id": 80822787, "body": "@HolyBlackCat that was the answer, if you post it as the answer I&#39;ll accept."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1508951273, "post_id": 46937616, "comment_id": 80823585, "body": "I don&#39;t mind you accepting Richard&#39;s answer, he even mentioned another good approach."}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1508955393, "post_id": 46938140, "comment_id": 80825960, "body": "Note that the 2 choicess are different in regard to <code>explicit</code>. <code>A()</code> is explicit in one case, and not for the other."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1508964190, "post_id": 46938140, "comment_id": 80830664, "body": "Be careful if <code>load_something</code> is a virtual method of <code>A</code> (or a base class of <code>A</code>)."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 4, "last_activity_date": 1508950882, "creation_date": 1508950882, "answer_id": 46938140, "question_id": 46937616, "link": "https://stackoverflow.com/questions/46937616/c-delegate-constructor-with-some-work-done-beforehand/46938140#46938140", "title": "C++ delegate constructor with some work done beforehand", "body": "<p>Some alternatives:</p>\n\n<p>Default argument:</p>\n\n<pre><code>struct A { \n  explicit A(int i = load_something());\n};\n</code></pre>\n\n<p>Deferred constructor:</p>\n\n<pre><code>struct A { \n  explicit A(int i);\n  A() : A(load_something()) {}\n};\n</code></pre>\n"}], "owner": {"reputation": 3670, "user_id": 2681057, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c2135aa4c462b83c2844bf35d03c447?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Chapman", "link": "https://stackoverflow.com/users/2681057/nick-chapman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 46938140, "answer_count": 1, "score": 1, "last_activity_date": 1508950882, "creation_date": 1508948973, "question_id": 46937616, "link": "https://stackoverflow.com/questions/46937616/c-delegate-constructor-with-some-work-done-beforehand", "title": "C++ delegate constructor with some work done beforehand", "body": "<p>I'm trying to do something along the lines of</p>\n\n<pre><code>class A {\n    A();\n    A(int num);\n}\n\nA::A()\n{\n    int i = /* Something that loads something */\n    A(i);\n}\n\nA::A(int num)\n{\n    /* something involving num */   \n}\n</code></pre>\n\n<p>I am aware of delegated constructors in C++ 11, what I am wondering is if it's possible to do something before invoking the delegated constructor. </p>\n\n<p>Also, unrelated, but is <code>this</code> available in an initializer list?</p>\n"}, {"tags": ["c++", "char", "do-while"], "comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1508948966, "post_id": 46937584, "comment_id": 80822334, "body": "Your coding style is ... improveable. Please learn about formatting."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1508949028, "post_id": 46937584, "comment_id": 80822360, "body": "<code>filled</code> can&#39;t be &#39;Y&#39;, &#39;N&#39;, &#39;y&#39; and &#39;n&#39; at the same time, so at least 3 of the comparisons are always true."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1508949292, "post_id": 46937584, "comment_id": 80822507, "body": "Some working environments can catch this. For example, anything that integrates with clang-tidy (e.g., CLion) will be able to give <i>warning: logical expression is always true</i>"}, {"owner": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1508949851, "post_id": 46937584, "comment_id": 80822803, "body": "Please see <a href=\"https://stackoverflow.com/help/mcve\">Creating an MCVE</a>, you have provided more code than needed to reproduce the problem, as well as  a code sample that does not compile."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1508950015, "post_id": 46937584, "comment_id": 80822909, "body": "Consider a function -- <code>bool isValid(char c) {switch(c) {case &#39;Y&#39;:case &#39;y&#39;:case &#39;N&#39;:case &#39;n&#39;:return true;}return false;}</code>  -- Then it would simply be <code>while (!isValid(filled));</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1457, "user_id": 2638548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mkJxQ.jpg?s=128&g=1", "display_name": "dlasalle", "link": "https://stackoverflow.com/users/2638548/dlasalle"}, "is_accepted": false, "score": 3, "last_activity_date": 1508949017, "creation_date": 1508949017, "answer_id": 46937633, "question_id": 46937584, "link": "https://stackoverflow.com/questions/46937584/chars-in-do-while-loop-conditions/46937633#46937633", "title": "Chars in do while loop conditions", "body": "<p>You need to use <code>&amp;&amp;</code> not <code>||</code>:</p>\n\n<pre><code>} while (filled != 'Y' &amp;&amp; filled != 'N' &amp;&amp; filled != 'y' &amp;&amp; filled != 'n');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 4, "last_activity_date": 1508949049, "creation_date": 1508949049, "answer_id": 46937647, "question_id": 46937584, "link": "https://stackoverflow.com/questions/46937584/chars-in-do-while-loop-conditions/46937647#46937647", "title": "Chars in do while loop conditions", "body": "<p>Your loop end condition is wrong:</p>\n\n<pre><code>while (filled != 'Y' || filled != 'N' || filled != 'y' || filled != 'n');\n</code></pre>\n\n<p>consider that the value is <code>'y'</code> then your condition will be:</p>\n\n<pre><code>(true || true || false || true)\n</code></pre>\n\n<p>which evaluates to <code>true</code>.</p>\n\n<p>Change to:</p>\n\n<pre><code>while (filled != 'Y' &amp;&amp; filled != 'N' &amp;&amp; filled != 'y' &amp;&amp; filled != 'n');\n</code></pre>\n\n<p>Then it will be:</p>\n\n<pre><code>-&gt; 'y' (true &amp;&amp; true &amp;&amp; false &amp;&amp; true) -&gt; false\n-&gt; 'l' (true &amp;&amp; true &amp;&amp; true &amp;&amp; true) -&gt; true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": false, "score": 1, "last_activity_date": 1508950146, "creation_date": 1508950146, "answer_id": 46937947, "question_id": 46937584, "link": "https://stackoverflow.com/questions/46937584/chars-in-do-while-loop-conditions/46937947#46937947", "title": "Chars in do while loop conditions", "body": "<p>If you write it as you say it, perhaps it would be more clear and will help to avoid these mistakes:</p>\n\n<pre><code>do\n{\n    cout &lt;&lt; \"Would you like a filled shape? [Y or N]: \";\n    cin &gt;&gt; filled;\n    if (filled == 'Y' || filled == 'N' || filled == 'y' || filled == 'n')\n       break;\n} \nwhile (true);\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 8636731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0b030748af845801968dc693b11fb5?s=128&d=identicon&r=PG&f=1", "display_name": "Derek M", "link": "https://stackoverflow.com/users/8636731/derek-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1976, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1508950146, "creation_date": 1508948873, "last_edit_date": 1508949880, "question_id": 46937584, "link": "https://stackoverflow.com/questions/46937584/chars-in-do-while-loop-conditions", "title": "Chars in do while loop conditions", "body": "<p>I am having trouble with the last do while loop in my code. I have conditions set to stop the look when Y, N, y, or n are entered but even if those values are entered the loops continues to run and continue to ask for a Y or N. In debugging it seems that the Ascii value for the character is also stored in the variable? What do I need to change to have the do while loop end when there is an input of any of those 4 characters?</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;``\n\nusing namespace std;\n\nint main()\n{   \n  int numberOfShapes, i, j, k, rectangleBase, rectangleHeight;\n  char star = '*';\n  char filled;\n\n  do\n   {\n    cout &lt;&lt; \"Enter the integer between 6 and 20 that you would like to be the base of the rectangle: \";\n    cin &gt;&gt; rectangleBase;\n\n   }while (rectangleBase &lt; 6 || rectangleBase &gt; 20);\n\n  rectangleHeight = rectangleBase / 2;\n  do\n   {\n    cout &lt;&lt; \"Enter the number of shapes you would like to draw(Greater than 0 and less than or equal to 10: \";\n    cin &gt;&gt; numberOfShapes;\n   } while (numberOfShapes &lt;= 0 || numberOfShapes &gt; 10);\n\n  do\n  {\n    cout &lt;&lt; \"Would you like a filled shape? [Y or N]: \";\n    cin &gt;&gt; filled;\n  } while (filled != 'Y' || filled != 'N' || filled != 'y' || filled != 'n');\n</code></pre>\n"}, {"tags": ["c++", "libcurl", "curlpp"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1508951493, "post_id": 46937576, "comment_id": 80823715, "body": "If your debug and release libraries are named the same <code>libcurl_a.lib</code> I don&#39;t see the point of the #ifdef _DEBUG"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1508954464, "post_id": 46937576, "comment_id": 80825425, "body": "You&#39;ve screwed up your lib path. Reset it to the default and only use the <i>additional library path</i> setting under linker settings."}], "owner": {"reputation": 335, "user_id": 3524889, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a9cb1fb1fe0b45219dee2fc305ce5795?s=128&d=identicon&r=PG&f=1", "display_name": "reyyez", "link": "https://stackoverflow.com/users/3524889/reyyez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 729, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1508948846, "creation_date": 1508948846, "question_id": 46937576, "link": "https://stackoverflow.com/questions/46937576/curlpp-error-from-libcurl-obj-and-libcurl-a-lib", "title": "curlpp error from LibCurl.obj and libcurl_a.lib", "body": "<p>When executing the following code I receive LNK2019 errors. I have set the Runtime Library as <strong>Multi-threaded (/MT)</strong>:</p>\n\n<pre><code>// LibCurl.cpp : Defines the entry point for the console application.\n#include \"stdafx.h\"\n// errors here solved via C:\\Users\\homeDir\\Documents\\Tools\\curlpp-0.8.1\\include\n#include &lt;curlpp/cURLpp.hpp&gt;\n#include &lt;curlpp/Options.hpp&gt;\n#include &lt;curlpp/Easy.hpp&gt;\n#include \"curl/curl.h\"\n\n#ifdef _DEBUG\n#pragma comment(lib, \"libcurl_a.lib\")\n#else\n#pragma comment(lib, \"libcurl_a.lib\")\n#endif\n\nint main()\n{\n    curl_global_init(CURL_GLOBAL_DEFAULT);\n    CURL *curl = curl_easy_init();\n    if (curl) {\n        CURLcode res;\n        curl_easy_setopt(curl, CURLOPT_URL, \"http://www.dynamsoft.com\");\n        res = curl_easy_perform(curl);\n        curl_easy_cleanup(curl);\n    }\n    curl_global_cleanup();\n    printf(\"Press any key to continue\\n\");\n    getchar();\n\n    curlpp::Cleanup myCleanup;\n\n    return 0;\n}\n</code></pre>\n\n<p>Error is as follows:</p>\n\n<p>Severity    Code    Description Project File    Line    Suppression State\nError   LNK2001 unresolved external symbol __imp__fgets LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(netrc.obj) 1<br>\nError   LNK2019 unresolved external symbol \"public: __thiscall curlpp::Cleanup::Cleanup(void)\" (??0Cleanup@curlpp@@QAE@XZ) referenced in function _main LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\LibCurl.obj  1<br>\nError   LNK2019 unresolved external symbol \"public: __thiscall curlpp::Cleanup::~Cleanup(void)\" (??1Cleanup@curlpp@@QAE@XZ) referenced in function _main    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\LibCurl.obj  1<br>\nError   LNK2019 unresolved external symbol __imp__fgets referenced in function _Curl_cookie_init    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(cookie.obj)    1<br>\nError   LNK2019 unresolved external symbol __imp__fopen referenced in function _Curl_cookie_init    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(cookie.obj)    1<br>\nError   LNK2001 unresolved external symbol __imp__fopen LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(vtls.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__fopen LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(mime.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__fopen LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(netrc.obj) 1<br>\nError   LNK2019 unresolved external symbol __imp__fputs referenced in function _Curl_flush_cookies  LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(cookie.obj)    1<br>\nError   LNK2001 unresolved external symbol __imp____stdio_common_vsscanf    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(telnet.obj)    1<br>\nError   LNK2001 unresolved external symbol __imp____stdio_common_vsscanf    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(rtsp.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp____stdio_common_vsscanf    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(imap.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp____stdio_common_vsscanf    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(transfer.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp____stdio_common_vsscanf    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(http.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp____stdio_common_vsscanf    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(parsedate.obj) 1<br>\nError   LNK2001 unresolved external symbol __imp____stdio_common_vsscanf    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(ftp.obj)   1<br>\nError   LNK2001 unresolved external symbol __imp____stdio_common_vsscanf    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(cookie.obj)    1<br>\nError   LNK2001 unresolved external symbol __imp____stdio_common_vsscanf    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(hostip.obj)    1<br>\nError   LNK2001 unresolved external symbol __imp____stdio_common_vsscanf    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(url.obj)   1<br>\nError   LNK2001 unresolved external symbol __imp____stdio_common_vsscanf    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(http_proxy.obj)    1<br>\nError   LNK2001 unresolved external symbol __imp___time64   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(tftp.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp___time64   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(cookie.obj)    1<br>\nError   LNK2001 unresolved external symbol __imp___time64   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(hostip.obj)    1<br>\nError   LNK2001 unresolved external symbol __imp___time64   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(http.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp___time64   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(ftp.obj)   1<br>\nError   LNK2001 unresolved external symbol __imp__strncmp   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(dotdot.obj)    1<br>\nError   LNK2001 unresolved external symbol __imp__strncmp   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(curl_sasl.obj) 1<br>\nError   LNK2001 unresolved external symbol __imp__strncmp   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(ftplistparser.obj) 1<br>\nError   LNK2001 unresolved external symbol __imp__strncmp   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(http.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__strncmp   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(mprintf.obj)   1<br>\nError   LNK2001 unresolved external symbol __imp__strncmp   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(ftp.obj)   1<br>\nError   LNK2001 unresolved external symbol __imp__strncmp   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(rtsp.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__strncmp   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(cookie.obj)    1<br>\nError   LNK2001 unresolved external symbol __imp__strncmp   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(vtls.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__strncmp   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(url.obj)   1<br>\nError   LNK2001 unresolved external symbol __imp__strncmp   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(connect.obj)   1<br>\nError   LNK2001 unresolved external symbol __imp__strncpy   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(telnet.obj)    1<br>\nError   LNK2001 unresolved external symbol __imp__strncpy   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(curl_sspi.obj) 1<br>\nError   LNK2001 unresolved external symbol __imp__strncpy   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(url.obj)   1<br>\nError   LNK2001 unresolved external symbol __imp__strncpy   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(strerror.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__strncpy   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(ftp.obj)   1<br>\nError   LNK2001 unresolved external symbol __imp__fread LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(formdata.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__fread LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(vtls.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__fread LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(url.obj)   1<br>\nError   LNK2001 unresolved external symbol __imp__fread LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(transfer.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__fread LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(mime.obj)  1<br>\nError   LNK2019 unresolved external symbol __imp__fseek referenced in function _Curl_pin_peer_pubkey    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(vtls.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__fseek LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(transfer.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__fseek LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(mime.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__fseek LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(formdata.obj)  1<br>\nError   LNK2019 unresolved external symbol __imp__ftell referenced in function _Curl_pin_peer_pubkey    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(vtls.obj)  1<br>\nError   LNK2019 unresolved external symbol __imp__getenv referenced in function _curl_global_sslset LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(vtls.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__getenv    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(getenv.obj)    1<br>\nError   LNK2019 unresolved external symbol __imp__fwrite referenced in function _Curl_init_userdefined  LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(url.obj)   1<br>\nError   LNK2001 unresolved external symbol __imp__fwrite    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(sendf.obj) 1<br>\nError   LNK2019 unresolved external symbol __imp__read referenced in function _curlx_read   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(warnless.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__read  LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\OLDNAMES.lib(read.obi)   1<br>\nError   LNK2019 unresolved external symbol __imp__write referenced in function _curlx_write LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(warnless.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__write LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\OLDNAMES.lib(write.obi)  1<br>\nError   LNK2019 unresolved external symbol __imp___gmtime64 referenced in function _Curl_gmtime LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(parsedate.obj) 1<br>\nError   LNK2019 unresolved external symbol __imp__strerror referenced in function _Curl_strerror    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(strerror.obj)  1<br>\nError   LNK2019 unresolved external symbol __imp____sys_nerr referenced in function _Curl_strerror  LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(strerror.obj)  1<br>\nError   LNK2019 unresolved external symbol __imp___beginthreadex referenced in function _Curl_thread_create LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(curl_threads.obj)  1<br>\nError   LNK2019 unresolved external symbol __imp__close referenced in function _file_done   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(file.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__close LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\OLDNAMES.lib(close.obi)  1<br>\nError   LNK2019 unresolved external symbol __imp__open referenced in function _file_connect LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(file.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__open  LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\OLDNAMES.lib(open.obi)   1<br>\nError   LNK2019 unresolved external symbol __imp___fstat64 referenced in function _file_do  LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(file.obj)  1<br>\nError   LNK2019 unresolved external symbol __imp___getpid referenced in function _smb_format_message    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(smb.obj)   1<br>\nError   LNK2019 unresolved external symbol __imp__access referenced in function _curl_mime_filedata LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(mime.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp__access    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\OLDNAMES.lib(access.obi) 1<br>\nError   LNK2019 unresolved external symbol __imp___stat64 referenced in function _curl_mime_filedata    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\libcurl_a.lib(mime.obj)  1<br>\nError   LNK2001 unresolved external symbol __imp___open LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\OLDNAMES.lib(open.obi)   1<br>\nError   LNK2001 unresolved external symbol __imp___access   LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\OLDNAMES.lib(access.obi) 1<br>\nError   LNK2019 unresolved external symbol __except_handler4_common referenced in function __except_handler4    LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\LibCurl\\MSVCRT.lib(<em>chandler4gs</em>.obj)    1<br>\nError   LNK1120 29 unresolved externals LibCurl C:\\Users\\939508\\Documents\\C++ Projects\\LibCurl\\Debug\\LibCurl.exe    1   </p>\n\n<p><strong>Please refer to <a href=\"https://stackoverflow.com/questions/46935492/visual-studio-2017-and-curlpp-library-lnk2019-error?noredirect=1#comment80818286_46935492\">Visual Studio 2017 and curlpp library LNK2019 error</a> if you would like to see my configurations for my project.</strong></p>\n"}, {"tags": ["c++", "visual-studio-2010", "visual-c++", "command-line-interface"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1508948657, "post_id": 46937486, "comment_id": 80822180, "body": "I don&#39;t think <code>*.cpp</code> will work."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5473227"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1508948707, "post_id": 46937486, "comment_id": 80822211, "body": "it was working fine before i tried linking against a library, but maybe you&#39;re right :\\ i&#39;ll give it a try"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5473227"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1508955696, "post_id": 46937486, "comment_id": 80826116, "body": "nope, doesn&#39;t seem to work :("}], "owner": {"user_type": "does_not_exist", "display_name": "user5473227"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509130315, "creation_date": 1508948543, "last_edit_date": 1509130315, "question_id": 46937486, "link": "https://stackoverflow.com/questions/46937486/vc-compiler-cli-how-to-link-against-library", "title": "VC compiler CLI how to link against library", "body": "<p>I'm simply trying to link against the SDL library using the Visual c compiler and the CLI.</p>\n\n<p>The command i use is the following:</p>\n\n<pre><code>  cl /I \"..\\lib\\\" \"..\\src\\*.cpp\" \"SDL2main.lib\" /Fe \"main.exe\"\n</code></pre>\n\n<p>As you can see, all im trying to do is include the \"..\\lib\" folder (which is where the SDL headers are located as well as the lib files) and then i specify what source files i want it to compile from the \"src\" directory and last i specify a lib i want to link against (namely the SDL2main.lib).</p>\n\n<p>But when i run it i get the following output:</p>\n\n<pre><code>  cl : Command line error D8003 : missing source filename\n</code></pre>\n\n<p>I tried figuring it out myself by looking at the msdn page, but its honestly quite confusing.</p>\n"}, {"tags": ["c++", "c", "linux", "gcc"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1508947916, "post_id": 46937263, "comment_id": 80821751, "body": "Most Linux distributions have a separate package that includes all the development files. On Fedora, for example, you would install the libstdc++-devel package."}, {"owner": {"reputation": 89, "user_id": 7179701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4bed3e1744626db3ac2744d6518da?s=128&d=identicon&r=PG&f=1", "display_name": "emmasaunders123", "link": "https://stackoverflow.com/users/7179701/emmasaunders123"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508948683, "post_id": 46937263, "comment_id": 80822198, "body": "Thanks, so I could download something similar for Ubuntu?  I&#39;m concerned as I  am compiling a simple c file and when making larger projects in Cmake, I get complaints that it can&#39;t find the cc1.exe, and it can&#39;t as its not present in the include directory of the compiler I am using"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508949075, "post_id": 46937263, "comment_id": 80822389, "body": "Use the dpkg command to search for all packages whose names contain &quot;gcc&quot; or &quot;libstdc&quot;. Read their description. Read the documentation for the dpkg command. Figure it out yourself."}, {"owner": {"reputation": 89, "user_id": 7179701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4bed3e1744626db3ac2744d6518da?s=128&d=identicon&r=PG&f=1", "display_name": "emmasaunders123", "link": "https://stackoverflow.com/users/7179701/emmasaunders123"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508949290, "post_id": 46937263, "comment_id": 80822505, "body": "what kind of advice is that - figure it out yourself, don&#39;t you think I tried.  I can read the description of every version of gcc i have installed, where is that going to get me when I have a specific query"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1508949563, "post_id": 46937263, "comment_id": 80822648, "body": "The most useful skill a developer can have is to know where to find and how to understand technical documentation. For example had you read the documentation I referred you to, you would&#39;ve known that it includes not only packages that are already installed, but all packages that <b><i>can</i></b> be installed, in addition. Then, it becomes trivial to review the list, and install the ones that tell you they&#39;re for C++."}, {"owner": {"reputation": 89, "user_id": 7179701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4bed3e1744626db3ac2744d6518da?s=128&d=identicon&r=PG&f=1", "display_name": "emmasaunders123", "link": "https://stackoverflow.com/users/7179701/emmasaunders123"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508949815, "post_id": 46937263, "comment_id": 80822784, "body": "well, firstly I am not a developer but trying my best, secondly i have installed libstdc++ no to avail"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508950244, "post_id": 46937263, "comment_id": 80823042, "body": "I just verified on someone else&#39;s Ubuntu 16 laptop, using dpkg, that one needs to install the &quot;g++&quot; and the correct &quot;libstdc++-dev&quot; packages. And I didn&#39;t have to ask someone else on stackoverflow.com to do this for me."}, {"owner": {"reputation": 89, "user_id": 7179701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4bed3e1744626db3ac2744d6518da?s=128&d=identicon&r=PG&f=1", "display_name": "emmasaunders123", "link": "https://stackoverflow.com/users/7179701/emmasaunders123"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508950519, "post_id": 46937263, "comment_id": 80823193, "body": "I&#39;ve already installed g++ and libstdc++6 still the same error  p.s you are a better developer than me - this isn&#39;t a competition - i&#39;ve been struggling for two days"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1508953121, "post_id": 46937263, "comment_id": 80824682, "body": "Learn to read carefully.  <code>libstdc++6</code> is not the same as <code>libstdc++-devel</code>"}, {"owner": {"reputation": 671, "user_id": 1729825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d83a68a5cecb60d7d1d0ff391585401?s=128&d=identicon&r=PG", "display_name": "simp76", "link": "https://stackoverflow.com/users/1729825/simp76"}, "edited": false, "score": 0, "creation_date": 1509025078, "post_id": 46937263, "comment_id": 80858912, "body": "Those files are part of libc development package linux-libc-dev package. If it isn&#39;t there you&#39;ll need to install the package. The kernel headers are part of package linux-headers-&lt;your-kernel-version&gt; package. Something like linux-headers-4.4.0-47. These contain only kernel headers. This post has some relevant information too - <a href=\"https://stackoverflow.com/questions/37158651/why-is-stddef-h-not-in-usr-include\" title=\"why is stddef h not in usr include\">stackoverflow.com/questions/37158651/&hellip;</a>"}], "owner": {"reputation": 89, "user_id": 7179701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4bed3e1744626db3ac2744d6518da?s=128&d=identicon&r=PG&f=1", "display_name": "emmasaunders123", "link": "https://stackoverflow.com/users/7179701/emmasaunders123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 469, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508947803, "creation_date": 1508947803, "question_id": 46937263, "link": "https://stackoverflow.com/questions/46937263/g-gcc-include-files-not-found", "title": "g++ gcc include files not found", "body": "<p>Hi I have a few versions of gcc and g++ on my Ubuntu 16.04 which i select with alternative config.  When compiling a very simple source the compiler can't find the headers.(stddef.h: No such file or directory)</p>\n\n<p>Upon investigation the gcc installations don't have a full directory, for example:</p>\n\n<p>usr/lib/gcc/x86_64-linux-gnu/4.8    has an include directory with cc1.exe</p>\n\n<p>whilst:</p>\n\n<p>usr/lib/gcc/x86_64-linux-gnu/4.7    had no include directory and no cc1.exe (just a cc1plus.exe)</p>\n\n<p>I have re-installed 4.7 but can't seem to get it to be a complete installation ,any help?</p>\n\n<p>Thanks</p>\n\n<p>Emma</p>\n"}, {"tags": ["c++", "virtual", "base", "derived-class"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1508947298, "post_id": 46937041, "comment_id": 80821350, "body": "You don&#39;t show how you run this code. Please include a <code>main</code>"}, {"owner": {"reputation": 478, "user_id": 1725816, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0e46d33a24749378a59c25348e8bc435?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1725816/kevin"}, "edited": false, "score": 3, "creation_date": 1508947372, "post_id": 46937041, "comment_id": 80821399, "body": "Your unknownDerived has been <a href=\"https://en.wikipedia.org/wiki/Object_slicing\" rel=\"nofollow noreferrer\">sliced</a>"}, {"owner": {"reputation": 11, "user_id": 8832639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3925173006015db754f8a7d67af28b4a?s=128&d=identicon&r=PG&f=1", "display_name": "alam", "link": "https://stackoverflow.com/users/8832639/alam"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1508947633, "post_id": 46937041, "comment_id": 80821570, "body": "@MadPhysicist the main is <code>myClass test; test.whosthere();</code>"}, {"owner": {"reputation": 11, "user_id": 8832639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3925173006015db754f8a7d67af28b4a?s=128&d=identicon&r=PG&f=1", "display_name": "alam", "link": "https://stackoverflow.com/users/8832639/alam"}, "reply_to_user": {"reputation": 478, "user_id": 1725816, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0e46d33a24749378a59c25348e8bc435?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1725816/kevin"}, "edited": false, "score": 0, "creation_date": 1508947674, "post_id": 46937041, "comment_id": 80821594, "body": "@Kevin is there anyway to avoid this? as the exact derived class is unknown until construction"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1508954494, "post_id": 46937041, "comment_id": 80825441, "body": "@alam. I&#39;m not seeing an empty constructor."}], "answers": [{"tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": false, "score": 4, "last_activity_date": 1508947554, "creation_date": 1508947554, "answer_id": 46937183, "question_id": 46937041, "link": "https://stackoverflow.com/questions/46937041/how-to-declare-an-unknown-derived-class-as-base-class-as-a-member-and-allow-th/46937183#46937183", "title": "How to declare an &quot;unknown&quot; derived class as base class as a member and allow the derived version of member function to be called?", "body": "<p>When you declare Base as a member, Base is what you actually get.  Even if you assign a Derived type to it, you experience what's called \"slicing\", where only the Base part of the derived object is copied, and your object is still a Base.</p>\n\n<p>In C++, polymorphism only works through <em>pointers</em> and through <em>references</em>.</p>\n\n<p>To make a real member object (not an indirection to the object) in myClass, you will need to make myClass have a template parameter, and you can decide at compile time what type it will be.  Otherwise, you must use pointers and/or references.</p>\n\n<p>Now you have to be clear about memory ownership, and proper cleanup.  You may make the caller transfer the ownership of the object (by taking a unique_ptr) or you might insist that Base has a virtual clone() function to create a deep copy of the object. Further, you most likely will need a virtual destructor in your base class as well.</p>\n"}], "owner": {"reputation": 11, "user_id": 8832639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3925173006015db754f8a7d67af28b4a?s=128&d=identicon&r=PG&f=1", "display_name": "alam", "link": "https://stackoverflow.com/users/8832639/alam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508947554, "creation_date": 1508947120, "question_id": 46937041, "link": "https://stackoverflow.com/questions/46937041/how-to-declare-an-unknown-derived-class-as-base-class-as-a-member-and-allow-th", "title": "How to declare an &quot;unknown&quot; derived class as base class as a member and allow the derived version of member function to be called?", "body": "<p>I am currently trying to set a member of a class (myClass) to be some derived classes (Derived1, Derived2,...) of a Base class. Since the class don't know which derived class it is, the member type is set to Base class, it is only set to the derived class when constructed.</p>\n\n<p>The derived classes all have a common member function which is implemented differently (Base class has a virtual version). However, when the this function is called from myClass, it always call the Base class version rather than the derived classes.</p>\n\n<pre><code>class Base\n{\npublic:\n    Base(){}\n    virtual void who() { cout &lt;&lt; \"this is Base\"; }\n}\n\nclass Derived1 : public Base\n{\npublic:\n    Derived1() : Base() {}\n    void who() { cout &lt;&lt; \"this is Derived1\"; }\n}\n\nclass myClass\n{\nprivate:\n    Base unknownDerived;\npublic:\n    myClass(const Base&amp; inputDerived) { unknownDerived = inputDerived; }\n    void whosthere() { unknownDerived.who(); }\n}\n</code></pre>\n\n<p>The output above is \"this is Base\", the Base class version is called instead.</p>\n\n<p>Is there a way to include a member without specifying the actual derived class it is, but be able to call its specific function ( who() )?</p>\n\n<p>thanks a lot!</p>\n"}, {"tags": ["c++", "c++11", "lambda", "callback", "boost-asio"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1508947265, "post_id": 46937002, "comment_id": 80821334, "body": "This question needs a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. But I suspect you have a lifetime issue with one of the objects referred to in the call, perhaps <code>myQStrand</code> or <code>privateQ</code>. Now that I think of it, <code>error</code> is probably out of scope by the time your inner lambda is called."}, {"owner": {"reputation": 63, "user_id": 8721191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74ac4ba7aa122ec993ad9adea9417b3f?s=128&d=identicon&r=PG&f=1", "display_name": "scholarhedge", "link": "https://stackoverflow.com/users/8721191/scholarhedge"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1508947747, "post_id": 46937002, "comment_id": 80821646, "body": "How can I ensure that it keeps stays in scope?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1508949314, "post_id": 46937002, "comment_id": 80822522, "body": "If <code>error</code> is the only problem, you could probably capture it by value instead of by reference. It may not be the only problem, though. Can&#39;t tell with what you&#39;ve posted."}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1508948785, "creation_date": 1508948785, "answer_id": 46937560, "question_id": 46937002, "link": "https://stackoverflow.com/questions/46937002/asio-c-11-strand-post-causes-segmentation-fault-when-using-private-member-fu/46937560#46937560", "title": "ASIO (C++ 11) strand.post causes segmentation fault when using private member function", "body": "<p>You pass a reference to a local (<code>error</code>) to an asynchronous task. That's no good.</p>\n\n<p>The asynchronous task also keeps a copy of <code>this</code>, which might not live at the time the asynchronous task is executed (we can't know because the surrounding code is not shown)</p>\n"}], "owner": {"reputation": 63, "user_id": 8721191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74ac4ba7aa122ec993ad9adea9417b3f?s=128&d=identicon&r=PG&f=1", "display_name": "scholarhedge", "link": "https://stackoverflow.com/users/8721191/scholarhedge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508948785, "creation_date": 1508947000, "question_id": 46937002, "link": "https://stackoverflow.com/questions/46937002/asio-c-11-strand-post-causes-segmentation-fault-when-using-private-member-fu", "title": "ASIO (C++ 11) strand.post causes segmentation fault when using private member function", "body": "<p>I'm learning to use the ASIO library and I am trying to start a custom handler after an asynchronous read.</p>\n\n<pre><code>void myConnection::start()\n{\n    conSocket.async_read_some(asio::buffer(conIOBuf),\n        [this](const std::error_code error, std::size_t length)\n        {\n            std::cout &lt;&lt; \"LOG: Starting Callback\\n\";\n            myQStrand.post(\n                [this, &amp;error]\n                {\n                    pushToMyQ(privateQ, error);\n                });\n        });\n}\n</code></pre>\n\n<p>I've used gdb to debug the executable, however when I run it I get a segmentation fault at the pushToMyQ line in the code. I have checked both error and privateQ, they both have valid addresses and when their member functions are called they work.</p>\n\n<p>myConnection is a child from a purely virtual parent class to keep the naming and some of the accessors constant between another class. privateQ is held by a manager class that passes the queue by reference to myConnection which holds it as a private member.</p>\n\n<p>What could be causing the segmentation fault to happen in the lambda at the line where pushToMyQ is being executed?</p>\n"}, {"tags": ["c#", "c++", ".net", "visual-studio-2012"], "comments": [{"owner": {"reputation": 13, "user_id": 3229692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a667541ece80ecbce70c2e4f1c3f609?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Fairburn", "link": "https://stackoverflow.com/users/3229692/brandon-fairburn"}, "edited": false, "score": 0, "creation_date": 1508947680, "post_id": 46936990, "comment_id": 80821598, "body": "Here&#39;s a picture of the exception: <a href=\"https://imgur.com/a/9n8Yb\" rel=\"nofollow noreferrer\">imgur.com/a/9n8Yb</a> (the executable project being run is called Winvent)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1508947963, "post_id": 46936990, "comment_id": 80821772, "body": "Please <b>edit your post</b> with the <b>text</b> of your exception, not links to screen snapshots.  Firewalls may prevent people for following your link and helping you.  Screen snapshots may not be visible on mobile applications; but text size will adjust automatically."}, {"owner": {"reputation": 13, "user_id": 3229692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a667541ece80ecbce70c2e4f1c3f609?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Fairburn", "link": "https://stackoverflow.com/users/3229692/brandon-fairburn"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1508949296, "post_id": 46936990, "comment_id": 80822509, "body": "@ThomasMatthews Thanks, I&#39;ve updated the post."}], "answers": [{"tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": true, "score": 0, "last_activity_date": 1508948994, "creation_date": 1508948994, "answer_id": 46937624, "question_id": 46936990, "link": "https://stackoverflow.com/questions/46936990/turning-on-clr-support-is-causing-system-io-fileloadexception/46937624#46937624", "title": "Turning on CLR support is causing System.IO.FileLoadException", "body": "<p>Compile the DLL/executable using <code>/GF</code> switch.\nGo the Project Properties  and </p>\n\n<p><strong>C/C++->Code Generation->Enable String Pooling - Set to \u201cYes\u201d</strong></p>\n\n<p>Copied from MSDN discussion forum</p>\n\n<p><a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/1c9c687f-4221-4cdd-8497-dd3bba97de6a/systemiofileloadexception-when-starting-an-mfc-application-parially-compiled-with-clr?forum=vcgeneral\" rel=\"nofollow noreferrer\">https://social.msdn.microsoft.com/Forums/vstudio/en-US/1c9c687f-4221-4cdd-8497-dd3bba97de6a/systemiofileloadexception-when-starting-an-mfc-application-parially-compiled-with-clr?forum=vcgeneral</a></p>\n"}], "owner": {"reputation": 13, "user_id": 3229692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a667541ece80ecbce70c2e4f1c3f609?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Fairburn", "link": "https://stackoverflow.com/users/3229692/brandon-fairburn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 46937624, "answer_count": 1, "score": 0, "last_activity_date": 1508949273, "creation_date": 1508946971, "last_edit_date": 1508949273, "question_id": 46936990, "link": "https://stackoverflow.com/questions/46936990/turning-on-clr-support-is-causing-system-io-fileloadexception", "title": "Turning on CLR support is causing System.IO.FileLoadException", "body": "<p>I have a big legacy C++/MFC application which is being extended via a C# class library. There's a C++/CLI wrapper for this so the legacy program doesn't need CLR support turned on, but with that it is impossible to debug through the managed code while running the native project.</p>\n\n<p>Turning on CLR support causes a System.IO.FileLoadException to be thrown immediately on running the program. However, with that one setting turned off, the program runs as expected, I just can't step through the DLL code in the Visual Studio debugger. </p>\n\n<p>I know it doesn't have anything to do with a problem in the code. I have this working perfectly in Visual Studio 2017, but I need to get this working in VS 2012 for various reasons. </p>\n\n<p><strong>Edit to add exception text:</strong></p>\n\n<pre><code>An unhandled exception of type 'System.IO.FileLoadException' occurred in \nUnknown Module.\n\nAdditional information: Could not load file or assembly '&lt;Project&gt;, \nVersion=0.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. Could not find or load a type. (Exception from HRESULT: 0x80131522)\n</code></pre>\n"}, {"tags": ["c++", "templates", "lambda", "heap-memory", "stack-memory"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1508947021, "post_id": 46936964, "comment_id": 80821174, "body": "Is <code>my_callback</code> asynchronous? Does it block until it&#39;s complete?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1508948675, "post_id": 46936964, "comment_id": 80822191, "body": "@VittorioRomeo: See edit."}], "answers": [{"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1508962197, "post_id": 46937167, "comment_id": 80829717, "body": "While this is not a concrete answer, it&#39;s indeed useful for people to note. Emphasized the key points and +1."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 2, "last_activity_date": 1508962233, "last_edit_date": 1508962233, "creation_date": 1508947512, "answer_id": 46937167, "question_id": 46936964, "link": "https://stackoverflow.com/questions/46936964/passing-a-locally-created-lambda-for-use-in-a-callback-then-going-out-of-scope/46937167#46937167", "title": "Passing a locally-created lambda for use in a callback, then going out of scope", "body": "<p>You have a couple of issues here. </p>\n\n<p>One is that <strong>you can't depend on passing the lambda itself as a <code>void *</code></strong>, so you'll pretty much need to pass a pointer to the lambda (well, the closure created from the lambda, if you want to be precise). That means you'll need to ensure that the lambda remains valid until the callback completes.</p>\n\n<p>The second is a question about how those captures happen - <strong>capture by value, or by reference?</strong> If you capture by value, everything's fine. If you capture by reference, you also need to ensure that anything you've captured remains valid until the callback completes. If you capture a global by reference, that should normally be fine--but if you capture a local by reference, then the local (even potentially) goes out of scope before the lambda is invoked, using the reference will cause undefined behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1508973837, "post_id": 46937237, "comment_id": 80834469, "body": "For those of us who are slightly baffled by the last line of code: <a href=\"https://stackoverflow.com/questions/15935080/what-does-new-auto-do?s=2|68.8463\">What does `new auto` do?</a>"}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1509002348, "post_id": 46937237, "comment_id": 80843190, "body": "@einpoklum, given your latest edits to the question regarding the callback guarantees, and given that you&#39;re going to wrap the lib call anyway, I think that Quentin &#39;s second solution is honestly preferable ( no allocations, supports up to non-movable lambdas )"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1509007059, "post_id": 46937237, "comment_id": 80846165, "body": "... but I did not guarantee the lambda outlives the call, quite the contrary."}], "tags": [], "owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "is_accepted": true, "score": 2, "last_activity_date": 1509001197, "last_edit_date": 1509001197, "creation_date": 1508947735, "answer_id": 46937237, "question_id": 46936964, "link": "https://stackoverflow.com/questions/46936964/passing-a-locally-created-lambda-for-use-in-a-callback-then-going-out-of-scope/46937237#46937237", "title": "Passing a locally-created lambda for use in a callback, then going out of scope", "body": "<p>the most straightforward way might be ( assuming the C function is guaranteed to invoke the callback exactly once, and that the lambda is valid at callback point )</p>\n\n<pre><code>void my_callback(void * arbitrary_stuff) {\n    (*std::unique_ptr{ static_cast&lt;std::function&lt;void()&gt;*&gt;(arbitrary_stuff) })();\n}\n\nvoid adapted_add_callback( std::function&lt;void()&gt; actual_callback ) {\n    libFooAddCallback(my_callback, new auto( std::move(actual_callback) ) );\n}\n</code></pre>\n\n<p>if you don't want the function&lt;> overhead you'll need to implement your own type erasure ...</p>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1508949069, "post_id": 46937521, "comment_id": 80822385, "body": "By <code>libFunction()</code> do you mean <code>libFooAddCallback()</code>?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1508954719, "post_id": 46937521, "comment_id": 80825560, "body": "@einpoklum I do."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1508972369, "post_id": 46937521, "comment_id": 80834041, "body": "You would need another wrapper to allow me to confine it all to a single statement rather than defining the lambda variable first."}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1509016110, "post_id": 46937521, "comment_id": 80852355, "body": "I  would think that first example has undefined behavior and potential memory leaks... Can you explain how it should works? In particular, why you can create a unique pointer while data does not seems to be allocated on heap? And also why you can call <code>new</code> without a matching <code>delete</code>? And finally explain how you are sure to have correct behavior even it is unspecified if <code>cbkWrap</code> is called before pr after <code>cbkFunc</code>... and how you guarantee exception safety etc..."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1509016477, "post_id": 46937521, "comment_id": 80852608, "body": "@Phil1970 Of course! The <code>unique_ptr</code> takes ownership of the dynamically-allocated instance that has been <code>new</code>d in <code>cbkFunc</code> and passed through the <code>void *</code>, so that&#39;s your missing <code>delete</code>. I do not have order-of-evaluation issues since the parameter of <code>cbkWrap</code> is only there to enable type deduction (in fact, it is unnamed). And about exception safety... well, if something goes wrong before the callback is called, unfortunately that&#39;ll be a leak. But since the library has no idea that we&#39;re passing in a dynamically-allocated object, there&#39;s no way around it :/"}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1508962082, "last_edit_date": 1508962082, "creation_date": 1508948648, "answer_id": 46937521, "question_id": 46936964, "link": "https://stackoverflow.com/questions/46936964/passing-a-locally-created-lambda-for-use-in-a-callback-then-going-out-of-scope/46937521#46937521", "title": "Passing a locally-created lambda for use in a callback, then going out of scope", "body": "<p>I went in a way similar to <a href=\"https://stackoverflow.com/a/46937237/3233393\">Massimiliano Janes'</a>, but without the overhead of <code>std::function</code>. You have to ensure that the callback is called only once by the library.</p>\n\n<pre><code>using Callback = void(*)(void*);\n\n\n// Probes the type of the argument and generates a suitable cast &amp; invoke stub\n// Caution: self-destructs after use!\ntemplate &lt;class F&gt;\nCallback cbkWrap(F &amp;) {\n    return [](void *data) {\n        std::unique_ptr&lt;F&gt; retrieved(static_cast&lt;F*&gt;(data));\n        (*retrieved)();\n    };\n}\n\n// Moves the functor into a dynamically-allocated one\ntemplate &lt;class F&gt;\nvoid *cbkFunc(F &amp;f) {\n    return new F{std::move(f)};\n}\n\nint main() {\n    int x = 42;\n\n    auto lambda = [&amp;x] { std::cout &lt;&lt; x &lt;&lt; '\\n'; };\n\n    libFooAddCallback(cbkWrap(lambda), cbkFunc(lambda));\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/fb555127b0cf0421\" rel=\"nofollow noreferrer\">See it live on Coliru</a></p>\n\n<p>If you can ensure that the lambda outlives the potential calls, you can get rid of the dynamic memory allocations and simply pas a pointer to it as <code>data</code>:</p>\n\n<pre><code>// Probes the type of the argument and generates a suitable cast &amp; invoke stub\ntemplate &lt;class F&gt;\nCallback cbkWrap(F &amp;) {\n    return [](void *data) {\n        auto retrieved = static_cast&lt;F*&gt;(data);\n        (*retrieved)();\n    };\n}\n\nint main() {\n    int x = 42;\n\n    auto lambda = [&amp;x] { std::cout &lt;&lt; x &lt;&lt; '\\n'; };\n\n    libFooAddCallback(cbkWrap(lambda), &amp;lambda);\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b8bff84f0f2a9826\" rel=\"nofollow noreferrer\">See it live on Coliru</a></p>\n\n<p>There is unfortunately no way to give ownership of the lamba to the library without knowing exactly how many times it will be called.</p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 1, "accepted_answer_id": 46937237, "answer_count": 3, "score": 1, "last_activity_date": 1509001197, "creation_date": 1508946888, "last_edit_date": 1508948670, "question_id": 46936964, "link": "https://stackoverflow.com/questions/46936964/passing-a-locally-created-lambda-for-use-in-a-callback-then-going-out-of-scope", "title": "Passing a locally-created lambda for use in a callback, then going out of scope", "body": "<p>I'm using some (somewhat C-ish) library which involves a callback mechanism. The callback functions I can provide it take a <code>void*</code> as a parameter so you can pass arbitrary stuff to them. For the sake of this question let's assume the lambda doesn't take any parameters, but it does capture stuff.</p>\n\n<p>Now, I need to have my callback function invoke a lambda - and it must get this lambda somehow via the <code>void *</code>, i.e. we have</p>\n\n<pre><code>void my_callback(void * arbitrary_stuff) {\n    /* magic... and somehow the lambda passed  */\n    /* through `arbitrary_stuff` is invoked.   */\n}\n\n// ...\n\ntemplate &lt;T&gt;\nvoid adapted_add_callback(MagicTypeInvolvingT actual_callback) {\n    /* more magic */\n    libFooAddCallback(my_callback, something_based_on_actual_callback);\n}\n\n// ...\n\nvoid baz();\n\nvoid bar() {\n    int x;\n    adapted_add_callback([x]() { /* do something with x */ });\n    adapted_add_callback(baz);\n}\n</code></pre>\n\n<p>and I want to know what to replace <code>magic</code>, <code>more_magic</code> and <code>MagicTypeInvolvingT</code> with.</p>\n\n<p>Other than the typing challenge here, what I'm worried about, obviously, is how to make sure the data the lambda encapsulates is available on the stack for eventual use, as otherwise I should probably get some kind of segmentation fault.</p>\n\n<p>Notes:</p>\n\n<ul>\n<li><code>my_callback()</code> should be synchronous, in the sense that it'll execute the lambda on whatever thread it is on and return when it returns. It's either the fooLibrary or the lambda itself which do asynchronicity.</li>\n</ul>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1508946188, "post_id": 46936698, "comment_id": 80820596, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1508948423, "post_id": 46936698, "comment_id": 80822054, "body": "<b><i>Perhaps I am missing a delete[] tmp; after this-&gt;m_pNumber = tmp;?</i></b> No, adding <code>delete[] tmp</code> is wrong since you have <code>this-&gt;m_pNumber = tmp;</code> deleting tmp would free the memory that <code>this-&gt;m_pNumber</code> points to."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1508948463, "post_id": 46936698, "comment_id": 80822071, "body": "Didn&#39;t your compiler warn you are not returning a value from your function in all of the control paths?  <code>if (isValidPhonenumber(phone)) </code> -- and if the phone number isn&#39;t valid, what do you return?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1508948561, "post_id": 46936698, "comment_id": 80822133, "body": "<code>return *this;</code> should be after the if () {} block. Not inside it."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1508949540, "post_id": 46936698, "comment_id": 80822633, "body": "Is <code>this-&gt;amtNumbers</code> the same as <code>amtNumbers</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 3592, "user_id": 6276385, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89c7b071a5c25c2f6ccc6f1f41bdb2e3?s=128&d=identicon&r=PG&f=1", "display_name": "gonutz", "link": "https://stackoverflow.com/users/6276385/gonutz"}, "is_accepted": false, "score": 1, "last_activity_date": 1508946259, "creation_date": 1508946259, "answer_id": 46936734, "question_id": 46936698, "link": "https://stackoverflow.com/questions/46936698/debug-error-heap-corruption-detected-in-c/46936734#46936734", "title": "Debug error, heap corruption detected in C++", "body": "<p>You declare <code>long long* tmp = new long long[this-&gt;amtNumbers + 1];</code> and then use <code>tmp[amtNumbers + 1] = phone;</code> which is out of range. The max index is <code>this-&gt;amtNumbers</code> since the array is 0-indexed.</p>\n"}], "owner": {"reputation": 3, "user_id": 8832638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8415707a6ecab830e0798d1e4f8370?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/8832638/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "closed_date": 1508946678, "answer_count": 1, "score": -4, "last_activity_date": 1508946351, "creation_date": 1508946136, "last_edit_date": 1508946245, "question_id": 46936698, "link": "https://stackoverflow.com/questions/46936698/debug-error-heap-corruption-detected-in-c", "closed_reason": "Not suitable for this site", "title": "Debug error, heap corruption detected in C++", "body": "<p>Im running into an issue in one of my functions,</p>\n\n<pre><code>Contact&amp; Contact::operator+=(long long phone)\n{\n    if (isValidPhonenumber(phone)) {\n        long long* tmp = new long long[this-&gt;amtNumbers + 1];\n        for (int i = 0; i &lt; this-&gt;amtNumbers; i++) {\n            tmp[i] = this-&gt;m_pNumber[i];\n        }\n        tmp[amtNumbers + 1] = phone;\n        delete[] this-&gt;m_pNumber;\n        this-&gt;m_pNumber = tmp;\n        this-&gt;amtNumbers++;\n        return *this;\n    }\n}\n</code></pre>\n\n<p>I presume it is the <code>tmp[amtNumbers + 1] = phone;</code> that is causing this. But I dont understand why? I seem to have allocated enough memory. Perhaps I am missing a <code>delete[] tmp;</code> after <code>this-&gt;m_pNumber = tmp;</code>?</p>\n\n<p>But even with,</p>\n\n<pre><code>Contact&amp; Contact::operator+=(long long phone)\n{\n    if (isValidPhonenumber(phone)) {\n        long long* tmp = new long long[this-&gt;amtNumbers + 1];\n        for (int i = 0; i &lt; this-&gt;amtNumbers; i++) {\n            tmp[i] = this-&gt;m_pNumber[i];\n        }\n        tmp[amtNumbers + 1] = phone;\n        delete[] this-&gt;m_pNumber;\n        this-&gt;m_pNumber = tmp;\n        delete[] tmp;\n        this-&gt;amtNumbers++;\n        return *this;\n    }\n}\n</code></pre>\n\n<p>I run into the overflow error. Thoughts, suggestions? This is a number type, not character; I dont need to allocated anything extra for a null character.</p>\n"}, {"tags": ["c++", "visual-studio", "com", "visual-studio-2017", "atl"], "comments": [{"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1508946972, "post_id": 46936501, "comment_id": 80821138, "body": "The error probably means there&#39;s no out-of-process server available to serve this class (<a href=\"https://blogs.msdn.microsoft.com/adioltean/2005/06/24/when-cocreateinstance-returns-0x80080005-co_e_server_exec_failure/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/adioltean/2005/06/24/&hellip;</a>) So,  you talk about out-of-process but ... we only see .DLL stuff. Where is your server code?"}, {"owner": {"reputation": 21, "user_id": 3617424, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2095ea69bdf7dc446e649e7eaa0986bd?s=128&d=identicon&r=PG&f=1", "display_name": "zzz711", "link": "https://stackoverflow.com/users/3617424/zzz711"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1508949364, "post_id": 46936501, "comment_id": 80822547, "body": "@SimonMourier you are correct about about no server running. I started the exe that TestCom creates when built,  which I assume is my out of process server. Now when I run it I get a generic error message saying RPC_E_SERVERFAULT The server threw an exception. I did not include any server code in my question since  I made no modifications to the generated code."}], "owner": {"reputation": 21, "user_id": 3617424, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2095ea69bdf7dc446e649e7eaa0986bd?s=128&d=identicon&r=PG&f=1", "display_name": "zzz711", "link": "https://stackoverflow.com/users/3617424/zzz711"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 446, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508945555, "creation_date": 1508945555, "question_id": 46936501, "link": "https://stackoverflow.com/questions/46936501/unable-to-create-an-instance-of-ccomptr", "title": "Unable to create an instance of CComPtr", "body": "<p>I am trying to use a simple c++ out of process COM object, SimpleObject, with a console app I am writing using Visual Studio Community 2017 (15.3.5) and Windows 10, but I am unable to initialize my object. I am using an ATL project for SimpleObject with the simple object threading set to Apartment, Aggregation is set to yes, my interface is custom, and Free-threaded marshaller is enabled.</p>\n\n<p>I have registered the SimpleObject dll and exe successfully with the OS, but when I run my app prints to the console indicating that the object was successfully initialized. Debugging shows that My CComPtr is null and gives me the error: </p>\n\n<blockquote>\n  <p>0x80080005: Server execution failed.</p>\n</blockquote>\n\n<p>My Console App looks like this:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;atlbase.h&gt;\n\n#include \"..\\TestCOM\\TestCOM_i.h\"\n#include \"..\\TestCOM\\TestCOM_i.c\"\n\nint main(){\n    HRESULT hr = CoInitialize(NULL);\n\n    CComPTR&lt;ISimpleObject&gt; testCom;\n    hr = testCom.CoCreateInstance(CLSID_SimpleObject, NULL, CLSCTX_ALL);\n\n    if(!FAILED(hr)){\n        printf(\"Created!\\n\");\n        testCom.Release();\n    }\n\n    CoUninitialize();\n\n    return 0;\n}\n</code></pre>\n\n<p>My <code>.idl</code> file looks like this:</p>\n\n<pre><code>import \"oaidl.idl\";\nimport \"ocidl.idl\";\n\n[\n    object,\n    uuid(02f8b163-c674-4f9a-9b8d-d61bb5aca632),\n    pointer_default(unique)\n]\ninterface ISimpleObject : IUnknown\n{\n    HRESULT Hello();\n};\n[\n    uid(ec13d56e-de4f-4d1d-aed0-0f219d95effc),\n    version(1.0),\n]\nlibrary TestCOMLib\n{\n\n    [\n      uid(74f0adfcc-23ad-47c79a59-591dca8117a1)\n    ]\n    coclass SimpleObject\n    {\n        [default] interface ISImpleObject;\n    };\n};\n\nimport\"shobjidl.idl\";\nimport\"shobjidl.idl\";\nimport\"shobjidl.idl\";\n</code></pre>\n\n<p>The only thing that I added was <code>HRESULT Hello();</code></p>\n\n<p>My <code>SimpleObject.h</code> looks like this:</p>\n\n<pre><code>#pragma once\n#include \"resource.h\"\n#include \"TestCom_i.h\"    \nusing namespace ATL;\n\nclass ATL_NO_VTABLE CSimpleObject :\n      public CComObjectRootEx&lt;CComSingleThreadModel&gt;,\n      public CComCoClass&lt;CSimpleObject, &amp;CSimpleObject&gt;,\n      public ISImpleObject\n{\npublic:\n   CSimpleObject()\n   {\n       m_pkUnkMarshaler = NULL:\n   }\n\nDECLARE_REGISTRY_RESOURCEID(106)\n\nBEGIN_COM_MAP(CSImpleObject)\n    COM_INTERFACE_ENTRY(ISimpleObject)\n    COM_INTERFACE_ENTRY_AGGREGATE(IID_IMarshal, m_pkUnkMarshaler .p)\nEND_COM_MAP()\n\n   DECLARE_PROTECT_FINAL_CONSTRUCT()\n   DECLARE_GET_CONTROLLING_UNKNOWN()\n\n   HRESULT FinalConstruct()\n   {\n       return COCreateFreeThreadedMarshaler(\n           GerControllingUnknown(), &amp;m_pkUnkMarshaler .p);\n   }\n\n   void FinalRelease()\n   {\n       m_pkUnkMarshaler.Release();\n   }\n\n   CComPtr&lt;IUnkown&gt; m_pkUnkMarshaler;\n\npublic:\n    STDMETHOD(Hello)() {retrun S_OK; }\n};\nOBJECT_ENTRY_AUTO(__uuidof(SimpleObject), CSimpleObject)\n</code></pre>\n\n<p>The only thing I added was <code>STDMETHOD(Hello)() {retrun S_OK; }</code></p>\n\n<p>What am I missing? My Console app is based off <a href=\"https://msdn.microsoft.com/en-us/library/hh279683.aspx\" rel=\"nofollow noreferrer\">this example from Microsoft</a> and with the exception of the two added lines in <code>TestCom.idl</code> and <code>SimpleObject.h</code> everything is auto-generated by Visual Studio and the compiler. </p>\n"}, {"tags": ["c++", "opencv", "machine-learning", "svm"], "comments": [{"owner": {"reputation": 2837, "user_id": 6730448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/68eebbe4b190040ef1201b845374a7c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rick M.", "link": "https://stackoverflow.com/users/6730448/rick-m"}, "edited": false, "score": 0, "creation_date": 1508951826, "post_id": 46936341, "comment_id": 80823904, "body": "If you don&#39;t have the same number of features in the trained and tested samples, how (rather why?) do you expect SVM to work?"}, {"owner": {"reputation": 611, "user_id": 2296663, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d1e10e7ec515c3a5a5016b12faf46f3?s=128&d=identicon&r=PG", "display_name": "lezan", "link": "https://stackoverflow.com/users/2296663/lezan"}, "reply_to_user": {"reputation": 2837, "user_id": 6730448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/68eebbe4b190040ef1201b845374a7c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rick M.", "link": "https://stackoverflow.com/users/6730448/rick-m"}, "edited": false, "score": 0, "creation_date": 1508954051, "post_id": 46936341, "comment_id": 80825186, "body": "@RickM. Samples from trained and tested dataset have the same number of features, but now new image."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1509379352, "post_id": 46936341, "comment_id": 80985769, "body": "<b>Why</b> do you need 140 features?"}, {"owner": {"reputation": 611, "user_id": 2296663, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d1e10e7ec515c3a5a5016b12faf46f3?s=128&d=identicon&r=PG", "display_name": "lezan", "link": "https://stackoverflow.com/users/2296663/lezan"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1509380876, "post_id": 46936341, "comment_id": 80986686, "body": "@rayryeng As you can see, my model have 140 features and I need to get the same number of features (opencv tells me that with Assertation failed) to try to classify a new image. Am I missing something?"}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 1, "creation_date": 1509381081, "post_id": 46936341, "comment_id": 80986795, "body": "That doesn&#39;t answer my question. WHY do you need 140 features for training? Can&#39;t you use 66?"}, {"owner": {"reputation": 611, "user_id": 2296663, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d1e10e7ec515c3a5a5016b12faf46f3?s=128&d=identicon&r=PG", "display_name": "lezan", "link": "https://stackoverflow.com/users/2296663/lezan"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1509381401, "post_id": 46936341, "comment_id": 80986957, "body": "@rayryeng sure, I can, but if do not know how many features an image in real time can have, how can I chose a right number of features?"}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 1, "creation_date": 1509382221, "post_id": 46936341, "comment_id": 80987419, "body": "Sure you can.  That&#39;s defined by the number of features in SIFT (usually 128) and your BOF histogram, usually defined as the total number of centroids defined after vector quantization. I don&#39;t see why the total number of features for your test images changes when you apply the same transformation. We can&#39;t begin to understand where this discrepancy occurs until you show us more of your code - specifically when you calculate the SIFT features and calculate the BOF histograms."}, {"owner": {"reputation": 611, "user_id": 2296663, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d1e10e7ec515c3a5a5016b12faf46f3?s=128&d=identicon&r=PG", "display_name": "lezan", "link": "https://stackoverflow.com/users/2296663/lezan"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1509385319, "post_id": 46936341, "comment_id": 80989304, "body": "@rayryeng I am going to add it."}], "owner": {"reputation": 611, "user_id": 2296663, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d1e10e7ec515c3a5a5016b12faf46f3?s=128&d=identicon&r=PG", "display_name": "lezan", "link": "https://stackoverflow.com/users/2296663/lezan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 850, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509386859, "creation_date": 1508945137, "last_edit_date": 1509386859, "question_id": 46936341, "link": "https://stackoverflow.com/questions/46936341/svm-predict-on-opencv-how-can-i-extract-the-same-number-of-features", "title": "SVM predict on OpenCV: how can I extract the same number of features", "body": "<p>I am play with OpenCV and SVM to make a classifier to predict facial expression. I have no problem to classify test dadaset, but when I try to predict a new image, I get this:</p>\n\n<p>OpenCV Error: Assertion failed (samples.cols == var_count &amp;&amp; samples.type() == CV_32F) in cv::ml::SVMImpl::predict</p>\n\n<p>Error is pretty clear and I have a different number of columns, but of the same type.\nI do not know how to achieve that, because I have a matrix of dimensions 1xnumber_of_features, but numbers_of_features is not the same of the trained and tested samples. How can I extract the same number of features from another image? Am I missing something?</p>\n\n<p>To train classifier I did:</p>\n\n<ul>\n<li>Detect face and save ROI;</li>\n<li>Sift to extract features;</li>\n<li>kmeans to cluster them;</li>\n<li>bag of words to get the same numbers of features for each image;</li>\n<li>pca to reduce;</li>\n<li>train on train dadaset;</li>\n<li>predict on test dadaset;</li>\n</ul>\n\n<p>On the new image I did the same thing.</p>\n\n<p>I tried to resize the new image to the same size, but nothing, same error ( and different number of columns, aka features). Vectors are of the same type (CF_32F).</p>\n\n<p><strong>[EDIT 1]</strong> Let's try to be more specific.\nAfter  succesfuly trained my classifier, I save SVM model in this way</p>\n\n<pre><code>svmClassifier-&gt;save(baseDatabasePath);\n</code></pre>\n\n<p>Then I load it when I need to do real time prediction in this way</p>\n\n<pre><code>cv::Ptr&lt;cv::ml::SVM&gt; svmClassifier;\nsvmClassifier = cv::ml::StatModel::load&lt;ml::SVM&gt;(path);\n</code></pre>\n\n<p>Then loop,</p>\n\n<pre><code>while (true) \n{\n    getOneImage();\n    cv::Mat feature = extractFeaturesFromSingleImage();\n    float labelPredicted = svmClassifier-&gt;predict(feature);\n    cout &lt;&lt; \"Label predicted is: \" &lt;&lt; labelPredicted &lt;&lt; endl;\n}\n</code></pre>\n\n<p>But <code>predict</code> returns the error. feature dimension is 1x66, for example. As you can see below, I need like 140 features</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;opencv_storage&gt;\n&lt;opencv_ml_svm&gt;\n  &lt;format&gt;3&lt;/format&gt;\n  &lt;svmType&gt;C_SVC&lt;/svmType&gt;\n  &lt;kernel&gt;\n    &lt;type&gt;RBF&lt;/type&gt;\n    &lt;gamma&gt;5.0625000000000009e-01&lt;/gamma&gt;&lt;/kernel&gt;\n  &lt;C&gt;1.2500000000000000e+01&lt;/C&gt;\n  &lt;term_criteria&gt;&lt;epsilon&gt;1.1920928955078125e-07&lt;/epsilon&gt;\n    &lt;iterations&gt;1000&lt;/iterations&gt;&lt;/term_criteria&gt;\n  &lt;var_count&gt;140&lt;/var_count&gt;\n  &lt;class_count&gt;7&lt;/class_count&gt;\n  &lt;class_labels type_id=\"opencv-matrix\"&gt;\n    &lt;rows&gt;7&lt;/rows&gt;\n    &lt;cols&gt;1&lt;/cols&gt;\n    &lt;dt&gt;i&lt;/dt&gt;\n    &lt;data&gt;\n      0 1 2 3 4 5 6&lt;/data&gt;&lt;/class_labels&gt;\n  &lt;sv_total&gt;172&lt;/sv_total&gt;\n</code></pre>\n\n<p></p>\n\n<p>I do not know how achieve 140 features, when SIFT, FAST or SURF just give me around 60 features. What am I missing?</p>\n\n<p><strong>EDIT 2</strong>: I am going to try to be more formal: how can I put my real time sample on the same dimension of train and test dataset?</p>\n\n<p><strong>EDIT 3:</strong>\nExtract features with sift and push on a vector of mat.</p>\n\n<pre><code>std::vector&lt;cv::Mat&gt; featuresVector;\nfor (int i = 0; i &lt; numberImages; ++i)\n{\n    cv::Mat face = cv::imread(facePath, CV_LOAD_IMAGE_GRAYSCALE);\n    cv::Mat featuresExtracted = runExtractFeature(face, featuresExtractionAlgorithm);\n    featuresVector.push_back(featuresExtracted);\n}\n</code></pre>\n\n<p>Get total features extracted from all images.</p>\n\n<pre><code>int numberFeatures = 0;\nfor (int i = 0; i &lt; featuresVector.size(); ++i)\n{\n    numberFeatures += featuresVector[i].rows;\n}\n</code></pre>\n\n<p>Prepare a mat to cluster features (I tried to follow <a href=\"https://docs.opencv.org/3.0.0/de/d63/kmeans_8cpp-example.html\" rel=\"nofollow noreferrer\">this</a> example)</p>\n\n<pre><code>cv::Mat featuresData = cv::Mat::zeros(numberFeatures, featuresVector[0].cols, CV_32FC1);\nint currentIndex = 0;\nfor (int i = 0; i &lt; featuresVector.size(); ++i)\n{\n    featuresVector[i].copyTo(featuresData.rowRange(currentIndex, currentIndex + featuresVector[i].rows));\n    currentIndex += featuresVector[i].rows;\n}\n</code></pre>\n\n<p>Perform clustering (I do not know how this parameter suite my case, my I think can be ok for now)</p>\n\n<pre><code>cv::Mat labels;\ncv::Mat centers;\nint binSize = 1000;\nkmeans(featuresData, binSize, labels, cv::TermCriteria(cv::TermCriteria::COUNT + cv::TermCriteria::EPS, 100, 1.0), 3, KMEANS_PP_CENTERS, centers);\n</code></pre>\n\n<p>Prepare a mat to perform bow.</p>\n\n<pre><code>cv::Mat featuresDataHist = cv::Mat::zeros(numberImages, binSize, CV_32FC1);\nfor (int i = 0; i &lt; numberImages; ++i)\n{\n    cv::Mat feature = cv::Mat::zeros(1, binSize, CV_32FC1);\n    int numberImageFeatures = featuresVector[i].rows;\n    for (int j = 0; j &lt; numberImageFeatures; ++j)\n    {\n        int bin = labels.at&lt;int&gt;(currentIndex + j);\n        feature.at&lt;float&gt;(0, bin) += 1;\n    }\n    cv::normalize(feature, feature);\n    feature.copyTo(featuresDataHist.row(i));\n    currentIndex += featuresVector[i].rows;\n}\n</code></pre>\n\n<p>PCA to try to reduce dimension.</p>\n\n<pre><code>cv::PCA pca(featuresDataHist, cv::Mat(), CV_PCA_DATA_AS_ROW, 50/*0.90*/);\ncv::Mat feature;\nfor (int i = 0; i &lt; numberImages; ++i) \n{\n    feature = pca.project(featuresDataHist.row(i));\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 4, "creation_date": 1508944872, "post_id": 46936232, "comment_id": 80819627, "body": "VLAs are a compiler extension supported by GCC."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1508944889, "post_id": 46936232, "comment_id": 80819637, "body": "What standard did you tell it to use? If you use something like <code>-std=c++14</code> it should not compile. It probably defaults to <code>-std=gnu-c++98</code> or something."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1508944900, "post_id": 46936232, "comment_id": 80819643, "body": "<code>int arr[x];</code> Is non-standard C++, if <code>x</code> is non-<code>constexpr</code>, but is, sometimes allowed by compiler extension."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1508944917, "post_id": 46936232, "comment_id": 80819661, "body": "That&#39;s a variable length array (VLA). It&#39;s a non-standard g++ extension. Prefer to use <code>std::vector</code>."}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "edited": false, "score": 0, "creation_date": 1508945061, "post_id": 46936232, "comment_id": 80819780, "body": "clang supports this too: <a href=\"https://wandbox.org/permlink/wBSVQS9tz45qWAPN\" rel=\"nofollow noreferrer\">wandbox.org/permlink/wBSVQS9tz45qWAPN</a>"}, {"owner": {"reputation": 1024, "user_id": 2441656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d540ddabdd3013d67723b76e340b0a0?s=128&d=identicon&r=PG", "display_name": "cnettel", "link": "https://stackoverflow.com/users/2441656/cnettel"}, "edited": false, "score": 0, "creation_date": 1508945207, "post_id": 46936232, "comment_id": 80819886, "body": "It should be noted that while it is non-standard C++, it is covered by C99. g++ &quot;simply&quot; allows the C syntax. Somewhat counterintuitive, C11 made it optional again.  <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Variable-length_array</a>"}], "owner": {"reputation": 326, "user_id": 6424154, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db82fd52fb7f6ccb23c1d3dcb3de9440?s=128&d=identicon&r=PG&f=1", "display_name": "chemdog95", "link": "https://stackoverflow.com/users/6424154/chemdog95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "closed_date": 1508945254, "answer_count": 0, "score": 2, "last_activity_date": 1508951566, "creation_date": 1508944801, "last_edit_date": 1508951566, "question_id": 46936232, "link": "https://stackoverflow.com/questions/46936232/why-can-i-create-and-use-this-array-at-runtime", "closed_reason": "Duplicate", "title": "Why can I create and use this array at runtime?", "body": "<p>I'm involved in a C++ coding course and today I was discussing dynamic memory allocation with someone else in the course. He was recounting that in his previous C++ course (which was the first exposure to programming he had), they would build and use arrays using something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(void) {\n    int x;\n    std::cin &gt;&gt; x;\n    int arr[x];\n\n    for (int i = 0; i &lt; x; i++) {\n        int k;\n        std::cin &gt;&gt; k;\n        arr[i] = k;\n    }\n\n    for (int i = 0; i &lt; x; i++) {\n        std::cout &lt;&lt; \"The value at arr[\" &lt;&lt; i &lt;&lt; \"] is \" &lt;&lt; arr[i] &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I compiled this without receiving any compilation errors using g++ and when I ran it (with small inputs for x) the output was exactly as expected. I changed the code to C and ran it using gcc and got the same result.</p>\n\n<p>Why does this work? We don't know the array size at compile time, but we aren't dynamically allocating any memory and we still can read/write without error. My assumption is that the OS automatically allocates a certain amount of memory to the stack and we are just relying on the fact some of this memory hasn't been used yet, but I'm not totally satisfied. If it's safe, why do we use dynamic allocation for arrays of unknown size? If it isn't safe, why doesn't a compiler give me a warning (or is there a specific flag I need to add to see this warning)? Any insight into what is actually going on here would be greatly appreciated.</p>\n"}, {"tags": ["c++", "square-bracket", "unary-function"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1508944772, "post_id": 46936187, "comment_id": 80819542, "body": "The would be the <a href=\"http://en.cppreference.com/w/cpp/language/lambda#Lambda_capture\" rel=\"nofollow noreferrer\">capture</a> of a <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">lambda expression</a>"}, {"owner": {"reputation": 158, "user_id": 8284309, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-r6KmJ4yURAU/AAAAAAAAAAI/AAAAAAAAAAA/RY92UtPW2YQ/photo.jpg?sz=128", "display_name": "ScienceDiscoverer", "link": "https://stackoverflow.com/users/8284309/sciencediscoverer"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1508947080, "post_id": 46936187, "comment_id": 80821212, "body": "Thanks, didn&#39;t knew about lambdas."}], "owner": {"reputation": 158, "user_id": 8284309, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-r6KmJ4yURAU/AAAAAAAAAAI/AAAAAAAAAAA/RY92UtPW2YQ/photo.jpg?sz=128", "display_name": "ScienceDiscoverer", "link": "https://stackoverflow.com/users/8284309/sciencediscoverer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1508944725, "answer_count": 0, "score": 0, "last_activity_date": 1508949240, "creation_date": 1508944703, "last_edit_date": 1508949240, "question_id": 46936187, "link": "https://stackoverflow.com/questions/46936187/what-is-the-meaning-of-square-brackets-before-unary-predictate", "closed_reason": "Duplicate", "title": "What is the meaning of square brackets before unary predictate", "body": "<p>I was reading this code on Rosettacode:\n<a href=\"http://rosettacode.org/wiki/Closest-pair_problem#C.2B.2B\" rel=\"nofollow noreferrer\">http://rosettacode.org/wiki/Closest-pair_problem#C.2B.2B</a></p>\n\n<p>And I stumbled upon this strange function inside of <code>std::copy_if()</code></p>\n\n<pre><code>std::copy_if(std::begin(yP), std::end(yP), std::back_inserter(yS),\n[&amp;minPair, &amp;xM](const point_t&amp; p) {\n    return std::abs(xM - p.first) &lt; minPair.first;\n});\n</code></pre>\n\n<p>What does <code>[&amp;minPair, &amp;xM]</code> before function means?</p>\n\n<p>Why function has no name and no return type? Compiler implicitly guesses that its <code>bool</code>?</p>\n"}, {"tags": ["java", "c++", "swig"], "comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1509037443, "post_id": 46935969, "comment_id": 80867324, "body": "Is this actually a variadic function?"}, {"owner": {"reputation": 139, "user_id": 1801386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97a4345c2d5f50c6b374b36708f4bab?s=128&d=identicon&r=PG", "display_name": "Mike Bogochow", "link": "https://stackoverflow.com/users/1801386/mike-bogochow"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1509041845, "post_id": 46935969, "comment_id": 80869754, "body": "@Flexo No, sorry I didn&#39;t think about how my syntax could be confused for that :P I edited my answer to clarify."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1509042544, "post_id": 46935969, "comment_id": 80870161, "body": "How does your C++ know the length of the array then? Is it fixed? Or magic end values? Or one of the omitted arguments? (What I&#39;m getting at is that a real, working but minimal example makes it way easier to understand exactly what&#39;s needed)"}, {"owner": {"reputation": 139, "user_id": 1801386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97a4345c2d5f50c6b374b36708f4bab?s=128&d=identicon&r=PG", "display_name": "Mike Bogochow", "link": "https://stackoverflow.com/users/1801386/mike-bogochow"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1509043265, "post_id": 46935969, "comment_id": 80870603, "body": "@Flexo I have edited my question filling in the actual missing parameters of my function as well as added what I would like the generated Java function signature to be."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1509046449, "post_id": 46935969, "comment_id": 80872435, "body": "Assuming amount is auto populated by the length of the Java array passed in I&#39;ll try and write something up over the weekend if nobody beats me to it"}], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 1801386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97a4345c2d5f50c6b374b36708f4bab?s=128&d=identicon&r=PG", "display_name": "Mike Bogochow", "link": "https://stackoverflow.com/users/1801386/mike-bogochow"}, "is_accepted": true, "score": 0, "last_activity_date": 1512499383, "creation_date": 1512499383, "answer_id": 47660595, "question_id": 46935969, "link": "https://stackoverflow.com/questions/46935969/swig-java-proxy-class-array-parameter/47660595#47660595", "title": "SWIG - Java Proxy Class Array Parameter", "body": "<p>I was able to create a working solution using an intermediary array class generated using <code>%array_class</code> from carrays.i along with <code>in</code> and <code>javain</code> typemaps.  A complete working example with the solution can be found in my <a href=\"https://gist.github.com/mbogochow/ff8568d2392537c4b766b3dcaf7dd836\" rel=\"nofollow noreferrer\">gist</a>.</p>\n\n<p>If anyone can come up with a better solution or improvements then I would be much appreciated.  A drawback of my solution is that you would need to create an additional Java array proxy class for each different proxy class that you wanted to use in this way, which could clutter up the Java API.  This could be improved slightly by making the array proxy classes package-private using the <code>javaclassmodifiers</code> typemap.</p>\n"}], "owner": {"reputation": 139, "user_id": 1801386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97a4345c2d5f50c6b374b36708f4bab?s=128&d=identicon&r=PG", "display_name": "Mike Bogochow", "link": "https://stackoverflow.com/users/1801386/mike-bogochow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 47660595, "answer_count": 1, "score": 2, "last_activity_date": 1512499559, "creation_date": 1508944088, "last_edit_date": 1512499559, "question_id": 46935969, "link": "https://stackoverflow.com/questions/46935969/swig-java-proxy-class-array-parameter", "title": "SWIG - Java Proxy Class Array Parameter", "body": "<p>I thought that this would be a simple problem but I have had some difficulty finding an answer.</p>\n\n<p>I have a struct defined in C++, let's say:</p>\n\n<pre><code>struct MyStruct\n{\n  int a;\n  int b;\n};\n</code></pre>\n\n<p>This gets wrapped into Java proxy class <code>MyStruct</code> by SWIG.  I have a function in C++ which takes an array of <code>struct MyStruct</code>s:</p>\n\n<pre><code>void myFunction(struct MyStruct arg[], int amount);\n</code></pre>\n\n<p>SWIG sees a pointer parameter and therefore generates the Java wrapper of the function to use a single <code>MyStruct</code> object as its parameter:</p>\n\n<pre><code>void myFunction(MyStruct arg, int amount) { /**/ }\n</code></pre>\n\n<p>How do I get SWIG to generate the Java function to take an array of <code>MyStruct</code> Java objects?  I have been able to figure it out for arrays of primitive types but have not found a way to get it working for custom wrapped types.</p>\n\n<p>So my desired Java function signature would be this:</p>\n\n<pre><code>void myFunction(MyStruct[] arg, int amount);\n</code></pre>\n\n<p><strong>Edit</strong>: Updated wording to use proper SWIG nomenclature of proxy classes.</p>\n"}, {"tags": ["c++", "loops", "vector", "boolean", "std-pair"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1508943991, "post_id": 46935848, "comment_id": 80818964, "body": "Why not use a <code>std::map&lt;std::string, int&gt;</code>? Then <code>values[key] = weight;</code>"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1508944009, "post_id": 46935848, "comment_id": 80818980, "body": "1) <code>cout</code> doesn&#39;t throw an error, as your comment suggests. It just outputs the string to the console. The rest of the function is executed anyways. Did you want to throw an exception? 2) What is <code>WEIGHT_T</code>? Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1508944012, "post_id": 46935848, "comment_id": 80818982, "body": "Why don&#39;t you use an unsigned weight type?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1508944012, "post_id": 46935848, "comment_id": 80818984, "body": "<i>logic doesn&#39;t seem to be working</i> whatever that means. What is DiscreteDistribution?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1508944286, "post_id": 46935848, "comment_id": 80819186, "body": "Rather than setting <code>contains</code> true, you could just return.  That way you don&#39;t need to test <code>contains</code>.  You don&#39;t add the key / weight if weight is zero.  Just get rid of the final test on <code>weight</code>."}], "answers": [{"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1508944110, "creation_date": 1508944110, "answer_id": 46935973, "question_id": 46935848, "link": "https://stackoverflow.com/questions/46935848/adding-pairs-to-a-vector-c/46935973#46935973", "title": "Adding pairs to a vector C++", "body": "<p>This line:</p>\n\n<pre><code>        std::cout &lt;&lt; \"ERROR, invalid weight\" &lt;&lt; std::endl; //Throw error.\n</code></pre>\n\n<p>does not do what the comment says (throw an error).  This line:</p>\n\n<pre><code>        throw \"ERROR, invalid weight\"; //Throw error.\n</code></pre>\n\n<p>does.  However, I <strong><em>strongly</em></strong> recommend that you only ever throw exceptions derived from <code>std::exception</code>.  This:</p>\n\n<pre><code>        throw std::range_error(\"ERROR, invalid weight\"); //Throw error.\n</code></pre>\n\n<p>is <strong>much</strong> better.</p>\n"}], "owner": {"reputation": 1, "user_id": 8687007, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4gOsn5UfUYg/AAAAAAAAAAI/AAAAAAAAAAw/kZ3aePdwpHk/photo.jpg?sz=128", "display_name": "Granzo", "link": "https://stackoverflow.com/users/8687007/granzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1508944110, "creation_date": 1508943774, "question_id": 46935848, "link": "https://stackoverflow.com/questions/46935848/adding-pairs-to-a-vector-c", "title": "Adding pairs to a vector C++", "body": "<p>So, I'm attempting to add pairs to a vector, but they must successfully pass 2 criteria:</p>\n\n<ol>\n<li>Their weight or 2nd value is greater than or equal to zero. and throws a string error if it does.</li>\n<li>The vector must not already contain the key or the first value</li>\n</ol>\n\n<p>It specifically must be done while the function returns a void type, however for some reason, this logic doesn't seem to be working. Any suggestions?</p>\n\n<pre><code>void add(KEY_T key, WEIGHT_T weight)\n    {\n        bool contains = false;\n\n        if (weight &lt; 0)\n        {\n\n            std::cout &lt;&lt; \"ERROR, invalid weight\" &lt;&lt; std::endl; //Throw error.\n        }\n\n        for (int x = 0; x &lt; _valueToWeightMap.size(); x++)\n        {\n            if (_valueToWeightMap[x].first == key)\n            {\n                contains = true;\n            }\n        }\n\n        if (weight &gt; 0 &amp;&amp; contains == false)\n            {\n\n            _valueToWeightMap.push_back(std::make_pair(key, weight));\n\n            }\n\n        }\n</code></pre>\n\n<p>Here is the main:</p>\n\n<pre><code>int main()\n{\n    DiscreteDistribution&lt;std::string&gt; dist1;\n\n    dist1.add(\"Helmet\", -1);\n    dist1.add(\"Gloves\", 5);\n    dist1.add(\"Gloves\", 5);\n    dist1.add(\"cloud\", 8);\n</code></pre>\n\n<p>For some reason, I'm not getting an error when I try to add Helmet as -1. Any suggestions?</p>\n"}, {"tags": ["c++", "c++11", "templates", "rvalue-reference", "forwarding-reference"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1508943235, "post_id": 46935605, "comment_id": 80818451, "body": "Can you provide an example of what you want to do, such that a forwarding reference isn&#39;t what you want?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1508944414, "post_id": 46935605, "comment_id": 80819281, "body": "@Barry: Allocate heap space for an rvalue reference, allocate nothing for lvalue reference - so that they can be used in some kind of callback."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1508945159, "post_id": 46935605, "comment_id": 80819847, "body": "Isn&#39;t the normal way to do this to demand that if users want a reference to a handler, they pass it in a std::ref?"}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1508944711, "post_id": 46936007, "comment_id": 80819490, "body": "So now we have two helper functions with no type information? -1."}, {"owner": {"reputation": 1697, "user_id": 4712648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/txw7W.jpg?s=128&g=1", "display_name": "Elohim Meth", "link": "https://stackoverflow.com/users/4712648/elohim-meth"}, "edited": false, "score": 0, "creation_date": 1508944823, "post_id": 46936007, "comment_id": 80819572, "body": "I agree, better use another template."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1508945894, "post_id": 46936007, "comment_id": 80820378, "body": "So, why don&#39;t you just keep the second variant in your answer?"}, {"owner": {"reputation": 1697, "user_id": 4712648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/txw7W.jpg?s=128&g=1", "display_name": "Elohim Meth", "link": "https://stackoverflow.com/users/4712648/elohim-meth"}, "edited": false, "score": 0, "creation_date": 1508946390, "post_id": 46936007, "comment_id": 80820737, "body": "For example: helper functions can&#39;t reside in header files for some reason and so can&#39;t be templates."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1508959055, "post_id": 46936007, "comment_id": 80828058, "body": "either you need <code>typename</code> or drop <code>::type</code> no?  <code>::type</code> seems like a dependent type.  And you are missing a <code>)</code>."}], "tags": [], "owner": {"reputation": 1697, "user_id": 4712648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/txw7W.jpg?s=128&g=1", "display_name": "Elohim Meth", "link": "https://stackoverflow.com/users/4712648/elohim-meth"}, "is_accepted": false, "score": 2, "last_activity_date": 1508994034, "last_edit_date": 1508994034, "creation_date": 1508944217, "answer_id": 46936007, "question_id": 46935605, "link": "https://stackoverflow.com/questions/46935605/how-to-get-different-overloads-for-rvalue-and-lvalue-references-with-a-template/46936007#46936007", "title": "How to get different overloads for rvalue and lvalue references with a template-deduced type?", "body": "<p>You can use tag dispatching for c++11 or <code>if constexpr</code> for c++17. Something like that.</p>\n\n<pre><code>template &lt;typename T&gt; \nvoid foo(T&amp;&amp; x)\n{\n    foo(std::addressof(x), typename std::is_lvalue_reference&lt;T&gt;::type{});\n}\nvoid foo(void const *value, std::true_type)\n{\n   // do something on lvalue\n}\nvoid foo(void const *value, std::false_type)\n{\n   // do something on rvalue\n}\n</code></pre>\n\n<p>You need to save info about that type although to <code>reinterpret_cast</code> that pointer later. Or better as suggested:</p>\n\n<pre><code>template &lt;typename T&gt; \nvoid foo(T&amp;&amp; x)\n{\n    foo(std::forward&lt;T&gt;(x), typename std::is_lvalue_reference&lt;T&gt;::type{});\n}\ntemplate &lt;typename T&gt;\nvoid foo(T &amp;&amp;value, std::true_type)\n{\n   // do something on lvalue\n}\ntemplate &lt;typename T&gt;\nvoid foo(T &amp;&amp;value, std::false_type)\n{\n   // do something on rvalue\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508945385, "post_id": 46936145, "comment_id": 80820012, "body": "I up-voted, because this is the easiest most straightforward way. But the OP will have to reconsider their const correctness, <a href=\"http://coliru.stacked-crooked.com/a/45b60c6b9915ce3f\" rel=\"nofollow noreferrer\">or else this will happen</a>."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508945497, "post_id": 46936145, "comment_id": 80820093, "body": "You removed the const from the first variant. Was that intentional, and if so - can you elaborate in light of @StoryTeller&#39;s comment?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508945915, "post_id": 46936145, "comment_id": 80820397, "body": "@StoryTeller I don&#39;t have <code>const</code> in the first overload?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1508945995, "post_id": 46936145, "comment_id": 80820464, "body": "The first line has <code>foo(T&amp;)</code> and can take a non-const lvalue. But ok, that&#39;s still pretty good if I&#39;m not peevish about constness. Or I could check inside with <code>std::is_const</code>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508946015, "post_id": 46936145, "comment_id": 80820481, "body": "Well, the OP wanted a <code>foo(const T&amp; x);</code>, while this one isn&#39;t. But given that Clang and GCC differ with regard to my own answer. I&#39;m starting to doubt what overload resolution <i>should</i> do here."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508946205, "post_id": 46936145, "comment_id": 80820611, "body": "@StoryTeller OP simply asks to differentiate lvalues and rvalues. Also, <code>foo(identity&lt;T&gt;&amp;&amp;)</code> is still a forwarding reference because <code>identity&lt;T&gt;</code> <i>is</i> <code>T</code> (both gcc 7.2 and clang 5.0 think this way, at least)."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1508946378, "post_id": 46936145, "comment_id": 80820731, "body": "@Barry - Yeah, the whole equivalence issue is annoying (and to me, confusing at times)."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1508946423, "post_id": 46936145, "comment_id": 80820759, "body": "@StoryTeller Added an alternative version to do the other case."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1508957790, "post_id": 46936145, "comment_id": 80827275, "body": "In all rvalue cases, the second is a better match. Partial ordering doesn&#39;t come into play."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 8, "last_activity_date": 1508958495, "last_edit_date": 1508958495, "creation_date": 1508944591, "answer_id": 46936145, "question_id": 46935605, "link": "https://stackoverflow.com/questions/46935605/how-to-get-different-overloads-for-rvalue-and-lvalue-references-with-a-template/46936145#46936145", "title": "How to get different overloads for rvalue and lvalue references with a template-deduced type?", "body": "<p>You can have an lvalue reference overload and a forwarding reference overload:</p>\n\n<pre><code>template &lt;typename T&gt; void foo(T&amp; ) { ... }\ntemplate &lt;typename T&gt; void foo(T&amp;&amp; ) { ... }\n</code></pre>\n\n<p>For lvalues, the first overload is favored. For rvalues, only the second overload is viable. </p>\n\n<hr />\n\n<p>If what you want is one const lvalue reference overload and one non-const rvalue reference overload, then you just have to add a constraint to the forwarding reference case:</p>\n\n<pre><code>template &lt;typename T&gt; void foo(T const&amp; ) { ... }\ntemplate &lt;typename T, REQUIRES(!std::is_reference&lt;T&gt;::value)&gt;\nvoid foo(T&amp;&amp; ) { ... }\n</code></pre>\n\n<p>where <code>REQUIRES</code> is the method of your choice. Now, for our four cases:</p>\n\n<ul>\n<li>non-const, lvalue: only 1st is viable</li>\n<li>const lvalue: only 1st is viable</li>\n<li>non-const, rvalue: both viable, 2nd is better match</li>\n<li>const rvalue: both viable, 2nd is <S>more specialized</s> better match</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1508959334, "creation_date": 1508959334, "answer_id": 46940529, "question_id": 46935605, "link": "https://stackoverflow.com/questions/46935605/how-to-get-different-overloads-for-rvalue-and-lvalue-references-with-a-template/46940529#46940529", "title": "How to get different overloads for rvalue and lvalue references with a template-deduced type?", "body": "<p>Tag dispatching is the simplest solution.</p>\n\n<pre><code>namespace details {\n  template &lt;typename T&gt;\n  void foo(std::true_type is_lvalue, const T&amp; x) {\n    std::cout &lt;&lt; x &lt;&lt; \" is an lvalue\\n\";\n  }\n  template &lt;typename T&gt;\n  void foo(std::false_type is_lvalue, T&amp;&amp; x) {\n    std::cout &lt;&lt; x &lt;&lt; \" is an rvalue\\n\";\n  }\n}\ntemplate &lt;typename T&gt;\nvoid foo(T&amp;&amp; t) {\n  return details::foo(\n    typename std::is_lvalue_reference&lt;T&gt;::type{},\n    std::forward&lt;T&gt;(t)\n  );\n}\n</code></pre>\n\n<p>SFINAE is serious overkill when you don't actually want to support neither version being selected for overload resolution purposes.</p>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 1, "creation_date": 1593434739, "post_id": 62638267, "comment_id": 110771597, "body": "This answer uses C++17; the question was about C++11. Please qualify your answer."}, {"owner": {"reputation": 1734, "user_id": 8277897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154710977387286/picture?type=large", "display_name": "David Ledger", "link": "https://stackoverflow.com/users/8277897/david-ledger"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1593435192, "post_id": 62638267, "comment_id": 110771831, "body": "Qualified and added a C++11 version which enables the same functions to be used. The idea here is that you can use the class constructor pattern with C++11 or 17 and when C++17 is avaliable for whoever, change the wrapper to just allow deduction of T."}], "tags": [], "owner": {"reputation": 1734, "user_id": 8277897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154710977387286/picture?type=large", "display_name": "David Ledger", "link": "https://stackoverflow.com/users/8277897/david-ledger"}, "is_accepted": false, "score": 0, "last_activity_date": 1593435096, "last_edit_date": 1593435096, "creation_date": 1593434068, "answer_id": 62638267, "question_id": 46935605, "link": "https://stackoverflow.com/questions/46935605/how-to-get-different-overloads-for-rvalue-and-lvalue-references-with-a-template/62638267#62638267", "title": "How to get different overloads for rvalue and lvalue references with a template-deduced type?", "body": "<p>Things have changed since this question, since C++17 things are a little better :) (depending how you like this pattern).</p>\n<p>This can be achieved without any funny business with <code>std::enable_if</code> however, its just puts the funny business elsewhere, but I like it more:</p>\n<pre><code>template &lt;typename T&gt;\nstruct Fn\n{\n    Fn(T &amp;&amp;);\n    Fn(T const &amp; v);\n};\n</code></pre>\n<p>The two constructors are the overloads of your templated type. If you need to return a value just store it in the class and add a conversion operator. The constructors are used by compiler to deduce class template type.</p>\n<p>Downside is, you need to run it with braces instead of brackets.</p>\n<p>And ofcourse, a link to play around with:\n<a href=\"https://godbolt.org/z/oNzURY\" rel=\"nofollow noreferrer\">https://godbolt.org/z/oNzURY</a></p>\n<hr />\n<p>Same pattern does work with C++11, but ehh, not as nicely:</p>\n<pre><code>template &lt;typename T&gt;\nbool Foo(T &amp;&amp; value)\n{\n    return Fn&lt;typename std::decay&lt;T&gt;::type&gt;(std::forward&lt;T&gt;(value));\n}\n</code></pre>\n<p><a href=\"https://godbolt.org/z/6yvf7W\" rel=\"nofollow noreferrer\">https://godbolt.org/z/6yvf7W</a></p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 663, "favorite_count": 0, "accepted_answer_id": 46940529, "answer_count": 4, "score": 1, "last_activity_date": 1593438063, "creation_date": 1508943102, "last_edit_date": 1593438063, "question_id": 46935605, "link": "https://stackoverflow.com/questions/46935605/how-to-get-different-overloads-for-rvalue-and-lvalue-references-with-a-template", "title": "How to get different overloads for rvalue and lvalue references with a template-deduced type?", "body": "<p>I have a function <code>foo</code> taking a parameter by reference, and I want it to act differently on rvalue and on lvalue references. (I should also mention <code>foo()</code> respects constness; it doesn't change the refered-to value.) I know that if I write:</p>\n<pre><code>template &lt;typename T&gt; foo(T&amp;&amp; x);\n</code></pre>\n<p>I've declared a <a href=\"https://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers\" rel=\"nofollow noreferrer\">forwarding reference</a>, rather than an rvalue reference, meaning that this way:</p>\n<pre><code>template &lt;typename T&gt; foo(const T&amp; x);\ntemplate &lt;typename T&gt; foo(T&amp;&amp; x);\n</code></pre>\n<p>likely won't get me what I want.</p>\n<p>So, my question is: What's the right way to affect different behavior between the two kinds of references?</p>\n"}, {"tags": ["c++", "dll", "static-libraries"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1508944142, "post_id": 46935416, "comment_id": 80819074, "body": "Perhaps the problem is unrelated to the static library. Do you use aVast? If so disable it and try again."}, {"owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "edited": false, "score": 0, "creation_date": 1508949390, "post_id": 46935416, "comment_id": 80822563, "body": "For me you are trying to do the same thing as <a href=\"https://stackoverflow.com/questions/31446363/proper-way-to-link-static-libraries-with-dll\" title=\"proper way to link static libraries with dll\">stackoverflow.com/questions/31446363/&hellip;</a>"}, {"owner": {"reputation": 124, "user_id": 8510183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a88b09253e0a39fe00053bd935c4566?s=128&d=identicon&r=PG&f=1", "display_name": "NonoxX", "link": "https://stackoverflow.com/users/8510183/nonoxx"}, "edited": false, "score": 0, "creation_date": 1508950780, "post_id": 46935416, "comment_id": 80823318, "body": "Yes that\u2019s it. And basically that\u2019s what I do, i.e. link the .lib into my DLL project. If I hadn\u2019t done that, the DLL project wouldn\u2019t build anyway (due to unresolved externals)."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1508952039, "post_id": 46935416, "comment_id": 80824009, "body": "Deadlock in DllMain() probably.  Do use the debugger before forcing us to guess.  Debug &gt; Break All and Debug &gt; Windows &gt; Call stack."}], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 8510183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a88b09253e0a39fe00053bd935c4566?s=128&d=identicon&r=PG&f=1", "display_name": "NonoxX", "link": "https://stackoverflow.com/users/8510183/nonoxx"}, "is_accepted": true, "score": 0, "last_activity_date": 1509004287, "creation_date": 1509004287, "answer_id": 46948650, "question_id": 46935416, "link": "https://stackoverflow.com/questions/46935416/use-a-static-library-in-a-dll/46948650#46948650", "title": "Use a static library in a DLL", "body": "<p>Thanks to Hans Passant, I went to debug though the DllMain. And yes, it was a deadlock. Problem was not directly related to using a static lib into the DLL.</p>\n\n<p>The in the static library, I have some static singletons that are initialized into the CRTDLLmain. I follow the double-checked locking pattern in my implementation, using c++ atomic fences (as in <a href=\"http://preshing.com/20130930/double-checked-locking-is-fixed-in-cpp11/\" rel=\"nofollow noreferrer\">http://preshing.com/20130930/double-checked-locking-is-fixed-in-cpp11/</a>). Is seems however, that it doesn't really work well with C++11 (<a href=\"https://github.com/weidai11/cryptopp/issues/372\" rel=\"nofollow noreferrer\">https://github.com/weidai11/cryptopp/issues/372</a>).\nI coded a quick workaround to test it and it seems so. I will then contact the lib maker to see if a fixed version is possible.</p>\n"}], "owner": {"reputation": 124, "user_id": 8510183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a88b09253e0a39fe00053bd935c4566?s=128&d=identicon&r=PG&f=1", "display_name": "NonoxX", "link": "https://stackoverflow.com/users/8510183/nonoxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "accepted_answer_id": 46948650, "answer_count": 1, "score": 0, "last_activity_date": 1509004287, "creation_date": 1508942591, "question_id": 46935416, "link": "https://stackoverflow.com/questions/46935416/use-a-static-library-in-a-dll", "title": "Use a static library in a DLL", "body": "<p>In a (console) application developped in C++, I need to add a new function to a Framework.dll we developped. This new function in the Framework will use classes of a static lib that is provided to us.</p>\n\n<p>I linked the static lib to our framework, and everything worked fine. Then I started editing the Framework's code to use a class of the static library. The framework still build without warning. When running the main app (that uses Framwork.dll), the app won't then start. It won't event go to the main(). It locks on an empty prompt and endlessly waits.</p>\n\n<p>If I link the static lib directly into the application, I get no issue. But that's not where I want to use it.</p>\n\n<p>Has anybody an idea of what I'm doing wrong?</p>\n"}, {"tags": ["c++", "c++11", "templates", "gcc"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1508942543, "post_id": 46935282, "comment_id": 80817933, "body": "You <i>declare</i> the static member variable <code>f</code>, but you never <i>define</i> it. In the optimized build, it&#39;s probably optimized out since it&#39;s not used."}, {"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1508943894, "post_id": 46935282, "comment_id": 80818905, "body": "<a href=\"https://stackoverflow.com/q/1452721/2176813\"><code>using namespace std;</code> is a bad practice</a>, never use it."}], "answers": [{"comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1508943151, "post_id": 46935544, "comment_id": 80818396, "body": "In C++17, you\u2019ll be able to skip the separate definition step, and instead both declare and define it inside the class with <code>inline static F f;</code>. If a static member variable is <code>constexpr</code> it is also automatically <code>inline</code>, which is nice."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1508943329, "last_edit_date": 1508943329, "creation_date": 1508942918, "answer_id": 46935544, "question_id": 46935282, "link": "https://stackoverflow.com/questions/46935282/c-error-only-when-compiled-with-no-optimizations-gcc/46935544#46935544", "title": "C++ error only when compiled with no optimizations (GCC)", "body": "<p>You <em>declare</em> a static member variable <code>f</code> here:</p>\n\n<pre><code>static F f;\n</code></pre>\n\n<p>and then you <a href=\"http://en.cppreference.com/w/cpp/language/definition\" rel=\"nofollow noreferrer\">odr-use</a> it here:</p>\n\n<pre><code>static inline string foo(const int&amp; x) {\n    return f(x);\n}\n</code></pre>\n\n<p>That requires a definition of <code>f</code> be available, but you haven't provided a definition - just the declaration. That makes the program ill-formed, no diagnostic required. However, in practice, a definition is only necessary if the linker actually needs it - and in this case, the optimized build simply inlined the call completely, without even bothering with either the static member or your class. Indeed, the instructions include fun things like:</p>\n\n<pre><code>    movl    $1819043176, 16(%rsp)  // this is \"hell\"\n    movl    $5, %edx\n    movl    std::cout, %edi\n    movq    $5, 8(%rsp)\n    movb    $111, 4(%rsi)          // this is 'o'\n</code></pre>\n\n<p>Cool stuff.</p>\n\n<p>Anyway, the unoptimized build does actually rely upon having a definition of <code>f</code> because the call is actually made - and you don't have a definition, hence the linker error. The optimized build doesn't rely on <code>f</code>, but you should define it anyway, for correctness.</p>\n\n<pre><code>template &lt;typename F&gt;\nstruct A { ... };\n\ntemplate &lt;typename F&gt;\nF A&lt;F&gt;::f;\n</code></pre>\n"}], "owner": {"reputation": 5328, "user_id": 325809, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b858606c4daae58cfdb362bf2fc4caa5?s=128&d=identicon&r=PG", "display_name": "fakedrake", "link": "https://stackoverflow.com/users/325809/fakedrake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 46935544, "answer_count": 1, "score": 1, "last_activity_date": 1508943329, "creation_date": 1508942274, "last_edit_date": 1508943301, "question_id": 46935282, "link": "https://stackoverflow.com/questions/46935282/c-error-only-when-compiled-with-no-optimizations-gcc", "title": "C++ error only when compiled with no optimizations (GCC)", "body": "<p>Here is some code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nclass ShowHello {\n public:\n    string operator()(int x) {return \"hello\";}\n};\n\ntemplate&lt;typename F&gt;\nclass A {\n private:\n    static F f;\n    static inline string foo(const int&amp; x) {\n        return f(x);\n    }\n\n public:\n    A() {\n        cout &lt;&lt; \"foo: \" &lt;&lt; foo(10) &lt;&lt; endl;\n    }\n};\n\n\nint main(int argc, char *argv[])\n{\n    A&lt;ShowHello&gt; a;\n    return 0;\n}\n</code></pre>\n\n<p>And here is me compiling it with some optimizations:</p>\n\n<pre><code>$ g++ -std=c++11 -O1 -Wall test.cc -o test &amp;&amp; ./test\nfoo: hello\n</code></pre>\n\n<p>And no optimizations</p>\n\n<pre><code>$ g++ -std=c++11 -O0 -Wall test.cc -o test &amp;&amp; ./test\n/tmp/ccXdtXVe.o: In function `A&lt;ShowHello&gt;::foo(int const&amp;)':\ntest.cc:(.text._ZN1AI9ShowHelloE3fooERKi[_ZN1AI9ShowHelloE3fooERKi]+0x2a): undefined reference to `A&lt;ShowHello&gt;::f'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<p>Also</p>\n\n<pre><code>$ g++ --version\ng++ (Ubuntu 5.4.0-6ubuntu1~16.04.5) 5.4.0 20160609\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n</code></pre>\n"}, {"tags": ["php", "c++", "windows", "zend-framework"], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 7678666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4741467963287c4a45427ae4ea720945?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Filenko", "link": "https://stackoverflow.com/users/7678666/sergey-filenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1508959925, "last_edit_date": 1508959925, "creation_date": 1508958686, "answer_id": 46940352, "question_id": 46935038, "link": "https://stackoverflow.com/questions/46935038/php-7-c-extension-the-specified-module-could-not-be-found/46940352#46940352", "title": "PHP 7 C++ extension. The specified module could not be found", "body": "<p>I resolved an issue. It was a mistake in build script. <code>php5ts.lib</code> and <code>php7ts.lib</code> was included at same time. I deleted <code>php5ts.lib</code> from linker and now it works as expected.</p>\n"}], "owner": {"reputation": 73, "user_id": 7678666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4741467963287c4a45427ae4ea720945?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Filenko", "link": "https://stackoverflow.com/users/7678666/sergey-filenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1508959925, "creation_date": 1508941589, "last_edit_date": 1508953095, "question_id": 46935038, "link": "https://stackoverflow.com/questions/46935038/php-7-c-extension-the-specified-module-could-not-be-found", "title": "PHP 7 C++ extension. The specified module could not be found", "body": "<p>I wrote an extension with C++ for php on windows. I build multiple different versions:  </p>\n\n<ul>\n<li>php 5: with a MSVC11 compiler, linked with php5ts.lib, thread safe and it works fine</li>\n<li>php 7: with a MSVC14 compiler, linked with php7ts.lib, thread safe, but it didn't work</li>\n</ul>\n\n<p>The php 7 version gives me</p>\n\n<pre><code>Warning: PHP Startup: Unable to load dynamic library 'C:/openserver/ospanel/modules/php/PHP-7.0/ext/module_php_7.0.21_TS.dll' - The specified module could not be found.\n in Unknown on line 0\nPHP 7.0.21 (cli) (built: Jul  5 2017 13:31:19) ( ZTS )\nCopyright (c) 1997-2017 The PHP Group\nZend Engine v3.0.0, Copyright (c) 1998-2017 Zend Technologies\n</code></pre>\n\n<p>I tried to change extension folder, rename file, nothing helps. Library was built without any error. I double checked that it exists.</p>\n\n<p>P.s: I know there is a difference between php5 and php7 api, i have #ifdef for this, so it's not a problem. Also we have successful build of this module with php7 on linux.</p>\n"}, {"tags": ["c++", "dictionary"], "comments": [{"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 2, "creation_date": 1508941705, "post_id": 46935032, "comment_id": 80817329, "body": "This answer displays differences in a table: <a href=\"https://stackoverflow.com/a/13799886/5601284\">stackoverflow.com/a/13799886/5601284</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1508941759, "post_id": 46935032, "comment_id": 80817362, "body": "Beyond the obvious that <a href=\"http://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow noreferrer\"><code>std::map</code></a> is <i>ordered</i> (sorted on key) while <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\"><code>std::unordered_map</code></a> is not?"}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 1, "creation_date": 1508941774, "post_id": 46935032, "comment_id": 80817371, "body": "In the same link you posted is another post <code>http:&#47;&#47;thispointer.com&#47;map-vs-unordered_map-when-to-choose-o&zwnj;&#8203;ne-over-another&#47;</code>"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1508942408, "post_id": 46935032, "comment_id": 80817833, "body": "The difference is in internal representation and the speed of elements insertion and lookup. Map is associative container of sorted key-value pairs implemented as binary trees. Unordered map is implemented via a hash function and an array of buckets with linked lists."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1508942616, "post_id": 46935160, "comment_id": 80817986, "body": "&quot;search speed in std::unorderedmap is O(1)&quot; this is not quite true."}, {"owner": {"reputation": 1561, "user_id": 2567725, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BndRm.jpg?s=128&g=1", "display_name": "Olha", "link": "https://stackoverflow.com/users/2567725/olha"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1508943730, "post_id": 46935160, "comment_id": 80818773, "body": "@Slava Well, I didn&#39;t use  <code>std::unorderedmap</code>, but tutorial states that hash of the key is calculated and then compared. Is this more to logarithmic complexity then to  <code>O(1)</code> ?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1508945259, "post_id": 46935160, "comment_id": 80819923, "body": "It is not that, you compare O(log2(n)) in <code>std::map</code> vs O(1) in <code>std::unordered_map</code> but you cannot compare them, as that not apple to apple comparison. <code>std::map</code> guarantees O(log2(n)) while <code>std::unordered_map</code> usually have O(1), but can degrade to O(n). Your statement says that search speed is always O(1), which is not quite correct and can be misleading."}], "tags": [], "owner": {"reputation": 1561, "user_id": 2567725, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BndRm.jpg?s=128&g=1", "display_name": "Olha", "link": "https://stackoverflow.com/users/2567725/olha"}, "is_accepted": false, "score": 1, "last_activity_date": 1508941923, "creation_date": 1508941923, "answer_id": 46935160, "question_id": 46935032, "link": "https://stackoverflow.com/questions/46935032/what-is-difference-between-map-and-unordered-map/46935160#46935160", "title": "What is difference between map and unordered map?", "body": "<p>As I've read in tutorial you provided, search speed in <code>std::unorderedmap</code> is <code>O(1)</code>. While in <code>std::map</code> it's <code>O(log2(n))</code>, where <code>n</code> is size of the map. <br>\nSo if you have to call <code>std::find</code> often, you can consider this option. While choosing hash function isn't an easy task.</p>\n"}], "owner": {"reputation": 462, "user_id": 8547128, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-VdtX8-xzgi4/AAAAAAAAAAI/AAAAAAAAADY/Qpj1DlW3s4M/photo.jpg?sz=128", "display_name": "Ali Sepehri-Amin", "link": "https://stackoverflow.com/users/8547128/ali-sepehri-amin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1428, "favorite_count": 1, "closed_date": 1508942031, "answer_count": 1, "score": 1, "last_activity_date": 1508941923, "creation_date": 1508941575, "question_id": 46935032, "link": "https://stackoverflow.com/questions/46935032/what-is-difference-between-map-and-unordered-map", "closed_reason": "Duplicate", "title": "What is difference between map and unordered map?", "body": "<p>According to: <a href=\"http://thispointer.com/unordered_map-usage-tutorial-and-example/\" rel=\"nofollow noreferrer\">This Tutorial</a></p>\n\n<p>I can't understand the difference between <code>std::map</code> and <code>std::unorderedmap</code>. When and Why we should use <strong>Map</strong> and <strong>Unorderedmap</strong>?</p>\n"}, {"tags": ["c++", "boost", "tcp", "boost-asio"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1508941923, "post_id": 46935025, "comment_id": 80817486, "body": "We can&#39;t tell you whether you /should/ use blocking or async accept. From the looks of it you can do either."}], "answers": [{"comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 3, "creation_date": 1508942449, "post_id": 46935127, "comment_id": 80817865, "body": "This is the correct answer to at least 30% of all asio questions :)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 5, "last_activity_date": 1508972775, "last_edit_date": 1508972775, "creation_date": 1508941859, "answer_id": 46935127, "question_id": 46935025, "link": "https://stackoverflow.com/questions/46935025/boost-asio-single-tcp-server-many-clients/46935127#46935127", "title": "Boost asio, single TCP server, many clients", "body": "<p>Just keep accepting.</p>\n\n<p>You show no code, but it typically looks like</p>\n\n<pre><code>void do_accept() {\n    acceptor_.async_accept(socket_, [this](boost::system::error_code ec) {\n        std::cout &lt;&lt; \"async_accept -&gt; \" &lt;&lt; ec.message() &lt;&lt; \"\\n\";\n        if (!ec) {\n            std::make_shared&lt;Connection&gt;(std::move(socket_))-&gt;start();\n            do_accept(); // THIS LINE\n        }\n    });\n}\n</code></pre>\n\n<p>If you don't include the line marked <code>// THIS LINE</code> you will indeed not accept more than 1 connection.</p>\n\n<p>If this doesn't help, please include some code we can work from.</p>\n\n<h1>For Fun, A Demo</h1>\n\n<p>This uses just standard library features for the non-network part.</p>\n\n<h3>Network Listener</h3>\n\n<p>The network part is as outlined before:</p>\n\n<pre><code>#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/asio/high_resolution_timer.hpp&gt;\n#include &lt;istream&gt;\n\nusing namespace std::chrono_literals;\nusing Clock = std::chrono::high_resolution_clock;\n\nnamespace Shared {\n    using PostRequest = std::function&lt;void(std::istream&amp; is)&gt;;\n}\n\nnamespace Network {\n\n    namespace ba = boost::asio;\n    using ba::ip::tcp;\n    using error_code = boost::system::error_code;\n\n    using Shared::PostRequest;\n\n    struct Connection : std::enable_shared_from_this&lt;Connection&gt; {\n        Connection(tcp::socket&amp;&amp; s, PostRequest poster) : _s(std::move(s)), _poster(poster) {}\n\n        void process() {\n            auto self = shared_from_this();\n            ba::async_read(_s, _request, [this,self](error_code ec, size_t) {\n                if (!ec || ec == ba::error::eof) {\n                    std::istream reader(&amp;_request);\n                    _poster(reader);\n                }\n            });\n        }\n\n      private:\n        tcp::socket   _s;\n        ba::streambuf _request;\n        PostRequest   _poster;\n    };\n\n    struct Server {\n\n        Server(unsigned port, PostRequest poster) : _port(port), _poster(poster) {}\n\n        void run_for(Clock::duration d = 30s) {\n            _stop.expires_from_now(d);\n            _stop.async_wait([this](error_code ec) { if (!ec) _svc.post([this] { _a.close(); }); });\n\n            _a.listen();\n\n            do_accept();\n\n            _svc.run();\n        }\n      private:\n        void do_accept() {\n            _a.async_accept(_s, [this](error_code ec) {\n                if (!ec) {\n                    std::make_shared&lt;Connection&gt;(std::move(_s), _poster)-&gt;process();\n                    do_accept();\n                }\n            });\n        }\n\n        unsigned short            _port;\n        PostRequest               _poster;\n\n        ba::io_service            _svc;\n        ba::high_resolution_timer _stop { _svc };\n        tcp::acceptor             _a { _svc, tcp::endpoint {{}, _port } };\n        tcp::socket               _s { _svc };\n    };\n}\n</code></pre>\n\n<p>The only \"connection\" to the work service part is the <code>PostRequest</code> handler that is passed to the server at construction:</p>\n\n<pre><code>Network::Server server(6767, handler);\n</code></pre>\n\n<p>I've also opted for async operations, so we can have a timer to stop the service, even though we do not use any threads:</p>\n\n<pre><code>server.run_for(3s); // this blocks\n</code></pre>\n\n<h1>The Work Part</h1>\n\n<p>This is completely separate, and will use threads. First, let's define a <code>Request</code>, and a thread-safe <code>Queue</code>:</p>\n\n<pre><code>namespace Service {\n    struct Request {\n        std::vector&lt;char&gt; data; // or whatever you read from the sockets...\n    };\n\n    Request parse_request(std::istream&amp; is) {\n        Request result;\n        result.data.assign(std::istream_iterator&lt;char&gt;(is), {});\n        return result;\n    }\n\n    struct Queue {\n        Queue(size_t max = 50) : _max(max) {}\n\n        void enqueue(Request req) {\n            std::unique_lock&lt;std::mutex&gt; lk(mx);\n            cv.wait(lk, [this] { return _queue.size() &lt; _max; });\n            _queue.push_back(std::move(req));\n\n            cv.notify_one();\n        }\n\n        Request dequeue(Clock::time_point deadline) {\n            Request req;\n\n            {\n                std::unique_lock&lt;std::mutex&gt; lk(mx);\n                _peak = std::max(_peak, _queue.size());\n                if (cv.wait_until(lk, deadline, [this] { return _queue.size() &gt; 0; })) {\n                    req = std::move(_queue.front());\n                    _queue.pop_front();\n                    cv.notify_one();\n                } else {\n                    throw std::range_error(\"dequeue deadline\");\n                }\n            }\n\n            return  req;\n        }\n\n        size_t peak_depth() const {\n            std::lock_guard&lt;std::mutex&gt; lk(mx);\n            return _peak;\n        }\n\n      private:\n        mutable std::mutex mx;\n        mutable std::condition_variable cv;\n\n        size_t _max = 50;\n        size_t _peak = 0;\n        std::deque&lt;Request&gt; _queue;\n    };\n</code></pre>\n\n<p>This is nothing special, and doesn't actually use threads yet. Let's make a worker function that accepts a reference to a queue (more than 1 worker can be started if so desired):</p>\n\n<pre><code>    void worker(std::string name, Queue&amp; queue, Clock::duration d = 30s) {\n        auto const deadline = Clock::now() + d;\n\n        while(true) try {\n            auto r = queue.dequeue(deadline);\n            (std::cout &lt;&lt; \"Worker \" &lt;&lt; name &lt;&lt; \" handling request '\").write(r.data.data(), r.data.size()) &lt;&lt; \"'\\n\";\n        }\n        catch(std::exception const&amp; e) {\n            std::cout &lt;&lt; \"Worker \" &lt;&lt; name &lt;&lt; \" got \" &lt;&lt; e.what() &lt;&lt; \"\\n\";\n            break;\n        }\n    }\n}\n</code></pre>\n\n<h1>The <code>main</code> Driver</h1>\n\n<p>Here's where the Queue gets instantiated and both the network server as well as some worker threads are started:</p>\n\n<pre><code>int main() {\n    Service::Queue queue;\n\n    auto handler = [&amp;](std::istream&amp; is) {\n            queue.enqueue(Service::parse_request(is));\n        };\n\n    Network::Server server(6767, handler);\n\n    std::vector&lt;std::thread&gt; pool;\n    pool.emplace_back([&amp;queue] { Service::worker(\"one\", queue, 6s); });\n    pool.emplace_back([&amp;queue] { Service::worker(\"two\", queue, 6s); });\n\n    server.run_for(3s); // this blocks\n\n    for (auto&amp; thread : pool)\n        if (thread.joinable())\n            thread.join();\n\n    std::cout &lt;&lt; \"Maximum queue depth was \" &lt;&lt; queue.peak_depth() &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<h1>Live Demo</h1>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/6a7426eee83ee48c\" rel=\"nofollow noreferrer\">See It Live On Coliru</a></kbd></strong></p>\n\n<p>With a test load looking like this:</p>\n\n<pre><code>for a in \"hello world\" \"the quick\" \"brown fox\" \"jumped over\" \"the pangram\" \"bye world\"\ndo\n     netcat 127.0.0.1 6767 &lt;&lt;&lt; \"$a\" || echo \"not sent: '$a'\"&amp;\ndone\nwait\n</code></pre>\n\n<p>It prints something like:</p>\n\n<pre><code>Worker one handling request 'brownfox'\nWorker one handling request 'thepangram'\nWorker one handling request 'jumpedover'\nWorker two handling request 'Worker helloworldone handling request 'byeworld'\nWorker one handling request 'thequick'\n'\nWorker one got dequeue deadline\nWorker two got dequeue deadline\nMaximum queue depth was 6\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 8398485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94cd63c229f52bd72ac8090a14656b99?s=128&d=identicon&r=PG&f=1", "display_name": "2586steps", "link": "https://stackoverflow.com/users/8398485/2586steps"}, "edited": false, "score": 0, "creation_date": 1525263968, "post_id": 49871239, "comment_id": 87287103, "body": "Shouldn&#39;t we somehow manage the lifetime of the thread? Is this method really safe?"}, {"owner": {"reputation": 21, "user_id": 9653749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684ca4bbc095e37a07d765ab689867be?s=128&d=identicon&r=PG&f=1", "display_name": "kanki66", "link": "https://stackoverflow.com/users/9653749/kanki66"}, "reply_to_user": {"reputation": 29, "user_id": 8398485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94cd63c229f52bd72ac8090a14656b99?s=128&d=identicon&r=PG&f=1", "display_name": "2586steps", "link": "https://stackoverflow.com/users/8398485/2586steps"}, "edited": false, "score": 0, "creation_date": 1525339810, "post_id": 49871239, "comment_id": 87320779, "body": "if you close the connection the while loop will be exit and then the thread ends."}], "tags": [], "owner": {"reputation": 21, "user_id": 9653749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684ca4bbc095e37a07d765ab689867be?s=128&d=identicon&r=PG&f=1", "display_name": "kanki66", "link": "https://stackoverflow.com/users/9653749/kanki66"}, "is_accepted": false, "score": 0, "last_activity_date": 1523947268, "last_edit_date": 1523947268, "creation_date": 1523946359, "answer_id": 49871239, "question_id": 46935025, "link": "https://stackoverflow.com/questions/46935025/boost-asio-single-tcp-server-many-clients/49871239#49871239", "title": "Boost asio, single TCP server, many clients", "body": "<p>The includes you need. Some maybe are unnecessary:</p>\n\n<p><code>boost/asio.hpp</code>, <code>boost/thread.hpp</code>, <code>boost/asio/io_service.hpp</code></p>\n\n<p><code>boost/asio/spawn.hpp</code>, <code>boost/asio/write.hpp</code>, <code>boost/asio/buffer.hpp</code></p>\n\n<p><code>boost/asio/ip/tcp.hpp</code>, <code>iostream</code>, <code>stdlib.h</code>, <code>array</code>, <code>string</code></p>\n\n<p><code>vector</code>, <code>string.h</code>, <code>stdio.h</code>, <code>process.h</code>, <code>iterator</code></p>\n\n<pre><code>using namespace boost::asio;\nusing namespace boost::asio::ip;\n\nio_service ioservice;\n\ntcp::endpoint sim_endpoint{ tcp::v4(), 4066 };              //{which connectiontype, portnumber}\ntcp::acceptor sim_acceptor{ ioservice, sim_endpoint };\nstd::vector&lt;tcp::socket&gt; sim_sockets;\n\nstatic int iErgebnis;\nint iSocket = 0;\n\n\nvoid do_write(int a)                                        //int a is the postion of the socket in the vector\n{\n    int iWSchleife = 1;                                     //to stay connected with putty or something\n    static char chData[32000];\n    std::string sBuf = \"Received!\\r\\n\";\n\n    while (iWSchleife &gt; 0)          \n    {\n        boost::system::error_code error;\n        memset(chData, 0, sizeof(chData));        //clear the char \n\n        iErgebnis = sim_sockets[a].read_some(boost::asio::buffer(chData), error);           //recv data from client\n        iWSchleife = iErgebnis;                                                             //if iErgebnis is bigger then 0 it will stay in the loop. iErgebniss is always &gt;0 when data is received\n\n        if (iErgebnis &gt; 0) {\n            printf(\"%d data received from client : \\n%s\\n\\n\", iErgebnis, chData);\n            write(sim_sockets[a], boost::asio::buffer(sBuf), error);  //send data to client\n        }\n        else {\n            boost::system::error_code ec;\n            sim_sockets[a].shutdown(boost::asio::ip::tcp::socket::shutdown_send, ec);       //close the socket when no data\n            if (ec)\n            {\n                printf(\"studown error\");                                                    // An error occurred.\n            }\n        }\n    }\n}\n\nvoid do_accept(yield_context yield)\n{\n    while (1)                                                   //endless loop to accept limitless clients\n    {\n        sim_sockets.emplace_back(ioservice);                    //look to the link below for more info\n        sim_acceptor.async_accept(sim_sockets.back(), yield);   //waits here to accept an client\n\n        boost::thread dosome(do_write, iSocket);                //when accepted, starts the thread do_write and passes the parameter iSocket\n        iSocket++;                                              //to know the position of the socket in the vector\n\n    }\n}\n\nint main()\n{\n    sim_acceptor.listen();\n    spawn(ioservice, do_accept);            //here you can learn more about Coroutines https://theboostcpplibraries.com/boost.coroutine\n    ioservice.run();                        //from here you jump to do:accept\n    getchar(); \n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 8398485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94cd63c229f52bd72ac8090a14656b99?s=128&d=identicon&r=PG&f=1", "display_name": "2586steps", "link": "https://stackoverflow.com/users/8398485/2586steps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4068, "favorite_count": 3, "answer_count": 2, "score": 2, "last_activity_date": 1523947268, "creation_date": 1508941556, "last_edit_date": 1508946867, "question_id": 46935025, "link": "https://stackoverflow.com/questions/46935025/boost-asio-single-tcp-server-many-clients", "title": "Boost asio, single TCP server, many clients", "body": "<p>I am creating a TCP server that will use boost asio which will accept connections from many clients, receive data, and send confirmations. The thing is that I want to be able to accept all the clients but I want to work only with one at a time. I want all the other transactions to be kept in a queue.</p>\n\n<p>Example:</p>\n\n<ol>\n<li>Client1 connects</li>\n<li>Client2 connects</li>\n<li>Client1 sends data and asks for reply</li>\n<li>Client2 sends data and asks for reply</li>\n<li>Client2's request is put into queue</li>\n<li>Client1's data is read, server replies, end of transaction</li>\n<li>Client2's request is taken from the queue, server reads data, replies end of transaction.</li>\n</ol>\n\n<p>So this is something between asynchronous server and blocking server. I want to do just 1 thing at once but at the same time I want to be able to store all client sockets and their demands in the queue. </p>\n\n<p>I was able to create server-client communication with all the functionality that I need but only on single thread. Once client disconnects server is terminated as well. I don't really know how to start implementing what I have mentioned above. Should I open new thread each time connection is accepted? Should I use async_accept or blocking accept? </p>\n\n<p>I have read boost::asio chat example, where many clients connect so single server, but there is no queuing mechanism that I need here.</p>\n\n<p>I am aware that this post might be a bit confusing but TCP servers are new to me so I am not familiar enough with the terminology. There is also no source code to post because I am asking only for help with concept of this project.</p>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 1, "creation_date": 1508950540, "post_id": 46934798, "comment_id": 80823206, "body": "I&#39;m not familiar enough with Eigen to give a proper answer, but if nothing exists you can always write a lambda function that returns what you want and assign the result of that to a <code>const</code>."}, {"owner": {"reputation": 261, "user_id": 822728, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/193974da54d53d3d9f8a010e0d1be4bf?s=128&d=identicon&r=PG", "display_name": "Markus", "link": "https://stackoverflow.com/users/822728/markus"}, "reply_to_user": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 0, "creation_date": 1509005059, "post_id": 46934798, "comment_id": 80844838, "body": "I, otoh, am not really familiar with lambdas in C++. Used it only now or then. Could you give me an example for this solution, please? (It would be purely academic, because the answer below already suits my needs...)"}], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 822728, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/193974da54d53d3d9f8a010e0d1be4bf?s=128&d=identicon&r=PG", "display_name": "Markus", "link": "https://stackoverflow.com/users/822728/markus"}, "edited": false, "score": 0, "creation_date": 1509004955, "post_id": 46940922, "comment_id": 80844772, "body": "Thanks, works perfectly :) Yes, I like to use const where ever it is sane and possible."}], "tags": [], "owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": true, "score": 1, "last_activity_date": 1508960822, "creation_date": 1508960822, "answer_id": 46940922, "question_id": 46934798, "link": "https://stackoverflow.com/questions/46934798/how-can-i-initialize-an-eigen-matrix-blockwise/46940922#46940922", "title": "How can I initialize an &quot;Eigen&quot; - Matrix blockwise?", "body": "<p>Without the const you would do:</p>\n\n<pre><code>Vector3d b;\nb &lt;&lt; a, 1;\n</code></pre>\n\n<p>If you really want it to be const, then you can do:</p>\n\n<pre><code>const Vector3d b = (Vector3d() &lt;&lt; a, 1).finished();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "is_accepted": false, "score": 1, "last_activity_date": 1509006396, "creation_date": 1509006396, "answer_id": 46949266, "question_id": 46934798, "link": "https://stackoverflow.com/questions/46934798/how-can-i-initialize-an-eigen-matrix-blockwise/46949266#46949266", "title": "How can I initialize an &quot;Eigen&quot; - Matrix blockwise?", "body": "<p>Here's what you could do using a lambda (assuming there's not an easier way by using a constructor call):</p>\n\n<pre><code>auto generateB = [&amp;]() -&gt; Vector3d {\n    Vector3d b(0, 0, 1);\n    b.head&lt;2&gt;() = a;\n    return b;\n  };\n</code></pre>\n\n<p>And then you'd use it like this:</p>\n\n<pre><code>auto const actualB = generateB();\nVector3d const anotherB = generateB();\n</code></pre>\n"}], "owner": {"reputation": 261, "user_id": 822728, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/193974da54d53d3d9f8a010e0d1be4bf?s=128&d=identicon&r=PG", "display_name": "Markus", "link": "https://stackoverflow.com/users/822728/markus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 46940922, "answer_count": 2, "score": 0, "last_activity_date": 1509006396, "creation_date": 1508940920, "question_id": 46934798, "link": "https://stackoverflow.com/questions/46934798/how-can-i-initialize-an-eigen-matrix-blockwise", "title": "How can I initialize an &quot;Eigen&quot; - Matrix blockwise?", "body": "<p>Sorry for the subject - I wasn't able to create a better one...</p>\n\n<p>What I mean is: I have a 2d-Vector a and a 3d-Vector b. When I initialize b, b(0,1) should be set to a and b(2) should be set to 1. This code works:</p>\n\n<pre><code>    const Vector2d a(1,2);\n    Vector3d b( 0,0,1 );\n    b.head&lt;2&gt;() = a;\n</code></pre>\n\n<p>But what I would rather have (among others because of the <code>const</code>):</p>\n\n<pre><code>    const Vector2d a(1,2);\n    const Vector3d b( a, 1 );\n</code></pre>\n\n<p>This doesn't work. Is there a way to achieve this?</p>\n"}, {"tags": ["c++", "variadic-templates", "variadic-functions", "variadic"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1508940834, "post_id": 46934730, "comment_id": 80816677, "body": "You can&#39;t have a parameter pack as a data member. <code>NodeData... data;</code> isn&#39;t an acceptable class member. The closest thing might be <code>std::tuple&lt;NodeData...&gt; data;</code>."}, {"owner": {"reputation": 111, "user_id": 7079722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4076a3cf4d0a37710b6befe2d3f87fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ezor", "link": "https://stackoverflow.com/users/7079722/ezor"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1508940980, "post_id": 46934730, "comment_id": 80816802, "body": "Thanks for this super-fast answer ! Do I have to use tuple or is this just a solution among many others? Cause I can&#39;t use it here (<code>&#39;tuple&#39; could not be resolved</code> error)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1508941532, "post_id": 46934730, "comment_id": 80817215, "body": "You can always come up with your own solution, but <code>std::tuple</code> is designed to contain sets of objects of varying type. See <a href=\"http://en.cppreference.com/w/cpp/utility/tuple\" rel=\"nofollow noreferrer\"><code>std::tuple</code></a>. Be sure to include <code>#include &lt;tuple&gt;</code>. It&#39;s not as easy to use as other containers, but that&#39;s consequence of using variadic templates."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508941534, "post_id": 46934730, "comment_id": 80817219, "body": "@Ezor As the Standard way to implement a set of arbitrarily typed objects, <code>std::tuple</code> is the natural choice, unless you find some specific reason to use anything else."}, {"owner": {"reputation": 111, "user_id": 7079722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4076a3cf4d0a37710b6befe2d3f87fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ezor", "link": "https://stackoverflow.com/users/7079722/ezor"}, "edited": false, "score": 0, "creation_date": 1508941737, "post_id": 46934730, "comment_id": 80817348, "body": "I agree with you. But for some reason <code>tuple</code> is &quot;could not be resolved&quot; \talthough I&#39;ve included it on beforehand (can&#39;t understand so far)"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508941792, "post_id": 46934730, "comment_id": 80817382, "body": "Post the exact code you wrote and the exact message you got."}, {"owner": {"reputation": 111, "user_id": 7079722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4076a3cf4d0a37710b6befe2d3f87fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ezor", "link": "https://stackoverflow.com/users/7079722/ezor"}, "edited": false, "score": 0, "creation_date": 1508941918, "post_id": 46934730, "comment_id": 80817482, "body": "this is the exact code (without all functions of course, but all the others are alike) I&#39;ve updated my first post to give you an overview of them.  The message <code>Symbol &#39;tupe&#39; could not be resolved</code> is given by my IDE (Eclipse)"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508942124, "post_id": 46934730, "comment_id": 80817646, "body": "<code>tupe</code>. Think about that for a bit. Also, once you spell it right, it still needs the <code>std::</code> namespace qualifier, unless you are <code>using</code> that namespace, which you probably shouldn&#39;t."}, {"owner": {"reputation": 111, "user_id": 7079722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4076a3cf4d0a37710b6befe2d3f87fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ezor", "link": "https://stackoverflow.com/users/7079722/ezor"}, "edited": false, "score": 0, "creation_date": 1508942403, "post_id": 46934730, "comment_id": 80817824, "body": "I did not copy paste that. It is of course <code>Symbol &#39;tuple&#39; could not be resolved</code>, my bad. I also use <code>std::</code> before"}, {"owner": {"reputation": 111, "user_id": 7079722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4076a3cf4d0a37710b6befe2d3f87fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ezor", "link": "https://stackoverflow.com/users/7079722/ezor"}, "edited": false, "score": 0, "creation_date": 1508942739, "post_id": 46934730, "comment_id": 80818072, "body": "I also have couples of <code>parameter packs not expended with &#39;...&#39;</code> when I call from <code>Graph</code> functions in <code>Node</code>"}, {"owner": {"reputation": 111, "user_id": 7079722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4076a3cf4d0a37710b6befe2d3f87fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ezor", "link": "https://stackoverflow.com/users/7079722/ezor"}, "edited": false, "score": 0, "creation_date": 1508943271, "post_id": 46934730, "comment_id": 80818479, "body": "Ok, so I think I solve some issues, but my <code>set_data</code> function does&#39;t work. Is there a nice way to store data from the template variable <code>nodeData</code> into the tuple (assuming I find out what&#39;s wrong with <code>tuple</code>?)"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508944196, "post_id": 46934730, "comment_id": 80819112, "body": "For anyone to stand any chance of answering that, you need to define <i>&quot;does[n]&#39;t work&quot;</i>..."}, {"owner": {"reputation": 111, "user_id": 7079722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4076a3cf4d0a37710b6befe2d3f87fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ezor", "link": "https://stackoverflow.com/users/7079722/ezor"}, "edited": false, "score": 0, "creation_date": 1508945116, "post_id": 46934730, "comment_id": 80819821, "body": "It was just a syntax mistake actually. I didn&#39;t know where to add <code>...</code>. The answer posted by @Richard Hodges solve this.  Regarding to the &quot;tuple question&quot;, it appears that it is just a fake-error return by Eclipse. I don&#39;t know what happen, but since I couldn&#39;t test my programm before having solve everything else, I was misled."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 7079722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4076a3cf4d0a37710b6befe2d3f87fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ezor", "link": "https://stackoverflow.com/users/7079722/ezor"}, "edited": false, "score": 0, "creation_date": 1508944436, "post_id": 46935783, "comment_id": 80819295, "body": "Thanks a lot. I was doing something similar but it&#39;s very hepfull to have that.  it&#39;s seems that my previous issue about <code>tuple</code> was just a fake-error shown by Eclipse. The real problem was the way I set <code>data</code>."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 0, "last_activity_date": 1508943577, "creation_date": 1508943577, "answer_id": 46935783, "question_id": 46934730, "link": "https://stackoverflow.com/questions/46934730/using-variadics-function-in-variadics-template-class/46935783#46935783", "title": "Using variadics function in variadics template class", "body": "<p>start here. Then think about separating out the types of the constructor arguments and the set_data calls:</p>\n\n<pre><code>//in Node.hpp\n\n#include &lt;tuple&gt;\n\ntemplate&lt;typename Identifier , typename... NodeData&gt;\nclass Node {\nprivate:\n    Identifier ID;\n    std::tuple&lt;NodeData...&gt; data;\n\npublic:\n    Node(Identifier nodeID, NodeData... data)\n    : ID(nodeID)\n    , data { data ... }\n    {\n    }\n\n    void set_data(NodeData... data){\n        this-&gt;data = std::tie(data...);\n    }\n\n    auto get_data() const {\n        return this-&gt;data;\n    }\n};\n\n\nNode&lt;int, int, float&gt;&amp; get_Node(int id)\n{\n    // whatever you need to do here\n}\n\n//in Graph.hpp\ntemplate&lt;class Identifier, class...nodeData&gt;\nvoid update_data(Identifier ID, nodeData... data)\n{\n    get_Node(ID).set_data(data...);\n}\n\nint main()\n{\n    Node&lt;int, int, float&gt; x = { 10, 1, 2.1 };\n\n    update_data(10, 1, 2.1);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 7079722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4076a3cf4d0a37710b6befe2d3f87fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Ezor", "link": "https://stackoverflow.com/users/7079722/ezor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 46935783, "answer_count": 1, "score": 0, "last_activity_date": 1508943577, "creation_date": 1508940721, "last_edit_date": 1508943150, "question_id": 46934730, "link": "https://stackoverflow.com/questions/46934730/using-variadics-function-in-variadics-template-class", "title": "Using variadics function in variadics template class", "body": "<p>I'd like to implement a graph where each node has data. However I do not know yet what kind of data I'll get. Therefore I think I should use variadics template to make it. My class <code>Node</code> has to perform somethink like this : </p>\n\n<pre><code>//in Node.hpp\ntemplate&lt;typename Identifier , typename... NodeData&gt;\nclass Node {\n private:\nnodeData... data;\n//std::tuple&lt;nodeData...&gt; data;\nIdentifier ID;\n\n public:\nNode(Identifier nodeID, NodeData... data){\n     this-&gt;ID = nodeID;\n     this-&gt;data = data;\n}\n\nvoid set_data(nodeData... data){\n    this-&gt;data = data;\n}\n\nnodeData... get_data(){\n//std::tuple&lt;nodeData...&gt; get_data() {\n    return this-&gt;data;\n}\n</code></pre>\n\n<p>But as you may know, it does't work like that, but I have no idea how to make it right. <code>NodeData</code> could be pretty much everything, for instance a string and two int.\nMoreover, this class is used somewhere else ( in class <code>Graph</code>) with functions that looks like</p>\n\n<pre><code>//in Graph.hpp\nvoid update_data(Identifier ID, nodeData... data){\n    get_Node(ID).Node&lt;Identifier, nodeData...&gt;::set_data(data)\n    // get_Node(ID).Node&lt;Identifier, nodeData...&gt;::set_data(data...)\n}\n</code></pre>\n\n<p>Does this syntax looks right to you (assuming <code>set_data</code> works)?</p>\n\n<p>Thank you in advance for any kind of help/clue,</p>\n\n<p>Ezor</p>\n\n<p>PS : sorry for my bad english</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 504, "user_id": 5478864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1dac38d17cc45c23291afaf34087fc22?s=128&d=identicon&r=PG", "display_name": "Rafiwui", "link": "https://stackoverflow.com/users/5478864/rafiwui"}, "edited": false, "score": 0, "creation_date": 1508940856, "post_id": 46934726, "comment_id": 80816701, "body": "Provide an attempt so we can help you. But here is a hint: <code>*=</code>"}, {"owner": {"reputation": 504, "user_id": 5478864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1dac38d17cc45c23291afaf34087fc22?s=128&d=identicon&r=PG", "display_name": "Rafiwui", "link": "https://stackoverflow.com/users/5478864/rafiwui"}, "edited": false, "score": 0, "creation_date": 1508941308, "post_id": 46934726, "comment_id": 80817049, "body": "Sorry for sounding rude but how is that an approach? Can you explain what you think you are doing there (be it with code comments or in your question)"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1508941522, "post_id": 46934726, "comment_id": 80817205, "body": "<code>cin &gt;&gt; l;</code> what&#39;s the role of <code>l</code> in the loop?"}, {"owner": {"reputation": 29, "user_id": 8832017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0877fc1a17b50b3462f66926832bae22?s=128&d=identicon&r=PG&f=1", "display_name": "kkasbarian", "link": "https://stackoverflow.com/users/8832017/kkasbarian"}, "reply_to_user": {"reputation": 504, "user_id": 5478864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1dac38d17cc45c23291afaf34087fc22?s=128&d=identicon&r=PG", "display_name": "Rafiwui", "link": "https://stackoverflow.com/users/5478864/rafiwui"}, "edited": false, "score": 0, "creation_date": 1508941542, "post_id": 46934726, "comment_id": 80817229, "body": "@Rafiwui Sure. First of all, I just posted my first question on the platform (so the question could sound a bit childish), also I know that the code is wrong, but it has been only 2 sessions for the lesson and we didn&#39;t learn much yet. The teacher just introduced the while loop and we wrote few code examples and he gave this (unsolvable for the whole class) problem to solve and we tried to solve it with no avail, so I came here to get tips on how to solve it. We should multiply numbers less than 3 and divisible by 3, which is 3,6 and 9, so the console shows 162"}, {"owner": {"reputation": 693, "user_id": 3958971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2472c176f3cabbcdf51dd61fb0d3db21?s=128&d=identicon&r=PG&f=1", "display_name": "Eli", "link": "https://stackoverflow.com/users/3958971/eli"}, "edited": false, "score": 0, "creation_date": 1508941567, "post_id": 46934726, "comment_id": 80817250, "body": "Hint: The modulo check should not be part of the condition of the while loop like you have it, since as soon as a number is found that is not divisible by 3, the entire loop will end. Move that check to be inside the loop."}, {"owner": {"reputation": 29, "user_id": 8832017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0877fc1a17b50b3462f66926832bae22?s=128&d=identicon&r=PG&f=1", "display_name": "kkasbarian", "link": "https://stackoverflow.com/users/8832017/kkasbarian"}, "reply_to_user": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 0, "creation_date": 1508941782, "post_id": 46934726, "comment_id": 80817375, "body": "@user0042 just a dumb way for the console to not close after the program finishes"}, {"owner": {"reputation": 504, "user_id": 5478864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1dac38d17cc45c23291afaf34087fc22?s=128&d=identicon&r=PG", "display_name": "Rafiwui", "link": "https://stackoverflow.com/users/5478864/rafiwui"}, "edited": false, "score": 0, "creation_date": 1508942260, "post_id": 46934726, "comment_id": 80817728, "body": "@KourkenK. ok so i gave you a few hints because like said before this is no solution but a helping site ;) feel free to ask questions about things you don&#39;t understand"}, {"owner": {"reputation": 29, "user_id": 8832017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0877fc1a17b50b3462f66926832bae22?s=128&d=identicon&r=PG&f=1", "display_name": "kkasbarian", "link": "https://stackoverflow.com/users/8832017/kkasbarian"}, "reply_to_user": {"reputation": 504, "user_id": 5478864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1dac38d17cc45c23291afaf34087fc22?s=128&d=identicon&r=PG", "display_name": "Rafiwui", "link": "https://stackoverflow.com/users/5478864/rafiwui"}, "edited": false, "score": 0, "creation_date": 1508942528, "post_id": 46934726, "comment_id": 80817922, "body": "@Rafiwui Sure, I&#39;m looking into it. Thanks :)"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 8832017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0877fc1a17b50b3462f66926832bae22?s=128&d=identicon&r=PG&f=1", "display_name": "kkasbarian", "link": "https://stackoverflow.com/users/8832017/kkasbarian"}, "edited": false, "score": 0, "creation_date": 1508943154, "post_id": 46935133, "comment_id": 80818406, "body": "Thanks a lot, this helped me come closer to what I wanted. I actually didn&#39;t need to keep that last l variable so I removed it. (I would upvote, but I don&#39;t have enough points for that! :)"}, {"owner": {"reputation": 504, "user_id": 5478864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1dac38d17cc45c23291afaf34087fc22?s=128&d=identicon&r=PG", "display_name": "Rafiwui", "link": "https://stackoverflow.com/users/5478864/rafiwui"}, "reply_to_user": {"reputation": 29, "user_id": 8832017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0877fc1a17b50b3462f66926832bae22?s=128&d=identicon&r=PG&f=1", "display_name": "kkasbarian", "link": "https://stackoverflow.com/users/8832017/kkasbarian"}, "edited": false, "score": 0, "creation_date": 1508943239, "post_id": 46935133, "comment_id": 80818459, "body": "@KourkenK. no worries. Glad I could help"}], "tags": [], "owner": {"reputation": 504, "user_id": 5478864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1dac38d17cc45c23291afaf34087fc22?s=128&d=identicon&r=PG", "display_name": "Rafiwui", "link": "https://stackoverflow.com/users/5478864/rafiwui"}, "is_accepted": false, "score": 0, "last_activity_date": 1508941874, "creation_date": 1508941874, "answer_id": 46935133, "question_id": 46934726, "link": "https://stackoverflow.com/questions/46934726/multiply-numbers-which-are-divisible-by-3-and-less-than-10-with-a-while-loop-in/46935133#46935133", "title": "Multiply numbers which are divisible by 3 and less than 10 with a while loop in c++?", "body": "<p>Ok so here are a few hints that hopefully help you solving this:</p>\n\n<ol>\n<li><p>Your approach with two variables (x and r) outside the loop is a good starting point for this.</p></li>\n<li><p>Like I wrote in the comments you should use <code>*=</code> instead of your formula (I still don't understand how it is related to the problem)</p></li>\n<li><p>Don't check if <code>x</code> is dividable by 3 inside the while-check because it would lead to an too early breaking of the loop</p></li>\n<li><p>You can delete your <code>l</code> variable because it has no affect at the moment ;)</p></li>\n<li><p>Your output should also happen outside the loop, else it is done everytime the loop runs (in your case this would be 10 times)</p></li>\n</ol>\n\n<p>I hope I can help ;)</p>\n\n<p><strong>EDIT:</strong> Forget about No.4. I didn't saw your comment about the non-closing console.</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 8832017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0877fc1a17b50b3462f66926832bae22?s=128&d=identicon&r=PG&f=1", "display_name": "kkasbarian", "link": "https://stackoverflow.com/users/8832017/kkasbarian"}, "edited": false, "score": 0, "creation_date": 1508943335, "post_id": 46935349, "comment_id": 80818519, "body": "Thanks a lot, Aditi. It worked. Now I have to find how all of this works :)"}], "tags": [], "owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "is_accepted": true, "score": 0, "last_activity_date": 1508942416, "creation_date": 1508942416, "answer_id": 46935349, "question_id": 46934726, "link": "https://stackoverflow.com/questions/46934726/multiply-numbers-which-are-divisible-by-3-and-less-than-10-with-a-while-loop-in/46935349#46935349", "title": "Multiply numbers which are divisible by 3 and less than 10 with a while loop in c++?", "body": "<p>Firstly your checking the condition <code>x%3 == 0</code> brings you out of your while - loop right in the first iteration where <code>x</code> is <code>1</code>. You need to check the condition inside the loop.</p>\n\n<p>Since you wish to store your answer in variable <code>r</code> you must initialize it to 1 since the product of anything with 0 would give you 0.</p>\n\n<p>Another important thing is you need to <strong>increment</strong> the value of x at each iteration i.e. to check if <strong>each</strong> number in the range of 1 to 10 is divisible by 3 or not .</p>\n\n<pre><code>int main()\n{\n        int x, r;\n        int l;\n        x = 1;\n        r = 1;\n\n   while (x &lt; 10) \n   {\n         if(x%3 == 0)\n             r = r*x ;\n       x = x + 1; //incrementing the value of x\n   }\n   cout&lt;&lt;r;\n}\n</code></pre>\n\n<p>Lastly I have no idea why you have written the last <code>cin&gt;&gt;l</code> statement . Omit it if not required.</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 8832017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0877fc1a17b50b3462f66926832bae22?s=128&d=identicon&r=PG&f=1", "display_name": "kkasbarian", "link": "https://stackoverflow.com/users/8832017/kkasbarian"}, "edited": false, "score": 0, "creation_date": 1508945859, "post_id": 46936377, "comment_id": 80820347, "body": "I appreciate your answer, but we still didn&#39;t learn the for loop, so that&#39;s why I requested a while loop tips. Anyways, it&#39;ll be a good reference to look at when we go over the for loop. Thanks. :)"}], "tags": [], "owner": {"reputation": 73, "user_id": 4575239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c3b3806e052623b2c9e8b756d1ca713?s=128&d=identicon&r=PG&f=1", "display_name": "Gerd", "link": "https://stackoverflow.com/users/4575239/gerd"}, "is_accepted": false, "score": 0, "last_activity_date": 1508945225, "creation_date": 1508945225, "answer_id": 46936377, "question_id": 46934726, "link": "https://stackoverflow.com/questions/46934726/multiply-numbers-which-are-divisible-by-3-and-less-than-10-with-a-while-loop-in/46936377#46936377", "title": "Multiply numbers which are divisible by 3 and less than 10 with a while loop in c++?", "body": "<pre><code>int main()\n{\n  int result = 1; // \"result\" is better than \"r\"\n\n  for (int x=1; x &lt; 10; ++x)\n  {\n    if (x%3 == 0)\n      result = result * x;\n  }\n\n  cout &lt;&lt; result;\n}\n</code></pre>\n\n<p>or the loop in short with some additional knowledge:</p>\n\n<pre><code> for (int x=3; x &lt; 10; x += 3) // i know that 3 is dividable\n   result *= x;\n</code></pre>\n\n<p>or, as it is c++, and for learning purposes, you could do:</p>\n\n<pre><code>vector&lt;int&gt; values; // a container holding integers that will get the multiples of 3\n\nfor (int x=1; x &lt; 10; ++x) // as usual\n  if ( ! x%3 ) // same as x%3 == 0\n    values.push_back(x); // put the newly found number in the container\n\n// now use a function that multiplies all numbers of the container (1 is start value)\nresult = std::accumulate(values.begin(), values.end(), 1, multiplies&lt;int&gt;());\n\n// so much fun, also get the sum (0 is the start value, no function needed as add is standard)\nint sum = std::accumulate(values.begin(), values.end(), 0);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 8832017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0877fc1a17b50b3462f66926832bae22?s=128&d=identicon&r=PG&f=1", "display_name": "kkasbarian", "link": "https://stackoverflow.com/users/8832017/kkasbarian"}, "edited": false, "score": 0, "creation_date": 1508947229, "post_id": 46936789, "comment_id": 80821310, "body": "I think I should get few lessons from your answer. First, I should definitely use words instead of letters to clarify everything. I really liked the comment with the steps to make things more clear, at the moment we&#39;re working on flowcharts first (on paper), then coding, but I liked the comment approach too.  I have to say that some things we didn&#39;t learn yet, but we&#39;re working on the while loop at the moment.  I actually know HTML and CSS for over a year, so I&#39;m into web development and I understand that programming is hard, but I love coding and that&#39;s why I chose it :)"}, {"owner": {"reputation": 29, "user_id": 8832017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0877fc1a17b50b3462f66926832bae22?s=128&d=identicon&r=PG&f=1", "display_name": "kkasbarian", "link": "https://stackoverflow.com/users/8832017/kkasbarian"}, "edited": false, "score": 0, "creation_date": 1508947438, "post_id": 46936789, "comment_id": 80821447, "body": "Also, this was my first question here, so I&#39;ll get to know the rules better over time and post more. It wasn&#39;t actually handout, but we were struggling with this problem for 3 days now, so that&#39;s why I asked here. I think the best thing to do here is to ask for tips (not for partial or whole solutions).  I hope that I&#39;ll stay with the same attitude that I have atm even after I become a CS programmer and Developer. :D"}, {"owner": {"reputation": 504, "user_id": 5478864, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1dac38d17cc45c23291afaf34087fc22?s=128&d=identicon&r=PG", "display_name": "Rafiwui", "link": "https://stackoverflow.com/users/5478864/rafiwui"}, "edited": false, "score": 0, "creation_date": 1509001407, "post_id": 46936789, "comment_id": 80842655, "body": "Your approach won&#39;t work. You are using <code>sum = x * 1</code> and this will result at the end with the highest number lower 10 that is divisible by 3. Your sum should start with 1 and the it should be <code>sum = sum * x</code> or <code>sum *= x</code>"}], "tags": [], "owner": {"reputation": 1, "user_id": 8832176, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209720832390580/picture?type=large", "display_name": "Jared Santiago", "link": "https://stackoverflow.com/users/8832176/jared-santiago"}, "is_accepted": false, "score": 0, "last_activity_date": 1508946420, "creation_date": 1508946420, "answer_id": 46936789, "question_id": 46934726, "link": "https://stackoverflow.com/questions/46934726/multiply-numbers-which-are-divisible-by-3-and-less-than-10-with-a-while-loop-in/46936789#46936789", "title": "Multiply numbers which are divisible by 3 and less than 10 with a while loop in c++?", "body": "<p>It's important to remember the difference between = and ==.  = sets something to a value while == compares something to a value.  You're on the right track with incrementing x and using x as a condition to check your range of numbers. When writing code I usually try and write a \"pseudocode\" in English to organize my steps and get my logic down. It's also wise to consider using variables that tell you what they are as opposed to just  random letters.  Imagine if you were coding a game and you just had letters as variables; it would be impossible to remember what is what.  When you are first learning to code this really helps a lot. So with that in mind:</p>\n\n<pre><code>/*\n\n - While x is less than 10\n - check value to see if it's mod 3 \n - if it's mod 3 add it to a sum\n - if not's mod 3 bump a counter\n - After my condition is met \n - print to screen  pause screen\n\n*/\n</code></pre>\n\n<p>Now if we flesh out that pseudocode a little more we'll get a skeletal structure.</p>\n\n<pre><code>int main()\n{\nint x=1//value we'll use as a counter\nint sum=0//value we'll use as a sum to print out at the end\n\nwhile(x&lt;10)//condition we'll check against\n{\n  if (x mod 3 is zero)\n   {\n     sum=x*1;\n     increment x\n   }\n  else\n   {\n     increment x\n   }\n}\n//screen output the sum the sum\n//system pause or cin.get() use whatever your teacher gave you.\n</code></pre>\n\n<p>I've given you a lot to work with here you should be able to figure out what you need from this. Computer Science and programming is hard and will require a lot of work.  It's important to develop good coding habits and form now as it will help you in the future. Coding is a skill like welding; the more you do it the better you'll get. I often refer to it as the \"Blue Collar Science\" because it's really a <em>skillset</em> and not just raw knowledge.  It's not like studying history or Biology (minus Biology labs) because those require you to learn things and loosely apply them whereas programming requires you to actually build something.  It's like welding or plumbing in my opinion.</p>\n\n<p>Additionally when you come to sites like these try and read up how things should be posted and try and seek the \"logic\" behind the answer and come up with it on your own as opposed to asking for the answer. People will be more inclined to help you if they think you're working for something instead of asking for a handout (not saying you are, just some advice).  Additionally take the attitude these guys give you with a grain of salt, Computer Scientists aren't known to be the worlds most personable people. =) Good luck.</p>\n"}], "owner": {"reputation": 29, "user_id": 8832017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0877fc1a17b50b3462f66926832bae22?s=128&d=identicon&r=PG&f=1", "display_name": "kkasbarian", "link": "https://stackoverflow.com/users/8832017/kkasbarian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1733, "favorite_count": 0, "accepted_answer_id": 46935349, "answer_count": 4, "score": -5, "last_activity_date": 1508946420, "creation_date": 1508940710, "last_edit_date": 1508942727, "question_id": 46934726, "link": "https://stackoverflow.com/questions/46934726/multiply-numbers-which-are-divisible-by-3-and-less-than-10-with-a-while-loop-in", "title": "Multiply numbers which are divisible by 3 and less than 10 with a while loop in c++?", "body": "<p>In C++, I should write a program where the app detects which numbers are divisible by 3 from 1 till 10 and then multiply all of them and print the result. That means that I should multiply 3,6,9 and print only the result, which is 162, but I should do it by using a \"While\" loop, not just multiplying the 3 numbers with each other. How should I write the code of this? I attached my attempt to code the problem below. Thanks</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\nint x, r;\nint l;\nx = 1;\nr = 0;\n\nwhile (x &lt; 10 &amp;&amp; x%3==0) {\n    r = (3 * x) + 3;\n    cout &lt;&lt; r;\n}\n\ncin &gt;&gt; l;\n}\n</code></pre>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 7, "creation_date": 1508940544, "post_id": 46934640, "comment_id": 80816448, "body": "Try casing to an int, check the range? - This is not a job for a RE."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1508940626, "post_id": 46934640, "comment_id": 80816517, "body": "Validating range by regex is doable but would be order of magnitude more complex that simply convert to <code>int</code> and check range. Use regex just to validate that number is provided."}, {"owner": {"reputation": 23, "user_id": 8831394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b37248e3e28749904ca66f375ac99ac?s=128&d=identicon&r=PG&f=1", "display_name": "MurrackCarn", "link": "https://stackoverflow.com/users/8831394/murrackcarn"}, "edited": false, "score": 0, "creation_date": 1508940669, "post_id": 46934640, "comment_id": 80816547, "body": "void Aircraft::SetHeading(int heading) { \t//Heading can only be between 0-360? \t//Set up regular expression, compare it to input \tstd::regex headingCheck{&quot;^([0-9]|1[0-9]2[0])$&quot;}; \tbool match = false; \twhile (!match) \t{ \t\tif (std::regex_match(heading, headingCheck)) \t\t{ \t\t\theading_ = heading; \t\t} \t\telse \t\t{ \t\t\tstd::cout &lt;&lt; &quot;Invalid heading, can only be between 0 and 360 degrees&quot; &lt;&lt; std::endl; \t\t} \t} \t }  Its for a setter method, what do you guys mean check range?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1508940776, "post_id": 46934640, "comment_id": 80816624, "body": "@MurrackCarn Don&#39;t post code in comments - it&#39;s unreadable. <a href=\"https://stackoverflow.com/posts/46934640/edit\">Edit</a> the question instead."}, {"owner": {"reputation": 23, "user_id": 8831394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b37248e3e28749904ca66f375ac99ac?s=128&d=identicon&r=PG&f=1", "display_name": "MurrackCarn", "link": "https://stackoverflow.com/users/8831394/murrackcarn"}, "edited": false, "score": 0, "creation_date": 1508940845, "post_id": 46934640, "comment_id": 80816692, "body": "Sorry, im new here not used to the way of things, my bad"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1508940861, "post_id": 46934640, "comment_id": 80816705, "body": "We mean convert that string to <code>int</code> and check that <code>int</code> if it is in range like <code>if( angle &lt; 0 or angle &gt; 360 ) &#47;&#47; error</code> and your <code>heading_</code> should be <code>int</code> anyway"}, {"owner": {"reputation": 23, "user_id": 8831394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b37248e3e28749904ca66f375ac99ac?s=128&d=identicon&r=PG&f=1", "display_name": "MurrackCarn", "link": "https://stackoverflow.com/users/8831394/murrackcarn"}, "edited": false, "score": 0, "creation_date": 1508940989, "post_id": 46934640, "comment_id": 80816811, "body": "Heading is already an int, so it doesnt need converted. I can do it through a simple if statement but i thought doing a regex instead would somehow be better"}, {"owner": {"reputation": 759, "user_id": 5166781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e08a3f056e0b36aa3a0375697dfeac6?s=128&d=identicon&r=PG&f=1", "display_name": "Chris H", "link": "https://stackoverflow.com/users/5166781/chris-h"}, "edited": false, "score": 0, "creation_date": 1508942452, "post_id": 46934640, "comment_id": 80817867, "body": "@MurrackCarn If you&#39;re receiving the value as an int I&#39;m struggling to imagine why you&#39;d even consider using a regex. You say &quot;a simple if statement&quot; as if &quot;simple&quot; is in some way negative. Sometimes (often) the simple way to do something is also the right way to do it."}], "answers": [{"comments": [{"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1508965442, "post_id": 46936133, "comment_id": 80831390, "body": "Heading 275 is ... invalid?  Hmm.  Not quite."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1508966340, "post_id": 46936133, "comment_id": 80831819, "body": "Good catch! Edited"}], "tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": false, "score": 1, "last_activity_date": 1508966326, "last_edit_date": 1508966326, "creation_date": 1508944561, "answer_id": 46936133, "question_id": 46934640, "link": "https://stackoverflow.com/questions/46934640/regular-expression-not-working-c/46936133#46936133", "title": "Regular Expression not working C++", "body": "<p>If you still want regex (though this is not optimal) you can use the following expression:</p>\n\n<pre><code>std::regex re{ \"^[0-9]$|^[1-9][0-9]$|^[1-2][0-9][0-9]$|^3[0-5][0-9]$|^360$\" };\nstd::string headings[5] = { \"0\",\"15\",\"390\",\"360\",\"23883\" };\n\nfor (int i = 0; i &lt; 5; ++i)\n    std::cout &lt;&lt; \"Heading \" &lt;&lt; headings[i] &lt;&lt; \" is \" &lt;&lt; (std::regex_match(headings[i], re) ? \"valid\" : \"invalid\") &lt;&lt; std::endl;\n</code></pre>\n\n<p>First part matches 0-9, second part matches 10-99, third part matches 100-299, fourth part matches 300-359, last matches 360. Prints:</p>\n\n<pre><code>Heading 0 is valid\nHeading 15 is valid\nHeading 390 is invalid\nHeading 360 is valid\nHeading 23883 is invalid\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8831394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b37248e3e28749904ca66f375ac99ac?s=128&d=identicon&r=PG&f=1", "display_name": "MurrackCarn", "link": "https://stackoverflow.com/users/8831394/murrackcarn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1508966326, "creation_date": 1508940453, "last_edit_date": 1508940872, "question_id": 46934640, "link": "https://stackoverflow.com/questions/46934640/regular-expression-not-working-c", "title": "Regular Expression not working C++", "body": "<p>im trying to use a regular expression to ensure the heading entered for an aircraft is between o and 360, but i cant get it to work. </p>\n\n<pre><code>std::regex headingCheck{\"^([0-9]|1[0-9]2[0])$\"};\n    bool match = false;\n    while (!match)\n    {\n        if (std::regex_match(heading, headingCheck))\n        {\n            heading_ = heading;\n        }\n        else\n        {\n            std::cout &lt;&lt; \"Invalid heading, can only be between 0 and 360 degrees\" &lt;&lt; std::endl;\n        }\n    }\n</code></pre>\n\n<p>#</p>\n\n<pre><code>//Heading can only be between 0-360?\n    if (heading &gt;= 0 &amp;&amp; heading &lt;= 360)\n    {\n        heading_ = heading;\n    }\n    else\n    {\n        std::cout &lt;&lt; \"Incorrect heading, heading can only be between 0 and 360\" &lt;&lt; std::endl;\n    }\n</code></pre>\n\n<p>Should i do this instead? Is it as accurate/reliable?</p>\n"}, {"tags": ["c++", "data-structures", "stl", "embedded", "cortex-m"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1508940641, "post_id": 46934622, "comment_id": 80816530, "body": "It doesn&#39;t sound you have a problem with data containers. Rather, it sounds to me like you have a problem deciding on an error reporting strategy."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1508947007, "post_id": 46934622, "comment_id": 80821156, "body": "Exceptions are really the only sane way to report failures from arbitrarily nested calls, so if you cannot use exceptions, you pretty much have to make sure failures never happen. This is doable with enough effort and planning ahead. Preallocate enough memory before each operation that could fail. Use intrusive linked lists like ones in boost. For vectors and deques, reserve before adding stuff. Use move (not copy) everywhere."}, {"owner": {"reputation": 71, "user_id": 6317092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f23e08daff04caa3011adcc3b3847b8?s=128&d=identicon&r=PG&f=1", "display_name": "Raman Sakovich", "link": "https://stackoverflow.com/users/6317092/raman-sakovich"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1508949899, "post_id": 46934622, "comment_id": 80822848, "body": "@Fran&#231;oisAndrieux, I think there are many cases when just dropping new data (I mean don&#39;t push it into a container when it full) is enough, and don&#39;t need to throw an exception or return an error status further up the call stack. Anyway thank for reference to boost intrusive list. I&#39;ll try to dig there."}, {"owner": {"reputation": 71, "user_id": 6317092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f23e08daff04caa3011adcc3b3847b8?s=128&d=identicon&r=PG&f=1", "display_name": "Raman Sakovich", "link": "https://stackoverflow.com/users/6317092/raman-sakovich"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1508952867, "post_id": 46934622, "comment_id": 80824514, "body": "@n.m. sorry, my previous comment was for you."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1508957031, "post_id": 46934622, "comment_id": 80826865, "body": "Check out <a href=\"https://github.com/electronicarts/EASTL\" rel=\"nofollow noreferrer\">EASTL</a>, it implements the STL slightly differently from the standard. It has the option of running without exceptions."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1509025434, "post_id": 46934622, "comment_id": 80859183, "body": "There&#39;s a reason why C is the dominant language in embedded systems, and it has nothing to do with conservatism."}, {"owner": {"reputation": 71, "user_id": 6317092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f23e08daff04caa3011adcc3b3847b8?s=128&d=identicon&r=PG&f=1", "display_name": "Raman Sakovich", "link": "https://stackoverflow.com/users/6317092/raman-sakovich"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1509039651, "post_id": 46934622, "comment_id": 80868537, "body": "@Lundin, everything we can do on C we can do on C++ same way. In addition C++ gives us such nice things as templates, function overload, namespaces, OOP etc. Today all of that we can get without any significant overhead. And I don&#39;t see any reason to use C not C++."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1509087056, "post_id": 46934622, "comment_id": 80885471, "body": "@RamanSakovich That&#39;s naive. Just disassemble the code and see what you actually get. Despite all idealists desperately believing otherwise, C++ programs give much more bloated machine code, still in the year 2017, period. Sure, you can write C++ programs as fast and compact as C programs, but <i>C++ programmers don&#39;t do that</i>. They bloat the code until meta programming hell is achieved. This is an embedded system. You cannot use exceptions. You cannot use dynamic allocation. You cannot use asserts. There is no obvious reason why you need template programming. And so on."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1509087456, "post_id": 46934622, "comment_id": 80885655, "body": "Btw C++ is also unsuitable for embedded systems because it cannot do type punning like C can. This makes it impossible to for example serialize data or write certain hardware drivers in C++. Things like flash/eeprom drivers, ADC drivers, timer drivers where you need to go to/from pointers to wider integer types to pointers to smaller ones, cannot be written in C++ - such code will invoke undefined behavior. While C allows you to dodge strict aliasing rules by using unions."}, {"owner": {"reputation": 71, "user_id": 6317092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f23e08daff04caa3011adcc3b3847b8?s=128&d=identicon&r=PG&f=1", "display_name": "Raman Sakovich", "link": "https://stackoverflow.com/users/6317092/raman-sakovich"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1509100617, "post_id": 46934622, "comment_id": 80893501, "body": "@Lundin, that&#39;s old and very known holy war. Let&#39;s not argue about that. The question isn&#39;t about that."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1509107866, "post_id": 46934622, "comment_id": 80897812, "body": "But C++ is what is causing all your problem here... or rather STL."}, {"owner": {"reputation": 71, "user_id": 6317092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f23e08daff04caa3011adcc3b3847b8?s=128&d=identicon&r=PG&f=1", "display_name": "Raman Sakovich", "link": "https://stackoverflow.com/users/6317092/raman-sakovich"}, "edited": false, "score": 1, "creation_date": 1509110939, "post_id": 46934622, "comment_id": 80899856, "body": "No. C++ doesn&#39;t have data containers without dynamic memory and exception in standard library, C doesn&#39;t have data containers in standard library at all. So, from that point of view they are equal. In any case we need to choose third party library or write it on our own. So my choice of c++ doesn&#39;t affect that problem."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 6317092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f23e08daff04caa3011adcc3b3847b8?s=128&d=identicon&r=PG&f=1", "display_name": "Raman Sakovich", "link": "https://stackoverflow.com/users/6317092/raman-sakovich"}, "edited": false, "score": 4, "creation_date": 1508952655, "post_id": 46936549, "comment_id": 80824396, "body": "Exceptions cost much size in executable binary. Hundreds of KB. So, often it&#39;s not acceptable in embedded systems where flash size might be 128 KB and less."}, {"owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "reply_to_user": {"reputation": 71, "user_id": 6317092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f23e08daff04caa3011adcc3b3847b8?s=128&d=identicon&r=PG&f=1", "display_name": "Raman Sakovich", "link": "https://stackoverflow.com/users/6317092/raman-sakovich"}, "edited": false, "score": 0, "creation_date": 1508964385, "post_id": 46936549, "comment_id": 80830783, "body": "Yes I agree, though there are ways to mitigate this. While it may be tedious, it is possible to mark the bulk of methods as <code>noexcept</code> which would allow compilers to prune much of the exception handling tables, and in the case of throwing and catching within a possibly inlined function, it can optimize out the actual exception. I don&#39;t know how well compiler optimize this type of thing right now, but it could be worth an experiment."}, {"owner": {"reputation": 779, "user_id": 2379079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hyI9I.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/2379079/alex"}, "edited": false, "score": 0, "creation_date": 1509153318, "post_id": 46936549, "comment_id": 80917972, "body": "Another problem with exceptions in embedded systems are interrupts."}, {"owner": {"reputation": 22694, "user_id": 72312, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a7ef82cee7127a5d80d021754e0a5333?s=128&d=identicon&r=PG", "display_name": "Macke", "link": "https://stackoverflow.com/users/72312/macke"}, "edited": false, "score": 0, "creation_date": 1562745789, "post_id": 46936549, "comment_id": 100469135, "body": "The custom allocator could call a error handler, which would log (similar to above) and then reset or just halt the system in some error state."}], "tags": [], "owner": {"reputation": 1631, "user_id": 973872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b0517445cf0668757468326b18bf86?s=128&d=identicon&r=PG", "display_name": "nate", "link": "https://stackoverflow.com/users/973872/nate"}, "is_accepted": false, "score": 1, "last_activity_date": 1508945999, "last_edit_date": 1508945999, "creation_date": 1508945693, "answer_id": 46936549, "question_id": 46934622, "link": "https://stackoverflow.com/questions/46934622/c-data-containers-for-embedded-systems/46936549#46936549", "title": "C++ data containers for embedded systems", "body": "<p>You could use a custom allocator that throws std::bad_alloc when it runs out of space, then in your code wrap the section that depends on the insert succeeding in an exception handling block and deal with the allocation failure in the catch clause.</p>\n\n<pre><code>std::queue &lt;message&gt; Queue;\n\ntry\n{\n  Queue.insert (message {\"hello world\"});\n}\ncatch (std::bad_alloc const &amp; Error)\n{\n  LOG (Error.what ());\n}\n</code></pre>\n\n<p>For simple scenarios this is a bit verbose, by with care (using RAII) it can be a powerful tool. In addition, if you have these simplistic scenarios allot, you can hide this pattern in a template.</p>\n\n<pre><code>template &lt;typename fn&gt;\nvoid log_failure_and_contiue (fn Fn)\n{\n    try\n    {\n      Fn ();\n    }\n    catch (std::bad_alloc const &amp; Error)\n    {\n      LOG (Error.what ());\n    }\n}\n\nstd::queue &lt;message&gt; Queue;\n\nlog_failure_and_continue ([&amp;] {\n  Queue.insert ({ \"Hello World!\" });\n});\n</code></pre>\n\n<p>From a performance perspective, most compilers implement zero cost exception handling, so you only take a hit if an exception is thrown, which I would think in a this case should be rare.</p>\n"}], "owner": {"reputation": 71, "user_id": 6317092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f23e08daff04caa3011adcc3b3847b8?s=128&d=identicon&r=PG&f=1", "display_name": "Raman Sakovich", "link": "https://stackoverflow.com/users/6317092/raman-sakovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1213, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1540368275, "creation_date": 1508940407, "last_edit_date": 1508942996, "question_id": 46934622, "link": "https://stackoverflow.com/questions/46934622/c-data-containers-for-embedded-systems", "title": "C++ data containers for embedded systems", "body": "<p>I work with embedded systems. Usually that means I have a small microcontroller with 64 - 512 KB of RAM and 128 - 1024 KB of flash memory like STM32. I prefer to use C++ for programming such systems. But I haven't still found acceptable way to deal with common data structures such as stack, queue, map, etc. </p>\n\n<p>Of course, STL has all of them and many other handy things, but most STL containers require support of exceptions and dynamic memory allocation, which are usually undesirable in embedded programming. </p>\n\n<p>I know we can avoid this problem by using a custom allocator, we could allocate memory from a static object pool or something similar. However the main problem I see that we can't reliably handle a case when it's not enough allocated space for inserting new element into container. STL and other stl-like libraries I've met propose only two options:</p>\n\n<ul>\n<li>asserts. Which means system fails when it's not enough allocated space.</li>\n<li><p>callbacks. A bit better but isn't still convenient for me. </p>\n\n<pre><code>q.push(newElem); /* fails or just calls predefined callback\n                  * when not enough space in queue.\n                  */\n</code></pre></li>\n</ul>\n\n<p>Maybe I'm wrong. But on my opinion the best way is to have returned statuses for notifying caller that it's not enough memory for new element in a container. I would like to decide what to do with that error myself. For example, I would like to drop new element, send a message to debug log and resume normal program flow. It looks more reliable from my perspective.</p>\n\n<p>In other words, I would like to have something like this:</p>\n\n<pre><code>queue&lt;uint32_t, 128&gt; q;\n// some code ... \nqueue::status sts = q.push(newElem);\nif (sts != queue::OK)\n    LOG(\"Not enough space in queue\\r\\n\");\n\n// continue normal program execution ...\n</code></pre>\n\n<p>Somebody has a suggestion how to deal with that thing?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1508940487, "post_id": 46934619, "comment_id": 80816408, "body": "<i>&quot;if other files #included that .cpp file&quot;</i> that would be terribly wrong, because it&#39;s a <code>cpp</code> file. Did you mean a header (e.g. <code>hpp</code>) file?"}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "edited": false, "score": 1, "creation_date": 1508940563, "post_id": 46934619, "comment_id": 80816461, "body": "Alternative solution: Search for all places where those erroneously included <code>.cpp</code> files exist, and fix these."}, {"owner": {"reputation": 6672, "user_id": 315734, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4355355595eef30b4c7284927560c7ee?s=128&d=identicon&r=PG", "display_name": "mentics", "link": "https://stackoverflow.com/users/315734/mentics"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508941180, "post_id": 46934619, "comment_id": 80816946, "body": "@underscore_d It&#39;s not necessarily wrong (see the end of this entry): <a href=\"https://isocpp.org/wiki/faq/templates#separate-template-fn-defn-from-decl\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/&hellip;</a>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508941238, "post_id": 46934619, "comment_id": 80816988, "body": "Just because it&#39;s in the FAQ doesn&#39;t mean it&#39;s not wrong. Even if there are cases where it&#39;s &#39;needed&#39;, that doesn&#39;t mean it&#39;s good style. That answer to me reads like &#39;if you can&#39;t do something, here&#39;s a hack that lets you do it&#39;. Anyway, probably a better way is to have a separate <code>cpp</code> file and compile them both, rather than <code>#include</code>ing, but I don&#39;t think I ever needed to do what they&#39;re talking about, so I don&#39;t know."}], "answers": [{"comments": [{"owner": {"reputation": 6672, "user_id": 315734, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4355355595eef30b4c7284927560c7ee?s=128&d=identicon&r=PG", "display_name": "mentics", "link": "https://stackoverflow.com/users/315734/mentics"}, "edited": false, "score": 0, "creation_date": 1508940924, "post_id": 46934706, "comment_id": 80816763, "body": "I tested it and it doesn&#39;t result in an error. Now... this might mean that I shouldn&#39;t be concerned about processing the file multiple times because the linker doesn&#39;t care, but I&#39;d still like to know."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 6672, "user_id": 315734, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4355355595eef30b4c7284927560c7ee?s=128&d=identicon&r=PG", "display_name": "mentics", "link": "https://stackoverflow.com/users/315734/mentics"}, "edited": false, "score": 0, "creation_date": 1508941011, "post_id": 46934706, "comment_id": 80816831, "body": "@taotree Maybe, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for which case the linker doesn&#39;t complain?"}, {"owner": {"reputation": 6672, "user_id": 315734, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4355355595eef30b4c7284927560c7ee?s=128&d=identicon&r=PG", "display_name": "mentics", "link": "https://stackoverflow.com/users/315734/mentics"}, "edited": false, "score": 0, "creation_date": 1508941535, "post_id": 46934706, "comment_id": 80817220, "body": "example: an empty file. I know that&#39;s not meaningful, but it is accurate. The answer: &quot;the linker will tell you if it matters&quot; is useful but doesn&#39;t directly the answer the question. If the answer is: &quot;no, you can&#39;t&quot; then that&#39;s fine, I just want to know."}, {"owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "reply_to_user": {"reputation": 6672, "user_id": 315734, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4355355595eef30b4c7284927560c7ee?s=128&d=identicon&r=PG", "display_name": "mentics", "link": "https://stackoverflow.com/users/315734/mentics"}, "edited": false, "score": 0, "creation_date": 1508941688, "post_id": 46934706, "comment_id": 80817323, "body": "@taotree Well, why would you want to prevent an empty file include multiple times? But, no I don&#39;t think it&#39;s possible to detect because TU&#39;s are compiled in isolation usually."}], "tags": [], "owner": {"reputation": 7681, "user_id": 8242698, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BjJXu.jpg?s=128&g=1", "display_name": "user0042", "link": "https://stackoverflow.com/users/8242698/user0042"}, "is_accepted": false, "score": 0, "last_activity_date": 1508940952, "last_edit_date": 1508940952, "creation_date": 1508940667, "answer_id": 46934706, "question_id": 46934619, "link": "https://stackoverflow.com/questions/46934619/how-to-ensure-a-file-is-only-processed-once-in-a-build/46934706#46934706", "title": "How to ensure a file is only processed once in a build", "body": "<blockquote>\n  <p>So, I'm trying to guard against accidental multiple includes of the file.</p>\n</blockquote>\n\n<p>At least your linker will serve to throw an error message about ODR rule violations, don't worry.</p>\n\n<blockquote>\n  <p>But if other files #included that .cpp file, it could be processed multiple times</p>\n</blockquote>\n\n<p>Yes, it will be processed multiple times and provide multiple definitions spread over translation units that cannot be linked together anymore.</p>\n"}, {"tags": [], "owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "is_accepted": false, "score": 0, "last_activity_date": 1508955561, "creation_date": 1508955561, "answer_id": 46939486, "question_id": 46934619, "link": "https://stackoverflow.com/questions/46934619/how-to-ensure-a-file-is-only-processed-once-in-a-build/46939486#46939486", "title": "How to ensure a file is only processed once in a build", "body": "<p>what about using the <strong>COUNTER</strong> macro ? Not sure of the behaviour across projects</p>\n\n<pre><code>#if __COUNTER__ &gt; 0\n#error I was there already\n#endif\n</code></pre>\n"}], "owner": {"reputation": 6672, "user_id": 315734, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4355355595eef30b4c7284927560c7ee?s=128&d=identicon&r=PG", "display_name": "mentics", "link": "https://stackoverflow.com/users/315734/mentics"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1508955561, "creation_date": 1508940399, "question_id": 46934619, "link": "https://stackoverflow.com/questions/46934619/how-to-ensure-a-file-is-only-processed-once-in-a-build", "title": "How to ensure a file is only processed once in a build", "body": "<p>Is there a way to throw an error if a source file is processed multiple times in a build? I know you can use <code>#pragma once</code> and <code>#ifndef</code> type of things but that only guards it against being included in a single compilation unit once. I want to ensure it is included/compiled only once across a whole build with multiple projects in a solution in Visual Studio.</p>\n\n<p>I understand that a normal .cpp file is only processed once typically. But if other files <code>#include</code>d that .cpp file, it could be processed multiple times (I know that's not typical, but it best explains the situation). So, I'm trying to guard against accidental multiple includes of the file.</p>\n"}, {"tags": ["c++", "data-structures"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 7862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1635915730051030/picture?type=large", "display_name": "Vincent Yuan", "link": "https://stackoverflow.com/users/7862564/vincent-yuan"}, "edited": false, "score": 0, "creation_date": 1508981137, "post_id": 46935681, "comment_id": 80836220, "body": "<code>s = new Node;                   cin&gt;&gt;s-&gt;data;         s-&gt;next=p-&gt;next;                p-&gt;next=s;</code>"}, {"owner": {"reputation": 123, "user_id": 7862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1635915730051030/picture?type=large", "display_name": "Vincent Yuan", "link": "https://stackoverflow.com/users/7862564/vincent-yuan"}, "edited": false, "score": 0, "creation_date": 1508981519, "post_id": 46935681, "comment_id": 80836309, "body": "Thank you friend. In the 1st case, the latter two lines in the iteration above means the head will point to S, but then S is assigned to p-&gt;next. Then in the next iteration, head does not point to P because the previous S changes the memory address of P, and <code>s-&gt;next=p-&gt;next</code> in the next iteration no longer means the same as first iteration does. What is wrong with my idea?"}], "tags": [], "owner": {"reputation": 16065, "user_id": 1561148, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/zN5vT.jpg?s=128&g=1", "display_name": "tgogos", "link": "https://stackoverflow.com/users/1561148/tgogos"}, "is_accepted": false, "score": 1, "last_activity_date": 1508944307, "last_edit_date": 1508944307, "creation_date": 1508943318, "answer_id": 46935681, "question_id": 46934535, "link": "https://stackoverflow.com/questions/46934535/how-to-understand-the-creation-of-a-singly-linked-list/46935681#46935681", "title": "How to understand the creation of a singly linked list", "body": "<p>This: <code>[ ]</code> is a node and: <code>-&gt;</code> is used to show where the node points to.</p>\n\n<h2>1st case:</h2>\n\n<ul>\n<li><code>HEAD</code> will point to the <code>new node</code></li>\n<li>the <code>new node</code> will point where <code>HEAD</code> was previously pointing</li>\n</ul>\n\n<blockquote>\n<pre><code>p-&gt;next=s;              // what does it mean? I don't get it\n</code></pre>\n  \n  <p>It means: <code>HEAD</code> should now point to the <code>new node</code></p>\n</blockquote>\n\n<hr>\n\n<pre><code>[HEAD]-&gt;\n\niteration 1:\n-------------------------------\ns = new Node      : [S1]\ns-&gt;next = p-&gt;next : [S1]-&gt;\np-&gt;next = s       : [HEAD]-&gt;[S1]\n\niteration 2:\n-------------------------------\ns = new Node      : [S2]\ns-&gt;next = p-&gt;next : [S2]-&gt;[S1]\np-&gt;next = s       : [HEAD]-&gt;[S2]-&gt;[S1]\n\niteration 3:\n-------------------------------\ns = new Node      : [S3]\ns-&gt;next = p-&gt;next : [S3]-&gt;[S2]\np-&gt;next = s       : [HEAD]-&gt;[S3]-&gt;[S2]-&gt;[S1]\n</code></pre>\n\n<h2>2nd case:</h2>\n\n<ul>\n<li><code>HEAD</code> will point to the <code>new node</code></li>\n<li>The <code>new node</code> becomes <code>HEAD</code></li>\n</ul>\n\n<blockquote>\n<pre><code>p=s;              // what does it mean? I don't get it\n</code></pre>\n  \n  <p>It means: the <code>new node</code> now also becomes <code>HEAD</code></p>\n</blockquote>\n\n<hr>\n\n<pre><code>[HEAD]-&gt;\n\niteration 1:\n-------------------------------\ns = new Node      : [S1]\np-&gt;next = s       : [HEAD]-&gt;[S1]\np = s             : [HEAD,S1]               // S1 is the HEAD now\n\niteration 2:\n-------------------------------\ns = new Node      : [S2]\np-&gt;next = s       : [HEAD,S1]-&gt;[S2]\np = s             : [S1]-&gt;[HEAD,S2]        // S2 is the HEAD now\n\niteration 3:\n-------------------------------\ns = new Node      : [S3]\np-&gt;next = s       : [HEAD,S2]-&gt;[S3]\np = s             : [S1]-&gt;[S2]-&gt;[HEAD,S3]  // S3 is the HEAD now\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 7862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1635915730051030/picture?type=large", "display_name": "Vincent Yuan", "link": "https://stackoverflow.com/users/7862564/vincent-yuan"}, "edited": false, "score": 0, "creation_date": 1508981825, "post_id": 46936379, "comment_id": 80836388, "body": "Thank you. In the 1st case, the snippet <code>p-&gt;next=s</code> has changed the <code>p</code>, doesn&#39;t it? Does it mean assign the memory address of <code>s</code> to <code>p-&gt;next</code> ? I still do not understand why <code>p</code> remains unchanged."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "reply_to_user": {"reputation": 123, "user_id": 7862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1635915730051030/picture?type=large", "display_name": "Vincent Yuan", "link": "https://stackoverflow.com/users/7862564/vincent-yuan"}, "edited": false, "score": 0, "creation_date": 1508982047, "post_id": 46936379, "comment_id": 80836436, "body": "p-&gt;next is not p. Assignment to p-&gt;next changes the contents of the node p is pointing to, not p itself."}, {"owner": {"reputation": 123, "user_id": 7862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1635915730051030/picture?type=large", "display_name": "Vincent Yuan", "link": "https://stackoverflow.com/users/7862564/vincent-yuan"}, "edited": false, "score": 0, "creation_date": 1508982205, "post_id": 46936379, "comment_id": 80836473, "body": "In the next iteration, <code>p-&gt;next</code> is not the address of the head, and <code>p-&gt;next</code> is assigned to <code>s-&gt;next</code>. Then why does the head node still point to the new <code>s</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "reply_to_user": {"reputation": 123, "user_id": 7862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1635915730051030/picture?type=large", "display_name": "Vincent Yuan", "link": "https://stackoverflow.com/users/7862564/vincent-yuan"}, "edited": false, "score": 0, "creation_date": 1508982293, "post_id": 46936379, "comment_id": 80836490, "body": "You need to understand the difference between changing the pointer and changing the thing it points to."}, {"owner": {"reputation": 123, "user_id": 7862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1635915730051030/picture?type=large", "display_name": "Vincent Yuan", "link": "https://stackoverflow.com/users/7862564/vincent-yuan"}, "edited": false, "score": 0, "creation_date": 1508982521, "post_id": 46936379, "comment_id": 80836539, "body": "Oh! I misunderstood these two meanings. So in this case, the <code>P</code> it self has not been changed all the time while the things it points to has been changed in each iteration. Is that right?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "reply_to_user": {"reputation": 123, "user_id": 7862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1635915730051030/picture?type=large", "display_name": "Vincent Yuan", "link": "https://stackoverflow.com/users/7862564/vincent-yuan"}, "edited": false, "score": 0, "creation_date": 1508982833, "post_id": 46936379, "comment_id": 80836595, "body": "&quot;The thing it points to is changed&quot; is a bit ambiguous language, be careful. But, yes, the contents of the record that p is pointing at is changed (in particular, the <code>next</code> field of that record. p itself keeps pointing at the same record."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "is_accepted": true, "score": 0, "last_activity_date": 1508945233, "creation_date": 1508945233, "answer_id": 46936379, "question_id": 46934535, "link": "https://stackoverflow.com/questions/46934535/how-to-understand-the-creation-of-a-singly-linked-list/46936379#46936379", "title": "How to understand the creation of a singly linked list", "body": "<p><code>p</code> is the pointer to the insertion point.</p>\n\n<p>The new node is inserted AFTER <code>p</code>.</p>\n\n<p>In the first case, <code>p-&gt;next=s</code>, we hang the new node <code>s</code> off the node pointed to by <code>p</code>, but <code>p</code> itself does not change. The next node will still be inserted right after <code>Head</code>.</p>\n\n<p>In the second case, <code>p-&gt;next=s</code> is still done, but then we do <code>p=s</code>, so the insertion point <code>p</code> moves to the last element of the list, <code>s</code>. The next node will be inserted at the end of the list, not at the head.</p>\n"}], "owner": {"reputation": 123, "user_id": 7862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1635915730051030/picture?type=large", "display_name": "Vincent Yuan", "link": "https://stackoverflow.com/users/7862564/vincent-yuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 46936379, "answer_count": 2, "score": 0, "last_activity_date": 1508945233, "creation_date": 1508940175, "last_edit_date": 1508944357, "question_id": 46934535, "link": "https://stackoverflow.com/questions/46934535/how-to-understand-the-creation-of-a-singly-linked-list", "title": "How to understand the creation of a singly linked list", "body": "<h2>Problem</h2>\n\n<p>I have some difficulties in understanding the code (not the meaning) of a tutorial to create a singly linked list with c++.</p>\n\n<h2>Code</h2>\n\n<pre><code>typedef int ElemType;   \nstruct Node{\n    ElemType data;\n    Node *next;\n};\n\nclass LinkList{\nprivate:\n    Node *Head;\npublic:\n    LinkList();         \n    ~LinkList();\n    void CreateList1(int n);\n    void CreateList2(int n);\n    void ListInsert(int i, int e);\n    int ListDelete(int i);\n    int GetElem(int i);\n    int LocateElem(int e);\n    int ListLength();\n};\n\nvoid LinkList::CreateList1(int n) {\n    //create a linked list by inserting the element in the head\n    Node *p, *s;\n    p = Head;\n    cout&lt;&lt;\"\u8bf7\u4f9d\u6b21\u8f93\u5165\"&lt;&lt;n&lt;&lt;\"\u4e2a\u6570\u636e\u5143\u7d20\u503c\"&lt;&lt;endl;\n    for (int i =1; i&lt;n; i++){\n        s = new Node;           \n        cin&gt;&gt;s-&gt;data;\n        s-&gt;next=p-&gt;next;       \n        p-&gt;next=s;              // what does it mean? I don't get it.\n    }\n}\n\nvoid LinkList::CreateList2(int n) {\n    //create a linked list by inserting the element in the end\n    Node *p, *s;\n    p = Head;\n    cout &lt;&lt; \"\u8bf7\u4f9d\u6b21\u8f93\u5165\" &lt;&lt; n &lt;&lt; \"\u4e2a\u6570\u636e\u5143\u7d20\u503c\" &lt;&lt; endl;\n    for (int i = 1; i &lt; n; i++) {\n        s = new Node;          \n        cin &gt;&gt; s-&gt;data;\n        p-&gt;next=s;              \n        p=s;                   // what does it mean? I don't get it.\n    }\n}\n</code></pre>\n\n<h2>Note</h2>\n\n<p>The code snippet that I do not understand is commented. Anyone can explain the code with instructive words or figures? Thanks in advance.</p>\n"}, {"tags": ["python", "c++", "python-import", "importerror", "python-embedding"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7501420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a1eb33a41b5ae4143d259808eae568e?s=128&d=identicon&r=PG&f=1", "display_name": "James Chapman", "link": "https://stackoverflow.com/users/7501420/james-chapman"}, "is_accepted": true, "score": 0, "last_activity_date": 1509646825, "creation_date": 1509646825, "answer_id": 47082144, "question_id": 46934487, "link": "https://stackoverflow.com/questions/46934487/embedding-python-in-c-importing-modules-in-python-script-works-during-one-fun/47082144#47082144", "title": "Embedding Python in C++: Importing modules in python script works during one function call but not another", "body": "<p>During the model validation function, the python tuple: </p>\n\n<pre><code>pArgs = PyTuple_New(size);\n</code></pre>\n\n<p>had an incorrect size passed to it compared to what was being appended to it. The crash ended up being a simple \"writing past the end of the array without resizing it\".</p>\n"}], "owner": {"reputation": 21, "user_id": 7501420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a1eb33a41b5ae4143d259808eae568e?s=128&d=identicon&r=PG&f=1", "display_name": "James Chapman", "link": "https://stackoverflow.com/users/7501420/james-chapman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 0, "accepted_answer_id": 47082144, "answer_count": 1, "score": 2, "last_activity_date": 1509646825, "creation_date": 1508940057, "question_id": 46934487, "link": "https://stackoverflow.com/questions/46934487/embedding-python-in-c-importing-modules-in-python-script-works-during-one-fun", "title": "Embedding Python in C++: Importing modules in python script works during one function call but not another", "body": "<p>I am writing a program that uses C++ as the data management backend and can call user-created python scripts to do various tasks. I am running into a problem though related to importing modules in the python script. I am passing values from C++ to python and performing Gaussian Process Regression from sklearn on those values, and simply returning the optimized model values or the GPR uncertainties back to C++. I have these two situations (model optimization and model validation) as two separate functions in the python script, as they will be called from different places from C++. </p>\n\n<p>When I run the first function (model optimization), everything works great, and I get optimized hyper-parameters to return to C++ without incident. During the second function call though, the script fails, as it cannot import the GPR modules from sklearn (the same modules that the previous function successfully imported). I am not too familiar with embedding python into C++, so it's very possible that I'm simply missing something, or do not fully understand the rules. It isn't possible to provide a code from the C++ end that can be run by itself, so I will do my best to provide as much of the embedding code as I can. The python scripts below are shown in full. If you need more information please let me know, I'm happy to provide it. Thank you for any help you can give.</p>\n\n<p><strong>C++: Main</strong></p>\n\n<pre><code>//other stuff\n\nPy_Initialize();\n\n//do more other stuff (embedding happens here)\n\nPy_Finalize();\n\n//do even more other stuff\n</code></pre>\n\n<p><strong>C++: Model Optimization</strong></p>\n\n<pre><code>PyRun_SimpleString(\"import sys\");\nPyRun_SimpleString(\"sys.path.append(\\\".\\\")\");\n\npName = PyString_FromString(file.c_str());\n\npModule = PyImport_Import(pName);\nPy_DECREF(pName);\n\nif (pModule != NULL) {\n    pFunc = PyObject_GetAttrString(pModule, function.c_str());\n\n    pArgs = PyTuple_New(size);\n\n    PyTuple_SetItem(pArgs, 0, PyLong_FromLong(gp-&gt;getInnerFPSize()));\n    PyTuple_SetItem(pArgs, 1, PyLong_FromLong(ntrain));\n\n    k = 2;\n\n    for(i = 0; i &lt; trainingFP[modelNumber].size(); i++){\n        for(j = 0; j &lt; trainingFP[modelNumber][i].size(); j++){\n            PyTuple_SetItem(pArgs, k, \n            PyFloat_FromDouble(trainingFP[modelNumber][i][j]));\n            k++;\n        }           \n    }\n    for(i = 0; i &lt; trainingForces[modelNumber].size(); i++){\n        PyTuple_SetItem(pArgs, k, \n        PyFloat_FromDouble(trainingForces[modelNumber][i]));\n        k++;\n    }\n    Py_INCREF(pValue);\n    pValue = PyObject_CallObject(pFunc, pArgs);\n    Py_DECREF(pArgs);\n\n }else {\n    PyErr_Print();\n    fprintf(stderr, \"Failed to load \\\"%s\\\"\\n\", function.c_str());\n    return 1;\n}\n\nPy_XDECREF(pFunc);\nPy_DECREF(pModule);\n\noptimalSigma = PyFloat_AsDouble(PyList_GetItem(pValue, 1));\noptimalSigmaN = PyFloat_AsDouble(PyList_GetItem(pValue, 0));\noptimalSigmaF = PyFloat_AsDouble(PyList_GetItem(pValue, 2));\n\nPy_DECREF(pValue);\n</code></pre>\n\n<p><strong>C++: Model Validation</strong></p>\n\n<pre><code>PyRun_SimpleString(\"import sys\");\nPyRun_SimpleString(\"sys.path.append(\\\".\\\")\");\n\npName = PyString_FromString(file.c_str());\n\npModule = PyImport_Import(pName);\nPy_DECREF(pName);\n\nif (pModule != NULL) {\n    pFunc = PyObject_GetAttrString(pModule, function.c_str());\n\n    pArgs = PyTuple_New(size);\n\n    PyTuple_SetItem(pArgs, 0, PyFloat_FromDouble(testFP[0].size()));\n    PyTuple_SetItem(pArgs, 1, PyFloat_FromDouble(testFP.size()));\n    PyTuple_SetItem(pArgs, 2, PyFloat_FromDouble(trainingFP.size()));\n    PyTuple_SetItem(pArgs, 3, PyFloat_FromDouble(sigma));\n    PyTuple_SetItem(pArgs, 4, PyFloat_FromDouble(sigmaN));\n    PyTuple_SetItem(pArgs, 5, PyFloat_FromDouble(sigmaF));\n\n    k = 6;\n\n    for(i = 0; i &lt; testFP.size(); i++){\n        for(j = 0; j &lt; testFP[i].size(); j++){\n            PyTuple_SetItem(pArgs, k, PyFloat_FromDouble(testFP[i][j]));\n            k++;\n        }           \n    }\n    for(i = 0; i &lt; trainingFP.size(); i++){\n        for(j = 0; j &lt; trainingFP[i].size(); j++){\n            PyTuple_SetItem(pArgs, k, PyFloat_FromDouble(trainingFP[i][j]));\n            k++;\n        }           \n    }\n    for(i = 0; i &lt; trainingFP.size(); i++){\n        PyTuple_SetItem(pArgs, k, PyFloat_FromDouble(trainingForces[i]));\n        k++;\n    }\n    Py_INCREF(pValue);\n    pValue = PyObject_CallObject(pFunc, pArgs);\n    Py_DECREF(pArgs);\n\n }else {\n    PyErr_Print();\n    fprintf(stderr, \"Failed to load \\\"%s\\\"\\n\", function.c_str());\n}\n\nPy_XDECREF(pFunc);\nPy_DECREF(pModule);\n\nfor(i = 0; i &lt; testFP.size(); i++)\n    prediction[i] = PyFloat_AsDouble(PyList_GetItem(pValue, i));\n\nPy_DECREF(pValue);\n</code></pre>\n\n<p><strong>Python</strong></p>\n\n<pre><code>def GPR(*X):\n\nfrom sklearn.gaussian_process import GaussianProcessRegressor\nfrom sklearn.gaussian_process.kernels import RBF, WhiteKernel\nimport re\n\n#initialize local variables\ncounter = 0\nsigma_l_initial = 1\nsigma_n_initial = 1\nsigma_f_initial = 2\ninnerFPSize = int(X[0])\nntrain = int(X[1])\n\noptimized_hyperparameters = []\nforces = []\nfp = [] \nsigma_l_bounds = [.01,100]\nsigma_n_bounds = [.001,.1]\n\nfp.append([])\n#pass values from c++ conversion tuple to local lists\nfor x in X:\n    if counter &gt; 1 and counter &lt; 2 + innerFPSize * ntrain:\n        fp[len(fp) - 1].append(x)\n    elif counter &gt;= 2 + innerFPSize * ntrain:\n        forces.append(x)\n\n    counter += 1\n\n    if len(fp[len(fp) -1]) == innerFPSize:\n        if len(fp) &lt; ntrain:\n            fp.append([])\n\n#GPR routine\nkrbf = sigma_f_initial*RBF(length_scale=sigma_l_initial,length_scale_bounds=(sigma_l_bounds[0],sigma_l_bounds[1]))\nnoise_kernel = WhiteKernel(noise_level=sigma_n_initial,noise_level_bounds=(sigma_n_bounds[0],sigma_n_bounds[1]))\n\ngp = GaussianProcessRegressor(kernel=krbf + noise_kernel,normalize_y=True,n_restarts_optimizer=25)\ngp.fit(fp, forces)\n\n#get optimized hyperparameters\nrr = re.findall(\"[-+]?[.]?[\\d]+(?:,\\d\\d\\d)*[\\.]?\\d*(?:[eE][-+]?\\d+)?\", str(gp.kernel_))\noptimized_hyperparameters.append(float(rr[-1]))\noptimized_hyperparameters.append(float(rr[-2]))\noptimized_hyperparameters.append(float(rr[0]))\n\nreturn optimized_hyperparameters\n\n\n\n\n\ndef GPR_unc(*X):\n\ntry:\n    from sklearn.gaussian_process import GaussianProcessRegressor\n    from sklearn.gaussian_process.kernels import RBF, WhiteKernel\nexcept:\n    print 'THIS REFUSES TO WORK'\n\n#initialize variables\nuncertainty = []\ntestFP = []\ntrainingFP = []\ntrainingForces = []\n\ninnerFPSize = int(X[0])\ntestSize = int(X[1])\nntrain = int(X[2])\nsigma = float(X[3])\nsigma_n = float(X[4])\nsigma_f = float(X[5])\n\ncounter = 0\n\nsetTrainFP = setTrainForces = False\nsetTestFP = True\n\ntestFP.append([])\ntrainingFP.append([])\n\n#parse data from C++ arrays\nfor x in X:\n\n    try:\n        if counter &gt; 5 and setTestFP == True:\n            testFP[len(testFP) - 1].append(x)\n        elif setTrainFP == True:\n            trainingFP[len(trainingFP) - 1].append(x)\n        elif setTrainForces == True:\n            trainingForces.append(x)\n\n        if counter &gt; 5 and setTestFP == True:\n            if len(testFP[len(testFP) -1]) == innerFPSize:\n                if len(testFP) + 1 &lt;= testSize:\n                    testFP.append([])\n                else:\n                    setTestFP = False\n                    setTrainFP = True                                   \n        elif setTrainFP == True:\n            if len(trainingFP[len(trainingFP) -1]) == innerFPSize:\n                if(len(trainingFP)) + 1 &lt;= ntrain:\n                    trainingFP.append([])\n                else:\n                    setTrainFP = False\n                    setTrainForces = True\n        counter += 1\n    except:\n        print 'ERROR'\n\n#perform static \"optimization\" of gpr kernel to get gpr object\nkrbf = sigma_f**2*RBF(length_scale=sigma,length_scale_bounds=(sigma,sigma))\nnoise_kernel = WhiteKernel(noise_level=sigma_n,noise_level_bounds=(sigma_n,sigma_n))\ngp = GaussianProcessRegressor(kernel=krbf + noise_kernel,normalize_y=True, optimizer=None)\ngp.fit(trainingFP, trainingForces)\n\n#get uncertanties on test set\nval,std=gp.predict(testFP,return_std=True)\n\n#ensure that the uncertainty is loaded into a float list in order to be sent back to c++\nfor x in std:\n    uncertainty.append(float(x))\nfor x in std:\n    uncertainty.append(float(x) * float(x))\n\nreturn uncertainty\n</code></pre>\n\n<p>The python script fails when attempting to import the modules from the GPR_unc function (second function from the python code).</p>\n"}, {"tags": ["c++", "vector", "leveldb", "rocksdb"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1508939952, "post_id": 46934400, "comment_id": 80815878, "body": "The only answer is: benchmark."}, {"owner": {"reputation": 1, "user_id": 10024395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9483e59154ae2804d6144c89a2d79c2a?s=128&d=identicon&r=PG&f=1", "display_name": "user10024395", "link": "https://stackoverflow.com/users/10024395/user10024395"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1508940015, "post_id": 46934400, "comment_id": 80815949, "body": "@VittorioRomeo I am just asking if rocks and level are always slower or will there be cases when they are faster? If they are always slower, there is no point benchmarking."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1508940163, "post_id": 46934400, "comment_id": 80816095, "body": "Slower that <i>what</i>? In-memory direct access? Yes. Than managing your own files and index? Maybe. Than a general SQL database? Probably not. For something to be &quot;slower&quot; you need something to compare to. That&#39;s why you do the benchmarking."}, {"owner": {"reputation": 1, "user_id": 10024395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9483e59154ae2804d6144c89a2d79c2a?s=128&d=identicon&r=PG&f=1", "display_name": "user10024395", "link": "https://stackoverflow.com/users/10024395/user10024395"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1508940515, "post_id": 46934400, "comment_id": 80816425, "body": "@Someprogrammerdude I wrote vector (c++ stl vector)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1508941423, "post_id": 46934400, "comment_id": 80817135, "body": "So you have a vector of vectors? How do you find the correct sub-vector? Do you have an index of indexes into the vector? Then that&#39;s as fast as you&#39;re going to get. If you have the memory to store all data in memory, then just some simple serialization of the vector and index is all you need. Load at startup, save on shutdown (or on change)."}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 0, "last_activity_date": 1508941220, "last_edit_date": 1508941220, "creation_date": 1508940806, "answer_id": 46934769, "question_id": 46934400, "link": "https://stackoverflow.com/questions/46934400/is-querying-by-index-using-c-vector-faster-than-querying-by-keyindex-in-rock/46934769#46934769", "title": "Is querying by index using c++ vector faster than querying by key(index) in RocksDB or LevelDB?", "body": "<p>The short answer to the question about index structure is \"no.\" RocksDB and LevelDB use a tree structure for their indexes (a log-structured merge tree, to be precise), which translates to O(log N) queries. </p>\n\n<p>Given that you have a fixed number of fixed-size elements, you can pretty easily get O(1) \"querying\" on your own though.</p>\n\n<p>Just store your data in a binary file. You can seek to the appropriate point using <code>istream::seekg</code>, then read the 512 floats using <code>istream::read</code>. </p>\n\n<pre><code>struct record { \n    float data[512];\n};\n\nstd::istream &amp;read_record(istream &amp;is, size_t record_number, record &amp;r) {\n    auto read_start = record_number * sizeof(r);\n    is.seekg(read_start);\n    is.read(reinterpret_cast&lt;char *&gt;(r), sizeof(r));\n}\n</code></pre>\n\n<p>It may, however, be open to question whether this actually provides a performance improvement. In particular, given only a million elements, a binary tree would only have a depth of about 20. A multiway tree will be even shallower. For this small a size, chances are that the entire index will be in memory all the time, and searching a small tree in memory is <em>very</em> fast compared to even the most trivial disk I/O. Searching the index is unlikely to affect the read speed by a significant amount.</p>\n\n<p>At the same time, it's unlikely that using a DB will be any easier to write than code like above, and there's virtually no chance that it'll be any faster either (though it is <em>possible</em> that it could, for example, provide more effective caching than your OS, so that it would be faster under some circumstances).</p>\n"}], "owner": {"reputation": 1, "user_id": 10024395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9483e59154ae2804d6144c89a2d79c2a?s=128&d=identicon&r=PG&f=1", "display_name": "user10024395", "link": "https://stackoverflow.com/users/10024395/user10024395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508941220, "creation_date": 1508939834, "last_edit_date": 1508939963, "question_id": 46934400, "link": "https://stackoverflow.com/questions/46934400/is-querying-by-index-using-c-vector-faster-than-querying-by-keyindex-in-rock", "title": "Is querying by index using c++ vector faster than querying by key(index) in RocksDB or LevelDB?", "body": "<p>I am thinking of using RocksDB or LevelDB to store my data persistently for my face recognition software. Right now, I am using a c++ vector and it is not persistent, which means everytime I restart my software I have to reload data into my vector. My data is has about 1 million elements, each being a vector of 512 floats. Query speed is of upmost concern and ideally I need o(1) query speed when I query with an index. From my research, I can't really find such guarantee for RocksDB and LevelDB. </p>\n\n<p>My question is is it worth investing my effort into using RocksDB or LevelDB or are they slower than vector?</p>\n"}, {"tags": ["c++", "boost", "command-line", "boost-program-options"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1508940660, "post_id": 46934343, "comment_id": 80816538, "body": "Maybe turn off <a href=\"http://www.boost.org/doc/libs/1_63_0/doc/html/boost/program_options/command_line_style/style_t.html#boost.program_options.command_line_style.style_t.short_allow_adjacent\" rel=\"nofollow noreferrer\"><code>short_allow_adjacent</code></a> ?"}, {"owner": {"reputation": 707, "user_id": 2350402, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/13813d5db4edd88f79032868df97c17b?s=128&d=identicon&r=PG", "display_name": "Saar peer", "link": "https://stackoverflow.com/users/2350402/saar-peer"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1509001333, "post_id": 46934343, "comment_id": 80842624, "body": "Tried it, didn&#39;t work :-)"}], "owner": {"reputation": 707, "user_id": 2350402, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/13813d5db4edd88f79032868df97c17b?s=128&d=identicon&r=PG", "display_name": "Saar peer", "link": "https://stackoverflow.com/users/2350402/saar-peer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508939708, "creation_date": 1508939708, "question_id": 46934343, "link": "https://stackoverflow.com/questions/46934343/boost-program-options-short-name-issue", "title": "Boost Program Options short name issue", "body": "<p>I am using boost/program_options for my CLI application.</p>\n\n<p>I am reading a variable named <em>name</em> from the user.</p>\n\n<p>The variable CLI option called --name or -n for short name.</p>\n\n<p>When i execute  </p>\n\n<pre><code>... --name val ...\n</code></pre>\n\n<p>the variable is set to val (as expected).</p>\n\n<p>But when i execute (accidentally)  </p>\n\n<pre><code>... -name val ...\n</code></pre>\n\n<p>the variable is set to ame.</p>\n\n<p>How can i configure boost to block this scenario ?</p>\n"}, {"tags": ["c++", "multithreading", "concurrency", "thread-safety", "quantlib"], "answers": [{"comments": [{"owner": {"reputation": 42755, "user_id": 116639, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/30700279c97553494d9479ec7d667483?s=128&d=identicon&r=PG", "display_name": "Tom Anderson", "link": "https://stackoverflow.com/users/116639/tom-anderson"}, "edited": false, "score": 0, "creation_date": 1509366172, "post_id": 46991129, "comment_id": 80976560, "body": "When you say &quot;none of the option you have will help you&quot;, do you mean that they don&#39;t do what i think they do, or they don&#39;t work, or they aren&#39;t sufficient for some reason, or what?"}, {"owner": {"reputation": 7039, "user_id": 2251840, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O3LmV.png?s=128&g=1", "display_name": "SmallChess", "link": "https://stackoverflow.com/users/2251840/smallchess"}, "reply_to_user": {"reputation": 42755, "user_id": 116639, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/30700279c97553494d9479ec7d667483?s=128&d=identicon&r=PG", "display_name": "Tom Anderson", "link": "https://stackoverflow.com/users/116639/tom-anderson"}, "edited": false, "score": 0, "creation_date": 1509366228, "post_id": 46991129, "comment_id": 80976595, "body": "@TomAnderson They won&#39;t do what you want to do. Please search QuantLib mailing list, there were some posts about thread safe. Depend on what you want to do, some code functions are thread safe because they don&#39;t use global variables."}, {"owner": {"reputation": 7039, "user_id": 2251840, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O3LmV.png?s=128&g=1", "display_name": "SmallChess", "link": "https://stackoverflow.com/users/2251840/smallchess"}, "reply_to_user": {"reputation": 42755, "user_id": 116639, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/30700279c97553494d9479ec7d667483?s=128&d=identicon&r=PG", "display_name": "Tom Anderson", "link": "https://stackoverflow.com/users/116639/tom-anderson"}, "edited": false, "score": 0, "creation_date": 1509366326, "post_id": 46991129, "comment_id": 80976664, "body": "@TomAnderson For example, if you just want to compute Black Scholes. It&#39;s definitely thread safe because the BlackScholesCalculator has no global dependency."}, {"owner": {"reputation": 7039, "user_id": 2251840, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O3LmV.png?s=128&g=1", "display_name": "SmallChess", "link": "https://stackoverflow.com/users/2251840/smallchess"}, "reply_to_user": {"reputation": 42755, "user_id": 116639, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/30700279c97553494d9479ec7d667483?s=128&d=identicon&r=PG", "display_name": "Tom Anderson", "link": "https://stackoverflow.com/users/116639/tom-anderson"}, "edited": false, "score": 0, "creation_date": 1509366371, "post_id": 46991129, "comment_id": 80976693, "body": "@TomAnderson Overall, the project provides no thread-safe guarantee but functions that don&#39;t have global dependency might be thread-safe."}, {"owner": {"reputation": 7039, "user_id": 2251840, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O3LmV.png?s=128&g=1", "display_name": "SmallChess", "link": "https://stackoverflow.com/users/2251840/smallchess"}, "reply_to_user": {"reputation": 42755, "user_id": 116639, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/30700279c97553494d9479ec7d667483?s=128&d=identicon&r=PG", "display_name": "Tom Anderson", "link": "https://stackoverflow.com/users/116639/tom-anderson"}, "edited": false, "score": 0, "creation_date": 1509366408, "post_id": 46991129, "comment_id": 80976723, "body": "@TomAnderson For example, functions that required global evaluation date variable can&#39;t be thread safe."}, {"owner": {"reputation": 7039, "user_id": 2251840, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O3LmV.png?s=128&g=1", "display_name": "SmallChess", "link": "https://stackoverflow.com/users/2251840/smallchess"}, "reply_to_user": {"reputation": 42755, "user_id": 116639, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/30700279c97553494d9479ec7d667483?s=128&d=identicon&r=PG", "display_name": "Tom Anderson", "link": "https://stackoverflow.com/users/116639/tom-anderson"}, "edited": false, "score": 0, "creation_date": 1509366448, "post_id": 46991129, "comment_id": 80976749, "body": "@TomAnderson You might want to figure out what functions you want to use, and take a look at the source code."}, {"owner": {"reputation": 42755, "user_id": 116639, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/30700279c97553494d9479ec7d667483?s=128&d=identicon&r=PG", "display_name": "Tom Anderson", "link": "https://stackoverflow.com/users/116639/tom-anderson"}, "edited": false, "score": 0, "creation_date": 1509961433, "post_id": 46991129, "comment_id": 81217469, "body": "I&#39;m sorry i doubted you!"}], "tags": [], "owner": {"reputation": 7039, "user_id": 2251840, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O3LmV.png?s=128&g=1", "display_name": "SmallChess", "link": "https://stackoverflow.com/users/2251840/smallchess"}, "is_accepted": false, "score": 3, "last_activity_date": 1509203037, "creation_date": 1509203037, "answer_id": 46991129, "question_id": 46934259, "link": "https://stackoverflow.com/questions/46934259/what-is-the-right-way-to-use-quantlib-from-multiple-threads/46991129#46991129", "title": "What is the right way to use QuantLib from multiple threads?", "body": "<p>Unfortunately, QuantLib is <strong>not</strong> thread safe. None of the  option you have will help you. QuantLib is a free project, it's focus is on the actual mathematical modelling and not computational optimisations such as thread safe.</p>\n\n<p>You should definitely wrap QuantLib in a <strong>process</strong>. Multithreading is <strong>not</strong> encourage for QuantLib unless you absolutely know what you're doing and have checked the relevant source code.</p>\n"}, {"tags": [], "owner": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "is_accepted": true, "score": 4, "last_activity_date": 1509719339, "creation_date": 1509719339, "answer_id": 47098133, "question_id": 46934259, "link": "https://stackoverflow.com/questions/46934259/what-is-the-right-way-to-use-quantlib-from-multiple-threads/47098133#47098133", "title": "What is the right way to use QuantLib from multiple threads?", "body": "<p>The answer from SmallChess is not far from the truth. There are almost no locks or safety nets in QuantLib, so most people use multiprocessing if they need to distribute calculations over processors---and with good reason.</p>\n\n<p>For those who want a bit more insight, and <strong>not</strong> as an endorsement of using multi-threading in QuantLib:</p>\n\n<ul>\n<li><p>whatever else you do, if possible, enable the configuration switches that give you some safety, such as the one for thread-safe initialization of singletons (with a caveat, see below);</p></li>\n<li><p>you might have multiple threads running at once if they don't share any objects, <strong>and</strong> if they don't try to modify globals such as the evaluation date (look for classes inheriting from Singleton for the list of globals).</p></li>\n<li><p>if you need different evaluation dates for different threads, you can use another compilation switch to build QuantLib so that the singletons are not actually singletons, but there's an instance per thread. Caveat: this switch is not compatible with thread-safe initialization of singletons. You still shouldn't share objects between threads.</p></li>\n<li><p>if you want to share objects, you might be in for more trouble than it's worth.  The problems are: (1) any change to the underlying data of, say, a curve will trigger a recalculation; and (2) the recalculations (such as the bootstrap of a curve) are not executed right away, but only when needed, i.e., when some curve method is called.  This means that you must keep the various steps separate: first, set the values of any quotes and make sure that there aren't any further changes; then, go around the curves and trigger recalculation, for instance by asking a discount factor at some date; finally, pass the curves to the instruments and price them.  Changing a value during the calculations will result in a bootstrap being done in the middle of them; and not triggering full construction before calculations might lead to two instruments triggering two simultaneous bootstraps, which wouldn't end well for any concerned parties.</p></li>\n</ul>\n\n<p>As I said, it's probably more trouble than it's worth.  Ideally, don't share objects between threads and don't touch the globals.  Otherwise, prefer multiprocessing.</p>\n"}], "owner": {"reputation": 42755, "user_id": 116639, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/30700279c97553494d9479ec7d667483?s=128&d=identicon&r=PG", "display_name": "Tom Anderson", "link": "https://stackoverflow.com/users/116639/tom-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1207, "favorite_count": 1, "accepted_answer_id": 47098133, "answer_count": 2, "score": 5, "last_activity_date": 1587049918, "creation_date": 1508939455, "last_edit_date": 1512570473, "question_id": 46934259, "link": "https://stackoverflow.com/questions/46934259/what-is-the-right-way-to-use-quantlib-from-multiple-threads", "title": "What is the right way to use QuantLib from multiple threads?", "body": "<p>I haven't been able to find any documentation explicitly describing QuantLib's thread-safety properties (or the absence of them!). The QuantLib <a href=\"http://quantlib.org/reference/config.html\" rel=\"nofollow noreferrer\">configuration documentation</a> lists a number of compile-time options related to thread safety, from which i infer that, by default, QuantLib is not entirely threadsafe.</p>\n\n<p>In particular, there are:</p>\n\n<ul>\n<li><p>QL_ENABLE_SESSIONS - \"If defined, singletons will return different instances for different sessions. You will have to provide and link with the library a sessionId() function in namespace QuantLib, returning a different session id for each session. Undefined by default.\"</p></li>\n<li><p>QL_ENABLE_THREAD_SAFE_OBSERVER_PATTERN - \"If defined, a thread-safe (but less performant) version of the observer pattern will be used. You should define it if you want to use QuantLib via the SWIG layer within the JVM or .NET eco system or any environment with an async garbage collector. Undefined by default.\"</p></li>\n<li><p>QL_ENABLE_SINGLETON_THREAD_SAFE_INIT - \"Define this to make Singleton initialization thread-safe. Undefined by default. Not compatible with multiple sessions.\"</p></li>\n</ul>\n\n<p>Which options should i use, and what other steps should i take, if i want to use QuantLib:</p>\n\n<ol>\n<li><p>From multiple threads, but never at the same time (eg only when holding a global lock)?</p></li>\n<li><p>From multiple threads at the same time, but not sharing any objects between them?</p></li>\n<li><p>From multiple threads at the same time, sharing objects between them?</p></li>\n</ol>\n\n<p>The natural structure for my application is a directed acyclic graph, with a constant stream of market data entering at one end, being used to compute and update various objects, and producing a stream of estimated prices leaving at the other end. I would very much like to be able to have multiple cores working in parallel, as some calculations take a long time.</p>\n\n<p>The application will mostly be written in Java, with minimal parts in C++ to interface with QuantLib. I am not planning to use the SWIG wrapper. I am happy to do memory management of QuantLib objects without help from Java's garbage collector.</p>\n\n<hr>\n\n<p>EDIT! If you decide to set any of these options, then on unix, do it with the corresponding flag to ./configure:</p>\n\n<pre><code>--enable-sessions\n--enable-thread-safe-observer-pattern\n--enable-thread-safe-singleton-init\n</code></pre>\n"}, {"tags": ["c++", "c++11", "recursion", "ostream"], "comments": [{"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1508939495, "post_id": 46934231, "comment_id": 80815501, "body": "<code>return myOstream</code> Maybe you mean."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1508939542, "post_id": 46934231, "comment_id": 80815545, "body": "Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What&#39;s <code>child</code>? What&#39;s <code>out</code>? What&#39;s <code>objectData</code>? On which line the error is reported? How are you calling <code>print</code>?"}, {"owner": {"reputation": 418, "user_id": 5832798, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aphMx.jpg?s=128&g=1", "display_name": "farhan", "link": "https://stackoverflow.com/users/5832798/farhan"}, "edited": false, "score": 0, "creation_date": 1508939712, "post_id": 46934231, "comment_id": 80815682, "body": "You really need to learn how to ask questions, And its possibly a duplicate of this <a href=\"https://stackoverflow.com/questions/36292905/using-a-recursive-function-as-output-in-a-ostream-function\" title=\"using a recursive function as output in a ostream function\">stackoverflow.com/questions/36292905/&hellip;</a> ."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1508940077, "post_id": 46934231, "comment_id": 80816005, "body": "What type does <code>child-&gt;write(myOstream)</code> return? I\u2019m guessing that a function named <code>write</code> that takes a stream writes to that stream. If that\u2019s the case, the write has been done and there\u2019s nothing more needed; just call <code>child-&gt;write(myOstream)</code>. No <code>&lt;&lt;</code> needed."}], "answers": [{"comments": [{"owner": {"reputation": 413, "user_id": 1417057, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/0e5f6272a9ca8363b6994d1c07385a24?s=128&d=identicon&r=PG", "display_name": "Tom F", "link": "https://stackoverflow.com/users/1417057/tom-f"}, "edited": false, "score": 0, "creation_date": 1508940197, "post_id": 46934465, "comment_id": 80816137, "body": "Thanks! Don&#39;t know how I didn&#39;t try that earlier. Works perfect."}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1508939984, "creation_date": 1508939984, "answer_id": 46934465, "question_id": 46934231, "link": "https://stackoverflow.com/questions/46934231/recursive-ostream-function-c/46934465#46934465", "title": "Recursive ostream function c++", "body": "<p>You shouldn't output the result of printing the child:</p>\n\n<pre><code>if (child != nullptr){\n    child-&gt;write(myOstream);\n}\n</code></pre>\n"}], "owner": {"reputation": 413, "user_id": 1417057, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/0e5f6272a9ca8363b6994d1c07385a24?s=128&d=identicon&r=PG", "display_name": "Tom F", "link": "https://stackoverflow.com/users/1417057/tom-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 46934465, "answer_count": 1, "score": -3, "last_activity_date": 1508939984, "creation_date": 1508939389, "last_edit_date": 1508939747, "question_id": 46934231, "link": "https://stackoverflow.com/questions/46934231/recursive-ostream-function-c", "title": "Recursive ostream function c++", "body": "<p>I have a class which has children of the same type, and I want to get data from them all with a function that takes an ostream reference. So far I have this code, but I am getting an error: </p>\n\n<p>\"invalid operands to binary expression ('ostream' (aka 'basic_ostream') and 'ostream')\"</p>\n\n<pre><code>ostream&amp; print(ostream&amp; myOstream) {\n\n    if(child!=nullptr){\n        myOstream &lt;&lt; child-&gt;write(myOstream);\n    }\n\n    myOstream &lt;&lt; \" \" &lt;&lt; objectData &lt;&lt; \" \";\n\n    return myOstream;\n}\n</code></pre>\n\n<p>I gather there's a problem with the functions return value and printing that to the ostream? I've been trying to fix this for quite a while so would appreciate any help! Thanks.</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 5482, "user_id": 2286337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/A8dkr.jpg?s=128&g=1", "display_name": "zindarod", "link": "https://stackoverflow.com/users/2286337/zindarod"}, "edited": false, "score": 0, "creation_date": 1508940159, "post_id": 46934226, "comment_id": 80816092, "body": "The <code>cv::resize</code> method ignores the initial size and type of the destination image, instead the destination image is initialized based on <code>dsize</code> and fx and fy. <a href=\"https://docs.opencv.org/3.3.0/da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d\" rel=\"nofollow noreferrer\">docs.opencv.org/3.3.0/da/d54/&hellip;</a>"}, {"owner": {"reputation": 556, "user_id": 3429266, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/XLhjC.png?s=128&g=1", "display_name": "Cosmo", "link": "https://stackoverflow.com/users/3429266/cosmo"}, "reply_to_user": {"reputation": 5482, "user_id": 2286337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/A8dkr.jpg?s=128&g=1", "display_name": "zindarod", "link": "https://stackoverflow.com/users/2286337/zindarod"}, "edited": false, "score": 0, "creation_date": 1508940944, "post_id": 46934226, "comment_id": 80816776, "body": "@Zindarod thanks for the reply. But I don&#39;t think my problem is about the size and type. My problem is that <code>cv::resize</code> seems to reset the <code>dst</code> Mat&#39;s <code>data</code> property, with a new piece of memory space allocated inside opencv. Maybe I didn&#39;t describe my question clearly. So I have updated my question. Please help."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 2, "creation_date": 1508941067, "post_id": 46934226, "comment_id": 80816868, "body": "first resize the matrix, then copy its content to <code>mDataProc</code>"}, {"owner": {"reputation": 556, "user_id": 3429266, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/XLhjC.png?s=128&g=1", "display_name": "Cosmo", "link": "https://stackoverflow.com/users/3429266/cosmo"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1508941474, "post_id": 46934226, "comment_id": 80817173, "body": "@Miki That&#39;s a good idea. And I believe it&#39;s a common way we use opencv functions. But I need to execute these operations frequently. Frequently allocating and copying memory is too expensive for efficiency. That&#39;s why I must use external user data here."}], "answers": [{"comments": [{"owner": {"reputation": 556, "user_id": 3429266, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/XLhjC.png?s=128&g=1", "display_name": "Cosmo", "link": "https://stackoverflow.com/users/3429266/cosmo"}, "edited": false, "score": 0, "creation_date": 1508941909, "post_id": 46935092, "comment_id": 80817468, "body": "Oh god. Silly mistake! I forgot that <code>rows</code> is ahead of <code>cols</code> in the parameter list! Thank you! :-)"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 556, "user_id": 3429266, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/XLhjC.png?s=128&g=1", "display_name": "Cosmo", "link": "https://stackoverflow.com/users/3429266/cosmo"}, "edited": false, "score": 0, "creation_date": 1508941945, "post_id": 46935092, "comment_id": 80817507, "body": "Glad it helped ;)"}], "tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": true, "score": 1, "last_activity_date": 1508942006, "last_edit_date": 1508942006, "creation_date": 1508941750, "answer_id": 46935092, "question_id": 46934226, "link": "https://stackoverflow.com/questions/46934226/opencv2-resize-image-not-working-on-mat-with-user-data/46935092#46935092", "title": "opencv2 resize image not working on Mat with user data", "body": "<p>If the dimension of the resized matrix is different from the destination matrix, then the destination matrix will be re-allocated. So to avoid re-allocations you need to be sure that the dimensions agree.</p>\n\n<p>In your code you're setting the destination size as:</p>\n\n<pre><code>cv::Mat matResize(rcutw, rcuth, cvfmt, mDataProc);\n</code></pre>\n\n<p>but you're asking for a resized image of size:</p>\n\n<pre><code>cv::Size(rcutw, rcuth)\n</code></pre>\n\n<p>You <strong>inverted</strong> rows (height) and columns (width).</p>\n\n<p>So simply create the matrix with the correct size with:</p>\n\n<pre><code> cv::Mat matResize(rcuth, rcutw, cvfmt, mDataProc);\n                   ^^^^^^^^^^^^^ \n</code></pre>\n"}], "owner": {"reputation": 556, "user_id": 3429266, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/XLhjC.png?s=128&g=1", "display_name": "Cosmo", "link": "https://stackoverflow.com/users/3429266/cosmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 46935092, "answer_count": 1, "score": 0, "last_activity_date": 1547743043, "creation_date": 1508939370, "last_edit_date": 1508941299, "question_id": 46934226, "link": "https://stackoverflow.com/questions/46934226/opencv2-resize-image-not-working-on-mat-with-user-data", "title": "opencv2 resize image not working on Mat with user data", "body": "<p>I'm using opencv2. I created 2 <code>cv::Mat</code> with external user data (<code>matLoad</code> and <code>matResize</code>. And resize <code>matLoad</code> to <code>matResize</code>. However, after the <code>cv::resize</code> function is called, the user data is still empty (all <code>0xCD</code>). But <code>matResize.data</code> is changed and no longer equal to the pointer to the user data. It seems that <code>cv::resize</code> resets the destination Mat's <code>data</code> property, with a new piece of memory space allocated inside opencv. See below:</p>\n\n<pre><code>cv::Mat matLoad(cutw, cuth, cvfmt, mDataLoad);\n... // Read image data into `mDataLoad`\ncv::Mat matResize(rcutw, rcuth, cvfmt, mDataProc);\nprintf(\"%s\\n\", (matResize.data == mDataProc) ? \"equal\" : \"notequal\"); // \"equal\" is called\ncv::resize(matLoad, matResize, cv::Size(rcutw, rcuth));\nprintf(\"%s\\n\", (matResize.data == mDataProc) ? \"equal\" : \"notequal\"); // \"notequal\" is printed\nfor (int i = 0; i &lt; matResize.elemSize() * matResize.cols * matResize.rows; i++) {\n  if (matResize.data[i] != 205) {\n    printf(\"hehe %d\\n\", matResize.data[i]); // many lines printed, with different values\n  }\n}\nfor (int i = 0; i &lt; matResize.elemSize() * matResize.cols * matResize.rows; i++) {\n  if (mDataProc[i] != 205) {\n    printf(\"hehe %d\\n\", mDataProc[i]); // none is printed\n  }\n}\n</code></pre>\n\n<p>But if I create <code>matResize</code> without passing the user data (i.e., let opencv allocate and maintain the memory space by itself), the resize works well.</p>\n\n<pre><code>cv::Mat matLoad(cutw, cuth, cvfmt, mDataLoad);\n... // Read image data into `mDataLoad`\ncv::Mat matResize(rcutw, rcuth, cvfmt);\ncv::resize(matLoad, matResize, cv::Size(rcutw, rcuth));\nfor (int i = 0; i &lt; matResize.elemSize() * matResize.cols * matResize.rows; i++) {\n  if (matResize.data[i] != 205) {\n    printf(\"hehe %d\\n\", matResize.data[i]); // many lines printed, with different values\n  }\n}\n</code></pre>\n\n<p>What's wrong with the <code>cv::Mat</code> created with external user data?</p>\n"}]