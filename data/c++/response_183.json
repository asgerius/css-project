[{"tags": ["c++", "typetraits", "friend-function", "template-function"], "answers": [{"comments": [{"owner": {"reputation": 3337, "user_id": 334932, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6cf7e53523d0437cf46976b25eddfd90?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/334932/jeff"}, "edited": false, "score": 0, "creation_date": 1531357872, "post_id": 51295942, "comment_id": 89569536, "body": "So is the friend access check is being done in the calling (attempted) friended template function body at some phase before actual instantiation? Using <code>template &lt;class T&gt; friend auto foo();</code> plus <code>template &lt;class T&gt; auto foo() { return X{}.bar(); }</code> works for you code, but the analogous transformation to mine above does not seem to."}], "tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": false, "score": 1, "last_activity_date": 1531356804, "creation_date": 1531356804, "answer_id": 51295942, "question_id": 51295481, "link": "https://stackoverflow.com/questions/51295481/c-template-class-template-member-friend-function-matching-rules/51295942#51295942", "title": "C++ template class, template member friend function matching rules", "body": "<p>The problem can be reduced to:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct identity {\n    using type=T;\n};\n\nclass X {\n    int bar();\npublic:\n    template&lt;class T&gt;\n    friend T foo();\n};\n\ntemplate&lt;class T&gt;\ntypename identity&lt;T&gt;::type foo() { return X{}.bar(); }\n\nint main() {\n    foo&lt;int&gt;(); // error: bar is a private member of X\n}\n</code></pre>\n\n<p>Even though <em>we</em> know <code>identity&lt;T&gt;::type</code> is always <code>T</code>, the compiler doesn't know that and would be wrong to assume so. There could be a specialization of <code>identity&lt;T&gt;</code> somewhere later in the code that resolves to some type other than <code>T</code>.</p>\n\n<p>Therefore when the compiler sees the second declaration of <code>foo</code> it won't assume that it is the same friend <code>foo</code> declared before.</p>\n"}, {"comments": [{"owner": {"reputation": 3337, "user_id": 334932, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6cf7e53523d0437cf46976b25eddfd90?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/334932/jeff"}, "edited": false, "score": 0, "creation_date": 1531358785, "post_id": 51295958, "comment_id": 89569682, "body": "I unfortunately need to leave the function <code>Sig</code> parameter generic and to have <code>template &lt;typename T&gt; auto foo(T const &amp;) -&gt; ...</code> be available for any signature, not just specializations on an as-needed basis. I appreciate your point above about the SFINAE nuace though."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 3337, "user_id": 334932, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6cf7e53523d0437cf46976b25eddfd90?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/334932/jeff"}, "edited": false, "score": 1, "creation_date": 1531383732, "post_id": 51295958, "comment_id": 89578073, "body": "You can shorten your current code with alias: <code>template &lt;typename T&gt; using FooReturnType = Base&lt;typename  remove_membership&lt;decltype(&amp;std::remove_reference_t&lt;T&gt;::oper&zwnj;&#8203;ator())&gt;::type&gt; *;</code> and then <code>template &lt;typename T&gt; auto foo(T const &amp;) -&gt; FooReturnType&lt;T&gt;</code>."}, {"owner": {"reputation": 3337, "user_id": 334932, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6cf7e53523d0437cf46976b25eddfd90?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/334932/jeff"}, "edited": false, "score": 0, "creation_date": 1531393245, "post_id": 51295958, "comment_id": 89584409, "body": "I had wanted to avoid leaving another helper template at namespace scope, but this had been my fallback plan."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1531358062, "last_edit_date": 1531358062, "creation_date": 1531356950, "answer_id": 51295958, "question_id": 51295481, "link": "https://stackoverflow.com/questions/51295481/c-template-class-template-member-friend-function-matching-rules/51295958#51295958", "title": "C++ template class, template member friend function matching rules", "body": "<pre><code>template &lt;typename T2&gt;\nvoid foo(T2 const &amp;)\n\ntemplate &lt;typename T2&gt;\nauto foo(T2 const &amp;)\n-&gt; std::enable_if_t&lt;some_traits&lt;T2&gt;::value&gt;;\n</code></pre>\n\n<p>Are 2 different overloads. Even if both return <code>void</code> (when valid).<br>\n2nd overload uses SFINAE.</p>\n\n<p>(and yes, template functions can differ only by return type contrary to regular functions).</p>\n\n<p>Your version is not identical but similar (<code>&amp;std::remove_reference_t&lt;T&gt;::operator()</code> should be valid)</p>\n\n<p>You can use the simpler template friend function:</p>\n\n<pre><code>template &lt;typename T, typename R, typename ... Args&gt;\nclass Derived&lt;R(Args...), T&gt; : public Base&lt;R(Args...)&gt; {\n  static void bar() { }\n\n  template &lt;typename T2&gt;\n  friend auto foo(T2 const &amp;) -&gt; Base&lt;R(Args...)&gt;*;\n};\n\ntemplate &lt;typename T&gt;\nauto foo(T const &amp;) -&gt; Base&lt;void()&gt;* // friend with Derived&lt;void(), U&gt;\n{\n  using base_param_t = typename remove_membership&lt;\n    decltype(&amp;std::remove_reference_t&lt;T&gt;::operator())&gt;::type;\n  Derived&lt;base_param_t, T&gt;::bar();\n  return nullptr;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/fd4c9e6921d5b7fb\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>but you have then to implement different version of the template <code>foo</code>.</p>\n"}], "owner": {"reputation": 3337, "user_id": 334932, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6cf7e53523d0437cf46976b25eddfd90?s=128&d=identicon&r=PG", "display_name": "Jeff", "link": "https://stackoverflow.com/users/334932/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 1, "accepted_answer_id": 51295958, "answer_count": 2, "score": 1, "last_activity_date": 1531358062, "creation_date": 1531352043, "last_edit_date": 1531356788, "question_id": 51295481, "link": "https://stackoverflow.com/questions/51295481/c-template-class-template-member-friend-function-matching-rules", "title": "C++ template class, template member friend function matching rules", "body": "<p>I have a templated class with a templated friend function declaration that is not having its signature matched when stated in a more direct, but seemingly equivalent, expression:</p>\n\n<p><a href=\"https://godbolt.org/g/8PJ9sX\" rel=\"nofollow noreferrer\">link to example on online compiler</a></p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename Sig&gt; class Base;\ntemplate &lt;typename R, typename ... Args&gt; class Base&lt;R(Args...)&gt; { };\ntemplate &lt;typename Sig, typename T&gt; class Derived;\ntemplate &lt;typename Sig&gt; struct remove_membership;\n\ntemplate &lt;typename T, typename R, typename ... Args&gt;\nclass Derived&lt;R(Args...), T&gt; : public Base&lt;R(Args...)&gt; {\n  static void bar() { }\n\n  // XXX: why are these two not equivalent, and only the 1st version successful?\n  template &lt;typename T2&gt;\n  friend auto foo(T2 const &amp;) -&gt; Base&lt;typename\n    remove_membership&lt;decltype(&amp;std::remove_reference_t&lt;T2&gt;::operator())&gt;::type&gt; *;\n  template &lt;typename T2&gt;\n  friend auto foo(T2 const &amp;) -&gt; Base&lt;R(Args...)&gt; *;\n};\n\ntemplate &lt;typename F, typename R, typename ... Args&gt;\nstruct remove_membership&lt;R (F::*)(Args...) const&gt; {\n  using type = R(Args...);\n};\n\ntemplate &lt;typename T&gt;\nauto foo(T const &amp;) -&gt; Base&lt;typename \nremove_membership&lt;decltype(&amp;std::remove_reference_t&lt;T&gt;::operator())&gt;::type&gt; * \n{\n  using base_param_t = typename remove_membership&lt;\n    decltype(&amp;std::remove_reference_t&lt;T&gt;::operator())&gt;::type;\n  Derived&lt;base_param_t, T&gt;::bar();\n  return nullptr;\n}\n\nint main(int, char **) { foo([](){}); } // XXX blows up if verbose friend decl. removed.\n</code></pre>\n\n<p>Inside member definitions of <code>Derived&lt;R(Args...), T&gt;</code> (for example, in the body of <code>bar()</code>), the types match, adding to my confusion:</p>\n\n<pre><code>static_assert(std::is_same&lt;Base&lt;R(Args...)&gt;, Base&lt;typename  \n  remove_membership&lt;decltype(&amp;std::remove_reference_t&lt;T&gt;::operator())&gt;::type&gt;&gt;::value,\n  \"signature mismatch\");\n</code></pre>\n\n<p>Are there rules around template class template member function (and friend function) delarations and instantiations that make these preceding declarations distinct in some or all circumstances?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1531352944, "post_id": 51295468, "comment_id": 89568638, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34244225/cannot-convert-from-const-char-3-to-char-x100000-qt-creator-c-windows\">cannot convert from &#39;const char &#91;3&#93;&#39; to &#39;char *&#39; x100000 (Qt Creator C++ Windows 32)</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1531353358, "post_id": 51295468, "comment_id": 89568709, "body": "Mostly duplicate: <a href=\"https://stackoverflow.com/questions/59670/how-to-get-rid-of-deprecated-conversion-from-string-constant-to-char-warnin\">How to get rid of <code>deprecated conversion from string constant to \u2018char*\u2019</code> warnings in GCC?</a> The warning has since been promoted to an error because, face it, assigning <code>const</code> data of any stripe to a non-const` pointer is a bad idea. By the way, ignore the accepted answer. It&#39;s no longer valid."}, {"owner": {"reputation": 12117, "user_id": 2745495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bbcd267235bab78ec6710ef6654ba87?s=128&d=identicon&r=PG", "display_name": "Gino Mempin", "link": "https://stackoverflow.com/users/2745495/gino-mempin"}, "edited": false, "score": 1, "creation_date": 1531353830, "post_id": 51295468, "comment_id": 89568796, "body": "<a href=\"https://meta.stackoverflow.com/a/285557/2745495\">Please don&#39;t post images of code</a>. Instead, add and <b><a href=\"https://stackoverflow.com/help/formatting\">format</a></b> your code into the post itself as <b>text</b>."}], "answers": [{"comments": [{"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1531352730, "post_id": 51295540, "comment_id": 89568608, "body": "Or copy the string if it needs to be modified."}, {"owner": {"reputation": 1441, "user_id": 4403144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1wpGT.png?s=128&g=1", "display_name": "brianolive", "link": "https://stackoverflow.com/users/4403144/brianolive"}, "edited": false, "score": 0, "creation_date": 1531353470, "post_id": 51295540, "comment_id": 89568740, "body": "This answer is correct. Consider also that all compiler errors are well documented online. See <a href=\"https://msdn.microsoft.com/en-us/library/sy5tsf8z.aspx\" rel=\"nofollow noreferrer\">here</a> for a clear and easy explanation of the C2440 error. Always check documentation."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 3, "last_activity_date": 1531352691, "creation_date": 1531352691, "answer_id": 51295540, "question_id": 51295468, "link": "https://stackoverflow.com/questions/51295468/problems-with-types-in-visual-studio-2017-community/51295540#51295540", "title": "Problems with types in Visual Studio 2017 Community", "body": "<p>Since character strings are constant arrays, you need to change the type of <code>sql</code> to <code>const char *sql</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 10067522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23a857c49a093e705176a0cf4bae3ddb?s=128&d=identicon&r=PG&f=1", "display_name": "N. Yeshikhin", "link": "https://stackoverflow.com/users/10067522/n-yeshikhin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1531362496, "accepted_answer_id": 51295540, "answer_count": 1, "score": -4, "last_activity_date": 1531352691, "creation_date": 1531351933, "last_edit_date": 1531352486, "question_id": 51295468, "link": "https://stackoverflow.com/questions/51295468/problems-with-types-in-visual-studio-2017-community", "closed_reason": "Not suitable for this site", "title": "Problems with types in Visual Studio 2017 Community", "body": "<p>As I know in C++ you can change the value of (<code>char *</code>) variable , but I have an error.</p>\n\n<p><img src=\"https://i.stack.imgur.com/qEvib.png\" alt=\"This is a screenshot.\"></p>\n\n<p>The error is:</p>\n\n<pre><code>error C2440: '=': cannot convert from 'const char [71]' to 'char *'\n</code></pre>\n\n<p>before I declared a <code>char*</code> variable:</p>\n\n<pre><code>char *sql;\n</code></pre>\n\n<p>and then I want to use it, but:</p>\n\n<pre><code>sql = \"INSERT INTO person (id,name,last,age) \"  \\\n    \"VALUES (1, 'Paul', 'Yezh', 14); \";\n</code></pre>\n\n<p>On the equal sign I have this error.</p>\n"}, {"tags": ["c++", "pointers", "error-handling"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1531350979, "post_id": 51295361, "comment_id": 89568235, "body": "You already asked this."}, {"owner": {"reputation": 133, "user_id": 9214577, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eVn2zJn_kpU/AAAAAAAAAAI/AAAAAAAAAe0/l6_Auarov-s/photo.jpg?sz=128", "display_name": "Devansh Sharma", "link": "https://stackoverflow.com/users/9214577/devansh-sharma"}, "edited": false, "score": 0, "creation_date": 1531351066, "post_id": 51295361, "comment_id": 89568252, "body": "@NeilButterworth I have fixed the arguments as the insert function accepts an index and a character pointer as arguments. The issue is different. <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/insert\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/basic_string/insert</a> (2)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1531351144, "post_id": 51295361, "comment_id": 89568269, "body": "Stop messing around with <code>char</code> and <code>char*</code> and do everything with std::string."}, {"owner": {"reputation": 400, "user_id": 7627081, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JY6sl0J2Q5I/AAAAAAAAAAI/AAAAAAAAKKM/WvS5lEnakRU/photo.jpg?sz=128", "display_name": "Richard", "link": "https://stackoverflow.com/users/7627081/richard"}, "edited": false, "score": 0, "creation_date": 1531351195, "post_id": 51295361, "comment_id": 89568286, "body": "You&#39;re inserting a consonant, which increases the length of <code>str</code>. When you loop around again, are you checking the newly inserted consonant, resulting in a never ending loop of added consonants?"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1531351360, "post_id": 51295361, "comment_id": 89568326, "body": "What&#39;s wrong with that line? What bad behavior do you observe?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1531351932, "post_id": 51295361, "comment_id": 89568455, "body": "I recommend investing some time in familiarizing yourself with <a href=\"https://en.wikipedia.org/wiki/Debugger\" rel=\"nofollow noreferrer\">the debugging software</a> that almost certainly came with your development environment. Stepping through this program with a debugger would have shown you the mistake in a fraction of the time it took you to ask this question and wait for answers. The debugger is probably the greatest software productivity tool you will ever encounter, and the sooner you get good at using it, the sooner you can reap the rewards."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1531352129, "post_id": 51295361, "comment_id": 89568490, "body": "The version of <code>string::insert()</code> that takes a char pointer is meant to be used for <b>null terminated C style strings</b>, not single characters. Use the first variant with 1 for the <code>count</code>. Also, you&#39;re inserting into index 0, and you have the problem with <code>i</code> pointing to the newly inserting consonant as shown in John Perry&#39;s answer."}], "answers": [{"comments": [{"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 2, "creation_date": 1531351878, "post_id": 51295413, "comment_id": 89568448, "body": "That&#39;s only part of the problem."}, {"owner": {"reputation": 2283, "user_id": 4526030, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-s05ILbxi6YA/AAAAAAAAAAI/AAAAAAAAACc/yAd6W8jNSBI/photo.jpg?sz=128", "display_name": "John Perry", "link": "https://stackoverflow.com/users/4526030/john-perry"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1531354637, "post_id": 51295413, "comment_id": 89568941, "body": "@FeiXiang I see your point in the comment. Thank you for pointing that out. I didn&#39;t think to look past the problems with the loop itself."}], "tags": [], "owner": {"reputation": 2283, "user_id": 4526030, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-s05ILbxi6YA/AAAAAAAAAAI/AAAAAAAAACc/yAd6W8jNSBI/photo.jpg?sz=128", "display_name": "John Perry", "link": "https://stackoverflow.com/users/4526030/john-perry"}, "is_accepted": true, "score": 2, "last_activity_date": 1531351436, "creation_date": 1531351436, "answer_id": 51295413, "question_id": 51295361, "link": "https://stackoverflow.com/questions/51295361/error-handling-c-program-never-stops/51295413#51295413", "title": "Error Handling C++ : Program never stops", "body": "<p>When you add a consonant, then increment <code>i</code> only once, your cursor ends up on the new consonant, so you're always adding new consonants. Like this:</p>\n\n<pre><code>joy\njkoy\njkloy\njklmoy\n</code></pre>\n\n<p>and so forth.</p>\n\n<p>The solution is to increment <code>i</code> whenever you add a consonant. Retain the increment inside the <code>for</code> loop; you just need to increment <code>i</code> again right after the <code>str.insert(...)</code> command.</p>\n"}], "owner": {"reputation": 133, "user_id": 9214577, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eVn2zJn_kpU/AAAAAAAAAAI/AAAAAAAAAe0/l6_Auarov-s/photo.jpg?sz=128", "display_name": "Devansh Sharma", "link": "https://stackoverflow.com/users/9214577/devansh-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 51295413, "answer_count": 1, "score": -1, "last_activity_date": 1531351436, "creation_date": 1531350873, "last_edit_date": 1531351094, "question_id": 51295361, "link": "https://stackoverflow.com/questions/51295361/error-handling-c-program-never-stops", "title": "Error Handling C++ : Program never stops", "body": "<p>I am just starting out C++, so excuse me for my misunderstanding.</p>\n\n<p>I am making a program in which the next consonant is added on to every consonant.</p>\n\n<p>For example, if the input is joythen the result is jkoyz.</p>\n\n<p>Because k comes after j so it is inserted after j, o is vowel so nothing is inserted after o and z is inserted after y because z comes after y in the alphabet.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;typeinfo&gt;\n\nusing namespace std;\n\nint main ()\n{\n\n    string str = \"joy\";\n\n    string constant = \"bcdfghjklmnpqrstvwxyzz\";\n\n     for(int i = 0; i &lt; str.length(); i++){\n\n        if (constant.find(str[i]) != string::npos) {\n\n            int index = constant.find(str[i]);\n\n            char closestConstant = constant[index + 1];           \n            char *closestConstantPointer = &amp;closestConstant;\n\n            str.insert(0, closestConstantPointer);\n\n        }\n    }\n}\n</code></pre>\n\n<p>The problem is in the <code>str.insert(0, closestConstant);</code> line. Any guidance?</p>\n"}, {"tags": ["c++", "smart-pointers", "move-semantics", "pass-by-value"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 5, "creation_date": 1531350576, "post_id": 51295303, "comment_id": 89568115, "body": "<code>foo</code> doesn&#39;t have to be copied into, it can be moved into as well"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1531350602, "post_id": 51295303, "comment_id": 89568121, "body": "That&#39;d be nice, but unfortunately (or as a quirk of history) the &quot;move-able&quot; concept is fairly recent and had to be bolted onto an already very well seasoned language."}, {"owner": {"reputation": 411, "user_id": 6111891, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e38e4b42dfde2bf876b41a9bc3bd1ca6?s=128&d=identicon&r=PG&f=1", "display_name": "AUD_FOR_IUV", "link": "https://stackoverflow.com/users/6111891/aud-for-iuv"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 1, "creation_date": 1531357517, "post_id": 51295303, "comment_id": 89569479, "body": "@vu1p3n0x that was the missing insight here, I had always thought that passing by value invokes the copy constructor, though I now know that that will depend on the type of the value passed in at the call site (copy constructor for lvalues and rvalues without move constructors, move constructor for rvalues with move constructors)."}], "answers": [{"comments": [{"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1531351061, "post_id": 51295350, "comment_id": 89568251, "body": "@user4581301 Thank you for your comment but I&#39;m not sure whether I understand it correctly.  Please feel free to edit my answer for clarification."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1531351465, "post_id": 51295350, "comment_id": 89568350, "body": "Your update explains what happened well enough for me."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 4, "creation_date": 1531351824, "post_id": 51295350, "comment_id": 89568434, "body": "&quot;moved-from object is undefined behaviour&quot; no, that is false.  There are ways to use moved-from objects that invoke UB, but the same is true of non-moved-from objects."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1531352186, "post_id": 51295350, "comment_id": 89568498, "body": "moved-from objects are in a valid but indeterminate state."}, {"owner": {"reputation": 411, "user_id": 6111891, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e38e4b42dfde2bf876b41a9bc3bd1ca6?s=128&d=identicon&r=PG&f=1", "display_name": "AUD_FOR_IUV", "link": "https://stackoverflow.com/users/6111891/aud-for-iuv"}, "edited": false, "score": 1, "creation_date": 1531352716, "post_id": 51295350, "comment_id": 89568606, "body": "So would it be more accurate to say that pass-by-value doesn&#39;t always invoke the copy constructor, but rather invokes either the copy or move constructor depending on whether the value passed in is an lvalue or rvalue reference?"}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "reply_to_user": {"reputation": 411, "user_id": 6111891, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e38e4b42dfde2bf876b41a9bc3bd1ca6?s=128&d=identicon&r=PG&f=1", "display_name": "AUD_FOR_IUV", "link": "https://stackoverflow.com/users/6111891/aud-for-iuv"}, "edited": false, "score": 1, "creation_date": 1531354848, "post_id": 51295350, "comment_id": 89568985, "body": "@AUD_FOR_IUV As you see it depends on the kind of value.  Rvalues invoke the move constructor (if there is one, otherwise copy), lvalues invoke the copy constructor."}, {"owner": {"reputation": 411, "user_id": 6111891, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e38e4b42dfde2bf876b41a9bc3bd1ca6?s=128&d=identicon&r=PG&f=1", "display_name": "AUD_FOR_IUV", "link": "https://stackoverflow.com/users/6111891/aud-for-iuv"}, "edited": false, "score": 0, "creation_date": 1531357424, "post_id": 51295350, "comment_id": 89569462, "body": "Wow that explains a lot. I had always been told that passing by value unconditionally invokes the copy constructor (because I guess that was the case pre-C++11) and never stopped to consider that the behavior might be different when move semantics come into play. Thanks!"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1531358102, "post_id": 51295350, "comment_id": 89569574, "body": "&quot;the state of a moved-from object is indeterminate&quot; this is also false.  There are moved-from objects with indeterminate state, but there are also not-moved from objects with indeterminate state, and moved-from objects (both inside, and outside of <code>std</code>) whose state is determined completely.  <code>unique_ptr&lt;T&gt;</code> is one of those types whose objects&#39; moved-from state is completely determinate."}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1531359867, "post_id": 51295350, "comment_id": 89569897, "body": "@Yakk Okay, I&#39;m definitely not language lawyer enough to argue about that, so I just removed this sub-sentence.  I hope you agree that having moved-from objects around it is a potential source of bugs."}], "tags": [], "owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "is_accepted": false, "score": 3, "last_activity_date": 1531358460, "last_edit_date": 1531358460, "creation_date": 1531350796, "answer_id": 51295350, "question_id": 51295303, "link": "https://stackoverflow.com/questions/51295303/how-is-it-possible-to-pass-move-only-types-e-g-stdunique-ptr-by-value/51295350#51295350", "title": "How is it possible to pass move-only types (e.g. std::unique_ptr) by value?", "body": "<p>Of course this works, as long as you either pass an rvalue to the constructor of Sink or you move the argument.  In both cases the move constructor, rather than the (deleted) copy constructor will be called for the argument.</p>\n\n<p><em>N.B.:</em> I don't think <code>std::move</code> is a good idea here because then you'll have a moved-from object floating around in your function.  Static analysis can probably spot this but it's a source of bugs.</p>\n\n<pre><code>#include &lt;memory&gt;\n\nstruct Foo {};\n\nclass Sink {\n    public:\n        Sink(std::unique_ptr&lt;Foo&gt; foo) : foo(std::move(foo)) {}\n\n    private:\n        std::unique_ptr&lt;Foo&gt; foo;\n};\n\nint main() {\n    // rvalue\n    Sink s(std::make_unique&lt;Foo&gt;());\n\n    // std::move (can be dangerous)\n    auto f = std::make_unique&lt;Foo&gt;();\n    Sink ss(std::move(f));\n\n    // By value is not allowed\n    auto ff = std::make_unique&lt;Foo&gt;();\n  //Sink sss(ff); // BOOM!\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/AvvvGN8V0riDSNzw\" rel=\"nofollow noreferrer\">Live on Wandbox</a></p>\n"}], "owner": {"reputation": 411, "user_id": 6111891, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e38e4b42dfde2bf876b41a9bc3bd1ca6?s=128&d=identicon&r=PG&f=1", "display_name": "AUD_FOR_IUV", "link": "https://stackoverflow.com/users/6111891/aud-for-iuv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1531358460, "creation_date": 1531350341, "question_id": 51295303, "link": "https://stackoverflow.com/questions/51295303/how-is-it-possible-to-pass-move-only-types-e-g-stdunique-ptr-by-value", "title": "How is it possible to pass move-only types (e.g. std::unique_ptr) by value?", "body": "<p>If we take <code>std::unique_ptr</code> as an example, the prevailing wisdom for passing move-only types into a sink function (e.g. a constructor that takes ownership of the pointer) is to pass it in by value and move it at the call site. E.g.</p>\n\n<pre><code>class Sink {\n    public:\n        Sink(std::unique_ptr&lt;Foo&gt; foo) : foo(std::move(foo)) {}\n\n    private:\n        std::unique_ptr&lt;Foo&gt; foo;\n};\n</code></pre>\n\n<p>How is this possible? Shouldn't the compiler be able to deduce immediately that <code>std::unique_ptr</code> is a move-only type and reject the use of <code>Sink(std::unique_ptr&lt;Foo&gt;)</code>? Is there something special about the pass-by-value rules here (i.e. that things passed by value are copied into that functions activation frame)?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "c++11", "shared-ptr", "stdvector"], "answers": [{"comments": [{"owner": {"reputation": 1285, "user_id": 9215365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SInc5.jpg?s=128&g=1", "display_name": "John Ding", "link": "https://stackoverflow.com/users/9215365/john-ding"}, "edited": false, "score": 0, "creation_date": 1531350721, "post_id": 51295293, "comment_id": 89568160, "body": "sorry, in my edition, I write &quot;unique_ptr&quot; by mistake. If you accept it, remember to correct it, thanks..."}, {"owner": {"reputation": 1, "user_id": 9308279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32a409439d495ad0b7a6e83745ba1e9d?s=128&d=identicon&r=PG&f=1", "display_name": "Th&#224;ng long Cama", "link": "https://stackoverflow.com/users/9308279/th%c3%a0ng-long-cama"}, "edited": false, "score": 0, "creation_date": 1531380213, "post_id": 51295293, "comment_id": 89575921, "body": "Hi, I tried this, it compiles now! However, my missiles which are out of range aren&#39;t removed. My game is becoming slower, each time I shoot..."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1531413923, "post_id": 51295293, "comment_id": 89598208, "body": "That\u2019s probably related to other logic you\u2019re written elsewhere, and would be beyond the scope of this question. I suggest you spend some time debugging and thinking about your design and if you encounter something specific that you don\u2019t know how to fix, ask feel free to another question."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1531414113, "post_id": 51295293, "comment_id": 89598294, "body": "Though about missiles not being removed; does <code>ship-&gt;getMissilesToDisplay();</code> return a vector of missiles by <i>value</i>? If so, any changes to that vector will not be seen by <code>ship</code>. Maybe you should pass the vector by reference or move this logic into <code>ship</code> entirely"}], "tags": [], "owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "is_accepted": false, "score": 3, "last_activity_date": 1531352432, "last_edit_date": 1531352432, "creation_date": 1531350281, "answer_id": 51295293, "question_id": 51295222, "link": "https://stackoverflow.com/questions/51295222/compiling-errors-stdvectorstdshared-ptrt-iterator-and-erase-methods/51295293#51295293", "title": "Compiling errors std::vector&lt;std::shared_ptr&lt;T&gt;&gt; iterator and erase methods", "body": "<p>You're calling <code>std::find</code> with a unary predicate, but <code>std::find</code> expects a value type to test for equality there. Thus, you're trying compare <code>std::shared_ptr&lt;Missile&gt;</code> with a lambda, which is impossible, of course, and results in the typically horrible template error message. You probably want to use <a href=\"https://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>std::find_if</code></a>, which accepts a predicate:</p>\n\n<pre><code>std::find_if(list.begin(), list.end(), [](const std::shared_ptr&lt;Missile&gt;&amp; m) { return m-&gt;canDelete(); });\n</code></pre>\n\n<p>EDIT: The above solution will let you remove the <em>first</em> Missile that can be deleted. If you want to delete <em>every</em> Missile that can be deleted, you can use <a href=\"https://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow noreferrer\"><code>std::remove_if</code></a>. It's usage comes with a confusing idiom but I'll try to explain. <code>std::remove_if</code> also takes two iterators and a unary predicate, but it doesn't actually <em>remove</em> elements (because to do this, it would need to be aware of the container given only iterators, which is <a href=\"https://stackoverflow.com/questions/11445025/get-a-pointer-to-stl-container-an-iterator-is-referencing\">impossible</a>). Instead, it <em>shuffles</em> elements to the back of the container if they should be removed, and returns a new iterator to the first of those elements. This is coupled with <code>std::vector::erase(iterator first, iterator last);</code> to delete those trailing elements. Now for the actual code, with indenting to help separate the moving parts:</p>\n\n<pre><code>list.erase(\n    std::remove_if(\n        list.begin(),\n        list.end(),\n        [](const std::shared_ptr&lt;Missile&gt;&amp; m){ m-&gt;canDelete(); }\n    ),\n    list.end()\n);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9308279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32a409439d495ad0b7a6e83745ba1e9d?s=128&d=identicon&r=PG&f=1", "display_name": "Th&#224;ng long Cama", "link": "https://stackoverflow.com/users/9308279/th%c3%a0ng-long-cama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531356122, "creation_date": 1531349675, "last_edit_date": 1531356122, "question_id": 51295222, "link": "https://stackoverflow.com/questions/51295222/compiling-errors-stdvectorstdshared-ptrt-iterator-and-erase-methods", "title": "Compiling errors std::vector&lt;std::shared_ptr&lt;T&gt;&gt; iterator and erase methods", "body": "<p>I'm trying to make a game with C++ and SFML. However, I have some issues with the <code>Missile</code> class. I have a <code>std::vector&lt;std::shared_ptr&lt;Missile&gt;&gt;</code>, and what I would like to do is remove missiles when they are out of range.</p>\n\n<p>I've made some research on StackOverflow and I found something like this:</p>\n\n<pre><code>auto list = ship-&gt;getMissilesToDisplay(); // returns the std::vector&lt;std::shared_ptr&lt;Missile&gt;&gt;\nauto iterator = std::find(list.begin(), list.end(), [](const std::shared_ptr&lt;Missile&gt;&amp; m) { return m-&gt;canDelete(); });\nlist.erase(iterator);\n</code></pre>\n\n<p>But when I compile this, I get some errors:</p>\n\n<pre><code>1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\xutility(3579): error C2678: binary '==': no operator found which takes a left-hand operand of type 'std::shared_ptr&lt;Missile&gt;' (or there is no acceptable conversion)\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\system_error(284): note: could be 'bool std::operator ==(const std::error_condition &amp;,const std::error_condition &amp;) noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\system_error(278): note: or       'bool std::operator ==(const std::error_condition &amp;,const std::error_code &amp;) noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\system_error(272): note: or       'bool std::operator ==(const std::error_code &amp;,const std::error_condition &amp;) noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\system_error(266): note: or       'bool std::operator ==(const std::error_code &amp;,const std::error_code &amp;) noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\exception(330): note: or       'bool std::operator ==(const std::exception_ptr &amp;,std::nullptr_t) noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\exception(325): note: or       'bool std::operator ==(std::nullptr_t,const std::exception_ptr &amp;) noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\exception(320): note: or       'bool std::operator ==(const std::exception_ptr &amp;,const std::exception_ptr &amp;) noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\memory(1615): note: or       'bool std::operator ==&lt;Missile&gt;(const std::shared_ptr&lt;Missile&gt; &amp;,std::nullptr_t) noexcept'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\xutility(3579): note: or       'built-in C++ operator==(bool (__cdecl *)(const std::shared_ptr&lt;Missile&gt; &amp;), bool (__cdecl *)(const std::shared_ptr&lt;Missile&gt; &amp;))'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\xutility(3579): note: or       'built-in C++ operator==(bool (__stdcall *)(const std::shared_ptr&lt;Missile&gt; &amp;), bool (__stdcall *)(const std::shared_ptr&lt;Missile&gt; &amp;))'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\xutility(3579): note: or       'built-in C++ operator==(bool (__fastcall *)(const std::shared_ptr&lt;Missile&gt; &amp;), bool (__fastcall *)(const std::shared_ptr&lt;Missile&gt; &amp;))'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\xutility(3579): note: or       'built-in C++ operator==(bool (__vectorcall *)(const std::shared_ptr&lt;Missile&gt; &amp;), bool (__vectorcall *)(const std::shared_ptr&lt;Missile&gt; &amp;))'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\xutility(3579): note: while trying to match the argument list '(std::shared_ptr&lt;Missile&gt;, const Game::clean::&lt;lambda_42809c80e7e2bc392c11a08cf362033b&gt;)'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\xutility(3592): note: see reference to function template instantiation '_InIt std::_Find_unchecked1&lt;_InIt,_Ty&gt;(_InIt,const _InIt,const _Ty &amp;,std::false_type)' being compiled\n1&gt;        with\n1&gt;        [\n1&gt;            _InIt=std::shared_ptr&lt;Missile&gt; *,\n1&gt;            _Ty=Game::clean::&lt;lambda_42809c80e7e2bc392c11a08cf362033b&gt;\n1&gt;        ]\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.14.26428\\include\\xutility(3601): note: see reference to function template instantiation '_InIt std::_Find_unchecked&lt;std::shared_ptr&lt;Missile&gt;*,_Ty&gt;(const _InIt,const _InIt,const _Ty &amp;)' being compiled\n1&gt;        with\n1&gt;        [\n1&gt;            _InIt=std::shared_ptr&lt;Missile&gt; *,\n1&gt;            _Ty=Game::clean::&lt;lambda_42809c80e7e2bc392c11a08cf362033b&gt;\n1&gt;        ]\n1&gt;c:\\users\\th\u00e0ng long\\documents\\visual studio 2017\\projects\\asteroid\\asteroid\\src\\game.cpp(13): note: see reference to function template instantiation '_InIt std::find&lt;std::_Vector_iterator&lt;std::_Vector_val&lt;std::_Simple_types&lt;_Ty&gt;&gt;&gt;,Game::clean::&lt;lambda_42809c80e7e2bc392c11a08cf362033b&gt;&gt;(_InIt,const _InIt,const Game::clean::&lt;lambda_42809c80e7e2bc392c11a08cf362033b&gt; &amp;)' being compiled\n1&gt;        with\n1&gt;        [\n1&gt;            _InIt=std::_Vector_iterator&lt;std::_Vector_val&lt;std::_Simple_types&lt;std::shared_ptr&lt;Missile&gt;&gt;&gt;&gt;,\n1&gt;            _Ty=std::shared_ptr&lt;Missile&gt;\n1&gt;        ]\n</code></pre>\n\n<p>Maybe I misunderstood how to implement this code?</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 6, "creation_date": 1531348050, "post_id": 51295002, "comment_id": 89567547, "body": "Can you give a lot more explanation about what you&#39;re trying to do, what you&#39;ve done, and what isn&#39;t working? As it stands, this question doesn&#39;t make much sense. See <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a> for tips"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1531348107, "post_id": 51295002, "comment_id": 89567558, "body": "Did this not work <code>if(map[a][b]==&#39;a&#39;) set color</code>? Did it give an error message?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1531348285, "post_id": 51295002, "comment_id": 89567592, "body": "Are you trying to draw the map to the terminal using colored characters?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1531348424, "post_id": 51295002, "comment_id": 89567630, "body": "One issue is that color is not part of standard C++.  We&#39;ll need more context about what you are trying to accomplish.  Please edit your post with actual code."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1531349021, "post_id": 51295002, "comment_id": 89567773, "body": "Your edit did not really help. Again <code>color</code> has no meaning in standard <code>c++</code>. What exactly are you trying to do?"}, {"owner": {"reputation": 1, "user_id": 10061315, "user_type": "registered", "profile_image": "https://graph.facebook.com/1974092549288666/picture?type=large", "display_name": "Wiktor Kulesza", "link": "https://stackoverflow.com/users/10061315/wiktor-kulesza"}, "edited": false, "score": 0, "creation_date": 1531349189, "post_id": 51295002, "comment_id": 89567816, "body": "It&#39;s function to create the map, and I have no idea how can I set color of elements :/ Then I want to print it by simple function   void rendering(int lenght, int wide, char map[][100]) {    for(int i=0,i2=0;i&lt;lenght;i++,i2++)     {         cout.write(map[i],wide-1);         cout&lt;&lt;&#39;\\n&#39;;     } } For example I want to have my all &#39;o&#39; elements to be printed in blue colour"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1531349310, "post_id": 51295002, "comment_id": 89567848, "body": "Are you trying to print to the console using different colors with cout statements?"}, {"owner": {"reputation": 1, "user_id": 10061315, "user_type": "registered", "profile_image": "https://graph.facebook.com/1974092549288666/picture?type=large", "display_name": "Wiktor Kulesza", "link": "https://stackoverflow.com/users/10061315/wiktor-kulesza"}, "edited": false, "score": 0, "creation_date": 1531349525, "post_id": 51295002, "comment_id": 89567892, "body": "Yes but I want to console knows about colour of every element, is it possible??"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1531349613, "post_id": 51295002, "comment_id": 89567915, "body": "Is this on linux?"}, {"owner": {"reputation": 1, "user_id": 10061315, "user_type": "registered", "profile_image": "https://graph.facebook.com/1974092549288666/picture?type=large", "display_name": "Wiktor Kulesza", "link": "https://stackoverflow.com/users/10061315/wiktor-kulesza"}, "edited": false, "score": 0, "creation_date": 1531349683, "post_id": 51295002, "comment_id": 89567929, "body": "Nope windows here"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1531349809, "post_id": 51295002, "comment_id": 89567954, "body": "<a href=\"https://stackoverflow.com/questions/4053837/colorizing-text-in-the-console-with-c\" title=\"colorizing text in the console with c\">stackoverflow.com/questions/4053837/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 10061315, "user_type": "registered", "profile_image": "https://graph.facebook.com/1974092549288666/picture?type=large", "display_name": "Wiktor Kulesza", "link": "https://stackoverflow.com/users/10061315/wiktor-kulesza"}, "edited": false, "score": 0, "creation_date": 1531349938, "post_id": 51295002, "comment_id": 89567987, "body": "^^ Yes but i print all the line of chars so all line will be for exmple green :/"}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 4556387, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d6899c898c8672c4a02a7066b287292e?s=128&d=identicon&r=PG&f=1", "display_name": "cjs", "link": "https://stackoverflow.com/users/4556387/cjs"}, "is_accepted": false, "score": 0, "last_activity_date": 1531348451, "creation_date": 1531348451, "answer_id": 51295062, "question_id": 51295002, "link": "https://stackoverflow.com/questions/51295002/can-i-define-in-any-way-color-of-arrays-element/51295062#51295062", "title": "Can I define in any way color of array&#39;s element?", "body": "<p>If you are trying to print the 2D map (e.g. to terminal), this may be a duplicate. Reference <a href=\"https://stackoverflow.com/questions/2616906/how-do-i-output-coloured-text-to-a-linux-terminal\">this question</a> for more information.</p>\n"}], "owner": {"reputation": 1, "user_id": 10061315, "user_type": "registered", "profile_image": "https://graph.facebook.com/1974092549288666/picture?type=large", "display_name": "Wiktor Kulesza", "link": "https://stackoverflow.com/users/10061315/wiktor-kulesza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1531349699, "creation_date": 1531347976, "last_edit_date": 1531349699, "question_id": 51295002, "link": "https://stackoverflow.com/questions/51295002/can-i-define-in-any-way-color-of-arrays-element", "title": "Can I define in any way color of array&#39;s element?", "body": "<p>I'm trying to make 2D map but I have problem with setting a color for  all elements which value is 'a' \nis it possible in any way??<br>\n^^^ </p>\n\n<pre><code>if(map[a][b]=='a')\nset color ..... ;  \n\nvoid map_create(int lenght, int wide,char map[][100])\n{\n\n    for(int i=0; i&lt;lenght; i++)\n    {\n        for(int i2=0; i2&lt;wide-1; i2++)\n        {\n            if(i2==0)\n            {\n                map[i][i2]='x';\n                continue;\n            }\n            if(i2%2!=0)\n            {\n                map[i][i2]=' ';\n                continue;\n            }\n            if((i==0 || i==lenght-1) || (i2==0 || i2==wide-2))\n               map[i][i2]='x';\n            else\n                map[i][i2]=' ';\n\n\n        }\n\n\n    }\n    map[2][2]='o';\n    if(tab[i][i2]=='o')\n    {\n        int problem_is_here;\n    }\n</code></pre>\n"}, {"tags": ["c++", "matlab", "openmp", "mex", "eigen3"], "comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1531354997, "post_id": 51294961, "comment_id": 89569012, "body": "How did you compile? OpenMP requires a compiler flag."}, {"owner": {"reputation": 35, "user_id": 4071481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494350380027afe6ae3dfc61c7b77852?s=128&d=identicon&r=PG&f=1", "display_name": "Bayes", "link": "https://stackoverflow.com/users/4071481/bayes"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1531360189, "post_id": 51294961, "comment_id": 89569960, "body": "@CrisLuengo: I used the following command to compile the mex code in matlab: <code>mex -v CXXOPTIMFLAGS=&quot;-O2 -fwrapv -DNDEBUG&quot; test_mp.cpp -I&#47;usr&#47;local&#47;include&#47;eigen3&#47;Eigen CxxFLAGS=&quot;$CxxFLAGS -fopenmp&quot; LDFLAGS=&quot;$LDFLAGS -fopenmp&quot;</code>. The mex code is compiled correctly with OpenMP flags."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1531370217, "post_id": 51294961, "comment_id": 89571903, "body": "Does the loop take a large chunk of total execution time? You might have false sharing at <code>xsol(i)=...</code>, when different threads write to the same cache line, all threads need to refresh it. Consider adding a line <code>mexPrintf (&quot;num_thds=%d\\n&quot;, omp_get_num_threads());</code> inside the parallel section to see if you get threads spawned (you can separate <code>#pragma omp parallel</code> and <code>#pragma omp for</code> for this)."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1531370326, "post_id": 51294961, "comment_id": 89571921, "body": "What are the values of <code>n</code> and <code>N</code>?"}, {"owner": {"reputation": 35, "user_id": 4071481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494350380027afe6ae3dfc61c7b77852?s=128&d=identicon&r=PG&f=1", "display_name": "Bayes", "link": "https://stackoverflow.com/users/4071481/bayes"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1531402522, "post_id": 51294961, "comment_id": 89590808, "body": "@CrisLuengo: In my test example, I set <code>N=1,260,864, n=100</code>, which took about 25 seconds for the serial code and the code with <code>OpenMP</code>. These two versions of code give the same results, since I checked their outputs in MATLAB. When I used the following code, it outputs just 1 core, but I used 28 cores in my test. <code>#pragma omp parallel private(i, Qb)     {         for(i=0; i&lt;n; i++){             mexPrintf (&quot;num_thds=%d\\n&quot;, omp_get_num_threads());             Qb = Qsolver.solve(B.col(i));             xsol(i) = B.col(i).dot(Qb);         }     }</code>"}, {"owner": {"reputation": 35, "user_id": 4071481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494350380027afe6ae3dfc61c7b77852?s=128&d=identicon&r=PG&f=1", "display_name": "Bayes", "link": "https://stackoverflow.com/users/4071481/bayes"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1531402647, "post_id": 51294961, "comment_id": 89590900, "body": "@CrisLuengo: When you mentioned <code>xsol(i)=...</code>, do you mean I need to allocate allocate or define the variable <code>xsol</code> inside the <code>#pragma omp parallel</code> region?"}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1531405040, "post_id": 51294961, "comment_id": 89592604, "body": "Unrelated: You can exploit the symmetry in <code>Q=P&#39;*L*L&#39;*P</code> and just calculate <code>Qb = Qsolver.permutationP() * B.col(i); Qsolver.matrixL().solveInPlace(Qb); xsol(i) = Qb.squaredNorm();</code> (You may need to check <code>Qsolver.permutationP().size()&gt;0</code>, perhaps)."}, {"owner": {"reputation": 35, "user_id": 4071481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494350380027afe6ae3dfc61c7b77852?s=128&d=identicon&r=PG&f=1", "display_name": "Bayes", "link": "https://stackoverflow.com/users/4071481/bayes"}, "reply_to_user": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1531407418, "post_id": 51294961, "comment_id": 89594230, "body": "@chtz: Thank you very much for pointing this out. It gives me 35% of speedup."}], "owner": {"reputation": 35, "user_id": 4071481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494350380027afe6ae3dfc61c7b77852?s=128&d=identicon&r=PG&f=1", "display_name": "Bayes", "link": "https://stackoverflow.com/users/4071481/bayes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 651, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531347730, "creation_date": 1531347730, "question_id": 51294961, "link": "https://stackoverflow.com/questions/51294961/openmp-with-eigen-matrix-operation-in-c-mex", "title": "OpenMP with Eigen Matrix operation in C++ MEX", "body": "<p>I would like to compute the diagonal elements of B'*Q^(-1)*B for N-by-n dense matrix B and N-by-N sparse matrix Q, where N is about 10^6 and n is about 10^5. I tried to use OpenMP to compute the diagonal elements using the following Mex code. However, the timing for for the code with OpenMP and without OpenMP is almost the same. I think I did not effectively enable the OpenMP feature in my code. When I run the test, I used 28 cores. </p>\n\n<p>I am new to OpenMP. Can anyone give me some suggestions? Thank you very much!</p>\n\n<pre><code>#include \"mex.h\"\n#include \"matrix.h\"\n#include &lt;Eigen&gt;\n#include &lt;type_traits&gt;\n#include &lt;limits&gt;\n#include &lt;omp.h&gt;\n\n\ntypedef Eigen::SparseMatrix&lt;double,Eigen::ColMajor,std::make_signed&lt;mwIndex&gt;::type&gt; MatlabSparse;\n\nEigen::Map&lt;MatlabSparse &gt; matlab_to_eigen_sparse(const mxArray * mat)\n{\n    mxAssert(mxGetClassID(mat) == mxDOUBLE_CLASS,\n    \"Type of the input matrix isn't double\");\n    mwSize     m = mxGetM(mat);\n    mwSize     n = mxGetN(mat);\n    mwSize    nz = mxGetNzmax(mat);\n    /*Theoretically fails in very very large matrices*/\n    mxAssert(nz &lt;= std::numeric_limits&lt; std::make_signed&lt;mwIndex&gt;::type&gt;::max(),\n    \"Unsupported Data size.\");\n    double  * pr = mxGetPr(mat);\n    MatlabSparse::StorageIndex* ir = reinterpret_cast&lt;MatlabSparse::StorageIndex*&gt;(mxGetIr (mat));\n    MatlabSparse::StorageIndex* jc = reinterpret_cast&lt;MatlabSparse::StorageIndex*&gt;(mxGetJc (mat));\n    Eigen::Map&lt;MatlabSparse&gt; result(m, n, nz, jc, ir, pr);\n    return result;\n}\n\n\n\nvoid mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])\n{\n\n    // prhs[0]: Q\n    Eigen::Map&lt;MatlabSparse&gt; Q = matlab_to_eigen_sparse(prhs[0]);\n    mwSize N = mxGetM(prhs[0]); // size of BAUs for constructing the GGM\n\n    // prhs[1]: B (dense matrix)\n    mwSize n = mxGetN(prhs[1]);\n    Eigen::Map&lt;Eigen::MatrixXd&gt; B(mxGetPr(prhs[1]), N, n);\n\n\n\n     Eigen::SimplicialLLT&lt;Eigen::SparseMatrix&lt;double&gt; &gt; Qsolver;\n     Qsolver.analyzePattern(Q);\n     Qsolver.factorize(Q);  \n\n\n\n    // intermidiate variables\n    Eigen::VectorXd Qb(N), xsol(n);\n    mwIndex i;\n    //mexPrintf(\"\\n begin for-loop.\\n\");\n\n    // compute diagonal elements of B'*Q^(-1)*B\n    #pragma omp parallel for private(i, Qb)\n    for(i=0; i&lt;n; i++){\n        Qb = Qsolver.solve(B.col(i));\n        xsol(i) = B.col(i).dot(Qb);\n    }\n\n    //mexPrintf(\"\\n finish for-loop.\\n\");\n\n    double* x = (double*) mxCalloc(n, sizeof(double));\n    Eigen::Map&lt;Eigen::MatrixXd&gt;(x, n, 1) = xsol;\n\n    // set output\n    plhs[0] = mxCreateDoubleMatrix(n, 1, mxREAL);\n    mxSetPr(plhs[0], x);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c++14", "floating-point-exceptions"], "comments": [{"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 2, "creation_date": 1531347322, "post_id": 51294886, "comment_id": 89567320, "body": "floating point execption is when you attempt a division or modulo by 0. it isn&#39;t exclusive to floating points"}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 1, "creation_date": 1531347325, "post_id": 51294886, "comment_id": 89567323, "body": "How long does it take to reproduce the problem? When I run your code it just keeps running."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 2, "creation_date": 1531347352, "post_id": 51294886, "comment_id": 89567331, "body": "Use your debugger. Watch the value of <code>deno</code> and see if it ever is zero."}, {"owner": {"reputation": 358, "user_id": 9345287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19659e54eaab9777cd74ca352f612da2?s=128&d=identicon&r=PG&f=1", "display_name": "Breakpoint", "link": "https://stackoverflow.com/users/9345287/breakpoint"}, "reply_to_user": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1531347417, "post_id": 51294886, "comment_id": 89567352, "body": "@merlin2011 It works perfectly on hackerrank.com Passed Test cases took less than a sec"}, {"owner": {"reputation": 1732, "user_id": 8121683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1fnlik1dgxU/AAAAAAAAAAI/AAAAAAAAATk/MvX5UOgKBfg/photo.jpg?sz=128", "display_name": "Easton Bornemeier", "link": "https://stackoverflow.com/users/8121683/easton-bornemeier"}, "edited": false, "score": 0, "creation_date": 1531347497, "post_id": 51294886, "comment_id": 89567379, "body": "What values are you putting in? I&#39;m not getting the error"}, {"owner": {"reputation": 358, "user_id": 9345287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19659e54eaab9777cd74ca352f612da2?s=128&d=identicon&r=PG&f=1", "display_name": "Breakpoint", "link": "https://stackoverflow.com/users/9345287/breakpoint"}, "reply_to_user": {"reputation": 1732, "user_id": 8121683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1fnlik1dgxU/AAAAAAAAAAI/AAAAAAAAATk/MvX5UOgKBfg/photo.jpg?sz=128", "display_name": "Easton Bornemeier", "link": "https://stackoverflow.com/users/8121683/easton-bornemeier"}, "edited": false, "score": 0, "creation_date": 1531347574, "post_id": 51294886, "comment_id": 89567409, "body": "@Easton Bornemeier hidden test case! This works fine for 2 test cases but produces floating point exception for rest two"}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1531347632, "post_id": 51294886, "comment_id": 89567428, "body": "@TotallyNoob, In this case, it would be helpful to provide a link to the original problem."}, {"owner": {"reputation": 358, "user_id": 9345287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19659e54eaab9777cd74ca352f612da2?s=128&d=identicon&r=PG&f=1", "display_name": "Breakpoint", "link": "https://stackoverflow.com/users/9345287/breakpoint"}, "edited": false, "score": 0, "creation_date": 1531347731, "post_id": 51294886, "comment_id": 89567462, "body": "<a href=\"https://www.hackerrank.com/contests/projecteuler/challenges/euler025/problem\" rel=\"nofollow noreferrer\">hackerrank.com/contests/projecteuler/challenges/euler025/&hellip;</a>"}, {"owner": {"reputation": 358, "user_id": 9345287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19659e54eaab9777cd74ca352f612da2?s=128&d=identicon&r=PG&f=1", "display_name": "Breakpoint", "link": "https://stackoverflow.com/users/9345287/breakpoint"}, "edited": false, "score": 0, "creation_date": 1531347755, "post_id": 51294886, "comment_id": 89567469, "body": "I was unable to edit the question this is the problem statement"}, {"owner": {"reputation": 130, "user_id": 7657265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cec921da17ce4e0e4359e7d48b83917?s=128&d=identicon&r=PG&f=1", "display_name": "Y\u0131lmaz edis", "link": "https://stackoverflow.com/users/7657265/y%c4%b1lmaz-edis"}, "edited": false, "score": 0, "creation_date": 1531347936, "post_id": 51294886, "comment_id": 89567515, "body": "Your code seem exactly runnable without exception. Did you debug your code step by step?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 130, "user_id": 7657265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cec921da17ce4e0e4359e7d48b83917?s=128&d=identicon&r=PG&f=1", "display_name": "Y\u0131lmaz edis", "link": "https://stackoverflow.com/users/7657265/y%c4%b1lmaz-edis"}, "edited": false, "score": 1, "creation_date": 1531347998, "post_id": 51294886, "comment_id": 89567536, "body": "@Y\u0131lmazedis debugging doesn&#39;t easily help if you don&#39;t know the input that leads tot he problem."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1531348038, "post_id": 51294886, "comment_id": 89567546, "body": "@scohe001 Even after C++98 <code>std::pow()</code> only works with floating point numbers."}, {"owner": {"reputation": 358, "user_id": 9345287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19659e54eaab9777cd74ca352f612da2?s=128&d=identicon&r=PG&f=1", "display_name": "Breakpoint", "link": "https://stackoverflow.com/users/9345287/breakpoint"}, "reply_to_user": {"reputation": 130, "user_id": 7657265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cec921da17ce4e0e4359e7d48b83917?s=128&d=identicon&r=PG&f=1", "display_name": "Y\u0131lmaz edis", "link": "https://stackoverflow.com/users/7657265/y%c4%b1lmaz-edis"}, "edited": false, "score": 0, "creation_date": 1531348064, "post_id": 51294886, "comment_id": 89567549, "body": "@Y\u0131lmazedis Yes I tried to print values of deno and as much as I can think of deno never became zero hence floating point exception is a bit confusing in this case."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1531348171, "post_id": 51294886, "comment_id": 89567570, "body": "@FeiXiang Ahh looking closer at (7) it seems you&#39;re right. I skimmed and didn&#39;t look too closely at what <code>Arithmetic1</code> was thinking it&#39;d handle <code>int</code>"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1531348234, "post_id": 51294886, "comment_id": 89567580, "body": "input case for floating point exception: <code>1 50</code>"}, {"owner": {"reputation": 130, "user_id": 7657265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cec921da17ce4e0e4359e7d48b83917?s=128&d=identicon&r=PG&f=1", "display_name": "Y\u0131lmaz edis", "link": "https://stackoverflow.com/users/7657265/y%c4%b1lmaz-edis"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1531348395, "post_id": 51294886, "comment_id": 89567616, "body": "@bolov Yes, you are right."}, {"owner": {"reputation": 358, "user_id": 9345287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19659e54eaab9777cd74ca352f612da2?s=128&d=identicon&r=PG&f=1", "display_name": "Breakpoint", "link": "https://stackoverflow.com/users/9345287/breakpoint"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1531348641, "post_id": 51294886, "comment_id": 89567680, "body": "@bolov thanks! I have edited the question and put the error message for better understanding"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 3, "creation_date": 1531348842, "post_id": 51294886, "comment_id": 89567735, "body": "Do you realize that an <code>unsigned long long</code> can only go up about 19 digits while the problem requires 5000? Even a <code>long double</code> can only go up to 308 digits (with floating point error, of course). You&#39;re going to need a new approach."}, {"owner": {"reputation": 1732, "user_id": 8121683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1fnlik1dgxU/AAAAAAAAAAI/AAAAAAAAATk/MvX5UOgKBfg/photo.jpg?sz=128", "display_name": "Easton Bornemeier", "link": "https://stackoverflow.com/users/8121683/easton-bornemeier"}, "edited": false, "score": 0, "creation_date": 1531348863, "post_id": 51294886, "comment_id": 89567743, "body": "This is simply triggering overflow"}, {"owner": {"reputation": 358, "user_id": 9345287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19659e54eaab9777cd74ca352f612da2?s=128&d=identicon&r=PG&f=1", "display_name": "Breakpoint", "link": "https://stackoverflow.com/users/9345287/breakpoint"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1531349068, "post_id": 51294886, "comment_id": 89567784, "body": "@FeiXiang Thank you so much! I&#39;m going to change the approach."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1531349453, "post_id": 51294886, "comment_id": 89567877, "body": "The de-facto standard is <a href=\"https://gmplib.org/\" rel=\"nofollow noreferrer\">gmplib.org</a>"}], "answers": [{"comments": [{"owner": {"reputation": 358, "user_id": 9345287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19659e54eaab9777cd74ca352f612da2?s=128&d=identicon&r=PG&f=1", "display_name": "Breakpoint", "link": "https://stackoverflow.com/users/9345287/breakpoint"}, "edited": false, "score": 1, "creation_date": 1531348941, "post_id": 51295042, "comment_id": 89567762, "body": "Thank you, but how should I change my code to overcome this problem?"}, {"owner": {"reputation": 358, "user_id": 9345287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19659e54eaab9777cd74ca352f612da2?s=128&d=identicon&r=PG&f=1", "display_name": "Breakpoint", "link": "https://stackoverflow.com/users/9345287/breakpoint"}, "edited": false, "score": 0, "creation_date": 1531349679, "post_id": 51295042, "comment_id": 89567926, "body": "Thank you for looking deep into the problem and helping me out"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1531349738, "post_id": 51295042, "comment_id": 89567941, "body": "yes, just checked for <code>1 50</code> <code>deno</code> is <code>0</code>. On Visual Studio however is <code>9223372036854775808</code>. This is indeed UB."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 1, "creation_date": 1531374258, "post_id": 51295042, "comment_id": 89573188, "body": "Write your own pow() function. <code>std::pow</code> always converts ints and returns floating point results. There is no equivalent for ints only in the standard library. There are numerous int equivalents on the web."}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 0, "creation_date": 1531388262, "post_id": 51295042, "comment_id": 89581085, "body": "with n&gt;=19 the logic is ill-formed on a wide range of platforms. it just overflows the 64 bit boundries of long long."}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1531734981, "post_id": 51295042, "comment_id": 89690287, "body": "Mildly related: You can use the &quot;Russian peasant algorithm&quot;:<a href=\"http://lafstern.org/matt/col3.pdf\" rel=\"nofollow noreferrer\">lafstern.org/matt/col3.pdf</a> for efficient integer exponentiation. It is based on an ancient approach of <i>strength reduction</i> of multiplication to addition/subtraction/comparison. In this case, it reduces operation strength from exponentiation to at most multiplication."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 9, "last_activity_date": 1531353441, "last_edit_date": 1531353441, "creation_date": 1531348276, "answer_id": 51295042, "question_id": 51294886, "link": "https://stackoverflow.com/questions/51294886/why-does-this-code-get-floating-point-exception-when-there-is-no-float-data-type/51295042#51295042", "title": "Why does this code get floating point exception when there is no float data-type?", "body": "<p>It is perfectly normal for integer division to produce an exception that is reported as \"floating point exception\" on some platforms (Linux, for one example). You can easily get it from integer division by zero, or, for another example, by triggering overflow as in</p>\n\n<pre><code>int i = INT_MIN;\nint b = -1;\ni = i / b;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/07c5fdf47278b696\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/07c5fdf47278b696</a></p>\n\n<p>In certain contexts this exception might appear or disappear depending on optimization levels. The exception is normally only triggered when the compiler decided to generate the actual division instruction (as opposed to optimizing out the division).</p>\n\n<hr>\n\n<p>In your case unsigned integer division is used, so division by zero seems to be the only possible culprit. I would guess that this </p>\n\n<pre><code>unsigned long long int deno = pow(10,n-1);\n</code></pre>\n\n<p>happens to result in zero in <code>deno</code>. <code>pow</code> is a floating-point function that produces a floating-point result. Conversion from floating-point type to integer type leads to undefined behavior if the original value is too large (which is the case for <code>n</code> equal to <code>50</code>). Note that this is the case even if the target integer type is unsigned.</p>\n"}], "owner": {"reputation": 358, "user_id": 9345287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19659e54eaab9777cd74ca352f612da2?s=128&d=identicon&r=PG&f=1", "display_name": "Breakpoint", "link": "https://stackoverflow.com/users/9345287/breakpoint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2528, "favorite_count": 2, "accepted_answer_id": 51295042, "answer_count": 1, "score": 6, "last_activity_date": 1531353441, "creation_date": 1531347244, "last_edit_date": 1531348582, "question_id": 51294886, "link": "https://stackoverflow.com/questions/51294886/why-does-this-code-get-floating-point-exception-when-there-is-no-float-data-type", "title": "Why does this code get floating point exception when there is no float data-type?", "body": "<p>I'm not dividing by zero and there is no float datatype in my code, I still get floating point exception.</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\n\nint main() {\n    unsigned long long int t,n;\n\n    cin&gt;&gt;t;\n    while(t--)\n    {\n        cin&gt;&gt;n;\n        unsigned long long int deno = pow(10,n-1),count=2,sum = 0,f1=1,f2=1;\n\n         while(1){\n            sum = f1+f2;\n            f1 = f2;\n            f2 = sum;\n            count++;\n            if((int)(sum/deno)&gt;0){\n                cout&lt;&lt;count&lt;&lt;endl;\n                 break;\n             } \n        }\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>All the previous questions on the same had the similar problem of dividing by Zero but variable deno can never be zero as <code>n&gt;=2</code>. </p>\n\n<p>Previous research from my side:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/48234327/c-floating-point-exception-in-code-that-contains-no-floats\">\u201cFloating point exception\u201d in code that contains no floats</a></li>\n<li><a href=\"https://stackoverflow.com/questions/4236853/floating-point-exception-c-why-and-what-is-it\">Floating Point Exception C++ Why and what is it?\n</a></li>\n</ol>\n\n<p>Problem statement: <a href=\"https://www.hackerrank.com/contests/projecteuler/challenges/euler025/problem\" rel=\"nofollow noreferrer\">https://www.hackerrank.com/contests/projecteuler/challenges/euler025/problem</a></p>\n\n<p>It passes 2 test cases and fails 2. All are hidden test cases. <a href=\"https://i.stack.imgur.com/HPrpA.png\" rel=\"nofollow noreferrer\">Result image</a></p>\n\n<p>On passing the input 1 50 we can reproduce the error. Details:</p>\n\n<pre><code> GDB trace: Reading symbols from solution...done. [New LWP 15127] Core\n was generated by `solution'. Program terminated with signal SIGFPE,\n Arithmetic exception.\n #0  main () at solution.cc:23 \n 23 if((int)(sum/deno)&gt;0){\n #0  main () at solution.cc:23\n</code></pre>\n"}, {"tags": ["c++", "virtual"], "comments": [{"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 3, "creation_date": 1531347062, "post_id": 51294842, "comment_id": 89567235, "body": "Probably a missing semicolon in one of your include files."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1531347136, "post_id": 51294842, "comment_id": 89567258, "body": "Once again, we need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Otherwise we can only guess."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1531347165, "post_id": 51294842, "comment_id": 89567267, "body": "Without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> we cannot reproduce.  We can only guess.  Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> fully (both follow the link and read it, and read the title of the link); it doesn&#39;t read &quot;complete example&quot; it reads &quot;minimal and complete example&quot;.  Both minimal and complete are needed to solve your problem."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1531347253, "post_id": 51294842, "comment_id": 89567289, "body": "One of your 3 headers is likely causing this."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 4, "creation_date": 1531348679, "post_id": 51294842, "comment_id": 89567687, "body": "Now with the edit <code>circle.h</code> is missing <code>};</code> before <code>#endif &#47;&#47; CIRCLE_H</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1531349273, "post_id": 51294842, "comment_id": 89567839, "body": "If you are receiving warnings about <code>Shape</code> lacking a virtual destuctor you should heed them. If you are not receiving warnings, you should consider fixing it anyway. It looks like you are going to use polymoprhism here and you might as well pick off a likely bug early. More on that here: <a href=\"https://stackoverflow.com/questions/461203/when-to-use-virtual-destructors\" title=\"when to use virtual destructors\">stackoverflow.com/questions/461203/&hellip;</a>"}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1531350005, "post_id": 51294842, "comment_id": 89567997, "body": "This is not even <b>remotely</b> off topic. If you guys can&#39;t find a valid reason to close a question, don&#39;t use invalid reasons."}, {"owner": {"reputation": 21426, "user_id": 2495283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ef72b32709062aa479476844515073?s=128&d=identicon&r=PG", "display_name": "Claies", "link": "https://stackoverflow.com/users/2495283/claies"}, "reply_to_user": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 2, "creation_date": 1531351291, "post_id": 51294842, "comment_id": 89568311, "body": "@3Dave the question was closed before the edits were done that provided the code.  The close reason was valid <i>at the time</i>, but with the addition of the code, it&#39;s now moved to a problem of a typographical error;  it would be pointless to reopen the question only to close it for a very similar (off topic) reason."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1531410731, "post_id": 51294842, "comment_id": 89596387, "body": "Tip: The first error is the important one. In this case, it is failing to process the <code>using</code> statement. So naturally anything dependent on it (like<code>string</code>) will also fail. Focus on the first error. The rest are cascade errors."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1531411613, "post_id": 51294842, "comment_id": 89596967, "body": "Now that it is reopened should this be answered or closed as a typo? The typographical error seems pretty trivial."}, {"owner": {"reputation": 8345, "user_id": 421178, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9fa51d322613d477fd82330340c46ff3?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/421178/casey"}, "edited": false, "score": 0, "creation_date": 1531414931, "post_id": 51294842, "comment_id": 89598681, "body": "Voted to close as typographical error."}], "owner": {"reputation": 369, "user_id": 10028853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9GZN0.jpg?s=128&g=1", "display_name": "Stahp", "link": "https://stackoverflow.com/users/10028853/stahp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531410474, "creation_date": 1531346883, "last_edit_date": 1531350664, "question_id": 51294842, "link": "https://stackoverflow.com/questions/51294842/various-errors-out-of-nowhere-f-e-string-does-not-name-a-type-even-with-str", "title": "Various errors out of nowhere, f.e. &#39;string&#39; does not name a type even with &lt;string&gt; and std declared", "body": "<p>Do not downvote too quicly, I dare you. I've already looked all topics here with expected nested-name-specifier before 'namespace', 'string does not name a type, expected '}' ar end of input and none of them worked / helped. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"shape.h\"\n#include \"circle.h\"\n#include \"triangle.h\"\n\nusing namespace std;\n\nvoid function (Shape **tab, int size, const string &amp; path)\n{\n    for(int i=0;i&lt;size;i++)\n    {\n        string name = path;\n        name+=i;\n        tab[i]-&gt;Save(name);\n    }\n}\n\nint main()\n{\n    cout&lt;&lt;\"Hello World!\"&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>Now, i dont have to include all .h and .cpp files of classes because they work just fine, the problem appeared when i tried to add this funcion. I have just no idea why this isnt working.\nSave is a virtual method thats depending on class calculates data for circle and triangle and saves the data as string to .txt file.</p>\n\n<blockquote>\n  <p>expected nested-name-specifier before 'namespace'\n   using namespace std;\n         ^</p>\n  \n  <p>'string' does not name a type  void funkcja (Shape **tab, int size,\n  const string &amp; path)\n                                              ^</p>\n  \n  <p>expected '}' at end of input  }  ^</p>\n  \n  <p>'string' was not declared in this scope\n           string name = path;\n           ^</p>\n  \n  <p>'name' was not declared in this scope\n           name+=i;\n           ^ 'cout' was not declared in this scope\n       cout&lt;&lt;\"Hello World!\"&lt;\n  \n  <p>endl not declared, cout not declared etc.</p>\n</blockquote>\n\n<pre><code>#ifndef SHAPE_H\n#define SHAPE_H\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\n\nclass Shape\n{\npublic:\n    struct Point\n    {\n        float x, y;\n    };\n    virtual bool Save(const std::string &amp;) = 0;\n};\n\n#endif // SHAPE_H\n\n#ifndef TRIANGLE_H\n#define TRIANGLE_H\n#include \"shape.h\"\n\nclass Triangle : public Shape\n{\n    Point a, b, c;\npublic:\n    Triangle(Point a, Point b, Point c) : a(a),b(b),c(c) {}\n    bool Save(const std::string &amp; sciezka);\n};\n\n#endif // TRIANGLE_H\n\n#include \"triangle.h\"\n#include &lt;fstream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nbool Triangle::Save(const std::string &amp; sciezka)\n{\n    fstream plik;\n    plik.open(sciezka,ios::out);\n    if(plik.good())\n    {\n        float ab, bc, ac;\n        ab = sqrt(pow(b.x-a.x,2)+(pow(b.y-b.x,2)));\n        bc = sqrt(pow(c.x-b.x,2)+(pow(c.y-b.x,2)));\n        ac = sqrt(pow(c.x-a.x,2)+(pow(c.y-a.x,2)));\n        float obw = ab+bc+ac;\n        float p = (obw)*0.5;\n        float P = sqrt(p*(p-ab)*(p-bc)*(p-ac));\n        plik&lt;&lt;\"Triangle\"&lt;&lt;endl;     //Napis\n        plik&lt;&lt;a.x&lt;&lt;\" \"&lt;&lt;a.y&lt;&lt;endl;  //Wsp\u00f3\u0142rz\u0119dne punkt\u00f3w\n        plik&lt;&lt;b.x&lt;&lt;\" \"&lt;&lt;b.y&lt;&lt;endl;\n        plik&lt;&lt;c.x&lt;&lt;\" \"&lt;&lt;c.y&lt;&lt;endl;\n        plik&lt;&lt;obw&lt;&lt;endl;            //obw\u00f3d\n        plik&lt;&lt;P&lt;&lt;endl;              //Pole\n        plik.close();\n        return true;\n    }\n    else return false;\n}\n\n#ifndef CIRCLE_H\n#define CIRCLE_H\n#include \"shape.h\"\n\nclass Circle : public Shape\n{\n    Point a;\n    float r;\npublic:\n    Circle(Point a, const float r) : a(a),r(r) {}\n    bool Save(const std::string &amp; sciezka);\n\n#endif // CIRCLE_H\n\n\n#include \"circle.h\"\n#include &lt;fstream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nbool Circle::Save(const std::string &amp;sciezka)\n{\n    fstream plik;\n    plik.open(sciezka, ios::out);\n    if(plik.good())\n    {\n        float obwod = 2*M_PI*r;\n        float P = M_PI*r*r;\n        plik&lt;&lt;\"Circle\"&lt;&lt;endl;\n        plik&lt;&lt;a.x&lt;&lt;\" \"&lt;&lt;a.y&lt;&lt;endl;\n        plik&lt;&lt;r&lt;&lt;endl;\n        plik&lt;&lt;obwod&lt;&lt;endl;\n        plik&lt;&lt;P&lt;&lt;endl;\n        return true;\n    }\n    else return false;\n}\n</code></pre>\n"}, {"tags": ["c++", "eclipse"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1531348741, "post_id": 51294744, "comment_id": 89567698, "body": "That&#39;s a big tent with a lot of possibilities. I recommend adding the Eclipse version, the CDT version, the GDB version and the GCC version to the question."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1531392691, "post_id": 51294744, "comment_id": 89584016, "body": "I do not think that that is the IDE problem. Check the compiler flags. C++ exceptions are extremely costly, and not used to often in the embedded development."}, {"owner": {"reputation": 321, "user_id": 8694474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97659a955c605478604ad5252e73a28?s=128&d=identicon&r=PG&f=1", "display_name": "JuliusCaesar", "link": "https://stackoverflow.com/users/8694474/juliuscaesar"}, "edited": false, "score": 0, "creation_date": 1531428928, "post_id": 51294744, "comment_id": 89605280, "body": "I edited my first post. please have a look :)"}], "owner": {"reputation": 321, "user_id": 8694474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97659a955c605478604ad5252e73a28?s=128&d=identicon&r=PG&f=1", "display_name": "JuliusCaesar", "link": "https://stackoverflow.com/users/8694474/juliuscaesar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531428891, "creation_date": 1531346357, "last_edit_date": 1531428891, "question_id": 51294744, "link": "https://stackoverflow.com/questions/51294744/c-2-eclipse-based-ides-1-catches-exceptions-the-other-doesnt", "title": "C++ 2 Eclipse Based IDEs, 1 catches exceptions, the other doesn&#39;t", "body": "<p>I'm a little stuck at the moment.\nI have been working on a C++ project lately but i'm having trouble with exceptions.\nThe target is an STM32.\nI set up 2 projects using STs Cube MX Code Generator.\nThe code executed is</p>\n\n<pre><code>try\n    {\n        throw 1;\n    }\n    catch(const int&amp; ex)\n    {\n        configASSERT(0);\n    }\n</code></pre>\n\n<p>My used IDE (SW4STM32, eclipse based, g++) fails to catch the exception. I'm always running into the termination handler. The other IDE (atolic true studio, eclipse based, g++) catches the exception.</p>\n\n<p>Therefore it's not a target problem but an IDE problem. I already did remove the fno-exceptions from the g++ compiler and the linker options. But still no luck.\nDo you have any others ideas on where to look?</p>\n\n<p>Thx :)</p>\n\n<p>Edit:\nSW4STM32 Compiler Flags (Console Output)</p>\n\n<pre><code>22:40:11 **** Incremental Build of configuration Debug for project Test_Exceptions_AC6 ****\nmake -j4 all \nBuilding file: ../Core/Src/User/Test/Test.cpp\nInvoking: MCU G++ Compiler\nTest_Exceptions_AC6\\Debug\narm-none-eabi-g++ -mcpu=cortex-m4 -mthumb -mfloat-abi=hard -mfpu=fpv4-sp-d16 '-D__weak=__attribute__((weak))' '-D__packed=__attribute__((__packed__))' -DUSE_HAL_DRIVER -DSTM32F429xx -I\"xxx/Test_Exceptions_AC6/Core/Inc\" -I\"xxx/Test_Exceptions_AC6/Core/Inc/User\" -I\"xxx/Test_Exceptions_AC6/Drivers/STM32F4xx_HAL_Driver/Inc\" -I\"xxx/Test_Exceptions_AC6/Drivers/STM32F4xx_HAL_Driver/Inc/Legacy\" -I\"xxx/Test_Exceptions_AC6/Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM4F\" -I\"xxx/Test_Exceptions_AC6/Drivers/CMSIS/Device/ST/STM32F4xx/Include\" -I\"xxx/Test_Exceptions_AC6/Middlewares/Third_Party/FreeRTOS/Source/include\" -I\"xxx/Test_Exceptions_AC6/Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS\" -I\"xxx/Test_Exceptions_AC6/Drivers/CMSIS/Include\"  -Og -g3 -Wall -fmessage-length=0 -ffunction-sections -c -fno-rtti -MMD -MP -MF\"Core/Src/User/Test/Test.d\" -MT\"Core/Src/User/Test/Test.o\" -o \"Core/Src/User/Test/Test.o\" \"../Core/Src/User/Test/Test.cpp\"\n../Core/Src/User/Test/Test.cpp: In function 'void Test_Func()':\n../Core/Src/User/Test/Test.cpp:56:21: warning: unused variable 'n_elements' [-Wunused-variable]\n   volatile uint32_t n_elements = test_custom_list.size();\n                     ^~~~~~~~~~\nFinished building: ../Core/Src/User/Test/Test.cpp\n</code></pre>\n\n<p>SW4STM32 Linker Output</p>\n\n<pre><code>Building target: Test_Exceptions_AC6.elf\nInvoking: MCU G++ Linker\narm-none-eabi-g++ -mcpu=cortex-m4 -mthumb -mfloat-abi=hard -mfpu=fpv4-sp-d16 -specs=nosys.specs -specs=nano.specs -T\"../STM32F429ZITx_FLASH.ld\" -Wl,-Map=output.map -Wl,--gc-sections -fno-rtti -o \"Test_Exceptions_AC6.elf\" @\"objects.list\"   -lm\nFinished building target: Test_Exceptions_AC6.elf\n\nmake --no-print-directory post-build\nGenerating hex and Printing size information:\narm-none-eabi-objcopy -O ihex \"Test_Exceptions_AC6.elf\" \"Test_Exceptions_AC6.hex\"\narm-none-eabi-size \"Test_Exceptions_AC6.elf\"\n   text    data     bss     dec     hex filename\n</code></pre>\n\n<p>Attolic Output</p>\n\n<pre><code>   22:46:09 **** Incremental Build of configuration Debug for project Exceptions_True_Studio ****\nInfo: Internal Builder is used for build\narm-atollic-eabi-g++ -c ..\\Core\\Src\\User\\Test\\Test.cpp -mthumb -mcpu=cortex-m4 -mfloat-abi=hard -mfpu=fpv4-sp-d16 -std=c++14 -DSTM32F10X_MD -DSTM32F429xx -D__packed=__attribute__((__packed__)) -D__weak=__attribute__((weak)) -DUSE_STDPERIPH_DRIVER -I../Core/Inc/User -I../Core/Inc/ -I../Drivers/CMSIS/Include -I../Middlewares/Third_Party/FreeRTOS/Source/include -I../Drivers/CMSIS/Device/ST/STM32F4xx/Include -I../Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM4F -I../Drivers/STM32F4xx_HAL_Driver/Inc/Legacy -I../Drivers/STM32F4xx_HAL_Driver/Inc -I../Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS -O0 -ffunction-sections -g -fstack-usage -Wall -Wextra -Wfatal-errors -Wmissing-include-dirs -Wswitch-default -Wswitch-enum -fno-threadsafe-statics -o Core\\Src\\User\\Test\\Test.o \n..\\Core\\Src\\User\\Test\\Test.cpp: In function 'void Test_Func()':\n..\\Core\\Src\\User\\Test\\Test.cpp:47:21: warning: unused variable 'n_elements' [-Wunused-variable]\n   volatile uint32_t n_elements = test_custom_list.size();\n                     ^~~~~~~~~~\narm-atollic-eabi-g++ -o Exceptions_True_Studio.elf Core\\Src\\User\\Test\\Test.o Core\\Src\\crc.o Core\\Src\\dma2d.o Core\\Src\\fmc.o Core\\Src\\freertos.o Core\\Src\\gpio.o Core\\Src\\i2c.o Core\\Src\\ltdc.o Core\\Src\\main.o Core\\Src\\spi.o Core\\Src\\stm32f4xx_hal_msp.o Core\\Src\\stm32f4xx_hal_timebase_TIM.o Core\\Src\\stm32f4xx_it.o Core\\Src\\system_stm32f4xx.o Core\\Src\\tim.o Core\\Src\\usart.o Core\\Src\\usb_otg.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_cortex.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_crc.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_dma.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_dma2d.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_dma_ex.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_dsi.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_flash.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_flash_ex.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_flash_ramfunc.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_gpio.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_hcd.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_i2c.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_i2c_ex.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_ltdc.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_ltdc_ex.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_pwr.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_pwr_ex.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_rcc.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_rcc_ex.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_sdram.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_spi.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_tim.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_tim_ex.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_hal_uart.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_ll_fmc.o Drivers\\STM32F4xx_HAL_Driver\\Src\\stm32f4xx_ll_usb.o Middlewares\\Third_Party\\FreeRTOS\\Source\\CMSIS_RTOS\\cmsis_os.o Middlewares\\Third_Party\\FreeRTOS\\Source\\croutine.o Middlewares\\Third_Party\\FreeRTOS\\Source\\event_groups.o Middlewares\\Third_Party\\FreeRTOS\\Source\\list.o Middlewares\\Third_Party\\FreeRTOS\\Source\\portable\\GCC\\ARM_CM4F\\port.o Middlewares\\Third_Party\\FreeRTOS\\Source\\portable\\MemMang\\heap_4.o Middlewares\\Third_Party\\FreeRTOS\\Source\\queue.o Middlewares\\Third_Party\\FreeRTOS\\Source\\tasks.o Middlewares\\Third_Party\\FreeRTOS\\Source\\timers.o startup\\startup_stm32f429xx.o -mthumb -mcpu=cortex-m4 -mfloat-abi=hard -mfpu=fpv4-sp-d16 -T../STM32F429ZI_FLASH.ld -specs=nosys.specs -static -Wl,-cref,-u,Reset_Handler, -Wl,-Map=Exceptions_True_Studio.map -Wl,--gc-sections -Wl,--defsym=malloc_getpagesize_P=0x1000 -Wl,--start-group -lc -lm -lstdc++ -lsupc++ -Wl,--end-group \nC:\\Program Files (x86)\\Atollic\\TrueSTUDIO for STM32 9.0.1\\ide\\jre\\bin\\java -jar C:\\Program Files (x86)\\Atollic\\TrueSTUDIO for STM32 9.0.1\\Tools\\arm-atollic-reports.jar sizeinfo list Exceptions_True_Studio.elf \nGenerate build reports...\nPrint size information\n   text    data     bss     dec     hex filename\n 307304    1924  173124  482352   75c30 Exceptions_True_Studio.elf\nPrint size information done\nGenerate listing file\nOutput sent to: Exceptions_True_Studio.list\nGenerate listing file done\nGenerate build reports done\narm-atollic-eabi-objcopy.exe -O ihex Exceptions_True_Studio.elf Exceptions_True_Studio.hex \nInfo: Parallel threads used: 1\n\n22:46:21 Build Finished (took 12s.140ms)\n</code></pre>\n\n<p>Now as you can see, there is no fnoexceptions active. Therefore I'd expect to receive exceptions. :(</p>\n\n<p>SW4STM32 uses Eclipse Platform 4.6.3  Eclipse CDT 9.2.1\nAttolic uses Eclipse Platform 4.6.1, Eclipse CDT 9.1.0</p>\n\n<p>So the eclipse base versions are pretty similar.\nDo you have any other ideas?</p>\n"}, {"tags": ["c++", "linked-list", "tree", "breadth-first-search"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1531346017, "post_id": 51294647, "comment_id": 89566899, "body": "Your problem is with your choice of data structures. yes, a queue is dynamite for breadth traversals, but the very point of a queue is things only go in one way and out the other. No internal node access is typically allowed (or required, since you already know it&#39;s a queue and wouldn&#39;t be using it if you needed something else)."}, {"owner": {"reputation": 103, "user_id": 3914860, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fb78b8d723ea2dbb00615d265e10bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/3914860/sarah"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1531346162, "post_id": 51294647, "comment_id": 89566954, "body": "@WhozCraig You are right. Now my question is that does it add a copy of the node to the queue? Or it pushes the address of the node? (I added my queue in the question)"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1531348614, "post_id": 51294647, "comment_id": 89567674, "body": "@Sarah: The question shows a queue of pointers, so that would hold pointers (addresses). However, destroying what it points at leaves a stale pointer, so attempting to dereference that  pointer gives undefined behavior--quite possibly including getting the values in the deleted object (e.g., if that memory hasn&#39;t been used for anything else yet)."}, {"owner": {"reputation": 103, "user_id": 3914860, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fb78b8d723ea2dbb00615d265e10bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/3914860/sarah"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1531348912, "post_id": 51294647, "comment_id": 89567754, "body": "@JerryCoffin that`s true, I got some random values, Do you know any solution to avoid it?"}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 2, "last_activity_date": 1531349171, "creation_date": 1531349171, "answer_id": 51295151, "question_id": 51294647, "link": "https://stackoverflow.com/questions/51294647/how-to-delete-an-obj-in-queue-during-bfs-c/51295151#51295151", "title": "How to delete an obj in queue during BFS (C++)?", "body": "<p>One possibility would be to use <code>shared_ptr</code>s in the tree, and <code>weak_ptr</code>s in the queue. Using them is somewhat non-trivial, but the basic idea is that the <code>shared_ptr</code> has ownership of what it points at, and a <code>weak_ptr</code> gives the ability to observe the same things--but if the <code>shared_ptr</code> disposes of the object, the <code>weak_ptr</code> will let you know that what you're trying to look at has disappeared rather than attempting to use a pointer that's now stale.</p>\n"}], "owner": {"reputation": 103, "user_id": 3914860, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4fb78b8d723ea2dbb00615d265e10bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/3914860/sarah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531349171, "creation_date": 1531345753, "last_edit_date": 1531346359, "question_id": 51294647, "link": "https://stackoverflow.com/questions/51294647/how-to-delete-an-obj-in-queue-during-bfs-c", "title": "How to delete an obj in queue during BFS (C++)?", "body": "<p>I am writing a program that contains BFS in it. It will do BFS on a tree in which each node contains some attributes. I used the linked list to represent the tree.  My code is huge and I cannot post it here. This is a summary of what I do:</p>\n\n<p>During BFS I use a queue of the node types. </p>\n\n<pre><code>queue &lt;TreeNodes*&gt; my_queue;\n</code></pre>\n\n<p>And as in the usual BFS, I push and pop nodes in the queue. During the BFS I need to update the tree, means I might delete some nodes and update the tree.</p>\n\n<p>During the BFS I occur segmentation fault, and I know its reason but not sure how to address it.  </p>\n\n<p>Assume during BFS I pushed node \"x\" into the queue. Then in the next iterations while I am poping out node \"y\" I might delete node \"x\", while it is still in the queue. This makes an issue once I pop out \"x\". </p>\n\n<p>Initially, I thought if I delete this node by a pointer in the tree, it would automatically delete it from queue too. But seems once I push a node into the queue, it pushes a copy of it. I am not sure how I can actually delete it from the queue, or at least once I delete it from the tree make it null. Becuase it is not actually null and points to nowhere and has some random numbers as its attributes in it. </p>\n\n<p>I did not know that what I should search so I asked it here. </p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 1, "creation_date": 1531346156, "post_id": 51294585, "comment_id": 89566953, "body": "That because you are passing a pointer to a non-const object, i.e. <code>T *</code>, so <code>void Print(const T* obj)</code> doesn&#39;t match in the first place.  On the other hand <code>void Print(T * const obj)</code> would probably work."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1531346396, "post_id": 51294585, "comment_id": 89567046, "body": "In the future, I suggest simplifying code examples as much as possible, removing all unnecessary parts. You can demonstrate the same issue with <a href=\"http://coliru.stacked-crooked.com/a/488b11155bb69a76\" rel=\"nofollow noreferrer\">just a few lines</a>."}, {"owner": {"reputation": 33, "user_id": 4852731, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PeVOZWaQa9Y/AAAAAAAAAAI/AAAAAAAAAi0/Nu2BA2wGONY/photo.jpg?sz=128", "display_name": "Brad Hallisey", "link": "https://stackoverflow.com/users/4852731/brad-hallisey"}, "edited": false, "score": 1, "creation_date": 1531346862, "post_id": 51294585, "comment_id": 89567183, "body": "Henri Menki - (const T* obj) and (T* const Obj) are different things though and in this case I want the object const, not the pointer. However, you are correct that if I create a const Printer* print2Ptr and pass that, it correctly resolves.   I&#39;m not sure that helps my use case, as forcing users of the API to do that isn&#39;t realistic.  I will have to think about it more."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4852731, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PeVOZWaQa9Y/AAAAAAAAAAI/AAAAAAAAAi0/Nu2BA2wGONY/photo.jpg?sz=128", "display_name": "Brad Hallisey", "link": "https://stackoverflow.com/users/4852731/brad-hallisey"}, "edited": false, "score": 0, "creation_date": 1531348802, "post_id": 51294908, "comment_id": 89567719, "body": "Yet if I do this, it has no problem resolving. void Print(const Printer&amp; obj) { obj.Print(); } void Print(const Printer* obj) { obj-&gt;Print(); } Print(print1); Print(&amp;print2);  Asking users of the API to cast the pointer first isn&#39;t satisfactory.  I think the next best solution is to change the function name."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1531362756, "post_id": 51294908, "comment_id": 89570426, "body": "You have the meanings backwards. A <code>const T*</code> points at an object as though that object were const, and a <code>T* const</code> always points at the same object, which is not const."}, {"owner": {"reputation": 351, "user_id": 9374752, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mojomoko", "link": "https://stackoverflow.com/users/9374752/mojomoko"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1531392135, "post_id": 51294908, "comment_id": 89583676, "body": "@aschepler You are right. Which also alters the reasoning about the problem, therefore I have changed my answer rather drastically"}, {"owner": {"reputation": 351, "user_id": 9374752, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mojomoko", "link": "https://stackoverflow.com/users/9374752/mojomoko"}, "reply_to_user": {"reputation": 33, "user_id": 4852731, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PeVOZWaQa9Y/AAAAAAAAAAI/AAAAAAAAAi0/Nu2BA2wGONY/photo.jpg?sz=128", "display_name": "Brad Hallisey", "link": "https://stackoverflow.com/users/4852731/brad-hallisey"}, "edited": false, "score": 0, "creation_date": 1531393330, "post_id": 51294908, "comment_id": 89584468, "body": "@BradHallisey if you want your objects to be const, you should make them const constructible. If you want your objects to be unchanged during the function call - like using const T&amp; , you chose the right pointer semantics. Notice however that such a pointer needs the const qualifier for users. If you don&#39;t want to force your users to use const qual. you could introduce yet another function taking a w/r ptr, which calls your function taking const T&amp; as a parameter with the dereferenced pointer."}], "tags": [], "owner": {"reputation": 351, "user_id": 9374752, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mojomoko", "link": "https://stackoverflow.com/users/9374752/mojomoko"}, "is_accepted": false, "score": 2, "last_activity_date": 1531393772, "last_edit_date": 1531393772, "creation_date": 1531347369, "answer_id": 51294908, "question_id": 51294585, "link": "https://stackoverflow.com/questions/51294585/template-specialization-const-versus-const/51294908#51294908", "title": "Template Specialization: Const&amp; versus Const*", "body": "<p>Your problem is not connected to templates, but to pointer semantics and function overloading.</p>\n\n<p>That is because you ask in the second case for a pointer to a const object. Which means that the pointer would have read-only rights. \nBy passing the reference of a non-const object you pass something like a pointer value which has read/write rights - But you have no function overload for such a pointer. If you meant to use read-only pointers you must declare them as such:</p>\n\n<pre><code>const T* ptr = ...\nT* const ptr = ...\n</code></pre>\n\n<p>Before passing them to your function. </p>\n\n<p>Notice that such a pointer is needed if it points to a const object. But that such a pointer could be reassigned to a non-const object (but still having only read-only access).  Especially does such a pointer do not turn your object into a const object - only protecting the object from changes through such a pointer...</p>\n\n<p>a work around would be either introducing a third function:</p>\n\n<pre><code>template&lt;T&gt;\nPrint(T* obj){ \n  const T* ptr = obj;\n  Print(ptr);\n}\n</code></pre>\n\n<p>as aschepler suggested. \nOr changing your pointer function to take any pointer and use the const reference function:</p>\n\n<pre><code>template&lt;T&gt;\nPrint(T* obj){\n  Print((*obj));\n}\n</code></pre>\n\n<p>But I would argue that those work arounds obscure your interface as it is not obvious what happens with your object from your function signatures alone. Some problem you wouldn't have with your variant, forcing your users to use read-only pointer. </p>\n"}, {"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1531363973, "post_id": 51295785, "comment_id": 89570667, "body": "Another simple workaround: add a third overload <code>template &lt;typename T&gt; void Print(T* ptr) { const T* cptr = ptr; Print(cptr); }</code>"}, {"owner": {"reputation": 33, "user_id": 4852731, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PeVOZWaQa9Y/AAAAAAAAAAI/AAAAAAAAAi0/Nu2BA2wGONY/photo.jpg?sz=128", "display_name": "Brad Hallisey", "link": "https://stackoverflow.com/users/4852731/brad-hallisey"}, "edited": false, "score": 0, "creation_date": 1531414251, "post_id": 51295785, "comment_id": 89598373, "body": "aschepler - Yes, I like this workaround.  Keeps the API simple! Although the downside is that it isn&#39;t apparent to the caller that the API contract guarantees non-mutation of their object."}, {"owner": {"reputation": 33, "user_id": 4852731, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PeVOZWaQa9Y/AAAAAAAAAAI/AAAAAAAAAi0/Nu2BA2wGONY/photo.jpg?sz=128", "display_name": "Brad Hallisey", "link": "https://stackoverflow.com/users/4852731/brad-hallisey"}, "edited": false, "score": 0, "creation_date": 1531414606, "post_id": 51295785, "comment_id": 89598528, "body": "Jarod42 - Interesting.  I will tinker with this some.  Thanks!"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 4, "last_activity_date": 1531355046, "creation_date": 1531355046, "answer_id": 51295785, "question_id": 51294585, "link": "https://stackoverflow.com/questions/51294585/template-specialization-const-versus-const/51295785#51295785", "title": "Template Specialization: Const&amp; versus Const*", "body": "<p>With</p>\n\n<pre><code>template&lt;class T&gt; void Print(const T&amp; obj); // #1\ntemplate&lt;class T&gt; void Print(const T* obj); // #2\n</code></pre>\n\n<p>For</p>\n\n<pre><code>TemplateTester tester;\ntester.Print(print1);  // call #1 with T=Printer (#2 is not viable)\ntester.Print(&amp;print2); // call #1 with T=Printer* (#1 is a better match than #2)\n</code></pre>\n\n<p>As you can see in (not trivial) <a href=\"https://en.cppreference.com/w/cpp/language/overload_resolution\" rel=\"nofollow noreferrer\">overload_resolution</a> rules, #1 is a better match than #2 for <code>Printer*</code>:</p>\n\n<p><code>Printer*</code> -> <code>Printer* const &amp;</code> (exact match)<br>\nversus<br>\n<code>Printer*</code> -> <code>const Printer*</code>. (conversion)</p>\n\n<p>There are several workarounds, for example tag dispatching:</p>\n\n<pre><code>class TemplateTester\n{\nprivate:\n    template &lt;typename T&gt;\n    void Print(const T&amp; obj, std::false_type) {obj.PrintNewline();}\n\n    template &lt;typename T&gt;\n    void Print(const T* obj, std::true_type) {obj-&gt;Print(); /*obj-&gt;Test();*/}\npublic:\n    template &lt;typename T&gt;\n    void Print(T&amp;&amp; obj) {\n        Print(obj, std::is_pointer&lt;std::decay_t&lt;T&gt;&gt;{});\n    }\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/1c49394b9bf4a606\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 4852731, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PeVOZWaQa9Y/AAAAAAAAAAI/AAAAAAAAAi0/Nu2BA2wGONY/photo.jpg?sz=128", "display_name": "Brad Hallisey", "link": "https://stackoverflow.com/users/4852731/brad-hallisey"}, "is_accepted": false, "score": 0, "last_activity_date": 1531436961, "creation_date": 1531436961, "answer_id": 51315640, "question_id": 51294585, "link": "https://stackoverflow.com/questions/51294585/template-specialization-const-versus-const/51315640#51315640", "title": "Template Specialization: Const&amp; versus Const*", "body": "<p>Putting together things from a few answers.  I think I understand why this happens now and why promoting the pointer to const pointer doesn't work as it would with a normal function call.</p>\n\n<p>If I understand @Jarod42 response correctly, it is because T is being evaluated in the template as <code>Printer*</code> not as <code>Printer</code>!  Which makes sense in retrospect.  It then decays T into Printer&amp; or Printer* for evaluation inside the scope block but happens after it has chosen the function signature.  </p>\n\n<p>Here is a chunk of code that brings it all together.  It includes some examples of different constness since there was some earlier confusion about that.  Thanks for all the contributions everyone!</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename T&gt;\nvoid Print(T&amp; obj) { obj.Print(); }\n\ntemplate &lt;typename T&gt;\nvoid Print(T* obj) { obj-&gt;Print(); }\n\ntemplate &lt;typename T&gt;\nvoid PrintNewline(const T&amp; obj) { obj.PrintNewline(); }\n\ntemplate &lt;typename T&gt;\nvoid PrintNewline(const T* obj) { obj-&gt;PrintNewline(); }\n\ntemplate &lt;typename T&gt;\nvoid BetterPrint(const T&amp; obj, std::false_type) { obj.PrintNewline(); }\n\ntemplate &lt;typename T&gt;\nvoid BetterPrint(const T* obj, std::true_type) { obj-&gt;PrintNewline(); }\n\ntemplate &lt;typename T&gt;\nvoid PrintChooser(T&amp;&amp; obj) { BetterPrint(obj, std::is_pointer&lt;std::decay_t&lt;T&gt;&gt;{}); }\n\n\nclass Printer\n{\npublic:\n    void Print() const          { std::cout &lt;&lt; m_string.c_str(); }\n    void PrintNewline() const   { std::cout &lt;&lt; m_string.c_str() &lt;&lt; \"\\n\"; }\n\n    void Test() { m_string = \"Oops\";  } // Not const!\n\n    std::string m_string;\n};\n\n\nvoid Test1(const Printer* val)\n{ \n    val-&gt;Print();\n//    val-&gt;Test();  // Object type is const Printer.\n    val = nullptr;\n}\n\nvoid Test2(Printer const* val)\n{\n    val-&gt;Print();\n//    val-&gt;Test();  // Object type is const Printer.\n    val = nullptr;\n}\n\nvoid Test3(Printer* const val)\n{\n    val-&gt;Print();\n    val-&gt;Test();\n//    val = nullptr;    // you cannont assign to a value that is const\n}\n\n\nint main()\n{\n    Printer print1, print2;\n    print1.m_string = \"Hello\";\n    print2.m_string = \"World\";\n\n    Print(print1);  // Print(T&amp;) as expected.\n    Print(&amp;print2); // Print(T*) as expected.\n    PrintNewline(print1); // PrintNewline(const T&amp;) as expected\n//    PrintNewline(&amp;print1); // PrintNewline(const T&amp;) but expected PrintNewline(const T*) - Won't compile\n\n    const Printer* print2Ptr = &amp;print2; // Making user of your API do this is first isn't a happy place.\n    PrintNewline(print2Ptr); // PrintNewline(const T*) as expected.\n\n    PrintChooser(print1);\n    PrintChooser(&amp;print2);  // Happiness\n\n    Test1(&amp;print1); // Promotes correctly\n    Test2(&amp;print1); // Promotes correctly\n    Test3(&amp;print1); // Promotes correctly\n\n    Test1(print2Ptr); // Pointer const matches\n    Test2(print2Ptr); // Pointer const matches\n//    Test3(print2Ptr); // Fails to compile, funciton takes a pointer to a non-cost object.\n\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4852731, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PeVOZWaQa9Y/AAAAAAAAAAI/AAAAAAAAAi0/Nu2BA2wGONY/photo.jpg?sz=128", "display_name": "Brad Hallisey", "link": "https://stackoverflow.com/users/4852731/brad-hallisey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1531436961, "creation_date": 1531345380, "last_edit_date": 1531345899, "question_id": 51294585, "link": "https://stackoverflow.com/questions/51294585/template-specialization-const-versus-const", "title": "Template Specialization: Const&amp; versus Const*", "body": "<p>The following code works as expected and prints:</p>\n\n<blockquote>\n  <p>Hello</p>\n  \n  <p>World End</p>\n</blockquote>\n\n<pre><code>class TemplateTester\n{\npublic:\n\n    template&lt;class T&gt;\n    void Print(T&amp; obj) { obj.PrintNewline(); }\n\n    template&lt;class T&gt;\n    void Print(T* obj) { obj-&gt;Print(); /*obj-&gt;Test();*/ }\n};\n\nclass Printer\n{\npublic:\n    void PrintNewline() const   { std::cout &lt;&lt; m_string.c_str() &lt;&lt; \"\\r\\n\"; }\n    void Print() const          { std::cout &lt;&lt; m_string.c_str(); }\n\n    void Test() { m_string = \"Oops\";  }\n\n    std::string m_string;\n};\n\nint main()\n{\n    Printer print1, print2;\n    print1.m_string = \"Hello\";\n    print2.m_string = \"World\";\n\n    TemplateTester tester;\n    tester.Print(print1);\n    tester.Print(&amp;print2);\n\n    std::cout &lt;&lt; \" End \";\n\n    return 0;\n}\n</code></pre>\n\n<p>However, if you change the Print functions to </p>\n\n<blockquote>\n  <p>void Print(const T&amp; obj) </p>\n  \n  <p>void Print(const T* obj)</p>\n</blockquote>\n\n<p>it always prefers the const reference flavor.  </p>\n\n<p>I read up a bit on Template Argument deduction but nothing jumped out at me.<br>\nCan anyone explain this to me and/or suggest a reasonable work around?</p>\n"}, {"tags": ["c++", "optimization", "dlib", "member-function-pointers"], "answers": [{"tags": [], "owner": {"reputation": 245, "user_id": 10025445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c215777ec0036f32d949a80dbf259345?s=128&d=identicon&r=PG&f=1", "display_name": "acade", "link": "https://stackoverflow.com/users/10025445/acade"}, "is_accepted": true, "score": 0, "last_activity_date": 1531391016, "creation_date": 1531391016, "answer_id": 51303171, "question_id": 51294567, "link": "https://stackoverflow.com/questions/51294567/member-function-pointer-using-dlib-was-not-declared-in-this-scope/51303171#51303171", "title": "member function pointer using dlib was not declared in this scope", "body": "<p>findError is member method, but isn't pointer.\nFor creating pointer to method use next syntax:\n<em>return value</em> (<em>class_name</em>::* <em>pointer_name</em>)(<em>method arguments</em>);\nSample:</p>\n\n<pre><code>class widget\n{\npublic:\n    unsigned char foo(long long, double) {}\n};\nint main()\n{\n    // declaration of pointer\n    unsigned char (widget::*ptr_to_method)(long long, double);\n    // setting the pointer on certain method in class (not object!)\n    ptr_to_method = &amp;widget::foo;\n    // we have some object of widget class\n    widget obj{};\n    // using the pointer\n    unsigned char res = (obj.*ptr_to_method)(10L, 10.0); // arguments\n    // if we have obj as widget*, we'll use -&gt;* syntax to call method\n}\n</code></pre>\n\n<p>In this sample we used local pointer, may be you would to use global pointer.\nRead more, for example, <a href=\"https://isocpp.org/wiki/faq/pointers-to-members\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 6777901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afaff941574168bd52fbc48e0784eda0?s=128&d=identicon&r=PG&f=1", "display_name": "Amin Ben", "link": "https://stackoverflow.com/users/6777901/amin-ben"}, "is_accepted": false, "score": 1, "last_activity_date": 1531411159, "last_edit_date": 1531411159, "creation_date": 1531410736, "answer_id": 51309952, "question_id": 51294567, "link": "https://stackoverflow.com/questions/51294567/member-function-pointer-using-dlib-was-not-declared-in-this-scope/51309952#51309952", "title": "member function pointer using dlib was not declared in this scope", "body": "<p>based on the answer of <a href=\"https://stackoverflow.com/users/10025445/acade\">acade</a>, the issue of comiling is solved. But I add here my solution as an answer to solve the use of Dlib library</p>\n\n<pre><code> #include &lt;iostream&gt;\n #include &lt;vector&gt;\n #include &lt;cmath&gt;\n #include &lt;dlib/optimization.h&gt;\n class Point\n {\n    int _x, _y;\n public:\n    Point(int x, int y): _x(x), _y(y){}\n\n    double findError(const double&amp; psi)\n    {\n        auto err = std::erf(_x - psi) - std::erf(_y-psi);\n        return std::pow(err,2);\n    }\n    double optimize(double &amp;psiValue, dlib::matrix&lt;double,0,1&gt;&amp; lowerValues, dlib::matrix&lt;double,0,1&gt;&amp; upperValues)\n    {\n        auto lambdaError = [this](const double&amp; param) -&gt; double\n         { return this-&gt;findError(param);};\n\n        auto lambdaDerivativeError = [this](const double&amp; param) -&gt; double \n         {return dlib::derivative(lambdaError)(param);};\n\n        dlib::find_min_box_constrained(bfgs_search_strategy(),  \n                         objective_delta_stop_strategy(1e-9),\n                         lambdaError, lambdaDerivativeError, \n                         psiValue, lowerValues, upperValues);\n        return psiValue;\n    }\n\n\n };\n</code></pre>\n\n<p>the idea is to use parametrized Lambda functions that encapsulate the member functions </p>\n"}], "owner": {"reputation": 33, "user_id": 6777901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afaff941574168bd52fbc48e0784eda0?s=128&d=identicon&r=PG&f=1", "display_name": "Amin Ben", "link": "https://stackoverflow.com/users/6777901/amin-ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 51303171, "answer_count": 2, "score": 0, "last_activity_date": 1535600406, "creation_date": 1531345299, "last_edit_date": 1535600406, "question_id": 51294567, "link": "https://stackoverflow.com/questions/51294567/member-function-pointer-using-dlib-was-not-declared-in-this-scope", "title": "member function pointer using dlib was not declared in this scope", "body": "<p>I'm searching to optimize an error of approximation using the dlib library...\nso let's say I have Point (x,y) and a vector of values, which are used to find the minimum and fit the error locally, so I implemented this class:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;dlib/optimization.h&gt;\nclass Point\n{\n   int _x, _y;\npublic:\n    Point(int x, int y): _x(x), _y(y){}\n\n    double findError(const double&amp; psi)\n    {\n        auto err = std::erf(_x - psi) - std::erf(_y-psi);\n        return std::pow(err,2);\n    }\n    double optimize(const Point&amp; p, dlib::matrix&lt;double,0,1&gt; &amp;psiValues)\n    {\n         auto err = p-&gt;*findError ;\n         dlib::find_min_box_constrained(bfgs_search_strategy(),  \n                             objective_delta_stop_strategy(1e-9),  \n                             findError, derivative(findError), psiValues, {0.1,0.5,0.9},{0.1,0.4,0.8 });\n        return psiValues(0);\n    }\n};\n</code></pre>\n\n<p>and this code don't compile so I tried to extract the optimizer in a static class    like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cmath&gt;\n//#include &lt;dlib/optimization.h&gt;\nclass Point\n{\n   int _x, _y;\npublic:\n   Point(int x, int y): _x(x), _y(y){}\n\n    double findError(const double&amp; psi)\n   {\n       auto err = std::erf(_x - psi) - std::erf(_y-psi);\n       return std::pow(err,2);\n   }\n};\n\nclass Errorcalculator\n{\npublic:\n\n    static double optimize(const Point&amp; p, std::vector&lt;double&gt; &amp;psiValues)\n    {\n        auto err = p-&gt;*findError ;\n        // dlib::find_min_box_constrained(bfgs_search_strategy(),  \n        //                     objective_delta_stop_strategy(1e-9),  \n        //                     p-&gt;*findError, derivative(p-&gt;*findError), psiValue, {0.1,0.9 },{0.1 0.8});\n        return 0.0;\n    }\n };\n</code></pre>\n\n<p>now I'm getting (the same compile error using dlib function with or without static keyword)</p>\n\n<blockquote>\n  <p>error: 'findError' was not declared in this scope</p>\n</blockquote>\n\n<p>How is it possible if the point p is declared as parameter? How can I use the dlib function wrapped in the class?</p>\n"}, {"tags": ["c++", "boost", "sha1", "boost-uuid", "boost-compute"], "comments": [{"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 1, "creation_date": 1531345404, "post_id": 51294528, "comment_id": 89566678, "body": "Using anything from a <code>detail</code> namespace is a doomed approach..."}, {"owner": {"reputation": 173, "user_id": 8234088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RZyYv.jpg?s=128&g=1", "display_name": "definename", "link": "https://stackoverflow.com/users/8234088/definename"}, "reply_to_user": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1531345530, "post_id": 51294528, "comment_id": 89566726, "body": "Do you by any chance know better way? :)"}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1531423050, "post_id": 51294528, "comment_id": 89602694, "body": "Maybe, if I knew what you&#39;re trying to accomplish. ;-] SHA1 is 160-bits and UUIDs are 128-bits \u2013 which data is being discarded, and why is Boost.Compute involved when you presumably just need to remove 32-bits from the input?"}, {"owner": {"reputation": 173, "user_id": 8234088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RZyYv.jpg?s=128&g=1", "display_name": "definename", "link": "https://stackoverflow.com/users/8234088/definename"}, "reply_to_user": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1531469822, "post_id": 51294528, "comment_id": 89616763, "body": "@ildjarn I am trying to generate unique uuid based on this string <code>&quot;b888e35f9edf3794760392e1066d69-f43d-452e-8475-a09bae9a2e850&zwnj;&#8203;0000000-0000-0000-00&zwnj;&#8203;00-000000000000&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 8234088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RZyYv.jpg?s=128&g=1", "display_name": "definename", "link": "https://stackoverflow.com/users/8234088/definename"}, "edited": false, "score": 0, "creation_date": 1531586391, "post_id": 51334208, "comment_id": 89656229, "body": "Solved my issue in the similar way. Thanks for detailed explanation."}], "tags": [], "owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "is_accepted": true, "score": 0, "last_activity_date": 1531528731, "last_edit_date": 1531528731, "creation_date": 1531527742, "answer_id": 51334208, "question_id": 51294528, "link": "https://stackoverflow.com/questions/51294528/generate-boostuuidsuuid-from-boostcomputedetailsha1/51334208#51334208", "title": "Generate boost::uuids::uuid from boost::compute::detail::sha1", "body": "<p>The proper, supported approach to getting a UUID from the SHA1 hash of an arbitrary string is as follows:</p>\n\n<pre><code>#include &lt;string_view&gt;\n#include &lt;boost/uuid/uuid.hpp&gt;\n#include &lt;boost/uuid/name_generator_sha1.hpp&gt;\n\nboost::uuids::uuid uuid_from_string(std::string_view const input) {\n    static constexpr boost::uuids::uuid ns_id{}; // \u2020null root, change as necessary\n    return boost::uuids::name_generator_sha1{ns_id}(input.data(), input.size());\n}\n</code></pre>\n\n<p><kbd><a href=\"https://wandbox.org/permlink/ZZirfWffV8FE0toI\" rel=\"nofollow noreferrer\"><strong>Online Demo</strong></a></kbd></p>\n\n<p>(<code>std::string_view</code> is used for exposition; use <code>std::string</code> or <code>char const*</code> or whatever as appropriate if this isn't ideal for you.)</p>\n\n<p>While this is the <em>correct</em> approach, there are two important notes:</p>\n\n<ol>\n<li><p>As per RFC 4122, you need to provide a namespace for your UUID; basically this is salt for your SHA1 hash. There are predefined namespaces for DNS names, URLs, ISO OIDs, and X.500 distinguished names, but as your input doesn't appear to match any of those you need to define your own; as indicated on the line marked \u2020, the null namespace is used here for exposition. A more detailed explanation of UUID namespaces can be found in this SO answer: <a href=\"https://stackoverflow.com/a/15395191/636019\">Generating v5 UUID. What is name and namespace?</a></p></li>\n<li><p>The output from this code will differ entirely from the output from the code in your question; <strong><em>iff</em></strong>  you need the output to match the old code you can do the following:</p>\n\n<pre><code>#include &lt;cstring&gt;\n#include &lt;string_view&gt;\n#include &lt;boost/endian/conversion.hpp&gt;\n#include &lt;boost/uuid/uuid.hpp&gt;\n#include &lt;boost/uuid/detail/sha1.hpp&gt;\n\nboost::uuids::uuid uuid_from_string_old(std::string_view const input) {\n    boost::uuids::detail::sha1::digest_type digest;\n    {\n        boost::uuids::detail::sha1 h;\n        h.process_bytes(input.data(), input.size());\n        h.get_digest(digest);\n    }\n\n    boost::uuids::uuid ret;\n    auto p = ret.begin();\n    for (std::size_t i{}; i != 4; p += 4, ++i) {\n        auto const d = boost::endian::native_to_big(digest[i]);\n        std::memcpy(p, &amp;d, 4);\n    }\n    return ret;\n}\n</code></pre>\n\n<p><kbd><a href=\"https://wandbox.org/permlink/lOweNH5ISYWTd2Uj\" rel=\"nofollow noreferrer\"><strong>Online Demo</strong></a></kbd></p>\n\n<p>This produces the same output, as can be seen from <a href=\"https://wandbox.org/permlink/8aOxb3gQnAxNRoUe\" rel=\"nofollow noreferrer\">this demo</a> using the old code with Boost 1.65.1. This goes against my commented policy of never directly using someone else's <code>detail</code> namespace, but unless you can find the magic namespace id (if one exists), this is the only approach using Boost that I'm aware of. N.b. this fixes a bug in the old Boost code for big-endian machines; if you need to retain that bug, change the call to <code>boost::endian::native_to_big</code> to invoke <code>boost::endian::endian_reverse</code> instead.</p></li>\n</ol>\n"}], "owner": {"reputation": 173, "user_id": 8234088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RZyYv.jpg?s=128&g=1", "display_name": "definename", "link": "https://stackoverflow.com/users/8234088/definename"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1145, "favorite_count": 0, "accepted_answer_id": 51334208, "answer_count": 1, "score": 1, "last_activity_date": 1531529580, "creation_date": 1531345132, "last_edit_date": 1531529580, "question_id": 51294528, "link": "https://stackoverflow.com/questions/51294528/generate-boostuuidsuuid-from-boostcomputedetailsha1", "title": "Generate boost::uuids::uuid from boost::compute::detail::sha1", "body": "<p>I am trying to generate <a href=\"https://www.boost.org/doc/libs/1_67_0/libs/uuid/doc/uuid.html\" rel=\"nofollow noreferrer\">boost::uuids::uuid</a> from <a href=\"https://www.boost.org/doc/libs/1_67_0/boost/compute/detail/sha1.hpp\" rel=\"nofollow noreferrer\">boost::compute::detail::sha1</a> in this way:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"boost/uuid/uuid.hpp\"\n#include \"boost/uuid/uuid_io.hpp\"\n#include \"boost/uuid/string_generator.hpp\"\n#include \"boost/compute/detail/sha1.hpp\"\n\nint main(int argc, char* argv[])\n{\n    try\n    {\n        boost::compute::detail::sha1 sha1(\"b888e35f9edf3794760392e1066d69-f43d-452e-8475-a09bae9a2e8500000000-0000-0000-0000-000000000000\");\n        std::string str = sha1;\n        boost::uuids::uuid uuid = boost::uuids::string_generator()(str); // ERROR HERE!!\n    }\n    catch (std::exception&amp; e)\n    {\n        std::cerr &lt;&lt; \"Error occurred: \" &lt;&lt; e.what() &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>But this code fails with error <code>Error occurred: invalid uuid string</code> (See above)</p>\n\n<p>I am using Visual Studio 2017, Boost 1.67</p>\n\n<p>Where is my mistake? How to generate boost::uuids::uuid from boost::compute::detail::sha1</p>\n\n<p>PS: That code worked on previous boost versions.</p>\n"}, {"tags": ["android", "c++", "googletest"], "answers": [{"tags": [], "owner": {"reputation": 230, "user_id": 5391110, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-U-bXY7gggl0/AAAAAAAAAAI/AAAAAAAAAAA/wrPo9fXmURA/photo.jpg?sz=128", "display_name": "Ulthran", "link": "https://stackoverflow.com/users/5391110/ulthran"}, "is_accepted": true, "score": 0, "last_activity_date": 1531493743, "creation_date": 1531493743, "answer_id": 51327902, "question_id": 51294474, "link": "https://stackoverflow.com/questions/51294474/google-test-android-vs-linux-expect-death-tests/51327902#51327902", "title": "Google Test: Android vs Linux EXPECT_DEATH Tests", "body": "<p>OK I figured it out. The problem was indeed arising from the assert in my function and not from EXPECT_DEATH. I don't know if this is just a feature of the project I'm working on (which had been developed for some time before I got to it) or if it is true of any Android build but NDEBUG was undefined, as in a release build. When I added \"APP_OPTIM := debug\" to my Application.mk file, it worked perfectly.</p>\n\n<p>I am still a little confused why an assert would seemingly halt execution when NDEBUG is undefined. Aren't asserts supposed to be ignored entirely in release builds?</p>\n\n<p>Credit to <a href=\"https://stackoverflow.com/questions/9140423/android-ndk-assert-h-problems\">this</a> question and answer for the solution.</p>\n"}], "owner": {"reputation": 230, "user_id": 5391110, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-U-bXY7gggl0/AAAAAAAAAAI/AAAAAAAAAAA/wrPo9fXmURA/photo.jpg?sz=128", "display_name": "Ulthran", "link": "https://stackoverflow.com/users/5391110/ulthran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 51327902, "answer_count": 1, "score": 0, "last_activity_date": 1531493743, "creation_date": 1531344790, "last_edit_date": 1531492526, "question_id": 51294474, "link": "https://stackoverflow.com/questions/51294474/google-test-android-vs-linux-expect-death-tests", "title": "Google Test: Android vs Linux EXPECT_DEATH Tests", "body": "<p>I am running into a problem while working on unit testing my system that I don't even know how to approach debugging. My code operates either on a linux machine with mock input or on an android device. I am using Google Test to run unit tests on it. I have it set up so that a call to \"$ make all\" will run my unit tests on both the linux machine and through adb shell on my device. This part is working fine.</p>\n\n<p>However, when I introduce a test with EXPECT_DEATH(...) in it, the linux build runs the same as usual but the android build stops at that test and appears to freeze (I have to Ctrl + C to stop execution). As I said, I'm not at all sure how to try to fix this problem as I can't seem to get any output or error messages from it.</p>\n\n<p>If you have any suggestions please let me know. If there is critical information I'm leaving out about my build, comment and I can add that in.</p>\n\n<p>Edit:</p>\n\n<p>When I run the function that I'm expecting to die outside of EXPECT_DEATH the same behavior occurs. This indicates that the assert in the function is working and EXPECT_DEATH is not doing what it should to handle that.</p>\n\n<p>Before: (Works fine on Linux build but not on Android build)</p>\n\n<pre><code>EXPECT_DEATH(pObj-&gt;fxn(deathlyParam), \"\");\n</code></pre>\n\n<p>After: (Same result on Android build; core dump error due to assert on Linux build which is what I would expect both times from the Android build)</p>\n\n<pre><code>EXPECT_EQ(pObj-&gt;fxn(deathlyParam), 0);\n</code></pre>\n\n<p>For reference, fxn() looks something like this:</p>\n\n<pre><code>int fxn(int param)\n{\n   assert(param != deathlyParam);\n   ...\n}\n</code></pre>\n\n<p>In light of this, it looks more like assert is acting improperly and not causing the error it should be. Therefore, EXPECT_DEATH has nothing to expect. </p>\n"}, {"tags": ["c++", "copy-elision", "as-if"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1531344890, "post_id": 51294438, "comment_id": 89566486, "body": "Your question title and body don&#39;t quite match. The first paragraph pretty much answers the title."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1531344928, "post_id": 51294438, "comment_id": 89566502, "body": "I don&#39;t really understand the question. You&#39;re asking as to the motivation, why was optional copy elision in the standard before 17?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1531345083, "post_id": 51294438, "comment_id": 89566563, "body": "Because performance."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1531345777, "post_id": 51294438, "comment_id": 89566807, "body": "Consider it this way:  copy elision expects that there are no side-effects.  Therefore, if the developer is putting side-effects in (especially necessary ones), they are messing up."}, {"owner": {"reputation": 1368, "user_id": 7014926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DByU.png?s=128&g=1", "display_name": "nnolte", "link": "https://stackoverflow.com/users/7014926/nnolte"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1531345856, "post_id": 51294438, "comment_id": 89566856, "body": "@Eljay I agree, but also the dev needs to know/find out about it then."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1531345974, "post_id": 51294438, "comment_id": 89566886, "body": "I&#39;d say copy elision has no expectations and doesn&#39;t care if there are side effects."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1559049811, "post_id": 51294438, "comment_id": 99291509, "body": "Because common sense, intuition, reasonable expectation, decent coding practice..."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1531345071, "post_id": 51294507, "comment_id": 89566556, "body": "How do you define &quot;temporaries&quot;?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1531345167, "post_id": 51294507, "comment_id": 89566585, "body": "To make it more clear: A copy constructor should only copy things and as such a good copy constructor shouldn&#39;t have any side effects. Apart from theoretical code, it is highly unlikely that a copy constructor with side effects that break with copy elision exist."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1531345169, "post_id": 51294507, "comment_id": 89566588, "body": "Or the compiler cannot be expected to be able to actually <i>prove</i> there are no side-effects. Or the side-effects there are are of <i>no consequence</i>."}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1531345177, "post_id": 51294507, "comment_id": 89566593, "body": "@juanchopanza temporaries are <a href=\"https://en.cppreference.com/w/cpp/language/value_category#prvalue\" rel=\"nofollow noreferrer\">prvalues</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1531345209, "post_id": 51294507, "comment_id": 89566604, "body": "@juanchopanza I&#39;m using the term loosely. I haven&#39;t looked at all the cases to see if they share a common value category. I suspect they are all  at least some form of rvalue."}, {"owner": {"reputation": 1368, "user_id": 7014926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DByU.png?s=128&g=1", "display_name": "nnolte", "link": "https://stackoverflow.com/users/7014926/nnolte"}, "edited": false, "score": 0, "creation_date": 1531345218, "post_id": 51294507, "comment_id": 89566607, "body": "So it is really that the compiler cannot generally check for visible side effects?  Or would this just be too much effort?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1531345338, "post_id": 51294507, "comment_id": 89566660, "body": "@Tyker I don&#39;t think that would cover NRVO."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1368, "user_id": 7014926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DByU.png?s=128&g=1", "display_name": "nnolte", "link": "https://stackoverflow.com/users/7014926/nnolte"}, "edited": false, "score": 1, "creation_date": 1531345472, "post_id": 51294507, "comment_id": 89566699, "body": "@kawillzocken I would be surprised if a compiler could detect all possible side effects. It would need to be pessimist and required to prove the absence of side effects. But this optimization was so important at the time, I can see why they would opt to add an exception to ensure that it was always available as an option for the compiler. Without move semantics, it was very challenging to use the return value to <i>cheaply</i> pass large objects. Containers would need some shared state system, shared by copy, to avoid copying their content on being returned."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 1368, "user_id": 7014926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DByU.png?s=128&g=1", "display_name": "nnolte", "link": "https://stackoverflow.com/users/7014926/nnolte"}, "edited": false, "score": 0, "creation_date": 1531345714, "post_id": 51294507, "comment_id": 89566781, "body": "@kawillzocken No, it is that the compiler doesn&#39;t <i>have</i> to check at all because the language spec says it doesn&#39;t, and programmers know that and write code accordingly."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 5, "last_activity_date": 1531345079, "last_edit_date": 1531345079, "creation_date": 1531345009, "answer_id": 51294507, "question_id": 51294438, "link": "https://stackoverflow.com/questions/51294438/why-is-copy-elision-an-exception-to-the-as-if-rule/51294507#51294507", "title": "Why is copy elision an exception to the as-if rule?", "body": "<p>The cases that allow for this optimization involve copies of temporaries. Conceptually, these should have no visible effect but the language allows class writers to put whatever they want in a copy constructor.</p>\n\n<p>As such, copy constructors might sometimes actually have visible side effects. Strictly speaking, the as-if rule may not be applicable.</p>\n\n<p>It was deemed that this optimization was useful enough and the harm minimal enough to be worth including in the language. Consider that this optimization predates move semantics where return values would always be copied.</p>\n"}, {"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 2, "last_activity_date": 1531346384, "last_edit_date": 1531346384, "creation_date": 1531345650, "answer_id": 51294629, "question_id": 51294438, "link": "https://stackoverflow.com/questions/51294438/why-is-copy-elision-an-exception-to-the-as-if-rule/51294629#51294629", "title": "Why is copy elision an exception to the as-if rule?", "body": "<p>Proving things is hard, even if they are obviously true (whether they are true or not). Enabling the compiler to prove things in acceptable time is even harder. And then some side-effects <em>might not actually matter</em>, but how would you inform the compiler?</p>\n\n<p>While copy-elision <em>should</em> not violate the as-if-rule (at least if the compiler knew which side-effeects to ignore in its analysis), the programmer has the freedom to write his types so it does anyway.</p>\n\n<p>Finally, failure to prove that applying copy-elision does not violate the as-if-rule in a specific case might be very costly, as creating a copy of an object might be arbitrarily involved, needing time and space.</p>\n\n<p>Thus, copy-elision was made an exception to the as-if-rule, being allowed regardless.</p>\n\n<p>Now regarding guaranteed copy-elision, one has to concede that the rules are not necessarily completely obvious. Thus, it's a good thing that relying on it is only <em>(?)</em> necessary for performance, not correctness, at least where performance-requirements aren't too stringent..</p>\n"}], "owner": {"reputation": 1368, "user_id": 7014926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9DByU.png?s=128&g=1", "display_name": "nnolte", "link": "https://stackoverflow.com/users/7014926/nnolte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1531346384, "creation_date": 1531344661, "last_edit_date": 1531346165, "question_id": 51294438, "link": "https://stackoverflow.com/questions/51294438/why-is-copy-elision-an-exception-to-the-as-if-rule", "title": "Why is copy elision an exception to the as-if rule?", "body": "<p>Why does the standard allow my compiler to apply copy elision even when it involves visible side effects, thus breaks the as-if rule?</p>\n\n<p>It is somehow plausible'ish for me when one has guaranteed copy elision, because the actual functionality for copy/move (which would invoke visible changes in the program behaviour) does not necessarily have to exist, but why/how was this before C++17?</p>\n\n<p>Is it because a compiler can not generally detect side effects (I don't know whether this is possible)?</p>\n"}, {"tags": ["c++", "qt", "qt4"], "answers": [{"comments": [{"owner": {"reputation": 1013, "user_id": 1666926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/927ab8c64f7265f61514e8f9bd24b258?s=128&d=identicon&r=PG", "display_name": "MrMas", "link": "https://stackoverflow.com/users/1666926/mrmas"}, "edited": false, "score": 0, "creation_date": 1531347319, "post_id": 51294868, "comment_id": 89567318, "body": "Neither reparents...that&#39;s surprising. You did this with Qt4, correct?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 1013, "user_id": 1666926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/927ab8c64f7265f61514e8f9bd24b258?s=128&d=identicon&r=PG", "display_name": "MrMas", "link": "https://stackoverflow.com/users/1666926/mrmas"}, "edited": false, "score": 0, "creation_date": 1531347419, "post_id": 51294868, "comment_id": 89567353, "body": "@MrMas  Yes, I am using 4.8.7 :)"}, {"owner": {"reputation": 1013, "user_id": 1666926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/927ab8c64f7265f61514e8f9bd24b258?s=128&d=identicon&r=PG", "display_name": "MrMas", "link": "https://stackoverflow.com/users/1666926/mrmas"}, "edited": false, "score": 0, "creation_date": 1531347499, "post_id": 51294868, "comment_id": 89567381, "body": "So...you can make the action&#39;s parent the qactiongroup or the qmenu, but adding the action to the menu or the group doesn&#39;t reparent the action and so the menu and the group don&#39;t add the actions to a child list."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 1013, "user_id": 1666926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/927ab8c64f7265f61514e8f9bd24b258?s=128&d=identicon&r=PG", "display_name": "MrMas", "link": "https://stackoverflow.com/users/1666926/mrmas"}, "edited": false, "score": 1, "creation_date": 1531347754, "post_id": 51294868, "comment_id": 89567468, "body": "@MrMas  In fact, the parent that you pass to QAction will not be changed by QMenu or QActionGroup. It would not be good for QMenu to take ownership of the QAction since a QAction can be part of the QMenu and a QToolBar. and in the QActionGroup your task is to modify the state depending on the other QAction, there is no need to appropriate QAction. If you want to set QActionGroup or QMenu to be the parent then use setParent()"}, {"owner": {"reputation": 1013, "user_id": 1666926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/927ab8c64f7265f61514e8f9bd24b258?s=128&d=identicon&r=PG", "display_name": "MrMas", "link": "https://stackoverflow.com/users/1666926/mrmas"}, "edited": false, "score": 0, "creation_date": 1531350426, "post_id": 51294868, "comment_id": 89568080, "body": "In this case, I think the doubt came from ignorance."}, {"owner": {"reputation": 1013, "user_id": 1666926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/927ab8c64f7265f61514e8f9bd24b258?s=128&d=identicon&r=PG", "display_name": "MrMas", "link": "https://stackoverflow.com/users/1666926/mrmas"}, "edited": false, "score": 0, "creation_date": 1533668523, "post_id": 51294868, "comment_id": 90428142, "body": "Although not directly addressing the question, I believe it is important to keep in mind: QAction and QMenu never become parents (unless explicitly passed as the parent in the constructor), they do not hold any of the actions as children."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1531350687, "last_edit_date": 1531350687, "creation_date": 1531347151, "answer_id": 51294868, "question_id": 51294418, "link": "https://stackoverflow.com/questions/51294418/qt-who-is-the-parent-of-members-of-a-qactiongroup-after-it-is-added-to-a-qmenu/51294868#51294868", "title": "QT: Who is the parent of members of a QActionGroup after it is added to a QMenu?", "body": "<p>First let's check using the <code>parent()</code> method:</p>\n\n<pre><code>...\nleftAlignAct = new QAction(tr(\"&amp;Left Align\"), this);\nqDebug()&lt;&lt;\"0\"&lt;&lt;leftAlignAct-&gt;parent();\n...\nalignmentGroup-&gt;addAction(leftAlignAct);\nqDebug()&lt;&lt;\"1\"&lt;&lt;leftAlignAct-&gt;parent();\n...\nformatMenu-&gt;addAction(leftAlignAct);\nqDebug()&lt;&lt;\"2\"&lt;&lt;leftAlignAct-&gt;parent();\n...\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0 MainWindow(0x7fffd078fe80) \n1 MainWindow(0x7fffd078fe80) \n2 MainWindow(0x7fffd078fe80) \n</code></pre>\n\n<p>Clearly the parent of <code>QAction</code> never changed and this was established in his creation so the <code>QMenu</code> or the <code>QActionGroup</code> appropriate <code>QAction</code></p>\n\n<hr>\n\n<p>In fact, the parent that you pass to QAction will not be changed by QMenu or QActionGroup. It would not be good for QMenu to take ownership of the QAction since a QAction can be part of the QMenu and a QToolBar. and in the QActionGroup your task is to modify the state depending on the other QAction, there is no need to appropriate QAction. If you want to set QActionGroup or QMenu to be the parent then use setParent()</p>\n"}], "owner": {"reputation": 1013, "user_id": 1666926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/927ab8c64f7265f61514e8f9bd24b258?s=128&d=identicon&r=PG", "display_name": "MrMas", "link": "https://stackoverflow.com/users/1666926/mrmas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 51294868, "answer_count": 1, "score": 1, "last_activity_date": 1531350687, "creation_date": 1531344533, "question_id": 51294418, "link": "https://stackoverflow.com/questions/51294418/qt-who-is-the-parent-of-members-of-a-qactiongroup-after-it-is-added-to-a-qmenu", "title": "QT: Who is the parent of members of a QActionGroup after it is added to a QMenu?", "body": "<p>In <a href=\"http://doc.qt.io/archives/qt-4.8/qt-mainwindows-menus-example.html\" rel=\"nofollow noreferrer\">this example</a>, a handful of <code>QAction</code> objects are added to a <code>QActionGroup</code>. Then later, the same actions are added to <code>QMenu</code> as actions. The documentation for <code>QActionGroup</code> suggests adding a <code>QAction</code> by passing in the <code>QActionGroup</code> as the parent to the <code>QAction</code> construction. However, I believe adding an action to a <code>QMenu</code> makes the QMenu the parent. </p>\n\n<p>Who would be the parent in the example (i.e., action added to the action group first, then to the menu)?</p>\n\n<p>More generally, if you do an action that sets the parent, does the parent transfer completely (i.e., the object's parent gets set to the Menu <em>and</em> is deleted from the QActionGroup child list)? I would expect so, but I couldn't see this written anywhere and would like confirmation.</p>\n\n<p>I'm asking because I'm doing fairly innocuous actions but am seeing crashes that suggest double frees.</p>\n"}, {"tags": ["c++", "gcc", "optimization", "x86", "ieee-754"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1531343555, "post_id": 51294168, "comment_id": 89565961, "body": "Because the zero-flag isn&#39;t set to 0 <a href=\"https://c9x.me/x86/html/file_module_x86_id_316.html\" rel=\"nofollow noreferrer\">c9x.me/x86/html/file_module_x86_id_316.html</a>"}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1531344324, "post_id": 51294168, "comment_id": 89566274, "body": "Clang emits the same code in both cases."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "reply_to_user": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 2, "creation_date": 1531345295, "post_id": 51294168, "comment_id": 89566643, "body": "@HadiBrais it looks like a regression in gcc-8.1, I submitted a bug report <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=86497\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=86497</a>"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1531349223, "post_id": 51294168, "comment_id": 89567823, "body": "@ead: I can&#39;t edit your bug on bugzilla, but you should retitle it <code>[8&#47;9 regression] wasted instructions for x86 float x!=x</code> and add the missed-optimization tag.  So the gcc devs know it&#39;s not a correctness problem."}], "answers": [{"tags": [], "owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "is_accepted": true, "score": 2, "last_activity_date": 1531767563, "creation_date": 1531767563, "answer_id": 51368514, "question_id": 51294168, "link": "https://stackoverflow.com/questions/51294168/understanding-compilation-result-for-stdisnan/51368514#51368514", "title": "Understanding compilation result for std::isnan", "body": "<p>The result of <code>x!=x</code> is due to a <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=86497\" rel=\"nofollow noreferrer\">regression introduced to gcc-8</a>, clang produces the same assembler for both versions.</p>\n\n<p>My misunderstanding about the way <a href=\"https://c9x.me/x86/html/file_module_x86_id_316.html\" rel=\"nofollow noreferrer\"><code>ucomisd</code></a> is functioning was pointed out by @tkausl. The result of this operation can be:</p>\n\n<pre><code>        unordered       &lt;       &gt;       ==\nZF         1            0       0       1\nPF         1            0       1       0\nCF         1            1       0       0\n</code></pre>\n\n<p>In the case of <code>ucomisd %xmm0, %xmm</code> only the outcomes \"unordered\" and \"==\" are possible.</p>\n\n<p>The case of <code>NaN</code> is unordered and for this ZF is set the same as in  the case of <code>==</code>. Thus we can use the flags <code>PF</code> and <code>CF</code> to differentiate between two possible outcomes.</p>\n"}], "owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 51368514, "answer_count": 1, "score": 9, "last_activity_date": 1531767563, "creation_date": 1531343253, "last_edit_date": 1531367227, "question_id": 51294168, "link": "https://stackoverflow.com/questions/51294168/understanding-compilation-result-for-stdisnan", "title": "Understanding compilation result for std::isnan", "body": "<p>I always assumed, that there is practically no difference between testing for <code>NAN</code> via</p>\n\n<ul>\n<li><code>x!=x</code></li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li><code>std::isnan(x)</code></li>\n</ul>\n\n<p>However, gcc provides different assemblers for both versions (<a href=\"https://godbolt.org/g/BBFM3Q\" rel=\"nofollow noreferrer\">live on godbolt.org</a>):</p>\n\n<pre><code>  ;x!=x:\n  ucomisd %xmm0, %xmm0\n  movl $1, %edx\n  setne %al\n  cmovp %edx, %eax\n  ret\n\n  ;std::isnan(x)\n  ucomisd %xmm0, %xmm0\n  setp %al\n  ret\n</code></pre>\n\n<p>However, I'm struggling to understand both version. My naive try to compile <code>std::isnan(x)</code> would be:</p>\n\n<pre><code>  ucomisd %xmm0, %xmm0\n  setne %al   ;return true when not equal\n  ret\n</code></pre>\n\n<p>but I must be missing something.</p>\n\n<p>Probably, there is missed optimization in the <code>x!=x</code>-version (Edit: it is probably a <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=86497\" rel=\"nofollow noreferrer\">regression in gcc-8.1</a>).</p>\n\n<p>My question is, why is the parity flag (<a href=\"http://www.felixcloutier.com/x86/SETcc.html\" rel=\"nofollow noreferrer\"><code>setp</code></a>, <code>PF=1</code>)  and not the equal flag (<a href=\"http://www.felixcloutier.com/x86/SETcc.html\" rel=\"nofollow noreferrer\"><code>setne</code></a>, <code>ZF=0</code>) used in the second version?</p>\n"}, {"tags": ["c#", "c++", "crc", "code-translation"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 5, "creation_date": 1531343026, "post_id": 51294098, "comment_id": 89565773, "body": "So what is the problem? What have you tried doing in C++ that didn&#39;t work the same as in your C# version?"}, {"owner": {"reputation": 99, "user_id": 9964422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fba0bd9230caef66d07addacd20c852?s=128&d=identicon&r=PG&f=1", "display_name": "user9964422", "link": "https://stackoverflow.com/users/9964422/user9964422"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1531404136, "post_id": 51294098, "comment_id": 89591991, "body": "My problem is I do not know how to translate the code from c# to c++. However the answer i got below helped."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 9964422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fba0bd9230caef66d07addacd20c852?s=128&d=identicon&r=PG&f=1", "display_name": "user9964422", "link": "https://stackoverflow.com/users/9964422/user9964422"}, "edited": false, "score": 0, "creation_date": 1531399279, "post_id": 51294437, "comment_id": 89588456, "body": "should reg_crc = (byte)(reg_crc &amp; 0xFF); still be included?"}, {"owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "reply_to_user": {"reputation": 99, "user_id": 9964422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fba0bd9230caef66d07addacd20c852?s=128&d=identicon&r=PG&f=1", "display_name": "user9964422", "link": "https://stackoverflow.com/users/9964422/user9964422"}, "edited": false, "score": 1, "creation_date": 1532492045, "post_id": 51294437, "comment_id": 89990019, "body": "No it should not. The assignment already results in a byte."}], "tags": [], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "is_accepted": true, "score": 1, "last_activity_date": 1531344640, "creation_date": 1531344640, "answer_id": 51294437, "question_id": 51294098, "link": "https://stackoverflow.com/questions/51294098/how-do-i-translate-my-code-from-c-to-c-for-a-crc-function/51294437#51294437", "title": "How do I translate my code from C# to C++ for a CRC function?", "body": "<p>Arrays work a bit differently in C++. They're not objects; they're basically just a datatype repeated in memory <code>n</code> times. In your case, it'd be a <code>uint_8</code> repeated <code>RX_PACKET_SIZE</code> times. You don't pass the array itself; instead, you pass a pointer to the first element of the array. This is the C++ version of your code:</p>\n\n<pre><code>uint8_t crc_8(uint8_t* byteArray, size_t length)\n{\n    uint8_t reg_crc = 0;\n    for(int i = 0; i &lt; length; i++)\n    {\n        reg_crc ^= byteArray[i];\n        for(int j = 0; j &lt; 8; j++)\n        {\n            if((reg_crc &amp; 0x01) == 1)\n            {\n                reg_crc = (reg_crc &gt;&gt; 1) ^ 0xE5;\n            }\n            else\n            {\n                reg_crc = reg_crc &gt;&gt; 1;\n            }\n        }\n    }\n    return reg_crc;\n}\n</code></pre>\n\n<p>I changed the type of <code>reg_crc</code> to <code>uint8_t</code> because none of the operations you perform on it ever used the latter half of the bits. Given that you know the length is <code>RX_PACKET_SIZE</code>, we can also give <code>length</code> a default value:</p>\n\n<pre><code>uint8_t crc_8(uint8_t* byteArray, size_t length = RX_PACKET_SIZE)\n{\n    uint8_t reg_crc = 0;\n    for(int i = 0; i &lt; length; i++)\n    {\n        reg_crc ^= byteArray[i];\n        for(int j = 0; j &lt; 8; j++)\n        {\n            if((reg_crc &amp; 0x01) == 1)\n            {\n                reg_crc = (reg_crc &gt;&gt; 1) ^ 0xE5;\n            }\n            else\n            {\n                reg_crc = reg_crc &gt;&gt; 1;\n            }\n        }\n    }\n    return reg_crc;\n}\n</code></pre>\n\n<p><strong>Helpful note for the future:</strong></p>\n\n<p>The C++ standard library provides a class called <code>std::vector</code>. <code>std::vector</code> has the same abilities that an ArrayList does in C#, but because of the way C++ templates work, it'll likely be faster. </p>\n\n<p>You can write an overload for <code>crc_8</code> so that you can just pass it a vector:</p>\n\n<pre><code>// The &amp; after std::vector&lt;uint8_t&gt; means that it'll pass \n// by reference, instead of passing by value. Passing by  \n// reference is usually the preferable option because nothing\n// gets copied, making it much faster. \nuint8_t crc_8(std::vector&lt;uint8_t&gt;&amp; bytes) {\n    //This calls the the version shown above\n    return crc_8(bytes.data(), bytes.size());\n}\n</code></pre>\n\n<p>If the compiler says that <code>uint8_t</code> isn't defined, it's because you need to put <code>#include &lt;cstdint&gt;</code> at the top of the file.</p>\n"}], "owner": {"reputation": 99, "user_id": 9964422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fba0bd9230caef66d07addacd20c852?s=128&d=identicon&r=PG&f=1", "display_name": "user9964422", "link": "https://stackoverflow.com/users/9964422/user9964422"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1531345272, "accepted_answer_id": 51294437, "answer_count": 1, "score": -3, "last_activity_date": 1531344640, "creation_date": 1531342829, "question_id": 51294098, "link": "https://stackoverflow.com/questions/51294098/how-do-i-translate-my-code-from-c-to-c-for-a-crc-function", "closed_reason": "Needs details or clarity", "title": "How do I translate my code from C# to C++ for a CRC function?", "body": "<p>I have the following code in C# to calculate a CRC and it works like I want it to.</p>\n\n<pre><code> public byte crc_8(byte[] byteArray)\n    {\n        ushort reg_crc = 0;\n        for(int i = 0; i&lt;byteArray.Length; i++)\n        {\n            reg_crc ^= byteArray[i];\n            for(int j = 0; j &lt; 8; j++)\n            {\n                if((reg_crc &amp; 0x01) == 1)\n                {\n                    reg_crc = (ushort)((reg_crc &gt;&gt; 1) ^ 0xE5);\n                }\n                else\n                {\n                    reg_crc = (ushort)(reg_crc &gt;&gt; 1);\n                }\n            }\n        }\n        reg_crc = (byte)(reg_crc &amp; 0xFF);\n        return (byte)reg_crc;\n    } \n</code></pre>\n\n<p>I also need to add this same function to a code project that is in C++, but I am brand new to C++. This is as far as I have gotten, and I am not sure with how to proceed with the code inside of the for loop. Also note that <code>RX_PACKET_SIZE</code> is equivalent to <code>byteArray.Length</code> in that it can be used for the same purpose. I know that is okay.</p>\n\n<pre><code>static uint8_t crc_8(unit8_t array_to_process [])\n{\n    uint16_t reg_crc = 0;\n    for(int i = 0; i &lt; RX_PACKET_SIZE; i++)\n    {\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "type-conversion", "specifications", "unsigned", "signed"], "answers": [{"comments": [{"owner": {"reputation": 3118, "user_id": 1253415, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/87096d37b6aed093f1b142c6a9bfae91?s=128&d=identicon&r=PG", "display_name": "jcai", "link": "https://stackoverflow.com/users/1253415/jcai"}, "edited": false, "score": 1, "creation_date": 1531343001, "post_id": 51294090, "comment_id": 89565764, "body": "And a standards link: <a href=\"http://eel.is/c++draft/conv.integral#2\" rel=\"nofollow noreferrer\">eel.is/c++draft/conv.integral#2</a>"}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 4, "last_activity_date": 1531342781, "creation_date": 1531342781, "answer_id": 51294090, "question_id": 51294033, "link": "https://stackoverflow.com/questions/51294033/is-the-conversion-from-signed-1-to-unsigned-long-standardized/51294090#51294090", "title": "Is the conversion from &#39;(signed) -1&#39; to &#39;unsigned long&#39; standardized?", "body": "<p>The commenter is correct; conversion to an unsigned integer type from any other integer type is always well-defined. If the range of the unsigned integer type is 0 to 2^N - 1, then the result of the conversion will be the original value reduced modulo 2^N. This will be the case even if (as in systems with a one's complement or sign-magnitude representation) said reduction modulo 2^N requires extra instructions.</p>\n"}, {"tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": true, "score": 5, "last_activity_date": 1531515085, "last_edit_date": 1531515085, "creation_date": 1531343069, "answer_id": 51294139, "question_id": 51294033, "link": "https://stackoverflow.com/questions/51294033/is-the-conversion-from-signed-1-to-unsigned-long-standardized/51294139#51294139", "title": "Is the conversion from &#39;(signed) -1&#39; to &#39;unsigned long&#39; standardized?", "body": "<p>Yes, this is guaranteed regardless of the actual representation:</p>\n\n<p><a href=\"https://timsong-cpp.github.io/cppwp/n4659/conv.integral\" rel=\"nofollow noreferrer\">[conv.integral]</a> (emphasis mine)</p>\n\n<blockquote>\n  <p>A prvalue of an integer type can be converted to a prvalue of another\n  integer type. A prvalue of an unscoped enumeration type can be\n  converted to a prvalue of an integer type.</p>\n  \n  <p><strong>If the destination type is unsigned, the resulting value is the least unsigned integer congruent to the source integer</strong> (modulo 2<sup>n</sup>\n  where <code>n</code> is the number of bits used to represent the unsigned type).\n  [\u2009Note: In a two's complement representation, this conversion is\n  conceptual and there is no change in the bit pattern (if there is no\n  truncation). \u2009\u2014\u2009end note\u2009]</p>\n</blockquote>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "closed_date": 1531515972, "accepted_answer_id": 51294139, "answer_count": 2, "score": 3, "last_activity_date": 1531515085, "creation_date": 1531342528, "last_edit_date": 1531345052, "question_id": 51294033, "link": "https://stackoverflow.com/questions/51294033/is-the-conversion-from-signed-1-to-unsigned-long-standardized", "closed_reason": "Duplicate", "title": "Is the conversion from &#39;(signed) -1&#39; to &#39;unsigned long&#39; standardized?", "body": "<p>In <a href=\"https://stackoverflow.com/a/51234964/65863\">this answer</a>, you can find <a href=\"https://stackoverflow.com/questions/40608111/why-is-18446744073709551615-1-true/51234964#comment89450401_51234964\">this comment</a>:</p>\n\n<blockquote>\n  <p>Strictly speaking the bit representations of the two numbers before conversion being the same doesn't matter. Even with 1's complement or signed magnitude representations, <strong>the conversion of (signed) -1 to unsigned long will always result in <code>ULONG_MAX</code>.</strong> (The bit pattern will be the same after conversion of course).</p>\n</blockquote>\n\n<p>I understand that you can represent <code>-1</code> in other ways than Two's Compliment, that's a valid addition that should be in my answer. But, in such implementations, is it safe to rely on the conversion to <code>ULONG_MAX</code>? </p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1531342385, "post_id": 51293977, "comment_id": 89565513, "body": "<code>add_x</code> is a distinct type that doesn&#39;t inherit or otherwise have access to an instance of <code>my_header</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1531342411, "post_id": 51293977, "comment_id": 89565524, "body": "Why are you declaring this additional <code>struct</code> layer? That&#39;s not a member function, it has no access to any particular <code>my_header</code> instance. It only has access to <code>add_x</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1531342502, "post_id": 51293977, "comment_id": 89565563, "body": "<code>a</code> is not <code>static</code>, so <code>add_x</code> needs a pointer/reference to a <code>my_header</code> instance in order to access its <code>a</code> member. As for the <code>private</code> issue, prior to C++11, you would have to explicitly declare <code>add_x</code> as a <code>friend</code> of <code>my_header</code>. In C++11 and later, <a href=\"https://stackoverflow.com/questions/5013717/\"><code>add_x</code> has access to <code>my_header</code>&#39;s members</a>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1531342513, "post_id": 51293977, "comment_id": 89565568, "body": "Perhaps you are confusing how c++ nested classes work with how java nested classes work. Java nested classes are always associated with an instance of the outer class. This isn&#39;t the case in c++, nested classes can exist independently from any instance of the outer class."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531342926, "post_id": 51293977, "comment_id": 89565740, "body": "@Fran&#231;oisAndrieux &quot;<i>Java nested classes are always associated with <b>an instance of</b> the outer class</i>&quot; - thanks for that! I always wondered how use of <code>outer.this</code> inside an <code>inner</code> class worked, that always confused me. Now I finally get it.  I was missing the link that an inner class object instance is actually part of an outer class object instance, not a separate object."}, {"owner": {"reputation": 1751, "user_id": 2959769, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9WfJf.jpg?s=128&g=1", "display_name": "Vinay Shukla", "link": "https://stackoverflow.com/users/2959769/vinay-shukla"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1531343723, "post_id": 51293977, "comment_id": 89566032, "body": "@tadman could you please take a look at this problem  please <a href=\"https://ibb.co/niqDnT\" rel=\"nofollow noreferrer\">ibb.co/niqDnT</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1531344869, "post_id": 51293977, "comment_id": 89566480, "body": "That image describes something completely different than what you&#39;re doing here. Can you explain the connection?"}, {"owner": {"reputation": 413, "user_id": 6415979, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b9e3987becca782d06105588adc1f0c1?s=128&d=identicon&r=PG&f=1", "display_name": "RangerBob", "link": "https://stackoverflow.com/users/6415979/rangerbob"}, "edited": false, "score": 0, "creation_date": 1531345909, "post_id": 51293977, "comment_id": 89566869, "body": "I did not show any picture! What are you talking about?"}], "answers": [{"tags": [], "owner": {"reputation": 6458, "user_id": 985032, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e8cb4a86a0afcc659a9f479075e141f?s=128&d=identicon&r=PG", "display_name": "Michael Price", "link": "https://stackoverflow.com/users/985032/michael-price"}, "is_accepted": false, "score": 0, "last_activity_date": 1531401118, "creation_date": 1531401118, "answer_id": 51306633, "question_id": 51293977, "link": "https://stackoverflow.com/questions/51293977/how-access-to-private-members-from-a-struct-defined-within-a-class-c/51306633#51306633", "title": "How access to private members from a struct defined within a class? c++", "body": "<p>The problem is that the <code>add_x</code> instance of the <code>add_x</code> nested type does not know the correct instance of <code>my_header</code> to use for accessing the field <code>my_header::a</code>. Which is why it complains about <code>a</code> being non-static (if it were static, it would know what <code>a</code> you were asking for).</p>\n\n<p>An alternative would be to have <code>add_x</code> take a reference to <code>my_header</code> in its constructor, and use that instance to access <code>a</code>.</p>\n"}], "owner": {"reputation": 413, "user_id": 6415979, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b9e3987becca782d06105588adc1f0c1?s=128&d=identicon&r=PG&f=1", "display_name": "RangerBob", "link": "https://stackoverflow.com/users/6415979/rangerbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 386, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1531401118, "creation_date": 1531342202, "last_edit_date": 1531342770, "question_id": 51293977, "link": "https://stackoverflow.com/questions/51293977/how-access-to-private-members-from-a-struct-defined-within-a-class-c", "title": "How access to private members from a struct defined within a class? c++", "body": "<p>I have defined a struct within a class as follows:</p>\n\n<pre><code>class my_header {\n\npublic:\n    my_header();\n\n    struct add_x {\n        double operator()() const { return a; }\n    } add_x;\n\nprivate:\n    double a{1.0}; \n};\n</code></pre>\n\n<p>When compiling (g++ -std=c++11), I got the following errors:</p>\n\n<pre><code>./my_header.h:19:40: error: use of non-static data member 'a' of\n      'my_header' from nested type 'add_x'\n                double operator()() const { return a; }\n</code></pre>\n\n<p>Is it possible to access private members of the class from the struct defined within the class itself?</p>\n"}, {"tags": ["java", "c++", "c", "java-native-interface"], "comments": [{"owner": {"reputation": 4665, "user_id": 6383857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tPDaW.jpg?s=128&g=1", "display_name": "StaticBeagle", "link": "https://stackoverflow.com/users/6383857/staticbeagle"}, "edited": false, "score": 0, "creation_date": 1531344692, "post_id": 51293928, "comment_id": 89566409, "body": "<i>Hint</i> Does <code>void GetName(char[] s) { s[0] = &#39;T&#39;; s[1] = &#39;e&#39;; s[2] = &#39;s&#39;; s[3] = &#39;t&#39;;}</code> work ?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1531344957, "post_id": 51293928, "comment_id": 89566518, "body": "I got a problem with this.  You can&#39;t pass by reference in the C language.  The C language passes by value or you can pass a pointer.  In C++, you can pass by value, reference or pointer.  Please update language tags accordingly.  Also, edit your post because there is no language &quot;C/C++&quot;."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1531566588, "post_id": 51293928, "comment_id": 89650223, "body": "This is what GetName does: takes a value for s, discards it by assigning s a new value and then discards that by returning. It has no effect. A really good compiler/static analysis tool might tell you these things. (General practice: don&#39;t replace values in parameter variables [except for minor tweaks to prep for algorithms].) See the answer for ways to do what you need."}], "answers": [{"tags": [], "owner": {"reputation": 496326, "user_id": 57695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG", "display_name": "Peter Lawrey", "link": "https://stackoverflow.com/users/57695/peter-lawrey"}, "is_accepted": false, "score": 6, "last_activity_date": 1531342191, "creation_date": 1531342191, "answer_id": 51293972, "question_id": 51293928, "link": "https://stackoverflow.com/questions/51293928/pass-parameter-from-c-c-jni-to-java-and-get-modified-value/51293972#51293972", "title": "Pass parameter from C/C++ JNI to Java and get modified value", "body": "<p>Java only supports pass by value. If you want to return a reference you need to either</p>\n\n<p>a) return it</p>\n\n<pre><code>char[] getName();\n</code></pre>\n\n<p>b) Pass a mutable object to reference it</p>\n\n<pre><code>void getName(char[][] nameArray) {\n    nameArray[0] = t.toCharArray();\n}\n</code></pre>\n\n<p>c) Pass a call back</p>\n\n<pre><code>void getName(Consumer&lt;char[]&gt; listener) {\n    listener.accept(t.toCharArray());\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 312490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0329473f3b736a0bfbc06fe53594d3e?s=128&d=identicon&r=PG", "display_name": "Prashant", "link": "https://stackoverflow.com/users/312490/prashant"}, "is_accepted": false, "score": 0, "last_activity_date": 1531765614, "creation_date": 1531765614, "answer_id": 51368033, "question_id": 51293928, "link": "https://stackoverflow.com/questions/51293928/pass-parameter-from-c-c-jni-to-java-and-get-modified-value/51368033#51368033", "title": "Pass parameter from C/C++ JNI to Java and get modified value", "body": "<p>So for my scenario, I modified the declaration like below</p>\n\n<pre><code>void GetName(char[] s) to void GetName(PersonName obj)\n</code></pre>\n\n<p>So now, I am creating an object of PersonName in JNI and passing that as a parameter to the java function. Later I am using the same object to call getter methods of the PersonName class to get the values char[] RetriveName();</p>\n\n<p>I also found that using jfield also you can get the values of the class data members but then those members should be public</p>\n"}], "owner": {"reputation": 98, "user_id": 312490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0329473f3b736a0bfbc06fe53594d3e?s=128&d=identicon&r=PG", "display_name": "Prashant", "link": "https://stackoverflow.com/users/312490/prashant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1531765614, "creation_date": 1531341958, "last_edit_date": 1531344079, "question_id": 51293928, "link": "https://stackoverflow.com/questions/51293928/pass-parameter-from-c-c-jni-to-java-and-get-modified-value", "title": "Pass parameter from C/C++ JNI to Java and get modified value", "body": "<p><strong>Short Question:</strong></p>\n\n<p>Passing a parameter from C++/C JNI to Java method who supposed to modify. Will the modified result available back in C/C++ JNI? Is there any way to do it? Other than return and a callback from java?</p>\n\n<p><strong>Continue if above is not clear:</strong></p>\n\n<p>Calling below function from C/C++ JNI with jcharArray. Below Java function is supposed to work on passed char array and store the final result in same. So that modified result will be available back in C/C++ JNI.</p>\n\n<p>I have java function accepting a char[] like below</p>\n\n<pre><code>void GetName(char[] s)\n{\n    String t = \"Test\";\n    // Work on t and store the result in s\n    s = t.toCharArray();\n}\n</code></pre>\n\n<p>How I can achieve this ... I am getting all the examples that are another way around like Java calling C/C++.</p>\n"}, {"tags": ["c++", "json", "serialization", "cereal"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1531342412, "post_id": 51293891, "comment_id": 89565525, "body": "I can&#39;t find a good duplicate (I&#39;m sure there&#39;s one somewhere) but take a look at <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">object slicing</a>"}], "answers": [{"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": false, "score": 0, "last_activity_date": 1531345948, "creation_date": 1531345948, "answer_id": 51294673, "question_id": 51293891, "link": "https://stackoverflow.com/questions/51293891/serialization-and-inheritance-in-cereal/51294673#51294673", "title": "Serialization and inheritance in Cereal", "body": "<p>Your objects are being sliced.</p>\n\n<pre><code>std::vector&lt;Base&gt; confVector;\n</code></pre>\n\n<p>This is a vector of objects of type <code>Base</code>.<br>\nIf you push in objects that are derived from <code>Base</code> then it only copies the base part of the object.</p>\n\n<pre><code>A a;\nB b;\nconfig.confVector.push_back(a);  // a is of Type A not Base\nconfig.confVector.push_back(b);  // b is of type B not Base\n</code></pre>\n\n<p>So both these objects are being sliced when put in the vector.</p>\n\n<p>You could store pointers to the object:</p>\n\n<pre><code>std::vector&lt;Base&gt; confVector;\n...\nconfig.confVector.push_back(&amp;a);\nconfig.confVector.push_back(&amp;b);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 144, "user_id": 5613164, "user_type": "registered", "profile_image": "https://graph.facebook.com/959533824107532/picture?type=large", "display_name": "Micha\u0142 Hanusek", "link": "https://stackoverflow.com/users/5613164/micha%c5%82-hanusek"}, "is_accepted": true, "score": 0, "last_activity_date": 1531733546, "creation_date": 1531733546, "answer_id": 51358663, "question_id": 51293891, "link": "https://stackoverflow.com/questions/51293891/serialization-and-inheritance-in-cereal/51358663#51358663", "title": "Serialization and inheritance in Cereal", "body": "<p>I solved this problem.</p>\n\n<pre><code>struct Base\n{\n    Base()          = default;\n    virtual ~Base() = default;\n\n    std::string common;\n\n    template &lt;class Archive&gt;\n    void serialize(Archive &amp;ar)\n    {\n        ar(CEREAL_NVP(common));\n    }\n};\n\nstruct A : public Base\n{\n    A() = default;\n\n    A(int v)\n    {\n        a = v;\n    }\n\n    int a;\n\n    template &lt;class Archive&gt;\n    void serialize(Archive &amp;ar)\n    {\n        ar(cereal::make_nvp(\"Base\", cereal::base_class&lt;Base&gt;(this)));\n        ar(a);\n    }\n};\n\nstruct B : public Base\n{\n    B() = default;\n\n    B(std::string text)\n    {\n        b = text;\n    }\n\n    std::string b;\n\n    template &lt;class Archive&gt;\n    void serialize(Archive &amp;ar)\n    {\n        ar(cereal::make_nvp(\"Base\", cereal::base_class&lt;Base&gt;(this)));\n        ar(b);\n    }\n};\n\nstruct Config\n{\n    std::vector&lt;std::shared_ptr&lt;Base&gt;&gt; vector;\n\n    template &lt;class Archive&gt;\n    void serialize(Archive &amp;ar)\n    {\n        ar(vector);\n    }\n};\n\nCEREAL_REGISTER_TYPE(A)\n\nCEREAL_REGISTER_TYPE_WITH_NAME(B, \"ClassB\")\n\nCEREAL_REGISTER_POLYMORPHIC_RELATION(Base, A)\nCEREAL_REGISTER_POLYMORPHIC_RELATION(Base, B)\n\nint main()\n{\n\n    std::string workPath = \"/home/user/\"\n\n    {\n        std::ofstream os(workPath + \"polymorphism_test.json\");\n        cereal::JSONOutputArchive oarchive(os);\n\n        std::shared_ptr&lt;Base&gt; ptr1 = std::make_shared&lt;A&gt;(123);\n        std::shared_ptr&lt;Base&gt; ptr2 = std::make_shared&lt;B&gt;(\"foobar\");\n\n        Config op;\n        op.vector.push_back(ptr1);\n        op.vector.push_back(ptr2);\n\n        oarchive(op);\n    }\n\n    {\n        std::ifstream is(workPath + \"polymorphism_test.json\");\n        cereal::JSONInputArchive iarchive(is);\n        Config ip;\n        iarchive(ip);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\n    \"value0\": {\n        \"value0\": [\n            {\n                \"polymorphic_id\": 2147483649,\n                \"polymorphic_name\": \"A\",\n                \"ptr_wrapper\": {\n                    \"id\": 2147483649,\n                    \"data\": {\n                        \"Base\": {\n                            \"common\": \"\"\n                        },\n                        \"value0\": 123\n                    }\n                }\n            },\n            {\n                \"polymorphic_id\": 2147483650,\n                \"polymorphic_name\": \"ClassB\",\n                \"ptr_wrapper\": {\n                    \"id\": 2147483650,\n                    \"data\": {\n                        \"Base\": {\n                            \"common\": \"\"\n                        },\n                        \"value0\": \"foobar\"\n                    }\n                }\n            }\n        ]\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 144, "user_id": 5613164, "user_type": "registered", "profile_image": "https://graph.facebook.com/959533824107532/picture?type=large", "display_name": "Micha\u0142 Hanusek", "link": "https://stackoverflow.com/users/5613164/micha%c5%82-hanusek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "accepted_answer_id": 51358663, "answer_count": 2, "score": -1, "last_activity_date": 1531733546, "creation_date": 1531341761, "last_edit_date": 1531342107, "question_id": 51293891, "link": "https://stackoverflow.com/questions/51293891/serialization-and-inheritance-in-cereal", "title": "Serialization and inheritance in Cereal", "body": "<p>I would like my program to save and read a Config structure in a JSON file.</p>\n\n<p>However, I have a problem with generating the correct JSON file. Probably the problem is inheritance.</p>\n\n<p><strong>JSON Output (Incorrect):</strong></p>\n\n<pre><code>  {\n        \"config\": {\n            \"confVector\": [\n                {\n                    \"common\": \"a\"\n                },\n                {\n                    \"common\": \"b\"\n                }\n            ]\n        }\n    }\n</code></pre>\n\n<p><strong>Expected (correct) JSON:</strong></p>\n\n<pre><code>  {\n        \"config\": {\n            \"confVector\": [\n                {\n                    \"common\": \"a\",\n                    \"a\" : 1\n                },\n                {\n                    \"common\": \"b\",\n                    \"b\" : \"b\"\n                }\n            ]\n        }\n    }\n</code></pre>\n\n<p><strong>Code :</strong></p>\n\n<p>Base struct with common element</p>\n\n<pre><code>struct Base\n{\n    std::string common;\n\n    template &lt;class Archive&gt;\n    void serialize(Archive &amp;ar)\n    {\n        ar(CEREAL_NVP(common));\n    }\n};\n</code></pre>\n\n<p>Two specific structures</p>\n\n<pre><code>struct A : public Base\n{\n    int a;\n\n    template &lt;class Archive&gt;\n    void serialize(Archive &amp;ar)\n    {\n        ar(cereal::make_nvp(\"Base\", cereal::base_class&lt;Base&gt;(this)));\n        ar(cereal::make_nvp(\"a\", a));\n    }\n};\n\nstruct B : public Base\n{\n    std::string b;\n\n    template &lt;class Archive&gt;\n    void serialize(Archive &amp;ar)\n    {\n        ar(cereal::make_nvp(\"Base\", cereal::base_class&lt;Base&gt;(this)));\n        ar(cereal::make_nvp(\"b\", b));\n    }\n};\n\nstruct Config\n{\n    std::vector&lt;Base&gt; confVector;\n\n    template &lt;class Archive&gt;\n    void serialize(Archive &amp;ar)\n    {\n        ar(CEREAL_NVP(confVector));\n    }\n};\nCEREAL_REGISTER_POLYMORPHIC_RELATION(Base, A)\nCEREAL_REGISTER_POLYMORPHIC_RELATION(Base, B)\n</code></pre>\n\n<p>Main: test save to json file</p>\n\n<pre><code>int main()\n{\n    std::string workPath = MAKE_STR(PLC_PROGRAM);\n\n    Config config;\n\n    A a;\n    a.a      = 1;\n    a.common = \"a\";\n\n    B b;\n    b.b      = \"b\";\n    b.common = \"b\";\n\n    config.confVector.push_back(a);\n    config.confVector.push_back(b);\n\n    std::ofstream outstream;\n    outstream.open(workPath + \"/test.json\");\n\n    {\n        cereal::JSONOutputArchive ar(outstream);\n        ar(cereal::make_nvp(\"config\", config));\n    }\n\n    outstream.close();\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "x86", "x86-64", "c++17"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1531342094, "post_id": 51293882, "comment_id": 89565388, "body": "<code>std::string::data</code> returns a <code>const</code> pointer until C++17. I wonder if the x64 library implementation is a bit ahead of the x86 library implementation. You should be able to take a look at the definition of  <code>data</code> in the header (or headers) to see what&#39;s up."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1531342114, "post_id": 51293882, "comment_id": 89565396, "body": "The reason for the warnings should be obvious. In a 32bit app, a string uses 32bit indexes and sizes, but <code>tellg()</code> returns a 64bit value instead, so you won&#39;t be able to store files &gt; 4GB. And <code>wstring::data()</code> does not return a non-<code>const</code> pointer until C++17. There are many different ways that you can <a href=\"https://stackoverflow.com/questions/116038/\">read a file into a string</a>, try one of the other alternatives that doesn&#39;t rely on 32bit/64bit data types."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1531342434, "post_id": 51293882, "comment_id": 89565535, "body": "<code>tellg</code> is a bit of a weirdo. All it guarantees is you get a token you can use to return to the same point in the stream. This may or may not be relative to the beginning of the file, so you can&#39;t count on seeking to the end  and then calling <code>tellg</code> to provide the size of the file. You&#39;re clearly targeting MSCV, and the seek and tell trick works (for now anyway), but this may bite if you you have to port the code elsewhere."}, {"owner": {"reputation": 1812, "user_id": 706055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59587d800e072afcecf5dfe8bc374957?s=128&d=identicon&r=PG&f=1", "display_name": "Amit G.", "link": "https://stackoverflow.com/users/706055/amit-g"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1531343718, "post_id": 51293882, "comment_id": 89566029, "body": "@user4581301 The problem was that I set C++17, in VS IDE, unintentionally just for the x64, instead of for all configurations. Xirema guessed it correctly. I fixed it in the IDE and the error gone."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1531344856, "post_id": 51293882, "comment_id": 89566473, "body": "@AmitG. Thanks. I gathered that from you comment below. Good that it&#39;s not quite the nightmare case I thought it could be. Didn&#39;t know you could set the standard in MSVC. Don&#39;t use it all that much, and for the cases I do, I&#39;m still trying to claw my company above MSVC 2010 where standard compliance really doesn&#39;t matter all that much."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1531342305, "post_id": 51293982, "comment_id": 89565476, "body": "Instead of using <code>const_cast</code>, you can use <code>operator[]</code> instead: <code>wif.read(&amp;buffer[0], buffer.size());</code>"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1531342356, "post_id": 51293982, "comment_id": 89565500, "body": "@RemyLebeau You can, but I would never recommend it, due to the kludge it produces. This is a perfectly valid and standard-compliant use of <code>const_cast</code>."}, {"owner": {"reputation": 1812, "user_id": 706055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59587d800e072afcecf5dfe8bc374957?s=128&d=identicon&r=PG&f=1", "display_name": "Amit G.", "link": "https://stackoverflow.com/users/706055/amit-g"}, "edited": false, "score": 0, "creation_date": 1531343197, "post_id": 51293982, "comment_id": 89565827, "body": "@Xirema You are right. I set C++17 in the IDE unintentionally just for the x64, instead of for all configurations. Now it make sense; error gone."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1531343218, "post_id": 51293982, "comment_id": 89565838, "body": "@Xirema what kludge would that be? <code>operator[]</code> does not perform bounds checking, so <code>buffer[0]</code> would represent the same address as <code>buffer.end()</code> when <code>buffer.size()</code> is 0, and it is safe to refer to past-the-end of a memory buffer as long as you don&#39;t dereference it, which <code>read()</code> wouldn&#39;t when <code>buffer.size()</code> is 0. And besides, <code>operator[]</code> is guaranteed to return a valid address in C++11 and later even if <code>size()</code> is 0 (before C++11, it would return an undefined address, but that is OK since <code>read()</code> wouldn&#39;t access the address anyway)."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 3, "last_activity_date": 1531342221, "creation_date": 1531342221, "answer_id": 51293982, "question_id": 51293882, "link": "https://stackoverflow.com/questions/51293882/differences-in-stl-api-when-i-switch-platform-from-x64-to-x86-vs2017/51293982#51293982", "title": "Differences in STL API (When I switch Platform from x64 to x86, VS2017)", "body": "<p>The warning is being caused because, even though you're in x86 mode, Files are still presumed to (possibly) be larger than 4GB, which means their size types are 64-bit. 64-bit integers truncate to 32-bit integers with a warning, which your compiler is providing. <code>static_cast</code> to <code>unsigned int</code> to fix.</p>\n\n<p>The Error is being caused because your x86 configuration probably isn't compiling in C++17 mode, and as a result, the <code>data()</code> function returns <code>wchar_t const*</code>, instead of C++17's behavior of returning <code>wchar_t *</code>. Change your compiler flags to compile in C++17 mode, and you won't need the cast anymore. It's probably best if you set the flag for \"all\" configurations so you won't have to manually change both in the future.</p>\n\n<p>Also, don't use C-style casts to fix this issue, like <code>(wchar_t*)buffer.data()</code>, as that can potentially hide this issue until it explodes at a later part of your code. Prefer <code>const_cast</code> if you're forced with using pre-C++17 for this code:</p>\n\n<pre><code>wif.read(const_cast&lt;wchar*&gt;(buffer.data()) , buffer.size());\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1531355589, "post_id": 51295497, "comment_id": 89569124, "body": "<code>size_t</code> is for sizes of objects (in memory).  No reason to expect it can hold file offsets on systems with large-file support."}], "tags": [], "owner": {"reputation": 1812, "user_id": 706055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59587d800e072afcecf5dfe8bc374957?s=128&d=identicon&r=PG&f=1", "display_name": "Amit G.", "link": "https://stackoverflow.com/users/706055/amit-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1531353161, "last_edit_date": 1531353161, "creation_date": 1531352175, "answer_id": 51295497, "question_id": 51293882, "link": "https://stackoverflow.com/questions/51293882/differences-in-stl-api-when-i-switch-platform-from-x64-to-x86-vs2017/51295497#51295497", "title": "Differences in STL API (When I switch Platform from x64 to x86, VS2017)", "body": "<p>(The warning issue)</p>\n\n<p>It seems the warning on x86 is due to differences in the definition of <code>size_t</code> on x86 vs x64: <em>\"size_t (unsigned __int64 or unsigned integer, depending on the target platform)\"</em> - <a href=\"https://msdn.microsoft.com/en-us/library/323b6b3k.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">MSDN</a>. <em>\"size_t is a 64-bit value on 64-bit Windows operating systems\"</em> - <a href=\"https://msdn.microsoft.com/en-us/library/3b2e7499.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">MSDN</a>. And MSVC determines that <code>tellg()</code> return-type is <code>std::streamoff</code> (typically, a typedef to <code>long long</code>).</p>\n\n<pre><code>std::wstring :: resize (size_type n);\n</code></pre>\n\n<p>From the standard perspective, <code>size_t</code> definition <a href=\"https://stackoverflow.com/questions/918787/whats-sizeofsize-t-on-32-bit-vs-the-various-64-bit-data-models\">discussed here</a>.</p>\n"}], "owner": {"reputation": 1812, "user_id": 706055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59587d800e072afcecf5dfe8bc374957?s=128&d=identicon&r=PG&f=1", "display_name": "Amit G.", "link": "https://stackoverflow.com/users/706055/amit-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 1, "accepted_answer_id": 51293982, "answer_count": 2, "score": -1, "last_activity_date": 1532733105, "creation_date": 1531341724, "last_edit_date": 1532733105, "question_id": 51293882, "link": "https://stackoverflow.com/questions/51293882/differences-in-stl-api-when-i-switch-platform-from-x64-to-x86-vs2017", "title": "Differences in STL API (When I switch Platform from x64 to x86, VS2017)", "body": "<p>I have this simple ReadTextFile(full_path) function:</p>\n\n<pre><code>std::wstring CEngine::load_text_file(std::wstring &amp;full_path)\n{\n    std::wstring buffer = m_text_file_cache[full_path];\n\n    if (buffer.empty()) // Load file:\n    {\n        std::wifstream wif(full_path);\n\n        wif.seekg(0, std::ios::end);\n        buffer.resize(wif.tellg()); // On Debug/Release x86: Warning C4244: 'argument': conversion from 'std::streamoff' to 'const unsigned int', possible loss of data\n        wif.seekg(0);\n        wif.read(buffer.data() , buffer.size()); // On Debug/Release x86: Error C2664: 'std::basic_istream&lt;wchar_t,std::char_traits&lt;wchar_t&gt;&gt; &amp;std::basic_istream&lt;wchar_t,std::char_traits&lt;wchar_t&gt;&gt;::read(_Elem *,std::streamsize)': cannot convert argument 1 from 'const wchar_t *' to 'wchar_t *'\n\n        m_text_file_cache[full_path] = buffer;\n    }\n\n    return buffer;\n}\n</code></pre>\n\n<ul>\n<li><code>m_text_file_cache</code> is just a std::map cache to reduce disk I/O. Ignore it.</li>\n</ul>\n\n<p>When I compile to x64 (main track) there are no issues, but when I compile to x86 (for curiosity) there are 2 issues that I marked with comments in the code: Warning C4244 &amp; Error C2664.</p>\n"}, {"tags": ["c++", "ios", "objective-c", "uiviewcontroller", "appdelegate"], "comments": [{"owner": {"reputation": 278, "user_id": 1103265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f1bdddd41b9cd4562de684c7d5983e?s=128&d=identicon&r=PG", "display_name": "max9xs", "link": "https://stackoverflow.com/users/1103265/max9xs"}, "edited": false, "score": 0, "creation_date": 1531341917, "post_id": 51293861, "comment_id": 89565307, "body": "I suggest to use UIView and to add directly on App window, by keeping reference with Appdelegate to access globally."}, {"owner": {"reputation": 1005, "user_id": 6246322, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e9e64058e9af209c48e74acfc40bda31?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Joe", "link": "https://stackoverflow.com/users/6246322/frank-joe"}, "reply_to_user": {"reputation": 278, "user_id": 1103265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f1bdddd41b9cd4562de684c7d5983e?s=128&d=identicon&r=PG", "display_name": "max9xs", "link": "https://stackoverflow.com/users/1103265/max9xs"}, "edited": false, "score": 0, "creation_date": 1531342070, "post_id": 51293861, "comment_id": 89565375, "body": "@max9xs You mean add a subview to every view? And then create references in Appdelegate, right?"}, {"owner": {"reputation": 94591, "user_id": 3418066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/De72L.jpg?s=128&g=1", "display_name": "Paulw11", "link": "https://stackoverflow.com/users/3418066/paulw11"}, "edited": false, "score": 0, "creation_date": 1531342087, "post_id": 51293861, "comment_id": 89565384, "body": "It is probably easier to use <code>NSNotification</code> to loosely couple the C++ code and your view controllers"}, {"owner": {"reputation": 278, "user_id": 1103265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f1bdddd41b9cd4562de684c7d5983e?s=128&d=identicon&r=PG", "display_name": "max9xs", "link": "https://stackoverflow.com/users/1103265/max9xs"}, "edited": false, "score": 0, "creation_date": 1531342140, "post_id": 51293861, "comment_id": 89565408, "body": "No. AppWindow=[[[UIApplication sharedApplication] delegate] window];"}, {"owner": {"reputation": 278, "user_id": 1103265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f1bdddd41b9cd4562de684c7d5983e?s=128&d=identicon&r=PG", "display_name": "max9xs", "link": "https://stackoverflow.com/users/1103265/max9xs"}, "edited": false, "score": 1, "creation_date": 1531342183, "post_id": 51293861, "comment_id": 89565425, "body": "You can use NSNotification to receive callbacks in your every view controllers."}, {"owner": {"reputation": 1005, "user_id": 6246322, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e9e64058e9af209c48e74acfc40bda31?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Joe", "link": "https://stackoverflow.com/users/6246322/frank-joe"}, "reply_to_user": {"reputation": 94591, "user_id": 3418066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/De72L.jpg?s=128&g=1", "display_name": "Paulw11", "link": "https://stackoverflow.com/users/3418066/paulw11"}, "edited": false, "score": 0, "creation_date": 1531342720, "post_id": 51293861, "comment_id": 89565655, "body": "@Paulw11 So I should send a notification in C++ code and make all the views be a listener? Is this correct? Not familiar with NSNotifaction..."}, {"owner": {"reputation": 1005, "user_id": 6246322, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e9e64058e9af209c48e74acfc40bda31?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Joe", "link": "https://stackoverflow.com/users/6246322/frank-joe"}, "edited": false, "score": 0, "creation_date": 1531342752, "post_id": 51293861, "comment_id": 89565664, "body": "@Paulw11But my library is pure C++, how could I use NSNotification in it? Don&#39;t want to rename to .mm"}, {"owner": {"reputation": 278, "user_id": 1103265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f1bdddd41b9cd4562de684c7d5983e?s=128&d=identicon&r=PG", "display_name": "max9xs", "link": "https://stackoverflow.com/users/1103265/max9xs"}, "edited": false, "score": 0, "creation_date": 1531343649, "post_id": 51293861, "comment_id": 89565997, "body": "@WanhuiQiao If you place one UIView on App window. It will be remain on top of all view controller. You need not to create many instances. Your UIView and view controllers both will be using ObejctiveC or swift. So you can send receive data between them."}, {"owner": {"reputation": 94591, "user_id": 3418066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/De72L.jpg?s=128&g=1", "display_name": "Paulw11", "link": "https://stackoverflow.com/users/3418066/paulw11"}, "edited": false, "score": 0, "creation_date": 1531343886, "post_id": 51293861, "comment_id": 89566107, "body": "I am not sure, I have never used C++ but if your framework can communicate with a UIViewController then presumably it can communicate with a helper objective-C object that can post the notification for you."}, {"owner": {"reputation": 1005, "user_id": 6246322, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e9e64058e9af209c48e74acfc40bda31?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Joe", "link": "https://stackoverflow.com/users/6246322/frank-joe"}, "reply_to_user": {"reputation": 278, "user_id": 1103265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f1bdddd41b9cd4562de684c7d5983e?s=128&d=identicon&r=PG", "display_name": "max9xs", "link": "https://stackoverflow.com/users/1103265/max9xs"}, "edited": false, "score": 0, "creation_date": 1531344346, "post_id": 51293861, "comment_id": 89566284, "body": "@max9xs Is there any documentation about it? I never directly use App window before. I would really appreciate it!"}, {"owner": {"reputation": 278, "user_id": 1103265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f1bdddd41b9cd4562de684c7d5983e?s=128&d=identicon&r=PG", "display_name": "max9xs", "link": "https://stackoverflow.com/users/1103265/max9xs"}, "edited": false, "score": 0, "creation_date": 1531345102, "post_id": 51293861, "comment_id": 89566568, "body": "@WanhuiQiao sorry but I came to know about this approach from stack overflow only. Also there are lot of third party alerts, toast controls uses window as parent."}, {"owner": {"reputation": 278, "user_id": 1103265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f1bdddd41b9cd4562de684c7d5983e?s=128&d=identicon&r=PG", "display_name": "max9xs", "link": "https://stackoverflow.com/users/1103265/max9xs"}, "edited": false, "score": 0, "creation_date": 1531345227, "post_id": 51293861, "comment_id": 89566614, "body": "@WanhuiQiao <a href=\"https://stackoverflow.com/questions/29160540/how-to-add-view-in-uiwindow\" title=\"how to add view in uiwindow\">stackoverflow.com/questions/29160540/&hellip;</a>"}], "owner": {"reputation": 1005, "user_id": 6246322, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e9e64058e9af209c48e74acfc40bda31?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Joe", "link": "https://stackoverflow.com/users/6246322/frank-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1531341940, "creation_date": 1531341610, "last_edit_date": 1531341940, "question_id": 51293861, "link": "https://stackoverflow.com/questions/51293861/how-to-create-a-singleton-managing-all-view-controllers", "title": "How to create a singleton managing all view controllers?", "body": "<p>I am working on an objective-c project that uses a C++ library. It keeps listening to users' audio input using <code>Audio Queue</code> and pass the data to the C++ library. Eventually, the C++ library will trigger a call-back function when it finds a whole sentence.</p>\n\n<p>But the problem is that my application containing several views, and I want the top view to get notified immediately. I passed a callback function to the C++ library, but I don't know where should I define such a function because I want to it to have access to the user's current view controller and change content on it.</p>\n\n<p>I am wondering if I should put it in UINavigationController or AppDelegate. Any idea will be appreciated!</p>\n"}, {"tags": ["c++", "opengl", "graphics", "3d", "openscenegraph"], "comments": [{"owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "edited": false, "score": 1, "creation_date": 1531341982, "post_id": 51293859, "comment_id": 89565338, "body": "How will you calculate the depth coordinate from a mouse click?"}, {"owner": {"reputation": 429, "user_id": 7647979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/752Gt.jpg?s=128&g=1", "display_name": "S.Frank Richarrd", "link": "https://stackoverflow.com/users/7647979/s-frank-richarrd"}, "reply_to_user": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "edited": false, "score": 0, "creation_date": 1531342300, "post_id": 51293859, "comment_id": 89565475, "body": "I&#39;m having a plane placed at xz axis right now. @vincent"}, {"owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "edited": false, "score": 0, "creation_date": 1531342837, "post_id": 51293859, "comment_id": 89565705, "body": "In that case you&#39;re sort of doing a clipping plane. Typically one uses dot product for this kind of calculation."}, {"owner": {"reputation": 429, "user_id": 7647979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/752Gt.jpg?s=128&g=1", "display_name": "S.Frank Richarrd", "link": "https://stackoverflow.com/users/7647979/s-frank-richarrd"}, "reply_to_user": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "edited": false, "score": 0, "creation_date": 1531342931, "post_id": 51293859, "comment_id": 89565741, "body": "Not a kind of clipping place. Iam Restricting the user to place the sphere on that plane."}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1531376981, "post_id": 51293859, "comment_id": 89574257, "body": "You can&#39;t multiply a 2d-vector with a 4x4 matrix. Please show the exact code you tried including relevant declarations."}], "answers": [{"tags": [], "owner": {"reputation": 801, "user_id": 878711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04b439ae8956c87b26564542b75ad426?s=128&d=identicon&r=PG", "display_name": "rickyviking", "link": "https://stackoverflow.com/users/878711/rickyviking"}, "is_accepted": false, "score": 2, "last_activity_date": 1531382625, "creation_date": 1531382625, "answer_id": 51300321, "question_id": 51293859, "link": "https://stackoverflow.com/questions/51293859/how-to-calculate-3d-point-world-coordinate-from-2d-mouse-clicked-screen-coordi/51300321#51300321", "title": "How to calculate 3D point (World Coordinate) from 2D mouse clicked screen coordinate point in Openscenegraph?", "body": "<p>Under the assumption that the mouse position is normalized in the range [-1, 1] for x and y, the following code will give you 2 points in world coordinates projected from your mouse coords: <code>nearPoint</code> is the point in 3D lying on the camera frustum near plane, <code>farPoint</code>on the frustum far plane.<br>\nThan you can compute a line passing by these points and intersecting that with your plane.</p>\n\n<pre><code>  // compute the matrix to unproject the mouse coords (in homogeneous space)    \n  osg::Matrix VP = _camera-&gt;getViewMatrix() * _camera-&gt;getProjectionMatrix();\n\n  osg::Matrix inverseVP;\n  inverseVP.invert(VP);\n\n  // compute world near far\n  osg::Vec3 nearPoint(mousePosition.x, mousePosition.x, -1.0f);\n  osg::Vec3 farPoint(mousePosition.x, mousePosition.x, 1.0f);\n  osg::Vec3 nearPointWorld = nearPoint * inverseVP;\n  osg::Vec3 farPointWorld = farPoint * inverseVP;\n</code></pre>\n"}], "owner": {"reputation": 429, "user_id": 7647979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/752Gt.jpg?s=128&g=1", "display_name": "S.Frank Richarrd", "link": "https://stackoverflow.com/users/7647979/s-frank-richarrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1531382625, "creation_date": 1531341606, "question_id": 51293859, "link": "https://stackoverflow.com/questions/51293859/how-to-calculate-3d-point-world-coordinate-from-2d-mouse-clicked-screen-coordi", "title": "How to calculate 3D point (World Coordinate) from 2D mouse clicked screen coordinate point in Openscenegraph?", "body": "<p>I was trying to place a sphere on the 3D space from the user selected point on 2d screen space. For this iam trying to calculate 3d point from 2d point using the below technique and this technique not giving the correct solution. </p>\n\n<pre><code>mousePosition.x = ((clickPos.clientX - window.left) / control.width) * 2 - 1;\n    mousePosition.y = -((clickPos.clientY - window.top) / control.height) * 2 + 1;\n</code></pre>\n\n<p>then Iam multiplying the <code>mousePosition</code>with <code>Inverse of MVP matrix</code>. But getting random number at result.</p>\n\n<p>for calculating MVP Matrix :</p>\n\n<pre><code> osg::Matrix mvp =   _camera-&gt;getViewMatrix() * _camera-&gt;getProjectionMatrix();\n</code></pre>\n\n<p>How can I proceed? Thanks.</p>\n"}, {"tags": ["c++", "design-patterns", "memory-leaks", "destructor", "static-variables"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1531341750, "post_id": 51293829, "comment_id": 89565247, "body": "<code>(*global_time_variable).~current_date_time();</code> calls it and <code>delete global_time_variable;</code> calls it again, which should result in infinite recursion."}, {"owner": {"reputation": 129, "user_id": 5959970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e50eb02a3b348f0c0b9ff9b29f8d1125?s=128&d=identicon&r=PG&f=1", "display_name": "xAditya3393", "link": "https://stackoverflow.com/users/5959970/xaditya3393"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1531343026, "post_id": 51293829, "comment_id": 89565774, "body": "@tkausl Silly of me not taking a note of it. I guess not calling it would be ideal. In which case who deletes the memory allocated?"}], "answers": [{"tags": [], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "is_accepted": false, "score": 0, "last_activity_date": 1531344944, "creation_date": 1531344944, "answer_id": 51294498, "question_id": 51293829, "link": "https://stackoverflow.com/questions/51293829/manual-destructor-call-in-singleton-pattern-invoked-multiple-times/51294498#51294498", "title": "Manual destructor call In Singleton Pattern : Invoked multiple times", "body": "<p>Since <code>new</code> is invoked in <code>create_instance</code>, <code>delete</code> should be called in <code>destroy_instance</code> instead of a manual destructor invocation.</p>\n\n<p>In general, destructors are invoked by <code>delete</code> so they should not themselves be calling <code>delete</code> on the the object being destroyed.</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;ctime&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n\nclass current_date_time {\n\n  private:\n\n    current_date_time() {\n       std::cout &lt;&lt; \"constructor invoked!!\\n\";\n    };\n\n    ~current_date_time() {\n       std::cout &lt;&lt; \"destructor invoked!!\\n\";\n    };\n\n  public:\n\n    static void create_instance();\n    static void destroy_instance();\n    static current_date_time* global_time_variable;\n\n    void time_output(){\n      std::time_t t = std::time(nullptr);\n      std::tm tm = *std::localtime(&amp;t);\n      std::cout &lt;&lt; std::put_time(&amp;tm, \"%c %Z\") &lt;&lt; \"\\n\";\n    }\n\n};\n\n\ncurrent_date_time* current_date_time::global_time_variable = NULL;\n\nvoid current_date_time::create_instance() {\n   if(current_date_time::global_time_variable == NULL)\n      global_time_variable =  new current_date_time();\n}\n\nvoid current_date_time::destroy_instance() {\n    delete global_time_variable;\n    global_time_variable = NULL;\n}\n\n\nint main() {\n\n   current_date_time::create_instance();\n   current_date_time::global_time_variable-&gt;time_output();\n   current_date_time::destroy_instance();\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 5959970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e50eb02a3b348f0c0b9ff9b29f8d1125?s=128&d=identicon&r=PG&f=1", "display_name": "xAditya3393", "link": "https://stackoverflow.com/users/5959970/xaditya3393"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531372676, "creation_date": 1531341464, "last_edit_date": 1531372676, "question_id": 51293829, "link": "https://stackoverflow.com/questions/51293829/manual-destructor-call-in-singleton-pattern-invoked-multiple-times", "title": "Manual destructor call In Singleton Pattern : Invoked multiple times", "body": "<p>I was attempting to write a singleton pattern which displays current time. The problem occurs on deleting heap memory allocated to the static pointer variable global_time_variable via calling the static member function destroy_instance().</p>\n\n<pre><code>class current_date_time {\n\n  private:\n\n    current_date_time() {\n       std::cout &lt;&lt; \"constructor invoked!!\\n\";\n    };\n\n    ~current_date_time() {\n       std::cout &lt;&lt; \"destructor invoked!!\\n\";\n       delete global_time_variable;\n    };\n\n  public:\n\n    static void create_instance();\n    static void destroy_instance();\n    static current_date_time* global_time_variable;\n\n    void time_output(){\n      std::time_t t = std::time(nullptr);\n      std::tm tm = *std::localtime(&amp;t);\n      std::cout &lt;&lt; std::put_time(&amp;tm, \"%c %Z\") &lt;&lt; \"\\n\";\n    }\n\n};\n\n\ncurrent_date_time* current_date_time::global_time_variable = NULL;\n\nvoid current_date_time::create_instance() {\n   if(current_date_time::global_time_variable == NULL)\n      global_time_variable =  new current_date_time();\n}\n\nvoid current_date_time::destroy_instance() {\n    (*global_time_variable).~current_date_time();\n}\n\n\nint main() {\n\n   current_date_time::create_instance();\n   current_date_time::global_time_variable-&gt;time_output();\n   current_date_time::destroy_instance();\n   return 0;\n}\n</code></pre>\n\n<p><strong>I am curious to know as to why was destructor invoked multiple times?</strong></p>\n\n<p>On going through James Kanze's answer to the question <a href=\"https://stackoverflow.com/questions/6850009/c-deleting-static-data\">C++ Deleting Static Data</a> \nThe other possible options are:</p>\n\n<ol>\n<li>Not trying to manually invoke - In this case, the object stays in heap wherein i am not sure who deletes it</li>\n<li>Use smart pointers - In this case, these pointers have a destructor wrapped around them and its invoked automatically</li>\n</ol>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>My <strong>second question</strong> would be: In case if I wouldn't invoke a destructor(which seems to be one of recommended options), <strong>wouldn't it result to memory leaks?</strong> </p>\n\n<p>Since static variables are destroyed after program lifetime while object pointed by <em>global_time_variable</em> wouldn't get destroyed. </p>\n"}, {"tags": ["c++", "templates", "c++14", "template-meta-programming"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 12138932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f140f7949738a0eab4178eab3b9ea33?s=128&d=identicon&r=PG&f=1", "display_name": "wolfgang", "link": "https://stackoverflow.com/users/12138932/wolfgang"}, "edited": false, "score": 0, "creation_date": 1582052600, "post_id": 51293678, "comment_id": 106641508, "body": "thanks a lot; I read both answers and for me this is what worked best (to avoid the STL allocator mess): <code>template&lt;typename...&gt;     struct meta {};     template&lt;typename A, template&lt;typename...&gt; typename C, typename B, typename ... Ts&gt;     struct meta&lt;A, C&lt;B, Ts...&gt;&gt; {         using type = C&lt;A&gt;; &#47;*but we drop the template arguments after the first (thus taking the default ones!) *&#47;     };</code>  That is, dropping the ellipsis in the second to last line (i.e. using the default arguments)."}], "tags": [], "owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "is_accepted": true, "score": 8, "last_activity_date": 1531346555, "last_edit_date": 1531346555, "creation_date": 1531340607, "answer_id": 51293678, "question_id": 51293607, "link": "https://stackoverflow.com/questions/51293607/how-to-replace-a-template-parameter-in-a-given-type/51293678#51293678", "title": "How to replace a template parameter in a given type?", "body": "<p>you can do this with <a href=\"https://en.cppreference.com/w/cpp/language/template_specialization\" rel=\"nofollow noreferrer\">template specialization</a> of a <a href=\"https://en.cppreference.com/w/cpp/language/template_parameters#Template_template_parameter\" rel=\"nofollow noreferrer\">template template parameter</a></p>\n\n<pre><code>template&lt;typename, typename&gt;\nstruct meta {};\n\ntemplate&lt;typename A, template&lt;typename&gt; typename C, typename B&gt;\nstruct meta&lt;A, C&lt;B&gt;&gt; {\n    using type = C&lt;A&gt;;\n};\n</code></pre>\n\n<p><code>meta&lt;A, C&lt;B&gt;&gt;::type</code> will be <code>C&lt;A&gt;</code></p>\n\n<p>if you want to have handling of default argument in basic cases</p>\n\n<pre><code>template&lt;typename...&gt;\nstruct meta {};\n\ntemplate&lt;typename A, template&lt;typename...&gt; typename C, typename B, typename ... Ts&gt;\nstruct meta&lt;A, C&lt;B, Ts...&gt;&gt; {\n    using type = C&lt;A, Ts...&gt;;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5685, "user_id": 827280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG", "display_name": "Museful", "link": "https://stackoverflow.com/users/827280/museful"}, "edited": false, "score": 0, "creation_date": 1531341569, "post_id": 51293715, "comment_id": 89565194, "body": "What are your thoughts on @Tyker&#39;s approach?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 5685, "user_id": 827280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG", "display_name": "Museful", "link": "https://stackoverflow.com/users/827280/museful"}, "edited": false, "score": 0, "creation_date": 1531341967, "post_id": 51293715, "comment_id": 89565336, "body": "@Museful If you don&#39;t need to support <code>std::vector</code> his works great."}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1531342084, "post_id": 51293715, "comment_id": 89565381, "body": "@Yakk-AdamNevraumont it does support default template argument with c++17"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1531342491, "post_id": 51293715, "comment_id": 89565555, "body": "@Tyker Ah, I missed that C++17 feature.  And it probably rebinds the allocator without the somewhat dangerous &quot;replace everything&quot; mine needs."}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1531342670, "post_id": 51293715, "comment_id": 89565632, "body": "@Yakk-AdamNevraumont yes the allocator needs to be rebined too. so no my way wouldn&#39;t work in c++17 on vector."}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1531342773, "post_id": 51293715, "comment_id": 89565676, "body": "but any form of remplace everything can break things if it isn&#39;t specialized."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1531343679, "post_id": 51293715, "comment_id": 89566015, "body": "Hm, with the second approach, if I have something like: <code>template&lt;typename, typename&gt; struct pack {}</code> and then use: <code>replace_first&lt;packer&lt;float, float&gt;</code> I get: <code>packer&lt;int, int&gt;</code> as a result which seems to be inconsistent - I want only the first type parameter to be replaced."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1531354069, "post_id": 51293715, "comment_id": 89568845, "body": "@EdgarRokj\u0101n Yes, it finds your first type in your template instance type list, and replaces it everwhere with the second, recursively.  It has problems.  So does the alternative."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1531341277, "last_edit_date": 1531341277, "creation_date": 1531340800, "answer_id": 51293715, "question_id": 51293607, "link": "https://stackoverflow.com/questions/51293607/how-to-replace-a-template-parameter-in-a-given-type/51293715#51293715", "title": "How to replace a template parameter in a given type?", "body": "<p>First we write some machinery to replace a type in a template type instance:</p>\n\n<pre><code>template&lt;class In, class Replace&gt;\nstruct replace_first_type;\ntemplate&lt;template&lt;class...&gt;class Z, class T0, class...Ts, class Replace&gt;\nstruct replace_first_type&lt;Z&lt;T0, Ts...&gt;, Replace&gt; {\n  using type=Z&lt;Replace, Ts...&gt;;\n};\n\ntemplate&lt;class In, class Replace&gt;\nusing replace_first = typename replace_first_type&lt;In,Replace&gt;::type;\n</code></pre>\n\n<p><code>replace_first&lt; Z, X &gt;</code> takes <code>Z</code>, pattern matches it against any <code>template&lt;class...&gt;</code>, grabs the first argument, and replaces it with <code>X</code>.</p>\n\n<p>This won't work for <code>std::array&lt;int, 7&gt;</code> as <code>7</code> isn't a type, but will work for <code>std::vector&lt;int&gt;</code>; <code>vector</code> is actually <code>&lt;T, A&gt;</code> with a default argument.  The <code>template&lt;class...&gt;</code> pattern matches templates that take 0 or more classes.</p>\n\n<p>We then apply it:</p>\n\n<pre><code>template&lt;typename A&gt;\nclass foo {\n  template&lt;typename B&gt;\n  using result = replace_first&lt;B, A&gt;;\n};\n</code></pre>\n\n<p>now <code>foo&lt;int&gt;::template result&lt; std::vector&lt;double&gt; &gt;</code> is a <code>std::vector&lt;int, std::alloctor&lt;double&gt;&gt;</code>.  Which admittedly is a pretty stupid type.</p>\n\n<p>If you have a function:</p>\n\n<pre><code>  template&lt;class B&gt;\n  result&lt;B&gt; do_something() {\n    return {};\n  }\n</code></pre>\n\n<p>actually returns a value of that type.</p>\n\n<p>We can fix the problem with <code>std::allocator&lt;double&gt;</code> above by recursively replacing the type we replaced...</p>\n\n<pre><code>template&lt;class X, class Src, class Dest&gt;\nstruct subst_type {\n  using type=X;\n};\ntemplate&lt;class X, class Src, class Dest&gt;\nusing subst_t = typename subst_type&lt;X, Src, Dest&gt;::type;\ntemplate&lt;template&lt;class...&gt;class Z, class...Ts, class Src, class Dest&gt;\nstruct subst_type&lt;Z&lt;Ts...&gt;, Src, Dest&gt; {\n  using type=Z&lt;subst_t&lt;Ts, Src, Dest&gt;...&gt;;\n};\ntemplate&lt;class Src, class Dest&gt;\nstruct subst_type&lt;Src, Src, Dest&gt; {\n  using type=Dest;\n};\n</code></pre>\n\n<p>and apply to replace first:</p>\n\n<pre><code>template&lt;class In, class Replace&gt;\nstruct replace_first_type;\ntemplate&lt;template&lt;class...&gt;class Z, class T0, class...Ts, class Replace&gt;\nstruct replace_first_type&lt;Z&lt;T0, Ts...&gt;, Replace&gt; {\n  using type=Z&lt;Replace, subst_t&lt;Ts, T0, Replace&gt;...&gt;;\n};\n</code></pre>\n\n<p>and now when we <code>foo&lt;int&gt;::result&lt;std::vector&lt;double&gt;&gt;</code> we get <code>std::vector&lt;int, std::allocator&lt;int&gt;&gt;</code> instead of <code>std::vector&lt;int, std::allocator&lt;double&gt;&gt;</code> (which is a useless type).</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/faad7094eb3561d3\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n\n<p>There is some possibility that we'll get something horribly wrong from recursively replacing <code>A</code> with <code>B</code> in the rest of the arguments of a template, but as noted we definitely get something horrible with common templates if we don't do it.</p>\n"}], "owner": {"reputation": 5685, "user_id": 827280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG", "display_name": "Museful", "link": "https://stackoverflow.com/users/827280/museful"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 909, "favorite_count": 0, "accepted_answer_id": 51293678, "answer_count": 2, "score": 0, "last_activity_date": 1531346555, "creation_date": 1531340309, "question_id": 51293607, "link": "https://stackoverflow.com/questions/51293607/how-to-replace-a-template-parameter-in-a-given-type", "title": "How to replace a template parameter in a given type?", "body": "<p>Given that a template parameter called <code>B</code> is of type <code>C&lt;D&gt;</code> (on instantiation), how can I construct <code>C&lt;A&gt;</code> from <code>B</code>?</p>\n\n<p>Here is a minimalized extract from my code:</p>\n\n<pre><code>template&lt;typename A&gt;\nclass foo {\n    template&lt;typename B&gt; // B is guaranteed to always be of the form C&lt;D&gt;\n    // How to write a function here with return type C&lt;A&gt;?\n}\n</code></pre>\n"}, {"tags": ["c++", "mysql", "ubuntu", "cmake", "mysql-connector"], "comments": [{"owner": {"reputation": 908, "user_id": 3292279, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VX393.jpg?s=128&g=1", "display_name": "Alex Johnson", "link": "https://stackoverflow.com/users/3292279/alex-johnson"}, "edited": false, "score": 0, "creation_date": 1531340000, "post_id": 51293514, "comment_id": 89564591, "body": "Which part are you getting stuck on?"}, {"owner": {"reputation": 483, "user_id": 6110040, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/54f57b4329c06e84574aff5cd3d4989d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/6110040/jacob"}, "reply_to_user": {"reputation": 908, "user_id": 3292279, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VX393.jpg?s=128&g=1", "display_name": "Alex Johnson", "link": "https://stackoverflow.com/users/3292279/alex-johnson"}, "edited": false, "score": 0, "creation_date": 1531340221, "post_id": 51293514, "comment_id": 89564685, "body": "In the first section &quot;Configuring Connector/C++&quot;, i&#39;m trying to understand how to create the CMake file"}], "answers": [{"comments": [{"owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "reply_to_user": {"reputation": 483, "user_id": 6110040, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/54f57b4329c06e84574aff5cd3d4989d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/6110040/jacob"}, "edited": false, "score": 0, "creation_date": 1531340753, "post_id": 51293559, "comment_id": 89564895, "body": "Seems to be 1.1.7. Do you need the latest version?"}, {"owner": {"reputation": 483, "user_id": 6110040, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/54f57b4329c06e84574aff5cd3d4989d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/6110040/jacob"}, "edited": false, "score": 0, "creation_date": 1531341258, "post_id": 51293559, "comment_id": 89565075, "body": "I&#39;m just doing exercises so the last version is not required. But it has to work with c++11."}, {"owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "reply_to_user": {"reputation": 483, "user_id": 6110040, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/54f57b4329c06e84574aff5cd3d4989d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/6110040/jacob"}, "edited": false, "score": 0, "creation_date": 1531341400, "post_id": 51293559, "comment_id": 89565132, "body": "Since you would just be using the connector as a shared library and not compiling it, it should be fine with C++11."}, {"owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "reply_to_user": {"reputation": 483, "user_id": 6110040, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/54f57b4329c06e84574aff5cd3d4989d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/6110040/jacob"}, "edited": false, "score": 0, "creation_date": 1531344011, "post_id": 51293559, "comment_id": 89566149, "body": "Cool. Mark it as the answer if it works out for you."}, {"owner": {"reputation": 2172, "user_id": 2661419, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/iPQFJ.jpg?s=128&g=1", "display_name": "Venelin", "link": "https://stackoverflow.com/users/2661419/venelin"}, "edited": false, "score": 0, "creation_date": 1598650166, "post_id": 51293559, "comment_id": 112538461, "body": "@vincent is there any alternative for Windows?"}, {"owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "edited": false, "score": 0, "creation_date": 1598651356, "post_id": 51293559, "comment_id": 112538764, "body": "<a href=\"https://dev.mysql.com/doc/connector-cpp/8.0/en/connector-cpp-installation-binary.html#connector-cpp-installation-binary-windows\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/connector-cpp/8.0/en/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "is_accepted": true, "score": 2, "last_activity_date": 1531340066, "creation_date": 1531340066, "answer_id": 51293559, "question_id": 51293514, "link": "https://stackoverflow.com/questions/51293514/how-to-install-mysql-connector-c-in-ubuntu-16-04/51293559#51293559", "title": "How to install MySql Connector/C++ in Ubuntu 16.04", "body": "<pre><code>sudo apt install libmysqlcppconn-dev\n</code></pre>\n"}], "owner": {"reputation": 483, "user_id": 6110040, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/54f57b4329c06e84574aff5cd3d4989d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/6110040/jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3610, "favorite_count": 0, "accepted_answer_id": 51293559, "answer_count": 1, "score": 0, "last_activity_date": 1531340101, "creation_date": 1531339827, "last_edit_date": 1531340101, "question_id": 51293514, "link": "https://stackoverflow.com/questions/51293514/how-to-install-mysql-connector-c-in-ubuntu-16-04", "title": "How to install MySql Connector/C++ in Ubuntu 16.04", "body": "<p>I am quite new with C++ and CMake and for this reason I'm having trouble installing the MySql Connector in Ubuntu 16.04. I know that it's probably a simple task but I've tried for one hour without understanding what should I do.</p>\n\n<p>I'm following this <a href=\"https://dev.mysql.com/doc/connector-cpp/8.0/en/connector-cpp-installation-source-cpp.html\" rel=\"nofollow noreferrer\">guide</a> but I don't understand how to install it using the CMake file. </p>\n\n<p>Can someone please give me a simpler or more detailed explanation on what I should do?</p>\n\n<p>Thanks! </p>\n"}, {"tags": ["c++", "opencv", "h.264"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1531343690, "post_id": 51293443, "comment_id": 89566018, "body": "How are you getting this benchmark? Using the value the OS reports to benchmark your app is iffy at best."}, {"owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "edited": false, "score": 0, "creation_date": 1531384414, "post_id": 51293443, "comment_id": 89578516, "body": "Is there a chance that GPU decoding is used if playing forward, but CPU decoding is used when playing backward? (get some tool that shows your GPU usage and check)"}], "owner": {"reputation": 1, "user_id": 5537035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53c948fd8d0be3f412af82cb5e6f5fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris86", "link": "https://stackoverflow.com/users/5537035/boris86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531339479, "creation_date": 1531339479, "question_id": 51293443, "link": "https://stackoverflow.com/questions/51293443/opencv-playback-cpu-usage", "title": "OpenCV - Playback CPU usage", "body": "<p>I'm working on project that requires to play two recorded videos in both directions (forward or backward).</p>\n\n<p>Both videos recorded in parallel using H.264 encoding.</p>\n\n<p>I have written a very simple code (see below) in C++ using OpenCV 3.2.0:</p>\n\n<p>To control playback direction I have defined two flags (\"<strong>play_left_backward</strong>\", \"<strong>play_right_backward</strong>) </p>\n\n<p>If I set both flags to \"false\" the code runs using less than one percent of CPU.</p>\n\n<p>If I set only one of the flags to \"true\" the code runs using around 2% of CPU.</p>\n\n<p>But if I set both flags to \"true\" the code runs using <strong>28%</strong> of CPU.</p>\n\n<p>I cannot understand the reason for such weird behavior.</p>\n\n<p>Is anyone have any explanation ?</p>\n\n<pre><code>#include \"opencv2/imgproc/imgproc.hpp\"\n#include \"opencv2/highgui/highgui.hpp\"\n\nint main() {\n\n   bool play_left_backward = true;\n   bool play_right_backward = true;\n\n   cv::Mat frame_left;\n   cv::Mat frame_right;\n\n   cv::VideoCapture cap_left(\"D:\\\\record_left.avi\");\n   cv::VideoCapture cap_right(\"D:\\\\record_right.avi\");\n\n   // amount of frames\n   int N = (int)cap_left.get(7);\n\n   for (int i = 0; i &lt; N; i++) {\n\n       if (play_left_backward == true) {\n          cap_left.set(1, N - i - 1);\n       }\n\n       if (play_right_backward == true) {\n          cap_right.set(1, N - i - 1);\n       }\n\n       cap_left &gt;&gt; frame_left;\n       cap_right &gt;&gt; frame_right;\n\n       cv::imshow(\"Frame left\", frame_left);\n       cv::imshow(\"Frame right\", frame_right);\n\n       char c = (char)cv::waitKey(30);\n       if (c == 27) {\n          break;\n       }\n\n   }\n\n  return 0;\n}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "vector"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1531339256, "post_id": 51293369, "comment_id": 89564292, "body": "<code>std::vector</code> doesn&#39;t support having it&#39;s state shared. In fact, no type supports  having it&#39;s address assigned to."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531339365, "post_id": 51293369, "comment_id": 89564336, "body": "@Fran&#231;ois Nor does any other class."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1531339385, "post_id": 51293369, "comment_id": 89564346, "body": "Maybe you want a <code>std::shared_ptr&lt;std::vector&lt;T&gt;&gt;</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1531339444, "post_id": 51293369, "comment_id": 89564362, "body": "Why do you need this?  Can&#39;t you just pass it by/create a reference to the vector?"}, {"owner": {"reputation": 2305, "user_id": 2056201, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/bba9995d4071b28c1f54bcb8ae03a1f2?s=128&d=identicon&r=PG", "display_name": "Mich", "link": "https://stackoverflow.com/users/2056201/mich"}, "edited": false, "score": 0, "creation_date": 1531339544, "post_id": 51293369, "comment_id": 89564401, "body": "I have a sections of code that need to use the same large vector but have to refer to it by different names. Sectioned by #defines, one section actually copies and restructures the vector, another section does not, but later in the code it has to refer to the new vector"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1531339594, "post_id": 51293369, "comment_id": 89564424, "body": "Okay, so pass the vector to each part by reference."}, {"owner": {"reputation": 1262, "user_id": 3940228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1455002de0a9fc115cc877f962ea4c9f?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Sohn", "link": "https://stackoverflow.com/users/3940228/olivier-sohn"}, "edited": false, "score": 2, "creation_date": 1531339624, "post_id": 51293369, "comment_id": 89564436, "body": "<code>auto &amp; vector_1 = vector_0;</code> should work ?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1531339644, "post_id": 51293369, "comment_id": 89564446, "body": "This sounds like you need a <b>reference</b>. <code>std::vector&lt;whatever&gt;&amp; vec = vector_0;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 743, "user_id": 10021094, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hOsAzTvp3OY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3qaF7JQwaEdJHQp3np6K8YQQMGFA/mo/photo.jpg?sz=128", "display_name": "Kai Guther", "link": "https://stackoverflow.com/users/10021094/kai-guther"}, "is_accepted": false, "score": 1, "last_activity_date": 1531341615, "last_edit_date": 1531341615, "creation_date": 1531339660, "answer_id": 51293482, "question_id": 51293369, "link": "https://stackoverflow.com/questions/51293369/create-a-vector-that-points-to-elements-in-another-in-c/51293482#51293482", "title": "Create a vector that points to elements in another in C++", "body": "<p>You can create a reference to the vector</p>\n\n<pre><code>std::vector&lt;T&gt; &amp; vector_1 = vector_0;\n</code></pre>\n\n<p>This way, <code>vector_1</code> will be an alias for <code>vector_0</code>, having the same address and all elements being the same, no copying taking place.</p>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>If you instead want to have <code>vector_0</code> and <code>vector_1</code> share ownership of the same vector, but be independent objects, use a <code>shared_ptr</code> as described in <a href=\"https://stackoverflow.com/users/5241642/xirema\">Xiremas</a> answer.</p>\n"}, {"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 3, "last_activity_date": 1531340887, "creation_date": 1531340887, "answer_id": 51293729, "question_id": 51293369, "link": "https://stackoverflow.com/questions/51293369/create-a-vector-that-points-to-elements-in-another-in-c/51293729#51293729", "title": "Create a vector that points to elements in another in C++", "body": "<p>If you need <code>y</code> to simply be the same vector as <code>x</code>, make it a reference:</p>\n\n<pre><code>std::vector&lt;int&gt; x = {1,2,3,4,5};\nstd::vector&lt;int&gt; &amp; y = x;\n\nassert(std::addressof(x) == std::addressof(y));\n</code></pre>\n\n<p>If you need <code>y</code> to be reassignable, make it a pointer:</p>\n\n<pre><code>std::vector&lt;int&gt; x = {1,2,3,4,5};\nstd::vector&lt;int&gt; * y = &amp;x;\n\nassert(std::addressof(x) == y);\n</code></pre>\n\n<p>If you need <code>y</code> to share ownership of <code>x</code>, make them both a <code>std::shared_ptr</code>:</p>\n\n<pre><code>auto x = std::make_shared&lt;std::vector&lt;int&gt;&gt;({1,2,3,4,5});\nauto y = x;\n\nassert(x.get() == y.get());\n</code></pre>\n\n<p>If you need <code>y</code> to be its own vector, but contain references to the objects in <code>x</code>, make <code>y</code> a <code>std::vector&lt;std::reference_wrapper&lt;int&gt;&gt;</code> or <code>std::vector&lt;int*&gt;</code>:</p>\n\n<pre><code>std::vector&lt;int&gt; x = {1,2,3,4,5};\nstd::vector&lt;std::reference_wrapper&lt;int&gt;&gt; y(x.begin(), x.end());\n\nfor(size_t i = 0; i &lt; x.size(); i++)\n    assert(std::addressof(x[i]) == std::addressof(y[i].get()));\n\n//OR save pointers...\nstd::vector&lt;int*&gt; y;\nfor(int &amp; i : x)\n    y.emplace_back(std::addressof(i));\n\nfor(size_t i = 0; i &lt; x.size(); i++)\n    assert(std::addressof(x[i]) == y[i]);\n\n//OR save iterators...\nstd::vector&lt;decltype(x.begin())&gt; y;\nfor(auto it = x.begin(); it != x.end(); it++)\n    y.emplace_back(it);\n\nfor(size_t i = 0; i &lt; x.size(); i++) {\n    assert(std::addressof(x[i]) == std::addressof(*(y[i])));\n</code></pre>\n"}], "owner": {"reputation": 2305, "user_id": 2056201, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/bba9995d4071b28c1f54bcb8ae03a1f2?s=128&d=identicon&r=PG", "display_name": "Mich", "link": "https://stackoverflow.com/users/2056201/mich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 51293729, "answer_count": 2, "score": 0, "last_activity_date": 1531341615, "creation_date": 1531339164, "last_edit_date": 1531339454, "question_id": 51293369, "link": "https://stackoverflow.com/questions/51293369/create-a-vector-that-points-to-elements-in-another-in-c", "title": "Create a vector that points to elements in another in C++", "body": "<p>Good afternoon,</p>\n\n<p>I can't seem to be able to make a duplicate std::vector without copying it.\nI need to make a vector that points to another std::vector without copying every value</p>\n\n<p>If I write</p>\n\n<pre><code>vector_1 = vector_0;\n</code></pre>\n\n<p>In the watch window, <code>&amp;vector_1</code> and <code>&amp;vector_0</code> have completely different memory addresses</p>\n\n<p>Same with  <code>&amp;vector_1[0]</code> and <code>&amp;vector_0[0]</code> , so I understand this operation copies the vector.</p>\n\n<p>However, when I try to write <code>&amp;vector_1[0] = &amp;vector_0[0];</code> or \n    <code>&amp;vector_1 = &amp;vector_0;</code></p>\n\n<p>I get the error \n<code>Error  C2106   '=': left operand must be l-value</code></p>\n\n<p>I also tried creating a vector this way:</p>\n\n<p><code>std::vector&lt;float&gt; vector_1(vector_0[0], vector_0.size());</code> , but the <code>&amp;vector_1</code> and <code>&amp;vector_0</code> and <code>&amp;vector_1[0]</code> and <code>&amp;vector_0[0]</code> show different memory addresses, so it appears to be copying the elements again.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["c++", "templates", "c++17", "variadic-functions"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 6, "creation_date": 1531338364, "post_id": 51293144, "comment_id": 89563895, "body": "Any reason against return type deduction? Why not something like <code>auto foo(A... as) { return std::make_tuple(as...); }</code>"}, {"owner": {"reputation": 1111, "user_id": 7119460, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7c9dc795a95074aa66c6cd3e80f25704?s=128&d=identicon&r=PG&f=1", "display_name": "user7119460", "link": "https://stackoverflow.com/users/7119460/user7119460"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1531338822, "post_id": 51293144, "comment_id": 89564093, "body": "If the types are required to be known prior to actually constructing the tuple. Though I realise in this example that is not the case."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1531338933, "post_id": 51293144, "comment_id": 89564146, "body": "This code does not compile. What is the expected tuple in your example?"}, {"owner": {"reputation": 1111, "user_id": 7119460, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7c9dc795a95074aa66c6cd3e80f25704?s=128&d=identicon&r=PG&f=1", "display_name": "user7119460", "link": "https://stackoverflow.com/users/7119460/user7119460"}, "edited": false, "score": 0, "creation_date": 1531339130, "post_id": 51293144, "comment_id": 89564239, "body": "A tuple containing the first element of each vector passed to foo."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1531339408, "creation_date": 1531339408, "answer_id": 51293424, "question_id": 51293144, "link": "https://stackoverflow.com/questions/51293144/infer-parameter-pack-types-from-pack-of-template-types/51293424#51293424", "title": "Infer parameter pack types from pack of template types", "body": "<p>Taking into account provided example and clarifying comment (\"function should return a tuple of a first elements to each vector\"), the trailing return type will do the job, if for whatever reason fully <code>auto</code>matic return type deduction is not desired:</p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;class... ARG&gt; auto foo(ARG... ) -&gt; std::tuple&lt;typename ARG::value_type...&gt;;\n\nauto bar() {\n    std::vector&lt;int&gt; a;\n    std::vector&lt;bool&gt; b;\n    std::vector&lt;char* &gt; c;\n    return foo(a, b, c);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1111, "user_id": 7119460, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7c9dc795a95074aa66c6cd3e80f25704?s=128&d=identicon&r=PG&f=1", "display_name": "user7119460", "link": "https://stackoverflow.com/users/7119460/user7119460"}, "edited": false, "score": 0, "creation_date": 1531345518, "post_id": 51293451, "comment_id": 89566718, "body": "Thanks, I did not realise that the pack could be expanded in this way."}], "tags": [], "owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "is_accepted": true, "score": 1, "last_activity_date": 1531339517, "creation_date": 1531339517, "answer_id": 51293451, "question_id": 51293144, "link": "https://stackoverflow.com/questions/51293144/infer-parameter-pack-types-from-pack-of-template-types/51293451#51293451", "title": "Infer parameter pack types from pack of template types", "body": "<p>if you want the type to be infered not deduce with an auto return type</p>\n\n<pre><code>template &lt;typename ... Ts&gt;\nstd::tuple&lt;Ts...&gt; foo(const std::vector&lt;Ts&gt;&amp; ... Vec)\n{\n    return std::make_tuple(Vec[0]...);\n}\n</code></pre>\n"}], "owner": {"reputation": 1111, "user_id": 7119460, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7c9dc795a95074aa66c6cd3e80f25704?s=128&d=identicon&r=PG&f=1", "display_name": "user7119460", "link": "https://stackoverflow.com/users/7119460/user7119460"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "accepted_answer_id": 51293451, "answer_count": 2, "score": 1, "last_activity_date": 1531339517, "creation_date": 1531338169, "question_id": 51293144, "link": "https://stackoverflow.com/questions/51293144/infer-parameter-pack-types-from-pack-of-template-types", "title": "Infer parameter pack types from pack of template types", "body": "<p>Is it possible to pass a parameter pack of template types, and infer a parameter pack from the template types stored type.</p>\n\n<p>E.g. I have a function foo which returns a tuple which holds parameters <code>A...</code>. If the function accepts a parameter pack of vectors <code>B...</code> which store the types to be found in <code>A...</code>, can these be inferred somehow from <code>A...</code> alone? Or must they always be explicitly specified?</p>\n\n<pre><code>template &lt;typename A..., typename B...&gt;\nstd::tuple&lt;B...&gt; foo(A...)\n{\n    ...\n}\n\nstd::vector&lt;int&gt; a;\nstd::vector&lt;char&gt; b;\nstd::vector&lt;std::string&gt; c;\nauto bar = foo&lt;int, char, std::string&gt;(a, b, c); // Works\nauto bar = foo(a, b, c); // Will not work because B... can't be inferred yet.\n</code></pre>\n\n<p>Additionally, I can implement the constraint that all types within <code>A...</code> must be <code>std::vector</code>s via a <code>static_assert</code> but I can imagine there is a neater way using template types. Please could you also suggest such a method if one exists?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "visitor"], "comments": [{"owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "edited": false, "score": 2, "creation_date": 1531338034, "post_id": 51293061, "comment_id": 89563745, "body": "Didn&#39;t look too much into the code as this isn&#39;t a <a href=\"https://stackoverflow.com/help/mcve\">mcve</a>, but aren&#39;t you just missing <code>return</code> in <code>B::isWelcoming()</code> function?"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1531338736, "post_id": 51293061, "comment_id": 89564058, "body": "It compiles from scratch by inserting 2 missing &quot;;&quot; and a missed return. Perfect! So it was easy to go into it with a debugger, see that the virtual declaration is missing for 2 overloads and everythings is fine! It is definitely a mcve!"}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1531339148, "post_id": 51293061, "comment_id": 89564246, "body": "Look into the Acyclic Visitor Pattern"}, {"owner": {"reputation": 118, "user_id": 9426480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5xOC.jpg?s=128&g=1", "display_name": "vcloarec", "link": "https://stackoverflow.com/users/9426480/vcloarec"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1531341342, "post_id": 51293061, "comment_id": 89565108, "body": "@TavianBarnes : it looks like my solution with dynamic_cast, no?"}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1531338291, "creation_date": 1531338291, "answer_id": 51293179, "question_id": 51293061, "link": "https://stackoverflow.com/questions/51293061/polymorphism-visitor-how-to-call-overloaded-function/51293179#51293179", "title": "polymorphism, visitor, how to call overloaded function?", "body": "<p>The problem is that you mix up <em>overloading</em> and <em>overriding</em>.</p>\n\n<p>in the <code>B</code> class you have three <em>overloads</em> of the <code>isWelcomable</code> function, but only <em>one</em> of them overrides the <code>A::isWelcomable</code> function:</p>\n\n<pre><code>bool isWelcomable(const A* other) const;\n</code></pre>\n\n<p>And that is the function that will be called by <code>other-&gt;isWelcomable(this)</code>.</p>\n\n<p>I suggest you make it a habit to use the <code>override</code> special keyword when working with polymorphism, to make sure that the function you define really overrides the parent class functions:</p>\n\n<pre><code>bool isWelcomable(const A* other) const override;  // Correct\n\nbool isWelcomable(const B* other) const override;  // Incorrect, compiler error\n</code></pre>\n\n<hr>\n\n<p>And as mentioned, the <code>B::isWelcoming</code> function doesn't return anything even though it is declared to do so. That will of course lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a> which really makes all speculation about behavior moot.</p>\n"}, {"comments": [{"owner": {"reputation": 118, "user_id": 9426480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5xOC.jpg?s=128&g=1", "display_name": "vcloarec", "link": "https://stackoverflow.com/users/9426480/vcloarec"}, "edited": false, "score": 0, "creation_date": 1531339463, "post_id": 51293401, "comment_id": 89564373, "body": "I don&#39;t want that the class B or the C figure in the class A. Otherwise I have edited my code."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 118, "user_id": 9426480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5xOC.jpg?s=128&g=1", "display_name": "vcloarec", "link": "https://stackoverflow.com/users/9426480/vcloarec"}, "edited": false, "score": 0, "creation_date": 1531339598, "post_id": 51293401, "comment_id": 89564429, "body": "@vcloarec: If you don&#39;t want that, you can&#39;t get your code working. If the overload for B and C are not defined, the <code>this</code> pointer will be converted to the base pointer which is A*. And then the method is called for A*. And then you get the result you already see."}, {"owner": {"reputation": 118, "user_id": 9426480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5xOC.jpg?s=128&g=1", "display_name": "vcloarec", "link": "https://stackoverflow.com/users/9426480/vcloarec"}, "edited": false, "score": 0, "creation_date": 1531339693, "post_id": 51293401, "comment_id": 89564465, "body": "that&#39;s why I am searching for a solution, an the only one i found it is using dynamic_cast like i have wrote in my question."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 118, "user_id": 9426480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5xOC.jpg?s=128&g=1", "display_name": "vcloarec", "link": "https://stackoverflow.com/users/9426480/vcloarec"}, "edited": false, "score": 0, "creation_date": 1531339826, "post_id": 51293401, "comment_id": 89564526, "body": "@vcloarec: Sounds like a XY problem. Why I programmer don&#39;t want the correct solution? dynamic_cast needs RTTI and RTTI is expensive in general. Especially for embedded systems it is typically switched off or can&#39;t be used at all. ( See avr target on gcc for example ). Having virtual dispatching is quite fine and fast. So why you won&#39;t something more complicated?"}, {"owner": {"reputation": 118, "user_id": 9426480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5xOC.jpg?s=128&g=1", "display_name": "vcloarec", "link": "https://stackoverflow.com/users/9426480/vcloarec"}, "edited": false, "score": 0, "creation_date": 1531340312, "post_id": 51293401, "comment_id": 89564722, "body": "I have many class B or C, so i don&#39;t want to implement all of them in the class A. That&#39;s why i want the subclass manage themself."}], "tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": false, "score": 0, "last_activity_date": 1531339311, "creation_date": 1531339311, "answer_id": 51293401, "question_id": 51293061, "link": "https://stackoverflow.com/questions/51293061/polymorphism-visitor-how-to-call-overloaded-function/51293401#51293401", "title": "polymorphism, visitor, how to call overloaded function?", "body": "<p>There are some typos: Missing ';' at end of classes.</p>\n\n<p>Then you missed that the overloads of <code>virtual bool isWelcomable(const A* other) const =0;</code> for types <code>B*</code> and <code>C*</code> are missing.</p>\n\n<p>Then you missed to return the values from the function you call: <code>return other-&gt;isWelcomable(this);</code></p>\n\n<p>And why you have defined <code>virtual bool isWelcoming(const A* other) const</code> as virtual? There is no need for that!</p>\n\n<p>General hints: Use <code>override</code> if you want to override a virtual function. In your case the compiler emits an error if you use it!</p>\n\n<p>Always enable all warnings. The missing return statement is then catched before wondering of runtime results.</p>\n\n<p>complete fixed code:</p>\n\n<pre><code>class A;\nclass B;    \nclass C;    \n\nclass A\n{\n    public : \n        virtual bool isWelcoming(const A* other) const =0;\n        virtual bool isWelcomable(const A* other) const =0;\n        virtual bool isWelcomable(const B* other) const =0;\n        virtual bool isWelcomable(const C* other) const =0; \n};\n\nclass B: public A\n{           \n    public:\n\n        bool isWelcoming(const A* other) const { return other-&gt;isWelcomable(this); }\n\n        bool isWelcomable(const A* other) const override { return false; }\n        bool isWelcomable(const B* other) const override { return true; }\n        bool isWelcomable(const C* other) const override { return false; }\n};\n\nclass C: public A\n{       \n    public:\n\n        bool isWelcoming(const A* other) const { return other-&gt;isWelcomable(this); }\n\n        bool isWelcomable(const A* other) const override { return false; }\n        bool isWelcomable(const B* other) const override { return true; }\n        bool isWelcomable(const C* other) const override { return true; }\n};\n\nint main()\n{\n    A *b1=new B;\n    A *b2=new B;\n    A *c=new C;\n\n    std::cout&lt;&lt; b1-&gt;isWelcoming(b2); //--&gt; return false but I want true;\n    std::cout&lt;&lt; c -&gt;isWelcoming(b1); //--&gt; return false OK;\n    std::cout&lt;&lt; b1-&gt;isWelcoming(c); //--&gt; return false but I want true;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 118, "user_id": 9426480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5xOC.jpg?s=128&g=1", "display_name": "vcloarec", "link": "https://stackoverflow.com/users/9426480/vcloarec"}, "edited": false, "score": 0, "creation_date": 1531339507, "post_id": 51293431, "comment_id": 89564388, "body": "I don&#39;t want that the class B or the class C figure in the class A."}, {"owner": {"reputation": 743, "user_id": 10021094, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hOsAzTvp3OY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3qaF7JQwaEdJHQp3np6K8YQQMGFA/mo/photo.jpg?sz=128", "display_name": "Kai Guther", "link": "https://stackoverflow.com/users/10021094/kai-guther"}, "reply_to_user": {"reputation": 118, "user_id": 9426480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5xOC.jpg?s=128&g=1", "display_name": "vcloarec", "link": "https://stackoverflow.com/users/9426480/vcloarec"}, "edited": false, "score": 0, "creation_date": 1531340063, "post_id": 51293431, "comment_id": 89564615, "body": "Yes, it is not really nice design, you could make a virtual member function that returns some enum (encoding the type) and make the output of <code>isWelcoming</code> depending on the call to that function."}], "tags": [], "owner": {"reputation": 743, "user_id": 10021094, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hOsAzTvp3OY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3qaF7JQwaEdJHQp3np6K8YQQMGFA/mo/photo.jpg?sz=128", "display_name": "Kai Guther", "link": "https://stackoverflow.com/users/10021094/kai-guther"}, "is_accepted": false, "score": 0, "last_activity_date": 1531341048, "last_edit_date": 1531341048, "creation_date": 1531339434, "answer_id": 51293431, "question_id": 51293061, "link": "https://stackoverflow.com/questions/51293061/polymorphism-visitor-how-to-call-overloaded-function/51293431#51293431", "title": "polymorphism, visitor, how to call overloaded function?", "body": "<p>The base class pointer you pass to <code>isWelcoming</code> cannot be used to call the functions</p>\n\n<pre><code> bool isWelcomable(const B* other) const;\n bool isWelcomable(const C* other) const;\n</code></pre>\n\n<p>As <code>A</code> does not have members with that signature. While you can replace the return type of a virtual function with the derived type, this does not work for the arguments. </p>\n\n<p>To get the desired behavior, <code>A</code> needs a member function <code>isWelcomable</code> for each derived type</p>\n\n<pre><code>class A{\npublic :\n  virtual bool isWelcoming(const A* other) const =0;\n  virtual bool isWelcomable(const A* other) const =0;\n  virtual bool isWelcomable(const B* other) const =0;\n  virtual bool isWelcomable(const C* other) const =0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE</strong></p>\n\n<p>If you do not want <code>A</code> to refer to the derived classes, you could also trade the <code>isWelcomable</code> function for a <code>getType</code> function</p>\n\n<pre><code>// enum for convenience\nenum AType{a,b,c};                                                                             \n\nclass A{                                                                                                                                                                                      \npublic :                                                                                       \n  virtual bool isWelcoming(const A* other) const =0; \n  // tell which derived type you are                                          \n  virtual AType getType() const {return a;};                                                    \n};                                                                                             \n\nclass B: public A{                                                                                                                                                                       \npublic:                                                                                      \n\n  virtual bool isWelcoming(const A* other) const                                             \n  {                                 \n    // decide based on what type other points to                                                         \n    switch(other-&gt;getType()){                                                                \n    case(a):                                                                                 \n      return false;                                                                          \n    case(b):                                                                                 \n      return true;                                                                           \n    case(c):                                                                                 \n      return true;                                                                           \n    }                                                                                        \n  }                                                                                          \n\n  AType getType() const {return b;}                                                          \n};                                                                                           \n\nclass C: public A{                                                                                                                                                                   \npublic:                                       \n\n  virtual bool isWelcoming(const A* other) const\n  {                                                                                                                             \n    switch(other-&gt;getType()){                                                              \n    case(a):                                                                               \n      return false;                                                                        \n    case(b):                                                                               \n      return false;                                                                        \n    case(c):                                                                               \n      return true;                                                                         \n    }                                                                                      \n  }                                                                                        \n\n  AType getType() const {return c;}                                                        \n};          \n</code></pre>\n\n<p>Note that this moves the information about whether <code>B</code> welcomes <code>C</code> and so on from the guest to the host, so <code>B</code> now has to know what it welcomes instead of who welcomes it. </p>\n\n<p>Its also not a very elegant solution, essentially the list of derived classes was now moved from <code>A</code> to <code>AType</code>. As each derived class needs to be able to react to each other derived class depending on the type, there is no solution to this without having such a list somewhere.</p>\n"}], "owner": {"reputation": 118, "user_id": 9426480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5xOC.jpg?s=128&g=1", "display_name": "vcloarec", "link": "https://stackoverflow.com/users/9426480/vcloarec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1535600609, "creation_date": 1531337823, "last_edit_date": 1535600609, "question_id": 51293061, "link": "https://stackoverflow.com/questions/51293061/polymorphism-visitor-how-to-call-overloaded-function", "title": "polymorphism, visitor, how to call overloaded function?", "body": "<p>I want to make subclassed object which will react differently with other subclassing objects (class can welcome another class but not all)\nThe principle of the code is derivative from the visitor design pattern:</p>\n\n<pre><code>class A\n{\npublic :\n    virtual bool isWelcoming(const A* other) const =0;\n    virtual bool isWelcomable(const A* other) const =0;\n\n};\n\nclass C;\n\nclass B: public A\n{\npublic:\n\n    virtual bool isWelcoming(const A* other) const \n    {\n        return other-&gt;isWelcomable(this);\n    }\n\n    bool isWelcomable(const A* other) const \n    {\n        return false;\n    }\n\n    bool isWelcomable(const B* other) const \n    {\n        return true;\n    }\n\n    bool isWelcomable(const C* other) const \n    {\n        return false;\n    }\n\n};\n\nclass C: public A\n{\npublic:\n\n    virtual bool isWelcoming(const A* other) const \n    {\n        return other-&gt;isWelcomable(this);\n    }\n\n    bool isWelcomable(const A* other) const \n    {\n        return false;\n    }\n\n    bool isWelcomable(const B* other) const \n    {\n        return true;\n    }\n\n    bool isWelcomable(const C* other) const \n    {\n        return true;\n    }\n};\n</code></pre>\n\n<p>But when I do this</p>\n\n<pre><code>A *b1=new B;\nA *b2=new B;\nA *c=new C;\n\nstd::cout&lt;&lt;b1-&gt;isWelcoming(b2); //--&gt; return false but I want true;\nstd::cout&lt;&lt;c-&gt;isWelcoming(b1); //--&gt; return false OK;\nstd::cout&lt;&lt;b1-&gt;isWelcoming(c); //--&gt; return false but I want true;\n</code></pre>\n\n<p>It is always the function isWelcomable(const A* other) that is called and not the overload function isWelcomable(const B* other) or isWelcomable(const C* other).</p>\n\n<p>It is normal because A::isWelcomable(const B* other) and A::isWelcomable(const C* other) don't exist ... and I don't want they exist.</p>\n\n<p>Is there a way to call the isWelcomable(const B* other) or the isWelcomable(const C* other) function?</p>\n\n<p>With dynamic_cast but it is not very clean ? like this :</p>\n\n<pre><code>class C;    \nclass B: public A\n    {\npublic:\n\n    virtual bool isWelcoming(const A* other) const \n    {\n        return other-&gt;isWelcomable(this);\n    }\n\n    bool isWelcomable(const A* other) const \n    {\n        const B* b=dynamic_cast&lt;B*&gt;(A);\n        if (b)\n            return isWelcomable(b);\n\n        const C* c=dynamic_cast&lt;C*&gt;(A);\n        if (c)\n            return isWelcomable(c);\n\n        return false;\n    }\n\n    bool isWelcomable(const B* other) const \n    {\n        return true;\n    }\n\n    bool isWelcomable(const C* other) const \n    {\n        return false;\n    }\n\n};\n\nclass C: public A\n{\npublic:\n\n    virtual bool isWelcoming(const A* other) const \n    {\n        return other-&gt;isWelcomable(this);\n    }\n\n    bool isWelcomable(const A* other) const \n    {\n        const B* b=dynamic_cast&lt;B*&gt;(A);\n        if (b)\n            return isWelcomable(b);\n\n        const C* c=dynamic_cast&lt;C*&gt;(A);\n        if (c)\n            return isWelcomable(c);\n\n        return false;\n    }\n\n    bool isWelcomable(const B* other) const \n    {\n        return true;\n    }\n\n    bool isWelcomable(const C* other) const \n    {\n        return true;\n    }\n};\n</code></pre>\n\n<p>Thanks for your help.</p>\n\n<p><strong><em>UPDATE :</em></strong>\nThe solution with dynamic_cast, that looks a bit like the Acyclic visitor (thanks to TavianBarnes) can do what I want but uses the not recommended dynamic_cast. Furthermore, this solution violate the Liskov Substitution Principle.</p>\n\n<p>I have thought to use getType() like Kai Guther suggest, with string instead an enum, but this solution violate too the Liskov Substitution Principle, and, in my opinion, more than the \"dynamic_cast\" solution.</p>\n\n<p>So, I don't think there are solution that don't violate this principle, and I will choose the first solution because I find it more elegant, the function doesn't have to be fast (only one operation responding to a user action) and the application is not destined for an embedded system.</p>\n"}, {"tags": ["c++", "c++11", "interface"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1531336620, "post_id": 51292673, "comment_id": 89563140, "body": "Have you read <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0147r0.html\" rel=\"nofollow noreferrer\">this</a>?"}, {"owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1531336944, "post_id": 51292673, "comment_id": 89563287, "body": "Got some idea ...Thanks for the link."}], "answers": [{"tags": [], "owner": {"reputation": 3183, "user_id": 3063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94037fcc56672e711673c00feba9d62a?s=128&d=identicon&r=PG", "display_name": "palotasb", "link": "https://stackoverflow.com/users/3063/palotasb"}, "is_accepted": true, "score": 19, "last_activity_date": 1615200687, "last_edit_date": 1615200687, "creation_date": 1531403890, "answer_id": 51307580, "question_id": 51292673, "link": "https://stackoverflow.com/questions/51292673/what-is-in-simple-understanding-narrow-contract-and-wide-contract-in-terms-of/51307580#51307580", "title": "What is (in simple understanding) narrow contract and wide contract in terms of c++ interface(s)?", "body": "<p>Wide contract functions have well-defined behavior for all possible inputs, while narrow contracts mean that the functions can only be called when certain preconditions are met.</p>\n<p>&quot;Input&quot; might also include global state or the object for which a member function is called. Well-defined behavior might mean throwing an exception.</p>\n<p>For example, <code>std::vector&lt;int&gt;</code>-s <code>.size()</code> member function has a wide contract because it can be called on any instance of a vector (as in <code>std::vector&lt;int&gt; v; /* anything can happen with v here... */; auto s = v.size();</code> is always valid). The <code>operator[](size_t index)</code> (as in <code>int x = v[10]</code>) has a narrow contract, because it can only be called with a parameter that is less than <code>.size()</code>, otherwise it is undefined. The <code>.at(size_t i)</code> member function (as in <code>int y = v.at(10)</code>) however has a wide contract, because it is specified to throw an exception when the index is out of range.</p>\n<p>Preconditions are not always easy to verify: For pointers such as <code>int* p</code>, the <code>*</code> operator has a narrow contract, because you can only dereference a pointer when it points to a valid object, but there is no general way to verify a pointer before dereferencing it.</p>\n"}], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1665, "favorite_count": 5, "accepted_answer_id": 51307580, "answer_count": 1, "score": 12, "last_activity_date": 1615200687, "creation_date": 1531336295, "last_edit_date": 1531339735, "question_id": 51292673, "link": "https://stackoverflow.com/questions/51292673/what-is-in-simple-understanding-narrow-contract-and-wide-contract-in-terms-of", "title": "What is (in simple understanding) narrow contract and wide contract in terms of c++ interface(s)?", "body": "<p>While walking through some <code>c++11</code> concepts, I came across the terms <code>narrow contract</code> and <code>wide contract</code>.</p>\n\n<p>But I failed to figure out a simple function example(s) which is/are written for these contracts.</p>\n\n<p><strong>Can I see a simple function example that distinguishes between these two contracts?</strong></p>\n"}, {"tags": ["c#", "c++", "pinvoke", "dllexport"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1531337767, "post_id": 51292618, "comment_id": 89563617, "body": "We can&#39;t see your C# code. But I don&#39;t think you can return a struct like that by value with pinvoke."}, {"owner": {"reputation": 191, "user_id": 2247780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e20e15e4c5966a0caba0113ce9fbcb0?s=128&d=identicon&r=PG", "display_name": "Banusundar Arumugam", "link": "https://stackoverflow.com/users/2247780/banusundar-arumugam"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1531341187, "post_id": 51292618, "comment_id": 89565049, "body": "[DllImport(CPPDll, CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Unicode)]         public static extern ArrayD CPPMetho();  and i Call this method inside my c# class. Even thought the struct was ceated inside the CPP method as unique ptr, im able to return it as val by dereferencing with the help if &quot;*&quot;, but the array pointer inside that struct is lost"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1531341371, "post_id": 51292618, "comment_id": 89565123, "body": "Return the struct as an out param. Stop trying to use C++ lifetime management."}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 2247780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e20e15e4c5966a0caba0113ce9fbcb0?s=128&d=identicon&r=PG", "display_name": "Banusundar Arumugam", "link": "https://stackoverflow.com/users/2247780/banusundar-arumugam"}, "edited": false, "score": 0, "creation_date": 1531336526, "post_id": 51292681, "comment_id": 89563091, "body": "I understood that and confirmed it. But i need to pass this data to C# , im not sure how smart pointer or vector will be marshalled in c#, any idea?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 191, "user_id": 2247780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e20e15e4c5966a0caba0113ce9fbcb0?s=128&d=identicon&r=PG", "display_name": "Banusundar Arumugam", "link": "https://stackoverflow.com/users/2247780/banusundar-arumugam"}, "edited": false, "score": 0, "creation_date": 1531336637, "post_id": 51292681, "comment_id": 89563148, "body": "@BanusundarArumugam Considering that you are <i>already</i> returning a smart pointer (which is what <code>arrayd</code> is, being a <code>std::unique_ptr&lt;ArrayD&gt;</code> object), it&#39;s probably handled well by the marshalling. I think (but do not know) that marshalling a vector would work fine as well."}, {"owner": {"reputation": 191, "user_id": 2247780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e20e15e4c5966a0caba0113ce9fbcb0?s=128&d=identicon&r=PG", "display_name": "Banusundar Arumugam", "link": "https://stackoverflow.com/users/2247780/banusundar-arumugam"}, "edited": false, "score": 0, "creation_date": 1531336744, "post_id": 51292681, "comment_id": 89563205, "body": "Sorry I&#39;m not returning the smart pointer, the last line in the code is as below return *arrayd. Let me try using vector. Thanks for the input"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1531341881, "post_id": 51292681, "comment_id": 89565296, "body": "Returning C++ types like vector isn&#39;t going to pan out in interop."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1531336541, "last_edit_date": 1531336541, "creation_date": 1531336346, "answer_id": 51292681, "question_id": 51292618, "link": "https://stackoverflow.com/questions/51292618/pointer-reference-lost-in-dllexport/51292681#51292681", "title": "Pointer reference lost in dllexport", "body": "<p>These two lines are the problem:</p>\n\n<pre><code>auto arrayData = std::make_unique&lt;float[]&gt;(arrayd.count);\n\narrayd.arrayData= arrayData .get();\n</code></pre>\n\n<p>The first creates a smart pointer wrapping an array. The second line saves a pointer to the wrapped array.</p>\n\n<p>Then when you return from the function, the life-time of <code>arrayData</code> ends and it is destructed, which then free's the array it wraps. Which leaves your saved pointer invalid, as it is now pointing to unallocated memory.</p>\n\n<p>The solution is to either use smart pointers in the structure as well, or better yet use a <code>std::vector&lt;float&gt;</code> (in which case you don't need the structure at all).</p>\n"}, {"tags": [], "owner": {"reputation": 102162, "user_id": 613130, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/40bd5f390cba274159501bb244bc29f4?s=128&d=identicon&r=PG", "display_name": "xanatos", "link": "https://stackoverflow.com/users/613130/xanatos"}, "is_accepted": false, "score": 0, "last_activity_date": 1531381401, "creation_date": 1531381401, "answer_id": 51299962, "question_id": 51292618, "link": "https://stackoverflow.com/questions/51292618/pointer-reference-lost-in-dllexport/51299962#51299962", "title": "Pointer reference lost in dllexport", "body": "<p>The minimal number of changes would be:</p>\n\n<pre><code>ArrayD arrayd = {};\narrayd.count = 10;\n\n// std::unique_ptr&lt;float[]&gt; arrayData\n// don't let auto hide what the types really are!\nauto arrayData = std::make_unique&lt;float[]&gt;(arrayd.count);\n\n// Fill data to the array created above\n\narrayd.arrayData = arrayData.release();\nreturn arrayd;\n</code></pre>\n\n<p>Note that I've changed the allocation of <code>arrayd</code>. Now it is a stack variable. And for the <code>arrayData</code> I've added a <code>release()</code> so that the <code>std::unique_ptr&lt;&gt;</code> created by <code>std::make_unique&lt;float[]&gt;</code> won't release it. You'll have to create a companion <code>FreeArrayD(ArrayD&amp; arrayData)</code> to free the allocated memory.</p>\n"}], "owner": {"reputation": 191, "user_id": 2247780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e20e15e4c5966a0caba0113ce9fbcb0?s=128&d=identicon&r=PG", "display_name": "Banusundar Arumugam", "link": "https://stackoverflow.com/users/2247780/banusundar-arumugam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1531381401, "creation_date": 1531336081, "question_id": 51292618, "link": "https://stackoverflow.com/questions/51292618/pointer-reference-lost-in-dllexport", "title": "Pointer reference lost in dllexport", "body": "<p>I'm trying to call a CPP method from my C# code which returns me the below structure.</p>\n\n<p>CPP:</p>\n\n<pre><code>struct ArrayD\n{\nint count;\nfloat* arrayData;\n}\n</code></pre>\n\n<p>C#:</p>\n\n<pre><code>struct ArrayD\n{\nint count;\nIntPtr arrayData;\n}\n</code></pre>\n\n<p>The array is initialized using std::make_unique in the CPP code and the struct is returned back.</p>\n\n<p>But when i try to copy the IntPtr to a float array in C# using Marshal.Copy, I get Attempted to read/write corrupted memory error.</p>\n\n<p>I confirmed that the reference to array is lost over the dll export, is there an way to keep the reference or data across the code.</p>\n\n<p>Below is the code</p>\n\n<pre><code>extern \"C\" ArrayD _declspec(dllexport) __stdcall  CPPMetho()\n    {\n        auto arrayd  = std::make_unique&lt;ArrayD&gt;();\n        arrayd.count = 10;\n\n        auto arrayData = std::make_unique&lt;float[]&gt;(arrayd.count);\n\n// Fill data to the array created above\n\n        arrayd.arrayData= arrayData .get();\n\n        return arrayd;\n    }\n</code></pre>\n\n<p>I call the above API in my C# code, i get the value of \"count\" from the array, but when i try to Marshal the array data, i get exception.</p>\n\n<p>Any idea how to keep the reference in C# to enable Marshalling</p>\n"}, {"tags": ["c++", "sfinae"], "answers": [{"tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 11, "last_activity_date": 1531337120, "last_edit_date": 1531337120, "creation_date": 1531336478, "answer_id": 51292716, "question_id": 51292574, "link": "https://stackoverflow.com/questions/51292574/sfinae-constructors/51292716#51292716", "title": "SFINAE Constructors", "body": "<p>Use a non-type template parameter instead:</p>\n\n<pre><code>template &lt;class Integer,\n    std::enable_if_t&lt;std::is_integral&lt;Integer&gt;::value, int&gt; = 0&gt;\nT(Integer n) {\n    // ...\n}\n\ntemplate &lt;class Float,\n    std::enable_if_t&lt;std::is_floating_point&lt;Float&gt;::value, int&gt; = 0&gt;\nT(Float n) {\n    // ...\n}\n</code></pre>\n\n<p>This works because the compiler has to substitute the first template parameter before it can determine the type of the value parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "is_accepted": false, "score": 1, "last_activity_date": 1531336535, "creation_date": 1531336535, "answer_id": 51292735, "question_id": 51292574, "link": "https://stackoverflow.com/questions/51292574/sfinae-constructors/51292735#51292735", "title": "SFINAE Constructors", "body": "<p>One way to fix this is to add extra <code>, typename=void</code> arguments so that none of the overloads has the same number of template parameters.</p>\n"}], "owner": {"reputation": 80284, "user_id": 13430, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QUCnD.png?s=128&g=1", "display_name": "Evan Teran", "link": "https://stackoverflow.com/users/13430/evan-teran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "closed_date": 1531336864, "accepted_answer_id": 51292716, "answer_count": 2, "score": 5, "last_activity_date": 1531337120, "creation_date": 1531335868, "question_id": 51292574, "link": "https://stackoverflow.com/questions/51292574/sfinae-constructors", "closed_reason": "Duplicate", "title": "SFINAE Constructors", "body": "<p>I have been liking SFINAE syntax like this for functions, seems to generally work well!</p>\n\n<pre><code>template &lt;class Integer, class = typename std::enable_if&lt;std::is_integral&lt;Integer&gt;::value&gt;::type&gt;\nT(Integer n) {\n    // ...\n}\n</code></pre>\n\n<p>But am running into an issue when I want to do this as well in the same class...</p>\n\n<pre><code>template &lt;class Float, class = typename std::enable_if&lt;std::is_floating_point&lt;Float&gt;::value&gt;::type&gt;\nT(Float n) {\n    // ...\n}\n</code></pre>\n\n<p>Getting errors such as this:</p>\n\n<pre><code>./../T.h:286:2: error: constructor cannot be redeclared\n        T(Float n) {\n        ^\n./../T.h:281:2: note: previous definition is here\n        T(Integer n) {\n        ^\n1 error generated.\n</code></pre>\n\n<p>Shouldn't these constructors only exist for the appropriate types and never at the same time? Why do they conflict?</p>\n\n<p>Am I being a bit thick here?</p>\n\n<p>This on the other hand does work (but I don't like the syntax as much):</p>\n\n<pre><code>template &lt;class Integer&gt;\nT(Integer n, typename std::enable_if&lt;std::is_integral&lt;Integer&gt;::value&gt;::type* = nullptr) {\n}\n\ntemplate &lt;class Float&gt;\nT(Float n, typename std::enable_if&lt;std::is_floating_point&lt;Float&gt;::value&gt;::type* = nullptr) {\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "c++11", "visual-c++", "c++14"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 3, "creation_date": 1531335482, "post_id": 51292461, "comment_id": 89562605, "body": "<code>for (int x=0; x&lt;numOfRepetitions; x++)</code> If you&#39;re going to use int64_t in one place you need to use it in all places. Print the number out after you read it. If it&#39;s right there but your program doesn&#39;t work then the problem is somewhere else."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1531335507, "post_id": 51292461, "comment_id": 89562619, "body": "&quot;I hear something keeps rotating so fast until I close the cmd window ( maybe CPU)&quot; That&#39;s the fan. It&#39;s a sign that the CPU is working hard, though"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1531335644, "post_id": 51292461, "comment_id": 89562679, "body": "<code>signed</code> integer overflow is undefined behavior. Your program very well may be rotating your CPU."}, {"owner": {"reputation": 31, "user_id": 9677377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d07ef5c81c39bb1357e27081aa53868?s=128&d=identicon&r=PG&f=1", "display_name": "johnyak", "link": "https://stackoverflow.com/users/9677377/johnyak"}, "edited": false, "score": 0, "creation_date": 1531335690, "post_id": 51292461, "comment_id": 89562695, "body": "Retired Ninja -- I tried what you said switched x and i to be int64_t, but the problem still exits."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 2, "creation_date": 1531335999, "post_id": 51292461, "comment_id": 89562847, "body": "Did you ever think you&#39;re going about this the wrong way. Count the number of a&#39;s in the string once, then multiply. The number of a&#39;s isn&#39;t going to change."}, {"owner": {"reputation": 31, "user_id": 9677377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d07ef5c81c39bb1357e27081aa53868?s=128&d=identicon&r=PG&f=1", "display_name": "johnyak", "link": "https://stackoverflow.com/users/9677377/johnyak"}, "edited": false, "score": 0, "creation_date": 1531336151, "post_id": 51292461, "comment_id": 89562920, "body": "I know, my input &#39;a&#39; is just to simplify the problem. The program is designed for inputs like &quot; apple&quot;, so it counts &#39;a&#39;  numOfRepetitions/string.length() times"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1531336298, "post_id": 51292461, "comment_id": 89562994, "body": "Perhaps OP is on a platform pre c++11 where <code>std::cin</code> isn&#39;t required to have <code>operator&gt;&gt;(long long&amp;)</code> and is using a narrow type?"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1531336563, "post_id": 51292461, "comment_id": 89563112, "body": "Does this not do what you need? <a href=\"https://ideone.com/qiA2q2\" rel=\"nofollow noreferrer\">ideone.com/qiA2q2</a> At the very least it shows that large numbers aren&#39;t necessarily a problem. Print the number out when you read it, look at it in the debugger, etc."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531336655, "post_id": 51292461, "comment_id": 89563160, "body": "@johnyak What compiler are you using (including version number)? What build flags are you using?"}, {"owner": {"reputation": 31, "user_id": 9677377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d07ef5c81c39bb1357e27081aa53868?s=128&d=identicon&r=PG&f=1", "display_name": "johnyak", "link": "https://stackoverflow.com/users/9677377/johnyak"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1531336806, "post_id": 51292461, "comment_id": 89563230, "body": "@Retired Ninja - I am going to try the link. Thanks,"}, {"owner": {"reputation": 31, "user_id": 9677377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d07ef5c81c39bb1357e27081aa53868?s=128&d=identicon&r=PG&f=1", "display_name": "johnyak", "link": "https://stackoverflow.com/users/9677377/johnyak"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531336809, "post_id": 51292461, "comment_id": 89563232, "body": "@Francois Andrieux I am using Visual Studio 2017 ( community)"}, {"owner": {"reputation": 31, "user_id": 9677377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d07ef5c81c39bb1357e27081aa53868?s=128&d=identicon&r=PG&f=1", "display_name": "johnyak", "link": "https://stackoverflow.com/users/9677377/johnyak"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531337374, "post_id": 51292461, "comment_id": 89563436, "body": "@Fran&#231;oisAndrieux exactly, that&#39;s the problem. However, try with &#39;a&#39; and 1000 for instance, and it will output 1000. Which means the algorithm doesn&#39;t cause an endless loop"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531337508, "post_id": 51292461, "comment_id": 89563495, "body": "@johnyak It only proves that it doesn&#39;t cause an endless loop for inputs of 1000. For example <code>int x; for(char y = 0; y &lt; x; ++y);</code> will work for values of <code>x</code> up to <code>CHAR_MAX</code>, but it will break when the value of <code>x</code> gets too big. Possibly by being an infinite loop. Though you haven&#39;t addressed how you got the output you claim in the question."}, {"owner": {"reputation": 31, "user_id": 9677377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d07ef5c81c39bb1357e27081aa53868?s=128&d=identicon&r=PG&f=1", "display_name": "johnyak", "link": "https://stackoverflow.com/users/9677377/johnyak"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531337841, "post_id": 51292461, "comment_id": 89563655, "body": "@Fran&#231;oisAndrieux the output &quot;1410065408 &quot; I got is from HackerRank compiler. Also, I think I get your point, but can&#39;t we make INT_MAX holds 13 digits number ?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1531338033, "post_id": 51292461, "comment_id": 89563743, "body": "@johnyak First, when asked how your program was compiled, it meant how was your program compiled <i>to get the output you&#39;ve claimed</i>. So Visual Studio 2017 has nothing to do with your result. Second, you can&#39;t change <code>INT_MAX</code> except by changing your platform. This is similar to asking to reduce the constant of gravity for your convenience. It&#39;s a physical property of the system you  occupy like <code>INT_MAX</code> is a physical property of the system your code occupies. Third, I don&#39;t know <i>how</i> the online compiler got a result, but I don&#39;t think it actually ran your code to completion."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531338241, "post_id": 51293135, "comment_id": 89563837, "body": "This is an alternative solution to the code given, but doesn&#39;t address the concern of why the result wasn&#39;t correct in the first place. Secondly, <code>at()</code> is a more costly operation than <code>operator[]</code> since it performs bounds check. Prefer <code>at()</code> when the index isn&#39;t know to be within the bounds of the container and <code>operator[]</code> when it is known."}, {"owner": {"reputation": 245, "user_id": 10025445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c215777ec0036f32d949a80dbf259345?s=128&d=identicon&r=PG&f=1", "display_name": "acade", "link": "https://stackoverflow.com/users/10025445/acade"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531339822, "post_id": 51293135, "comment_id": 89564524, "body": "About at and operator[]. Operator[] using for debug dev. Look into some container in stl and you will see that operator[] aimed for more effective search of error."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531340126, "post_id": 51293135, "comment_id": 89564644, "body": "But that&#39;s for debug builds. <code>at</code> is required to bounds check at run time but <code>operator[]</code> is not. Now, both of these are <i>allowed</i> to perform any other checks beyond those required. This is useful for developers to signal problems early. But in a release build, a reasonable standard library implementation will limit those checks to the minimum. The bounds check inserted by debug builds are completely irrelevant in selecting one of these approaches over another. See <a href=\"https://godbolt.org/g/ho5Yuv\" rel=\"nofollow noreferrer\">here</a> for a demonstration."}, {"owner": {"reputation": 245, "user_id": 10025445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c215777ec0036f32d949a80dbf259345?s=128&d=identicon&r=PG&f=1", "display_name": "acade", "link": "https://stackoverflow.com/users/10025445/acade"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531340848, "post_id": 51293135, "comment_id": 89564931, "body": "Actually in release operator[] have advantage over at method. And what do you think about v._Get_data()._Myfirst[index]? Does it make sense use this option for jumps in speed, if we&#39;re sure in index&#39;s correctly?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531341010, "post_id": 51293135, "comment_id": 89564978, "body": "No, because those methods aren&#39;t defined by the standard. And it likely won&#39;t improve the speed at all. Does your platform expose implementation details publicly?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531341547, "post_id": 51293135, "comment_id": 89565186, "body": "I&#39;ve opened a <a href=\"https://chat.stackoverflow.com/rooms/174840/at-operator-discussion\">chat room</a> if you want to continue talking about this instead of continuing in this comment section."}], "tags": [], "owner": {"reputation": 245, "user_id": 10025445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c215777ec0036f32d949a80dbf259345?s=128&d=identicon&r=PG&f=1", "display_name": "acade", "link": "https://stackoverflow.com/users/10025445/acade"}, "is_accepted": false, "score": 0, "last_activity_date": 1531338128, "creation_date": 1531338128, "answer_id": 51293135, "question_id": 51292461, "link": "https://stackoverflow.com/questions/51292461/int64-t-doesnt-hold-13-digit-integer/51293135#51293135", "title": "int64_t doesn&#39;t hold 13 digit integer", "body": "<p>Try this option:</p>\n\n<pre><code>int main()\n{\n    string s;\n    getline(cin, s);\n    int64_t numOfRepetitions = 0;\n    cin &gt;&gt; numOfRepetitions;\n    cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n    int64_t countA = 0;\n    size_t i = 0;\n    for (; i &lt; s.size(); ++i)\n        if (s.at(i) == 'a')\n            ++countA;\n    if (i)\n        numOfRepetitions = (numOfRepetitions / i) * countA;\n    std::cout &lt;&lt; numOfRepetitions &lt;&lt; \"\\n\";\n    std::cin.get();\n    return 0;\n}\n</code></pre>\n\n<p>Loop with x &lt; numOfRepetitions is excess\nWe can to count repetitions in string and then multiply on value, how many string size fits in numOfRepetitions.\nAdvice:\nuse prefix type of increment, if it's possible.\nand instead operator[] in string and other stl containers use method at.</p>\n"}, {"tags": [], "owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "is_accepted": false, "score": -2, "last_activity_date": 1531338187, "creation_date": 1531338187, "answer_id": 51293151, "question_id": 51292461, "link": "https://stackoverflow.com/questions/51292461/int64-t-doesnt-hold-13-digit-integer/51293151#51293151", "title": "int64_t doesn&#39;t hold 13 digit integer", "body": "<p>The way you're going about solving the problem is much harder than it needs to be. You can get the answer by counting the number of 'a' characters once for the full string and whatever would be leftover and multiplying.</p>\n\n<p>In these programming challenges the brute force solution is rarely the right one. Your massive loop would take too long to run.</p>\n\n<pre><code>long repeatedString(string s, long n)\n{\n    long full = n / s.size();\n    long rem = n % s.size();\n    long count = 0;\n    long rem_count = 0;\n    for (long i = 0; i &lt; s.size(); ++i)\n    {\n        if (s[i] == 'a')\n        {\n            ++count;\n            if (i &lt; rem)\n            {\n                ++rem_count;\n            }\n        }\n    }\n    return count * full + rem_count;\n}\n</code></pre>\n\n<p>It is worth noting that <code>long</code> is not sufficient to solve this problem in Visual Studio, you would need to change to <code>long long</code> or <code>int64_t</code>. It works on Hackerrank because they are compiling on Linux where long is 64-bits.</p>\n"}], "owner": {"reputation": 31, "user_id": 9677377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d07ef5c81c39bb1357e27081aa53868?s=128&d=identicon&r=PG&f=1", "display_name": "johnyak", "link": "https://stackoverflow.com/users/9677377/johnyak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1531338187, "creation_date": 1531335368, "last_edit_date": 1531335620, "question_id": 51292461, "link": "https://stackoverflow.com/questions/51292461/int64-t-doesnt-hold-13-digit-integer", "title": "int64_t doesn&#39;t hold 13 digit integer", "body": "<p>My program works fine with numbers up to 10 digits, but any more digit causes it to output wrong numbers when I use hackerrank compiler. However, when I use visual studio, it doesn't output anything, but I hear something keeps rotating so fast until I close the cmd window ( maybe CPU).</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nint main()\n{\n    // This program counts the \"a\" letters in a string (s) depending on how \n    // many iterations(numOfRepetitions) through the string\n    string s;\n    getline(cin, s);\n\n    int64_t numOfRepetitions;\n    cin &gt;&gt; numOfRepetitions;\n    cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n\n    int64_t i=0;\n    int64_t  countA=0;    // Counting occurances of letter \"a\"\n    for (int64_t x=0; x&lt;numOfRepetitions; x++)\n    {\n\n\n        if (s[i]=='a') countA++;\n        if (i==s.length()-1) i=-1;\n        i++;\n\n    }\n\n    cout &lt;&lt; countA &lt;&lt; endl;\n    }\n    // Input that works:   s = 'a'   numOfRepetitions=1000       Output:1000\n    // Input doesn't work: s = 'a'   numOfRepetitions=1000000000000 \n    // Output:1410065408 ( it should be: 1000000000000 )\n</code></pre>\n\n<p>Note: I tried the suggestions in other threads using long long, int32_t, casting as double ... etc. Nothing worked</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1531334770, "post_id": 51292274, "comment_id": 89562258, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1531334832, "post_id": 51292274, "comment_id": 89562285, "body": "However you spin it, this code is not portable and not standard, do you actually have a use case for it? If not i&#39;d just bin it off."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1531334847, "post_id": 51292274, "comment_id": 89562295, "body": "Between <code>m_num1</code> and <code>m_num2</code> in your second structure there will most likely be padding.  Also incrementing pointer past the end of the object it is pointing to and then dereferencing the pointer is Undefined Behaviour."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531334860, "post_id": 51292274, "comment_id": 89562304, "body": "You can&#39;t use pointer arithmetics to hope between objects like that. These operation are only supported for objects that belong to the same array."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531334940, "post_id": 51292274, "comment_id": 89562346, "body": "@Fran&#231;oisAndrieux right, of course, pardon me"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1531334971, "post_id": 51292274, "comment_id": 89562359, "body": "@alterigel I was actually mistaken, and you were correct. I hadn&#39;t noticed the <code>uint64</code> mixed with the <code>uint32</code>s in the second part of the question."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1531335072, "post_id": 51292274, "comment_id": 89562406, "body": "The duplicate is not applicable. This question is not performing pointer arithmetic on a <code>void*</code>. The pointer is always cast before incrementing it here. C casts occur before <code>operator+</code>."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 4, "creation_date": 1531335142, "post_id": 51292274, "comment_id": 89562437, "body": "You&#39;re not accounting for padding within the structure, which is not specified by the standard. P.S. the question is reproducible: <a href=\"https://ideone.com/CiFRif\" rel=\"nofollow noreferrer\">ideone.com/CiFRif</a>"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 8308767, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88ea4f6ad43f2b9bdf3206f532ace745?s=128&d=identicon&r=PG&f=1", "display_name": "pepe1", "link": "https://stackoverflow.com/users/8308767/pepe1"}, "edited": false, "score": 0, "creation_date": 1531397859, "post_id": 51292912, "comment_id": 89587502, "body": "This may be unrelated to the original question but I was wondering if it would be possible to set the values of test_uint1 without knowing the names of the member variables? Would still know the type and order of them though."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 169, "user_id": 8308767, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88ea4f6ad43f2b9bdf3206f532ace745?s=128&d=identicon&r=PG&f=1", "display_name": "pepe1", "link": "https://stackoverflow.com/users/8308767/pepe1"}, "edited": false, "score": 1, "creation_date": 1531404530, "post_id": 51292912, "comment_id": 89592277, "body": "@pepe1 If you correctly calculate the offsets, it would be possible. But like I showed in my post, you have to be careful with what you assume/determine those offsets to be. Your code failed because your assumptions about the layout of the memory of <code>testUint</code> were incorrect, but if you had been calculating the correct memory locations, it would have worked (in a way that is technically undefined behavior)."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 3, "last_activity_date": 1531337193, "creation_date": 1531337193, "answer_id": 51292912, "question_id": 51292274, "link": "https://stackoverflow.com/questions/51292274/incrementing-void-pointers-doesnt-set-values-correctly/51292912#51292912", "title": "Incrementing void pointers doesn&#39;t set values correctly", "body": "<p>To start with, I'm going to ignore the fact that your code is engaging in some very significant undefined behavior, and jump straight to the part where in a UNIX/Windows environment, the behavior of your code is relatively predictable (if not standard compliant).</p>\n\n<p>Your code is assuming that the layout of the version that uses <code>uint64_t</code> for its second member looks like this (2 characters == 1 byte):</p>\n\n<pre><code>-1-+-+-+-5-+-+-+-+10-+-+-+-+15-+-+-+-+20-+-+-+-+25\n11111111222222222222222233333333__________________\n</code></pre>\n\n<p>But in actuality, due to padding, it's getting laid out like this:</p>\n\n<pre><code>-1-+-+-+-5-+-+-+-+10-+-+-+-+15-+-+-+-+20-+-+-+-+25\n11111111........222222222222222233333333__________\n</code></pre>\n\n<p>This means that when you're assigning values into the struct, you're getting values like this (assuming Little Endian, based on your results):</p>\n\n<pre><code>-1-+-+-+-5-+-+-+-+10-+-+-+-+15-+-+-+-+20-+-+-+-+25\n03000000060000000000000009000000????????__________\n</code></pre>\n\n<p>This means the 6 is getting written into padding, and isn't readable when accessing the members directly. Meanwhile, the 9 is getting written inside <code>m_num2</code>, and <code>m_num3</code> is receiving complete garbage. <code>0x0000000009000000</code> in little-endian hexadecimal converts to <code>38654705664</code> in decimal, which is why that's what you get for your second value. And because the third value is garbage, it could be literally anything, and <code>3435973836</code> is <em>just what you happened to get</em> on this particular execution.</p>\n\n<p>Now, back to the Undefined Behavior thing: <strong>this is why you shouldn't write code like this</strong>. Because the padding being used in this struct is implementation defined (for good reason), and it's bad to depend on behavior like this to ascertain the correctness of your code.</p>\n\n<p>If you absolutely do need to depend on bit-twiddling things like this, there are a few things you should be doing:</p>\n\n<ul>\n<li>Use <code>char*</code> or <code>uint8_t*</code>, not <code>void*</code>: arithmetic on a <code>void*</code> is not allowed in C++, and even though you're not technically performing arithmetic on a <code>void*</code> in your code, you're still leaving your code in a kludgy state that would be vulnerable to code alterations that would perform a <code>void*</code> arithmetic.</li>\n<li>Use idioms for accessing the specific offset of a given member: for example, <a href=\"https://en.cppreference.com/w/cpp/types/offsetof\" rel=\"nofollow noreferrer\"><code>offsetof</code></a>.</li>\n</ul>\n\n<p>A better version of your code looks like this:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;cstddef&gt;\n#include&lt;cstdint&gt;\n\nstruct testUint{\n    uint32_t m_num1;\n    uint64_t m_num2;\n    uint32_t m_num3;\n};\n\nint main() {\n    testUint test_uint1;\n    testUint test_uint2;\n\n    test_uint2.m_num1 = 3;\n    test_uint2.m_num2 = 6;\n    test_uint2.m_num3 = 9;\n\n    //Prefer reinterpret_cast, not raw C-style casts\n    uint8_t * p = reinterpret_cast&lt;uint8_t*&gt;(&amp;test_uint1);\n\n    *reinterpret_cast&lt;uint32_t*&gt;(p + offsetof(testUint, m_num1)) = test_uint2.m_num1;\n    *reinterpret_cast&lt;uint64_t*&gt;(p + offsetof(testUint, m_num2)) = test_uint2.m_num2;\n    *reinterpret_cast&lt;uint32_t*&gt;(p + offsetof(testUint, m_num3)) = test_uint2.m_num3;\n\n    //Don't use 'using namespace std;'\n    std::cout &lt;&lt; test_uint1.m_num1 &lt;&lt; ' ' &lt;&lt; test_uint1.m_num2 &lt;&lt; ' ' &lt;&lt; test_uint1.m_num3 &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>A much better solution finds a way to make the interface of <code>testUint</code> visible to the scope where <code>p</code> exists, and avoid this pointer casting altogether.</p>\n"}], "owner": {"reputation": 169, "user_id": 8308767, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88ea4f6ad43f2b9bdf3206f532ace745?s=128&d=identicon&r=PG&f=1", "display_name": "pepe1", "link": "https://stackoverflow.com/users/8308767/pepe1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 51292912, "answer_count": 1, "score": 0, "last_activity_date": 1531337193, "creation_date": 1531334559, "question_id": 51292274, "link": "https://stackoverflow.com/questions/51292274/incrementing-void-pointers-doesnt-set-values-correctly", "title": "Incrementing void pointers doesn&#39;t set values correctly", "body": "<p>I am trying to set the values of a struct object equal to another struct object of the same type using void pointers. The values don't come out as expected when using different size uints.</p>\n\n<p>A simple example that demonstrates the problem, let's say I have the struct:</p>\n\n<pre><code>struct testUint{\n    uint32 m_num1;\n    uint32 m_num2;\n    uint32 m_num3;\n};\n</code></pre>\n\n<p>In main I do:</p>\n\n<pre><code>testUint test_uint1;\ntestUint test_uint2;\n\ntest_uint2.m_num1 = 3;\ntest_uint2.m_num2 = 6;\ntest_uint2.m_num3 = 9;\n\nvoid* p = &amp;test_uint1;\n\n*(uint32*) p = test_uint2.m_num1;\np = (uint32*)p+1;\n\n*(uint32*) p = test_uint2.m_num2;\np = (uint32*)p+1;\n\n*(uint32*) p = test_uint2.m_num3;\np = (uint32*)p+1;\n\ncout &lt;&lt; test_uint1.m_num1 &lt;&lt; test_uint1.m_num2 &lt;&lt; test_uint1.m_num3 &lt;&lt;endl;\n</code></pre>\n\n<p>The output comes out as expected as: 3, 6, and 9</p>\n\n<p>But when I change the struct to:</p>\n\n<pre><code>struct testUint{\n    uint32 m_num1;\n    uint64 m_num2;\n    uint32 m_num3;\n};\n</code></pre>\n\n<p>and keep the same code as before except change the middle portion to be:</p>\n\n<pre><code>*(uint32*) p = test_uint2.m_num1;\np = (uint32*)p+1;\n\n*(uint64*) p = test_uint2.m_num2;\np = (uint64*)p+1;\n\n*(uint32*) p = test_uint2.m_num3;\np = (uint32*)p+1;\n</code></pre>\n\n<p>The output becomes: 3, 38654705664, and 3435973836.</p>\n\n<p>I am not really sure why it is behaving like this since I believe I am incrementing by the proper number of bytes.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 7, "creation_date": 1531333874, "post_id": 51292113, "comment_id": 89561834, "body": "What did you try? Does it work on paper?"}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 9898345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d317e423bfeaeeb21de177aa1856f3a3?s=128&d=identicon&r=PG&f=1", "display_name": "cht_usr", "link": "https://stackoverflow.com/users/9898345/cht-usr"}, "edited": false, "score": 1, "creation_date": 1531335780, "post_id": 51292485, "comment_id": 89562736, "body": "thank you so much Sir, I appreciate your help, you are the only person who give the right answer , unfortunately people instead of giving the help they critic us"}], "tags": [], "owner": {"reputation": 1074, "user_id": 6124078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Luxw6.jpg?s=128&g=1", "display_name": "azdoud", "link": "https://stackoverflow.com/users/6124078/azdoud"}, "is_accepted": true, "score": 2, "last_activity_date": 1531335510, "creation_date": 1531335510, "answer_id": 51292485, "question_id": 51292113, "link": "https://stackoverflow.com/questions/51292113/how-to-iterate-over-col-in-2d-vector-c/51292485#51292485", "title": "how to iterate over col in 2D vector c++?", "body": "<p>this following code might do the aim expected!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main()\n{\n\n    vector&lt;vector&lt;string&gt;&gt; vec2Dstr  =\n    {\n        { \"A2\", \"A4\", \"A6\" },\n        { \"B2\", \"B4\", \"B6\" },\n        { \"C2\", \"C4\", \"C6\" },\n        { \"D2\", \"D4\", \"D6\" },\n        { \"E2\", \"E4\", \"E6\" }\n    };\n\n    size_t total_col = vec2Dstr[0].size();\n    for (int col=0; col&lt;total_col; ++col)\n    {\n        for(auto&amp; row : vec2Dstr)\n        {\n            cout &lt;&lt; row[col] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 1164053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097e4ee13f1386677a37d6e70727b9d2?s=128&d=identicon&r=PG", "display_name": "gezibash", "link": "https://stackoverflow.com/users/1164053/gezibash"}, "is_accepted": false, "score": 1, "last_activity_date": 1531335673, "creation_date": 1531335673, "answer_id": 51292519, "question_id": 51292113, "link": "https://stackoverflow.com/questions/51292113/how-to-iterate-over-col-in-2d-vector-c/51292519#51292519", "title": "how to iterate over col in 2D vector c++?", "body": "<p>Your <code>for</code> loops are wrong. How do you expect it to show <code>5</code> elements when you hardcode a limit of <code>3</code>. Rewrite the <code>for</code> loop using this logic:</p>\n\n<ol>\n<li>Iterate <code>vec2Dstr</code> from <code>0</code> to <code>length</code>.</li>\n<li>Display <code>vec2Dstr[i][j]</code> where <code>j</code> increases after each loop we described above.</li>\n</ol>\n\n<p>If you still are stuck after this let me know. Show me some code first.</p>\n"}], "owner": {"reputation": 99, "user_id": 9898345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d317e423bfeaeeb21de177aa1856f3a3?s=128&d=identicon&r=PG&f=1", "display_name": "cht_usr", "link": "https://stackoverflow.com/users/9898345/cht-usr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 51292485, "answer_count": 2, "score": -5, "last_activity_date": 1531335673, "creation_date": 1531333793, "last_edit_date": 1531334516, "question_id": 51292113, "link": "https://stackoverflow.com/questions/51292113/how-to-iterate-over-col-in-2d-vector-c", "title": "how to iterate over col in 2D vector c++?", "body": "<p>I have the following vector of vector containning tree string elements, I want to know how to iterate over col element instead of normal loop over rows</p>\n\n<pre><code>vector&lt;vector&lt;string&gt;&gt; vec2Dstr =\n{\n    { \"A2\", \"A4\", \"A6\" },\n    { \"B2\", \"B4\", \"B6\" },\n    { \"C2\", \"C4\", \"C6\" },\n    { \"D2\", \"D4\", \"D6\" },\n    { \"E2\", \"E4\", \"E6\" }\n};\n</code></pre>\n\n<p>the output expected is :</p>\n\n<pre><code>A2 B2 C2 D2 E2\nA4 B4 C4 D4 E4\nA6 B6 C6 D6 E6\n</code></pre>\n\n<p>code</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main()\n{\n\n    vector&lt;vector&lt;string&gt;&gt; vec2Dstr  =\n    {\n        { \"A2\", \"A4\", \"A6\" },\n        { \"B2\", \"B4\", \"B6\" },\n        { \"C2\", \"C4\", \"C6\" },\n        { \"D2\", \"D4\", \"D6\" },\n        { \"E2\", \"E4\", \"E6\" }\n    };\n        for(auto &amp; j : vec2Dstr ) {\n            for(int i = 0 ; i &lt; 3; i++ )\n                cout &lt;&lt; \" =&gt; \" &lt;&lt;j.at(i) &lt;&lt; endl;\n        }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531332703, "post_id": 51291846, "comment_id": 89561328, "body": "It&#39;s not ignored. But <code>if(!m[s[i]])</code> can&#39;t distinguish between a character at position 0 from a character that hasn&#39;t been inserted yet. The first occurrence get overwritten the next time the letter comes up. Try it with an input where the first letter is never repeated like &quot;Hello world!&quot;."}, {"owner": {"reputation": 790, "user_id": 4611854, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/og2CM.jpg?s=128&g=1", "display_name": "Karan Singh", "link": "https://stackoverflow.com/users/4611854/karan-singh"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531333493, "post_id": 51291846, "comment_id": 89561660, "body": "Ok, yes. For &quot;Hello World&quot;, it doesn&#39;t get overwritten. But why so? Sorry, but I didn&#39;t catch the explanation."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531334199, "post_id": 51291846, "comment_id": 89561980, "body": "<code>!m[s[i]]</code> is the same as <code>m[s[i]] == 0</code>. When the first letter gets added, it&#39;s set to <code>i</code> which is 0. The next time that letter comes up, <code>m[s[i]]</code> will be <code>0</code> (the first letter) so it will be overwritten by the current <code>i</code>."}, {"owner": {"reputation": 908, "user_id": 3292279, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VX393.jpg?s=128&g=1", "display_name": "Alex Johnson", "link": "https://stackoverflow.com/users/3292279/alex-johnson"}, "edited": false, "score": 0, "creation_date": 1531335735, "post_id": 51291846, "comment_id": 89562722, "body": "You can use <code>map::count</code> instead. It&#39;ll return 1 if the element already exists in the map and 0 otherwise."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1531390488, "post_id": 51291846, "comment_id": 89582534, "body": "You really ought to avoid <code>using namespace std</code> - it is a bad habit to get into, and <a href=\"/q/1452721\">can silently change the meaning of your program</a> when you&#39;re not expecting it.  Get used to using the namespace prefix (<code>std</code> is intentionally very short), or importing <i>just the names you need</i> into the <i>smallest reasonable scope</i>.  Also, you should be including the <i>standard</i> headers for the types you use - <code>&lt;bits&#47;stdc++.h&gt;</code> is a GCC <i>internal</i> header that&#39;s completely non-portable (and inefficient)."}], "owner": {"reputation": 790, "user_id": 4611854, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/og2CM.jpg?s=128&g=1", "display_name": "Karan Singh", "link": "https://stackoverflow.com/users/4611854/karan-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1531332935, "answer_count": 0, "score": 1, "last_activity_date": 1531332559, "creation_date": 1531332559, "question_id": 51291846, "link": "https://stackoverflow.com/questions/51291846/why-does-the-map-skip-the-first-character", "closed_reason": "Duplicate", "title": "Why does the map skip the first character?", "body": "<p>I am trying to print the first occurence of each character in a string. </p>\n\n<p>My code works, but for some reason it doesn't record the first occurence of the very first character of my string. \nI am using a map for this purpose(not the most ideal way, but I am trying to learn how to use them).</p>\n\n<p>Code:</p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\nint main()\n{\n    int t;\n    cin&gt;&gt;t;\n    cin.ignore();\n    while(t--){\n        string s;\n        getline(cin, s);\n        map&lt;char, int&gt; m;\n        for(int i=0; i&lt;s.size();i++)\n            if(!m[s[i]])\n                m[s[i]]=i;\n        for(auto i: m)\n            cout&lt;&lt;i.first&lt;&lt;\"-\"&lt;&lt;i.second&lt;&lt;' ';\n        cout&lt;&lt;endl;\n        m.clear();\n    }\nreturn 0;\n}\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>2\ngeeksforgeeks\ngeeks for geeks\n</code></pre>\n\n<p>My output:</p>\n\n<pre><code>e-1 f-5 g-8 k-3 o-6 r-7 s-4 \n -5 e-1 f-6 g-10 k-3 o-7 r-8 s-4 \n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>e-1 f-5 g-0 k-3 o-6 r-7 s-4 \n -5 e-1 f-6 g-0 k-3 o-7 r-8 s-4 \n</code></pre>\n"}, {"tags": ["c++", "multithreading", "matrix-inverse"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 2, "creation_date": 1531333230, "post_id": 51291800, "comment_id": 89561559, "body": "You&#39;re probably burning lots of time waiting for every <code>tarea[thread].join()</code>, especially if some threads are taking longer, which is likely. Try testing with fewer threads or maybe look for an algorithm that parallelizes better. You could also use an existing library of course, but I assume this is a learning exercise."}, {"owner": {"reputation": 100, "user_id": 3687144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d95ccb74f27f6f250961a59f70fb79e?s=128&d=identicon&r=PG&f=1", "display_name": "mathengineer", "link": "https://stackoverflow.com/users/3687144/mathengineer"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1531342015, "post_id": 51291800, "comment_id": 89565349, "body": "I use eigen lib that do the job. But this is the first step before going to opencl and make all the job in the gpu because a lot of time is wasted going to gpu and coming back to cpu. It would be useful for me to know what is delaying the code. Theoretically the join not delays the code because all the threads makes almost the same job. I made the test with following result: no threads=2.5s, 1 thread=3.64s, 2 threads=4.768s and 8 threads=7.25s"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1531385340, "post_id": 51291800, "comment_id": 89579157, "body": "Not related to timing, did you check that the <i>result</i> was the same between them? You look to be modifying the (local copy of) <code>x</code> in <code>colum_zero</code>."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1531385801, "post_id": 51291800, "comment_id": 89579452, "body": "Also: please switch from <code>double *</code> to <code>std::vector&lt;double&gt;::iterator</code> and use <code>begin()</code> and <code>end()</code> of the vectors"}], "answers": [{"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1531387564, "post_id": 51299911, "comment_id": 89580581, "body": "I&#39;m fairly certain that the compiler doesn&#39;t detect the data race in your code. You are spinning up and then discarding <code>dim * NUCLEOS</code> threads, which has an overhead"}, {"owner": {"reputation": 100, "user_id": 3687144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d95ccb74f27f6f250961a59f70fb79e?s=128&d=identicon&r=PG&f=1", "display_name": "mathengineer", "link": "https://stackoverflow.com/users/3687144/mathengineer"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1531421046, "post_id": 51299911, "comment_id": 89601689, "body": "Did you say that I generate and discard threads?. I moved the declaration outside the loop and the timing result is almost the same. The data races seems not appear as I tested the result again 1 thread, but it does not matter due no time reduction is performed"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1531421181, "post_id": 51299911, "comment_id": 89601762, "body": "The outer <code>for (ord = 0; ord&lt;dim; ord++)</code> loop"}], "tags": [], "owner": {"reputation": 100, "user_id": 3687144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d95ccb74f27f6f250961a59f70fb79e?s=128&d=identicon&r=PG&f=1", "display_name": "mathengineer", "link": "https://stackoverflow.com/users/3687144/mathengineer"}, "is_accepted": false, "score": 0, "last_activity_date": 1531381235, "creation_date": 1531381235, "answer_id": 51299911, "question_id": 51291800, "link": "https://stackoverflow.com/questions/51291800/matrix-inversion-slower-using-threads/51299911#51299911", "title": "Matrix inversion slower using threads", "body": "<p>After looking deeper in the code of the colum_zero() function I have seen that one thread rewrites in the data to be used by another threads, so the threads are not INDEPENDENT from each other. Fortunately the compiler detect it and avoid it.</p>\n\n<p>Conclusions:</p>\n\n<ol>\n<li>It is not recommended to try Gauss-Jordan method alone to make multithreads</li>\n<li>If somebody detects that in multithread is slower and the initial function is spreaded correctly for every thread, perhaps is due one thread results are used by another</li>\n<li>The main function inverse() works and can be used by other programmers, so this question should not be deleted</li>\n</ol>\n\n<p>Non answered question:\nWhat is a matrix inverse method that could be spreaded in a lot of independent threads to be used in a gpu?</p>\n"}], "owner": {"reputation": 100, "user_id": 3687144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d95ccb74f27f6f250961a59f70fb79e?s=128&d=identicon&r=PG&f=1", "display_name": "mathengineer", "link": "https://stackoverflow.com/users/3687144/mathengineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531421482, "creation_date": 1531332375, "last_edit_date": 1531421482, "question_id": 51291800, "link": "https://stackoverflow.com/questions/51291800/matrix-inversion-slower-using-threads", "title": "Matrix inversion slower using threads", "body": "<p>I made a function that makes the inverse and then another multithreaded, as long I have to make inverse of arrays >2000 x 2000.\nA 1000x1000 array unthreated takes 2.5 seconds (on a i5-4460 4 cores 2.9ghz)\nand multithreaded takes 7.25 seconds</p>\n\n<p>I placed the multithreads in the part that most time consumption is taken. Whai is wrong?\nIs due vectors are used instead of 2 dimensions arrays?</p>\n\n<p>This is the minimum code to test both versions:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\nconst int NUCLEOS = 8;\n\n#ifdef __linux__ \n#include &lt;unistd.h&gt;    //usleep()\ntypedef std::chrono::system_clock t_clock;    //try to use high_resolution_clock on  new linux x64 computer!\n#else\ntypedef std::chrono::high_resolution_clock t_clock;\n#pragma warning(disable:4996)\n#endif\nusing namespace std;\n\n\nstd::chrono::time_point&lt;t_clock&gt; start_time, stop_time = start_time; char null_char = '\\0';\nvoid timer(char *title = 0, int data_size = 1) { stop_time = t_clock::now(); double us = (double)chrono::duration_cast&lt;chrono::microseconds&gt;(stop_time - start_time).count();   if (title) printf(\"%s time = %7lgms = %7lg MOPs\\n\", title, (double)us*1e-3, (double)data_size / us); start_time = t_clock::now(); }\n\n\n\n//makes columns 0\nvoid colum_zero(vector&lt; vector&lt;double&gt; &gt; &amp;x, vector&lt; vector&lt;double&gt; &gt; &amp;y, int pos0, int pos1,int dim, int ord);\n\n//returns inverse of x, x is not modified, not threaded\nvector&lt; vector&lt;double&gt; &gt; inverse(vector&lt; vector&lt;double&gt; &gt; x)\n{\n    if (x.size() != x[0].size())\n    {\n        cout &lt;&lt; \"ERROR on inverse() not square array\" &lt;&lt; endl; getchar(); return{};//returns a null\n    }\n\n    size_t dim = x.size();\n    int i, j, ord;\n    vector&lt; vector&lt;double&gt; &gt; y(dim,vector&lt;double&gt;(dim,0));//initializes output = 0\n    //init_2Dvector(y, dim, dim);\n    //1. Unity array y: \n    for (i = 0; i &lt; dim; i++)\n    {\n        y[i][i] = 1.0;\n    }\n\n    double diagon, coef;\n    double *ptrx, *ptry, *ptrx2, *ptry2;\n    for (ord = 0; ord&lt;dim; ord++)\n    {\n        //2 Hacemos diagonal de x =1\n        int i2;\n        if (fabs(x[ord][ord])&lt;1e-15) //If that element is 0, a line that contains a non zero is added\n        {\n            for (i2 = ord + 1; i2&lt;dim; i2++)\n            {\n                if (fabs(x[i2][ord])&gt;1e-15) break;\n            }\n            if (i2 &gt;= dim)\n                return{};//error, returns null\n            for (i = 0; i&lt;dim; i++)//added a line without 0\n            {\n                x[ord][i] += x[i2][i];\n                y[ord][i] += y[i2][i];\n            }\n        }\n        diagon = 1.0/x[ord][ord];\n        ptry = &amp;y[ord][0];\n        ptrx = &amp;x[ord][0];\n        for (i = 0; i &lt; dim; i++)\n        {\n            *ptry++ *= diagon;\n            *ptrx++ *= diagon;\n        }\n        //uses the same function but not threaded:\n        colum_zero(x,y,0,dim,dim,ord);\n    }//end ord\n    return y;\n}\n\n//threaded version\nvector&lt; vector&lt;double&gt; &gt; inverse_th(vector&lt; vector&lt;double&gt; &gt; x)\n{\n    if (x.size() != x[0].size())\n    {\n        cout &lt;&lt; \"ERROR on inverse() not square array\" &lt;&lt; endl; getchar(); return{};//returns a null\n    }\n\n    int dim = (int) x.size();\n    int i, ord;\n    vector&lt; vector&lt;double&gt; &gt; y(dim, vector&lt;double&gt;(dim, 0));//initializes output = 0\n                                                            //init_2Dvector(y, dim, dim);\n                                                            //1. Unity array y: \n    for (i = 0; i &lt; dim; i++)\n    {\n        y[i][i] = 1.0;\n    }\n\n    std::thread tarea[NUCLEOS];\n    double diagon;\n    double *ptrx, *ptry;// , *ptrx2, *ptry2;\n    for (ord = 0; ord&lt;dim; ord++)\n    {\n        //2 Hacemos diagonal de x =1\n        int i2;\n        if (fabs(x[ord][ord])&lt;1e-15) //If a diagonal element=0 it is added a column that is not 0 the diagonal element\n        {\n            for (i2 = ord + 1; i2&lt;dim; i2++)\n            {\n                if (fabs(x[i2][ord])&gt;1e-15) break;\n            }\n            if (i2 &gt;= dim)\n                return{};//error, returns null\n            for (i = 0; i&lt;dim; i++)//It is looked for a line without zero to be added to make the number a non zero one to avoid later divide by 0\n            {\n                x[ord][i] += x[i2][i];\n                y[ord][i] += y[i2][i];\n            }\n        }\n        diagon = 1.0 / x[ord][ord];\n\n        ptry = &amp;y[ord][0];\n        ptrx = &amp;x[ord][0];\n        for (i = 0; i &lt; dim; i++)\n        {\n            *ptry++ *= diagon;\n            *ptrx++ *= diagon;\n        }\n\n        int pos0 = 0, N1 = dim;//initial array position\n        if ((N1&lt;1) || (N1&gt;5000))\n        {\n            cout &lt;&lt; \"It is detected out than 1-5000 simulations points=\" &lt;&lt; N1 &lt;&lt; \" ABORT or press enter to continue\" &lt;&lt; endl; getchar();\n        }\n        //cout &lt;&lt; \"Initiation of \" &lt;&lt; NUCLEOS &lt;&lt; \" threads\" &lt;&lt; endl;\n        for (int thread = 0; thread&lt;NUCLEOS; thread++)\n        {\n            int pos1 = (int)((thread + 1)*N1 / NUCLEOS);//next position\n            tarea[thread] = std::thread(colum_zero, std::ref(x), std::ref(y), pos0, pos1, dim, ord);//ojo, coil current=1!!!!!!!!!!!!!!!!!!\n            pos0 = pos1;//next thread will work at next point\n        }\n        for (int thread = 0; thread&lt;NUCLEOS; thread++)\n        {\n            tarea[thread].join();\n            //cout &lt;&lt; \"Thread num: \" &lt;&lt; thread &lt;&lt; \" end\\n\";\n        }\n    }//end ord\n    return y;\n}\n\n//makes columns 0\nvoid colum_zero(vector&lt; vector&lt;double&gt; &gt; &amp;x, vector&lt; vector&lt;double&gt; &gt; &amp;y, int pos0, int pos1,int dim, int ord)\n{\n    double coef;\n    double *ptrx, *ptry, *ptrx2, *ptry2;\n    //Hacemos '0' la columna ord salvo elemento diagonal:\n    for (int i = pos0; i&lt;pos1; i++)//Begin to end for every thread\n    {\n        if (i == ord) continue;\n        coef = x[i][ord];//element to make 0 \n        if (fabs(coef)&lt;1e-15) continue; //If already zero, it is avoided\n        ptry = &amp;y[i][0];\n        ptry2 = &amp;y[ord][0];\n        ptrx = &amp;x[i][0];\n        ptrx2 = &amp;x[ord][0];\n        for (int j = 0; j &lt; dim; j++)\n        {\n            *ptry++ = *ptry - coef * (*ptry2++);//1\u00aa matriz\n            *ptrx++ = *ptrx - coef * (*ptrx2++);//2\u00aa matriz\n        }\n    }\n}\n\n\nvoid test_6_inverse(int dim)\n{\n    vector&lt; vector&lt;double&gt; &gt; vec1(dim, vector&lt;double&gt;(dim));\n    for (int i=0;i&lt;dim;i++)\n        for (int j = 0; j &lt; dim; j++)\n        {\n            vec1[i][j] = (-1.0 + 2.0*rand() / RAND_MAX) * 10000;\n        }\n    vector&lt; vector&lt;double&gt; &gt; vec2,vec3;\n    double ini, end;\n    ini = (double)clock();\n    vec2 = inverse(vec1);\n    end = (double)clock();\n    cout &lt;&lt; \"=== Time inverse unthreaded=\" &lt;&lt; (end - ini) / CLOCKS_PER_SEC &lt;&lt; endl;\n    ini=end;\n    vec3 = inverse_th(vec1);\n    end = (double)clock();\n    cout &lt;&lt; \"=== Time inverse   threaded=\" &lt;&lt; (end - ini) / CLOCKS_PER_SEC &lt;&lt; endl;\n    cout&lt;&lt;vec2[2][2]&lt;&lt;\" \"&lt;&lt;vec3[2][2]&lt;&lt;endl;//to make the sw to do de inverse\n    cout &lt;&lt; endl;\n}\n\n\nint main()\n{\n    test_6_inverse(1000);\n    cout &lt;&lt; endl &lt;&lt; \"=== END ===\" &lt;&lt; endl; getchar(); \n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 2, "creation_date": 1531332880, "post_id": 51291695, "comment_id": 89561403, "body": "I don&#39;t know much about ReSharper but it appears you&#39;ve enabled clang-tidy&#39;s fuschia-* family of checks. That project&#39;s coding conventions must frown upon the use of default arguments, that doesn&#39;t mean they&#39;re inappropriate in general."}, {"owner": {"reputation": 1256, "user_id": 1296840, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/Zh7ly.jpg?s=128&g=1", "display_name": "keelerjr12", "link": "https://stackoverflow.com/users/1296840/keelerjr12"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1531333002, "post_id": 51291695, "comment_id": 89561453, "body": "@Praetorian, yah I&#39;m just going to turn them off.  I was just curious for my own understanding, why a team would find this to be bad.  Thank you!"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1531333140, "post_id": 51291695, "comment_id": 89561518, "body": "Related: <a href=\"https://stackoverflow.com/questions/51217635/is-there-a-way-to-avoid-this-warning-from-clang-tidy-fuchsia-default-arguments\" title=\"is there a way to avoid this warning from clang tidy fuchsia default arguments\">stackoverflow.com/questions/51217635/&hellip;</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1531334843, "post_id": 51291695, "comment_id": 89562291, "body": "I\u2019m not endorsing this, but some folks think it\u2019s better to write a set of overloaded functions than a single one with default arguments."}, {"owner": {"reputation": 6458, "user_id": 985032, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e8cb4a86a0afcc659a9f479075e141f?s=128&d=identicon&r=PG", "display_name": "Michael Price", "link": "https://stackoverflow.com/users/985032/michael-price"}, "edited": false, "score": 0, "creation_date": 1531369513, "post_id": 51291695, "comment_id": 89571702, "body": "Recommend removing the c++17 tag as this behavior is not changed in that version of the standard."}], "answers": [{"tags": [], "owner": {"reputation": 6458, "user_id": 985032, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e8cb4a86a0afcc659a9f479075e141f?s=128&d=identicon&r=PG", "display_name": "Michael Price", "link": "https://stackoverflow.com/users/985032/michael-price"}, "is_accepted": true, "score": 4, "last_activity_date": 1531368692, "creation_date": 1531368692, "answer_id": 51297175, "question_id": 51291695, "link": "https://stackoverflow.com/questions/51291695/why-the-warning-for-default-arguments/51297175#51297175", "title": "Why the warning for default arguments?", "body": "<p>There are several odd corner cases when it comes to default arguments on function parameters.</p>\n\n<p>Here is a presentation from CppCon 2017 detailing a lot of tricky behavior.  <a href=\"https://youtu.be/NeJ85q1qddQ\" rel=\"nofollow noreferrer\">https://youtu.be/NeJ85q1qddQ</a></p>\n\n<p>To summarize the main points:</p>\n\n<ul>\n<li>Redeclarations cause potentially confusing behavior</li>\n<li>The default arguments used in virtual function calls are not determined by the function called, but by the static type.</li>\n<li>Default arguments on function templates can potentially look ill-formed, but may compile as long as they are not instantiated.</li>\n</ul>\n\n<p>Of course, for your case of a non-template constructor, they are fairly innocuous. It can\u2019t be overridden or redeclared (although an out-of-line definition might cause you possible pain).</p>\n"}], "owner": {"reputation": 1256, "user_id": 1296840, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/Zh7ly.jpg?s=128&g=1", "display_name": "keelerjr12", "link": "https://stackoverflow.com/users/1296840/keelerjr12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 0, "accepted_answer_id": 51297175, "answer_count": 1, "score": 3, "last_activity_date": 1531368692, "creation_date": 1531331936, "last_edit_date": 1531332775, "question_id": 51291695, "link": "https://stackoverflow.com/questions/51291695/why-the-warning-for-default-arguments", "title": "Why the warning for default arguments?", "body": "<p>Using ReSharper with C++17, and I enabled many of the warnings just to see what my project warns me about. I get this:</p>\n\n<pre><code>Declaring a parameter with a default argument is disallowed[fuchsia-default-arguments]\n</code></pre>\n\n<p>The code in question is the constructor:</p>\n\n<pre><code>class Point2D\n{\npublic:\n    explicit Point2D(double x = 0.0, double y = 0.0);\n};\n</code></pre>\n\n<p>I'm wondering why default arguments would be considered bad/poor/worthy of a warning? Does anyone have any code examples proving this a viable warning?</p>\n\n<p><a href=\"https://clang.llvm.org/extra/clang-tidy/checks/fuchsia-default-arguments.html\" rel=\"nofollow noreferrer\">Here is the documentation.</a></p>\n"}, {"tags": ["c++", "xcode", "destructor"], "comments": [{"owner": {"reputation": 1262, "user_id": 3940228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1455002de0a9fc115cc877f962ea4c9f?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Sohn", "link": "https://stackoverflow.com/users/3940228/olivier-sohn"}, "edited": false, "score": 1, "creation_date": 1531332273, "post_id": 51291665, "comment_id": 89561143, "body": "Are you sure it&#39;s not because xcode has cached the error messages? the code looks ok to me."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1531332299, "post_id": 51291665, "comment_id": 89561156, "body": "This doesn\u2019t address the question, but names that contain two consecutive underscores (<code>__Game1__Game__</code>) and names that begin with an underscore followed by a capital letter are reserved for use by the implementation. Don\u2019t use them in your code."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1531332406, "post_id": 51291665, "comment_id": 89561195, "body": "I see nothing wrong other than the header guard using an illegal identifier (<a href=\"https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\">What are the rules about using an underscore in a C++ identifier?</a>) and that shouldn&#39;t cause the sort of problem you&#39;re seeing. Could we have a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1531332896, "post_id": 51291665, "comment_id": 89561409, "body": "Welcome to Stack Overflow, by the way. Thank you for reading the tour on your way through. Question is a pretty good first post. All that is missing is a complete example that duplicates the issue, something which may take a bit of work to sort out. What you should do is back up your code and start removing pieces until the problem goes away to narrow the focus down until all you have is the minimum code required to trigger the error. If that doesn&#39;t have you groaning at the mistake and fixing it yourself, update your question with this minimal example."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1531333163, "post_id": 51291665, "comment_id": 89561533, "body": "Note that the error might not be in this file, but instead in a file that includes this file or another header included by the file that&#39;s included by this header before this header is included.  For example a previous class definition in another file may be missing the closing semicolon and the compiler&#39;s not tripping over the mistake until it gets to the <code>Game</code> destructor."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 13005693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adb0728d88a218e0e8f29104a3912f06?s=128&d=identicon&r=PG&f=1", "display_name": "Usman Nazir", "link": "https://stackoverflow.com/users/13005693/usman-nazir"}, "is_accepted": false, "score": 0, "last_activity_date": 1604512586, "last_edit_date": 1604512586, "creation_date": 1604512306, "answer_id": 64685238, "question_id": 51291665, "link": "https://stackoverflow.com/questions/51291665/destructor-not-recognised-by-xcode/64685238#64685238", "title": "destructor not recognised by Xcode", "body": "<p>You need to have written:</p>\n<pre><code>Game::~Game(){\n\n}\n</code></pre>\n<p>somewhere at the bottom, outside the class.</p>\n<p>Then it will compile fine :)</p>\n"}], "owner": {"reputation": 31, "user_id": 10066413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7818c215217aa10bbd972b4cc16bcad4?s=128&d=identicon&r=PG&f=1", "display_name": "osk", "link": "https://stackoverflow.com/users/10066413/osk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1604512586, "creation_date": 1531331816, "last_edit_date": 1531393318, "question_id": 51291665, "link": "https://stackoverflow.com/questions/51291665/destructor-not-recognised-by-xcode", "title": "destructor not recognised by Xcode", "body": "<p>new to this forum and to programming so please forgive any potential mistakes in my question. I am trying to code a game in c++ using SDL2 and Xcode 6.3.2. In my Game class (see below) Xcode does not recognise my destructor and gives me the error: <strong>expected member name or ';' after declaration</strong> \nI have no idea what is wrong with my destructor or my code in general. My question is simply: What have I done wrong? Thanks in advance!</p>\n\n<p>update:\nNarrowed the issue down and ran the code in cpp.sh without any issues. Xcode still gives the error message and I am unable to build because of it. I have tried restarting my computer, deleting the derived data and cleaning the build folder but to no effect.</p>\n\n<pre><code>int main() {\n\nclass Game {\n\npublic:\n    Game();\n    ~Game(); //here is the issue\n};\n\n}\n</code></pre>\n\n<p>update 2: Simply removed the non working code and retyped it. The error message did not reappear and the build succeeded. Xcode had probably indeed cached the error message in some strange way. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1531332115, "post_id": 51291661, "comment_id": 89561074, "body": "What does &quot;recreate&quot; mean? You wish to be able to read the old float values? Or do you just want to scrap the double array and have a float array?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1531332258, "post_id": 51291661, "comment_id": 89561138, "body": "@Justin: No. As placement <code>new double</code> &quot;destroyed&quot; <code>f</code>&#39;s original type, I&#39;d like to <code>f</code> to have a float array type again."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 1, "creation_date": 1531334804, "post_id": 51291661, "comment_id": 89562276, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15254/can-placement-new-for-arrays-be-used-in-a-portable-way\">Can placement new for arrays be used in a portable way?</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1531335549, "post_id": 51291661, "comment_id": 89562636, "body": "The best reason you ask this is it&#39;s an XY problem. With the benefit of doubt, I consider this question unclear. Please state what you want to accomplish."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1531336703, "post_id": 51291661, "comment_id": 89563189, "body": "@Olaf: I&#39;ve described the background in the first sentence. It is absolutely plausible, that one wants to create a function, which has <code>float *</code> input/output, and the function wants to use this buffer as a temporary buffer to store doubles to avoid unnecessary allocation. Not an XY problem."}, {"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1531337253, "post_id": 51291661, "comment_id": 89563397, "body": "Can&#39;t you use a loop as you did with the doubles ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1531337342, "post_id": 51291661, "comment_id": 89563429, "body": "Which function? There is no function shown in your code. It seems more like a fundamental missunderstanding of the <code>new</code> operator and language basics. But thanks for removing my doubts."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1531337776, "post_id": 51291661, "comment_id": 89563624, "body": "@MichaelDoubez: no, because it wouldn&#39;t make it a float array, but floats sitting next to each other. These are not the same."}, {"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1531338190, "post_id": 51291661, "comment_id": 89563818, "body": "They were floats sitting next to each other. The overhead area is before the position the pointer points to. That hasn&#39;t changed. Truth to tell, it is hardly necessary, I doubt any compiler runs a destructor on integral types and even less that it would choke on an illegal float representation."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1531338565, "post_id": 51291661, "comment_id": 89563984, "body": "@MichaelDoubez: yes, considering practice, you are right. But this question is more about the standard, which for some reason, not that strict about this matter, allows overhead, which even can be differing size for each new[] call."}, {"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1531338767, "post_id": 51291661, "comment_id": 89564067, "body": "Ok but then, reintepret_cast your double* to float* an do a placement new on each element and you&#39;ll get the same original state."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1531339658, "post_id": 51291661, "comment_id": 89564451, "body": "@MichaelDoubez: yes, that would be a logical thing to do, but I don&#39;t think that I&#39;ll get the same state. As I&#39;ve said, an array is not just objects sitting next to each other. <code>new(f) float[2];</code> differs from <code>new(f) float; new(f+1) float;</code>."}, {"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1531340349, "post_id": 51291661, "comment_id": 89564735, "body": "We are still paying the decision to not make array first class citizen but not that much. The standard guarantees you the contiguity of member (albeit with padding) in arrays. This is true whether the array is allocated on the stack or by new. The only twist is the overhead to relate the number of object between new[] and delete[] (plus whatever is needed by implementation). But placement new of single object doesn&#39;t have the overhead and memory area referenced by pointer offset can hold them. I don&#39;t see how you come up with additional constraints."}, {"owner": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 0, "creation_date": 1531340438, "post_id": 51291661, "comment_id": 89564765, "body": "What does it mean to &quot;destroy&quot; the type of the array?  Isn&#39;t <code>f</code> still <code>float*</code> no matter what you do with it?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1531371501, "post_id": 51291661, "comment_id": 89572194, "body": "@MichaelDoubez: for example, you cannot index a pointer, if it is not pointing to an actual array. So, if <code>f</code> points to two consecutive floats, created by 2 two placement new, you <b>cannot</b> use <code>f[1]</code> to get the second one. That&#39;s what the standard says. It is because <code>f</code> doesn&#39;t point to an actual array."}, {"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1531378862, "post_id": 51291661, "comment_id": 89575140, "body": "@geza please see 7.6.1.1 <code>[...]The expression E1[E2] is identical (by definition) to *((E1)+(E2))[...]</code>. Placement new doesn&#39;t change that. The only case it would appear is if you tried to do placement new of an array insided the elements of the array (as an array of array) ; this is a consequence of 7.6.2.4/15 (where overhead x applies only to placement new of array). But the overall array stays the same - unfortunately, we could have implemented a realloc of arrays."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1531378999, "post_id": 51291661, "comment_id": 89575223, "body": "@MichaelDoubez: yes, but: <a href=\"http://eel.is/c++draft/expr.add#4\" rel=\"nofollow noreferrer\">eel.is/c++draft/expr.add#4</a>. Pointer addition is defined only if the pointer points to an array. Some further thoughts: <a href=\"https://stackoverflow.com/questions/47498585/is-adding-to-a-char-pointer-ub-when-it-doesnt-actually-point-to-a-char-arr\" title=\"is adding to a char pointer ub when it doesnt actually point to a char arr\">stackoverflow.com/questions/47498585/&hellip;</a>"}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 1, "creation_date": 1531382006, "post_id": 51291661, "comment_id": 89577035, "body": "<code>new(f+i*2) double;</code> is undefined because the lifetime of the whole float array is finished when you create the first <code>double</code>."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1531382211, "post_id": 51291661, "comment_id": 89577152, "body": "@xskxzr: whoa, good catch :) I hopefully fixed it."}, {"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1531383350, "post_id": 51291661, "comment_id": 89577832, "body": "@geza Sorry, I miss your point about 7.6.6/4. It only states that <code>If the expression P points to element x[i] of an array object</code> then it is UB to go outside the bounds of the array. It doesn&#39;t say that pointer arithmetic is limited to array. And the discussion you mention is the difference between struct member offsets vs array; this doesn&#39;t apply here."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1531383882, "post_id": 51291661, "comment_id": 89578168, "body": "@MichaelDoubez: the standard defines what happens, if <code>p</code> points to an array. If it doesn&#39;t point to an array, it is not defined at all. So I think it is UB."}, {"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1531385923, "post_id": 51291661, "comment_id": 89579530, "body": "@geza 7.6.6/4 gives you the general rule <code>When an expression that has integral type is added to or subtracted from a pointer, the result has the type of the pointer operand.</code> This is not UB."}], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531382195, "creation_date": 1531331794, "last_edit_date": 1531382195, "question_id": 51291661, "link": "https://stackoverflow.com/questions/51291661/is-it-possible-to-recreate-an-array-which-has-been-destroyed-by-placement-new", "title": "Is it possible to recreate an array which has been &quot;destroyed&quot; by placement new?", "body": "<p>I was thinking about how to solve <a href=\"https://stackoverflow.com/questions/51289394/reusing-a-float-buffer-for-doubles-without-undefined-behaviour\">this</a> problem with placement new, and I faced a problem.</p>\n\n<p>Suppose, that I allocate a <code>float</code> array:</p>\n\n<pre><code>float *f = new float[10];\n</code></pre>\n\n<p>Then, I use this storage to store <code>double</code>s (note that I assume that <code>f</code> is properly aligned, and <code>sizeof(float)*2==sizeof(double)</code>), which destroys the float array:</p>\n\n<pre><code>double *d = new(f) double;\nfor (int i=1; i&lt;5; i++) {\n    new(d+i) double;\n}\n</code></pre>\n\n<p>Now, is there a way to recreate the float array? The most intuitive solution</p>\n\n<pre><code>f = new(f) float[10];\n</code></pre>\n\n<p>may not work, as <code>new[]</code> can have a space overhead, so <code>float[10]</code> may not fit into <code>f</code>.</p>\n"}, {"tags": ["c++", "sql-server"], "comments": [{"owner": {"reputation": 4136, "user_id": 1443098, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/943c60e4b1686ea72a0dd48fd394dee4?s=128&d=identicon&r=PG", "display_name": "user1443098", "link": "https://stackoverflow.com/users/1443098/user1443098"}, "edited": false, "score": 0, "creation_date": 1531332049, "post_id": 51291624, "comment_id": 89561039, "body": "try: <code>Driver={SQL Server};</code> in your connection string"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 3075456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d79d9596589893fb43ffcf3a4fbf5ac6?s=128&d=identicon&r=PG&f=1", "display_name": "user3075456", "link": "https://stackoverflow.com/users/3075456/user3075456"}, "edited": false, "score": 0, "creation_date": 1531404706, "post_id": 51295883, "comment_id": 89592381, "body": "I tried DRIVER={ODBC Driver 17 for SQL Server} after installing latest ODBC but I am still getting the same error. I tried with driver as SQL Server but again the same error message."}], "tags": [], "owner": {"reputation": 34977, "user_id": 3711162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7XKVx.png?s=128&g=1", "display_name": "Dan Guzman", "link": "https://stackoverflow.com/users/3711162/dan-guzman"}, "is_accepted": false, "score": 0, "last_activity_date": 1531356069, "creation_date": 1531356069, "answer_id": 51295883, "question_id": 51291624, "link": "https://stackoverflow.com/questions/51291624/sql-server-data-source-name-not-found-and-no-default-driver-specified/51295883#51295883", "title": "SQL Server - data source name not found and no default driver specified", "body": "<p>Since you've specified a driver instead of DSN in the connection string, there is no need to create a DSN at all. Just specify a valid ODBC driver like @user144098 suggested. </p>\n\n<p>However, the <code>SQL Server</code> ODBC driver is a legacy driver that ships with Windows and is intended only for backwards compatibility with legacy apps. Use a modern driver for new development so you can use newer features and TLS 1.2 protocol security. The latest SQL Server ODBC driver as of this writing is <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=56567\" rel=\"nofollow noreferrer\"><code>ODBC Driver 17 for SQL Server</code></a>. </p>\n\n<p>After installing the driver, change your connection string like below. I believe the backslash before the instance name needs to be escaped in the string literal so I doubled the slash.</p>\n\n<pre><code>\"DRIVER={ODBC Driver 17 for SQL Server};Server=hostname\\\\SQLEXPRESS;Database=master;Trusted_Connection=True;\"\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3075456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d79d9596589893fb43ffcf3a4fbf5ac6?s=128&d=identicon&r=PG&f=1", "display_name": "user3075456", "link": "https://stackoverflow.com/users/3075456/user3075456"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 772, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531356069, "creation_date": 1531331644, "question_id": 51291624, "link": "https://stackoverflow.com/questions/51291624/sql-server-data-source-name-not-found-and-no-default-driver-specified", "title": "SQL Server - data source name not found and no default driver specified", "body": "<p>I am trying to connect SQL server using C++ but getting error \"data source name not found and no default driver specified\" even after adding the DSN. I have a win 10 64 bit machine and I have added DSN with same name under system DSN for 32 bit and 64 bit. Please help me get the correct connection string also.</p>\n\n<p>Below is what I'm trying to do.</p>\n\n<pre><code>#include &lt;stdafx.h&gt;\n#include &lt;windows.h&gt;  \n#include &lt;sqlext.h&gt;  \n#include &lt;iostream&gt;\n#include &lt;locale&gt;\n#include &lt;codecvt&gt;\n\nusing namespace std;\n\nvoid show_error(unsigned int handletype, const SQLHANDLE&amp; handle)\n{\n    SQLWCHAR sqlstate[1024];\n    SQLWCHAR message[1024];\n\n    if (SQL_SUCCESS == SQLGetDiagRec(handletype, handle, 1, sqlstate, NULL, message, 1024, NULL))\n    {\n        std::wstring wMsg(message);\n        std::wstring wState(sqlstate);\n\n        //setup converter\n        using convert_type = std::codecvt_utf8&lt;wchar_t&gt;;\n        std::wstring_convert&lt;convert_type, wchar_t&gt; converter;\n\n        //use converter (.to_bytes: wstr-&gt;str, .from_bytes: str-&gt;wstr)\n        std::string converted_msg = converter.to_bytes(wMsg);\n        std::string converted_state = converter.to_bytes(wState);\n\n\n        std::cout &lt;&lt; \"Message: \" &lt;&lt; converted_msg/*message*/ &lt;&lt; \"\\nSQLSTATE: \" &lt;&lt; converted_state/*sqlstate*/ &lt;&lt; std::endl;\n    }\n}\n\nint main() {\n    SQLHENV henv;\n    SQLHDBC hdbc;\n    SQLHSTMT hstmt;\n    SQLRETURN retcode;\n\n    SQLWCHAR OutConnStr[255];\n    SQLSMALLINT OutConnStrLen;\n\n    HWND desktopHandle = GetDesktopWindow();   // desktop's window handle  \n\n                                               // Allocate environment handle  \n    retcode = SQLAllocHandle(SQL_HANDLE_ENV, SQL_NULL_HANDLE, &amp;henv);\n\n    // Set the ODBC version environment attribute  \n    if (retcode == SQL_SUCCESS || retcode == SQL_SUCCESS_WITH_INFO) {\n        retcode = SQLSetEnvAttr(henv, SQL_ATTR_ODBC_VERSION, (SQLPOINTER*)SQL_OV_ODBC3, 0);\n\n        // Allocate connection handle  \n        if (retcode == SQL_SUCCESS || retcode == SQL_SUCCESS_WITH_INFO) {\n            retcode = SQLAllocHandle(SQL_HANDLE_DBC, henv, &amp;hdbc);\n\n            // Set login timeout to 5 seconds  \n            if (retcode == SQL_SUCCESS || retcode == SQL_SUCCESS_WITH_INFO) {\n                SQLSetConnectAttr(hdbc, SQL_LOGIN_TIMEOUT, (SQLPOINTER)50, 0);\n\n                SQLWCHAR retconstring[1024];\n                retcode = SQLDriverConnect(hdbc, NULL,\n                                (SQLWCHAR*)\"DRIVER={SQL1};Server=hostname\\SQLEXPRESS;Database=master;Trusted_Connection=True;\",\n                                SQL_NTS, retconstring, 1024, NULL, SQL_DRIVER_NOPROMPT);\n\n                // Allocate statement handle  \n                if (retcode == SQL_SUCCESS || retcode == SQL_SUCCESS_WITH_INFO) {\n                    retcode = SQLAllocHandle(SQL_HANDLE_STMT, hdbc, &amp;hstmt);\n\n                    // Process data  \n                    if (retcode == SQL_SUCCESS || retcode == SQL_SUCCESS_WITH_INFO) {\n                        SQLFreeHandle(SQL_HANDLE_STMT, hstmt);\n                    }\n\n                    SQLDisconnect(hdbc);\n                }\n                else\n                    show_error(SQL_HANDLE_DBC, hdbc);\n\n                SQLFreeHandle(SQL_HANDLE_DBC, hdbc);\n            }\n        }\n        SQLFreeHandle(SQL_HANDLE_ENV, henv);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++17", "if-constexpr"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1531332440, "post_id": 51291617, "comment_id": 89561210, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What compiler version and flags are you using?"}, {"owner": {"reputation": 311, "user_id": 9917671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-estiBVuqDLw/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1e7AG7aAchAAy-uvk8I48LzZLZHQ/mo/photo.jpg?sz=128", "display_name": "Lim Ta Sheng", "link": "https://stackoverflow.com/users/9917671/lim-ta-sheng"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1531333128, "post_id": 51291617, "comment_id": 89561513, "body": "Edited, this is the full codes"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1531333257, "post_id": 51291617, "comment_id": 89561571, "body": "Not reproducible: <a href=\"http://coliru.stacked-crooked.com/a/71e6688537f4da38\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/71e6688537f4da38</a>"}], "answers": [{"comments": [{"owner": {"reputation": 648, "user_id": 11208147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0c2011b63acd6cf67135e55a2d9af47?s=128&d=identicon&r=PG&f=1", "display_name": "badaboomskey", "link": "https://stackoverflow.com/users/11208147/badaboomskey"}, "edited": false, "score": 0, "creation_date": 1577662938, "post_id": 51292204, "comment_id": 105219486, "body": "I&#39;ve installed gcc and have version 8.2.0, but still face this error in visual studio - how do I fix it?"}], "tags": [], "owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "is_accepted": true, "score": 11, "last_activity_date": 1531334192, "creation_date": 1531334192, "answer_id": 51292204, "question_id": 51291617, "link": "https://stackoverflow.com/questions/51291617/errors-when-using-constexpr-if-expected-before-constexpr/51292204#51292204", "title": "Errors when using constexpr-if: expected &#39;(&#39; before &#39;constexpr&#39;", "body": "<p>Older versions of GCC (up to 6.x) which do not support the final version of C++17 will give that error, because they recognize <code>constexpr</code> as a keyword but do not understand the constexpr-if construct. Make sure your GCC is version 7 or later.</p>\n"}], "owner": {"reputation": 311, "user_id": 9917671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-estiBVuqDLw/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1e7AG7aAchAAy-uvk8I48LzZLZHQ/mo/photo.jpg?sz=128", "display_name": "Lim Ta Sheng", "link": "https://stackoverflow.com/users/9917671/lim-ta-sheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1972, "favorite_count": 0, "accepted_answer_id": 51292204, "answer_count": 1, "score": 6, "last_activity_date": 1531334255, "creation_date": 1531331606, "last_edit_date": 1592644375, "question_id": 51291617, "link": "https://stackoverflow.com/questions/51291617/errors-when-using-constexpr-if-expected-before-constexpr", "title": "Errors when using constexpr-if: expected &#39;(&#39; before &#39;constexpr&#39;", "body": "<p>I am trying to use if-constexpr to check something, but I encounter errors like</p>\n<blockquote>\n<p>expected '(' before 'constexpr'</p>\n<p>'else' without a previous 'if' &quot;</p>\n</blockquote>\n<p>So far i check there is nothing wrong with my codes</p>\n<blockquote>\n<p>My compiling flag is g++ -std=c++17 main.cpp</p>\n</blockquote>\n<pre><code>#include &lt;iostream&gt;\ntemplate&lt;typename T, typename Comp = std::less&lt;T&gt; &gt;\nstruct Facility\n{\ntemplate&lt;T ... list&gt;\nstruct List\n{\n    static void print()\n    {\n        std::cout&lt;&lt;&quot;\\&quot;&quot;&lt;&lt;&quot;Empty List&quot;&lt;&lt;&quot;\\&quot;&quot;&lt;&lt;&quot;\\n&quot;;\n    }\n};\ntemplate&lt;T head,T ... list&gt;\nstruct List&lt;head,list...&gt;\n{\n    static void print()\n    {\n        std::cout&lt;&lt;&quot;\\&quot;&quot; &lt;&lt; head;\n        ((std::cout &lt;&lt; &quot; &quot; &lt;&lt; list), ...);\n        std::cout&lt;&lt;&quot;\\&quot;&quot;&lt;&lt;&quot;\\n&quot;;\n    }\n};\ntemplate&lt;unsigned N,typename AA&gt;\nstruct RemoveFirst{};\n\ntemplate&lt;unsigned N,T head,T ... Rest&gt;\nstruct RemoveFirst&lt;N,List&lt;head,Rest...&gt;&gt;\n{\n    struct result\n    {\n        static void print()\n        {   \n            if constexpr (N == head)\n            {\n                std::cout&lt;&lt;&quot;&quot;;\n            }\n            else\n            {\n                std::cout&lt;&lt;&quot;\\&quot;&quot;&lt;&lt;head;\n                ((std::cout &lt;&lt; &quot; &quot; &lt;&lt; Rest), ...);\n                std::cout&lt;&lt;&quot;\\&quot;&quot;&lt;&lt;&quot;\\n&quot;;\n            }\n        }\n    };\n };\n};\ntemplate&lt;int ... intlist&gt;\nusing IntList = typename Facility&lt;int&gt;::List&lt;intlist...&gt;;\n\nint main()\n{\n using IntFacility = Facility&lt;int&gt;;\n using List = IntList&lt;2, 8, 2, 3, 5, 10, 8, 5&gt;;\n}\n</code></pre>\n"}, {"tags": ["c++", "mfc"], "answers": [{"tags": [], "owner": {"reputation": 6090, "user_id": 4699340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U4Ums.jpg?s=128&g=1", "display_name": "Andrew Komiagin", "link": "https://stackoverflow.com/users/4699340/andrew-komiagin"}, "is_accepted": false, "score": 1, "last_activity_date": 1531382474, "last_edit_date": 1531382474, "creation_date": 1531335156, "answer_id": 51292414, "question_id": 51291458, "link": "https://stackoverflow.com/questions/51291458/using-on-wm-hscroll-while-still-having-a-functional-default-scrollbar/51292414#51292414", "title": "Using ON_WM_HSCROLL() while still having a functional default scrollbar?", "body": "<p>You still need to call the default handler defined in base/parent class: <code>CDialog::OnHScroll(nSBCode, nPos, pScrollBar);</code> in case of dialog window or <code>CFormView::OnHScroll(nSBCode, nPos, pScrollBar);</code> in case of SDI/MDI view.</p>\n\n<p>So your handler will look like this:</p>\n\n<pre><code>void myClass::OnHScroll(UINT nSHCode, UINT nPos, CScrollBar* pScrollBar) \n{\n    if (*pScrollBar == mySlider)\n    {\n    // do stuff\n    }\n\n    CDialog::OnHScroll(nSBCode, nPos, pScrollBar)\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6615873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad0fd293be2ebd65cd06dc510f97b50?s=128&d=identicon&r=PG&f=1", "display_name": "david3de", "link": "https://stackoverflow.com/users/6615873/david3de"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531382474, "creation_date": 1531331007, "question_id": 51291458, "link": "https://stackoverflow.com/questions/51291458/using-on-wm-hscroll-while-still-having-a-functional-default-scrollbar", "title": "Using ON_WM_HSCROLL() while still having a functional default scrollbar?", "body": "<p>I am writing an MFC application which uses the <code>CSliderCtrl</code> class to control a slider. I have the <code>ON_WM_HSCROLL()</code> message in my message map, but this arises with the problem that this disables the default window scrollbar that appears at the bottom of the view when the windows is too small. Manipulating it does nothing to the window. What do I have to do in order to preserve functionality in that scrollbar?</p>\n\n<p>Currently, my <code>OnHScroll()</code> function simply looks like:</p>\n\n<pre><code>void myClass::OnHScroll(UINT nSHCode, UINT nPos, CScrollBar* pScrollBar) \n{\n    if (*pScrollBar == mySlider)\n    {\n    // do stuff\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "memory", "getrusage"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1531332603, "post_id": 51291429, "comment_id": 89561280, "body": "Try writing something to the memory. (All 100000 ints, to be on the safe side.)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1531333764, "post_id": 51291429, "comment_id": 89561783, "body": "Please do not tag unrelated languages."}, {"owner": {"reputation": 33, "user_id": 10066314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/140e9517b982d426554a217d0e680d20?s=128&d=identicon&r=PG&f=1", "display_name": "John.smith16", "link": "https://stackoverflow.com/users/10066314/john-smith16"}, "edited": false, "score": 0, "creation_date": 1532025980, "post_id": 51291429, "comment_id": 89830674, "body": "Why is C not related? These are C functions."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10066314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/140e9517b982d426554a217d0e680d20?s=128&d=identicon&r=PG&f=1", "display_name": "John.smith16", "link": "https://stackoverflow.com/users/10066314/john-smith16"}, "edited": false, "score": 0, "creation_date": 1531331873, "post_id": 51291560, "comment_id": 89560960, "body": "If i try to allocate enough memory with the new call, wouldn&#39;t it be forced to allocate a new chunk and hence increase maxrss?  Valgrind isn&#39;t an option for me as this will ultimately be on an embedded system which won&#39;t be able to run it."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 33, "user_id": 10066314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/140e9517b982d426554a217d0e680d20?s=128&d=identicon&r=PG&f=1", "display_name": "John.smith16", "link": "https://stackoverflow.com/users/10066314/john-smith16"}, "edited": false, "score": 0, "creation_date": 1531332053, "post_id": 51291560, "comment_id": 89561042, "body": "@John.smith16 <code>new</code> would return a pointer into an old or new chunk, you don&#39;t know. Use Valgrind in your desktop develpment environment, do the test there. When all leaks are solved, move to the embedded system."}, {"owner": {"reputation": 33, "user_id": 10066314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/140e9517b982d426554a217d0e680d20?s=128&d=identicon&r=PG&f=1", "display_name": "John.smith16", "link": "https://stackoverflow.com/users/10066314/john-smith16"}, "edited": false, "score": 1, "creation_date": 1531332351, "post_id": 51291560, "comment_id": 89561171, "body": "I mean if the memory im trying to allocate is large enough that there couldn&#39;t be an old chunk big enough. For example im getting a maxrss of 15000kb, if i try to allocate more than 15000kb wouldn&#39;t that force a new chunk to be allocated?"}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 0, "last_activity_date": 1531331386, "creation_date": 1531331386, "answer_id": 51291560, "question_id": 51291429, "link": "https://stackoverflow.com/questions/51291429/linux-getrusage-maxrss-maximum-resident-set-size-not-increasing-with-allocatio/51291560#51291560", "title": "Linux getrusage() maxrss maximum resident set size not increasing with allocation (C++)", "body": "<p>Due to performance issues the Operating System (OS) allocates resources in chuncks, not each app-request is a new resource. So, when a block of memory is released in the app, the OS may still reserve the chunck where it belongs to.</p>\n\n<p>Why? Consider an app requesting 1G of different 1 byte memory blocks. The OS must track all of them, which means that the total amount of memory is 1G plus 2G*sizeof(pair) needed to store the pairs {begin, size} to identify each memory block.</p>\n\n<p>If you want to detect memory leaks use the good old Valgrind tool.</p>\n"}, {"tags": [], "owner": {"reputation": 100768, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": true, "score": 5, "last_activity_date": 1531332342, "creation_date": 1531332342, "answer_id": 51291794, "question_id": 51291429, "link": "https://stackoverflow.com/questions/51291429/linux-getrusage-maxrss-maximum-resident-set-size-not-increasing-with-allocatio/51291794#51291794", "title": "Linux getrusage() maxrss maximum resident set size not increasing with allocation (C++)", "body": "<p>Allocated memory isn't actually mapped until you access it.\nIf you <a href=\"https://stackoverflow.com/questions/7546620/operator-new-initializes-memory-to-zero\">initialize</a> the array with values, Linux is forced to actually allocate and map new pages:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;sys/resource.h&gt;\nusing namespace std;\nint main() {\n  struct rusage r_usage;\n  getrusage(RUSAGE_SELF, &amp;r_usage);\n  cout &lt;&lt; r_usage.ru_maxrss &lt;&lt; \"kb\\n\";\n  cout &lt;&lt; \"Allocating...\\n\";\n  int a = 1000000;                 // Sufficiently large\n  int* memleaktest = new int[a](); // Initialized to zero\n  if(!memleaktest)\n    cout &lt;&lt; \"Allocation failed\";\n  getrusage(RUSAGE_SELF, &amp;r_usage);\n  cout &lt;&lt; \"after allocation \" &lt;&lt; r_usage.ru_maxrss &lt;&lt; \"kb\\n\";\n  return 0;\n}\n</code></pre>\n\n<p>On my system, this results in:</p>\n\n<pre><code>4900kb\nAllocating...\nafter allocation 6844kb\n</code></pre>\n\n<p>Note that compiler optimizations may decide that the array is unused or should be allocated up front, so prefer compiling without them or rewriting the test case in such a way that it can't be optimized.</p>\n"}], "owner": {"reputation": 33, "user_id": 10066314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/140e9517b982d426554a217d0e680d20?s=128&d=identicon&r=PG&f=1", "display_name": "John.smith16", "link": "https://stackoverflow.com/users/10066314/john-smith16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "accepted_answer_id": 51291794, "answer_count": 2, "score": 3, "last_activity_date": 1531333718, "creation_date": 1531330893, "last_edit_date": 1531333718, "question_id": 51291429, "link": "https://stackoverflow.com/questions/51291429/linux-getrusage-maxrss-maximum-resident-set-size-not-increasing-with-allocatio", "title": "Linux getrusage() maxrss maximum resident set size not increasing with allocation (C++)", "body": "<p>I am trying to use <a href=\"http://man7.org/linux/man-pages/man2/getrusage.2.html\" rel=\"nofollow noreferrer\">getrusage(.)</a> and maximum resident set size (maxrss) to check for memory leaks. However, when i purposely try to create a leak, maxrss does not change. Maybe i am not understanding maxrss deeply enough. Here is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;sys/resource.h&gt;\nusing namespace std;\nint main() {\n  struct rusage r_usage;\n  getrusage(RUSAGE_SELF, &amp;r_usage);\n  cout &lt;&lt; r_usage.ru_maxrss &lt;&lt; \"kb\\n\";\n  cout &lt;&lt; \"Allocating...\\n\";\n  int a = 100000; // have tried range of numbers\n  int* memleaktest = new int[a]; // class member\n  if(!memleaktest)\n    cout &lt;&lt; \"Allocation failed\";\n  getrusage(RUSAGE_SELF, &amp;r_usage);\n  cout &lt;&lt; \"after allocation \" &lt;&lt; r_usage.ru_maxrss &lt;&lt; \"kb\\n\";\n  return 0;\n}\n</code></pre>\n\n<p>I get the exact same value after allocatoin (~15000kb).\nOn Ubuntu x86.</p>\n"}, {"tags": ["c++", "memory-management"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 5, "creation_date": 1531329440, "post_id": 51291038, "comment_id": 89559808, "body": "<b><i>How can I delete only a selected number of elements</i></b> You can&#39;t. You can only delete the entire allocation not part of it."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 1, "creation_date": 1531329674, "post_id": 51291038, "comment_id": 89559947, "body": "Internally the Operating System has a pair {begin, size} for every allocation. You can&#39;t modify them, except deallocating the whole chunk."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1531329709, "post_id": 51291038, "comment_id": 89559963, "body": "You have to own the whole chunk until you give it all back. So I guess  you have to do is keep your own housekeeping which parts are allocated etc..."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1531330054, "post_id": 51291038, "comment_id": 89560140, "body": "It seems that you need to use std::malloc/std::realloc instead of operator new"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 2, "creation_date": 1531330755, "post_id": 51291038, "comment_id": 89560451, "body": "@Victor I don&#39;t really believe that would help more."}, {"owner": {"reputation": 1591, "user_id": 420446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406a84b65837087fd511c333fa2a389e?s=128&d=identicon&r=PG", "display_name": "willll", "link": "https://stackoverflow.com/users/420446/willll"}, "edited": false, "score": 0, "creation_date": 1531331041, "post_id": 51291038, "comment_id": 89560577, "body": "Maybe you can think of allocating a few contiguous chunks with an unique size, then will be able to desallocate them individually."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1531331066, "post_id": 51291038, "comment_id": 89560593, "body": "It sounds like you want to use your own allocator. Make an allocator that obtains a large pool of memory and virtually allocates/deallocates small chunks of it. This won&#39;t help you if your goal is to actually free memory early, but it will help you if you expect to reuse those chunks yourself for other purposes."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1531331165, "post_id": 51291038, "comment_id": 89560631, "body": "@ \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 In fact in most cases it will. Since memory allocator (HeapAlloc/HeapRealloc, pdmalloc, jemalloc etc) in most cases will stay data in place, and shrink block metadata."}, {"owner": {"reputation": 1259, "user_id": 5098833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e50aaf2731b3fa8c472766615e63faa0?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykB", "link": "https://stackoverflow.com/users/5098833/patrykb"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531331396, "post_id": 51291038, "comment_id": 89560738, "body": "@Fran&#231;oisAndrieux the longer I think about this problem the more I am convinced that this is the solution to go. However won&#39;t that be a &quot;step back&quot;? I mean it&#39;s more like creating a sophisticated piece of software just to use this software to implement something far less sophisticated."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1531331747, "post_id": 51291038, "comment_id": 89560898, "body": "@cukier9a7b5 If you want to do something complicated, sometimes the solution will take a lot of work.  In this situation, it depends on your allocation requirements. A simple and naive allocator is actually relatively simple to implement. Consider making your allocator compatible with <a href=\"https://en.cppreference.com/w/cpp/memory/allocator\" rel=\"nofollow noreferrer\"><code>std::allocator</code></a> for maximum flexibility and reusability. Since c++17, <code>std::allocator</code> just has to provide <code>allocate</code>, <code>deallocate</code>, a few type alias, a few constructors and the equality operators."}, {"owner": {"reputation": 1262, "user_id": 3940228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1455002de0a9fc115cc877f962ea4c9f?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Sohn", "link": "https://stackoverflow.com/users/3940228/olivier-sohn"}, "edited": false, "score": 1, "creation_date": 1531332419, "post_id": 51291038, "comment_id": 89561202, "body": "I see another problem with the code, which is that alignment constraints of <code>MyStruct</code> are not necessarily taken into account."}], "answers": [{"comments": [{"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1531331510, "post_id": 51291363, "comment_id": 89560785, "body": "<code>with malloc</code> in fact it can (off cause no any guaranty for returning memory back for OS, or data will stay where it was). See <a href=\"https://en.cppreference.com/w/cpp/memory/c/realloc\" rel=\"nofollow noreferrer\">realloc</a> <code>a) expanding or contracting the existing area pointed to by ptr, if possible. The contents of the area remain unchanged up to the lesser of the new and old sizes. If the area is expanded, the contents of the new part of the array are undefined. </code>"}], "tags": [], "owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "is_accepted": false, "score": 1, "last_activity_date": 1531330631, "creation_date": 1531330631, "answer_id": 51291363, "question_id": 51291038, "link": "https://stackoverflow.com/questions/51291038/how-to-deallocate-a-portion-of-a-continuous-memory-block/51291363#51291363", "title": "How to deallocate a portion of a continuous memory block?", "body": "<p>Memory allocated with malloc or new cannot be partially deallocate. Many heaps use bins of different sized allocations for performance and to prevent fragmentation so allowing partial frees would make such a strategy impossible.</p>\n\n<p>That of course does not prevent you writing your own allocator.</p>\n"}, {"comments": [{"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1531332166, "post_id": 51291368, "comment_id": 89561092, "body": "<code>specific OS</code> i suppose you mean C/C++ standard library and it&#39;s memory allocator i.e. malloc and operator new. OS system calls (at least in case of Windows VirtualAlloc and Unix brk/sbrk/mmap )  able to allocate virtual memory in pages. I.e. minimal block is something about 4k. C library malloc, allocates such blocks and returning smaller chunks."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1531333804, "post_id": 51291368, "comment_id": 89561800, "body": "@VictorGubin I&#39;m thinking that there&#39;s nothing stopping an OS from permitting itemized deallocations, except for the difficulty/inefficiency of implementing such a system. So there may hypothetically be an OS that has calls like <code>char* mem = my_os_allocate(4096); my_os_deallocate(mem + 2048, 1024);</code> which leave the first 2048 bytes and the last 1024 bytes as valid memory, but the bytes between <code>mem+2048</code> and <code>mem+3072</code> is returned to the OS. I don&#39;t personally know of any such system, and C++ doesn&#39;t acknowledge such a system in its language, but it&#39;s theoretically possible."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1531338345, "post_id": 51291368, "comment_id": 89563883, "body": "in most cases even if you call to delete []/delete or std::free virtual memory actually will not be returned to operating system back, it will be saved for latter usage (next calls to std::malloc/operator new). Some memory allocators like jemalloc for example, have a background garbage collector thread, which scanning memory in a schedule and returns empty virtual memory regions, not used for a long time, back to system."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 3, "last_activity_date": 1531330652, "creation_date": 1531330652, "answer_id": 51291368, "question_id": 51291038, "link": "https://stackoverflow.com/questions/51291038/how-to-deallocate-a-portion-of-a-continuous-memory-block/51291368#51291368", "title": "How to deallocate a portion of a continuous memory block?", "body": "<p>This kind of selective deallocation is not supported by the C++ programming language, and is probably never going to be supported.</p>\n\n<p>If you intend to deallocate individual portions of memory, those individual portions need to be individually allocated in the first place.</p>\n\n<p>It is <em>possible</em> that a specific OS or platform might support this kind of behavior, but it would be with OS-specific system calls, not through C++ standard language syntax.</p>\n"}, {"comments": [{"owner": {"reputation": 1259, "user_id": 5098833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e50aaf2731b3fa8c472766615e63faa0?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykB", "link": "https://stackoverflow.com/users/5098833/patrykb"}, "edited": false, "score": 0, "creation_date": 1531332686, "post_id": 51291793, "comment_id": 89561321, "body": "I see what you mean, but <code>std::vector</code> will not do the trick for me. Like I said it is critical for me <b>NOT</b> to move data or re-allocate memory. The thing is I am writing my own container (like a hybrid between <code>std::list</code> and <code>std::vector</code>) <b>that guarantees the data will not be moved</b> (if I create a pointer to an element, that pointer will stay valid to the end of &quot;time&quot;). The sheer fact that I want to &quot;split&quot; existing block of memory is because I want to implement <code>std::vector::insert()</code>-like function that will &quot;update&quot; the metadata of the memory the container owns."}, {"owner": {"reputation": 1259, "user_id": 5098833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e50aaf2731b3fa8c472766615e63faa0?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykB", "link": "https://stackoverflow.com/users/5098833/patrykb"}, "edited": false, "score": 0, "creation_date": 1531333215, "post_id": 51291793, "comment_id": 89561551, "body": "That&#39;s why I need a low-level memory management. And yes you are right, my current implementation is &quot;bad&quot; and that&#39;s why I asked for the help of this great community, to do it right. The best suited for meidea I heard up until now is to create my own memory manager that will &quot;virtually&quot; allocate and deallocate memory"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 1, "last_activity_date": 1531336855, "last_edit_date": 1531336855, "creation_date": 1531332341, "answer_id": 51291793, "question_id": 51291038, "link": "https://stackoverflow.com/questions/51291038/how-to-deallocate-a-portion-of-a-continuous-memory-block/51291793#51291793", "title": "How to deallocate a portion of a continuous memory block?", "body": "<p>Let's be honest: this is a very bad practice ! Trying to cast <code>new</code> and <code>delete</code> and in addition call yourself destructor between the two is an evidence of low-level manual memory management.  </p>\n\n<p><strong>Alternatives</strong></p>\n\n<p>The proper way to manage dynamic memory structures in contiguous blocks in C++ is to use <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> instead of manual arrays or manual memory management, and let the library proceed.  You can <a href=\"http://www.cplusplus.com/reference/vector/vector/resize/\" rel=\"nofollow noreferrer\"><code>resize()</code></a> a vector to delete the unneeded elements. You can <a href=\"http://www.cplusplus.com/reference/vector/vector/shrink_to_fit/\" rel=\"nofollow noreferrer\"><code>shrink_to_fit()</code></a> to say that you no longer need the extra free capacity, although it's not guaranteed that unneeded memory is released.</p>\n\n<p>The use of C memory allocation functions and in particular <a href=\"https://en.cppreference.com/w/c/memory/realloc\" rel=\"nofollow noreferrer\"><code>realloc()</code></a> is to be avoided, as it is very error prone, and it works only with <a href=\"https://en.cppreference.com/w/cpp/types/is_trivially_copyable\" rel=\"nofollow noreferrer\">trivially copiable objects</a>.  </p>\n\n<p><strong>Edit: Your own container</strong></p>\n\n<p>If you want to implement your own special container and must allows this kind of dynamic behaviour, due to unusual special constraints, then you should consider writing your own memory management function that would manage a kind of \"private heap\". </p>\n\n<p>Heap management is often implement via a <a href=\"http://dysphoria.net/OperatingSystems1/4_allocation_list.html\" rel=\"nofollow noreferrer\">linked list of free chunks</a>.<br>\nOne strategy could be to allocate a new chunk when there's no sufficient contiguous memory left in your private heap.  You could then offer a more permissive <code>myfree()</code> function that reinserts a freed or partially freed chunk into that linked list.  Of course, this requires to iterate through the linked list to find if the released memory is contiguous to any other chunk of free memory in the private heap, and merge the blocks if adjacent.    </p>\n\n<p>I see that <code>MyStruct</code> is very small.  Another approach could then be to write a special allocation function optimised for small fixed size blocks.  There is an example in <a href=\"http://loki-lib.sourceforge.net/html/a00632.html\" rel=\"nofollow noreferrer\">Loki's small object library</a> that is described in depth in \"<a href=\"https://en.wikipedia.org/wiki/Modern_C%2B%2B_Design\" rel=\"nofollow noreferrer\">Modern C++ Design</a>\".  </p>\n\n<p>Finally, you could perhaps have a look at the <a href=\"https://www.boost.org/doc/libs/1_65_0/libs/pool/doc/html/index.html\" rel=\"nofollow noreferrer\">Pool library of Boost</a>, which also offers a <a href=\"https://www.boost.org/doc/libs/1_65_0/libs/pool/doc/html/boost_pool/pool/pooling.html\" rel=\"nofollow noreferrer\">chunk based approach</a>.   </p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1531332450, "creation_date": 1531332450, "answer_id": 51291820, "question_id": 51291038, "link": "https://stackoverflow.com/questions/51291038/how-to-deallocate-a-portion-of-a-continuous-memory-block/51291820#51291820", "title": "How to deallocate a portion of a continuous memory block?", "body": "<p>The simplest way I could think of by means of standard c++ would follow this idiomatic code:</p>\n\n<pre><code>std::vector&lt;int&gt; v1(1000);\nauto block_start = v1.begin() + 400;\nauto block_end = v1.begin() + 500;\nstd::vector&lt;int&gt; v2(block_start,block_end);\nv1.erase(block_start,block_end);\nv1.shrink_to_fit();\n</code></pre>\n\n<p>If a compiler is intelligent enough to translate such pattern to the most efficient low level OS and CPU memory management operations, is an implementation detail.</p>\n\n<p>Here's the <a href=\"http://coliru.stacked-crooked.com/a/906e218a21a42e6b\" rel=\"nofollow noreferrer\">working example</a>.</p>\n"}], "owner": {"reputation": 1259, "user_id": 5098833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e50aaf2731b3fa8c472766615e63faa0?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykB", "link": "https://stackoverflow.com/users/5098833/patrykb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1531336855, "creation_date": 1531329326, "question_id": 51291038, "link": "https://stackoverflow.com/questions/51291038/how-to-deallocate-a-portion-of-a-continuous-memory-block", "title": "How to deallocate a portion of a continuous memory block?", "body": "<p><br>\nlet's assume I have a structure <code>MyStruct</code> and i want to allocate a \"big\" chunk of memory like this:</p>\n\n<pre><code>std::size_t memory_chunk_1_size = 10;\nMyStruct * memory_chunk_1 = reinterpret_cast &lt;MyStruct *&gt; (new char[memory_chunk_1_size * sizeof(MyStruct)]);\n</code></pre>\n\n<p>and because of the \"arbitrary reasons\" I would like to \"split\" this chunk of memory into two smaller chunks without; moving data, resizing the \"dynamic array\", deallocating/allocating/reallocating memory, etc.</p>\n\n<p>so I am doing this:</p>\n\n<pre><code>std::size_t memory_chunk_2_size = 5;              // to remember how many elements there are in this chunk;\nMyStruct * memory_chunk_2 = &amp;memory_chunk_1[5];   // points to the 6th element of memory_chunk_1;\n\nmemory_chunk_1_size = 5;                          // to remember how many elements there are in this chunk;\nmemory_chunk_1 = memory_chunk_1;                  // nothing changes still points to the 1st element.\n</code></pre>\n\n<p>Unfortunately, when I try to deallocate the memory, I'm encountering an error:</p>\n\n<pre><code>// release memory from the 2nd chunk\nfor (int i = 0; i &lt; memory_chunk_2_size ; i++)\n{\n    memory_chunk_2[i].~MyStruct();\n}\ndelete[] reinterpret_cast &lt;char *&gt; (memory_chunk_2); // deallocates memory from both \"memory_chunk_2\" and \"memory_chunk_1\"\n\n// release memory from the 1st chunk\nfor (int i = 0; i &lt; memory_chunk_1_size ; i++)\n{\n    memory_chunk_1[i].~MyStruct();                   // Throws exception.\n}\ndelete[] reinterpret_cast &lt;char *&gt; (memory_chunk_1); // Throws exception. This part of the memory was already dealocated.\n</code></pre>\n\n<p><strong>How can I delete only a selected number of elements (to solve this error)?</strong></p>\n\n<p>Compilable example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct MyStruct\n{\n    int first;\n    int * second;\n\n    void print()\n    {\n        cout &lt;&lt; \"- first:  \" &lt;&lt;  first  &lt;&lt; endl;\n        cout &lt;&lt; \"- second: \" &lt;&lt; *second &lt;&lt; endl;\n        cout &lt;&lt; endl;\n    }\n\n    MyStruct() :\n        first(-1), second(new int(-1))\n    {\n        cout &lt;&lt; \"constructor #1\" &lt;&lt; endl;\n        print();\n    }\n\n    MyStruct(int ini_first, int ini_second) :\n        first(ini_first), second(new int(ini_second))\n    {\n        cout &lt;&lt; \"constructor #2\" &lt;&lt; endl;\n        print();\n    }\n\n    ~MyStruct()\n    {\n        cout &lt;&lt; \"destructor\" &lt;&lt; endl;\n        print();\n\n        delete second;\n    }\n};\n\nint main()\n{\n    // memory chunk #1:\n    std::size_t memory_chunk_1_size = 10;\n    MyStruct * memory_chunk_1 = reinterpret_cast &lt;MyStruct *&gt; (new char[memory_chunk_1_size * sizeof(MyStruct)]);\n\n    // initialize:\n    for (int i = 0; i &lt; memory_chunk_1_size; i++)\n    {\n        new (&amp;memory_chunk_1[i]) MyStruct(i,i);\n    }\n\n    // ...\n    // Somewhere here I decided I want to have two smaller chunks of memory instead of one big,\n    // but i don't want to move data nor reallocate the memory:\n\n    std::size_t memory_chunk_2_size = 5;              // to remember how many elements there are in this chunk;\n    MyStruct * memory_chunk_2 = &amp;memory_chunk_1[5];   // points to the 6th element of memory_chunk_1;\n\n    memory_chunk_1_size = 5;                          // to remember how many elements there are in this chunk;\n    memory_chunk_1 = memory_chunk_1;                  // nothing changes still points to the 1st element.\n\n    // ... \n    // some time later i want to free memory:\n\n    // release memory from the 2nd chunk\n    for (int i = 0; i &lt; memory_chunk_2_size ; i++)\n    {\n        memory_chunk_2[i].~MyStruct();\n    }\n    delete[] reinterpret_cast &lt;char *&gt; (memory_chunk_2); // deallocates memory from both \"memory_chunk_2\" and \"memory_chunk_1\"\n\n    // release memory from the 1st chunk\n    for (int i = 0; i &lt; memory_chunk_1_size ; i++)\n    {\n        memory_chunk_1[i].~MyStruct();                   // Throws exception.\n    }\n    delete[] reinterpret_cast &lt;char *&gt; (memory_chunk_1); // Throws exception. This part of the memory was already dealocated.\n\n    // exit:\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "input", "char", "cin"], "comments": [{"owner": {"reputation": 1732, "user_id": 8121683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1fnlik1dgxU/AAAAAAAAAAI/AAAAAAAAATk/MvX5UOgKBfg/photo.jpg?sz=128", "display_name": "Easton Bornemeier", "link": "https://stackoverflow.com/users/8121683/easton-bornemeier"}, "edited": false, "score": 3, "creation_date": 1531329282, "post_id": 51291005, "comment_id": 89559721, "body": "You are redefining Move. Simply remove the <code>int Move</code> where you get the input"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1531329298, "post_id": 51291005, "comment_id": 89559737, "body": "<code>&#39;1&#39;</code> is not the same as <code>1</code>. One is a <code>char</code>, the other a <code>int</code>."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 2, "creation_date": 1531329394, "post_id": 51291005, "comment_id": 89559784, "body": "Your <code>GetMove</code> function looks fine in and of itself, you&#39;re just confusing the <code>FDeclarations::Move</code> member with the <code>Move</code> <i>local variable</i> inside <code>GetMove</code>, which is <i>shadowing</i> the member. You should choose between returning the new move and modifying the member <code>Move</code>."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 2, "creation_date": 1531329441, "post_id": 51291005, "comment_id": 89559811, "body": "Also <code>if (turn = false)</code> - what is this? Equality comparison in C++ is expressed by <code>==</code> operator."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1531329523, "post_id": 51291005, "comment_id": 89559861, "body": "I don&#39;t see any point in your code where you&#39;d call your <code>GetMove</code>. Where is the call? Show us how you call it."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1531329673, "post_id": 51291005, "comment_id": 89559946, "body": "Indeed, <code>if (turn = false) { ...</code> doesn&#39;t do what you think it does. You probably meant <code>if (turn == false){ ...</code>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1531329716, "post_id": 51291005, "comment_id": 89559967, "body": "@alter igel: If the OP intends to call that <code>GetMove</code> as <code>Move = GetMove()</code> (i.e. assign the returned value to the member), then there&#39;s nothing wrong with inner <code>Move</code>&#39;s being a local variable."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1531329719, "post_id": 51291005, "comment_id": 89559970, "body": "If you adapt a the common coding style where variables are lower case, while methods and functions are uppercase, you&#39;ll avoid this kind of confusion in the future."}], "answers": [{"comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1531329551, "post_id": 51291085, "comment_id": 89559873, "body": "Well, maybe that is the intent! Maybe the OP plans to call that function as <code>Move = GetMove()</code>, where <code>Move</code> is the member. In that case the result will get into member <code>Move</code>."}, {"owner": {"reputation": 1158, "user_id": 4956078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44600007f35ab98b7badbf1110df0687?s=128&d=identicon&r=PG&f=1", "display_name": "JMAA", "link": "https://stackoverflow.com/users/4956078/jmaa"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1531329688, "post_id": 51291085, "comment_id": 89559953, "body": "@AnT Sure, like I said, &quot;Unless you use the return value...&quot;. With the code given this is the best we can say."}, {"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 1, "creation_date": 1531329810, "post_id": 51291085, "comment_id": 89560016, "body": "This is why some programmers INSIST that you use <code>this-&gt;member</code>. This exact reason. You cannot accidentally do these kinds of things if you code like this."}], "tags": [], "owner": {"reputation": 1158, "user_id": 4956078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44600007f35ab98b7badbf1110df0687?s=128&d=identicon&r=PG&f=1", "display_name": "JMAA", "link": "https://stackoverflow.com/users/4956078/jmaa"}, "is_accepted": true, "score": 3, "last_activity_date": 1531329523, "creation_date": 1531329523, "answer_id": 51291085, "question_id": 51291005, "link": "https://stackoverflow.com/questions/51291005/c-user-inputs-a-char-the-variable-stays-0/51291085#51291085", "title": "C++ User inputs a char, the variable stays 0", "body": "<p>In your function</p>\n\n<pre><code>int FDeclarations::GetMove() {\n    int Move;\n    std::cin &gt;&gt; Move;\n    return Move;\n}\n</code></pre>\n\n<p>You declare a <em>new</em> variable called <code>Move</code> which is local to that function. This is different from the member variable <code>Move</code> declared in the class. C++ will prefer to bind to the function-level variable.</p>\n\n<p>Unless you use the return value of <code>GetMove</code> to set the member variable <code>Move</code> in code you've not shown us, then the member variable <code>Move</code> will never change, causing your problem.</p>\n"}, {"comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1531329633, "post_id": 51291109, "comment_id": 89559929, "body": "How do you know that? Maybe the OP plans to call that function as <code>Move = GetMove()</code>, where Move is the member. In that case the result will get into member <code>Move</code>."}], "tags": [], "owner": {"reputation": 31, "user_id": 9380905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4897acf6621546c28b96157daa83b152?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/9380905/dan"}, "is_accepted": false, "score": 2, "last_activity_date": 1531329600, "creation_date": 1531329600, "answer_id": 51291109, "question_id": 51291005, "link": "https://stackoverflow.com/questions/51291005/c-user-inputs-a-char-the-variable-stays-0/51291109#51291109", "title": "C++ User inputs a char, the variable stays 0", "body": "<p>In <code>FDeclarations::GetMove()</code> you need to set the private member of your class <code>Move</code> to whatever the user will input instead of the local variable wich shadows the member one. So a quick fix will be:</p>\n\n<pre><code>int FDeclarations::GetMove(){\n    std::cin &gt;&gt; Move;\n    return Move;}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 10066203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a8f29d61c7f4a9a0fb3fbe148a28b97?s=128&d=identicon&r=PG&f=1", "display_name": "F&#233;lix C.T.", "link": "https://stackoverflow.com/users/10066203/f%c3%a9lix-c-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 51291085, "answer_count": 2, "score": 3, "last_activity_date": 1531329600, "creation_date": 1531329177, "question_id": 51291005, "link": "https://stackoverflow.com/questions/51291005/c-user-inputs-a-char-the-variable-stays-0", "title": "C++ User inputs a char, the variable stays 0", "body": "<p>I'm trying to create a tic-tac-toe game where the user inputs a number (corresponding to the position he wants place his X or O), but the variable (Move) which receives the number stays at 0 no matter what the input is. Can you help me figure out what to fix so the variable actually receives what the user inputs? Here is the code for the function which receives the move:</p>\n\n<pre><code>int FDeclarations::GetMove(){\nint Move;\nstd::cin &gt;&gt; Move;\nreturn Move;}\n</code></pre>\n\n<p>Here is the code for the function which goes through the switch statement (none of the works since the variable \"Move\" is always at 0)</p>\n\n<pre><code>int FDeclarations::PlaceMove(){\nswitch (Move)\n{\ncase(1):\n    if (turn == false) { TopLeft = 'x'; }\n    else { TopLeft = 'o'; }\n    break;\ncase(2):\n    if (turn = false) { TopMid = 'x'; }\n    else { TopMid = 'o'; }\n    break;\ncase(3):\n    if (turn = false) { TopRight = 'x'; }\n    else { TopRight = 'o'; }\n    break;\ncase(4):\n    if (turn = false) { MidLeft = 'x'; }\n    else { MidLeft = 'o'; }\n    break;\ncase(5):\n    if (turn = false) { MidMid = 'x'; }\n    else { MidMid = 'o'; }\n    break;\ncase(6):\n    if (turn = false) { MidRight = 'x'; }\n    else { MidRight = 'o'; }\n    break;\ncase(7):\n    if (turn = false) { BotLeft = 'x'; }\n    else { BotLeft = 'o'; }\n    break;\ncase(8):\n    if (turn = false) { BotMid = 'x'; }\n    else { BotMid = 'o'; }\n    break;\ncase(9):\n    if (turn = false) { BotRight = 'x'; }\n    else { BotRight = 'o'; }\n    break;\n}\n\n\ntable();\n    return 0;\n}\n</code></pre>\n\n<p>Here are my variable declarations:</p>\n\n<pre><code>        class FDeclarations\n{\n    public:\n        int PlaceMove();\n        int GetMove();\n        int CheckWin();\n        void table();\n\n    private:\n        bool turn = false;\n        int Move;\n        char TopLeft = '1';\n        char TopMid = '2';\n        char TopRight = '3';\n        char MidLeft = '4';\n        char MidMid = '5';\n        char MidRight = '6';\n        char BotLeft = '7';\n        char BotMid = '8';\n        char BotRight ='9';\n        bool XWin;\n        bool OWin;\n    };\n</code></pre>\n"}, {"tags": ["c++", "iterator"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1531329040, "post_id": 51290907, "comment_id": 89559597, "body": "Could you please explain why you&#39;re using <code>static</code> in: <code>pointer operator -&gt; () { static value_type v; v = *(*this); return &amp;v; }</code>? It looks very suspicious"}, {"owner": {"reputation": 412, "user_id": 5194459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3iVN.jpg?s=128&g=1", "display_name": "Dominic Price", "link": "https://stackoverflow.com/users/5194459/dominic-price"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1531329096, "post_id": 51290907, "comment_id": 89559624, "body": "Just to make the code example shorter, it goes via a proxy class in my actual code; the error is the same in both versions."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 1, "creation_date": 1531329116, "post_id": 51290907, "comment_id": 89559635, "body": "The answer aside. Why are your <code>operator ==</code> and <code>operator !=</code> implemented so differently??"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1531329147, "post_id": 51290907, "comment_id": 89559652, "body": "The linked page also says <code>i-&gt;m</code> should be equivalent to <code>(*i).m</code>. This requirement isn&#39;t upheld here, since <code>operator-&gt;</code> returns a pointer to a static and <code>operator*</code> returns some unrelated pair."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 3, "creation_date": 1531329229, "post_id": 51290907, "comment_id": 89559694, "body": "@JHBonarius <code>operator!=</code> is implemented <i>in terms of</i> <code>operator==</code>, which is a normal approach to take. If you need to make a change, for example to fix a bug, you just have to make changes to <code>operator==</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531329394, "post_id": 51290907, "comment_id": 89559783, "body": "It seems the static <code>v</code> in <code>operator-&gt;</code> is always assigned to <code>operator*</code> before being returned. This might appear to work with what you&#39;ve done so far, but something like <code>it-&gt;first = 5;</code> won&#39;t. The problem with the current iterator is that represents a <code>std::pair</code> that doesn&#39;t actually exist. It seems to me like it&#39;s <code>value_type</code> should be <code>std::pair&lt;const int, const bool&gt;</code>."}, {"owner": {"reputation": 412, "user_id": 5194459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3iVN.jpg?s=128&g=1", "display_name": "Dominic Price", "link": "https://stackoverflow.com/users/5194459/dominic-price"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531329427, "post_id": 51290907, "comment_id": 89559803, "body": "@Fran&#231;oisAndrieux True, does this mean they have to be the same object in memory? As they will both return an object which will return true if compared"}, {"owner": {"reputation": 412, "user_id": 5194459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3iVN.jpg?s=128&g=1", "display_name": "Dominic Price", "link": "https://stackoverflow.com/users/5194459/dominic-price"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531329521, "post_id": 51290907, "comment_id": 89559860, "body": "@Fran&#231;oisAndrieux And yes, sorry there should be a lot more <code>const</code> floating about than there is. The objects you get upon referencing the iterator should be read only."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531329562, "post_id": 51290907, "comment_id": 89559882, "body": "@DominicPrice I&#39;m not sure if it&#39;s formally a requirement and I don&#39;t think that&#39;s the cause of your problem here. But what I&#39;m sure about is that other developers and users will expect <code>operator-&gt;</code> to return a pointer to <code>operator*</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531330065, "post_id": 51290907, "comment_id": 89560146, "body": "You forgot to provide <code>difference_type</code> so you don&#39;t satisfy the <a href=\"https://en.cppreference.com/w/cpp/named_req/Iterator\" rel=\"nofollow noreferrer\">Iterator</a> requirement. When in doubt, <code>using difference_type = std::ptrdiff_t;</code> is a pretty safe bet."}, {"owner": {"reputation": 412, "user_id": 5194459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3iVN.jpg?s=128&g=1", "display_name": "Dominic Price", "link": "https://stackoverflow.com/users/5194459/dominic-price"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531330241, "post_id": 51290907, "comment_id": 89560219, "body": "@Fran&#231;oisAndrieux Wellll now don&#39;t I feel a fool :P. That works. Will accept that as an answer if you post it."}], "answers": [{"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 2, "last_activity_date": 1531330612, "creation_date": 1531330612, "answer_id": 51291356, "question_id": 51290907, "link": "https://stackoverflow.com/questions/51290907/make-iterator-that-can-be-used-to-initialize-vector/51291356#51291356", "title": "Make iterator that can be used to initialize vector", "body": "<p>According to <a href=\"https://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow noreferrer\">cccpreference.com</a> the <code>std::vector</code> constructor that takes iterators <em>\"[...] only participates in overload resolution if InputIt satisfies InputIterator, to avoid ambiguity with the overload (2).\"</em>.</p>\n\n<p>To satisfy <a href=\"https://en.cppreference.com/w/cpp/named_req/InputIterator\" rel=\"nofollow noreferrer\">InputIterator</a> a type must satisfy <a href=\"https://en.cppreference.com/w/cpp/named_req/Iterator\" rel=\"nofollow noreferrer\">Iterator</a>. In turn, <code>Iterator</code> requires the type to provide several type alias, including <code>difference_type</code> which you've omitted.</p>\n\n<p>Try adding the public type alias <code>using difference_type = std::ptrdiff_t;</code> to your iterator type.</p>\n"}], "owner": {"reputation": 412, "user_id": 5194459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3iVN.jpg?s=128&g=1", "display_name": "Dominic Price", "link": "https://stackoverflow.com/users/5194459/dominic-price"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 51291356, "answer_count": 1, "score": 3, "last_activity_date": 1531330612, "creation_date": 1531328802, "question_id": 51290907, "link": "https://stackoverflow.com/questions/51290907/make-iterator-that-can-be-used-to-initialize-vector", "title": "Make iterator that can be used to initialize vector", "body": "<p>I'm having some trouble creating an iterator type for my class which can be used to initialize a vector. Probably best explained with some code, here's an example of what my implementation looks like:</p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;cstdint&gt;\n\nstruct Foo\n{\npublic:\n    Foo(uint8_t i) : i(i) {}\n    struct iterator\n    {\n    public:\n        using value_type = std::pair&lt;int, bool&gt;;\n        using reference = value_type;\n        using pointer = value_type*;\n        using iterator_category = std::input_iterator_tag;\n\n        bool operator == (const iterator&amp; other) { return cur == other.cur; }\n        bool operator != (const iterator&amp; other) { return !(*this == other); }\n\n        iterator&amp; operator ++ () { if (cur &gt; -1) --cur; return *this; }\n        iterator operator ++ (int) { iterator tmp = *this; ++(*this); return tmp; }\n\n        reference operator * () { return std::make_pair&lt;int, bool&gt;(8 - cur, foo-&gt;i &amp; (1 &lt;&lt; cur)); }\n        pointer operator -&gt; () { static value_type v; v = *(*this); return &amp;v; }\n    private:\n        friend Foo;\n        iterator(const Foo* foo, int start) : foo(foo), cur(start) {}\n        const Foo* foo;\n        int cur;\n    };\n\n    iterator begin() const { return iterator(this, 7); }\n    iterator end() const { return iterator(this, -1); }\n\n    uint8_t i;\n};\n</code></pre>\n\n<p>The logic of what the class is doing doesn't matter; it's the fact that although I can use this iterator in a for loop, I get an error when attempting to construct a vector from it:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n// struct Foo...\n\nint main()\n{\n    Foo foo(73);\n\n    // Works, output as expected\n    for (auto elem : foo)\n        std::cout &lt;&lt; \"Position \" &lt;&lt; elem.first &lt;&lt; \" is a \" &lt;&lt; elem.second &lt;&lt; '\\n';\n\n    // Works, output as expected\n    for (auto it = foo.begin(), end = foo.end(); it != end; ++it)\n        std::cout &lt;&lt; \"Position \" &lt;&lt; it-&gt;first &lt;&lt; \" is a \" &lt;&lt; it-&gt;second &lt;&lt; '\\n';\n\n    // Error: cannot convert argument 1 from 'PowersOf2::iterator' to 'const unsigned __int64'\n    std::vector&lt;std::pair&lt;int, bool&gt;&gt; v(foo.begin(), foo.end());\n}\n</code></pre>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow noreferrer\">cppreference</a> tells me that <code>std::vector</code>'s constructor takes two iterators <em>if InputIt satisfies InputIterator</em>. <a href=\"https://en.cppreference.com/w/cpp/named_req/InputIterator\" rel=\"nofollow noreferrer\">It also tells me</a> that the requirements for an InputIterator are</p>\n\n<ol>\n<li>Satisfies <em>Iterator</em></li>\n<li>Satisfies <em>EqualityComparable</em></li>\n<li><code>i != j</code>, <code>*i</code>, <code>i-&gt;m</code>, <code>++i</code>, <code>(void)i++</code> and <code>*i++</code> are valid</li>\n</ol>\n\n<p>so I'm not sure what's gone wrong. Any help appreciated!</p>\n"}, {"tags": ["c++", "algorithm", "c++11", "time-complexity"], "comments": [{"owner": {"reputation": 972, "user_id": 7201420, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33b5cf8a2891b9e747526da974d24e33?s=128&d=identicon&r=PG&f=1", "display_name": "Maras", "link": "https://stackoverflow.com/users/7201420/maras"}, "edited": false, "score": 0, "creation_date": 1531328782, "post_id": 51290846, "comment_id": 89559465, "body": "KMP definitely, find is O(n*k)"}], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 10002202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ub6GC.jpg?s=128&g=1", "display_name": "xXNebulaNinjaXx", "link": "https://stackoverflow.com/users/10002202/xxnebulaninjaxx"}, "is_accepted": false, "score": 0, "last_activity_date": 1531334330, "last_edit_date": 1531334330, "creation_date": 1531329906, "answer_id": 51291189, "question_id": 51290846, "link": "https://stackoverflow.com/questions/51290846/which-algorithm-is-used-by-stringfind-in-c/51291189#51291189", "title": "Which algorithm is used by string::find in c++?", "body": "<p>With a quick search, I found this:</p>\n\n<ul>\n<li>KMP is <code>O(n + k)</code></li>\n<li>Find is <code>O(n * k)</code></li>\n</ul>\n\n<p>So KMP is a faster search algorithm. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/8869605/\">C++ string::find complexity</a></p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm\" rel=\"nofollow noreferrer\">Knuth\u2013Morris\u2013Pratt algorithm</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10054377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c3625ca10b8f1162db4626d71adb23?s=128&d=identicon&r=PG&f=1", "display_name": "Yash Saxena", "link": "https://stackoverflow.com/users/10054377/yash-saxena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1531334330, "creation_date": 1531328548, "question_id": 51290846, "link": "https://stackoverflow.com/questions/51290846/which-algorithm-is-used-by-stringfind-in-c", "title": "Which algorithm is used by string::find in c++?", "body": "<p>I need to search for a sub-string in a given string. C++ provides library function 'find' for this. What is the algorithm used by this library function? For purpose of competitive programming, should I use this function or use KMP search algorithm? </p>\n"}, {"tags": ["c++", "memory-management", "stdvector"], "comments": [{"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "edited": false, "score": 2, "creation_date": 1531328376, "post_id": 51290774, "comment_id": 89559258, "body": "It is not guaranteed, but most popular implementations do so."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1531339285, "post_id": 51290774, "comment_id": 89564313, "body": "Even if the destruction of excess elements is <code>O(n)</code>, nothing stops that from being <code>n * 0</code>."}, {"owner": {"reputation": 1165, "user_id": 2990344, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4541d7050a05707748ef30b0529407bd?s=128&d=identicon&r=PG&f=1", "display_name": "xdavidliu", "link": "https://stackoverflow.com/users/2990344/xdavidliu"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1586887203, "post_id": 51290774, "comment_id": 108292451, "body": "@BoPersson that statement is trivial; O(f(N)) means bounded <i>above</i> by f(N) as N goes to infinity, hence we can trivially say &quot;nothing stops O(f(N)) from being zero&quot; for <i>any</i> f, including exponential, factorial etc."}], "answers": [{"tags": [], "owner": {"reputation": 1158, "user_id": 4956078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44600007f35ab98b7badbf1110df0687?s=128&d=identicon&r=PG&f=1", "display_name": "JMAA", "link": "https://stackoverflow.com/users/4956078/jmaa"}, "is_accepted": true, "score": 0, "last_activity_date": 1531328694, "creation_date": 1531328694, "answer_id": 51290877, "question_id": 51290774, "link": "https://stackoverflow.com/questions/51290774/does-stdvectorresize-downward-take-o1-time-if-the-element-type-is-a-prim/51290877#51290877", "title": "does std::vector::resize() downward take O(1) time if the element type is a primitive?", "body": "<p>There seems to be no guarantee in the standard for this complexity. However, as you point out, there seems to be no reason for greater-than-constant complexity either in that case. Complexity is only guaranteed to be <code>O(n)</code>.</p>\n\n<p>I'd be surprised to find a compiler that implemented it as linear for primitive types, but the best way to be sure with your compiler setup would be to make a simple test.</p>\n"}], "owner": {"reputation": 1165, "user_id": 2990344, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4541d7050a05707748ef30b0529407bd?s=128&d=identicon&r=PG&f=1", "display_name": "xdavidliu", "link": "https://stackoverflow.com/users/2990344/xdavidliu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 51290877, "answer_count": 1, "score": 3, "last_activity_date": 1531328694, "creation_date": 1531328302, "last_edit_date": 1531328573, "question_id": 51290774, "link": "https://stackoverflow.com/questions/51290774/does-stdvectorresize-downward-take-o1-time-if-the-element-type-is-a-prim", "title": "does std::vector::resize() downward take O(1) time if the element type is a primitive?", "body": "<p>I understand that in C++, <code>std::vector::resize</code> allocates no new memory when the new size is smaller. Also, if the element type is a user-defined class with a destructor, that destructor may be called for every element that is \"lost\" in the resize, so in that case the running time would be linear in the size difference.</p>\n\n<p>However, if the element type were a primitive, e.g. <code>std::vector&lt;int&gt;</code>, there's no destructor to call. In that case, is there any reason that <code>resize</code> downward would ever not be O(1) time?</p>\n"}, {"tags": ["c++", "templates", "template-meta-programming", "sfinae"], "comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 2, "creation_date": 1531330150, "post_id": 51290767, "comment_id": 89560183, "body": "&quot;does for every other value for open_type a new class file is instantiated?&quot; - yes."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1532953159, "post_id": 51290767, "comment_id": 90153251, "body": "There doesn&#39;t seem to be any point to your <code>typename T</code> parameters in <code>read</code> and <code>write</code>. You are discarding the value of <code>sizeof(T)</code>"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1532953202, "post_id": 51290767, "comment_id": 90153279, "body": "<code>template&lt;&gt; std::enable_if_t&lt;is_read_mode(),size_t&gt; read()</code> would do the same"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1532953461, "post_id": 51290767, "comment_id": 90153465, "body": "And I&#39;d find it easier to have <code>static constexpr bool is_read_mode = (open_type &amp; open_mode::read);</code> than your function + macro + duplication of <code>0, 1, 2, 3</code>"}, {"owner": {"reputation": 629, "user_id": 8124507, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0f4c546e2ba73af5048a059d424cbd4c?s=128&d=identicon&r=PG&f=1", "display_name": "bluedragon", "link": "https://stackoverflow.com/users/8124507/bluedragon"}, "edited": false, "score": 0, "creation_date": 1532957480, "post_id": 51290767, "comment_id": 90156038, "body": "i was using `std::enable_if_t&lt;is_read_mode(),size_t&gt; read()&#39; but that was not compiling"}, {"owner": {"reputation": 1297, "user_id": 4049863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88901438bae8aadeeb93f33cc7e88c?s=128&d=identicon&r=PG&f=1", "display_name": "G&#233;za T&#246;r&#246;k", "link": "https://stackoverflow.com/users/4049863/g%c3%a9za-t%c3%b6r%c3%b6k"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1533838481, "post_id": 51290767, "comment_id": 90505668, "body": "@Caleth he would not be able to use enable_if if the function did not have a template parameter. Also, <code>T</code> must be incorporated to the signature of the function to make it compile. Using the comma operator to circumvent the compiler&#39;s fad in a case like this is a pretty imaginative way of doing so. I would have been using a default value for T, though, to eliminate the need for one when calling the function."}], "answers": [{"tags": [], "owner": {"reputation": 1297, "user_id": 4049863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88901438bae8aadeeb93f33cc7e88c?s=128&d=identicon&r=PG&f=1", "display_name": "G&#233;za T&#246;r&#246;k", "link": "https://stackoverflow.com/users/4049863/g%c3%a9za-t%c3%b6r%c3%b6k"}, "is_accepted": true, "score": 1, "last_activity_date": 1532948397, "last_edit_date": 1532948397, "creation_date": 1532948006, "answer_id": 51592369, "question_id": 51290767, "link": "https://stackoverflow.com/questions/51290767/will-new-class-be-instantiated-for-different-values-of-a-non-type-template-argum/51592369#51592369", "title": "Will new class be instantiated for different values of a non-type template argument", "body": "<p>Yes, there will exactly as many classes exist as many total specialization with different template parameter lists given, regardless of what kind of template parameters the class template has. But as these classes' members are <code>constexpr</code> functions and their bodies can be compiled into a single <code>mov</code> instruction, they will get inevitably inlined when compiled with -On (n>0). That is, no matter how many total specializations of <code>file</code> template you have, there will be no extra complexity added to the binary.</p>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 2212476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7ac7b7d7e359782f1244641dcaad52?s=128&d=identicon&r=PG", "display_name": "Boki", "link": "https://stackoverflow.com/users/2212476/boki"}, "is_accepted": false, "score": 0, "last_activity_date": 1532952551, "creation_date": 1532952551, "answer_id": 51593656, "question_id": 51290767, "link": "https://stackoverflow.com/questions/51290767/will-new-class-be-instantiated-for-different-values-of-a-non-type-template-argum/51593656#51593656", "title": "Will new class be instantiated for different values of a non-type template argument", "body": "<p>For every other value for <code>open_type</code> new type is introduced, e.g. class, \nso, one class of class family is defined and it has all static functions for that type,\nif that is what you mean. Also, it could be, that its not true that </p>\n\n<blockquote>\n  <p>new class file is instantiated</p>\n</blockquote>\n\n<p>as you say,\nbut </p>\n\n<blockquote>\n  <p>new <code>class file&lt;open_type&gt;</code> is instantiated</p>\n</blockquote>\n\n<p>also, just to mention, please correct me if I'm wrong,\nfor that code to compile, </p>\n\n<p>we need to return some size_t value from read or write \nfunctions, regarding which one instantiated using SFINAE.\nI hope this helps.</p>\n"}], "owner": {"reputation": 629, "user_id": 8124507, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0f4c546e2ba73af5048a059d424cbd4c?s=128&d=identicon&r=PG&f=1", "display_name": "bluedragon", "link": "https://stackoverflow.com/users/8124507/bluedragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 51592369, "answer_count": 2, "score": 0, "last_activity_date": 1533842767, "creation_date": 1531328272, "last_edit_date": 1533842767, "question_id": 51290767, "link": "https://stackoverflow.com/questions/51290767/will-new-class-be-instantiated-for-different-values-of-a-non-type-template-argum", "title": "Will new class be instantiated for different values of a non-type template argument", "body": "<p>let's say i have the following code:<br></p>\n\n<pre><code>#define CHECK_BIT(var,pos) ((var) &amp; (1&lt;&lt;(pos)))\nenum open_mode {\n    read = (1u &lt;&lt; 0),\n    write = (1u &lt;&lt; 1),\n    binary = (1u &lt;&lt; 2),\n    update = (1u &lt;&lt; 3)\n};\n\ntemplate&lt;int open_type&gt;\nclass file {\npublic:\n    constexpr static int is_read_mode() {\n        return CHECK_BIT(open_type,0);\n    }\n    constexpr static int is_write_mode() {\n        return CHECK_BIT(open_type,1);\n    }\n    constexpr static int is_binary_mode() {\n        return CHECK_BIT(open_type,2);\n    }\n    constexpr static int is_update_mode() {\n        return CHECK_BIT(open_type,3);\n    }\n\n    template&lt;typename T&gt;\n    std::enable_if_t&lt;(sizeof(T),is_read_mode()),size_t&gt; read() {}\n\n    template&lt;typename T&gt;\n    std::enable_if_t&lt;(sizeof(T),is_write_mode()),size_t&gt; write() {}\n\n};\n</code></pre>\n\n<p>My question is - is for every different value for open_type a new class file instantiated? because the following code compiles fine</p>\n\n<pre><code>int main() {\n    file&lt;open_mode::write&gt; f; \n    f.write&lt;int&gt;();\n\n    file&lt;open_mode::read&gt; f2; \n    f2.read&lt;int&gt;();\n    //f2.write&lt;int&gt;();\n}\n</code></pre>\n\n<p>since the is_*_mode() methods are static, this simply means a new class is instantiated, doesn't it?</p>\n"}, {"tags": ["c++", "bit-manipulation"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1531327792, "post_id": 51290639, "comment_id": 89558992, "body": "Use <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow noreferrer\"><code>std::to_string(a)</code></a> instead."}, {"owner": {"reputation": 41, "user_id": 6821016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f1fa36cf8974f13e05b8c635e49c58?s=128&d=identicon&r=PG&f=1", "display_name": "umeshbhat", "link": "https://stackoverflow.com/users/6821016/umeshbhat"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1531327897, "post_id": 51290639, "comment_id": 89559039, "body": "thanks for that . but my doubt is if that first conversion is right then why does not second one is also correct?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1531327979, "post_id": 51290639, "comment_id": 89559072, "body": "The second isn&#39;t a <i>conversion</i>. As it&#39;s told you in the answer, intrinsic types don&#39;t have any functions."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1531328928, "post_id": 51290639, "comment_id": 89559541, "body": "the first one is not a cast either"}, {"owner": {"reputation": 41, "user_id": 6821016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f1fa36cf8974f13e05b8c635e49c58?s=128&d=identicon&r=PG&f=1", "display_name": "umeshbhat", "link": "https://stackoverflow.com/users/6821016/umeshbhat"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1531329438, "post_id": 51290639, "comment_id": 89559807, "body": "thanks @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 ."}, {"owner": {"reputation": 41, "user_id": 6821016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f1fa36cf8974f13e05b8c635e49c58?s=128&d=identicon&r=PG&f=1", "display_name": "umeshbhat", "link": "https://stackoverflow.com/users/6821016/umeshbhat"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1531329467, "post_id": 51290639, "comment_id": 89559825, "body": "@phuclv,then what exactly should i call it ?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1531329515, "post_id": 51290639, "comment_id": 89559853, "body": "@Umesh <i>&quot;what exactly should i call it ?&quot;</i> a class function call."}, {"owner": {"reputation": 41, "user_id": 6821016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f1fa36cf8974f13e05b8c635e49c58?s=128&d=identicon&r=PG&f=1", "display_name": "umeshbhat", "link": "https://stackoverflow.com/users/6821016/umeshbhat"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1531329727, "post_id": 51290639, "comment_id": 89559975, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 thanks. by conversion what i meant was creating a new string from that of bitset. My wordings were not proper."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6821016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f1fa36cf8974f13e05b8c635e49c58?s=128&d=identicon&r=PG&f=1", "display_name": "umeshbhat", "link": "https://stackoverflow.com/users/6821016/umeshbhat"}, "edited": false, "score": 0, "creation_date": 1531328040, "post_id": 51290672, "comment_id": 89559091, "body": "This  kind off cleared my doubt. so int being primitive raised this problem,so does it mean that bitset supports  .to_string() operation?"}, {"owner": {"reputation": 661, "user_id": 5001502, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153410573162710/picture?type=large", "display_name": "Ben Jones", "link": "https://stackoverflow.com/users/5001502/ben-jones"}, "reply_to_user": {"reputation": 41, "user_id": 6821016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f1fa36cf8974f13e05b8c635e49c58?s=128&d=identicon&r=PG&f=1", "display_name": "umeshbhat", "link": "https://stackoverflow.com/users/6821016/umeshbhat"}, "edited": false, "score": 1, "creation_date": 1531328107, "post_id": 51290672, "comment_id": 89559128, "body": "@Umesh Bhat Yes: <a href=\"https://en.cppreference.com/w/cpp/utility/bitset/to_string\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/bitset/to_string</a>"}], "tags": [], "owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "is_accepted": false, "score": 6, "last_activity_date": 1531440869, "last_edit_date": 1531440869, "creation_date": 1531327845, "answer_id": 51290672, "question_id": 51290639, "link": "https://stackoverflow.com/questions/51290639/why-cant-we-use-an-integer-to-string-direct-conversion-but-can-do-bitwise-to-st/51290672#51290672", "title": "why can&#39;t we use an integer to string direct conversion but can do bitwise to string?", "body": "<p><code>int</code> is a primitive type in C++, not a class type, and as such, it doesn't define any member functions such as <code>int::to_string();</code>. You should try the non-member <code>std::string std::to_string(int)</code>, to be used as: <code>string s = std::to_string(a);</code></p>\n\n<p>EDIT: <code>std::bitset</code> <em>does</em> define a member function <code>to_string</code> (see the documentation <a href=\"https://en.cppreference.com/w/cpp/utility/bitset/to_string\" rel=\"nofollow noreferrer\">here</a>), which is used to return simply a string of characters representing the bit pattern, and not the number as a stringified integer. If you do want to convert a <code>std::bitset</code> to a <code>std::string</code> representing the number as an <em>integer</em>, you could try the following:</p>\n\n<pre><code>auto bits = std::bitset&lt;16&gt;(15);\nstd::string s = std::to_string(bits.to_ulong());\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 6821016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f1fa36cf8974f13e05b8c635e49c58?s=128&d=identicon&r=PG&f=1", "display_name": "umeshbhat", "link": "https://stackoverflow.com/users/6821016/umeshbhat"}, "edited": false, "score": 0, "creation_date": 1531328101, "post_id": 51290710, "comment_id": 89559122, "body": "Thanks a lot buddy."}], "tags": [], "owner": {"reputation": 661, "user_id": 5001502, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153410573162710/picture?type=large", "display_name": "Ben Jones", "link": "https://stackoverflow.com/users/5001502/ben-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1531328016, "creation_date": 1531328016, "answer_id": 51290710, "question_id": 51290639, "link": "https://stackoverflow.com/questions/51290639/why-cant-we-use-an-integer-to-string-direct-conversion-but-can-do-bitwise-to-st/51290710#51290710", "title": "why can&#39;t we use an integer to string direct conversion but can do bitwise to string?", "body": "<p><code>to_string</code> is a member function of <code>std::bitset</code>.  There is no <code>to_string</code> member of <code>int</code>.</p>\n\n<p>A <code>to_string</code> function for numeric types is provided in <code>&lt;string&gt;</code>.  You would use it like this:</p>\n\n<pre><code>int a=5;\nstring s=to_string(a);\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6821016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f1fa36cf8974f13e05b8c635e49c58?s=128&d=identicon&r=PG&f=1", "display_name": "umeshbhat", "link": "https://stackoverflow.com/users/6821016/umeshbhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1531440869, "creation_date": 1531327715, "question_id": 51290639, "link": "https://stackoverflow.com/questions/51290639/why-cant-we-use-an-integer-to-string-direct-conversion-but-can-do-bitwise-to-st", "title": "why can&#39;t we use an integer to string direct conversion but can do bitwise to string?", "body": "<pre><code>string binary = std::bitset&lt;16&gt;(15).to_string();//This cast is valid\nint a=5;\nstring s=a.to_string()//this givees error\n</code></pre>\n\n<p>why does this is not valid?\nis there any limitation on  to_string?</p>\n"}, {"tags": ["c++", "boost", "linker"], "answers": [{"tags": [], "owner": {"reputation": 864, "user_id": 5217293, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/53b23b52006e94906cc5daae79c7023e?s=128&d=identicon&r=PG&f=1", "display_name": "K. Shores", "link": "https://stackoverflow.com/users/5217293/k-shores"}, "is_accepted": false, "score": 0, "last_activity_date": 1531347503, "creation_date": 1531347503, "answer_id": 51294927, "question_id": 51290613, "link": "https://stackoverflow.com/questions/51290613/linking-boost-library-in-node-native-module-object-file-requiring-alternative-l/51294927#51294927", "title": "Linking boost library in node native module, object file requiring alternative library version", "body": "<p>When I tried to build the \"right\" version of the serialization library, I had been using <code>toolset=msvc-140</code>. It should have been <code>toolset=msvc-14.0</code>. Sometimes I am dumb.</p>\n"}], "owner": {"reputation": 864, "user_id": 5217293, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/53b23b52006e94906cc5daae79c7023e?s=128&d=identicon&r=PG&f=1", "display_name": "K. Shores", "link": "https://stackoverflow.com/users/5217293/k-shores"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531347503, "creation_date": 1531327595, "question_id": 51290613, "link": "https://stackoverflow.com/questions/51290613/linking-boost-library-in-node-native-module-object-file-requiring-alternative-l", "title": "Linking boost library in node native module, object file requiring alternative library version", "body": "<p>I recently had the need to pull in the Boost Graph Library for one of the native node modules that I work on, along with boost serialization. There is a separate VS project that I do all of my development and testing for this module. The project compiles, links, and works as expected when run from the VS project. </p>\n\n<p>I am having issues when I try to link the static serialization library with my module when building with node-gyp. I have included the full path to the serialization library in the libraries section of the binding.gyp file. In the object file produced from the node-gyp compiled file, the following line is causing a linker failure:</p>\n\n<blockquote>\n  <p>/FAILIFMISMATCH:\"_CRT_STDIO_ISO_WIDE_SPECIFIERS=0\"^@^Dlibboost_serialization-vc140-mt-s-x64-1_67.lib^@^Dlibboost_serialization-vc140-mt-s-x64-1_67.lib^@^Duuid.lib^@^Duuid.lib^@</p>\n</blockquote>\n\n<p>The object file is expecting libboost_serialization-vc140-mt-s-x64-1_67.lib. When the build process tries to link the file, the linker spits out an error:</p>\n\n<blockquote>\n  <p>LINK : fatal error LNK1104: cannot open file 'libboost_serialization-vc140-mt-s-x64-1_67.lib'</p>\n</blockquote>\n\n<p>However, boost built libboost_serialization-vc141-mt-s-x64-1_67.lib which is a different version than what the object file is expecting. I have tried to build the version that the object file is looking for, but I cannot seem to get boost to do so (each time I try, it skips all of the targets, even though I am specifying an alternative toolset).</p>\n\n<p>How can I change the library version that the object file is expecting?</p>\n"}, {"tags": ["android", "python", "c++", "ios", "c"], "answers": [{"tags": [], "owner": {"reputation": 4794, "user_id": 220765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H8vnV.png?s=128&g=1", "display_name": "mhsmith", "link": "https://stackoverflow.com/users/220765/mhsmith"}, "is_accepted": false, "score": 1, "last_activity_date": 1531994589, "creation_date": 1531994589, "answer_id": 51419755, "question_id": 51290516, "link": "https://stackoverflow.com/questions/51290516/can-i-create-based-on-python-code-executable-code-for-android-and-or-ios/51419755#51419755", "title": "Can I create based on Python code executable code for Android and/or iOS?", "body": "<p>You've asked a lot of questions, so forgive me for only answering one of them.</p>\n\n<p>Cython won't save you any work in this situation. Although it can translate Python code into C, the generated code consists mostly of calls to the Python C API. So you'd still need to manage all the details of including the <code>libpython</code> library in your app, loading it and initializing it. </p>\n"}], "owner": {"reputation": 91, "user_id": 4831289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d09b046dc73c266fb106c707f3a45603?s=128&d=identicon&r=PG&f=1", "display_name": "Joker3139", "link": "https://stackoverflow.com/users/4831289/joker3139"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531994589, "creation_date": 1531327246, "last_edit_date": 1531402574, "question_id": 51290516, "link": "https://stackoverflow.com/questions/51290516/can-i-create-based-on-python-code-executable-code-for-android-and-or-ios", "title": "Can I create based on Python code executable code for Android and/or iOS?", "body": "<p>I developed in Python an algorithm library (+ usage of e.g. pandas and numpy) and I search a way to deploy those algorithms on Android and iOS without rewritting the code native or in any other language.</p>\n\n<p>After exploring several options, I see four major possibilities how to solve the Python migration:</p>\n\n<ul>\n<li>Translate the <strong>Python code into native code</strong> (Java or Swift/Objective-C) for each platform (which I do not prefer as keeping the same code in line seems a lot of redundant work)</li>\n<li>Translate the <strong>Python code into C or C++</strong> which is executable by both OS (unfortunately, I am not fluent in C/C++ and I think I won't be ;)) But there are tools or interpreters as <a href=\"http://cython.org/\" rel=\"nofollow noreferrer\">Cypthon</a> or <a href=\"http://nuitka.net/\" rel=\"nofollow noreferrer\">Nuikta</a> which can maybe translate the Python code into executable C or C++ versions?</li>\n<li>Use <strong><a href=\"https://kivy.org/#home\" rel=\"nofollow noreferrer\">Kivy</a> to create a Python based app for both OS</strong>, however I do not want a complete .apk instead just a AAR or library that can I use as a module by other apps (I am not sure if this works)</li>\n<li>With the help of <a href=\"https://chaquo.com/chaquopy/\" rel=\"nofollow noreferrer\">Chaquopy</a> <strong>run Python code in Android via an Python interpreter</strong>. However, I do not see any comparable solution for iOS...</li>\n</ul>\n\n<p>Spanning around these four options, I have several questions:</p>\n\n<ul>\n<li>Is it possible with <a href=\"http://cython.org/\" rel=\"nofollow noreferrer\">Cython</a>, <a href=\"http://nuitka.net/\" rel=\"nofollow noreferrer\">Nuitka</a>, or any other tool to translate Python code with all dependencies into executable C/C++ code that can be used by Android and iOS?</li>\n<li>Can I use <a href=\"https://kivy.org/#home\" rel=\"nofollow noreferrer\">Kivy</a> to create a library (e.g. like this on <a href=\"https://developer.android.com/studio/projects/android-library\" rel=\"nofollow noreferrer\">Android</a> or a <a href=\"https://swift.org/package-manager/\" rel=\"nofollow noreferrer\">library package on iOS</a>)</li>\n<li>Is there any obvious option I miss?</li>\n</ul>\n\n<p>I know that using native code will be probably the fastest solution whereas automatic generated code may have flaws and is kind of inefficient (and one has always to rely on the maintainer). Nevertheless, I would now prefer the way to keep the Python code as my core as long as I am still in a prototype phase, would be great to hear the community's view!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1531390275, "post_id": 51290501, "comment_id": 89582392, "body": "Please <a href=\"https://stackoverflow.com/posts/51290501/edit\">edit</a> your question to show <a href=\"http://whathaveyoutried.com\" rel=\"nofollow noreferrer\">the code you have so far</a>.  Most of us here are happy to help you improve your craft, but are less happy acting as short-order unpaid programming staff. Show us your work so far as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, the result you were expecting and the results you got, and we&#39;ll help you figure it out. It may help to re-read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"tags": [], "owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "is_accepted": false, "score": 1, "last_activity_date": 1531328079, "creation_date": 1531328079, "answer_id": 51290722, "question_id": 51290501, "link": "https://stackoverflow.com/questions/51290501/find-most-occurring-sums-of-3-vectors-with-n-elements-of-type-int/51290722#51290722", "title": "Find most occurring sums of 3 vectors with n elements of type int", "body": "<p>Step 1: Make a list of all of the sums.</p>\n\n<p>Step 2: Count how often each sum shows up.</p>\n\n<p>Step 3: Return the one that shows up the most.</p>\n\n<p>Each of these steps could be a function. I'll leave the implementation of them to you.</p>\n"}, {"comments": [{"owner": {"reputation": 90, "user_id": 6746837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4BZNa.png?s=128&g=1", "display_name": "S. H.", "link": "https://stackoverflow.com/users/6746837/s-h"}, "edited": false, "score": 0, "creation_date": 1531379785, "post_id": 51290874, "comment_id": 89575678, "body": "This seems to be the right approach but seems to return just the first most occurrence which here is 6 but missing out 7, 8 and 9 which occurs 4 times too."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "reply_to_user": {"reputation": 90, "user_id": 6746837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4BZNa.png?s=128&g=1", "display_name": "S. H.", "link": "https://stackoverflow.com/users/6746837/s-h"}, "edited": false, "score": 1, "creation_date": 1531404652, "post_id": 51290874, "comment_id": 89592350, "body": "@S.H. I&#39;ve edited the post to account for that :)."}], "tags": [], "owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "is_accepted": true, "score": 2, "last_activity_date": 1531404623, "last_edit_date": 1531404623, "creation_date": 1531328672, "answer_id": 51290874, "question_id": 51290501, "link": "https://stackoverflow.com/questions/51290501/find-most-occurring-sums-of-3-vectors-with-n-elements-of-type-int/51290874#51290874", "title": "Find most occurring sums of 3 vectors with n elements of type int", "body": "<p>The easiest way is to just loop the largest vector, looping each smaller vector for each element of each vector, pushing them all the results to a new vector, and finding the most common i.e.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;set&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nint main()\n{\n    std::vector&lt;int&gt; v = { 1, 2, 4, 5 };\n    std::vector&lt;int&gt; x = { 1, 2, 3 };\n    std::vector&lt;int&gt; y = { 2, 3 };\n\n    std::vector&lt;int&gt; possibleSums;\n\n    for( int vE : v )\n        for( int xE : x )\n            for( int yE : y )\n                possibleSums.push_back( vE + xE + yE );\n\n    std::sort( possibleSums.begin(), possibleSums.end() );\n    std::set&lt;int&gt; possibleSumSet( possibleSums.begin(), possibleSums.end() );\n\n    int mostCommon = 0, mostCommonCount = 0;\n    for( int sum : possibleSumSet )\n    {\n        int count = std::count( possibleSums.begin(), possibleSums.end(), sum );\n        if( count &gt; mostCommonCount )\n        {\n            mostCommonCount = count;\n            mostCommon = sum;\n        }\n    }\n\n    std::cout &lt;&lt; \"Most Common Sum: \" &lt;&lt; mostCommon \n              &lt;&lt; \"; Most Common Count: \" &lt;&lt; mostCommonCount;\n}\n</code></pre>\n\n<p>Edit: You can also store off every highest occurring number into a <code>std::vector</code> so subsequent highest occurrences aren't ignored :</p>\n\n<pre><code>int mostCommonCount = 0;\nstd::vector&lt;int&gt; mostCommonSums;\nfor( int sum : possibleSumSet )\n{\n    int count = std::count( possibleSums.begin(), possibleSums.end(), sum );\n    if( count &gt; mostCommonCount )\n    {\n        mostCommonCount = count;\n        mostCommonSums.clear();\n        mostCommonSums.push_back( sum );\n    }\n    else if( count == mostCommonCount )\n    {\n        mostCommonSums.push_back( sum );\n    }\n}\n\nfor( int sum : mostCommonSums )\n    std::cout &lt;&lt; \"Most Common Sum: \" &lt;&lt; sum &lt;&lt; std::endl;\n\nstd::cout &lt;&lt; \"Most Common Count: \" &lt;&lt; mostCommonCount;\n</code></pre>\n"}], "owner": {"reputation": 90, "user_id": 6746837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4BZNa.png?s=128&g=1", "display_name": "S. H.", "link": "https://stackoverflow.com/users/6746837/s-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 1, "closed_date": 1531343654, "accepted_answer_id": 51290874, "answer_count": 2, "score": -3, "last_activity_date": 1532351780, "creation_date": 1531327194, "last_edit_date": 1532351780, "question_id": 51290501, "link": "https://stackoverflow.com/questions/51290501/find-most-occurring-sums-of-3-vectors-with-n-elements-of-type-int", "closed_reason": "Needs more focus", "title": "Find most occurring sums of 3 vectors with n elements of type int", "body": "<p>I have n vectors with k elements of type int. How can I find the most occurring sum when summing up all combinations of elements contained in these n vectors?</p>\n\n<p>Currently working on a sample with 3 vectors:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;set&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;limits&gt;\n\nint main()\n{\n    std::vector&lt;int&gt; v;\n    std::vector&lt;int&gt; x;\n    std::vector&lt;int&gt; y;\n    std::vector&lt;int&gt; mostCommon;\n    int inputV;\n    int inputX;\n    int inputY;\n\n    std::cout &lt;&lt; \"Enter values for vector v: \";\n    while (std::cin &gt;&gt; inputV)\n    {\n       v.push_back(inputV);\n    }\n    std::cin.clear();\n    std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n\n    std::cout &lt;&lt; \"Enter values for vector x: \";\n    while (std::cin &gt;&gt; inputX)\n    {\n       x.push_back(inputX);\n    }\n    std::cin.clear();\n    std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n\n    std::cout &lt;&lt; \"Enter values for vector y: \";\n    while (std::cin &gt;&gt; inputY)\n    {\n       y.push_back(inputY);\n    }\n\n    std::vector&lt;int&gt; possibleSums;\n\n    for( int vE : v )\n        for( int xE : x )\n            for( int yE : y )\n                possibleSums.push_back( vE + xE + yE );\n\n    std::sort( possibleSums.begin(), possibleSums.end() );\n    std::set&lt;int&gt; possibleSumSet( possibleSums.begin(), possibleSums.end() );\n\n    int mostCommonCount = 0;\n    for( int sum : possibleSumSet )\n    {\n        int count = std::count( possibleSums.begin(), possibleSums.end(), sum );\n        if( count &gt;= mostCommonCount )\n        {\n            mostCommonCount = count;\n            mostCommon.push_back (sum);\n        }\n    }\n\n    std::cout &lt;&lt; \"Most Common Sum Range: \" &lt;&lt; int(mostCommon.size()) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Most Common Sums: \";\n    for (auto i = mostCommon.begin(); i != mostCommon.end(); ++i)\n    {\n        std::cout &lt;&lt; *i &lt;&lt; ' ';\n    }\n    std::cout &lt;&lt; std::endl &lt;&lt; \"Most Common Count: \" &lt;&lt; mostCommonCount;\n}\n</code></pre>\n\n<hr>\n\n<p>Sample Input for vectors:  </p>\n\n<p><code>Enter values for vector v: 1 2 4 5</code><br>\n<code>Enter values for vector x: 1 2 3</code><br>\n<code>Enter values for vector y: 2 3</code></p>\n\n<p>Possible sums for aboves sample input:</p>\n\n<pre><code>1+1+2=4  \n1+1+3=5  \n1+2+2=5  \n2+1+2=5  \n1+2+3=6  &lt;-  \n1+3+2=6  &lt;-  \n2+1+3=6  &lt;-  \n2+2+2=6  &lt;-  \n1+3+3=7  &lt;-   \n2+2+3=7  &lt;-  \n2+3+2=7  &lt;-  \n4+1+2=7  &lt;-  \n2+3+3=8  &lt;-  \n4+1+3=8  &lt;-  \n4+2+2=8  &lt;-  \n5+1+2=8  &lt;-  \n4+2+3=9  &lt;-  \n4+3+2=9  &lt;-  \n5+1+3=9  &lt;-  \n5+2+2=9  &lt;-   \n4+3+3=10  \n5+2+3=10  \n5+3+2=10  \n5+3+3=11 \n</code></pre>\n\n<p>So the results here would be:</p>\n\n<ul>\n<li>Most Common Sum Range: 4</li>\n<li>Most Common Sums: 6, 7, 8, 9</li>\n<li>Most Common Count: 4</li>\n</ul>\n\n<p>What I currently get is:</p>\n\n<pre><code>Most Common Sum Range: 6                                                                                                    \nMost Common Sums: 4 5 6 7 8 9                                                                                               \nMost Common Count: 4 \n</code></pre>\n"}, {"tags": ["c++", "qt", "qstring", "qbytearray"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 8352508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3586e009e0d12e03f48772be2c69aff8?s=128&d=identicon&r=PG&f=1", "display_name": "WKstraw", "link": "https://stackoverflow.com/users/8352508/wkstraw"}, "edited": false, "score": 0, "creation_date": 1531328416, "post_id": 51290640, "comment_id": 89559274, "body": "Must have missed that... I tried both ways, but now I get another error : <code>conversion from &#39;QByteArray&#39; to &#39;QByteArray*&#39; is ambiguous      byt = usernameOfNewUser.toLocal8Bit();          ^</code>. They both give me the same error. Do you happen to know where that comes from?"}, {"owner": {"reputation": 57, "user_id": 8352508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3586e009e0d12e03f48772be2c69aff8?s=128&d=identicon&r=PG&f=1", "display_name": "WKstraw", "link": "https://stackoverflow.com/users/8352508/wkstraw"}, "edited": false, "score": 0, "creation_date": 1531328925, "post_id": 51290640, "comment_id": 89559539, "body": "I managed to solve the second error (I just forgot adding the pointer&#39;s asterix <code>*</code>) Thank you for your answer."}, {"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "reply_to_user": {"reputation": 57, "user_id": 8352508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3586e009e0d12e03f48772be2c69aff8?s=128&d=identicon&r=PG&f=1", "display_name": "WKstraw", "link": "https://stackoverflow.com/users/8352508/wkstraw"}, "edited": false, "score": 0, "creation_date": 1531328928, "post_id": 51290640, "comment_id": 89559543, "body": "<code>QByteArray toLocal8Bit() const</code>, so either make byt a QByteArray instead of pointer or write <code>*byt = usernameOfNewUser.toLocal8Bit()</code>"}], "tags": [], "owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "is_accepted": true, "score": 2, "last_activity_date": 1531335489, "last_edit_date": 1531335489, "creation_date": 1531327717, "answer_id": 51290640, "question_id": 51290426, "link": "https://stackoverflow.com/questions/51290426/no-matching-function-for-call-to-qstringfromlatin1qbytearray/51290640#51290640", "title": "No matching function for call to &#39;QString::fromLatin1(QByteArray*&amp;)&#39;", "body": "<p>The <code>fromLatin1()</code> method has the following signature:</p>\n\n<pre><code>QString fromLatin1(const char * str, int size = -1)\n</code></pre>\n\n<p>So you will need to pass the <code>QByteArray</code>'s data to the method like this:</p>\n\n<pre><code>QString newUser = QString::fromLatin1(newUserArray-&gt;constData(), newUserArray-&gt;count());\n</code></pre>\n\n<p>In Qt5, there is also this overload:</p>\n\n<pre><code>QString fromLatin1(const QByteArray &amp;str)\n</code></pre>\n\n<p>So you can use this instead:</p>\n\n<pre><code>QString newUser = QString::fromLatin1(*newUserArray);\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 8352508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3586e009e0d12e03f48772be2c69aff8?s=128&d=identicon&r=PG&f=1", "display_name": "WKstraw", "link": "https://stackoverflow.com/users/8352508/wkstraw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "accepted_answer_id": 51290640, "answer_count": 1, "score": -1, "last_activity_date": 1531335489, "creation_date": 1531326901, "last_edit_date": 1531335428, "question_id": 51290426, "link": "https://stackoverflow.com/questions/51290426/no-matching-function-for-call-to-qstringfromlatin1qbytearray", "title": "No matching function for call to &#39;QString::fromLatin1(QByteArray*&amp;)&#39;", "body": "<p>I have a class <code>A</code> that calls class <code>B</code> after a signal is emitted. When the user closes <code>B</code>, I am trying to transfer a <code>QString</code> value from <code>B</code> to <code>A</code>.  To do so, I first convert the <code>QString</code> to a <code>QByteArray</code>, then I am exchanging the <code>QByteArray</code> between classes. Finally, I am converting the <code>QByteArray</code> back into a <code>QString</code>.</p>\n\n<p>However, during that second conversion, I get this error:</p>\n\n<blockquote>\n  <p>no matching function for call to 'QString::fromLatin1(QByteArray*&amp;)`</p>\n</blockquote>\n\n<p>Below is my code.</p>\n\n<p><code>classB.h</code> (is where the first <code>QByteArray</code> is implemented):</p>\n\n<pre><code>public :\n    QByteArray *byt = new QByteArray;\n</code></pre>\n\n<p><code>classB.cpp</code>:</p>\n\n<pre><code>void classB::foo(QString userame, QString password)\n{\n    //Some other code\n    QString usernameOfNewUser;\n    usernameOfNewUser = userame;\n    byt = usernameOfNewUser.toLocal8Bit();\n    qWarning(byt-&gt;data());\n}\n</code></pre>\n\n<p><code>classA.h</code> (where that second <code>QByteArray</code> is implemented):</p>\n\n<pre><code>private:\n    QByteArray *newUserArray = new QByteArray;\n</code></pre>\n\n<p><code>classA.cpp</code> (where the problem is located):</p>\n\n<pre><code>classB *cUdsfqkjb =new classB();\ncUdsfqkjb-&gt;show();\nif(!cUdsfqkjb-&gt;isVisible())\n{\n    newUserArray = cUdsfqkjb-&gt;byt;\n    QString newUser = QString::fromLatin1(newUserArray);\n</code></pre>\n\n<p>The error is located on the last line.</p>\n"}, {"tags": ["c++", "loops", "pointers", "while-loop", "integer"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531326800, "post_id": 51290355, "comment_id": 89558475, "body": "That should be fine. What error are you getting? How is it not working? Note that the first part of your condition is moot. If it&#39;s true, then you know for sure the second is also true already."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1531326828, "post_id": 51290355, "comment_id": 89558493, "body": "What problem are you having? The code is syntactically okay. You don\u2019t need all those parentheses, and the first test isn\u2019t needed, because if it\u2019s true the second one will be, too."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1531326982, "post_id": 51290355, "comment_id": 89558585, "body": "Have you tried running this code? Does it not behave as you expect? I don&#39;t see any problems."}, {"owner": {"reputation": 11, "user_id": 9345140, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-99YEiCgorNY/AAAAAAAAAAI/AAAAAAAAADg/fsKghb9ehC0/photo.jpg?sz=128", "display_name": "youssef salah", "link": "https://stackoverflow.com/users/9345140/youssef-salah"}, "edited": false, "score": 0, "creation_date": 1531327133, "post_id": 51290355, "comment_id": 89558662, "body": "yes I know that this code is right but when i run this code and input the two integers  ,the output (sum) do not go out in the console ,but when i remove the sign of or (||)the output appeared"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1531327373, "post_id": 51290355, "comment_id": 89558809, "body": "What do you mean by <i>when i remove the sign of or</i>?"}], "answers": [{"tags": [], "owner": {"reputation": 1743, "user_id": 5502206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e05d0d997fd75b4881e5c39055222a?s=128&d=identicon&r=PG&f=1", "display_name": "V. Kravchenko", "link": "https://stackoverflow.com/users/5502206/v-kravchenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1531327364, "creation_date": 1531327364, "answer_id": 51290553, "question_id": 51290355, "link": "https://stackoverflow.com/questions/51290355/how-can-i-put-the-sign-of-or-into-a-while-loop/51290553#51290553", "title": "How can I put the sign of OR (`||`) into a while loop?", "body": "<p>Syntactically everything is okay.</p>\n\n<p>The problem is in condition itself. You want to do the loop until the weight is less probably you should reconsider the conditions itself. The first part of condition has now no effect, as <code>a != b</code> is always true when <code>a &lt; b</code>. Your loop works until <code>weight_of_Limak == weight_of_Bob</code> when you put this condition.</p>\n\n<p>Probably you initially wanted to use different comparison sign, probably <code>&lt;=</code> instead of <code>&lt;</code>?</p>\n"}], "owner": {"reputation": 11, "user_id": 9345140, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-99YEiCgorNY/AAAAAAAAAAI/AAAAAAAAADg/fsKghb9ehC0/photo.jpg?sz=128", "display_name": "youssef salah", "link": "https://stackoverflow.com/users/9345140/youssef-salah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1531383109, "accepted_answer_id": 51290553, "answer_count": 1, "score": -3, "last_activity_date": 1531335579, "creation_date": 1531326666, "last_edit_date": 1531335579, "question_id": 51290355, "link": "https://stackoverflow.com/questions/51290355/how-can-i-put-the-sign-of-or-into-a-while-loop", "closed_reason": "Needs details or clarity", "title": "How can I put the sign of OR (`||`) into a while loop?", "body": "<p>In C++, why can I not put the sign of OR (<code>||</code>) in a while loop like this?</p>\n\n<pre><code>int weight_of_Limak,weight_of_Bob,sum=0;\ncin&gt;&gt;weight_of_Limak&gt;&gt;weight_of_Bob;\n\nwhile((weight_of_Limak&lt;weight_of_Bob) || (weight_of_Limak!=weight_of_Bob))\n{\n    sum++;\n    weight_of_Limak*=3;\n    weight_of_Bob*=2;\n\n}\ncout&lt;&lt;sum;\n</code></pre>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1531326277, "post_id": 51290170, "comment_id": 89558193, "body": "Do you want <code>Fruit::number</code> to be a single vector that is shared and can be modified by every <code>Fruit</code> during the lifetime of your program? If so, you can make it <code>static</code>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1531326527, "post_id": 51290170, "comment_id": 89558321, "body": "I think you just want to make the vector static in fruit and remove <code>Fruit(std::vector&lt;int&gt;&amp; number)</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1531326659, "post_id": 51290170, "comment_id": 89558398, "body": "ATM it would suffice to keep a reference as member variable: <code>std::vector&lt;int&gt;&amp; number;</code>"}, {"owner": {"reputation": 1751, "user_id": 2959769, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9WfJf.jpg?s=128&g=1", "display_name": "Vinay Shukla", "link": "https://stackoverflow.com/users/2959769/vinay-shukla"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1531343186, "post_id": 51290170, "comment_id": 89565824, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 can you plz comment on this how I can get the <code>handler</code> <a href=\"https://ibb.co/niqDnT\" rel=\"nofollow noreferrer\">ibb.co/niqDnT</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1531327799, "post_id": 51290268, "comment_id": 89558999, "body": "I don&#39;t believe this will fix the <code>fruit2</code> having an empty vector problem. I am talking about: <code>Fruit fruit2;</code> then <code>fruit2.numOfApple();</code> in <code>main()</code> the OP expects <code>fruit2</code> to share the same vector from <code>fruit1</code> without passing the vector."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 3, "last_activity_date": 1531326717, "last_edit_date": 1531326717, "creation_date": 1531326366, "answer_id": 51290268, "question_id": 51290170, "link": "https://stackoverflow.com/questions/51290170/sharing-vectors-between-two-class-instances/51290268#51290268", "title": "Sharing vectors between two class instances", "body": "<p>You can use a <code>std::shared_ptr</code> for this purpose. It lives as long as any of the objects referencing it are alive and allows multiple objects to share ownership of its contents.</p>\n\n<pre><code>class Fruit\n{\n  Fruit::Fruit()\n    : number(std::make_shared&lt;std::vector&lt;int&gt;&gt;())\n  {}\n\n  Fruit(std::vector&lt;int&gt;&amp; numberNew)\n    : number(std::make_shared&lt;std::vector&lt;int&gt;&gt;(numberNew))\n  {}\n\n  std::shared_ptr&lt;std::vector&lt;int&gt;&gt; number;\n}\n</code></pre>\n\n<p>Now when your class is copied, the copy of the <code>shared_ptr</code> will not copy the vector but just refer to the same one and deal with all lifetime management for you.</p>\n\n<pre><code>int Fruit::numOfApple()\n{\n  std::cout &lt;&lt; \"vector size is\" &lt;&lt; number-&gt;size() &lt;&lt; std::endl;\n  for (auto&amp; fruz : *number) {\n   std::cout &lt;&lt; \"do nothing\" &lt;&lt; std::endl;\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>I strongly advise against making anything <code>static</code> unless that is absolutely necessary. It is not necessary here, and you can prevent future growth pains by going for a proper solution right now.</p>\n"}], "owner": {"reputation": 1751, "user_id": 2959769, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9WfJf.jpg?s=128&g=1", "display_name": "Vinay Shukla", "link": "https://stackoverflow.com/users/2959769/vinay-shukla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "accepted_answer_id": 51290268, "answer_count": 1, "score": 3, "last_activity_date": 1531326717, "creation_date": 1531325995, "last_edit_date": 1531326492, "question_id": 51290170, "link": "https://stackoverflow.com/questions/51290170/sharing-vectors-between-two-class-instances", "title": "Sharing vectors between two class instances", "body": "<p>I am getting the values of the vector size as <code>1</code> and <code>0</code> I know there are 2 different instances but I want it to be common between both the instances </p>\n\n<p>I am not sure what would be the right approach need some insights on what will suffice in my case. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;vector&gt;\n\nclass Fruit\n{\n  public:\n   Fruit(std::vector&lt;int&gt;&amp; number);\n   Fruit();\n  int numOfApple();\n  private:\n  std::vector&lt;int&gt; number;\n};\n\nFruit::Fruit() {}\n\nclass Apple\n{\n  public:\n  Apple();\n  Apple(Fruit &amp;fruit);\n  int appleCount();\n\n  private:\n  Fruit fruit;\n\n};\n\nApple::Apple() {}\n\nApple::Apple(Fruit &amp;fruit):fruit(fruit) {}\n\nint Fruit::numOfApple()\n{\n  std::cout&lt;&lt;\"vector size is\"&lt;&lt;number.size()&lt;&lt;std::endl;\n  for (auto&amp; fruz : number) {\n   std::cout&lt;&lt;\"do nothing\"&lt;&lt;std::endl;\n  }\n\n  return 0;\n}\n\n\nint Apple::appleCount()\n{\n  fruit.numOfApple();\n  return 0;\n}\n\nFruit::Fruit(std::vector&lt;int&gt;&amp; number):number(number) {}\n\nint main()\n{\n  std::vector&lt;int&gt; fru;\n  fru.push_back(1);\n\n  Fruit fruit1(fru);\n\n  Apple apple(fruit1);\n  fruit1.numOfApple(); // the size of the vector here is 1\n\n  // Now try to simulate server code\n\n  Fruit fruit2;\n  fruit2.numOfApple(); // the size of vector in this is 0\n\n  return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<blockquote>\n<pre><code>./a.out\nvector size is1\ndo nothing\nvector size is0\n</code></pre>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 589, "user_id": 9996677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13449a17a4c18ed091939cf1b501c185?s=128&d=identicon&r=PG", "display_name": "meat", "link": "https://stackoverflow.com/users/9996677/meat"}, "edited": false, "score": 0, "creation_date": 1531325493, "post_id": 51289927, "comment_id": 89557807, "body": "try <code>template&lt;class T&gt; inline constexpr const T operator| (const T a, const T b){ return const (T)((int)a | (int)b);}</code>"}, {"owner": {"reputation": 589, "user_id": 9996677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13449a17a4c18ed091939cf1b501c185?s=128&d=identicon&r=PG", "display_name": "meat", "link": "https://stackoverflow.com/users/9996677/meat"}, "edited": false, "score": 0, "creation_date": 1531325655, "post_id": 51289927, "comment_id": 89557882, "body": "Also your subject is kind of misleading. Are you trying to use a logical OR or bitwise OR? The <code>||</code> operator is the former, <code>|</code> is the latter."}], "answers": [{"tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": true, "score": 5, "last_activity_date": 1531325486, "creation_date": 1531325486, "answer_id": 51290022, "question_id": 51289927, "link": "https://stackoverflow.com/questions/51289927/c-overloading-bitwise-or-operator-that-returns-constant-value/51290022#51290022", "title": "C++ Overloading | (bitwise OR) operator that returns constant value", "body": "<p><code>case</code> should use constant expression, i.e. compile-time constant. Mark your operator as <code>constexpr</code>:</p>\n\n<pre><code>template&lt;class T&gt; inline constexpr T operator| (T a, T b){ return (T)((int)a | (int)b); }\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8458746, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5519a89d2cea2126708a84458185fa62?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykTraveler", "link": "https://stackoverflow.com/users/8458746/patryktraveler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 51290022, "answer_count": 1, "score": 1, "last_activity_date": 1531325681, "creation_date": 1531325107, "last_edit_date": 1531325681, "question_id": 51289927, "link": "https://stackoverflow.com/questions/51289927/c-overloading-bitwise-or-operator-that-returns-constant-value", "title": "C++ Overloading | (bitwise OR) operator that returns constant value", "body": "<p>I would like to use operator '|' in a following manner:</p>\n\n<pre><code>    switch(color){\n        case Color::Red | Color::Green:\n        ...\n</code></pre>\n\n<p>The problem is that the operator must return constant value, but I cannot make it work. I tried something like this:</p>\n\n<pre><code>    template&lt;class T&gt; inline const T operator| (T a, T b){ return const (T)((int)a | (int)b); }\n</code></pre>\n\n<p>but it doesn't do the job.</p>\n"}, {"tags": ["c++", "newline", "getline"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1531326747, "post_id": 51289846, "comment_id": 89558444, "body": "You really ought to avoid <code>using namespace std</code> - it is a bad habit to get into, and <a href=\"/q/1452721\">can silently change the meaning of your program</a> when you&#39;re not expecting it.  Get used to using the namespace prefix (<code>std</code> is intentionally very short), or importing <i>just the names you need</i> into the <i>smallest reasonable scope</i>."}], "answers": [{"comments": [{"owner": {"reputation": 1155, "user_id": 7120016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6ab5a11884f43f89f55c766c76e8d3?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Jain", "link": "https://stackoverflow.com/users/7120016/rajat-jain"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1531325367, "post_id": 51289890, "comment_id": 89557753, "body": "\\n is a symbol of a new line in the programming language. But it it is mentioned in the file it&#39;s a text content. As \\n stands for the new line so, if we save the file the \\n is converted and saved as an actual new line in the text file."}, {"owner": {"reputation": 45, "user_id": 9345327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2069ec3e416709ea266268b1d18e664c?s=128&d=identicon&r=PG&f=1", "display_name": "AWRDev.", "link": "https://stackoverflow.com/users/9345327/awrdev"}, "edited": false, "score": 0, "creation_date": 1531325713, "post_id": 51289890, "comment_id": 89557911, "body": "@RajatJain So there is any symbol I can put in the text file to make my program move the cursor to the new line? Or the way my think is wrong?"}, {"owner": {"reputation": 1155, "user_id": 7120016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6ab5a11884f43f89f55c766c76e8d3?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Jain", "link": "https://stackoverflow.com/users/7120016/rajat-jain"}, "edited": false, "score": 0, "creation_date": 1531325755, "post_id": 51289890, "comment_id": 89557926, "body": "Just press ENTER and put the content to the new line. It will automatically be read as <code>\\n</code>"}, {"owner": {"reputation": 45, "user_id": 9345327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2069ec3e416709ea266268b1d18e664c?s=128&d=identicon&r=PG&f=1", "display_name": "AWRDev.", "link": "https://stackoverflow.com/users/9345327/awrdev"}, "edited": false, "score": 0, "creation_date": 1531327037, "post_id": 51289890, "comment_id": 89558610, "body": "@RajatJain I want take 1 line string and out it multi line"}, {"owner": {"reputation": 1155, "user_id": 7120016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6ab5a11884f43f89f55c766c76e8d3?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Jain", "link": "https://stackoverflow.com/users/7120016/rajat-jain"}, "edited": false, "score": 0, "creation_date": 1531327080, "post_id": 51289890, "comment_id": 89558632, "body": "So, try removing the escape character ` \\ ` from the read line."}], "tags": [], "owner": {"reputation": 1155, "user_id": 7120016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f6ab5a11884f43f89f55c766c76e8d3?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Jain", "link": "https://stackoverflow.com/users/7120016/rajat-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1531335563, "last_edit_date": 1531335563, "creation_date": 1531324950, "answer_id": 51289890, "question_id": 51289846, "link": "https://stackoverflow.com/questions/51289846/getting-n-from-string/51289890#51289890", "title": "Getting &#39;\\n&#39; from string", "body": "<p><code>\\n</code> does not store as it on the file. Put your content in the new line in the text file. Or first, write the file using C++, then read. You need proper formatting to read it correctly.</p>\n\n<p><code>\\n</code> is a symbol of a new line in the programming language. But it it is mentioned in the file it's a text content osaysay character. As \\n stands for the new line so, if we save the file the <code>\\n</code> is converted and saved as an actual new line in the text file.</p>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 4, "last_activity_date": 1531326712, "creation_date": 1531326712, "answer_id": 51290370, "question_id": 51289846, "link": "https://stackoverflow.com/questions/51289846/getting-n-from-string/51290370#51290370", "title": "Getting &#39;\\n&#39; from string", "body": "<p>Your text file contains separate <code>\\</code> and <code>n</code> characters.  Unlike your C++ code, it's not pre-processed to turn those into newlines.</p>\n\n<p>You'll need to either write real newlines into your file, or to replace every <code>\"\\\\n\"</code> with <code>\"\\n\"</code> in your string <code>s</code> after you've read it.</p>\n"}], "owner": {"reputation": 45, "user_id": 9345327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2069ec3e416709ea266268b1d18e664c?s=128&d=identicon&r=PG&f=1", "display_name": "AWRDev.", "link": "https://stackoverflow.com/users/9345327/awrdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 51290370, "answer_count": 2, "score": -2, "last_activity_date": 1531335563, "creation_date": 1531324817, "last_edit_date": 1531325301, "question_id": 51289846, "link": "https://stackoverflow.com/questions/51289846/getting-n-from-string", "title": "Getting &#39;\\n&#39; from string", "body": "<p>I have the text file called example.txt.</p>\n\n<p>Its contents look something like this:</p>\n\n<pre><code> Lorem ipsum dolor sit amet \\n hey my name \\n is\n</code></pre>\n\n<p>I open this file and grab all the lines with <code>getline()</code></p>\n\n<pre><code>int main() {\n    string s;\n    ifstream test;\n    test.open(\"example.txt\");\n    getline(test,s);\n    cout&lt;&lt;s;\n}\n</code></pre>\n\n<p>Now I want to see this </p>\n\n<pre><code> Lorem ipsum dolor sit amet\n hey my name\n is \n</code></pre>\n\n<p>But I see exactly what is in the text file.</p>\n\n<p>Why does the <code>\\n</code> symbol not move the cursor to the new line in this case?</p>\n"}, {"tags": ["c++", "callback"], "comments": [{"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1531324795, "post_id": 51289782, "comment_id": 89557463, "body": "Here you go, <a href=\"https://stackoverflow.com/a/14189561/451600\">stackoverflow.com/a/14189561/451600</a>"}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1531324910, "post_id": 51289782, "comment_id": 89557521, "body": "@CoryKramer The answers on your dupe are quite dated."}, {"owner": {"reputation": 1563, "user_id": 7334162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aa3c8e148927fb3ca4c94b03f051711?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7334162/pierre"}, "reply_to_user": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1531326405, "post_id": 51289782, "comment_id": 89558257, "body": "@CaptainGiraffe In your post, the user can modify the <code>addHandler</code> signature. In my case, I cannot change the <code>Transfert</code> signature and I cannot use <code>std::function</code>."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 1, "creation_date": 1531326943, "post_id": 51289782, "comment_id": 89558562, "body": "<code>std::bind(FileTransfert::MyCallBack, this, _1)</code> should do the trick. The <code>_1</code> is a placeholder for the int."}, {"owner": {"reputation": 1563, "user_id": 7334162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aa3c8e148927fb3ca4c94b03f051711?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7334162/pierre"}, "reply_to_user": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1531327809, "post_id": 51289782, "comment_id": 89559003, "body": "@CaptainGiraffe It only works if I change the signature of <code>Transfert</code> by <code>void Transfert(string source, string destination, function&lt;void(int)&gt; callbackFunction)</code> which I can&#39;t do. If I don&#39;t, I get a C2664 error : impossible to convert <code>std::tr1::_Bind&lt;_Result_type,_Ret,_BindN&gt;</code> into <code>void (__cdecl *)(int)</code>."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1531336492, "post_id": 51289782, "comment_id": 89563071, "body": "Indeed. I didn&#39;t realize you couldn&#39;t change that."}, {"owner": {"reputation": 1563, "user_id": 7334162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aa3c8e148927fb3ca4c94b03f051711?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7334162/pierre"}, "reply_to_user": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1531494177, "post_id": 51289782, "comment_id": 89631384, "body": "According to this exchange I had on the chatroom, if I can&#39;t modify the signature of the <code>Transfert</code> function, I can&#39;t give to it the state of my <code>FileTransfert</code> object to update its <code>m_nProgress</code> member : <a href=\"https://chat.stackoverflow.com/transcript/message/43247116#43247116\">chat.stackoverflow.com/transcript/message/43247116#43247116</a>"}], "owner": {"reputation": 1563, "user_id": 7334162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aa3c8e148927fb3ca4c94b03f051711?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/7334162/pierre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "closed_date": 1531324793, "answer_count": 0, "score": 0, "last_activity_date": 1531494469, "creation_date": 1531324607, "last_edit_date": 1531494469, "question_id": 51289782, "link": "https://stackoverflow.com/questions/51289782/how-a-callback-function-can-modify-an-object-member", "closed_reason": "Duplicate", "title": "How a callback function can modify an object member?", "body": "<p>To illustrate the question, let's imagine a dummy example where we have this function from an external API:</p>\n\n<pre><code>// This function is run in a separated thread\nvoid Transfert(string source, string destination, void (*callbackFunction)(int))\n{\n    for(int i = 0; i &lt; 100; i++)\n    {\n        // Simulation of a file transfert\n        // ...\n        // \n\n        // We call the callback function to update the progression of the file transfert\n        callbackFunction(i);\n    }\n}\n</code></pre>\n\n<p>I want to use this function to transfert a file and follow the progress with the help of the callback function. Here is my code:</p>\n\n<pre><code>// Class containing information about the transfert\nclass FileTransfert\n{\npublic:\n    FileTransfert(string, string);\n    void MyCallback(int);\n\n    // Those members are public to simplify this example but should be private\n    long m_progress;\n    string m_source;\n    string m_destination;\n};\n\nFileTransfert::FileTransfert(string source, string destination)\n{\n    m_source = source;\n    m_destination = destination;\n}\n\n// Used to update the progress variable\nvoid FileTransfert::MyCallback(int progress)\n{\n    m_progress = progress;\n}\n\nint main(int argc, char* argv[])\n{\n    FileTransfert f(\"source.txt\", \"destination.txt\");\n\n    // It's a new thread\n    Transfert(f.m_source, f.m_destination, f.MyCallback); // Compilation error\n\n    // Now I want to follow the transfer with the m_progress variable\n\n    return 0;\n}\n</code></pre>\n\n<p>My class <code>FileTransfert</code> has a <code>m_progress</code> member and I would like to refresh it during the file transfert. So I create a callback function who updates <code>m_progress</code>.\nThe problem is I cannot use a method of an object as a callback function.</p>\n\n<p>So, here is my question : <strong>how can I modify my code to follow the progression of the transfert?</strong><br>I have some constraints : I have to call <code>Transfert</code> from a function who is outside the <code>FileTransfert</code> class and the <code>m_progress</code> variable has to be inside the <code>FileTransfert</code> class. In other words, I can't change all the architecture of my code.</p>\n\n<p><strong>Important note:</strong> I can't change the code and the signature of the <code>Transfert</code> function. In the answers of those two questions (<a href=\"https://stackoverflow.com/questions/14189440/c-class-member-callback-simple-examples/14189561#14189561\">here</a> and <a href=\"https://stackoverflow.com/questions/400257/how-can-i-pass-a-class-member-function-as-a-callback\">here</a>), we change the signature of the function but I can't in my case.</p>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>As I said in comments, there is no proper solution to this problem if I can't change the signature of the <code>Transfert</code> function. One idea is to use global variables but it can be very risky in a multithread environment.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "is_accepted": false, "score": 1, "last_activity_date": 1531324401, "creation_date": 1531324401, "answer_id": 51289717, "question_id": 51289652, "link": "https://stackoverflow.com/questions/51289652/how-to-print-only-the-last-array-for-bubble-sort/51289717#51289717", "title": "How to print only the last array for bubble_sort", "body": "<p>take your <code>print</code> <code>for loop</code> out of the <code>sort</code> <code>for loop</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1743, "user_id": 5502206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e05d0d997fd75b4881e5c39055222a?s=128&d=identicon&r=PG&f=1", "display_name": "V. Kravchenko", "link": "https://stackoverflow.com/users/5502206/v-kravchenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1531324417, "creation_date": 1531324417, "answer_id": 51289728, "question_id": 51289652, "link": "https://stackoverflow.com/questions/51289652/how-to-print-only-the-last-array-for-bubble-sort/51289728#51289728", "title": "How to print only the last array for bubble_sort", "body": "<p>Move your for-loop for printing outside of your for-loop for sorting. Just like </p>\n\n<pre><code>void bubble_sort(int iarr[], int num)\n{\n\n    int i, j, k, temp;\n\n    for (i = 1; i &lt; num; i++)\n    {\n        for (j = 0; j &lt; num - 1; j++)\n        {\n            if (iarr[j] &gt; iarr[j + 1])\n            {\n                temp = iarr[j];\n\n                iarr[j] = iarr[j + 1];\n\n                iarr[j + 1] = temp;\n            }\n        }\n    }\n    printf(\"\\nAfter pass %d : \", i);\n    for (k = 0; k &lt; num; k++)\n\n    {\n        printf(\"\\t%5d\", iarr[k]);\n    }\n\n}\n</code></pre>\n\n<p>And do proper code formatting to avoid such mistakes.</p>\n"}], "owner": {"reputation": 1, "user_id": 10065808, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Bp63OA62moM/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qJmDMqXX6N3t_0DmqYCLG0LrbQ1A/mo/photo.jpg?sz=128", "display_name": "PicaLow", "link": "https://stackoverflow.com/users/10065808/picalow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1531324417, "creation_date": 1531324165, "question_id": 51289652, "link": "https://stackoverflow.com/questions/51289652/how-to-print-only-the-last-array-for-bubble-sort", "title": "How to print only the last array for bubble_sort", "body": "<p>How do i get it to print only the last array for bubble_sort, it keeps printing all the array numbers for bubble_sort.</p>\n\n<pre><code>void bubble_sort(int iarr[], int num)\n{\n\nint i, j, k, temp;\n\nfor (i = 1; i &lt; num; i++)\n{\n    for (j = 0; j &lt; num - 1; j++)\n    {\n        if (iarr[j] &gt; iarr[j + 1])\n        {\n            temp = iarr[j];\n\n            iarr[j] = iarr[j + 1];\n\n            iarr[j + 1] = temp;\n        }\n    }\n    printf(\"\\nAfter pass %d : \", i);\n\n    for (k = 0; k &lt; num; k++)\n\n    {\n        printf(\"\\t%5d\", iarr[k]);\n    }\n}\n}\n</code></pre>\n"}, {"tags": ["java", "c++", "tcp", "bytebuffer"], "comments": [{"owner": {"reputation": 136042, "user_id": 5221149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4qlq.png?s=128&g=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5221149/andreas"}, "edited": false, "score": 0, "creation_date": 1531324625, "post_id": 51289612, "comment_id": 89557354, "body": "<a href=\"https://www.google.com/search?q=c%2B%2B+send+int+as+bytes\" rel=\"nofollow noreferrer\"><code>c++ send int as bytes</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1531329451, "creation_date": 1531329451, "answer_id": 51291067, "question_id": 51289612, "link": "https://stackoverflow.com/questions/51289612/how-to-convert-data-sending-data-through-tcp-from-c-to-java/51291067#51291067", "title": "How to convert data sending data through TCP from C++ to Java", "body": "<p>Convert it into network byte order using <code>htons()</code>, <code>htonl()</code>, etc, and receive it with <code>ByteBuffer</code> or <code>DataInputStream</code>.</p>\n"}], "owner": {"reputation": 133, "user_id": 2791425, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000219686414/picture?type=large", "display_name": "Ui-Gyun Jeong", "link": "https://stackoverflow.com/users/2791425/ui-gyun-jeong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1531329451, "creation_date": 1531324018, "question_id": 51289612, "link": "https://stackoverflow.com/questions/51289612/how-to-convert-data-sending-data-through-tcp-from-c-to-java", "title": "How to convert data sending data through TCP from C++ to Java", "body": "<p>I'd like to send some data from C++ to Java via TCP.</p>\n\n<p>On Java, I will use ByteBuffer to get receiced data.\nWhen bytebuffer.getInt(), I' like to get int data which is sent on C++.</p>\n\n<p>To do this, how do I convert data on C++.</p>\n"}, {"tags": ["c++", "c++11", "malloc"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 13, "creation_date": 1531324092, "post_id": 51289529, "comment_id": 89557033, "body": "The problem is probably elsewhere. Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and we&#39;ill be able to help you."}, {"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 1, "creation_date": 1531324104, "post_id": 51289529, "comment_id": 89557040, "body": "why does this have the cuda tag?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1531328379, "post_id": 51289529, "comment_id": 89559259, "body": "You will likely have to solve this one yourself. Remember that heap corruption can be caused much earlier in your program&#39;s execution. The crash need not happen right after you corrupted the heap. The code presented is most likely not the cause."}, {"owner": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "edited": false, "score": 0, "creation_date": 1531331651, "post_id": 51289529, "comment_id": 89560854, "body": "please explain with more details and complete code to view what happened"}], "owner": {"reputation": 169, "user_id": 5969609, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/563a7e815f8d2b9f5b824512449b658a?s=128&d=identicon&r=PG&f=1", "display_name": "KenArrari", "link": "https://stackoverflow.com/users/5969609/kenarrari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531326278, "creation_date": 1531323746, "last_edit_date": 1531326278, "question_id": 51289529, "link": "https://stackoverflow.com/questions/51289529/why-would-trying-to-allocate-a-2d-array-in-c-cause-a-memory-corruption-error", "title": "Why would trying to allocate a 2D array in C++ cause a memory corruption error?", "body": "<p>I have this code, trying to allocate a 2D array:</p>\n\n<pre><code>int** arr;\nint rows = 32;\n\narr = new int*[rows];\nfor(int i=0; i&lt;rows; i++)\n{\n    arr[i] = new int[64];\n}\n</code></pre>\n\n<p>On line <code>arr = new int*[rows]</code>, I get the following error:</p>\n\n<pre><code>malloc(): memory corruption\n\nProgram received signal SIGABRT, Aborted.\n__GI_raise (sig=sig@entry=6) at                 ../sysdeps/unix/sysv/linux/raise.c:51\n51  ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n</code></pre>\n\n<p>Why would this be happening? I'm not accessing any memory outside of what's allocated, just allocating new memory right there.</p>\n"}, {"tags": ["c++", "strict-aliasing", "type-punning"], "comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1531334299, "post_id": 51289394, "comment_id": 89562028, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/174833/discussion-on-question-by-andre-offringa-reusing-a-float-buffer-for-doubles-with\">moved to chat</a>."}, {"owner": {"reputation": 20379, "user_id": 497934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba65fe61781731f1b551098a887b4212?s=128&d=identicon&r=PG", "display_name": "Maxpm", "link": "https://stackoverflow.com/users/497934/maxpm"}, "edited": false, "score": 0, "creation_date": 1531871159, "post_id": 51289394, "comment_id": 89755228, "body": "When you start filling the buffer with floats, do you need each double element to remain valid until it is overwritten?  Or can the entire scratch buffer of doubles be thrown away at once?"}], "answers": [{"comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531369938, "post_id": 51289499, "comment_id": 89571833, "body": "What if that compiler doesn&#39;t have that switch? What if I want to have this functionality as inline functions? Should I turn off strict aliasing for the whole project? This answer can be a solution for some cases, but not in others. And this is false: &quot;only safe way&quot;. My answer tells other safe ways as well. Which are standard conformant, and works in all cases."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531371799, "post_id": 51289499, "comment_id": 89572284, "body": "@geza What if, what if, what if.  Chances are, the OP can use this trick."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531373763, "post_id": 51289499, "comment_id": 89572971, "body": "@geza Oh yes, you&#39;re idea of calling placement new in a loop is a good one (and I see now that it is the right thing to do).  I will reverse my vote, I was wrong about some stuff. ... Ah blast it, I can&#39;t.  Edit your post (anything will do) and then ping me.  Then I can."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531374106, "post_id": 51289499, "comment_id": 89573119, "body": "@geza TU, you end up plus :)"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531374504, "post_id": 51289499, "comment_id": 89573301, "body": "@geza No, it&#39;s fine, and you&#39;re not wrong, to some extent at least. But it wasn&#39;t me that upvoted you, it was SO.  It works that way if you downvote and then upvote, not sure why."}, {"owner": {"reputation": 362, "user_id": 5888830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dd11b6d5ad35a26deab54e99b65057d?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; Offringa", "link": "https://stackoverflow.com/users/5888830/andr%c3%a9-offringa"}, "edited": false, "score": 0, "creation_date": 1531381337, "post_id": 51289499, "comment_id": 89576602, "body": "The suggestion to use a compiler switch to disable strict aliasing is a good one -- thanks! I&#39;m not convinced of your argument that the other answers are not correct: you&#39;re saying &quot;if you have two pointers of different types pointing to the same address then you have aliased that address and you stand a good chance of fooling the compiler&quot;, however, if one does <code>new</code>, <code>delete</code>, <code>new</code>, the 2nd <code>new</code> also might receive the same address to a different type, and clearly the compiler should handle that properly. So it makes sense that placement new indicates the same &quot;change&quot; in lifetime."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 362, "user_id": 5888830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dd11b6d5ad35a26deab54e99b65057d?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; Offringa", "link": "https://stackoverflow.com/users/5888830/andr%c3%a9-offringa"}, "edited": false, "score": 0, "creation_date": 1531383928, "post_id": 51289499, "comment_id": 89578191, "body": "@Andr&#233;Offringa TBH, I&#39;m not certain what is <i>not</i> safe.  I only know what for sure <i>is</i> safe."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531434806, "post_id": 51289499, "comment_id": 89607219, "body": "@geza: Any compiler that doesn&#39;t have such an option should be viewed as being suitable only for processing a specialized subset of C programs that never need to re-purpose storage within its allocated lifetime. Such compilers may be excellent for the purposes of processing the programs for which they were designed, but they cannot reliably process programs that need to reuse storage within its allocated lifetime, even if the programmers abide by the Effective Type rules.  I have yet to see a compiler that abides by the Effective Type rules in every case that doesn&#39;t also work in many other..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1531435266, "post_id": 51289499, "comment_id": 89607323, "body": "...easily-identifiable cases where the Standard imposes no requirements.  It&#39;s too bad the Rationale&#39;s comments about Quality of Implementation issues weren&#39;t incorporated more visibly into the Standard, since the only way many parts of the Standard make any sense is if one recognizes that some forms of UB were expected to be processed predictably on quality implementations intended for some targets and purposes, even if implementations that are of low-quality or specialized for other purposes might behave unpredictably."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1531459980, "post_id": 51289499, "comment_id": 89612273, "body": "@supercat: There are <b>a lot</b> of program which compiles without <code>-fno-strict-aliasing</code>. And I bet, that a lot of programs, which uses this switch, can be modified to not use it. So I think exactly the opposite. This switch is very rarely needed. What do you mean by this? &quot;I have yet to see a compiler that abides by the Effective Type rules in every case that doesn&#39;t also work in many other easily-identifiable cases where the Standard imposes no requirements.&quot;"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531461808, "post_id": 51289499, "comment_id": 89612901, "body": "@geza <i>There are a lot of program which compiles without <code>-fno-strict-aliasing</code></i> Yes, I&#39;ve never needed this switch and I tend to play a bit fast-and-loose with the types of pointers sometimes.  Truth is, I think you have to do something a bit crazy for anything to actually go wrong when the compiler optimises your code.  The compiler guys are not idiots."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531494047, "post_id": 51289499, "comment_id": 89631311, "body": "@geza: Both gcc and clang are prone to assume that code which would have no effect in <code>-fno-strict-aliasing</code> mode will also have no effect in <code>-fstrict-aliasing</code> mode.  For example, assume both <code>long</code> and <code>long long</code> are 64 bits.  Given &quot;void convert_long_to_longlong(void *p, int n) { long *lp = p; long long *lp&#39;; for (i=0; i&lt;n; i++) llp[i] = lp[p];}`.  If one has a function which operates on a sequence of &quot;long&quot;, and one which operates on a sequence of &quot;long long&quot;, it should be safe to use a function like the above to change the Effective Type of the array between the two functions, and..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1531494382, "post_id": 51289499, "comment_id": 89631504, "body": "...use a similar function to convert the array back before calling the first function again.  Unfortunately, I don&#39;t think gcc or clang have any way for their optimizer to handle the notion of a function which converts something from one type to another without physically reading or writing any bytes thereof.  I don&#39;t think there&#39;s any guaranteed-safe way on those compilers, without using compiler-specific directives, to take storage that has been used as one type and reuse it as another, without either using <code>volatile</code> to force wasteful reads and writes."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1531494833, "post_id": 51289499, "comment_id": 89631784, "body": "@PaulSanders: There are many constructs that will &quot;usually&quot; work on gcc and clang, but which such compilers don&#39;t handle 100% reliably.  If the authors of gcc and clang were interested in producing a high-quality compiler suitable for low-level or systems programming, they should seek to maximize the range of programs that can be safely processed without having to disable essentially all optimizations.  From what I&#39;ve seen of their mailing list, they&#39;d rather find excuses to regard any program with which they&#39;re incompatible as &quot;broken&quot;, even though..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1531495528, "post_id": 51289499, "comment_id": 89632191, "body": "...every quality implementation must be able to support constructs beyond those mandated in 6.5p7 is a Quality of Implementation issue.  A conforming-but-garbage-quality compiler, given <code>struct s {int x;} s1={0},s2; s1.x=3; s2=s1;</code>, could assume that the value of <code>s1</code> would not be affected by an lvalue of type <code>int</code>, and thus store <code>(struct s){0}</code> into s2.  The only way the Standard would make any sense would be if use of an lvalue which is recognizably derived from another should be recognized as an use of the original, with the ability to recognize derived lvalues as a QoI issue."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1531496056, "post_id": 51289499, "comment_id": 89632512, "body": "@PaulSanders: IMHO, two pointers or lvalues can only meaningfully be said to alias during the execution of a particular function or loop if both are actually used in some function during that execution, and quality implementations should only care about 6.5p7 in cases that would actually involve aliasing [consider the footnote].  Put those together, and I&#39;d say that even without the non-conforming bugs, the <code>-fstrict-aliasing</code> dialect should not be regarded as a high-quality dialect except perhaps for specialized application fields."}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 1, "last_activity_date": 1531372783, "last_edit_date": 1531372783, "creation_date": 1531323657, "answer_id": 51289499, "question_id": 51289394, "link": "https://stackoverflow.com/questions/51289394/reusing-a-float-buffer-for-doubles-without-undefined-behaviour/51289499#51289499", "title": "Reusing a float buffer for doubles without undefined behaviour", "body": "<p><strong>tl;dr</strong> Don't alias pointers - at all - unless you tell the compiler that you're going to on the command line.</p>\n\n<hr>\n\n<p>The easiest way to do this might be to figure out what compiler switch disables strict aliasing and use it for the source file(s) in question.</p>\n\n<p>Needs must, eh?</p>\n\n<hr>\n\n<p>Thought about this some more.  Despite all that stuff about placement new, this is the only safe way.</p>\n\n<p>Why?</p>\n\n<p>Well, if you have two pointers of different types pointing to the same address then you have aliased that address and you stand a good chance of fooling the compiler.  <em>And it doesn't matter how you assigned values to those pointers</em>.  The compiler is not going to remember that.</p>\n\n<p>So this is the only safe way, and that's why we need <code>std::pun</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531325820, "post_id": 51290074, "comment_id": 89557959, "body": "You need to at least pass back the resulting <code>float *</code> pointer of <code>new</code> from <code>f</code>. Or use launder."}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531326050, "post_id": 51290074, "comment_id": 89558081, "body": "Valid argument. But i am not sure. I would have to pass the <code>float* buffer</code> by reference to assign the last placement new to it. Or we can omit it, because we created back the state in which we called the function. I am not sure about it"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1531326204, "post_id": 51290074, "comment_id": 89558162, "body": "I don&#39;t think that &quot;created back the state&quot; is possible in this case. But maybe I&#39;m wrong. Perhaps it is worth a new SO question :)"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 4, "creation_date": 1531327053, "post_id": 51290074, "comment_id": 89558619, "body": "The other problem with this approach is that <code>new[]</code> can have an overhead. That&#39;s why I recommended the reinterpret_cast+launder approach: call non-array placement new N times, then use launder to get a &quot;clean&quot; pointer to <code>double *</code>."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1531328500, "post_id": 51290074, "comment_id": 89559316, "body": "@geza: <a href=\"https://stackoverflow.com/questions/8720425/array-placement-new-requires-unspecified-overhead-in-the-buffer\" title=\"array placement new requires unspecified overhead in the buffer\">stackoverflow.com/questions/8720425/&hellip;</a>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1531332151, "post_id": 51290074, "comment_id": 89561088, "body": "So there is an ABI problem; array construction can take more space than sizrof T times countof elements.  This <i>tends</i> not to be the case with plain old data; but the C++ standard permits it.  Now, I am unaware of a single compiler that has overhead on a placement new array of doubles; on the other hand, I have no idea how to detect if there will be, and if there is the above is UB."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531347535, "post_id": 51290074, "comment_id": 89567392, "body": "@geza placement new (for arrays, specifically) has no overhead as cppreference will tell you.  Why would it? So none of those tricks are necessary."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531369734, "post_id": 51290074, "comment_id": 89571773, "body": "@ph&#246;n Sadly, for both our posts, I&#39;ve come to the conclusion that it isn&#39;t.  Please see the edit I have made to my original answer to see why."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531374827, "post_id": 51290074, "comment_id": 89573434, "body": "@PaulSanders: The authoritative reference is the standard: <a href=\"http://eel.is/c++draft/expr#new-15\" rel=\"nofollow noreferrer\">eel.is/c++draft/expr#new-15</a>. It says: &quot;This overhead may be applied in all array new-expressions, including those referencing the library function operator new[](std\u200b::\u200bsize_&#173;t, void*) and other placement allocation functions. The amount of overhead may vary from one invocation of new to another.&quot;. But you are right in practice, implementations usually don&#39;t use this overhead in the current case."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531375177, "post_id": 51290074, "comment_id": 89573562, "body": "@geza Yeah, I saw that. Sad.  That&#39;s why I now agree with you that calling placement new on a per-object basis is the right thing to do for non-POD types to get all the constructors called.  Is there anything like <code>std::is_pod</code> in type_traits?  Because for POD types you can skip all that and just call placement new once (to get a hold of that pointer)."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531375611, "post_id": 51290074, "comment_id": 89573733, "body": "Now that I understand all this a bit better, I see a lot of muddled thinking in this post, sorry.  In particular, <code>new (buffer)double[buffer_size_in_bytes &#47; sizeof(double)];</code> might break, see comments elsewhere in this thread. It&#39;s not tit-for-tat."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531375644, "post_id": 51290074, "comment_id": 89573750, "body": "@PaulSanders: &quot;for POD types you can skip all that and just call placement new once (to get a hold of that pointer).&quot; Why do you think that&#39;s true?"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531375962, "post_id": 51290074, "comment_id": 89573863, "body": "@geza Why would it not be true?  1.  There&#39;s no actual allocation happening.  2.  There are no constructors to be called.  You just want to get a typed pointer to the start of the buffer, and <code>new (buf) T</code> does that nicely."}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531376641, "post_id": 51290074, "comment_id": 89574132, "body": "@PaulSanders yeah gz. now you have a pointer to the buffer where one object is alive. on the other indexes (if its valid to point to them) you have a strict aliasing violation"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531376927, "post_id": 51290074, "comment_id": 89574234, "body": "@PaulSanders: then you could have easily <code>reinterpret_cast</code> too. Of course, it is UB too. You need to call placement <code>new</code> for <b>every</b> element. Or, if you want to have a float <b>array</b>, then you need to call placement <code>new[]</code>. See: <a href=\"http://eel.is/c++draft/intro.object#1\" rel=\"nofollow noreferrer\">eel.is/c++draft/intro.object#1</a>. It is exactly defined by the standard, how can one create an object properly."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531377101, "post_id": 51290074, "comment_id": 89574302, "body": "@geza They&#39;re not objects, they&#39;re POD. So there&#39;s nothing to do and that section of the standard doesn&#39;t apply (and the <i>storage</i> for the elements already exists, obviously)."}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1531377103, "post_id": 51290074, "comment_id": 89574304, "body": "@geza the only thing i am concerned about is the placement new[] for arrays. Mooning Duck showed another SO question which address this: <a href=\"https://stackoverflow.com/q/8720425/3783662\">stackoverflow.com/q/8720425/3783662</a> dont know wether its okay now for placement new to be called on an previously already new[]ed array"}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531377390, "post_id": 51290074, "comment_id": 89574436, "body": "@PaulSanders they are objects."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531377404, "post_id": 51290074, "comment_id": 89574448, "body": "@ph&#246;n I think you&#39;ll find that&#39;s _MooingDuck` (although I quite like Mooning Duck myself and I imagine he might too).  Ah me, noise."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531377590, "post_id": 51290074, "comment_id": 89574535, "body": "@ph&#246;n No they are not, see <a href=\"https://stackoverflow.com/a/146454/5743288\">stackoverflow.com/a/146454/5743288</a>.  More noise, please check your facts before you post."}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531378102, "post_id": 51290074, "comment_id": 89574763, "body": "@PaulSanders what should this SO answer tell me? :-D It explains what POD are. nice? It doesnt provide anything for this discussion. Your point is that you can access any storage through a pointer of pod type. And in your answer you are doing excatly that. You access it as float and after that as double for example. But that is not allowed. That is a strict aliasing violation. You may only access the objects through a typed pointer if an object of that type is currently alive at this address. And to make sure that things are alive, you need to construct them (even if the constructor is no-op)"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531380325, "post_id": 51290074, "comment_id": 89575989, "body": "@ph&#246;n I&#39;m wondering if someone else will answer this for me.  If they don&#39;t,  I will."}, {"owner": {"reputation": 362, "user_id": 5888830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dd11b6d5ad35a26deab54e99b65057d?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; Offringa", "link": "https://stackoverflow.com/users/5888830/andr%c3%a9-offringa"}, "edited": false, "score": 0, "creation_date": 1531382120, "post_id": 51290074, "comment_id": 89577103, "body": "I like this solution the most, as it allows unrestricted access within the lifetime of the <code>double*</code> (see also my comments in geza&#39;s post). However, do I understand correctly that it can theoretically be UB in some implementations because placement <code>new</code>  can have an unknown overhead? (even though no known implementation has overhead). Could you add this as a comment to your answer? And could you maybe also explain briefly, e.g. by quoting the standard, why placement new is a proper solution?"}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 362, "user_id": 5888830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dd11b6d5ad35a26deab54e99b65057d?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; Offringa", "link": "https://stackoverflow.com/users/5888830/andr%c3%a9-offringa"}, "edited": false, "score": 0, "creation_date": 1531386618, "post_id": 51290074, "comment_id": 89579973, "body": "@Andr&#233;Offringa &quot;However, do I understand correctly that it can theoretically be UB in some implementations because placement new can have an unknown overhead?&quot; i have to admint i wasnt aware of that. i followed the question from link and used Howard Hinnants code to test the array overhead. turns out, that for double there is none, for the strings there is an 8 byte overhead. maybe its only no overhead for trivial types on the implementation where i tested it. i have to further investigate it. i will later on edit some links for the placement new and aliasing rules into my answer."}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 362, "user_id": 5888830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dd11b6d5ad35a26deab54e99b65057d?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; Offringa", "link": "https://stackoverflow.com/users/5888830/andr%c3%a9-offringa"}, "edited": false, "score": 1, "creation_date": 1531386837, "post_id": 51290074, "comment_id": 89580127, "body": "@Andr&#233;Offringa maybe the only portable solution would be to placement new each element seperate (like a <code>std::vector</code> does it). you could make a class and use the subscript operation to use it like one would use std::vector or an array. but in the end it would just not be a plain double[...] array. the solution would look similar to the one of geza and brings some boilerplate code with it. i will update my answer when i got a little bit more time."}], "tags": [], "owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "is_accepted": true, "score": 10, "last_activity_date": 1531897088, "last_edit_date": 1531897088, "creation_date": 1531325647, "answer_id": 51290074, "question_id": 51289394, "link": "https://stackoverflow.com/questions/51289394/reusing-a-float-buffer-for-doubles-without-undefined-behaviour/51290074#51290074", "title": "Reusing a float buffer for doubles without undefined behaviour", "body": "<p>I think the following code is a valid way to do it (it is really just a small example about the idea):</p>\n\n<pre><code>#include &lt;memory&gt;\n\nvoid f(float* buffer, std::size_t buffer_size_in_bytes)\n{\n    double* d = new (buffer)double[buffer_size_in_bytes / sizeof(double)];\n\n    // we have started the lifetime of the doubles.\n    // \"d\" is a new pointer pointing to the first double object in the array.        \n    // now you can use \"d\" as a double buffer for your calculations\n    // you are not allowed to access any object through the \"buffer\" pointer anymore since the floats are \"destroyed\"       \n    d[0] = 1.;\n    // do some work here on/with the doubles...\n\n\n    // conceptually we need to destory the doubles here... but they are trivially destructable\n\n    // now we need to start the lifetime of the floats again\n    new (buffer) float[10];  \n\n\n    // here we are unsure about wether we need to update the \"buffer\" pointer to \n    // the one returned by the placement new of the floats\n    // if it is nessessary, we could return the new float pointer or take the input pointer\n    // by reference and update it directly in the function\n}\n\nint main()\n{\n    float* floats = new float[10];\n    f(floats, sizeof(float) * 10);\n    return 0;\n}\n</code></pre>\n\n<p>It is important that you only use the pointer you receive from placement new. And it is important to placement new back the floats. Even if it is a no-operation construction, you need to start the lifetimes of the floats again.</p>\n\n<p>Forget about <code>std::launder</code> and <code>reinterpret_cast</code> in the comments. Placement new will do the job for you.</p>\n\n<p>edit: Make sure you have proper alignment when creating the buffer in main.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I just wanted to give an update on things that were discussed in the comments.</p>\n\n<ol>\n<li>The first thing mentioned was that we may need to update the initially created float pointer to the pointer returned by the re-placement-new'ed floats (the question is whether the initially float pointer can still be used to access the floats, because the floats are now \"new\" floats obtained by an additional  new expression).</li>\n</ol>\n\n<p>To do this, we can either a) pass the float pointer by reference and update it, or b) return the new obtained float pointer from the function:</p>\n\n<p>a)</p>\n\n<pre><code>void f(float*&amp; buffer, std::size_t buffer_size_in_bytes)\n{\n    double* d = new (buffer)double[buffer_size_in_bytes / sizeof(double)];    \n    // do some work here on/with the doubles...\n    buffer = new (buffer) float[10];  \n}\n</code></pre>\n\n<p>b)</p>\n\n<pre><code>float* f(float* buffer, std::size_t buffer_size_in_bytes)\n{\n    /* same as inital example... */\n    return new (buffer) float[10];  \n}\n\nint main()\n{\n    float* floats = new float[10];\n    floats = f(floats, sizeof(float) * 10);\n    return 0;\n}\n</code></pre>\n\n<ol start=\"2\">\n<li><p>The next and more crucial thing to mention is that placement-new is allowed to have a memory overhead. So the implementation is allowed to place some meta data infront of the returned array. If that happens, the naive calculation of how many doubles would fit into our memory will be obviously wrong. The problem is, that we dont know how many bytes the implementation will aquire beforehand for the specific call. But that would be nessessary to adjust the amounts of doubles we know will fit into the remaining storage.\nHere ( <a href=\"https://stackoverflow.com/a/8721932/3783662\">https://stackoverflow.com/a/8721932/3783662</a> ) is another SO post where Howard Hinnant provided a test snippet. I tested this using an online compiler and saw that for trivial destructable types (for example doubles), the overhead was 0. For more complex types (for example std::string), there was an overhead of 8 bytes. But this may varry for your plattform/compiler. Test it beforehand with the snippet by Howard.</p></li>\n<li><p>For the question why we need to use some kind of placement new (either by new[] or single element new): We are allowed to cast pointers in every way we want. But in the end - when we access the value - we need to use the right type to avoid voilating the strict aliasing rules. Easy speaking: its only allowed to access an object when there is really an object of the pointer type living in the location given by the pointer. So how do you bring objects to life?\nthe standard says:</p></li>\n</ol>\n\n<p><a href=\"https://timsong-cpp.github.io/cppwp/intro.object#1\" rel=\"nofollow noreferrer\">https://timsong-cpp.github.io/cppwp/intro.object#1</a> :</p>\n\n<p>\"An object is created by a definition, by a new-expression, when implicitly changing the active member of a union, or when a temporary object is created.\"</p>\n\n<p>There is an additional sector which may seem interesting:</p>\n\n<p><a href=\"https://timsong-cpp.github.io/cppwp/basic.life#1\" rel=\"nofollow noreferrer\">https://timsong-cpp.github.io/cppwp/basic.life#1</a>:</p>\n\n<p>\"An object is said to have non-vacuous initialization if it is of a class or aggregate type and it or one of its subobjects is initialized by a constructor other than a trivial default constructor. The lifetime of an object of type T begins when:</p>\n\n<ul>\n<li>storage with the proper alignment and size for type T is obtained, and</li>\n<li>if the object has non-vacuous initialization, its initialization is complete\"</li>\n</ul>\n\n<p>So now we may argue that because doubles are trivial, do we need to take some action to bring the trivial objects to life and change the actual living objects? I say yes, because we initally obtained storage for the floats, and accessing the storage through a double pointer would violate strict aliasing. So we need the tell the compiler that the actual type has changed. This whole last point 3 was pretty controversial discussed. You may form your own opinion. You have all the information at hand now.</p>\n"}, {"comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531369454, "post_id": 51291922, "comment_id": 89571685, "body": "And now ... please see the edit I have made to my original answer.  It&#39;s a slippery one, this."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531376128, "post_id": 51291922, "comment_id": 89573936, "body": "We can fix <a href=\"https://stackoverflow.com/questions/51291661/is-it-possible-to-recreate-an-array-which-has-been-destroyed-by-placement-new\">this problem</a> but we&#39;re no further forward as we are still aliasing pointers to different types.  We need <code>std::pun</code>!! :)"}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531376540, "post_id": 51291922, "comment_id": 89574088, "body": "@PaulSanders if you actually create the objects and start their lifestimes, then there is no aliasing problem. thats why you start the lifetime"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "edited": false, "score": 0, "creation_date": 1531380461, "post_id": 51291922, "comment_id": 89576052, "body": "@ph&#246;n What makes you say that?  Of course there is.  Aliasing pointers is nothing to do with object lifetimes.  More noise."}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531380778, "post_id": 51291922, "comment_id": 89576247, "body": "@PaulSanders Aliasing is all about lifetimes. If i place an int into the storage, i may access it through an int pointer. If i place a float afterwards, i may access the storage trough a float pointer. As soon as i place the float, i may no longer use the int pointer to access the int (because there is no int alive). Thats it. And to place a float into the storage, you call the placement new for a float."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "edited": false, "score": 0, "creation_date": 1531381147, "post_id": 51291922, "comment_id": 89576499, "body": "@ph&#246;n Too kind.  I don&#39;t plan to answer your other question, sorry.  Maybe someone else will set you straight, or you could <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">read a good book</a>."}, {"owner": {"reputation": 362, "user_id": 5888830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dd11b6d5ad35a26deab54e99b65057d?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; Offringa", "link": "https://stackoverflow.com/users/5888830/andr%c3%a9-offringa"}, "edited": false, "score": 0, "creation_date": 1531381660, "post_id": 51291922, "comment_id": 89576815, "body": "Thanks, I gave an upvote: I was not aware of these solutions, nice to learn about them. However, they do not solve my problem completely, as both do not allow unrestricted access to the array as doubles, which is what I would like. In the part where I use the array as doubles, I would also like to be able to call for example other functions taking a ptr to doubles, which is not possible without also rewriting those functions."}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531382133, "post_id": 51291922, "comment_id": 89577106, "body": "@PaulSanders which other question? my only question is how someone can swich his opinioins and answers as fast as you do, and in the end he thinks he got the right answer because he thought 10 mins about it. And multiple people still telling him he is wrong but he wont accept it"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 362, "user_id": 5888830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dd11b6d5ad35a26deab54e99b65057d?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; Offringa", "link": "https://stackoverflow.com/users/5888830/andr%c3%a9-offringa"}, "edited": false, "score": 1, "creation_date": 1531382612, "post_id": 51291922, "comment_id": 89577391, "body": "@Andr&#233;Offringa: Unfortunately, I don&#39;t think that&#39;s possible in a strictly standard conformant way. But as far as I know, currently, it is fine to use ph&#246;n&#39;s solution in my opinion. Check out whether your compiler adds overhead to placement <code>new[]</code>, it is almost sure that it won&#39;t. So I&#39;d go with that way, if I had to solve your problem. I&#39;ve added my answer just have a strictly standard conformant way. But, I&#39;m starting to think that my first way is flawed, and it has UB, so I&#39;ll check it out."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 362, "user_id": 5888830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dd11b6d5ad35a26deab54e99b65057d?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; Offringa", "link": "https://stackoverflow.com/users/5888830/andr%c3%a9-offringa"}, "edited": false, "score": 0, "creation_date": 1531383739, "post_id": 51291922, "comment_id": 89578078, "body": "@Andr&#233;Offringa My alternative answer will give you that, if you trust it.  As Bathsheba says, it&#39;s all probably fine, I just could not swear to it."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "edited": false, "score": 0, "creation_date": 1531384970, "post_id": 51291922, "comment_id": 89578895, "body": "@ph&#246;n I don&#39;t know if you&#39;ve noticed, but the only person who is telling me I am wrong is you, and I don&#39;t intend to listen to you anymore, sorry.  The rest of us are having quite an interesting discussion (and learning new things).  Join it - by asking questions, not by making statements."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 362, "user_id": 5888830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dd11b6d5ad35a26deab54e99b65057d?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; Offringa", "link": "https://stackoverflow.com/users/5888830/andr%c3%a9-offringa"}, "edited": false, "score": 0, "creation_date": 1531411408, "post_id": 51291922, "comment_id": 89596827, "body": "@Andr&#233;Offringa: it seems that my first way is not flawed, see: <a href=\"https://stackoverflow.com/questions/51300626/is-stdmemcpy-between-different-trivially-copyable-types-undefined-behavior\" title=\"is stdmemcpy between different trivially copyable types undefined behavior\">stackoverflow.com/questions/51300626/&hellip;</a>"}], "tags": [], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "is_accepted": false, "score": 7, "last_activity_date": 1531374004, "last_edit_date": 1531374004, "creation_date": 1531332925, "answer_id": 51291922, "question_id": 51289394, "link": "https://stackoverflow.com/questions/51289394/reusing-a-float-buffer-for-doubles-without-undefined-behaviour/51291922#51291922", "title": "Reusing a float buffer for doubles without undefined behaviour", "body": "<p>You can achieve this in two ways.</p>\n\n<p>First:</p>\n\n<pre><code>void set(float *buffer, size_t index, double value) {\n    memcpy(reinterpret_cast&lt;char*&gt;(buffer)+sizeof(double)*index, &amp;value, sizeof(double));\n}\ndouble get(const float *buffer, size_t index) {\n    double v;\n    memcpy(&amp;v, reinterpret_cast&lt;const char*&gt;(buffer)+sizeof(double)*index, sizeof(double));\n    return v;\n}\nvoid f(float *buffer) {\n    // here, use set and get functions\n}\n</code></pre>\n\n<p>Second: Instead of <code>float *</code>, you need to allocate a \"typeless\" <code>char[]</code> buffer, and use placement new to put floats or doubles inside:</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid setType(char *buffer, size_t size) {\n    for (size_t i=0; i&lt;size/sizeof(T); i++) {\n        new(buffer+i*sizeof(T)) T;\n    }\n}\n// use it like this: setType&lt;float&gt;(buffer, sizeOfBuffer);\n</code></pre>\n\n<p>Then use this accessor:</p>\n\n<pre><code>template &lt;typename T&gt;\nT &amp;get(char *buffer, size_t index) {\n    return *std::launder(reinterpret_cast&lt;T *&gt;(buffer+index*sizeof(T)));\n}\n// use it like this: get&lt;float&gt;(buffer, index) = 33.3f;\n</code></pre>\n\n<p>A third way could be something like ph\u00f6n's answer (see my comments under that answer), unfortunately I cannot make a proper solution, because of <a href=\"https://stackoverflow.com/questions/51291661/is-it-possible-to-recreate-an-array-which-has-been-destroyed-by-placement-new\">this problem</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1531380804, "post_id": 51299361, "comment_id": 89576265, "body": "Interesting post <a href=\"https://blog.regehr.org/archives/1307\" rel=\"nofollow noreferrer\">here</a>.  And I think the big 3 have the requisite command line switch(es), so, for all practical purposes, the problem is soluble."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1531379531, "creation_date": 1531379531, "answer_id": 51299361, "question_id": 51289394, "link": "https://stackoverflow.com/questions/51289394/reusing-a-float-buffer-for-doubles-without-undefined-behaviour/51299361#51299361", "title": "Reusing a float buffer for doubles without undefined behaviour", "body": "<p>This problem cannot be solved in portable C++.</p>\n\n<p>C++ is strict when it comes to pointer aliasing. Somewhat paradoxically this allows it to compile on very many platforms (for example where, perhaps <code>double</code> numbers are stored in different places to <code>float</code> numbers).</p>\n\n<p>Needless to say, if you are striving for portable code then you'll need to recode what you have. The second best thing is to be pragmatic, accept it will work on any desktop system I've come across; perhaps even <code>static_assert</code> on compiler name / architecture.</p>\n"}, {"tags": [], "owner": {"reputation": 20379, "user_id": 497934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba65fe61781731f1b551098a887b4212?s=128&d=identicon&r=PG", "display_name": "Maxpm", "link": "https://stackoverflow.com/users/497934/maxpm"}, "is_accepted": false, "score": 2, "last_activity_date": 1531872373, "creation_date": 1531872373, "answer_id": 51391756, "question_id": 51289394, "link": "https://stackoverflow.com/questions/51289394/reusing-a-float-buffer-for-doubles-without-undefined-behaviour/51391756#51391756", "title": "Reusing a float buffer for doubles without undefined behaviour", "body": "<p>Here's an alternative approach that's less scary.</p>\n\n<p>You say,</p>\n\n<blockquote>\n  <p>...a float/double union is not possible without...allocating extra space, which defeats the purpose and happens to be costly in my case...</p>\n</blockquote>\n\n<p>So just have each union object contain two floats instead of one.</p>\n\n<pre><code>static_assert(sizeof(double) == sizeof(float)*2, \"Assuming exactly two floats fit in a double.\");\nunion double_or_floats\n{\n    double d;\n    float f[2];\n};\n\nvoid f(double_or_floats* buffer)\n{\n    // Use buffer of doubles as scratch space.\n    buffer[0].d = 1.0;\n    // Done with the scratch space.  Start filling the buffer with floats.\n    buffer[0].f[0] = 1.0f;\n    buffer[0].f[1] = 2.0f;\n}\n</code></pre>\n\n<p>Of course, this makes indexing more complicated, and calling code will have to be modified.  But it has no overhead and it's more obviously correct.</p>\n"}], "owner": {"reputation": 362, "user_id": 5888830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dd11b6d5ad35a26deab54e99b65057d?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; Offringa", "link": "https://stackoverflow.com/users/5888830/andr%c3%a9-offringa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1150, "favorite_count": 5, "accepted_answer_id": 51290074, "answer_count": 5, "score": 25, "last_activity_date": 1572386068, "creation_date": 1531323346, "last_edit_date": 1531328226, "question_id": 51289394, "link": "https://stackoverflow.com/questions/51289394/reusing-a-float-buffer-for-doubles-without-undefined-behaviour", "title": "Reusing a float buffer for doubles without undefined behaviour", "body": "<p>In one particular C++ function, I happen to have a pointer to a big buffer of floats that I want to temporarily use to store half the number of doubles. Is there a method to use this buffer as scratch space for storing the doubles, which is also allowed (i.e., not undefined behaviour) by the standard?</p>\n\n<p>In summary, I would like this:</p>\n\n<pre><code>void f(float* buffer)\n{\n  double* d = reinterpret_cast&lt;double*&gt;(buffer);\n  // make use of d\n  d[i] = 1.;\n  // done using d as scratch, start filling the buffer\n  buffer[j] = 1.;\n}\n</code></pre>\n\n<p>As far as I see there's no easy way to do this: if I understand correctly, a <code>reinterpret_cast&lt;double*&gt;</code> like this causes undefined behaviour because of type aliasing, and using <code>memcpy</code> or a float/double <code>union</code> is not possible without copying the data and allocating extra space, which defeats the purpose and happens to be costly in my case (and using a union for type punning is not allowed in C++).</p>\n\n<p>It can be assumed the float buffer is correctly aligned for using it for doubles.</p>\n"}, {"tags": ["c++", "matlab", "c++11", "mex", "eigen3"], "comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1531327568, "post_id": 51289296, "comment_id": 89558898, "body": "&quot;how can I free the space that is allocated to the sparse matrix Q in my C++ code?&quot; If you didn&#39;t directly call <code>malloc</code> or <code>calloc</code> or <code>new</code>, you don&#39;t need to delete anything explicitly. The Eigen matrices free their own memory, and whatever you allocate with <code>mxMalloc</code> or <code>mxCalloc</code> is also automatically freed at the end of your MEX-file."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 2, "creation_date": 1531337575, "post_id": 51289296, "comment_id": 89563522, "body": "Could you try <code>Eigen::BiCGSTAB&lt;MatlabSparse&gt;</code> instead of <code>Eigen::BiCGSTAB&lt;Eigen::SparseMatrix&lt;double&gt; &gt;</code> ?"}, {"owner": {"reputation": 35, "user_id": 4071481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494350380027afe6ae3dfc61c7b77852?s=128&d=identicon&r=PG&f=1", "display_name": "Bayes", "link": "https://stackoverflow.com/users/4071481/bayes"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1531337924, "post_id": 51289296, "comment_id": 89563693, "body": "@CrisLuengo: I see. Thanks for letting me."}, {"owner": {"reputation": 35, "user_id": 4071481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494350380027afe6ae3dfc61c7b77852?s=128&d=identicon&r=PG&f=1", "display_name": "Bayes", "link": "https://stackoverflow.com/users/4071481/bayes"}, "reply_to_user": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1531337966, "post_id": 51289296, "comment_id": 89563714, "body": "@chtz: It works now as you mentioned. Thank you very much."}], "owner": {"reputation": 35, "user_id": 4071481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494350380027afe6ae3dfc61c7b77852?s=128&d=identicon&r=PG&f=1", "display_name": "Bayes", "link": "https://stackoverflow.com/users/4071481/bayes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531323531, "creation_date": 1531323035, "last_edit_date": 1531323531, "question_id": 51289296, "link": "https://stackoverflow.com/questions/51289296/using-iterative-solver-from-eigen-in-c-mex-function", "title": "Using iterative solver from Eigen in C++ mex function", "body": "<p>I would like to use the iterative solver <strong>BiCGSTAB</strong> from Eigen in a C++ mex function to compute the diagonal elements of B'*Q^(-1)*B for N-by-n dense matrix B and N-by-N sparse matrix Q, but I got errors when I compile my C++ mex code. If I use the solver <strong>SimplicialLLT</strong>, I can compile my C++ mex code without any errors.  BTW, the code that converts a MATLAB sparse matrix to Eigen sparse matrix is copied from <a href=\"https://stackoverflow.com/questions/49952275/passing-sparse-arrays-from-matlab-to-eigen-c-and-back-to-matlab?noredirect=1&amp;lq=1\">stackoverflow</a>.</p>\n\n<p>Another minor problem is that how can I free the space that is allocated to the sparse matrix Q in my C++ code? </p>\n\n<p>I am new to the Eigen library. Any suggestion to fix my problem will be appreciated. </p>\n\n<p>Thank you in advance </p>\n\n<p>The C++ mex code is:</p>\n\n<pre><code>#include \"mex.h\"\n#include \"matrix.h\"\n#include &lt;Eigen&gt;\n#include &lt;type_traits&gt;\n#include &lt;limits&gt;\n\ntypedef Eigen::SparseMatrix&lt;double,Eigen::ColMajor,std::make_signed&lt;mwIndex&gt;::type&gt; MatlabSparse;\n\nEigen::Map&lt;MatlabSparse &gt; matlab_to_eigen_sparse(const mxArray * mat)\n{\n    mxAssert(mxGetClassID(mat) == mxDOUBLE_CLASS,\n    \"Type of the input matrix isn't double\");\n    mwSize     m = mxGetM(mat);\n    mwSize     n = mxGetN(mat);\n    mwSize    nz = mxGetNzmax(mat);\n    /*Theoretically fails in very very large matrices*/\n    mxAssert(nz &lt;= std::numeric_limits&lt; std::make_signed&lt;mwIndex&gt;::type&gt;::max(),\n    \"Unsupported Data size.\");\n    double  * pr = mxGetPr(mat);\n    MatlabSparse::StorageIndex* ir = reinterpret_cast&lt;MatlabSparse::StorageIndex*&gt;(mxGetIr (mat));\n    MatlabSparse::StorageIndex* jc = reinterpret_cast&lt;MatlabSparse::StorageIndex*&gt;(mxGetJc (mat));\n    Eigen::Map&lt;MatlabSparse&gt; result(m, n, nz, jc, ir, pr);\n    return result;\n}\n\nvoid mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])\n\n{\n\nif(!(mxIsSparse(prhs[0]))){\n    mexErrMsgIdAndTxt(\"MATLAB: \", \"First input matrix is not sparse.\\n\");\n}\n\nif((mxIsSparse(prhs[1]))){\n    mexErrMsgIdAndTxt(\"MATLAB: \", \"Second input matrix is not dense.\\n\");\n}\n\n\n\n\n// prhs[0]: Q\nEigen::Map&lt;MatlabSparse&gt; Q = matlab_to_eigen_sparse(prhs[0]);\nmwSize N = mxGetM(prhs[0]); // size of BAUs for constructing the GGM\n\n// prhs[1]: B (dense matrix)\nmwSize n = mxGetN(prhs[2]);\nEigen::Map&lt;Eigen::MatrixXd&gt; B(mxGetPr(prhs[5]), N, n);\n\n\n\n// Eigen::SimplicialLLT&lt;Eigen::SparseMatrix&lt;double&gt; &gt; Qsolver;\n// Qsolver.analyzePattern(Q);\n// Qsolver.factorize(Q);    \n\n  Eigen::BiCGSTAB&lt;Eigen::SparseMatrix&lt;double&gt; &gt; Qsolver;\n  //Eigen::ConjugateGradient&lt;Eigen::SparseMatrix&lt;double&gt;, Lower|Upper&gt; Qsolver;\n  Qsolver.analyzePattern(Q);\n  Qsolver.factorize(Q);\n\n\n// intermidiate variables\nEigen::VectorXd Qb(N), xsol(n);\nmwIndex i;\n//mexPrintf(\"\\n begin for-loop.\\n\");\n\n// compute diagonal elements of B'*Q^(-1)*B\nfor(i=0; i&lt;n; i++){\n    Qb = Qsolver.solve(B.col(i));\n    xsol(i) = B.col(i).dot(Qb);\n}\n\n//mexPrintf(\"\\n finish for-loop.\\n\");\n\ndouble* x = (double*) mxCalloc(n, sizeof(double));\nEigen::Map&lt;Eigen::MatrixXd&gt;(x, n, 1) = xsol;\n\n// set output\nplhs[0] = mxCreateDoubleMatrix(n, 1, mxREAL);\nmxSetPr(plhs[0], x);\n\n\nB.resize(0,0);\nQb.resize(0,0);\nxsol.resize(0,0);\n\n}\n</code></pre>\n\n<p>The error message is </p>\n\n<pre><code>&gt;&gt; mex -v test.cpp -I/usr/local/include/eigen3/Eigen\nVerbose mode is on.\n... Looking for compiler 'Xcode Clang++' ...\n... Looking for environment variable 'DEVELOPER_DIR' ...No.\n... Executing command 'xcode-select -print-path' ...Yes ('/Applications/Xcode.app/Contents/Developer').\n... Looking for folder '/Applications/Xcode.app/Contents/Developer' ...Yes.\n... Executing command 'which xcrun' ...Yes ('/usr/bin/xcrun').\n... Looking for folder '/usr/bin' ...Yes.\n... Executing command 'defaults read com.apple.dt.Xcode IDEXcodeVersionForAgreedToGMLicense' ...No.\n... Executing command 'defaults read /Library/Preferences/com.apple.dt.Xcode IDEXcodeVersionForAgreedToGMLicense' ...Yes ('9.2').\n... Executing command '\nagreed=9.2 \n if echo $agreed | grep -E '[\\.\\\"]' &gt;/dev/null; then \n lhs=`expr \"$agreed\" : '\\([0-9]*\\)[\\.].*'` \n  rhs=`expr \"$agreed\" : '[0-9]*[\\.]\\(.*\\)$'` \n if echo $rhs | grep -E '[\\.\"]' &gt;/dev/null; then \n rhs=`expr \"$rhs\" : '\\([0-9]*\\)[\\.].*'` \n fi \n if [ $lhs -gt 4 ] || ( [ $lhs -eq 4 ] &amp;&amp; [ $rhs -ge 3 ] ); then \n echo $agreed \n else \n exit 1\n fi \n fi' ...Yes ('9.2').\n... Executing command 'xcrun -sdk macosx --show-sdk-path' ...Yes ('/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk').\n... Executing command 'xcrun -sdk macosx --show-sdk-version' ...Yes ('10.13').\n... Executing command 'clang --version | grep -Eo '[0-9]+\\.[0-9]+\\.[0-9]'|head -1' ...Yes ('9.1.0').\nFound installed compiler 'Xcode Clang++'.\nSet INCLUDE = /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1;/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/9.1.0/include;/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks;/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1;/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/9.1.0/include;/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks;\nOptions file details\n-------------------------------------------------------------------\n    Compiler location: /Applications/Xcode.app/Contents/Developer\n    Options file: /Users/someone/Library/Application Support/MathWorks/MATLAB/R2018a/mex_C++_maci64.xml\n    CMDLINE200 : /usr/bin/xcrun -sdk macosx10.13 clang++ -Wl,-twolevel_namespace -undefined error -arch x86_64 -mmacosx-version-min=10.9 -Wl,-syslibroot,/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk -framework Cocoa -bundle  -stdlib=libc++ -O -Wl,-exported_symbols_list,\"/Applications/MATLAB_R2018a.app/extern/lib/maci64/mexFunction.map\" -Wl,-exported_symbols_list,\"/Applications/MATLAB_R2018a.app/extern/lib/maci64/c_exportsmexfileversion.map\" -Wl,-U,_mexCreateMexFunction -Wl,-U,_mexDestroyMexFunction -Wl,-U,_mexFunctionAdapter -Wl,-exported_symbols_list,\"/Applications/MATLAB_R2018a.app/extern/lib/maci64/cppMexFunction.map\" /var/folders/_k/ckfbbmb51nz6bptcpb68qftm0000gn/T/mex_1610382819375744_28449/test.o /var/folders/_k/ckfbbmb51nz6bptcpb68qftm0000gn/T/mex_1610382819375744_28449/cpp_mexapi_version.o   -L\"/Applications/MATLAB_R2018a.app/bin/maci64\" -lmx -lmex -lmat -L\"/Applications/MATLAB_R2018a.app/extern/bin/maci64\" -lMatlabDataArray -lMatlabEngine -o test.mexmaci64\n    CC : /usr/bin/xcrun -sdk macosx10.13 clang\n    CXX : /usr/bin/xcrun -sdk macosx10.13 clang++\n    DEFINES : -DMATLAB_DEFAULT_RELEASE=R2017b  -DUSE_MEX_CMD   -DMATLAB_MEX_FILE \n    MATLABMEX : -DMATLAB_MEX_FILE \n    MACOSX_DEPLOYMENT_TARGET : 10.9\n    CFLAGS : -fno-common -arch x86_64 -mmacosx-version-min=10.9 -fexceptions -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk\n    CXXFLAGS : -fno-common -arch x86_64 -mmacosx-version-min=10.9 -fexceptions -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk -fobjc-arc -std=c++11 -stdlib=libc++\n    INCLUDE : -I\"/usr/local/include/eigen3/Eigen\"  -I\"/Applications/MATLAB_R2018a.app/extern/include\" -I\"/Applications/MATLAB_R2018a.app/simulink/include\"\n    CXXOPTIMFLAGS : -O2 -fwrapv -DNDEBUG\n    CXXDEBUGFLAGS : -g\n    LD : /usr/bin/xcrun -sdk macosx10.13 clang\n    LDXX : /usr/bin/xcrun -sdk macosx10.13 clang++\n    LDFLAGS : -Wl,-twolevel_namespace -undefined error -arch x86_64 -mmacosx-version-min=10.9 -Wl,-syslibroot,/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk -framework Cocoa -bundle  -stdlib=libc++\n    LDBUNDLE : -bundle \n    LINKEXPORT : -Wl,-exported_symbols_list,\"/Applications/MATLAB_R2018a.app/extern/lib/maci64/mexFunction.map\"\n    LINKEXPORTVER : -Wl,-exported_symbols_list,\"/Applications/MATLAB_R2018a.app/extern/lib/maci64/c_exportsmexfileversion.map\"\n    LINKEXPORTCPP : -Wl,-U,_mexCreateMexFunction -Wl,-U,_mexDestroyMexFunction -Wl,-U,_mexFunctionAdapter -Wl,-exported_symbols_list,\"/Applications/MATLAB_R2018a.app/extern/lib/maci64/cppMexFunction.map\"\n    LINKLIBS : -L\"/Applications/MATLAB_R2018a.app/bin/maci64\" -lmx -lmex -lmat -L\"/Applications/MATLAB_R2018a.app/extern/bin/maci64\" -lMatlabDataArray -lMatlabEngine\n    LDOPTIMFLAGS : -O\n    LDDEBUGFLAGS : -g\n    OBJEXT : .o\n    LDEXT : .mexmaci64\n    SETENV : CC=\"/usr/bin/xcrun -sdk macosx10.13 clang\"\n                CXX=\"/usr/bin/xcrun -sdk macosx10.13 clang++\"\n                CFLAGS=\"-fno-common -arch x86_64 -mmacosx-version-min=10.9 -fexceptions -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk -DMATLAB_DEFAULT_RELEASE=R2017b  -DUSE_MEX_CMD   -DMATLAB_MEX_FILE \"\n                CXXFLAGS=\"-fno-common -arch x86_64 -mmacosx-version-min=10.9 -fexceptions -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk -fobjc-arc -std=c++11 -stdlib=libc++ -DMATLAB_DEFAULT_RELEASE=R2017b  -DUSE_MEX_CMD   -DMATLAB_MEX_FILE \"\n                COPTIMFLAGS=\"-O2 -fwrapv -DNDEBUG\"\n                CXXOPTIMFLAGS=\"-O2 -fwrapv -DNDEBUG\"\n                CDEBUGFLAGS=\"-g\"\n                CXXDEBUGFLAGS=\"-g\"\n                LD=\"/usr/bin/xcrun -sdk macosx10.13 clang\"\n                LDXX=\"/usr/bin/xcrun -sdk macosx10.13 clang++\"\n                LDFLAGS=\"-Wl,-twolevel_namespace -undefined error -arch x86_64 -mmacosx-version-min=10.9 -Wl,-syslibroot,/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk -framework Cocoa -bundle  -stdlib=libc++ -L\"/Applications/MATLAB_R2018a.app/bin/maci64\" -lmx -lmex -lmat -L\"/Applications/MATLAB_R2018a.app/extern/bin/maci64\" -lMatlabDataArray -lMatlabEngine -Wl,-exported_symbols_list,\"/Applications/MATLAB_R2018a.app/extern/lib/maci64/mexFunction.map\"\"\n                LDDEBUGFLAGS=\"-g\"\n    DEVELOPER_DIR_CHECK : \n    XCODE_DIR : /Applications/Xcode.app/Contents/Developer\n    XCRUN_DIR : /usr/bin\n    XCODE_AGREED_VERSION : 9.2\n    ISYSROOT : /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk\n    SDKVER : 10.13\n    CLANG_VERSION : 9.1.0\n    MATLABROOT : /Applications/MATLAB_R2018a.app\n    ARCH : maci64\n    SRC : \"/Users/someone/code/test.cpp\";\"/Applications/MATLAB_R2018a.app/extern/version/cpp_mexapi_version.cpp\"\n    OBJ : /var/folders/_k/ckfbbmb51nz6bptcpb68qftm0000gn/T/mex_1610382819375744_28449/test.o;/var/folders/_k/ckfbbmb51nz6bptcpb68qftm0000gn/T/mex_1610382819375744_28449/cpp_mexapi_version.o\n    OBJS : /var/folders/_k/ckfbbmb51nz6bptcpb68qftm0000gn/T/mex_1610382819375744_28449/test.o /var/folders/_k/ckfbbmb51nz6bptcpb68qftm0000gn/T/mex_1610382819375744_28449/cpp_mexapi_version.o \n    SRCROOT : /Users/someone/code/test\n    DEF : /var/folders/_k/ckfbbmb51nz6bptcpb68qftm0000gn/T/mex_1610382819375744_28449/test.def\n    EXP : \"test.exp\"\n    LIB : \"test.lib\"\n    EXE : test.mexmaci64\n    ILK : \"test.ilk\"\n    MANIFEST : \"test.mexmaci64.manifest\"\n    TEMPNAME : test\n    EXEDIR : \n    EXENAME : test\n    OPTIM : -O2 -fwrapv -DNDEBUG\n    LINKOPTIM : -O\n    CMDLINE100_0 : /usr/bin/xcrun -sdk macosx10.13 clang++ -c -DMATLAB_DEFAULT_RELEASE=R2017b  -DUSE_MEX_CMD   -DMATLAB_MEX_FILE  -I\"/usr/local/include/eigen3/Eigen\"  -I\"/Applications/MATLAB_R2018a.app/extern/include\" -I\"/Applications/MATLAB_R2018a.app/simulink/include\" -fno-common -arch x86_64 -mmacosx-version-min=10.9 -fexceptions -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk -fobjc-arc -std=c++11 -stdlib=libc++ -O2 -fwrapv -DNDEBUG \"/Users/mapulong/GoogleDrive/MATLAB/MODIS/code/STFGP/test.cpp\" -o /var/folders/_k/ckfbbmb51nz6bptcpb68qftm0000gn/T/mex_1610382819375744_28449/test.o\n    CMDLINE100_1 : /usr/bin/xcrun -sdk macosx10.13 clang++ -c -DMATLAB_DEFAULT_RELEASE=R2017b  -DUSE_MEX_CMD   -DMATLAB_MEX_FILE  -I\"/usr/local/include/eigen3/Eigen\"  -I\"/Applications/MATLAB_R2018a.app/extern/include\" -I\"/Applications/MATLAB_R2018a.app/simulink/include\" -fno-common -arch x86_64 -mmacosx-version-min=10.9 -fexceptions -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk -fobjc-arc -std=c++11 -stdlib=libc++ -O2 -fwrapv -DNDEBUG \"/Applications/MATLAB_R2018a.app/extern/version/cpp_mexapi_version.cpp\" -o /var/folders/_k/ckfbbmb51nz6bptcpb68qftm0000gn/T/mex_1610382819375744_28449/cpp_mexapi_version.o\n-------------------------------------------------------------------\nBuilding with 'Xcode Clang++'.\n/usr/bin/xcrun -sdk macosx10.13 clang++ -c -DMATLAB_DEFAULT_RELEASE=R2017b  -DUSE_MEX_CMD   -DMATLAB_MEX_FILE  -I\"/usr/local/include/eigen3/Eigen\"  -I\"/Applications/MATLAB_R2018a.app/extern/include\" -I\"/Applications/MATLAB_R2018a.app/simulink/include\" -fno-common -arch x86_64 -mmacosx-version-min=10.9 -fexceptions -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk -fobjc-arc -std=c++11 -stdlib=libc++ -O2 -fwrapv -DNDEBUG \"/Users/mapulong/GoogleDrive/MATLAB/MODIS/code/STFGP/test.cpp\" -o /var/folders/_k/ckfbbmb51nz6bptcpb68qftm0000gn/T/mex_1610382819375744_28449/test.o\nError using mex\nIn file included from /Users/someone/code/test.cpp:8:\nIn file included from /usr/local/include/eigen3/Eigen/Eigen:2:\nIn file included from /usr/local/include/eigen3/Eigen/Sparse:26:\nIn file included from /usr/local/include/eigen3/Eigen/SparseCore:46:\n/usr/local/include/eigen3/Eigen/src/SparseCore/SparseRef.h:101:40: error: no matching\nconstructor for initialization of 'Eigen::internal::SparseRefBase&lt;Eigen::Ref&lt;const\nEigen::SparseMatrix&lt;double, 0, int&gt;, 0, Eigen::OuterStride&lt;-1&gt; &gt; &gt;::Base' (aka\n'SparseMapBase&lt;Eigen::Ref&lt;const Eigen::SparseMatrix&lt;double, 0, int&gt;, 0,\nEigen::OuterStride&lt;-1&gt; &gt; &gt;')\n      ::new (static_cast&lt;Base*&gt;(this)) Base(expr.size(), expr.nonZeros(),\n      expr.innerIndexPtr(), expr.valuePtr());\n                                       ^\n                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n                                       /usr/local/include/eigen3/Eigen/src/SparseCore/SparseRef.h:223:15:\n                                       note: in instantiation of function template\n                                       specialization\n                                       'Eigen::internal::SparseRefBase&lt;Eigen::Ref&lt;const\n                                       Eigen::SparseMatrix&lt;double, 0, int&gt;, 0,\n                                       Eigen::OuterStride&lt;-1&gt; &gt; &gt;::construct&lt;const\n                                       Eigen::Map&lt;Eigen::SparseMatrix&lt;double, 0, long&gt;,\n                                       0, Eigen::Stride&lt;0, 0&gt; &gt; &gt;' requested here\n        Base::construct(expr);\n              ^\n/usr/local/include/eigen3/Eigen/src/SparseCore/SparseRef.h:190:7: note: in\ninstantiation of function template specialization 'Eigen::Ref&lt;const\nEigen::SparseMatrix&lt;double, 0, int&gt;, 0, Eigen::OuterStride&lt;-1&gt;\n&gt;::construct&lt;Eigen::Map&lt;Eigen::SparseMatrix&lt;double, 0, long&gt;, 0, Eigen::Stride&lt;0, 0&gt; &gt;\n&gt;' requested here\n      construct(expr.derived(), typename Traits::template match&lt;Derived&gt;::type());\n      ^\n/usr/local/include/eigen3/Eigen/src/IterativeLinearSolvers/IterativeSolverBase.h:81:23:\nnote: in instantiation of function template specialization 'Eigen::Ref&lt;const\nEigen::SparseMatrix&lt;double, 0, int&gt;, 0, Eigen::OuterStride&lt;-1&gt;\n&gt;::Ref&lt;Eigen::Map&lt;Eigen::SparseMatrix&lt;double, 0, long&gt;, 0, Eigen::Stride&lt;0, 0&gt; &gt; &gt;'\nrequested here\n    ::new (&amp;m_matrix) Ref&lt;const MatrixType&gt;(mat.derived());\n                      ^\n/usr/local/include/eigen3/Eigen/src/IterativeLinearSolvers/IterativeSolverBase.h:377:21:\nnote: in instantiation of function template specialization\n'Eigen::internal::generic_matrix_wrapper&lt;Eigen::SparseMatrix&lt;double, 0, int&gt;,\nfalse&gt;::grab&lt;Eigen::Map&lt;Eigen::SparseMatrix&lt;double, 0, long&gt;, 0, Eigen::Stride&lt;0, 0&gt; &gt;\n&gt;' requested here\n    m_matrixWrapper.grab(A);\n                    ^\n/usr/local/include/eigen3/Eigen/src/IterativeLinearSolvers/IterativeSolverBase.h:199:5:\nnote: in instantiation of function template specialization\n'Eigen::IterativeSolverBase&lt;Eigen::BiCGSTAB&lt;Eigen::SparseMatrix&lt;double, 0, int&gt;,\nEigen::DiagonalPreconditioner&lt;double&gt; &gt; &gt;::grab&lt;Eigen::Map&lt;Eigen::SparseMatrix&lt;double,\n0, long&gt;, 0, Eigen::Stride&lt;0, 0&gt; &gt; &gt;' requested here\n    grab(A.derived());\n    ^\n/Users/someone/code/test.cpp:64:15: note: in\ninstantiation of function template specialization\n'Eigen::IterativeSolverBase&lt;Eigen::BiCGSTAB&lt;Eigen::SparseMatrix&lt;double, 0, int&gt;,\nEigen::DiagonalPreconditioner&lt;double&gt; &gt;\n&gt;::analyzePattern&lt;Eigen::Map&lt;Eigen::SparseMatrix&lt;double, 0, long&gt;, 0, Eigen::Stride&lt;0,\n0&gt; &gt; &gt;' requested here\n      Qsolver.analyzePattern(Q);\n              ^\n/usr/local/include/eigen3/Eigen/src/SparseCore/SparseMap.h:131:12: note: candidate\nconstructor not viable: no known conversion from 'const\nEigen::SparseMapBase&lt;Eigen::Map&lt;Eigen::SparseMatrix&lt;double, 0, long&gt;, 0,\nEigen::Stride&lt;0, 0&gt; &gt;, 0&gt;::StorageIndex *' (aka 'const long *') to\n'Eigen::SparseMapBase&lt;Eigen::Ref&lt;const Eigen::SparseMatrix&lt;double, 0, int&gt;, 0,\nEigen::OuterStride&lt;-1&gt; &gt;, 0&gt;::IndexPointer' (aka 'const int *') for 3rd argument\n    inline SparseMapBase(Index size, Index nnz, IndexPointer innerIndexPtr,\n    ScalarPointer valuePtr)\n           ^\n/usr/local/include/eigen3/Eigen/src/SparseCore/SparseMap.h:50:7: note: candidate\nconstructor (the implicit copy constructor) not viable: requires 1 argument, but 4 were\nprovided\nclass SparseMapBase&lt;Derived,ReadOnlyAccessors&gt;\n      ^\n/usr/local/include/eigen3/Eigen/src/SparseCore/SparseMap.h:124:12: note: candidate\nconstructor not viable: requires at least 6 arguments, but 4 were provided\n    inline SparseMapBase(Index rows, Index cols, Index nnz, IndexPointer outerIndexPtr,\n    IndexPointer innerIndexPtr,\n           ^\n/usr/local/include/eigen3/Eigen/src/SparseCore/SparseMap.h:140:12: note: candidate\nconstructor not viable: requires 0 arguments, but 4 were provided\n    inline SparseMapBase() {}\n           ^\n1 error generated.\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 2, "creation_date": 1531323067, "post_id": 51289273, "comment_id": 89556463, "body": "did you try debugging? please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 3, "user_id": 9812757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f759a40d2d433058a795129dfac23fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/9812757/steve"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1531323231, "post_id": 51289273, "comment_id": 89556555, "body": "I have update function code but full code need to be checked to understand issue which is in my git repo."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1531323404, "post_id": 51289273, "comment_id": 89556630, "body": "presumably <code>pos_init - pos_decrypted</code> is a large number? Debugging it will tell you."}, {"owner": {"reputation": 3306, "user_id": 1951463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZ8Ii.jpg?s=128&g=1", "display_name": "Terry Carmen", "link": "https://stackoverflow.com/users/1951463/terry-carmen"}, "edited": false, "score": 1, "creation_date": 1531328282, "post_id": 51289273, "comment_id": 89559208, "body": "If you want help, you need to produce the smallest possible chunk of code that will reproduce the issue and post it here."}], "owner": {"reputation": 3, "user_id": 9812757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f759a40d2d433058a795129dfac23fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/9812757/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1531323188, "creation_date": 1531322971, "last_edit_date": 1531323188, "question_id": 51289273, "link": "https://stackoverflow.com/questions/51289273/decryption-error-in-c-program", "title": "Decryption error in c++ program", "body": "<p>I have created a program which decrypts tracks using bento4 but I am stuck at writing file to disk. The program crashes when writing decrypted tracks, because the size of the encrypted and decrypted samples are not the same.</p>\n\n<p>The problem is in main.cpp in FragmentedSampleReader::ReadSample() after this comment :\n// Write initialisation &amp; data into decrypted file.</p>\n\n<pre><code>AP4_Result FragmentedSampleReader::ReadSample()\n{\n    AP4_Position pos_init, pos_after_sample;\n    m_FragmentStream-&gt;Tell(pos_init);\n\n    AP4_Result result;\n    if (!m_codecHandler || !m_codecHandler-&gt;ReadNextSample(m_sample, m_sampleData))\n    {\n        bool useDecryptingDecoder = m_protectedDesc &amp;&amp; (m_decrypterCaps.flags &amp; SSD::SSD_DECRYPTER::SSD_CAPS::SSD_SECURE_PATH) != 0;\n        bool decrypterPresent(m_decrypter != nullptr);\n\n        if (AP4_FAILED(result = ReadNextSample(m_track-&gt;GetId(), m_sample, (m_decrypter || useDecryptingDecoder) ? m_encrypted : m_sampleData)))\n        {\n            if (result == AP4_ERROR_EOS)\n            {\n                if (dynamic_cast&lt;AP4_DASHStream*&gt;(m_FragmentStream)-&gt;waitingForSegment())\n                    m_sampleData.SetDataSize(0);\n                else\n                    m_eos = true;\n            }\n            return result;\n        }\n\n        //Protection could have changed in ProcessMoof\n        if (!decrypterPresent &amp;&amp; m_decrypter != nullptr &amp;&amp; !useDecryptingDecoder)\n            m_encrypted.SetData(m_sampleData.GetData(), m_sampleData.GetDataSize());\n        else if (decrypterPresent &amp;&amp; m_decrypter == nullptr &amp;&amp; !useDecryptingDecoder)\n            m_sampleData.SetData(m_encrypted.GetData(), m_encrypted.GetDataSize());\n\n        // Make sure that the decrypter is NOT allocating memory!\n        // If decrypter and addon are compiled with different DEBUG / RELEASE\n        // options freeing HEAP memory will fail.\n        if (m_decrypter)\n        {\n            m_sampleData.Reserve(m_encrypted.GetDataSize() + 4096);\n            result = m_decrypter-&gt;DecryptSampleData(m_poolId, m_encrypted, m_sampleData, NULL);\n        }\n        else if (useDecryptingDecoder)\n        {\n            m_sampleData.Reserve(m_encrypted.GetDataSize() + 1024);\n            result = m_singleSampleDecryptor-&gt;DecryptSampleData(m_poolId, m_encrypted, m_sampleData, nullptr, 0, nullptr, nullptr);\n        }\n    }\n\n\n    // Write initialisation &amp; data into decrypted file\n    std::vector&lt;char&gt; buffer;\n    int pos_decrypted = file_decrypted_data.tellp();\n    if(pos_decrypted &lt; pos_init)\n    {\n        buffer.reserve(pos_init - pos_decrypted);\n        file_fragment.seekg(pos_decrypted, std::ios::beg);\n        file_fragment.read(buffer.data(), pos_init - pos_decrypted);\n        file_decrypted_data.write(buffer.data(), pos_init - pos_decrypted);\n    }\n\n    m_FragmentStream-&gt;Tell(pos_after_sample);\n    int metadata_length = pos_after_sample - m_sampleData.GetDataSize() - pos_init;\n\n    buffer.reserve(metadata_length);\n    file_fragment.seekg(pos_init, std::ios::beg);\n    file_fragment.read(buffer.data(), metadata_length);\n\n    file_decrypted_data.write(buffer.data(), metadata_length);\n    file_decrypted_data.write((const char*)m_sampleData.GetData(), m_sampleData.GetDataSize());\n\n    return result;\n};\n</code></pre>\n\n<p>I have a official git repo : <a href=\"https://github.com/x-hgg-x/video_decrypter\" rel=\"nofollow noreferrer\">https://github.com/x-hgg-x/video_decrypter</a></p>\n\n<p>It gives me below error.</p>\n\n<pre><code>std::bad_alloc error \n</code></pre>\n"}, {"tags": ["c++", "c++11", "bad-alloc"], "comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1531334881, "post_id": 51289157, "comment_id": 89562314, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/174834/discussion-on-question-by-andy-n-bad-alloc-thrown-on-brute-force-task\">moved to chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 9926394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVY6g.jpg?s=128&g=1", "display_name": "Andy N.", "link": "https://stackoverflow.com/users/9926394/andy-n"}, "edited": false, "score": 0, "creation_date": 1531324943, "post_id": 51289826, "comment_id": 89557540, "body": "I edited this to quo &gt; 0 and it does not have any effect"}, {"owner": {"reputation": 67, "user_id": 9926394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVY6g.jpg?s=128&g=1", "display_name": "Andy N.", "link": "https://stackoverflow.com/users/9926394/andy-n"}, "edited": false, "score": 0, "creation_date": 1531325732, "post_id": 51289826, "comment_id": 89557917, "body": "I changed it to quo &gt; 0 instead of quo &gt;= 0, do you know why my program is outputting an enourmous list of integers?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 67, "user_id": 9926394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVY6g.jpg?s=128&g=1", "display_name": "Andy N.", "link": "https://stackoverflow.com/users/9926394/andy-n"}, "edited": false, "score": 0, "creation_date": 1531332605, "post_id": 51289826, "comment_id": 89561281, "body": "@AndyN. Have you had a look at your loops? <code>for (int j = n + 1; j &lt;= 10000; j++) for (int i = 0; i &lt; n; i++) for (int k = 2; k &lt;= 10; k++)</code> - how many iterations do you expect, especially if n is small, lets say 7..."}, {"owner": {"reputation": 67, "user_id": 9926394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVY6g.jpg?s=128&g=1", "display_name": "Andy N.", "link": "https://stackoverflow.com/users/9926394/andy-n"}, "edited": false, "score": 0, "creation_date": 1531334341, "post_id": 51289826, "comment_id": 89562044, "body": "I updated my code, it still does not work... it outputs empty file"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 67, "user_id": 9926394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVY6g.jpg?s=128&g=1", "display_name": "Andy N.", "link": "https://stackoverflow.com/users/9926394/andy-n"}, "edited": false, "score": 0, "creation_date": 1531369417, "post_id": 51289826, "comment_id": 89571674, "body": "@AndyN. Sure it does - you never write anything to the file, only to console... change all occurences of <code>cout</code>/<code>std::cout</code> to <code>fout</code>, which is the file you opened; if you want to have output on both file <i>and</i> console, you need to write twice, both to <code>std::cout</code> <i>and</i> <code>fout</code>..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 67, "user_id": 9926394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVY6g.jpg?s=128&g=1", "display_name": "Andy N.", "link": "https://stackoverflow.com/users/9926394/andy-n"}, "edited": false, "score": 1, "creation_date": 1531370304, "post_id": 51289826, "comment_id": 89571918, "body": "Side note: you are editing away the original problems in the question (cause of <code>bad_alloc</code> thrown, then bad conversion, then too much loop output). This way you make all the answers given so far obsolete, and in your case, the problem doesn&#39;t even match the title... In general, it is better to ask new questions with updated code, possibly marking it as follow up of the original question by providing a link to. At least, you should leave the old code and make the edits clearly visible (similar as I did). However, if multiple people answer, whom do you reward for then?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 67, "user_id": 9926394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVY6g.jpg?s=128&g=1", "display_name": "Andy N.", "link": "https://stackoverflow.com/users/9926394/andy-n"}, "edited": false, "score": 0, "creation_date": 1531419363, "post_id": 51289826, "comment_id": 89600876, "body": "@AndyN. Look at your posted code. Where do you actually write <i>anything</i> to <code>fout</code> ???"}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1531333354, "last_edit_date": 1531333354, "creation_date": 1531324738, "answer_id": 51289826, "question_id": 51289157, "link": "https://stackoverflow.com/questions/51289157/bad-alloc-thrown-on-brute-force-task/51289826#51289826", "title": "bad_alloc thrown on brute force task", "body": "<p>Problem is the following line:</p>\n\n<pre><code>while (quo &gt;= 0)\n</code></pre>\n\n<p>What is the result of <code>x/y</code>, if <code>x &lt; y</code>? Especially, what is the result of <code>0/x</code>? Guess, the result is always 0, so the <code>==</code> part in your condition will always be true, resulting in an endless loop adding <code>'0'</code> again and again until no more memory is left... So just check for  <code>&gt; 0</code> instead.</p>\n\n<p>Side note: You don't need the <code>quo</code> variable anyway:</p>\n\n<pre><code>while(num)\n{\n    int rem = num % base;\n\n    // OK, this won't do the trick; you try to append an integer,\n    // but need a character instead!\n    //to_reverse += rem;\n\n    // if base always is smaller than or equal to 10 anyway,\n    // you can just do:\n    to_reverse += char('0' + rem);\n\n    // if you want to support arbitrary bases even greater, you can do instead:\n    to_reverse += \"0123456789abcdefghijklmnopqrstuvwxyz\"[rem];\n    // (or capital letters, if you prefer)\n\n    num /= base;\n}\n// and now don't reverse here - you are just interested in if the\n// string is palindrome, not in correct number representation...\n</code></pre>\n\n<p>By the way: Checking for being palindrome can be done more efficiently (avoiding the copy):</p>\n\n<pre><code>if(!s.empty())\n{\n    auto l = s.begin();\n    auto r = std::prev(s.end());\n    while(l &lt; r)\n    {\n        if(*l != *r)\n        {\n            return false;\n        }\n        ++l;\n        --r;\n    }\n}\nreturn true;\n</code></pre>\n\n<p><em>Edit in response to question:</em></p>\n\n<blockquote>\n  <p>I changed it to quo > 0 instead of quo >= 0, do you know why my program is outputting an enormous list of integers?</p>\n</blockquote>\n\n<pre><code>for (int j = n + 1; j &lt;= 10000; j++)\n    for (int i = 0; i &lt; n; i++)\n        for (int k = 2; k &lt;= 10; k++)\n</code></pre>\n\n<p>You have created an enormous number of iterations: (10000 - n) * n * 9 and you'll likely get quite a number of palindromes from...</p>\n\n<p>You might rather want something like this:</p>\n\n<pre><code>while(n &amp;&amp; start &lt; 10000)\n{\n    for(int base = 2; base &lt;= 10; ++base)\n    {\n        if(palindrome(start, base))\n        {\n            --n;\n        }\n    }\n    ++start;\n}\n</code></pre>\n\n<p>OK, above is not precise, you can get some values more than required from the inner loop, leaving it to you to fix...</p>\n"}], "owner": {"reputation": 67, "user_id": 9926394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVY6g.jpg?s=128&g=1", "display_name": "Andy N.", "link": "https://stackoverflow.com/users/9926394/andy-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1531334361, "creation_date": 1531322584, "last_edit_date": 1531334361, "question_id": 51289157, "link": "https://stackoverflow.com/questions/51289157/bad-alloc-thrown-on-brute-force-task", "title": "bad_alloc thrown on brute force task", "body": "<p>My program below throws bad_alloc, on a brute force task. I believe that it is being caused by something within my functions, but I cannot find out what is causing it. Could somebody please help me find what is causing this error? The problem statement is below, and then my code is below that.</p>\n\n<p><strong>PROBLEM STATEMENT</strong>\nWrite a program that reads two numbers (expressed in base 10):\nN (1 &lt;= N &lt;= 15)\nS (0 &lt; S &lt; 10000)\nand then finds and prints (in base 10) the first N numbers strictly greater than S that are palindromic when written in two or more number bases (2 &lt;= base &lt;= 10).\nSolutions to this problem do not require manipulating integers larger than the standard 32 bits.</p>\n\n<p><strong>CODE</strong> </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nstring convert(int num, int base)\n{\n    int quo = 100000;\n    int rem = 0;\n    string to_reverse;\n    while (quo &gt; 0)\n    {\n        quo = num / base;\n        rem = num % base;\n        to_reverse += to_string(rem);\n        num /= base;\n    }\n    reverse(to_reverse.begin(), to_reverse.end());\n    return to_reverse;\n}\n\nbool is_pal(string conv_num)\n{\n    string reversed_conv_num = conv_num;\n    reverse(reversed_conv_num.begin(), reversed_conv_num.end());\n    if (reversed_conv_num == conv_num)\n    {\n        return true;\n    }\n\n    return false;\n}\n\nint main()\n{\n    ofstream fout(\"dualpal.out\");\n    ifstream fin(\"dualpal.in\");\n    int n, start;\n    cin &gt;&gt; n &gt;&gt; start;\n    vector&lt;int&gt; finals;\n    int times = 0;\n    for (int i = start + 1; i &lt;= 10000; i++)\n    {\n        if (times == n)\n        {\n            for (auto x : finals)\n            {\n                cout &lt;&lt; x &lt;&lt; \"\\n\";\n            }\n            break;\n        }\n        else\n        {\n            for (int j = 2; j &lt;= 10; j++)\n            {\n                if(is_pal(convert(i, j)) == true)\n                {\n                    times++;\n                    finals.push_back(i);\n                }\n            }\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost"], "answers": [{"tags": [], "owner": {"reputation": 2569, "user_id": 1922763, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75228956a9f2a90a98b473672b91d807?s=128&d=identicon&r=PG", "display_name": "Takatoshi Kondo", "link": "https://stackoverflow.com/users/1922763/takatoshi-kondo"}, "is_accepted": true, "score": 1, "last_activity_date": 1531368229, "creation_date": 1531368229, "answer_id": 51297126, "question_id": 51288962, "link": "https://stackoverflow.com/questions/51288962/cant-compile-boost-meta-state-machine-with-template-argument/51297126#51297126", "title": "Can&#39;t compile boost Meta State Machine with template argument", "body": "<p>When you define the transition table with the template state machine class, you can use functor front-end insted of <code>row</code>, <code>a_row</code>, and <code>g_row</code> familiy.</p>\n\n<p>See <a href=\"https://www.boost.org/doc/libs/1_67_0/libs/msm/doc/HTML/ch03s03.html\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_67_0/libs/msm/doc/HTML/ch03s03.html</a></p>\n\n<p>If you use the functor front-end, you don't need any care the sub class of <code>msm::front::state_machine_def</code> is a template or not.</p>\n\n<p>Here is the updated code based on yours:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;boost/msm/back/state_machine.hpp&gt;\n#include &lt;boost/msm/front/state_machine_def.hpp&gt;\n\n// include functor_row\n#include &lt;boost/msm/front/functor_row.hpp&gt;\n\nnamespace msm = boost::msm;\nnamespace msmf = msm::front;\nnamespace mpl = boost::mpl;\n\nstruct Event {};\n\n// broken one\n\nenum class Side : char\n{\n    Buy = 0, Sell = 1\n};\n\ntemplate &lt;Side side&gt;\nclass TSm_ : public msm::front::state_machine_def&lt;TSm_&lt;side&gt;&gt;\n{\npublic:\n    using Me = TSm_&lt;side&gt;;\n    using Base = msm::front::state_machine_def&lt;Me&gt;;\n    struct First : public msm::front::state&lt;&gt;\n    {};\n    using initial_state = First;\n    struct Second : public msm::front::state&lt;&gt;\n    {};\n\n    // Replace the member function trans() with the functor trans.\n    struct trans {\n            template &lt;class Fsm, class SourceState, class TargetState&gt;\n            void operator()(Event const&amp;, Fsm&amp;, SourceState&amp;, TargetState&amp;) const {\n            std::cout &lt;&lt; \"called\" &lt;&lt; std::endl;\n        }\n    };\n\n    struct transition_table : public mpl::vector&lt;\n                 //from     event    to      action,    guard\n        msmf::Row &lt;First,   Event,   Second, Me::trans, msmf::none &gt;\n        // This is functor front-end\n    &gt;\n    {};\n};\n\ntemplate &lt;Side side&gt;\nusing TSm = msm::back::state_machine&lt;TSm_&lt;side&gt;&gt;;\n\nint main() {\n    TSm&lt;Side::Buy&gt; sm;\n    sm.start();\n    sm.process_event(Event());\n}\n</code></pre>\n\n<p>Running demo: <a href=\"https://wandbox.org/permlink/e9Qoc2xW3TTGhsmu\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/e9Qoc2xW3TTGhsmu</a></p>\n"}], "owner": {"reputation": 505, "user_id": 3065592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60527c78c08542c8f4de56f9082e69d?s=128&d=identicon&r=PG&f=1", "display_name": "wtom", "link": "https://stackoverflow.com/users/3065592/wtom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 51297126, "answer_count": 1, "score": 1, "last_activity_date": 1535646003, "creation_date": 1531321950, "last_edit_date": 1592644375, "question_id": 51288962, "link": "https://stackoverflow.com/questions/51288962/cant-compile-boost-meta-state-machine-with-template-argument", "title": "Can&#39;t compile boost Meta State Machine with template argument", "body": "<p>Can't figure out which rule is violated in <em>TSm_</em>. <em>Sm_</em> is compiled, <em>TSm_</em> is not:</p>\n<blockquote>\n<p>error C2974: 'boost::mpl::vector': invalid template argument for 'T0',\ntype expected</p>\n<p>error C2974: 'boost::mpl::vector': invalid template argument for 'T3',\ntype expected</p>\n</blockquote>\n<p>The difference is <em>TSm_</em> is a template while <em>Sm_</em> is not.</p>\n<pre><code>#include &lt;boost/msm/back/state_machine.hpp&gt;\n#include &lt;boost/msm/front/state_machine_def.hpp&gt;\n\nnamespace msm = boost::msm;\nnamespace mpl = boost::mpl;\n\nstruct Event {};\n\nclass Sm_ : public msm::front::state_machine_def&lt;Sm_&gt;\n{\npublic:\n    using Me = Sm_;\n    struct First : public msm::front::state&lt;&gt;\n    {};\n    using initial_state = First;\n    struct Second : public msm::front::state&lt;&gt;\n    {};\n    void trans(const Event&amp; /*e*/)\n    {}\n    struct transition_table : public mpl::vector&lt;\n        a_row&lt;First, Event, Second, &amp;Me::trans&gt;\n    &gt;\n    {};\n};\n\nusing Sm = msm::back::state_machine&lt;Sm_&gt;;\n\n// broken one\n\nenum class Side : char\n{\n    Buy = 0, Sell = 1\n};\n\ntemplate &lt;Side side&gt;\nclass TSm_ : public msm::front::state_machine_def&lt;TSm_&lt;side&gt;&gt;\n{\npublic:\n    using Me = TSm_&lt;side&gt;;\n    using Base = msm::front::state_machine_def&lt;Me&gt;;\n    using Base::a_row;\n    struct First : public msm::front::state&lt;&gt;\n    {};\n    using initial_state = First;\n    struct Second : public msm::front::state&lt;&gt;\n    {};\n    void trans(const Event&amp; /*e*/)\n    {}\n    struct transition_table : public mpl::vector&lt;\n        a_row&lt;First, Event, Second, &amp;Me::trans&gt; // compilation is failed here\n    &gt;\n    {};\n};\n\ntemplate &lt;Side side&gt;\nusing TSm = msm::back::state_machine&lt;TSm_&lt;side&gt;&gt;;\n</code></pre>\n<p>Please help</p>\n<p><strong>Update</strong></p>\n<p>I found how to make it compiled: as a_row is not a type but template, its alias should be template too</p>\n<pre><code>struct Begin {};\n\ntemplate &lt;Side side&gt;\nclass TSm_ : public msm::front::state_machine_def&lt;TSm_&lt;side&gt;&gt;\n{\npublic:\n    //-----------------------------------------------------------------------------------------------------\n    using Me = TSm_&lt;side&gt;;\n    using Base = msm::front::state_machine_def&lt;Me&gt;;\n    template&lt;\n        typename T1\n        , class Event\n        , typename T2\n        , void (Me::*action)(Event const&amp;)\n    &gt;\n    using a_row = typename Base::a_row;\n    //-----------------------------------------------------------------------------------------------------\n    struct First : public msm::front::state&lt;&gt;\n    {};\n    //-----------------------------------------------------------------------------------------------------\n    using initial_state = First;\n    //-----------------------------------------------------------------------------------------------------\n    struct Second : public msm::front::state&lt;&gt;\n    {};\n    //-----------------------------------------------------------------------------------------------------\n    void trans(const Begin&amp; /*e*/)\n    {}\n    //-----------------------------------------------------------------------------------------------------\n    struct transition_table : public mpl::vector&lt;\n        a_row&lt;First, Begin, Second, &amp;Me::trans&gt;\n    &gt;\n    {};\n};\n</code></pre>\n<p>Is it right and is it this rule <a href=\"https://en.cppreference.com/w/cpp/language/type_alias\" rel=\"nofollow noreferrer\">2) An alias template is a template which, when specialized, is equivalent to the result of substituting the template arguments of the alias template for the template parameters in the type-id</a>?</p>\n"}, {"tags": ["c++", "templates", "template-specialization"], "comments": [{"owner": {"reputation": 425, "user_id": 2752364, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/411206d9ef7ae481f7eb35892a83803a?s=128&d=identicon&r=PG&f=1", "display_name": "A_K", "link": "https://stackoverflow.com/users/2752364/a-k"}, "edited": false, "score": 0, "creation_date": 1531322328, "post_id": 51288856, "comment_id": 89555997, "body": "In C++11 and newer, you don&#39;t need a const variable; you can use an expression (including function calls) that can be evaluated at compile-time and the &quot;constexpr&quot; keyword."}], "answers": [{"comments": [{"owner": {"reputation": 1736, "user_id": 130208, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4026093fcab95eb45ce347cf3f635fad?s=128&d=identicon&r=PG", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/130208/sandeep"}, "edited": false, "score": 0, "creation_date": 1531321851, "post_id": 51288912, "comment_id": 89555666, "body": "Obviously :). Thanks."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 7, "last_activity_date": 1531321887, "last_edit_date": 1531321887, "creation_date": 1531321789, "answer_id": 51288912, "question_id": 51288856, "link": "https://stackoverflow.com/questions/51288856/why-is-const-variable-necessary-for-template-specialization-over-constants/51288912#51288912", "title": "Why is const variable necessary for template specialization over constants", "body": "<p>Templates are a compile-time only thing. If you remove <code>const</code> then <code>x</code> is no longer a compile-time constant, and therefore can't be used for template arguments.</p>\n\n<p>Also note that <code>x</code> is only a compile-time constant because you define it as such, with the initialization.</p>\n"}], "owner": {"reputation": 1736, "user_id": 130208, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4026093fcab95eb45ce347cf3f635fad?s=128&d=identicon&r=PG", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/130208/sandeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531321887, "creation_date": 1531321622, "question_id": 51288856, "link": "https://stackoverflow.com/questions/51288856/why-is-const-variable-necessary-for-template-specialization-over-constants", "title": "Why is const variable necessary for template specialization over constants", "body": "<p>I am trying to understand constant template specialization. Consider following template function with one specialization: </p>\n\n<pre><code>enum class NodeType\n  {A, B, C};\n\ntemplate&lt;NodeType&gt;\nbool afunc()\n{\n  cout&lt;&lt;\"calling generic\"&lt;&lt;endl;\n}\n\ntemplate&lt;&gt;\nbool afunc&lt;NodeType::A&gt;()\n{\n cout&lt;&lt;\"calling specific\"&lt;&lt;endl;\n}\n</code></pre>\n\n<p>I am able to  invoke the specialized instance as follows:</p>\n\n<pre><code> const NodeType x = NodeType::A;\n\n  afunc&lt;x&gt;();\n</code></pre>\n\n<p>However, if i remove const then compiler complains about template/argument deduction failed. Why is the const necessary?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531323376, "post_id": 51288850, "comment_id": 89556613, "body": "Call it in a separate thread."}, {"owner": {"reputation": 17, "user_id": 8657356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1121259a74da4f4354bbd9856b9057?s=128&d=identicon&r=PG&f=1", "display_name": "ruth23454", "link": "https://stackoverflow.com/users/8657356/ruth23454"}, "edited": false, "score": 0, "creation_date": 1531324100, "post_id": 51288850, "comment_id": 89557037, "body": "Could you show me the example?"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1531637669, "post_id": 51288850, "comment_id": 89665018, "body": "Of creating a separate thread? Use <a href=\"https://en.cppreference.com/w/cpp/thread/thread\" rel=\"nofollow noreferrer\"><code>std::thread</code></a>."}], "owner": {"reputation": 17, "user_id": 8657356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1121259a74da4f4354bbd9856b9057?s=128&d=identicon&r=PG&f=1", "display_name": "ruth23454", "link": "https://stackoverflow.com/users/8657356/ruth23454"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "closed_date": 1531325031, "answer_count": 0, "score": 0, "last_activity_date": 1531324975, "creation_date": 1531321602, "last_edit_date": 1531324975, "question_id": 51288850, "link": "https://stackoverflow.com/questions/51288850/is-it-possible-to-call-icmpsendecho2-asynchronously", "closed_reason": "Duplicate", "title": "Is it possible to call IcmpSendEcho2 asynchronously?", "body": "<p>I would like to make a ping function using <code>IcmpSendEcho2()</code> (it shows correct ping) but the problem is when I call this function, my application freezes for several milliseconds. I learned that I have to call the function asynchronously, but the Microsoft guide doesn't provide a tutorial about that.</p>\n\n<p>I've been searching the Internet but I could not find a solution.</p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>unsigned long destAdress = inet_addr(\"164.132.205.2\");\nstatic PIO_APC_ROUTINE g_pfnIcmpCallback;\n\nHANDLE hIcmpFile = IcmpCreateFile();\nchar SendData[32] = \"Data Buffer\";\nLPVOID ReplyBuffer = NULL;\nDWORD dwRetVal = 0;\nDWORD ReplySize = 0;\n\nReplySize = sizeof(ICMP_ECHO_REPLY) + sizeof(SendData);\nReplyBuffer = (VOID*)malloc(ReplySize);\n\ndwRetVal = IcmpSendEcho2(hIcmpFile, NULL, g_pfnIcmpCallback, NULL, destAdress, SendData, sizeof(SendData), NULL, ReplyBuffer, ReplySize, 5000);\n\n\nint pintTime;\nif (dwRetVal != 0) {\n    PICMP_ECHO_REPLY pEchoReply = (PICMP_ECHO_REPLY)ReplyBuffer;\n    pintTime = pEchoReply-&gt;RoundTripTime;\n    g_logger.info(stdext::format(\"dwRetVal \", pintTime));\n}\nelse {\n    g_logger.info(stdext::format(\"dwRetVal = 0\"));\n    return 0;\n}\nreturn pintTime;\n</code></pre>\n\n<p>The error I get in VS 2013:</p>\n\n<blockquote>\n  <p>1>C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.1A\\include\\icmpapi.h(258): error C2061: syntax error : identifier 'PIO_APC_ROUTINE' (..\\src\\client\\game.cpp)</p>\n</blockquote>\n\n<p>Did I do something wrong?</p>\n"}, {"tags": ["c++", "templates", "tuples", "variadic-templates"], "answers": [{"tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": true, "score": 2, "last_activity_date": 1531321998, "creation_date": 1531321998, "answer_id": 51288976, "question_id": 51288827, "link": "https://stackoverflow.com/questions/51288827/how-to-append-the-corresponding-value-from-a-tuple-of-values-to-a-tuple-of-vecto/51288976#51288976", "title": "How to append the corresponding value from a tuple of values to a tuple of vectors of the same types?", "body": "<p>Pre-C++17, you can use an <code>eater</code>:</p>\n\n<pre><code>template&lt;class... Ts&gt; void eater(Ts... ts) {}\n</code></pre>\n\n<p>Then the function can be:</p>\n\n<pre><code>template &lt;std::size_t... Is&gt;\nvoid push_back_impl(std::tuple&lt;Ts...&gt; values, std::index_sequence&lt;Is...&gt;) {\n    eater((std::get&lt;Is&gt;(vectors).push_back(std::get&lt;Is&gt;(values)), 0)...);\n}\n</code></pre>\n\n<p>In C++17, just use comma operator:</p>\n\n<pre><code>template &lt;std::size_t... Is&gt;\nvoid push_back_impl(std::tuple&lt;Ts...&gt; values, std::index_sequence&lt;Is...&gt;) {\n    (std::get&lt;Is&gt;(vectors).push_back(std::get&lt;Is&gt;(values)),...);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10065641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Gxp1Axh1gGE/AAAAAAAAAAI/AAAAAAAAE6w/VUxmu1q7iL8/photo.jpg?sz=128", "display_name": "Tim Quelch", "link": "https://stackoverflow.com/users/10065641/tim-quelch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 51288976, "answer_count": 1, "score": 1, "last_activity_date": 1531321998, "creation_date": 1531321523, "question_id": 51288827, "link": "https://stackoverflow.com/questions/51288827/how-to-append-the-corresponding-value-from-a-tuple-of-values-to-a-tuple-of-vecto", "title": "How to append the corresponding value from a tuple of values to a tuple of vectors of the same types?", "body": "<p>I have a structure of arrays class</p>\n\n<pre><code>template &lt;typename... Ts&gt;\nclass soa {\n    std::tuple&lt;std::vector&lt;Ts&gt;...&gt; vectors;\n    void push_back(std::tuple&lt;Ts...&gt; values);\n}\n</code></pre>\n\n<p>I want <code>push_back</code> to push the tuple of values onto each of the corresponding vectors of each type. I was thinking of doing something with <code>index_sequences</code> but I'm not too sure how to properly do the pack expansion.</p>\n\n<p>This is kind of what I was thinking, but the expansion doesn't work. How should I correctly do the expansion?</p>\n\n<pre><code>template &lt;typename... Ts&gt;\nclass soa {\n    std::tuple&lt;std::vector&lt;Ts&gt;...&gt; vectors;\n\n    template &lt;std::size_t... Is&gt;\n    void push_back_impl(std::tuple&lt;Ts...&gt; values, std::index_sequence&lt;Is...&gt;) {\n        // Some kind of pack expansion here\n        // This doesn't work, but is kinda what I want\n        //std::get&lt;Is&gt;(vectors).push_back(std::get&lt;Is&gt;(values))...;\n    }\n\n    void push_back(std::tuple&lt;Ts...&gt; values) {\n        push_back_impl(values, std::index_sequence_for&lt;Ts...&gt;{});\n    }\n};\n</code></pre>\n\n<p>Please also correct me if I'm using <code>index_sequence</code> incorrectly. The meta programming is messing with my head a bit.</p>\n"}, {"tags": ["c++", "boost-asio"], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 1998327, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f3a4088d45d0cdf245489064b63d4015?s=128&d=identicon&r=PG", "display_name": "Sdean", "link": "https://stackoverflow.com/users/1998327/sdean"}, "edited": false, "score": 0, "creation_date": 1531321146, "post_id": 51288559, "comment_id": 89555191, "body": "thank you it was a typo error the correct is with <code>-&gt;</code> ."}, {"owner": {"reputation": 211, "user_id": 1998327, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f3a4088d45d0cdf245489064b63d4015?s=128&d=identicon&r=PG", "display_name": "Sdean", "link": "https://stackoverflow.com/users/1998327/sdean"}, "edited": false, "score": 0, "creation_date": 1531382773, "post_id": 51288559, "comment_id": 89577481, "body": "Thank you psur that was not the solution ."}], "tags": [], "owner": {"reputation": 4113, "user_id": 1113539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/787dd99efd64752596a4a21a7b1597e1?s=128&d=identicon&r=PG", "display_name": "psur", "link": "https://stackoverflow.com/users/1113539/psur"}, "is_accepted": false, "score": 0, "last_activity_date": 1531320677, "creation_date": 1531320677, "answer_id": 51288559, "question_id": 51288256, "link": "https://stackoverflow.com/questions/51288256/boostasioasync-write-invalid-arguments/51288559#51288559", "title": "boost::asio::async_write invalid arguments", "body": "<p>In first argument you have <code>&gt;</code> instead of <code>-&gt;</code> and it makes type of first argument to be <code>bool</code> (result of comparison) instead of needed type (probably some stream).</p>\n"}], "owner": {"reputation": 211, "user_id": 1998327, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f3a4088d45d0cdf245489064b63d4015?s=128&d=identicon&r=PG", "display_name": "Sdean", "link": "https://stackoverflow.com/users/1998327/sdean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531321242, "creation_date": 1531319795, "last_edit_date": 1531321242, "question_id": 51288256, "link": "https://stackoverflow.com/questions/51288256/boostasioasync-write-invalid-arguments", "title": "boost::asio::async_write invalid arguments", "body": "<p>i've the following c++ function :</p>\n\n<pre><code>int Asio_Send_Pck(int iSendt,int Lsocket,char * Lbuff,int Len)\n{\n    session* iTempSession = reinterpret_cast&lt;session*&gt;(Lsocket);\n    boost::asio::async_write(iTempSession-&gt;socket() ,\n                              boost::asio::buffer(Lbuff, Len),\n                              boost::bind(&amp;session::handle_write, \n                              iTempSession,\n                              boost::asio::placeholders::error,\n                              iTempSession-&gt;data,\n                              iSendt\n                              ));\n    return 0;\n};\n</code></pre>\n\n<p>But when compiling i get an Invalid arguments error on <strong>async_write</strong> , can i know where's ( are these ) this invalid argument(s) .</p>\n\n<p>PS : I work with <strong>Boost Version 1.67.0</strong> .</p>\n"}, {"tags": ["c++", "xcode", "c++17", "macos-high-sierra", "xcode9.4"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1531319779, "post_id": 51288230, "comment_id": 89554175, "body": "What is the question?  This look like an answer"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1531319986, "post_id": 51288230, "comment_id": 89554372, "body": "@claytonjwong This is a very nice answer, but incorrect format. See <a href=\"https://stackoverflow.blog/2011/07/01/its-ok-to-ask-and-answer-your-own-questions/\">this article</a> for more info on how to correctly put something like this on StackOverflow :)"}, {"owner": {"reputation": 617, "user_id": 8334739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da68d0fab50ac2fe0a3ed321d3161a03?s=128&d=identicon&r=PG&f=1", "display_name": "claytonjwong", "link": "https://stackoverflow.com/users/8334739/claytonjwong"}, "edited": false, "score": 0, "creation_date": 1531321050, "post_id": 51288230, "comment_id": 89555128, "body": "Hi, I&#39;m new here, I just posted this info, since I thought it would be helpful.  Thanks for sharing the article for the proper format!"}, {"owner": {"reputation": 617, "user_id": 8334739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da68d0fab50ac2fe0a3ed321d3161a03?s=128&d=identicon&r=PG&f=1", "display_name": "claytonjwong", "link": "https://stackoverflow.com/users/8334739/claytonjwong"}, "edited": false, "score": 0, "creation_date": 1531321200, "post_id": 51288230, "comment_id": 89555231, "body": "Looks like it might be too late to modify the original post.  Next time I&#39;ll make a Jeopardy style question and answer.  Thanks!"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1531324233, "post_id": 51288230, "comment_id": 89557118, "body": "@claytonjwong you should still be able to edit the post? Just click the edit button just above the comments"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1531324392, "post_id": 51288230, "comment_id": 89557204, "body": "I&#39;ve deleted the answer for you, you should be able to copy and paste the original post from the edit history into a new answer, click the &quot;source&quot; button to get to the original markup"}, {"owner": {"reputation": 617, "user_id": 8334739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da68d0fab50ac2fe0a3ed321d3161a03?s=128&d=identicon&r=PG&f=1", "display_name": "claytonjwong", "link": "https://stackoverflow.com/users/8334739/claytonjwong"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1531327067, "post_id": 51288230, "comment_id": 89558625, "body": "Thanks @AlanBirtles!"}], "answers": [{"comments": [{"owner": {"reputation": 3363, "user_id": 8230810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dCeAX.jpg?s=128&g=1", "display_name": "James Whiteley", "link": "https://stackoverflow.com/users/8230810/james-whiteley"}, "edited": false, "score": 0, "creation_date": 1599598386, "post_id": 51290452, "comment_id": 112821455, "body": "FWIW, this setting was under <code>Apple Clang - Language - C++</code> instead of <code>Apple LLVM 9.0 - Language - C++</code> for me - OSX 10.15.6, Xcode version 11.7."}], "tags": [], "owner": {"reputation": 617, "user_id": 8334739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da68d0fab50ac2fe0a3ed321d3161a03?s=128&d=identicon&r=PG&f=1", "display_name": "claytonjwong", "link": "https://stackoverflow.com/users/8334739/claytonjwong"}, "is_accepted": false, "score": 30, "last_activity_date": 1531327013, "creation_date": 1531327013, "answer_id": 51290452, "question_id": 51288230, "link": "https://stackoverflow.com/questions/51288230/how-do-i-enable-c17-in-xcode-for-mac-osx/51290452#51290452", "title": "How do I enable C++17 in Xcode for Mac OSX?", "body": "<p><strong>Steps to use C++17 in Xcode (9.4.1) on OSX High Sierra (10.13.5):</strong></p>\n\n<ol>\n<li>Open existing or create a new C++ project in Xcode</li>\n<li>Click on the \"show project navigator\" button.  It is located on the top-left section of Xcode window just below the minimize/maximize/close window buttons.  It is the left-most icon and looks like a folder.</li>\n<li>Click on \"Build Settings\" and scroll down to find and expand the section \"Apple LLVM 9.0 - Language - C++\"</li>\n<li>Change the C++ Language Dialect combobox selection to \"C++17 [-std=c++17]\"</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/jvBdE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jvBdE.png\" alt=\"Xcode Build Settings\"></a></p>\n\n<p><strong>Verification steps:</strong></p>\n\n<p>Now when I output __cplusplus, I see 201703, and I am able to compile C++17 features, such as if constexpr.</p>\n\n<pre><code>template&lt;class T&gt;\nint compute(T x) {\n    if constexpr( supportsAPI(T{}) ) {\n        // only gets compiled if the condition is true\n        return x.Method();\n    } else {\n        return 0;\n    }\n}\n\nint main(){\n    cout &lt;&lt; __cplusplus &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>201703\nProgram ended with exit code: 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3981, "user_id": 3004003, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4e3c5f99203dce2ba12b9cc9ef2b4328?s=128&d=identicon&r=PG&f=1", "display_name": "schmidt9", "link": "https://stackoverflow.com/users/3004003/schmidt9"}, "is_accepted": false, "score": 2, "last_activity_date": 1596472218, "creation_date": 1596472218, "answer_id": 63233322, "question_id": 51288230, "link": "https://stackoverflow.com/questions/51288230/how-do-i-enable-c17-in-xcode-for-mac-osx/63233322#63233322", "title": "How do I enable C++17 in Xcode for Mac OSX?", "body": "<p>When using development CocoaPods (writing a C++ library) I had also to update <code>podspec</code> of this library containing c++ 17 code to make compile host application which included this pod.</p>\n<p>So I added these flags to library's <code>podspec</code></p>\n<pre><code>  spec.xcconfig = { \n    &quot;CLANG_CXX_LANGUAGE_STANDARD&quot; =&gt; &quot;c++17&quot;,\n    &quot;CLANG_CXX_LIBRARY&quot; =&gt; &quot;libc++&quot;\n  }\n</code></pre>\n"}], "owner": {"reputation": 617, "user_id": 8334739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da68d0fab50ac2fe0a3ed321d3161a03?s=128&d=identicon&r=PG&f=1", "display_name": "claytonjwong", "link": "https://stackoverflow.com/users/8334739/claytonjwong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14548, "favorite_count": 4, "answer_count": 2, "score": 21, "last_activity_date": 1596472218, "creation_date": 1531319731, "last_edit_date": 1563522830, "question_id": 51288230, "link": "https://stackoverflow.com/questions/51288230/how-do-i-enable-c17-in-xcode-for-mac-osx", "title": "How do I enable C++17 in Xcode for Mac OSX?", "body": "<p>How do I enable C++17 in Xcode (9.4.1) on OSX High Sierra (10.13.5)?</p>\n"}, {"tags": ["c++", "objective-c", "exiftool"], "answers": [{"tags": [], "owner": {"reputation": 2344, "user_id": 6061098, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NKLyk.jpg?s=128&g=1", "display_name": "Bohdan Savych", "link": "https://stackoverflow.com/users/6061098/bohdan-savych"}, "is_accepted": true, "score": 0, "last_activity_date": 1531392060, "creation_date": 1531392060, "answer_id": 51303542, "question_id": 51288144, "link": "https://stackoverflow.com/questions/51288144/exiftool-get-imageinfo/51303542#51303542", "title": "Exiftool get ImageInfo", "body": "<p>I've figured out what's wrong.\nChanged from this:</p>\n\n<pre><code>ExifTool *_tool = new ExifTool();\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>ExifTool *_tool = new ExifTool([exifExecPath cStringUsingEncoding: NSASCIIStringEncoding]);\n</code></pre>\n\n<p>Where <code>exifExecPath</code> is exact location of exiftool exec file \u2013  <code>/usr/local/bin</code> in my case.</p>\n"}], "owner": {"reputation": 2344, "user_id": 6061098, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NKLyk.jpg?s=128&g=1", "display_name": "Bohdan Savych", "link": "https://stackoverflow.com/users/6061098/bohdan-savych"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 51303542, "answer_count": 1, "score": 1, "last_activity_date": 1558363206, "creation_date": 1531319455, "last_edit_date": 1531330063, "question_id": 51288144, "link": "https://stackoverflow.com/questions/51288144/exiftool-get-imageinfo", "title": "Exiftool get ImageInfo", "body": "<p>I'm trying to extract image metadata in my Objective-C project via Exiftool C++ interface. \nCode: </p>\n\n<pre><code>const char *fileName = \"/Users/bbb/Desktop/photos/thumb1.jpg\";\nTagInfo *info = _tool-&gt;ImageInfo(fileName, NULL, 5);\nNSLog(@\"%@\", info);\n</code></pre>\n\n<p>After some debugging I've found out that <code>isRunning == 0</code> and <code>Command</code> isn't executed  \u2013 return with <code>-1</code></p>\n\n<pre><code>int ExifTool::Command(const char *cmd)\n{\n    int n;\n    // check to make sure our exiftool process is still running\n    int isRunning = IsRunning();\n    if (!isRunning) return -1;\n...\n</code></pre>\n\n<p>URL is valid and info here is <code>NULL</code>. What am I doing wrong? Thanks.</p>\n"}, {"tags": ["c++", "unreal-engine4"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1531319758, "post_id": 51288053, "comment_id": 89554161, "body": "Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Are these lines in global scope? Why not simply write a function instead of lambda?"}, {"owner": {"reputation": 33, "user_id": 9618558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/456e31c1a97f2a81069db8d370151456?s=128&d=identicon&r=PG&f=1", "display_name": "Wolff", "link": "https://stackoverflow.com/users/9618558/wolff"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1531320407, "post_id": 51288053, "comment_id": 89554661, "body": "This is a function which gets called whenever a IPersonaPreviewScene gets created. Now i would like to store its PersonaToolkit (which is an Abstract class) in a variable."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1531321478, "post_id": 51288053, "comment_id": 89555416, "body": "I&#39;m afraid I still don&#39;t understand. <code>auto foo = [](){return 1;};</code> creates a variable, which stores a function object. This function can then be called like any other function: <code>int a = foo();</code>. Here, <code>lambda</code> variable dies at the end of <code>OnPreviewCreation</code> function. You don&#39;t use it anywhere, so it&#39;s probably optimized away by compiler. And you capture <code>PersonaToolKitRef</code> by value, so you use a copy of it in lambda body."}, {"owner": {"reputation": 33, "user_id": 9618558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/456e31c1a97f2a81069db8d370151456?s=128&d=identicon&r=PG&f=1", "display_name": "Wolff", "link": "https://stackoverflow.com/users/9618558/wolff"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1531322122, "post_id": 51288053, "comment_id": 89555836, "body": "I would like to define my variable lambda in my .h file so i can use this lambda function anywhere in my cpp file. And this is my problem. I do not know a way to store the lambda function in a variable, which is declared in a header file."}], "answers": [{"tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 0, "last_activity_date": 1531321846, "creation_date": 1531321846, "answer_id": 51288929, "question_id": 51288053, "link": "https://stackoverflow.com/questions/51288053/ue4-save-a-lambda-function-in-the-header/51288929#51288929", "title": "(UE4) Save a lambda function in the header", "body": "<p>In order to declare a lambda variable separately from initialising it you need to store it in <code>std::function</code>. The type of a lambda is only known at the point you create it so its not possible to declare a variable to store it separately.</p>\n\n<p>For example:</p>\n\n<pre><code>auto a = []{ return 1; }; // OK\n\nauto b; // invalid, can't declare as auto as the type can't be deduced\nb = []{ return 1; };\n\nstd::function&lt; bool() &gt; c;\nc = []{ return 1; }; // OK, we can store a lambda in std::function\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1531324237, "creation_date": 1531324237, "answer_id": 51289684, "question_id": 51288053, "link": "https://stackoverflow.com/questions/51288053/ue4-save-a-lambda-function-in-the-header/51289684#51289684", "title": "(UE4) Save a lambda function in the header", "body": "<p>You can <em>define</em> (and initialise) your lambda in your header file if you compile for C++17 and declare it <code>inline</code>.</p>\n\n<p>At least, I <em>think</em> it works for lambdas, try it.</p>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 8463347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6561b7d1765941d653b61105f3ae13f8?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Jod\u0142o\u015b", "link": "https://stackoverflow.com/users/8463347/daniel-jod%c5%82o%c5%9b"}, "is_accepted": false, "score": 0, "last_activity_date": 1531326871, "creation_date": 1531326871, "answer_id": 51290418, "question_id": 51288053, "link": "https://stackoverflow.com/questions/51288053/ue4-save-a-lambda-function-in-the-header/51290418#51290418", "title": "(UE4) Save a lambda function in the header", "body": "<p>Lambdas can be stored in function pointers without too much effort like that:</p>\n\n<p>In header:\n<code>double (*lambda)(double);</code></p>\n\n<p>In the .cpp file:\n<code>lambda = [&amp;](double a) { return 2*a; };</code></p>\n\n<p>The trouble with this approach is that the defined type of lambda cannot be dynamic. What I mean by that is the assigned lambda needs to match the type defined in the header, so it must have the same return type and, type-wise, exactly the same list of arguments.</p>\n\n<p>And one more little thing. In C++ you are not allowed to re-declare neither functions nor variables in the same scope. If you define a variable directly in a header file and happen to include it into more than one source file, you will get an unpleasant surprise in form of crazy errors. In a header file, define your variable using <code>extern</code> and then define it normally in ONE source file in order to avoid trouble.</p>\n"}], "owner": {"reputation": 33, "user_id": 9618558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/456e31c1a97f2a81069db8d370151456?s=128&d=identicon&r=PG&f=1", "display_name": "Wolff", "link": "https://stackoverflow.com/users/9618558/wolff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1311, "favorite_count": 0, "accepted_answer_id": 51288929, "answer_count": 3, "score": 0, "last_activity_date": 1531326871, "creation_date": 1531319190, "last_edit_date": 1531320184, "question_id": 51288053, "link": "https://stackoverflow.com/questions/51288053/ue4-save-a-lambda-function-in-the-header", "title": "(UE4) Save a lambda function in the header", "body": "<p>i am currently defining a lamda function which i want to save in my header file.</p>\n\n<pre><code>void FURealisticGraspingEditorModule::OnPreviewCreation(const TSharedRef&lt;IPersonaPreviewScene&gt;&amp; InPreviewScene)\n{\n    TSharedRef&lt;IPersonaToolkit&gt; PersonaToolKitRef = InPreviewScene.Get().GetPersonaToolkit();\n    auto lambda = [PersonaToolKitRef]() { return PersonaToolKitRef.Get(); };\n    DebugMeshComponent = PersonaToolKitRef.Get().GetPreviewMeshComponent();\n}\n</code></pre>\n\n<p>The lamda variable should get saved in the header. I did not manage to do this yet and now i am curious if this is even possible. I tried auto and TFunctionRef. Maybe there is a hint you guys can give me to achive this or even another way to save this call in a variable.</p>\n"}, {"tags": ["c++", "winapi", "readprocessmemory"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1531319874, "post_id": 51288022, "comment_id": 89554269, "body": "You are calling <code>GetLastError</code> too late. The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms679360.aspx\" rel=\"nofollow noreferrer\">documentation</a> is telling you, when to call it."}, {"owner": {"reputation": 13, "user_id": 10065465, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GtpVZb4gaHQ/AAAAAAAAAAI/AAAAAAAAAMw/LSX9xX4QsOM/photo.jpg?sz=128", "display_name": "KOYZ", "link": "https://stackoverflow.com/users/10065465/koyz"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1531320073, "post_id": 51288022, "comment_id": 89554436, "body": "Hmm, when should I call it... because I want to get the error, if success (ReadProcessMemory) gives out false since success is an boolean?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1531322737, "post_id": 51288022, "comment_id": 89556269, "body": "<code>addr</code> is wrong (invalid). what here unclear ? more concrete <code>0x24ED13273A8;</code> of course is not valid <i>RVA</i>"}, {"owner": {"reputation": 13, "user_id": 10065465, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GtpVZb4gaHQ/AAAAAAAAAAI/AAAAAAAAAMw/LSX9xX4QsOM/photo.jpg?sz=128", "display_name": "KOYZ", "link": "https://stackoverflow.com/users/10065465/koyz"}, "edited": false, "score": 0, "creation_date": 1531339468, "post_id": 51288022, "comment_id": 89564374, "body": "That wasnt the problem. The ammo address already contained the Base Address, so I tried getting something which is outside of the addressspace"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1531382995, "post_id": 51288022, "comment_id": 89577622, "body": "The documentation says to call <code>GetLastError</code> <b>immediately</b>, after the return value of the API indicates, that it will return a valid value. No code in between. You aren&#39;t doing that."}, {"owner": {"reputation": 13, "user_id": 10065465, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GtpVZb4gaHQ/AAAAAAAAAAI/AAAAAAAAAMw/LSX9xX4QsOM/photo.jpg?sz=128", "display_name": "KOYZ", "link": "https://stackoverflow.com/users/10065465/koyz"}, "edited": false, "score": 0, "creation_date": 1531522307, "post_id": 51288022, "comment_id": 89642755, "body": "Well it was the right error, and it was something completely different as I stated a comment above..."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10065465, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GtpVZb4gaHQ/AAAAAAAAAAI/AAAAAAAAAMw/LSX9xX4QsOM/photo.jpg?sz=128", "display_name": "KOYZ", "link": "https://stackoverflow.com/users/10065465/koyz"}, "edited": false, "score": 0, "creation_date": 1531669792, "post_id": 51346951, "comment_id": 89672333, "body": "Thank you sooo much, definatly the best answer to my problem I found on here! &lt;3"}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": true, "score": 3, "last_activity_date": 1538328623, "last_edit_date": 1538328623, "creation_date": 1531645969, "answer_id": 51346951, "question_id": 51288022, "link": "https://stackoverflow.com/questions/51288022/c-readprocessmemory-receiving-998-3e6-error/51346951#51346951", "title": "C++ ReadProcessMemory receiving 998 / 3E6 Error", "body": "<p>There are actually two basic mistakes in your code, both of which, unfortunately for you, me and the rest of the civilised world, generate the same error code.  Was it ever thus.  There is also a logic error, but you are lucky enough to be getting away with it (just about).  I commented the fix in the code I posted below.</p>\n\n<p>There are also a number of 'good practise' shortcomings in your code, specifically:</p>\n\n<ul>\n<li>NULL should not be used to represent <em>integer</em> zero</li>\n<li><strong>All</strong> error conditions should be checked for and (sensibly!) reported</li>\n<li>You use the same string literal in two different places (so if you ever change it, you would need to change it in both places, and you might forget).  So don't do that.</li>\n<li><code>using namespace std;</code> is widely frowned upon (because it causes such a lot of namespace pollution)</li>\n<li>Why are <code>id</code> and <code>hProcess</code> global variables?  This is just plain unnecessary.</li>\n<li>You should give your functions more descriptive names, <code>setHandle</code> being the one I particularly have in mind.  I got rid of that one completely.</li>\n<li>When passing a <code>std::string</code> as a read-only function parameter, it is usually best to pass it as <code>const ref</code>, then it doesn't need to be copied.</li>\n<li>Only use <code>std::endl</code> when you actually want to flush the buffer.  It is inefficient.</li>\n<li>Clean up after you (in this case, close any open handles).  I know this is just a throwaway program but it's a good habit to get into.</li>\n</ul>\n\n<p>OK, so here's some code that works (I have posted my own because I cleaned up all of the above).  The substantive changes are:</p>\n\n<ul>\n<li>To read the memory of another process, you need to give your user token the <code>SE_DEBUG_NAME</code> privilege.  This in turn means you need to run your program as Administrator (aka elevated).</li>\n<li>You cannot (obviously) read from a nonsense address in the target process so I just quietly fixed that.</li>\n</ul>\n\n<p>Like I say, both of these generate the same error code.  Huh!</p>\n\n<p>OK, here you go.  Enjoy:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;tlhelp32.h&gt;\n#include &lt;Psapi.h&gt;\n#include &lt;tchar.h&gt;\n\nint getPID(const std::string&amp; name);\nDWORD64 GetModule(HANDLE hProcess, const std::string&amp; name);\n\n// Stolen from: https://docs.microsoft.com/en-gb/windows/desktop/SecAuthZ/enabling-and-disabling-privileges-in-c--\nBOOL SetPrivilege(\n    HANDLE hToken,          // access token handle\n    LPCTSTR lpszPrivilege,  // name of privilege to enable/disable\n    BOOL bEnablePrivilege   // to enable or disable privilege\n    ) \n{\n    TOKEN_PRIVILEGES tp;\n    LUID luid;\n\n    if ( !LookupPrivilegeValue( \n            NULL,            // lookup privilege on local system\n            lpszPrivilege,   // privilege to lookup \n            &amp;luid ) )        // receives LUID of privilege\n    {\n        printf(\"LookupPrivilegeValue error: %u\\n\", GetLastError() ); \n        return FALSE; \n    }\n\n    tp.PrivilegeCount = 1;\n    tp.Privileges[0].Luid = luid;\n    if (bEnablePrivilege)\n        tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;\n    else\n        tp.Privileges[0].Attributes = 0;\n\n    // Enable the privilege or disable all privileges.\n\n    if ( !AdjustTokenPrivileges(\n           hToken, \n           FALSE, \n           &amp;tp, \n           sizeof(TOKEN_PRIVILEGES), \n           (PTOKEN_PRIVILEGES) NULL, \n           (PDWORD) NULL) )\n    { \n          printf(\"AdjustTokenPrivileges error: %u\\n\", GetLastError() ); \n          return FALSE; \n    } \n\n    if (GetLastError() == ERROR_NOT_ALL_ASSIGNED)\n\n    {\n          printf(\"The token does not have the specified privilege. \\n\");\n          return FALSE;\n    } \n\n    return TRUE;\n}\n\n\nconstexpr const char* theProcess = \"notepad.exe\";\n\nint main()\n{\n    HANDLE hToken;\n    BOOL ok = OpenProcessToken (GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES, &amp;hToken);\n    if (!ok)\n    {\n         std::cout &lt;&lt; \"OpenProcessToken failed, error \" &lt;&lt; GetLastError() &lt;&lt; \"\\n\";\n         return 255;\n    }\n\n    ok = SetPrivilege (hToken, SE_DEBUG_NAME, TRUE);\n    if (!ok)\n    {\n        CloseHandle (hToken);\n        return 1;\n    }\n\n    int pid = getPID (theProcess);\n\n    HANDLE hProcess = OpenProcess (PROCESS_ALL_ACCESS, FALSE, pid);\n    if (hProcess == NULL)\n    {\n         std::cout &lt;&lt; \"OpenProcess failed, error \" &lt;&lt; GetLastError() &lt;&lt; \"\\n\";\n         CloseHandle (hToken);\n         return 1;\n    }\n\n    DWORD64 baseAddress = GetModule(hProcess, theProcess);\n    std::cout &lt;&lt; \"Base Address: \" &lt;&lt; std::hex &lt;&lt; std::uppercase &lt;&lt; \"0x\" &lt;&lt; baseAddress &lt;&lt; \"\\n\";\n    int buffer = 0;  // Note: sizeof (buffer) below, not sizeof (&amp;buffer)\n    ok = ReadProcessMemory(hProcess, (LPCVOID)baseAddress, (LPVOID)&amp;buffer, sizeof(buffer), NULL);\n\n    CloseHandle (hProcess);\n    CloseHandle (hToken);\n\n    if (ok) \n    {\n        std::cout &lt;&lt; \"ReadProcessMemory succeeded, buffer = \" &lt;&lt; buffer &lt;&lt; \"\\n\";\n        system(\"pause\");\n        return 0;\n    }\n\n    std::cout &lt;&lt; \"ReadProcessMemory failed, error \" &lt;&lt; GetLastError() &lt;&lt; \"\\n\";\n    system(\"pause\");\n    return 1;\n}\n\nint getPID(const std::string&amp; name)\n{\n    PROCESSENTRY32 entry;\n    entry.dwSize = sizeof(PROCESSENTRY32);\n    HANDLE snapshot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, NULL);\n\n    if (!Process32First(snapshot, &amp;entry)) return NULL;\n\n    do\n    {\n        if (strcmp(entry.szExeFile, name.c_str()) == 0)\n        {\n            CloseHandle(snapshot);\n            return entry.th32ProcessID;\n        }\n    } while (Process32Next(snapshot, &amp;entry));\n\n    CloseHandle(snapshot);\n    return NULL;\n}\n\nDWORD64 GetModule(HANDLE hProcess, const std::string&amp; name)\n{\n    HMODULE hMods[1024];\n    DWORD cbNeeded;\n\n    if (EnumProcessModules(hProcess, hMods, sizeof(hMods), &amp;cbNeeded))\n    {\n        for (int i = 0; i &lt; (cbNeeded / sizeof(HMODULE)); i++)\n        {\n            TCHAR szModName[MAX_PATH];\n            if (GetModuleFileNameEx(hProcess, hMods[i], szModName, sizeof(szModName) / sizeof(TCHAR)))\n            {\n                std::string modName = szModName;\n                if (modName.find(name) != std::string::npos)\n                {\n                    return (DWORD64)hMods[i];\n                }\n            }\n        }\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>Output (when run as Administrator):</p>\n\n<pre><code>Base Address: 0x7FF6D8470000\nReadProcessMemory succeeded, buffer = 905A4D\n</code></pre>\n\n<p>Output (when run as a normal user):</p>\n\n<pre><code>The token does not have the specified privilege.\n</code></pre>\n\n<p>You can also grab some code over at <a href=\"https://gist.github.com/flyrain/4053097\" rel=\"nofollow noreferrer\">GitHub</a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 10065465, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GtpVZb4gaHQ/AAAAAAAAAAI/AAAAAAAAAMw/LSX9xX4QsOM/photo.jpg?sz=128", "display_name": "KOYZ", "link": "https://stackoverflow.com/users/10065465/koyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1128, "favorite_count": 1, "accepted_answer_id": 51346951, "answer_count": 1, "score": 1, "last_activity_date": 1538328623, "creation_date": 1531319112, "last_edit_date": 1531319264, "question_id": 51288022, "link": "https://stackoverflow.com/questions/51288022/c-readprocessmemory-receiving-998-3e6-error", "title": "C++ ReadProcessMemory receiving 998 / 3E6 Error", "body": "<p>So I'm trying to read Memory out of a running exe with <code>ReadProcessMemory()</code> as you can see in the code provided below.\nThe only problem I constantly run into is that I receive the Error 3E6 / 998 which seems to be <code>NOACCESS</code> but I cant find a solution to fix this.\nAnd yes I tried to run the exe in Admin Mode without success...</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;tlhelp32.h&gt;\n#include &lt;Psapi.h&gt;\n#include &lt;tchar.h&gt;\n\nusing namespace std;\n\nint id = NULL;\nHANDLE hProcess = NULL;\nint getPID(const string name);\nbool setHandle(int id, HANDLE &amp;out);\nDWORD64 GetModule(const string name);\n\nint main()\n{\n    bool success = false;\n    id = getPID(\"sample.exe\");\n    string name = \"SAMPLE\";\n    cout &lt;&lt; \"Process Name: \" &lt;&lt; name &lt;&lt; endl;\n    cout &lt;&lt; \"Process ID: \" &lt;&lt; id &lt;&lt; endl;\n\n    success = setHandle(id, hProcess);\n    if (success)\n    {\n        cout &lt;&lt; \"Handle set...\" &lt;&lt; endl;\n    }\n    else if (!success) \n    {\n        cout &lt;&lt; \"You need to have SOMETHING opened...\" &lt;&lt; endl;\n        cout &lt;&lt; \"ERROR CODE: \" &lt;&lt; GetLastError() &lt;&lt; endl;\n        system(\"pause\");\n        return 1;\n    }\n    success = false;\n\n    DWORD64 baseAddress = GetModule(\"sample.exe\");\n    DWORD64 ammo = 0x24ED13273A8;\n    DWORD64 addr = baseAddress + ammo;\n\n    cout &lt;&lt; \"Base Address: \" &lt;&lt; hex &lt;&lt; uppercase &lt;&lt; \"0x\" &lt;&lt; baseAddress &lt;&lt; endl;\n    cout &lt;&lt; \"Ammo Address: \" &lt;&lt; hex &lt;&lt; uppercase &lt;&lt; \"0x\" &lt;&lt; ammo &lt;&lt; endl;\n    cout &lt;&lt; \"Complete Address: \" &lt;&lt; hex &lt;&lt; uppercase &lt;&lt; \"0x\" &lt;&lt; addr &lt;&lt; endl;\n\n    int buffer = 0;\n\n    success = ReadProcessMemory(hProcess, (LPCVOID)addr, (LPVOID)&amp;buffer, sizeof(&amp;buffer), NULL);\n\n    if (success) \n    {\n        cout &lt;&lt; \"ReadProccess succeeded...\" &lt;&lt; endl;\n        system(\"pause\");\n        return 0;\n    }\n    else if (!success) \n    {\n        cout &lt;&lt; \"ERROR CODE: \" &lt;&lt; GetLastError() &lt;&lt; endl;\n        system(\"pause\");\n        return 1;\n    }\n\n    system(\"pause\");\n    return 0;\n\n}\n\nbool setHandle(int id, HANDLE &amp;out)\n{\n    out = OpenProcess(PROCESS_ALL_ACCESS, FALSE, id);\n    if (!out) return false;\n\n    return true;\n}\n\nint getPID(const string name)\n{\n    PROCESSENTRY32 entry;\n    entry.dwSize = sizeof(PROCESSENTRY32);\n    HANDLE snapshot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, NULL);\n\n    if (!Process32First(snapshot, &amp;entry)) return NULL;\n\n    do\n    {\n        if (strcmp(entry.szExeFile, name.c_str()) == 0)\n        {\n            CloseHandle(snapshot);\n            return entry.th32ProcessID;\n        }\n    } while (Process32Next(snapshot, &amp;entry));\n\n    CloseHandle(snapshot);\n    return NULL;\n}\n\nDWORD64 GetModule(const string name)\n{\n    HMODULE hMods[1024];\n    DWORD cbNeeded;\n\n    if (EnumProcessModules(hProcess, hMods, sizeof(hMods), &amp;cbNeeded))\n    {\n        for (int i = 0; i &lt; (cbNeeded / sizeof(HMODULE)); i++)\n        {\n            TCHAR szModName[MAX_PATH];\n            if (GetModuleFileNameEx(hProcess, hMods[i], szModName, sizeof(szModName) / sizeof(TCHAR)))\n            {\n                string modName = szModName;\n                if (modName.find(name) != string::npos)\n                {\n                    return (DWORD64)hMods[i];\n                }\n            }\n        }\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>I'm kinda new to c++... so sry? :)</p>\n"}, {"tags": ["c++", "arrays", "dynamic", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 0, "creation_date": 1531319562, "post_id": 51287978, "comment_id": 89553995, "body": "Regardless of the error, parallelizing at this tiny granularity would incur huge overheads, and at this size also horrible cache thrashing over false conflicts."}, {"owner": {"reputation": 3, "user_id": 5862538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bd3ecd79a9ccf9018bad7500233b4bb?s=128&d=identicon&r=PG&f=1", "display_name": "luzhaokuan", "link": "https://stackoverflow.com/users/5862538/luzhaokuan"}, "reply_to_user": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 0, "creation_date": 1531328673, "post_id": 51287978, "comment_id": 89559400, "body": "Sorry for the confusion. The value of NINT and NEL here are only for demonstration purpose. Thanks for the advice on the performance issue."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5862538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bd3ecd79a9ccf9018bad7500233b4bb?s=128&d=identicon&r=PG&f=1", "display_name": "luzhaokuan", "link": "https://stackoverflow.com/users/5862538/luzhaokuan"}, "edited": false, "score": 0, "creation_date": 1531328592, "post_id": 51288358, "comment_id": 89559358, "body": "Thanks, Leeor. This works for me. I do need to make i, j and k private."}, {"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1531397593, "post_id": 51288358, "comment_id": 89587324, "body": "Better to make i,j,k explicitly local as for(int i = 0; ...) .  I assume the default of the outer for index defaulting to private is present only to permit use of C89 under OpenMP."}], "tags": [], "owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "is_accepted": false, "score": 1, "last_activity_date": 1531320095, "creation_date": 1531320095, "answer_id": 51288358, "question_id": 51287978, "link": "https://stackoverflow.com/questions/51287978/openmp-nested-loop-with-dynamic-array-assignment/51288358#51288358", "title": "OpenMP nested loop with dynamic array assignment", "body": "<p>Try changing the pramga into;</p>\n\n<pre><code>#pragma omp parallel for shared(data) private(i,j,k) \n</code></pre>\n\n<p>However, to expand on my comment, you are parallelizing over a large number of threads, but giving each of them a tiny amount of work, which means the overhead in scheduling them would be very large compared to the actual benefit. </p>\n\n<p>On top of that, 2*2*2*sizeof(int) may be smaller than a cacheline on most systems, meaning that 2 threads would likely try to write to the same line simultaneously, causing false conflicts and ping-ponging the line across caches.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 5862538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bd3ecd79a9ccf9018bad7500233b4bb?s=128&d=identicon&r=PG&f=1", "display_name": "luzhaokuan", "link": "https://stackoverflow.com/users/5862538/luzhaokuan"}, "edited": false, "score": 0, "creation_date": 1531328439, "post_id": 51288382, "comment_id": 89559288, "body": "Thanks Kai! That solved my problem! The performance improvement you mentioned makes sense."}], "tags": [], "owner": {"reputation": 743, "user_id": 10021094, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hOsAzTvp3OY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3qaF7JQwaEdJHQp3np6K8YQQMGFA/mo/photo.jpg?sz=128", "display_name": "Kai Guther", "link": "https://stackoverflow.com/users/10021094/kai-guther"}, "is_accepted": true, "score": 2, "last_activity_date": 1531320497, "last_edit_date": 1531320497, "creation_date": 1531320158, "answer_id": 51288382, "question_id": 51287978, "link": "https://stackoverflow.com/questions/51287978/openmp-nested-loop-with-dynamic-array-assignment/51288382#51288382", "title": "OpenMP nested loop with dynamic array assignment", "body": "<p>You need to declare the loop variables within the parallel region, best do </p>\n\n<pre><code> #pragma omp parallel for \n for (int i = 0; i &lt; NEL; i++) {\n    for (int j = 0; j &lt; NINT*NINT*NINT; j++) {\n      for (int k = 0; k &lt; NINT*NINT*NINT; k++) {\n        data[i][j][k] = 1;\n      }\n    }\n }\n</code></pre>\n\n<p>else, the loop variables will be shared by default, potentially leading to out-of-bounds access to <code>data</code></p>\n\n<p>In general, it is preferable here to use a <code>std::vector</code>:</p>\n\n<pre><code>std::vector&lt;std::vector&lt;std::vector&lt;int &gt;  &gt; &gt; data;\n</code></pre>\n\n<p>And if you opt for performance, you want to use contigous memory</p>\n\n<pre><code>std::vector&lt;int&gt; data;\n</code></pre>\n\n<p>and then access <code>data</code> by building the index on the fly</p>\n\n<pre><code>data[k+pow(NINT,3)*j+pow(NINT,6)*i] = 1;\n</code></pre>\n\n<p>Best use a small indexing function here, to make access to data easier</p>\n\n<pre><code>int dataIndex(int i, int j, int k, int NINT){return k+pow(NINT,3)*j+pow(NINT,6)*i;}\n</code></pre>\n\n<p>and then access <code>data</code> as</p>\n\n<pre><code>data[dataIndex(i,j,k,NINT)]=1;\n</code></pre>\n\n<p>The compiler will inline the function most likely, such that there will be no extra cost for the function call.</p>\n"}], "owner": {"reputation": 3, "user_id": 5862538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bd3ecd79a9ccf9018bad7500233b4bb?s=128&d=identicon&r=PG&f=1", "display_name": "luzhaokuan", "link": "https://stackoverflow.com/users/5862538/luzhaokuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 1, "accepted_answer_id": 51288382, "answer_count": 2, "score": 0, "last_activity_date": 1531345038, "creation_date": 1531318979, "last_edit_date": 1531345038, "question_id": 51287978, "link": "https://stackoverflow.com/questions/51287978/openmp-nested-loop-with-dynamic-array-assignment", "title": "OpenMP nested loop with dynamic array assignment", "body": "<p>Please forgive me if this is a stupid question but I failed to find any question similar. </p>\n\n<p>I want to assign the value to a 3d dynamic array with OpenMP parallel on the first loop (in C++). </p>\n\n<pre><code>int i, j, k;\nint ***data;\nconst int NEL = 100;\nconst int NINT = 2;\ndata = new int**[NEL];\nfor (i = 0; i &lt; NEL; i++) {\n    data[i] = new int*[NINT*NINT*NINT];\n    for (j = 0; j &lt; NINT*NINT*NINT; j++) {\n        data[i][j] = new int[NINT*NINT*NINT];\n    }\n}\n#pragma omp parallel for \nfor (i = 0; i &lt; NEL; i++) {\n    for (j = 0; j &lt; NINT*NINT*NINT; j++) {\n        for (k = 0; k &lt; NINT*NINT*NINT; k++) {\n            data[i][j][k] = 1;\n        }\n    }\n}\n</code></pre>\n\n<p>I only want to make the outermost loop (i) execute parallel with the nested loops (j and k) execute sequentially. But the compiler throws the access violation error every time. </p>\n\n<p>If I change the dynamic array to a local array, it would work with no problem.</p>\n\n<pre><code>int i, j, k;    \nconst int NINT = 2;\nconst int NEL = 100;\nint data[NEL][NINT*NINT*NINT][NINT*NINT*NINT];\n#pragma omp parallel for \nfor (i = 0; i &lt; NEL; i++) {\n    for (j = 0; j &lt; NINT*NINT*NINT; j++) {\n        for (k = 0; k &lt; NINT*NINT*NINT; k++) {\n            data[i][j][k] = 123;\n        }\n    }\n}\n</code></pre>\n\n<p>I'm using Visual Studio 2015 with OpenMP function enabled. Is it because that the OpenMP version in VS 2015 is only 2.0? Or I'm not using the dynamic array with OpenMP correctly? </p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1531318752, "post_id": 51287883, "comment_id": 89553365, "body": "You cannot find that size. You need to pass it as an argument, use a template to pass the size or use a proper c++ container like <code>std::vector</code>. The idiomatic way of working on containers in modern c++ is to pass ranges (pairs of iterators)."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1531318794, "post_id": 51287883, "comment_id": 89553395, "body": "Arrays are bad. They don&#39;t know their size and like to shapeshift to pointers when used as function parameters. Throw them out the window. Use <code>std::vector</code> or <code>std::array</code> instead."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1531318814, "post_id": 51287883, "comment_id": 89553411, "body": "<code>a[size] != NULL</code> does <b>not</b> check whether there&#39;s an element in the array at that index"}, {"owner": {"reputation": 132, "user_id": 5679270, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Kq8XK.jpg?s=128&g=1", "display_name": "Ali Ansari", "link": "https://stackoverflow.com/users/5679270/ali-ansari"}, "edited": false, "score": 0, "creation_date": 1531318868, "post_id": 51287883, "comment_id": 89553444, "body": "as I mention i shouldn&#39;t use <code>vector</code> or <code>template</code>, so in this way there isn&#39;t any possible way?"}, {"owner": {"reputation": 705, "user_id": 4849439, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/049ab7c04b283ef0c73cba0046427335?s=128&d=identicon&r=PG&f=1", "display_name": "JLev", "link": "https://stackoverflow.com/users/4849439/jlev"}, "edited": false, "score": 1, "creation_date": 1531318912, "post_id": 51287883, "comment_id": 89553492, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22008755/how-to-get-size-of-dynamic-array-in-c\">How to get size of dynamic array in C++</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1531318946, "post_id": 51287883, "comment_id": 89553513, "body": "For sanity&#39;s sake replace <code>NULL</code> with <code>nullptr</code>.  If it does not compile then your are not doing it correctly."}, {"owner": {"reputation": 132, "user_id": 5679270, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Kq8XK.jpg?s=128&g=1", "display_name": "Ali Ansari", "link": "https://stackoverflow.com/users/5679270/ali-ansari"}, "edited": false, "score": 0, "creation_date": 1531318969, "post_id": 51287883, "comment_id": 89553534, "body": "I try to use <code>std::array</code> but it only work with fixed size array and in function parameter array should be unsize so it can accept array with different size."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 2, "creation_date": 1531318994, "post_id": 51287883, "comment_id": 89553545, "body": "@AliDK Then use <code>std::vector</code>. Variable length arrays are not allowed in portable C++ either."}], "answers": [{"comments": [{"owner": {"reputation": 132, "user_id": 5679270, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Kq8XK.jpg?s=128&g=1", "display_name": "Ali Ansari", "link": "https://stackoverflow.com/users/5679270/ali-ansari"}, "edited": false, "score": 0, "creation_date": 1531319315, "post_id": 51287967, "comment_id": 89553790, "body": "as I mention I try <code>std::array</code> but it is for fixed size array and array parameter should be unsized. can I use  <code>std::vector</code> as unsized  array in function parameter? can you help with an example that how should I do this."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1531318938, "creation_date": 1531318938, "answer_id": 51287967, "question_id": 51287883, "link": "https://stackoverflow.com/questions/51287883/find-number-of-element-of-array-when-it-use-as-parameter-in-c/51287967#51287967", "title": "find number of element of array when it use as parameter in C++", "body": "<p>Once an array have decayed to a pointer (to its first element), there's no way of getting its size.</p>\n\n<p>The loop you have can (and most likely <em>will</em>) go out of bounds and you will have <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>.</p>\n\n<p>There are three possible solutions:</p>\n\n<ol>\n<li><p>Use <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a> instead</p></li>\n<li><p>Use <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> instead</p></li>\n<li><p>Use array-size deduction with templates:</p>\n\n<pre><code>template&lt;size_t N&gt;\nint countArray(int (&amp;a)[N]) { ... }\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p>Also note that C++ doesn't have the concept of \"null\" values. The symbolic constant <code>NULL</code> is for <em>pointers</em> only.</p>\n"}, {"comments": [{"owner": {"reputation": 132, "user_id": 5679270, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Kq8XK.jpg?s=128&g=1", "display_name": "Ali Ansari", "link": "https://stackoverflow.com/users/5679270/ali-ansari"}, "edited": false, "score": 0, "creation_date": 1531321260, "post_id": 51288592, "comment_id": 89555270, "body": "it is not necessary that array should has at least one element, i suppose my function work if someone pass an empty array to it and it should return zero as its number of elements. and I got your point that why function work with larger array with less elements, because remaining elements are zero which is equal to null"}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 132, "user_id": 5679270, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Kq8XK.jpg?s=128&g=1", "display_name": "Ali Ansari", "link": "https://stackoverflow.com/users/5679270/ali-ansari"}, "edited": false, "score": 0, "creation_date": 1531321520, "post_id": 51288592, "comment_id": 89555439, "body": "the problem is: if the array is empty you are not allowed to access the first element. and thats what you do unconditionally in the while loop. and again: there is NO way you can &quot;count&quot; the array size, except you know which value the last element has (such as a delimiter)"}], "tags": [], "owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "is_accepted": false, "score": 0, "last_activity_date": 1531320808, "creation_date": 1531320808, "answer_id": 51288592, "question_id": 51287883, "link": "https://stackoverflow.com/questions/51287883/find-number-of-element-of-array-when-it-use-as-parameter-in-c/51288592#51288592", "title": "find number of element of array when it use as parameter in C++", "body": "<blockquote>\n  <p>I should use array in this example not vector or struct</p>\n</blockquote>\n\n<p>From reading your comments and your inital post i just try to <strong>guess</strong> what data you are given and what you have to do. can it be that you are given an integer array with the following properties:</p>\n\n<ol>\n<li>at least one element</li>\n<li>the last element is guaranteed to be 0</li>\n<li>no other element except the last is 0</li>\n</ol>\n\n<p>Then - and only then - the solution you tried would work. The example with <code>int two[4] = {1,2,3}</code> works because you create an array with 4 elements. but only initialize 3 with aggregate initialization. so the remaining (and so the last element) is set to 0.</p>\n\n<p>The check for NULL with integers works the same as a check with 0. </p>\n"}, {"comments": [{"owner": {"reputation": 132, "user_id": 5679270, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Kq8XK.jpg?s=128&g=1", "display_name": "Ali Ansari", "link": "https://stackoverflow.com/users/5679270/ali-ansari"}, "edited": false, "score": 0, "creation_date": 1531321464, "post_id": 51288649, "comment_id": 89555404, "body": "thank you for mentioning this point that I didn&#39;t realize before. i think I have to change the method i use because its not prefect."}], "tags": [], "owner": {"reputation": 11, "user_id": 10065644, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JGMHXM1L7Bk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qCkaiRBAskJX3SONKqtbVzNya6Ng/mo/photo.jpg?sz=128", "display_name": "Elvan", "link": "https://stackoverflow.com/users/10065644/elvan"}, "is_accepted": false, "score": 1, "last_activity_date": 1531325325, "last_edit_date": 1531325325, "creation_date": 1531320958, "answer_id": 51288649, "question_id": 51287883, "link": "https://stackoverflow.com/questions/51287883/find-number-of-element-of-array-when-it-use-as-parameter-in-c/51288649#51288649", "title": "find number of element of array when it use as parameter in C++", "body": "<p>This function doesn't work when an array is used as a parameter, it decays into a pointer, and NULL is 0:</p>\n\n<pre><code>int a[5] = { 1,2,0,0,0 };\nint countArray(int a[])\n{\n    int size = 0;\n    while (a[size] != NULL)\n    {\n        size++;\n    }\n    cout &lt;&lt; \"number of array elements are : \" &lt;&lt; size &lt;&lt; endl;\n    return size;\n}\n</code></pre>\n\n<p>The right answer is 5, but the output is 2.</p>\n\n<p>You should change this function as follows:</p>\n\n<pre><code>int countArray(int a[], int size)\n{\n    cout &lt;&lt; \"number of array elements are : \" &lt;&lt; size &lt;&lt; endl;\n    return size;\n}\n</code></pre>\n\n<p>And then you can call it like this:</p>\n\n<pre><code>int a[5] = { 1,2,0,0,0 };\ncountArray(a, 5);\n</code></pre>\n"}], "owner": {"reputation": 132, "user_id": 5679270, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Kq8XK.jpg?s=128&g=1", "display_name": "Ali Ansari", "link": "https://stackoverflow.com/users/5679270/ali-ansari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 0, "accepted_answer_id": 51287967, "answer_count": 3, "score": 0, "last_activity_date": 1531325325, "creation_date": 1531318686, "question_id": 51287883, "link": "https://stackoverflow.com/questions/51287883/find-number-of-element-of-array-when-it-use-as-parameter-in-c", "title": "find number of element of array when it use as parameter in C++", "body": "<p>I write a function in c++ that should count number of elements an array has. function receive array as its parameter. so I try the following method:</p>\n\n<pre><code>int countArray(int a[])\n{\n    int size = 0;\n    while(a[size] != NULL)\n    {\n        size++;\n    }\n    cout&lt;&lt;\"number of array elements are : \"&lt;&lt;size&lt;&lt;endl;\n}\n</code></pre>\n\n<p>this function work but not perfectly. when i pass an array to this function which   has same number of elements as its size <code>int one[3] = {1,2,3}</code> or an unsized array it will return result with one more element. for example for the previous array <code>one[3]</code> it will display <strong>number of array elements are 4</strong>.<br>\nbut in other situation it work fine. for example if I pass an array that has less element than its size <code>int two[4] = {1,2,3}</code> it will work.<br>\nI should use array in this example not <strong>vector</strong> or <strong>struct</strong> , so what should i do or what is the reason that function doesn't work with that kind of array as its parameters.</p>\n"}, {"tags": ["c++", "bluetooth-lowenergy", "mbed"], "comments": [{"owner": {"reputation": 1033, "user_id": 3410010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFRd3.jpg?s=128&g=1", "display_name": "yadhu", "link": "https://stackoverflow.com/users/3410010/yadhu"}, "edited": false, "score": 0, "creation_date": 1531319425, "post_id": 51287739, "comment_id": 89553885, "body": "I think sizeof won&#39;t return uint16_t, try to typecast it to uint16_t then check it. As function signature requires uint16_t"}, {"owner": {"reputation": 1424, "user_id": 4816231, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10155382098795234/picture?type=large", "display_name": "amitchone", "link": "https://stackoverflow.com/users/4816231/amitchone"}, "reply_to_user": {"reputation": 1033, "user_id": 3410010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFRd3.jpg?s=128&g=1", "display_name": "yadhu", "link": "https://stackoverflow.com/users/3410010/yadhu"}, "edited": false, "score": 0, "creation_date": 1531320162, "post_id": 51287739, "comment_id": 89554504, "body": "@yadhu I&#39;ve tried specifically casting <code>sizeof(data)</code> to a <code>uint16_t</code> only to receive the same error unfortunately!"}, {"owner": {"reputation": 1033, "user_id": 3410010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFRd3.jpg?s=128&g=1", "display_name": "yadhu", "link": "https://stackoverflow.com/users/3410010/yadhu"}, "edited": false, "score": 0, "creation_date": 1531324767, "post_id": 51287739, "comment_id": 89557443, "body": "I hope my answer solves your problem. If it does then accept the answer."}], "answers": [{"tags": [], "owner": {"reputation": 1033, "user_id": 3410010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFRd3.jpg?s=128&g=1", "display_name": "yadhu", "link": "https://stackoverflow.com/users/3410010/yadhu"}, "is_accepted": true, "score": 0, "last_activity_date": 1531324665, "creation_date": 1531324665, "answer_id": 51289797, "question_id": 51287739, "link": "https://stackoverflow.com/questions/51287739/ble-gattserver-write-overloaded-function/51289797#51289797", "title": "BLE gattServer.write() overloaded function", "body": "<p>You are trying send pointer to constant, Although the function signature requires normal pointer. In the below example when value const then compiler will through error.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n    void test(int *ptr)\n    {\n        printf(\"%d\",*ptr);\n    }\n\n\n    int main ()\n    {\n        //const int a = 10; //Gives error\n        int a = 10;       //This works fine.\n\n        test(&amp;a);\n\n        return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 1424, "user_id": 4816231, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10155382098795234/picture?type=large", "display_name": "amitchone", "link": "https://stackoverflow.com/users/4816231/amitchone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 51289797, "answer_count": 1, "score": 0, "last_activity_date": 1531324665, "creation_date": 1531318310, "question_id": 51287739, "link": "https://stackoverflow.com/questions/51287739/ble-gattserver-write-overloaded-function", "title": "BLE gattServer.write() overloaded function", "body": "<p>I'm having an issue trying to update the value of a characteristic within a custom BLE service that's running on an MCU running <code>mbedOS v5.8.6</code>. I am attempting to update the value of this characteristic with the value from a sensor. Please see the function below:</p>\n\n<pre><code>void onDataReadCallback(const GattReadCallbackParams *eventDataP) {\n    if (eventDataP-&gt;handle == dhtServicePtr-&gt;dataStream.getValueHandle()) {\n\n        const uint8_t data = sensorData;\n\n        BLE::Instance().gattServer().write(eventDataP-&gt;handle, &amp;data, sizeof(data), false);   \n    }\n}\n</code></pre>\n\n<p>I have tried explicitly stating the correct variable type (<a href=\"https://os.mbed.com/docs/v5.8/mbed-os-api-doxy/class_gatt_server.html#a7bd0af459475d4c8ee1cd42d659af9d0\" rel=\"nofollow noreferrer\">according to the BLE gattServer reference docs</a>) to no avail.</p>\n\n<p>The exact error I receive is: </p>\n\n<pre><code>Error: No instance of overloaded function \"GattServer::write\" matches the argument list in \"main.cpp\", Line: 135, Col: 39\n</code></pre>\n\n<p>I believe I am doing this correctly according to the afforementioned documentation. So, my question is, where exactly am I going wrong? It's entirely possible that I've just made a stupid mistake!</p>\n\n<p>Thanks,\nAdam</p>\n"}, {"tags": ["c++", "stdstring", "c++98"], "comments": [{"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1531318006, "post_id": 51287587, "comment_id": 89552766, "body": "1 (this must be at least 16 chars long :) )"}, {"owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1531318057, "post_id": 51287587, "comment_id": 89552807, "body": "Both have some advantages and disadvantages which are worth considering in specific contexts"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 10, "creation_date": 1531318060, "post_id": 51287587, "comment_id": 89552812, "body": "Return-value optimizations (especially copy-elision) and move semantics plays a big part making 1 a very good solution."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1531318286, "post_id": 51287587, "comment_id": 89553007, "body": "A user passing a non-empty string to <code>out</code> is no different from a user assigning the result of the first solution to a non-empty string. I don&#39;t see why one has to be extra cautious about it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1531318287, "post_id": 51287587, "comment_id": 89553008, "body": "Unless you have to return multiple values, and even then you can get away without out parameters, you should return the output of the function."}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1531318799, "post_id": 51287587, "comment_id": 89553399, "body": "See Howard&#39;s answer here:  <a href=\"https://stackoverflow.com/questions/4986673/c11-rvalues-and-move-semantics-confusion-return-statement/4986802#4986802\" title=\"c11 rvalues and move semantics confusion return statement\">stackoverflow.com/questions/4986673/&hellip;</a>  Basically, in modern C++ #1 is considered <i>in general</i> to be the best practice"}, {"owner": {"reputation": 668, "user_id": 4241211, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8f50f782920c952772d62eac480a2879?s=128&d=identicon&r=PG&f=1", "display_name": "nonremovable", "link": "https://stackoverflow.com/users/4241211/nonremovable"}, "edited": false, "score": 0, "creation_date": 1531321123, "post_id": 51287587, "comment_id": 89555171, "body": "I would go with 1).  I would only use output parameters if you need to return more than one item.  But this question boils down to your personal preference in most cases."}], "answers": [{"comments": [{"owner": {"reputation": 150, "user_id": 8237410, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TYLH5BtTemM/AAAAAAAAAAI/AAAAAAAABeU/nvfdUkZBS2A/photo.jpg?sz=128", "display_name": "PURVESH PATEL", "link": "https://stackoverflow.com/users/8237410/purvesh-patel"}, "edited": false, "score": 0, "creation_date": 1531319491, "post_id": 51288080, "comment_id": 89553935, "body": "Thanks for your view, plus I am still using 98 version."}, {"owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "reply_to_user": {"reputation": 150, "user_id": 8237410, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TYLH5BtTemM/AAAAAAAAAAI/AAAAAAAABeU/nvfdUkZBS2A/photo.jpg?sz=128", "display_name": "PURVESH PATEL", "link": "https://stackoverflow.com/users/8237410/purvesh-patel"}, "edited": false, "score": 0, "creation_date": 1531320156, "post_id": 51288080, "comment_id": 89554497, "body": "@PURVESHPATEL You may want to tag your question <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b-98\">c++-98</a> - that&#39;s very relevant information."}], "tags": [], "owner": {"reputation": 245, "user_id": 10025445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c215777ec0036f32d949a80dbf259345?s=128&d=identicon&r=PG&f=1", "display_name": "acade", "link": "https://stackoverflow.com/users/10025445/acade"}, "is_accepted": false, "score": 0, "last_activity_date": 1531319274, "creation_date": 1531319274, "answer_id": 51288080, "question_id": 51287587, "link": "https://stackoverflow.com/questions/51287587/return-string-vs-passing-string-by-reference-to-update-the-value/51288080#51288080", "title": "Return string vs Passing string by reference to update the value", "body": "<p>In first case, compiler will be able to optimize return value. It will place return value in calling function. For example,</p>\n\n<pre><code>std::string foo(...) { ... }\n\n// ...\n\nstd::string result = foo(...);\n</code></pre>\n\n<p>Compiler will place foo return value right on the result spot.\nIt relieves us from reference argument and premature variable declaring.\nSlightly C++17:\nInstead const std::string&amp; you can use std::string_view. Its advantage is optional for creating temp std::string in following case:</p>\n\n<pre><code>void foo(const std::string&amp;);\n// ...\nfoo(\"hello world\"); // here will be create std::string object\n</code></pre>\n\n<p>With std::string_view (c++17)</p>\n\n<pre><code>void foo(std::string_view);\n// ...\nfoo(\"hello world\"); // more productive\n</code></pre>\n\n<p>+ std::string have operator std::string_view, that leads its to std::string_view</p>\n"}], "owner": {"reputation": 150, "user_id": 8237410, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TYLH5BtTemM/AAAAAAAAAAI/AAAAAAAABeU/nvfdUkZBS2A/photo.jpg?sz=128", "display_name": "PURVESH PATEL", "link": "https://stackoverflow.com/users/8237410/purvesh-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531320547, "creation_date": 1531317901, "last_edit_date": 1531320547, "question_id": 51287587, "link": "https://stackoverflow.com/questions/51287587/return-string-vs-passing-string-by-reference-to-update-the-value", "title": "Return string vs Passing string by reference to update the value", "body": "<p>What will be good programming practice out of two below funcs:</p>\n\n<ol>\n<li><p>This:</p>\n\n<pre><code>std::string buildvalue(const std::string &amp;in) {\n    std::string out;\n    out = // Do some calulation bases on input\n    return out;\n}\n</code></pre></li>\n<li><p>Or this:</p>\n\n<pre><code>void buildvalue(const std::string &amp;in, std::string &amp;out) {\n    out = // Do some calulation bases on input\n}\n</code></pre></li>\n</ol>\n\n<p>Cautious with 2 function is that the caller may pass non-empty string. Is there any points to note. </p>\n"}, {"tags": ["c++", "video", "encoding", "h.264", "openh264"], "comments": [{"owner": {"reputation": 2384, "user_id": 933186, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nudDM.jpg?s=128&g=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/933186/anil"}, "edited": false, "score": 0, "creation_date": 1587680641, "post_id": 51287413, "comment_id": 108614639, "body": "Any updates on this? Were you able to output a h264 file from above?"}], "answers": [{"tags": [], "owner": {"reputation": 1166, "user_id": 4288232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3554c55f06c75c180f95cda6b7fbe82c?s=128&d=identicon&r=PG", "display_name": "TimSC", "link": "https://stackoverflow.com/users/4288232/timsc"}, "is_accepted": true, "score": 1, "last_activity_date": 1589511729, "creation_date": 1589511729, "answer_id": 61810993, "question_id": 51287413, "link": "https://stackoverflow.com/questions/51287413/how-do-i-properly-use-the-openh264-usage-code-example-for-encoding/61810993#61810993", "title": "How do I properly use the OpenH264 Usage Code Example for Encoding?", "body": "<p>Based on <a href=\"https://github.com/cisco/openh264/blob/master/codec/console/enc/src/welsenc.cpp\" rel=\"nofollow noreferrer\">https://github.com/cisco/openh264/blob/master/codec/console/enc/src/welsenc.cpp</a></p>\n\n<pre><code>#include &lt;codec_api.h&gt;\n#include &lt;cassert&gt;\n#include &lt;cstring&gt;\n#include &lt;vector&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\n//Tested with OpenCV 3.3\n#include &lt;opencv2/core.hpp&gt;\n#include &lt;opencv2/imgcodecs.hpp&gt;\n#include &lt;opencv2/highgui.hpp&gt;\n#include &lt;opencv2/imgproc.hpp&gt;\n\nusing namespace std;\nusing namespace cv;\n\nint main()\n{\n    ISVCEncoder *encoder_ = nullptr;\n    int rv = WelsCreateSVCEncoder (&amp;encoder_);\n    assert (0==rv);\n    assert (encoder_ != nullptr);\n\n    int width = 640;\n    int height = 480;\n    int total_num = 100;\n\n    SEncParamBase param;\n    memset (&amp;param, 0, sizeof (SEncParamBase));\n    param.iUsageType = CAMERA_VIDEO_REAL_TIME;\n    param.fMaxFrameRate = 30;\n    param.iPicWidth = width;\n    param.iPicHeight = height;\n    param.iTargetBitrate = 5000000;\n    encoder_-&gt;Initialize (&amp;param);\n\n    Mat image = imread(\"test.jpg\", IMREAD_COLOR );\n    Mat imageResized, imageYuv, imageYuvMini; \n    resize(image, imageResized, Size(width, height));\n    Mat imageYuvCh[3], imageYuvMiniCh[3];\n    cvtColor(imageResized, imageYuv, cv::COLOR_BGR2YUV);\n    split(imageYuv, imageYuvCh);\n    resize(imageYuv, imageYuvMini, Size(width/2, height/2));\n    split(imageYuvMini, imageYuvMiniCh);\n\n    SFrameBSInfo info;\n    memset (&amp;info, 0, sizeof (SFrameBSInfo));\n    SSourcePicture pic;\n    memset (&amp;pic, 0, sizeof (SSourcePicture));\n    pic.iPicWidth = width;\n    pic.iPicHeight = height;\n    pic.iColorFormat = videoFormatI420;\n    pic.iStride[0] = imageYuvCh[0].step;\n    pic.iStride[1] = imageYuvMiniCh[1].step;\n    pic.iStride[2] = imageYuvMiniCh[2].step;\n    pic.pData[0] = imageYuvCh[0].data;\n    pic.pData[1] = imageYuvMiniCh[1].data;\n    pic.pData[2] = imageYuvMiniCh[2].data;\n\n    ofstream outFi;\n    outFi.open (\"test.264\", ios::out | ios::binary);\n\n    for(int num = 0; num&lt;total_num; num++) \n    {\n        //prepare input data\n        rv = encoder_-&gt;EncodeFrame (&amp;pic, &amp;info);\n        assert (rv == cmResultSuccess);\n        if (info.eFrameType != videoFrameTypeSkip /*&amp;&amp; cbk != nullptr*/) \n        {\n            //output bitstream\n            for (int iLayer=0; iLayer &lt; info.iLayerNum; iLayer++)\n            {\n                SLayerBSInfo* pLayerBsInfo = &amp;info.sLayerInfo[iLayer];\n\n                int iLayerSize = 0;\n                int iNalIdx = pLayerBsInfo-&gt;iNalCount - 1;\n                do {\n                    iLayerSize += pLayerBsInfo-&gt;pNalLengthInByte[iNalIdx];\n                    --iNalIdx;\n                } while (iNalIdx &gt;= 0);\n\n                unsigned char *outBuf = pLayerBsInfo-&gt;pBsBuf;\n                outFi.write((char *)outBuf, iLayerSize);\n            }\n\n        }\n    }\n\n    if (encoder_) {\n        encoder_-&gt;Uninitialize();\n        WelsDestroySVCEncoder (encoder_);\n    }\n\n    outFi.close();\n}\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 6278149, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/092596c1b1bc647a15058aafd34567b2?s=128&d=identicon&r=PG&f=1", "display_name": "dYTe", "link": "https://stackoverflow.com/users/6278149/dyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2122, "favorite_count": 2, "accepted_answer_id": 61810993, "answer_count": 1, "score": 4, "last_activity_date": 1589511729, "creation_date": 1531317473, "question_id": 51287413, "link": "https://stackoverflow.com/questions/51287413/how-do-i-properly-use-the-openh264-usage-code-example-for-encoding", "title": "How do I properly use the OpenH264 Usage Code Example for Encoding?", "body": "<p>I have an image and want to encode it with <a href=\"https://github.com/cisco/openh264/\" rel=\"nofollow noreferrer\">OpenH264</a>.</p>\n\n<p>So far this is the code I derived from their <a href=\"https://github.com/cisco/openh264/wiki/UsageExampleForEncoder\" rel=\"nofollow noreferrer\">wiki</a>:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iterator&gt;\n\n#include &lt;iostream&gt;\n#include &lt;codec_api.h&gt; //standard api for openh264\n\n//additional libaries used by sample code\n#include &lt;codec_app_def.h&gt;\n#include &lt;codec_def.h&gt;\n#include &lt;codec_ver.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;vector&gt;\n#include &lt;cstring&gt;\nint main()\n{\n  //parameter values\n  int width = 1920;\n  int height = 1080;\n  int framerate = 60;\n  int bitrate = 5000000;\n  int total_num = 500; //what does this value do?\n  //end parameter values\n\n  //Read in the File from bmp\n  std::vector&lt;char&gt; buf; //to store the image information\n\n  std::basic_ifstream&lt;char&gt; file(\"/home/megamol/Git/h264_sample/build/test.bmp\", std::ios::binary); //opens bitstream to source\n  buf = std::vector&lt;char&gt;((std::istreambuf_iterator&lt;char&gt;(file)), std::istreambuf_iterator&lt;char&gt;()); // reads in data to the vector\n\n  std::cout &lt;&lt; \"sizeof buf: \" &lt;&lt; buf.size() &lt;&lt; std::endl;\n\n  //Step 1: set up Encoder\n\n  ISVCEncoder* encoder_;    //declaration of encoder pointer\n  int rv = WelsCreateSVCEncoder (&amp;encoder_);\n\n  //Step 2: initialize with basic parameter\n\n  SEncParamBase param;\n  memset(&amp;param, 0, sizeof (SEncParamBase));\n  param.iUsageType = EUsageType::SCREEN_CONTENT_REAL_TIME;\n  param.fMaxFrameRate = framerate;\n  param.iPicWidth = width;\n  param.iPicHeight = height;\n  param.iTargetBitrate = bitrate; //default value of example\n  encoder_-&gt;Initialize(&amp;param);\n\n  //Step 3: set video format\n\n  int videoFormat = videoFormatI420;\n  encoder_-&gt;SetOption (ENCODER_OPTION_DATAFORMAT, &amp;videoFormat);\n\n  //Step 4: encocode and store output bitstream\n  int frameSize = width * height * 3 / 2;\n  buf.resize(frameSize);  \n\n  SFrameBSInfo info;\n  std::vector&lt;char&gt; compressedData;\n\n  memset (&amp;info, 0, sizeof (SFrameBSInfo));\n  SSourcePicture pic;\n  memset (&amp;pic, 0, sizeof (SSourcePicture));\n  pic.iPicWidth = width;\n  pic.iPicHeight = height;\n  pic.iColorFormat = videoFormatI420;\n  pic.iStride[0] = pic.iPicWidth;\n  pic.iStride[1] = pic.iStride[2] = pic.iPicWidth &gt;&gt; 1;\n  pic.pData[0] = reinterpret_cast&lt;unsigned char*&gt;(&amp;buf[0]);\n  pic.pData[1] = pic.pData[0] + width * height;\n  pic.pData[2] = pic.pData[1] + (width * height &gt;&gt; 2);\n\n   //encodes the frame\n   rv = encoder_-&gt;EncodeFrame (&amp;pic, &amp;info); // encodes the Frame\n   //encoding done encoded Frame should be stored in &amp;info\n\n   //begin decoding block\n   ISVCDecoder *pSvcDecoder;\n   unsigned char *pBuf= &amp;info;\n\n  return 0;\n}\n</code></pre>\n\n<p>I'm not entirely sure whether this is the correct usage of OpenH264 but I'm also not sure how to test it properly.</p>\n\n<p>Now the code example is kind of poorly documented.</p>\n\n<p>What is <code>BufferedData buf;</code> for example? I get that that's supposed to be the input but what is that type? Like how do I load my test.bmp as BufferedData? I don't think that I'm doing that correctly yet.</p>\n\n<p>Another thing I'm pretty confused about is how do I access the output after the encoding? In the example it just says <code>//output bitstream</code> and nothing about saving this output anywhere. I thought the output was <code>info</code> like it says in the <code>codec_api.h</code> header file:</p>\n\n<pre><code>  /**\n  * @brief Encode one frame\n  * @param kpSrcPic the pointer to the source luminance plane\n  *        chrominance data:\n  *        CbData = kpSrc  +  m_iMaxPicWidth * m_iMaxPicHeight;\n  *        CrData = CbData + (m_iMaxPicWidth * m_iMaxPicHeight)/4;\n  *        the application calling this interface needs to ensure the data validation between the location\n  * @param pBsInfo output bit stream\n  * @return  0 - success; otherwise -failed;\n  */\n  virtual int EXTAPI EncodeFrame (const SSourcePicture* kpSrcPic, SFrameBSInfo* pBsInfo) = 0;\n</code></pre>\n\n<p>But apparently it only saves informations about the output. I'm just really confused about all of this.</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 589, "user_id": 9996677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13449a17a4c18ed091939cf1b501c185?s=128&d=identicon&r=PG", "display_name": "meat", "link": "https://stackoverflow.com/users/9996677/meat"}, "edited": false, "score": 1, "creation_date": 1531316774, "post_id": 51287071, "comment_id": 89551740, "body": "Please add a snippet where <code>getSensorData</code> is being invoked and its arguments are set."}, {"owner": {"reputation": 2531, "user_id": 3160529, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/409ccefcab7337f7dc87a4cac668de1d?s=128&d=identicon&r=PG", "display_name": "Shubham", "link": "https://stackoverflow.com/users/3160529/shubham"}, "edited": false, "score": 1, "creation_date": 1531316928, "post_id": 51287071, "comment_id": 89551873, "body": "You should indent your code."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1531316986, "post_id": 51287071, "comment_id": 89551923, "body": "Also please remove commented code from your example as it presumably has no effect on the situation in question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10059339"}, "reply_to_user": {"reputation": 589, "user_id": 9996677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13449a17a4c18ed091939cf1b501c185?s=128&d=identicon&r=PG", "display_name": "meat", "link": "https://stackoverflow.com/users/9996677/meat"}, "edited": false, "score": 0, "creation_date": 1531317056, "post_id": 51287071, "comment_id": 89551973, "body": "@meat done, check it out"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10059339"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1531317253, "post_id": 51287071, "comment_id": 89552145, "body": "@MaxLanghof done check it out"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1531317585, "post_id": 51287071, "comment_id": 89552424, "body": "Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1531318570, "post_id": 51287071, "comment_id": 89553229, "body": "Is that <code>return</code> actually the full code of <code>getSensorData</code>? You should know that the e.g. <code>char* type</code> parameter in there is unrelated to the member <code>char type[32];</code> - one hides the other."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10059339"}, "edited": false, "score": 0, "creation_date": 1531318705, "post_id": 51287071, "comment_id": 89553326, "body": "yes it is, i wanted to return a bunch of variables of different types and i read the way to do that was to create a void function and make the variables i want to pass pointers. so should i set char *type like this-&gt;type to  fix it?"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1531318909, "post_id": 51287071, "comment_id": 89553491, "body": "I can&#39;t reproduce your problem as you can see <a href=\"http://cpp.sh/56j2q\" rel=\"nofollow noreferrer\">here</a>. You need to provide more information or create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> containing the problem."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1531329020, "post_id": 51287071, "comment_id": 89559589, "body": "Giving parameters to a function that is a member of a class names that match the names of data members of that same class is a terrible idea. I suggest renaming class data members to names that have an underscore at the end, like <code>type_</code>, <code>material_</code>, and so on."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10059339"}, "edited": false, "score": 0, "creation_date": 1531317221, "post_id": 51287197, "comment_id": 89552112, "body": "where should i print them out? how are they uninitialized if I just initialized them in the constructor?"}], "tags": [], "owner": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "is_accepted": false, "score": 0, "last_activity_date": 1531328221, "last_edit_date": 1531328221, "creation_date": 1531316903, "answer_id": 51287197, "question_id": 51287071, "link": "https://stackoverflow.com/questions/51287071/pointer-arguments-in-void-function-returning-inconsistent-values/51287197#51287197", "title": "Pointer arguments in void function returning inconsistent values", "body": "<p>You uninitialized arguments are set to random garbage no matter if you call <code>getData()</code> or not. Try to print them out without calling <code>getData()</code> and see.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10059339"}, "edited": false, "score": 0, "creation_date": 1531320342, "post_id": 51288212, "comment_id": 89554613, "body": "the last implementation worked for my chars, but my double and int are returning as addresses still . i took the pointer before <code>this</code> but still the same."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1531321348, "post_id": 51288212, "comment_id": 89555334, "body": "There is no way using the <code>z</code> way would do anything with adresses. All your non-pointer (i.e. non-string) values should follow the <code>z</code> example. If you were to use <code>std::string</code> instead of <code>char[]</code> you wouldn&#39;t have to touch a single pointer (other than <code>this</code>)."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 1, "last_activity_date": 1531324955, "last_edit_date": 1531324955, "creation_date": 1531319676, "answer_id": 51288212, "question_id": 51287071, "link": "https://stackoverflow.com/questions/51287071/pointer-arguments-in-void-function-returning-inconsistent-values/51288212#51288212", "title": "Pointer arguments in void function returning inconsistent values", "body": "<p>Your implementation of <code>Sensor::getData</code> does not do what you think it does.</p>\n\n<p>Let's look at this class:</p>\n\n<pre><code>class Foo\n{\n  void getX(int* x)\n  {\n  }\n\n  int* x;\n};\n</code></pre>\n\n<p>Within <code>getX</code>, the <em>parameter</em> <code>x</code> <strong>hides</strong> the <em>member</em> <code>x</code> of the same name. This function does literally nothing: A user passes a pointer to an <code>int</code>, which gets the name <code>x</code> in this function. The member is not automatically copied into there (which would be surprising, since you could name the parameter anything else). If you want to do that, you must do it explicitly:</p>\n\n<pre><code>void getX(int* x)\n{\n  *x = *this-&gt;x; // Pointed-to value is copied\n  //x = this-&gt;x; // Pointer is copied\n}\n</code></pre>\n\n<p>If you do not set the function parameter to anything, the pointer will keep pointing to random garbage in memory, which is what you are seeing in your debugger.</p>\n\n<hr>\n\n<p>The more common way to denote <em>\"this parameter will be changed/set by this function\"</em> is passing a reference:</p>\n\n<pre><code>class Foo\n{\n  void get(char*&amp; x, int*&amp; y, double&amp; z)\n  {\n    x = this-&gt;x; // Now both parameter and member point to the same location.\n    y = this-&gt;y; // Now both parameter and member point to the same location.\n    z = this-&gt;z;\n  }\n\n  char x[32];\n  int* y;\n  double z;\n};\n</code></pre>\n\n<p>Or, if you don't want to copy the <em>pointers</em> but the <em>pointed-to values</em>:</p>\n\n<pre><code>  void get(char* x, int* y, double&amp; z)\n  {\n    strcopy(x, this-&gt;x);\n    *y = *this-&gt;y;\n    z = this-&gt;z;\n  }\n</code></pre>\n\n<p>(PS: I recommend using <code>std::string</code> instead of char arrays if your use case allows for it.)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10059339"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1531328221, "creation_date": 1531316551, "last_edit_date": 1531324456, "question_id": 51287071, "link": "https://stackoverflow.com/questions/51287071/pointer-arguments-in-void-function-returning-inconsistent-values", "title": "Pointer arguments in void function returning inconsistent values", "body": "<p>This might be a stupid simple thing I'm overlooking, but I am setting values in the <code>Data::Data(char *DataType...)</code> function as they are being passed in, and as I hover over them, they are setting fine (the variables <code>type, material, ID, unit, reading</code> when hovered over are what they should be).</p>\n\n<p>However, when the <code>getData</code> function is called below, when I hover over the pointer arguments(<code>*type, *materials.. etc</code>) they are set to random strings like directory names and file names. I'm not sure why this is happening, because when the variables are being set above they are right. </p>\n\n<p>I've included the header and implementation files for the Data class, where all of these functions are defined, but If I need include where they are being called please let me know, the only reason I didn't is because the calls are short and files are filled with other irrelevant stuff. Thanks</p>\n\n<pre><code>Data.cpp\n#include \"Data.hpp\"\n\nSensor::Sensor(char *DataType, char *Material, int ID, char *Sensor, double Min, double Max) {\n  strcpy(type, Type);\n  strcpy(material, Material);\n  ID = SIDs;\n  strcpy(unit, Units);\n  max = Maxs;\n  min = Mins;\n}\nSensor::Sensor() {}\n\n\ndouble Data::generateData() {\n  reading = min + (rand() % (int)(max - min + 1));\n  return reading;\n}\n\nvoid Data::getData(char *type, char *material, int *ID, char *unit, double *reading) {\n  return;\n}\n\nData::~Data(){}\n</code></pre>\n\n<p>Data.hpp</p>\n\n<pre><code>#ifndef Data_hpp\n#define Data_hpp\n\n#include\n#include\n#include\n\nusing namespace std;\n\nclass Data\n{\npublic:\n  Data();\n  Data(char *Type, char *Material, int ID, char *Unit, double Min, double Max);\n  ~Data();\n\n\n  void getData(char *type, char *material, int *ID, char *unit, double *reading);\n\nprivate:\n  char type[32];\n  char material[32];\n  int ID;\n  int reading;\n  char unit[32];\n  double min;\n  double max;\n  double generateData();\n};\n#endif \n</code></pre>\n"}, {"tags": ["c++", "recursion"], "comments": [{"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1531318419, "post_id": 51286904, "comment_id": 89553123, "body": "in your function search when <code>(value &lt; root-&gt;data)</code> you call search with two parameters implicitly setting <code>parent</code> to null, but this will cause an error since you assign to *parent = root i.e. you dereference <code>parent</code>(nullptr) and then assign to it"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1531326499, "post_id": 51286904, "comment_id": 89558308, "body": "Your code is incomplete; in particular, it seems to be missing a <code>main()</code> function and at least one <code>#include</code>. Please <a href=\"https://stackoverflow.com/posts/51286904/edit\">edit</a> your code so it&#39;s a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem (including any necessary inputs, but preferably not needing any), then we can try to reproduce and solve it. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 5066, "user_id": 5067761, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/947067565354445/picture?type=large", "display_name": "Ahtisham", "link": "https://stackoverflow.com/users/5067761/ahtisham"}, "edited": false, "score": 0, "creation_date": 1531317786, "post_id": 51287091, "comment_id": 89552588, "body": "In what way I need to fix the design ? Can you give the suggestions ? And I don&#39;t understand you the solution quite well can you please elaborate ?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 5066, "user_id": 5067761, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/947067565354445/picture?type=large", "display_name": "Ahtisham", "link": "https://stackoverflow.com/users/5067761/ahtisham"}, "edited": false, "score": 0, "creation_date": 1531317999, "post_id": 51287091, "comment_id": 89552763, "body": "Well, if <code>search(root-&gt;left, value, parent)</code> failed to find something, should you really be updating <code>target</code> ?"}, {"owner": {"reputation": 5066, "user_id": 5067761, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/947067565354445/picture?type=large", "display_name": "Ahtisham", "link": "https://stackoverflow.com/users/5067761/ahtisham"}, "edited": false, "score": 0, "creation_date": 1531322266, "post_id": 51287091, "comment_id": 89555944, "body": "Wouldn&#39;t the <code>if (root-&gt;left-&gt;data == value)</code> statement prevent <code>parent</code> to change if <code>search(root-&gt;left, value, parent)</code> Failed ?"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1531316615, "creation_date": 1531316615, "answer_id": 51287091, "question_id": 51286904, "link": "https://stackoverflow.com/questions/51286904/runtime-error-while-recursively-calling-a-function-with-a-double-pointer-as-its/51287091#51287091", "title": "Runtime error while recursively calling a function with a double pointer as its default argument in c++", "body": "<p>The simple reason is that <code>*parent=...</code> is an assignment. That requires that <code>parent</code> is a valid (non-null) pointer. Yet you use <code>nullptr</code> as the default value of <code>parent</code>. </p>\n\n<p>You'll need to fix the design of this function. This is not the only flaw. </p>\n"}], "owner": {"reputation": 5066, "user_id": 5067761, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/947067565354445/picture?type=large", "display_name": "Ahtisham", "link": "https://stackoverflow.com/users/5067761/ahtisham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531316615, "creation_date": 1531316152, "question_id": 51286904, "link": "https://stackoverflow.com/questions/51286904/runtime-error-while-recursively-calling-a-function-with-a-double-pointer-as-its", "title": "Runtime error while recursively calling a function with a double pointer as its default argument in c++", "body": "<p><strong>What I am trying to do:</strong></p>\n\n<p>I am trying to delete a node in a binary search tree. But before deleting the node we first have to search if the node exists and that I am checking in my search function which returns the address of the node where the match is found.  </p>\n\n<p><strong>What is the problem:</strong></p>\n\n<p>After execution, the program throws an exception: <code>Process returned -1073741819 (0xC0000005)</code> And I believe the problem is with the statement <code>(*parent) = root;</code>But I don't know why it does so. And how to fix it.</p>\n\n<p><strong>My code:</strong> </p>\n\n<p><strong><em>Struct Defined As:</em></strong></p>\n\n<pre><code>struct tree{\n    int data;\n    struct tree *left, *right;\n};\n</code></pre>\n\n<p><strong><em>Search function:</em></strong></p>\n\n<pre><code>tree * search(tree *root, int value, tree **parent = NULL){\n\n    tree * target = NULL;\n    if (!root) return root;\n    if (root-&gt;data == value) return root;\n    if (value &lt; root-&gt;data){\n        // This returns the matched node\n        target = search(root-&gt;left, value);\n        // and this stores the parent of the matched node\n        if (root-&gt;left-&gt;data == value)\n            (*parent) = root;\n    } else {\n        target = search(root-&gt;right, value);\n        if (root-&gt;right-&gt;data == value)\n            (*parent) = root;\n    }\n    return target;\n}\n</code></pre>\n\n<p><strong><em>Delete function:</em></strong></p>\n\n<pre><code>void del(tree *root, int value){\n    tree * parent = NULL;\n    if (!root) return;\n    tree *target = search(root, value, &amp;parent);\n    // Deletion logic goes here\n}\n</code></pre>\n"}, {"tags": ["c++", "virtual"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1531316157, "post_id": 51286866, "comment_id": 89551263, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1531316527, "post_id": 51286866, "comment_id": 89551534, "body": "What at least goes wrong is that you access <code>Team</code>s members before class being defined!"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1531316902, "post_id": 51286866, "comment_id": 89551851, "body": "It you had reduced this to a minimal example (as you should), you&#39;d notice that the same problem occurs even after removing <code>class Swordsman</code> and the <code>virtual</code> before <code>Unit::attack</code>."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1531319011, "post_id": 51286866, "comment_id": 89553568, "body": "Another problem: you are producing memory leaks by not deleting the created objects again! Consider using smart pointers to hold aggregate objects within your classes."}], "answers": [{"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 1, "last_activity_date": 1531319064, "last_edit_date": 1531319064, "creation_date": 1531317157, "answer_id": 51287296, "question_id": 51286866, "link": "https://stackoverflow.com/questions/51286866/virtual-function-dont-work/51287296#51287296", "title": "Virtual function don&#39;t work", "body": "<p>Omitting anything irrelevant:</p>\n\n<pre><code>class Team;\nclass Unit\n{\npublic:\n    virtual void attack(Team &amp;T)\n    {\n        if(typeid(*this) == typeid(T.arr[i]))\n        //                           ^^^\n        { }\n    }\n};\n</code></pre>\n\n<p>You are accessing a member of class <code>Team</code>, but at the time given, you only have provided the declaration of <code>Team</code>... Side note: this is not specific to virtual functions, but would occur with <em>any</em> code you write.</p>\n\n<p>Your problem now is that function implementations of both classes <code>Team</code> as well as <code>Unit</code> rely on the complete definition of the other class. So only solution to the problem is to implement one of the functions outside the class, e. g.:</p>\n\n<pre><code>class Team;\nclass Unit\n{\npublic:\n    // requires Team, so only declared, not implemented!\n    virtual void attack(Team &amp;T);\n    //                          ^\n};\n\nclass Team\n{\n    // complete definition!\n};\n\nvoid Unit::attack(Team&amp; t)\n{\n    // now implementation of...\n}\n</code></pre>\n\n<p>Another minor problem is that <code>arr</code> member is private. Well, you provided a getter already (<code>ptr</code>), so use it (and give it a better name...).</p>\n\n<p>If you want to go further towards a clean design, split your units and the team into different compilation units, each coming with a header and a source file:</p>\n\n<p>unit.h:</p>\n\n<pre><code>class Team;\nclass Unit\n{\n    // private members\npublic:\n    // only declarations as above, including constructor/destructor\n    // by the way: you are lacking a virtual destructor!!!\n    virtual ~Unit();\n};\n</code></pre>\n\n<p>unit.cpp:</p>\n\n<pre><code>#include \"unit.h\"\n#include \"team.h\" // fetch the definition of Team!\n\nUnit(/*...*/) { }\nUnit::~Unit() { }\n// function definitions as shown above...\n</code></pre>\n\n<p>You would do the same for <code>Team</code> and even your <code>Unit</code> derived classes as well as the <code>Game</code> class. Be aware, though, that you need the complete class definition available if you want to inherit, so you need to include unit.h already int the headers:</p>\n\n<p>archer.h:</p>\n\n<pre><code>#include \"unit.h\"\n\nclass Archer : public Unit\n{\n    // again, only function declarations...\n    // as base class has already a virtual destructor, own destructor\n    // gets virtual implicitly (even the default one), so if you do\n    // not need it, you do not have to define it...\n};\n</code></pre>\n\n<p>archer.cpp:</p>\n\n<pre><code>#include \"archer.h\"\n// and whatever else needed, solely, unit.h already comes with archer.h\n\n// implementations...\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9522731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f587dd708b543ae0c581c2d16ea3f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Sneikof", "link": "https://stackoverflow.com/users/9522731/sneikof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 51287296, "answer_count": 1, "score": -1, "last_activity_date": 1531320924, "creation_date": 1531316063, "last_edit_date": 1531320924, "question_id": 51286866, "link": "https://stackoverflow.com/questions/51286866/virtual-function-dont-work", "title": "Virtual function don&#39;t work", "body": "<p>This code isn't compiled. All problems in virtual function <em>attack()</em> in basic class.</p>\n\n<p>It hasn't got acces to massive in class <em>Team</em>. I was trying do theese classes friend.But it do not work whatever. Also I've done function ptr but it don't work.</p>\n\n<p>Virtual function don't work in inherited classes too. Visual studio 2015 shows errors:</p>\n\n<blockquote>\n  <p>C2228, C2227, C2027.</p>\n</blockquote>\n\n<p>Please help.</p>\n\n<pre><code>class Team;\nclass Unit\n{\n protected:\nint hp;\nint dmg;\nint doodge;\n public:\nUnit(int hp, int dmg, int doodge): hp(hp), dmg(dmg), doodge(doodge){}\nint GetHP()\n{\n    return hp;\n}\nvoid SetHP(int hp)\n{\n    this-&gt;hp = hp;\n}\nvirtual void attack(Team &amp;T)\n{\n    int id = rand() % 3;\n    for (int i = 0; i &lt; 3; i++)\n        if (typeid(*this) == typeid(T.arr[i]))\n        {\n            id = i;\n            break;\n        }\n    if (T.arr[id] &lt;= 0)\n        return;\n    else\n        T.arr[id]-&gt;SetHP(T.arr[id]-&gt;GetHP() - this-&gt;dmg);\n }\n};\nclass Swordsman:public Unit\n{\n public:\nSwordsman():Unit(15,5,60){}\n//virtual void attack(Team &amp; T)override\n//{\n//  int id = rand() % 3;\n//  for (int i = 0; i &lt; 3; i++)\n//      if (typeid(Swordsman) == typeid())\n//      {\n//          id = i;\n//          break;\n//      }\n//  if (*T.arr[id]-&gt;GetHP &lt;= 0)\n//      return;\n//  else\n//      *T.arr[id]-&gt;SetHP(T.arr[id]-&gt;GetHP() - dmg);\n//}\n};\nclass Archer :public Unit\n{\npublic:\nArcher() :Unit(12, 4, 40) {}\n//virtual void attack(Team &amp; T)override\n//{\n//  int id = rand() % 3;\n//  for (int i = 0; i &lt; 3; i++)\n//      if (typeid(Archer) == typeid())\n//      {\n//          id = i;\n//          break;\n//      }\n//  if (*T.arr[id]-&gt;GetHP &lt;= 0)\n//      return;\n//  else\n//      *T.arr[id]-&gt;SetHP(T.arr[id]-&gt;GetHP() - dmg);\n//}\n};\nclass Mage :public Unit\n{\n public:\nMage() :Unit(8, 10, 30) {}\n/*virtual void attack(Team &amp; T)override\n{\n    int id = rand() % 3;\n    for (int i = 0; i &lt; 3; i++)\n        if (typeid(*this) == typeid())\n        {\n            id = i;\n            break;\n        }*/\n};\nclass Team\n{\nstatic short counter;\nstring name;\nUnit* arr[3];\npublic:\nTeam()\n{\n    name = \"Team \" + counter++;\n    for (int i = 0; i &lt; 3; i++)\n    {\n        int selecter = rand() % 3;\n        switch (selecter)\n        {\n        case 0:\n            arr[i] = new Swordsman();\n            break;\n        case 1:\n            arr[i] = new Archer();\n            break;\n        case 2:\n            arr[i] = new Mage();\n            break;\n        }\n    }\n}\n~Team()\n{\n    delete[]arr;\n}\nUnit * ptr(int id)\n{\n    return arr[id];\n}\nbool check()\n{\n    bool res = false;\n    for (int i = 0; i &lt; 3; i++)\n        if (arr[i]-&gt;GetHP() &gt; 0)\n            res = true;\n    return res;\n}\nvoid print()\n{\n    cout &lt;&lt; endl &lt;&lt; \"\\t\\t\" &lt;&lt; name &lt;&lt; endl &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\" &lt;&lt; typeid(*arr[0]).name() &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\" &lt;&lt; typeid(*arr[1]).name() &lt;&lt; endl;\n    cout &lt;&lt; \"\\t\" &lt;&lt; typeid(*arr[2]).name() &lt;&lt; endl;\n}\nfriend class Unit;\n};\nshort Team::counter = 0;\nclass Game\n{\nTeam A, B;\npublic:\nint Play()\n{\n    while (true)\n    {\n        A.ptr(1)-&gt;attack(B);\n        if (A.check())\n            return 1;\n        else if (B.check())\n            return 2;\n\n    }\n }\n};\nint main()\n{\n       return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "big-o"], "answers": [{"tags": [], "owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "is_accepted": false, "score": 3, "last_activity_date": 1531333322, "last_edit_date": 1531333322, "creation_date": 1531316900, "answer_id": 51287193, "question_id": 51286826, "link": "https://stackoverflow.com/questions/51286826/running-time-complexity-of-two-nested-loops-quadratic-or-linear/51287193#51287193", "title": "Running-time complexity of two nested loops: quadratic or linear?", "body": "<p>Let's analyze the worst-case scenario, i.e. when the condition of the <code>if</code>-statement in the inner loop, <code>(A[j]-A[i]) == B</code>, is never fulfilled, and therefore the statement <code>return 1</code> is never executed.</p>\n\n<p>If we denote <code>A.size()</code> as <code>n</code>, the comparison in the inner loop is performed <code>n-1</code> times for the first iteration of the outer loop, then <code>n-2</code> times for the second iteration, and so on...</p>\n\n<p>So, the number of the comparisons performed in the inner loop for this <em>worst-case</em> scenario is (by calculating the sum of the resulting <a href=\"https://en.wikipedia.org/wiki/Arithmetic_progression\" rel=\"nofollow noreferrer\">arithmetic progression</a> below):</p>\n\n<pre><code>n-1 + n-2 + ... + 1 = (n-1)n/2 = (n^2 - n)/2\n^                 ^\n|_________________|\n     n-1 terms\n</code></pre>\n\n<p>Therefore, the running-time complexity is quadratic, i.e., O(n^2), and not O(n).</p>\n"}], "owner": {"reputation": 19, "user_id": 10065166, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zHGwgUdVjjA/AAAAAAAAAAI/AAAAAAAAFxA/zgev5dfeTdI/photo.jpg?sz=128", "display_name": "shivanshu raj shrivastava", "link": "https://stackoverflow.com/users/10065166/shivanshu-raj-shrivastava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1531333560, "creation_date": 1531315991, "last_edit_date": 1531333560, "question_id": 51286826, "link": "https://stackoverflow.com/questions/51286826/running-time-complexity-of-two-nested-loops-quadratic-or-linear", "title": "Running-time complexity of two nested loops: quadratic or linear?", "body": "<pre><code>int Solution::diffPossible(vector&lt;int&gt; &amp;A, int B) {\n    for (int i = 0; i &lt; A.size(); i++) {\n       for (int j = i+1; j &lt; A.size(); j++)\n          if ((A[j]-A[i]) == B)\n             return 1;      \n    }\n    return 0;\n}\n</code></pre>\n\n<p>This is the solution to a simple question where we are supposed to write a code with time complexity less than or equal to O(n). I think the time complexity of this code is O(n^2) but still it got accepted. So, I am in doubt please tell me the right answer.</p>\n"}, {"tags": ["c++", "qt", "qml", "c++17"], "comments": [{"owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "edited": false, "score": 0, "creation_date": 1531322713, "post_id": 51286723, "comment_id": 89556253, "body": "So you&#39;ve tried it and it works?"}, {"owner": {"reputation": 277, "user_id": 5560389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gutQT.png?s=128&g=1", "display_name": "F.Guerinoni", "link": "https://stackoverflow.com/users/5560389/f-guerinoni"}, "reply_to_user": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "edited": false, "score": 0, "creation_date": 1531328655, "post_id": 51286723, "comment_id": 89559393, "body": "@Mitch no but with other normal enum&#39;s class works..."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 9569769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c85f36db5ba99e5a51f16735402eb2?s=128&d=identicon&r=PG&f=1", "display_name": "tm243", "link": "https://stackoverflow.com/users/9569769/tm243"}, "is_accepted": false, "score": 1, "last_activity_date": 1531380498, "creation_date": 1531380498, "answer_id": 51299667, "question_id": 51286723, "link": "https://stackoverflow.com/questions/51286723/expose-variable-from-c-to-qml/51299667#51299667", "title": "Expose variable from c++ to qml", "body": "<p>Use Q_PROPERTY with the CONSTANT attribute:</p>\n\n<pre><code>Q_PROPERTY(int maxProgram READ getMaxProgram CONSTANT)\n</code></pre>\n\n<p>...</p>\n\n<pre><code>private:\n    int getMaxProgram() const {\n        return maxProgram;\n    }\n</code></pre>\n\n<p>size_t won't work, but since 5.10 you can use qsizetype</p>\n"}, {"tags": [], "owner": {"reputation": 748, "user_id": 3392261, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6fo6p.jpg?s=128&g=1", "display_name": "SourabhKus", "link": "https://stackoverflow.com/users/3392261/sourabhkus"}, "is_accepted": false, "score": 1, "last_activity_date": 1531380804, "creation_date": 1531380804, "answer_id": 51299785, "question_id": 51286723, "link": "https://stackoverflow.com/questions/51286723/expose-variable-from-c-to-qml/51299785#51299785", "title": "Expose variable from c++ to qml", "body": "<p>Qt have a good documentation search them first instead of posting a question.<a href=\"https://doc.qt.io/qt-5.11/qtqml-cppintegration-overview.html\" rel=\"nofollow noreferrer\">OverAll description Page</a> and specific <a href=\"https://doc.qt.io/qt-5.11/qtqml-cppintegration-contextproperties.html\" rel=\"nofollow noreferrer\">Answer</a>.</p>\n\n<p>C++</p>\n\n<pre><code>class ApplicationData : public QObject\n{\n   Q_OBJECT\n public:\n   Q_INVOKABLE QDateTime getCurrentDateTime() const {\n    return QDateTime::currentDateTime();\n   }\n};\n\nint main(int argc, char *argv[]) {\n  QGuiApplication app(argc, argv);\n\n  QQuickView view;\n\n  ApplicationData data;\n  view.rootContext()-&gt;setContextProperty(\"applicationData\", &amp;data);\n\n  view.setSource(QUrl::fromLocalFile(\"MyItem.qml\"));\n  view.show();\n\n  return app.exec();\n}\n</code></pre>\n\n<p>QML </p>\n\n<pre><code>// MyItem.qml\nimport QtQuick 2.0\n\nText { text: applicationData.getCurrentDateTime() }\n</code></pre>\n"}], "owner": {"reputation": 277, "user_id": 5560389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gutQT.png?s=128&g=1", "display_name": "F.Guerinoni", "link": "https://stackoverflow.com/users/5560389/f-guerinoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1531380804, "creation_date": 1531315697, "question_id": 51286723, "link": "https://stackoverflow.com/questions/51286723/expose-variable-from-c-to-qml", "title": "Expose variable from c++ to qml", "body": "<pre><code>class Program\n{\npublic:\n    Program() = delete;\n    Program(const QString &amp;n, const QString &amp;ip);\n    Program(const Program &amp;other) = delete;\n    Program(Program &amp;&amp;other) = default;\n    ~Program() = default;\n\n    Program &amp;operator=(const Program &amp;other) = delete;\n    Program &amp;operator=(const Program &amp;&amp;other) = delete;\n\n    constexpr static size_t maxProgram = 99;\n\nprivate:\n    QString name;\n    QString imagePath;\n};\n</code></pre>\n\n<p>Hi, I want expose my variable <code>maxProgram</code> from this class to QML, I think thant in the following code its work but I appreciate other clean solution.</p>\n\n<pre><code>enum def {\n    foo = maxProgram\n};\nQ_ENUM(def)\n</code></pre>\n"}, {"tags": ["c#", "c++", "visual-studio-2015", "c++-cli", "mscorlib"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1531322272, "post_id": 51286634, "comment_id": 89555947, "body": "That is normal, version 2.0.5.0 is a special version of mscorlib that is used by Portable Class Libraries.  Libraries that were designed to run on different kinds of platforms.  It is retargetable, the CLR resolves it to version 4.0.0.0 at runtime.  It is not the cause of your compile error."}, {"owner": {"reputation": 1125, "user_id": 442806, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2947e508ad7300f7005464056458762d?s=128&d=identicon&r=PG", "display_name": "Sam Carleton", "link": "https://stackoverflow.com/users/442806/sam-carleton"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1531352424, "post_id": 51286634, "comment_id": 89568546, "body": "Hans, any suggestions on what I should be looking for?  I do find the same &quot;warning MSB3277&quot; message in the verbosity mode, scroll through all the assemblies listed under it (long, long list) and everything is using v4 or greator.  Any suggestions?"}], "owner": {"reputation": 1125, "user_id": 442806, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2947e508ad7300f7005464056458762d?s=128&d=identicon&r=PG", "display_name": "Sam Carleton", "link": "https://stackoverflow.com/users/442806/sam-carleton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531315454, "creation_date": 1531315454, "question_id": 51286634, "link": "https://stackoverflow.com/questions/51286634/vs2015-warning-msb3277-conflict-between-mscorlib", "title": "VS2015 warning MSB3277 conflict between mscorlib", "body": "<p>I am trying to upgrade a program that has three different languages from VS2008 to VS2015 and running into a warning MSB3277 which is a conflict between two different versions of mscorlib.  The languages:  native C/C++ static library, C++/CLI assembly, two C# assemblies and one final C# exe.</p>\n\n<p>It looks like the native C/C++ is compiling fine, along with the C++/CLI.  The problem comes in compiling the C# exe, along with the MSB3277 it cannot see one of the namespaces defined in the C++/CLI.  My theory is that the mscorlib issue is between the C++/CLI and the C# code causing the namespace not to be found. </p>\n\n<p>Here is what I get when I turn on verbose logging.  It looks to me like the 3rd party libraries which are .Net 4.0 are still using the .Net v2 of mscorlib, is that correct?  If so, how do I fix it?</p>\n\n<pre><code>1&gt;  There was a conflict between \"mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" and \"mscorlib, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e, Retargetable=Yes\". (TaskId:13)\n1&gt;      \"mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" was chosen because it was primary and \"mscorlib, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e, Retargetable=Yes\" was not. (TaskId:13)\n1&gt;      References which depend on \"mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" [C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.7.2\\mscorlib.dll]. (TaskId:13)\n1&gt;          C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.7.2\\mscorlib.dll (TaskId:13)\n1&gt;            Project file item includes which caused reference \"C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.7.2\\mscorlib.dll\". (TaskId:13)\n1&gt;              C:\\Program Files (x86)\\Reference Assemblies\\Microsoft\\Framework\\.NETFramework\\v4.7.2\\mscorlib.dll (TaskId:13)\n1&gt;              System.Data.SQLite, Version=1.0.108.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139, processorArchitecture=MSIL (TaskId:13)\n1&gt;              C:\\mainSolution\\exeProgram\\Debug\\cppcliLibrary.dll (TaskId:13)\n1&gt;              Common.Logging, Version=3.0.0.0, Culture=neutral, PublicKeyToken=af08829b84f0328e, processorArchitecture=MSIL (TaskId:13)\n1&gt;              log4net (TaskId:13)\n1&gt;              Spring.Core, Version=2.0.1.45000, Culture=neutral, PublicKeyToken=65e474d141e25e07, processorArchitecture=MSIL (TaskId:13)\n1&gt;          C:\\licenseMgr\\3rdPartyLibraries\\log4net-2.0.8\\bin\\net\\4.5\\release\\log4net.dll (TaskId:13)\n1&gt;            Project file item includes which caused reference \"C:\\licenseMgr\\3rdPartyLibraries\\log4net-2.0.8\\bin\\net\\4.5\\release\\log4net.dll\". (TaskId:13)\n1&gt;              C:\\mainSolution\\exeProgram\\Debug\\cppcliLibrary.dll (TaskId:13)\n1&gt;              log4net (TaskId:13)\n1&gt;          C:\\mainSolution\\exeProgram\\packages\\System.Data.SQLite.Core.1.0.108.0\\lib\\net46\\System.Data.SQLite.dll (TaskId:13)\n1&gt;            Project file item includes which caused reference \"C:\\mainSolution\\exeProgram\\packages\\System.Data.SQLite.Core.1.0.108.0\\lib\\net46\\System.Data.SQLite.dll\". (TaskId:13)\n1&gt;              System.Data.SQLite, Version=1.0.108.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139, processorArchitecture=MSIL (TaskId:13)\n1&gt;          C:\\mainSolution\\exeProgram\\packages\\Spring.Core.2.0.1\\lib\\net45\\Spring.Core.dll (TaskId:13)\n1&gt;            Project file item includes which caused reference \"C:\\mainSolution\\exeProgram\\packages\\Spring.Core.2.0.1\\lib\\net45\\Spring.Core.dll\". (TaskId:13)\n1&gt;              Spring.Core, Version=2.0.1.45000, Culture=neutral, PublicKeyToken=65e474d141e25e07, processorArchitecture=MSIL (TaskId:13)\n1&gt;          C:\\mainSolution\\exeProgram\\packages\\Common.Logging.3.0.0\\lib\\net40\\Common.Logging.dll (TaskId:13)\n1&gt;            Project file item includes which caused reference \"C:\\mainSolution\\exeProgram\\packages\\Common.Logging.3.0.0\\lib\\net40\\Common.Logging.dll\". (TaskId:13)\n1&gt;              Spring.Core, Version=2.0.1.45000, Culture=neutral, PublicKeyToken=65e474d141e25e07, processorArchitecture=MSIL (TaskId:13)\n1&gt;              Common.Logging, Version=3.0.0.0, Culture=neutral, PublicKeyToken=af08829b84f0328e, processorArchitecture=MSIL (TaskId:13)\n1&gt;          C:\\mainSolution\\exeProgram\\Debug\\cppcliLibrary.dll (TaskId:13)\n1&gt;            Project file item includes which caused reference \"C:\\mainSolution\\exeProgram\\Debug\\cppcliLibrary.dll\". (TaskId:13)\n1&gt;              C:\\mainSolution\\exeProgram\\Debug\\cppcliLibrary.dll (TaskId:13)\n1&gt;      References which depend on \"mscorlib, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e, Retargetable=Yes\" []. (TaskId:13)\n1&gt;          C:\\mainSolution\\exeProgram\\packages\\Common.Logging.Core.3.0.0\\lib\\net40\\Common.Logging.Core.dll (TaskId:13)\n1&gt;            Project file item includes which caused reference \"C:\\mainSolution\\exeProgram\\packages\\Common.Logging.Core.3.0.0\\lib\\net40\\Common.Logging.Core.dll\". (TaskId:13)\n1&gt;              Common.Logging.Core, Version=3.0.0.0, Culture=neutral, PublicKeyToken=af08829b84f0328e, processorArchitecture=MSIL (TaskId:13)\n1&gt;              Common.Logging, Version=3.0.0.0, Culture=neutral, PublicKeyToken=af08829b84f0328e, processorArchitecture=MSIL (TaskId:13)\n1&gt;              Spring.Core, Version=2.0.1.45000, Culture=neutral, PublicKeyToken=65e474d141e25e07, processorArchitecture=MSIL (TaskId:13)\n1&gt;          C:\\mainSolution\\exeProgram\\packages\\Spring.Core.2.0.1\\lib\\net45\\Spring.Core.dll (TaskId:13)\n1&gt;            Project file item includes which caused reference \"C:\\mainSolution\\exeProgram\\packages\\Spring.Core.2.0.1\\lib\\net45\\Spring.Core.dll\". (TaskId:13)\n1&gt;              Spring.Core, Version=2.0.1.45000, Culture=neutral, PublicKeyToken=65e474d141e25e07, processorArchitecture=MSIL (TaskId:13)\n1&gt;          C:\\mainSolution\\exeProgram\\packages\\Common.Logging.3.0.0\\lib\\net40\\Common.Logging.dll (TaskId:13)\n1&gt;            Project file item includes which caused reference \"C:\\mainSolution\\exeProgram\\packages\\Common.Logging.3.0.0\\lib\\net40\\Common.Logging.dll\". (TaskId:13)\n1&gt;              Spring.Core, Version=2.0.1.45000, Culture=neutral, PublicKeyToken=65e474d141e25e07, processorArchitecture=MSIL (TaskId:13)\n1&gt;              Common.Logging, Version=3.0.0.0, Culture=neutral, PublicKeyToken=af08829b84f0328e, processorArchitecture=MSIL (TaskId:13)\n</code></pre>\n\n<p>(also asked in Microsoft forms <a href=\"https://social.msdn.microsoft.com/Forums/en-US/550a5602-acd5-4a7f-b0ea-adcd5b781d3a/warning-msb3277-conflict-between-mscorlib?forum=msbuild\" rel=\"nofollow noreferrer\">here</a>)</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "constructor", "copy-constructor"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1531315191, "post_id": 51286500, "comment_id": 89550578, "body": "The short answer would be: run it through a compiler and see the output on the standard output. This is just too broad. One question per question please. As a sidenote your teacher / professor should be aware that <code>using namespace std;</code> is bad practice and we no longer need to <code>return 0;</code> in the main function. And <code>system(&quot;pause&quot;);</code> is dubious too."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1531315385, "post_id": 51286500, "comment_id": 89550702, "body": "The code you show is invalid, as Visual Studio kindly tells you. It seems like your professor haven&#39;t tested it properly, or tested it using a compiler which let the error slip through."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531315487, "post_id": 51286500, "comment_id": 89550774, "body": "This code is incorrect. If you fix the <code>const</code> problems, the output will depend on the version of c++ and what flags you are using. There are some copy elision possibilities which is a type of optimization that is exceptionally allowed to alter the observable behavior of a program."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1531315752, "post_id": 51286500, "comment_id": 89550979, "body": "<code>operator+</code> should definitively not be <code>A&amp; operator+(A&amp; a)</code>. What would you return? If you return either <code>a</code> or <code>*this</code> it implies you modified one of your operands, which the operator is not expected to do. If you try to return a local variable, you will be returning a reference to an object that no longer exists. The problem is solved by a liberal application of <code>const</code>."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1531316001, "post_id": 51286500, "comment_id": 89551154, "body": "I would expect <code>A(const A&amp; a)</code> and If you&#39;re learning modern C++, I would also expect there to be a <code>A(A&amp;&amp; a)</code> move constructor. But anyhow."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1531318857, "post_id": 51286500, "comment_id": 89553435, "body": "Visual Studio didn&#39;t accept this code last year either. It has warned about its own &quot;non-standard extension&quot; for quite some time now. Perhaps last years exam recycled questions from even older exams?"}], "answers": [{"comments": [{"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1531315783, "post_id": 51286645, "comment_id": 89551008, "body": "Indeed, this again proves professors are just people, thus they can make mistakes ;)"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1531315493, "creation_date": 1531315493, "answer_id": 51286645, "question_id": 51286500, "link": "https://stackoverflow.com/questions/51286500/c-copy-constructor-operators/51286645#51286645", "title": "C++ Copy constructor &amp; Operators", "body": "<p>In Standard C++, all of the suggested answers are wrong. The actual behaviour is that the code fails to compile due to the line:</p>\n\n<pre><code>c = a + b; \n</code></pre>\n\n<p>The right hand side has value category <em>prvalue</em>. The <code>operator=</code> function takes <code>A&amp;</code> as parameter, and a prvalue cannot bind to a non-const lvalue reference.</p>\n\n<p>BTW your comment </p>\n\n<blockquote>\n  <p>the operator+ Method should be like this: <code>A&amp; operator+(A&amp; a)</code></p>\n</blockquote>\n\n<p>is wrong. The actual definition of <code>operator+</code> is correct. The mistakes are the copy-constructor and the assignment-operator, they should take <code>A const&amp;</code>.</p>\n\n<hr>\n\n<p>Possibly the exam refers to Microsoft's non-standard language dialect in which a prvalue can bind to an lvalue reference of the same type.</p>\n"}], "owner": {"reputation": 103, "user_id": 7997729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f63431094fe181a8d5bcd5ab754987a4?s=128&d=identicon&r=PG&f=1", "display_name": "D.Rotnemer", "link": "https://stackoverflow.com/users/7997729/d-rotnemer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531315493, "creation_date": 1531315096, "last_edit_date": 1531315237, "question_id": 51286500, "link": "https://stackoverflow.com/questions/51286500/c-copy-constructor-operators", "title": "C++ Copy constructor &amp; Operators", "body": "<p>I'm currently preparing for my exam in C++, and today i came  across the following problem:</p>\n\n<p>Given the following program:</p>\n\n<pre><code>#include &lt;iostream&gt; \nusing namespace std;\nclass A\n{\nprivate:\n    int x, y;\npublic:\n    A(int X = 0, int Y = 0) :x(X), y(Y) \n    {\n        cout &lt;&lt; \"A Constructor\" &lt;&lt; endl;\n    }\n    A(A&amp; a) \n    {\n        x = a.x; y = a.y;  \n        cout &lt;&lt; \"A Copy Constructor\" &lt;&lt; endl;  \n    }\n    A operator+(A a) \n    {\n        A tmp(*this);  \n        tmp.x += a.x;\n        tmp.y += a.y;\n        return tmp;\n    }\n    A&amp; operator=(A&amp; a)\n    { \n         x = a.x;\n         y = a.y;   \n         return *this; \n    }\n};\nint main()\n{\n    A a(1, 2), b(3, 4), c; \n    c = a + b; \n    system(\"pause\");\n    return 0; \n} \n</code></pre>\n\n<p>Which of the following will be the output of the program?</p>\n\n<p><strong>1)</strong> </p>\n\n<p>A Constructor<br>\nA Constructor<br>\nA Constructor<br>\nA Copy Constructor<br>\nA Copy Constructor<br>\nA Copy Constructor </p>\n\n<p><strong>2)</strong></p>\n\n<p>A Constructor<br>\nA Constructor<br>\nA Constructor<br>\nA Copy Constructor<br>\nA Copy Constructor<br>\nA Copy Constructor<br>\nA Copy Constructor</p>\n\n<p><strong>3)</strong></p>\n\n<p>A Constructor<br>\nA Constructor<br>\nA Constructor<br>\nA Copy Constructor                                                                 </p>\n\n<p><strong>4)</strong></p>\n\n<p>A Constructor<br>\nA Constructor<br>\nA Copy Constructor<br>\nA Copy Constructor<br>\nA Copy Constructor </p>\n\n<p>This is a question from the past year exam, and the problem is, that when i run the above code in Visual C++ 2017, it gives an error like you can see in the picture:</p>\n\n<p><a href=\"https://i.stack.imgur.com/G7QzK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G7QzK.png\" alt=\"enter image description here\"></a></p>\n\n<p>And it says: <strong>no operator \"=\" matches these operands, operand types are: A = A</strong>.</p>\n\n<p>I realized what's wrong in the code, and found that the <strong>operator+</strong> Method should be like this:</p>\n\n<pre><code>A&amp; operator+(A&amp; a)\n</code></pre>\n\n<p>Instead of</p>\n\n<pre><code>A operator+(A a)  \n</code></pre>\n\n<p>But the semester is over, and i have no one to ask, so i come here.\nI don't know exactly which version of VC++ was used in the past year exam,\nand because an option of error is not included in the answer options, i understand (maybe) that this code was valid in an earlier version of C++. but my questions are:</p>\n\n<p>Do this error comes from the differences between the versions of C++? </p>\n\n<p>What is the major difference between the above two versions of <strong>operator+</strong> method?</p>\n\n<p>Are the <strong>operator+</strong> and <strong>operator=</strong> methods must have the same return type (i mean by reference or by value)?</p>\n\n<p>Is the parameter of the <strong>operator+</strong> and <strong>operator=</strong> methods must be the same like the parameter of the Copy Constructor?</p>\n\n<p>Any help will be appreciated! Thanks!!</p>\n"}, {"tags": ["c++", "visual-studio-2010", "encryption", "aes", "crypto++"], "comments": [{"owner": {"reputation": 5593, "user_id": 3179310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ffeUP.png?s=128&g=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/3179310/mateusz"}, "edited": false, "score": 0, "creation_date": 1531315205, "post_id": 51286467, "comment_id": 89550586, "body": "Copy your error contents and paste it here in a plain text. Do not use external sites to host any images, use stackoverflow instead.  What do you mean by <i>&quot;visual basic (C++)&quot;</i>? Is it C++ or VB? why did you even mentioned VB?"}, {"owner": {"reputation": 29, "user_id": 10064923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4856c58b36d9a6a6ea775380972fedb4?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok", "link": "https://stackoverflow.com/users/10064923/ashok"}, "reply_to_user": {"reputation": 5593, "user_id": 3179310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ffeUP.png?s=128&g=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/3179310/mateusz"}, "edited": false, "score": 0, "creation_date": 1531315692, "post_id": 51286467, "comment_id": 89550926, "body": "Thanks for response, i wrongly mentioned as Visual basic instead of visual studio(now edited),"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1531316492, "post_id": 51286467, "comment_id": 89551513, "body": "In your instructions the step that should fix this is part of step 6: &quot;Now go to the Linker and the Select the Input and in the Additional Dependency Enter the cryptlib.lib path as shown in the picture&quot;."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1531326995, "post_id": 51286467, "comment_id": 89558589, "body": "The original article can be found at <a href=\"https://www.codeproject.com/Articles/16388/Compiling-and-Integrating-Crypto-into-the-Microsof\" rel=\"nofollow noreferrer\">Compiling and Integrating Crypto++ into the Microsoft Visual C++ Environment</a>. There&#39;s no need to use the ripped article. The original article tells you how to fix the linker errors."}, {"owner": {"reputation": 29, "user_id": 10064923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4856c58b36d9a6a6ea775380972fedb4?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok", "link": "https://stackoverflow.com/users/10064923/ashok"}, "edited": false, "score": 0, "creation_date": 1531375292, "post_id": 51286467, "comment_id": 89573608, "body": "thank you, now i have added &quot;Additional Dependency&quot; as shown in step 6 and also added required header files but still i&#39;m getting below LINKING ERRORS."}, {"owner": {"reputation": 29, "user_id": 10064923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4856c58b36d9a6a6ea775380972fedb4?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok", "link": "https://stackoverflow.com/users/10064923/ashok"}, "edited": false, "score": 0, "creation_date": 1531376235, "post_id": 51286467, "comment_id": 89573979, "body": "Since i couldn&#39;t paste all the error&#39;s here , i&#39;m sharing the dropbox link &lt;<a href=\"https://www.dropbox.com/s/xwq180b0pqp1hch/aes-error.txt?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/xwq180b0pqp1hch/aes-error.txt?dl=0</a>&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1531327144, "post_id": 51289573, "comment_id": 89558667, "body": "Man, you made no effort to answer the question. Perhaps you should open an new question where you can supply the answer."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1531327436, "post_id": 51289573, "comment_id": 89558845, "body": "@jww Did you see &quot;or let me know how to encrypt/decrypt the text with AES in C++(Windows)?&quot; line in the OP&#39;s question?"}], "tags": [], "owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "is_accepted": false, "score": 0, "last_activity_date": 1531323897, "creation_date": 1531323897, "answer_id": 51289573, "question_id": 51286467, "link": "https://stackoverflow.com/questions/51286467/aes-implementation-using-crypto/51289573#51289573", "title": "AES implementation using Crypto++", "body": "<p>I would advise you to drop cryptopp and use Windows built-in cryptography instead. This way, the major part of the code i.e. the algorithms will be supported by MS, and updated as a part of Windows update.</p>\n\n<p>As a nice side effects it will build faster, the binary will be much smaller, and the required library, Advapi32.lib, is part of Windows SDK i.e. you\u2019ll unlikely have linker issues.</p>\n\n<p><a href=\"https://stackoverflow.com/a/29637007/126995\">See this answer</a> for an example how to derive AES key from password. However the code there is less than ideal, instead I usually create simple RAII wrappers like this:</p>\n\n<pre><code>class Context\n{\n    HCRYPTPROV hProv = 0;\npublic:\n    Context() : hProv( 0 ) {}\n    ~Context()\n    {\n        if( 0 != hProv )\n            CryptReleaseContext( hProv, 0 );\n    }\n    operator HCRYPTPROV () const\n    {\n        return hProv;\n    }\n    HRESULT open()\n    {\n        if( !CryptAcquireContext( &amp;hProv, NULL, NULL, PROV_RSA_FULL, CRYPT_VERIFYCONTEXT ) )\n            return GetLastHr();\n        return S_OK;\n    }\n};\n</code></pre>\n\n<p>And do the same for other HCRYPT* handles I need.</p>\n\n<p>Then see <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/wincrypt/nf-wincrypt-cryptencrypt\" rel=\"nofollow noreferrer\">MSDN example code</a> on how to encrypt data with that AES key.</p>\n"}, {"comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1531462753, "post_id": 51318689, "comment_id": 89613300, "body": "It sounds like you were mixing/matching versions of the library. It sounded like that before but you did not state you had different versions of the library installed at different places. Your setup will probably succeed if you completely delete the old Crypto++ 5.6.2 files."}], "tags": [], "owner": {"reputation": 29, "user_id": 10064923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4856c58b36d9a6a6ea775380972fedb4?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok", "link": "https://stackoverflow.com/users/10064923/ashok"}, "is_accepted": false, "score": 1, "last_activity_date": 1531462536, "creation_date": 1531462536, "answer_id": 51318689, "question_id": 51286467, "link": "https://stackoverflow.com/questions/51286467/aes-implementation-using-crypto/51318689#51318689", "title": "AES implementation using Crypto++", "body": "<p>I solved this LINKING Errors by changing the CryptoPP version.</p>\n\n<p>Previously I used CryptoPP version (7.0.0) in my visual studio 2010, now i have tried with CryptoPP version (5.6.2).</p>\n\n<p>Now i can able to compile without any errors.</p>\n\n<p>Thanks for your suggestions.</p>\n"}], "owner": {"reputation": 29, "user_id": 10064923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4856c58b36d9a6a6ea775380972fedb4?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok", "link": "https://stackoverflow.com/users/10064923/ashok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1531462536, "creation_date": 1531314990, "last_edit_date": 1531406128, "question_id": 51286467, "link": "https://stackoverflow.com/questions/51286467/aes-implementation-using-crypto", "title": "AES implementation using Crypto++", "body": "<p>I want to implement AES encryption/decryption in visual studio (C++). I have gone through <a href=\"http://programmingknowledgeblog.blogspot.com/2013/04/compiling-and-integrating-crypto-into.html\" rel=\"nofollow noreferrer\">Compiling and Integrating Crypto++ into the Microsoft Visual C++ Environment + Running Sample program</a>.</p>\n\n<p>I have followed all the steps mentioned there and try to build the application but i got the LINKER ERRORS while compiling, below link is the reference for ERRORS I'm facing in the application. </p>\n\n<pre><code>https://www.dropbox.com/sh/32ajyx0vc6391q0/AACRYndRpbKynntADFgZUdXYa?dl=0\n</code></pre>\n\n<p>Can any one please let me know the solution for this error?</p>\n\n<p>Thanks </p>\n"}, {"tags": ["c++", "data-structures", "trie"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1531314575, "post_id": 51286295, "comment_id": 89550108, "body": "If you program in C++, then please don&#39;t add irrelevant language tags."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1531314622, "post_id": 51286295, "comment_id": 89550134, "body": "Besides that, <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>, and learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>. Also please read <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>, and all of <a href=\"http://idownvotedbecau.se/\" rel=\"nofollow noreferrer\">idownvotedbecau.se</a> to learn some reasons your question might be down-voted. Finally, please <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1531314910, "post_id": 51286295, "comment_id": 89550363, "body": "What specifically doesn&#39;t work? What is getchild supposed to return? Does it do the same thing on both branches?  What actually happens and what did you expect instead?"}, {"owner": {"reputation": 11, "user_id": 7675993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a496a149ef74661649593ddec536db20?s=128&d=identicon&r=PG&f=1", "display_name": "abhi1984", "link": "https://stackoverflow.com/users/7675993/abhi1984"}, "edited": false, "score": 1, "creation_date": 1531315364, "post_id": 51286295, "comment_id": 89550684, "body": "updated question"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1531315639, "post_id": 51286295, "comment_id": 89550889, "body": "Can you expand this into a complete example with some hardcoded input that isn&#39;t working? When you say AB is replaced by CD, where does that happen? Seems like it&#39;s in the code we can&#39;t see."}, {"owner": {"reputation": 11, "user_id": 7675993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a496a149ef74661649593ddec536db20?s=128&d=identicon&r=PG&f=1", "display_name": "abhi1984", "link": "https://stackoverflow.com/users/7675993/abhi1984"}, "edited": false, "score": 1, "creation_date": 1531316208, "post_id": 51286295, "comment_id": 89551306, "body": "updated question"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1531318601, "post_id": 51286295, "comment_id": 89553259, "body": "Debugger.  Use a debugger.  A debugger allows you to single step through your program, <i>watching</i> values in variables (and tracing flow of execution).  Often, debugging your program is faster than correctly posting to StackOverflow and <i>waiting</i> for somebody to inspect or debug your program for you.  Please edit your post with the results of your debugging session."}], "owner": {"reputation": 11, "user_id": 7675993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a496a149ef74661649593ddec536db20?s=128&d=identicon&r=PG&f=1", "display_name": "abhi1984", "link": "https://stackoverflow.com/users/7675993/abhi1984"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531733247, "creation_date": 1531314503, "last_edit_date": 1531733247, "question_id": 51286295, "link": "https://stackoverflow.com/questions/51286295/how-to-convert-a-string-path-to-a-tree-hierarchial-path", "title": "How to convert a string path to a tree (hierarchial path)", "body": "<p>I am trying to insert a string path into a trie data structure, But I am not able to make relation between child and root. it looks like I am not inserting\nelement into proper way into trie.\nFor ex. /AB/CD/DE\n1. first I insert AB ( which work correct)\n2. when I tried to insert CD AB overwrite with CD</p>\n\n<p>I am doing mistake during creation of Trie. I am trying to achieve following way</p>\n\n<pre><code>AB\n \\\n  CD\n  / \\\n DE EF \n</code></pre>\n\n<p>My input is a absolute Unix path like this:</p>\n\n<blockquote>\n  <p>/AB/CD/DE</p>\n  \n  <p>/AB/CD/GH</p>\n</blockquote>\n\n<pre><code>Output of below program \nprocessing path /AB/CD/DE \nprocessing path /AB/CD/FG \nAB \nCD\nSegmentation fault\n</code></pre>\n\n<p>so I can easily convert into a trie.</p>\n\n<pre><code>  #include&lt;algorithm&gt;\n#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;queue&gt;\n#include&lt;vector&gt;\n#include&lt;boost/filesystem.hpp&gt;\n#include&lt;boost/tokenizer.hpp&gt;\n#include &lt;boost/algorithm/string.hpp&gt;\n#include&lt;utility&gt;\n#include \"Command.h\"\nnamespace fs = boost::filesystem;\n\nstruct Dirinfo {\n    std::vector&lt;std::pair&lt;std::string,Dirinfo*&gt;&gt;list;\n    bool leaf_node;\n};\n\nclass Dirmapping {\n    private:\n        Dirinfo *root = nullptr;\n        std::vector&lt;std::string&gt; dirs;\n    public:\n        Dirmapping() = default;\n        Dirmapping(const std::vector&lt;std::string&gt; &amp;dir_name);\n        Dirinfo* getnode();\n        Dirinfo* getchild(Dirinfo *tmp, const std::string &amp;dir_name);\n        void createmap();\n        void display(Dirinfo *root);\n};\n\nDirmapping::Dirmapping(const std::vector&lt;std::string&gt; &amp;dirs): dirs(dirs) {\n    root = getnode();\n}\n\nDirinfo* Dirmapping::getnode() {\n    Dirinfo *node = new Dirinfo;\n    node-&gt;leaf_node = false;\n    return node;\n}\n\nDirinfo* Dirmapping::getchild(Dirinfo *tmp, const std::string &amp;dir_name){\n    for(auto it = tmp-&gt;list.begin(); it != tmp-&gt;list.end(); ++it){\n        if(it-&gt;first == dir_name){\n            it-&gt;second-&gt;leaf_node = false;\n            return it-&gt;second;\n        }\n    }\n    tmp-&gt;list.push_back(make_pair(dir_name, getnode()));\n    tmp-&gt;leaf_node = true;\n    return tmp;\n}\n\nvoid Dirmapping::createmap() {\n    Dirinfo *temp = root;\n    for(auto it = this-&gt;dirs.begin();  it != dirs.end(); ++it) {\n        std::vector&lt;std::string&gt; split_string = Command::split_path(*it);\n        std::cout&lt;&lt;\"processing path \"&lt;&lt;*it&lt;&lt;std::endl;\n        for (auto split_it = split_string.begin(); split_it != split_string.end(); ++split_it){\n            temp = getchild(temp, *split_it);\n        }\n    }\n    display(root);\n}\n\nvoid Dirmapping::display(Dirinfo *root)\n{\n    if (!root-&gt;leaf_node)\n        std::cout&lt;&lt;root-&gt;list[0].first&lt;&lt;std::endl;\n\n    for(auto it = root-&gt;list.begin(); it != root-&gt;list.end(); ++it){\n        if (it-&gt;second) \n            display(it-&gt;second);\n    }\n}\n\nint main() {\n    std::vector&lt;std::string&gt; dir_names;\n    dir_names.push_back(\"/AB/CD/DE\");\n    dir_names.push_back(\"/AB/CD/FG\");\n    Dirmapping dirmap(dir_names);\n    dirmap.createmap();\n    return 0;\n}\n</code></pre>\n\n<p>Command.h</p>\n\n<blockquote>\n  <p>command.h which do split of string using \"/\"</p>\n</blockquote>\n\n<pre><code>namespace Command {\ninline std::vector&lt;std::string&gt; split_path(const std::string &amp;f_path) {\n        std::vector&lt;std::string&gt; token_string;\n        boost::char_separator&lt;char&gt; split(\"/\", \"\\n\");\n        tokenizer tok(f_path, split);\n        for(tokenizer :: iterator it = tok.begin(); it != tok.end(); ++it) {\n            token_string.push_back(*it);\n        }\n        return token_string;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1531313304, "post_id": 51285846, "comment_id": 89549150, "body": "It doens&#39;t need to &quot;look&quot; anything special. The important part is that you have an overloaded <code>operator&#47;</code> which takes a &quot;distance&quot; and a &quot;time&quot; argument and <i>returns</i> a <code>Speed</code> object."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1531313400, "post_id": 51285846, "comment_id": 89549235, "body": "The CppCoreGuidelines are massive, try to link the section that you actually read."}, {"owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "edited": false, "score": 0, "creation_date": 1531313418, "post_id": 51285846, "comment_id": 89549248, "body": "and what literal do you pass to operator <code>&#47;</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1531313524, "post_id": 51285846, "comment_id": 89549315, "body": "You need <code>m</code> and <code>s</code> to each return a different custom type and you need to overload <code>operator &#47;</code> with those types and have it return a speed."}, {"owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "edited": false, "score": 2, "creation_date": 1531313535, "post_id": 51285846, "comment_id": 89549323, "body": "Looks to me like you need both a Distance and Time type both supporting <a href=\"https://en.cppreference.com/w/cpp/language/user_literal\" rel=\"nofollow noreferrer\">user-defined literals</a> where the <code>Distance::operator&#47;</code> return a Speed type."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1531313741, "post_id": 51285846, "comment_id": 89549473, "body": "How about <code>23m</code> and <code>10s</code>? Like in the code? The code is just an <i>example</i>, about what is hard to tell without context (which you really haven&#39;t given us)."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1531313824, "post_id": 51285846, "comment_id": 89549527, "body": "@Someprogrammerdude The scope is here: <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#example-1\" rel=\"nofollow noreferrer\">github.com/isocpp/CppCoreGuidelines/blob/master/&hellip;</a> This is the philosophical section of the CppCoreGuidelines. As such this might be more of a loose suggestion then something they think is technically worth doing ..."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1531313972, "post_id": 51285846, "comment_id": 89549637, "body": "@Someprogrammerdude Furthermore, the enforcement section makes little sense in terms of this specific example. It is mostly about const correctness and casting removal."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1531314057, "post_id": 51285846, "comment_id": 89549698, "body": "@FantasticMrFox Ah that part. Yes, it&#39;s more about expressing what you really want, and what the code should do, rather than being generic. As such the example itself is rather irrelevant, and could have been many other things as well."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1531314155, "post_id": 51285846, "comment_id": 89549779, "body": "To the OP: I think you should not link to the CppCoreGuidelines, and disconnect the example code from it, since the example and the section it is in is really irrelevant to the question that you seem to want to ask. You can still use the example but then elaborate on the problem you have, what you&#39;re wondering about. It is, I think, rather unclear if you&#39;re wondering about user-defined literals or something else."}, {"owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "edited": false, "score": 0, "creation_date": 1531314314, "post_id": 51285846, "comment_id": 89549894, "body": "Alright i will rephrase"}, {"owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "edited": false, "score": 0, "creation_date": 1531314951, "post_id": 51285846, "comment_id": 89550393, "body": "Please remove vote. I rephrased and think it is very clear now"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1531315239, "post_id": 51285846, "comment_id": 89550614, "body": "Is this example even possible? <code>23m</code> can&#39;t be a user-defined literal since it doesn&#39;t start with underscore and I can&#39;t find it in the standard. Where does this literal operator comes from?"}, {"owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "edited": false, "score": 0, "creation_date": 1531315462, "post_id": 51285846, "comment_id": 89550760, "body": "That&#39;s what i am wondering about. It&#39;s not even possible. What i find confusing is that the example lays focus on providing units but this literal just won&#39;t compile IMO."}], "answers": [{"comments": [{"owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "edited": false, "score": 0, "creation_date": 1531314865, "post_id": 51286287, "comment_id": 89550327, "body": "Yes that was not not what i meant. I meant <i>literally</i> passing <code>23m &#47; 10s</code> as arument, not a literal like 2.3"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "edited": false, "score": 0, "creation_date": 1531315125, "post_id": 51286287, "comment_id": 89550533, "body": "@tobilocker I don&#39;t think that is the point of the section. Having the <code>23m</code> as a literal is not possible because the compiler cannot know how to convert this to your type. You can do <code>Distance&lt;M&gt;(23) &#47; Time&lt;S&gt;(10)</code> with a <code>template&lt;SpeedType, DistanceType, TimeType&gt; Speed&lt;SpeedType&gt; operator&#47;(Distance&lt;DistanceType&gt;, Time&lt;TimeType&gt;)</code> if you want but this is much more complex and probably not useful for this specific example."}, {"owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "edited": false, "score": 0, "creation_date": 1531315185, "post_id": 51286287, "comment_id": 89550574, "body": "That was what i was thinking. But i think it&#39;s not just a Bad example that would not compile anyway since it says <code>error: no unit</code> for the first example"}, {"owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "edited": false, "score": 0, "creation_date": 1531315329, "post_id": 51286287, "comment_id": 89550665, "body": "That would not make sense regarding the focus on providing units"}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 1, "last_activity_date": 1531315312, "last_edit_date": 1531315312, "creation_date": 1531314485, "answer_id": 51286287, "question_id": 51285846, "link": "https://stackoverflow.com/questions/51285846/literal-with-number-and-unit-in-an-algebraic-expression-as-argument/51286287#51286287", "title": "Literal with number and unit in an algebraic expression as argument", "body": "<p>From reading the section of the <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#example-1\" rel=\"nofollow noreferrer\">CPPCoreGuidelines</a> I think that maybe you are confusing the intent of the section. The main point is:</p>\n\n<blockquote>\n  <p>Express ideas directly in code.</p>\n</blockquote>\n\n<p>The concept being that the code <code>change_speed(double s)</code> is ambiguous because the units and identity of type is ambiguous. Furthermore <code>change_speed(double speed_m_p_s)</code> is no good because it is easy to get wrong. The suggestion is therefore that you explicitly create the input type. Something like:</p>\n\n<pre><code>enum class SpeedType {\n    M_p_S\n    Km_p_H\n    ...\n}\n\ntemplate&lt;SpeedType type&gt;\nclass Speed {\n\n   explicit Speed(double speed)\n   ... // Some fully specified class that represents a speed.\n\ntemplate&lt;SpeedType type&gt;\nvoid change_speed(Speed&lt;type&gt; s) { ...\n\nchange_speed(2.3) // Implicit conversion means this will be an error\nchange_speed(Speed&lt;M_p_S&gt;(2.3)) // It is clear to the reader and compiler that this is of type speed\n                         // with unit of M_p_S. Go to the Speed class for more information.\n</code></pre>\n\n<p>This is not a perfect example. But conceptually, this is what they are trying to inform you with this section.</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1531317803, "post_id": 51286632, "comment_id": 89552604, "body": "The idea of Boost.Units is that you write <code>23*meter</code>. There&#39;s no type <code>meter</code>. C++ types correspond to SI quantities, such as <code>distance</code>. There are constants of type <code>distance</code>, though, and <code>meter</code> is such a constant. And because the product of two constants is a constant itself, <code>23*meter</code> is also a constant."}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 7, "last_activity_date": 1531316272, "last_edit_date": 1531316272, "creation_date": 1531315452, "answer_id": 51286632, "question_id": 51285846, "link": "https://stackoverflow.com/questions/51285846/literal-with-number-and-unit-in-an-algebraic-expression-as-argument/51286632#51286632", "title": "Literal with number and unit in an algebraic expression as argument", "body": "<p>It <em>sounds</em> like you want something like a units/dimensional analysis type system. See for example <a href=\"https://www.boost.org/doc/libs/1_65_0/doc/html/boost_units/Examples.html\" rel=\"nofollow noreferrer\">Boost.Units</a>.</p>\n\n<p>The fundamental (length, time, etc.) units are defined similarly to the duration types in <a href=\"https://en.cppreference.com/w/cpp/chrono/duration\" rel=\"nofollow noreferrer\"><code>std::chrono</code></a> - just with more than one (time) distinct dimension. The arithmetic operators are implemented to combine units into correctly-dimensioned compound types.</p>\n\n<p>So, rather than defining <code>Speed</code> as an independent type, it's derived from the fundamental <code>Metre</code> and <code>Second</code> types (which are themselves instances of the length and time units, which are probably instances of a generic unit template differentiated by tag types).</p>\n\n<p>If you want to write user-defined literals for SI units, there are examples <a href=\"https://www.codeproject.com/Articles/1088293/Units-and-measures-for-Cplusplus\" rel=\"nofollow noreferrer\">on codeproject</a> or in <a href=\"https://github.com/nholthaus/units\" rel=\"nofollow noreferrer\">this project on Github</a> - I haven't read through either and can't vouch for their quality, but the idea is fine.</p>\n"}, {"comments": [{"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1531315679, "post_id": 51286680, "comment_id": 89550918, "body": "That&#39;s exactly the point. You&#39;re using <code>23_m</code>. In the guidelines they use <code>23m</code>. Where does it come from? Can you reproduce it?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1531315711, "post_id": 51286680, "comment_id": 89550938, "body": "@ThomasSablik <i>we have to use _m and _s to make these valid user defined literals</i>"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1531315722, "post_id": 51286680, "comment_id": 89550950, "body": "Oh man, <code>literal operators</code> how have i never seen this before! +1000 EDIT: I know why now, c++11 :("}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1531315779, "post_id": 51286680, "comment_id": 89551001, "body": "<code>10s</code> is a valid literal operator from <code>std::chrono_literals</code>. So you mean, that this example is not reproducible?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1531315899, "post_id": 51286680, "comment_id": 89551083, "body": "@ThomasSablik Yes, it is, but the standard literals don&#39;t have to obey the <code>_</code> naming convention that all other user defined literals have to obey.  The example most likely did not include that because it wan&#39;t really relevant to the example."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1531315949, "post_id": 51286680, "comment_id": 89551118, "body": "From <a href=\"https://en.cppreference.com/w/cpp/language/user_literal\" rel=\"nofollow noreferrer\">here</a> <code>User Defined Literals - Must begin with the underscore _: the suffixes that do not begin with the underscore are reserved for the literal operators provided by the standard library.</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1531315977, "post_id": 51286680, "comment_id": 89551131, "body": "@FantasticMrFox They are literally the best."}, {"owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "edited": false, "score": 0, "creation_date": 1531315981, "post_id": 51286680, "comment_id": 89551135, "body": "@NathanOliver can you change it to take a <code>10s</code> literal, as Thomas Sablik pointed out"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "edited": false, "score": 0, "creation_date": 1531316011, "post_id": 51286680, "comment_id": 89551163, "body": "@tobilocker No because user created literals don&#39;t allow it."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1531316021, "post_id": 51286680, "comment_id": 89551172, "body": "@NathanOliver ITS A PUN!"}, {"owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "edited": false, "score": 0, "creation_date": 1531316094, "post_id": 51286680, "comment_id": 89551225, "body": "well it doesnt need to be user defined, thats what he pointed out. just change the types in overloaded operator, then we are there"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "edited": false, "score": 0, "creation_date": 1531316157, "post_id": 51286680, "comment_id": 89551264, "body": "@tobilocker You can use <code>std::chrono</code> for the Seconds part. But not for Distance. There is no std::distance."}, {"owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "edited": false, "score": 0, "creation_date": 1531316191, "post_id": 51286680, "comment_id": 89551293, "body": "ah got it. my bad"}, {"owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1531316250, "post_id": 51286680, "comment_id": 89551339, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/174811/discussion-between-tobilocker-and-fantastic-mr-fox\">continue this discussion in chat</a>."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1531317213, "post_id": 51286680, "comment_id": 89552104, "body": "@FantasticMrFox: Actually, there IS a <code>std::distance</code>. It returns the distance between two iterators, even if they&#39;re not random-access iterators."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1531317529, "post_id": 51286680, "comment_id": 89552379, "body": "@NathanOliver: The problem with this ad-hoc approach is that it&#39;s not very extensible. Boost.Units is based on earlier work from Fermi Labs, and is based on the observation that there are only 7 fundamental SI quantities, and all others can be expressed by rational powers of those fundamental ones. I.e. speed is distance^1 time^-1. This means we only need one templated <code>operator*</code> and one <code>operator&#47;</code>; they can deduce the return type."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1531317895, "post_id": 51286680, "comment_id": 89552672, "body": "@MSalters I get that.  This is just meant as an example of the type of plumbing you need.  If it were production code I would be using a library for all of this."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 8, "last_activity_date": 1569846622, "last_edit_date": 1569846622, "creation_date": 1531315584, "answer_id": 51286680, "question_id": 51285846, "link": "https://stackoverflow.com/questions/51285846/literal-with-number-and-unit-in-an-algebraic-expression-as-argument/51286680#51286680", "title": "Literal with number and unit in an algebraic expression as argument", "body": "<p>What you have to do is design types that when the expression is evaluated it yields the desired type.  With</p>\n\n<pre><code>change_speed(23m / 10s);\n</code></pre>\n\n<p>We need <code>23m</code> and <code>10s</code> to each yield a type that when you divide them together gives you a <code>Speed</code>.  If we have a</p>\n\n<pre><code>struct Meter\n{\n    Meter(double value) : value(value) {}\n    double value;\n};\n\nstruct Second\n{\n    Second(double value) : value(value) {}\n    double value;\n}\n\nSpeeds operator /(const Meter&amp; m, const Second&amp; s)\n{\n    return Speed(m.value / s.value);\n}\n</code></pre>\n\n<p>Then we just need to define <a href=\"https://en.cppreference.com/w/cpp/language/user_literal\" rel=\"nofollow noreferrer\">literal operators</a> for <code>Meter</code> and <code>Second</code> like</p>\n\n<pre><code>Meter operator \"\" _m(double value) { return Meter(value); }\n\nSecond operator \"\" _s(double value) { return Second(value); }\n</code></pre>\n\n<p><sup>we have to use <code>_m</code> and <code>_s</code> to make these valid user defined literals.  All literals besides those provided by the standard must start with a <code>_</code>.</sup></p>\n\n<p>Then </p>\n\n<pre><code>change_speed(23_m / 10_s)\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>change_speed(Meter(23) / Second(10))\n</code></pre>\n\n<p>which becomes</p>\n\n<pre><code>change_speed(Speed(2.3))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245, "user_id": 10025445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c215777ec0036f32d949a80dbf259345?s=128&d=identicon&r=PG&f=1", "display_name": "acade", "link": "https://stackoverflow.com/users/10025445/acade"}, "is_accepted": false, "score": 0, "last_activity_date": 1531316468, "creation_date": 1531316468, "answer_id": 51287033, "question_id": 51285846, "link": "https://stackoverflow.com/questions/51285846/literal-with-number-and-unit-in-an-algebraic-expression-as-argument/51287033#51287033", "title": "Literal with number and unit in an algebraic expression as argument", "body": "<p>If I've understood the question correctly.\nFor required behaviour you can use next c++ features.\n1) We're need class describes time. There are need classes in STL.\nstd::chrono::seconds, std::chrono::minutes and other. For literals using you must add:</p>\n\n<pre><code>#include &lt;chrono&gt;\nusing namespace std::chrono_literals;\nauto thetime = 10m;  // it's okey. the time have type std::chrono::minutes\n</code></pre>\n\n<p>2) We're need class describes distances. There aren't distance classes in STL.\n3) We're need class speed.\n4) We're need division operator for distance and time argument.</p>\n\n<pre><code>class distance\n{\n\npublic:\n    inline constexpr distance(\n        const unsigned long long millimeters) :\n        millimeters_{ millimeters }\n    {\n    }\n\ninline long double millimeters() const noexcept\n{\n    return (millimeters_);\n}\n\ninline long double santimeters() const noexcept\n{\n    return (millimeters_ / 10);\n}\n\ninline long double meters() const noexcept\n{\n    return (millimeters_ / 1000);\n}\n\ninline long double kilometers() const noexcept\n{\n    return (millimeters_ / 1000000);\n}\n\nprivate:\n    long double millimeters_; // it's must be least dimension unit\n\n};\n\ninline constexpr distance operator\"\"_mm(const unsigned long long value)\n{\n    return distance{ value };\n}\n\ninline constexpr distance operator\"\"_cm(const unsigned long long value)\n{\n    return distance{ value * 10 };\n}\n\ninline constexpr distance operator\"\"_m(const unsigned long long value)\n{\n    return distance{ value * 1000 };\n}\n\ninline constexpr distance operator\"\"_km(const unsigned long long value)\n{\n    return distance{ value * 1000000 };\n}\n\n// !\n// it's need the same operators\"\" only for long long argument types\n// !\n\nclass speed\n{\npublic:\n    // ...\n    speed(long double)\n    {\n    }\n    // ...\n};\n\n\ntemplate &lt;typename _Rep&gt;\nspeed operator/(\n    const distance&amp; the_distance,\n    const std::chrono::duration&lt;_Rep&gt;&amp; the_time)\n{\n    // divide by zero!\n    return speed{ the_distance / the_time };\n}\n\nvoid speed_test(const speed&amp;)\n{\n}\n\nvoid foo()\n{\n    using namespace std::chrono_literals;\n    speed_test(100_km / 21s);\n}\n</code></pre>\n"}], "owner": {"reputation": 731, "user_id": 4600847, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2hdPz.jpg?s=128&g=1", "display_name": "tobilocker", "link": "https://stackoverflow.com/users/4600847/tobilocker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 51286680, "answer_count": 4, "score": 5, "last_activity_date": 1569846622, "creation_date": 1531313193, "last_edit_date": 1531317449, "question_id": 51285846, "link": "https://stackoverflow.com/questions/51285846/literal-with-number-and-unit-in-an-algebraic-expression-as-argument", "title": "Literal with number and unit in an algebraic expression as argument", "body": "<p>How to design a type that can take an expression in the form of an algebraic expression with numbers and units, where <code>Speed</code> is the type, <code>23m / 10s</code> could be an expression?</p>\n\n<p>Example:</p>\n\n<pre><code>change_speed(Speed s);    // better: the meaning of s is specified\n// ...\nchange_speed(2.3);        // error: no unit\nchange_speed(23m / 10s);  // meters per second\n</code></pre>\n\n<p><strong><em>EDIT</em></strong> This question raised the question if a literal in the form of <code>23m</code> is possible at all. </p>\n\n<p><strong><em>EDIT</em></strong> the reference to the source has been removed from question for clarity. It can be found <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#example-1\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": ["c++", "qt", "qt5", "qgroupbox"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1531313319, "post_id": 51285804, "comment_id": 89549164, "body": "You could explain your scheme better, it&#39;s not clear"}, {"owner": {"reputation": 123, "user_id": 10064918, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t9_pp5gFDcs/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q3cJuIQMa-ckXSSGjsPuHU-Ma1DA/mo/photo.jpg?sz=128", "display_name": "RandomName", "link": "https://stackoverflow.com/users/10064918/randomname"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1531314220, "post_id": 51285804, "comment_id": 89549821, "body": "@eyllanesc I provided a picture, is that better?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1531314430, "post_id": 51285804, "comment_id": 89549995, "body": "Do you want the QCheckBox that are in the QGroupBox part to be changed to QRadioButton? If so, why?"}, {"owner": {"reputation": 123, "user_id": 10064918, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t9_pp5gFDcs/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q3cJuIQMa-ckXSSGjsPuHU-Ma1DA/mo/photo.jpg?sz=128", "display_name": "RandomName", "link": "https://stackoverflow.com/users/10064918/randomname"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1531314572, "post_id": 51285804, "comment_id": 89550107, "body": "@eyllanesc I want the checkboxes to the left of GroupA / GroupB / etc... to become radiobuttons so I can only toggle one group at a time."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1531314748, "post_id": 51285804, "comment_id": 89550235, "body": "Okay, you want only one of the groups to be enabled? If so, do I need to be QRadioButtons? I&#39;m telling you because changing the geometry is a more difficult task"}, {"owner": {"reputation": 123, "user_id": 10064918, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t9_pp5gFDcs/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q3cJuIQMa-ckXSSGjsPuHU-Ma1DA/mo/photo.jpg?sz=128", "display_name": "RandomName", "link": "https://stackoverflow.com/users/10064918/randomname"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1531314914, "post_id": 51285804, "comment_id": 89550365, "body": "@eyllanesc It&#39;s fine if it still looks like a check box, as long as only one of them can be checked at once."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 10064918, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t9_pp5gFDcs/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q3cJuIQMa-ckXSSGjsPuHU-Ma1DA/mo/photo.jpg?sz=128", "display_name": "RandomName", "link": "https://stackoverflow.com/users/10064918/randomname"}, "edited": false, "score": 0, "creation_date": 1531318553, "post_id": 51286987, "comment_id": 89553215, "body": "wow thanks, that works perfectly! (I would upvote but I don&#39;t have enough rep)"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1531316365, "creation_date": 1531316365, "answer_id": 51286987, "question_id": 51285804, "link": "https://stackoverflow.com/questions/51285804/qt-how-to-place-widgets-in-mutually-exclusive-groups/51286987#51286987", "title": "QT - How to place widgets in mutually exclusive groups?", "body": "<p>The ckeckbox that appears in the <code>QGroupBox</code> is not a <code>QCheckBox</code>, it is just a drawing. So a possible solution is to create a class that manages the <code>QGroupBox</code> checked.</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QGroupBox&gt;\n#include &lt;QLineEdit&gt;\n#include &lt;QRadioButton&gt;\n#include &lt;QSlider&gt;\n#include &lt;QVBoxLayout&gt;\n\nclass ExclusiveManager: public QObject{\npublic:\n    using QObject::QObject;\n    void addGroupBox(QGroupBox *groupbox){\n        if(groupbox){\n            groupbox-&gt;blockSignals(true);\n            groupbox-&gt;setChecked(m_groupboxs.isEmpty());\n            groupbox-&gt;blockSignals(false);\n            m_groupboxs &lt;&lt; groupbox;\n            connect(groupbox, &amp;QGroupBox::toggled, this, &amp;ExclusiveManager::onToggled);\n        }\n    }\nprivate slots:\n    void onToggled(bool on){\n        QGroupBox *groupbox = qobject_cast&lt;QGroupBox *&gt;(sender());\n        if(on){\n            for(QGroupBox *g: m_groupboxs){\n                if(g != groupbox &amp;&amp; g-&gt;isChecked()){\n                    g-&gt;blockSignals(true);\n                    g-&gt;setChecked(false);\n                    g-&gt;blockSignals(false);\n                }\n            }\n        }\n        else{\n            groupbox-&gt;blockSignals(true);\n            groupbox-&gt;setChecked(false);\n            groupbox-&gt;blockSignals(false);\n        }\n    }\nprivate:\n    QList&lt;QGroupBox *&gt; m_groupboxs;\n};\n\nclass Widget: public QWidget{\npublic:\n    Widget(QWidget *parent=nullptr):QWidget(parent){\n        setLayout(new QVBoxLayout);\n\n        ExclusiveManager *manager = new ExclusiveManager(this);\n\n        group_a = new QGroupBox(\"Group A\");\n        group_a-&gt;setCheckable(true);\n        group_b = new QGroupBox(\"Group B\");\n        group_b-&gt;setCheckable(true);\n        group_c = new QGroupBox(\"Group C\");\n        group_c-&gt;setCheckable(true);\n        layout()-&gt;addWidget(group_a);\n        layout()-&gt;addWidget(group_b);\n        layout()-&gt;addWidget(group_c);\n\n        manager-&gt;addGroupBox(group_a);\n        manager-&gt;addGroupBox(group_b);\n        manager-&gt;addGroupBox(group_c);\n\n        QVBoxLayout *layA = new QVBoxLayout();\n        layA-&gt;addWidget(new QLineEdit);\n        group_a-&gt;setLayout(layA);\n\n        QVBoxLayout *layB = new QVBoxLayout();\n        layB-&gt;addWidget(new QRadioButton(\"Option 1\"));\n        layB-&gt;addWidget(new QRadioButton(\"Option 2\"));\n        group_b-&gt;setLayout(layB);\n\n        QVBoxLayout *layC = new QVBoxLayout();\n        layC-&gt;addWidget(new QSlider(Qt::Horizontal));\n        group_c-&gt;setLayout(layC);\n    }\nprivate:\n    QGroupBox *group_a;\n    QGroupBox *group_b;\n    QGroupBox *group_c;\n};\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    Widget w;\n    w.show();\n\n    return a.exec();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 4830454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2532cd5039a73cd33fef930515306cf?s=128&d=identicon&r=PG&f=1", "display_name": "Jugurtha", "link": "https://stackoverflow.com/users/4830454/jugurtha"}, "is_accepted": false, "score": 0, "last_activity_date": 1592513473, "creation_date": 1592513473, "answer_id": 62459207, "question_id": 51285804, "link": "https://stackoverflow.com/questions/51285804/qt-how-to-place-widgets-in-mutually-exclusive-groups/62459207#62459207", "title": "QT - How to place widgets in mutually exclusive groups?", "body": "<p>You can link each QGroupBox'toggled signal with the other's setDisabled slot.</p>\n\n<p>ps: I know it's too late but I'm just putting it here if someone else needs it.<a href=\"https://i.stack.imgur.com/gyFci.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gyFci.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 123, "user_id": 10064918, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t9_pp5gFDcs/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q3cJuIQMa-ckXSSGjsPuHU-Ma1DA/mo/photo.jpg?sz=128", "display_name": "RandomName", "link": "https://stackoverflow.com/users/10064918/randomname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1078, "favorite_count": 0, "accepted_answer_id": 51286987, "answer_count": 2, "score": 2, "last_activity_date": 1592513473, "creation_date": 1531313098, "last_edit_date": 1543201707, "question_id": 51285804, "link": "https://stackoverflow.com/questions/51285804/qt-how-to-place-widgets-in-mutually-exclusive-groups", "title": "QT - How to place widgets in mutually exclusive groups?", "body": "<p>I'm looking to do something like the following:</p>\n\n<p>example</p>\n\n<p><img src=\"https://i.stack.imgur.com/XI4io.png\" alt=\"\"></p>\n\n<p>But with radio buttons instead of checkboxes. In the above picture widgets are placed into groups which can be enabled/disabled, but I want only 1 group to be enabled at a time (in the example both Group A and Group C are enabled).</p>\n\n<p>I did the above example using <a href=\"http://doc.qt.io/qt-5/qtwidgets-widgets-groupbox-example.html\" rel=\"nofollow noreferrer\">QGroupBox</a>, but it only provides normal checkboxes, not radio buttons as far as I can tell.</p>\n"}, {"tags": ["c++", "c++11", "stdmap"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1531312898, "post_id": 51285629, "comment_id": 89548892, "body": "You didn&#39;t quote the errors <b>verbatim</b>. If you had, there would have been a mention of <code>std::pair&lt;const int, int&gt;</code> and <code>std::pair&lt;int, int&gt;</code>. Unrelated types."}, {"owner": {"reputation": 345, "user_id": 6646922, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca2c9138ed1fa987c60bca8b07642c69?s=128&d=identicon&r=PG&f=1", "display_name": "user6646922", "link": "https://stackoverflow.com/users/6646922/user6646922"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1531312982, "post_id": 51285629, "comment_id": 89548948, "body": "I did, it really only says what I quoted"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1531313129, "post_id": 51285629, "comment_id": 89549037, "body": "Then allow me to recommend compilers with more complete error messages. <a href=\"http://coliru.stacked-crooked.com/a/02d153678461d39c\" rel=\"nofollow noreferrer\">GCC</a> and <a href=\"http://coliru.stacked-crooked.com/a/09f429639537f1ad\" rel=\"nofollow noreferrer\">Clang</a> give much better diagnostics."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 2, "creation_date": 1531313475, "post_id": 51285629, "comment_id": 89549285, "body": "The informative error message in my answer came from GCC 6.3 via <a href=\"https://ideone.com/Lm8jiZ\" rel=\"nofollow noreferrer\">ideone.com</a>. GDB online seems to be using the relatively elderly GCC 5.4.1"}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 6, "last_activity_date": 1531312851, "creation_date": 1531312851, "answer_id": 51285729, "question_id": 51285629, "link": "https://stackoverflow.com/questions/51285629/passing-an-stdpair-reference-taken-from-an-stdmap-to-a-function-that-accepts/51285729#51285729", "title": "Passing an std::pair reference taken from an std::map to a function that accepts an std::pair refererence", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/container/map\" rel=\"noreferrer\">The container makes the key <code>const</code></a> (this applies to all associative containers):</p>\n\n<blockquote>\n<pre><code>value_type    std::pair&lt;const Key, T&gt;\n</code></pre>\n</blockquote>\n\n<p>So it should be <code>void foo(std::pair&lt;int const, int&gt;&amp; p)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1262, "user_id": 3940228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1455002de0a9fc115cc877f962ea4c9f?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Sohn", "link": "https://stackoverflow.com/users/3940228/olivier-sohn"}, "is_accepted": false, "score": 3, "last_activity_date": 1531313200, "last_edit_date": 1531313200, "creation_date": 1531312861, "answer_id": 51285732, "question_id": 51285629, "link": "https://stackoverflow.com/questions/51285629/passing-an-stdpair-reference-taken-from-an-stdmap-to-a-function-that-accepts/51285732#51285732", "title": "Passing an std::pair reference taken from an std::map to a function that accepts an std::pair refererence", "body": "<p>You're not allowed to modify the keys of the map, hence this works:</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;vector&gt;\n\n// foo can modify the first value of the pair\nvoid foo(std::pair&lt;int, int&gt;&amp; p)\n{}\n// fooConstFirst cannot modify the first value of the pair\nvoid fooConstFirst(std::pair&lt;const int, int&gt;&amp; p)\n{}\n\nint main()\n{\n  std::pair&lt;int, int&gt; p{1,2};\n  foo(p);\n  std::vector&lt;std::pair&lt;int, int&gt;&gt; v{{1,2}};\n  for (auto&amp; element : v)\n  {\n    foo(element);\n  }\n\n  std::map&lt;int, int&gt; m{std::make_pair(1,2)};\n  for (auto&amp; element : m)\n  {\n    fooConstFirst(element);\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 345, "user_id": 6646922, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca2c9138ed1fa987c60bca8b07642c69?s=128&d=identicon&r=PG&f=1", "display_name": "user6646922", "link": "https://stackoverflow.com/users/6646922/user6646922"}, "edited": false, "score": 0, "creation_date": 1531313558, "post_id": 51285773, "comment_id": 89549342, "body": "Thanks, that&#39;s very useful. Do you also know the answer to the second question?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 345, "user_id": 6646922, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca2c9138ed1fa987c60bca8b07642c69?s=128&d=identicon&r=PG&f=1", "display_name": "user6646922", "link": "https://stackoverflow.com/users/6646922/user6646922"}, "edited": false, "score": 0, "creation_date": 1531314628, "post_id": 51285773, "comment_id": 89550143, "body": "If you see the error I pasted above, it was <i>always</i> <code>invalid initialization of non-const reference ...</code> for me. I don&#39;t have a copy of GCC 5.4.1 handy to figure out why that one does something different, but it&#39;s not obvious."}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 4, "last_activity_date": 1531313016, "creation_date": 1531313016, "answer_id": 51285773, "question_id": 51285629, "link": "https://stackoverflow.com/questions/51285629/passing-an-stdpair-reference-taken-from-an-stdmap-to-a-function-that-accepts/51285773#51285773", "title": "Passing an std::pair reference taken from an std::map to a function that accepts an std::pair refererence", "body": "<p>Per <a href=\"https://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow noreferrer\">the documentation</a>,</p>\n\n<pre><code>map::value_type = std::pair&lt;const Key, T&gt;\n</code></pre>\n\n<p>meaning</p>\n\n<pre><code>map&lt;int,int&gt;::value_type = pair&lt;const int, int&gt;\n</code></pre>\n\n<p>So the compiler can implicitly convert your element of type <code>pair&lt;const int,int&gt;&amp;</code> to a temporary (rvalue) of type <code>pair&lt;int,int&gt;</code>, but this can't be passed by non-const ref to the function.</p>\n\n<p>Either change the argument type to <code>pair&lt;const int,int&gt;</code>, or take it by value.</p>\n\n<hr>\n\n<p>For reference, gcc 6.3 provided this very informative error:</p>\n\n<pre><code>prog.cpp: In function \u2018int main()\u2019:\nprog.cpp:21:13: error: invalid initialization of non-const reference of type \u2018std::pair&lt;int, int&gt;&amp;\u2019 from an rvalue of type \u2018std::pair&lt;int, int&gt;\u2019\n         foo(element);\n             ^~~~~~~\nIn file included from /usr/include/c++/6/bits/stl_algobase.h:64:0,\n                 from /usr/include/c++/6/bits/stl_tree.h:63,\n                 from /usr/include/c++/6/map:60,\n                 from prog.cpp:1:\n/usr/include/c++/6/bits/stl_pair.h:272:19: note:   after user-defined conversion: constexpr std::pair&lt;_T1, _T2&gt;::pair(const std::pair&lt;_U1, _U2&gt;&amp;) [with _U1 = const int; _U2 = int; typename std::enable_if&lt;(std::_PCC&lt;((! std::is_same&lt;_T1, _U1&gt;::value) || (! std::is_same&lt;_T2, _U2&gt;::value)), _T1, _T2&gt;::_ConstructiblePair&lt;_U1, _U2&gt;() &amp;&amp; std::_PCC&lt;((! std::is_same&lt;_T1, _U1&gt;::value) || (! std::is_same&lt;_T2, _U2&gt;::value)), _T1, _T2&gt;::_ImplicitlyConvertiblePair&lt;_U1, _U2&gt;()), bool&gt;::type &lt;anonymous&gt; = 1u; _T1 = int; _T2 = int]\n         constexpr pair(const pair&lt;_U1, _U2&gt;&amp; __p)\n                   ^~~~\nprog.cpp:4:6: note:   initializing argument 1 of \u2018void foo(std::pair&lt;int, int&gt;&amp;)\u2019\n void foo(std::pair&lt;int, int&gt;&amp; p)\n</code></pre>\n\n<p>Note particularly the strong clue about <em>after user-defined conversion</em>...</p>\n"}], "owner": {"reputation": 345, "user_id": 6646922, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca2c9138ed1fa987c60bca8b07642c69?s=128&d=identicon&r=PG&f=1", "display_name": "user6646922", "link": "https://stackoverflow.com/users/6646922/user6646922"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 51285773, "answer_count": 3, "score": 0, "last_activity_date": 1531314037, "creation_date": 1531312531, "last_edit_date": 1531314037, "question_id": 51285629, "link": "https://stackoverflow.com/questions/51285629/passing-an-stdpair-reference-taken-from-an-stdmap-to-a-function-that-accepts", "title": "Passing an std::pair reference taken from an std::map to a function that accepts an std::pair refererence", "body": "<p>EDIT: The answer to the first question is to use std::pair. Any ideas about the second one (marked as 'bonus question')?</p>\n\n<p>With the following code:</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;vector&gt;\n\nvoid foo(std::pair&lt;int, int&gt;&amp; p)  // EDIT: it needs to be non-const\n{}\n\nint main()\n{\n    std::pair&lt;int, int&gt; p{1,2};\n    foo(p);\n    std::vector&lt;std::pair&lt;int, int&gt;&gt; v{{1,2}};\n    for (auto&amp; element : v)\n    {\n        foo(element);  // works fine\n    }\n\n    std::map&lt;int, int&gt; m{std::make_pair(1,2)};\n    //std::map&lt;int, int&gt; m2{{1,2}};\n    for (auto&amp; element : m)  // the problematic loop\n    {\n        foo(element);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I get the following message with m in the latter for loop:</p>\n\n<blockquote>\n  <p>error: invalid initialization of reference of type 'std::pair&amp;' from\n  expression of type 'std::pair'</p>\n</blockquote>\n\n<p>and the following with m2 in that place:</p>\n\n<blockquote>\n  <p>error: invalid initialization of non-const reference of type\n  'std::pair&amp;' from an rvalue of type 'std::pair'</p>\n</blockquote>\n\n<p>Why is that?</p>\n\n<p><strong>Bonus question:</strong>\nI find it very peculiar that when the initialization of m2 is not commented out and the for loop stays untouched (there's still m in it and m2 is never used) the error message changes from </p>\n\n<blockquote>\n  <p>error: invalid initialization of reference of type 'std::pair&amp;' from\n  expression of type 'std::pair'</p>\n</blockquote>\n\n<p>to</p>\n\n<blockquote>\n  <p>error: invalid initialization of non-const reference of type\n  'std::pair&amp;' from an rvalue of type 'std::pair'</p>\n</blockquote>\n\n<p>I'd love to know your thoughts about it. I tested this code with onlinegdb.com</p>\n"}, {"tags": ["c++", "c", "optimization", "bit-manipulation", "vectorization"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 4, "creation_date": 1531311414, "post_id": 51285210, "comment_id": 89547762, "body": "BTW <code>1&lt;&lt;N</code> has type <i>int</i>. You need to cast <code>1</code> or suffix it <code>1U</code> for the arithmetic to happen with unsigned."}, {"owner": {"reputation": 7045, "user_id": 1000551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8cb0eaa4de7f781e42328ec7544ca3?s=128&d=identicon&r=PG", "display_name": "Vadim Kotov", "link": "https://stackoverflow.com/users/1000551/vadim-kotov"}, "edited": false, "score": 1, "creation_date": 1531311794, "post_id": 51285210, "comment_id": 89548061, "body": "Is it C or C++? Please take a look at <a href=\"https://meta.stackoverflow.com/a/252433/1000551\">meta.stackoverflow.com/a/252433/1000551</a>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1531312200, "post_id": 51285210, "comment_id": 89548355, "body": "The <code>flag ||</code> is redundant, since the loop checks for <code>!flag</code>."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1531312489, "post_id": 51285210, "comment_id": 89548584, "body": "So N must be at most 32? And <code>i</code>, <code>is</code> and <code>pi</code> are constants, or just fixed for a given call?"}, {"owner": {"reputation": 779, "user_id": 5765675, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/449794481879116/picture?type=large", "display_name": "Meet Taraviya", "link": "https://stackoverflow.com/users/5765675/meet-taraviya"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1531367710, "post_id": 51285210, "comment_id": 89571328, "body": "@AnttiHaapala I used a <code>#define</code> to set that (No overhead of memory access), and <code>N</code> will be atmost 20 (This was a part of larger program, and N=6 is already taking too lon)"}], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 5765675, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/449794481879116/picture?type=large", "display_name": "Meet Taraviya", "link": "https://stackoverflow.com/users/5765675/meet-taraviya"}, "edited": false, "score": 0, "creation_date": 1531367519, "post_id": 51286586, "comment_id": 89571302, "body": "This was awesome! I tried to think on the same line, but was kind of struck on the third condition"}], "tags": [], "owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 2, "last_activity_date": 1531332552, "last_edit_date": 1531332552, "creation_date": 1531315341, "answer_id": 51286586, "question_id": 51285210, "link": "https://stackoverflow.com/questions/51285210/optimizing-a-check-using-bit-manipulations/51286586#51286586", "title": "Optimizing a check using bit manipulations", "body": "<p>A solution can be computed directly with no loops other than iterating through <code>pi_stack[i]</code> and <code>is_stack[i]</code>.</p>\n\n<p>A criterion of the form <code>(pi_ ^ v) &amp; m</code> requires that <code>pi_</code> and <code>v</code> have the same values in each bit position for which the bit is set in <code>m</code>.  We can represent that:</p>\n\n<pre><code>uint RequiredBits   = m; // Mask of bits that must have certain values.\nuint RequiredValues = v &amp; m; // Record of the values the bits must have.\n</code></pre>\n\n<p>Your tests show two such criteria:</p>\n\n<pre><code>((pi_ ^ pi) &amp; (is ^ N_MASK)) == 0\n\n((pi_ ^ pi_stack[i]) &amp; is_stack[i]) == 0\n</code></pre>\n\n<p>Suppose we have already represented the first criterion:</p>\n\n<pre><code>uint RequiredBits   = is ^ N_MASK;\nuint RequiredValues = pi &amp; RequiredBits;\n</code></pre>\n\n<p>Now we want to also require the second criterion. For brevity, let\u2019s assign <code>v = pi_stack[i]</code> and <code>m = is_stack[i]</code>. We have two problems: Is it possible to satisfy both criteria simultaneously?  And, if so, what one criterion is the combination of both?</p>\n\n<p>If <code>m</code> and <code>RequiredBits</code> do not have any set bits in common, then there is no conflict, because <code>pi_</code> is free to have the required values in whatever bit positions they each control. If they do have set bits in common, then <code>v</code> and <code>RequiredValue</code> must be the same in those bits, because <code>pi_</code> cannot have both 0 and 1 in the same position. So a test for conflict is:</p>\n\n<pre><code>if (((v ^ RequiredValues) &amp; (m &amp; RequiredBits)) != 0)\n    print/exit/return/whatever; // Report no solution is possible.\n</code></pre>\n\n<p>If the two criteria are consistent, then we can combine them:</p>\n\n<pre><code>RequiredValues = RequiredValues | (v &amp; m);\nRequiredBits   = RequiredBits | m;\n</code></pre>\n\n<p>If there are multiple instances of the criteria involving <code>pi_stack[i]</code> and <code>is_stack[i]</code> for different values of <code>i</code>, then the above can be repeated.</p>\n\n<p>Finally, we have the criterion  <code>pi_ ^ pi) &amp; is</code>. This says that <code>pi_</code> an <code>pi</code> must differ in at least one bit position for which the bit is set in <code>is</code>. This position must be a position that is not set in <code>RequiredBits</code>, because the earlier criteria require that <code>pi_</code> and <code>pi</code> be the same in those positions, and it is not possible for <code>pi_</code> and <code>pi</code> to be both the same and to differ in the same position.</p>\n\n<p>Therefore, <code>pi_</code> and <code>pi</code> must differ in at least one bit that is in <code>is &amp; ~RequiredBits</code>. If <code>is &amp; ~RequiredBits</code> is zero, this is not possible, because then there are no positions in <code>is</code> that <code>pi_</code> and <code>pi</code> are allowed to differ in. So we test:</p>\n\n<pre><code>if ((is &amp; ~RequiredBits) == 0)\n    print/exit/return/whatever; // Report no solution is possible.\n</code></pre>\n\n<p>Otherwise, we construct some differences between <code>pi_</code> and <code>pi</code> in the required (by <code>is</code>) and available (by <code>~RequiredBits</code>) positions:</p>\n\n<pre><code>uint Differences = ~pi &amp; (is &amp; ~RequiredBits);\n</code></pre>\n\n<p>Then a solution is:</p>\n\n<pre><code>uint pi_ = RequiredValues | Differences;\n</code></pre>\n\n<p>All possible solutions could be iterated by:</p>\n\n<ul>\n<li>Iterate all the bits of <code>pi_</code> other than those in <code>is | RequiredBits</code> through all possible values.</li>\n<li>Iterate all the bits of <code>pi_</code> that are in <code>is &amp; ~RequiredBits</code> through all possible values except <code>pi &amp; (is &amp; ~RequiredBits)</code> (because that is one in which all the bits specified by <code>is &amp; ~RequiredBits</code> have the values they do in <code>pi</code>, but we want at least one to be different).</li>\n</ul>\n"}], "owner": {"reputation": 779, "user_id": 5765675, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/449794481879116/picture?type=large", "display_name": "Meet Taraviya", "link": "https://stackoverflow.com/users/5765675/meet-taraviya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 51286586, "answer_count": 1, "score": 1, "last_activity_date": 1531332552, "creation_date": 1531311222, "last_edit_date": 1531311406, "question_id": 51285210, "link": "https://stackoverflow.com/questions/51285210/optimizing-a-check-using-bit-manipulations", "title": "Optimizing a check using bit manipulations", "body": "<p>I have the following code snippet as a part of one algorithm. I am using <code>pi_</code>, <code>pi</code>, <code>pi_stack[i]</code>, <code>is</code> and <code>is_stack[i]</code> (all <code>unsigned int</code>) as subsets of a set of size <code>N</code>.</p>\n\n<ul>\n<li><code>N_MASK=(1&lt;&lt;N)-1</code> is a mask that determines what portion of the <code>unsigned int</code> is useful.</li>\n<li><code>N_POLICY=(1&lt;&lt;N)</code>.</li>\n</ul>\n\n<p>I want to find if there exists a subset <code>pi_</code> such that <code>((pi_^pi) &amp; (is^N_MASK)) == 0 &amp;&amp; ((pi_^pi_stack[i]) &amp; is_stack[i]) == 0 &amp;&amp; ((pi_^pi) &amp; is)</code> holds true. Currently I am iterating over all possible subsets. What should be the relation between <code>is</code>, <code>pi_stack[i]</code>, <code>is_stack[i]</code> and <code>pi</code> so that no such <code>pi_</code> exists?</p>\n\n<pre><code>bool flag=false;\nfor(uint pi_=0; pi_&lt;N_POLICY &amp;&amp; !flag; pi_++){\n    flag = flag || (\n        ((pi_^pi) &amp; (is^N_MASK)) == 0 &amp;&amp;\n        ((pi_^pi_stack[i]) &amp; is_stack[i]) == 0 &amp;&amp;\n        ((pi_^pi) &amp; is)\n    );\n}\n</code></pre>\n\n<p>I came up with:-\n<code>flag = (((is_stack[i] &amp; (is^N_MASK)) &amp; (pi_stack[i]^pi))) || 0 == (is_stack[i] &amp; (pi^pi_stack[i])) ;</code> But this does not work, but it gives an idea of what I am looking for. This code was meant to replace the loop above.</p>\n"}, {"tags": ["c++", "raytracing"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1531311147, "post_id": 51285155, "comment_id": 89547580, "body": "What sample code? How did you build it?"}, {"owner": {"reputation": 1, "user_id": 10064712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6f3236027314f72cf4e95c4ebe2aed5?s=128&d=identicon&r=PG&f=1", "display_name": "Star Dawn YOU", "link": "https://stackoverflow.com/users/10064712/star-dawn-you"}, "reply_to_user": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1531311278, "post_id": 51285155, "comment_id": 89547674, "body": "I just placed a site link. Sample code related to ray tracing. [<a href=\"https://www.youtube.com/watch?v=yaK1e59-oAA]\" rel=\"nofollow noreferrer\">youtube.com/watch?v=yaK1e59-oAA]</a> This site address is related to the results of the execution."}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1531311416, "post_id": 51285155, "comment_id": 89547763, "body": "I would guess that HrException means it got an unexpected HRESULT from one of the APIs. Can you track down the line that&#39;s throwing the exception, and can you see what the error code is or what&#39;s causing it to be thrown?"}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 1, "creation_date": 1531311479, "post_id": 51285155, "comment_id": 89547808, "body": "I would expect it to be down to one of the pre-requistis not being fulfilled. The first says you need WIndows 10 with the April 2018 update (builds 1803). Are you using a Nvidia Volta card? I don&#39;t think it&#39;s possible to help from here without more details."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1531311521, "post_id": 51285155, "comment_id": 89547846, "body": "Does the debug build work?"}, {"owner": {"reputation": 1, "user_id": 10064712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6f3236027314f72cf4e95c4ebe2aed5?s=128&d=identicon&r=PG&f=1", "display_name": "Star Dawn YOU", "link": "https://stackoverflow.com/users/10064712/star-dawn-you"}, "edited": false, "score": 0, "creation_date": 1531312440, "post_id": 51285155, "comment_id": 89548540, "body": "+ msg 0x00007ff7fd969ea0 L &quot;Error: could not enable Experimental Shader Models. \\ n&quot; const wchar_t *"}, {"owner": {"reputation": 1, "user_id": 10064712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6f3236027314f72cf4e95c4ebe2aed5?s=128&d=identicon&r=PG&f=1", "display_name": "Star Dawn YOU", "link": "https://stackoverflow.com/users/10064712/star-dawn-you"}, "edited": false, "score": 0, "creation_date": 1531312504, "post_id": 51285155, "comment_id": 89548600, "body": "yes debug is working"}, {"owner": {"reputation": 154038, "user_id": 462627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0285ad1973e938e2d2f40254c247f6f?s=128&d=identicon&r=PG", "display_name": "Praveen Kumar Purushothaman", "link": "https://stackoverflow.com/users/462627/praveen-kumar-purushothaman"}, "edited": false, "score": 0, "creation_date": 1531312558, "post_id": 51285155, "comment_id": 89548633, "body": "@RoopeshKumarRamesh Dude, what did you do?"}, {"owner": {"reputation": 1, "user_id": 10064712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6f3236027314f72cf4e95c4ebe2aed5?s=128&d=identicon&r=PG&f=1", "display_name": "Star Dawn YOU", "link": "https://stackoverflow.com/users/10064712/star-dawn-you"}, "edited": false, "score": 0, "creation_date": 1531312660, "post_id": 51285155, "comment_id": 89548708, "body": "I am using windows 10 and using GEFORCE GTX 1080."}, {"owner": {"reputation": 1, "user_id": 10064712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6f3236027314f72cf4e95c4ebe2aed5?s=128&d=identicon&r=PG&f=1", "display_name": "Star Dawn YOU", "link": "https://stackoverflow.com/users/10064712/star-dawn-you"}, "edited": false, "score": 0, "creation_date": 1531313204, "post_id": 51285155, "comment_id": 89549082, "body": "@ doctorlove somebody help"}, {"owner": {"reputation": 1, "user_id": 10064712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6f3236027314f72cf4e95c4ebe2aed5?s=128&d=identicon&r=PG&f=1", "display_name": "Star Dawn YOU", "link": "https://stackoverflow.com/users/10064712/star-dawn-you"}, "edited": false, "score": 0, "creation_date": 1531313246, "post_id": 51285155, "comment_id": 89549101, "body": "Error: Could not activate experiment shader model. Exception occurred (0x00007FF831F1A388, D3D12RaytracingHelloWorld.exe): Microsoft C ++ Exception: HrException, memory location 0x000000560F4FECE8. Create unhandled exception (0x00007FF831F1A388, D3D12RaytracingHelloWorld.exe): Microsoft C ++ Exception: HrException, memory location 0x000000560F4FECE8."}, {"owner": {"reputation": 1, "user_id": 10064712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6f3236027314f72cf4e95c4ebe2aed5?s=128&d=identicon&r=PG&f=1", "display_name": "Star Dawn YOU", "link": "https://stackoverflow.com/users/10064712/star-dawn-you"}, "edited": false, "score": 0, "creation_date": 1531313278, "post_id": 51285155, "comment_id": 89549132, "body": "why experiment shader model not active...?"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1531314974, "post_id": 51285155, "comment_id": 89550408, "body": "From your link, it looks like you need 1) an up-to-date Windows 10 build, i.e. not just Windows 10 but the April feature pack or later; 2) either a video driver that supports the experimental shader model - which sounds like it needs a newer NVidia card than you have - or their Raytracing Fallback Layer."}, {"owner": {"reputation": 1, "user_id": 10064712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6f3236027314f72cf4e95c4ebe2aed5?s=128&d=identicon&r=PG&f=1", "display_name": "Star Dawn YOU", "link": "https://stackoverflow.com/users/10064712/star-dawn-you"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1531316425, "post_id": 51285155, "comment_id": 89551471, "body": "@Rup My Windows is a April feature pack. 2) I do not know. Do you mean you need a better graphics card?"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1531316733, "post_id": 51285155, "comment_id": 89551708, "body": "From <a href=\"https://devblogs.nvidia.com/introduction-nvidia-rtx-directx-ray-tracing/\" rel=\"nofollow noreferrer\">this NVIDIA blog</a> it sounds like you need a card with NVidia&#39;s Volta architecture, and Wikipedia says that Geforce 10 does not have Volta. So I think yes, if you want to do this in hardware you need a newer graphics card. But I&#39;d guess that the Raytracing Fallback Layer in your original link will implement this in software. But I&#39;ve never tried any of this."}, {"owner": {"reputation": 1, "user_id": 10064712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6f3236027314f72cf4e95c4ebe2aed5?s=128&d=identicon&r=PG&f=1", "display_name": "Star Dawn YOU", "link": "https://stackoverflow.com/users/10064712/star-dawn-you"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1531318537, "post_id": 51285155, "comment_id": 89553204, "body": "@Rup Thank you for answer! This problem has been solved by allowing the &quot;developer settings&quot; in Windows 10!"}], "owner": {"reputation": 1, "user_id": 10064712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6f3236027314f72cf4e95c4ebe2aed5?s=128&d=identicon&r=PG&f=1", "display_name": "Star Dawn YOU", "link": "https://stackoverflow.com/users/10064712/star-dawn-you"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1531314783, "creation_date": 1531311009, "last_edit_date": 1531314783, "question_id": 51285155, "link": "https://stackoverflow.com/questions/51285155/dxrsdk-v0-09-01-can-not-run-on-visual-studio-2017", "title": "DXRSDK_v0.09.01 can not run on visual studio 2017", "body": "<p>I tried to run this sample code in release mode, but it fails to run because of the following message:</p>\n\n<p><code>Unhandled exception occurred (0x00007FF831F1A388, D3D12RaytracingHelloWorld.exe): Microsoft C ++ Exception: HrException, memory location 0x00000043891FF778. Occur</code></p>\n\n<p>This message may not be accurate because it is a translation of Korean into English. I do not know how to handle this. I would appreciate your help. If you would like to approach this issue, the following site address is <a href=\"http://forums.directxtech.com/index.php?topic=5860.0\" rel=\"nofollow noreferrer\">provided</a>.</p>\n"}, {"tags": ["python", "c++", "class"], "comments": [{"owner": {"reputation": 2554, "user_id": 3424423, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/f3d10a1c60893734d32d1c16a249163e?s=128&d=identicon&r=PG&f=1", "display_name": "Nearoo", "link": "https://stackoverflow.com/users/3424423/nearoo"}, "edited": false, "score": 0, "creation_date": 1531310783, "post_id": 51285035, "comment_id": 89547294, "body": ".... that&#39;s what the <code>__init__</code> function&#39;s there for. <code>__init__</code> is python&#39;s constructor. just add the arguments there and remove your  <code>User</code> method, it has no special meaning in Python."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1531310951, "post_id": 51285035, "comment_id": 89547433, "body": "Have you read the basic tutorial? Your actual question is unclear but I&#39;m pretty sure you&#39;re trying to add arguments to <code>__init__</code>."}, {"owner": {"reputation": 169, "user_id": 9894117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0597117ff68f0c84eb831c613a95c840?s=128&d=identicon&r=PG&f=1", "display_name": "ergesto", "link": "https://stackoverflow.com/users/9894117/ergesto"}, "edited": false, "score": 0, "creation_date": 1531311008, "post_id": 51285035, "comment_id": 89547472, "body": "no i dont want to add arg to <b>init</b>"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1531311175, "post_id": 51285035, "comment_id": 89547597, "body": "Yes you do. Function (or constructor) overloading is done with default arguments in python."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 2, "creation_date": 1531311756, "post_id": 51285035, "comment_id": 89548025, "body": "Please don&#39;t edit the solution into your question. Solutions don&#39;t belong in the question, they should be posted as answers."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1531311911, "post_id": 51285035, "comment_id": 89548153, "body": "@chepner What was wrong with that dupe?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1531311949, "post_id": 51285035, "comment_id": 89548180, "body": "Nothing in particular, but the OP had enough misconceptions that I think he needed a custom answer."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1531311979, "post_id": 51285035, "comment_id": 89548205, "body": "Related/dupe: <a href=\"//stackoverflow.com/q/682504\">What is a clean, pythonic way to have multiple constructors in Python?</a>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1531312003, "post_id": 51285035, "comment_id": 89548224, "body": "(I&#39;m willing to be flagged for my probable abuse of dup-hammer reopening powers :))"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1531312177, "post_id": 51285035, "comment_id": 89548344, "body": "@chepner If you think there&#39;s value in reopening the question, fine - but I honestly don&#39;t see how your answer is an improvement over the answer in the dupe. Did you address any of those misconceptions?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1531313128, "post_id": 51285035, "comment_id": 89549036, "body": "@Aran-Fey I fixed the class name and variable name conventions, got rid of the class attributes and unnecessary methods, and provided several examples of how to use the single constructor."}], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 2, "last_activity_date": 1531313257, "last_edit_date": 1531313257, "creation_date": 1531311924, "answer_id": 51285445, "question_id": 51285035, "link": "https://stackoverflow.com/questions/51285035/python-call-class-function-without-reffering-class-name/51285445#51285445", "title": "Python call class function without reffering class name", "body": "<p>Use default arguments to provide values when you don't want to pass a default value explicitly.</p>\n\n<pre><code>class User:  # singular noun\n    def __init__(self, age=90, name=\"john\"):\n        self.age = age\n        self.name = name\n\nuser1 = User()            # user.age == 90, user.name == \"john\"\nuser2 = User(2, \"l\")      # user.age == 2, user.name == \"l\"\nuser3 = User(40)          # user.age == 40, user.name == \"john\"\nuser4 = User(name=\"bob\")  # user.age == 90, user.name == \"john\"\n</code></pre>\n\n<p>Since the unspecified arguments are replaced by defaults in strict left-to-right order, the last example shows the use of a keyword argument to set the name explicitly while using the default age.</p>\n"}], "owner": {"reputation": 169, "user_id": 9894117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0597117ff68f0c84eb831c613a95c840?s=128&d=identicon&r=PG&f=1", "display_name": "ergesto", "link": "https://stackoverflow.com/users/9894117/ergesto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "closed_date": 1531313175, "accepted_answer_id": 51285445, "answer_count": 1, "score": -1, "last_activity_date": 1531313257, "creation_date": 1531310660, "last_edit_date": 1531311811, "question_id": 51285035, "link": "https://stackoverflow.com/questions/51285035/python-call-class-function-without-reffering-class-name", "closed_reason": "Duplicate", "title": "Python call class function without reffering class name", "body": "<p>The code bellow in c++ is working, Its possible to make this works with python without using <code>Users().Users(23, \"bell\")</code> but like c++ <code>Users(23, \"bell\")</code> see my code bellow </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n\nclass Users\n{\npublic:\n    int age;\n    string name;\n\npublic:\n    Users()\n    {\n        // init default \n        age = 90;\n        name = \"john\";\n\n    }\n\n    Users(int iage, string iname)\n    {\n        age = iage;\n        name = iname;\n    }\n};\n\n\nint main()\n{\n    Users User;\n    User.age = 2;\n    User.name = \"l\";\n\n    Users(23, \"bell\");\n    return 0;\n}\n</code></pre>\n\n<p>''</p>\n\n<pre><code>class Users:\n    age = None\n    name = None \n\n    def __init__(self):\n        self.age = 90\n        self.name = \"john\"\n\n    def Users(age, name):\n        self.age = age\n        self.name = name\n\nUser = Users()\nUser.age = 2\nUser.name = \"l\"\n</code></pre>\n"}]