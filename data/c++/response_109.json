[{"tags": ["c++", "qt", "qt4"], "comments": [{"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 1, "creation_date": 1486599144, "post_id": 42125870, "comment_id": 71420121, "body": "Do you get any log messages that says the shortcut is defined multiple times? If that happens, the shortcut is disabled altogether; neither place where it&#39;s assigned will work."}, {"owner": {"reputation": 2241, "user_id": 2140271, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea24c17719a975fb38c107a60f4b3802?s=128&d=identicon&r=PG", "display_name": "Vincent Fourmond", "link": "https://stackoverflow.com/users/2140271/vincent-fourmond"}, "reply_to_user": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 0, "creation_date": 1486599423, "post_id": 42125870, "comment_id": 71420221, "body": "@goug No, I don&#39;t have any of those. Moreover, in one of the two cases, I&#39;m not using a shortcut, just intercepting events."}, {"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 0, "creation_date": 1486600871, "post_id": 42125870, "comment_id": 71420613, "body": "It sounds like something higher up is intercepting Ctrl-U before it gets to your application or your dialog. Is Ctrl-U a shortcut on the dialog&#39;s system menu, or something along those lines? (You haven&#39;t said what platform you&#39;re on.) Do you run both the Qt4 version and the Qt5 version on the same box, but get these different results?"}, {"owner": {"reputation": 2241, "user_id": 2140271, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea24c17719a975fb38c107a60f4b3802?s=128&d=identicon&r=PG", "display_name": "Vincent Fourmond", "link": "https://stackoverflow.com/users/2140271/vincent-fourmond"}, "reply_to_user": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 0, "creation_date": 1486623685, "post_id": 42125870, "comment_id": 71427429, "body": "@goug Platform is Linux; both versions are run in the exact same environment."}], "answers": [{"tags": [], "owner": {"reputation": 2241, "user_id": 2140271, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea24c17719a975fb38c107a60f4b3802?s=128&d=identicon&r=PG", "display_name": "Vincent Fourmond", "link": "https://stackoverflow.com/users/2140271/vincent-fourmond"}, "is_accepted": false, "score": 0, "last_activity_date": 1486770672, "last_edit_date": 1495539926, "creation_date": 1486770672, "answer_id": 42170534, "question_id": 42125870, "link": "https://stackoverflow.com/questions/42125870/ctrlu-key-combination-lost-when-porting-from-qt4-to-qt5/42170534#42170534", "title": "Ctrl+U key combination lost when porting from Qt4 to Qt5", "body": "<p>I couldn't find the source of the problem, especially since <code>Ctrl+U</code> is not referenced as keyboard shortcut in <a href=\"http://doc.qt.io/qt-5/qlineedit.html\" rel=\"nofollow noreferrer\">QLineEdit</a>. However, I found a nice workaround, inspired by <a href=\"https://stackoverflow.com/questions/7719806/preventing-keyboard-shortcuts-being-triggered-in-qscintilla-example-code\">this answer</a>. I added the following code to my own subclass of <code>QApplication</code>:</p>\n\n<pre><code>  bool notify(QObject * receiver, QEvent * event) \n  {\n    // We override keyboard shortcuts within QLineEdit\n    if(event-&gt;type() == QEvent::ShortcutOverride &amp;&amp;\n       dynamic_cast&lt;QLineEdit*&gt;(receiver)) {\n      event-&gt;ignore();\n      return false;\n    }\n    return QApplication::notify(receiver, event);\n  }\n</code></pre>\n"}], "owner": {"reputation": 2241, "user_id": 2140271, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea24c17719a975fb38c107a60f4b3802?s=128&d=identicon&r=PG", "display_name": "Vincent Fourmond", "link": "https://stackoverflow.com/users/2140271/vincent-fourmond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486770672, "creation_date": 1486598349, "last_edit_date": 1486767151, "question_id": 42125870, "link": "https://stackoverflow.com/questions/42125870/ctrlu-key-combination-lost-when-porting-from-qt4-to-qt5", "title": "Ctrl+U key combination lost when porting from Qt4 to Qt5", "body": "<p>I'm in the process of porting a program from Qt4 to Qt5. I got it to the point where it compiles with both versions. Almost everything seems to work in the new version, excepted that I have lost the <code>Ctrl+U</code> keyboard shortcut in the Qt5 version in two different contexts:</p>\n\n<ul>\n<li>in a dialog box, using a <code>QShortcut</code> assigned to the <code>Ctrl+U</code> key sequence</li>\n<li>in the main window, when listening for evens in an event filter.</li>\n</ul>\n\n<p>This seems specific to <code>Ctrl+U</code>. I know that in the dialog box, other shortcuts like <code>Ctrl+F</code> or <code>Ctrl+W</code> work as they used to, and that in the main window, <code>Ctrl+P</code> works as before too.</p>\n\n<p>Is there anything special about <code>Ctrl+U</code> (and possibly others) in Qt5 that prevent me from seeing the event ?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>It seems it is linked to the presence of a line edit. MWE:</p>\n\n<pre><code>#include \"mw.hh\"\n#include &lt;QApplication&gt;\n#include &lt;QShortcut&gt;\n#include &lt;QStatusBar&gt;\n#include &lt;QKeySequence&gt;\n#include &lt;QTextStream&gt;\n#include &lt;QLineEdit&gt;\n\n\nstatic void registerShortCut(const QKeySequence &amp; seq, QWidget * receiver, \n                             const char * fn,\n                             Qt::ShortcutContext context = Qt::WindowShortcut)\n{\n  QShortcut * sc = new QShortcut(seq, receiver);\n  sc-&gt;setContext(context);\n  receiver-&gt;connect(sc, SIGNAL(activated()), fn);\n}\n\nMW::MW()\n{\n  statusBar()-&gt;showMessage(\"stuff\");\n  registerShortCut(QKeySequence(tr(\"Ctrl+T\")),\n                   this, SLOT(test()));\n  registerShortCut(QKeySequence(tr(\"Ctrl+U\")),\n                   this, SLOT(test2()));\n\n  QLineEdit * le = new QLineEdit(\"stuff\");\n  setCentralWidget(le);\n}\n\nvoid MW::test()\n{\n  statusBar()-&gt;showMessage(\"Test !\");\n}\n\nvoid MW::test2()\n{\n  statusBar()-&gt;showMessage(\"Test 2 !\");\n}\n\nint main(int argc, char ** argv)\n{\n  QApplication main(argc, argv);\n  MW mw;\n  mw.show();\n  main.exec();\n}\n</code></pre>\n\n<p>With <code>mw.hh</code>:</p>\n\n<pre><code>#include &lt;QMainWindow&gt;\n\nclass MW : public QMainWindow {\n  Q_OBJECT;\npublic:\n  MW();\n\npublic slots:\n  void test();\n  void test2();\n};\n</code></pre>\n\n<p>Hitting <code>Ctrl+T</code> shows Test in the status bar, but <code>Ctrl+U</code> does not. Commenting out the <code>setCentralWidget(le)</code> line restores the expected behaviour.</p>\n"}, {"tags": ["c++", "input", "fstream"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1486598038, "post_id": 42125805, "comment_id": 71419743, "body": "you forgot to tell us what the error is"}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1486598059, "post_id": 42125805, "comment_id": 71419748, "body": "The error specifics seem kind of relevant here, eh?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1486598194, "post_id": 42125805, "comment_id": 71419801, "body": "please read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Most of your code is irrelevant to the question. On the other hand the error message is relevant, you should include it in the question."}, {"owner": {"reputation": 13, "user_id": 4106972, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/944b7aecc6ae6fdc8940750e3a90f207?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Ahrens", "link": "https://stackoverflow.com/users/4106972/thomas-ahrens"}, "edited": false, "score": 0, "creation_date": 1486598231, "post_id": 42125805, "comment_id": 71419819, "body": "Error message has been added."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1486598243, "post_id": 42125805, "comment_id": 71419822, "body": "In general I would advise you to test small parts of code before writing a wall of code just to realize that there is an error somewhere. If you know how to create a file and write &quot;Hello World&quot; to it then in principle you also know how to write any other output to it."}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 2, "creation_date": 1486598269, "post_id": 42125805, "comment_id": 71419837, "body": "remove the <code>const</code> in <code>const std::string outName;</code>"}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1486598580, "post_id": 42125805, "comment_id": 71419943, "body": "also, unless you are building with c++11, you need <code>outFile.open(outName.c_str());</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4106972, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/944b7aecc6ae6fdc8940750e3a90f207?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Ahrens", "link": "https://stackoverflow.com/users/4106972/thomas-ahrens"}, "edited": false, "score": 0, "creation_date": 1486598733, "post_id": 42125919, "comment_id": 71419988, "body": "Do I need <code>outFile.open</code> before this? Also what would be the path if it&#39;s supposed to go into the same directory as the program, just empty brackets?"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 13, "user_id": 4106972, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/944b7aecc6ae6fdc8940750e3a90f207?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Ahrens", "link": "https://stackoverflow.com/users/4106972/thomas-ahrens"}, "edited": false, "score": 0, "creation_date": 1486598842, "post_id": 42125919, "comment_id": 71420028, "body": "Yes, you need to get the correct filename, then pass it into an <code>open</code>.  As your code says for <code>outfile,open(...)</code>.  But the main problem is defining a variable as <code>const</code> and not initializing it."}, {"owner": {"reputation": 13, "user_id": 4106972, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/944b7aecc6ae6fdc8940750e3a90f207?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Ahrens", "link": "https://stackoverflow.com/users/4106972/thomas-ahrens"}, "edited": false, "score": 0, "creation_date": 1486599539, "post_id": 42125919, "comment_id": 71420250, "body": "<code>outFile.open(outName);</code>, is this the proper syntax? Because it&#39;s still yielding errors for me."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1486598557, "creation_date": 1486598557, "answer_id": 42125919, "question_id": 42125805, "link": "https://stackoverflow.com/questions/42125805/create-file-and-write-to-filename-is-user-input/42125919#42125919", "title": "Create file and write to, filename is user input?", "body": "<p>Your telling the compiler that <code>outfile</code> is <code>const</code> without initializing it, don't do that.  Do this instead:</p>\n\n<pre><code> const string outName{\"The path of the outfile\"};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>string outFileName;\n// get outFileName\nconst string outName{outFileName};\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4106972, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/944b7aecc6ae6fdc8940750e3a90f207?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Ahrens", "link": "https://stackoverflow.com/users/4106972/thomas-ahrens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1486601898, "creation_date": 1486597926, "last_edit_date": 1486601898, "question_id": 42125805, "link": "https://stackoverflow.com/questions/42125805/create-file-and-write-to-filename-is-user-input", "title": "Create file and write to, filename is user input?", "body": "<p>So I came on here earlier asking about a school assignment that involved reading each character from a file. That issue was fixed, but now I have encountered another problem.\nPart of my assignment is to take in a user inputted file name, then set that file name to a text file that will be outputted with the results of the program.\nHere is the program itself:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;cstdlib&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main()\n{\n    const int fileNameSize = 20;\n    int fileCount = 0;\n    int testcount = 0;\n    const string outName;\n    std::ifstream inFile;\n    std::ofstream outFile;\n    &lt;a bunch of other stuff&gt;\n            outFile.open(outName);\n            int chartotal = acount + tcount + ecount + ocount + icount + ncount + scount + hcount + rcount;\n            outFile &lt;&lt; \"File name: \" &lt;&lt; inputFileName &lt;&lt; endl;\n            outFile &lt;&lt; \"Number of E's: \" &lt;&lt; ecount &lt;&lt; endl;\n            outFile &lt;&lt; \"Number of T's: \" &lt;&lt; tcount &lt;&lt; endl;\n            outFile &lt;&lt; \"Number of A's: \" &lt;&lt; acount &lt;&lt; endl;\n            outFile &lt;&lt; \"Number of O's: \" &lt;&lt; ocount &lt;&lt; endl;\n            outFile &lt;&lt; \"Number of I's: \" &lt;&lt; icount &lt;&lt; endl;\n            outFile &lt;&lt; \"Number of N's: \" &lt;&lt; ncount &lt;&lt; endl;\n            outFile &lt;&lt; \"Number of S's: \" &lt;&lt; scount &lt;&lt; endl;\n            outFile &lt;&lt; \"Number of H's: \" &lt;&lt; hcount &lt;&lt; endl;\n            outFile &lt;&lt; \"Number of R's: \" &lt;&lt; rcount &lt;&lt; endl;\n            outFile &lt;&lt; \"Total Number of Characters: \" &lt;&lt; chartotal &lt;&lt; endl;\n            outFile &lt;&lt; \"--------------------------------\" &lt;&lt; endl;\n            outFile.close();\n            return 0;\n        }\n        inFile.close();\n        inFile.clear();\n    }\n    //cout &lt;&lt; \"exit colm flag\";\n    //cout &lt;&lt; \"exit row flag\\n\";\n\n}\n</code></pre>\n\n<p>It's my understanding that <code>outFile.open(outName);</code> should create a new file with the file name set as <code>outName</code>, however I just get a huge long error whenever I compile.\nWhat am I doing wrong?</p>\n\n<p>Edit: Here is the error I recieve</p>\n\n<pre><code>closed4Ahrens.cpp: In function 'int main()':\nclosed4Ahrens.cpp:19:9: error: no match for 'operator&gt;&gt;' in 'std::cin &gt;&gt; outName'\nclosed4Ahrens.cpp:19:9: note: candidates are:\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:122:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; (*)(std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp;)) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:122:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'std::basic_istream&lt;char&gt;::__istream_type&amp; (*)(std::basic_istream&lt;char&gt;::__istream_type&amp;) {aka std::basic_istream&lt;char&gt;&amp; (*)(std::basic_istream&lt;char&gt;&amp;)}'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:126:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(std::basic_istream&lt;_CharT, _Traits&gt;::__ios_type&amp; (*)(std::basic_istream&lt;_CharT, _Traits&gt;::__ios_type&amp;)) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__ios_type = std::basic_ios&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:126:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'std::basic_istream&lt;char&gt;::__ios_type&amp; (*)(std::basic_istream&lt;char&gt;::__ios_type&amp;) {aka std::basic_ios&lt;char&gt;&amp; (*)(std::basic_ios&lt;char&gt;&amp;)}'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:133:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(std::ios_base&amp; (*)(std::ios_base&amp;)) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:133:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'std::ios_base&amp; (*)(std::ios_base&amp;)'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:169:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(bool&amp;) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:169:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'bool&amp;'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:173:7: note: std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(short int&amp;) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:173:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'short int&amp;'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:176:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(short unsigned int&amp;) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:176:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'short unsigned int&amp;'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:180:7: note: std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(int&amp;) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:180:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'int&amp;'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:183:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(unsigned int&amp;) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:183:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'unsigned int&amp;'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:187:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(long int&amp;) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:187:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'long int&amp;'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:191:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(long unsigned int&amp;) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:191:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'long unsigned int&amp;'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:196:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(long long int&amp;) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:196:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'long long int&amp;'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:200:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(long long unsigned int&amp;) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:200:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'long long unsigned int&amp;'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:205:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(float&amp;) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:205:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'float&amp;'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:209:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(double&amp;) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:209:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'double&amp;'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:213:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(long double&amp;) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:213:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'long double&amp;'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:217:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(void*&amp;) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:217:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'void*&amp;'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:241:7: note: std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::basic_istream&lt;_CharT, _Traits&gt;::operator&gt;&gt;(std::basic_istream&lt;_CharT, _Traits&gt;::__streambuf_type*) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__streambuf_type = std::basic_streambuf&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:241:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'std::basic_istream&lt;char&gt;::__streambuf_type* {aka std::basic_streambuf&lt;char&gt;*}'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/bits/basic_string.tcc:998:5: note: template&lt;class _CharT, class _Traits, class _Alloc&gt; std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::operator&gt;&gt;(std::basic_istream&lt;_CharT, _Traits&gt;&amp;, std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;)\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/bits/istream.tcc:957:5: note: template&lt;class _CharT2, class _Traits2&gt; std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::operator&gt;&gt;(std::basic_istream&lt;_CharT, _Traits&gt;&amp;, _CharT2*)\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/bits/istream.tcc:925:5: note: template&lt;class _CharT, class _Traits&gt; std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::operator&gt;&gt;(std::basic_istream&lt;_CharT, _Traits&gt;&amp;, _CharT&amp;)\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:709:5: note: template&lt;class _Traits&gt; std::basic_istream&lt;char, _Traits&gt;&amp; std::operator&gt;&gt;(std::basic_istream&lt;char, _Traits&gt;&amp;, unsigned char&amp;)\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:714:5: note: template&lt;class _Traits&gt; std::basic_istream&lt;char, _Traits&gt;&amp; std::operator&gt;&gt;(std::basic_istream&lt;char, _Traits&gt;&amp;, signed char&amp;)\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:756:5: note: template&lt;class _Traits&gt; std::basic_istream&lt;char, _Traits&gt;&amp; std::operator&gt;&gt;(std::basic_istream&lt;char, _Traits&gt;&amp;, unsigned char*)\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream:761:5: note: template&lt;class _Traits&gt; std::basic_istream&lt;char, _Traits&gt;&amp; std::operator&gt;&gt;(std::basic_istream&lt;char, _Traits&gt;&amp;, signed char*)\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/iomanip:70:5: note: template&lt;class _CharT, class _Traits&gt; std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::operator&gt;&gt;(std::basic_istream&lt;_CharT, _Traits&gt;&amp;, std::_Resetiosflags)\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/iomanip:100:5: note: template&lt;class _CharT, class _Traits&gt; std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::operator&gt;&gt;(std::basic_istream&lt;_CharT, _Traits&gt;&amp;, std::_Setiosflags)\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/iomanip:131:5: note: template&lt;class _CharT, class _Traits&gt; std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::operator&gt;&gt;(std::basic_istream&lt;_CharT, _Traits&gt;&amp;, std::_Setbase)\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/iomanip:169:5: note: template&lt;class _CharT, class _Traits&gt; std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::operator&gt;&gt;(std::basic_istream&lt;_CharT, _Traits&gt;&amp;, std::_Setfill&lt;_CharT&gt;)\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/iomanip:199:5: note: template&lt;class _CharT, class _Traits&gt; std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::operator&gt;&gt;(std::basic_istream&lt;_CharT, _Traits&gt;&amp;, std::_Setprecision)\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/iomanip:229:5: note: template&lt;class _CharT, class _Traits&gt; std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::operator&gt;&gt;(std::basic_istream&lt;_CharT, _Traits&gt;&amp;, std::_Setw)\nclosed4Ahrens.cpp:68:24: error: no matching function for call to 'std::basic_ofstream&lt;char&gt;::open(const string&amp;)'\nclosed4Ahrens.cpp:68:24: note: candidate is:\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/fstream:702:7: note: void std::basic_ofstream&lt;_CharT, _Traits&gt;::open(const char*, std::ios_base::openmode) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::ios_base::openmode = std::_Ios_Openmode]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/fstream:702:7: note:   no known conversion for argument 1 from 'const string {aka const std::basic_string&lt;char&gt;}' to 'const char*'\n</code></pre>\n\n<p>Update: I deleted the <code>const</code> in <code>const string outName</code>, now the error message is much shorter</p>\n\n<pre><code>closed4Ahrens.cpp:68:24: error: no matching function for call to 'std::basic_ofstream&lt;char&gt;::open(std::string&amp;)'\nclosed4Ahrens.cpp:68:24: note: candidate is:\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/fstream:702:7: note: void std::basic_ofstream&lt;_CharT, _Traits&gt;::open(const char*, std::ios_base::openmode) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::ios_base::openmode = std::_Ios_Openmode]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/fstream:702:7: note:   no known conversion for argument 1 from 'std::string {aka std::basic_string&lt;char&gt;}' to 'const char*'\n</code></pre>\n\n<p>Update 2: I've done as Paul Evans suggested</p>\n\n<pre><code>string outFileName;\nifstream inFile;\nofstream outFile;\nchar inputFileName [fileNameSize+1];\ncout &lt;&lt; \"How many files are being processed?\\n\";\ncin &gt;&gt; fileCount;\ncout &lt;&lt; \"What is the output file name?\\n\";\ncin &gt;&gt; outFileName;\nconst string outName(outFileName);\n</code></pre>\n\n<p>and </p>\n\n<pre><code>outFile.open(outName);\n</code></pre>\n\n<p>And now I am receiving this error message:</p>\n\n<pre><code>closed4Ahrens.cpp: In function 'int main()':\nclosed4Ahrens.cpp:70:17: error: no matching function for call to 'std::basic_ofstream&lt;char&gt;::open()'\nclosed4Ahrens.cpp:70:17: note: candidate is:\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/fstream:702:7: note: void std::basic_ofstream&lt;_CharT, _Traits&gt;::open(const char*, std::ios_base::openmode) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::ios_base::openmode = std::_Ios_Openmode]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/fstream:702:7: note:   candidate expects 2 arguments, 0 provided\n</code></pre>\n"}, {"tags": ["c++", "nvidia", "terrain", "physx"], "answers": [{"tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": false, "score": 0, "last_activity_date": 1486601818, "creation_date": 1486601818, "answer_id": 42126412, "question_id": 42125776, "link": "https://stackoverflow.com/questions/42125776/heightfield-divided-into-parts-physx/42126412#42126412", "title": "HeightFIeld divided into parts - PhysX", "body": "<p>If you are familiar with the website <a href=\"http://www.rastertek.com\" rel=\"nofollow noreferrer\">rastertek</a> for working with DirectX 10 or 11 in c++ within his updated DirectX 11 Terrain Series or version 2 a similar construct was created in tutorial 9 in which he calls Terrain Cells. The direct link to that tutorial can be found here: <a href=\"http://www.rastertek.com/dx11ter09.html\" rel=\"nofollow noreferrer\">DirectX 11: Terrain Series2: Tutorial 9 - Terrain Cells</a>. This should provide an excellent reference that I think is related toward the topic at hand and your initial question.</p>\n"}], "owner": {"reputation": 1, "user_id": 7535452, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vqG56TWLthw/AAAAAAAAAAI/AAAAAAAAAKY/MpBkRpDJo2Y/photo.jpg?sz=128", "display_name": "Rafa\u0142 Pawo\u0142ka", "link": "https://stackoverflow.com/users/7535452/rafa%c5%82-pawo%c5%82ka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486601818, "creation_date": 1486597772, "question_id": 42125776, "link": "https://stackoverflow.com/questions/42125776/heightfield-divided-into-parts-physx", "title": "HeightFIeld divided into parts - PhysX", "body": "<p>I have a terrain with a specific length and width, which take the information from he file bmp. With Shade of grey i can modify my terrain. Fine, it works great. \nHere comes the problem. \nI need my terrain divided into physically smaller parts, joined together create the original terrain. \nHow can i do this? I know that its possible. Any sugestions? Where, why there?</p>\n\n<p>Mys file: \nHeightField.cpp</p>\n\n<pre><code>#include \"HeightField.h\"\n\n\n\nHeightField::HeightField(Terrain terrain, PxPhysics&amp; sdk, PxMaterial &amp;material, int width, int height)\n{\n    this-&gt;nrVertices = terrain.NumVertices;\n    this-&gt;terrain = terrain;\n    this-&gt;width = width;\n    this-&gt;height = height;\n    this-&gt;fillSamples();\n    this-&gt;fillDesc();\n    this-&gt;aHeightField = sdk.createHeightField(hfDesc);\n    this-&gt;hfGeom = new PxHeightFieldGeometry(aHeightField, PxMeshGeometryFlags(), this-&gt;terrain.dy / 255.0, this-&gt;terrain.dx, this-&gt;terrain.dz);\n    this-&gt;terrainPos = new PxTransform(PxVec3(-this-&gt;terrain.dx*(this-&gt;width - 1) / 2, 0.0f, this-&gt;terrain.dz*(this-&gt;height - 1) / 2), PxQuat(3.1415 / 2.0, PxVec3(0, 1, 0)));\n    this-&gt;g_pxHeightField = sdk.createRigidDynamic(*this-&gt;terrainPos);\n    this-&gt;g_pxHeightField-&gt;setRigidDynamicFlag(PxRigidDynamicFlag::eKINEMATIC, true);\n    PxShape* aHeightFieldShape = this-&gt;g_pxHeightField-&gt;createShape(*(this-&gt;hfGeom), material);\n}\n\n\nHeightField::~HeightField()\n{\n}\n\n\nvoid HeightField::fillSamples()\n{\n    this-&gt;samples = (PxHeightFieldSample*)malloc(sizeof(PxHeightFieldSample)*(this-&gt;nrVertices));\n\n    for (int i = 0; i &lt; this-&gt;nrVertices; i++)\n    {\n        samples[i].height = this-&gt;terrain.hminfo.heightMap[i].y;\n        samples[i].clearTessFlag();\n    }\n}\n\nvoid HeightField::fillDesc()\n{\n    this-&gt;hfDesc.format = PxHeightFieldFormat::eS16_TM;\n    this-&gt;hfDesc.nbColumns = this-&gt;width;\n    this-&gt;hfDesc.nbRows = this-&gt;height;\n    this-&gt;hfDesc.samples.data = this-&gt;samples;\n    this-&gt;hfDesc.samples.stride = sizeof(PxHeightFieldSample);\n}\n</code></pre>\n\n<p>Terrain.cpp</p>\n\n<pre><code>#include \"Terrain.h\"\n\n\nTerrain::Terrain(void)\n{\n    v = NULL;\n    indices = NULL;\n    dx = dz = 1000; //odleg\u00b3o\u0153\u00e6 mi\u00eadzy punktami grid'a \n    dy = 1000; //maksymalna wysoko\u0153\u00e6 terenu\n}\n\n\nTerrain::~Terrain(void)\n{\n    if (v != NULL) delete [] v;\n    if (indices != NULL) delete indices;\n    if (hminfo.heightMap != NULL) delete [] hminfo.heightMap;\n}\n\nbool Terrain::HeightMapLoad(char* filename, float sx, float sz, float maxy)\n{\n    FILE *filePtr;                          // Point to the current position in the file\n    BITMAPFILEHEADER bitmapFileHeader;      // Structure which stores information about file\n    BITMAPINFOHEADER bitmapInfoHeader;      // Structure which stores information about image\n    int imageSize, index;\n    unsigned char height;\n\n    // Open the file\n    filePtr = fopen(filename,\"rb\");\n    if (filePtr == NULL)\n        return 0;\n\n    dx = sz;\n    dz = sz;\n    dy = maxy;\n\n\n\n    // Get the width and height (width and length) of the image\n    hminfo.terrainWidth =  bitmapInfoHeader.biWidth;\n    hminfo.terrainHeight = bitmapInfoHeader.biHeight;\n\n\n    // Initialize the heightMap array (stores the vertices of our terrain)\n    hminfo.heightMap = new IntV3[hminfo.terrainWidth * hminfo.terrainHeight];\n\n    // We use a greyscale image, so all 3 rgb values are the same, but we only need one for the height\n    // So we use this counter to skip the next two components in the image data (we read R, then skip BG)\n    int k=0;\n\n    // Read the image data into our heightMap array\n    for(int j=0; j&lt; hminfo.terrainHeight; j++)\n    {\n        for(int i=0; i&lt; hminfo.terrainWidth; i++)\n        {\n            height = bitmapImage[k];\n\n            index = ( hminfo.terrainWidth * (hminfo.terrainHeight - 1 - j)) + i;\n\n            hminfo.heightMap[index].x = i - (hminfo.terrainWidth - 1)/2;\n            hminfo.heightMap[index].y = height;\n            hminfo.heightMap[index].z = j - (hminfo.terrainHeight - 1)/2;\n\n            k+=3;\n        }\n        k++;\n    }\n\n\n    int cols = hminfo.terrainWidth;\n    int rows = hminfo.terrainHeight;\n\n    //Create the grid\n    NumVertices = 2 * rows * cols;\n    NumFaces  = (rows-1)*(cols-1)*2;\n\n    v = new struct HeightFieldVertex[NumVertices];\n\n    for(DWORD i = 0; i &lt; rows; ++i)\n    {\n        for(DWORD j = 0; j &lt; cols; ++j)\n        {\n            v[i*cols+j].pos.x = hminfo.heightMap[i*cols+j].x * dx;\n            v[i*cols+j].pos.y = (float(hminfo.heightMap[i*cols+j].y)/255.0) * dy;\n            v[i*cols+j].pos.z = hminfo.heightMap[i*cols+j].z * dz;\n            v[i*cols+j].texCoord = D3DXVECTOR2(j, i);\n        }\n    }\n\n    indices = new DWORD[NumFaces * 3];\n\n    k = 0;\n    for(DWORD i = 0; i &lt; rows-1; i++)\n    {\n        for(DWORD j = 0; j &lt; cols-1; j++)\n        {\n            indices[k]   = i*cols+j;        // Bottom left of quad\n            indices[k+1] = i*cols+j+1;      // Bottom right of quad\n            indices[k+2] = (i+1)*cols+j;    // Top left of quad\n            indices[k+3] = (i+1)*cols+j;    // Top left of quad\n            indices[k+4] = i*cols+j+1;      // Bottom right of quad\n            indices[k+5] = (i+1)*cols+j+1;  // Top right of quad\n\n            k += 6; // next quad\n        }\n    }\n\n    //normals &amp; tangents\n    std::vector&lt;D3DXVECTOR3&gt; tempNormal;\n\n    //normalized and unnormalized normals\n    D3DXVECTOR3 unnormalized(0.0f, 0.0f, 0.0f);\n\n    //tangent stuff\n    std::vector&lt;D3DXVECTOR3&gt; tempTangent;\n\n    D3DXVECTOR3 tangent(0.0f, 0.0f, 0.0f);\n    float tcU1, tcV1, tcU2, tcV2;\n\n    //Used to get vectors (sides) from the position of the verts\n    float vecX, vecY, vecZ;\n\n    //Two edges of our triangle\n    D3DXVECTOR3 edge1(0.0f, 0.0f, 0.0f);\n    D3DXVECTOR3 edge2(0.0f, 0.0f, 0.0f);\n\n    //Compute face normals\n    //And Tangents\n    for(int i = 0; i &lt; NumFaces; ++i)\n    {\n        //Get the vector describing one edge of our triangle (edge 0,2)\n        vecX = v[indices[(i*3)+1]].pos.x - v[indices[(i*3)]].pos.x;\n        vecY = v[indices[(i*3)+1]].pos.y - v[indices[(i*3)]].pos.y;\n        vecZ = v[indices[(i*3)+1]].pos.z - v[indices[(i*3)]].pos.z;       \n        edge1 = D3DXVECTOR3(vecX, vecY, vecZ);    //Create our first edge\n\n        //Get the vector describing another edge of our triangle (edge 2,1)\n        vecX = v[indices[(i*3)+2]].pos.x - v[indices[(i*3)]].pos.x;\n        vecY = v[indices[(i*3)+2]].pos.y - v[indices[(i*3)]].pos.y;\n        vecZ = v[indices[(i*3)+2]].pos.z - v[indices[(i*3)]].pos.z;     \n        edge2 = D3DXVECTOR3(vecX, vecY, vecZ);    //Create our second edge\n\n        //Cross multiply the two edge vectors to get the un-normalized face normal\n        D3DXVec3Cross(&amp;unnormalized, &amp;edge1, &amp;edge2);\n        tempNormal.push_back(unnormalized);\n\n        //Find first texture coordinate edge 2d vector\n        tcU1 = v[indices[(i*3)+1]].texCoord.x - v[indices[(i*3)]].texCoord.x;\n        tcV1 = v[indices[(i*3)+1]].texCoord.y - v[indices[(i*3)]].texCoord.y;\n\n        //Find second texture coordinate edge 2d vector\n        tcU2 = v[indices[(i*3)+2]].texCoord.x - v[indices[(i*3)]].texCoord.x;\n        tcV2 = v[indices[(i*3)+2]].texCoord.y - v[indices[(i*3)]].texCoord.y;\n\n        //Find tangent using both tex coord edges and position edges\n        tangent.x = (tcV2 * edge1.x - tcV1 * edge2.x)  / (tcU1 * tcV2 - tcU2 * tcV1);\n        tangent.y = (tcV2 * edge1.y - tcV1 * edge2.y)  / (tcU1 * tcV2 - tcU2 * tcV1);\n        tangent.z = (tcV2 * edge1.z - tcV1 * edge2.z)  / (tcU1 * tcV2 - tcU2 * tcV1);\n\n        tempTangent.push_back(tangent);\n    }\n\n    //Compute vertex normals (normal Averaging)\n    D3DXVECTOR4 normalSum(0.0f, 0.0f, 0.0f, 0.0f);\n    D3DXVECTOR4 tangentSum(0.0f, 0.0f, 0.0f, 0.0f);\n    int facesUsing = 0;\n    float tX, tY, tZ;   //temp axis variables\n\n    //Go through each vertex\n    for(int i = 0; i &lt; NumVertices; ++i)\n    {\n        //Check which triangles use this vertex\n        for(int j = 0; j &lt; NumFaces; ++j)\n        {\n            if(indices[j*3] == i ||\n                indices[(j*3)+1] == i ||\n                indices[(j*3)+2] == i)\n            {\n                tX = normalSum.x + tempNormal[j].x;\n                tY = normalSum.y + tempNormal[j].y;\n                tZ = normalSum.z + tempNormal[j].z;\n\n                normalSum = D3DXVECTOR4(tX, tY, tZ, 0.0f);  //If a face is using the vertex, add the unormalized face normal to the normalSum\n\n                facesUsing++;\n            }\n        }\n        //Get the actual normal by dividing the normalSum by the number of faces sharing the vertex\n        normalSum = normalSum / facesUsing;\n\n        facesUsing = 0;\n        //Check which triangles use this vertex\n        for(int j = 0; j &lt; NumFaces; ++j)\n        {\n            if(indices[j*3] == i ||\n                indices[(j*3)+1] == i ||\n                indices[(j*3)+2] == i)\n            {\n\n                //We can reuse tX, tY, tZ to sum up tangents\n                tX = tangentSum.x + tempTangent[j].x;\n                tY = tangentSum.y + tempTangent[j].y;\n                tZ = tangentSum.z + tempTangent[j].z;\n\n                tangentSum = D3DXVECTOR4(tX, tY, tZ, 0.0f); //sum up face tangents using this vertex\n\n                facesUsing++;\n            }\n        }\n        //Get the actual normal by dividing the normalSum by the number of faces sharing the vertex\n        tangentSum = tangentSum / facesUsing;\n\n        //Normalize the normalSum vector and tangent\n        D3DXVec4Normalize(&amp;normalSum, &amp;normalSum);\n        D3DXVec4Normalize(&amp;tangentSum, &amp;tangentSum);\n\n        //Store the normal and tangent in our current vertex\n        v[i].normal.x = normalSum.x;\n        v[i].normal.y = normalSum.y;\n        v[i].normal.z = normalSum.z;\n\n        v[i].tangent.x = tangentSum.x;\n        v[i].tangent.y = tangentSum.y;\n        v[i].tangent.z = tangentSum.z;\n\n        D3DXVECTOR3 bit;\n\n        D3DXVec3Cross(&amp;bit, &amp;v[i].normal, &amp;v[i].tangent);\n        v[i].bitangent = -1.0 * bit;\n\n        //Clear normalSum, tangentSum and facesUsing for next vertex\n        normalSum = D3DXVECTOR4(0.0f, 0.0f, 0.0f, 0.0f);\n        tangentSum = D3DXVECTOR4(0.0f, 0.0f, 0.0f, 0.0f);\n        facesUsing = 0;\n    }\n\n    ////terrain AABB\n    //MinX =  -1.0 * dx * (hminfo.terrainWidth - 1)/2;\n    //MinY = 0.0;\n    //MinZ =  -1.0 * dz * (hminfo.terrainHeight - 1)/2;\n    //MaxX =  dx * (hminfo.terrainWidth - 1)/2;\n    //MaxY = dy;\n    //MaxZ =  dz * (hminfo.terrainHeight - 1)/2;\n\n    return true;\n}\n</code></pre>\n\n<p>Fragment of Base.cpp</p>\n\n<pre><code>HeightField *hf = new HeightField(g_Terrain, *g_PhysicsSDK, *material, g_Terrain.hminfo.terrainWidth, g_Terrain.hminfo.terrainHeight);\n    g_PxScene-&gt;addActor(*(hf-&gt;g_pxHeightField));\n</code></pre>\n\n<p>I want to get something similar, but in order to work correctly\n<a href=\"https://i.stack.imgur.com/eXUUq.jpg\" rel=\"nofollow noreferrer\">PVD - simulation Terrain</a></p>\n"}, {"tags": ["c++", "variadic-templates"], "answers": [{"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 3, "last_activity_date": 1486598197, "last_edit_date": 1486598197, "creation_date": 1486597726, "answer_id": 42125768, "question_id": 42125733, "link": "https://stackoverflow.com/questions/42125733/mixing-types-and-nontypes-in-variadic-template-parameters/42125768#42125768", "title": "Mixing types and nontypes in variadic template parameters?", "body": "<p>As I see, you alreadty hardcoded the number and types of parameter the class <code>T</code> must take as template parameter. You don't need variadic templates here. Just do this instead:</p>\n\n<pre><code>template &lt;\n    template&lt;class, std::size_t&gt;  class T,\n    class A, std::size_t N&gt;\nclass C {\n\n    T&lt;A, N&gt; storage;\n};\n\nint main(){\n    C&lt;std::array, int, 3&gt; c; // works!\n}\n</code></pre>\n\n<p>If you wish to use variadic templates, then put it in the template template parameter too:</p>\n\n<pre><code>template &lt;\n    template&lt;typename...&gt;  class T,\n    typename... Types&gt;\nclass C {\n\n    T&lt;Types...&gt; storage;\n};\n</code></pre>\n\n<p>If you wish to use that version but still want to use <code>std::array</code>, you can create an alias to <code>std::array</code> that already has a size:</p>\n\n<pre><code>template&lt;typename T&gt;\nusing array3 = std::array&lt;T, 3&gt;;\n\nC&lt;array3, int&gt; c;\n</code></pre>\n\n<p>Alternatively, you can also create some sort of template template alias that let you choose the size:</p>\n\n<pre><code>template&lt;std::size_t n&gt;\nstruct sized_array {\n    template&lt;typename T&gt;\n    using array = std::array&lt;T, n&gt;;\n};\n\nC&lt;sized_array&lt;5&gt;::array, int&gt;;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1297, "user_id": 4049863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88901438bae8aadeeb93f33cc7e88c?s=128&d=identicon&r=PG&f=1", "display_name": "G&#233;za T&#246;r&#246;k", "link": "https://stackoverflow.com/users/4049863/g%c3%a9za-t%c3%b6r%c3%b6k"}, "edited": false, "score": 0, "creation_date": 1576718049, "post_id": 42126358, "comment_id": 104993148, "body": "&quot;you can wrap a value in a type but not the other way around&quot; -- it seems being worth to note that passing types wrapped into specifically typed values as template parameters has become available as of c++20, as valid non-type template parameters have been redefined as instances of any literal type."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1297, "user_id": 4049863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88901438bae8aadeeb93f33cc7e88c?s=128&d=identicon&r=PG&f=1", "display_name": "G&#233;za T&#246;r&#246;k", "link": "https://stackoverflow.com/users/4049863/g%c3%a9za-t%c3%b6r%c3%b6k"}, "edited": false, "score": 0, "creation_date": 1576768020, "post_id": 42126358, "comment_id": 105011789, "body": "@G&#233;zaT&#246;r&#246;k I&#39;m not sure what advantage that would offer in this scenario - where we need all the arguments to have the same kind."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 6, "last_activity_date": 1486601543, "creation_date": 1486601543, "answer_id": 42126358, "question_id": 42125733, "link": "https://stackoverflow.com/questions/42125733/mixing-types-and-nontypes-in-variadic-template-parameters/42126358#42126358", "title": "Mixing types and nontypes in variadic template parameters?", "body": "<blockquote>\n  <p>Is it possible to do mixing of types and nontypes in variadic template parameters?</p>\n</blockquote>\n\n<p>No. You can't mix and match. But since you can wrap a value in a type but not the other way around, you can just stay in the world of types:</p>\n\n<pre><code>template &lt;template&lt;class...&gt; class T, class ... Types&gt;\nclass C {    \n    T&lt;Types...&gt; storage;\n};\n</code></pre>\n\n<p>And then it's just a matter of making <code>std::array</code> work with just types:</p>\n\n<pre><code>template &lt;class T, class N&gt;\nusing my_array = std::array&lt;T, N::value&gt;;\n\ntemplate &lt;size_t N&gt;\nusing size_ = std::integral_constant&lt;size_t, N&gt;;\n</code></pre>\n\n<p>So your original example becomes:</p>\n\n<pre><code>C&lt;my_array, int, size_&lt;3&gt;&gt; c;\n</code></pre>\n"}], "owner": {"reputation": 3257, "user_id": 3578468, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c7957773c9ae23195b8a064ade49af29?s=128&d=identicon&r=PG&f=1", "display_name": "lo tolmencre", "link": "https://stackoverflow.com/users/3578468/lo-tolmencre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1641, "favorite_count": 1, "accepted_answer_id": 42125768, "answer_count": 2, "score": 11, "last_activity_date": 1486601543, "creation_date": 1486597473, "question_id": 42125733, "link": "https://stackoverflow.com/questions/42125733/mixing-types-and-nontypes-in-variadic-template-parameters", "title": "Mixing types and nontypes in variadic template parameters?", "body": "<p>Is it possible to do mixing of types and nontypes in variadic template parameters? If I were to pass a <code>std::array</code> for instance to this class as parameter <code>T</code>, I would need to also pass a type for the array and a length, but the way I tried it below causes an error when encountering a value, because it only expects types for <code>Types</code>:</p>\n\n<pre><code>template &lt;\n    template&lt;class, std::size_t&gt;  class T,\n    class ... Types&gt;\nclass C {\n\n    T&lt;Types...&gt; storage;\n};\n\nint main(){\n    C&lt;std::array, int, 3&gt; c;\n}\n</code></pre>\n\n<p>Error message:</p>\n\n<pre><code>error: template argument for template type parameter must be a\n      type\n    Container&lt;std::array, int, 3&gt; c;\n                               ^\n</code></pre>\n\n<p>Is there a way to pass types and values in a variadic context?</p>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1486594560, "post_id": 42125179, "comment_id": 71418458, "body": "It should be possible in C++17."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1486594585, "post_id": 42125179, "comment_id": 71418469, "body": "Function&lt;decltype(&amp;val)&gt;() but that&#39;s not really deduction.  <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> would help a lot."}, {"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 1, "creation_date": 1486594982, "post_id": 42125179, "comment_id": 71418654, "body": "Template parameter cannot be a pointer. It can only be a type or primitive type"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1486595289, "post_id": 42125179, "comment_id": 71418782, "body": "@Jarod42, I knew they were improving template parameter deduction in C++17, but not that they had that. Would that just be <code>template&lt;auto* object&gt; int Function();</code> (perhaps with <code>using T=decltype(object)</code> inside), or is something more complicated?"}, {"owner": {"reputation": 1156, "user_id": 3738040, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zKsuP.png?s=128&g=1", "display_name": "dlavila", "link": "https://stackoverflow.com/users/3738040/dlavila"}, "reply_to_user": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 1, "creation_date": 1486595291, "post_id": 42125179, "comment_id": 71418786, "body": "@balki and template parameters must be constant expression"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 7, "creation_date": 1486595376, "post_id": 42125179, "comment_id": 71418807, "body": "Template parameters can be pointers or references to something with static storage duration (see <a href=\"http://en.cppreference.com/w/cpp/language/template_parameters#Template_non-type_arguments\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/&hellip;</a>)"}, {"owner": {"reputation": 2265, "user_id": 5379, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/582d1ca83c33f9792f5fa014097fc116?s=128&d=identicon&r=PG", "display_name": "Dominic Dos Santos", "link": "https://stackoverflow.com/users/5379/dominic-dos-santos"}, "edited": false, "score": 0, "creation_date": 1486595572, "post_id": 42125179, "comment_id": 71418880, "body": "Daniel is correct. See <a href=\"https://ideone.com/WBQSVu\" rel=\"nofollow noreferrer\">ideone.com/WBQSVu</a> The key thing is that the pointer has to have a static address, it can&#39;t be a local or dynamically allocated variable."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 0, "creation_date": 1486596575, "post_id": 42125179, "comment_id": 71419213, "body": "@balki yes they can be pointer and reference to object. As long as the object has static storage duration. Pointer to function can be passed around in template parameter too."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1486601404, "post_id": 42125179, "comment_id": 71420763, "body": "@DominicDosSantos: I&#39;m not sure what you mean. How can there be any type deduction for <code>T* object</code> when you don&#39;t use it anywhere (or at least, the compiler doesn&#39;t see you using it when you declare and when you call the function)?"}, {"owner": {"reputation": 919, "user_id": 5017858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OfAr1.png?s=128&g=1", "display_name": "Sam Marinelli", "link": "https://stackoverflow.com/users/5017858/sam-marinelli"}, "edited": false, "score": 0, "creation_date": 1486612297, "post_id": 42125179, "comment_id": 71423446, "body": "Out of curiosity, do you just want to be able to do this for the sake of brevity/elegance, or is there another reason?"}, {"owner": {"reputation": 2265, "user_id": 5379, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/582d1ca83c33f9792f5fa014097fc116?s=128&d=identicon&r=PG", "display_name": "Dominic Dos Santos", "link": "https://stackoverflow.com/users/5379/dominic-dos-santos"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1486659565, "post_id": 42125179, "comment_id": 71451229, "body": "@einpoklum: I believe the compiler should be able to deduce the type at the call site, based on the type of the supplied template parameter."}, {"owner": {"reputation": 2265, "user_id": 5379, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/582d1ca83c33f9792f5fa014097fc116?s=128&d=identicon&r=PG", "display_name": "Dominic Dos Santos", "link": "https://stackoverflow.com/users/5379/dominic-dos-santos"}, "reply_to_user": {"reputation": 919, "user_id": 5017858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OfAr1.png?s=128&g=1", "display_name": "Sam Marinelli", "link": "https://stackoverflow.com/users/5017858/sam-marinelli"}, "edited": false, "score": 1, "creation_date": 1486659745, "post_id": 42125179, "comment_id": 71451371, "body": "@SamMarinelli: Good question. It&#39;s a brevity thing. I&#39;m designing an API, and in practice, forcing users to redundantly specify the type of an argument they&#39;re already supplying both hurts readability and introduces another source of errors--and with C++ templates, errors can often exceptionally costly for users to resolve."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 15, "last_activity_date": 1486642924, "creation_date": 1486642924, "answer_id": 42136609, "question_id": 42125179, "link": "https://stackoverflow.com/questions/42125179/c-template-argument-type-deduction/42136609#42136609", "title": "C++ template argument type deduction", "body": "<p>In C++17, you can have <code>auto</code> non-type template parameters.  This will let you solve your problem.</p>\n\n<p>Something <em>like</em>:</p>\n\n<pre><code>template&lt;auto object, class T=std::decay_t&lt;decltype(*object)&gt;&gt;\nint Function();\n</code></pre>\n\n<p>(assuming you want the type <code>T</code> within the body of <code>Function</code>)</p>\n\n<p>In C++14, the C++17 feature is missing.  It was added exactly because it was missing.  Workarounds involve macros like <code>#define UGLY_HACK(...) decltype(__VA_ARGS__), __VA_ARGS__</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 874, "user_id": 6858550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbd1aac23957d00bfb620319ddd38a13?s=128&d=identicon&r=PG&f=1", "display_name": "Han XIAO", "link": "https://stackoverflow.com/users/6858550/han-xiao"}, "edited": false, "score": 2, "creation_date": 1531643322, "post_id": 47125430, "comment_id": 89666143, "body": "That&#39;s almost the contents in effective modern c++."}, {"owner": {"reputation": 1662, "user_id": 4726537, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/36c00f47817df57a2a454700bc3e9261?s=128&d=identicon&r=PG&f=1", "display_name": "ggulgulia", "link": "https://stackoverflow.com/users/4726537/ggulgulia"}, "reply_to_user": {"reputation": 874, "user_id": 6858550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbd1aac23957d00bfb620319ddd38a13?s=128&d=identicon&r=PG&f=1", "display_name": "Han XIAO", "link": "https://stackoverflow.com/users/6858550/han-xiao"}, "edited": false, "score": 0, "creation_date": 1531654906, "post_id": 47125430, "comment_id": 89668622, "body": "i must admit it is!"}, {"owner": {"reputation": 11283, "user_id": 5825294, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Un5fU.png?s=128&g=1", "display_name": "Enlico", "link": "https://stackoverflow.com/users/5825294/enlico"}, "edited": false, "score": 1, "creation_date": 1544450833, "post_id": 47125430, "comment_id": 94269171, "body": "@gajendra, <b>some_expression</b> should actually be <b>expression</b>."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1569581247, "post_id": 47125430, "comment_id": 102652832, "body": "The chapter is great, but I fail to see how it answers the question. These are the basics of template type deduction formatted in a nice way, but how is that an answer to &quot;<i>is there any way I coerce the compiler to deduce the type T based on the type of the argument &amp;val?</i>&quot;?"}, {"owner": {"reputation": 141, "user_id": 2777213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IRa3z.png?s=128&g=1", "display_name": "Andy Borrell", "link": "https://stackoverflow.com/users/2777213/andy-borrell"}, "edited": false, "score": 1, "creation_date": 1569934263, "post_id": 47125430, "comment_id": 102749930, "body": "This doesn&#39;t answer the question"}, {"owner": {"reputation": 600, "user_id": 2650894, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bc2b203d73595b699da9461f91a9fc2a?s=128&d=identicon&r=PG", "display_name": "harun_a", "link": "https://stackoverflow.com/users/2650894/harun-a"}, "edited": false, "score": 0, "creation_date": 1577247755, "post_id": 47125430, "comment_id": 105128459, "body": "In <code>f(&amp;pointer_x); &#47;&#47; T is const int, paramType is const int*</code> isn&#39;t <code>&amp;pointer_x</code> a pointer-to-pointer type?"}], "tags": [], "owner": {"reputation": 1662, "user_id": 4726537, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/36c00f47817df57a2a454700bc3e9261?s=128&d=identicon&r=PG&f=1", "display_name": "ggulgulia", "link": "https://stackoverflow.com/users/4726537/ggulgulia"}, "is_accepted": false, "score": 12, "last_activity_date": 1589542136, "last_edit_date": 1589542136, "creation_date": 1509908570, "answer_id": 47125430, "question_id": 42125179, "link": "https://stackoverflow.com/questions/42125179/c-template-argument-type-deduction/47125430#47125430", "title": "C++ template argument type deduction", "body": "<p><strong>Note: The answer here has been borrowed from effective modern C++ with a (very) few additions of my own</strong></p>\n\n<p>This is one of those questions that are easy to pose but difficult to answer! I remember reading an entire ch. apter on template type deduction, and to a rookie reader, the answer is not clear in one read either. Nevertheless, I will try to clarify it here. </p>\n\n<p>One should note that there is something called <strong><em>Universal References</em></strong>  (which are not the same as references or r-value references) that influences template type deduction, and I assume readers know about l-value and r-value references. </p>\n\n<p>Any ubiquitous function template  definition looks like the following: </p>\n\n<pre><code>template &lt;typename T&gt;\nreturnType function(paramType param);\n</code></pre>\n\n<p>A call to function would look somehow look like this :</p>\n\n<pre><code>function(expression);\n</code></pre>\n\n<p>The compiler uses <strong>expression</strong> to determine the type of <strong>T</strong> and the type of <strong>paramType</strong>. This is so because more often <strong>paramType</strong> contains decorations like <strong>const</strong>, <strong>const&amp;</strong>, <strong>const&amp;&amp;</strong>, etc. Beginners would be tempted to believe that the type <strong>T</strong> deduced by the compiler will be the same as the type of <strong>expression</strong>, i.e., the argument passed to the function, but it is not always the case. Deduction of type <strong>T</strong> depends both on <strong>expression</strong> and <strong>paramType</strong> . Depending on what the function parameter <strong>paramType</strong> is there are three cases to be considered for template type deduction: </p>\n\n<ol>\n<li><strong>paramType</strong> is pointer or reference but not a universal reference.</li>\n<li><strong>paramType</strong> is a universal reference.</li>\n<li><strong>paramType</strong> is neither a pointer nor a reference. </li>\n</ol>\n\n<p>Let's take a look at each case one by one</p>\n\n<h2>Case 1: paramType is a pointer or a reference but not a universal reference</h2>\n\n<p>Call me crazy, but this is the simplest case that can be encountered. In this case, type deduction works like this:\n(i) If <strong><em>expression</em></strong> is a reference, then ignore the reference part\n(ii) then match <strong><em>expression's</em></strong> pattern against <strong><em>paramType</em></strong> to determine <strong><em>T</em></strong></p>\n\n<p>Lets take a look at an example : </p>\n\n<pre><code>template &lt;typename T&gt;\nreturnType function(T &amp;param);\n</code></pre>\n\n<p>We have the following variable declarations:</p>\n\n<pre><code>int x = 23;               // x is int\nconst int const_x = x;    // const_x is const int\nconst int&amp; ref_x = x;     // ref_x is a reference to x as const int\n</code></pre>\n\n<p>The deduced call for <strong><em>T</em></strong> and <strong><em>param</em></strong> in various calls are as follows :</p>\n\n<pre><code>f(x);                    //T is int, param's type is int&amp;\nf(const_x);              //T is const int, param's type is const int&amp;\nf(ref_x);                //T is const int, param's type is const int&amp;\n</code></pre>\n\n<p>There are two points to be noted here: </p>\n\n<p>(i) the compiler ignores the reference-ness for type deduction here</p>\n\n<p>(ii) the const-ness becomes a part of type <strong><em>T</em></strong> when passing a const object or reference to a const object, and hence passing const objects or references to const object to functions taking parameter <strong><em>T&amp;</em></strong> is safe. </p>\n\n<p>If we change the function parameter from <strong><em>T&amp;</em></strong> to <strong><em>const T&amp;</em></strong>, because in this case we are assuming <strong><em>param</em></strong> to be reference to <em>const</em>, the <strong><em>const</em></strong>-ness need not be deduced as a part of <strong><em>T</em></strong> . Below is an example:</p>\n\n<pre><code>template &lt;typename T&gt;\nreturnType function(const T&amp; param);  // param is now a ref-to-const\n\nint x = 23;                    // same as previous\nconst int const_x = x;         // same as previous\nconst int&amp; ref_x = x;          // same as previous\n\nf(x);                         // T is int, paramType is const int&amp;\nf(const_x);                   // T is int, paramType is const int&amp;\nf(ref_x);                     // T is int, paramType is const int&amp;\n</code></pre>\n\n<p><strong>Note</strong>: variable 'x' is not a const argument to 'f()' but it is till deduced as a const param </p>\n\n<p>If <strong><em>paramType</em></strong> is a pointer, things will work fundamentally the same way as with references. There will be pointers instead of references. E.g., below for the sake of completeness is provided:</p>\n\n<pre><code>template &lt;typename T&gt;\nreturnType function( T* paramType);  // paramType is now a pointer\n\nint x = 23;                      // same as before\nconst int *pointer_x = &amp;x;       // pointer_x is pointer to x as const int\n\nf(&amp;x);                          // T is int, paramType is int*\nf(pointer_x);                   // T is const int, paramType is const int*\n</code></pre>\n\n<p>For the sake of completeness I may as well post the case if <strong>paramType</strong> were a pointer to a constant object like the following:</p>\n\n<pre><code>template &lt;typename T&gt;\nreturnType function(const T* paramType);\n\nint x = 23;                      // same as before\nconst int *pointer_x = &amp;x;       // pointer_x is pointer to x as const int\n\nf(&amp;x);                          // T is int, paramType is const int*\nf(pointer_x);                  // T is int, paramType is const int*\n</code></pre>\n\n<p>i.e., again the <strong><em>const</em></strong>-ness is not anymore deduced as a part of T </p>\n\n<p>In case of r-value references, type <strong><em>T</em></strong> and <strong><em>paramType</em></strong> deduction follow essentially the same rules as they do in case of l-value references. </p>\n\n<p>This covers most of it for the first case. Let's look at our case 2.</p>\n\n<h2>Case 2: paramType is a universal reference</h2>\n\n<p>Universal references are declared like r-value references but take l-value, but what makes their behavior different is that the function arguments receive l-value references. Here's how the type deduction works for this case:</p>\n\n<p>(i) If <strong><em>expression</em></strong> is an l-value, both <strong><em>T</em></strong> and <strong><em>paramType</em></strong> are deduced to be l-value. (This seems strange in the face of how the code looks like because although <strong><em>paramType</em></strong> is declared using the syntax of r-value reference, its deduced type is of l-value reference.) It should be noted that this is the only case where <strong><em>T</em></strong> is deduced to be a reference.</p>\n\n<p>The example below clarifies my explanation:</p>\n\n<pre><code>template &lt;typename T&gt;\nreturnType function(T&amp;&amp; paramType);  // param becomes universal reference if\n                                     // argument to function call is an l-value\n\nint x = 23                     // same as previous\nconst int const_x = x;         // same as previous\nconst int&amp; ref_x = x;          // same as previous\n\nf(x);             // x is l-value therefore T is int&amp;\n                  // paramType is int&amp;\n\nf(const_x);       // const_x is l-value therefore T is const int&amp;\n                  //paramType is also const int&amp;\n\nf(ref_x);        // ref_x is l-value therefore T is const int&amp;\n                 // paramType is also const int&amp;\n\nf(23);          // 23 is r-value so T is int\n                // paramType is now int&amp;&amp;\n</code></pre>\n\n<p>I want to be honest here and say that this doesn't explain why universal references work the way they do, but I think this post will become too lengthy if I go on to justify it here. </p>\n\n<h2>Case 3: paramType is neither a pointer nor a reference</h2>\n\n<p>This is where pass-by-value in template occurs, which implies that param will be a copy of whatever is passed to the argument of the calling function, i.e., a completely new object, and this motivates the rules that govern type deduction of <strong><em>T</em></strong> from <strong><em>expression</em></strong> . Two points to be noted here are:</p>\n\n<p>(i) ignore the <em>refrence</em>-ness in <strong><em>expression</em></strong> , if there happens to be one.</p>\n\n<p>(ii) after ignoring the <em>ref</em>-ness, ignore <em>const</em>-ness or <em>volatile</em>-ness too, i.e if present</p>\n\n<pre><code>template &lt;typename T&gt;\nreturnType function(T paramType);\n\nint x = 23;\nconst int const_x = x;\nconst int&amp; ref_x = x;\n\nf(x);             // T and paramType are both int\nf(const_x);       // T and paramType are both int here too\nf(ref_x);         // T and paramType are both int again\n</code></pre>\n\n<p>Note even though const_x and ref_x are const objects which cannot be modified, it doesn't mean that their copies cannot be modified.\nThis looks straightforward, but it gets tricker when we pass a constant pointer to a constant object. Let's take a look at another example:</p>\n\n<pre><code>template &lt;typename T&gt;\nreturnType function(T param);\n\nconst double *const dPtr = 23;  // dPtr is const pointer to const double\n\nfunction(dPtr);             // passing argument of type const double *const\n</code></pre>\n\n<p>When <em>const</em> pointer is passed by value, the <em>const</em>-ness is lost, and the pointer is copied by value, which is in sync with the type deduction rules for pass by value, but the <em>const</em>-ness of what pointer points to is preserved, and hence the <strong><em>paramType</em></strong> will be const *double.</p>\n\n<p>This might get your head spinning as it did to me when I started to learn about it. The best way would be to re-read it and try to code it.</p>\n"}], "owner": {"reputation": 2265, "user_id": 5379, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/582d1ca83c33f9792f5fa014097fc116?s=128&d=identicon&r=PG", "display_name": "Dominic Dos Santos", "link": "https://stackoverflow.com/users/5379/dominic-dos-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12009, "favorite_count": 12, "accepted_answer_id": 42136609, "answer_count": 2, "score": 16, "last_activity_date": 1589542136, "creation_date": 1486594408, "last_edit_date": 1486600626, "question_id": 42125179, "link": "https://stackoverflow.com/questions/42125179/c-template-argument-type-deduction", "title": "C++ template argument type deduction", "body": "<p>Given a templated function declared like this:</p>\n\n<pre><code>template&lt;class T&gt;\nint Function(T object);\n</code></pre>\n\n<p>A user can invoke this function by specifying the templated type, like this:</p>\n\n<pre><code>int result = Function&lt;float&gt;(100.f); // Valid\n</code></pre>\n\n<p>But the type specification is optional, as the compiler can deduce the type of T from the supplied argument's type; like this:</p>\n\n<pre><code>int result = Function(100.f); // Also valid, the compiler deduced the type \"float\" from the literal's type\n</code></pre>\n\n<p>Let's say I get a little more complicated, and I want a templated value parameter like this:</p>\n\n<pre><code>template&lt;class T, T* object&gt;\nint Function();\n</code></pre>\n\n<p>I can call my function in this way:</p>\n\n<pre><code>static float val = 100.f;\n// ...\nint result = Function&lt;float, &amp;val&gt;();\n</code></pre>\n\n<p>My question is: <strong>is there any way I coerce the compiler to deduce the type T based on the type of the argument &amp;val?</strong></p>\n\n<p>What I need is a way to make the following code valid:</p>\n\n<pre><code>static float val = 100.f;\n// ...\nint result = Function&lt;&amp;val&gt;();\n</code></pre>\n\n<p>Can it be done?</p>\n"}, {"tags": ["c++", "c", "linux", "include-path", "codelite"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1486594497, "post_id": 42125149, "comment_id": 71418422, "body": "You need to edit makefile(s) and add that directory to include list. How to that in your particular case depends on your makefile"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1486594546, "post_id": 42125149, "comment_id": 71418451, "body": "Best option: install your distribution&#39;s development package for wx instead of building your own local copy.  This will almost certainly solve the problem."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1486594609, "post_id": 42125149, "comment_id": 71418485, "body": "No! Never put crap in your PATH, that&#39;s a recipe for disaster, and it won&#39;t work here anyway. That&#39;s Windows-think. Include paths are for the C compiler, so you have to pass &quot;-I/home/...&quot; to the gcc command line somehow, probably by putting that in your Makefile."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1486594656, "post_id": 42125149, "comment_id": 71418502, "body": "Alternative: pass an <code>-I</code> flag to the compiler indicating where to find the headers (i.e. <code>-I&#47;home&#47;moving2&#47;sdk&#47;wxsqlite3&#47;include</code>).  The compiler does not rely on the path to executables (<code>PATH</code>) to find header files."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1486594674, "post_id": 42125149, "comment_id": 71418513, "body": "Actually CodeLite is cmake based, you need to realize how cmake searches for wx"}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1486595686, "creation_date": 1486595686, "answer_id": 42125416, "question_id": 42125149, "link": "https://stackoverflow.com/questions/42125149/include-files-in-linux/42125416#42125416", "title": "include files in Linux", "body": "<p>If you look into <a href=\"https://github.com/eranif/codelite/blob/master/CMakeLists.txt\" rel=\"nofollow noreferrer\">CMakeLists.txt</a> file there is a clue there:</p>\n\n<blockquote>\n  <p>-DWITH_WXPATH=                   // Specify a particular wxWidgets build to use. The format must be /path/to/different_wx-config/directory/</p>\n</blockquote>\n\n<p>so rerun <code>cmake</code> with flags you used before and add <code>-DWITH_WXPATH=/home/moving2/sdk/wxsqlite3</code> then run <code>make</code> again</p>\n"}], "owner": {"reputation": 308, "user_id": 6556913, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1808142782742050/picture?type=large", "display_name": "Kyle Sweet", "link": "https://stackoverflow.com/users/6556913/kyle-sweet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1486597808, "creation_date": 1486594242, "question_id": 42125149, "link": "https://stackoverflow.com/questions/42125149/include-files-in-linux", "title": "include files in Linux", "body": "<p>I'm not good in Linux.  I'm trying to build CodeLite from source.  The directions on CodeLite's web site (<a href=\"http://codelite.org/Developers/Linux\" rel=\"nofollow noreferrer\">here</a>) are insufficient for me to perform the build.  I think I am just lacking knowledge of the build system in Linux. The build step I am at is <code>make -j4</code>.  The error I am currently facing is:</p>\n\n<pre><code>fatal error: wx/wxsqlite3.h No such file or directory\n</code></pre>\n\n<p>I have found that file on my system at </p>\n\n<pre><code>/home/moving2/sdk/wxsqlite3/include/wx/wxsqlite3.h\n</code></pre>\n\n<p>The best guess I have is that the include path needs to be added in my environment?  So I have tried adding this to the <code>PATH</code> string in my <code>environment</code> file located in <code>/etc/</code> but I get the same error.  How do I get the compiler to look there for my include file?</p>\n"}, {"tags": ["python", "c++", "opencv", "cuda"], "comments": [{"owner": {"reputation": 616, "user_id": 7473335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SVqBS.png?s=128&g=1", "display_name": "NAmorim", "link": "https://stackoverflow.com/users/7473335/namorim"}, "edited": false, "score": 0, "creation_date": 1486639977, "post_id": 42125084, "comment_id": 71437356, "body": "As you noticed, OpenCV has their own python bindings to c++ functions. You don&#39;t need pycuda as far as I know. Which version of OpenCV are you using? Accessing OpenCV Cuda functions should be straight forward."}, {"owner": {"reputation": 502, "user_id": 7292122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772c081621d14f7661f444e0ab003694?s=128&d=identicon&r=PG&f=1", "display_name": "ostrumvulpes", "link": "https://stackoverflow.com/users/7292122/ostrumvulpes"}, "reply_to_user": {"reputation": 616, "user_id": 7473335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SVqBS.png?s=128&g=1", "display_name": "NAmorim", "link": "https://stackoverflow.com/users/7473335/namorim"}, "edited": false, "score": 0, "creation_date": 1486678843, "post_id": 42125084, "comment_id": 71462356, "body": "Hey @NAmorim, thanks for commenting! I am using OpenCV 3.2.0-dev. However, when I load the modules available for cv2, I do not see a submodule for CUDA (see updated question). Are functions that have CUDA-accelerated counterparts already substituted in the Python .so?"}, {"owner": {"reputation": 63, "user_id": 627288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b9ead62ef04536a033ca417c129628?s=128&d=identicon&r=PG", "display_name": "nchaumont", "link": "https://stackoverflow.com/users/627288/nchaumont"}, "edited": false, "score": 4, "creation_date": 1553030770, "post_id": 42125084, "comment_id": 97235940, "body": "Starting from OpenCV 4, python bindings to CUDA accelerated code should work. Here is a post about how to achieve it: <a href=\"https://jamesbowley.co.uk/build-opencv-4-0-0-with-cuda-10-0-and-intel-mkl-tbb-in-windows/\" rel=\"nofollow noreferrer\"><b>Accelerating OpenCV 4 \u2013 build with CUDA 10.0, Intel MKL + TBB and python bindings in Windows</b></a>"}], "answers": [{"comments": [{"owner": {"reputation": 502, "user_id": 7292122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772c081621d14f7661f444e0ab003694?s=128&d=identicon&r=PG&f=1", "display_name": "ostrumvulpes", "link": "https://stackoverflow.com/users/7292122/ostrumvulpes"}, "edited": false, "score": 1, "creation_date": 1486759495, "post_id": 42157735, "comment_id": 71501624, "body": "Unfortunately, I cannot find any of these modules which seem like they should be there: <code>&gt;&gt;&gt; cv2.cuda Traceback (most recent call last):   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt; AttributeError: &#39;module&#39; object has no attribute &#39;cuda&#39; &gt;&gt;&gt; cv2.gpu Traceback (most recent call last):   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt; AttributeError: &#39;module&#39; object has no attribute &#39;gpu&#39; &gt;&gt;&gt; cv2.cudaarithm Traceback (most recent call last):   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt; AttributeError: &#39;module&#39; object has no attribute &#39;cudaarithm&#39;</code>"}, {"owner": {"reputation": 616, "user_id": 7473335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SVqBS.png?s=128&g=1", "display_name": "NAmorim", "link": "https://stackoverflow.com/users/7473335/namorim"}, "reply_to_user": {"reputation": 502, "user_id": 7292122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772c081621d14f7661f444e0ab003694?s=128&d=identicon&r=PG&f=1", "display_name": "ostrumvulpes", "link": "https://stackoverflow.com/users/7292122/ostrumvulpes"}, "edited": false, "score": 0, "creation_date": 1486984119, "post_id": 42157735, "comment_id": 71566430, "body": "Did you get the library to work meanwhile? Have you tried to check if the building OpenCV + Cuda was successful? For instance, if in python you run <b>print cv2.getBuildInformation()</b> you should get all the cmake flags that were activated. Theres a line that should be <b>Use Cuda: Yes</b>."}, {"owner": {"reputation": 502, "user_id": 7292122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772c081621d14f7661f444e0ab003694?s=128&d=identicon&r=PG&f=1", "display_name": "ostrumvulpes", "link": "https://stackoverflow.com/users/7292122/ostrumvulpes"}, "edited": false, "score": 4, "creation_date": 1487023667, "post_id": 42157735, "comment_id": 71590211, "body": "Hey @NAmorim, I indeed have <code>Use Cuda: Yes</code> enabled. It seems that Python does not have any bindings to the CUDA-related modules, as the GpuArray types are not exposed to Python in the first place. The solution I&#39;m investigating currently is to use PyCUDA and ctypes to call my own C++ code From Python that calls the OpenCV CUDA functions. I will see if this is a good solution and try to keep this post updated!"}, {"owner": {"reputation": 616, "user_id": 7473335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SVqBS.png?s=128&g=1", "display_name": "NAmorim", "link": "https://stackoverflow.com/users/7473335/namorim"}, "reply_to_user": {"reputation": 502, "user_id": 7292122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772c081621d14f7661f444e0ab003694?s=128&d=identicon&r=PG&f=1", "display_name": "ostrumvulpes", "link": "https://stackoverflow.com/users/7292122/ostrumvulpes"}, "edited": false, "score": 0, "creation_date": 1487068675, "post_id": 42157735, "comment_id": 71607515, "body": "@ostrumvulpes Well that&#39;s new to me. I have used Cuda in c++ and I thought python would have bindings for it too (Good thing the opencv python documentation is nearly inexistent...). Good luck with that!"}], "tags": [], "owner": {"reputation": 616, "user_id": 7473335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SVqBS.png?s=128&g=1", "display_name": "NAmorim", "link": "https://stackoverflow.com/users/7473335/namorim"}, "is_accepted": false, "score": 0, "last_activity_date": 1486724436, "creation_date": 1486724436, "answer_id": 42157735, "question_id": 42125084, "link": "https://stackoverflow.com/questions/42125084/accessing-opencv-cuda-functions-from-python-no-pycuda/42157735#42157735", "title": "Accessing OpenCV CUDA Functions from Python (No PyCUDA)", "body": "<blockquote>\n  <p>Or, are these CUDA-accelerated functions already being used if I call cv2.threshold() in my Python code (rather than the regular, CPU-based implementation)</p>\n</blockquote>\n\n<p>No, you have to explicitly call them from the GPU accelerated module. Calling <strong>cv2.threshold()</strong> will simply run the CPU version.</p>\n\n<p>Since the python API of OpenCV wraps around C++ functions, checking the C++ API usually offers useful hints on where the functions/modules are.</p>\n\n<p>For instance, by <a href=\"http://docs.opencv.org/3.2.0/db/dfa/tutorial_transition_guide.html\" rel=\"nofollow noreferrer\">this</a> transition guide you can see the API changes that were made from OpenCV 2.X to 3.X. Here, the GPU module on OpenCV 3.X can be accessed by <strong>cv2.cuda</strong> and <strong>cv2.gpu</strong> on previous versions. And the cuda module in 3.X is divided into several small pieces:</p>\n\n<blockquote>\n  <ul>\n  <li>cuda - CUDA-accelerated Computer Vision</li>\n  <li>cudaarithm - Operations on Matrices</li>\n  <li>cudabgsegm - Background Segmentation</li>\n  <li>cudacodec - Video Encoding/Decoding</li>\n  <li>cudafeatures2d - Feature Detection and Description</li>\n  <li>cudafilters - Image Filtering</li>\n  <li>cudaimgproc - Image Processing</li>\n  <li>cudalegacy - Legacy support</li>\n  <li>cudaoptflow - Optical Flow</li>\n  <li>cudastereo - Stereo Correspondence</li>\n  <li>cudawarping - Image Warping</li>\n  <li>cudev - Device layer</li>\n  </ul>\n</blockquote>\n\n<p>You should search for these modules within cv2.</p>\n"}, {"comments": [{"owner": {"reputation": 1534, "user_id": 7555390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-tRUwmTBgOVs/AAAAAAAAAAI/AAAAAAAAAJI/01Lb4Msk-QI/photo.jpg?sz=128", "display_name": "Xinyao Wang", "link": "https://stackoverflow.com/users/7555390/xinyao-wang"}, "edited": false, "score": 0, "creation_date": 1503522541, "post_id": 42401559, "comment_id": 78656784, "body": "I am following your description, but when applying cudaWarpPerspectiveWrapper function, I got <code>Segmentation fault (core dumped)</code> error, not sure where I went wrong. When I was compiling cython, I got 2 warnings: <code>cc1plus: warning: command line option \u2018-Wstrict-prototypes\u2019 is valid for C&#47;ObjC but not for C++</code>  <code>warning: #warning &quot;Using deprecated NumPy API, disable it by &quot; &quot;#defining NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION&quot; [-Wcpp]</code> which seem to be fine.  I am using opencv 3.3, python 2.7 and cython 0.26"}, {"owner": {"reputation": 502, "user_id": 7292122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772c081621d14f7661f444e0ab003694?s=128&d=identicon&r=PG&f=1", "display_name": "ostrumvulpes", "link": "https://stackoverflow.com/users/7292122/ostrumvulpes"}, "reply_to_user": {"reputation": 1534, "user_id": 7555390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-tRUwmTBgOVs/AAAAAAAAAAI/AAAAAAAAAJI/01Lb4Msk-QI/photo.jpg?sz=128", "display_name": "Xinyao Wang", "link": "https://stackoverflow.com/users/7555390/xinyao-wang"}, "edited": false, "score": 0, "creation_date": 1503620022, "post_id": 42401559, "comment_id": 78704109, "body": "Hey Xinyao, I think I got those warnings too -- they <i>should</i> be harmless. I think I was using OpenCV 3.2, Python 3.2, and Cython 0.25. It may be a discrepency between the Python versions? Something important you also have to do with numpy is to call numpy.import_array() -- see here: <a href=\"https://docs.scipy.org/doc/numpy-1.10.0/user/c-info.how-to-extend.html#required-subroutine\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy-1.10.0/user/&hellip;</a>. I remember getting frustrating seg faults when forgetting to set that!"}, {"owner": {"reputation": 1534, "user_id": 7555390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-tRUwmTBgOVs/AAAAAAAAAAI/AAAAAAAAAJI/01Lb4Msk-QI/photo.jpg?sz=128", "display_name": "Xinyao Wang", "link": "https://stackoverflow.com/users/7555390/xinyao-wang"}, "edited": false, "score": 0, "creation_date": 1503622854, "post_id": 42401559, "comment_id": 78704727, "body": "Thanks for responding! I tried different python (3.5 and 2.7) and opencv (3.1,3.2,3.3), and still not working. I think it is caused by not calling numpy.import_array() since I have no idea about that before you mentioned. I posted a question here: <a href=\"https://stackoverflow.com/questions/45850197/not-able-to-convert-numpy-array-to-opencv-mat-in-cython-when-trying-to-write-c\">link</a>  It would be greate if you have time to take a look. I found another code on github to walk around converting numpy array to cv mat just now, but it will be wonderful if you could provide some possible solutions."}, {"owner": {"reputation": 1534, "user_id": 7555390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-tRUwmTBgOVs/AAAAAAAAAAI/AAAAAAAAAJI/01Lb4Msk-QI/photo.jpg?sz=128", "display_name": "Xinyao Wang", "link": "https://stackoverflow.com/users/7555390/xinyao-wang"}, "edited": false, "score": 1, "creation_date": 1503623048, "post_id": 42401559, "comment_id": 78704773, "body": "I was not ablt to figure out where to include numpy.import_array(), it seems should not be included in my .py file since numpy has no attribute import_array in python. Just too new to these stuff."}, {"owner": {"reputation": 1534, "user_id": 7555390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-tRUwmTBgOVs/AAAAAAAAAAI/AAAAAAAAAJI/01Lb4Msk-QI/photo.jpg?sz=128", "display_name": "Xinyao Wang", "link": "https://stackoverflow.com/users/7555390/xinyao-wang"}, "edited": false, "score": 4, "creation_date": 1503626900, "post_id": 42401559, "comment_id": 78705562, "body": "Hi, I tried to put  numpy.import_array() in GpuWrapper.pyx and it worked like a charm right now. Thank you for your solution, really appreciated!"}, {"owner": {"reputation": 483, "user_id": 1294414, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b523bf08956065c775ec9817eec930d1?s=128&d=identicon&r=PG", "display_name": "nazikus", "link": "https://stackoverflow.com/users/1294414/nazikus"}, "edited": false, "score": 0, "creation_date": 1530633192, "post_id": 42401559, "comment_id": 89300656, "body": "@ostrumvulpes  many thanks to both of you! this is a great time saver for Cython newbies."}], "tags": [], "owner": {"reputation": 502, "user_id": 7292122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772c081621d14f7661f444e0ab003694?s=128&d=identicon&r=PG&f=1", "display_name": "ostrumvulpes", "link": "https://stackoverflow.com/users/7292122/ostrumvulpes"}, "is_accepted": true, "score": 27, "last_activity_date": 1487795113, "last_edit_date": 1495541837, "creation_date": 1487795113, "answer_id": 42401559, "question_id": 42125084, "link": "https://stackoverflow.com/questions/42125084/accessing-opencv-cuda-functions-from-python-no-pycuda/42401559#42401559", "title": "Accessing OpenCV CUDA Functions from Python (No PyCUDA)", "body": "<p>So as confirmed in the answer and comment thread with @NAmorim, <strong>there are no accessible Python bindings to OpenCV's various CUDA modules</strong>.</p>\n\n<p>I was able to get around this restriction by using <strong>Cython</strong> to gain access to the CUDA functions I needed and implementing the necessary logic to convert my Python objects (mainly NumPy arrays) to OpenCV C/C++ objects and back.</p>\n\n<h1>Working Code</h1>\n\n<p>I first wrote a Cython definition file, <code>GpuWrapper.pxd</code>. The purpose of this file is to reference external C/C++ classes and methods, such as the CUDA methods I am interested in.</p>\n\n<pre><code>from libcpp cimport bool\nfrom cpython.ref cimport PyObject\n\n# References PyObject to OpenCV object conversion code borrowed from OpenCV's own conversion file, cv2.cpp\ncdef extern from 'pyopencv_converter.cpp':\n    cdef PyObject* pyopencv_from(const Mat&amp; m)\n    cdef bool pyopencv_to(PyObject* o, Mat&amp; m)\n\ncdef extern from 'opencv2/imgproc.hpp' namespace 'cv':\n    cdef enum InterpolationFlags:\n        INTER_NEAREST = 0\n    cdef enum ColorConversionCodes:\n        COLOR_BGR2GRAY\n\ncdef extern from 'opencv2/core/core.hpp':\n    cdef int CV_8UC1\n    cdef int CV_32FC1\n\ncdef extern from 'opencv2/core/core.hpp' namespace 'cv':\n    cdef cppclass Size_[T]:\n        Size_() except +\n        Size_(T width, T height) except +\n        T width\n        T height\n    ctypedef Size_[int] Size2i\n    ctypedef Size2i Size\n    cdef cppclass Scalar[T]:\n        Scalar() except +\n        Scalar(T v0) except +\n\ncdef extern from 'opencv2/core/core.hpp' namespace 'cv':\n    cdef cppclass Mat:\n        Mat() except +\n        void create(int, int, int) except +\n        void* data\n        int rows\n        int cols\n\ncdef extern from 'opencv2/core/cuda.hpp' namespace 'cv::cuda':\n    cdef cppclass GpuMat:\n        GpuMat() except +\n        void upload(Mat arr) except +\n        void download(Mat dst) const\n    cdef cppclass Stream:\n        Stream() except +\n\ncdef extern from 'opencv2/cudawarping.hpp' namespace 'cv::cuda':\n    cdef void warpPerspective(GpuMat src, GpuMat dst, Mat M, Size dsize, int flags, int borderMode, Scalar borderValue, Stream&amp; stream)\n    # Function using default values\n    cdef void warpPerspective(GpuMat src, GpuMat dst, Mat M, Size dsize, int flags)\n</code></pre>\n\n<p>We also need the ability to convert Python objects to OpenCV objects. I copied the first couple hundred lines from OpenCV's <code>modules/python/src2/cv2.cpp</code>. You can find that code below in the appendix.</p>\n\n<p>We can finally write our Cython wrapper methods to call OpenCV's CUDA functions! This is part of the Cython implementation file, <code>GpuWrapper.pyx</code>.</p>\n\n<pre><code>import numpy as np  # Import Python functions, attributes, submodules of numpy\ncimport numpy as np  # Import numpy C/C++ API\n\ndef cudaWarpPerspectiveWrapper(np.ndarray[np.uint8_t, ndim=2] _src,\n                               np.ndarray[np.float32_t, ndim=2] _M,\n                               _size_tuple,\n                               int _flags=INTER_NEAREST):\n    # Create GPU/device InputArray for src\n    cdef Mat src_mat\n    cdef GpuMat src_gpu\n    pyopencv_to(&lt;PyObject*&gt; _src, src_mat)\n    src_gpu.upload(src_mat)\n\n    # Create CPU/host InputArray for M\n    cdef Mat M_mat = Mat()\n    pyopencv_to(&lt;PyObject*&gt; _M, M_mat)\n\n    # Create Size object from size tuple\n    # Note that size/shape in Python is handled in row-major-order -- therefore, width is [1] and height is [0]\n    cdef Size size = Size(&lt;int&gt; _size_tuple[1], &lt;int&gt; _size_tuple[0])\n\n    # Create empty GPU/device OutputArray for dst\n    cdef GpuMat dst_gpu = GpuMat()\n    warpPerspective(src_gpu, dst_gpu, M_mat, size, INTER_NEAREST)\n\n    # Get result of dst\n    cdef Mat dst_host\n    dst_gpu.download(dst_host)\n    cdef np.ndarray out = &lt;np.ndarray&gt; pyopencv_from(dst_host)\n    return out\n</code></pre>\n\n<p>After running a setup script to cythonize and compile this code (see apendix), we can import GpuWrapper as a Python module and run <code>cudaWarpPerspectiveWrapper</code>. This allowed me to run the code through CUDA with only a mismatch of 0.34722222222222854% -- quite exciting!</p>\n\n<h1>References (can only post max of 2)</h1>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/22736593/what-is-the-easiest-way-to-convert-ndarray-into-cvmat\">What is the easiest way to convert ndarray into cv::Mat?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12957492/writing-python-bindings-for-c-code-that-use-opencv/12972689#12972689\">Writing Python bindings for C++ code that use OpenCV</a></li>\n</ul>\n\n<h1>Appendix</h1>\n\n<p><code>pyopencv_converter.cpp</code></p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include \"numpy/ndarrayobject.h\"\n#include \"opencv2/core/core.hpp\"\n\nstatic PyObject* opencv_error = 0;\n\n// === FAIL MESSAGE ====================================================================================================\n\nstatic int failmsg(const char *fmt, ...)\n{\n    char str[1000];\n\n    va_list ap;\n    va_start(ap, fmt);\n    vsnprintf(str, sizeof(str), fmt, ap);\n    va_end(ap);\n\n    PyErr_SetString(PyExc_TypeError, str);\n    return 0;\n}\n\nstruct ArgInfo\n{\n    const char * name;\n    bool outputarg;\n    // more fields may be added if necessary\n\n    ArgInfo(const char * name_, bool outputarg_)\n        : name(name_)\n        , outputarg(outputarg_) {}\n\n    // to match with older pyopencv_to function signature\n    operator const char *() const { return name; }\n};\n\n// === THREADING =======================================================================================================\n\nclass PyAllowThreads\n{\npublic:\n    PyAllowThreads() : _state(PyEval_SaveThread()) {}\n    ~PyAllowThreads()\n    {\n        PyEval_RestoreThread(_state);\n    }\nprivate:\n    PyThreadState* _state;\n};\n\nclass PyEnsureGIL\n{\npublic:\n    PyEnsureGIL() : _state(PyGILState_Ensure()) {}\n    ~PyEnsureGIL()\n    {\n        PyGILState_Release(_state);\n    }\nprivate:\n    PyGILState_STATE _state;\n};\n\n// === ERROR HANDLING ==================================================================================================\n\n#define ERRWRAP2(expr) \\\ntry \\\n{ \\\n    PyAllowThreads allowThreads; \\\n    expr; \\\n} \\\ncatch (const cv::Exception &amp;e) \\\n{ \\\n    PyErr_SetString(opencv_error, e.what()); \\\n    return 0; \\\n}\n\n// === USING NAMESPACE CV ==============================================================================================\n\nusing namespace cv;\n\n// === NUMPY ALLOCATOR =================================================================================================\n\nclass NumpyAllocator : public MatAllocator\n{\npublic:\n    NumpyAllocator() { stdAllocator = Mat::getStdAllocator(); }\n    ~NumpyAllocator() {}\n\n    UMatData* allocate(PyObject* o, int dims, const int* sizes, int type, size_t* step) const\n    {\n        UMatData* u = new UMatData(this);\n        u-&gt;data = u-&gt;origdata = (uchar*)PyArray_DATA((PyArrayObject*) o);\n        npy_intp* _strides = PyArray_STRIDES((PyArrayObject*) o);\n        for( int i = 0; i &lt; dims - 1; i++ )\n            step[i] = (size_t)_strides[i];\n        step[dims-1] = CV_ELEM_SIZE(type);\n        u-&gt;size = sizes[0]*step[0];\n        u-&gt;userdata = o;\n        return u;\n    }\n\n    UMatData* allocate(int dims0, const int* sizes, int type, void* data, size_t* step, int flags, UMatUsageFlags usageFlags) const\n    {\n        if( data != 0 )\n        {\n            CV_Error(Error::StsAssert, \"The data should normally be NULL!\");\n            // probably this is safe to do in such extreme case\n            return stdAllocator-&gt;allocate(dims0, sizes, type, data, step, flags, usageFlags);\n        }\n        PyEnsureGIL gil;\n\n        int depth = CV_MAT_DEPTH(type);\n        int cn = CV_MAT_CN(type);\n        const int f = (int)(sizeof(size_t)/8);\n        int typenum = depth == CV_8U ? NPY_UBYTE : depth == CV_8S ? NPY_BYTE :\n                      depth == CV_16U ? NPY_USHORT : depth == CV_16S ? NPY_SHORT :\n                      depth == CV_32S ? NPY_INT : depth == CV_32F ? NPY_FLOAT :\n                      depth == CV_64F ? NPY_DOUBLE : f*NPY_ULONGLONG + (f^1)*NPY_UINT;\n        int i, dims = dims0;\n        cv::AutoBuffer&lt;npy_intp&gt; _sizes(dims + 1);\n        for( i = 0; i &lt; dims; i++ )\n            _sizes[i] = sizes[i];\n        if( cn &gt; 1 )\n            _sizes[dims++] = cn;\n        PyObject* o = PyArray_SimpleNew(dims, _sizes, typenum);\n        if(!o)\n            CV_Error_(Error::StsError, (\"The numpy array of typenum=%d, ndims=%d can not be created\", typenum, dims));\n        return allocate(o, dims0, sizes, type, step);\n    }\n\n    bool allocate(UMatData* u, int accessFlags, UMatUsageFlags usageFlags) const\n    {\n        return stdAllocator-&gt;allocate(u, accessFlags, usageFlags);\n    }\n\n    void deallocate(UMatData* u) const\n    {\n        if(!u)\n            return;\n        PyEnsureGIL gil;\n        CV_Assert(u-&gt;urefcount &gt;= 0);\n        CV_Assert(u-&gt;refcount &gt;= 0);\n        if(u-&gt;refcount == 0)\n        {\n            PyObject* o = (PyObject*)u-&gt;userdata;\n            Py_XDECREF(o);\n            delete u;\n        }\n    }\n\n    const MatAllocator* stdAllocator;\n};\n\n// === ALLOCATOR INITIALIZATION ========================================================================================\n\nNumpyAllocator g_numpyAllocator;\n\n// === CONVERTOR FUNCTIONS =============================================================================================\n\ntemplate&lt;typename T&gt; static\nbool pyopencv_to(PyObject* obj, T&amp; p, const char* name = \"&lt;unknown&gt;\");\n\ntemplate&lt;typename T&gt; static\nPyObject* pyopencv_from(const T&amp; src);\n\nenum { ARG_NONE = 0, ARG_MAT = 1, ARG_SCALAR = 2 };\n\n// special case, when the convertor needs full ArgInfo structure\nstatic bool pyopencv_to(PyObject* o, Mat&amp; m, const ArgInfo info)\n{\n    bool allowND = true;\n    if(!o || o == Py_None)\n    {\n        if( !m.data )\n            m.allocator = &amp;g_numpyAllocator;\n        return true;\n    }\n\n    if( PyInt_Check(o) )\n    {\n        double v[] = {static_cast&lt;double&gt;(PyInt_AsLong((PyObject*)o)), 0., 0., 0.};\n        m = Mat(4, 1, CV_64F, v).clone();\n        return true;\n    }\n    if( PyFloat_Check(o) )\n    {\n        double v[] = {PyFloat_AsDouble((PyObject*)o), 0., 0., 0.};\n        m = Mat(4, 1, CV_64F, v).clone();\n        return true;\n    }\n    if( PyTuple_Check(o) )\n    {\n        int i, sz = (int)PyTuple_Size((PyObject*)o);\n        m = Mat(sz, 1, CV_64F);\n        for( i = 0; i &lt; sz; i++ )\n        {\n            PyObject* oi = PyTuple_GET_ITEM(o, i);\n            if( PyInt_Check(oi) )\n                m.at&lt;double&gt;(i) = (double)PyInt_AsLong(oi);\n            else if( PyFloat_Check(oi) )\n                m.at&lt;double&gt;(i) = (double)PyFloat_AsDouble(oi);\n            else\n            {\n                failmsg(\"%s is not a numerical tuple\", info.name);\n                m.release();\n                return false;\n            }\n        }\n        return true;\n    }\n\n    if( !PyArray_Check(o) )\n    {\n        failmsg(\"%s is not a numpy array, neither a scalar\", info.name);\n        return false;\n    }\n\n    PyArrayObject* oarr = (PyArrayObject*) o;\n\n    bool needcopy = false, needcast = false;\n    int typenum = PyArray_TYPE(oarr), new_typenum = typenum;\n    int type = typenum == NPY_UBYTE ? CV_8U :\n               typenum == NPY_BYTE ? CV_8S :\n               typenum == NPY_USHORT ? CV_16U :\n               typenum == NPY_SHORT ? CV_16S :\n               typenum == NPY_INT ? CV_32S :\n               typenum == NPY_INT32 ? CV_32S :\n               typenum == NPY_FLOAT ? CV_32F :\n               typenum == NPY_DOUBLE ? CV_64F : -1;\n\n    if( type &lt; 0 )\n    {\n        if( typenum == NPY_INT64 || typenum == NPY_UINT64 || typenum == NPY_LONG )\n        {\n            needcopy = needcast = true;\n            new_typenum = NPY_INT;\n            type = CV_32S;\n        }\n        else\n        {\n            failmsg(\"%s data type = %d is not supported\", info.name, typenum);\n            return false;\n        }\n    }\n\n#ifndef CV_MAX_DIM\n    const int CV_MAX_DIM = 32;\n#endif\n\n    int ndims = PyArray_NDIM(oarr);\n    if(ndims &gt;= CV_MAX_DIM)\n    {\n        failmsg(\"%s dimensionality (=%d) is too high\", info.name, ndims);\n        return false;\n    }\n\n    int size[CV_MAX_DIM+1];\n    size_t step[CV_MAX_DIM+1];\n    size_t elemsize = CV_ELEM_SIZE1(type);\n    const npy_intp* _sizes = PyArray_DIMS(oarr);\n    const npy_intp* _strides = PyArray_STRIDES(oarr);\n    bool ismultichannel = ndims == 3 &amp;&amp; _sizes[2] &lt;= CV_CN_MAX;\n\n    for( int i = ndims-1; i &gt;= 0 &amp;&amp; !needcopy; i-- )\n    {\n        // these checks handle cases of\n        //  a) multi-dimensional (ndims &gt; 2) arrays, as well as simpler 1- and 2-dimensional cases\n        //  b) transposed arrays, where _strides[] elements go in non-descending order\n        //  c) flipped arrays, where some of _strides[] elements are negative\n        // the _sizes[i] &gt; 1 is needed to avoid spurious copies when NPY_RELAXED_STRIDES is set\n        if( (i == ndims-1 &amp;&amp; _sizes[i] &gt; 1 &amp;&amp; (size_t)_strides[i] != elemsize) ||\n            (i &lt; ndims-1 &amp;&amp; _sizes[i] &gt; 1 &amp;&amp; _strides[i] &lt; _strides[i+1]) )\n            needcopy = true;\n    }\n\n    if( ismultichannel &amp;&amp; _strides[1] != (npy_intp)elemsize*_sizes[2] )\n        needcopy = true;\n\n    if (needcopy)\n    {\n        if (info.outputarg)\n        {\n            failmsg(\"Layout of the output array %s is incompatible with cv::Mat (step[ndims-1] != elemsize or step[1] != elemsize*nchannels)\", info.name);\n            return false;\n        }\n\n        if( needcast ) {\n            o = PyArray_Cast(oarr, new_typenum);\n            oarr = (PyArrayObject*) o;\n        }\n        else {\n            oarr = PyArray_GETCONTIGUOUS(oarr);\n            o = (PyObject*) oarr;\n        }\n\n        _strides = PyArray_STRIDES(oarr);\n    }\n\n    // Normalize strides in case NPY_RELAXED_STRIDES is set\n    size_t default_step = elemsize;\n    for ( int i = ndims - 1; i &gt;= 0; --i )\n    {\n        size[i] = (int)_sizes[i];\n        if ( size[i] &gt; 1 )\n        {\n            step[i] = (size_t)_strides[i];\n            default_step = step[i] * size[i];\n        }\n        else\n        {\n            step[i] = default_step;\n            default_step *= size[i];\n        }\n    }\n\n    // handle degenerate case\n    if( ndims == 0) {\n        size[ndims] = 1;\n        step[ndims] = elemsize;\n        ndims++;\n    }\n\n    if( ismultichannel )\n    {\n        ndims--;\n        type |= CV_MAKETYPE(0, size[2]);\n    }\n\n    if( ndims &gt; 2 &amp;&amp; !allowND )\n    {\n        failmsg(\"%s has more than 2 dimensions\", info.name);\n        return false;\n    }\n\n    m = Mat(ndims, size, type, PyArray_DATA(oarr), step);\n    m.u = g_numpyAllocator.allocate(o, ndims, size, type, step);\n    m.addref();\n\n    if( !needcopy )\n    {\n        Py_INCREF(o);\n    }\n    m.allocator = &amp;g_numpyAllocator;\n\n    return true;\n}\n\ntemplate&lt;&gt;\nbool pyopencv_to(PyObject* o, Mat&amp; m, const char* name)\n{\n    return pyopencv_to(o, m, ArgInfo(name, 0));\n}\n\ntemplate&lt;&gt;\nPyObject* pyopencv_from(const Mat&amp; m)\n{\n    if( !m.data )\n        Py_RETURN_NONE;\n    Mat temp, *p = (Mat*)&amp;m;\n    if(!p-&gt;u || p-&gt;allocator != &amp;g_numpyAllocator)\n    {\n        temp.allocator = &amp;g_numpyAllocator;\n        ERRWRAP2(m.copyTo(temp));\n        p = &amp;temp;\n    }\n    PyObject* o = (PyObject*)p-&gt;u-&gt;userdata;\n    Py_INCREF(o);\n    return o;\n}\n</code></pre>\n\n<p><code>setupGpuWrapper.py</code></p>\n\n<pre><code>import subprocess\nimport os\nimport numpy as np\nfrom distutils.core import setup, Extension\nfrom Cython.Build import cythonize\nfrom Cython.Distutils import build_ext\n\n\"\"\"\nRun setup with the following command:\n```\npython setupGpuWrapper.py build_ext --inplace\n```\n\"\"\"\n\n# Determine current directory of this setup file to find our module\nCUR_DIR = os.path.dirname(__file__)\n# Use pkg-config to determine library locations and include locations\nopencv_libs_str = subprocess.check_output(\"pkg-config --libs opencv\".split()).decode()\nopencv_incs_str = subprocess.check_output(\"pkg-config --cflags opencv\".split()).decode()\n# Parse into usable format for Extension call\nopencv_libs = [str(lib) for lib in opencv_libs_str.strip().split()]\nopencv_incs = [str(inc) for inc in opencv_incs_str.strip().split()]\n\nextensions = [\n    Extension('GpuWrapper',\n              sources=[os.path.join(CUR_DIR, 'GpuWrapper.pyx')],\n              language='c++',\n              include_dirs=[np.get_include()] + opencv_incs,\n              extra_link_args=opencv_libs)\n]\n\nsetup(\n    cmdclass={'build_ext': build_ext},\n    name=\"GpuWrapper\",\n    ext_modules=cythonize(extensions)\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 536, "user_id": 209306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CrkB9.jpg?s=128&g=1", "display_name": "Neeraj Gulia", "link": "https://stackoverflow.com/users/209306/neeraj-gulia"}, "is_accepted": false, "score": 4, "last_activity_date": 1537502178, "creation_date": 1537502178, "answer_id": 52436378, "question_id": 42125084, "link": "https://stackoverflow.com/questions/42125084/accessing-opencv-cuda-functions-from-python-no-pycuda/52436378#52436378", "title": "Accessing OpenCV CUDA Functions from Python (No PyCUDA)", "body": "<p>I used following way to access OpenCV's C++ CUDA methods in Python:</p>\n\n<ol>\n<li>Create custom opencv_contrib module</li>\n<li>Write C++ code to wrap the OpenCV CUDA method</li>\n<li>Using OpenCV python bindings, expose your custom method</li>\n<li>Build opencv with opencv_contrib </li>\n<li>Run python code to test</li>\n</ol>\n\n<p>I created a small <a href=\"https://github.com/NeerajGulia/python-opencv-cuda\" rel=\"nofollow noreferrer\">github repo</a> to demonstrate the same</p>\n"}, {"comments": [{"owner": {"reputation": 470, "user_id": 5925257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HprkV.jpg?s=128&g=1", "display_name": "Jop Knoppers", "link": "https://stackoverflow.com/users/5925257/jop-knoppers"}, "edited": false, "score": 0, "creation_date": 1598963153, "post_id": 56484909, "comment_id": 112620941, "body": "Since OpenCV 4.4.0 cv::cuda::CascadeClassifier should be back, I however can&#39;t find the python binding. It&#39;s not under cv2.cuda.CascadeClassifier. Any chance someone else found this?"}, {"owner": {"reputation": 470, "user_id": 5925257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HprkV.jpg?s=128&g=1", "display_name": "Jop Knoppers", "link": "https://stackoverflow.com/users/5925257/jop-knoppers"}, "edited": false, "score": 0, "creation_date": 1598963603, "post_id": 56484909, "comment_id": 112621140, "body": "cv2.cuda_CascadeClassifier gives a segmentation fault.."}], "tags": [], "owner": {"reputation": 674, "user_id": 3551604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660b8994e7b681b2ce4cf4da9ab6e0e7?s=128&d=identicon&r=PG", "display_name": "c-x-berger", "link": "https://stackoverflow.com/users/3551604/c-x-berger"}, "is_accepted": false, "score": 5, "last_activity_date": 1560963090, "last_edit_date": 1560963090, "creation_date": 1559854166, "answer_id": 56484909, "question_id": 42125084, "link": "https://stackoverflow.com/questions/42125084/accessing-opencv-cuda-functions-from-python-no-pycuda/56484909#56484909", "title": "Accessing OpenCV CUDA Functions from Python (No PyCUDA)", "body": "<p>I did some testing on this with OpenCV 4.0.0. @nchaumont mentioned that starting with OpenCV 4, there were Python bindings for CUDA included. </p>\n\n<p>As of at least Open CV 4.1.0, possibly earlier, <strong>the default Python bindings include CUDA,</strong> provided that Open CV was built with CUDA support.</p>\n\n<p>Most functionality appears to be exposed as <code>cv2.cuda.thing</code> (for example, <code>cv2.cuda.cvtColor()</code>.)</p>\n\n<p>Currently, they lack any online documentation - for example, the <a href=\"https://docs.opencv.org/master/d0/d43/classcv_1_1cuda_1_1CannyEdgeDetector.html\" rel=\"noreferrer\">GPU Canny edge detector</a> makes no mention of Python. You can use the <code>help</code> function at Python's REPL to see the C++ docs though, which should be mostly equivalent.</p>\n"}], "owner": {"reputation": 502, "user_id": 7292122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772c081621d14f7661f444e0ab003694?s=128&d=identicon&r=PG&f=1", "display_name": "ostrumvulpes", "link": "https://stackoverflow.com/users/7292122/ostrumvulpes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22206, "favorite_count": 13, "accepted_answer_id": 42401559, "answer_count": 4, "score": 13, "last_activity_date": 1565535838, "creation_date": 1486593939, "last_edit_date": 1559859323, "question_id": 42125084, "link": "https://stackoverflow.com/questions/42125084/accessing-opencv-cuda-functions-from-python-no-pycuda", "title": "Accessing OpenCV CUDA Functions from Python (No PyCUDA)", "body": "<p>I am writing a Python application that uses OpenCV's Python bindings to do marker detection and other image processing. I would like to use OpenCV's CUDA modules to CUDA-accelerate certain parts of my application, and noticed in their <code>.hpp</code> files that they seem to be using the OpenCV export macros for Python and Java. However, I do not seem to be able to access those CUDA functions, even though I am building OpenCV <code>WITH_CUDA=ON</code>.</p>\n\n<p>Is it necessary to use a wrapper such as PyCUDA in order to access the GPU functions, such as threshold in cudaarithm? Or, are these CUDA-accelerated functions already being used if I call <strong>cv2.threshold()</strong> in my Python code (rather than the regular, CPU-based implementation)?</p>\n\n<pre><code>CV_EXPORTS double threshold(InputArray src, OutputArray dst, double thresh, double maxval, int type, Stream&amp; stream = Stream::Null());\n</code></pre>\n\n<p>The submodules I see for <code>cv2</code> are the following:</p>\n\n<ul>\n<li>Error</li>\n<li>aruco</li>\n<li>detail</li>\n<li>fisheye</li>\n<li>flann</li>\n<li>instr</li>\n<li>ml</li>\n<li>ocl</li>\n<li>ogl</li>\n<li>videostab</li>\n</ul>\n\n<p><code>cv2.cuda</code>, <code>cv2.gpu</code>, and <code>cv2.cudaarithm</code> all return with an <code>AttributeError</code>.</p>\n\n<p>The CMake instruction I am running to build OpenCV is as follows:</p>\n\n<pre><code>cmake -DOPENCV_EXTRA_MODULES_PATH=/usr/local/lib/opencv_contrib/modules/ \\\n    -D WITH_CUDA=ON -D CUDA_FAST_MATH=1 \\\n    -D ENABLE_PRECOMPILED_HEADERS=OFF \\\n    -D BUILD_TESTS=OFF -D BUILD_PERF_TESTS=OFF -D BUILD_EXAMPLES=OFF \\\n    -D BUILD_opencv_java=OFF \\\n    -DBUILD_opencv_bgsegm=OFF -DBUILD_opencv_bioinspired=OFF -DBUILD_opencv_ccalib=OFF -DBUILD_opencv_cnn_3dobj=OFF -DBUILD_opencv_contrib_world=OFF -DBUILD_opencv_cvv=OFF -DBUILD_opencv_datasets=OFF -DBUILD_openc\nv_dnn=OFF -DBUILD_opencv_dnns_easily_fooled=OFF -DBUILD_opencv_dpm=OFF -DBUILD_opencv_face=OFF -DBUILD_opencv_fuzzy=OFF -DBUILD_opencv_hdf=OFF -DBUILD_opencv_line_descriptor=OFF -DBUILD_opencv_matlab=OFF -DBUILD_o\npencv_optflow=OFF -DBUILD_opencv_plot=OFF -DBUILD_opencv_README.md=OFF -DBUILD_opencv_reg=OFF -DBUILD_opencv_rgbd=OFF -DBUILD_opencv_saliency=OFF -DBUILD_opencv_sfm=OFF -DBUILD_opencv_stereo=OFF -DBUILD_opencv_str\nuctured_light=OFF -DBUILD_opencv_surface_matching=OFF -DBUILD_opencv_text=OFF -DBUILD_opencv_tracking=OFF -DBUILD_opencv_viz=OFF -DBUILD_opencv_xfeatures2d=OFF -DBUILD_opencv_ximgproc=OFF -DBUILD_opencv_xobjdetect\n=OFF -DBUILD_opencv_xphoto=OFF ..\n</code></pre>\n"}, {"tags": ["c++", "qt", "translation", "qstring", "qtranslator"], "comments": [{"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 2, "creation_date": 1486594709, "post_id": 42125081, "comment_id": 71418531, "body": "What you&#39;re printing isn&#39;t the same variable where you stored the translated string. You stored the translation into &quot;msg&quot; but printed &quot;l_sMsg&quot;, which isn&#39;t defined anywhere that we can see and have no idea what it might be set to. If it&#39;s a typo, please fix the question and then we can look at it again."}, {"owner": {"reputation": 866, "user_id": 2031793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb2031e04b7d30ae007366333af2cce?s=128&d=identicon&r=PG", "display_name": "toussa", "link": "https://stackoverflow.com/users/2031793/toussa"}, "reply_to_user": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 0, "creation_date": 1486596511, "post_id": 42125081, "comment_id": 71419192, "body": "Ah sorry, it was a typo... Thanks to look at it"}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 0, "creation_date": 1486598134, "post_id": 42125081, "comment_id": 71419772, "body": "Does the <code>ConfigurationTabUI</code> class have the <code>Q_OBJECT</code> macro? What happens when you use <code>QObject::tr</code> instead of <code>ConfigurationTabUI::tr</code>?"}, {"owner": {"reputation": 866, "user_id": 2031793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb2031e04b7d30ae007366333af2cce?s=128&d=identicon&r=PG", "display_name": "toussa", "link": "https://stackoverflow.com/users/2031793/toussa"}, "edited": false, "score": 0, "creation_date": 1486598761, "post_id": 42125081, "comment_id": 71419999, "body": "Yes it has the correct macro (the code in the above example is in a slot). Using QObject::tr doesn&#39;t change a thing (except the context of the string in Qt linguist) :("}, {"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 0, "creation_date": 1486598801, "post_id": 42125081, "comment_id": 71420011, "body": "The Q_OBJECT macro isn&#39;t involved in this. QObject::tr is a static method, so if it compiles, it&#39;s fine. It implies that ConfigurationTabUI is derived from QObject, which is all that&#39;s necessary."}, {"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 0, "creation_date": 1486598987, "post_id": 42125081, "comment_id": 71420078, "body": "Just to confirm: you&#39;ve used lupdate to extract the string from your source code, added the translation to the .ts file, and then compiled the .ts to .qm with lrelease? And made sure that the resulting .qm file is in the correct location to be loaded (which should be the &quot;current directory&quot;, whatever that happens to be?"}, {"owner": {"reputation": 866, "user_id": 2031793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb2031e04b7d30ae007366333af2cce?s=128&d=identicon&r=PG", "display_name": "toussa", "link": "https://stackoverflow.com/users/2031793/toussa"}, "edited": false, "score": 0, "creation_date": 1486599157, "post_id": 42125081, "comment_id": 71420127, "body": "Yes I confirm I did all those steps. And I checked that the qm file is loaded correctly. And by the way, all my UI widgets are translated correctly. I also tried to translate a QString in the InterfaceWidget object and it worked... So it looks like it might be something with translation in ConfigurationTabUI"}], "answers": [{"comments": [{"owner": {"reputation": 5978, "user_id": 231717, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/90bd57ca46c78c121d8da926463f7474?s=128&d=identicon&r=PG", "display_name": "smerlin", "link": "https://stackoverflow.com/users/231717/smerlin"}, "edited": false, "score": 0, "creation_date": 1486719011, "post_id": 42155221, "comment_id": 71477214, "body": "I think it would be safer to create the translator as a child of your <code>QApplication</code>. I would probably do that directly in the <code>main.cpp</code> after constructing the <code>QApplication</code> object."}, {"owner": {"reputation": 866, "user_id": 2031793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb2031e04b7d30ae007366333af2cce?s=128&d=identicon&r=PG", "display_name": "toussa", "link": "https://stackoverflow.com/users/2031793/toussa"}, "reply_to_user": {"reputation": 5978, "user_id": 231717, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/90bd57ca46c78c121d8da926463f7474?s=128&d=identicon&r=PG", "display_name": "smerlin", "link": "https://stackoverflow.com/users/231717/smerlin"}, "edited": false, "score": 0, "creation_date": 1486719386, "post_id": 42155221, "comment_id": 71477426, "body": "I don&#39;t have access to main.cpp because my code is a framework plugin. InterfaceWidget class is the &quot;main&quot; class of my plugin. Would still <code>QTranslator* myappTranslator = new QTranslator(QApplication::instance());</code> be better ? In which case ?"}, {"owner": {"reputation": 5978, "user_id": 231717, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/90bd57ca46c78c121d8da926463f7474?s=128&d=identicon&r=PG", "display_name": "smerlin", "link": "https://stackoverflow.com/users/231717/smerlin"}, "edited": false, "score": 0, "creation_date": 1486725410, "post_id": 42155221, "comment_id": 71481270, "body": "The QApplication references the translator object thus you need to make sure that the lifetime of the QTranslator object does not end before the QApplication object gets destroyed. In Qt you do that by making the QTranslator a child of QApplication."}], "tags": [], "owner": {"reputation": 866, "user_id": 2031793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb2031e04b7d30ae007366333af2cce?s=128&d=identicon&r=PG", "display_name": "toussa", "link": "https://stackoverflow.com/users/2031793/toussa"}, "is_accepted": true, "score": 1, "last_activity_date": 1486725777, "last_edit_date": 1486725777, "creation_date": 1486717095, "answer_id": 42155221, "question_id": 42125081, "link": "https://stackoverflow.com/questions/42125081/why-my-c-qt-ui-got-translated-but-not-my-qstrings-in-my-program/42155221#42155221", "title": "Why my C++ Qt UI got translated but not my QStrings in my program?", "body": "<p>Ok, I found the problem, it's just a dumb oversight:</p>\n\n<p>QTranslator is created on the stack and not dynamically (on the heap), so the object is destroyed at the end of the method.\nAs a result, it translates the UI because the object is still there but later, when a slot is called, nothing get translated.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>//in the InterfaceWidget constructor:\nQTranslator* myappTranslator = new QTranslator(QApplication::instance());\nbool loaded = myappTranslator-&gt;load(\"myApp_\" + QLocale::system().name());\nqDebug()  &lt;&lt; \"Is translation file loaded?\" &lt;&lt; loaded; // RETURNS TRUE\nQApplication::installTranslator(myappTranslator);\nui.setupUi(this);\n</code></pre>\n\n<p>and in ConfigurationTabUI (which inherits from QWidget):</p>\n\n<pre><code>void ConfigurationTabUI::changeEvent(QEvent *e)\n{\n    if (e-&gt;type() == QEvent::LanguageChange) {\n        ui.retranslateUi(this);\n        reset(); //my method to reload some data in UI\n    } else\n        QWidget::changeEvent(e);\n}\n</code></pre>\n"}], "owner": {"reputation": 866, "user_id": 2031793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb2031e04b7d30ae007366333af2cce?s=128&d=identicon&r=PG", "display_name": "toussa", "link": "https://stackoverflow.com/users/2031793/toussa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 999, "favorite_count": 0, "accepted_answer_id": 42155221, "answer_count": 1, "score": 1, "last_activity_date": 1486725777, "creation_date": 1486593917, "last_edit_date": 1486600675, "question_id": 42125081, "link": "https://stackoverflow.com/questions/42125081/why-my-c-qt-ui-got-translated-but-not-my-qstrings-in-my-program", "title": "Why my C++ Qt UI got translated but not my QStrings in my program?", "body": "<p>I needed to translate my english UI in french, so I did all the necessary with .ts and .qm files, load it in the QTranslator class, and install it to the QApplication:</p>\n\n<pre><code>//in the InterfaceWidget constructor:\nQTranslator myappTranslator;\nbool loaded = myappTranslator.load(\"myApp_\" + QLocale::system().name());\nqDebug()  &lt;&lt; \"Is translation file loaded?\" &lt;&lt; loaded; // RETURNS TRUE\nQApplication::installTranslator(&amp;myappTranslator);\nui.setupUi(this);\nui.retranslateUi(this); //works, it translates the UI\n</code></pre>\n\n<p><strong>Later</strong>, I create and attach to the InterfaceWidget another Widget (in a tab) called ConfigurationTabUI :</p>\n\n<pre><code>m_ConfigurationTabUI = new ConfigurationTabUI(ui.configTab);\n</code></pre>\n\n<p>The corresponding UI is also translated to french, correctly.</p>\n\n<p><strong>And here is my problem: in the ConfigurationTabUI's methods, it doesn't work when I try to translate a simple QString:</strong></p>\n\n<pre><code>void ConfigurationTabUI::on_ValidButton_clicked(){\n\n    QString msg(ConfigurationTabUI::tr(\"message to translate\"));\n    qDebug() &lt;&lt; \"translated string: \" &lt;&lt; msg; // NOT TRANSLATED\n}\n</code></pre>\n\n<p>I really have no clue why...\nThanks for your help.</p>\n\n<p>Note: I Use Qt5.2 and I double checked that the .ts file contains the right translated string.</p>\n"}, {"tags": ["c++", "c++11", "visual-c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1486596971, "post_id": 42125079, "comment_id": 71419338, "body": "rather than <code>string model1</code>, <code>string model2</code>, etc... consider using an array: <code>string model[4];</code>"}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": -1, "last_activity_date": 1486595857, "creation_date": 1486595857, "answer_id": 42125444, "question_id": 42125079, "link": "https://stackoverflow.com/questions/42125079/how-to-fix-output-issue/42125444#42125444", "title": "how to fix output issue?", "body": "<p>The first four call to <code>get_vehicle_price()</code> are unusefull: you ask for a value that is lost. You can delete/comment they</p>\n\n<pre><code> //get_vehicle_price(car);\n //get_vehicle_price(car2);\n //get_vehicle_price(car3);\n //get_vehicle_price(car4);\n</code></pre>\n\n<p>and maintain only the following usefull four calls </p>\n\n<pre><code> float price1 = get_vehicle_price(car);\n float price2 = get_vehicle_price(car2);\n float price3 = get_vehicle_price(car3);\n float price4 = get_vehicle_price(car4);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7148067, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/1283306831731336/picture?type=large", "display_name": "Richard Okpala", "link": "https://stackoverflow.com/users/7148067/richard-okpala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1486595947, "creation_date": 1486593911, "last_edit_date": 1486595947, "question_id": 42125079, "link": "https://stackoverflow.com/questions/42125079/how-to-fix-output-issue", "title": "how to fix output issue?", "body": "<p>So Basically my Code output is to prompt the user for the price of each car\nand then save the input and do calucaltions using the following four functions in the code below. and then output the following for each car in the <code>display_total_Car_cost()</code> function for each car at the same time.</p>\n\n<p>my problem is that my code prompts the user twice for each each price and then displays the following output for the all cars at the same time how i change my code so that it prompts the user for each car price once and then outputs the last functonion <code>display_total_car_cost()</code> for each car on a different line.\nbelow is my code and i commented out the output so that you will see kind a visual of what my code is outputting.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n#include &lt;iomanip&gt;\nfloat get_vehicle_price(string);\nfloat calculate_other_costs(float);\nfloat calculate_registration_fee(float);\nvoid display_total_car_cost(string, float, float);\n int main() {\n     ifstream myfile;\n     string car;\n     string car2;\n     string car3;\n     string car4;\n     myfile.open(\"infile.txt\");\n     getline(myfile, car);\n     getline(myfile, car2);\n     getline(myfile, car3);\n     getline(myfile, car4);\n     get_vehicle_price(car);\n     get_vehicle_price(car2);\n     get_vehicle_price(car3);\n     get_vehicle_price(car4);\n     float price1 = get_vehicle_price(car);\n     float price2 = get_vehicle_price(car2);\n     float price3 = get_vehicle_price(car3);\n     float price4 = get_vehicle_price(car4);\n     float other_costs1 = calculate_other_costs(price1);\n     float other_costs2 = calculate_other_costs(price2);\n     float other_costs3 = calculate_other_costs(price3);\n     float other_costs4 = calculate_other_costs(price4);\n     string model1 = car;\n     string model2 = car2;\n     string model3 = car3;\n     string model4 = car4;\n     display_total_car_cost(model1, price1, other_costs1);\n     display_total_car_cost(model2, price2, other_costs2);\n     display_total_car_cost(model3, price3, other_costs3);\n     display_total_car_cost(model3, price4, other_costs4);\n     return 0;\n}\nfloat get_vehicle_price(string carname) {\n    float carprice;\n    cout &lt;&lt; \"Enter the price of the :\" &lt;&lt; carname;\n    cin &gt;&gt; carprice;\n    return carprice;\n}\nfloat calculate_other_costs(float price) {\n    float salestax = price *0.06;\n    float other_costs = salestax + calculate_registration_fee(price);\n    return other_costs;\n}\nfloat calculate_registration_fee(float price) {\n    const int administrative_fee = 240;\n    const int cost_of_tags = 120;\n    float registration_fee = (price *0.10) + administrative_fee + cost_of_tags;\n    return registration_fee;\n}\nvoid display_total_car_cost(string models, float price, float other_cost){\n    float totalcost = price + other_cost;\n    cout &lt;&lt; fixed &lt;&lt; showpoint &lt;&lt; models &lt;&lt; setw(2) &lt;&lt; setprecision(2) &lt;&lt; price &lt;&lt; setw(3) &lt;&lt; setprecision(4) &lt;&lt; other_cost &lt;&lt; setw(4) &lt;&lt; setprecision(2) &lt;&lt; totalcost;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake", "clang", "pgo"], "comments": [{"owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "edited": false, "score": 0, "creation_date": 1486652088, "post_id": 42125009, "comment_id": 71445870, "body": "Can you please add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? Some CMake code would help to suggest something."}, {"owner": {"reputation": 950, "user_id": 3945377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3179e3e91f86a74d223264a25fef417e?s=128&d=identicon&r=PG", "display_name": "Pauli Nieminen", "link": "https://stackoverflow.com/users/3945377/pauli-nieminen"}, "reply_to_user": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "edited": false, "score": 0, "creation_date": 1591149876, "post_id": 42125009, "comment_id": 109943666, "body": "@Florian, It is hard to add example code because cmake simple doesn&#39;t seem to have any sane way to do this in a single project. I&#39;m trying to solve exact same issue and simplest solution feels like using generator expression in OBJECT_DEPENDS (not supported). I don&#39;t think one can use $&lt;TARGET_OBJECTS:tgt&gt; for add_dependencies which seems to be only sane way to access object list. Potential other solution a) double project system where main user invoked project forwards settings to second pgo project compiling same settings again. b) Just replace build based system with shell script."}], "owner": {"reputation": 1072, "user_id": 387887, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/2b2bb0f864d2fed660f8e2c6b0c4c74d?s=128&d=identicon&r=PG", "display_name": "Christian Convey", "link": "https://stackoverflow.com/users/387887/christian-convey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 677, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1486593590, "creation_date": 1486593590, "last_edit_date": 1495541345, "question_id": 42125009, "link": "https://stackoverflow.com/questions/42125009/how-express-pgo-dependencies-in-cmake-3-7", "title": "How express PGO dependencies in CMake 3.7?", "body": "<p>I have a C++ program that I'm building with Clang 3.9's profile-guided optimization feature.  Here's what's supposed to happen:</p>\n\n<ol>\n<li>I build the program with instrumentation enabled.</li>\n<li>I run that program, creating a file with profile-data: <code>prof.raw</code>.</li>\n<li>I use <code>llvm-profdata</code> to convert <code>prof.raw</code> to a new file, <code>prof.data</code>.</li>\n<li>I create a new build of that same program, with a few changes:\n\n<ul>\n<li>When compiling each .cpp file to a .o file, I use the compiler flag <code>-fprofile-use=prof.data</code>.</li>\n<li>When linking the executable, I also specify <code>-fprofile-use</code>.</li>\n</ul></li>\n</ol>\n\n<p>I have a Gnu Makefile for this, and it works great.  My problem arises now that I'm trying to port that Makefile to CMake (3.7, but I could upgrade ).  I need the solution to work with (at least) the Unix Makefiles generator, but ideally it would work for all generators.</p>\n\n<p>In CMake, I've defined two executable targets: <code>foo-gen</code> and <code>foo-use</code>:</p>\n\n<ul>\n<li>When <code>foo-gen</code> is executed, it creates the <code>prof.raw</code> file.</li>\n<li>I use <code>add_custom_command</code> to create a rule to create <code>prof.data</code> from <code>prof.raw</code>.</li>\n</ul>\n\n<p><strong>My problem</strong> is that I can't figure out how to tell CMake that each of the object files depended upon by <code>foo-use</code> has a dependency on the file <code>prof.data</code>.</p>\n\n<ul>\n<li><p>The most-promising idea I had was to (1) find a way to enumerate all of the <code>.o</code> files upon which <code>foo-use</code> depenends, and then (2) iterate over each of those <code>.o</code> files, calling <a href=\"https://cmake.org/cmake/help/v3.7/command/add_dependencies.html\" rel=\"nofollow noreferrer\"><code>add_dependency</code></a> for each one.</p>\n\n<p>The problem with this approach is I can't find an idiomatic way, in my CMakeLists.txt file, to enumerate the list of object files upon which an executable depends.  This might <a href=\"https://stackoverflow.com/questions/29884856/how-to-get-path-to-object-files-with-cmake-for-both-multiconfiguration-generator\">be an open problem with CMake</a>.</p></li>\n<li><p>I also considered using <a href=\"https://cmake.org/cmake/help/v3.7/command/set_source_files_properties.html\" rel=\"nofollow noreferrer\"><code>set_source_files_properties</code></a> to set the <a href=\"https://cmake.org/cmake/help/v3.7/prop_sf/OBJECT_DEPENDS.html\" rel=\"nofollow noreferrer\"><code>OBJECT_DEPENDS</code></a> property on each of my <code>.cpp</code> files used by <code>foo-use</code>, adding <code>prof.data</code> to that property's list.</p>\n\n<p>The problem with this (AFAICT) is that each of my <code>.cpp</code> files is used to create two different <code>.o</code> files: one for <code>foo-gen</code> and one for <code>foo-use</code>.  I want the <code>.o</code> files that get linked into <code>foo-use</code> to have this compile-time dependency on <code>prof.data</code>; but the <code>.o</code> files that get linked into <code>foo-gen</code> must <em>not</em> have a compile-time dependency on <code>prof.data</code>.  </p>\n\n<p>And AFAIK, <code>set_source_files_properties</code> doesn't let me set the <code>OBJECT_DEPENDS</code> property to have one of two values, contingent on whether <code>foo-gen</code> or <code>foo-use</code> is the current target of interest.</p></li>\n</ul>\n\n<p>Any suggestions for a clean(ish) way to make this work?</p>\n"}, {"tags": ["c++", "visual-studio", "nan"], "comments": [{"owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "edited": false, "score": 0, "creation_date": 1486593530, "post_id": 42124947, "comment_id": 71418008, "body": "-Nan, why vote down?"}, {"owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "edited": false, "score": 0, "creation_date": 1486593799, "post_id": 42124947, "comment_id": 71418120, "body": "I am sorry but if you are not clear, can you wait someone knows about it to answer?"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 1, "creation_date": 1486593951, "post_id": 42124947, "comment_id": 71418189, "body": "There&#39;s no such thing as -NaN. It&#39;s the same thing as NaN. Unless, of course, you have <code>-ffast-math</code> enabled; then all sorts of things get thrown out. Trying to do mathematical things on something that is quite literally <b>N</b>ot <b>a</b> <b>N</b>umber won&#39;t get you expected results."}, {"owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1486594132, "post_id": 42124947, "comment_id": 71418262, "body": "I am not sure how this value comes, it&#39;s from external library method, and in visual studio debug it shows as -1.#IND000000000000.  1.#IND000000000000 is Nan, then that one must be -Nan.  I am not using -ffast-math option, but not sure if the library enabled it."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 2, "creation_date": 1486594421, "post_id": 42124947, "comment_id": 71418382, "body": "No, it&#39;s not -NaN. It&#39;s just NaN. There are several representations, some of which may happen to look like the negative version of another, but they&#39;re all identical under IEEE standards and treated the same way by math libraries -- that is, unpredictably and weirdly."}, {"owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1486594758, "post_id": 42124947, "comment_id": 71418552, "body": "It&#39;s still confusing.  The NaN value in VS is 0x7ff8000000000000, who highest bit is unset for positive value.  0xfff800000000000 is a negative value for sure."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1486594818, "post_id": 42124947, "comment_id": 71418580, "body": "&quot;IND&quot; is just how Visual Studio displays NaN. 0xfff800000000000 is NOT a negative value; NaN is neither positive nor negative. There are many bit patterns which are NaN, and some of them have a 1 in the sign bit. That does NOT indicate that they are in any way negative."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1486594840, "post_id": 42124947, "comment_id": 71418594, "body": "Again, there are multiple representations of NaN. They&#39;re all identical, in terms of what they do and how they&#39;re treated; the fact that some bits are different is irrelevant."}, {"owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "edited": false, "score": 0, "creation_date": 1486595439, "post_id": 42124947, "comment_id": 71418829, "body": "I can accept this explanation.  But this disobey math ruler somehow, fabs(x) &gt;= 0 is false in this case.  I have to check is not Nan, then use fabs, otherwise all following calculations are wrong."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1486595552, "post_id": 42124947, "comment_id": 71418869, "body": "@TigerHwang No, it&#39;s perfectly compliant with the relevant standards. Note that <code>fabs(x) &gt;= 0</code> is false, but <code>fabs(x) &lt;= 0</code> is <i>also</i> false. That&#39;s what happens when you operate on NaN: you get NaN results. It&#39;s definitely a good idea to check for NaNs when you think they might be produced, though it&#39;s much better to not produce them in the first place."}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 0, "creation_date": 1486595629, "post_id": 42124947, "comment_id": 71418901, "body": "The cppreference page you linked says what happens if the argument is NaN"}, {"owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "edited": false, "score": 0, "creation_date": 1486596580, "post_id": 42124947, "comment_id": 71419220, "body": "I debug into fabs() disassembly, it silently set errno to 33, which means EDOM: Domain error.  This is the first time I know that such function has a limitation in input value."}], "answers": [{"tags": [], "owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "is_accepted": true, "score": 0, "last_activity_date": 1486638783, "creation_date": 1486638783, "answer_id": 42135163, "question_id": 42124947, "link": "https://stackoverflow.com/questions/42124947/fabs-1-ind000000000000-return-1-ind000000000000/42135163#42135163", "title": "fabs(-1.#IND000000000000) return -1.#IND000000000000?", "body": "<p>After some more searching in internet, I get these conclusion:</p>\n\n<p>IEEE-754 defined NAN, the high bit can be signed or unsigned.  It does not define -NAN.</p>\n\n<p>Microsoft defined both NAN and -NAN. </p>\n\n<p>By cppreference.com, fabs function:  If the argument is NaN, NaN is returned.</p>\n\n<p>By MSDN, fabs returns the absolute value of its argument. There is no error return.  But when input is \u00b1QNAN or IND, Matherr Exception is set to _DOMAIN.</p>\n\n<p>Thank you all, @QPaysTaxes, @Sneftel, @Cubbi.</p>\n\n<p>The guy who post some comment and downvote then delete the comment, you behaviour like treating anything you do not understand as bad, and treating youself as know-all.</p>\n"}], "owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "accepted_answer_id": 42135163, "answer_count": 1, "score": -3, "last_activity_date": 1486638783, "creation_date": 1486593365, "last_edit_date": 1486594483, "question_id": 42124947, "link": "https://stackoverflow.com/questions/42124947/fabs-1-ind000000000000-return-1-ind000000000000", "title": "fabs(-1.#IND000000000000) return -1.#IND000000000000?", "body": "<p>EDIT: to reproduce it, use this piece of code.</p>\n\n<pre><code>union\n{\n    double d;\n    size_t s;\n} d;\n\nd.s = 0xfff8000000000000;\nd.d = fabs(d.d);\nstd::cout &lt;&lt; d.d &lt;&lt; std::endl;\n</code></pre>\n\n<p>the output is </p>\n\n<pre><code>-1.#IND\n</code></pre>\n\n<p>EDIT:  I do not agree this duplicated the other question, sqrt and abs are absolute different functions.  When you send an negative value to sqrt, it may give you -Nan, but for abs, it should give you Nan.</p>\n\n<p>I am using VS2013.  A calculation function return -1.#IND000000000000 (hex 0xfff8000000000000)\n, which should mean -Nan in Visual studio and I use fabs() to get it's abs value, it still give me -1.#IND000000000000. I try use std::abs and get same result.</p>\n\n<pre><code>double x = some_function(...); // return -1.#IND000000000000\nx = fabs(x);\n// or\nx = std::abs(x);\n</code></pre>\n\n<p>In <a href=\"http://en.cppreference.com/w/cpp/numeric/math/fabs\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/numeric/math/fabs</a> it only mentioned fabs(-INF)=INF, nothing about NAN or IND.  Is this a undefined behavior, or a bug in visual studio 2013? </p>\n"}, {"tags": ["c++", "function", "recursion"], "comments": [{"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1486593256, "post_id": 42124867, "comment_id": 71417904, "body": "I suppose you know this but, this is a proper example for the silliest competition. I&#39;m giving a close vote based on the silliness."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1486593348, "post_id": 42124867, "comment_id": 71417945, "body": "@Alycia  It is totally unclear what you are trying to do with the function."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1486596737, "post_id": 42124867, "comment_id": 71419274, "body": "<code>int length = int(countChars);</code> what?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1486596870, "post_id": 42124867, "comment_id": 71419310, "body": "you init <code>length</code> in the (imho) most funny way, then you read in some string from the user, pretend that <code>lenght</code> is the lenght of that string and finally you pretend that it is the nuber of occurences of a letter without ever setting it to a meaningful value. That is a real multi-purpose variable"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2176127"}, "edited": false, "score": 0, "creation_date": 1486603217, "post_id": 42125116, "comment_id": 71421188, "body": "The op is obviously new to C++ or even programming in general and it&#39;s not very helpful to post a complex solution like that. You can&#39;t jst use ternary operators and list initialization without a comment and expect a beginner to know what&#39;s going on here."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1486594573, "last_edit_date": 1486594573, "creation_date": 1486594074, "answer_id": 42125116, "question_id": 42124867, "link": "https://stackoverflow.com/questions/42124867/how-to-initialize-the-recursive-function-for-length/42125116#42125116", "title": "how to initialize the recursive function for length", "body": "<p>It seems the function should count the number of appearances of a letter in a string. If so then it is declared and defined incorrectly. It has to have at least two parameters an object of type <code>std::string</code> and an object of type <code>char</code>.</p>\n\n<p>Here is shown how such a recursive function can look</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nsize_t countChars( const std::string &amp;s, char c )\n{\n    return s.empty() ? 0 : ( s[0] == c ) + countChars( { s, 1 }, c );\n}\n\nint main() \n{\n    std::cout &lt;&lt; \"Enter a sentence \";\n\n    std::string s;\n\n    std::getline( std::cin, s );\n\n    std::cout &lt;&lt; \"Which letter would you like to find the number of appearances: \";\n\n    char c = '\\0';\n\n    std::cin &gt;&gt; c;\n\n\n    std::cout &lt;&lt; \"The letter \" &lt;&lt; c \n              &lt;&lt; \" appears \" &lt;&lt; countChars( s, c ) \n              &lt;&lt; \" times \" &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output might look like</p>\n\n<pre><code>Enter a sentence My name is Alycia\nWhich letter would you like to find the number of appearances: a\nThe letter a appears 2 times \n</code></pre>\n\n<p>If you mean a function that just calculates the length of a string then it can look like</p>\n\n<pre><code>size_t countChars( const std::string &amp;s )\n{\n    return s.empty() ? 0 : 1 + countChars( { s, 1 } );\n}\n</code></pre>\n\n<p>and shall be called after the statement</p>\n\n<pre><code>getline(cin, str);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7509180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jGkMt.jpg?s=128&g=1", "display_name": "Alycia", "link": "https://stackoverflow.com/users/7509180/alycia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1486603669, "creation_date": 1486593067, "last_edit_date": 1486603669, "question_id": 42124867, "link": "https://stackoverflow.com/questions/42124867/how-to-initialize-the-recursive-function-for-length", "title": "how to initialize the recursive function for length", "body": "<pre><code>int countChars(string str)\n{\n    int count = 0;\n    if (str == \"\")\n        return count;\n    else\n    {\n        count++;// add a character to the count\n        return count + countChars(str.substr(1));// function calls itself\n    }\n}\n</code></pre>\n\n<p>I need to take the above function and call in in the program below and I'm not sure how to initialize it properly. Below is what I tried and it doesn't work. I'm not allowed to use the <code>.length()</code> because otherwise the program would be done.</p>\n\n<pre><code>int main()\n{\n    char find = '\\0';\n    string str;\n    int count = 0;\n    int length = int(countChars);\n\n    //ask the user for a sentence \n    cout &lt;&lt; \"Enter a sentence \" &lt;&lt; endl;\n    getline(cin, str);\n    //ask the user which letter they want the count of \n    cout &lt;&lt; \"Which letter would you like to find the number of appearances: \" &lt;&lt; endl;\n    cin &gt;&gt; find;\n\n\n    for (int i = 0; i &lt; length; i++)\n    {\n        if (str[i] == find)\n        {\n            count++;\n        }\n    }\n\n    cout &lt;&lt; \"the letter \" &lt;&lt; find &lt;&lt; \" appears \" &lt;&lt; length &lt;&lt; \" times \" &lt;&lt; endl;\n\n    //waits for user to exit\n    system(\"pause\");\n    cin.get();\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "lambda"], "comments": [{"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1486595621, "post_id": 42124866, "comment_id": 71418899, "body": "you can simply wrap a <code>std::function</code> around the lambda at the call site, or as the dupe shows, change pass1/passn to accept general templates and restrict them with decltype if you must."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1486596337, "post_id": 42124866, "comment_id": 71419135, "body": "@TemplateRex No problem, thanks for reopening."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1486596821, "post_id": 42124866, "comment_id": 71419295, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/40086513/type-deduction-does-not-work\">Type deduction does not work</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1486597372, "post_id": 42125514, "comment_id": 71419470, "body": "If you come here from the future and have access to C++17, deduction guides <a href=\"https://www.youtube.com/watch?v=-3fVp0U4xi0\" rel=\"nofollow noreferrer\">4:28 video</a> might be the better solution."}], "tags": [], "owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "is_accepted": false, "score": 6, "last_activity_date": 1486596756, "last_edit_date": 1486596756, "creation_date": 1486596311, "answer_id": 42125514, "question_id": 42124866, "link": "https://stackoverflow.com/questions/42124866/how-to-make-a-function-template-that-takes-a-functor-with-variable-arguments/42125514#42125514", "title": "How to make a function template that takes a functor with variable arguments", "body": "<p>You can use this implementation of <code>passn</code>:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;class RetVal, class T, class... Args&gt;\nstd::function&lt;RetVal(Args...)&gt; get_fun_type(RetVal (T::*)(Args...) const);\n\ntemplate &lt;class RetVal, class T, class... Args&gt;\nstd::function&lt;RetVal(Args...)&gt; get_fun_type(RetVal (T::*)(Args...));\n\ntemplate &lt;class T&gt;\nauto passn(T t) -&gt; decltype(get_fun_type(&amp;T::operator())) {\n    return t;\n}\n\nint main() {\n    auto fun = passn([](int a) { std::cout &lt;&lt; a; });\n    fun(42);\n}\n</code></pre>\n\n<p>(<a href=\"http://coliru.stacked-crooked.com/a/96c0b48a1733fc84\">demo</a>)</p>\n\n<p>It assumes you pass in a type that has an <code>operator()</code>. It takes the address of that function and deduces parameters from that member pointer.</p>\n\n<p>The function will fail if you pass it an object that has multiple <code>operator()</code>s because then taking its address will be ambiguous, but lambdas will not produce that problem.</p>\n"}], "owner": {"reputation": 1816, "user_id": 98077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbd5f1c2f535b14165ae883fa7c3f37?s=128&d=identicon&r=PG", "display_name": "Jens Alfke", "link": "https://stackoverflow.com/users/98077/jens-alfke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 833, "favorite_count": 0, "answer_count": 1, "score": 9, "last_activity_date": 1486596756, "creation_date": 1486593055, "question_id": 42124866, "link": "https://stackoverflow.com/questions/42124866/how-to-make-a-function-template-that-takes-a-functor-with-variable-arguments", "title": "How to make a function template that takes a functor with variable arguments", "body": "<p>I'm trying to implement a function template (in C++11) whose parameter is a lambda with arbitrary parameters, and return a compatible std::function object. The goal is for the returned function when called to invoke the original lambda asynchronously, but for now I'm just returning the original lambda.</p>\n\n<p>The problem is simply getting the compiler to accept a lambda as the parameter of the function template. Here are some simple templates:</p>\n\n<pre><code>#include &lt;functional&gt;\nusing namespace std;\n\ntemplate &lt;class Arg&gt;\nfunction&lt;void(Arg)&gt; pass1(function&lt;void(Arg)&gt; fn) {\n    return fn;\n}\n\ntemplate &lt;class... Args&gt;\nfunction&lt;void(Args...)&gt; passn(function&lt;void(Args...)&gt; fn) {\n    return fn;\n}\n</code></pre>\n\n<p>They do the same thing, it's just that <code>pass1</code> only works on single-parameter functors while <code>passn</code> takes an arbitrary number.</p>\n\n<p>So now we try using them, first <code>pass1</code>:</p>\n\n<pre><code>    auto p1 = pass1( [](int a)-&gt;void {cout &lt;&lt; a;} );  // ERROR\n</code></pre>\n\n<p>This doesn't work; the compiler can't seem to tell what parameters the lambda takes. Clang error message is:</p>\n\n<pre><code>Untitled.cpp:17:12: error: no matching function for call to 'pass1'\n    auto p1 = pass1( [](int a)-&gt;void {cout &lt;&lt; a;} );\n              ^~~~~\nUntitled.cpp:6:21: note: candidate template ignored: could not match 'function&lt;void (type-parameter-0-0)&gt;' against '(lambda at Untitled.cpp:17:19)'\nfunction&lt;void(Arg)&gt; pass1(function&lt;void(Arg)&gt; fn) {\n</code></pre>\n\n<p>I can work around this by explicitly specifying the template parameter type:</p>\n\n<pre><code>    auto p2 = pass1&lt;int&gt;( [](int a)-&gt;void {cout &lt;&lt; a;} );  // OK\n</code></pre>\n\n<p>However, this workaround fails with <code>passn</code>:</p>\n\n<pre><code>    auto p3 = passn&lt;int&gt;( [](int a)-&gt;void {cout &lt;&lt; a;} );\n\nUntitled.cpp:23:12: error: no matching function for call to 'passn'\n    auto p3 = passn&lt;int&gt;( [](int a)-&gt;void {cout &lt;&lt; a;} );\n              ^~~~~~~~~~\nUntitled.cpp:11:25: note: candidate template ignored: could not match 'function&lt;void (int, type-parameter-0-0...)&gt;' against '(lambda at Untitled.cpp:23:24)'\nfunction&lt;void(Args...)&gt; passn(function&lt;void(Args...)&gt; fn) {\n                    ^\n</code></pre>\n\n<p>The weird thing is that I <em>can</em> invoke <code>passn</code> if I pass it a <code>function</code> object:</p>\n\n<pre><code>    function&lt;void(int)&gt; fn = [](int a)-&gt;void {cout &lt;&lt; a;};\n    auto x = passn&lt;int&gt;(fn);  // OK\n</code></pre>\n\n<p>...in fact, I don't even have to specify the template parameter type:</p>\n\n<pre><code>    auto y = passn(fn);  // OK\n</code></pre>\n\n<p>The function I actually need is going to be like <code>passn</code>, but I don't want the extra verbiage of having to wrap a <code>function</code> object around the lambda every time I call it. Am I missing something, or is this just not possible? Would it be possible in C++14?</p>\n"}, {"tags": ["java", "c++", "c", "directed-graph", "markov-chains"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486592918, "post_id": 42124704, "comment_id": 71417733, "body": "You avoid infinite loops by blocking a node already visited. Nothing nasty about that at all, whether you are using a recursive solution or something like Dijkstra&#39;s algorithm."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486593161, "post_id": 42124704, "comment_id": 71417846, "body": "@WeatherVane Are you saying that the eight different paths I listed are already the final result? I believe having infinite loops is actually allowed, since it ends up being sort of a geometric series in the loop traversal probability (in simplest case of 1 loop), which converges to a finite number. My trouble is when there are many loops and several intersecting. Then I don&#39;t see how to generalize the geometric series."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486593386, "post_id": 42124704, "comment_id": 71417963, "body": "You asked how to remove cycles."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486593464, "post_id": 42124704, "comment_id": 71417984, "body": "@WeatherVane Yes, I&#39;d like to remove cycles and replace them with altered probabilities at the tree edges."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1486593539, "post_id": 42124704, "comment_id": 71418013, "body": "The subgraph without loops is called &quot;spanning tree&quot;. Google from here."}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 3, "creation_date": 1486593913, "post_id": 42124704, "comment_id": 71418170, "body": "He doesn&#39;t want simple cycle removal, he wants to evaluate the asymptotic probability of arriving at each end node, given there is an infinite set of cyclic paths through the graph."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "reply_to_user": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1486593950, "post_id": 42124704, "comment_id": 71418187, "body": "@ChristopherOicles Yes! Thank you. That is my question."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1486648576, "post_id": 42124704, "comment_id": 71443322, "body": "You are describing graphs of certain kinds of <a href=\"https://en.wikipedia.org/wiki/Markov_chain\" rel=\"nofollow noreferrer\">Markov chains</a>.  I&#39;ve added SO&#39;s tag for that, which might draw attention from people better-suited to answer than I am."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487134405, "post_id": 42124704, "comment_id": 71640727, "body": "@FauChristian when I asked the question, I already solved the problems you mentioned and were at the stage of dealing with loops (As you can see, the spanning tree paths, as well as the cycles are already found and provided for the example in the question). The probabilistic analysis is summarized in John Bollingers answer. If you find that trivial, then I&#39;m impressed. For me it was not easy, but I got it to work eventually."}], "answers": [{"tags": [], "owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "is_accepted": false, "score": 1, "last_activity_date": 1486655009, "last_edit_date": 1486655009, "creation_date": 1486654311, "answer_id": 42140717, "question_id": 42124704, "link": "https://stackoverflow.com/questions/42124704/directed-probability-graph-algorithm-to-reduce-cycles/42140717#42140717", "title": "Directed probability graph - algorithm to reduce cycles?", "body": "<p>I understand this as the following problem:</p>\n\n<p>Given an initial distribution to be on each node as a vector b and a Matrix A that stores the probability to jump from node i to node j in each time step, somewhat resembling an adjacency matrix.</p>\n\n<p>Then the distribution b_1 after one time step is A x b. The distribution b_2 after two time steps is A x b_1. Likewise, the distribution b_n is A^n x b.</p>\n\n<p>For an approximation of b_infinite, we can do the following:</p>\n\n<pre><code>Vector final_probability(Matrix A, Vector b,\n    Function Vector x Vector -&gt; Scalar distance, Scalar threshold){\n    b_old = b\n    b_current = A x b\n    while(distance(b_old,b_current) &lt; threshold){\n        b_old = b_current\n        b_current = A x b_current\n    }\n    return b_current\n}\n</code></pre>\n\n<p>(I used mathematical variable names for convencience)</p>\n\n<p>In other words, we assume that the sequence of distributions converges nicely after the given threshold. Might not hold true, but will usually work.</p>\n\n<p>You might want to add a maximal amount of iterations to that.</p>\n\n<p>Euclidean distance should work well as distance.</p>\n\n<p>(This uses the concept of a <a href=\"https://en.wikipedia.org/wiki/Markov_chain\" rel=\"nofollow noreferrer\">Markov Chain</a> but is more of a pragmatical solution)</p>\n"}, {"comments": [{"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "edited": false, "score": 0, "creation_date": 1486655885, "post_id": 42140741, "comment_id": 71448710, "body": "I believe memorization will make it almost linear (polynomial for sure). You are awesome! Thank you."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 1, "creation_date": 1487194708, "post_id": 42140741, "comment_id": 71678726, "body": "@FauChristian, what the question asks for is &quot;a <b>general algorithm</b> to find the probabilities to arrive at each of the final nodes,&quot; (emphasis added) and this answer provides two.  If you do not consider those to be hints for implementation then hints for implementation are indeed <i>not</i> what the question asks for.  Certainly the OP seems entirely satisfied that this answer responds to the question."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "edited": false, "score": 0, "creation_date": 1487198637, "post_id": 42140741, "comment_id": 71680666, "body": "This answer completely disassembles the problem. Nothing left to add. Just take it and implement it literally and it will work."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487425302, "post_id": 42140741, "comment_id": 71785332, "body": "@FauChristian, whether or not you accept that the conclusions presented satisfy the definition of an &quot;algorithm&quot;, one of the advantages of developing it in the way I did is that the logical process by which the conclusions are reached is crystal clear.  I assert that the approach accommodates cycle overlap just fine.  If you disagree, then surely you can show where a dependency on non-overlap enters the derivation."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487462838, "post_id": 42140741, "comment_id": 71797537, "body": "@FauChristian, (1) there are no dropped terms in the derivation for which any &quot;correction&quot; would be required.  The infinite series is reduced to a sum of two terms by use of the recurrence relation inherent in it.  (2) The presence or absence of vertex i in S(i,G) is irrelevant because at that point we are computing paths in subgraph X(G,i).  That graph contains all the vertices of G, but no paths from (or through) i to any other vertex.  I described it in terms of removing edges outbound from i, but if you prefer, the Markov property is retained by replacing them all with one self edge."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487466248, "post_id": 42140741, "comment_id": 71798298, "body": "@FauChristian, (1) yes.  The series has form P = p0 + p0 * q + p0 * q^2 + p0 * q^3 + ....  If we subtract p0 from each side and factor out a q, we get P - p0 = q * (p0 + p0 * q + p0 * q^2 + ...).  The infinite series in the parentheses is the <i>same one</i> we started with, so we know its value: P.  Therefore we get P - p0 = q * P.  No terms are dropped.  No correction is required."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487466817, "post_id": 42140741, "comment_id": 71798406, "body": "@FauChristian, (2) to the extent that any further proof is required, it is summed up in the observations that X(G, i) contains no paths from any of the S(i, G) to f that are not also in G; that all paths from i to f in G that do not revisit i consist of the union edge from i to an element of S(i, G) with a path in X(G, i); and that all edges G and X(i, G) have in common have the same probability in each.  It&#39;s just a formalization of looking at all the same paths as we were looking at in G, starting at the immediate successors of i."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487466947, "post_id": 42140741, "comment_id": 71798437, "body": "@FauChristian, in any case, you still have yet to substantiate your claim that this approach fails to handle overlapping cycles."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487530278, "post_id": 42140741, "comment_id": 71815249, "body": "@FauChristian, you having accepted my finite formula for Pr(f|i,G), your remaining objection seems to be to my last formula, giving Pr(Cif(0)|G) as a finite sum.  But this formula follows directly from the definitions of the terms on the left-hand side.  It is as I said, the sum on the right is over <i>all</i> the paths in Cif(0) -- including those that contain cycles.  The point you seem to be stuck on is already accounted for by (earlier) using the recurrence to reduce the infinite sum to a finite one."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487600011, "post_id": 42140741, "comment_id": 71844859, "body": "@FauChristian, I have indeed been reading your comments carefully, but I nevertheless am having difficulty seeing where your objection lodges.  In my view, reducing the problem to one over a subgraph is justified by the fact that the set of paths to be explored in the parent graph and the set of paths to be explored in the subgraph are identical.  It&#39;s simply a reorganization of terms.  I have asserted this already, but you seem to have ignored or rejected it without explanation."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487693168, "post_id": 42140741, "comment_id": 71894165, "body": "@FauChristian There is really no point in a lengthy discussion since, as I already pointed out, a direct implementation of the steps John Bollinger suggests leads to the exact solution. One criterion to verify this is the fact that the resulting overall probabilities to arrive at final nodes properly sum up to 1. This is a highly non-trivial check, considering that various loops with several infinite summations were taken into account. Also, this might interest you: it describes the infinite summations happening here in more detail <a href=\"https://en.wikipedia.org/wiki/Geometric_series\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Geometric_series</a>"}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487705808, "post_id": 42140741, "comment_id": 71901848, "body": "@FauChristian actually, I wrote a script that generates random adjacency matrices <code>M</code> in various sizes (up to 12 nodes) and tested John Bollingers&#39; algorithm on thousands of them. In all cases the asymptotic final node probabilities sum up to 1. Besides, one can check numerically that matrix multiplication <code>M^n</code> for large <code>n</code> makes the component <code>M[1,i]</code> (transition <code>node 1-&gt; some final node i</code>) approach the analytically obtained value. That&#39;s further evidence in each case. It would be great to compare to other treatments. The fact that they can&#39;t be found makes this answer even more valuable!"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487779155, "post_id": 42140741, "comment_id": 71939894, "body": "@FauChristian, the problem here is that it was never my intention to provide a rigorous proof, but only an <i>overview</i> of a proof sufficient to explain where the conclusion comes from.  I confess that the primary reason I have continued the discussion is my irritation at what seem to me to be unjustified assertions that the logic presented and therefore the conclusion are <i>incorrect</i>.  Your patronizing tone contributes to that irritation.  I am certainly capable of making mistakes, but at this point, if you still maintain that I have made one here then I ask you to <i>prove</i> it."}, {"owner": {"reputation": 1896, "user_id": 381281, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MfrW3.png?s=128&g=1", "display_name": "hfs", "link": "https://stackoverflow.com/users/381281/hfs"}, "edited": false, "score": 0, "creation_date": 1609232879, "post_id": 42140741, "comment_id": 115782837, "body": "This should be published as paper! I had the same problem and difficulties to find anything in the Markov chain literature or lecture notes, especially when cycles overlap. The solution is derived beautifully and straightforward to implement in a short recursive function."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 5, "last_activity_date": 1487461217, "last_edit_date": 1487461217, "creation_date": 1486654378, "answer_id": 42140741, "question_id": 42124704, "link": "https://stackoverflow.com/questions/42124704/directed-probability-graph-algorithm-to-reduce-cycles/42140741#42140741", "title": "Directed probability graph - algorithm to reduce cycles?", "body": "<p>I'm not expert in the area of Markov chains, and although I think it's likely that algorithms are known for the kind of problem you present, I'm having difficulty finding them.</p>\n\n<p>If no help comes from that direction, then you can consider rolling your own.  I see at least two different approaches here:</p>\n\n<ol>\n<li>Simulation.</li>\n</ol>\n\n<p>Examine how the state of the system evolves over time by starting with the system in state 1 at 100% probability, and performing many iterations in which you apply your transition probabilities to compute the probabilities of the state obtained after taking a step.  If at least one final (\"absorbing\") node can be reached (at non-zero probability) from every node, then over enough steps, the probability that the system is in anything other than a final state will decrease asymptotically toward zero.  You can estimate the probability that the system ends in final state S as the probability that it is in state S after <em>n</em> steps, with an upper bound on the error in that estimate given by the probability that the system is in a non-final state after <em>n</em> steps.</p>\n\n<p>As a practical matter, this is the same is computing <strong>Tr</strong><sup><em>n</em></sup>, where <strong>Tr</strong> is your transition probability matrix, augmented with self-edges at 100% probability for all the final states.</p>\n\n<ol start=\"2\">\n<li>Exact computation.</li>\n</ol>\n\n<p>Consider a graph, G, such as you describe.  Given two vertices <em>i</em> and <em>f</em>, such that there is at least one path from <em>i</em> to <em>f</em>, and <em>f</em> has no outgoing edges other than self-edges, we can partition the paths from <em>i</em> to <em>f</em> into classes characterized by the number of times they revisit <em>i</em> prior to reaching <em>f</em>.  There may be an infinite number of such classes, which I will designate <strong><em>C</strong><sub>if</sub></em>(<em>n</em>), where <em>n</em> represents the number of times the paths in <strong><em>C</strong><sub>if</sub></em>(<em>n</em>) revisit node <em>i</em>.  In particular, <strong><em>C</strong><sub>ii</sub></em>(0) contains all the simple loops in G that contain <em>i</em> (<strong><em>clarification</strong>: as well as other paths</em>).</p>\n\n<p>The total probability of ending at node <em>f</em> given that the system traverses graph G starting at node <em>i</em> is given by</p>\n\n<p>Pr(<em>f</em>|<em>i</em>, G) = Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) + Pr(<strong><em>C</strong><sub>if</sub></em>(1)|G) + Pr(<strong><em>C</strong><sub>if</sub></em>(2)|G) ...</p>\n\n<p>Now observe that if <em>n</em> > 0 then each path in <strong><em>C</strong><sub>if</sub></em>(<em>n</em>) has the form of a union of two paths <strong>c</strong> and <strong>t</strong>, where <strong>c</strong> belongs to <strong><em>C</strong><sub>ii</sub></em>(<em>n</em>-1) and <strong>t</strong> belongs to <strong><em>C</strong><sub>if</sub></em>(0).  That is, <strong>c</strong> is a path that starts at node <em>i</em> and ends at node <em>i</em>, passing through <em>i</em> <em>n</em>-1 times between, and <strong>t</strong> is a path from <em>i</em> to <em>f</em> that does not pass through <em>i</em> again.  We can use that to rewrite our probability formula:</p>\n\n<p>Pr(<em>f</em>|<em>i</em>,G) = Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) + Pr(<strong><em>C</strong><sub>ii</sub></em>(0)|G) * Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) + Pr(<strong><em>C</strong><sub>ii</sub></em>(1)|G) * Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) + ...</p>\n\n<p>But note that every path in <strong><em>C</strong><sub>ii</sub></em>(<em>n</em>) is a composition of <em>n</em>+1 paths belonging to <strong><em>C</strong><sub>ii</sub></em>(0).  It follows that Pr(<strong><em>C</strong><sub>ii</sub></em>(<em>n</em>)|G) = Pr(<strong><em>C</strong><sub>ii</sub></em>(0)|G)<sup><em>n</em>+1</sup>, so we get</p>\n\n<p>Pr(<em>f</em>|<em>i</em>) = Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) + Pr(<strong><em>C</strong><sub>ii</sub></em>(0)|G) * Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) + Pr(<strong><em>C</strong><sub>ii</sub></em>(0)|G)<sup>2</sup> * Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) + ...</p>\n\n<p>And now, a little algebra gives us</p>\n\n<p>Pr(<em>f</em>|<em>i</em>,G) - Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) = Pr(<strong><em>C</strong><sub>ii</sub></em>(0)|G) * Pr(<em>f</em>|<em>i</em>,G)</p>\n\n<p>, which we can solve for Pr(<em>f</em>|<em>i</em>,G) to get</p>\n\n<p>Pr(<em>f</em>|<em>i</em>,G) = Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) / (1 - Pr(<strong><em>C</strong><sub>ii</sub></em>(0)|G))</p>\n\n<p>We've thus reduced the problem to one in terms of paths that do not return to the starting node, except possibly as their end node.  These do not preclude paths that have loops that don't include the starting node, but we can we nevertheless rewrite this problem in terms of several instances of the original problem, computed on a subgraph of the original graph.</p>\n\n<p>In particular, let <strong>S</strong>(<em>i</em>, G) be the set of successors of vertex <em>i</em> in graph G -- that is, the set of vertices <em>s</em> such that there is an edge from <em>i</em> to <em>s</em> in G, and let X(G,<em>i</em>) be the subgraph of G formed by removing all edges that start at <em>i</em>.  Furthermore, let <em>p<sub>is</sub></em> be the probability associated with edge (<em>i</em>, <em>s</em>) in G.</p>\n\n<p>Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) = Sum over <em>s</em> in <strong>S</strong>(<em>i</em>, G) of <em>p<sub>is</sub></em> * Pr(<em>f</em>|<em>s</em>,X(G,<em>i</em>))</p>\n\n<p>In other words, the probability of reaching <em>f</em> from <em>i</em> through G without revisiting <em>i</em> in between is the sum over all successors of <em>i</em> of the product of the probability of reaching <em>s</em> from <em>i</em> in one step with the probability of reaching <em>f</em> from <em>s</em> through G without traversing any edges outbound from <em>i</em>.  That applies for all <em>f</em> in G, including <em>i</em>.</p>\n\n<p>Now observe that <strong>S</strong>(<em>i</em>, G) and all the <em>p<sub>is</sub></em> are knowns, and that the problem of computing Pr(<em>f</em>|<em>s</em>,X(G,<em>i</em>)) is a new, strictly smaller instance of the original problem.  Thus, this computation can be performed recursively, and such a recursion is guaranteed to terminate.  It may nevertheless take a long time if your graph is complex, and it looks like a naive implementation of this recursive approach would scale exponentially in the number of nodes.  There are ways you could speed the computation in exchange for higher memory usage (i.e. memoization).</p>\n\n<hr>\n\n<p>There are likely other possibilities as well.  For example, I'm suspicious that there may be a bottom-up dynamic programming approach to a solution, but I haven't been able to convince myself that loops in the graph don't present an insurmountable problem there.</p>\n"}, {"comments": [{"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "edited": false, "score": 0, "creation_date": 1487133823, "post_id": 42240603, "comment_id": 71640576, "body": "I ended up doing exact resummation for the loop traversals. The recursive algorithm with memorization runs very quickly for sizes of i.e. 10 state systems, even under very low resources. Did you test your code on the example in my question? Maybe we can compare if the final state probabilities we get agree."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "edited": false, "score": 0, "creation_date": 1487135082, "post_id": 42240603, "comment_id": 71640898, "body": "The <code>&#47;</code> is heuristic for division. Basically, the entries of that matrix are rational numbers. Each row adds up to 1 (so the probability to go to some other state (or stay at the original) is 100%). The rows with all zeros are final states (probability to leave them is 0%). Node id is the row number. (First row: id=0, second row: id=1 etc.) Correspondingly, column number is destination node id. When there is non-zero probability in a column, a transition to that node from the respective row (starting node) is possible."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "edited": false, "score": 0, "creation_date": 1487198533, "post_id": 42240603, "comment_id": 71680623, "body": "Thank you! I will take a closer look."}], "tags": [], "owner": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "is_accepted": false, "score": 6, "last_activity_date": 1487568714, "last_edit_date": 1487568714, "creation_date": 1487131864, "answer_id": 42240603, "question_id": 42124704, "link": "https://stackoverflow.com/questions/42124704/directed-probability-graph-algorithm-to-reduce-cycles/42240603#42240603", "title": "Directed probability graph - algorithm to reduce cycles?", "body": "<p><strong>Problem Clarification</strong></p>\n\n<p>The input data is a set of m rows of n columns of probabilities, essentially an m by n matrix, where m = n = number of vertices on a directed graph.  Rows are edge origins and columns are edge destinations.  We will, on the bases of the mention of cycles in the question, that the graph is cyclic, that at least one cycle exists in the graph.</p>\n\n<p>Let's define the starting vertex as s.  Let's also define a terminal vertex as a vertex for which there are no exiting edges and the set of them as set T with size z.  Therefore we have z sets of routes from s to a vertex in T, and the set sizes may be infinite due to cycles <sup>1</sup>.  In such a scenario, one cannot conclude that a terminal vertex will be reached in an arbitrarily large number of steps.</p>\n\n<p>In the input data, probabilities for rows that correspond with vertices not in T are normalized to total to 1.0.  We shall assume the Markov property, that the probabilities at each vertex do not vary with time.  This precludes the use of probability to prioritize routes in a graph search <sup>2</sup>.</p>\n\n<p>Finite math texts sometimes name example problems similar to this question as <em>Drunken Random Walks</em> to underscore the fact that the walker forgets the past,\nreferring to the memory-free nature of Markovian chains.</p>\n\n<p><strong>Applying Probability to Routes</strong></p>\n\n<p>The probability of arriving at a terminal vertex can be expressed as an infinite series sum of products.</p>\n\n<blockquote>\n  <p>P<sub>t</sub> = lim <sub>s -> &infin;</sub> &Sigma; &prod; P<sub>i, j</sub>,</p>\n  \n  <p>where s is the step index, t is a terminal vertex index, i &isin; [1 .. m] and j &isin; [1 .. n]</p>\n</blockquote>\n\n<p><strong>Reduction</strong></p>\n\n<p>When two or more cycles intersect (sharing one or more vertices), analysis is complicated by an infinite set of patterns involving them.  It appears, after some analysis and review of <a href=\"http://www.columbia.edu/~ks20/stochastic-I/stochastic-I-MCII.pdf\" rel=\"noreferrer\">relevant academic work</a>, that arriving at an accurate set of terminal vertex arrival probabilities with today's mathematical tools may best be accomplished with a converging algorithm.</p>\n\n<p>A few initial reductions are possible.</p>\n\n<ol>\n<li><p>The first consideration is to enumerate the destination vertex, which is easy since the corresponding rows have probabilities of zero.</p></li>\n<li><p>The next consideration is to differentiate any further reductions from what the academic literature calls irreducible sub-graphs.  The below depth first algorithm remembers which vertices have already been visited while constructing a potential route, so it can be easily retrofitted to identify which vertices are involved in cycles.  However it is recommended to use existing well tested, peer reviewed graph libraries to identify and characterize sub-graphs as irreducible.</p></li>\n</ol>\n\n<p>Mathematical reduction of irreducible portions of the graph may or may not be plausible.  Consider starting vertex A and sole terminating vertex B in the graph represented as {A->C, C->A, A->D, D->A, C->D, D->C, C->B, D->B}.</p>\n\n<p>Although one can reduce the graph to probability relations absent of cycles through vertex A, the vertex A cannot be removed for further reduction without either modifying probabilities of vertices exiting C and D or allowing both totals of probabilities of edges exiting C and D to be less than 1.0.</p>\n\n<p><strong>Convergent Breadth First Traversal</strong></p>\n\n<p>A breadth first traversal that ignores revisiting and allows cycles can iterate step index s, not to some fixed s<sub>max</sub> but to some sufficiently stable and accurate point in a convergent trend.  This approach is especially called for if cycles overlap creating bifurcations in the simpler periodicity caused by a single cycle.</p>\n\n<blockquote>\n  <p>&Sigma; P<sub>s</sub><sup>&Delta; s</sup>.</p>\n</blockquote>\n\n<p>For the establishment of a reasonable convergence as s increases, one must determine the desired accuracy as a criteria for completing convergence algorithm and a metric for measuring accuracy by looking at longer term trends in results at all terminal vertices.  It may be important to provide a criteria where the sum of terminal vertex probabilities is close to unity in conjunction with the trend convergence metric, as both a sanity check and an accuracy criteria.  Practically, four convergence criteria may be necessary <sup>3</sup>.</p>\n\n<ol>\n<li>Per terminal vertex probability trend convergence delta</li>\n<li>Average probability trend convergence delta</li>\n<li>Convergence of total probability on unity</li>\n<li>Total number of steps (to cap depth for practical computing reasons)</li>\n</ol>\n\n<p>Even beyond these four, the program may need to contain a trap for an interrupt that permits the writing and subsequent examination of output after a long wait without the satisfying of all four above criteria.</p>\n\n<p><strong>An Example Cycle Resistant Depth First Algorithm</strong></p>\n\n<p>There are more efficient algorithms than the following one, but it is fairly comprehensible, it compiles without warning with C++ -Wall, and it produces the desired output for all finite and legitimate directed graphs and start and destination vertices possible <sup>4</sup>.  It is easy to load a matrix in the form given in the question using the addEdge method <sup>5</sup>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;list&gt;\n\nclass DirectedGraph {\n\n    private:\n        int miNodes;\n        std::list&lt;int&gt; * mnpEdges;\n        bool * mpVisitedFlags;\n\n    private:\n        void initAlreadyVisited() {\n            for (int i = 0; i &lt; miNodes; ++ i)\n                mpVisitedFlags[i] = false;\n        }\n\n        void recurse(int iCurrent, int iDestination,\n               int route[], int index,\n               std::list&lt;std::list&lt;int&gt; *&gt; * pnai) {\n\n            mpVisitedFlags[iCurrent] = true;\n            route[index ++] = iCurrent;\n\n            if (iCurrent == iDestination) {\n                auto pni = new std::list&lt;int&gt;;\n                for (int i = 0; i &lt; index; ++ i)\n                    pni-&gt;push_back(route[i]);\n                pnai-&gt;push_back(pni);\n\n            } else {\n                auto it = mnpEdges[iCurrent].begin();\n                auto itBeyond = mnpEdges[iCurrent].end();\n                while (it != itBeyond) {\n                    if (! mpVisitedFlags[* it])\n                        recurse(* it, iDestination,\n                                route, index, pnai);\n                    ++ it;\n                }\n            }\n\n            -- index;\n            mpVisitedFlags[iCurrent] = false;\n        } \n\n    public:\n        DirectedGraph(int iNodes) {\n            miNodes = iNodes;\n            mnpEdges = new std::list&lt;int&gt;[iNodes];\n            mpVisitedFlags = new bool[iNodes];\n        }\n\n        ~DirectedGraph() {\n            delete mpVisitedFlags;\n        }\n\n        void addEdge(int u, int v) {\n            mnpEdges[u].push_back(v);\n        }\n\n        std::list&lt;std::list&lt;int&gt; *&gt; * findRoutes(int iStart,\n                int iDestination) {\n            initAlreadyVisited();\n            auto route = new int[miNodes];\n            auto pnpi = new std::list&lt;std::list&lt;int&gt; *&gt;();\n            recurse(iStart, iDestination, route, 0, pnpi);\n            delete route;\n            return pnpi;\n        }\n};\n\nint main() {\n\n    DirectedGraph dg(5);\n\n    dg.addEdge(0, 1);\n    dg.addEdge(0, 2);\n    dg.addEdge(0, 3);\n    dg.addEdge(1, 3);\n    dg.addEdge(1, 4);\n    dg.addEdge(2, 0);\n    dg.addEdge(2, 1);\n    dg.addEdge(4, 1);\n    dg.addEdge(4, 3);\n\n    int startingNode = 2;\n    int destinationNode = 3;\n\n    auto pnai = dg.findRoutes(startingNode, destinationNode);\n\n    std::cout\n            &lt;&lt; \"Unique routes from \"\n            &lt;&lt; startingNode\n            &lt;&lt; \" to \"\n            &lt;&lt; destinationNode\n            &lt;&lt; std::endl\n            &lt;&lt; std::endl;\n\n    bool bFirst;\n    std::list&lt;int&gt; * pi;\n    auto it = pnai-&gt;begin();\n    auto itBeyond = pnai-&gt;end();\n    std::list&lt;int&gt;::iterator itInner;\n    std::list&lt;int&gt;::iterator itInnerBeyond;\n    while (it != itBeyond) {\n        bFirst = true;\n        pi = * it ++;\n        itInner = pi-&gt;begin();\n        itInnerBeyond = pi-&gt;end();\n        while (itInner != itInnerBeyond) {\n            if (bFirst)\n                bFirst = false;\n            else\n                std::cout &lt;&lt; ' ';\n            std::cout &lt;&lt; (* itInner ++);\n        }\n        std::cout &lt;&lt; std::endl;\n        delete pi;\n    }\n\n    delete pnai;\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Notes</strong></p>\n\n<p>[1] Improperly handled cycles in a directed graph algorithm will hang in an infinite loop.  (Note the trivial case where the number of routes from A to B for the directed graph represented as {A->B, B->A} is infinity.)</p>\n\n<p>[2] Probabilities are sometimes used to reduce the CPU cycle cost of a search.  Probabilities, in that strategy, are input values for meta rules in a priority queue to reduce the computational challenge very tedious searches (even for a computer).  The early literature in production systems termed the exponential character of unguided large searches Combinatory Explosions.</p>\n\n<p>[3] It may be practically necessary to detect breadth first probability trend at each vertex and specify satisfactory convergence in terms of four criteria</p>\n\n<ol>\n<li>&Delta;(&Sigma;&prod;P)<sub>t</sub> &lt;= &Delta;<sub>max</sub> &forall; t</li>\n<li>&Sigma;<sub>t=0</sub><sup>T</sup> &Delta;(&Sigma;&prod;P)<sub>t</sub> / T &lt;= &Delta;<sub>ave</sub></li>\n<li>|&Sigma; &Sigma;&prod;P - 1| &lt;= u<sub>max</sub>, where u is the maximum allowable deviation from unity for the sum of final probabilities</li>\n<li>s &lt; S<sub>max</sub></li>\n</ol>\n\n<p>[4] Provided there are enough computing resources available to support the data structures and ample time to arrive at an answer for the given computing system speed.</p>\n\n<p>[5] You can load DirectedGraph dg(7) with the input data using two loops nested to iterate through the rows and columns enumerated in the question.  The body of the inner loop would simply be a conditional edge addition.</p>\n\n<pre><code>if (prob != 0) dg.addEdge(i, j);\n</code></pre>\n\n<p>Variable prob is <strong>P</strong> <sub>m,n</sub>. Route existence is only concerned with zero/nonzero status.</p>\n"}, {"tags": [], "owner": {"reputation": 15969, "user_id": 95, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99fc91f87b0148b12d5a6a68f4b9cb3d?s=128&d=identicon&r=PG", "display_name": "Marek Grzenkowicz", "link": "https://stackoverflow.com/users/95/marek-grzenkowicz"}, "is_accepted": false, "score": 2, "last_activity_date": 1611738217, "last_edit_date": 1611738217, "creation_date": 1611431674, "answer_id": 65863744, "question_id": 42124704, "link": "https://stackoverflow.com/questions/42124704/directed-probability-graph-algorithm-to-reduce-cycles/65863744#65863744", "title": "Directed probability graph - algorithm to reduce cycles?", "body": "<p>I found this question while researching directed cyclic graphs. The probability of reaching each of the final nodes can be calculated using <strong>absorbing Markov chains</strong>.</p>\n<p>The video <a href=\"https://www.youtube.com/watch?v=bTeKu7WdbT8\" rel=\"nofollow noreferrer\">Markov Chains - Part 7</a> (+ parts 8 and 9) explains absorbing states in Markov chains and the math behind it.</p>\n"}], "owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1967, "favorite_count": 6, "accepted_answer_id": 42140741, "answer_count": 4, "score": 13, "last_activity_date": 1611738217, "creation_date": 1486592336, "last_edit_date": 1487696617, "question_id": 42124704, "link": "https://stackoverflow.com/questions/42124704/directed-probability-graph-algorithm-to-reduce-cycles", "title": "Directed probability graph - algorithm to reduce cycles?", "body": "<p>Consider a directed graph which is traversed from first node <code>1</code> to some final nodes (which have no more outgoing edges). Each edge in the graph has a probability associated with it. Summing up the probabilities to take each possible path towards all possible final nodes returns <code>1</code>. (Which means, we are guaranteed to arrive at one of the final nodes eventually.)</p>\n\n<p>The problem would be simple if loops in the graph would not exist. Unfortunately rather convoluted loops can arise in the graph, which can be traversed an infinite amount of times (probability decreases multiplicatively with each loop traversal, obviously). </p>\n\n<p>Is there a general algorithm to find the probabilities to arrive at each of the final nodes?</p>\n\n<p>A particularly nasty example:</p>\n\n<p>We can represent the edges as a matrix (probability to go from row (node) <code>x</code> to row (node) <code>y</code> is in the entry <code>(x,y)</code>)</p>\n\n<pre><code>{{0, 1/2, 0, 1/14, 1/14, 0, 5/14}, \n {0, 0, 1/9, 1/2, 0, 7/18, 0}, \n {1/8, 7/16, 0, 3/16, 1/8, 0, 1/8}, \n {0, 1, 0, 0, 0, 0, 0}, \n {0, 0, 0, 0, 0, 0, 0}, \n {0, 0, 0, 0, 0, 0, 0}, \n {0, 0, 0, 0, 0, 0, 0}}\n</code></pre>\n\n<p>Or as a directed graph:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gD8ah.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/gD8ah.png\" alt=\"enter image description here\"></a></p>\n\n<p>The starting node <code>1</code> is blue, the final nodes <code>5,6,7</code> are green. All edges are labelled by the probability to traverse them when starting from the node where they originate.</p>\n\n<p>This has eight different paths from starting node <code>1</code> to the final nodes:</p>\n\n<pre><code>{{1/14, {1, 5}}, {5/14, {1, 7}}, {7/36, {1, 2, 6}}, \n {1/144, {1, 2, 3, 5}}, {1/144, {1, 2, 3, 7}}, \n {1/36, {1, 4, 2, 6}}, {1/1008, {1, 4, 2, 3, 5}}, {1/1008, {1, 4, 2, 3, 7}}}\n</code></pre>\n\n<p>(The notation for each path is {probability,sequence of nodes visited})</p>\n\n<p>And there are five distinct loops:</p>\n\n<pre><code>{{1/144, {2, 3, 1}}, {7/144, {3, 2}}, {1/2, {4, 2}}, \n{1/48, {3, 4, 2}}, {1/1008, {4, 2, 3, 1}}}\n</code></pre>\n\n<p>(Notation for loops is {probability to traverse loop once,sequence of nodes visited}).</p>\n\n<p>If only these cycles could be resolved to obtain an effectively tree like graph, the problem would be solved.</p>\n\n<p>Any hint on how to tackle this?</p>\n\n<p>I'm familiar with Java, C++ and C, so suggestions in these languages are preferred.</p>\n"}, {"tags": ["c++", "arrays", "multidimensional-array", "2d", "parameter-passing"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 1, "creation_date": 1486591130, "post_id": 42124386, "comment_id": 71416897, "body": "Please take a look at <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">The Definitive C++ Book Guide and List</a>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1486591204, "post_id": 42124386, "comment_id": 71416932, "body": "Arrays cannot have variable size in C++. You should use a container such as <code>vector</code>."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1486593109, "post_id": 42124386, "comment_id": 71417821, "body": "Oh look, there&#39;s a matrix class in the SO C++ docs: (<a href=\"http://stackoverflow.com/documentation/c%2b%2b/3017/arrays/10246/a-dynamic-size-matrix-using-stdvector-for-storage#t=201702082231137208229\">stackoverflow.com/documentation/c%2b%2b/3017/arrays/10246/&hellip;</a>&zwnj;&#8203;)."}], "answers": [{"tags": [], "owner": {"reputation": 441, "user_id": 3401653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2650772d725a121a778430183e80cfb3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Mokari", "link": "https://stackoverflow.com/users/3401653/sam-mokari"}, "is_accepted": false, "score": 1, "last_activity_date": 1486593246, "creation_date": 1486593246, "answer_id": 42124913, "question_id": 42124386, "link": "https://stackoverflow.com/questions/42124386/how-do-you-pass-a-2d-int-array-of-size-n-to-a-function-in-c/42124913#42124913", "title": "How do you pass a 2D int array of size n to a function in C++?", "body": "<p>Use </p>\n\n<pre><code>vector&lt;vector&lt;int&gt; &gt; a;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1486594206, "last_edit_date": 1486594206, "creation_date": 1486593566, "answer_id": 42125005, "question_id": 42124386, "link": "https://stackoverflow.com/questions/42124386/how-do-you-pass-a-2d-int-array-of-size-n-to-a-function-in-c/42125005#42125005", "title": "How do you pass a 2D int array of size n to a function in C++?", "body": "<p>C++ does not support 2D array types of variable size in all dimensions. While you could define a function parameter <code>int arr[]</code>, or even a parameter like <code>int twoD[][10]</code>, a parameter like <code>int twoD[][]</code> is not supported.</p>\n\n<p>Let me explain the reason for that by using a work around (which is hacky, error prone, I do not encourage to actually use it, and it's just for explanation purpose):</p>\n\n<p>The function takes a parameter, which is a pointer to an integer, and an dimension_x, which actually stands for the number of integers per row. Then, we could \"treat\" the pointer to an integer as a pointer to a 2D-array of integer in that we calculate the address of the cell by taking \"row_number * dimension_x + column_number\" (row and column numbers being <code>0</code>-indexed).</p>\n\n<p>Note the formula \"row_number * dimension_x + column_number\", which requires a \"dimension_x\" to calculate the cell's position. For the same reason a compiler can handle a parameter of type <code>twoD[][10]</code>, because <code>dimension_x</code> is then defined as <code>10</code>. In contrast, a parameter of type <code>twoD[][]</code> cannot be handled, because the compiler cannot derive the \"dimension_x\" and, consequently, cannot determine where to access an element like, for example, <code>twoD[2][1]</code>.</p>\n\n<pre><code>void func(int* startOf2DArray, int dimension) {\n    int row = 2;\n    int column = 1;\n    int cellAtRow_Column = startOf2DArray[dimension*row + column];\n    printf(\"value at [%d][%d] is %d (should be 7)\\n\", row, column, cellAtRow_Column);\n}\n\nint main(void)\n{\n    int dimension = 3;\n    int myArray[3][3] = { {0,1,2},{3,4,5},{6,7,8} };\n    func (&amp;myArray[0][0], dimension);\n    return 0;\n}\n</code></pre>\n\n<p>Puh; long description; hope it explains the matter a little bit.</p>\n\n<p>So use <code>vector&lt;vector&lt;int&gt; &gt; &amp;my2DArrayAsRef</code> (or alternatively <code>vector&lt;vector&lt;int&gt; &gt; my2DArrayAsCopy</code>):</p>\n\n<pre><code>void func2(std::vector&lt;std::vector&lt;int&gt;&gt; &amp;my2DArrayAsRef) {\n\n    int row = 2;\n    int column = 1;\n    int cellAtRow_Column = my2DArrayAsRef[row][column];\n    printf(\"value at [%d][%d] is %d (should be 7)\\n\", row, column, cellAtRow_Column);\n}\n\nint main(void)\n{\n    std::vector&lt;std::vector&lt;int&gt;&gt; myArray2 = { {0,1,2},{3,4,5},{6,7,8} };\n    func2(myArray2);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6850875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fde9e940d9765e654ddb512af70b35?s=128&d=identicon&r=PG", "display_name": "Uma", "link": "https://stackoverflow.com/users/6850875/uma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1486630329, "answer_count": 2, "score": -3, "last_activity_date": 1486594206, "creation_date": 1486590905, "question_id": 42124386, "link": "https://stackoverflow.com/questions/42124386/how-do-you-pass-a-2d-int-array-of-size-n-to-a-function-in-c", "closed_reason": "Needs details or clarity", "title": "How do you pass a 2D int array of size n to a function in C++?", "body": "<p>I simply want to pass a 2d array to a function but C++ is not like JAVA and won't let a function take in 'int[][] square' as its parameter. Apparently I need to specify its size, but it's size is a variable n by n, which the user inputs.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486590651, "post_id": 42124241, "comment_id": 71416661, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. As @M.M. points out, we don&#39;t know what <code>BOOLEAN</code> is."}, {"owner": {"reputation": 1894, "user_id": 293138, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bcdcbed0226c2c15f34b4c4ed143c11f?s=128&d=identicon&r=PG", "display_name": "0xDEAD BEEF", "link": "https://stackoverflow.com/users/293138/0xdead-beef"}, "reply_to_user": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 0, "creation_date": 1486590937, "post_id": 42124241, "comment_id": 71416801, "body": "BOOLEAN is UCHAR. I believe that this explain everything! Thank you guys!!! (I am doing Windows Kernel driver development) :)"}], "answers": [{"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1486590715, "creation_date": 1486590715, "answer_id": 42124337, "question_id": 42124241, "link": "https://stackoverflow.com/questions/42124241/c-operator-with-enum-evaluates-to-false/42124337#42124337", "title": "C++ operator &amp; with enum evaluates to false", "body": "<p>I guess what is happening is that <code>BOOLEAN</code> is a typedef for a 1-byte type. E.g. in Microsoft's Windows headers, it is a typedef for <code>unsigned char</code> (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx\" rel=\"nofollow noreferrer\">link</a>).</p>\n\n<p>The value of <code>3070 &amp; 512</code> is <code>512</code>. Assigning <code>512</code> to <code>unsigned char</code> gives the result of <code>0</code>.</p>\n\n<p>To avoid this problem you can do one of the following things:</p>\n\n<ul>\n<li>Use <code>bool</code> instead of <code>BOOLEAN</code>. </li>\n<li>Use <code>!!(x &amp; y)</code> instead of <code>x &amp; y</code>.</li>\n<li>Use <code>(x &amp; y) == y</code>.</li>\n</ul>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "is_accepted": false, "score": 3, "last_activity_date": 1486598420, "last_edit_date": 1486598420, "creation_date": 1486590768, "answer_id": 42124351, "question_id": 42124241, "link": "https://stackoverflow.com/questions/42124241/c-operator-with-enum-evaluates-to-false/42124351#42124351", "title": "C++ operator &amp; with enum evaluates to false", "body": "<p>I think you are using BOOLEAN type from the <code>&lt;Windows.h&gt;</code> header which is a typedef for the BYTE type which is a typedef for unsinged char type which can hold values from 0 - 255 and not the 512 to which the <code>3070 &amp; 512</code> expression evaluates. There is an overflow that results in the value of 0 which is equivalent to <code>FALSE</code>.</p>\n"}], "owner": {"reputation": 1894, "user_id": 293138, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bcdcbed0226c2c15f34b4c4ed143c11f?s=128&d=identicon&r=PG", "display_name": "0xDEAD BEEF", "link": "https://stackoverflow.com/users/293138/0xdead-beef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 42124337, "answer_count": 2, "score": 1, "last_activity_date": 1486598420, "creation_date": 1486590332, "question_id": 42124241, "link": "https://stackoverflow.com/questions/42124241/c-operator-with-enum-evaluates-to-false", "title": "C++ operator &amp; with enum evaluates to false", "body": "<p>Following code outputs reportAllDataRanges = 0.</p>\n\n<pre><code>BOOLEAN updateDataRanges = IsFirstUpdate || (m_uiDataRangeMode &amp; IAdapterCommon::UpdatePinDataRanges);\nBOOLEAN updateConstrainedDataRanges = m_uiDataRangeMode &amp; IAdapterCommon::UpdatePinConstrainedDataRanges;\nBOOLEAN reportAllDataRanges = m_uiDataRangeMode &amp; IAdapterCommon::ReportAllDataRanges;\n\nDPF_ENTER((\"[CAdapterCommon::UpdatePinDescriptor(%p, %lu)] - m_uiDataRangeMode = %lu, updateDataRanges = %lu, updateConstrainedDataRanges = %lu, reportAllDataRanges = %lu, a &amp; b = %lu, b = %lu\", PinDescriptor, IsFirstUpdate, m_uiDataRangeMode, updateDataRanges, updateConstrainedDataRanges, reportAllDataRanges, m_uiDataRangeMode &amp; IAdapterCommon::ReportAllDataRanges, IAdapterCommon::ReportAllDataRanges));\n</code></pre>\n\n<hr>\n\n<pre><code>[CAdapterCommon::UpdatePinDescriptor(FFFFF8064CCE42F0, 1)] - m_uiDataRangeMode = 3070, updateDataRanges = 1, updateConstrainedDataRanges = 64, reportAllDataRanges = 0, a &amp; b = 512, b = 512\n</code></pre>\n\n<hr>\n\n<pre><code>typedef enum : UINT32\n{\n    None = 0,\n    UseDataRanges = 1 &lt;&lt; 0,\n    UseDiscreteDataRanges = 1 &lt;&lt; 1,\n    RaiseUpdateEvent = 1 &lt;&lt; 2,\n    RaiseUpdatePinDescriptor = 1 &lt;&lt; 3,\n    DoNotUpdateOriginalDescriptor = 1 &lt;&lt; 4,\n    UpdatePinDataRanges = 1 &lt;&lt; 5,\n    UpdatePinConstrainedDataRanges = 1 &lt;&lt; 6,\n    UseDataRangeIntersection = 1 &lt;&lt; 7,\n    UseProposedDataFormat = 1 &lt;&lt; 8,\n    ReportAllDataRanges = 1 &lt;&lt; 9,\n    DataRangeIntersectionAcceptAllRanges = 1 &lt;&lt; 10,\n    SupportedDataRangesFirst = 1 &lt;&lt; 11,\n} DataRangeModeEnum;\n</code></pre>\n\n<hr>\n\n<p>shouldnt</p>\n\n<pre><code>BOOLEAN value = 3070 &amp; 512;\n</code></pre>\n\n<p>evaluate to TRUE? (larger than zero)?</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 2999, "user_id": 2665890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1pvWd.png?s=128&g=1", "display_name": "Obicere", "link": "https://stackoverflow.com/users/2665890/obicere"}, "edited": false, "score": 0, "creation_date": 1486590476, "post_id": 42124177, "comment_id": 71416586, "body": "Is it possible that the first example, <code>314159265</code>, could produce the output: <code>31 41 59 265</code>? It seems like there could be many outputs for a single input. And if so, how would you choose which is the &#39;correct&#39; output?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1486590821, "post_id": 42124177, "comment_id": 71416741, "body": "<code>atoi</code> has a number of failure cases you are not checking. <code>stoi</code> or <code>strtol</code> may be better choices."}, {"owner": {"reputation": 33, "user_id": 7500641, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0G3emIdPO90/AAAAAAAAAAI/AAAAAAAAF98/LPxGag_27Ak/photo.jpg?sz=128", "display_name": "Uncblueguy", "link": "https://stackoverflow.com/users/7500641/uncblueguy"}, "reply_to_user": {"reputation": 2999, "user_id": 2665890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1pvWd.png?s=128&g=1", "display_name": "Obicere", "link": "https://stackoverflow.com/users/2665890/obicere"}, "edited": false, "score": 0, "creation_date": 1486591044, "post_id": 42124177, "comment_id": 71416857, "body": "@Obicere The first digit is supposed to stand by itself. Sorry i didn&#39;t include that."}, {"owner": {"reputation": 33, "user_id": 7500641, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0G3emIdPO90/AAAAAAAAAAI/AAAAAAAAF98/LPxGag_27Ak/photo.jpg?sz=128", "display_name": "Uncblueguy", "link": "https://stackoverflow.com/users/7500641/uncblueguy"}, "edited": false, "score": 0, "creation_date": 1486591617, "post_id": 42124177, "comment_id": 71417135, "body": "I tried <code>3141592653589793238</code> no zeroes and it still screwed up the end,  outputting <code>3 14 15 92 653 5899 9322 </code>. I also tried <code>stoi</code> and it gives the &quot;Not declared in this scope&quot; error code"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7500641, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0G3emIdPO90/AAAAAAAAAAI/AAAAAAAAF98/LPxGag_27Ak/photo.jpg?sz=128", "display_name": "Uncblueguy", "link": "https://stackoverflow.com/users/7500641/uncblueguy"}, "edited": false, "score": 0, "creation_date": 1486662207, "post_id": 42124504, "comment_id": 71452998, "body": "Thank you, the q++ helped, now it works fiine until the strings are over 6 groupings long, then it just doesnt output any thing over the sixth grouping."}, {"owner": {"reputation": 525, "user_id": 7531267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VVvK.png?s=128&g=1", "display_name": "Justin Hellreich", "link": "https://stackoverflow.com/users/7531267/justin-hellreich"}, "reply_to_user": {"reputation": 33, "user_id": 7500641, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0G3emIdPO90/AAAAAAAAAAI/AAAAAAAAF98/LPxGag_27Ak/photo.jpg?sz=128", "display_name": "Uncblueguy", "link": "https://stackoverflow.com/users/7500641/uncblueguy"}, "edited": false, "score": 0, "creation_date": 1486662886, "post_id": 42124504, "comment_id": 71453450, "body": "Yes, it seg faults because your <code>num</code> array is too small. Increasing the array size is a quick and dirty fix but do consider using vectors to avoid this issue. Also, just a suggestion: using more descriptive variable names will aid both you and anyone in debugging."}, {"owner": {"reputation": 33, "user_id": 7500641, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0G3emIdPO90/AAAAAAAAAAI/AAAAAAAAF98/LPxGag_27Ak/photo.jpg?sz=128", "display_name": "Uncblueguy", "link": "https://stackoverflow.com/users/7500641/uncblueguy"}, "edited": false, "score": 0, "creation_date": 1486675176, "post_id": 42124504, "comment_id": 71460490, "body": "Sorry, but I&#39;m not following. I didn&#39;t make a <code>num</code> array it is a string? Increasing the string size will have no effect."}, {"owner": {"reputation": 525, "user_id": 7531267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VVvK.png?s=128&g=1", "display_name": "Justin Hellreich", "link": "https://stackoverflow.com/users/7531267/justin-hellreich"}, "reply_to_user": {"reputation": 33, "user_id": 7500641, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0G3emIdPO90/AAAAAAAAAAI/AAAAAAAAF98/LPxGag_27Ak/photo.jpg?sz=128", "display_name": "Uncblueguy", "link": "https://stackoverflow.com/users/7500641/uncblueguy"}, "edited": false, "score": 0, "creation_date": 1486676574, "post_id": 42124504, "comment_id": 71461236, "body": "Well actually it is an array of strings (which probably isn&#39;t necessary since you could just use a single string). As I said, a quick fix would be to just increase the size (I bumped it to 40 to check), but this really isn&#39;t a good solution. See Sam&#39;s solution for a well thought out method."}], "tags": [], "owner": {"reputation": 525, "user_id": 7531267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VVvK.png?s=128&g=1", "display_name": "Justin Hellreich", "link": "https://stackoverflow.com/users/7531267/justin-hellreich"}, "is_accepted": false, "score": 0, "last_activity_date": 1486591432, "creation_date": 1486591432, "answer_id": 42124504, "question_id": 42124177, "link": "https://stackoverflow.com/questions/42124177/creating-a-sequence-of-numbers-from-a-string-of-digits-c/42124504#42124504", "title": "Creating a sequence of numbers from a string of digits C++", "body": "<p>Looks like you are missing a <code>q++</code> in your while loop:</p>\n\n<pre><code>while(n &lt; w) {\n   temp = temp + num[q];\n   n = atoi(temp.c_str());\n   p++;\n   a++;\n   q++;\n}\n</code></pre>\n\n<p>This is why the <strike>fourth</strike> third digit was being copied over.</p>\n\n<p>The <a href=\"https://en.wikipedia.org/wiki/Maximal_munch\" rel=\"nofollow noreferrer\">maximal munch algorithm</a> might give you some inspiration on a cleaner way to solve this problem. It is meant for tokenizing but it may help. Good luck!</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 7500641, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0G3emIdPO90/AAAAAAAAAAI/AAAAAAAAF98/LPxGag_27Ak/photo.jpg?sz=128", "display_name": "Uncblueguy", "link": "https://stackoverflow.com/users/7500641/uncblueguy"}, "edited": false, "score": 0, "creation_date": 1486692846, "post_id": 42125191, "comment_id": 71467099, "body": "Thank you for the help but I have to use old c++ and can&#39;t really follow what&#39;s happening in this code, I don&#39;t know what <code>auto</code> is or <code>push_back(str)</code>  does."}, {"owner": {"reputation": 441, "user_id": 3401653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2650772d725a121a778430183e80cfb3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Mokari", "link": "https://stackoverflow.com/users/3401653/sam-mokari"}, "reply_to_user": {"reputation": 33, "user_id": 7500641, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0G3emIdPO90/AAAAAAAAAAI/AAAAAAAAF98/LPxGag_27Ak/photo.jpg?sz=128", "display_name": "Uncblueguy", "link": "https://stackoverflow.com/users/7500641/uncblueguy"}, "edited": false, "score": 0, "creation_date": 1486704773, "post_id": 42125191, "comment_id": 71470452, "body": "You can use a simple array instead of vector and use char instead of auto. Easy!!!"}], "tags": [], "owner": {"reputation": 441, "user_id": 3401653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2650772d725a121a778430183e80cfb3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Mokari", "link": "https://stackoverflow.com/users/3401653/sam-mokari"}, "is_accepted": false, "score": 1, "last_activity_date": 1486594466, "creation_date": 1486594466, "answer_id": 42125191, "question_id": 42124177, "link": "https://stackoverflow.com/questions/42124177/creating-a-sequence-of-numbers-from-a-string-of-digits-c/42125191#42125191", "title": "Creating a sequence of numbers from a string of digits C++", "body": "<p>This code works. But do not forget that write a simple code and use the new style of C++ programming.</p>\n\n<pre><code>#include &lt;vector&gt;\nusing namespace std;\nvector&lt;string&gt;  Input( )\n{\n    string a;\n    cin &gt;&gt; a;\n    vector&lt;string&gt; num;\n    string current(\"-1\");\n    string str;\n    for(auto c : a)\n    {\n        str.append(1, c);\n        if (stoi(str) &gt; stoi(current) )\n        {\n            num.push_back(str);\n            current = str;\n            cout &lt;&lt; str &lt;&lt; \" \";\n            str = \"\";\n        }\n    }\n    cout &lt;&lt; endl;\n    return num;\n}\n\nint main() {\n    for (int i = 0; i&lt;5; i++) {\n        vector&lt;string&gt; num;\n        num = Input();\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7500641, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0G3emIdPO90/AAAAAAAAAAI/AAAAAAAAF98/LPxGag_27Ak/photo.jpg?sz=128", "display_name": "Uncblueguy", "link": "https://stackoverflow.com/users/7500641/uncblueguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1486600113, "creation_date": 1486590085, "last_edit_date": 1486600113, "question_id": 42124177, "link": "https://stackoverflow.com/questions/42124177/creating-a-sequence-of-numbers-from-a-string-of-digits-c", "title": "Creating a sequence of numbers from a string of digits C++", "body": "<p>I need to make a program where a user inputs a string of numbers.<br>\nIt then outputs the numbers grouped so that each grouping, separated by a space, is larger than the last when you put the numbers together.<br>\nIf the remaining digits together equal a sum smaller than the previous grouping they are omitted.<br>\nEx.:<br>\n<code>314159265</code> would output <code>3 14 15 92</code><br>\n<em>Here:   3 &lt; 14  &lt;15 &lt; 92 but 65 was omitted because it is less than 92</em></p>\n\n<p>or<br>\n<code>9876543210</code> would output <code>9 87 654 3210</code><br>\n<em>Here: 9 &lt; 87 &lt; 654 &lt; 3210</em>  </p>\n\n<p>It has to do this 5 times with strings 1-20 characters long.   </p>\n\n<p>My code works for shorter strings, ie the ones above, but when they are longer than around 12 characters the end output messes up. </p>\n\n<p>Ex.:\n<code>98765432101234567898</code> outputs <code>9 87 654 3211 12333</code> instead of <code>9 81 654 3210 12345 67898</code>\n<em>Here: 9 &lt; 87 &lt; 654 &lt; 3211 &lt; 12333 it should output 9 &lt; 87 &lt; 654 &lt; 3210 &lt; 12345 &lt; 67898</em></p>\n\n<p>I have no idea why it doesn't work with larger strings and any help would be greatly appreciated.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;iomanip&gt;\n#include&lt;math.h&gt;\n#include&lt;string&gt;\n#include&lt;stdlib.h&gt;\n\nusing namespace std;\n\nvoid input (string &amp;a,string num[20]){\n    string numfinal,temp;\n    cout&lt;&lt;\"Enter the string of numbers: \";\n    getline(cin, a);\n    int length=a.length();\n    for(int i=0;i&lt;length;i++){\n        num[i]=a.substr(i,1);\n    }\n\n    for(int r=0;r&lt;length;r++){\n        int n=atoi(temp.c_str());\n        int o=atoi(num[r].c_str());\n        int p=temp.length();\n        if((length-r&lt;=p)&amp;&amp;(o&lt;n)){\n        }\n        else if((o&gt;n)||(r==0)){\n            temp=num[r];\n            numfinal=numfinal+temp+\" \";\n        }\n        else if((o&lt;n)||(o=n)){\n            int w=n;\n            temp=num[r]+num[r+1];\n            n=atoi(temp.c_str());\n            if(n&lt;w){\n                int a=1;\n                int q=r+2;\n                while(n&lt;w){\n                    temp=temp+num[q];\n                    n=atoi(temp.c_str());\n                    p++;\n                    a++;\n                }\n                numfinal=numfinal+temp+\" \";\n                r=r+a;\n            }\n            else{\n                numfinal=numfinal+temp+\" \";\n                r++;\n            }\n        }\n    }\n    cout&lt;&lt;numfinal&lt;&lt;endl;\n}\n\nint main(){\n    string a;\n    string num[20];\n    for(int r=0;r&lt;5;r++){\n        input(a,num);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "constructor", "template-templates"], "comments": [{"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 0, "creation_date": 1486590732, "post_id": 42124140, "comment_id": 71416700, "body": "is there a reason that this happens?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1486590765, "post_id": 42124140, "comment_id": 71416717, "body": "Perhaps a <a href=\"http://stackoverflow.com/questions/25245453/what-is-a-nondeduced-context\">non-deduced context</a>?"}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1486590934, "post_id": 42124140, "comment_id": 71416799, "body": "The last error says <code>C&lt;A&gt; &amp;</code>, so I guess <code>A</code> is not deduced."}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1486591129, "post_id": 42124140, "comment_id": 71416896, "body": "I think <code>A</code> is fine; see <a href=\"http://ideone.com/eljdI9\" rel=\"nofollow noreferrer\">here</a> where I got some code to compile and run with <code>A</code>. The difference between my sample and yours is that <code>C</code> is templated on a concrete class (not another templated class). Perhaps that&#39;s the issue? Too many layers of templating causes the compiler to give up?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1486591720, "post_id": 42124140, "comment_id": 71417192, "body": "<a href=\"https://wg21.cmeerw.net/cwg/issue1286\" rel=\"nofollow noreferrer\">CWG Issue 1286</a>?"}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 0, "creation_date": 1486591880, "post_id": 42124140, "comment_id": 71417275, "body": "I found that if everything just take the type bundle (<code>T_b</code>) as the template parameter, the &quot;thing&quot; can work. This thing is fiendish."}], "answers": [{"comments": [{"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 0, "creation_date": 1486592556, "post_id": 42124672, "comment_id": 71417574, "body": "I am all confused when I look at this code, but I am happy that this can work. Just don&#39;t know why ..."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 0, "creation_date": 1486592961, "post_id": 42124672, "comment_id": 71417749, "body": "@rxu - it&#39;s only another level of templetization; the template argument for <code>D</code> is a template type with an argument that isn&#39;t a type but a template-template. So template argument of <code>D</code> is (if I can use this expression) a template-template-template with a template-template argument. My example (the specialization) show how extract the template-template argument of the argument of <code>D</code>. Isn&#39;t that clear ? :("}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 1, "last_activity_date": 1486592174, "creation_date": 1486592174, "answer_id": 42124672, "question_id": 42124140, "link": "https://stackoverflow.com/questions/42124140/cannot-call-constructor-template-template-parameter/42124672#42124672", "title": "Cannot call constructor (template-template parameter)", "body": "<p>I can't explain why your code gives an error.</p>\n\n<p>But if you want a solution... using a class specialization and a template template template parameter....</p>\n\n<pre><code>#include &lt;vector&gt;\n\ntemplate &lt;template&lt;typename T&gt; class Allocator_class&gt;\nclass T_b\n {\n   public:\n      template&lt;typename T&gt; using A = Allocator_class&lt;T&gt;;\n };\n\ntemplate &lt;template &lt;typename T&gt; class A&gt;\nclass C\n {\n   public:\n      C() { }\n };\n\ntemplate &lt;typename&gt;\nclass D;\n\ntemplate &lt;template &lt;template &lt;typename&gt; class&gt; class X,\n          template &lt;typename&gt; class A&gt;\nclass D&lt;X&lt;A&gt;&gt;\n {\n   public:\n      using Data = C&lt;A&gt;;\n\n      D (Data &amp; data) : _data(data) {}\n\n   private:\n      Data &amp; _data;\n };\n\nint main()\n {\n    typedef T_b&lt;std::allocator&gt; Ttb;    \n\n    C&lt;std::allocator&gt; b;\n\n    D&lt;Ttb&gt; c(b);\n }\n</code></pre>\n"}], "owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 1, "accepted_answer_id": 42124672, "answer_count": 1, "score": 3, "last_activity_date": 1486592439, "creation_date": 1486589986, "last_edit_date": 1486592439, "question_id": 42124140, "link": "https://stackoverflow.com/questions/42124140/cannot-call-constructor-template-template-parameter", "title": "Cannot call constructor (template-template parameter)", "body": "<p>Somehow I can't create an instance of <code>D</code>. I don't know why. The template-template parameter (<code>Allocator_class</code>) seems to be the problem.</p>\n\n<pre><code>#include &lt;vector&gt;\n\ntemplate &lt;template&lt;typename T&gt; class Allocator_class&gt;\nclass T_b {\npublic:\n    template&lt;typename T&gt; using A = Allocator_class&lt;T&gt;;\n};\n\ntemplate&lt; template &lt;typename T&gt; class A&gt;\nclass C {\npublic:\n    C() { }\n};\n\ntemplate&lt;typename Ttb&gt;\nclass D {\npublic:\n    template&lt;typename T&gt; using A = typename Ttb::template A&lt;T&gt;;\n    typedef C&lt;A&gt; Data;\n\n    D(C&lt;A&gt; &amp;data) : _data(data) {}\nprivate:\n    Data &amp;_data;\n};\n\nint main() {\n    typedef T_b&lt;std::allocator&gt; Ttb;    \n    C&lt;std::allocator&gt; b;\n    D&lt;Ttb&gt;c(b);\n}\n</code></pre>\n\n<p>Error from Clang:</p>\n\n<pre><code>test5.cpp:29:8: error: no matching constructor for initialization of 'D&lt;Ttb&gt;'\n      (aka 'D&lt;T_b&lt;std::allocator&gt; &gt;')\n        D&lt;Ttb&gt;c(b);\n              ^ ~\ntest5.cpp:16:7: note: candidate constructor (the implicit copy constructor) not viable: no known\n      conversion from 'C&lt;std::allocator&gt;' to 'const D&lt;T_b&lt;std::allocator&gt; &gt;' for 1st argument\nclass D {\n      ^\ntest5.cpp:16:7: note: candidate constructor (the implicit move constructor) not viable: no known\n      conversion from 'C&lt;std::allocator&gt;' to 'D&lt;T_b&lt;std::allocator&gt; &gt;' for 1st argument\nclass D {\n      ^\ntest5.cpp:21:5: note: candidate constructor not viable: no known conversion from 'C&lt;std::allocator&gt;'\n      to 'C&lt;A&gt; &amp;' for 1st argument\n    D(C&lt;A&gt; &amp;data) : _data(data) {}\n    ^\n</code></pre>\n"}, {"tags": ["c++", "mfc"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1486589964, "post_id": 42123991, "comment_id": 71416324, "body": "<i>&quot;But how does one actually get the character just typed?&quot;</i> - That&#39;s a wrong assumption. <code>EN_CHANGE</code> can be raised, when the user didn&#39;t type a character (e.g. pasting from the clipboard with the mouse). It&#39;s not clear, what problem you are really trying to solve. This question is asking about your proposed solution only."}, {"owner": {"reputation": 2671, "user_id": 1099237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1efff11270d3da94fe6be7d745c52da6?s=128&d=identicon&r=PG", "display_name": "omatai", "link": "https://stackoverflow.com/users/1099237/omatai"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1486591116, "post_id": 42123991, "comment_id": 71416887, "body": "You are right - that was a rhetorical question that I have edited out. Hopefully the question is clearer now."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 3, "creation_date": 1486591431, "post_id": 42123991, "comment_id": 71417042, "body": "You can trace into <code>UpdateData</code> to see exactly what it&#39;s doing and why it&#39;s failing. But calling <code>UpdateData</code> on every character input is an abuse of the system - even if you get it working, I would recommend using <code>GetWindowText</code> as you&#39;re currently doing."}, {"owner": {"reputation": 2671, "user_id": 1099237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1efff11270d3da94fe6be7d745c52da6?s=128&d=identicon&r=PG", "display_name": "omatai", "link": "https://stackoverflow.com/users/1099237/omatai"}, "edited": false, "score": 0, "creation_date": 1486592981, "post_id": 42123991, "comment_id": 71417759, "body": "Clearly <code>UpdateData()</code> is not the right thing to use in this particular context - that&#39;s fine. But I&#39;m really surprised that it seems to break completely as if <code>EN_CHANGE</code> is some kind of kryptonite to it. Since <code>UpdateData()</code> is used so liberally in the software I&#39;m using, I&#39;d like to understand what hidden traps there might be with it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1486652173, "post_id": 42123991, "comment_id": 71445938, "body": "@omatai I just tried exactly what you have described, and it works just fine here. Without seeing your actual source code (or at least the relevant parts suche as the .h file and the <code>DoDataExchange</code> function) it&#39;s somewhat hard to help."}, {"owner": {"reputation": 2671, "user_id": 1099237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1efff11270d3da94fe6be7d745c52da6?s=128&d=identicon&r=PG", "display_name": "omatai", "link": "https://stackoverflow.com/users/1099237/omatai"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1486682714, "post_id": 42123991, "comment_id": 71463985, "body": "@MichaelWalz - thanks. I have more pressing priorities right now than to dig into it, but it sounds like it is probably supposed to work, but something breaks it. I can only ever recall trying to use <code>EN_CHANGE</code> once or twice before, and always hitting this problem. I agree with Mark Ransom that <code>UpdateData()</code> is probably not the right thing to be using anyway, and that the answer lies in tracing into it. When my deadlines ease, I&#39;ll follow that path."}], "answers": [{"tags": [], "owner": {"reputation": 581, "user_id": 6065774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IuXLi.png?s=128&g=1", "display_name": "Mikitori", "link": "https://stackoverflow.com/users/6065774/mikitori"}, "is_accepted": false, "score": 0, "last_activity_date": 1487158362, "creation_date": 1487158362, "answer_id": 42248187, "question_id": 42123991, "link": "https://stackoverflow.com/questions/42123991/why-does-updatedata-not-work-in-en-change-handler-for-mfc-cedit-control/42248187#42248187", "title": "Why does UpdateData() not work in EN_CHANGE handler for MFC CEdit control", "body": "<p>If it's a rich edit, you need to call <code>SetEventMask(ENM_CHANGE)</code> on it, or the message will not be sent on edition.</p>\n"}], "owner": {"reputation": 2671, "user_id": 1099237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1efff11270d3da94fe6be7d745c52da6?s=128&d=identicon&r=PG", "display_name": "omatai", "link": "https://stackoverflow.com/users/1099237/omatai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 508, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487158362, "creation_date": 1486589444, "last_edit_date": 1486590739, "question_id": 42123991, "link": "https://stackoverflow.com/questions/42123991/why-does-updatedata-not-work-in-en-change-handler-for-mfc-cedit-control", "title": "Why does UpdateData() not work in EN_CHANGE handler for MFC CEdit control", "body": "<p>It seems like the simplest thing (using Visual Studio):</p>\n\n<ul>\n<li>Place an edit control (MFC <code>CEdit</code>) on a dialog</li>\n<li>Right click and choose \"Add variable...\"</li>\n<li>Link the control to a variable (e.g. CString someText)</li>\n<li>Right click on the control again and choose \"Add Event Handler...\"</li>\n<li>Click the \"Add and Edit\" button so it adds an <code>EN_CHANGE</code> event handler</li>\n<li>The class wizard generates a handler function like <code>OnEnChangeEdtSomeText()</code></li>\n</ul>\n\n<p>Terrific - each time a character is typed, the handler function is invoked. However, on all other events I have ever handled with MFC controls, <code>UpdateData()</code> would exchange data between the control and a variable linked to it - the state of the control is reflected in the state of the linked variable after <code>UpdateData()</code> is called. Why not here? Clearly I have to use something else, and so far <code>GetWindowText()</code> seems to work fine for retrieving the text I can see in the <code>CEdit</code> control.</p>\n\n<p>But why has the normal function of <code>UpdateData()</code> been destroyed? For example, if I type \"foo\" into my edit control, then click or tab away to kill focus, then return to type \"bar\", on none of the invocations of <code>OnEnChangeEdtSomeText()</code> (all 6 of them) does <code>UpdateData()</code> lead to any data whatsoever in the variable linked to it. Why not? Can I trust <code>EN_CHANGE</code> not to interfere with other data entry? Are there other notifications that will break what I had come to believe was the normal link between a control and a variable linked through a <code>DDX...</code> mechanism?</p>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1486589846, "post_id": 42123853, "comment_id": 71416270, "body": "There is no way that I know of to get this information through SFML, so you will have to keep track of it yourself.  If you have defined a standard order in which to draw your shapes, then the reverse of that will tell you what was drawn most recently.  For example, if you store a vector of shapes and simply draw by iterating over that vector, then you can iterate in reverse to determine which shape to grab."}], "answers": [{"tags": [], "owner": {"reputation": 337, "user_id": 2255454, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/71339f48876d2117ca7ac65307600b93?s=128&d=identicon&r=PG", "display_name": "codegenius", "link": "https://stackoverflow.com/users/2255454/codegenius"}, "is_accepted": true, "score": 0, "last_activity_date": 1488313704, "last_edit_date": 1488313704, "creation_date": 1486592702, "answer_id": 42124786, "question_id": 42123853, "link": "https://stackoverflow.com/questions/42123853/detect-last-drawn-shape/42124786#42124786", "title": "Detect Last Drawn Shape", "body": "<p>So I did something similar to what you said @0x5453</p>\n\n<p>In my window poll event I looped over my array of shapes and stored the array position of the shape which contained my mouse in its global bounds first. Then from there on I simply moved the shape in the array position I had noted. </p>\n\n<pre><code>for (size_t i = m_PlankObjects.size(); i-- &gt; 0;)\n{\n    if (m_PlankObjects[i].m_Shape.getGlobalBounds().contains(sf::Vector2f(sf::Mouse::getPosition(m_Game-&gt;m_Window))))\n    {\n        selectedObject = i;\n        break;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 2255454, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/71339f48876d2117ca7ac65307600b93?s=128&d=identicon&r=PG", "display_name": "codegenius", "link": "https://stackoverflow.com/users/2255454/codegenius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 42124786, "answer_count": 1, "score": 0, "last_activity_date": 1488313704, "creation_date": 1486588998, "last_edit_date": 1486634239, "question_id": 42123853, "link": "https://stackoverflow.com/questions/42123853/detect-last-drawn-shape", "title": "Detect Last Drawn Shape", "body": "<p>I'm creating a game in C++ using SFML but I ran into an issue with moving shapes using the mouse.</p>\n\n<p>I am drawing multiple shapes, each shape has it's own handle input method and when I handle the window event, I loop over a vector array and call the handle input method of each shape.</p>\n\n<pre><code>void Plank::HandleInput(sf::Event event)\n{\n    switch (event.type)\n    {\n    case sf::Event::MouseButtonPressed:\n    {\n        if (event.mouseButton.button == sf::Mouse::Button::Left)\n        {\n            m_MouseHold = true;\n            std::cout &lt;&lt; \"Left Press\\n\";\n        }\n\n        if (m_Shape.getGlobalBounds().contains(sf::Vector2f(sf::Mouse::getPosition(m_Game-&gt;m_Window))))\n        {\n            std::cout &lt;&lt; \"In Bounds\\n\";\n            m_MoveShape = true;\n        }\n        break;\n    }\n\n    case sf::Event::MouseButtonReleased:\n    {\n        m_MouseHold = false;\n        m_MoveShape = false;\n        break;\n    }\n\n    case sf::Event::MouseMoved:\n    {\n        if (m_MoveShape)\n        {\n            std::cout &lt;&lt; \"Move Shape\\n\";\n            m_Shape.setPosition(sf::Vector2f(sf::Mouse::getPosition(m_Game-&gt;m_Window)));\n        }\n        break;\n    }\n\n    default: break;\n    }\n}\n</code></pre>\n\n<p>The issue is that if two shapes overlap and you click on where the shapes intersect you can move both shapes.</p>\n\n<p>I want to only be able to move the shape which is on top, but I couldn't figure out how after some thinking and research.</p>\n"}, {"tags": ["c#", "c++", "c", "algorithm"], "comments": [{"owner": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "edited": false, "score": 0, "creation_date": 1486588272, "post_id": 42123653, "comment_id": 71415435, "body": "This is both C# and C?"}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "reply_to_user": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "edited": false, "score": 0, "creation_date": 1486588313, "post_id": 42123653, "comment_id": 71415460, "body": "@chrisaycock And Java and C++, apparently."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1486588334, "post_id": 42123653, "comment_id": 71415478, "body": "too bad that we can only stuff 5 language tags in a question. python came to mind too."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1486588353, "post_id": 42123653, "comment_id": 71415487, "body": "Emprically, with a large number of samples."}, {"owner": {"reputation": 43527, "user_id": 98094, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VkdLW.jpg?s=128&g=1", "display_name": "Icemanind", "link": "https://stackoverflow.com/users/98094/icemanind"}, "edited": false, "score": 0, "creation_date": 1486588505, "post_id": 42123653, "comment_id": 71415564, "body": "I think the answer to your question is here: <a href=\"http://stackoverflow.com/questions/109023/how-to-count-the-number-of-set-bits-in-a-32-bit-integer\" title=\"how to count the number of set bits in a 32 bit integer\">stackoverflow.com/questions/109023/&hellip;</a>"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1486588507, "post_id": 42123653, "comment_id": 71415568, "body": "The more common solution is this: <a href=\"https://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetParallel\" rel=\"nofollow noreferrer\">graphics.stanford.edu/~seander/&hellip;</a>"}, {"owner": {"reputation": 907, "user_id": 5617152, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g-d8oZWjJps/AAAAAAAAAAI/AAAAAAAAAEQ/d6WL36JzvLs/photo.jpg?sz=128", "display_name": "Dave S", "link": "https://stackoverflow.com/users/5617152/dave-s"}, "edited": false, "score": 0, "creation_date": 1486588570, "post_id": 42123653, "comment_id": 71415607, "body": "I mentioned in my question, that I would like to estimate based on the code which method is faster before performing a test such as calling the functions a  million times (for example)"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 1, "creation_date": 1486588608, "post_id": 42123653, "comment_id": 71415637, "body": "I might be proven wrong, but I very much doubt you can really eyeball this for a real system. it depends too much on what the compiler does and microarchitectural details."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1486588615, "post_id": 42123653, "comment_id": 71415641, "body": "in that case you may consider disassembling the compiled code, would be closer to the machine like that."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1486588922, "post_id": 42123653, "comment_id": 71415811, "body": "the answer to this is to benchmark them;."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1486589587, "post_id": 42123653, "comment_id": 71416149, "body": "probably a more elegant version of 2: <a href=\"https://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetKernighan\" rel=\"nofollow noreferrer\">graphics.stanford.edu/~seander/&hellip;</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486594063, "post_id": 42123653, "comment_id": 71418234, "body": "Search the web for &quot;bit twiddling counting&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 907, "user_id": 5617152, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g-d8oZWjJps/AAAAAAAAAAI/AAAAAAAAAEQ/d6WL36JzvLs/photo.jpg?sz=128", "display_name": "Dave S", "link": "https://stackoverflow.com/users/5617152/dave-s"}, "edited": false, "score": 0, "creation_date": 1486590366, "post_id": 42124062, "comment_id": 71416528, "body": "Please look at the last line in my question.  Yes I know that lookup tables can be faster, but I purposely avoided them for this question."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 907, "user_id": 5617152, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g-d8oZWjJps/AAAAAAAAAAI/AAAAAAAAAEQ/d6WL36JzvLs/photo.jpg?sz=128", "display_name": "Dave S", "link": "https://stackoverflow.com/users/5617152/dave-s"}, "edited": false, "score": 0, "creation_date": 1486591968, "post_id": 42124062, "comment_id": 71417311, "body": "@DaveS - The optimal solution is different for various number of bits expected to be set. A table, going through all bytes, might be good if you have -say- 28 bits set on average. If you usually only have one bit, or three, chqrlie&#39;s first code will be much faster (and not use any cache space or the lookup table)."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1486593103, "post_id": 42124062, "comment_id": 71417816, "body": "dont see how u can have 28 bits set in a byte. Max gotta be 8. 256 byte lookup table doesnt take a lot of space or cache lines"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1486593829, "post_id": 42124062, "comment_id": 71418137, "body": "@pm100 - He is counting the bits in an <code>unsigned long</code>, so he would have to loop over the bytes (or have the world&#39;s largest lookup table :-). Looking up the numbers byte by byte would need 8 (or 4?) rounds in a loop, while removing one bit at a time could get away with 3 rounds for 3 bits."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1486594025, "post_id": 42124062, "comment_id": 71418219, "body": "it would be interesting to do a timing comparison :-)"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 0, "last_activity_date": 1486589725, "creation_date": 1486589725, "answer_id": 42124062, "question_id": 42123653, "link": "https://stackoverflow.com/questions/42123653/how-to-figure-out-which-is-the-fastest-algorithm/42124062#42124062", "title": "How to figure out which is the fastest algorithm", "body": "<p>first, the only way to know how fast things are is to measure them.</p>\n\n<p>Second - to find the number of set bits in some bytes, build a lookup table for the number of set bits in a byte</p>\n\n<pre><code>0-&gt;0\n1-&gt;1\n2-&gt;1\n3-&gt;2\n4-&gt;1\n\netc.\n</code></pre>\n\n<p>This is a common method and very fast</p>\n\n<p>You can code it by hand or create it at startup</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1486592005, "last_edit_date": 1486592005, "creation_date": 1486590283, "answer_id": 42124228, "question_id": 42123653, "link": "https://stackoverflow.com/questions/42123653/how-to-figure-out-which-is-the-fastest-algorithm/42124228#42124228", "title": "How to figure out which is the fastest algorithm", "body": "<p>The second algorithm can be greatly simplified:</p>\n\n<pre><code>int CountNumSetBitsMethod2(unsigned long n) {\n    unsigned short num_setbits = 0;\n    while (n) {\n        num_setbits++;\n        n &amp;= n - 1;\n    }\n    return num_setbits;\n}\n</code></pre>\n\n<p>There are many more ways to compute the number of bits set in a word:</p>\n\n<ul>\n<li>Using lookup tables for mutiple bits at a time</li>\n<li>Using 64-bit multiplications</li>\n<li>Using parallel addition</li>\n<li>Using extra tricks to shave a few cycles.</li>\n</ul>\n\n<p>Trying to determine empirically which is faster by counting cycles is not so easy because even looking at the assembly output, it is difficult to assess the impact of instruction parallelisation, pipelining, branch prediction, register renaming and contention... Modern CPUs are <strong>very</strong> sophisticated!  Furthermore, the actual code generated depends on the compiler version and configuration and the timings depend on the CPU type and release... Not to mention the variability linked to the particular sets of values used (for algorithms with variable numbers of instructions).</p>\n\n<p>Benchmarking is a necessary tool, but even careful benchmarking may fail to model the actual usage correctly.</p>\n\n<p>Here is a great site for this kind of bit twiddling games:</p>\n\n<p><a href=\"http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive\" rel=\"nofollow noreferrer\">http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive</a></p>\n\n<p>I suggest you implement the different versions and perform comparative benchmarks on your system.  There is no definite answer, only local optima for specific sets of conditions.</p>\n\n<p>Some amazing finds:</p>\n\n<pre><code>// option 3, for at most 32-bit values in v:\nc =  ((v &amp; 0xfff) * 0x1001001001001ULL &amp; 0x84210842108421ULL) % 0x1f;\nc += (((v &amp; 0xfff000) &gt;&gt; 12) * 0x1001001001001ULL &amp; 0x84210842108421ULL) % \n     0x1f;\nc += ((v &gt;&gt; 24) * 0x1001001001001ULL &amp; 0x84210842108421ULL) % 0x1f;\n</code></pre>\n\n<p>A more classic one, usually considered the best method for counting bits in a 32-bit integer v:</p>\n\n<pre><code>v = v - ((v &gt;&gt; 1) &amp; 0x55555555);                    // reuse input as temporary\nv = (v &amp; 0x33333333) + ((v &gt;&gt; 2) &amp; 0x33333333);     // temp\nc = ((v + (v &gt;&gt; 4) &amp; 0xF0F0F0F) * 0x1010101) &gt;&gt; 24; // count\n</code></pre>\n"}], "owner": {"reputation": 907, "user_id": 5617152, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g-d8oZWjJps/AAAAAAAAAAI/AAAAAAAAAEQ/d6WL36JzvLs/photo.jpg?sz=128", "display_name": "Dave S", "link": "https://stackoverflow.com/users/5617152/dave-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "closed_date": 1486592305, "answer_count": 2, "score": -2, "last_activity_date": 1486592005, "creation_date": 1486588201, "last_edit_date": 1486589522, "question_id": 42123653, "link": "https://stackoverflow.com/questions/42123653/how-to-figure-out-which-is-the-fastest-algorithm", "closed_reason": "Needs more focus", "title": "How to figure out which is the fastest algorithm", "body": "<p>In counting the number of bits in a word, a brute force would be something like this:</p>\n\n<pre><code>int CountNumSetBits(unsigned long n)\n{\n    unsigned short num_setbits = 0;\n    while (n)\n    {\n        num_setbits += n &amp; 1;\n        n &gt;&gt;= 1;\n    }\n    return num_setbits;\n}\n</code></pre>\n\n<p>The big O speed would be O(n) where n is the number of bits in the Word.</p>\n\n<p>I thought of another way of writing the algorithm taking advantage of the fact that we an optain the first occurance of a set bit using y = x&amp;~(x-1)</p>\n\n<pre><code>int CountNumSetBitsMethod2(unsigned long n)\n{\n    unsigned short num_setbits = 0;\n    int y = 0;\n    while (n)\n    {\n        y = n&amp; ~(n - 1); // get first occurrence of '1'\n        if (y) // if we have a set bit inc our counter\n            ++num_setbits;\n        n ^=y;  // erase the first occurrence of '1'\n    }\n    return num_setbits;\n}\n</code></pre>\n\n<p>If we assume that are inputs are 50% 1's and 50% 0's it appears that the second algorithm could be twice as fast. However, the actual complexity is greater:</p>\n\n<p>In method one we do the following for each bit:\n1 add\n1 and\n1 shift</p>\n\n<p>In method two we do the following for each set bit:\n1 and\n1 complement\n1 subtraction (the result of the subtraction has to be copied to another reg)\n1 compare\n1 increment (if compare is true)\n1 XOR</p>\n\n<p>Now, in practice one can determine which algorithm is faster by performing some profiling. That is, using a stop watch mechanism and some test data and call each algorithm say a million times.</p>\n\n<p>What I want to do first, however, is see how well I can estimate the speed difference by eyeballing the code (given same number of set and unset bits).</p>\n\n<p>If we assume that the subtraction takes the same amount cycles as the add (approximately), and all the other operations are equal cycle wise, can one conclude that each algorithm takes about the same amount of time?</p>\n\n<p>Note: I am assuming here we cannot use lookup tables.</p>\n"}, {"tags": ["c++", "objective-c", "c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1486588050, "post_id": 42123595, "comment_id": 71415317, "body": "&quot;T...EX...T.M.E.SS.A.G.EE..&quot; has 26 chars. Your counter goes up to 31."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1486588081, "post_id": 42123595, "comment_id": 71415332, "body": "How long is <code>secret</code>? And how many elements you are trying to index in the loop?"}, {"owner": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "edited": false, "score": 0, "creation_date": 1486588091, "post_id": 42123595, "comment_id": 71415337, "body": "Well for starters, <code>secret</code> has 26 characters in it, but you iterate through 31."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1486588106, "post_id": 42123595, "comment_id": 71415345, "body": "@EugeneSh. <code>secret</code> is defined above, and is surprisingly ... too short."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1486588207, "post_id": 42123595, "comment_id": 71415399, "body": "@Jean-Fran&#231;oisFabre It was a rhetorical question :) To trigger the thinking process."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1486588217, "post_id": 42123595, "comment_id": 71415407, "body": "also <code>pow(2,counter)</code> is a float. You should multiply-accumulate by 2 or lshift in your loop so you get the integer computation for free."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1486588299, "post_id": 42123595, "comment_id": 71415448, "body": "<code>long lnum=counter==0?1:pow(2,counter);</code> ==&gt; <code>long lnum = 1 &lt;&lt; counter;</code>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1486588333, "post_id": 42123595, "comment_id": 71415476, "body": "And don&#39;t abuse the ternary operator."}, {"owner": {"reputation": 11, "user_id": 7536256, "user_type": "registered", "profile_image": "https://graph.facebook.com/1839707112965866/picture?type=large", "display_name": "Shariar Islam", "link": "https://stackoverflow.com/users/7536256/shariar-islam"}, "edited": false, "score": 0, "creation_date": 1486588335, "post_id": 42123595, "comment_id": 71415479, "body": "sorry secret variable should be &quot;D....E.AD.B...E.E.F....F!.X..2..&quot;"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1486588722, "post_id": 42123595, "comment_id": 71415704, "body": "<a href=\"http://ideone.com/XNfAyU\" rel=\"nofollow noreferrer\">cannot reproduce</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486594616, "post_id": 42123595, "comment_id": 71418489, "body": "If you declared the <code>secret</code> text as an array, you could use <code>sizeof(secret) - 1</code> instead of the constant 3` in you <code>for</code> loop."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486594766, "post_id": 42123595, "comment_id": 71418559, "body": "This statement is bothering me: <code>charec==46?funca(a,lnum):NULL;</code>.  Your code would be much clearer if you used <code>if (charec == &#39;.&#39;) {funca(a,lnum);}</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486594833, "post_id": 42123595, "comment_id": 71418588, "body": "Your code may be more efficient if you used <code>(1 &lt;&lt; counter)</code> instead of <code>pow(2, counter)</code>.  Some compiler may optimize this at higher optimization settings."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486594875, "post_id": 42123595, "comment_id": 71418606, "body": "If you need to use <code>#define</code> to shorten types, take a keyboarding / typing class."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7536256, "user_type": "registered", "profile_image": "https://graph.facebook.com/1839707112965866/picture?type=large", "display_name": "Shariar Islam", "link": "https://stackoverflow.com/users/7536256/shariar-islam"}, "edited": false, "score": 0, "creation_date": 1486589927, "post_id": 42123851, "comment_id": 71416306, "body": "Thanks for the suggestions  :D"}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1486588979, "creation_date": 1486588979, "answer_id": 42123851, "question_id": 42123595, "link": "https://stackoverflow.com/questions/42123595/getting-segmentation-fault-when-using-pow-xor-or-pointer-in-c/42123851#42123851", "title": "Getting Segmentation fault when using pow, XOR or pointer in C", "body": "<p>You have a null pointer</p>\n\n<pre><code>unsint *a = 0;\n</code></pre>\n\n<p>and you never point <code>a</code> at anything, so when you dereference it, you crash.</p>\n\n<p>You should also not throw floating point into the mix (<code>pow(2,0)</code> is 1, by the way, so you don't need a special case), and you shouldn't abuse the ternary operator or use non-portable ASCII codes when you can use portable character literals.</p>\n\n<p>I suggest something like this:</p>\n\n<pre><code>int main() {\n    unsigned int a = 0;\n    for (unsigned int counter = 0; counter &lt;= 31; counter++) {\n        if (secret[counter] == '.') {\n            a ^= 1 &lt;&lt; counter;\n        }\n    }\n    printf(\"\\nresult: %u\\n\",a);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7536256, "user_type": "registered", "profile_image": "https://graph.facebook.com/1839707112965866/picture?type=large", "display_name": "Shariar Islam", "link": "https://stackoverflow.com/users/7536256/shariar-islam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 42123851, "answer_count": 1, "score": -4, "last_activity_date": 1486591394, "creation_date": 1486587971, "last_edit_date": 1486591394, "question_id": 42123595, "link": "https://stackoverflow.com/questions/42123595/getting-segmentation-fault-when-using-pow-xor-or-pointer-in-c", "title": "Getting Segmentation fault when using pow, XOR or pointer in C", "body": "<p>Can anyone please explain what's wrong? am just getting Segmentation fault. am using \"gcc code.c -o code -lm\" to compile it.</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef unsigned int unsint;\nconst char* secret=\"E...EA...WSC..OP.S.EE.SSA.C....A\";\n\nvoid funca(unsint* a, unsint b) {*a^=b;}\n\nint main() {   \n        unsint *a = 0;\n        for (int counter=0;counter&lt;=31;counter++) {\n                char charec=secret[counter];  \n                long lnum=counter==0?1:pow(2,counter);\n                charec==46?funca(a,lnum):NULL;\n        }\n        printf(\"\\nresult: %u\\n\",a);\n        return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "enums"], "answers": [{"comments": [{"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1486588752, "post_id": 42123588, "comment_id": 71415720, "body": "Hey that&#39;s brilliant.  I came up with something based on this idea."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 3, "last_activity_date": 1486587947, "creation_date": 1486587947, "answer_id": 42123588, "question_id": 42123397, "link": "https://stackoverflow.com/questions/42123397/how-can-i-convert-an-enum-to-a-string-automatically/42123588#42123588", "title": "How can I convert an enum to a string automatically", "body": "<p>You can't convert an <code>enum</code> to text or text to <code>enum</code> <em>automatically</em>, as <code>enum</code> identifiers only exist during compilation and not during run-time.  </p>\n\n<p>The best methods are table lookup or <code>std::map</code>.  </p>\n\n<p>I use a table lookup since I can make the table <code>static</code> and <code>const</code> and have it initialized before <code>main</code>.</p>\n\n<pre><code>struct Enum_Entry\n{\n  int enum_value;\n  const char * enum_text;\n};\n\nstatic const Enum_Entry enum_table[] = \n{\n  {GT_UNKNOWN, \"GT_UNKNOWN\"},\n  //...\n};\nstatic const unsigned int table_capacity =\n    sizeof(enum_table) / sizeof(enum_table[0]);\n</code></pre>\n\n<p>By having both the <code>enum</code> value and the text in the same table, the one table can be used for converting text to <code>enum</code> and <code>enum</code> to text.<br>\nWhen using a <code>std::map</code>, one of the conversion directions is not very efficient.  </p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1486589089, "last_edit_date": 1486589089, "creation_date": 1486588737, "answer_id": 42123792, "question_id": 42123397, "link": "https://stackoverflow.com/questions/42123397/how-can-i-convert-an-enum-to-a-string-automatically/42123792#42123792", "title": "How can I convert an enum to a string automatically", "body": "<p>In C, at least, you can use a variant on your proposed solution that does not require your enum values to be without holes or to be expressed in order.  C has designated initializers by which you can initialize specified elements of your array.  To wit:</p>\n\n<pre><code>#define STRINGIFY(x) #x\n\nenum c { X, Y = 3, Z = 1 };\n\nstatic const char * E_NAME[] = {\n   [X] = STRINGIFY(X),\n   [Y] = STRINGIFY(Y),\n   [Z] = STRINGIFY(Z)\n};\n\nconst char *e_name(enum c x) {\n    return E_NAME[x];\n}\n</code></pre>\n\n<p>If you want to avoid repeating the list of enum constants, that would be amenable to an X macro treatment:</p>\n\n<pre><code>#define STRINGIFY(x) #x\n\n#define ENUM_ELEMENTS E(X,), E(Y,=3), E(Z,=1)\n\n#define E(c, i) c i\nenum c {\n    ENUM_ELEMENTS\n};\n#undef E\n\n#define E(c, i) [c] = STRINGIFY(c)\nstatic const char *E_NAME[] = {\n    ENUM_ELEMENTS\n};\n#undef E\n\nconst char *e_name(enum c x) {\n    return E_NAME[x];\n}\n</code></pre>\n\n<p>Whether the X macro version helps is debatable; certainly it would be more of an advantage if the number of enum elements were greater.</p>\n"}, {"comments": [{"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1486589213, "post_id": 42123836, "comment_id": 71415958, "body": "The problem with this is I&#39;d be meddling with or redefining an existing header.  This is a lot of work when the header is already very large.  The enum is already defined in the SDK header file so I&#39;ll get errors right off the bat."}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1486590735, "post_id": 42123836, "comment_id": 71416702, "body": "Sorry about the accidental edit.  But thanks for you answer.  It could still prove useful for someone."}], "tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": false, "score": 1, "last_activity_date": 1486590672, "last_edit_date": 1486590672, "creation_date": 1486588911, "answer_id": 42123836, "question_id": 42123397, "link": "https://stackoverflow.com/questions/42123397/how-can-i-convert-an-enum-to-a-string-automatically/42123836#42123836", "title": "How can I convert an enum to a string automatically", "body": "<p>You can build this in this way:</p>\n\n<pre><code>#define NODEGRAPHTYPES \\\n    NODE_GRAPH_TYPE(GT_UNKNOWN          , 0)\\\n    NODE_GRAPH_TYPE(GT_STANDARD         , 1)\\\n    NODE_GRAPH_TYPE(GT_APP_SETTINGS     , 3)\\\n    NODE_GRAPH_TYPE(GT_GEOMETRYARCHIVE  , 2)\\\n    NODE_GRAPH_TYPE(GT_SCRIPTED         , 5)\\\n    NODE_GRAPH_TYPE(GT_SCRIPT_STORAGE   , 6)\\\n    NODE_GRAPH_TYPE(GT_PROJECT_SETTINGS , 4)\n</code></pre>\n\n<p>Then you can re-use this when defining an enum, and when defining the enum-to-text conversion like so:</p>\n\n<pre><code>enum NodeGraphType {\n#define NODE_GRAPH_TYPE(NAME, VALUE) NAME = VALUE,\n    NODEGRAPHTYPES\n#undef NODE_GRAPH_TYPE\n};\n\nstatic const char *NodeGraphName(enum NodeGraphType type)\n{\n    switch (type) {\n#define NODE_GRAPH_TYPE(NAME, VALUE) case NAME: return #NAME;\n        NODEGRAPHTYPES\n#undef NODE_GRAPH_TYPE\n    }\n    return \"*Unknown*\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 0, "last_activity_date": 1486597465, "creation_date": 1486597465, "answer_id": 42125729, "question_id": 42123397, "link": "https://stackoverflow.com/questions/42123397/how-can-i-convert-an-enum-to-a-string-automatically/42125729#42125729", "title": "How can I convert an enum to a string automatically", "body": "<p>Your existing header file can be leveraged to generate an X-macro like file. It is relatively easy to generate an intermediate file that consists of just has the <code>NODE_GRAPH_TYPE</code> lines based on the example you have provided.</p>\n\n<pre><code>grep '^ *NODE_GRAPH_TYPE' node_graph.h &gt; node_graphs.x\n</code></pre>\n\n<p>Then, you can create a include this intermediate file with your own definition of <code>NODE_GRAPH_TYPE</code> to define your table the way you want. Below illustrates the function call as in your first example.</p>\n\n<pre><code>static const char * NODE_GRAPH_NAME(enum NodeGraphType)\n{\n    switch(type)\n    {\n#   define NODE_GRAPH_TYPE(x, y) case x: return #x;\n#   include \"node_graphs.x\"\n#   undef NODE_GRAPH_TYPE\n    default: break;\n    }\n    return NULL;\n}\n</code></pre>\n"}], "owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 42123588, "answer_count": 4, "score": 1, "last_activity_date": 1486597465, "creation_date": 1486587250, "last_edit_date": 1495541345, "question_id": 42123397, "link": "https://stackoverflow.com/questions/42123397/how-can-i-convert-an-enum-to-a-string-automatically", "title": "How can I convert an enum to a string automatically", "body": "<p>This is an extension of the following <a href=\"https://stackoverflow.com/questions/9907160/how-to-convert-enum-names-to-string-in-c\">question</a> which already has great answers.</p>\n\n<p>However, in all answers where the expansion is carried out by the pre-processor the enums are declared in a special way under the same project.\nBut what if the header file that declares these enums is not your own or the enums are declared out of id order.</p>\n\n<p>In my case, I have an SDK that I'm using where large tables of enums are already declared in a separate header file like the following:</p>\n\n<pre><code>#define NODE_GRAPH_TYPE(_name, _enum)   _name = _enum,\nenum NodeGraphType\n{\n    // next available ID value is 7\n    NODE_GRAPH_TYPE(GT_UNKNOWN          , 0)\n    NODE_GRAPH_TYPE(GT_STANDARD         , 1)\n    NODE_GRAPH_TYPE(GT_APP_SETTINGS     , 3)\n    NODE_GRAPH_TYPE(GT_GEOMETRYARCHIVE  , 2)\n    NODE_GRAPH_TYPE(GT_SCRIPTED         , 5)\n    NODE_GRAPH_TYPE(GT_SCRIPT_STORAGE   , 6)\n    NODE_GRAPH_TYPE(GT_PROJECT_SETTINGS , 4)\n};\n</code></pre>\n\n<p>What I want to do is to try to avoid is this type of thing:</p>\n\n<pre><code>function NODE_GRAPH_NAME(int type)\n{\n  switch(type)\n  {\n    case: GT_PROJECT_SETTINGS:\n      return \"GT_PROJECT_SETTINGS\";\n    // ...\n  };\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>static const char* NODE_GRAPH_NAME[] = {\n  \"GT_UNKNOWN\",\n  /// ...    \n}\n</code></pre>\n\n<p>The best I've come up with this this so far:</p>\n\n<pre><code>#define STRINGIFY(_x) #_x\n\nstatic const char* NODE_GRAPH_NAME[] = {\n  STRINGIFY(GT_UNKNOWN),\n  STRINGIFY(GT_STANDARD),\n  STRINGIFY(GT_GEOMETRYARCHIVE),\n  STRINGIFY(GT_APP_SETTINGS)\n  // etc\n};\n</code></pre>\n\n<p>But it still requires me to duplicate all the tables of enums and not only that, but them in order and double check there are no holes.  </p>\n\n<p>Is there perhaps a more elegant and automated way to go about this?\nIf it helps, I'm actually compiling this under C++. But the library I'm linking to is pure C.  So you could do something fancy with templates perhaps.</p>\n\n<hr>\n\n<p><strong>Based on Thomas Matthews answer below, this is what I came up with the following:</strong></p>\n\n<p>Which isn't entirely automatic, but isn't too difficult to work with.\nIn redefining NODE_GRAPH_TYPE I can copy verbatim the table from the SDK header and place it into the NODE_GRAPH_TYPES table definition.\nAnd it works.  Then I can create a lookup function to locate the item I require.  The nice thing about this is that holes don't matter and neither do out of order definitions.</p>\n\n<pre><code>#undef NODE_GRAPH_TYPE\n#define NODE_GRAPH_TYPE(_name, _enum) { _enum, #_name },\n\nstatic const Enum_Entry NODE_GRAPH_TYPES[] = \n{\n   NODE_GRAPH_TYPE(GT_UNKNOWN          , 0)\n\n    NODE_GRAPH_TYPE(GT_STANDARD         , 1)\n    NODE_GRAPH_TYPE(GT_APP_SETTINGS     , 3)\n    NODE_GRAPH_TYPE(GT_GEOMETRYARCHIVE  , 2)\n    NODE_GRAPH_TYPE(GT_SCRIPTED         , 5)\n    NODE_GRAPH_TYPE(GT_SCRIPT_STORAGE   , 6)\n    NODE_GRAPH_TYPE(GT_PROJECT_SETTINGS , 4)\n};\n\nstatic const unsigned int NODE_GRAPH_TYPES_COUNT = \n    sizeof(NODE_GRAPH_TYPES) / sizeof(NODE_GRAPH_TYPES[0]);\n\nconst char* NODE_GRAPH_TYPE_NAME(int id)\n{    \n    for (int i = 0; i &lt; NODE_GRAPH_TYPES_COUNT; ++i){\n        if (PIN_TYPES[i].enum_value == id)\n            return PIN_TYPES[i].enum_text;\n    }\n    return \"Unknown\";\n} \n</code></pre>\n"}, {"tags": ["c++", "xcode", "c++11"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1486586936, "post_id": 42123288, "comment_id": 71414685, "body": "what is the <code>!!</code>? Pretty sure it&#39;s not valid C++"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1486587039, "post_id": 42123288, "comment_id": 71414741, "body": "You have a freaky character after the <code>{</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1486587267, "post_id": 42123288, "comment_id": 71414865, "body": "From what you posted, you should be getting an error message about <code>MonsterType</code> not being defined."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1486587376, "post_id": 42123288, "comment_id": 71414921, "body": "If it&#39;s not the freaky character, do you have this code in a <code>.mm</code>-file? A <code>.m</code>-file would not permit to mix objective-c with c++."}, {"owner": {"reputation": 3, "user_id": 4318096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HDG4j.jpg?s=128&g=1", "display_name": "ascar", "link": "https://stackoverflow.com/users/4318096/ascar"}, "edited": false, "score": 0, "creation_date": 1486630202, "post_id": 42123288, "comment_id": 71430731, "body": "Thanks! I retyped that out and it compiled. I couldn&#39;t see that character in Xcode :| So strange"}], "owner": {"reputation": 3, "user_id": 4318096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HDG4j.jpg?s=128&g=1", "display_name": "ascar", "link": "https://stackoverflow.com/users/4318096/ascar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486586851, "creation_date": 1486586851, "last_edit_date": 1495541822, "question_id": 42123288, "link": "https://stackoverflow.com/questions/42123288/xcode-c11-compilation-issues", "title": "Xcode C++11 compilation issues", "body": "<p>Im new to C++ and am working my way through www.learncpp.com. Xcode is raising an error with a struct declaration:</p>\n\n<pre><code>struct Monster{\u0013\n\nint health;\nstd::string name;\nMonsterType type;\n};\n</code></pre>\n\n<p>The error raised is:  <strong><em>Expected member name or ';' after declaration specifiers</em></strong> and is pointed at the first line <code>struct...</code>. This code compiles fine with Visual Studio 2015. I have setup my build settings according to <a href=\"https://stackoverflow.com/a/39522270/4318096%20%22this&#39;\">this</a> so it should be C++11 compatible. What could be going wrong? Some have suggested it is clang.</p>\n"}, {"tags": ["c++", "arrays", "bit"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486586786, "post_id": 42123099, "comment_id": 71414614, "body": "Since when is 0b00000001 valid numeric notation?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1486586860, "post_id": 42123099, "comment_id": 71414645, "body": "Prefer to use <code>std::string</code> than character arrays.  Character arrays suffer from buffer overrun and their size cannot be easily changed."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486586934, "post_id": 42123099, "comment_id": 71414684, "body": "I don&#39;t understand.  If you have the value as <code>number::number</code>, why not subtract the two <code>number::number</code> fields, then convert the result to a textual binary version?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486586995, "post_id": 42123099, "comment_id": 71414721, "body": "Off-topic:  Having a member name the same as a structure name is not an ideal programming practice; it can lead to confusion and typos."}, {"owner": {"reputation": 35, "user_id": 7536704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23c8d7fe703b153f483a69de6104a404?s=128&d=identicon&r=PG&f=1", "display_name": "xLukasbx", "link": "https://stackoverflow.com/users/7536704/xlukasbx"}, "edited": false, "score": 0, "creation_date": 1486587107, "post_id": 42123099, "comment_id": 71414781, "body": "I know that this algorithm subtraction is not completely and not work correctly but I would like store score in char array."}, {"owner": {"reputation": 35, "user_id": 7536704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23c8d7fe703b153f483a69de6104a404?s=128&d=identicon&r=PG&f=1", "display_name": "xLukasbx", "link": "https://stackoverflow.com/users/7536704/xlukasbx"}, "edited": false, "score": 0, "creation_date": 1486587175, "post_id": 42123099, "comment_id": 71414819, "body": "Thomas Matthews: Thank you advice in practice good programming!"}, {"owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486590116, "post_id": 42123099, "comment_id": 71416396, "body": "@ThomasMatthews ehm... since c++14"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486590372, "post_id": 42123887, "comment_id": 71416534, "body": "using <code>#define</code> on a keyword is undefined behaviour. <code>bool</code>, <code>true</code> and <code>false</code> are keywords"}, {"owner": {"reputation": 15, "user_id": 6506337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ErVni.jpg?s=128&g=1", "display_name": "Eduardo Pacheco", "link": "https://stackoverflow.com/users/6506337/eduardo-pacheco"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486657176, "post_id": 42123887, "comment_id": 71449581, "body": "It&#39;s true, @M.M, if you think of it as C++. I coded in pure C, that is the reason I did so, once they are not keywords in C; originally the question was tagged with both c and c++; only afterwards edited (check log)"}, {"owner": {"reputation": 35, "user_id": 7536704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23c8d7fe703b153f483a69de6104a404?s=128&d=identicon&r=PG&f=1", "display_name": "xLukasbx", "link": "https://stackoverflow.com/users/7536704/xlukasbx"}, "edited": false, "score": 0, "creation_date": 1486657955, "post_id": 42123887, "comment_id": 71450136, "body": "Sory for of my understatement. This question concern possible pure C not C++."}, {"owner": {"reputation": 15, "user_id": 6506337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ErVni.jpg?s=128&g=1", "display_name": "Eduardo Pacheco", "link": "https://stackoverflow.com/users/6506337/eduardo-pacheco"}, "edited": false, "score": 0, "creation_date": 1486662641, "post_id": 42123887, "comment_id": 71453282, "body": "Cool, I like it better ! Did my answer solve your problem? If it did, please make sure to set it as answered."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486668027, "post_id": 42123887, "comment_id": 71456396, "body": "In  C use <code>#include &lt;stdbool.h&gt;</code> to get bools.  <code>number &amp;biggerNumber</code> would be an error in C so your answer was never &quot;coded in pure C&quot;"}, {"owner": {"reputation": 15, "user_id": 6506337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ErVni.jpg?s=128&g=1", "display_name": "Eduardo Pacheco", "link": "https://stackoverflow.com/users/6506337/eduardo-pacheco"}, "edited": false, "score": 0, "creation_date": 1486748886, "post_id": 42123887, "comment_id": 71496102, "body": "Now, that is for sure. Didn&#39;t even see it, thank you!"}], "tags": [], "owner": {"reputation": 15, "user_id": 6506337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ErVni.jpg?s=128&g=1", "display_name": "Eduardo Pacheco", "link": "https://stackoverflow.com/users/6506337/eduardo-pacheco"}, "is_accepted": false, "score": 0, "last_activity_date": 1486749159, "last_edit_date": 1486749159, "creation_date": 1486589117, "answer_id": 42123887, "question_id": 42123099, "link": "https://stackoverflow.com/questions/42123099/subtracting-two-binary-in-char-arrays/42123887#42123887", "title": "Subtracting two binary in char arrays", "body": "<p>Okay, so... there are many issues with your code, I'll point a few them out:</p>\n\n<ol>\n<li>When you subtract <code>(mask &amp; firstNumber.digits[i - 1]) - (mask &amp; secondNumber.digits[i - 1])</code> you will always get either <code>0</code>, <code>1</code> or <code>-1</code>. Then you store that value into back into <code>firstNumber</code> causing you to lose all of the other bits.</li>\n<li>As you probably noticed, the above subtraction could return <code>-1</code>, which you actually did a <code>if</code> statement, probably trying to avoid that, but notice that you did same opertion in the <code>else</code> statement; so you are actually storing <code>-1</code> back into <code>firstNumber</code>. (<code>-1</code> sets every bit to <code>1</code>, which eventually led to <code>1 - 1</code> and stored <code>0</code> in the whole thing.</li>\n</ol>\n\n<p>Okay, I'll stop there. In order to help you, I won't fix your code because there are a lot of thing wrong. Instead, I'll propose something else:</p>\n\n<p>To make thing simpler, I'll assume that firstNumber is bigger than secondNumber and to make it unmistakable, I'll also change their names\nIn this approach, I'll have to check which one is bigger before calling the function and if secondNumber is bigger, you manually signal negative value whenever you print the result of the inverse subtraction (second - first).\nTo avoid that, you could also use the negative representation of values, as it follows: if the first bit is set, the number is negative; if the number is negative, it's represented as: <code>~(number - 1)</code> where <code>~</code> is the inverse bitwise operator.</p>\n\n<pre><code>struct number {\n    unsigned char *digits; \n    size_t length; \n};\n\n// the function returns if biggerNumber is trully bigger than lesserNumber;\n// if it returns false, the computed result is wrong (and the original value was lost, you better fix that!)\nbool subtractionTwoBinaryNumbers(number* biggerNumber, number* lesserNumber) \n{\n    for (size_t i = biggerNumber-&gt;length - 1; i &gt;= 0; i--) \n    {\n        if (biggerNumber-&gt;digits[i] &lt; lesserNumber-&gt;digits[i])\n        {\n            if (i &gt; 1)\n            {\n                // I'll carry an unit from the higher digit, in order to do the substraction.\n                // as in: 12-9 = 0(12)-0(9) = 0(3)-0(0) = 3\n                unsigned char aux = -1; // -1 actually means 0b11111111\n                aux -= lesserNumber-&gt;digits[i];\n                biggerNumber-&gt;digits[i] += aux;\n                --(biggerNumber-&gt;digits[i-1]);  \n            }\n            else\n                return false;\n        }\n        else\n            biggerNumber-&gt;digits[i] -= lesserNumber-&gt;digits[i];\n    }\n\n    return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7536704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23c8d7fe703b153f483a69de6104a404?s=128&d=identicon&r=PG&f=1", "display_name": "xLukasbx", "link": "https://stackoverflow.com/users/7536704/xlukasbx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 922, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1486749159, "creation_date": 1486586156, "last_edit_date": 1486589866, "question_id": 42123099, "link": "https://stackoverflow.com/questions/42123099/subtracting-two-binary-in-char-arrays", "title": "Subtracting two binary in char arrays", "body": "<p>I am a new member of the forum. I am trying to subtract two binary numbers which the bits are stored as char in an array. I have number as an structure: </p>\n\n<pre><code>struct number {\n    unsigned char *digits; \n    size_t number; \n};\n</code></pre>\n\n<p>And I subtract in another function: </p>\n\n<pre><code>void subtractionTwoBinaryNumbers(number &amp;firstNumber, number &amp;secondNumber) {\n    for (size_t i = firstNumber.number; i &gt; 0; i--) {\n        unsigned char mask = 0b00000001;\n        for (int j = CHAR_BIT - 1; j &gt;= 0; j--) {\n            if (((mask &amp; firstNumber.digits[i - 1]) &gt; (mask &amp; secondNumber.digits[i - 1])) ||\n                ((mask &amp; firstNumber.digits[i - 1]) == (mask &amp; secondNumber.digits[i - 1]))) {\n                firstNumber.digits[i - 1] = ((mask &amp; firstNumber.digits[i - 1]) - (mask &amp; secondNumber.digits[i - 1]));\n\n            } else if ((mask &amp; firstNumber.digits[i - 1]) &lt; (mask &amp; secondNumber.digits[i - 1])) {\n                firstNumber.digits[i - 1] = ((mask &amp; secondNumber.digits[i - 1]) - (mask &amp; firstNumber.digits[i - 1]));\n            }\n            mask &lt;&lt;= 1;\n        }\n    }\n}\n</code></pre>\n\n<p>I'm printing the number in another function and it runs correctly.\nI would like compute the score in firstNumber.digits. But the score is:</p>\n\n<pre><code>first number: 00001111\nsecond number: 00000101\nscore: 00000000\n</code></pre>\n\n<p>What did I do wrong? Thank you for each answer on my questions!</p>\n"}, {"tags": ["c++", "clion", "jetbrains-ide"], "owner": {"reputation": 53, "user_id": 1717659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S4Non.jpg?s=128&g=1", "display_name": "Alireza", "link": "https://stackoverflow.com/users/1717659/alireza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 398, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1486585946, "creation_date": 1486585946, "question_id": 42123044, "link": "https://stackoverflow.com/questions/42123044/change-default-template-of-main-file-in-clion", "title": "Change default template of main file in CLion", "body": "<p>As I searched through google it is possible to create &amp; edit templates for specific data types in Clion. I have created a template for .cpp files already but I don't know how to apply it to the very first file which is main.cpp</p>\n\n<p>thanks,</p>\n"}, {"tags": ["c++", "qt", "qmenu"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1486589204, "post_id": 42122985, "comment_id": 71415953, "body": "QWidgetAction has no size. You need to reword the question? I would want to see more code for that."}, {"owner": {"reputation": 1152, "user_id": 1820665, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/R1Tas.jpg?s=128&g=1", "display_name": "Tobias Leupold", "link": "https://stackoverflow.com/users/1820665/tobias-leupold"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1486624557, "post_id": 42122985, "comment_id": 71427839, "body": "I added the code of the menu setup and the menu invocation. It&#39;s about the width of the QLabel the QWidgetAction displays and the width of the QMenu which stays the same after the QLabel&#39;s text is set for the first time."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1486796073, "post_id": 42122985, "comment_id": 71510532, "body": "The answer is maybe a shot in the dark but similar solution worked for me once."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1512823090, "post_id": 42122985, "comment_id": 82417683, "body": "Maybe <a href=\"http://doc.qt.io/qt-5/qwidget.html#adjustSize\" rel=\"nofollow noreferrer\">QWidget::adjustSize</a> is what you need."}, {"owner": {"reputation": 1152, "user_id": 1820665, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/R1Tas.jpg?s=128&g=1", "display_name": "Tobias Leupold", "link": "https://stackoverflow.com/users/1820665/tobias-leupold"}, "edited": false, "score": 0, "creation_date": 1512902318, "post_id": 42122985, "comment_id": 82436083, "body": "No, that was the first thing I tried \u2026"}], "answers": [{"comments": [{"owner": {"reputation": 1152, "user_id": 1820665, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/R1Tas.jpg?s=128&g=1", "display_name": "Tobias Leupold", "link": "https://stackoverflow.com/users/1820665/tobias-leupold"}, "edited": false, "score": 0, "creation_date": 1513109890, "post_id": 47728602, "comment_id": 82523047, "body": "That&#39;s it! Thanks :-)"}, {"owner": {"reputation": 1827, "user_id": 4248972, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/df5369385749fdb2112db7fc7bf4ca11?s=128&d=identicon&r=PG&f=1", "display_name": "pasbi", "link": "https://stackoverflow.com/users/4248972/pasbi"}, "edited": false, "score": 0, "creation_date": 1570176004, "post_id": 47728602, "comment_id": 102838209, "body": "It doesn&#39;t work for me. Would you be kind enough to explain what this hack does differently than <code>QWidget::adjustSize</code> and <code>QWidget::updateGeometry</code>? In my case the menu lives in a <code>QMenuBar</code> and it is hidden at the moment when the resize happens. I find the <a href=\"https://doc.qt.io/qt-5/qwidget.html#updateGeometry\" rel=\"nofollow noreferrer\">docs</a> not very clear, but I presume that should not be a problem."}], "tags": [], "owner": {"reputation": 817, "user_id": 362515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af405c8e6ed7799762a21ab51e64ee7b?s=128&d=identicon&r=PG", "display_name": "user362515", "link": "https://stackoverflow.com/users/362515/user362515"}, "is_accepted": true, "score": 1, "last_activity_date": 1512822558, "creation_date": 1512822558, "answer_id": 47728602, "question_id": 42122985, "link": "https://stackoverflow.com/questions/42122985/how-to-resize-a-qlabel-displayed-by-a-qwidgetaction-after-changing-its-text/47728602#47728602", "title": "How to resize a QLabel displayed by a QWidgetAction after changing it&#39;s text", "body": "<p>The solution is to send a resize event instead:</p>\n\n<pre><code>m_menuTitle-&gt;setText(tr(\"%1 \u201e%2\u201c\").arg(some_variable, some_other_variable));\n...\nQResizeEvent re(new_size, m_contextMenu-&gt;size());\nqApp-&gt;sendEvent(m_contextMenu, &amp;re);\n</code></pre>\n\n<p>This will set the QMenu's internal <code>itemsDirty</code> flag and will force geometry recalculation when the menu is shown. <em>Note that the new size in the event does not matter, as the menu will aways resize based on its <code>sizeHint()</code>!</em></p>\n"}, {"tags": [], "owner": {"reputation": 1827, "user_id": 4248972, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/df5369385749fdb2112db7fc7bf4ca11?s=128&d=identicon&r=PG&f=1", "display_name": "pasbi", "link": "https://stackoverflow.com/users/4248972/pasbi"}, "is_accepted": false, "score": 0, "last_activity_date": 1570233879, "creation_date": 1570233879, "answer_id": 58244328, "question_id": 42122985, "link": "https://stackoverflow.com/questions/42122985/how-to-resize-a-qlabel-displayed-by-a-qwidgetaction-after-changing-its-text/58244328#58244328", "title": "How to resize a QLabel displayed by a QWidgetAction after changing it&#39;s text", "body": "<p>This answer extends <a href=\"https://stackoverflow.com/a/47728602/4248972\">user362515's answer</a>.</p>\n\n<p>There is little more effort required if you change the size of a hidden widget action (e.g., because of its menu is currently collapsed).\nCreate a new class <code>ActionWidget</code> which derives publicly from <code>QWidget</code>.\nThen override the <code>showEvent</code> method and implement it like this:</p>\n\n<pre><code>void ActionWidget::showEvent(QShowEvent* event)\n{\n  QResizeEvent resize_event(QSize(), parentWidget()-&gt;size());\n\n  parentWidget()-&gt;adjustSize();\n  qApp-&gt;sendEvent(parentWidget(), &amp;resize_event);\n\n  QWidget::showEvent(event);\n}\n</code></pre>\n\n<p>Notice that <code>adjustSize</code> must be called on the parent widget of the action widget and the event must be sent to the parent widget.</p>\n\n<p>Of course, you must also reimplement <code>QWidgetAction::createWidget</code> such that it returns an instance of the <code>ActionWidget</code>-class and make sure that <code>ActionWidget</code> reports a proper (updated) size hint.</p>\n"}, {"tags": [], "owner": {"reputation": 1353, "user_id": 758288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7zQxA.jpg?s=128&g=1", "display_name": "David Faure", "link": "https://stackoverflow.com/users/758288/david-faure"}, "is_accepted": false, "score": 0, "last_activity_date": 1613115882, "creation_date": 1613115882, "answer_id": 66168006, "question_id": 42122985, "link": "https://stackoverflow.com/questions/42122985/how-to-resize-a-qlabel-displayed-by-a-qwidgetaction-after-changing-its-text/66168006#66168006", "title": "How to resize a QLabel displayed by a QWidgetAction after changing it&#39;s text", "body": "<p>The <code>QResizeEvent</code> solution didn't really work for me (with a more complex widget), I found the generic solution by reading the <code>QMenu</code> and <code>QAction</code> source code.</p>\n<pre><code>m_widget-&gt;installEventFilter(this);\n// and in my case m_widget-&gt;layout()-&gt;setSizeConstraint(QLayout::SetFixedSize);\n\nbool SomeClass::eventFilter(QObject* watched, QEvent* event)\n{\n    if (watched == m_widget &amp;&amp; event-&gt;type() == QEvent::Resize) {\n        // Force QMenu to recalculate the geometry of this item\n        QActionEvent e(QEvent::ActionChanged, this);\n        qApp-&gt;sendEvent(m_contextMenu, &amp;e);\n    }\n    ...\n}\n</code></pre>\n<p><code>QActionEvent</code> triggers everything we need in <code>QMenu</code>: recalculating geometries, resizing the menu to its new size (if it's visible), etc.</p>\n"}], "owner": {"reputation": 1152, "user_id": 1820665, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/R1Tas.jpg?s=128&g=1", "display_name": "Tobias Leupold", "link": "https://stackoverflow.com/users/1820665/tobias-leupold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 0, "accepted_answer_id": 47728602, "answer_count": 3, "score": 2, "last_activity_date": 1613115882, "creation_date": 1486585707, "last_edit_date": 1486633093, "question_id": 42122985, "link": "https://stackoverflow.com/questions/42122985/how-to-resize-a-qlabel-displayed-by-a-qwidgetaction-after-changing-its-text", "title": "How to resize a QLabel displayed by a QWidgetAction after changing it&#39;s text", "body": "<p>I use a <code>QWidgetAction</code> to add a header to a context menu (that will also show up on Windows, no matter what style is used, in contrast to <code>addSection()</code>, which does not always actually display the title).</p>\n\n<p>The action's widget is a <code>QLabel</code>. It's text is changed by each invocation of the context menu. The menu is setup in the constructor of my class, and the <code>QWidgetAction</code> is added like so (all <code>m_</code> variables are member variables declared in the header):</p>\n\n<pre><code>m_contextMenu = new QMenu(this);\nm_menuTitle = new QLabel;\nm_menuTitle-&gt;setAlignment(Qt::AlignCenter);\nm_menuTitle-&gt;setMargin(4);\nQWidgetAction *titleAction = new QWidgetAction(m_contextMenu);\ntitleAction-&gt;setDefaultWidget(m_menuTitle);\nm_contextMenu-&gt;addAction(titleAction);\nm_contextMenu-&gt;addSeparator();\n</code></pre>\n\n<p>When the menu is requested, the text of the label is changed and the menu is displayed like so:</p>\n\n<pre><code>m_menuTitle-&gt;setText(tr(\"%1 \u201e%2\u201c\").arg(some_variable, some_other_variable));\n...\nm_contextMenu-&gt;exec(place_to_display);\n</code></pre>\n\n<p>When the label's text is set for the first time (with a short text the label's text is set to), everything is fine:</p>\n\n<p><a href=\"https://i.stack.imgur.com/TuvtF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TuvtF.png\" alt=\"enter image description here\"></a></p>\n\n<p>but when it's set to some longer text, the size remains the same and the text is cropped:</p>\n\n<p><a href=\"https://i.stack.imgur.com/aIcxU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aIcxU.png\" alt=\"enter image description here\"></a></p>\n\n<p>I tried to fix this, but the only working solution I found was to define the <code>QAction</code>s displayed in the menu in the constructor, owned by <code>this</code>, setting the label's text, clearing the menu and adding the actions again, like so:</p>\n\n<pre><code>m_contextMenu-&gt;clear();\n\nm_menuTitle-&gt;setText(tr(\"%1 \u201e%2\u201c\").arg(some_variable, some_other_variable));\n\nm_contextMenu-&gt;addAction(m_menuTitleAction);\nm_contextMenu-&gt;addSeparator();\nm_contextMenu-&gt;addAction(m_editAction);\nm_contextMenu-&gt;addAction(m_deleteAction);\n\nm_contextMenu-&gt;exec(place_to_display);\n</code></pre>\n\n<p>Is there a way to resize the title without rebuilding the menu each time?</p>\n"}, {"tags": ["c++", "set", "set-intersection"], "comments": [{"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1486585488, "post_id": 42122882, "comment_id": 71413884, "body": "How is <code>intersection</code> defined?"}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1486585496, "post_id": 42122882, "comment_id": 71413888, "body": "Blind &quot;Copy and Pasting&quot; is not good. In the code you copied, <code>intersection</code> is an object of a class type that obviously has members <code>max</code> and <code>min</code>."}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 0, "creation_date": 1486585535, "post_id": 42122882, "comment_id": 71413905, "body": "Please read <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1486585547, "post_id": 42122882, "comment_id": 71413920, "body": "This is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Please fill in the surrounding class definitions required to fully compile this code."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1486585857, "post_id": 42122882, "comment_id": 71414099, "body": "Independent of the anyway required <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> I would expect that you provide minimum a link when you are talking about someone else code. Just because something is freely available it doesnt mean that you should not mention the original author"}], "answers": [{"tags": [], "owner": {"reputation": 919, "user_id": 5017858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OfAr1.png?s=128&g=1", "display_name": "Sam Marinelli", "link": "https://stackoverflow.com/users/5017858/sam-marinelli"}, "is_accepted": false, "score": 0, "last_activity_date": 1486586388, "last_edit_date": 1486586388, "creation_date": 1486586035, "answer_id": 42123067, "question_id": 42122882, "link": "https://stackoverflow.com/questions/42122882/c-intersection-of-two-ranges/42123067#42123067", "title": "C++: Intersection Of two ranges", "body": "<p>Try this.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;utility&gt;\n\nstruct range {\n    unsigned long long min, max;\n};\n\nrange intersect(const range&amp; first, const range&amp; second) {\n    return {std::max(first.min, second.min), std::min(first.max, second.max)};\n}\n</code></pre>\n\n<p>You can call it like, e.g., <code>intersect({min1, max1}, {min2, max2})</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 4, "last_activity_date": 1486586171, "last_edit_date": 1495540817, "creation_date": 1486586171, "answer_id": 42123103, "question_id": 42122882, "link": "https://stackoverflow.com/questions/42122882/c-intersection-of-two-ranges/42123103#42123103", "title": "C++: Intersection Of two ranges", "body": "<blockquote>\n  <p>I found a way on SO as follows :</p>\n\n<pre><code>intersection = { std::max(arg1.min, arg2.min), std::min(arg1.max, arg2.max) };\nif (intersection.max &lt; intersection.min) {\n  intersection.markAsEmpty();\n}\n</code></pre>\n</blockquote>\n\n<p>Blind \"Copy and Pasting\" is not good. In the code you <a href=\"https://stackoverflow.com/a/20023538/1621391\">copied</a> (which you should acknowledge), intersection is an object of a class type that obviously has members <code>max</code> and <code>min</code>.</p>\n\n<hr>\n\n<p>For your own use case:</p>\n\n<pre><code>unsigned long long int min1,min2,max1,max2 \n......\nauto Min = std::max(min1, min2);\nauto Max = std::min(max1, max2);\nif (Min &lt; Max) {\n    // There's an intersection. represented by {Min Max}\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 130, "user_id": 8129254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5934b2a42c1d8f6d59bf5d712c298e2?s=128&d=identicon&r=PG&f=1", "display_name": "y_159", "link": "https://stackoverflow.com/users/8129254/y-159"}, "is_accepted": false, "score": 0, "last_activity_date": 1590246497, "creation_date": 1590246497, "answer_id": 61974111, "question_id": 42122882, "link": "https://stackoverflow.com/questions/42122882/c-intersection-of-two-ranges/61974111#61974111", "title": "C++: Intersection Of two ranges", "body": "<p>may be this will help.</p>\n\n<p>say for the range <code>[l1, r1]</code>, <code>[l2, r2]</code> intersection between them can be calculated as:</p>\n\n<pre><code> if ((r1 &lt; l2) ||  (r2 &lt; l1)) then no intersection exits.\n\n else l = max(l1, l2) and r = min(r1, r2)\n</code></pre>\n\n<p>just iterate over the range <code>[l, r]</code> to get the intersection values.</p>\n"}], "owner": {"reputation": 65, "user_id": 7117623, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e9fc5a650f9b223d1cbdcbf86b6a95f?s=128&d=identicon&r=PG&f=1", "display_name": "sammy", "link": "https://stackoverflow.com/users/7117623/sammy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 865, "favorite_count": 0, "accepted_answer_id": 42123103, "answer_count": 3, "score": -3, "last_activity_date": 1590246497, "creation_date": 1486585376, "question_id": 42122882, "link": "https://stackoverflow.com/questions/42122882/c-intersection-of-two-ranges", "title": "C++: Intersection Of two ranges", "body": "<p>I'm trying to find the intersection of two ranges in C++? For example, if I have one range as [1..14] inclusive, and another as [10..20] inclusive, I want to get [10..14], as that is the intersection between them. </p>\n\n<p>I found a way on SO as follows :</p>\n\n<pre><code>intersection = { std::max(arg1.min, arg2.min), std::min(arg1.max, arg2.max) };\nif (intersection.max &lt; intersection.min) {\n  intersection.markAsEmpty();\n}\n</code></pre>\n\n<p>I have few variables as follows :</p>\n\n<pre><code>unsigned long long int min1,min2,max1,max2 \n</code></pre>\n\n<p>for which I'm trying to find the the intersection. Then I did the following:</p>\n\n<pre><code>intersection = { std::max(min1, min2), std::min(max1, max2) };\n    if (intersection.max &lt; intersection.min) {\n      intersection.markAsEmpty();\n    }\n</code></pre>\n\n<p>But this gives the error that unsigned long long int can't be used. How do I use it find the intersection ?</p>\n"}, {"tags": ["java", "c++", "c", "struct", "jna"], "comments": [{"owner": {"reputation": 739, "user_id": 7453308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab68a8d04cc8d75b37d3ae6e31dc13?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7453308/alex"}, "edited": false, "score": 0, "creation_date": 1486588350, "post_id": 42122862, "comment_id": 71415484, "body": "What does your attempt get you? An Error? Unexpected Result?"}, {"owner": {"reputation": 21, "user_id": 7536262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed241425ab8a0aac5f4a5fe2be848321?s=128&d=identicon&r=PG&f=1", "display_name": "benayedh", "link": "https://stackoverflow.com/users/7536262/benayedh"}, "reply_to_user": {"reputation": 739, "user_id": 7453308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab68a8d04cc8d75b37d3ae6e31dc13?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7453308/alex"}, "edited": false, "score": 0, "creation_date": 1486637371, "post_id": 42122862, "comment_id": 71435644, "body": "I get an expected result: System.out.println(&quot;Struct2.struct1_Nbr == &quot; + struct2.struct1_Nbr); returns Struct2.struct1_Nbr == 0. so I have an exeption in this instruction &quot;Struct1[] struct1_array= (Struct1[])(struct2.struct1_elements).toArray(struct2.struct&zwnj;&#8203;1_Nbr);&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 1, "creation_date": 1487089287, "post_id": 42145777, "comment_id": 71621836, "body": "Using <code>String</code> to represent an arbitrary block of data is a bad idea."}], "tags": [], "owner": {"reputation": 739, "user_id": 7453308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab68a8d04cc8d75b37d3ae6e31dc13?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7453308/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1486670421, "creation_date": 1486670421, "answer_id": 42145777, "question_id": 42122862, "link": "https://stackoverflow.com/questions/42122862/how-to-pass-a-struct-containing-char-in-java-using-jna-and-avoiding-the-data-co/42145777#42145777", "title": "How to pass a struct containing char* in java using JNA and avoiding the data copy?", "body": "<p>Here is my Solutiuon, first Draft:</p>\n\n<ol>\n<li><p>Declare a Class in java that extends Structure </p>\n\n<blockquote>\n  <p><strong>(com.sun.jna.Structure)</strong></p>\n</blockquote>\n\n<p>(all fields in the class <strong>must</strong> be public or you get an error, that the size of the structure extended class can't be measured)</p>\n\n<pre><code>public class Struct1 extends Structure{\n    public int Size;\n    public String Data;  \n}\n</code></pre></li>\n<li><p>Declare and define a method in the C Dll, that takes a pointer to the structure as an argument (I created a structure and filled it with values for testing)</p>\n\n<pre><code>void __declspec(dllexport) GetStruct(Struct1* a){\nStruct1 s;\ns.Size = 9;\ns.Data = \"Output\";\n*a = s;\n}\n</code></pre></li>\n<li><p>I assume that you already successfully connected the java app to the c dll, so i skip that part(if my assumption is wrong, tell me in the comments and i edit my answer)</p></li>\n<li><p>If you add these lines to your java code (note cdll is the handle to my C library)</p>\n\n<pre><code>Struct1 test = new Struct1();\ncdll.GetStruct(test);\nSystem.out.println(\"Struct1: \" + test.Size + \" \" + test.Data);\n</code></pre></li>\n</ol>\n\n<p>You should get the data from the Structure s in the C Dll.</p>\n"}, {"tags": [], "owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "is_accepted": false, "score": 0, "last_activity_date": 1487012413, "creation_date": 1487012413, "answer_id": 42211528, "question_id": 42122862, "link": "https://stackoverflow.com/questions/42122862/how-to-pass-a-struct-containing-char-in-java-using-jna-and-avoiding-the-data-co/42211528#42211528", "title": "How to pass a struct containing char* in java using JNA and avoiding the data copy?", "body": "<p>If the Data field points to arbitrary data, use a <code>Pointer</code>.  If the native side allocates, then you do nothing.  If the Java side allocates, use a <code>Memory</code> object assigned to that field.</p>\n\n<p>As for the <code>struct*</code> and <code>struct**</code>, it'd be useful to see some native code using those constructs in order to tell what they represent, since there is some ambiguity (<code>struct*</code> could be a pointer to a single struct, or a pointer to a contiguous array of them).  <code>struct**</code> could be storage allocated for the return of a <code>struct*</code>, or it may be something else.</p>\n"}], "owner": {"reputation": 21, "user_id": 7536262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed241425ab8a0aac5f4a5fe2be848321?s=128&d=identicon&r=PG&f=1", "display_name": "benayedh", "link": "https://stackoverflow.com/users/7536262/benayedh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 703, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1487012413, "creation_date": 1486585292, "question_id": 42122862, "link": "https://stackoverflow.com/questions/42122862/how-to-pass-a-struct-containing-char-in-java-using-jna-and-avoiding-the-data-co", "title": "How to pass a struct containing char* in java using JNA and avoiding the data copy?", "body": "<p>I am writing a java application that will access to C++ dll usnig JNA. So I prepared a C dll to communicate between the JNA and C++ thrid party dll. I have these two structs:</p>\n\n<p>C code:</p>\n\n<pre><code>    struct Struct1\n    {\n    uint32_t Size;\n    unsigned char* Data;\n    };\n    struct Struct2\n    {\n    uint32_t Struct1_Nbr;\n    Struct1* struct1_elements;\n    };\n    bool Open(char* fileName, Struct2** struct2);\n</code></pre>\n\n<p>Now I am writing the corresponding JNA code in java application and I want to access the \"unsigned char* Data\" without copying this data as it is a large amount of Data.\nHow can I use the \"Memory\" or the \"Pointer\" JNA types to do this task?</p>\n\n<p>Here is my attempt: </p>\n\n<pre><code>    public class Test\n    {\n    public static class Struct1 extends com.sun.jna.Structure {        \n    public Struct1(){}\n    public Struct1(Pointer pointer){\n        super(pointer);\n        read();\n    }\n\n    public static class Struct1ByValue extends Struct1 implements com.sun.jna.Structure.ByValue{};\n    public int Size;\n    public Memory Data;\n    public static class Struct1ByReference extends Struct1 implements com.sun.jna.Structure.ByReference{}\n\n    @Override\n    protected List getFieldOrder() {\n        // TODO Auto-generated method stub\n        return Arrays.asList(\"Size\", \"Data\");\n    };\n\npublic static class Struct2 extends com.sun.jna.Structure {    \n    public Struct2 (){}\n    public Struct2 (Pointer pointer){\n        super(pointer);\n        read();\n    }\n    public int Struct2_Nbr;\n    public Struct1.Struct1ByReference struct1_elements = new Struct1.Struct1ByReference();\n\n    public static class Struct2ByValue extends Struct2 implements com.sun.jna.Structure.ByValue{};\n    public static class Struct2ByReference extends Struct2  implements com.sun.jna.Structure.ByReference{}\n\n    @Override\n    protected List getFieldOrder() {\n        // TODO Auto-generated method stub\n        return Arrays.asList(\"Struct1_Nbr\", \"struct1_elements\"));\n    };\n}\n    public interface StructureProtocol extends com.sun.jna.Library{\n    Boolean Open(String fileName, PointerByReference struct2);\n    }\n    public StructureProtocol lib;\n    public Test(){\n    this.lib = (StructureProtocol) Native.loadLibrary(\"TestAPI\", StructureProtocol.class);\n}\n\n    public static void main(String[] args) {\n\n            Test test = new Test();\n    PointerByReference pref = new PointerByReference();\n\n    test.lib.Open(\"filePath\", pref);\n    Pointer ptr = pref.getValue();\n    Struct2 struct2= new Struct2(ptr);\n    Struct1[] struct1_array= (Struct1[])(struct2.struct1_elements).toArray(struct2.struct1_Nbr);\n    System.out.println(\"struct1_array[0]: Size = \" + struct1_array[0].Size);\n    System.out.println(\"struct1_array[0]: Data= \" + struct1_array[0].Data);\n    }\n    }\n</code></pre>\n\n<p>Any advice would be very appreciated.</p>\n"}, {"tags": ["c++", "opencv", "gpu", "building"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1486585477, "post_id": 42122634, "comment_id": 71413873, "body": "This s not a CUDA question, it is an OpenCV  problem which has been reported several times to their bug tracker, if you bother to search for it. I am removing  the CUDA tag, please do not re-add it."}, {"owner": {"reputation": 901, "user_id": 4673476, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Omlfj.jpg?s=128&g=1", "display_name": "black", "link": "https://stackoverflow.com/users/4673476/black"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1486585631, "post_id": 42122634, "comment_id": 71413971, "body": "@talonmies I have seen these bug reports - but these are referring to previous versions of OpenCV 3 - and these errors had been fixed now."}, {"owner": {"reputation": 3860, "user_id": 6807211, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/3b4e615f42b0a0880467650ae5e229c7?s=128&d=identicon&r=PG&f=1", "display_name": "jingweimo", "link": "https://stackoverflow.com/users/6807211/jingweimo"}, "edited": false, "score": 0, "creation_date": 1516819321, "post_id": 42122634, "comment_id": 83849615, "body": "@black I have encountered the same issue. To solve it, should BLAS be installed first or just check the WITH_BLAS flag?"}], "owner": {"reputation": 901, "user_id": 4673476, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Omlfj.jpg?s=128&g=1", "display_name": "black", "link": "https://stackoverflow.com/users/4673476/black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1316, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1486740168, "creation_date": 1486584388, "last_edit_date": 1486740168, "question_id": 42122634, "link": "https://stackoverflow.com/questions/42122634/building-opencv-3-cuda-errors", "title": "Building OpenCV 3 cuda errors", "body": "<p>I want to build <strong>OpenCV 3.2</strong> for <em>Visual Studio 2015 in Windows 10 with Cuda</em> support. So, I configured it using <em>CMake</em> (see configuration file <a href=\"https://drive.google.com/file/d/0B0wvDyuZ1AkzODh5SHhFRlJISDA/view?usp=sharing\" rel=\"nofollow noreferrer\">here</a>). Cuda is installed and the path variable is set correctly. However, when building the <code>OpenCV.sln</code> solution (debug, x64), I get in total 36 (3 different) errors, all referring to the cuda module:</p>\n\n<blockquote>\n  <p>C2610 C2535 C2382</p>\n</blockquote>\n\n<p>Here one example per error code (Code, Description,    Project File,   Line):</p>\n\n<blockquote>\n  <p>Error C2610   'std::tuple::tuple(const std::tuple\n  &amp;)': is not a special member function which can be defaulted\n  (compiling source file\n  C:\\Users\\user\\down\\opencv3.2\\opencv-src\\modules\\cudawarping\\perf\\perf_warping.cpp)    opencv_perf_cudawarping C:\\Program\n  Files (x86)\\Microsoft Visual Studio 14.0\\VC\\include\\tuple 607</p>\n  \n  <p>Error C2535   'std::tuple\n  &amp;std::tuple::operator\n  =(const std::tuple\n  &amp;)': member function already defined or declared (compiling source\n  file\n  C:\\Users\\user\\down\\opencv3.2\\opencv-src\\modules\\cudawarping\\perf\\perf_warping.cpp)    opencv_perf_cudawarping C:\\Program\n  Files (x86)\\Microsoft Visual Studio 14.0\\VC\\include\\tuple 756</p>\n  \n  <p>Error C2382   'std::tuple::operator\n  =': redefinition; different exception specifications (compiling source file\n  C:\\Users\\user\\down\\opencv3.2\\opencv-src\\modules\\cudawarping\\perf\\perf_warping.cpp)    opencv_perf_cudawarping C:\\Users\\user\\down\\opencv3.2\\opencv-src\\modules\\ts\\include\\opencv2\\ts\\cuda_perf.hpp 76</p>\n</blockquote>\n\n<p><strong>EDIT:</strong></p>\n\n<p>This is reported as an <a href=\"https://github.com/opencv/opencv/issues/7992\" rel=\"nofollow noreferrer\">issue</a> for OpenCV 3.2.</p>\n\n<p>Here is a good way to bypass the problem, posted by <a href=\"https://github.com/opencv/opencv/issues/7992\" rel=\"nofollow noreferrer\">ThorbjornSomod (see issue)</a>:</p>\n\n<blockquote>\n  <p>I actually got it to work both on my laptop and my desktop (GTX960M\n  and GTX970 respectively) running with OpenCV 3.2 and the latest\n  version of CUDA 8.0 for Win10 in Visual Studio 15 Community! What I\n  did was to enable WITH_CUBLAS aswell as WITH_CUDA. I also turned off\n  BUILD_PERF_TESTS and BUILD_TESTS. The configuration was built using\n  the Visual Studio 14 2015 C++ compiler.</p>\n</blockquote>\n"}, {"tags": ["c++", "multithreading", "visual-studio", "dll", "windows-10-universal"], "comments": [{"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1486584674, "post_id": 42122615, "comment_id": 71413447, "body": "Although the question might be answerable without looking at the code at all, can you please condense it to a mcve?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486584707, "post_id": 42122615, "comment_id": 71413463, "body": "What is VBS2?  It&#39;s not in my acronym dictionary."}, {"owner": {"reputation": 194, "user_id": 1139624, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/91a53a3b39a81cebd4e36f622cbb163a?s=128&d=identicon&r=PG", "display_name": "Spriggsy", "link": "https://stackoverflow.com/users/1139624/spriggsy"}, "edited": false, "score": 0, "creation_date": 1486588657, "post_id": 42122615, "comment_id": 71415663, "body": "Sorry, what is MCVE? VBS2 is a first person simulator for military training. It has its own ASI that you can plug into to provide your own functions"}], "owner": {"reputation": 194, "user_id": 1139624, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/91a53a3b39a81cebd4e36f622cbb163a?s=128&d=identicon&r=PG", "display_name": "Spriggsy", "link": "https://stackoverflow.com/users/1139624/spriggsy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486584328, "creation_date": 1486584328, "question_id": 42122615, "link": "https://stackoverflow.com/questions/42122615/c-dll-plugin-thread-runs-slow-on-win-10", "title": "C++ DLL Plugin thread runs slow on Win 10", "body": "<p>I've created a threaded DLL to read a serial port. This DLL is a plugin for VBS2. If I run the application in Windows 7 it works perfectly, however if I run the same plugin on a Windows 10 machine it slows down and lags approx. 5 seconds behind. Is there a new way to create a thread in Windows 10 that I do not know about?</p>\n\n<p>here's my code for the plugin below</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include \"VBSPlugin.h\"\n#include &lt;string&gt;       // used for sprintf_s\n#include \"Serial.h\"     //  used for serial com port connection\n\n#include &lt;thread&gt;\n\n\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\n\nfloat X = 0.0;\nfloat Y = 0.0;\nfloat Z = 0.0;\n\nint B1 = 0;\nint B2 = 0;\nint B3 = 0;\nint B4 = 0;\nint B5 = 0;\nint Calibrating = 0;     // int sent from head-tracker\n\nfloat InitX = 0.0;\nfloat InitY = 0.0;\nfloat InitZ = 0.0;\n\nfloat HEADING_OFF = 0.0;\n\n\n//control varibles\nbool connected = false;\nint   Data_Of_Thread_1;\nCSerial serial;\n\n\n\n\n\nDWORD WINAPI SerialThread(LPVOID lpParam)\n{\n\n\n    bool synced = false;\n\n    string dataString;\n\n    char* buffer = new char[1]();\n\n    while (true){\n\n        if (serial.IsOpened()){\n\n            serial.ReadData(buffer, 1);\n\n            if (_stricmp(\"&lt;\", buffer) == 0)\n            {\n                synced = true;\n\n            };\n\n            if (((_stricmp(\"\\r\", buffer) == 0) || (_stricmp(\"\\n\", buffer) == 0) || (_stricmp(\"&lt;\", buffer) == 0) || (_stricmp(\"&gt;\", buffer) == 0) || (_stricmp(\",\", buffer) == 0) || (_stricmp(\".\", buffer) == 0) || (_stricmp(\"-\", buffer) == 0) || (_stricmp(\"1\", buffer) == 0) || (_stricmp(\"2\", buffer) == 0) || (_stricmp(\"3\", buffer) == 0) || (_stricmp(\"4\", buffer) == 0) || (_stricmp(\"5\", buffer) == 0) || (_stricmp(\"6\", buffer) == 0) || (_stricmp(\"7\", buffer) == 0) || (_stricmp(\"8\", buffer) == 0) || (_stricmp(\"9\", buffer) == 0) || (_stricmp(\"0\", buffer) == 0)) &amp;&amp; synced == true)\n            {\n                dataString += buffer;\n\n                if ((_stricmp(\"&gt;\", buffer) == 0))\n                {\n                    // end of packet\n                    synced = false;\n                    cout &lt;&lt; \"dataString: \" &lt;&lt; dataString &lt;&lt; std::endl;\n                    /*vector&lt;string&gt; x = split(dataString, ',');\n\n                    LB_STATUS-&gt;SetLabel(dataString);\n\n                    try {\n                    X = stof(x[1]);\n                    Y = stof(x[2]);\n                    Z = stof(x[3]);\n                    B1 = stoi(x[4]);\n                    B2 = stoi(x[5]);\n                    B3 = stoi(x[6]);\n                    B4 = stoi(x[7]);\n                    B5 = stoi(x[8]);\n                    Calibrating = stoi(x[9]);\n\n                    }\n                    catch (...) {\n\n                    };\n                    */\n                    dataString.clear();\n                };\n\n            }\n            else\n            {\n                ;;\n            }\n        }\n\n        else{\n\n            cout &lt;&lt; \"Not Connected\" &lt;&lt; endl;\n        }\n\n    }\n\n    return 0;\n}\n\n\n\n\n\n// Command function declaration\ntypedef int (WINAPI * ExecuteCommandType)(const char *command, char *result, int resultLength);\n\n// Command function definition\nExecuteCommandType ExecuteCommand = NULL;\n\n// Function that will register the ExecuteCommand function of the engine\nVBSPLUGIN_EXPORT void WINAPI RegisterCommandFnc(void *executeCommandFnc)\n{\n  ExecuteCommand = (ExecuteCommandType)executeCommandFnc;\n}\n\n// This function will be executed every simulation step (every frame) and took a part in the simulation procedure.\n// We can be sure in this function the ExecuteCommand registering was already done.\n// deltaT is time in seconds since the last simulation step\nVBSPLUGIN_EXPORT void WINAPI OnSimulationStep(float deltaT)\n{\n  //{ Sample code:\n\n  //!}\n}\n\n\n\nconst char *sendX(const char *input)\n{\n    // adjust 0-360 degrees to input offset\n\n    X = X + HEADING_OFF;\n    if (X &gt; 360)  { X = X - 360; };\n\n\n    // The output result\n    static char result[256];\n\n    sprintf_s(result, \"['%f']\", X);\n\n    // Return whatever is in the result\n    return result;\n};\nconst char *sendY(const char *input)\n{\n    // The output result\n    static char result[256];\n\n    sprintf_s(result, \"['%f']\", Y);\n\n    // Return whatever is in the result\n    return result;\n}\nconst char *sendZ(const char *input)\n{\n    // The output result\n    static char result[256];\n\n    sprintf_s(result, \"['%f']\", Z);\n\n    // Return whatever is in the result\n    return result;\n}\nconst char *sendA(const char *input)\n{\n    // adjust 0-360 degrees to input offset\n    X = X + HEADING_OFF;\n    if (X &gt; 360)  { X = X - 360; };\n\n    // The output result\n    static char result[256];\n\n    sprintf_s(result, \"['%i,%i,%i']\", X, Y, Z);\n\n    // Return whatever is in the result\n    return result;\n}\nconst char *sendB1(const char *input)\n{\n    // The output result\n    static char result[256];\n\n    sprintf_s(result, \"['%i']\", B1);\n\n    // Return whatever is in the result\n    return result;\n}\nconst char *sendB2(const char *input)\n{\n    // The output result\n    static char result[512];\n\n    sprintf_s(result, \"['%i']\", B2);\n\n    // Return whatever is in the result\n    return result;\n}\nconst char *sendB3(const char *input)\n{\n    // The output result\n    static char result[512];\n\n    sprintf_s(result, \"['%i']\", B3);\n\n    // Return whatever is in the result\n    return result;\n}\nconst char *sendB4(const char *input)\n{\n    // The output result\n    static char result[512];\n\n    sprintf_s(result, \"['%i']\", B4);\n\n    // Return whatever is in the result\n    return result;\n}\nconst char *sendB5(const char *input)\n{\n    // The output result\n    static char result[512];\n\n    sprintf_s(result, \"['%i']\", B5);\n\n    // Return whatever is in the result\n    return result;\n}\n\nconst char *CALIBRATE(const char *input)\n{\n    //int nBytesSent = serial.SendData(\"1\", 1);\n\n    // Return whatever is in the result\n    return NULL;\n}\nconst char *CONNECT(const char *input)\n{\n    if (serial.Open(5, 115200)){\n        connected = true;\n    }\n    /*Hthread1 = CreateThread(NULL, 0, XYZ, &amp;Data_Of_Thread_1, 0, NULL);\n    if (Hthread1 == NULL)\n    {\n\n    LB_STATUS-&gt;SetLabel(\"Status: Failed to open thread!\");\n    }\n    else\n    {\n    btnDisConnect-&gt;Enable();\n    btnConnect-&gt;Disable();\n    btnCalib-&gt;Enable();     // disable the calibration button\n\n    }*/\n\n    return NULL;\n}\nconst char *DISCONNECT(const char *input)\n{\n    if (serial.Close()){\n        connected = false;\n    }\n\n    // Return whatever is in the result\n    return NULL;\n}\n\n\n\n\n// This function will be executed every time the script in the engine calls the script function \"pluginFunction\"\n// We can be sure in this function the ExecuteCommand registering was already done.\n// Note that the plugin takes responsibility for allocating and deleting the returned string\nVBSPLUGIN_EXPORT const char* WINAPI PluginFunction(const char *input)\n{\n    static const char cmdX[] = \"X\";\n    static const char cmdY[] = \"Y\";\n    static const char cmdZ[] = \"Z\";\n    static const char cmdXYZ[] = \"A\";\n    static const char cmdB1[] = \"B1\";\n    static const char cmdB2[] = \"B2\";\n    static const char cmdB3[] = \"B3\";\n    static const char cmdB4[] = \"B4\";\n    static const char cmdB5[] = \"B5\";\n    static const char cmdCONNECT[] = \"CONNECT\"; //show the GUI window\n    static const char cmdDISCONNECT[] = \"DISCONNECT\";   //show the GUI window\n    static const char cmdCALIBRATE[] = \"CALIBRATE\"; //show the GUI window\n\n\n\n    // _strnicmp returns 0 (which is TRUE when using this command) if strings X == Y up to the character length of X, so Toss==Toss, Toss==Tossy, etc.\n    if (_strnicmp(input, cmdX, strlen(cmdX)) == 0) return sendX(&amp;input[strlen(cmdX)]);\n    if (_strnicmp(input, cmdY, strlen(cmdY)) == 0) return sendY(&amp;input[strlen(cmdY)]);\n    if (_strnicmp(input, cmdZ, strlen(cmdZ)) == 0) return sendZ(&amp;input[strlen(cmdZ)]);\n    if (_strnicmp(input, cmdXYZ, strlen(cmdXYZ)) == 0) return sendA(&amp;input[strlen(cmdXYZ)]);\n    if (_strnicmp(input, cmdB1, strlen(cmdB1)) == 0) return sendB1(&amp;input[strlen(cmdB1)]);\n    if (_strnicmp(input, cmdB2, strlen(cmdB2)) == 0) return sendB2(&amp;input[strlen(cmdB2)]);\n    if (_strnicmp(input, cmdB3, strlen(cmdB3)) == 0) return sendB3(&amp;input[strlen(cmdB3)]);\n    if (_strnicmp(input, cmdB4, strlen(cmdB4)) == 0) return sendB4(&amp;input[strlen(cmdB4)]);\n    if (_strnicmp(input, cmdB5, strlen(cmdB5)) == 0) return sendB5(&amp;input[strlen(cmdB5)]);\n    if (_strnicmp(input, cmdCONNECT, strlen(cmdCONNECT)) == 0) return CONNECT(&amp;input[strlen(cmdCONNECT)]);\n    if (_strnicmp(input, cmdDISCONNECT, strlen(cmdDISCONNECT)) == 0) return DISCONNECT(&amp;input[strlen(cmdDISCONNECT)]);\n    if (_strnicmp(input, cmdCALIBRATE, strlen(cmdCALIBRATE)) == 0) return CALIBRATE(&amp;input[strlen(cmdCALIBRATE)]);\n\n    // Report error; should return in VBS2 as [\"{error} Unrecognized command\"] -- string in an array\n    static const char err[] = \"['Unrecognized command Use X,Y,Z,B1,B2,B3,B4,B5,A,SHOW,CONNECT']\";\n\n    return err;\n}\n\n// DllMain\nBOOL WINAPI DllMain(HINSTANCE hDll, DWORD fdwReason, LPVOID lpvReserved)\n{\n   switch(fdwReason)\n   {\n   case DLL_PROCESS_ATTACH:\n   {\n                              AllocConsole();\n                              freopen(\"CONOUT$\", \"w\", stdout);\n                              HANDLE   Hthread1 = CreateThread(NULL, 0, SerialThread, &amp;Data_Of_Thread_1, 0, NULL);\n\n\n   }\n         OutputDebugString(\"Called DllMain with DLL_PROCESS_ATTACH\\n\");\n         break;\n      case DLL_PROCESS_DETACH:\n         OutputDebugString(\"Called DllMain with DLL_PROCESS_DETACH\\n\");\n         break;\n      case DLL_THREAD_ATTACH:\n         OutputDebugString(\"Called DllMain with DLL_THREAD_ATTACH\\n\");\n         break;\n      case DLL_THREAD_DETACH:\n         OutputDebugString(\"Called DllMain with DLL_THREAD_DETACH\\n\");\n         break;\n   }\n   return TRUE;\n}\n</code></pre>\n\n<p>Many thanks</p>\n"}, {"tags": ["c++", "sockets", "visual-studio-2015", "tcp", "network-programming"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1486584315, "post_id": 42122572, "comment_id": 71413241, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "edited": false, "score": 0, "creation_date": 1486584681, "post_id": 42122572, "comment_id": 71413453, "body": "Is there a part of the code in C++ where you think the problem arises? If not, this is more of a networking question and doesn&#39;t belong on StackOverflow. It&#39;s also a very broad question, meaning that arriving at useful answer is very difficult."}, {"owner": {"reputation": 2664, "user_id": 1862101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e069875829ca4da3cd8895e468c64409?s=128&d=identicon&r=PG", "display_name": "brian beuning", "link": "https://stackoverflow.com/users/1862101/brian-beuning"}, "edited": false, "score": 1, "creation_date": 1486584682, "post_id": 42122572, "comment_id": 71413454, "body": "Connect() to a non-existent address can take up to 60 seconds to return."}, {"owner": {"reputation": 1, "user_id": 5411776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac619d8be402cac2833c62e43094a751?s=128&d=identicon&r=PG&f=1", "display_name": "batstek", "link": "https://stackoverflow.com/users/5411776/batstek"}, "edited": false, "score": 0, "creation_date": 1486586041, "post_id": 42122572, "comment_id": 71414191, "body": "I&#39;ll investigate how long between the various Connect attempts and their resolutions and update if this doesn&#39;t help.  Thanks!"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1486601711, "post_id": 42122572, "comment_id": 71420837, "body": "Does your code handle the errors that result from the unplugging correctly? Or does it perhaps enter a pathological spin loop?"}], "answers": [{"tags": [], "owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "is_accepted": false, "score": 1, "last_activity_date": 1486657914, "creation_date": 1486657914, "answer_id": 42142015, "question_id": 42122572, "link": "https://stackoverflow.com/questions/42122572/c-program-exhibits-strange-behavior-when-attempting-to-connect-on-tcp-client/42142015#42142015", "title": "C++ - Program exhibits strange behavior when attempting to connect on TCP clients to addresses that don&#39;t exist", "body": "<p>The fact that the UDP messages are not being sent at the normal rate when you are trying to connect to a TCP socket suggests that you are  using the same thread for both actions.  </p>\n\n<blockquote>\n  <p>Aside: I promise that those \"AWOL\" UDP messages have not been sent.  UDP messages don't linger around in the network waiting to be delivered.</p>\n</blockquote>\n\n<p>If the thread issuing the TCP connect request is the same thread that is pushing the UDP messages then you've found your problem.   You need to allow for the fact that a blocking TCP connect request can block the thread for a long time.  Solutions include using a non-blocking connect request, or firing up separate threads for TCP and UDP.  Which approach works best depends on your design. </p>\n\n<p>[Consider using ASIO, it provides a good tool for handling non-blocking I/O. but it probably requires a significant redesign of your application.]</p>\n\n<p>Unfortunately, this is just guessing.  We need to see at least some of the code involved to provide a definitive answer.</p>\n"}], "owner": {"reputation": 1, "user_id": 5411776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac619d8be402cac2833c62e43094a751?s=128&d=identicon&r=PG&f=1", "display_name": "batstek", "link": "https://stackoverflow.com/users/5411776/batstek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486657914, "creation_date": 1486584192, "last_edit_date": 1486588434, "question_id": 42122572, "link": "https://stackoverflow.com/questions/42122572/c-program-exhibits-strange-behavior-when-attempting-to-connect-on-tcp-client", "title": "C++ - Program exhibits strange behavior when attempting to connect on TCP clients to addresses that don&#39;t exist", "body": "<p>Working on a project in Visual Studio 2015 with a configurable amount of TCP connections to different clients.  Noticing strange behavior when run on representative hardware setups with closed networks.</p>\n\n<p>Assuming each of the TCP connections is pointing to a valid other address, the program functions perfectly, sending and receiving messages as necessary to all the different clients.  However, if I unplug one of the machines, the server starts to chug.  The most obvious sign (though not the only issue caused by this) is one of our UDP sockets which should receive messages at 10hz starts receiving at approximately 1hz.  This will continue until you re-connect the missing computer to the network.  Strangely, at this point, the telltale UDP socket mentioned earlier will quickly receive and handle all of the messages it should have been receiving during the downtime.  After this, the program will function normally again.</p>\n\n<p>I'm at home thinking about this so I don't have source code to post (and would probably be frowned on for doing this anyway), but I'm not familiar with reasons that an invalid TCP connection would cause behavior like this.  Anyone experience anything similarly and have something that worked for them in this situation?</p>\n"}, {"tags": ["c++", "templates", "variadic-templates", "variadic-functions"], "comments": [{"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 0, "creation_date": 1486584908, "post_id": 42122550, "comment_id": 71413566, "body": "What are you expecting <code>Ret</code> to be? Is it meant to be the return value?"}, {"owner": {"reputation": 822, "user_id": 408952, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c7e8c3cad50793da3ac91faeb9d0fff7?s=128&d=identicon&r=PG&f=1", "display_name": "user408952", "link": "https://stackoverflow.com/users/408952/user408952"}, "reply_to_user": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 0, "creation_date": 1486585271, "post_id": 42122550, "comment_id": 71413747, "body": "In this example I would expect <code>Ret</code> to be <code>{int&amp;}</code> and <code>Args</code> to be <code>{float}</code>. <code>Args</code> because of the trailing arguments to <code>Call</code> and <code>Ret</code> because that&#39;s what left in the function pointer arguments. But maybe that&#39;s too good to be true?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1486585468, "post_id": 42122550, "comment_id": 71413859, "body": "<code>std::tuple&lt;Ret...&gt; (*func)(Args...)</code> would be easier to work with.."}, {"owner": {"reputation": 822, "user_id": 408952, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c7e8c3cad50793da3ac91faeb9d0fff7?s=128&d=identicon&r=PG&f=1", "display_name": "user408952", "link": "https://stackoverflow.com/users/408952/user408952"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1486585571, "post_id": 42122550, "comment_id": 71413934, "body": "@Jarod42 yes, but I&#39;d prefer to have input arguments followed by return arguments to keep consistency with the rest of the code."}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 0, "creation_date": 1486585621, "post_id": 42122550, "comment_id": 71413960, "body": "I strongly suggest switching to returning a <code>std::tuple</code> instead."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1486586102, "creation_date": 1486586102, "answer_id": 42123085, "question_id": 42122550, "link": "https://stackoverflow.com/questions/42122550/split-multiple-variadic-template-packs-based-on-function-pointer-arguments/42123085#42123085", "title": "Split multiple variadic template packs based on function pointer arguments", "body": "<p>You may add a layer to fix some template parameters:</p>\n\n<pre><code>template &lt;typename ... Ts&gt;\nstruct helper\n{\n    template &lt;typename ...Ret, typename ... Us&gt;\n    static void Call(void (*func)(Ts..., Ret...), Us&amp;&amp;... args)\n    {\n\n    }\n\n};\n\n\ntemplate&lt;typename F, typename... Args&gt;\nvoid Call(F&amp;&amp; f, Args&amp;&amp;... args)\n{\n    helper&lt;Args...&gt;::Call(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/9b1f2dca82d6ae3c\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 822, "user_id": 408952, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c7e8c3cad50793da3ac91faeb9d0fff7?s=128&d=identicon&r=PG&f=1", "display_name": "user408952", "link": "https://stackoverflow.com/users/408952/user408952"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 42123085, "answer_count": 1, "score": 0, "last_activity_date": 1486586102, "creation_date": 1486584098, "last_edit_date": 1486584573, "question_id": 42122550, "link": "https://stackoverflow.com/questions/42122550/split-multiple-variadic-template-packs-based-on-function-pointer-arguments", "title": "Split multiple variadic template packs based on function pointer arguments", "body": "<p>I'm trying to create some template based function to pack a function pointer and some input arguments and later call it and store some output values in some other place. As a start I'm trying to create a function with one variadic template for the input arguments and one for the return values. This is what I came up with, but it doesn't work:</p>\n\n<pre><code>template&lt;typename... Args, typename... Ret&gt;\nvoid Call(void (*func)(Args..., Ret...), Args&amp;&amp;... args)\n{\n\n}\n\nvoid Foo(float x, int&amp; y)\n{\n    y = int(x * x);\n}\n\nint main(int argc, const char* argv[])\n{\n    Call(&amp;Foo, 2.f);\n    return 1;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/ThD4ak\" rel=\"nofollow noreferrer\">ideon</a> gives me the following error:</p>\n\n<pre><code>prog.cpp: In function 'int main(int, const char**)':\nprog.cpp:16:16: error: invalid conversion from 'void (*)(float, int&amp;)' to 'void (*)(float, float, int&amp;)' [-fpermissive]\n  Call(&amp;Foo, 2.f);\n                ^\nprog.cpp:4:6: note:   initializing argument 1 of 'void Call(void (*)(Args ..., Ret ...), Args&amp;&amp; ...) [with Args = {float}; Ret = {float, int&amp;}]'\n void Call(void (*func)(Args..., Ret...), Args&amp;&amp;... args)\n      ^\n</code></pre>\n\n<p>Why is <code>Ret</code> deduced to <code>{float, int&amp;}</code>? The function pointer argument is obviously used in the deduction, but it seems like <code>Args...</code> is not used.</p>\n"}, {"tags": ["c++", "qt", "pointers"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1486584018, "post_id": 42122496, "comment_id": 71413050, "body": "When you instantiate an object with <code>new</code> it will survive until <code>delete</code> is called on it. Since you are using raw pointers, they will survive until you call <code>delete</code> yourself or pass them to consuming functions that contain a call to <code>delete</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2446, "user_id": 1614219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/356de1228e4dc6a7665aee3c7f456390?s=128&d=identicon&r=PG", "display_name": "dureuill", "link": "https://stackoverflow.com/users/1614219/dureuill"}, "edited": false, "score": 0, "creation_date": 1486584383, "post_id": 42122523, "comment_id": 71413285, "body": "You should tell OP to prefer unique_pointer over shared_pointer when possible (ie, almost always). Also, avoid using pointers altogether when not necessary."}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 0, "creation_date": 1486584494, "post_id": 42122523, "comment_id": 71413347, "body": "Thanks for the answer. In the bar function, I am creating a pointer to a thread object. Should I delete this pointer only when the thread finishes, right? Then I need to declare the pointer in the global scope to it be accessible by other functions (e.g. getResult(double))?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "edited": false, "score": 1, "creation_date": 1486585038, "post_id": 42122523, "comment_id": 71413631, "body": "@KelvinSalton: It&#39;s typical for GUI frameworks to perform custom memory handling. In such cases, you should always follow the framework&#39;s best practices and documentation and not try to interfere by using smart pointers. At the same time, you must not assume that GUI frameworks are representative of C++ memory management in general."}], "tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": true, "score": 3, "last_activity_date": 1486585275, "last_edit_date": 1495542261, "creation_date": 1486584021, "answer_id": 42122523, "question_id": 42122496, "link": "https://stackoverflow.com/questions/42122496/doubts-about-c-pointers/42122523#42122523", "title": "Doubts about C++ pointers", "body": "<p>You're in C++ here, no one's going to delete your objects if you don't do so. Every <code>new</code> you write requires you to write a <code>delete</code> to free the memory (like in C every <code>malloc</code> needs a <code>free</code>).</p>\n\n<p>Only objects gets deleted:</p>\n\n<pre><code>void foo()\n{\n    MyClass myClass;\n    myClass.doSomething();\n}\n</code></pre>\n\n<p>Then <code>MyClass</code>'s destructor is invoked when foo returns. In general, unless you need the object to be persistent out of your scope, prefer objects over pointers, it will prevent memory leaks in your code.</p>\n\n<p>Special cases to consider:</p>\n\n<ul>\n<li>Objects could be automatically deleted if you used <a href=\"http://fr.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\">std::shared_ptr</a> or even <a href=\"http://fr.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\">unique_ptr</a> (see <a href=\"https://stackoverflow.com/questions/6876751/differences-between-unique-ptr-and-shared-ptr\">Differences between unique_ptr and shared_ptr</a>).</li>\n<li>Qt objects could automatically delete it's child without notifying you. See: <a href=\"https://stackoverflow.com/questions/2491707/memory-management-in-qt\">Memory management in Qt?</a> (may be the same for any SDK supporting object parenting).</li>\n<li>....so, as commented by Christian, you don't want to mix the two solutions together</li>\n</ul>\n\n<p>Note: For QThread, you should ask it to be deleted when done. See <a href=\"https://stackoverflow.com/questions/27190364/when-or-how-to-delete-qthread-in-qt\">When or how to delete QThread in Qt</a>.</p>\n"}], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 42122523, "answer_count": 1, "score": 0, "last_activity_date": 1486585275, "creation_date": 1486583936, "question_id": 42122496, "link": "https://stackoverflow.com/questions/42122496/doubts-about-c-pointers", "title": "Doubts about C++ pointers", "body": "<p>What happens to the <code>myClass</code> pointer when the <code>foo</code> function finishes? Is it automatically deleted?</p>\n\n<p>What happens to <code>myThread</code> pointer when the <code>bar</code> function finishes? (Supposing that <code>myThread</code> points to a <code>QThread</code> object)</p>\n\n<pre><code>void foo()\n{\n    MyClass *myClass = new MyClass();\n    myClass-&gt;doSomething();\n}\n\nvoid bar()\n{\n    // Suppose that MyThread is a QThread class\n    MyThread* myThread = new MyThread(2.5);\n\n    // Connect the Thread to get the result\n    connect(myThread, SIGNAL(sendResult(double)), this, SLOT(getResult(double)));\n\n    // Start the thread\n    myThread-&gt;start();\n}\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "com"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486584392, "post_id": 42122461, "comment_id": 71413291, "body": "Maybe the COM object isn&#39;t registered properly.  The path would not affect CLSID lookup, perhaps your C# project is giving an error message that does not correspond to the actual error"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486584674, "post_id": 42122461, "comment_id": 71413446, "body": "@M.M. Could be registration-free COM. I never used that newfangled stuff but I think it has to rely on the DLL being found via path lookup, if it isn&#39;t in the executable&#39;s directory."}, {"owner": {"reputation": 13, "user_id": 1283379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81b31bfd4ae4acfaaa6392b8a27415b?s=128&d=identicon&r=PG", "display_name": "cg0x1", "link": "https://stackoverflow.com/users/1283379/cg0x1"}, "edited": false, "score": 0, "creation_date": 1486584842, "post_id": 42122461, "comment_id": 71413529, "body": "I checked, and the DLL is registered correctly. After I added the path to the folder where the DLL resides, I ran Procmon.exe and saw the registry lookups on the CLSID succeed. I then removed the DLL path from the PATH environment variable and saw those same CLSID lookups fail. &#39;Depends.exe&#39; shows the DLL in question has dependencies on other DLL&#39;s in the same folder and I&#39;m guessing that&#39;s the reason the path has to be in the PATH environment variable. Id&#39; rather be sure than just assume it, though."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486589072, "post_id": 42122461, "comment_id": 71415891, "body": "@cg0x1 you could write an answer and self-accept"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 1283379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81b31bfd4ae4acfaaa6392b8a27415b?s=128&d=identicon&r=PG", "display_name": "cg0x1", "link": "https://stackoverflow.com/users/1283379/cg0x1"}, "is_accepted": false, "score": 0, "last_activity_date": 1486589544, "creation_date": 1486589544, "answer_id": 42124019, "question_id": 42122461, "link": "https://stackoverflow.com/questions/42122461/why-is-the-path-to-a-com-dll-needed-in-the-path-environment-variable-when-inproc/42124019#42124019", "title": "Why is the path to a COM DLL needed in the PATH Environment variable when InProcServer32 key defines the full path to the DLL?", "body": "<p>I found the reason. The C# Web Service is hosted in IIS and when the incoming call is dispatched, IIS probes for the DLL in the \"\\bin\" folder of the Web Service. Since the COM component is a Project Reference, the physical file on disk is a Runtime Callable Wrapper, not the actual DLL. Adding the path to the DLL to the PATH environment variable gives IIS the ability to find the COM DLL and resolve it successfully.</p>\n"}], "owner": {"reputation": 13, "user_id": 1283379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81b31bfd4ae4acfaaa6392b8a27415b?s=128&d=identicon&r=PG", "display_name": "cg0x1", "link": "https://stackoverflow.com/users/1283379/cg0x1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486589544, "creation_date": 1486583836, "question_id": 42122461, "link": "https://stackoverflow.com/questions/42122461/why-is-the-path-to-a-com-dll-needed-in-the-path-environment-variable-when-inproc", "title": "Why is the path to a COM DLL needed in the PATH Environment variable when InProcServer32 key defines the full path to the DLL?", "body": "<p>I'm working on a legacy C++ component that's used within a C# web service. The C# Project reference displayed as valid, but at runtime, when the COM object is created a \"CLSID lookup failed\" exception was thrown. It turns out, the root path to where the DLL is located was needed for the CLSID resolution to work. </p>\n\n<p>Why is the path to the DLL required to be present in the PATH Environment variable for the CLSID lookup to work?</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 4, "creation_date": 1486583836, "post_id": 42122434, "comment_id": 71412927, "body": "a warning is not an error"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 6, "creation_date": 1486583848, "post_id": 42122434, "comment_id": 71412937, "body": "<code>int pi = 3.14159</code> int cannot store any decimals. It will be rounded to simply 3. Change <code>int pi</code> to <code>double pi</code>."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1486583848, "post_id": 42122434, "comment_id": 71412939, "body": "<code>int pi = 3.14159</code> is missing a <code>;</code> and <code>3.14159</code> is not an <code>int</code>, hence the warning."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 7, "creation_date": 1486584020, "post_id": 42122434, "comment_id": 71413052, "body": "Side note, <code>^</code> doesn&#39;t do what you think it does. Use <code>std::pow</code>."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1486584058, "post_id": 42122434, "comment_id": 71413078, "body": "What use is having both the macro <code>PI</code> and a local variable <code>pi</code>? Surely one  pi would be enough."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1486584111, "post_id": 42122434, "comment_id": 71413106, "body": "use <code>double</code> instead of <code>float</code> unless you run out of memory"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1486584127, "post_id": 42122434, "comment_id": 71413115, "body": "@tuple_cat You can never have enough pi."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1486584470, "post_id": 42122434, "comment_id": 71413340, "body": "@tobi303: It should mostly be treated as such, though."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486584619, "post_id": 42122434, "comment_id": 71413415, "body": "Despite its name, <code>float</code> is not the default floating-point type in C++. <code>double</code> is. Use <code>double</code> for floating-point numbers unless you have a reason not to."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486584792, "post_id": 42122434, "comment_id": 71413504, "body": "@ChristianHackl sure. Nevertheless it is worth to know the difference"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 3, "creation_date": 1486584812, "post_id": 42122434, "comment_id": 71413517, "body": "I wouldn&#39;t expect <code>cin &gt;&gt; (float)radius</code> to compile. I will have to try it. ... OK, I tried, it didn&#39;t compile."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1486584844, "post_id": 42122434, "comment_id": 71413533, "body": "@tobi303: I think it&#39;s refreshing for a beginner to treat warnings like errors! :)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486584962, "post_id": 42122434, "comment_id": 71413594, "body": "Rather than using <code>^</code>, multiply the value, for example: <code>(pi * radius * radius)</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1486585040, "post_id": 42122434, "comment_id": 71413633, "body": "@Cheersandhth.-Alf I think MSVC++ has an &quot;extension&quot; that a cast to the same type yields an lvalue"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1486585257, "post_id": 42122434, "comment_id": 71413737, "body": "<code>surfacearea = 2(pi*radius^2)+2(pi*radius)* height;</code> C++ does not have implied multiplication. Also, <code>^</code> does not mean exponentiation in C++. If some book or tutorial taught you that this was valid and correct C++, burn it. If you just assumed it would work, stop doing that. (Sometimes your assumptions can appear valid even though they&#39;re not and this <i>will</i> seriously burn you.)"}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1486585267, "post_id": 42122779, "comment_id": 71413741, "body": "Also OP has to change <code>radius^2</code> to <code>radius*radius</code>."}, {"owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1486585319, "post_id": 42122779, "comment_id": 71413786, "body": "@HolyBlackCat thanks, I didn&#39;t even look at the math."}], "tags": [], "owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "is_accepted": false, "score": 1, "last_activity_date": 1486585404, "last_edit_date": 1486585404, "creation_date": 1486584924, "answer_id": 42122779, "question_id": 42122434, "link": "https://stackoverflow.com/questions/42122434/warning-converting-to-int-from-double/42122779#42122779", "title": "Warning converting to `int&#39; from `double&#39;", "body": "<p>Change <code>int</code> to <code>double</code> for <code>pi</code>, because <code>pi</code> is a floating point number, which, as stated in the comments, is C++'s default for floating point numbers. Unless there is a particular reason to use <code>float</code>, use <code>double</code> for floating-point numbers.</p>\n\n<pre><code>double pi = 3.14159;\n</code></pre>\n\n<p>And the warning will go away.</p>\n\n<p>Also, you don't have to cast your input to <code>float</code>, simply:</p>\n\n<pre><code>cin &gt;&gt; radius;\n</code></pre>\n\n<p>Additionally, at the very least, change <code>radius^2</code> to <code>radius*radius</code>. </p>\n\n<p>But better yet, avoid <code>^</code> altogether and use <code>std::pow</code>, an example of which can be <a href=\"http://en.cppreference.com/w/cpp/numeric/math/pow\" rel=\"nofollow noreferrer\">found here</a>.</p>\n\n<p>Additionally, you don't need to <code>#define PI 3.14159</code> because you never use it, and you try to define <code>pi</code> in <code>main()</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1486585539, "creation_date": 1486585539, "answer_id": 42122935, "question_id": 42122434, "link": "https://stackoverflow.com/questions/42122434/warning-converting-to-int-from-double/42122935#42122935", "title": "Warning converting to `int&#39; from `double&#39;", "body": "<p>You better declare and initialize local variables right before you need them. For constants like <code>pi</code> you better use <code>const</code> and proper type. For a proper type C++11 offers you a great tool - <code>auto</code>. And ^ does not mean power in C++ you have to use <code>std::pow()</code> instead. So your code should look like this:</p>\n\n<pre><code>const auto pi = 3.14159;\n\n//Get the radius\nauto radius = 0.0;\ncout &lt;&lt; \"enter the radius: \";\ncin &gt;&gt; radius;\n\n//Get height\nauto height = 0.0;\ncout &lt;&lt; \"enter height: \";\ncin &gt;&gt; height;\n\n//Get the surfacearea\nauto surfacearea = 2 * pi * pow( radius, 2.0 ) + 2 * pi * radius * height;\ncout &lt;&lt; \"The surfacearea is: \" &lt;&lt; surfacearea &lt;&lt; endl;\n\n//get volume\nauto volume = pow( pi*radius, 2.0 ) * height;\ncout &lt;&lt; \"The volume is: \" &lt;&lt; volume &lt;&lt; endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2645, "user_id": 7310344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNHYg.png?s=128&g=1", "display_name": "BusyProgrammer", "link": "https://stackoverflow.com/users/7310344/busyprogrammer"}, "is_accepted": false, "score": 0, "last_activity_date": 1486592386, "creation_date": 1486592386, "answer_id": 42124715, "question_id": 42122434, "link": "https://stackoverflow.com/questions/42122434/warning-converting-to-int-from-double/42124715#42124715", "title": "Warning converting to `int&#39; from `double&#39;", "body": "<p>To begin with, a warning is not an error; if it were a compilation error, then the code would not even compile. However, since it was a warning, that means your code did compile successfully and run, except that it produced a warning about something in your code. Now to the bugs in your code:</p>\n\n<p>Firstly, your declaration for the local variable <code>pi</code> is incorrect. <code>pi</code> is declared in your code as a variable of data type <strong>int</strong>, short for <em>integer</em>. An integer is only a whole number, positive and negative one, but one that is neve more specific than 10^0. Now the problem is that you are trying to store a decimal value in an int variable. While the compiler is able to make a conversion of the decimal value into an int value, you lose the precision of the value; that's because it rounds the value. If you compile this sample code:</p>\n\n<pre><code>    int floating = 1.23456789;\n    cout &lt;&lt; floating &lt;&lt; endl;\n</code></pre>\n\n<p>It will output 1 instead of 1.23456789, with the reason being that an int variable cannot store a float or double value; it however can convert this float or double value into an int value by rounding it.</p>\n\n<p>Therfore, you should change your declaration for <code>pi</code> to:</p>\n\n<pre><code>    double pi = 3.14159; // By the way, you forgot to add a semicolon here\n</code></pre>\n\n<hr>\n\n<p>Another problem: you are using unnecessary typecating in your cin statement for the radius:</p>\n\n<pre><code>    cin &gt;&gt; (float)radius;\n</code></pre>\n\n<p>You would need to use casting if you want to change the data type of a variable for a particular operation (you don't change the variable data type; you merely process its value as the data type cast. In your case, it is unrequired, because the <code>radius</code> variable is already declared as a data type of float, in the line: </p>\n\n<pre><code>    float radius;\n</code></pre>\n\n<p>Therefore, I would recommend you to simply change this cin statement to:</p>\n\n<pre><code>    cin &gt;&gt; radius;\n</code></pre>\n\n<hr>\n\n<p>One more thing: the following lines in your code have a problem:</p>\n\n<pre><code>    surfacearea = 2(pi*radius^2)+2(pi*radius)* height;\n\n    volume = (pi*radius)^2*height;\n</code></pre>\n\n<p>The \"^\" symbol does not raise a number to a power; it is called a bitwise XOR operator in c++ and it server the purpose of copying the bit if it is set in one operand but not both. You can find more information about it here: <a href=\"https://msdn.microsoft.com/en-us/library/3akey979.aspx\" rel=\"nofollow noreferrer\">Bitwise Exclusive OR Operator: ^</a></p>\n\n<p>In c++, if you want to raise a number <strong>x</strong> to a power like 2, then you have to do x * x. Alternatively, you can use the <code>pow()</code> function like: <code>pow(x, 2.0)</code>. For your code, if we use the x*x method, it would be like:</p>\n\n<pre><code>    surfacearea = 2(pi*radius*radius)+2(pi*radius)* height;\n\n    volume = (pi*radius)*(pi*radius)*height;\n</code></pre>\n\n<p>Alternatively, if we use the pow() function, then the code would look like:</p>\n\n<pre><code>    surfacearea = 2(pi*pow(radius, 2))+2(pi*radius)* height;\n\n    volume = pow((pi*radius), 2)*height;\n</code></pre>\n\n<p>Fixing these peoblems should get your code to work.</p>\n"}], "owner": {"reputation": 11, "user_id": 7536567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7fdbd932bda81e9722e498ea04736b?s=128&d=identicon&r=PG&f=1", "display_name": "Houston Hutchison", "link": "https://stackoverflow.com/users/7536567/houston-hutchison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 722, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1486592386, "creation_date": 1486583776, "question_id": 42122434, "link": "https://stackoverflow.com/questions/42122434/warning-converting-to-int-from-double", "title": "Warning converting to `int&#39; from `double&#39;", "body": "<p>Hey this is really one of the first things I've ever coded. I was wondering how might I fix this error. I am currently trying to do some research but can't find anything that is helpful in fixing it.        </p>\n\n<pre><code>#include &lt;iostream&gt;            // needed for Cin and Cout\n#include &lt;cmath&gt;\n#include &lt;csmath&gt;\nusing namespace std;\n\n/************************************\n*     defines\n*************************************/\n#define  PI  3.14159\n\n/*************************************\n*     function prototype\n*************************************/\n\nint main()\n{\n//surface and volume\n\nfloat radius; \nfloat height;\nfloat surfacearea;\nfloat volume;\nint pi = 3.14159\n\n//Get the radius\ncout &lt;&lt; \"enter the radius: \";\ncin &gt;&gt; (float)radius;\n\n//Get height\ncout &lt;&lt; \"enter height: \";\ncin &gt;&gt; height;\n\n//Get the surfacearea\nsurfacearea = 2(pi*radius^2)+2(pi*radius)* height;\ncout &lt;&lt; \"The surfacearea is: \" &lt;&lt; surfacearea;\n\n//get volume\nvolume = (pi*radius)^2*height;\ncout &lt;&lt; \"The volume is: \" &lt;&lt; volume &lt;&lt; endl;\n\n\n\n\n\nsystem (\"pause\");\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "macos", "ssl", "secure-transport"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6342489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e253da272477b357a8b6669fab33178?s=128&d=identicon&r=PG&f=1", "display_name": "slowcheetah", "link": "https://stackoverflow.com/users/6342489/slowcheetah"}, "edited": false, "score": 0, "creation_date": 1486747686, "post_id": 42143588, "comment_id": 71495352, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 2991, "user_id": 992845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17e41bb5ef769454388371c036806d96?s=128&d=identicon&r=PG", "display_name": "Brendan Shanks", "link": "https://stackoverflow.com/users/992845/brendan-shanks"}, "is_accepted": false, "score": 0, "last_activity_date": 1486662666, "creation_date": 1486662666, "answer_id": 42143588, "question_id": 42122223, "link": "https://stackoverflow.com/questions/42122223/apple-secure-transport-code-error/42143588#42143588", "title": "apple secure transport code error", "body": "<p><code>SSLRead()</code> and <code>SSLWrite()</code> should be called from your application code, not from inside the <code>SSLReadFunc</code> and <code>SSLWriteFunc</code> callbacks.</p>\n\n<p>In the <code>SSLReadFunc</code> and <code>SSLWriteFunc</code> callbacks, SecureTransport is asking you to receive/send data from your socket (which you set using <code>SSLSetConnection</code>). So in <code>SSLWriteFunc</code>, you are being given encrypted data to send out over your socket. Your implementation of <code>SSLWriteFunc</code> should look something like:</p>\n\n<pre><code>OSStatus mySSLWriteFunc(SSLConnectionRef connection, const void *data, size_t *dataLength)\n{\n    int *handle;\n    SSLGetConnection(connection, &amp;handle);\n    size_t result = write(*handle, data, *dataLength);\n    if (result == -1)\n    {\n        if ((errno == EAGAIN) || (errno == EWOULDBLOCK))\n            return errSSLWouldBlock;\n        else\n            // fill this in\n    }\n    else\n    {\n        *dataLength = result;\n    }\n    return noErr;\n}\n</code></pre>\n\n<p>You'll want to add additional error handling to that (in case the socket closes, etc) but that should be the basic structure.</p>\n"}], "owner": {"reputation": 57, "user_id": 6342489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5e253da272477b357a8b6669fab33178?s=128&d=identicon&r=PG&f=1", "display_name": "slowcheetah", "link": "https://stackoverflow.com/users/6342489/slowcheetah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486662666, "creation_date": 1486582931, "question_id": 42122223, "link": "https://stackoverflow.com/questions/42122223/apple-secure-transport-code-error", "title": "apple secure transport code error", "body": "<p>I have the following code of Apple Security API initialisation:</p>\n\n<pre><code>    OSStatus status = noErr;\n    sslContext = SSLCreateContext(kCFAllocatorDefault, kSSLClientSide, kSSLStreamType);\n    if (sslContext == nullptr)\n    {\n        throw std::runtime_error(\"cannot create ssl context\");\n    }\n\n    status = SSLSetIOFuncs(sslContext, socketRead, socketWrite);\n    if (status != noErr)\n    {\n        throw std::runtime_error(\"cannot set ssl io functions\");\n    }\n\n    status = SSLSetConnection(sslContext, reinterpret_cast&lt;void*&gt;(&amp;handle));\n    if (status != noErr)\n    {\n        throw std::runtime_error(\"cannot set ssl connections\");\n    }\n\n    status = SSLSetPeerDomainName(sslContext, address.c_str(), address.length());\n    if (status != noErr)\n    {\n        throw std::runtime_error(\"cannot set ssl peer domain name\");\n    }\n\n    status = SSLSetSessionOption(sslContext, kSSLSessionOptionBreakOnServerAuth, true);\n    if (status != noErr)\n    {\n        throw std::runtime_error(\"cannot set ssl options\");\n    }\n\n    status = SSLHandshake(sslContext);\n    if (status != noErr)\n    {\n        throw std::runtime_error(\"cannot perform ssl handshake\");\n    }\n</code></pre>\n\n<p>On this line:</p>\n\n<pre><code>status = SSLHandshake(sslContext);\n</code></pre>\n\n<p>my SSLWriteFunc callback is called. It tries to send 174 bytes (I didn't mean to send it) via SSLWrite but it fails anyway. But in documentation about SSLHandshake it is written \"On successful return, the session is ready for normal secure communication using the functions SSLRead(<em>:</em>:<em>:</em>:) and SSLWrite(<em>:</em>:<em>:</em>:).\". So in my case there was no return from this method and then my SSLWriteFunc suddenly tried to send data via SSLWrite. I just don't understand what I'm doing wrong. Please guys help me. </p>\n"}, {"tags": ["c++", "vector", "stl", "llvm"], "comments": [{"owner": {"reputation": 31371, "user_id": 281108, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b160d50a7ecfe6018348629cb8677538?s=128&d=identicon&r=PG", "display_name": "Ismail Badawi", "link": "https://stackoverflow.com/users/281108/ismail-badawi"}, "edited": false, "score": 3, "creation_date": 1486620146, "post_id": 42122054, "comment_id": 71425847, "body": "Relevant talk: <a href=\"https://www.youtube.com/watch?v=vElZc6zSIXM\" rel=\"nofollow noreferrer\">youtube.com/watch?v=vElZc6zSIXM</a>"}], "answers": [{"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 521, "user_id": 1669844, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7c8af68b3c07151ea0e87a7e385ce9a?s=128&d=identicon&r=PG", "display_name": "user1669844", "link": "https://stackoverflow.com/users/1669844/user1669844"}, "edited": false, "score": 0, "creation_date": 1486676214, "post_id": 42122244, "comment_id": 71461058, "body": "@lax you&#39;ll find an overview on <a href=\"https://en.wikipedia.org/wiki/Exception_safety\" rel=\"nofollow noreferrer\">wikipedia</a>"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 5, "last_activity_date": 1486583378, "last_edit_date": 1592644375, "creation_date": 1486582993, "answer_id": 42122244, "question_id": 42122054, "link": "https://stackoverflow.com/questions/42122054/what-is-the-difference-between-stdvector-and-llvmsmallvector-which-one-to-u/42122244#42122244", "title": "What is the difference between std::vector and llvm::SmallVector? which one to use when?", "body": "<blockquote>\n<p>What is the difference between std::vector and LLVM::SmallVector?</p>\n</blockquote>\n<p>I assume that you are familiar with the standard vector. llvm::SmallVector is described in the documentation:</p>\n<blockquote>\n<p>This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</p>\n<p>It contains some number of elements in-place, which allows it to avoid heap allocation when the actual number of elements is below that threshold. This allows normal &quot;small&quot; cases to be fast without losing generality for large inputs.</p>\n<p>Note that this does not attempt to be exception safe.</p>\n</blockquote>\n<hr />\n<blockquote>\n<p>which one to use when?</p>\n</blockquote>\n<p>Use std::vector when:</p>\n<ul>\n<li>You need exception safety OR</li>\n<li>You don't want extra dependencies beyond the standard library OR</li>\n<li>The container isn't a bottleneck OR</li>\n<li>Performance doesn't even matter OR</li>\n<li>The vector is going to be large anyway, so the optimization wouldn't have an impact</li>\n</ul>\n<p>Use a small-optimized implementation (such as llvm::SmallVector, or another implementation) when</p>\n<ul>\n<li>None of the above applies</li>\n</ul>\n<hr />\n<blockquote>\n<p>Also what happens if we push more elements in llvm::SmallVector than its size?</p>\n</blockquote>\n<p>When the internal small buffer is exhausted, a dynamic buffer is allocated and it will behave like <code>std::vector</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "edited": false, "score": 1, "creation_date": 1527797092, "post_id": 42122275, "comment_id": 88274012, "body": "In regards to the dependency on the llvm libraries, the Boost library collection has <a href=\"https://www.boost.org/doc/libs/1_67_0/doc/html/boost/container/small_vector.html\" rel=\"nofollow noreferrer\">boost::container::small_vector&lt;T, N, A&gt;</a>"}], "tags": [], "owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "is_accepted": true, "score": 15, "last_activity_date": 1486583116, "creation_date": 1486583116, "answer_id": 42122275, "question_id": 42122054, "link": "https://stackoverflow.com/questions/42122054/what-is-the-difference-between-stdvector-and-llvmsmallvector-which-one-to-u/42122275#42122275", "title": "What is the difference between std::vector and llvm::SmallVector? which one to use when?", "body": "<p><a href=\"http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html#details\" rel=\"noreferrer\"><code>llvm::SmallVector</code></a> is a vector optimized for small arrays. This optimization comes from not performing heap allocations for a limited number of elements.</p>\n\n<p>In the event that you add more elements than are described to be allocated using automatic storage it will fall back to the behavior of <code>std::vector</code> and allocate larger and larger arrays.</p>\n\n<pre><code>llvm::SmallVector&lt;int, 10&gt; smallVector;\nfor(int i = 0; i &lt; 10; i++)\n{\n    smallVector.push_back(i);\n}\n\n// No heap allocations have been performed up to this point.\n\nsmallVector.push_back(11);\n\n// Only 10 spaces for non heap allocated elements, \n// so the push_back above causes a heap allocation.\n</code></pre>\n\n<p>SmallVector can have a performance benefit when you know you will consistently have a small number of elements and won't run into heap allocations. This performance benefit comes at the cost of exception safety and a dependency on the llvm libraries.</p>\n"}], "owner": {"reputation": 521, "user_id": 1669844, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7c8af68b3c07151ea0e87a7e385ce9a?s=128&d=identicon&r=PG", "display_name": "user1669844", "link": "https://stackoverflow.com/users/1669844/user1669844"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5106, "favorite_count": 2, "accepted_answer_id": 42122275, "answer_count": 2, "score": 12, "last_activity_date": 1548866891, "creation_date": 1486582367, "last_edit_date": 1548866891, "question_id": 42122054, "link": "https://stackoverflow.com/questions/42122054/what-is-the-difference-between-stdvector-and-llvmsmallvector-which-one-to-u", "title": "What is the difference between std::vector and llvm::SmallVector? which one to use when?", "body": "<p>I am trying to understand the use of <code>SmallVector</code> container in LLVM. I think <code>std::vector</code> can be used in place of small vector. Also what happens if we push more elements in <code>llvm::SmallVector</code> than its size?</p>\n"}, {"tags": ["c++", "shared-ptr"], "comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486583264, "post_id": 42121821, "comment_id": 71412593, "body": "I think you should use <code>std::vector&lt;Book&gt;</code> and <code>std::vector&lt;Author&gt;</code>. No pointer, no <code>std::shared_ptr</code>, no <code>std::weak_ptr</code>. Manage the relationship between books and authors in a <b>relational database</b>; that&#39;s what they are for. Treat the <code>std::vector&lt;Book&gt;</code> and <code>std::vector&lt;Author&gt;</code> objects as temporarily needed results of database queries."}, {"owner": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486593656, "post_id": 42121821, "comment_id": 71418063, "body": "@ChristianHackl You are right and I also want this but I would like to use a <a href=\"http://www.codesynthesis.com/products/odb/\" rel=\"nofollow noreferrer\">ORM library</a> and there I have to use <code>vectors</code> of <code>shared_ptr</code> to represent <a href=\"http://www.codesynthesis.com/products/odb/doc/manual.xhtml#6.2.2\" rel=\"nofollow noreferrer\">one to many</a> relationships. Or is there another way for doing this?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1486620876, "post_id": 42121821, "comment_id": 71426135, "body": "@Cilencio: Well, why use a library if it forces you to use a flawed design? ORM is not a goal in itself."}, {"owner": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486653189, "post_id": 42121821, "comment_id": 71446678, "body": "@ChristianHackl Okay thanks I will think about it. But am I right that I have to use <code>std::vector&lt;Book*&gt;</code> then because the classes (headers) dependent on each other and I have to use forward declaration for one class (here <code>Book</code>)?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486707318, "post_id": 42121821, "comment_id": 71471395, "body": "@Cilencio: Yes, if <code>Book</code> contains a <code>std::vector&lt;Author&gt;</code> and one <code>Author</code> contains a <code>std::vector&lt;Book&gt;</code>, then you&#39;d have infinite recursion, so it&#39;s not possible. I think an important question has not been asked so far: What operations will you perform on this data structure? If, e.g., the goal is to display a list of books with a list of authors for each item, then it&#39;s not necessary for <code>Author</code> to contain a <code>std::vector&lt;Book&gt;</code>."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486707728, "post_id": 42121821, "comment_id": 71471580, "body": "@Cilcenio: P.S.: <code>std::vector&lt;Book*&gt;</code> will work but may be harder to get right than the original <code>std::weak_ptr</code> solution. It depends. The big underlying architectural problem you are experiencing here is called the <i>object-relational impedance mismatch</i>. Books and authors who wrote them are a classical example for relational data, yet you try to fit it into an object-oriented, or parent-child, data structure. You will find a lot of reading material on this topic on the internet. Make sure to search also in softwareengineering.stackexchange.com."}], "answers": [{"comments": [{"owner": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "edited": false, "score": 0, "creation_date": 1486594552, "post_id": 42121907, "comment_id": 71418456, "body": "Thank you for the answer that helped me a lot. Can you please have a look on my comment below the question? What do you think would be the best design pattern for the one to many approach? Or shouldn&#39;t I use such an ORM library?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "edited": false, "score": 1, "creation_date": 1486622817, "post_id": 42121907, "comment_id": 71426981, "body": "@Cilenco: <i>&quot;Should I use an ORM library?&quot;</i> is a very broad and opinion-based question! :) I think the only answer we can give you is to choose the right tool for your software&#39;s (or your employer&#39;s) requirements, never to use a tool just so you can use a tool, and keep in mind that every solution has benefits and liabilities. Who knows, even C++ itself may be a bad choice for this specific problem, but we cannot say without understanding the problem."}, {"owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "edited": false, "score": 3, "creation_date": 1549980806, "post_id": 42121907, "comment_id": 96095403, "body": "Does not the latter case cause the copying of <code>Author</code> object being passed?"}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 19, "last_activity_date": 1518774808, "last_edit_date": 1518774808, "creation_date": 1486581877, "answer_id": 42121907, "question_id": 42121821, "link": "https://stackoverflow.com/questions/42121821/create-shared-ptr-from-reference/42121907#42121907", "title": "Create shared_ptr from reference", "body": "<p>Though, your error stems from the fact that the <code>std::shared_ptr&lt;Author&gt;</code> constructor in use expects <code>Author*</code>, but the expression <code>&amp;t_author</code> results to an object of type <code>const Author*</code></p>\n\n<hr>\n\n<p>Another wrong thing:</p>\n\n<pre><code>void Book::setAuthor(const Author&amp; t_author)\n{\n   m_author = std::shared_ptr&lt;Author&gt;(&amp;t_author);\n}\n</code></pre>\n\n<p>Imagine calling <code>book.setAuthor(Author(\"Herb Sutter\"));</code>, you will have a <strong>dangling pointer</strong> because <code>t_author</code> will cease to exist after that function completes.</p>\n\n<hr>\n\n<p>You need to copy or move the object into your <code>std::shared_ptr</code> instance. Use <code>std::make_shared&lt;T&gt;</code> to create your <code>std::shared_ptr&lt;T&gt;</code> objects whenever possible. </p>\n\n<pre><code>void Book::setAuthor(const Author&amp; t_author)\n{\n   m_author = std::make_shared&lt;Author&gt;(t_author);\n}\n</code></pre>\n\n<p>Better still:</p>\n\n<pre><code>void Book::setAuthor(Author t_author)\n{\n   m_author = std::make_shared&lt;Author&gt;(std::move(t_author));\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "edited": false, "score": 0, "creation_date": 1486594755, "post_id": 42121934, "comment_id": 71418549, "body": "So with my design I wouldn&#39;t be the owner anymore of the reference? Can you please explain this in more detail? Do you may have also ideas for a good design pattern with the odb (orm) library (see comments under the question)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "edited": false, "score": 0, "creation_date": 1486594928, "post_id": 42121934, "comment_id": 71418632, "body": "In your design you pass object by const reference, so you can call const methods of it or make a copy. In your class you use <code>std::shared_ptr</code> which suggests shared ownership. Something wrong here you should either not use <code>std::shared_ptr</code> or pass objects that already owned by <code>std::shared_ptr</code> for your class to be able to share."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "edited": false, "score": 0, "creation_date": 1486595049, "post_id": 42121934, "comment_id": 71418683, "body": "And there is no such thing as owner of the reference. If you pass object by reference you assume that function you pass it to cannot take or share ownership of it."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 8, "last_activity_date": 1486582239, "last_edit_date": 1486582239, "creation_date": 1486581967, "answer_id": 42121934, "question_id": 42121821, "link": "https://stackoverflow.com/questions/42121821/create-shared-ptr-from-reference/42121934#42121934", "title": "Create shared_ptr from reference", "body": "<p>If you want to make a copy use <code>std::make_shared</code>:</p>\n\n<pre><code>void Book::setAuthor(const Author&amp; t_author)\n{\n   m_author = std::make_shared&lt;Author&gt;(t_author);\n}\n</code></pre>\n\n<p>but this is a wrong design, if you expect to keep ownership of passed objects you should pass <code>std::shared_ptr</code> to your function instead of const reference:</p>\n\n<pre><code>void Book::setAuthor( std::shared_ptr&lt;Author&gt; t_author)\n{\n   m_author = std::move( t_author );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 3, "last_activity_date": 1486582077, "creation_date": 1486582077, "answer_id": 42121972, "question_id": 42121821, "link": "https://stackoverflow.com/questions/42121821/create-shared-ptr-from-reference/42121972#42121972", "title": "Create shared_ptr from reference", "body": "<p>This is likely undefined behavior. <code>shared_ptr</code> indicates <em>ownership</em> of the object it points to. In just about every conceivable scenario, <code>t_author</code> refers to an existing <code>Author</code> that is owned by something else. There will almost surely be two locations that try to destroy the instance.</p>\n\n<p>If you <em>must</em> create a <code>shared_ptr</code> to an existing instance, you can look into using <a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"nofollow noreferrer\">enable_shared_from_this</a>, but this only works if <code>t_author</code> was created with <code>std::make_shared</code>. And if this is the case, you might as well change your function to accept the <code>shared_ptr</code> directly. Alternatively, you can create a <code>shared_ptr</code> with a custom deleter that does nothing. But at that point, there is nothing to gain from using <code>shared_ptr</code>, except perhaps compatibility with some interface.</p>\n"}], "owner": {"reputation": 6194, "user_id": 2047987, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/WY0Zw.png?s=128&g=1", "display_name": "Cilenco", "link": "https://stackoverflow.com/users/2047987/cilenco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27577, "favorite_count": 1, "accepted_answer_id": 42121907, "answer_count": 3, "score": 13, "last_activity_date": 1518774808, "creation_date": 1486581570, "question_id": 42121821, "link": "https://stackoverflow.com/questions/42121821/create-shared-ptr-from-reference", "title": "Create shared_ptr from reference", "body": "<p>I'm relativly new to C++ and this seams like a noob question but I wasn't able to solve it with other resources on the internet.</p>\n\n<p>I'm trying to create a shared_ptr from a reference. I have following <code>Book</code> class:</p>\n\n<pre><code>#include &lt;memory&gt;\n#include \"Author.hpp\"\n\nclass Book\n{\n   public:\n      void setAuthor(const Author&amp; t_author);\n\n   private:\n      std::shared_ptr&lt;Author&gt; m_author;\n}\n</code></pre>\n\n<p>And this is my <code>Author</code> class:</p>\n\n<pre><code>#include &lt;memory&gt;\nclass Book;\n\nclass Author\n{\n   public:\n      void addBook(const Book&amp; t_book);\n\n   private:\n      std::vector&lt;std::weak_ptr&lt;Book&gt;&gt; m_books;\n}\n</code></pre>\n\n<p>I tired to implement the <code>Book::setAuthor</code> method like so:</p>\n\n<pre><code>void Book::setAuthor(const Author&amp; t_author)\n{\n   m_author = std::shared_ptr&lt;Author&gt;(&amp;t_author);\n}\n</code></pre>\n\n<p>But if I try to compile this I get:</p>\n\n<blockquote>\n  <p>Invalide conversion from const Author* to Author*</p>\n  \n  <p>Invalide conversion from sizeof to const Author</p>\n</blockquote>\n\n<p>Can you please tell me what is wrong with my code? I also tried the same with the weak_ptr but this does not work either.</p>\n"}, {"tags": ["c++", "css", "qt"], "answers": [{"tags": [], "owner": {"reputation": 630, "user_id": 2386508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tYMpG.jpg?s=128&g=1", "display_name": "Andrew Leedham", "link": "https://stackoverflow.com/users/2386508/andrew-leedham"}, "is_accepted": true, "score": 3, "last_activity_date": 1486581952, "creation_date": 1486581952, "answer_id": 42121929, "question_id": 42121809, "link": "https://stackoverflow.com/questions/42121809/how-to-add-multiple-style-classes-to-a-qtwidget/42121929#42121929", "title": "How to add multiple Style Classes to a QtWidget", "body": "<p>I would imagine the setProperty function sets the class attribute directly, so separating them with spaces like you would in html should work.</p>\n\n<pre><code>minimizeApp = new QPushButton();\nminimizeApp -&gt; setProperty(\"class\", \"undecorated-widgets second-class third-class\");\n</code></pre>\n"}], "owner": {"reputation": 5278, "user_id": 3663765, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/03caa8002f94a2ffd40630239d7a35c6?s=128&d=identicon&r=PG&f=1", "display_name": "Program-Me-Rev", "link": "https://stackoverflow.com/users/3663765/program-me-rev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 42121929, "answer_count": 1, "score": 1, "last_activity_date": 1486583933, "creation_date": 1486581536, "last_edit_date": 1486583933, "question_id": 42121809, "link": "https://stackoverflow.com/questions/42121809/how-to-add-multiple-style-classes-to-a-qtwidget", "title": "How to add multiple Style Classes to a QtWidget", "body": "<p>I add a Style class to a Qt widget as follows:</p>\n\n<pre><code>minimizeApp = new QPushButton();\nminimizeApp -&gt; setProperty(\"class\", \"undecorated-widgets\");\n</code></pre>\n\n<p>The problem I'm having is that I can only add one style class to an element. If I try adding a second one the previous one gets lost.  </p>\n\n<p>How can I add multiple style classes to an element?  </p>\n\n<p>In Java this is possible through:</p>\n\n<pre><code>label.getStyleClass().addAll(\"style-class-1\", \"style-class-2\", \"......\");\n</code></pre>\n\n<p>Is this possible in Qt?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1486580856, "post_id": 42121597, "comment_id": 71411235, "body": "<code>gets_s(str);</code> is undefined behavior."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486580873, "post_id": 42121597, "comment_id": 71411246, "body": "This is an artifact of using character arrays.  Use <code>std::string</code> instead."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 5, "creation_date": 1486580929, "post_id": 42121597, "comment_id": 71411282, "body": "Do not use <code>char[]</code>, <code>getchar</code> and <code>gets_s</code>. Use <code>std::string</code>, <code>std::getline</code> and <code>std::cin</code>."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 4, "creation_date": 1486580954, "post_id": 42121597, "comment_id": 71411295, "body": "<code>char str[] = &quot;&quot;, symb;</code>? Really? ...whatever material you are using to learn C++, please throw it away and burn it now."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 0, "last_activity_date": 1486581009, "creation_date": 1486581009, "answer_id": 42121644, "question_id": 42121597, "link": "https://stackoverflow.com/questions/42121597/cannot-get-input-string-data/42121644#42121644", "title": "Cannot get input string data", "body": "<p>In C++ the common string input idiom involves <code>std::string</code> and <code>std::getline</code>:  </p>\n\n<pre><code>string text;\ncout &lt;&lt; \"Please enter String: \";\ngetline(cin, text);\n</code></pre>\n\n<p>The <code>string</code> includes search methods, such as <code>find</code>.  </p>\n"}], "owner": {"reputation": 886, "user_id": 7179008, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-3J_iVpOejjY/AAAAAAAAAAI/AAAAAAAAAIU/zxbGBjr8bRw/photo.jpg?sz=128", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7179008/viktor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 42121644, "answer_count": 1, "score": -1, "last_activity_date": 1486581009, "creation_date": 1486580806, "question_id": 42121597, "link": "https://stackoverflow.com/questions/42121597/cannot-get-input-string-data", "title": "Cannot get input string data", "body": "<p>I want to get input string from a user, to avoid spaces i used gets_s and it outputs this error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/TZ7iq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TZ7iq.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code> char str[] = \"\", symb;\n    int count = 0;\n    cout &lt;&lt; \"Please enter String: \";\n    gets_s(str);\n    cout &lt;&lt; \"Which character you want to find: \";\n    symb = getchar();\n\n    for (int i = 0; i &lt; strlen(str); i++)\n    {\n        if (str[i]==symb)\n        {\n            count++;\n        }\n    }\n\n    cout &lt;&lt; \"Character: \" &lt;&lt; symb &lt;&lt; \" found \" &lt;&lt; count &lt;&lt; \" times.\";\n</code></pre>\n"}, {"tags": ["c++", "opengl", "graphics"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1486581179, "post_id": 42121494, "comment_id": 71411390, "body": "I am just guessing, but if <code>P1(x)</code> is the coordinates in one projection and <code>P2(x)</code> in the other, then you could get a smooth transition <code>f  P1(x) + (1-f) P2(x)</code> by smoothly changing f from 0 to 1"}, {"owner": {"reputation": 6794, "user_id": 2543, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5ff1e1b35d1fc13baf08d807fb2097a7?s=128&d=identicon&r=PG", "display_name": "Jared Updike", "link": "https://stackoverflow.com/users/2543/jared-updike"}, "edited": false, "score": 0, "creation_date": 1487786529, "post_id": 42121494, "comment_id": 71945043, "body": "This question is interesting and clear, but as written it makes it sound like you are asking for someone to do the work for you. You should add more details, like the matrix for the ortho and the matrix for the perspective transformation, etc. As the other comment mentions, if your ortho projection is a 4x4 matrix and the perspective matrix is too, you could try a linear combination of the two."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 2741426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002219575928/picture?type=large", "display_name": "Jackson Rushing", "link": "https://stackoverflow.com/users/2741426/jackson-rushing"}, "edited": false, "score": 0, "creation_date": 1486582366, "post_id": 42122007, "comment_id": 71412052, "body": "Great, thanks! I&#39;d thought about dolly zooms, but I hadn&#39;t thought of &quot;replicating&quot; the orthographic view in a perspective view with 0 field of view. So theoretically, all I&#39;d have to do is tweak the camera position with a 0 field of view to recreate the orthographic scene, and then interpolate the field of view and camera position?"}, {"owner": {"reputation": 13832, "user_id": 1122135, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8d21ba1a66bb0bf71d15ca8d512ba056?s=128&d=identicon&r=PG", "display_name": "Robert Rouhani", "link": "https://stackoverflow.com/users/1122135/robert-rouhani"}, "reply_to_user": {"reputation": 77, "user_id": 2741426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002219575928/picture?type=large", "display_name": "Jackson Rushing", "link": "https://stackoverflow.com/users/2741426/jackson-rushing"}, "edited": false, "score": 0, "creation_date": 1486582560, "post_id": 42122007, "comment_id": 71412176, "body": "Theoretically, yeah. A lot of results came up for Unity specific stuff, but the theory/math are the same - <a href=\"http://answers.unity3d.com/questions/58306/transition-a-camera-from-ortographic-to-perspectiv.html\" rel=\"nofollow noreferrer\" title=\"transition a camera from ortographic to perspectiv.html\">answers.unity3d.com/questions/58306/&hellip;</a>"}], "tags": [], "owner": {"reputation": 13832, "user_id": 1122135, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8d21ba1a66bb0bf71d15ca8d512ba056?s=128&d=identicon&r=PG", "display_name": "Robert Rouhani", "link": "https://stackoverflow.com/users/1122135/robert-rouhani"}, "is_accepted": true, "score": 5, "last_activity_date": 1486582437, "last_edit_date": 1486582437, "creation_date": 1486582190, "answer_id": 42122007, "question_id": 42121494, "link": "https://stackoverflow.com/questions/42121494/smoothly-transition-from-orthographic-projection-to-perspective-projection/42122007#42122007", "title": "Smoothly transition from orthographic projection to perspective projection?", "body": "<p>There are probably a handful of ways of accomplishing this, the two I found that seemed like they would work the best were:</p>\n\n<ol>\n<li><p>Lerping all the matrix elements from one matrix to the other. Apparently this works pretty well all things considered. I don't believe this transition will appear linear, though. You could try to give it an easing function instead of doing the interpolation linearly</p></li>\n<li><p>A <a href=\"https://en.wikipedia.org/wiki/Dolly_zoom\">dolly zoom</a> on the perspective matrix going to/from a near 0 field of view. You would pop from the orthographic matrix to the near 0 perspective matrix and lerp the fov out to your target, and probably be heavily tweaking the near/far planes as you go. In reverse you would lerp to 0 and then pop to the orthographic matrix. The idea behind this being that things appear flatter with a lower fov and that a fov of 0 is essentially an orthographic projection. This is more complex but can also be tweaked a whole lot more.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7892327, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Jg9Y5XlCutk/AAAAAAAAAAI/AAAAAAAAAGc/q-F53OHjPo0/photo.jpg?sz=128", "display_name": "Nathan Petrangelo", "link": "https://stackoverflow.com/users/7892327/nathan-petrangelo"}, "is_accepted": false, "score": 1, "last_activity_date": 1542036624, "last_edit_date": 1542036624, "creation_date": 1492653128, "answer_id": 43508852, "question_id": 42121494, "link": "https://stackoverflow.com/questions/42121494/smoothly-transition-from-orthographic-projection-to-perspective-projection/43508852#43508852", "title": "Smoothly transition from orthographic projection to perspective projection?", "body": "<p>I managed to do this without the explicit use of matrices. I used Java so the syntax is different but comparable. One of the things I used was this mix() function. It returns <code>value1</code> when <code>factor</code> is 1 and <code>value2</code> when <code>factor</code> is 0, and has a linear transition for every value in between.</p>\n\n<pre><code>private double mix(double value1, double value2, double factor)\n{\n    return (value1 * factor) + (value2 * (1 - factor));\n}\n</code></pre>\n\n<p>When I call this function, I use value1 for perspective and value2 for orthographic, like so:<code>mix(focalLength/voxel.z, orthoZoom, factor)</code></p>\n\n<p>When determining your focal length and orthographic zoom factor, it is helpful to know that anything at distance <code>focalLength/orthoZoom</code> away from the camera will project to the same point throughout the transition.</p>\n\n<p>Hope this helps. You can download my program to see how it looks at <a href=\"https://github.com/npetrangelo/3rd-Dimension/releases\" rel=\"nofollow noreferrer\">https://github.com/npetrangelo/3rd-Dimension/releases</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1707, "user_id": 858219, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Uj0D6.png?s=128&g=1", "display_name": "Paul Houx", "link": "https://stackoverflow.com/users/858219/paul-houx"}, "is_accepted": false, "score": 1, "last_activity_date": 1541921948, "last_edit_date": 1541921948, "creation_date": 1530811589, "answer_id": 51196968, "question_id": 42121494, "link": "https://stackoverflow.com/questions/42121494/smoothly-transition-from-orthographic-projection-to-perspective-projection/51196968#51196968", "title": "Smoothly transition from orthographic projection to perspective projection?", "body": "<p>If you have access to a programmable pipeline (a.k.a. shaders), you can do the transition in the vertex shader. I have found that this works very well and does not introduce artifacts. Here's a GLSL code snippet:</p>\n\n<pre><code>#version 150\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform float uNearClipPlane = 1.0;\nuniform vec2  uPerspToOrtho = vec2( 0.0 );\n\nin vec4 inPosition;\n\nvoid main( void )\n{    \n    // Calculate view space position.\n    vec4 view = uViewMatrix * uModelMatrix * inPosition;\n\n    // Scale x&amp;y to 'undo' perspective projection.\n    view.x = mix( view.x, view.x * ( -view.z / uNearClipPlane ), uPerspToOrtho.x );\n    view.y = mix( view.y, view.y * ( -view.z / uNearClipPlane ), uPerspToOrtho.y );\n\n    // Output clip space coordinate.\n    gl_Position = uProjectionMatrix * view;\n}\n</code></pre>\n\n<p>In the code, <code>uPerspToOrtho</code> is a <code>vec2</code> (e.g. a <code>float2</code>) that contains a value in the range [0..1]. When set to 0, your coordinates will use perspective projection (assuming your projection matrix is a perspective one). When set to 1, your coordinates will behave as if projected by an orthographic projection matrix. You can do this separately for the X- and Y-axes. </p>\n\n<p>'uNearClipPlane' is the near plane distance, which is the value you used to create the perspective projection matrix.</p>\n\n<p>When converting this to HLSL, you may need to use <code>view.z</code> instead of <code>-view.z</code>, but I could be wrong.</p>\n\n<p>I hope you find this useful.</p>\n\n<p>Edit: instead of passing in the near clip plane distance, you can also extract it from the projection matrix. For OpenGL, this is how:</p>\n\n<pre><code>float zNear = 2.0 * uProjectionMatrix[3][2] / ( 2.0 * uProjectionMatrix[2][2] - 2.0 );\n</code></pre>\n\n<p>Edit 2: you can optimize the code by doing the scaling on x and y at the same time:</p>\n\n<pre><code>view.xy = mix( view.xy, view.xy * ( -view.z / uNearClipPlane ), uPerspToOrtho.xy );\n</code></pre>\n\n<p>To get rid of the division, you could multiply by the inverse near plane distance:</p>\n\n<pre><code>uniform float uInvNearClipPlane; // = 1.0 / zNear\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 2741426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002219575928/picture?type=large", "display_name": "Jackson Rushing", "link": "https://stackoverflow.com/users/2741426/jackson-rushing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2219, "favorite_count": 3, "accepted_answer_id": 42122007, "answer_count": 3, "score": 6, "last_activity_date": 1542036624, "creation_date": 1486580486, "question_id": 42121494, "link": "https://stackoverflow.com/questions/42121494/smoothly-transition-from-orthographic-projection-to-perspective-projection", "title": "Smoothly transition from orthographic projection to perspective projection?", "body": "<p>I'm developing a game that consists of 2 stages, one of these has an orthographic projection, and the other stage has a perspective projection. </p>\n\n<p>Currently when we go between modes we fade to black, and then come back in the new camera mode. </p>\n\n<p>How would I go about smoothly transitioning between the two?</p>\n"}, {"tags": ["c++", "parallel-processing", "openmp", "nested-loops"], "comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 1, "creation_date": 1486583398, "post_id": 42121330, "comment_id": 71412686, "body": "This is a rather broad question. There are many factors that play into a recommendation. Can you narrow it down by providing some details beond a generic nested loop, most preferably in form of actual code."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1486583533, "post_id": 42121330, "comment_id": 71412762, "body": "BTW: I would say as outer as possible, as inner as necessary. But I wouldn&#39;t consider that a useful answer."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1486629076, "post_id": 42121330, "comment_id": 71430105, "body": "Some nested-loops which can&#39;t be collapsed with the <code>collapse</code> clause can still be collapsed by hand e.g. triangular loops. It&#39;s useful to learn how to collapse loops by hand anyway."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 1, "creation_date": 1486629099, "post_id": 42121330, "comment_id": 71430116, "body": "You really should provide some examples in code."}], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 5318931, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/000a5f268233ec7eb8bb06e7f7fb76e9?s=128&d=identicon&r=PG&f=1", "display_name": "theupandup", "link": "https://stackoverflow.com/users/5318931/theupandup"}, "edited": false, "score": 0, "creation_date": 1486586297, "post_id": 42122925, "comment_id": 71414334, "body": "This is a very thoughtful and detailed answer (for, yes, a broad question. At the time of making it I had in mind a problem of traversing/parsing around a 2D matrix, but intentionally left this bit of info out because I was curious of the general mechanics and problem solving method rather than an answer to my specific problem, which I would have inevitably gotten if I posted it). Thank you."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 305, "user_id": 5318931, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/000a5f268233ec7eb8bb06e7f7fb76e9?s=128&d=identicon&r=PG&f=1", "display_name": "theupandup", "link": "https://stackoverflow.com/users/5318931/theupandup"}, "edited": false, "score": 0, "creation_date": 1486586791, "post_id": 42122925, "comment_id": 71414615, "body": "Matrices should be stored as 1 dimensional vectors. That&#39;s the most efficient way to do it. Consider learning how to use high-performance libraries such as OpenBLAS (or wrappers of these, such as Armadillo). You shouldn&#39;t be reinventing the wheel. Matrix operations is a huge field."}, {"owner": {"reputation": 305, "user_id": 5318931, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/000a5f268233ec7eb8bb06e7f7fb76e9?s=128&d=identicon&r=PG&f=1", "display_name": "theupandup", "link": "https://stackoverflow.com/users/5318931/theupandup"}, "edited": false, "score": 0, "creation_date": 1486587044, "post_id": 42122925, "comment_id": 71414745, "body": "I&#39;m in classes right now, and typically we are supposed to only use certain libraries for certain projects. 2D vectors are fine for this assignment (and what we were instructed to use)"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 305, "user_id": 5318931, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/000a5f268233ec7eb8bb06e7f7fb76e9?s=128&d=identicon&r=PG&f=1", "display_name": "theupandup", "link": "https://stackoverflow.com/users/5318931/theupandup"}, "edited": false, "score": 0, "creation_date": 1486587118, "post_id": 42122925, "comment_id": 71414785, "body": "Homework world and real world are very different. Good luck!"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1486628937, "post_id": 42122925, "comment_id": 71430041, "body": "A thread pool is created de facto with OpenMP implementations so that the threads are not created and destroyed between parallel regions. This means the overhead of using parallel in the inner loop is small (but not necessarily insignificant)."}], "tags": [], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "is_accepted": false, "score": 0, "last_activity_date": 1486585506, "creation_date": 1486585506, "answer_id": 42122925, "question_id": 42121330, "link": "https://stackoverflow.com/questions/42121330/openmp-nested-loops-design-strategy/42122925#42122925", "title": "OpenMP, nested loops design strategy", "body": "<p>Absolutely and definitely <strong><em>not</em></strong> in the innermost loop. This is because starting threads is generally expensive.</p>\n\n<p>On the other hand, if the innermost loop takes much more resources to execute than starting a thread, then it doesn't make a difference. but otherwise, outermost loop is always the best choice. </p>\n\n<p>Of course, this is a very broad answer in tone with your very broad question. There are always different answers for every different special case.</p>\n\n<p>On the other hand, if you have such a complicated problem, I recommend that you use the low-level <code>std::thread</code> and control your threads manually. That needs more work, but you have more control and best results. Then you can use thread pools and have the most efficient solution.</p>\n"}], "owner": {"reputation": 305, "user_id": 5318931, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/000a5f268233ec7eb8bb06e7f7fb76e9?s=128&d=identicon&r=PG&f=1", "display_name": "theupandup", "link": "https://stackoverflow.com/users/5318931/theupandup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1486585506, "creation_date": 1486579923, "question_id": 42121330, "link": "https://stackoverflow.com/questions/42121330/openmp-nested-loops-design-strategy", "title": "OpenMP, nested loops design strategy", "body": "<p>Assuming you have designed a sequential program with nested for loops and would like to transform it to parallel with OpenMP, and work on it in sections to debug as you go... would it be better to work on the outermost loop first and work your way in, or start at the innermost loop(s)? I am aware of the collapse function, but not all nested loops are collapsable.</p>\n"}, {"tags": ["c++", "exception", "gcc", "aix", "libstdc++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1486579940, "post_id": 42121236, "comment_id": 71410727, "body": "<a href=\"http://coliru.stacked-crooked.com/a/46d8e78511b98fed\" rel=\"nofollow noreferrer\"><b><i>Huh!!</i></b> What please?</a>. Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces your problem please."}, {"owner": {"reputation": 1942, "user_id": 969365, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1EnZd.png?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/969365/simon"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1486581189, "post_id": 42121236, "comment_id": 71411397, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 That&#39;s not on AIX though. Roger writes that it runs OK on Linux."}, {"owner": {"reputation": 1942, "user_id": 969365, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1EnZd.png?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/969365/simon"}, "edited": false, "score": 1, "creation_date": 1486581436, "post_id": 42121236, "comment_id": 71411516, "body": "<a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=61637\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=61637</a> related?"}, {"owner": {"reputation": 21, "user_id": 7177217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91bd54d8d54af48d595997e47ea57500?s=128&d=identicon&r=PG&f=1", "display_name": "JS Dieu", "link": "https://stackoverflow.com/users/7177217/js-dieu"}, "edited": false, "score": 0, "creation_date": 1497365019, "post_id": 42121236, "comment_id": 76046854, "body": "I experience the same problem but with GCC 5.1.0 while on GCC 4.8.5 I do not have any problem. Have you compiled GCC on your own?"}, {"owner": {"reputation": 11, "user_id": 8469295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f30c13d4e19b28e4947ac941db6ad9a?s=128&d=identicon&r=PG&f=1", "display_name": "Rasit Simsek", "link": "https://stackoverflow.com/users/8469295/rasit-simsek"}, "edited": false, "score": 0, "creation_date": 1540456689, "post_id": 42121236, "comment_id": 92875361, "body": "Here is also a related link <a href=\"https://stackoverflow.com/questions/42121236/c-exceptions-not-getting-caught-with-gnu-gcc-libstdc-4-3-6-on-aix-7-1#new-answer\" title=\"c exceptions not getting caught with gnu gcc libstdc 4 3 6 on aix 7 1%23new answer\">stackoverflow.com/questions/42121236/&hellip;</a>"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540457487, "post_id": 42121236, "comment_id": 92875829, "body": "A first step would be to get the build process right, related or not."}], "owner": {"reputation": 51, "user_id": 7536142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252042962ed17924ee32fc64ae061913?s=128&d=identicon&r=PG&f=1", "display_name": "Roger", "link": "https://stackoverflow.com/users/7536142/roger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 473, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1540456768, "creation_date": 1486579624, "question_id": 42121236, "link": "https://stackoverflow.com/questions/42121236/c-exceptions-not-getting-caught-with-gnu-gcc-libstdc-4-3-6-on-aix-7-1", "title": "C++ exceptions not getting caught with GNU gcc libstdc++ 4.3.6 on AIX 7.1", "body": "<p>I'm trying to get a port of our product to AIX that someone did 9 years ago working again, so I'm using gcc 4.3.6 on AIX 7.1 - the code builds without errors, and runs until we first throw an exception, but then the catch block that should catch it (and does on Linux) never gets called, and the execution terminates due to the uncaught exception. I've added test code where the throw and the catch are in the same function, so that it's not trying to cross any module boundaries or do any stack unwinding, and even that doesn't work:</p>\n\n<pre><code>try {\n    throw std::runtime_error(\"Just testing throw-catch\");\n} catch (std::runtime_error&amp; e) {\n    // We don't get here\n</code></pre>\n\n<p>So it seems like something is very sick in our libstdc++ exception handling. The gcc &amp; libstdc++ 4.3.6 we're using are from RPMs downloaded from the www.perzl.org/aix repository, so they should be built correctly, and looking at the autoconf log from setting up our makefiles for AIX they seem to have been located correctly. So I'm guessing it must be something in our environment or the linking process for my executable. We're using the preinstalled  (on a VM provided by IBM) AIX native linker ld, rather than the gnu linker, which I gather is the correct thing to do on AIX. I've confirmed that the libstdc++.a library archive that we're using contains a .so library, so I believe we're linking libstdc++ dynamically. If it's relevant, here's some gory details of build flags etc:</p>\n\n<pre><code>/usr/local/tools/powerpc_AIX71/gcc-4.3.6/bin/g++ -DHAVE_CONFIG_H -I. -I../.. -I/usr/nimbus/nimbus/agent/util/tests  -I/usr/local/tools/powerpc_AIX71/cppunit/include -I/usr/nimbus/nimbus/agent  -I/usr/local/tools/powerpc_AIX71/boost-1.33.1/include -DECVERSION='\"7.2.0.0\"' -I/usr/local/tools/powerpc_AIX71/openssl-0.9.8y/include -I/usr/nimbus/nimbus/agent  -I/usr/local/tools/powerpc_AIX71/boost-1.33.1/include -DECVERSION='\"7.2.0.0\"'  -DUSE_PROFILING -DUSE_LOGGING -DHAVE_UNIX -DHAVE_AIX  -g -O2 -c -o testrunner-TestSystem-unix.o `test -f 'unix/TestSystem-unix.cpp' || echo '/usr/nimbus/nimbus/agent/util/tests/'`unix/TestSystem-unix.cpp\nrm -f buildinfo.cpp; echo '#include &lt;util/buildinfo.h&gt;' &gt;buildinfo.cpp; echo &gt;&gt;buildinfo.cpp; echo 'const char *BuildInfo = \"u0016760__0_OPT_2017.02.08_10:38:05\";' &gt;&gt;buildinfo.cpp; /usr/local/tools/powerpc_AIX71/gcc-4.3.6/bin/g++ -DHAVE_CONFIG_H -I. -I../.. -I/usr/nimbus/nimbus/agent/util/tests  -I/usr/nimbus/nimbus/agent  -I/usr/local/tools/powerpc_AIX71/boost-1.33.1/include -DECVERSION='\"7.2.0.0\"'  -DUSE_PROFILING -DUSE_LOGGING -DHAVE_UNIX -DHAVE_AIX  -g -O2 -c buildinfo.cpp; /opt/freeware/bin/bash ../../libtool --tag=CXX   --mode=link /usr/local/tools/powerpc_AIX71/gcc-4.3.6/bin/g++ -DUSE_PROFILING -DUSE_LOGGING -DHAVE_UNIX -DHAVE_AIX  -g -O2 -static-libgcc -L../..   -o testrunner buildinfo.o testrunner-TestAtomicValue.o testrunner-TestCondition.o testrunner-TestCounter.o testrunner-TestECVersion.o testrunner-TestExec.o testrunner-TestExecTimeProfiler.o testrunner-TestExpirableStack.o testrunner-TestFileAttributes.o testrunner-TestGetOpt.o testrunner-TestHTTPStream.o testrunner-TestLock.o testrunner-TestLogger.o testrunner-TestMutex.o testrunner-TestNamedTimer.o testrunner-TestRBList.o testrunner-TestRange.o testrunner-TestRefCount.o testrunner-TestServerSocket.o testrunner-TestSlidingWindow.o testrunner-TestSSLSocket.o testrunner-TestSSLSocketFactory.o testrunner-TestSingleton.o testrunner-TestStringKey.o testrunner-TestStringUtilities.o testrunner-TestSubString.o testrunner-TestSystem.o testrunner-TestTCPRawStream.o testrunner-TestTCPSocket.o testrunner-TestTCPStream.o testrunner-TestThreadPool.o testrunner-TestTSDVar.o testrunner-TestTask.o testrunner-TestThread.o testrunner-TestTicks.o testrunner-TestTime.o testrunner-TestTimer.o testrunner-TestWinEnv.o testrunner-Testfilefun.o testrunner-TinyHTTP.o testrunner-Testpathfun.o testrunner-utiltestutil.o  testrunner-TestDouble.o testrunner-TestLockedFile-unix.o testrunner-TestSystem-unix.o ../../testmain/libtestmain.a -L/usr/local/tools/powerpc_AIX71/cppunit/lib -lcppunit ../../util/libutil.a -lpthread -L/usr/local/tools/powerpc_AIX71/openssl-0.9.8y/lib -lssl -lcrypto\nlibtool: link: warning: library `/usr/local/tools/powerpc_AIX71/cppunit/lib/libcppunit.la' was moved.\nlibtool: link: warning: library `/usr/local/tools/powerpc_AIX71/cppunit/lib/libcppunit.la' was moved.\n/usr/local/tools/powerpc_AIX71/gcc-4.3.6/bin/g++ -DUSE_PROFILING -DUSE_LOGGING -DHAVE_UNIX -DHAVE_AIX -g -O2 -static-libgcc -o testrunner buildinfo.o testrunner-TestAtomicValue.o testrunner-TestCondition.o testrunner-TestCounter.o testrunner-TestECVersion.o testrunner-TestExec.o testrunner-TestExecTimeProfiler.o testrunner-TestExpirableStack.o testrunner-TestFileAttributes.o testrunner-TestGetOpt.o testrunner-TestHTTPStream.o testrunner-TestLock.o testrunner-TestLogger.o testrunner-TestMutex.o testrunner-TestNamedTimer.o testrunner-TestRBList.o testrunner-TestRange.o testrunner-TestRefCount.o testrunner-TestServerSocket.o testrunner-TestSlidingWindow.o testrunner-TestSSLSocket.o testrunner-TestSSLSocketFactory.o testrunner-TestSingleton.o testrunner-TestStringKey.o testrunner-TestStringUtilities.o testrunner-TestSubString.o testrunner-TestSystem.o testrunner-TestTCPRawStream.o testrunner-TestTCPSocket.o testrunner-TestTCPStream.o testrunner-TestThreadPool.o testrunner-TestTSDVar.o testrunner-TestTask.o testrunner-TestThread.o testrunner-TestTicks.o testrunner-TestTime.o testrunner-TestTimer.o testrunner-TestWinEnv.o testrunner-Testfilefun.o testrunner-TinyHTTP.o testrunner-Testpathfun.o testrunner-utiltestutil.o testrunner-TestDouble.o testrunner-TestLockedFile-unix.o testrunner-TestSystem-unix.o  -L/usr/nimbus/out/powerpc_AIX71/nimbus/agent ../../testmain/libtestmain.a -L/usr/local/tools/powerpc_AIX71/cppunit/lib /usr/local/tools/powerpc_AIX71/cppunit/lib/libcppunit.a ../../util/libutil.a -lpthread -L/usr/local/tools/powerpc_AIX71/openssl-0.9.8y/lib -lssl -lcrypto\nld: 0711-224 WARNING: Duplicate symbol: .bcopy\nld: 0711-224 WARNING: Duplicate symbol: .virtual thunk to CppUnit::OStringStream::~OStringStream()\nld: 0711-224 WARNING: Duplicate symbol: .virtual thunk to CppUnit::OStringStream::~OStringStream()\nld: 0711-224 WARNING: Duplicate symbol: virtual thunk to CppUnit::OStringStream::~OStringStream()\nld: 0711-224 WARNING: Duplicate symbol: virtual thunk to CppUnit::OStringStream::~OStringStream()\nld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information.\n</code></pre>\n\n<p>The various warnings look unrelated to me. Does anyone have any suggestions of what to check next?</p>\n"}, {"tags": ["c++", "qt", "proxy", "qtcpsocket", "qtcpserver"], "comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 1, "creation_date": 1486582522, "post_id": 42121008, "comment_id": 71412158, "body": "<code>QNetworkProxyFactory::usesSystemConfiguration</code> returns anything fancy?"}, {"owner": {"reputation": 511, "user_id": 5514372, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000918847905/picture?type=large", "display_name": "PeCosta", "link": "https://stackoverflow.com/users/5514372/pecosta"}, "edited": false, "score": 0, "creation_date": 1486594836, "post_id": 42121008, "comment_id": 71418591, "body": "You can see api changes here <a href=\"http://doc.qt.io/qt-5/sourcebreaks.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/sourcebreaks.html</a> but I don&#39;t see anything that should cause that!"}, {"owner": {"reputation": 27667, "user_id": 894321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d872d6e3d7fa410b65dcb9dd169a7d8?s=128&d=identicon&r=PG", "display_name": "alexisdm", "link": "https://stackoverflow.com/users/894321/alexisdm"}, "edited": false, "score": 1, "creation_date": 1486600493, "post_id": 42121008, "comment_id": 71420510, "body": "There seems to be at least 2 changes in Qt default configuration related to proxies: <a href=\"http://code.qt.io/cgit/qt/qtbase.git/tree/dist/changes-5.8.0\" rel=\"nofollow noreferrer\">code.qt.io/cgit/qt/qtbase.git/tree/dist/changes-5.8.0</a>"}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "reply_to_user": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1486733354, "post_id": 42121008, "comment_id": 71486111, "body": "@peppe it returns <code>true</code> by default, which seems strange. If I set <code>QNetworkProxyFactory::useSystemConfiguration(false);</code>, my application works again. This smells like a bug to me, especially since I have the <code>NO_PROXY</code> variable set for my local network. Maybe because I don&#39;t use fully qualified domain names for the hostnames? But I shouldn&#39;t have to..."}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "reply_to_user": {"reputation": 27667, "user_id": 894321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d872d6e3d7fa410b65dcb9dd169a7d8?s=128&d=identicon&r=PG", "display_name": "alexisdm", "link": "https://stackoverflow.com/users/894321/alexisdm"}, "edited": false, "score": 0, "creation_date": 1486734105, "post_id": 42121008, "comment_id": 71486600, "body": "@alexisdm &quot;Proxies from system settings will now be used by default.&quot; seems like the culprit. Gotta love breaking changes buried deeply in the release notes. It should have been put on <a href=\"https://wiki.qt.io/New_Features_in_Qt_5.8\" rel=\"nofollow noreferrer\">new features page</a>."}], "answers": [{"tags": [], "owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "is_accepted": true, "score": 3, "last_activity_date": 1487084543, "creation_date": 1487084543, "answer_id": 42229444, "question_id": 42121008, "link": "https://stackoverflow.com/questions/42121008/switching-from-qt-5-7-to-qt-5-8-the-proxy-type-is-invalid-for-this-operation/42229444#42229444", "title": "Switching from Qt 5.7 to Qt 5.8 - &quot;the proxy type is invalid for this operation&quot;", "body": "<p>In Qt 5.8, system proxy settings are used by default, but don't seem to respect the <code>NO_PROXY</code> settings.</p>\n\n<p>Setting <code>QNetworkProxyFactory::useSystemConfiguration(false);</code> prior to creating the <code>QTcpServer</code> instance fixed the error (essentially by reverting the the Qt 5.7 default).</p>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 6529329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Z28t.jpg?s=128&g=1", "display_name": "Antonio Alecrim", "link": "https://stackoverflow.com/users/6529329/antonio-alecrim"}, "is_accepted": false, "score": 1, "last_activity_date": 1528987794, "creation_date": 1528987794, "answer_id": 50860286, "question_id": 42121008, "link": "https://stackoverflow.com/questions/42121008/switching-from-qt-5-7-to-qt-5-8-the-proxy-type-is-invalid-for-this-operation/50860286#50860286", "title": "Switching from Qt 5.7 to Qt 5.8 - &quot;the proxy type is invalid for this operation&quot;", "body": "<p>In older Qt versions (5.4.3 for example) where <code>QNetworkProxyFactory::useSystemConfiguration(false);</code> isn't available the following sequence can be used:</p>\n\n<pre><code>QNetworkProxy proxy;\nproxy.setType(QNetworkProxy::HttpProxy);\nproxy.setHostName(\"proxy.example.com\");\nproxy.setPort(1080);\nproxy.setUser(\"username\");\nproxy.setPassword(\"password\");\nQNetworkProxy::setApplicationProxy(proxy);\n</code></pre>\n\n<p>Or just:</p>\n\n<pre><code>QNetworkProxy proxy;\nQNetworkProxy::setApplicationProxy(proxy);\n</code></pre>\n\n<p>This worked for me, posting here for records purposes.</p>\n"}], "owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2065, "favorite_count": 0, "accepted_answer_id": 42229444, "answer_count": 2, "score": 3, "last_activity_date": 1528987794, "creation_date": 1486578858, "last_edit_date": 1486733558, "question_id": 42121008, "link": "https://stackoverflow.com/questions/42121008/switching-from-qt-5-7-to-qt-5-8-the-proxy-type-is-invalid-for-this-operation", "title": "Switching from Qt 5.7 to Qt 5.8 - &quot;the proxy type is invalid for this operation&quot;", "body": "<p>I'm trying to re-compile a networking application that worked fine with Qt 5.7 using Qt 5.8. However, using Qt 5.8, the server fails to <code>listen()</code>:</p>\n\n<pre><code>int myPort = 52000; //some accessible port\nQTcpServer* server = new QTcpServer();\nif(!server-&gt;listen(QHostAddress::Any, myPort))\n{\n    qDebug() &lt;&lt; server.errorString();\n}\n</code></pre>\n\n<p>and the returned error is:</p>\n\n<blockquote>\n  <p>The proxy type is invalid for this operation</p>\n</blockquote>\n\n<p>I do run the application on a corporate network that is protected by a proxy, however in previous versions of Qt have never had to do any type of setup to account for that. I've never seen the <code>listen()</code> command fail before.</p>\n\n<p>Any ideas what changed in Qt 5.8 or how to account for this?</p>\n\n<p><em>EDIT:</em></p>\n\n<p>while the overall network is proxied, no proxy is required to communicate on the local domain, and the <code>NO_PROXY</code> environment variable is set to avoid proxying of local connections.</p>\n"}, {"tags": ["c++", "arrays", "variadic-templates"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1486578851, "post_id": 42120948, "comment_id": 71410109, "body": "I&#39;m not really sure you need a variadic template to do that. Isn&#39;t <code>std::vector&lt;std::vector&lt;int&gt;&gt;</code> or at least <code>std::array&lt;std::vector&lt;int&gt;,N&gt;</code> an option?"}, {"owner": {"reputation": 33, "user_id": 7536173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6416fa0e445cb864a25cafb20626c6b?s=128&d=identicon&r=PG&f=1", "display_name": "William Moy", "link": "https://stackoverflow.com/users/7536173/william-moy"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1486588709, "post_id": 42120948, "comment_id": 71415700, "body": "I&#39;m looking for something that is zero-cost or very, very low cost. <code>std::vector</code> is unfortunately too big for our application."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7536173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6416fa0e445cb864a25cafb20626c6b?s=128&d=identicon&r=PG&f=1", "display_name": "William Moy", "link": "https://stackoverflow.com/users/7536173/william-moy"}, "edited": false, "score": 0, "creation_date": 1486589101, "post_id": 42121053, "comment_id": 71415902, "body": "Thanks, this might be exactly what I&#39;m looking for.  I wasn&#39;t that familiar with tuples.  I&#39;ll give it a try!"}, {"owner": {"reputation": 33, "user_id": 7536173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6416fa0e445cb864a25cafb20626c6b?s=128&d=identicon&r=PG&f=1", "display_name": "William Moy", "link": "https://stackoverflow.com/users/7536173/william-moy"}, "edited": false, "score": 0, "creation_date": 1486591185, "post_id": 42121053, "comment_id": 71416924, "body": "Upon further inspection, I don&#39;t think I&#39;ll be able to use this in my application because of <code>std::tuple</code>&#39;s restriction to compile-time <code>i</code>s.  It&#39;s a cool solution, but it unfortunately won&#39;t work functionally the same as an array of arrays at runtime.  I suppose I could add a template function to access cells in the form of <code>get&lt;X&gt;(Y)</code>, but in a space-constrained application, that doesn&#39;t seem ideal."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 33, "user_id": 7536173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6416fa0e445cb864a25cafb20626c6b?s=128&d=identicon&r=PG&f=1", "display_name": "William Moy", "link": "https://stackoverflow.com/users/7536173/william-moy"}, "edited": false, "score": 0, "creation_date": 1486625172, "post_id": 42121053, "comment_id": 71428130, "body": "@WilliamMoy I&#39;ve added two ways to support runtime indexing."}, {"owner": {"reputation": 33, "user_id": 7536173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6416fa0e445cb864a25cafb20626c6b?s=128&d=identicon&r=PG&f=1", "display_name": "William Moy", "link": "https://stackoverflow.com/users/7536173/william-moy"}, "edited": false, "score": 0, "creation_date": 1486671139, "post_id": 42121053, "comment_id": 71458243, "body": "Thanks for the update.  #2 seems like the path I&#39;ll likely try.  Answered!"}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 3, "last_activity_date": 1486625130, "last_edit_date": 1486625130, "creation_date": 1486579027, "answer_id": 42121053, "question_id": 42120948, "link": "https://stackoverflow.com/questions/42120948/using-variadic-templates-to-create-a-2d-array-with-variable-column-width/42121053#42121053", "title": "Using variadic templates to create a 2D array with variable column width?", "body": "<p>Yes, this should be possible in principle. Here's a bit to get you started:</p>\n\n<pre><code>template &lt;class T, std::size_t... Dim&gt;\nusing VariableLengthTable = std::tuple&lt;std::array&lt;T, Dim&gt;...&gt;;\n</code></pre>\n\n<p>This is a tuple of <code>std::array</code>s, each with a length specified by one of the template arguments.</p>\n\n<p>Note that because the length of a <code>std::array</code> is part of its type, the first dimension cannot be an array, since its members would need different types. However, <code>std::tuple</code> works nicely. As long as you're willing to use <code>std::get&lt;i&gt;</code> instead of <code>[i]</code>, and restrict yourself to compile-time <code>i</code>s, you should be good.</p>\n\n<p>If a compile-time <code>i</code> is not enough, you have two options:</p>\n\n<p><strong>One</strong>, use <code>VariableLengthTable</code> as above and add a runtime-to-compiletime conversion. Conceptually, something like this <code>switch</code>:</p>\n\n<pre><code>T&amp; get(std::size_t x, std::size_t y)\n{\n  switch (x) {\n    case 0: return std::get&lt;0&gt;(varLenTable)[y];\n    case 1: return std::get&lt;1&gt;(varLenTable)[y];\n    case 2: return std::get&lt;2&gt;(varLenTable)[y];\n    // and so on\n  }\n}\n</code></pre>\n\n<p>In reality, you'd probably need to compose this using recursion or inheritance to avoid a compile-time out-of-bounds access. <a href=\"http://www.boost.org/doc/libs/1_63_0/libs/preprocessor/doc/index.html\" rel=\"nofollow noreferrer\">Boost.Preprocessor</a> might help with that.</p>\n\n<p><strong>Two</strong>, store all the data in one sequential buffer and index into it at runtime. Something like this:</p>\n\n<pre><code>template &lt;class T, std::size_t... Dim&gt;\nclass VariableLengthTable\n{\n  static const std::array&lt;std::size_t, sizeof...(Dim)&gt; dims = {{ Dim... }};\n\n  static const std::array&lt;std::size_t, sizeof...(Dim)&gt; cumulDims = [](){\n    std::array&lt;std::size_t, sizeof...(Dim)&gt; result;\n    result[0] = 0;\n    for (std::size_t idx = 1; idx &lt; sizeof...(Dim); ++idx) {\n      result[idx] = result[idx - 1] + dims[idx];\n    }\n    return result;\n  }();\n\n  std::array&lt;T, cumulDims[sizeof...(Dim) - 1] + dims[sizeof...(Dim) - 1]&gt; data;\n\npublic:\n  T&amp; get(std::size_t x, std::size_t y)\n  {\n    return data[cumulDims[x] + y];\n  }\n};\n</code></pre>\n\n<p>The code above is to show the principle, not guaranteed to compile as-is.</p>\n"}], "owner": {"reputation": 33, "user_id": 7536173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6416fa0e445cb864a25cafb20626c6b?s=128&d=identicon&r=PG&f=1", "display_name": "William Moy", "link": "https://stackoverflow.com/users/7536173/william-moy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 1, "accepted_answer_id": 42121053, "answer_count": 1, "score": 2, "last_activity_date": 1486625130, "creation_date": 1486578687, "question_id": 42120948, "link": "https://stackoverflow.com/questions/42120948/using-variadic-templates-to-create-a-2d-array-with-variable-column-width", "title": "Using variadic templates to create a 2D array with variable column width?", "body": "<p>Is it possible to create a \"sparse\" variable-length 2D array using only variadic templates and std::array?  By sparse, I mean that each row could have a variable amount of columns.</p>\n\n<p>Ideally, I'd like to instantiate something like <code>VariableLengthTable&lt;int,2,4,3&gt;()</code> and have it create an array of arrays that would map to something like <code>{{0,1}, {0,1,2,3}, {0,1,2}}</code>.  I've seen SO posts that deal with variadic templates to create multidimensional arrays, but they are all symmetrical.</p>\n\n<p>Note that I'm limited to zero-cost abstractions (e.g. std::array) as I'm working with a very memory constricted application.</p>\n"}, {"tags": ["c++", "simulation", "modeling"], "comments": [{"owner": {"reputation": 2503, "user_id": 6408573, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/642b728886504bd0f8139083a2b0e3b6?s=128&d=identicon&r=PG&f=1", "display_name": "RGA", "link": "https://stackoverflow.com/users/6408573/rga"}, "edited": false, "score": 0, "creation_date": 1486581825, "post_id": 42120908, "comment_id": 71411743, "body": "Can you include your code in your post?  It may make it easier for you to get an answer"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7535603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KollE.jpg?s=128&g=1", "display_name": "Yoav Pollack", "link": "https://stackoverflow.com/users/7535603/yoav-pollack"}, "edited": false, "score": 0, "creation_date": 1487615754, "post_id": 42121045, "comment_id": 71854728, "body": "I didn&#39;t think of passing the reference to the box object, instead of passing references to each state parameter on it&#39;s own. Great, this should work."}, {"owner": {"reputation": 23, "user_id": 7535603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KollE.jpg?s=128&g=1", "display_name": "Yoav Pollack", "link": "https://stackoverflow.com/users/7535603/yoav-pollack"}, "edited": false, "score": 0, "creation_date": 1487679543, "post_id": 42121045, "comment_id": 71884004, "body": "But now I&#39;m running into trouble with the implementation. I get error: invalid use of incomplete type &#39;const class Box_Class (see edited post)"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 23, "user_id": 7535603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KollE.jpg?s=128&g=1", "display_name": "Yoav Pollack", "link": "https://stackoverflow.com/users/7535603/yoav-pollack"}, "edited": false, "score": 0, "creation_date": 1487697231, "post_id": 42121045, "comment_id": 71896944, "body": "@YoavPollack Sounds like you need to include the Box_Class header in particle_class.cpp."}, {"owner": {"reputation": 23, "user_id": 7535603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KollE.jpg?s=128&g=1", "display_name": "Yoav Pollack", "link": "https://stackoverflow.com/users/7535603/yoav-pollack"}, "edited": false, "score": 0, "creation_date": 1487707689, "post_id": 42121045, "comment_id": 71902945, "body": "gee 10x. I&#39;ve had previous problems with this error due to other reasons, so I forgot the problem might be that trivial."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 1, "last_activity_date": 1486578974, "creation_date": 1486578974, "answer_id": 42121045, "question_id": 42120908, "link": "https://stackoverflow.com/questions/42120908/access-to-class-variable-from-within-objects-that-are-part-of-same-class/42121045#42121045", "title": "Access to class variable from within objects that are part of same class", "body": "<p>You can pass a pointer to the <code>box</code> object to the <code>particle</code> objects, and provide a getter method in <code>box</code> for <code>L</code>.  This pointer could be passed in to the constructor of <code>particle</code>, and stored within the object, or can be passed to the member functions of <code>particle</code> that need access to it.</p>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 7535805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51401af79ea7047ea0a876353c8a8629?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7535805/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1486579454, "creation_date": 1486579454, "answer_id": 42121182, "question_id": 42120908, "link": "https://stackoverflow.com/questions/42120908/access-to-class-variable-from-within-objects-that-are-part-of-same-class/42121182#42121182", "title": "Access to class variable from within objects that are part of same class", "body": "<p>You can create a getter method in box to allow access to L.  It might look something like</p>\n\n<pre><code>public:\n    int GetL(){\n        return L;\n    }\n</code></pre>\n\n<p>Then, have your <code>particle</code> objects call that method to read the value of L.</p>\n\n<p>If a public accessor to L is undesirable (perhaps for security reasons), you could declare the particles as a friend.  This is a c++ feature that allows the particles to directly private members of box.  Some people consider \"friend\" to be bad coding practice.  It also leads to jokes about friends being allowed to access private members.</p>\n\n<pre><code>friend particles[];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 2405444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/336a96d7c511e302d12804b98187163e?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/2405444/malcolm"}, "is_accepted": false, "score": 0, "last_activity_date": 1486580103, "last_edit_date": 1486580103, "creation_date": 1486579623, "answer_id": 42121235, "question_id": 42120908, "link": "https://stackoverflow.com/questions/42120908/access-to-class-variable-from-within-objects-that-are-part-of-same-class/42121235#42121235", "title": "Access to class variable from within objects that are part of same class", "body": "<p>If I'm understanding you correctly, L is a private part of your implementation and you don't wish to expose a public getter in your interface.</p>\n\n<p>One solution I have used in the past is to create a helper class that exposes the state shared between the two classes -- in this case it might be called BoxParticleInterface.</p>\n\n<p>The interface can be created by Box and passed to Particle on construction.</p>\n\n<pre><code>class BoxParticleInterface\n{\n    BoxParticleInterface( L const &amp; l, Etc const &amp; etc ) : l_( l ) { }\n    L const &amp; l() { return l_; }\n    L l_;\n}\n</code></pre>\n\n<p>This might be more useful than passing a single reference / pointer around in that:<br>\na) it logically groups the members that are passed from Box to Particle, and<br>\nb) it's a little easier to extend if you have more state that you want to communicate.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 7535603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KollE.jpg?s=128&g=1", "display_name": "Yoav Pollack", "link": "https://stackoverflow.com/users/7535603/yoav-pollack"}, "edited": false, "score": 0, "creation_date": 1487615483, "post_id": 42121892, "comment_id": 71854588, "body": "your solution seems to be the best one in terms of OOP. However after consideration I decided not to use it as it will mean using normalized units everywhere in the box class which will be a nuisance and could lead to mistakes on my part. Thanks though!"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 23, "user_id": 7535603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KollE.jpg?s=128&g=1", "display_name": "Yoav Pollack", "link": "https://stackoverflow.com/users/7535603/yoav-pollack"}, "edited": false, "score": 0, "creation_date": 1487617912, "post_id": 42121892, "comment_id": 71855781, "body": "@YoavPollack You could create a wrapper around a pointer to particle and a pointer to  box named <code>BoxedParticle</code> that has a <code>normalized()</code> and <code>real()</code> accessors, and pass this wrapper where you need particles with their real position. It even has the potential of being faster and more memory efficient and also has all the advantage of my solution."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 1, "last_activity_date": 1486582307, "last_edit_date": 1486582307, "creation_date": 1486581825, "answer_id": 42121892, "question_id": 42120908, "link": "https://stackoverflow.com/questions/42120908/access-to-class-variable-from-within-objects-that-are-part-of-same-class/42121892#42121892", "title": "Access to class variable from within objects that are part of same class", "body": "<p>Since <code>particle</code> only has a normalised position, what determine the actual position of the particle is <code>box</code>. So your <code>box</code> object should have a method to return the real position of a given particle:</p>\n\n<pre><code>struct Particle { float x, y; /* maybe other properties */ };\nstruct Position { float x, y; };\n\nstruct Box {\n    Position position(Particle const&amp; p) {\n        return {p.x * L, p.y * L};\n    }\n\nprivate:\n    float L;\n};\n</code></pre>\n\n<p>That way, you don't need <code>particle</code> to use <code>box</code>, and you don't need <code>particle</code> to access a private member of box, and you don't need an accessor.</p>\n\n<hr>\n\n<p><em>Would the particle knowing it's real position better?</em></p>\n\n<p>The answer is no. The particle don't need to know it's real position.</p>\n\n<p>Let's say you have a bunch of particle somewhere you would like to draw in a box, then you will not only need the particle, but the box too. But the particle in itself don't need the box.</p>\n\n<p>It also makes it trivial to move particle from one box to another: you only need to send a different box to the drawing function and/or move the vector of particle to the other box's vector. No copying, no changing references, no problem.</p>\n"}], "owner": {"reputation": 23, "user_id": 7535603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KollE.jpg?s=128&g=1", "display_name": "Yoav Pollack", "link": "https://stackoverflow.com/users/7535603/yoav-pollack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 42121045, "answer_count": 4, "score": 2, "last_activity_date": 1487658066, "creation_date": 1486578548, "last_edit_date": 1487658066, "question_id": 42120908, "link": "https://stackoverflow.com/questions/42120908/access-to-class-variable-from-within-objects-that-are-part-of-same-class", "title": "Access to class variable from within objects that are part of same class", "body": "<p>I'm building a molecular dynamics simulation from scratch to practice my new c++ skills and I've run into some trouble.</p>\n\n<p>Inside the simulation 'box' object, I have a private variable L that contains the length of the system.\nAlso Inside 'box' object I have a vector of 'particle' objects (not derived in any way from 'box'). A 'particle' object contains the particle's normalized position (0 to 1 in each dimension).\nI need a way to access L from within the 'particle' object. I need this so that I can use it to multiply the normalized position in order to get the actual position when needed (the normalized position is more convenient to work with most of the time).</p>\n\n<p>This access to L should be read-only, and not generate a copy of L, but rather all particles should refer to the same L in case it is changed (e.g. box is expanded).</p>\n\n<p>I thought of maybe passing to each 'particle' object a const reference to L when they are initialized.\nIs this really the best way?\nIs there a way to do it that doesn't involve passing something to each 'particle' object in its constructor? (because I might have to pass many more such \"state variables\" to each 'particle')</p>\n\n<p>Thanks.</p>\n\n<p>Edit: I'm attaching code and addressing @1201ProgramAlarm 's suggestion which seems to make sense but I had problems implementing:</p>\n\n<p><strong><em>Particle_Class.h</em></strong></p>\n\n<pre><code>class Box_Class;\nclass point;\nclass Particle_Class\n{\npublic:\n    Particle_Class(Box_Class &amp;box);\nprivate:\n    const Box_Class &amp;box;\n    point velByL;\n}; \n</code></pre>\n\n<p><strong><em>Particle_Class.cpp</em></strong></p>\n\n<pre><code>Particle_Class::Particle_Class(Box_Class &amp;box)\n        :box(box){}\n\nvoid Particle_Class::init_P(const point pt){velByL=pt*box.get_L()/mass; return ;};\n</code></pre>\n\n<p><strong><em>Box_Class.cpp</em></strong></p>\n\n<pre><code>for (int i=0;i&lt;initN;i++)\n    particle.emplace_back(*this);\n</code></pre>\n\n<p>Unfortunately I get a compiler error at the line void Particle_Class::init_P</p>\n\n<p>\"error: invalid use of incomplete type 'const class Box_Class'|\"</p>\n"}, {"tags": ["c++", "opencv", "google-nativeclient", "eigen3"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 5121191, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CpcF9b1fJ_A/AAAAAAAAAAI/AAAAAAAAACA/r8TBkPFvDrY/photo.jpg?sz=128", "display_name": "Sergey Bokhnyak", "link": "https://stackoverflow.com/users/5121191/sergey-bokhnyak"}, "edited": false, "score": 0, "creation_date": 1486583346, "post_id": 42122155, "comment_id": 71412654, "body": "Not sure if I was supposed to know that (if so sorry for stupid question) but you&#39;re totally right, I added swap space to the ec2 instance and it&#39;s working. Thank you!"}], "tags": [], "owner": {"reputation": 485, "user_id": 3659268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bdyeS.png?s=128&g=1", "display_name": "EpicOrange", "link": "https://stackoverflow.com/users/3659268/epicorange"}, "is_accepted": true, "score": 0, "last_activity_date": 1486582714, "creation_date": 1486582714, "answer_id": 42122155, "question_id": 42120896, "link": "https://stackoverflow.com/questions/42120896/porting-eigen3-library-for-chromes-portable-native-client-pnacl-build-error/42122155#42122155", "title": "Porting Eigen3 library for Chrome&#39;s Portable Native Client (PNaCl) build error", "body": "<blockquote>\n  <p><code>clang: error: unable to execute command: Killed</code></p>\n</blockquote>\n\n<p>It looks like your AWS instance killed clang, so perhaps it ran out of memory. The free tier gives <a href=\"https://aws.amazon.com/free/faqs/\" rel=\"nofollow noreferrer\">1 MiB</a> of RAM and that might not be enough for what you're trying to do.</p>\n"}], "owner": {"reputation": 63, "user_id": 5121191, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CpcF9b1fJ_A/AAAAAAAAAAI/AAAAAAAAACA/r8TBkPFvDrY/photo.jpg?sz=128", "display_name": "Sergey Bokhnyak", "link": "https://stackoverflow.com/users/5121191/sergey-bokhnyak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 42122155, "answer_count": 1, "score": 0, "last_activity_date": 1486582714, "creation_date": 1486578521, "last_edit_date": 1486579091, "question_id": 42120896, "link": "https://stackoverflow.com/questions/42120896/porting-eigen3-library-for-chromes-portable-native-client-pnacl-build-error", "title": "Porting Eigen3 library for Chrome&#39;s Portable Native Client (PNaCl) build error", "body": "<p>So I have an AWS instance (the free tier one) running with Ubuntu 16.04. There I have installed nacl_sdk (which is working and has allowed me to access their sample sites with success) and naclports which I used to port opencv with which I had trouble with at first due to errors with zlib but got it working after I added i386 architecture and did sudo apt-get update on the system and installed necessary i386 programs.</p>\n\n<p>Note I have depot_tools installed as well.</p>\n\n<p>Now I am trying to install the eigen3 library for pnacl as well but I am getting an error and I am not sure how to understand it nor how exactly it gets built to fix it. </p>\n\n<p>The command that I ported opencv with was </p>\n\n<pre><code>$ NACL_ARCH=pnacl make opencv\n</code></pre>\n\n<p>And I tried these two commands for building eigen3 with the same results (shown below)</p>\n\n<pre><code>$ NACL_ARCH=pnacl make eigen3\n$ bin/webports install eigen3\n</code></pre>\n\n<p>This is the very end of terminal output (the entire message is very long):</p>\n\n<pre><code>######################################################################\nBuilding eigen3\n######################################################################\nchdir /home/ubuntu/Work/ExternCode/naclports/src/out/build/eigen3/build_pnacl\nmake -j1 basicstuff cholesky determinant geo_transformations inverse\nScanning dependencies of target basicstuff\nBuilding CXX object test/CMakeFiles/basicstuff.dir/basicstuff.cpp.o\nLinking CXX executable basicstuff\nBuilt target basicstuff\nScanning dependencies of target cholesky\n[100%] Building CXX object test/CMakeFiles/cholesky.dir/cholesky.cpp.o\nclang: error: unable to execute command: Killed\nclang: error: clang frontend command failed due to signal (use -v to see invocation)\nclang version 3.7.0 (https://chromium.googlesource.com/a/native_client/pnacl-clang.git cf0dc7f6e6123dfa9b8834b56743315300b34e6c) (https://chromium.googlesource.com/a/native_client/pnacl-llvm.git baa63524b6b493ec2a6aa2c5193d9f25c0c33191)\nTarget: le32-unknown-nacl\nThread model: posix\nclang: note: diagnostic msg: PLEASE submit a bug report to http://llvm.org/bugs/ and include the crash backtrace, preprocessed source, and associated run script.\nclang: note: diagnostic msg: \n\ntest/CMakeFiles/cholesky.dir/build.make:62: recipe for target 'test/CMakeFiles/cholesky.dir/cholesky.cpp.o' failed\nmake[3]: *** [test/CMakeFiles/cholesky.dir/cholesky.cpp.o] Error 254\nCMakeFiles/Makefile2:14386: recipe for target 'test/CMakeFiles/cholesky.dir/all' failed\nmake[2]: *** [test/CMakeFiles/cholesky.dir/all] Error 2\nCMakeFiles/Makefile2:14393: recipe for target 'test/CMakeFiles/cholesky.dir/rule' failed\nmake[1]: *** [test/CMakeFiles/cholesky.dir/rule] Error 2\nMakefile:5128: recipe for target 'cholesky' failed\nmake: *** [cholesky] Error 2\nwebports: Build failed: 'eigen3' [pnacl/release]\n</code></pre>\n"}, {"tags": ["c++", "stl", "iterator"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1486578267, "post_id": 42120793, "comment_id": 71409766, "body": "This doesn&#39;t address the question, but don&#39;t use <code>std::endl</code> unless you need the extra stuff that it does. <code>&#39;\\n&#39;</code> ends a line."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1486578489, "post_id": 42120793, "comment_id": 71409913, "body": "Regarding your request for formatting feedback: see my edits :-) Don&#39;t use pictures of text."}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 6936281, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e36ced0ac1484bb81e8325751c4614ff?s=128&d=identicon&r=PG&f=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/6936281/naman"}, "edited": false, "score": 0, "creation_date": 1486578972, "post_id": 42120815, "comment_id": 71410192, "body": "Ah! That explains it. Thanks!"}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1486579458, "post_id": 42120815, "comment_id": 71410481, "body": "Also, <code>rbegin()</code> and <code>rend()</code> return a reverse iterator, which <a href=\"http://coliru.stacked-crooked.com/a/8fcf0408635e5cc8\" rel=\"nofollow noreferrer\">works backwards compared to normal iterators</a>."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 15, "last_activity_date": 1486578240, "creation_date": 1486578240, "answer_id": 42120815, "question_id": 42120793, "link": "https://stackoverflow.com/questions/42120793/difference-between-the-rbegin-and-the-end-function-in-standard-library/42120815#42120815", "title": "Difference between the rbegin and the end function in standard library", "body": "<p><code>rbegin</code> is actually the last element of your container.\n<code>end</code> is <em>one past</em> the end of the container.</p>\n\n<p>So <code>marks.end()-&gt;second</code> is undefined behavior.</p>\n"}], "owner": {"reputation": 169, "user_id": 6936281, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e36ced0ac1484bb81e8325751c4614ff?s=128&d=identicon&r=PG&f=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/6936281/naman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1691, "favorite_count": 1, "accepted_answer_id": 42120815, "answer_count": 1, "score": 5, "last_activity_date": 1486579059, "creation_date": 1486578140, "last_edit_date": 1486579059, "question_id": 42120793, "link": "https://stackoverflow.com/questions/42120793/difference-between-the-rbegin-and-the-end-function-in-standard-library", "title": "Difference between the rbegin and the end function in standard library", "body": "<p>I have an implementation of a map where the ID is being stored as value and marks as key. This enables me to take advantage of the auto sorting in maps and lets me identify the ID of the element with highest marks.</p>\n\n<pre><code>for(map&lt;int, int&gt;::iterator i = marks.begin(); i != marks.end(); ++i)\n    cout &lt;&lt; i-&gt;first &lt;&lt; \"\\t\" &lt;&lt; i-&gt;second &lt;&lt; endl;\ncout &lt;&lt; marks.rbegin()-&gt;second &lt;&lt; endl;\ncout &lt;&lt; marks.end()-&gt;second &lt;&lt; endl;\n</code></pre>\n\n<p>produces this output:</p>\n\n<pre><code>312 3\n420 4\n512 2\n752 1\n1\n420\n</code></pre>\n\n<p>The input sequence was the increasing order of values. Why does <code>end()</code> not display \"1\" but instead displays the key of the last pair inputted? What's the difference between <code>rbegin()</code> and <code>end()</code>?</p>\n"}, {"tags": ["c++", "opencv", "visual-studio-2012", "visual-studio-2015"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1486578602, "post_id": 42120724, "comment_id": 71409972, "body": "Please show your linked libs in both debug and release"}, {"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1486578985, "post_id": 42120724, "comment_id": 71410200, "body": "have look at <a href=\"http://stackoverflow.com/questions/21173829/opencv-findcontours-method-errors?rq=1\">THIS</a> and <a href=\"http://stackoverflow.com/questions/36138982/opencv-3-0-findcontours-crashes?rq=1\">THIS</a>"}, {"owner": {"reputation": 181, "user_id": 4692589, "user_type": "registered", "profile_image": "https://graph.facebook.com/1194046095/picture?type=large", "display_name": "Matthew Chin", "link": "https://stackoverflow.com/users/4692589/matthew-chin"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1486629528, "post_id": 42120724, "comment_id": 71430340, "body": "Hi @Miki, I had uploaded the image of linked libs on the property sheets."}, {"owner": {"reputation": 181, "user_id": 4692589, "user_type": "registered", "profile_image": "https://graph.facebook.com/1194046095/picture?type=large", "display_name": "Matthew Chin", "link": "https://stackoverflow.com/users/4692589/matthew-chin"}, "reply_to_user": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1486629658, "post_id": 42120724, "comment_id": 71430415, "body": "Hi @JeruLuke, I think I linked to the correct lib where the &quot;d&quot; at the end indicated for debug and without &quot;d&quot; at the end is for release mode. You may check on the updated images at above question there. Thanks."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1486629785, "post_id": 42120724, "comment_id": 71430481, "body": "Please show also the library path"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 4692589, "user_type": "registered", "profile_image": "https://graph.facebook.com/1194046095/picture?type=large", "display_name": "Matthew Chin", "link": "https://stackoverflow.com/users/4692589/matthew-chin"}, "edited": false, "score": 0, "creation_date": 1486629134, "post_id": 42121485, "comment_id": 71430139, "body": "I checked the opencv folder and only consists opencv_world300d.lib or opencv_world300.lib. So, I only set opencv_world300d.lib for my property sheet. Actually it can works on other image processing function such as imread, imshow and etc. Just the findContour having problems."}], "tags": [], "owner": {"reputation": 48, "user_id": 7534797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2875d2621a3f21cce2ef0200f2ae5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Swaraj Dubey", "link": "https://stackoverflow.com/users/7534797/swaraj-dubey"}, "is_accepted": false, "score": 0, "last_activity_date": 1486580452, "creation_date": 1486580452, "answer_id": 42121485, "question_id": 42120724, "link": "https://stackoverflow.com/questions/42120724/findcontour-opencv-c/42121485#42121485", "title": "FindContour OpenCV C++", "body": "<p>I have tested your code, I can compile it successfully against my input image (binary image of hand) and it does provide the contour of the hand. As mentioned by @Miki , you must check your linked libraries. On Eclipse IDE we have to go to: Project -> Properties -> C/C++ Build -> Settings. On the right side, make sure you are in the 'Tool Settings' tab and then head to MinGW C++ Linker -> Libraries. You must have something similar on Visual Studio, either way you still have to check the libraries you have included in your project in the project settings. You must have the following linked libraries apart from the other mandatory libraries:</p>\n\n<ol>\n<li>libopencv_imgproc300</li>\n<li>libopencv_highgui300</li>\n</ol>\n\n<p>Please note that the number 300 suggests that the OpenCV version is 3.0 , I have OpenCV 3.1 thus my libraries contain the number 310 at the end e.g. - libopencv_imgproc310. Let me know if this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 4692589, "user_type": "registered", "profile_image": "https://graph.facebook.com/1194046095/picture?type=large", "display_name": "Matthew Chin", "link": "https://stackoverflow.com/users/4692589/matthew-chin"}, "edited": false, "score": 0, "creation_date": 1486634810, "post_id": 42132096, "comment_id": 71433834, "body": "Thanks a lot for your help! It works now! So, if I using the OpenCV 3.2 library, am I unable to run in x86?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 181, "user_id": 4692589, "user_type": "registered", "profile_image": "https://graph.facebook.com/1194046095/picture?type=large", "display_name": "Matthew Chin", "link": "https://stackoverflow.com/users/4692589/matthew-chin"}, "edited": false, "score": 0, "creation_date": 1486635830, "post_id": 42132096, "comment_id": 71434500, "body": "You can, but you need to recompile opencv"}], "tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": true, "score": 0, "last_activity_date": 1486630586, "creation_date": 1486630586, "answer_id": 42132096, "question_id": 42120724, "link": "https://stackoverflow.com/questions/42120724/findcontour-opencv-c/42132096#42132096", "title": "FindContour OpenCV C++", "body": "<p>You're linking the wrong libraries.</p>\n\n<hr>\n\n<p>You are linking in:</p>\n\n<blockquote>\n  <p>C:\\opencv\\build\\x64\\ <strong>vc12</strong> \\lib</p>\n</blockquote>\n\n<p>That means you're using OpenCV compiled with <code>vc12</code> compiler (Visual Studio 2013). But you're using Visual Studio 2015, so you need to link to OpenCV compiled with <code>vc14</code>.</p>\n\n<p>So, look if you have the folder:</p>\n\n<blockquote>\n  <p>C:\\opencv\\build\\x64\\ <strong>vc14</strong> \\lib</p>\n</blockquote>\n\n<p>Probably not, because OpenCV 3.0 has not the prebuild for vc14. In this case you can either:</p>\n\n<ol>\n<li>Recompile OpenCV 3.0 with vc14</li>\n<li><strong>Download OpenCV 3.2</strong> which has prebuilt binaries for x64,vc14. This is the recommended approach, since OpenCV 3.2 added some nice functions, and several bug fixes.</li>\n<li>Use Visual Studio 2013 with your current libraries</li>\n</ol>\n"}], "owner": {"reputation": 181, "user_id": 4692589, "user_type": "registered", "profile_image": "https://graph.facebook.com/1194046095/picture?type=large", "display_name": "Matthew Chin", "link": "https://stackoverflow.com/users/4692589/matthew-chin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1252, "favorite_count": 0, "accepted_answer_id": 42132096, "answer_count": 2, "score": 1, "last_activity_date": 1486630586, "creation_date": 1486577946, "last_edit_date": 1486630114, "question_id": 42120724, "link": "https://stackoverflow.com/questions/42120724/findcontour-opencv-c", "title": "FindContour OpenCV C++", "body": "<p>I have trouble when using <code>findContour()</code> function from opencv. It crash and output the following error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Hq6I6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hq6I6.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is my code:</p>\n\n<pre><code>using namespace cv;\nusing namespace std;\n\nMat src; Mat src_gray;\nint thresh = 100;\nint max_thresh = 255;\nRNG rng(12345);\n\n/// Function header\nvoid thresh_callback(int, void*);\n\n/** @function main */\nint main(int argc, char** argv)\n{\n    src = imread(\"test.png\");\n    /// Load source image and convert it to gray\n    //src = imread(argv[1], 1);\n\n    /// Convert image to gray and blur it\n    cvtColor(src, src_gray, CV_BGR2GRAY);\n    blur(src_gray, src_gray, Size(3, 3));\n\n    /// Create Window\n    char* source_window = \"Source\";\n    namedWindow(source_window, CV_WINDOW_AUTOSIZE);\n    imshow(source_window, src);\n\n    createTrackbar(\" Canny thresh:\", \"Source\", &amp;thresh, max_thresh, thresh_callback);\n    thresh_callback(0, 0);\n\n    waitKey(0);\n    return(0);\n}\n\n/** @function thresh_callback */\nvoid thresh_callback(int, void*)\n{\n    Mat canny_output;\n    vector&lt;vector&lt;Point&gt; &gt; contours;\n    vector&lt;Vec4i&gt; hierarchy;\n\n    /// Detect edges using canny\n    Canny(src_gray, canny_output, thresh, thresh * 2, 3);\n    /// Find contours\n    findContours(canny_output, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE, Point(0, 0));\n\n    /// Draw contours\n    Mat drawing = Mat::zeros(canny_output.size(), CV_8UC3);\n    for (int i = 0; i&lt; contours.size(); i++)\n    {\n        Scalar color = Scalar(rng.uniform(0, 255), rng.uniform(0, 255), rng.uniform(0, 255));\n        drawContours(drawing, contours, i, color, 2, 8, hierarchy, 0, Point());\n    }\n\n    /// Show in a window\n    namedWindow(\"Contours\", CV_WINDOW_AUTOSIZE);\n    imshow(\"Contours\", drawing);\n}\n</code></pre>\n\n<p>All the setting is correct such as property sheet as the program can works but it crash once it done the thresh_callback functions.\nI use visual studio 2015 with opencv 3.0. I had tried on visual studio 2012 or try other version of opencv like 2.4.9. Unfortunately, it still not works. Hope you all can help me</p>\n\n<p>Here showed my property sheet settings:\n1. Debug x64 property sheet\n<a href=\"https://i.stack.imgur.com/NZ2PL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NZ2PL.png\" alt=\"Debug x64 property sheet\"></a></p>\n\n<ol start=\"2\">\n<li>Release x64 property sheet\n<a href=\"https://i.stack.imgur.com/RG8Wb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RG8Wb.png\" alt=\"Release x64 property sheet\"></a></li>\n</ol>\n\n<p>I am able to run others image processing function such as <code>cv::imread</code>. Only the <code>findContour()</code> having errors.</p>\n\n<p><strong>Update</strong></p>\n\n<p>library path:\n<a href=\"https://i.stack.imgur.com/QYLni.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QYLni.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "qt", "getter"], "answers": [{"comments": [{"owner": {"reputation": 2021, "user_id": 5692012, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a3FwR.gif?s=128&g=1", "display_name": "RobinFrcd", "link": "https://stackoverflow.com/users/5692012/robinfrcd"}, "edited": false, "score": 0, "creation_date": 1486578546, "post_id": 42120600, "comment_id": 71409944, "body": "Thanks! So as my code is pretty long I&#39;ll try to make it short. The Selector signature is <code>InstrumentSelector::InstrumentSelector(QWidget *parent) : QPushButton(parent)</code>. I&#39;ve 36 of these buttons in my <code>SamplerModule</code>UI file. And I&#39;m trying to run <code>parent-&gt;getT()&#236;n my buttons constructor. So yes, I feel that I have to give more informations to the </code>InstrumentSelector` Instances but I don&#39;t really understand how to do it. :/"}, {"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "reply_to_user": {"reputation": 2021, "user_id": 5692012, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a3FwR.gif?s=128&g=1", "display_name": "RobinFrcd", "link": "https://stackoverflow.com/users/5692012/robinfrcd"}, "edited": false, "score": 1, "creation_date": 1486581437, "post_id": 42120600, "comment_id": 71411518, "body": "So what you need is:  &quot;SamplerModule *module = dynamic_cast &lt;SamplerModule *&gt; (parent);&quot; and then use &quot;module-&gt;getT()&quot;. The dynamic cast will fail and return a null pointer if parent isn&#39;t actually a SamplerModule. You&#39;ll also want to read up on base and derived classes and how to use pointers for each. This is an important concept and without a good understanding of it, you&#39;ll be very frustrated. :)"}, {"owner": {"reputation": 2021, "user_id": 5692012, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a3FwR.gif?s=128&g=1", "display_name": "RobinFrcd", "link": "https://stackoverflow.com/users/5692012/robinfrcd"}, "edited": false, "score": 0, "creation_date": 1486587626, "post_id": 42120600, "comment_id": 71415078, "body": "Thank you very much! But in that case, the <code>module</code> will be a &quot;new instance&quot; of <code>SamplerModule</code> right ? Not the one where the <code>InstrumentSelector</code> are created right ? So if I need to get value wich is set in this specific Instance of <code>SamplerModule</code> if can&#39;t get it this way ?"}, {"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "reply_to_user": {"reputation": 2021, "user_id": 5692012, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a3FwR.gif?s=128&g=1", "display_name": "RobinFrcd", "link": "https://stackoverflow.com/users/5692012/robinfrcd"}, "edited": false, "score": 0, "creation_date": 1486594463, "post_id": 42120600, "comment_id": 71418404, "body": "No, &quot;module&quot; isn&#39;t a new instance; the dynamic_cast tells the compiler to safely determine if the parent is actually a SamplerModule and then gives you a pointer to that same SamplerModule. After the cast, both &quot;parent&quot; and &quot;module&quot; point to the same object."}, {"owner": {"reputation": 2021, "user_id": 5692012, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a3FwR.gif?s=128&g=1", "display_name": "RobinFrcd", "link": "https://stackoverflow.com/users/5692012/robinfrcd"}, "edited": false, "score": 0, "creation_date": 1486594974, "post_id": 42120600, "comment_id": 71418653, "body": "Thanks, so as my buttons are created in the SamplerModule QtDesigner ui it should work? The variable with getT is getting is set in my SamplerModule constructor, so it should work, no? ATM it does not work, I&#39;ve segmentation fault, so it means that the value I&#39;m getting has no instance. I don&#39;t understand why! Thanks again mate!"}, {"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "reply_to_user": {"reputation": 2021, "user_id": 5692012, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a3FwR.gif?s=128&g=1", "display_name": "RobinFrcd", "link": "https://stackoverflow.com/users/5692012/robinfrcd"}, "edited": false, "score": 1, "creation_date": 1486599069, "post_id": 42120600, "comment_id": 71420102, "body": "If &quot;parent&quot; has a valid value, and parent is derived from SamplerModule, then the dynamic_cast will return a non-zero value. If the dynamic_cast is returning 0, then your parent class isn&#39;t actually a SamplerModule instance; it&#39;s something else."}], "tags": [], "owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "is_accepted": true, "score": 1, "last_activity_date": 1486577520, "creation_date": 1486577520, "answer_id": 42120600, "question_id": 42120525, "link": "https://stackoverflow.com/questions/42120525/call-qtwidget-parent-method-from-child/42120600#42120600", "title": "Call QtWidget parent method from child", "body": "<p>Without seeing the code, it's hard to say for sure, but my guess is that you've defined \"parent\" as a \"QWidget *\", so the compiler has no idea that it's actually a base pointer to a SamplerModule. You need to either cast \"parent\" to a SamplerModule pointer, or declare it that way to start with. And yes, this is pure C++; it's not related to Qt.</p>\n"}], "owner": {"reputation": 2021, "user_id": 5692012, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a3FwR.gif?s=128&g=1", "display_name": "RobinFrcd", "link": "https://stackoverflow.com/users/5692012/robinfrcd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 42120600, "answer_count": 1, "score": 0, "last_activity_date": 1486577520, "creation_date": 1486577308, "question_id": 42120525, "link": "https://stackoverflow.com/questions/42120525/call-qtwidget-parent-method-from-child", "title": "Call QtWidget parent method from child", "body": "<p>I'm trying to get some attributes of a parent widget: <code>SamplerModule</code> from its children: <code>InstrumentSelector</code>.</p>\n\n<p>From the <code>InstrumentSelector</code> constructor, I run <code>parent-&gt;metaObject()-&gt;className()</code> which gives me the right name (SamplerModule). So I'm sure that I'm in the right place to call one of my public method, for example <code>getT()</code> defined as a public method in my <code>SamplerModule</code> header and cpp file.</p>\n\n<p>But, when I call this function, I'm getting this error:</p>\n\n<blockquote>\n  <p>\\app\\widgets\\instrumentselector.cpp:23: erreur : 'class QWidget' has no member named 'getT'\n       msgBox.setText(parent->getT());</p>\n</blockquote>\n\n<p>So I think that's C++ and Qt basics but I'm still learning that. </p>\n\n<p>Does someone have an idea ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "vector", "codeblocks"], "comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1486579642, "post_id": 42120431, "comment_id": 71410565, "body": "Actually, you can just use <code>std::min_element</code>."}, {"owner": {"reputation": 4305, "user_id": 2640636, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/NWXEh.jpg?s=128&g=1", "display_name": "SU3", "link": "https://stackoverflow.com/users/2640636/su3"}, "edited": false, "score": 0, "creation_date": 1486580301, "post_id": 42120431, "comment_id": 71410926, "body": "I think the point here is that OP was trying to understand how to implement a function template like that."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 7258745, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/834ecbd12a62095b24bb04032351b360?s=128&d=identicon&r=PG&f=1", "display_name": "FishTheBig", "link": "https://stackoverflow.com/users/7258745/fishthebig"}, "edited": false, "score": 0, "creation_date": 1486577701, "post_id": 42120490, "comment_id": 71409445, "body": "Thank you very much"}, {"owner": {"reputation": 61, "user_id": 7258745, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/834ecbd12a62095b24bb04032351b360?s=128&d=identicon&r=PG&f=1", "display_name": "FishTheBig", "link": "https://stackoverflow.com/users/7258745/fishthebig"}, "edited": false, "score": 0, "creation_date": 1486579536, "post_id": 42120490, "comment_id": 71410514, "body": "Done :) Yes, thats exactly what i wanted. Your answer is great, thank you for your attention :)"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486579875, "post_id": 42120490, "comment_id": 71410696, "body": "This code has <i>many</i> compilation errors and does not consider the case of an empty vector. <code>min</code> should return an iterator, not an element, or assert that the vector is not empty. Of course, in real code, one would just use <code>std::min_element</code>."}, {"owner": {"reputation": 4305, "user_id": 2640636, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/NWXEh.jpg?s=128&g=1", "display_name": "SU3", "link": "https://stackoverflow.com/users/2640636/su3"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486580196, "post_id": 42120490, "comment_id": 71410866, "body": "@ChristianHackl Ok, I fixed the errors. OP was returning vector element by value in his question, so I did the next closest thing that doesn&#39;t copy <code>elemType</code>."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486580607, "post_id": 42120490, "comment_id": 71411099, "body": "@SU3: Compiles now. I think it&#39;s still a poorly designed interface for a function because you practically cannot implement it without invoking undefined behaviour for empty vectors."}], "tags": [], "owner": {"reputation": 4305, "user_id": 2640636, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/NWXEh.jpg?s=128&g=1", "display_name": "SU3", "link": "https://stackoverflow.com/users/2640636/su3"}, "is_accepted": true, "score": 3, "last_activity_date": 1486581246, "last_edit_date": 1486581246, "creation_date": 1486577183, "answer_id": 42120490, "question_id": 42120431, "link": "https://stackoverflow.com/questions/42120431/a-template-declaration-cannot-appear-at-block-scope/42120490#42120490", "title": "A template declaration cannot appear at block scope", "body": "<p>You cannot define template inside a function, and <code>main</code> is a function. You need to define your <code>min</code> function template outside of main, before it.</p>\n\n<p>You have several other problems in your code. The</p>\n\n<pre><code>template &lt;class elemType&gt;\n</code></pre>\n\n<p>must appear immediately before the function definition. Putting</p>\n\n<pre><code>elemType save;\n</code></pre>\n\n<p>between them is not correct syntax.</p>\n\n<p>Another problem is your algorithm for selecting the min value in a vector. Why do you have this</p>\n\n<pre><code>if (*save &lt; *(it + 1) ) { save = *it; }\n</code></pre>\n\n<p>and this</p>\n\n<pre><code>if (*save &lt; *it ) { save = *it; }\n</code></pre>\n\n<p>at the same time?</p>\n\n<p>Here's what you probably want:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate &lt;class elemType&gt;\nconst elemType&amp; min(const std::vector&lt;elemType&gt;&amp; vec) {\n  typename std::vector&lt;elemType&gt;::const_iterator\n    select = vec.begin(),\n    it = std::next(select),\n    end = vec.end();\n  for ( ; it != end; ++it ) {\n    if ( *it &lt; *select ) select = it;\n  }\n  return *select;\n};\n\nint main() {\n  int massiv[10] = {35, 66, 98, 15, 32, 41, 24, 90, 55, 100};\n  std::vector&lt;int&gt; vec_train(massiv,massiv+10);\n\n  std::cout &lt;&lt; min(vec_train) &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p>If you need to handle empty vectors, you could add</p>\n\n<pre><code>if (!vec.size()) throw std::length_error(\"empty vector passed to min\");\n</code></pre>\n\n<p>at the beginning of the function, or return an iterator instead of element reference, as <code>end()</code> is well defined even for empty vectors.</p>\n"}], "owner": {"reputation": 61, "user_id": 7258745, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/834ecbd12a62095b24bb04032351b360?s=128&d=identicon&r=PG&f=1", "display_name": "FishTheBig", "link": "https://stackoverflow.com/users/7258745/fishthebig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11366, "favorite_count": 0, "accepted_answer_id": 42120490, "answer_count": 1, "score": 2, "last_activity_date": 1486586616, "creation_date": 1486576983, "last_edit_date": 1486586616, "question_id": 42120431, "link": "https://stackoverflow.com/questions/42120431/a-template-declaration-cannot-appear-at-block-scope", "title": "A template declaration cannot appear at block scope", "body": "<p>I'm learning Lipmann and I'm only studying. I'm trying here to write a code that will return a minimal element in a vector. When I compile my code in Codeblocks, it says: \"A template declaration cannot appear at block scope\". Here is the code:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    template &lt;class elemType&gt;\n    elemType save;\n    elemType min (const std::vector&lt;elemType&gt; &amp;vec) {\n      std::vector&lt;elemType&gt;::iterator it = vec.begin(), end_it = vec.end();\n      std::vector&lt;elemType&gt;::iterator iter = std::next(it, 1);\n      for ( ; it != end_it; it++ ) {\n        if ( *it &lt; *(it + 1) ) {\n          save = *it;\n        }\n        if (save &lt; *it) {\n          save = *it;\n        }\n      }\n    };\n\n    int massiv[10] = {35, 66, 98, 15, 32, 41, 24, 90, 55, 100};\n    std::vector&lt;int&gt; vec_train(massiv,massiv+10);\n\n\n    min(vec_train);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "loops", "input", "fstream"], "comments": [{"owner": {"reputation": 351, "user_id": 7440077, "user_type": "registered", "profile_image": "https://graph.facebook.com/1424452754266696/picture?type=large", "display_name": "Zhou Zhi Hua", "link": "https://stackoverflow.com/users/7440077/zhou-zhi-hua"}, "edited": false, "score": 3, "creation_date": 1486577176, "post_id": 42120417, "comment_id": 71409144, "body": "Other than concerning about the error message, you might want to put <b>break;</b> after each case label to prevent unwanted result."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1486577194, "post_id": 42120417, "comment_id": 71409164, "body": "Please post the error verbatim error message as well. <code>tolower()</code>&#39;s result can&#39;t be taken as an input parameter for <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/get\" rel=\"nofollow noreferrer\"><code>std::istream::get()</code>.</a>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486577469, "post_id": 42120417, "comment_id": 71409315, "body": "You should prompt the User for a filename.  Otherwise the program is paused for no reason (at least from a User&#39;s point of view)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1486577548, "post_id": 42120417, "comment_id": 71409362, "body": "I recommend placing an <code>inFile.close()</code> at the end of the <code>for</code> loop.  Although not necessary, this makes file closure explicit to the reader."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 2, "creation_date": 1486577855, "post_id": 42120417, "comment_id": 71409520, "body": "Your code <a href=\"http://kayari.org/cxx/antipatterns.html#istream-check\" rel=\"nofollow noreferrer\">reads from an istream without checking the result</a>. That is almost always a bug. It also <a href=\"http://kayari.org/cxx/antipatterns.html#istream-eof\" rel=\"nofollow noreferrer\">tests for <code>istream::eof()</code> in a loop</a>, which is also almost always a bug. When using iostreams you should never write <code>while (!inFile.eof())</code> and if you got taught that you should change school."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486578151, "post_id": 42120417, "comment_id": 71409695, "body": "Is the <i>total character</i> count the sum of the unique characters or the count of all the characters in the file?  For example, the letter &#39;g&#39; doesn&#39;t enter into your calculations."}, {"owner": {"reputation": 13, "user_id": 4106972, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/944b7aecc6ae6fdc8940750e3a90f207?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Ahrens", "link": "https://stackoverflow.com/users/4106972/thomas-ahrens"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486587862, "post_id": 42120417, "comment_id": 71415230, "body": "@Thomas Matthews 1: Thank you for reminding me about <code>inFile.close()</code>, it was in the assignment instruction but I forgot to put it in the version I uploaded. It also mentions a function <code>inFile.clear</code>, do you know where that would go and do you think you explain why? 2: The total character count only adds up total instances of the characters checked for. G is not included in that.  @Jonathan Wakely: Actually, yes, my professor did specifically instruct me to use a while loop that &quot;processes each file&quot;. I wonder as to why he told us this after reading your comment. What&#39;s a fix for this?"}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1486578219, "post_id": 42120654, "comment_id": 71409737, "body": "Why do you need a <code>static_cast</code> when using <code>tolower</code>?  Are you doing explicit conversion from <code>int</code> to <code>char</code>?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1486578262, "post_id": 42120654, "comment_id": 71409765, "body": "<code>c = tolower(static_cast&lt;unsigned char&gt;(c));</code> to avoid undefined behaviour if <code>c</code> can be negative, and to remove the redundant cast."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486578321, "post_id": 42120654, "comment_id": 71409802, "body": "@thomas Yes, that was the intend. My earlier answers were often attacked by nitpickers, that cast is required for applying <code>int</code> to <code>char</code> types."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1486578368, "post_id": 42120654, "comment_id": 71409845, "body": "&quot;required&quot;? says who?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1486578546, "post_id": 42120654, "comment_id": 71409943, "body": "@jonathan I removed the cast from my answer, and added the link for a fixed and compiling code (the warnings are a different kettle of fish)."}, {"owner": {"reputation": 13, "user_id": 4106972, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/944b7aecc6ae6fdc8940750e3a90f207?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Ahrens", "link": "https://stackoverflow.com/users/4106972/thomas-ahrens"}, "edited": false, "score": 0, "creation_date": 1486589843, "post_id": 42120654, "comment_id": 71416269, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 You&#39;re a life saver! Thanks for the code fix."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1486578459, "last_edit_date": 1486578459, "creation_date": 1486577695, "answer_id": 42120654, "question_id": 42120417, "link": "https://stackoverflow.com/questions/42120417/reading-each-character-from-a-separate-file/42120654#42120654", "title": "Reading each character from a separate file?", "body": "<p>The problem you're referring to is here:</p>\n\n<pre><code>inFile.get(tolower(c));\n</code></pre>\n\n<p>If the compiler tells you that there's no applicable overload for a specific function call, the 1st action you should take is to read the <a href=\"http://en.cppreference.com/w/cpp\" rel=\"nofollow noreferrer\">documentation</a> and check what's required to call that function.</p>\n\n<p>The problem is that <a href=\"http://en.cppreference.com/w/cpp/string/byte/tolower\" rel=\"nofollow noreferrer\"><code>std::tolower()</code></a>'s result type is <code>int</code> as rvalue, while <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/get\" rel=\"nofollow noreferrer\"><code>std::istream::get()</code></a> expects a <code>char&amp;</code> type.</p>\n\n<p>You can fix that code like</p>\n\n<pre><code>inFile.get(c);\nc = tolower(c);\n</code></pre>\n\n<p>See the fixed code <a href=\"http://coliru.stacked-crooked.com/a/cfa0f42730dda7e7\" rel=\"nofollow noreferrer\">here</a> please.</p>\n\n<hr>\n\n<p><sub>Note that there are more problems with your code as mentioned in the comments</sub></p>\n"}], "owner": {"reputation": 13, "user_id": 4106972, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/944b7aecc6ae6fdc8940750e3a90f207?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Ahrens", "link": "https://stackoverflow.com/users/4106972/thomas-ahrens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486578459, "creation_date": 1486576915, "question_id": 42120417, "link": "https://stackoverflow.com/questions/42120417/reading-each-character-from-a-separate-file", "title": "Reading each character from a separate file?", "body": "<p>I'm currently working on a school assignment that involves first taking in the contents of x number of files that the user inputs the names of, then reading how many of certain letters there, then outputting that to the user.\nThis is what I have so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;cstdlib&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main()\n{\n    const int fileNameSize = 20;\n    int fileCount = 0;\n    ifstream inFile;\n    ofstream outFile;\n    int numRows, numPRow, num, rowSum;\n    char inputFileName [fileNameSize+1];\n    cout &lt;&lt; \"How many files are being processed?\\n\";\n    cin &gt;&gt; fileCount;\n    for (int i = 0; i &lt;= fileCount; i++)\n    {\n        cin &gt;&gt; inputFileName;\n        inFile.open(inputFileName);\n        if (!inFile)\n        {\n            cout &lt;&lt; \"Could not open input file.\\n\";\n            return 0;\n        }\n        else\n        {\n            int acount, tcount, ecount, ocount, icount, ncount, scount, hcount, rcount;\n            char c;\n            while (!inFile.eof())\n            {\n                //inFile &gt;&gt; num;\n                inFile.get(tolower(c));\n                switch (c)\n                {\n                    case 'a': acount++;\n                    case 't': tcount++;\n                    case 'e': ecount++;\n                    case 'o': ocount++;\n                    case 'i': icount++;\n                    case 'n': ncount++;\n                    case 's': scount++;\n                    case 'h': hcount++;\n                    case 'r': rcount++;\n                }               \n            }\n            int chartotal = acount + tcount + ecount + ocount + icount + ncount + scount + hcount + rcount;\n            cout &lt;&lt; \"File name: \" &lt;&lt; inputFileName &lt;&lt; endl;\n            cout &lt;&lt; \"Number of E's: \" &lt;&lt; ecount &lt;&lt; endl;\n            cout &lt;&lt; \"Number of T's: \" &lt;&lt; tcount &lt;&lt; endl;\n            cout &lt;&lt; \"Number of A's: \" &lt;&lt; acount &lt;&lt; endl;\n            cout &lt;&lt; \"Number of O's: \" &lt;&lt; ocount &lt;&lt; endl;\n            cout &lt;&lt; \"Number of I's: \" &lt;&lt; icount &lt;&lt; endl;\n            cout &lt;&lt; \"Number of N's: \" &lt;&lt; ncount &lt;&lt; endl;\n            cout &lt;&lt; \"Number of S's: \" &lt;&lt; scount &lt;&lt; endl;\n            cout &lt;&lt; \"Number of H's: \" &lt;&lt; hcount &lt;&lt; endl;\n            cout &lt;&lt; \"Number of R's: \" &lt;&lt; rcount &lt;&lt; endl;\n            cout &lt;&lt; \"Total Number of Characters: \" &lt;&lt; chartotal &lt;&lt; endl;\n        }\n    }\n    //cout &lt;&lt; \"exit colm flag\";\n    //cout &lt;&lt; \"exit row flag\\n\";\n\n}\n</code></pre>\n\n<p>After compiling, I receive an error with line 33:</p>\n\n<pre><code>33:26: note: candidates are:\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream                                                                                                             :283:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::int_type std::basic_istream&lt;_                                                                                                             CharT, _Traits&gt;::get() [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, st                                                                                                             d::basic_istream&lt;_CharT, _Traits&gt;::int_type = int]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream                                                                                                             :283:7: note:   candidate expects 0 arguments, 1 provided\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream                                                                                                             :297:7: note: std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::basic_istream&lt;_CharT, _T                                                                                                             raits&gt;::get(std::basic_istream&lt;_CharT, _Traits&gt;::char_type&amp;) [with _CharT = char                                                                                                             , _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::char_ty                                                                                                             pe = char]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream                                                                                                             :297:7: note:   no known conversion for argument 1 from 'int' to 'std::basic_ist                                                                                                             ream&lt;char&gt;::char_type&amp; {aka char&amp;}'\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream                                                                                                             :324:7: note: std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::basic_istream&lt;_CharT, _T                                                                                                             raits&gt;::get(std::basic_istream&lt;_CharT, _Traits&gt;::char_type*, std::streamsize, st                                                                                                             d::basic_istream&lt;_CharT, _Traits&gt;::char_type) [with _CharT = char, _Traits = std                                                                                                             ::char_traits&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::char_type = char, std:                                                                                                             :streamsize = int]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream                                                                                                             :324:7: note:   candidate expects 3 arguments, 1 provided\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream                                                                                                             :335:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_is                                                                                                             tream&lt;_CharT, _Traits&gt;::get(std::basic_istream&lt;_CharT, _Traits&gt;::char_type*, std                                                                                                             ::streamsize) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_                                                                                                             istream&lt;_CharT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;, std::basic_                                                                                                             istream&lt;_CharT, _Traits&gt;::char_type = char, std::streamsize = int]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream                                                                                                             :335:7: note:   candidate expects 2 arguments, 1 provided\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream                                                                                                             :358:7: note: std::basic_istream&lt;_CharT, _Traits&gt;&amp; std::basic_istream&lt;_CharT, _T                                                                                                             raits&gt;::get(std::basic_istream&lt;_CharT, _Traits&gt;::__streambuf_type&amp;, std::basic_i                                                                                                             stream&lt;_CharT, _Traits&gt;::char_type) [with _CharT = char, _Traits = std::char_tra                                                                                                             its&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::__streambuf_type = std::basic_st                                                                                                             reambuf&lt;char&gt;, std::basic_istream&lt;_CharT, _Traits&gt;::char_type = char]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream                                                                                                             :358:7: note:   candidate expects 2 arguments, 1 provided\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream                                                                                                             :368:7: note: std::basic_istream&lt;_CharT, _Traits&gt;::__istream_type&amp; std::basic_is                                                                                                             tream&lt;_CharT, _Traits&gt;::get(std::basic_istream&lt;_CharT, _Traits&gt;::__streambuf_typ                                                                                                             e&amp;) [with _CharT = char, _Traits = std::char_traits&lt;char&gt;, std::basic_istream&lt;_C                                                                                                             harT, _Traits&gt;::__istream_type = std::basic_istream&lt;char&gt;, std::basic_istream&lt;_C                                                                                                             harT, _Traits&gt;::__streambuf_type = std::basic_streambuf&lt;char&gt;]\n/opt/csw/lib/gcc/i386-pc-solaris2.10/4.6.3/../../../../include/c++/4.6.3/istream                                                                                                             :368:7: note:   no known conversion for argument 1 from 'int' to 'std::basic_ist                                                                                                             ream&lt;char&gt;::__streambuf_type&amp; {aka std::basic_streambuf&lt;char&gt;&amp;}'\n</code></pre>\n\n<p>I understand very little of how these ifstream, ofstream, etc functions work and have simply been transcribing them from an example file and manipulating them to the desired program. Is there a specific function for reading each character from .txt file, that I can the work with?</p>\n"}, {"tags": ["python", "c++", "pascal", "binaryfiles"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1486576622, "post_id": 42120266, "comment_id": 71408794, "body": "Maybe the <a href=\"https://docs.python.org/2/library/struct.html\" rel=\"nofollow noreferrer\">struct</a> packge is what you are looking for."}, {"owner": {"reputation": 2158, "user_id": 7190191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80c97da8e6a0d7784317a81a3e8539ca?s=128&d=identicon&r=PG&f=1", "display_name": "grepcake", "link": "https://stackoverflow.com/users/7190191/grepcake"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1486576908, "post_id": 42120266, "comment_id": 71408980, "body": "@juanpa.arrivillaga - That seems to be what I need. I&#39;m still interested in c++ analog though"}, {"owner": {"reputation": 4375, "user_id": 381179, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ebb3d1f5ca7ad690f67bd5e7d2f7fd77?s=128&d=identicon&r=PG", "display_name": "Lagerbaer", "link": "https://stackoverflow.com/users/381179/lagerbaer"}, "edited": false, "score": 0, "creation_date": 1486577075, "post_id": 42120266, "comment_id": 71409077, "body": "For C++, the keyword I&#39;m thinking of is serialization. And of course, boost has a thing for it: <a href=\"http://www.boost.org/doc/libs/1_36_0/libs/serialization/doc/index.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_36_0/libs/serialization/doc/index.html</a>"}, {"owner": {"reputation": 2158, "user_id": 7190191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80c97da8e6a0d7784317a81a3e8539ca?s=128&d=identicon&r=PG&f=1", "display_name": "grepcake", "link": "https://stackoverflow.com/users/7190191/grepcake"}, "reply_to_user": {"reputation": 4375, "user_id": 381179, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ebb3d1f5ca7ad690f67bd5e7d2f7fd77?s=128&d=identicon&r=PG", "display_name": "Lagerbaer", "link": "https://stackoverflow.com/users/381179/lagerbaer"}, "edited": false, "score": 0, "creation_date": 1486577859, "post_id": 42120266, "comment_id": 71409524, "body": "@Lagerbaer - I need to use binary files. That&#39;s the point of work"}, {"owner": {"reputation": 4375, "user_id": 381179, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ebb3d1f5ca7ad690f67bd5e7d2f7fd77?s=128&d=identicon&r=PG", "display_name": "Lagerbaer", "link": "https://stackoverflow.com/users/381179/lagerbaer"}, "edited": false, "score": 0, "creation_date": 1486578684, "post_id": 42120266, "comment_id": 71410028, "body": "Yeah and from that link: &quot;Here, we use the term &quot;serialization&quot; to mean the reversible deconstruction of an arbitrary set of C++ data structures to a sequence of bytes.&quot; Sequence of bytes = binary files."}], "answers": [{"comments": [{"owner": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "edited": false, "score": 0, "creation_date": 1486591792, "post_id": 42120893, "comment_id": 71417229, "body": "My guess is that the OP wants to define a file of packed structs without automated types. How would one do that in C++? Pascal differentiates between a binary file from which you manually read structs, and a file that contains <i>only</i> a certain struct in a language enforced way."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "edited": false, "score": 0, "creation_date": 1486593528, "post_id": 42120893, "comment_id": 71418007, "body": "@MarcovandeVoort:  In C++, files don&#39;t contain types.  You read a quantity of bytes from the file.  You can read them into a variable (record)."}, {"owner": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "edited": false, "score": 0, "creation_date": 1486594193, "post_id": 42120893, "comment_id": 71418293, "body": "Yes, that was what I guessed from my limited plain C experience (but wasn&#39;t sure for C++). C++ doesn&#39;t have proper typed file support. But in Pascal serialization of a struct to to &quot;file of byte&quot; or to file of &lt;somestruct&gt;  are different things. E.g. a seek on a &quot;file of &lt;struct&gt;&quot; will be in granularity of sizeof(struct), so seek(f,2) will select the third record etc.Raw files can have granularity too (e.g. pagesize 4096/8192 bytes for memory mapped files is a practical example)"}, {"owner": {"reputation": 2158, "user_id": 7190191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80c97da8e6a0d7784317a81a3e8539ca?s=128&d=identicon&r=PG&f=1", "display_name": "grepcake", "link": "https://stackoverflow.com/users/7190191/grepcake"}, "edited": false, "score": 0, "creation_date": 1486610608, "post_id": 42120893, "comment_id": 71423082, "body": "@ThomasMatthews How do I read bytes directly into a variable?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486654501, "post_id": 42120893, "comment_id": 71447693, "body": "You use the block read method, <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/read\" rel=\"nofollow noreferrer\">std::ifstream::read</a>.  You can use <code>sizeof</code> for POD types.  For records, you should perform I/O on individual data members.  <i>Search the internet for &quot;C++ serialization&quot;</i>."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1486578492, "creation_date": 1486578492, "answer_id": 42120893, "question_id": 42120266, "link": "https://stackoverflow.com/questions/42120266/c-and-python-analogs-for-pascals-typed-binary-files/42120893#42120893", "title": "C++ and Python analogs for Pascal&#39;s typed binary files", "body": "<p>In C++, the file layout is determined by the programmer.<br>\nThe language provides a <code>binary</code> mode in which data is not translated to or from the file.  </p>\n\n<p>Also, some types may contain <em>pointers</em> which are valid when written to a file because the items pointed to may be loaded into different locations by the operating system.  </p>\n\n<p>Search the internet for \"c++ serialization\".  </p>\n"}, {"tags": [], "owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "is_accepted": true, "score": 2, "last_activity_date": 1486581801, "last_edit_date": 1486581801, "creation_date": 1486581422, "answer_id": 42121773, "question_id": 42120266, "link": "https://stackoverflow.com/questions/42120266/c-and-python-analogs-for-pascals-typed-binary-files/42121773#42121773", "title": "C++ and Python analogs for Pascal&#39;s typed binary files", "body": "<p>Python(3) basically has three types of files;</p>\n\n<ul>\n<li>text</li>\n<li>binary</li>\n<li>raw</li>\n</ul>\n\n<p>See the documentation for the <a href=\"https://docs.python.org/3/library/io.html\" rel=\"nofollow noreferrer\">io</a> module.</p>\n\n<p>Using binary files and <code>struct</code> you could basically create iterators over arbitrary file types.</p>\n"}], "owner": {"reputation": 2158, "user_id": 7190191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80c97da8e6a0d7784317a81a3e8539ca?s=128&d=identicon&r=PG&f=1", "display_name": "grepcake", "link": "https://stackoverflow.com/users/7190191/grepcake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 42121773, "answer_count": 2, "score": 1, "last_activity_date": 1486581801, "creation_date": 1486576407, "last_edit_date": 1592644375, "question_id": 42120266, "link": "https://stackoverflow.com/questions/42120266/c-and-python-analogs-for-pascals-typed-binary-files", "title": "C++ and Python analogs for Pascal&#39;s typed binary files", "body": "<p>There is a convenient thing in Pascal which is typed binary files.</p>\n<p><strong>Description from <a href=\"http://wiki.freepascal.org/File#Typed_binary\" rel=\"nofollow noreferrer\">Free Pascal wiki</a></strong></p>\n<blockquote>\n<p>The type <code>file of &lt;type&gt;</code>, where <code>&lt;type&gt;</code> is any simple type (no references/pointers) or record type, is a binary file representing a sequence of  values. For example, you can have files that are a sequence of integers, floating-point values, or records (as long as all record fields are also simple types).</p>\n</blockquote>\n<p>I wonder if I can use something like this with Python data types, C++ classes or just C-like plain structs, i.e. with something more complex than primitive number types.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1277, "user_id": 1737811, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab510b7d0d145c538fcc7638395ee703?s=128&d=identicon&r=PG", "display_name": "mutantkeyboard", "link": "https://stackoverflow.com/users/1737811/mutantkeyboard"}, "edited": false, "score": 0, "creation_date": 1486576399, "post_id": 42120222, "comment_id": 71408657, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/18636941/vector-iterator-not-dereferencable-in-for-loop\">Vector iterator not dereferencable in for loop</a>"}, {"owner": {"reputation": 47, "user_id": 2130571, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0baf2304524f1424bd957b42da597af1?s=128&d=identicon&r=PG", "display_name": "ashutosh", "link": "https://stackoverflow.com/users/2130571/ashutosh"}, "edited": false, "score": 0, "creation_date": 1486576889, "post_id": 42120222, "comment_id": 71408971, "body": "They just bypass the call to underlying vector&#39;s begin() and end(). I see that they could be a problem, but I have no explicit reasons."}], "answers": [{"tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 1, "last_activity_date": 1486576741, "creation_date": 1486576741, "answer_id": 42120362, "question_id": 42120222, "link": "https://stackoverflow.com/questions/42120222/vector-iterator-not-dereferencable-for-a-wrapper-class-without-beyond-the-end/42120362#42120362", "title": "Vector iterator not dereferencable for a wrapper class (Without beyond the end() dereferencing)", "body": "<p>This is an issue:</p>\n\n<p><code>auto begin(MyType obj)</code></p>\n\n<p>MyType is a temporary object.  Thus this object no longer exists when the function returns, therefore the iterator being returned is invalid. </p>\n\n<p>Instead, pass a reference:</p>\n\n<p><code>auto begin(MyType&amp; obj)</code></p>\n\n<p><code>auto end(MyType&amp; obj)</code></p>\n"}], "owner": {"reputation": 47, "user_id": 2130571, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0baf2304524f1424bd957b42da597af1?s=128&d=identicon&r=PG", "display_name": "ashutosh", "link": "https://stackoverflow.com/users/2130571/ashutosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 42120362, "answer_count": 1, "score": -1, "last_activity_date": 1486576741, "creation_date": 1486576238, "last_edit_date": 1486576735, "question_id": 42120222, "link": "https://stackoverflow.com/questions/42120222/vector-iterator-not-dereferencable-for-a-wrapper-class-without-beyond-the-end", "title": "Vector iterator not dereferencable for a wrapper class (Without beyond the end() dereferencing)", "body": "<p>I was trying to understand the behavior of Argument Dependent Lookup in case of range-based for loop. I implement the begin and end for my type as free functions within the same namespace as my type. I keep getting runtime assertion failed error.</p>\n\n<blockquote>\n  <p>Expression: vector iterator not dereferncable</p>\n</blockquote>\n\n<p>Here is the sample code that I'd written:</p>\n\n<pre><code>namespace my {\n    struct MyType {\n        std::vector&lt;int&gt; hiddenData;\n        MyType(int i) : hiddenData(i) {}\n    };\n\n    auto begin(MyType obj) {\n        return obj.hiddenData.begin();\n    }\n\n    auto end(MyType obj) {\n        return obj.hiddenData.end();\n    }\n}\n\nvoid test() {\n    my::MyType m(5);\n    for (auto&amp; e : m)\n        std:: cout &lt;&lt; e &lt;&lt; std:: endl;\n}\n</code></pre>\n\n<p>Thanks for taking a look at it!</p>\n"}, {"tags": ["c++", "linux", "executable", "transfer"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1486576226, "post_id": 42120090, "comment_id": 71408543, "body": "The common way to install applications at different linux distros is recompiling the code for the target platform using the system available compiler. E.g. RPM managers like zypper support doing so and manage the dependencies."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1486576768, "post_id": 42120090, "comment_id": 71408891, "body": "You need to compile on your host computer (the desktop) using a cross-compiler for the target architecture (the board). You don&#39;t need to install any compiler on the target."}], "answers": [{"comments": [{"owner": {"reputation": 23386, "user_id": 33345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487d8f71839dcd0a5a90f2185f960c3d?s=128&d=identicon&r=PG", "display_name": "greyfade", "link": "https://stackoverflow.com/users/33345/greyfade"}, "edited": false, "score": 1, "creation_date": 1486576836, "post_id": 42120172, "comment_id": 71408938, "body": "It does not need to be compiled <i>on</i> the board. It can be compiled with a <a href=\"http://preshing.com/20141119/how-to-build-a-gcc-cross-compiler/\" rel=\"nofollow noreferrer\">cross-build environment</a>. GCC can be built for a target of <code>arm-linux-gnueabi</code> if the board runs a full distro or something like <code>arm-linux-uclibc</code> if it has something like &#197;ngstrom on it."}, {"owner": {"reputation": 1083, "user_id": 3768183, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1eaa13c75e1733a620a8546168582bec?s=128&d=identicon&r=PG&f=1", "display_name": "dk13", "link": "https://stackoverflow.com/users/3768183/dk13"}, "reply_to_user": {"reputation": 23386, "user_id": 33345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487d8f71839dcd0a5a90f2185f960c3d?s=128&d=identicon&r=PG", "display_name": "greyfade", "link": "https://stackoverflow.com/users/33345/greyfade"}, "edited": false, "score": 0, "creation_date": 1486577526, "post_id": 42120172, "comment_id": 71409343, "body": "@greyfade The tutorial I&#39;m following is :<a href=\"http://docs.cubieboard.org/tutorials/ct1/installation/install_lubuntu_desktop_server_to_sd_card\" rel=\"nofollow noreferrer\">docs.cubieboard.org/tutorials/ct1/installation/&hellip;</a>. Sorry for my stupid question but if it runs Lubuntu and it omits a compiler, how can it built on board. How are the standard c++ headers going to be retrieved ?"}, {"owner": {"reputation": 1083, "user_id": 3768183, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1eaa13c75e1733a620a8546168582bec?s=128&d=identicon&r=PG&f=1", "display_name": "dk13", "link": "https://stackoverflow.com/users/3768183/dk13"}, "reply_to_user": {"reputation": 23386, "user_id": 33345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487d8f71839dcd0a5a90f2185f960c3d?s=128&d=identicon&r=PG", "display_name": "greyfade", "link": "https://stackoverflow.com/users/33345/greyfade"}, "edited": false, "score": 0, "creation_date": 1486579119, "post_id": 42120172, "comment_id": 71410288, "body": "@greyfade sorry for the question I just find out that cross-build environment was indeed a link. Thanks a lot."}], "tags": [], "owner": {"reputation": 66, "user_id": 7536037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9600736e4882af56d556642542c6d450?s=128&d=identicon&r=PG&f=1", "display_name": "r3sist3nt", "link": "https://stackoverflow.com/users/7536037/r3sist3nt"}, "is_accepted": true, "score": 1, "last_activity_date": 1486576075, "creation_date": 1486576075, "answer_id": 42120172, "question_id": 42120090, "link": "https://stackoverflow.com/questions/42120090/transfer-c-executable-from-desktop-linux-distribution-to-a-linux-board-one/42120172#42120172", "title": "Transfer c++ executable from desktop linux distribution to a linux board one", "body": "<p>I think the main problem is the different architecture. Your board is ARM while your Desktop is x86. Your application needs to be compiled on the board. Also you need to get the library files for arm.</p>\n"}], "owner": {"reputation": 1083, "user_id": 3768183, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1eaa13c75e1733a620a8546168582bec?s=128&d=identicon&r=PG&f=1", "display_name": "dk13", "link": "https://stackoverflow.com/users/3768183/dk13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 42120172, "answer_count": 1, "score": 0, "last_activity_date": 1486576075, "creation_date": 1486575795, "question_id": 42120090, "link": "https://stackoverflow.com/questions/42120090/transfer-c-executable-from-desktop-linux-distribution-to-a-linux-board-one", "title": "Transfer c++ executable from desktop linux distribution to a linux board one", "body": "<p>I'm developing a c++ app in Ubuntu Desktop 16.04. I have created an executable c++ file with eclipse. Furthermore I'm using external libraries like poco and avro which I link dynamically. I need to try my app on a cubietruck that runs on Lubuntu Desktop 12.10. My approach it to install only the desired g++ compiler on Lubuntu because I want to install as less as possible on the board. Then to  transfer there the same folder structure which resides in Ubuntu that contains the executable file as well as the external libraries'.so files and its headers. Since I have almost no experience in boards and transfer between linux distro's is my approach an efficient one?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 2, "creation_date": 1486576011, "post_id": 42120053, "comment_id": 71408417, "body": "Could you isolate it into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1486576163, "post_id": 42120053, "comment_id": 71408502, "body": "There&#39;s a zillion reasons why this can happen (about as many as lines of code we don&#39;t get to see, in particular lines of code that say something like <code>#define  FVec vec2</code> (hint, look at the filenames)). That&#39;s why you are asked to come up with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1486576215, "post_id": 42120053, "comment_id": 71408534, "body": "Since they&#39;re each a separate source file, each one gets compiled into it&#39;s own object file - there is no naming collision."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1486576365, "post_id": 42120053, "comment_id": 71408632, "body": "@GovindParmar nope."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 0, "creation_date": 1486576470, "post_id": 42120053, "comment_id": 71408698, "body": "@GovindParmar: There is no naming collision at the compilation level. There is one, however, at the <i>linking</i> level."}, {"owner": {"reputation": 7113, "user_id": 653152, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HoFfR.jpg?s=128&g=1", "display_name": "Martin Ueding", "link": "https://stackoverflow.com/users/653152/martin-ueding"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1486576513, "post_id": 42120053, "comment_id": 71408725, "body": "@RustyX: I will work on that. It might as well happen I understand the problem while preparing it. I first wanted to know whether I have lost my sanity or whether something really odd is going on."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486584924, "post_id": 42120053, "comment_id": 71413575, "body": "Look carefully at the end of each of the three files. Do you see a big bold <code>#endif</code> in each of them? If you do, find the corresponding <code>#if</code>s."}], "answers": [{"comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1486576306, "post_id": 42120158, "comment_id": 71408591, "body": "You won&#39;t be able to <i>link</i> such an application though. Which is what the question is about."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1486576375, "post_id": 42120158, "comment_id": 71408638, "body": "It is true that a linker is never <i>required by the standard</i> to detect odr violations, but most linkers usually do detect them. I&#39;m curious to know why that isn&#39;t the case here. Probably impossible to tell without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> from OP though. My guess is that there isn&#39;t an odr violation in the first place."}, {"owner": {"reputation": 7113, "user_id": 653152, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HoFfR.jpg?s=128&g=1", "display_name": "Martin Ueding", "link": "https://stackoverflow.com/users/653152/martin-ueding"}, "edited": false, "score": 0, "creation_date": 1486576406, "post_id": 42120158, "comment_id": 71408663, "body": "Ouch, so basically this is undefined behavior then and it is undefined which of the three functions ends up in the program? Then it would be job of the build system to just link one file into the final executable?"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1486576516, "post_id": 42120158, "comment_id": 71408730, "body": "No, you&#39;re probably missing some conditional compilation."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1486576869, "post_id": 42120158, "comment_id": 71408960, "body": "@RustyX It&#39;s up to the linker how to handle the situation.  It could issue a warning, an error, or just pick one and go with it.  Just picking one is the easiest way to handle multiple definitions of inline defined functions when the optimization settings have completely disabled inlining."}, {"owner": {"reputation": 762, "user_id": 1987633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cc5084e895540051a920e541ab9b8c?s=128&d=identicon&r=PG", "display_name": "Andre Kostur", "link": "https://stackoverflow.com/users/1987633/andre-kostur"}, "edited": false, "score": 0, "creation_date": 1486584409, "post_id": 42120158, "comment_id": 71413299, "body": "By standard, every program shall contain exactly one definition of every non-inline function.  Thus it gets to freely assume that the first one it sees is the only one, and stop looking.  Or when building a lookup table, blindly overwrite any existing entry with the most recently found as there can only be one in a valid program anyway."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1486584541, "post_id": 42120158, "comment_id": 71413370, "body": "@1201ProgramAlarm The linker in question is not a hypothetical linker that can do this or that depending on phases of the moon. It is one well known well documented linker. Be rest assured it does issue a very loud error when there is more than one definition of a function."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 8, "last_activity_date": 1486576050, "creation_date": 1486576050, "answer_id": 42120158, "question_id": 42120053, "link": "https://stackoverflow.com/questions/42120053/three-different-definitions-of-a-function-no-linker-error-how-can-that-be/42120158#42120158", "title": "Three different definitions of a function, no linker error; how can that be?", "body": "<p>Because no diagnostic is required when the multiple definitions occur in multiple translation units.</p>\n\n<p>From [basic.def.odr]:</p>\n\n<blockquote>\n  <p>No translation unit shall contain more than one definition of any variable, function, class type, enumeration type, or template.</p>\n</blockquote>\n\n<p>and later</p>\n\n<blockquote>\n  <p>Every program shall contain exactly one definition of every non-inline function or variable that is odr-used in that program outside of a discarded statement (6.4.1); no diagnostic required.</p>\n</blockquote>\n\n<p>So you get an error if they are multiple definitions within on source module, but don't have to get them if they're in different ones.</p>\n"}], "owner": {"reputation": 7113, "user_id": 653152, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HoFfR.jpg?s=128&g=1", "display_name": "Martin Ueding", "link": "https://stackoverflow.com/users/653152/martin-ueding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 42120158, "answer_count": 1, "score": 6, "last_activity_date": 1486576050, "creation_date": 1486575703, "question_id": 42120053, "link": "https://stackoverflow.com/questions/42120053/three-different-definitions-of-a-function-no-linker-error-how-can-that-be", "title": "Three different definitions of a function, no linker error; how can that be?", "body": "<p>I have something which looks very impossible to me. I have three files which each seem to contain the exact same function declaration, albeit with a different definition.</p>\n\n<p><code>inst_dp_vec2.cc</code>:</p>\n\n<pre><code>void loadSOAFVec(InstVector &amp;ivector,\n                 const FVec &amp;ret,\n                 const Address *a,\n                 int soanum,\n                 int soalen,\n                 string mask) {\n    if (soalen == 2) {\n        ivector.push_back(new LoadFVec(ret, a, string(\"\")));\n    } else {\n        printf(\"SOALEN = %d not supported at %s:%d\\n\", soalen, __FILE__,\n               __LINE__);\n        exit(1);\n    }\n}\n</code></pre>\n\n<p><code>inst_dp_vec4.cc</code></p>\n\n<pre><code>void loadSOAFVec(InstVector &amp;ivector,\n                 const FVec &amp;ret,\n                 const Address *a,\n                 int soanum,\n                 int soalen,\n                 string mask) {\n    if (soalen == 4) {\n        ivector.push_back(new LoadFVec(ret, a, string(\"\")));\n    } else if (soalen == 2) {\n        ivector.push_back(new LoadHalfFVec(ret, a, soanum));\n    } else {\n        UNSUPPORTED_SOALEN(soalen);\n    }\n}\n</code></pre>\n\n<p><code>inst_dp_vec8.cc</code></p>\n\n<pre><code>void loadSOAFVec(InstVector &amp;ivector,\n                 const FVec &amp;ret,\n                 const Address *a,\n                 int soanum,\n                 int soalen,\n                 string mask) {\n    int mskbits = (((1 &lt;&lt; soalen) - 1) &lt;&lt; (soanum * soalen));\n    stringstream mk;\n    mk &lt;&lt; \"0x\" &lt;&lt; hex &lt;&lt; mskbits;\n    string localmask = mk.str();\n    ivector.push_back(new LoadUnpackFVec(ret, a, localmask));\n}\n</code></pre>\n\n<p>The linker command as executed from the Makefile (generated by GNU Autotools)\nseems to include all three compiled files:</p>\n\n<pre><code>g++ -O3 -g -DNO_HW_MASKING -DUSE_LDUNPK -DUSE_PKST -DUSE_PACKED_GAUGES\n-DUSE_PACKED_CLOVER -DNO_GPREF_L1 -DNO_GPREF_L2 -DENABLE_STREAMING_STORES\n-DSERIAL_SPIN -DSOALEN=8 -DVECLEN=4 -DPRECISION=2 codegen.o data_types.o\ndslash.o dslash_common.o inst_dp_vec8.o inst_sp_vec16.o inst_dp_vec4.o\ninst_sp_vec8.o inst_sp_vec4.o inst_dp_vec2.o inst_scalar.o -o codegen\n</code></pre>\n\n<p>From my knowledge of the <em>one definition rule</em>, this should give a linker\nerror. Even more peculiar is that the version from <code>inst_dp_vec8.o</code> is not the\none used, but the one from <code>inst_dp_vec4.cc</code>, although it appears first in the\nlinker command line. I changed the code such that <code>UNSUPPORTED_SOALEN</code> throws\nan exception and with GDB I found that <code>soalen = 8</code> is active. From what I know\nabout the software, <code>soalen = 8</code> only works with <code>veclen \u2265 8</code> such that only\nthe <code>inst_dp_vec8.cc</code> could contain the right definition.</p>\n\n<p>My question: How can this possible link to a program that can be executed and\nonly fails because of the explicit exception raised with <code>UNSUPPORTED_SOALEN</code>?</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1486575080, "post_id": 42119799, "comment_id": 71407855, "body": "All this does is compare the strings for equality, and if they&#39;re not equal, output the larger one. Why that solves the problem is something for you to think about :-)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1486575165, "post_id": 42119799, "comment_id": 71407900, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 288, "user_id": 1698021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2ad2935474b6a8d0193b682a3300f729?s=128&d=identicon&r=PG", "display_name": "JustAnotherSoul", "link": "https://stackoverflow.com/users/1698021/justanothersoul"}, "edited": false, "score": 0, "creation_date": 1486575233, "post_id": 42119799, "comment_id": 71407934, "body": "The [foo]?[bar]:[baj] is ternary equivalent to: if([foo]) then output bar; else output baj;"}, {"owner": {"reputation": 7113, "user_id": 653152, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HoFfR.jpg?s=128&g=1", "display_name": "Martin Ueding", "link": "https://stackoverflow.com/users/653152/martin-ueding"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1486575319, "post_id": 42119799, "comment_id": 71407990, "body": "@AndyG: I don&#39;t think it actually solves the problem, see my answer."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 7113, "user_id": 653152, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HoFfR.jpg?s=128&g=1", "display_name": "Martin Ueding", "link": "https://stackoverflow.com/users/653152/martin-ueding"}, "edited": false, "score": 0, "creation_date": 1486667980, "post_id": 42119799, "comment_id": 71456361, "body": "@MartinUeding sure it does, I can&#39;t say I agree with your answer. Pete Beckers answer is perfect"}], "answers": [{"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1486575391, "post_id": 42119898, "comment_id": 71408047, "body": "<code>&quot;abcd&quot;</code> is a subsequence of itself, and it is not a subsequence of <code>&quot;abc&quot;</code>, so it is the longest &quot;uncommon subsequence&quot;."}, {"owner": {"reputation": 7113, "user_id": 653152, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HoFfR.jpg?s=128&g=1", "display_name": "Martin Ueding", "link": "https://stackoverflow.com/users/653152/martin-ueding"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1486575868, "post_id": 42119898, "comment_id": 71408340, "body": "I read the problem statement such that there is no order to it, but both inputs are on equal footing. So <code>abc</code> is a subsequence of <code>abcd</code>, and the longest uncommon subsequence is <code>d</code> therefore."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1486576052, "post_id": 42119898, "comment_id": 71408445, "body": "<code>&quot;d&quot;</code> is <b>an</b> &quot;uncommon subsequence&quot;, but it it not the only one. The question asks for the length of the <b>longest</b> one, and the longest one is <code>&quot;abcd&quot;</code>."}, {"owner": {"reputation": 7113, "user_id": 653152, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HoFfR.jpg?s=128&g=1", "display_name": "Martin Ueding", "link": "https://stackoverflow.com/users/653152/martin-ueding"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1486576734, "post_id": 42119898, "comment_id": 71408869, "body": "I think I see what you mean. So indeed, this question is about word play."}], "tags": [], "owner": {"reputation": 7113, "user_id": 653152, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HoFfR.jpg?s=128&g=1", "display_name": "Martin Ueding", "link": "https://stackoverflow.com/users/653152/martin-ueding"}, "is_accepted": false, "score": 0, "last_activity_date": 1486575240, "creation_date": 1486575240, "answer_id": 42119898, "question_id": 42119799, "link": "https://stackoverflow.com/questions/42119799/how-does-this-code-works-in-c/42119898#42119898", "title": "How does this code works in c++?", "body": "<p>It does not seem to solve the task at hand. It just outputs <code>-1</code> when the strings are equal and the length of the longer string when they are not different. However, the problem asks for the longest uncommon sequence. It would fail with the inputs <code>abc</code> and <code>abcd</code> to give the answer <code>1</code> would rather give <code>4</code>.</p>\n\n<p>What the line does is the following:</p>\n\n<ul>\n<li>It checks whether <code>a == b</code>, whether the strings are equal.</li>\n<li>If they are equal, the condition <code>A</code> is true in the <em>ternary operator</em> <code>A ? B : C</code>, so that expression will evaluate to <code>B</code> which is just <code>-1</code> here.</li>\n<li>If they are not equal, it will evaluate to <code>C</code> which is the maximum of the two string lengths, so it will be length of the longer string.</li>\n<li>The value of the ternary expression is then printed, albeit without a newline, which is a bit bad.</li>\n</ul>\n\n<p>So the code is so short because it only solves the problem for a few cases but not the general case.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 5276843, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1BFvTPc2wWI/AAAAAAAAAAI/AAAAAAAAAA8/USTneWIR1lc/photo.jpg?sz=128", "display_name": "Reinards Saulitis", "link": "https://stackoverflow.com/users/5276843/reinards-saulitis"}, "edited": false, "score": 0, "creation_date": 1486576464, "post_id": 42119919, "comment_id": 71408695, "body": "Well, but it is accepted :d"}, {"owner": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "reply_to_user": {"reputation": 47, "user_id": 5276843, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1BFvTPc2wWI/AAAAAAAAAAI/AAAAAAAAAA8/USTneWIR1lc/photo.jpg?sz=128", "display_name": "Reinards Saulitis", "link": "https://stackoverflow.com/users/5276843/reinards-saulitis"}, "edited": false, "score": 0, "creation_date": 1486576665, "post_id": 42119919, "comment_id": 71408823, "body": "That&#39;s too bad, I&#39;ve read the original assignment via your link, and the tiny code fragment certainly doesn&#39;t solve it. BTW you&#39;re speaking about 20 lines of code? But the fragment has only 8 lines."}, {"owner": {"reputation": 47, "user_id": 5276843, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1BFvTPc2wWI/AAAAAAAAAAI/AAAAAAAAAA8/USTneWIR1lc/photo.jpg?sz=128", "display_name": "Reinards Saulitis", "link": "https://stackoverflow.com/users/5276843/reinards-saulitis"}, "edited": false, "score": 0, "creation_date": 1486576823, "post_id": 42119919, "comment_id": 71408927, "body": "What would be the correct solution? By the way, don&#39;t judge me, I am not as advanced as you guys are :("}, {"owner": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "reply_to_user": {"reputation": 47, "user_id": 5276843, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1BFvTPc2wWI/AAAAAAAAAAI/AAAAAAAAAA8/USTneWIR1lc/photo.jpg?sz=128", "display_name": "Reinards Saulitis", "link": "https://stackoverflow.com/users/5276843/reinards-saulitis"}, "edited": false, "score": 0, "creation_date": 1486576860, "post_id": 42119919, "comment_id": 71408953, "body": "I certainly don&#39;t judge you! Seems you seriously tried. Could you show us your own code?"}, {"owner": {"reputation": 47, "user_id": 5276843, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1BFvTPc2wWI/AAAAAAAAAAI/AAAAAAAAAA8/USTneWIR1lc/photo.jpg?sz=128", "display_name": "Reinards Saulitis", "link": "https://stackoverflow.com/users/5276843/reinards-saulitis"}, "edited": false, "score": 0, "creation_date": 1486577042, "post_id": 42119919, "comment_id": 71409058, "body": "Okay, I can show it. But I am thinking now, that maybe I didn&#39;t understand the task correctly... <a href=\"http://pastebin.com/hMJyU5Ah\" rel=\"nofollow noreferrer\">pastebin.com/hMJyU5Ah</a>"}, {"owner": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "reply_to_user": {"reputation": 47, "user_id": 5276843, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1BFvTPc2wWI/AAAAAAAAAAI/AAAAAAAAAA8/USTneWIR1lc/photo.jpg?sz=128", "display_name": "Reinards Saulitis", "link": "https://stackoverflow.com/users/5276843/reinards-saulitis"}, "edited": false, "score": 0, "creation_date": 1486577145, "post_id": 42119919, "comment_id": 71409126, "body": "Hi Reinards, you did understand it correctly and I was wrong!! @Pete Becker has the right answer!!"}, {"owner": {"reputation": 47, "user_id": 5276843, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1BFvTPc2wWI/AAAAAAAAAAI/AAAAAAAAAA8/USTneWIR1lc/photo.jpg?sz=128", "display_name": "Reinards Saulitis", "link": "https://stackoverflow.com/users/5276843/reinards-saulitis"}, "edited": false, "score": 0, "creation_date": 1486577449, "post_id": 42119919, "comment_id": 71409301, "body": "Okay! At lest next time I will do better :)"}], "tags": [], "owner": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "is_accepted": false, "score": -1, "last_activity_date": 1486577180, "last_edit_date": 1486577180, "creation_date": 1486575301, "answer_id": 42119919, "question_id": 42119799, "link": "https://stackoverflow.com/questions/42119799/how-does-this-code-works-in-c/42119919#42119919", "title": "How does this code works in c++?", "body": "<pre><code>printf (\"%d\", a == b ? -1 : max (a.size (), b.size ()));\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>if (a == b) {\n    printf (\"%d\", -1);\n}\nelse {\n    if (a.size () &gt; b.size ()) {\n        printf (\"%d\", a.size ());\n    }\n    else {\n        printf (\"%d\", b.size());\n    }\n}\n</code></pre>\n\n<p>BTW That's only a small step in solving the problem...</p>\n\n<p>[CORRECTION]</p>\n\n<p>IT DOES SOLVE THE WHOLE PROBLEM (See answer of Pete Becker)</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 3, "last_activity_date": 1486575853, "creation_date": 1486575853, "answer_id": 42120105, "question_id": 42119799, "link": "https://stackoverflow.com/questions/42119799/how-does-this-code-works-in-c/42120105#42120105", "title": "How does this code works in c++?", "body": "<p>If the two strings are equal, there is no \"uncommon subsequence\". If they are not equal, neither one is a subsequence of the other, but each one is a subsequence of itself, so each one is an \"uncommon subsequence\". The longer of the two is the longest \"uncommon subsequence\", and its length is the correct answer. If the two are not equal but have the same length, then each one is an \"uncommon subsequence\" and the length of the longest is just the length of either one.</p>\n\n<p>Don't get tangled up in what you (or any other reasonable person) think a \"subsequence\" is. The problem defines \"uncommon subsequence\", and all you have to do is apply its definition. This \"problem\" is about word play, not coding.</p>\n"}], "owner": {"reputation": 47, "user_id": 5276843, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1BFvTPc2wWI/AAAAAAAAAAI/AAAAAAAAAA8/USTneWIR1lc/photo.jpg?sz=128", "display_name": "Reinards Saulitis", "link": "https://stackoverflow.com/users/5276843/reinards-saulitis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 1, "closed_date": 1486576764, "accepted_answer_id": 42120105, "answer_count": 3, "score": -7, "last_activity_date": 1486577180, "creation_date": 1486574910, "question_id": 42119799, "link": "https://stackoverflow.com/questions/42119799/how-does-this-code-works-in-c", "closed_reason": "Needs more focus", "title": "How does this code works in c++?", "body": "<p>I participated in Codeforces Round #396 (Div. 2) yesterday.\nThe (A) problem seemed pretty advanced in my opinion when I read it.\nI tried solving it all the competition time yesterday and some time today.\nI came up with a 200 lines long(half-working) solution. And then I gave up.</p>\n\n<p>I looked what other people wrote there and I saw max 20 lines long code that seems magic to me.</p>\n\n<p>The problem asks you to output the length of the longest uncommon subsequence of letters from two strings.\nYou can read the full problem here:\n<a href=\"http://codeforces.com/contest/766/problem/A\" rel=\"nofollow noreferrer\">http://codeforces.com/contest/766/problem/A</a></p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\nstring a,b;\nint main(){\n    cin&gt;&gt;a&gt;&gt;b;\n    printf(\"%d\",a==b?-1:max(a.size(),b.size()));\n    return 0;\n}\n</code></pre>\n\n<p>This is all the code used to solve the problem, and I really want to know how that one line of code</p>\n\n<pre><code>printf(\"%d\",a==b?-1:max(a.size(),b.size()));\n</code></pre>\n\n<p>can solve this \"advanced\" task?</p>\n"}, {"tags": ["c++", "git", "cmake"], "comments": [{"owner": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "edited": false, "score": 0, "creation_date": 1486576215, "post_id": 42119739, "comment_id": 71408535, "body": "Either include the other library (with <code>add_subdirectory()</code>) or via <code>ExternalProject_add()</code>. The error message should be straight forward to understand."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2721842"}, "reply_to_user": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "edited": false, "score": 0, "creation_date": 1486577349, "post_id": 42119739, "comment_id": 71409239, "body": "As you can see, I&#39;m already using <code>ExternalProject_add()</code> and it&#39;s not working as desired. <code>add_subdirectory()</code> alone won&#39;t clone the library from CVS."}], "answers": [{"tags": [], "owner": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "is_accepted": false, "score": 1, "last_activity_date": 1486588667, "creation_date": 1486588667, "answer_id": 42123781, "question_id": 42119739, "link": "https://stackoverflow.com/questions/42119739/cmake-rebuild-external-project/42123781#42123781", "title": "CMake: rebuild external project", "body": "<p>As your main goal for using <code>ExternalProject_Add</code> is to download the dependency from an external source without configuring and building it, you could define the <code>CMAKE_COMMAND</code>, <code>CONFIGURE_COMMAND</code> and <code>BUILD_COMMAND</code> as empty strings. Same as you already did for the <code>UPDATE_COMMAND</code> and <code>INSTALL_COMMAND</code>. That way, <code>ExternalProject_Add</code> will only clone the repository once.</p>\n\n<p>To overcome the name clash, just use a different one for the first argument of <code>ExternalProject_Add</code>, e.g. <code>library_src</code>:</p>\n\n<pre><code>ExternalProject_Add(library_src\n    PREFIX ${my-project_SOURCE_DIR}/lib/library\n    GIT_REPOSITORY https://github.com/vendor/library\n    GIT_TAG master\n    UPDATE_COMMAND \"\"\n    CONFIGURE_COMMAND \"\"\n    CMAKE_COMMAND \"\"\n    BUILD_COMMAND \"\"\n    INSTALL_COMMAND \"\"\n)\nExternalProject_Get_Property(library_src SOURCE_DIR)\nadd_subdirectory(${SOURCE_DIR})\n</code></pre>\n\n<p>The second command (<code>ExternalProject_Get_Property</code>) will give you the named properties for the given external project. The output variables are of the same name as the properties. That way, you are immune against changes in the behaviour of <code>ExternalProject_Add</code> where it places the actual source tree.</p>\n"}, {"tags": [], "owner": {"reputation": 361, "user_id": 8841322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tfP3b.jpg?s=128&g=1", "display_name": "Jagger Yu", "link": "https://stackoverflow.com/users/8841322/jagger-yu"}, "is_accepted": false, "score": 0, "last_activity_date": 1549971336, "creation_date": 1549971336, "answer_id": 54649253, "question_id": 42119739, "link": "https://stackoverflow.com/questions/42119739/cmake-rebuild-external-project/54649253#54649253", "title": "CMake: rebuild external project", "body": "<p>add this command in ExternalProject_Add maybe help you:\nUPDATE_COMMAND \"\"</p>\n\n<p><a href=\"https://gitlab.kitware.com/cmake/cmake/issues/16419\" rel=\"nofollow noreferrer\">https://gitlab.kitware.com/cmake/cmake/issues/16419</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2721842"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2177, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1549971336, "creation_date": 1486574696, "last_edit_date": 1486577662, "question_id": 42119739, "link": "https://stackoverflow.com/questions/42119739/cmake-rebuild-external-project", "title": "CMake: rebuild external project", "body": "<p>I have a project that uses an external library. The project's CMakeLists.txt looks like this:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.6.0)\n\nproject(my-project)\n\nset(CMAKE_CXX_STANDARD 14)\n\ninclude(ExternalProject)\nfind_package(Git REQUIRED)\n\nExternalProject_Add(library\n        PREFIX ${my-project_SOURCE_DIR}/lib/library\n        GIT_REPOSITORY https://github.com/vendor/library\n        GIT_TAG master\n        UPDATE_COMMAND \"\"\n        INSTALL_COMMAND \"\"\n        )\n\nlink_directories(${my-project_SOURCE_DIR}/lib/library/src/library-build/src)\n\nadd_subdirectory(src)\n</code></pre>\n\n<p>And src/CMakeLists.txt like this:</p>\n\n<pre><code>include_directories(../lib/library/src/library/include)\n\nadd_executable(my-project\n        main.cpp\n        )\n\nadd_dependencies(my-project library)\n\ntarget_link_libraries(my-project liblibrary.a)\n</code></pre>\n\n<p>It pulls the library from Git and builds it for the first time without any problems.</p>\n\n<p><strong>I want to edit source code of the library and have the library .a file be recompiled automatically. What is the cleanest way I can achieve that?</strong> It currently ignores any updates to the source code, because it already has .a file of the library.</p>\n\n<p>When I try to add</p>\n\n<pre><code>add_subdirectory(lib/library/src/library/src)\n</code></pre>\n\n<p>to my main CMakeLists.txt, I get the following error:</p>\n\n<p>CMake Error at lib/library/src/library/src/CMakeLists.txt:55 (add_library): add_library cannot create target \"library\" because another target with the same name already exists.  The existing target is a custom target created in source directory \"/cygdrive/c/Code/my-project\".  See documentation for policy CMP0002 for more details.</p>\n\n<p>I guess it's caused by calling </p>\n\n<pre><code>add_library(gram STATIC ${SOURCE_FILES})\n</code></pre>\n\n<p>in the library CMakeLists.txt and then calling </p>\n\n<pre><code>ExternalProject_Add(library ...)\n</code></pre>\n\n<p>in the project CMakeLists.txt.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["java", "c++"], "comments": [{"owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "edited": false, "score": 7, "creation_date": 1486574790, "post_id": 42119709, "comment_id": 71407697, "body": "<code>new</code> is both: for grammatical analysis it is a keyword, for constructing memory images of objects it is an operator."}, {"owner": {"reputation": 1362, "user_id": 2521287, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Gej8E.jpg?s=128&g=1", "display_name": "DrZoo", "link": "https://stackoverflow.com/users/2521287/drzoo"}, "edited": false, "score": 0, "creation_date": 1486574923, "post_id": 42119709, "comment_id": 71407771, "body": "Possible duplicate: <a href=\"http://stackoverflow.com/questions/17014747/diffrence-between-new-operator-in-c-and-new-operator-in-java\" title=\"diffrence between new operator in c and new operator in java\">stackoverflow.com/questions/17014747/&hellip;</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1486575268, "post_id": 42119709, "comment_id": 71407957, "body": "operators in c++ <i>are</i> keywords."}, {"owner": {"reputation": 4152, "user_id": 967501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7fQPN.jpg?s=128&g=1", "display_name": "P&#233;tur Ingi Egilsson", "link": "https://stackoverflow.com/users/967501/p%c3%a9tur-ingi-egilsson"}, "edited": false, "score": 0, "creation_date": 1486575400, "post_id": 42119709, "comment_id": 71408054, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1885849/difference-between-new-operator-and-operator-new\">Difference between &#39;new operator&#39; and &#39;operator new&#39;?</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6685522"}, "reply_to_user": {"reputation": 4152, "user_id": 967501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7fQPN.jpg?s=128&g=1", "display_name": "P&#233;tur Ingi Egilsson", "link": "https://stackoverflow.com/users/967501/p%c3%a9tur-ingi-egilsson"}, "edited": false, "score": 0, "creation_date": 1486575641, "post_id": 42119709, "comment_id": 71408197, "body": "@P&#233;turIngiEgilsson this is not duplicate at all."}], "answers": [{"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486575391, "post_id": 42119885, "comment_id": 71408048, "body": "It&#39;s &#167;2.11/1. &#167;2.12/1 lists <code>new</code> as an operator."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1486575631, "post_id": 42119885, "comment_id": 71408190, "body": "But C++ also allows symbol based operators to be overloaded. So the difference is a symbol based operator versus a name based operator."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486575732, "post_id": 42119885, "comment_id": 71408264, "body": "@ChristianHackl, <code>new</code> is confusing in that it&#39;s an overloadable operator as well as part of the language. To see what I mean, check out <a href=\"http://en.cppreference.com/w/cpp/memory/new/operator_new\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/new/operator_new</a> vs. <a href=\"http://en.cppreference.com/w/cpp/language/new\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/new</a>"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1486576085, "post_id": 42119885, "comment_id": 71408462, "body": "@chris: Yet, I just mentioned the correct sources. At least in the N4296 draft. Did the numbers change?"}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486576093, "post_id": 42119885, "comment_id": 71408466, "body": "@Christian Hackl added a reference to the standard document I was referencing."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486576334, "post_id": 42119885, "comment_id": 71408610, "body": "@MarkB: That draft is from 2012. The paragraph numbers did indeed change. [lex.key] is now &#167;2.11, and [lex.operators] &#167;2.12."}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 9, "last_activity_date": 1486576041, "last_edit_date": 1486576041, "creation_date": 1486575207, "answer_id": 42119885, "question_id": 42119709, "link": "https://stackoverflow.com/questions/42119709/why-new-is-an-operator-in-c/42119885#42119885", "title": "Why new is an operator in C++", "body": "<p><code>new</code> is a keyword in C++ (see the table in C++11 N3337 2.12/1). It then uses <code>operator new</code> as its implementation, a side effect of which allows programmers to create their own overloaded <code>operator new</code> to inject custom memory management.</p>\n"}, {"tags": [], "owner": {"reputation": 383, "user_id": 5872281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/00Rs0.jpg?s=128&g=1", "display_name": "Adilson Cabral", "link": "https://stackoverflow.com/users/5872281/adilson-cabral"}, "is_accepted": false, "score": 1, "last_activity_date": 1486575831, "last_edit_date": 1486575831, "creation_date": 1486575466, "answer_id": 42119974, "question_id": 42119709, "link": "https://stackoverflow.com/questions/42119709/why-new-is-an-operator-in-c/42119974#42119974", "title": "Why new is an operator in C++", "body": "<p>In my understanding <strong>keywords are reserved word</strong> of the language, while operators are \"implemented language functions\".</p>\n\n<p>It happens that <strong>some keywords are also operators</strong>.</p>\n\n<p><code>instanceof</code> is another example of keyword that is also an operator.</p>\n\n<p>Other example are the arithmetic operators, <code>+</code> <code>-</code> <code>*</code> <code>%</code> <strong>are operators too but not keywords</strong>.</p>\n\n<p>I believe it applies to most languages, Java, C++ and others.</p>\n"}, {"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 5, "last_activity_date": 1486575512, "creation_date": 1486575512, "answer_id": 42119990, "question_id": 42119709, "link": "https://stackoverflow.com/questions/42119709/why-new-is-an-operator-in-c/42119990#42119990", "title": "Why new is an operator in C++", "body": "<p>Keywords are grammatical constructs. They are specific sequences of characters that the parser inherently recognizes, which cannot be used as identifiers. <code>if</code> is a keyword. So is <code>new</code>, even in C++.</p>\n\n<p>The term \"operator\" is used to identify things which are used as parts of expressions. <code>+</code> is an operator; it is acts on two expressions and creates a value from them. <code>new</code> is <em>also</em> an operator; it takes parameters and a typename+constructor parameters, and performs various operations on them, resulting in the creation of a new object of that type.</p>\n\n<p>But <code>if</code> is not an operator. Oh sure, an <code>if</code> statement involves expressions, but <code>if</code> itself is not part of an expression.</p>\n"}, {"comments": [{"owner": {"reputation": 61591, "user_id": 183406, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ca03242df77ec2d8f70f2cea0d6209be?s=128&d=identicon&r=PG", "display_name": "meriton", "link": "https://stackoverflow.com/users/183406/meriton"}, "edited": false, "score": 0, "creation_date": 1486760369, "post_id": 42120021, "comment_id": 71502075, "body": "If Java considers <code>new</code> an operator, why is it absent from the <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.12\" rel=\"nofollow noreferrer\">table of operators</a>?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 61591, "user_id": 183406, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ca03242df77ec2d8f70f2cea0d6209be?s=128&d=identicon&r=PG", "display_name": "meriton", "link": "https://stackoverflow.com/users/183406/meriton"}, "edited": false, "score": 0, "creation_date": 1486760693, "post_id": 42120021, "comment_id": 71502247, "body": "@meriton Oracle, for whatever reason, seems to have a narrower definition of the word &#39;operator&#39; than C++, and thus excludes it. This is one of those &quot;a tomato is not a vegetable&quot; arguments, where in a strictly technical sense, no, <code>new</code> is not an operator as defined by the Java programming language, but if you go around saying &quot;<code>new</code> is not an operator&quot;, you&#39;re actually spreading more noise than signal. For all <i>practical</i> purposes, <code>new</code> is an operator, and my advice to Oracle is they consider revising that section."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 3, "last_activity_date": 1486575612, "creation_date": 1486575612, "answer_id": 42120021, "question_id": 42119709, "link": "https://stackoverflow.com/questions/42119709/why-new-is-an-operator-in-c/42120021#42120021", "title": "Why new is an operator in C++", "body": "<p>Your specific example is a bit misleading. <code>new</code> is both a keyword and an operator, in both C++ and Java. These terms also aren't strictly defined: they're contextually defined.</p>\n\n<p><code>keyword</code>s are any tokens that appear in a program that are defined by the compiler (though custom keywords can be set by the user by tweaking the compiler, if the compiler allows it). Something like <code>typedef</code> in C/C++ is a keyword, and depending on the language, fundamental types can be treated as keywords as well.  The usual signifier of a keyword is that the compiler won't let you name variables or functions after them (though there are exceptions and caveats to that rule).</p>\n\n<p><code>operator</code>s are any action performed on your data or objects in code. The most basic are the arithmetic operators associated with the fundamental data types, like <code>+ - * / % = == || &amp;&amp;</code> and so on. <code>new</code> (and, in C++, <code>delete</code>) are also operators, because they perform specific tasks on the objects they target (specifically, they allocate and delete heap memory). The <code>.</code> (dot) is an operator, and there's even been a few proposals in C++ to allow the user to overload the dot-operator!</p>\n\n<p>A lot of this is a distinction without difference though. It's way more useful to know what <code>new</code> and <code>new[]</code> do than to know whether they are strictly classified as operators or not (though to be clear, they are), or whether all operators are keywords or not (I think they are, but I'm not sure) or whether all keywords are operators (I don't believe they are). If you find a case study where those distinctions matter, I'd love to know of them.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6685522"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1486576041, "creation_date": 1486574591, "question_id": 42119709, "link": "https://stackoverflow.com/questions/42119709/why-new-is-an-operator-in-c", "title": "Why new is an operator in C++", "body": "<p>I am just confused between <code>operator</code> vs <code>keywords</code>. I know this doesn't matter for programming, but I want to know the difference.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html\" rel=\"nofollow noreferrer\">In Java</a> <code>new</code> is called as keyword. But <a href=\"http://www.cplusplus.com/doc/tutorial/operators/\" rel=\"nofollow noreferrer\">in c++</a> <code>new</code> is called as an operator, Why?</p>\n"}, {"tags": ["c++", "visual-studio-2012"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1486574788, "post_id": 42119710, "comment_id": 71407692, "body": "Even if this is valid C++, this is not really a good idea..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1486574845, "post_id": 42119710, "comment_id": 71407726, "body": "<code>std::tuple</code> is available in the c++11 standard. VS2012 doesn&#39;t support that."}, {"owner": {"reputation": 1545, "user_id": 3657206, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76ec2024a0cee7d1bcf3a3980f54568e?s=128&d=identicon&r=PG&f=1", "display_name": "LThode", "link": "https://stackoverflow.com/users/3657206/lthode"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1486574875, "post_id": 42119710, "comment_id": 71407746, "body": "@SamVarshavchik -- if nothing depends on the value of our placeholder <code>n</code>, why is having it be uninitialized be bad?  Or is there a different problem you&#39;re pointing out? (I&#39;d rather do something better, but not having much of C++11 in my toolkit means that I&#39;m pretty constrained...)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1486574876, "post_id": 42119710, "comment_id": 71407748, "body": "This test case can be shortened to just <code>int i(i);</code>. That&#39;s the part that VC++ is not accepting. Your <code>struct T</code> and your tuple are not relevant for this problem."}, {"owner": {"reputation": 1545, "user_id": 3657206, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76ec2024a0cee7d1bcf3a3980f54568e?s=128&d=identicon&r=PG&f=1", "display_name": "LThode", "link": "https://stackoverflow.com/users/3657206/lthode"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1486574975, "post_id": 42119710, "comment_id": 71407801, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 VS2012 <i>does</i> support most of the <i>library</i> features in C++11 (see <a href=\"https://msdn.microsoft.com/en-us/library/hh567368.aspx\" rel=\"nofollow noreferrer\">this MSDN link</a> for details)"}, {"owner": {"reputation": 1545, "user_id": 3657206, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76ec2024a0cee7d1bcf3a3980f54568e?s=128&d=identicon&r=PG&f=1", "display_name": "LThode", "link": "https://stackoverflow.com/users/3657206/lthode"}, "edited": false, "score": 0, "creation_date": 1486575048, "post_id": 42119710, "comment_id": 71407844, "body": "@hvd -- they are relevant to making the history of the problem clear though -- would you rather I showed both the code that originally prompted this <i>and</i> the fully minimized testcase?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1486575064, "post_id": 42119710, "comment_id": 71407849, "body": "<i>@LThode</i> I think @hvd got it right, the new syntax isnt supported."}, {"owner": {"reputation": 1545, "user_id": 3657206, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76ec2024a0cee7d1bcf3a3980f54568e?s=128&d=identicon&r=PG&f=1", "display_name": "LThode", "link": "https://stackoverflow.com/users/3657206/lthode"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1486575265, "post_id": 42119710, "comment_id": 71407956, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 -- ...what new syntax?"}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1486576446, "post_id": 42119710, "comment_id": 71408688, "body": "It&#39;s valid by the standard as hvd shows below, yet it&#39;s clearly a very bad thing to do, and should be considered a bug in the standard. Just be happy MSVC caught it for you and wonder why CLang and GCC didn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1486575802, "post_id": 42119940, "comment_id": 71408304, "body": "Hmm, <code>struct x; int x(x);</code> Function or variable?"}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1486576200, "post_id": 42119940, "comment_id": 71408524, "body": "This is obviously an insane thing to allow: <i>the second <code>x </code>is initialized with its own (indeterminate) value</i>. So it&#39;s a bug in the standard, which the compiler rightly corrects."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1486577148, "post_id": 42119940, "comment_id": 71409130, "body": "@T.C. Same as the most vexing parse: if it can be a function, it&#39;s a function. But I don&#39;t understand the wording of [dcl.ambig.res]: &quot;the resolution is to consider any construct that could possibly be a declaration a declaration&quot; I do not see how that covers the examples that immediately follow, or the one you gave, where a function declaration is favoured over a variable declaration."}, {"owner": {"reputation": 1545, "user_id": 3657206, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76ec2024a0cee7d1bcf3a3980f54568e?s=128&d=identicon&r=PG&f=1", "display_name": "LThode", "link": "https://stackoverflow.com/users/3657206/lthode"}, "reply_to_user": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1486577400, "post_id": 42119940, "comment_id": 71409275, "body": "@Ben -- since you&#39;re so adamant that this is a bug in the standard -- then how would you create a <a href=\"http://stackoverflow.com/questions/19586323/how-to-encode-large-complex-constant-data-structures-in-c\">self-referential data type intended for compile-time initialization?</a>"}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "reply_to_user": {"reputation": 1545, "user_id": 3657206, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76ec2024a0cee7d1bcf3a3980f54568e?s=128&d=identicon&r=PG&f=1", "display_name": "LThode", "link": "https://stackoverflow.com/users/3657206/lthode"}, "edited": false, "score": 0, "creation_date": 1486578343, "post_id": 42119940, "comment_id": 71409817, "body": "@LThode I am not saying that the definition of the point of declaration is a bug. There is nothing that requires one to initialise a value with the value of an uninitialized variable (as opposed to the address of an uninitialized value which may be initialised later.) Allowing that is a bug, and using it as an example of the point of declaration is insane."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1486578710, "post_id": 42119940, "comment_id": 71410041, "body": "This seems like of those times where a compiler bug is useful as if flags something the coder almost certainly did not intend. And isn&#39;t reading uninitialized data always UB."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1486580227, "post_id": 42119940, "comment_id": 71410880, "body": "@doug: Only if a trap representation occurs. <code>unsigned char</code> is the only data type for which this is not possible. Not that the difference matters much in practice."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1486582596, "post_id": 42119940, "comment_id": 71412196, "body": "@ChristianHackl C++ doesn&#39;t have trap representations, that&#39;s a C thing. In C++, an uninitialised object has an indeterminate value, and reading an indeterminate value has undefined behaviour, even for types that cannot have what C would call trap representations. There&#39;s a special exception for <code>unsigned char</code>, but even then it only applies in a few limited cases (including the one in this answer). See [dcl.init]p12."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": true, "score": 4, "last_activity_date": 1486575364, "last_edit_date": 1592644375, "creation_date": 1486575364, "answer_id": 42119940, "question_id": 42119710, "link": "https://stackoverflow.com/questions/42119710/vs2012-doesnt-compile-this-code-but-g-clang-and-icc-all-accept-it-without/42119940#42119940", "title": "VS2012 doesn&#39;t compile this code, but G++, clang, and ICC all accept it without a diagnostic", "body": "<p>Shortening this to a simple</p>\n<pre><code>unsigned char x(x);\n</code></pre>\n<p>and testing this online on <a href=\"http://webcompiler.cloudapp.net/\" rel=\"nofollow noreferrer\">http://webcompiler.cloudapp.net/</a> shows that current versions of Microsoft's compiler still reject it.</p>\n<p>This is a compiler bug. Quoting the standard (N4140, roughly C++14, but the rule is the same in earlier standards):</p>\n<blockquote>\n<p><strong>3.3.2 Point of declaration [basic.scope.pdecl]</strong></p>\n<p>1 The <em>point of declaration</em> for a name is immediately after its complete declarator (Clause 8) and before its <em>initializer</em> (if any), except as noted below. [<em>Example:</em></p>\n<pre><code>unsigned char x = 12;\n{ unsigned char x = x; }\n</code></pre>\n<p>Here the second <code>x</code> is initialized with its own (indeterminate) value. -- <em>end example</em> ]</p>\n</blockquote>\n<p>Both <code>= x;</code> and <code>(x);</code> are grammatically an <em>initializer</em>, and there is no exception anywhere that says that in the <code>(x);</code> syntax, the variable <code>x</code> would somehow not yet be in scope.</p>\n<p>Visual Studio's compiler does accept it with the <code>= x;</code> syntax.</p>\n<p>But as it only affects code where a variable is used in its own initialisation, a better re-working of the code would simply avoid the problem entirely.</p>\n"}], "owner": {"reputation": 1545, "user_id": 3657206, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76ec2024a0cee7d1bcf3a3980f54568e?s=128&d=identicon&r=PG&f=1", "display_name": "LThode", "link": "https://stackoverflow.com/users/3657206/lthode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 42119940, "answer_count": 1, "score": 1, "last_activity_date": 1486575364, "creation_date": 1486574590, "last_edit_date": 1495540407, "question_id": 42119710, "link": "https://stackoverflow.com/questions/42119710/vs2012-doesnt-compile-this-code-but-g-clang-and-icc-all-accept-it-without", "title": "VS2012 doesn&#39;t compile this code, but G++, clang, and ICC all accept it without a diagnostic", "body": "<p>Based on <a href=\"https://stackoverflow.com/a/19596632/3657206\">this answer</a>, I came up with <a href=\"https://godbolt.org/g/6DrQUN\" rel=\"nofollow noreferrer\">this code</a> for a constant tree structure in C++:</p>\n\n<pre><code>#include &lt;tuple&gt;\nstruct T\n{\n    T(const char* n, const T&amp; n1, const T&amp; n2, const T&amp; n3, const T&amp; n4):\n        name(n), nodes(n1, n2, n3, n4) {}\n\n    const char* name;\n    std::tuple&lt;const T&amp;, const T&amp;, const T&amp;, const T&amp;&gt; nodes;\n};\n\nT n(0, n, n, n, n);\n</code></pre>\n\n<p>GCC (both 4.5.3 and recent versions), ICC (17), and CLang (3.5 and recent versions) all compile this code (CLang 3.5 issues a <code>-Wuninitialized</code> warning for it, but that's OK as <code>n</code> is a placeholder whose value is irrelevant).</p>\n\n<p>Yet, MSVC 11 (VS2012) pukes a C2065 error on the definition of <code>n</code>:</p>\n\n<blockquote>\n  <p>test6.cpp(12) : error C2065: 'n' : undeclared identifier</p>\n</blockquote>\n\n<p>What gives?  Is MSVC rejecting valid code? Am I off in UB-land with demons flying out of my nose?  If this is not valid, can someone please tell me what in the Standard makes it invalid and/or why GCC, Clang, and ICC all accept it?</p>\n"}, {"tags": ["c++", "r", "rcpp", "calling-convention"], "comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 2, "creation_date": 1486575226, "post_id": 42119609, "comment_id": 71407927, "body": "That is a basic bug in your code.  If you use Rcpp, you <i>never</i> need to <code>PROTECT</code> and <code>UNPROTECT</code>.  And as the questions stands, nobody can help you as there is <i>nothing</i> reproducible here."}, {"owner": {"reputation": 639, "user_id": 7367243, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/722654471167375/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/7367243/david"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1486585778, "post_id": 42119609, "comment_id": 71414048, "body": "Dirk, you&#39;re right, I googled and this problem is hard to solve as it&#39;s hard to reproduce. Could you tell me what &quot;basic bug&quot; you think it might be or locate? Thank you."}, {"owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "edited": false, "score": 2, "creation_date": 1486587920, "post_id": 42119609, "comment_id": 71415256, "body": "You need to provide more detail, i.e. how was <code>p_in</code> created in the first place? How is the <code>emcdf</code> class defined? Additionally, there should be no reason to pass <code>p_in</code> as a <code>SEXP</code> and construct a local <code>Rcpp::XPtr&lt;emcdf&gt;</code>, you can just pass <code>p_in</code> as a <code>Rcpp::XPtr&lt;emcdf&gt;</code> and operate on it directly."}, {"owner": {"reputation": 639, "user_id": 7367243, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/722654471167375/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/7367243/david"}, "edited": false, "score": 0, "creation_date": 1486987475, "post_id": 42119609, "comment_id": 71568427, "body": "I tried passing  Rcpp::XPtr&lt;emcdf&gt; as parameter and it led to error: &quot;emcdf was not declared in this scope&quot; when building package. Then I followed an example (sorry I can&#39;t find it now) and got my current code."}, {"owner": {"reputation": 639, "user_id": 7367243, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/722654471167375/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/7367243/david"}, "edited": false, "score": 0, "creation_date": 1486988876, "post_id": 42119609, "comment_id": 71569303, "body": "I never use PROTECT and UNPROTECT in my code."}], "answers": [{"comments": [{"owner": {"reputation": 639, "user_id": 7367243, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/722654471167375/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/7367243/david"}, "edited": false, "score": 0, "creation_date": 1486989156, "post_id": 42123593, "comment_id": 71569497, "body": "Thank you. I never use PROTECT or UNPROTECT in my code. I posted more code below. I found that when I called compute() over 1000 times, the stack imbalance error shows."}], "tags": [], "owner": {"reputation": 17753, "user_id": 1342082, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1ef12d2cf78f28d7a1e76c8fc60978c8?s=128&d=identicon&r=PG", "display_name": "Kevin Ushey", "link": "https://stackoverflow.com/users/1342082/kevin-ushey"}, "is_accepted": false, "score": 5, "last_activity_date": 1486587958, "creation_date": 1486587958, "answer_id": 42123593, "question_id": 42119609, "link": "https://stackoverflow.com/questions/42119609/how-to-handle-mismatching-in-calling-convention-in-r-and-c-using-rcpp/42123593#42123593", "title": "How to handle mismatching in calling convention in R and C++ using Rcpp?", "body": "<p>I think you unfortunately are on the wrong track with your initial diagnosis.</p>\n\n<p>When R reports a stack imbalance, it means the internal protection stack (which is used to protect R objects on the stack from the garbage collector) is unbalanced, indicating that something got out of sync in some C / C++ routine somewhere. This is unrelated to calling conventions.</p>\n\n<p>Rcpp generally manages protection of its objects outside of the protection stack; it explicitly uses the <code>R_PreserveObject()</code> and <code>R_ReleaseObject()</code> APIs, which are not stack-based.</p>\n\n<p>Without a reproducible example it's hard to say more, but the most likely cause is you have mismatched calls to <code>PROTECT()</code> / <code>UNPROTECT()</code> in separate code that you haven't yet shown.</p>\n"}], "owner": {"reputation": 639, "user_id": 7367243, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/722654471167375/picture?type=large", "display_name": "David", "link": "https://stackoverflow.com/users/7367243/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "closed_date": 1487666640, "answer_count": 1, "score": 0, "last_activity_date": 1487104588, "creation_date": 1486574300, "last_edit_date": 1592644375, "question_id": 42119609, "link": "https://stackoverflow.com/questions/42119609/how-to-handle-mismatching-in-calling-convention-in-r-and-c-using-rcpp", "closed_reason": "Not suitable for this site", "title": "How to handle mismatching in calling convention in R and C++ using Rcpp?", "body": "<p>I am developing an R package with C++ functions. I use Rcpp. Everything was fine when writing and testing. However, when I finished and ran it in a loop, I occasionally got the following warnings and errors:\n<img src=\"https://i.stack.imgur.com/qAQr6.png\" alt=\"Warnings and Errors\" /></p>\n<blockquote>\n<p>Warning: stack imbalance in '.Call', 78 then 77</p>\n<p>Warning: stack imbalance in '{', 75 then 74</p>\n<p>Warning: stack imbalance in '.Call', 78 then 79</p>\n<p>Warning: stack imbalance in '{', 75 then 76</p>\n<p>Warning: stack imbalance in '.Call', 78 then 77</p>\n<p>Warning: stack imbalance in '{', 75 then 74</p>\n</blockquote>\n<p>So I googled stack imbalance and I found:</p>\n<p><a href=\"https://stackoverflow.com/questions/6779530/what-is-a-stack-imbalance\">What is a stack imbalance?</a></p>\n<p>This article states stack imbalance is usually caused by differences (mismatching) in calling convention among languages. As far as I know, callng convention is an agreement on whether the caller function to delete local variables or the callee functions to delete.</p>\n<p>And I found this:</p>\n<p><a href=\"http://www.stats.uwo.ca/faculty/murdoch/software/compilingDLLs/\" rel=\"nofollow noreferrer\">http://www.stats.uwo.ca/faculty/murdoch/software/compilingDLLs/</a></p>\n<p>It says R is using <code>cdecl</code> while C++ uses <code>stdcall</code>.</p>\n<blockquote>\n<p>&quot;If your function uses <code>stdcall</code> instead of <code>cdecl</code>, there will likely be a crash when you return, because your parameters will be removed from the stack after they're already gone.&quot;</p>\n</blockquote>\n<p>Please let me know if I made any mistakes in the statement.</p>\n<p>This is the C++ function being called by my R code:</p>\n<pre><code>//[[Rcpp::export]]\nint compute(SEXP p_in, Rcpp::NumericVector a) {\n    Rcpp::XPtr&lt;emcdf&gt; p(p_in);\n    p-&gt;cdf(a);\n    return p-&gt;getResult();\n}\n//p_in is an external pointer(pointer to an emcdf object in C++)\n</code></pre>\n<p>So, my question is, how do I fix this?</p>\n<p>I appreciate your help.</p>\n<h1>More details and code   2.14.2017</h1>\n<p>Thank you guys for answering. Here's more code:</p>\n<pre><code>//declaration of class &quot;emcdf&quot;\nclass emcdf{\npublic:\n  explicit emcdf(Rcpp::NumericMatrix&amp; x, int n);\n  ~emcdf();\n  void cdf(Rcpp::NumericVector&amp; a);\n  int getResult();\nprivate:\n  int num;\n  int k;\n  std::thread* t;\n  std::vector&lt;Rcpp::NumericMatrix*&gt; data;\n  int size;\n  int* result;\n  void (*ptr) (Rcpp::NumericMatrix*, Rcpp::NumericVector, int*);\n  void find_func();\n};\n\n  //definition of class &quot;emcdf&quot;\n  emcdf::emcdf(Rcpp::NumericMatrix&amp; x, int n){\n    //initialize members\n    t = new std::thread[n];\n    num = n;\n    k = x.ncol();\n    size = x.nrow()/num;\n    result = new int[num];\n    find_func();\n\n    int i = 0;\n    for(; i&lt;num - 1; ++i)\n      data.push_back(copy(x, i*size, size));\n\n    data.push_back(copy(x, i*size, x.nrow() - i*size));\n\n  }\n\n  emcdf::~emcdf(){\n    delete[] t;\n    for(int i=0; i&lt;num; ++i)\n      delete data[i];\n    delete[] result;\n  }\n\n  void emcdf::cdf(Rcpp::NumericVector&amp; a){\n    for(int i=0; i&lt;num; ++i){\n      t[i] = std::thread(*ptr, data[i], a, result + i);\n    }\n    for(int i=0; i&lt;num; ++i)\n      t[i].join();\n  }\n\n  int emcdf::getResult(){\n    int sum = 0;\n    for(int i=0; i&lt;num; ++i)\n      sum += result[i];\n    return sum;\n  }\n\n//other functions\nRcpp::NumericMatrix* copy(Rcpp::NumericMatrix&amp; x, int row, int nrow){\n\n  NumericMatrix* out = new NumericMatrix(nrow, x.ncol());\n  int firstRow = 0;\n  while(firstRow &lt; nrow){\n    for(int j=0; j&lt;x.ncol(); ++j){\n      out-&gt;at(firstRow,j) = x.at(firstRow + row,j);\n    }\n    ++firstRow;\n  }\n  return out;\n}\n\n//makes &quot;emcdf&quot; pointer \n//[[Rcpp::export]]\nRcppExport SEXP build(SEXP x_in, int num){\n\n  Rcpp::NumericMatrix x(x_in);\n  emcdf* em = new emcdf(x, num);\n  Rcpp::XPtr&lt;emcdf&gt; p(em, true);\n  return p;\n}\n\n//take pointer of &quot;emcdf&quot; from build() and compute cdf results\n//[[Rcpp::export]]\nint compute(SEXP&amp; p_in, Rcpp::NumericVector&amp; a){\n  Rcpp::XPtr&lt;emcdf&gt; p(p_in);\n  p-&gt;cdf(a);\n  return p-&gt;getResult();\n}\n</code></pre>\n<p>The parameter SEXP&amp; p_in in compute() is passed from the return of build(). In my R code, I called compute() and got the stack imbalance error. It doesn't appear every time, but when called over 1000 times continuously, it's likely to go wrong.</p>\n<p>Kevin Ushey suggested:<br />\n&quot;It looks like the issue here is simply that you're attempting to use R / Rcpp within a separate thread, and that unfortunately won't work (as you can end up triggering the garbage collector from a separate thread).&quot;</p>\n<p>Does that mean if I avoid using Rcpp functions/ objects in separate threads, for example, don't use NumericMatrix in <code>*ptr</code> which my threads run, this error will be fixed?</p>\n<p>Thank you.</p>\n"}, {"tags": ["c++", "gcc", "reference", "pointer-to-member", "template-argument-deduction"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1486573982, "post_id": 42119458, "comment_id": 71407254, "body": "References are not objects as far as the standard is concerned, therefore you cannot do things like getting their address or memory representation. I think it is just not possible."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1486574068, "post_id": 42119458, "comment_id": 71407313, "body": "@Dan That gives you a pointer to the object that <code>rr</code> references, not to <code>rr</code> itself which I believe was the goal."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 3, "creation_date": 1486574303, "post_id": 42119458, "comment_id": 71407438, "body": "@Dan <code>&amp;AA::rr</code> wouldn&#39;t be nonsense if <code>rr</code> was an <code>int</code> or <code>int*</code>. You <a href=\"http://stackoverflow.com/q/670734/3425536\">can</a> have pointers to member variables."}, {"owner": {"reputation": 4160, "user_id": 371239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/decd51f67e3f34f4d6c526fed9b4a2dd?s=128&d=identicon&r=PG", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/371239/vahagn"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486626426, "post_id": 42119458, "comment_id": 71428768, "body": "@M.M actually it doesn&#39;t as it just forbids <code>&amp;AA::rr</code> when <code>rr</code> is a reference."}], "answers": [{"comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1486574425, "post_id": 42119576, "comment_id": 71407496, "body": "Even more, I don&#39;t think it&#39;s strictly true that a member reference must have storage. Given a sufficiently lenient ABI, a sufficiently aggressive optimiser, and a &quot;cooperating&quot; constructor evaluable at compile time, the compiler might skip the reference member."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1486574551, "post_id": 42119576, "comment_id": 71407570, "body": "@Angew fair enough. I had hard time imagining optimizing it away, but I take your word for it."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 7, "last_activity_date": 1486574511, "last_edit_date": 1486574511, "creation_date": 1486574193, "answer_id": 42119576, "question_id": 42119458, "link": "https://stackoverflow.com/questions/42119458/how-to-obtain-pointer-to-reference-member/42119576#42119576", "title": "How to obtain pointer to reference member?", "body": "<blockquote>\n  <p>How to obtain pointer to reference (member)?</p>\n</blockquote>\n\n<p>You cannot obtain a pointers to (or references to, or arrays of) references. There is no such type as \"pointer to reference\" in C++. This is because references are not required to have storage, so there might not even be an address where the reference is stored.</p>\n\n<p>When you apply addressof operator on a reference, what you get is the address of the object that is referred to.</p>\n"}, {"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1486577193, "post_id": 42120295, "comment_id": 71409162, "body": "<i>&quot;References doesn&#39;t really have a container in the memory&quot;</i>. Well, each reference might or might not have. But since neither is guaranteed, usually the worst case must be assumed. Worst case for taking the address is that there is no address. Worst case for memory optimization is that storage is used. Nice picture :)"}, {"owner": {"reputation": 351, "user_id": 7440077, "user_type": "registered", "profile_image": "https://graph.facebook.com/1424452754266696/picture?type=large", "display_name": "Zhou Zhi Hua", "link": "https://stackoverflow.com/users/7440077/zhou-zhi-hua"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1486577451, "post_id": 42120295, "comment_id": 71409303, "body": "@user2079303 well, I never know reference might have container too, definitely will do more research on that, thanks for pointing out that!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1486626163, "post_id": 42120295, "comment_id": 71428636, "body": "<code>int &amp;x = x;</code> initializes the reference with itself (undefined behaviour)"}], "tags": [], "owner": {"reputation": 351, "user_id": 7440077, "user_type": "registered", "profile_image": "https://graph.facebook.com/1424452754266696/picture?type=large", "display_name": "Zhou Zhi Hua", "link": "https://stackoverflow.com/users/7440077/zhou-zhi-hua"}, "is_accepted": false, "score": 3, "last_activity_date": 1486576489, "creation_date": 1486576489, "answer_id": 42120295, "question_id": 42119458, "link": "https://stackoverflow.com/questions/42119458/how-to-obtain-pointer-to-reference-member/42120295#42120295", "title": "How to obtain pointer to reference member?", "body": "<p>Picture speaks a thousand words</p>\n\n<p><a href=\"https://i.stack.imgur.com/K2RGp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K2RGp.png\" alt=\"picture\"></a></p>\n\n<p>References doesn't really have a container in the memory, they serves more like an alias to the original variable, thus you cannot get pointer to reference because references doesn't have their own memory location.</p>\n\n<p>However, you can get the address of reference, which is the variable it is referencing. In this example, if you cout &amp;rx and &amp;x, they are the same.</p>\n\n<p>So probably you would want to get a pointer to the object it is referencing, rather than <em>pointer to reference</em></p>\n"}], "owner": {"reputation": 4160, "user_id": 371239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/decd51f67e3f34f4d6c526fed9b4a2dd?s=128&d=identicon&r=PG", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/371239/vahagn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1580, "favorite_count": 0, "accepted_answer_id": 42119576, "answer_count": 2, "score": 8, "last_activity_date": 1486626076, "creation_date": 1486573864, "last_edit_date": 1486626076, "question_id": 42119458, "link": "https://stackoverflow.com/questions/42119458/how-to-obtain-pointer-to-reference-member", "title": "How to obtain pointer to reference member?", "body": "<p>Consider this code:</p>\n\n<pre><code>struct AA\n{\n    int&amp; rr;\n};\n</code></pre>\n\n<p>Is there a way to obtain pointer (or maybe reference) to <code>AA::rr</code> in order to obtain this?</p>\n\n<pre><code>AA* aa;\nauto mm = &amp;AA::rr; // error: cannot create pointer to reference member \u2018AA::rr\u2019\naa -&gt;* mm;\n</code></pre>\n\n<p>Also in <code>gcc-7.0.1</code> <code>decltype(AA::mm)</code> is just <code>int&amp;</code>. Is this according to the standard? And does this make sense?</p>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>Sorry guys, I formulated the question not quite well. No complaints to the fact that references are not objects or that there is no such thing as pointer to a reference. The goal is quite selfish. Given <code>struct AA { int&amp; rr; };</code> I just want to have a function like this:</p>\n\n<pre><code>template &lt; typename Class, typename Member &gt;\nvoid test(Member Class::*) { }\n</code></pre>\n\n<p>that when calling <code>test(&amp;AA::rr)</code> I want <code>Class</code> to be <code>AA</code> and <code>Member</code> to be <code>int&amp;</code> or <code>int</code>. So I don't even need the pointer itself but its type that will allow to retrieve the class type and the member type. </p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1486573418, "post_id": 42119306, "comment_id": 71406884, "body": "Did you try stepping through your code, with a debugger?"}, {"owner": {"reputation": 521, "user_id": 2649087, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4tNSs.png?s=128&g=1", "display_name": "iNCEPTiON_", "link": "https://stackoverflow.com/users/2649087/inception"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1486573475, "post_id": 42119306, "comment_id": 71406920, "body": "Of course that&#39;s what I always do im getting this &quot;;;;&quot; in every entry."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 6, "creation_date": 1486573511, "post_id": 42119306, "comment_id": 71406949, "body": "&#39;%c&#39; + lpBuffer[0] - what this suppose to do?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1486573565, "post_id": 42119306, "comment_id": 71406982, "body": "why do you loop 100 times. What is <code>i</code> for. What is the %c for. First thing: Make your code simply cout the drive names"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1486573567, "post_id": 42119306, "comment_id": 71406984, "body": "@iNCEPTiON_ Did you inspect the values of your variables, at every step, as you were stepping through your code? At which line, did the code do what you didn&#39;t expect? What exactly did it do, that you didn&#39;t expect?"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1486573599, "post_id": 42119306, "comment_id": 71407005, "body": "What&#39;s the value of <code>lpBuffer[0]</code> when <code>&#39;%c&#39; + lpBuffer[0]</code> resolves to <code>;</code>?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1486573666, "post_id": 42119306, "comment_id": 71407041, "body": "read the spec of getdrivestrings &quot;A pointer to a buffer that receives a series of null-terminated strings, one for each valid drive in the system, plus with an additional null character. Each string is a device name.&quot;. You have no code to deal with the format"}, {"owner": {"reputation": 521, "user_id": 2649087, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4tNSs.png?s=128&g=1", "display_name": "iNCEPTiON_", "link": "https://stackoverflow.com/users/2649087/inception"}, "edited": false, "score": 0, "creation_date": 1486573670, "post_id": 42119306, "comment_id": 71407045, "body": "If I loop through the char array I&#39;m getting the right values my drives."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1486573816, "post_id": 42119306, "comment_id": 71407150, "body": "or use this as a starter <a href=\"http://stackoverflow.com/questions/18572944/getlogicaldrivestrings-and-char-where-am-i-doing-wrongly\" title=\"getlogicaldrivestrings and char where am i doing wrongly\">stackoverflow.com/questions/18572944/&hellip;</a>"}, {"owner": {"reputation": 521, "user_id": 2649087, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4tNSs.png?s=128&g=1", "display_name": "iNCEPTiON_", "link": "https://stackoverflow.com/users/2649087/inception"}, "edited": false, "score": 0, "creation_date": 1486573938, "post_id": 42119306, "comment_id": 71407219, "body": "The code works as expected when using char . I&#39;m a beginner and I&#39;ve tried to understand converting char to string"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1486574232, "post_id": 42119306, "comment_id": 71407406, "body": "@iNCEPTiON_ It looks like you need to read a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a> instead of trying to hack something together. And learn how to use a debugger, since from your responses, it was pretty clear, that you didn&#39;t even try to use a debugger: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1486583138, "post_id": 42119491, "comment_id": 71412519, "body": "This will only work, in case you set up your project to use MBCS encoding. There is no valid reason not to use Unicode that I am aware of. You should call <code>GetLogicalDriveStringsW</code>, replace <code>char</code> with <code>wchar_t</code>, and <code>std::string</code> with <code>std::wstring</code>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1486583815, "post_id": 42119491, "comment_id": 71412919, "body": "@IInspectable I replied to specific OP question, you should suggest that replacement to OP, not me."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 7, "last_activity_date": 1486608828, "last_edit_date": 1486608828, "creation_date": 1486573938, "answer_id": 42119491, "question_id": 42119306, "link": "https://stackoverflow.com/questions/42119306/convert-char-to-stdstring-not-working/42119491#42119491", "title": "Convert char to std::string not working", "body": "<p>As stated in the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa364975(v=vs.85).aspx\" rel=\"nofollow noreferrer\">documentation</a> <code>GetLogicalDriveStrings()</code> gives you a list of NULL-terminated strings, and the list is terminated by a NULL character. So just iterate that list, eg:</p>\n\n<pre><code>std::vector&lt;std::string&gt; directory::getLogicalDrives() {\n    std::vector&lt;std::string&gt; driveList;\n    char szBuffer[105];\n    DWORD size = GetLogicalDriveStrings(104, szBuffer);\n    if ((size &gt; 0) &amp;&amp; (size &lt;= 104)) {\n        const char *pstr = szBuffer;\n        while( *pstr ) {\n            std::string drive( pstr );\n            driveList.push_back(drive);\n            pstr += (drive.length() + 1);\n        }\n    }\n    return driveList;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 521, "user_id": 2649087, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4tNSs.png?s=128&g=1", "display_name": "iNCEPTiON_", "link": "https://stackoverflow.com/users/2649087/inception"}, "edited": false, "score": 0, "creation_date": 1486626981, "post_id": 42127549, "comment_id": 71429051, "body": "Thanks for this awesome explanation know understanding what went wrong."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1486610198, "last_edit_date": 1486610198, "creation_date": 1486609759, "answer_id": 42127549, "question_id": 42119306, "link": "https://stackoverflow.com/questions/42119306/convert-char-to-stdstring-not-working/42127549#42127549", "title": "Convert char to std::string not working", "body": "<blockquote>\n<pre><code>DWORD mydrives = 100;\nchar lpBuffer[100];\n</code></pre>\n</blockquote>\n\n<p>100 is not enough characters.  Technically, a computer can have up to 26 drive letters (realistically, no one has that many drive letters at one time, but you should still prepare for it).  A 100-character buffer has enough space to receive 24 drive letter strings at most (<code>4 * 24 + 1 = 97</code>, <code>4 * 25 + 1 = 101</code>).  You need space for at least 105 characters in your buffer to receive 26 drive letter strings (<code>4 * 26 + 1 = 105</code>).</p>\n\n<blockquote>\n<pre><code>std::string drive(3, '%c' + lpBuffer[0]); // Missing something?\n</code></pre>\n</blockquote>\n\n<p>This line does not do what you think it does.  You are thinking of the C-style <code>sprint()</code> function instead.  You can't use formatting strings with <code>std::string</code> like this.  This line should not even compile, or should compile with warnings.</p>\n\n<p>Besides, you are not even looping through the output strings correctly anyway.  <code>GetLogicalDriveStrings()</code> returns a double-terminated list of strings in <code>&lt;drive&gt;:\\&lt;nul&gt;</code> format, where <code>&lt;drive&gt;</code> is <code>&lt;nul&gt;</code> at the end of the list.  For example, if drives A, B, and C are returned, the contents of the buffer will look like this:</p>\n\n<pre><code>lpBuffer[ 0] = 'A';\nlpBuffer[ 1] = ':';\nlpBuffer[ 2] = '\\\\';\nlpBuffer[ 3] = '\\0';\nlpBuffer[ 4] = 'B';\nlpBuffer[ 5] = ':';\nlpBuffer[ 6] = '\\\\';\nlpBuffer[ 7] = '\\0';\nlpBuffer[ 8] = 'C';\nlpBuffer[ 9] = ':';\nlpBuffer[10] = '\\\\';\nlpBuffer[11] = '\\0';\nlpBuffer[12] = '\\0';\n</code></pre>\n\n<p>The correct approach is to loop through the buffer in groups of 4 characters until you reach that final null terminator (and don't forget error checking!), eg:</p>\n\n<pre><code>DWORD drives = GetLogicalDriveStrings(mydrives, lpBuffer);\nif ((drives &gt; 0) &amp;&amp; (drives &lt;= mydrives)) {\n    char *pdrive = lpBuffer;\n    while (*pdrive) {\n        std::string drive(pdrive);\n        driveList.push_back(drive);\n        pdrive += 4;\n    }\n}\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>DWORD drives = GetLogicalDriveStrings(mydrives, lpBuffer);\nif ((drives &gt; 0) &amp;&amp; (drives &lt;= mydrives)) {\n    for (int i = 0; i &lt; drives; i += 4) {\n        std::string drive(&amp;lpBuffer[i]);\n        driveList.push_back(drive);\n    }\n}\n</code></pre>\n\n<p>That being said, consider using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa364972.aspx\" rel=\"nofollow noreferrer\"><code>GetLogicalDrives()</code></a> instead, then you don't have to worry about allocating memory for, or looping through, any drive letter strings at all:</p>\n\n<pre><code>DWORD drives = GetLogicalDrives();\nif (drives) {\n    char drive[] = \"?:\\\\\";\n    for (int i = 0; i &lt; 26; i++) {\n        if (drives &amp; (1 &lt;&lt; i)) {\n            drive[0] = 'A' + i;\n            driveList.push_back(drive);\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 521, "user_id": 2649087, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4tNSs.png?s=128&g=1", "display_name": "iNCEPTiON_", "link": "https://stackoverflow.com/users/2649087/inception"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 42127549, "answer_count": 2, "score": 0, "last_activity_date": 1486610198, "creation_date": 1486573362, "last_edit_date": 1486573530, "question_id": 42119306, "link": "https://stackoverflow.com/questions/42119306/convert-char-to-stdstring-not-working", "title": "Convert char to std::string not working", "body": "<p>I'm trying to list the logical drives of my Pc and add the result to a vector but I'm getting this weird <code>result = ;;;</code>.</p>\n\n<p>What am i missing here? </p>\n\n<pre><code>std::vector&lt;std::string&gt; directory::getLogicalDrives() {\n    DWORD mydrives = 100;\n    char lpBuffer[100];\n    DWORD drives = GetLogicalDriveStrings(mydrives, lpBuffer);\n\n    std::vector&lt;std::string&gt; driveList;\n    for (int i = 0; i &lt; 100; i++) {\n        std::string drive(3, '%c' + lpBuffer[0]); // Missing something?\n        driveList.push_back(drive);\n    }\n    return driveList;\n}\n</code></pre>\n"}, {"tags": ["c++", "sorting", "vector", "quicksort"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1486573161, "post_id": 42119105, "comment_id": 71406715, "body": "<a href=\"http://importblogkit.com/2015/07/does-not-work/\" rel=\"nofollow noreferrer\">Does not work</a> is not a good problem description."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1486573788, "post_id": 42119105, "comment_id": 71407122, "body": "You are passing your vectors by value."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 1, "creation_date": 1486576679, "post_id": 42119105, "comment_id": 71408834, "body": "To clarify drescherjm&#39;s comment, the two affected lines should be   int partition(vector&lt;int&gt; <code>&amp;</code>v, int lo, int hi) and void quickSort(vector&lt;int&gt; <code>&amp;</code>v, int lo, int hi) . Since this is C++, you could change the do whiles to while(v[++i] &lt; pivot); and while(v[--j] &gt; pivot);  (don&#39;t forget the trailing ;)."}], "owner": {"reputation": 23, "user_id": 7448318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec0985763fb8df793e693ef53a4ef035?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7448318/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486572784, "creation_date": 1486572784, "question_id": 42119105, "link": "https://stackoverflow.com/questions/42119105/quick-sort-algorithm-not-working-cannot-figure-out-why", "title": "Quick sort algorithm not working! cannot figure out why.", "body": "<p>I used the wikipedia algorithm, it's simply not working and I can't see what I did wrong, any help would be appreciated! I'm confused because i thought the lo value should be 0, but then later it says to do lo -1? </p>\n\n<pre><code>  int partition(vector&lt;int&gt;v, int lo, int hi)\n   {\n    int pivot = v[lo];  //wikipedia says to use the low value\n    int i = lo - 1;\n    int j = hi + 1;\n    for (;;)\n    {\n     do\n        i = i + 1;\n    while (v[i] &lt; pivot);\n\n        do\n            j = j - 1;\n        while (v[j] &gt; pivot);\n\n        if (i &lt;= j)\n            return j;\n\n            swap(i, j);\n\n }\n\n}\n\nvoid quickSort(vector&lt;int&gt;v, int lo, int hi)\n{\n    if (lo &lt; hi)\n    {\n    int p = partition(v, lo, hi);\n    quickSort(v, lo, p);\n    quickSort(v, p + 1, hi);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "shallow-copy"], "comments": [{"owner": {"reputation": 19, "user_id": 7535759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ab4ed0bc97a8d1d3816909ebbc3689b?s=128&d=identicon&r=PG&f=1", "display_name": "vijay267", "link": "https://stackoverflow.com/users/7535759/vijay267"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1486574187, "post_id": 42119090, "comment_id": 71407379, "body": "In your example, I&#39;m talking about passing a T&amp; around, a reference (or possibly a pointer) to the root object."}], "answers": [{"comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 2, "creation_date": 1486573108, "post_id": 42119179, "comment_id": 71406674, "body": "How does that address OP&#39;s understanding that &quot;if you have a read-only or immutable object, you&#39;d simply want to use a reference&quot;?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1486573161, "post_id": 42119179, "comment_id": 71406717, "body": "@barakmanos: A reference to what? You can&#39;t use a naked <code>const char*</code>, since it doesn&#39;t have the behavior you want."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1486573223, "post_id": 42119179, "comment_id": 71406756, "body": "Well, I&#39;ve assumed that OP is referring to structs or classes. Is the term <i>shallow-copy</i> valid for anything else besides that?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1486573347, "post_id": 42119179, "comment_id": 71406840, "body": "@barakmanos: Consider my example of a hypothetical <code>immutable_string</code>. Are we talking about passing around a reference to the string instead of copying <code>immutable_string</code> instances, or are we talking about passing references to <code>immutable_string</code> instead of copying it?"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1486574193, "post_id": 42119179, "comment_id": 71407384, "body": "@NicolBolas A reference to your <code>immutable_string_t</code> object."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 2, "last_activity_date": 1486574729, "last_edit_date": 1486574729, "creation_date": 1486572992, "answer_id": 42119179, "question_id": 42119090, "link": "https://stackoverflow.com/questions/42119090/reasons-to-use-a-shallow-copy-instead-of-a-reference-in-c/42119179#42119179", "title": "Reasons to use a shallow copy instead of a reference in C++?", "body": "<p>The two options on the table here (assuming C++11) are:</p>\n\n<ol>\n<li><p>An object that has a shallow copy constructor/assignment operator.</p></li>\n<li><p>An object that has is either expensive to copy or not copyable at all. Given C++11, it would have a shallow move constructor/assignment operator.</p></li>\n</ol>\n\n<p>C++ is ultimately a value-oriented language. Until C++17, something as simple as this:</p>\n\n<pre><code>T t = someFuncReturningT();\n</code></pre>\n\n<p>would at least theoretically provoke a copy/move operation. C++17's guaranteed elision makes sure that this doesn't happen, but until then, that is considered to perform a copy/move into a <code>T</code>. Sure, pretty much every compiler will elide it. But it is still theoretically there.</p>\n\n<p>However, with move operations, not having a shallow copy isn't such a bad thing.</p>\n\n<p>The main reason why you would want shallow copy vs. expensive copy+shallow move is for types where copying is not merely a \"shallow copy\". <code>shared_ptr</code> for example. Copying isn't just copying a pointer or two; you also bump a reference count. Indeed, this is a result of the design of <code>shared_ptr</code> as a type: to allow multiple owners for an object.</p>\n\n<p>And the only way to do that is if each of those owners have their own copy. Therefore, copying must be \"shallow\" in that regard.</p>\n\n<p>So the advantage would be for cases where it's part of the object's design.</p>\n\n<hr>\n\n<p>If you're talking about pre-C++11 days, shallow copy made more sense. Post-C++11, you can rely on inexpensive move operations, but pre-C++11, that's not available. So a shallow copy is pretty much the only way to reasonably return objects by value.</p>\n"}, {"comments": [{"owner": {"reputation": 3342, "user_id": 1745372, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/7Wvvn.jpg?s=128&g=1", "display_name": "Kadir Erdem Demir", "link": "https://stackoverflow.com/users/1745372/kadir-erdem-demir"}, "edited": false, "score": 0, "creation_date": 1486573691, "post_id": 42119227, "comment_id": 71407056, "body": "Please explain the down vote so that I learn from my mistakes."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1486574170, "post_id": 42119227, "comment_id": 71407375, "body": "&quot;<i>Shallow copy can be advantageous in this case.</i>&quot; And you just explained how shallow copying can easily be <i>broken</i>. Because in your case here, you will attempt to delete the <code>data</code> array <i>twice</i>."}, {"owner": {"reputation": 3342, "user_id": 1745372, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/7Wvvn.jpg?s=128&g=1", "display_name": "Kadir Erdem Demir", "link": "https://stackoverflow.com/users/1745372/kadir-erdem-demir"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1486574344, "post_id": 42119227, "comment_id": 71407456, "body": "That is why I said &quot;can be&quot; because the question also asks &quot;what can be the reasons&quot; . It can be easily avoided with simple pointer checks."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1486574880, "post_id": 42119227, "comment_id": 71407754, "body": "<code>A ( A&amp; copy )</code> That is not a copy constructor. Users have the right to expect that <code>A anotherVal = aVal;</code> will not modify <code>aVal</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1486575788, "post_id": 42119227, "comment_id": 71408295, "body": "A user should also be able to expect that all object resources will be released when the destructor runs. Your last edit created a memory leak in the first example. Recommend a read of <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/rule_of_three</a>"}, {"owner": {"reputation": 3342, "user_id": 1745372, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/7Wvvn.jpg?s=128&g=1", "display_name": "Kadir Erdem Demir", "link": "https://stackoverflow.com/users/1745372/kadir-erdem-demir"}, "edited": false, "score": 0, "creation_date": 1486575948, "post_id": 42119227, "comment_id": 71408374, "body": "I am sorry but I can&#39;t see any leak. Can you tell me please. Does complete example(the second one) leaks or the first one. Do you mean in case when destroy won&#39;t be called?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1486576204, "post_id": 42119227, "comment_id": 71408527, "body": "<code>void func() {A a;}</code> would leak the buffer. You&#39;ve broken RAII and violated the Law of Least Surprise by removing the destuctor and replacing it with the <code>destroy</code> function."}, {"owner": {"reputation": 3342, "user_id": 1745372, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/7Wvvn.jpg?s=128&g=1", "display_name": "Kadir Erdem Demir", "link": "https://stackoverflow.com/users/1745372/kadir-erdem-demir"}, "edited": false, "score": 0, "creation_date": 1486576670, "post_id": 42119227, "comment_id": 71408828, "body": "I my problem is the way I am looking into problem. Maybe I should change my perfective. From my point of view the OP is looking for the cases where shallow copy can be useful. Even it is not a complete example the focus here is shallow copy. The other problems can be solved by making the example bigger but I think it is not OP looking for."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1486581943, "post_id": 42119227, "comment_id": 71411807, "body": "@NicolBolas: Isn&#39;t <code>A(A&amp; copy)</code> a copy constructor according to &#167;12.8/3, which says: <i>&quot;A non-template constructor for class <code>X</code> is a copy constructor if its first parameter is of type <code>X&amp;</code>, <code>const X&amp;</code>, <code>volatile X&amp;</code> or <code>const volatile X&amp;</code>, (...)&quot;</i>?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1486582303, "post_id": 42119227, "comment_id": 71412008, "body": "P.S.: I&#39;m not saying it&#39;s not a horrible idea to use a copy constructor with a non-const reference. But for better or worse, it&#39;s formally a copy constructor."}], "tags": [], "owner": {"reputation": 3342, "user_id": 1745372, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/7Wvvn.jpg?s=128&g=1", "display_name": "Kadir Erdem Demir", "link": "https://stackoverflow.com/users/1745372/kadir-erdem-demir"}, "is_accepted": false, "score": -2, "last_activity_date": 1486575934, "last_edit_date": 1486575934, "creation_date": 1486573096, "answer_id": 42119227, "question_id": 42119090, "link": "https://stackoverflow.com/questions/42119090/reasons-to-use-a-shallow-copy-instead-of-a-reference-in-c/42119227#42119227", "title": "Reasons to use a shallow copy instead of a reference in C++?", "body": "<p>The first thing comes to my mind is moving a object. </p>\n\n<p>Lets say you allocated a memory in class with new operator. </p>\n\n<pre><code>struct A \n{\n    A ()\n    {\n        data = new int[50];\n    }\n\n    void destroy()\n    {\n       delete [] data;\n    } \n\n   A ( const A&amp; copy )\n   {\n       data = copy.data;\n   }\n\n\n    int* data \n}\n</code></pre>\n\n<p>Than lets say you want to copy this object. Why not just copying the pointer to the data instead copying all data.</p>\n\n<pre><code>A calculateA()\n{\n     A returnVal;\n     for ( int i = 0; i &lt; 50; i++ )\n         returnVal.data[i] = i;\n     return returnVal;\n}\n</code></pre>\n\n<p>Shallow copy can be advantageous in this case. </p>\n\n<pre><code>A ( const A&amp; copy )\n{\n   data = copy.data;\n}\n\nA newA =  calculateA(); \n// do stuff with newA\nnewA.destroy();\n</code></pre>\n\n<p>I am sure there will be thousand of other reasons as well.  </p>\n\n<p>To avoid double deletion when copying the copy can set to null. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n\nstruct A \n{\n    A ()\n    {\n        data = new int[50];\n    }\n\n    ~A ()\n    {\n        if ( data )\n         delete [] data;\n    }\n\n    A ( A&amp; copy )\n    {\n       data = copy.data;\n       copy.data = nullptr;\n    }\n\n    int* data;\n};\n\n\nint main()\n{\n     A aVal;\n     for ( int i = 0; i &lt; 50; i++ )\n         aVal.data[i] = i;\n\n    A anotherVal = aVal;\n\n    int i = 10;\n    while (i--)\n      std::cout &lt;&lt; anotherVal.data[i]; \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1486573375, "post_id": 42119301, "comment_id": 71406857, "body": "That would be automatically moved from. In C++11, of course."}, {"owner": {"reputation": 1727, "user_id": 2014022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b5ab8fa77e562296a1b668005395762?s=128&d=identicon&r=PG", "display_name": "Peter K", "link": "https://stackoverflow.com/users/2014022/peter-k"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1486573466, "post_id": 42119301, "comment_id": 71406916, "body": "In second example but not the first."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1486573549, "post_id": 42119301, "comment_id": 71406973, "body": "Right, but the OP&#39;s point is still (potentially) valid: you don&#39;t strictly need shallow copying to be able to act on the object in reasonable ways."}], "tags": [], "owner": {"reputation": 1727, "user_id": 2014022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b5ab8fa77e562296a1b668005395762?s=128&d=identicon&r=PG", "display_name": "Peter K", "link": "https://stackoverflow.com/users/2014022/peter-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1486573353, "creation_date": 1486573353, "answer_id": 42119301, "question_id": 42119090, "link": "https://stackoverflow.com/questions/42119090/reasons-to-use-a-shallow-copy-instead-of-a-reference-in-c/42119301#42119301", "title": "Reasons to use a shallow copy instead of a reference in C++?", "body": "<p>Imagine the following example:</p>\n\n<pre><code>shared_ptr&lt;T&gt; p1(new T);\n...\nshared_ptr&lt;T&gt; p2 = p1;\n</code></pre>\n\n<p>here p2 is a shallow copy of p1. You could have used reference here, but you could not if you return it:</p>\n\n<pre><code>shared_ptr&lt;T&gt; f() {\n    shared_ptr&lt;T&gt; p1(new T);\n    return p1;\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 7535759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ab4ed0bc97a8d1d3816909ebbc3689b?s=128&d=identicon&r=PG&f=1", "display_name": "vijay267", "link": "https://stackoverflow.com/users/7535759/vijay267"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1486575934, "creation_date": 1486572763, "last_edit_date": 1486574427, "question_id": 42119090, "link": "https://stackoverflow.com/questions/42119090/reasons-to-use-a-shallow-copy-instead-of-a-reference-in-c", "title": "Reasons to use a shallow copy instead of a reference in C++?", "body": "<p>I'm curious in what circumstances would you actually create a shallow copy of an object instead of simply passing a reference to the object or making a deep copy of said object in C++? </p>\n\n<p>My understanding is that if you have a read-only or immutable object, you'd simply want to use a reference. If you need to make changes to the copy without changing the original, or marshal some data to a different memory address space, you'd make a deep copy. </p>\n\n<p>I can see using a shallow copy in the copy on write case (before you write to the object and finish off the deep copy), but are there some other reasons you'd want to use a shallow copy?</p>\n\n<p>Edit: Trying to clarify the question.</p>\n"}, {"tags": ["c++", "templates", "static-methods"], "comments": [{"owner": {"reputation": 65, "user_id": 7535740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8115e332658dfe7d9c7a943b8c0d5a9e?s=128&d=identicon&r=PG&f=1", "display_name": "sweatervest", "link": "https://stackoverflow.com/users/7535740/sweatervest"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1486573202, "post_id": 42119042, "comment_id": 71406744, "body": "Thank you, I just corrected.  I want to implement the static function for the specialization of A with B, but without specializing B."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 7535740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8115e332658dfe7d9c7a943b8c0d5a9e?s=128&d=identicon&r=PG&f=1", "display_name": "sweatervest", "link": "https://stackoverflow.com/users/7535740/sweatervest"}, "edited": false, "score": 0, "creation_date": 1487895583, "post_id": 42119382, "comment_id": 72002759, "body": "Thanks!  I ended up just partially specializing the entire class."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 0, "last_activity_date": 1486573602, "last_edit_date": 1495541814, "creation_date": 1486573602, "answer_id": 42119382, "question_id": 42119042, "link": "https://stackoverflow.com/questions/42119042/template-specialization-with-template-for-static-function/42119382#42119382", "title": "Template Specialization with Template for Static Function", "body": "<p>This is indeed partial specialization. You cannot partially specialize just a method, you must partially specialize the whole class. See <a href=\"https://stackoverflow.com/questions/10284498/partial-specialization-of-a-method-in-a-templated-class\">this answer</a>. You might try implementing foo in a separate helper struct and partially specializing that struct instead.</p>\n\n<p>Here is an example using a helper struct.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;class T&gt; struct t_helper\n{\n    static void foo()\n    {\n        std::cout &lt;&lt; \"Not B&lt;T&gt;\\n\";\n    }\n};\n\ntemplate&lt;class T&gt; class A\n{\n\npublic:\n    static void foo() {\n        t_helper&lt;T&gt;::foo();\n    }\n};\n\ntemplate&lt;class T&gt; class B {};\n\n// Specialize the behavior of A&lt;T&gt;::foo() for all B types\ntemplate&lt;class T&gt; \nstruct t_helper&lt;B&lt;T&gt;&gt;\n{\n    static void foo()\n    {\n        std::cout &lt;&lt; \"Is B&lt;T&gt;\\n\";\n    }\n};\n\nint main()\n{\n    A&lt;int&gt;::foo();    // Prints \"Not B&lt;T&gt;\\n\"\n    A&lt;B&lt;int&gt;&gt;::foo(); // Prints \"Is B&lt;T&gt;\\n\"\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 7535740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8115e332658dfe7d9c7a943b8c0d5a9e?s=128&d=identicon&r=PG&f=1", "display_name": "sweatervest", "link": "https://stackoverflow.com/users/7535740/sweatervest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 42119382, "answer_count": 1, "score": 0, "last_activity_date": 1486573602, "creation_date": 1486572636, "last_edit_date": 1486573256, "question_id": 42119042, "link": "https://stackoverflow.com/questions/42119042/template-specialization-with-template-for-static-function", "title": "Template Specialization with Template for Static Function", "body": "<p>I have a template that inherits from another template, with itself as the second template's template parameter.  The inherited template defines a static function:</p>\n\n<pre><code>template&lt;class T&gt; class A\n{\n\npublic:\n\n    static void foo();\n};\n\ntemplate&lt;class T&gt; class B : public A&lt;B&gt;\n{\n\n};\n</code></pre>\n\n<p>Now I want to implement the static function for the class A specialized with B, but with B not specialized.  But I can't figure out how to declare the template.  I'm not even sure if this is possible.  My first try was:</p>\n\n<pre><code>template&lt;class T&gt; void A&lt;B&lt;T&gt;&gt;::foo()\n{\n\n}\n</code></pre>\n\n<p>But this gives the error:</p>\n\n<pre><code>\"Nested name specifier 'A&lt;B&lt;T&gt;&gt;::\" for declaration does not refer into a class, class template or class template partial specialization\"\n</code></pre>\n\n<p>I've tried different things like adding \"template&lt;>\" in front but none of those worked.  I am able to compile this:</p>\n\n<pre><code>template&lt;&gt; void A&lt;B&lt;int&gt;&gt;::foo()\n{\n\n}\n</code></pre>\n\n<p>As well as this:</p>\n\n<pre><code>template&lt;class T&gt; void A&lt;T&gt;::foo()\n{\n\n}\n</code></pre>\n\n<p>Is this an attempt at partial specialization?  My first impression is no (there are no templates with multiple parameters where I want to specialize one of them).  Rather, I want to specialize a template with another template that is not specialized.  Is this possible, and if so what is the proper syntax?</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "is_accepted": false, "score": 2, "last_activity_date": 1486572656, "creation_date": 1486572656, "answer_id": 42119051, "question_id": 42118984, "link": "https://stackoverflow.com/questions/42118984/finding-matched-color-using-c-bitwise-operator/42119051#42119051", "title": "Finding matched color using C++ bitwise operator", "body": "<p>You use the bitwise and operator <code>&amp;</code> to mask the values you are interested in. </p>\n\n<p>For example, to see if an blue bits are set you would say <code>jersey1 &amp; BLUE</code>. If the value is 0 then there are no blue bits. If it's non-zero then there is a blue bit set.</p>\n"}, {"tags": [], "owner": {"reputation": 3191, "user_id": 119215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hOpgo.jpg?s=128&g=1", "display_name": "Jay Atkinson", "link": "https://stackoverflow.com/users/119215/jay-atkinson"}, "is_accepted": false, "score": 0, "last_activity_date": 1486572909, "creation_date": 1486572909, "answer_id": 42119152, "question_id": 42118984, "link": "https://stackoverflow.com/questions/42118984/finding-matched-color-using-c-bitwise-operator/42119152#42119152", "title": "Finding matched color using C++ bitwise operator", "body": "<p>You'll want to use a bitwise '&amp;' to test if a blue pixel exists in jersey1 like the following:</p>\n\n<pre><code>if(jersey1 &amp; BLUE)\n{\n   cout &lt;&lt; \"It's blue!\" &lt;&lt; endl;\n}\nelse\n{\n   cout &lt;&lt; \"It's not blue!\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>The '&amp;' or \"and\" operator with the bits requires that both bits in the same position of each value (BLUE and jersey1) are equal to 1 for it to be true.  Whereas, the '|' (or) operator only requires that one set of bits in one of the values is equal to 1.  In the above example, had you used \"bitwise or\" (|), the if statement would always be true which is not what you want.</p>\n"}, {"tags": [], "owner": {"reputation": 635, "user_id": 4096667, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-twCUNUcC7jc/AAAAAAAAAAI/AAAAAAAABgw/-xFwOg7Mv_A/photo.jpg?sz=128", "display_name": "A C", "link": "https://stackoverflow.com/users/4096667/a-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1486573279, "creation_date": 1486573279, "answer_id": 42119282, "question_id": 42118984, "link": "https://stackoverflow.com/questions/42118984/finding-matched-color-using-c-bitwise-operator/42119282#42119282", "title": "Finding matched color using C++ bitwise operator", "body": "<p>You can think of the bitwise AND and OR operators as gates that either stop values (mask them out) or let them through.  If you take a value and a mask, and compare their binary representations, then the AND operator will have a 1 anywhere that both have a 1.  The OR operator will have a 1 wherever at least one of them has a 1.  It looks like this, reading vertically:</p>\n\n<pre><code>0 1 0 1\n0 0 1 1\n-------  AND\n0 0 0 1\n\n0 1 0 1\n0 0 1 1\n------- OR\n0 1 1 1\n</code></pre>\n\n<p>Colors are frequently represented by hexadecimal values which contain 256 possible shades of each of the red, green, and blue components of the color.  The bytes are (usually) ordered RRGGBB.  Therefore you should convert your int 123 to hexadecimal to get <code>0x0000007B</code> and then choose a mask which will determine the value that's in the \"blue\" position.  {Actually, we can already see that there is a value in the blue position, so we <em>could</em> stop now...}  Anyway, to simply mask a value down to its blue channel, we would AND with a mask which only passes through the values in that last position.  Since <code>FF</code> in hex gives <code>11111111</code> and ones pass values through, we can mask with <code>0000FF</code>, which is the mask you were given for the blue channel (the <code>BLUE</code> const).  You'd simply need to test the value of <code>(jersey1 &amp; BLUE)</code> to see if it's nonzero to find out whether there's blue in that channel.</p>\n"}], "owner": {"reputation": 305, "user_id": 6088159, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/svUro.jpg?s=128&g=1", "display_name": "Naz Islam", "link": "https://stackoverflow.com/users/6088159/naz-islam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1486573279, "creation_date": 1486572499, "question_id": 42118984, "link": "https://stackoverflow.com/questions/42118984/finding-matched-color-using-c-bitwise-operator", "title": "Finding matched color using C++ bitwise operator", "body": "<p>I want to figure out whether jersey1 has a Blue pixel in it or not. Also, I have find this using bitwise operator. For doing so, should I use the bitwise and (&amp;) or bitwise or (|). Can you please explain me how they differ from each other? Thanks in advance.</p>\n\n<pre><code> const unsigned int GREEN= 0x0000FF00;  //green\n const unsigned int RED  = 0x00FF0000;    //red\n const unsigned int BLUE = 0x000000FF;   //blue\n const unsigned int RGB  = RED | GREEN | BLUE;\n\n unsigned int jersey1 = 123;\n</code></pre>\n"}, {"tags": ["c++", "makefile", "mingw", "linker-errors", "fltk"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 7213014, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/82d495a67f62f25178db58902bef5733?s=128&d=identicon&r=PG&f=1", "display_name": "Annie May", "link": "https://stackoverflow.com/users/7213014/annie-may"}, "edited": false, "score": 0, "creation_date": 1486580612, "post_id": 42120405, "comment_id": 71411103, "body": "Followed your sensible advice but errors still abound. See <a href=\"http://pastebin.com/2tr3CuRg\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "reply_to_user": {"reputation": 49, "user_id": 7213014, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/82d495a67f62f25178db58902bef5733?s=128&d=identicon&r=PG&f=1", "display_name": "Annie May", "link": "https://stackoverflow.com/users/7213014/annie-may"}, "edited": false, "score": 0, "creation_date": 1486580977, "post_id": 42120405, "comment_id": 71411308, "body": "@slimandstacked Please post the complete output of the failing make, not just the errors."}, {"owner": {"reputation": 49, "user_id": 7213014, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/82d495a67f62f25178db58902bef5733?s=128&d=identicon&r=PG&f=1", "display_name": "Annie May", "link": "https://stackoverflow.com/users/7213014/annie-may"}, "edited": false, "score": 0, "creation_date": 1486597918, "post_id": 42120405, "comment_id": 71419690, "body": "Thanks, that fixed the makefile issues. There were a bunch of other libs needed for fltk to work properly but that is beyond the scope of this question."}], "tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 0, "last_activity_date": 1486588355, "last_edit_date": 1486588355, "creation_date": 1486576873, "answer_id": 42120405, "question_id": 42118927, "link": "https://stackoverflow.com/questions/42118927/how-to-link-against-libraries-when-using-mingw-and-makefiles/42120405#42120405", "title": "How to link against libraries when using MingW and makefiles", "body": "<blockquote>\n  <p>Is there something obviously wrong with this makefile or does the error lie somwehere else?</p>\n</blockquote>\n\n<p>There are two things wrong with this makefile.</p>\n\n<p><strong>Thing 1</strong></p>\n\n<pre><code>LDFLAGS=-L$(FLTK_BIN)/lib\nLDLIBS=-lfltk\n</code></pre>\n\n<p>You have conventional GNU Make settings of linkage options:</p>\n\n<pre><code>LDFLAGS=-L$(FLTK_BIN)/lib\n</code></pre>\n\n<p><code>$(LDFLAGS)</code> should occur at an appropriate position in your linkage\nrecipe to tell the linker that it should search in the directory\n<code>$(FLTK_BIN)/lib</code> for any libraries specified with <code>-l</code> option (before\nsearching in its default directories). </p>\n\n<pre><code>LDLIBS=-lfltk\n</code></pre>\n\n<p><code>$(LDLIBS)</code> should occur at an appropriate position in your linkage\nrecipe to tell the linker that it should link the shared library <code>libfltk.so</code>\nor failing that, the static library <code>libfltk.a</code>. (On Windows, other extensions\nare accepted).</p>\n\n<p>Your linkage recipe:</p>\n\n<pre><code>$(EXECUTABLE): $(OBJECTS)\n    $(CC) $(LDFLAGS) $(OBJECTS) -o $@\n</code></pre>\n\n<p>has <code>$(LDFLAGS)</code> at an appropriate position but does not have <code>$(LDLIBS)</code>\nanywhere. The linker therefore makes no attempt to link <code>libfltk</code>.\nThat very likely explains the undefined reference errors that you refer to,\nalthough I can't be absolutely sure since you haven't revealed what they are.</p>\n\n<p>The linkage recipe ought to be:</p>\n\n<pre><code>$(EXECUTABLE): $(OBJECTS)\n    $(CC) $(LDFLAGS) $(OBJECTS) -o $@ $(LDLIBS)\n</code></pre>\n\n<p>or more conventionally:</p>\n\n<pre><code>$(EXECUTABLE): $(OBJECTS)\n    $(CC) $(LDFLAGS) $^ -o $@ $(LDLIBS)\n</code></pre>\n\n<p><strong>Thing 2</strong></p>\n\n<p>Your compile recipe:</p>\n\n<pre><code>.$(EXT).o:\n    $(CC) $(CFLAGS) $&lt; -o $@\n</code></pre>\n\n<p>is not actually a compile recipe. It is a compile-and-link recipe. <code>gcc/g++</code>\nwill always attempt to perform a linkage unless the commandline options\ninclude <code>-c</code> ( = compile only). Since the recipe (correctly) does not include\nany of the necessary linkage options - <code>$(LDFLAGS)</code>, <code>$(LDLIBS)</code> - the\npremature attempted linkage fails and the build gets not further. The\ncommandline you have logged as producing the linkage errors:</p>\n\n<pre><code>g++ -std=c++14 -Wall -IC:/frameworks/fltk-1.3.4-1 -v src/hw.cc -o src/hw.o\n</code></pre>\n\n<p>is a substitution instance of your \"compile\" recipe:</p>\n\n<pre><code>$(CC) $(CFLAGS) $&lt; -o $@\n</code></pre>\n\n<p>and not of your linkage recipe:</p>\n\n<pre><code>$(CC) $(LDFLAGS) $(OBJECTS) -o $@\n</code></pre>\n\n<p>To correct the compile recipe, make it:</p>\n\n<pre><code>$(CC) $(CFLAGS) $&lt; -c -o $@\n</code></pre>\n\n<p><a href=\"https://www.gnu.org/software/make/manual/make.html\" rel=\"nofollow noreferrer\">The GNU Make documentation</a>\nis good.</p>\n"}], "owner": {"reputation": 49, "user_id": 7213014, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/82d495a67f62f25178db58902bef5733?s=128&d=identicon&r=PG&f=1", "display_name": "Annie May", "link": "https://stackoverflow.com/users/7213014/annie-may"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 893, "favorite_count": 0, "accepted_answer_id": 42120405, "answer_count": 1, "score": 0, "last_activity_date": 1486588355, "creation_date": 1486572369, "question_id": 42118927, "link": "https://stackoverflow.com/questions/42118927/how-to-link-against-libraries-when-using-mingw-and-makefiles", "title": "How to link against libraries when using MingW and makefiles", "body": "<p>I downloaded and built FLTK (v. 1.3.4.1) using MingW and cmake which worked perfectly.\nHowever I am having problems properly linking against FLTK resulting in lots of undefined references during linking. \nI do not have MSYS or any other shell for Windows installed which means using the 'fltk-config' script is not an option.</p>\n\n<p>My knowledge of makefiles is rather sparse and the following has been built using the official documentation and various internet sources.</p>\n\n<pre><code>CC=g++\nFLTK_INC=C:/frameworks/fltk-1.3.4-1\nFLTK_BIN=C:/frameworks/fltk-1.3.4-1/bin\nCFLAGS=-std=c++11 -Wall -I$(FLTK_INC) -v\nLDFLAGS=-L$(FLTK_BIN)/lib\nLDLIBS=-lfltk\nEXT=cc\nSOURCES=$(wildcard src/*.$(EXT))\nOBJECTS=$(SOURCES:.$(EXT)=.o)\nEXECUTABLE=hello\n\nall: $(SOURCES) $(EXECUTABLE)\n\n$(EXECUTABLE): $(OBJECTS)\n    $(CC) $(LDFLAGS) $(OBJECTS) -o $@\n\n.$(EXT).o:\n    $(CC) $(CFLAGS) $&lt; -o $@\n</code></pre>\n\n<p>Is there something obviously wrong with this makefile or does the error lie somwehere else?</p>\n"}, {"tags": ["c++", "qt", "qt-signals", "slot"], "comments": [{"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1486572420, "post_id": 42118877, "comment_id": 71406161, "body": "B is private in the scope of A, so you can&#39;t use it outside. You could do the unsafe thing and use a void pointer, then cast it to B pointer in the slot. But seeing that B is private, there is no possible way to emit from anywhere other than inside A."}, {"owner": {"reputation": 143, "user_id": 4873593, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/140da0c1add4001e02bd7c59dd7b3a39?s=128&d=identicon&r=PG&f=1", "display_name": "code_not_yet_complete", "link": "https://stackoverflow.com/users/4873593/code-not-yet-complete"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1486572582, "post_id": 42118877, "comment_id": 71406279, "body": "@ddriver sorry it was a typo: B is public."}, {"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 0, "creation_date": 1486577193, "post_id": 42118877, "comment_id": 71409159, "body": "What&#39;s the error message? Seems to me that the types are actually compatible."}, {"owner": {"reputation": 143, "user_id": 4873593, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/140da0c1add4001e02bd7c59dd7b3a39?s=128&d=identicon&r=PG&f=1", "display_name": "code_not_yet_complete", "link": "https://stackoverflow.com/users/4873593/code-not-yet-complete"}, "edited": false, "score": 0, "creation_date": 1486577640, "post_id": 42118877, "comment_id": 71409413, "body": "Theoretically they are. But qt only cares about the name in the signal and slot function when connecting and complains on runtime that connect is not compatible."}], "answers": [{"tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": true, "score": 2, "last_activity_date": 1486585076, "creation_date": 1486585076, "answer_id": 42122814, "question_id": 42118877, "link": "https://stackoverflow.com/questions/42118877/qt-signal-slots-class-scope-types/42122814#42122814", "title": "Qt Signal Slots class scope types", "body": "<p>As you noticed, code below report a runtime error reporting incompatibility between <code>signal</code> and <code>slot</code>:</p>\n\n<pre><code>QObject::connect( &amp;c, SIGNAL( value( A::B* ) ), &amp;a, SLOT( onValue( B* ) ) );\n</code></pre>\n\n<p>Error is:</p>\n\n<blockquote>\n  <p>QObject::connect: Incompatible sender/receiver arguments\n        C::value(A::B*) --> A::onValue(B*)</p>\n</blockquote>\n\n<p>This is because <code>SIGNAL</code> and <code>SLOT</code> are macros and the compatibility of calls is resolved at runtime and fails this case when it should work as <code>A::B</code> and <code>B</code> are the same (most likely because it's apparently a simple text comparison).</p>\n\n<p>But this is an old style connection command (pre Qt5).</p>\n\n<p>With the new style connection command:</p>\n\n<pre><code>QObject::connect( &amp;c, &amp;C::value, &amp;a, &amp;A::onValue );\n</code></pre>\n\n<p>No error is reported at compilation time, nor at runtime and the connection will work.</p>\n"}], "owner": {"reputation": 143, "user_id": 4873593, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/140da0c1add4001e02bd7c59dd7b3a39?s=128&d=identicon&r=PG&f=1", "display_name": "code_not_yet_complete", "link": "https://stackoverflow.com/users/4873593/code-not-yet-complete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 42122814, "answer_count": 1, "score": 0, "last_activity_date": 1515103095, "creation_date": 1486572237, "last_edit_date": 1515103095, "question_id": 42118877, "link": "https://stackoverflow.com/questions/42118877/qt-signal-slots-class-scope-types", "title": "Qt Signal Slots class scope types", "body": "<p>Given two headers from an external SDK,</p>\n\n<pre><code>class A\n{\n  public:\n   class B\n   {\n   };\n  public slots:\n   void onValue(B* b);\n};\n\nclass C\n{\n  signal:\n   void value(A::B* b);\n};\n</code></pre>\n\n<p>The question is how i can connect signal and slots of C -> A since the data types are taken as incompatible in run time. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 5, "creation_date": 1486572236, "post_id": 42118863, "comment_id": 71406054, "body": "&quot;my code works perfectly but still returns an absurd number after running&quot; hmmm."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1486572271, "post_id": 42118863, "comment_id": 71406079, "body": "A seemingly random number is most likely an uninitialized variable."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1486572282, "post_id": 42118863, "comment_id": 71406082, "body": "You declared a <code>float</code> type <code>d</code> and then passed this to a method expecting <code>int</code>, did you try any debugging?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 5, "creation_date": 1486572329, "post_id": 42118863, "comment_id": 71406107, "body": "You forgot to return a number from <code>odev</code>. Your compiler will tell you about silly mistakes like that if you enable warnings."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1486572425, "post_id": 42118863, "comment_id": 71406165, "body": "<code>numbers::odev</code> doesn&#39;t return anything, looking at the code i&#39;d make it void and change <code>cout &lt;&lt; arit.odev(d) &lt;&lt; endl;</code> -&gt; <code>arit.odev(d);</code>."}, {"owner": {"reputation": 1050, "user_id": 483421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fb2ffc399dbb9bec5567d4a63dc0a4c?s=128&d=identicon&r=PG", "display_name": "iolo", "link": "https://stackoverflow.com/users/483421/iolo"}, "edited": false, "score": 0, "creation_date": 1486574575, "post_id": 42118863, "comment_id": 71407582, "body": "Question aside: There is absolutely no reason to use a class here. What you are doing is completely non-object-oriented. Ask yourself what <code>numbers</code> or <code>arit</code> are supposed to represent... They are only obfuscations."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 5, "last_activity_date": 1486573458, "last_edit_date": 1486573458, "creation_date": 1486572408, "answer_id": 42118950, "question_id": 42118863, "link": "https://stackoverflow.com/questions/42118863/i-am-new-to-c-and-struggling-to-figure-out-why-my-code-works-perfectly-but-sti/42118950#42118950", "title": "I am new to C++ and struggling to figure out why my code works perfectly but still returns an absurd number after running", "body": "<p>The member function <code>odev</code> does not return anything even though its return type is <code>int</code>. Hence, your program has undefined behavior.</p>\n\n<p>You can fix it by adding a <code>return</code> statement or changing the return type to <code>void</code> and replacing </p>\n\n<pre><code>cout &lt;&lt; arit.odev(d) &lt;&lt; endl;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>arit.odev(d);\n</code></pre>\n\n<p>The member function <code>greatest_number</code> suffers from the same problem.</p>\n\n<hr>\n\n<p>You can detect such errors at compile time by turning up the warning level. When I compile the posted code using <code>g++ -Wall</code>, I get the following messages.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>socc.cc: In member function \u2018int numbers::odev(int)\u2019:\nsocc.cc:17:7: warning: no return statement in function returning non-void [-Wreturn-type]\n       }\n       ^\nsocc.cc: In member function \u2018int numbers::greatest_number(int, int, int)\u2019:\nsocc.cc:30:7: warning: no return statement in function returning non-void [-Wreturn-type]\n       }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7513174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fdd7498a503333023431a55ae5ee272?s=128&d=identicon&r=PG&f=1", "display_name": "Spencer Specter", "link": "https://stackoverflow.com/users/7513174/spencer-specter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486573458, "creation_date": 1486572208, "last_edit_date": 1486573444, "question_id": 42118863, "link": "https://stackoverflow.com/questions/42118863/i-am-new-to-c-and-struggling-to-figure-out-why-my-code-works-perfectly-but-sti", "title": "I am new to C++ and struggling to figure out why my code works perfectly but still returns an absurd number after running", "body": "<p>I want to determine if a number is even or odd.\nSince i wanted to practice my new knowledge of classes, I wrote a class and built a function to help me with determining whether the number is odd or even.</p>\n\n<p>After compiling and testing my code, it runs perfectly. But after printing out the print statement embedded in the function, it prints a huge number as well.</p>\n\n<p>Why does the program return that number?</p>\n\n<pre><code> #include &lt;iostream&gt;\n\n    using namespace std;\n\n    class numbers{\n\n        public:\n           int odev(int num)\n           {\n              if (num % 2 == 0){\n                cout &lt;&lt; num &lt;&lt; \" is an even number\" &lt;&lt; endl;\n              }\n              else{\n                cout &lt;&lt; num &lt;&lt; \" is an odd number\" &lt;&lt; endl;\n              }\n\n           }\n\n            int greatest_number(int fnum, int snum, int tnum)\n            {\n                if (fnum &gt; snum &amp;&amp; fnum &gt; tnum){\n                    cout &lt;&lt; fnum &lt;&lt; \" is greatest among these\" &lt;&lt; endl;\n            }\n                    else if (snum &gt; fnum &amp;&amp; snum &gt; tnum){\n                        cout &lt;&lt; snum &lt;&lt; \"is greatest among these\" &lt;&lt; endl;\n                    }\n                else{\n                    cout &lt;&lt; tnum &lt;&lt; \" is the greatest among these\" &lt;&lt; endl;\n                }\n            }\n    };\n    int main()\n    {\n        numbers arit;\n        float d;\n\n        cout &lt;&lt;\"Enter any number: \\n&gt; \";\n        cin &gt;&gt; d;\n\n        cout &lt;&lt; arit.odev(d) &lt;&lt; endl;\n\n        return 0;\n    }\n</code></pre>\n\n<p>This is what it shows.<br>\n<a href=\"https://i.stack.imgur.com/zOSj7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zOSj7.png\" alt=\"This is what it shows.\"></a></p>\n"}, {"tags": ["c++", "css", "qt", "layout"], "answers": [{"tags": [], "owner": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "is_accepted": false, "score": 0, "last_activity_date": 1487765933, "creation_date": 1487765933, "answer_id": 42391282, "question_id": 42118630, "link": "https://stackoverflow.com/questions/42118630/how-to-add-a-css-class-to-a-qvboxlayout/42391282#42391282", "title": "How to add a CSS Class to a QVBoxLayout", "body": "<p>You can wrap the layout inside an additional <code>QWidget</code> on which you set the property. For example:</p>\n\n<pre><code>QWidget * leftContainerWrapper = new QWidget();\nleftContainerWrapper-&gt;setLayout(new QVBoxLayout());\nleftContainerWrapper-&gt;setProperty(\"class\", \"top-bar-borders\");\n</code></pre>\n"}], "owner": {"reputation": 5278, "user_id": 3663765, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/03caa8002f94a2ffd40630239d7a35c6?s=128&d=identicon&r=PG&f=1", "display_name": "Program-Me-Rev", "link": "https://stackoverflow.com/users/3663765/program-me-rev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1487765933, "creation_date": 1486571562, "question_id": 42118630, "link": "https://stackoverflow.com/questions/42118630/how-to-add-a-css-class-to-a-qvboxlayout", "title": "How to add a CSS Class to a QVBoxLayout", "body": "<p>A <code>QWidget</code> picks up CSS classes as expected:</p>\n\n<pre><code>leftContainerWrapper = new QVBoxLayout();\nleftContainerWrapper -&gt; setProperty(\"class\", \"top-bar-borders\");\n</code></pre>\n\n<p>However, <strong>QVBoxLayout</strong> never do.  </p>\n\n<pre><code>QVBoxLayout leftContainerWrapper = new QVBoxLayout();\nleftContainerWrapper -&gt; setProperty(\"class\", \"top-bar-borders\");\n</code></pre>\n\n<p>How can I go about adding the style class, <code>top-bar-borders</code> below, to a <strong>QHBoxlayout</strong>?</p>\n\n<pre><code>.top-bar-borders {\n    border-top: 2px solid  #5676C9;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "winforms"], "comments": [{"owner": {"reputation": 2435, "user_id": 1872867, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PorWX.jpg?s=128&g=1", "display_name": "Tom Mettam", "link": "https://stackoverflow.com/users/1872867/tom-mettam"}, "edited": false, "score": 0, "creation_date": 1486571526, "post_id": 42118586, "comment_id": 71405535, "body": "I believe this is a service pack issue - make sure Visual Studio is up-to-date and that you have the very latest runtimes <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=48145\" rel=\"nofollow noreferrer\">microsoft.com/en-us/download/details.aspx?id=48145</a>"}, {"owner": {"reputation": 23, "user_id": 6111541, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e67fbf2b6c66bab87ed1b95e9a2ce063?s=128&d=identicon&r=PG&f=1", "display_name": "schneider", "link": "https://stackoverflow.com/users/6111541/schneider"}, "reply_to_user": {"reputation": 2435, "user_id": 1872867, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PorWX.jpg?s=128&g=1", "display_name": "Tom Mettam", "link": "https://stackoverflow.com/users/1872867/tom-mettam"}, "edited": false, "score": 0, "creation_date": 1486572588, "post_id": 42118586, "comment_id": 71406286, "body": "On my os works. It doesn&#39;t work on windows without visual studio 2015."}, {"owner": {"reputation": 2435, "user_id": 1872867, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PorWX.jpg?s=128&g=1", "display_name": "Tom Mettam", "link": "https://stackoverflow.com/users/1872867/tom-mettam"}, "edited": false, "score": 0, "creation_date": 1486572931, "post_id": 42118586, "comment_id": 71406521, "body": "Yes, but the version of VC++ that you compile with makes a difference. The end user has to have the latest redistributable package installed (see my above link) and you have to have the latest service packs installed for VS."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1486573030, "post_id": 42118586, "comment_id": 71406612, "body": "terminate() is exported by ucrtbase.dll, not vcruntime140.dll.  What kind of sledgehammer you used on the linker is hard to guess."}, {"owner": {"reputation": 23, "user_id": 6111541, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e67fbf2b6c66bab87ed1b95e9a2ce063?s=128&d=identicon&r=PG&f=1", "display_name": "schneider", "link": "https://stackoverflow.com/users/6111541/schneider"}, "edited": false, "score": 0, "creation_date": 1486573308, "post_id": 42118586, "comment_id": 71406810, "body": "ok. Then how could I compile a win32 project to run on a new installed windows 8.1 ?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6111541, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e67fbf2b6c66bab87ed1b95e9a2ce063?s=128&d=identicon&r=PG&f=1", "display_name": "schneider", "link": "https://stackoverflow.com/users/6111541/schneider"}, "edited": false, "score": 0, "creation_date": 1486573723, "post_id": 42119333, "comment_id": 71407077, "body": "I did that but the problem persists"}, {"owner": {"reputation": 814, "user_id": 6263041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ir86i.png?s=128&g=1", "display_name": "The Techel", "link": "https://stackoverflow.com/users/6263041/the-techel"}, "edited": false, "score": 0, "creation_date": 1486573998, "post_id": 42119333, "comment_id": 71407265, "body": "Why using MFC? If you want to link the CRT statically, go to C/C++ -&gt; Code Generation -&gt; change to value of &#39;Runtime Library&#39; from &#39;Multithreaded (Debug) DLL&#39; to &#39;Multithreaded (Debug)&#39;"}], "tags": [], "owner": {"reputation": 80, "user_id": 3295305, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/782891061/picture?type=large", "display_name": "Kousha Nejad", "link": "https://stackoverflow.com/users/3295305/kousha-nejad"}, "is_accepted": false, "score": 0, "last_activity_date": 1486573444, "creation_date": 1486573444, "answer_id": 42119333, "question_id": 42118586, "link": "https://stackoverflow.com/questions/42118586/build-c-program-for-windows/42119333#42119333", "title": "Build c++ program for windows", "body": "<p>As tom mentioned, you seem to have a problem with redistributable package, here's how you can fix it:</p>\n\n<ul>\n<li>Right click on your project in solution explorer</li>\n<li>Go to properties</li>\n<li>Under \"Configuration Properties\", select \"General\"</li>\n<li>Look for \"Use of MFC\" and set it to \"Use MFC in a static library\"</li>\n<li>Rebuild code</li>\n</ul>\n\n<p>*It's recommended to do that for all your configurations (on the top-left corner, select \"Configuration\" as \"All configurations\"\n<a href=\"https://i.stack.imgur.com/Lccw0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lccw0.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 6111541, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e67fbf2b6c66bab87ed1b95e9a2ce063?s=128&d=identicon&r=PG&f=1", "display_name": "schneider", "link": "https://stackoverflow.com/users/6111541/schneider"}, "is_accepted": true, "score": 0, "last_activity_date": 1486576342, "creation_date": 1486576342, "answer_id": 42120252, "question_id": 42118586, "link": "https://stackoverflow.com/questions/42118586/build-c-program-for-windows/42120252#42120252", "title": "Build c++ program for windows", "body": "<p>Solved!\nin the directory with the executable were required:</p>\n\n<pre><code>msvcp140d.dll\nvcruntime140d.dll\nucrtbased.dll\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6111541, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e67fbf2b6c66bab87ed1b95e9a2ce063?s=128&d=identicon&r=PG&f=1", "display_name": "schneider", "link": "https://stackoverflow.com/users/6111541/schneider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 42120252, "answer_count": 2, "score": -1, "last_activity_date": 1486576342, "creation_date": 1486571443, "question_id": 42118586, "link": "https://stackoverflow.com/questions/42118586/build-c-program-for-windows", "title": "Build c++ program for windows", "body": "<p>I have troubles running an executable compiled from a c++ source with visual studio 2015 on a recently installed windows(without installed visual) studio .</p>\n\n<p>When I run it i receive this error:\n-the procedure entry point terminate could not be located in the dynamic link library -path-\\VCRUNTIME140.dll (the dll and the executable are in the same directory)</p>\n"}, {"tags": ["c++", "token"], "answers": [{"comments": [{"owner": {"reputation": 1544, "user_id": 1928597, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oArrE.jpg?s=128&g=1", "display_name": "Jishan", "link": "https://stackoverflow.com/users/1928597/jishan"}, "edited": false, "score": 0, "creation_date": 1486572057, "post_id": 42118709, "comment_id": 71405941, "body": "Just so that I understand correctly, after I use substring to separate the number portion should I just look for comma and extract the 2 numerals? Any fast way to do this?"}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1486571751, "creation_date": 1486571751, "answer_id": 42118709, "question_id": 42118429, "link": "https://stackoverflow.com/questions/42118429/parse-simple-syntax-with-only-keyword-and-number-extraction/42118709#42118709", "title": "Parse Simple Syntax with only Keyword and Number Extraction", "body": "<p>The logic here is upside down. Instead of passing a token name to <code>Keyword</code> (which needs a better name; <code>parse_file</code> might be more descriptive), call <code>Keyword</code> with just an <code>istream&amp;</code>. Let <code>Keyword</code> do the work of figuring out which tokens are present:</p>\n\n<pre><code>while (get_line(stream, line)) {\n    std::string::size_type pos = line.find('(');\n    if (pos == std::string::npos)\n        throw file_read_failure(); // user-defined exception type\n    std::string token = line.substr(0, pos);\n    if (token == \"room\")\n        parse_room(line.substr(pos));\n    else if (token == \"table\")\n        parse_table(line.substr(pos));\n    // et cetera\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1544, "user_id": 1928597, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oArrE.jpg?s=128&g=1", "display_name": "Jishan", "link": "https://stackoverflow.com/users/1928597/jishan"}, "edited": false, "score": 1, "creation_date": 1486575443, "post_id": 42119076, "comment_id": 71408084, "body": "Brilliant. This was something I was looking for!"}], "tags": [], "owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "is_accepted": true, "score": 1, "last_activity_date": 1486572727, "creation_date": 1486572727, "answer_id": 42119076, "question_id": 42118429, "link": "https://stackoverflow.com/questions/42118429/parse-simple-syntax-with-only-keyword-and-number-extraction/42119076#42119076", "title": "Parse Simple Syntax with only Keyword and Number Extraction", "body": "<p>An easy, simple and nice way, <code>std::regex_iterator</code>  </p>\n\n<pre><code>std::basic_regex&lt; char &gt; regex ( \"\\\\d+\" );\nstd::string string = \"place(closet, 1, 4)\";\n\nstd::regex_iterator&lt; std::string::iterator &gt; first ( string.begin(), string.end(), regex );\nstd::regex_iterator&lt; std::string::iterator &gt; last;\n\nwhile( first != last ){ std::cout &lt;&lt; first-&gt;str() &lt;&lt; ' '; ++first; }  \n</code></pre>\n\n<p><strong>output</strong>  </p>\n\n<p><code>1 4</code>  </p>\n\n<hr>\n\n<p>Instead of <code>string</code> that I wrote you can pass your string. that's it.</p>\n"}, {"tags": [], "owner": {"reputation": 80, "user_id": 3295305, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/782891061/picture?type=large", "display_name": "Kousha Nejad", "link": "https://stackoverflow.com/users/3295305/kousha-nejad"}, "is_accepted": false, "score": 1, "last_activity_date": 1486576050, "creation_date": 1486576050, "answer_id": 42120157, "question_id": 42118429, "link": "https://stackoverflow.com/questions/42118429/parse-simple-syntax-with-only-keyword-and-number-extraction/42120157#42120157", "title": "Parse Simple Syntax with only Keyword and Number Extraction", "body": "<p>try this code</p>\n\n<pre><code>void Keyword(ifstream &amp; stream, string token) {\n    string line;\n\n    int dimension1;\n    int dimension2;\n    string item_in_room;\n\n    while (getline(stream, line,'(')) {\n\n        if ( !line.compare(\"room\") )\n        {\n            getline(stream, line,',');\n            dimension1 = atoi( line.c_str() );\n\n            getline(stream, line,')');\n            dimension2 = atoi( line.c_str() );\n\n            cout &lt;&lt; \"It's a room, dimensions: \" &lt;&lt; dimension1 &lt;&lt; \" , \" &lt;&lt; dimension2 &lt;&lt; endl;\n        }\n\n        if ( !line.compare(\"place\") )\n        {\n            getline(stream, item_in_room,',');\n\n            getline(stream, line,',');\n            dimension1 = atoi( line.c_str() );\n\n            getline(stream, line,')');\n            dimension2 = atoi( line.c_str() );\n\n            cout &lt;&lt; \"It's a \" &lt;&lt; item_in_room &lt;&lt; \" dimensions: \" &lt;&lt; dimension1 &lt;&lt; \" , \" &lt;&lt; dimension2 &lt;&lt; endl;\n        }\n\n        //read the rest of the line, just to get to a new new\n        getline(stream, line);\n    }\n    cout &lt;&lt; token &lt;&lt; \" Not Found!\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>It works and here is the output:</p>\n\n<p>It's a room, dimensions: 800 , 400</p>\n\n<p>It's a desk dimensions: 5 , 6</p>\n\n<p>It's a chair dimensions: 8 , 5</p>\n\n<p>It's a bed dimensions: 6 , 6</p>\n\n<p>It's a closet dimensions: 1 , 4</p>\n\n<p>room Not Found!</p>\n\n<p>Press any key to continue . . .</p>\n"}], "owner": {"reputation": 1544, "user_id": 1928597, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oArrE.jpg?s=128&g=1", "display_name": "Jishan", "link": "https://stackoverflow.com/users/1928597/jishan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 42119076, "answer_count": 3, "score": 1, "last_activity_date": 1486576050, "creation_date": 1486571031, "question_id": 42118429, "link": "https://stackoverflow.com/questions/42118429/parse-simple-syntax-with-only-keyword-and-number-extraction", "title": "Parse Simple Syntax with only Keyword and Number Extraction", "body": "<p>So I have a simple carriage-return separated file that reads:</p>\n\n<pre><code>room(800,400)\nplace(desk, 5, 6)\nplace(chair, 8, 5)\nplace(bed, 6, 6)\nplace(closet, 1, 4)\n</code></pre>\n\n<p>I am trying to store the occurrence of each keywords (desk, chair, bed and closet) and the related x, y and store somewhere (not important!) and extract the <code>room</code> dimensions and again store somewhere. My code looks like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namepace std;\n\nvoid Keyword(ifstream &amp; stream, string token) {\n    string line;\n    while (getline(stream, line)) {\n        if (line.find(token) != string::npos) {\n            cout &lt;&lt; line &lt;&lt; endl;\n\n            if(token == \"room\") {\n                //store the numbers and string to somewhere\n            }\n\n            if (token == \"table\") {\n                //store the numbers and string to somewhere\n            }\n        }\n    }\n    cout &lt;&lt; token &lt;&lt; \" Not Found!\" &lt;&lt; endl;\n}\n\nint main()\n{\n\n    // Shape Grammar Parser  \n    ifstream infile(\"shape.dat\");\n\n    Keyword(infile, \"room\");    \n    return 0;\n}\n</code></pre>\n\n<p>What I am trying to do is, when the parser sees <code>place(chair, 8, 5)</code> it stores in a data structure <code>chair, 8, 5</code>, or when it sees room it extracts <code>room, 800, 400</code>. </p>\n\n<p>However the above implementation is broken as with this implementation I can only extract chair and not the related numbers. How can that be done? I am totally inexperienced with regular expressions so I did not try it.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1486571199, "post_id": 42118373, "comment_id": 71405292, "body": "Should be closed as dupe of whatever the current &quot;most vexing parse&quot;-question is."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1486571636, "post_id": 42118373, "comment_id": 71405620, "body": "So we all agree it&#39;s a duplicate - but we can&#39;t agree what of :-)"}], "owner": {"reputation": 3, "user_id": 7149332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2031fa6135b6b53d160906ab2fa7ad99?s=128&d=identicon&r=PG&f=1", "display_name": "Sakebi", "link": "https://stackoverflow.com/users/7149332/sakebi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "closed_date": 1486571639, "answer_count": 0, "score": 0, "last_activity_date": 1486570886, "creation_date": 1486570886, "question_id": 42118373, "link": "https://stackoverflow.com/questions/42118373/why-does-the-compiler-refer-to-a-non-function-declaration-as-one-c", "closed_reason": "Duplicate", "title": "why does the compiler refer to a non-function declaration as one? c++", "body": "<p>The following code is quite stupid and has no purpose at all (I tried to play with move (&amp;&amp;) but that turned out. Right now, this code has nothing to do with move, and my question is not related to move).</p>\n\n<pre><code>class X\n{\npublic:\n    X(int num) : m_a(num) { std::cout &lt;&lt; \"ctor\" &lt;&lt; std::endl; }\n    X(const X&amp; other) : m_a(other.m_a) {std::cout &lt;&lt; \"CCTOR\" &lt;&lt; std::endl; }\n\n    int m_a;\n};\n\n\nint main()\n{\n    int i = 11;\n    X x1(X(i));\n\n    std::cout &lt;&lt; &amp;i &lt;&lt; \" \" &lt;&lt; x1.m_a &lt;&lt; std::endl;\n    std::cout &lt;&lt; typeid(x1).name() &lt;&lt; std::endl;\n\nreturn(0);\n}\n</code></pre>\n\n<p>commenting out the first print, the output is:</p>\n\n<pre><code>F1XS_E\n</code></pre>\n\n<p>F represents a function. Not commenting out the first print results in a linking error:</p>\n\n<pre><code>request for member \u2018m_a\u2019 in \u2018x1\u2019, which is of non-class type \u2018X(X)\u2019\n</code></pre>\n\n<p>What this code is expected to do is: Create a temporary X, using the i as parameter, and calling the copy constructor for x1. I am well aware that the compiler can optimize it, and my expectations are not interesting lol\nAnyway, that is not my problem. For reasons I can't really explain (and that's my question), the compiler refers to this line:</p>\n\n<pre><code>X x1(X(i));\n</code></pre>\n\n<p>as a function declaration:</p>\n\n<pre><code>X x1(X i); // function x1, receives X by value (parameter name: i) and returns X by value\n</code></pre>\n\n<p>Why is that?\nif I changed the i to a literal integer (X x1(X(11));) - it wouldn't complain. But why does the compiler think the i is a function parameter, and not a variable?\nI KNOW it is stupid, and I can simply write X x1(i), I just can't really understand why it'd complain when I write it the way I did. Or could it be the reason? This is a stupid way of writing so even the compiler thinks we can't be that stupid?</p>\n\n<p>It works just fine using { } (X x1 {X(i)};)</p>\n\n<p>Side note: I just found out function parameters can be written in parentheses that will be ignored. So void foo(int (((num)))); IS a valid function declaration that receives the parameters num, which in an int.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "netbeans", "remote-access"], "answers": [{"tags": [], "owner": {"reputation": 421, "user_id": 2466685, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/549e70e71acf1a2a9020737ec4009667?s=128&d=identicon&r=PG", "display_name": "Andrey Pro", "link": "https://stackoverflow.com/users/2466685/andrey-pro"}, "is_accepted": true, "score": 0, "last_activity_date": 1492177850, "creation_date": 1492177850, "answer_id": 43412929, "question_id": 42118291, "link": "https://stackoverflow.com/questions/42118291/netbeans-no-longer-downloads-output-files-from-remote-build-host/43412929#43412929", "title": "Netbeans no longer downloads output files from remote build host", "body": "<p>Turned out to be a bug in Netbeans, that prevented the downloading of changed files if the path contained a space. It was fixed in a recent patch.</p>\n"}], "owner": {"reputation": 421, "user_id": 2466685, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/549e70e71acf1a2a9020737ec4009667?s=128&d=identicon&r=PG", "display_name": "Andrey Pro", "link": "https://stackoverflow.com/users/2466685/andrey-pro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 43412929, "answer_count": 1, "score": 0, "last_activity_date": 1492177850, "creation_date": 1486570639, "last_edit_date": 1592644375, "question_id": 42118291, "link": "https://stackoverflow.com/questions/42118291/netbeans-no-longer-downloads-output-files-from-remote-build-host", "title": "Netbeans no longer downloads output files from remote build host", "body": "<p>Netbeans 8.2 under Windows is used to develop applications for the Raspberry Pi, including Qt based, wherein the Raspberry Pi serves as the remote build host.</p>\n<p>According to the <a href=\"https://netbeans.org/kb/docs/cnd/remotedev-tutorial.html#tips\" rel=\"nofollow noreferrer\">tutorial</a></p>\n<blockquote>\n<p>If building your project remotely compiles libraries or generates\nother files in addition to the main build product, the IDE prompts you\nto download the files to the local system. You can select which\nchanged files to download.</p>\n</blockquote>\n<p>The problem that this no longer happens: it neither downloads anything nor prompts me. I can't figure out why. Please help me to restore this functionality.</p>\n"}, {"tags": ["c++", "vba", "excel"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 7535172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a97fab3e6fdd4a8304afc041194a641?s=128&d=identicon&r=PG", "display_name": "Tulio Carnelossi", "link": "https://stackoverflow.com/users/7535172/tulio-carnelossi"}, "edited": false, "score": 0, "creation_date": 1486575610, "post_id": 42118574, "comment_id": 71408171, "body": "Just tried it and it doesn&#39;t compile,any suggestions?"}], "tags": [], "owner": {"reputation": 164, "user_id": 2988309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/480c1eeee8de1c80709c57d180eb89dd?s=128&d=identicon&r=PG&f=1", "display_name": "IR_IR", "link": "https://stackoverflow.com/users/2988309/ir-ir"}, "is_accepted": false, "score": 0, "last_activity_date": 1486571421, "creation_date": 1486571421, "answer_id": 42118574, "question_id": 42118272, "link": "https://stackoverflow.com/questions/42118272/pass-a-range-from-vba-to-c/42118574#42118574", "title": "Pass a Range from VBA to C++", "body": "<p>Did you try change </p>\n\n<blockquote>\n  <p>RangePtr</p>\n</blockquote>\n\n<p>to</p>\n\n<blockquote>\n  <p>Range</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 7535172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a97fab3e6fdd4a8304afc041194a641?s=128&d=identicon&r=PG", "display_name": "Tulio Carnelossi", "link": "https://stackoverflow.com/users/7535172/tulio-carnelossi"}, "is_accepted": true, "score": 2, "last_activity_date": 1486639149, "last_edit_date": 1486639149, "creation_date": 1486603577, "answer_id": 42126680, "question_id": 42118272, "link": "https://stackoverflow.com/questions/42118272/pass-a-range-from-vba-to-c/42126680#42126680", "title": "Pass a Range from VBA to C++", "body": "<p>I'm not sure if this is exactly the same as the Excel::RangePtr but it works the same purposes, I'de appreciate some comments.</p>\n\n<pre><code>#include &lt;OAIdl.h&gt; // for VARIANT, BSTR etc\n\ndouble __stdcall RangeTest(VARIANT * x)\n{\n\nint cols = 0.0;\nint rows = 0.0;\n\nrows = x-&gt;parray[0].rgsabound[1].cElements;\ncols=x-&gt;parray[0].rgsabound[0].cElements;\n\nofstream outputFile(\"outputFile.txt\");\nlong c= 0;\n\nfor (int i = 0; i &lt; rows; i++)\n    {\n\n     for (int j = 0; j &lt; cols ;j++)\n       {\n\n         outputFile &lt;&lt; ((((tagVARIANT *)(*(x-&gt;parray)).pvData))[i + j*rows]).dblVal &lt;&lt; \" \";\n\n       }\n\n        outputFile &lt;&lt; endl;\n\n     }\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 151, "user_id": 7535172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a97fab3e6fdd4a8304afc041194a641?s=128&d=identicon&r=PG", "display_name": "Tulio Carnelossi", "link": "https://stackoverflow.com/users/7535172/tulio-carnelossi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 569, "favorite_count": 0, "accepted_answer_id": 42126680, "answer_count": 2, "score": 1, "last_activity_date": 1578433004, "creation_date": 1486570601, "question_id": 42118272, "link": "https://stackoverflow.com/questions/42118272/pass-a-range-from-vba-to-c", "title": "Pass a Range from VBA to C++", "body": "<p>I'm trying to send a Range from a VBA to a VSTO c++ DLL. The code below works fine if I'm using Excel 2010 64 bits but I get an error when I use it for excel 2016, any one knows how to solve it?</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include \"ExcelImports.cpp\"\n#include &lt;vector&gt;\n\nusing namespace std;\nofstream outputFile(\"outputFile.txt\");\n\ndouble __stdcall RangeTest(Excel::RangePtr &amp;pRange, long N1, long N2 )\n{\nlong sum = 0;\n\nfor (int i = 1; i &lt;= N1; i++)\n{\n    for (int j = 1; j &lt;= N2; j++)\n    {\n\n        outputFile &lt;&lt; (((Excel::RangePtr)pRange-&gt;Item[i][j])-&gt;Value).dblVal &lt;&lt; \" \";\n\n\n    }\n\n    outputFile &lt;&lt; endl;\n\n}\n return 0;\n}\n</code></pre>\n\n<p>and the Other cpp file</p>\n\n<pre><code>#ifndef ExcelImports_cpp\n#define ExcelImports_cpp\n\n\n#import \"C:\\Program Files\\Common Files\\Microsoft Shared\\OFFICE14\\MSO.dll\" rename (\"DocumentProperties\",\"DocumentsPropertiesXL\") rename(\"RGB\",\"RGBXL\")\n#import \"C:\\Program Files\\Common Files\\Microsoft Shared\\VBA\\VBE6EXT.OLB\" \n#import \"C:\\Program Files\\Microsoft Office\\Office14\\EXCEL.EXE\" rename (\"DialogBox\",\"DialogBoxXL\") rename(\"RGB\",\"RGBXL\") rename (\"DocumentProperties\",\"DocumentsPropertiesXL\") rename (\"ReplaceText\",\"ReplaceTextXL\") rename (\"CopyFile\",\"CopyFileXL\") no_dual_interfaces\n\n\n#endif\n</code></pre>\n\n<p>the defFile</p>\n\n<pre><code>Library \"Teste\"\nEXPORTS\nRangeTest\n</code></pre>\n"}, {"tags": ["c++", "templates", "gdb"], "answers": [{"tags": [], "owner": {"reputation": 499, "user_id": 2292816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/929420f79757be58a48b5128870d5d83?s=128&d=identicon&r=PG", "display_name": "Kunal Tyagi", "link": "https://stackoverflow.com/users/2292816/kunal-tyagi"}, "is_accepted": true, "score": 2, "last_activity_date": 1487040703, "creation_date": 1487040703, "answer_id": 42217051, "question_id": 42118224, "link": "https://stackoverflow.com/questions/42118224/how-to-hide-typeinfo-in-gdb-output/42217051#42217051", "title": "How to hide typeinfo in gdb output", "body": "<p>The best method would be to use gdb plugins. I don't know of a native setting in gdb (except frame filters) that can achieve the desired results.</p>\n\n<p>Do look into <a href=\"https://github.com/tromey/gdb-helpers\" rel=\"nofollow noreferrer\">https://github.com/tromey/gdb-helpers</a>, more specifically <a href=\"https://github.com/philtweir/gdb-pretty-frame-cpp\" rel=\"nofollow noreferrer\">https://github.com/philtweir/gdb-pretty-frame-cpp</a>. I have used <strong>gdb-pretty-frame</strong> with custom template heavy code.</p>\n"}], "owner": {"reputation": 1688, "user_id": 7042011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7adfcdad8d36cc14d0c75dada3b301e2?s=128&d=identicon&r=PG&f=1", "display_name": "OutOfBound", "link": "https://stackoverflow.com/users/7042011/outofbound"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 42217051, "answer_count": 1, "score": 4, "last_activity_date": 1487040703, "creation_date": 1486570481, "question_id": 42118224, "link": "https://stackoverflow.com/questions/42118224/how-to-hide-typeinfo-in-gdb-output", "title": "How to hide typeinfo in gdb output", "body": "<p>i am debugging heavy templated code and looking for a way to hide the type information in the backtrace and while printing variables.\nIt would be even better if you could hide only the template arguments, since they make the backtrace very hard to read.</p>\n\n<p>Thanks for your support.</p>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 2, "creation_date": 1486570449, "post_id": 42118158, "comment_id": 71404722, "body": "This looks like an error though, not a warning. Why do you want to remove a helpful error log to help debug the error?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1486570809, "post_id": 42118158, "comment_id": 71405001, "body": "You may try to add directory for <code>Object.h</code>  through -system instead of -I that would suppress warnings"}, {"owner": {"reputation": 21, "user_id": 7510113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b895db20960b432b79b782ce573f259?s=128&d=identicon&r=PG&f=1", "display_name": "serega.mpa", "link": "https://stackoverflow.com/users/7510113/serega-mpa"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1486595591, "post_id": 42118158, "comment_id": 71418888, "body": "@Rakete1111 Yes, this look like error but compiles and works fine. I want to hide these notes because I afraid to miss an important warning or note in my own code."}, {"owner": {"reputation": 21, "user_id": 7510113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b895db20960b432b79b782ce573f259?s=128&d=identicon&r=PG&f=1", "display_name": "serega.mpa", "link": "https://stackoverflow.com/users/7510113/serega-mpa"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1486625165, "post_id": 42118158, "comment_id": 71428128, "body": "@Slava Thanks for your participation! Unfortunately, this not working for me. I tried -isystem in gcc options and also include_directories(SYSTEM ...) in cmake. Possible it not working because note is not a warning."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1486647963, "post_id": 42118158, "comment_id": 71442889, "body": "@serega.mpa where did I say <code>-isystem</code> ? Enable verbose mode in camke, it is possible directory for Object.h already included before system"}, {"owner": {"reputation": 21, "user_id": 7510113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b895db20960b432b79b782ce573f259?s=128&d=identicon&r=PG&f=1", "display_name": "serega.mpa", "link": "https://stackoverflow.com/users/7510113/serega-mpa"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1486652107, "post_id": 42118158, "comment_id": 71445889, "body": "@Slava Sorry, I don&#39;t understood your comment correctly, because I read it so fast. What did you mean about -system? I can&#39;t find this option in gcc documentation. ps. In verbose mode -I for directory with Object.h includes after other include- dirs."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1486652298, "post_id": 42118158, "comment_id": 71446039, "body": "@serega.mpa ah sorry, -isystem it is. Is there -isystem with Object.h dir before -I?"}, {"owner": {"reputation": 21, "user_id": 7510113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b895db20960b432b79b782ce573f259?s=128&d=identicon&r=PG&f=1", "display_name": "serega.mpa", "link": "https://stackoverflow.com/users/7510113/serega-mpa"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1486654860, "post_id": 42118158, "comment_id": 71447964, "body": "@Slava Yes, you absolutely right. But note: ... messages continue to appear."}], "answers": [{"tags": [], "owner": {"reputation": 1939, "user_id": 1495323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562b035c4de737014bdde5447893a9ab?s=128&d=identicon&r=PG", "display_name": "driedler", "link": "https://stackoverflow.com/users/1495323/driedler"}, "is_accepted": false, "score": 0, "last_activity_date": 1590758247, "creation_date": 1590758247, "answer_id": 62086915, "question_id": 42118158, "link": "https://stackoverflow.com/questions/42118158/how-to-hide-note-gcc-output-for-external-headers/62086915#62086915", "title": "How to hide &#39;note: ... &#39; gcc output for external headers?", "body": "<p>Taken from here:\n<a href=\"https://unix.stackexchange.com/questions/547567/want-to-turn-off-note-level-messages-in-gcc\">https://unix.stackexchange.com/questions/547567/want-to-turn-off-note-level-messages-in-gcc</a></p>\n\n<p>Adding:</p>\n\n<pre><code>-fcompare-debug-second\n</code></pre>\n\n<p>to the GCC build string worked for me.</p>\n"}], "owner": {"reputation": 21, "user_id": 7510113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b895db20960b432b79b782ce573f259?s=128&d=identicon&r=PG&f=1", "display_name": "serega.mpa", "link": "https://stackoverflow.com/users/7510113/serega-mpa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 485, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1590758247, "creation_date": 1486570308, "question_id": 42118158, "link": "https://stackoverflow.com/questions/42118158/how-to-hide-note-gcc-output-for-external-headers", "title": "How to hide &#39;note: ... &#39; gcc output for external headers?", "body": "<p>I try to compile my testproject with gcc 4.8.5. To exclude a warning messages from third-party code I put all external headers into my header - external.h:</p>\n\n<pre><code>#pragma GCC diagnostic push\n#pragma GCC diagnostic ignored \"-Wall\"\n...\n#include \"Object.h\"\n...\n#pragma GCC diagnostic pop\n</code></pre>\n\n<p>This works fine for warnings, but I see in gcc output many messages like below:</p>\n\n<pre><code>In file included from /home/testuser/testproject/external.h:26:0,\n             from /home/testuser/testproject/main.cpp:14:\n/home/testuser/externallib/Object.h: In instantiation of \u2018int ObjectImpl&lt;T_Class, T_Type, T_Size&gt;::addChild(IObj*, unsigned int) [with T_Class = Shape; ObjType T_Type = (ObjType)12u; unsigned int T_Size = 20u:\n/home/testuser/externallib/Object.h:1618:43:   required from here\n/home/testuser/externallib/Object.h:817:5: note: declarations in dependent base \u2018ObjBase\u2019 are not found by unqualified lookup\n/home/testuser/externallib/Object.h:817:5: note: use \u2018this-&gt;get_Obj\u2019 instead\n</code></pre>\n\n<p>...</p>\n\n<p>Unfortunately, I can't change the third-party code to hide that messages. Could anyone provide a way how to hide 'note:' messages when project builds? This will make my build-logs more clean :). Thanks in advance.</p>\n"}, {"tags": ["c++", "compiler-warnings", "static-analysis"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1486570199, "post_id": 42117909, "comment_id": 71404513, "body": "Consider filing a feature request on both gcc and clang&#39;s bug trackers - trivial situations like this one could probably be detected with additional logic"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 2, "creation_date": 1486570768, "post_id": 42117909, "comment_id": 71404968, "body": "What happens if you remove the first example?  Do clang or Solaris Studio warn about the unitialized variable then?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1486570797, "post_id": 42117909, "comment_id": 71404990, "body": "You may also get better warnings if you crank up the optimization level."}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1486571256, "post_id": 42117909, "comment_id": 71405332, "body": "@MartinBonner: g++-5 detects (1) with <code>-O2</code>, and removing case (1) doesn&#39;t help to make (2) catchable (actually I added case (1) after I&#39;ve noticed that compiler failed to detect (2))"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 7527952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6HPpx.png?s=128&g=1", "display_name": "Mar Tijn", "link": "https://stackoverflow.com/users/7527952/mar-tijn"}, "edited": false, "score": 1, "creation_date": 1486570486, "post_id": 42117993, "comment_id": 71404744, "body": "It indeed would make sense not to warn if it concerns a reference. But this is a const reference. I&#39;d think this would be a situation in which the compiler actually could warn, as there is no way you could initialize an object passed over by a const reference."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 47, "user_id": 7527952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6HPpx.png?s=128&g=1", "display_name": "Mar Tijn", "link": "https://stackoverflow.com/users/7527952/mar-tijn"}, "edited": false, "score": 1, "creation_date": 1486570735, "post_id": 42117993, "comment_id": 71404934, "body": "@MarTijn What if the sole purpose of the function was to take a <code>const *</code> to the object and use it as a map key? You can do this from a <code>const &amp;</code>, and you can do this even from an uninitialised object."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 47, "user_id": 7527952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6HPpx.png?s=128&g=1", "display_name": "Mar Tijn", "link": "https://stackoverflow.com/users/7527952/mar-tijn"}, "edited": false, "score": 0, "creation_date": 1486570837, "post_id": 42117993, "comment_id": 71405031, "body": "@MarTijn: If the function saves the address of the object, then something later can initialize the variable. (Or the function can use the address alone as some sort of unique tag)."}, {"owner": {"reputation": 47, "user_id": 7527952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6HPpx.png?s=128&g=1", "display_name": "Mar Tijn", "link": "https://stackoverflow.com/users/7527952/mar-tijn"}, "edited": false, "score": 0, "creation_date": 1486571054, "post_id": 42117993, "comment_id": 71405180, "body": "Valid points! TBH I never use constructs like this, so a compiler option would perhaps be preferable."}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1486634250, "post_id": 42117993, "comment_id": 71433479, "body": "You point seems valid, but <code>int mymax(int a, int b) { return (a&gt;b)?a:b; }</code> doesn&#39;t help much, case (2) still not covered"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1486634670, "post_id": 42117993, "comment_id": 71433756, "body": "@myaut OK, <i>that&#39;s</i> strange. I would expect the compilers to catch that one."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 12, "last_activity_date": 1486569875, "creation_date": 1486569875, "answer_id": 42117993, "question_id": 42117909, "link": "https://stackoverflow.com/questions/42117909/why-int-a-a-stdmaxa-x-doesnt-emit-uninitialized-warnings/42117993#42117993", "title": "Why int a; a = std::max(a, x) doesn&#39;t emit &quot;uninitialized&quot; warnings", "body": "<p><code>std::max</code> takes its arguments by <code>const &amp;</code>, while the streaming operator <code>&lt;&lt;</code> for <code>int</code>s takes the <code>int</code> by value. Passing an uninitialised object by reference is legal: for example, if the function just takes its address, all is well. Therefore, warning on passing <code>a</code> to <code>std::max</code> could easily be a false positive.</p>\n"}, {"comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1488578759, "post_id": 42589227, "comment_id": 72310755, "body": "&quot;First offense&quot; meaning the first occurrence of a specific warning, right? Not a warning in general?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1488578819, "post_id": 42589227, "comment_id": 72310783, "body": "@QPaysTaxes Yes. Feel free to edit if you can state that more clearly."}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1489157849, "post_id": 42589227, "comment_id": 72562521, "body": "Yeah, I&#39;ve used g++ 5. Thanks for your answer!"}], "tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 3, "last_activity_date": 1488579940, "last_edit_date": 1488579940, "creation_date": 1488578671, "answer_id": 42589227, "question_id": 42117909, "link": "https://stackoverflow.com/questions/42117909/why-int-a-a-stdmaxa-x-doesnt-emit-uninitialized-warnings/42589227#42589227", "title": "Why int a; a = std::max(a, x) doesn&#39;t emit &quot;uninitialized&quot; warnings", "body": "<p>First of all: Both compilers only diagnose the first offense, that is they only report the first uninitialized use of <code>a</code>. So to get a warning for the second one, we need to remove that first line:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    std::vector&lt;int&gt; v{{1, 2, 3}};\n    int a;\n\n    for (const int x : v) {\n        a = std::max(a, x);         // 2\n    }\n\n    std::cout &lt;&lt; a &lt;&lt; std::endl;\n\n    return 0;\n\n}\n</code></pre>\n\n<p>Now we see two unrelated compiler quirks: <strong>clang</strong> does not include <code>-Wconditional-uninitialized</code> in <code>-Wall</code> and <code>-Wextra</code>. If you enable that, you <em>do</em> get a warning at the <code>std::cout</code> because it potentially prints an uninitialized variable.</p>\n\n<p><strong>gcc</strong> on the other hand only tracks uninitialized variables when the optimizer is enabled, probably to speed up compilation of debug builds. With <code>-O2 -Wall</code>, gcc 6 throws a warning in both cases, though without pinpointing the location as exactly as clang does in the second case. (gcc &lt;= 5.3 does not warn about the second case as you observed, so it seems that was implemented recently.)</p>\n\n<p>So TL;DR: You did not invoke your compilers right.</p>\n"}], "owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 42589227, "answer_count": 2, "score": 9, "last_activity_date": 1488579940, "creation_date": 1486569636, "question_id": 42117909, "link": "https://stackoverflow.com/questions/42117909/why-int-a-a-stdmaxa-x-doesnt-emit-uninitialized-warnings", "title": "Why int a; a = std::max(a, x) doesn&#39;t emit &quot;uninitialized&quot; warnings", "body": "<p>Consider the following code:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    std::vector&lt;int&gt; v{{1, 2, 3}};\n    int a;\n\n    std::cout &lt;&lt; a &lt;&lt; std::endl;    // 1\n\n    for (const int x : v) {\n        a = std::max(a, x);         // 2\n    }\n\n    std::cout &lt;&lt; a &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>As modern compilers grew and now keep a watchful eye over dumb programmer mistakes, they track unitialized variables. This C++ code however, confuses them. So far, I get following results:</p>\n\n<pre><code>                        (1)      (2)\ng++ 5.3.1\nclang++ 3.7              \u2714\nSolaris Studio 12.5      \u2714\n</code></pre>\n\n<p>As you can see, CLang and solstudio can detect only case (1) and ignore case (2), while g++ is ignoring both. Is there a complication to detect it in case (2)? Why g++ is so bad at this?</p>\n\n<p>Compiler options I used:</p>\n\n<pre><code>$ g++-5 -std=c++11 -Wall -Wpedantic -pedantic -Wextra \\\n         -Wuninitialized -Wmaybe-uninitialized aisa.cpp\n$ clang++ -std=c++11 -Wall -Wpedantic -pedantic -Wextra -Wuninitialized aisa.cpp\n$ CC -std=c++11 -xprevise aisa.cpp\n</code></pre>\n"}, {"tags": ["c++", "std", "multimap"], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 5931589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93c0485d6112249c93baa2b16fd741b7?s=128&d=identicon&r=PG&f=1", "display_name": "emadalamoudi", "link": "https://stackoverflow.com/users/5931589/emadalamoudi"}, "edited": false, "score": 0, "creation_date": 1486570610, "post_id": 42118155, "comment_id": 71404847, "body": "I have spent a long time searching for that documentation :(. Thanks a lot @quentin."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 317, "user_id": 5931589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93c0485d6112249c93baa2b16fd741b7?s=128&d=identicon&r=PG&f=1", "display_name": "emadalamoudi", "link": "https://stackoverflow.com/users/5931589/emadalamoudi"}, "edited": false, "score": 0, "creation_date": 1486570676, "post_id": 42118155, "comment_id": 71404892, "body": "@emadalamoudi hold onto it then -- the search function is a bit broken, but the content is extremely useful."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 2, "last_activity_date": 1486570303, "creation_date": 1486570303, "answer_id": 42118155, "question_id": 42117881, "link": "https://stackoverflow.com/questions/42117881/store-a-group-of-elements-form-one-multimap-to-another-multimap/42118155#42118155", "title": "Store a group of elements form one multimap to another multimap", "body": "<p>Well, <a href=\"http://en.cppreference.com/w/cpp/container/multimap/equal_range\" rel=\"nofollow noreferrer\">the documentation</a> has all we need:</p>\n\n<pre><code>// Retrieve the range of values with key 'z'\nauto r = mymm.equal_range('z');\n\n// Construct the new multimap from that range\nstd::multimap&lt;char,int&gt; mymm2{r.first, r.second};\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 5931589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93c0485d6112249c93baa2b16fd741b7?s=128&d=identicon&r=PG&f=1", "display_name": "emadalamoudi", "link": "https://stackoverflow.com/users/5931589/emadalamoudi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 42118155, "answer_count": 1, "score": 0, "last_activity_date": 1486570303, "creation_date": 1486569581, "question_id": 42117881, "link": "https://stackoverflow.com/questions/42117881/store-a-group-of-elements-form-one-multimap-to-another-multimap", "title": "Store a group of elements form one multimap to another multimap", "body": "<p>let's suppose that I have this multimap</p>\n\n<pre><code>std::multimap&lt;char,int&gt; mymm;\n\nmymm.insert (std::make_pair('x',10));\nmymm.insert (std::make_pair('y',20));\nmymm.insert (std::make_pair('z',30));\nmymm.insert (std::make_pair('z',40));\n</code></pre>\n\n<p>Then, I want to find all element that has a specific key \"z\" in <code>mymm</code> to be stored in on another multimap <code>std::multimap&lt;int,int&gt; mymm2;</code> So the element inside <code>mymm2</code> would be:</p>\n\n<pre><code>keys values\nz    30\nz    40\n</code></pre>\n\n<p>how I can do such a thing.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "pointers", "reference"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1486569548, "post_id": 42117793, "comment_id": 71404069, "body": "1-3 make it kind of useless to declare B as private in the first place. Once you return a non-const reference you can make the member public as well."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1486569578, "post_id": 42117793, "comment_id": 71404086, "body": "Regarding 1., raw owning pointers are to be prohibited anyway, so returning <code>A*</code> already means &quot;don&#39;t <code>delete</code> me&quot;."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 1, "creation_date": 1486569644, "post_id": 42117793, "comment_id": 71404134, "body": "Can you do an example? I can only agree with tobi303. If you don&#39;t want to encapsulate something then don&#39;t. Depending on the context, you might think about setting something as a friend instead."}, {"owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1486569721, "post_id": 42117793, "comment_id": 71404192, "body": "@tobi303 Not really. Say, I want to log access to this member."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1486569746, "post_id": 42117793, "comment_id": 71404207, "body": "When I first read about &quot;why getters are evil&quot; (dont find the link atm) I was a bit shocked, but after a while it made sense. Any how, if you dont want to make a copy, then writing a getter method is most likely not what you should do."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1486569871, "post_id": 42117793, "comment_id": 71404285, "body": "@sigil If it is about logging access, consider this: As soon as some other source has a direct reference, it is able to give it away. So the responsibility of logging can&#39;t be secured."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1486569998, "post_id": 42117793, "comment_id": 71404374, "body": "@tobi303 That article is more about naming... so not really addressing the problem here. Nevertheless I agree that using more meaningful verbs for functions is definitely better. Thanks for the link though."}, {"owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1486570139, "post_id": 42117793, "comment_id": 71404481, "body": "@Quentin &quot;Regarding 1., raw owning pointers are to be prohibited anyway, so returning A* already means &quot;don&#39;t delete me&quot;.&quot; Could you please provide a link for this? Such a change would break an unimaginable amount of code."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 1, "creation_date": 1486570272, "post_id": 42117793, "comment_id": 71404581, "body": "I would change the design to eliminate the need for an accessor. Tell, don&#39;t ask."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 2, "creation_date": 1486570309, "post_id": 42117793, "comment_id": 71404610, "body": "@sigil: it&#39;s not an enforced change, but it&#39;s a modern guideline that should be <i>almost</i> <b>always</b> followed. Use smart pointers for ownership, never raw pointers."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1486570343, "post_id": 42117793, "comment_id": 71404643, "body": "@SimonKraemer oh sorry. To be honest I didnt read it before posting it here ;). I was more thinking in the line of: &quot;provide the interface the clients needs to make the class do its job instead of providing getters so that clients can access the internals to do the job&quot;. I am sure there are articles out there about that, just dont find it anymore"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 1, "creation_date": 1486570541, "post_id": 42117793, "comment_id": 71404789, "body": "There is even a rule: <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#Rh-get\" rel=\"nofollow noreferrer\">github.com/isocpp/CppCoreGuidelines/blob/master/&hellip;</a>"}, {"owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "reply_to_user": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1486570781, "post_id": 42117793, "comment_id": 71404979, "body": "@Rob K &quot;I would change the design to eliminate the need for an accessor. Tell, don&#39;t ask.&quot; The only way I can imagine for this would be to wrap up all <code>A</code>&#39;s public functions in <code>B</code>. Which, in my case, amounts to maybe 100 function declarations from 7 layers of inheritance. No can do."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1486573862, "post_id": 42117793, "comment_id": 71407180, "body": "How about wrapping your member in a std::shared_ptr and return a std::weak_ptr version of that? Shouldn&#39;t this solve most of your problems?"}, {"owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1486582055, "post_id": 42117793, "comment_id": 71411877, "body": "@Simon Kraemer &quot;How about wrapping your member in a std::shared_ptr and return a std::weak_ptr version of that? Shouldn&#39;t this solve most of your problems?&quot; It certainly would. However, I&#39;d prefer to avoid holding <code>B::mA</code> by pointer here - it adds the costs of allocation/deallocation for basically no reason."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1486569968, "post_id": 42117965, "comment_id": 71404359, "body": "why bother to write a getter that returns a reference when you get (almost) he same effect with a public member (with much less writing)? Not trolling, but really interested to know why ;)"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1486570054, "post_id": 42117965, "comment_id": 71404418, "body": "@tobi303: no real reason - my answer starts from assumption that OP is going to write a getter. The title of the question is in fact: <i>&quot;What type should a get function for a member held by value have?&quot;</i>, so I automatically excluded the possibility of not using a getter as it is out of the scope of the question."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1486570215, "post_id": 42117965, "comment_id": 71404524, "body": "I think the crucial point is that OP wants to avoid the copy. I am just missing a mentioning of <code>const</code> when the question may seem like asking for getter in the general case. Nevermind, maybe I am just too pedantic."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1486570245, "post_id": 42117965, "comment_id": 71404553, "body": "@tobi303 One advantage I could think of would be hiding the implementation details from the developer/user of the class. Let&#39;s say you decide to move <code>mA</code> into a struct and use the struct as a member of <code>B</code> - Using a getter you will only have to change the function itself. Or when using interfaces..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1486570534, "post_id": 42117965, "comment_id": 71404778, "body": "@SimonKraemer nice example, I am convinced ;)"}, {"owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "edited": false, "score": 0, "creation_date": 1486572166, "post_id": 42117965, "comment_id": 71406007, "body": "@Vittorio Romeo I&#39;m experimenting with <code>std::reference_wrapper</code> here and it does not appear to prohibit copying. This example prints <code>0</code>, which means that <code>av</code> is a copy: <a href=\"http://ideone.com/7kWWt5\" rel=\"nofollow noreferrer\">ideone.com/7kWWt5</a>"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "edited": false, "score": 0, "creation_date": 1486572784, "post_id": 42117965, "comment_id": 71406425, "body": "@sigil yes, if you explicitly say <code>A a = ...</code> it won&#39;t, but if you say <code>auto a = ...</code> it will. In the first case the user is explicitly trying to make a copy, the second one could be an accident. Reference wrapper is implicitly convertible to <code>A&amp;</code>. Consider making your own wrapper that isn&#39;t to avoid the behaviour you posted."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1486572871, "post_id": 42117965, "comment_id": 71406481, "body": "@tobi303: The advantages are rather obvious: implementation hiding.  A reference-returning getter does not explose the fact that the returned  lvalue is a member of the object that provides the getter. With public field that fact is immediately exposed. With public field you immediately see that the lifetime of the field is tied to the lifetime of the owning object. With the getter don&#39;t see anything like that."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 4, "last_activity_date": 1486572868, "last_edit_date": 1486572868, "creation_date": 1486569809, "answer_id": 42117965, "question_id": 42117793, "link": "https://stackoverflow.com/questions/42117793/what-type-should-a-get-function-for-a-member-held-by-value-have/42117965#42117965", "title": "What type should a get function for a member held by value have?", "body": "<p>I would recommend returning <code>A&amp;</code> - the user of the method can indeed misuse it, but that's true for pretty much everything in C++, and returning a reference to something is idiomatic.</p>\n\n<p>Nevertheless, if you want to make it harder <em>(but still not impossible)</em> for the client to misuse your getter, consider returning an <a href=\"http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper\" rel=\"nofollow noreferrer\"><code>std::reference_wrapper&lt;A&gt;</code></a>, which makes it more difficult to make accidental copies (*):</p>\n\n<pre><code>std::reference_wrapper&lt;A&gt; a = some_b.get_a();\nauto b = a; // doesn't copy `A` - it copies its address\nA c = a; // copies, because `a` is implicitly convertible to `A&amp;`\n</code></pre>\n\n<p>This approach has the drawback that <code>std::reference_wrapper::get()</code> must be used to access <code>A</code>'s members <em>(as we still do not have an overloadable <code>operator.</code>)</em>.</p>\n\n<hr>\n\n<p><strong>(*)</strong>: making an accidental copy is the least of your issues. The user could retain the reference to <code>some_b.mA</code> even after <code>some_b</code> dies, creating a <em>dangling reference</em>! This sort of mistake is what Rust catches at compile-time thanks to its <em>borrow checker</em>.</p>\n\n<p>If have a very good reason to make the above situation very hard <em>(but still not impossible!)</em>, you could use an higher-order function instead of a getter:</p>\n\n<pre><code>class A { /* */ };\n\nclass B {\nprivate:\n    A mA;\n\npublic:\n    template &lt;typename TF&gt;\n    void mutate_a(TF&amp;&amp; f) \n    { \n        // &lt;`static_assert` that `f` takes `A&amp;` here&gt;\n        f(mA); \n    }\n};\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>B some_b;\nsome_b.mutate_a([](A&amp; a)\n{\n    // &lt;do something with `a` here&gt;\n});\n</code></pre>\n\n<p>As you can see it is harder to take <code>a</code> outside of the lambda, but the syntactical overhead is only worth it in very particular situations. My recommendation of returning <code>A&amp;</code> and \"trusting the user\" still stands.</p>\n"}], "owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1486572868, "creation_date": 1486569351, "question_id": 42117793, "link": "https://stackoverflow.com/questions/42117793/what-type-should-a-get-function-for-a-member-held-by-value-have", "title": "What type should a get function for a member held by value have?", "body": "<pre><code>class A { /* */ };\n\nclass B {\nprivate:\n    A mA;\n};\n</code></pre>\n\n<p>Assume that we do not want to return <code>B::mA</code> by value here - we want to manipulate exactly the instance inside <code>B</code>, call functions on it, etc. What type should we use for <code>B::getA()</code>? Our options are:</p>\n\n<ol>\n<li><p><code>A*</code>. Can be deleted on caller side or stored past object lifetime.</p></li>\n<li><p><code>A&amp;</code>. Can cause copy creation if caller uses <code>A a = b-&gt;getA()</code> instead of <code>A&amp; a = b-&gt;getA()</code>.</p></li>\n<li><p><code>A&amp;</code> plus <code>explicit A::A(A&amp;)</code>. Suppresses the unintended copy creation but now <code>A</code> depends on <code>B</code>'s implementation details. The issue of having the ref stored past object lifetime stands.</p></li>\n<li><p>Weak pointer. Same storage problem plus lots of confusion - weak pointers are just not for that.</p></li>\n<li><p>Some artificial templated pointer type meant only as a message not to delete or store it. Working but clumsy.</p></li>\n</ol>\n\n<p>Did I miss anything?</p>\n"}, {"tags": ["c++", "serialization", "boost", "graph", "stack-overflow"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 6848057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74204c91f6a8fd134ebd26aff3e7e8e7?s=128&d=identicon&r=PG&f=1", "display_name": "cero", "link": "https://stackoverflow.com/users/6848057/cero"}, "edited": false, "score": 0, "creation_date": 1486632709, "post_id": 42118553, "comment_id": 71432436, "body": "Thank you for your answer. You suggested that, when reading back in, I create dummy nodes which get populated afterwards. How would I fit this into the deserialization process? Is there a possibility to ensure that the new nodes will be created at a predetermined dummy location? Or can I predict, where the nodes will be created?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 149, "user_id": 6848057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74204c91f6a8fd134ebd26aff3e7e8e7?s=128&d=identicon&r=PG&f=1", "display_name": "cero", "link": "https://stackoverflow.com/users/6848057/cero"}, "edited": false, "score": 0, "creation_date": 1486670038, "post_id": 42118553, "comment_id": 71457592, "body": "@cero I&#39;m not familiar with the details of boost serialization, so I don&#39;t know if you could populate your vector with <code>Node *</code> before deserializing or if boost does that all the time.  If that&#39;s the case, then you&#39;ll have to do something like I suggest in the last paragraph, where you keep all the adjacent node indexes, then go back and convert those to pointers when you&#39;re done reading everything in.  If the adjacent nodes are always earlier in &#39;nodes&#39; (so they&#39;ll have been deserialized already) then you can just reference the pointers that are created during the process."}, {"owner": {"reputation": 149, "user_id": 6848057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74204c91f6a8fd134ebd26aff3e7e8e7?s=128&d=identicon&r=PG&f=1", "display_name": "cero", "link": "https://stackoverflow.com/users/6848057/cero"}, "edited": false, "score": 0, "creation_date": 1486685498, "post_id": 42118553, "comment_id": 71464921, "body": "After doing some more research, I suppose this is indeed the only way if I insist on using a data structure based on pointers. In my case I have replaced the vector of pointers by a vector of indices instead of a sophisticated two-way deserialization. Although not completely satisfying, I think your answer is as close as I can get. Thank you. I will mark your answer as accepted."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 1, "last_activity_date": 1486571358, "creation_date": 1486571358, "answer_id": 42118553, "question_id": 42117697, "link": "https://stackoverflow.com/questions/42117697/how-to-prevent-stack-overflow-when-serializing-a-recursive-graph-structure-with/42118553#42118553", "title": "How to prevent stack overflow when serializing a recursive graph structure with boost::serialization?", "body": "<p>Since you already have a vector with pointers to all your nodes, you can serialize the <code>adjacent_nodes</code> vector using indexes instead of serializing the actual node data.</p>\n\n<p>You'll need to convert the <code>this</code> pointer to an index when serializing a node.  This is simplest if you can store the node index in the node, otherwise you'll have to search thru <code>nodes</code> to find the right pointer (this process can be sped up by creating some sort of associative container to map the pointer to the index).</p>\n\n<p>When you need to read in the data, you can create your initial <code>nodes</code> vector filled with pointers to empty/dummy nodes (which will get populated when they are serialized).</p>\n\n<p>If that's not feasible, you can load the node indexes into a temporary array, then go back and populate the pointers once all the nodes have been read in.  But you won't have to seek or re-read any parts of your file.</p>\n"}, {"comments": [{"owner": {"reputation": 811, "user_id": 2784165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kq3T2.jpg?s=128&g=1", "display_name": "Gar", "link": "https://stackoverflow.com/users/2784165/gar"}, "edited": false, "score": 0, "creation_date": 1557404060, "post_id": 56059140, "comment_id": 98758778, "body": "Could you elaborate please ? this looks weird"}], "tags": [], "owner": {"reputation": 1, "user_id": 7715065, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EzdcNPpf-Ew/AAAAAAAAAAI/AAAAAAAAAJg/2mWQv6C_z1A/photo.jpg?sz=128", "display_name": "Nikita", "link": "https://stackoverflow.com/users/7715065/nikita"}, "is_accepted": false, "score": 0, "last_activity_date": 1557407910, "last_edit_date": 1557407910, "creation_date": 1557403807, "answer_id": 56059140, "question_id": 42117697, "link": "https://stackoverflow.com/questions/42117697/how-to-prevent-stack-overflow-when-serializing-a-recursive-graph-structure-with/56059140#56059140", "title": "How to prevent stack overflow when serializing a recursive graph structure with boost::serialization?", "body": "<p>If you do not have any large loops in the graph you can sort the Node vector in the way that the Nodes from the \"<strong>end</strong>\" of the graph appear at the beginning of the vector. </p>\n\n<p>Example:\nlet's say we have:</p>\n\n<pre><code>p1-&gt;p2-&gt;p3-&gt;....-&gt;p1000\n</code></pre>\n\n<p>you will fail if you try to serialize the <code>vector v = {p1, p2, p3, ... , p1000}</code>\nbut it will work with the <code>vector v = {p1000, p999, p998, ... , p1}</code>\nbut you have no chance if you have something like</p>\n\n<pre><code>p1-&gt;p2-&gt;p3-&gt;....-&gt;p1000-&gt;p1 \n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 6848057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74204c91f6a8fd134ebd26aff3e7e8e7?s=128&d=identicon&r=PG&f=1", "display_name": "cero", "link": "https://stackoverflow.com/users/6848057/cero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 42118553, "answer_count": 2, "score": 1, "last_activity_date": 1557407910, "creation_date": 1486569083, "last_edit_date": 1486569421, "question_id": 42117697, "link": "https://stackoverflow.com/questions/42117697/how-to-prevent-stack-overflow-when-serializing-a-recursive-graph-structure-with", "title": "How to prevent stack overflow when serializing a recursive graph structure with boost::serialization?", "body": "<p>I am trying to serialize a large (geometric) graph structure with the boost serialization library.</p>\n\n<p>I store my graph as an adjacency list, that is, my structure is as follows:</p>\n\n<pre><code>class Node {\n  double x,y;\n  std::vector&lt;Node*&gt; adjacent_nodes;\n  ...\n}\n\nclass Graph {\n  std::vector&lt;Node*&gt; nodes;\n  ...\n}\n</code></pre>\n\n<p>Now with > 10k nodes my problem is, that when I start to serialize (save) my graph, it will recursively call the serialization of all of those nodes before returning, since the graph is connected.</p>\n\n<p>To be more precise, when serializing the Graph it will start by serializing the first node in the \"nodes\" vector. While doing so it needs to serialize \"adjacent_nodes\" of the first nodes, where e.g. the second node is contained.</p>\n\n<p>Therefore it needs to serialize the second node before returning the serialization of the first node and so on.</p>\n\n<p>I found <a href=\"http://boost.2283326.n4.nabble.com/boost-serialize-stack-overflow-for-large-problems-td2717338.html\" rel=\"nofollow noreferrer\">this thread</a> from 2010, where someone explained the exact same problem. However, they did not come to a working solution there.</p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>My structure in more detail:</p>\n\n<pre><code>class Node {\n\n    double x,y;\n    std::vector&lt;Node*&gt; adjacent_nodes;\n\npublic:\n\n    inline double get_x() const { return x; }\n    inline double get_y() const { return y; }\n    inline std::vector&lt;Node*&gt; const&amp; get_adjacent_nodes() const { return adjacent_nodes; }\n\n    Node (double x, double y):x(x),y(y) {}\n\n    void add_adjacent(Node* other) {\n        adjacent_nodes.push_back(other);\n    }\n\nprivate:\n\n    Node() {}\n\n  friend class boost::serialization::access;\n  template &lt;class Archive&gt;\n  void serialize(Archive &amp;ar, const unsigned int) {\n    ar &amp; x;\n        ar &amp; y;\n        ar &amp; adjacent_nodes;\n  }\n\n};\n\nclass Simple_graph {\n\nstd::vector&lt;Node*&gt; nodes;\n\nvoid add_edge(int firstIndex, int secondIndex) {\n    nodes[firstIndex]-&gt;add_adjacent(nodes[secondIndex]);\n    nodes[secondIndex]-&gt;add_adjacent(nodes[firstIndex]);\n}\n\npublic:\n\n/* methods to get the distance of points, to read in the nodes, and to generate edges */\n\n~Simple_graph() {\n    for (auto node: nodes) {\n        delete node;\n    }\n}\n\nprivate:\n\n  friend class boost::serialization::access;\n  template &lt;class Archive&gt;\n  void serialize(Archive &amp;ar, const unsigned int) {\n    ar &amp; nodes;\n  }\n\n};\n</code></pre>\n\n<p>Edit: To add some suggestions made in the above mentioned thread, citing Dominique Devienne:</p>\n\n<blockquote>\n  <p>1) save all the nodes <em>without</em> their topology info on a first pass of\n  the vector, thus recording all the \"tracked\" pointers for them, then \n  write the topology info for each, since then you don't \"recurse\", you \n  only write a \"ref\" to an already serialized pointer. </p>\n  \n  <p>2) have the possibility to write a \"weak reference\" to a pointer, \n  which only adds the pointer to the \"tracking\" map with a special flag \n  saying it wasn't \"really\" written yet, such that writing the topology \n  of a node that wasn't yet written is akin to \"forward references\" to \n  those neighboring nodes. Either the node will really be written later \n  on, or it never will, and I suppose serialization should handle that \n  gracefully. </p>\n  \n  <p>#1 doesn't require changes in boost serialization, but puts the onus  on the client code. Especially since you have to \"externally\" save the\n  neighbors, so it's no longer well encapsulated, and writing a subset \n  of the surface's nodes become more complex. </p>\n  \n  <p>#2 would require seeking ahead to read the actual object when  encountering a forward reference, and furthermore a separate map to \n  know where to seek for it. That may be incompatible with boost \n  serialization (I confess to be mostly ignorant about it).</p>\n</blockquote>\n\n<p>Can any of those proposals be implemented by now?</p>\n"}, {"tags": ["c++", "linux", "boost", "boost-process"], "answers": [{"tags": [], "owner": {"reputation": 147, "user_id": 5151127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bde3c50b254b69eb31243a15cff28233?s=128&d=identicon&r=PG&f=1", "display_name": "Johan de Vries", "link": "https://stackoverflow.com/users/5151127/johan-de-vries"}, "is_accepted": true, "score": 0, "last_activity_date": 1487058357, "creation_date": 1487058357, "answer_id": 42220495, "question_id": 42117551, "link": "https://stackoverflow.com/questions/42117551/race-condition-in-starting-up-sub-processes-causes-reading-from-pipe-to-hang/42220495#42220495", "title": "Race condition in starting up sub processes causes reading from pipe to hang", "body": "<p>Apparently this is because file handles end up in multiple processes. Those processes don't close those handles, so the parent remains waiting.</p>\n\n<p>For Linux the fix is relatively easy; the pipe should be created with <code>O_CLOEXEC</code> in <code>create_pipe</code>. The <code>dup2</code> call in the <code>bind_*</code> methods clears this flag, which is enough for the pipe to work properly.</p>\n\n<p>On Windows, I haven't really found a solution yet. You have to mark the handle as inheritable. It may be possible to do this in the <code>executor()</code> method, but maybe this requires a global mutex. I haven't had the time to properly look into it yet.</p>\n"}, {"comments": [{"owner": {"reputation": 147, "user_id": 5151127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bde3c50b254b69eb31243a15cff28233?s=128&d=identicon&r=PG&f=1", "display_name": "Johan de Vries", "link": "https://stackoverflow.com/users/5151127/johan-de-vries"}, "edited": false, "score": 1, "creation_date": 1487142841, "post_id": 42223875, "comment_id": 71644198, "body": "Apparently the Boost Process I was using was an old version. The latest is at <a href=\"https://github.com/klemens-morgenstern/boost-process\" rel=\"nofollow noreferrer\">github.com/klemens-morgenstern/boost-process</a>."}], "tags": [], "owner": {"reputation": 715, "user_id": 2450533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xa4U8.png?s=128&g=1", "display_name": "Klemens Morgenstern", "link": "https://stackoverflow.com/users/2450533/klemens-morgenstern"}, "is_accepted": false, "score": 0, "last_activity_date": 1487068578, "creation_date": 1487068578, "answer_id": 42223875, "question_id": 42117551, "link": "https://stackoverflow.com/questions/42117551/race-condition-in-starting-up-sub-processes-causes-reading-from-pipe-to-hang/42223875#42223875", "title": "Race condition in starting up sub processes causes reading from pipe to hang", "body": "<p>I'm not sure if \"use boost.process 0.6\" counts as an answer, but that does that for you. After a few bug-reports that is.\nOn windows closing the sink in the father process should suffice.</p>\n"}], "owner": {"reputation": 147, "user_id": 5151127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bde3c50b254b69eb31243a15cff28233?s=128&d=identicon&r=PG&f=1", "display_name": "Johan de Vries", "link": "https://stackoverflow.com/users/5151127/johan-de-vries"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 42220495, "answer_count": 2, "score": 0, "last_activity_date": 1487068578, "creation_date": 1486568699, "last_edit_date": 1486577859, "question_id": 42117551, "link": "https://stackoverflow.com/questions/42117551/race-condition-in-starting-up-sub-processes-causes-reading-from-pipe-to-hang", "title": "Race condition in starting up sub processes causes reading from pipe to hang", "body": "<p>I have two threads that start up a child process each. The first application is a binary that runs quite long. The second exits quite quickly.</p>\n\n<p>There is a race condition that sometimes causes this to fail. Below I have a minimum viable code example.</p>\n\n<p>It uses Boost Process 0.5, which uses the standard fork / execve / dup2 system. There are some hacks regarding how Boost Process works, but in general it works quite well.</p>\n\n<p>The parent process starts up a lot more processes, and in general it works.</p>\n\n<p>I can't readily boot processes one at a time, especially since I don't know which parts can't interleave.</p>\n\n<p>Any ideas on why this would hang?</p>\n\n<p>Expected output:</p>\n\n<pre><code>/etc/init.d/led restart: Creating child\nCreating child1\nReading STDOUT\n/etc/init.d/led restart: Waiting for it to exit\nReading std_err_pipe\n\n\nwait_for_exit(pullapp);\nReading std_out_pipe\n&lt; file list&gt;\n\nDone\n</code></pre>\n\n<p>However, often, but not always, it stops at std_err_pipe.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\n#include &lt;boost/iostreams/stream.hpp&gt;\n#include &lt;boost/process.hpp&gt;\n#include &lt;boost/thread.hpp&gt;\n\nvoid run_sleep()\n{\n    int      exit_code;\n    std::string   str;\n\n    std::vector&lt; std::string &gt;  args;\n\n    boost::shared_ptr&lt;boost::process::child&gt; child;\n\n    args.push_back(boost::process::search_path(\"sleep\"));\n    args.push_back(\"20\");\n\n    boost::iostreams::stream&lt; boost::iostreams::file_descriptor_source &gt;\n        out_stream;\n\n    boost::process::pipe out_pipe = boost::process::create_pipe();\n\n    {\n        //MUST BE IN SEPARATE SCOPE SO SINK AND SOURCE ARE DESTROYED\n        // See http://stackoverflow.com/a/12469478/5151127\n        boost::iostreams::file_descriptor_sink    out_sink\n            (out_pipe.sink,   boost::iostreams::close_handle);\n        boost::iostreams::file_descriptor_source  out_source\n            (out_pipe.source, boost::iostreams::close_handle);\n\n        std::cout &lt;&lt; \"Creating child1\" &lt;&lt; std::endl;\n        child.reset(new boost::process::child(\n            boost::process::execute(\n                boost::process::initializers::run_exe(args[0]),\n                boost::process::initializers::set_args(args),\n                boost::process::initializers::bind_stdout(out_sink),\n                boost::process::initializers::bind_stderr(out_sink)\n            )\n        ));\n\n        out_stream.open(out_source);\n    }\n\n    std::cout &lt;&lt; \"Reading STDOUT\" &lt;&lt; std::endl;\n    while( out_stream ) {\n        std::string line;\n\n        std::getline(out_stream, line);\n\n        std::cout &lt;&lt; line &lt;&lt; std::endl;\n    }\n\n    std::cout &lt;&lt; \"wait_for_exit(pullapp);\" &lt;&lt; std::endl;\n    exit_code = wait_for_exit(*child);\n\n    child.reset();\n\n    return;\n}\n\n\nvoid run_ls()\n{\n    int      exit_code;\n    std::string   str;\n\n    std::vector&lt; std::string &gt;  args ;\n\n    args.push_back(boost::process::search_path(\"ls\"));\n    args.push_back(\"/lib\");\n\n    boost::process::pipe std_out_pipe = boost::process::create_pipe();\n    boost::process::pipe std_err_pipe = boost::process::create_pipe();\n\n    std::cout &lt;&lt; \"/etc/init.d/led restart: Creating child\" &lt;&lt; std::endl;\n\n    {\n        boost::process::child child = boost::process::execute(\n            boost::process::initializers::set_args(args),\n            boost::process::initializers::bind_stdout(\n                boost::iostreams::file_descriptor_sink(\n                    std_out_pipe.sink,\n                    boost::iostreams::close_handle\n                )\n            ),\n            boost::process::initializers::bind_stderr(\n                boost::iostreams::file_descriptor_sink(\n                    std_err_pipe.sink,\n                    boost::iostreams::close_handle\n                )\n            ),\n            boost::process::initializers::throw_on_error()\n        );\n\n        std::cout &lt;&lt; \"/etc/init.d/led restart: Waiting for it to exit\" &lt;&lt; std::endl;\n        exit_code = wait_for_exit(child);\n    }\n\n    { //with std_err_stream, istream\n        boost::iostreams::stream&lt; boost::iostreams::file_descriptor_source &gt;\n            std_err_stream(\n                boost::iostreams::file_descriptor_source(\n                    std_err_pipe.source, boost::iostreams::close_handle\n                )\n            );\n\n        std::cout &lt;&lt; \"Reading std_err_pipe\" &lt;&lt; std::endl;\n        std::istream istream(std_err_stream.rdbuf());\n        while( istream ) {\n            getline(istream, str);\n            std::cout &lt;&lt; str &lt;&lt; std::endl;\n        }\n    }\n\n    { //with std_out_stream, istream\n        boost::iostreams::stream&lt; boost::iostreams::file_descriptor_source &gt;\n            std_out_stream(\n                boost::iostreams::file_descriptor_source(\n                    std_out_pipe.source, boost::iostreams::close_handle\n                )\n            );\n\n        std::cout &lt;&lt; \"Reading std_out_pipe\" &lt;&lt; std::endl;\n        std::istream istream(std_out_stream.rdbuf());\n        while( istream ) {\n            getline(istream, str);\n            std::cout &lt;&lt; str &lt;&lt; std::endl;\n        }\n    }\n\n    std::cout &lt;&lt; \"Done\" &lt;&lt; std::endl;\n}\n\nint main()\n{\n    boost::thread  run_sleep_tr(run_sleep);\n    boost::thread  run_ls_tr(run_ls);\n\n    run_sleep_tr.join();\n    run_ls_tr.join();\n\n    return 0;\n}\n</code></pre>\n\n<p>(Save as process-test.cpp and compile with <code>g++ process-test.cpp -o process-test -lboost_iostreams -lboost_filesystem -lboost_thread -lboost_system</code>)</p>\n"}, {"tags": ["c++", "node.js", "cpu-usage", "v8", "child-process"], "answers": [{"tags": [], "owner": {"reputation": 1146, "user_id": 4838425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxCgc.png?s=128&g=1", "display_name": "Gireesh Punathil", "link": "https://stackoverflow.com/users/4838425/gireesh-punathil"}, "is_accepted": false, "score": 0, "last_activity_date": 1490549236, "creation_date": 1490549236, "answer_id": 43032118, "question_id": 42117186, "link": "https://stackoverflow.com/questions/42117186/node-js-app-has-high-cpu-usage-due-to-spawn-how-can-i-log-all-calls-to-it/43032118#43032118", "title": "Node.js app has high CPU usage due to `spawn`, how can I log all calls to it?", "body": "<p>You could start node with --trace flag. This will cause in-built method tracing to be turned on, and one line per method call will be printed in the console with the call-depth, call-name, script location, parameters, caller's info, callee's info etc. placed contextual to the call.</p>\n\n<p>So you would actually count the number of instances of <code>spawn</code> in the trace to determine how much calls were made. Second, before each spawn call, you would traverse backward in the call-depth chain to see the call-heirarchy to figure our how and where in your application the spawn calls were originated.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 86, "user_id": 4345997, "user_type": "registered", "profile_image": "https://graph.facebook.com/717032852/picture?type=large", "display_name": "Tim Kosch&#252;tzki", "link": "https://stackoverflow.com/users/4345997/tim-kosch%c3%bctzki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 633, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1490549236, "creation_date": 1486567774, "last_edit_date": 1486629478, "question_id": 42117186, "link": "https://stackoverflow.com/questions/42117186/node-js-app-has-high-cpu-usage-due-to-spawn-how-can-i-log-all-calls-to-it", "title": "Node.js app has high CPU usage due to `spawn`, how can I log all calls to it?", "body": "<p>My Node.js (we are running v6.9.5) app often has > 80% CPU usage (happened on v4 also). After doing some basic profiling, it appears that it is spawning a lot of child processes:</p>\n\n<pre><code>[Summary]:\n  ticks   total  nonlib  name\n    345    6.7%    6.9%  JavaScript\n   4451   86.7%   89.1%  C++\n     82    1.6%    1.6%  GC\n    136    2.6%          Shared libraries\n    201    3.9%          Unaccounted\n\n----------\n\n[C++]:\n ticks   total  nonlib  name\n  2606   50.8%   52.2%  node::ProcessWrap::Spawn(v8::FunctionCallbackInfo&lt;v8::Value&gt; const&amp;)\n   319    6.2%    6.4%  node::ContextifyScript::New(v8::FunctionCallbackInfo&lt;v8::Value&gt; const&amp;)\n   284    5.5%    5.7%  syscall\n   111    2.2%    2.2%  write\n    31    0.6%    0.6%  void node::StreamBase::JSMethod&lt;node::StreamWrap, &amp;(int \n</code></pre>\n\n<p>I have added logging to all of our app-specific <code>child_process.spawn</code> / <code>exec</code> / <code>execFile</code> calls, but none of those explain why the CPU is spending so much time on it. </p>\n\n<p>I would like to now log all the calls of <code>child_process</code> within all the <code>node_modules</code> that we use, in case there is a module that sends too many calls due to some bug, over-eager executing of callbacks, or some other misuse on our part.</p>\n\n<p>Initially I thought to create <code>child_process</code> wrapper module with added logging, and hope that our dependencies would use that in favor of Node.js' native module, unfortunately the dependencies seem to keep using the native module. </p>\n\n<p>Question: </p>\n\n<ul>\n<li>How can I add logging on all the <code>spawn</code> calls of my process? Or is there a better way to get more insight into what part of our app is causing the spawns?</li>\n</ul>\n\n<p>In case I'm off completely:</p>\n\n<ul>\n<li>Could there be a different reason for <code>node::ProcessWrap::Spawn(v8::FunctionCallbackInfo&lt;v8::Value&gt; const&amp;)</code> to consume relatively so many CPU ticks, other than <code>child_process</code> calls?</li>\n</ul>\n\n<p>Any clue is appreciated!</p>\n"}, {"tags": ["c++", "qt", "c++11"], "comments": [{"owner": {"reputation": 3705, "user_id": 2531178, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93522fe839d5fa749adabca6086303b2?s=128&d=identicon&r=PG", "display_name": "Sebastian Lange", "link": "https://stackoverflow.com/users/2531178/sebastian-lange"}, "edited": false, "score": 1, "creation_date": 1486567914, "post_id": 42117178, "comment_id": 71402876, "body": "Do not use an empty file or have an valid xml header (just a guess). Could post the two first lines of the xml?"}, {"owner": {"reputation": 3521, "user_id": 2004438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83aa1035a2265dea1f8ad9818560799a?s=128&d=identicon&r=PG", "display_name": "kefir500", "link": "https://stackoverflow.com/users/2004438/kefir500"}, "edited": false, "score": 0, "creation_date": 1486568638, "post_id": 42117178, "comment_id": 71403386, "body": "Try specifying an absolute path to your XML in the <code>QFile</code> constructor."}, {"owner": {"reputation": 3, "user_id": 7535271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d51642369c5c8b509085218cc581e265?s=128&d=identicon&r=PG&f=1", "display_name": "Lubiz", "link": "https://stackoverflow.com/users/7535271/lubiz"}, "reply_to_user": {"reputation": 3521, "user_id": 2004438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83aa1035a2265dea1f8ad9818560799a?s=128&d=identicon&r=PG", "display_name": "kefir500", "link": "https://stackoverflow.com/users/2004438/kefir500"}, "edited": false, "score": 0, "creation_date": 1486569039, "post_id": 42117178, "comment_id": 71403685, "body": "Wow, it works! But why does it work? how can i not specify the absolute path without giving me an error? @kefir500 Thanks!!"}, {"owner": {"reputation": 3521, "user_id": 2004438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83aa1035a2265dea1f8ad9818560799a?s=128&d=identicon&r=PG", "display_name": "kefir500", "link": "https://stackoverflow.com/users/2004438/kefir500"}, "edited": false, "score": 0, "creation_date": 1486569275, "post_id": 42117178, "comment_id": 71403865, "body": "@Lubiz See my answer."}], "answers": [{"comments": [{"owner": {"reputation": 3521, "user_id": 2004438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83aa1035a2265dea1f8ad9818560799a?s=128&d=identicon&r=PG", "display_name": "kefir500", "link": "https://stackoverflow.com/users/2004438/kefir500"}, "reply_to_user": {"reputation": 3, "user_id": 7535271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d51642369c5c8b509085218cc581e265?s=128&d=identicon&r=PG&f=1", "display_name": "Lubiz", "link": "https://stackoverflow.com/users/7535271/lubiz"}, "edited": false, "score": 1, "creation_date": 1486571734, "post_id": 42117749, "comment_id": 71405686, "body": "@Lubiz If this answer helped you, I would be grateful if you would upvote it and/or mark it as accepted."}], "tags": [], "owner": {"reputation": 3521, "user_id": 2004438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83aa1035a2265dea1f8ad9818560799a?s=128&d=identicon&r=PG", "display_name": "kefir500", "link": "https://stackoverflow.com/users/2004438/kefir500"}, "is_accepted": true, "score": 1, "last_activity_date": 1486569667, "last_edit_date": 1486569667, "creation_date": 1486569214, "answer_id": 42117749, "question_id": 42117178, "link": "https://stackoverflow.com/questions/42117178/qdomdocument-setcontent-return-false/42117749#42117749", "title": "QDomDocument: setContent() return false", "body": "<p>So the problem is an invalid path to your XML file.</p>\n\n<p>If you are trying to open the file which is located in the same directory with your executable, use the <a href=\"http://doc.qt.io/qt-5/qcoreapplication.html#applicationDirPath\" rel=\"nofollow noreferrer\"><code>QCoreApplication::applicationDirPath()</code></a> method which return the needed path. Otherwise the process working directory will be used (which is not always an executable directory).</p>\n\n<pre><code>QFile f(QCoreApplication::applicationDirPath() + \"/database.xml\");\n</code></pre>\n\n<p>I guess you did not notice the <code>Error: file not correctly opened.</code> warning, did you?</p>\n"}], "owner": {"reputation": 3, "user_id": 7535271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d51642369c5c8b509085218cc581e265?s=128&d=identicon&r=PG&f=1", "display_name": "Lubiz", "link": "https://stackoverflow.com/users/7535271/lubiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "accepted_answer_id": 42117749, "answer_count": 1, "score": 0, "last_activity_date": 1486569667, "creation_date": 1486567754, "last_edit_date": 1486568632, "question_id": 42117178, "link": "https://stackoverflow.com/questions/42117178/qdomdocument-setcontent-return-false", "title": "QDomDocument: setContent() return false", "body": "<p>I have a problem while i try to use <code>setContent()</code> into a QDomDocument object..</p>\n\n<p>Here is the code:</p>\n\n<pre><code>QFile f(\"database.xml\");\nif(!f.open(QFile::ReadOnly))\n    cout &lt;&lt; \"Error: file not correctly opened.\" &lt;&lt; endl;\n\nQDomDocument doc(\"database\");\nQString errorStr;\nint errorLine;\nint errorColumn;\nif(!doc.setContent(&amp;f, false, &amp;errorStr, &amp;errorLine, &amp;errorColumn)){\n    cout &lt;&lt; \"Error: \" &lt;&lt; errorStr.toStdString() &lt;&lt; \" at line \" &lt;&lt; errorLine &lt;&lt; \" column \" &lt;&lt; errorColumn &lt;&lt; endl;\n}\nf.close();\n</code></pre>\n\n<p>and it print:</p>\n\n<p><code>Error: unexpected end of file at line 1 column 1</code></p>\n\n<p>How can i solve this mistake?</p>\n\n<p>Here is the contents of the file :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;myLibrary&gt;\n&lt;movie&gt;\n    &lt;price&gt;5&lt;/price&gt;\n    &lt;title&gt;Star Wars 4&lt;/title&gt;\n    &lt;register&gt;George Lukas&lt;/register&gt;\n    &lt;year&gt;1977&lt;/year&gt;\n    &lt;durate&gt;192&lt;/durate&gt;\n&lt;/movie&gt;\n&lt;movie&gt;\n    &lt;price&gt;8&lt;/price&gt;\n    &lt;title&gt;Rambo 1&lt;/title&gt;\n    &lt;register&gt;Joe Clarkson&lt;/register&gt;\n    &lt;year&gt;2012&lt;/year&gt;\n    &lt;durate&gt;167&lt;/durate&gt;\n&lt;/movie&gt;\n&lt;/myLibrary&gt;\n</code></pre>\n"}, {"tags": ["c++", "sockets", "http"], "comments": [{"owner": {"reputation": 689, "user_id": 810297, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4ab654de2c71950a720c6cf0302f3621?s=128&d=identicon&r=PG", "display_name": "BCartolo", "link": "https://stackoverflow.com/users/810297/bcartolo"}, "edited": false, "score": 0, "creation_date": 1486567250, "post_id": 42116939, "comment_id": 71402421, "body": "Why don&#39;t you use WinHTTP instead of WinSock? HTTP is a higher level protocol, there is no point to use sockets. (Unless it is a learning exercise)"}, {"owner": {"reputation": 77, "user_id": 7531186, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/13894a3cc583d4c9d56e35fbc410f290?s=128&d=identicon&r=PG&f=1", "display_name": "wrg wfg", "link": "https://stackoverflow.com/users/7531186/wrg-wfg"}, "reply_to_user": {"reputation": 689, "user_id": 810297, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4ab654de2c71950a720c6cf0302f3621?s=128&d=identicon&r=PG", "display_name": "BCartolo", "link": "https://stackoverflow.com/users/810297/bcartolo"}, "edited": false, "score": 0, "creation_date": 1486567597, "post_id": 42116939, "comment_id": 71402669, "body": "@BCartolo Because I learning how to use sockets and how the all staff works behind the scense at the low level. Can you hellp me?"}, {"owner": {"reputation": 689, "user_id": 810297, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4ab654de2c71950a720c6cf0302f3621?s=128&d=identicon&r=PG", "display_name": "BCartolo", "link": "https://stackoverflow.com/users/810297/bcartolo"}, "edited": false, "score": 0, "creation_date": 1486567886, "post_id": 42116939, "comment_id": 71402857, "body": "This looks ok to me: <a href=\"http://www.binarytides.com/winsock-socket-programming-tutorial/\" rel=\"nofollow noreferrer\">binarytides.com/winsock-socket-programming-tutorial</a> But generally msdn is the place to learn windows specific API. If portability is an issue, you might want to use some wrapper. For example: <a href=\"http://stackoverflow.com/questions/10574857/simple-cross-platform-tcp-ip-api\" title=\"simple cross platform tcp ip api\">stackoverflow.com/questions/10574857/&hellip;</a>"}, {"owner": {"reputation": 1289, "user_id": 2379903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ee17b19924a4e62661b710523ba060?s=128&d=identicon&r=PG", "display_name": "Art Yerkes", "link": "https://stackoverflow.com/users/2379903/art-yerkes"}, "edited": false, "score": 0, "creation_date": 1486567959, "post_id": 42116939, "comment_id": 71402909, "body": "Are you making an HTTP request?  I see nothing between Connect and Recv."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1486568397, "post_id": 42116939, "comment_id": 71403210, "body": "Don&#39;t make explicit use of the destructor, <code>http_client.~Client()</code>, it makes your program undefined. You should probably start with one of <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">these</a>."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1486568430, "post_id": 42116939, "comment_id": 71403234, "body": "&quot;I thought when I makes a connetion of &quot;http&quot; with a website, so the first thing I get in response is a DATA from the website containing the all html code of the index page&quot; - no that&#39;s not how it works. The client needs to make a request before the server sends anything when using HTTP. Do use an HTTP(S) client library, it is no easy task to do it correctly yourself with plain sockets."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1486568889, "post_id": 42116939, "comment_id": 71403577, "body": "Not only don&#39;t you get anything back, you&#39;re also not requesting anything to be sent back. All you&#39;re doing is establishing a TCP connection and closing it. Do you have any idea about how HTTP works at all?"}], "owner": {"reputation": 77, "user_id": 7531186, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/13894a3cc583d4c9d56e35fbc410f290?s=128&d=identicon&r=PG&f=1", "display_name": "wrg wfg", "link": "https://stackoverflow.com/users/7531186/wrg-wfg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1486567008, "creation_date": 1486567008, "question_id": 42116939, "link": "https://stackoverflow.com/questions/42116939/trying-to-get-and-send-information-to-website-i-buid-with-sockets-in-cpp", "title": "Trying to get and send information to website I buid with sockets in CPP", "body": "<p>I have the next code to make a connection to my website:</p>\n\n<pre><code>#ifndef WIN32_LEAN_AND_MEAN\n#define WIN32_LEAN_AND_MEAN\n#endif\n\n#include &lt;Windows.h&gt;\n#include &lt;WinSock2.h&gt;\n#include &lt;WS2tcpip.h&gt;\n#include \"Client.h\"\n#include &lt;iostream&gt;\n\n#pragma comment(lib, \"Ws2_32.lib\")\n\nvoid WSAStartup()\n{\n    // This will lead us all the way long...\n    int Errors;\n    WSADATA wsadata;\n    Errors = WSAStartup(MAKEWORD(2, 2), &amp;wsadata);\n    if (Errors != 0)\n    {\n        std::cout &lt;&lt; \"E1, \" &lt;&lt; Errors &lt;&lt; \".\\n\";\n        getchar();\n        exit(1);\n    }\n    //---------------------------------------\n}\n\n\nint main()\n{\n    WSAStartup();\n    Client http_client;\n\n    http_client.ZeroMem();\n    http_client.GetInfo(\"www.xxx.xxx.xxx\", \"http\"); // \"http\" is like writing 80. can be also integer parameter.\n    http_client.CreateSocket();\n    if (!http_client.Connect()) // If true, so it means there all went well.\n    {\n        std::cout &lt;&lt; \"Good for us! We are in.\\n\";\n    }\n\n    http_client.Recv();\n    http_client.~Client();\n\n    std::cin.get();\n    return 0;\n}\n</code></pre>\n\n<p>In the header \"Client.h\" I did all the \"dirty staff\"...\nI get the next output:</p>\n\n<blockquote>\n  <p>Good for us! We are in.</p>\n</blockquote>\n\n<p>So apparently the problem is not the coding.\nI thought when I makes a connetion of \"http\" with a website, so the first thing I get in response is a DATA from the website containing the all html code of the index page, buy it doesnt.</p>\n\n<p>I run this program while 'Wiresharking' to see what I get between the SYN till the FIN, here is the screenshot of what I got:</p>\n\n<p><a href=\"https://i.stack.imgur.com/uq2Wv.png\" rel=\"nofollow noreferrer\">Screenshot of wireshark while runing my code</a></p>\n\n<p>There isnt any DATA I get back as you can see...\nSo how exactly should I work with sockets in cpp when I ask (or send a post request) html data?\nLinks will be appreciated. thanks.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 7, "creation_date": 1486566937, "post_id": 42116877, "comment_id": 71402213, "body": "<code>std::vector</code> is a value-based class. A <code>vector&lt;E&lt;K&gt;&gt;</code> doesn&#39;t make sense because it will store values of your abstract class."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1486566948, "post_id": 42116877, "comment_id": 71402227, "body": "&quot;I want to restrict users from instantiating it&quot; - but ... the compiler will do that for you because of the pure virtual functions - infact, you even state this later on"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1486566953, "post_id": 42116877, "comment_id": 71402230, "body": "A <code>clone()</code> function and (smart)pointers are your friends."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1486567014, "post_id": 42116877, "comment_id": 71402279, "body": "<code>virtual void copy(const E&lt;Key&gt;&amp; x) = 0</code> Polymorphic copy is a can of worms you don&#39;t want to open. Avoid."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1486567774, "post_id": 42116877, "comment_id": 71402784, "body": "Do you have Java background by any chance?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1486567909, "post_id": 42116877, "comment_id": 71402868, "body": "&quot;I have the following abstract class E&quot; -- no, you have a <b>template</b> for an abstract class."}, {"owner": {"reputation": 838, "user_id": 1449003, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/efe7f56d368f5ad47bed792aa32fcceb?s=128&d=identicon&r=PG&f=1", "display_name": "nick.katsip", "link": "https://stackoverflow.com/users/1449003/nick-katsip"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486570650, "post_id": 42116877, "comment_id": 71404871, "body": "@StoryTeller I have updated the base class <code>E</code> with a clone method that returns a <code>std::unique_ptr&lt;E&lt;k&gt;&gt;</code> and I use it inside the constructor of <code>J</code> to populate <code>v</code> by calling its move <code>push_back()</code> method. i.e., <code>v.push_back(std::move(e.clone())</code>. However, I get the same error that I cannot instantiate an abstract class. Any hints on that?"}, {"owner": {"reputation": 838, "user_id": 1449003, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/efe7f56d368f5ad47bed792aa32fcceb?s=128&d=identicon&r=PG&f=1", "display_name": "nick.katsip", "link": "https://stackoverflow.com/users/1449003/nick-katsip"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486570936, "post_id": 42116877, "comment_id": 71405103, "body": "@n.m. yes, I do"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486571538, "post_id": 42116877, "comment_id": 71405543, "body": "Your vector should contain <code>std::unique_ptr&lt;E&lt;k&gt;&gt;</code>..."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486572662, "post_id": 42116877, "comment_id": 71406338, "body": "I wish there was a resource &quot;C++ for Java programmers&quot; but I know of nothing like that. So here&#39;s the basic bit of info: in C++ inheritance and polymorphism work <b>only</b> through pointers and references. (It&#39;s exactly the same way in Java, only they are not using these words, they use the same word &quot;object&quot; for objects and pointers). So you need to have a vector of pointers (prefer smart pointers) to E&lt;K&gt;."}, {"owner": {"reputation": 838, "user_id": 1449003, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/efe7f56d368f5ad47bed792aa32fcceb?s=128&d=identicon&r=PG&f=1", "display_name": "nick.katsip", "link": "https://stackoverflow.com/users/1449003/nick-katsip"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486572768, "post_id": 42116877, "comment_id": 71406412, "body": "@n.m. apparently that is what I ended up doing. it is much easier to have a <code>clone()</code> method in my <code>E</code> definition and create a vector of pointers to objects of the base type."}], "answers": [{"comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 5, "creation_date": 1486568257, "post_id": 42117340, "comment_id": 71403101, "body": "Why <code>shared_ptr</code>? The default go-to smart pointer should be <code>unique_ptr</code>."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1486568740, "post_id": 42117340, "comment_id": 71403452, "body": "This does not answer the question: how to initialize your <code>std::vector&lt;std::shared_ptr&lt;E&lt;K&gt;&gt;&gt;</code> with <code>n</code> copies of <code>e</code>, <code>e</code> being a <code>const E&lt;K&gt;&amp;</code>?"}], "tags": [], "owner": {"reputation": 218, "user_id": 4714082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/441c1192cb30293e6cf8338a3c8b1fc8?s=128&d=identicon&r=PG&f=1", "display_name": "BalazsToth", "link": "https://stackoverflow.com/users/4714082/balazstoth"}, "is_accepted": false, "score": 0, "last_activity_date": 1486568197, "creation_date": 1486568197, "answer_id": 42117340, "question_id": 42116877, "link": "https://stackoverflow.com/questions/42116877/c-avoid-call-to-abstract-base-classs-constructor/42117340#42117340", "title": "C++ avoid call to abstract base class&#39;s constructor", "body": "<p>Since <code>std::vector&lt;E&lt;K&gt;&gt; v;</code> requires a static instantiation of class E, it will never compile (as you already noticed correctly). To make it work should use</p>\n\n<p><code>std::vector&lt;std::shared_ptr&lt;E&lt;K&gt;&gt;&gt; v;</code></p>\n\n<p>instead. It can store your objects <code>EOne</code> and <code>ETwo</code> dynamically while they can be referred with a pointed of type <code>E</code>. To add a new object to the vector you can use push_back:</p>\n\n<pre><code>v.push_back(std::make_shared&lt;EOne&lt;K&gt;&gt;{});\n</code></pre>\n\n<p>To cast between the types you can use dynamic and static cast functions for smart pointers e.g. <code>std::dynamic_pointer_cast&lt;&gt;()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 838, "user_id": 1449003, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/efe7f56d368f5ad47bed792aa32fcceb?s=128&d=identicon&r=PG&f=1", "display_name": "nick.katsip", "link": "https://stackoverflow.com/users/1449003/nick-katsip"}, "edited": false, "score": 0, "creation_date": 1486572973, "post_id": 42118655, "comment_id": 71406558, "body": "That is indeed an elegant (but kind of complex) solution. However, I believe your last paragraph is the main take-away. Apparently, I might be able to get away with just using an array of pointers to <code>E&lt;K&gt;</code> and store <code>EOne&lt;K&gt;</code> and <code>ETwo&lt;K&gt;</code> objects in it. However, it is indeed a complex question, which I can not answer concretely myself at this point (i.e., it is a project in the making..). However, I would like to thank you for your time and the effort you put to compile this answer."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 838, "user_id": 1449003, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/efe7f56d368f5ad47bed792aa32fcceb?s=128&d=identicon&r=PG&f=1", "display_name": "nick.katsip", "link": "https://stackoverflow.com/users/1449003/nick-katsip"}, "edited": false, "score": 0, "creation_date": 1486573166, "post_id": 42118655, "comment_id": 71406720, "body": "@nick.katsip Dumb pointers (raw pointers) are bad things to put into <code>std::vector</code>s, as <code>vector</code>s expect their contents to be movable in sensible ways, and resource tracking gets hard.  <code>value_ptr</code> attempts to make a smart enough pointer to be copied and moved; <code>unique_ptr</code> is a move-only pointer (that doesn&#39;t let you make 10 copies of something)."}, {"owner": {"reputation": 838, "user_id": 1449003, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/efe7f56d368f5ad47bed792aa32fcceb?s=128&d=identicon&r=PG&f=1", "display_name": "nick.katsip", "link": "https://stackoverflow.com/users/1449003/nick-katsip"}, "edited": false, "score": 0, "creation_date": 1486585430, "post_id": 42118655, "comment_id": 71413844, "body": "So, which one would you suggest for my use-case? <code>value_ptr</code> or <code>unique_ptr</code>? When I tried to use <code>unique_ptr</code> and provide it to <code>std::vector::push_back()</code> with <code>std::move()</code> I got an error that I can&#39;t call the constructor of an abstract class. In detail, in the constructor I changed <code>v</code> to be <code>std::vector&lt;unique_ptr&lt;E&lt;K&gt;&gt;&gt;</code> and after I get a <code>unique_ptr&lt;E&lt;K&gt;&gt; p</code> object, I did <code>v.push_back(std::move(p))</code>. Then, the compiler gives me the error that I can&#39;t call an abstract class&#39;s constructor. Any suggestions?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 838, "user_id": 1449003, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/efe7f56d368f5ad47bed792aa32fcceb?s=128&d=identicon&r=PG&f=1", "display_name": "nick.katsip", "link": "https://stackoverflow.com/users/1449003/nick-katsip"}, "edited": false, "score": 0, "creation_date": 1486586011, "post_id": 42118655, "comment_id": 71414173, "body": "@nick.katsip You can push back into a vector of unique pointers, which means that the problem you have is not fully described by your comment.  Try a sketch of that solution, and ask a new SO question about the error you are getting.  Make sure to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 1, "last_activity_date": 1486572114, "last_edit_date": 1486572114, "creation_date": 1486571614, "answer_id": 42118655, "question_id": 42116877, "link": "https://stackoverflow.com/questions/42116877/c-avoid-call-to-abstract-base-classs-constructor/42118655#42118655", "title": "C++ avoid call to abstract base class&#39;s constructor", "body": "<p>There is more than one approach to this.  What follows is the most complex reasonable one.  It requires lots of work in the type definitions, but leads to the cleanest \"client\" code that uses these types.</p>\n\n<hr>\n\n<p>It is time to learn how to make a type regular.</p>\n\n<p>An instance of a regular type behaves like a value.  C++ algorithms and container work far better with regular types than it does with abstract types.</p>\n\n<pre><code>template&lt;class K&gt;\nclass E_interface {\npublic:\n  virtual ~E_interface() {};\n  virtual void init() = 0;\n  virtual void insert(const K&amp; k) = 0;\n  virtual size_t count() const = 0;\n  virtual void copy_from(const E_interface&amp; x) = 0;\n  std::unique_ptr&lt;E_interface&gt; clone() const = 0;\n};\n</code></pre>\n\n<p>this is basically your <code>E</code>, except I added <code>clone()</code>.</p>\n\n<pre><code>template&lt;class T, class D=std::default_delete&lt;D&gt;, class Base=std::unique_ptr&lt;T&gt;&gt;\nstruct clone_ptr:Base {\n  using Base::Base;\n  clone_ptr(Base&amp;&amp; b):Base(std::move(b)) {}\n  clone_ptr()=default;\n  clone_ptr(clone_ptr&amp;&amp;o)=default;\n  clone_ptr(clone_ptr const&amp; o):\n    clone_ptr(\n      o?clone_ptr(o-&gt;clone()):clone_ptr()\n    )\n  {}\n  clone_ptr&amp; operator=(clone_ptr&amp;&amp;o)=default;\n  clone_ptr&amp; operator=(clone_ptr const&amp;o) {\n    if (*this &amp;&amp; o) {\n      get()-&gt;copy_from(*o.get());\n    } else {\n      clone_ptr tmp(o);\n      *this = std::move(tmp);\n    }\n    return *this;\n  }\n};\n</code></pre>\n\n<p>The <code>clone_ptr</code> is a smart pointer that is a <code>unique_ptr</code> that knows how to copy itself by calling <code>clone()</code> and <code>copy_from</code> on the stored object.  It may have some typos.</p>\n\n<p>Now we write our E:</p>\n\n<pre><code>template&lt;class K&gt;\nclass E {\n  clone_ptr&lt;E_interface&lt;K&gt;&gt; pImpl;\npublic:\n  E() = default;\n  E( std::unique_ptr&lt;E_interface&lt;K&gt;&gt; in ):pImpl(std::move(in)) {}\n  E( E const&amp; )=default;\n  E( E &amp;&amp; )=default;\n  E&amp; operator=( E const&amp; )=default;\n  E&amp; operator=( E &amp;&amp; )=default;\n  explicit operator bool() const { return (bool)pImpl; }\n\n  void init() { if (*this) pImpl-&gt;init(); }\n  void insert(const K&amp; k) ( if (*this) pImpl-&gt;insert(k); }\n  size_t count() const { if (*this) pImpl-&gt;count(); else return 0; }\n};\n</code></pre>\n\n<p>Our <code>E&lt;K&gt;</code> is now a value type.  It can be stored in a <code>vector</code>, copied, moved, etc.</p>\n\n<p>How do we do <code>EOne</code> and <code>ETwo</code>?</p>\n\n<p>First, take your existing <code>EOne</code> and <code>ETwo</code> and call them <code>EOne_impl</code> and <code>ETwo_impl</code>.  Implement a <code>clone()</code> function that does a <code>return std::make_unique&lt;EOne_impl&gt;(*this);</code> for <code>EOne_impl</code> and similar for <code>ETwo_impl</code>.</p>\n\n<p>Then this helper:</p>\n\n<pre><code>template&lt;class Impl, class K&gt;\nstruct E_impl: E&lt;K&gt; {\n  using E&lt;K&gt;::E&lt;K&gt;;\n  E_impl() : E&lt;K&gt;( std::make_unique&lt;Impl&gt;() ) {}\n  template&lt;class...Args&gt;\n  E_impl(Args&amp;&amp;...args) : E&lt;K&gt;( std::make_unique&lt;Impl&gt;(std::forward&lt;Args&gt;(args)...) ) {}\n};\n</code></pre>\n\n<p>gives us</p>\n\n<pre><code>template&lt;class K&gt;\nusing Eone = E_impl&lt; Eone_impl, K &gt;;\ntemplate&lt;class K&gt;\nusing Etwo = E_impl&lt; Etwo_impl, K &gt;;\n</code></pre>\n\n<p>and I believe your <code>J</code> and <code>main</code> code starts compiling and working as-is.</p>\n\n<p>What we just did was create value-semantics <code>E&lt;K&gt;</code> type that contains a pImpl (pointer to implementation) pointing to a pure-virtual interface that knows how to copy itself, as well as the interface we want on an <code>E&lt;K&gt;</code>.</p>\n\n<p>We then forwarded the interface of <code>E&lt;K&gt;</code> to the <code>E_interface&lt;K&gt;</code> for each method.  We didn't expose <code>copy_from</code> or <code>clone</code>, as those become <code>operator=</code> and our copy constructor.</p>\n\n<p>To implement <code>E&lt;K&gt;</code>, you first implement <code>E_interface&lt;K&gt;</code>.  Then I wrote a helper to create a derived type from <code>E&lt;K&gt;</code> that implicitly uses that implementation.</p>\n\n<p>Note that our <code>E&lt;K&gt;</code> is almost-never empty; not never-empty.  This is more efficient and simpler, but can cause problems down the road.</p>\n\n<p><code>E&lt;K&gt;</code> becomes a polymorphic value-semantics type.  This is a strange beast in some senses (as many languages don't support such a type), but in other senses it behaves exactly the way you'd want it to behave.</p>\n\n<hr>\n\n<p>A similar solution in C# or Java would have the data stored in the vectors be fully garbage collected reference-semantics types, not value-semantics types.</p>\n\n<p>This is similar to a <code>std::vector&lt;std::shared_ptr&lt;E&lt;K&gt;&gt;</code> (with the note that shared pointers are not fully garbage collected).  Also note that copies of the <code>shared_ptr</code> end up being pointing to the same object, not new copies of it.</p>\n\n<p>A <code>std::vector&lt;value_ptr&lt;E_interface&lt;K&gt;&gt;</code> would also be a reasonable solution and get rid of some of the gymnastics I did in my <code>E&lt;K&gt;</code> and <code>E_impl&lt;K&gt;</code>.  In this case, you wouldn't rename <code>E</code> to <code>E_interface</code>.  You'd initialize the <code>vector</code> with</p>\n\n<pre><code>J&lt;std::string&gt; j(10, std::make_unique&lt;EOne&lt;std::string&gt;&gt;(e))\n</code></pre>\n\n<p>or somesuch.</p>\n\n<hr>\n\n<p>Part of your problem is you have to ask yourself \"what does it mean to copy an <code>E&lt;K&gt;</code>\".  In C++ you get to answer this question yourself; depending on how you answer it, you may or may not be permitted to store it in a <code>std::vector</code>.</p>\n"}], "owner": {"reputation": 838, "user_id": 1449003, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/efe7f56d368f5ad47bed792aa32fcceb?s=128&d=identicon&r=PG&f=1", "display_name": "nick.katsip", "link": "https://stackoverflow.com/users/1449003/nick-katsip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 42118655, "answer_count": 2, "score": 2, "last_activity_date": 1486572114, "creation_date": 1486566814, "question_id": 42116877, "link": "https://stackoverflow.com/questions/42116877/c-avoid-call-to-abstract-base-classs-constructor", "title": "C++ avoid call to abstract base class&#39;s constructor", "body": "<p>Currently, I am building a library in C++ (using C++11 standards), and I am stuck on trying to figure out how to make my design more practical. I have the following abstract class <code>E</code></p>\n\n<pre><code>template&lt;typename K&gt;\nclass E \n{\n public:\n virtual ~E() {};\n virtual void init() = 0;\n virtual void insert(const K&amp; k) = 0;\n virtual size_t count() const = 0;\n virtual void copy(const E&lt;Key&gt;&amp; x) = 0;\n};\n</code></pre>\n\n<p>which I want to restrict users from instantiating it (i.e., be an interface). <code>E</code> has two sub-classes that implement the corresponding methods: </p>\n\n<pre><code>template&lt;typename K&gt;\nclass EOne : public E&lt;K&gt;\n{\n public:\n EOne() {}\n EOne(const EOne&amp; x) {...}\n void init() override\n {\n   ...\n }\n void insert(const K&amp; v) override\n {\n   ...\n }\n size_t count() const override\n {\n   ...\n }\n void copy(const E&lt;K&gt;&amp; o) override\n {\n   ...\n }\n private: \n     // some private fields\n};\n</code></pre>\n\n<p>and <code>ETwo : public E&lt;K&gt;</code>, which is similar to <code>EOne</code>. Also, there is a different class <code>J</code>, which has a member <code>std::vector&lt;E&lt;K&gt;&gt;</code> that needs to be instantiated during construction: </p>\n\n<pre><code>template&lt;typename K&gt;\nclass J\n{\n public:\n     J(size_t n, const E&lt;K&gt;&amp; e) : v(n, e)\n     {}\n private:\n     std::vector&lt;E&lt;K&gt;&gt; v;\n}\n</code></pre>\n\n<p>In essence, by getting a constant reference for a <code>E&lt;K&gt;</code> object, I want <code>J</code>'s constructor to use the reference to instantiate all <code>n</code> objects of <code>v</code> using <code>e</code> as a template (i.e., call the copy constructor). As you can imagine, my goal is to have <code>e</code> be an object of either <code>EOne&lt;K&gt;</code> or <code>ETwo&lt;K&gt;</code>. For instance, I would make a call to <code>J&lt;K&gt;::J(size_t n, const E&lt;K&gt;&amp; e)</code> the following way: </p>\n\n<pre><code>int main(int argc, char** argv)\n{\n    EOne&lt;std::string&gt; e;\n    J&lt;std::string&gt; j(10, e); // populate v with 10 copies of e\n    ...\n}\n</code></pre>\n\n<p>However, the above does not compile and the compiler complains that I cannot instantiate abstract class (I am using vc++ but I believe I will get the same error on other compilers as well). Therefore, my question has to do on how I can overcome this problem? Do you have any suggestions on how I can make my design more practical. </p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "stm32", "lwip", "ppp"], "answers": [{"comments": [{"owner": {"reputation": 471, "user_id": 856355, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2d935d00fa0cb11b903d4ef5c5b55b37?s=128&d=identicon&r=PG", "display_name": "lgm42", "link": "https://stackoverflow.com/users/856355/lgm42"}, "edited": false, "score": 1, "creation_date": 1486648655, "post_id": 42136758, "comment_id": 71443382, "body": "thanks for your huge answer. I will take a look at that but I&#39;m really surprised that there is no sample with basic serial implementation..."}, {"owner": {"reputation": 2597, "user_id": 4755321, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e93c2832d8928731e8e5d2f6d665c4a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jacek \u015alimok", "link": "https://stackoverflow.com/users/4755321/jacek-%c5%9alimok"}, "reply_to_user": {"reputation": 471, "user_id": 856355, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2d935d00fa0cb11b903d4ef5c5b55b37?s=128&d=identicon&r=PG", "display_name": "lgm42", "link": "https://stackoverflow.com/users/856355/lgm42"}, "edited": false, "score": 1, "creation_date": 1486649147, "post_id": 42136758, "comment_id": 71443721, "body": "As I&#39;ve said, every implementation of sending/receiving data differs depending on the MCU used (registers and handling differ), although some libraries such as STM32Cube attempt to provide a common API, at least for a given set of MCU families. However, even for a single MCU type the implementation may differ, depending on the rest of your project. For example it will be different whether you use an operating system such FreeRTOS or not. With OS, you most likely will use system queues to send/reveice data, semaphores to do blocking operations etc., without it you&#39;ll probably do it all by hand."}, {"owner": {"reputation": 471, "user_id": 856355, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2d935d00fa0cb11b903d4ef5c5b55b37?s=128&d=identicon&r=PG", "display_name": "lgm42", "link": "https://stackoverflow.com/users/856355/lgm42"}, "edited": false, "score": 0, "creation_date": 1486650620, "post_id": 42136758, "comment_id": 71444786, "body": "I understand well but STM32Cube have a lot of complex example like HTTP server on one or two MCU. If you have not this one it&#39;s easy to understand and adapt to your MCU. For PPPos I&#39;ve found none."}], "tags": [], "owner": {"reputation": 2597, "user_id": 4755321, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e93c2832d8928731e8e5d2f6d665c4a0?s=128&d=identicon&r=PG&f=1", "display_name": "Jacek \u015alimok", "link": "https://stackoverflow.com/users/4755321/jacek-%c5%9alimok"}, "is_accepted": false, "score": 9, "last_activity_date": 1486643301, "creation_date": 1486643301, "answer_id": 42136758, "question_id": 42116869, "link": "https://stackoverflow.com/questions/42116869/stm32-lwip-pppos-implementation/42136758#42136758", "title": "STM32 LWIP PPPos implementation", "body": "<p>While I cannot publish my example, the general idea when it comes to integrating TCP/IP stack of your choice with its PPP driver is the same among all serial modems and all TCP/IP stacks that I've worked with.</p>\n\n<p>Generally as you've mentioned, you start with configuring the modem using AT commands - things like checking whether SIM card is present, whether it requires PIN, specifying PIN if needed, checking if it has successfully registered in the network. Possibly reading additional information data such as IMEI, IMSI as well as diagnostic data: signal quality, BER etc. Once you're done, you switch the modem to \"data\" mode (see ATD*99), wait for the modem to respond to that command and pass the responsibility to the TCP/IP stack, as at this point the modem starts talking PPP.</p>\n\n<p>When it comes to integrating your modem with the stack so it can communicate with it, the implementations I've encountered all require implementing some form of low-level API functions for the stack. For LwIP, the wiki page you've linked in the \"PPP over serial\" section, it is described quite well how those functions should behave. Because TCP/IP stacks are just a software library not tied to specific hardware and they can be run on almost anything (assuming sufficient resources), specific API implementations such as the one discussed are not always provided - there would have to be a ton of examples for it to provide any value. Although if you google around for it, you might find someone having done it for the MCU that you use personally. Assuming you've already done the part where you successfully comminicate with your modem using AT commands, it shouldn't be much more other than using the send/receive functions you already have. Some slight changes may be required, such as adjusting their behavior (synchronous->asynchronous or vice versa) or redirecting received data to the TCP/IP API receive function instead of your AT command parser. Nonetheless, most of the necessary hard work should be done already.</p>\n\n<p>Once the TCP/IP stack takes over, you continue with the modem using provided stack PPP API. For LwIP see functions such as: pppSetAuth, pppOverSerialOpen. Those will cause the stack to internally handle the necessary communication with the modem over PPP: LCP, PAP/CHAP, IPCP. Once that part is done (you retrieve IP configuration data from the network) it becomes transparent how this operates - it becomes one (of possibly multiple) network interfaces and you use it just as any other one, for example using socket API.</p>\n"}], "owner": {"reputation": 471, "user_id": 856355, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2d935d00fa0cb11b903d4ef5c5b55b37?s=128&d=identicon&r=PG", "display_name": "lgm42", "link": "https://stackoverflow.com/users/856355/lgm42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5587, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1600055581, "creation_date": 1486566804, "question_id": 42116869, "link": "https://stackoverflow.com/questions/42116869/stm32-lwip-pppos-implementation", "title": "STM32 LWIP PPPos implementation", "body": "<p>On my STM32F7 I have to connect a 3G modem using serial port.\nI can communicate with the modem using AT commands.\nI would like to use PPPos (PPP over serial) library from LWIP to enter in PPP mode. So I take a long look at the official documentation</p>\n\n<p><a href=\"http://lwip.wikia.com/wiki/PPP\" rel=\"nofollow noreferrer\">http://lwip.wikia.com/wiki/PPP</a></p>\n\n<p>and </p>\n\n<p><a href=\"https://github.com/tabascoeye/lwip/blob/master/doc/ppp.txt\" rel=\"nofollow noreferrer\">https://github.com/tabascoeye/lwip/blob/master/doc/ppp.txt</a></p>\n\n<p>I understand the guideline but I'm really surprise there is no implementation example with serial port. Indeed, I think there is a lot of modems that have a serial interface, so I thought i can easily find an example of use.</p>\n\n<p>Anyone have already done that or has an example ?</p>\n"}, {"tags": ["c++", "c++11", "template-specialization", "type-alias"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 3, "creation_date": 1486568984, "post_id": 42116813, "comment_id": 71403643, "body": "What&#39;s wrong with the separate line?"}, {"owner": {"reputation": 4160, "user_id": 371239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/decd51f67e3f34f4d6c526fed9b4a2dd?s=128&d=identicon&r=PG", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/371239/vahagn"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1486570078, "post_id": 42116813, "comment_id": 71404429, "body": "@Barry I missed that the separate line can actually be <b>before</b> the definition of specialization. So by placing it before I achieved what I wanted. It is a macro like this: <code>DEFINE_OBJECT(name) using name = BB&lt;name&gt;; template &lt;&gt; struct BB&lt;name&gt;</code>"}], "owner": {"reputation": 4160, "user_id": 371239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/decd51f67e3f34f4d6c526fed9b4a2dd?s=128&d=identicon&r=PG", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/371239/vahagn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1486568989, "creation_date": 1486566676, "last_edit_date": 1486568989, "question_id": 42116813, "link": "https://stackoverflow.com/questions/42116813/how-to-combine-type-alias-with-the-definition-of-full-specialization", "title": "How to combine type alias with the definition of full specialization?", "body": "<p>I can combine type alias with class definition like this:</p>\n\n<pre><code>using XX = struct AA { };\n</code></pre>\n\n<p>But how can I combine type alias with the definition of a <strong>full</strong> specialization?</p>\n\n<pre><code>template &lt; typename... &gt; struct BB;\n\nusing YY = template &lt;&gt; struct BB&lt;int&gt; { }; // error: expected type-specifier before \u2018template\u2019\n</code></pre>\n\n<p>Is there a nice workaround that would allow to escape a separate line <code>using YY = BB&lt;int&gt;;</code> after the definition of <code>BB&lt;int&gt;</code>? </p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 2, "creation_date": 1486566808, "post_id": 42116775, "comment_id": 71402107, "body": "Cannot reproduce, you probably need to link <code>boost::log</code> <a href=\"http://melpon.org/wandbox/permlink/arXefqk76MJoV7SC\" rel=\"nofollow noreferrer\">melpon.org/wandbox/permlink/arXefqk76MJoV7SC</a>"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6725078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5ddbb07ced1d48adb620329db20442?s=128&d=identicon&r=PG&f=1", "display_name": "baichuan.he", "link": "https://stackoverflow.com/users/6725078/baichuan-he"}, "edited": false, "score": 0, "creation_date": 1486568791, "post_id": 42116913, "comment_id": 71403493, "body": "thanks,but i also link -lboost_system, -lboost_thread, -lboost_log, -lpthread, and define BOOST_LOG_DYN_LINK"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 61, "user_id": 6725078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5ddbb07ced1d48adb620329db20442?s=128&d=identicon&r=PG&f=1", "display_name": "baichuan.he", "link": "https://stackoverflow.com/users/6725078/baichuan-he"}, "edited": false, "score": 0, "creation_date": 1486568848, "post_id": 42116913, "comment_id": 71403542, "body": "@object yes, that&#39;s the <code>link</code> part of my answer"}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 3, "last_activity_date": 1486617008, "last_edit_date": 1486617008, "creation_date": 1486566906, "answer_id": 42116913, "question_id": 42116775, "link": "https://stackoverflow.com/questions/42116775/error-ld-returned-1-exit-status-when-i-use-boostlogadd-file-log-functi/42116913#42116913", "title": "\u201cerror ld returned 1 exit status\u201d when i use &quot;boost::log::add_file_log()&quot; function", "body": "<p>You need to build and link the Boost log library for this code to work, see <a href=\"http://www.boost.org/doc/libs/1_62_0/libs/log/doc/html/log/installation/config.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_62_0/libs/log/doc/html/log/installation/config.html</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 6725078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5ddbb07ced1d48adb620329db20442?s=128&d=identicon&r=PG&f=1", "display_name": "baichuan.he", "link": "https://stackoverflow.com/users/6725078/baichuan-he"}, "is_accepted": false, "score": 0, "last_activity_date": 1486611808, "last_edit_date": 1486611808, "creation_date": 1486572199, "answer_id": 42118860, "question_id": 42116775, "link": "https://stackoverflow.com/questions/42116775/error-ld-returned-1-exit-status-when-i-use-boostlogadd-file-log-functi/42118860#42118860", "title": "\u201cerror ld returned 1 exit status\u201d when i use &quot;boost::log::add_file_log()&quot; function", "body": "<p>When I add <code>-lboost_log_setup</code> and rebuild the project, this problem is resolved.</p>\n\n<p>So\uff0cit should be link <code>-lboost_system -lboost_thread -lboost_log -lpthread -lboost_log_setup</code></p>\n"}], "owner": {"reputation": 61, "user_id": 6725078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5ddbb07ced1d48adb620329db20442?s=128&d=identicon&r=PG&f=1", "display_name": "baichuan.he", "link": "https://stackoverflow.com/users/6725078/baichuan-he"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1486617008, "creation_date": 1486566594, "last_edit_date": 1486568432, "question_id": 42116775, "link": "https://stackoverflow.com/questions/42116775/error-ld-returned-1-exit-status-when-i-use-boostlogadd-file-log-functi", "title": "\u201cerror ld returned 1 exit status\u201d when i use &quot;boost::log::add_file_log()&quot; function", "body": "<p>The code\uff1a</p>\n\n<pre><code>#include &lt;boost/log/support/date_time.hpp&gt;\n#include &lt;boost/log/core.hpp&gt;\n#include &lt;boost/log/trivial.hpp&gt;\n#include &lt;boost/log/expressions.hpp&gt;\n#include &lt;boost/log/sinks/text_file_backend.hpp&gt;\n#include &lt;boost/log/utility/setup/file.hpp&gt;\n#include &lt;boost/log/utility/setup/common_attributes.hpp&gt;\n#include &lt;boost/log/sources/severity_logger.hpp&gt;\n#include &lt;boost/log/sources/record_ostream.hpp&gt;\n\n\nint main()\n{\n    boost::log::add_file_log(\n       boost::log::keywords::auto_flush = true,\n       boost::log::keywords::file_name = \"log%Y-%m-%d_%H-%M-%S.%N.log\",\n       boost::log::keywords::rotation_size = 10 * 1024 * 1024,\n\n       /*if delete here, the compiler was successful*/\n       boost::log::keywords::format  = \"[%TimeStamp%] (%Severity%) : %Message%\",\n       boost::log::keywords::min_free_space=3 * 1024 * 1024\n       );\n}\n</code></pre>\n\n<p>I try compile this code,but prompt information\uff1a\u201cerror ld returned 1 exit status\u201d.</p>\n\n<p>if I delete <code>boost::log::keywords::format  = \"[%TimeStamp%] (%Severity%) : %Message%\",</code> this code can be compiled successfully.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1486565406, "post_id": 42116274, "comment_id": 71401069, "body": "<a href=\"https://softwareengineering.stackexchange.com/questions/70086/why-are-c-template-error-messages-so-horrific\">Relevant</a>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1486567958, "post_id": 42116274, "comment_id": 71402906, "body": "Concepts could produce a mess of error messages too, see <a href=\"http://honermann.net/blog/2016/07/18/refining-concepts-improving-error-messages/\" rel=\"nofollow noreferrer\">example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 4, "last_activity_date": 1486565781, "creation_date": 1486565781, "answer_id": 42116461, "question_id": 42116274, "link": "https://stackoverflow.com/questions/42116274/what-about-enable-if-makes-it-hard-for-compilers-to-generate-readable-error-me/42116461#42116461", "title": "What about `enable_if` makes it hard for compilers to generate readable error messages?", "body": "<p><code>std::enable_if</code> sounds like something special that can enable/disable <em>function templates</em> and <em>class templates</em> given a compile-time boolean expression... but it isn't. Here's a possible implementation:</p>\n\n<pre><code>template &lt;bool TCond, typename T = void&gt; \nstruct enable_if {};\n\ntemplate &lt;typename T&gt; \nstruct enable_if&lt;true, T&gt; { using type = T; };\n</code></pre>\n\n<p>The above means:</p>\n\n<ul>\n<li><p>If <code>TCond</code> is <code>true</code>, <code>enable_if</code> will define an inner <code>type</code> type alias.</p></li>\n<li><p>If <code>TCond</code> is <code>false</code>, <code>enable_if</code> will <strong>not</strong> define an inner <code>type</code> type alias.</p></li>\n</ul>\n\n<p>When <code>enable_if</code> is being used to enable/disable something, we refer to its <code>::type</code> internal alias:</p>\n\n<pre><code>template &lt;typename T, \n          typename = std::enable_if&lt;/* something */&gt;::type&gt;\nvoid foo(T) { /* something */ }\n</code></pre>\n\n<p>If <code>::type</code> exists for the above <code>/* something */</code> condition, <code>foo</code> is well-formed. Otherwise, <strong>substitution failure</strong> occurs, triggering <a href=\"http://en.cppreference.com/w/cpp/language/sfinae\" rel=\"nofollow noreferrer\"><strong>SFINAE</strong></a>.</p>\n\n<p>The compiler <strong>isn't aware of our intent</strong> and deals with eventual errors by tracing the source of the error. It isn't aware that we meant to enable/disable some function/class in a set of functions/classes - it cannot therefore give us meaningful and intuitive errors. The best it can do is pinpoint the source of the error and give us a backtrace.</p>\n\n<p>If <code>enable_if</code> was a special keyword or a compiler intrinsic, then the errors would very likely be easier to parse.</p>\n"}], "owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 42116461, "answer_count": 1, "score": 3, "last_activity_date": 1486567811, "creation_date": 1486565341, "last_edit_date": 1486567811, "question_id": 42116274, "link": "https://stackoverflow.com/questions/42116274/what-about-enable-if-makes-it-hard-for-compilers-to-generate-readable-error-me", "title": "What about `enable_if` makes it hard for compilers to generate readable error messages?", "body": "<p>One of the \"critics\" of <code>enable_if</code> is that it produces a complete mess of error messages. So e.g. Bjarne Stroustrup wants to introduce Concepts to get around this (see <a href=\"https://www.youtube.com/watch?v=2egL4y_VpYg\" rel=\"nofollow noreferrer\">his talk (youtube)</a> or <a href=\"https://en.wikipedia.org/wiki/Concepts_(C%2B%2B)#Compiler_diagnostics\" rel=\"nofollow noreferrer\">the example (wikipedia)</a>).</p>\n\n<p>My Question: What makes it technically so challenging for compilers to produce readable output with <code>enable_if</code>?</p>\n"}, {"tags": ["c++", "sparse-matrix", "eigen", "cusolver", "suitesparse"], "comments": [{"owner": {"reputation": 602, "user_id": 6243010, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fRsda.png?s=128&g=1", "display_name": "Dohyun", "link": "https://stackoverflow.com/users/6243010/dohyun"}, "edited": false, "score": 0, "creation_date": 1486566724, "post_id": 42116271, "comment_id": 71402050, "body": "Eigen have benchmark for several problems.<a href=\"https://eigen.tuxfamily.org/dox-devel/group__TopicSparseSystems.html\" rel=\"nofollow noreferrer\">eigen.tuxfamily.org/dox-devel/group__TopicSparseSys&zwnj;&#8203;tems.html</a>"}, {"owner": {"reputation": 1126, "user_id": 2225895, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/835b68c58ccd5d56d4d4479fbcf2b2bc?s=128&d=identicon&r=PG", "display_name": "El_Loco", "link": "https://stackoverflow.com/users/2225895/el-loco"}, "reply_to_user": {"reputation": 602, "user_id": 6243010, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fRsda.png?s=128&g=1", "display_name": "Dohyun", "link": "https://stackoverflow.com/users/6243010/dohyun"}, "edited": false, "score": 0, "creation_date": 1486567603, "post_id": 42116271, "comment_id": 71402671, "body": "Thanks, don&#39;t know how I could miss that. One question, I do not see where they define <code>N</code> and <code>NNZ</code>? <code>NNZ</code> Number of NonZero?"}, {"owner": {"reputation": 1768, "user_id": 1232524, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b17e6d6e4754f145b83af11132040117?s=128&d=identicon&r=PG", "display_name": "rsp1984", "link": "https://stackoverflow.com/users/1232524/rsp1984"}, "edited": false, "score": 0, "creation_date": 1503701869, "post_id": 42116271, "comment_id": 78740337, "body": "I had the same problem a while ago and also found that SimplicialLDLT was the fastest of the bunch, yet still pretty slow on an absolute scale. I ended up reducing my problem size by lowering the resolution and then just using an off-the-shelf dense Cholesky solver from the TooN library, which was, by far, the fastest for the lower resolution. I&#39;m curious if you have gained any more insights and how you solved the problem in the end."}], "answers": [{"comments": [{"owner": {"reputation": 1126, "user_id": 2225895, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/835b68c58ccd5d56d4d4479fbcf2b2bc?s=128&d=identicon&r=PG", "display_name": "El_Loco", "link": "https://stackoverflow.com/users/2225895/el-loco"}, "edited": false, "score": 0, "creation_date": 1486568984, "post_id": 42117398, "comment_id": 71403644, "body": "Ok, thank you for valuable comments. It is indeed extremely sparse and the pattern very regular. It is actually just one main diagonal and 4 sub-diagonals, and the pattern is always the same. Do you think <code>omp</code> could be useful here?"}], "tags": [], "owner": {"reputation": 25314, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": false, "score": 4, "last_activity_date": 1486568318, "creation_date": 1486568318, "answer_id": 42117398, "question_id": 42116271, "link": "https://stackoverflow.com/questions/42116271/best-way-of-solving-sparse-linear-systems-in-c-gpu-possible/42117398#42117398", "title": "Best way of solving sparse linear systems in C++ - GPU Possible?", "body": "<p>Your matrix is extremely sparse and corresponds to a discretization on a 2D domain, so it is expected that <code>SimplicialLDLT</code> is the fastest here. Since the sparsity pattern is fixed, call <code>analyzePattern</code> once, and then <code>factorize</code> instead of <code>compute</code>. This should save some milliseconds. Moreover, since you're working on a regular grid, you might also try to bypass the re-ordering step using <code>NaturalOrdering</code> (not 100% sure, you have to bench). If that's still not fast enough, you might search for a Cholesky solver tailored for skyline matrices (the Cholesky factorization is much simpler and thus faster in this case).</p>\n"}], "owner": {"reputation": 1126, "user_id": 2225895, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/835b68c58ccd5d56d4d4479fbcf2b2bc?s=128&d=identicon&r=PG", "display_name": "El_Loco", "link": "https://stackoverflow.com/users/2225895/el-loco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2148, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1486586591, "creation_date": 1486565333, "last_edit_date": 1486586591, "question_id": 42116271, "link": "https://stackoverflow.com/questions/42116271/best-way-of-solving-sparse-linear-systems-in-c-gpu-possible", "title": "Best way of solving sparse linear systems in C++ - GPU Possible?", "body": "<p>I am currently working on a project where we need to solve</p>\n\n<p><code>|Ax - b|^2</code>.</p>\n\n<p>In this case, <code>A</code> is a very sparse matrix and <code>A'A</code> has at most 5 nonzero elements in each row. </p>\n\n<p>We are working with images and the dimension of <code>A'A</code> is <code>NxN</code> where N is the number of pixels. In this case <code>N = 76800</code>. We plan to go to <code>RGB</code> and then the dimension will be <code>3Nx3N</code>. </p>\n\n<p>In matlab solving <code>(A'A)\\(A'b)</code> takes about 0.15 s, using doubles. </p>\n\n<p>I have now done some experimenting with <code>Eigens</code> sparse solvers. I have tried:</p>\n\n<pre><code>SimplicialLLT\nSimplicialLDLT\nSparseQR\nConjugateGradient\n</code></pre>\n\n<p>and some different orderings. The by far best so far is </p>\n\n<pre><code>SimplicialLDLT\n</code></pre>\n\n<p>which takes about <code>0.35 - 0.5</code> using <code>AMDOrdering</code>. </p>\n\n<p>When I for example use <code>ConjugateGradient</code> it takes roughly <code>6 s</code>, using <code>0</code> as initilization.</p>\n\n<p>The code for solving the problem is:    </p>\n\n<pre><code>    A_tot.makeCompressed();\n     // Create solver\n    Eigen::SimplicialLDLT&lt;Eigen::SparseMatrix&lt;float&gt;, Eigen::Lower, Eigen::AMDOrdering&lt;int&gt; &gt; solver;\n    // Eigen::ConjugateGradient&lt;Eigen::SparseMatrix&lt;float&gt;, Eigen::Lower&gt; cg;\n    solver.analyzePattern(A_tot);\n    t1 = omp_get_wtime();\n    solver.compute(A_tot);\n    if (solver.info() != Eigen::Success)\n     {\n         std::cerr &lt;&lt; \"Decomposition Failed\" &lt;&lt; std::endl;\n         getchar();\n     }\n    Eigen::VectorXf opt = solver.solve(b_tot);\n    t2 = omp_get_wtime();\n    std::cout &lt;&lt; \"Time for normal equations: \" &lt;&lt; t2 - t1 &lt;&lt; std::endl;\n</code></pre>\n\n<p>This is the first time I use sparse matrices in C++ and its solvers. For this project speed is crucial and below <code>0.1 s</code> is a minimum. </p>\n\n<p>I would like to get some feedback on which would be the best strategy here. For example one is supposed to be able to use <code>SuiteSparse</code> and <code>OpenMP</code> in <code>Eigen</code>. What are your experiences about these types of problems? Is there a way of extracting the structure for example? And should <code>conjugateGradient</code> really be that slow?</p>\n\n<p>Edit:</p>\n\n<p>Thanks for som valuable comments! Tonight I have been reading a bit about cuSparse on Nvidia. It seems to be able to do factorisation an even solve systems. In particular it seems one can reuse pattern and so forth. The question is how fast could this be and what is the possible overhead?</p>\n\n<p>Given that the amount of data in my matrix A is the same as in an image, the memory copying should not be such an issue. I did some years ago software for real-time 3D reconstruction and then you copy data for each frame and a slow version still runs in over 50 Hz. So if the factorization is much faster it is a possible speed-up? In particualar the rest of the project will be on the GPU, so if one can solve it there directly and keep the solution it is no drawback I guess.</p>\n\n<p>A lot has happened in the field of Cuda and I am not really up to date.</p>\n\n<p>Here are two links I found: <a href=\"https://developer.nvidia.com/cusolver\" rel=\"nofollow noreferrer\">Benchmark?</a>, <a href=\"https://se.mathworks.com/help/distcomp/examples/benchmarking-a-b-on-the-gpu.html\" rel=\"nofollow noreferrer\">MatlabGPU</a></p>\n"}, {"tags": ["c++", "c++11", "fstream", "c++03", "libstdc++"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486567510, "post_id": 42116186, "comment_id": 71402619, "body": "It is standard-mandated. See e.g. <a href=\"http://stackoverflow.com/questions/17536570/reading-and-writing-to-the-same-file-using-the-same-fstream\" title=\"reading and writing to the same file using the same fstream\">stackoverflow.com/questions/17536570/&hellip;</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486568252, "post_id": 42116186, "comment_id": 71403100, "body": "@n.m.: <i>&quot;So your stream.seekp(1) solution, which devolves to a C fseek, is correct.&quot;</i> Is it mandated that that&#39;s how seekp works? And how come it works on CentOS 7 then? The accepted answer there claims that the GNU C library doesn&#39;t have this restriction but that&#39;s not my experience here on CentOS 6. So now I&#39;m even more confused!"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486572961, "post_id": 42116186, "comment_id": 71406547, "body": "The claim about glibc may or may not be correct, or may or may not refer to only some glibc versions. I have never seen it confirmed in the documentation."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1516583663, "post_id": 42116186, "comment_id": 83734057, "body": "This workaround has been in place for months and apparently works great. But I&#39;d still like to know the official word for peace of mind."}], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486566670, "creation_date": 1486565109, "last_edit_date": 1495542383, "question_id": 42116186, "link": "https://stackoverflow.com/questions/42116186/why-does-this-file-stream-with-no-error-flags-set-fail-to-read-unless-i-do-tel", "title": "Why does this file stream, with no error flags set, fail to read unless I do tellg()?", "body": "<p>I have a fstream that seems to get into a phantom failure state, even though examining it (via conversion to <code>bool</code>) reveals no error flags. Subsequent reads fail, which is unexpected.</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;cassert&gt;\n\nint main()\n{\n    const unsigned int SAMPLE_COUNT = 2;\n\n    // Setup - create file with two \"samples\"; each sample has a double and a float\n    {\n        std::ofstream ofs(\"/tmp/ffs\", std::ios::binary);\n\n        const double colA[SAMPLE_COUNT] = {  1.0,    2.0 };\n        const float  colB[SAMPLE_COUNT] = { 42.0,  100.0 };\n\n        for (size_t i = 0; i &lt; SAMPLE_COUNT; i++) {\n            ofs.write((char*)&amp;colA[i], sizeof(colA[i]));\n            ofs.write((char*)&amp;colB[i], sizeof(colB[i]));\n        }\n    }\n\n    // Actual testcase\n    {\n        std::fstream fs(\"/tmp/ffs\", std::ios::binary | std::ios::out | std::ios::in);\n        assert(fs);\n\n        unsigned int sample_n = 0;\n        while (true) {\n            double a;\n            fs.read((char*)&amp;a, sizeof(a));\n\n            if (!fs) {\n                std::cerr &lt;&lt; \"No more samples\\n\";\n                break;\n            }\n\n            std::cerr &lt;&lt; \"Sample \" &lt;&lt; (++sample_n) &lt;&lt; \" first column = \" &lt;&lt; a &lt;&lt; '\\n';\n\n\n            // Read column B\n            float b;\n            fs.read((char*)&amp;b, sizeof(b));\n            assert(fs);\n            std::cerr &lt;&lt; \"Current value second column = \" &lt;&lt; b &lt;&lt; '\\n';\n\n            // Multiply it by two and write back\n            b *= 2;\n            fs.seekp(-sizeof(b), std::ios::cur);\n            fs.write((char*)&amp;b, sizeof(b));\n            assert(fs);\n\n            #ifdef DO_THE_TELLG\n                // Unless I do this, the `fs.read` on the next iteration fails!\n                // So the loop ends, and I get only the first sample transformed in my file.\n                fs.tellg();\n            #endif\n        }\n    }\n\n    // Inspection - should see values 84 and 200, but see 84 and 100 instead.\n    {\n        std::ifstream ifs(\"/tmp/ffs\", std::ios::binary);\n\n        std::cerr &lt;&lt; \"All values at end:\\n\";\n        for (size_t i = 0; i &lt; SAMPLE_COUNT; i++) {\n\n            double a;\n            float  b;\n\n            ifs.read((char*)&amp;a, sizeof(a));\n            ifs.read((char*)&amp;b, sizeof(b));\n\n            std::cerr &lt;&lt; a &lt;&lt; '\\t' &lt;&lt; b &lt;&lt; '\\n';\n        }\n\n        assert(ifs);\n    }\n}\n</code></pre>\n\n<p>Observe in the following output, only the first sample was \"parsed\", and so at the end the second sample retains its original value <code>100</code>:</p>\n\n<blockquote>\n<pre><code>[root@localhost ~]# ./test\nSample 1 first column = 1\nCurrent value second column = 42\nNo more samples\nAll values at end:\n1       84\n2       100\n</code></pre>\n</blockquote>\n\n<p>If I perform a <code>tellg()</code> or <code>tellp()</code> operation on it, the subsequent read succeeds, so the loop is not prematurely ended and the second sample is also multiplied by 2, to produce <code>200</code>:</p>\n\n<blockquote>\n<pre><code>[root@localhost ~]# ./test\nSample 1 first column = 1\nCurrent value second column = 42\nSample 2 first column = 2\nCurrent value second column = 100\nNo more samples\nAll values at end:\n1       84\n2       200\n</code></pre>\n</blockquote>\n\n<p>This only occurs for me in the following environment:</p>\n\n<ul>\n<li>CentOS 6 x86_64, GCC 4.4.7</li>\n<li>CentOS 6 x86_64, GCC 4.8.2 (via devtoolset-2)</li>\n</ul>\n\n<p>I get the expected behaviour, with or without <code>tellg()</code>/<code>tellp()</code>, on:</p>\n\n<ul>\n<li><a href=\"http://coliru.stacked-crooked.com/a/f43798a9f5facda7\" rel=\"nofollow noreferrer\">Coliru, GCC 6.3.0</a></li>\n<li>CentOS 7</li>\n</ul>\n\n<p><em>(Where a listed compiler supports both C++03 and C++11, I have tried it under both and observed no difference.)</em></p>\n\n<p><strong>Does my program have UB? Or, is this a libstdc++ bug that I need to work around?</strong></p>\n\n<hr>\n\n<p><strong>Update:</strong> okay, so <a href=\"https://stackoverflow.com/a/12546243/560648\">this is a known thing</a>. But Dietmar doesn't say whether this is standard-mandated, or a libstdc++ bug. To me, it looks like <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=40732\" rel=\"nofollow noreferrer\">bug 40732</a>, but that was <code>RESOLVED</code>/<code>WONTFIX</code>, so why would my program work as expected under Coliru and CentOS 7? Ideally I'd like to get a better handle on precisely what's going on before putting this workaround in place.</p>\n"}, {"tags": ["c++", "c++builder", "c++builder-10.1-berlin"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1486677444, "post_id": 42116067, "comment_id": 71461725, "body": "There is no single setting to do this process-wide.  But you can loop through the global <code>TScreen::Forms[]</code> list, updating each active Form as needed."}, {"owner": {"reputation": 39, "user_id": 6040740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i422Q.jpg?s=128&g=1", "display_name": "M5er", "link": "https://stackoverflow.com/users/6040740/m5er"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1486737603, "post_id": 42116067, "comment_id": 71488849, "body": "@RemyLebeau that&#39;s exactly what I did... Thanks to your email :-)"}], "owner": {"reputation": 39, "user_id": 6040740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i422Q.jpg?s=128&g=1", "display_name": "M5er", "link": "https://stackoverflow.com/users/6040740/m5er"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486564786, "creation_date": 1486564786, "question_id": 42116067, "link": "https://stackoverflow.com/questions/42116067/change-text-color-bg-color-etc-in-the-entire-application", "title": "Change Text Color, BG Color etc in the entire application", "body": "<p>Is it possible to change text color/size, bg colors, forms ratios all in one shot? What I am tryin gto accomplish is accommodating people with disabilities who might want to use a high contrast theme in the app so they can see text better. Increase font size and so on... </p>\n\n<p>For example:</p>\n\n<pre><code>testForm-&gt;ScaleBy(90,100);\n</code></pre>\n\n<p>This scales down the form by 10%.</p>\n\n<p>I can change all this stuff on each individual form... But is there a way to do it in a settings form that can carry the change to the entire application?</p>\n\n<p>I am using C++ Builder 6 and just started playing with C++ Builder - Berlin. Or Rad Studio Berlin Edition (I think this is their latest one).</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "edited": false, "score": 1, "creation_date": 1486564831, "post_id": 42116056, "comment_id": 71400607, "body": "Well the main difference is that the first one is not valid C++..."}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 2, "creation_date": 1486564872, "post_id": 42116056, "comment_id": 71400649, "body": "The syntax is different. The second declares a pointer to <code>struct Stack</code> called <code>stack</code>, the first is invalid. The reason it&#39;s invalid is that it doesn&#39;t fit the grammar of either language, c or c++."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1486564892, "post_id": 42116056, "comment_id": 71400663, "body": "First is invalid in C and C++."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1486564977, "post_id": 42116056, "comment_id": 71400740, "body": "In c++ use <code>Stack* stack</code> instead. The <code>struct</code> is not needed."}], "answers": [{"tags": [], "owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "is_accepted": false, "score": 1, "last_activity_date": 1486565259, "last_edit_date": 1486565259, "creation_date": 1486564946, "answer_id": 42116132, "question_id": 42116056, "link": "https://stackoverflow.com/questions/42116056/what-is-the-difference-between-struct-stack-stack-and-struct-stack-stack/42116132#42116132", "title": "What is the difference between &quot;struct *Stack stack&quot; and &quot;struct Stack* stack&quot;?", "body": "<blockquote>\n  <p>While writing a code when I am writing struct *Stack stack then code is not working</p>\n</blockquote>\n\n<p>This is because <code>struct *Stack stack</code> is not correct syntax. This would imply a pointer named <code>Stack stack</code>, which is not a valid name, pointing to a <code>struct</code>, which is not valid in <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> or <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a>, as you have to indicate what type of <code>struct</code> your pointer will be pointing to. The word <code>struct</code> is not standalone. </p>\n\n<blockquote>\n  <p>when I am writing it like struct Stack* stack code is working</p>\n</blockquote>\n\n<p>On the other hand, the declaration :</p>\n\n<pre><code>struct Stack* stack;\n</code></pre>\n\n<p>implies a pointer named <code>stack</code> which points to a <code>struct Stack</code> (which you have defined somewhere).</p>\n"}], "owner": {"reputation": 11, "user_id": 7535040, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vHVC_00Tjk0/AAAAAAAAAAI/AAAAAAAAAQo/qtMC4FuKmy8/photo.jpg?sz=128", "display_name": "Ashish Shukla", "link": "https://stackoverflow.com/users/7535040/ashish-shukla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1486565259, "creation_date": 1486564749, "last_edit_date": 1486564806, "question_id": 42116056, "link": "https://stackoverflow.com/questions/42116056/what-is-the-difference-between-struct-stack-stack-and-struct-stack-stack", "title": "What is the difference between &quot;struct *Stack stack&quot; and &quot;struct Stack* stack&quot;?", "body": "<p>While writing a code when I am writing <code>struct *Stack stack</code> then code is not working and when I am writing it like <code>struct Stack* stack</code> code is working,can someone tell me the difference between these two code?</p>\n"}, {"tags": ["c++", "amazon-web-services", "aws-sdk", "amazon-cloudwatch", "aws-sdk-cpp"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5528626, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-O61Fsz5duyY/AAAAAAAAAAI/AAAAAAAAAAA/LRAdx8QQ0IY/photo.jpg?sz=128", "display_name": "Attila Csabai", "link": "https://stackoverflow.com/users/5528626/attila-csabai"}, "edited": false, "score": 0, "creation_date": 1486720956, "post_id": 42147170, "comment_id": 71478332, "body": "With <code>AWSConfigFileProfileConfigLoader</code> it worked. Thank you."}], "tags": [], "owner": {"reputation": 7598, "user_id": 734691, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/QywkD.jpg?s=128&g=1", "display_name": "Jonathan Henson", "link": "https://stackoverflow.com/users/734691/jonathan-henson"}, "is_accepted": true, "score": 1, "last_activity_date": 1486675523, "creation_date": 1486675523, "answer_id": 42147170, "question_id": 42116003, "link": "https://stackoverflow.com/questions/42116003/metric-data-goes-to-wrong-region-in-aws-sdk-for-c-cloudwatch-example/42147170#42147170", "title": "Metric data goes to wrong region in AWS SDK for C++ CloudWatch example", "body": "<p>You can use this class:</p>\n\n<p><a href=\"https://github.com/aws/aws-sdk-cpp/blob/master/aws-cpp-sdk-core/include/aws/core/config/AWSProfileConfigLoader.h#L59\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-cpp/blob/master/aws-cpp-sdk-core/include/aws/core/config/AWSProfileConfigLoader.h#L59</a></p>\n\n<p>Then use the values there to pass to your client configuration.</p>\n"}], "owner": {"reputation": 53, "user_id": 5528626, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-O61Fsz5duyY/AAAAAAAAAAI/AAAAAAAAAAA/LRAdx8QQ0IY/photo.jpg?sz=128", "display_name": "Attila Csabai", "link": "https://stackoverflow.com/users/5528626/attila-csabai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 42147170, "answer_count": 1, "score": 1, "last_activity_date": 1487018589, "creation_date": 1486564608, "last_edit_date": 1487018589, "question_id": 42116003, "link": "https://stackoverflow.com/questions/42116003/metric-data-goes-to-wrong-region-in-aws-sdk-for-c-cloudwatch-example", "title": "Metric data goes to wrong region in AWS SDK for C++ CloudWatch example", "body": "<p>The \"AWS SDK for C++ Documentation Examples\" README says:</p>\n\n<blockquote>\n  <p>To build and run these examples, you'll need: ... AWS credentials, either configured in a local AWS credentials file or by setting the AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY environment variables.</p>\n</blockquote>\n\n<p><a href=\"https://github.com/awsdocs/aws-doc-sdk-examples/tree/master/cpp\" rel=\"nofollow noreferrer\">https://github.com/awsdocs/aws-doc-sdk-examples/tree/master/cpp</a></p>\n\n<p>Credentials file:</p>\n\n<pre><code>$ cat ~/.aws/credentials\n[default]\naws_access_key_id = ...\naws_secret_access_key = ...\noutput = text\nregion = us-west-2\n</code></pre>\n\n<p>The AWS client command works correctly:</p>\n\n<pre><code>$ aws cloudwatch put-metric-data \\\n--namespace aws-sdk-cpp-test \\\n--metric-name \"New Posts\" \\\n--timestamp \"$(date)\" \\\n--value 0.7 \\\n--unit Count\n</code></pre>\n\n<p>However, if I run the <code>cw_put_metric_data</code> example, metrics go to us-east-1 instead of us-west-2. </p>\n\n<p>EDIT:\nAws::CloudWatch::CloudWatchClient is instantiated with the default Aws::Client:ClientConfiguration in which region is hard-wired to US_EAST_1. So the question is how to make use of ~/.aws/credentials?</p>\n"}, {"tags": ["c++", "performance", "variable-assignment"], "comments": [{"owner": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "edited": false, "score": 3, "creation_date": 1486564495, "post_id": 42115918, "comment_id": 71400354, "body": "Please comment on the use case. Why can&#39;t you just keep the vector?"}, {"owner": {"reputation": 134, "user_id": 6193296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73d8ec36b305dafc0400da38fb9bb4ab?s=128&d=identicon&r=PG&f=1", "display_name": "Shih-Chan Huang", "link": "https://stackoverflow.com/users/6193296/shih-chan-huang"}, "edited": false, "score": 0, "creation_date": 1486564692, "post_id": 42115918, "comment_id": 71400498, "body": "Sorry for the wrong tags."}, {"owner": {"reputation": 134, "user_id": 6193296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73d8ec36b305dafc0400da38fb9bb4ab?s=128&d=identicon&r=PG&f=1", "display_name": "Shih-Chan Huang", "link": "https://stackoverflow.com/users/6193296/shih-chan-huang"}, "edited": false, "score": 0, "creation_date": 1486564774, "post_id": 42115918, "comment_id": 71400564, "body": "Because the vector life cycle is fleeting, so we have to keep some of its value."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1486564861, "post_id": 42115918, "comment_id": 71400640, "body": "In c++ <code>struct</code> is redundant when using with type, if you are not going to modify argument use const reference"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1486565055, "post_id": 42115918, "comment_id": 71400804, "body": "Any reason why a,b,c ... aren&#39;t int references - because that would speed things up lots"}, {"owner": {"reputation": 134, "user_id": 6193296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73d8ec36b305dafc0400da38fb9bb4ab?s=128&d=identicon&r=PG&f=1", "display_name": "Shih-Chan Huang", "link": "https://stackoverflow.com/users/6193296/shih-chan-huang"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1486565214, "post_id": 42115918, "comment_id": 71400926, "body": "@slava :thank you , I&#39;ll make it const."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1486565296, "post_id": 42115918, "comment_id": 71400992, "body": "<code>int a, b, c, d, e .... z;</code> can&#39;t you make this an array?"}, {"owner": {"reputation": 134, "user_id": 6193296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73d8ec36b305dafc0400da38fb9bb4ab?s=128&d=identicon&r=PG&f=1", "display_name": "Shih-Chan Huang", "link": "https://stackoverflow.com/users/6193296/shih-chan-huang"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1486565313, "post_id": 42115918, "comment_id": 71401006, "body": "@UKMonkey: Like I said, the vector will change by the next cycle, so I have to use memory to keep the value, rather than a reference referring to it."}, {"owner": {"reputation": 134, "user_id": 6193296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73d8ec36b305dafc0400da38fb9bb4ab?s=128&d=identicon&r=PG&f=1", "display_name": "Shih-Chan Huang", "link": "https://stackoverflow.com/users/6193296/shih-chan-huang"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1486565446, "post_id": 42115918, "comment_id": 71401109, "body": "@drescherjm I&#39;m afraid that the answer is no, because these variables are owned by different managers."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 4, "creation_date": 1486566007, "post_id": 42115918, "comment_id": 71401535, "body": "I&#39;m pretty sure this is an XY problem - perhaps you&#39;d get better answers if you said your actually problem rather than your attempt to resolve it?"}, {"owner": {"reputation": 134, "user_id": 6193296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73d8ec36b305dafc0400da38fb9bb4ab?s=128&d=identicon&r=PG&f=1", "display_name": "Shih-Chan Huang", "link": "https://stackoverflow.com/users/6193296/shih-chan-huang"}, "edited": false, "score": 0, "creation_date": 1486566712, "post_id": 42115918, "comment_id": 71402038, "body": "NO, this is not an XY problem. I presented the problem and my method, and I&#39;m here to ask for the better one. The real question is described above literally, HOW DO I SPEED THIS UP ?"}], "answers": [{"comments": [{"owner": {"reputation": 134, "user_id": 6193296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73d8ec36b305dafc0400da38fb9bb4ab?s=128&d=identicon&r=PG&f=1", "display_name": "Shih-Chan Huang", "link": "https://stackoverflow.com/users/6193296/shih-chan-huang"}, "edited": false, "score": 0, "creation_date": 1486617640, "post_id": 42116180, "comment_id": 71424910, "body": "Thanks for your advice, sir."}], "tags": [], "owner": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "is_accepted": false, "score": 2, "last_activity_date": 1486565093, "creation_date": 1486565093, "answer_id": 42116180, "question_id": 42115918, "link": "https://stackoverflow.com/questions/42115918/the-most-efficient-way-to-assign-values-to-a-bunch-of-variables/42116180#42116180", "title": "The most efficient way to assign values to a bunch of variables", "body": "<p>The performance of the function calls is not your problem here. The compiler will be able to optimize it quite well.</p>\n\n<p>However, seeing so many variables makes me cringe. Unless you really have a meaning behind each and every of the variables (apart from being letters of the alphabet), you should think about another design. If you really want to map the alphabet to numbers, you should just use an array.</p>\n"}, {"comments": [{"owner": {"reputation": 134, "user_id": 6193296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73d8ec36b305dafc0400da38fb9bb4ab?s=128&d=identicon&r=PG&f=1", "display_name": "Shih-Chan Huang", "link": "https://stackoverflow.com/users/6193296/shih-chan-huang"}, "edited": false, "score": 0, "creation_date": 1486565790, "post_id": 42116246, "comment_id": 71401373, "body": "Thank both of you, same question here, does it really enhance my method ?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "edited": false, "score": 0, "creation_date": 1486566008, "post_id": 42116246, "comment_id": 71401536, "body": "@koalo because it shows intent cleaner way and and makes it easier to process for optimizer."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "edited": false, "score": 0, "creation_date": 1486566753, "post_id": 42116246, "comment_id": 71402066, "body": "@koalo because you may want to change implementation details and keep public interface intact. Though <code>numbers</code> should be private, but that is a different story."}, {"owner": {"reputation": 134, "user_id": 6193296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73d8ec36b305dafc0400da38fb9bb4ab?s=128&d=identicon&r=PG&f=1", "display_name": "Shih-Chan Huang", "link": "https://stackoverflow.com/users/6193296/shih-chan-huang"}, "reply_to_user": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "edited": false, "score": 0, "creation_date": 1486566981, "post_id": 42116246, "comment_id": 71402247, "body": "@koalo Because in real situation, numberpool is a structure more than just a vector in it, it should be accessed by entry, but I just simplied it into vector."}, {"owner": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "reply_to_user": {"reputation": 134, "user_id": 6193296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73d8ec36b305dafc0400da38fb9bb4ab?s=128&d=identicon&r=PG&f=1", "display_name": "Shih-Chan Huang", "link": "https://stackoverflow.com/users/6193296/shih-chan-huang"}, "edited": false, "score": 0, "creation_date": 1486567112, "post_id": 42116246, "comment_id": 71402331, "body": "@Shih-ChanHuang So in contrast to your statement above, you have some side constraints. So you should specify them in the question!"}, {"owner": {"reputation": 134, "user_id": 6193296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73d8ec36b305dafc0400da38fb9bb4ab?s=128&d=identicon&r=PG&f=1", "display_name": "Shih-Chan Huang", "link": "https://stackoverflow.com/users/6193296/shih-chan-huang"}, "reply_to_user": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "edited": false, "score": 0, "creation_date": 1486567344, "post_id": 42116246, "comment_id": 71402493, "body": "@koalo sorry about my fault :&#39;("}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1486565272, "creation_date": 1486565272, "answer_id": 42116246, "question_id": 42115918, "link": "https://stackoverflow.com/questions/42115918/the-most-efficient-way-to-assign-values-to-a-bunch-of-variables/42116246#42116246", "title": "The most efficient way to assign values to a bunch of variables", "body": "<p>Use method instead of standalone function and assign natural way:</p>\n\n<pre><code>struct numberpool{\n    vector&lt;int&gt; numbers(100);\n    int get( size_t tag ) const { return numbers[tag] };\n};\n\nint main(){\n    numberpool pool;  \n    ...... // pool initialization\n\n    int a = pool.get(1);\n    int b = pool.get(5);\n\n    ....and so on.\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 134, "user_id": 6193296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73d8ec36b305dafc0400da38fb9bb4ab?s=128&d=identicon&r=PG&f=1", "display_name": "Shih-Chan Huang", "link": "https://stackoverflow.com/users/6193296/shih-chan-huang"}, "edited": false, "score": 0, "creation_date": 1486617720, "post_id": 42118666, "comment_id": 71424935, "body": "Copying a block of memory may or may not be faster, many thanks, I&#39;ll remember that"}], "tags": [], "owner": {"reputation": 194, "user_id": 5802276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f55f97bea0dc3f4d25395f71048f2b9?s=128&d=identicon&r=PG&f=1", "display_name": "Boris Glick", "link": "https://stackoverflow.com/users/5802276/boris-glick"}, "is_accepted": true, "score": 0, "last_activity_date": 1486577028, "last_edit_date": 1486577028, "creation_date": 1486571628, "answer_id": 42118666, "question_id": 42115918, "link": "https://stackoverflow.com/questions/42115918/the-most-efficient-way-to-assign-values-to-a-bunch-of-variables/42118666#42118666", "title": "The most efficient way to assign values to a bunch of variables", "body": "<p>If the majority of your \"tag\" indices are grouped closely together, you can copy the underlying data as a single block:</p>\n\n<pre><code>struct subrange{\n    static size_t min_ndx() constexpr { return 1; }\n    static size_t max_ndx() constexpr { return 23; }\n    static size_t storage_size() constexpr { return max_ndx() - min_ndx() + 1; }\n\n    array&lt;int, storage_size()&gt; storage;\n    int outlier_99; // Avoid copying indices between 24 and 99\n\n    // accessors\n    int &amp;a() { return storage[1 - min_ndx()]; }\n    int &amp;b() { return storage[5 - min_ndx()]; }\n    int &amp;c() { return storage[23 - min_ndx()]; }\n    int &amp;d() { return outlier_99; }\n\n    // Constructor allows numberpool to copy its vector\n    subrange(const vector&lt;int&gt;&amp; numbers)\n        :storage(numbers.cbegin() + min_ndx(),\n                 numbers.cbegin() + min_ndx() + storage_size()),\n        outlier_99(numbers[99])\n    {}\n};\n\nstruct numberpool{\n    vector&lt;int&gt; numbers(100);\n    subrange copy_subrange( ) const {\n        return subrange(numbers); };\n    };\n\nmain()\n{\n    numberpool pool;  \n    ...... // pool initialization\n\n    // Copy a subset of memory, including data you're interested in,\n    // and some chunks in between you're not.\n    auto extracted = pool.copy_subrange();\n\n    int sum = extracted.a() + extracted.b() + extracted.c() + extracted.d();\n</code></pre>\n\n<p>Copying a block of memory may or may not be faster, depending on your exact situation.  When in doubt, try both ways.</p>\n"}], "owner": {"reputation": 134, "user_id": 6193296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73d8ec36b305dafc0400da38fb9bb4ab?s=128&d=identicon&r=PG&f=1", "display_name": "Shih-Chan Huang", "link": "https://stackoverflow.com/users/6193296/shih-chan-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 42118666, "answer_count": 3, "score": -3, "last_activity_date": 1486577028, "creation_date": 1486564389, "last_edit_date": 1486567416, "question_id": 42115918, "link": "https://stackoverflow.com/questions/42115918/the-most-efficient-way-to-assign-values-to-a-bunch-of-variables", "title": "The most efficient way to assign values to a bunch of variables", "body": "<p>Suppose we have some integer variables, and all of them should get their values from a struct called \"numberpool\" via function call, and the value assignment should only be done by \"entrykey\":    </p>\n\n<pre><code>struct numberpool{\n    vector&lt;int&gt; numbers(100);\n};\n\nvoid assign(struct numberpool&amp; src, int entrykey, int&amp; dest){  // call by reference\n    dest = src.numbers[tag];\n    return ;\n}\n\nint main(){\n    struct numberpool pool;  \n    ...... // pool initialization\n\n    int a, b, c, d, e .... z;   // 26 integers declaration\n\n    // Assigning\n    assign(pool, 1, a);\n    assign(pool, 5, b);\n    assign(pool, 23, c);\n\n    ....and so on.\n\n    return 0;\n}\n</code></pre>\n\n<p>I'd like to know, is this the fastest way to complete this job? I doubt that there is more efficient way to do this, due to the frequently function calls.<br>\nWhat if I define another struct containing all the int variables, and just call a function once, would it help ?</p>\n"}, {"tags": ["c++", "linux", "compilation", "g++"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1486564293, "post_id": 42115803, "comment_id": 71400195, "body": "The compilation error seems to be rather straightforward: the compiled code does not have a <code>main()</code>. What&#39;s so unclear about that?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1486564554, "post_id": 42115803, "comment_id": 71400396, "body": "Both for static and dynamic libraries, there are plenty of tutorials if you just search a little."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486564606, "post_id": 42115803, "comment_id": 71400440, "body": "Cannot copy and paste code from your screenshot."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1486564762, "post_id": 42115803, "comment_id": 71400556, "body": "@Sam it is unclear (to the OP) what to do with this information. A library shouldn&#39;t have <code>main()</code>."}, {"owner": {"reputation": 48, "user_id": 7534797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2875d2621a3f21cce2ef0200f2ae5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Swaraj Dubey", "link": "https://stackoverflow.com/users/7534797/swaraj-dubey"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486564954, "post_id": 42115803, "comment_id": 71400721, "body": "@n.m. is right, there is no main(), apologies if i provided the source code in the form of a screenshot, here is the code in raw format:  #include&lt;iostream&gt; #include &quot;serialib.h&quot; #ifdef <b>linux</b> #define DEVICE_PORT &quot;/dev/ttyO1&quot; #endif int main() {        serialib LS;        return 0; }   This is a bit different than the source code in the screenshot however this is good enough as the class being accessed is external."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486565025, "post_id": 42115803, "comment_id": 71400779, "body": "It seems your Linux computer is configured to use distcc and this configuration is broken. I don&#39;t recommend you to deal with distcc at this point. Try disabling distcc (read the manual). This is only a warning though."}, {"owner": {"reputation": 48, "user_id": 7534797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2875d2621a3f21cce2ef0200f2ae5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Swaraj Dubey", "link": "https://stackoverflow.com/users/7534797/swaraj-dubey"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486565234, "post_id": 42115803, "comment_id": 71400942, "body": "@n.m. Noted. However first I would want to know whether my steps are correct or incorrect (still researching on that), after that I can look into the other tools that possess problems. :)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1486565412, "post_id": 42115803, "comment_id": 71401078, "body": "Ignore the word &#39;library&#39;. You have two C++ source files (seruallib.cpp and uart.cpp) and one header. Build a program out of them. Don&#39;t try to build any libraries, they are not needed and only distract you."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486565546, "post_id": 42115803, "comment_id": 71401191, "body": "Your first step is correct. The second one is from outer space."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486565609, "post_id": 42115803, "comment_id": 71401234, "body": "<a href=\"https://stackoverflow.com/posts/42115803/edit\">edit</a> your question, don&#39;t post updates in comments."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1486576359, "post_id": 42115803, "comment_id": 71408624, "body": "Your first command shows <code>serialib.c</code> but you said the file is <code>serialib.cpp</code> - which is it?"}], "answers": [{"comments": [{"owner": {"reputation": 48, "user_id": 7534797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2875d2621a3f21cce2ef0200f2ae5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Swaraj Dubey", "link": "https://stackoverflow.com/users/7534797/swaraj-dubey"}, "edited": false, "score": 0, "creation_date": 1486577865, "post_id": 42120326, "comment_id": 71409527, "body": "That&#39;s correct, realized all of those are true only after posting the question, should have researched a bit more. Same result as my posted solution and much shorter indeed. Thank you for the reference to the GCC guide and providing a solution. :)"}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 2, "last_activity_date": 1486576591, "creation_date": 1486576591, "answer_id": 42120326, "question_id": 42115803, "link": "https://stackoverflow.com/questions/42115803/compiling-an-external-library-on-linux/42120326#42120326", "title": "Compiling an external library on Linux", "body": "<blockquote>\n  <ol>\n  <li><code>g++ -c -Wall -Werror -fPIC serialib.c</code> to convert to PIC which gives the following error:</li>\n  </ol>\n</blockquote>\n\n<p>The \"error\" is not an error, it's a warning, telling you that your distcc setup is broken, but that it compiled locally.</p>\n\n<p>That command doesn't \"convert to PIC\", it compiles the file <code>serialib.c</code> and produces a compiled object file, <code>serialib.o</code></p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li><code>g++ serialib.cpp -L /home/debian/serialib.h</code></li>\n  </ol>\n</blockquote>\n\n<p>This is just nonsense. It tries to build a program from <code>serialib.cpp</code> and use the directory <code>/home/debian/serialib.h</code> (which isn't a directory!) to find libraries.</p>\n\n<p>You don't need to \"compile a library\" you can just compile both the source files and link them together into a program. Either:</p>\n\n<pre><code>g++ -c serialib.cpp \ng++ -c uart.cpp\ng++ serialib.o uart.o -o uart\n</code></pre>\n\n<p>Or all in one command:</p>\n\n<pre><code>g++ serialib.cpp uart.cpp -o uart\n</code></pre>\n\n<p>You should read <a href=\"http://www.network-theory.co.uk/docs/gccintro/\" rel=\"nofollow noreferrer\">An Introduction to GCC</a> to understand the commands, not just enter bogus commands without understanding them.</p>\n"}, {"tags": [], "owner": {"reputation": 48, "user_id": 7534797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2875d2621a3f21cce2ef0200f2ae5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Swaraj Dubey", "link": "https://stackoverflow.com/users/7534797/swaraj-dubey"}, "is_accepted": false, "score": 0, "last_activity_date": 1486577393, "creation_date": 1486577393, "answer_id": 42120554, "question_id": 42115803, "link": "https://stackoverflow.com/questions/42115803/compiling-an-external-library-on-linux/42120554#42120554", "title": "Compiling an external library on Linux", "body": "<p>I have found a solution to this problem, hope this helps for all the future readers with similar problems. I have my own source code uart.cpp (Given in the question) which I want to compile, the external library is <strong><em>serialib</em></strong> that contains two main files (serialib.h and serialib.cpp), you will want to replace the following commands with respect to the files you have</p>\n\n<p><strong>Step 1: Compiling with position independent code</strong></p>\n\n<p><em>g++ -c -Wall -Werror -fpic serialib.cpp</em></p>\n\n<p><strong>Step 2: Creating a shared library</strong></p>\n\n<p><em>g++ -shared -o libserialib.so serialib.o</em> , here the library is <strong>libserialib.so</strong>.</p>\n\n<p><strong>Step 3: Linking your source code with library</strong></p>\n\n<p><em>g++ -L /home/debian -lserialib uart.cpp -o uart</em></p>\n\n<p><em>g++ -L /home/debian -Wall -o test uart.cpp -lserialib</em></p>\n\n<p>You may save the library at a different path and you may have a different name of course. Suppose you have a library called libabc.so at the directory /home/user/myDir then the commands will be like:</p>\n\n<p><em>g++ -L /home/user/myDir -labc your_code.cpp -o your_code</em></p>\n\n<p><em>g++ -L /home/user/myDir -Wall -o test your_code.cpp -labc</em></p>\n\n<p><code>test</code> is out own program, lserialib is actually looking for libserialib.so and not serialib.o as gcc/g++ assumes all libraries start with <code>lib</code> and end with .so or .a and you can see the same goes for labc as it will look for libabc.so thus it is important to make sure your library name begins with <code>lib</code> and ends with .so or .a </p>\n\n<p><strong>Step 4: Making library available at run time</strong></p>\n\n<p>Here we provide the path where the library is actually stored, I saved it in the directory /home/debian which is why my command looks like:</p>\n\n<p><em>export LD_LIBRARY_PATH=/home/debian:$LD_LIBRARY_PATH</em></p>\n\n<p>if your library is saved at /path/to/file then the command will look like:</p>\n\n<p><em>export LD_LIBRARY_PATH=/path/to/file:$LD_LIBRARY_PATH</em></p>\n\n<p>This is to help the loader find the shared library and to view this path: <em>echo $LD_LIBRARY_PATH</em> and to unset this: <em>unset LD_LIBRARY_PATH</em></p>\n\n<p>To execute the program type either ./test or ./uart and in case of any modification to the main source code (uart.cpp in this case) , simply repeat step 3. I found the following link very useful: <a href=\"http://www.cprogramming.com/tutorial/shared-libraries-linux-gcc.html\" rel=\"nofollow noreferrer\">http://www.cprogramming.com/tutorial/shared-libraries-linux-gcc.html</a> . Thank you to all of you who took time to read this question and especially those who gave me suggestions. If anyone has more or better solutions, feel free to post them here to assist future readers :).</p>\n"}], "owner": {"reputation": 48, "user_id": 7534797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2875d2621a3f21cce2ef0200f2ae5ce?s=128&d=identicon&r=PG&f=1", "display_name": "Swaraj Dubey", "link": "https://stackoverflow.com/users/7534797/swaraj-dubey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2345, "favorite_count": 0, "accepted_answer_id": 42120326, "answer_count": 2, "score": 0, "last_activity_date": 1486578131, "creation_date": 1486564083, "last_edit_date": 1486578131, "question_id": 42115803, "link": "https://stackoverflow.com/questions/42115803/compiling-an-external-library-on-linux", "title": "Compiling an external library on Linux", "body": "<p>Good Day Everyone,</p>\n\n<p>N.B - This problem has been solved - I have provided my own solution in the answer section however the solution provided by Jonathan is much shorter. Nevertheless, this was the following question I originally posted: </p>\n\n<p>I am basically trying to compile a serial library (for UART communication) on Linux however I am not really sure how to correctly compile (I have mentioned what I have done so far below), any suggestions would be highly valuable. I am using the serialib library - which is composed of 2 main files (<strong>serialib.h</strong> and <strong>serialib.cpp</strong>) , you may directly view the source code of these files here (scroll all the way to the bottom and view the files in new tabs): <a href=\"http://serialib.free.fr/html/classserialib.html\" rel=\"nofollow noreferrer\">http://serialib.free.fr/html/classserialib.html</a> </p>\n\n<p>I transferred these files (serialib.h and serialib.cpp) to my BeagleBone Black micro-controller which is running Debian (Wheezy) , g++/gcc (Debian 4.6.3-14) 4.6.3. I wrote my own program (<strong>uart.cpp</strong> is my file name) to access the functions provided by this library, this is what I wrote:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"serialib.h\"\n#ifdef __linux__\n#define DEVICE_PORT \"/dev/ttyO1\"\n#endif\nint main()\n{\n    serialib LS;\n    return 0;\n}\n</code></pre>\n\n<p>So as you can see I am trying to access the 'seriallib' class. serialib.h, serialib.cpp and uart.cpp are all in the home directory. I also manually added the iostream library in serialib.cpp as I did not see it being declared in the original source code.</p>\n\n<p>Now I am really unsure of how to compile such external libraries but so far I tried the following steps:</p>\n\n<ol>\n<li><strong>g++ -c -Wall -Werror -fPIC serialib.c</strong> to convert to PIC which gives the following error:</li>\n</ol>\n\n<p>distcc[3142] (dcc_parse_hosts) Warning: /home/debian/.distcc/zeroconf/hosts contained no hosts; can't distribute work\ndistcc[3142] (dcc_zeroconf_add_hosts) CRITICAL! failed to parse host file.\ndistcc[3142] (dcc_build_somewhere) Warning: failed to distribute, running locally instead</p>\n\n<ol start=\"2\">\n<li><strong>g++ serialib.cpp -L /home/debian/serialib.h</strong> which gives the following error:</li>\n</ol>\n\n<p>/usr/lib/gcc/arm-linux-gnueabihf/4.6/../../../arm-linux-gnueabihf/crt1.o: In function <code>_start':\n(.text+0x30): undefined reference to</code>main'\ncollect2: ld returned 1 exit status\ndistcc[3210] ERROR: compile serialib.cpp on localhost failed</p>\n\n<p>As of now I am still finding out how to compile this and if I manage to work this out then I'll post my solution here too. Once again any suggestion will be highly valuable. Thank you all :) .</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 4, "creation_date": 1486563903, "post_id": 42115685, "comment_id": 71399902, "body": "Two or three <i>what</i> ?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1486563933, "post_id": 42115685, "comment_id": 71399925, "body": "You can&#39;t set it through a cast. And double can&#39;t represent all values so it can&#39;t hold just 2 or 3 decimal places anyways."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1486563938, "post_id": 42115685, "comment_id": 71399933, "body": "You can&#39;t.  You control the precision when you output it with proper formatting."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1486563939, "post_id": 42115685, "comment_id": 71399934, "body": "@Quentin My best <i>guess</i> would be - decimal places."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486563958, "post_id": 42115685, "comment_id": 71399950, "body": "Unwise to cripple values, always work to maximum precision, then if required restrict the output. Anyway <code>double</code> has no concept of decimal places."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1486564028, "post_id": 42115685, "comment_id": 71400002, "body": "Is this for a money calculation?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1486564031, "post_id": 42115685, "comment_id": 71400005, "body": "I&#39;m voting to close this question as off-topic because this is about as clear as mud. Please refine the question as the comments suggest you should."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1486564032, "post_id": 42115685, "comment_id": 71400006, "body": "Do note that if this is supposed to represent money then you should not be using a floating point type to begin with."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1486564559, "post_id": 42115685, "comment_id": 71400400, "body": "I doubt this is proper duplicate"}, {"owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1486579052, "post_id": 42115685, "comment_id": 71410242, "body": "@Fran&#231;oisAndrieux Ok, BTW, if you see the timestamps it was quasi simultaneous..."}, {"owner": {"reputation": 44, "user_id": 6624014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934401fb3fb241d47f1f8a57315e6bcd?s=128&d=identicon&r=PG&f=1", "display_name": "Sakar Ghimire", "link": "https://stackoverflow.com/users/6624014/sakar-ghimire"}, "edited": false, "score": 0, "creation_date": 1486655832, "post_id": 42115685, "comment_id": 71448678, "body": "Guys I dont want to format the output. I want to store the value in variable CorrectAnswer with max 3 precision. Actually I am trying to get double input from user and compare it with CorrectAnswer which shall be difficult for user to answer correctly if more than 3 precision are compared."}], "answers": [{"comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1486564418, "post_id": 42115809, "comment_id": 71400289, "body": "<i>\u201cNOTE: This does not round the values for you.\u201d</i> Doesn\u2019t it? Also, you\u2019ll probably want to set <code>fixed</code>, too."}, {"owner": {"reputation": 786, "user_id": 2393256, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/171c5497271ae6531326680ade33a88f?s=128&d=identicon&r=PG", "display_name": "user2393256", "link": "https://stackoverflow.com/users/2393256/user2393256"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1486564775, "post_id": 42115809, "comment_id": 71400568, "body": "thanks. updated the post"}], "tags": [], "owner": {"reputation": 786, "user_id": 2393256, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/171c5497271ae6531326680ade33a88f?s=128&d=identicon&r=PG", "display_name": "user2393256", "link": "https://stackoverflow.com/users/2393256/user2393256"}, "is_accepted": false, "score": 2, "last_activity_date": 1486564767, "last_edit_date": 1486564767, "creation_date": 1486564097, "answer_id": 42115809, "question_id": 42115685, "link": "https://stackoverflow.com/questions/42115685/how-can-i-set-the-level-of-precision-of-a-value-obtained-through-static-casting/42115809#42115809", "title": "How can I set the level of precision of a value obtained through static casting?", "body": "<p>You can't set a precision for a cast. But you can for the output</p>\n\n<pre><code>double d = 3.14159265358979;\nstd::cout.precision(3);\nstd::cout &lt;&lt; \"Pi: \" &lt;&lt; std::fixed &lt;&lt; d &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1486564426, "creation_date": 1486564426, "answer_id": 42115935, "question_id": 42115685, "link": "https://stackoverflow.com/questions/42115685/how-can-i-set-the-level-of-precision-of-a-value-obtained-through-static-casting/42115935#42115935", "title": "How can I set the level of precision of a value obtained through static casting?", "body": "<p>You can use integer arithmetic for that:</p>\n\n<pre><code>const int precision = 100;\ndouble correctAnswer = precision * a / b / static_cast&lt;double&gt;( precision );\n</code></pre>\n\n<p>you need to make sure that <code>precision * a</code> still fits to <code>int</code> or use bigger type and when you compare/output <code>correctAnswer</code> you still need to handle <code>double</code> properly</p>\n"}], "owner": {"reputation": 44, "user_id": 6624014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934401fb3fb241d47f1f8a57315e6bcd?s=128&d=identicon&r=PG&f=1", "display_name": "Sakar Ghimire", "link": "https://stackoverflow.com/users/6624014/sakar-ghimire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "closed_date": 1486564477, "answer_count": 2, "score": 1, "last_activity_date": 1486679959, "creation_date": 1486563781, "last_edit_date": 1486679959, "question_id": 42115685, "link": "https://stackoverflow.com/questions/42115685/how-can-i-set-the-level-of-precision-of-a-value-obtained-through-static-casting", "closed_reason": "Duplicate", "title": "How can I set the level of precision of a value obtained through static casting?", "body": "<p>I want to set the precision to max 2 or three for the variable <code>correctAnswer</code>. I dont want to format the output but store in the memory with max 3 precision. Both <code>a</code> and <code>b</code> are integer values.  </p>\n\n<pre><code>double correctAnswer = static_cast&lt;double&gt;(a) / b;\n</code></pre>\n"}]