[{"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1479945080, "post_id": 40776033, "comment_id": 68775750, "body": "<code>std::cout &lt;&lt; treasureLoaction;</code> You can&#39;t do that with an array. Although you spelled it wrong also."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 1, "creation_date": 1479945193, "post_id": 40776033, "comment_id": 68775769, "body": "<code>treasureLoaction != treasureLocation</code>, closing as a simple typographical error."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1479945817, "last_edit_date": 1479945817, "creation_date": 1479945277, "answer_id": 40776077, "question_id": 40776033, "link": "https://stackoverflow.com/questions/40776033/array-identifier-array-is-undefined/40776077#40776077", "title": "Array: identifier &quot;array&quot; is undefined", "body": "<p>There is a typo</p>\n\n<pre><code>int treasureLoaction[2];\n            ^^^^^^^^\n</code></pre>\n\n<p>Take into account that if an array has <code>n</code> elements then the valid range of indices is <code>[0, n-1]</code></p>\n\n<p>And this statement</p>\n\n<pre><code>std::cout &lt;&lt; treasureLoaction;\n</code></pre>\n\n<p>does not outputs the elements of the array as you might think.</p>\n\n<p>You could do it in a loop as for example</p>\n\n<pre><code>for ( int x : treasureLocation ) std::cout &lt;&lt; x &lt;&lt; ' ';\nstd::cout &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 258, "user_id": 6557674, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfd9ed22c45e6c223b602e3dbca05e3a?s=128&d=identicon&r=PG&f=1", "display_name": "TyAnthoney", "link": "https://stackoverflow.com/users/6557674/tyanthoney"}, "is_accepted": false, "score": 1, "last_activity_date": 1479945370, "creation_date": 1479945370, "answer_id": 40776085, "question_id": 40776033, "link": "https://stackoverflow.com/questions/40776033/array-identifier-array-is-undefined/40776085#40776085", "title": "Array: identifier &quot;array&quot; is undefined", "body": "<p>Try iterating through the array to print its contents like this</p>\n\n<pre><code>for (int i = 0; i &lt; your array length; i++) cout &lt;&lt; array[i];\n</code></pre>\n\n<p>unless you are trying to print the address, and it also looks like you have a spelling error in treasureLoaction. </p>\n"}], "owner": {"reputation": 1, "user_id": 7202704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57b3d77ceedc01df82ec1794133474fc?s=128&d=identicon&r=PG&f=1", "display_name": "HazardFlames", "link": "https://stackoverflow.com/users/7202704/hazardflames"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1067, "favorite_count": 0, "closed_date": 1479945981, "answer_count": 2, "score": -2, "last_activity_date": 1479945817, "creation_date": 1479945002, "question_id": 40776033, "link": "https://stackoverflow.com/questions/40776033/array-identifier-array-is-undefined", "closed_reason": "Not suitable for this site", "title": "Array: identifier &quot;array&quot; is undefined", "body": "<p>Every time I run this code in Visual Studio 2015 it shows the error identifier \"treasureLocation\" is undefined... what am I doing wrong?</p>\n\n<pre><code>int main()\n{\nint gridSize [2];\nint gridX = 0;\nint gridY = 0;\nint treasureLoaction[2];\nint end;\n\n\nstd :: cout &lt;&lt; \"what size grid would you like to play on?\" &lt;&lt; std :: endl;\n\nstd :: cin &gt;&gt; gridSize [1];\nstd :: cin &gt;&gt; gridSize [2];\n\ntreasureLocation[1] = rand() % gridSize[1] + 1;\ntreasureLocation[2] = rand() % gridSize[2] + 1;\n\nwhile (gridY &lt; gridSize[2]) {\n    gridY++;\n    while (gridX &lt; gridSize[1]) {\n        std::cout &lt;&lt; \"* \";\n        gridX++;\n    } \n    std::cout &lt;&lt; \"\" &lt;&lt; std::endl;\n    gridX = 0;\n};\n\nstd::cout &lt;&lt; treasureLoaction;\nstd::cin &gt;&gt; end;\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "floating-point", "precision"], "comments": [{"owner": {"reputation": 24793, "user_id": 1798593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be41e365336e709f1bfc2c9866eac8e9?s=128&d=identicon&r=PG", "display_name": "Patricia Shanahan", "link": "https://stackoverflow.com/users/1798593/patricia-shanahan"}, "edited": false, "score": 2, "creation_date": 1479944363, "post_id": 40775898, "comment_id": 68775529, "body": "In binary arithmetic, 1/5 is a non-terminating fraction."}, {"owner": {"reputation": 97, "user_id": 6473526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/984afa247a9c3c501c45adc4fcd039fb?s=128&d=identicon&r=PG&f=1", "display_name": "inhaler", "link": "https://stackoverflow.com/users/6473526/inhaler"}, "reply_to_user": {"reputation": 24793, "user_id": 1798593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be41e365336e709f1bfc2c9866eac8e9?s=128&d=identicon&r=PG", "display_name": "Patricia Shanahan", "link": "https://stackoverflow.com/users/1798593/patricia-shanahan"}, "edited": false, "score": 0, "creation_date": 1479944527, "post_id": 40775898, "comment_id": 68775587, "body": "could you explain more please @PatriciaShanahan"}, {"owner": {"reputation": 97, "user_id": 6473526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/984afa247a9c3c501c45adc4fcd039fb?s=128&d=identicon&r=PG&f=1", "display_name": "inhaler", "link": "https://stackoverflow.com/users/6473526/inhaler"}, "reply_to_user": {"reputation": 24793, "user_id": 1798593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be41e365336e709f1bfc2c9866eac8e9?s=128&d=identicon&r=PG", "display_name": "Patricia Shanahan", "link": "https://stackoverflow.com/users/1798593/patricia-shanahan"}, "edited": false, "score": 0, "creation_date": 1479944676, "post_id": 40775898, "comment_id": 68775630, "body": "ok,i kind of get it @PatriciaShanahan"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 6473526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/984afa247a9c3c501c45adc4fcd039fb?s=128&d=identicon&r=PG&f=1", "display_name": "inhaler", "link": "https://stackoverflow.com/users/6473526/inhaler"}, "edited": false, "score": 0, "creation_date": 1479944973, "post_id": 40775969, "comment_id": 68775720, "body": "What can i do here then ? @Hcorg"}, {"owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "reply_to_user": {"reputation": 97, "user_id": 6473526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/984afa247a9c3c501c45adc4fcd039fb?s=128&d=identicon&r=PG&f=1", "display_name": "inhaler", "link": "https://stackoverflow.com/users/6473526/inhaler"}, "edited": false, "score": 0, "creation_date": 1479945075, "post_id": 40775969, "comment_id": 68775748, "body": "either choose a precision for comparison or use some library for working on fractions. Fixed point arithmetic could help (for example Boost Multiprecission)"}, {"owner": {"reputation": 97, "user_id": 6473526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/984afa247a9c3c501c45adc4fcd039fb?s=128&d=identicon&r=PG&f=1", "display_name": "inhaler", "link": "https://stackoverflow.com/users/6473526/inhaler"}, "edited": false, "score": 0, "creation_date": 1479945446, "post_id": 40775969, "comment_id": 68775828, "body": "The problem i was solving says : take 2 integer a and b input &amp; check a/b results in terminating decimal . I took input as double cause int/int division will result in integer  &amp; upcasting will results the same @Hcorg"}, {"owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "reply_to_user": {"reputation": 97, "user_id": 6473526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/984afa247a9c3c501c45adc4fcd039fb?s=128&d=identicon&r=PG&f=1", "display_name": "inhaler", "link": "https://stackoverflow.com/users/6473526/inhaler"}, "edited": false, "score": 0, "creation_date": 1479945604, "post_id": 40775969, "comment_id": 68775857, "body": "you can&#39;t do that using floating point arithmetic, but you do not need to use it - see other answers :)"}], "tags": [], "owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "is_accepted": false, "score": 3, "last_activity_date": 1479944563, "creation_date": 1479944563, "answer_id": 40775969, "question_id": 40775898, "link": "https://stackoverflow.com/questions/40775898/terminating-decimal/40775969#40775969", "title": "Terminating decimal", "body": "<p>Only fractions like 1/2, 1/4, 1/8 and so on (or sum of such) are represented precisely in <code>double</code>. All others are approximations. So as a results <code>1/5 * 5</code> could equal <code>0.9999999999</code>.</p>\n\n<p>That's why one should never ever compare floating point numbers for equality (at least not without required precision, like <code>testedValue - num &lt; precision</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 24793, "user_id": 1798593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be41e365336e709f1bfc2c9866eac8e9?s=128&d=identicon&r=PG", "display_name": "Patricia Shanahan", "link": "https://stackoverflow.com/users/1798593/patricia-shanahan"}, "is_accepted": true, "score": 5, "last_activity_date": 1479945486, "creation_date": 1479945486, "answer_id": 40776097, "question_id": 40775898, "link": "https://stackoverflow.com/questions/40775898/terminating-decimal/40776097#40776097", "title": "Terminating decimal", "body": "<p>There is an easy way to ask whether a ratio has an exact, terminating representation in a given radix, in your case 10.</p>\n\n<p>Step 1 is to reduce it to its lowest terms. Divide top and bottom by their highest common factor.</p>\n\n<p>Now only the denominator matters. If every one of its prime factors is also a prime factor of the radix, the fraction will terminate in that radix. 5 is a prime factor of 10, so 1/5 terminates in decimal. 5 is not a prime factor of 2, so 1/5 does not terminate in binary.</p>\n"}], "owner": {"reputation": 97, "user_id": 6473526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/984afa247a9c3c501c45adc4fcd039fb?s=128&d=identicon&r=PG&f=1", "display_name": "inhaler", "link": "https://stackoverflow.com/users/6473526/inhaler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 1, "accepted_answer_id": 40776097, "answer_count": 2, "score": 2, "last_activity_date": 1479945486, "creation_date": 1479944160, "last_edit_date": 1592644375, "question_id": 40775898, "link": "https://stackoverflow.com/questions/40775898/terminating-decimal", "title": "Terminating decimal", "body": "<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;cstdlib&gt;\nusing namespace std;\n\nint main()\n{\ndouble a,b,res;\n\nwhile(cin&gt;&gt;a&gt;&gt;b)\n{\n    res = a/b;\n\n    if((res*b) == a)\n        cout&lt;&lt;&quot;Terminates&quot;&lt;&lt;endl;\n    else\n        cout&lt;&lt;&quot;Does not terminate&quot;&lt;&lt;endl;\n}\n\nreturn 0;\n}\n</code></pre>\n<p>So, here is my code to see if a/b results in terminating decimal or not. Some input is generating correct output, like:</p>\n<blockquote>\n<p>1/3 : Does not terminates,</p>\n<p>1/9 : Does not terminates,</p>\n<p>1/7 : Does not terminates,</p>\n<p>22/7 : Does not terminates,</p>\n<p>1/2 : Terminates.</p>\n</blockquote>\n<p>Except for 1/5 which should show: <code>1/5 : Terminates</code>, but the output is: <code>Does not terminates</code>.</p>\n<p>I know there are many issues for C++ floating points,tried google but it's like a puzzle.</p>\n"}, {"tags": ["c++", "vector", "stl", "iterator"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1479945668, "post_id": 40775853, "comment_id": 68775871, "body": "Why the <code>erase</code>? I.e., what is <code>ToRun</code> used for <b>other</b> than this?"}, {"owner": {"reputation": 449, "user_id": 5585956, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/5pwKs.png?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/5585956/sean"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1479946232, "post_id": 40775853, "comment_id": 68776018, "body": "@Cheersandhth.-Alf <code>ToRun</code> is simply a vector of specific Tasks to execute. The number of tasks depends on a configuration file so there may be a lot, or a little. I&#39;m very inexperienced with STL containers and iterators so I&#39;ve been exploring my options"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1479947539, "post_id": 40775853, "comment_id": 68776311, "body": "Well, then there&#39;s no need to <code>erase</code> each item one at a time (which is quadratic time in the order you&#39;re doing it). Simply clear the vector at the end. Or do nothing."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1479944556, "creation_date": 1479944556, "answer_id": 40775967, "question_id": 40775853, "link": "https://stackoverflow.com/questions/40775853/how-to-move-the-first-element-of-a-vector-to-the-end-of-another/40775967#40775967", "title": "How to move the first element of a vector to the end of another", "body": "<p>After this statement</p>\n\n<pre><code>ToRun.erase(ToRun.begin());\n</code></pre>\n\n<p>the iterator <code>iter</code> is invalid.</p>\n\n<p>From the C++ Standard's description of the method <code>erase</code></p>\n\n<blockquote>\n  <p>3 Effects: Invalidates iterators and references at or after the point\n  of the erase.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 449, "user_id": 5585956, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/5pwKs.png?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/5585956/sean"}, "edited": false, "score": 0, "creation_date": 1479945006, "post_id": 40776016, "comment_id": 68775733, "body": "This is what I was looking for! A loop structure but without having to worry about the iterator."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1479945583, "post_id": 40776016, "comment_id": 68775853, "body": "Regarding efficiency, the <code>move</code> has no effect on a raw pointer, while the algorithm here is O(n^2)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1479945808, "post_id": 40776016, "comment_id": 68775906, "body": "@Cheersandhth.-Alf It is pretty gross. I think an edit is in order. Thanks."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 449, "user_id": 5585956, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/5pwKs.png?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/5585956/sean"}, "edited": false, "score": 1, "creation_date": 1479946640, "post_id": 40776016, "comment_id": 68776110, "body": "@SPrashad Cheersandhth.-Alf&#39; s comment brought up a much better way to do this."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 1, "last_activity_date": 1479946554, "last_edit_date": 1479946554, "creation_date": 1479944837, "answer_id": 40776016, "question_id": 40775853, "link": "https://stackoverflow.com/questions/40775853/how-to-move-the-first-element-of-a-vector-to-the-end-of-another/40776016#40776016", "title": "How to move the first element of a vector to the end of another", "body": "<p>Erasing while iterating is always messy. If you erase the current element, how can <code>++</code> work?</p>\n\n<p>Instead try</p>\n\n<pre><code>while (!ToRun.empty()) // loop until empty\n{\n    ToRun.front()-&gt;dump(os);\n\n    Completed.push_back(std::move(ToRun.front()));\n    ToRun.erase(ToRun.begin());\n}\n</code></pre>\n\n<p>or something similar</p>\n\n<p>But that's gross when you stop and think about it. Every <code>erase</code> shifts the rest of the elements in <code>ToRun</code> back one slot adding a large amount of unnecessary iterating and copying.</p>\n\n<pre><code>for (auto &amp; run: ToRun) // or old school iterator if you prefer\n{\n    run-&gt;dump(os);\n    Completed.push_back(std::move(ToRun.front()));\n}\ntoRun.clear();\n</code></pre>\n\n<p><code>clear</code> executes only once and obliterates the whole container in one shot. Much cleaner. Just one iteration to make sure the destructors are called, and you don't destroy pointers. Winning!</p>\n\n<p>will have the same effect (assuming this isn't multithreaded, and if it is you have serious concurrency issues).</p>\n\n<p>Cheersandhth.-Alf also brings up the point that since <code>ToRun</code> appears to contain pointers, <code>std::move</code> is not necessary. All that is being moved is a pointer, and that's trivial effort.</p>\n"}], "owner": {"reputation": 449, "user_id": 5585956, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/5pwKs.png?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/5585956/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 40776016, "answer_count": 2, "score": 0, "last_activity_date": 1479946554, "creation_date": 1479943907, "last_edit_date": 1495541231, "question_id": 40775853, "link": "https://stackoverflow.com/questions/40775853/how-to-move-the-first-element-of-a-vector-to-the-end-of-another", "title": "How to move the first element of a vector to the end of another", "body": "<p>I have two vectors of the same type, shown below:</p>\n\n<pre><code>std::vector&lt;Task*&gt; ToRun;\nstd::vector&lt;Task*&gt; Completed;\n</code></pre>\n\n<p>When a <code>Task</code> is finished, it needs to be automatically moved from the <code>ToRun</code> vector container into the <code>Completed</code> vector.</p>\n\n<p><strong>ToRun Vector contains</strong> <code>TaskOne TaskTwo TaskThree ... TaskN</code></p>\n\n<p><strong>Completed Vector contains</strong> <code>nothing</code></p>\n\n<p>After the first loop through the <code>ToRun</code> vector, both vectors should look like below:</p>\n\n<p><strong>ToRun vector contains</strong> <code>TaskTwo TaskThree ... TaskN</code></p>\n\n<p><strong>Completed Vector contains</strong> <code>TaskOne</code></p>\n\n<p>The second loop through the <code>ToRun</code> vector should look like below:</p>\n\n<p><strong>ToRun vector contains</strong> <code>TaskThree ... TaskN</code></p>\n\n<p><strong>Completed Vector contains</strong> <code>TaskOne TaskTwo</code></p>\n\n<p>I have the below code but I'm receiving the following error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2lFqy.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2lFqy.jpg\" alt=\"Vector Moving Error\"></a></p>\n\n<p>Code snippet:</p>\n\n<pre><code>for (auto iter = ToRun.begin(); iter != ToRun.end(); iter++)\n{\n    (*iter)-&gt;dump(os);\n\n    Completed.push_back(std::move(ToRun.front()));\n    ToRun.erase(ToRun.begin());\n}\n</code></pre>\n\n<p>I've tried looking at <a href=\"https://stackoverflow.com/questions/15004517/moving-elements-from-stdvector-to-another-one\">this</a> and <a href=\"https://stackoverflow.com/questions/26346056/move-first-element-of-vector-to-last-element\">this</a> SO answer however I'm having no luck. From what is happening, I think that the iterator points to null after I've moved the front element.</p>\n\n<p>Should I attempt to move the Task from one container to another and then <code>remove</code> instead of erase?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1479942926, "post_id": 40775667, "comment_id": 68775107, "body": "The <code>len</code> variable should be declared as <code>size_t</code> or <code>unsigned int</code>.  I&#39;ve never encountered a string with a negative length."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1479942974, "post_id": 40775667, "comment_id": 68775119, "body": "Whatever this function is supposed to be doing, it&#39;s doing it wrong. Indexes start at 0, not 1."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1479942980, "post_id": 40775667, "comment_id": 68775124, "body": "Please edit your post with the <i>definition</i> of <code>getNum</code>."}, {"owner": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "edited": false, "score": 1, "creation_date": 1479943043, "post_id": 40775667, "comment_id": 68775140, "body": "What does it return if it doesn&#39;t return 2?"}, {"owner": {"reputation": 51, "user_id": 5396012, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/adbbbd42c9851dbfddecee74db33d815?s=128&d=identicon&r=PG&f=1", "display_name": "Upgrayded", "link": "https://stackoverflow.com/users/5396012/upgrayded"}, "edited": false, "score": 0, "creation_date": 1479943218, "post_id": 40775667, "comment_id": 68775184, "body": "&#39;getNum&#39; just returns the number of a character&#39;s location in the alphabet. ex: a - 0, b - 1, z - 25"}, {"owner": {"reputation": 51, "user_id": 5396012, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/adbbbd42c9851dbfddecee74db33d815?s=128&d=identicon&r=PG&f=1", "display_name": "Upgrayded", "link": "https://stackoverflow.com/users/5396012/upgrayded"}, "edited": false, "score": 0, "creation_date": 1479943300, "post_id": 40775667, "comment_id": 68775214, "body": "I <code>cout</code> the results of the return immediately and it doesn&#39;t print anything."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479943413, "post_id": 40775667, "comment_id": 68775244, "body": "@Upgrayded <i>&quot;and it doesn&#39;t print anything.&quot;</i> Forgot flushing? Add <code>&lt;&lt; std::flush;</code> to your <code>std::cout</code> statemen`"}, {"owner": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "edited": false, "score": 0, "creation_date": 1479943498, "post_id": 40775667, "comment_id": 68775273, "body": "@Upgrayded what&#39;s the test case that produces that result? (i.e. what are a and b when you expect 2)"}, {"owner": {"reputation": 51, "user_id": 5396012, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/adbbbd42c9851dbfddecee74db33d815?s=128&d=identicon&r=PG&f=1", "display_name": "Upgrayded", "link": "https://stackoverflow.com/users/5396012/upgrayded"}, "edited": false, "score": 0, "creation_date": 1479943579, "post_id": 40775667, "comment_id": 68775302, "body": "The same to strings are the test case. So I am using &quot;alpha&quot; and &quot;alpha&quot;."}, {"owner": {"reputation": 588, "user_id": 5521699, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/366e35c3da44f844f227e496e18463f5?s=128&d=identicon&r=PG&f=1", "display_name": "Polb", "link": "https://stackoverflow.com/users/5521699/polb"}, "edited": false, "score": 0, "creation_date": 1479943584, "post_id": 40775667, "comment_id": 68775303, "body": "<code>len</code> is returned by <code>a.length()</code>, and the call to <code>length()</code> does not return an int, so comparing <code>i</code> which is int against <code>len</code> would yield unequal and the loop keeps incrementing <code>i</code>, which will eventually go beyond the int value of <code>len</code>, that is why your code does not return 2."}, {"owner": {"reputation": 51, "user_id": 5396012, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/adbbbd42c9851dbfddecee74db33d815?s=128&d=identicon&r=PG&f=1", "display_name": "Upgrayded", "link": "https://stackoverflow.com/users/5396012/upgrayded"}, "reply_to_user": {"reputation": 588, "user_id": 5521699, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/366e35c3da44f844f227e496e18463f5?s=128&d=identicon&r=PG&f=1", "display_name": "Polb", "link": "https://stackoverflow.com/users/5521699/polb"}, "edited": false, "score": 0, "creation_date": 1479943947, "post_id": 40775667, "comment_id": 68775428, "body": "@Polb It does seem to be a loop issue. But if I <code>cout</code> inside the loop it only prints the correct number of times which is why I didn&#39;t catch it. I&#39;m not sure why the loop would only loop a certain number of times but not break out of it at the end."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5396012, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/adbbbd42c9851dbfddecee74db33d815?s=128&d=identicon&r=PG&f=1", "display_name": "Upgrayded", "link": "https://stackoverflow.com/users/5396012/upgrayded"}, "edited": false, "score": 0, "creation_date": 1479945491, "post_id": 40775880, "comment_id": 68775835, "body": "Omg thank you. I knew it was something stupid."}], "tags": [], "owner": {"reputation": 579, "user_id": 5593631, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fd12224f5e48ad3011d820a87ff442b?s=128&d=identicon&r=PG&f=1", "display_name": "Luminous_Dev", "link": "https://stackoverflow.com/users/5593631/luminous-dev"}, "is_accepted": true, "score": 1, "last_activity_date": 1479944057, "creation_date": 1479944057, "answer_id": 40775880, "question_id": 40775667, "link": "https://stackoverflow.com/questions/40775667/function-not-returning-default-value-c/40775880#40775880", "title": "Function not returning default value C++", "body": "<p>Solution:</p>\n\n<pre><code>i=0;\n</code></pre>\n\n<p>Delete below code on top of the while loop</p>\n\n<pre><code>len++;\n</code></pre>\n\n<p>You are actually getting an exception there. Because on the last run, you are having indexoutofbound exception.</p>\n\n<p>If your string is \"hello\" the length is 5 which mean your index is 0,1,2,3,4.</p>\n\n<pre><code>h e l l o\n0 1 2 3 4\n</code></pre>\n\n<p>With your len++ it raised the length to 6. And on the last round of while(5&lt; 6) you are tring to access index of 5 which does not exist</p>\n\n<p>Hope it helps</p>\n"}], "owner": {"reputation": 51, "user_id": 5396012, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/adbbbd42c9851dbfddecee74db33d815?s=128&d=identicon&r=PG&f=1", "display_name": "Upgrayded", "link": "https://stackoverflow.com/users/5396012/upgrayded"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1479997884, "accepted_answer_id": 40775880, "answer_count": 1, "score": -4, "last_activity_date": 1479944057, "creation_date": 1479942745, "question_id": 40775667, "link": "https://stackoverflow.com/questions/40775667/function-not-returning-default-value-c", "closed_reason": "Not suitable for this site", "title": "Function not returning default value C++", "body": "<p>This code will return the values of 1 or 0 when those returns are called, but if it falls to the default return value of 2, it doesn't return it. I'm sure it's something small I'm missing, but I can't figure it out. </p>\n\n<pre><code>int comp(string a, string b){\n    char x;\n    char y;\n    int i = 1;\n    int len;\n    len = a.length();\n    if(b.length() &lt; (unsigned)len){\n        len = b.length();\n    }\n    len++;\n    while(i!=len){\n        x = a.at(i);\n        y = b.at(i);\n        if(getNum(x) &lt; getNum(y)){\n            return 1;\n        }\n        else if (getNum(x) &gt; getNum(y)){\n            return 0;\n        }\n        i++;\n    }\n    return 2;   \n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "qt", "oop"], "comments": [{"owner": {"reputation": 588, "user_id": 5521699, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/366e35c3da44f844f227e496e18463f5?s=128&d=identicon&r=PG&f=1", "display_name": "Polb", "link": "https://stackoverflow.com/users/5521699/polb"}, "edited": false, "score": 0, "creation_date": 1479943203, "post_id": 40775641, "comment_id": 68775180, "body": "<code>*p = new perceptron[5][5]</code> - this does not initialise a 2D array, the allocation must be done somehow else."}, {"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "reply_to_user": {"reputation": 588, "user_id": 5521699, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/366e35c3da44f844f227e496e18463f5?s=128&d=identicon&r=PG&f=1", "display_name": "Polb", "link": "https://stackoverflow.com/users/5521699/polb"}, "edited": false, "score": 0, "creation_date": 1479943273, "post_id": 40775641, "comment_id": 68775203, "body": "How to do this?"}, {"owner": {"reputation": 588, "user_id": 5521699, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/366e35c3da44f844f227e496e18463f5?s=128&d=identicon&r=PG&f=1", "display_name": "Polb", "link": "https://stackoverflow.com/users/5521699/polb"}, "edited": false, "score": 0, "creation_date": 1479943322, "post_id": 40775641, "comment_id": 68775220, "body": "<a href=\"http://stackoverflow.com/questions/936687/how-do-i-declare-a-2d-array-in-c-using-new\" title=\"how do i declare a 2d array in c using new\">stackoverflow.com/questions/936687/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1479943652, "post_id": 40775794, "comment_id": 68775334, "body": "Ok, but how can I change my for loop for this?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1479943833, "post_id": 40775794, "comment_id": 68775391, "body": "@lukassz, you can access <code>tech</code> like you would access a 1D array and <code>p</code> like a 2D array. Take a look at <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/vector</a> to get started with using <code>std::vector</code>."}, {"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1479943960, "post_id": 40775794, "comment_id": 68775435, "body": "Ok, why this is the better way?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1479944044, "post_id": 40775794, "comment_id": 68775457, "body": "@lukassz, it removes the complexity of managing dynamically allocated memory from your code. That&#39;s already taken care of by the implementors of the standard library."}, {"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1479944166, "post_id": 40775794, "comment_id": 68775484, "body": "Ok. I assign to <code>tech</code> only one element <code>tech = new teacher(clicked);</code> it&#39;s good to make <code>tech</code> vector?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1479944225, "post_id": 40775794, "comment_id": 68775498, "body": "@lukassz, I am not sure what you mean by that."}, {"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1479944385, "post_id": 40775794, "comment_id": 68775538, "body": "Ok, when I use your constructor I get an error <code>E:\\Sieci Neuronowe\\Perceptron\\printrectangle.cpp:12: error: cannot convert &#39;bool (*)[5]&#39; to &#39;teacher*&#39; in initialization      p(std::vector&lt;perceptron&gt;(5), 5)                                     ^</code>"}, {"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1479944443, "post_id": 40775794, "comment_id": 68775560, "body": "<code>clicked</code> is a field in <code>PrintRectangle</code> class <code>bool clicked[5][5] = {};</code>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1479944528, "post_id": 40775794, "comment_id": 68775588, "body": "@lukassz, now you are bringing up issues that are not mentioned in the original post. That&#39;s why we emphasize posting a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1479944668, "post_id": 40775794, "comment_id": 68775627, "body": "Yes but your code It&#39;s not working <code>E:\\Sieci Neuronowe\\Perceptron\\printrectangle.cpp:11: error: no matching function for call to &#39;std::vector&lt;std::vector&lt;perceptron&gt; &gt;::vector(std::vector&lt;perceptron&gt;, int)&#39;      p(std::vector&lt;perceptron&gt;(5), 5)                                     ^</code>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1479944775, "post_id": 40775794, "comment_id": 68775657, "body": "@lukassz, that was a mistake on my part. It&#39;s fixed now."}, {"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1479944903, "post_id": 40775794, "comment_id": 68775701, "body": "Ok, it works thanks. Now I sould put <code>new perceptron();</code> into vector in loop?"}, {"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "edited": false, "score": 0, "creation_date": 1479944979, "post_id": 40775794, "comment_id": 68775723, "body": "Or I must make <code>operator=</code> but I get <code>E:\\Sieci Neuronowe\\Perceptron\\printrectangle.cpp:24: b\u0142\u0105d: no match for &#39;operator=&#39; (operand types are &#39;__gnu_cxx::__alloc_traits&lt;std::allocator&lt;perceptron&gt; &gt;::value_type {aka perceptron}&#39; and &#39;perceptron*&#39;)              p[i][j] = new perceptron;                      ^</code>"}, {"owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1479946274, "post_id": 40775794, "comment_id": 68776031, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/128885/discussion-between-lukassz-and-r-sahu\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1479944752, "last_edit_date": 1479944752, "creation_date": 1479943488, "answer_id": 40775794, "question_id": 40775641, "link": "https://stackoverflow.com/questions/40775641/2d-array-of-object-in-c/40775794#40775794", "title": "2D array of object in C++", "body": "<pre><code>*p = new perceptron[5][5];\n</code></pre>\n\n<p>is wrong for the following reasons.</p>\n\n<ol>\n<li><p>Type mismatch.</p>\n\n<p>Type of <code>*p</code> is <code>perceptron</code>.<br>\nType of <code>new perceptron[5][5];</code> is <code>perception (*)[5]</code>.</p>\n\n<p>There is no conversion from <code>perception (*)[5]</code> to <code>perceptron</code>.</p></li>\n<li><p>Dereferencing <code>p</code>.</p>\n\n<p>Dereferencng <code>p</code>, i.e. <code>*p</code> is going to be valid at run time only after you have allocated memory for <code>p</code>.</p></li>\n</ol>\n\n<hr>\n\n<p><strong>Solution:</strong></p>\n\n<p>You can fix your memory allocation and type mismatch problems but I strongly recommend using containers from the standard library.</p>\n\n<pre><code>class PrintRectangle : public QWidget\n{\n  public:\n\n    std::vector&lt;teacher&gt; tech;               // 1D array\n    std::vector&lt;std::vector&lt;perceptron&gt;&gt; p;  // 2D array.\n};\n</code></pre>\n\n<p>You can initialize them in the constructor with:</p>\n\n<pre><code>PrintRectangle::PrintRectangle(QWidget *parent) :\n   QWidget(parent),\n   tech(clicked),\n   p(5, std::vector&lt;perceptron&gt;(5))\n{\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 2999, "user_id": 3193748, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fd86bcbfef66aee8ab33ed1c39e8cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "lukassz", "link": "https://stackoverflow.com/users/3193748/lukassz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 0, "accepted_answer_id": 40775794, "answer_count": 1, "score": 0, "last_activity_date": 1479944752, "creation_date": 1479942566, "last_edit_date": 1479944411, "question_id": 40775641, "link": "https://stackoverflow.com/questions/40775641/2d-array-of-object-in-c", "title": "2D array of object in C++", "body": "<p>I have a problem with assign object 2d <code>[5][5]</code> array to object. </p>\n\n<p>This is my array definition</p>\n\n<pre><code>class PrintRectangle : public QWidget\n{\n\npublic:\n    bool clicked[5][5] = {};\n    teacher *tech;\n    perceptron *p;\n\n};\n</code></pre>\n\n<p>And fragment <code>perceptron</code> class</p>\n\n<pre><code>class perceptron\n{\npublic:\n    perceptron&amp; operator=(const perceptron&amp;);\n};\n</code></pre>\n\n<p>When I try to assign object to my <code>perceptron *p</code> </p>\n\n<pre><code>PrintRectangle::PrintRectangle(QWidget *parent) : QWidget(parent)\n{\n    tech = new teacher(clicked);\n\n    *p = new perceptron[5][5];\n\n    for(int i=0; i&lt;5; i++)\n    {\n        for(int j=0; j&lt;5; j++)\n        {\n            p[i][j] = new perceptron();\n            p[i][j].randweight();\n        }\n    }\n\n    double learnConst = 0.1;\n    tech-&gt;learnPerceptrons(p);\n}\n</code></pre>\n\n<p>I get an error</p>\n\n<pre><code>    E:\\Sieci Neuronowe\\Perceptron\\printrectangle.cpp:10: error: no match for 'operator=' (operand types are 'perceptron' and 'perceptron (*)[5]')\n         *p = new perceptron[5][5];\n            ^\n\nE:\\Sieci Neuronowe\\Perceptron\\printrectangle.cpp:16: error: no match for 'operator[]' (operand types are 'perceptron' and 'int')\n             p[i][j] = new perceptron();\n                 ^\n</code></pre>\n\n<p>I have only </p>\n\n<pre><code>perceptron&amp; perceptron::operator=(const perceptron&amp;){\n\n    return * this;\n}\n</code></pre>\n\n<p>In my perceptron class. How can I correct this? I don't cleary understend pointers.</p>\n"}, {"tags": ["c++", "c++11", "singleton"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1479941949, "post_id": 40775490, "comment_id": 68774791, "body": "Singletons are an anti-pattern (just glorified global variables). You&#39;ll be much happier in the long term, if you just forget about them. Don&#39;t use singletons - please!"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1479942179, "post_id": 40775490, "comment_id": 68774864, "body": "And <i>subclassing</i> <code>mysingleton</code>? That fundamentally violates the promise that there will only be one instance of <code>mysingleton</code>."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1479942261, "post_id": 40775490, "comment_id": 68774891, "body": "The problem has nothing to do with singletons. You would have seen that if you&#39;d created a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1479942674, "post_id": 40775490, "comment_id": 68775016, "body": "@user2357112: Well, you still have only one instance of the singleton, just it&#39;s one instance per derived object :-)"}], "answers": [{"comments": [{"owner": {"reputation": 564, "user_id": 2256825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/aeb1455c5a16c144d42b9701f4bf7a68?s=128&d=identicon&r=PG", "display_name": "user2256825", "link": "https://stackoverflow.com/users/2256825/user2256825"}, "edited": false, "score": 0, "creation_date": 1480099066, "post_id": 40775538, "comment_id": 68841962, "body": "why ? Its a static function through which we are trying to retrieve the instance? So there is no need of a function ? Can you please explain why a static function is not needed for a singleton."}, {"owner": {"reputation": 436, "user_id": 4103672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d483afb2d439d8eef0ade40830070c06?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Gatich", "link": "https://stackoverflow.com/users/4103672/sergey-gatich"}, "reply_to_user": {"reputation": 564, "user_id": 2256825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/aeb1455c5a16c144d42b9701f4bf7a68?s=128&d=identicon&r=PG", "display_name": "user2256825", "link": "https://stackoverflow.com/users/2256825/user2256825"}, "edited": false, "score": 0, "creation_date": 1480171416, "post_id": 40775538, "comment_id": 68858112, "body": "You need a static function to obtain an instance of your singleton. But you don&#39;t need to declare a pointer to the instance as public member. Usually it&#39;s declared as private."}], "tags": [], "owner": {"reputation": 436, "user_id": 4103672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d483afb2d439d8eef0ade40830070c06?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Gatich", "link": "https://stackoverflow.com/users/4103672/sergey-gatich"}, "is_accepted": false, "score": 1, "last_activity_date": 1479941943, "creation_date": 1479941943, "answer_id": 40775538, "question_id": 40775490, "link": "https://stackoverflow.com/questions/40775490/singleton-subclass-constructor-errors/40775538#40775538", "title": "singleton subclass constructor errors", "body": "<p>In this line you allow everyone to get the instance of your singleton directly:</p>\n\n<pre><code>static mysingleton* singletoninstance; //The one and only one instance\n</code></pre>\n\n<p>So the next line doesn't have sense:</p>\n\n<pre><code>static mysingleton* getinstance();\n</code></pre>\n\n<p>But the problem is that you declared copy constructor and destructor, but didn't defined them in your .cpp file:</p>\n\n<pre><code>mysingleton(const mysingleton&amp;);\n   ~mysingleton();\n</code></pre>\n\n<p>You also declared ordinary constructor and made it <code>public</code>. It's a mistake. You can look at <code>Gang of Four</code> book to understand singletons better. Also read <code>StackOverflow</code> articles about why singletons can be bad. Just google \"singleton stack overflow bad\".</p>\n"}, {"tags": [], "owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "is_accepted": false, "score": 0, "last_activity_date": 1479941989, "creation_date": 1479941989, "answer_id": 40775546, "question_id": 40775490, "link": "https://stackoverflow.com/questions/40775490/singleton-subclass-constructor-errors/40775546#40775546", "title": "singleton subclass constructor errors", "body": "<p>Since you have declared ~mysingleton() and ~mysingleton_child() in class definition, you should provide a definition of them.</p>\n"}], "owner": {"reputation": 564, "user_id": 2256825, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/aeb1455c5a16c144d42b9701f4bf7a68?s=128&d=identicon&r=PG", "display_name": "user2256825", "link": "https://stackoverflow.com/users/2256825/user2256825"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1479941989, "creation_date": 1479941670, "last_edit_date": 1479941900, "question_id": 40775490, "link": "https://stackoverflow.com/questions/40775490/singleton-subclass-constructor-errors", "title": "singleton subclass constructor errors", "body": "<p>I Tried to subclass a singleton and i encountered the error while i tried to print from the derived class constructor.</p>\n\n<p>mysingleton.h</p>\n\n<pre><code>#ifndef mysingleton_h\n#define mysingleton_h\n#include &lt;iostream&gt;\nclass mysingleton{\n  public:\n   static mysingleton* singletoninstance; //The one and only one instance\n   static mysingleton* getinstance();\n   virtual void dosomething() = 0 ;\n\n protected:\n   mysingleton(const mysingleton&amp;);\n   ~mysingleton();\n\n   public:\n      mysingleton(){\n\n      }//Prevent clients from creating new singleton\n\n   };\n\n\n\nclass mysingleton_child:public mysingleton\n{\n  public:\n    virtual void dosomething() {\n       std::cout &lt;&lt;\"In Child Class \\n\";\n     }\n    mysingleton_child()\n   {\n    //   std::cout &lt;&lt;\"In Child Class \\n\";\n\n   }\n~mysingleton_child();\n};\n</code></pre>\n\n<p>mysingleton.cpp</p>\n\n<pre><code>#include \"mysingleton.h\"\nmysingleton* mysingleton::singletoninstance = 0;\n\nmysingleton* mysingleton ::  getinstance()\n{\n  if( !singletoninstance )\n    singletoninstance = new  mysingleton_child();\n  return singletoninstance;  \n}\n</code></pre>\n\n<p>main func :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"mysingleton.h\"\nint main ()\n{\n   mysingleton *pointer  = mysingleton::getinstance();\n   pointer-&gt;dosomething();\n}\n</code></pre>\n\n<p>I get the below error when i uncomment the line from mysingleton_child constructor     </p>\n\n<blockquote>\n  <p>//   std::cout &lt;&lt;\"In Child Class \\n\";</p>\n</blockquote>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>Error : Undefined symbols for architecture x86_64:\n  \"mysingleton::~mysingleton()\", referenced from:\n    mysingleton_child::mysingleton_child() </p>\n</blockquote>\n\n<p>Why am i  not able to write anything in the constructor ?\nIs the derived constructor called , or just the base classes constructor is called?\nAlso, when i make the base classes destructor public everything seems to work fine. \nBut if we have a public destructor , any would destroy the singleton.</p>\n\n<p>Can you please help me with the explanation and make me understand better.</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1479942421, "post_id": 40775439, "comment_id": 68774941, "body": "What is not clear? You are obviously <i>using</i> <code>SSL</code>, but nowhere are you defining/assigning it. Where do you expect its value to come from? Thin air?"}, {"owner": {"reputation": 1421, "user_id": 1105139, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f447c3ee1f2235b3d1214c8ae40064aa?s=128&d=identicon&r=PG", "display_name": "swati saoji", "link": "https://stackoverflow.com/users/1105139/swati-saoji"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1479942592, "post_id": 40775439, "comment_id": 68774993, "body": "@JesperJuhl Thanks for commenting , I am using --  find_library (&lt;VAR&gt; name1 [path1 path2 ...]) , believed that should be setting SSL for me if the .so files is found.. am i misunderstanding that ? <a href=\"https://cmake.org/cmake/help/v3.0/command/find_library.html\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.0/command/find_library.html</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1479942841, "post_id": 40775439, "comment_id": 68775075, "body": "Maybe <code>find_library</code> is simply not finding it.."}, {"owner": {"reputation": 1421, "user_id": 1105139, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f447c3ee1f2235b3d1214c8ae40064aa?s=128&d=identicon&r=PG", "display_name": "swati saoji", "link": "https://stackoverflow.com/users/1105139/swati-saoji"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1479942975, "post_id": 40775439, "comment_id": 68775120, "body": "Yes, I understand that part, I am trying to figure out what could be the reason of it not finding the .so . I edited the question to make it more specific."}, {"owner": {"reputation": 1421, "user_id": 1105139, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f447c3ee1f2235b3d1214c8ae40064aa?s=128&d=identicon&r=PG", "display_name": "swati saoji", "link": "https://stackoverflow.com/users/1105139/swati-saoji"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1479944620, "post_id": 40775439, "comment_id": 68775617, "body": "@drescherjm no it in a subfolder , I made  the layout of the directory in my question"}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 7163417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270a689845a9d9b40ce77d9996e6375a?s=128&d=identicon&r=PG&f=1", "display_name": "pierobot", "link": "https://stackoverflow.com/users/7163417/pierobot"}, "is_accepted": false, "score": 0, "last_activity_date": 1479945264, "creation_date": 1479945264, "answer_id": 40776072, "question_id": 40775439, "link": "https://stackoverflow.com/questions/40775439/how-to-link-prebuilt-so-files-using-cmakelists-txt/40776072#40776072", "title": "How to link prebuilt .so files using CMakeLists.txt", "body": "<p>If you're guaranteed to have that library there already built then perhaps this is the easiest solution</p>\n\n<pre><code>target_link_libraries(my_target ${CMAKE_SOURCE_DIR}/apex_fips_libs/libccmssl.so)\n</code></pre>\n\n<p>Otherwise you might want to try something more like</p>\n\n<pre><code>find_library(SSL NAMES ccmssl PATHS ${CMAKE_SOURCE_DIR}/apex_fips_libs)\ntarget_link_libraries(my_target ${SSL})\n</code></pre>\n"}], "owner": {"reputation": 1421, "user_id": 1105139, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f447c3ee1f2235b3d1214c8ae40064aa?s=128&d=identicon&r=PG", "display_name": "swati saoji", "link": "https://stackoverflow.com/users/1105139/swati-saoji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2045, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1479977894, "creation_date": 1479941373, "last_edit_date": 1479977894, "question_id": 40775439, "link": "https://stackoverflow.com/questions/40775439/how-to-link-prebuilt-so-files-using-cmakelists-txt", "title": "How to link prebuilt .so files using CMakeLists.txt", "body": "<p>I am trying to use cmake with android studio to compile c++ code, and I have a <code>.so</code> library which needs to be linked with the target.</p>\n\n<p>I am new to cmake and this is what I have:</p>\n\n<pre><code>add_library(\n    my_target\n    SHARED\n    ${SRCS}\n)\n\nfind_library(\n    SSL\n    apex_fips_libs/libccmssl.so\n)\n\ntarget_link_libraries(\n    my_target\n    ${SSL}\n)\n</code></pre>\n\n<p>Folder structure:</p>\n\n<pre><code>-- Src\n   -- some.cpp\n   -- some2.cpp\n   -- CMakeLists.txt\n   -- apex_fips_libs\n       --libccmssl.so\n</code></pre>\n\n<p>But I am getting following error: </p>\n\n<pre><code>CMake Error: The following variables are used in this project, but they are set to NOTFOUND.\nPlease set them or make sure they are set and tested correctly in the CMake files:\n  SSL\n</code></pre>\n\n<p>I understand that <code>SSL</code> is not being set as <code>find_library</code> does not find the <code>.so</code>, but why?</p>\n\n<p>I even tried using the absolute path. Can someone point me to the correct way of doing this?</p>\n\n<p>Thank You.</p>\n"}, {"tags": ["c++", "winapi", "usb"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1479975437, "post_id": 40775369, "comment_id": 68785312, "body": "Your error checking is broken. You need to check function return values."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1479991709, "post_id": 40775369, "comment_id": 68796152, "body": "@DavidHeffernan, what does checking function return values have to do with the questions that I am asking? I am running this in the Visual Studio debugger and checking quite a few things that I did not bother to mention. I also check the most necessary return value, the one from <code>CreateFile()</code> to determine if the open worked or not. This is a sample, learning application not production code."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1479992991, "post_id": 40775369, "comment_id": 68797004, "body": "For all we know, some of the functions are failing and your code cannot detect that. Omission of error checking is one of the major problems with code posted here in the winapi tag. It takes little effort to put in checking. You don&#39;t have to handle it properly. Just an assertion will do."}], "answers": [{"comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1479946725, "post_id": 40776118, "comment_id": 68776122, "body": "Thank you for so much information. I will spend some time reading and reviewing it. I appreciate you going into so much detail and the links to additional information."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1479951214, "post_id": 40776118, "comment_id": 68777110, "body": "I am wondering if there is some kind of limitation with POS Ready 7 and driver installation which is not there for Windows 7. I did find a sample source code that iterates over the installed USB devices and determines the COM port for a particular USB device that has a Virtual Serial Communication port. That source worked fine and using the COM port with the <code>CreateFile()</code> to work with the Virtual Serial port including being able to open the port after unplugging and replugging the USB cable. This would be the best approach if we can get POS Ready 7 to do the install of the scale driver."}, {"owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1479977089, "post_id": 40776118, "comment_id": 68786167, "body": "maybe see this <a href=\"https://cld.pt/dl/download/b4930527-31e7-41ae-a533-30545642170d/Almeno%20Rocha%20-%20Ficheiros%20de%20Trabalho/DRIVERS/SAM4S%20GIANT%20Tool%20V2.07/MANUALS/GIANT-Tool%20UserGuide%28Eng%29.pdf\" rel=\"nofollow noreferrer\">cld.pt/dl/download/b4930527-31e7-41ae-a533-30545642170d/&hellip;</a> my internet is too slow i can not load this. else here is a pay solution <a href=\"http://www.thesycon.de/eng/usb_cdcacm.shtml\" rel=\"nofollow noreferrer\">thesycon.de/eng/usb_cdcacm.shtml</a> however normally this should not be necessary. Contact microsoft for this ..."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1479992512, "post_id": 40776118, "comment_id": 68796673, "body": "Thank you for the link to the pdf document. I have done testing with SAM4S and have a reseller using some of their equipment.This doc describes a setup utility for one of their receipt printers. It appears that it offers USB connectivity and depends on Virtual Serial Communication port to implement that much like my scale. Unfortunately there is no technical information about the driver setup. It appears they are also using a Virtual COM driver for LAN/WLAN and there is a printer driver that must be installed to support it. Actually that part of the doc is a bit confusing. lol"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1479992835, "post_id": 40776118, "comment_id": 68796905, "body": "I am going to do further research into POS Ready 7. My impression is that each vendor offers a version of POS Ready 7 that is tailored to their equipment so there may be some additional software component available from the equipment vendor, NCR. You have been a big help and I appreciate your time. I will let you know how this turns out with a comment to your posting here."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1480098305, "post_id": 40776118, "comment_id": 68841711, "body": "I have a partial answer for the failure for my sample USB Serial Communication application to fail when the USB is unplugged and then replugged. I am still working on the POS Ready 7 question. However I suspect that there may be a Windows update settings which is the problem so that if POS Ready 7 does not recognize the device then it does not try to locate a USB driver. In many cases POS Ready 7 is used with updates turned off in order to prevent problem updates from causing terminal software to fail."}], "tags": [], "owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "is_accepted": false, "score": 2, "last_activity_date": 1479946869, "last_edit_date": 1479946869, "creation_date": 1479945588, "answer_id": 40776118, "question_id": 40775369, "link": "https://stackoverflow.com/questions/40775369/usb-serial-device-with-virtual-com-port-readfile-reads-zero-bytes-if-use-cre/40776118#40776118", "title": "USB Serial Device with Virtual COM port - ReadFile() reads zero bytes if use CreateFile() with USB path", "body": "<p>The communication of the PC that runs windows (USB host) and the scale (USB device) obeys the USB protocol. If you install <strong>libusb</strong> for windows you can get similar informations as the PC gets from the USB device, when using <code>lsusb -v</code>. It is possible for a USB device to implement more than one USB class.</p>\n\n<p>If the USB device creates a Virtual COM port it for sure implements the CDC ACM class (Communication Device Class Abstract Control Model) beside this it can also implement other USB classes like Mass Storage class,...</p>\n\n<p><strong>Direct</strong> communication with USB device depends also on what device classes it implements and its interfaces and endpoints. If the USB device implements a CDC ACM (Virtual COM) you use the specific RS-232 commands (i.e. <a href=\"https://www.commfront.com/pages/3-easy-steps-to-understand-and-control-your-rs232-devices\" rel=\"nofollow noreferrer\">https://www.commfront.com/pages/3-easy-steps-to-understand-and-control-your-rs232-devices</a> or send a hexadecimal 'D' to a multimeter to receive the measured value) if it implements the Mass Storage class you normally use <em>bulk transfers</em></p>\n\n<p>To change the mode of the USB device you use <em>control transfers</em> (see USB in a nutshell)</p>\n\n<p>In this link is how Win determines which driver to load after determining the USB class of the device <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff538820%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/hardware/ff538820%28v=vs.85%29.aspx</a>\n(<a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/jj649944%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/hardware/jj649944%28v=vs.85%29.aspx</a>)</p>\n\n<p>i do not know how Brecknell implemented the CDC ACM device class that is the Virtual COM however normally any Win version that supports USB should be able to load a driver for a CDC ACM device class (Virtual COM) so you are correct this seems to be <strong>a problem of the .inf driver file</strong> or the driver loading mechanism (maybe a problem of the Brecknell CDC ACM implementation but i do not think so)</p>\n\n<p>Then, if Win loads a working driver the normal way is what you did: use <code>CreateFile()</code> with the COM that is assigned to the USB device.</p>\n\n<p><em>The strange thing is that if I then use the application which opens the Virtual Serial Communication port, COM4, that application works fine and the scale reports the weight of items.</em> &lt;- this is not strange, strange is that some Win versions do not recognize a CDC USB device .\nThe standard driver for CDC devices seems to be <code>USBser.sys</code> (<a href=\"https://msdn.microsoft.com/de-de/library/windows/hardware/dn707976%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/de-de/library/windows/hardware/dn707976%28v=vs.85%29.aspx</a>)\nIf you search 'windows does not recognize CDC device' you get results</p>\n\n<p><em>If a USB device creates a Virtual Serial Communications port when it is plugged in then is it required to only use the Virtual Serial port by specifying the communications port, COM4 in my case, in the CreateFile() call?</em> Yes, if a USB device implements a virtual COM it is the easiest way to use this COM to communicate with this device</p>\n\n<p>See also <a href=\"http://www.beyondlogic.org/usbnutshell/usb1.shtml\" rel=\"nofollow noreferrer\">http://www.beyondlogic.org/usbnutshell/usb1.shtml</a> USB in a nutshell </p>\n\n<p>standard USB: device descriptor (class) -> interface -> (configuration) -> endpoint</p>\n"}, {"comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1479991460, "post_id": 40781967, "comment_id": 68795988, "body": "I understand how <code>CreateFile()</code> and <code>ReadFile()</code> work. The test procedure I use with the sample application is to put something on the scale, run the application and look at the console window output after it terminates. So the USB is not unplugged when the application is running. What you have provided is of no help whatsoever."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1479978350, "creation_date": 1479978350, "answer_id": 40781967, "question_id": 40775369, "link": "https://stackoverflow.com/questions/40775369/usb-serial-device-with-virtual-com-port-readfile-reads-zero-bytes-if-use-cre/40781967#40781967", "title": "USB Serial Device with Virtual COM port - ReadFile() reads zero bytes if use CreateFile() with USB path", "body": "<p>You are confusing two issues, and it's probably not viable for us to tell them apart.</p>\n\n<p>I say this because you link <code>ReadFile</code> problems to the device name. However, <code>ReadFile</code> works on a <strong><code>HANDLE</code></strong>. The function which takes a name and converts it into a <code>HANDLE</code> is called <code>CreateFile</code>. That means <code>ReadFile</code> doesn't even <em>know</em> on what name it's operating.</p>\n\n<p>This misunderstanding also explains a few other behaviors. For instance, when you unplug the device, the <code>HANDLE</code> becomes invalid, and it stays invalid. Replugging the device may restore the name, but not the <code>HANDLE</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1480186491, "post_id": 40810610, "comment_id": 68862861, "body": "when you plug some USB device, the PDO is created. windows ask it for device/hardware/compatible IDs and based on it try create FDO for it (first look in registry, if not found - in inf files). if FDO created (in current case by Virtual Serial Communications) - it attached to PDO. no different are you open file by PDO (<code>\\\\?\\usb#vid_1a86&amp;pid_7523*</code>) or FDO (<code>\\\\?\\com*</code>) name - all request in all case will be send to the top of stack device - so for FDO. how i understand your problem when no FDO created in system, because no inf/sys files. and direct read request to PDO return <code>STATUS_TIMEOUT</code>."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1480186495, "post_id": 40810610, "comment_id": 68862864, "body": "so you need install driver for you device first"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1480218311, "post_id": 40810610, "comment_id": 68869572, "body": "@RbMm thank you for your comment. I will need to lookup some of your acronyms as this is not an area I have sufficient technical knowledge to understand your comment. I am currently reading Microsoft Windows Internals to better understand the Windows architecture and specifically USB device driver stack. It is currently looking like I need an appropriate .inf file on the POS Ready 7 terminal. The file mdmcpq.inf is missing from the terminal&#39;s C:\\Windows\\inf folder. <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/dn707976(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/hardware/&hellip;</a>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1480235388, "post_id": 40810610, "comment_id": 68872290, "body": "you need read <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff540535(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/hardware/&hellip;</a> - USB bus driver create PDO for device - this is always on all system. then system try create FDO for device. and here you have problem - but it can be fixed by coping inf/cat/sys files (must be <code>usb\\vid_1a86&amp;pid_7523</code> in inf). about which name use to open device - no different. if device &lt;B&gt; attached to device &lt;A&gt; - yo can open by name &lt;A&gt; or &lt;B&gt; - but in both case all your request to device (including reading) will be send to &lt;B&gt; device, even if you open &lt;A&gt;"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1480254772, "post_id": 40810610, "comment_id": 68877160, "body": "@RbMm I have found a detailed section on PnP Manager in Windows Internals Part 2, Sixth Edition (thanks to my O&#39;Reilly Safari Books subscription) and now understand PDO and FDO driver layers architecture. How do I make a .inf file available to describe the mapping of a USB vendor id and product id to a particular driver such as usbser.sys? It appears there is an installation program. I saw unknown USB device in Device Manager when connecting scale USB. I think this is because mdmcpq.inf is missing from the terminal. How do I make it available?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1480255895, "post_id": 40810610, "comment_id": 68877495, "body": "you can copy inf+cat+sys files in some folder and call <code>UpdateDriverForPlugAndPlayDevices(0, L&quot;usb\\\\vid_1a86&amp;pid_7523&quot;, ..)</code> (this after your hardware already how minumum once plugged ) - <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff553534(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/hardware/&hellip;</a>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1480256010, "post_id": 40810610, "comment_id": 68877528, "body": "or use <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff544717(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/hardware/&hellip;</a> - <code>DiInstallDriver</code>"}], "tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": true, "score": 2, "last_activity_date": 1480601068, "last_edit_date": 1480601068, "creation_date": 1480098097, "answer_id": 40810610, "question_id": 40775369, "link": "https://stackoverflow.com/questions/40775369/usb-serial-device-with-virtual-com-port-readfile-reads-zero-bytes-if-use-cre/40810610#40810610", "title": "USB Serial Device with Virtual COM port - ReadFile() reads zero bytes if use CreateFile() with USB path", "body": "<p>Testing with a modified USB Serial sample application indicates that when a USB device that creates a Virtual Serial Communications port is unplugged the Virtual Serial Port created is torn down and disappears from the port listing in Device Manager app of Control Panel.</p>\n\n<p>When the device, a USB scale in this case, is plugged in and turned on the Virtual Serial Communications port reappears in Device Manager. However when the Virtual Serial Communications port is created, it is created with default serial port settings (baud rate, parity, etc.) and these may not be the same as for your actual device.</p>\n\n<p>In summary it appears that the Virtual Serial Communications port settings apply regardless of whether the port is opened as a COM port or if the USB device path name is used with the <code>CreateFile()</code>.</p>\n\n<p>I am still investigating the Virtual Serial Port not automatically being created when using POS Ready 7 and will update this answer once I know more. However preliminary comparison between Windows 7 and POS Ready 7 is showing that a file that specifies <code>usbser.sys</code>, mdmcpq.inf, that is on my Windows 7 PC is not on the POS Ready 7 terminal in the folder C:\\Windows\\inf.</p>\n\n<p>See <a href=\"https://www-user.tu-chemnitz.de/~heha/oney_wdm/ch12b.htm\" rel=\"nofollow noreferrer\">The INF File</a> for a write up on the .inf file structure and the various sections. It is a bit old however it seems to cover the basics in a readable manner.</p>\n\n<p>I modified the function <code>CreateEndPoint()</code> in the question to the following along with a change to the class and the constructor to create a set of default communication port settings for my scale.</p>\n\n<p>The class and the constructor now contain a set of defaults for the communication port settings (9600 baud, 7 data bits, one stop bit, even parity for the scale) and look like:</p>\n\n<pre><code>class UsbSerialDevice\n{\npublic:\n    UsbSerialDevice();\n    UsbSerialDevice(DWORD BaudRate, BYTE ByteSize = 8, BYTE Parity = NOPARITY, BYTE StopBits = ONESTOPBIT);\n    ~UsbSerialDevice();\n    int CreateEndPoint (wchar_t *wszVendorId);\n    int SetCommPortSettings (DWORD BaudRate, BYTE ByteSize = 8, BYTE Parity = NOPARITY, BYTE StopBits = ONESTOPBIT);\n    int CloseEndPoint ();\n    int ReadStream (void *bString, size_t nBytes);\n    int WriteStream (void *bString, size_t nBytes);\n    int UpdateSettingsProxy (void);\n\n    DWORD   m_dwError;          // GetLastError() for last action\n    DWORD   m_dwErrorWrite;     // GetLastError() for last write\n    DWORD   m_dwErrorRead;      // GetLastError() for last read\n    DWORD   m_dwErrorCommState;\n    DWORD   m_dwErrorCommTimeouts;\n    DWORD   m_dwBytesWritten;\n    DWORD   m_dwBytesRead;\n\n    COMMTIMEOUTS  m_timeOut;           // last result from GetCommTimeouts(), updated by UpdateSettingsProxy()\n    COMSTAT       m_statOut;           // last result from ClearCommError()\n    DCB           m_commSet;           // last result from GetCommState(), updated by UpdateSettingsProxy()\n\nprivate:\n    HANDLE        m_hFile;\n    DWORD         m_dwStatError;\n    DCB           m_commSetDefault;    // the defaults used as standard\n    wchar_t       m_portName[24];      // contains portname if defined for device in form \\\\.\\\\COMnn\n};\n\nUsbSerialDevice::UsbSerialDevice() :\n    m_dwError(0),\n    m_dwErrorWrite(0),\n    m_dwErrorRead(0),\n    m_dwBytesWritten(0),\n    m_dwBytesRead(0),\n    m_hFile(NULL)\n{\n    // initialize our COM port settings and allow people to change with \n    memset (&amp;m_commSetDefault, 0, sizeof(m_commSetDefault));\n    m_commSetDefault.DCBlength = sizeof(m_commSetDefault);\n    m_commSetDefault.BaudRate = CBR_9600;\n    m_commSetDefault.ByteSize = 7;\n    m_commSetDefault.Parity = EVENPARITY;\n    m_commSetDefault.StopBits = ONESTOPBIT;\n    m_commSet.fDtrControl = DTR_CONTROL_DISABLE;\n    m_portName[0] = 0;\n}\n</code></pre>\n\n<p>The function <code>CreateEndPoint()</code> is modified so that after doing the <code>CreateFile()</code> to open the USB device using the pathname of the USB Device, it will now also set the communication port parameters.</p>\n\n<p>An additional experimental change to the method was to check if a communications port name was also created and if so to generate the proper COM port specification to be used with <code>CreateFile()</code>. I plan to split out the <code>CreateEndPoint()</code> method into two methods, one to do a look up of the USB device and a second to actually do the open as I continue my investigation.</p>\n\n<p>The format for the COM port specifier for <code>CreateFile()</code> for COM ports greater than COM9 appear to need the <code>\\\\.\\</code> as a prefix. See <a href=\"https://support.microsoft.com/en-us/kb/115831\" rel=\"nofollow noreferrer\">HOWTO: Specify Serial Ports Larger than COM9</a> from Microsoft Support.</p>\n\n<p>The new version of <code>CreateEndPoint()</code> looks like:</p>\n\n<pre><code>int UsbSerialDevice::CreateEndPoint (wchar_t *wszVendorId)\n{\n    HDEVINFO    hDevInfo;\n\n\n    m_dwError = ERROR_INVALID_HANDLE;\n\n    // We will try to get device information set for all USB devices that have a\n    // device interface and are currently present on the system (plugged in).\n    hDevInfo = SetupDiGetClassDevs(&amp;GUID_DEVINTERFACE_USB_DEVICE, NULL, 0, DIGCF_DEVICEINTERFACE | DIGCF_PRESENT);\n    if (hDevInfo != INVALID_HANDLE_VALUE)\n    {\n        DWORD    dwMemberIdx;\n        BOOL     bContinue = TRUE;\n        SP_DEVICE_INTERFACE_DATA         DevIntfData;\n\n        // Prepare to enumerate all device interfaces for the device information\n        // set that we retrieved with SetupDiGetClassDevs(..)\n        DevIntfData.cbSize = sizeof(SP_DEVICE_INTERFACE_DATA);\n        dwMemberIdx = 0;\n\n        // Next, we will keep calling this SetupDiEnumDeviceInterfaces(..) until this\n        // function causes GetLastError() to return  ERROR_NO_MORE_ITEMS. With each\n        // call the dwMemberIdx value needs to be incremented to retrieve the next\n        // device interface information.\n        for (BOOL bContinue = TRUE; bContinue; ) {\n            PSP_DEVICE_INTERFACE_DETAIL_DATA  DevIntfDetailData;\n            SP_DEVINFO_DATA    DevData;\n            DWORD  dwSize;\n\n            dwMemberIdx++;\n            SetupDiEnumDeviceInterfaces(hDevInfo, NULL, &amp;GUID_DEVINTERFACE_USB_DEVICE, dwMemberIdx, &amp;DevIntfData);\n\n            if (GetLastError() == ERROR_NO_MORE_ITEMS) break;\n\n            // As a last step we will need to get some more details for each\n            // of device interface information we are able to retrieve. This\n            // device interface detail gives us the information we need to identify\n            // the device (VID/PID), and decide if it's useful to us. It will also\n            // provide a DEVINFO_DATA structure which we can use to know the serial\n            // port name for a virtual com port.\n\n            DevData.cbSize = sizeof(DevData);\n\n            // Get the required buffer size. Call SetupDiGetDeviceInterfaceDetail with\n            // a NULL DevIntfDetailData pointer, a DevIntfDetailDataSize\n            // of zero, and a valid RequiredSize variable. In response to such a call,\n            // this function returns the required buffer size at dwSize.\n\n            SetupDiGetDeviceInterfaceDetail(hDevInfo, &amp;DevIntfData, NULL, 0, &amp;dwSize, NULL);\n\n            // Allocate memory for the DeviceInterfaceDetail struct. Don't forget to\n            // deallocate it later!\n            DevIntfDetailData = (PSP_DEVICE_INTERFACE_DETAIL_DATA) HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, dwSize);\n            DevIntfDetailData-&gt;cbSize = sizeof(SP_DEVICE_INTERFACE_DETAIL_DATA);\n\n            if (SetupDiGetDeviceInterfaceDetail(hDevInfo, &amp;DevIntfData, DevIntfDetailData, dwSize, &amp;dwSize, &amp;DevData))\n            {\n                // Finally we can start checking if we've found a useable device,\n                // by inspecting the DevIntfDetailData-&gt;DevicePath variable.\n                //\n                // The DevicePath looks something like this for a Brecknell 67xx Series Serial Scale\n                // \\\\?\\usb#vid_1a86&amp;pid_7523#6&amp;28eaabda&amp;0&amp;2#{a5dcbf10-6530-11d2-901f-00c04fb951ed}\n                //\n                // The VID for a particular vendor will be the same for a particular vendor's equipment.\n                // The PID is variable for each device of the vendor.\n                //\n                // As you can see it contains the VID/PID for the device, so we can check\n                // for the right VID/PID with string handling routines.\n\n                // See https://github.com/Microsoft/Windows-driver-samples/blob/master/usb/usbview/vndrlist.h\n\n                if (wcsstr (DevIntfDetailData-&gt;DevicePath, wszVendorId)) {\n                    HKEY   hKey;\n\n                    m_dwError = 0;\n                    // To find out the serial port for our scale device,\n                    // we'll need to check the registry:\n                    hKey = SetupDiOpenDevRegKey(hDevInfo, &amp;DevData, DICS_FLAG_GLOBAL, 0, DIREG_DEV, KEY_READ);\n\n                    if (hKey != INVALID_HANDLE_VALUE) {\n                        DWORD    dwSize = 0, dwType = 0;\n                        wchar_t  lpData[16] = {0};\n\n                        dwType = REG_SZ;\n                        dwSize = sizeof(lpData);\n                        LONG queryStat = RegQueryValueEx(hKey, _T(\"PortName\"), NULL, &amp;dwType, (LPBYTE)&amp;lpData[0], &amp;dwSize);\n                        RegCloseKey(hKey);\n                        if (queryStat == ERROR_SUCCESS) {\n                            wcscpy (m_portName, L\"\\\\\\\\.\\\\\");\n                            wcsncat (m_portName, lpData, dwSize / sizeof(wchar_t));\n                        }\n                    } else {\n                        m_dwError = GetLastError();\n                    }\n\n                    m_hFile = CreateFile (DevIntfDetailData-&gt;DevicePath, GENERIC_READ | GENERIC_WRITE, 0, 0, OPEN_EXISTING, 0, 0);\n                    if (m_hFile == INVALID_HANDLE_VALUE) {\n                        m_dwError = GetLastError();\n                    } else {\n                        m_dwError = 0;\n                        GetCommState (m_hFile, &amp;m_commSet);\n                        m_commSet = m_commSetDefault;\n                        SetCommState (m_hFile, &amp;m_commSet);\n                        m_dwErrorCommState = GetLastError();\n                        GetCommState (m_hFile, &amp;m_commSet);\n\n                        GetCommTimeouts (m_hFile, &amp;m_timeOut);\n                        m_timeOut.ReadIntervalTimeout = 0;\n                        m_timeOut.ReadTotalTimeoutMultiplier = 0;\n                        m_timeOut.ReadTotalTimeoutConstant = 5000;\n                        SetCommTimeouts (m_hFile, &amp;m_timeOut);\n                        GetCommTimeouts (m_hFile, &amp;m_timeOut);\n                        m_dwErrorCommTimeouts = GetLastError();\n                    }\n                    bContinue = FALSE;    // found the vendor so stop processing after freeing the heap.\n                }\n            }\n\n            HeapFree(GetProcessHeap(), 0, DevIntfDetailData);\n        }\n\n        SetupDiDestroyDeviceInfoList(hDevInfo);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>POS Ready 7 Investigation</strong></p>\n\n<p>Looking back on the Windows 7 PC which seems to work fine with the scale, we looked in the driver details for the Virtual Serial Communications port using Device Manager from the Control Panel. The driver details indicated that the driver being used was CH341S64.SYS provided by www.winchiphead.com and the Property \"Inf name\" has a value of <code>oem50.inf</code>. I found a forum post <a href=\"http://doityourselfchristmas.com/forums/showthread.php?14690-CH340-USB-RS232-Driver\" rel=\"nofollow noreferrer\">http://doityourselfchristmas.com/forums/showthread.php?14690-CH340-USB-RS232-Driver</a> which provides a link to a driver download at <a href=\"http://www.winchiphead.com/download/CH341/CH341SER.ZIP\" rel=\"nofollow noreferrer\">http://www.winchiphead.com/download/CH341/CH341SER.ZIP</a> however another version available from <a href=\"http://www.wch.cn/download/CH341SER_ZIP.html\" rel=\"nofollow noreferrer\">http://www.wch.cn/download/CH341SER_ZIP.html</a> may be more up to date.</p>\n\n<p>Putting the downloaded zip file, CH341SER.ZIP from the later on to the POS Ready 7 terminal, I unzipped the contents and ran <code>SETUP.EXE</code> in the folder <code>CH341SER</code> (there were two folders in the zip file and the one called INSTALL seemed for device development) which displayed a dialog and allowed me to install the <code>CH341SER.INF</code>. Once the install completed, when I plugged in the USB scale, the device was recognized and a Virtual Serial Communications port was created and my test application worked.</p>\n\n<p>I did find some documentation however it was all in Chinese. Google Translate provided a readable version of the USB device documentation. It looks like there is additional work to be done for device management when the scale may be unplugged/replugged while in use.</p>\n\n<p><strong>One other strange thing</strong> is that the scale is now using a different COM port name, COM5 rather than COM4. Looking in the Advanced Settings it appears that COM4 is \"In Use\" though not showing in the list of ports. Further experiments indicates that the COM port name used for the scale device depends on which of the two front panel USB ports are plugged into. I had originally plugged into the left one and today, plugged into the right USB port with the result of the Virtual Serial Communications port being created with a new COM port name. </p>\n\n<p>However since we are using the USB path in the <code>CreateFile()</code>, no change was needed in the USB sample test application.</p>\n\n<p><strong>Further testing with POS Ready 7 using three USB to Serial converter cables</strong> showed that different vendor's cables had the same vendor id and product code in the USB path. The USB path also changed depending on which USB port a cable was plugged into. In some cases only the last digit in the path name differed. An interesting experiment would be if a USB hub is connected to a USB port and then USB connections are made to the hub what does the path name look like then?</p>\n"}], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3908, "favorite_count": 2, "accepted_answer_id": 40810610, "answer_count": 3, "score": 5, "last_activity_date": 1480637572, "creation_date": 1479940962, "last_edit_date": 1495542324, "question_id": 40775369, "link": "https://stackoverflow.com/questions/40775369/usb-serial-device-with-virtual-com-port-readfile-reads-zero-bytes-if-use-cre", "title": "USB Serial Device with Virtual COM port - ReadFile() reads zero bytes if use CreateFile() with USB path", "body": "<p>I have a point of sale application that uses Serial Communication ports (RS-232) to communicate with a scale for weighing products. I am now working on being able to support USB devices directly rather than using a Virtual Serial Communication port as they have an annoying tendency to move around.</p>\n\n<p>What we have found is that while Windows 7 seems to automatically create the Virtual Serial Communication port, other versions of Windows such as POS Ready 7 may not. We suspect this is due to a specific .inf file with Windows 7 that is missing from POS Ready 7. Can someone confirm that?</p>\n\n<p>I have a USB sample application that works intermittently. I am having a problem with the USB level communication with the <code>ReadFile()</code> Windows API function. I am using <code>CreateFile()</code> specifying the USB device path to obtain an I/O handle followed by using <code>WriteFile()</code> and <code>ReadFile()</code> to communicate with the scale. The <code>ReadFile()</code> is not providing data in some cases.</p>\n\n<p><strong>Background Information</strong></p>\n\n<p>The particular scale I am using, Brecknell 67xx bench scale, worked with using Virtual Serial Communication port directly out of the box with the point of sale application. I connected the scale to my Windows 7 PC with a USB cable and Windows automatically installed the drivers to create a Virtual Serial port, COM4 in my case. I then configured the application to talk to the scale through COM4 and everything worked fine.</p>\n\n<p>The protocol for using the scale is to send a two byte command, \"W\\r\" (capital letter W followed by a carriage return character) to the scale and to then read a 16 byte response which contains the current weight as well as status information about scale mechanics such as In Motion.</p>\n\n<p>The sample USB application that I am learning from will work successfully providing a weight. Then it will stop working properly with the behavior of the <code>ReadFile()</code> returning zero bytes read. Once it stops working it will continue failing to provide data from the <code>ReadFile()</code> even if I unplug and replug the USB cable or restart my PC.</p>\n\n<p>A previous version of the learning application was hanging on the <code>ReadFile()</code> and when a Break All was done with Visual Studio, a pause followed by a message indicating a deadlock would be displayed. However since I started using <code>SetCommTimeouts()</code> with a 5000 millisecond timeout value in <code>ReadTotalTimeoutConstant</code> I see a consistent 5 second pause before the <code>ReadFile()</code> returns with zero bytes read.</p>\n\n<p>The strange thing is that if I then use the application which opens the Virtual Serial Communication port, COM4, that application works fine and the scale reports the weight of items.</p>\n\n<p>I can then return to the sample application that uses direct USB rather than the Virtual Serial Communication port and it will work fine reporting weights.</p>\n\n<p>However if I then unplug the USB cable connecting scale with PC, which powers off the scale as well, then plug the USB cable back in, the sample application no longer functions correctly and once again I see the pause with timeout.</p>\n\n<p>Then I try using the original point of sale application that depends on Serial Communication ports using the Virtual Serial port, COM4, and that application weighs items just fine.</p>\n\n<p>And when I then retry my sample application, it also will report item weights.</p>\n\n<p><strong>My Questions.</strong></p>\n\n<p>If a USB device creates a Virtual Serial Communications port when it is plugged in then is it required to only use the Virtual Serial port by specifying the communications port, COM4 in my case, in the <code>CreateFile()</code> call?</p>\n\n<p>How is it possible to have direct USB serial communication by using <code>CreateFile()</code> with the USB device path if the device causes Windows to generate a Virtual Communication port?</p>\n\n<p>Is there some way of specifying that any version of Windows is to automatically create a Virtual Serial Communications port for the device when it is plugged in?</p>\n\n<p><strong>Source Code of the Sample USB Application</strong></p>\n\n<p>The source code from my sample USB Windows Console application using Visual Studio 2005 is as follows with the main being at the bottom and much of this being the class for finding a particular USB device and then allowing <code>ReadFile()</code> and <code>WriteFile()</code>:</p>\n\n<pre><code>// usb_test_cons.cpp : Defines the entry point for the console application.\n//\n\n#include \"stdafx.h\"\n\n#include &lt;windows.h&gt;\n#include &lt;setupapi.h&gt;\n#include &lt;initguid.h&gt;\n\n#include &lt;stdio.h&gt;\n\n// This is the GUID for the USB device class.\n// It is defined in the include file Usbiodef.h of the Microsoft Windows Driver Kit.\n// See also https://msdn.microsoft.com/en-us/library/windows/hardware/ff545972(v=vs.85).aspx which\n// provides basic documentation on this GUID.\nDEFINE_GUID(GUID_DEVINTERFACE_USB_DEVICE, 0xA5DCBF10L, 0x6530, 0x11D2, 0x90, 0x1F, 0x00, 0xC0, 0x4F, 0xB9, 0x51, 0xED);\n// (A5DCBF10-6530-11D2-901F-00C04FB951ED)\n\n// Following are standard defines to be used with all of the\n// devices that are use through the UIE interface.\n#define UIE_DEVICE_ERROR             (-11)        /* error when accessing the device */\n#define UIE_DEVICE_NOT_PROVIDE       (-12)        /* device is not provided */\n#define UIE_DEVICE_ERROR_RANGE       (-13)        /* range error         */\n#define UIE_DEVICE_ERROR_COM         (-14)        /* communication error */\n#define UIE_DEVICE_TIMEOUT           (-15)        /* communication error */\n#define UIE_DEVICE_SPECIFIC          (-20)        /* device specific errors start here */\n\n\n#define UIE_SCALE_ETX           0x03        /* ETX character         */\n#define UIE_SCALE_IN_MOTION     0x01        /* scale in motion       */\n#define UIE_SCALE_ZERO          0x02        /* zero weight           */\n#define UIE_SCALE_UNDER         0x01        /* under capacity        */\n#define UIE_SCALE_OVER          0x02        /* over capacity         */\n\n#define UIE_SCALE_ERROR             UIE_DEVICE_ERROR          /* error          */\n#define UIE_SCALE_NOT_PROVIDE       UIE_DEVICE_NOT_PROVIDE    /* not provide    */\n#define UIE_SCALE_TIMEOUT           UIE_DEVICE_TIMEOUT        /* time out when reading from scale  */\n#define UIE_SCALE_MOTION            (UIE_DEVICE_SPECIFIC-1)   /* motion         */\n#define UIE_SCALE_UNDER_CAPACITY    (UIE_DEVICE_SPECIFIC-2)   /* under capacity */\n#define UIE_SCALE_OVER_CAPACITY     (UIE_DEVICE_SPECIFIC-3)   /* over capacity  */\n#define UIE_SCALE_DATAFORMAT        (UIE_DEVICE_SPECIFIC-4)   /* Data read from scale incorrect format in UieScaleAnalysis()  */\n#define UIE_SCALE_DATAUNITS         (UIE_DEVICE_SPECIFIC-5)   /* Units read from scale incorrect in UieScaleAnalysis()  */\n\n\nstatic SHORT UieScaleStatus(char *puchBuffer, DWORD sLength)\n{\n    UCHAR   uchByte;\n\n    switch (sLength) {\n        case 16:\n            // The scale message is a weight message with a status section.\n            // Move the buffer pointer to where the status section should begin.\n            // A status only message has the same format as the status section of a weight message.\n            puchBuffer += 10;\n        case 6:\n            // The scale message may be a status only message if there is a problem with the scale.\n            // A status only message is 6 characters with the letter S as the second character.\n            if (*(puchBuffer + 0) != '\\n' ||\n                *(puchBuffer + 1) != 'S'  ||\n                *(puchBuffer + 4) != '\\r' ||\n                *(puchBuffer + 5) != UIE_SCALE_ETX) {\n                return (UIE_SCALE_DATAFORMAT);               /* exit ... */\n            }\n            break;\n        default:\n            return (UIE_SCALE_DATAFORMAT);               /* exit ... */\n            break;\n    }\n\n    /* --- check status of low byte --- */\n    uchByte = *(puchBuffer + 3) - (UCHAR)0x30;\n\n    if (uchByte &amp; UIE_SCALE_UNDER) {\n        return (UIE_SCALE_UNDER_CAPACITY);\n    } else if (uchByte &amp; UIE_SCALE_OVER) {\n        return (UIE_SCALE_OVER_CAPACITY);\n    }\n\n    /* --- check status of high byte --- */\n    uchByte = *(puchBuffer + 2) - (UCHAR)0x30;\n\n    if (uchByte &amp; UIE_SCALE_IN_MOTION) {\n        return (UIE_SCALE_MOTION);\n    } else if (uchByte &amp; UIE_SCALE_ZERO) {\n        return (0);\n    } else {\n        return (TRUE);\n    }\n}\n\nclass UsbSerialDevice\n{\npublic:\n    UsbSerialDevice();\n    ~UsbSerialDevice();\n    int CreateEndPoint (wchar_t *wszVendorId);\n    int CloseEndPoint ();\n    int ReadStream (void *bString, size_t nBytes);\n    int WriteStream (void *bString, size_t nBytes);\n\n    DWORD   m_dwError;          // GetLastError() for last action\n    DWORD   m_dwErrorWrite;     // GetLastError() for last write\n    DWORD   m_dwErrorRead;      // GetLastError() for last read\n    DWORD   m_dwBytesWritten;\n    DWORD   m_dwBytesRead;\n\nprivate:\n    HANDLE        m_hFile;\n    DWORD         m_dwStatError;\n    COMMTIMEOUTS  m_timeOut;\n    COMSTAT       m_statOut;\n};\n\nUsbSerialDevice::UsbSerialDevice() :\n    m_dwError(0),\n    m_dwErrorWrite(0),\n    m_dwErrorRead(0),\n    m_dwBytesWritten(0),\n    m_dwBytesRead(0),\n    m_hFile(NULL)\n{\n}\n\nUsbSerialDevice::~UsbSerialDevice()\n{\n    CloseHandle (m_hFile);\n}\n\nint UsbSerialDevice::WriteStream(void *bString, size_t nBytes)\n{\n    BOOL  bWrite = FALSE;\n\n    if (m_hFile) {\n        m_dwError = m_dwErrorWrite = 0;\n        m_dwBytesWritten = 0;\n        ClearCommError (m_hFile, &amp;m_dwStatError, &amp;m_statOut);\n        bWrite = WriteFile (m_hFile, bString, nBytes, &amp;m_dwBytesWritten, NULL);\n        m_dwError = m_dwErrorWrite = GetLastError();\n        return 0;\n    }\n\n    return -1;\n}\n\nint UsbSerialDevice::ReadStream(void *bString, size_t nBytes)\n{\n    BOOL  bRead = FALSE;\n\n    if (m_hFile) {\n        m_dwError = m_dwErrorRead = 0;\n        m_dwBytesRead = 0;\n        ClearCommError (m_hFile, &amp;m_dwStatError, &amp;m_statOut);\n        bRead = ReadFile (m_hFile, bString, nBytes, &amp;m_dwBytesRead, NULL);\n        m_dwError = m_dwErrorRead = GetLastError();\n        return 0;\n    }\n\n    return -1;\n}\n\nint UsbSerialDevice::CreateEndPoint (wchar_t *wszVendorId)\n{\n    HDEVINFO    hDevInfo;\n\n\n    m_dwError = ERROR_INVALID_HANDLE;\n\n    // We will try to get device information set for all USB devices that have a\n    // device interface and are currently present on the system (plugged in).\n    hDevInfo = SetupDiGetClassDevs(&amp;GUID_DEVINTERFACE_USB_DEVICE, NULL, 0, DIGCF_DEVICEINTERFACE | DIGCF_PRESENT);\n    if (hDevInfo != INVALID_HANDLE_VALUE)\n    {\n        DWORD    dwMemberIdx;\n        BOOL     bContinue = TRUE;\n        SP_DEVICE_INTERFACE_DATA         DevIntfData;\n\n        // Prepare to enumerate all device interfaces for the device information\n        // set that we retrieved with SetupDiGetClassDevs(..)\n        DevIntfData.cbSize = sizeof(SP_DEVICE_INTERFACE_DATA);\n        dwMemberIdx = 0;\n\n        // Next, we will keep calling this SetupDiEnumDeviceInterfaces(..) until this\n        // function causes GetLastError() to return  ERROR_NO_MORE_ITEMS. With each\n        // call the dwMemberIdx value needs to be incremented to retrieve the next\n        // device interface information.\n        for (BOOL bContinue = TRUE; bContinue; ) {\n            PSP_DEVICE_INTERFACE_DETAIL_DATA  DevIntfDetailData;\n            SP_DEVINFO_DATA    DevData;\n            DWORD  dwSize;\n\n            dwMemberIdx++;\n            SetupDiEnumDeviceInterfaces(hDevInfo, NULL, &amp;GUID_DEVINTERFACE_USB_DEVICE, dwMemberIdx, &amp;DevIntfData);\n\n            if (GetLastError() == ERROR_NO_MORE_ITEMS) break;\n\n            // As a last step we will need to get some more details for each\n            // of device interface information we are able to retrieve. This\n            // device interface detail gives us the information we need to identify\n            // the device (VID/PID), and decide if it's useful to us. It will also\n            // provide a DEVINFO_DATA structure which we can use to know the serial\n            // port name for a virtual com port.\n\n            DevData.cbSize = sizeof(DevData);\n\n            // Get the required buffer size. Call SetupDiGetDeviceInterfaceDetail with\n            // a NULL DevIntfDetailData pointer, a DevIntfDetailDataSize\n            // of zero, and a valid RequiredSize variable. In response to such a call,\n            // this function returns the required buffer size at dwSize.\n\n            SetupDiGetDeviceInterfaceDetail(hDevInfo, &amp;DevIntfData, NULL, 0, &amp;dwSize, NULL);\n\n            // Allocate memory for the DeviceInterfaceDetail struct. Don't forget to\n            // deallocate it later!\n            DevIntfDetailData = (PSP_DEVICE_INTERFACE_DETAIL_DATA) HeapAlloc(GetProcessHeap(), HEAP_ZERO_MEMORY, dwSize);\n            DevIntfDetailData-&gt;cbSize = sizeof(SP_DEVICE_INTERFACE_DETAIL_DATA);\n\n            if (SetupDiGetDeviceInterfaceDetail(hDevInfo, &amp;DevIntfData, DevIntfDetailData, dwSize, &amp;dwSize, &amp;DevData))\n            {\n                // Finally we can start checking if we've found a useable device,\n                // by inspecting the DevIntfDetailData-&gt;DevicePath variable.\n                //\n                // The DevicePath looks something like this for a Brecknell 67xx Series Serial Scale\n                // \\\\?\\usb#vid_1a86&amp;pid_7523#6&amp;28eaabda&amp;0&amp;2#{a5dcbf10-6530-11d2-901f-00c04fb951ed}\n                //\n                // The VID for a particular vendor will be the same for a particular vendor's equipment.\n                // The PID is variable for each device of the vendor.\n                //\n                // As you can see it contains the VID/PID for the device, so we can check\n                // for the right VID/PID with string handling routines.\n\n                // See https://github.com/Microsoft/Windows-driver-samples/blob/master/usb/usbview/vndrlist.h\n\n                if (wcsstr (DevIntfDetailData-&gt;DevicePath, wszVendorId)) {\n                    m_dwError = 0;\n                    m_hFile = CreateFile (DevIntfDetailData-&gt;DevicePath, GENERIC_READ | GENERIC_WRITE, 0, 0, OPEN_EXISTING, 0, 0);\n                    if (m_hFile == INVALID_HANDLE_VALUE) {\n                        m_dwError = GetLastError();\n                    } else {\n                        GetCommTimeouts (m_hFile, &amp;m_timeOut);\n                        m_timeOut.ReadIntervalTimeout = 0;\n                        m_timeOut.ReadTotalTimeoutMultiplier = 0;\n                        m_timeOut.ReadTotalTimeoutConstant = 5000;\n                        SetCommTimeouts (m_hFile, &amp;m_timeOut);\n                        m_dwError = GetLastError();\n                    }\n                    bContinue = FALSE;    // found the vendor so stop processing after freeing the heap.\n                }\n            }\n\n            HeapFree(GetProcessHeap(), 0, DevIntfDetailData);\n        }\n\n        SetupDiDestroyDeviceInfoList(hDevInfo);\n    }\n\n    return 0;\n}\n\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    UsbSerialDevice  myDev;\n\n    myDev.CreateEndPoint (L\"vid_1a86&amp;pid_7523\");\n    switch (myDev.m_dwError) {\n        case 0:\n            // no error so just ignore.\n            break;\n        case ERROR_ACCESS_DENIED:\n            wprintf (_T(\"   CreateFile() failed. GetLastError() = %d\\n      ERROR_ACCESS_DENIED: Access is denied.\\n      Is it already in use?\\n\"), myDev.m_dwError);\n            break;\n        case ERROR_GEN_FAILURE:\n            wprintf (_T(\"   CreateFile() failed. GetLastError() = %d\\n      ERROR_GEN_FAILURE: A device attached to the system is not functioning.\\n      Is it an HID?\\n\"), myDev.m_dwError);\n            break;\n        case ERROR_INVALID_HANDLE:\n            wprintf (_T(\"   CreateFile() failed. GetLastError() = %d\\n      ERROR_INVALID_HANDLE: The handle is invalid.\\n      CreateFile() failed?\\n\"), myDev.m_dwError);\n            break;\n        default:\n            wprintf (_T(\"   CreateFile() failed. GetLastError() = %d\\n\"), myDev.m_dwError);\n            break;\n    }\n\n    if (myDev.m_dwError == 0) {\n        char   reqWeight[] = \"W\\r\";\n        char   resWeight[256] = {0};\n\n        myDev.WriteStream (reqWeight, strlen (reqWeight));\n        wprintf (_T(\"    Sent request now get response.\\n\"));\n        Sleep (50);\n        myDev.ReadStream (resWeight, 16);\n        wprintf (_T(\"    Got response.\\n\"));\n        if (resWeight[0] != '\\n' || resWeight[9] != '\\r') {\n            wprintf (_T(\"    Unexpected format of response.\\n\"));\n        }\n\n        short sRet = UieScaleStatus (resWeight, myDev.m_dwBytesRead);\n\n        resWeight[9] = 0;      // terminate the weight string so that we can write it out.\n        wprintf (_T(\"   ScaleStatus = %d, Response from device - \\\"%S\\\"\\n\"), sRet, resWeight + 1);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Additional Information Developed</strong></p>\n\n<p>Overview of INF Files from Microsoft MSDN <a href=\"https://msdn.microsoft.com/en-us/windows/hardware/drivers/install/overview-of-inf-files\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/windows/hardware/drivers/install/overview-of-inf-files</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1176939/do-i-need-to-write-my-own-host-side-usb-driver-for-a-cdc-device\">Stackoverflow Do I need to write my own host side USB driver for a CDC device</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/2935184/how-to-get-vendor-id-and-product-id-of-a-plugged-usb-device-on-windows\">Stackoverflow how to get vendor id and product id of a plugged usb device on windows</a></p>\n\n<p><a href=\"https://superuser.com/questions/617295/is-it-possible-to-transplant-drivers-between-machines\">Is it possible to \u201ctransplant\u201d drivers between machines?</a> has a link to a document <a href=\"http://www.asyndetic.com/2010/02/06/debugging-usb-device-installation-on-windows/\" rel=\"nofollow noreferrer\">Debugging USB Device Installation on Windows</a> and this posting <a href=\"https://superuser.com/questions/985915/remove-windows-device-class-in-registry\">Remove Windows Device Class in Registry</a> has a bit more info.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/dn707976(v=vs.85).aspx\" rel=\"nofollow noreferrer\">USB serial driver (Usbser.sys)</a> from Microsoft.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff538820(v=vs.85).aspx\" rel=\"nofollow noreferrer\">USB device class drivers included in Windows</a> from Microsoft.</p>\n"}, {"tags": ["python", "c++", "opencv", "gstreamer", "python-gstreamer"], "comments": [{"owner": {"reputation": 399, "user_id": 1195803, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/32670f69f6e90a59c1828eec8ece8150?s=128&d=identicon&r=PG", "display_name": "justynnuff", "link": "https://stackoverflow.com/users/1195803/justynnuff"}, "edited": false, "score": 0, "creation_date": 1479948646, "post_id": 40775344, "comment_id": 68776548, "body": "Probably couldn&#39;t have picked a worse time ever to post a question."}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 1195803, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/32670f69f6e90a59c1828eec8ece8150?s=128&d=identicon&r=PG", "display_name": "justynnuff", "link": "https://stackoverflow.com/users/1195803/justynnuff"}, "edited": false, "score": 1, "creation_date": 1480491018, "post_id": 40817499, "comment_id": 68979346, "body": "I cross referenced both your links and got OpenCV with Python 2.7 running on an Udoo Dual.  In case anyone lands here from a search, I posted on the Udoo forums: <a href=\"http://www.udoo.org/forum/threads/using-udoo-camera-with-opencvs-videocapture-class-2-0.6130/#post-23716\" rel=\"nofollow noreferrer\">udoo.org/forum/threads/&hellip;</a>"}], "tags": [], "owner": {"reputation": 946, "user_id": 5773767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870fc401476f861630d186ca54645628?s=128&d=identicon&r=PG", "display_name": "Ceppo93", "link": "https://stackoverflow.com/users/5773767/ceppo93"}, "is_accepted": true, "score": 1, "last_activity_date": 1480157098, "creation_date": 1480157098, "answer_id": 40817499, "question_id": 40775344, "link": "https://stackoverflow.com/questions/40775344/python-with-gstreamer-pipeline/40817499#40817499", "title": "Python with Gstreamer pipeline", "body": "<p>The Ubuntu/Debian version is old 2.4.x, to get the last one you need to compile it from source.</p>\n\n<p>Here two tutorials on how to do that:</p>\n\n<ol>\n<li><a href=\"https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_setup/py_setup_in_fedora/py_setup_in_fedora.html#installing-opencv-from-source\" rel=\"nofollow noreferrer\">https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_setup/py_setup_in_fedora/py_setup_in_fedora.html#installing-opencv-from-source</a></li>\n<li><a href=\"http://www.pyimagesearch.com/2015/07/20/install-opencv-3-0-and-python-3-4-on-ubuntu/\" rel=\"nofollow noreferrer\">http://www.pyimagesearch.com/2015/07/20/install-opencv-3-0-and-python-3-4-on-ubuntu/</a></li>\n</ol>\n\n<p>The first is for <code>Python 2.7</code> on <code>Fedora</code>, the second for <code>Python 3.4</code> on <code>Ubuntu</code>.</p>\n"}], "owner": {"reputation": 399, "user_id": 1195803, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/32670f69f6e90a59c1828eec8ece8150?s=128&d=identicon&r=PG", "display_name": "justynnuff", "link": "https://stackoverflow.com/users/1195803/justynnuff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 0, "accepted_answer_id": 40817499, "answer_count": 1, "score": 0, "last_activity_date": 1480157098, "creation_date": 1479940825, "last_edit_date": 1495542652, "question_id": 40775344, "link": "https://stackoverflow.com/questions/40775344/python-with-gstreamer-pipeline", "title": "Python with Gstreamer pipeline", "body": "<p>I'm working on an Udoo trying to get the camera to take a picture that I can manipulate inside Python.</p>\n\n<p>So far, the camera works with</p>\n\n<p><code>gst-launch-1.0 imxv4l2videosrc ! imxipuvideosink</code></p>\n\n<p>I can also take a single picture with</p>\n\n<p><code>gst-launch-1.0 imxv4l2videosrc num-buffers=1 ! video/x-raw ! jpegenc ! filesink location=output.jpg</code></p>\n\n<p>From <a href=\"https://stackoverflow.com/questions/23570572/using-custom-camera-in-opencv-via-gstreamer\">here</a> it seems like you can read straight from a gstreamer stream in Python with OpenCV. </p>\n\n<p>Here is my python code:</p>\n\n<pre><code>import cv2\ncam = cv2.VideoCapture(\"imxv4l2videosrc ! video/x-raw ! appsink\")\nret, image = cam.read()\n</code></pre>\n\n<p>However, ret is <code>False</code>, and image is nothing.</p>\n\n<p>Some places say this only works with OpenCV 3.0+, and others say 2.4.x, but I can't seem to find an actual answer to what version it works on.</p>\n\n<p>If I need to update to OpenCV 3.0, which part to I update?  I downloaded OpenCV via the apt repositories under the package python-opencv.  So do I need to update Python?  Can I just build OpenCV from source, and Python will automatically be using the newest version?  I'm so confused.</p>\n"}, {"tags": ["c#", "c++", "struct"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1479940676, "post_id": 40775290, "comment_id": 68774410, "body": "You don&#39;t need typedef structs in C++. That is a throw-back from C."}, {"owner": {"reputation": 796429, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1479940706, "post_id": 40775290, "comment_id": 68774415, "body": "What&#39;s the problem?"}, {"owner": {"reputation": 456, "user_id": 1130841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b493e949557f5640bafa1fe10a14f780?s=128&d=identicon&r=PG", "display_name": "exomic", "link": "https://stackoverflow.com/users/1130841/exomic"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1479940881, "post_id": 40775290, "comment_id": 68774476, "body": "@juanchopanza Good to know but the C++ dll is not mine and I just call a method from the DLL in my C# application so I have to handle the expected struct."}, {"owner": {"reputation": 456, "user_id": 1130841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b493e949557f5640bafa1fe10a14f780?s=128&d=identicon&r=PG", "display_name": "exomic", "link": "https://stackoverflow.com/users/1130841/exomic"}, "reply_to_user": {"reputation": 796429, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1479941145, "post_id": 40775290, "comment_id": 68774535, "body": "@SLaks Well I have to handle in C# the returned data from the DLL (Coded in C or C++ I suppose). The SDK provided have a demo project in C++ calling the DLL using the above typedef struct and it&#39;s working well but in C# my struct is filled in a different order."}], "answers": [{"comments": [{"owner": {"reputation": 456, "user_id": 1130841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b493e949557f5640bafa1fe10a14f780?s=128&d=identicon&r=PG", "display_name": "exomic", "link": "https://stackoverflow.com/users/1130841/exomic"}, "edited": false, "score": 0, "creation_date": 1479942109, "post_id": 40775518, "comment_id": 68774841, "body": "Thanks for the information I changed the ulong to uint (uint32) so now the type will match. I think the rest is the correct type equivalent."}, {"owner": {"reputation": 456, "user_id": 1130841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b493e949557f5640bafa1fe10a14f780?s=128&d=identicon&r=PG", "display_name": "exomic", "link": "https://stackoverflow.com/users/1130841/exomic"}, "edited": false, "score": 0, "creation_date": 1479942541, "post_id": 40775518, "comment_id": 68774976, "body": "After further testing the order is now the same you were right the issue was the ulong (size 32 in C++ is not the same as the ulong in C# which is 64bits) changing it to uint fixed the issue."}], "tags": [], "owner": {"reputation": 19302, "user_id": 154766, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/jItKY.jpg?s=128&g=1", "display_name": "Asik", "link": "https://stackoverflow.com/users/154766/asik"}, "is_accepted": true, "score": 4, "last_activity_date": 1479942144, "last_edit_date": 1479942144, "creation_date": 1479941849, "answer_id": 40775518, "question_id": 40775290, "link": "https://stackoverflow.com/questions/40775290/equivalent-of-c-typedef-struct-to-c/40775518#40775518", "title": "Equivalent of C++ typedef struct to C#", "body": "<p>Keep in mind integer types do not mean the same things in <a href=\"http://en.cppreference.com/w/cpp/language/types\" rel=\"nofollow noreferrer\">C++</a> and <a href=\"https://msdn.microsoft.com/en-us/library/exx3b86w.aspx\" rel=\"nofollow noreferrer\">C#</a>. In particular, <code>long</code> means <code>at least 32 bits</code> in C++, but it means <code>strictly 64 bits</code> in C#*. Alignment could also differ since you don't specify it explicitly in either language.</p>\n\n<p>In short, you'll need to use equivalent types and ensure alignment is exactly the same for the mapping to work. It has nothing to do with the \"missing *LPTRACKIRDATA\".</p>\n\n<p>*The question originally had C# <code>ulong</code> in place of <code>uint</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2305, "user_id": 11573842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIWwv.jpg?s=128&g=1", "display_name": "Yatin", "link": "https://stackoverflow.com/users/11573842/yatin"}, "is_accepted": false, "score": 0, "last_activity_date": 1604478692, "creation_date": 1604478692, "answer_id": 64676507, "question_id": 40775290, "link": "https://stackoverflow.com/questions/40775290/equivalent-of-c-typedef-struct-to-c/64676507#64676507", "title": "Equivalent of C++ typedef struct to C#", "body": "<p>OP's answer:</p>\n<blockquote>\n<p>Thanks @Asik you were right! The problem was caused by the wrong type equivalent of dwNPIOData because the usigned long in C++ is 32Bits and in C# it's a 64bits size. The solution was to use the type uint32 in C#\n<code>public uint dwNPIOData;</code></p>\n</blockquote>\n"}], "owner": {"reputation": 456, "user_id": 1130841, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b493e949557f5640bafa1fe10a14f780?s=128&d=identicon&r=PG", "display_name": "exomic", "link": "https://stackoverflow.com/users/1130841/exomic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4389, "favorite_count": 2, "accepted_answer_id": 40775518, "answer_count": 2, "score": 1, "last_activity_date": 1604483609, "creation_date": 1479940627, "last_edit_date": 1604483609, "question_id": 40775290, "link": "https://stackoverflow.com/questions/40775290/equivalent-of-c-typedef-struct-to-c", "title": "Equivalent of C++ typedef struct to C#", "body": "<p>I'm working on a project that need to communicate to a DLL. The SDK provided have a demo project in C++ and it retreive the data from the DLL using the above typedef struct and it's working well but I have to do the same thing but in C# and I tried to create a similar struct but when i call the DLL my struct is filled in a different order.</p>\n<pre><code>typedef struct tagTrackIRData\n{\n    unsigned short wNPStatus;\n    unsigned short wPFrameSignature;\n    unsigned long  dwNPIOData;\n\n    float fNPRoll;\n    float fNPPitch;\n    float fNPYaw;\n    float fNPX;\n    float fNPY;\n    float fNPZ;\n    float fNPRawX;\n    float fNPRawY;\n    float fNPRawZ;\n    float fNPDeltaX;\n    float fNPDeltaY;\n    float fNPDeltaZ;\n    float fNPSmoothX;\n    float fNPSmoothY;\n    float fNPSmoothZ;\n} TRACKIRDATA, *LPTRACKIRDATA;\n</code></pre>\n<p>The problem is that I received in C# the struct above but I'm not able to assign it in the same struct format in C# (The struct is from a c++ dll and my program calling it is in C#). I tried to use this kind of converted struct in C# but the data is not going into the right variable name probably due to the missing *LPTRACKIRDATA.</p>\n<pre><code>struct TRACKIRDATA\n{\n    public ushort wNPStatus;\n    public ushort wPFrameSignature;\n    public ulong dwNPIOData;\n\n    public float fNPRoll;\n    public float fNPPitch;\n    public float fNPYaw;\n    public float fNPX;\n    public float fNPY;\n    public float fNPZ;\n    public float fNPRawX;\n    public float fNPRawY;\n    public float fNPRawZ;\n    public float fNPDeltaX;\n    public float fNPDeltaY;\n    public float fNPDeltaZ;\n    public float fNPSmoothX;\n    public float fNPSmoothY;\n    public float fNPSmoothZ;\n}\n</code></pre>\n<p>I'm calling the DLL in C# using this code:</p>\n<pre><code>TRACKIRDATA tid;\nNPRESULT gdRes = getData(&amp;tid);\n</code></pre>\n<p>Where getData() is</p>\n<pre><code>private delegate NPRESULT NP_GetData(TRACKIRDATA* data);\ngetData = (NP_GetData)Marshal.GetDelegateForFunctionPointer(procAddrNP_GetData, typeof(NP_GetData));\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1479940220, "post_id": 40775145, "comment_id": 68774231, "body": "Header files aren&#39;t compiled unless pulled into a translation unit via <code>#include</code> preprocessing. Since your only .cpp file has no such inclusion, it is not compiled, and therefore nothing within is available to that (and apparently your only) translation unit."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1479940708, "post_id": 40775145, "comment_id": 68774416, "body": "<a href=\"http://faculty.cs.niu.edu/~mcmahon/CS241/Notes/compile.html\" rel=\"nofollow noreferrer\">faculty.cs.niu.edu/~mcmahon/CS241/Notes/compile.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "is_accepted": true, "score": 6, "last_activity_date": 1479940742, "last_edit_date": 1479940742, "creation_date": 1479940240, "answer_id": 40775213, "question_id": 40775145, "link": "https://stackoverflow.com/questions/40775145/are-header-files-not-compiled-c-visual-studio-2015/40775213#40775213", "title": "Are header files not compiled (C++ Visual Studio 2015)", "body": "<p>Header files are included by the preprocessor into the compilation unit - <code>cpp</code> file. Only the source code in the <code>cpp</code> file is compiled by compiler after that.</p>\n\n<p>When you put your function definition into the header <code>.h</code> file. You don't include this header file into <code>main.cpp</code> and compiler doesn't compile it as preprocessor doesn't include it in <code>main.cpp</code>.</p>\n\n<p>You can review the result of preprocessor job by yourself. In Visual Studio use the <code>/P</code> option on the <a href=\"https://msdn.microsoft.com/en-us/library/8z9z0bx6.aspx\" rel=\"nofollow noreferrer\">Preprocessor</a> property page. For <code>main.cpp</code> output will be in <code>main.i</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "is_accepted": false, "score": 2, "last_activity_date": 1479940308, "creation_date": 1479940308, "answer_id": 40775231, "question_id": 40775145, "link": "https://stackoverflow.com/questions/40775145/are-header-files-not-compiled-c-visual-studio-2015/40775231#40775231", "title": "Are header files not compiled (C++ Visual Studio 2015)", "body": "<p>Header files are not compiled on their own, just imagine that the text is actually inside the .cpp file where it is included. This new 'merged' file is what is compiled. So you can put functions in a header file and it will be compiled when it is included in a .cpp file.</p>\n\n<p>The reason it's bad is that if you include it in a second .cpp file it will try to compile again and you will have problems. </p>\n"}, {"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1479945987, "creation_date": 1479945987, "answer_id": 40776163, "question_id": 40775145, "link": "https://stackoverflow.com/questions/40775145/are-header-files-not-compiled-c-visual-studio-2015/40776163#40776163", "title": "Are header files not compiled (C++ Visual Studio 2015)", "body": "<p>The problem with function definitions in headers is not that they're skipped. The real risk is that they're compiled <em>twice</em>, and that's once too many. C++ has something called a One Definition Rule, and you violate that rule by compiling a single function twice.</p>\n\n<p>There's one important exception to mention: <code>inline</code> functions are exempt, and may be defined in each translation unit.</p>\n"}], "owner": {"reputation": 51, "user_id": 2360556, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a7bb290b31901099eb7080f57e3ce19?s=128&d=identicon&r=PG", "display_name": "Cruz Jean", "link": "https://stackoverflow.com/users/2360556/cruz-jean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3555, "favorite_count": 0, "accepted_answer_id": 40775213, "answer_count": 3, "score": 3, "last_activity_date": 1479945987, "creation_date": 1479939904, "question_id": 40775145, "link": "https://stackoverflow.com/questions/40775145/are-header-files-not-compiled-c-visual-studio-2015", "title": "Are header files not compiled (C++ Visual Studio 2015)", "body": "<p>Just to see if it would work (I know it's awful form), I fully defined a function in a header file and made a corresponding forward declaration for said function in the main cpp file. C++ functions don't need to be defined in the translation unit they're used in, hence why header files are almost entirely just forward declarations (with the exception of inline functions). However, when I tried to compile this project, it said that there were unresolved externals.</p>\n\n<p>When I moved the entire contents of the header file into a source file (removing the header file as well), it compiled just fine and executed as expected. So, are header files just not compiled when building a project, or is there just some exception I don't know about?</p>\n\n<p>Additionally, even when I just go to the header file's properties in the property explorer and set its <code>File Type</code> to <code>C/C++ Code</code> and change its extension to .cpp, it still won't compile (even though it will if i just delete it and create a fresh source file, which I think is the oddest part).</p>\n\n<p>(I'm working with extensions disabled <code>/Za</code>, if that changes anything)</p>\n\n<p>Here's the code file</p>\n\n<pre><code>//main.cpp\nvoid foo();\n\nvoid main()\n{\n    foo();\n}\n</code></pre>\n\n<p>and the header file</p>\n\n<pre><code>//test.h\n#include &lt;iostream&gt;\n\nvoid foo()\n{\n    std::cout &lt;&lt; 'a';\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "boost-asio"], "comments": [{"owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1479939203, "post_id": 40774771, "comment_id": 68773859, "body": "define an event so you give the user a callback when the resources are available...."}, {"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "reply_to_user": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1479940719, "post_id": 40774771, "comment_id": 68774420, "body": "Thats one alternative but for now I need to implement the isBusy flag."}, {"owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1479940826, "post_id": 40774771, "comment_id": 68774462, "body": "isBusy flag is a way to solve the problem, you will need to do Pooling or long pooling which is not good"}], "answers": [{"comments": [{"owner": {"reputation": 3285, "user_id": 571778, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/yF5LJ.jpg?s=128&g=1", "display_name": "yano", "link": "https://stackoverflow.com/users/571778/yano"}, "reply_to_user": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "edited": false, "score": 1, "creation_date": 1479938907, "post_id": 40774810, "comment_id": 68773755, "body": "tbh I&#39;m not super familiar with boost asio, but I think you&#39;re thinking too low level. The result of your library is certainly something other than the direct output of the <code>async_read</code>? After the <code>async_read</code> callback condition is met, then you can supply the <code>future</code> with its result."}], "tags": [], "owner": {"reputation": 3285, "user_id": 571778, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/yF5LJ.jpg?s=128&g=1", "display_name": "yano", "link": "https://stackoverflow.com/users/571778/yano"}, "is_accepted": false, "score": 0, "last_activity_date": 1479938345, "creation_date": 1479938345, "answer_id": 40774810, "question_id": 40774771, "link": "https://stackoverflow.com/questions/40774771/how-can-i-notify-my-user-that-a-read-hasnt-been-completed-yet/40774810#40774810", "title": "How can I notify my user that a read hasn&#39;t been completed yet?", "body": "<p>if by user, you mean user of a library, I would recommend wrapping the result of the asynchronous method in an <code>std::future</code> or similar thread synchronization mechanism. You could use the <code>wait_for</code> method to fail and notify that the process is still ongoing, then try again.</p>\n"}, {"comments": [{"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "edited": false, "score": 0, "creation_date": 1480008845, "post_id": 40775395, "comment_id": 68806330, "body": "Why did you make _isReady static and not an instance variable?"}, {"owner": {"reputation": 970, "user_id": 2205930, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4659ab6b4bcb3fbf3c0c671571d728bf?s=128&d=identicon&r=PG", "display_name": "user2205930", "link": "https://stackoverflow.com/users/2205930/user2205930"}, "reply_to_user": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "edited": false, "score": 0, "creation_date": 1480041051, "post_id": 40775395, "comment_id": 68815633, "body": "In case there are multiple instances of the <code>MySocket</code> class. I do not know how your code will be used so I had to guess on a few things. If it is OK to have several instances of the class and the <code>GatherDataThread</code> doesn&#39;t require a shared resource then you can remove the <code>static</code>. Again, it all depends on what you want to do in your code."}, {"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "edited": false, "score": 0, "creation_date": 1480066076, "post_id": 40775395, "comment_id": 68824254, "body": "Thanks, this was great!"}], "tags": [], "owner": {"reputation": 970, "user_id": 2205930, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4659ab6b4bcb3fbf3c0c671571d728bf?s=128&d=identicon&r=PG", "display_name": "user2205930", "link": "https://stackoverflow.com/users/2205930/user2205930"}, "is_accepted": true, "score": 2, "last_activity_date": 1479941475, "last_edit_date": 1479941475, "creation_date": 1479941116, "answer_id": 40775395, "question_id": 40774771, "link": "https://stackoverflow.com/questions/40774771/how-can-i-notify-my-user-that-a-read-hasnt-been-completed-yet/40775395#40775395", "title": "How can I notify my user that a read hasn&#39;t been completed yet?", "body": "<p>Don't know if you are looking for an asynchronous solution such as using a callback or a polling method. From the question it seems you are looking for a polling method since you want a flag that users can check to see if the data is fully ready. In that case just define a variable and function in your class, .h file:</p>\n\n<pre><code>#include &lt;atomic&gt;\n#include &lt;thread&gt;    \n\nclass MySocket\n{\npublic:\n   ~MySocket();\n   bool IsReady();\n   void StartDataGather();    \nprivate:\n   void GatherDataThread();\n   static std::atomic&lt;bool&gt; _isReady;\n   std::thread _thread;\n}\n</code></pre>\n\n<p>In your .cpp file:</p>\n\n<pre><code>#include \"MySocket.h\"\n\nstatic std::atomic&lt;bool&gt; MySocket::_isReady(false); // Default flag to false.\n\nMySocket::~MySocket()\n{\n    // Make sure to kill the thread if this class is destroyed.\n    if (_thread.joinable())\n        _thread.join();\n}\n\nbool MySocket::IsReady() { return _isReady; }\n\nvoid MySocket::StartDataGather()\n{\n    _isReady = false; // Reset flag.\n\n    // If your gather thread is running then stop it or wait for it\n    // to finish before starting it again.\n    if(_thread.joinable())\n        _thread.join();\n\n    // Start the background thread to gather data.\n    _thread = std::thread(GatherDataThread());\n}\n\nvoid MySocket::GatherDataThread()\n{\n    // This is your thread that gathers data.\n    // Once all of the data is gathered, do the following:\n    _isReady = true;\n}\n</code></pre>\n\n<p>To use this method from outside of your client class do the following:</p>\n\n<pre><code>MySocket mySock;\n\nmySock.StartDataGather();\n\nwhile(!mySock.IsReady())\n{\n    // Do some other code here until data is ready.\n    // Once the MySocket::GatherDataThread() finishes it will\n    // set _isReady = true which will cause mySock.IsReady() to\n    // return true.\n}\n</code></pre>\n\n<p>You now have a flag that others can check and it is thread safe because of the <code>std::atomic&lt;&gt;</code> template. The following uses C++ 11 or newer <code>-std=c++11</code>.</p>\n"}], "owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 40775395, "answer_count": 2, "score": 1, "last_activity_date": 1479941475, "creation_date": 1479938149, "question_id": 40774771, "link": "https://stackoverflow.com/questions/40774771/how-can-i-notify-my-user-that-a-read-hasnt-been-completed-yet", "title": "How can I notify my user that a read hasn&#39;t been completed yet?", "body": "<p>I have a class that encapsulates all the business logic related to using Asio to read and write to a generic stream socket. I'd like to add a flag so my users know if they can retrieve data from a getter or whether we're still waiting for the backend.</p>\n\n<p>How is this normally done? Set a flag to busy after the write and do the read in the background in a separate thread? The flag would be something similar to <a href=\"https://www.postgresql.org/docs/9.5/static/libpq-async.html\" rel=\"nofollow noreferrer\">PQisBusy</a></p>\n"}, {"tags": ["c++", "boost", "udp", "boost-asio", "future"], "comments": [{"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1479993537, "post_id": 40774699, "comment_id": 68797383, "body": "The linked question and answer mention needing to run the <code>io_service</code>: &quot;as the calling thread will be blocked waiting for the future, at least one other thread must be processing the <code>io_service</code> to allow the async [...] operation to progress and fulfill the promise.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 72, "user_id": 4463900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/324bd64a77d62e42bef740409480e938?s=128&d=identicon&r=PG&f=1", "display_name": "Or&#231;un &#199;olak", "link": "https://stackoverflow.com/users/4463900/or%c3%a7un-%c3%87olak"}, "is_accepted": false, "score": 3, "last_activity_date": 1480033221, "last_edit_date": 1480033221, "creation_date": 1479962631, "answer_id": 40778197, "question_id": 40774699, "link": "https://stackoverflow.com/questions/40774699/stdfuture-not-working-in-boost-udp-socket-async-receive-operation/40778197#40778197", "title": "std::future not working in Boost UDP socket async receive operation", "body": "<p>You are not calling <code>io_service</code> object's <code>run</code> method. Therefore asio is not running. Please create a thread that calls the <code>run</code> method and then try again.</p>\n"}, {"comments": [{"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1479994275, "post_id": 40782491, "comment_id": 68797858, "body": "Could you please expand upon how one would use Asio&#39;s blocking operations with timeouts.  I was under the impression that timeouts necessitate asynchronous operations."}, {"owner": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "reply_to_user": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1479995009, "post_id": 40782491, "comment_id": 68798400, "body": "I guessed there was an overload which took a timeout but that doesn&#39;t seem to be the case. But there are other options. E.g. you can set the read/write timeout options directly on the socket. Then the blocking operations will utilize that. That&#39;s described in the accepted answer here: <a href=\"http://stackoverflow.com/questions/291871/how-to-set-a-timeout-on-blocking-sockets-in-boost-asio\" title=\"how to set a timeout on blocking sockets in boost asio\">stackoverflow.com/questions/291871/&hellip;</a>"}, {"owner": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "reply_to_user": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1479995127, "post_id": 40782491, "comment_id": 68798479, "body": "Alternatively boost itself shows a cross plattform approach for blocking reads which however uses the async options and io_service.run_one() under the hood: <a href=\"http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/example/timeouts/blocking_tcp_client.cpp\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_52_0/doc/html/boost_asio/example/timeou&zwnj;&#8203;ts/&hellip;</a> That looks sane, but I wouldn&#39;t use it if you also have asynchronous operations running on the same io_service (because then the handlers for these might be called during the blocking wait)."}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1479997777, "post_id": 40782491, "comment_id": 68800132, "body": "The <code>SO_RCVTIMEO</code> and <code>SO_SNDTIMEO</code> socket options are not effective with synchronous Asio operstions.  See <a href=\"https://stackoverflow.com/questions/30410265\">here</a>."}, {"owner": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "reply_to_user": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1480002273, "post_id": 40782491, "comment_id": 68802833, "body": "That question is about using these with async operations, not with the synchronous ones which should be simple wrappers around the OS read/write calls."}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "edited": false, "score": 0, "creation_date": 1480005045, "post_id": 40782491, "comment_id": 68804499, "body": "The answer to that question details why socket timeout options are not effective for both asynchronous or synchronous Asio operations.  The synchronous operations are not simple wrappers around the OS: if the synchronous Asio read operation is initiated on a native blocking socket, and the <code>SO_RCVTIMEO</code> timeout occurs for the system call, then Asio will block the calling thread polling on the file descriptor to be readable."}], "tags": [], "owner": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "is_accepted": false, "score": 0, "last_activity_date": 1479979830, "creation_date": 1479979830, "answer_id": 40782491, "question_id": 40774699, "link": "https://stackoverflow.com/questions/40774699/stdfuture-not-working-in-boost-udp-socket-async-receive-operation/40782491#40782491", "title": "std::future not working in Boost UDP socket async receive operation", "body": "<p>What you are doing is a mix of asychronous and synchronous operations, which is not working:</p>\n\n<ul>\n<li>You are using the asynchronous <code>async_receive_from</code> operation, which will run on an asio event loop (<code>io_service</code>) and finish whenever something was received. In the normal case this will call a callback on finish, if you give it the future it will complete the future. Note that this will happen in the thread which calls <code>io_service.run()</code></li>\n<li>You are using the future in a synchronous way. This will block the current thread until the future will be fulfilled.</li>\n<li>If the future would be fulfilled from the same thread than the one you are blocking in order to wait for it it obviously can never be fulfilled.</li>\n</ul>\n\n<p>Possible steps to resolve this:</p>\n\n<ul>\n<li>Just use the blocking operations of asio with timeouts. These do exactly the kind of things that you want to achieve with the future.</li>\n<li>Use the futures <code>then()</code> method in order to attach a continuation instead of blocking on it. Will not work with old stdlib futures, since it is a C++17 extension. However boost futures can do it. You still need to call io_service.run() on the main thread and split your program into the phases before and after the callback.</li>\n<li>Run asio and it's event loop in a background thread if you require</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 1537395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8900cbbd1e1955595ccde005c943a17e?s=128&d=identicon&r=PG", "display_name": "jeancf", "link": "https://stackoverflow.com/users/1537395/jeancf"}, "edited": false, "score": 0, "creation_date": 1480108045, "post_id": 40808360, "comment_id": 68844786, "body": "Very nice explanation. I wish this was the solution. I added the code to create the thread and start the io_service at the beginning, as well as the <code>stop()</code> and <code>join()</code> at the end but the behavior is still the same as described originally."}, {"owner": {"reputation": 33, "user_id": 1537395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8900cbbd1e1955595ccde005c943a17e?s=128&d=identicon&r=PG", "display_name": "jeancf", "link": "https://stackoverflow.com/users/1537395/jeancf"}, "edited": false, "score": 0, "creation_date": 1480110813, "post_id": 40808360, "comment_id": 68845534, "body": "Yes I did. I also tried to use <code>recv_length.get()</code> and <code>recv_length.wait()</code> and both work as expected: block until data is received. it is only <code>wait_for()</code> that misbehaves."}, {"owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "reply_to_user": {"reputation": 33, "user_id": 1537395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8900cbbd1e1955595ccde005c943a17e?s=128&d=identicon&r=PG", "display_name": "jeancf", "link": "https://stackoverflow.com/users/1537395/jeancf"}, "edited": false, "score": 0, "creation_date": 1480113146, "post_id": 40808360, "comment_id": 68846163, "body": "@jeancf Your code may be invoking undefined behavior, as the code fails to meet the requirement that both the buffer and endpoint must remain valid until <code>async_receive_from()</code>&#39;s completion handler is called.  This <a href=\"http://coliru.stacked-crooked.com/a/4290cf5390fc3df3\" rel=\"nofollow noreferrer\">example</a> demonstrates proper usage.  Furthermore, if <code>get()</code> and <code>wait()</code> work as expected, then I would verify that <code>wait_for()</code> is properly supported in your environment (at one point, Windows had a bug with the return status for <code>wait_for()</code>)."}], "tags": [], "owner": {"reputation": 48017, "user_id": 1053968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356f892f0e96a3615ae44f6d815c5b0f?s=128&d=identicon&r=PG", "display_name": "Tanner Sansbury", "link": "https://stackoverflow.com/users/1053968/tanner-sansbury"}, "is_accepted": false, "score": 0, "last_activity_date": 1480088259, "creation_date": 1480088259, "answer_id": 40808360, "question_id": 40774699, "link": "https://stackoverflow.com/questions/40774699/stdfuture-not-working-in-boost-udp-socket-async-receive-operation/40808360#40808360", "title": "std::future not working in Boost UDP socket async receive operation", "body": "<p>For an asynchronous operation, the underlying I/O and the execution of a completion handler are discrete steps.  In this case, the I/O has completed, but the user code never runs the <code>io_service</code>, so the completion handler that would set <code>recv_length</code>'s value is never executed.  To resolve this, run the <code>io_service</code>.</p>\n\n<hr>\n\n<p>There are a few details contributing to the observation:</p>\n\n<ul>\n<li>when an asynchronous operation is initiated, if it can complete without blocking, then it will do so and its completion handler will be queued into <code>io_service</code> <em>as-if</em> by <a href=\"http://www.boost.org/doc/libs/1_62_0/doc/html/boost_asio/reference/io_service/post.html\" rel=\"nofollow noreferrer\"><code>io_service.post()</code></a></li>\n<li>when using <code>boost::asio::use_future</code>, the <code>std::future</code>'s value is set within the asynchronous operation's completion handler</li>\n<li>handlers posted to the <code>io_service</code> are only invoked in threads that are currently invoking the <code>poll()</code>, <code>poll_one()</code>, <code>run()</code>, and <code>run_one()</code> member functions on the <code>io_service</code></li>\n</ul>\n\n<p>In context of the question, when </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>recv_length = socket.async_receive_from(\n  boost::asio::buffer(recv_buf), \n  remote_endpoint, \n  0, \n  boost::asio::use_future);\n</code></pre>\n\n<p>is initiated and data is available to be read (<code>socket.available() &gt; 0</code>), then both <code>remote_endpoint</code> and <code>recv_buffer</code> will be populated with the correct data within the initiating <code>async_receive_from()</code> function.  The completion handler that will set <code>recv_length</code>'s value is posted to the <code>io_service</code>.  However, as the code does not process the <code>io_service</code>, the <code>recv_length</code>'s value is never set.  Hence, the <code>recv_length.wait_for()</code> will always result in a timeout status.</p>\n\n<hr>\n\n<p>The <a href=\"http://www.boost.org/doc/libs/1_62_0/doc/html/boost_asio/example/cpp11/futures/daytime_client.cpp\" rel=\"nofollow noreferrer\">official futures example</a> creates an additional thread that is dedicated to processing the I/O service and waits on <code>std::future</code> from within a thread that is not processing the I/O service:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// We run the io_service off in its own thread so that it operates\n// completely asynchronously with respect to the rest of the program.\nboost::asio::io_service io_service;\nboost::asio::io_service::work work(io_service);\nstd::thread thread([&amp;io_service](){ io_service.run(); });\n\n...\n\nstd::future&lt;std::size_t&gt; send_length =\n  socket.async_send_to(..., boost::asio::use_future);\n\n// Do other things here while the send completes.\n\nsend_length.get(); // Blocks until the send is complete. Throws any errors.\n\nio_service.stop();\nthread.join();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 1537395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8900cbbd1e1955595ccde005c943a17e?s=128&d=identicon&r=PG", "display_name": "jeancf", "link": "https://stackoverflow.com/users/1537395/jeancf"}, "is_accepted": true, "score": 0, "last_activity_date": 1480455008, "creation_date": 1480455008, "answer_id": 40876087, "question_id": 40774699, "link": "https://stackoverflow.com/questions/40774699/stdfuture-not-working-in-boost-udp-socket-async-receive-operation/40876087#40876087", "title": "std::future not working in Boost UDP socket async receive operation", "body": "<p>I found the solution. So to wrap this up, here is what needs to be done. My initial code needs 2 modifications.</p>\n\n<p>(1) adding 2 lines at the beginning to launch a separate thread with io_service to monitor the time-out (as suggested by Tanner Sansbury)</p>\n\n<pre><code>boost::asio::io_service::work work(io_service);\nstd::thread thread([&amp;io_service](){ io_service.run(); });\n</code></pre>\n\n<p>(2) call <code>socket.cancel();</code> in the condition of socket time_out. If the socket operation is not cancelled, the socket will keep blocking despite the renewed calls to <code>wait_for()</code> (solution received on Boost's mailing list).</p>\n\n<p>Here is the amended code for reference:</p>\n\n<pre><code>#include &lt;future&gt;\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/asio/use_future.hpp&gt;\n\nusing boost::asio::ip::udp;\n\nint main()\n{\n    try\n    {\n        boost::asio::io_service io_service;\n        boost::asio::io_service::work work(io_service);\n        std::thread thread([&amp;io_service](){ io_service.run(); });\n\n        udp::socket socket(io_service, udp::endpoint(udp::v4(), 10000));\n\n        char recv_buf[8];\n\n        for (;;)\n        {\n            ZeroMemory(recv_buf, 8);\n            udp::endpoint remote_endpoint;\n            std::future&lt;std::size_t&gt; recv_length;\n\n            recv_length = socket.async_receive_from(\n                boost::asio::buffer(recv_buf), \n                remote_endpoint, \n                0, \n                boost::asio::use_future);\n\n            if (recv_length.wait_for(\n                std::chrono::seconds(5)) == std::future_status::timeout)\n            {\n                printf(\"time out. Nothing received.\\n\");\n                socket.cancel();\n            }\n            else\n            {\n                printf(\"received something: %s\\n\", recv_buf);\n            }\n        }\n    }\n    catch (std::exception&amp; e)\n    {\n        printf(\"Error: %s\\n\", e.what());\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Thank you all for your help.</p>\n"}], "owner": {"reputation": 33, "user_id": 1537395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8900cbbd1e1955595ccde005c943a17e?s=128&d=identicon&r=PG", "display_name": "jeancf", "link": "https://stackoverflow.com/users/1537395/jeancf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 0, "accepted_answer_id": 40876087, "answer_count": 4, "score": 1, "last_activity_date": 1480455008, "creation_date": 1479937765, "last_edit_date": 1479973432, "question_id": 40774699, "link": "https://stackoverflow.com/questions/40774699/stdfuture-not-working-in-boost-udp-socket-async-receive-operation", "title": "std::future not working in Boost UDP socket async receive operation", "body": "<p>I am writing a UDP server app with Boost that should listen on a socket for 5 seconds and if no datagram has been received within these 5 seconds, move on to do other things.</p>\n\n<p>Inspired by <a href=\"https://stackoverflow.com/questions/30410265/so-rcvtime-and-so-rcvtimeo-not-affecting-boost-asio-operations\">some answers</a> I decided to try the solution based on std::future.</p>\n\n<p>The problem is that the call to <code>wait_for()</code> always times out as if no data was received. But if I set a breakpoint on the line that executes after the timeout and that I inspect variables I see that the buffer contains the received datagram and the <code>remote_endpoint</code> object contains the address of the client. In other words the socket receive works as expected but the std::future does not fire. why?</p>\n\n<p>Here is my test server code:</p>\n\n<pre><code>#include &lt;future&gt;\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/asio/use_future.hpp&gt;\n\nusing boost::asio::ip::udp;\n\nint main()\n{\n    try\n    {\n        boost::asio::io_service io_service;\n        udp::socket socket(io_service, udp::endpoint(udp::v4(), 10000));\n        char recv_buf[8];\n\n        for (;;)\n        {\n            ZeroMemory(recv_buf, 8);\n            udp::endpoint remote_endpoint;\n            std::future&lt;std::size_t&gt; recv_length;\n\n            recv_length = socket.async_receive_from(\n                boost::asio::buffer(recv_buf), \n                remote_endpoint, \n                0, \n                boost::asio::use_future);\n\n            if (recv_length.wait_for(\n                std::chrono::seconds(5)) == std::future_status::timeout)\n            {\n                printf(\"time out. Nothing received.\\n\");\n            }\n            else\n            {\n                printf(\"received something: %s\\n\", recv_buf);\n            }\n        }\n    }\n    catch (std::exception&amp; e)\n    {\n        printf(\"Error: %s\\n\", e.what());\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I have been banging my head on this one for a while so any help would be appreciated. I am on Windows 10 with Visual Studio 2015.</p>\n\n<p>Here is my test client code (in python, sorry).</p>\n\n<pre><code>import socket\nimport time\n\nHOST = \"server\"           # The remote host\nPORT = 10000              # The same port as used by the server\nwith socket.socket(socket.AF_INET, socket.SOCK_DGRAM) as s:\n    address = socket.getaddrinfo(HOST, PORT)[0][-1]\n\n    while True:\n        s.sendto(\"ping\\0\", address)\n        time.sleep(1)\n</code></pre>\n"}, {"tags": ["c++", "qt", "c++11", "qbytearray"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1479937586, "post_id": 40774637, "comment_id": 68773215, "body": "Just about any <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">STL container</a> can store an array of (unsigned) characters."}, {"owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "edited": false, "score": 0, "creation_date": 1479937791, "post_id": 40774637, "comment_id": 68773304, "body": "@Raw N: How can a <code>vector&lt;unsigned char&gt;</code> be initialized from a pointer and size (or maybe a C string) without doing a deep copy?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1479938116, "post_id": 40774637, "comment_id": 68773455, "body": "<code>myVector.assign(pointer, pointer + size)</code> maybe? There are also around 7 <a href=\"http://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow noreferrer\">different constructors</a>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1479938208, "post_id": 40774637, "comment_id": 68773488, "body": "@Silicomancer If you don&#39;t want a deep copy, then use the pointer and the size. You already have them. Most of the standard library operations work over <i>iterator</i> ranges, so passing <code>ptr, ptr+size</code> as the range is very common. To be more direct, there is nothing remotely close to the breadth of functionality that QByteArray offers. Most of it would require you implementing the behavior."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1479938340, "post_id": 40774637, "comment_id": 68773539, "body": "@RawN ... does a value copy over the range. The specific method the OP mentioned was <a href=\"http://doc.qt.io/qt-4.8/qbytearray.html#fromRawData\" rel=\"nofollow noreferrer\">fromRawData</a>, and there is nothing like it that can be used via vector unless you get into some serious std::allocator overloading (and frankly, it wouldn&#39;t be worth the trouble)."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1479938592, "post_id": 40774637, "comment_id": 68773641, "body": "<code>std::vector&lt;uint8_t&gt;</code> would seem to me to be the obvious replacement for <code>QByteArray</code> if you just want a container that can hold arbitrary binary data.."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1479942272, "post_id": 40774637, "comment_id": 68774896, "body": "Hopefully we get <code>std::array_view</code> and that would work well in this case.  Right now I think you can get it as part of the core guidelines library."}], "answers": [{"comments": [{"owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "edited": false, "score": 0, "creation_date": 1479938077, "post_id": 40774716, "comment_id": 68773433, "body": "But does it support wrapping data without doing a deep copy? If it doesn&#39;t I can&#39;t imagine how such a wrapper could do it."}, {"owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "reply_to_user": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "edited": false, "score": 0, "creation_date": 1479938236, "post_id": 40774716, "comment_id": 68773499, "body": "With iterators or with operator[] you can access the element without deep copy."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1479938503, "post_id": 40774716, "comment_id": 68773603, "body": "@TiborTak&#225;cs He means the ability to mimic the <a href=\"http://doc.qt.io/qt-4.8/qbytearray.html#fromRawData\" rel=\"nofollow noreferrer\"><b>fromRawData</b></a> functionality."}, {"owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "edited": false, "score": 0, "creation_date": 1479938781, "post_id": 40774716, "comment_id": 68773712, "body": "Not a very general use case but with special allocatior object you can theoretically do it. <a href=\"http://en.cppreference.com/w/cpp/concept/Allocator/\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/concept/Allocator</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1479939000, "post_id": 40774716, "comment_id": 68773786, "body": "<code>char</code> would be a bad template argument for the vector since you don&#39;t know if it is signed or unsigned across implementations (there are <i>3</i> char types in C++; <code>char</code>, <code>unsigned char</code> and <code>signed char</code> and they are all different types to the type system &amp; the signedness of <code>char</code> is implementation defined (yes, this <i>has</i> bitten me)). Better be specific and use <code>uint8_t</code> in this case (IMHO)."}, {"owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1479939379, "post_id": 40774716, "comment_id": 68773919, "body": "@Jesper Juhl I could agree, first I also thought to use <code>uint8_t</code> but QByteArray uses <code>char</code> therefore I thought <code>char</code> template argument more suit for the original behavior."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1479939495, "post_id": 40774716, "comment_id": 68773958, "body": "@Tibor Tak&#225;cs I know <code>QByteArray</code> uses <code>char</code> - I consider that (along with many other things) a failure on the part of the Qt developers."}, {"owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1479939672, "post_id": 40774716, "comment_id": 68774028, "body": "@Jesper Juhl: added to the answer."}], "tags": [], "owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "is_accepted": false, "score": 3, "last_activity_date": 1479939643, "last_edit_date": 1495535579, "creation_date": 1479937847, "answer_id": 40774716, "question_id": 40774637, "link": "https://stackoverflow.com/questions/40774637/standard-replacement-for-qbytearray/40774716#40774716", "title": "Standard replacement for QByteArray", "body": "<p>I do not know such kind of standard container that has the same complex functionality what QByteArray has but I would start with <code>std::vector&lt; char &gt;</code> and would implement a wrapper around that with the missing and necessary functions.</p>\n\n<p><code>std::vector</code> has high flexibility, you can access each element in constant time and you can easily convert it to std::string (for example <a href=\"https://stackoverflow.com/questions/8581832/converting-a-vector-to-string\">Converting a vector to string</a>). </p>\n\n<p>If the <em>insert</em> operation is more important maybe you can try <code>std::list&lt; char &gt;</code>. Mainly this is linked list implementation.</p>\n\n<p>Based on the comment from Jesper Juhl: using <code>uint8_t</code> as template argument would describe the real the <em>byte array</em> behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 8851, "user_id": 760746, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/19726c55cf8ab72ea01bbb2feee5a3f1?s=128&d=identicon&r=PG", "display_name": "Nobody moving away from SE", "link": "https://stackoverflow.com/users/760746/nobody-moving-away-from-se"}, "is_accepted": false, "score": 2, "last_activity_date": 1479939160, "last_edit_date": 1479939160, "creation_date": 1479938763, "answer_id": 40774900, "question_id": 40774637, "link": "https://stackoverflow.com/questions/40774637/standard-replacement-for-qbytearray/40774900#40774900", "title": "Standard replacement for QByteArray", "body": "<p>Not quite standard but you could use the <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#SS-views\" rel=\"nofollow noreferrer\"><code>view</code>/<code>span</code></a> classes from the <a href=\"https://github.com/Microsoft/GSL\" rel=\"nofollow noreferrer\">Guideline Support Library</a> (which should eventually move over into the standard) to emulate <code>fromRawData</code>. </p>\n\n<p>Of course, this does not deal with the lifetime issues that are related to the shared ownership but it might be sufficient in your cases.</p>\n\n<p>Also, while it may not be a requirement for all components, the GSL is advertised as being C++14 based.</p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1480048734, "last_edit_date": 1480048734, "creation_date": 1479940603, "answer_id": 40775282, "question_id": 40774637, "link": "https://stackoverflow.com/questions/40774637/standard-replacement-for-qbytearray/40775282#40775282", "title": "Standard replacement for QByteArray", "body": "<blockquote>\n  <p>Is there a standard C++11 solution that provides similar flexibility? Currently I tend to use good old void* plus size.</p>\n</blockquote>\n\n<p>There's no standard C++11 solution that provides a container that can both manage its own memory or wrap memory managed by someone else.</p>\n\n<p>You could simply copy the <code>QByteArray</code> (it's a few files) and bundle it with your project, if licensing terms allow.</p>\n\n<p>Otherwise, if you only intend to work on containers with contiguous storage for all elements, the <code>const void*</code> and <code>size_t</code> arguments make perfect sense, and will be most portable and adaptable. You can provide convenience overloads as needed. E.g.</p>\n\n<pre><code>HashType calculateHash(const void*, size_t);\n\ntemplate &lt;typename T&gt; HashType calculateHash(const T&amp; container) {\n  static_assert(sizeof(typename T::value_type) == 1, \"value_type must be byte-sized\");\n  assert(&amp;container[container.size()-1] == &amp;container[0]+container.size());\n  return calculateHash(&amp;container[0], container.size());\n}\n</code></pre>\n\n<p>To support <em>any</em> container, even those with non-contiguous storage, the base <code>calculateHash</code> can take a range and offer an overload for hashing an entire container.</p>\n\n<pre><code>template &lt;typename I&gt;\nHashType calculateHash(I start, I const end) {\n  HashType hash;\n  for (; start != end; ++start)\n    hash.update(*start);\n  return hash;\n}\n\ntemplate &lt;typename C&gt;\nHashType calculateHash(const C&amp; container) {\n  using std::begin;\n  using std::end;\n  return calculateHash(begin(container), end(container));\n}\n</code></pre>\n"}], "owner": {"reputation": 7210, "user_id": 1421332, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/39f3da5b153edf32201b9e9100dad01a?s=128&d=identicon&r=PG", "display_name": "Silicomancer", "link": "https://stackoverflow.com/users/1421332/silicomancer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1733, "favorite_count": 0, "accepted_answer_id": 40775282, "answer_count": 3, "score": 4, "last_activity_date": 1497472730, "creation_date": 1479937462, "last_edit_date": 1497472730, "question_id": 40774637, "link": "https://stackoverflow.com/questions/40774637/standard-replacement-for-qbytearray", "title": "Standard replacement for QByteArray", "body": "<p>I want to port a Qt C++11 function to standard C++11. The function has a <code>QByteArray</code> parameter that accepts any kind of data (text, binary data, etc.) and calculates a hash from the data.</p>\n\n<p><code>QByteArray</code> seems well suited because it can carry any kind of data and has a lot of functions that allow filling it from streams, devices, strings, etc. <strong>It even can wrap data without doing a deep copy using <code>fromRawData()</code>.</strong></p>\n\n<p>Is there a standard C++11 solution that provides similar flexibility? Currently I tend to use good old <code>void*</code> plus size.</p>\n"}, {"tags": ["c++", "c++11", "templates", "avr"], "answers": [{"comments": [{"owner": {"reputation": 3975, "user_id": 1683939, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1da3dd4277594fb16a487ff70827e7d7?s=128&d=identicon&r=PG&f=1", "display_name": "bricklore", "link": "https://stackoverflow.com/users/1683939/bricklore"}, "edited": false, "score": 0, "creation_date": 1479939229, "post_id": 40774912, "comment_id": 68773872, "body": "This isn&#39;t actually possible, since I have no direct access to the underlying address of register defines like <code>PORTB</code>. Those are macros which only ultimately evaluate to e.g. <code>*(volatile uint8_t*)(11 + 0x20)</code>. I cannot change them and have to use the macro to obtain the address. So in your example I would need a way to declare the <code>constexpr portb</code> variable only by using <code>PORTB</code> and not the address it evaluates to."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 5, "last_activity_date": 1479950146, "last_edit_date": 1479950146, "creation_date": 1479938799, "answer_id": 40774912, "question_id": 40774632, "link": "https://stackoverflow.com/questions/40774632/passing-an-io-register-as-template-parameter/40774912#40774912", "title": "Passing an IO register as template parameter", "body": "<p>A non-type template parameter has to be a constant expression, and you cannot have a <code>reinterpret_cast</code> inside a constant expression (unless it is unevaluated).</p>\n\n<p>Since you've indicated that you have no way of getting access to the numeric address other than through macros such as <code>PORTB</code>, I suggest a workaround. Though <code>PORTB</code> cannot be used in a template parameter, we can synthesize a unique type that can be used in a template parameter, like so:</p>\n\n<pre><code>struct PORTB_tag {\n    static volatile uint8_t&amp; value() { return PORTB; }\n};\ntemplate &lt;class PortTag&gt;\nclass ControllerRef final {\n  public:\n    static void SetHigh() { PortTag::value() |= 0x2; }\n};\nint main() {\n    ControllerRef&lt;PORTB_tag&gt; ref;\n    ref.SetHigh();\n}\n</code></pre>\n\n<p>To save repetitive typing when you have lots of ports, we can use macros:</p>\n\n<pre><code>#define PORT_TAG(port) port_tag_for_ ## port\n#define MAKE_PORT_TAG(port) struct port_tag_for_ ## port { \\\n    static volatile uint8_t&amp; value() { return port; } \\\n}\ntemplate &lt;class PortTag&gt;\nclass ControllerRef final {\n  public:\n    static void SetHigh() { PortTag::value() |= 0x2; }\n};\nMAKE_PORT_TAG(PORTB);\nint main() {\n    ControllerRef&lt;PORT_TAG(PORTB)&gt; ref;\n    ref.SetHigh();\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/401c0847d77ec0e0\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/401c0847d77ec0e0</a></p>\n"}, {"tags": [], "owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "is_accepted": false, "score": 0, "last_activity_date": 1479946198, "last_edit_date": 1495540795, "creation_date": 1479946198, "answer_id": 40776194, "question_id": 40774632, "link": "https://stackoverflow.com/questions/40774632/passing-an-io-register-as-template-parameter/40776194#40776194", "title": "Passing an IO register as template parameter", "body": "<p>As Brian pointed out in his answer, the template parameter has to be a constant expression.  In somewhat older GCCs (pre-6.0), the following <strong>hack</strong> should work:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;utility&gt;\n\n#define PORTB (*(volatile uint8_t*)(11 + 0x20))\n\n// Helper constant for 0 address\n#define ZERO  (*(volatile uint8_t*)(0))\n\n// A ptrdiff_t is OK\ntemplate &lt;std::ptrdiff_t PortRegister&gt;\nclass ControllerPtr final\n{\npublic:\n  // Get back to the actual desired address\n  static void SetHigh() { *(volatile uint8_t*)(&amp;ZERO+PortRegister) |= 0x2; }\n};\n\n// Define helper constants for all relevant registers\nstatic constexpr std::ptrdiff_t C_PORTB = &amp;PORTB-&amp;ZERO;\n\nint main()\n{\n  // Now this works\n  ControllerPtr&lt;C_PORTB&gt; ptr;\n\n  ptr.SetHigh();\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/ZDD0UM\" rel=\"nofollow noreferrer\">Inspect the result here</a>.  I'm calling it a hack because newer GCC versions will (rightly) refuse to compile this with the error</p>\n\n<blockquote>\n  <p>error: reinterpret_cast from integer to pointer</p>\n</blockquote>\n\n<p>at the line of the <code>constexpr</code> declaration, because technically you cannot use the result of a <code>reinterpret_cast</code> in a constant expression.  <a href=\"https://stackoverflow.com/questions/24397797/statically-casting-an-integer-to-pointer-type\">This SO post</a> provides a bit more background.</p>\n"}], "owner": {"reputation": 3975, "user_id": 1683939, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1da3dd4277594fb16a487ff70827e7d7?s=128&d=identicon&r=PG&f=1", "display_name": "bricklore", "link": "https://stackoverflow.com/users/1683939/bricklore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 40774912, "answer_count": 2, "score": 2, "last_activity_date": 1479950146, "creation_date": 1479937432, "question_id": 40774632, "link": "https://stackoverflow.com/questions/40774632/passing-an-io-register-as-template-parameter", "title": "Passing an IO register as template parameter", "body": "<p>I want to use an IO-Register ( == static memory address ) as a template parameter. The problem is, that registers are commonly defined as macros expanding to something similar to <code>(*(volatile uint8_t*)(11 + 0x20))</code> which I somehow cannot get to work with my templates properly.</p>\n\n<p>I would like to write code like:</p>\n\n<pre><code>Foo&lt;PORTB&gt; foo;\n</code></pre>\n\n<p>That way I can easily change the IO register the class uses without any runtime overhead (which is crucial for microcontrollers).\nI have included a full example below:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;utility&gt;\n\n#define PORTB  (*(volatile uint8_t*)(11 + 0x20))\n\ntemplate&lt;volatile uint8_t* PortRegister&gt;\nclass ControllerPtr final\n{\npublic:\n    static void SetHigh() { *PortRegister |= 0x2; }\n};\n\ntemplate&lt;volatile uint8_t&amp; PortRegister&gt;\nclass ControllerRef final\n{\npublic:\n    static void SetHigh() { PortRegister |= 0x2; }\n};\n\n\nint main()\n{\n    ControllerPtr&lt;&amp;PORTB&gt; ptr;\n    ControllerRef&lt;PORTB&gt; ref;\n\n    ptr.SetHigh();\n    ref.SetHigh();\n\n    // Both statements should be equal to:\n    // PORTB |= 0x2;\n}\n</code></pre>\n\n<p>Everytime when I try to pass <code>&amp;PORTB</code> to <code>ControllerPtr</code>, g++ fails to compile:</p>\n\n<blockquote>\n  <p>error: <code>(volatile uint8_t*)((long int)(11 + 32))</code> is not a valid template argument for <code>volatile uint8_t* {aka volatile unsigned char*}</code> because it is not the address of a variable  </p>\n  \n  <p>error: expression <code>*(volatile uint8_t*)((long int)(11 + 32))</code> has side-effects</p>\n</blockquote>\n\n<p>The error is a little bit different when trying to pass <code>PORTB</code> to a reference type like used in <code>ControllerRef</code>:</p>\n\n<blockquote>\n  <p>error: <code>*(volatile uint8_t*)((long int)(11 + 32))</code> is not a valid template argument for type <code>volatile uint8_t&amp; {aka volatile unsigned char&amp;}</code> because it is not an object with linkage</p>\n</blockquote>\n\n<p>I actually don't understand why this error is an error, as I don't see any problem with passing static addresses to templates.</p>\n"}, {"tags": ["c++", "objective-c", "cocoa", "nswindow", "macos-carbon"], "comments": [{"owner": {"reputation": 1284, "user_id": 614133, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3da64bfdd2c7f58ce874c678bb5143ff?s=128&d=identicon&r=PG", "display_name": "sliwinski.lukas", "link": "https://stackoverflow.com/users/614133/sliwinski-lukas"}, "edited": false, "score": 0, "creation_date": 1578606981, "post_id": 40774603, "comment_id": 105504045, "body": "Do you have any update on this?"}], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 3564870, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d831d51593148fed829724b20747d28?s=128&d=identicon&r=PG&f=1", "display_name": "user3564870", "link": "https://stackoverflow.com/users/3564870/user3564870"}, "edited": false, "score": 0, "creation_date": 1480398568, "post_id": 40785014, "comment_id": 68933276, "body": "Thanks! I&#39;ll give it a shot in the morning."}, {"owner": {"reputation": 355, "user_id": 3564870, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d831d51593148fed829724b20747d28?s=128&d=identicon&r=PG&f=1", "display_name": "user3564870", "link": "https://stackoverflow.com/users/3564870/user3564870"}, "edited": false, "score": 0, "creation_date": 1480443257, "post_id": 40785014, "comment_id": 68960918, "body": "I don&#39;t think it&#39;s possible to get a window number for windows that the app doesn&#39;t own. Then there would be the assumption that the external app is Cocoa."}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "reply_to_user": {"reputation": 355, "user_id": 3564870, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d831d51593148fed829724b20747d28?s=128&d=identicon&r=PG&f=1", "display_name": "user3564870", "link": "https://stackoverflow.com/users/3564870/user3564870"}, "edited": false, "score": 0, "creation_date": 1480500080, "post_id": 40785014, "comment_id": 68984628, "body": "Does <a href=\"http://stackoverflow.com/questions/2107657/mac-cocoa-getting-a-list-of-windows-using-accessibility-api\">this</a> help?"}, {"owner": {"reputation": 355, "user_id": 3564870, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d831d51593148fed829724b20747d28?s=128&d=identicon&r=PG&f=1", "display_name": "user3564870", "link": "https://stackoverflow.com/users/3564870/user3564870"}, "edited": false, "score": 0, "creation_date": 1480522801, "post_id": 40785014, "comment_id": 69000317, "body": "yes. I added the code I&#39;m working on based on your input to my question. I&#39;m getting a EXC_BAD_ACCESS error as noted by the comment."}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "reply_to_user": {"reputation": 355, "user_id": 3564870, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d831d51593148fed829724b20747d28?s=128&d=identicon&r=PG&f=1", "display_name": "user3564870", "link": "https://stackoverflow.com/users/3564870/user3564870"}, "edited": false, "score": 0, "creation_date": 1480583705, "post_id": 40785014, "comment_id": 69025714, "body": "Check the address of <code>nsviewObject</code>. I suspect the issue may be that the number returned is in the VM space of the process that you&#39;re retrieving from, not your own process. If this is the case, then you won&#39;t be able to do it this way."}], "tags": [], "owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "is_accepted": false, "score": 0, "last_activity_date": 1479986232, "last_edit_date": 1495540381, "creation_date": 1479986232, "answer_id": 40785014, "question_id": 40774603, "link": "https://stackoverflow.com/questions/40774603/making-external-app-float-on-top-of-os-x-application/40785014#40785014", "title": "Making External App Float On Top Of OS X Application", "body": "<p>In order for an application window to be visible on all spaces, you can do something like this: -</p>\n\n<pre><code>objc_object* nsviewObject = reinterpret_cast&lt;objc_object *&gt;(windowObject);\nobjc_object* nsWindowObject = objc_msgSend(nsviewObject, sel_registerName(\"window\"));\nint NSWindowCollectionBehaviorCanJoinAllSpaces = 1 &lt;&lt; 0;\nobjc_msgSend(nsWindowObject, sel_registerName(\"setCollectionBehavior:\"), NSWindowCollectionBehaviorCanJoinAllSpaces);\n</code></pre>\n\n<p>Where <code>windowObject</code> is the <a href=\"https://stackoverflow.com/questions/1692555/get-current-focused-window-id-using-objective-c\">windowNumber</a> of the application window you want to remain on top.</p>\n"}], "owner": {"reputation": 355, "user_id": 3564870, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5d831d51593148fed829724b20747d28?s=128&d=identicon&r=PG&f=1", "display_name": "user3564870", "link": "https://stackoverflow.com/users/3564870/user3564870"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480527559, "creation_date": 1479937290, "last_edit_date": 1480527559, "question_id": 40774603, "link": "https://stackoverflow.com/questions/40774603/making-external-app-float-on-top-of-os-x-application", "title": "Making External App Float On Top Of OS X Application", "body": "<p>I'm trying to create an OS X application that allows an external application (i.e. textEdit) to float on top of the running application without keeping focus, but never disappearing. Basically what I'm trying to do is mimic the ForceQuit Application (press option-command-esc to see it), where it's always on top but doesn't always have focus.</p>\n\n<p>What I'm doing now with limited success is this:</p>\n\n<p>Creating a NSTimer to keep putting it on top:</p>\n\n<pre><code>_timer = [NSTimer scheduleTimerWithTimeInterval:0.1 target:self selector:@selector(keepTextEditOnTop) userInfo:nil repeats:YES];\n</code></pre>\n\n<p>...</p>\n\n<p>Bring textEdit to the front:</p>\n\n<pre><code>- (void)keepTextEditOnTop {\n    AXUIElementRef appRef = AXUIElementCreateApplication(_textEditProcessID);\n    AXUIElementSetAttributeValue(appRef, kAXFrontmostAttribute, kCFBooleanTrue);\n}\n</code></pre>\n\n<p>The textEdit window will stay on top if you click off it (make it lose focus). But there are two problems. 1.) It will flash briefly putting it back on top 2.) It will essentially always keep focus so you can't interact with the underlying app.</p>\n\n<p>From the appRef, you can get the window:</p>\n\n<pre><code>CFArrayRef windowList;\nAXUIElementCopyAttributeValue(appRef, kAXWindowsAttribute, (CFTypeRef *)&amp;windowList);\n\nAXUIElementRef windowRef = (AXUIElementRef) CFArrayGetValueAtIndex(windowList, 0);\n</code></pre>\n\n<p>But I don't think it will be possible to convert it into a NSWindow. If I could do that, I imagine I could make it a child window of the main window or maybe just a floating window.  </p>\n\n<p>Any ideas on how this could be done?</p>\n\n<p><strong>Edit- Adding suggestions from @TheDarkKnight</strong></p>\n\n<p>I'm trying this:</p>\n\n<pre><code>- (void)testing{\n\n    CFArrayRef windowList = CGWindowListCopyWindowInfo(kCGWindowListOptionOnScreenOnly, kCGNullWindowID);\n    for (NSMutableDictionary* entry in (__bridge NSArray*)windowList)\n    {\n        NSString* ownerName = [entry objectForKey:(__bridge id)kCGWindowOwnerName];\n        NSString *windowNum = [entry objectForKey:(__bridge id)kCGWindowNumber];\n    if([ownerName isEqualToString:@\"Sublime Text\"]){\n       [self holdToTheFront:[windowNum integerValue]];\n    }\n}\nCFRelease(windowList);\n</code></pre>\n\n<p>}</p>\n\n<p>Getting a EXC_BAD_ACCESS error as noted in the comment below:</p>\n\n<pre><code>- (void)holdToTheFront:(NSInteger)winNum {\n     objc_object*  nsviewObject = reinterpret_cast&lt;objc_object *&gt;(winNum);\n\n    //Getting a \"Thread 1:EXC_BAD_ACCESS (code=1, address=0x18)\" at the line below:\n    NSWindow* nsWindowObject = ((id (*)(id, SEL))objc_msgSend)((__bridge NSView *)nsviewObject, sel_registerName(\"window\"));\n\n    int NSWindowCollectionBehaviorCanJoinAllSpaces = 1 &lt;&lt; 0;\n    ((id (*)(id, SEL, NSUInteger))objc_msgSend)(nsWindowObject, sel_registerName(\"setCollectionBehavior:\"), NSWindowCollectionBehaviorCanJoinAllSpaces);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1294, "user_id": 6912707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wSMfc.jpg?s=128&g=1", "display_name": "Logan Byers", "link": "https://stackoverflow.com/users/6912707/logan-byers"}, "edited": false, "score": 2, "creation_date": 1479936878, "post_id": 40774418, "comment_id": 68772899, "body": "<code>r += r + 1</code> is equivalent to <code>r = r + r + 1</code>. So every t loop, it is guaranteed that some w == t."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1479936885, "post_id": 40774418, "comment_id": 68772905, "body": "<code>r += r + 1</code> should be either <code>r += 1</code>, <code>r = r + 1</code>, or <code>++r</code>. But the loops are also wrong, since <code>t</code> and <code>w</code> will often be equal, and <code>keptDice[i] == keptDice[w]</code> will be trivially (and pointlessly) true."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479936888, "post_id": 40774418, "comment_id": 68772908, "body": "<a href=\"http://coliru.stacked-crooked.com/a/3750e02cbc4e059c\" rel=\"nofollow noreferrer\">No repro</a> doesn&#39;t compile."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 1087074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027f6bb7d6361cb8d03554cfd8c5b424?s=128&d=identicon&r=PG", "display_name": "user1087074", "link": "https://stackoverflow.com/users/1087074/user1087074"}, "edited": false, "score": 0, "creation_date": 1479939474, "post_id": 40774545, "comment_id": 68773951, "body": "Thanks for the help!"}, {"owner": {"reputation": 27, "user_id": 1087074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027f6bb7d6361cb8d03554cfd8c5b424?s=128&d=identicon&r=PG", "display_name": "user1087074", "link": "https://stackoverflow.com/users/1087074/user1087074"}, "edited": false, "score": 0, "creation_date": 1479939519, "post_id": 40774545, "comment_id": 68773973, "body": "The modified code you supplied though was a tad bit incorrect. You have to put int count outside of the for loop, or else it won&#39;t work correctly. Once you do that it works fine"}], "tags": [], "owner": {"reputation": 83, "user_id": 6538489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/528feac210c66dee0b44a6d3ff2bf976?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Schmidt", "link": "https://stackoverflow.com/users/6538489/joseph-schmidt"}, "is_accepted": false, "score": 1, "last_activity_date": 1479937509, "last_edit_date": 1479937509, "creation_date": 1479936977, "answer_id": 40774545, "question_id": 40774418, "link": "https://stackoverflow.com/questions/40774418/trying-to-check-for-3-of-a-kind-with-arrays-yahtzee-c/40774545#40774545", "title": "Trying to check for 3 of a kind with arrays (Yahtzee) C++", "body": "<pre><code>r += r + 1\n</code></pre>\n\n<p>is the same as writing</p>\n\n<pre><code>r = r + r + 1\n</code></pre>\n\n<p>r is doubling every time.  Interestingly, it's always 1 less than 2^n</p>\n\n<pre><code>r = 0 + 0 + 1 (1)\nr = 1 + 1 + 1 (3)\nr = 3 + 3 + 1 (7)\nr = 7 + 7 + 1 (15)\nr = 15 + 15 + 1 (31)\nr = 31 + 31 + 1 (63)\nr = 63 + 63 + 1 (127)\nr = 127 + 127 + 1 (255)\nr = 255 + 255 + 1 (511)\nr = 511 + 511 + 1 (1023)\nr = 1023 + 1023 + 1 (2047)\nr = 2047 + 2047 + 1 (4095)\nr = 4095 + 4095 + 1 (8191)\n</code></pre>\n\n<p>Your program is counting 13 matches.  For yahtzee, you probably want an array that counts matches, otherwise you're doubling up on each die.  For example, if you had </p>\n\n<pre><code>1 2 3 4 1\n</code></pre>\n\n<p>It would count the first 1 matching the last die AND the last die matching the first (2 matches).</p>\n\n<p>What would be more sensible is to count how many 1's you have, how many 2s you have, and store in an array</p>\n\n<pre><code>int diceCount[6];\nfor(int num = 1; num &lt;= 6; num++) {\n        for(int w = 0; w &lt; 5; w++) {\n          int count = 0;\n          if(keptDice[w] == num ) {\n            count++;\n          }\n          diceCount[num-1] = count;\n        }\n</code></pre>\n\n<p>This way when it's done, if you had two 1's, then diceCount[0] will be 2</p>\n"}, {"tags": [], "owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "is_accepted": false, "score": 1, "last_activity_date": 1479937107, "creation_date": 1479937107, "answer_id": 40774566, "question_id": 40774418, "link": "https://stackoverflow.com/questions/40774418/trying-to-check-for-3-of-a-kind-with-arrays-yahtzee-c/40774566#40774566", "title": "Trying to check for 3 of a kind with arrays (Yahtzee) C++", "body": "<p>The point is that in the second for loop yo have tor start from t (int w = t;...) otherwise you would compare each dice with itself which will be naturally equal. Plus use r++ instead of r += r + 1 which is definitely wrong but I think that is just a misspelling. </p>\n\n<pre><code>int r = 0;\ncout &lt;&lt; \"first value of R is \" &lt;&lt; r &lt;&lt; endl;\nfor(int t = 0; t &lt; 5; t++) {\n    for(int w = t; w &lt; 5; w++) {\n        if(keptDice[t] == keptDice[w] ) {\n            r++;\n        }\n    }\n}\ncout &lt;&lt; \"Value of R is \" &lt;&lt; r &lt;&lt; endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 531, "user_id": 3717854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98ac0b3014c58bb37034799aa0482860?s=128&d=identicon&r=PG&f=1", "display_name": "Matiasd", "link": "https://stackoverflow.com/users/3717854/matiasd"}, "is_accepted": false, "score": 0, "last_activity_date": 1479939238, "creation_date": 1479939238, "answer_id": 40775013, "question_id": 40774418, "link": "https://stackoverflow.com/questions/40774418/trying-to-check-for-3-of-a-kind-with-arrays-yahtzee-c/40775013#40775013", "title": "Trying to check for 3 of a kind with arrays (Yahtzee) C++", "body": "<p>Based on your approach, but generalized to N-of-a-kind:</p>\n\n<pre><code>int N = 3; // N in [1;5]\nbool isNOfAKind = false;\nfor(int t = 0; t &lt; 6-N; t++) { // skip searches with less elements than N\n    int r = 0; // r must be reset for each count\n    for(int w = t+1; w &lt; 5; w++) { // avoid comparing to self\n        if(keptDice[t] == keptDice[w]) {\n            r++;\n        }\n    }\n    // found a solution already? then bail out.\n    if(r == N) {\n        isNOfAKind = true;\n        break;\n    }\n}\ncout &lt;&lt; N &lt;&lt; \" of a kind? \" &lt;&lt; isNOfAKind &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 1087074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027f6bb7d6361cb8d03554cfd8c5b424?s=128&d=identicon&r=PG", "display_name": "user1087074", "link": "https://stackoverflow.com/users/1087074/user1087074"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1479939238, "creation_date": 1479936391, "question_id": 40774418, "link": "https://stackoverflow.com/questions/40774418/trying-to-check-for-3-of-a-kind-with-arrays-yahtzee-c", "title": "Trying to check for 3 of a kind with arrays (Yahtzee) C++", "body": "<p>I am trying to check for if the kept dice rolls (which can be up to 5) are 3 of a kind or not, so I'm trying to compare the dice roll values to each other.</p>\n\n<p>The first value of R is showing as 0 of course, but the second value of R after the code is run is showing as 8191 every time, and I'm not entirely sure why.</p>\n\n<p>I've also tried using \nr++ instead of r += r+1, but of course that didn't change anything.</p>\n\n<pre><code>int r = 0;\n          cout &lt;&lt; \"first value of R is \" &lt;&lt; r &lt;&lt; endl;\n          for(int t = 0; t &lt; 5; t++) {\n            for(int w = 0; w &lt; 5; w++) {\n              if(keptDice[t] == keptDice[w] ) {\n                r += r + 1;\n              }\n            }\n          }\n          cout &lt;&lt; \"Value of R is \" &lt;&lt; r &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "edited": false, "score": 0, "creation_date": 1479937578, "post_id": 40774567, "comment_id": 68773211, "body": "Thanks. I need some time to digest your response. Appreciate very much"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 4, "last_activity_date": 1479938673, "last_edit_date": 1479938673, "creation_date": 1479937113, "answer_id": 40774567, "question_id": 40774393, "link": "https://stackoverflow.com/questions/40774393/c-typeid-ignored-low-level-const-reference-but-not-pointers/40774567#40774567", "title": "C++ : typeid ignored low level const reference but not pointers", "body": "<p>The <code>const</code> in case of reference is not really low-level (as opposed to the pointer case).</p>\n\n<p><code>typeid</code> is applied to the type of expression <code>q</code>. This expression immediately loses its reference type, per the following general rule</p>\n\n<blockquote>\n  <p><strong>5 Expressions</strong></p>\n  \n  <p><strong>5</strong> If an expression initially has the type \u201creference to T\u201d (8.3.2, 8.5.3), the type is adjusted to T prior to any further analysis. The expression designates the object or function denoted by the reference, and the expression is an lvalue or an xvalue, depending on the expression.</p>\n</blockquote>\n\n<p>Expressions in C++ never have visible \"reference\" types, which also means that <code>typeid</code> cannot \"see\" references. It cases like this it always sees lvalues or xvalues of non-reference types. In your case <code>typeid</code> sees lvalue expression of type <code>const int</code> as its agument. </p>\n\n<p>The rest follows from the definition of <code>typeid</code> behavior</p>\n\n<blockquote>\n  <p><strong>5.2.8 Type identification</strong></p>\n  \n  <p><strong>5</strong> If the type of the expression or type-id is a cv-qualified type, the result of the typeid expression refers to a std::type_info object representing the cv-unqualified type.</p>\n</blockquote>\n\n<p>I.e. <code>typeid</code> simply ignores top-level const-qualification.</p>\n\n<p>In pointer case the const-qualification you are referring to is a not a top-level one. It is not lost under <code>typeid</code>.</p>\n\n<p>Note also that the definition of <code>typeid</code> contains the following rule </p>\n\n<blockquote>\n  <p><strong>4</strong> When typeid is applied to a type-id, the result refers to a std::type_info object representing the type of the type-id. If the type of the type-id is a reference to a possibly cv-qualified type, the result of the typeid\n  expression refers to a std::type_info object representing the cv-unqualified referenced type.</p>\n</blockquote>\n\n<p>Its purpose is to make the behavior of <code>typeid</code> applied to typenames consistent with the above behavior of <code>typeid</code> applied to expressions. I.e. <code>typed</code> applied to typename ignores references and also ignores cv-quailifications that become top-level after reference removal.</p>\n\n<p>For some extra examples</p>\n\n<pre><code>typeid(const int) == typeid(int);     // &lt;- true\ntypeid(const int &amp;) == typeid(int);   // &lt;- true\ntypeid(int *) == typeid(int *const);  // &lt;- true\ntypeid(int *) == typeid(const int *); // &lt;- false\n</code></pre>\n"}], "owner": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1479938673, "creation_date": 1479936272, "last_edit_date": 1479936837, "question_id": 40774393, "link": "https://stackoverflow.com/questions/40774393/c-typeid-ignored-low-level-const-reference-but-not-pointers", "title": "C++ : typeid ignored low level const reference but not pointers", "body": "<p>Consider the following code:</p>\n\n<pre><code>int main() {\n    const int i = 42;    \n    auto *p = &amp;i; // p is const int *. const is low level const\n    auto &amp;q = i; // q is const int &amp;. reference to const is always low level\n    cout &lt;&lt; \"p = \" &lt;&lt; typeid(p).name() &lt;&lt; endl;\n    cout &lt;&lt; \"q = \" &lt;&lt; typeid(q).name() &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Here's the output:</p>\n\n<pre><code>p = pki\nq = i\n</code></pre>\n\n<p>Why is <code>typeid(q)</code> not showing the character <code>k</code> indicating that it's a <code>const</code> reference? <code>q</code> is reference to a <code>const</code> and that is always low level.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 782, "user_id": 4706859, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/8Ttqb.png?s=128&g=1", "display_name": "SR_", "link": "https://stackoverflow.com/users/4706859/sr"}, "edited": false, "score": 3, "creation_date": 1479936574, "post_id": 40774301, "comment_id": 68772766, "body": "dup of <a href=\"http://stackoverflow.com/questions/26946201/why-do-reference-type-members-cause-implicitly-declared-copy-assignment-operator\" title=\"why do reference type members cause implicitly declared copy assignment operator\">stackoverflow.com/questions/26946201/&hellip;</a> ?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1479936586, "post_id": 40774301, "comment_id": 68772771, "body": "<code>main</code> must return <code>int</code>, not <code>void</code>."}], "answers": [{"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 1, "last_activity_date": 1479936643, "creation_date": 1479936643, "answer_id": 40774460, "question_id": 40774301, "link": "https://stackoverflow.com/questions/40774301/implicitly-defined-copy-assignment-operator/40774460#40774460", "title": "Implicitly-defined copy assignment operator", "body": "<p>It can do it because reference can't be rebound to another one.</p>\n\n<p>If the compiler would generate a function like you provided, I would do this:</p>\n\n<pre><code>struct Ref {\n    int&amp; num;\n    // hypotetical operator= generated\n};\n\n// ...\n\nint a = 2;\nint b = 5;\n\nRef ra{a};\nRef rb{b};\n\nra = rb; // now a = 5. Quite confusing.\n\na = 3; // still changes what value `ra.num` yeild. rb is not affected.\n\n// will print \"false\".\nstd::cout &lt;&lt; std::boolalpha &lt;&lt; (ra.num == rb.num) &lt;&lt; std::endl;\n</code></pre>\n\n<p>That would lead to some nasty errors.</p>\n\n<p>My preferred solution to this problem is to not care. I think that the <code>operator=</code> is not absolutly required for most use cases.</p>\n\n<p>However, if you really want to provide an <code>operator=</code> to the users of your class, you can hold a pointer or a <code>std::reference_wrapper</code> instead of a reference. Both will allow your class to be assignable, making your reference rebindable. Between those two, I usually prefer pointers as they are more straightforward to use in my opinion.</p>\n\n<pre><code>struct Ref {\n    std::reference_wrapper&lt;int&gt; num;\n};\n\n// -- or --\n\nstruct Ref {\n    Ref(int&amp; ref) : num{&amp;ref} {}\n\n    int* num;\n};\n\n// ...\n\nint a = 2;\nint b = 5;\n\nRef ra{a};\nRef rb{b};\n\nra = rb; // now ra.num and rb.num are bound to the same reference.\n</code></pre>\n"}], "owner": {"reputation": 172, "user_id": 5261125, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/56f0d9b70a467b10eaf71e947c387b3d?s=128&d=identicon&r=PG&f=1", "display_name": "maclaud", "link": "https://stackoverflow.com/users/5261125/maclaud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "closed_date": 1479936922, "answer_count": 1, "score": 0, "last_activity_date": 1479936643, "creation_date": 1479935881, "question_id": 40774301, "link": "https://stackoverflow.com/questions/40774301/implicitly-defined-copy-assignment-operator", "closed_reason": "Duplicate", "title": "Implicitly-defined copy assignment operator", "body": "<pre><code>class B\n{\npublic:\n    B(int&amp; a) :ref(a){}\n    B(B const&amp;) = default;\n    int&amp; ref;\n};\n\n\nvoid main()\n{\n    int a1 = 1, a2 = 2;\n    B b1(a1), b2(b1), b3(a2);\n    b3 = b1;\n\n}\n</code></pre>\n\n<p>If the implicitly-defined copy assignment operator of compiler's implementation is,</p>\n\n<pre><code>B&amp; operator=(const B&amp; rhs)\n{\n    this-&gt;ref = rhs.ref;\n    return *this;\n}\n</code></pre>\n\n<p>why cannot be generated for references? The initial alias bounding to variable a is not affected, because in the copy assignment operator the numeric value of reference variable ref is altered.</p>\n"}, {"tags": ["c++", "regedit"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 7108155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dcaad8bafde3198265eace444c263b8?s=128&d=identicon&r=PG&f=1", "display_name": "Nakruf", "link": "https://stackoverflow.com/users/7108155/nakruf"}, "edited": false, "score": 0, "creation_date": 1479938955, "post_id": 40774503, "comment_id": 68773771, "body": "it didn&#39;t work but you are right in my parameters errors."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1479939656, "post_id": 40774503, "comment_id": 68774021, "body": "Always check return values!  <code>RegSetValueEx()</code> (or more likely <code>RegOpenKeyEx()</code>) is failing with an error that you are not catching.  Don&#39;t use <code>KEY_ALL_ACCESS</code>, in this case <code>KEY_SET_VALUE</code> by itself would suffice, provided the code is running with admin rights since it is trying to write to <code>HKLM</code>, which is protected from writes by non-admins. when accessing a securable resource, NEVER ask for more permissions than you ACTUALLY need."}], "tags": [], "owner": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "is_accepted": true, "score": 2, "last_activity_date": 1480462932, "last_edit_date": 1480462932, "creation_date": 1479936836, "answer_id": 40774503, "question_id": 40774281, "link": "https://stackoverflow.com/questions/40774281/regsetvalueex-doesnt-create-a-string-value/40774503#40774503", "title": "RegSetValueEx doesn&#39;t create a String Value", "body": "<p>The RegSetValueEx call is all off. The first parameter should be a subkey handle, not HKEY_LOCAL_MACHINE. The 5th parameter should point to the data, not to the pointer to data. The 6th parameter should contain the string length, in bytes (keep in mind it's a wide string), including the terminating null.</p>\n\n<p>So reformulate like this:</p>\n\n<pre><code>RegSetValueEx(hKey, StringVal, NULL, REG_SZ, (LPBYTE)data, sizeof(wchar_t)*(wcslen(data)+1));\n</code></pre>\n\n<p>Most importantly, HKEY_LOCAL_MACHINE is read-only for non-admin users, and even for admin users it's read-only without privilege elevation.</p>\n\n<p>Also, <code>system(\"pause\")</code> is an awful way to wait for a key press. Call \"getch()\" instead.</p>\n"}], "owner": {"reputation": 17, "user_id": 7108155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dcaad8bafde3198265eace444c263b8?s=128&d=identicon&r=PG&f=1", "display_name": "Nakruf", "link": "https://stackoverflow.com/users/7108155/nakruf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1911, "favorite_count": 0, "accepted_answer_id": 40774503, "answer_count": 1, "score": 0, "last_activity_date": 1480462932, "creation_date": 1479935786, "question_id": 40774281, "link": "https://stackoverflow.com/questions/40774281/regsetvalueex-doesnt-create-a-string-value", "title": "RegSetValueEx doesn&#39;t create a String Value", "body": "<p>I read some documentation and looked at code examples but I can't find any reasons for my code not to work.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;Windows.h&gt;\nusing namespace std;\n\nvoid AddSubKeyWithValue(HKEY hRootKey, LPWSTR strSubKey, LPCTSTR StringVal, LPCTSTR data)\n{\n    HKEY hKey;\n    RegOpenKeyEx(hRootKey, strSubKey, NULL, KEY_ALL_ACCESS, &amp;hKey);\n    RegSetValueEx(hRootKey, StringVal, NULL, REG_SZ, (LPBYTE)&amp;data, sizeof(REG_SZ));\n    RegCloseKey(hKey);\n    return;\n}\n\n\nvoid main() {\n\n    AddSubKeyWithValue(HKEY_LOCAL_MACHINE, L\"SOFTWARE\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run\",L\"Slayer Tool\", L\"c:\\\\Slayer\\\\Update.exe\");\n\n    system(\"pause\");\n    return;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "sublimetext3", "syntax-highlighting"], "comments": [{"owner": {"reputation": 6198, "user_id": 839601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db99aa846a8217f7e2aba6fa198e7c?s=128&d=identicon&r=PG", "display_name": "gnat", "link": "https://stackoverflow.com/users/839601/gnat"}, "reply_to_user": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1479939580, "post_id": 40774257, "comment_id": 68773996, "body": "@TankorSmash this is a poor fit there, see <a href=\"http://meta.softwareengineering.stackexchange.com/questions/7253/where-does-my-tool-question-go\">Where does my tool question go?</a> Please abstain of recommending sites you&#39;re not familiar with (you even got the site name wrong)"}, {"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 0, "creation_date": 1479940145, "post_id": 40774257, "comment_id": 68774200, "body": "This should work out of the box. Make sure the syntax is set properly (bottom right of status bar should say C++) and that you&#39;re not overriding it with a non-standard one. You might also try a different color scheme in case the colors in the one you&#39;re using are messed up. To answer your question more specifically, in order to change the syntax highlighting of <code>this</code> you would need to modify the syntax file to give it a different scope."}, {"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "reply_to_user": {"reputation": 6198, "user_id": 839601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db99aa846a8217f7e2aba6fa198e7c?s=128&d=identicon&r=PG", "display_name": "gnat", "link": "https://stackoverflow.com/users/839601/gnat"}, "edited": false, "score": 0, "creation_date": 1479942983, "post_id": 40774257, "comment_id": 68775125, "body": "@gnat it was like a month ago, give a guy some slack <a href=\"http://meta.softwareengineering.stackexchange.com/questions/8266/its-official-programmers-is-now-software-engineering-stack-exchange\" title=\"its official programmers is now software engineering stack exchange\">meta.softwareengineering.stackexchange.com/questions/8266/&hellip;</a>"}, {"owner": {"reputation": 1832, "user_id": 3321579, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8507b1ffc84187a23597ae23ad773458?s=128&d=identicon&r=PG&f=1", "display_name": "Scorb", "link": "https://stackoverflow.com/users/3321579/scorb"}, "edited": false, "score": 0, "creation_date": 1479954501, "post_id": 40774257, "comment_id": 68777909, "body": "How do I know if I am overriding with a non-standard one?"}, {"owner": {"reputation": 1832, "user_id": 3321579, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8507b1ffc84187a23597ae23ad773458?s=128&d=identicon&r=PG&f=1", "display_name": "Scorb", "link": "https://stackoverflow.com/users/3321579/scorb"}, "edited": false, "score": 0, "creation_date": 1479956852, "post_id": 40774257, "comment_id": 68778528, "body": "Turns out it was my color scheme that was just inadequate."}, {"owner": {"reputation": 6198, "user_id": 839601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db99aa846a8217f7e2aba6fa198e7c?s=128&d=identicon&r=PG", "display_name": "gnat", "link": "https://stackoverflow.com/users/839601/gnat"}, "reply_to_user": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1479963050, "post_id": 40774257, "comment_id": 68780003, "body": "@TankorSmash faq guidance referred in my prior comment was posted very long time ago. That you <i>additionally</i> missed site name is kind of an icing on a cake"}, {"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 0, "creation_date": 1480006280, "post_id": 40774257, "comment_id": 68805132, "body": "The Sublime devs have done a lot of work lately on updating the syntax definitions and standardizing the scopes they use, so older color schemes need to be updated to take advantage."}], "owner": {"reputation": 1832, "user_id": 3321579, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8507b1ffc84187a23597ae23ad773458?s=128&d=identicon&r=PG&f=1", "display_name": "Scorb", "link": "https://stackoverflow.com/users/3321579/scorb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479935668, "creation_date": 1479935668, "question_id": 40774257, "link": "https://stackoverflow.com/questions/40774257/sublime-text-3-c-this-keyword-syntax-highlight", "title": "Sublime Text 3 c++ &#39;this&#39; keyword syntax highlight", "body": "<p>When viewing C++ code in sublime text 3, my 'this' keyword is not colored as a keyword, instead it is just plain white.</p>\n\n<p>I am not sure if this is the standard syntax coloring out of the box for sublime text 3, or I have somewhere down the road broken something in my configuration.</p>\n\n<p>How can I change my syntax highlighting for C++ to color the 'this' keyword, in the same way that 'true' or 'false' would be colored?</p>\n"}, {"tags": ["c++", "dictionary", "containers"], "comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 2, "creation_date": 1479979220, "post_id": 40774100, "comment_id": 68787456, "body": "Look up <a href=\"https://en.wikipedia.org/wiki/Interval_tree\" rel=\"nofollow noreferrer\">interval tree</a> and maybe its generalisation, <a href=\"https://en.wikipedia.org/wiki/K-d_tree\" rel=\"nofollow noreferrer\">k-d tree</a>"}], "answers": [{"tags": [], "owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "is_accepted": true, "score": 1, "last_activity_date": 1479979644, "last_edit_date": 1479979644, "creation_date": 1479979223, "answer_id": 40782279, "question_id": 40774100, "link": "https://stackoverflow.com/questions/40774100/is-there-an-implementation-of-a-map-like-container-with-a-real-number-as-a-key/40782279#40782279", "title": "Is there an implementation of a map-like container, with a real number as a key, and where a set of objects can be retrieved by key range?", "body": "<p>A binary search tree could be the solution. You can find the lowest key and the highest key in the range in <code>O(log(N))</code> time. And retrieving the objects between should be <code>O(k)</code> (where <code>k</code> is the number of objects found) by simply traversing the tree.</p>\n\n<p>The <code>std::map</code> should be a good place to start, use it together with <code>std::map::lower_bound</code> and <code>std::map::upper_bound</code> (both are guaranteed to have at most logarithmic complexity).</p>\n"}], "owner": {"reputation": 115, "user_id": 5470310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f52f7dae806c10a689e2b0ac4f70b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Iurii Sorokin", "link": "https://stackoverflow.com/users/5470310/iurii-sorokin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 40782279, "answer_count": 1, "score": 2, "last_activity_date": 1479979644, "creation_date": 1479934913, "last_edit_date": 1479978895, "question_id": 40774100, "link": "https://stackoverflow.com/questions/40774100/is-there-an-implementation-of-a-map-like-container-with-a-real-number-as-a-key", "title": "Is there an implementation of a map-like container, with a real number as a key, and where a set of objects can be retrieved by key range?", "body": "<p>A list or a vector of pairs can be used as such a container, but unless one uses some kind of index, the access time will be O(N). Are there available for c++ implementations of such a container with build-in indexing, so that the access time is O(log(N)) ? </p>\n\n<p>Are there implementations where two or more real numbers can be used as a key? (still with faster than O(N) access time ) ? </p>\n"}, {"tags": ["c++", "algorithm", "loops"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7064921"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1479934484, "post_id": 40773890, "comment_id": 68771814, "body": "edited @jaggedSpire"}, {"owner": {"reputation": 116, "user_id": 6307670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6rpZP.jpg?s=128&g=1", "display_name": "Fredrik Lundvall", "link": "https://stackoverflow.com/users/6307670/fredrik-lundvall"}, "edited": false, "score": 0, "creation_date": 1479939135, "post_id": 40773890, "comment_id": 68773828, "body": "Is the projection orthogonal? Is the y-axis the one pointing in or out from the screen?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7064921"}, "edited": false, "score": 0, "creation_date": 1479936918, "post_id": 40774033, "comment_id": 68772924, "body": "You have shown here for vertex co-ordinates but I want to convert them into pixel-co ordinates as I have mentioned the projection plane is divide into a grid of (720*480) pixels. i want to output all the pixel values inside which all the points of the triangle belong to, not the original vertex values. can you tell me how I will do that? @felix"}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 1, "creation_date": 1479942834, "post_id": 40774033, "comment_id": 68775072, "body": "The &quot;sign&quot; operator (the <code>double operator()(double,double y)</code> one) - you can replace it with the equivalent of <code>return (y-y1_)*(x2_-x1_) - (x-x1_)*(y2_-y1_);</code> Saves two comparison, which you can use back to transform your returned type to one of the <a href=\"http://en.cppreference.com/w/cpp/types/integer\" rel=\"nofollow noreferrer\"><code>int_fastX_t</code></a> via a specially crafted <a href=\"http://stackoverflow.com/a/4609795/620908\">&#39;signum`</a> function. As you have O(N^2) complexity in your cycle, switching from FP multiplication to int multiplication may squeeze some extra performance."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7064921"}, "edited": false, "score": 0, "creation_date": 1479967040, "post_id": 40774033, "comment_id": 68781276, "body": "According to the rule you have showed, if the point (0.256,0.0914) is in first space, then it will be in ((0.256+1)/(2*720),(0.0914+1)/2*480) in the second space. But it  will be fractional values. Can pixel values be fractional? Will I need to take floor or ceiling of it? @felix"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7064921"}, "edited": false, "score": 0, "creation_date": 1479967928, "post_id": 40774033, "comment_id": 68781599, "body": "if I put, const double Ax = -0.2035416,Ay = 0.1107585; const double Bx = -0.0334390,By = -0.2526040; const double Cx = 0.2569092,Cy = 0.0913718; in the code of felix, I am getting (0,0) as output, Does this mean, only the point (0,0) belongs to the triangle? @felix"}, {"owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "edited": false, "score": 0, "creation_date": 1479976968, "post_id": 40774033, "comment_id": 68786088, "body": "Yes, it will be a fractional value. Next step is figuring out that the point locate in which pixel. One simple way is rounding the coordinates, i.e. (x,y) locates at pixel (floor(x),floor(y)), and the original space must be changed to [-1,1)[-1,1). Yes point (0,0) belongs to the triangle. You can change the range of for, and step of it, and the type of the iterator, to get a more precise output."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7064921"}, "edited": false, "score": 0, "creation_date": 1479983180, "post_id": 40774033, "comment_id": 68790310, "body": "Thanks for your edited code. But, what if a vertex (say vertex A) lies outside the projection plane [-1,1] and the others (say, vertex B and C) inside? I need to discard the outside part and print only those pixels that are inside the projection plane. Of course then, the shape may not be a triangle rather any polygon.  Does your code do that? @felix"}, {"owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "edited": false, "score": 0, "creation_date": 1479985681, "post_id": 40774033, "comment_id": 68792161, "body": "The current demo can correctly deal with it. In fact, no actual space are defined, the code always work in the range a double can represent. In a word, this demo will only output the point which is inside <b>both</b> the triangle area and the second area."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7064921"}, "edited": false, "score": 0, "creation_date": 1479988314, "post_id": 40774033, "comment_id": 68793884, "body": "Thanks again for your explanation. Another question not directly related to this: is there any way to calculate the z  value at each pixel inside those two for  loops? is there any mathematical formula for this? @felix"}, {"owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "edited": false, "score": 1, "creation_date": 1479993880, "post_id": 40774033, "comment_id": 68797603, "body": "You are welcome, I have edited my answer and added a part which explain how to find z value."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7064921"}, "edited": false, "score": 0, "creation_date": 1479994528, "post_id": 40774033, "comment_id": 68798026, "body": "If I declare a 2D array as double zbuffer[screen_width][screen_height], is it possible to store the z values of all the pixels traversed  inside the nested for loops in the 2D array using the row and col values? I am very new to this topic. Can you please edit the code to add this z value calculation? @felix"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7064921"}, "edited": false, "score": 0, "creation_date": 1480007344, "post_id": 40774033, "comment_id": 68805662, "body": "inside the second for loop, if I write zbuffer[row][col]=z, will it be correct? or should I write zbuffer[col]rowl]=z? @felix"}], "tags": [], "owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "is_accepted": false, "score": 1, "last_activity_date": 1480066698, "last_edit_date": 1480066698, "creation_date": 1479934652, "answer_id": 40774033, "question_id": 40773890, "link": "https://stackoverflow.com/questions/40773890/traversing-all-the-points-inside-a-triangle-using-loops/40774033#40774033", "title": "Traversing all the points inside a triangle using loops", "body": "<p>Traversing demo:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;size_t kD&gt;\nclass Vector{\npublic:\n  template &lt;class... Args&gt;\n  Vector(double coord, Args&amp;&amp;... args) {\n    static_assert( sizeof...(args)+1 == kD, \"Unmatched vector dimension\" );\n    InitCoord(0, coord, std::forward&lt;Args&gt;(args)...);\n  }\n\n  Vector(const Vector &amp;) = default;\n  Vector &amp;operator=(const Vector &amp;) = default;\n\n  double &amp;operator[](const size_t i) {\n    return coord_[i];\n  }\n  double operator[](const size_t i) const {\n    return coord_[i];\n  }\n\n  friend Vector&lt;kD&gt; operator-(const Vector&lt;kD&gt; &amp;A, const Vector&lt;kD&gt; &amp;B) {\n    Vector v;\n    for (size_t i=0; i&lt;kD; ++i)\n      v[i] = A[i]-B[i];\n    return v;\n  }\nprivate:\n  Vector() = default;\n\n  template &lt;class... Args&gt;\n  void InitCoord(const int pos, double coord, Args&amp;&amp;... args) {\n    coord_[pos] = coord;\n    InitCoord(pos+1, std::forward&lt;Args&gt;(args)...);\n  }\n\n  void InitCoord(const int pos) {}\n\n  double coord_[kD];\n};\n\nclass Line {\npublic:\n  Line(const double x1, const double y1, const double x2, const double y2)\n      : x1_(x1), y1_(y1), x2_(x2), y2_(y2) {}\n\n  Line(const Vector&lt;2&gt; A, const Vector&lt;2&gt; B)\n      : x1_(A[0]), y1_(A[1]), x2_(B[0]), y2_(B[1]) {}\n\n  double operator()(const double x, const double y) const {\n    return (y-y1_)*(x2_-x1_) - (x-x1_)*(y2_-y1_);\n  }\n\n  int_fast8_t Sign(const double x, const double y) const {\n    return Signum( (y-y1_)*(x2_-x1_) - (x-x1_)*(y2_-y1_) );\n  }\nprivate:\n  int_fast8_t Signum(const double x) const {\n    return (0.0 &lt; x) - (x &lt; 0.0);\n  }\n\n  const double x1_,y1_;\n  const double x2_,y2_;\n};\n\nvoid Transpos(Vector&lt;2&gt; &amp;v) {\n  v[0] = (v[0]+1)/2*720; // col\n  v[1] = (v[1]+1)/2*480; // row\n}\n\ndouble CalculateZ(const Vector&lt;2&gt; &amp;D, const Vector&lt;2&gt; &amp;AB, const Vector&lt;2&gt; &amp;AC,\n    const Vector&lt;3&gt; &amp;AB3, const Vector&lt;3&gt; &amp;AC3) {\n  const double b = (D[1]*AB[0]-D[0]*AB[1]) / (AC[1]*AB[0]-AC[0]*AB[1]);\n  const double a = AB[0]==0 ? (D[1]-b*AC[1])/AB[1] : (D[0]-b*AC[0])/AB[0];\n\n  std::cout &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; std::endl;\n\n  return a*AB3[2]+b*AC3[2];\n}\n\nint main()\n{\n  const auto A3 = Vector&lt;3&gt;(0.0, 0.0, 7.0);\n  const auto B3 = Vector&lt;3&gt;(0.0, 0.3, 9.0);\n  const auto C3 = Vector&lt;3&gt;(0.4, 0.0, 1.0);\n\n  const auto AB3 = B3-A3;\n  const auto AC3 = C3-A3;\n  const auto BC3 = C3-B3;\n\n  // Some projection works here, which I am not good at.\n  // A B C store the projected triangle coordiate in the [-1,1][-1,1] area\n\n  auto A = Vector&lt;2&gt;(0.0, 0.0);\n  auto B = Vector&lt;2&gt;(0.0, 0.3);\n  auto C = Vector&lt;2&gt;(0.4, 0.0);\n\n  Transpos(A);\n  Transpos(B);\n  Transpos(C);\n\n  const auto AB2 = B-A;\n  const auto AC2 = C-A;\n  const auto BC2 = C-B;\n\n  const Line AB(A, B);\n  const Line AC(A, C);\n  const Line BC(B, C);\n\n  const auto signAB = AB.Sign(C[0],C[1]);\n  const auto signAC = AC.Sign(B[0],B[1]);\n  const auto signBC = BC.Sign(A[0],A[1]);\n\n  // top\n  // 0------------720 (col x)\n  // |\n  // |\n  // |\n  // |\n  // 480 (row y)\n  // bottom\n\n  for (int row=480-1; row&gt;=0; --row) {\n    for (int col=0; col&lt;720; ++col) {\n      if (signAB*AB.Sign(col,row)&gt;=0 &amp;&amp; signAC*AC.Sign(col,row)&gt;=0 &amp;&amp;\n          signBC*BC.Sign(col,row)&gt;=0 )\n        std::cout &lt;&lt; row &lt;&lt; \",\" &lt;&lt; col &lt;&lt; \" Z:\"\n          &lt;&lt; CalculateZ(Vector&lt;2&gt;(col, row)-A, AB2, AC2, AB3, AC3) + A3[2]\n          &lt;&lt; std::endl;\n    }\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Projection:</p>\n\n<ul>\n<li>first space [-1,1][-1,1]</li>\n<li>second space [0,720][0,480]</li>\n</ul>\n\n<p>Let's say we have a (x1,y1) in the first space, then (x_,y_) with x_=(x1+1)/2*720, y_=(y1+1)/2*480 will be in the second space.</p>\n\n<p>More generalize:</p>\n\n<pre><code>first space [xmin,xmax][ymin,ymax]\nsecond space [xmin_,xmax_][ymin_,ymax_]\n(x1,y1)\n-&gt;\n( (x1-xmin)/(xmax-xmin)*(xmax_-xmin_)+xmin_ ,  \n  (y1-ymin)/(ymax-ymin)*(ymax_-ymin_)+ymin_ )\n</code></pre>\n\n<p>If you just want to zoom it, not twist it or something...</p>\n\n<p><strong>Edit #1:</strong></p>\n\n<ul>\n<li>Thanks to @Adrian Colomitchi's advices, which is outstanding, I have\nimproved the demo.</li>\n<li><code>Ax Ay Bx By Cx Cy</code> are now coordinates in the first space, they are\nthen \"transposed\" into the second space. As a result, <code>Line AB AC BC</code>\nare now \"in\" the second space. And the two loops are modified\naccordingly, they now iterate the points of the second space.</li>\n</ul>\n\n<p><strong>How to find z value from (x,y):</strong></p>\n\n<p>AB represents a vector from A(Ax,Ay) to B(Bx,By), i.e. AB = B-A = (Bx-Ax,By-Ay).</p>\n\n<p>For any given point D(Dx,Dy) in the triangle, represent it into AD = a<em>AB + b</em>AC : (Dx-Ax, Dy-Ay) = a*(Bx-Ax, By-Ay) + b*(Cx-Ax, Cy-Ay) where Dx Dy Ax Ay Bx By Cx Cy is known. Find out a and b, and then Dz = a*(Bz-Az) + b*(Cz-Az). Dx Dy in the 3D space can be calculated the same way.</p>\n\n<p><strong>Edit #2:</strong></p>\n\n<p>Z value calculation added to the demo.</p>\n\n<p>I tried to keep the demo simple, but calculating the Z value really involved lots of variables and calculations. I declare a new class called Vector to manage points and vectors, while the Line class remains unchanged. </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7064921"}, "edited": false, "score": 0, "creation_date": 1479935236, "post_id": 40774109, "comment_id": 68772151, "body": "&quot;For each value of y, there will be exactly two different x values&quot;- can you please explain this a little bit? and what is the formula of calculating those two values? Moreover, after calculating these two x values, how will I get all the points between them? Is there any mathematical formula fr this ? @ccarton"}], "tags": [], "owner": {"reputation": 2957, "user_id": 1100158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cc5d59a1687d6477863f6a3918ea3a1?s=128&d=identicon&r=PG", "display_name": "ccarton", "link": "https://stackoverflow.com/users/1100158/ccarton"}, "is_accepted": false, "score": 0, "last_activity_date": 1479934945, "creation_date": 1479934945, "answer_id": 40774109, "question_id": 40773890, "link": "https://stackoverflow.com/questions/40773890/traversing-all-the-points-inside-a-triangle-using-loops/40774109#40774109", "title": "Traversing all the points inside a triangle using loops", "body": "<p>You need to change the inner loop slightly; don't go from xmin to xmax. For each value of y from ymin to ymax there will be exactly two different pixels (two different x values) which lie exactly on the two edges of the triangle. Calculate those points and then all points between them will be inside the triangle. And you'll have to handle some edge cases such as when one of the edges is horizontal. </p>\n"}, {"tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 0, "last_activity_date": 1479948073, "creation_date": 1479948073, "answer_id": 40776425, "question_id": 40773890, "link": "https://stackoverflow.com/questions/40773890/traversing-all-the-points-inside-a-triangle-using-loops/40776425#40776425", "title": "Traversing all the points inside a triangle using loops", "body": "<p>First you must transform your {0,1} ranges (vert &amp; horz) to pixel coordinates. You speak of 720x480. This is not a square, but a rectangle. If you decide to keep one-to-one scale, you'll get a distorted triangle. If not, perhaps you only use 480x480 pixels.</p>\n\n<p><p>Second, now you have your three vertices in pixel-space, you can iterate every pixel in this pixel-space and tell if it belongs to the triangle or not. The function 'InTriangle' for this job is what  @felix posted in the code of his solution: </p>\n\n<pre><code>if (signAB*AB(i,j)&gt;=0 &amp;&amp; signAC*AC(i,j)&gt;=0  &amp;&amp; signBC*BC(i,j)&gt;=0 )\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7064921"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 632, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1480066698, "creation_date": 1479934036, "last_edit_date": 1480004811, "question_id": 40773890, "link": "https://stackoverflow.com/questions/40773890/traversing-all-the-points-inside-a-triangle-using-loops", "title": "Traversing all the points inside a triangle using loops", "body": "<p>The following is the three vertices with x,y and z co-ordinates of a triangle in 3D:</p>\n\n<pre><code>-0.2035416, 0.1107585, 0.9516008 (vertex A)\n-0.0334390, -0.2526040, 0.9751212 (vertex B)\n0.2569092, 0.0913718, 0.9817184 (Vertex C)\n</code></pre>\n\n<p>The projection plane is divided into a grid of (height*width) pixels.</p>\n\n<p>I want to traverse every pixel inside  the triangle inside the projection plane manually starting from the bottom to top of the triangle and <strong>print each pixel co-ordinates</strong>  inside the triangle on the screen in c++. Say, I have already found the top and bottom vertex of the triangle. But now, how will I traverse from bottom to top and print each pixel co-ordinate? What's the logic behind this? </p>\n\n<p>I have an idea of making two nested for loops like below but what will I do inside the loops? how will I make the sideway move after each x and y increment?</p>\n\n<pre><code>for (int y = ymin; y &lt;= ymax; ++y) {\n   for (int x = xmin; x &lt;= xmax; ++x) {\n\n  //what to to here?\n\n    }\n }\n</code></pre>\n"}, {"tags": ["c++", "c++11", "makefile", "flags"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1479934067, "post_id": 40773879, "comment_id": 68771623, "body": "What compiler (and version) are you using in your dev environment?"}, {"owner": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "edited": false, "score": 3, "creation_date": 1479934080, "post_id": 40773879, "comment_id": 68771632, "body": "Are you passing <code>-std=c++11</code>? You had to do this in GCC and Clang to use C++11 stuff when last i used them."}, {"owner": {"reputation": 782, "user_id": 4706859, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/8Ttqb.png?s=128&g=1", "display_name": "SR_", "link": "https://stackoverflow.com/users/4706859/sr"}, "edited": false, "score": 0, "creation_date": 1479934294, "post_id": 40773879, "comment_id": 68771724, "body": "The link to the github project could help."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 782, "user_id": 4706859, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/8Ttqb.png?s=128&g=1", "display_name": "SR_", "link": "https://stackoverflow.com/users/4706859/sr"}, "edited": false, "score": 0, "creation_date": 1479934417, "post_id": 40773879, "comment_id": 68771782, "body": "@SR_ Some makefile details would suffice."}, {"owner": {"reputation": 33, "user_id": 4262183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a047cccc45c957f286210715b519160?s=128&d=identicon&r=PG&f=1", "display_name": "Amin Abed", "link": "https://stackoverflow.com/users/4262183/amin-abed"}, "edited": false, "score": 0, "creation_date": 1479934447, "post_id": 40773879, "comment_id": 68771803, "body": "I had to download xCode, so I believe it is using gcc. the version is 4.2.1."}, {"owner": {"reputation": 33, "user_id": 4262183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a047cccc45c957f286210715b519160?s=128&d=identicon&r=PG&f=1", "display_name": "Amin Abed", "link": "https://stackoverflow.com/users/4262183/amin-abed"}, "edited": false, "score": 0, "creation_date": 1479934582, "post_id": 40773879, "comment_id": 68771855, "body": "Here is the link to the project: <a href=\"https://github.com/Netflix/vmaf\" rel=\"nofollow noreferrer\">github.com/Netflix/vmaf</a>"}, {"owner": {"reputation": 33, "user_id": 4262183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a047cccc45c957f286210715b519160?s=128&d=identicon&r=PG&f=1", "display_name": "Amin Abed", "link": "https://stackoverflow.com/users/4262183/amin-abed"}, "edited": false, "score": 0, "creation_date": 1479934632, "post_id": 40773879, "comment_id": 68771884, "body": "this is the content of the Makefile:TARGETS = \\ \tptools \\ \tfeature \\ \tlibsvm \\ \twrapper  all: \t-for dir in $(TARGETS); do \\ \t\tcd $${dir}; $(MAKE); cd ..; \\ \tdone  \tcd libsvm; $(MAKE) lib; cd ..;  clean: \t-for dir in $(TARGETS); do \\ \t\tcd $${dir}; $(MAKE) clean; cd ..; \\ \tdone  test: \t@echo hello;  .PHONY: clean $(TARGETS)"}, {"owner": {"reputation": 782, "user_id": 4706859, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/8Ttqb.png?s=128&g=1", "display_name": "SR_", "link": "https://stackoverflow.com/users/4706859/sr"}, "edited": false, "score": 0, "creation_date": 1479935313, "post_id": 40773879, "comment_id": 68772187, "body": "I can read on project page : it requires gcc and g++ (&gt;=4.8)."}, {"owner": {"reputation": 33, "user_id": 4262183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a047cccc45c957f286210715b519160?s=128&d=identicon&r=PG&f=1", "display_name": "Amin Abed", "link": "https://stackoverflow.com/users/4262183/amin-abed"}, "edited": false, "score": 0, "creation_date": 1479936684, "post_id": 40773879, "comment_id": 68772805, "body": "How do I update the gcc?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479937095, "post_id": 40773879, "comment_id": 68772999, "body": "@AminAbed Add additional information (like the makefile changes you made) <a href=\"http://stackoverflow.com/posts/40773879/edit\">into your question</a> please. As comments that&#39;s not very useful as you can see."}, {"owner": {"reputation": 782, "user_id": 4706859, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/8Ttqb.png?s=128&g=1", "display_name": "SR_", "link": "https://stackoverflow.com/users/4706859/sr"}, "edited": false, "score": 0, "creation_date": 1479937202, "post_id": 40773879, "comment_id": 68773047, "body": "@Amin Abed: have a look at <a href=\"http://stackoverflow.com/questions/28970935/osx-replace-gcc-version-4-2-1-with-4-9-installed-via-homebrew\" title=\"osx replace gcc version 4 2 1 with 4 9 installed via homebrew\">stackoverflow.com/questions/28970935/&hellip;</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479937217, "post_id": 40773879, "comment_id": 68773051, "body": "@AminAbed <i>&quot;How do I update the gcc?&quot;</i> Depends on your dev environment."}, {"owner": {"reputation": 782, "user_id": 4706859, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/8Ttqb.png?s=128&g=1", "display_name": "SR_", "link": "https://stackoverflow.com/users/4706859/sr"}, "edited": false, "score": 0, "creation_date": 1480057707, "post_id": 40773879, "comment_id": 68820331, "body": "Put the lines of the error in your message, and enough lines before the error in order to see what&#39;s happening."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1479939194, "last_edit_date": 1495535579, "creation_date": 1479934360, "answer_id": 40773959, "question_id": 40773879, "link": "https://stackoverflow.com/questions/40773879/compiler-flags-for-c11-chrono-file-not-found/40773959#40773959", "title": "Compiler Flags For C++11 - chrono file not found", "body": "<p>You should add</p>\n\n<pre><code>CXXFLAGS += -std=c++11\n</code></pre>\n\n<p>to your makefile (somewhere prior to the rules).</p>\n\n<hr>\n\n<p>Supposed you have a up to date enough toolchain.</p>\n\n<p>Older compilers support the flags</p>\n\n<pre><code>-std=c++0x\n</code></pre>\n\n<p>may be.</p>\n\n<hr>\n\n<p>How to update your toolchain (as you asked for in <a href=\"https://stackoverflow.com/questions/40773879/compiler-flags-for-c11-chrono-file-not-found/40773959#comment68772805_40773879\">your comment</a>), depends on your OS environment and software managing system.</p>\n\n<p>At least an option would be to compile the latest (stable) version of your toolchain yourself.</p>\n"}], "owner": {"reputation": 33, "user_id": 4262183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a047cccc45c957f286210715b519160?s=128&d=identicon&r=PG&f=1", "display_name": "Amin Abed", "link": "https://stackoverflow.com/users/4262183/amin-abed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1528, "favorite_count": 0, "closed_date": 1479948462, "answer_count": 1, "score": 0, "last_activity_date": 1479947931, "creation_date": 1479933985, "last_edit_date": 1479947931, "question_id": 40773879, "link": "https://stackoverflow.com/questions/40773879/compiler-flags-for-c11-chrono-file-not-found", "closed_reason": "Not suitable for this site", "title": "Compiler Flags For C++11 - chrono file not found", "body": "<p>I am trying to make a project I downloaded from github.\nAfter setting up all the dependencies, it asks me to run 'make'. However, 'make' fails and complains about <code>chrono</code> file not being found.<br>\nI understand that it is a compiler related issue and I have to enable c++11 support. More specifically, pass the compiler flag <code>-stdlib=libc++</code>.<br>\nHowever, adding this flag to my Makefile still produces the same error. Can anyone explain where/how this flag needs to be set?</p>\n\n<p>this is the content of the Makefile:</p>\n\n<pre><code>TARGETS = \\ \n    ptools \\ \n    feature \\ \n    libsvm \\ \n    wrapper \n\nall: \n    -for dir in $(TARGETS); do \\ \n    cd $${dir}; $(MAKE); cd ..; \\ \n    done cd libsvm; $(MAKE) lib; cd ..; \n\nclean: \n    -for dir in $(TARGETS); do \\ \n    cd $${dir}; $(MAKE) clean; cd ..; \\ \n    done \n\ntest: \n    @echo hello; \n\n.PHONY: clean $(TARGETS)\n</code></pre>\n\n<p><strong>Update1:</strong> After running <code>brew install gcc</code>, it starts downloading the dependencies. However, it always breaks when it's downloading one of the dependencies, mpfr, with this error:  <em>Error: mpfr cannot be built with any available compilers. Install GNU's GCC.</em></p>\n\n<p><strong>Update2:</strong> I managed to update gcc and the version it returns is 6.2.0. However, I am still seeing the same error.\nI added <code>CXXFLAGS += -stdlib=libc++ -std=gnu++11</code> to my Makefile, bust still see the same result.</p>\n"}, {"tags": ["c#", "c++", ".net", "stream", "double"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7202124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766bcc2a523feb04ff276c1771735b45?s=128&d=identicon&r=PG&f=1", "display_name": "DevonJ901", "link": "https://stackoverflow.com/users/7202124/devonj901"}, "edited": false, "score": 0, "creation_date": 1479935548, "post_id": 40773897, "comment_id": 68772297, "body": "Thank you for your kind input, I will review the example."}], "tags": [], "owner": {"reputation": 10516, "user_id": 2872388, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8a10ec2ce33bfdb3a0c44e39adf3092b?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/2872388/steve"}, "is_accepted": false, "score": 2, "last_activity_date": 1479934078, "creation_date": 1479934078, "answer_id": 40773897, "question_id": 40773794, "link": "https://stackoverflow.com/questions/40773794/stream-right-shift-operator-equivalent-in-c/40773897#40773897", "title": "Stream Right Shift Operator Equivalent In C#?", "body": "<p>if I remember correctly </p>\n\n<pre><code>fin &gt;&gt; seatprices[i];\n</code></pre>\n\n<p>is assigning value from <code>fin</code> to <code>seatprices[i]</code></p>\n\n<p>in this case all you are doing is reading the text line by line and this <a href=\"https://msdn.microsoft.com/en-CA/library/aa287535(v=vs.71).aspx\" rel=\"nofollow noreferrer\">MSDN example</a>\nwill help</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 7202124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766bcc2a523feb04ff276c1771735b45?s=128&d=identicon&r=PG&f=1", "display_name": "DevonJ901", "link": "https://stackoverflow.com/users/7202124/devonj901"}, "edited": false, "score": 0, "creation_date": 1479936428, "post_id": 40774011, "comment_id": 68772685, "body": "seatprices[i] = reader.ReadLine();  I have an error with this which states that I cannot implicitly convert string to double @bigown"}, {"owner": {"reputation": 7889, "user_id": 221800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/23y8L.png?s=128&g=1", "display_name": "Maniero", "link": "https://stackoverflow.com/users/221800/maniero"}, "reply_to_user": {"reputation": 43, "user_id": 7202124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766bcc2a523feb04ff276c1771735b45?s=128&d=identicon&r=PG&f=1", "display_name": "DevonJ901", "link": "https://stackoverflow.com/users/7202124/devonj901"}, "edited": false, "score": 0, "creation_date": 1479936866, "post_id": 40774011, "comment_id": 68772892, "body": "@DevonJ901 Your question is not clear about this, but I tried to answer about this in edit."}, {"owner": {"reputation": 43, "user_id": 7202124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766bcc2a523feb04ff276c1771735b45?s=128&d=identicon&r=PG&f=1", "display_name": "DevonJ901", "link": "https://stackoverflow.com/users/7202124/devonj901"}, "edited": false, "score": 1, "creation_date": 1479939135, "post_id": 40774011, "comment_id": 68773827, "body": "I figured it out! Thank you for your effort."}], "tags": [], "owner": {"reputation": 7889, "user_id": 221800, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/23y8L.png?s=128&g=1", "display_name": "Maniero", "link": "https://stackoverflow.com/users/221800/maniero"}, "is_accepted": true, "score": 2, "last_activity_date": 1480005881, "last_edit_date": 1480005881, "creation_date": 1479934538, "answer_id": 40774011, "question_id": 40773794, "link": "https://stackoverflow.com/questions/40773794/stream-right-shift-operator-equivalent-in-c/40774011#40774011", "title": "Stream Right Shift Operator Equivalent In C#?", "body": "<pre><code>public static void ReadSeatPrices() {\n    using (var reader = new StreamReader(File.OpenRead(\"seat.txt\"))) {\n        int i = 0;\n        while (!reader.EndOfStream) {\n            var double result;\n            if (double.TryParse(reader.ReadLine(), out result)) {\n                seatprices[i] = result;\n                i++;\n            } else {\n               //something goes wrong\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Use <a href=\"https://msdn.microsoft.com/en-us/library/994c0zb1(v=vs.110).aspx\" rel=\"nofollow noreferrer\"><code>TryParse()</code></a> if you can't guarantee that conversion is possible. If you're sure that conversion will always work, you can eliminate the <code>if</code> and use just <a href=\"https://msdn.microsoft.com/en-us/library/fd84bdyt(v=vs.110).aspx\" rel=\"nofollow noreferrer\"><code>Parse()</code></a>.</p>\n\n<p>You should use the <a href=\"https://msdn.microsoft.com/en-us/library/system.io.streamreader.readline(v=vs.110).aspx\" rel=\"nofollow noreferrer\"><code>ReadLine()</code></a> method from <a href=\"https://msdn.microsoft.com/en-us/library/system.io.streamreader(v=vs.110).aspx\" rel=\"nofollow noreferrer\"><code>StreamReader</code></a> (that's the right class for this job) to read a stream. C# doesn't have <code>&gt;&gt;</code> operator overload for this.</p>\n\n<p>Use <a href=\"https://msdn.microsoft.com/en-us/library/yh598w02.aspx\" rel=\"nofollow noreferrer\"><code>using</code></a>. C# doesn't have automatic <a href=\"http://en.cppreference.com/w/cpp/language/raii\" rel=\"nofollow noreferrer\">RAII</a>.</p>\n\n<p>Translating code from one language to another doesn't work one to one, you need to find the right idiom.</p>\n"}], "owner": {"reputation": 43, "user_id": 7202124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766bcc2a523feb04ff276c1771735b45?s=128&d=identicon&r=PG&f=1", "display_name": "DevonJ901", "link": "https://stackoverflow.com/users/7202124/devonj901"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "closed_date": 1479934563, "accepted_answer_id": 40774011, "answer_count": 2, "score": 2, "last_activity_date": 1480005881, "creation_date": 1479933635, "last_edit_date": 1479939485, "question_id": 40773794, "link": "https://stackoverflow.com/questions/40773794/stream-right-shift-operator-equivalent-in-c", "closed_reason": "Duplicate", "title": "Stream Right Shift Operator Equivalent In C#?", "body": "<p>I was trying to convert a class from C++ to C# and have encountered two errors with the Binary Right Shift Operator '>>'.</p>\n\n<p>This is the orignal C++ code converted to C# (without editing):</p>\n\n<pre><code>public static void ReadSeatPrices()\n    {\n        ifstream fin = new ifstream();\n        fin.open(\"SeatPrices.txt\");\n        int i = 0;\n        while (fin != null)\n            {\n                fin &gt;&gt; seatprices[i];\n                i++;\n            }\n       fin.close();\n    }\n</code></pre>\n\n<p>When compiling the class in Visual Studio 2015 multiple errors occurred at first due to <code>ifstream</code>, so naturally I edited the code to remove these errors and now it looks like this:</p>\n\n<pre><code>public static void ReadSeatPrices()\n    {\n        FileStream fin = new FileStream(\"seat.txt\", FileMode.Open,\n            FileAccess.Read);\n        int i = 0;\n        while (fin != null)\n        {\n            fin &gt;&gt; seatprices[i];\n            i++;\n        }\n        fin.Close();\n    }\n</code></pre>\n\n<p>Now I am left with two errors which is caused by this line:</p>\n\n<pre><code>fin &gt;&gt; seatprices[i];\n</code></pre>\n\n<p>The error list output states that:</p>\n\n<blockquote>\n  <p>\"Operator '>>' cannot be applied to operands of type 'FileStream' &amp; 'Double'</p>\n  \n  <p>Only assignment, call, increment, decrement, and new object expressions can be used as a statement.</p>\n</blockquote>\n\n<p>Is there some sort of equivalent operator which I must use instead in C#? I Would appreciate if someone could help me understand my mistake.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 10, "creation_date": 1479933072, "post_id": 40773652, "comment_id": 68771170, "body": "stop manual memory management once and for all."}], "answers": [{"comments": [{"owner": {"reputation": 398, "user_id": 5716626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c95dca76a0febec431a879e3a8dc4993?s=128&d=identicon&r=PG&f=1", "display_name": "Cosmin Oprea", "link": "https://stackoverflow.com/users/5716626/cosmin-oprea"}, "edited": false, "score": 1, "creation_date": 1479933186, "post_id": 40773681, "comment_id": 68771223, "body": "please tell me , how should I do it , I am a noob in c++"}], "tags": [], "owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "is_accepted": false, "score": 0, "last_activity_date": 1479933269, "last_edit_date": 1479933269, "creation_date": 1479933137, "answer_id": 40773681, "question_id": 40773652, "link": "https://stackoverflow.com/questions/40773652/stack-around-the-variable-was-corrupted-in-c/40773681#40773681", "title": "Stack around the variable &#39; &#39; was corrupted in c++", "body": "<p>You're not initialising the <code>produse</code> field.</p>\n\n<p>If you want to use C++ idiomatically you should use <code>vector</code> instead of raw arrays and <code>string</code> instead of <code>char*</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "is_accepted": false, "score": 0, "last_activity_date": 1479934789, "last_edit_date": 1479934789, "creation_date": 1479933210, "answer_id": 40773700, "question_id": 40773652, "link": "https://stackoverflow.com/questions/40773652/stack-around-the-variable-was-corrupted-in-c/40773700#40773700", "title": "Stack around the variable &#39; &#39; was corrupted in c++", "body": "<p>Since you allocate memory with <code>new[]</code>, you need to deallocate it with <code>delete[]</code>:</p>\n\n<pre><code>int *p = new int[10];\n...\ndelete[] p;\n\nint* p[1] = {new int[10]};\n...\ndelete[] p[0];\n</code></pre>\n\n<p>And since <code>produse</code> is <code>char **</code>, you should allocate memory for <code>produse</code> before trying to dereference it:</p>\n\n<pre><code>char **produse = new char *[10];\nproduse[0] = new char [10];\n...\ndelete[] produse[0];\ndelete[] produse;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1479934511, "last_edit_date": 1479934511, "creation_date": 1479933447, "answer_id": 40773758, "question_id": 40773652, "link": "https://stackoverflow.com/questions/40773652/stack-around-the-variable-was-corrupted-in-c/40773758#40773758", "title": "Stack around the variable &#39; &#39; was corrupted in c++", "body": "<p>You are not allocating any memory for <code>this-&gt;produse</code> before trying to populate it.  Also, because you are manually managing dynamically allocated memory, you need to implement the <a href=\"https://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming)\" rel=\"nofollow noreferrer\">Rule of Three</a> manually as well.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n\nclass Ferma\n{\nprivate:\n    int m_id_ferma;\n    int m_suprafata\n    int m_nr_produse;\n    char** m_produse; // &lt;-- change this to char**!\n\npublic:\n    Ferma(int id_ferma, int suprafata, int nr_produse, char* produse[])\n        : m_id_ferma(id_ferma), m_suprafata(suprafata), m_nr_produse(nr_produse)\n    {\n        m_produse = new char*[nr_produse]; // &lt;-- add this!\n\n        for (int i = 0; i &lt; nr_produse; ++i)\n        {\n            m_produse[i] = new char[strlen(produse[i]) + 1];\n            strcpy(m_produse[i], produse[i]);\n        }\n    }\n\n    Ferma(const Ferma &amp;src) // &lt;-- add this!\n        : m_id_ferma(src.m_id_ferma), m_suprafata(src.m_suprafata), m_nr_produse(src.m_nr_produse)\n    {\n        m_produse = new char*[m_nr_produse];\n\n        for (int i = 0; i &lt; m_nr_produse; ++i)\n        {\n            m_produse[i] = new char[strlen(src.m_produse[i]) + 1];\n            strcpy(m_produse[i], src.m_produse[i]);\n        }\n    }\n\n    ~Ferma()\n    {\n        for (int i = 0; i &lt; m_nr_produse; ++i)\n            delete[] m_produse[i]; // &lt;-- change this to delete[]!\n\n        delete[] m_produse; // &lt;-- add this!\n    }\n\n    Ferma&amp; operator=(const Ferma &amp;rhs) // &lt;-- add this!\n    {\n        Ferma tmp(rhs);\n        std::swap(m_id_ferma, tmp.m_id_ferma);\n        std::swap(m_suprafata, tmp.m_suprafata);\n        std::swap(m_nr_produse, tmp.m_nr_produse);\n        std::swap(m_produse, tmp.m_produse);\n        return *this;\n    }\n};\n</code></pre>\n\n<p>That being said, you should stop using manual memory management.  Use <code>std::vector</code> and <code>std::string</code> instead, let the STL handle all of the memory management for you:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n\nclass Ferma\n{\nprivate:\n    int m_id_ferma;\n    int m_suprafata;\n    std::vector&lt;std::string&gt; m_produse;\n\npublic:\n    Ferma(int id_ferma, int suprafata, int nr_produse, char* produse[])\n        : id_ferma(id_ferma), m_suprafata(suprafata)\n    {\n        m_produse.reserve(nr_produse);\n\n        for (int i = 0; i &lt; nr_produse; ++i)\n            m_produse.push_back(produse[i]);\n\n        // alternatively:\n        // std::copy(produse, produse+nr_produse, std::back_inserter(m_produse));\n    }\n\n    // no destructor, copy constructor, or copy assignment operator needed!\n};\n</code></pre>\n"}], "owner": {"reputation": 398, "user_id": 5716626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c95dca76a0febec431a879e3a8dc4993?s=128&d=identicon&r=PG&f=1", "display_name": "Cosmin Oprea", "link": "https://stackoverflow.com/users/5716626/cosmin-oprea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "closed_date": 1479941590, "answer_count": 3, "score": -3, "last_activity_date": 1479934789, "creation_date": 1479933008, "question_id": 40773652, "link": "https://stackoverflow.com/questions/40773652/stack-around-the-variable-was-corrupted-in-c", "closed_reason": "Not suitable for this site", "title": "Stack around the variable &#39; &#39; was corrupted in c++", "body": "<p>I m getting a run-time error when I try to call a constructor , and I think I m not doing right the memory deletion. Here is my construcor :</p>\n\n<pre><code>const int id_ferma;\nint suprafata;\nint nr_produse;\nchar* produse[];\n\nFerma(int id_ferma, int suprafata, int nr_produse, char* produse[]) :id_ferma(id_ferma){\n        this-&gt;suprafata = suprafata;\n        this-&gt;nr_produse = nr_produse;\n        for (int i = 0; i &lt; nr_produse; i++){\n            this-&gt;produse[i] = new char[strlen(produse[i]) + 1];\n            strcpy(this-&gt;produse[i], produse[i]);\n            cout &lt;&lt; produse[i] &lt;&lt; endl;\n        }\n    }\n</code></pre>\n\n<p>And here is my destructor:</p>\n\n<pre><code>~Ferma(){\n    for (int i = 0; i &lt; nr_produse; i++){\n            if (this-&gt;produse[i] != NULL)\n                delete produse[i];\n    }\n}\n</code></pre>\n\n<p>And main:</p>\n\n<pre><code>int main(){\n        char* produse1[] = { \"Lapte oaie\", \"Branza vaca\", \"Muschi de porc\", \"Oua de gaina\" };\n        for (int i = 0; i &lt; 4; i++){\n            cout &lt;&lt; produse1[i];\n        }\n        Ferma f1(14, 1500, 4, produse1);\n    }\n</code></pre>\n"}, {"tags": ["c++", "boost", "parameters", "odeint", "integrator"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 2535544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a92e9fc9fbf9c013a20100d4048fd13b?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/2535544/stephen"}, "is_accepted": false, "score": 1, "last_activity_date": 1479938873, "creation_date": 1479938873, "answer_id": 40774938, "question_id": 40773530, "link": "https://stackoverflow.com/questions/40773530/passed-parameters-to-boost-odeint-in-c/40774938#40774938", "title": "passed parameters to boost odeint in C++", "body": "<p>I believe I've come up with a struct solution that works, but am not sure if it has any variable/memory scope no-no's. Here's an example:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;boost/numeric/odeint.hpp&gt;\n\n// define structure\nstruct T\n{\n    std::array&lt;double, 6&gt; IC;\n    double                S;\n};\n\n// force model\nclass harm_osc\n{\n    struct T T1;\n\npublic:\n    harm_osc(struct T G) : T1(G) {}\n\n    void operator() ( const std::vector&lt; double &gt; &amp;x , std::vector&lt; double &gt; &amp;dxdt , const double /* t */ )\n    {\n        dxdt[0] = x[1];\n        dxdt[1] = -x[0] - T1.IC[0]*x[1] + T1.S;\n    }\n};\n\n// print integrated state solution\nvoid write_solution( const std::vector&lt; double &gt; &amp;x , const double t )\n{\n    printf(\"%-6.2f %-6.2f %-6.2f\\n\", t, x[0], x[1]);\n}\n\n// problem setup\nint main()\n{\n\n    std::vector&lt; double &gt; x(2);\n    x[0] = 1.0;\n    x[1] = 0.0;\n\n    struct T T2;\n\n    T2.IC = {0.15, 0.15, 0.15, 0.15, 0.15, 0.15};\n    T2.S  = 0.0;\n\n    harm_osc ho(T2);\n    boost::numeric::odeint::integrate(ho, x, 0.0, 10.0, 0.1, write_solution);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 2535544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a92e9fc9fbf9c013a20100d4048fd13b?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/2535544/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1479938873, "creation_date": 1479932516, "last_edit_date": 1495540383, "question_id": 40773530, "link": "https://stackoverflow.com/questions/40773530/passed-parameters-to-boost-odeint-in-c", "title": "passed parameters to boost odeint in C++", "body": "<p><a href=\"https://stackoverflow.com/questions/33856910/passing-runtime-parameters-to-odeint-integrator/\">This</a> answer is helpful, but I would like to know how to pass multiple parameters of different types to the ODE model, perhaps in a struct. For my immediate use case, I need to be able to pass one <code>std::array&lt;double, 6&gt;</code>, two <code>std::vector&lt;std::vector&lt;double&gt;&gt;</code> and two two <code>double</code> scalars for a total of four parameters to be passed. In the linked example, as well as in <a href=\"https://github.com/headmyshoulder/odeint-v2/blob/master/examples/harmonic_oscillator.cpp\" rel=\"nofollow noreferrer\">harmonic_oscillator.cpp</a>, there is only a single <code>double</code> passed parameter. Thanks.</p>\n\n<p>Here's an example of the struct I would need passed to the ODE force model and used within the rate equations.</p>\n\n<pre><code>struct T\n{\n    std::array&lt;double, 6&gt; IC;\n    double S;\n    double M;\n    std::vector&lt;std::vector&lt;double&gt;&gt; C;\n    std::vector&lt;std::vector&lt;double&gt;&gt; WT;\n};\n</code></pre>\n"}, {"tags": ["c++", "templates", "polymorphism"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1479932522, "post_id": 40773489, "comment_id": 68770901, "body": "Looks like you&#39;re storing <code>A</code> in your custom container, which will slice the subclass away."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1479932631, "post_id": 40773489, "comment_id": 68770954, "body": "Wait... what? This is the wrong dupe. The related question has noting to do with this one. Vote to reopen."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1479932695, "post_id": 40773489, "comment_id": 68770988, "body": "@SamVarshavchik, totally wrong dupe."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4192303"}, "edited": false, "score": 0, "creation_date": 1479933300, "post_id": 40773489, "comment_id": 68771278, "body": "I edited it so you can see the things in the alligator brackets, but it seems like everyone understood my question."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1479932748, "creation_date": 1479932748, "answer_id": 40773597, "question_id": 40773489, "link": "https://stackoverflow.com/questions/40773489/c-templates-and-polymorphism-no-sutiable-user-defined-conversion/40773597#40773597", "title": "c++ templates and polymorphism no sutiable user-defined conversion", "body": "<p>This is because even when <code>B</code> has an is-a relationship with <code>A</code>, <code>BST&lt;A&gt;</code> has <strong>no</strong> relationship with <code>BST&lt;B&gt;</code>. Those two template instances or not related to each other in any way, and, in fact, might be completely different from each other.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4192303"}, "edited": false, "score": 0, "creation_date": 1479933896, "post_id": 40773708, "comment_id": 68771545, "body": "This solved the syntax error, and that explanation makes the type difference very clear, thank you! I will have to read more about conversion operators to learn to implement."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 0, "last_activity_date": 1479933242, "creation_date": 1479933242, "answer_id": 40773708, "question_id": 40773489, "link": "https://stackoverflow.com/questions/40773489/c-templates-and-polymorphism-no-sutiable-user-defined-conversion/40773708#40773708", "title": "c++ templates and polymorphism no sutiable user-defined conversion", "body": "<p>The conversion can't happen. <code>BST&lt;C&gt;</code> cannot be converted to a <code>BST&lt;A&gt;</code>, as they are completely different, unrelated classes.</p>\n\n<p>When the template is instanciated, it look like this (grossely):</p>\n\n<pre><code>template &lt;&gt;\nstruct BST_C {\n    bool insert(C item);    // adds item to tree\n    // ...\n};\n\ntemplate &lt;&gt;\nstruct BST_A {\n    bool insert(A item);    // adds item to tree\n    // ...\n};\n</code></pre>\n\n<p>As you can see, there is no relation between the two.</p>\n\n<hr>\n\n<p>What can you do about this?</p>\n\n<p>Well, you could define a conversion operator, limited to base classes:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct BST {\n    bool insert(T item);\n\n    // only enable for base classes ------------v\n    template&lt;typename To, std::enable_if_t&lt;std::is_base_of&lt;To, T&gt;&gt;* = nullptr&gt;\n    operator BST&lt;To&gt; () const {\n        // implement the conversion operator...\n    }\n};\n</code></pre>\n\n<p>With that conversion operator, your class <code>BST&lt;C&gt;</code> is convertible to <code>BST&lt;B&gt;</code> and <code>BST&lt;A&gt;</code> respectively.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4192303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 40773708, "answer_count": 2, "score": 1, "last_activity_date": 1479933242, "creation_date": 1479932401, "last_edit_date": 1479933241, "question_id": 40773489, "link": "https://stackoverflow.com/questions/40773489/c-templates-and-polymorphism-no-sutiable-user-defined-conversion", "title": "c++ templates and polymorphism no sutiable user-defined conversion", "body": "<p>Having trouble understanding how (and why) this conversion will not work. </p>\n\n<p>I have class A, class B derived from class A, and class C derived from class B. </p>\n\n<pre><code>class A {};\nclass B : public A {};\nclass C : public B {};\n</code></pre>\n\n<p>I want to make a HashTable that has two template typenames <code>&lt;K, V&gt;</code>, where the K is a char and V is a binary search tree template class (<code>BST&lt;T&gt;</code>). These BSTs will have typenames <code>A</code>, <code>B</code>, and <code>C</code>.</p>\n\n<pre><code>template &lt;typename K, typename V&gt;\nclass HashTable {\npublic:\n    bool put(K key, V value);   // adds key value pair to table\nprivate:\n    V* table;   // table stores values\n    int size;   // size of table\n};\n\ntemplate &lt;typename T&gt;\nclass BST {\npublic:\n    bool insert(T item);    // adds item to tree\nprivate:\n    struct BSTNode {        // node structure\n        R data;             // item data\n        BSTNode *left;      // left child pointer\n        BSTNode *right;     // right child pointer\n    };\n    BSTNode *root;          // pointer to root of tree\n};\n</code></pre>\n\n<p>The following code has an error with putting a <code>BST&lt;C&gt;</code> in the hashtable because it cannot convert from <code>BST&lt;C&gt;</code> to <code>BST&lt;A&gt;</code>. However, the last line in main is legal.</p>\n\n<pre><code>int main() {\n    HashTable&lt;char, BST&lt;A&gt;&gt; inventory;\n    BST&lt;C&gt; foo;\n    inventory.put('C', foo);\n\n    A *bar= new C();\n}\n</code></pre>\n\n<p>I though because of polymorphism, <code>BST&lt;C&gt;</code> is-a <code>BST&lt;A&gt;</code>? How can I get around this type difference so I can add BST, BST, and BST to my hashmap?</p>\n\n<p>I've already tried using typedef in the declaration and that did not work.</p>\n"}, {"tags": ["c++", "performance", "data-structures", "stl", "binary"], "comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1479932966, "post_id": 40773463, "comment_id": 68771120, "body": "@ks1322, it&#39;s so hard for me to see what you edited there, but I can see that you didn&#39;t upvote - does this mean that the question suck and should be deleted?"}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1479933321, "post_id": 40773463, "comment_id": 68771288, "body": "No question sucks. Some of need a little coaching, but every question has potential."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1479933407, "post_id": 40773463, "comment_id": 68771327, "body": "@nicomp that&#39;s a bit optimistic, but I see you point. However, you, as well as ks1322 saw the question and did not upvote. I am starting to worry, do you have any suggestion for improvement?"}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1479933492, "post_id": 40773463, "comment_id": 68771357, "body": "I&#39;ve just fixed broken formatting, you can easily see it by clicking on <code>side-by-side markdown</code>."}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1479934133, "post_id": 40773463, "comment_id": 68771653, "body": "@gsamaras I&#39;d like to see some code so I know the OP put in some effort. I don&#39;t downvote questions as a general rule because too many of my questions have been undeservedly downvoted, IMHO."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1479934219, "post_id": 40773463, "comment_id": 68771696, "body": "@nicomp I can&#39;t post my entire project, it&#39;s big and I am not sure if creating a minimal example would help..I mean it&#39;s a general question. :) ks1322 thanks for the tip!"}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1479934448, "post_id": 40773463, "comment_id": 68771804, "body": "@gsamaras One important aspect of debugging a problem is being able to create a minimal example that reproduces the problem. Often doing that will reveal the issue before it even gets to SO."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 1, "creation_date": 1479934504, "post_id": 40773463, "comment_id": 68771823, "body": "Yes I agree @nicomp, but I don&#39;t have a debugging problem to solve here. :)"}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1479934553, "post_id": 40773463, "comment_id": 68771843, "body": "@That&#39;s the reason people want to zap you. I&#39;m trying to help you not get downvoted."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1479934642, "post_id": 40773463, "comment_id": 68771891, "body": "@nicomp thanks for the comment and trying to help, I am just explaining you why I don&#39;t provide a min. e.g. here. In general, a minimal example is a must. ;)"}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1479934925, "post_id": 40773463, "comment_id": 68772015, "body": "@gsamaras Well, you&#39;re doing very well so far &#39;cause you have no downvotes and you haven&#39;t been deleted. On this site that&#39;s a victory these days."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1479935048, "post_id": 40773463, "comment_id": 68772070, "body": "@nicomp it&#39;s too soft. A huge amount of questions that should be closed survive, the rate of nice questions is dropping fast, but that&#39;s a broader issue, let&#39;s focus on the bits! :D"}, {"owner": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 0, "creation_date": 1479935558, "post_id": 40773463, "comment_id": 68772302, "body": "@gsamaras that really depends on what you are trying to do and what you are trying to optimize, especially with such big numbers. There is no one good answer. Are you inserting once and then search a lot? or are you searching and inserting all the time? what kind of searches are you running? Is most of the data initialized or does it remain empty? Do you care about average or worst case performance?"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 0, "creation_date": 1479935695, "post_id": 40773463, "comment_id": 68772370, "body": "Cool questions, I will update @user1708860, but what do you mean empty? To have all bits 0? I care about the time that my program will run."}, {"owner": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 0, "creation_date": 1479936015, "post_id": 40773463, "comment_id": 68772517, "body": "@gsamaras it was just an example. I meant that you have to give us more data about your use case. There are way too many ways in which &quot;inserting and searching&quot; could be done."}, {"owner": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 0, "creation_date": 1479936090, "post_id": 40773463, "comment_id": 68772545, "body": "@gsamaras generally speaking - you want to write it once, unit tests included and then measure it. If after measuring - you think it&#39;s slow - then you optimize. In most cases you would not have to optimize."}, {"owner": {"reputation": 701, "user_id": 657500, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/93bfa700167c7ee49dec3cd37493ec4b?s=128&d=identicon&r=PG", "display_name": "Stan", "link": "https://stackoverflow.com/users/657500/stan"}, "edited": false, "score": 0, "creation_date": 1479941332, "post_id": 40773463, "comment_id": 68774584, "body": "I would recommend to test your implementation. Play around with different types for your binary value. Is your N fixed or has an upper bound? If so, try using an array. Perhaps your performance will mostly be a cache issue, i.e. you might  end up optimizing your access pattern if you have any control over that."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1480014144, "post_id": 40773463, "comment_id": 68808470, "body": "@ks1322 thanks. I posted an answer guys, hope you like it, thanks for the inputs! :)"}], "answers": [{"comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1480014895, "post_id": 40775622, "comment_id": 68808781, "body": "Hmm, difficult choice. In the answer I posted now I didn&#39;t take note of these."}], "tags": [], "owner": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "is_accepted": false, "score": 3, "last_activity_date": 1479943489, "last_edit_date": 1479943489, "creation_date": 1479942490, "answer_id": 40775622, "question_id": 40773463, "link": "https://stackoverflow.com/questions/40773463/how-to-store-binary-data-when-you-only-care-about-speed/40775622#40775622", "title": "How to store binary data when you only care about speed?", "body": "<p>If the values are independently, uniformly distributed, and you want to find the Hamming distance between two independently, randomly chosen points, the most efficient layout is a packed array of bits.</p>\n\n<p>This packed array would ideally be chunked into the largest block size over which your <code>popcnt</code> instruction works: 64 bits. The hamming distance is the sum of <code>popcnt(x_blocks[i] ^ y_blocks[i])</code>. On processors with efficient unaligned accesses, byte alignment with unaligned reads is likely to be most efficient. On processors where unaligned reads incur a penalty, one should consider whether the memory overhead of aligned rows is worth faster logic.</p>\n"}, {"comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1480014794, "post_id": 40776303, "comment_id": 68808753, "body": "Thanks for the input MSalters! In the answer I posted now I couldn&#39;t fairly compare <code>std::bitset</code>."}, {"owner": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1480017794, "post_id": 40776303, "comment_id": 68809804, "body": "Locality benefits won&#39;t stop at 4KB."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 2, "last_activity_date": 1479947120, "creation_date": 1479947120, "answer_id": 40776303, "question_id": 40773463, "link": "https://stackoverflow.com/questions/40773463/how-to-store-binary-data-when-you-only-care-about-speed/40776303#40776303", "title": "How to store binary data when you only care about speed?", "body": "<p>Locality of reference will likely be the driving force. So it's fairly obvious that you represent the <code>D</code> coordinates of a single point as a contiguous bitvector. <code>std::bitset&lt;D&gt;</code> would be a logical choice.</p>\n\n<p>However, the next important thing to realize is that you see locality benefits easily up to 4KB. This means that you should not pick a single point and compare it against all other N-1 points. Instead, group points in sets of 4KB each, and compare those groups. Both ways are <code>O(N*N)</code>, but the second will be much faster.</p>\n\n<p>You may be able to beat <code>O(N*N)</code> by use of the triangle inequality - <code>Hamming(a,b)+Hamming(b,c) &gt;= Hamming (a,c)</code>. I'm just wondering how. It probably depends on how you want your output. The naive output would be a N*N set of distances, and that's unavoidably <code>O(N*N)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1480020061, "post_id": 40793069, "comment_id": 68810623, "body": "Those timings are meaningless; a decent optimizer can (and does) avoid running the loop altogether."}, {"owner": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1480021038, "post_id": 40793069, "comment_id": 68810949, "body": "Yes, I know. The problem is with the code, not the way you called <code>g++</code>."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1480021919, "post_id": 40793069, "comment_id": 68811234, "body": "@Veedrac I am not sure what you want me to change! :/"}, {"owner": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1480025632, "post_id": 40793069, "comment_id": 68812382, "body": "You should prevent the optimizer from removing the code. Normally a quick way to do this is by making sure inputs that are run-time variables in the real program aren&#39;t constant foldable in the code you write (so the compiler can&#39;t do the work at compile-time), and that all outputs that will get used in the real program <i>can</i> get used in the output program (so the compiler can&#39;t just skip the work)."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1480027270, "post_id": 40793069, "comment_id": 68812807, "body": "@Veedrac I am really sorry but I don&#39;t see a trivial way of doing this (maybe I am too tired, since I am racing for a deadline that is approaching fast)."}, {"owner": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1480033936, "post_id": 40793069, "comment_id": 68814245, "body": "A super simple way if you&#39;re rushing is to take arguments from <code>argv</code>, including an element of the result to print."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1480105500, "post_id": 40793069, "comment_id": 68844064, "body": "@Veedrac oh so you were just talking about <code>N</code> and <code>D</code>?"}, {"owner": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1480105766, "post_id": 40793069, "comment_id": 68844147, "body": "also <code>v</code>, <code>hamming_dist</code> and <code>ham_d</code>."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1480106276, "post_id": 40793069, "comment_id": 68844328, "body": "I don&#39;t get it @Veedrac. <code>v</code> is constructed randomly, what should I pass in the <i>cmd</i>? Also the arrays to store the distances, I don&#39;t get it either!"}, {"owner": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1480107774, "post_id": 40793069, "comment_id": 68844696, "body": "<code>v</code> is fine since the random data is seeded from the time. But the compiler can just &quot;forget&quot; to write results to <code>hamming_dist</code> and <code>ham_d</code>, since those are never used. This is evidently what happened with your <code>std::vector&lt;char&gt;</code> results, since that&#39;s faster than physically feasible. If you write out an arbitrary element, the compiler at least has to do the work to calculate it!"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 0, "creation_date": 1480107975, "post_id": 40793069, "comment_id": 68844771, "body": "I see @Veedrac, but how to pass the arrays for cmd? :/"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1480167447, "post_id": 40793069, "comment_id": 68857058, "body": "The difference is way too big for the result to be valid."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1480172994, "post_id": 40793069, "comment_id": 68858563, "body": "@harold that&#39;s the timings I got... :)"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1480180780, "post_id": 40793069, "comment_id": 68860962, "body": "@gsamaras yes and they&#39;re obviously wrong. The only way there&#39;s going to be a 7 orders of magnitude difference is by the compiler being tricky and deleting the benchmarked code. Consider that 8E-7 second is about 3000 clock cycles. You can&#39;t do 1000000 of <i>anything</i> in that time."}, {"owner": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 0, "creation_date": 1480193827, "post_id": 40793069, "comment_id": 68865026, "body": "@gsamaras you should try printing the result and see if you can reproduce the measurements"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1480204627, "post_id": 40793069, "comment_id": 68867510, "body": "That makes sense.. :/"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1480013959, "last_edit_date": 1495540795, "creation_date": 1480013959, "answer_id": 40793069, "question_id": 40773463, "link": "https://stackoverflow.com/questions/40773463/how-to-store-binary-data-when-you-only-care-about-speed/40793069#40793069", "title": "How to store binary data when you only care about speed?", "body": "<p>I wrote a simple program to populate and contiguously access a data structure with binary data:</p>\n\n<ol>\n<li><code>std::vector&lt;int&gt;</code></li>\n<li><code>std::vector&lt;char&gt;</code></li>\n<li><code>std::vector&lt;bool&gt;</code></li>\n<li><code>std::bitset</code></li>\n</ol>\n\n<p>I used my <a href=\"https://gsamaras.wordpress.com/code/1651-2/\" rel=\"nofollow noreferrer\">Time measurements</a>. I used -O3 optimization flag, N = 1 mil and D = 100.</p>\n\n<p>This is the code for vectors:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;cmath&gt;\n#include &lt;numeric&gt;\n#include &lt;functional&gt; //plus, equal_to, not2\n\n#include &lt;ctime&gt;\n#include &lt;ratio&gt;\n#include &lt;chrono&gt;\n\n#define T int\n\nunsigned int hd(const std::vector&lt;T&gt;&amp; s1, const std::vector&lt;T&gt;::iterator s2)\n{\n    return std::inner_product(\n        s1.begin(), s1.end(), s2, \n        0, std::plus&lt;unsigned int&gt;(),\n        std::not2(std::equal_to&lt;std::vector&lt;T&gt;::value_type&gt;())\n    );\n}\n\n\nstd::uniform_int_distribution&lt;int&gt; uni_bit_distribution(0, 1);\nstd::default_random_engine generator(std::chrono::system_clock::now().time_since_epoch().count());\n\n// g++ -Wall -O3 bitint.cpp -o bitint\nint main()\n{\n    const int N = 1000000;\n    const int D = 100;\n    unsigned int hamming_dist[N] = {0};\n    unsigned int ham_d[N] = {0};\n\n    std::vector&lt;T&gt; q;\n    for(int i = 0; i &lt; D; ++i)\n        q.push_back(uni_bit_distribution(generator));\n\n    using namespace std::chrono;\n    high_resolution_clock::time_point t1 = high_resolution_clock::now();\n\n\n    std::vector&lt;T&gt; v;\n    v.resize(N * D);\n    for(int i = 0; i &lt; N; ++i)\n        for(int j = 0; j &lt; D; ++j)\n            v[j + i * D] = uni_bit_distribution(generator);\n\n\n    high_resolution_clock::time_point t2 = high_resolution_clock::now();\n\n    duration&lt;double&gt; time_span = duration_cast&lt;duration&lt;double&gt; &gt;(t2 - t1);\n\n    std::cout &lt;&lt; \"Build \" &lt;&lt; time_span.count() &lt;&lt; \" seconds.\\n\";\n\n    t1 = high_resolution_clock::now();\n\n    for(int i = 0; i &lt; N; ++i)\n        for(int j = 0; j &lt; D; ++j)\n        hamming_dist[i] += (v[j + i * D] != q[j]);\n\n    t2 = high_resolution_clock::now();\n    time_span = duration_cast&lt;duration&lt;double&gt; &gt;(t2 - t1);\n    std::cout &lt;&lt; \"No function hamming distance \" &lt;&lt; time_span.count() &lt;&lt; \" seconds.\\n\";\n\n    t1 = high_resolution_clock::now();\n\n    for(int i = 0; i &lt; N; ++i)\n        ham_d[i] = hd(q, v.begin() + (i * D));\n\n    t2 = high_resolution_clock::now();\n    time_span = duration_cast&lt;duration&lt;double&gt; &gt;(t2 - t1);\n    std::cout &lt;&lt; \"Yes function hamming distance \" &lt;&lt; time_span.count() &lt;&lt; \" seconds.\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>The code for <code>std::bitset</code> can be found in: <a href=\"https://stackoverflow.com/questions/40787731/xor-bitset-when-2d-bitset-is-stored-as-1d\">XOR bitset when 2D bitset is stored as 1D</a></p>\n\n<p>For <code>std::vector&lt;int&gt;</code> I got:</p>\n\n<pre><code>Build 3.80404 seconds.\nNo function hamming distance 0.0322335 seconds.\nYes function hamming distance 0.0352869 seconds.\n</code></pre>\n\n<p>For <code>std::vector&lt;char&gt;</code> I got:</p>\n\n<pre><code>Build 8.2e-07 seconds.\nNo function hamming distance 8.4e-08 seconds.\nYes function hamming distance 2.01e-07 seconds.\n</code></pre>\n\n<p>For <code>std::vector&lt;bool&gt;</code> I got:</p>\n\n<pre><code>Build 4.34496 seconds.\nNo function hamming distance 0.162005 seconds.\nYes function hamming distance 0.258315 seconds.\n</code></pre>\n\n<p>For <code>std:bitset</code> I got:</p>\n\n<pre><code>Build 4.28947 seconds.\nHamming distance 0.00385685 seconds.\n</code></pre>\n\n<hr>\n\n<p><code>std::vector&lt;char&gt;</code> seems to be the winner.</p>\n"}], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 40776303, "answer_count": 3, "score": 1, "last_activity_date": 1480013959, "creation_date": 1479932330, "last_edit_date": 1479936645, "question_id": 40773463, "link": "https://stackoverflow.com/questions/40773463/how-to-store-binary-data-when-you-only-care-about-speed", "title": "How to store binary data when you only care about speed?", "body": "<p>I have N points in D dimensions, where let's say N is 1 million and D 1 hundred. All my points have binary coordinates, i.e. {0, 1}^D, and I am only interested in <em>speed</em>. </p>\n\n<p>Currently my implementation uses <code>std::vector&lt;int&gt;</code>. I am wondering if I could benefit in terms of faster execution by changing my <a href=\"/questions/tagged/data-structure\" class=\"post-tag\" title=\"show questions tagged &#39;data-structure&#39;\" rel=\"tag\">data-structure</a>. I am only doing insertions and searches (I don't change the bits).</p>\n\n<p>All related questions I found mention <code>std::vector&lt;char&gt;</code>, <code>std::vector&lt;bool&gt;</code> and <code>std::bitset</code>, but all mention the space benefits one should get by using such structures.</p>\n\n<p>What's the appropriate data structure, when speed is of main concern, for binary data in C++?</p>\n\n<hr>\n\n<p>I intend to populate my data structure with the binary data and then do a lot of contiguous searches (I mean that I don't really care for the i-th coordinate of a point, if I am accessing a point I will access all of its coordinates continuously). I will compute the <em>Hamming distance</em> between each other.</p>\n"}, {"tags": ["android", "c++", "cocos2d-x"], "answers": [{"tags": [], "owner": {"reputation": 1762, "user_id": 144172, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9d9d86b63b81c5a42c50dc3aeb13f0d8?s=128&d=identicon&r=PG", "display_name": "Juliano", "link": "https://stackoverflow.com/users/144172/juliano"}, "is_accepted": false, "score": 0, "last_activity_date": 1480697369, "creation_date": 1480697369, "answer_id": 40937194, "question_id": 40773416, "link": "https://stackoverflow.com/questions/40773416/cocos2dx-c-compilation-error-for-android-rapidjson-does-not-name-a-type/40937194#40937194", "title": "Cocos2dx c++ compilation error for Android - &#39;rapidjson&#39; does not name a type", "body": "<p>The file was missing the following statement...</p>\n\n<pre><code>#include \"cocos-ext.h\"\n</code></pre>\n\n<p>I got confused because it works without the include in wp8 platform.</p>\n"}], "owner": {"reputation": 1762, "user_id": 144172, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9d9d86b63b81c5a42c50dc3aeb13f0d8?s=128&d=identicon&r=PG", "display_name": "Juliano", "link": "https://stackoverflow.com/users/144172/juliano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480697369, "creation_date": 1479932161, "question_id": 40773416, "link": "https://stackoverflow.com/questions/40773416/cocos2dx-c-compilation-error-for-android-rapidjson-does-not-name-a-type", "title": "Cocos2dx c++ compilation error for Android - &#39;rapidjson&#39; does not name a type", "body": "<p>When compiling to android platform, I'm receiving the following error:</p>\n\n<pre><code>\"error: 'Value' in namespace 'rapidjson' does not name a type\"\n</code></pre>\n\n<p>Everything was working fine before using RapidJson.\nI'm still can successfully build the project in wp8_1 platform.\nI don't know if it's a bug or I'm missing something.\nI'm using Cocos2dx v3.13.1.</p>\n\n<p>How to fix this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 613, "user_id": 3112926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33809c5d0f78b110e8613c9e5972dd5?s=128&d=identicon&r=PG&f=1", "display_name": "JGroven", "link": "https://stackoverflow.com/users/3112926/jgroven"}, "edited": false, "score": 0, "creation_date": 1479932335, "post_id": 40773412, "comment_id": 68770810, "body": "<a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Comma_operator</a>"}, {"owner": {"reputation": 847, "user_id": 5921170, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KaCwD.png?s=128&g=1", "display_name": "Kr&#246;w", "link": "https://stackoverflow.com/users/5921170/kr%c3%b6w"}, "edited": false, "score": 0, "creation_date": 1556221601, "post_id": 40773412, "comment_id": 98374646, "body": "This question is not a duplicate of the &quot;How does the comma operator work,&quot; since that question asks about the precedence of the comma operator while this question asks about the order of evaluation of the comma operator&#39;s arguments."}], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 4, "last_activity_date": 1479932290, "creation_date": 1479932290, "answer_id": 40773451, "question_id": 40773412, "link": "https://stackoverflow.com/questions/40773412/order-of-execution-in-an-expression-with-commas-in-c/40773451#40773451", "title": "order of execution in an expression with commas in C++", "body": "<p>The comma operator <a href=\"http://en.cppreference.com/w/cpp/language/operator_other#Built-in_comma_operator\" rel=\"nofollow noreferrer\">introduces a sequence point</a> and, as such, this behavior is guaranteed by the C++ standard.</p>\n"}], "owner": {"reputation": 107, "user_id": 7201994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/683680b67a1c5139f1803293cbedc585?s=128&d=identicon&r=PG&f=1", "display_name": "Catriel", "link": "https://stackoverflow.com/users/7201994/catriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "closed_date": 1479932897, "answer_count": 1, "score": 0, "last_activity_date": 1479932828, "creation_date": 1479932146, "question_id": 40773412, "link": "https://stackoverflow.com/questions/40773412/order-of-execution-in-an-expression-with-commas-in-c", "closed_reason": "Duplicate", "title": "order of execution in an expression with commas in C++", "body": "<p>It is my understanding that the term <code>j = i</code> will be executed before <code>++i</code> in the statement</p>\n\n<p><code>j = i, ++i;</code>.</p>\n\n<p>Does the C++ standard guarantee that <code>j = i</code> will be executed before <code>++i</code> in the loop </p>\n\n<p><code>for (auto i = std::next(begin), j = begin; i!= end; j= i, ++i)</code>?</p>\n"}, {"tags": ["c++", "arrays", "c++11", "stl"], "comments": [{"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1479931634, "post_id": 40773259, "comment_id": 68770434, "body": "No difference, just a matter of syntax and I believe that was only available C++ 11 and above However notice that the STL declaration gives you a big toolbox of functions and iterators you can use on your array, as the other one you generally would have to make built in functions yourself to do the trivial things.: Check: <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/array</a>"}, {"owner": {"reputation": 4368, "user_id": 2352158, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/91cd5bff136b9c7608cf986ca729e19a?s=128&d=identicon&r=PG", "display_name": "coincoin", "link": "https://stackoverflow.com/users/2352158/coincoin"}, "edited": false, "score": 0, "creation_date": 1479931886, "post_id": 40773259, "comment_id": 68770549, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/30263303/stdarray-vs-array-performance\">std::array vs array performance</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 6, "creation_date": 1479931929, "post_id": 40773259, "comment_id": 68770569, "body": "There will be a big difference when you start passing <code>std::array&lt;&gt;</code> to functions as opposed to built-in arrays.  A <code>std::array</code> knows its own size, a built-in array doesn&#39;t as it decays to a pointer."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1479932058, "post_id": 40773259, "comment_id": 68770643, "body": "@PaulMcKenzie You can actually pass a C-style array by reference, in which case the size will be known."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1479934205, "post_id": 40773259, "comment_id": 68771689, "body": "Off topic minor nag: just call it <code>std::array</code>. STL was absorbed into the standard decades ago and <code>array</code> came much later."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1479932100, "post_id": 40773347, "comment_id": 68770666, "body": "You can pass C-style array by reference or by a pointer to the array itself."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1479932162, "post_id": 40773347, "comment_id": 68770705, "body": "@SergeyA I think I was a bit unclear, edited. The thing is that you definitely cannot pass it by value."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 24, "last_activity_date": 1479981741, "last_edit_date": 1479981741, "creation_date": 1479931889, "answer_id": 40773347, "question_id": 40773259, "link": "https://stackoverflow.com/questions/40773259/declaring-arrays-in-c/40773347#40773347", "title": "Declaring arrays in C++", "body": "<p>A <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"noreferrer\"><code>std::array&lt;&gt;</code></a> is just a light wrapper around a C-style array, with some additional nice interface member functions (like <code>begin</code>, <code>end</code> etc) and <code>typedef</code>s, roughly defined as</p>\n\n<pre><code>template&lt;typename T, size_t N&gt;\nclass array\n{\npublic:\n    T _arr[N];\n    T&amp; operator[](size_t);\n    const T&amp; operator[](size_t) const;\n    // other member functions and typedefs\n}\n</code></pre>\n\n<p>One fundamental difference though is that the former can be passed by value, whereas for the latter you only pass a pointer to its first element or you can pass it by reference, but you cannot copy it into the function (except via a <code>std::copy</code> or manually).</p>\n\n<p>A common mistake is to assume that every time you pass a C-style array to a function you lose its size due to the array decaying to a pointer. This is not always true. If you pass it by reference, you can recover its size, as there is no decay in this case:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename T, size_t N&gt;\nvoid f(T (&amp;arr)[N]) // the type of arr is T(&amp;)[N], not T*\n{\n    std::cout &lt;&lt; \"I'm an array of size \" &lt;&lt; N;\n}\n\nint main()\n{\n    int arr[10];\n    f(arr); // outputs its size, there is no decay happening\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/e6fe008b5ad022c7\" rel=\"noreferrer\"><kbd>Live on Coliru</kbd></a></p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1479935331, "post_id": 40773350, "comment_id": 68772197, "body": "&quot;<i>In both cases, the array is created on the stack</i>&quot; - unless it is a member of a struct/class that is allocated on the heap."}], "tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": false, "score": 5, "last_activity_date": 1479931894, "creation_date": 1479931894, "answer_id": 40773350, "question_id": 40773259, "link": "https://stackoverflow.com/questions/40773259/declaring-arrays-in-c/40773350#40773350", "title": "Declaring arrays in C++", "body": "<p>In both cases, the array is created on the stack. </p>\n\n<p>However, the STL's <code>std::array</code> class template offers some advantages over the \"raw\" C-like array syntax of your second case:</p>\n\n<blockquote>\n<pre><code>int array1[arraySize];\n</code></pre>\n</blockquote>\n\n<p>For example, with <code>std::array</code> you have a typical STL interface, with methods like <code>size</code> (which you can use to query the array's element count), <code>front</code>, <code>back</code>, <code>at</code>, etc.</p>\n\n<p>You can find more details <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 6, "last_activity_date": 1479931984, "creation_date": 1479931984, "answer_id": 40773370, "question_id": 40773259, "link": "https://stackoverflow.com/questions/40773259/declaring-arrays-in-c/40773370#40773370", "title": "Declaring arrays in C++", "body": "<p><code>std::array</code> and C-style arrays are similar:</p>\n\n<ul>\n<li>They both store a contiguous sequence of objects</li>\n<li>They are both aggregate types and can therefore be initialized using <a href=\"http://en.cppreference.com/w/cpp/language/aggregate_initialization\" rel=\"nofollow noreferrer\">aggregate initialization</a></li>\n<li>Their size is known at compile time</li>\n<li>They do not use dynamic memory allocation</li>\n</ul>\n\n<p>An important advantage of <code>std::array</code> is that it can be passed by value and doesn't implicitly decay to a pointer like a C-style array does.</p>\n"}, {"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1479932959, "post_id": 40773390, "comment_id": 68771117, "body": "In C++ there is no need to always pass the size around, even for C-style arrays. You can pass the array by reference via a template function and recover its size."}], "tags": [], "owner": {"reputation": 3184, "user_id": 6710751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmR1W.jpg?s=128&g=1", "display_name": "Striezel", "link": "https://stackoverflow.com/users/6710751/striezel"}, "is_accepted": false, "score": 1, "last_activity_date": 1479932061, "creation_date": 1479932061, "answer_id": 40773390, "question_id": 40773259, "link": "https://stackoverflow.com/questions/40773259/declaring-arrays-in-c/40773390#40773390", "title": "Declaring arrays in C++", "body": "<p>Usually you should prefer <code>std::array&lt;T, size&gt; array1;</code> over <code>T array2[size];</code>, althoug the underlying structure is identical.</p>\n\n<p>The main reason for that is that <code>std::array</code> always knows its size. You can call its <a href=\"http://en.cppreference.com/w/cpp/container/array/size\" rel=\"nofollow noreferrer\">size()</a> method to get the size. Whereas when you use a C-style array (i.e. what you called \"built-in array\") you always have to pass the size around to functions that work with that array. If you get that wrong somehow, you could cause buffer overflows and the function tries to read from/write to memory that does not belong to the array anymore. This cannot happen with <code>std::array</code>, because the size is always clear.</p>\n"}, {"comments": [{"owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "edited": false, "score": 0, "creation_date": 1479971140, "post_id": 40773396, "comment_id": 68782982, "body": "Non-member <code>begin</code> and <code>end</code> work just fine with C-style arrays.   With these other improvements (shift to non-member templates) nothing you say is right: arrays can be handled by algorithms with requiring the wrapper to do so.  Arrays have <i>always</i> had iterators; making them just like pointers was a founding principle."}, {"owner": {"reputation": 1022, "user_id": 1067624, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bedfd7f1ca0ed232e194de9835060d9b?s=128&d=identicon&r=PG", "display_name": "Max Raskin", "link": "https://stackoverflow.com/users/1067624/max-raskin"}, "reply_to_user": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "edited": false, "score": 1, "creation_date": 1480052735, "post_id": 40773396, "comment_id": 68818477, "body": "Added your note about non member begin/end."}, {"owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "edited": false, "score": 2, "creation_date": 1480056113, "post_id": 40773396, "comment_id": 68819754, "body": "&#171;To get the element count of a C-style array, you&#39;ll have to write &#187; yuck, and no you don\u2019t. The template shown in vsoftco\u2019s answer illustrates how N is deduced as a template argument. Or just use <code>end(a)-begin(a)</code> but why do you need to do that when you <i>should</i> be passing the iterators or a \u201crange\u201d. A C array <b>is</b> a perfectly good range: the wrapper of array is not needed for any of these reasons."}], "tags": [], "owner": {"reputation": 1022, "user_id": 1067624, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bedfd7f1ca0ed232e194de9835060d9b?s=128&d=identicon&r=PG", "display_name": "Max Raskin", "link": "https://stackoverflow.com/users/1067624/max-raskin"}, "is_accepted": false, "score": 2, "last_activity_date": 1480052579, "last_edit_date": 1480052579, "creation_date": 1479932080, "answer_id": 40773396, "question_id": 40773259, "link": "https://stackoverflow.com/questions/40773259/declaring-arrays-in-c/40773396#40773396", "title": "Declaring arrays in C++", "body": "<p>The key differences of <code>std::array&lt;&gt;</code> and a C-style array is that the former is a class that wraps around the latter.  The class has <code>begin()</code> and <code>end()</code> methods that allow <code>std::array</code> objects to be easily passed in as parameters to STL algorithms that expect iterators (Note that C-style arrays can too via non member <code>std::begin</code>/<code>std::end</code> methods).  The first points to the beginning of the array and the second points to one element beyond its end.  You see this pattern with other STL containers, such as <code>std::vector</code>, <code>std::map</code>, <code>std::set</code>, etc.</p>\n\n<p>What's also nice about the STL <code>std::array</code> is that it has a <code>size()</code> method that lets you get the element count. To get the element count of a C-style array, you'll have to write <code>sizeof(cArray)/sizeof(cArray[0])</code>, so doesn't <code>stlArray.size()</code> looks much more readable?</p>\n\n<p>You can get full reference here:</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/container/array</a></p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 3, "last_activity_date": 1479932970, "last_edit_date": 1479932970, "creation_date": 1479932178, "answer_id": 40773420, "question_id": 40773259, "link": "https://stackoverflow.com/questions/40773259/declaring-arrays-in-c/40773420#40773420", "title": "Declaring arrays in C++", "body": "<blockquote>\n  <p>Is there a fundamental difference between the two? or is it just syntax and the two are basically the same?</p>\n</blockquote>\n\n<p>There's a number of differences for a raw c-style array (<em>built-in array</em>) vs. the <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a>.</p>\n\n<p>As you can see from the reference documentation there's a number of operations available that aren't with a raw array:</p>\n\n<p>E.g.: Element access</p>\n\n<pre><code>at()\nfront()\nback()\ndata()\n</code></pre>\n\n<p>The underlying data type of the <code>std::array</code> is still a raw array, but garnished with <em>\"syntactic sugar\"</em> (if that should be your concern).</p>\n"}, {"tags": [], "owner": {"reputation": 194, "user_id": 4076343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/16E2V.png?s=128&g=1", "display_name": "Steve Thibault", "link": "https://stackoverflow.com/users/4076343/steve-thibault"}, "is_accepted": false, "score": 8, "last_activity_date": 1479935152, "last_edit_date": 1479935152, "creation_date": 1479932380, "answer_id": 40773481, "question_id": 40773259, "link": "https://stackoverflow.com/questions/40773259/declaring-arrays-in-c/40773481#40773481", "title": "Declaring arrays in C++", "body": "<p>The main difference between these two is an important one.</p>\n\n<p>Besides the nice methods the STL gives you, when passing a <code>std::array</code> to a function, there is no decay. Meaning, when you receive the <code>std::array</code> in the function, it is still a <code>std::array</code>, but when you pass an <code>int[]</code> array to a function, it effectively decays to an <code>int*</code> pointer and the size of the array is lost.</p>\n\n<p>This difference is a major one. Once you lose the array size, the code is now prone to a lot of bugs, as you have to keep track of the array size manually.  <code>sizeof()</code> returns the size of a pointer type instead of the number of elements in the array. This forces you to manually keep track of the array size using interfaces like <code>process(int *array, int size)</code>. This is an ok solution, but prone to errors.</p>\n\n<p>See the guidelines by Bjarne Stroustroup:</p>\n\n<p><a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#Rp-run-time\" rel=\"nofollow noreferrer\">https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#Rp-run-time</a></p>\n\n<p>That can be avoided with a better data type, which <code>std::array</code> is designed for, among many other STL classes. </p>\n\n<p>As a side note, unless there's a strong reason to use a fixed size array, <code>std::vector</code> may be a better choice as a contiguous memory data structure.</p>\n"}, {"tags": [], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "is_accepted": false, "score": 1, "last_activity_date": 1479932400, "creation_date": 1479932400, "answer_id": 40773487, "question_id": 40773259, "link": "https://stackoverflow.com/questions/40773259/declaring-arrays-in-c/40773487#40773487", "title": "Declaring arrays in C++", "body": "<p>IMO, </p>\n\n<ul>\n<li><p>Pros: It\u2019s efficient, in that it doesn\u2019t use any more memory than built-in fixed arrays. </p></li>\n<li><p>Cons: <code>std::array</code> over a built-in fixed array is a slightly more awkward syntax, and that you have to explicitly specify the array length (the compiler won\u2019t calculate it for you from the initializer).</p></li>\n</ul>\n"}], "owner": {"reputation": 307, "user_id": 6365656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caf3cb46d5dcadbb00268169931fd77a?s=128&d=identicon&r=PG&f=1", "display_name": "Astaboom", "link": "https://stackoverflow.com/users/6365656/astaboom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3155, "favorite_count": 2, "accepted_answer_id": 40773347, "answer_count": 8, "score": 17, "last_activity_date": 1480052579, "creation_date": 1479931485, "last_edit_date": 1479994680, "question_id": 40773259, "link": "https://stackoverflow.com/questions/40773259/declaring-arrays-in-c", "title": "Declaring arrays in C++", "body": "<p>I am new to C++ and currently learning it with a book by myself. This book seems to say that there are several kinds of arrays depending on how you declare it. I guess the difference between dynamic arrays and static arrays are clear to me. But I do not understand the difference between the STL <code>std::array</code> class and a static array.</p>\n\n<p>An STL <code>std::array</code> variable is declared as:</p>\n\n<pre><code>std::array &lt; int, arraySize &gt; array1;\n</code></pre>\n\n<p>Whereas a static array variable is declared as:</p>\n\n<pre><code>int array1[arraySize];\n</code></pre>\n\n<p>Is there a fundamental difference between the two? Or is it just syntax and the two are basically the same?</p>\n"}, {"tags": ["c++", "cmake", "sfml", "clion"], "answers": [{"comments": [{"owner": {"reputation": 265, "user_id": 6182477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8015f229064308f8cef9e67dc346e4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Bonbin", "link": "https://stackoverflow.com/users/6182477/bonbin"}, "edited": false, "score": 0, "creation_date": 1479931944, "post_id": 40773338, "comment_id": 68770578, "body": "Thanks the path is suppose to be the path to the SFML folder?"}, {"owner": {"reputation": 18353, "user_id": 337315, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/vNdBR.jpg?s=128&g=1", "display_name": "CodeLikeBeaker", "link": "https://stackoverflow.com/users/337315/codelikebeaker"}, "reply_to_user": {"reputation": 265, "user_id": 6182477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8015f229064308f8cef9e67dc346e4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Bonbin", "link": "https://stackoverflow.com/users/6182477/bonbin"}, "edited": false, "score": 0, "creation_date": 1479932052, "post_id": 40773338, "comment_id": 68770640, "body": "Yeah, I had to add this in my project that I was testing. I&#39;m on linux, but it&#39;s the same concept: link_directories(/opt/dtSearchLinux/bin64)"}, {"owner": {"reputation": 265, "user_id": 6182477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8015f229064308f8cef9e67dc346e4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Bonbin", "link": "https://stackoverflow.com/users/6182477/bonbin"}, "edited": false, "score": 0, "creation_date": 1479932186, "post_id": 40773338, "comment_id": 68770725, "body": "hmmmm, i added link_directories(&quot;C:/Users/MyName/Desktop/SFML-2.4.1/bin&quot;) to my CMakesLists.txt but i still get the same error ..."}, {"owner": {"reputation": 18353, "user_id": 337315, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/vNdBR.jpg?s=128&g=1", "display_name": "CodeLikeBeaker", "link": "https://stackoverflow.com/users/337315/codelikebeaker"}, "reply_to_user": {"reputation": 265, "user_id": 6182477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8015f229064308f8cef9e67dc346e4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Bonbin", "link": "https://stackoverflow.com/users/6182477/bonbin"}, "edited": false, "score": 0, "creation_date": 1479932370, "post_id": 40773338, "comment_id": 68770828, "body": "Hm, okay. This question/answers might lead you in the right direction. <a href=\"http://stackoverflow.com/questions/20227010/cmake-finding-external-libraries\" title=\"cmake finding external libraries\">stackoverflow.com/questions/20227010/&hellip;</a>"}, {"owner": {"reputation": 265, "user_id": 6182477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8015f229064308f8cef9e67dc346e4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Bonbin", "link": "https://stackoverflow.com/users/6182477/bonbin"}, "edited": false, "score": 0, "creation_date": 1479933553, "post_id": 40773338, "comment_id": 68771388, "body": "Thanks, that person had a similar problem and you tip was not that far of. I only had to add the path to my sfml library in the FindSFML.cmake file."}, {"owner": {"reputation": 18353, "user_id": 337315, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/vNdBR.jpg?s=128&g=1", "display_name": "CodeLikeBeaker", "link": "https://stackoverflow.com/users/337315/codelikebeaker"}, "reply_to_user": {"reputation": 265, "user_id": 6182477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8015f229064308f8cef9e67dc346e4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Bonbin", "link": "https://stackoverflow.com/users/6182477/bonbin"}, "edited": false, "score": 0, "creation_date": 1479933815, "post_id": 40773338, "comment_id": 68771504, "body": "Ah, well I&#39;m glad I was able to get you in the right direction. Those cmake files can be a pain :)"}], "tags": [], "owner": {"reputation": 18353, "user_id": 337315, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/vNdBR.jpg?s=128&g=1", "display_name": "CodeLikeBeaker", "link": "https://stackoverflow.com/users/337315/codelikebeaker"}, "is_accepted": true, "score": 1, "last_activity_date": 1479931834, "creation_date": 1479931834, "answer_id": 40773338, "question_id": 40773183, "link": "https://stackoverflow.com/questions/40773183/configure-sfml-for-clion-windows/40773338#40773338", "title": "configure SFML for clion (windows)", "body": "<p>I believe you are missing the <code>link_directories()</code> call. You can use it like this:</p>\n\n<pre><code>link_directories(\"C:/Path_To_Library\")\n</code></pre>\n\n<p>This should help solve your issue.</p>\n"}, {"tags": [], "owner": {"reputation": 1218, "user_id": 6464216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31468f729a59d476b9780367f29be55?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Suryaa Jha", "link": "https://stackoverflow.com/users/6464216/mr-suryaa-jha"}, "is_accepted": false, "score": 1, "last_activity_date": 1505143744, "creation_date": 1505143744, "answer_id": 46159245, "question_id": 40773183, "link": "https://stackoverflow.com/questions/40773183/configure-sfml-for-clion-windows/46159245#46159245", "title": "configure SFML for clion (windows)", "body": "<p>I have successfully configured <strong>SFML with CLion</strong> on <strong>Ubuntu 16.04</strong> and I think it will be same for Window user also.</p>\n\n<p>My project name is <strong>SFML_TEST</strong> so change every occurrence of <strong>SFML_TEST with your project name.</strong></p>\n\n<ol>\n<li>Create a new Clion C++ Project.</li>\n<li>Navigate to /path/to/CLionProjects/[Project_Name]/CMakeLists.txt</li>\n<li><p>After the following statement</p>\n\n<pre><code>add_executable(SFML_TEST ${SOURCE_FILES})\n</code></pre>\n\n<p>Add following lines of code</p>\n\n<pre><code>set(CMAKE_MODULE_PATH \"${CMAKE_CURRENT_LIST_DIR}/cmake_modules\")\nfind_package(SFML REQUIRED system window graphics network audio)\nif (SFML_FOUND)\ninclude_directories(${SFML_INCLUDE_DIR})\ntarget_link_libraries(SFML_TEST ${SFML_LIBRARIES})\nendif()\n</code></pre></li>\n<li><p>Create a new directory /path/to/CLionProjects/[project_name]/cmake_modules/FindSFML.cmake</p></li>\n<li>In FindSFML.cmake file paste the following line of code from the given file <a href=\"https://github.com/SFML/SFML/blob/master/cmake/Modules/FindSFML.cmake\" rel=\"nofollow noreferrer\">https://github.com/SFML/SFML/blob/master/cmake/Modules/FindSFML.cmake</a></li>\n<li>Done!!!.. Happy Coding</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9255965, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/64228d8765cc7ba2df9e1d06bc8af074?s=128&d=identicon&r=PG", "display_name": "pumelkopf", "link": "https://stackoverflow.com/users/9255965/pumelkopf"}, "is_accepted": false, "score": 0, "last_activity_date": 1516699880, "creation_date": 1516699880, "answer_id": 48398283, "question_id": 40773183, "link": "https://stackoverflow.com/questions/40773183/configure-sfml-for-clion-windows/48398283#48398283", "title": "configure SFML for clion (windows)", "body": "<p>my fix was, that I had to change the root path of SFML in the FindSFML.cmake</p>\n\n<p>so just <code>set(SFML_ROOT Z://your_project)</code> after the block of comments and you are ready to go</p>\n"}], "owner": {"reputation": 265, "user_id": 6182477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8015f229064308f8cef9e67dc346e4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Bonbin", "link": "https://stackoverflow.com/users/6182477/bonbin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10296, "favorite_count": 3, "accepted_answer_id": 40773338, "answer_count": 3, "score": 3, "last_activity_date": 1516699880, "creation_date": 1479931216, "last_edit_date": 1592644375, "question_id": 40773183, "link": "https://stackoverflow.com/questions/40773183/configure-sfml-for-clion-windows", "title": "configure SFML for clion (windows)", "body": "<p>i am setting up a work environment for a school project on my windows computer. We are going to make a basic game using c++ and CLion. To make a game i need to use the SFML library. I have followed a few tutorials but i cant seem to get it to work anyway.</p>\n<p>I have:</p>\n<ul>\n<li>Downloaded CLion and configured it with MinGW</li>\n<li>Downloaded SFML and copied its &quot;findSFML.cmake&quot; file to a new directory in my project that i call cmake_modules.</li>\n<li>Edited my CMakeLists.txt file so it looks like this:</li>\n</ul>\n<blockquote>\n<pre><code>cmake_minimum_required(VERSION 3.6)\nproject(testet)\n\nset(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++11&quot;)\nset(SOURCE_FILES main.cpp)\n\nadd_executable(testet ${SOURCE_FILES})\nset(CMAKE_MODULE_PATH &quot;${CMAKE_CURRENT_LIST_DIR}/cmake_modules&quot;)\nfind_package(SFML REQUIRED system window graphics network audio)\nif (SFML_FOUND)\n    include_directories(${SFML_INCLUDE_DIR})\n    target_link_libraries(testet ${SFML_LIBRARIES})\nendif()\n</code></pre>\n</blockquote>\n<p>These are the three steps that i see on every tutorial / answer. But I get the following error anyway:</p>\n<pre><code>&quot;C:\\Program Files (x86)\\JetBrains\\CLion 2016.3\\bin\\cmake\\bin\\cmake.exe&quot; -DCMAKE_BUILD_TYPE=Debug -G &quot;CodeBlocks - MinGW Makefiles&quot; C:\\Users\\Benjamin\\ClionProjects\\testet\nCMake Error at cmake_modules/FindSFML.cmake:355 (message):\nCould NOT find SFML (missing: SFML_SYSTEM_LIBRARY SFML_WINDOW_LIBRARY\nSFML_GRAPHICS_LIBRARY SFML_NETWORK_LIBRARY SFML_AUDIO_LIBRARY)\nCall Stack (most recent call first):\nCMakeLists.txt:10 (find_package)\n</code></pre>\n<p>So it cant find the SFML? But should'nt the &quot;findSFML.cmake&quot; solve this? Any help is appretiated... Thanks! :D</p>\n"}, {"tags": ["c++", "infinite-loop", "do-while"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1479931221, "post_id": 40773163, "comment_id": 68770206, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 6, "creation_date": 1479931395, "post_id": 40773163, "comment_id": 68770292, "body": "Never compare <code>==</code> two floating-point values. Their n-th decimal will probably be different. Try to use an epsilon delta for such thing."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7201822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb01ff4e213a7cbc625ee8f81e251888?s=128&d=identicon&r=PG", "display_name": "Dennis Preatto", "link": "https://stackoverflow.com/users/7201822/dennis-preatto"}, "edited": false, "score": 0, "creation_date": 1479931911, "post_id": 40773306, "comment_id": 68770562, "body": "Thank you, as you can see I&#39;m pretty new to C++, and still I don&#39;t understand all the basics. Thanks a lot for pointing me in the right direction!"}], "tags": [], "owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "is_accepted": false, "score": 5, "last_activity_date": 1479931679, "creation_date": 1479931679, "answer_id": 40773306, "question_id": 40773163, "link": "https://stackoverflow.com/questions/40773163/c-do-while-infinite-loop-even-if-the-condition-is-satisfied-cant-understand/40773306#40773306", "title": "C++ Do-While infinite loop even if the condition is satisfied (can&#39;t understand why)", "body": "<p>Run this snippet</p>\n\n<pre><code>float value = 2 * 0.3;\n\nif (value == 0.6)\n  std::cout &lt;&lt; \"Exactly\" &lt;&lt; std::endl;\nelse\n  std::cout &lt;&lt; \"Ooops\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>And you will see that the output is something like</p>\n\n<pre><code>0.600000024\n</code></pre>\n\n<p>Try to use an epsilon-delta logic rather than an exact value</p>\n\n<pre><code>if (value &gt;= 0.6 &amp;&amp; value &lt;= 0.6001)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7201822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb01ff4e213a7cbc625ee8f81e251888?s=128&d=identicon&r=PG", "display_name": "Dennis Preatto", "link": "https://stackoverflow.com/users/7201822/dennis-preatto"}, "edited": false, "score": 1, "creation_date": 1479932044, "post_id": 40773308, "comment_id": 68770637, "body": "Yes I am quite sure that Ceros is right, I didn&#39;t know that comparisons between two floating-point values aren&#39;t the best solution. Thank you for your reply too!"}], "tags": [], "owner": {"reputation": 2488, "user_id": 125649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vx9fQ.jpg?s=128&g=1", "display_name": "Andre Kraemer", "link": "https://stackoverflow.com/users/125649/andre-kraemer"}, "is_accepted": false, "score": 1, "last_activity_date": 1479931691, "creation_date": 1479931691, "answer_id": 40773308, "question_id": 40773163, "link": "https://stackoverflow.com/questions/40773163/c-do-while-infinite-loop-even-if-the-condition-is-satisfied-cant-understand/40773308#40773308", "title": "C++ Do-While infinite loop even if the condition is satisfied (can&#39;t understand why)", "body": "<p>I think that Ceros is right in his comment. Comparing floating-point values is very error prone due to rounding differences.</p>\n\n<p>So the common approach is to use some tolerance value to compare to, like in this function.</p>\n\n<pre><code>bool AreEqual(double value1, double value2)\n{\n    double tolerance = 0.0001;\n    return fabs(value1 - value2) &lt; tolerance;\n}\n</code></pre>\n\n<p>In your code you would change the condition like this:</p>\n\n<pre><code>while(!AreEqual(Controllo,Controllo2));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7201822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb01ff4e213a7cbc625ee8f81e251888?s=128&d=identicon&r=PG", "display_name": "Dennis Preatto", "link": "https://stackoverflow.com/users/7201822/dennis-preatto"}, "edited": false, "score": 0, "creation_date": 1479932208, "post_id": 40773371, "comment_id": 68770739, "body": "Awesome explanation, thank you a lot! Im going to try all the examples posted here untill I find the one that suits for what I am trying to do. Thanks a lot for you time!"}, {"owner": {"reputation": 13, "user_id": 7201822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb01ff4e213a7cbc625ee8f81e251888?s=128&d=identicon&r=PG", "display_name": "Dennis Preatto", "link": "https://stackoverflow.com/users/7201822/dennis-preatto"}, "edited": false, "score": 0, "creation_date": 1479933749, "post_id": 40773371, "comment_id": 68771480, "body": "Excuse me again, I just tried to implement your code, exactly as you wrote it, but it works only for value that are multiple of 0.2. I mean, if I insert 0.1 or 0.3 as input is not working but it works with 0.2;0.4;0.6;0.8 and so on! Could you please explain me why? I tried to play around a bit with values but I just can&#39;t get it"}], "tags": [], "owner": {"reputation": 56338, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": false, "score": 1, "last_activity_date": 1479932658, "last_edit_date": 1479932658, "creation_date": 1479931986, "answer_id": 40773371, "question_id": 40773163, "link": "https://stackoverflow.com/questions/40773163/c-do-while-infinite-loop-even-if-the-condition-is-satisfied-cant-understand/40773371#40773371", "title": "C++ Do-While infinite loop even if the condition is satisfied (can&#39;t understand why)", "body": "<p>The problem is here:</p>\n\n<pre><code>while(Controllo!=Controllo2);\n</code></pre>\n\n<p>The variables you expect to be equal are of type <code>double</code>. The floating point numbers cannot be represented exactly in computers.</p>\n\n<p>They are not represented exactly in pencil on paper calculations either but we tend to consider two values equal when their first decimals are equal. The computers do not work this way. <code>Controllo == Controllo2</code> only when the two variables have the exact same value, up the their least significant digit. The computers don't do any rounding if they are not told to do it.</p>\n\n<p>The solution is simple (and it is also part of the mathematical algorithm you implemented): loop until the two values are close enough one to the other. That means, stop when the absolute difference of the two values is smaller than a small value you pick in advance:</p>\n\n<pre><code>while(fabs(Controllo - Controllo2) &gt; 0.0001);\n</code></pre>\n\n<p>If you know in advance how big or small are the values of <code>Controllo</code> and <code>Controllo2</code> then you can pick a constant value and use it for comparison. This is <code>0.0001</code> in my example above and it works fine with large values of <code>Controllo</code> and <code>Controllo2</code>. You should use much smaller values if the values of <code>Controllo</code> and <code>Controllo2</code> are of the magnitude of <code>0.001</code> or smaller.</p>\n\n<p>When you cannot tell in advance how large or how small are the values you compare then you can check for their relative difference:</p>\n\n<pre><code>while(fabs((Controllo - Controllo2) / Controllo2) &gt; 0.0001);\n</code></pre>\n\n<p>(assuming <code>Controllo2</code> is not zero). The formula can be extracted in a function that can check which one of <code>Controllo</code> and <code>Controllo2</code> is not zero and use it as divider.</p>\n"}], "owner": {"reputation": 13, "user_id": 7201822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb01ff4e213a7cbc625ee8f81e251888?s=128&d=identicon&r=PG", "display_name": "Dennis Preatto", "link": "https://stackoverflow.com/users/7201822/dennis-preatto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "closed_date": 1479933681, "answer_count": 3, "score": -2, "last_activity_date": 1479932658, "creation_date": 1479931158, "question_id": 40773163, "link": "https://stackoverflow.com/questions/40773163/c-do-while-infinite-loop-even-if-the-condition-is-satisfied-cant-understand", "closed_reason": "Duplicate", "title": "C++ Do-While infinite loop even if the condition is satisfied (can&#39;t understand why)", "body": "<p>I have been searching for hours an issue similar to the one I'm experiencing right now, but I can't find anything, nor here nor in other websites.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    double Numero=0, ParteDecimale=0, Controllo=0, Controllo2=0;\n    int ParteIntera=0;\n    string Var1=\"1\", Var0=\"0\", NumeroFinale;\n    cout&lt;&lt;\"\\n\\n\\tBenvenuto, questo programma ti consente di convertire la parte\\n\"\n          \"\\tdecimale di un numero in sistema binario. Per iniziare, inserisci un numero: \";\n    cin&gt;&gt;Numero;\n    cout&lt;&lt;Numero&lt;&lt;\" Numero\\n\\n\"&lt;&lt;endl; //\n    ParteIntera=Numero; //casting implicito, in modo da poter isolare esclusivamente la parte decimale del numero inserito.\n    cout&lt;&lt;ParteIntera&lt;&lt;\" ParteIntera\\n\\n\"&lt;&lt;endl; //\n    ParteDecimale=Numero-ParteIntera; //Isolamento della parte decimale\n    cout&lt;&lt;ParteDecimale&lt;&lt;\" ParteDecimale\\n\\n\"&lt;&lt;endl; //\n    Controllo2=ParteDecimale;\n\ndo{\n    ParteDecimale=ParteDecimale*2; //Moltiplicazione della parte decimale per due\n    cout&lt;&lt;\"\\n\\nParteDecimaleCiclo \"&lt;&lt;ParteDecimale&lt;&lt;endl; //\n\n\n\n    if(ParteDecimale&lt;1){\n        NumeroFinale=NumeroFinale+Var0;\n        cout&lt;&lt;\"\\n\\nNumeroFinaleMin1 \"&lt;&lt;NumeroFinale&lt;&lt;endl; //\n    }\n    else{\n        NumeroFinale=NumeroFinale+Var1;\n        cout&lt;&lt;NumeroFinale&lt;&lt;\" NumeroFinaleMagg1\\n\\n\"&lt;&lt;endl; //\n        ParteDecimale-=1;\n        cout&lt;&lt;ParteDecimale&lt;&lt;\" ParteDecimaleMagg1\\n\\n\"&lt;&lt;endl;\n    }\n    Controllo=ParteDecimale;\n    cout&lt;&lt; \"\\n\\nCONTROLLO \" &lt;&lt;Controllo; //\n    cout&lt;&lt;\"\\n\\nNUMERO \"&lt;&lt;Numero; //\n  }\n  while(Controllo!=Controllo2);\n\ncout&lt;&lt;NumeroFinale&lt;&lt;endl; \n}\n</code></pre>\n\n<p>Sorry if the code is messy, but when I saw that it was not working as expected I decided to output every value to follow along with the process, and that's the weird thing.. The code acts exactly as expected and the results are all right, it just refuses to exit the do-while loop even if the condition is satisfied.</p>\n\n<p>For example:</p>\n\n<p>-I input \"12.2\", the program store the number inside the \"ParteIntera\" variable (which is an int, I'm doing that to remove the decimal part);</p>\n\n<p>-It stores \"Numero-ParteIntera\" inside \"ParteDecimale\" (Numero is the input I entered at the beginning), and at this point \"ParteDecimale\" is equal to 0.2;</p>\n\n<p>-The value of \"ParteDecimale\" is stored inside \"Controllo2\";</p>\n\n<p>-Here starts the Do-While loop, that basically does \"ParteDecimale*2\", so it's \"0.4\";</p>\n\n<p>-It checks if ParteDecimale is bigger or smaller than 1, and based on this it executes the istructions inside the if statements;</p>\n\n<p>-The value of \"ParteDecimale\" that is obtained from the if statement is then stored inside \"Controllo\" (In this case it's 0.4);</p>\n\n<p>-The condition is checked, in this case \"Controllo\" and \"Controllo2\" are still different so the loop starts over;</p>\n\n<p>At a certain point ParteDecimale will be 0.6, so when the loop starts ParteDecimale become 1.2 (0.6*2). Since it's bigger than 1, the else statement is executed and ParteDecimale become 0.2 (1.2-1). At this point \"Controllo\" and \"Controllo2\" are both 0.2, so the condition inside the do-while is not satisfied anymore and the loop should end.</p>\n\n<p>BUT</p>\n\n<p>I can't understand why, it is not ending. If you run the code you will see (you have to quickly click somewhere inside the cmd to temporarily stop the loop) that all the steps are right, probably it's a stupid mistake or something I can't see, but right now I don't know where to bang my head anymore. </p>\n\n<p>Thanks for reading this very long post, any help is appreciated, and sorry for my bad english!</p>\n"}, {"tags": ["c++", "casting", "bit-fields", "memory-layout"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 4, "creation_date": 1479930961, "post_id": 40773080, "comment_id": 68770064, "body": "Bitfield alignment and padding is implementation defined. You will need to investigate whether or not your compiler added padding to your structure with the bitfields. Highly likely."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479931093, "post_id": 40773080, "comment_id": 68770133, "body": "Also using a signed underlying type (<code>__int8 </code>) might not be the best idea."}, {"owner": {"reputation": 521, "user_id": 5976143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21633accbe046f734311ad6fd0e69f86?s=128&d=identicon&r=PG&f=1", "display_name": "Eliran Abdoo", "link": "https://stackoverflow.com/users/5976143/eliran-abdoo"}, "edited": false, "score": 1, "creation_date": 1479931311, "post_id": 40773080, "comment_id": 68770252, "body": "try to wrap your program with  <code>pragma pack(push,1)   PROGRAM pragma pack(pop)</code> It should eliminate any padding problems as Sam Varshavchik mentioned."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1479931796, "post_id": 40773080, "comment_id": 68770512, "body": "What is __int8? This is not something which C++ defines."}, {"owner": {"reputation": 258, "user_id": 5350712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603252fff955a868e43f547854043087?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/5350712/ali"}, "edited": false, "score": 0, "creation_date": 1479932041, "post_id": 40773080, "comment_id": 68770631, "body": "I was trying to use __int8 (or any other type) to have consistency between my definitions and also to overcome the alignment problem between my globalMem and instantiated objects of structA and structB"}, {"owner": {"reputation": 522, "user_id": 6695750, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e0b542466dff46af4db5137c618adc0?s=128&d=identicon&r=PG&f=1", "display_name": "ralfg", "link": "https://stackoverflow.com/users/6695750/ralfg"}, "edited": false, "score": 0, "creation_date": 1479937515, "post_id": 40773080, "comment_id": 68773188, "body": "Is placement new operator the keyword you are looking for? See <a href=\"http://stackoverflow.com/q/222557/6695750\">stackoverflow.com/q/222557/6695750</a>"}], "answers": [{"comments": [{"owner": {"reputation": 258, "user_id": 5350712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603252fff955a868e43f547854043087?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/5350712/ali"}, "edited": false, "score": 0, "creation_date": 1479932287, "post_id": 40773303, "comment_id": 68770782, "body": "but this only copies part of globalMem to a1, etc. It really doesn&#39;t &quot;map&quot; a1, a2 and b1 to parts of globalMem."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 258, "user_id": 5350712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603252fff955a868e43f547854043087?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/5350712/ali"}, "edited": false, "score": 0, "creation_date": 1479934797, "post_id": 40773303, "comment_id": 68771969, "body": "@Ali there are a couple of issues on you layout (see edit), which makes me think that your mapping control takes wrong assumptions (starting with the size of struct A).  I invite you to look at this online demo: <a href=\"http://ideone.com/K3PYpT\" rel=\"nofollow noreferrer\">ideone.com/K3PYpT</a> where you&#39;ll see that a prpeprly initialized object is properly copied despite the reinterpret cast.  However, reinterpret cast usually spots a tricky design that&#39;s worth reconsidering."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 0, "last_activity_date": 1479934639, "last_edit_date": 1479934639, "creation_date": 1479931667, "answer_id": 40773303, "question_id": 40773080, "link": "https://stackoverflow.com/questions/40773080/casting-memory-to-union/40773303#40773303", "title": "Casting memory to union", "body": "<p>To achieve what you intend to do requires the use of a <code>reinterpret_cast</code>: </p>\n\n<pre><code>structA a1 = *reinterpret_cast&lt;structA*&gt;(&amp;globalMem[0]);\nstructA a2 = *reinterpret_cast&lt;structA*&gt;(&amp;globalMem[10]);\nstructB b1 = *reinterpret_cast&lt;structB*&gt;(&amp;globalMem[30]);\n</code></pre>\n\n<p><strong>What's wrong with this ?</strong></p>\n\n<p>This requires extreme care, because a C++ <code>struct</code> is a special kind of <code>class</code>, and this kind of assignment does not respect the object semantic (because the content at the different <code>globalMem</code> addresses is not initialized as proper object unless you'd use <a href=\"https://isocpp.org/wiki/faq/dtors#placement-new\" rel=\"nofollow noreferrer\">placement new</a> somewhere in your code).  </p>\n\n<p>You could also make sure that <code>structA</code> is trivially copyable (<code>is_trivially_copyable&lt;structA&gt;::value</code> which fortunately is true here) before using this kind of tricks.  </p>\n\n<p>In addition, there could be an issue with alignment constraints which might not be respected, as <code>globalMem</code> has no alignment constraint, but depending on compiler/architecture, <code>structA</code> could require a word alignment.  </p>\n\n<p>Finally, the size of <code>structA</code> is not necessarily 3 as you tend to think. In fact on some compilers it will be 4, as in <strong><a href=\"http://ideone.com/K3PYpT\" rel=\"nofollow noreferrer\">this online demo</a></strong></p>\n\n<p><strong>Additional remarks</strong> </p>\n\n<p>You could use standard types <code>uint8_t</code> instead of compiler specific type name starting with double underscore.</p>\n\n<p>Regarding alignment and size topic, I'd advise you to be very prudent about memory layout assumptions. I'd rather suggest for your <code>globalMem</code> to consider making it a struct of all the structures it contains, so to ensure proper object semantic and have a safe layout.  </p>\n"}], "owner": {"reputation": 258, "user_id": 5350712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603252fff955a868e43f547854043087?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/5350712/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 40773303, "answer_count": 1, "score": 2, "last_activity_date": 1479934898, "creation_date": 1479930842, "last_edit_date": 1479934898, "question_id": 40773080, "link": "https://stackoverflow.com/questions/40773080/casting-memory-to-union", "title": "Casting memory to union", "body": "<p>I would like to allocate some memory, initialize it to some values and then cast different segments of this memory to different structures. Something as follows:</p>\n\n<pre><code>union structA{\n  __int8 mem[3];\n\n  struct{\n    unsigned field1 : 8;\n    unsigned field2 : 12; \n    unsigned field3 : 4;\n  };\n};\n\nstruct structB{\n  __int8 mem[10];\n};\n\n\n__int8 globalMem[128];\n\nstructA a1 &lt;---- &amp;globalMem[0]\nstructA a2 &lt;---- &amp;globalMem[10]\nstructB b1 &lt;---- &amp;globalMem[30]\n</code></pre>\n\n<p>I tried using reinterpret_cast and I don't get any compiler error but it seems that my variables (<code>a1</code>, <code>a2</code> and <code>b1</code>) are not really assigned/initialized correctly.</p>\n\n<p>Any idea about why this is not working and what is the correct way to achieve something like this?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "visual-c++", "mfc", "lptstr"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1479932759, "post_id": 40772975, "comment_id": 68771020, "body": "You should <a href=\"http://stackoverflow.com/questions/24472174/beginner-c-uninitialized-local-variable/24472249#24472249\">read this answer</a> as to what the issue is with respect to the pointers being used."}, {"owner": {"reputation": 167, "user_id": 5805914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6819a6f2cfead469f54cd326392e84bd?s=128&d=identicon&r=PG&f=1", "display_name": "Dan G", "link": "https://stackoverflow.com/users/5805914/dan-g"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1479933249, "post_id": 40772975, "comment_id": 68771255, "body": "Once it becomes a CString, I thought it was that object and that was that.  How am I wrong?  Obviously I am, just curious."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1479935348, "post_id": 40772975, "comment_id": 68772205, "body": "It is the call to GetWindowText that is at issue, way before that line that uses <code>CString</code> becomes involved.  Once the erroneous call to GetWindowText is executed, the corruption of memory has already taken place,"}, {"owner": {"reputation": 167, "user_id": 5805914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6819a6f2cfead469f54cd326392e84bd?s=128&d=identicon&r=PG&f=1", "display_name": "Dan G", "link": "https://stackoverflow.com/users/5805914/dan-g"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1479935411, "post_id": 40772975, "comment_id": 68772235, "body": "I understand that.  I just figured all CStrings were the same object type.  I&#39;m obviously wrong.  Thanks!"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1479935489, "post_id": 40772975, "comment_id": 68772270, "body": "<code>LPTSTR</code> is a pointer, not a CString."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1479954442, "post_id": 40772975, "comment_id": 68777897, "body": "Turn on compiler warnings. You should have gotten a &quot;use of uninitialized variable&quot; warning."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1479941977, "post_id": 40773096, "comment_id": 68774800, "body": "<i>&quot;the definition of LPTSTR is a char *&quot;</i> - It isn&#39;t. <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383751.aspx#LPTSTR\" rel=\"nofollow noreferrer\">LPTSTR</a> depends on the <code>UNICODE</code> preprocessor symbol, and it either expands to a <code>char*</code> or a <code>wchar_t*</code>. Unless you are maintaining legacy software, the <code>UNICODE</code> preprocessor symbol should always be defined."}], "tags": [], "owner": {"reputation": 313, "user_id": 6321114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8630706356a39194bd8b713f3603b6ad?s=128&d=identicon&r=PG&f=1", "display_name": "Loring", "link": "https://stackoverflow.com/users/6321114/loring"}, "is_accepted": false, "score": 1, "last_activity_date": 1479930910, "creation_date": 1479930910, "answer_id": 40773096, "question_id": 40772975, "link": "https://stackoverflow.com/questions/40772975/afxmessagebox-access-violation/40773096#40773096", "title": "AfxMessageBox - Access violation", "body": "<p>It looks like the variable temp is an uninitialized pointer (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx#LPSTR\" rel=\"nofollow noreferrer\">the definition of LPTSTR</a> is a char *).</p>\n\n<p>Try defining temp as an array instead:</p>\n\n<pre><code>TCHAR temp[64];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 167, "user_id": 5805914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6819a6f2cfead469f54cd326392e84bd?s=128&d=identicon&r=PG&f=1", "display_name": "Dan G", "link": "https://stackoverflow.com/users/5805914/dan-g"}, "edited": false, "score": 0, "creation_date": 1479931741, "post_id": 40773117, "comment_id": 68770492, "body": "Brilliant.  Thanks!  This really should be part of the spec."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 167, "user_id": 5805914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6819a6f2cfead469f54cd326392e84bd?s=128&d=identicon&r=PG&f=1", "display_name": "Dan G", "link": "https://stackoverflow.com/users/5805914/dan-g"}, "edited": false, "score": 0, "creation_date": 1479932193, "post_id": 40773117, "comment_id": 68770731, "body": "@DanG It is part of the spec.  You misread what it means when a function requires a pointer as an argument.  When you see such a declaration, it doesn&#39;t mean you declare a pointer and pass it to the function.  The function wants the <i>address</i> of an existing object."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1479941779, "post_id": 40773117, "comment_id": 68774742, "body": "<i>&quot;write to some unitialized memory&quot;</i> - It&#39;s worse, really. It&#39;s writing to random memory through an uninitialized pointer. Writing to uninitialized memory is not an issue in itself."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 167, "user_id": 5805914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6819a6f2cfead469f54cd326392e84bd?s=128&d=identicon&r=PG&f=1", "display_name": "Dan G", "link": "https://stackoverflow.com/users/5805914/dan-g"}, "edited": false, "score": 0, "creation_date": 1479943957, "post_id": 40773117, "comment_id": 68775434, "body": "@DanG: Even if it wasn&#39;t in the specification (<a href=\"https://msdn.microsoft.com/library/49a832ee-bc34-4126-88b3-bc1d9974f6c4.aspx#cwnd__getwindowtext\" rel=\"nofollow noreferrer\">it is</a>), typing a value for the <i>nMaxCount</i> argument should have given it away. Why did you think you need to pass a value, whose only job is to arbitrarily limit the output?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1480015232, "post_id": 40773117, "comment_id": 68808924, "body": "<i>&quot;write to some unallocated memory&quot;</i> - Again, the fact that no memory was allocated is not at all interesting. The undefined behavior is caused by dereferencing an uninitialized pointer, i.e. the code is writing through an uninitialized pointer. That&#39;s undefined behavior even if the memory pointed to were allocated by coincidence."}, {"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1480027913, "post_id": 40773117, "comment_id": 68812985, "body": "@IInspectable The fact that no memory is allocated is very interesting indeed. In fact, the pointer should point to some allocated memory buffer. That&#39;s as simple as that."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1480028597, "post_id": 40773117, "comment_id": 68813144, "body": "<i>&quot;The fact that no memory is allocated is very interesting indeed.&quot;</i> - Not as far as C++ is concerned. Dereferencing an <b>uninitialized</b> pointer exhibits undefined behavior already. It&#39;s completely irrelevant, where it points to. In this case it happened to have the value <code>0x34333345</code>, and that memory apparently wasn&#39;t readable by the current thread. The undefined behavior manifested itself by raising an access violation. But none of that is interesting as far as the programming language goes."}], "tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": true, "score": 3, "last_activity_date": 1480359567, "last_edit_date": 1480359567, "creation_date": 1479930980, "answer_id": 40773117, "question_id": 40772975, "link": "https://stackoverflow.com/questions/40772975/afxmessagebox-access-violation/40773117#40773117", "title": "AfxMessageBox - Access violation", "body": "<p>The problem is how you use <code>GetWindowText</code>:</p>\n\n<blockquote>\n<pre><code>LPTSTR temp;\nmainPassword.GetWindowText((LPTSTR)temp,100);\n</code></pre>\n</blockquote>\n\n<p>You are letting <code>GetWindowText</code> attempt to write to some <em>unallocated</em> memory passing the uninitialized <code>temp</code> pointer. If you really want to use a raw output buffer, you should <em>allocate</em> room for it <em>before</em> passing a pointer to <code>GetWindowText</code>, e.g.:</p>\n\n<pre><code>TCHAR temp[100];\nmainPassword.GetWindowText(temp, _countof(temp));\n// NOTE: No need to LPTSTR-cast\n</code></pre>\n\n<p>But, since you are using C++, you may want to just use a string <em>class</em> like <code>CString</code>, instead of raw buffers, e.g.:</p>\n\n<pre><code>CString password;\nmainPassword.GetWindowText(password);\n\nCString msg;\nmsg.Format(_T(\"mainPassword = %s\"), password.GetString());\n// or you can just concatenate CStrings using operator+ ... \nAfxMessageBox(msg);\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 5805914, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6819a6f2cfead469f54cd326392e84bd?s=128&d=identicon&r=PG&f=1", "display_name": "Dan G", "link": "https://stackoverflow.com/users/5805914/dan-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 40773117, "answer_count": 2, "score": 2, "last_activity_date": 1480359567, "creation_date": 1479930463, "last_edit_date": 1479931188, "question_id": 40772975, "link": "https://stackoverflow.com/questions/40772975/afxmessagebox-access-violation", "title": "AfxMessageBox - Access violation", "body": "<p>Here is what is going on.  When I try and run an AfxMessageBox from my CDialog extension class, I get an errror (see below).  I've googled the internet but come up short.  This is the only place the messagebox fails, and I know the rest of the code works (I stepped through it).</p>\n\n<p>Does anyone know how to fix this?</p>\n\n<p>Thanks in advance!</p>\n\n<p>Error message when AFXMESSAGEBOX opens:</p>\n\n<p>Unhandled exception at 0x014b4b70 in IsoPro.exe: 0xC0000005: Access violation reading location 0x34333345.</p>\n\n<p>Code to launch AfxMessageBox, from within CDialog</p>\n\n<pre><code>LPTSTR temp;\nmainPassword.GetWindowText((LPTSTR)temp,100);\nCString cstr;\ncstr.Format(\"mainPassword = %s\",temp);\nAfxMessageBox(cstr);\n</code></pre>\n\n<p>Code to display CDialog:</p>\n\n<pre><code>CEnterpriseManagementDialog* emd = new CEnterpriseManagementDialog();\nemd-&gt;Create(IDD_ENTERPRISE_MANAGEMENT_DIALOG);\nemd-&gt;ShowWindow(SW_SHOW);\n</code></pre>\n"}, {"tags": ["c++", "c++11", "memory-management", "containers", "smart-pointers"], "comments": [{"owner": {"reputation": 3740, "user_id": 1030870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f96f7ac4f0bf4c2421a9f58b6893400?s=128&d=identicon&r=PG", "display_name": "Mine", "link": "https://stackoverflow.com/users/1030870/mine"}, "edited": false, "score": 1, "creation_date": 1479930629, "post_id": 40772913, "comment_id": 68769916, "body": "If you <code>p_data</code> is expected to be shared between different containers, you may use <code>std::shared_ptr</code> instead, and then you do not use raw pointer at all."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1479930757, "post_id": 40772913, "comment_id": 68769979, "body": "<code>std::unique_ptr&lt;double[]&gt;</code>, if you use <code>new double[]</code>, and prefer <code>std::make_unique</code> to avoid this mismatch."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 3740, "user_id": 1030870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f96f7ac4f0bf4c2421a9f58b6893400?s=128&d=identicon&r=PG", "display_name": "Mine", "link": "https://stackoverflow.com/users/1030870/mine"}, "edited": false, "score": 0, "creation_date": 1479930934, "post_id": 40772913, "comment_id": 68770044, "body": "@Mine: this could be totally a waste of resources according to OP specification of the problem which is unclear."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1479931174, "post_id": 40772913, "comment_id": 68770177, "body": "@Jarod42: <code>std::make_unique()</code> is not in C++11, it was added in C++14."}, {"owner": {"reputation": 586, "user_id": 2523394, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d40798a5768de79d43dae9251fb06642?s=128&d=identicon&r=PG", "display_name": "lorniper", "link": "https://stackoverflow.com/users/2523394/lorniper"}, "reply_to_user": {"reputation": 3740, "user_id": 1030870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f96f7ac4f0bf4c2421a9f58b6893400?s=128&d=identicon&r=PG", "display_name": "Mine", "link": "https://stackoverflow.com/users/1030870/mine"}, "edited": false, "score": 0, "creation_date": 1479935788, "post_id": 40772913, "comment_id": 68772406, "body": "@mine shared between different containers? p_data in my case is stored in a map where value is the address, so I guess in my case it&#39;s ownership is unique. perhaps you can give some concrete example?"}], "answers": [{"comments": [{"owner": {"reputation": 586, "user_id": 2523394, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d40798a5768de79d43dae9251fb06642?s=128&d=identicon&r=PG", "display_name": "lorniper", "link": "https://stackoverflow.com/users/2523394/lorniper"}, "edited": false, "score": 0, "creation_date": 1479935192, "post_id": 40773070, "comment_id": 68772132, "body": "in this case, vector stores the shared_ptr, so here perhaps std::list wouldn&#39;t have much benefit even if we may swap the pointer(memory)?"}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": true, "score": 2, "last_activity_date": 1548874367, "last_edit_date": 1548874367, "creation_date": 1479930815, "answer_id": 40773070, "question_id": 40772913, "link": "https://stackoverflow.com/questions/40772913/use-unique-ptr-and-appropriate-container-to-do-memory-management/40773070#40773070", "title": "Use unique_ptr and appropriate container to do memory management", "body": "<p>First of all, if you are allocating an array you need to use the specialization <code>std::unique_ptr&lt;T[]&gt;</code> or you won't get a <code>delete []</code> on memory release but a simple <code>delete</code>.</p>\n\n<p><code>std::vector</code> is a good choice unless you have any explicit reason to use something different. For example, if you are going to move many elements inside the container then a <code>std::list</code> could perform better (less <code>memmove</code> operations to shift things around).</p>\n\n<p>Regarding how to manage memory, it depends mainly on the pattern of utilization. If <code>my_storage</code> is mainly responsible for everything (which in your specification it is, since <code>unique_ptr</code> expresses ownership), it means that it will be the only one who can release memory. Which could be done simply by calling <code>my_storage[i].reset()</code>.</p>\n\n<p>Mind that storing raw pointers of managed objects inside other collections leads to dangling pointers if memory is released, for example:</p>\n\n<pre><code>using my_type = std::unique_ptr&lt;double[]&gt;;\nusing my_storage = std::vector&lt;my_type&gt;;\n\nmy_storage data;\ndata.push_back(my_type(new double[100]));\n\nstd::vector&lt;double*&gt; rawData;\nrawData.push_back(data[0].get());\n\ndata.clear(); // delete [] is called on array and memory is released\n*rawData[0] = 1.2; // accessing a dangling pointer -&gt; bad\n</code></pre>\n\n<p>This could be a problem or not, if <code>data</code> is released by last then there are no problems, otherwise you could store const references to <code>std::unique_ptr</code> so that at least you'd be able to check if memory is still valid, e.g.:</p>\n\n<pre><code>using my_type = std::unique_ptr&lt;double[]&gt;;\nusing my_managed_type = std::reference_wrapper&lt;const my_type&gt;;\nstd::vector&lt;my_managed_type&gt; rawData;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1479931035, "creation_date": 1479931035, "answer_id": 40773135, "question_id": 40772913, "link": "https://stackoverflow.com/questions/40772913/use-unique-ptr-and-appropriate-container-to-do-memory-management/40773135#40773135", "title": "Use unique_ptr and appropriate container to do memory management", "body": "<p>Using <code>std::unique_ptr</code> with any STL container , including <code>std::vector</code>, is fine in general.  But you are not using <code>std::unique_ptr</code> the correct way (you are not using the array specialized version of it), and you don't need to resort to using <code>back.reset()</code> at all.  Try this instead:</p>\n\n<pre><code>// my data container\ntypedef std::unique_ptr&lt;double[]&gt; my_type;\n// or: using my_type = std::unique_ptr&lt;double[]&gt;;\n\nstd::vector&lt;my_type&gt; my_storage;\n\nmy_type ptr(new double[some_length]);\nmy_storage.push_back(std::move(ptr));\n// or: my_storage.push_back(my_type(new double[some_length]));\n// or: my_storage.emplace_back(new double[some_length]);\n</code></pre>\n"}], "owner": {"reputation": 586, "user_id": 2523394, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d40798a5768de79d43dae9251fb06642?s=128&d=identicon&r=PG", "display_name": "lorniper", "link": "https://stackoverflow.com/users/2523394/lorniper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 40773070, "answer_count": 2, "score": 2, "last_activity_date": 1548874367, "creation_date": 1479930205, "last_edit_date": 1479930541, "question_id": 40772913, "link": "https://stackoverflow.com/questions/40772913/use-unique-ptr-and-appropriate-container-to-do-memory-management", "title": "Use unique_ptr and appropriate container to do memory management", "body": "<p>First of all, my motivation is to do efficient memory management on top of a C like computational kernel. And I tried to use the <code>std::unique_ptr</code> and <code>std::vector</code>, my code looks like below</p>\n\n<pre><code>// my data container\ntypedef std::unique_ptr&lt;double&gt; my_type;\nstd::vector&lt;my_type&gt; my_storage;\n\n// when I need some memory for computation kernel\nmy_storage.push_back(my_type());\nmy_storage.back.reset(new double[some_length]);\n\n// get pointer to do computational stuff\ndouble *p_data=my_storage.back.get();\n</code></pre>\n\n<p>Notice here in practice <strong><code>p_data</code></strong> may be stored in some other container(e.g. map) to indexing each allocated array according to the domain problem, nevertheless, my main questions are</p>\n\n<ol>\n<li><p>Here is <code>std::vector</code> a good choice? what about other container like <code>std::list</code>/<code>set</code>?</p></li>\n<li><p>Is there fundamental problem with my allocation method?</p></li>\n<li><p>Suppose after I use <strong><code>p_data</code></strong> for some operations, now I want to release the memory chunk pointed by the raw pointer <strong><code>p_data</code></strong>, what is the best practice here?</p></li>\n</ol>\n"}, {"tags": ["c++", "opencv", "makefile", "cmake"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1479929747, "post_id": 40772703, "comment_id": 68769475, "body": "You are missing a <code>target_link_libraries()</code> in your <code>CMakeLists.txt</code>"}, {"owner": {"reputation": 25, "user_id": 7008631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SUDhM.jpg?s=128&g=1", "display_name": "Ethan Hammond", "link": "https://stackoverflow.com/users/7008631/ethan-hammond"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1479934003, "post_id": 40772703, "comment_id": 68771589, "body": "What should that link to? My lib folder?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1479934808, "post_id": 40772703, "comment_id": 68771973, "body": "<b><i>My lib folder?</i></b> Not the folder but the individual libraries. @SteveThibault answered that."}], "answers": [{"tags": [], "owner": {"reputation": 194, "user_id": 4076343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/16E2V.png?s=128&g=1", "display_name": "Steve Thibault", "link": "https://stackoverflow.com/users/4076343/steve-thibault"}, "is_accepted": true, "score": 1, "last_activity_date": 1479934273, "creation_date": 1479934273, "answer_id": 40773939, "question_id": 40772703, "link": "https://stackoverflow.com/questions/40772703/cmakelists-txt-doesnt-create-a-usable-makefile-ubuntu-and-c/40773939#40773939", "title": "CMakeLists.txt doesn&#39;t create a usable makefile (Ubuntu and C++)", "body": "<p>add the following after add_executable: </p>\n\n<pre><code>target_link_libraries(name ${OpenCV_LIBS})\n</code></pre>\n\n<p>This will tell cmake to link the specific library your code references to the executable. Specifying the link directory just tells the linker where to find those libraries, target_link_libraries tells which libraries to link within the link directories.</p>\n"}], "owner": {"reputation": 25, "user_id": 7008631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SUDhM.jpg?s=128&g=1", "display_name": "Ethan Hammond", "link": "https://stackoverflow.com/users/7008631/ethan-hammond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 40773939, "answer_count": 1, "score": 2, "last_activity_date": 1479934273, "creation_date": 1479929360, "question_id": 40772703, "link": "https://stackoverflow.com/questions/40772703/cmakelists-txt-doesnt-create-a-usable-makefile-ubuntu-and-c", "title": "CMakeLists.txt doesn&#39;t create a usable makefile (Ubuntu and C++)", "body": "<p>I'm quite new to C++ development and the idea of makefiles in general, so please bear with me. I'm on Ubuntu 16.04 LTS, if that's relevant.</p>\n\n<p>I'm trying to compile average-color.cpp, which uses the OpenCV library.</p>\n\n<p>Project Folder:</p>\n\n<pre>\nbin  CMakeLists.txt  img  lib  obj  src\n\n./bin:\n\n./img:\ntest.png\n\n./lib:\ncore.hpp  highgui.hpp  imgproc.hpp  opencv.hpp\n\n./obj:\naverage-color.d  calculate-average-color.d  makefile-test.d\naverage-color.o  calculate-average-color.o  makefile-test.o\n\n./src:\naverage-color.cpp\n</pre>\n\n<p>I'm able to compile a working file by using:</p>\n\n<pre><code>g++ average-color.cpp -o test `pkg-config --cflags --libs opencv`\n</code></pre>\n\n<p>while in the src directory, which leads me to believe that it's not a code error, it's a compiling error when using Cmake or some of the Makefiles I've found.</p>\n\n<p>Below is my CMakeLists file:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8) \nPROJECT (name)\nfind_package(OpenCV REQUIRED )\nset( NAME_SRC\nsrc/average-color.cpp    \n)\n\nset( NAME_HEADERS       \n     lib/core.hpp\n     lib/highgui.hpp\n     lib/imgproc.hpp\n     lib/opencv.hpp\n)\n\n    INCLUDE_DIRECTORIES( ${CMAKE_CURRENT_SOURCE_DIR}/lib )\n    link_directories( ${CMAKE_BINARY_DIR}/bin)\n    set(EXECUTABLE_OUTPUT_PATH ${CMAKE_BINARY_DIR}/bin)\n    add_executable( name ${NAME_SRC} ${NAME_HEADERS} )\n</code></pre>\n\n<p>When I run \"cmake .\", a makefile is generated. From there, running \"make\" fails: with the following output (couldn't format it nicely here). <a href=\"http://textuploader.com/d5wks\" rel=\"nofollow noreferrer\">http://textuploader.com/d5wks</a></p>\n\n<p>If anyone spots anything glaringly wrong with my CMakeLists.txt, please, explain, I haven't found very many clear explanations of all of this.</p>\n"}, {"tags": ["c++", "qt", "cmake", "mxe"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1479941665, "post_id": 40772600, "comment_id": 68774702, "body": "You don&#39;t need to do any of that. Use the cmake module provided by Qt: it will link your target with all necessary libraries that Qt itself depends on. This should be very simple - the work is already done, you only have to reuse it."}, {"owner": {"reputation": 1194, "user_id": 5006740, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204328181386038/picture?type=large", "display_name": "strangeqargo", "link": "https://stackoverflow.com/users/5006740/strangeqargo"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1479942736, "post_id": 40772600, "comment_id": 68775038, "body": "I have <code>find_package( Qt5Core REQUIRED ) find_package( Qt5Widgets REQUIRED ) find_package( Qt5Gui REQUIRED ) #find_package( Qt5Qml REQUIRED )</code> and <code>find_package(Qt5 COMPONENTS  Core Widgets Gui Network)</code> and <code>qt5_use_modules( ${CMAKE_PROJECT_NAME}  Core Widgets Gui )</code>, but mxe&#39;s cmake should find them by default I guess - and it founds them, it can&#39;t find dependencies. (It builds ok in Linux if it can help)"}, {"owner": {"reputation": 4799, "user_id": 6842725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d760417ddd74d615520fcdabd6c42ef?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Krammer", "link": "https://stackoverflow.com/users/6842725/kevin-krammer"}, "edited": false, "score": 1, "creation_date": 1479982328, "post_id": 40772600, "comment_id": 68789635, "body": "I guess your main problem is that you are attempting a static build, thus you need the statically built version of some or all of the libraries Qt itself is using. pcre for the regular expressions, compress/uncompress from zlib, the hb_ function from Harfbuzz. Maybe build a dynamically linked version once and then use ldd to find all dependencies?"}], "owner": {"reputation": 1194, "user_id": 5006740, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204328181386038/picture?type=large", "display_name": "strangeqargo", "link": "https://stackoverflow.com/users/5006740/strangeqargo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 537, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1480014612, "creation_date": 1479929008, "last_edit_date": 1492086990, "question_id": 40772600, "link": "https://stackoverflow.com/questions/40772600/finding-library-dependencies-make-cmake-linker", "title": "Finding library dependencies (make/cmake/linker)", "body": "<p>I'm trying to build a cross-platform QT C++ application (Linux/Windows), using <a href=\"http://mxe.cc\" rel=\"nofollow noreferrer\">MXE</a> and cmake. I googled very, very hard, you don't know how brilliant my google queries were. Such queries. But:</p>\n\n<p><strong>The problem: undefined references.</strong></p>\n\n<pre><code>/home/user/mxe/usr/i686-w64-mingw32.static/qt5/lib/libQt5Core.a(qregularexpression.o):qregularexpression.cpp:(.text+0x2b7): undefined reference to `pcre16_exec'\n</code></pre>\n\n<p>(and many others of this kind)</p>\n\n<p><strong>The solution:</strong></p>\n\n<pre><code>cd ~/mxe &amp;&amp; make pcre\n</code></pre>\n\n<p>then add to CMakeFiles.txt:</p>\n\n<pre><code>ADD_LIBRARY(pcre STATIC IMPORTED)\nSET_TARGET_PROPERTIES(pcre PROPERTIES IMPORTED_LOCATION /home/user/mxe/usr/i686-w64-mingw32.static/lib/libpcre16.a)\nTARGET_LINK_LIBRARIES(${CMAKE_PROJECT_NAME} pcre)\n</code></pre>\n\n<p><strong>Final problem: Other Undefined References.</strong></p>\n\n<pre><code>/home/user/mxe/usr/i686-w64-mingw32.static/qt5/lib/libQt5Core.a(qbytearray.o):qbytearray.cpp:(.text+0x60a): undefined reference to `uncompress'\n/home/user/mxe/usr/i686-w64-mingw32.static/qt5/lib/libQt5Core.a(qbytearray.o):qbytearray.cpp:(.text+0x1a30): undefined reference to `compress2'\n/home/user/mxe/usr/i686-w64-mingw32.static/qt5/lib/libQt5Gui.a(qharfbuzzng.o):qharfbuzzng.cpp:(.text+0x143e): undefined reference to `hb_font_funcs_set_glyph_v_origin_func'\n</code></pre>\n\n<p>But I don't know from what library this <code>compress</code> or <code>hb_font_funcs_set_glyph_v_origin_func</code> comes. I could google them one by one, but it looks like a stone age practice. And in a long perspective I don't want to do this for every cross-compiled project.</p>\n\n<p><strong>The question(s):</strong></p>\n\n<p>How do I find names of needed libraries, without reading qt build files? Is there a way to output dependencies (dynamic libraries needed) using cmake or make?</p>\n\n<p><strong>Possible solutions:</strong></p>\n\n<ul>\n<li><p>I know I can use <a href=\"https://unix.stackexchange.com/questions/120015/how-to-find-out-the-dynamic-libraries-executables-loads-when-run\">ldd</a> on a binary file. What I need is something like link-time ldd. Is this possible?</p></li>\n<li><p>Maybe I could use make (during QT building stage) to print QT's dependencies. If so, how to do it?</p></li>\n</ul>\n\n<p><strong>UPD: discovered</strong></p>\n\n<ul>\n<li><p>mxe related almost solution: </p>\n\n<p><code>usr/bin/i686-w64-mingw32.static-pkg-config --list-all | sort</code></p>\n\n<p><code>usr/bin/i686-w64-mingw32.static-pkg-config Qt5Widgets --libs</code></p></li>\n</ul>\n"}, {"tags": ["c++", "gcc", "boost", "c++17", "cmath"], "comments": [{"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 4, "creation_date": 1479936842, "post_id": 40772357, "comment_id": 68772878, "body": "Sounds like a straightforward gcc bug, no?"}, {"owner": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "edited": false, "score": 3, "creation_date": 1480179385, "post_id": 40772357, "comment_id": 68860477, "body": "What&#39;s the question really? You already pointed to the gcc bug."}, {"owner": {"reputation": 13461, "user_id": 680359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/39501f826ecf65950b455b670a78c58a?s=128&d=identicon&r=PG", "display_name": "emsr", "link": "https://stackoverflow.com/users/680359/emsr"}, "edited": false, "score": 1, "creation_date": 1510988131, "post_id": 40772357, "comment_id": 81679678, "body": "This will be fixed soon in gcc8.  Still discussing whether to backport in the middle of version 7.  I obviously got confused between the conventions.  We will document what happened.  Sigh."}], "owner": {"reputation": 3492, "user_id": 831725, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c4fe1b12d7ac380eb8db0c8a81f5683d?s=128&d=identicon&r=PG", "display_name": "Ren&#233; Richter", "link": "https://stackoverflow.com/users/831725/ren%c3%a9-richter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1510997119, "creation_date": 1479927945, "last_edit_date": 1510997119, "question_id": 40772357, "link": "https://stackoverflow.com/questions/40772357/sign-convention-of-characteristic-nu-in-elliptic-integral-of-the-3rd-kind-c1z", "title": "Sign convention of characteristic nu in elliptic integral of the 3rd kind C++1z implementation", "body": "<h1>TL;DR</h1>\n\n<p>Boost.Math and gcc's implementation of math special function <code>ellint_3()</code>\ngive different results. Both can't be right, right?\nComing C++ standard implementations should get it right, preferably on the 1st try.</p>\n\n<p>My question is: how? </p>\n\n<h2>Someone is wrong on the internet (or something in Denmark, if you prefer Shakespeare)</h2>\n\n<p>The special functions <code>std::ellint_3(k,nu,phi)</code>, <code>std::comp_ellint_3(k,nu)</code>\nin gcc's implementation \n(<a href=\"http://melpon.org/wandbox/permlink/hHkO3aTeYJFiyjUL\" rel=\"nofollow noreferrer\">live example</a>):</p>\n\n<pre><code>const auto pi = std::acos(-1.0);\nconst auto k  = 0.0;\n\nstd::cout &lt;&lt; \"nu\\tincomp.\\tcompl.\\texpect\\n\";\nfor (auto nu : {-0.9, -0.5, 0.0, 0.5, 0.9})\n{\n    auto expected = pi/(2*std::sqrt(1-nu));\n    std::cout \n        &lt;&lt; nu &lt;&lt; '\\t' \n        &lt;&lt; std::ellint_3(k, nu, pi/2) &lt;&lt; '\\t'\n        &lt;&lt; std::comp_ellint_3(k, nu) &lt;&lt; '\\t'\n        &lt;&lt; expected &lt;&lt; '\\n';                \n}\n</code></pre>\n\n<p>and their <code>std::tr1</code> equivalents \n(<a href=\"http://melpon.org/wandbox/permlink/HWlupkDweqEwAOhp\" rel=\"nofollow noreferrer\">live example</a>) \ngive incorrect results for non-zero values of parameter <code>nu</code>:</p>\n\n<pre><code>nu      incomp. compl.  expect\n-0.9    4.96729 4.96729 1.13958\n-0.5    2.22144 2.22144 1.28255\n0       1.5708  1.5708  1.5708\n0.5     1.28255 1.28255 2.22144\n0.9     1.13958 1.13958 4.96729\n</code></pre>\n\n<p>The results in \n<a href=\"http://www.boost.org/doc/libs/1_61_0/libs/math/doc/html/math_toolkit/ellint/ellint_3.html\" rel=\"nofollow noreferrer\">Boost.Math</a> \n<code>boost::math::ellint_3()</code> \nin gcc and clang seem to be correct \n(<a href=\"http://melpon.org/wandbox/permlink/9PbyZcC7cicsE2Y4\" rel=\"nofollow noreferrer\">live example</a>:)</p>\n\n<pre><code>nu      incomp. expect\n-0.9    1.13958 1.13958\n-0.5    1.28255 1.28255\n0       1.5708  1.5708\n0.5     2.22144 2.22144\n0.9     4.96729 4.96729\n</code></pre>\n\n<h2>Background</h2>\n\n<p>Documentation in TR1, Boost library, ISO 29124, C++17 Draft, \n<a href=\"http://en.cppreference.com/w/cpp/numeric/special_math/ellint_3\" rel=\"nofollow noreferrer\">en.cppreference.org</a> \nand documentation comments of gcc's implementation of <code>ellint_3(k,nu,phi)</code> and<code>comp_ellint_3(k,nu)</code>\nconsistently refer to the definition of the \n<a href=\"https://en.wikipedia.org/wiki/Elliptic_integral#Incomplete_elliptic_integral_of_the_third_kind\" rel=\"nofollow noreferrer\">elliptic integral of the 3rd kind</a> \n(parameter order/convention adapted here for convenience) </p>\n\n<p><img src=\"https://i.stack.imgur.com/ZvLCG.png\" alt=\"elliptic integral 3rd kind, minus sign\"></p>\n\n<p>given in Lagrange form by\nAbramowitz, Milton &amp; Stegun, Irene: Handbook of mathematical functions. (1964).</p>\n\n<p>For <code>k=0</code> and <code>phi=pi/2</code> the integral simpifies to <code>pi/(2*sqrt(1-nu))</code>:</p>\n\n<p><img src=\"https://i.stack.imgur.com/I6A0m.png\" alt=\"elliptic integral 3rd kind, special case\"></p>\n\n<p>according to \n(Bronstein, \u00a71.1.3, no. 311, 312, german 24th edn, Leipzig 1989) \nand \n<a href=\"https://www.wolframalpha.com/input/?i=ellipticPi%5Bnu,+pi%2F2,0%5D\" rel=\"nofollow noreferrer\">Wolfram Alpha</a>.</p>\n\n<p>However, there exists another definition with opposite sign (order of parameters changed for consistency here) </p>\n\n<p><img src=\"https://i.stack.imgur.com/IboFR.png\" alt=\"elliptic integral 3rd kind, plus sign\"></p>\n\n<p>referred to in \n<a href=\"https://arxiv.org/abs/math/9409227\" rel=\"nofollow noreferrer\">Carlsson</a>,\n<a href=\"http://www.aip.de/groups/soe/local/numres/bookcpdf/c6-11.pdf\" rel=\"nofollow noreferrer\">Press, W. et al.: Numerical Recipes in C, eq. 6.11.21, p.261</a>. </p>\n\n<p>These \"plus sign sources\" also give hints, \nhow to implement these functions using Carlson's integrals R_F and R_J.</p>\n\n<p>So, some libraries chose the \"plus sign\" for implementation, while others took the extra effort to adopt the \"minus sign\", according to <a href=\"https://root.cern.ch/doc/master/group__SpecFunc.html#ga53f1b9e37d4e4dfe31496721869e6656\" rel=\"nofollow noreferrer\">root.cern.ch</a>:</p>\n\n<ul>\n<li>plus sign : <a href=\"https://www.gnu.org/software/gsl/manual/html_node/Definition-of-Legendre-Forms.html#Definition-of-Legendre-Forms\" rel=\"nofollow noreferrer\">GNU Scientific Library (GSL)</a>, Planet Math, CERNLIB</li>\n<li>minus sign : Abramowitz/Stegun, Mathematica and Wolfram Alpha, Boost.Math, <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1687.pdf\" rel=\"nofollow noreferrer\">C++ TR1</a>, ISO/IEC 29124:2010, and coming C++1z standard</li>\n</ul>\n\n<p><a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=66689\" rel=\"nofollow noreferrer\">Gcc bug report 66689</a>\nand <a href=\"https://github.com/emsr/tr29124_test/blob/master/diff_special_function.cpp\" rel=\"nofollow noreferrer\">testcases</a>\nseem to indicate, that gcc took the (wrong?) decision to orient on GSL.</p>\n\n<h2>Conclusion / Question</h2>\n\n<p>Is there a (constructive) way out of this mess and to choose the \"right side of force\"?\nAt first glance, this seems to be an opinion-based question, \nbut there should be no opinion-based answer about truth or, \nat least, correct documentation.</p>\n\n<p>BTW, apologize for the inconvience, and thanks for all the <code>&lt;*)))&lt;</code>.</p>\n"}, {"tags": ["c++", "memory", "parallel-processing"], "comments": [{"owner": {"reputation": 5108, "user_id": 1500563, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ztruX.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/1500563/edward"}, "edited": false, "score": 0, "creation_date": 1479928269, "post_id": 40772353, "comment_id": 68768749, "body": "When you say you &quot;reference p_val_vec_main&quot; on system 2, do you mean you literally refer to the variable you declared inside your <code>pragma omp parallel</code> block? Or are you saying you refer to a copy of that pointer that was &quot;passed around&quot; into your RAII  system?"}, {"owner": {"reputation": 99, "user_id": 5422457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Tupe.png?s=128&g=1", "display_name": "mwtmurphy", "link": "https://stackoverflow.com/users/5422457/mwtmurphy"}, "reply_to_user": {"reputation": 5108, "user_id": 1500563, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ztruX.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/1500563/edward"}, "edited": false, "score": 0, "creation_date": 1479928405, "post_id": 40772353, "comment_id": 68768823, "body": "Outside the pragma block, but in the method where the pragma block is @Edward"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1479947293, "post_id": 40772353, "comment_id": 68776258, "body": "<code>new std::vector&lt;...</code> is almost always a bad idea. That actually holds for all containers. Just use the container type directly. &quot;Using RAII&quot; is not a argument <i>for</i> pointer, it&#39;s an argument <i>against</i> pointers."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 5422457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Tupe.png?s=128&g=1", "display_name": "mwtmurphy", "link": "https://stackoverflow.com/users/5422457/mwtmurphy"}, "edited": false, "score": 0, "creation_date": 1479928723, "post_id": 40772453, "comment_id": 68768997, "body": "I understand scopes, but my question is regarding why it does this for a parallel scope. Additionally why would it skip the other declarations?"}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "reply_to_user": {"reputation": 99, "user_id": 5422457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Tupe.png?s=128&g=1", "display_name": "mwtmurphy", "link": "https://stackoverflow.com/users/5422457/mwtmurphy"}, "edited": false, "score": 0, "creation_date": 1479928975, "post_id": 40772453, "comment_id": 68769114, "body": "@Murphy&#39;sLaw <code>#pragma omp parallel</code> defines a region that should be executed in parallel. This scope has the same visibility rules as other block scopes. So if your other logic is outside of this scope it cannot access variables defined there."}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "reply_to_user": {"reputation": 99, "user_id": 5422457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Tupe.png?s=128&g=1", "display_name": "mwtmurphy", "link": "https://stackoverflow.com/users/5422457/mwtmurphy"}, "edited": false, "score": 0, "creation_date": 1479968497, "post_id": 40772453, "comment_id": 68781825, "body": "@Murphy&#39;sLaw Was that helpful or you need more help? If this or any other answer has solved your question please consider upvoting and/or <a href=\"http://meta.stackexchange.com/q/5234/179419\">accepting it</a> by clicking the check-mark."}, {"owner": {"reputation": 99, "user_id": 5422457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Tupe.png?s=128&g=1", "display_name": "mwtmurphy", "link": "https://stackoverflow.com/users/5422457/mwtmurphy"}, "edited": false, "score": 1, "creation_date": 1479988244, "post_id": 40772453, "comment_id": 68793843, "body": "Hi Nikita. Your answer made sense. Thanks for helping."}], "tags": [], "owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "is_accepted": false, "score": 0, "last_activity_date": 1479928353, "creation_date": 1479928353, "answer_id": 40772453, "question_id": 40772353, "link": "https://stackoverflow.com/questions/40772353/establishing-memory-in-parallel-c/40772453#40772453", "title": "Establishing Memory in Parallel C++", "body": "<p>Compiler error clearly describes the problem. <code>p_val_vec_main</code> declared in the block:</p>\n\n<pre><code>#pragma omp parallel\n{\n  std::vector&lt;double&gt;* p_val_vec_main = new std::vector&lt;double&gt;(*mpStages);\n  // Other declarations skipped\n}\n</code></pre>\n\n<p>You cannot access it out of this block. Read more about <a href=\"http://en.cppreference.com/w/cpp/language/scope\" rel=\"nofollow noreferrer\">Block scope here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 5108, "user_id": 1500563, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ztruX.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/1500563/edward"}, "is_accepted": false, "score": 1, "last_activity_date": 1479929002, "creation_date": 1479929002, "answer_id": 40772599, "question_id": 40772353, "link": "https://stackoverflow.com/questions/40772353/establishing-memory-in-parallel-c/40772599#40772599", "title": "Establishing Memory in Parallel C++", "body": "<p>The problem you're having is that the <code>#pragma omp parallel</code> block, which you only use on System 2, creates an additional scope level (between the opening and closing braces) that hides the pointer variable <code>p_val_vec_main</code> (and the other variables) from any statements before and after it. This is a necessary part of using <code>omp parallel</code> because OpenMP internally converts the statements inside a <code>parallel</code> block into a function, so any variables declared inside that block become function-local.</p>\n\n<p>If you want to initialize the vectors inside an <code>omp parallel</code> block but use them outside of it, you'll need to declare the pointers at a higher level scope, like this:</p>\n\n<pre><code>std::vector&lt;double&gt;* p_val_vec_main;\nstd::vector&lt;double&gt;* p_val_vec_slave;\nstd::vector&lt;std::vector&lt;double&gt; &gt;* p_mat_cache;\n#pragma omp parallel\n{\n    p_val_vec_main = new std::vector&lt;double&gt;(*mpStages);\n    p_val_vec_slave = new std::vector&lt;double&gt;(*mpStages-1);\n    p_mat_cache =\n    new std::vector&lt;std::vector&lt;double&gt; &gt;(3, std::vector&lt;double&gt;());\n}\n//p_val_vec_main can be used here\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 5422457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Tupe.png?s=128&g=1", "display_name": "mwtmurphy", "link": "https://stackoverflow.com/users/5422457/mwtmurphy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1480001942, "creation_date": 1479927927, "last_edit_date": 1479928531, "question_id": 40772353, "link": "https://stackoverflow.com/questions/40772353/establishing-memory-in-parallel-c", "title": "Establishing Memory in Parallel C++", "body": "<p>I have a problem whereby I want to test a parallel system against a non-parallel system.</p>\n\n<p>In system 1 I establish the memory as such:</p>\n\n<pre><code>std::vector&lt;double&gt;* p_val_vec_main = new std::vector&lt;double&gt;(*mpStages);\nstd::vector&lt;double&gt;* p_val_vec_slave = new std::vector&lt;double&gt;(*mpStages-1);\nstd::vector&lt;std::vector&lt;double&gt; &gt;* p_mat_cache =\n     new std::vector&lt;std::vector&lt;double&gt; &gt;(3, std::vector&lt;double&gt;());\n</code></pre>\n\n<p>These vectors are passed around, and used in an RAII system that is repeated, hence the pointers and new syntax. </p>\n\n<p>In system 2 (the parallel system), I'm trying to establish the 3 vectors in parallel given there is no - presumed - overlap as such:</p>\n\n<pre><code>#pragma omp parallel\n{\n    std::vector&lt;double&gt;* p_val_vec_main = new std::vector&lt;double&gt;(*mpStages);\n    std::vector&lt;double&gt;* p_val_vec_slave = new std::vector&lt;double&gt;(*mpStages-1);\n    std::vector&lt;std::vector&lt;double&gt; &gt;* p_mat_cache =\n    new std::vector&lt;std::vector&lt;double&gt; &gt;(3, std::vector&lt;double&gt;());\n}\n</code></pre>\n\n<p>However the first time I go to reference 'p_val_vec_main' outside the pragma block, but inside the method where the pragma block is, on a valid element in system 2 I receive the error code:</p>\n\n<pre><code>error: 'p_val_vec_main' was not declared in this scope\n</code></pre>\n\n<p>Was wondering if anyone knew why this was happening? My only thoughts as to what this could be would be local/global clashes possibly.</p>\n"}, {"tags": ["c++", "32bit-64bit"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1479927991, "post_id": 40772342, "comment_id": 68768616, "body": "Explain the magic you used to have a 64-bit application use a 32-bit module in Windows.  Either the app and any external modules it loads is all 64-bit or all 32-bit."}, {"owner": {"reputation": 102, "user_id": 7055370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24168bcc90865b8c743cd014093dbb3a?s=128&d=identicon&r=PG&f=1", "display_name": "C. Frugal", "link": "https://stackoverflow.com/users/7055370/c-frugal"}, "edited": false, "score": 2, "creation_date": 1479928069, "post_id": 40772342, "comment_id": 68768656, "body": "What do you mean &quot;have to store them in 32bit values&quot;. Unless you use a uint32 or datatype as such to store pointers instead of a pointer type, it should be an issue to compile the library for an x64 architecture."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1479928242, "post_id": 40772342, "comment_id": 68768738, "body": "Also, you could have prevented this (in Windows) if you used <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa384255%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\"><code>ULONG_PTR</code></a> instead of a known <code>int</code> type to store pointers.  Then this all would have been transparent."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1479928411, "post_id": 40772342, "comment_id": 68768830, "body": "@PaulMcKenzie no magic, he wants to have a 64bit module that uses a 32bit address space. Of course it won&#39;t work, but not for that reason."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1479928802, "post_id": 40772342, "comment_id": 68769029, "body": "No, this can&#39;t be done. When you compile your program in 64bit mode, all pointers use much more than 32 bits (still less than 64 on many platforms, though)."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1479928982, "post_id": 40772342, "comment_id": 68769118, "body": "@SergeyA actually there&#39;s the x32 ABI, on linux anyway. Probably won&#39;t help either, but it&#39;s not like running in 64bit mode necessarily means your pointers have to be 64bit."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1479929186, "post_id": 40772342, "comment_id": 68769227, "body": "My advice is to change your data type that fits the pointer size type, recompile your code for 64 bits, fix any bugs you find.  Better than trying to finagle around using only 32-bits for a 64-bit type."}, {"owner": {"reputation": 102, "user_id": 7055370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24168bcc90865b8c743cd014093dbb3a?s=128&d=identicon&r=PG&f=1", "display_name": "C. Frugal", "link": "https://stackoverflow.com/users/7055370/c-frugal"}, "edited": false, "score": 0, "creation_date": 1479929492, "post_id": 40772342, "comment_id": 68769370, "body": "Or the other way around, if your client can compile his application on an x86 architecture, then tell him to use an x86 OS -on a physical machine or a VM. :)"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1479931060, "post_id": 40772342, "comment_id": 68770119, "body": "Because of Address Space Randomisation 64-bit applications will use all 64 bits of the address space so trying to save pointers into 32 bits will truncate the addresses."}, {"owner": {"reputation": 1012, "user_id": 5160450, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/b9XUM.jpg?s=128&g=1", "display_name": "Francesco Dondi", "link": "https://stackoverflow.com/users/5160450/francesco-dondi"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1479941687, "post_id": 40772342, "comment_id": 68774712, "body": "Thanks @harold, that might be what my colleague suggested :) However, it seems it has quite a lot of requirements -it requires the kernel to be recompiled, it seems?"}, {"owner": {"reputation": 1012, "user_id": 5160450, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/b9XUM.jpg?s=128&g=1", "display_name": "Francesco Dondi", "link": "https://stackoverflow.com/users/5160450/francesco-dondi"}, "edited": false, "score": 0, "creation_date": 1479944016, "post_id": 40772342, "comment_id": 68775451, "body": "I cannot use ULONG_PTR because the struct is mapped to the hardware, so I can&#39;t change that."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1479947618, "post_id": 40772342, "comment_id": 68776329, "body": "@FrancescoDondi: Note that X32 is a unique mode that&#39;s neither x86 nor x64. The chief problem is that your 64 bit application will be x64, not x32, so having an x32 library is rather pointless. (The idea behind x32 is that you use 32 bits pointers like x86 and all the extra registers that x64 offers you)"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1479949131, "post_id": 40772342, "comment_id": 68776650, "body": "Depending on your exact requirements, perhaps you can change the part of your code that <i>must store [pointers] in 32-bits</i> to use offsets instead. It all depends on why you &quot;must&quot; store pointers in 32-bits. Can you clarify?"}, {"owner": {"reputation": 1012, "user_id": 5160450, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/b9XUM.jpg?s=128&g=1", "display_name": "Francesco Dondi", "link": "https://stackoverflow.com/users/5160450/francesco-dondi"}, "reply_to_user": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1479994048, "post_id": 40772342, "comment_id": 68797713, "body": "@BeeOnRope we must send them with a fixed protocol which only has a limited number of bits available, simply. Yes using offsets is a solution, but requires significant refactoring of the code. We&#39;ll do it if necessary."}, {"owner": {"reputation": 1012, "user_id": 5160450, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/b9XUM.jpg?s=128&g=1", "display_name": "Francesco Dondi", "link": "https://stackoverflow.com/users/5160450/francesco-dondi"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1479994090, "post_id": 40772342, "comment_id": 68797739, "body": "@MSalters so apparently x32 is not a solution. The whole point is linking from x64."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1480004040, "post_id": 40772342, "comment_id": 68803905, "body": "@FrancescoDondi: That&#39;s yet another big sign of problems: you&#39;re sending a pointer value to somewhere else? What&#39;s the other side going to be doing with the value? Pointers only have local meaning."}, {"owner": {"reputation": 1012, "user_id": 5160450, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/b9XUM.jpg?s=128&g=1", "display_name": "Francesco Dondi", "link": "https://stackoverflow.com/users/5160450/francesco-dondi"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1480005105, "post_id": 40772342, "comment_id": 68804541, "body": "@MSalters I didn&#39;t write it... it&#39;s just stored for a while and then sent back to a different function running on the same process which sent it, so that it ends up making sense again.  It would be non trivial to know where to send it without making this trip."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1480005510, "post_id": 40772342, "comment_id": 68804789, "body": "Your best bet then is to convert only the pointers into offsets, or simply 32-bit indexes into a pointer table that holds 64-bit pointers. Presumably the amount of code that needs to deal with these &quot;portable&quot; pointers is much smaller than the total pointer use in the program."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1480005950, "post_id": 40772342, "comment_id": 68804976, "body": "The &quot;pointer to pointer&quot; technique is sometimes called a <i>handle</i>."}], "answers": [{"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1479947697, "creation_date": 1479947697, "answer_id": 40776383, "question_id": 40772342, "link": "https://stackoverflow.com/questions/40772342/limit-ponters-to-32-bit-on-64-bit-machine/40776383#40776383", "title": "Limit ponters to 32 bit on 64 bit machine", "body": "<p>No. <code>sizeof(void*)</code> is very much a constant. It can be 4 or 8, but not 4 <strong>and</strong> 8.</p>\n"}], "owner": {"reputation": 1012, "user_id": 5160450, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/b9XUM.jpg?s=128&g=1", "display_name": "Francesco Dondi", "link": "https://stackoverflow.com/users/5160450/francesco-dondi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1479947697, "creation_date": 1479927866, "question_id": 40772342, "link": "https://stackoverflow.com/questions/40772342/limit-ponters-to-32-bit-on-64-bit-machine", "title": "Limit ponters to 32 bit on 64 bit machine", "body": "<p>I have a library which runs fine in 32 bit; however a client needs to link it from a 64 bit application. However, changing the size of pointers is a problem, as we have to store them in 32 bit values. </p>\n\n<p>Is it possible to tell the compiler (both Visual Studio and GCC) to create a 64 bit library, but internally only use a 32 bit address space?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1479927749, "post_id": 40772294, "comment_id": 68768509, "body": "It doesn&#39;t work. It won&#39;t compile."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1479927789, "post_id": 40772294, "comment_id": 68768525, "body": "@nicomp, nah, it may compile."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1479927804, "post_id": 40772294, "comment_id": 68768531, "body": "What does &#39;work&#39; mean for you?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 2, "creation_date": 1479927807, "post_id": 40772294, "comment_id": 68768535, "body": "@nicomp It <i>may compile</i> (with a warning), but is undefined behavior."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1479927812, "post_id": 40772294, "comment_id": 68768539, "body": "It invokes undefined behavior. WIth that you were very <i>unlucky</i> it seems to work (because it doesn&#39;t)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1479927884, "post_id": 40772294, "comment_id": 68768570, "body": "@WhozCraig, there is no way in the world it might &#39;work&#39; with any sane meaning of word &#39;work;."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479927886, "post_id": 40772294, "comment_id": 68768572, "body": "@Sam I have to add that dupe to my list. Great finding!"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1479927961, "post_id": 40772294, "comment_id": 68768601, "body": "If it work, then you&#39;re just lucky. Launching the program a second time could simply crash. Or it could format your hard drive, or spit out baby elephants from your computer case. The compiler is LITERALLY permitted to do anything."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1479927998, "post_id": 40772294, "comment_id": 68768619, "body": "@SergeyA that would be why I said &quot;seems to work&quot; and that &quot;it doesn&#39;t&quot;. And if that isn&#39;t obtuse enough, I honestly couldn&#39;t care less."}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1479928236, "post_id": 40772294, "comment_id": 68768734, "body": "This has answers in the way local variables are stored in memory. It is undefined but I think many of you may find this simple example works. Google where &#39;return&#39; values are taken from."}], "owner": {"reputation": 29, "user_id": 7201755, "user_type": "registered", "profile_image": "https://graph.facebook.com/1490988790929594/picture?type=large", "display_name": "Shohidul Islam Bulbul", "link": "https://stackoverflow.com/users/7201755/shohidul-islam-bulbul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1479927838, "answer_count": 0, "score": 1, "last_activity_date": 1479927629, "creation_date": 1479927629, "question_id": 40772294, "link": "https://stackoverflow.com/questions/40772294/recursion-no-return-still-works", "closed_reason": "Duplicate", "title": "Recursion ( No return still works)", "body": "<p>I was trying to write a function which will take an integer and return it's factorial. I used c++ language.\nThe actual code should be:</p>\n\n<pre><code>    int f(int x)\n{\n    if(x==0) \n        return 1;\n     else if(x&gt;=1)    \n        return x=x*f(x-1);\n    else\n        return 1;\n}\n</code></pre>\n\n<p>This is correct form. <strong>But,</strong></p>\n\n<pre><code>int f(int x)\n{\n   if(x&gt;1)\n      x=x*f(x-1);\n}\n</code></pre>\n\n<p>this also works even I didn't mentioned any 'return'. Also when the recursion goes to base case, there is nothing to return!\nSo, how does it works actually ? :o </p>\n"}, {"tags": ["c++", "makefile", "gnu-make"], "answers": [{"tags": [], "owner": {"reputation": 4565, "user_id": 1535516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18cd12e7701f83e50fb4d29d1918be0f?s=128&d=identicon&r=PG", "display_name": "xaizek", "link": "https://stackoverflow.com/users/1535516/xaizek"}, "is_accepted": true, "score": 3, "last_activity_date": 1479929966, "last_edit_date": 1479929966, "creation_date": 1479928597, "answer_id": 40772507, "question_id": 40772254, "link": "https://stackoverflow.com/questions/40772254/out-of-source-build-doesnt-match-rule-for-object-files/40772507#40772507", "title": "Out-of-source build doesn&#39;t match rule for object files", "body": "<h3>What's going wrong</h3>\n\n<p>The issue is caused by this line:</p>\n\n<pre><code>$(BUILD_DIR)/%.cpp.o: %.cpp\n</code></pre>\n\n<p><code>%</code> will be <code>sourcefile1</code> according to the left-hand side, so expanded line looks like this and the pattern gets ignored:</p>\n\n<pre><code>$(BUILD_DIR)/sourcefile1.cpp.o: sourcefile1.cpp\n</code></pre>\n\n<p>You need to get <code>src/sourcefile1.cpp</code> on the right to make this rule work.</p>\n\n<h3>How to fix it</h3>\n\n<p>You can either change the line to:</p>\n\n<pre><code>$(BUILD_DIR)/%.cpp.o: $(SRC_DIR)/%.cpp\n</code></pre>\n\n<p>Or make paths of object files include <code>src/</code> (i.e., don't delete <code>$(SRC_DIR)</code> part from their path):</p>\n\n<pre><code>OBJS = $(SRCS:%=$(BUILD_DIR)/%.o)\n</code></pre>\n\n<p>Both solutions should be equivalent, they just adjust different parts of the rule.</p>\n"}], "owner": {"reputation": 5108, "user_id": 1500563, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ztruX.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/1500563/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 40772507, "answer_count": 1, "score": 1, "last_activity_date": 1479929966, "creation_date": 1479927459, "question_id": 40772254, "link": "https://stackoverflow.com/questions/40772254/out-of-source-build-doesnt-match-rule-for-object-files", "title": "Out-of-source build doesn&#39;t match rule for object files", "body": "<p>I'm trying to set up a Makefile for out-of-source builds of a C++ project, based on a template I found on <a href=\"https://spin.atomicobject.com/2016/08/26/makefile-c-projects/\" rel=\"nofollow noreferrer\">this blog post</a>. However, for some reason, the pattern-matching target <code>$(BUILD_DIR)/$.cpp.o:</code> doesn't seem to be working, because I get errors like \"No rule to make target 'build/somefile.cpp.o'.\"</p>\n\n<p>Here is my Makefile, with some of the unnecessary details removed. Note that the SRCS variable is built up from other variables because eventually I want to support different targets using different sets of source files, but for now SRCS has only one definition and could be defined in one line.</p>\n\n<pre><code>CXX = g++\nRM = rm -f\nMKDIR_P ?= mkdir -p\n\nSRC_DIR := ./src\nBUILD_DIR := ./build\n\nCPPFLAGS := -std=c++14 -g3 -O0 -Wall\n\nLFLAGS := -L\"./libraries/mutils\"\nINCLUDES := -I\"$(SRC_DIR)/\" -I\"./libraries/\"\nLIBS := -lmutils -lpthread\n\nOBJS = $(SRCS:$(SRC_DIR)/%=$(BUILD_DIR)/%.o)\nDEPS = $(OBJS:.o=.d)\n\nCOMMON_SRCS := sourcefile1.cpp sourcefile2.cpp sourcefile3.cpp sourcefile4.cpp\nCOMMON_SRCS := $(addprefix $(SRC_DIR)/,$(COMMON_SRCS))\nCOMMON_SRCS += $(shell find $(SRC_DIR)/util -name *.cpp)\n\nSIM_SRCS := $(shell find $(SRC_DIR)/simulation -name *.cpp)\nSIM_SRCS += $(SRC_DIR)/SimulationMain.cpp\n\n$(BUILD_DIR)/%.cpp.o: %.cpp\n    $(MKDIR_P) $(dir $@)\n    $(CXX) $(CPPFLAGS) $(INCLUDES) -c $&lt; -o $@  \n\nSRCS = $(COMMON_SRCS) $(SIM_SRCS)\n\nbuild/simulation: $(OBJS)\n    $(CXX) $(LFLAGS) $(OBJS) -o $@ $(LIBS)\n\n.PHONY: clean\n\nclean:\n    $(RM) -r $(BUILD_DIR)\n\n-include $(DEPS)\n</code></pre>\n\n<p>If I try to run this with <code>make build/simulation</code>, I get <code>*** No rule to make target 'build/sourcefile1.cpp.o', needed by 'build/simulation'. Stop.</code> This is the first file in the OBJS list, so it seems like Make expanded all the variables but then couldn't match a single object file to a rule. What could be going wrong here?</p>\n\n<p>My first thought was that the problem is the <code>./</code> in BUILD_DIR, and Make can't match <code>build/sourcefile1.cpp.o</code> to the rule <code>./build/%.cpp.o : %.cpp</code>, but I get the exact same error if I remove the <code>./</code> from BUILD_DIR and SRC_DIR.</p>\n"}, {"tags": ["c++", "excel", "vba", "winapi"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1479927312, "post_id": 40772166, "comment_id": 68768279, "body": "A <code>bool</code> is not the same as a <code>BOOL</code>.  The C++ function should be using <code>BOOL</code>."}, {"owner": {"reputation": 162, "user_id": 6841200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ee3fbb31ed128f84ac6b61df829ca4?s=128&d=identicon&r=PG&f=1", "display_name": "kaineub", "link": "https://stackoverflow.com/users/6841200/kaineub"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1479929528, "post_id": 40772166, "comment_id": 68769392, "body": "I knew that they weren&#39;t the same. I didn&#39;t know that the Boolean type in VBA wasn&#39;t the same as bool in C++ though. I&#39;ll use BOOL from now on. Thanks."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1479930204, "post_id": 40772166, "comment_id": 68769674, "body": "You should be using the types that the Windows API has defined when passing or returning values like this.  This includes <code>LONG</code>, <code>BOOL</code>, <code>ULONG</code>, etc.  A <code>bool</code> is a C++ type that can only be used in C++ applications.  It can vary in size and implementation, which is why you should not use it for VBA purposes.  <a href=\"http://stackoverflow.com/questions/4897844/is-sizeofbool-defined\">For more reading...</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1479936484, "post_id": 40772166, "comment_id": 68772718, "body": "VB&#39;s <code>Boolean</code> is actually <code>VARIANT_BOOL</code> in C/C++. Also see <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20041222-00/?p=36923\" rel=\"nofollow noreferrer\">BOOL vs. VARIANT_BOOL vs. BOOLEAN vs. bool</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1479939855, "post_id": 40772166, "comment_id": 68774098, "body": "@PaulMcKenzie: You should delete your comments. At least the first one is blatantly wrong, with the second one being misleading. The upvotes on your first comment may be misinterpreted as authoritative affirmation."}], "owner": {"reputation": 162, "user_id": 6841200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ee3fbb31ed128f84ac6b61df829ca4?s=128&d=identicon&r=PG&f=1", "display_name": "kaineub", "link": "https://stackoverflow.com/users/6841200/kaineub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 457, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479933174, "creation_date": 1479927128, "last_edit_date": 1479933174, "question_id": 40772166, "link": "https://stackoverflow.com/questions/40772166/c-dll-bool-value-always-read-as-false-in-vba", "title": "C++ DLL bool value always read as False in VBA", "body": "<p>I have a DLL that I wrote using C++ that contains functions like this:</p>\n\n<pre><code>bool _stdcall vbaBoolTest(LPSAFEARRAY *values)\n</code></pre>\n\n<p>I have set up Visual Studio to let me debug the DLL using Excel. I declare the function in VBA like this:</p>\n\n<pre><code>Private Declare Function vbaBoolTest Lib \"myDLL.dll\" (ByRef values() As Double) As Boolean\n</code></pre>\n\n<p>and I noticed that the function would always evaluate to True on the VBA side of things. I can debug the macro that uses these functions and set break points in the C++ code as well. I have tried forcing the value to be false in C++ but the macro always reads the return value as False. I got around it by changing the return type to BOOL in C++ and returning either TRUE or FALSE.</p>\n\n<p>I wanted to know if this is the recommended way of doing things or if there is a better way.</p>\n"}, {"tags": ["c++", "linux", "sockets"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1479926921, "post_id": 40772079, "comment_id": 68768063, "body": "Use strace to verify all syscalls from your running process. No further help is possible without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1479927359, "post_id": 40772079, "comment_id": 68768300, "body": "Your error messages could print out <code>std::strerror(errno)</code> which can give you more detailed info."}, {"owner": {"reputation": 3574, "user_id": 5793987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a057299226b268d59f2faa0b3f1d1112?s=128&d=identicon&r=PG", "display_name": "gudok", "link": "https://stackoverflow.com/users/5793987/gudok"}, "edited": false, "score": 1, "creation_date": 1479927613, "post_id": 40772079, "comment_id": 68768442, "body": "1) Why did you commented out <code>htons</code> when setting port? 2) Second argument in <code>listen</code> is not server port but backlog -- max number of allowed connections to be connected but not yet accepted."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1479927616, "post_id": 40772079, "comment_id": 68768446, "body": "Why is your (correct) htons call is being commented out? Because it didn&#39;t work with it? Well, it didn&#39;t work because you need root permissions to bind to any port below 1024."}, {"owner": {"reputation": 31747, "user_id": 499448, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/957083d526c5fd7c54c5b89aece0b76a?s=128&d=identicon&r=PG", "display_name": "Boardy", "link": "https://stackoverflow.com/users/499448/boardy"}, "edited": false, "score": 0, "creation_date": 1479928776, "post_id": 40772079, "comment_id": 68769020, "body": "I always forget about the strace command. I gave that a try and found the problem and it was because the IDE was not running as root"}, {"owner": {"reputation": 31747, "user_id": 499448, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/957083d526c5fd7c54c5b89aece0b76a?s=128&d=identicon&r=PG", "display_name": "Boardy", "link": "https://stackoverflow.com/users/499448/boardy"}, "reply_to_user": {"reputation": 3574, "user_id": 5793987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a057299226b268d59f2faa0b3f1d1112?s=128&d=identicon&r=PG", "display_name": "gudok", "link": "https://stackoverflow.com/users/5793987/gudok"}, "edited": false, "score": 0, "creation_date": 1479928856, "post_id": 40772079, "comment_id": 68769058, "body": "@gudok I thought that was the problem so I commented out but put it back now. Good to know about being below 1024 needing root didn&#39;t realise that"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1479931695, "post_id": 40772079, "comment_id": 68770464, "body": "The <code>htons()</code> for the listening port is absolutely necessary. Also, your <code>bind()</code> code will only work when <code>family</code> is <code>AF_INET</code>. Try using <code>AF_INET6</code> instead and it will fail, because you need to use <code>sockaddr_in6</code>, which has a different memory layout than <code>sockaddr_in</code>. If you want to support multiple socket families, make sure <code>serv_addr</code> and <code>clientAddr</code> are both declared as <code>sockaddr_storage</code> and then type-cast them based on <code>family</code> when reading/writing their data fields."}, {"owner": {"reputation": 31747, "user_id": 499448, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/957083d526c5fd7c54c5b89aece0b76a?s=128&d=identicon&r=PG", "display_name": "Boardy", "link": "https://stackoverflow.com/users/499448/boardy"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1479937508, "post_id": 40772079, "comment_id": 68773185, "body": "Thanks for the tip @RemyLebeau much appreciated"}], "owner": {"reputation": 31747, "user_id": 499448, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/957083d526c5fd7c54c5b89aece0b76a?s=128&d=identicon&r=PG", "display_name": "Boardy", "link": "https://stackoverflow.com/users/499448/boardy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529061380, "creation_date": 1479926738, "last_edit_date": 1529061380, "question_id": 40772079, "link": "https://stackoverflow.com/questions/40772079/creating-a-linux-socket-seems-to-successfully-bind-but-cant-connect", "title": "Creating a Linux Socket seems to successfully bind but can&#39;t connect", "body": "<p>I am currently learning C++ and I am creating a library that handles sockets for both Windows and Linux platforms. I've got the Windows version working fine but the Linux version seems to not work as expected. </p>\n\n<p>Below is the code that I have to create a socket:</p>\n\n<pre><code>bool LinuxSocket::createSocket(int family, int socketType, int port, int bufferLength)\n{\n    BaseSocket::createsocket(port, bufferLength);\n    this-&gt;serverSocket = socket(family, socketType, 0);\n    if (this-&gt;serverSocket &lt; 0)\n    {\n        bitsLibrary-&gt;writeToLog(\"Error opening socket\", \"LinuxSocket\", \"createSocket\");\n        return false;\n    }\n    bzero((char *)&amp;this-&gt;serv_addr, sizeof(this-&gt;serv_addr));\n    serv_addr.sin_family = family;\n    serv_addr.sin_addr.s_addr = INADDR_ANY;\n    //serv_addr.sin_port = htons(port);\n    serv_addr.sin_port = port;\n\n    return true;\n}\n</code></pre>\n\n<p>Below is the code for binding and starting the port to listen:</p>\n\n<pre><code>bool LinuxSocket::bindAndStartListening()\n{\n    stringstream logstream;\n    int result = bind(this-&gt;serverSocket, (struct sockaddr * )&amp;serv_addr, sizeof(serv_addr));\n    if (result &lt; 0)\n    {\n        logstream &lt;&lt; \"Failed to bind socket. Error: \" &lt;&lt; strerror(result);\n        this-&gt;bitsLibrary-&gt;writeToLog(logstream.str(), \"LinuxSocket\", \"bindAndStartListening\");\n        return false;\n    }\n    if (listen(this-&gt;serverSocket, this-&gt;socketPort) &lt; 0)\n    {\n        this-&gt;bitsLibrary-&gt;writeToLog(\"Failed to start listening\", \"LinuxSocket\", \"bindAndStartListening\");\n        return false;\n    }\n    logstream &lt;&lt; \"Socket \" &lt;&lt; this-&gt;socketPort &lt;&lt; \" has been successfully bound\";\n    this-&gt;bitsLibrary-&gt;writeToLog(logstream.str(), \"LinuxSocket\", \"bindAndStartListening\");\n    return true;\n}\n</code></pre>\n\n<p>Below is the code that accepts a client connection and returns the socket</p>\n\n<pre><code>int LinuxSocket::acceptClientAndReturnSocket(sockaddr_in *clientAddr)\n{\n    socklen_t clilen = sizeof(clientAddr);\n    int clientSocket = accept(this-&gt;serverSocket, (struct sockaddr *)&amp;clientAddr, &amp;clilen);\n    if (clientSocket &lt; 0)\n    {\n        this-&gt;bitsLibrary-&gt;writeToLog(\"Unable to accept client socket\");\n        throw SocketException(strerror(clientSocket));\n    }\n    return clientSocket;\n}\n</code></pre>\n\n<p>Below is how I am calling the methods</p>\n\n<pre><code>BitsLibrary bitsLibrary;\n    StaticSettings staticSettings(&amp;bitsLibrary, \"tunnel.conf\");\n\n        LinuxSocket linuxSocket(&amp;bitsLibrary);\n        linuxSocket.createSocket(AF_INET, SOCK_STREAM, 500, 20);\n        linuxSocket.bindAndStartListening();\n\n        sockaddr_in clientAddr;\n        int clientSocket = linuxSocket.acceptClientAndReturnSocket(&amp;clientAddr);\n</code></pre>\n\n<p>When I run the program no errors seem to be returned and I log out <code>Socket 500 has been successfully bound</code> so it seems like it works, however when trying to connect I get a connection refused. </p>\n\n<p>I've then run <code>netstat -plna | grep 500</code> but this doesn't seem to return anything so it doesn't look like its actually binding the socket. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 242, "user_id": 2229164, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Tu0hS.jpg?s=128&g=1", "display_name": "david", "link": "https://stackoverflow.com/users/2229164/david"}, "edited": false, "score": 0, "creation_date": 1479927172, "post_id": 40772058, "comment_id": 68768212, "body": "Multiplying by 1 doesn&#39;t change the velocity, -1 is correct for moving right, also. In the loop, you probably want to multiply 200 by the iterator value, aly."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1479994706, "post_id": 40772058, "comment_id": 68798174, "body": "StackOverflow is not a debugging service; it works best on specific answers to specific problems. Use a debugger, identify where things do not do what you think they should be doing, and ask THAT as a pointed question (unless you&#39;ve found the answer first) and then we can help."}], "answers": [{"tags": [], "owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "is_accepted": true, "score": 0, "last_activity_date": 1479927345, "creation_date": 1479927345, "answer_id": 40772215, "question_id": 40772058, "link": "https://stackoverflow.com/questions/40772058/c-space-invaders-movement/40772215#40772215", "title": "C++ Space Invaders Movement", "body": "<pre><code>if (currentSpritePos.x &lt; 975 || currentSpritePos.x &gt; 0)\n{\n    this-&gt;AlienVelocity.x = this-&gt;AlienVelocity.x*-1;\n}\n</code></pre>\n\n<p>This code says that whenever the aliens are between 0 and 975 to reverse the velocity.  I believe this is the exact opposite of what you want.  This means they should just go back and forth and never move across the screen.  Swap the compare signs.</p>\n\n<p>For moving down, take the current y position and add the row length to it,  This should be done when the velocity is reversed - in the same if statement.</p>\n\n<p>Start with those changes and see if you can figure out the rest.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7201716"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 837, "favorite_count": 0, "accepted_answer_id": 40772215, "answer_count": 1, "score": 0, "last_activity_date": 1479994626, "creation_date": 1479926682, "last_edit_date": 1479994626, "question_id": 40772058, "link": "https://stackoverflow.com/questions/40772058/c-space-invaders-movement", "title": "C++ Space Invaders Movement", "body": "<p>I'm really kind of new to c++ and quite bad at it but I'm making a space invaders game for my university project. I'm having trouble with the alien movement system and how to get the aliens to spawn in a line (once they get to a side of the screen they move down and then across).</p>\n\n<p>Firstly here is the code I'm using to move the alien movement </p>\n\n<pre><code>if (currentSpritePos.x &lt; 975 || currentSpritePos.x &gt; 0)\n{\n    this-&gt;AlienVelocity.x = this-&gt;AlienVelocity.x*-1;\n}\n\nif (currentSpritePos.x == 0)\n{\n    cout &lt;&lt; \"Im at the wall wooo and going to move down\";\n    //AlievVelocity.x*+1;\n    setSpritePos({ 0, 75 });\n}\n</code></pre>\n\n<p>I can get the aliens to go left and move down but for some reason they aren't moving right, I commented the line out \"AlienVelocity.x*+1\", I thought that would have just made them go right since \"-1\" made them go left...</p>\n\n<p>To get the aliens to spawn in a line I've made an array and set so only 2 aliens to spawn just for testing purposes.</p>\n\n<pre><code>for (int aly = 0; aly &lt; 2; aly++) // Change the 35 to number of desired aliens\n{\n    theAliens.push_back(new cAliens);\n    theAliens[aly]-&gt;setSpritePos({ (100, 50) + 200 });\n    theAliens[aly]-&gt;setSpriteTranslation({ 0, 0 });\n    theAliens[aly]-&gt;setTexture(theTextureManager-&gt;getTexture(\"alien\"));\n    theAliens[aly]-&gt;setSpriteDimensions(theTextureManager-&gt;getTexture(\"ship\")-&gt;getTWidth(), theTextureManager-&gt;getTexture(\"alien\")-&gt;getTHeight());\n}\n</code></pre>\n\n<p>On the 2nd line in side the for statement I put \"+200+ because I thought that would just put the next alien +200 points but obviously not. I'm not sure on how to fix this as well...</p>\n"}, {"tags": ["c++", "winapi", "struct"], "comments": [{"owner": {"reputation": 33311, "user_id": 5620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2f98606c6c7002862ef3be62cfc97c?s=128&d=identicon&r=PG", "display_name": "Peter Ritchie", "link": "https://stackoverflow.com/users/5620/peter-ritchie"}, "edited": false, "score": 1, "creation_date": 1479931476, "post_id": 40772041, "comment_id": 68770341, "body": "Both have the same updates?  Updates often include new information about timezone information/rules."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2664750"}, "reply_to_user": {"reputation": 33311, "user_id": 5620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2f98606c6c7002862ef3be62cfc97c?s=128&d=identicon&r=PG", "display_name": "Peter Ritchie", "link": "https://stackoverflow.com/users/5620/peter-ritchie"}, "edited": false, "score": 0, "creation_date": 1480006478, "post_id": 40772041, "comment_id": 68805235, "body": "The updates are controlled by IT. i.e. It&#39;s all automated. I don&#39;t see any huge gulf between what&#39;s on my laptop (working) and the other machine (not working). I contacted them and they gave some b.s. answer having to do with time server."}], "answers": [{"comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1480017514, "post_id": 40792374, "comment_id": 68809691, "body": "You&#39;ll have to check that last sentence, it says that nothing got fixed."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2664750"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1480018313, "post_id": 40792374, "comment_id": 68810004, "body": "Wrong. Prior to the steps I&#39;ve outlined the DaylightName was &quot;Eastern Daylight Time&quot; with a DalightBias of -60."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2664750"}, "is_accepted": true, "score": 0, "last_activity_date": 1480010287, "creation_date": 1480010287, "answer_id": 40792374, "question_id": 40772041, "link": "https://stackoverflow.com/questions/40772041/gettimezoneinformation-function-returns-struct-with-incorrect-values/40792374#40792374", "title": "GetTimeZoneInformation function returns struct with &quot;incorrect&quot; values", "body": "<p>For anyone experiencing this issue, I've discovered a fix. <em>Open up Date and Time dialog</em>. Press the <em>Change time zone...</em> button. </p>\n\n<p>Choose a Time zone that doesn't observe Daylight Saving Time. e.g. Hawaii. Press Ok for the <em>Time Zone Settings</em> dialog, then OK for the <em>Date and Time</em> dialog. </p>\n\n<p>Open the <em>Date and Time</em> dialog again, open the Time Zone Settings dialog again and select your original time zone (you'll notice at this point that the auto adjust checkbox is checked for all zones that observe DST). </p>\n\n<p>You can uncheck the <em>Automatically adjust clock for Daylight Saving Time</em> checkbox. </p>\n\n<p>Press OK for <em>Time Zone Settings</em>. Press OK for <em>Date and Time</em>.</p>\n\n<p>After these steps a call to <code>GetTimeZoneInformation</code> will assgin the <code>TIME_ZONE_INFORMATION</code> struct DaylightName member with the string, in my case, \"Eastern Standard Time\", and the DaylightBias value of 0.</p>\n\n<p>Cheers.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2664750"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 40792374, "answer_count": 1, "score": 1, "last_activity_date": 1480010287, "creation_date": 1479926607, "last_edit_date": 1479931872, "question_id": 40772041, "link": "https://stackoverflow.com/questions/40772041/gettimezoneinformation-function-returns-struct-with-incorrect-values", "title": "GetTimeZoneInformation function returns struct with &quot;incorrect&quot; values", "body": "<p>I have an issue with calling the function <code>GetTimeZoneInformation</code> on a certain machine. </p>\n\n<p>Specifically, my machine is set to <strong>EST/EDT</strong> <em>(auto adjust for DST is disabled)</em> and after a call to the function my <code>TIME_ZONE_INFORMATION</code> struct has an identical <strong>StandardName</strong> &amp; <strong>DaylightName</strong> <em>(Eastern Standard Time)</em>, and the <strong>StandardBias</strong> and <strong>DaylightBias</strong> are both Zero(0) and the return value is Zero(0).</p>\n\n<p>On another machine <em>(with the same EST/EDT zone and disabled auto adjust)</em>, the <code>TIME_ZONE_INFORMATION</code> struct shows a <strong>StandardName</strong> of <strong>Eastern Standard Time</strong>, but the <strong>DaylightName</strong> is set to <strong>Eastern Daylight Time</strong>, and the <strong>DaylightBias</strong> is equal to -60, and the return value is 0.</p>\n\n<p>Both machines are Windows 7 64bit OS.</p>\n\n<p>I've checked the registry where the auto dst adjust setting is stored and both machines have the same value.</p>\n\n<p>Is this possibly a side effect of a group policy setting? </p>\n\n<p>Any help would be appreciated. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c++11", "move"], "answers": [{"comments": [{"owner": {"reputation": 1819, "user_id": 2522849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fjZiO.jpg?s=128&g=1", "display_name": "DrumM", "link": "https://stackoverflow.com/users/2522849/drumm"}, "edited": false, "score": 0, "creation_date": 1558423980, "post_id": 40772383, "comment_id": 99085522, "body": "Why not using <code>const auto&amp;</code> for object return types (or what&#39;s the difference)? As in this case there is no need for RVO or the need for a copy/move constructor, as the lifetime of the object is extended."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 1819, "user_id": 2522849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fjZiO.jpg?s=128&g=1", "display_name": "DrumM", "link": "https://stackoverflow.com/users/2522849/drumm"}, "edited": false, "score": 0, "creation_date": 1558445201, "post_id": 40772383, "comment_id": 99097427, "body": "@DrumM: Maybe you want to modify the object that was returned."}, {"owner": {"reputation": 1819, "user_id": 2522849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fjZiO.jpg?s=128&g=1", "display_name": "DrumM", "link": "https://stackoverflow.com/users/2522849/drumm"}, "edited": false, "score": 0, "creation_date": 1558594585, "post_id": 40772383, "comment_id": 99154177, "body": "True. Most of the time you don&#39;t want that. But in any case, if you don&#39;t want to change the object. What do you prefer?"}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 5, "last_activity_date": 1479928058, "creation_date": 1479928058, "answer_id": 40772383, "question_id": 40772013, "link": "https://stackoverflow.com/questions/40772013/is-there-any-reason-to-capture-a-return-value-as-an-rvalue-reference/40772383#40772383", "title": "Is there any reason to capture a return-value as an rvalue-reference?", "body": "<blockquote>\n<pre><code>Foo lv1 = get();\n</code></pre>\n</blockquote>\n\n<p>This requires that <code>Foo</code> is copy/moveable.</p>\n\n<blockquote>\n<pre><code>Foo&amp;&amp; rv1 = get();\n</code></pre>\n</blockquote>\n\n<p>This does not (at least, not as far as this line of code is concerned; the implementation of <code>get</code> may still require one).</p>\n\n<p>Even though compilers are permitted to elide the copy of the return value into the variable, copy initialization of this form still requires the existence of an accessible copy or move constructor.</p>\n\n<p>So if you want to impose as few limitations on the type <code>Foo</code> as possible, you can store a <code>&amp;&amp;</code> of the returned value.</p>\n\n<p>Of course, C++17 changes this rule so that the first one doesn't need a copy/move constructor.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1479979971, "post_id": 40772780, "comment_id": 68787934, "body": "&quot; If it stores a reference to a temporary value, its lifetime extends the value.&quot; - only if the return value is a prvalue.  A pitfall would be if the function returns an xvalue denoting a temporary, e.g. <code>Foo&amp;&amp; f = std::move( std::string{} );</code>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1479987652, "post_id": 40772780, "comment_id": 68793476, "body": "@m.m. yes, that is hard to word right without devolving into standardese"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 4, "last_activity_date": 1479930169, "last_edit_date": 1479930169, "creation_date": 1479929617, "answer_id": 40772780, "question_id": 40772013, "link": "https://stackoverflow.com/questions/40772013/is-there-any-reason-to-capture-a-return-value-as-an-rvalue-reference/40772780#40772780", "title": "Is there any reason to capture a return-value as an rvalue-reference?", "body": "<pre><code>Foo&amp;&amp;\n</code></pre>\n\n<p>this creates a reference to a temporary value (or stores a rvalue reference assigned to it). If it stores a reference to a temporary value, its lifetime extends the value.</p>\n\n<pre><code>Foo\n</code></pre>\n\n<p>This stores a copy of the value, regardless of what was returned.</p>\n\n<p>In C++11 and 14, if <code>Foo</code> cannot be moved, assigning <code>Foo make_foo()</code> to a variable of type <code>Foo</code> is illegal.  There is a move there, even if the move is elided (and the return value and the value in the outer scope have merged lifetimes).</p>\n\n<p>In C++17, guaranteed elision means that no move constructor need exist.</p>\n\n<pre><code>Foo x = make_foo(); // Foo make_foo()\n</code></pre>\n\n<p>the above in C++17 guarantees that the return value of <code>make_foo()</code> is just named <code>x</code>.  In fact, a temporary <em>within</em> <code>make_foo</code> may also be <code>x</code>; the same object, with different names.  No move need occur.</p>\n\n<p>There are a few other subtle differences.  <code>decltype(x)</code> will return the declared type of <code>x</code>; so <code>Foo</code> or <code>Foo&amp;&amp;</code> depending.</p>\n\n<p>Another important difference is its use with <code>auto</code>.</p>\n\n<pre><code>auto&amp;&amp; x = some_function();\n</code></pre>\n\n<p>this creates a reference to anything.  If <code>some_function</code> returns a temporary, it binds an rvalue reference to it and extends its lifetime.  If it returns a reference, <code>x</code> matches the type of the reference.</p>\n\n<pre><code>auto x = some_function();\n</code></pre>\n\n<p>this creates a value, which may be copied from what <code>some_function</code> returns, or may be elided with the return value of <code>some_function</code> if it returns a temporary.</p>\n\n<p><code>auto&amp;&amp;</code> means, in a sense, \"just make it work, and don't do extra work\", and it could deduce to a <code>Foo&amp;&amp;</code>.  <code>auto</code> means \"store a copy\".</p>\n\n<p>In the \"almost always auto\" style, these will be more common than an explicit <code>Foo</code> or <code>Foo&amp;&amp;</code>.</p>\n\n<p><code>auto&amp;&amp;</code> will never deduce to <code>Foo</code>, but can deduce to <code>Foo&amp;&amp;</code>.</p>\n\n<p>The most common uses of <code>auto&amp;&amp;</code>, even outside of almost always auto, would be:</p>\n\n<pre><code>for(auto&amp;&amp; x : range)\n</code></pre>\n\n<p>where <code>x</code> becomes an efficient way to iterate over the range, where we don't care what type <code>range</code> has much.  Another common use is:</p>\n\n<pre><code>[](auto&amp;&amp; x){ /* some code */ }\n</code></pre>\n\n<p>lambdas are often used in contexts where the type is obvious and not worth typing again, like being passed to algorithms or the like.  By using <code>auto&amp;&amp;</code> for parameter types we make the code less verbose.</p>\n"}], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 2, "accepted_answer_id": 40772383, "answer_count": 2, "score": 5, "last_activity_date": 1479979413, "creation_date": 1479926491, "last_edit_date": 1479979413, "question_id": 40772013, "link": "https://stackoverflow.com/questions/40772013/is-there-any-reason-to-capture-a-return-value-as-an-rvalue-reference", "title": "Is there any reason to capture a return-value as an rvalue-reference?", "body": "<p>I have a move-only struct <code>Foo</code>, and a function <code>Foo get();</code></p>\n\n<p>If I want to capture the return value of <code>get</code> in a mutable manner, I have two options:</p>\n\n<ul>\n<li>by value (<code>Foo</code>)</li>\n<li>by rvalue-reference (<code>Foo&amp;&amp;</code>)</li>\n</ul>\n\n<p>When I capture by rvalue-reference I create an lvalue, much like capturing by value.</p>\n\n<p>I'm struggling to see the point between the different options?</p>\n\n<ul>\n<li>Is there <em>any</em> difference between these two?</li>\n</ul>\n\n<p><strong>Working example:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Foo\n{\n    Foo(std::string s) : s(std::move(s)) {}\n    Foo(Foo&amp;&amp; f)       : s(std::move(f.s)) {}\n\n    Foo(const Foo&amp;) = delete;\n    Foo&amp; operator=(const Foo&amp;) = delete;\n\n    std::string s;\n};\n\nFoo get()\n{\n    return Foo { \"hello\" };\n}\n\nint main()\n{\n    // capture return value as l-value\n    Foo lv1 = get();\n\n    // move into another lvalue\n    Foo lv2 = std::move(lv1);\n    std::cout &lt;&lt; lv2.s &lt;&lt; '\\n';\n\n    // capture return value as r-value reference\n    Foo&amp;&amp; rv1 = get();\n\n    // move into another lvalue\n    Foo lv3 = std::move(rv1);\n    std::cout &lt;&lt; lv3.s &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi", "enter"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1479926225, "post_id": 40771918, "comment_id": 68767732, "body": "Put the common code into a function, and call that function from both handlers?"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 2, "creation_date": 1479926484, "post_id": 40771918, "comment_id": 68767838, "body": "Related: <a href=\"http://stackoverflow.com/questions/11021817/how-can-i-create-a-button-with-default-behavior-in-win32\">How can I create a button with default behavior in win32</a>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1479927915, "post_id": 40771918, "comment_id": 68768583, "body": "Make the button be the default button and the dialog manager does it for you. Don&#39;t reinvent the wheel."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1479928298, "post_id": 40771918, "comment_id": 68768760, "body": "More broadly don&#39;t write your entire program in your window procedure. Abstract actions away into separate functions for ease of re-use."}], "owner": {"reputation": 1, "user_id": 7170172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RktazXUSYeg/AAAAAAAAAAI/AAAAAAAAANA/2U2xL9DPDQM/photo.jpg?sz=128", "display_name": "user7170172", "link": "https://stackoverflow.com/users/7170172/user7170172"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479928818, "creation_date": 1479926116, "last_edit_date": 1479928818, "question_id": 40771918, "link": "https://stackoverflow.com/questions/40771918/capture-enter-key-so-that-pressing-it-replaces-a-button-in-winapi32", "title": "Capture &quot;enter key&quot; so that pressing it replaces a &quot;Button&quot; in Winapi32", "body": "<p>I want to be able to access the procedure of an event in two ways: with a Button and pressing enter.\nI have the button code done:</p>\n\n<pre><code>        case BTN_1:\n            char CAD[50];\n            int N1, N2;\n            GetDlgItemText(hwndDlg, EDIT1, CAD, 50);\n            N1 =atoi(CAD); //Almacenando el contenido de CAD en N1 = int\n            N1 - '0';\n            base(N1, N2); //function\n            SetDlgItemText(hwndDlg, EDIT2, cad1);\n            return 0;\n</code></pre>\n\n<p>I know I have to put case WM_KEYDOWN, but how do I replace the key without having to rewrite all the code of the Button? or What would be the code to work with \"enter key\" in case WM_KEYDOWN?\nThanks in advance.</p>\n"}, {"tags": ["c++", "c++11", "timestamp"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1479927360, "post_id": 40771907, "comment_id": 68768302, "body": "Which operating system/toolchain are you targeting?"}, {"owner": {"reputation": 569, "user_id": 1956288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5bdaf8104d5d7616c80f0ef73e56cd33?s=128&d=identicon&r=PG", "display_name": "kunterbunt", "link": "https://stackoverflow.com/users/1956288/kunterbunt"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1479927589, "post_id": 40771907, "comment_id": 68768433, "body": "Linux (some Ubuntu variant), things are sent out using boost::asio. Whenever something is sent, the source will remember the timestamp it sent that packet. The sink will remember the timestamps of arrivals. Both are pinged periodically for this data."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1479933214, "post_id": 40771907, "comment_id": 68771237, "body": "Ignore leap seconds. If you detect that a leap second happened during or around a measurement, discard that measurement. Much easier than special cases to handle with an event that happens at most every six months."}, {"owner": {"reputation": 569, "user_id": 1956288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5bdaf8104d5d7616c80f0ef73e56cd33?s=128&d=identicon&r=PG", "display_name": "kunterbunt", "link": "https://stackoverflow.com/users/1956288/kunterbunt"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1480354605, "post_id": 40771907, "comment_id": 68917061, "body": "Fair enough. :)"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1479927064, "post_id": 40772133, "comment_id": 68768145, "body": "Good point about PTP. NTP&#39;s guarantees on time precision are pretty broad and not very useful if you want to time packets on a local network."}, {"owner": {"reputation": 569, "user_id": 1956288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5bdaf8104d5d7616c80f0ef73e56cd33?s=128&d=identicon&r=PG", "display_name": "kunterbunt", "link": "https://stackoverflow.com/users/1956288/kunterbunt"}, "edited": false, "score": 0, "creation_date": 1479927452, "post_id": 40772133, "comment_id": 68768355, "body": "This link (<a href=\"https://www.eecis.udel.edu/~mills/ntp/html/discipline.html\" rel=\"nofollow noreferrer\">eecis.udel.edu/~mills/ntp/html/discipline.html</a>) states that on a fast LAN, NTP can &quot;maintain synchronization nominally within one millisecond&quot;. That would be fine for me and is far more precise than seconds..."}, {"owner": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "edited": false, "score": 1, "creation_date": 1479927887, "post_id": 40772133, "comment_id": 68768573, "body": "Your question is mentioning measuring packet latency. On LAN the latency of UDP packets will be in the microsecond range. So I guessed you need a high precision, and these protocols were developed to achieve that."}, {"owner": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "edited": false, "score": 0, "creation_date": 1479928058, "post_id": 40772133, "comment_id": 68768647, "body": "And often not only the average time difference will be interesting but how much the clocks drift relative to each other. Some approaches will yield a much higher clock jitter than others, which would have a high impact on certain types of realtime applications. But of course I don&#39;t know whether that matters for your specific problem."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 569, "user_id": 1956288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5bdaf8104d5d7616c80f0ef73e56cd33?s=128&d=identicon&r=PG", "display_name": "kunterbunt", "link": "https://stackoverflow.com/users/1956288/kunterbunt"}, "edited": false, "score": 0, "creation_date": 1479932365, "post_id": 40772133, "comment_id": 68770824, "body": "@kunterbunt This question is pretty much answered, use <code>system_clock</code>, but the answer won&#39;t do you much good. You have two other problems: 1 High precision time capable of detecting propagation delay where the the propagation delay is likely to be microseconds. This is a difficult problem on PC hardware because as you get below ms resolution time gets increasingly dodgy. 2. Synchronizing multiple PCs and keeping them locked with precision to support problem 1."}, {"owner": {"reputation": 569, "user_id": 1956288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5bdaf8104d5d7616c80f0ef73e56cd33?s=128&d=identicon&r=PG", "display_name": "kunterbunt", "link": "https://stackoverflow.com/users/1956288/kunterbunt"}, "edited": false, "score": 0, "creation_date": 1480354544, "post_id": 40772133, "comment_id": 68917026, "body": "Thanks for your replies. I will be simulating other channel types on the machine that forwards the packets. The times I will be measuring will be in a range of milliseconds, and being off by some micro- or milliseconds is not critical for my problem."}], "tags": [], "owner": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "is_accepted": true, "score": 3, "last_activity_date": 1479926942, "creation_date": 1479926942, "answer_id": 40772133, "question_id": 40771907, "link": "https://stackoverflow.com/questions/40771907/reliably-compare-different-machines-timestamps-in-c/40772133#40772133", "title": "Reliably compare different machine&#39;s timestamps in C++", "body": "<p>The steady clock won't help you at all, since it's not the wall clock and it can by definition not be synchronized (it's steady, NTP can't change it). So your only option is the wall clock / system clock.</p>\n\n<p>However one of your problems will be that the time synchronization through NTP is not very exact. If you want to compare timestamps in the dimensions of seconds it might be ok. For everything else your clocks will often be too far off to deliver good results.</p>\n\n<p>There are dedicated protocols for synchronizing clocks between different machines, e.g. PTP and gPTP. Some of those will even require dedicated hardware (like Ethernet AVB capable hardware). If you need to precision then your first research should be how to integrate on of those into your system and how to read their timestamps.</p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 2, "last_activity_date": 1479927352, "last_edit_date": 1495540383, "creation_date": 1479926952, "answer_id": 40772135, "question_id": 40771907, "link": "https://stackoverflow.com/questions/40771907/reliably-compare-different-machines-timestamps-in-c/40772135#40772135", "title": "Reliably compare different machine&#39;s timestamps in C++", "body": "<ol>\n<li><p><code>high_resolution_clock</code> is almost always (if not always) either <code>steady_clock</code> or <code>system_clock</code>, so it could be a universal wall time or a machine-specific counter. You don't really know which you will get. A discussion worth reading: <a href=\"https://stackoverflow.com/a/38253266/4581301\">https://stackoverflow.com/a/38253266/4581301</a></p></li>\n<li><p><a href=\"http://en.cppreference.com/w/cpp/chrono/steady_clock\" rel=\"nofollow noreferrer\"><code>steady_clock</code> is not the clock for you.</a> There is no guaranteed correlation between <code>steady_clock</code>s on different machines.</p></li>\n</ol>\n\n<p>This leaves you with <code>system_clock</code> or an implementation-specific clock.</p>\n"}], "owner": {"reputation": 569, "user_id": 1956288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5bdaf8104d5d7616c80f0ef73e56cd33?s=128&d=identicon&r=PG", "display_name": "kunterbunt", "link": "https://stackoverflow.com/users/1956288/kunterbunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 0, "accepted_answer_id": 40772133, "answer_count": 2, "score": 1, "last_activity_date": 1479927352, "creation_date": 1479926073, "question_id": 40771907, "link": "https://stackoverflow.com/questions/40771907/reliably-compare-different-machines-timestamps-in-c", "title": "Reliably compare different machine&#39;s timestamps in C++", "body": "<p>I have three machines <code>A, B, C</code> connected via Ethernet. <code>A</code> will send UDP packets to <code>B</code> which will forward it to <code>C</code>. I want to reliably measure the propagation time. Assume that the three machines are time-sync'd using a local <code>NTP server</code>.</p>\n\n<p>What's the best way of generating a timestamp in <code>C++</code>? My current guess would be <code>chrono</code>. The way I understand it is that its <code>high_resolution_clock</code> is out of the question here because it can use things like a CPU register that is incremented on each operation. So this would vary wildly depending on when the machine was booted. Instead I will go with <code>steady_clock</code> that will use the synchronized system time but hopefully prevent me from getting into trouble with things like leap seconds which matter if I used <code>system_clock</code>.</p>\n\n<p>Am I right in these assumptions? Is there a better way of doing this?</p>\n"}, {"tags": ["c++", "arrays", "function"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1479926052, "post_id": 40771848, "comment_id": 68767647, "body": "What do they want you to put in <code>array[0]</code>? The choices are <code>2</code> and <code>5</code>."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1479926066, "post_id": 40771848, "comment_id": 68767658, "body": "You function is <code>swaparr(int, int)</code>, but you pass an array and an <code>int</code>. That doesn&#39;t match. Likewise for <code>return b;</code> - <code>b</code>isn&#39;t an int, but several <code>int</code>s."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479926163, "post_id": 40771848, "comment_id": 68767709, "body": "<i><code>int b[len];</code></i> Variable length arrays aren&#39;t valid c++."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1479926638, "post_id": 40771848, "comment_id": 68767911, "body": "In addition to what was already said, your function returns <code>int</code>, but you try to return array of <code>int</code>s from it. Even if you changed the signature of the function to allow for that, you would be returning an address of a local variable, which will be, destroyed after leaving the body of a function, and trying to use such a pointer would result in UB."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "edited": false, "score": 1, "creation_date": 1479926674, "post_id": 40771848, "comment_id": 68767927, "body": "@FrankPuffer How is <code>int b[len];</code> not a VLA?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "edited": false, "score": 1, "creation_date": 1479927007, "post_id": 40771848, "comment_id": 68768115, "body": "@FrankPuffer If it is not modified, it doesn&#39;t mean <code>constexpr</code>. For example, I am using compiler that doesn&#39;t support VLAs, and I am getting the error <code>expected constant expression</code> on the line of array declaration."}, {"owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479927199, "post_id": 40771848, "comment_id": 68768224, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Ok, removed my comments, still the array declaration should be valid in this context, at least it is supported by all compilers I know."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "edited": false, "score": 0, "creation_date": 1479927292, "post_id": 40771848, "comment_id": 68768267, "body": "@FrankPuffer A number of compilers support that as a standard extension (e.g. GCC does). But it&#39;s not valid, standard conform c++ code."}, {"owner": {"reputation": 11, "user_id": 7076722, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pWiCDQZi7fM/AAAAAAAAAAI/AAAAAAAAALg/286mKmiOxY0/photo.jpg?sz=128", "display_name": "Shubham Malviya", "link": "https://stackoverflow.com/users/7076722/shubham-malviya"}, "edited": false, "score": 0, "creation_date": 1479927937, "post_id": 40771848, "comment_id": 68768591, "body": "Hi, Thanks for helping. If I want to return an array from a c++ function then maybe I can return a pointer to an array by specifying function as int *swaparr(int len, int *arr[]), but then my return b  will give address of array b. What solution do you guys suggest. Please help. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7076722, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pWiCDQZi7fM/AAAAAAAAAAI/AAAAAAAAALg/286mKmiOxY0/photo.jpg?sz=128", "display_name": "Shubham Malviya", "link": "https://stackoverflow.com/users/7076722/shubham-malviya"}, "edited": false, "score": 0, "creation_date": 1479935408, "post_id": 40773549, "comment_id": 68772232, "body": "Thank you so much sir for your efforts. Your code helps me to understand what mistake I was doing."}], "tags": [], "owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "is_accepted": false, "score": 0, "last_activity_date": 1479932571, "creation_date": 1479932571, "answer_id": 40773549, "question_id": 40771848, "link": "https://stackoverflow.com/questions/40771848/swaping-array-value-with-array-index/40773549#40773549", "title": "swaping array value with array index", "body": "<ol>\n<li>Returning the address of any local variable is very dangerous. (For\nexample, returning the address of the first element of array b,\nwhich you were trying to do)</li>\n<li>Array are different from pointer, though an implicit conversion may\nbe performed when you are trying assigning an array to a pointer (or\ninitializing a pointer with an array). In fact, the pointer will\nstore the address of the first element of the array, and the length\nof the array is lost during the conversion.</li>\n<li>You can't copy construct an array with another array (something like\nint arr[10] = foo(), where foo will return an array type, not\npossible either). Or assign an array to another. But you can return\na reference to an array, which is another story.</li>\n<li>You better learn those knowledge from books, instead of reading an\nanswer written by someone who are not good at English.</li>\n</ol>\n\n<p>I have corrected your code with as less changes as possible.</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;iostream&gt;\nusing namespace std;\n\nvoid swaparr(int *arr, int len, int *output){\n    int k;\n    for(int i=0; i&lt;len; i++){\n        k=arr[i];\n        output[k]=i;\n    }\n}\n\nint main()\n{\n    int arr[6]={4, 3, 0, 5, 1, 2};\n    int swapped[6]={0};\n\n    swaparr(arr,6,swapped);\n    for (int i=0; i&lt;6; ++i)\n      cout &lt;&lt; swapped[i] &lt;&lt; \" \";\n    cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<ol>\n<li>Instead of returning an array or an address, I prepare an array in\nfunction main, and pass it to function swaparr, and swaparr will\nwrite the result to this array.</li>\n<li>One can't simply asks std::cout to print an array, you must print\nit one element after another.</li>\n<li>When you have done printing, don't forget print an endl. (always)</li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 7076722, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pWiCDQZi7fM/AAAAAAAAAAI/AAAAAAAAALg/286mKmiOxY0/photo.jpg?sz=128", "display_name": "Shubham Malviya", "link": "https://stackoverflow.com/users/7076722/shubham-malviya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 655, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1479932571, "creation_date": 1479925887, "last_edit_date": 1479927483, "question_id": 40771848, "link": "https://stackoverflow.com/questions/40771848/swaping-array-value-with-array-index", "title": "swaping array value with array index", "body": "<p>I am a first-year student and new to programming. I was asked to write a function that can swap an array value with its index.\nE.G if array : [4, 3, 0, 5, 1, 2] then O/P: array[4]=0, array[3]= 1 and so on..</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;iostream&gt;\nusing namespace std;\n\nint swaparr(int arr, int len){\n    int b[len];\n    int k;\n    for(int i=0; i&lt;len; i++){\n        k=arr[i];\n        b[k]=i;\n    }\n    return b;\n}\nint main()\n{\n    int arr[6]={4, 3, 0, 5, 1, 2};\n    cout&lt;&lt;swaparr(arr, 6);\n    return 0;\n}\n</code></pre>\n\n<p>I am getting errors:</p>\n\n<pre><code>prog.cpp: In function 'int* swaparr(int, int)':\nprog.cpp:9:16: error: invalid types 'int[int]' for array subscript\n         k=arr[i];\n                ^\nprog.cpp:6:9: warning: address of local variable 'b' returned [-Wreturn-local-addr]\n     int b[len];\n         ^\nprog.cpp: In function 'int main()':\nprog.cpp:17:25: error: invalid conversion from 'int*' to 'int' [-fpermissive]\n     cout&lt;&lt;swaparr(arr, 6);\n                         ^\nprog.cpp:5:6: note: initializing argument 1 of 'int* swaparr(int, int)'\n int *swaparr(int arr, int len){\n      ^\n</code></pre>\n\n<p>Please explain me the errors.\nP.S I want to learn from the errors, so please suggest me what basics I am missing.</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1479926028, "post_id": 40771842, "comment_id": 68767630, "body": "Probably you want constructor that takes <code>int</code> as a parameter."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1479926064, "post_id": 40771842, "comment_id": 68767656, "body": "It sounds like you should really be <a href=\"http://en.cppreference.com/w/cpp/language/value_initialization\" rel=\"nofollow noreferrer\">value-initializing</a> the variable instead of setting it to zero. (Also, <code>T data = 0;</code> tries to construct <code>data</code> from <code>0</code> instead of assigning <code>0</code> to <code>data</code>. It&#39;s confusing.)"}, {"owner": {"reputation": 4370, "user_id": 379572, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/da446e0e8ec2bc947b163b8ef7e478be?s=128&d=identicon&r=PG", "display_name": "Azmisov", "link": "https://stackoverflow.com/users/379572/azmisov"}, "edited": false, "score": 0, "creation_date": 1479926497, "post_id": 40771842, "comment_id": 68767849, "body": "Hmmm, okay, I didn&#39;t realize the constructor syntax worked for primitives."}], "answers": [{"tags": [], "owner": {"reputation": 848, "user_id": 1633984, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f200b149ac393059f1d71ddb770e54b9?s=128&d=identicon&r=PG", "display_name": "vehsakul", "link": "https://stackoverflow.com/users/1633984/vehsakul"}, "is_accepted": true, "score": 2, "last_activity_date": 1479929087, "creation_date": 1479929087, "answer_id": 40772624, "question_id": 40771842, "link": "https://stackoverflow.com/questions/40771842/allow-class-to-be-assigned-as-zero/40772624#40772624", "title": "Allow class to be assigned as zero", "body": "<p>The problem with your code is that <code>T data = 0;</code> actually calls a constructor, not <code>operator=</code>. So in order your code to work, you need to declare a constructor accepting an <code>int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 0, "last_activity_date": 1480710273, "last_edit_date": 1480710273, "creation_date": 1479935836, "answer_id": 40774296, "question_id": 40771842, "link": "https://stackoverflow.com/questions/40771842/allow-class-to-be-assigned-as-zero/40774296#40774296", "title": "Allow class to be assigned as zero", "body": "<p>You should note make your classes assignable to <code>0</code>. You should use brace initialization:</p>\n\n<pre><code>template &lt;class T&gt; T test(){\n    T data{};\n    return data;\n}\n</code></pre>\n\n<p>It will construct any default constructible types correctly and will zero initialize built-in types such as <code>double</code> or <code>int</code>.</p>\n"}], "owner": {"reputation": 4370, "user_id": 379572, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/da446e0e8ec2bc947b163b8ef7e478be?s=128&d=identicon&r=PG", "display_name": "Azmisov", "link": "https://stackoverflow.com/users/379572/azmisov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 40772624, "answer_count": 2, "score": 4, "last_activity_date": 1480710273, "creation_date": 1479925869, "last_edit_date": 1479926314, "question_id": 40771842, "link": "https://stackoverflow.com/questions/40771842/allow-class-to-be-assigned-as-zero", "title": "Allow class to be assigned as zero", "body": "<p>I'm writing a template function, and I want to initialize a template variable to zero. I was thinking of setting the variable equal to zero, and then let the class type define its own definition of \"zero\":</p>\n\n<pre><code>T data = 0;\n</code></pre>\n\n<p>I tried overloading the assignment operator:</p>\n\n<pre><code>class Example{\npublic:\n    int data;\n    Example(){}\n    Example&amp; operator=(int v){\n        data = v;\n        return *this;\n    }\n};\n\ntemplate &lt;class T&gt; T test(){\n    T data = 0;\n    return data;\n}\n\nint main(int argc, char** argv){\n    double v1 = test&lt;double&gt;();\n    Example v2 = test&lt;Example&gt;();\n    return 1;\n}\n</code></pre>\n\n<p>... but the compiler gives me \"error: conversion from 'int' to nonscalar type...\". How can I make this work? or is there a better way of doing what I'm trying to do?</p>\n"}, {"tags": ["c++", "vector", "data-structures"], "comments": [{"owner": {"reputation": 495, "user_id": 6770027, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZOOf4wwDA4E/AAAAAAAAAAI/AAAAAAAAAHQ/aYLr1lm7f1A/photo.jpg?sz=128", "display_name": "GIRISH kuniyal", "link": "https://stackoverflow.com/users/6770027/girish-kuniyal"}, "reply_to_user": {"reputation": 5486, "user_id": 4763963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9de2F.jpg?s=128&g=1", "display_name": "Mo Abdul-Hameed", "link": "https://stackoverflow.com/users/4763963/mo-abdul-hameed"}, "edited": false, "score": 0, "creation_date": 1479925261, "post_id": 40771590, "comment_id": 68767217, "body": "But i think this is partial answer of my question .because why capacity of vector a and b become different on same PC and same compiler."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1479925548, "post_id": 40771590, "comment_id": 68767374, "body": "@GIRISHkuniyal Why the became different? Initialization is different."}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1479925749, "post_id": 40771590, "comment_id": 68767471, "body": "@GIRISHkuniyal In the first case, the vector knows how many elements you want inserted total. It could be that you never insert elements again (ex: if you had declared <code>a</code> as <code>const</code>), so no need to allocate extra elements. In the second case, each <code>push_back</code> calls assumes more calls are to come, so the vector is conservative and allocates more just in case."}], "answers": [{"tags": [], "owner": {"reputation": 521, "user_id": 5976143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21633accbe046f734311ad6fd0e69f86?s=128&d=identicon&r=PG&f=1", "display_name": "Eliran Abdoo", "link": "https://stackoverflow.com/users/5976143/eliran-abdoo"}, "is_accepted": true, "score": 3, "last_activity_date": 1479925483, "creation_date": 1479925483, "answer_id": 40771738, "question_id": 40771590, "link": "https://stackoverflow.com/questions/40771590/why-vector-has-different-capacity-and-other-than-the-size/40771738#40771738", "title": "Why vector has different capacity and other than the size?", "body": "<p>The reason is related to the very essence of the extension algorithm of the vector. \nWhen initializing a vector, the number of extra capacity applied is 0. \nIn the i-th time an extension is needed, the vector copies its contain to a new vector, with capacity doubled then its current size. \nThis method makes the whole idea of size-changing array very efficient, since in amortized time (meaning the average time over N operations), we get O(1) insertion complexity.\nYou can see that after we add one more integer to the first vector, we get a capacity of 6. <a href=\"http://coliru.stacked-crooked.com/a/f084820652f025b8\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/f084820652f025b8</a></p>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1479925850, "creation_date": 1479925850, "answer_id": 40771836, "question_id": 40771590, "link": "https://stackoverflow.com/questions/40771590/why-vector-has-different-capacity-and-other-than-the-size/40771836#40771836", "title": "Why vector has different capacity and other than the size?", "body": "<p>By allocating more elements than needed, the vector does not need to reallocate memory when new elements are added to the vector.   Also, when reducing the size, reallocation is not needed at all.</p>\n\n<p>Reallocation of memory is a relatively expensive operation (creating new block, copying elements across, removing old block).</p>\n\n<p>The trade-off is that the vector may have allocated more memory than it will need (e.g. if it allocates memory for elements that never get added/used).  Practically, unless available memory is scarce, the cost of allocating a larger block (and reallocating less often) is less than the cost or reallocating every time.</p>\n"}], "owner": {"reputation": 495, "user_id": 6770027, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZOOf4wwDA4E/AAAAAAAAAAI/AAAAAAAAAHQ/aYLr1lm7f1A/photo.jpg?sz=128", "display_name": "GIRISH kuniyal", "link": "https://stackoverflow.com/users/6770027/girish-kuniyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "closed_date": 1479930860, "accepted_answer_id": 40771738, "answer_count": 2, "score": 3, "last_activity_date": 1479925850, "creation_date": 1479924936, "last_edit_date": 1479925410, "question_id": 40771590, "link": "https://stackoverflow.com/questions/40771590/why-vector-has-different-capacity-and-other-than-the-size", "closed_reason": "Duplicate", "title": "Why vector has different capacity and other than the size?", "body": "<p>Below are program of vector and gives different result for capacity in c++11 mode.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\nusing namespace std;\n\nint main(){\nvector&lt;int&gt;a ={1,2,3};\ncout&lt;&lt;\"vector a size :\"&lt;&lt;a.size()&lt;&lt;endl;\ncout&lt;&lt;\"vector a capacity :\"&lt;&lt;a.capacity()&lt;&lt;endl&lt;&lt;endl;;\n\nvector&lt;int&gt;b ;\nb.push_back(1);\nb.push_back(2);\nb.push_back(3);\ncout&lt;&lt;\"vector b size :\"&lt;&lt;b.size()&lt;&lt;endl;\ncout&lt;&lt;\"vector b capacity :\"&lt;&lt;b.capacity()&lt;&lt;endl;\nreturn 0;\n}\n</code></pre>\n\n<p><strong>OUTPUT</strong><br>\nvector a size :3<br>\nvector a capacity:3<br><br>\nvector b size :3<br>\nvector b capacity :4<br></p>\n\n<p>Why this program gives different values for capacity of a and b while both have same number of values and how size is different from capacity?</p>\n"}, {"tags": ["c++", "c++11", "boost", "boost-asio"], "answers": [{"comments": [{"owner": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 0, "creation_date": 1479929821, "post_id": 40772613, "comment_id": 68769512, "body": "Did you change something? I think that more or less we are using the same code."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 1, "creation_date": 1479930236, "post_id": 40772613, "comment_id": 68769690, "body": "Nothing except the header parsing I guess. Also, I am using the standalone version of the asio, hopefully that shouldn&#39;t be making any difference."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 0, "creation_date": 1479930489, "post_id": 40772613, "comment_id": 68769836, "body": "@cateof If you can provide a complete example like above, then probably it would be easier to figure out."}, {"owner": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 0, "creation_date": 1479931491, "post_id": 40772613, "comment_id": 68770350, "body": "I see a Transfer-Encoding: chunked in the response header? Could it be something to consider?"}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 1, "creation_date": 1479932416, "post_id": 40772613, "comment_id": 68770842, "body": "No, I don&#39;t think so. Can you put the response that you are sending in the question ?"}, {"owner": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 0, "creation_date": 1479932589, "post_id": 40772613, "comment_id": 68770934, "body": "the code works when the transfer type &quot;chuncked&quot; is missing."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "reply_to_user": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 1, "creation_date": 1479966083, "post_id": 40772613, "comment_id": 68780932, "body": "@cateof Sorry, I did not get you. The code is not supposed to do any validation as such."}], "tags": [], "owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "is_accepted": true, "score": 1, "last_activity_date": 1479929052, "creation_date": 1479929052, "answer_id": 40772613, "question_id": 40771421, "link": "https://stackoverflow.com/questions/40771421/boostasio-problems-when-trying-to-get-the-streambuf-response-as-string/40772613#40772613", "title": "boost::asio problems when trying to get the streambuf response as string", "body": "<p>I reworked on your example and it works fine for me. Note that I have made few shortcuts for reading the response. I am reading the status line and the header in one shot instead of reading separately (purely out of laziness)</p>\n\n<pre><code>#include &lt;asio.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;istream&gt;\n\nint main(int argc, const char * argv[]) {\n\n    static asio::io_service ios;\n    asio::ip::tcp::endpoint\n    endpoint(asio::ip::address::from_string(\"127.0.0.1\"), 8000);\n    asio::generic::stream_protocol::socket socket{ios};\n    socket.connect(endpoint);\n\n    std::string req = \"GET /api\\n\\r\\n\\r\\n\";\n    std::error_code ec;\n    socket.write_some(asio::buffer(req, req.size()), ec);\n    std::cout &lt;&lt; \"Request sent\" &lt;&lt; std::endl;\n\n    if (ec == asio::error::eof) {\n      std::cerr &lt;&lt; \"Premature termination\\n\";\n      return 1;\n    }\n    //while (true) {\n    {\n          asio::streambuf response;\n          // Get till all the headers\n          asio::read_until(socket, response, \"\\r\\n\\r\\n\");\n\n          // Check that response is OK. \n          std::istream response_stream(&amp;response);\n          std::string http_version;\n          response_stream &gt;&gt; http_version;\n          std::cout &lt;&lt; \"V : \" &lt;&lt; http_version &lt;&lt; std::endl;\n\n          unsigned int status_code;\n          response_stream &gt;&gt; status_code;\n\n          std::string status_message;\n          std::getline(response_stream, status_message);\n\n          if (!response_stream || http_version.substr(0, 5) != \"HTTP/\") {\n            std::cerr &lt;&lt; \"invalid response\";\n            return -1; \n          }\n\n          if (status_code != 200) {\n            std::cerr &lt;&lt; \"response did not returned 200 but \" &lt;&lt; status_code;\n            return -1; \n          }\n\n          //read the headers.\n          std::string header;\n          while (std::getline(response_stream, header) &amp;&amp; header != \"\\r\") {\n            std::cout &lt;&lt; \"H: \" &lt;&lt; header &lt;&lt; std::endl;\n          }\n\n          std::ostringstream ostringstream_content;\n          if (response.size() &gt; 0) {\n            ostringstream_content &lt;&lt; &amp;response;\n          }\n\n          std::error_code error;\n          while (true) {\n            size_t n = asio::read(socket, response, asio::transfer_at_least(1), error);\n            if (!error) {\n                if (n) {\n                  ostringstream_content &lt;&lt; &amp;response;\n                }\n            } \n\n            if (error == asio::error::eof) {\n                break;\n            }\n            if (error) {\n                return -1; //throw boost::system::system_error(error);\n            }\n          }\n          auto str_response = ostringstream_content.str();\n          std::cout &lt;&lt; str_response &lt;&lt; std::endl;\n    }\n\n    //}\n\n    return 0;\n}\n</code></pre>\n\n<p>And my python server for test:</p>\n\n<pre><code>Python 2.7.10 (default, Jul 14 2015, 19:46:27)\n[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.39)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import socket as s\n&gt;&gt;&gt; sd = s.socket(s.AF_INET, s.SOCK_STREAM)\n&gt;&gt;&gt; sd.bind((\"127.0.0.1\", 8000))\n&gt;&gt;&gt; sd.listen(1)\n&gt;&gt;&gt; c, a = sd.accept()\n&gt;&gt;&gt; resp = \"HTTP/1.1 200 OK\\nDate: Fri, 31 Dec 1999 23:59:59 GMT\\nContent-Type: text/plain\\nTransfer-Encoding: chunked\\n\\r\\n\\r\\n{\\\"token\\\":\\\"eyJhbGciOiJSUzI1NiJ9.eyJleHAiOjE0Nzk5Mjk2NjcsIn...030\\\"}\"\n&gt;&gt;&gt; c.send(resp)\n173\n&gt;&gt;&gt; exit()\n</code></pre>\n\n<p>ASIO output:</p>\n\n<pre><code>MacBook-Pro:asio_test amuralid$ ./json_read_so\nRequest sent\nV : HTTP/1.1\nH: Date: Fri, 31 Dec 1999 23:59:59 GMT\nH: Content-Type: text/plain\nH: Transfer-Encoding: chunked\n\n{\"token\":\"eyJhbGciOiJSUzI1NiJ9.eyJleHAiOjE0Nzk5Mjk2NjcsIn...030\"}\n</code></pre>\n"}], "owner": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 0, "accepted_answer_id": 40772613, "answer_count": 1, "score": 0, "last_activity_date": 1479929234, "creation_date": 1479924310, "last_edit_date": 1479929234, "question_id": 40771421, "link": "https://stackoverflow.com/questions/40771421/boostasio-problems-when-trying-to-get-the-streambuf-response-as-string", "title": "boost::asio problems when trying to get the streambuf response as string", "body": "<p>I use the basic example from boost::asio to connect to an enpoint and get back a json reponse. Here is the code</p>\n\n<pre><code>boost::asio::streambuf response;\nboost::asio::read_until(socket_, response, \"\\r\\n\");\n\n// Check that response is OK. \nstd::istream response_stream(&amp;response);\nstd::string http_version;\nresponse_stream &gt;&gt; http_version;\nunsigned int status_code;\nresponse_stream &gt;&gt; status_code;\nstd::string status_message;\nstd::getline(response_stream, status_message);\nif (!response_stream || http_version.substr(0, 5) != \"HTTP/\") {\n        LOG_ERROR &lt;&lt; \"invalid response\";\n        return -1; \n}\n\nresp_status_code_ = status_code;\n\nresp_status_code_ = status_code;\n\nif (status_code != 200) {\n        LOG_ERROR &lt;&lt; \"response did not returned 200 but \" &lt;&lt; status_code;\n        return -1; \n}\n\n//read until the response headers termination \nboost::asio::read_until(socket_, response, \"\\r\\n\\r\\n\");\n\n//read the headers.\nstd::string header;\nwhile (std::getline(response_stream, header) &amp;&amp; header != \"\\r\") {\n         ;\n}\n\nstd::ostringstream ostringstream_content;\nif (response.size() &gt; 0)\n        ostringstream_content &lt;&lt; &amp;response;\n\nboost::system::error_code error;\n\nboost::system::error_code error;\nwhile (true) {\n        size_t n = boost::asio::read(socket_, response, boost::asio::transfer_at_least(1), error);\n\n        if (!error)\n        {\n                if (n)\n                        ostringstream_content &lt;&lt; &amp;response;\n        }\n\n        if (error == boost::asio::error::eof)\n                break;\n\n        if (error)\n                return -1; //throw boost::system::system_error(error);\n}\n\nstr_response_ = ostringstream_content.str();\n</code></pre>\n\n<p>However when the string returns back I am reading this</p>\n\n<pre><code>  1 [5a0\n  2 {\"a_token\":\"eyJhbGciOiJSUzI1NiJ9.eyJleHAiOjE0Nzk5Mjk2NjcsIn...030\"}\n  3 0\n  4 \n  5 ]\n</code></pre>\n\n<p>The [ and ] are marks from my code to debug the begin and end of data correspondingly. I have more than one lines, 3 problematic characters at the first line, ie 5a0, the json string in the second line which is correct and then\na zero and a blank line. How can I get exactly the json string only?</p>\n"}, {"tags": ["c++", "clang", "abstract-syntax-tree"], "comments": [{"owner": {"reputation": 2454, "user_id": 1234026, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8c46542143ac94201452856030828015?s=128&d=identicon&r=PG", "display_name": "Necto", "link": "https://stackoverflow.com/users/1234026/necto"}, "edited": false, "score": 0, "creation_date": 1606300414, "post_id": 40771314, "comment_id": 114920776, "body": "Perhaps functionTemplateDecl could work here. you can check it out here: <a href=\"https://clang.llvm.org/docs/LibASTMatchersReference.html\" rel=\"nofollow noreferrer\">clang.llvm.org/docs/LibASTMatchersReference.html</a>"}], "owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1479923862, "creation_date": 1479923862, "question_id": 40771314, "link": "https://stackoverflow.com/questions/40771314/can-i-generate-clang-ast-matchers-from-template-arguments", "title": "Can I generate Clang AST matchers from template arguments?", "body": "<p>I am trying to use Clang AST matchers to find function decls based on a name and template arguments. </p>\n\n<p>The signature of my method should look a bit like this: </p>\n\n<pre><code>getFunctionDecl&lt;T&gt;(std::string name) {\n  // return the function with name \"name\" and signature T... \n}\n</code></pre>\n\n<p>So to find <code>int foo()</code>, the usage would be <code>getFunctionDecl&lt;int()&gt;(\"foo\")</code>. </p>\n\n<p>I know how to get functions by <code>name</code>: </p>\n\n<pre><code> match functionDecl(hasName(name))\n</code></pre>\n\n<p>But I don't know what the best way to match the signature <code>T</code> is. </p>\n\n<p>Is there a matcher like <code>hasSignature</code>? </p>\n\n<pre><code> match functionDecl(allOf(hasName(name), hasSignature&lt;T&gt;()))\n</code></pre>\n\n<p>I could create <code>ParmVarDecl</code> objects myself, but I would like to avoid re-inventing the wheel if possible. There is also quite a bit of complexity here due to weird signatures like <code>const std::unique_ptr&lt;const int*&gt;&amp;</code>, so I would prefer a well-tested solution. </p>\n"}, {"tags": ["c++", "algorithm", "sorting"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1479923247, "post_id": 40771108, "comment_id": 68766023, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1479923297, "post_id": 40771108, "comment_id": 68766053, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1479923319, "post_id": 40771108, "comment_id": 68766065, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/sizeof\" rel=\"nofollow noreferrer\">sizeof</a> does not do what you think it does."}, {"owner": {"reputation": 31, "user_id": 6106321, "user_type": "registered", "profile_image": "https://graph.facebook.com/987558197994293/picture?type=large", "display_name": "Marco Atef", "link": "https://stackoverflow.com/users/6106321/marco-atef"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1479923446, "post_id": 40771108, "comment_id": 68766132, "body": "@AlgirdasPreid\u017eius I updated it, but i still get random numbers then sorted numbers at the end."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479923591, "post_id": 40771108, "comment_id": 68766235, "body": "@MarcoAtef What did you update? <code>sizeof(outputArray)</code> yields you the size of a pointer variable (probably 8 bytes)."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1479923611, "post_id": 40771108, "comment_id": 68766245, "body": "@MarcoAtef Did you read the link that I gave you, about what <code>sizeof</code> actually does? It <b>does not</b> give you the size of the array. In addition to that, did you try using the debugger, as suggested?"}, {"owner": {"reputation": 31, "user_id": 6106321, "user_type": "registered", "profile_image": "https://graph.facebook.com/987558197994293/picture?type=large", "display_name": "Marco Atef", "link": "https://stackoverflow.com/users/6106321/marco-atef"}, "edited": false, "score": 0, "creation_date": 1479923649, "post_id": 40771108, "comment_id": 68766267, "body": "Yeah i changed it to c &lt; n1+n2 which are the sizes of both arrays."}, {"owner": {"reputation": 31, "user_id": 6106321, "user_type": "registered", "profile_image": "https://graph.facebook.com/987558197994293/picture?type=large", "display_name": "Marco Atef", "link": "https://stackoverflow.com/users/6106321/marco-atef"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1479923710, "post_id": 40771108, "comment_id": 68766312, "body": "@AlgirdasPreid\u017eius The debugger crashes, i don&#39;t really know why."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1479923717, "post_id": 40771108, "comment_id": 68766315, "body": "@MarcoAtef Once again, where? I can&#39;t see your update on the question."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1479923831, "post_id": 40771108, "comment_id": 68766388, "body": "@MarcoAtef I refuse to believe that the debugger itself crashes. Maybe the memory is lied out in different way, when debugger is attached, which, couple with (probable) UB present in your code, may force <b>your</b> program to crash, not debugger."}, {"owner": {"reputation": 31, "user_id": 6106321, "user_type": "registered", "profile_image": "https://graph.facebook.com/987558197994293/picture?type=large", "display_name": "Marco Atef", "link": "https://stackoverflow.com/users/6106321/marco-atef"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1479923834, "post_id": 40771108, "comment_id": 68766390, "body": "@AlgirdasPreid\u017eius Sorry, done."}, {"owner": {"reputation": 31, "user_id": 6106321, "user_type": "registered", "profile_image": "https://graph.facebook.com/987558197994293/picture?type=large", "display_name": "Marco Atef", "link": "https://stackoverflow.com/users/6106321/marco-atef"}, "edited": false, "score": 0, "creation_date": 1479924061, "post_id": 40771108, "comment_id": 68766526, "body": "I also updated the output that i get, it&#39;s sorted at the end of it but i don&#39;t know why it prints 1 , 7 for example."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1479924549, "post_id": 40771108, "comment_id": 68766802, "body": "@MarcoAtef Once again - use debugger (and fix, very obvious, memory leaks present in your code)."}, {"owner": {"reputation": 536, "user_id": 430705, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/46d988d78b6112ea4e2e751fe4e35ec0?s=128&d=identicon&r=PG", "display_name": "STF", "link": "https://stackoverflow.com/users/430705/stf"}, "edited": false, "score": 0, "creation_date": 1479928114, "post_id": 40771108, "comment_id": 68768676, "body": "<a href=\"http://stackoverflow.com/questions/12030683/implementing-merge-sort-in-c\" title=\"implementing merge sort in c\">stackoverflow.com/questions/12030683/&hellip;</a>"}, {"owner": {"reputation": 63, "user_id": 5484698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--weG5UAmsu8/AAAAAAAAAAI/AAAAAAAAAsg/MLSag7Fqo1g/photo.jpg?sz=128", "display_name": "Andrea Gilmozzi", "link": "https://stackoverflow.com/users/5484698/andrea-gilmozzi"}, "edited": false, "score": 1, "creation_date": 1479932678, "post_id": 40771108, "comment_id": 68770977, "body": "not really related to your problem, but I feel like it could help. This looks like plain C with couts instead of printf. you might want to use <code>std::vector</code> and be safe about some problem you are having there. or just spend some more time messing around with arrays and memory! good luck"}], "answers": [{"tags": [], "owner": {"reputation": 6058, "user_id": 1952500, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd15d38fd1e508e6c2bcad9e153e789d?s=128&d=identicon&r=PG", "display_name": "user1952500", "link": "https://stackoverflow.com/users/1952500/user1952500"}, "is_accepted": false, "score": 0, "last_activity_date": 1479933692, "creation_date": 1479933692, "answer_id": 40773810, "question_id": 40771108, "link": "https://stackoverflow.com/questions/40771108/merge-sort-algorithm-in-c/40773810#40773810", "title": "merge sort algorithm in C++", "body": "<p>The code is correct overall with a simple error. You are printing the output in one of the recursive steps and hence are getting the intermediate results mixed with the answer.</p>\n\n<p>Removing the <code>cout</code> in the <code>merge</code> function and moving it out to a <code>main</code> function will do the trick:</p>\n\n<pre><code>void merge(int outputArray[], int firstArray[], int n1, int secondArray[], int n2) {\n    int k = 0;\n    int i = 0;\n    int j = 0;\n    while (i &lt; n1 &amp;&amp; j &lt; n2) {\n        if (firstArray[i] &lt; secondArray[j])\n            outputArray[k++] = firstArray[i++];\n        else\n            outputArray[k++] = secondArray[j++];\n    }   \n\n    while (i &lt; n1) \n        outputArray[k++] = firstArray[i++];\n    while (j &lt; n2) \n        outputArray[k++] = secondArray[j++];\n\n}\n\nint main(int argc, char *argv[]) {\n\n    int a[] = {1, 4, 7}; \n    int n = sizeof(a) / sizeof(int);\n    split(a, n); \n\n    cout &lt;&lt; \"The array is:\\n\";\n    for (int i = 0; i &lt; n; i++) {\n        cout &lt;&lt; a[i] &lt;&lt; \" \";\n    }   \n    cout &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>The array is:\n1 4 7 \n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6106321, "user_type": "registered", "profile_image": "https://graph.facebook.com/987558197994293/picture?type=large", "display_name": "Marco Atef", "link": "https://stackoverflow.com/users/6106321/marco-atef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 529, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1479933692, "creation_date": 1479923110, "last_edit_date": 1479927132, "question_id": 40771108, "link": "https://stackoverflow.com/questions/40771108/merge-sort-algorithm-in-c", "title": "merge sort algorithm in C++", "body": "<p>I'm trying to write a C++ program that sorts a user input array using the merge algorithm.</p>\n\n<p>Here's the split function:</p>\n\n<pre><code>void split(int numbers[], int size) {\n    if (size == 1)\n        return;\n\n    int mid = size / 2;\n    int firstPartSize = mid;\n    int secondPartSize = size - mid;\n\n    int *firstArray;\n    firstArray = new int[firstPartSize];\n\n    int *secondArray;\n    secondArray = new int[secondPartSize];\n\n    for (int i = 0; i &lt; size; i++) {\n        if (i &lt; mid)\n            firstArray[i] = numbers[i];\n        else\n            secondArray[i - mid] = numbers[i];\n    }\n\n    split(firstArray, firstPartSize);\n    split(secondArray, secondPartSize);\n    merge(numbers, firstArray, firstPartSize, secondArray, secondPartSize);\n}\n</code></pre>\n\n<p>Here's the merging function:</p>\n\n<pre><code>void merge(int outputArray[], int firstArray[], int n1, int secondArray[], int n2) {\n    int k = 0;\n    int i = 0;\n    int j = 0;\n    while (i &lt; n1 &amp;&amp; j &lt; n2) {\n        if (firstArray[i] &lt; secondArray[j])\n            outputArray[k++] = firstArray[i++];\n        else\n            outputArray[k++] = secondArray[j++];\n    }\n\n    while (i &lt; n1)\n        outputArray[k++] = firstArray[i++];\n    while (j &lt; n2)\n        outputArray[k++] = secondArray[j++];\n\n    for (int c = 0; c &lt; n1+n2; c++)\n    {\n        cout &lt;&lt; outputArray[c] &lt;&lt; \" \";\n    }\n}\n</code></pre>\n\n<p>When I try to insert an array, here's what I get</p>\n\n<pre><code>Enter the size of the array you want to sort:\n3\nEnter the elements of the array:\n4\n7\n1\n1 7 1 4 7 Press any key to continue\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["c++", "llvm", "llvm-ir"], "comments": [{"owner": {"reputation": 6563, "user_id": 100214, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/db8155dcba940d81cd7a298b4ae99c7c?s=128&d=identicon&r=PG", "display_name": "Frank C.", "link": "https://stackoverflow.com/users/100214/frank-c"}, "edited": false, "score": 0, "creation_date": 1479939581, "post_id": 40771022, "comment_id": 68773998, "body": "When you&#39;ve said you&#39;ve tried using getelementptr with no luck, what do you mean? What does the generated LLVM IR look like?"}, {"owner": {"reputation": 168, "user_id": 5390271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WZIog.jpg?s=128&g=1", "display_name": "caa515", "link": "https://stackoverflow.com/users/5390271/caa515"}, "reply_to_user": {"reputation": 6563, "user_id": 100214, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/db8155dcba940d81cd7a298b4ae99c7c?s=128&d=identicon&r=PG", "display_name": "Frank C.", "link": "https://stackoverflow.com/users/100214/frank-c"}, "edited": false, "score": 0, "creation_date": 1479945335, "post_id": 40771022, "comment_id": 68775806, "body": "@FrankC. When irbuilder.CreateInBoundsGEP(...) is called, an assertion fails and prints this message: <code>Expression: isa&lt;X&gt;(Val) &amp;&amp; &quot;cast&lt;Ty&gt;() argument of incompatible type!&quot;</code>. I tried to copy the llvm::Value* into a variable on the stack, but then another assertion fails: <code>Expression: getOperand(0)-&gt;getType() == cast&lt;PointerType&gt;(getOperand(1)-&gt;getType())-&gt;getElementType(&zwnj;&#8203;\u200c\u200b) &amp;&amp; &quot;Ptr must be a pointer to Val type!</code>. I&#39;m thinking that I&#39;m doing something wrong with the <code>llvm::Value* data = &#47;*expression*&#47;</code>, so I&#39;m gonna look into the type data for it."}], "answers": [{"comments": [{"owner": {"reputation": 829, "user_id": 1631673, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/32f84a849ccf6150834fbcf791417422?s=128&d=identicon&r=PG", "display_name": "baum", "link": "https://stackoverflow.com/users/1631673/baum"}, "edited": false, "score": 0, "creation_date": 1553282111, "post_id": 40776793, "comment_id": 97341119, "body": "What is <code>struct_type</code>?"}], "tags": [], "owner": {"reputation": 168, "user_id": 5390271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WZIog.jpg?s=128&g=1", "display_name": "caa515", "link": "https://stackoverflow.com/users/5390271/caa515"}, "is_accepted": true, "score": 2, "last_activity_date": 1479951357, "creation_date": 1479951357, "answer_id": 40776793, "question_id": 40771022, "link": "https://stackoverflow.com/questions/40771022/how-to-get-the-value-of-a-member-of-a-structure-in-llvm/40776793#40776793", "title": "How to get the value of a member of a structure in LLVM?", "body": "<p><b>I have found the solution.</b> I think I was passing the indices incorrectly or something.</p>\n\n<p>NOTE: I have not tested this with members that have different data types yet but it seems to work</p>\n\n<pre><code>llvm::Value* member_index = llvm::ConstantInt::get(llvm_context, llvm::APInt(32, index /*The index of the member*/, true));\nllvm::Value* data = /*A structure value*/;\n\nllvm::AllocaInst* alloc = irbuilder.CreateAlloca(struct_type, 0, \"alloctmp\");\nirbuilder.CreateStore(data, alloc);\n\nstd::vector&lt;llvm::Value*&gt; indices(2);\nindices[0] = llvm::ConstantInt::get(llvm_context, llvm::APInt(32, 0, true));\nindices[1] = member_index;\n\nllvm::Value* member_ptr = irbuilder.CreateGEP(struct_type, alloc, indices, \"memberptr\");\nllvm::Value* loaded_member = irbuilder.CreateLoad(member_ptr, \"loadtmp\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4819, "user_id": 961658, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15e6345cfdbb6c839cdca39d51de41ad?s=128&d=identicon&r=PG", "display_name": "Sriram Murali", "link": "https://stackoverflow.com/users/961658/sriram-murali"}, "is_accepted": false, "score": 1, "last_activity_date": 1576868994, "creation_date": 1576868994, "answer_id": 59430261, "question_id": 40771022, "link": "https://stackoverflow.com/questions/40771022/how-to-get-the-value-of-a-member-of-a-structure-in-llvm/59430261#59430261", "title": "How to get the value of a member of a structure in LLVM?", "body": "<p>It takes some time to grasp the concept, but it is well worth investing time on it. Look at the documentation for <a href=\"https://llvm.org/docs/LangRef.html#getelementptr-instruction\" rel=\"nofollow noreferrer\">getelementpointer</a> from llvm language reference. It explains how the member access works.</p>\n\n<pre><code>struct RT {\n  char A;\n  int B[10][20];\n  char C;\n};\nstruct ST {\n  int X;\n  double Y;\n  struct RT Z;\n};\n\nint *foo(struct ST *s) {\n  return &amp;s[1].Z.B[5][13];\n}\n</code></pre>\n\n<p>Reading the member B[5][13] of the struct can be done either directly:</p>\n\n<pre><code>%arrayidx = getelementptr inbounds %struct.ST, %struct.ST* %s, i64 1, i32 2, i32 1, i64 5, i64 13\n</code></pre>\n\n<p>or indirectly:</p>\n\n<pre><code>%t1 = getelementptr %struct.ST, %struct.ST* %s, i32 1\n%t2 = getelementptr %struct.ST, %struct.ST* %t1, i32 0, i32 2\n%t3 = getelementptr %struct.RT, %struct.RT* %t2, i32 0, i32 1\n%t4 = getelementptr [10 x [20 x i32]], [10 x [20 x i32]]* %t3, i32 0, i32 5\n%t5 = getelementptr [20 x i32], [20 x i32]* %t4, i32 0, i32 13\n</code></pre>\n\n<p>I will show the direct way. Let us first create the struct </p>\n\n<pre><code>StructType* createStruct(Module &amp;M)\n{\n    Type* intTy = Type::getInt32Ty(M.getContext());\n    Type* charTy = Type::getInt8Ty(M.getContext());\n    Type* doubleTy = Type::getDoubleTy(M.getContext());\n\n    auto* _B = ArrayType::get(intTy, 20);\n    auto*  B = ArrayType::get(_B, 10);\n    auto* RT = StructType::create(\"struct.RT\", charTy, B, charTy);\n    auto* ST = StructType::create(\"struct.ST\", intTy, doubleTy, RT);\n\n    RT-&gt;dump();\n    ST-&gt;dump();\n    return ST;\n}\n</code></pre>\n\n<p>Now we can use gep to access the struct, but first we need a vector of Values* to store the indices to access to a particular gep address</p>\n\n<pre><code>template &lt;size_t N&gt;\nstd::vector&lt;Value*&gt; getIndex(Module &amp;M, int (&amp;dims)[N])\n{\n    std::vector&lt;Value*&gt; idx;\n    for (auto i : dims)\n    {\n        idx.push_back(ConstantInt::get(M.getContext(), APInt(32, i, true)));\n    }\n    for (auto i : idx)\n    {\n        i-&gt;dump();\n    }\n    return idx;\n}\n\nvoid doGEP(Module &amp;M)\n{\n    auto* structInst = createStruct(M);\n    auto* structGlobVar = new GlobalVariable(M, structInst, true, GlobalVariable::ExternalLinkage, UndefValue::get(structInst), \"_structGV\", nullptr, GlobalVariable::ThreadLocalMode::NotThreadLocal, 0, true);\n    structGlobVar-&gt;dump();\n    int dims[] = {1, 2, 1, 5, 13};\n    std::vector&lt;Value*&gt; indx = getIndex(M, dims);\n    auto* gepInst = builder.CreateGEP(structGlobVar, indx);\n    gepInst-&gt;dump();\n}\n</code></pre>\n\n<p>will generate output:</p>\n\n<pre><code>%struct.RT = type { i8, [10 x [20 x i32]], i8 }\n%struct.ST = type { i32, double, %struct.RT }\ni32 1\ni32 2\ni32 1\ni32 5\ni32 13\n@_structGV = externally_initialized constant %struct.ST undef\ni32* getelementptr (%struct.ST, %struct.ST* @_structGV, i32 1, i32 2, i32 1, i32 5, i32 13)\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 5390271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WZIog.jpg?s=128&g=1", "display_name": "caa515", "link": "https://stackoverflow.com/users/5390271/caa515"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3081, "favorite_count": 0, "accepted_answer_id": 40776793, "answer_count": 2, "score": 4, "last_activity_date": 1576868994, "creation_date": 1479922822, "last_edit_date": 1479948195, "question_id": 40771022, "link": "https://stackoverflow.com/questions/40771022/how-to-get-the-value-of-a-member-of-a-structure-in-llvm", "title": "How to get the value of a member of a structure in LLVM?", "body": "<p>So I've created a structure type with this:</p>\n\n<pre><code>llvm::StructType* llvm_struct = llvm::StructType::create(llvm_context, struct_name);\nstd::vector&lt;llvm::Type*&gt; members;\n\nfor(size_t j = 0; j != struct_data.members.size(); j++){\n    llvm::Type* member_type = /*get member type*/;\n    members.push_back(member_type);\n}\n\nllvm_struct-&gt;setBody(members)\n</code></pre>\n\n<p>and I'm wondering how to access the members within the struct.</p>\n\n<p>I've tried using getelementptr with no luck so far:</p>\n\n<pre><code>llvm::Value* member_index = llvm::ConstantInt::get(llvm_context, llvm::APInt(32, /*structure member index*/, true));\nllvm::Value* indices[2] = {llvm::ConstantInt::get(member_index-&gt;getType(), 0), member_index};\nllvm::Value* data = /*expression value*/;\n\nreturn irbuilder.CreateInBoundsGEP(data, llvm::ArrayRef&lt;llvm::Value*&gt;(indices, 2), \"membtmp\");\n</code></pre>\n\n<p>Thanks for any feedback!</p>\n\n<p>EDIT:</p>\n\n<p>Okay so the type of <code>llvm::Value* data</code> is a <code>%a_struct</code> which was loaded from a pointer on the stack. It seems from the documentation that <code>irbuilder.CreateInBoundsGEP(llvm::Value*, llvm::ArrayRef&lt;llvm::Value*&gt;, llvm::Twine)</code> requires the first argument to be a pointer to the structure and not the value of the structure itself.</p>\n\n<p>When copying the value of the structure into a variable on the stack, this error is thrown: <code>Expression: getOperand(0)-&gt;getType() == cast&lt;PointerType&gt;(getOperand(1)-&gt;getType())-&gt;getElementType(\u200c\u200b\u200c\u200b) &amp;&amp; \"Ptr must be a pointer to Val type!\"</code>. The pointer pasted to <code>irbuidler.CreateInBoundsGEP(...)</code> when this error was thrown was an <code>llvm::AllocaInst*</code> which was newly allocated on the stack and contained the value of <code>llvm::Value* data</code> (type of <code>%a_struct</code>) copied into it.</p>\n\n<p>The IR generated right before the call to <code>irbuilder.CreateInBoundsGEP(...)</code> with the value copied to a variable on the stack:</p>\n\n<pre><code>define i32 @main() {\nentry:\n  %calltmp = call %a_struct @new_a_struct()\n  %a_var = alloca %a_struct\n  store %a_struct %calltmp, %a_struct* %a_var\n  %a_var1 = load %a_struct, %a_struct* %a_var\n  %memballoctmp = alloca %a_struct\n  store %a_struct %a_var1, %a_struct* %memballoctmp\n}\n</code></pre>\n\n<p>Besides there should be a better way to access the members of <code>%a_var</code> without duplicating it (while still supporting expressions like <code>a_struct_var1.member + a_struct_var2.member</code> in the language).</p>\n"}, {"tags": ["c++", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1479923102, "post_id": 40771006, "comment_id": 68765933, "body": "Did you try using the debugger, to see where your code deviates from your expectations?"}, {"owner": {"reputation": 11, "user_id": 7201432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f798d2c30bdf53bfbbae0acee101f7ac?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Hosein Abedi", "link": "https://stackoverflow.com/users/7201432/mohammad-hosein-abedi"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1479923528, "post_id": 40771006, "comment_id": 68766203, "body": "yes and i check every output of every step! i guess cause of my problem is wrong algorithm."}, {"owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1479924582, "post_id": 40771006, "comment_id": 68766820, "body": "Are you adding the noise in the right scale? I.e. is the image <code>0-1</code> or <code>0-255</code> and is the Gaussian noise in the same scale?"}, {"owner": {"reputation": 11, "user_id": 7201432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f798d2c30bdf53bfbbae0acee101f7ac?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Hosein Abedi", "link": "https://stackoverflow.com/users/7201432/mohammad-hosein-abedi"}, "edited": false, "score": 0, "creation_date": 1479925003, "post_id": 40771006, "comment_id": 68767063, "body": "intensity of input image is between [0-255]. in this algo. there are 2 times normalized... one time sum of probability in every step normalized to [0-1], one time final probability for every intensity normalized to [0-255]..."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7201432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f798d2c30bdf53bfbbae0acee101f7ac?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Hosein Abedi", "link": "https://stackoverflow.com/users/7201432/mohammad-hosein-abedi"}, "edited": false, "score": 0, "creation_date": 1479928009, "post_id": 40771864, "comment_id": 68768624, "body": "thanks for your help, but after i edit my code is not working properly, but really change output(!) see this : <a href=\"http://s8.picofile.com/file/8275854300/a.png\" rel=\"nofollow noreferrer\">s8.picofile.com/file/8275854300/a.png</a>"}, {"owner": {"reputation": 102, "user_id": 7055370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24168bcc90865b8c743cd014093dbb3a?s=128&d=identicon&r=PG&f=1", "display_name": "C. Frugal", "link": "https://stackoverflow.com/users/7055370/c-frugal"}, "reply_to_user": {"reputation": 11, "user_id": 7201432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f798d2c30bdf53bfbbae0acee101f7ac?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Hosein Abedi", "link": "https://stackoverflow.com/users/7201432/mohammad-hosein-abedi"}, "edited": false, "score": 0, "creation_date": 1479928441, "post_id": 40771864, "comment_id": 68768847, "body": "Did you adapt it to follow your law? The distribution of the pixels before adaptation is, I believe but wikipedia will probably give you a better answer: 256/2 = 128 and std is 128 / sqrt(n). You need to make it so the mean is around 10 and the std less than that, so you keep a good signal to noise ratio."}], "tags": [], "owner": {"reputation": 102, "user_id": 7055370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24168bcc90865b8c743cd014093dbb3a?s=128&d=identicon&r=PG&f=1", "display_name": "C. Frugal", "link": "https://stackoverflow.com/users/7055370/c-frugal"}, "is_accepted": false, "score": 1, "last_activity_date": 1479928686, "last_edit_date": 1479928686, "creation_date": 1479925939, "answer_id": 40771864, "question_id": 40771006, "link": "https://stackoverflow.com/questions/40771006/add-gaussian-noise-with-c/40771864#40771864", "title": "Add Gaussian noise with C++", "body": "<p>As far as I understand it, your code does not add Gaussian noise to the image.<br>\nGaussian noise is defined by 2 values: the mean, and the std.  </p>\n\n<p>Adding gaussian noise to an image, means generating a new picture that is the size of the frame, where the distribution of the pixels' intensity follow a normal distribution, and then adding this to the actual image that you want to make noisy.</p>\n\n<p>I haven't tried to completely understand your code, but what you are doing seems to be pixel dependent, and way more complicated than necessary. </p>\n\n<p>To generate a frame of which pixels follow a normal distribution, you can use the central limit theorem, which states that summing n independent variables following the same distribution tends towards the normal distribution.</p>\n\n<p>Hence, you can set each pixel of the frame to be:  </p>\n\n<pre><code>/* Generate a pixel with a random intensity that follows the normal distribution */\nint n = 30;\nint sum = 0;\nfor(int k = 0; k &lt; n; ++k)\n    sum += rand() % 255;\npixel_i_j = sum / n;\n\n/* \n * pixel_i_j at this point follows a normal distribution with\n * parameters :\n *  - mean = 256/2 = 128\n *  - std = std of uniform law between 0 - 256 / sqrt(n)\n *\n * So adapt it to the normal law defined by my parameters */\npixel_i_j = ((pixel_i_j - mean) / std ) * my_std + my_mean;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7201432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f798d2c30bdf53bfbbae0acee101f7ac?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Hosein Abedi", "link": "https://stackoverflow.com/users/7201432/mohammad-hosein-abedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2799, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1479945042, "creation_date": 1479922778, "last_edit_date": 1479945042, "question_id": 40771006, "link": "https://stackoverflow.com/questions/40771006/add-gaussian-noise-with-c", "title": "Add Gaussian noise with C++", "body": "<p>i want to add gaussian noise to input image with gaussian noise PDF(Probability distribution function) and i write this code and check many times but output is not correct,  i`m confused!</p>\n\n<pre><code>    int main() {\n    Mat Frame;\n    string address;\n    printf(\"Please Drag and Drop Your Image\");\n    cin &gt;&gt; address;\n    Frame = imread(address, CV_LOAD_IMAGE_GRAYSCALE);\n    int arrayOfIntensity[256] = { 0 }, intensity;\n\n    //NEW COUNT INTENSITY OF EVERY PIXEL\n    for (int i = 0; i &lt; Frame.rows; i++)\n        for (int j = 0; j &lt; Frame.cols; j++) \n            arrayOfIntensity[Frame.at&lt;uchar&gt;(i, j)]++;\n\n    //SUM OF INTENSITY\n    int sumOfintensity = 0;\n    for (int i = 0; i &lt; Frame.rows; i++)\n        for (int j = 0; j &lt; Frame.cols; j++)\n            sumOfintensity += Frame.at&lt;uchar&gt;(i, j);\n    //AVG OF INTENSITY\n    double avgOfintensity = sumOfintensity, varOfintensity = 0;\n    avgOfintensity /= Frame.rows*Frame.cols;\n    //VARIANCE OF INTENSITY\n    for (int i = 0; i &lt; Frame.rows; i++)\n        for (int j = 0; j &lt; Frame.cols; j++)\n            varOfintensity += pow(Frame.at&lt;uchar&gt;(i, j) - avgOfintensity, 2);\n    varOfintensity/= Frame.rows*Frame.cols;\n    //PROBABILITY\n    float probability[256] = { 0 }, intermediate[256] = { 0 }, factor, sumProb[256] = { 0 }, newSumProb[256] = { 0 };\n    factor = (sqrt(6.28)*avgOfintensity);\n    cout &lt;&lt; \"factor :\" &lt;&lt; factor &lt;&lt; endl;\n    factor = 1 / factor;\n    cout &lt;&lt; \"new factor :\" &lt;&lt; factor &lt;&lt; endl;\n    for (int i = 0; i &lt; 256; i++) {\n        intermediate[i] =-1*(pow(i - avgOfintensity, 2))/(2 * pow(varOfintensity, 2));\n        probability[i] = factor*(pow(2.718281, intermediate[i]));\n        //SUM OF PROBABILTY\n        if (i == 0)\n            sumProb[i] = probability[i];\n        else\n            sumProb[i] = probability[i] + sumProb[i - 1];\n    }\n    //INTO 0-1 RANGE\n    for (int i = 0; i &lt; 256; i++) \n        newSumProb[i] = sumProb[i]/ sumProb[255];\n\n    float finalProb[256] = { 0 };\n    for (int i = 0; i &lt; 256; i++) {\n        double random = (rand() % 10) / 1000000.0 +(rand() % 10) / 100000.0 +(rand() % 10) / 10000.0 +(rand() % 10) / 1000.0 +(rand() % 10)/100.0+ (rand() % 10) / 10.0;\n        for (int j = 0; j &lt; 256; j++) {\n            if (random&lt;newSumProb[j]) {\n                finalProb[i] = newSumProb[j];\n                break;\n            }\n        }   \n    }\n    int max = 0;\n    for (int i = 0; i &lt; 256; i++) \n        if (finalProb[max]&lt;finalProb[i])\n            max = i;\n\n    for (int i = 0; i &lt; 256; i++)\n        finalProb[i] =( finalProb[i] * 256.0 )/ finalProb[max];\n\n    for (int i = 0; i &lt; Frame.rows; i++)\n        for (int j = 0; j &lt; Frame.cols; j++)\n            Frame.at&lt;uchar&gt;(i, j) = saturate_cast&lt;uchar&gt;(finalProb[Frame.at&lt;uchar&gt;(i, j)]);\n\n    imshow(\"Result\", Frame);\n    waitKey();\n}\n</code></pre>\n\n<p>correct output :\n<a href=\"https://i.stack.imgur.com/6gCNn.jpg\" rel=\"nofollow noreferrer\">tihs image is correct output with matlab</a>\nmy incorrect output :\n<a href=\"https://i.stack.imgur.com/W1ynY.jpg\" rel=\"nofollow noreferrer\">this image is incorrect output with my code</a></p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1479925883, "post_id": 40770956, "comment_id": 68767538, "body": "<a href=\"https://www.youtube.com/watch?v=5A6hn4VhJeg\" rel=\"nofollow noreferrer\"><code>#include&lt;bits&#47;stdc++.h&gt; using namespace std;</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1479923394, "last_edit_date": 1479923394, "creation_date": 1479923056, "answer_id": 40771084, "question_id": 40770956, "link": "https://stackoverflow.com/questions/40770956/using-bits-stdc-h-gives-a-global-variable-ambiguity/40771084#40771084", "title": "Using &lt;bits/stdc++.h&gt; gives a global variable ambiguity", "body": "<p>The files in the <code>bits/</code> directory are implementation details not to be included in your programs directly. They are included indirectly by the normal includes like <code>&lt;vector&gt;</code> and <code>&lt;iostream&gt;</code>. Since it's an implementation detail, it's allow to make assumptions about the context in which it's included and presumably your include location violates one of those assumptions.</p>\n\n<p>Just include the normal standard header for the functionality you need instead of a <code>bits</code> file.</p>\n\n<p>Upon reading your question a second time it looks like you may also have a second problem: <code>using namespace std</code> bringing the <code>std::count</code> function into the global namespace, which collides with your global int <code>count</code>. To fix this consider using specific functions from standard instead of the entire namespace (<code>using std::cout;</code>), or rename your count variable, or don't declare it at global scope.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1479923450, "last_edit_date": 1495540382, "creation_date": 1479923090, "answer_id": 40771099, "question_id": 40770956, "link": "https://stackoverflow.com/questions/40770956/using-bits-stdc-h-gives-a-global-variable-ambiguity/40771099#40771099", "title": "Using &lt;bits/stdc++.h&gt; gives a global variable ambiguity", "body": "<p>I suspect <code>count</code> is in <code>std</code> namespace somewhere.</p>\n\n<p>Remove the line</p>\n\n<pre><code>using namespace std;\n</code></pre>\n\n<p>Use the namespace specifier <code>std::</code> wherever you need it explicitly.</p>\n\n<p>You should not use </p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt;\n</code></pre>\n\n<p>anyway. Use headers that are part of the standard.</p>\n\n<p><strong>PS</strong></p>\n\n<p>From <a href=\"https://stackoverflow.com/a/40771127/434551\">the answer by @CFrugal</a>:</p>\n\n<p><code>std::count</code> is a function from the standard library.<br>\n<a href=\"http://www.cplusplus.com/reference/algorithm/count/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/algorithm/count/</a>  </p>\n"}, {"tags": [], "owner": {"reputation": 102, "user_id": 7055370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24168bcc90865b8c743cd014093dbb3a?s=128&d=identicon&r=PG&f=1", "display_name": "C. Frugal", "link": "https://stackoverflow.com/users/7055370/c-frugal"}, "is_accepted": true, "score": 3, "last_activity_date": 1479923168, "creation_date": 1479923168, "answer_id": 40771127, "question_id": 40770956, "link": "https://stackoverflow.com/questions/40770956/using-bits-stdc-h-gives-a-global-variable-ambiguity/40771127#40771127", "title": "Using &lt;bits/stdc++.h&gt; gives a global variable ambiguity", "body": "<p><code>std::count</code> is a function from the standard library.<br>\n<a href=\"http://www.cplusplus.com/reference/algorithm/count/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/algorithm/count/</a>  </p>\n\n<p>Since you use the namespace std , \"count\" can refer to either <code>std::count</code> or the variable <code>count</code>.  </p>\n\n<p>You need to either rename your variable, or stop using the std namespace.<br>\nYou can also include only the c++ headers that you need instead of bits/stdc++.h which includes all of them.</p>\n"}], "owner": {"reputation": 25, "user_id": 7201362, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fry6kvynUg4/AAAAAAAAAAI/AAAAAAAAAB0/6W79lZPHXnE/photo.jpg?sz=128", "display_name": "apocalypse1212", "link": "https://stackoverflow.com/users/7201362/apocalypse1212"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "closed_date": 1479923227, "accepted_answer_id": 40771127, "answer_count": 3, "score": 0, "last_activity_date": 1479923632, "creation_date": 1479922622, "last_edit_date": 1479923632, "question_id": 40770956, "link": "https://stackoverflow.com/questions/40770956/using-bits-stdc-h-gives-a-global-variable-ambiguity", "closed_reason": "Duplicate", "title": "Using &lt;bits/stdc++.h&gt; gives a global variable ambiguity", "body": "<p>I was creating a basic tic tac toe game on c++,I got the desired game output without including bits/stdc++ header file,but when included there was an ambiguity for global variable count(which is in use in the below mentioned code). Please explain! </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"unistd.h\"\n#include &lt;cstdlib&gt;\n#include&lt;bits/stdc++.h&gt;\nusing namespace std;\nchar a[3][3];\nint count=0;\nchar player_flag ='X';\nvoid init()\n{\n  a[0][0]='1';\n  a[0][1]='2';\n  a[0][2]='3';\n  a[1][0]='4';\n  a[1][1]='5';\n  a[1][2]='6';\n  a[2][0]='7';\n  a[2][1]='8';\n  a[2][2]='9';\n}\nvoid show()\n{\n  for(int i=0;i&lt;3;i++)\n{ for(int j=0;j&lt;3;j++) cout&lt;&lt;a[i][j] &lt;&lt; \" \" ;\n  cout &lt;&lt; \"\\n\" ;\n}}\nvoid entry(int n,char player_flag)\n{\n  for(int i=0;i&lt;3;i++)\n  { for(int j=0;j&lt;3;j++)\n    { if(n==(i*3+j+1))\n      {if(a[i][j]=='X'||a[i][j]=='O')\n      {  int n;\n      cout&lt;&lt;\"invalid entry enter another position\\n\";\n      cin&gt;&gt;n; entry(n,player_flag);\n       }\n      else  a[i][j]=player_flag;\n    }}}}\nvoid turn()\n{\n  if(player_flag=='X') player_flag='O';\n  else player_flag ='X';\n}\nvoid check()\n{ int i,j;\n  for(i=0,j=0;j&lt;3;i=0,j++)\n  {if(a[i][j]==a[i+1][j]&amp;&amp;a[i+1][j]==a[i+2][j]) {cout&lt;&lt;\"\\n\"&lt;&lt;a[i][j]&lt;&lt;\" wins \\n\"; exit(0);}}\n  for(i=0,j=0;i&lt;3;j=0,i++)\n  {if(a[i][j]==a[i][j+1]&amp;&amp;a[i][j+1]==a[i][j+2]) {cout&lt;&lt;\"\\n\"&lt;&lt;a[i][j]&lt;&lt;\" wins \\n\"; exit(0);}}\n   if(a[0][0]==a[1][1]&amp;&amp;a[1][1]==a[2][2])\n   {cout&lt;&lt;\"\\n\"&lt;&lt;a[0][0]&lt;&lt;\" wins\";exit(0);}\n   else if(a[0][2]==a[1][1]&amp;&amp;a[1][1]==a[2][0])\n   {cout&lt;&lt;\"\\n\"&lt;&lt;a[0][2]&lt;&lt;\" wins\";exit(0);}\n   else if(count&gt;=9){ cout&lt;&lt;\"\\nits a draw\\n\"; exit(0);}}\nint main()\n{  init(); show();\n  while(1)\n{  int n; count++;\n cout&lt;&lt;\"player \"&lt;&lt;player_flag&lt;&lt;\" turn: enter position to put \\n\"; cin&gt;&gt;n;\n  entry(n,player_flag);\n  system(\"clear\");\n  show();\n  check();\n  turn();`\n}}\n</code></pre>\n\n<p>error: reference to \u2018count\u2019 is ambiguous\n    else if(count>=9){ cout&lt;&lt;\"\\nits a draw\\n\"; exit(0);}}</p>\n\n<p>This is one of many ambiguous count errors.</p>\n\n<p>PS: if bits/stdc++ is not included then its works fine,error pops out only when bits/stdc++ is used. Any reply is encouraged, Thanks!</p>\n"}, {"tags": ["c++", "multithreading"], "answers": [{"comments": [{"owner": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "edited": false, "score": 1, "creation_date": 1479923225, "post_id": 40771019, "comment_id": 68766004, "body": "As an alternative the function could be declared as static, if no access to any of it&#39;s members is required (which looks like this in the given code)."}, {"owner": {"reputation": 103, "user_id": 4359985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kwtlc.jpg?s=128&g=1", "display_name": "CapsuleMaglev", "link": "https://stackoverflow.com/users/4359985/capsulemaglev"}, "edited": false, "score": 0, "creation_date": 1479923615, "post_id": 40771019, "comment_id": 68766248, "body": "I see, this definitely clears things up! Thank you so much,guys!"}, {"owner": {"reputation": 14421, "user_id": 1888983, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Y6tnm.png?s=128&g=1", "display_name": "jozxyqk", "link": "https://stackoverflow.com/users/1888983/jozxyqk"}, "edited": false, "score": 0, "creation_date": 1573867064, "post_id": 40771019, "comment_id": 104040300, "body": "<a href=\"https://stackoverflow.com/questions/10673585/start-thread-with-member-function\">Start thread with member function</a> - std::thread can take both a member function and the instance pointer"}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": true, "score": 9, "last_activity_date": 1479922818, "creation_date": 1479922818, "answer_id": 40771019, "question_id": 40770913, "link": "https://stackoverflow.com/questions/40770913/c-threading-no-instance-of-constructor-stdthreadthread-matches-the-a/40771019#40771019", "title": "C++/Threading : No instance of constructor &quot;std::thread::thread&quot; &gt; matches the argument list", "body": "<p><code>TestPlay</code> is a member function, this means its type of <code>void (CMusicTCPDlg::)()</code>.</p>\n\n<p>You will need to provide a bound version to allow the thread to call it: <code>std::bind(&amp;TestPlay, this)</code>. Be aware that you MUST make sure the thread does not exist for longer than the object itself or you will cause undefined behavior. (It will execute a function on a non-existant object)</p>\n"}], "owner": {"reputation": 103, "user_id": 4359985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kwtlc.jpg?s=128&g=1", "display_name": "CapsuleMaglev", "link": "https://stackoverflow.com/users/4359985/capsulemaglev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6225, "favorite_count": 0, "accepted_answer_id": 40771019, "answer_count": 1, "score": 6, "last_activity_date": 1479922818, "creation_date": 1479922491, "question_id": 40770913, "link": "https://stackoverflow.com/questions/40770913/c-threading-no-instance-of-constructor-stdthreadthread-matches-the-a", "title": "C++/Threading : No instance of constructor &quot;std::thread::thread&quot; &gt; matches the argument list", "body": "<p>I've been having some problems with threading because I am very new to it.</p>\n\n<p>I am getting a:</p>\n\n<blockquote>\n  <p>no instance of constructor \"std::thread::thread\"\n  matches the argument list</p>\n  \n  <p>argument types are(void() )</p>\n</blockquote>\n\n<p>Precisely at</p>\n\n<pre><code> std::thread t1(TestPlay);\n</code></pre>\n\n<hr>\n\n<pre><code>    void CMusicTCPDlg::OnBnClickedBtplaymusic()\n    {\n            std::thread t1(TestPlay);\n\n            t1.join();\n    }\n\n    void CMusicTCPDlg::TestPlay()\n    {\n        if (CFugue::GetMidiOutPortCount() &lt;= 0)\n        {\n            std::cerr &lt;&lt; \"No MIDI Output Ports found!\";\n            exit(-1);\n        }\n\n        std::cout &lt;&lt; \"Playing Notes..\";\n        CFugue::PlayMusicStringWithOpts(_T(\"C D E F G A B\"), MIDI_MAPPER, 20);\n    }\n</code></pre>\n\n<hr>\n\n<p>I've reffered to some threading pages and most had a simple example like mine.</p>\n\n<p>Visual Studio advises me to use &amp; before calling the function but it won't work with it.\nDo I have to work with BackgroundWorker instead?</p>\n\n<p>Really sorry if this is duplicate. Thank you!</p>\n"}, {"tags": ["c++", "linux", "gcc", "makefile", "compilation"], "comments": [{"owner": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "edited": false, "score": 2, "creation_date": 1479923244, "post_id": 40770872, "comment_id": 68766018, "body": "If your program is dependent on Windows APIs, you have a lot more work ahead of you than writing a CMakeLists.txt file."}, {"owner": {"reputation": 49, "user_id": 6506673, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/44c94dc1d4702cdf18529db7ee02f19e?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Fennell", "link": "https://stackoverflow.com/users/6506673/matthew-fennell"}, "reply_to_user": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "edited": false, "score": 0, "creation_date": 1479923553, "post_id": 40770872, "comment_id": 68766215, "body": "When you say API&#39;s what do you mean? I don&#39;t believe it does to the extent of my knowledge"}, {"owner": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "edited": false, "score": 2, "creation_date": 1479923933, "post_id": 40770872, "comment_id": 68766448, "body": "API stands for &#39;Application Program Interface.&#39; If your program includes Windows-specific header files, and links with Windows-specific libraries, then getting it to compile and run on Linux is apt to be a significant undertaking, beyond the simple mechanics of setting up the CMake project file."}, {"owner": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "edited": false, "score": 0, "creation_date": 1479942166, "post_id": 40770872, "comment_id": 68774859, "body": "Since you&#39;re coming from Visual Studio, and I assume quite happy with it, take a look at Visual C++ for Linux Developement extension: <a href=\"https://blogs.msdn.microsoft.com/vcblog/2016/03/30/visual-c-for-linux-development/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/vcblog/2016/03/30/&hellip;</a>"}, {"owner": {"reputation": 49, "user_id": 6506673, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/44c94dc1d4702cdf18529db7ee02f19e?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Fennell", "link": "https://stackoverflow.com/users/6506673/matthew-fennell"}, "edited": false, "score": 0, "creation_date": 1479984086, "post_id": 40770872, "comment_id": 68790997, "body": "I&#39;ve been using OpenCV, but I think it looks like it is going to be too much trouble for me to sort out. Thanks for your responses though"}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 7163417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270a689845a9d9b40ce77d9996e6375a?s=128&d=identicon&r=PG&f=1", "display_name": "pierobot", "link": "https://stackoverflow.com/users/7163417/pierobot"}, "is_accepted": false, "score": 1, "last_activity_date": 1479924385, "creation_date": 1479924385, "answer_id": 40771439, "question_id": 40770872, "link": "https://stackoverflow.com/questions/40770872/getting-head-around-cmake-with-linux/40771439#40771439", "title": "Getting head around CMake with Linux", "body": "<p>Assuming you've already taken care of any implementation issues with native APIs between Windows and Linux you can do the following:</p>\n\n<p>First of all, refer to the official tutorial and docs as a starting point.</p>\n\n<p><a href=\"https://cmake.org/cmake-tutorial/\" rel=\"nofollow noreferrer\">https://cmake.org/cmake-tutorial/</a></p>\n\n<p><a href=\"https://cmake.org/documentation/\" rel=\"nofollow noreferrer\">https://cmake.org/documentation/</a></p>\n\n<p>Let's assume you have a directory that looks like the following:</p>\n\n<pre><code>- myproject\n    - CMakeLists.txt\n    - main.cpp\n    - otherstuff.cpp\n</code></pre>\n\n<p>If you don't have a CMakeLists.txt file then read the tutorial and change the source file names to yours.</p>\n\n<p>I recommend creating a separate directory that contains all the files that the cmake program will create.</p>\n\n<pre><code>mkdir build &amp;&amp; cd build\n</code></pre>\n\n<p>Now you execute cmake and tell it where the main CMakeLists.txt file is at. In our case, one directory up.</p>\n\n<pre><code>cmake ..\n</code></pre>\n\n<p>The configuration process will take place and  you'll see text telling you that the process is complete. You'll have a makefile in the build directory. All you do now is run the make command.</p>\n\n<pre><code>make\n</code></pre>\n\n<p>If you are linking to libraries then take a look at the <a href=\"https://cmake.org/cmake/help/v3.7/command/target_link_libraries.html\" rel=\"nofollow noreferrer\">TARGET_LINK_LIBRARIES</a> and <a href=\"https://cmake.org/cmake/help/v3.7/command/include_directories.html#command:include_directories\" rel=\"nofollow noreferrer\">INCLUDE_DIRECTORIES</a> commands.</p>\n"}], "owner": {"reputation": 49, "user_id": 6506673, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/44c94dc1d4702cdf18529db7ee02f19e?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Fennell", "link": "https://stackoverflow.com/users/6506673/matthew-fennell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1479931072, "answer_count": 1, "score": -1, "last_activity_date": 1479924385, "creation_date": 1479922345, "question_id": 40770872, "link": "https://stackoverflow.com/questions/40770872/getting-head-around-cmake-with-linux", "closed_reason": "Not suitable for this site", "title": "Getting head around CMake with Linux", "body": "<p>I have been working on a Windows project in Visual Studio 2015, but I now need to compile for it to run on Linux. I have tried with repeated failed attempts and have read that CMake is the best way to do it, but have had a hard time getting my head around it.</p>\n\n<p>I have the following files :</p>\n\n<pre><code>Othello.cpp - Main is in here\nBoard.cpp\nMonteCarlo.cpp\nNode.cpp\n\nBoard.h\nMonteCarlo.h\nNode.h\n</code></pre>\n\n<p>and essentially I am lost as to how I am supposed to get it to compile. Thanks for reading!</p>\n"}, {"tags": ["c++", "initialization", "assignment-operator"], "comments": [{"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1479922390, "post_id": 40770834, "comment_id": 68765509, "body": "You don&#39;t need to overload the assignment operator for what you are doing? Just make a mutator function."}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1479922500, "post_id": 40770834, "comment_id": 68765576, "body": "int changeNum (enum x) { return your enum }"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5971575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce37ff4abb3e723aa96637c22570256c?s=128&d=identicon&r=PG", "display_name": "JS starter", "link": "https://stackoverflow.com/users/5971575/js-starter"}, "edited": false, "score": 0, "creation_date": 1479923115, "post_id": 40770948, "comment_id": 68765943, "body": "I believe I understand now how to use the conversion constructor, but what if I still want the object to be initialized this way, <code>Number one = Number::ONE</code> is there a way at all? thanks!"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 73, "user_id": 5971575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce37ff4abb3e723aa96637c22570256c?s=128&d=identicon&r=PG", "display_name": "JS starter", "link": "https://stackoverflow.com/users/5971575/js-starter"}, "edited": false, "score": 0, "creation_date": 1479923217, "post_id": 40770948, "comment_id": 68766001, "body": "I believe that the conversion constructor is the way to do this."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 73, "user_id": 5971575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce37ff4abb3e723aa96637c22570256c?s=128&d=identicon&r=PG", "display_name": "JS starter", "link": "https://stackoverflow.com/users/5971575/js-starter"}, "edited": false, "score": 0, "creation_date": 1479923245, "post_id": 40770948, "comment_id": 68766020, "body": "@JS starter - a conversion constructor IS invoked that way, unless it is declared <code>explicit</code>.   So <code>Number one = Number::ONE</code> will invoke a constructor with argument of (the type of) <code>Number::ONE</code>"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1479923395, "post_id": 40770948, "comment_id": 68766107, "body": "@templatetypedef   A constructor is usually better off using an initialiser list rather than assigning values in its body.   In your case it would be <code>Number::Number(int value) : num(value) {}</code>.   Among other things, this avoids initialising and then assigning members.   For members that are a class type, it also gives exception safety, which assigning in the constructor body (usually) does not."}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1479923460, "post_id": 40770948, "comment_id": 68766143, "body": "@Peter Oh, absolutely. I chose to go this other route because I wasn&#39;t sure how familiar the OP was with initialization lists and didn&#39;t want to drop too many concepts into a single answer."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 5, "last_activity_date": 1479922596, "creation_date": 1479922596, "answer_id": 40770948, "question_id": 40770834, "link": "https://stackoverflow.com/questions/40770834/how-to-overload-operator-used-in-initializing-a-new-object/40770948#40770948", "title": "How to overload operator= used in initializing a new object?", "body": "<p>In C++, when you write</p>\n\n<pre><code>Number one = Number::ONE;\n</code></pre>\n\n<p>the compiler will <em>not</em> use the assignment operator to initialize <code>one</code>. The <code>operator=</code> function is only invoked when you have an existing object that you want to reassign a new value. Instead, in this case, the compiler tries to invoke a <em>conversion constructor</em>, a constructor that takes in an object of the type on the right-hand side of the equality. Since you haven't defined a constructor like that, you're getting a compiler error.</p>\n\n<p>One way to do this would be something like this:</p>\n\n<pre><code>class Number {\npublic:\n     Number(int value); // &lt;-- Conversion constructor\n     ...\n};\n\nNumber::Number(int value) {\n    num = value;\n}\n</code></pre>\n\n<p>Now, the code you've given here will compile properly.</p>\n\n<p>You may want to do some reading into copy constructors, assignment operators, conversion constructors, and conversion assignment operators, since they're one of the trickier parts of routine C++ and often trip up people transitioning from basic C++ to more intermediate-level language techniques.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 5971575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce37ff4abb3e723aa96637c22570256c?s=128&d=identicon&r=PG", "display_name": "JS starter", "link": "https://stackoverflow.com/users/5971575/js-starter"}, "edited": false, "score": 0, "creation_date": 1479924260, "post_id": 40771229, "comment_id": 68766644, "body": "Thanks a lot dude, I finally understand it now!"}], "tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 1, "last_activity_date": 1479923591, "creation_date": 1479923591, "answer_id": 40771229, "question_id": 40770834, "link": "https://stackoverflow.com/questions/40770834/how-to-overload-operator-used-in-initializing-a-new-object/40771229#40771229", "title": "How to overload operator= used in initializing a new object?", "body": "<p>you didn't overload the constructor to take an integer as parameter that is why you get the error:</p>\n\n<pre><code>class Number \n{\n    public:\n        enum {ONE, TWO, THREE, FOUR};\n        Number(int x) : num(x){}\n\n    void print() const;\n\n    Number&amp; operator=(int);\nprivate:\n    int num;\n};\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 5971575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce37ff4abb3e723aa96637c22570256c?s=128&d=identicon&r=PG", "display_name": "JS starter", "link": "https://stackoverflow.com/users/5971575/js-starter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1909, "favorite_count": 0, "accepted_answer_id": 40770948, "answer_count": 2, "score": 2, "last_activity_date": 1479923591, "creation_date": 1479922206, "last_edit_date": 1479922615, "question_id": 40770834, "link": "https://stackoverflow.com/questions/40770834/how-to-overload-operator-used-in-initializing-a-new-object", "title": "How to overload operator= used in initializing a new object?", "body": "<p>I'm new to C++ and I'm trying to understand how Class works. I made a simple example for myself when I encounter this problem. My class has one private property <code>num</code> and I'm trying to initialize it with an int this way: <code>Number one = Number::ONE;</code> but it doesn't work. However, when I do this it works fine: <code>Number one; one = Number::ONE</code>. I prefer the first option. Please help!</p>\n\n<p>Here is my complete code:</p>\n\n<pre><code>class Number {\npublic:\n    enum {ONE, TWO, THREE, FOUR};\n    Number();\n\n    void print() const;\n\n    Number&amp; operator=(int);\nprivate:\n    int num;\n};\n\nNumber&amp; Number::operator=(int n) {\n    num = n;\n    return *this;\n}\n\nint main(int argc, const char * argv[]) {\n\n    Number n = Number::ONE; // doesn't work :(\n    n.print();\n\n    return 0;\n}\n\nNumber::Number() {\n    num = 0;\n}\n\nvoid Number::print() const {\n    cout &lt;&lt; num &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "operators", "overloading"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479922290, "post_id": 40770829, "comment_id": 68765457, "body": "Remove the <code>A&lt;T&gt;::</code> scope in the function definitions."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479922653, "post_id": 40770829, "comment_id": 68765668, "body": "Ah sorry, I forgot. Template parameters are not <i>&quot;inherited&quot;</i> to <code>friend</code> declarations. You have to declare them as <code>template&lt;typename U&gt; friend A&lt;U&gt;&amp; operator+ (A&lt;U&gt;&amp;, const A&lt;U&gt;&amp;);</code>"}, {"owner": {"reputation": 972, "user_id": 7201420, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33b5cf8a2891b9e747526da974d24e33?s=128&d=identicon&r=PG&f=1", "display_name": "Maras", "link": "https://stackoverflow.com/users/7201420/maras"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479922923, "post_id": 40770829, "comment_id": 68765835, "body": "Are you sure about that? I&#39;m getting now compiler&#39;s internal error :P Nevermind, it now still produces the &#39;not member&#39; errors :/"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479922991, "post_id": 40770829, "comment_id": 68765864, "body": "May be put <code>friend</code> first, but I&#39;m a 100% sure about this."}], "answers": [{"comments": [{"owner": {"reputation": 972, "user_id": 7201420, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33b5cf8a2891b9e747526da974d24e33?s=128&d=identicon&r=PG&f=1", "display_name": "Maras", "link": "https://stackoverflow.com/users/7201420/maras"}, "edited": false, "score": 0, "creation_date": 1479923707, "post_id": 40771065, "comment_id": 68766308, "body": "Yeah, I totally forgot about it. So now I deleted the friend and &#39;A&lt;T&gt;::&#39; but I&#39;m still getting the last error, that operator= must be a non static member. How can I make it non static? Actually, I&#39;ve looked at my operator[] definiton and there was also the same mistake, but for some reason compiler let me do this :P Now it also produces this &#39;non static member&#39; error :C"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 972, "user_id": 7201420, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33b5cf8a2891b9e747526da974d24e33?s=128&d=identicon&r=PG&f=1", "display_name": "Maras", "link": "https://stackoverflow.com/users/7201420/maras"}, "edited": false, "score": 0, "creation_date": 1479924174, "post_id": 40771065, "comment_id": 68766586, "body": "@Executor1909 Read one more the quote from the Standard. The operator shall have only one parameter."}, {"owner": {"reputation": 972, "user_id": 7201420, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33b5cf8a2891b9e747526da974d24e33?s=128&d=identicon&r=PG&f=1", "display_name": "Maras", "link": "https://stackoverflow.com/users/7201420/maras"}, "edited": false, "score": 0, "creation_date": 1479924282, "post_id": 40771065, "comment_id": 68766656, "body": "Yes, I know, but I changed that only to check if those previous errors would disappear, now they have only one parameter. &#39;Non static&#39; error still occurs"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 972, "user_id": 7201420, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33b5cf8a2891b9e747526da974d24e33?s=128&d=identicon&r=PG&f=1", "display_name": "Maras", "link": "https://stackoverflow.com/users/7201420/maras"}, "edited": false, "score": 0, "creation_date": 1479924503, "post_id": 40771065, "comment_id": 68766778, "body": "@Executor1909 What is unclear? The operator shall be declared within the class definition and have not the friend specifier. What is the problem?"}, {"owner": {"reputation": 972, "user_id": 7201420, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33b5cf8a2891b9e747526da974d24e33?s=128&d=identicon&r=PG&f=1", "display_name": "Maras", "link": "https://stackoverflow.com/users/7201420/maras"}, "edited": false, "score": 0, "creation_date": 1479924739, "post_id": 40771065, "comment_id": 68766922, "body": "There&#39;s a compiler error saying that operator &#39;=&#39; must be a non static member.  Declaration looks now like this: A&lt;T&gt; operator= (const A&lt;T&gt;&amp;); And definition: template&lt;class T&gt; A&lt;T&gt; operator= (const A&lt;T&gt;&amp; right) {     //some functions     return *this; } I have no idea why it is still a static member."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 972, "user_id": 7201420, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33b5cf8a2891b9e747526da974d24e33?s=128&d=identicon&r=PG&f=1", "display_name": "Maras", "link": "https://stackoverflow.com/users/7201420/maras"}, "edited": false, "score": 0, "creation_date": 1479924766, "post_id": 40771065, "comment_id": 68766936, "body": "@Executor1909 However the binary plus operator should be indeed declared like a friend function of the class and have two parameters."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 972, "user_id": 7201420, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33b5cf8a2891b9e747526da974d24e33?s=128&d=identicon&r=PG&f=1", "display_name": "Maras", "link": "https://stackoverflow.com/users/7201420/maras"}, "edited": false, "score": 0, "creation_date": 1479924831, "post_id": 40771065, "comment_id": 68766969, "body": "@Executor1909 As it is a class member then you have to specify A&lt;T&gt;:: in the definition before the operator name."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1479922986, "creation_date": 1479922986, "answer_id": 40771065, "question_id": 40770829, "link": "https://stackoverflow.com/questions/40770829/overloading-operators-and/40771065#40771065", "title": "Overloading operators &#39;=&#39; and &#39;+&#39;", "body": "<p>For starters assignment operators must be non-static member functions</p>\n\n<p>From the C++ Standard (13.5.3 Assignment )</p>\n\n<blockquote>\n  <p>1 <strong>An assignment operator shall be implemented by a non-static member\n  function</strong> with exactly one parameter. Because a copy assignment\n  operator operator= is implicitly declared for a class if not declared\n  by the user (12.8), a base class assignment operator is always hidden\n  by the copy assignment operator of the derived class.</p>\n</blockquote>\n\n<p>And secondly (11.3 Friends)</p>\n\n<blockquote>\n  <p>1 A friend of a class is a function or class that is given permission\n  to use the private and protected member names from the class. A class\n  specifies its friends, if any, by way of friend declarations. Such\n  declarations give special access rights to the friends, but they <strong>do\n  not make the nominated friends members of the befriending class</strong>.</p>\n</blockquote>\n\n<p>Thus for example this definition</p>\n\n<pre><code>template&lt;class T&gt; A&lt;T&gt;&amp; A&lt;T&gt;::operator+ (A&lt;T&gt;&amp; left, const A&lt;T&gt;&amp; right)\n                        ^^^^^\n{\n//some functions\nreturn left;\n}\n</code></pre>\n\n<p>is incorrect. At least you should remove  <code>A&lt;T&gt;::</code> because the operator is not a member of the class.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1479932978, "creation_date": 1479932978, "answer_id": 40773645, "question_id": 40770829, "link": "https://stackoverflow.com/questions/40770829/overloading-operators-and/40773645#40773645", "title": "Overloading operators &#39;=&#39; and &#39;+&#39;", "body": "<p>An operator that is implemented as a non-static member must accept only 1 input parameter, the right-hand operand.  The left-hand operand is the <code>this</code> object that the operator is being called on.</p>\n\n<p>An operator that is implemented as a static member or a non-member must accept 2 input parameter, the left-hand and right-hand operands.</p>\n\n<p>Your <code>operator=</code> is declared as a non-static member with 2 input parameters, which is wrong.</p>\n\n<p>Also, <code>operator+</code> is meant to return a new object that is a copy of the two input objects added together.  Do not return a reference to the object that the operator is being called on.  Whereas <code>operator=</code> is meant to return a reference to the object that is being assigned to.</p>\n\n<p>Try this:</p>\n\n<pre><code>template &lt;class T&gt;\nclass A\n{  \npublic:\n    //...\n    A&lt;T&gt; operator+(const A&lt;T&gt;&amp;) const;\n    A&lt;T&gt;&amp; operator=(const A&lt;T&gt;&amp;);\n};\n\ntemplate&lt;class T&gt; A&lt;T&gt; A&lt;T&gt;::operator+(const A&lt;T&gt;&amp; right) const\n{\n    A&lt;T&gt; result(*this);\n    //some functions to add right to result as needed...\n    return result;\n}\n\ntemplate&lt;class T&gt; A&lt;T&gt;&amp; A&lt;T&gt;::operator=(const A&lt;T&gt;&amp; right)\n{\n    // some functions to copy right into this...\n    return *this;\n}\n</code></pre>\n"}], "owner": {"reputation": 972, "user_id": 7201420, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33b5cf8a2891b9e747526da974d24e33?s=128&d=identicon&r=PG&f=1", "display_name": "Maras", "link": "https://stackoverflow.com/users/7201420/maras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 40771065, "answer_count": 2, "score": 0, "last_activity_date": 1479932978, "creation_date": 1479922192, "last_edit_date": 1592644375, "question_id": 40770829, "link": "https://stackoverflow.com/questions/40770829/overloading-operators-and", "title": "Overloading operators &#39;=&#39; and &#39;+&#39;", "body": "<p>I'm learning how to use templates and how to overload operators. I've managed to overload <code>operator[]</code>, but I've encountered a problem with overloading <code>operator+</code> and <code>operator=</code>. Here is my code:</p>\n<pre><code>template &lt;class T&gt;\nclass A\n{  \npublic:\n    //...\n    friend A&lt;T&gt;&amp; A&lt;T&gt;::operator+ (A&lt;T&gt;&amp;, const A&lt;T&gt;&amp;);\n    friend A&lt;T&gt;&amp; A&lt;T&gt;::operator= (A&lt;T&gt;&amp;, const A&lt;T&gt;&amp;);\n};\n\ntemplate&lt;class T&gt; A&lt;T&gt;&amp; A&lt;T&gt;::operator+ (A&lt;T&gt;&amp; left, const A&lt;T&gt;&amp; right)\n{\n    //some functions\nreturn left;\n}\n\ntemplate&lt;class T&gt; A&lt;T&gt;&amp; A&lt;T&gt;::operator= (A&lt;T&gt;&amp; left, const A&lt;T&gt;&amp; right)\n{\n    //some functions\n    return left;\n}\n</code></pre>\n<p>Whenver I try to compile, I get those errors:</p>\n<blockquote>\n<p>'+': is not a member of 'A&lt;T&gt;'</p>\n<p>'=': is not a member of 'A&lt;T&gt;'</p>\n<p>'operator =' must be a non-static member</p>\n</blockquote>\n<p>What am I doing wrong?</p>\n<hr />\n<p>EDIT:</p>\n<p>I've managed to update the code:</p>\n<pre><code>template &lt;class T&gt;\nclass A\n{  \npublic:\n    //...\n    A&lt;T&gt; operator+ (A&lt;T&gt;);\n    A&lt;T&gt; operator= (A&lt;T&gt;, const A&lt;T&gt;);\n};\n\ntemplate&lt;class T&gt; A&lt;T&gt; A&lt;T&gt;::operator+ (A&lt;T&gt; right)\n{\n    //some functions\n    return *this;\n}\n\ntemplate&lt;class T&gt; A&lt;T&gt; operator= (A&lt;T&gt; right)\n{\n    //some functions\n    return *this;\n}\n</code></pre>\n<p>Looks like <code>operator+</code> works now fine, but compiler gives this error:</p>\n<blockquote>\n<p>'operator=' must be a non static member</p>\n</blockquote>\n<p>Why is it a static member, and how can I fix it?</p>\n"}, {"tags": ["c++", "c++11", "pointers", "function-pointers", "member-function-pointers"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479922122, "post_id": 40770791, "comment_id": 68765365, "body": "You should better use the <i>Template Function Pattern</i> than a function pointer for such cases."}, {"owner": {"reputation": 996, "user_id": 6382969, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6573906dc8d142351d2f6ec09fd942ce?s=128&d=identicon&r=PG&f=1", "display_name": "PHcoDer", "link": "https://stackoverflow.com/users/6382969/phcoder"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479922192, "post_id": 40770791, "comment_id": 68765402, "body": "Are you suggesting there is not solution for this. Apart from using Template Function Pattern?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479922370, "post_id": 40770791, "comment_id": 68765497, "body": "I suggest that would be the better and more straightforward solution (and probably less error prone)."}, {"owner": {"reputation": 996, "user_id": 6382969, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6573906dc8d142351d2f6ec09fd942ce?s=128&d=identicon&r=PG&f=1", "display_name": "PHcoDer", "link": "https://stackoverflow.com/users/6382969/phcoder"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479922454, "post_id": 40770791, "comment_id": 68765538, "body": "Okay Thanks. However, proceeding with that now will make me do a lot of change in the code base. Do you have any idea about solution for the above situation?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479922880, "post_id": 40770791, "comment_id": 68765799, "body": "You&#39;ll need a pointer to the derived class object to call that function pointer correctly, so effectively you&#39;ll need to know the derived class type, that you can cast <code>this</code> to it. May be a template function (not to confuse with the mentioned <i>Template Function Pattern</i>) could be a viable solution."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1479925263, "post_id": 40770791, "comment_id": 68767220, "body": "Show some actual code and say <i>what</i> didn&#39;t work, if you want help. Currently it&#39;s not at all clear what problem you&#39;re having."}], "answers": [{"comments": [{"owner": {"reputation": 996, "user_id": 6382969, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6573906dc8d142351d2f6ec09fd942ce?s=128&d=identicon&r=PG&f=1", "display_name": "PHcoDer", "link": "https://stackoverflow.com/users/6382969/phcoder"}, "edited": false, "score": 0, "creation_date": 1479923525, "post_id": 40771149, "comment_id": 68766198, "body": "Thanks. But here the pointer to member function is also of Base class."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "reply_to_user": {"reputation": 996, "user_id": 6382969, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6573906dc8d142351d2f6ec09fd942ce?s=128&d=identicon&r=PG&f=1", "display_name": "PHcoDer", "link": "https://stackoverflow.com/users/6382969/phcoder"}, "edited": false, "score": 0, "creation_date": 1479923560, "post_id": 40771149, "comment_id": 68766222, "body": "I don&#39;t know what you mean. Can you improve the question?"}, {"owner": {"reputation": 996, "user_id": 6382969, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6573906dc8d142351d2f6ec09fd942ce?s=128&d=identicon&r=PG&f=1", "display_name": "PHcoDer", "link": "https://stackoverflow.com/users/6382969/phcoder"}, "edited": false, "score": 0, "creation_date": 1479923642, "post_id": 40771149, "comment_id": 68766261, "body": "Done. Please see the example code again. I made some errors in the example code previously."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "reply_to_user": {"reputation": 996, "user_id": 6382969, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6573906dc8d142351d2f6ec09fd942ce?s=128&d=identicon&r=PG&f=1", "display_name": "PHcoDer", "link": "https://stackoverflow.com/users/6382969/phcoder"}, "edited": false, "score": 0, "creation_date": 1479923721, "post_id": 40771149, "comment_id": 68766319, "body": "What happens when you try <code>(this-&gt;*fncPtr)()</code>?"}, {"owner": {"reputation": 996, "user_id": 6382969, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6573906dc8d142351d2f6ec09fd942ce?s=128&d=identicon&r=PG&f=1", "display_name": "PHcoDer", "link": "https://stackoverflow.com/users/6382969/phcoder"}, "edited": false, "score": 1, "creation_date": 1479923786, "post_id": 40771149, "comment_id": 68766368, "body": "I tried that but eclipse IDE was throwing error. Now after project clean it did work. Thanks!"}], "tags": [], "owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "is_accepted": false, "score": 1, "last_activity_date": 1479923267, "creation_date": 1479923267, "answer_id": 40771149, "question_id": 40770791, "link": "https://stackoverflow.com/questions/40770791/c-calling-a-function-from-derived-by-a-function-pointer-defined-in-base-class/40771149#40771149", "title": "C++: Calling a function from derived by a function pointer defined in base class", "body": "<p>Given a pointer to member function of <code>Derived</code>:</p>\n\n<pre><code>void (Derived::*derivedFncPtr)() = &amp;Derived::someMemberFunction;\n</code></pre>\n\n<p>First, cast it to a pointer to member function of <code>Base</code>:</p>\n\n<pre><code>void (Base::*baseFncPtr)() = static_cast&lt;void (Base::*)()&gt;(derivedFncPtr);\n</code></pre>\n\n<p>Then, call it: (assuming <code>*this</code> is a <code>Base</code> with dynamic type <code>Derived</code>)</p>\n\n<pre><code>(this-&gt;*baseFncPtr)();\n</code></pre>\n\n<p><a href=\"http://ideone.com/WpaLcf\" rel=\"nofollow noreferrer\">Live example</a></p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1479924357, "last_edit_date": 1479924357, "creation_date": 1479924003, "answer_id": 40771346, "question_id": 40770791, "link": "https://stackoverflow.com/questions/40770791/c-calling-a-function-from-derived-by-a-function-pointer-defined-in-base-class/40771346#40771346", "title": "C++: Calling a function from derived by a function pointer defined in base class", "body": "<p>If you have a pointer to member function of base <code>void (Base::*fncPtr)()</code>, you can call it with a pointer to derived object <code>this</code> in exactly the same way as you would call a pointer to member function of that same derived class.</p>\n\n<pre><code>(this-&gt;*fncPtr)();\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/dc3f9d62822a1196\" rel=\"nofollow noreferrer\">Demo here</a></p>\n\n<hr>\n\n<blockquote>\n<pre><code>(((Base)this)-&gt;*fncPtr)();\n</code></pre>\n</blockquote>\n\n<p>You can explicitly cast <code>this</code> to a pointer of <code>Base</code> if you really want to (it's not required), but this is not how it is done since <code>Base</code> is not a pointer type. This would work:</p>\n\n<pre><code>((Base*)this)-&gt;*fncPtr)();\n</code></pre>\n\n<p>But as I said, the cast is redundant.</p>\n"}, {"tags": [], "owner": {"reputation": 431, "user_id": 5511758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd20f798173e1b1ed60b0191d2f8b18e?s=128&d=identicon&r=PG&f=1", "display_name": "Chor Sipahi", "link": "https://stackoverflow.com/users/5511758/chor-sipahi"}, "is_accepted": true, "score": 3, "last_activity_date": 1479929405, "creation_date": 1479929405, "answer_id": 40772718, "question_id": 40770791, "link": "https://stackoverflow.com/questions/40770791/c-calling-a-function-from-derived-by-a-function-pointer-defined-in-base-class/40772718#40772718", "title": "C++: Calling a function from derived by a function pointer defined in base class", "body": "<p>Simply use: </p>\n\n<pre><code>(this-&gt;*fncPtr)();\n</code></pre>\n\n<p>Nothing else is required. Cast to base type is implicit. So you do not need to cast it explicitly.</p>\n"}], "owner": {"reputation": 996, "user_id": 6382969, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6573906dc8d142351d2f6ec09fd942ce?s=128&d=identicon&r=PG&f=1", "display_name": "PHcoDer", "link": "https://stackoverflow.com/users/6382969/phcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "closed_date": 1479975851, "accepted_answer_id": 40772718, "answer_count": 3, "score": 1, "last_activity_date": 1479929508, "creation_date": 1479922016, "last_edit_date": 1495535417, "question_id": 40770791, "link": "https://stackoverflow.com/questions/40770791/c-calling-a-function-from-derived-by-a-function-pointer-defined-in-base-class", "closed_reason": "Not suitable for this site", "title": "C++: Calling a function from derived by a function pointer defined in base class", "body": "<p>If a function pointer is defined and assigned values in base class. And it has to be used to call a function from a class derived from it. How can we do that?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1485983/calling-c-class-methods-via-a-function-pointer\">This</a> shows an example to call functions by pointers. But this works only in case when pointer is defined in same class from where it is being used. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/357307/how-to-call-a-parent-class-function-from-derived-class-function\">This</a> shows example to call parent class function. I tried some this similar but it didn't work.</p>\n\n<pre><code>From derived\n(((Base)this)-&gt;*fncPtr)();\n(((Base)this)-&gt;*(Base::fncPtr))();\n</code></pre>\n\n<p>Both of the above doesn't work. Please help me out.</p>\n"}, {"tags": ["c++", "arrays", "sorting", "pointers"], "comments": [{"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 2, "creation_date": 1479922280, "post_id": 40770771, "comment_id": 68765450, "body": "See if you can describe in pseudocode the algorithm you hope to implement.  Your <code>ptr_sort()</code> assigns to the first element of the array as it enters the initial condition of the <code>for</code> loop, that can&#39;t be what you want."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1479922452, "post_id": 40770771, "comment_id": 68765537, "body": "The standard library looks at this operation as something which operates on a pair of iterators. Pointers are a special case of iterators, so you might want to look into how the standard operates on its given sequence, and what parts of its sorting algorithm it separates out into other functions. An example: there&#39;s a piece of code there that I&#39;m certain you want to use to swap the values pointed by two pointers (it&#39;s not), a functionality which is enclosed in the standard library&#39;s <a href=\"http://en.cppreference.com/w/cpp/algorithm/iter_swap\" rel=\"nofollow noreferrer\"><code>iter_swap</code></a>."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 3, "creation_date": 1479922760, "post_id": 40770771, "comment_id": 68765730, "body": "You seem to be confused about the behavior of pointers, as well--iteration over a range defined by a pointer, int pair is usually done with <code>for(int index = 0; index &lt; size; ++index)</code> rather than the construct you have here, which is, for one thing, setting the first value of the array to 0. A suggestion: try to write code to sort an array of items that <i>aren&#39;t</i> capable of interacting with <code>int</code> and pointers via math operations, then change your code to operate on the requested integer values."}, {"owner": {"reputation": 73, "user_id": 6688296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95813f51201e306db295920f8ac1a76?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/6688296/mojo"}, "edited": false, "score": 0, "creation_date": 1479923011, "post_id": 40770771, "comment_id": 68765877, "body": "I think I understand what you are saying. Ill write out some pseudocode and then change my loops and see if I can break it down from there. I appreciate the help guys. will let you know if I figure it out."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6688296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95813f51201e306db295920f8ac1a76?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/6688296/mojo"}, "edited": false, "score": 0, "creation_date": 1479924985, "post_id": 40771094, "comment_id": 68767054, "body": "I want to thank all of you. You all gave me a MUCH better understanding of arrays and pointers. Thanks for taking the time to help!"}], "tags": [], "owner": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "is_accepted": true, "score": 1, "last_activity_date": 1479923662, "last_edit_date": 1479923662, "creation_date": 1479923083, "answer_id": 40771094, "question_id": 40770771, "link": "https://stackoverflow.com/questions/40770771/trouble-manually-sorting-an-array-using-pointers/40771094#40771094", "title": "Trouble manually sorting an array using pointers", "body": "<p>So there are a few problems in your code:</p>\n\n<pre><code>int main()\n{\n    int array[5] = { 28, 87, -3, 45, 19 } ;\n    int size = sizeof(array)/sizeof(array[0]) ;\n    int a = array[0] ;\n\n    cout &lt;&lt; \"Original array: \" ;\n\n    for(a = 0 ; a &lt; size ; a++)\n    {\n        cout &lt;&lt; array[a] &lt;&lt; \" \" ;\n    }\n    cout &lt;&lt; endl ;\n\n    ptr_sort(&amp;a, size) ;\n</code></pre>\n\n<p>You had defined <code>int a</code> and then you assigned to it first item of your array. I guess this is not what you wanted, because at the end of code I've cited You pass pointer to <code>a</code> variable into sorting function. You probably wanted to pass pointer to array to sorting function. Also you use your <code>a</code> variable in for and you completly change its initial value.</p>\n\n<pre><code>void ptr_sort(int *aptr, int size)\n{\nint temp ;\nint b = *aptr += 1 ;\n\nfor(*aptr = 0 ; *aptr &lt; size ; aptr++)\n{\n    if ( *aptr &lt; b)\n    {\n        temp = *aptr ;\n        *aptr = b ;\n        b = temp ;\n    }\n\n}\n</code></pre>\n\n<p>Here above there also a few problems:</p>\n\n<ol>\n<li><code>b</code> actually never changes, so comparing it in in for loop for sorting is a little bit pointless.</li>\n<li>you use table's element as iterator in your loop. Not good.</li>\n<li>your sorting algoritm seems to be bubnle sort, but lacks of one extra for loop.</li>\n</ol>\n\n<p>Below I attach my version of your program which does a little bit better than your implementation. <code>ptr_sort</code> is not finished - as I seed you need extra <code>for</code>.\nCompare it with your work and ask if You have any doubts.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std ;\nvoid ptr_sort(int *aptr, int size) ;\n\nint main()\n{\nint array[5] = { 28, 87, -3, 45, 19 } ;\nint size = sizeof(array)/sizeof(array[0]) ;\n\ncout &lt;&lt; \"Original array: \" ;\n\nfor(int i = 0 ; i &lt; size ; i++)\n{\n    cout &lt;&lt; array[i] &lt;&lt; \" \" ;\n}\ncout &lt;&lt; endl ;\n\nptr_sort(array, size) ;\n\ncout &lt;&lt; \"Sorted array: \" ;\n\nfor(int i = 0 ; i &lt; size ; i++)\n{\n    cout &lt;&lt; array[i] &lt;&lt; \" \" ;\n}\ncout &lt;&lt; endl ;\n\nreturn 0 ;\n}\n\n\nvoid ptr_sort(int *aptr, int size)\n{\n\nfor(int i = 0 ; i &lt; size - 1; i++)\n{\n    if ( aptr[i] &lt; aptr[i + 1] )\n    {\n        std::swap(aptr[i], aptr[i + 1]);\n    }\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6688296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95813f51201e306db295920f8ac1a76?s=128&d=identicon&r=PG&f=1", "display_name": "Mojo", "link": "https://stackoverflow.com/users/6688296/mojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1479974709, "accepted_answer_id": 40771094, "answer_count": 1, "score": 2, "last_activity_date": 1479923662, "creation_date": 1479921952, "question_id": 40770771, "link": "https://stackoverflow.com/questions/40770771/trouble-manually-sorting-an-array-using-pointers", "closed_reason": "Not suitable for this site", "title": "Trouble manually sorting an array using pointers", "body": "<p>I understand this may be a simple process for some of you, but I have been working on this task for the last two weeks and have tried multiple different ways to implement a sorting procedure of an array, in a function, without passing the entire array into the function. I am only allowed to pass a pointer and the size of the array. I'm not looking for the answer to be given to me just some general tips and understanding of passing pointers into functions that control arrays. I've searched the internet and my books but most everything recommends using the premade sort function. however I have to create one myself. Below is, what i feel, the closest i've gotten to the correct code. Any help is greatly appreciated.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std ;\nvoid ptr_sort(int *aptr, int size) ;\n\nint main()\n{\nint array[5] = { 28, 87, -3, 45, 19 } ;\nint size = sizeof(array)/sizeof(array[0]) ;\nint a = array[0] ;\n\ncout &lt;&lt; \"Original array: \" ;\n\nfor(a = 0 ; a &lt; size ; a++)\n{\n    cout &lt;&lt; array[a] &lt;&lt; \" \" ;\n}\ncout &lt;&lt; endl ;\n\nptr_sort(&amp;a, size) ;\n\ncout &lt;&lt; \"Sorted array: \" ;\n\nfor(a = 0 ; a &lt; size ; a++)\n{\n    cout &lt;&lt; array[a] &lt;&lt; \" \" ;\n}\ncout &lt;&lt; endl ;\n\nreturn 0 ;\n}\n\n\nvoid ptr_sort(int *aptr, int size)\n{\nint temp ;\nint b = *aptr += 1 ;\n\nfor(*aptr = 0 ; *aptr &lt; size ; aptr++)\n{\n    if ( *aptr &lt; b)\n    {\n        temp = *aptr ;\n        *aptr = b ;\n        b = temp ;\n    }\n}\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 2, "creation_date": 1479921565, "post_id": 40770556, "comment_id": 68765072, "body": "<code>F11</code> is &quot;step <i>into</i>&quot;. Unless you want the debugger to go into a method call, <code>F10</code> to &quot;step over&quot;. Enabling &quot;Just My Code&quot; will keep the debugger from stepping into code that is not in your current solution (and acts as &quot;step over&quot; for code that is not yours)."}, {"owner": {"reputation": 3966, "user_id": 1142380, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rM8f6.jpg?s=128&g=1", "display_name": "ToastyMallows", "link": "https://stackoverflow.com/users/1142380/toastymallows"}, "edited": false, "score": 0, "creation_date": 1479922149, "post_id": 40770556, "comment_id": 68765379, "body": "The only time I&#39;ve stepped into framework code is to look for a potential bug, It probably won&#39;t be useful to you right now."}, {"owner": {"reputation": 1, "user_id": 7201191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jQTV.jpg?s=128&g=1", "display_name": "tonystarkwannabe", "link": "https://stackoverflow.com/users/7201191/tonystarkwannabe"}, "edited": false, "score": 0, "creation_date": 1479923101, "post_id": 40770556, "comment_id": 68765931, "body": "Hey, awesome. Thanks!"}], "owner": {"reputation": 1, "user_id": 7201191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jQTV.jpg?s=128&g=1", "display_name": "tonystarkwannabe", "link": "https://stackoverflow.com/users/7201191/tonystarkwannabe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479921317, "creation_date": 1479921317, "question_id": 40770556, "link": "https://stackoverflow.com/questions/40770556/stepping-through-visual-studio-2015-different-code-shows-up", "title": "Stepping Through Visual Studio 2015 -- Different Code Shows Up", "body": "<p>When I press F11 to step through a C++ or C# program in Visual Studio Enterprise 2015, I notice that a few steps into main() a completely different set of code shows up. </p>\n\n<p>What I've researched and answers I've been given leads me to understand that this is the framework. </p>\n\n<p>What is the benefit of this? In the future, will making any changes to the framework (if that is in fact what it is) have an impact on my code or my application? </p>\n\n<p>Will disabling this matter? I know in the preferences you can select \"Just My Code\" under debugging. I'm not sure if that skips the \"framework\" sections of the step through or not, as I've not had an opportunity to try it.</p>\n\n<p>Any insight or information would be greatly appreciated.</p>\n\n<p>Thank you for your time.</p>\n\n<p>-- TSW</p>\n"}, {"tags": ["c++", "api", "winapi", "label"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1479922580, "post_id": 40770518, "comment_id": 68765624, "body": "This question needs more context. How is the data processing (for which progress bar is displayed) being done, in regards to attempt to set new status? If it is being done without pumping message loop, during the processing, your attempts at sending the message to the control, won&#39;t execute, until your processing ends, and messages are pumped from the message loop. Side note: your attempts 1-3 are all equivalent = does exactly the same thing, since <code>SetWindowText</code> translates to <code>SendMessage</code> with <code>WM_SETTEXT</code>."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1479924390, "creation_date": 1479924390, "answer_id": 40771442, "question_id": 40770518, "link": "https://stackoverflow.com/questions/40770518/label-text-wont-update/40771442#40771442", "title": "Label text won&#39;t update", "body": "<p>If your label is a child of a dialog, and the label has a dialog item ID assigned to it, you can use this:</p>\n\n<pre><code>SetDlgItemText(hwndMyDialog, ID_LABEL_STATUS, TEXT(\"Doing stuff ..\"));\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>HWND label = ...; //label = GetDlgItem(hwndMyDialog, ID_LABEL_STATUS);\n\nSetWindowText(label, TEXT(\"Doing stuff ..\"));\n//or\n//SendMessage(label, WM_SETTEXT, 0, reinterpret_cast&lt;LPARAM&gt;(TEXT(\"Doing stuff ..\")));\n</code></pre>\n\n<p>Either way, if the label text is not updating on-screen correctly, then chances are you are probably doing something to block the calling thread's message loop from processing new paint messages (such as updating the label in a loop that is doing something else).  At the very least, you can use <code>UpdateWindow()</code> to process pending paints:</p>\n\n<pre><code>UpdateWindow(hwndMyDialog);\n</code></pre>\n\n<p></p>\n\n<pre><code>UpdateWindow(label);\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4681675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1743b9f89a9eb9abb0e3996a723bc416?s=128&d=identicon&r=PG&f=1", "display_name": "TheCodingBook", "link": "https://stackoverflow.com/users/4681675/thecodingbook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 40771442, "answer_count": 1, "score": 0, "last_activity_date": 1479924390, "creation_date": 1479921198, "last_edit_date": 1479921463, "question_id": 40770518, "link": "https://stackoverflow.com/questions/40770518/label-text-wont-update", "title": "Label text won&#39;t update", "body": "<h3>About</h3>\n\n<p>I have a simple app with tabcontrols, buttons and a progressbar.\nNow I want a simple label/text above the progressbar which says something like \"Waiting ..\", \"Progress (0%)\" etc.</p>\n\n<h3>Issue</h3>\n\n<p>The Label does not update.</p>\n\n<h3>Wanted</h3>\n\n<p>A simple solution to update a label. (similar to .NET).</p>\n\n<pre><code>'Like this\nLabel1.Text = \"Doing stuff ..\"\n</code></pre>\n\n<h3>Attempts</h3>\n\n1\n\n<pre><code>GetDlgItem( HWND_LABEL_STATUS, INDEX_LABEL_STATUS );\nSetWindowText( HWND_LABEL_STATUS, \"Doing stuff ..\" );\n</code></pre>\n\n2\n\n<pre><code>SendMessage( HWND_LABEL_STATUS, WM_SETTEXT, INDEX_LABEL_STATUS , reinterpret_cast&lt; LPARAM &gt;( LPCTSTR( \"Doing stuff ..\" ) ) );\n</code></pre>\n\n3\n\n<pre><code>HWND label = GetDlgItem( HWND_LABEL_STATUS, INDEX_LABEL_STATUS  );\nlabel-&gt;SetWindowText( \"Doing stuff ..\" );\n</code></pre>\n\n4\n\n<pre><code>SetWindowText( HWND_LABEL_STATUS, \"Doing stuff ..\" );\n// and/or\nSetDlgItemText( HWND_LABEL_STATUS, INDEX_LABEL_STATUS, \"Doing stuff ..\" );\nRedrawWindow( HWND_LABEL_STATUS, nullptr, nullptr, RDW_ERASE | RDW_INVALIDATE | RDW_UPDATENOW);\n</code></pre>\n"}, {"tags": ["c++", "quantlib"], "answers": [{"comments": [{"owner": {"reputation": 2814, "user_id": 2423123, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/LuGtD.jpg?s=128&g=1", "display_name": "Clawish", "link": "https://stackoverflow.com/users/2423123/clawish"}, "edited": false, "score": 0, "creation_date": 1575282749, "post_id": 40784105, "comment_id": 104501124, "body": "With QuantLib 1.16 I&#39;m trying to implement a <code>FixedRateBond</code> with a custom schedule with the Python bindings. I cannot make it work, it keeps throwing <code>full interface (tenor) not available</code> upon instantiating the <code>FixedRateBond</code>. What I&#39;m passing as a schedule is <code>ql.Schedule(interest_payment_dates, ql.NullCalendar(), ql.Unadjusted, None, None, None, True, np.repeat(False, len(interest_payment_dates)-1).tolist())</code> with <code>interest_payment_dates</code> being an array of some <code>Date</code>s. How come this arrises?"}], "tags": [], "owner": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "is_accepted": true, "score": 3, "last_activity_date": 1479983683, "creation_date": 1479983683, "answer_id": 40784105, "question_id": 40770485, "link": "https://stackoverflow.com/questions/40770485/quantlib-passing-a-date-vector-to-schedule-class/40784105#40784105", "title": "Quantlib passing a date vector to Schedule class", "body": "<p>Since a few releases, the constructor that takes a vector of dates has been expanded (as suggested in the link you quoted) to take additional parameters.  It is now declared as:</p>\n\n<pre><code>Schedule(const std::vector&lt;Date&gt;&amp;,\n         const Calendar&amp; calendar = NullCalendar(),\n         const BusinessDayConvention\n                                convention = Unadjusted,\n         boost::optional&lt;BusinessDayConvention&gt;\n                 terminationDateConvention = boost::none,\n         const boost::optional&lt;Period&gt; tenor = boost::none,\n         boost::optional&lt;DateGeneration::Rule&gt; rule = boost::none,\n         boost::optional&lt;bool&gt; endOfMonth = boost::none,\n         const std::vector&lt;bool&gt;&amp; isRegular = std::vector&lt;bool&gt;(0));\n</code></pre>\n\n<p>so you can pass any missing information that the schedule is not able to figure out from the dates; for example, you can pass <code>isRegular</code> as <code>vector&lt;bool&gt;(n, true)</code> where <code>n</code> is the number of dates in the schedule (assuming the periods are regular, of course; in case you have a short or long coupon, you should put a <code>false</code> in the vector at the corresponding position).</p>\n"}], "owner": {"reputation": 111, "user_id": 4838515, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/665cea02c739869c96478d1f4bc329b1?s=128&d=identicon&r=PG&f=1", "display_name": "Ben10", "link": "https://stackoverflow.com/users/4838515/ben10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 0, "accepted_answer_id": 40784105, "answer_count": 1, "score": 2, "last_activity_date": 1479983683, "creation_date": 1479921065, "question_id": 40770485, "link": "https://stackoverflow.com/questions/40770485/quantlib-passing-a-date-vector-to-schedule-class", "title": "Quantlib passing a date vector to Schedule class", "body": "<p>I appreciate that Quantlib Schedule class can take a date vector as constructor. I have successfully built a schedule via this way. However, when I pass this schedule to vanillaswap constructor, the code starts to generate error on function <code>bool Schedule::isRegular(Size i) const</code> in schedule.cpp. Here is part of my code related to this error:</p>\n\n<pre><code>vector&lt;Date&gt; fixedDates;\nvector&lt;Date&gt; floatDates;\n\nfixedDates.push_back(Date(15, April, 2016));\nfixedDates.push_back(Date(18, April, 2017));\nfloatDates.push_back(Date(15, April, 2016));\nfloatDates.push_back(Date(15, July, 2016));\nfloatDates.push_back(Date(17, October, 2016));\nfloatDates.push_back(Date(17, January, 2017));\nfloatDates.push_back(Date(18, April, 2017));\n\nSchedule fixedSchedule(fixedDates);\nSchedule floatSchedule(floatDates);\n\nVanillaSwap::Type swapType = VanillaSwap::Payer;\nVanillaSwap swap(swapType, nominal, fixedSchedule, fixedRate, Actual365Fixed(), floatSchedule, libor, spread, Actual365Fixed());\n</code></pre>\n\n<p>When I run my code, it fails due to this <code>isRegular_.size()</code> return 0. </p>\n\n<p>I found this link is useful:\n<a href=\"http://www.implementingquantlib.com/2014/11/odds-and-ends-date-calculations.html\" rel=\"nofollow noreferrer\">http://www.implementingquantlib.com/2014/11/odds-and-ends-date-calculations.html</a></p>\n\n<p>However, I am not sure if I am complete understand the last paragraph about how to fix this problem. Is there anyone can give me an example here?</p>\n\n<p>Many thanks</p>\n"}, {"tags": ["c++", "xcode", "compilation", "openmp"], "owner": {"reputation": 934, "user_id": 3201833, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7d3d0d124622ac3534eda6b2c715326f?s=128&d=identicon&r=PG&f=1", "display_name": "lilouch", "link": "https://stackoverflow.com/users/3201833/lilouch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 447, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479920970, "creation_date": 1479920970, "question_id": 40770458, "link": "https://stackoverflow.com/questions/40770458/find-openmp-with-cmake-by-using-the-command-line", "title": "Find OpenMP with Cmake by using the command line", "body": "<p>I'm struggling with OpenMP and Xcode.</p>\n\n<p>I would like to use OpenMP on my project. So far, I have set up everything on my CMakeList.</p>\n\n<p>Just to be clear, I have to generate the Xcode project by using the following command line :</p>\n\n<pre><code>cmake -G Xcode .\n</code></pre>\n\n<p>With this command line, I have a .xcodeproj project which is created and I just have to build the project using Xcode.</p>\n\n<p>Now I would like to integrate OpenMP and obviously If I do nothing, I have an error saying that OpenMP has not been found.</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"_omp_set_nested\", referenced from:\n</code></pre>\n\n<p>So I integrate on my CMakeList the following lines : </p>\n\n<pre><code>find_package(OpenMP)\n\nif(OPENMP_FOUND)\n  set(CMAKE_C_FLAGS \"${CMAKE_C_FLAGS} ${OpenMP_C_FLAGS}\")\n  set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} ${OpenMP_CXX_FLAGS}\")\n  set(HAVE_OPENMP 1)\n  message(STATUS \"HAVE_OPENMP status ${HAVE_OPENMP}\")\nelse(OPENMP_FOUND)\n  message (STATUS \"Not found OpenMP\")\nendif()\n</code></pre>\n\n<p>But during the compilation, OpenMP is not found.</p>\n\n<pre><code>-- Try OpenMP C flag = [-fopenmp=libomp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP C flag = [ ]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP C flag = [-fopenmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP C flag = [/openmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP C flag = [-Qopenmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP C flag = [-openmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP C flag = [-xopenmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP C flag = [+Oopenmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP C flag = [-qsmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP C flag = [-mp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP CXX flag = [-fopenmp=libomp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP CXX flag = [ ]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP CXX flag = [-fopenmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP CXX flag = [/openmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP CXX flag = [-Qopenmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP CXX flag = [-openmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP CXX flag = [-xopenmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP CXX flag = [+Oopenmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP CXX flag = [-qsmp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\n-- Try OpenMP CXX flag = [-mp]\n-- Performing Test OpenMP_FLAG_DETECTED\n-- Performing Test OpenMP_FLAG_DETECTED - Failed\nCMake Error at /usr/local/Cellar/cmake/3.6.0_1/share/cmake/Modules/FindPackageHandleStandardArgs.cmake:148 (message):\n  Could NOT find OpenMP (missing: OpenMP_C_FLAGS OpenMP_CXX_FLAGS)\n</code></pre>\n\n<p>So I looked for informations on the internet. \nI have installed clang-omp and was careful about using this following command line :</p>\n\n<pre><code>CC=clang-omp CXX=clang-omp++ cmake Xcode .\n</code></pre>\n\n<p>It worked, OpenMp is found but well I'm not satisfied because I need to generate an Xcode Project. So I used this time the following command line :</p>\n\n<pre><code>CC=clang-omp CXX=clang-omp++ cmake -G Xcode .\n</code></pre>\n\n<p>Notice the <strong>-G</strong> parameter.\nAnd this time, it does not work...I suspect It's because of Xcode but I don't know how to deal with it.</p>\n\n<p>After spending many times on this issue, I would like to know if there is a solution to make it work ?</p>\n\n<p>Thank you very much in advance</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1479920717, "post_id": 40770324, "comment_id": 68764601, "body": "What&#39;s unclear about the error message? If you don&#39;t want an implementation of <code>counter()</code> in <code>foo_base</code> make it a pure virtual function: <code>virtual int counter() = 0;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1567, "user_id": 1196114, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0d58e830a7ac3eff76e058275d3917a9?s=128&d=identicon&r=PG", "display_name": "M. Laing", "link": "https://stackoverflow.com/users/1196114/m-laing"}, "is_accepted": false, "score": 1, "last_activity_date": 1479920888, "creation_date": 1479920888, "answer_id": 40770423, "question_id": 40770324, "link": "https://stackoverflow.com/questions/40770324/redefining-base-class-method-in-derived-class/40770423#40770423", "title": "redefining base class method in derived class", "body": "<p>Inside </p>\n\n<pre><code>class foo_base {\n\n    foo_base(){};\n    ~foo_base(){};\n\n    virtual int counter(){};\n};\n</code></pre>\n\n<p>You define a function for <code>counter</code> that does not return an integer. Change to (Base Class will return 0, derived will override):</p>\n\n<pre><code>class foo_base {\n\n    foo_base(){};\n    ~foo_base(){};\n\n    virtual int counter(){return 0;};\n};\n</code></pre>\n\n<p>And it should compile</p>\n"}, {"tags": [], "owner": {"reputation": 234, "user_id": 2423201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdafd787c747ebf09f403652146be346?s=128&d=identicon&r=PG", "display_name": "Peter Merkert", "link": "https://stackoverflow.com/users/2423201/peter-merkert"}, "is_accepted": false, "score": 0, "last_activity_date": 1479920910, "creation_date": 1479920910, "answer_id": 40770433, "question_id": 40770324, "link": "https://stackoverflow.com/questions/40770324/redefining-base-class-method-in-derived-class/40770433#40770433", "title": "redefining base class method in derived class", "body": "<p>You cannot implement your <code>counter()</code> function for the <code>foo_base</code> class in <code>foo_derived</code>. What you probably want is to make is either (1) make the base class abstract or (2) provide a implementation in <code>foo_base</code> for <code>counter()</code>.</p>\n\n<p>However, if you define the <code>counter()</code> not as pure virtual (i.e. <code>virtual int counter() = 0;</code>, the compiler will complain, because you need an implementation.\nOne option would be to replace <code>virtual int counter(){};</code> with <code>virtual int counter(){ return 0; };</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 6305055, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209315018302634/picture?type=large", "display_name": "SeanRamzan", "link": "https://stackoverflow.com/users/6305055/seanramzan"}, "is_accepted": false, "score": 1, "last_activity_date": 1479921623, "creation_date": 1479921623, "answer_id": 40770663, "question_id": 40770324, "link": "https://stackoverflow.com/questions/40770324/redefining-base-class-method-in-derived-class/40770663#40770663", "title": "redefining base class method in derived class", "body": "<p>You need to have the counter() function in the base class return an int. You defined the return type of the function, yet did not provide a proper definition of the function. That should fix <em>that</em> issue, but you have others as well.</p>\n\n<p>When you define classes, you cannot have the destrcutors be marked as private. In C++, unlike Java, variables &amp; functions are 'private' by default. You need to explicitly mark members as public in order to make them public.</p>\n\n<p>To fix your first issue:</p>\n\n<pre><code>`virtual int counter(){ return 0 }; //It doesn't have to return 0, just an int. Used this for demo sake'\n</code></pre>\n\n<p>To fix your second issue:</p>\n\n<pre><code>class foo_base {\npublic: // This will make everything below public, so only do this if your goal is to have everything marked as public (i.e. use private where necessary)\n    foo_base(){};\n    ~foo_base(){};\n\n    virtual int counter(){};\n};\n\nclass foo_derived : public foo_base{\npublic:\n    foo_derived(){};\n    ~foo_derived(){};\n\n    int counter() {   int temp = 0;\n        for(int i = 0; i &lt; 10;)\n            temp += i;\n        return temp;\n        }\n};\n</code></pre>\n\n<p>As commented in the code, use public where necessary. But, it doesn't make sense to mark your constructor as private in this scenario (based on the code presented). Again, that is your choice. The destructor, however, must be marked as public in order for inheritance to work.</p>\n"}, {"tags": [], "owner": {"reputation": 319, "user_id": 6556961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaf72013eb619cd7609340128addd4e1?s=128&d=identicon&r=PG&f=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/6556961/enigma"}, "is_accepted": false, "score": 1, "last_activity_date": 1479922196, "creation_date": 1479922196, "answer_id": 40770831, "question_id": 40770324, "link": "https://stackoverflow.com/questions/40770324/redefining-base-class-method-in-derived-class/40770831#40770831", "title": "redefining base class method in derived class", "body": "<p>Checklist:</p>\n\n<ol>\n<li><p>Your constructors are private, make them public if you want to derive and use.</p></li>\n<li><p>In your for loop, increment <code>i</code>, right now its infinite loop</p></li>\n<li><p>Not sure of your compiler but most compilers do not throw errors if the control reaches at the end of the function without a return statement, it displays a warning. However, if you see an error, you should <code>return 0</code> or something to make the compiler happy.</p></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 6723090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84b915ab0a607665e1f413277ec3ef39?s=128&d=identicon&r=PG&f=1", "display_name": "Rommel", "link": "https://stackoverflow.com/users/6723090/rommel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1036, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1479922196, "creation_date": 1479920584, "question_id": 40770324, "link": "https://stackoverflow.com/questions/40770324/redefining-base-class-method-in-derived-class", "title": "redefining base class method in derived class", "body": "<p>I have base class name foo_base</p>\n\n<pre><code>class foo_base {\n\n    foo_base(){};\n    ~foo_base(){};\n\n    virtual int counter(){};\n};\n\nclass foo_derived : public foo_base{\n\n    foo_derived(){};\n    ~foo_derived(){};\n\n    int counter() {   int temp = 0;\n            for(int i = 0; i &lt; 10;)\n                temp += i;\n            return temp;\n            }\n};\n\n\nint main(){\n\nint numbers  = 0;\n\nfoo_base * foo_base_ptr;\nfoo_base_ptr = new foo_derived();\n\nnumbers = foo_base_ptr-&gt;counter();   /*error */\n\n\ndelete foo_base_ptr;\n\nreturn 0;\n}\n</code></pre>\n\n<p>when I try to compile program I got this error:</p>\n\n<pre><code>error C4716: 'foo_base::counter' : must return a value  \n</code></pre>\n\n<p>I want define counter() in the foo_drived. how can I do that?\nIs there any way to redefine foo_base method in the foo_derived class?</p>\n"}, {"tags": ["c++", "linux", "openmp"], "answers": [{"tags": [], "owner": {"reputation": 666, "user_id": 1525953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2371a6f5a2706bdd58b316770ccb3093?s=128&d=identicon&r=PG", "display_name": "Boo Radley", "link": "https://stackoverflow.com/users/1525953/boo-radley"}, "is_accepted": false, "score": 1, "last_activity_date": 1479926451, "last_edit_date": 1479926451, "creation_date": 1479921237, "answer_id": 40770529, "question_id": 40770263, "link": "https://stackoverflow.com/questions/40770263/omp-init-lockomp-lock-t-what-does-this-function-do-exactly/40770529#40770529", "title": "omp_init_lock(omp_lock_t*) - What does this function do EXACTLY?", "body": "<p>It looks like the <code>omp_init_lock</code> function is initializing the lock variable for setting/unsetting. This would include allocating any required memory used for the lock and setting the initial state to 'unlocked'. You should expect unpredictable results without proper initialization. </p>\n\n<blockquote>\n  <p>OMP_INIT_LOCK     Initializes a lock associated with the lock variable</p>\n</blockquote>\n\n<p>Source: <a href=\"https://computing.llnl.gov/tutorials/openMP/#OMP_SET_LOCK\" rel=\"nofollow noreferrer\">LLNL OpenMP Tutorials</a></p>\n"}, {"comments": [{"owner": {"reputation": 545, "user_id": 6148265, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f0a1a4f3742f42399eabd5729c54a71b?s=128&d=identicon&r=PG&f=1", "display_name": "Addzy K", "link": "https://stackoverflow.com/users/6148265/addzy-k"}, "edited": false, "score": 0, "creation_date": 1479982506, "post_id": 40783277, "comment_id": 68789756, "body": "Thanks. :) It should throw a warning or error at least to let people know that the state of the lock is uninitialized. Oh, well."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "reply_to_user": {"reputation": 545, "user_id": 6148265, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f0a1a4f3742f42399eabd5729c54a71b?s=128&d=identicon&r=PG&f=1", "display_name": "Addzy K", "link": "https://stackoverflow.com/users/6148265/addzy-k"}, "edited": false, "score": 0, "creation_date": 1480002778, "post_id": 40783277, "comment_id": 68803142, "body": "The lock operation is supposed to be as fast as possible, therefore checking the lock variable each and every time is simply not practical. There are correctness checking tools that detect such problems in your code, such as Thread Analyzer (part of Oracle Solaris Studio, former Sun Studio)."}], "tags": [], "owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "is_accepted": false, "score": 6, "last_activity_date": 1479981787, "creation_date": 1479981787, "answer_id": 40783277, "question_id": 40770263, "link": "https://stackoverflow.com/questions/40770263/omp-init-lockomp-lock-t-what-does-this-function-do-exactly/40783277#40783277", "title": "omp_init_lock(omp_lock_t*) - What does this function do EXACTLY?", "body": "<p>An OpenMP lock can be in one of three possible states: <em>unintialized</em>, <em>unlocked</em>, or <em>locked</em> (Section 3.3 of the <a href=\"http://www.openmp.org/wp-content/uploads/openmp-4.5.pdf\" rel=\"noreferrer\">OpenMP specification</a>). When declared, but not initialised via a call to <code>omp_init_lock()</code>, a lock is in <em>unitialized</em> state. Calling <code>omp_init_lock()</code> transitions the lock into <em>unlocked</em> state. From then on, the lock can be first <em>locked</em> using <code>omp_set_lock()</code> and then <em>unlocked</em> using <code>omp_unset_lock()</code>.</p>\n\n<p>Calling <code>omp_set_lock()</code> on a lock that is in <em>uninitialized</em> state is erroneous (Section 3.3.4). Calling <code>omp_unset_lock()</code> on a lock that is not in <em>locked</em> state, which includes <em>uninitialized</em>, is also erroneous (Section 3.3.5).</p>\n\n<p>That your program works under <em>specific conditions</em> without properly initialising the lock is an <strong>unspecified behaviour</strong>.</p>\n"}], "owner": {"reputation": 545, "user_id": 6148265, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f0a1a4f3742f42399eabd5729c54a71b?s=128&d=identicon&r=PG&f=1", "display_name": "Addzy K", "link": "https://stackoverflow.com/users/6148265/addzy-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3163, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1479981787, "creation_date": 1479920363, "last_edit_date": 1479925063, "question_id": 40770263, "link": "https://stackoverflow.com/questions/40770263/omp-init-lockomp-lock-t-what-does-this-function-do-exactly", "title": "omp_init_lock(omp_lock_t*) - What does this function do EXACTLY?", "body": "<pre><code># include &lt;iostream&gt;\n# include &lt;cstdlib&gt;\n# include &lt;omp.h&gt;\n\n#define SIZE 10\n#define NUM_THREADS SIZE\n\nusing namespace std;\n\nmain() {\n\nomp_lock_t lock;\n//omp_init_lock(&amp;lock);\n\nsrand(time(NULL));  \n\nint arr[SIZE], max = -1;\n\nomp_set_num_threads(NUM_THREADS);\n\nfor(int i = 0; i &lt; SIZE; i++)\n    arr[i] = rand()%100;\n\n#pragma omp parallel for\nfor(int i = 0; i &lt; SIZE; i++) {\n    omp_set_lock(&amp;lock);\n        if(arr[i] &gt; max)\n            max = arr[i];\n    omp_unset_lock(&amp;lock);\n}\n\ncout &lt;&lt; \"Max: \" &lt;&lt; max &lt;&lt; endl;\n</code></pre>\n\n<p>}</p>\n\n<p>This is the code, I wrote to find the max element in an array using openMP lock feature. Whenever I skipped that function <code>omp_init_lock</code>, my code would not execute. It would still compile successfully but all my threads would stop after they entered the for loop <strong>whenever the SIZE of the array was a small number (like 10 or 20)</strong>. Other times it would run without problems (when the size of the array was a large number like 100).</p>\n\n<p>But <code>omp_init_lock()</code> solves all problems. How? I searched but could not find much about it. Only thing mentioned was that it initializes the lock to an unlocked state. Why is the code running when size of the array is 100 even though I don't initialize the lock?</p>\n\n<p>So what exactly is <code>omp_init_lock()</code> doing in detail?</p>\n"}, {"tags": ["python", "c++"], "owner": {"reputation": 71, "user_id": 1019201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd0d50d5895ac6a9d610f0d60be3b54?s=128&d=identicon&r=PG", "display_name": "Marko Mizdrak", "link": "https://stackoverflow.com/users/1019201/marko-mizdrak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1479920172, "creation_date": 1479920172, "question_id": 40770195, "link": "https://stackoverflow.com/questions/40770195/accessing-variables-of-a-c-class-with-ecspython", "title": "Accessing variables of a C++ class with ECS:Python", "body": "<p>I have a class (like below) in C++. I can use ECS:Python to run python scripts that can run <code>doSomething()</code> on an exposed instance of the <code>Foo</code> class. However, Any time I try to do anything with <code>i</code> (set its value to another variable or change the value) in this function I get the error \"Access violation reading location 0xFFFFFFFFFFFFFFFF\". I do not get the same error running <code>doSomething</code> on the same instance of <code>Foo</code> from C++. Is there a way I can get around this?</p>\n\n<pre><code>class Foo\n{\npublic:\n\n    Foo();\n\n    int i;\n\n    void doSomething(int R);\n\n};\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 1, "creation_date": 1479920295, "post_id": 40770144, "comment_id": 68764336, "body": "You don&#39;t have constructor of <code>Derived</code> with a single parameter (neither public nor private)... Compiler error gives a big hint it is really worth reading :)"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1479921208, "post_id": 40770144, "comment_id": 68764879, "body": "This isn&#39;t the problem, but don&#39;t use <code>std::endl</code> unless you need the extra stuff that it does. <code>&#39;\\n&#39;</code> ends a line."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4743343, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/d2543f012a7d583311fa4b5d850bf8a3?s=128&d=identicon&r=PG", "display_name": "ark262", "link": "https://stackoverflow.com/users/4743343/ark262"}, "edited": false, "score": 0, "creation_date": 1479922876, "post_id": 40770256, "comment_id": 68765797, "body": "Thanks - I actually messed up my question. It was a different error I had meant to post. It was if there&#39;s a way to use the above code on a method which is only in the derived class. The only way I can get it to work is having some default implementation in the base class, which I&#39;d rather not do but don&#39;t know if there&#39;s any way around it."}, {"owner": {"reputation": 1362, "user_id": 1576467, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/712d832cab0856d26ac5132c1560ccdb?s=128&d=identicon&r=PG", "display_name": "GameSalutes", "link": "https://stackoverflow.com/users/1576467/gamesalutes"}, "reply_to_user": {"reputation": 39, "user_id": 4743343, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/d2543f012a7d583311fa4b5d850bf8a3?s=128&d=identicon&r=PG", "display_name": "ark262", "link": "https://stackoverflow.com/users/4743343/ark262"}, "edited": false, "score": 0, "creation_date": 1479927240, "post_id": 40770256, "comment_id": 68768243, "body": "You can also use a pure virtual function on base class to make it abstract and force derived classes to implement it."}], "tags": [], "owner": {"reputation": 1362, "user_id": 1576467, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/712d832cab0856d26ac5132c1560ccdb?s=128&d=identicon&r=PG", "display_name": "GameSalutes", "link": "https://stackoverflow.com/users/1576467/gamesalutes"}, "is_accepted": false, "score": 1, "last_activity_date": 1479920348, "creation_date": 1479920348, "answer_id": 40770256, "question_id": 40770144, "link": "https://stackoverflow.com/questions/40770144/calling-function-through-iterator-fails-to-compile-on-derived-object/40770256#40770256", "title": "Calling function through iterator fails to compile on derived object", "body": "<p>line</p>\n\n<pre><code>bvec.push_back(new Derived(66));\n</code></pre>\n\n<p>does not compiler because Derived class constructor is private and is defined to take two int arguments.</p>\n\n<p>Fix that and it will compile and run:</p>\n\n<p><a href=\"http://cpp.sh/9nrkc\" rel=\"nofollow noreferrer\">http://cpp.sh/9nrkc</a></p>\n"}], "owner": {"reputation": 39, "user_id": 4743343, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/d2543f012a7d583311fa4b5d850bf8a3?s=128&d=identicon&r=PG", "display_name": "ark262", "link": "https://stackoverflow.com/users/4743343/ark262"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479920348, "creation_date": 1479920036, "question_id": 40770144, "link": "https://stackoverflow.com/questions/40770144/calling-function-through-iterator-fails-to-compile-on-derived-object", "title": "Calling function through iterator fails to compile on derived object", "body": "<p>I want to pass a pointer to a class method and call that function from an iterator. The code below fails to compile when I include a derived object.\nI've tried using a typename for the class specifier (e.g. TC::*pf) but this doesn't work. Can someone suggest how to make this work? </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nusing std::cout;\nusing std::endl;\nusing std::vector;\n\nclass Base {\n\npublic:\n\n  Base(int bval) : bval_(bval) { }\n\n  virtual void print() {\n    cout &lt;&lt; \"Base: bval:\" &lt;&lt; bval_ &lt;&lt; endl;\n  }\n\nprotected:\n  int bval_;\n};\n\nclass Derived : public Base {\n\n  Derived(int bval, int dval) : Base(bval), dval_(dval) { }\n\n  virtual void print() {\n    cout &lt;&lt; \"Derived: bval:\" &lt;&lt; bval_ &lt;&lt; \" dval:\" &lt;&lt; dval_ &lt;&lt; endl;\n  }\n\nprivate:\n  int dval_;\n};\n\ntypedef vector&lt;Base*&gt;       MyVecType;\ntypedef MyVecType::iterator MyVecTypeIter;\n\ntemplate &lt;typename T&gt;\nvoid testFunc(MyVecType&amp; v, T (Base::*pf)()) {\n\n  for (MyVecTypeIter iter = v.begin(); iter != v.end(); ++iter) {\n    ((*iter)-&gt;*pf)();\n  }\n\n}\n\n\nint main() {\n\n  MyVecType bvec;\n\n  bvec.push_back(new Base(44));\n  bvec.push_back(new Base(55));\n\n  // above compiles and runs ok, but this fails to compile\n  // with 'no matching function' error:\n  bvec.push_back(new Derived(66));\n\n  testFunc(bvec, &amp;Base::print);\n\n  return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "uml"], "comments": [{"owner": {"reputation": 30989, "user_id": 3379653, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/f97JZ.png?s=128&g=1", "display_name": "qwerty_so", "link": "https://stackoverflow.com/users/3379653/qwerty-so"}, "edited": false, "score": 1, "creation_date": 1479923412, "post_id": 40769967, "comment_id": 68766115, "body": "Read your lecture. If the script isn&#39;t nice, talk to your tutor."}], "answers": [{"tags": [], "owner": {"reputation": 1786, "user_id": 3343683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa1ceafd86220b2d8f858e881c438e7f?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir", "link": "https://stackoverflow.com/users/3343683/vladimir"}, "is_accepted": true, "score": 0, "last_activity_date": 1480361023, "creation_date": 1480361023, "answer_id": 40851928, "question_id": 40769967, "link": "https://stackoverflow.com/questions/40769967/implementation-of-uml-generalization-constraints/40851928#40851928", "title": "implementation of UML generalization constraints", "body": "<p>Your class hierarchy must be represented by Generalization Set element of UML.\nDisjoint and incomplete are attributes of this element.</p>\n"}], "owner": {"reputation": 49, "user_id": 6787704, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ae834d2e1f1d7059532930b047db70ff?s=128&d=identicon&r=PG&f=1", "display_name": "monterinio", "link": "https://stackoverflow.com/users/6787704/monterinio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 40851928, "answer_count": 1, "score": -3, "last_activity_date": 1480361023, "creation_date": 1479919474, "question_id": 40769967, "link": "https://stackoverflow.com/questions/40769967/implementation-of-uml-generalization-constraints", "title": "implementation of UML generalization constraints", "body": "<p>I have this code: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nclass User {\n    string name;\n    public:\n    User(string x):name(x)\n    {   }\n    void print() {\n        cout &lt;&lt; \"Name: \" &lt;&lt; name &lt;&lt; endl;\n    }\n};\n\nclass Director : public User\n{\npublic:\n    Director(string x) : User(x)\n    {}\n};\nclass Seller : public User\n{\npublic:\n    Seller(string x) : User(x)\n    {   }\n};\nclass Admin : public User\n{\npublic:\n    Admin(string x) : User(x)\n    {   }\n};\n\nint main() {\n\n    User x(\"A\");\n    Director z(\"B\");\n    x.print();\n    z.print();\n}\n</code></pre>\n\n<p>How using this class hierarchy can I present that classes:\nDirector, Admin, Seller are:</p>\n\n<p>-complete, disjoint (I guess it's the sample of code I have given)</p>\n\n<p>-incomplete, disjoint (will it be the same?)</p>\n\n<p>-complete, overlapping</p>\n\n<p>-incomplete, overlapping</p>\n"}, {"tags": ["c#", "c++", "visual-studio", "themes", "syntax-highlighting"], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 6517812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0abc1bb159ed92e86043f14a7fe4f2b3?s=128&d=identicon&r=PG&f=1", "display_name": "nufflee", "link": "https://stackoverflow.com/users/6517812/nufflee"}, "is_accepted": true, "score": 1, "last_activity_date": 1480000816, "last_edit_date": 1480000816, "creation_date": 1479920666, "answer_id": 40770353, "question_id": 40769938, "link": "https://stackoverflow.com/questions/40769938/how-can-i-use-different-syntax-highlighting-for-c-than-c-visual-studio/40770353#40770353", "title": "How can i use different syntax highlighting for C++ than C# (Visual Studio)", "body": "<p>I solved this by using RootSuffix. If you have same question do next: Find your Visual Studio shortcut (idk if it works on other version than 2015), right click it and on the end of the path after quotes add '/RootSuffix [ProfileName]' and change [ProfileName] with your name for new profile. When you open Visual Studio from that shortcut you will have separated settings, themes, extensions etc. If you want to get back just delete '/RootSuffix [ProfileName]' or simply make a new shortcut without it. Source: <a href=\"http://blog.slaks.net/2014-01-27/creating-multiple-visual-studio-profiles-with-rootsuffix/\" rel=\"nofollow noreferrer\">http://blog.slaks.net/2014-01-27/creating-multiple-visual-studio-profiles-with-rootsuffix/</a></p>\n"}], "owner": {"reputation": 39, "user_id": 6517812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0abc1bb159ed92e86043f14a7fe4f2b3?s=128&d=identicon&r=PG&f=1", "display_name": "nufflee", "link": "https://stackoverflow.com/users/6517812/nufflee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 40770353, "answer_count": 1, "score": -1, "last_activity_date": 1480000816, "creation_date": 1479919398, "question_id": 40769938, "link": "https://stackoverflow.com/questions/40769938/how-can-i-use-different-syntax-highlighting-for-c-than-c-visual-studio", "title": "How can i use different syntax highlighting for C++ than C# (Visual Studio)", "body": "<p>I have two themes and one I use just for C# and other for C++, but I'm already tierd of changing theme every time when i want to program in other language, so my question is how to have different themes/syntax highlithings for those two languages, is there some extension or trick to do it?</p>\n"}, {"tags": ["c++", "function", "loops", "boolean"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1479919177, "post_id": 40769816, "comment_id": 68763608, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1479919185, "post_id": 40769816, "comment_id": 68763618, "body": "Did you try using the debugger?"}, {"owner": {"reputation": 145, "user_id": 4471526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7cd06b8e7fefc28c6e211740b3883376?s=128&d=identicon&r=PG&f=1", "display_name": "Mrowkacala", "link": "https://stackoverflow.com/users/4471526/mrowkacala"}, "edited": false, "score": 0, "creation_date": 1479919397, "post_id": 40769816, "comment_id": 68763745, "body": "I have tried everything you are talking about and still i am not able to solve my problem. That is why i decided to write here"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479919538, "post_id": 40769816, "comment_id": 68763841, "body": "if input always like this <code>aabbbccc</code> then you do not need to scan, jsut count when symbol changes. And parameter must be <code>const char *</code> not <code>char *</code> if you want to pass string literals"}, {"owner": {"reputation": 145, "user_id": 4471526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7cd06b8e7fefc28c6e211740b3883376?s=128&d=identicon&r=PG&f=1", "display_name": "Mrowkacala", "link": "https://stackoverflow.com/users/4471526/mrowkacala"}, "edited": false, "score": 0, "creation_date": 1479919713, "post_id": 40769816, "comment_id": 68763963, "body": "Input as well could be 11aab."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479919760, "post_id": 40769816, "comment_id": 68763998, "body": "I mean if it cannot be <code>aba</code> but the same symbols grouped together"}, {"owner": {"reputation": 145, "user_id": 4471526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7cd06b8e7fefc28c6e211740b3883376?s=128&d=identicon&r=PG&f=1", "display_name": "Mrowkacala", "link": "https://stackoverflow.com/users/4471526/mrowkacala"}, "edited": false, "score": 0, "creation_date": 1479919804, "post_id": 40769816, "comment_id": 68764033, "body": "no it does not have to be like that it could be baab as well"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 4471526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7cd06b8e7fefc28c6e211740b3883376?s=128&d=identicon&r=PG&f=1", "display_name": "Mrowkacala", "link": "https://stackoverflow.com/users/4471526/mrowkacala"}, "edited": false, "score": 0, "creation_date": 1479919591, "post_id": 40769954, "comment_id": 68763872, "body": "Still wrong i am not able to receive a correct answer. e.g. if i have &quot;aabbc&quot; it returns 2 whereas it should return 3"}, {"owner": {"reputation": 145, "user_id": 4471526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7cd06b8e7fefc28c6e211740b3883376?s=128&d=identicon&r=PG&f=1", "display_name": "Mrowkacala", "link": "https://stackoverflow.com/users/4471526/mrowkacala"}, "edited": false, "score": 0, "creation_date": 1479924397, "post_id": 40769954, "comment_id": 68766726, "body": "Appreciate that :)"}], "tags": [], "owner": {"reputation": 558, "user_id": 3640643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1Obg.jpg?s=128&g=1", "display_name": "silverscania", "link": "https://stackoverflow.com/users/3640643/silverscania"}, "is_accepted": false, "score": 0, "last_activity_date": 1479920729, "last_edit_date": 1479920729, "creation_date": 1479919434, "answer_id": 40769954, "question_id": 40769816, "link": "https://stackoverflow.com/questions/40769816/function-that-counts-unique-characters-in-an-array/40769954#40769954", "title": "Function that counts unique characters in an array", "body": "<p>You need to add an extra closing brace after the line 'c++'.</p>\n\n<p>Then remove the extra brace immediately following 'return c;'</p>\n\n<p>You also have some unbalanced brackets in the top part. I think the working version of your code is this:</p>\n\n<pre><code>bool firstocc(char* t, int i){\n    for(int j=0;j&lt;i;j++){\n        if(t[j]==t[i])\n            return false;\n    }\n    return true;\n}\n\nint h(char* t){\n    int c=0;\n    for(int i=0; t[i]!=0;i++){\n        if(firstocc(t,i)){\n            c++;\n        }\n    }\n    return c;\n}\n\nint main(int argc, char *argv[]) {\n    std::cout&lt;&lt; h(\"aac\") &lt;&lt;std::endl;\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 4471526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7cd06b8e7fefc28c6e211740b3883376?s=128&d=identicon&r=PG&f=1", "display_name": "Mrowkacala", "link": "https://stackoverflow.com/users/4471526/mrowkacala"}, "edited": false, "score": 0, "creation_date": 1479920145, "post_id": 40770134, "comment_id": 68764244, "body": "But if they are not is it possible without use of std::set ?"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1479920262, "last_edit_date": 1479920262, "creation_date": 1479919992, "answer_id": 40770134, "question_id": 40769816, "link": "https://stackoverflow.com/questions/40769816/function-that-counts-unique-characters-in-an-array/40770134#40770134", "title": "Function that counts unique characters in an array", "body": "<p>if your string always follows the pattern, when the same symbol grouped together, then count is simple:</p>\n\n<pre><code>int count_unique( const std::string &amp;str )\n{\n     char last = 0;\n     int count = 0;\n     for( char c : str )\n         if( last != c ) {\n             last = c;\n             ++count;\n         }\n     return count;\n}\n</code></pre>\n\n<p>if they are not mandatory grouped use <code>std::set</code>:</p>\n\n<pre><code>int count_unique( const std::string &amp;str )\n{\n    return std::set&lt;char&gt;( str.begin(), str.end() ).size();\n}\n</code></pre>\n\n<p>if <code>std::set</code> is not allowed and no grouping then use first one slightly modified:</p>\n\n<pre><code>int count_unique( std::string str )\n{\n     std::sort( str.begin(), str.end() );\n     char last = 0;\n     int count = 0;\n     for( char c : str )\n         if( last != c ) {\n             last = c;\n             ++count;\n         }\n     return count;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 558, "user_id": 3640643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1Obg.jpg?s=128&g=1", "display_name": "silverscania", "link": "https://stackoverflow.com/users/3640643/silverscania"}, "edited": false, "score": 0, "creation_date": 1479920872, "post_id": 40770309, "comment_id": 68764704, "body": "Looks like we got the same answer!"}], "tags": [], "owner": {"reputation": 972, "user_id": 2253719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6fvu.jpg?s=128&g=1", "display_name": "WPomier", "link": "https://stackoverflow.com/users/2253719/wpomier"}, "is_accepted": true, "score": 0, "last_activity_date": 1479921361, "last_edit_date": 1479921361, "creation_date": 1479920535, "answer_id": 40770309, "question_id": 40769816, "link": "https://stackoverflow.com/questions/40769816/function-that-counts-unique-characters-in-an-array/40770309#40770309", "title": "Function that counts unique characters in an array", "body": "<p>The problem was with the braces in both functions <code>firstocc</code> and <code>h</code> (maybe because a bad indentation, always try take care with indent your code properly, not for compiler but for yourself), and with the loop of function <code>h</code> where the condition was <code>t[i+1] != 0</code> and should be <code>t[i] != 0</code> (to include the last char).</p>\n\n<p>The code should be:</p>\n\n<pre><code>bool firstocc(char* t, int i){\n    for(int j=0;j&lt;i;j++)\n        if(t[j]==t[i])\n            return false;\n    return true;\n}\n\nint h(char* t){\n    int c=0;\n    for(int i=0; t[i]!=0;i++)\n        if(firstocc(t,i)){\n            c++;\n        }\n    return c;\n}\n</code></pre>\n\n<p>I tested it with <code>\"aabbcddddeaa\"</code> and it returns 5.</p>\n"}], "owner": {"reputation": 145, "user_id": 4471526, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7cd06b8e7fefc28c6e211740b3883376?s=128&d=identicon&r=PG&f=1", "display_name": "Mrowkacala", "link": "https://stackoverflow.com/users/4471526/mrowkacala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 40770309, "answer_count": 3, "score": 0, "last_activity_date": 1479921361, "creation_date": 1479919059, "last_edit_date": 1479920697, "question_id": 40769816, "link": "https://stackoverflow.com/questions/40769816/function-that-counts-unique-characters-in-an-array", "title": "Function that counts unique characters in an array", "body": "<p>I want to have a function that counts number of unique characters. If for example i have <code>aabbcc</code> i want it to return <code>3</code>. If <code>aab</code> i want to have <code>2</code> and so on....</p>\n\n<p>My attempt was to construct a function that is checking whether number appeared previously and then us it as <code>if</code> condition.</p>\n\n<p>My code is:</p>\n\n<pre><code>bool firstocc(char* t, int i){\n    for(int j = 0;j &lt; i;j++){\n        if(t[j] == t[i]) return false;\n            return true;    \n    }    \n}\n\nint h(char* t){\n    int c=0;\n    for(int i=0; t[i+1]!=0;i++){\n        if(firstocc(t,i)){\n            c++;\n        }\n\n        return c;\n    }\n\n}\n\n\nint main()\n{\n    cout&lt;&lt; h(\"aabbc\");\n}\n</code></pre>\n\n<p>Function always returns zero. What is wrong with it?</p>\n"}, {"tags": ["c++", "c++11", "boost", "chrono"], "comments": [{"owner": {"reputation": 1501, "user_id": 3537339, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001674253388/picture?type=large", "display_name": "Bruno Ferreira", "link": "https://stackoverflow.com/users/3537339/bruno-ferreira"}, "edited": false, "score": 1, "creation_date": 1479922306, "post_id": 40769811, "comment_id": 68765464, "body": "Are you sure you are using boost namespaces instead of std? by using it explicitly here with your code it works as expected: <a href=\"http://coliru.stacked-crooked.com/a/c40ed252075273fe\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/c40ed252075273fe</a>"}], "owner": {"reputation": 33, "user_id": 2969571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23b33969495315e385a83c660ba510b2?s=128&d=identicon&r=PG", "display_name": "Tones", "link": "https://stackoverflow.com/users/2969571/tones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479921536, "creation_date": 1479919053, "question_id": 40769811, "link": "https://stackoverflow.com/questions/40769811/how-to-convert-boostchronoprocess-cpu-clockduration-to-milliseconds", "title": "How to convert boost::chrono::process_cpu_clock::duration to milliseconds", "body": "<p>I am using boost 1.59.0.</p>\n\n<p>I am trying to use boost::chrono::process_cpu_clock to time a block of my code. I would like to report this time in milliseconds, not nanoseconds. I thought to use the duration_cast template function, although I have only found examples where it takes a single duration value as an argument, not the tuple of three values returned by process_cpu_clock.now().</p>\n\n<p>Below is the code that I wrote:</p>\n\n<pre><code>chrono::process_cpu_clock mytimer;\nconst auto start = mytimer.now();\n// do work\nconst auto duration = mytimer.now() - start;\nconst auto duration_msec = duration_cast&lt;milliseconds&gt;(duration);\n</code></pre>\n\n<p><code>duration_msec</code> is exactly the same as <code>duration</code>; it is not converted to milliseconds.</p>\n\n<p>Perhaps duration_cast isn't intended to take the process_cpu_clock::duration type as an argument; however, it compiles ok.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 1, "creation_date": 1479918629, "post_id": 40769405, "comment_id": 68763233, "body": "This paper may be relevant <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0078r0.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0078r0.pdf</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1479918808, "post_id": 40769405, "comment_id": 68763363, "body": "The implicit object (this) parameter is still a parameter. Syntax is inconsequential. Call if foo(x) or x.foo() or whatever."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 0, "creation_date": 1479923981, "post_id": 40769405, "comment_id": 68766480, "body": "@Danh It&#39;s not totally clear from the paper what the answer to this question is. It seems somewhat noncommittal."}, {"owner": {"reputation": 1668, "user_id": 2307646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21a6192fca73a31505d1a36baabb976?s=128&d=identicon&r=PG", "display_name": "FrankHB", "link": "https://stackoverflow.com/users/2307646/frankhb"}, "edited": false, "score": 0, "creation_date": 1570879811, "post_id": 40769405, "comment_id": 103060980, "body": "Note GCC 9 has put some more restrictive descriptions in the relevant sections of its manual. This still does not guarantee the semantics among different implementations, see <a href=\"https://bugs.llvm.org/show_bug.cgi?id=43275\" rel=\"nofollow noreferrer\">bugs.llvm.org/show_bug.cgi?id=43275</a> for example."}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1479922290, "post_id": 40770330, "comment_id": 68765458, "body": "You sure about <code>__attribute__((const))</code>? Isn&#39;t implicit <code>this</code> a pointer argument to the function?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1479923770, "post_id": 40770330, "comment_id": 68766352, "body": "I&#39;m not sure adding the term &quot;referential transparency&quot; helps. Does that term even have a definite meaning? Is <code>strlen()</code> not referentially transparent?"}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1479925594, "post_id": 40770330, "comment_id": 68767397, "body": "@Barry Generally speaking <code>strlen()</code> is not referentially transparent. It can be considered to be referentially transparent, when its argument points to immutable memory."}, {"owner": {"reputation": 1668, "user_id": 2307646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e21a6192fca73a31505d1a36baabb976?s=128&d=identicon&r=PG", "display_name": "FrankHB", "link": "https://stackoverflow.com/users/2307646/frankhb"}, "edited": false, "score": 0, "creation_date": 1570880266, "post_id": 40770330, "comment_id": 103061089, "body": "This answer is mostly correct, except the meanings of some terms in the academic sense. In fact, <i>referential transparency</i>  has quite many different meanings in different contexts, see <a href=\"http://www.itu.dk/people/sestoft/papers/SondergaardSestoft1990.pdf\" rel=\"nofollow noreferrer\">Referential transparency, definiteness and unfoldability</a>. OTOH, &quot;pure&quot; is far more clearer in the sense of &quot;side-effects free&quot;. However, it is still not enough clear for C++ which defines as-if rules to exclude equivalent non-volatile read operations but no control effects as side effects contributing to the observable behavior."}], "tags": [], "owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "is_accepted": false, "score": 5, "last_activity_date": 1479943167, "last_edit_date": 1479943167, "creation_date": 1479920609, "answer_id": 40770330, "question_id": 40769405, "link": "https://stackoverflow.com/questions/40769405/annotating-a-const-member-function-with-pure-attribute/40770330#40770330", "title": "Annotating a const member function with pure attribute", "body": "<blockquote>\n  <p>Is it valid to label <code>Wrapper::get()</code> as a <code>pure</code> member function? It only depends on the implicit <code>Wrapper</code> instance, but that data could change. </p>\n</blockquote>\n\n<p>Yes, <code>Wrapper::get()</code> meets the requirements of gcc's <code>pure</code> attribute. Note, however, that <code>__attribute__((pure))</code> doesn't mean <em>pure in the academic sense</em>, i.e. possessing the property of referential transparency. The latter can be communicated through a stricter <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-g_t_0040code_007bconst_007d-function-attribute-3303\" rel=\"nofollow noreferrer\"><code>__attribute__((const))</code></a>:</p>\n\n<blockquote>\n  <p><code>__attribute__((const))</code></p>\n  \n  <p>Many functions do not examine any values except their arguments, and\n  have no effects except the return value. Basically this is just\n  slightly more strict class than the <code>pure</code> attribute below, since\n  function is not allowed to read global memory.</p>\n  \n  <p>Note that a function that has pointer arguments and examines the data\n  pointed to must <em>not</em> be declared <code>const</code>. Likewise, a function that calls\n  a non-<code>const</code> function usually must not be <code>const</code>. It does not make sense\n  for a <code>const</code> function to return <code>void</code>.</p>\n</blockquote>\n\n<p>But since <code>Wrapper::get()</code> doesn't possess the property of referential transparency implied by <code>__attribute__((const))</code>, it cannot be labeled as such.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The guarantee about the <code>pure</code>-ness (in gcc's sense) of a function can be used for optimizing only a block of code that doesn't contain writes to global memory (and, in particular, is not interspersed by calls to non-<code>pure</code> functions). Examples:</p>\n\n<pre><code>struct Wrapper {\n    int i;\n\n    int get() const __attribute__((pure)) { return i; }\n    void set(int x) { i = x; }\n};\n\nlong foo(Wrapper* w)\n{\n    // w-&gt;get() can be computed once\n    return 2 * w-&gt;get() * w-&gt;get();\n}\n\nlong bar(Wrapper* w)\n{\n    // w-&gt;get() can be computed once (even though below code writes to memory,\n    // that memory is freshly allocated and cannot be accessed by w-&gt;get())\n    long result = 2;\n    result *= w-&gt;get();\n    result *= w-&gt;get();\n    return result;\n}\n\nlong baz(Wrapper* w)\n{\n    // both w-&gt;get()s must be evaluated, since non-pure code occurs between them\n    long result = 2;\n    result *= w-&gt;get();\n    std::cout &lt;&lt; \"Result after the first muliplication: \" &lt;&lt; result &lt;&lt; std::endl;\n    result *= w-&gt;get();\n    return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 612, "favorite_count": 3, "answer_count": 1, "score": 16, "last_activity_date": 1479943167, "creation_date": 1479917923, "last_edit_date": 1479921277, "question_id": 40769405, "link": "https://stackoverflow.com/questions/40769405/annotating-a-const-member-function-with-pure-attribute", "title": "Annotating a const member function with pure attribute", "body": "<p>The gcc documentation for <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-g_t_0040code_007bpure_007d-function-attribute-3348\" rel=\"noreferrer\"><code>__attribute__((pure))</code></a> states:</p>\n\n<blockquote>\n  <p>Many functions have no effects except the return value and their return value depends only on the parameters and/or global variables. Such a function can be subject to common subexpression elimination and loop optimization just as an arithmetic operator would be. These functions should be declared with the attribute <code>pure</code>.</p>\n</blockquote>\n\n<p>What does it mean to only depend on the parameters? Consider:</p>\n\n<pre><code>struct Wrapper {\n    int i;\n\n    int get() const { return i; }\n    void set(int x) { i = x; }\n};\n</code></pre>\n\n<p>Is it valid to label <code>Wrapper::get()</code> as a <code>pure</code> member function? It only depends on the implicit <code>Wrapper</code> instance, but that data could change. </p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 1242, "user_id": 6448768, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/92c7e7f2c6e7a8ea428c84f93ec49baa?s=128&d=identicon&r=PG&f=1", "display_name": "Fitzwilliam Bennet-Darcy", "link": "https://stackoverflow.com/users/6448768/fitzwilliam-bennet-darcy"}, "edited": false, "score": 5, "creation_date": 1479917504, "post_id": 40769221, "comment_id": 68762462, "body": "<code>new</code> is a keyword in C++. How did you get this code to compile?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1479917765, "post_id": 40769221, "comment_id": 68762634, "body": "@tobi303: I have just edited the question to hopefully make it a bit clearer."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1479917824, "post_id": 40769221, "comment_id": 68762683, "body": "@MartinBonner yep thanks"}, {"owner": {"reputation": 33, "user_id": 6319221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24cb81047d2b32c6f75b8449bd42d33d?s=128&d=identicon&r=PG&f=1", "display_name": "Dad85", "link": "https://stackoverflow.com/users/6319221/dad85"}, "edited": false, "score": 0, "creation_date": 1479917963, "post_id": 40769221, "comment_id": 68762794, "body": "sorry, i was inventing the code while writing here. of course I cannot use new. let&#39;s call new_vect"}], "answers": [{"comments": [{"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "edited": false, "score": 0, "creation_date": 1479918278, "post_id": 40769399, "comment_id": 68762983, "body": "@NickyC The logic looks wrong. But I dont understand what is wrong with sizeof array."}, {"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "edited": false, "score": 0, "creation_date": 1479918411, "post_id": 40769399, "comment_id": 68763077, "body": "@static_cats if(1%2 == 1) case, you have to do  _new[i] = _old[sizeof(_old)/sizeof(_old[0]) - (i + 1)/2];"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2486888"}, "reply_to_user": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "edited": false, "score": 0, "creation_date": 1479918428, "post_id": 40769399, "comment_id": 68763091, "body": "@MayurK <code>sizeof</code> gives you the array size in terms of bytes, not number of elements. Also, it takes some extra care to make sure there is no decay into pointer."}, {"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "edited": false, "score": 0, "creation_date": 1479918556, "post_id": 40769399, "comment_id": 68763179, "body": "@NickyC: Oh! yes. It gives in bytes. But sizeof(array)/sizeof(array[0]) gives length of array right?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2486888"}, "reply_to_user": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "edited": false, "score": 0, "creation_date": 1479918754, "post_id": 40769399, "comment_id": 68763318, "body": "@MayurK Yes, or maybe. What if <code>array</code> is not really an array, but a pointer to an array? It is not the case here, but this mistake is very common."}], "tags": [], "owner": {"reputation": 192, "user_id": 4705267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SDDsw.jpg?s=128&g=1", "display_name": "static_cats", "link": "https://stackoverflow.com/users/4705267/static-cats"}, "is_accepted": true, "score": -1, "last_activity_date": 1479919105, "last_edit_date": 1479919105, "creation_date": 1479917913, "answer_id": 40769399, "question_id": 40769221, "link": "https://stackoverflow.com/questions/40769221/c-iteration-on-first-and-last-elements-of-array/40769399#40769399", "title": "C++ iteration on first and last elements of array", "body": "<pre><code>int _old[10] = {16, 12, 24, 96, 45, 22, 18, 63, 47, 56};\nint _new[8];\n\nconst int old_size = sizeof(_old)/sizeof(int);\nconst int new_size = sizeof(_new)/sizeof(int);\n\nfor (int i = 0; i &lt; new_size; ++i)\n{\n    if (i % 2)\n        _new[i] = _old[old_size - i / 2 - 1];\n    else\n        _new[i] = _old[i / 2];\n\n    std::cout &lt;&lt; _new[i] &lt;&lt; \" \";\n}\n\nstd::cout &lt;&lt; std::endl;\n</code></pre>\n\n<p>Returns <code>16 56 12 47 24 63 96 18</code></p>\n\n<p><a href=\"http://www.tutorialspoint.com/compile_cpp11_online.php?PID=0Bw_CjBb95KQMRFBueGdfYlAteE0\" rel=\"nofollow noreferrer\">See it live</a></p>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 2102000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0244978121b5b715cca7661a2745579?s=128&d=identicon&r=PG", "display_name": "Alan Milton", "link": "https://stackoverflow.com/users/2102000/alan-milton"}, "is_accepted": false, "score": -2, "last_activity_date": 1479924062, "last_edit_date": 1479924062, "creation_date": 1479923679, "answer_id": 40771257, "question_id": 40769221, "link": "https://stackoverflow.com/questions/40769221/c-iteration-on-first-and-last-elements-of-array/40771257#40771257", "title": "C++ iteration on first and last elements of array", "body": "<p>Enjoy.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n\nusing namespace std;\n\nint main(int, char**)\n{\n    int oldv[] = { 16, 12, 24, 96, 45, 22, 18, 63, 47, 56 };\n    int newv[8];\n    size_t numbers_i_want = 3;\n\n    size_t oldv_b = 0;\n    size_t oldv_e = sizeof oldv / sizeof *oldv;\n    size_t newv_e = sizeof newv / sizeof *newv;\n\n    for(size_t i = 0;\n        i != min(numbers_i_want, newv_e) &amp;&amp; oldv_b != oldv_e;\n        ++i)\n    {\n        newv[i] = (i % 2) ? oldv[--oldv_e] : oldv[oldv_b++];\n    }\n\n    copy(newv, newv + min(numbers_i_want, newv_e),\n        ostream_iterator&lt;decltype(*newv)&gt;(cout, \" \"));\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6319221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24cb81047d2b32c6f75b8449bd42d33d?s=128&d=identicon&r=PG&f=1", "display_name": "Dad85", "link": "https://stackoverflow.com/users/6319221/dad85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 40769399, "answer_count": 2, "score": -4, "last_activity_date": 1479924062, "creation_date": 1479917350, "last_edit_date": 1479918390, "question_id": 40769221, "link": "https://stackoverflow.com/questions/40769221/c-iteration-on-first-and-last-elements-of-array", "title": "C++ iteration on first and last elements of array", "body": "<p>Let's say I have this array:</p>\n\n<pre><code>int oldv[10] = {16, 12, 24, 96, 45, 22, 18, 63, 47, 56};\n</code></pre>\n\n<p>and another one like</p>\n\n<pre><code>int newv[8]; \n</code></pre>\n\n<p>and I want to fill new from alternating ends of <code>old</code> until a certain condition is met such that I'd have:</p>\n\n<pre><code>newv = [16, 56, 12, 47, 24, 63 ...]\n</code></pre>\n\n<p>Let's say I want to put in new only 3 numbers taken from old (that is: 16, 56, 12).\nI've tried with the following for loop, but of course is not enough...</p>\n\n<pre><code>for(int i = 0; i &lt; 3; i++) \n    newv[i] = oldv[i*(sizeof(oldv)-1)];\n</code></pre>\n\n<p>Any help?</p>\n"}, {"tags": ["c++", "visual-c++", "mfc", "registry", "regedit"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1479919503, "post_id": 40769078, "comment_id": 68763818, "body": "Regedit.exe is special, it is a single-instance app.  Easy to see, just try to start it twice and note that you&#39;ll only get one instance on your desktop.  Also some odds that it its silent UAC elevation plays a role.  So you are waiting only for your instance to quit but it is actually another instance that gets the job done.  Later, after you try to find the file back.  Or not at all, I didn&#39;t try it.  Well, hard to deal with so don&#39;t do this.  Consider using reg.exe instead, /export option."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1479936741, "post_id": 40769078, "comment_id": 68772835, "body": "I think Hans is likely onto something with the UAC comment.  Are you running your program as Administrator?"}], "owner": {"reputation": 472, "user_id": 3402296, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/99537a6fd71564a258526f1391ae6b3c?s=128&d=identicon&r=PG&f=1", "display_name": "RDGuida", "link": "https://stackoverflow.com/users/3402296/rdguida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479916964, "creation_date": 1479916964, "question_id": 40769078, "link": "https://stackoverflow.com/questions/40769078/createprocess-returns-true-but-does-not-execute-with-regedit", "title": "CreateProcess returns true but does not execute with regedit", "body": "<p>I am trying to dump a portion of the windows registry in a .txt file using the <code>CreateProcess</code> function. The code is along the lines of</p>\n\n<pre><code>PROCESS_INFORMATION pi;\nSTARTUPINFO si;\nZeroMemory( &amp;si, sizeof(si) );\nsi.cb = sizeof(si);\nZeroMemory( &amp;pi, sizeof(pi) );\n\nCString cmdLine = \"\\\"C:\\\\WINDOWS\\\\regedit.exe\\\" /e \\\"c:\\\\dump\\\\TestReg.txt\\\" \n                   \\\"HKEY_LOCAL_MACHINE\\\\SOFTWARE\\\\MYSOFT\\\\\\\"\";\nLPSTR pCmdLine = (LPSTR)(const char*)cmdLine;\nBOOL oc = CreateProcess(NULL, pCmdLine, NULL, NULL, FALSE, 0, NULL, NULL, &amp;si, &amp;pi);\nif(oc == TRUE)\n{\n    WaitForSingleObject(pi.hProcess, 1000); \n    GetExitCodeProcess(pi.hProcess, &amp;exitCode);\n    if(exitCode != 0) ret = -1;\n}\n</code></pre>\n\n<p><strong>What I know</strong></p>\n\n<ul>\n<li>The <code>CreateProcess</code> returns <code>TRUE</code> and the last blocks executes</li>\n<li>The process waits for the end and exits normally</li>\n<li>However no file is produced at the end</li>\n<li>The command line string works fine in command line, even when it operates from the same directory where the program is operating.</li>\n<li>I have found something that is potentially <a href=\"https://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/9f1ee778-0713-442f-93a8-338d5f572f81/createprocess-doesnt-work-for-one-application-while-it-does-for-another-no?forum=windowsgeneraldevelopmentissues\" rel=\"nofollow noreferrer\">useful</a> where someone had basically the same problem. In the end it resulted in a dependency clash but the link does not explain very well how it was detected or fixed.</li>\n</ul>\n"}, {"tags": ["c++", "loops", "nested"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1479917059, "post_id": 40769046, "comment_id": 68762165, "body": "<code>for(int j=1;j&lt;=i and j&lt;=3;++j)</code> Did this compile? I find it hard to believe that beginners are aware of iso646.h"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1479917063, "post_id": 40769046, "comment_id": 68762170, "body": "That&#39;s not C, but C++."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 2, "creation_date": 1479917273, "post_id": 40769046, "comment_id": 68762311, "body": "You are <i>almost</i> there.  See <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> by Eric Lippert.  The thing I notice is that you are incrementing <code>i</code> both in the <code>for</code> loop statement, and in the body of the for loop.  You only want one of those."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1479917440, "post_id": 40769046, "comment_id": 68762419, "body": "@Lundin:  His C++ compiler is seriously broken if it doesn&#39;t compile."}, {"owner": {"reputation": 3, "user_id": 6557192, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0AsY-rTRNWk/AAAAAAAAAAI/AAAAAAAAAC8/3PP_azKlt78/photo.jpg?sz=128", "display_name": "Sayantan G.", "link": "https://stackoverflow.com/users/6557192/sayantan-g"}, "edited": false, "score": 0, "creation_date": 1479917538, "post_id": 40769046, "comment_id": 68762486, "body": "I didn&#39;t use anything like iso646.h i just used iostream"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1479929226, "post_id": 40769046, "comment_id": 68769244, "body": "@MartinBonner Are you saying that it is possible to type <code>and</code> in C++ without including <code>iso646.h</code>?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1479936101, "post_id": 40769046, "comment_id": 68772549, "body": "@Lundin: Yes. <code>int main() { return true and true ? 0 : 1; }</code> is a complete and valid C++ program (which will return 0)."}], "answers": [{"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1479917385, "post_id": 40769168, "comment_id": 68762387, "body": "You need <code>i &lt; 3</code>.  Personally, I think the OP&#39;s approach of incrementing i in the body is neater."}, {"owner": {"reputation": 220, "user_id": 7189747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771190f624d8de048761ac28741fc4b1?s=128&d=identicon&r=PG", "display_name": "Alnour Alharin", "link": "https://stackoverflow.com/users/7189747/alnour-alharin"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1479917606, "post_id": 40769168, "comment_id": 68762525, "body": "yes you are right, I edited my answer"}, {"owner": {"reputation": 40761, "user_id": 1658906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e4748ed2fb97e8a8d4dd6d439625135?s=128&d=identicon&r=PG", "display_name": "juunas", "link": "https://stackoverflow.com/users/1658906/juunas"}, "edited": false, "score": 1, "creation_date": 1479931430, "post_id": 40769168, "comment_id": 68770312, "body": "You <i>could</i> explain the answer a bit."}, {"owner": {"reputation": 220, "user_id": 7189747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771190f624d8de048761ac28741fc4b1?s=128&d=identicon&r=PG", "display_name": "Alnour Alharin", "link": "https://stackoverflow.com/users/7189747/alnour-alharin"}, "edited": false, "score": 0, "creation_date": 1480011668, "post_id": 40769168, "comment_id": 68807498, "body": "i is increasing from 0 to 3 so you can think of i as the row number i*3 is the first number in that row."}, {"owner": {"reputation": 220, "user_id": 7189747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771190f624d8de048761ac28741fc4b1?s=128&d=identicon&r=PG", "display_name": "Alnour Alharin", "link": "https://stackoverflow.com/users/7189747/alnour-alharin"}, "edited": false, "score": 0, "creation_date": 1480011743, "post_id": 40769168, "comment_id": 68807537, "body": "then then for every i*3 (the first number in each row) you increase 1,2,3 to be i*3+1, i*3+2 , i*"}, {"owner": {"reputation": 220, "user_id": 7189747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771190f624d8de048761ac28741fc4b1?s=128&d=identicon&r=PG", "display_name": "Alnour Alharin", "link": "https://stackoverflow.com/users/7189747/alnour-alharin"}, "edited": false, "score": 0, "creation_date": 1480011757, "post_id": 40769168, "comment_id": 68807544, "body": "3+ 3 as so on for all values of i"}], "tags": [], "owner": {"reputation": 220, "user_id": 7189747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771190f624d8de048761ac28741fc4b1?s=128&d=identicon&r=PG", "display_name": "Alnour Alharin", "link": "https://stackoverflow.com/users/7189747/alnour-alharin"}, "is_accepted": false, "score": 0, "last_activity_date": 1479917585, "last_edit_date": 1479917585, "creation_date": 1479917189, "answer_id": 40769168, "question_id": 40769046, "link": "https://stackoverflow.com/questions/40769046/using-nested-loop-for-a-simple-difficult-for-me-output/40769168#40769168", "title": "Using NESTED LOOP for a simple (difficult for me) output", "body": "<pre><code>for(int i = 0 ; i &lt; 3 ; i++){ \n   for(int j = 1 ; j &lt;= 3 ; j++)\n      cout &lt;&lt; i*3 + j &lt;&lt; \" \";\n   cout &lt;&lt; endl;}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6557192, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0AsY-rTRNWk/AAAAAAAAAAI/AAAAAAAAAC8/3PP_azKlt78/photo.jpg?sz=128", "display_name": "Sayantan G.", "link": "https://stackoverflow.com/users/6557192/sayantan-g"}, "edited": false, "score": 0, "creation_date": 1480261252, "post_id": 40769756, "comment_id": 68879057, "body": "I needed a nested loop"}], "tags": [], "owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "is_accepted": true, "score": 2, "last_activity_date": 1479918874, "creation_date": 1479918874, "answer_id": 40769756, "question_id": 40769046, "link": "https://stackoverflow.com/questions/40769046/using-nested-loop-for-a-simple-difficult-for-me-output/40769756#40769756", "title": "Using NESTED LOOP for a simple (difficult for me) output", "body": "<p>I find a solution like this to be much cleaner:</p>\n\n<pre><code>for( int i = 1; i &lt; 10; ++i )\n{\n    std::cout &lt;&lt; i;\n    if( i % 3 == 0 )\n        std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>It's basically just a loop to increment i from one to nine and printing each cycle. If the remainder of i/3 is 0, then print a new line char. Also note that it's probably better to just use the logical and expression rather than its macro ( it'll be more readable to most people, the macro only really exists for people that can't easily type <code>&amp;</code>).</p>\n"}], "owner": {"reputation": 3, "user_id": 6557192, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0AsY-rTRNWk/AAAAAAAAAAI/AAAAAAAAAC8/3PP_azKlt78/photo.jpg?sz=128", "display_name": "Sayantan G.", "link": "https://stackoverflow.com/users/6557192/sayantan-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "closed_date": 1479931928, "accepted_answer_id": 40769756, "answer_count": 2, "score": -3, "last_activity_date": 1479918874, "creation_date": 1479916872, "last_edit_date": 1479917067, "question_id": 40769046, "link": "https://stackoverflow.com/questions/40769046/using-nested-loop-for-a-simple-difficult-for-me-output", "closed_reason": "Needs details or clarity", "title": "Using NESTED LOOP for a simple (difficult for me) output", "body": "<p>**I need to output</p>\n\n<p>1 2 3 </p>\n\n<p>4 5 6</p>\n\n<p>7 8 9</p>\n\n<p><em>using nested loop</em>...**</p>\n\n<p>I tried this</p>\n\n<pre><code>for(int i=1;i&lt;=6;i++)\n {\n   cout&lt;&lt;endl;\n   for(int j=1;j&lt;=i and j&lt;=3;++j)\n   cout&lt;&lt;i++;\n  }\n</code></pre>\n\n<p>The output was </p>\n\n<p>123</p>\n\n<p>567</p>\n\n<p>Plzz.. help..</p>\n"}, {"tags": ["c++", "linker", "embedded", "microcontroller", "atmel"], "comments": [{"owner": {"reputation": 179, "user_id": 6751256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bf7185f4e31ccb6e79bfe0c35bf2262?s=128&d=identicon&r=PG&f=1", "display_name": "Maku", "link": "https://stackoverflow.com/users/6751256/maku"}, "edited": false, "score": 0, "creation_date": 1479917043, "post_id": 40768934, "comment_id": 68762151, "body": "@RawN what do you mean?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1479917428, "post_id": 40768934, "comment_id": 68762413, "body": "Ah I see, it&#39;s some sort of a linker script. You should consider adding the <code>atmel</code> or similar tag to your post."}, {"owner": {"reputation": 179, "user_id": 6751256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bf7185f4e31ccb6e79bfe0c35bf2262?s=128&d=identicon&r=PG&f=1", "display_name": "Maku", "link": "https://stackoverflow.com/users/6751256/maku"}, "edited": false, "score": 0, "creation_date": 1479917672, "post_id": 40768934, "comment_id": 68762562, "body": "Ok i added the tag, thought writing atmel in the beginning is enough."}, {"owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 0, "creation_date": 1479930428, "post_id": 40768934, "comment_id": 68769799, "body": "Do you get a compiler/linker error?  Have you looked for FWInfo in the map file?"}, {"owner": {"reputation": 1447, "user_id": 6746897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1eb640fcdc6847c55c189ceddb6afca5?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/6746897/julien"}, "edited": false, "score": 0, "creation_date": 1479934978, "post_id": 40768934, "comment_id": 68772040, "body": "I have only experience on 8bit AVR like your 168PB. But if <code>nFirmwareInfoBlock</code> is not used in FW, the linker optimizes away. I do not use makefile but atmel configuration, add .FWinfo to sections and  there is an option I do not remember to disable optimization. Other solution is to put a dummy <code>pgm_read_word(nFirmwareInfoBlock)</code>. If this doesn&#39;t help there is a difference I don&#39;t know SAM VS AVR"}, {"owner": {"reputation": 179, "user_id": 6751256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bf7185f4e31ccb6e79bfe0c35bf2262?s=128&d=identicon&r=PG&f=1", "display_name": "Maku", "link": "https://stackoverflow.com/users/6751256/maku"}, "reply_to_user": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 0, "creation_date": 1479975896, "post_id": 40768934, "comment_id": 68785510, "body": "@kkrambo I dont get any errors. I&#39;ve added the section from the .map file to the post, was too long for comment."}, {"owner": {"reputation": 179, "user_id": 6751256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bf7185f4e31ccb6e79bfe0c35bf2262?s=128&d=identicon&r=PG&f=1", "display_name": "Maku", "link": "https://stackoverflow.com/users/6751256/maku"}, "reply_to_user": {"reputation": 1447, "user_id": 6746897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1eb640fcdc6847c55c189ceddb6afca5?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/6746897/julien"}, "edited": false, "score": 0, "creation_date": 1479975937, "post_id": 40768934, "comment_id": 68785532, "body": "@Julien Yes, thats exactly the way I did it on 168PB aswell. Tried it here but it didn&#39;t work that way.."}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 6751256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bf7185f4e31ccb6e79bfe0c35bf2262?s=128&d=identicon&r=PG&f=1", "display_name": "Maku", "link": "https://stackoverflow.com/users/6751256/maku"}, "edited": false, "score": 0, "creation_date": 1479975381, "post_id": 40775194, "comment_id": 68785291, "body": "Thanks, didn&#39;t know the <code>used</code> attribute. I&#39;ve used a dummy until now, and i am to print the content of the array, but it&#39;s stored at a random address in the flash rather than the one given.."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 1, "last_activity_date": 1479981320, "last_edit_date": 1495540383, "creation_date": 1479940125, "answer_id": 40775194, "question_id": 40768934, "link": "https://stackoverflow.com/questions/40768934/writing-array-to-specific-flash-location-in-the-hex-file/40775194#40775194", "title": "Writing array to specific flash location in the .hex file", "body": "<p>From GCC <a href=\"https://stackoverflow.com/questions/40768934/writing-array-to-specific-flash-location-in-the-hex-file\">variable attribute documentation</a>:</p>\n\n<blockquote>\n  <p><code>used</code></p>\n  \n  <p>This attribute, attached to a variable with static storage, means that the variable must be emitted even if it appears that the variable is not referenced.</p>\n</blockquote>\n\n<p>So to prevent the unused data being removed by the linker, use:</p>\n\n<pre><code>const uint8_t nFirmwareInfoBlock[SIZE_OF_FWINFO]\n              __attribute__((used,section(\".FWInfo\"))) = \n{ ... } ;\n</code></pre>\n\n<p>An alternative but perhaps less attractive solution is to declare the array <code>volatile</code> and then perform a dummy read i.e.:</p>\n\n<pre><code>const uint8_t nFirmwareInfoBlock[SIZE_OF_FWINFO]\n              __attribute__((section(\".FWInfo\"))) = \n{ ... } ;\n\nint main()\n{\n    uint8_t dummy = nFirmwareInfoBlock[0] ; \n    ...\n}\n</code></pre>\n\n<p>The third method is to avoid toolchain dependencies altogether and to use the excellent if somewhat arcane <a href=\"http://srecord.sourceforge.net/\" rel=\"nofollow noreferrer\">SRecord</a> utility to patch the data directly to the hex file as a <em>post-build</em> operation.  This has the advantage of being tool-chain independent, but you will need a step perhaps to generate the data to be patched in, but writing a generator for that is probably trivial.</p>\n"}, {"tags": [], "owner": {"reputation": 1447, "user_id": 6746897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1eb640fcdc6847c55c189ceddb6afca5?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/6746897/julien"}, "is_accepted": false, "score": 0, "last_activity_date": 1479972349, "creation_date": 1479972349, "answer_id": 40780263, "question_id": 40768934, "link": "https://stackoverflow.com/questions/40768934/writing-array-to-specific-flash-location-in-the-hex-file/40780263#40780263", "title": "Writing array to specific flash location in the .hex file", "body": "<p>From my experience in Atmel studio 6 and 8bit AVR core:</p>\n\n<p>define the section <code>.FWInfo</code> (I do it without makefile sorry)\n<a href=\"https://i.stack.imgur.com/qp4Kg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qp4Kg.png\" alt=\"Flash config\"></a>\nAnd doing </p>\n\n<pre><code>const uint8_t nFirmwareInfoBlock[SIZE_OF_FWINFO]\n              __attribute__((used,section(\".FWInfo\"))) = \n{ ... } ;\n</code></pre>\n\n<p>is not enough, because only the compiler will keep the variable. Then the linker may discard it if it is not used. Of course a simple reference is enough to keep it but if it only used in the bootloader for example you can define a linker flag.</p>\n\n<p>Again I did it graphically (sorry). </p>\n\n<p><a href=\"https://i.stack.imgur.com/6mdZR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6mdZR.png\" alt=\"linker flag\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 286, "user_id": 6514401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3FFXB.jpg?s=128&g=1", "display_name": "SMFSW", "link": "https://stackoverflow.com/users/6514401/smfsw"}, "is_accepted": false, "score": 0, "last_activity_date": 1556629653, "creation_date": 1556629653, "answer_id": 55921611, "question_id": 40768934, "link": "https://stackoverflow.com/questions/40768934/writing-array-to-specific-flash-location-in-the-hex-file/55921611#55921611", "title": "Writing array to specific flash location in the .hex file", "body": "<p>I know this post is pretty old, but anyways... </p>\n\n<p>As already stated, the use of KEEP directive to keep the section even if unused may be needed, or just ensuring it will always be kept no matter what.</p>\n\n<p>More than that, I wanted to do something similar for a STM32.\nIt seems that the order of sections is important too (even when an address is explicitly given).\nI had to place my extra section just before the start of RAM sections.</p>\n\n<p>Here, you have sections that goes to ROM <code>&gt; rom</code> and RAM <code>&gt; ram</code>. You may also have some other section of initialized datas which are denoted <code>&gt;RAM AT&gt; FLASH</code> (for STM32 gcc). In this example, it seems that it's denoted as <code>.relocate : AT (_etext)</code>.</p>\n\n<p>Anyways, if it works the same way, you should place your own section just before the <code>.bss</code> which is the start of uninitialized datas (first section related to RAM only):</p>\n\n<pre><code>...\n    _erelocate = .;\n} &gt; ram\n\n/* 8 Byte Firmware Info Section */\n.FWInfo : AT (__FWInfo_start__)\n{\n    KEEP(*(.FWInfo))\n} &gt; rom\n\n/* .bss section which is used for uninitialized data */\n.bss (NOLOAD) :\n...\n</code></pre>\n\n<p>If it still doesn't work as expected, you may try to place this section before the <code>.relocate : AT (_etext)</code> section; which is located after the latest mentioned rom section, but as this section is relocated from ROM to RAM even if ambigous in the notation, I think the first guess should work. </p>\n"}], "owner": {"reputation": 179, "user_id": 6751256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bf7185f4e31ccb6e79bfe0c35bf2262?s=128&d=identicon&r=PG&f=1", "display_name": "Maku", "link": "https://stackoverflow.com/users/6751256/maku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1266, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1556629653, "creation_date": 1479916613, "last_edit_date": 1479975859, "question_id": 40768934, "link": "https://stackoverflow.com/questions/40768934/writing-array-to-specific-flash-location-in-the-hex-file", "title": "Writing array to specific flash location in the .hex file", "body": "<p>For my embedded application on Atmel SAM4E16C i need to place an array with firmware information at the end of the .hex file. I'm using Atmel Studio 7 with GCC.</p>\n\n<p>I've already done this for Atmega168PB but somehow it doesn't work for this project. </p>\n\n<pre><code>OUTPUT_FORMAT(\"elf32-littlearm\", \"elf32-littlearm\", \"elf32-littlearm\")\nOUTPUT_ARCH(arm)\nSEARCH_DIR(.)\n\n/* Memory Spaces Definitions */\nMEMORY\n{\n  rom (rx)  : ORIGIN = 0x00420000, LENGTH = 0x000E0000 /* changed to leave space for 128KB Bootloader -&gt; was ORIGIN = 0x00400000, LENGTH = 0x00100000 */\n  ram (rwx) : ORIGIN = 0x20000000, LENGTH = 0x00020000\n}\n\n/* The stack size used by the application. NOTE: you need to adjust according to your application. */\n__stack_size__ = DEFINED(__stack_size__) ? __stack_size__ : 0x3000;\n__ram_end__ = ORIGIN(ram) + LENGTH(ram) - 4;\n/* Firmware Info - 8 Bytes long at the end of ROM */\n__FWInfo_start__ = ORIGIN(rom) + LENGTH(rom) - 8;\nSECTIONS\n{\n.text :\n{\n    . = ALIGN(4);\n    _sfixed = .;\n    KEEP(*(.vectors .vectors.*))\n    *(.text .text.* .gnu.linkonce.t.*)\n    *(.glue_7t) *(.glue_7)\n    *(.rodata .rodata* .gnu.linkonce.r.*)\n    *(.ARM.extab* .gnu.linkonce.armextab.*)\n\n    /* Support C constructors, and C destructors in both user code\n       and the C library. This also provides support for C++ code. */\n    . = ALIGN(4);\n    KEEP(*(.init))\n    . = ALIGN(4);\n    __preinit_array_start = .;\n    KEEP (*(.preinit_array))\n    __preinit_array_end = .;\n\n    . = ALIGN(4);\n    __init_array_start = .;\n    KEEP (*(SORT(.init_array.*)))\n    KEEP (*(.init_array))\n    __init_array_end = .;\n\n    . = ALIGN(0x4);\n    KEEP (*crtbegin.o(.ctors))\n    KEEP (*(EXCLUDE_FILE (*crtend.o) .ctors))\n    KEEP (*(SORT(.ctors.*)))\n    KEEP (*crtend.o(.ctors))\n\n    . = ALIGN(4);\n    KEEP(*(.fini))\n\n    . = ALIGN(4);\n    __fini_array_start = .;\n    KEEP (*(.fini_array))\n    KEEP (*(SORT(.fini_array.*)))\n    __fini_array_end = .;\n\n    KEEP (*crtbegin.o(.dtors))\n    KEEP (*(EXCLUDE_FILE (*crtend.o) .dtors))\n    KEEP (*(SORT(.dtors.*)))\n    KEEP (*crtend.o(.dtors))\n\n    . = ALIGN(4);\n    _efixed = .;            /* End of text section */\n} &gt; rom\n\n/* .ARM.exidx is sorted, so has to go in its own output section.  */\nPROVIDE_HIDDEN (__exidx_start = .);\n.ARM.exidx :\n{\n  *(.ARM.exidx* .gnu.linkonce.armexidx.*)\n} &gt; rom\nPROVIDE_HIDDEN (__exidx_end = .);\n\n. = ALIGN(4);\n_etext = .;\n\n.relocate : AT (_etext)\n{\n    . = ALIGN(4);\n    _srelocate = .;\n    *(.ramfunc .ramfunc.*);\n    *(.data .data.*);\n    . = ALIGN(4);\n    _erelocate = .;\n} &gt; ram\n\n/* .bss section which is used for uninitialized data */\n.bss (NOLOAD) :\n{\n    . = ALIGN(4);\n    _sbss = . ;\n    _szero = .;\n    *(.bss .bss.*)\n    *(COMMON)\n    . = ALIGN(4);\n    _ebss = . ;\n    _ezero = .;\n} &gt; ram\n\n/* stack section */\n.stack (NOLOAD):\n{\n    . = ALIGN(8);\n    _sstack = .;\n    . = . + __stack_size__;\n    . = ALIGN(8);\n    _estack = .;\n} &gt; ram\n\n. = ALIGN(4);\n_end = . ;\n\n\n/* 8 Byte Firmware Info Section */\n\n.FWInfo : AT (__FWInfo_start__)\n{\n    *(.FWInfo)\n} &gt; rom\n}\n</code></pre>\n\n<p>This is the linker script i'm using. I've added the __FWInfo_start__ and the .FWInfo section. </p>\n\n<p>In my application i tried to define the firmware info block with attribute section .FWInfo but i'm unable to locate the data in my .hex file.</p>\n\n<pre><code>#define SIZE_OF_FWINFO  8\nconst uint8_t nFirmwareInfoBlock[SIZE_OF_FWINFO] __attribute__((section(\".FWInfo\"))) = {\n    0xff,   // reserved for future\n    0xff,   // reserved for future\n    DEVICE_TYPE,    // DeviceType\n    BUILD_NR,       // BuildNr of Firmware\n    VERSION_MINOR,  // VersionMinor of Firmware\n    VERSION_MAJOR,  // VersionMajor of Firmware\n    0xFF,           // Checksum\n    0xFF            // Checksum\n};  \n</code></pre>\n\n<p>I hope someone can help me why this isn't working. Thanks in advance.</p>\n\n<p>EDIT: Here are the entries in the .map file:</p>\n\n<pre><code>.data          0x00000000        0x0 src/main.o\n.FWInfo        0x00000000        0x8 src/main.o\n.debug_macro   0x00000000      0x8b0 src/main.o\n</code></pre>\n\n<p>and..</p>\n\n<pre><code> *fill*         0x200133b0     0x3000 \n                0x200163b0                . = ALIGN (0x8)\n                0x200163b0                _estack = .\n                0x200163b0                . = ALIGN (0x4)\n                0x200163b0                _end = .\n\n.FWInfo\n *(.FWInfo)\nOUTPUT(Dali4Net.elf elf32-littlearm)\n</code></pre>\n\n<p>as far as i can read from the context in the second block there should be an address written after the .FWInfo or?</p>\n"}, {"tags": ["c++", "linker"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1479916978, "post_id": 40768877, "comment_id": 68762107, "body": "Please show us the header of your <code>MyString</code> class (declaration of it). The code, which you described as being your <i>header</i> file is <b>identical</b> to the one you described as <i>.cpp</i> file."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1479922608, "post_id": 40768877, "comment_id": 68765641, "body": "I suspect the linker isn&#39;t seeing the object file for MyString.  Check your build command/script to make sure that the MyString.obj is being included in the link command.  Also note that you appear to have pasted in the .cpp for MyString twice--once in place of the MyString header."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1479923197, "post_id": 40768877, "comment_id": 68765990, "body": "You probably shouldn&#39;t have <code>#pragma once</code> in the .cpp files, but that&#39;s not what&#39;s causing this problem."}], "answers": [{"comments": [{"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1479923102, "post_id": 40769782, "comment_id": 68765932, "body": "I don&#39;t think the header and the source file for MyString are identical.  I think the OP pasted the header by accident instead of the source.  You&#39;re right in calling this a linker error, but then you talk about the compiler instead of the linker."}], "tags": [], "owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "is_accepted": true, "score": 0, "last_activity_date": 1479929775, "last_edit_date": 1479929775, "creation_date": 1479918952, "answer_id": 40769782, "question_id": 40768877, "link": "https://stackoverflow.com/questions/40768877/helper-understanding-linker-error-lnk2019/40769782#40769782", "title": "Helper understanding linker error LNK2019", "body": "<p>That's a linking error. That means that the compiler could find the prototype of the function but that it couldn't find the function's actual definition.</p>\n\n<p>In your specific case, by creating the <code>kz</code> variable in the <code>Fahrezug</code> class, you called the constructor for the <code>MyString</code> class which for some reason the linker couldn't find the definition of. My guess is that that's because the header for the string class and the source file for the string class are identical so the linker sees the definition of the constructor twice and doesn't know which one to use (even if the two are identical, the linker doesn't check that, when it sees two definitions for the same function, it gives you an error without looking any further).</p>\n\n<p>If you pasted the source instead of the header by accident, maybe the problem is that you forgot to include your source file in the project (the source file needs to be in the list of source files in your IDE).</p>\n\n<p>I also recommend using</p>\n\n<pre><code>#ifndef MYHEADER_H\n#define MYHEADER_H\n</code></pre>\n\n<p>at the beginning of each header file and <code>#endif</code> at the end to avoid including twice the same header file and therefore getting this type of error.</p>\n"}], "owner": {"reputation": 3, "user_id": 7200847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e0GegIGgo2Y/AAAAAAAAAAI/AAAAAAAAAFY/zi7YsGWxjZE/photo.jpg?sz=128", "display_name": "Scitke", "link": "https://stackoverflow.com/users/7200847/scitke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 40769782, "answer_count": 1, "score": 0, "last_activity_date": 1479929775, "creation_date": 1479916465, "last_edit_date": 1479923647, "question_id": 40768877, "link": "https://stackoverflow.com/questions/40768877/helper-understanding-linker-error-lnk2019", "title": "Helper understanding linker error LNK2019", "body": "<p>I know there are a lot questions here about this topic, but I can't find the unreferenced symbol in my code.</p>\n\n<p>This is the error:</p>\n\n<blockquote>\n  <p>error LNK2019: unresolved external symbol \"public: __thiscall MyString::MyString(char const *)\" (??0MyString@@QAE@PBD@Z) referenced in function \"public: __thiscall Fahrzeug::Fahrzeug(char *)\" (??0Fahrzeug@@QAE@PAD@Z)</p>\n</blockquote>\n\n<p>This is the header for the string class created:</p>\n\n<pre><code>#ifndef MyString_h\n#define MyString_h\n\n#include &lt;ostream&gt;\n\nusing namespace std;\n\n\nclass MyString{\n\n    char *strPtr=nullptr;\n    unsigned int strSize;\n    unsigned int strCapacity;\npublic:\n    //Standardkonstruktor\n    MyString();\n    //Konvertierkonstruktor\n    MyString(const char *);\n    //Kopierkonstruktor\n    MyString(const MyString&amp;);\n    //Destruktor\n    ~MyString();\n\n\n    void reserve(unsigned int c);\n    MyString &amp; append(MyString &amp; );\n    MyString &amp; assign(MyString &amp; );\n\n    unsigned int size();\n    unsigned int capacity();\n    void clear();\n    bool empty();\n    const char* c_str();\n\n    char  &amp;at( int);\n\n    MyString operator+( MyString &amp;);\n    bool operator==(const MyString &amp;);\n    MyString operator=(MyString &amp;);\n    friend ostream &amp; operator&lt;&lt;(ostream &amp;, MyString);\n};\n\n//MyString operator+(const MyString &amp;);\n//MyString operator==(const MyString &amp;, const MyString &amp;);\n//MyString operator[]( MyString &amp;);\n//MyString operator&lt;&lt;(const MyString &amp;);\n\n#endif\n</code></pre>\n\n<p>This is the cpp file for mystring class</p>\n\n<pre><code>    #include \"MyString.hpp\"\n    #include &lt;ostream&gt;\n    using namespace std;\n    #include &lt;cstring&gt;\n\n\n\n    //Hausaufgabe 2 Eigene String Klasse Teil 1\n\n    //Standardkonstruktor legt leeren String an \n    MyString::MyString()\n    :strCapacity(1), strSize(0)\n    {\n\n        this-&gt;strPtr = new char[strCapacity];\n        /*this-&gt;strPtr[0] = \"\\0\";*/\n    }\n\n\n    // Konvertierkonstruktor wandelt C-String in MyString um\n    MyString::MyString(const char  * string){\n\n        //gr\u00f6\u00dfe String herausfinden\n        unsigned int i = strlen(string);\n        //Gr\u00f6\u00dfe und Kapazit\u00e4t des Strings festlegen\n        this-&gt;strCapacity = i;\n        this-&gt;strSize = i;\n        // Dynamisches Array Erzeugen. i+1 f\u00fcr abschlie\u00dfendes  \"\\0\" Zeichen\n        this-&gt;strPtr = new char[i+1];\n        //string in strPtr kopieren\n        strncpy(this-&gt;strPtr, string, i);\n\n        //Abschlie\u00dfendes \"\\0\" Zeichen einf\u00fcgen\n        this-&gt;strPtr[i] = '\\0';\n    }\n\n    MyString::MyString( const MyString &amp; old){\n        //Tiefe Kopie von old anlegen\n        int size = int(strlen(old.strPtr));\n        strPtr = new char[size];  \n        strncpy(strPtr, old.strPtr, old.strSize);\n        this-&gt;strSize = int(strlen(old.strPtr));\n        this-&gt;strCapacity = old.strCapacity;\n        this-&gt;strPtr[this-&gt;strSize] = '\\0';\n    }\n\n    MyString::~MyString(){\n        // Freigegebener Speicher wird wieder gel\u00f6scht\n        delete[] this-&gt;strPtr;\n        strPtr = nullptr;\n    }\n\n    void MyString::reserve(unsigned int c){\n        //pr\u00fcfen ob Speicherplatz ben\u00f6tigt wird\n\n            //reservespeicher wird angelegt und String wird gesichert\n            char *temp = new char[this-&gt;strSize];\n            strncpy(temp,this-&gt;strPtr,this-&gt;strSize) ;\n            //Destruktor zum l\u00f6schen des freigegebenen Speichers wird aufgerufen\n            delete[] strPtr;\n            //Speicher mit erh\u00f6hter Kapazit\u00e4t wird angefordert\n            this-&gt;strPtr = new char[sizeof(char)*(c+1)];\n            //Gesicherter String auf neuen Speicher \u00fcbertragen und \"\\0\" wird eingef\u00fcgt\n            strncpy(this-&gt;strPtr, temp, this-&gt;strSize);\n            /*this-&gt;strPtr[c+1] = '\\0';*/\n            //temp wird wieder gel\u00f6scht\n            delete[] temp;\n\n    }\n    //Gibt den C-String zur\u00fcck\n    const char*  MyString::c_str(){\n\n        return strPtr;\n    }\n    //gibt gr\u00f6\u00dfe des Strings ohne abhlie\u00dfendes 0-Zeichen zur\u00fcck\n    unsigned int MyString::size(){\n        return this-&gt;strSize;\n\n    }\n    //Leert den String\n    void MyString::clear(){\n        for (int i = 0; i &lt; this-&gt;strCapacity; i++) {\n            this-&gt;strPtr[i] = 0;\n        }\n\n    }\n    //H\u00e4ngt Strings aneinander\n    MyString &amp; MyString::append(MyString &amp;str){\n        // Ermittelt Gr\u00f6\u00dfe des neuen Strings\n        unsigned int newSize = this-&gt;strSize+str.strSize;\n        //Gr\u00f6\u00dfe und Kapazit\u00e4t des Strings werden aktualisiert\n        this-&gt;strSize = newSize;\n        this-&gt;strCapacity = newSize;\n        //vergr\u00f6\u00dfert den Speicher f\u00fcr den neuen String\n        this-&gt;reserve(newSize);\n        //F\u00fcgt die Strings zusammen \n        strcat(this-&gt;strPtr,str.strPtr);\n        //abschlie\u00dfendes 0-Zeichen\n        this-&gt;strPtr[this-&gt;strSize] = '\\0';\n        return str;\n    }\n    //\u00dcberschreibt String mit neuen Chars\n    MyString &amp; MyString::assign(MyString &amp;str){\n        //pr\u00fcft ob neuer Speicher beschafft werden soll \n        if (this-&gt;strSize &lt; str.strSize){\n            reserve(str.strSize);\n            //f\u00fcgt neuen String ein\n            strncpy(this-&gt;strPtr, str.strPtr,str.strSize);\n            //aktualisiert Gr\u00f6\u00dfe und Kapazit\u00e4t des Strings\n            this-&gt;strSize = str.size();\n            this-&gt;strCapacity = str.capacity();\n            //abschlie\u00dfendes 0-Zeichen\n            this-&gt;strPtr[this-&gt;strSize] = '\\0';\n        }\n        else{\n            //falls Speicher nicht vergr\u00f6\u00dfert werden muss \n            //wird string eingef\u00fcgt\n            strncpy(this-&gt;strPtr, str.strPtr, str.strSize);\n        }\n        return str;\n    }\n    //Gibt Kapazit\u00e4t zur\u00fcck\n    unsigned int MyString::capacity(){\n        return this-&gt;strCapacity;\n    }\n    //pr\u00fcft ob String leer ist \n    bool MyString::empty(){\n        if (this-&gt;strSize = 0)\n            return true;\n    }\n    //ersetzt Zeichen an der i-ten Stelle\n    char &amp;MyString::at( int i){\n        if (i &gt; this-&gt;strCapacity)\n            return this-&gt;strPtr[0];\n        else{\n            return this-&gt;strPtr[i-1];\n        }\n    }\n\n    //Hausaufgabe 3 Eigene String Klasse Teil 2 Operatoren\n\n    MyString MyString::operator+( MyString &amp; other){\n\n        MyString neu(this-&gt;strPtr);\n\n        neu.append(other);\n        return neu;\n    }\n    bool  MyString::operator==(const MyString &amp; compare){\n        if (this-&gt;strSize == compare.strSize){\n            for (int i = 0; (this-&gt;strPtr[i] &amp;&amp; compare.strPtr[i]) != '\\0'; i++){\n                if (this-&gt;strPtr[i] != compare.strPtr[i]){\n                    return 0;\n                    break;\n                }\n                else return 1;\n\n\n            }\n\n        }\n\n    }\n    ostream &amp;operator&lt;&lt; (ostream &amp; push, MyString out){ \n        /*for (int i = 0; out.strPtr[i] != '\\0'; i++){\n            push &lt;&lt; out.strPtr[i];\n        }*/\n\n        push &lt;&lt; out.c_str();\n        return push;\n\n    }\n\n    MyString  MyString::operator=(MyString &amp; change){\n\n\n        this-&gt;assign(change);\n        return change;\n    }\n\n    //MyString  MyString::operator[](MyString &amp; index){\n    //\n    //}\n</code></pre>\n\n<p>and here comes the program on which i will use the mystring class</p>\n\n<p>Header:</p>\n\n<pre><code>#include\"..\\A3\\A3\\MyString.hpp\"\n#pragma once\nclass Fahrzeug{\n\nprivate:\n    MyString kz;\n    /*static int vin;*/\n    double km;\npublic:\n    Fahrzeug( char *kfz);\n    void fahren(double);\n    /*friend ostream &amp; operator&lt;&lt;(ostream &amp;, Fahrzeug);*/\n};\n</code></pre>\n\n<p>cpp file:</p>\n\n<pre><code>#include \"Fahrzeug.hpp\"\n#include\"..\\A3\\A3\\MyString.hpp\"\n#pragma once\n\nFahrzeug::Fahrzeug(char* kfz)\n:kz(kfz)\n{\n\n}\n\nvoid Fahrzeug::fahren(double km)\n{\n\n    this-&gt;km += km;\n}\n//ostream &amp;operator&lt;&lt;(ostream&amp; push, Fahrzeug out){\n//  return push&lt;&lt;\"KennZeichen: \"&lt;&lt;out.kz&lt;&lt;endl&lt;&lt;\"VIN: \"/*&lt;&lt;out.vin*/&lt;&lt;endl&lt;&lt;\"KM: \"&lt;&lt;out.km&lt;&lt;endl;\n//}\n</code></pre>\n\n<p>main program:</p>\n\n<pre><code>#include \"Fahrzeug.hpp\"\n\n#pragma once\n#include &lt;iostream&gt;\nusing namespace std;\n\n//int Fahrzeug::zaehler = 0;\n\nint main() {\n    Fahrzeug f1(\"ES - H 123\");\n    /*cout &lt;&lt; f1 &lt;&lt; endl;*/\n    f1.fahren(101.5);\n    /*cout &lt;&lt; f1 &lt;&lt; endl;*/\n    Fahrzeug f2(\"ES - M 4711\");\n    f2.fahren(10.57);\n    /*cout &lt;&lt; f2 &lt;&lt; endl;*/\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "windows", "boost", "32bit-64bit"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 4, "creation_date": 1479916578, "post_id": 40768794, "comment_id": 68761844, "body": "Can&#39;t reproduce the problem. Please share <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with us. Note, we don&#39;t need full code, we need manufactured <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1479921891, "post_id": 40768929, "comment_id": 68765233, "body": "He&#39;s definitely hitting a 2GB process limit as you describe.  But just curious, with virtual memory, does &quot;contiguous chunk&quot; actually matter?  Even if the code did successfully allocated the entire 1.5GB chunk, it&#39;s going to be allocated across different pages of ram and virtual memory. (Or am I missing something?)"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1479923652, "post_id": 40768929, "comment_id": 68766269, "body": "@selbie It needs a contiguous chunk of the virtual address space, how that gets mapped is not relevant."}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1479926808, "post_id": 40768929, "comment_id": 68768003, "body": "@DanMa\u0161ek - That makes sense."}, {"owner": {"reputation": 19, "user_id": 2509143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8bf1b907e299a0728338a32797c4a49?s=128&d=identicon&r=PG", "display_name": "user2509143", "link": "https://stackoverflow.com/users/2509143/user2509143"}, "edited": false, "score": 0, "creation_date": 1479997396, "post_id": 40768929, "comment_id": 68799885, "body": "Thanks for all, that really explains everything"}], "tags": [], "owner": {"reputation": 1469, "user_id": 125671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376fa00c142d01c1dac636649970f2db?s=128&d=identicon&r=PG", "display_name": "IanM_Matrix1", "link": "https://stackoverflow.com/users/125671/ianm-matrix1"}, "is_accepted": false, "score": 6, "last_activity_date": 1479916608, "creation_date": 1479916608, "answer_id": 40768929, "question_id": 40768794, "link": "https://stackoverflow.com/questions/40768794/32-64-bit-windows-linux-application/40768929#40768929", "title": "32/64-bit Windows/Linux application", "body": "<p>32 bit Windows provides you with just under 2GB of address space, with various DLLs, your program, the stack and any other memory you've allocated dotted around in various places. That sometimes means that it doesn't have 1.5GB in a single contiguous chunk to give you.</p>\n\n<p>It's working in the 32 bit linux because I believe that actually provides you with a 3GB address space. Otherwise, it too suffers from the same problems.</p>\n"}], "owner": {"reputation": 19, "user_id": 2509143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8bf1b907e299a0728338a32797c4a49?s=128&d=identicon&r=PG", "display_name": "user2509143", "link": "https://stackoverflow.com/users/2509143/user2509143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "closed_date": 1479948566, "answer_count": 1, "score": 0, "last_activity_date": 1479916608, "creation_date": 1479916210, "question_id": 40768794, "link": "https://stackoverflow.com/questions/40768794/32-64-bit-windows-linux-application", "closed_reason": "Not suitable for this site", "title": "32/64-bit Windows/Linux application", "body": "<p>I wrote a C++ program which works fine on Linux when it is compiled as a 64-bit executable. I also compiled it as a 32-bit executable on Windows and it crashes with the following message:</p>\n\n<pre><code> boost\\boost_1_55_0\\boost/test/minimal.hpp(123): exception \"std::bad_alloc: bad allocation\" caught in function: 'int __cdecl main(int,char *[])'\n</code></pre>\n\n<p>As I have to allocate matrices of integers of the size 20000*20000, I told myself that I probably exceeded the admissible size on 32-bit platforms...</p>\n\n<p>So I compiled it as a 64-bit Windows executable and it works fine. To check that my assumption was the right one, I decided to compile it as 32-bit Linux executable and ... it also works fine? So I have no idea about what the causes of the crash could be...</p>\n\n<ul>\n<li>32-bit Windows => crash with standard bad_alloc</li>\n<li>64-bit Windows => run OK</li>\n<li>32-bit Linux   => run OK</li>\n<li>64-bit Linux   => run OK</li>\n</ul>\n"}, {"tags": ["c++", "string", "inheritance"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5843145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-PvW76WcoYd8/AAAAAAAAAAI/AAAAAAAAAD4/fm4dSRiJNgY/photo.jpg?sz=128", "display_name": "Kunal Verma", "link": "https://stackoverflow.com/users/5843145/kunal-verma"}, "edited": false, "score": 0, "creation_date": 1479916335, "post_id": 40768790, "comment_id": 68761661, "body": "How I can Resolve this ?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 51, "user_id": 5843145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-PvW76WcoYd8/AAAAAAAAAAI/AAAAAAAAAD4/fm4dSRiJNgY/photo.jpg?sz=128", "display_name": "Kunal Verma", "link": "https://stackoverflow.com/users/5843145/kunal-verma"}, "edited": false, "score": 0, "creation_date": 1479916485, "post_id": 40768790, "comment_id": 68761758, "body": "@KunalVerma Stop using <code>getline</code> everywhere, and only use the <code>&gt;&gt;</code> operator? Or use <code>getline</code> to get the numbers as well, and convert the string to a number? Or <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/ignore\" rel=\"nofollow noreferrer\">ignore</a> the next characters until the newline?"}, {"owner": {"reputation": 51, "user_id": 5843145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-PvW76WcoYd8/AAAAAAAAAAI/AAAAAAAAAD4/fm4dSRiJNgY/photo.jpg?sz=128", "display_name": "Kunal Verma", "link": "https://stackoverflow.com/users/5843145/kunal-verma"}, "edited": false, "score": 0, "creation_date": 1479919001, "post_id": 40768790, "comment_id": 68763499, "body": "Found the Solution . ( using (cin&gt;&gt;marks).ignore(); )"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1479916191, "creation_date": 1479916191, "answer_id": 40768790, "question_id": 40768717, "link": "https://stackoverflow.com/questions/40768717/how-to-solve-run-time-skipping-of-a-code-snippet-cin-getline-of-c/40768790#40768790", "title": "How to solve Run Time Skipping Of a Code snippet cin.getline of C++", "body": "<p>In <code>Acadamic_details::input</code> when you do</p>\n\n<pre><code>cin&gt;&gt;marks;\n</code></pre>\n\n<p>the newline is left in the buffer for the next call to <code>getline</code>, which interprets it as an empty line.</p>\n"}], "owner": {"reputation": 51, "user_id": 5843145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-PvW76WcoYd8/AAAAAAAAAAI/AAAAAAAAAD4/fm4dSRiJNgY/photo.jpg?sz=128", "display_name": "Kunal Verma", "link": "https://stackoverflow.com/users/5843145/kunal-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "closed_date": 1479918180, "accepted_answer_id": 40768790, "answer_count": 1, "score": 0, "last_activity_date": 1479957507, "creation_date": 1479916039, "last_edit_date": 1479957507, "question_id": 40768717, "link": "https://stackoverflow.com/questions/40768717/how-to-solve-run-time-skipping-of-a-code-snippet-cin-getline-of-c", "closed_reason": "Duplicate", "title": "How to solve Run Time Skipping Of a Code snippet cin.getline of C++", "body": "<pre><code>#include&lt;conio.h&gt;\n#include&lt;iostream&gt;\nusing namespace std;\n\nclass Student\n{\nprivate:\nchar name[20];\nchar rollno[20];\n\npublic:\nvoid input();\nvoid display(); \n};\nclass Acadamic_details:public Student\n{\nprivate:\n    float marks,percentage;\npublic:\n    void input();\n    void display();\n};\n    class Guardian_details:public Acadamic_details\n    {\n    private:\n        char F_name[20],M_name[20];\n    public:\n        void input();\n        void display();\n    };\n\n    void Student::input()\n    {\n    cout&lt;&lt;endl&lt;&lt;\" Enter the Name : \";\n    cin.getline(name,30,'\\n');\n    cout&lt;&lt;endl&lt;&lt;\" Enter the Roll No :\";\n    cin.getline(rollno,30,'\\n');\n    }\n    void Acadamic_details::input()\n    {\n    Student::input();\n    cout&lt;&lt;endl&lt;&lt;\" Enter the Marks out of 500 :\";\n    cin&gt;&gt;marks;\n    }\n    void Guardian_details::input()\n    {\n        Acadamic_details::input();\n        cout&lt;&lt;endl&lt;&lt;\" Enter the Father's Name :\";\n        cin.getline(F_name,30,'\\n');\n        cout&lt;&lt;endl&lt;&lt;\" Enter the Mother's Name :\";\n        cin.getline(M_name,30,'\\n');\n    }\n\n    void Student::display()\n    {\n    cout&lt;&lt;endl&lt;&lt;\" Name : \"&lt;&lt;name&lt;&lt;endl;\n    cout&lt;&lt;\" Roll No : \"&lt;&lt;rollno&lt;&lt;endl; \n    }   \n    void Acadamic_details::display()\n    {\n        Student::display();\n        percentage=(marks/500)*100;\n        cout&lt;&lt;endl&lt;&lt;\" Marks : \"&lt;&lt;marks&lt;&lt;\"/500\"&lt;&lt;endl;\n        cout&lt;&lt;\" Percentage : \"&lt;&lt;percentage&lt;&lt;\"%\"&lt;&lt;endl;\n    }\n            void Guardian_details::display()\n            {\n                Acadamic_details::display();\n                cout&lt;&lt;endl&lt;&lt;\" Father's Name : \"&lt;&lt;F_name&lt;&lt;endl;\n                cout&lt;&lt;\" Mother's Name : \"&lt;&lt;M_name&lt;&lt;endl;\n            }\n\n   int main()\n   {\n   Guardian_details g1;\n   cout&lt;&lt;\" Enter the Student's Details \"&lt;&lt;endl;\n   g1.input();\n   cout&lt;&lt;\" Student's Details Are : \"&lt;&lt;endl;\n   g1.display();\n   getch();\n   return 0;\n   }\n</code></pre>\n\n<p>This is the Implementation of Multilevel Inheritance.\nThere is no compilation Error encountered during Compilation.\nBut When I executed the Program I am facing a run time Problem</p>\n\n<pre><code>void Guardian_details::input()\n{\n    Acadamic_details::input();\n    cout&lt;&lt;endl&lt;&lt;\" Enter the Father's Name :\";\n    cin.getline(F_name,30,'\\n');\n    cout&lt;&lt;endl&lt;&lt;\" Enter the Mother's Name :\";\n    cin.getline(M_name,30,'\\n');\n}\n</code></pre>\n\n<p>from the above Code Snippet , <code>cin.getline(F_name,30,'\\n');</code> is not working.\nEverytime Run the Program It directly Execute the <code>cout&lt;&lt;endl&lt;&lt;\" Enter the Mother's Name :\";\n                                  cin.getline(M_name,30,'\\n');</code></p>\n\n<p>skipping the <code>cin.getline(F_name,30,'\\n');</code>.</p>\n\n<p>Here is the Output Screen : <a href=\"https://i.stack.imgur.com/qXxui.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qXxui.jpg\" alt=\"Output Screen\"></a></p>\n\n<p>Can anyone Explain Why is Happening so and What is the Alternative to that Code.</p>\n\n<p>Thanks in Advance.</p>\n"}, {"tags": ["c++", "algorithm", "data-structures", "computational-geometry", "hamming-distance"], "comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1479915559, "post_id": 40768507, "comment_id": 68761140, "body": "A downvote, why? :/ Please Mr. Downvoter, suggest how I can improve my question -  you didn&#39;t even cast a downvote to help me...!"}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 1, "creation_date": 1479915764, "post_id": 40768507, "comment_id": 68761275, "body": "Not my -1, but as I understand &quot;the curse of dimensionality&quot;, it means exactly that for D &gt;&gt; 1, no one knows a good way to solve this problem.  As D increases, the dumbest-possible algorithm (check each of your N points to see if it&#39;s within r of the query point) quickly becomes the best-known algorithm."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1479915870, "post_id": 40768507, "comment_id": 68761351, "body": "@j_random_hacker, as one of the guys that created <a href=\"https://github.com/gsamaras/kd_GeRaF\" rel=\"nofollow noreferrer\">kd-geraf</a>, I can say that we don&#39;t have to do with the curse of dimensionality that much here, I mean D will never be 10.000 in my case, but thanks for the tip, I will fix it! ;)"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1479916227, "post_id": 40768507, "comment_id": 68761592, "body": "Using some bitmath tricks you can simply enumerate all vertices that are at distance exactly <code>k</code>, then just loop <code>k</code> up to <code>r</code>. I&#39;ve answered this before, let me just go find it.."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1479916502, "post_id": 40768507, "comment_id": 68761768, "body": "Yes @harold, you commented at the same time I commented that bitwise manipulations should help, I am looking for something like it. Great, I will wait!"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1479916647, "post_id": 40768507, "comment_id": 68761885, "body": "I <a href=\"http://stackoverflow.com/q/40253731/555045\">found it</a>, but the context was a quite different and it was Java.. still, the same idea applies"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1479916847, "post_id": 40768507, "comment_id": 68762019, "body": "@harold interesting, I would suggest that you modify it a bit to match my question and post an answer, please. :)"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1480025008, "post_id": 40768507, "comment_id": 68812196, "body": "&quot;N points that lie only on the vertices of a cube&quot; and &quot;A vertex may not contain any point&quot;: hem, isn&#39;t that contradictory ? What I am missing ?"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1480025077, "post_id": 40768507, "comment_id": 68812220, "body": "&quot;D is something like 3&quot;: why worry then ?"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1480027058, "post_id": 40768507, "comment_id": 68812748, "body": "@YvesDaoust I am sorry to see you downvoting. In my real applications I am mapping points to a hypercube (points are being assigned to a hypercube), but during that mapping process some vertices might not get any point! Well D = 3 is a super strong assumption, I just had to make to survive the -2 at that time. The idea is to get an answer for that and then generalize it myself!"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1480027196, "post_id": 40768507, "comment_id": 68812790, "body": "&quot;to survive the -2&quot;: ??? And you didn&#39;t answer my question."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1480027316, "post_id": 40768507, "comment_id": 68812817, "body": "Yes @YvesDaoust, I was about to delete the question since it was too broad (see comments above), so I decided to make some strong assumptions. I thought I did, what didn&#39;t I cover? :/"}], "answers": [{"comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1479918116, "post_id": 40769347, "comment_id": 68762890, "body": "I can use <code>unit8_t</code>, since D won&#39;t be more than this, right? But the problem here is that I don&#39;t understand which is the <i>query</i>, is it <code>v</code>? And where are my points? Some (many?) vertices of the cube might be empty, so not all permutations are pointing to points."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1479918638, "post_id": 40769347, "comment_id": 68763243, "body": "@gsamaras yes, <code>v</code>. And yes, this stops being a good idea if N is much less than 2^D, in which case this spends too much time hitting empty space. Are you in a situation like that?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1479918913, "post_id": 40769347, "comment_id": 68763437, "body": "Actually for D &lt; 9 I have an other idea, just have to work that out a bit"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1479919225, "post_id": 40769347, "comment_id": 68763639, "body": "No, D should be something like log(N)/2. So what you are doing, in every iteration, is that based on the query <code>v</code>, you produce ALL the possible permutations with hamming distance <code>k</code>? For example v = 111, k = 1 and D = 3, then you produce 011, 101, 110? Maybe I should make a minimal example to check this. | About the new idea: Oh cool, maybe you can post it as a second answer. :)"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1479920420, "post_id": 40769347, "comment_id": 68764418, "body": "@gsamaras the new idea isn&#39;t working well yet, the details would depend a lot on what you would actually do with the results."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1479920770, "post_id": 40769347, "comment_id": 68764631, "body": "I have N points and one query, right? I want to find all the points that satisfy this: <code>hamming_dist(query, current_point) &lt;= r</code>. I want to report these points, that&#39;s it, that&#39;s my goal, is that clear?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1479921167, "post_id": 40769347, "comment_id": 68764851, "body": "Ok that&#39;s just a bit more annoying than, say, counting them or summing corresponding values or something like that. Anyway, is D=4 of interest? It works out particularly well."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1479924943, "post_id": 40769347, "comment_id": 68767024, "body": "Thank you for the updated answer. To be honest I am yet sure on how to report the points that satisfy <code>hamming_dist(query, current_point) &lt;= r</code>, yet so I am trying to understand on how to use your <code>query()</code>, can you please give an intuitive example (not a minimal one)? :)"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1479925381, "post_id": 40769347, "comment_id": 68767280, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/128863/discussion-between-harold-and-gsamaras\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "is_accepted": true, "score": 4, "last_activity_date": 1479926695, "last_edit_date": 1479926695, "creation_date": 1479917769, "answer_id": 40769347, "question_id": 40768507, "link": "https://stackoverflow.com/questions/40768507/query-points-on-the-vertices-of-a-hamming-cube/40769347#40769347", "title": "Query points on the vertices of a Hamming cube", "body": "<p>There is a nice bithack to go from one bitmask with <code>k</code> bits set to the <a href=\"https://graphics.stanford.edu/~seander/bithacks.html#NextBitPermutation\" rel=\"nofollow noreferrer\">lexicographically next permutation</a>, which means it's fairly simple to loop through all masks with <code>k</code> bits set. XORing these masks with an initial value gives all the values at hamming distance exactly <code>k</code> away from it.</p>\n\n<p>So for <code>D</code> dimensions, where <code>D</code> is less than 32 (otherwise change the types),</p>\n\n<pre><code>uint32_t limit = (1u &lt;&lt; D) - 1;\nfor (int k = 1; k &lt;= r; k++) {\n    uint32_t diff = (1u &lt;&lt; k) - 1;\n    while (diff &lt;= limit) {\n        // v is the input vertex\n        uint32_t vertex = v ^ diff;\n        // use it\n        diff = nextBitPermutation(diff);\n    }\n}\n</code></pre>\n\n<p>Where <code>nextBitPermutation</code> may be implemented in C++ as something like (if you have <code>__builtin_ctz</code>)</p>\n\n<pre><code>uint32_t nextBitPermutation(uint32_t v) {\n    // see https://graphics.stanford.edu/~seander/bithacks.html#NextBitPermutation\n    uint32_t t = v | (v - 1);\n    return (t + 1) | (((~t &amp; -~t) - 1) &gt;&gt; (__builtin_ctz(v) + 1));\n}\n</code></pre>\n\n<p>Or for MSVC (not tested)</p>\n\n<pre><code>uint32_t nextBitPermutation(uint32_t v) {\n    // see https://graphics.stanford.edu/~seander/bithacks.html#NextBitPermutation\n    uint32_t t = v | (v - 1);\n    unsigned long tzc;\n    _BitScanForward(&amp;tzc, v); // v != 0 so the return value doesn't matter\n    return (t + 1) | (((~t &amp; -~t) - 1) &gt;&gt; (tzc + 1));\n}\n</code></pre>\n\n<hr>\n\n<p>If D is <em>really</em> low, 4 or lower, the old <code>popcnt</code>-with-<code>pshufb</code> works really well and generally everything just lines up well, like this:</p>\n\n<pre><code>uint16_t query(int vertex, int r, int8_t* validmask)\n{\n    // validmask should be array of 16 int8_t's,\n    // 0 for a vertex that doesn't exist, -1 if it does\n    __m128i valid = _mm_loadu_si128((__m128i*)validmask);\n    __m128i t0 = _mm_set1_epi8(vertex);\n    __m128i r0 = _mm_set1_epi8(r + 1);\n    __m128i all =        _mm_setr_epi8(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15);\n    __m128i popcnt_lut = _mm_setr_epi8(0, 1, 1, 2, 1, 2, 2, 3, 1, 2,  2,  3,  2,  3,  3,  4);\n    __m128i dist = _mm_shuffle_epi8(popcnt_lut, _mm_xor_si128(t0, all));\n    __m128i close_enough = _mm_cmpgt_epi8(r0, dist);\n    __m128i result = _mm_and_si128(close_enough, valid);\n    return _mm_movemask_epi8(result);\n}\n</code></pre>\n\n<p>This should be fairly fast; fast compared to the bithack above (<code>nextBitPermutation</code>, which is fairly heavy, is used a lot there) and also compared to looping over all vertices and testing whether they are in range (even with builtin <code>popcnt</code>, that automatically takes at least 16 cycles and the above shouldn't, assuming everything is cached or even permanently in a register). The downside is the result is annoying to work with, since it's a mask of which vertices both exist and are in range of the queried point, not a list of them. It would combine well with doing some processing on data associated with the points though.</p>\n\n<p>This also scales down to D=3 of course, just make none of the points >= 8 valid. D>4 can be done similarly but it takes more code then, and since this is really a brute force solution that is only fast due to parallelism it fundamentally gets slower exponentially in D.</p>\n"}], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 1, "accepted_answer_id": 40769347, "answer_count": 1, "score": 0, "last_activity_date": 1479926695, "creation_date": 1479915427, "last_edit_date": 1479916331, "question_id": 40768507, "link": "https://stackoverflow.com/questions/40768507/query-points-on-the-vertices-of-a-hamming-cube", "title": "Query points on the vertices of a Hamming cube", "body": "<p>I have N points that lie only on the vertices of a cube, of dimension D, where D is something like 3.</p>\n\n<p>A vertex may not contain any point. So every point has coordinates in {0, 1}<sup>D</sup>. I am only interested in <em>query time</em>, as long as the memory cost is reasonable ( not exponential in N for example :) ).</p>\n\n<p>Given a query that lies on one of the cube's vertices and an input parameter <code>r</code>, find all the vertices (thus points) that have <em>hamming distance</em> &lt;= <code>r</code> with the query.</p>\n\n<p>What's the way to go in a <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a> environment?</p>\n\n<hr>\n\n<p>I am thinking of a kd-tree, but I am not sure and want help, any input, even approximative, would be appreciated! Since <em>hamming distance</em> comes into play, bitwise manipulations should help (e.g. XOR).</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 9309, "user_id": 496405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d224ce8793eda60a36f5e0ed9f124c?s=128&d=identicon&r=PG", "display_name": "g19fanatic", "link": "https://stackoverflow.com/users/496405/g19fanatic"}, "edited": false, "score": 0, "creation_date": 1479915433, "post_id": 40768458, "comment_id": 68761050, "body": "<code>array[i][j]</code>. Its a multi-dimensional array. need to reference a multidimensional position. Putting an additional forloop around the <code>std::cout</code> will allow you to iterate over the whole array, index by index"}], "answers": [{"tags": [], "owner": {"reputation": 919, "user_id": 7167140, "user_type": "registered", "profile_image": "https://graph.facebook.com/1372208199456919/picture?type=large", "display_name": "Honza Dejdar", "link": "https://stackoverflow.com/users/7167140/honza-dejdar"}, "is_accepted": false, "score": 1, "last_activity_date": 1479915440, "creation_date": 1479915440, "answer_id": 40768515, "question_id": 40768458, "link": "https://stackoverflow.com/questions/40768458/i-am-trying-to-print-out-a-multidimensional-array-but-it-prints-out-weird-memor/40768515#40768515", "title": "I am trying to print out a multidimensional array, but it prints out weird memory address?", "body": "<p>Your array <code>Daniel</code> is 2D array, so if you try to print <code>array[i]</code>, it prints an adress. If you want to print the content of the array, you should do it like this:</p>\n\n<pre><code>void display(int array[2][10]) {\n    for (int i = 0; i &lt; 2; i++) {\n        for(int j = 0; j &lt; 10; j++)\n            std::cout &lt;&lt; array[i][j] &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Also, your <code>main()</code> function should return <code>int</code> instead of <code>void</code>, so change <code>void main()</code> to <code>int main()</code> and <code>return 0;</code> at the end of it.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "is_accepted": false, "score": 1, "last_activity_date": 1479916417, "creation_date": 1479916417, "answer_id": 40768857, "question_id": 40768458, "link": "https://stackoverflow.com/questions/40768458/i-am-trying-to-print-out-a-multidimensional-array-but-it-prints-out-weird-memor/40768857#40768857", "title": "I am trying to print out a multidimensional array, but it prints out weird memory address?", "body": "<p>Pass in the array and the number of rows and columns:</p>\n\n<pre><code>#include &lt;iostream&gt;\nvoid displayArray(int a[][10], size_t numRows, size_t numColumns)\n{\n    for (size_t i = 0; i &lt; numRows; i++){\n        for (size_t j = 0; j &lt; numColumns; j++){\n            std::cout &lt;&lt; a[i][j] &lt;&lt; ' ';\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n}\n\nint main(){\n    int Daniel[2][10] = { { 20, 32, 43, 2, 5, 4, 3, 2, 4, 33 }, { 23, 54, 2, 5, 3, 3, 6, 3, 65, 3 } };\n    displayArray(Daniel, 2, 10);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6783708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eJjfhv0ZcmE/AAAAAAAAAAI/AAAAAAAAABc/tL_eE0LN-FE/photo.jpg?sz=128", "display_name": "manplox0", "link": "https://stackoverflow.com/users/6783708/manplox0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1479916417, "creation_date": 1479915242, "question_id": 40768458, "link": "https://stackoverflow.com/questions/40768458/i-am-trying-to-print-out-a-multidimensional-array-but-it-prints-out-weird-memor", "title": "I am trying to print out a multidimensional array, but it prints out weird memory address?", "body": "<p>As you can see, I am trying to print out a 2D array but it prints out weird memory addresses! any ideas ! i am new to c++!   </p>\n\n<pre><code> #include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;Windows.h&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\nvoid display(int array[2][10], int size);\n\n\nvoid main() {\n    SetConsoleTitleA(\"Random Number generator!\");\n    system(\"Color 3F\");\n    int Daniel[2][10] = { {20, 32, 43, 2, 5, 4, 3, 2 ,4 ,33}, {23, 54, 2, 5,3,3,6,3,65,3} };\n    display(Daniel, 7);\n}\n\nvoid display(int array[2][10], int size) {\n    for (int i = 0; i &lt; size; i++) {\n        std::cout &lt;&lt; array[i] &lt;&lt; std::endl;\n        Sleep(1000);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "loops", "boolean"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479914571, "post_id": 40768200, "comment_id": 68760451, "body": "What if the condition is never true? What do you return then?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1479914582, "post_id": 40768200, "comment_id": 68760458, "body": "Step #1 - make the function return in all code paths. Step #2 - use debugger. Also, where is <code>c</code> defined?"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1479914621, "post_id": 40768200, "comment_id": 68760488, "body": "Step #2 - use your variable <code>n</code>."}, {"owner": {"reputation": 59, "user_id": 4477308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce7067393d9fd600c0468e1f680c0be?s=128&d=identicon&r=PG&f=1", "display_name": "Mroweczka", "link": "https://stackoverflow.com/users/4477308/mroweczka"}, "edited": false, "score": 0, "creation_date": 1479914759, "post_id": 40768200, "comment_id": 68760596, "body": "I am not certain whether i know what to return in all code paths."}, {"owner": {"reputation": 59, "user_id": 4477308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce7067393d9fd600c0468e1f680c0be?s=128&d=identicon&r=PG&f=1", "display_name": "Mroweczka", "link": "https://stackoverflow.com/users/4477308/mroweczka"}, "edited": false, "score": 0, "creation_date": 1479914802, "post_id": 40768200, "comment_id": 68760630, "body": "a,b positive integers n by implication needs to be positive integer as well"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479914810, "post_id": 40768200, "comment_id": 68760641, "body": "If you don&#39;t return <code>true</code>, then what else would you return that is a <code>bool</code>? And if the condition is never true, what will happen to the loops?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479914999, "post_id": 40768200, "comment_id": 68760762, "body": "Did your compiler warn you ?`"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1479915199, "post_id": 40768200, "comment_id": 68760890, "body": "@Mroweczka n*n is positive also for negative n"}, {"owner": {"reputation": 59, "user_id": 4477308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce7067393d9fd600c0468e1f680c0be?s=128&d=identicon&r=PG&f=1", "display_name": "Mroweczka", "link": "https://stackoverflow.com/users/4477308/mroweczka"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1479915259, "post_id": 40768200, "comment_id": 68760934, "body": "@tobi303 yes obviously, i think it doest not matter then."}, {"owner": {"reputation": 59, "user_id": 4477308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce7067393d9fd600c0468e1f680c0be?s=128&d=identicon&r=PG&f=1", "display_name": "Mroweczka", "link": "https://stackoverflow.com/users/4477308/mroweczka"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479915285, "post_id": 40768200, "comment_id": 68760950, "body": "@MichaelWalz &quot;main.cpp|233|error: expected primary-expression before &#39;;&#39; token|&quot;"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479915477, "post_id": 40768200, "comment_id": 68761071, "body": "@Mroweczka sorry your comment does not contain enough information. What did you do ? What happended ? We don&#39;t know the content of  main.cpp etc."}, {"owner": {"reputation": 59, "user_id": 4477308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce7067393d9fd600c0468e1f680c0be?s=128&d=identicon&r=PG&f=1", "display_name": "Mroweczka", "link": "https://stackoverflow.com/users/4477308/mroweczka"}, "edited": false, "score": 0, "creation_date": 1479916267, "post_id": 40768200, "comment_id": 68761616, "body": "You asked about any compiler errors. This is the only error i have main.cpp is only the function and obviously it is used there as well."}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 2, "last_activity_date": 1479915953, "creation_date": 1479915953, "answer_id": 40768692, "question_id": 40768200, "link": "https://stackoverflow.com/questions/40768200/true-false-function-if-a-sum-exists/40768692#40768692", "title": "True/False function if a sum exists", "body": "<p>Your program doesn't compile. You probably intended to write this:</p>\n\n<pre><code>bool c(int n) {\n  int b = 1;\n  int a = 1;\n  for (a = 1; a &lt;= n; a++) {\n    for (b = a; b &lt;= n; b++) {\n      if (a*a + b*b == n*n)\n        return true;\n      else\n        return false;\n    }\n  }\n}\n</code></pre>\n\n<p>which compiles, but which is wrong.</p>\n\n<p>But you probably want this:</p>\n\n<pre><code>bool myfunction(int n) {\n  int b = 1;\n  int a = 1;\n  for (a = 1; a &lt;= n; a++) {\n    for (b = a; b &lt;= n; b++) {\n      if (a*a + b*b == n*n)\n        return true;\n    }\n  }\n\n  return false;\n}\n\nint main() {\n  if (myfunction(5)) {\n    printf(\"myfunction(5) returned true\\n\");\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5430845, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KXkTJMvlxDQ/AAAAAAAAAAI/AAAAAAAAAJA/x8Vs0qO_9B8/photo.jpg?sz=128", "display_name": "karthik", "link": "https://stackoverflow.com/users/5430845/karthik"}, "is_accepted": false, "score": 2, "last_activity_date": 1479916551, "creation_date": 1479916551, "answer_id": 40768904, "question_id": 40768200, "link": "https://stackoverflow.com/questions/40768200/true-false-function-if-a-sum-exists/40768904#40768904", "title": "True/False function if a sum exists", "body": "<pre><code>bool c(int n){\nint b=1;\nint a=1;\nfor (a=1; a&lt;=n; a++) {\n    for (b=a; b&lt;=n; b++) {\n        if (a*a + b*b == n*n) {\n            return true;\n        else\n            return false;\n    }\n}\n}\n</code></pre>\n\n<p>The code you have written will check for a=1 and b=1 and that evaluates to 1 + 1 equals to 2.</p>\n\n<p>So,all that your code does is compare 2 to n.</p>\n\n<p>The <code>return false</code> statement should be outside both the for loops.\nThis means that for all combination of a and b there exists no pair (a,b) such that a<em>a + b</em>b = n*n.</p>\n"}], "owner": {"reputation": 59, "user_id": 4477308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce7067393d9fd600c0468e1f680c0be?s=128&d=identicon&r=PG&f=1", "display_name": "Mroweczka", "link": "https://stackoverflow.com/users/4477308/mroweczka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 40768692, "answer_count": 2, "score": -2, "last_activity_date": 1479916551, "creation_date": 1479914513, "last_edit_date": 1479916413, "question_id": 40768200, "link": "https://stackoverflow.com/questions/40768200/true-false-function-if-a-sum-exists", "title": "True/False function if a sum exists", "body": "<p>I want to have a program that returns true when there exist such positive integer numbers <code>a</code> and <code>b</code> such that <code>a*a+b*b=n*n</code>. </p>\n\n<p>My code is:</p>\n\n<pre><code> bool c(int n){\n    int b=1;\n    int a=1;\n    for (a=1; a&lt;=n; a++) {\n        for (b=a; b&lt;=n; b++) {\n            if (a*a + b*b == n*n) {\n                return true;\n            else\n                return false;\n        }\n    }\n\n}\n</code></pre>\n\n<p>However this code does not return what i want it to. What can i do to fix that?</p>\n\n<p>Please everybody before you down vote please explain what could be improved in this question. I have noticed that sometimes people have a tendency to down vote questions without any explanation. </p>\n"}, {"tags": ["c++", "package", "header-files"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1479913854, "post_id": 40767946, "comment_id": 68759985, "body": "Just forward declare the struct? Or is that what you are trying to avoid doing?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 3, "creation_date": 1479913927, "post_id": 40767946, "comment_id": 68760047, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/28386185/cant-use-stdunique-ptrt-with-t-being-a-forward-declaration\">Can&#39;t use std::unique_ptr&lt;T&gt; with T being a forward declaration</a>"}, {"owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1479914468, "post_id": 40767946, "comment_id": 68760396, "body": "@LogicStuff not quite; see edit."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1479914586, "post_id": 40767946, "comment_id": 68760461, "body": "You don&#39;t need to expose the header for <code>MyPrivateStruct</code>. You need to forward declare it, which is one line: <code>struct MyPrivateStruct;</code> The client doesn&#39;t need to know anything about its definition in its header file."}], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1479914434, "post_id": 40768016, "comment_id": 68760377, "body": "Although for me in Visual Studio it seems I have to create an empty destructor in MyStruct and define it in the cpp file instead of using the default to get it to compile because of the incomplete type. Like in this answer: <a href=\"http://stackoverflow.com/a/9954553/487892\">stackoverflow.com/a/9954553/487892</a>"}, {"owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1479914787, "post_id": 40768016, "comment_id": 68760619, "body": "@drescherjm Yes you do. <code>~unique_ptr</code> will call the destructor of whatever its templated type is. If you allow the default destructor to be generated, it can&#39;t see the definition of <code>~MyPrivateStruct</code> because it is only forward declared at that point."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1479919309, "post_id": 40768016, "comment_id": 68763678, "body": "Yeah, part of the pain.  If you use shared_ptr instead you don&#39;t have that problem, but I wouldn&#39;t recommend using it just because of that."}], "tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": true, "score": 4, "last_activity_date": 1479913939, "creation_date": 1479913939, "answer_id": 40768016, "question_id": 40767946, "link": "https://stackoverflow.com/questions/40767946/can-i-omit-the-type-arguments-of-smart-pointers-in-my-header-files/40768016#40768016", "title": "Can I omit the type arguments of smart pointers in my header files?", "body": "<p>Sure!</p>\n\n<pre><code>struct MyPrivateStruct;\n\nstruct MyStruct {\n    int x;\n  private:\n    std::unique_ptr&lt;MyPrivateStruct&gt; y;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1479914721, "post_id": 40768021, "comment_id": 68760561, "body": "Wrong. C++ standard does not insist on it. See <a href=\"https://gcc.gnu.org/wiki/FAQ#Why_GCC_does_not_warn_for_mismatch_between_struct_and_class_.28-Wmismatched-tags.29_.3F\" rel=\"nofollow noreferrer\">gcc.gnu.org/wiki/&hellip;</a>"}, {"owner": {"reputation": 1242, "user_id": 6448768, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/92c7e7f2c6e7a8ea428c84f93ec49baa?s=128&d=identicon&r=PG&f=1", "display_name": "Fitzwilliam Bennet-Darcy", "link": "https://stackoverflow.com/users/6448768/fitzwilliam-bennet-darcy"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1479914813, "post_id": 40768021, "comment_id": 68760642, "body": "Oh wow, I didn&#39;t know that. Perhaps I shouldn&#39;t base my knowledge solely on my Microsoft toolchain. Thank you so much,"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 2, "creation_date": 1479915617, "post_id": 40768021, "comment_id": 68761174, "body": "@FitzwilliamBennet-Darcy VC++ doesn&#39;t comply with the standard on a <a href=\"https://msdn.microsoft.com/en-us/library/x84h5b78(v=vs.140).aspx\" rel=\"nofollow noreferrer\">number of fronts</a>"}], "tags": [], "owner": {"reputation": 1242, "user_id": 6448768, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/92c7e7f2c6e7a8ea428c84f93ec49baa?s=128&d=identicon&r=PG&f=1", "display_name": "Fitzwilliam Bennet-Darcy", "link": "https://stackoverflow.com/users/6448768/fitzwilliam-bennet-darcy"}, "is_accepted": false, "score": 2, "last_activity_date": 1479914819, "last_edit_date": 1479914819, "creation_date": 1479913949, "answer_id": 40768021, "question_id": 40767946, "link": "https://stackoverflow.com/questions/40767946/can-i-omit-the-type-arguments-of-smart-pointers-in-my-header-files/40768021#40768021", "title": "Can I omit the type arguments of smart pointers in my header files?", "body": "<p><code>MyPrivateStruct</code> in <code>std::unique_ptr&lt;MyPrivateStruct&gt; y;</code> does not have to be a <em>complete type</em>.</p>\n\n<p>That is, you can forward declare it by writing</p>\n\n<p><code>struct MyPrivateStruct;</code></p>\n\n<p>prior to the declaration of <code>y</code>.</p>\n"}], "owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 40768016, "answer_count": 2, "score": 1, "last_activity_date": 1479914819, "creation_date": 1479913721, "last_edit_date": 1495535415, "question_id": 40767946, "link": "https://stackoverflow.com/questions/40767946/can-i-omit-the-type-arguments-of-smart-pointers-in-my-header-files", "title": "Can I omit the type arguments of smart pointers in my header files?", "body": "<p>I am building a C++ library. I have a <code>struct</code> that contains a <code>std::unique_ptr</code> to another <code>struct</code> that I would like to hide from the user. </p>\n\n<p>For example: </p>\n\n<pre><code>struct MyStruct {\n    int x;\n  private:\n    std::unique_ptr&lt;MyPrivateStruct&gt; y;\n};\n</code></pre>\n\n<p>Now, I need to specify <code>MyStruct</code> in a header file that the user can include so that they know its layout. However, this requires that I also expose the header for <code>MyPrivateStruct</code>, which I do not want to do. Since the size of a <code>unique_ptr</code> is the same regardless of the type, is it possible to do something like this? </p>\n\n<pre><code>struct MyStruct {\n    int x;\n  private:\n    std::unique_ptr&lt;auto&gt; y;\n};\n</code></pre>\n\n<p>The type of the <code>y</code> would then be determined by my <code>cpp</code> files. </p>\n\n<hr>\n\n<p>This is not <em>quite</em> the same question as <a href=\"https://stackoverflow.com/questions/28386185/cant-use-stdunique-ptrt-with-t-being-a-forward-declaration\">Can&#39;t use std::unique_ptr&lt;T&gt; with T being a forward declaration</a> since the answer to this question is to use a forward declaration. That question is about a problem when using forward declarations. </p>\n"}, {"tags": ["c++", "winapi", "com", "atl"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 1, "creation_date": 1479913919, "post_id": 40767922, "comment_id": 68760035, "body": "Please show relevant code."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1479924620, "post_id": 40767922, "comment_id": 68766844, "body": "Are there any security settings specified for the service in the Registry? They would be applied before the process starts running."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4016479"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1481448770, "post_id": 40767922, "comment_id": 69375010, "body": "Hi @Remy Hi, If I change call with the REGCLS_SUSPENDED flag &quot;HRESULT HR = module -&gt;RegisterClassObjects (CLSCTX_LOCAL_SERVER | CLSCTX_REMOTE_SERVER, REGCLS_MULTIPLEUSE | REGCLS_SUSPENDED); is succeeding, but CoResumeClassObjects always fail with this error message &quot;The array bounds are invalid. &quot;  I tried to call RegisterClassObjects in different places before this call, but all are vain"}], "owner": {"user_type": "does_not_exist", "display_name": "user4016479"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479924525, "creation_date": 1479913639, "last_edit_date": 1479924525, "question_id": 40767922, "link": "https://stackoverflow.com/questions/40767922/windows-service-compatibility-issueatl-c", "title": "Windows service compatibility issue(ATL ,c++)", "body": "<p>I have an existing windows service application which is working fine in windows 7 for the last few years.</p>\n\n<p>I am facing some issue in Windows 10 Enterprise. <code>CoInitializeSecurity()</code> fails with this error message:</p>\n\n<blockquote>\n  <p>Security must be initialized before any interfaces are marshalled or unmarshalled. It cannot be changed once initialized</p>\n</blockquote>\n\n<p><code>RegisterClassObject()</code> fails with an error message like</p>\n\n<blockquote>\n  <p>The class is configured to run as a security id different from the caller</p>\n</blockquote>\n\n<p>Even though both are perfectly matched.</p>\n\n<p>I have gone through various blogs and replies about this issue, but couldn't find the solution.</p>\n\n<p>I have created a sample service which has same dependency and same user logon account, but these two calls are not failing at all!</p>\n\n<p>Apart from dependency and logon user account, what could be other possibilities for these calls to fail?</p>\n\n<pre><code>HRESULT hr = NULL; \nhr = CoInitializeSecurity( NULL,                           \n                          -1,                             \n                           NULL,                          \n                           NULL,                         \n                           RPC_C_AUTHN_LEVEL_DEFAULT,\n                           RPC_C_IMP_LEVEL_IMPERSONATE, \n                           NULL, \n                           EOAC_NONE, \n                           NULL); \n</code></pre>\n\n<p>and </p>\n\n<pre><code>_Module.RegisterClassObjects(CLSCTX_LOCAL_SERVER | CLSCTX_REMOTE_SERVER, \n                             REGCLS_MULTIPLEUSE) \n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-c++"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 3, "creation_date": 1479914043, "post_id": 40767910, "comment_id": 68760119, "body": "You cant install the IDE but somehow you can (manually) install the 2013 toolchain? Odd..."}, {"owner": {"reputation": 107, "user_id": 2047592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0bbd17dab4a09e42288b7f6f7c6e51?s=128&d=identicon&r=PG", "display_name": "Hadi77", "link": "https://stackoverflow.com/users/2047592/hadi77"}, "edited": false, "score": 0, "creation_date": 1479915384, "post_id": 40767910, "comment_id": 68761017, "body": "I&#39;m using Wine, my Windows 8.1 install is broken and can&#39;t boot to it. I really don&#39;t have the time to refresh my Windows and install all apps again. I decided to install Lubuntu and Wine, then run a compatible version of VC++ Express on it (which is why I&#39;m using 2005). Also, I want C++11 features that VC++ Express 2005 doesn&#39;t have. What I&#39;m asking is very clear: Is it possible to add 2013 toolchain to VC++ Express 2005 IDE?"}, {"owner": {"reputation": 107, "user_id": 2047592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0bbd17dab4a09e42288b7f6f7c6e51?s=128&d=identicon&r=PG", "display_name": "Hadi77", "link": "https://stackoverflow.com/users/2047592/hadi77"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1479915569, "post_id": 40767910, "comment_id": 68761144, "body": "@Borgleader I have VS2013 on the broken Windows 8.1, so I thought this way I can benefit from its newer toolchain :)"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 2, "creation_date": 1479916711, "post_id": 40767910, "comment_id": 68761925, "body": "So you don&#39;t have time to reinstall Windows, but you have time to deal with unsupported configurations? My recommendation is that now you have Lubuntu installed, install VirtualBox, install a Windows virtual machine, and install the new version of VS on it."}, {"owner": {"reputation": 107, "user_id": 2047592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0bbd17dab4a09e42288b7f6f7c6e51?s=128&d=identicon&r=PG", "display_name": "Hadi77", "link": "https://stackoverflow.com/users/2047592/hadi77"}, "edited": false, "score": 0, "creation_date": 1479930310, "post_id": 40767910, "comment_id": 68769736, "body": "I&#39;m currently sticking with Lubuntu and want VS on it. I just asked if it is possible! A man who knows, just answers the question not making excuses, and a man who can&#39;t just says &quot;I don&#39;t know&quot;. It&#39; s StackOverflow, and it&#39;s a &quot;Q/A website&quot;. I wonder why people really like making excuses compared to answering a question."}, {"owner": {"reputation": 107, "user_id": 2047592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0bbd17dab4a09e42288b7f6f7c6e51?s=128&d=identicon&r=PG", "display_name": "Hadi77", "link": "https://stackoverflow.com/users/2047592/hadi77"}, "edited": false, "score": 0, "creation_date": 1479930772, "post_id": 40767910, "comment_id": 68769983, "body": "And yes, I don&#39;t have time to reinstall Windows but have time to deal with unsupported configurations, particularly because of the amount of data I have (1.8TB on a 2TB HDD) on my laptop and huge amount of apps I have to install and the time it takes me to configure the environment again. I don&#39;t really like this situation, I like to use Windows 10 with VS2015 but Win10 has the death sleep problem on my laptop and I <b>have to</b> use the sleep capability. But this way, I think it consumes much less time of me. (It&#39;s just my own opinion. I know it&#39;s better to have it on a clean Windows Install.)"}], "owner": {"reputation": 107, "user_id": 2047592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0bbd17dab4a09e42288b7f6f7c6e51?s=128&d=identicon&r=PG", "display_name": "Hadi77", "link": "https://stackoverflow.com/users/2047592/hadi77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1479913607, "creation_date": 1479913607, "question_id": 40767910, "link": "https://stackoverflow.com/questions/40767910/is-it-possible-to-use-vc-2013-toolchain-with-vc-express-2005", "title": "Is it possible to use VC++ 2013 toolchain with VC++ Express 2005?", "body": "<p>I can only install VC++ 2005 on my system but also want C++11 features on it, so I must have a newer toolchain.</p>\n\n<p>So, Is it possible to use VC++2013 toolchain with Visual C++ Express 2005 without installing the whole VS2013/VC++2013 IDE (e.g. by copying just binaries)?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1479913752, "post_id": 40767864, "comment_id": 68759909, "body": "A somewhat safer solution would be <code>int ref() const { return val; }</code>. With the current approach, it would be valid for a user to say <code>const_cast&lt;int&amp;&gt;(x.ref) = 0;</code>."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1479913799, "post_id": 40767864, "comment_id": 68759943, "body": "@KerrekSB It&#39;s <code>const</code> for a reason though :("}, {"owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "edited": false, "score": 0, "creation_date": 1479914267, "post_id": 40767864, "comment_id": 68760270, "body": "It looks okay for simple classes, there is more maintenance needed for more complex classes (multi constructors, assignment/move operators)"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1479920148, "post_id": 40767864, "comment_id": 68764248, "body": "be careful, because a const reference is not free. It will take space in your struct and the compiler is not allowed to optimize it."}], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 3, "last_activity_date": 1479913606, "creation_date": 1479913606, "answer_id": 40767909, "question_id": 40767864, "link": "https://stackoverflow.com/questions/40767864/c-const-reference-to-class-member-variable-assigned-in-ctor/40767909#40767909", "title": "C++ const reference to class member variable assigned in ctor", "body": "<p>Yes, this will work as expected. <code>val</code> will have a valid location the moment you set <code>ref</code> to it. From then on, <code>ref</code> will just hold whatever is in <code>val</code>.</p>\n"}], "owner": {"reputation": 8388, "user_id": 1130231, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gHygY.png?s=128&g=1", "display_name": "Martin Perry", "link": "https://stackoverflow.com/users/1130231/martin-perry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 40767909, "answer_count": 1, "score": 1, "last_activity_date": 1479913606, "creation_date": 1479913483, "question_id": 40767864, "link": "https://stackoverflow.com/questions/40767864/c-const-reference-to-class-member-variable-assigned-in-ctor", "title": "C++ const reference to class member variable assigned in ctor", "body": "<p>In C++, is this going to work as expected, or will be there undefined behaviour in some cases</p>\n\n<pre><code>class Foo \n{\npublic:\n   const int &amp; ref;\n   Foo() : ref(val) { val = 7; }\n   void SetVal(int v) { val = v; }\n\nprivate:\n   int val;\n}\n</code></pre>\n\n<p>And I expect that <code>ref</code> will \"contain\" value of <code>val</code>.</p>\n\n<p>Why I am doing this... baceuse I want the variable to be read only from outside, but \"assignable\" from inside the class.</p>\n"}, {"tags": ["c++", "most-vexing-parse"], "answers": [{"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 9, "creation_date": 1479913449, "post_id": 40767830, "comment_id": 68759699, "body": "This is probably the most infuriating quirk of C++."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1479913556, "post_id": 40767830, "comment_id": 68759770, "body": "@GillBates Especially in such a complex scenario."}, {"owner": {"reputation": 243, "user_id": 5392140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b8c4097beb2de38fec3827ece512dd0?s=128&d=identicon&r=PG&f=1", "display_name": "G&#225;bor Ferencz", "link": "https://stackoverflow.com/users/5392140/g%c3%a1bor-ferencz"}, "edited": false, "score": 1, "creation_date": 1479913758, "post_id": 40767830, "comment_id": 68759915, "body": "Thank you, I did not know this syntax, hence my bafflement at the situation."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 8, "creation_date": 1479913892, "post_id": 40767830, "comment_id": 68760017, "body": "because of this very quirk I <i>always</i> use brace initialization when possible."}, {"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1479913902, "post_id": 40767830, "comment_id": 68760021, "body": "<code>MyException my_ex(static_cast&lt;std::string&gt;(text))</code> also works (<a href=\"http://coliru.stacked-crooked.com/a/d17dc18d4785c50d\" rel=\"nofollow noreferrer\">live example</a>)."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 2, "creation_date": 1479913968, "post_id": 40767830, "comment_id": 68760068, "body": "<code>MyException ex{ {text} }</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1479923124, "post_id": 40767830, "comment_id": 68765952, "body": "@black Just <code>MyException ex{text}</code> is fine. You don&#39;t need the second set of braces."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1479923771, "post_id": 40767830, "comment_id": 68766354, "body": "<code>throw MyException(text);</code>"}, {"owner": {"reputation": 970, "user_id": 6380992, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iTzJ5.jpg?s=128&g=1", "display_name": "Seshadri R", "link": "https://stackoverflow.com/users/6380992/seshadri-r"}, "edited": false, "score": 0, "creation_date": 1480062767, "post_id": 40767830, "comment_id": 68822505, "body": "Why does not my_ex2 creation require extra parentheses, though it also calls the same constructor?"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 970, "user_id": 6380992, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iTzJ5.jpg?s=128&g=1", "display_name": "Seshadri R", "link": "https://stackoverflow.com/users/6380992/seshadri-r"}, "edited": false, "score": 0, "creation_date": 1480065830, "post_id": 40767830, "comment_id": 68824124, "body": "@SeshadriR Because braces can&#39;t be used for the parameter list, so no ambiguous grammar issue for it."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 34, "last_activity_date": 1496045860, "last_edit_date": 1496045860, "creation_date": 1479913317, "answer_id": 40767830, "question_id": 40767681, "link": "https://stackoverflow.com/questions/40767681/absence-of-compilation-error-when-using-parametrized-constructor/40767830#40767830", "title": "Absence of compilation error when using parametrized constructor", "body": "<p>According to <a href=\"https://en.wikipedia.org/wiki/Most_vexing_parse\" rel=\"nofollow noreferrer\">most vexing parse</a>, <code>MyException my_ex(std::string(text));</code> is a function declaration; the function is named <code>my_ex</code>, taking a parameter named <code>text</code> with type <code>std::string</code>, returns <code>MyException</code>. It's not an object definition at all, then no constructor will be called.</p>\n\n<p>Note the error message <code>undefined reference to 'my_ex(std::string)'</code> for <code>throw my_ex;</code> (you're trying to throw a function pointer in fact), which means that can't find the definition of the function <code>my_ex</code>.</p>\n\n<p>To fix it you can add additional parentheses (as you has shown) or use <a href=\"http://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">braces</a> which supported from C++11: </p>\n\n<pre><code>MyException my_ex1((std::string(text)));\nMyException my_ex2{std::string(text)};\nMyException my_ex3{std::string{text}};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": false, "score": 4, "last_activity_date": 1479929513, "creation_date": 1479929513, "answer_id": 40772744, "question_id": 40767681, "link": "https://stackoverflow.com/questions/40767681/absence-of-compilation-error-when-using-parametrized-constructor/40772744#40772744", "title": "Absence of compilation error when using parametrized constructor", "body": "<p>The answer is to use <code>{}</code> (braced-init) as much as possible. Sometimes, though, it might be missed inadvertently. Luckily, compilers (like clang, under no extra warning flags) can hint:</p>\n\n<pre><code>warning: parentheses were disambiguated as a function declaration [-Wvexing-parse]\n    MyException my_ex(std::string(text));\n                     ^~~~~~~~~~~~~~~~~~~\ntest.cpp:13:23: note: add a pair of parentheses to declare a variable\n    MyException my_ex(std::string(text));\n                      ^\n                      (                )\n1 warning generated.\n</code></pre>\n\n<p>which will immediately point you the issue.</p>\n"}], "owner": {"reputation": 243, "user_id": 5392140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b8c4097beb2de38fec3827ece512dd0?s=128&d=identicon&r=PG&f=1", "display_name": "G&#225;bor Ferencz", "link": "https://stackoverflow.com/users/5392140/g%c3%a1bor-ferencz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 812, "favorite_count": 1, "accepted_answer_id": 40767830, "answer_count": 2, "score": 18, "last_activity_date": 1496045860, "creation_date": 1479912884, "last_edit_date": 1479921606, "question_id": 40767681, "link": "https://stackoverflow.com/questions/40767681/absence-of-compilation-error-when-using-parametrized-constructor", "title": "Absence of compilation error when using parametrized constructor", "body": "<p>Today at work I came across a behavior in C++ which I don't understand. I have produced the following example code to illustrate my problem:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nclass MyException\n{\n    public:\n        MyException(std::string s1) {std::cout &lt;&lt; \"MyException constructor, s1: \" &lt;&lt; s1 &lt;&lt; std::endl;}\n};\n\nint main(){\n    const char * text = \"exception text\";\n    std::cout &lt;&lt; \"Creating MyException object using std::string(const char *).\" &lt;&lt; std::endl;\n    MyException my_ex(std::string(text));\n    std::cout &lt;&lt; \"MyException object created.\" &lt;&lt; std::endl;\n    //throw my_ex;\n\n    std::string string_text(\"exception text\");\n    std::cout &lt;&lt; \"Creating MyException object using std::string.\" &lt;&lt; std::endl;\n    MyException my_ex2(string_text);\n    std::cout &lt;&lt; \"MyException object created.\" &lt;&lt; std::endl;\n    // throw my_ex2;\n\n    return 0;\n}\n</code></pre>\n\n<p>This code snippet compiles without any errors and produces the following output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> $ g++ main.cpp\n $ ./a.out\nCreating MyException object using std::string(const char *).\nMyException object created.\nCreating MyException object using std::string.\nMyException constructor, s1: exception text\nMyException object created.\n</code></pre>\n\n<p>Note that for <code>my_ex</code> the constructor I have defined was not called. Next, if I want to actually throw this variable:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>throw my_ex;\n</code></pre>\n\n<p>I get a compilation error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> $ g++ main.cpp\n/tmp/ccpWitl8.o: In function `main':\nmain.cpp:(.text+0x55): undefined reference to `my_ex(std::string)'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>If I add braces around the conversion, like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>const char * text = \"exception text\";\nstd::cout &lt;&lt; \"Creating MyException object using std::string(const char *).\" &lt;&lt; std::endl;\nMyException my_ex((std::string(text)));\nstd::cout &lt;&lt; \"MyException object created.\" &lt;&lt; std::endl;\nthrow my_ex;\n</code></pre>\n\n<p>Then it works as I would have expected:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> $ g++ main.cpp\n $ ./a.out\nCreating MyException object using std::string(const char *).\nMyException constructor, s1: exception text\nMyException object created.\nterminate called after throwing an instance of 'MyException'\nAborted (core dumped)\n</code></pre>\n\n<p>I have the following questions:</p>\n\n<ol>\n<li>Why does my first example compile? How come I don't get a compilation error?</li>\n<li>Why <strong>doesn't</strong> the code compile, when I try to <code>throw my_ex;</code>?</li>\n<li>Why do the braces resolve the problem?</li>\n</ol>\n"}, {"tags": ["c++", "qt", "clipboard"], "answers": [{"comments": [{"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1480275922, "post_id": 40771425, "comment_id": 68883862, "body": "Fully non-blocking paste is not a desired behavior in most cases. If the paste operation takes a long time, you generally want to prevent the user from interacting with the GUI during that time. A QProgressDialog with a cancel button is imho much better."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1480341415, "post_id": 40771425, "comment_id": 68908745, "body": "@galinette You can offer any behavior to the user as long as you don&#39;t block the event loop. A <code>QProgressDialog</code> is useless if you don&#39;t let the event loop run to keep the UI responsive. In fact, people get it wrong so often that they had to add a hack to the dialog&#39;s <code>setValue</code> method: it&#39;ll process any lingering events for you, even if it means potentially re-entering some code that wasn&#39;t meant to be re-entered. It is very easy to tell whether an application keeps its event loop responsive or not. Those that don&#39;t usually incur additional costs of the OS doing diagnostic snapshots (OS X!)."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1480341462, "post_id": 40771425, "comment_id": 68908778, "body": "@galinette You can definitely show a modal progress dialog while the deserialization happens in the background."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1479935789, "last_edit_date": 1479935789, "creation_date": 1479924325, "answer_id": 40771425, "question_id": 40767612, "link": "https://stackoverflow.com/questions/40767612/discard-qclipboarddatachanged-signal-if-triggered-by-the-same-application/40771425#40771425", "title": "Discard QClipboard::dataChanged() signal if triggered by the same application", "body": "<p>First issue is that you shouldn't be deserializing in the gui thread. You can run the deserialization concurrently.</p>\n\n<p>Once that's fixed, you can then optimize for the case of the clipboard being internal. This can be done using a flag - without blocking signals.</p>\n\n<p>Here's a sketch of how you could address both issues. First, we have a <code>Data</code> class that holds the data and is expensive to copy - so we don't let it be copied:</p>\n\n<pre><code>class Data {\n   Q_DISABLE_COPY(Data) // presumably expensive to copy\npublic:\n   //...\n   QMimeData* serialize() { return new QMimeData; }\n   static QSharedPointer&lt;Data&gt; deserialize(QMimeData*);\n};\nQ_DECLARE_METATYPE(QSharedPointer&lt;Data&gt;)\n</code></pre>\n\n<p>Then we need a way to clone mime data:    </p>\n\n<pre><code>QMimeData* clone(const QMimeData *src) {\n   auto dst = new QMimeData();\n   for (auto format : src-&gt;formats())\n      dst-&gt;setData(format, src-&gt;data(format));\n   return dst;\n}\n</code></pre>\n\n<p>Finally, a controller object that has the <code>on_copy</code> and <code>on_paste</code> methods that are triggered by the actions.</p>\n\n<p>The tracking is done in two stages: first, a copy switches the internal state to <code>Copied</code>. Then, when the clipboard indicates that the data has changed, the state transitions from <code>Copied</code> to <code>Ready</code>.</p>\n\n<p>Finally, <code>on_paste</code> will perform the paste using internal data if the state is <code>Ready</code>. Otherwise, it will deserialize concurrently, and perform the paste once deserialization is finished.</p>\n\n<p>The <code>paste</code> method should implement the actual pasting of the data.</p>\n\n<pre><code>class Class : public QObject {\n   Q_OBJECT\n   QSharedPointer&lt;Data&gt; m_data;\n   enum { None, Copied, Ready } m_internalCopy = None;\n\n   Q_SIGNAL void reqPaste(const QSharedPointer&lt;Data&gt; &amp;);\n   void paste(const QSharedPointer&lt;Data&gt; &amp;);\n   void onDataChanged() {\n      m_internalCopy = m_internalCopy == Copied ? Ready : None;\n   }\npublic:\n   Q_SLOT void on_copy() {\n      m_internalCopy = Copied;\n      QScopedPointer&lt;QMimeData&gt; mimeData(m_data-&gt;serialize());\n      QApplication::clipboard()-&gt;setMimeData(mimeData.data());\n   }\n   Q_SLOT void on_paste() {\n      if (m_internalCopy == Ready)\n         return paste(m_data);\n\n      m_internalCopy = None;\n      auto mimeData = clone(QApplication::clipboard()-&gt;mimeData());\n      QtConcurrent::run([=]{\n         emit reqPaste(Data::deserialize(mimeData));\n         delete mimeData;\n      });\n   }\n   Class() {\n      qRegisterMetaType&lt;QSharedPointer&lt;Data&gt;&gt;();\n      connect(QApplication::clipboard(), &amp;QClipboard::dataChanged, this,\n              &amp;Class::onDataChanged);\n      connect(this, &amp;Class::reqPaste, this, &amp;Class::paste);\n   }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4799, "user_id": 6842725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d760417ddd74d615520fcdabd6c42ef?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Krammer", "link": "https://stackoverflow.com/users/6842725/kevin-krammer"}, "is_accepted": true, "score": 3, "last_activity_date": 1479982933, "creation_date": 1479982933, "answer_id": 40783778, "question_id": 40767612, "link": "https://stackoverflow.com/questions/40767612/discard-qclipboarddatachanged-signal-if-triggered-by-the-same-application/40783778#40783778", "title": "Discard QClipboard::dataChanged() signal if triggered by the same application", "body": "<p>From the documentation I would assume that <code>QClipboard::ownsClipboard()</code> returns <code>true</code> if the <code>dataChanged()</code> is caused by the current process itself.</p>\n\n<p>So you could check that in the slot connected to <code>dataChanged()</code> and e.g. ignore that specific invocation.</p>\n"}], "owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 40783778, "answer_count": 2, "score": 3, "last_activity_date": 1479982933, "creation_date": 1479912688, "question_id": 40767612, "link": "https://stackoverflow.com/questions/40767612/discard-qclipboarddatachanged-signal-if-triggered-by-the-same-application", "title": "Discard QClipboard::dataChanged() signal if triggered by the same application", "body": "<p>I'm using QClipboard in an application, where large 3D objects may be copied and pasted. The paste operations may block the GUI for some time as a lot of data has to be de-serialized.</p>\n\n<p>I would like to optimize this for the frequent case where objects are copied and pasted on the same application window. In that case I do not need a system-wide clipboard, simple internal functions may store and copy the c++ object without need for deserialization.</p>\n\n<p>So the idea is:</p>\n\n<p>1)When \"Copy\" is called, a copy of the object is stored internally, and the object is serialized and placed on the system clipboard. A flag is set to remember that the next paste action should directly take the stored object, and not the system clipboard.</p>\n\n<p>2)When the system clipboard has been modified by another app (possibly the same program, but another process), a flag is set to know that the next paste action should be done from the system clipboard, with deserialization.</p>\n\n<p>3)The \"Paste\" action checks for the flag, and either take the internally stored object, or deserializes an object from the system clipboard.</p>\n\n<p>The issue is 1). Whenever I change the system clipboard, the dataChanged() signal gets triggered. And this is done asynchronously, long time after QClipboard::setData has been called. So setting blockSignals() during the call to setData() does not help.</p>\n\n<p>Any idea?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "overloading"], "comments": [{"owner": {"reputation": 3853, "user_id": 1833960, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/92d42253747f8ee3a83465dc04126f93?s=128&d=identicon&r=PG", "display_name": "George Sovetov", "link": "https://stackoverflow.com/users/1833960/george-sovetov"}, "edited": false, "score": 2, "creation_date": 1479912595, "post_id": 40767476, "comment_id": 68759074, "body": "<code>rhs</code> is just parameter name."}], "answers": [{"tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": false, "score": 2, "last_activity_date": 1479912456, "creation_date": 1479912456, "answer_id": 40767521, "question_id": 40767476, "link": "https://stackoverflow.com/questions/40767476/how-does-rhs-work/40767521#40767521", "title": "How does rhs work?", "body": "<p><code>rhs</code> is just a name people usually use for that operator, it has no special meaning. The way that operator is defined always makes the argument the right-hand element.</p>\n"}, {"tags": [], "owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "is_accepted": true, "score": 15, "last_activity_date": 1479912488, "creation_date": 1479912488, "answer_id": 40767534, "question_id": 40767476, "link": "https://stackoverflow.com/questions/40767476/how-does-rhs-work/40767534#40767534", "title": "How does rhs work?", "body": "<p>The compiler doesn't know that <code>rhs</code> stands for \"right hand side\", and in fact the name of that variable can be anything you like.</p>\n\n<p>The compiler \"knows\" how to format this because the syntax of <code>operator=</code> requires it to be this way.</p>\n\n<pre><code>class A\n{\npublic:\n   A&amp; operator=(const A&amp; other);\n};\n</code></pre>\n\n<p>The language defines the usage of this operator to take the form:</p>\n\n<pre><code>A a, b;\na = b;\n</code></pre>\n\n<p>The code above calls <code>A::operator=(const &amp;other)</code> against the instance of <code>A</code> named <code>a</code>, and uses the instance of <code>A</code> named <code>b</code> as <code>other</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 2, "last_activity_date": 1479912524, "creation_date": 1479912524, "answer_id": 40767550, "question_id": 40767476, "link": "https://stackoverflow.com/questions/40767476/how-does-rhs-work/40767550#40767550", "title": "How does rhs work?", "body": "<p>If you do something like:</p>\n\n<pre><code>int a = 5;\nint b = 3;\na = b;\n</code></pre>\n\n<p>The assignment part is actually just a function call:</p>\n\n<pre><code>a.operator=(b);\n</code></pre>\n\n<p>Nothing special going on. The parameter name doesn't matter, just the signature which consists of the return type and parameters types, not names.</p>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1479912543, "creation_date": 1479912543, "answer_id": 40767559, "question_id": 40767476, "link": "https://stackoverflow.com/questions/40767476/how-does-rhs-work/40767559#40767559", "title": "How does rhs work?", "body": "<p>As with any function, you can call the argument anything that you want.</p>\n\n<p>Using your example with the assignment operator, if you have something like</p>\n\n<pre><code>MyArray&lt;int&gt; arr1, arr2;\narr1 = arr2;\n</code></pre>\n\n<p>That is equivalent to</p>\n\n<pre><code>MyArray&lt;int&gt; arr1, arr2;\narr1.operator=(arr2);\n</code></pre>\n\n<p>The \"right hand side\" is simply passed as an argument to a normal member function.</p>\n"}, {"tags": [], "owner": {"reputation": 1242, "user_id": 6448768, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/92c7e7f2c6e7a8ea428c84f93ec49baa?s=128&d=identicon&r=PG&f=1", "display_name": "Fitzwilliam Bennet-Darcy", "link": "https://stackoverflow.com/users/6448768/fitzwilliam-bennet-darcy"}, "is_accepted": false, "score": 3, "last_activity_date": 1479912548, "creation_date": 1479912548, "answer_id": 40767560, "question_id": 40767476, "link": "https://stackoverflow.com/questions/40767476/how-does-rhs-work/40767560#40767560", "title": "How does rhs work?", "body": "<p>The standard assignment operator to an instance of the same type has the prototype</p>\n\n<p><code>MyArray&lt;T&gt;&amp; operator=(const MyArray&lt;T&gt;&amp;);</code></p>\n\n<p>The name <code>rhs</code> is normally given to the function parameter since it appears on the right hand side of an assignment when the operator is invoked. It improves the legibility of your source code, that's all.</p>\n"}, {"tags": [], "owner": {"reputation": 626, "user_id": 6618333, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh5.googleusercontent.com/-fr3rUN5NoF8/AAAAAAAAAAI/AAAAAAAAAWw/hwrZL2E6vYI/photo.jpg?sz=128", "display_name": "Ankit Vallecha", "link": "https://stackoverflow.com/users/6618333/ankit-vallecha"}, "is_accepted": false, "score": 1, "last_activity_date": 1479913277, "creation_date": 1479913277, "answer_id": 40767817, "question_id": 40767476, "link": "https://stackoverflow.com/questions/40767476/how-does-rhs-work/40767817#40767817", "title": "How does rhs work?", "body": "<p>I am assuming this on this assumption that MyArray will be having some structure like this.</p>\n\n<pre><code>    class MyArray{\npublic:\n       int* arr;\n       int len;\n       MyArray( int l ){\n          arr = new int[l];\n          len = l;\n       }\n       ~MyArray(){\n          delete [] arr;\n       }\n    };\n</code></pre>\n\n<p>Now consider a scenario where there are 2 object of MyArray </p>\n\n<pre><code>MyArray ob1(3); \nfor( int i=0; i&lt;3; i++ )\n   ob1[i]=i*i; // ob1 = {0, 1, 4}\nMyArray ob2(3);\nfor( int i=0; i&lt;3; i++ )\n   ob2[i]=i+1; // ob2 = {1, 2, 3}\n</code></pre>\n\n<p>Now if we do <code>ob1 = ob2</code>; what compiler would do it would make arr1 point to arr2, so if Ob2 is changed to say {4,5,6} Ob1 will also change to {4,5,6},  this is called shallow copy.To avoid that scenario we add this</p>\n\n<pre><code>MyArray&amp; operator=(const MyArray&amp; rhs){\n     for( int i=0; i&lt;rhs.len; i++ ) this.arr[i] = rhs[i];\n }\n</code></pre>\n\n<p>Now if ob2 is changed ob1 will not get affected because we have copied the array on our own not the pointer copy.So this is called deep copy. This is one of major scenario where = is overloaded.</p>\n"}], "owner": {"reputation": 122, "user_id": 4881783, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/77efd2d535abb59e6c3b57567302962d?s=128&d=identicon&r=PG&f=1", "display_name": "onur", "link": "https://stackoverflow.com/users/4881783/onur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9058, "favorite_count": 0, "accepted_answer_id": 40767534, "answer_count": 6, "score": 4, "last_activity_date": 1531125621, "creation_date": 1479912303, "last_edit_date": 1531125621, "question_id": 40767476, "link": "https://stackoverflow.com/questions/40767476/how-does-rhs-work", "title": "How does rhs work?", "body": "<p>Here I understand rhs means right hand side but I don't understand how does compiler understand \"rhs\" refers to right hand side. And can someone explain in which case will this overloading be necessary?</p>\n\n<pre><code>MyArray&lt;T&gt;&amp; operator=(const MyArray&lt;T&gt;&amp; rhs); \n</code></pre>\n"}, {"tags": ["c++", "bash", "redirect", "gcc", "formatting"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1479913125, "post_id": 40767475, "comment_id": 68759470, "body": "<code>make |&amp; tee example.out</code> should be equivalent and much simpler."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1479913359, "post_id": 40767475, "comment_id": 68759636, "body": "Another non-answer, but this could help guide you to the solution: commands often modify their output when they detect their standard output is a terminal. In this case, <code>gcc</code> may provided formatted output (containing characters intended to be interpreted by the terminal), but not if it detects that it is writing to a pipe. There may be a way to force <code>gcc</code> to provide colorized output regardless of its standard output."}], "answers": [{"comments": [{"owner": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "edited": false, "score": 0, "creation_date": 1479976329, "post_id": 40771086, "comment_id": 68785725, "body": "This is awesome :) Thank you!"}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 1, "last_activity_date": 1479923062, "creation_date": 1479923062, "answer_id": 40771086, "question_id": 40767475, "link": "https://stackoverflow.com/questions/40767475/can-i-keep-the-formatting-of-the-compiler-output-when-handling-it/40771086#40771086", "title": "Can I keep the formatting of the compiler output when handling it?", "body": "<p>The documentation says (<code>File: gcc-6.info,  Node: Diagnostic Message Formatting Options</code>):</p>\n\n<blockquote>\n  <h2><code>-fdiagnostics-color</code>[=WHEN]</h2>\n  \n  <p>Use color in diagnostics.  WHEN is <code>never</code>, <code>always</code>, or <code>auto</code>.\n  The default depends on how the compiler has been configured, it can\n  be any of the above WHEN options or also <code>never</code> if <code>GCC_COLORS</code>\n  environment variable isn't present in the environment, and <code>auto</code>\n  otherwise.  <code>auto</code> means to use color only when the standard error\n  is a terminal.</p>\n</blockquote>\n"}], "owner": {"reputation": 1760, "user_id": 3255071, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0tVHD.png?s=128&g=1", "display_name": "Adam Hunyadi", "link": "https://stackoverflow.com/users/3255071/adam-hunyadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 40771086, "answer_count": 1, "score": 1, "last_activity_date": 1488606092, "creation_date": 1479912302, "last_edit_date": 1488606092, "question_id": 40767475, "link": "https://stackoverflow.com/questions/40767475/can-i-keep-the-formatting-of-the-compiler-output-when-handling-it", "title": "Can I keep the formatting of the compiler output when handling it?", "body": "<p>Whenever I call run GCC, it nicely formats its output (making filenames bold, note labels white, error labels red, etc.). However, when I want to redirect it and still keep it displayed, the formatting just disappears...</p>\n\n<p>Example:</p>\n\n<pre><code>make                                    # The display is formatted\n(...)\nmake |&amp; tee &gt;(xargs echo &gt; example.out) # The display is not formatted\n(...)\n</code></pre>\n\n<p>How can I redirect the output while keeping the original display formatted?</p>\n"}, {"tags": ["c++", "opencv", "video", "avi"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1479913764, "post_id": 40767411, "comment_id": 68759921, "body": "Check <a href=\"http://stackoverflow.com/a/32227015/5008845\">stackoverflow.com/a/32227015/5008845</a>"}, {"owner": {"reputation": 171, "user_id": 4861798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/255c027c29bf204911c95e96981537cd?s=128&d=identicon&r=PG&f=1", "display_name": "Feten Besbes", "link": "https://stackoverflow.com/users/4861798/feten-besbes"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1479914967, "post_id": 40767411, "comment_id": 68760737, "body": "Thank you, it is is fixed."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1479915112, "post_id": 40767411, "comment_id": 68760831, "body": "Glad it helped. Please accept to close as duplicate then"}], "owner": {"reputation": 171, "user_id": 4861798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/255c027c29bf204911c95e96981537cd?s=128&d=identicon&r=PG&f=1", "display_name": "Feten Besbes", "link": "https://stackoverflow.com/users/4861798/feten-besbes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "closed_date": 1479931984, "answer_count": 0, "score": 4, "last_activity_date": 1479912171, "creation_date": 1479912171, "question_id": 40767411, "link": "https://stackoverflow.com/questions/40767411/i-cant-open-video-file-with-c-opencv3", "closed_reason": "Duplicate", "title": "I can&#39;t open video file with C++ &amp; OpenCV3", "body": "<p>I tried to read saved video file (.avi) using the following code:</p>\n\n<pre><code>#include &lt;iostream&gt; // for standard I/O\n#include &lt;string&gt;   // for strings\n#include &lt;opencv2/core/core.hpp&gt;        \n#include &lt;opencv2/highgui/highgui.hpp&gt; \nusing namespace std;\nusing namespace cv;\nint main(int argc, char *argv[])\n{\n    const string source = argv[1];          \n    VideoCapture inputVideo(source);        \n\n    if (!inputVideo.isOpened())\n    {\n       cout  &lt;&lt; \"Could not open the input video: \" &lt;&lt; source &lt;&lt; endl;\n       return -1;\n    }\n       cout  &lt;&lt; \"YESSSSSSSSSSSSSSS : open the input video: \" &lt;&lt; source &lt;&lt;endl;\n }\n</code></pre>\n\n<p>There is no compilation errors.\nBut when I run it I got this error</p>\n\n<pre><code>GStreamer: Error opening bin: Unrecoverable syntax error while parsing pipeline 4p-c0.avi\n</code></pre>\n\n<p>Could please help.</p>\n"}, {"tags": ["c++", "excel"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 1, "creation_date": 1479912268, "post_id": 40767377, "comment_id": 68758860, "body": "You can try with stringstream or some CSV parser. CSV is not a native Excel format."}, {"owner": {"reputation": 3, "user_id": 7197746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f3e29612cab094171ee76e4506f8ef4?s=128&d=identicon&r=PG&f=1", "display_name": "mDotL", "link": "https://stackoverflow.com/users/7197746/mdotl"}, "edited": false, "score": 0, "creation_date": 1479925905, "post_id": 40767377, "comment_id": 68767552, "body": "I will try both of those options at some point today and let you know if it works, thanks!"}, {"owner": {"reputation": 3373, "user_id": 659466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/97ual.jpg?s=128&g=1", "display_name": "Motes", "link": "https://stackoverflow.com/users/659466/motes"}, "edited": false, "score": 0, "creation_date": 1479926494, "post_id": 40767377, "comment_id": 68767846, "body": "I&#39;m sad to say this is the inevitable consequence of ever higher abstraction and improvements and ease in programming. Even now, you probably want some C++ library that does what you want instead of rolling this yourself. The essence, young coder, of C/C++ is that it is native and more powerful. But, you should realize that means all you really have then is an adding machine and image creator. Pretty much, I&#39;m saying you have to begin at first principles."}, {"owner": {"reputation": 3373, "user_id": 659466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/97ual.jpg?s=128&g=1", "display_name": "Motes", "link": "https://stackoverflow.com/users/659466/motes"}, "edited": false, "score": 0, "creation_date": 1479926900, "post_id": 40767377, "comment_id": 68768049, "body": "If you use <code>getline</code> with a comma character then the second read will contain two numbers separated by a newline, use <code>getline</code> with the new line character then copy the string to another string, <code>tempIn</code> until you find a comma.then use <code>stod()</code> passing it <code>tempIn</code> to convert to <code>double</code> and add the double to a <code>vector&lt;double&gt;</code> , then fill <code>tempIn</code> with null characters and read past the comma to the end of the line (the new line character) until you read the second double into <code>tempIn</code>, then convert it and store it in the Y vector."}, {"owner": {"reputation": 3373, "user_id": 659466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/97ual.jpg?s=128&g=1", "display_name": "Motes", "link": "https://stackoverflow.com/users/659466/motes"}, "edited": false, "score": 0, "creation_date": 1479927168, "post_id": 40767377, "comment_id": 68768210, "body": "btw, I&#39;m only here because I thought someone wanted to know how to read XLSX files in C++, but it looks you are only reading a CSV, still if you want to know how to read an XLSX using Microsoft ODBC, I will answer."}, {"owner": {"reputation": 3, "user_id": 7197746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f3e29612cab094171ee76e4506f8ef4?s=128&d=identicon&r=PG&f=1", "display_name": "mDotL", "link": "https://stackoverflow.com/users/7197746/mdotl"}, "edited": false, "score": 0, "creation_date": 1479931977, "post_id": 40767377, "comment_id": 68770607, "body": "Thank you Motes.  Originally it was an excel file but it seemed that changing the file type would make things easier with my limited knowledge.  The data acquisition application I&#39;m using allows me to select the file type I want to save the data in so i changed from XLSX to CSV and then to LVD since the person&#39;s solution who commented below seemed to work with text files."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7197746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f3e29612cab094171ee76e4506f8ef4?s=128&d=identicon&r=PG&f=1", "display_name": "mDotL", "link": "https://stackoverflow.com/users/7197746/mdotl"}, "edited": false, "score": 1, "creation_date": 1479931477, "post_id": 40768625, "comment_id": 68770342, "body": "I made the software save as LVD instead and used your solution and it works! thank you very much."}, {"owner": {"reputation": 194, "user_id": 4076343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/16E2V.png?s=128&g=1", "display_name": "Steve Thibault", "link": "https://stackoverflow.com/users/4076343/steve-thibault"}, "reply_to_user": {"reputation": 3, "user_id": 7197746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f3e29612cab094171ee76e4506f8ef4?s=128&d=identicon&r=PG&f=1", "display_name": "mDotL", "link": "https://stackoverflow.com/users/7197746/mdotl"}, "edited": false, "score": 0, "creation_date": 1479931901, "post_id": 40768625, "comment_id": 68770558, "body": "Not a problem. Happy to help!"}], "tags": [], "owner": {"reputation": 194, "user_id": 4076343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/16E2V.png?s=128&g=1", "display_name": "Steve Thibault", "link": "https://stackoverflow.com/users/4076343/steve-thibault"}, "is_accepted": true, "score": 1, "last_activity_date": 1479925913, "last_edit_date": 1479925913, "creation_date": 1479915768, "answer_id": 40768625, "question_id": 40767377, "link": "https://stackoverflow.com/questions/40767377/c-program-to-read-single-column-of-excel-data-containing-two-double-values-sep/40768625#40768625", "title": "c++ program to read single column of excel data containing two double values separated by a comma and store each in their own arrays", "body": "<p>Assuming the file is simply a text file in the format of double,double\\n you could use the following code to read it into two arrays:</p>\n\n<pre><code>    std::vector&lt;double&gt; xs;\nstd::vector&lt;double&gt; ys;\n\nwhile(getline(input,s1))\n{\n    std::istringstream ss(s1);\n    double x, y;\n\n    ss &gt;&gt; x;\n    // read past the comma\n    ss.get();\n\n    ss &gt;&gt; y;\n\n    //add to the arrays\n    xs.push_back(x);\n    ys.push_back(y);\n}\n</code></pre>\n\n<p>This handles reading the comma and end of line with getline. Providing no delim argument assumes read to end of line. </p>\n\n<p>Then create a string stream that treats a string somewhat like a file and allows you to parse the string like a file stream. Its not the fastest way to do this, but its simple and handles end of file and end of line in a simple way. </p>\n"}], "owner": {"reputation": 3, "user_id": 7197746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f3e29612cab094171ee76e4506f8ef4?s=128&d=identicon&r=PG&f=1", "display_name": "mDotL", "link": "https://stackoverflow.com/users/7197746/mdotl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 885, "favorite_count": 0, "accepted_answer_id": 40768625, "answer_count": 1, "score": 0, "last_activity_date": 1479925913, "creation_date": 1479912088, "question_id": 40767377, "link": "https://stackoverflow.com/questions/40767377/c-program-to-read-single-column-of-excel-data-containing-two-double-values-sep", "title": "c++ program to read single column of excel data containing two double values separated by a comma and store each in their own arrays", "body": "<p>I have an excel file in which there is a single column with one double value, a comma, and then another double value in each cell.<br>\nex:  5.393,4.1245</p>\n\n<p>I would like to be able to read in those values and store them in separate arrays.  One array with x values and one array with y values so that I can do other things with them.  </p>\n\n<pre><code>// string to be read from excel\nstring s1;\n\n// declare object\nifstream input;\n\n// open workbook\ninput.open(\"Workbook3.csv\");\n\n// check if file exists\nif(input.fail())\n{\n    cout &lt;&lt; \"File does not exist.\" &lt;&lt; endl;\n    cout &lt;&lt; \"Exiting Program.\" &lt;&lt; endl;\n    return 0;\n}\n\nwhile(getline(input, s1, ','))\n{\n    // using this format I would need to convert string to double perhaps and then read into array?\n}\n\nreturn 0;\n</code></pre>\n\n<p>The trouble I'm having is figuring out how to read in a double value until a comma delimiter is reached and then reading in another value after the delimiter.  Following that, also telling it to move on to the next row until it would eventually reach an empty cell. Perhaps it would be a better idea to use VBS for this?\nAny help is greatly appreciated.</p>\n"}, {"tags": ["c++", "c++11", "c++14", "language-lawyer"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1479911939, "post_id": 40767213, "comment_id": 68758637, "body": "It does not have transparent <code>operator[]</code> either"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479911981, "post_id": 40767213, "comment_id": 68758668, "body": "@Slava, but it does have a transparent <code>find</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1479912686, "post_id": 40767213, "comment_id": 68759142, "body": "I would not want it. Key is a specific type, and I do not want a templated function which would take anything, only to give me sheets of errors whenever I mistype the argument."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1479912715, "post_id": 40767213, "comment_id": 68759164, "body": "@StoryTeller, this is very different. <code>find</code> is expected to be transparent, simply because the same find expressed as explicit loop would be transparent."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1479913048, "post_id": 40767213, "comment_id": 68759410, "body": "@SergeyA It wasn&#39;t expected to be transparent until c++14. We implicitly converted to <code>Key</code> for both operations. It&#39;s a valid question and contrast."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1479914432, "post_id": 40768155, "comment_id": 68760376, "body": "Not sure if I buy this argument. If the type is convertible, it is the same as being constructible from it."}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1479914537, "post_id": 40768155, "comment_id": 68760438, "body": "@SergeyA The two types are not required to be convertible - they are only required to be comparable through a transparent comparator."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1479914802, "post_id": 40768155, "comment_id": 68760632, "body": "this is indeed correct! I would leave my comment there for future readers, but it&#39;s logically retracted."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1479979547, "post_id": 40768155, "comment_id": 68787645, "body": "Also, unlike the homogeneous case, there&#39;s no requirement that a heterogeneous key compares equivalent to at most one key in the map. What do you return if more than one key is a match?"}, {"owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1479987066, "post_id": 40768155, "comment_id": 68793090, "body": "@T.C. The same argument could be made for <code>find</code>, but there&#39;s a transparent <code>find</code>."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "edited": false, "score": 3, "creation_date": 1479987180, "post_id": 40768155, "comment_id": 68793177, "body": "@krzaq except that <code>find</code> is an established operation for multimaps too."}, {"owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1479987251, "post_id": 40768155, "comment_id": 68793220, "body": "@T.C. and <code>at</code> is an established non-option for multimaps. Okay, makes sense now, thanks :)"}], "tags": [], "owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "is_accepted": true, "score": 7, "last_activity_date": 1479914365, "creation_date": 1479914365, "answer_id": 40768155, "question_id": 40767213, "link": "https://stackoverflow.com/questions/40767213/why-no-transparent-c1x-stdmapat/40768155#40768155", "title": "Why no transparent C++1x std::map::at?", "body": "<p>My guess is that <code>std::map::at()</code> must be a \"bounds-checked\" version of <code>std::map::operator[]()</code>. Providing a transparent version of <code>std::map::operator[]()</code> imposes an additional requirement on <code>std::map::key_type</code> and the query key type <code>K</code> - if the query key is not in the map, it must be inserted (with default constructed value), which means that <code>std::map::key_type</code> must be constructible from the the query key type.</p>\n"}], "owner": {"reputation": 16607, "user_id": 267482, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fd69625825bed998b63fef68a23592aa?s=128&d=identicon&r=PG", "display_name": "bobah", "link": "https://stackoverflow.com/users/267482/bobah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 0, "accepted_answer_id": 40768155, "answer_count": 1, "score": 9, "last_activity_date": 1479914365, "creation_date": 1479911597, "last_edit_date": 1495540795, "question_id": 40767213, "link": "https://stackoverflow.com/questions/40767213/why-no-transparent-c1x-stdmapat", "title": "Why no transparent C++1x std::map::at?", "body": "<p>Is there a reason for missing <a href=\"https://stackoverflow.com/questions/20317413/what-are-transparent-comparators\">transparent</a> (<code>template &lt;class K&gt; at(K&amp;&amp; key);</code>) in <code>std::map</code>?</p>\n"}]