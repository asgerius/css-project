[{"tags": ["c++", "k-means"], "comments": [{"owner": {"reputation": 28846, "user_id": 327083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i8ttM.png?s=128&g=1", "display_name": "J...", "link": "https://stackoverflow.com/users/327083/j"}, "edited": false, "score": 0, "creation_date": 1485389073, "post_id": 41863875, "comment_id": 70911432, "body": "Possible duplicate : <a href=\"http://stackoverflow.com/q/388242/327083\">The Definitive C++ Book Guide and List</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7471609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/If80R.jpg?s=128&g=1", "display_name": "littleMissProgrammer", "link": "https://stackoverflow.com/users/7471609/littlemissprogrammer"}, "edited": false, "score": 0, "creation_date": 1485389823, "post_id": 41863924, "comment_id": 70911635, "body": "Thank you for your answer too, holygeek. i guess i was more confused with the vectors&lt;int&gt; variable but i get it now."}], "tags": [], "owner": {"reputation": 14157, "user_id": 269483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1739436c0106f63037d5c31a3371b0c5?s=128&d=identicon&r=PG", "display_name": "holygeek", "link": "https://stackoverflow.com/users/269483/holygeek"}, "is_accepted": false, "score": 0, "last_activity_date": 1485389010, "creation_date": 1485389010, "answer_id": 41863924, "question_id": 41863875, "link": "https://stackoverflow.com/questions/41863875/what-does-this-code-snippet-do-exactly/41863924#41863924", "title": "What does this code snippet do exactly?", "body": "<p>The for loop iterates through the labels in <code>bestLabels</code> and scores them based on how often they appear (<code>clusters[id]++</code> - this part increases the score, or frequency). It also keep track of the most frequent label - that's what the clause of the <code>if (clusters[id] &gt; max)</code> condition does.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7471609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/If80R.jpg?s=128&g=1", "display_name": "littleMissProgrammer", "link": "https://stackoverflow.com/users/7471609/littlemissprogrammer"}, "edited": false, "score": 0, "creation_date": 1485389673, "post_id": 41863927, "comment_id": 70911599, "body": "oh i see. it makes more sense to me now. i just got confused because of the &quot;clusters&quot; variable having two parameters and increments it with the variable &quot;id&quot;. Thank you, Mikel!"}], "tags": [], "owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "is_accepted": true, "score": 1, "last_activity_date": 1485389019, "creation_date": 1485389019, "answer_id": 41863927, "question_id": 41863875, "link": "https://stackoverflow.com/questions/41863875/what-does-this-code-snippet-do-exactly/41863927#41863927", "title": "What does this code snippet do exactly?", "body": "<p>The following line:</p>\n\n<p><code>vector&lt;int&gt; clusters(k,0);</code></p>\n\n<p>Defines a random-access collection of <code>k</code> total integers each with an initial value of 0. <code>clusters[id]</code> accesses the integer value stored at index <code>id</code> in the vector. <code>clusters[id]++</code> increments the integer value stored at index <code>id</code>. This works because <code>operator []</code> on a vector returns a reference to the indexed item, allowing modification.</p>\n"}], "owner": {"reputation": 13, "user_id": 7471609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/If80R.jpg?s=128&g=1", "display_name": "littleMissProgrammer", "link": "https://stackoverflow.com/users/7471609/littlemissprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 41863927, "answer_count": 2, "score": -7, "last_activity_date": 1485389019, "creation_date": 1485388654, "last_edit_date": 1485388752, "question_id": 41863875, "link": "https://stackoverflow.com/questions/41863875/what-does-this-code-snippet-do-exactly", "title": "What does this code snippet do exactly?", "body": "<pre><code>int max = 0, id = 0;\nint indx= 0;\n\nvector&lt;int&gt; clusters(k,0);\n\nfor (size_t i = 0; i &lt; bestLabels.size(); i++)\n{\n    id = bestLabels[i];\n    clusters[id]++;\n\n    if (clusters[id] &gt; max)\n    {\n        max = clusters[id];\n        indx = id;\n    }\n}\n</code></pre>\n\n<p>This code calculates for the largest cluster through K-Means Clustering but i don't quite understand how \"clusters[id]++;\" and \"cluster[id]\" work. What do they do exactly? Can anyone please give a detailed explanation on the process happening inside the for loop? Any help would be highly appreciated. Thank you!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1485386900, "post_id": 41863559, "comment_id": 70910818, "body": "The difference is <code>[]</code>. As for why, read any C++ tutorial."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1485386940, "post_id": 41863559, "comment_id": 70910833, "body": "Your code doesn&#39;t print <code>ptr</code>"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1485386944, "post_id": 41863559, "comment_id": 70910834, "body": "I don&#39;t get the question. What exactly is confusion you about printing different things yielding different results?"}, {"owner": {"reputation": 93997, "user_id": 3010968, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5c9bc5babd6d3ceafcc3f95fbdd5b313?s=128&d=identicon&r=PG&f=1", "display_name": "Selman Gen&#231;", "link": "https://stackoverflow.com/users/3010968/selman-gen%c3%a7"}, "edited": false, "score": 0, "creation_date": 1485386988, "post_id": 41863559, "comment_id": 70910845, "body": "because ptr is a pointer, what do you expect to write other than an address ? <code>ptr[i]</code> on the other hand is equal to: <code>*(ptr + i)</code> so it gets a value in the given address, <code>pts + i</code>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1485388744, "post_id": 41863559, "comment_id": 70911336, "body": "Um... <code>ptr</code> and <code>ptr[i]</code> are two completely different things. So, why the question? Why do you find it strange that these two completely different things are interpreted differently?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1485389397, "post_id": 41863559, "comment_id": 70911514, "body": "I wouldn&#39;t say <i>any</i> tutorial. There are C++ tutorials out there that are so bad they could have OP trying to program in Cobol on an Antikythera and not know it."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6738765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SOiJcFhpgF8/AAAAAAAAAAI/AAAAAAAAAGM/xtv2sARi7dU/photo.jpg?sz=128", "display_name": "CowardlyDog", "link": "https://stackoverflow.com/users/6738765/cowardlydog"}, "edited": false, "score": 0, "creation_date": 1485387683, "post_id": 41863591, "comment_id": 70911049, "body": "Hello sir, Can you also refer me to any tutorial or source explaining why  ptr[i] is the same as *(ptr + i)"}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 1, "user_id": 6738765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SOiJcFhpgF8/AAAAAAAAAAI/AAAAAAAAAGM/xtv2sARi7dU/photo.jpg?sz=128", "display_name": "CowardlyDog", "link": "https://stackoverflow.com/users/6738765/cowardlydog"}, "edited": false, "score": 0, "creation_date": 1485387822, "post_id": 41863591, "comment_id": 70911089, "body": "perhaps just google for C array vs pointer - read the first few articles that come up"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 1, "user_id": 6738765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SOiJcFhpgF8/AAAAAAAAAAI/AAAAAAAAAGM/xtv2sARi7dU/photo.jpg?sz=128", "display_name": "CowardlyDog", "link": "https://stackoverflow.com/users/6738765/cowardlydog"}, "edited": false, "score": 0, "creation_date": 1485387867, "post_id": 41863591, "comment_id": 70911099, "body": "@newbieman, That&#39;s the way the language is specified. Instead of having to do the pointer addition and dereference yourself, there is a nice <code>[]</code> syntax for it."}], "tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 0, "last_activity_date": 1485386979, "creation_date": 1485386979, "answer_id": 41863591, "question_id": 41863559, "link": "https://stackoverflow.com/questions/41863559/why-it-doesnt-yield-memory-addresses-when-looping-through-a-pointer/41863591#41863591", "title": "Why it doesn&#39;t yield memory-addresses when looping through a pointer?", "body": "<blockquote>\n  <p>When we print ptr, it gives a memory address, but when we loop through it, we get array elements.</p>\n</blockquote>\n\n<p><code>ptr</code> is a pointer so when you print it you get a memory address.</p>\n\n<p>Note <code>ptr[i]</code> is the same as <code>*(ptr + i)</code>. So when you loop using array syntax <code>ptr[i]</code> you are dereferencing it and so you get the data itself.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6738765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SOiJcFhpgF8/AAAAAAAAAAI/AAAAAAAAAGM/xtv2sARi7dU/photo.jpg?sz=128", "display_name": "CowardlyDog", "link": "https://stackoverflow.com/users/6738765/cowardlydog"}, "edited": false, "score": 0, "creation_date": 1485390215, "post_id": 41863672, "comment_id": 70911756, "body": "in other-words, the [ ] is dereferencing that pointer, just like *?"}], "tags": [], "owner": {"reputation": 55, "user_id": 4984822, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-yTO8zf9dMxI/AAAAAAAAAAI/AAAAAAAAAgY/4tz7ttEuWnU/photo.jpg?sz=128", "display_name": "mradul dubey", "link": "https://stackoverflow.com/users/4984822/mradul-dubey"}, "is_accepted": false, "score": 0, "last_activity_date": 1485423229, "last_edit_date": 1485423229, "creation_date": 1485387434, "answer_id": 41863672, "question_id": 41863559, "link": "https://stackoverflow.com/questions/41863559/why-it-doesnt-yield-memory-addresses-when-looping-through-a-pointer/41863672#41863672", "title": "Why it doesn&#39;t yield memory-addresses when looping through a pointer?", "body": "<p>When you write <code>string* ptr= texts;</code> the starting address of the array is stored in the pointer memory i.e. the pointer now points to the starting address of the array. So, whenever you'll print <code>ptr</code>, an address will be printed.</p>\n\n<p>But when you loop through it i.e. <code>ptr[I]</code> it's evaluated as <code>*(ptr+i)</code>.  * is the dereferencing operator which means it gives the value stored at the address given to it. Therefore, <code>*(ptr+i)</code> becomes the_value_at(location saved in ptr + i more units). Which is why you get array values.</p>\n"}, {"tags": [], "owner": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "is_accepted": false, "score": 0, "last_activity_date": 1485387917, "creation_date": 1485387917, "answer_id": 41863756, "question_id": 41863559, "link": "https://stackoverflow.com/questions/41863559/why-it-doesnt-yield-memory-addresses-when-looping-through-a-pointer/41863756#41863756", "title": "Why it doesn&#39;t yield memory-addresses when looping through a pointer?", "body": "<p>The type of <code>ptr</code> is <code>string*</code> - a pointer to a string. The type of <code>ptr[i]</code> is <code>string</code>.</p>\n\n<p><code>cout</code> is a global instance of class <code>ostream</code>. This class defines an insertion operator, i.e. <code>operator&lt;&lt;()</code> for <code>string</code> objects which specifically prints the contents of the string. Therefore <code>cout &lt;&lt; ptr[i]</code> prints the text. On the other hand, <code>ostream</code> does not specifically define an insertion operator for pointers to strings. So the closest matching definition is <code>operator&lt;&lt;(void*)</code> - an insertion operator for pointers in general. This just prints the address.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 4447664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa5ae80117a5fa2fbbb2a6164b83d5bf?s=128&d=identicon&r=PG&f=1", "display_name": "Dcoollx", "link": "https://stackoverflow.com/users/4447664/dcoollx"}, "is_accepted": false, "score": 0, "last_activity_date": 1485388378, "creation_date": 1485388378, "answer_id": 41863825, "question_id": 41863559, "link": "https://stackoverflow.com/questions/41863559/why-it-doesnt-yield-memory-addresses-when-looping-through-a-pointer/41863825#41863825", "title": "Why it doesn&#39;t yield memory-addresses when looping through a pointer?", "body": "<blockquote>\n  <p>ptr[i] is the same as *(ptr + i). </p>\n</blockquote>\n\n<p>a container object like a string or an array is a pointer to the first element in that container. the [] operator access a certain object based on the starting location like @artm said. this question is the result of a lack of understanding how variable memory allocation works. look into that for a more complete answer.</p>\n"}], "owner": {"reputation": 1, "user_id": 6738765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SOiJcFhpgF8/AAAAAAAAAAI/AAAAAAAAAGM/xtv2sARi7dU/photo.jpg?sz=128", "display_name": "CowardlyDog", "link": "https://stackoverflow.com/users/6738765/cowardlydog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 4, "score": -4, "last_activity_date": 1485423229, "creation_date": 1485386763, "last_edit_date": 1485388254, "question_id": 41863559, "link": "https://stackoverflow.com/questions/41863559/why-it-doesnt-yield-memory-addresses-when-looping-through-a-pointer", "title": "Why it doesn&#39;t yield memory-addresses when looping through a pointer?", "body": "<p>When we print <code>ptr</code>, it gives a memory address, but when we loop through it, we get array elements. What's causing the difference &amp; why so?</p>\n\n<pre><code>int main()\n{\n    string texts[] = { \"one\", \"two\", \"three\" };\n    string* ptr = texts;\n\n    for (int i = 0; i &lt; 3; i++) {\n        cout &lt;&lt; ptr[i];\n    }\n    _getch();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "unit-testing", "catch-unit-test"], "comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 1, "creation_date": 1485386809, "post_id": 41863505, "comment_id": 70910794, "body": "What about looping over the vectors and comparing element-wise? See also <a href=\"http://stackoverflow.com/q/41160846/3093378\">this question</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1485387168, "post_id": 41863505, "comment_id": 70910896, "body": "@vso I think the issue is not how to loop over a vector, but how to compare floating-point numbers while doing so."}], "answers": [{"comments": [{"owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "edited": false, "score": 1, "creation_date": 1510570664, "post_id": 42029584, "comment_id": 81476134, "body": "I am facing the very same problem and I am interesting in a more elegant solution."}], "tags": [], "owner": {"reputation": 601, "user_id": 4949262, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tkUO2.jpg?s=128&g=1", "display_name": "everythingfunctional", "link": "https://stackoverflow.com/users/4949262/everythingfunctional"}, "is_accepted": false, "score": 2, "last_activity_date": 1486142145, "creation_date": 1486142145, "answer_id": 42029584, "question_id": 41863505, "link": "https://stackoverflow.com/questions/41863505/compare-vector-of-doubles-using-catch/42029584#42029584", "title": "Compare Vector of Doubles Using Catch", "body": "<p>For the time being I've resorted to a kind of workaround. I created the following two functions to be used wherever you want to check two vectors. (i.e. <code>REQUIRE(compareVectors(vec1, vec2));</code> )</p>\n\n<pre><code>bool compareVectors(std::vector&lt;double&gt; a, std::vector&lt;double&gt; b) {\n    if (a.size() != b.size()) return false;\n    for (size_t i = 0; i &lt; a.size(); i++) {\n        if (a[i] != Approx(b[i])) {\n            std::cout &lt;&lt; a[i] &lt;&lt; \" Should == \" &lt;&lt; b[i] &lt;&lt; std::endl;\n            return false;\n        }\n    }\n    return true;\n}\n\nbool compare2dVectors(std::vector&lt;std::vector&lt;double&gt;&gt; a,\n                      std::vector&lt;std::vector&lt;double&gt;&gt; b) {\n    if (a.size() != b.size()) return false;\n    for (size_t i = 0; i &lt; a.size(); i++) {\n        if (! compareVectors(a[i], b[i])) return false;\n    }\n    return true;\n}\n</code></pre>\n\n<p>That way you'll at least be able to see the name of the vector that failed, and the first values that differed.</p>\n\n<p>It's not the ideal solution, so I'm still hoping someone will be able to come up with something better, but I thought I'd at least share what I've come up with so far in case it helps somebody.</p>\n"}], "owner": {"reputation": 601, "user_id": 4949262, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/tkUO2.jpg?s=128&g=1", "display_name": "everythingfunctional", "link": "https://stackoverflow.com/users/4949262/everythingfunctional"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1491, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1486142145, "creation_date": 1485386468, "last_edit_date": 1485445310, "question_id": 41863505, "link": "https://stackoverflow.com/questions/41863505/compare-vector-of-doubles-using-catch", "title": "Compare Vector of Doubles Using Catch", "body": "<p>I'm using the <a href=\"https://github.com/philsquared/Catch\" rel=\"nofollow noreferrer\">Catch</a> unit testing framework, and I'd like to compare a vector of doubles. This <a href=\"https://stackoverflow.com/questions/6718343/how-to-use-floating-point-tolerances-in-the-catch-framework\">other answer</a> suggests using Approx to compare floating point/double values, but this doesn't work for a vector of them. Is there any convenient way of accomplishing this?</p>\n\n<p>EDIT: An Example</p>\n\n<p>With the following code:</p>\n\n<pre><code>#define CATCH_CONFIG_MAIN\n#include \"catch.hpp\"\n\nTEST_CASE(\"Compare Vectors\", \"[vector]\") {\n    std::vector&lt;int&gt; vec1 = {0, 1, 2, 3};\n    std::vector&lt;int&gt; vec2 = {0, 1, 2, 4};\n    REQUIRE(vec1 == vec2);\n}\n</code></pre>\n\n<p>The test fails with following report:</p>\n\n<pre><code>-------------------------------------------------------------------------------\nCompare Vectors\n-------------------------------------------------------------------------------\ntest/UnitTests/test_Example/example.cc:4\n...............................................................................\n\ntest/UnitTests/test_Example/example.cc:7: FAILED:\n  REQUIRE( vec1 == vec2 )\nwith expansion:\n  { 0, 1, 2, 3 } == { 0, 1, 2, 4 }\n\n===============================================================================\ntest cases: 1 | 1 failed\nassertions: 1 | 1 failed\n</code></pre>\n\n<p>But if I change the code as follows, I would want the test to pass, but obviously it doesn't.</p>\n\n<pre><code>#define CATCH_CONFIG_MAIN\n#include \"catch.hpp\"\n\nTEST_CASE(\"Compare Vectors\", \"[vector]\") {\n    std::vector&lt;double&gt; vec1 = {0, 1, 2, 3};\n    std::vector&lt;double&gt; vec2 = {0, 1, 2, 3.000001};\n    REQUIRE(vec1 == vec2);\n}\n</code></pre>\n\n<p>I could loop through the elements and compare them one-by-one, but in the event of a discrepancy, it will be more difficult to determine the source of the error.</p>\n"}, {"tags": ["c++", "bash", "qt", "shell", "qprocess"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1485388621, "post_id": 41863268, "comment_id": 70911295, "body": "Or, instead of trying to reliably detect process quit you can try to actually quit the process while closing the Qt app. I am just unsure whether or not this can be solved by Qt detecting whether or not the process is still running."}], "answers": [{"comments": [{"owner": {"reputation": 1623, "user_id": 4628115, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b3a6c65cdd121a35b1dcf348c6b0c9b6?s=128&d=identicon&r=PG", "display_name": "CybeX", "link": "https://stackoverflow.com/users/4628115/cybex"}, "edited": false, "score": 0, "creation_date": 1485408868, "post_id": 41864684, "comment_id": 70917195, "body": "hi. thanks for your suggestions. I will implement your proposed solution. The point I was <i>trying</i> to make around the <code>::atEnd()</code> (being well aware of the function of <code>::atEnd()</code> as stated in the docs), is to use it as a hypothetical example of a function I would have like to use in order to check : is this the &quot;final&quot; output of the script or not. Possibly a function name of <code>::finalOutput()</code>  - which returns true if the script is &quot;finished&quot; or the Process will close after this loop is complete. However it seems pointless now, either way I will need to process this output. Thank you!"}, {"owner": {"reputation": 1623, "user_id": 4628115, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b3a6c65cdd121a35b1dcf348c6b0c9b6?s=128&d=identicon&r=PG", "display_name": "CybeX", "link": "https://stackoverflow.com/users/4628115/cybex"}, "edited": false, "score": 0, "creation_date": 1485409447, "post_id": 41864684, "comment_id": 70917334, "body": "The main issue I was describing was also linked to a small sub issue of automating the <code>QProcess</code>. If you have a look at the <code>_out.contains(&quot;what is your name&quot;)</code>, this can be generalized to <code>_out.contains(someString)</code> where someString is a variable containing the next string to search for in the output. What happens if my input/response is determined by the output of the application. From this so far, I am thinking of creating a &quot;application interface library&quot; where this output string is passed, processed and returned to the current process. Does this seem like the correct method to use?"}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "reply_to_user": {"reputation": 1623, "user_id": 4628115, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b3a6c65cdd121a35b1dcf348c6b0c9b6?s=128&d=identicon&r=PG", "display_name": "CybeX", "link": "https://stackoverflow.com/users/4628115/cybex"}, "edited": false, "score": 0, "creation_date": 1485494095, "post_id": 41864684, "comment_id": 70956846, "body": "@KGCybeX So the class itself will implement the logic of determining how to respond to the output of the application? As long as there&#39;s a well-defined relationship between the output and the response, that should be fine. I just mean that you have clear rules for creating <code>someString</code> as a function of the application&#39;s output."}], "tags": [], "owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "is_accepted": true, "score": 1, "last_activity_date": 1485394933, "creation_date": 1485394933, "answer_id": 41864684, "question_id": 41863268, "link": "https://stackoverflow.com/questions/41863268/determine-if-qprocess-has-finished-executing-or-is-awaiting-user-input-or-respo/41864684#41864684", "title": "Determine if QProcess has finished executing or is awaiting user input (or response)", "body": "<p>Three things.</p>\n\n<ol>\n<li><p>According to the documentation for <code>QProcess::atEnd()</code>, this returns true only if the process is not running (<code>QProcess::NotRunning</code>). So...are you <em>sure</em> the process isn't truly done when you call <code>atEnd()</code>? I don't see it anywhere in the code you've posted, so I can't tell.</p></li>\n<li><p>Your <code>myReadyReadStandardOutput()</code> signal is overwriting the <code>m_Proc::_out</code> member variable each time new data is available. Depending on how writes to standard output are buffered on your system (and by Qt), you may be reading partial lines into <code>_out</code>. Thus the <code>_out.contains()</code> call may return false, because you've got something like <code>at is your</code> in the line, rather than the full <code>what is your name:</code>.</p></li>\n<li><p>You write the member string <code>_input</code> to the process's standard input, and then immediately try to read again from the standard output. This will <em>most likely not return any data that you didn't already have</em> in <code>_out</code>. Qt only really does actual I/O with the underlying device when control returns to the main event loop. From the documentation for <code>QIODevice</code>: </p></li>\n</ol>\n\n<blockquote>\n  <p>Certain subclasses of QIODevice, <strong>such as QTcpSocket and QProcess</strong>, are asynchronous. This means that I/O functions such as write() or read() always return immediately, while communication with the device itself may happen when control goes back to the event loop.</p>\n</blockquote>\n\n<p>My suggestion for solving your issue would be to modify the <code>myReadyReadStandardOutput</code> signal. For asynchronous devices (such as sockets and sub-processes), data may arrive in arbitrary-sized chunks. This is point <strong>2</strong> I made above. The usual method for dealing with this is to put something like the following at the top of the signal:</p>\n\n<pre><code>if (!canReadLine())\n    return;\n</code></pre>\n\n<p>So you bail out of the signal and return to the main event loop if a full line of data is not available. If that returns true, you can do something like:</p>\n\n<pre><code>_out = readLine();\n/* Process an entire line, e.g., check if it matches the request for name */\n</code></pre>\n\n<p>So the signal is designed to operate only on full lines of data. This is useful for terminals or network protocols that are line-oriented. In this case, you can call the <code>QString::contains()</code> method to check if this is the line requesting a name, and, if so, write it. But you must then <em>return to the event loop</em> in order for the data to be written, so you'd process the next line (<code>please to meet you</code>) in the next call to the signal in which a full line is available. </p>\n"}], "owner": {"reputation": 1623, "user_id": 4628115, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b3a6c65cdd121a35b1dcf348c6b0c9b6?s=128&d=identicon&r=PG", "display_name": "CybeX", "link": "https://stackoverflow.com/users/4628115/cybex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "accepted_answer_id": 41864684, "answer_count": 1, "score": 0, "last_activity_date": 1485394933, "creation_date": 1485385278, "last_edit_date": 1485388219, "question_id": 41863268, "link": "https://stackoverflow.com/questions/41863268/determine-if-qprocess-has-finished-executing-or-is-awaiting-user-input-or-respo", "title": "Determine if QProcess has finished executing or is awaiting user input (or response)", "body": "<p>I have 2 bash scripts</p>\n\n<ol>\n<li>One script not requiring user input, it displays info</li>\n<li>The other requires some user input, and displays some info too</li>\n</ol>\n\n<p><strong>Problem:</strong></p>\n\n<p>When creating a <code>QProcess</code>, I am unable to differentiate if the <a href=\"http://doc.qt.io/qt-5/qprocess.html\" rel=\"nofollow noreferrer\"><code>QProcess</code></a> is finished or is hanging for user input.</p>\n\n<p>I was hoping for some function e.g. <a href=\"http://doc.qt.io/qt-5/qprocess.html#atEnd\" rel=\"nofollow noreferrer\"><code>QProcess::atEnd</code></a> that returns true if the script is finished, but it returns true even if the <code>QProcess</code> is hanging for user input (from script)</p>\n\n<p><strong>More Info:</strong></p>\n\n<ul>\n<li><p>Script requiring user input : <code>name-please.sh</code></p></li>\n<li><p>Script not requiring input : <code>hello.sh</code></p></li>\n</ul>\n\n<p><strong>name-please.sh</strong></p>\n\n<pre><code>#!/bin/bash\necho \"I am Mr Robot\"\necho \"what is your name:\"\n\nread n\n\nif [[ ! -z \"$n\" ]];\nthen\n        echo \"please to meet you\"\n        exit 0;\nelse\n        echo \"ok, bye...\"\n        exit 1;\nfi\n</code></pre>\n\n<p><strong>hello.sh</strong></p>\n\n<pre><code>#!/bin/bash\necho \"I am Mr Robot\"\n</code></pre>\n\n<p>using <code>mReadyReadStandardOutput()</code>, I read the script output. The issue exists around the fact that I need to read the output, determine if the output contains a line that requests user info (line from the script) and respond to that. </p>\n\n<p><em>see code with pointer to line</em></p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code> #include &lt;QCoreApplication&gt;\n#include &lt;QLoggingCategory&gt;\n#include &lt;QTextStream&gt;\n#include &lt;QProcess&gt;\n#include &lt;QString&gt;\n#include &lt;QVariant&gt;\n#include &lt;QDebug&gt;\n#include &lt;QObject&gt;\n#include &lt;QEventLoop&gt;\n\nclass m_Proc : public QProcess\n{\n    Q_OBJECT\n\npublic:\n    int exitCode = -1;\n    QString _out, _input;\n\n    m_Proc(QString input = QString(), QObject *parent = 0);\n    ~m_Proc() {}\n\npublic slots:\n    void myReadyReadStandardOutput();\n    void myFinished(int i);\n};\n\nm_Proc::m_Proc(QString input, QObject *parent)\n{\n    connect(this,SIGNAL(readyReadStandardOutput()),\n            this,SLOT(myReadyReadStandardOutput()));\n    connect(this, SIGNAL(finished(int)),\n            this, SLOT(myFinished(int)));\n}\n\nvoid m_Proc::myReadyReadStandardOutput() {\n    // Note we need to add \\n (it's like pressing enter key)\n    _out = this-&gt;readAllStandardOutput();\n    if (!_input.isEmpty()) {\n\n        /* \n         * check if line matches that of the script, \n         * where the user is required to enter their name\n         */\n\n        if (_out.contains(\"what is your name\")) {         &lt;&lt;&lt; ---- LINE WITH ISSUE\n            this-&gt;write(QString(_input + QString(\"\\n\")).toLatin1());\n            _out = this-&gt;readAllStandardOutput();\n        }\n    }\n    else\n        qDebug() &lt;&lt; \"Input Emptry (should not be reached!) !\";\n}\n\nvoid m_Proc::myFinished(int i){\n    exitCode = i;\n    qDebug() &lt;&lt; \"exit code = \" &lt;&lt; QString::number(exitCode);\n    qDebug() &lt;&lt; _out;\n}\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    m_Proc *myProcess1 = new m_Proc(QString(\"text\"));\n\n    //    QString program = \"/home/dev/script\";\n\n    myProcess1-&gt;start(\"/home/dev/script\", QStringList());// &lt;&lt; \"one\" &lt;&lt; \"two\");\n\n    //    myProcess1-&gt;start(\"/bin/sh\", QStringList() &lt;&lt; \"-c\" &lt;&lt; \"ls\" &lt;&lt; \"-la\");\n\n\n    a.exec();\n}\n\n#include \"main.moc\"\n</code></pre>\n\n<p>Any advice to bypass this issue?</p>\n"}, {"tags": ["c++", "comma", "parentheses", "g++4.8"], "comments": [{"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 3, "creation_date": 1485385146, "post_id": 41863227, "comment_id": 70910227, "body": "Your code is not readable nor elegant. You don&#39;t have to do everything in one line."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1485385337, "post_id": 41863227, "comment_id": 70910294, "body": "That looks like undefined behavior in the first example. There is no guarantee that <code>tmp</code> will be modified in the correct sequence."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1485386039, "post_id": 41863227, "comment_id": 70910537, "body": "Parentheses specify how operations are grouped, to override operator precedence. It doesn&#39;t have any effect on the order of evaluating the subexpressions, though."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1485386068, "post_id": 41863227, "comment_id": 70910546, "body": "You&#39;re modifying <code>tmp</code> and using it in the same expression. Trying to do everything in one statement gains you nothing, and is causing all sorts of chaos in terms of readability (or lack thereof) and this bug."}, {"owner": {"reputation": 1213, "user_id": 59122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sl0OX.jpg?s=128&g=1", "display_name": "Roel Schroeven", "link": "https://stackoverflow.com/users/59122/roel-schroeven"}, "edited": false, "score": 1, "creation_date": 1485386101, "post_id": 41863227, "comment_id": 70910558, "body": "I would consider creating a function <code>double norm(double dx, double dy)</code> and call it as <code>result = norm(x0 - x1, y0 - y1)</code> to get rid of the temporary variables and generally improve clarity. Or just use <code>hypot(x0 - x1, y0 - y1)</code>."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1485386154, "post_id": 41863227, "comment_id": 70910581, "body": "Also, the optimizer will most likely keep the result of <code>x0-x1</code> in a register and re-use the result. Examine the compiler output if you&#39;re not convinced."}, {"owner": {"reputation": 23, "user_id": 7470532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf3616204128f15d175bc2d8b7acd163?s=128&d=identicon&r=PG&f=1", "display_name": "GN_oub", "link": "https://stackoverflow.com/users/7470532/gn-oub"}, "edited": false, "score": 0, "creation_date": 1485453661, "post_id": 41863227, "comment_id": 70941931, "body": "Thank you for these quick answers ! The problem is what I was believing it to be... Before writing this post, I decided to use an inline function. I was not knowing about the <code>std::hypot</code> function, thank you Roel for the tip !"}], "answers": [{"tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 5, "last_activity_date": 1497905190, "last_edit_date": 1497905190, "creation_date": 1485385371, "answer_id": 41863288, "question_id": 41863227, "link": "https://stackoverflow.com/questions/41863227/c-parentheses-ignored-when-evaluating-sequential-operators/41863288#41863288", "title": "C++ : parentheses ignored when evaluating sequential operators", "body": "<p>Both sides of the <code>operator +</code> may be evaluated interleaved. In particular, each of the two assignments in the parenthesis must happen before the multiplication to its immediate right (in correct code that is, which your first variant is not), but need not happen before the other assignment. Also, the other assignment is allowed to happen in between one assignment and the matching multiplication.</p>\n\n<p>Your first variant thus invokes undefined behavior because it contains two unsequenced modification of <code>tmp</code>. So literally every result is legal, including a crash or NaN.</p>\n\n<p>In general, please keep in mind that \"your code is clever\" is not a compliment. Keep it simple, if you really must optimize away the subtractions (you most likely do not):</p>\n\n<pre><code>auto dx = x0 - x1;\nauto dy = y0 - y1;\nauto result = std::sqrt(dx * dx + dy * dy);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 538, "user_id": 7455774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WBGNz.jpg?s=128&g=1", "display_name": "Greg Kikola", "link": "https://stackoverflow.com/users/7455774/greg-kikola"}, "is_accepted": false, "score": 1, "last_activity_date": 1485386036, "creation_date": 1485386036, "answer_id": 41863415, "question_id": 41863227, "link": "https://stackoverflow.com/questions/41863227/c-parentheses-ignored-when-evaluating-sequential-operators/41863415#41863415", "title": "C++ : parentheses ignored when evaluating sequential operators", "body": "<p>This line:</p>\n\n<pre><code>result = std::sqrt ((tmp = x0 - x1, tmp * tmp) + (tmp = y0 - y1, tmp * tmp));\n</code></pre>\n\n<p>You should avoid modifying a value that you use elsewhere in the same expression. Most operators are not guaranteed to evaluate their operands in any particular order (the exceptions are &amp;&amp;, ||, ?:, and the comma operator). In this case, the operands of the + operator in this expression could be evaluated in any order and not necessarily all at once, so your code has undefined behavior.</p>\n\n<p>Furthermore, unless you've profiled your code and know that you need a particular statement to be tightly optimized, you should prefer clarity over clever tricks.</p>\n"}], "owner": {"reputation": 23, "user_id": 7470532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf3616204128f15d175bc2d8b7acd163?s=128&d=identicon&r=PG&f=1", "display_name": "GN_oub", "link": "https://stackoverflow.com/users/7470532/gn-oub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 41863288, "answer_count": 2, "score": 2, "last_activity_date": 1551109348, "creation_date": 1485385014, "last_edit_date": 1551109348, "question_id": 41863227, "link": "https://stackoverflow.com/questions/41863227/c-parentheses-ignored-when-evaluating-sequential-operators", "title": "C++ : parentheses ignored when evaluating sequential operators", "body": "<p>First of all, I must say that the problem raised here is solved for me, and I wonder :</p>\n\n<ul>\n<li>what I have misunderstood,</li>\n<li>if the compiler has an error (I know this is rare) (it is gcc 4.8.4).</li>\n</ul>\n\n<hr>\n\n<p>I want to calculate the norm of a 2-dimentional vector, of which coordinates are computed only at that moment. Let's say, I want to calculate || (x0, y0) - (x1, y1) || , by the formula sqrt((x0-x1)**2 + (y0-y1)**2) . Only the result needs to be saved.</p>\n\n<p>For performance reasons, the square is done by self-multiplication, and I want the substractions and access to variables to be done only once. I want the total to be efficient at runtime, and somehow elegantly coded. I have thought three possibilities :</p>\n\n<ul>\n<li>repeat twice <code>x0 - x1</code> and <code>y0 - y1</code>, and hope the optimization step of the compilator will detect the repetition,</li>\n<li>use an inline function,</li>\n<li>use together a buffer variable and the sequential operator.</li>\n</ul>\n\n<p>I decided to try the last option.</p>\n\n<hr>\n\n<p>Consider now the following code :</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;stdio.h&gt;\n\nint main (void)\n{\n    float x0 (-1), x1 (2), y0 (13), y1 (9), result, tmp;\n\n    result = std::sqrt ((tmp = x0 - x1, tmp * tmp) + (tmp = y0 - y1, tmp * tmp));\n    printf (\"%f\\n\", result);\n}\n</code></pre>\n\n<p>I know I must obtain <code>5.000000</code>, but I obtain <code>5.656854</code>, which is sqrt((y0-y1)**2 + ((y0-y1)**2)).</p>\n\n<p>I can get the wanted result with :</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;stdio.h&gt;\n\nint main (void)\n{\n    float x0 (-1), x1 (2), y0 (13), y1 (9), result, tmp, tmp2;\n\n    result = std::sqrt ((tmp = x0 - x1, tmp * tmp) + (tmp2 = y0 - y1, tmp2 * tmp2));\n    printf (\"%f\\n\", result);\n}\n</code></pre>\n\n<p>It is like the first parts of the sequential operators are evaluated at first, ignoring the parentheses and the return value of the first sequential operator. Seems a bit akward ; is there something in the definition of C++ that I missed here ?</p>\n\n<p>NB : Setting the optimization on or off changes nothing during the test.</p>\n"}, {"tags": ["c++", "windows", "boost", "boost-build"], "answers": [{"tags": [], "owner": {"reputation": 11713, "user_id": 43534, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6b36958661c789010d95b27325154828?s=128&d=identicon&r=PG", "display_name": "Miral", "link": "https://stackoverflow.com/users/43534/miral"}, "is_accepted": true, "score": 3, "last_activity_date": 1490049248, "last_edit_date": 1490049248, "creation_date": 1487833026, "answer_id": 42408982, "question_id": 41863103, "link": "https://stackoverflow.com/questions/41863103/building-boost-for-32-bit-and-64-bit-on-windows-into-the-same-folder/42408982#42408982", "title": "Building Boost for 32-bit and 64-bit on Windows into the same folder", "body": "<p>I guess that's just not a thing people do, then.</p>\n\n<p>I've settled for just running the command twice; for the record my working incantation was this:</p>\n\n<pre><code>bootstrap\nb2 -j8 --build-dir=build               toolset=msvc-14.0 variant=debug,release link=shared threading=multi runtime-link=shared                  stage\nb2 -j8 --build-dir=build --buildid=x64 toolset=msvc-14.0 variant=debug,release link=shared threading=multi runtime-link=shared address-model=64 stage\n</code></pre>\n\n<p>This puts both x86 and x64 libraries into <code>stage\\lib</code>; for actually compiling applications only the contents of this folder and the <code>boost</code> folder are required.  Then when building the software this snippet is added to project files (via a props file):</p>\n\n<pre><code>&lt;PropertyGroup&gt;\n    &lt;BoostIncludeDir&gt;path\\to\\include\\boost\\&lt;/BoostIncludeDir&gt;\n    &lt;BoostLibDir&gt;path\\to\\lib\\&lt;/BoostLibDir&gt;\n&lt;/PropertyGroup&gt;\n&lt;ItemDefinitionGroup&gt;\n  &lt;ClCompile&gt;\n    &lt;AdditionalIncludeDirectories&gt;$(BoostIncludeDir);%(AdditionalIncludeDirectories)&lt;/AdditionalIncludeDirectories&gt;\n    &lt;PreprocessorDefinitions&gt;BOOST_ALL_DYN_LINK;%(PreprocessorDefinitions)&lt;/PreprocessorDefinitions&gt;\n    &lt;PreprocessorDefinitions Condition=\"'$(Platform)'=='x64'\"&gt;BOOST_LIB_BUILDID=x64;%(PreprocessorDefinitions)&lt;/PreprocessorDefinitions&gt;\n  &lt;/ClCompile&gt;\n  &lt;Link&gt;\n      &lt;AdditionalLibraryDirectories&gt;$(BoostLibDir);%(AdditionalLibraryDirectories)&lt;/AdditionalLibraryDirectories&gt;\n  &lt;/Link&gt;\n&lt;/ItemDefinitionGroup&gt;\n</code></pre>\n\n<p>(<code>BOOST_ALL_DYN_LINK</code> is technically optional, but it helps improve compatibility if you are compiling DLLs that have Boost types in their exported API.  You still need to make sure that they're all compiled with the same compiler and Boost versions, though.)</p>\n"}], "owner": {"reputation": 11713, "user_id": 43534, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6b36958661c789010d95b27325154828?s=128&d=identicon&r=PG", "display_name": "Miral", "link": "https://stackoverflow.com/users/43534/miral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1412, "favorite_count": 1, "accepted_answer_id": 42408982, "answer_count": 1, "score": 3, "last_activity_date": 1490049248, "creation_date": 1485384403, "question_id": 41863103, "link": "https://stackoverflow.com/questions/41863103/building-boost-for-32-bit-and-64-bit-on-windows-into-the-same-folder", "title": "Building Boost for 32-bit and 64-bit on Windows into the same folder", "body": "<p>I'm looking a simple setup for the config.jam which will build Boost (1.60 or later) for both x86 and x64 on Windows using MSVC.  Ideally using a single call to b2 -- I know that it's supposed to support generating multiple outputs from a single call.  Having two separate calls for x86 and x64 is ok but not preferred.</p>\n\n<p>The other thing I would like is to have it output both sets of libraries into the <strong>same</strong> folder.  Obviously then they need to have different names, so I would like it to put <code>-x64</code> somewhere in the names of the x64 binaries.  And it still needs to auto-link, so I can't just rename them manually, it has to be something that the build system supports.  This part is essential.</p>\n\n<p>I've <a href=\"https://svn.boost.org/trac/boost/ticket/5315\" rel=\"nofollow noreferrer\">read</a> that b2 provides a <code>--buildid</code> parameter and the auto-link supports a <a href=\"http://www.boost.org/doc/libs/1_63_0/libs/config/doc/html/index.html\" rel=\"nofollow noreferrer\"><code>BOOST_LIB_BUILDID</code></a> define which permits insertion of a custom keyword like this, but I'm not sure exactly how to use them.  Is it possible to specify two builds in the config.jam, one with a buildid and one without (and run them both with a single call to b2), or does this really require two separate calls?</p>\n\n<p>Does anyone know the magic words?</p>\n"}, {"tags": ["c++", "pointers", "memory", "memory-management", "struct"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1485383445, "post_id": 41862829, "comment_id": 70909520, "body": "Why, instead of <code>delete_node</code>/<code>delete_tree</code> aren&#39;t you using destructors? And <code>typedef struct</code> is unnecessary in C++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1485383449, "post_id": 41862829, "comment_id": 70909523, "body": "&quot;To reduce the memory use, I store all the pointers of TrieTreeNode into a global variable TrieTreeNode ** nodes_array&quot; Why do you think using a global variable reduces memory use? And why do you think reducing memory use is important? Also, C++ doesn&#39;t need that typedef."}, {"owner": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "edited": false, "score": 0, "creation_date": 1485383578, "post_id": 41862829, "comment_id": 70909578, "body": "@NeilButterworth I think it is not necessary either, but one requirement for this homework is to reduce the memory. I thought using a <code>int32_t</code> instead of 64 bit pointer could be more efficient. It can be wrong, so I expect your suggestions as well."}, {"owner": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "edited": false, "score": 0, "creation_date": 1485383665, "post_id": 41862829, "comment_id": 70909612, "body": "Whoever downvoted, please leave your comment so I can improve my future questions. Thank you."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1485383692, "post_id": 41862829, "comment_id": 70909635, "body": "@Jay data pointers are all the same size. Typically, solutions that use pointers are slower and take up more memory than ones that don&#39;t, though of course sometimes you must use pointers."}, {"owner": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "edited": false, "score": 0, "creation_date": 1485383798, "post_id": 41862829, "comment_id": 70909683, "body": "@NeilButterworth Yeah, so I thought instead of storing pointers in each node, storing a shorter index might help (there will be duplicate pointers)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1485384470, "post_id": 41862829, "comment_id": 70909948, "body": "Even if you are not allowed to use <code>std::vector</code> and smart pointer, begin to write your own classes to handle that, then build on that."}, {"owner": {"reputation": 2193, "user_id": 1733955, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/BmbmP.png?s=128&g=1", "display_name": "Th. Thielemann", "link": "https://stackoverflow.com/users/1733955/th-thielemann"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1485385790, "post_id": 41862829, "comment_id": 70910446, "body": "@Jarod42 I assume you found the goal of the homework. The OP has to be done some analysis what is necessary to implement a tree: Nodes (already in work) and some helper structures like vectors or lists (still to be done)."}], "answers": [{"comments": [{"owner": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "edited": false, "score": 0, "creation_date": 1485384072, "post_id": 41862943, "comment_id": 70909787, "body": "Sorry I tried your code, but it doesn&#39;t work (I didn&#39;t downvote you tho)."}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "reply_to_user": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "edited": false, "score": 0, "creation_date": 1485384309, "post_id": 41862943, "comment_id": 70909893, "body": "@JayWong Does it crash, or just fail to remove the memory? Based on what I see of your code, I am fairly sure that the nodes represent at least part of your leak."}, {"owner": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "edited": false, "score": 0, "creation_date": 1485384806, "post_id": 41862943, "comment_id": 70910098, "body": "No it doesn&#39;t crash. The RRS still doesn&#39;t change significantly. I am researching on the destructor for struct."}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "reply_to_user": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "edited": false, "score": 1, "creation_date": 1485384939, "post_id": 41862943, "comment_id": 70910154, "body": "@JayWong Please consider the possibility that the leak is happening in some other manipulation of your trie tree."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "edited": false, "score": 1, "creation_date": 1485385375, "post_id": 41862943, "comment_id": 70910305, "body": "@JayWong I agree with Mikel F. A destructor on your structure will simplify the clean up, but also give it a constructor to initialize the <code>_children</code> and <code>_location</code> pointers to <code>nullptr</code> to prevent badness should the struct be destroyed without ever setting <code>_children</code> and <code>_location</code>. Also, know the <a href=\"http://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\">Rules about using an underscore in a C++ identifier</a> to prevent nasty surprises. And, of course, if at first you don&#39;t succeed, Trie, Trie again."}, {"owner": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1485385789, "post_id": 41862943, "comment_id": 70910445, "body": "@user4581301 , Mikel H. Yes, thank you so much for your suggestions. I now also doubt there will be other memory leak in my code. It is my first time to write a C++ program. I will go to learn more about what you mentioned above."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "edited": false, "score": 0, "creation_date": 1485386369, "post_id": 41862943, "comment_id": 70910657, "body": "@JayWong Did I read this correctly? For your first C++ program you were set to writing a Trie? Jinkies! That&#39;s hardcore! Usually people are brought up to speed with &quot;Make a calculator&quot;, &quot;Make a resizable String&quot; or &quot;Make a linked list&quot; first. You might want to play around with some simpler constructs to make sure you have C++ style memory management and the ideological differences between the other languages you know and C++ down first. For example, <a href=\"https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization\" rel=\"nofollow noreferrer\">familiarize yourself with RAII</a>. It can make your time with C++ easier."}, {"owner": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1485387467, "post_id": 41862943, "comment_id": 70910989, "body": "@user4581301 Yeah I found this project is super overwhelming too. Since we have already taken data structure course in Java, the professor forces us to pick up C++ as soon as possible. I found manually releasing memory is painful and confusing, and just hope it will get better. Thanks for all the resources!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "edited": false, "score": 0, "creation_date": 1485387811, "post_id": 41862943, "comment_id": 70911083, "body": "@JayWong The big trick with C++ is rarely do you need to manage your own memory. Statically allocate where possible and try to use library containers where you can&#39;t. Take full advantage of constructors, destructors, and <a href=\"http://en.cppreference.com/w/cpp/memory\" rel=\"nofollow noreferrer\">smart pointers</a>."}], "tags": [], "owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "is_accepted": true, "score": 1, "last_activity_date": 1485384092, "last_edit_date": 1485384092, "creation_date": 1485383642, "answer_id": 41862943, "question_id": 41862829, "link": "https://stackoverflow.com/questions/41862829/how-to-delete-dynamically-allocated-struct-consisting-dynamically-allocated-arra/41862943#41862943", "title": "How to delete dynamically allocated struct consisting dynamically allocated array member in C++?", "body": "<p>You are not deleting the nodes, only the pointers within each node.</p>\n\n<p>Consider this:</p>\n\n<pre><code>void delete_tree(){\n    for (int i = 0; i &lt; tail; i++){\n        delete_node(nodes_array[i]);\n        delete node_array[i];  // Delete the node itself.\n    }\n    delete [] nodes_array;\n    nodes_array = NULL;\n}\n</code></pre>\n\n<p>After calling <code>delete_node</code> to free the two pointers in each node, you should then delete the node itself <code>delete node_array[i]</code> to free up the remaining memory for each node.</p>\n\n<p>Personally though, I am a fan of defining constructors and destructors for structures so that I don't have to remember to initialize everywhere I create them or do the extra deletion everywhere I might dispose of one.</p>\n"}], "owner": {"reputation": 2046, "user_id": 5379444, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-26CK5H5SP94/AAAAAAAAAAI/AAAAAAAAATc/Dx113UH4CcI/photo.jpg?sz=128", "display_name": "Jay Wong", "link": "https://stackoverflow.com/users/5379444/jay-wong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "accepted_answer_id": 41862943, "answer_count": 1, "score": -2, "last_activity_date": 1485384092, "creation_date": 1485383272, "question_id": 41862829, "link": "https://stackoverflow.com/questions/41862829/how-to-delete-dynamically-allocated-struct-consisting-dynamically-allocated-arra", "title": "How to delete dynamically allocated struct consisting dynamically allocated array member in C++?", "body": "<p>I am doing my homework which requires me to implement a Trie Tree without using vector. I have a <code>struc</code> defined as following:</p>\n\n<pre><code>typedef struct{\n    char _name;\n    int32_t * _children;\n    int32_t _children_size;\n    int32_t _children_capacity;\n    int32_t * _location;\n    int32_t _location_size;\n    int32_t _location_capacity;\n} TrieTreeNode;\n</code></pre>\n\n<p>To reduce the memory use, I store all the pointers of <code>TrieTreeNode</code> into a global variable <code>TrieTreeNode ** nodes_array</code>. Then the <code>_children</code> member of each <code>TrieTreeNode</code> is just an array whose elements are <code>int32_t</code> indices to <code>nodes_array</code>.</p>\n\n<p>For example, say we have <code>TrieTreeNode * parent</code>. To access its first child, we use <code>nodes_array[parent -&gt; _children[0]]</code>.</p>\n\n<p>My question is how to delete the whole Trie Tree? I have tried the following approach (<code>tail</code> is the number of pointers <code>nodes_array</code> has):</p>\n\n<pre><code>void delete_node(TrieTreeNode *node){\n    delete [] node -&gt; _children;\n    delete [] node -&gt; _location;\n}\n\nvoid delete_tree(){\n    for (int i = 0; i &lt; tail; i++){\n        delete_node(nodes_array[i]);\n    }\n    delete [] nodes_array;\n    nodes_array = NULL;\n}\n</code></pre>\n\n<p>However, when I used both <code>-ps -l</code> command and GDB to monitor the memory use of my program before and after deleting a tree, the memory only decreases a little bit. The RRS goes from 13744 to 13156, while it is only 1072 before I build the tree.</p>\n\n<p>Any suggestions will be appreciated!</p>\n"}, {"tags": ["c++", "arrays", "c++11"], "comments": [{"owner": {"reputation": 3697, "user_id": 1848578, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7e2bfa9bcb3299428c8321c37db0560?s=128&d=identicon&r=PG", "display_name": "qxz", "link": "https://stackoverflow.com/users/1848578/qxz"}, "edited": false, "score": 1, "creation_date": 1485382235, "post_id": 41862558, "comment_id": 70908926, "body": "Moving the contents of an <code>std::array</code> is essentially the same as moving the contents of a C-style array"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1485382239, "post_id": 41862558, "comment_id": 70908927, "body": "Possibly use one of the many matrix libraries out there?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1485382249, "post_id": 41862558, "comment_id": 70908930, "body": "A c-style array is not a pointer. You&#39;re probably thinking of a pointer to dynamically allocated memory. Which is what <code>std::vector</code> uses under the hood. Use the vector, unless you really want to save yourself the likely 8-byte overhead (needs keeping track of size and capacity, you only need size.)"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 3697, "user_id": 1848578, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7e2bfa9bcb3299428c8321c37db0560?s=128&d=identicon&r=PG", "display_name": "qxz", "link": "https://stackoverflow.com/users/1848578/qxz"}, "edited": false, "score": 0, "creation_date": 1485382340, "post_id": 41862558, "comment_id": 70908975, "body": "@qxz Moving from <code>std::vector</code> is O(1)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1485382370, "post_id": 41862558, "comment_id": 70908985, "body": "&quot;I realize that a std::unique_ptr to an std::array might give me the best of both worlds?&quot; I don&#39;t think so. I&#39;m not sure you understand what std::array is."}, {"owner": {"reputation": 75, "user_id": 7194922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2607dd0e70db7243e79ddc4d331a77d?s=128&d=identicon&r=PG&f=1", "display_name": "Antiro42", "link": "https://stackoverflow.com/users/7194922/antiro42"}, "reply_to_user": {"reputation": 3697, "user_id": 1848578, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7e2bfa9bcb3299428c8321c37db0560?s=128&d=identicon&r=PG", "display_name": "qxz", "link": "https://stackoverflow.com/users/1848578/qxz"}, "edited": false, "score": 0, "creation_date": 1485382450, "post_id": 41862558, "comment_id": 70909030, "body": "@qxz I wouldn&#39;t actually move the contents of the c-style array but only the pointer, however as juanchopanza pointed out, I&#39;m probably mixing up some terminology here when I say &quot;c-style array&quot;"}, {"owner": {"reputation": 75, "user_id": 7194922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2607dd0e70db7243e79ddc4d331a77d?s=128&d=identicon&r=PG&f=1", "display_name": "Antiro42", "link": "https://stackoverflow.com/users/7194922/antiro42"}, "edited": false, "score": 0, "creation_date": 1485382545, "post_id": 41862558, "comment_id": 70909082, "body": "@NeilButterworth, In the case of the std_unique ptr, a move of the VectorND class would simply re-assign the pointer to the new VectorND, it would not touch the std::array"}, {"owner": {"reputation": 311858, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1485382730, "post_id": 41862558, "comment_id": 70909187, "body": "How big is &quot;n&quot;?  I&#39;ve got a 4x4 homogenous matrix class in my ray tracer, but I figured the overhead of a call to the <code>new</code> operator to allocate memory from the heap so that I can just move the pointer in a move operation is worse than just using a normal array and copying the matrix&#39;s contents (although at 128 bytes per matrix, perhaps not...)"}, {"owner": {"reputation": 75, "user_id": 7194922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2607dd0e70db7243e79ddc4d331a77d?s=128&d=identicon&r=PG&f=1", "display_name": "Antiro42", "link": "https://stackoverflow.com/users/7194922/antiro42"}, "reply_to_user": {"reputation": 311858, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1485382935, "post_id": 41862558, "comment_id": 70909281, "body": "@Alnitak it differs for different parts of the system, but for the most its 80. I would however be interested if anyone knows of a rule-of-thumb on when (from what size?) these things become really significant? (with &quot;these things&quot; = being smart about moving vs copy-ing)"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1485385944, "post_id": 41862558, "comment_id": 70910499, "body": "@NeilButterworth I think your statement is a bit harsh. In fact, a unique_ptr to an array combines moving in O(1), with size known at compile time, which can be an advantage."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1485385959, "post_id": 41862558, "comment_id": 70910506, "body": "<code>std::array</code> is simply a container that wraps a C array, and is essentially a C array with the generic container interface."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1485386171, "post_id": 41862558, "comment_id": 70910587, "body": "I think that the benefit of size known at compile time is only really a big advantage if the size is very small. For operations on primitives, you&#39;ll anyway have most of the processing done in some kind of clever partial loop unrolling that does 2 or 4 elements per go. <code>std::array</code> can be a very big win if the size is like, 3, or 5, because then you just unroll the entire loop. Even at size 80 the performance will be basically identical. And vector is a lot more ergonomic to work with; with <code>std::array</code> you either have to hardcode the size or make everything that touches it a template."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 7194922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2607dd0e70db7243e79ddc4d331a77d?s=128&d=identicon&r=PG&f=1", "display_name": "Antiro42", "link": "https://stackoverflow.com/users/7194922/antiro42"}, "is_accepted": true, "score": 0, "last_activity_date": 1485385437, "creation_date": 1485385437, "answer_id": 41863300, "question_id": 41862558, "link": "https://stackoverflow.com/questions/41862558/c-style-array-better-container-than-stdarray-and-stdvector-for-fixed-size-da/41863300#41863300", "title": "c-style array better container than std::array and std::vector for fixed size data that benifits from move semantics?", "body": "<p>I decided to follow juanchopanza's advice and go for the <code>std::vector</code>. As I already mentioned in the question it can be moved (in O(1)) and as juanchopanza pointed out, the overhead is very small.</p>\n\n<p>Furthermore I like that it gives me the option to declare the move operations as default, increasing code readability. (I wanted to add a virtual destructor so I needed to add them as the compiler won't generate them when a destructor is specified)</p>\n\n<p>For those interested, the relevant declarations:</p>\n\n<pre><code>/// Copy constructor\nVectorND(const VectorND &amp;) = default;\n/// Move constructor\nVectorND(VectorND &amp;&amp;) = default;\n/// Copy assignment\nVectorND&amp; operator=(const VectorND &amp;) = default;\n/// Move assignment\nVectorND&amp; operator=(VectorND &amp;&amp;) = default;\n/// Destructor\nvirtual ~VectorND() = default;\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 7194922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2607dd0e70db7243e79ddc4d331a77d?s=128&d=identicon&r=PG&f=1", "display_name": "Antiro42", "link": "https://stackoverflow.com/users/7194922/antiro42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 41863300, "answer_count": 1, "score": 0, "last_activity_date": 1485385437, "creation_date": 1485382039, "last_edit_date": 1485384266, "question_id": 41862558, "link": "https://stackoverflow.com/questions/41862558/c-style-array-better-container-than-stdarray-and-stdvector-for-fixed-size-da", "title": "c-style array better container than std::array and std::vector for fixed size data that benifits from move semantics?", "body": "<p>I am creating a new implementation of an N-dimensional vector (we'll call it <code>VectorND</code>) to replace some old code in a bigger system.\nThe vector size will be known at compile time, hence c-style arrays, <code>std::array</code> and <code>std::vector</code> are all viable candidates for the underlying data structure of the <code>VectorND</code> class.</p>\n\n<p>I noticed that the vectors get passed around a lot, and think the system would benefit greatly if the new <code>VectorND</code> class could efficiently be moved. (I realize that a lot of the 'passing around' won't be able to use move's, but the vectors occur as rvalue's quite often too)</p>\n\n<p>The <code>std::vector</code> class supports move semantics and as the c-style array is just a pointer both of these allow for trivial a move constructors/assignment operator in the <code>VectorND</code> class. The <code>std::array</code> class however needs O(n) time to be moved, which to me sounds like this \"most obvious choice\" is in fact the worst in this case.</p>\n\n<p>For the remaining two, the c-style array can be allocated as a single chunk of memory and hence really use the fact that we know the size at compile time.</p>\n\n<p>Am I missing something or <strong>is the c-style array indeed the best underlying container for my <code>VectorND</code> class?</strong></p>\n\n<p>(it sounds strange that the newer stl classes would be a worse choice)</p>\n\n<p><strong>EDIT:</strong> After reading through my post again, I realize that a <code>std::unique_ptr</code> to an <code>std::array</code> might give me the best of both worlds?</p>\n"}, {"tags": ["c++", "macos", "input", "cmake", "cinder"], "owner": {"reputation": 11, "user_id": 7471345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f8a0f15f8c728eabe73827e1b7f1c2?s=128&d=identicon&r=PG&f=1", "display_name": "D. Folder", "link": "https://stackoverflow.com/users/7471345/d-folder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505483671, "creation_date": 1485381707, "last_edit_date": 1592644375, "question_id": 41862455, "link": "https://stackoverflow.com/questions/41862455/os-x-c-cinder-creates-window-that-passes-through-keyboard-input", "title": "OS X/C++ - Cinder creates window that passes through keyboard input", "body": "<p><a href=\"https://libcinder.org/\" rel=\"nofollow noreferrer\">Cinder</a> is a graphics library which acts similar to a wrapper for <code>OpenGL</code> and <code>C++</code>.</p>\n<p>Creating a basic application using the library's <code>CINDER_APP</code> function on <a href=\"https://en.wikipedia.org/wiki/MacOS\" rel=\"nofollow noreferrer\">macOS</a> and compiling with <a href=\"https://en.wikipedia.org/wiki/Xcode\" rel=\"nofollow noreferrer\">XCode</a> works as expected: Pressing keys does nothing, as the application is not set up to handle keyboard input.</p>\n<p>Using identical code and compiling with <a href=\"https://en.wikipedia.org/wiki/CMake\" rel=\"nofollow noreferrer\">CMake</a> gives a different result:: Key presses are passed through by the window, being handled by whatever application was last opened. This occurs even if the test application is set up to handle keyboard input. This makes it impossible to actually handle keyboard input in a window when compiling with CMake as keyboard inputs are passed through entirely as if the window does not exist.</p>\n<p>To clarify, these two test applications are, in every visible way, identical: They use the same <code>.a</code> file of the library and the code is identical. <strong>Necessary OS X Frameworks have been included</strong> in the <code>CMakeLists.txt</code> file.</p>\n<p>What could be the cause of this issue? Some missing compiler flag in the <code>CMakeLists.txt</code> file? Some improper configuration of <code>CMake</code>? A slightly different standard library? The code clearly works, as evidenced by <code>XCode</code>, however there must be some way to compile it in <code>CMake</code> as well.</p>\n"}, {"tags": ["c++", "arrays", "loops", "vector", "iterator"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1485381748, "post_id": 41862426, "comment_id": 70908707, "body": "Read about <code>std::remove_if</code>."}], "answers": [{"comments": [{"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1485384656, "post_id": 41862501, "comment_id": 70910028, "body": "Thanks. I was just going to say remove and remove_if don&#39;t adjust the size of the container. So if I have 10 elements, and remove 2, the iterator returns the new end at the end of the 8 elements, but the container.end() iterator is still pointing at one past the end, 10 + 1. This kind of makes the vector container kind of useless after this then, doesn&#39;t it? Also, does this affect optimisation opportunity for the loop, as it would then have to recheck arr.end() each loop iteration."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1485385457, "post_id": 41862501, "comment_id": 70910339, "body": "std::remove_if returns the new end() for the vector, and arr.erase uses it to remove all the removed elements. So after this statement is executed, arr will have 8 elements. I am not sure if I understand your second question, if you use loop then surely you need to check .end() on each iteration."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1485389950, "post_id": 41862501, "comment_id": 70911679, "body": "Oh I see, you mean to call erase on the range after you do remove_if. What I mean by the second thing I mentioned is that the iterator wouldn&#39;t have to be checked each time if the compiler can know it won&#39;t change. Isn&#39;t that one of the optimisations the compiler does?"}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 3, "last_activity_date": 1485382963, "last_edit_date": 1485382963, "creation_date": 1485381843, "answer_id": 41862501, "question_id": 41862426, "link": "https://stackoverflow.com/questions/41862426/whats-the-correct-way-to-iterate-through-a-vector-and-delete-certain-elements/41862501#41862501", "title": "What&#39;s the correct way to iterate through a vector and delete certain elements", "body": "<p>You want:</p>\n\n<pre><code>arr.erase( std::remove_if(arr.begin(), arr.end(), [](auto&amp; obj){return obj.good == false;}), arr.end() );\n</code></pre>\n\n<p>and its called remove-erase idiom:</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom</a></p>\n\n<p>But if you want to fix loop then it is possible, erase returns next valid iterator so you should use it:</p>\n\n<pre><code>    for (auto it = arr.begin(); it != arr.end(); )\n    {\n      if ((*it).good == false) \n        it = arr.erase(it);\n      else\n        it++;\n    }\n</code></pre>\n"}], "owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 986, "favorite_count": 0, "closed_date": 1485381754, "answer_count": 1, "score": 3, "last_activity_date": 1485382963, "creation_date": 1485381538, "question_id": 41862426, "link": "https://stackoverflow.com/questions/41862426/whats-the-correct-way-to-iterate-through-a-vector-and-delete-certain-elements", "closed_reason": "Duplicate", "title": "What&#39;s the correct way to iterate through a vector and delete certain elements", "body": "<p>I ran into a problem where I wanted to go through my vector and delete the elements which were no longer wanted. The reason for why it failed is obvious, but I didn't see it when I tried my naive approach. Basically the iterator gets invalidated when I erase an element, and the loop can't continue. What I did is the following:</p>\n\n<pre><code>    #define GOOD 1\n    #define BAD 0\n\n    struct Element\n    {\n        Element(int isGood) : good(isGood){}\n        bool good;\n    };\n\n    int main()\n    {\n        std::vector&lt;Element&gt; arr;\n        arr.push_back(Element(BAD));\n        arr.push_back(Element(GOOD));\n        arr.push_back(Element(BAD));\n        arr.push_back(Element(GOOD));\n\n    //__CLEAN ARRAY__//\n        for (auto it = arr.begin(); it != arr.end(); ++it)\n        {\n            if ((*it).good == false) arr.erase(it);\n        }\n    }\n</code></pre>\n\n<p>So it's obvious that this won't work, I was wondering what the correct/best way of doing this is. My next step would be to restart the loop with fresh iterators if there is a no good found, but this also seems like a waste. Ideally the loop would continue where it left off with fresh iterators?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1485381267, "post_id": 41862310, "comment_id": 70908456, "body": "It&#39;s because you only know how to enable C++14 via GUI."}, {"owner": {"reputation": 67, "user_id": 6434559, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fe2efda7066a2fcfbbf4da41c711c310?s=128&d=identicon&r=PG&f=1", "display_name": "NikanDalvand", "link": "https://stackoverflow.com/users/6434559/nikandalvand"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1485381452, "post_id": 41862310, "comment_id": 70908550, "body": "@LogicStuff Im Sorry I&#39;m just learning , so dont know how to do it and i dont know what to search about it because when i searched for this type of problem i did not found anything useful or related"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1485381488, "post_id": 41862310, "comment_id": 70908578, "body": "Raw Strings require C++11 or above; If you select option C++98 in the online compiler, then you will get the same error as with g++. How do you call g++?"}, {"owner": {"reputation": 67, "user_id": 6434559, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fe2efda7066a2fcfbbf4da41c711c310?s=128&d=identicon&r=PG&f=1", "display_name": "NikanDalvand", "link": "https://stackoverflow.com/users/6434559/nikandalvand"}, "reply_to_user": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1485381640, "post_id": 41862310, "comment_id": 70908656, "body": "@stephan-lechner I started learning c++ so i use g++ test.cpp -o test"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1485381730, "post_id": 41862310, "comment_id": 70908703, "body": "Try <code>g++ -std=c++11 -pedantic -Wall -Wextra test.cpp</code>. Also, don&#39;t call your test programs <code>test</code> because at some point you&#39;re going to confuse yourself and accidentally run the system <code>test</code> command instead, which produces no output."}, {"owner": {"reputation": 67, "user_id": 6434559, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fe2efda7066a2fcfbbf4da41c711c310?s=128&d=identicon&r=PG&f=1", "display_name": "NikanDalvand", "link": "https://stackoverflow.com/users/6434559/nikandalvand"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485382224, "post_id": 41862310, "comment_id": 70908918, "body": "@melpomene thanks for your answer it works :)"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 6434559, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fe2efda7066a2fcfbbf4da41c711c310?s=128&d=identicon&r=PG&f=1", "display_name": "NikanDalvand", "link": "https://stackoverflow.com/users/6434559/nikandalvand"}, "edited": false, "score": 0, "creation_date": 1485382170, "post_id": 41862450, "comment_id": 70908893, "body": "thanks it works as you said &quot;or above&quot; i used -std=c++14"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 3, "last_activity_date": 1485381689, "last_edit_date": 1495541807, "creation_date": 1485381689, "answer_id": 41862450, "question_id": 41862310, "link": "https://stackoverflow.com/questions/41862310/raw-string-r-was-not-declared-in-this-scope/41862450#41862450", "title": "Raw String \u2018R\u2019 was not declared in this scope", "body": "<p>Raw Strings require C++11 or above; If you select option C++98 in the online compiler, then you will get the same error as with g++.\nSee the following command for enabling C++11 in g++ (taken from this <a href=\"https://stackoverflow.com/a/10363883/2630032\">SO answer</a>, please upvote when applicable):</p>\n\n<pre><code>$ g++ -std=c++11 your_file.cpp -o your_program\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 6434559, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fe2efda7066a2fcfbbf4da41c711c310?s=128&d=identicon&r=PG&f=1", "display_name": "NikanDalvand", "link": "https://stackoverflow.com/users/6434559/nikandalvand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2103, "favorite_count": 0, "accepted_answer_id": 41862450, "answer_count": 1, "score": 0, "last_activity_date": 1485381689, "creation_date": 1485381101, "question_id": 41862310, "link": "https://stackoverflow.com/questions/41862310/raw-string-r-was-not-declared-in-this-scope", "title": "Raw String \u2018R\u2019 was not declared in this scope", "body": "<p>I'm Learning c++ , so pardon me\nI'm trying to store a Raw String in C++ \nbut i get <code>\u2018R\u2019 was not declared in this scope</code>\nhere is my code </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::string nx =R\"('(;&lt;\\\"/  )3-)\";\n    std::cout &lt;&lt; nx;\n}\n</code></pre>\n\n<p>and <a href=\"http://cpp.sh/8hsws\" rel=\"nofollow noreferrer\">Here</a> is a online compiler which compiles it without any problem</p>\n\n<p>probably its something with my compiler im on ubuntu 15.10 and latest g++</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "edited": false, "score": 0, "creation_date": 1485381122, "post_id": 41862263, "comment_id": 70908391, "body": "it doesn&#39;t return anything. Where did you get that from?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 5, "creation_date": 1485381127, "post_id": 41862263, "comment_id": 70908393, "body": "Why do you think you want this information?"}, {"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 0, "creation_date": 1485381336, "post_id": 41862263, "comment_id": 70908491, "body": "I cant fathom a design where this would be useful information, but why cant you just use <code>sizeof(type)</code>? the actual number of bytes allocated is implementation defined, but it will be at least that much."}, {"owner": {"reputation": 1, "user_id": 7471318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f2eb2a60a979bd8baa8a79efe874521?s=128&d=identicon&r=PG&f=1", "display_name": "ZaruWright", "link": "https://stackoverflow.com/users/7471318/zaruwright"}, "edited": false, "score": 0, "creation_date": 1485381528, "post_id": 41862263, "comment_id": 70908598, "body": "For debuging and check that the memory is liberated.I supposed that it works well, but its for curiosity. I think that when you do the new call it save on metadata the size of the pointer to get it when you do the delete. Its only curiosity, if i cant do it doesn&#39;t matter."}], "answers": [{"tags": [], "owner": {"reputation": 313, "user_id": 1055755, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4e509cb4250f54a8b08097a89f622e59?s=128&d=identicon&r=PG&f=1", "display_name": "Teeeeeeeeeeeeeeeeeeeeeeeeeeeej", "link": "https://stackoverflow.com/users/1055755/teeeeeeeeeeeeeeeeeeeeeeeeeeeej"}, "is_accepted": false, "score": 0, "last_activity_date": 1540554293, "creation_date": 1540554293, "answer_id": 53008016, "question_id": 41862263, "link": "https://stackoverflow.com/questions/41862263/operator-deletepointer-returns-the-size-of-bytes-liberated/53008016#53008016", "title": "::operator delete(pointer) returns the size of bytes liberated?", "body": "<p>It might be a little late, but I learned this just today.  If you have C++14 support enabled, you'd overload <code>void operator delete(void*, std::size_t)</code></p>\n\n<p>references:\n<a href=\"https://en.cppreference.com/w/cpp/memory/new/operator_delete\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/memory/new/operator_delete</a> - This lists all the possible signatures of <code>operator delete</code></p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/language/delete\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/delete</a> - This lists how the delete operators are selected</p>\n\n<p>Below is code I used to figure out how this works.  It compiles in Visual Studio 2017 with language support set to C++14 or higher.  HTH.</p>\n\n<hr>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nauto test_counter_reserved_memory{ 0u };\n\nvoid* operator new(std::size_t sz) {\n    test_counter_reserved_memory += static_cast&lt;unsigned int&gt;(sz);\n    return std::malloc(sz);\n}\n\nvoid operator delete(void* ptr) noexcept\n{\n    std::cout &lt;&lt; \"Called: void operator delete(void* ptr)\" &lt;&lt; std::endl;\n    std::free(ptr);\n}\n\nvoid operator delete(void* ptr, std::size_t sz) \n{\n    std::cout &lt;&lt; \"Called: void operator delete(void* ptr, std::size_t sz)\" &lt;&lt; std::endl;\n    test_counter_reserved_memory -= static_cast&lt;unsigned int&gt;(sz);\n    std::free(ptr);\n}\n\nint main()\n{\n    test_counter_reserved_memory = 0u;\n\n    {\n        std::cout &lt;&lt; \"before: \" &lt;&lt; test_counter_reserved_memory &lt;&lt; std::endl;\n        auto p = std::make_unique&lt;int&gt;(750000);\n        std::cout &lt;&lt; \"allocated: \" &lt;&lt; test_counter_reserved_memory &lt;&lt; std::endl;\n    }\n    std::cout &lt;&lt; \"after: \" &lt;&lt; test_counter_reserved_memory &lt;&lt; std::endl;\n\n\n    // set breakpoint here to see results.\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7471318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f2eb2a60a979bd8baa8a79efe874521?s=128&d=identicon&r=PG&f=1", "display_name": "ZaruWright", "link": "https://stackoverflow.com/users/7471318/zaruwright"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540554293, "creation_date": 1485380946, "question_id": 41862263, "link": "https://stackoverflow.com/questions/41862263/operator-deletepointer-returns-the-size-of-bytes-liberated", "title": "::operator delete(pointer) returns the size of bytes liberated?", "body": "<p>There are some way to get the size of bytes liberated when you use ::operator delete(pointer)?</p>\n\n<p>I try to search in the doc and there are a size_t parameter, but i think that is to give it the bytes that you want to free, not returns the size of bytes liberated.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c++11", "gcc", "constexpr"], "comments": [{"owner": {"reputation": 7569, "user_id": 434245, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2447aac0ab3753a03484bfd42a0bb960?s=128&d=identicon&r=PG", "display_name": "Chris Vig", "link": "https://stackoverflow.com/users/434245/chris-vig"}, "edited": false, "score": 1, "creation_date": 1485380479, "post_id": 41862118, "comment_id": 70908057, "body": "What optimization flags are you using?"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 2, "creation_date": 1485380612, "post_id": 41862118, "comment_id": 70908120, "body": "@NeilButterworth surely the compiler can replace the something::seconds call with the result at compile time? What does that have to do with it being a parameter to a variadic function?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1485380652, "post_id": 41862118, "comment_id": 70908136, "body": "Can&#39;t reproduce. Give g++ version and optimization setting. As a matter of fact, even without constexpr any sane compiler would replace the call with a constant."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1485380668, "post_id": 41862118, "comment_id": 70908139, "body": "@NeilButterworth, what are you talking about? Of course it can!"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1485380694, "post_id": 41862118, "comment_id": 70908152, "body": "To force constexpr evaluation, use <code>constexpr auto value = something::seconds(10, 0, 0));</code> then <code>printf(&quot;Look at the time: %d\\n&quot;, value);</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1485380763, "post_id": 41862118, "comment_id": 70908189, "body": "@Jarod42, that would only force it in this particular context. Compilers would still be free to leave the function call in other contexts, but they don&#39;t do it in my experiments."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1485380781, "post_id": 41862118, "comment_id": 70908201, "body": "That has nothing to do with the actual value passed to the function. Only how printf gets its arguments."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1485380785, "post_id": 41862118, "comment_id": 70908203, "body": "@NeilButterworth, you are just wrong. Look at the assembly yoursef, there is no call with proper optimization settings."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1485380879, "post_id": 41862118, "comment_id": 70908254, "body": "@SergeyA  I was assuming the OP&#39;s post was correct in that the code compiled to a call."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1485380925, "post_id": 41862118, "comment_id": 70908289, "body": "@NeilButterworth, depends on optimization settings. However, you were arguing that it has something to do with variadic nature of prints, while it has nothing to do with it."}, {"owner": {"reputation": 963, "user_id": 7471267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4GGWfiRBWAY/AAAAAAAAAAI/AAAAAAAAAFo/awzT9uvFc5E/photo.jpg?sz=128", "display_name": "Mirko", "link": "https://stackoverflow.com/users/7471267/mirko"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1532110400, "post_id": 41862118, "comment_id": 89866966, "body": "@Jarod42 You&#39;re right, it does work that way if I do that. I don&#39;t think it should, tho. In fact, I&#39;m stuck with compiling with an older GCC with -O0. Reading it was my understanding that it was ALWAYS evaluated at compile time where it made sense --and it&#39;s said to prefer that over #defines, which I was at the time slowly replacing by static constexpr int/uint/size_t. Anyway, I&#39;m still using it over defines for the type safety and readability even at a cost of lengthier binaries."}], "answers": [{"comments": [{"owner": {"reputation": 762, "user_id": 1987633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cc5084e895540051a920e541ab9b8c?s=128&d=identicon&r=PG", "display_name": "Andre Kostur", "link": "https://stackoverflow.com/users/1987633/andre-kostur"}, "edited": false, "score": 0, "creation_date": 1485464663, "post_id": 41862215, "comment_id": 70948098, "body": "Godbolt (<a href=\"http://gcc.godbolt.org/\" rel=\"nofollow noreferrer\">gcc.godbolt.org</a>) is your friend...  Sticking the above code into godbolt shows that in the above simple case, it does get compiled into a compile-time value of 36000."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 762, "user_id": 1987633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cc5084e895540051a920e541ab9b8c?s=128&d=identicon&r=PG", "display_name": "Andre Kostur", "link": "https://stackoverflow.com/users/1987633/andre-kostur"}, "edited": false, "score": 0, "creation_date": 1485467285, "post_id": 41862215, "comment_id": 70949571, "body": "@AndreKostur ... with <code>-O1</code> or higher, yes."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 19, "last_activity_date": 1485380762, "creation_date": 1485380762, "answer_id": 41862215, "question_id": 41862118, "link": "https://stackoverflow.com/questions/41862118/why-gcc-does-not-evaluate-constexpr-at-compile-time/41862215#41862215", "title": "Why GCC does not evaluate constexpr at compile time?", "body": "<blockquote>\n  <p>Why would g++ do that?</p>\n</blockquote>\n\n<p><code>constexpr</code> functions only <em>must</em> be evaluated at compile time in situations where the result is used as a constant expression. These include things like initializing a <code>constexpr</code> variable and being used as a template argument. </p>\n\n<p>In other situations, even when a <code>constexpr</code> function is invoked with arguments that are all themselves constant expressions, it is up to the implementation to do what it wants. Typically, it'll depend on the optimization flags. On both gcc 6.2 and clang 3.9.1, for instance, <code>-O0</code> will emit a call at runtime but <code>-O1</code> will emit the constant <code>36000</code>. </p>\n"}], "owner": {"reputation": 963, "user_id": 7471267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4GGWfiRBWAY/AAAAAAAAAAI/AAAAAAAAAFo/awzT9uvFc5E/photo.jpg?sz=128", "display_name": "Mirko", "link": "https://stackoverflow.com/users/7471267/mirko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1432, "favorite_count": 1, "accepted_answer_id": 41862215, "answer_count": 1, "score": 6, "last_activity_date": 1485494107, "creation_date": 1485380330, "last_edit_date": 1485383005, "question_id": 41862118, "link": "https://stackoverflow.com/questions/41862118/why-gcc-does-not-evaluate-constexpr-at-compile-time", "title": "Why GCC does not evaluate constexpr at compile time?", "body": "<p>As an example:</p>\n\n<pre><code>class something {\npublic:\n  static constexpr int seconds(int hour, int min, int sec)\n  { return hour*3600+min*60+sec; }\n}\n</code></pre>\n\n<p>then:</p>\n\n<pre><code>printf(\"Look at the time: %d\\n\", something::seconds(10, 0, 0));\n</code></pre>\n\n<p>Will compile to a call to the function using g++, instead of putting a constant number.\nWhy would g++ do that? There's no gain in it and kinda defeats the purpose of using constexpr instead of awful macros.</p>\n"}, {"tags": ["c++", "qt", "qgraphicsitem"], "comments": [{"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1485397495, "post_id": 41862104, "comment_id": 70913570, "body": "Two questions: (1) why do you do <code>new QGraphicsRectItem{this}</code> inside the <code>MyRect</code> constructor? I don&#39;t think it&#39;s a memory leak because of Qt&#39;s object hierarchy, but it doesn&#39;t seem to be doing anything. (2) There&#39;s no threading going, right? Updating graphics objects must be done from the main thread."}, {"owner": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "edited": false, "score": 0, "creation_date": 1485403297, "post_id": 41862104, "comment_id": 70915823, "body": "Things like that sometimes happen when Qt still has events scheduled for execution on the deleted object - for some reason its deletion doesn&#39;t always flush that event queue. As a workaround, you could try instead of deletion do <code>global_rect-&gt;hide(); global_rect-&gt;deleteLater(); global_rect = nullptr;</code> This would let Qt&#39;s event loop delete the object itself, when it sees fit."}, {"owner": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1485416452, "post_id": 41862104, "comment_id": 70919524, "body": "@bnaecker @(1): It is required for <code>MyRect</code> to have a child to trigger the issue. This is an example, so I just kept it minimal. It&#39;s no memory leak since it is parented. @(2) There is <code>qapp.exec()</code>, so the main loop is running."}, {"owner": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "reply_to_user": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "edited": false, "score": 1, "creation_date": 1485416497, "post_id": 41862104, "comment_id": 70919542, "body": "@Dmitry Unfortunately <code>QGraphicsRectItem</code> is just a <code>QGraphicsItem</code> and no <code>QObject</code>, so there is no <code>deleteLater()</code>."}, {"owner": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "reply_to_user": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "edited": false, "score": 0, "creation_date": 1485416879, "post_id": 41862104, "comment_id": 70919667, "body": "@Dmitry I just realized, <code>QGraphicsEffect</code> is a <code>QObject</code>, could the problem be related to that? But how would I deal with this? Calling <code>QGraphicsItem::setGraphicsEffect(effect)</code> makes the item take ownership of the effect, <code>QGraphicsItem::setGraphicsEffect(0)</code> deletes any present effect. I cannot uncouple the effect from the item to call <code>deleteLater()</code> on the effect."}, {"owner": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "edited": false, "score": 0, "creation_date": 1485418027, "post_id": 41862104, "comment_id": 70920171, "body": "@TFM, yeah, I didn&#39;t realize that <code>QGraphicsRectItem</code> is not a <code>QObject</code>... Well, you could try something like that: hide the item (but retain the pointer to it in some container), connect the effect&#39;s <code>destroyed</code> signal to some private slot of the scene (or another object living longer than the item and its effect) where you should be able to finally safely delete the hidden item. Note that for the connection to that signal should be of <code>QueuedConnection</code> type in order to know for sure the effect has already been destroyed by the time the slot is called."}, {"owner": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "edited": false, "score": 0, "creation_date": 1485418254, "post_id": 41862104, "comment_id": 70920265, "body": "However, that approach involves one more difficulty - how to know which of hidden items to delete on the slot call? I don&#39;t have an immediate answer to this. One possibility is to inspect all hidden <code>QGraphicsItem</code>s pending deletion and see if their <code>QGraphicsEffect</code> is null; if so, it should be safe to delete them.  I must confess I am not really sure the reason for the segfault is the one I&#39;m talking about though. It could be something else. But looking at the top frames of the stack before the crash, it seems that some Qt internals try to work on already deleted <code>QGraphicsItem</code> object."}, {"owner": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "reply_to_user": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "edited": false, "score": 0, "creation_date": 1485440260, "post_id": 41862104, "comment_id": 70932574, "body": "@Dmitry Thanks, I appreciate the effort to find a workaround. But I really need to understand what is going wrong here, especially whether I&#39;m using QT the right way."}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1485495447, "post_id": 41862104, "comment_id": 70957263, "body": "@TFM Why have the scene maintain a pointer to the effect at all? If you add the effect to <code>my_rect_</code>, it will be deleted when deleting <code>my_rect_</code>. I&#39;m wondering if there&#39;s a double-delete happening, especially since <code>setGraphicsEffect()</code> applies to all children and you said that the fault only occurs when <code>my_rect_</code> has a child."}, {"owner": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1485510594, "post_id": 41862104, "comment_id": 70964116, "body": "@bnaecker You can keep the pointer for reference, you can not keep it. It does not matter. But especially it does not hurt. It&#39;s just a pointer."}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1485555071, "post_id": 41862104, "comment_id": 70990197, "body": "@TFM I understand that you can keep a pointer without harm. What I was suggesting was that you may not be able to <i>delete</i> the pointed-to object outside of Qt&#39;s normal ownership hierarchy without introducing problems. But it appears you&#39;ve found the solution elsewhere!"}], "answers": [{"comments": [{"owner": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "edited": false, "score": 0, "creation_date": 1515423430, "post_id": 41891193, "comment_id": 83284173, "body": "same issue here, calling <code>prepareGeometryChange()</code> in the <code>QGraphicsItem::ItemSceneChange</code> case of the <code>QGraphicsItem::itemChange()</code> function helped. Thank you."}, {"owner": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "reply_to_user": {"reputation": 11391, "user_id": 2508150, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6213045ef38ad15e90df7f6d7909f549?s=128&d=identicon&r=PG", "display_name": "Paolo M", "link": "https://stackoverflow.com/users/2508150/paolo-m"}, "edited": false, "score": 0, "creation_date": 1516095945, "post_id": 41891193, "comment_id": 83539849, "body": "BTW: I reported this last year, <a href=\"https://bugreports.qt.io/browse/QTBUG-58501\" rel=\"nofollow noreferrer\">bugreports.qt.io/browse/QTBUG-58501</a>"}], "tags": [], "owner": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "is_accepted": true, "score": 1, "last_activity_date": 1485511025, "creation_date": 1485511025, "answer_id": 41891193, "question_id": 41862104, "link": "https://stackoverflow.com/questions/41862104/deleting-qgraphicsitem-with-qgraphicseffect-leads-to-segfault/41891193#41891193", "title": "Deleting QGraphicsItem with QGraphicsEffect leads to segfault", "body": "<p>As I was educated on <a href=\"https://forum.qt.io/topic/75510/deleting-qgraphicsitem-with-qgraphicseffect-leads-to-segfault\" rel=\"nofollow noreferrer\">on the Qt forums</a> this is not expected behaviour and might be a bug in Qt.</p>\n\n<p>The best workaround is to call <code>QGraphicsItem::prepareGeometryChange()</code> on <code>my_rect_</code> <em>before</em> removing it from the scene. This might be done be exposing the protected <code>prepareGeometryChange()</code> or by calling it inside <code>~MyRect()</code> and then simply deleting <code>my_rect_</code> <em>without</em> calling <code>QGraphicsScene::removeItem()</code>. <code>~QGraphicsItem()</code>, which of course is called after <code>~MyRect()</code>, will automatically remove the item from the scene.</p>\n"}], "owner": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 1, "accepted_answer_id": 41891193, "answer_count": 1, "score": 2, "last_activity_date": 1485511025, "creation_date": 1485380270, "last_edit_date": 1485464060, "question_id": 41862104, "link": "https://stackoverflow.com/questions/41862104/deleting-qgraphicsitem-with-qgraphicseffect-leads-to-segfault", "title": "Deleting QGraphicsItem with QGraphicsEffect leads to segfault", "body": "<p>The following program paints a red background. Pressing the left mouse button paints a white rectangle onto it. The rectangle has a child rectangle and a <code>QGraphicsDropShadowEffect</code>. (<code>QGraphicsOpacityEffect</code> and <code>QGraphicsColorizeEffect</code> also lead to the problem, but less frequently.)</p>\n\n<p>Pressing the right mouse button removes the white rectangle.</p>\n\n<p>Sometimes when removing the rectangle it causes a segmentation fault.</p>\n\n<p>This does not happen if the <code>QGraphicsDropShadowEffect</code> is not applied. It also does not happen when there either is no child item in <code>MyRect</code> or the background is ommited.</p>\n\n<p>(When searching for this issue, I found several hints that a segfault like this could be related to changing the <code>boundingRect()</code> of an item without calling <code>prepareGeometryChange()</code>.)</p>\n\n<p>I am really at a loss here. This is part of a bigger project and I boiled it down to the following example:</p>\n\n<p>Main.cc:</p>\n\n<pre><code>#include&lt;QApplication&gt;\n#include&lt;QGraphicsView&gt;\n#include&lt;QGraphicsScene&gt;\n#include&lt;QGraphicsSceneMouseEvent&gt;\n#include&lt;QGraphicsRectItem&gt;\n#include&lt;QGraphicsDropShadowEffect&gt;\n#include&lt;QScreen&gt;\n\nclass MyRect: public QGraphicsRectItem\n{\n    public:\n    MyRect(QGraphicsItem* parent = nullptr):\n        QGraphicsRectItem{QRectF{0.0f, 0.0f, 100.0f, 100.0f}, parent}\n    {\n        setPen(QPen{Qt::white});\n        setBrush(QBrush{Qt::white, Qt::SolidPattern});\n        my_child_=new QGraphicsRectItem{this};\n    }\n\n    private:\n    QGraphicsRectItem* my_child_=nullptr;\n};\n\nclass MyScene: public QGraphicsScene\n{\n    public:\n    MyScene()\n    {\n        background_=new QGraphicsRectItem{0.0f, 0.0f, 500.0f, 500.0f};\n        background_-&gt;setPen(QPen{Qt::white});\n        background_-&gt;setBrush(QBrush{Qt::red, Qt::SolidPattern});\n        addItem(background_);\n    }\n\n    void mouseReleaseEvent(QGraphicsSceneMouseEvent* me) override\n    {\n        if (me-&gt;button()==Qt::LeftButton)\n        {\n            if (my_rect_==nullptr)\n            {\n                my_rect_=new MyRect{};\n                shadow_=new QGraphicsDropShadowEffect{};\n                shadow_-&gt;setBlurRadius(15.0f);\n                my_rect_-&gt;setGraphicsEffect(shadow_);\n                addItem(my_rect_);\n                my_rect_-&gt;setPos(me-&gt;scenePos());\n            }\n        }\n        else if (me-&gt;button()==Qt::RightButton)\n        {\n            if (my_rect_!=nullptr)\n            {\n                removeItem(my_rect_);\n                my_rect_-&gt;setGraphicsEffect(0);\n                shadow_=nullptr;\n                delete my_rect_;\n                my_rect_=nullptr;\n            }\n        }\n        else\n        {\n            QGraphicsScene::mouseReleaseEvent(me);\n        }\n    }\n\n    private:\n    QGraphicsRectItem* background_=nullptr;\n    MyRect* my_rect_=nullptr;\n    QGraphicsDropShadowEffect* shadow_=nullptr;\n};\n\nint\nmain(int argc, char** argv)\n{\n    QApplication qapp{argc, argv};\n\n    QGraphicsView view;\n    MyScene scene;\n\n    QRect rect=QGuiApplication::primaryScreen()-&gt;geometry();\n    scene.setSceneRect(0.0f, 0.0f, rect.width(), rect.height());\n    view.setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);\n    view.setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);\n    view.setFrameShape(QFrame::NoFrame);\n    view.setBackgroundBrush(QBrush(Qt::black, Qt::SolidPattern));\n    view.setScene(&amp;scene);\n    view.showFullScreen();\n\n    return qapp.exec();\n}\n</code></pre>\n\n<p>Compiler call:</p>\n\n<pre><code>g++ --std=c++14 -fPIC -Wall -Woverloaded-virtual -Werror -pedantic -g -O0 -fPIC -I/usr/include/x86_64-linux-gnu/qt5/QtGui -I/usr/include/x86_64-linux-gnu/qt5/QtWidgets -I/usr/include/x86_64-linux-gnu/qt5/QtCore -I/usr/include/x86_64-linux-gnu/qt5 -o test Main.cc -lQt5Gui -lQt5Core -lQt5Widgets\n</code></pre>\n\n<p>Backtrace:</p>\n\n<pre><code>#0  0x0000555555a9a840 in ?? ()\n#1  0x00007ffff71e017c in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#2  0x00007ffff71e0a3a in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#3  0x00007ffff720289a in QGraphicsView::paintEvent(QPaintEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#4  0x00007ffff6f10278 in QWidget::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#5  0x00007ffff6ff89fe in QFrame::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#6  0x00007ffff72013ab in QGraphicsView::viewportEvent(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#7  0x00007ffff7650701 in QCoreApplicationPrivate::sendThroughObjectEventFilters(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#8  0x00007ffff6ec8b65 in QApplicationPrivate::notify_helper(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#9  0x00007ffff6ed0341 in QApplication::notify(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#10 0x00007ffff76509a0 in QCoreApplication::notifyInternal2(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#11 0x00007ffff6f08fda in QWidgetPrivate::sendPaintEvent(QRegion const&amp;) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#12 0x00007ffff6f09646 in QWidgetPrivate::drawWidget(QPaintDevice*, QRegion const&amp;, QPoint const&amp;, int, QPainter*, QWidgetBackingStore*) ()\n   from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#13 0x00007ffff6ed8f1e in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#14 0x00007ffff6ed9147 in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#15 0x00007ffff6ef7f8f in QWidgetPrivate::syncBackingStore() () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#16 0x00007ffff6f10348 in QWidget::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#17 0x00007ffff6ff89fe in QFrame::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#18 0x00007ffff7081de3 in QAbstractScrollArea::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#19 0x00007ffff6ec8b8c in QApplicationPrivate::notify_helper(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#20 0x00007ffff6ed0341 in QApplication::notify(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#21 0x00007ffff76509a0 in QCoreApplication::notifyInternal2(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#22 0x00007ffff765312d in QCoreApplicationPrivate::sendPostedEvents(QObject*, int, QThreadData*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#23 0x00007ffff71d2a22 in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#24 0x00007ffff71d8299 in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#25 0x00007ffff767d459 in QObject::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#26 0x00007ffff71e4e6b in QGraphicsScene::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#27 0x00007ffff6ec8b8c in QApplicationPrivate::notify_helper(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#28 0x00007ffff6ed0341 in QApplication::notify(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5\n#29 0x00007ffff76509a0 in QCoreApplication::notifyInternal2(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#30 0x00007ffff765312d in QCoreApplicationPrivate::sendPostedEvents(QObject*, int, QThreadData*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#31 0x00007ffff76a4c03 in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#32 0x00007ffff446f7f7 in g_main_context_dispatch () from /lib/x86_64-linux-gnu/libglib-2.0.so.0\n#33 0x00007ffff446fa60 in ?? () from /lib/x86_64-linux-gnu/libglib-2.0.so.0\n#34 0x00007ffff446fb0c in g_main_context_iteration () from /lib/x86_64-linux-gnu/libglib-2.0.so.0\n#35 0x00007ffff76a500f in QEventDispatcherGlib::processEvents(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#36 0x00007ffff764e98a in QEventLoop::exec(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#37 0x00007ffff76570fc in QCoreApplication::exec() () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#38 0x000055555555768b in main (argc=1, argv=0x7fffffffe5b8) at Main.cc:89\n</code></pre>\n\n<p>EDIT: I rewritten the code example for better readability.</p>\n"}, {"tags": ["c++", "directx", "direct3d", "direct2d"], "comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1485410485, "post_id": 41861906, "comment_id": 70917598, "body": "I&#39;d suggest looking at the  <a href=\"https://github.com/Microsoft/DirectXTK/wiki/Getting-Started\" rel=\"nofollow noreferrer\">DirectX Tool Kit</a>. You can get a very long way with just <code>SpriteBatch</code>. Direct2D is really more a <a href=\"https://en.wikipedia.org/wiki/Vector_graphics\" rel=\"nofollow noreferrer\">vector graphics</a> API than a &#39;2D game&#39; API, although you can clearly use it for that."}], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 6765498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ABDhES7J1RM/AAAAAAAAAAI/AAAAAAAAACQ/Z_cXZSytNF0/photo.jpg?sz=128", "display_name": "CascadeCoder", "link": "https://stackoverflow.com/users/6765498/cascadecoder"}, "is_accepted": false, "score": 2, "last_activity_date": 1485397172, "creation_date": 1485397172, "answer_id": 41864970, "question_id": 41861906, "link": "https://stackoverflow.com/questions/41861906/windows-direct2d-or-direct3d-for-isometric-games-2-5d-games/41864970#41864970", "title": "Windows - Direct2d or Direct3d for isometric games (2.5D games)", "body": "<p>Direct3D with an orthographic projection matrix.  You could use 2D but the amount of extra sprite work for different viewing angles would be a pain.</p>\n\n<p>Once you understand 3D you can apply the same knowledge to creating a 2D game by keeping the camera pointing forwards and give all your sprites etc a 0 z coordinate.</p>\n\n<p>I'm a few months away from publishing a game on google play etc and trust me,\nno such thing as a \"small game\" lol.</p>\n\n<p>Good luck.</p>\n"}], "owner": {"reputation": 591, "user_id": 5890572, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a85168f5df8ef33245bea615c3668f25?s=128&d=identicon&r=PG&f=1", "display_name": "Trevin Corkery", "link": "https://stackoverflow.com/users/5890572/trevin-corkery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1485397172, "creation_date": 1485379395, "last_edit_date": 1485383497, "question_id": 41861906, "link": "https://stackoverflow.com/questions/41861906/windows-direct2d-or-direct3d-for-isometric-games-2-5d-games", "title": "Windows - Direct2d or Direct3d for isometric games (2.5D games)", "body": "<p>I wanted to try and recreate a a small game that is no longer in development and I wanted to make sure I am learning the correct DirectX api. The game used sprites for all their animations if that helps.</p>\n\n<p>Would I learn direct2d or direct3d for a game like this?\n<a href=\"https://i.stack.imgur.com/iDkpW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iDkpW.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1485379442, "post_id": 41861904, "comment_id": 70907572, "body": "C and C++ are different languages. Please use only the relevant language tag."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1485379505, "post_id": 41861904, "comment_id": 70907606, "body": "<code>GraphicElement *pElement = nullptr; strcpy(pElement-&gt;name,name);</code>. Is the problem not clear? What do you think accessing a null pointer will do?"}, {"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1485379600, "post_id": 41861904, "comment_id": 70907659, "body": "What is the question you&#39;re trying to ask?"}], "answers": [{"tags": [], "owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "is_accepted": true, "score": 0, "last_activity_date": 1485379531, "creation_date": 1485379531, "answer_id": 41861942, "question_id": 41861904, "link": "https://stackoverflow.com/questions/41861904/unable-to-set-a-value-in-a-structure-in-c-error-0xc0000005-access-violation-w/41861942#41861942", "title": "Unable to set a value in a structure in C. ERROR: 0xC0000005: Access violation writing location 0x00000000", "body": "<pre><code>GraphicElement *pElement = nullptr;\n// ...\nstrcpy(pElement-&gt;name,name);\n</code></pre>\n\n<p>Somewhere between the top line and bottom line above you need to allocate memory for <code>pElement</code>.</p>\n\n<p><code>pElement = new GraphicElement();</code></p>\n\n<p>Also, consider using a <code>std::shared_ptr</code> instead of a raw pointer, given you tagged this <code>C++</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 5648056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18bc067cbe164dd3a1a28c8d420296f?s=128&d=identicon&r=PG&f=1", "display_name": "Mooza", "link": "https://stackoverflow.com/users/5648056/mooza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "closed_date": 1485397431, "accepted_answer_id": 41861942, "answer_count": 1, "score": -5, "last_activity_date": 1485409903, "creation_date": 1485379392, "last_edit_date": 1485409903, "question_id": 41861904, "link": "https://stackoverflow.com/questions/41861904/unable-to-set-a-value-in-a-structure-in-c-error-0xc0000005-access-violation-w", "closed_reason": "Not suitable for this site", "title": "Unable to set a value in a structure in C. ERROR: 0xC0000005: Access violation writing location 0x00000000", "body": "<p>I have a application that is suppose to store graphic elements. I am having an issue where I cant access a variable in a structure. Here is what i have so far.</p>\n\n<pre><code>#include &lt;crtdbg.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include \"CLib.h\"\n\nenum{ RUNNING = 1 };\n\nstruct Point\n{\n    int x, y;\n};\n\nstruct Line\n{\n    Point start;\n    Point end;\n};\n\nstruct GraphicElement\n{\n    enum{ SIZE = 256 };\n    char name[SIZE];\n    CStash Lines;   // a Stash of Lines\n};\n\nstruct VectorGraphic\n{\n    CStash Elements;    // a Stash of GraphicElements\n    };\n\n    void AddGraphicElement(VectorGraphic*);\n    void ReportVectorGraphic(VectorGraphic*);\n    void CleanUpVectorGraphic(VectorGraphic*);\n\n    VectorGraphic Image;\nint main()\n{\n    char response;\n    _CrtSetDbgFlag(_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);\n\n    // it's a Stash of GraphicElements  initialize(&amp;(Image.Elements),sizeof(GraphicElement));   \n    while (RUNNING)\n    {\n        printf(\"\\nPlease select an option:\\n\");\n        printf(\"1. Add a Graphic Element\\n\");\n        printf(\"2. List the Graphic Elements\\n\");\n        printf(\"q. Quit\\n\");\n        printf(\"CHOICE: \");\n        fflush(stdin);\n        scanf(\"%c\", &amp;response);\n\n        switch (response)\n        {\n        case '1':AddGraphicElement(&amp;Image); break;\n        case '2':ReportVectorGraphic(&amp;Image); break;\n        case 'q':CleanUpVectorGraphic(&amp;Image); return 0;\n        default:printf(\"Please enter a valid option\\n\");\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n\nvoid AddGraphicElement(VectorGraphic* pImage){\n\n\n    int i = 0, counter = 0;\n    int xPointStart = 0, yPointStart = 0;\n    int xPointEnd = 0, yPointEnd = 0;\n    char name[50];\n    int lineNumber = 0;\n\n\n    GraphicElement *pElement = nullptr;\n    Line *pLine = nullptr;\n\n\n    initialize(&amp;(Image.Elements), sizeof(GraphicElement));\n\n\n\n    printf(\"ADDING A Graphic Element\\n\");\n    printf(\"Please enter the name of the new GraphicElement(&lt;256 characters): \");\n    fflush(stdin);\n    scanf(\"\\n%[^\\n]s\", &amp;name);\n    fflush(stdin);\n\n    strcpy(pElement-&gt;name,name);\n</code></pre>\n\n<p>Anytime I try assigning <code>strcpy(pElement-&gt;name,name);</code> it tells me access violation.</p>\n\n<p>The two other files im working with that cannot be changed and are from a textbook called Thinking in C++. </p>\n\n<pre><code>//: C04:CLib.cpp {O}\n// Implementation of example C-like library\n// Declare structure and functions:\n#include \"CLib.h\"\n#include &lt;iostream&gt;\n#include &lt;cassert&gt;\nusing namespace std;\n// Quantity of elements to add\n// when increasing storage:\nconst int increment = 100;\n\nvoid initialize(CStash* s, int sz)\n{\n    s-&gt;size = sz;\n    s-&gt;quantity = 0;\n    s-&gt;storage = nullptr;\n    s-&gt;next = 0;\n}\n\nint add(CStash* s, const void* element)\n{\n    if (s-&gt;next &gt;= s-&gt;quantity) //Enough space left?\n        inflate(s, increment);\n    // Copy element into storage,\n    // starting at next empty space:\n    int startBytes = s-&gt;next * s-&gt;size;\n    unsigned char* e = (unsigned char*)element;\n    for (int i = 0; i &lt; s-&gt;size; i++)\n        s-&gt;storage[startBytes + i] = e[i];\n    s-&gt;next++;\n    return(s-&gt;next - 1); // Index number\n}\n\nvoid* fetch(CStash* s, int index)\n{\n    // Check index boundaries:\n    assert(0 &lt;= index);\n    if (index &gt;= s-&gt;next)\n        return 0; // To indicate the end\n    // Produce pointer to desired element:\n    return &amp;(s-&gt;storage[index * s-&gt;size]);\n}\n\nint count(CStash* s)\n{\n    return s-&gt;next; // Elements in CStash\n}\n\nvoid inflate(CStash* s, int increase)\n{\n    assert(increase &gt; 0);\n    int newQuantity = s-&gt;quantity + increase;\n    int newBytes = newQuantity * s-&gt;size;\n    int oldBytes = s-&gt;quantity * s-&gt;size;\n    unsigned char* b = new unsigned char[newBytes];\n    for (int i = 0; i &lt; oldBytes; i++)\n        b[i] = s-&gt;storage[i]; // Copy old to new\n    delete[](s-&gt;storage); // Old storage\n    s-&gt;storage = b; // Point to new memory\n    s-&gt;quantity = newQuantity;\n}\n\nvoid cleanup(CStash* s)\n{\n    if (s-&gt;storage != 0)\n    {\n        cout &lt;&lt; \"freeing storage\" &lt;&lt; endl;\n        delete[]s-&gt;storage;\n    }\n} ///:~\n</code></pre>\n\n<p>and the .h file...</p>\n\n<pre><code>//: C04:CLib.h\n// Header file for a C-like library\n// An array-like entity created at runtime\n\ntypedef struct CStashTag {\n    int size;       // Size of each space\n    int quantity;   // Number of storage spaces\n    int next;       // Next empty space\n    unsigned char* storage;// Dynamically allocated array of bytes\n} CStash;\n\nvoid initialize(CStash* s, int size);\nvoid cleanup(CStash* s);\nint add(CStash* s, const void* element);\nvoid* fetch(CStash* s, int index);\nint count(CStash* s);\nvoid inflate(CStash* s, int increase);\n///:~\n</code></pre>\n"}, {"tags": ["c++", "opencv", "progress-bar", "gtk3"], "owner": {"reputation": 11, "user_id": 7471209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcc7c69fe4648e43aab859ea30f20ef?s=128&d=identicon&r=PG&f=1", "display_name": "learninggtk", "link": "https://stackoverflow.com/users/7471209/learninggtk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 488, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485386248, "creation_date": 1485378915, "last_edit_date": 1485386248, "question_id": 41861799, "link": "https://stackoverflow.com/questions/41861799/display-a-progress-bar-button-with-gtk-3-c", "title": "Display a progress bar button with gtk 3 c", "body": "<p>I'm new in gtk. I have a noisy image and to reduce it, I use a function from opencv. It has a run time, for example 5 seconds. I want to show progressing the run time by using progress bar. This is my code:</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;gtk/gtk.h&gt;\n#include &lt;time.h&gt;\n\nusing namespace cv;\nusing namespace std;\n\ngboolean Func (gpointer data) {\ngdouble value;\nGString *text;\n\n//part of code that generate run time\nclock_t start, end;\nstart = clock();\n\nMat image, src1, DENO;\nimage = imread(\"C:/Users/Alireza/Desktop/1.png\");\ncvtColor(image, src1, CV_RGB2GRAY);\nfastNlMeansDenoising(src1, DENO, 19, 29, 38);\nimwrite(\"DENO.png\", DENO);\n\nend = clock();\nint runtime = ((int)(end - start)) / CLOCKS_PER_SEC;\ncout &lt;&lt; \"Time1 = \" &lt;&lt; runtime &lt;&lt; \"s\" &lt;&lt; endl;\n\n\n//part of code that I want to show run time progress by progress bar\nvalue = gtk_progress_bar_get_fraction(GTK_PROGRESS_BAR(data));\n\nvalue += 0.01;\nif (value &gt; 1.0) {\n    value = 0.0;\n}\n\ntext = g_string_new(gtk_progress_bar_get_text(GTK_PROGRESS_BAR(data)));\ng_string_sprintf(text, \"%d%%\", (int)(value * 100));\ngtk_progress_bar_set_fraction(GTK_PROGRESS_BAR(data), value);\ngtk_progress_bar_set_show_text(GTK_PROGRESS_BAR(data), TRUE);\ngtk_progress_bar_set_text(GTK_PROGRESS_BAR(data), text-&gt;str);\n\nwhile (gtk_events_pending())\n    gtk_main_iteration();\n\nreturn TRUE;\n}\n\nint main(int argc, char *argv[])\n{\nGtkWidget *window;\nGtkWidget *progressBar;\ngint timer;\n\ngtk_init(&amp;argc, &amp;argv);\n\nwindow = gtk_window_new(GTK_WINDOW_TOPLEVEL);\ngtk_window_set_title(GTK_WINDOW(window), \"GtkProgressBar\");\ngtk_window_set_default_size(GTK_WINDOW(window), 300, 30);\n\nprogressBar = gtk_progress_bar_new();\ntimer = g_timeout_add(100, Func, progressBar);\n\ngtk_container_add(GTK_CONTAINER(window), progressBar);\n\ngtk_widget_show_all(window);\n\ngtk_main();\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>and this is my image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ToiJj.png\" rel=\"nofollow noreferrer\">noisy image</a></p>\n\n<p>But I can't combine these codes together to show progress run time of my project. I'm new in gtk3. Does any one have any thoughts or suggestions on this?</p>\n"}, {"tags": ["python", "c++", "arrays", "numpy"], "comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1485379290, "post_id": 41861601, "comment_id": 70907494, "body": "You probably want to search for a C++ numeric library, but note that if you are rewriting the code in C++ to improve the performance, you could be disappointed\u2014good NumPy code tends to be very fast to begin with."}, {"owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1485379396, "post_id": 41861601, "comment_id": 70907545, "body": "@DietrichEpp Thanks, I know that NumPy is fast, but getting rid of Python at any cost is essential."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1485383771, "post_id": 41861601, "comment_id": 70909673, "body": "&quot;At any cost&quot; shouldn&#39;t be in an engineer&#39;s vocabulary :-)"}], "answers": [{"comments": [{"owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "edited": false, "score": 0, "creation_date": 1485380264, "post_id": 41861888, "comment_id": 70907959, "body": "Thanks! No, I have experience with OpenCV only. Maybe there are some hints somewhere about rewriting between Eigen and NumPy to start with? I understand that it sounds a bit lazy, but it becomes very hard and time-consuming to switch from one solution to another"}, {"owner": {"reputation": 938, "user_id": 4163506, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/57e96b2432b47a690aecb5f532739f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Lazarus535", "link": "https://stackoverflow.com/users/4163506/lazarus535"}, "reply_to_user": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "edited": false, "score": 0, "creation_date": 1485383271, "post_id": 41861888, "comment_id": 70909430, "body": "You know what your original code is about, right? What it does, mathematically speaking? Then you can start here: <a href=\"http://eigen.tuxfamily.org/dox/group__TutorialMatrixClass.html\" rel=\"nofollow noreferrer\">eigen.tuxfamily.org/dox/group__TutorialMatrixClass.html</a> It starts by explaining basic matrix/linear algebra stuff...."}, {"owner": {"reputation": 938, "user_id": 4163506, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/57e96b2432b47a690aecb5f532739f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Lazarus535", "link": "https://stackoverflow.com/users/4163506/lazarus535"}, "reply_to_user": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "edited": false, "score": 1, "creation_date": 1485383401, "post_id": 41861888, "comment_id": 70909492, "body": "As for direct rewrite instructions: I don&#39;t think such a thing exists, nor would it be very useful in general. But in general there should be an equivalent or at least very similar operation in the Eigen library for everything numpy can do."}, {"owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "edited": false, "score": 0, "creation_date": 1485419839, "post_id": 41861888, "comment_id": 70921106, "body": "Ok, as long as there is an equivalent, I&#39;ll try it. Thank you!"}], "tags": [], "owner": {"reputation": 938, "user_id": 4163506, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/57e96b2432b47a690aecb5f532739f8c?s=128&d=identicon&r=PG&f=1", "display_name": "Lazarus535", "link": "https://stackoverflow.com/users/4163506/lazarus535"}, "is_accepted": true, "score": 3, "last_activity_date": 1485379342, "creation_date": 1485379342, "answer_id": 41861888, "question_id": 41861601, "link": "https://stackoverflow.com/questions/41861601/c-library-with-array-operations-similar-to-python-numpy/41861888#41861888", "title": "C++ library with array operations similar to Python/NumPy", "body": "<p>I think Eigen is probably suitable for you. If you have not tried it (i don't know based on your question), you should take a look at it. Apart from being very fast (amongst the fasterst, from what i've gathered), it has also a pretty natural syntax. It does not get much better, if C++ only is concerned.</p>\n\n<p><a href=\"http://eigen.tuxfamily.org\" rel=\"nofollow noreferrer\">http://eigen.tuxfamily.org</a></p>\n"}], "owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1357, "favorite_count": 0, "closed_date": 1485387827, "accepted_answer_id": 41861888, "answer_count": 1, "score": 1, "last_activity_date": 1485379342, "creation_date": 1485378197, "last_edit_date": 1485378590, "question_id": 41861601, "link": "https://stackoverflow.com/questions/41861601/c-library-with-array-operations-similar-to-python-numpy", "closed_reason": "Not suitable for this site", "title": "C++ library with array operations similar to Python/NumPy", "body": "<p>Please excuse for asking possibly a too broad question. However, my task is very concrete: having not much experience with Python, I want to rewrite Python code to C++ (OpenCV) and I wonder if there is a good documented comparison for some C++ library (I know that there exist OpenBLAS, Eigen, etc.) that would allow me relatively easily repeat all the array operations made in original code which turns to be quite a challenge for me using OpenCV. Maybe some one actually wrote posts about syntax comparison?</p>\n\n<p>Python code:</p>\n\n<pre><code>image = im_orig.copy()\n# Create input for multiples of net input/output changes.\nim_bg_width = int(_np.ceil(\n    float(image.shape[1]) * scale_factor / _STRIDE) * _STRIDE)\nim_bg_height = int(_np.ceil(\n    float(image.shape[0]) * scale_factor / _STRIDE) * _STRIDE)\npad_size = 64\nim_bot_pixels = image[-1:, :, :]\nim_bot = _np.tile(im_bot_pixels, (pad_size, 1, 1))\nimage = _np.vstack((image, im_bot))\nim_right_pixels = image[:, -1:, :]\nim_right = _np.tile(im_right_pixels, (1, pad_size, 1))\nimage = _np.hstack((image, im_right))\nimage = _scipy.misc.imresize(image, scale_factor, interp='bilinear')\nimage = image.astype('float32') - _MEAN\n\nnet_input = _np.zeros((im_bg_height, im_bg_width, 3), dtype='float32')\nnet_input[:min(net_input.shape[0], image.shape[0]),\n          :min(net_input.shape[1], image.shape[1]), :] =\\\n    image[:min(net_input.shape[0], image.shape[0]),\n          :min(net_input.shape[1], image.shape[1]), :]\n</code></pre>\n\n<p>EDIT: I want to get rid of python dependecy (and especially from python C++ API) at any cost and have the program actually readable, unlike what Cython produces.</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 1, "creation_date": 1485378198, "post_id": 41861581, "comment_id": 70906891, "body": "since this is OS specific, probably better to move question to <a href=\"http://askubuntu.com\">askubuntu.com</a>"}, {"owner": {"reputation": 538, "user_id": 1832987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71725c424ea7e68da3c1766f1a7db14f?s=128&d=identicon&r=PG", "display_name": "MS-DDOS", "link": "https://stackoverflow.com/users/1832987/ms-ddos"}, "edited": false, "score": 0, "creation_date": 1485392154, "post_id": 41861581, "comment_id": 70912233, "body": "Ouch thats rough. Can you remove all the symlinks that point to the old boost location? That would at least get you back to square 1."}], "owner": {"reputation": 111, "user_id": 2701114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781b5c867349134606afba7b1630d620?s=128&d=identicon&r=PG&f=1", "display_name": "user2701114", "link": "https://stackoverflow.com/users/2701114/user2701114"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1485391863, "creation_date": 1485378106, "last_edit_date": 1485391863, "question_id": 41861581, "link": "https://stackoverflow.com/questions/41861581/missing-boost-libs", "title": "Missing Boost Libs", "body": "<p>I did something pretty stupid. I'm on Ubuntu. I wanted to reinstall Boost because of some issues. I used apt-get autoremove/purge, but I noticed that there were still some Boost libs hanging around: date_time, filesystem, iostreams, and system. I manually deleted those libraries, then reinstalled Boost. Now there are broken links for all four of those libraries. For example, for libboost_system I have libboost_system.a and libboost_system.so. However, libboost_system.so is a link to libboost_system.so.1.58.0, which doesn't exist. I tried using apt-get to uninstall/reinstall those libs, but no luck so far. Anyone have any suggestions for getting those libraries back?</p>\n"}, {"tags": ["c++", "winapi", "opengl", "waitformultipleobjects"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1485378589, "post_id": 41861557, "comment_id": 70907082, "body": "Please show real code. Your <code>while( bQuit )</code> loop never runs."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1485378635, "post_id": 41861557, "comment_id": 70907114, "body": "Doesn&#39;t look like we have sufficient code. And this code isn&#39;t real. The loop will never execute."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1485378880, "post_id": 41861557, "comment_id": 70907244, "body": "@IInspectable - how about <code>if( msg.message == WM_QUIT ) bQuit = true;</code> ? this and break loop"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1485379035, "post_id": 41861557, "comment_id": 70907334, "body": "B) How often you want to draw depends on what you draw. If you draw animations, then you will need at least 30fps to get it smooth. If you write a game, then input-display latency might be a point and you will want to update the view as often as you can (or at least at the refresh rate of the monitor, but that whats vsync is for)."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1485379411, "post_id": 41861557, "comment_id": 70907551, "body": "look like call <code>PeekMessage</code> <i>only once</i> but not in loop <code>while(PeekMessage)</code> very common error with <code>MsgWaitForMultipleObjects</code> code - i view this error already not first time"}, {"owner": {"reputation": 2671, "user_id": 6306782, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MetvO.png?s=128&g=1", "display_name": "z32a7ul", "link": "https://stackoverflow.com/users/6306782/z32a7ul"}, "edited": false, "score": 0, "creation_date": 1485380705, "post_id": 41861557, "comment_id": 70908155, "body": "I just wanted to simplify the code, sorry for the error, I corrected it: bQuit is true initially."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1485381563, "post_id": 41861557, "comment_id": 70908617, "body": "@z32a7ul - may be <code>bool bQuit = false; while( !bQuit ){}</code> or <code>for (;;) { if( msg.message == WM_QUIT ) return; }</code>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1485521095, "post_id": 41861557, "comment_id": 70970411, "body": "@RbMm: It&#39;s irrelevant what&#39;s inside the <code>while</code> loop. A conforming compiler could throw out all code inside the <code>while</code> loop, because it can be statically determined, that this code never runs. That was prior to the OP&#39;s edit. After the edit, the loop never terminates. This isn&#39;t real code."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1485522749, "post_id": 41861557, "comment_id": 70971390, "body": "@IInspectable - <code>After the edit, the loop never terminates</code> - question edited several times, however in all versions loop terminated when <code>if( msg.message == WM_QUIT ) bQuit = true;</code>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1485522975, "post_id": 41861557, "comment_id": 70971535, "body": "@RbMm: The loop never terminated at the time I wrote the comment that the loop never terminated. No need to keep me up to date on a question I have no interest in answering, because we still don&#39;t know, whether this is real code or fake code."}], "answers": [{"comments": [{"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1485382145, "post_id": 41861780, "comment_id": 70908881, "body": "<code>GetMessage</code> also does the same right thing?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 1, "creation_date": 1485382481, "post_id": 41861780, "comment_id": 70909045, "body": "@Raindrop7 no of course - we can not use <code>GetMessage</code> here, because this is synchronous can can <b>wait</b>. we need use <b>only</b> <code>PeekMessage</code> and in loop while true"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 3, "last_activity_date": 1485381442, "last_edit_date": 1485381442, "creation_date": 1485378837, "answer_id": 41861780, "question_id": 41861557, "link": "https://stackoverflow.com/questions/41861557/win32-main-message-loop-for-opengl/41861780#41861780", "title": "Win32 Main Message Loop for OpenGL", "body": "<p>your error that you call <code>PeekMessage</code> only <strong>once</strong> per <code>WAIT_OBJECT_0</code> but you need run it in loop <code>while (::PeekMessage( &amp;msg, NULL, 0, 0, PM_REMOVE ))</code> because we can have several messages here. and better use <code>MsgWaitForMultipleObjectsEx</code> instead - try this code:</p>\n\n<pre><code>bool bQuit = false;\nwhile( !bQuit )// for (;;)\n{\n    MSG msg;\n\n    switch(::MsgWaitForMultipleObjectsEx( 0, NULL, 12, QS_ALLINPUT, 0))\n    {\n    case WAIT_OBJECT_0:\n        while (::PeekMessage( &amp;msg, NULL, 0, 0, PM_REMOVE ))\n        {\n            if( msg.message == WM_QUIT )\n                bQuit = true;// return;\n            ::TranslateMessage( &amp;msg );\n            ::DispatchMessage( &amp;msg );\n        }\n    case WAIT_TIMEOUT:\n        RenderFrame();\n        ::SwapBuffers( hDc );\n    }\n}\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>if I press Alt+F4 to close the window, it does not quit right after I\n  release the key</p>\n</blockquote>\n\n<p>several messages posted to your thread queue when you press <code>Alt+F4</code>, <code>MsgWaitForMultipleObjects</code> return, but you process <strong>not all</strong> it but only <strong>one</strong></p>\n\n<blockquote>\n  <p>however, if I hover the mouse over the window, it quits instantly</p>\n</blockquote>\n\n<p>new messages (<code>WM_MOUSEMOVE</code>) placed, but main <code>MsgWaitForMultipleObjects</code> again return and you at the end process all messages related to close process</p>\n"}], "owner": {"reputation": 2671, "user_id": 6306782, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MetvO.png?s=128&g=1", "display_name": "z32a7ul", "link": "https://stackoverflow.com/users/6306782/z32a7ul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 904, "favorite_count": 0, "closed_date": 1485760961, "accepted_answer_id": 41861780, "answer_count": 1, "score": -4, "last_activity_date": 1485521275, "creation_date": 1485378035, "last_edit_date": 1485521275, "question_id": 41861557, "link": "https://stackoverflow.com/questions/41861557/win32-main-message-loop-for-opengl", "closed_reason": "Not suitable for this site", "title": "Win32 Main Message Loop for OpenGL", "body": "<p>My main message loop in a Win32 OpenGL application looks like this:</p>\n\n<pre><code>// Inside wWinMain\nbool bQuit = false;\nwhile( bQuit == false )\n{\n    DWORD dwReturn = ::MsgWaitForMultipleObjects( 0, NULL, FALSE, 12, QS_ALLINPUT );\n\n    if( dwReturn == WAIT_OBJECT_0 )\n    {\n        MSG msg;\n        BOOL bReturn = ::PeekMessage( &amp;msg, NULL, 0, 0, PM_REMOVE );\n        if( bReturn != FALSE )\n        {\n            if( msg.message == WM_QUIT )\n                bQuit = true;\n            ::TranslateMessage( &amp;msg );\n            ::DispatchMessage( &amp;msg );\n        }\n    }\n\n    if( dwReturn == WAIT_OBJECT_0 || dwReturn == WAIT_TIMEOUT )\n    {\n        RenderFrame();\n        ::SwapBuffers( hDc );\n    }\n}\n</code></pre>\n\n<p>It works almost fine, I have only one problem: if I press Alt+F4 to close the window, it does not quit right after I release the key, however, if I hover the mouse over the window, it quits instantly.</p>\n\n<p>A) Why is this? How should I modify my loop?</p>\n\n<p>B) The original code I found did not use MsgWaitForMultipleObjects but called RenderFrame continuously. I think this way too much CPU time is wasted on redrawing the screen. Am I right? What is the usual way, do you spend all your excess capacity on drawing?</p>\n"}, {"tags": ["c++", "directx", "directx-11"], "answers": [{"comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1485410995, "post_id": 41861850, "comment_id": 70917734, "body": "See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee663275.aspx\" rel=\"nofollow noreferrer\">MSDN</a> and <a href=\"https://blogs.msdn.microsoft.com/chuckw/2015/08/05/where-is-the-directx-sdk-2015-edition/\" rel=\"nofollow noreferrer\">this post</a>."}], "tags": [], "owner": {"reputation": 81, "user_id": 7419139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3a53e90b8c267fb46de9238ba86c5a?s=128&d=identicon&r=PG&f=1", "display_name": "jaklh", "link": "https://stackoverflow.com/users/7419139/jaklh"}, "is_accepted": true, "score": 0, "last_activity_date": 1485379157, "creation_date": 1485379157, "answer_id": 41861850, "question_id": 41861545, "link": "https://stackoverflow.com/questions/41861545/not-defined-structures-in-directx/41861850#41861850", "title": "not defined structures in directx", "body": "<p>I found the error I surfed some more and found an interesting post.<br>\nThe problem I had was because apperently the windows 7 SDK already contains (at least some parts of the DirectX SDK), and because of the order I set the aditional include libraries it searched in the windows SDK first.<br>\nWhat I had to do was change the order of these directories so directx was above windows.<br>\nSorry for asking I should have made more research.</p>\n"}], "owner": {"reputation": 81, "user_id": 7419139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3a53e90b8c267fb46de9238ba86c5a?s=128&d=identicon&r=PG&f=1", "display_name": "jaklh", "link": "https://stackoverflow.com/users/7419139/jaklh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 41861850, "answer_count": 1, "score": 0, "last_activity_date": 1485379157, "creation_date": 1485377998, "question_id": 41861545, "link": "https://stackoverflow.com/questions/41861545/not-defined-structures-in-directx", "title": "not defined structures in directx", "body": "<p>I am having some trouble compiling my directX project I made.<br>\nMy project is based on a simple directX 11 library I made. The library compiles without anny error but when I try to compile the actual program I get errors that directX structures are not defined.<br>\nI am not sure if it is relevant but I added the windows sdk(7.1) manualy.<br>\nI also noticed that all the errors are either in d3d11shader.h or D3Dcompiler.h , I don't know if it has something to do with my problem.</p>\n\n<p>Here is the errors I get(unfortunatly I have windows, and therefore Visual studio in German, but I will list some explanation below)    </p>\n\n<p>\"ist nicht definiert\" :<br>\nis not defined    </p>\n\n<p>\"Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt. \" :<br>\n int type specificer expected. defautlt int is not supported by c++  </p>\n\n<p>\"kann nur auf Funktionsdeklarationen oder Funktionsdefinitionen angewendet werden.\":<br>\ncan only be used forfunction declaration/definition  </p>\n\n<p>\"bei der Deklaration von Daten nicht zul\u00e4ssig\":<br>\nnot legal for the declaration of data</p>\n\n<pre><code>117 IntelliSense: Der Bezeichner \"\"ID3DInclude\"\" ist nicht definiert.   d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    153 21  realLife\n121 IntelliSense: Der Bezeichner \"\"ID3DInclude\"\" ist nicht definiert.   d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    166 6   realLife\n125 IntelliSense: Der Bezeichner \"\"ID3DInclude\"\" ist nicht definiert.   d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    186 24  realLife\n129 IntelliSense: Der Bezeichner \"\"ID3DInclude\"\" ist nicht definiert.   d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    195 6   realLife\n118 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    158 18  realLife\n119 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    159 22  realLife\n122 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    171 6   realLife\n123 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    172 6   realLife\n126 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    187 21  realLife\n127 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    188 25  realLife\n130 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    196 6   realLife\n131 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    197 6   realLife\n132 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    209 23  realLife\n133 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    241 22  realLife\n134 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    248 12  realLife\n135 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    260 30  realLife\n136 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    271 32  realLife\n137 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    282 33  realLife\n138 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    293 41  realLife\n139 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    313 22  realLife\n140 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    345 22  realLife\n141 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    365 26  realLife\n142 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    380 48  realLife\n143 IntelliSense: Der Bezeichner \"\"ID3DBlob\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    391 21  realLife\n114 IntelliSense: Der Bezeichner \"\"D3D_TESSELLATOR_PARTITIONING\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3D11Shader.h    92  9   realLife\n115 IntelliSense: Der Bezeichner \"\"D3D_TESSELLATOR_OUTPUT_PRIMITIVE\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3D11Shader.h    94  9   realLife\n113 IntelliSense: Der Bezeichner \"\"D3D_TESSELLATOR_DOMAIN\"\" ist nicht definiert.    d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3D11Shader.h    90  9   realLife\n116 IntelliSense: Der Bezeichner \"\"D3D_SHADER_MACRO\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    152 58  realLife\n120 IntelliSense: Der Bezeichner \"\"D3D_SHADER_MACRO\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    165 12  realLife\n124 IntelliSense: Der Bezeichner \"\"D3D_SHADER_MACRO\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    185 30  realLife\n128 IntelliSense: Der Bezeichner \"\"D3D_SHADER_MACRO\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3Dcompiler.h    194 12  realLife\n111 IntelliSense: Der Bezeichner \"\"D3D_RESOURCE_RETURN_TYPE\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3D11Shader.h    35  9   realLife\n112 IntelliSense: Der Bezeichner \"\"D3D_CBUFFER_TYPE\"\" ist nicht definiert.  d:\\CPPQuellcode\\SDKs\\directx11\\Include\\D3D11Shader.h    37  9   realLife \nFehler  4   error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    35  1   realLife\nFehler  6   error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    37  1   realLife\nFehler  8   error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    45  1   realLife\nFehler  10  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    46  1   realLife\nFehler  12  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    80  1   realLife\nFehler  14  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    81  1   realLife\nFehler  16  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    90  1   realLife\nFehler  18  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    92  1   realLife\nFehler  20  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    94  1   realLife\nFehler  22  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    126 1   realLife\nFehler  24  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    128 1   realLife\nFehler  26  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    144 1   realLife\nFehler  28  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    150 1   realLife\nFehler  31  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    271 1   realLife\nFehler  35  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    152 1   realLife\nFehler  37  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    165 1   realLife\nFehler  39  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    185 1   realLife\nFehler  41  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    194 1   realLife\nFehler  60  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    35  1   realLife\nFehler  62  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    37  1   realLife\nFehler  64  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    45  1   realLife\nFehler  66  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    46  1   realLife\nFehler  68  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    80  1   realLife\nFehler  70  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    81  1   realLife\nFehler  72  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    90  1   realLife\nFehler  74  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    92  1   realLife\nFehler  76  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    94  1   realLife\nFehler  78  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    126 1   realLife\nFehler  80  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    128 1   realLife\nFehler  82  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    144 1   realLife\nFehler  84  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    150 1   realLife\nFehler  87  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    271 1   realLife\nFehler  91  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    152 1   realLife\nFehler  93  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    165 1   realLife\nFehler  95  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    185 1   realLife\nFehler  97  error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.   d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    194 1   realLife\nFehler  32  error C2495: \"ID3D11ShaderReflection::D3D_PRIMITIVE\": \"__declspec(nothrow)\" kann nur auf Funktionsdeklarationen oder Funktionsdefinitionen angewendet werden.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    271 1   realLife\nFehler  88  error C2495: \"ID3D11ShaderReflection::D3D_PRIMITIVE\": \"__declspec(nothrow)\" kann nur auf Funktionsdeklarationen oder Funktionsdefinitionen angewendet werden.   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    271 1   realLife\nFehler  30  error C2433: 'ID3D11ShaderReflection::D3D_PRIMITIVE': 'virtual' bei der Deklaration von Daten nicht zul\u00e4ssig    d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    271 1   realLife\nFehler  86  error C2433: 'ID3D11ShaderReflection::D3D_PRIMITIVE': 'virtual' bei der Deklaration von Daten nicht zul\u00e4ssig    d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    271 1   realLife\nFehler  34  error C2253: \"ID3D11ShaderReflection::GetGSInputPrimitive\": Ein reiner Spezifizierer oder ein abstrakter \u00dcberschreibungsspezifizierer ist nur f\u00fcr eine virtuelle Funktion zul\u00e4ssig. d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    271 1   realLife\nFehler  90  error C2253: \"ID3D11ShaderReflection::GetGSInputPrimitive\": Ein reiner Spezifizierer oder ein abstrakter \u00dcberschreibungsspezifizierer ist nur f\u00fcr eine virtuelle Funktion zul\u00e4ssig. d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    271 1   realLife\nFehler  13  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'Type'  d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    81  1   realLife\nFehler  25  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'Type'  d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    144 1   realLife\nFehler  69  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'Type'  d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    81  1   realLife\nFehler  81  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'Type'  d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    144 1   realLife\nFehler  7   error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'SystemValueType'   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    45  1   realLife\nFehler  63  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'SystemValueType'   d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    45  1   realLife\nFehler  23  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'InputPrimitive'    d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    128 1   realLife\nFehler  79  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'InputPrimitive'    d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    128 1   realLife\nFehler  21  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'GSOutputTopology'  d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    126 1   realLife\nFehler  77  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'GSOutputTopology'  d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    126 1   realLife\nFehler  27  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'Dimension' d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    150 1   realLife\nFehler  83  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'Dimension' d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    150 1   realLife\nFehler  17  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'D3D11_TESSELLATOR_PARTITIONING'    d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    92  1   realLife\nFehler  73  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'D3D11_TESSELLATOR_PARTITIONING'    d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    92  1   realLife\nFehler  19  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'D3D11_TESSELLATOR_OUTPUT_PRIMITIVE'    d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    94  1   realLife\nFehler  75  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'D3D11_TESSELLATOR_OUTPUT_PRIMITIVE'    d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    94  1   realLife\nFehler  15  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'D3D11_TESSELLATOR_DOMAIN'  d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    90  1   realLife\nFehler  71  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'D3D11_TESSELLATOR_DOMAIN'  d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    90  1   realLife\nFehler  3   error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'D3D11_RESOURCE_RETURN_TYPE'    d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    35  1   realLife\nFehler  59  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'D3D11_RESOURCE_RETURN_TYPE'    d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    35  1   realLife\nFehler  5   error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'D3D11_CBUFFER_TYPE'    d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    37  1   realLife\nFehler  61  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'D3D11_CBUFFER_TYPE'    d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    37  1   realLife\nFehler  9   error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'ComponentType' d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    46  1   realLife\nFehler  65  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'ComponentType' d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    46  1   realLife\nFehler  11  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'Class' d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    80  1   realLife\nFehler  67  error C2146: Syntaxfehler: Fehlendes ';' vor Bezeichner 'Class' d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    80  1   realLife\nFehler  29  error C2143: Syntaxfehler: Es fehlt ';' vor '__stdcall' d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    271 1   realLife\nFehler  85  error C2143: Syntaxfehler: Es fehlt ';' vor '__stdcall' d:\\cppquellcode\\sdks\\directx11\\include\\d3d11shader.h    271 1   realLife\nFehler  36  error C2143: Syntaxfehler: Es fehlt ',' vor '*' d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    152 1   realLife\nFehler  38  error C2143: Syntaxfehler: Es fehlt ',' vor '*' d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    165 1   realLife\nFehler  40  error C2143: Syntaxfehler: Es fehlt ',' vor '*' d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    185 1   realLife\nFehler  42  error C2143: Syntaxfehler: Es fehlt ',' vor '*' d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    194 1   realLife\nFehler  92  error C2143: Syntaxfehler: Es fehlt ',' vor '*' d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    152 1   realLife\nFehler  94  error C2143: Syntaxfehler: Es fehlt ',' vor '*' d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    165 1   realLife\nFehler  96  error C2143: Syntaxfehler: Es fehlt ',' vor '*' d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    185 1   realLife\nFehler  98  error C2143: Syntaxfehler: Es fehlt ',' vor '*' d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    194 1   realLife\nFehler  43  error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    209 1   realLife\nFehler  44  error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    241 1   realLife\nFehler  45  error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    248 1   realLife\nFehler  46  error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    260 1   realLife\nFehler  47  error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    271 1   realLife\nFehler  48  error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    282 1   realLife\nFehler  49  error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    293 1   realLife\nFehler  50  error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    313 1   realLife\nFehler  51  error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    345 1   realLife\nFehler  52  error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    365 1   realLife\nFehler  53  error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    380 1   realLife\nFehler  54  error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    391 1   realLife\nFehler  99  error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    209 1   realLife\nFehler  100 error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    241 1   realLife\nFehler  101 error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    248 1   realLife\nFehler  102 error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    260 1   realLife\nFehler  103 error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    271 1   realLife\nFehler  104 error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    282 1   realLife\nFehler  105 error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    293 1   realLife\nFehler  106 error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    313 1   realLife\nFehler  107 error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    345 1   realLife\nFehler  108 error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    365 1   realLife\nFehler  109 error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    380 1   realLife\nFehler  110 error C2061: Syntaxfehler: Bezeichner 'ID3DBlob'    d:\\cppquellcode\\sdks\\directx11\\include\\d3dcompiler.h    391 1   realLife\n</code></pre>\n\n<p>Thanks in advance for responses, and just let me know if you need more information or some more Greman -> English translation.</p>\n"}, {"tags": ["c++", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 34, "user_id": 7471134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fd8a0588cac2b735e5719c212e601c6?s=128&d=identicon&r=PG&f=1", "display_name": "M.Naszko", "link": "https://stackoverflow.com/users/7471134/m-naszko"}, "is_accepted": true, "score": 1, "last_activity_date": 1485380543, "creation_date": 1485380543, "answer_id": 41862168, "question_id": 41861453, "link": "https://stackoverflow.com/questions/41861453/manually-initializing-a-cvmatx/41862168#41862168", "title": "Manually initializing a cv::Matx?", "body": "<p>In main you have to use Matx of specific type. For your purpose it is float or double. Replace <code>cv::Matx&lt;T, 4, 4&gt;</code> with <code>cv::Matx&lt;double, 4, 4&gt;</code> and delete <code>template&lt;typename T&gt;</code> in main.</p>\n"}], "owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1049, "favorite_count": 0, "accepted_answer_id": 41862168, "answer_count": 1, "score": 2, "last_activity_date": 1485380543, "creation_date": 1485377572, "question_id": 41861453, "link": "https://stackoverflow.com/questions/41861453/manually-initializing-a-cvmatx", "title": "Manually initializing a cv::Matx?", "body": "<p>I have some camera calibration data, in this format:</p>\n\n<pre><code>  0.3072423    -0.0104122    -0.9515744     -208.5614\n0.003617216     0.9999457  -0.009773563     -4.705516\n  0.9516244 -0.0004391983     0.3072633     -152.5427\n          0             0             0             1\n</code></pre>\n\n<p>I have a function that takes <code>const cv::Matx&lt;T, 4, 4&gt;&amp; M</code> as an argument. (From third party code)</p>\n\n<pre><code>template&lt;typename T&gt;\ncv::Matx&lt;T, 6, 1&gt; hom2cayley(const cv::Matx&lt;T, 4, 4&gt;&amp; M)\n{\n    cv::Matx&lt;T, 3, 3&gt; R(M(0, 0), M(0, 1), M(0, 2),\n        M(1, 0), M(1, 1), M(1, 2),\n        M(2, 0), M(2, 1), M(2, 2));\n    cv::Matx&lt;T, 3, 1&gt; C = rot2cayley(R);\n\n    return cv::Matx&lt;T, 6, 1&gt;(C(0, 0), C(1, 0), C(2, 0),\n        M(0, 3), M(1, 3), M(2, 3));\n}\n</code></pre>\n\n<p>Sorry if this is a stupid question, but how do i manually fill a <code>Matx</code> with the values above, so that i can pass it to the function?</p>\n\n<p>I have:</p>\n\n<pre><code>void main()\n{\n    template&lt;typename T&gt;\n\n    const cv::Matx&lt;T, 4, 4&gt; camData{ 0.3072423, - 0.0104122, - 0.9515744, - 208.5614,\n        0.003617216,     0.9999457, - 0.009773563, - 4.705516,\n        0.9516244, - 0.0004391983,     0.3072633, - 152.5427,\n        0 ,            0 ,            0    ,         1 };\n\n    hom2cayley(camData);  //invalid argument, camData is undefined.\n}\n</code></pre>\n\n<p>...but it gives the errors above. What are my mistakes here?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 11, "creation_date": 1485377217, "post_id": 41861359, "comment_id": 70906423, "body": "<code>int size = 8 &#47; 8.0f;</code> -- the mind boggles."}, {"owner": {"reputation": 15, "user_id": 5679263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1107783972589422/picture?type=large", "display_name": "Egi Dijus", "link": "https://stackoverflow.com/users/5679263/egi-dijus"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1485377280, "post_id": 41861359, "comment_id": 70906450, "body": "size is for future use when i will be writing more then 8 bits , so by / 8.0f i am converting them to bytes"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1485377296, "post_id": 41861359, "comment_id": 70906461, "body": "Not sure why you&#39;re using a fixed-size character buffer, especially one that&#39;s...a single byte long? Maybe? Are you expecting the file to contain 7.3 bits in the future?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1485377308, "post_id": 41861359, "comment_id": 70906470, "body": "<code>vector &lt;bool&gt;</code> is not exactly the greatest thing to use for any purpose"}, {"owner": {"reputation": 15, "user_id": 5679263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1107783972589422/picture?type=large", "display_name": "Egi Dijus", "link": "https://stackoverflow.com/users/5679263/egi-dijus"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485377343, "post_id": 41861359, "comment_id": 70906483, "body": "@tadman i just trying to get everything running before use on my project where is 560k bits"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 6, "creation_date": 1485377391, "post_id": 41861359, "comment_id": 70906503, "body": "a &quot;std::vector&quot; with the variable name &quot;map&quot; is basically asking your coworkers to hate you"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485377448, "post_id": 41861359, "comment_id": 70906529, "body": "Bits are either there or not there. Why are you explicitly declaring the divisor as a float? <a href=\"http://stackoverflow.com/questions/5840148/how-can-i-get-a-files-size-in-c\">Figure out how large the file is</a> and allocate your buffer accordingly."}, {"owner": {"reputation": 15, "user_id": 5679263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1107783972589422/picture?type=large", "display_name": "Egi Dijus", "link": "https://stackoverflow.com/users/5679263/egi-dijus"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485377538, "post_id": 41861359, "comment_id": 70906580, "body": "@tadman 1) that would not solve problem 2) i dont see reason for doing this because of my future use , i dont need to check file size because all files will be fixed size 700*800 bits"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1485377629, "post_id": 41861359, "comment_id": 70906624, "body": "There&#39;s literally no reason to divide by a float. Also assumptions like #2 are how you get cripplingly bad overflow bugs. You can design around those assumptions, but always handle exceptional cases."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5679263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1107783972589422/picture?type=large", "display_name": "Egi Dijus", "link": "https://stackoverflow.com/users/5679263/egi-dijus"}, "edited": false, "score": 0, "creation_date": 1485377601, "post_id": 41861413, "comment_id": 70906612, "body": "thats because i pack 8 bits into one byte when was writing data to file"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 15, "user_id": 5679263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1107783972589422/picture?type=large", "display_name": "Egi Dijus", "link": "https://stackoverflow.com/users/5679263/egi-dijus"}, "edited": false, "score": 0, "creation_date": 1485377739, "post_id": 41861413, "comment_id": 70906669, "body": "@EgiDijus: So you also need to split your one byte back out into eight bits. I added some code."}, {"owner": {"reputation": 15, "user_id": 5679263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1107783972589422/picture?type=large", "display_name": "Egi Dijus", "link": "https://stackoverflow.com/users/5679263/egi-dijus"}, "edited": false, "score": 0, "creation_date": 1485377900, "post_id": 41861413, "comment_id": 70906747, "body": "thats what i am trying to do when reading into loops buffer[i] &lt;&lt; id , bit shifting byte to get 8 bits"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 15, "user_id": 5679263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1107783972589422/picture?type=large", "display_name": "Egi Dijus", "link": "https://stackoverflow.com/users/5679263/egi-dijus"}, "edited": false, "score": 2, "creation_date": 1485377933, "post_id": 41861413, "comment_id": 70906764, "body": "@EgiDijus: Shifting isn&#39;t enough. You also need to mask out the unwanted bits."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1485378076, "post_id": 41861413, "comment_id": 70906834, "body": "Kerrek is right. Aside from the unsigned issues (never shift signed values), if you take <code>3</code> and shift it left by <code>1</code> you get a true value, shift it by <code>2</code> you still get a true value, etc. even though only the lower two bits are set."}, {"owner": {"reputation": 15, "user_id": 5679263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1107783972589422/picture?type=large", "display_name": "Egi Dijus", "link": "https://stackoverflow.com/users/5679263/egi-dijus"}, "edited": false, "score": 0, "creation_date": 1485378150, "post_id": 41861413, "comment_id": 70906874, "body": "Just one more question why u casting as unsigned char if map is std::vector&lt;bool&gt; ?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 15, "user_id": 5679263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1107783972589422/picture?type=large", "display_name": "Egi Dijus", "link": "https://stackoverflow.com/users/5679263/egi-dijus"}, "edited": false, "score": 0, "creation_date": 1485378223, "post_id": 41861413, "comment_id": 70906904, "body": "@EgiDijus: Because you don&#39;t want to perform bitwise operations on signed types, and for some reason you didn&#39;t make your buffer unsigned."}, {"owner": {"reputation": 15, "user_id": 5679263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1107783972589422/picture?type=large", "display_name": "Egi Dijus", "link": "https://stackoverflow.com/users/5679263/egi-dijus"}, "edited": false, "score": 0, "creation_date": 1485378342, "post_id": 41861413, "comment_id": 70906970, "body": "i did normal char because read() function is asking me char not unsigned char"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 15, "user_id": 5679263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1107783972589422/picture?type=large", "display_name": "Egi Dijus", "link": "https://stackoverflow.com/users/5679263/egi-dijus"}, "edited": false, "score": 0, "creation_date": 1485380551, "post_id": 41861413, "comment_id": 70908092, "body": "@EgiDijus: Yes, you should probably cast that in the <code>read</code> call."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 3, "last_activity_date": 1485377796, "last_edit_date": 1485377796, "creation_date": 1485377367, "answer_id": 41861413, "question_id": 41861359, "link": "https://stackoverflow.com/questions/41861359/reading-binary-file-into-stdvectorbool/41861413#41861413", "title": "Reading Binary file into std::vector&lt;bool&gt;", "body": "<p>Your code spreads out one byte (the value of <code>buffer[i]</code>, where <code>i</code> is always <code>0</code>) over 8 bools. Since you only read one byte, which happens to be non-zero, you now end up with 8 <code>true</code>s (since any non-zero integer converts to <code>true</code>).</p>\n\n<p>Instead of spreading one value out, you probably want to <em>split</em> one value into its constituent bits:</p>\n\n<pre><code>for (int id = 0; id &lt; 8; id++)\n{\n    map.emplace_back((static_cast&lt;unsigned char&gt;(buffer[i]) &amp; (1U &lt;&lt; id)) &gt;&gt; id);\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5679263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1107783972589422/picture?type=large", "display_name": "Egi Dijus", "link": "https://stackoverflow.com/users/5679263/egi-dijus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "accepted_answer_id": 41861413, "answer_count": 1, "score": 0, "last_activity_date": 1485377796, "creation_date": 1485377144, "last_edit_date": 1485377666, "question_id": 41861359, "link": "https://stackoverflow.com/questions/41861359/reading-binary-file-into-stdvectorbool", "title": "Reading Binary file into std::vector&lt;bool&gt;", "body": "<p>Hello I am trying to write 8 bits from std::vector to binary file and read them back . Writing works fine , have checked with binary editor and all values are correct , but once I try to read I got bad data .\nData that i am writing : </p>\n\n<pre><code>11000111 //bits\n</code></pre>\n\n<p>Data that i got from reading:</p>\n\n<pre><code>11111111 //bits\n</code></pre>\n\n<p>Read function : </p>\n\n<pre><code>std::vector&lt;bool&gt; Read()\n{\n    std::vector&lt;bool&gt; map;\n    std::ifstream fin(\"test.bin\", std::ios::binary);\n    int size = 8 / 8.0f;\n    char * buffer = new char[size];\n    fin.read(buffer, size);\n    fin.close();\n    for (int i = 0; i &lt; size; i++)\n    {\n        for (int id = 0; id &lt; 8; id++)\n        {\n            map.emplace_back(buffer[i] &lt;&lt; id);\n        }\n    }\n    delete[] buffer;\n    return map;\n}\n</code></pre>\n\n<p>Write function(just so you guys know more whats going on)</p>\n\n<pre><code>void Write(std::vector&lt;bool&gt;&amp; map) \n{\n    std::ofstream fout(\"test.bin\", std::ios::binary);\n    char byte = 0;\n    int byte_index = 0;\n    for (size_t i = 0; i &lt; map.size(); i++)\n    {\n        if (map[i]) \n        {\n            byte |= (1 &lt;&lt; byte_index);\n        }\n        byte_index++;\n        if (byte_index &gt; 7)\n        {\n            byte_index = 0;\n            fout.write(&amp;byte, sizeof(byte));\n        }\n    }\n    fout.close();\n}\n</code></pre>\n"}, {"tags": ["c++", "regex", "c++11"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1485376822, "post_id": 41861222, "comment_id": 70906215, "body": "It&#39;s not so much the compilation time of the regex, but of all of the code required to implement all of the regex functionality. Compare the time to using 10 regexes."}, {"owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1485377324, "post_id": 41861222, "comment_id": 70906479, "body": "It looks like @chris is right. Try compiling with -save-temps, and look at the size of the resulting intermediate files."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485377332, "post_id": 41861222, "comment_id": 70906481, "body": "The regex is probably going to build a finite state machine on the back end.  That takes a lot of time.  Most likely that is what you are seeing."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1485377471, "post_id": 41861222, "comment_id": 70906548, "body": "As for the pattern itself, the dot must be escaped."}], "answers": [{"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 1, "last_activity_date": 1485379205, "last_edit_date": 1495539994, "creation_date": 1485379205, "answer_id": 41861860, "question_id": 41861222, "link": "https://stackoverflow.com/questions/41861222/reducing-stdregex-compile-time-in-c/41861860#41861860", "title": "Reducing std::regex compile time in C++", "body": "<p>You can certainly lighten the computational load of your regex by appropriately escaping the decimal point: <code>-?[0-9]*(\\.[0-9]+)?(e-?[0-9]+)?</code> This will of course prevent you from returning a false positive on  numbers like: \"1 3\" (don't worry that's a good thing those were 2 numbers.) But in this case and many others when you stoop to using regexes <a href=\"https://softwareengineering.stackexchange.com/questions/223634/what-is-meant-by-now-you-have-two-problems\">\"Now you have 2 problems\"</a>.</p>\n\n<p>Using a <a href=\"https://stackoverflow.com/a/32997831/2642059\"><code>istringstream</code></a> would provide a more specialized, robust solution to this problem:</p>\n\n<pre><code>bool isNumber(const string&amp; s) {\n    long double t;\n    istringstream r(s);\n\n    return r &gt;&gt; t &gt;&gt; ws &amp;&amp; r.eof();\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/QPSg3l\" rel=\"nofollow noreferrer\"><kbd>Live Example</kbd></a></p>\n"}], "owner": {"reputation": 3510, "user_id": 4128833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/079bb7879c594630684e2c9ed4ecad7e?s=128&d=identicon&r=PG", "display_name": "paul-g", "link": "https://stackoverflow.com/users/4128833/paul-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 771, "favorite_count": 0, "accepted_answer_id": 41861860, "answer_count": 1, "score": 4, "last_activity_date": 1485379205, "creation_date": 1485376610, "question_id": 41861222, "link": "https://stackoverflow.com/questions/41861222/reducing-stdregex-compile-time-in-c", "title": "Reducing std::regex compile time in C++", "body": "<p>I am using <code>std::regex r(\"-?[0-9]*(.[0-9]+)?(e-?[0-9]+)?\")</code> to validate numbers (ints/fixed point/floating point). The MWE is below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;regex&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nbool isNumber(string s) {\n  // can ignore all whitespace\n  s.erase(remove(s.begin(), s.end(), ' '), s.end());\n  std::regex r(\"-?[0-9]*(.[0-9]+)?(e-?[0-9]+)?\");\n  return regex_match(s, r);\n}\n\nint main() {\n  std::vector&lt;string&gt; test{\n    \"3\", \"-3\", // ints\n      \"1 3\", \" 13\", \" 1 3 \", // weird spacing\n      \"0.1\", \"-100.123123\", \"1000.12312\", // fixed point\n      \"1e5\", \"1e-5\", \"1.5e-10\", \"1a.512e4\", // floating point\n      \"a\", \"1a\", \"baaa\", \"1a\", // invalid\n      \"1e--5\", \"1e-\", //invalid\n      };\n\n  for (auto t : test) {\n    cout.width(20); cout &lt;&lt; t &lt;&lt; \" \" &lt;&lt; isNumber(t) &lt;&lt; endl;\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>I notice the compile time is quite large compared to what I was expecting:</p>\n\n<ul>\n<li><code>gcc 5.4 -O0 -std=c++11</code>, 2.3 seconds</li>\n<li><code>gcc 5.4 -O2 -std=c++11</code>, 3.4 seconds</li>\n<li><code>clang++ 3.8 -O0 -std=c++11</code>, 1.8 seconds</li>\n<li><code>clang++ 3.8 -O2 -std=c++11</code>, 3.7 seconds</li>\n</ul>\n\n<p>I use this for an online judge submission, which has a time limit on the compilation stage. </p>\n\n<p>So, the obivous questions:</p>\n\n<ul>\n<li><em>why is the compilation time so large?</em> I'm under the impression that when I use regexes in vim/emacs/grep/ack/ag etc. (on the same machine) the compilation really takes a lot less than this.</li>\n<li><em>is there any way to reduce the compilation time of a regular expression in C++?</em></li>\n</ul>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 876, "user_id": 6888189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd84b5896ae3af89fc8042a092d965c2?s=128&d=identicon&r=PG&f=1", "display_name": "Theo", "link": "https://stackoverflow.com/users/6888189/theo"}, "edited": false, "score": 0, "creation_date": 1485378007, "post_id": 41861159, "comment_id": 70906807, "body": "Double quotes indicate a string, use single quotes to denote a character."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7470886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xFf0W.jpg?s=128&g=1", "display_name": "Ingo", "link": "https://stackoverflow.com/users/7470886/ingo"}, "edited": false, "score": 0, "creation_date": 1485380127, "post_id": 41861171, "comment_id": 70907892, "body": "Thank you very much. i didn&#39;t know!"}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 5, "last_activity_date": 1485376447, "creation_date": 1485376447, "answer_id": 41861171, "question_id": 41861159, "link": "https://stackoverflow.com/questions/41861159/how-to-insert-character-into-set/41861171#41861171", "title": "How to insert character into set?", "body": "<p>Character literals are spelled with apostrophes:</p>\n\n<pre><code>set&lt;char&gt; Options {'a', 'b'};\n//                 ^^^  ^^^\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7470886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xFf0W.jpg?s=128&g=1", "display_name": "Ingo", "link": "https://stackoverflow.com/users/7470886/ingo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1167, "favorite_count": 0, "accepted_answer_id": 41861171, "answer_count": 1, "score": 0, "last_activity_date": 1485385570, "creation_date": 1485376396, "last_edit_date": 1485385570, "question_id": 41861159, "link": "https://stackoverflow.com/questions/41861159/how-to-insert-character-into-set", "title": "How to insert character into set?", "body": "<p>I have a small game which starts with a menu and the player can choose between 6 options. The decision from the player will be written with a <code>cin</code> into a <code>char</code> variable. This works fine, and the game starts with the option.\nBut the game also starts when the player enter another value and then the game has errors.\nTo fix it, I wanted to use a character set with the possible options. But on every way I try to insert values into the set variable I get a compiler error.</p>\n\n<p>When I try to initialize set while declaring I get <em>\"'a' was not declared in this scope\"</em>:</p>\n\n<pre><code>set &lt;char&gt; Options {a,b};\n</code></pre>\n\n<p>If I try it like this, <em>\"no matching function for call to 'std::set::insert(const char [2])'|\"</em></p>\n\n<pre><code>set &lt;char&gt; Options {\"a\",\"b\"};\n</code></pre>\n\n<p>When I do it like this, I get also <em>\"'a' was not declared in this scope\"</em></p>\n\n<pre><code>set &lt;char&gt; Options;\n\nint main()\n\nOptions.insert(a);\n</code></pre>\n\n<p>I also tried this, but then again I get <em>\"no matching function for call to 'std::set::insert(const char [2])'\"</em></p>\n\n<pre><code>set &lt;char&gt; Options;\n\nint main()\n\nOptions.insert(\"a\");\n</code></pre>\n\n<p>So now I'm very confused. With integer I have no problems, but when I try to use it with characters, I didn't get it working.</p>\n\n<p>Can somebody help?</p>\n\n<p>(This is my first question here, I hope it's well formulated)</p>\n"}, {"tags": ["c++", "range", "primes"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1485376196, "post_id": 41861062, "comment_id": 70905879, "body": "You stated that you &quot;have a question&quot;. However, a careful examination shows a complete absence of an actual question. The only thing your post contains is a status update for your homework assignment. That&#39;s not a specific question."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1485376297, "post_id": 41861062, "comment_id": 70905936, "body": "@SamVarshavchik Said exactly the right thing, but may as well add the MCVE link: <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1485376304, "post_id": 41861062, "comment_id": 70905941, "body": "IIRC There are about 6500 prime numbers between [0, 65536] and you can google for a full list. For a problem of that size, any search algorithm is feasible."}], "answers": [{"tags": [], "owner": {"reputation": 128, "user_id": 6534893, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/1099077733496063/picture?type=large", "display_name": "Luiz Miranda", "link": "https://stackoverflow.com/users/6534893/luiz-miranda"}, "is_accepted": true, "score": 0, "last_activity_date": 1485376617, "creation_date": 1485376617, "answer_id": 41861224, "question_id": 41861062, "link": "https://stackoverflow.com/questions/41861062/range-primes-c/41861224#41861224", "title": "Range Primes C++", "body": "<p>Well, you can use the formula for find which numbers are the primes, and then compare with your X number, then sum 1 or rest 1.</p>\n"}, {"comments": [{"owner": {"reputation": 40, "user_id": 4917789, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119683771378746/picture?type=large", "display_name": "Andrea ChaBal", "link": "https://stackoverflow.com/users/4917789/andrea-chabal"}, "edited": false, "score": 0, "creation_date": 1485378852, "post_id": 41861511, "comment_id": 70907222, "body": "It&#39;s homework for an algorithm class. It Kind of give me an a better idea that I had. Thanks"}, {"owner": {"reputation": 14257, "user_id": 820127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f8fffeec4f2ba3e75aebe941e4e5dd?s=128&d=identicon&r=PG", "display_name": "rossum", "link": "https://stackoverflow.com/users/820127/rossum"}, "edited": false, "score": 2, "creation_date": 1485446466, "post_id": 41861511, "comment_id": 70937345, "body": "<a href=\"https://en.wikipedia.org/wiki/Bertrand&#39;s_postulate\" rel=\"nofollow noreferrer\">Bertrand&#39;s Postulate</a> tells you that there is always a prime number between n and 2n.  That gives you an upper limit for the size of sieve you have to build: sqrt(2 * 10^5)."}], "tags": [], "owner": {"reputation": 23, "user_id": 5999706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qwi1N.jpg?s=128&g=1", "display_name": "Eddy Almui&#241;a", "link": "https://stackoverflow.com/users/5999706/eddy-almui%c3%b1a"}, "is_accepted": false, "score": 2, "last_activity_date": 1485377854, "creation_date": 1485377854, "answer_id": 41861511, "question_id": 41861062, "link": "https://stackoverflow.com/questions/41861062/range-primes-c/41861511#41861511", "title": "Range Primes C++", "body": "<p>If your code is for an Online Judge (as it seems to be) then you should try with something like this:</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\n\n#define MAX 1000005\n#define endl '\\n'\n\nusing namespace std;\n\nbool prime[MAX];\nvector&lt;int&gt; primes;\n\nvoid build() {\n    memset(prime, true, sizeof prime);\n    prime[0] = prime[1] = false;\n\n    for (int i = 2; i &lt; MAX; ++i) {\n        if (!prime[i]) continue;\n        primes.push_back(i);\n\n        for (int j = i + i; j &lt; MAX; j += i) {\n            prime[j] = false;\n        }\n    }\n}\n\nint main() {\n    ios_base::sync_with_stdio(false);\n    cin.tie(0);\n\n    build();\n\n    int m;\n    cin &gt;&gt; m;\n\n    while (m--) {\n        int x;\n        cin &gt;&gt; x;\n\n        auto b = lower_bound(primes.begin(), primes.end(), x);\n        auto a = b;\n\n        if (*a != primes[0])\n            a--;\n\n        cout &lt;&lt; *a &lt;&lt; \" \" &lt;&lt; *b &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>It just builds an Eratosthenes Sieve and then performs binary search looking for the lowest prime that is >= to the given number and then looks (if it isn't the smallest) for its predecessor. <code>x</code> will be contained in that interval; and of course is easy to note that it's the smallest possible interval.</p>\n"}], "owner": {"reputation": 40, "user_id": 4917789, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119683771378746/picture?type=large", "display_name": "Andrea ChaBal", "link": "https://stackoverflow.com/users/4917789/andrea-chabal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 1, "accepted_answer_id": 41861224, "answer_count": 2, "score": -3, "last_activity_date": 1485377854, "creation_date": 1485376043, "last_edit_date": 1485376327, "question_id": 41861062, "link": "https://stackoverflow.com/questions/41861062/range-primes-c", "title": "Range Primes C++", "body": "<p>I have a question, I have this assignment<br>\nGiven a positive integer X, we want to find the shortest interval [A,B] with X contained within it,Where also, A and B are primes numbers.</p>\n\n<p><strong>Input</strong>\nThe first line of input contains an integer M (1 &lt;= M &lt;= 100). M lines follow, each with a number X\n(1 &lt; X &lt;= 10^5).</p>\n\n<p><strong>Output</strong>\nM lines containing A and B (1 &lt; A &lt;= B &lt;= 10^6), B-A &lt;= 10^4.</p>\n\n<p><strong>Sample Input</strong></p>\n\n<p>2</p>\n\n<p>2</p>\n\n<p>4</p>\n\n<p><strong>Sample Output</strong></p>\n\n<p>2 2</p>\n\n<p>3 5</p>\n\n<p>I did this, but this doesn't solve the problem. How can I print the primes of the X number? if I don't have a range.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int n = 0, c = 0, c2 = 0, res = 0, nc = 0;\n    cout &lt;&lt; \"Introduce el limite de numeros: \";\n    cin &gt;&gt; n;\n    for (c = 1; c &lt;= n; c++) {\n        for (c2 = 1; c2 &lt;= n; c2++) {\n            res = c % c2;\n            if (res == 0) {\n                nc = nc + 1;\n            }\n        }\n        if (nc == 2) {\n            cout &lt;&lt; \" \" &lt;&lt; c;\n        }\n        nc = 0;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "sfml"], "answers": [{"tags": [], "owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "is_accepted": false, "score": 0, "last_activity_date": 1485451184, "creation_date": 1485451184, "answer_id": 41879254, "question_id": 41860994, "link": "https://stackoverflow.com/questions/41860994/sfml-player-movement-issue/41879254#41879254", "title": "SFML Player movement issue", "body": "<p>So here is what's going on in your main loop:</p>\n\n<pre><code>   character.SetPosition(windowWidth, windowHeight); // Put this line to get a start location\n   while (window.isOpen())\n   {\n        sf::Event e;\n        while (window.pollEvent(e))\n        {\n            // your code...\n        }\n\n        character.SetPosition(windowWidth, windowHeight); // &lt;---- Remove this line\n        character.UpdatePosition();\n        Draw();\n    }\n}\n</code></pre>\n\n<p>You are constantly setting the characters position to <code>windowWidth</code>, and <code>windowHeight</code>, so regardless of you calling <code>character.MoveRight()</code>, you are always reseting the position. </p>\n\n<p>I would also recommend adding something for handling input controls, maybe even placing them inside of your <code>Player</code> in an <code>update</code> method, and removing them for your event loop, as that can run multiple times and will hit your <code>character.MoveRight()</code> multiple times.</p>\n\n<p>Last bit of advice look into SFML's clock, so you can move your characters smoothly based off of time instead of framerate.</p>\n"}], "owner": {"reputation": 1, "user_id": 6791235, "user_type": "registered", "profile_image": "https://graph.facebook.com/451108341760051/picture?type=large", "display_name": "Erzis", "link": "https://stackoverflow.com/users/6791235/erzis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485451184, "creation_date": 1485375793, "last_edit_date": 1485385513, "question_id": 41860994, "link": "https://stackoverflow.com/questions/41860994/sfml-player-movement-issue", "title": "SFML Player movement issue", "body": "<p>I'm making a game in SFML library and I'm trying to make the <code>Player</code> move. I have no clue why it isn't moving while im pressing Right Arrow Key.</p>\n\n<p>Game.cpp</p>\n\n<pre><code>#include \"Game.h\"\n\nGame::Game()\n{\nwindowWidth = 800;\nwindowHeight = 600;\n}\n\nGame::~Game()\n{\n}\n\nvoid Game::Start()\n{\nwindow.create(sf::VideoMode(windowWidth, windowHeight), \"Game\");\nwindow.setFramerateLimit(60);\n\nwhile (window.isOpen())\n{\n    sf::Event e;\n    while (window.pollEvent(e))\n    {\n        if (e.type == sf::Event::Closed || sf::Keyboard::isKeyPressed(sf::Keyboard::Escape))\n        {\n            window.close();\n        }\n        else if (sf::Keyboard::isKeyPressed(sf::Keyboard::Left))\n        {\n        }\n        else if (sf::Keyboard::isKeyPressed(sf::Keyboard::Right))\n        {\n            character.MoveRight();\n        }\n    }\n\n    character.SetPosition(windowWidth, windowHeight);\n    character.UpdatePosition();\n    Draw();\n}\n}\n\nvoid Game::Draw()\n{\nwindow.clear();\n\ncharacter.DrawPlayer(window);\n\nwindow.display();\n}\n</code></pre>\n\n<p>Player.cpp</p>\n\n<pre><code>#include \"Player.h\"\n\nPlayer::Player()\n{\nplayer.setSize(sf::Vector2f(200, 50));\nplayer.setFillColor(sf::Color::White);\n\nplayerX = 300;\nplayerY = 300;\nplayerSpeed = 5.f;\n}\n\nPlayer::~Player()\n{\n}\n\nvoid Player::MoveRight()\n{\nplayerX += playerSpeed;\n}\n\nvoid Player::SetPosition(float windowWidth, float windowHeight)\n{\nplayerX = windowWidth / 2 - 100;\nplayerY = windowHeight - 50;\n}\n\nvoid Player::UpdatePosition()\n{\nplayer.setPosition(playerX, playerY);\n}\n\nvoid Player::DrawPlayer(sf::RenderWindow &amp;window)\n{\nwindow.draw(player);\n}\n</code></pre>\n\n<p>Feel free to tell me what should I change in my code.</p>\n"}, {"tags": ["c++", "qt4", "backport"], "comments": [{"owner": {"reputation": 420, "user_id": 7221943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SmgXq.png?s=128&g=1", "display_name": "sharyex", "link": "https://stackoverflow.com/users/7221943/sharyex"}, "edited": false, "score": 0, "creation_date": 1485378035, "post_id": 41860913, "comment_id": 70906816, "body": "Why use <code>Q_NULLPTR</code> at all and not <code>nullptr</code> in your application? Doesn&#39;t matter what version of Qt you use if you use a C++11 compiler."}, {"owner": {"reputation": 264, "user_id": 4805858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LE4t8.png?s=128&g=1", "display_name": "SlySven", "link": "https://stackoverflow.com/users/4805858/slysven"}, "reply_to_user": {"reputation": 420, "user_id": 7221943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SmgXq.png?s=128&g=1", "display_name": "sharyex", "link": "https://stackoverflow.com/users/7221943/sharyex"}, "edited": false, "score": 0, "creation_date": 1485386546, "post_id": 41860913, "comment_id": 70910716, "body": "I should perhaps rephrase it to say &quot;The FOSS application I am contributing to&quot; - we had started using Q_NULLPTR once we switched to Qt 5.x a couple of years ago - I was trying to find a way to get back to also being Qt4.x compatible and make as few changes as possible; and I am not convinced that the people using Qt4.x will be using a C++11 compiler (e.g. they may be on <code>gcc</code> 4.7 not 4.9)..."}], "answers": [{"comments": [{"owner": {"reputation": 264, "user_id": 4805858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LE4t8.png?s=128&g=1", "display_name": "SlySven", "link": "https://stackoverflow.com/users/4805858/slysven"}, "edited": false, "score": 0, "creation_date": 1485386384, "post_id": 41861740, "comment_id": 70910660, "body": "However Q_NULLPTR <b>is not present in <i>Qt4.x</i></b> hence my question - I think we were using a hard <code>0</code> in the past but I was not sure if that would be the best choice...!"}, {"owner": {"reputation": 2282, "user_id": 6646408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BakX.png?s=128&g=1", "display_name": "besc", "link": "https://stackoverflow.com/users/6646408/besc"}, "reply_to_user": {"reputation": 264, "user_id": 4805858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LE4t8.png?s=128&g=1", "display_name": "SlySven", "link": "https://stackoverflow.com/users/4805858/slysven"}, "edited": false, "score": 0, "creation_date": 1485459395, "post_id": 41861740, "comment_id": 70945244, "body": "Doesn\u2019t matter that Qt4 does not provide <code>Q_NULLPTR</code>. It\u2019s just a regular macro. There is no reason not to define it yourself when you build your own code against Qt4 builds, if you need the flexibility it provides."}, {"owner": {"reputation": 264, "user_id": 4805858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LE4t8.png?s=128&g=1", "display_name": "SlySven", "link": "https://stackoverflow.com/users/4805858/slysven"}, "edited": false, "score": 0, "creation_date": 1485476702, "post_id": 41861740, "comment_id": 70952981, "body": "Yeah, but <b>what</b> is the best thing to define it to in that case - that is what I thought I was asking! 8-)  I was hoping that Qt might still define <code>Q_COMPILER_NULLPTR</code> even in Qt 4 - but I guess I will have to take a look and see..."}, {"owner": {"reputation": 2282, "user_id": 6646408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BakX.png?s=128&g=1", "display_name": "besc", "link": "https://stackoverflow.com/users/6646408/besc"}, "reply_to_user": {"reputation": 264, "user_id": 4805858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LE4t8.png?s=128&g=1", "display_name": "SlySven", "link": "https://stackoverflow.com/users/4805858/slysven"}, "edited": false, "score": 0, "creation_date": 1485538198, "post_id": 41861740, "comment_id": 70981724, "body": "That\u2019s what I was trying to answer. :) Maybe that didn\u2019t come accross clearly enough. Amended my answer."}], "tags": [], "owner": {"reputation": 2282, "user_id": 6646408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6BakX.png?s=128&g=1", "display_name": "besc", "link": "https://stackoverflow.com/users/6646408/besc"}, "is_accepted": false, "score": 0, "last_activity_date": 1485538143, "last_edit_date": 1485538143, "creation_date": 1485378692, "answer_id": 41861740, "question_id": 41860913, "link": "https://stackoverflow.com/questions/41860913/replacement-for-q-nullptr-when-backporting-a-qt5-application-to-qt4/41861740#41861740", "title": "Replacement for Q_NULLPTR when backporting a Qt5 application to Qt4?", "body": "<p><code>Q_NULLPTR</code> is Qt\u2019s way to support both C++11 capable compilers as well as older C++98/03 ones. Do you actually need that level of sophistication? If not, then just use <code>NULL</code>, <code>0</code> or <code>nullptr</code> directly, depending on your compiler.</p>\n\n<p>Otherwise things get more complicated because you need to detect the currently active C++ version. See edit below.</p>\n\n<p>Of course you can always choose the easy way and use <code>NULL</code> or <code>0</code> which works in all versions of C++.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>To mimic Qt5\u2019s behaviour you could use this:</p>\n\n<pre><code>#if __cplusplus &gt;= 201103L\n    #define Q_NULLPTR nullptr\n#else\n    // not NULL to stay consistent with Qt\u2019s convention\n    #define Q_NULLPTR 0\n#endif\n</code></pre>\n\n<p>Including a header just to have access to <code>Q_NULLPTR</code> isn\u2019t terribly great, so you\u2019ll probably want to define that macro in a <em>.pro</em> file. However, I don\u2019t know how to detect the active C++ version with Qt4\u2019s QMake.</p>\n"}], "owner": {"reputation": 264, "user_id": 4805858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LE4t8.png?s=128&g=1", "display_name": "SlySven", "link": "https://stackoverflow.com/users/4805858/slysven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 514, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485538143, "creation_date": 1485375487, "last_edit_date": 1495540897, "question_id": 41860913, "link": "https://stackoverflow.com/questions/41860913/replacement-for-q-nullptr-when-backporting-a-qt5-application-to-qt4", "title": "Replacement for Q_NULLPTR when backporting a Qt5 application to Qt4?", "body": "<p>My application may be used on systems that are still defaulting to Qt4.x rather than Qt5.x and I was trying to do a \"quick and dirty\" port of a version that would compile/link and run with either major version of the libraries.  I was wondering what would be the <em>best</em> way to get around the absence of Q_NULLPTR in Qt4.x?  I saw the link mentioned in <a href=\"https://stackoverflow.com/a/36281426/4805858\">this</a> SO answer which indicated the definition as:</p>\n\n<pre><code>#ifdef Q_COMPILER_NULLPTR\n# define Q_NULLPTR         nullptr\n#else\n# define Q_NULLPTR         NULL\n#endif\n</code></pre>\n\n<p>So should I just use a:</p>\n\n<pre><code>contains(QT_MAJOR_VERSION, 4) {\nDEFINES += Q_NULLPTR=NULL\n}\n</code></pre>\n\n<p>in my <code>qmake</code> project file?</p>\n"}, {"tags": ["c++", "multithreading", "random", "mersenne-twister"], "comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1485375846, "post_id": 41860789, "comment_id": 70905668, "body": "I haven&#39;t had to deal with this before so I&#39;m not 100% sure on this, but I thought that the STL random libraries were not thread safe in terms of being called at the same time. (You can use one generator/distribution in multiple threads as long as you take care of the synchronization I believe). Also, another issue with seeding random number generators in a multi-threaded environment is that if you seed based on time, a lot of the time functions have course resolution so multiple threads calling the same thing at about the same time are likely to get the same result."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 6316584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ada26d494ed8e428dea7009cab04d7a?s=128&d=identicon&r=PG&f=1", "display_name": "g1368", "link": "https://stackoverflow.com/users/6316584/g1368"}, "edited": false, "score": 0, "creation_date": 1485377435, "post_id": 41861233, "comment_id": 70906524, "body": "I am using seeds with increments of 1. Each thread is called almost immediately after the other one. If the seed is a user input and does not depend on time, why do yo say &quot;runs the risk of duplicate sequences if a new simulation is run too quickly&quot;?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 29, "user_id": 6316584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ada26d494ed8e428dea7009cab04d7a?s=128&d=identicon&r=PG&f=1", "display_name": "g1368", "link": "https://stackoverflow.com/users/6316584/g1368"}, "edited": false, "score": 0, "creation_date": 1485377663, "post_id": 41861233, "comment_id": 70906644, "body": "@g1368 That refers to time based seeds."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 29, "user_id": 6316584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ada26d494ed8e428dea7009cab04d7a?s=128&d=identicon&r=PG&f=1", "display_name": "g1368", "link": "https://stackoverflow.com/users/6316584/g1368"}, "edited": false, "score": 0, "creation_date": 1485377846, "post_id": 41861233, "comment_id": 70906722, "body": "@g1368 Each thread needs its own copy of <code>_unif</code> (and any other data that is written to during the simulation)."}, {"owner": {"reputation": 29, "user_id": 6316584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ada26d494ed8e428dea7009cab04d7a?s=128&d=identicon&r=PG&f=1", "display_name": "g1368", "link": "https://stackoverflow.com/users/6316584/g1368"}, "edited": false, "score": 0, "creation_date": 1485378256, "post_id": 41861233, "comment_id": 70906919, "body": "I understand that using seed_sequence might be a better approach. But do yo have any idea why I get exact same results with different seeds with increment of 1? I expected this to work fine!"}, {"owner": {"reputation": 29, "user_id": 6316584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ada26d494ed8e428dea7009cab04d7a?s=128&d=identicon&r=PG&f=1", "display_name": "g1368", "link": "https://stackoverflow.com/users/6316584/g1368"}, "edited": false, "score": 0, "creation_date": 1485378376, "post_id": 41861233, "comment_id": 70906987, "body": "Doesn&#39;t this mean separated copy of _unif for each thread?        _unif(std::make_shared&lt;DrawUnif&gt;(*c._unif));       _unif-&gt;seed(a_new_seed);  The outputs of each thread is written to a separate file."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 0, "last_activity_date": 1485376644, "creation_date": 1485376644, "answer_id": 41861233, "question_id": 41860789, "link": "https://stackoverflow.com/questions/41860789/generating-random-numbers-with-mt19937-64-for-multithread-monte-carlo-simulation/41861233#41861233", "title": "Generating random numbers with mt19937_64 for multithread monte carlo simulation", "body": "<p>The random number support in the STL is not thread safe.  You could add that (at the expense of some run time performance), or go with separate random number generators for each thread.  Each thread's generator will need a distinct seed.  In its simplest form, this can be accomplished by incrementing the seed value for each new thread, but runs the risk of duplicate sequences if a new simulation is run too quickly.  You could also scale your existing seed value by an appropriate constant, then add the thread index to it.  Or you can look into <code>seed_sequence</code>s, and use the thread index or id as a secondary input into the sequence.</p>\n"}], "owner": {"reputation": 29, "user_id": 6316584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ada26d494ed8e428dea7009cab04d7a?s=128&d=identicon&r=PG&f=1", "display_name": "g1368", "link": "https://stackoverflow.com/users/6316584/g1368"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 643, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485376644, "creation_date": 1485375089, "last_edit_date": 1485375827, "question_id": 41860789, "link": "https://stackoverflow.com/questions/41860789/generating-random-numbers-with-mt19937-64-for-multithread-monte-carlo-simulation", "title": "Generating random numbers with mt19937_64 for multithread monte carlo simulation", "body": "<p>I am running a monte carlo simulation on multiple threads. I have a Draw class which handles random number generation. It uses mt19937-64 as the generator of  <code>std::uniform_real_distribution</code>.</p>\n\n<pre><code>template&lt;typename T, typename R&gt;\nclass Draw {\n    T _dist;\n    typedef decltype(_dist.min()) result_type;\n\n    public:\n    // Draw : T R -&gt; Draw\n    //! GIVEN\n    //!   1. dist - A distribution.\n    //!   2. gen - A random number generator.\n    Draw(T dist, R gen) : _dist(dist), _gen(gen) {}\n\n    virtual ~Draw() = default;\n\n    // () : -&gt; Value\n    //! GIVEN\n    //! RETURNS\n    //! value drawn from the distribution, which can be any result type\n    //!   supported by the distribution.\n    result_type operator()() const { return _draw(); }\n\n    // seed : NonNegInt -&gt; Void\n    //! GIVEN\n    //!   1. seed - A random number generator (RNG) seed.\n    //! EFFECT\n    //!   Seeds the RNG with the given seed.\n    void seed(unsigned long seed) { _gen.seed(seed);}\n\n    private:\n    R _gen;\n\n    // draw : -&gt; Value\n    // GIVEN:\n    // RETURNS: A value drawn from the distribution, which can be any result\n    //          type supported by the distribution.\n    std::function&lt;result_type()&gt; _draw = bind(_dist,_gen);\n};\n\n// standard uniform distribution ~ Unif(a=0, b=1)\nclass DrawUnif :\npublic Draw&lt;std::uniform_real_distribution&lt;double&gt;,std::mt19937_64&gt;\n{\n    typedef std::mt19937_64 genny;\n    typedef std::chrono::system_clock clk;\n    typedef std::uniform_real_distribution&lt;double&gt; dist;\n\n    public:\n    DrawUnif() :\n      Draw(dist{0,1}, genny(clk::now().time_since_epoch().count())) {}\n\n    //! GIVEN\n    //! -----\n    //!   1. seed - A seed for the random number generator.\n    DrawUnif(unsigned long seed) : Draw(dist{0,1}, genny(seed)) {}\n\n     virtual ~DrawUnif() = default;\n};\n</code></pre>\n\n<p>Each thread has access to the following shared pointer</p>\n\n<pre><code>  typedef std::shared_ptr&lt;DrawUnif&gt; DrawUnifShrPtr;\n  DrawUnifShrPtr    _unif;\n</code></pre>\n\n<p>Which is initialized by</p>\n\n<pre><code>_unif(DrawUnifShrPtr(new DrawUnif { seed }));\n</code></pre>\n\n<p>Each thread has several functions which frequently call <code>draw(*_unif)</code> to generate a random number. The results seem correct but I am wondering if two threads call </p>\n\n<pre><code>draw(*_unif) \n</code></pre>\n\n<p>at the same time, what would happen?</p>\n\n<p>Then I allocated a new shared_pointer with different seed to each cohort:</p>\n\n<pre><code> _unif(std::make_shared&lt;DrawUnif&gt;(*c._unif));\n _unif-&gt;seed(a_new_seed);\n</code></pre>\n\n<p>Now the results look wiered! Each thread is getting exact same random!! numbers and provide exact same result. \nTo summarize:</p>\n\n<p>1- What would happen if multiple treads call the draw at the same time?</p>\n\n<p>2- Why different seeds get exact same results.</p>\n"}, {"tags": ["c++", "opengl", "linear-algebra", "glut", "bezier"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1485375548, "post_id": 41860785, "comment_id": 70905504, "body": "What are you trying to do? There is not vector constructor that takes two integers? Are you trying to initialize the <code>vector&lt;vector&lt;T&gt;&gt;</code> as a 2-dimensional array?"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1485375999, "post_id": 41860785, "comment_id": 70905747, "body": "Since I just noticed that this is code from another question, I wrote a comment to this answer to inform the original author."}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1485379482, "post_id": 41860785, "comment_id": 70907599, "body": "Fixed up the code in my original answer, sorry for the confusion."}], "owner": {"reputation": 11, "user_id": 5050815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1b920ee1a366ab7ed1df82850bee2?s=128&d=identicon&r=PG", "display_name": "richard_ba", "link": "https://stackoverflow.com/users/5050815/richard-ba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485375072, "creation_date": 1485375072, "last_edit_date": 1495541342, "question_id": 41860785, "link": "https://stackoverflow.com/questions/41860785/opengl-rotate-a-curve-about-y-axis-non-working-code", "title": "OpenGL rotate a curve about y-axis, non working code", "body": "<p>I have the following code from <a href=\"https://stackoverflow.com/users/44729/genpfault\">genpfault</a> answer on <a href=\"https://stackoverflow.com/questions/7904281/opengl-rotate-a-curve-about-the-y-axis\">OpenGL - Rotate a &#39;Curve&#39; About the Y-Axis</a>, </p>\n\n<pre><code>#include &lt;GL/glut.h&gt;\n#include &lt;glm/glm.hpp&gt;\n#include &lt;vector&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\nusing namespace glm;\n\nstruct Vertex\n{\n    Vertex( const vec3&amp; position, const vec3&amp; normal )\n        : position( position )\n        , normal( normal ) \n    {}\n    vec3 position;\n    vec3 normal;\n};\n\n// spin the pts array around the Z axis.\n// pts.x will become the radius, and pts.y will become the height\n// pts should be sorted by y-coordinate\nvector&lt; Vertex &gt; Lathe( const vector&lt; vec2 &gt;&amp; pts, unsigned int segments = 32 )\n{\n    // precalculate circle points\n    vector&lt; vec2 &gt; circlePts;\n    for( unsigned int i = 0; i &lt;= segments; ++i )\n    {\n        float angle = ( i / (float)segments ) * 3.14159f * 2.0f;\n        circlePts.push_back( vec2( cos( angle ), sin( angle ) ) );\n    }\n\n    // fill each layer\n    typedef vector&lt; vec3 &gt; Layer;\n    typedef vector&lt; Layer &gt; Layers;\n    Layers layers( pts.size(), circlePts.size() );\n    for( size_t i = 0; i &lt; pts.size(); ++i )\n    {\n        for( unsigned int j = 0; j &lt; circlePts.size(); ++j )\n        {\n            layers[i][j] = vec3( circlePts[j] * pts[i].x, pts[i].y );\n        }\n    }\n\n    // move through layers generating triangles\n    vector&lt; Vertex &gt; verts;\n    for( size_t i = 1; i &lt; layers.size(); ++i )\n    {\n        const Layer&amp; prvLayer = layers[ i-1 ];\n        const Layer&amp; curLayer = layers[ i-0 ];\n        for( size_t j = 1; j &lt; circlePts.size(); ++j )\n        {\n            //    upper = cur layer\n            //        UL -- UR  \n            // left   | 0 /  |  right \n            // = j-1  |  / 1 |  = j-0\n            //        LL -- LR  \n            //    lower = prv layer\n            const vec3&amp; LL = prvLayer[ j-1 ]; // lower-left\n            const vec3&amp; LR = prvLayer[ j-0 ]; // lower-right\n            const vec3&amp; UL = curLayer[ j-1 ]; // upper-left\n            const vec3&amp; UR = curLayer[ j-0 ]; // upper-right\n\n            // triangle0: LL -&gt; UR -&gt; UL\n            const vec3 normal0 = normalize( cross( UR - LL, UL - LL ) );\n            verts.push_back( Vertex( LL, normal0 ) );\n            verts.push_back( Vertex( UR, normal0 ) );\n            verts.push_back( Vertex( UL, normal0 ) );\n\n            // triangle1: LL -&gt; LR -&gt; UR\n            const vec3 normal1 = normalize( cross( LR - LL, UL - LL ) );\n            verts.push_back( Vertex( LL, normal1 ) );\n            verts.push_back( Vertex( LR, normal1 ) );\n            verts.push_back( Vertex( UR, normal1 ) );\n        }\n    }\n\n    return verts;\n}\n\n// mouse state\nint btn;\nivec2 startMouse;\nivec2 startRot, curRot;\n\nvoid mouse(int button, int state, int x, int y )\n{\n    if( button == GLUT_LEFT_BUTTON &amp;&amp; state == GLUT_DOWN )\n    {\n        btn = button;\n        startMouse = ivec2( x, glutGet( GLUT_WINDOW_HEIGHT ) - y );\n        startRot = curRot;\n    }\n}\n\nvoid motion( int x, int y )\n{\n    ivec2 curMouse( x, glutGet( GLUT_WINDOW_HEIGHT ) - y );\n    if( btn == GLUT_LEFT_BUTTON )\n    {\n        curRot = startRot + ( curMouse - startMouse );\n    }\n    glutPostRedisplay();\n}\n\nvector&lt; Vertex &gt; model;\nvoid display()\n{\n    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );\n\n    glMatrixMode( GL_PROJECTION );\n    glLoadIdentity();\n    double w = glutGet( GLUT_WINDOW_WIDTH );\n    double h = glutGet( GLUT_WINDOW_HEIGHT );\n    double ar = w / h;\n    gluPerspective( 60, ar, 0.1, 40 );\n\n    glMatrixMode( GL_MODELVIEW );\n    glLoadIdentity();\n    glTranslatef( 0, 0, -10 );\n\n    glPushMatrix();\n    glRotatef( curRot.x % 360, 0, 1, 0 );\n    glRotatef( -curRot.y % 360, 1, 0, 0 );\n\n    // draw model\n    if( !model.empty() )\n    {\n        glColor3ub( 255, 0, 0 );\n        glEnableClientState( GL_VERTEX_ARRAY );\n        glEnableClientState( GL_NORMAL_ARRAY );\n        glVertexPointer( 3, GL_FLOAT, sizeof(Vertex), &amp;model[0].position );\n        glNormalPointer( GL_FLOAT, sizeof(Vertex), &amp;model[0].normal );\n        glDrawArrays( GL_TRIANGLES, 0, model.size() );\n        glDisableClientState( GL_VERTEX_ARRAY );\n        glDisableClientState( GL_NORMAL_ARRAY );\n    }\n\n    // draw bounding cube\n    glDisable( GL_LIGHTING );\n    glColor3ub( 255, 255, 255 );\n    glutWireCube( 7 );\n    glEnable( GL_LIGHTING );\n\n    glPopMatrix();\n\n    glutSwapBuffers();\n}\n\nint main( int argc, char **argv )\n{\n    vector&lt; vec2 &gt; pts;\n    pts.push_back( vec2( 0.1, -3 ) );\n    pts.push_back( vec2( 2, -2 ) );\n    pts.push_back( vec2( 3, -1 ) );\n    pts.push_back( vec2( 1, 0 ) );\n    pts.push_back( vec2( 3, 1 ) );\n    pts.push_back( vec2( 4, 2 ) );\n    pts.push_back( vec2( 4, 3 ) );\n    model = Lathe( pts );\n\n    glutInit( &amp;argc, argv );\n    glutInitDisplayMode( GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE );\n    glutInitWindowSize( 640, 480 );\n    glutCreateWindow( \"GLUT\" );\n    glutDisplayFunc( display );\n    glutMouseFunc( mouse );\n    glutMotionFunc( motion );\n\n    glEnable( GL_DEPTH_TEST );\n\n    // set up lighting\n    glShadeModel( GL_SMOOTH );\n    glEnable( GL_COLOR_MATERIAL );\n    glColorMaterial( GL_FRONT_AND_BACK, GL_AMBIENT_AND_DIFFUSE ) ;\n    glLightModeli( GL_LIGHT_MODEL_TWO_SIDE, GL_TRUE );\n    glEnable( GL_LIGHTING );\n\n    // set up \"headlamp\"-like light\n    glEnable( GL_LIGHT0 );\n    glMatrixMode( GL_MODELVIEW );\n    glLoadIdentity();\n    GLfloat position[] = { 0, 0, 1, 0 };\n    glLightfv( GL_LIGHT0, GL_POSITION, position );\n\n    glPolygonMode( GL_FRONT, GL_FILL );\n    glPolygonMode( GL_BACK, GL_LINE );\n\n    glutMainLoop();\n    return 0;\n}\n</code></pre>\n\n<p>as I'm trying to rotate a curve around the y axis using opengl, however the code is not working, </p>\n\n<pre><code>typedef vector&lt; vec3 &gt; Layer;\ntypedef vector&lt; Layer &gt; Layers;\nLayers layers( pts.size(), circlePts.size() );\n</code></pre>\n\n<p>this part of the code gives the following error</p>\n\n<pre><code>||=== Build: Release in SurfaceRotation (compiler: GNU GCC Compiler) ===|\nc:\\mingw\\lib\\gcc\\mingw32\\4.9.3\\include\\c++\\bits\\stl_vector.h||In instantiation of 'void std::vector&lt;_Tp, _Alloc&gt;::_M_initialize_dispatch(_Integer, _Integer, std::__true_type) [with _Integer = unsigned int; _Tp = std::vector&lt;glm::tvec3&lt;float, (glm::precision)0u&gt; &gt;; _Alloc = std::allocator&lt;std::vector&lt;glm::tvec3&lt;float, (glm::precision)0u&gt; &gt; &gt;]':|\nc:\\mingw\\lib\\gcc\\mingw32\\4.9.3\\include\\c++\\bits\\stl_vector.h|413|required from 'std::vector&lt;_Tp, _Alloc&gt;::vector(_InputIterator, _InputIterator, const allocator_type&amp;) [with _InputIterator = unsigned int; _Tp = std::vector&lt;glm::tvec3&lt;float, (glm::precision)0u&gt; &gt;; _Alloc = std::allocator&lt;std::vector&lt;glm::tvec3&lt;float, (glm::precision)0u&gt; &gt; &gt;; std::vector&lt;_Tp, _Alloc&gt;::allocator_type = std::allocator&lt;std::vector&lt;glm::tvec3&lt;float, (glm::precision)0u&gt; &gt; &gt;]'|\nC:\\Users\\richardba\\workspace\\SurfaceRotation\\main.cpp|35|required from here|\nc:\\mingw\\lib\\gcc\\mingw32\\4.9.3\\include\\c++\\bits\\stl_vector.h|1252|error: no matching function for call to 'std::vector&lt;std::vector&lt;glm::tvec3&lt;float, (glm::precision)0u&gt; &gt; &gt;::_M_fill_initialize(unsigned int, unsigned int&amp;)'|\nc:\\mingw\\lib\\gcc\\mingw32\\4.9.3\\include\\c++\\bits\\stl_vector.h|1252|note: candidate is:|\nc:\\mingw\\lib\\gcc\\mingw32\\4.9.3\\include\\c++\\bits\\stl_vector.h|1298|note: void std::vector&lt;_Tp, _Alloc&gt;::_M_fill_initialize(std::vector&lt;_Tp, _Alloc&gt;::size_type, const value_type&amp;) [with _Tp = std::vector&lt;glm::tvec3&lt;float, (glm::precision)0u&gt; &gt;; _Alloc = std::allocator&lt;std::vector&lt;glm::tvec3&lt;float, (glm::precision)0u&gt; &gt; &gt;; std::vector&lt;_Tp, _Alloc&gt;::size_type = unsigned int; std::vector&lt;_Tp, _Alloc&gt;::value_type = std::vector&lt;glm::tvec3&lt;float, (glm::precision)0u&gt; &gt;]|\nc:\\mingw\\lib\\gcc\\mingw32\\4.9.3\\include\\c++\\bits\\stl_vector.h|1298|note:   no known conversion for argument 2 from 'unsigned int' to 'const value_type&amp; {aka const std::vector&lt;glm::tvec3&lt;float, (glm::precision)0u&gt; &gt;&amp;}'|\n||=== Build failed: 1 error(s), 3 warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1485377025, "post_id": 41860769, "comment_id": 70906321, "body": "When you create the project put a path that is in the documents folder"}, {"owner": {"reputation": 9, "user_id": 7469339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIrt9.jpg?s=128&g=1", "display_name": "Mahbuba tasmin", "link": "https://stackoverflow.com/users/7469339/mahbuba-tasmin"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1485440940, "post_id": 41860769, "comment_id": 70933083, "body": "I uninstalled my antivirus and now it&#39;s working fine.  But I guess I  obviusly need an antivirus and not sure how to adjust it with qt."}], "owner": {"reputation": 9, "user_id": 7469339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIrt9.jpg?s=128&g=1", "display_name": "Mahbuba tasmin", "link": "https://stackoverflow.com/users/7469339/mahbuba-tasmin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485376961, "creation_date": 1485375015, "last_edit_date": 1485376961, "question_id": 41860769, "link": "https://stackoverflow.com/questions/41860769/cannot-open-output-file-in-qt-creator", "title": "cannot open output file in qt creator", "body": "<p><img src=\"https://i.stack.imgur.com/5afiJ.png\" alt=\"compiler continues to show the error message\"></p>\n\n<p>I tried re installing JDK 1.8 and qt itself, but the error is not removing and neither there is any output.I also tried through disabling anti virus, but all the efforts went in vain.Can anybody suggest me a good solution to this problem ?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1485375041, "post_id": 41860768, "comment_id": 70905226, "body": "simplicity, why else?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1485375172, "post_id": 41860768, "comment_id": 70905299, "body": "sign of bad design, algos should be implemented based on each other, not by generating plenty for every sneeze."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 5, "creation_date": 1485375288, "post_id": 41860768, "comment_id": 70905362, "body": "<code>copy_if</code> is actually the reverse of <code>remove_copy_if</code>, which was introduced first: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2666.pdf\" rel=\"nofollow noreferrer\">the proposal where <code>copy_if</code> was introduced</a> explains the reasons for its addition to the library <i>on top of</i> <code>remove_copy_if</code>. Pretty much, <code>copy_if</code> was introduced to remove the double negative in <code>remove_copy_if(first, last, not(pred))</code>."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 2, "creation_date": 1485375370, "post_id": 41860768, "comment_id": 70905403, "body": "Note that <code>std::not1</code> is deprecated in C++17 and requires its argument to have some extra stuff in it (<code>argument_type</code>). However, the question can stand with <code>std::not_fn</code>."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1485377027, "post_id": 41860768, "comment_id": 70906324, "body": "I think <a href=\"https://martinfowler.com/bliki/FunctionLength.html\" rel=\"nofollow noreferrer\">Martin Fowlers piece on function lengths</a> is informative. Even if <code>copy_if</code> is simply implemented as <code>remove_copy_if(it1, it2, not1(pred));</code> or vice-versa it would still be valuable to have both because the function name better reveals the intention. There&#39;s less cognitive effort spent understanding what the code does."}], "answers": [{"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 4, "last_activity_date": 1485376097, "creation_date": 1485376097, "answer_id": 41861078, "question_id": 41860768, "link": "https://stackoverflow.com/questions/41860768/why-do-we-need-remove-copy-if/41861078#41861078", "title": "why do we need remove_copy_if?", "body": "<p>Just so you're aware of the history, the better question would be, <strong>Why do we need <code>copy_if</code>?</strong></p>\n\n<p>If you look, <a href=\"http://www.cplusplus.com/reference/algorithm/remove_copy_if/?kw=remove_copy_if\" rel=\"nofollow noreferrer\"><code>remove_copy_if</code></a> was around before <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a>, while <a href=\"http://www.cplusplus.com/reference/algorithm/copy_if/?kw=copy_if\" rel=\"nofollow noreferrer\"><code>copy_if</code></a> made it's debut in <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a>.</p>\n\n<p>You are correct that an inversion of the functor result is all that separates these 2, but the positive is far more understandable, thus <code>copy_if</code> was introduced. To quote from <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2666.pdf\" rel=\"nofollow noreferrer\">JaggedSpire's link</a>:</p>\n\n<blockquote>\n  <p>This is a frequently requested addition, mentioned in (for example) the latest edition of The C++ Programming Language. It is formally redundant, since it's just the inverse of <code>remove_copy_if</code>: copying all elements that satisfy a predicate p is just the same as not copying all elements that satisfy <code>!p</code>. It's worth adding anyway. First, C++ isn't really a functional language and transforming a predicate into its negation is sometimes awkward.\n  Second, the workaround of using double negatives is not unconfusing.</p>\n</blockquote>\n"}], "owner": {"reputation": 8551, "user_id": 440403, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1f6698434e6b31de0de985726bb87364?s=128&d=identicon&r=PG", "display_name": "camino", "link": "https://stackoverflow.com/users/440403/camino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 1, "accepted_answer_id": 41861078, "answer_count": 1, "score": 1, "last_activity_date": 1485376705, "creation_date": 1485375015, "question_id": 41860768, "link": "https://stackoverflow.com/questions/41860768/why-do-we-need-remove-copy-if", "title": "why do we need remove_copy_if?", "body": "<p>according the code in <a href=\"http://www.cplusplus.com\" rel=\"nofollow noreferrer\">http://www.cplusplus.com</a></p>\n\n<pre><code>template &lt;class InputIterator, class OutputIterator, class UnaryPredicate&gt;\n  OutputIterator remove_copy_if (InputIterator first, InputIterator last,\n                                 OutputIterator result, UnaryPredicate pred)\n{\n  while (first!=last) {\n    if (!pred(*first)) {\n      *result = *first;\n      ++result;\n    }\n    ++first;\n  }\n  return result;\n}\n\ntemplate &lt;class InputIterator, class OutputIterator, class UnaryPredicate&gt;\n  OutputIterator copy_if (InputIterator first, InputIterator last,\n                          OutputIterator result, UnaryPredicate pred)\n{\n  while (first!=last) {\n    if (pred(*first)) {\n      *result = *first;\n      ++result;\n    }\n    ++first;\n  }\n  return result;\n}\n</code></pre>\n\n<p>the only difference is</p>\n\n<pre><code> if (!pred(*first)) //copy if is if (pred(*first)) {\n</code></pre>\n\n<p>remove_copy_if can be simulated using</p>\n\n<pre><code>copy_if(it1, it2, not1(pred));\n</code></pre>\n\n<p>so why do we need remove_copy_if?</p>\n"}, {"tags": ["c++", "c++11", "dictionary", "struct"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1485375036, "post_id": 41860751, "comment_id": 70905224, "body": "That explosion would be helpful, because inside of it, there&#39;s an error about trying to compare two <code>Node</code>s using &lt;."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1485375054, "post_id": 41860751, "comment_id": 70905233, "body": "Your Node, the key, will need an operator&lt; for ordering.  std::map requires it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1485375224, "post_id": 41860751, "comment_id": 70905331, "body": "Why do you need the Node struct? It has no behaviour and it simply seems to be a redundant wrapper for an int."}, {"owner": {"reputation": 73, "user_id": 4749760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/923b53f103d10fc2b2f85a2366e37ffe?s=128&d=identicon&r=PG&f=1", "display_name": "ILoveCliques", "link": "https://stackoverflow.com/users/4749760/ilovecliques"}, "edited": false, "score": 0, "creation_date": 1485375341, "post_id": 41860751, "comment_id": 70905389, "body": "@NeilButterworth I&#39;m going to flesh it out later, this is temporary for testing and understanding how to use maps in the specified manner."}, {"owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 1, "creation_date": 1485377774, "post_id": 41860751, "comment_id": 70906687, "body": "You don&#39;t need the if-statement in <code>Graph::add_neighbor()</code>, you can just unconditionally do <code>edge_map[cur_node].push_back(new_node)</code>."}, {"owner": {"reputation": 73, "user_id": 4749760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/923b53f103d10fc2b2f85a2366e37ffe?s=128&d=identicon&r=PG&f=1", "display_name": "ILoveCliques", "link": "https://stackoverflow.com/users/4749760/ilovecliques"}, "reply_to_user": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1485445822, "post_id": 41860751, "comment_id": 70936842, "body": "@G.Sliepen good eye, thank you"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 4749760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/923b53f103d10fc2b2f85a2366e37ffe?s=128&d=identicon&r=PG&f=1", "display_name": "ILoveCliques", "link": "https://stackoverflow.com/users/4749760/ilovecliques"}, "edited": false, "score": 0, "creation_date": 1485375442, "post_id": 41860815, "comment_id": 70905449, "body": "Would this be best served going in the .h file, or can it live in the .cpp? Also, this is overloading the operator, right? I&#39;m a bit new to C++."}, {"owner": {"reputation": 73, "user_id": 4749760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/923b53f103d10fc2b2f85a2366e37ffe?s=128&d=identicon&r=PG&f=1", "display_name": "ILoveCliques", "link": "https://stackoverflow.com/users/4749760/ilovecliques"}, "edited": false, "score": 0, "creation_date": 1485375840, "post_id": 41860815, "comment_id": 70905661, "body": "Nevermind, I&#39;ve discovered that the .h causes an issue. If you have a moment, could you explain why that&#39;s a bad idea?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 73, "user_id": 4749760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/923b53f103d10fc2b2f85a2366e37ffe?s=128&d=identicon&r=PG&f=1", "display_name": "ILoveCliques", "link": "https://stackoverflow.com/users/4749760/ilovecliques"}, "edited": false, "score": 0, "creation_date": 1485375989, "post_id": 41860815, "comment_id": 70905738, "body": "@ILove Define the function as inline. And in future say what issue."}, {"owner": {"reputation": 14998, "user_id": 212378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/185aae2d842026d2eefa7528b00b394b?s=128&d=identicon&r=PG", "display_name": "Alexis Wilke", "link": "https://stackoverflow.com/users/212378/alexis-wilke"}, "reply_to_user": {"reputation": 73, "user_id": 4749760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/923b53f103d10fc2b2f85a2366e37ffe?s=128&d=identicon&r=PG&f=1", "display_name": "ILoveCliques", "link": "https://stackoverflow.com/users/4749760/ilovecliques"}, "edited": false, "score": 0, "creation_date": 1485392128, "post_id": 41860815, "comment_id": 70912225, "body": "@ILoveCliques If the operator overload function is defined within the class it will automatically be <code>inline</code> and that causes no problem in terms of functionality. If defined there, though, the compiler may be able to better optimize. However, <code>inline</code> also means the code of the operator cannot be changed unless you are to re-compile everything (this is important only if you offer a library that others may end up using.)"}], "tags": [], "owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "is_accepted": true, "score": 2, "last_activity_date": 1485375185, "creation_date": 1485375185, "answer_id": 41860815, "question_id": 41860751, "link": "https://stackoverflow.com/questions/41860751/how-to-add-struct-vector-of-struct-to-map-within-class/41860815#41860815", "title": "How to add struct, vector of struct to map within class", "body": "<p>In order for std::map to order it's entrys, it requires an operator&lt;.</p>\n\n<p>In your case, it can be as simple as this:</p>\n\n<pre><code>bool operator&lt;(const Node &amp; left, const Node &amp; right)\n{\n  return left.data &lt; right.data;\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4749760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/923b53f103d10fc2b2f85a2366e37ffe?s=128&d=identicon&r=PG&f=1", "display_name": "ILoveCliques", "link": "https://stackoverflow.com/users/4749760/ilovecliques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 41860815, "answer_count": 1, "score": 1, "last_activity_date": 1485375280, "creation_date": 1485374969, "last_edit_date": 1485375280, "question_id": 41860751, "link": "https://stackoverflow.com/questions/41860751/how-to-add-struct-vector-of-struct-to-map-within-class", "title": "How to add struct, vector of struct to map within class", "body": "<p>My issue is in the following .h: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;vector&gt;\n\nstruct Node {\n    int data;\n};\n\nclass Graph {\n\nstd::map&lt; Node, std::vector&lt;Node&gt; &gt; edge_map;\n\npublic:\n    Graph();\n\n    void add_neighbor(Node cur_node, Node new_node);\n\n    void remove_neighbor(Node cur_node, Node del_node);\n\n    virtual ~Graph();\n};\n</code></pre>\n\n<p>and in trying to implement the add_neighbor function, but I'm fumbling through the details and need some direction. What I've got so far (not functional) is the following: </p>\n\n<pre><code>void Graph::add_neighbor(Node cur_node, Node new_node) {\n    if (edge_map.find(cur_node) == edge_map.end()) {\n        edge_map.insert(std::pair&lt;Node, std::vector&lt;Node&gt; &gt;(cur_node, std::vector&lt;Node&gt;()));\n        edge_map[cur_node].push_back(new_node);\n    }\n    else {\n        edge_map[cur_node].push_back(new_node);\n    }\n}\n</code></pre>\n\n<p>I can copy the explosion that g++ -std=c++11 throws at me, but it's not very helpful. How can I include a map as a class member where the key, value are struct, vector of struct, and then have a function in the .cpp that can add it? I'll also need the remove function, but once I understand how to treat the data in the insertion function I'll know what I need, I think.</p>\n\n<p>EDIT (including the compiler vomit):</p>\n\n<pre><code>In file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h: In instantiation of \u2018bool std::less&lt;_Tp&gt;::operator()(const _Tp&amp;, const _Tp&amp;) const [with _Tp = Node]\u2019:\n/usr/include/c++/4.8/bits/stl_map.h:463:31:   required from \u2018std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;::mapped_type&amp; std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;::operator[](const key_type&amp;) [with _Key = Node; _Tp = std::vector&lt;Node&gt;; _Compare = std::less&lt;Node&gt;; _Alloc = std::allocator&lt;std::pair&lt;const Node, std::vector&lt;Node&gt; &gt; &gt;; std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;::mapped_type = std::vector&lt;Node&gt;; std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;::key_type = Node]\u2019\ngraph.cpp:14:26:   required from here\n/usr/include/c++/4.8/bits/stl_function.h:235:20: error: no match for \u2018operator&lt;\u2019 (operand types are \u2018const Node\u2019 and \u2018const Node\u2019)\n       { return __x &lt; __y; }\n                    ^\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note: candidates are:\nIn file included from /usr/include/c++/4.8/bits/stl_algobase.h:64:0,\n                 from /usr/include/c++/4.8/bits/char_traits.h:39,\n                 from /usr/include/c++/4.8/ios:40,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_pair.h:220:5: note: template&lt;class _T1, class _T2&gt; constexpr bool std::operator&lt;(const std::pair&lt;_T1, _T2&gt;&amp;, const std::pair&lt;_T1, _T2&gt;&amp;)\n     operator&lt;(const pair&lt;_T1, _T2&gt;&amp; __x, const pair&lt;_T1, _T2&gt;&amp; __y)\n     ^\n/usr/include/c++/4.8/bits/stl_pair.h:220:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note:   \u2018const Node\u2019 is not derived from \u2018const std::pair&lt;_T1, _T2&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/4.8/bits/stl_algobase.h:67:0,\n                 from /usr/include/c++/4.8/bits/char_traits.h:39,\n                 from /usr/include/c++/4.8/ios:40,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_iterator.h:297:5: note: template&lt;class _Iterator&gt; bool std::operator&lt;(const std::reverse_iterator&lt;_Iterator&gt;&amp;, const std::reverse_iterator&lt;_Iterator&gt;&amp;)\n     operator&lt;(const reverse_iterator&lt;_Iterator&gt;&amp; __x,\n     ^\n/usr/include/c++/4.8/bits/stl_iterator.h:297:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note:   \u2018const Node\u2019 is not derived from \u2018const std::reverse_iterator&lt;_Iterator&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/4.8/bits/stl_algobase.h:67:0,\n                 from /usr/include/c++/4.8/bits/char_traits.h:39,\n                 from /usr/include/c++/4.8/ios:40,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_iterator.h:347:5: note: template&lt;class _IteratorL, class _IteratorR&gt; bool std::operator&lt;(const std::reverse_iterator&lt;_Iterator&gt;&amp;, const std::reverse_iterator&lt;_IteratorR&gt;&amp;)\n     operator&lt;(const reverse_iterator&lt;_IteratorL&gt;&amp; __x,\n     ^\n/usr/include/c++/4.8/bits/stl_iterator.h:347:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note:   \u2018const Node\u2019 is not derived from \u2018const std::reverse_iterator&lt;_Iterator&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/4.8/bits/stl_algobase.h:67:0,\n                 from /usr/include/c++/4.8/bits/char_traits.h:39,\n                 from /usr/include/c++/4.8/ios:40,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_iterator.h:1055:5: note: template&lt;class _IteratorL, class _IteratorR&gt; bool std::operator&lt;(const std::move_iterator&lt;_Iterator&gt;&amp;, const std::move_iterator&lt;_IteratorR&gt;&amp;)\n     operator&lt;(const move_iterator&lt;_IteratorL&gt;&amp; __x,\n     ^\n/usr/include/c++/4.8/bits/stl_iterator.h:1055:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note:   \u2018const Node\u2019 is not derived from \u2018const std::move_iterator&lt;_Iterator&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/4.8/bits/stl_algobase.h:67:0,\n                 from /usr/include/c++/4.8/bits/char_traits.h:39,\n                 from /usr/include/c++/4.8/ios:40,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_iterator.h:1061:5: note: template&lt;class _Iterator&gt; bool std::operator&lt;(const std::move_iterator&lt;_Iterator&gt;&amp;, const std::move_iterator&lt;_Iterator&gt;&amp;)\n     operator&lt;(const move_iterator&lt;_Iterator&gt;&amp; __x,\n     ^\n/usr/include/c++/4.8/bits/stl_iterator.h:1061:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note:   \u2018const Node\u2019 is not derived from \u2018const std::move_iterator&lt;_Iterator&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/4.8/string:52:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/basic_string.h:2569:5: note: template&lt;class _CharT, class _Traits, class _Alloc&gt; bool std::operator&lt;(const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;, const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;)\n     operator&lt;(const basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; __lhs,\n     ^\n/usr/include/c++/4.8/bits/basic_string.h:2569:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note:   \u2018const Node\u2019 is not derived from \u2018const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/4.8/string:52:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/basic_string.h:2581:5: note: template&lt;class _CharT, class _Traits, class _Alloc&gt; bool std::operator&lt;(const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;, const _CharT*)\n     operator&lt;(const basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; __lhs,\n     ^\n/usr/include/c++/4.8/bits/basic_string.h:2581:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note:   \u2018const Node\u2019 is not derived from \u2018const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/4.8/string:52:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/basic_string.h:2593:5: note: template&lt;class _CharT, class _Traits, class _Alloc&gt; bool std::operator&lt;(const _CharT*, const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;)\n     operator&lt;(const _CharT* __lhs,\n     ^\n/usr/include/c++/4.8/bits/basic_string.h:2593:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note:   mismatched types \u2018const _CharT*\u2019 and \u2018Node\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/4.8/vector:64:0,\n                 from graph.cpp:2:\n/usr/include/c++/4.8/bits/stl_vector.h:1421:5: note: template&lt;class _Tp, class _Alloc&gt; bool std::operator&lt;(const std::vector&lt;_Tp, _Alloc&gt;&amp;, const std::vector&lt;_Tp, _Alloc&gt;&amp;)\n     operator&lt;(const vector&lt;_Tp, _Alloc&gt;&amp; __x, const vector&lt;_Tp, _Alloc&gt;&amp; __y)\n     ^\n/usr/include/c++/4.8/bits/stl_vector.h:1421:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note:   \u2018const Node\u2019 is not derived from \u2018const std::vector&lt;_Tp, _Alloc&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/4.8/tuple:39:0,\n                 from /usr/include/c++/4.8/functional:55,\n                 from /usr/include/c++/4.8/bits/stl_algo.h:66,\n                 from /usr/include/c++/4.8/algorithm:62,\n                 from graph.cpp:3:\n/usr/include/c++/4.8/array:238:5: note: template&lt;class _Tp, long unsigned int _Nm&gt; bool std::operator&lt;(const std::array&lt;_Tp, _Nm&gt;&amp;, const std::array&lt;_Tp, _Nm&gt;&amp;)\n     operator&lt;(const array&lt;_Tp, _Nm&gt;&amp; __a, const array&lt;_Tp, _Nm&gt;&amp; __b)\n     ^\n/usr/include/c++/4.8/array:238:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note:   \u2018const Node\u2019 is not derived from \u2018const std::array&lt;_Tp, _Nm&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/4.8/functional:55:0,\n                 from /usr/include/c++/4.8/bits/stl_algo.h:66,\n                 from /usr/include/c++/4.8/algorithm:62,\n                 from graph.cpp:3:\n/usr/include/c++/4.8/tuple:824:5: note: template&lt;class ... _TElements, class ... _UElements&gt; constexpr bool std::operator&lt;(const std::tuple&lt;_Elements ...&gt;&amp;, const std::tuple&lt;_Elements ...&gt;&amp;)\n     operator&lt;(const tuple&lt;_TElements...&gt;&amp; __t,\n     ^\n/usr/include/c++/4.8/tuple:824:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note:   \u2018const Node\u2019 is not derived from \u2018const std::tuple&lt;_Elements ...&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/4.8/map:60:0,\n                 from graph.h:2,\n                 from graph.cpp:4:\n/usr/include/c++/4.8/bits/stl_tree.h:917:5: note: template&lt;class _Key, class _Val, class _KeyOfValue, class _Compare, class _Alloc&gt; bool std::operator&lt;(const std::_Rb_tree&lt;_Key, _Val, _KeyOfValue, _Compare, _Alloc&gt;&amp;, const std::_Rb_tree&lt;_Key, _Val, _KeyOfValue, _Compare, _Alloc&gt;&amp;)\n     operator&lt;(const _Rb_tree&lt;_Key, _Val, _KeyOfValue, _Compare, _Alloc&gt;&amp; __x,\n     ^\n/usr/include/c++/4.8/bits/stl_tree.h:917:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note:   \u2018const Node\u2019 is not derived from \u2018const std::_Rb_tree&lt;_Key, _Val, _KeyOfValue, _Compare, _Alloc&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/4.8/map:61:0,\n                 from graph.h:2,\n                 from graph.cpp:4:\n/usr/include/c++/4.8/bits/stl_map.h:979:5: note: template&lt;class _Key, class _Tp, class _Compare, class _Alloc&gt; bool std::operator&lt;(const std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;&amp;, const std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;&amp;)\n     operator&lt;(const map&lt;_Key, _Tp, _Compare, _Alloc&gt;&amp; __x,\n     ^\n/usr/include/c++/4.8/bits/stl_map.h:979:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note:   \u2018const Node\u2019 is not derived from \u2018const std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\nIn file included from /usr/include/c++/4.8/map:62:0,\n                 from graph.h:2,\n                 from graph.cpp:4:\n/usr/include/c++/4.8/bits/stl_multimap.h:881:5: note: template&lt;class _Key, class _Tp, class _Compare, class _Alloc&gt; bool std::operator&lt;(const std::multimap&lt;_Key, _Tp, _Compare, _Alloc&gt;&amp;, const std::multimap&lt;_Key, _Tp, _Compare, _Alloc&gt;&amp;)\n     operator&lt;(const multimap&lt;_Key, _Tp, _Compare, _Alloc&gt;&amp; __x,\n     ^\n/usr/include/c++/4.8/bits/stl_multimap.h:881:5: note:   template argument deduction/substitution failed:\nIn file included from /usr/include/c++/4.8/string:48:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from graph.cpp:1:\n/usr/include/c++/4.8/bits/stl_function.h:235:20: note:   \u2018const Node\u2019 is not derived from \u2018const std::multimap&lt;_Key, _Tp, _Compare, _Alloc&gt;\u2019\n       { return __x &lt; __y; }\n                    ^\n</code></pre>\n"}, {"tags": ["c++", "overloading", "variadic-functions"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1485375060, "post_id": 41860736, "comment_id": 70905237, "body": "Why make them overloads? Why not just give them different names? They appear to do very different things."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485375375, "post_id": 41860736, "comment_id": 70905406, "body": "&quot;<i>I want the calls with just a string to go directly without unneccessarily calling <code>vsnprintf</code>.</i>&quot; - Have you benchmarked this? How much performance does this gain you?"}, {"owner": {"reputation": 188, "user_id": 2849214, "user_type": "registered", "profile_image": "https://graph.facebook.com/521582118/picture?type=large", "display_name": "kien", "link": "https://stackoverflow.com/users/2849214/kien"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1485376860, "post_id": 41860736, "comment_id": 70906240, "body": "@Carcigenicate: just to simplify the usage with transparency."}], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 2849214, "user_type": "registered", "profile_image": "https://graph.facebook.com/521582118/picture?type=large", "display_name": "kien", "link": "https://stackoverflow.com/users/2849214/kien"}, "edited": false, "score": 0, "creation_date": 1485376744, "post_id": 41860940, "comment_id": 70906174, "body": "Thanks a lot, you saved my life! Actually this is part of this library: <a href=\"https://github.com/daotrungkien/mysql-cpp11\" rel=\"nofollow noreferrer\">github.com/daotrungkien/mysql-cpp11</a> Now it works perfect."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1485375570, "creation_date": 1485375570, "answer_id": 41860940, "question_id": 41860736, "link": "https://stackoverflow.com/questions/41860736/how-to-disambiguate-a-variadic-function-with-another-in-c/41860940#41860940", "title": "How to disambiguate a variadic function with another in C++", "body": "<p>I haven't tested this, but wouldn't the following work?</p>\n\n<pre><code>void query_varargs(const string &amp;s, ...) {\n    va_list vargs;\n    va_start(vargs, s);\n    // ...\n}\n\ntemplate&lt;typename... Values&gt;\nenable_if&lt;(sizeof...(Values) &gt; 0), void&gt;::type\nquery(const string&amp; s, Values value...) {\n    query_varargs(s, ...value);\n}\n</code></pre>\n\n<p>I.e. move the functionality into a different function (<code>query_varargs</code>), then have the variadic template version of <code>query</code> forward to it.</p>\n"}], "owner": {"reputation": 188, "user_id": 2849214, "user_type": "registered", "profile_image": "https://graph.facebook.com/521582118/picture?type=large", "display_name": "kien", "link": "https://stackoverflow.com/users/2849214/kien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 41860940, "answer_count": 1, "score": 0, "last_activity_date": 1485375570, "creation_date": 1485374919, "last_edit_date": 1485375345, "question_id": 41860736, "link": "https://stackoverflow.com/questions/41860736/how-to-disambiguate-a-variadic-function-with-another-in-c", "title": "How to disambiguate a variadic function with another in C++", "body": "<p>Let's say I want to have a function overloaded by two versions like this:</p>\n\n<p>a) <code>void query(const string&amp; s);</code> which makes an SQL query to a server.</p>\n\n<p>b) <code>void query(const string&amp; s,...);</code> which builds a query string given by a format string and arguments to be substituted. Internally, this version looks like (I hide the details to not over-complicate the question):</p>\n\n<pre><code>va_list vargs;\nva_start(vargs, s);\n// ... call vsnprintf to build the query string\n// ... call the first version with the query string\nva_end(vargs);\n</code></pre>\n\n<p>Note that I also want this to work in both MSVC and GCC. Of course, by writing as above, I cannot go for the following call because of ambiguity:</p>\n\n<p><code>query(\"...\");</code></p>\n\n<p>To resolve the ambiguity in this case, I have tried several ways, but none of them works:</p>\n\n<p><strong>1) Rewrite them as:</strong></p>\n\n<pre><code>void query(const string&amp; s) {\n// ...\n}\n\ntemplate&lt;typename Value&gt;\nvoid query(const string&amp; s, Value value,...) {\n    va_list vargs;\n    va_start(vargs, s);\n    // ...\n}\n</code></pre>\n\n<p>This compiles and works fine in MSVC, but GCC complains with a warning:</p>\n\n<blockquote>\n  <p>\"second parameter of <code>va_start</code> is not last named argument\"</p>\n</blockquote>\n\n<p>Even if I ignore that warning, it doesn't work. Somehow <code>vargs</code> cannot capture <code>value</code> parameter for whatever I try: <code>va_start(vargs, s)</code> or <code>va_start(vargs, value)</code>. It seems to me that GCC always takes only unnamed parameters into <code>vargs</code> no matter what we provide as 2nd parameter to <code>va_start</code>.</p>\n\n<p><strong>2) Rewrite them as</strong></p>\n\n<pre><code>void query(const string&amp; s) {\n// ...\n}\n\ntemplate&lt;typename... Values&gt;\nenable_if&lt;(sizeof...(Values) &gt; 0), void&gt;::type\nquery(const string&amp; s, Values value...) {\n    va_list vargs;\n    va_start(vargs, s);\n    // ...\n}\n</code></pre>\n\n<p>Again, this compiles and works with MSVC. But GCC complains with an error that the 2nd version is a variadic template rather than variadic function, and <code>va_start</code> is not allowed to be used there. It seems that <code>va_start</code> in GCC is built-in rather than from library.</p>\n\n<p>Some people can remark that actually in the 2 versions, 2nd version supersedes the 1st one. That means if I remove the 1st version and put it internally into the 2nd, then everything is alright. But I have a good reason to keep the 1st version: I want the calls with just a string to go directly without unneccessarily calling <code>vsnprintf</code>. So please do not suggest me this way.</p>\n\n<p>I have also thought about combining the 1st version into the 2nd, and then internally count the number of given arguments to know how to go. But it doesn't seem to have a standard way to do that. Determining the number of arguments is possible with variadic templates but not with variadic functions. And if I switch into variadic template, I cannot use <code>va_start</code> anymore in GCC.</p>\n\n<p>Hope someone can help!!</p>\n"}, {"tags": ["c++", "visual-studio", "usrp", "uhd"], "comments": [{"owner": {"reputation": 1562, "user_id": 558038, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/acd4829d2f789bad4f1e00d87311be0c?s=128&d=identicon&r=PG", "display_name": "Bastianon Massimo", "link": "https://stackoverflow.com/users/558038/bastianon-massimo"}, "edited": false, "score": 0, "creation_date": 1531154033, "post_id": 41860468, "comment_id": 89479243, "body": "I&#39;m struggling with the same error, did you resolve the problem?"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6261464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f405b85ee42f79a510aae88b8e954f?s=128&d=identicon&r=PG&f=1", "display_name": "tallonj", "link": "https://stackoverflow.com/users/6261464/tallonj"}, "is_accepted": false, "score": 0, "last_activity_date": 1487679985, "creation_date": 1487679985, "answer_id": 42367316, "question_id": 41860468, "link": "https://stackoverflow.com/questions/41860468/bad-allocation-while-trying-to-create-usrp-object-in-c/42367316#42367316", "title": "Bad Allocation while trying to create USRP Object in c++", "body": "<p>\"I do not connect any URSP device to my computer.\"</p>\n\n<p>You cannot execute this code without having a USRP connected to the computer you are running it on.</p>\n\n<p>when you call uhd::usrp::multi_usrp::make(device_args);\nthe uhd is trying to connected to a USRP with the IP address you have speciified in device args.</p>\n\n<p>try connecting a usrp to your computer and try again</p>\n"}], "owner": {"reputation": 15, "user_id": 7470707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d31bf7b6af0afb228d7c9f2cfeeaf09?s=128&d=identicon&r=PG&f=1", "display_name": "Tuviia", "link": "https://stackoverflow.com/users/7470707/tuviia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1487679985, "creation_date": 1485374039, "question_id": 41860468, "link": "https://stackoverflow.com/questions/41860468/bad-allocation-while-trying-to-create-usrp-object-in-c", "title": "Bad Allocation while trying to create USRP Object in c++", "body": "<p>I'm getting an error - <strong>\"bad allocation</strong>\" while working with the UHD library. </p>\n\n<p>I'm trying to compile some basic code to learn more about the UHD library. After compiling the program I'm getting an error. </p>\n\n<p>Code:</p>\n\n<pre><code>int UHD_SAFE_MAIN(int argc, char *argv[]) {\nuhd::set_thread_priority_safe();\n\nstd::string device_args(\"addr=192.168.10.2\");\nstd::string subdev(\"A:0\");\nstd::string ant(\"TX/RX\");\nstd::string ref(\"internal\");\n\ndouble rate(1e6);\ndouble freq(915e6);\ndouble gain(10);\ndouble bw(1e6);\n\n//create a usrp device\nstd::cout &lt;&lt; std::endl;\nstd::cout &lt;&lt; boost::format(\"Creating the usrp device with: %s...\") %device_args &lt;&lt; std::endl;\nuhd::usrp::multi_usrp::sptr usrp = uhd::usrp::multi_usrp::make(device_args);\n\n\n// Lock mboard clocks\nstd::cout &lt;&lt; boost::format(\"Lock mboard clocks: %f\") % ref &lt;&lt; std::endl;\nusrp-&gt;set_clock_source(ref);\n\n//always select the subdevice first, the channel mapping affects the other settings\nstd::cout &lt;&lt; boost::format(\"subdev set to: %f\") % subdev &lt;&lt; std::endl;\nusrp-&gt;set_rx_subdev_spec(subdev);\nstd::cout &lt;&lt; boost::format(\"Using Device: %s\") % usrp-&gt;get_pp_string() &lt;&lt; std::endl;\n\n//set the sample rate\nif (rate &lt;= 0.0) {\n    std::cerr &lt;&lt; \"Please specify a valid sample rate\" &lt;&lt; std::endl;\n    return ~0;\n}\n\n// set sample rate\nstd::cout &lt;&lt; boost::format(\"Setting RX Rate: %f Msps...\") % (rate / 1e6) &lt;&lt; std::endl;\nusrp-&gt;set_rx_rate(rate);\nstd::cout &lt;&lt; boost::format(\"Actual RX Rate: %f Msps...\") % (usrp-&gt;get_rx_rate() / 1e6) &lt;&lt; std::endl &lt;&lt; std::endl;\n\n// set freq\nstd::cout &lt;&lt; boost::format(\"Setting RX Freq: %f MHz...\") % (freq / 1e6) &lt;&lt; std::endl;\nuhd::tune_request_t tune_request(freq);\nusrp-&gt;set_rx_freq(tune_request);\nstd::cout &lt;&lt; boost::format(\"Actual RX Freq: %f MHz...\") % (usrp-&gt;get_rx_freq() / 1e6) &lt;&lt; std::endl &lt;&lt; std::endl;\n\n// set the rf gain\nstd::cout &lt;&lt; boost::format(\"Setting RX Gain: %f dB...\") % gain &lt;&lt; std::endl;\nusrp-&gt;set_rx_gain(gain);\nstd::cout &lt;&lt; boost::format(\"Actual RX Gain: %f dB...\") % usrp-&gt;get_rx_gain() &lt;&lt; std::endl &lt;&lt; std::endl;\n\n// set the IF filter bandwidth\nstd::cout &lt;&lt; boost::format(\"Setting RX Bandwidth: %f MHz...\") % (bw / 1e6) &lt;&lt; std::endl;\nusrp-&gt;set_rx_bandwidth(bw);\nstd::cout &lt;&lt; boost::format(\"Actual RX Bandwidth: %f MHz...\") % (usrp-&gt;get_rx_bandwidth() / 1e6) &lt;&lt; std::endl &lt;&lt; std::endl;\n\n// set the antenna\nstd::cout &lt;&lt; boost::format(\"Setting RX Antenna: %s\") % ant &lt;&lt; std::endl;\nusrp-&gt;set_rx_antenna(ant);\nstd::cout &lt;&lt; boost::format(\"Actual RX Antenna: %s\") % usrp-&gt;get_rx_antenna() &lt;&lt; std::endl &lt;&lt; std::endl;\n\nreturn EXIT_SUCCESS;\n</code></pre>\n\n<p>}</p>\n\n<p>Part of the code where the error occurs:</p>\n\n<pre><code>//create a usrp device\nstd::cout &lt;&lt; std::endl;\nstd::cout &lt;&lt; boost::format(\"Creating the usrp device with: %s...\") %device_args &lt;&lt; std::endl;\nuhd::usrp::multi_usrp::sptr usrp = uhd::usrp::multi_usrp::make(device_args);\n</code></pre>\n\n<p>Error:<a href=\"https://i.stack.imgur.com/EzjIL.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>I'm using:</p>\n\n<ul>\n<li>Microsoft Visual C++ Express 2010</li>\n<li>C++ language</li>\n<li>UHD library, Win32_VS2010.exe, 003.007.003-release</li>\n<li>Boost library 1_63_0</li>\n<li>I do not connect any URSP device to my computer.</li>\n</ul>\n\n<p>I don't know if the error is connected with UHD library or with the C++ language. I was trying to compile this program using different versions of Microsoft Visual Studio and different versions of the UHD library, including the latest one. I was even trying to compile this on different PC, but the result was similar, there wasn't an error which interrupted the program but i got string \"error: bad allocation\" in the console instead and program stopped working in the same spot.  </p>\n\n<p>When i first started compiling this program I didn't got \"bad allocation error\" (<strong>UHD_003.004.000 - release</strong>). I got an error which said - \"<strong>Error: LookupError: KeyError: No device found for -----></strong>. After that i decided to upgrade my UHD library version to the newer one (003.007.003) and then <strong>bad allocation error</strong> started occuring. I was trying to install back the previous version but it didn't help. </p>\n\n<p>I was trying to change <strong>type</strong> of device_args, from <em>string</em> to <em>uhd::device_addr_t</em>, like it is said in manual on <a href=\"http://files.ettus.com/manual\" rel=\"nofollow noreferrer\">http://files.ettus.com/manual</a>, but the error didn't disappear.</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c++", "directx"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 7342911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wyR7-6fKDlk/AAAAAAAAAAI/AAAAAAAAAKs/PWSdxutGpCY/photo.jpg?sz=128", "display_name": "Tesla", "link": "https://stackoverflow.com/users/7342911/tesla"}, "edited": false, "score": 1, "creation_date": 1485377444, "post_id": 41860719, "comment_id": 70906527, "body": "Wow!!! u sure know how to make an engine , I understood somewhat (sorry i am new to all this ).Thanks for the link and taking the time to reply with such details.I&#39;ll go through your answer multiple times in order to understand it xD."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 77, "user_id": 7342911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wyR7-6fKDlk/AAAAAAAAAAI/AAAAAAAAAKs/PWSdxutGpCY/photo.jpg?sz=128", "display_name": "Tesla", "link": "https://stackoverflow.com/users/7342911/tesla"}, "edited": false, "score": 0, "creation_date": 1485525596, "post_id": 41860719, "comment_id": 70973352, "body": "@Tesla I&#39;ve been studying it for quite a while now independently and that is only the tip of the iceberg."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 77, "user_id": 7342911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wyR7-6fKDlk/AAAAAAAAAAI/AAAAAAAAAKs/PWSdxutGpCY/photo.jpg?sz=128", "display_name": "Tesla", "link": "https://stackoverflow.com/users/7342911/tesla"}, "edited": false, "score": 0, "creation_date": 1485526224, "post_id": 41860719, "comment_id": 70973807, "body": "@Tesla I also updated my answer with an edit section with a few more references."}], "tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": true, "score": 1, "last_activity_date": 1486128281, "last_edit_date": 1486128281, "creation_date": 1485374878, "answer_id": 41860719, "question_id": 41860302, "link": "https://stackoverflow.com/questions/41860302/directx11-how-to-manage-multiple-vertex-index-buffers/41860719#41860719", "title": "Directx11 How to manage multiple vertex/index buffers?", "body": "<p>Not showing any code here but the construct that you are requesting would be as follows:</p>\n\n<ul>\n<li>Create a file loader for, textures, model meshes, vertex data, normal, audio, etc.</li>\n<li>Have a reusable structure that stores all of this data for a particular mesh of a model.</li>\n<li>When creating this you will also want a separate texture class to hold information about different textures. This way the same texture can be referenced for different models or meshes and you won't have to load them into memory each time. </li>\n<li>The same can be done about different meshes; you can reference a mesh that may be a part of different model objects.</li>\n<li>To do this you would need an Asset Storage class that will manage all of your assets. This way if an asset is already in memory it will not load it again; such as a font, a texture, a model, an audio file, etc.</li>\n<li>Then the next part is you will need a Batch class and a Batch Manager class\n\n<ul>\n<li>The batch class will define the container of what a batch is based off of a few parameters: Primitive types, if they have transparencies or not (priority queue) etc.</li>\n<li>The Batch Manager class will do the organization and send the batches to the rendering stage. This class will also be used to state how many vertices a batch can hold and how many batches (buckets) you have. The ratio will depend on the game content. A good ratio for a basic 2D sprite type application would be approximately 10 batches where each batch contains not less than 10,000 vertices. The next step would be then to populate a bucket of similar types based on Primitive Type and its Priority (alpha channel - for Z depth), and if a bucket can not hold the data it will then look for another bucket to fill. If no buckets are available to hold the data, then the Batch Manager will look for the bucket that is most filled with the highest priority queue, it will send that batch to the video card to be rendered, then it will reuse that bucket. </li>\n<li>The last part would be a ShaderManager class to manage different types of shaders that your program will use. So all of these classes or structures will be tied together.</li>\n</ul></li>\n</ul>\n\n<p>If you design this appropriately you can abstract all of the Engines behaviors and responsibilities away from the actual Game Content, Properties and Logic or set of Rules. This way your Game Engine can be reusable for multiple games. That way your engine doesn't have any dependencies on a particular game and when you are ready to reuse it all you have to do is create a main project that inherits from either this Static or Dynamic library and all of the Engine Components will be incorporated into the next game. This separation of code is an excellent approach for generic reusable code.</p>\n\n<p>For an excellent representation of this approach I would suggest checking out this website <a href=\"http://www.MarekKnows.com\" rel=\"nofollow noreferrer\">www.MarekKnows.com</a> and follow the Shader Engine series of video tutorials. Albeit this particular website focuses on a Win32 in C++ but uses OpenGL instead of DirectX. However the overall design pattern has the same concept. The only difference would be to strip out the OpenGL parts and replace them with the DirectX API. </p>\n\n<p><strong>EDIT</strong> - Additional References:</p>\n\n<ul>\n<li><a href=\"https://www.geometrictools.com/\" rel=\"nofollow noreferrer\">Geometric Tools</a></li>\n<li><a href=\"http://www.rastertek.com/\" rel=\"nofollow noreferrer\">Rastertek</a></li>\n<li><a href=\"http://www.3dbuzz.com/\" rel=\"nofollow noreferrer\">3D Buzz</a></li>\n<li><a href=\"https://learnopengl.com/\" rel=\"nofollow noreferrer\">Learn OpenGL</a></li>\n<li><a href=\"https://developer.nvidia.com/gpugems/GPUGems/gpugems_pref01.html\" rel=\"nofollow noreferrer\">GPU Gems by NVidia</a></li>\n<li><a href=\"http://www.nvidia.com/docs/IO/8228/BatchBatchBatch.pdf\" rel=\"nofollow noreferrer\">Batches PDF by NVidia</a></li>\n<li><a href=\"https://hieroglyph3.codeplex.com/SourceControl/latest#Source/PipelineManagerDX11.cpp\" rel=\"nofollow noreferrer\">Hieroglyph3 @ Codeplex</a></li>\n</ul>\n\n<p>I also found this write up on Batch Rendering Process that is by Marek Krzeminski which is from his video tutorials but found here <a href=\"https://www.gamedev.net/resources/_/technical/opengl/opengl-batch-rendering-r3900\" rel=\"nofollow noreferrer\">Batch Rendering by Marek at Gamedev</a>  </p>\n"}], "owner": {"reputation": 77, "user_id": 7342911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wyR7-6fKDlk/AAAAAAAAAAI/AAAAAAAAAKs/PWSdxutGpCY/photo.jpg?sz=128", "display_name": "Tesla", "link": "https://stackoverflow.com/users/7342911/tesla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 910, "favorite_count": 0, "accepted_answer_id": 41860719, "answer_count": 1, "score": 1, "last_activity_date": 1486128281, "creation_date": 1485373443, "last_edit_date": 1485376872, "question_id": 41860302, "link": "https://stackoverflow.com/questions/41860302/directx11-how-to-manage-multiple-vertex-index-buffers", "title": "Directx11 How to manage multiple vertex/index buffers?", "body": "<p>I'm Working on a small game framework as I am learning DirectX11.\nWhat could be the best method to have a <code>BufferManager</code> class (maybe static) to handle all the vertex and index data of the models created both in real time or before. The class should be responsible for creating the Buffers dynamic or static, depending on the model info and then drawing them.</p>\n\n<ul>\n<li>Should I have one vertex and index vector list and append all the new models to it... and then recreate the buffers, whenever new data is appended and set the new buffers before drawing.</li>\n<li>Should I have seperate vertex and index buffers for the models, access respective model's buffer and set to <code>IASetVertexBuffer(model[i].getVertBuff())</code> before each draw call;</li>\n<li>Also some models could be dynamic and others static, how can I do batching here?</li>\n</ul>\n"}, {"tags": ["c++", "makefile", "glfw"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1485372818, "post_id": 41859994, "comment_id": 70903987, "body": "Could you show us what the contents of the <code>glfw-3.2.1&#47;GLFW</code> directory look like?"}, {"owner": {"reputation": 25, "user_id": 5307086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a99ea9de41ab031a47e3ae7165a65fd?s=128&d=identicon&r=PG&f=1", "display_name": "tiger", "link": "https://stackoverflow.com/users/5307086/tiger"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1485373482, "post_id": 41859994, "comment_id": 70904360, "body": "@Xirema hi. I post the pics. sorry that I made a mistake in the former post"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5307086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a99ea9de41ab031a47e3ae7165a65fd?s=128&d=identicon&r=PG&f=1", "display_name": "tiger", "link": "https://stackoverflow.com/users/5307086/tiger"}, "edited": false, "score": 0, "creation_date": 1485373885, "post_id": 41860358, "comment_id": 70904587, "body": "it still has the same error: fatal error: GLFW/glfw3.h: No such file or directory  #include &lt;GLFW/glfw3.h&gt;"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 25, "user_id": 5307086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a99ea9de41ab031a47e3ae7165a65fd?s=128&d=identicon&r=PG&f=1", "display_name": "tiger", "link": "https://stackoverflow.com/users/5307086/tiger"}, "edited": false, "score": 0, "creation_date": 1485374188, "post_id": 41860358, "comment_id": 70904749, "body": "@tiger What about <code>-I&#47;graphics&#47;example_01&#47;glfw-3.2.1&#47;include</code>? The underlying problem is that the compiler can&#39;t find the include files, so you need to make sure they&#39;re correctly included."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 25, "user_id": 5307086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a99ea9de41ab031a47e3ae7165a65fd?s=128&d=identicon&r=PG&f=1", "display_name": "tiger", "link": "https://stackoverflow.com/users/5307086/tiger"}, "edited": false, "score": 0, "creation_date": 1485375701, "post_id": 41860358, "comment_id": 70905588, "body": "@tiger You need to get your includes correct. Getting it correct on my end, on a completely different machine (and probably a different OS) is not going to solve your problem."}, {"owner": {"reputation": 25, "user_id": 5307086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a99ea9de41ab031a47e3ae7165a65fd?s=128&d=identicon&r=PG&f=1", "display_name": "tiger", "link": "https://stackoverflow.com/users/5307086/tiger"}, "edited": false, "score": 0, "creation_date": 1485375782, "post_id": 41860358, "comment_id": 70905628, "body": "Hi. I downloaded another homework file, and it is compiled ok. So Ill just used another file. Thanks!"}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 0, "last_activity_date": 1485373962, "last_edit_date": 1485373962, "creation_date": 1485373640, "answer_id": 41860358, "question_id": 41859994, "link": "https://stackoverflow.com/questions/41859994/with-glfw-3-2-1-inside-my-work-directory-how-to-compile-with-it-using-makefile/41860358#41860358", "title": "with glfw -3.2.1 inside my work directory ,how to compile with it using makefile", "body": "<p>Your include directory is wrong.</p>\n\n<pre><code>CFLAGS = -g -DGL_GLEXT_PROTOTYPES -I/example_01/glew -I/example_01/glfw-3.2.1 -Wno-deprecated-declarations\n</code></pre>\n\n<p>You should change <code>-I/example_01/glfw-3.2.1</code> to <code>-I/example_01/glfw-3.2.1/include</code></p>\n\n<p>It is possible that you'll need to make a similar change to the GLEW include directory.</p>\n"}], "owner": {"reputation": 25, "user_id": 5307086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a99ea9de41ab031a47e3ae7165a65fd?s=128&d=identicon&r=PG&f=1", "display_name": "tiger", "link": "https://stackoverflow.com/users/5307086/tiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 41860358, "answer_count": 1, "score": 0, "last_activity_date": 1485373962, "creation_date": 1485372397, "last_edit_date": 1485373439, "question_id": 41859994, "link": "https://stackoverflow.com/questions/41859994/with-glfw-3-2-1-inside-my-work-directory-how-to-compile-with-it-using-makefile", "title": "with glfw -3.2.1 inside my work directory ,how to compile with it using makefile", "body": "<p>I want to compile a program with makefile as bellow:</p>\n\n<pre><code>CC = g++\nCFLAGS = -g -DGL_GLEXT_PROTOTYPES -I/example_01/glew -I/example_01/glfw-3.2.1 -Wno-deprecated-declarations\nLDFLAGS = -lGL -lGLEW -glfw\n\nRM = /bin/rm -f \nall: main \nmain: example_01/src/example_01.o \n$(CC) $(CFLAGS) -o as1 example_01/src/example_01.o $(LDFLAGS) \nexample_00/example_00.o: example_01/example_01.cpp\n$(CC) $(CFLAGS) -c example_01/src/example_01.cpp -o example_01/src/example_01.o\nclean: \n$(RM) *.o example_01/src/*.o as1\n</code></pre>\n\n<p>But there's error :</p>\n\n<pre><code>fatal error: GLFW/glfw3.h: No such file or directory\n#include &lt;GLFW/glfw3.h&gt;\n</code></pre>\n\n<p>my makefile located in</p>\n\n<pre><code>graphics/example_01\n</code></pre>\n\n<p>glfw-3.2.1 and glew file located in</p>\n\n<pre><code>graphics/example_01/example_01\n</code></pre>\n\n<p>glfw3.h located in </p>\n\n<pre><code>graphics/example_01/example_01/glfw-3.2.1/include/GLFW \n</code></pre>\n\n<p>example_01.cpp located in </p>\n\n<pre><code>graphics/example_01/example_01/src\n</code></pre>\n\n<p>So how to compile ? Thanks!</p>\n\n<p><a href=\"https://i.stack.imgur.com/svv0I.png\" rel=\"nofollow noreferrer\">inside glfw-3.2.1</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/ntvOC.png\" rel=\"nofollow noreferrer\">inside GLFW</a></p>\n"}, {"tags": ["c++", "arrays", "sorting"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1485372244, "post_id": 41859926, "comment_id": 70903703, "body": "is <code>getGrossPrice()</code> virtual? then you can just call sort with a custom functor that calls that"}, {"owner": {"reputation": 2193, "user_id": 3700524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVsYW.jpg?s=128&g=1", "display_name": "Mohsen_Fatemi", "link": "https://stackoverflow.com/users/3700524/mohsen-fatemi"}, "edited": false, "score": 1, "creation_date": 1485372415, "post_id": 41859926, "comment_id": 70903798, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/14081335/algorithm-vector-sort-with-objects\">&lt;algorithm&gt; vector sort with objects?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1485372491, "post_id": 41859978, "comment_id": 70903838, "body": "Amen, Please don&#39;t just post code. This is not helpful for the asker to understand the answer. If you can, edit the answer and add a brief explanation."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1485372522, "post_id": 41859978, "comment_id": 70903858, "body": "Might want to add C++11 &gt; and maybe add a solution for pre."}, {"owner": {"reputation": 120111, "user_id": 469935, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/14lYV.jpg?s=128&g=1", "display_name": "Armen Tsirunyan", "link": "https://stackoverflow.com/users/469935/armen-tsirunyan"}, "edited": false, "score": 0, "creation_date": 1485372551, "post_id": 41859978, "comment_id": 70903873, "body": "Have a little patience, guys."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1485372734, "post_id": 41859978, "comment_id": 70903950, "body": "@ArmenTsirunyan Regarding your plea for patience : it&#39;s reasonable to assume that once someone posts an answer, it&#39;s the complete answer they intended to post. People are right to critic an answer immediately."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1485373797, "post_id": 41859978, "comment_id": 70904534, "body": "@Fran&#231;oisAndrieux On the other hand the SO  system encourages First to post, so Armens procedure is a common one. It is also encouraged by Jon Skeet."}], "tags": [], "owner": {"reputation": 120111, "user_id": 469935, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/14lYV.jpg?s=128&g=1", "display_name": "Armen Tsirunyan", "link": "https://stackoverflow.com/users/469935/armen-tsirunyan"}, "is_accepted": true, "score": 4, "last_activity_date": 1485372535, "last_edit_date": 1485372535, "creation_date": 1485372342, "answer_id": 41859978, "question_id": 41859926, "link": "https://stackoverflow.com/questions/41859926/sorting-an-array-of-objects-using-the-result-of-a-function-in-the-object-in-c/41859978#41859978", "title": "Sorting an array of objects using the result of a function in the object in c++", "body": "<pre><code>std::sort(p, p+n,\n          [](Product* p1, Product* p2)\n          {\n              return p1-&gt;getGrossPrice() &lt; p2-&gt;getGrossPrise();\n          }); \n</code></pre>\n\n<p>This is a call to the standard sorting function <code>std::sort</code>. We pass the begin and end iterators(pointers, in this case) to the range we with to sort, and a third argument which is a function object that returns true its first argument is strictly less (in terms of the <a href=\"https://www.sgi.com/tech/stl/StrictWeakOrdering.html\" rel=\"nofollow noreferrer\">strict weak ordering</a> we want to sort according to) than the second argument and false otherwise. The part that starts with [] is called a <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">lambda-expression</a>: in other languages similar objects can be known as anonymous functions. It was introduced in C++11.</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1485378491, "creation_date": 1485378491, "answer_id": 41861675, "question_id": 41859926, "link": "https://stackoverflow.com/questions/41859926/sorting-an-array-of-objects-using-the-result-of-a-function-in-the-object-in-c/41861675#41861675", "title": "Sorting an array of objects using the result of a function in the object in c++", "body": "<p>With <a href=\"https://ericniebler.github.io/range-v3/\" rel=\"nofollow noreferrer\">range-v3</a>, you can simply do (with projection):</p>\n\n<pre><code>ranges::sort(prods, std::less&lt;&gt;{}, &amp;Product::getGrossPrice);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/a6f24f731b77a6a9\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 15, "user_id": 4733354, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PT7lTy5coZc/AAAAAAAAAAI/AAAAAAAAAtc/qxcwZUOdZlE/photo.jpg?sz=128", "display_name": "luke_k", "link": "https://stackoverflow.com/users/4733354/luke-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 41859978, "answer_count": 2, "score": 0, "last_activity_date": 1485378491, "creation_date": 1485372109, "last_edit_date": 1485373011, "question_id": 41859926, "link": "https://stackoverflow.com/questions/41859926/sorting-an-array-of-objects-using-the-result-of-a-function-in-the-object-in-c", "title": "Sorting an array of objects using the result of a function in the object in c++", "body": "<p>I have a program that creates an array of pointers to an object. The class the pointers are pointing to stores the net price of an item and has a function for calculating the gross price of the object.</p>\n\n<pre><code>Product *p[10];\n\nBook *b;\nSoftware *s;\n\ndouble price;\n\ncout &lt;&lt; \"Enter the price of the book: \" &lt;&lt; endl;\ncin &gt;&gt; price;\n\nb = new Book(price);\n\ncout &lt;&lt; \"Enter the price of the software: \" &lt;&lt; endl;\ncin &gt;&gt; price;\n\ns = new Software(price);\n\ncout &lt;&lt; \"Gross price of book: \" &lt;&lt; b-&gt;getGrossPrice() &lt;&lt; endl;\ncout &lt;&lt; \"Gross price of software: \" &lt;&lt; s-&gt;getGrossPrice() &lt;&lt; endl;\n\np[0] = b;\np[1] = s;\n</code></pre>\n\n<p>Is there a way of sorting the array in ascending order of the gross price?</p>\n\n<p>I know there is a sort algorithm in the STL but I don't think it will work for me or at least I'm not sure how to make it work.</p>\n\n<p>There are solutions to similar problems on the site that use sort however none that I can find show it's used in this context. </p>\n"}, {"tags": ["c++", "ubuntu", "opengl", "mesa"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 1, "creation_date": 1485372622, "post_id": 41859894, "comment_id": 70903904, "body": "If I remember correctly, the Mesa website states that you need python to <b>build</b> Mesa."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1485372836, "post_id": 41859894, "comment_id": 70903998, "body": "I&#39;m mostly on windows, but I&#39;m pretty sure the few times I did OpenGL on linux I used essentially the same code (granded SDL did the window abstraction for me, but the rest was essentially unchanged, and it yes it was C++ code, the OGL headers were generated using glLoadGen)."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1485373957, "post_id": 41859894, "comment_id": 70904630, "body": "Instead of installing Mesa yourself, just use your package manager.  In fact, there&#39;s a very good chance it&#39;s already installed.  Run <code>sudo apt install mesa-utils</code>, then you can run <code>glxinfo</code>.  Run <code>glxinfo | grep &#39;direct rendering&#39;</code> to check that hardware acceleration is supported, and run <code>glxinfo | grep &#39;version string&#39;</code> to see the version of OpenGL supported."}, {"owner": {"reputation": 6610, "user_id": 1449637, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/71baba15969012d4c07b755fb0441016?s=128&d=identicon&r=PG", "display_name": "Greg Peckory", "link": "https://stackoverflow.com/users/1449637/greg-peckory"}, "edited": false, "score": 0, "creation_date": 1485374061, "post_id": 41859894, "comment_id": 70904684, "body": "Great, it&#39;s up and running, thanks guys"}, {"owner": {"reputation": 6610, "user_id": 1449637, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/71baba15969012d4c07b755fb0441016?s=128&d=identicon&r=PG", "display_name": "Greg Peckory", "link": "https://stackoverflow.com/users/1449637/greg-peckory"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1485374359, "post_id": 41859894, "comment_id": 70904853, "body": "Do I refer to pkg-config when compiling or are there header files I use with @DietrichEpp&#39;s installation?"}, {"owner": {"reputation": 6610, "user_id": 1449637, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/71baba15969012d4c07b755fb0441016?s=128&d=identicon&r=PG", "display_name": "Greg Peckory", "link": "https://stackoverflow.com/users/1449637/greg-peckory"}, "edited": false, "score": 0, "creation_date": 1485374452, "post_id": 41859894, "comment_id": 70904898, "body": "How would I use the Glut package? Sorry, very new to C++"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1485376246, "post_id": 41859894, "comment_id": 70905908, "body": "Install the <code>freeglut3-dev</code> package, link with <code>-lglut</code>, and <code>#include &lt;GL&#47;glut.h&gt;</code>."}], "owner": {"reputation": 6610, "user_id": 1449637, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/71baba15969012d4c07b755fb0441016?s=128&d=identicon&r=PG", "display_name": "Greg Peckory", "link": "https://stackoverflow.com/users/1449637/greg-peckory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485372142, "creation_date": 1485372013, "last_edit_date": 1485372142, "question_id": 41859894, "link": "https://stackoverflow.com/questions/41859894/using-mesa3d-with-c-in-ubuntu", "title": "Using Mesa3d with C++ in Ubuntu", "body": "<p>I'm doing an OpenGL course but only have integrated graphics with my Intel processor. Upon doing some research it seems I can use the Mesa implementation of OpenGL with my integrated graphics.</p>\n\n<p>On the installation page it says it requires python, but my course will be practicing OpenGL in a C++ environment.</p>\n\n<p>I've also been looking at OpenGL tutorials online in C++, and there are many libraries used for simplifying common tasks in OpenGL. Will I be able to use these libraries with Mesa in C++, and if so, how would I approach this?</p>\n"}, {"tags": ["c++", "c++11", "pointers", "return-by-reference"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1485371744, "post_id": 41859755, "comment_id": 70903421, "body": "Apart from anything else, why does the copy constructor clear the list?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 3, "creation_date": 1485371899, "post_id": 41859755, "comment_id": 70903485, "body": "I see a lot of (really unnecessary) <code>new</code>s, but no <code>delete</code>s. If you want <code>y</code> to affect <code>x</code>, then all you need is a reference, not new objects."}], "answers": [{"tags": [], "owner": {"reputation": 364, "user_id": 5875229, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3JQq.jpg?s=128&g=1", "display_name": "JazzSoft", "link": "https://stackoverflow.com/users/5875229/jazzsoft"}, "is_accepted": false, "score": 2, "last_activity_date": 1485372786, "creation_date": 1485372786, "answer_id": 41860104, "question_id": 41859755, "link": "https://stackoverflow.com/questions/41859755/how-can-i-create-a-list-of-dynamic-objects-in-c/41860104#41860104", "title": "How can I create a list of dynamic objects in C++", "body": "<p>You created a copy of the \"three\" and added \"four\" to it.</p>\n\n<pre><code>test y = x.add(\"three\");\n</code></pre>\n\n<p>You can do like:</p>\n\n<pre><code>test&amp; y = x.add(\"three\");\n</code></pre>\n\n<p>By the way, your code creates memory leaks.  Write virtual destructor.</p>\n"}, {"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 1, "last_activity_date": 1485372812, "creation_date": 1485372812, "answer_id": 41860112, "question_id": 41859755, "link": "https://stackoverflow.com/questions/41859755/how-can-i-create-a-list-of-dynamic-objects-in-c/41860112#41860112", "title": "How can I create a list of dynamic objects in C++", "body": "<p>Yes, you can just make <code>y</code> a <code>test&amp;</code> to preserve the relationship with <code>x</code>:</p>\n\n<p><a href=\"http://ideone.com/dt6Myn\" rel=\"nofollow noreferrer\"><kbd>Live Example</kbd></a></p>\n"}, {"tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": false, "score": 1, "last_activity_date": 1485374270, "last_edit_date": 1485374270, "creation_date": 1485373454, "answer_id": 41860305, "question_id": 41859755, "link": "https://stackoverflow.com/questions/41859755/how-can-i-create-a-list-of-dynamic-objects-in-c/41860305#41860305", "title": "How can I create a list of dynamic objects in C++", "body": "<p>You seem to be using lots of objects dynamically allocated on the heap. Consider using <em>smart</em> pointers (like <code>std::shared_ptr</code>) instead of raw <em>owning</em> pointers, for proper cleanup and to avoid leaks.</p>\n\n<p>I haven't spent much time on this, but taking your initial code and replacing some raw pointer usage with smart pointers (and <code>std::list</code> with <code>std::vector</code>; unless you do want <code>list</code> for its iterator invalidation properties, <code>std::vector</code> tends to be a better option), I got this code that seems to work (<a href=\"https://ideone.com/k9uFfJ\" rel=\"nofollow noreferrer\"><strong>live sample</strong></a>):</p>\n\n<p><strong>Output:</strong></p>\n\n<blockquote>\n<pre><code>[three,[four]]\n[one,[two],[three,[four]]]\n</code></pre>\n</blockquote>\n\n<p><strong>Source:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nclass Test {\nprivate:\n    string _name;\n    vector&lt;shared_ptr&lt;Test&gt;&gt; _list;\npublic:\n    explicit Test(const string&amp; S) : _name(S) { }\n\n    string to_string() const {\n        string s(\"[\");\n        s += _name;\n\n        for (auto const&amp; p : _list) {\n            s += \",\";\n            s += p-&gt;to_string();\n        }\n\n        s += \"]\";\n        return s;\n    }\n\n    shared_ptr&lt;Test&gt; add(const string&amp; S) {\n        auto p = make_shared&lt;Test&gt;(S);\n        _list.push_back(p);\n        return p;\n    }\n};\n\nint main() {\n    auto x = make_shared&lt;Test&gt;(\"one\");\n    x-&gt;add(\"two\");\n    auto y = x-&gt;add(\"three\");\n    y-&gt;add(\"four\");\n\n    cout &lt;&lt; y-&gt;to_string() &lt;&lt; '\\n';\n    cout &lt;&lt; x-&gt;to_string() &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>As an alternative, if it makes sense for your particular design, you may also consider returning references (<code>T&amp;</code>) to your objects from <code>test::add</code> instead of (smart) pointers, and use <code>unique_ptr</code> (instead of <code>shared_ptr</code>) with the <code>_list</code> vector data member. This is a kind of alternative version (<a href=\"https://ideone.com/vxZ3nU\" rel=\"nofollow noreferrer\"><strong>live</strong></a>):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nclass Test {\nprivate:\n    string _name;\n    vector&lt;unique_ptr&lt;Test&gt;&gt; _list;\npublic:\n    explicit Test(const string&amp; S) : _name(S) { }\n\n    string to_string() const {\n        string s(\"[\");\n        s += _name;\n\n        for (auto const&amp; p : _list) {\n            s += \",\";\n            s += p-&gt;to_string();\n        }\n\n        s += \"]\";\n        return s;\n    }\n\n    Test&amp; add(const string&amp; S) {\n        _list.push_back(make_unique&lt;Test&gt;(S));\n        return *(_list.back());\n    }\n};\n\nint main() {\n    Test x(\"one\");\n    x.add(\"two\");\n    Test&amp; y = x.add(\"three\");\n    y.add(\"four\");\n\n    cout &lt;&lt; y.to_string() &lt;&lt; '\\n';\n    cout &lt;&lt; x.to_string() &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 2386, "user_id": 2029629, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/800231bb263aef96628dbefc2d27681d?s=128&d=identicon&r=PG", "display_name": "Carlos Eugenio Thompson Pinz&#243;n", "link": "https://stackoverflow.com/users/2029629/carlos-eugenio-thompson-pinz%c3%b3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 997, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1485374270, "creation_date": 1485371546, "question_id": 41859755, "link": "https://stackoverflow.com/questions/41859755/how-can-i-create-a-list-of-dynamic-objects-in-c", "title": "How can I create a list of dynamic objects in C++", "body": "<p>I have this simple program in C++</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;list&gt;\nusing namespace std;\n\nclass test {\n    private:\n        string _name;\n        list&lt;test*&gt; _list;\n    public:\n        test(const string&amp; S): _name(S) { this-&gt;_list.clear(); }\n\n        const string&amp; to_string() {\n            string*sp = new string(\"[\");\n            *sp += this-&gt;_name;\n            for(test*tp: this-&gt;_list) {\n                *sp += \",\";\n                *sp += tp-&gt;to_string();\n            }\n            *sp += \"]\";\n            return *sp;\n        }\n\n        test&amp; add(const string&amp; S) {\n            test*tp = new test(S);\n            this-&gt;_list.push_back(tp);\n            return *tp;\n        }\n};\n\nint main() {\n    test x(\"one\");\n    x.add(\"two\");\n    test y = x.add(\"three\");\n    y.add(\"four\");\n    cout &lt;&lt; y.to_string() &lt;&lt; '\\n';\n    cout &lt;&lt; x.to_string() &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>The idea is to create a list of nested lists. <code>y</code> is supposed to be an element of <code>x</code>, however when I modify <code>y</code>, then <code>x</code> is not modified.</p>\n\n<p>The desired output is:</p>\n\n<pre><code>[three,[four]]\n[one,[two],[three,[four]]]\n</code></pre>\n\n<p>but I get</p>\n\n<pre><code>[three,[four]]\n[one,[two],[three]]\n</code></pre>\n\n<p>I can probably solve the problem by returning a pointer in <code>test::add</code> and modifying <code>main</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main() {\n    test x(\"one\");\n    x.add(\"two\");\n    test*p = x.add(\"three\");\n    p-&gt;add(\"four\");\n    cout &lt;&lt; y-&gt;to_string() &lt;&lt; '\\n';\n    cout &lt;&lt; x.to_string() &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>However. Is there a way to use <code>y</code> as type <code>test</code> rather than <code>p</code> as type <code>test*</code>?</p>\n"}, {"tags": ["c++", "matrix", "armadillo"], "owner": {"reputation": 142, "user_id": 5341214, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t3CqEGTy5ow/AAAAAAAAAAI/AAAAAAAAAbc/7PCU9UxIzuQ/photo.jpg?sz=128", "display_name": "Giezi", "link": "https://stackoverflow.com/users/5341214/giezi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 515, "favorite_count": 1, "answer_count": 0, "score": 6, "last_activity_date": 1485376871, "creation_date": 1485371514, "last_edit_date": 1485376871, "question_id": 41859741, "link": "https://stackoverflow.com/questions/41859741/armadillo-element-wise-logical-and-between-two-matrices", "title": "Armadillo: element-wise logical AND between two matrices", "body": "<p>Is there a way to combine the result of two logical operations in armadillo?\nIn matlab, assuming a matrix <code>A</code> and two conditions, it would be done like this:</p>\n\n<pre><code>B = (A == 1) &amp; (A == 2)\n</code></pre>\n\n<p>where <code>B</code> is the matrix where <code>A</code> is equal to 1 and 2.\nI found a workaround in Armadillo:</p>\n\n<pre><code>umat B = ((A == 1) + (A == 2)) == 2\n</code></pre>\n\n<p>or</p>\n\n<pre><code>umat B = ((A == 1) % (A == 2))\n</code></pre>\n\n<p>which works, but I am sure there is a more efficient way to do that, which I haven't found yet.</p>\n"}, {"tags": ["c++", "opengl", "glsl", "shader"], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 4104594, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b41e2b9588b4dc6e90144f6c630d906e?s=128&d=identicon&r=PG&f=1", "display_name": "CNJMC1", "link": "https://stackoverflow.com/users/4104594/cnjmc1"}, "edited": false, "score": 1, "creation_date": 1485380688, "post_id": 41860012, "comment_id": 70908149, "body": "Thanks. I tested it and this seemed to work. I went back to look at the tutorials and it said to do exactly that when others didn&#39;t. Guess some people don&#39;t check to see if their code works and aren&#39;t as good as they claim to be. Thanks!"}], "tags": [], "owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "is_accepted": true, "score": 2, "last_activity_date": 1485372454, "creation_date": 1485372454, "answer_id": 41860012, "question_id": 41859688, "link": "https://stackoverflow.com/questions/41859688/why-is-my-glsl-transformation-not-rendering/41860012#41860012", "title": "Why is my GLSL transformation not rendering?", "body": "<p>The problem is not the code in the shader, but the data you pass to <code>transformation</code>:</p>\n\n<pre><code>glm::mat4 mat = glm::scale(mat, glm::vec3(2, .5, 0));\n</code></pre>\n\n<p>The <code>glm::scale function</code> multiplies a new scaling function to the <code>mat</code> you pass in. The problem is, that <code>mat</code> is not initialized when you pass it to <code>scale</code> and contains just some random garbage. What you actually want is to initialize the matrix first (as an identity matrix, but that's the default behavior), and then pass it to scale:</p>\n\n<pre><code>glm::mat4 mat;\nmat = glm::scale(mat, glm::vec3(2, .5, 0));\n</code></pre>\n\n<p>Note, that these two version are not equivalent in c++ since the first version doesn't call the constructor of <code>mat</code> before passing it to the function.</p>\n"}], "owner": {"reputation": 349, "user_id": 4104594, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b41e2b9588b4dc6e90144f6c630d906e?s=128&d=identicon&r=PG&f=1", "display_name": "CNJMC1", "link": "https://stackoverflow.com/users/4104594/cnjmc1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 41860012, "answer_count": 1, "score": 0, "last_activity_date": 1485372454, "creation_date": 1485371349, "question_id": 41859688, "link": "https://stackoverflow.com/questions/41859688/why-is-my-glsl-transformation-not-rendering", "title": "Why is my GLSL transformation not rendering?", "body": "<p>So I'm learning OpenGL and GLSL (obviously). I've followed several tutorials religiously on matrix transformations, but I can't figure out why the square isn't rendering. I've figured out through trial and error that my rendering code is fine, it's just when I do \"transformation * vec4(...)\" in the vertex shader that the program messes up. I checked the returned value of glGetUniformLocation and I got a return value of 0, so it's getting the location of the uniform. I've looked around and I haven't found a solution.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;memory.h&gt;\n#include &lt;stdlib.h&gt;\n#define GLEW_STATIC\n#include &lt;glew.h&gt;\n#include &lt;SDL.h&gt;\n#include &lt;math.h&gt;\n#include &lt;glm/glm.hpp&gt;\n#include &lt;glm/gtc/type_ptr.hpp&gt;\n#include &lt;glm/gtc/matrix_transform.hpp&gt;\n\nconst GLchar* VertShaderCode = \"\\\n#version 330 core\\n\\\nlayout (location = 0) in vec2 position;\\n\\\nuniform mat4 transformation;\\n\\\nvoid main ()\\n\\\n{\\n\\\n    vec4 lol = transformation * vec4(position.xy, 0, 1);\\n\\\n    gl_Position = lol;\\n\\\n}\\n\\\n\";\n\nconst GLchar* FragShaderCode = \"\\\n#version 330 core\\n\\\nvoid main ()\\n\\\n{\\n\\\n    gl_FragColor = vec4(1, 0, 1, 1);\\n\\\n}\\n\\\n\";\n\n#define SDL_main main\n\n#define scuffed !SDL_QuitRequested()\n\nint main()\n{\n    if (SDL_Init(SDL_INIT_EVERYTHING))\n    {\n        printf(\"Could not initialize SDL!\\n\");\n        return -4;\n    };\n\n    SDL_Window* window = SDL_CreateWindow(\"Testing Window\", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 420, 420, SDL_WINDOW_OPENGL);\n    if (!window)\n    {\n        printf(\"Could not create window!\\n\");\n        return -5;\n    };\n\n    SDL_GLContext context = SDL_GL_CreateContext(window);\n    if (!context)\n    {\n        printf(\"Could not create context!\\n\");\n        return -7;\n    };\n\n    if (glewInit() != GLEW_OK)\n    {\n        printf(\"Could not initialize GLEW!\\n\");\n        return -6;\n    };\n\n    GLint err;\n    char* log = NULL;\n\n    //printf(\"Vertex Shader Source: \\n%s\\n\",VertShaderCode);\n    GLuint VertShader = glCreateShader(GL_VERTEX_SHADER);\n    glShaderSource(VertShader,1,&amp;VertShaderCode,NULL);\n    glCompileShader(VertShader);\n    glGetShaderiv(VertShader,GL_COMPILE_STATUS,&amp;err);\n    if (err == GL_FALSE)\n    {\n        // Shader didn't compile.\n        glGetShaderiv(VertShader, GL_INFO_LOG_LENGTH, &amp;err);\n        log = (char*)malloc(err);\n        glGetShaderInfoLog(VertShader,err,NULL,log);\n        printf(\"Vertex shader could not be compiled!\\n\\n%s\\n\\n\",log);\n        return -1;\n    };\n\n    //printf(\"Fragment Shader Source: \\n%s\\n\", FragShaderCode);\n    GLuint FragShader = glCreateShader(GL_FRAGMENT_SHADER);\n    glShaderSource(FragShader, 1, &amp;FragShaderCode, NULL);\n    glCompileShader(FragShader);\n    glGetShaderiv(FragShader, GL_COMPILE_STATUS, &amp;err);\n    if (err == GL_FALSE)\n    {\n        // Shader didn't compile.\n        glGetShaderiv(FragShader, GL_INFO_LOG_LENGTH, &amp;err);\n        log = (char*)malloc(err);\n        glGetShaderInfoLog(FragShader, err, NULL, log);\n        printf(\"Fragment shader could not be compiled!\\n\\n%s\\n\\n\", log);\n        return -2;\n    };\n\n    GLuint Program = glCreateProgram();\n    glAttachShader(Program,VertShader);\n    glAttachShader(Program,FragShader);\n    glLinkProgram(Program);\n    glGetProgramiv(Program,GL_LINK_STATUS,&amp;err);\n    if (err == GL_FALSE)\n    {\n        // Program didn't link.\n        glGetProgramiv(Program,GL_INFO_LOG_LENGTH,&amp;err);\n        log = (char*)malloc(err);\n        glGetProgramInfoLog(Program,err,NULL,log);\n        printf(\"Program could not be linked!\\n\\n%s\\n\\n\",log);\n        return -3;\n    };\n\n    glUseProgram(Program);\n\n    GLuint vertBuff = 0, arrayBuff = 0, elementBuff = 0;\n    glGenVertexArrays(1, &amp;arrayBuff);\n    glGenBuffers(1, &amp;vertBuff);\n    glGenBuffers(1, &amp;elementBuff);\n    glBindVertexArray(arrayBuff);\n    glBindBuffer(GL_ARRAY_BUFFER, vertBuff);\n    //glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, elementBuff);\n\n    GLfloat vertices[] =\n    {\n        -0.5,  0.5,\n        -0.5, -0.5,\n         0.5, -0.5,\n\n         0.5, -0.5,\n        -0.5,  0.5,\n         0.5,  0.5,\n    };\n    GLubyte colors[] =\n    {\n        255,0,0,\n        0,255,0,\n        0,0,255\n    };\n\n    GLuint indicies[] =\n    {\n        0, 1, 2,\n        2, 0, 3,\n    };\n\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n\n    glEnableVertexAttribArray(0);\n\n    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, NULL);\n\n    glm::mat4 mat = glm::scale(mat, glm::vec3(2, .5, 0));\n    glUniformMatrix4fv(glGetUniformLocation(Program, \"transformation\"), 1, GL_FALSE, glm::value_ptr(mat));\n\n    while (scuffed)\n    {\n        glClear(GL_COLOR_BUFFER_BIT);\n\n        glDrawArrays(GL_TRIANGLES, 0, 6);\n\n        SDL_GL_SwapWindow(window);\n    }\n\n    glDeleteVertexArrays(1, &amp;arrayBuff);\n    glDeleteBuffers(1, &amp;vertBuff);\n    //glDeleteBuffers(1, &amp;elementBuff);\n\n    SDL_GL_DeleteContext(context);\n    SDL_DestroyWindow(window);\n    SDL_Quit();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arduino", "char", "avr-gcc", "avrdude"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1485371399, "post_id": 41859666, "comment_id": 70903229, "body": "What is <code>which I realised wrong as in avery iteration this will consume more memory !</code> supposed to mean?"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1485371511, "post_id": 41859666, "comment_id": 70903290, "body": "I realise you are wrong....Use <code>string</code> again. And <code>reserve</code> some space for better performance when appending."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1485372302, "post_id": 41859666, "comment_id": 70903736, "body": "Consider using <a href=\"http://www.cplusplus.com/reference/sstream/ostringstream/\" rel=\"nofollow noreferrer\"><code>std::ostringstream</code></a> instead."}, {"owner": {"reputation": 6272, "user_id": 3311276, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/tzd3h.png?s=128&g=1", "display_name": "Ciasto piekarz", "link": "https://stackoverflow.com/users/3311276/ciasto-piekarz"}, "reply_to_user": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1485373310, "post_id": 41859666, "comment_id": 70904278, "body": "@RobK  will this work <a href=\"https://gist.github.com/cmaglie/5883185\" rel=\"nofollow noreferrer\">gist.github.com/cmaglie/5883185</a>"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1485374031, "post_id": 41859666, "comment_id": 70904668, "body": "Naming variables in all upper case is a really bad practice. Almost every C and C++ programmer on earth will think it&#39;s a macro."}, {"owner": {"reputation": 6272, "user_id": 3311276, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/tzd3h.png?s=128&g=1", "display_name": "Ciasto piekarz", "link": "https://stackoverflow.com/users/3311276/ciasto-piekarz"}, "edited": false, "score": 0, "creation_date": 1485374070, "post_id": 41859666, "comment_id": 70904689, "body": "Ok cool will change it thanks"}], "answers": [{"comments": [{"owner": {"reputation": 6272, "user_id": 3311276, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/tzd3h.png?s=128&g=1", "display_name": "Ciasto piekarz", "link": "https://stackoverflow.com/users/3311276/ciasto-piekarz"}, "edited": false, "score": 0, "creation_date": 1485373961, "post_id": 41860379, "comment_id": 70904633, "body": "Using <code>::strcat(INSERT_SQL, &quot;INSERT INTO....</code> what namespace <code>strcat</code> would it be using? Do I not have to be explicit?"}, {"owner": {"reputation": 364, "user_id": 5875229, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3JQq.jpg?s=128&g=1", "display_name": "JazzSoft", "link": "https://stackoverflow.com/users/5875229/jazzsoft"}, "reply_to_user": {"reputation": 6272, "user_id": 3311276, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/tzd3h.png?s=128&g=1", "display_name": "Ciasto piekarz", "link": "https://stackoverflow.com/users/3311276/ciasto-piekarz"}, "edited": false, "score": 0, "creation_date": 1485374193, "post_id": 41860379, "comment_id": 70904753, "body": "strcat() is a standard C library function defined in string.h.  All C functions are in the global name scope.  You don&#39;t have to add &quot;::&quot; at the beginning, if you don&#39;t want."}], "tags": [], "owner": {"reputation": 364, "user_id": 5875229, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3JQq.jpg?s=128&g=1", "display_name": "JazzSoft", "link": "https://stackoverflow.com/users/5875229/jazzsoft"}, "is_accepted": false, "score": 0, "last_activity_date": 1485373699, "creation_date": 1485373699, "answer_id": 41860379, "question_id": 41859666, "link": "https://stackoverflow.com/questions/41859666/defining-char-datatype-and-and-using-with-sprintf/41860379#41860379", "title": "defining char datatype and and using with sprintf", "body": "<p>Compiler is exactly telling you what's wrong.</p>\n\n<pre><code>char INSERT_SQL[295];\nINSERT_SQL = \"\";\n</code></pre>\n\n<p>You probably want to do like:</p>\n\n<pre><code>char INSERT_SQL[295];\nINSERT_SQL[0] = 0x00;\n::strcat(INSERT_SQL, \"INSERT INTO....\n</code></pre>\n"}], "owner": {"reputation": 6272, "user_id": 3311276, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/tzd3h.png?s=128&g=1", "display_name": "Ciasto piekarz", "link": "https://stackoverflow.com/users/3311276/ciasto-piekarz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485373699, "creation_date": 1485371293, "last_edit_date": 1485372282, "question_id": 41859666, "link": "https://stackoverflow.com/questions/41859666/defining-char-datatype-and-and-using-with-sprintf", "title": "defining char datatype and and using with sprintf", "body": "<p>I had following setup earlier:</p>\n\n<pre><code>    String INSERT_SQL = \"\";\n    // inserting to sql database on mysql server\n    INSERT_SQL = \"\";\n    INSERT_SQL.concat(\"INSERT INTO arduinoSensorData.sensorLog (out_temperature, out_humidity, \");\n    INSERT_SQL.concat(\" drwngRoom_temperature, drwngRoom_humidity, pot1_soilMoisture, pot1_avg_SoilMoisture,\");\n    INSERT_SQL.concat(\" wateringPot1) VALUES ('\");\n    INSERT_SQL.concat(outdoorTempInC);\n    INSERT_SQL.concat(\"', '\");\n    INSERT_SQL.concat(outoorHumidity);\n    INSERT_SQL.concat(\"', '\");\n    INSERT_SQL.concat(indorTempinC);\n    INSERT_SQL.concat(\"', '\");\n    INSERT_SQL.concat(h);\n    INSERT_SQL.concat(\"', '\");\n    INSERT_SQL.concat(val);\n    INSERT_SQL.concat(\"', '\");\n    INSERT_SQL.concat(avgVal);\n    INSERT_SQL.concat(\"', '\");\n    if (wateringBasedOnAlarm){\n      waterMsg = \"water based on alarm\";\n\n    } else waterMsg = soilMsg;\n    INSERT_SQL.concat(waterMsg);\n    INSERT_SQL.concat(\"');\");   \n</code></pre>\n\n<p>And later, I was converting it to char like this:</p>\n\n<p><code>const char *mycharp = INSERT_SQL.c_str();</code></p>\n\n<p>Which I realised wrong approach as in every iteration of the loop function of arduino MCU this will consume more memory!</p>\n\n<p>So, I decided to change <code>INSERT_SQL</code> to char instead of declaring it as <code>String</code> at first place.</p>\n\n<p>I initialised INSERT_SQL as char like this:</p>\n\n<pre><code>char INSERT_SQL[295];\n</code></pre>\n\n<p>Because I realised the total length would not be more than 295,</p>\n\n<p>But when compiler reaches the line: </p>\n\n<pre><code>INSERT_SQL = \"\";\n</code></pre>\n\n<p>I got an error saying:</p>\n\n<blockquote>\n  <p>incompatible types in assignment of 'const char [1]' to 'char [295]'</p>\n</blockquote>\n\n<p>So, this is the first thing I need is to fix it and secondly, I think I cannot use <code>concat</code> with char datatype, so in that case how do I populate values to sql query using <code>sprintf</code>?</p>\n"}, {"tags": ["c++", "qt", "visual-studio-2012"], "comments": [{"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1485371908, "post_id": 41859582, "comment_id": 70903492, "body": "Are you using absolute paths for the files? Did you add quotes around the variables?"}, {"owner": {"reputation": 3, "user_id": 7463857, "user_type": "registered", "profile_image": "https://graph.facebook.com/744617565696721/picture?type=large", "display_name": "Rachel Gold", "link": "https://stackoverflow.com/users/7463857/rachel-gold"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1485439986, "post_id": 41859582, "comment_id": 70932369, "body": "I tried it with quotes as I posted in my original post. I also tried it without quotes. Currently, I have absolute paths (see my original post)."}, {"owner": {"reputation": 3, "user_id": 7463857, "user_type": "registered", "profile_image": "https://graph.facebook.com/744617565696721/picture?type=large", "display_name": "Rachel Gold", "link": "https://stackoverflow.com/users/7463857/rachel-gold"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1485440617, "post_id": 41859582, "comment_id": 70932842, "body": "Since both of your questions appear to be answered by my original post, I&#39;m guessing that I misunderstood your questions."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1485443419, "post_id": 41859582, "comment_id": 70934957, "body": "I was talking about the custom build tool configuration."}, {"owner": {"reputation": 3, "user_id": 7463857, "user_type": "registered", "profile_image": "https://graph.facebook.com/744617565696721/picture?type=large", "display_name": "Rachel Gold", "link": "https://stackoverflow.com/users/7463857/rachel-gold"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1485455284, "post_id": 41859582, "comment_id": 70942933, "body": "If you are talking about the &quot;Command Line&quot; field of the Custom Build Tool for analysis.ui, I am using the exact same string, character for character as I tried on the command line, as stated in my original post."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1485455442, "post_id": 41859582, "comment_id": 70943026, "body": "I don&#39;t think you are using the custom build tool as you should. Please read this <a href=\"https://msdn.microsoft.com/en-us/library/hefydhhy.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/hefydhhy.aspx</a>"}, {"owner": {"reputation": 3, "user_id": 7463857, "user_type": "registered", "profile_image": "https://graph.facebook.com/744617565696721/picture?type=large", "display_name": "Rachel Gold", "link": "https://stackoverflow.com/users/7463857/rachel-gold"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1485526816, "post_id": 41859582, "comment_id": 70974258, "body": "No, that page describes exactly what I am doing. Please note. I have already said that the description is displayed, the UIC command just doesn&#39;t seem to do anything.Replacing the UIC command with a regular DOS command such as &quot;Dir&quot; does, in fact, do what it is supposed to do. Telling uic.exe to display the version with &quot;-v&quot; doesn&#39;t result in the version being displayed. In deed, passing bogus arguments to uic.exe doesn&#39;t cause any errors to be displayed. It is as if uic.exe doesn&#39;t do anything if run from the build tools."}, {"owner": {"reputation": 3, "user_id": 7463857, "user_type": "registered", "profile_image": "https://graph.facebook.com/744617565696721/picture?type=large", "display_name": "Rachel Gold", "link": "https://stackoverflow.com/users/7463857/rachel-gold"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1485527050, "post_id": 41859582, "comment_id": 70974443, "body": "Please note that this is the configuration set up by qt. The only thing that I have done is to replace the symbols and variables with fixed path specifications in order to get things working."}, {"owner": {"reputation": 3, "user_id": 7463857, "user_type": "registered", "profile_image": "https://graph.facebook.com/744617565696721/picture?type=large", "display_name": "Rachel Gold", "link": "https://stackoverflow.com/users/7463857/rachel-gold"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1485527151, "post_id": 41859582, "comment_id": 70974511, "body": "This used to work on another machine (which has since died). It is possible that it was using an older version of visual studio. Maybe there is some bug with visual studio 2012 and qt 5.1.0"}], "owner": {"reputation": 3, "user_id": 7463857, "user_type": "registered", "profile_image": "https://graph.facebook.com/744617565696721/picture?type=large", "display_name": "Rachel Gold", "link": "https://stackoverflow.com/users/7463857/rachel-gold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485371037, "creation_date": 1485371037, "question_id": 41859582, "link": "https://stackoverflow.com/questions/41859582/unable-to-run-qt-uic-as-custom-build-tool", "title": "Unable to run QT UIC as custom build tool", "body": "<p>When I run the following command line, everything works\n\"c:\\Tools64\\Qt\\5.1.0\\msvc-2012\\bin\\uic.exe\" -o \"c:\\cygwin64\\home\\admin\\DiagdataAnalysis\\GUI\\Analysis\\GeneratedFiles\\ui_analysis.h\" \"C:\\cygwin64\\home\\admin\\DiagdataAnalysis\\GUI\\Analysis\\analysis.ui\"</p>\n\n<p>The exact same command line when put in the custom build tool for analysis.ui does nothing. Yes, I see the description being displayed but the file is not created.</p>\n\n<p>I tried changing the command line to \"dir\" and I did indeed see the directory being display. I also tried adding a \"-v\" to see the uic.exe version and again I saw nothing except the description.</p>\n\n<p>For some reason, uic.exe does not work when run from visual studio 2012.\nI am using QT version 5.1.0</p>\n"}, {"tags": ["android", "c++", "android-ndk", "cross-compiling", "ndk-build"], "answers": [{"tags": [], "owner": {"reputation": 2431, "user_id": 372767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9a61e56ce47cce015070f244d9cd024?s=128&d=identicon&r=PG", "display_name": "Chris Foster", "link": "https://stackoverflow.com/users/372767/chris-foster"}, "is_accepted": true, "score": 0, "last_activity_date": 1486056413, "creation_date": 1486056413, "answer_id": 42008585, "question_id": 41859579, "link": "https://stackoverflow.com/questions/41859579/how-to-resolve-relocations-in-generic-elf-during-ndk-build/42008585#42008585", "title": "How to resolve &quot;Relocations in Generic ELF&quot; during ndk-build?", "body": "<p>I discovered the problem, but I wish I had a more insightful answer. Apparently the build process had created two library files. The one that I inspected was, of course, ARM64. However the one that I actually copied to the Android device was x86.</p>\n\n<p>So, the error message was correct and so was the library file, but there was more than one file involved. If you're running into the same problem and pretty sure your library is ARM64, double check that's actually the same file that is being compiled into the ndk build!</p>\n"}], "owner": {"reputation": 2431, "user_id": 372767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9a61e56ce47cce015070f244d9cd024?s=128&d=identicon&r=PG", "display_name": "Chris Foster", "link": "https://stackoverflow.com/users/372767/chris-foster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2369, "favorite_count": 1, "accepted_answer_id": 42008585, "answer_count": 1, "score": 0, "last_activity_date": 1486056413, "creation_date": 1485371032, "question_id": 41859579, "link": "https://stackoverflow.com/questions/41859579/how-to-resolve-relocations-in-generic-elf-during-ndk-build", "title": "How to resolve &quot;Relocations in Generic ELF&quot; during ndk-build?", "body": "<p>I'm trying to build a static library using a standalone toolchain for a project that has its own build process, which I then wrap with a C++ library and expose to Android (compiled with ndk-build). However, on the ndk-build step I receive the following error:</p>\n\n<pre><code>\u279c  jni /Users/chrisfosterelli/Library/Android/sdk/ndk-bundle/ndk-build                    \n[arm64-v8a] Compile++      : wrapper &lt;= wrapper.cpp\nIn file included from /Users/chrisfosterelli/workspace/android/jni/wrapper.cpp:9:\nIn file included from ../prebuild/include/valhalla/meili/universal_cost.h:7:\nIn file included from ../prebuild/include/valhalla/sif/dynamiccost.h:4:\nIn file included from ../prebuild/include/valhalla/baldr/directededge.h:5:\n../prebuild/include/valhalla/baldr/graphconstants.h:432:11: warning: 21 enumeration values not handled in switch: 'kRoad', 'kRamp', 'kTurnChannel'... [-Wswitch]\n  switch (use) {\n          ^\n1 warning generated.\n[arm64-v8a] SharedLibrary  : libwrapper.so\n/Users/chrisfosterelli/Library/Android/sdk/ndk-bundle/toolchains/aarch64-linux-android-4.9/prebuilt/darwin-x86_64/lib/gcc/aarch64-linux-android/4.9.x/../../../../aarch64-linux-android/bin/ld: /Users/chrisfosterelli/workspace/android/jni/../prebuild/libvalhalla_meili.a(libvalhalla_meili_la-map_matcher_factory.o): Relocations in generic ELF (EM: 62)\n[...above message repeated many times...]\n/Users/chrisfosterelli/workspace/android/jni/../prebuild/libvalhalla_meili.a: error adding symbols: File in wrong format\nclang++: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [/Users/chrisfosterelli/workspace/android/obj/local/arm64-v8a/libwrapper.so] Error 1\n\u279c  jni ls /Users/chrisfosterelli/Library/Android/sdk/ndk-bundle/\n</code></pre>\n\n<p>This error indicates, as far as I can tell, that I'm trying to mix and match binaries compiled for different architectures. However, from what I can tell the library is the correct architecture:</p>\n\n<pre><code>root@eacbdb1c0e46:/meili/meili2/newtest# ar x libvalhalla_meili.a \nroot@eacbdb1c0e46:/meili/meili2/newtest# file libvalhalla_meili_la-map_matcher_factory.o \nlibvalhalla_meili_la-map_matcher_factory.o: ELF 64-bit LSB relocatable, ARM aarch64, version 1 (SYSV), not stripped\nroot@eacbdb1c0e46:/meili/meili2/newtest#\n</code></pre>\n\n<p>FWIW, these are my current <code>Application.mk</code>, </p>\n\n<pre><code>APP_STL := c++_static\nAPP_CPPFLAGS := -frtti -std=gnu++11 -D_GLIBCXX_USE_C99\nAPP_CPPFLAGS += -fexceptions\nNDK_TOOLCHAIN_VERSION := clang\nAPP_LDFLAGS := -latomic\nAPP_PLATFORM := android-21\nAPP_ABI := arm64-v8a\n</code></pre>\n\n<p>and <code>Android.mk</code>,</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\n\n# static library info\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libvalhalla_meili\nLOCAL_SRC_FILES := ../prebuild/libvalhalla_meili.a\nLOCAL_EXPORT_C_INCLUDES := ../prebuild/include\ninclude $(PREBUILT_STATIC_LIBRARY)\n\n# wrapper info\ninclude $(CLEAR_VARS)\nLOCAL_C_INCLUDES += ../prebuild/include\nLOCAL_MODULE    := wrapper\nLOCAL_SRC_FILES := wrapper.cpp\nLOCAL_STATIC_LIBRARIES := libvalhalla_meili\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<p>Any ideas how to resolve this? I've tried a number of things but all of them lead to more (more obscure) errors, so I'm hoping someone here can point me in the correct direction!</p>\n"}, {"tags": ["c++", "memory-leaks"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485371008, "post_id": 41859530, "comment_id": 70902977, "body": "Can you show the leak report?  It should be showing line numbers where the allocation occurred for each block that leaked."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1485371088, "post_id": 41859530, "comment_id": 70903020, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/30325372/memory-leaks-despite-destructor-call\">Memory leaks despite destructor call</a>"}, {"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 1, "creation_date": 1485371131, "post_id": 41859530, "comment_id": 70903056, "body": "Not related to your issue, but you have a bug in <code>y &lt; w</code>. It should read <code>y &lt; h</code>."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1485371313, "post_id": 41859530, "comment_id": 70903184, "body": "Why would the framework put <i>imaginary</i> anything? Isn&#39;t the point - calculating the actual memory allocations, rather that imagining various scenarios?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1485371846, "post_id": 41859530, "comment_id": 70903462, "body": "<b><i>is there any particular reason why the memory dump occurs before the execution finishes rather than after exiting main and before the process is handed back to the OS?</i></b> Because the leak report is generated when  you tell it to happen (when you call <code>_CrtDumpMemoryLeaks();</code>)"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1485378400, "post_id": 41859530, "comment_id": 70906999, "body": "In<code>int main() {Pizza p(10,10);  _CrtDumpMemoryLeaks();}</code>, <code>p</code> will be destructed AFTER <code>_CrtDumpMemoryLeaks()</code> returns - i.e. as it passes out of scope from <code>main()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1485371178, "post_id": 41859604, "comment_id": 70903089, "body": "Or OP could simply call <code>_CrtSetDbgFlag ( _CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF );</code> at the beginning of his application."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1485371257, "post_id": 41859604, "comment_id": 70903143, "body": "@AlgirdasPreid\u017eius, I think, this warrants a separate answer."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1485371736, "post_id": 41859604, "comment_id": 70903414, "body": "@SergeyA Point taken :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 4, "creation_date": 1485371934, "post_id": 41859604, "comment_id": 70903517, "body": "@Nick _CrtDumpMemoryLeaks() is a function (or something that calls a function), so you get the leak dump when you call it. This is intentional, so you can place it at places of interest in your code, not just at the end of main()."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": true, "score": 3, "last_activity_date": 1485371098, "creation_date": 1485371098, "answer_id": 41859604, "question_id": 41859530, "link": "https://stackoverflow.com/questions/41859530/c-memory-leak-detection-happening-at-wrong-time-c-arrays/41859604#41859604", "title": "C++ Memory Leak Detection Happening at Wrong Time? (C Arrays)", "body": "<p>If the program exits, you obviously don't have any memory leaks, as all memory is handed back to the OS. The easiest way to get the destructor called is simply to add another scope:</p>\n\n<pre><code>int main() {\n    {\n         Pizza p(10,10);\n    }\n    _CrtDumpMemoryLeaks();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "is_accepted": false, "score": 3, "last_activity_date": 1485371722, "creation_date": 1485371722, "answer_id": 41859803, "question_id": 41859530, "link": "https://stackoverflow.com/questions/41859530/c-memory-leak-detection-happening-at-wrong-time-c-arrays/41859803#41859803", "title": "C++ Memory Leak Detection Happening at Wrong Time? (C Arrays)", "body": "<p>As mentioned in the article, you <a href=\"https://msdn.microsoft.com/en-us/library/x98tx3cf.aspx\" rel=\"nofollow noreferrer\">linked in the question</a>:</p>\n\n<blockquote>\n  <p>If your application has multiple exits, you do not need to manually place a call to _CrtDumpMemoryLeaks at every exit point. A call to <code>_CrtSetDbgFlag</code> at the beginning of your application will cause an automatic call to <code>_CrtDumpMemoryLeaks</code> at each exit point. You must set the two bit fields shown here: <code>_CrtSetDbgFlag (_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);</code>.</p>\n</blockquote>\n\n<p>So, you could call it, as follows:</p>\n\n<pre><code>int main ()\n    {\n    _CrtSetDbgFlag (_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);\n    // Your actual code\n    }\n</code></pre>\n"}], "owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 41859604, "answer_count": 2, "score": 2, "last_activity_date": 1485372020, "creation_date": 1485370819, "last_edit_date": 1485372020, "question_id": 41859530, "link": "https://stackoverflow.com/questions/41859530/c-memory-leak-detection-happening-at-wrong-time-c-arrays", "title": "C++ Memory Leak Detection Happening at Wrong Time? (C Arrays)", "body": "<p>I have the following struct in C++ (don't ask why I'm not using <code>std::vector</code> instead of C arrays, that's not the question).</p>\n\n<pre><code>struct Pizza {\n    int w;\n    int h;\n    char** pizza;\n    Pizza(int width, int height) {\n        w = width;\n        h = height; \n        pizza = new char*[w];\n        for (int x = 0; x &lt; w; x++) {\n            pizza[x] = new char[h];\n            for (int y = 0; y &lt; h; y++) {\n                pizza[x][y] = '\\0';\n            }\n        }\n    }\n    ~Pizza() {\n        for (int x = 0; x &lt; w; x++) {\n            delete[] pizza[x];\n        }\n        delete[] pizza;\n    }\n};\n</code></pre>\n\n<p>I'm using VS2015 and am using:</p>\n\n<pre><code>#define _CRTDBG_MAP_ALLOC  \n#include &lt;stdlib.h&gt;  \n#include &lt;crtdbg.h&gt;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>_CrtDumpMemoryLeaks();\n</code></pre>\n\n<p>to detect memory leaks and was surprised to see that I had a memory leak with the following code:</p>\n\n<pre><code>int main() {\n    Pizza p(10,10);\n    _CrtDumpMemoryLeaks();\n}\n</code></pre>\n\n<p>as I was under the impression that <code>_CrtDumpMemoryLeaks()</code> would only detect and display memory leaks after execution (and hence the Pizza destructor would have been called).  As it turns out the following code</p>\n\n<pre><code>int main() {\n    Pizza *p = new Pizza(10,10);\n    delete p;\n    _CrtDumpMemoryLeaks();\n}\n</code></pre>\n\n<p>does not produce a memory leak.  Am I just misunderstanding this quote from <a href=\"https://msdn.microsoft.com/en-us/library/x98tx3cf.aspx\" rel=\"nofollow noreferrer\">MSDN</a>:</p>\n\n<blockquote>\n  <p>you can place a call to _CrtDumpMemoryLeaks before an application exit\n  point to display a memory-leak report when your application exits</p>\n</blockquote>\n\n<p>or is something else going on here?</p>\n\n<p>I was expecting:</p>\n\n<pre><code>int main() {\n    Pizza p(10,10);\n    // Imaginary p.~Pizza();\n    _CrtDumpMemoryLeaks();\n}\n</code></pre>\n\n<p>to take place, i.e. the destructor is called first, rather than:</p>\n\n<pre><code>int main() {\n    Pizza p(10,10);\n    _CrtDumpMemoryLeaks();\n    // Imaginary p.~Pizza();\n}\n</code></pre>\n\n<p>where the destructor would be called after.</p>\n\n<p><b>EDIT:</b>\nLeak Report:</p>\n\n<pre><code>Detected memory leaks!\nDumping objects -&gt;\n{170} normal block at 0x01364070, 10 bytes long.\n Data: &lt;   (2&lt;FPZd&gt; 0A 14 1E 28 32 3C 46 50 5A 64 \n{169} normal block at 0x013642D8, 10 bytes long.\n Data: &lt;   $-6?HQZ&gt; 09 12 1B 24 2D 36 3F 48 51 5A \n{168} normal block at 0x01364380, 10 bytes long.\n Data: &lt;    (08@HP&gt; 08 10 18 20 28 30 38 40 48 50 \n{167} normal block at 0x013640E0, 10 bytes long.\n Data: &lt;    #*18?F&gt; 07 0E 15 1C 23 2A 31 38 3F 46 \n{166} normal block at 0x01364658, 10 bytes long.\n Data: &lt;     $*06&lt;&gt; 06 0C 12 18 1E 24 2A 30 36 3C \n{165} normal block at 0x013644D0, 10 bytes long.\n Data: &lt;      #(-2&gt; 05 0A 0F 14 19 1E 23 28 2D 32 \n{164} normal block at 0x01364348, 10 bytes long.\n Data: &lt;        $(&gt; 04 08 0C 10 14 18 1C 20 24 28 \n{163} normal block at 0x013645E8, 10 bytes long.\n Data: &lt;          &gt; 03 06 09 0C 0F 12 15 18 1B 1E \n{162} normal block at 0x013643B8, 10 bytes long.\n Data: &lt;          &gt; 02 04 06 08 0A 0C 0E 10 12 14 \n{161} normal block at 0x01364700, 10 bytes long.\n Data: &lt;          &gt; 01 02 03 04 05 06 07 08 09 0A \n{160} normal block at 0x0135DCA8, 40 bytes long.\n Data: &lt; G6  C6  E6 HC6 &gt; 00 47 36 01 B8 43 36 01 E8 45 36 01 48 43 36 01 \nObject dump complete.\n</code></pre>\n\n<p>Here I used <code>(x+1)*(y+1)</code> to fill the values.</p>\n"}, {"tags": ["c++", "c", "boost", "streambuf"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1485370989, "post_id": 41859487, "comment_id": 70902970, "body": "Smart quotes like <code>\u201cSomeFile\u201d</code> show this isn&#39;t the actual code. Sorry about removing and restoring the C tag."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1485371265, "post_id": 41859487, "comment_id": 70903148, "body": "@WeatherVane I&#39;m not sure you were wrong. This is definitely a question about C++, the fact that it uses facilities that were inherited from C shouldn&#39;t be relevant."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1485371495, "post_id": 41859487, "comment_id": 70903279, "body": "@MarkRansom I was put down recently for removing a C tag when there was a mention of C in the question. Here, OP is importing the library in a C program."}, {"owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1485378449, "post_id": 41859487, "comment_id": 70907027, "body": "Maybe you want <a href=\"http://www.cplusplus.com/reference/ios/ios_base/sync_with_stdio/\" rel=\"nofollow noreferrer\"><code>ios_base::sync_with_stdio()</code></a>?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1485380440, "post_id": 41859487, "comment_id": 70908043, "body": "Yes, questions about interoperability between C and C++ code (which this is) should have both tags"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1485381324, "post_id": 41859487, "comment_id": 70908485, "body": "@G.Sliepen: <code>sync_with_stdio</code> only works on <code>stdin</code>, <code>stdout</code>, <code>stderr</code> and not arbitrary file handles."}], "answers": [{"comments": [{"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 0, "creation_date": 1485382903, "post_id": 41862201, "comment_id": 70909269, "body": "As @ben-voigt points out, this is a gcc extension.  There&#39;s no portable way to do this."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 2, "creation_date": 1485383305, "post_id": 41862201, "comment_id": 70909448, "body": "@MarshallClow: Which is unfortunate, because the standard library is absolutely required to make <code>streambuf</code> classes that layer on top of <code>FILE*</code> to get the correct <code>sync_with_stdio()</code> behavior for <code>cin</code>, <code>cout</code>, <code>cerr</code>, and <code>clog</code>.  Those classes just aren&#39;t exposed in any standard way for use with other files/streams."}, {"owner": {"reputation": 137, "user_id": 7217960, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d5f75b114d016f1e68e076580c01ae0b?s=128&d=identicon&r=PG&f=1", "display_name": "Guett31", "link": "https://stackoverflow.com/users/7217960/guett31"}, "edited": false, "score": 0, "creation_date": 1485389121, "post_id": 41862201, "comment_id": 70911446, "body": "@BenVoigt: If the C <code>FILE</code> object and <code>stdio_filebuf</code> object share the same underlying buffer, there no need to constantly flush it. Right?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 137, "user_id": 7217960, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d5f75b114d016f1e68e076580c01ae0b?s=128&d=identicon&r=PG&f=1", "display_name": "Guett31", "link": "https://stackoverflow.com/users/7217960/guett31"}, "edited": false, "score": 1, "creation_date": 1485389574, "post_id": 41862201, "comment_id": 70911568, "body": "@Guett31: You assume there&#39;s only one buffer, while in fact they are layered.  <code>stdio_filebuf</code> uses buffered writes (such as <code>fwrite</code>) to access the <code>FILE*</code>; those pass through the stdio buffer.  But that doesn&#39;t mean that there is no buffering in <code>stdio_filebuf</code> itself, in order to pass larger chunks to <code>fwrite</code> at a time.  In fact input <code>streambuf</code> objects need a buffer in order to implement <code>ungetc</code>."}, {"owner": {"reputation": 137, "user_id": 7217960, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d5f75b114d016f1e68e076580c01ae0b?s=128&d=identicon&r=PG&f=1", "display_name": "Guett31", "link": "https://stackoverflow.com/users/7217960/guett31"}, "edited": false, "score": 0, "creation_date": 1485394413, "post_id": 41862201, "comment_id": 70912806, "body": "@BenVoigt It makes sense. Thank you. The constructor of <code>stdio_filebuf</code> that you mentioned in your answer takes an argument for the buffer size, and I was thinking about setting it to 0. However, the fact that it is referred as the <code>preferred size of internal buffer</code> combined with your explanation  about <code>ungetc</code> makes me think that even if I pass it 0, it might not actually be 0."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 3, "last_activity_date": 1485383229, "last_edit_date": 1485383229, "creation_date": 1485380716, "answer_id": 41862201, "question_id": 41859487, "link": "https://stackoverflow.com/questions/41859487/how-to-create-a-c-streambuf-object-from-a-c-file-sharing-its-buffer-and-buf/41862201#41862201", "title": "How to create a C++ streambuf object from a C FILE*, sharing its buffer (and buffer state) with the FILE object pointed to?", "body": "<p>There exists a (non-standard, looking for the reference now) C++ streambuf that is a layer on top of stdio, then it would be sufficient to constantly flush the stream buffer.</p>\n\n<p>The automatic-flush part is portably accomplished using <code>std::unitbuf</code>:</p>\n\n<pre><code>mysb &lt;&lt; std::unitbuf;\n</code></pre>\n\n<hr>\n\n<p>Ahh, it's named <code>stdio_filebuf</code> and comes with gcc's C++ library: <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.6.2/libstdc++/api/a00069.html#ad8e56ce0589e74539108cb5843e50e7b\" rel=\"nofollow noreferrer\">__gnu_cxx::stdio_filebuf::stdio_filebuf constructor</a></p>\n"}], "owner": {"reputation": 137, "user_id": 7217960, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d5f75b114d016f1e68e076580c01ae0b?s=128&d=identicon&r=PG&f=1", "display_name": "Guett31", "link": "https://stackoverflow.com/users/7217960/guett31"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 41862201, "answer_count": 1, "score": 2, "last_activity_date": 1485392782, "creation_date": 1485370680, "last_edit_date": 1485392782, "question_id": 41859487, "link": "https://stackoverflow.com/questions/41859487/how-to-create-a-c-streambuf-object-from-a-c-file-sharing-its-buffer-and-buf", "title": "How to create a C++ streambuf object from a C FILE*, sharing its buffer (and buffer state) with the FILE object pointed to?", "body": "<p>How can I get a C++ streambuf object from a C FILE* so that it uses the FILE object\u2019s buffer, avoiding both objects to manage separate buffers while pointing to the same underlying file.</p>\n\n<p>It looks like there is no standard way of doing that.</p>\n\n<p>Boost has a stream_buffer class that has a constructor taking a file descriptor, allowing the use C++features on a file opened with C code. For example:</p>\n\n<pre><code>boost::iostreams::stream_buffer&lt;boost::iostreams::file_descriptor_sink&gt; mysb (fileno(myFileptr), boost::iostreams::never_close_handle));\n</code></pre>\n\n<p><code>myFileptr</code> being of type FILE*. The problem is that <code>mysb</code> and the FILE object pointed at by <code>myFileptr</code> will maintain separate buffers, so this is not an option\u2026</p>\n\n<p>Here is the context of my problem. I have to provide a dynamically linkable library with a C interface (all exported variables, function arguments and function return values must have C types), but the library is actually developed in C++.</p>\n\n<p>If I export a function, internally using C++ stream facilities, with this prototype</p>\n\n<pre><code>Void MyExportedFunct( FILE* myfile)\n</code></pre>\n\n<p>And, I import the library in a C program:</p>\n\n<pre><code>int main()\n{\n    FILE * fptr = fopen(\u201cSomeFile\u201d, \"w\");\n    fprintf(fptr, \u201cSome data.\u201d)\n    MyExportedFunct(fptr);\n    fprintf(fptr, \u201cSome more data\u2026\u201d)\n    return 0; \n} \n</code></pre>\n\n<p>I would like the data to be written to the file actually sent in the correct order (avoiding interleaved characters).</p>\n\n<p>Any suggestion on how to achieve this, or for another approach, is welcome.</p>\n"}, {"tags": ["c++", "vector", "pcm", "waveform"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1485370535, "post_id": 41859397, "comment_id": 70902707, "body": "Have you tried to write this? Shouldn&#39;t you try to complete it before you ask people here to do it for you?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1485370692, "post_id": 41859397, "comment_id": 70902797, "body": "&quot;How do I read this long file in such a way that I take blocks of 8192 samples once &quot; You can&#39;t - you need to write out your integers in unformatted mode using the write() function, rather than using formatted output."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1485376135, "post_id": 41859397, "comment_id": 70905851, "body": "You need to be clear if you are trying to write a binary file or human-readable ASCII file. Have you got, or can you get, a file that works which contains 8192 samples of 16-bit data? If your file is binary, it will have 2 bytes (16-bits) for each sample and no carriage returns or line feeds, so it will have exactly 16384 bytes and you will not be able to look at it in the Terminal with <code>more FILENAME.IQ</code>. If your file should be in ASCII, it will have more than 16384 bytes, and it will have newlines after each value and be readable with <code>more FILENAME.IQ</code>."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1485376517, "post_id": 41859397, "comment_id": 70906060, "body": "See also... <a href=\"http://stackoverflow.com/a/15274953/2836621\">stackoverflow.com/a/15274953/2836621</a>"}, {"owner": {"reputation": 101, "user_id": 4111768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e634239e231ee6ef34394ea603e75cdf?s=128&d=identicon&r=PG&f=1", "display_name": "jav321", "link": "https://stackoverflow.com/users/4111768/jav321"}, "edited": false, "score": 0, "creation_date": 1485377893, "post_id": 41859397, "comment_id": 70906743, "body": "So I understood. Yes, I tried but I just needed hints. So now I know that the better way is to write the data as in binary with no carriage returns. In this way, it is possible for me to acquire data in the form of blocks of 8192 samples of 16bit integers.  If on the other hand, I have samples written in human readable format in  a &quot;text file&quot; then the thing gets much more complicated.  Am I right here ?  I will try my code and post it in comments. Thank you all."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1486720841, "post_id": 41859397, "comment_id": 71478270, "body": "OS file access routines support block reading of &quot;any&quot; size but for that you need to specify OS and compiler/IDE. You can do this on both binary and text files but in case of text you need to write it formated so each number has exact the same amount of BYTES. The text files are slower as you need to convert between text and binary form in booth reading and writing operations (but are easily updated/viewed by human for debugging purposes)."}], "owner": {"reputation": 101, "user_id": 4111768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e634239e231ee6ef34394ea603e75cdf?s=128&d=identicon&r=PG&f=1", "display_name": "jav321", "link": "https://stackoverflow.com/users/4111768/jav321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485370361, "creation_date": 1485370361, "question_id": 41859397, "link": "https://stackoverflow.com/questions/41859397/c-read-write-16-bit-integer-file-by-blocks", "title": "C++ Read/Write 16 bit integer file by blocks", "body": "<p>So I write a log file containing 16 bit integer data. Using the following way.</p>\n\n<pre><code>std::ofstream waveform;\nwaveform.open(\"waveform.iq\");\ncout &lt;&lt; \"Opening file for waveform \" &lt;&lt; endl;\nLOOP WRITING BUFFER VALUES TO THE FILE\nwaveform  &lt;&lt; R0 &lt;&lt; std::endl; // Write Sample\nLOOP END\nwaveform.close();\n</code></pre>\n\n<p>At the end I have an iq file containing samples like</p>\n\n<pre><code>0\n16343\n30000\n.....\n</code></pre>\n\n<p>And so on.</p>\n\n<p>How do I read this long file in such a way that I take blocks of 8192 samples once in an array and then again until the whole file ends. If at the end the file does not have sufficient samples to fill 8192 samples then it repeats the waveform.</p>\n\n<p>Can I implement this reading of file using vector class ?</p>\n\n<p>Is writing done in an efficient manner ?</p>\n\n<p>Thank YOu.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485370012, "post_id": 41859269, "comment_id": 70902390, "body": "All c style string must be null terminated."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1485371871, "post_id": 41859269, "comment_id": 70903474, "body": "If you increase the columns by 1, you can place newline characters in the last column.  This should simplify printing, as you can print the entire array with one statement (remember to reserve an extra slot for the terminating nul character)."}], "answers": [{"comments": [{"owner": {"reputation": 215, "user_id": 7133187, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/SlxPs.png?s=128&g=1", "display_name": "alienCY", "link": "https://stackoverflow.com/users/7133187/aliency"}, "edited": false, "score": 0, "creation_date": 1485441448, "post_id": 41859432, "comment_id": 70933424, "body": "When I learn vectors and classes and those ansi command stuff I will try again I guess .. Thanks anyway ! By the way it doesn&#39;t print ,when I run it, correctly ( It prints lines of spaces and blocks, maybe it&#39;s that ansi stuff that doesn&#39;t work on my machine ? :/ )"}], "tags": [], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "is_accepted": true, "score": 2, "last_activity_date": 1485371497, "last_edit_date": 1485371497, "creation_date": 1485370464, "answer_id": 41859432, "question_id": 41859269, "link": "https://stackoverflow.com/questions/41859269/2d-arrays-and-coordinates/41859432#41859432", "title": "2D arrays and Coordinates", "body": "<p>Some issues:</p>\n\n<ul>\n<li>C++ uses 0-based indexing. You want <code>for (int row = 0; row &lt; 80; ++row)</code>.</li>\n<li>You are looping through the entire array just to add a space, why not use <code>screen[2][2]=space</code>?</li>\n<li>You are printing the entire array to the screen, but the array does not include newlines, so you are relying on the console to wrap, is this a safe assumptions?</li>\n<li>Your string does not include the required <a href=\"https://en.wikipedia.org/wiki/Null-terminated_string\" rel=\"nofollow noreferrer\">null-termination</a>, so extra characters are printed.</li>\n<li>You have ordered your array as <a href=\"https://en.wikipedia.org/wiki/Row-_and_column-major_order\" rel=\"nofollow noreferrer\">column-major</a>. I suspect you'll want to use row-major instead.</li>\n</ul>\n\n<p>Since you're using C++, I'd probably write your code like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass Screen {\n public:\n  typedef uint8_t schar;\n  std::vector&lt;schar&gt; data; //Store data in a flat array: increases speed by improving caching\n  int width;\n  int height;\n  Screen(int width, int height, schar initchar){\n    this-&gt;width = width;     //'this' refers to the current instantiation of this object\n    this-&gt;height = height;\n    data.resize(width*height,initchar); //Resize vector and set its values\n  }\n  schar&amp; operator()(int x, int y){\n    return data[y*width+x];\n  }\n  void setAll(schar initchar){\n    std::fill(data.begin(),data.end(),initchar);\n  }\n  void print() const {\n    std::cout&lt;&lt;\"\\033[2J\"; //ANSI command: clears the screen, moves cursor to upper left\n    for(int y=0;y&lt;height;y++){\n      for(int x=0;x&lt;width;x++)\n        std::cout&lt;&lt;data[y*width+x];\n      std::cout&lt;&lt;\"\\n\";     //Much faster than std::endl\n    }\n    std::cout&lt;&lt;std::flush; //Needed to guarantee screen displays\n  }\n};\n\nint main(){\n  const int WIDTH  = 80;\n  const int HEIGHT = 20;\n\n  uint8_t block {219}; // \u2588\n  uint8_t space {32};  // ' '\n\n  Screen screen(WIDTH,HEIGHT,block);\n  screen(2,2) = space;\n  screen.print();\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 215, "user_id": 7133187, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/SlxPs.png?s=128&g=1", "display_name": "alienCY", "link": "https://stackoverflow.com/users/7133187/aliency"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1422, "favorite_count": 0, "accepted_answer_id": 41859432, "answer_count": 1, "score": 0, "last_activity_date": 1485371497, "creation_date": 1485369960, "question_id": 41859269, "link": "https://stackoverflow.com/questions/41859269/2d-arrays-and-coordinates", "title": "2D arrays and Coordinates", "body": "<p>I'm trying to just print space in my \"canvas\" ( with coordinates (2,2) for example) by editing my 80x20 grid  made by \u2588 blocks in the console window.</p>\n\n<ul>\n<li><p>Please suggest me better ways of creating the grid in the first place \n( I've just learned for-each loops)</p></li>\n<li><p>Why do I get those 3 characters after running the program ?</p></li>\n<li><p>Why isn't the space on the (2,2) block but obviously on the first row somewhere in the mid ?</p></li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/eWZQe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eWZQe.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Code :</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n uint8_t block {219}; // \u2588\n uint8_t space {32};  // ' '\n\n uint8_t screen[80][20] {};\n\n for (auto &amp;row : screen)   // make the \"canvas\"\n    for (auto &amp;col : row)\n        col = block;\n\n for (int row = 1; row &lt;= 80; ++row)\n {\n    for (int col = 1; col &lt;= 20; ++col)\n    {\n        if (col == 2 &amp;&amp; row == 2)\n            screen[row][col] = space;\n\n    }\n }\n\n\nstd::cout &lt;&lt; *screen;\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml"], "answers": [{"comments": [{"owner": {"reputation": 2393, "user_id": 5414907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5ecb558f7d1b64dae9bb2feae8e6dc?s=128&d=identicon&r=PG", "display_name": "Mark Ch", "link": "https://stackoverflow.com/users/5414907/mark-ch"}, "edited": false, "score": 0, "creation_date": 1533654545, "post_id": 41859925, "comment_id": 90420805, "body": "mind blown. The source for the class QModelIndex doesn&#39;t have any Q_PROPERTIES, so where do these properties come from?"}], "tags": [], "owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "is_accepted": true, "score": 7, "last_activity_date": 1485372106, "creation_date": 1485372106, "answer_id": 41859925, "question_id": 41859247, "link": "https://stackoverflow.com/questions/41859247/how-to-access-qmodelindex-row-from-qml/41859925#41859925", "title": "How to access QModelIndex row from QML", "body": "<p>If you've got an Object in QML and you don't know how to access it's properties, you can always use: <code>Object.keys(obejectInQuestion)</code>.</p>\n\n<p>At least for the <code>QModelIndex</code> you get for the <code>ListModel</code> the getter <code>row()</code> is used for the property <code>row</code>. So to access it, use: <code>myQModelIndexThingy.row</code> instead of <code>myQModelIndexThingy.row()</code></p>\n"}], "owner": {"reputation": 1750, "user_id": 960475, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IID7g.png?s=128&g=1", "display_name": "ArmenB", "link": "https://stackoverflow.com/users/960475/armenb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1904, "favorite_count": 0, "accepted_answer_id": 41859925, "answer_count": 1, "score": 5, "last_activity_date": 1485424765, "creation_date": 1485369892, "last_edit_date": 1485424765, "question_id": 41859247, "link": "https://stackoverflow.com/questions/41859247/how-to-access-qmodelindex-row-from-qml", "title": "How to access QModelIndex row from QML", "body": "<p>I have this in my QML code:</p>\n\n<pre><code>TreeView {\n    ...\n    onExpanded: {\n        console.log(\"onExpanded called\", index)\n    }\n}\n</code></pre>\n\n<p>And this is the output when it's called: </p>\n\n<pre><code>QModelIndex(1,0,0x5d9f5a0,TreeModel(0x5deae90))\n</code></pre>\n\n<p>how do I access the first value (<code>1</code>) inside QML code?</p>\n"}, {"tags": ["c++", "string", "initialization"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1485369834, "post_id": 41859146, "comment_id": 70902282, "body": "<a href=\"http://en.cppreference.com/w/cpp/string/basic_string/basic_string\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/basic_string/basic_string</a>"}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1485370359, "post_id": 41859245, "comment_id": 70902608, "body": "Actually there could be difference, in the second case compiler may have to call <code>strlen</code> or something like that to realize that string is empty. It could be optimized but there is a good chance that it would not."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1485371831, "post_id": 41859245, "comment_id": 70903455, "body": "@Slava - On the contrary, <a href=\"http://stackoverflow.com/a/11639305/597607\">there is an extremely high chance</a> that it will be optimized."}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 2, "last_activity_date": 1485369883, "creation_date": 1485369883, "answer_id": 41859245, "question_id": 41859146, "link": "https://stackoverflow.com/questions/41859146/whats-the-difference-between-and-for-initializing-an-empty-string/41859245#41859245", "title": "What&#39;s the difference between &quot;&quot; and {} for initializing an empty string?", "body": "<p>In this case, no difference.</p>\n\n<pre><code>string b = {};\n</code></pre>\n\n<p>initializes the string with the type's default value, which is an empty string.</p>\n\n<pre><code>string a = \"\";\n</code></pre>\n\n<p>initializes the string with a specific value, which happens to also be an empty string.</p>\n\n<p>Note that just doing <code>string c;</code> would also create an empty string.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 5, "last_activity_date": 1485370549, "last_edit_date": 1485370549, "creation_date": 1485369898, "answer_id": 41859250, "question_id": 41859146, "link": "https://stackoverflow.com/questions/41859146/whats-the-difference-between-and-for-initializing-an-empty-string/41859250#41859250", "title": "What&#39;s the difference between &quot;&quot; and {} for initializing an empty string?", "body": "<p><code>a</code> is constructed using copy initialisation.</p>\n\n<p><code>b</code> is constructed using copy list initialisation.</p>\n\n<p>For a <code>std::string</code> the compiler will produce the same thing; a zero length string.</p>\n\n<p>But the mechanism by which the string is constructed may well be different - a compiler, conceptually at least, will have to traverse the anonymous temporary const char[] passed to construct a.</p>\n\n<p>For other types there may be differences; research the two terms above for more details.</p>\n"}], "owner": {"reputation": 1038, "user_id": 4056981, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ec96347bc0f87126ab0c055e797da74d?s=128&d=identicon&r=PG&f=1", "display_name": "MaxHeap", "link": "https://stackoverflow.com/users/4056981/maxheap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 41859250, "answer_count": 2, "score": 3, "last_activity_date": 1485370549, "creation_date": 1485369594, "question_id": 41859146, "link": "https://stackoverflow.com/questions/41859146/whats-the-difference-between-and-for-initializing-an-empty-string", "title": "What&#39;s the difference between &quot;&quot; and {} for initializing an empty string?", "body": "<pre><code>string a = \"\";\nstring b = {};\n</code></pre>\n\n<p>I couldn't really find a good reference explaining the difference between them. Does a compiler see them differently? Then, why?</p>\n"}, {"tags": ["c#", "c++", "struct"], "comments": [{"owner": {"reputation": 796429, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 2, "creation_date": 1485369008, "post_id": 41858941, "comment_id": 70901790, "body": "I don&#39;t think P/Invoke has any support for <code>std::string</code>."}, {"owner": {"reputation": 457, "user_id": 4990920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/414f07b05d8a47cad0d4e6b1369de6d6?s=128&d=identicon&r=PG&f=1", "display_name": "WWZee", "link": "https://stackoverflow.com/users/4990920/wwzee"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1485378401, "post_id": 41858941, "comment_id": 70907000, "body": "@Dan keeping it in the struct was my entire goal, I was unsure if having it in a struct changes how this would be approched"}, {"owner": {"reputation": 457, "user_id": 4990920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/414f07b05d8a47cad0d4e6b1369de6d6?s=128&d=identicon&r=PG&f=1", "display_name": "WWZee", "link": "https://stackoverflow.com/users/4990920/wwzee"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1485379011, "post_id": 41858941, "comment_id": 70907320, "body": "@Dan I actually took out that part about keeping old code. As it turns out we&#39;re expanding from here and using the old code as a base but not as a strict usage. So all I need now is the ability to pass back a string equivalent, but not necessarily a string itself."}], "owner": {"reputation": 457, "user_id": 4990920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/414f07b05d8a47cad0d4e6b1369de6d6?s=128&d=identicon&r=PG&f=1", "display_name": "WWZee", "link": "https://stackoverflow.com/users/4990920/wwzee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "closed_date": 1485370529, "answer_count": 0, "score": 0, "last_activity_date": 1485378277, "creation_date": 1485368930, "last_edit_date": 1485378277, "question_id": 41858941, "link": "https://stackoverflow.com/questions/41858941/how-to-pass-a-string-or-string-equivalent-between-c-and-c-that-is-in-a-struct", "closed_reason": "Duplicate", "title": "How to pass a string or string equivalent between C# and C++ that is in a struct?", "body": "<p>I have a struct that I've defined in both C# and C++ that looks like so:  </p>\n\n<p><strong>C#</strong></p>\n\n<pre><code>Public struct Part{\n    public int number;\n    public string name;\n}\n</code></pre>\n\n<p><strong>C++</strong></p>\n\n<pre><code>struct Part{\n    int number;\n    std::string name;\n}\n</code></pre>\n\n<p>I have a function that will do many things, but for the sake of simplicity, it will change around the part that was passed in.</p>\n\n<p><strong>C#</strong></p>\n\n<pre><code>[DllImport(@\"Part.Interface.dll\")]\nprivate static extern void _ChangeAStruct(ref Part part);\n\npublic void PassAStruct(){\n    Part part = new Part();\n    _ChangeAStruct(ref part);\n}\n</code></pre>\n\n<p><strong>C++</strong></p>\n\n<pre><code>extern \"C\" __declspec(ddlexport) void __cdecl _ChangeAStruct(Part &amp;part) {\n    part.number = 42;\n    part.name = \"I am a struct\";\n}\n</code></pre>\n\n<p>On the C# side it successfully changes the number but the name returns as null. I have tried to <code>[MarshalAs(UnmanagedType.LPStr)]</code> on the string but that didn't change anything.</p>\n\n<p>How do I change the structs to pass back \"I am a struct\"? It has been mentioned that interop cannot handle std::string, but what can it handle?</p>\n"}, {"tags": ["c++", "if-statement", "while-loop", "arduino", "break"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1485369256, "post_id": 41858929, "comment_id": 70901934, "body": "<code>the method sendToGCM() continues.</code> What does this mean? Can we see this function?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1485369291, "post_id": 41858929, "comment_id": 70901957, "body": "Also if you only want the function to be called once, just dont have the while loop?"}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 1, "creation_date": 1485369590, "post_id": 41858929, "comment_id": 70902106, "body": "The question is not clear. <code>break</code> exits the <code>while</code> loop; the <code>loop</code> function is still called periodically as long as the board is powered."}], "answers": [{"tags": [], "owner": {"reputation": 366, "user_id": 4991953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UWcJl.jpg?s=128&g=1", "display_name": "Trevor", "link": "https://stackoverflow.com/users/4991953/trevor"}, "is_accepted": false, "score": 0, "last_activity_date": 1485369923, "last_edit_date": 1485369923, "creation_date": 1485369421, "answer_id": 41859092, "question_id": 41858929, "link": "https://stackoverflow.com/questions/41858929/stop-arduino-loop-when-a-condition-is-active/41859092#41859092", "title": "Stop arduino loop when a condition is active", "body": "<p>Your problem is that you are setting temp, then entering the loop that checks that value. A simple solution would be to update the temp value inside the while loop, to give the application a chance to break out of the while loop.</p>\n\n<p>Example:</p>\n\n<pre><code>void loop()\n{\n\n  // Other code here giving temp a value\n\n  if (temp &gt; 22)\n  {\n    status = false;\n    value[\"status\"] = status;\n    while (temp &gt; 22)\n    {\n      sendToGCM(); // Sends push notification \n\n      //Additional code to set the value of temp, allowing the value to\n      //be greater than 22.\n    }\n  }\n  else \n  {\n    status = true;\n    value[\"status\"] = status;\n  }\n}\n</code></pre>\n\n<p>Please note that the above example is intended to continuously send the push notification while the temp value is over 22. If that's not the intention, just remove the sendToGCM() from the while loop. You will still only send it if the temp is greater than 22, since you have the if check.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 6115329, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10209155823642900/picture?type=large", "display_name": "Joseph Jay May", "link": "https://stackoverflow.com/users/6115329/joseph-jay-may"}, "edited": false, "score": 0, "creation_date": 1485369893, "post_id": 41859134, "comment_id": 70902313, "body": "Thank you very much"}, {"owner": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "edited": false, "score": 1, "creation_date": 1485444496, "post_id": 41859134, "comment_id": 70935814, "body": "@wastl in your second example you state that you want to capture the <i>event</i> of <i>temperature rising</i>, however<code>was_under_22</code> is set to <code>true</code> regardless of the temperature value and that leads to a message being <i>fired</i> even when the temperature is already above <code>22</code> when <i>Arduino</i> is started. That might or might not be intended in a given application, but it does not match with your description. In fact <code>was_under_22</code> is always true in your sketch, except maybe the first iteration of the loop, so it is kind of pointless in addition to being misleading."}, {"owner": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "edited": false, "score": 0, "creation_date": 1485530179, "post_id": 41859134, "comment_id": 70976632, "body": "@wastl I think it would have been simpler to break down <code>if(temperature &gt; 22 &amp;&amp; was_under_22)</code>, anyway it seems to be consistent now"}], "tags": [], "owner": {"reputation": 2555, "user_id": 3669613, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/054dcbe4dc6996000b0673791cd85465?s=128&d=identicon&r=PG&f=1", "display_name": "wastl", "link": "https://stackoverflow.com/users/3669613/wastl"}, "is_accepted": false, "score": 2, "last_activity_date": 1485529881, "last_edit_date": 1485529881, "creation_date": 1485369565, "answer_id": 41859134, "question_id": 41858929, "link": "https://stackoverflow.com/questions/41858929/stop-arduino-loop-when-a-condition-is-active/41859134#41859134", "title": "Stop arduino loop when a condition is active", "body": "<p>So if I understood you correctly, if the temperature goes 22 degrees you want to send a message, but only the first time. If you break the loop, you still enter it if you the <code>loop()</code> function is executed again.</p>\n\n<p>In order to achieve what you want to do, you code will need to look something like this</p>\n\n<pre><code>boolean message_sent;\n\nvoid loop() {\n    ...\n    if(temperature &gt; 22 &amp;&amp; !message_sent) {\n        sendToGCM();\n        message_sent = true;            \n    }\n}\n</code></pre>\n\n<p>If you want to send a message every time the temperature rises over 22 degrees you would need something like this</p>\n\n<pre><code>boolean message_sent;\nboolean was_under_22;\n\nvoid setup() {\n    ...\n    was_under_22 = function_that_checks_if_temp_is_under_22();\n    ...\n}\n\nvoid loop() {\n    ...\n    if(temperature &gt; 22 &amp;&amp; was_under_22) {\n        if(!message_sent) {\n            sendToGCM();\n            message_sent = true;\n            was_under_22 = false;            \n        }\n    } else {\n        was_under_22 = true;\n        message_sent = false;\n    }\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> slightly adapted the code in response to Patrick Trentin's comment. The code assumes you only want to capture if the temperature rises above 22 degrees and that if the Arduino starts with over 22 degrees then no message is sent.</p>\n"}], "owner": {"reputation": 13, "user_id": 6115329, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10209155823642900/picture?type=large", "display_name": "Joseph Jay May", "link": "https://stackoverflow.com/users/6115329/joseph-jay-may"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1065, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1485529881, "creation_date": 1485368896, "last_edit_date": 1485369227, "question_id": 41858929, "link": "https://stackoverflow.com/questions/41858929/stop-arduino-loop-when-a-condition-is-active", "title": "Stop arduino loop when a condition is active", "body": "<p>I need my code to stop in the loop, i have tried to put in a break but the method sendToGCM() continues. I only want the method to be executed once, the stop while the condition</p>\n\n<pre><code>void loop()\n{\n\n  // Other code here giving temp a value\n\n  if (temp &gt; 22)\n  {\n    status = false;\n    value[\"status\"] = status;\n    while (temp &gt; 22)\n    {\n      sendToGCM(); // Sends push notification \n      break;\n    }\n  }\n  else \n  {\n    status = true;\n    value[\"status\"] = status;\n  }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 2, "creation_date": 1485368566, "post_id": 41858812, "comment_id": 70901547, "body": "you might want to take a look at <a href=\"https://www.gnu.org/software/ncurses/\" rel=\"nofollow noreferrer\">ncurses</a>"}, {"owner": {"reputation": 1750, "user_id": 960475, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IID7g.png?s=128&g=1", "display_name": "ArmenB", "link": "https://stackoverflow.com/users/960475/armenb"}, "edited": false, "score": 0, "creation_date": 1485368865, "post_id": 41858812, "comment_id": 70901710, "body": "Do you mean like stepping through code one line at a time?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1485368878, "post_id": 41858812, "comment_id": 70901718, "body": "Not in the C++ Standard Library."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1485368917, "post_id": 41858812, "comment_id": 70901737, "body": "Also are you talking about a &quot;normal&quot; command line program or something platform specific or ...? And what is the program supposed to do while waiting? absolutely nothing (in which case you could just use blocking IO)?"}, {"owner": {"reputation": 31, "user_id": 5498857, "user_type": "registered", "profile_image": "https://graph.facebook.com/578596038954145/picture?type=large", "display_name": "Twilight053", "link": "https://stackoverflow.com/users/5498857/twilight053"}, "edited": false, "score": 0, "creation_date": 1485371664, "post_id": 41858812, "comment_id": 70903372, "body": "To clarify, I want it to work like system(&quot;pause&quot;), except that it only accepts a certain key. I&#39;ll edit the question."}, {"owner": {"reputation": 1585, "user_id": 6789999, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6RiuF.jpg?s=128&g=1", "display_name": "minigeek", "link": "https://stackoverflow.com/users/6789999/minigeek"}, "edited": false, "score": 0, "creation_date": 1485372033, "post_id": 41858812, "comment_id": 70903578, "body": "Which os are you using..i guess system pause doesn&#39;t work on Linux does it?"}], "answers": [{"tags": [], "owner": {"reputation": 205376, "user_id": 13, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1XtZi.jpg?s=128&g=1", "display_name": "Chris Jester-Young", "link": "https://stackoverflow.com/users/13/chris-jester-young"}, "is_accepted": false, "score": 2, "last_activity_date": 1485369187, "last_edit_date": 1485369187, "creation_date": 1485368865, "answer_id": 41858923, "question_id": 41858812, "link": "https://stackoverflow.com/questions/41858812/c-pause-program-until-a-certain-key-is-pressed/41858923#41858923", "title": "C++ - Pause program until a certain key is pressed", "body": "<p>If you're waiting for a newline character, there's an easy and portable way to do that. Just use <code>getline</code>.</p>\n\n<p>If you want to receive other characters without receiving a newline first, then things are less portable. In Unix systems, you'll need to set your terminal to \"raw mode\". As George's comment mentions, ncurses is an easy way to do this, plus it provides handy functions for drawing things to a specific place in the terminal, receiving arbitrary keys, etc.</p>\n\n<p>On Windows, you'll need to use its <a href=\"https://msdn.microsoft.com/library/windows/desktop/ms682010.aspx\" rel=\"nofollow noreferrer\">console interface</a>. This is, of course, not usable outside of Windows.</p>\n\n<p>As Neil Butterworth comments, there's also a version of curses that works for Windows, called PDCurses. If you need to write software that works for both Unix and Windows, that's a good option to pursue.</p>\n"}, {"tags": [], "owner": {"reputation": 841, "user_id": 2780640, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e4ab3fa08e71da7953d6adf61ac95404?s=128&d=identicon&r=PG&f=1", "display_name": "soulsabr", "link": "https://stackoverflow.com/users/2780640/soulsabr"}, "is_accepted": false, "score": 0, "last_activity_date": 1485369165, "last_edit_date": 1495541342, "creation_date": 1485369165, "answer_id": 41859004, "question_id": 41858812, "link": "https://stackoverflow.com/questions/41858812/c-pause-program-until-a-certain-key-is-pressed/41859004#41859004", "title": "C++ - Pause program until a certain key is pressed", "body": "<p>If getline and ncurses don't work for you there is always conio.h and getch().  There are some problems with this as explained in this answer <a href=\"https://stackoverflow.com/questions/8792317/why-cant-i-find-conio-h-on-linux\">Why can&#39;t I find &lt;conio.h&gt; on Linux?</a></p>\n\n<p>Good luck.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5498857, "user_type": "registered", "profile_image": "https://graph.facebook.com/578596038954145/picture?type=large", "display_name": "Twilight053", "link": "https://stackoverflow.com/users/5498857/twilight053"}, "edited": false, "score": 0, "creation_date": 1485371347, "post_id": 41859064, "comment_id": 70903201, "body": "It seems you are misunderstanding my question. What I wanted to know is if there&#39;s a function similar to getch(), but only works for a certain key."}], "tags": [], "owner": {"reputation": 1, "user_id": 7470531, "user_type": "registered", "profile_image": "https://graph.facebook.com/1256677874413585/picture?type=large", "display_name": "Karthik Suthan", "link": "https://stackoverflow.com/users/7470531/karthik-suthan"}, "is_accepted": false, "score": 0, "last_activity_date": 1485369344, "creation_date": 1485369344, "answer_id": 41859064, "question_id": 41858812, "link": "https://stackoverflow.com/questions/41858812/c-pause-program-until-a-certain-key-is-pressed/41859064#41859064", "title": "C++ - Pause program until a certain key is pressed", "body": "<p>on windows console interface the <strong>getche()</strong>  function will wait for a keystroke before further execution.</p>\n"}, {"tags": [], "owner": {"reputation": 1585, "user_id": 6789999, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6RiuF.jpg?s=128&g=1", "display_name": "minigeek", "link": "https://stackoverflow.com/users/6789999/minigeek"}, "is_accepted": false, "score": 0, "last_activity_date": 1485373059, "last_edit_date": 1485373059, "creation_date": 1485372505, "answer_id": 41860031, "question_id": 41858812, "link": "https://stackoverflow.com/questions/41858812/c-pause-program-until-a-certain-key-is-pressed/41860031#41860031", "title": "C++ - Pause program until a certain key is pressed", "body": "<p>If you're on Windows, you can use\u00a0kbhit()\u00a0which is part of the Microsoft run-time library. If you're on Linux, you can implement\u00a0kbhit\u00a0thus</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;termios.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n\nint kbhit(void)\n{\n  struct termios oldt, newt;\n  int ch;\n  int oldf;\n\n  tcgetattr(STDIN_FILENO, &amp;oldt);\n  newt = oldt;\n  newt.c_lflag &amp;= ~(ICANON | ECHO);\n  tcsetattr(STDIN_FILENO, TCSANOW, &amp;newt);\n  oldf = fcntl(STDIN_FILENO, F_GETFL, 0);\n  fcntl(STDIN_FILENO, F_SETFL, oldf | O_NONBLOCK);\n\n  ch = getchar();\n\n  tcsetattr(STDIN_FILENO, TCSANOW, &amp;oldt);\n  fcntl(STDIN_FILENO, F_SETFL, oldf);\n\n  if(ch != EOF)\n  {\n    ungetc(ch, stdin);\n    return 1;\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Compiling steps :</p>\n\n<pre><code> gcc -o kbhit kbhit.c\n</code></pre>\n\n<p>When run with</p>\n\n<pre><code> ./kbhit\n</code></pre>\n\n<p>It prompts you for a keypress, and exits when you hit a key (not limited to Enter or printable keys).</p>\n\n<p>(Got over internet - you can modify code and use specific ch value like \\n for Enter key)</p>\n"}], "owner": {"reputation": 31, "user_id": 5498857, "user_type": "registered", "profile_image": "https://graph.facebook.com/578596038954145/picture?type=large", "display_name": "Twilight053", "link": "https://stackoverflow.com/users/5498857/twilight053"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1485373059, "creation_date": 1485368453, "last_edit_date": 1485371160, "question_id": 41858812, "link": "https://stackoverflow.com/questions/41858812/c-pause-program-until-a-certain-key-is-pressed", "title": "C++ - Pause program until a certain key is pressed", "body": "<p>Is there a function that makes a command prompt program wait like <code>system(\"pause\")</code>, and continues running only after accepting a certain key?</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "std", "stdmap"], "comments": [{"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 3, "creation_date": 1485368878, "post_id": 41858724, "comment_id": 70901719, "body": "Create a wrapper and implement the <code>[]</code> operator."}, {"owner": {"reputation": 1449, "user_id": 411180, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3df9cf72d945cbbe0949f530ec2eeb9b?s=128&d=identicon&r=PG", "display_name": "SeanLabs", "link": "https://stackoverflow.com/users/411180/seanlabs"}, "reply_to_user": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1485369099, "post_id": 41858724, "comment_id": 70901846, "body": "Good suggestion.  I&#39;m not sure what the constructor would look like for using a list initializer like I have in the example however.  Any ideas on that?"}], "answers": [{"comments": [{"owner": {"reputation": 1449, "user_id": 411180, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3df9cf72d945cbbe0949f530ec2eeb9b?s=128&d=identicon&r=PG", "display_name": "SeanLabs", "link": "https://stackoverflow.com/users/411180/seanlabs"}, "edited": false, "score": 0, "creation_date": 1485381113, "post_id": 41859256, "comment_id": 70908388, "body": "Thanks, looks ideal."}], "tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": true, "score": 7, "last_activity_date": 1485418230, "last_edit_date": 1485418230, "creation_date": 1485369911, "answer_id": 41859256, "question_id": 41858724, "link": "https://stackoverflow.com/questions/41858724/best-way-to-have-stdmap-where-i-can-define-what-is-returned-if-there-is-no-key/41859256#41859256", "title": "Best way to have std::map where I can define what is returned if there is no key?", "body": "<p>You might create some wrapper with <em>operator[]</em> overloaded to provide the required behaviour:</p>\n\n<pre><code>class Wrapper {\npublic:\n    using MapType = std::map&lt;unsigned char, std::string&gt;;\n\n    Wrapper(std::initializer_list&lt;MapType::value_type&gt; init_list)\n        : device_types(init_list)\n    {}\n\n    const std::string operator[](MapType::key_type key) const {\n        const auto it = device_types.find(key);\n        return (it == std::cend(device_types)) ? \"Unknown\" : it-&gt;second;\n    }\n\nprivate:\n    const MapType device_types;\n};\n</code></pre>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/bQQsA52ZflDyg4Cq\" rel=\"nofollow noreferrer\"><strong>wandbox example</strong></a></p>\n"}], "owner": {"reputation": 1449, "user_id": 411180, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3df9cf72d945cbbe0949f530ec2eeb9b?s=128&d=identicon&r=PG", "display_name": "SeanLabs", "link": "https://stackoverflow.com/users/411180/seanlabs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 41859256, "answer_count": 1, "score": 2, "last_activity_date": 1538430747, "creation_date": 1485368114, "last_edit_date": 1538430747, "question_id": 41858724, "link": "https://stackoverflow.com/questions/41858724/best-way-to-have-stdmap-where-i-can-define-what-is-returned-if-there-is-no-key", "title": "Best way to have std::map where I can define what is returned if there is no key?", "body": "<p>I am using a std::map to map some unsigned char machine values into human readable string types, e.g.:</p>\n\n<pre><code>std::map&lt;unsigned char, std::string&gt; DEVICE_TYPES = {\n    { 0x00, \"Validator\" },\n    { 0x03, \"SMART Hopper\" },\n    { 0x06, \"SMART Payout\" },\n    { 0x07, \"NV11\" },\n};\n</code></pre>\n\n<p>I'd like to modify this so that if the key passed is not present, the map will return \"Unknown\".  I want the caller interface to stay the same (i.e. they just retrieve their string from the map using the [] operator).  What's the best way to do this?  I have C++11 on Windows 7 available.</p>\n"}, {"tags": ["c++", "linux", "gcc", "x86-64", "signal-handling"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1485367696, "post_id": 41858579, "comment_id": 70901038, "body": "1) <code>std::cout &lt;&lt; std::dec</code> This is not C 2) you cannot use printf (and friends) from within a signal handler."}, {"owner": {"reputation": 407, "user_id": 2306355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5e84d62f5b0be9b2d31bd363695f455?s=128&d=identicon&r=PG", "display_name": "datosh", "link": "https://stackoverflow.com/users/2306355/datosh"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1485371678, "post_id": 41858579, "comment_id": 70903384, "body": "1) sorry removed the wrong tag, had both and deleted c++. 2) so what do I do? use the signal handler with a void* out arg and write some data struct which I later print to stdout? Would this help with my problem? I mean does printing and calling and calling functions might lead to this &quot;unexpected behaviour&quot;?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1485372564, "post_id": 41858579, "comment_id": 70903879, "body": "Printf() is not async-safe. (basically because it can call malloc() inside, which is not async-safe). Best way is probably to use a global (static) buffer. The bad news: sprintf() is not async-safe, either :-["}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1485380527, "post_id": 41858579, "comment_id": 70908078, "body": "I think you may want to use <code>uintptr_t</code> instead of <code>uint64_t</code> to be more portable..."}], "answers": [{"tags": [], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": false, "score": 2, "last_activity_date": 1485380442, "last_edit_date": 1485380442, "creation_date": 1485380026, "answer_id": 41862057, "question_id": 41858579, "link": "https://stackoverflow.com/questions/41858579/linux-x64-stack-unwinding-inside-signal-handler-to-modify-return-address/41862057#41862057", "title": "Linux x64 stack unwinding inside signal handler, to modify return address", "body": "<p>Hm, where do I start...</p>\n\n<p>Firstly, I'm afraid x64 does not have frame pointers by default so there is no easy way to reconstruct stack by following chain of <code>rbp</code>s. Furthermore, even if you recompiled all participating code (including Glibc!) with <code>-fno-omit-frame-pointer</code> signal handler's frame is probably set up in a very special manner by kernel so there's no guarantee that you'll be able to unwind through it via frame pointer. BTW that's probably the reason <code>__builtin_frame_address</code> runtime failures.</p>\n\n<p>Next you mention that you want to unwind by changing return address behind compiler's back. Nothing would be a better recipe for runtime crash. Compiler saves tons of critical information in function frames. This info is preserved by strict contracts between calling and called functions (so called \"calling convention\"). By altering return address, you'd discard all this info and most likely return to target code with random garbage in registers.</p>\n\n<p>The <em>only</em> sane way to implement stack unwinding is to use (or at least re-implement) existing unwinders (in <a href=\"https://github.com/gcc-mirror/gcc/blob/master/libgcc/unwind-dw2.c\" rel=\"nofollow noreferrer\">libgcc</a>, <a href=\"http://www.nongnu.org/libunwind/\" rel=\"nofollow noreferrer\">libunwind</a> or, preferably, in <a href=\"https://github.com/gcc-mirror/gcc/tree/master/libbacktrace\" rel=\"nofollow noreferrer\">libbacktrace</a>).</p>\n"}, {"tags": [], "owner": {"reputation": 407, "user_id": 2306355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5e84d62f5b0be9b2d31bd363695f455?s=128&d=identicon&r=PG", "display_name": "datosh", "link": "https://stackoverflow.com/users/2306355/datosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1485528115, "creation_date": 1485528115, "answer_id": 41896545, "question_id": 41858579, "link": "https://stackoverflow.com/questions/41858579/linux-x64-stack-unwinding-inside-signal-handler-to-modify-return-address/41896545#41896545", "title": "Linux x64 stack unwinding inside signal handler, to modify return address", "body": "<p>The solution to modify the return address from within a signal handler, requires a different method to register the signal handler in the first place. </p>\n\n<p>Frist the code: </p>\n\n<pre><code>#include &lt;csignal&gt;\n#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n\nvoid signal_handler(int signal, siginfo_t *si, void *context)\n{\n    const int return_delta = 2;\n    ((ucontext_t*)context)-&gt;uc_mcontext.gregs[REG_RIP] += return_delta;\n}\n\n\nint foo(void)\n{\n    asm(\".byte 0xcc\\n\");\n\n    // \"for(;;) ;\" in a way that prevents the compiler from recognizing the\n    // remainder of the function as dead code and optimizing it away...\n    asm(\".byte 0xEB\\n\");\n    asm(\".byte 0xFE\\n\");\n\n    return 5;\n}\n\n\nint baz(void) {\n    return foo() + 10;\n}\n\n\nint bar(void) {\n    return baz() + 15;\n}\n\n\nint main(int argc, char **argv)\n{\n    struct sigaction sa = {0};\n    sigemptyset(&amp;sa.sa_mask);\n    sa.sa_sigaction = signal_handler;\n    sa.sa_flags = SA_SIGINFO;\n\n    // Install signal handler\n    sigaction(SIGTRAP, &amp;sa, NULL);\n\n    // So that we see some output\n    size_t i{1000};\n    while(i--) {\n        std::cout &lt;&lt; bar() &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p><code>sigaction</code> in conjunction with <code>sigaction</code> can be used to pass more information to the signal handler. If you do so, <a href=\"http://man7.org/linux/man-pages/man2/rt_sigaction.2.html\" rel=\"nofollow noreferrer\"><code>siginfo_t</code></a> is passed to the signal handler which contains all sort of information about the signal itself. </p>\n\n<p>Additionally a <code>void *context</code> is passed to the registered signal handler which contains information about the state of the registers and stack. You can use this to manipulate the return address into the signal raising function as you like.  </p>\n\n<p>Note that this is highly platform specific you should use your <code>ucontext.h</code> to see how the struct look for your specific platform. </p>\n"}], "owner": {"reputation": 407, "user_id": 2306355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5e84d62f5b0be9b2d31bd363695f455?s=128&d=identicon&r=PG", "display_name": "datosh", "link": "https://stackoverflow.com/users/2306355/datosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "accepted_answer_id": 41896545, "answer_count": 2, "score": 1, "last_activity_date": 1485528115, "creation_date": 1485367629, "last_edit_date": 1485527523, "question_id": 41858579, "link": "https://stackoverflow.com/questions/41858579/linux-x64-stack-unwinding-inside-signal-handler-to-modify-return-address", "title": "Linux x64 stack unwinding inside signal handler, to modify return address", "body": "<p>I'm trying to modify a return address (some levels down) on the call stack. I need to do this when I am inside a signal handler. Therefore I'm doing the following: </p>\n\n<pre><code>#include &lt;csignal&gt;\n#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n\n// To print stacktrace\n#include &lt;execinfo.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid printAround(uint64_t* p, int min=0, int max=3) {\n    for(int i = min; i &lt;= max; ++i) {\n        std::cout &lt;&lt; std::dec &lt;&lt; ((i &gt;= 0) ? \" \" : \"\") &lt;&lt; i &lt;&lt; \": \"\n                  &lt;&lt; std::hex\n                  &lt;&lt; reinterpret_cast&lt;uint64_t&gt;(*(p + i))\n                  &lt;&lt; std::dec &lt;&lt; std::endl;\n    }\n    std::cout &lt;&lt; \"================================================\" &lt;&lt; std::endl;\n}\n\nvoid sigHandler(int signum) {\n    register uint64_t* EBP asm (\"rbp\");\n    printAround(EBP);\n\n    uint64_t *oldEBP = reinterpret_cast&lt;uint64_t*&gt;(*EBP);\n    printAround(oldEBP);\n\n    oldEBP = reinterpret_cast&lt;uint64_t*&gt;(*oldEBP);\n    printAround(oldEBP);\n\n    /* PRINT STACK TRACE!! POSSIBLY UNSAFE! */\n    void *array[10];\n    size_t size;\n    char **strings;\n    size_t i;\n    size = backtrace(array, 10);\n    strings = backtrace_symbols(array, size);\n    std::cout &lt;&lt; \"\\nObtained \" &lt;&lt; size &lt;&lt; \" stack frames.\\n\";\n    for (i = 0; i &lt; size; i++) {\n        std::cout &lt;&lt; strings[i] &lt;&lt; \"\\n\";\n    }\n    free(strings);\n    /* END PRINT STACK TRACE !! */\n}\n\nint foo(void) {\n    std::raise(SIGTRAP);\n    return 5;\n}\n\nint baz(void) {\n    return foo() + 10;\n}\n\nint bar(void) {\n    return baz() + 15;\n}\n\nint main(int argc, char **argv) {\n    // SIGTRAP is 0xCC\n    std::signal(SIGTRAP, &amp;sigHandler);\n    return bar();\n}\n</code></pre>\n\n<p>The corresponding output is:</p>\n\n<pre><code> 0: 7ffda9664a10\n 1: 7faf5777c4b0\n 2: 1\n 3: 0\n================================================\n 0: 7ffda9664a20\n 1: 557f2a7bdf21\n 2: 7ffda9664a30\n 3: 557f2a7bdf2f\n================================================\n 0: 7ffda9664a30\n 1: 557f2a7bdf2f\n 2: 7ffda9664a50\n 3: 557f2a7bdf59\n================================================\n\nObtained 9 stack frames.\n./main(+0xe41) [0x557f2a7bde41]\n/lib/x86_64-linux-gnu/libc.so.6(+0x354b0) [0x7faf5777c4b0]\n/lib/x86_64-linux-gnu/libc.so.6(gsignal+0x38) [0x7faf5777c428]\n./main(+0xf11) [0x557f2a7bdf11]  =&gt; foo\n./main(+0xf21) [0x557f2a7bdf21]  =&gt; baz\n./main(+0xf2f) [0x557f2a7bdf2f]  =&gt; bar\n./main(+0xf59) [0x557f2a7bdf59]  =&gt; main\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0) [0x7faf57767830]\n./main(+0xba9) [0x557f2a7bdba9]\n</code></pre>\n\n<p>At offset 0 is the base pointer of the previous stack, and at offset 1 us the return address. </p>\n\n<p>As one can see in the output, the first return address is the first function in libc, but the next one is already <code>baz</code> and not <code>foo</code> or the other libc function as I would have expected.</p>\n\n<p>When I remove the signal handler and place the logic to print the stack in <code>foo</code> I see all of my functions: <code>foo</code>, <code>baz</code>, <code>bar</code>, <code>main</code>... </p>\n\n<p>What am I missing here? I do need to modify the return address to the function in witch the signal was triggered, i.e., foo, but this one is skipped in my stack unwind logic :( </p>\n\n<p>P.S. I do know that it is not safe to use backtrace [2] in a signal handler, since it leads to undefined behaviour! Seems I'm being lucky here and the problem persists when I delete all the backtrace logic!</p>\n\n<p>Also if anyone has any other ideas how to solve this problem I'm happy if you would share. I tried to use <code>__builtin_frame_address()</code> with an argument >0 but this crashes inside the signal handler [1]. There seems to be something different, and I can't find any information about the what.</p>\n\n<p>[1] <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Return-Address.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Return-Address.html</a></p>\n\n<p>[2] <a href=\"https://www.gnu.org/software/libc/manual/html_node/Backtraces.html\" rel=\"nofollow noreferrer\">https://www.gnu.org/software/libc/manual/html_node/Backtraces.html</a></p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 2, "creation_date": 1485367822, "post_id": 41858570, "comment_id": 70901108, "body": "Try making <code>print_count</code> virtual and overloading it in <code>child</code>, then you will see the difference."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1485368672, "post_id": 41858570, "comment_id": 70901605, "body": "Using qualified method name in the call will suppress polymorphism if the method is virtual. But in your example it would make no difference."}, {"owner": {"reputation": 6233, "user_id": 845022, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b24cb7a52001aa47ebd90afbb4cfa6e5?s=128&d=identicon&r=PG", "display_name": "dbeer", "link": "https://stackoverflow.com/users/845022/dbeer"}, "edited": false, "score": 0, "creation_date": 1485369028, "post_id": 41858570, "comment_id": 70901809, "body": "I apologize, I meant to also stipulate that the child doesn&#39;t have a method of the same name, but I forgot to include it."}], "answers": [{"tags": [], "owner": {"reputation": 284, "user_id": 7276783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9252c257f17dee9df552bc0dccdd25bb?s=128&d=identicon&r=PG&f=1", "display_name": "Ynon", "link": "https://stackoverflow.com/users/7276783/ynon"}, "is_accepted": false, "score": 0, "last_activity_date": 1485367969, "last_edit_date": 1495542257, "creation_date": 1485367969, "answer_id": 41858685, "question_id": 41858570, "link": "https://stackoverflow.com/questions/41858570/difference-between-c-foo-and-c-parentfoo/41858685#41858685", "title": "Difference Between c.foo() and c.parent::foo()", "body": "<p>If your derived class had an overload for a parent function, then it would \"hide\" the parent's function and you'll need to either use the syntax that you have mentioned, or use a 'using' statement.</p>\n\n<p>You can see an example in this post:\n<a href=\"https://stackoverflow.com/questions/11923890/reason-for-c-member-function-hiding\">Reason for C++ member function hiding</a></p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1485367994, "creation_date": 1485367994, "answer_id": 41858694, "question_id": 41858570, "link": "https://stackoverflow.com/questions/41858570/difference-between-c-foo-and-c-parentfoo/41858694#41858694", "title": "Difference Between c.foo() and c.parent::foo()", "body": "<p>You don't need multiple inheritance or polymorphism to demonstrate the difference. At its simplest:</p>\n\n<pre><code>struct B {\n    int foo() { return 0; }\n};\n\nstruct D : B {\n    int foo() { return 1; }\n};\n</code></pre>\n\n<p>Given a <code>D</code>, <code>d.foo()</code> would be 1 and <code>d.B::foo()</code> would be 0. The syntax just exists to explicitly state which member function you want to call. </p>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1485368133, "post_id": 41858710, "comment_id": 70901270, "body": "Actually virtual does not change anything in this example"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1485368531, "post_id": 41858710, "comment_id": 70901528, "body": "@Slava, true. It would make a difference only if the functions were called through a <code>parent&amp;</code> or <code>parent*</code>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1485368863, "post_id": 41858710, "comment_id": 70901709, "body": "Right, you may add function that accepts reference to <code>parent</code> and calls <code>print</code> both ways from there to make sense of using <code>virtual</code>."}, {"owner": {"reputation": 6233, "user_id": 845022, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b24cb7a52001aa47ebd90afbb4cfa6e5?s=128&d=identicon&r=PG", "display_name": "dbeer", "link": "https://stackoverflow.com/users/845022/dbeer"}, "edited": false, "score": 0, "creation_date": 1485369408, "post_id": 41858710, "comment_id": 70902013, "body": "I meant to also stipulate the child doesn&#39;t have a method with the same name, but I appreciate the detailed answer."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 6233, "user_id": 845022, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b24cb7a52001aa47ebd90afbb4cfa6e5?s=128&d=identicon&r=PG", "display_name": "dbeer", "link": "https://stackoverflow.com/users/845022/dbeer"}, "edited": false, "score": 0, "creation_date": 1485369480, "post_id": 41858710, "comment_id": 70902056, "body": "@dbeer, I answered that at the top. If <code>child</code> does not have a function of the same name, then there is no difference."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1485369087, "last_edit_date": 1485369087, "creation_date": 1485368052, "answer_id": 41858710, "question_id": 41858570, "link": "https://stackoverflow.com/questions/41858570/difference-between-c-foo-and-c-parentfoo/41858710#41858710", "title": "Difference Between c.foo() and c.parent::foo()", "body": "<blockquote>\n  <p>It would appear that c.() and c.parent::() are the same.</p>\n</blockquote>\n\n<p>They are same only if <code>child</code> does not have a function of the same name.</p>\n\n<blockquote>\n  <p>Does this syntax exist only for multiple inheritance?</p>\n</blockquote>\n\n<p>No. There are times when you need to call the implementation of a function in a parent class.</p>\n\n<blockquote>\n  <p>Or is there some nuance where even without multiple inheritance the parent:: scope specifier would be different?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass parent {\n   public:\n      virtual void print() const\n      {\n         std::cout &lt;&lt; \"In parent::print()\\n\";\n      }\n\n};\n\nclass child : public parent {\n   public:\n      virtual void print() const\n      {\n         std::cout &lt;&lt; \"In child::print()\\n\";\n      }\n};\n\nvoid print(parent&amp; p)\n{\n   p.print(); // Goes to child::print() when p references a child\n   p.parent::print(); // Goes to parent::print() regardless\n}\n\nint main()\n{\n   child c;\n   print(c);  \n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>In child::print()\nIn parent::print()\n</code></pre>\n\n<p>Also, there are times when you need to invoke the parent's implementation of a <code>virtual</code> member function from the child's implementation. </p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass parent {\n   public:\n      virtual void save(std::ostream&amp; out) const\n      {\n         // Save the data corresponding to this class.\n      }\n\n};\n\nclass child : public parent {\n   public:\n      virtual void save(std::ostream&amp; out) const\n      {\n         // Save the data corresponding to parent first.\n         parent::save(out);\n\n         // Save the data corresponding to this class.\n      }\n};\n\nvoid save(parent&amp; p, std::ostream&amp; out)\n{\n   p.save(std::cout); // Calls child::save() when p references a child,\n                      // which in turn calls parent::save()\n}\n\nint main()\n{\n   child c;\n   save(c, std::cout);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1485369254, "last_edit_date": 1485369254, "creation_date": 1485368849, "answer_id": 41858916, "question_id": 41858570, "link": "https://stackoverflow.com/questions/41858570/difference-between-c-foo-and-c-parentfoo/41858916#41858916", "title": "Difference Between c.foo() and c.parent::foo()", "body": "<p>You need to use a qualified function name when there is an ambiguity or you need to call a particular function.</p>\n\n<p>Here is one non-obvious example then a qualified name is required.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct A\n{\n    operator int() const { return 10; }\n    friend void output( const A &amp; )\n    {\n        std::cout &lt;&lt; \"friend void output\" &lt;&lt; std::endl;\n    }\n};\n\nvoid output( int )\n{\n    std::cout &lt;&lt; \"void ::output\" &lt;&lt; std::endl;\n}\n\nint main() \n{\n    output( A() );\n    ::output( A() );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>friend void output\nvoid ::output\n</code></pre>\n\n<p>The class A has friend function <code>output</code> with a parameter of type <code>const A &amp;</code>.. If to write as it is written in the program</p>\n\n<pre><code>    output( A() );\n</code></pre>\n\n<p>then the friend function will be called due to the argument dependent lookup.</p>\n\n<p>However if you want to call the second function with the parameter of type <code>int</code> you have to specify a qualified name. </p>\n\n<pre><code>    ::output( A() );\n</code></pre>\n\n<p>Otherwise again the friend function will be called.</p>\n\n<p>Though in this example there is no member functions nevertheless the friend function is defined within the scope of a class. It is invisible outside the class and can be selected only due to the argument dependent lookup when an object of the class is specified as an argument.</p>\n\n<p>In fact this call</p>\n\n<pre><code>    output( A() );\n</code></pre>\n\n<p>can be imagined like</p>\n\n<pre><code>    A::output( A() );\n</code></pre>\n\n<p>opposite to the call</p>\n\n<pre><code>    ::output( A() );\n</code></pre>\n"}], "owner": {"reputation": 6233, "user_id": 845022, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b24cb7a52001aa47ebd90afbb4cfa6e5?s=128&d=identicon&r=PG", "display_name": "dbeer", "link": "https://stackoverflow.com/users/845022/dbeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 41858710, "answer_count": 4, "score": 0, "last_activity_date": 1485369803, "creation_date": 1485367596, "last_edit_date": 1485369803, "question_id": 41858570, "link": "https://stackoverflow.com/questions/41858570/difference-between-c-foo-and-c-parentfoo", "title": "Difference Between c.foo() and c.parent::foo()", "body": "<p>It's been a while since I've used C++ inheritance, and I am wondering if someone can clarify and explain something to me:</p>\n\n<pre><code>class parent {\n  public:\n    int count;\n    parent() : count(0) {}\n    void increase_count() {count++;}\n    void print_count() {printf(\"Count: %d\\n\", count);}\n};\n\nclass child : public parent {\n  private:\n    int other;\n  public:\n    child() : other(0) {}\n};\n\nint main (int argc, char *argv[]) {\n\n  child c;\n  for (int i = 0; i &lt; 5; i++) {\n    c.print_count();\n    c.increase_count();\n  }\n\n  for (int i = 0; i &lt; 5; i++) {\n    c.parent::print_count();\n    c.parent::increase_count();\n  }\n}\n</code></pre>\n\n<p>It would appear that <code>c.&lt;parent_function&gt;()</code> and <code>c.parent::&lt;parent_function&gt;()</code> are the same. Does this syntax exist only for multiple inheritance? Or is there some nuance where even without multiple inheritance the <code>parent::</code> scope specifier would be different?</p>\n\n<p><strong>EDIT:</strong> Apologies, but I had meant to also stipulate the child not having a method of the same name.</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "atomic", "memory-model"], "answers": [{"comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1485420626, "post_id": 41859912, "comment_id": 70921526, "body": "You should use memory_order_seq_cst on fetch_add and fetch_sub since it makes the example clearer, and keeps the bug in."}, {"owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1485427323, "post_id": 41859912, "comment_id": 70925101, "body": "@2501 <code>counter</code> is not part of the algorithm but only used as a state variable to prove that 1 thead at a time can enter. Hence it has no relationship with any data and therefore I used <code>relaxed</code> on the 2 RMW operations. You are right that seq/cst would still make the example valid."}], "tags": [], "owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "is_accepted": true, "score": 13, "last_activity_date": 1485374865, "last_edit_date": 1485374865, "creation_date": 1485372071, "answer_id": 41859912, "question_id": 41858540, "link": "https://stackoverflow.com/questions/41858540/whats-are-practical-example-where-acquire-release-memory-order-differs-from-seq/41859912#41859912", "title": "What&#39;s are practical example where acquire release memory order differs from sequential consistency?", "body": "<p>Peterson's algorithm is an example of something that requires sequential consistency.  </p>\n\n<p>In the days before mutexes, the algoritm was used to give a single thread access to a protected area.\nThe algoritm only works with 2 threads, each managing a flag that expresses the intention to access the protected area.\nIf both set the flag at (about) the same time, both will backoff and try again.\nThe real algorithm is more advanced since it uses a 'turn' flag to manage fair access, but to show the difference between seq/cst and acq/rel this is not necessary.</p>\n\n<p>Below is a ready-to-compile, simplified version of the Peterson algorithm that actually shows that the algoritms is broken if something weaker than sequential consistency is used.\nInterestingly enough, this is broken even on X86 since that platform allows store-loads to be reordered.<br>\nThe problem with store-load reordering is that both threads may express their intention to access the protected area by setting their <code>me</code> flag to <code>true</code>, while both are reading <code>false</code> from the <code>him</code> flag (since the value was not propagated yet to both threads) and enter the protected area. This is not possible with sequential consistency.</p>\n\n<p>With <code>gcc</code>, I had to compile with <code>-O3</code> optimizations to have the <code>assert</code> fire, with <code>clang</code> that was not necessary.\nBoth compilers use a different approach to implement sequential consistency.</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;atomic&gt;\n#include &lt;assert.h&gt;\n\nstd::atomic&lt;bool&gt; flag1{false};\nstd::atomic&lt;bool&gt; flag2{false};\n\nstd::atomic&lt;int&gt; counter{0};\n\n// Change these to memory_order_seq_cst to fix the algorithm\nstatic const auto store_ordering = std::memory_order_release;\nstatic const auto load_ordering  = std::memory_order_acquire;\n\nvoid busy(int n)\n{\n    auto &amp;me  = (n==1) ? flag1 : flag2;\n    auto &amp;him = (n==1) ? flag2 : flag1;\n\n    for (;;)\n    {\n        for (;;)\n        {\n            me.store(true, store_ordering);\n            if (him.load(load_ordering) == false)\n            {\n                // got the 'lock'\n                break;\n            }\n\n            // retention, no wait period -&gt; busy loop\n            me.store(false, store_ordering);\n        }\n\n        int tmp = counter.fetch_add(1, std::memory_order_relaxed);\n        assert(tmp == 0);\n\n        /*\n         * critical area\n         */\n\n        tmp = counter.fetch_sub(1, std::memory_order_relaxed);\n        assert(tmp == 1);\n\n        me.store(false, store_ordering);\n    }\n}\n\n\nint main()\n{\n    std::thread t1{busy, 1};\n    std::thread t2{busy, 2};\n\n    t1.join();\n    t2.join();\n}\n</code></pre>\n"}], "owner": {"reputation": 20650, "user_id": 1335865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3eBZC.png?s=128&g=1", "display_name": "Ralph Tandetzky", "link": "https://stackoverflow.com/users/1335865/ralph-tandetzky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 914, "favorite_count": 0, "accepted_answer_id": 41859912, "answer_count": 1, "score": 10, "last_activity_date": 1485401657, "creation_date": 1485367490, "last_edit_date": 1495535356, "question_id": 41858540, "link": "https://stackoverflow.com/questions/41858540/whats-are-practical-example-where-acquire-release-memory-order-differs-from-seq", "title": "What&#39;s are practical example where acquire release memory order differs from sequential consistency?", "body": "<p>Clearly, sequential consistent atomic operations differ in their valid observable behavior from acquire-release only operations in a valid C++ program. Definitions are given in the C++ standard (since C++11) or <a href=\"http://en.cppreference.com/w/cpp/atomic/memory_order\" rel=\"noreferrer\">here</a>. </p>\n\n<p>However, I have never come across a real-world example of an algorithm or a data structure that where acquire-release semantics is insufficient and sequential consistency is needed. </p>\n\n<p>What would be an <strong>practical</strong> example of a real world algorithm or data structure, where sequential consistency is needed and acquire-release memory order is not enough?</p>\n\n<p>Note, that even <a href=\"https://stackoverflow.com/questions/41847511/is-stdmutex-sequentially-consistent\"><code>std::mutex</code> does not guarantee sequential consistency</a>. </p>\n"}, {"tags": ["c++", "c", "opengl", "textures"], "comments": [{"owner": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "edited": false, "score": 0, "creation_date": 1485367513, "post_id": 41858408, "comment_id": 70900931, "body": "You should try to look at using shaders. These calls are somewhat dated,  and might cause some trouble if you try to draw more varied"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1485367789, "post_id": 41858408, "comment_id": 70901090, "body": "Get a different resource. The code violates effective type rule, and invokes undefined behaviour."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "reply_to_user": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "edited": false, "score": 0, "creation_date": 1485368310, "post_id": 41858408, "comment_id": 70901377, "body": "@Charlie : What are shaders ? I never worked with shaders before. Could you please suggest me any tutorial ?"}, {"owner": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "edited": false, "score": 0, "creation_date": 1485373931, "post_id": 41858408, "comment_id": 70904616, "body": "<a href=\"http://www.opengl-tutorial.org/beginners-tutorials/tutorial-2-the-first-triangle/\" rel=\"nofollow noreferrer\">opengl-tutorial.org/beginners-tutorials/&hellip;</a> halfway down the page. A shader is basically a way to send tasks to the GPU itself, instead of doing everyting on the CPU. Its very effective, and necessary even"}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "reply_to_user": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "edited": false, "score": 0, "creation_date": 1485455550, "post_id": 41858408, "comment_id": 70943103, "body": "Thanks, @Charlie."}], "answers": [{"comments": [{"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485368083, "post_id": 41858532, "comment_id": 70901240, "body": "Ok, ill watch out, but why is the previous set color used, why isnt it white ?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485389611, "post_id": 41858532, "comment_id": 70911576, "body": "A texture is nothing but a buffer. It needs to be filled with something. I don&#39;t know if pyopengl sets a default color. Because your glTexImage2D doesn&#39;t work the buffer is undefined. Only quads are drawn in the current color, red in your case."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485455508, "post_id": 41858532, "comment_id": 70943070, "body": "Thanks , thats useful to me . Ill try it out."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485625576, "post_id": 41858532, "comment_id": 71007014, "body": "Could you please show me how to load and use a texture correctly ? Nothing worked for me. Please link me a tutorial or something else that helps me to get this to work."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485797688, "post_id": 41858532, "comment_id": 71064077, "body": "I have worked with textures in pyopengl. Its really easy. But in c, I have no working idea about how to load an image. Could you please have a look at my new code ? Why doesnt it work ?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485799169, "post_id": 41858532, "comment_id": 71064983, "body": "Please read the tutorial I posted. At least the textures chapter. If you would have done so you would know that you must use <code>glActiveTexture</code> with a texture-unit before <code>glBindTexture</code> with texture-name."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485799421, "post_id": 41858532, "comment_id": 71065125, "body": "I read and knew it.I think it wouldnt be necessarely, because in pyopengl I never had to use it. Ill try it out."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485799627, "post_id": 41858532, "comment_id": 71065250, "body": "It doesnt help."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485799642, "post_id": 41858532, "comment_id": 71065263, "body": "Have a look at Edit 2"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485799677, "post_id": 41858532, "comment_id": 71065281, "body": "Be aware some examples are old, using the &quot;inmediate mode&quot; and not modern OpenGL &gt;=3.2 with shaders and more features, but more requirements."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485799817, "post_id": 41858532, "comment_id": 71065359, "body": "No. <code>glActiveTexture(GL_TEXTURE0)</code>  is same as &quot;no active unit&quot;. Use <code>glActiveTexture(GL_TEXTURE0 + unit)</code> with unit &gt; 0."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485800181, "post_id": 41858532, "comment_id": 71065575, "body": "With glActiveTexture(GL_TEXTURE1); it doesnt work. Please have a look at my new code, especially the drawing function. Perhaps im doing something wrong there ?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1485800453, "post_id": 41858532, "comment_id": 71065713, "body": "GL_TEXTURE0 is NOT equal to 0. It&#39;s a defined value that the driver can handle. This is my last comment. I insist you to read slowly the tutorial."}, {"owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "edited": false, "score": 0, "creation_date": 1486229332, "post_id": 41858532, "comment_id": 71259790, "body": "Thanks to your effort, but glActiveTexture() isnt required."}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 1, "last_activity_date": 1485367455, "creation_date": 1485367455, "answer_id": 41858532, "question_id": 41858408, "link": "https://stackoverflow.com/questions/41858408/how-to-load-texture-opengl/41858532#41858532", "title": "How to load texture Opengl?", "body": "<p>Review how you read data. <code>dataPos</code>, <code>size</code> and others may be set after reading the BMP. It's a relative position defined in the header of the image file.\n<p> And then review glTexImage2D(). Your are passing <code>data</code>instead of <code>dataPos</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "is_accepted": true, "score": 3, "last_activity_date": 1486229291, "creation_date": 1486229291, "answer_id": 42043320, "question_id": 41858408, "link": "https://stackoverflow.com/questions/41858408/how-to-load-texture-opengl/42043320#42043320", "title": "How to load texture Opengl?", "body": "<p>Finally, after browsing the internet quite a lot, I found this working example : </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;GL/glut.h&gt;\n#include &lt;GL/gl.h&gt;\n#include &lt;GL/glu.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nGLuint texture[2];\n\n\nstruct Image {\n\n    unsigned long sizeX;\n\n    unsigned long sizeY;\n\n    char *data;\n\n};\n\ntypedef struct Image Image;\n\n\n#define checkImageWidth 64\n\n#define checkImageHeight 64\n\n\nGLubyte checkImage[checkImageWidth][checkImageHeight][3];\n\nvoid makeCheckImage(void){\n\n    int i, j, c;\n\n    for (i = 0; i &lt; checkImageWidth; i++) {\n\n        for (j = 0; j &lt; checkImageHeight; j++) {\n\n            c = ((((i&amp;0x8)==0)^((j&amp;0x8)==0)))*255;\n\n            checkImage[i][j][0] = (GLubyte) c;\n\n            checkImage[i][j][1] = (GLubyte) c;\n\n            checkImage[i][j][2] = (GLubyte) c;\n\n        }\n\n    }\n\n}\n\n\n\nint ImageLoad(char *filename, Image *image) {\n\n    FILE *file;\n\n    unsigned long size; // size of the image in bytes.\n\n    unsigned long i; // standard counter.\n\n    unsigned short int planes; // number of planes in image (must be 1)\n\n    unsigned short int bpp; // number of bits per pixel (must be 24)\n\n    char temp; // temporary color storage for bgr-rgb conversion.\n\n    // make sure the file is there.\n\n    if ((file = fopen(filename, \"rb\"))==NULL){\n\n        printf(\"File Not Found : %s\\n\",filename);\n\n        return 0;\n\n    }\n\n    // seek through the bmp header, up to the width/height:\n\n    fseek(file, 18, SEEK_CUR);\n\n    // read the width\n\n    if ((i = fread(&amp;image-&gt;sizeX, 4, 1, file)) != 1) {\n\n        printf(\"Error reading width from %s.\\n\", filename);\n\n        return 0;\n\n    }\n\n    //printf(\"Width of %s: %lu\\n\", filename, image-&gt;sizeX);\n\n    // read the height\n\n    if ((i = fread(&amp;image-&gt;sizeY, 4, 1, file)) != 1) {\n\n        printf(\"Error reading height from %s.\\n\", filename);\n\n        return 0;\n\n    }\n\n    //printf(\"Height of %s: %lu\\n\", filename, image-&gt;sizeY);\n\n    // calculate the size (assuming 24 bits or 3 bytes per pixel).\n\n    size = image-&gt;sizeX * image-&gt;sizeY * 3;\n\n    // read the planes\n\n    if ((fread(&amp;planes, 2, 1, file)) != 1) {\n\n        printf(\"Error reading planes from %s.\\n\", filename);\n\n        return 0;\n\n    }\n\n    if (planes != 1) {\n\n        printf(\"Planes from %s is not 1: %u\\n\", filename, planes);\n\n        return 0;\n\n    }\n\n    // read the bitsperpixel\n\n    if ((i = fread(&amp;bpp, 2, 1, file)) != 1) {\n\n        printf(\"Error reading bpp from %s.\\n\", filename);\n\n        return 0;\n\n    }\n\n    if (bpp != 24) {\n\n        printf(\"Bpp from %s is not 24: %u\\n\", filename, bpp);\n\n        return 0;\n\n    }\n\n    // seek past the rest of the bitmap header.\n\n    fseek(file, 24, SEEK_CUR);\n\n    // read the data.\n\n    image-&gt;data = (char *) malloc(size);\n\n    if (image-&gt;data == NULL) {\n\n        printf(\"Error allocating memory for color-corrected image data\");\n\n        return 0;\n\n    }\n\n    if ((i = fread(image-&gt;data, size, 1, file)) != 1) {\n\n        printf(\"Error reading image data from %s.\\n\", filename);\n\n        return 0;\n\n    }\n\n    for (i=0;i&lt;size;i+=3) { // reverse all of the colors. (bgr -&gt; rgb)\n\n        temp = image-&gt;data[i];\n\n        image-&gt;data[i] = image-&gt;data[i+2];\n\n        image-&gt;data[i+2] = temp;\n\n    }\n\n    // we're done.\n\n    return 1;\n\n}\n\n\nImage * loadTexture(){\n\n    Image *image1;\n\n    // allocate space for texture\n\n    image1 = (Image *) malloc(sizeof(Image));\n\n    if (image1 == NULL) {\n\n        printf(\"Error allocating space for image\");\n\n        exit(0);\n\n    }\n\n    if (!ImageLoad(\"NeHe.bmp\", image1)) {\n\n        exit(1);\n\n    }\n\n    return image1;\n\n}\n\n\n\nvoid myinit(void)\n\n{\n\n    glClearColor (0.5, 0.5, 0.5, 0.0);\n\n    glEnable(GL_DEPTH_TEST);\n\n    glDepthFunc(GL_LESS);\n\n    Image *image1 = loadTexture();\n\n    if(image1 == NULL){\n\n        printf(\"Image was not returned from loadTexture\\n\");\n\n        exit(0);\n\n    }\n\n    makeCheckImage();\n\n    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);\n\n    // Create Texture\n\n    glGenTextures(2, texture);\n\n    glBindTexture(GL_TEXTURE_2D, texture[0]);\n\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR); //scale linearly when image bigger than texture\n\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); //scale linearly when image smalled than texture\n\n    glTexImage2D(GL_TEXTURE_2D, 0, 3, image1-&gt;sizeX, image1-&gt;sizeY, 0,\n\n    GL_RGB, GL_UNSIGNED_BYTE, image1-&gt;data);\n\n    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);\n\n    glBindTexture(GL_TEXTURE_2D, texture[1]);\n\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);\n\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);\n\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n\n    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);\n\n    glTexImage2D(GL_TEXTURE_2D, 0, 3, checkImageWidth,\n\n    checkImageHeight, 0, GL_RGB, GL_UNSIGNED_BYTE,&amp;checkImage[0][0][0]);\n\n    glEnable(GL_TEXTURE_2D);\n\n    glShadeModel(GL_FLAT);\n\n}\n\n\n\nvoid display(void){\n\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n    glBindTexture(GL_TEXTURE_2D, texture[1]);\n\n    glutSolidTeapot(1.0);\n\n    glBindTexture(GL_TEXTURE_2D, texture[0]);\n\n    glBegin(GL_QUADS);\n\n    glTexCoord2f(0.0, 0.0);\n\n    glVertex3f(1.0, -1.0, 0.0);\n\n    glTexCoord2f(1.0, 0.0);\n\n    glVertex3f(1.0, 1.0, 0.0);\n\n    glTexCoord2f(1.0, 1.0);\n\n    glVertex3f(2.41421, 1.0, -1.41421);\n\n    glTexCoord2f(0.0, 1.0);\n\n    glVertex3f(2.41421, -1.0, -1.41421);\n\n    glEnd();\n\n    glutSwapBuffers();\n\n}\n\n\nvoid myReshape(int w, int h){\n\n    glViewport(0, 0, w, h);\n\n    glMatrixMode(GL_PROJECTION);\n\n    glLoadIdentity();\n\n    gluPerspective(60.0, 1.0*(GLfloat)w/(GLfloat)h, 1.0, 30.0);\n\n    glMatrixMode(GL_MODELVIEW);\n\n    glLoadIdentity();\n\n    glTranslatef(0.0, 0.0, -3.6);\n\n}\n\n\nvoid keyboard (unsigned char key, int x, int y){\n\n    switch (key) {\n\n        case 27: // \u201cesc\u201d on keyboard\n\n        exit(0);\n\n        break;\n\n        default: // \u201ca\u201d on keyboard\n\n        break;\n\n    }\n\n}\n\n\nint main(int argc, char** argv)\n\n{\n\n    glutInit(&amp;argc, argv);\n\n    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);\n\n    glutCreateWindow(\"Texture Mapping - Programming Techniques\");\n\n    myinit();\n\n    glutReshapeFunc (myReshape);\n\n    glutDisplayFunc(display);\n\n    glutKeyboardFunc(keyboard);\n\n    glutMainLoop();\n\n    return 0;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 789, "user_id": 7185318, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mMNFI.png?s=128&g=1", "display_name": "LMD", "link": "https://stackoverflow.com/users/7185318/lmd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13533, "favorite_count": 1, "accepted_answer_id": 42043320, "answer_count": 2, "score": 2, "last_activity_date": 1486229291, "creation_date": 1485367005, "last_edit_date": 1485800081, "question_id": 41858408, "link": "https://stackoverflow.com/questions/41858408/how-to-load-texture-opengl", "title": "How to load texture Opengl?", "body": "<p>I found a useful post at this site, where some code is used to load a BMP\nThis code should load the header, read out infos, go further, read data, generate texture and bin it. But it doesnt work. What am I doing wrong ? </p>\n\n<p>Texture Declaration : </p>\n\n<pre><code>GLuint texture[1];\n</code></pre>\n\n<p>BMP Loading : </p>\n\n<pre><code>void LoadTexture(char *filename)\n{\n    FILE * file = fopen(filename,\"rb\");\n\n    unsigned char header[54];\n    unsigned int dataPos;\n    unsigned int imageSize;\n    unsigned int width, height;\n\n    fread(header,1,54,file);\n\n    dataPos    = *(int*)&amp;(header[0x0A]);\n    imageSize  = *(int*)&amp;(header[0x22]);\n    width      = *(int*)&amp;(header[0x12]);\n    height     = *(int*)&amp;(header[0x16]);\n\n    if (imageSize==0) {\n        imageSize=width*height*3; \n        }\n    if (dataPos==0) {\n        dataPos=54; \n    }\n    unsigned char data[imageSize];\n    fseek(file, SEEK_SET, 53);\n    fread(data,1,imageSize,file);\n\n    fclose(file);\n\n    glActiveTexture(GL_TEXTURE1);\n\n    glGenTextures(1, texture[0]);\n\n    glBindTexture(GL_TEXTURE_2D, texture[0]);\n\n    glTexImage2D(GL_TEXTURE_2D, 0,GL_RGB, width, height, 0, GL_BGR, GL_UNSIGNED_BYTE, data);\n\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);\n\n    glGenerateMipmap(GL_TEXTURE_2D);\n\n    glBindTexture(GL_TEXTURE_2D, texture[0]);\n}\n</code></pre>\n\n<p><strong>EDIT</strong> : I printed out some values read from the header. The header seems to be read properly.</p>\n\n<p>Drawing : </p>\n\n<pre><code>int DrawGLScene(GLvoid)                         \n{   \n    glLoadIdentity();\n        glEnable(GL_TEXTURE_2D);                        \n    glTranslatef(0.0f,0.0f,-5.0f);\n        glActiveTexture(GL_TEXTURE1);\n    glBindTexture(GL_TEXTURE_2D, texture[0]);\n\n    glBegin(GL_QUADS);\n\n        glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f, -1.0f,  1.0f);\n        glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f, -1.0f,  1.0f);\n        glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f,  1.0f);\n        glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f,  1.0f,  1.0f);\n\n        glTexCoord2f(1.0f, 0.0f); glVertex3f(-1.0f, -1.0f, -1.0f);\n        glTexCoord2f(1.0f, 1.0f); glVertex3f(-1.0f,  1.0f, -1.0f);\n        glTexCoord2f(0.0f, 1.0f); glVertex3f( 1.0f,  1.0f, -1.0f);\n        glTexCoord2f(0.0f, 0.0f); glVertex3f( 1.0f, -1.0f, -1.0f);\n\n        glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f,  1.0f, -1.0f);\n        glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f,  1.0f,  1.0f);\n        glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f,  1.0f,  1.0f);\n        glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f, -1.0f);\n\n        glTexCoord2f(1.0f, 1.0f); glVertex3f(-1.0f, -1.0f, -1.0f);\n        glTexCoord2f(0.0f, 1.0f); glVertex3f( 1.0f, -1.0f, -1.0f);\n        glTexCoord2f(0.0f, 0.0f); glVertex3f( 1.0f, -1.0f,  1.0f);\n        glTexCoord2f(1.0f, 0.0f); glVertex3f(-1.0f, -1.0f,  1.0f);\n\n        glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f, -1.0f, -1.0f);\n        glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f, -1.0f);\n        glTexCoord2f(0.0f, 1.0f); glVertex3f( 1.0f,  1.0f,  1.0f);\n        glTexCoord2f(0.0f, 0.0f); glVertex3f( 1.0f, -1.0f,  1.0f);\n\n        glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f, -1.0f, -1.0f);\n        glTexCoord2f(1.0f, 0.0f); glVertex3f(-1.0f, -1.0f,  1.0f);\n        glTexCoord2f(1.0f, 1.0f); glVertex3f(-1.0f,  1.0f,  1.0f);\n        glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f,  1.0f, -1.0f);\n    glEnd();\n    glFlush();\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    return 1;                                   \n}\n</code></pre>\n"}, {"tags": ["c++", "function", "graph", "runtime", "depth-first-search"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1485367627, "post_id": 41858354, "comment_id": 70900999, "body": "You are unfortunate to get that far. In the <code>graph</code> constructor <code>adj = new std::list&lt;int&gt;[V];</code> makes an array of <code>list</code> of size <code>V</code>. <code>V</code> is specified as 6. Later ` g.add(5, 6);` attempts to <code>adj[w].push_back(v);</code> which resolves to <code>adj[6].push_back(5);</code> and writes outside the array. Arrays are origin 0, so an array of size 6 is index-able from 0 to 5."}, {"owner": {"reputation": 21, "user_id": 6614992, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/zi1k9.jpg?s=128&g=1", "display_name": "Amireddy Tharun reddy", "link": "https://stackoverflow.com/users/6614992/amireddy-tharun-reddy"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1485368508, "post_id": 41858354, "comment_id": 70901508, "body": "@user4581301 Thanks a lot understood the bug."}], "owner": {"reputation": 21, "user_id": 6614992, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/zi1k9.jpg?s=128&g=1", "display_name": "Amireddy Tharun reddy", "link": "https://stackoverflow.com/users/6614992/amireddy-tharun-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486527599, "creation_date": 1485366885, "last_edit_date": 1486527599, "question_id": 41858354, "link": "https://stackoverflow.com/questions/41858354/getting-run-time-error-for-depth-first-search-in-c-code", "title": "Getting run time error for Depth first search in c++ code", "body": "<p>I have an un-directed graph. I am trying to find the maximum node value other than the adjacent ones of a given node.</p>\n\n<p>For example :</p>\n\n<pre><code>6 // number of nodes\n\n1 3\n\n2 3\n\n3 4\n\n4 5\n\n4 6// edges \n</code></pre>\n\n<p>I have to find the maximum node value other than the direct adjacent nodes for the node in question.</p>\n\n<p>For example, if I use DFS(1) the answer must be 6. My code is working perfectly fine but if I call DFS() multiple times in suffering run time error.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;stack&gt;\n#include&lt;list&gt;\n#include&lt;map&gt;\n#include&lt;utility&gt;\n#include&lt;vector&gt;\nclass graph\n{\n    std::list&lt;int&gt; *adj;\n    int V;\npublic:\n    graph(int V);\n    void add(int v, int w);\n    void DFS(int s);\n};\nint max = -1;\ngraph::graph(int V)\n{\n    this-&gt;V = V;\n    adj = new std::list&lt;int&gt;[V];\n}\nvoid graph::add(int v, int w)\n{\n    adj[v].push_back(w);\n    adj[w].push_back(v);\n}\nvoid graph::DFS(int s)\n{\n    std::vector&lt;int&gt; visited(V, false);\n    std::stack&lt;int&gt; st;\n    st.push(s);\n    while (!st.empty())\n    {\n        int t = st.top();\n        st.pop();\n        if (!visited[t])\n        {\n            visited[t] = true;\n        }\n        for (auto i = adj[t].begin(); i != adj[t].end(); i++)\n        {\n            if (!visited[*i])\n            {\n                visited[*i] = true;\n            }\n\n        }\n        for (int j = V; j &gt;= 0; j--)\n        {\n            if (visited[j] == 0)\n            {\n                std::cout &lt;&lt; j &lt;&lt; \" \";\n                break;\n            }\n        }\n\n    }\n\n}\nint main()\n{\n    int t = 0, k = 0;\n    graph g(6);\n\n    g.add(1, 3);\n\n    g.add(2, 3);\n\n    g.add(3, 4);\n\n    g.add(4, 5);\n\n    g.add(5, 6);\n\n    g.DFS(1);\n    g.DFS(2);\n    g.DFS(3);\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "arrays", "opencv", "mat"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1485366812, "post_id": 41858211, "comment_id": 70900483, "body": "You need a <code>CV_8UC3</code> image (not CV_32F). The buffer <code>pixels</code> should be a <code>uchar*</code>, with length <code>rows*cols*3</code> (3 channels)."}, {"owner": {"reputation": 155, "user_id": 4472627, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a01d0c9ccf1712f91adad9e51737f005?s=128&d=identicon&r=PG&f=1", "display_name": "Shahaf Stein", "link": "https://stackoverflow.com/users/4472627/shahaf-stein"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1485369152, "post_id": 41858211, "comment_id": 70901877, "body": "im confused, if pixels will be of type uchar* how can it be of length rows*cols*3? each number is takes more than 1 byte (which is uchar)."}, {"owner": {"reputation": 155, "user_id": 4472627, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a01d0c9ccf1712f91adad9e51737f005?s=128&d=identicon&r=PG&f=1", "display_name": "Shahaf Stein", "link": "https://stackoverflow.com/users/4472627/shahaf-stein"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1485369312, "post_id": 41858211, "comment_id": 70901965, "body": "got it. i should convert the string i have into uchar characters which will represent the colors? because uchar can give me 0-255? but then how do i convert the string i have &quot;255 255 255 249...&quot; to an array of uchar?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1485369475, "post_id": 41858211, "comment_id": 70902051, "body": "Yes, a pixel is a triplet (3 channels) BGR (In OpenCV the convention is BGR, not RGB), where each channel is in range [0,255]"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1485369536, "post_id": 41858211, "comment_id": 70902076, "body": "uchar(stoi(...)). Or better <code>cv::saturate_cast&lt;uchar&gt;(stoi(...))</code>"}, {"owner": {"reputation": 155, "user_id": 4472627, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a01d0c9ccf1712f91adad9e51737f005?s=128&d=identicon&r=PG&f=1", "display_name": "Shahaf Stein", "link": "https://stackoverflow.com/users/4472627/shahaf-stein"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1485370053, "post_id": 41858211, "comment_id": 70902421, "body": "its working! thank you!!!!"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1485370199, "post_id": 41858211, "comment_id": 70902514, "body": "Glad it helped ;)"}, {"owner": {"reputation": 155, "user_id": 4472627, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a01d0c9ccf1712f91adad9e51737f005?s=128&d=identicon&r=PG&f=1", "display_name": "Shahaf Stein", "link": "https://stackoverflow.com/users/4472627/shahaf-stein"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1485370540, "post_id": 41858211, "comment_id": 70902710, "body": "got a suggestion of what to do if i want to do the same thing only with a 2D array of floats? not RGB pixels. the the length is just rows*cols of floats. uchar cant contain that"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1485370664, "post_id": 41858211, "comment_id": 70902779, "body": "Same as before, type CV_32FC3, pixels is float* of size (rows* cols* 3), stof(...). For single channel images, CV_32FC1, size(rows*cols)"}, {"owner": {"reputation": 155, "user_id": 4472627, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a01d0c9ccf1712f91adad9e51737f005?s=128&d=identicon&r=PG&f=1", "display_name": "Shahaf Stein", "link": "https://stackoverflow.com/users/4472627/shahaf-stein"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1485370919, "post_id": 41858211, "comment_id": 70902936, "body": "amazing. thank you! saved me"}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 4472627, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a01d0c9ccf1712f91adad9e51737f005?s=128&d=identicon&r=PG&f=1", "display_name": "Shahaf Stein", "link": "https://stackoverflow.com/users/4472627/shahaf-stein"}, "edited": false, "score": 0, "creation_date": 1485597155, "post_id": 41862125, "comment_id": 70998509, "body": "Miki has already helped me via the comments but this is also a great answer, thank you!"}], "tags": [], "owner": {"reputation": 2346, "user_id": 5179465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d11933d9ee569ac40d0111430579f556?s=128&d=identicon&r=PG&f=1", "display_name": "ilke444", "link": "https://stackoverflow.com/users/5179465/ilke444"}, "is_accepted": true, "score": 1, "last_activity_date": 1485380370, "creation_date": 1485380370, "answer_id": 41862125, "question_id": 41858211, "link": "https://stackoverflow.com/questions/41858211/initial-cvmat-from-a-float-array-representing-rgb-image/41862125#41862125", "title": "Initial CV::MAT from a float array representing RGB image", "body": "<p>The corrected items:</p>\n\n<ul>\n<li>You need the type to be <code>CV_8UC3</code> to store a 3-channel int array.</li>\n<li>The size of the mat should be rows*cols*3.</li>\n<li>The data type per pixel should be <code>uchar</code>.</li>\n</ul>\n\n<p>Following those, the following code should work.</p>\n\n<pre><code>vector&lt;string&gt; imgVector;\nint imgRows = stoi(kp.at(7));\nint imgCols = stoi(kp.at(8));\nsplit(kp.at(2), ' ', back_inserter(imgVector)); // kp.at(2) is a ' ' seperated array of integers\nuchar* pixels = (uchar*)malloc(sizeof(uchar) * imgRows*imgCols*3);\nfor (int j = 0; (unsigned)j &lt; imgVector.size(); i++){\n    pixels[j] = uchar(stoi(imgVector[j]));\n}\nMat image(imgRows, imgCols, CV_8UC3, pixels);\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 4472627, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a01d0c9ccf1712f91adad9e51737f005?s=128&d=identicon&r=PG&f=1", "display_name": "Shahaf Stein", "link": "https://stackoverflow.com/users/4472627/shahaf-stein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1179, "favorite_count": 0, "accepted_answer_id": 41862125, "answer_count": 1, "score": 0, "last_activity_date": 1485380370, "creation_date": 1485366415, "last_edit_date": 1485372388, "question_id": 41858211, "link": "https://stackoverflow.com/questions/41858211/initial-cvmat-from-a-float-array-representing-rgb-image", "title": "Initial CV::MAT from a float array representing RGB image", "body": "<p>Introduction to my problem:<br>\nI have serialized myself a <code>CV::MAT</code> object in c++ and sent in to a python program (more accurately, I have a python program that uses a c++ .exe as subprocess..), I deserialize it in python back into a 2D array of (R,G,B) ints</p>\n\n<p>Now I have a different method in my python service that on demand sends this 2D array back to the c++ process and have it do something\nI DONT want to use boost serializer because its basically hell\nI have serialized it myself from python and manage to give the c++ process a flattened array along with the dimentions of the 2D array (rows and cols)</p>\n\n<p>Now I have no idea how I construct a <code>CV::MAT</code> object back from this data\ni know there's <code>Mat (int rows, int cols, int type, void *data, size_t step=AUTO_STEP)</code> which might do the job but no idea what goes insize the step in case its what I think it is</p>\n\n<p>Any help would be highly appreciated!</p>\n\n<p>This is the c++ code I have so far</p>\n\n<pre><code>    vector&lt;string&gt; imgVector;\n    int imgRows = stoi(kp.at(7));\n    int imgCols = stoi(kp.at(8));\n    split(kp.at(2), ' ', back_inserter(imgVector)); // kp.at(2) is a ' ' seperated array of integers\n    int* pixels = (int*)malloc(sizeof(int) * imgVector.size());\n    for (int j = 0; (unsigned)j &lt; imgVector.size(); i++){\n        pixels[j] = stoi(imgVector[j]);\n    }\n    Mat image(imgRows, imgCols, CV_32F, pixels);\n</code></pre>\n\n<p>But I think it will make a 2D array of integers and not of RGB tuples like I want</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1207, "user_id": 1366591, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3bcb773bbfe3cb82d192072cad1f0b12?s=128&d=identicon&r=PG", "display_name": "ACB", "link": "https://stackoverflow.com/users/1366591/acb"}, "edited": false, "score": 0, "creation_date": 1485367129, "post_id": 41858089, "comment_id": 70900693, "body": "CreateWindow is itself a macro for CreateWindowEx(A/W) did you try poisoning those definitions ?"}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "reply_to_user": {"reputation": 1207, "user_id": 1366591, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3bcb773bbfe3cb82d192072cad1f0b12?s=128&d=identicon&r=PG", "display_name": "ACB", "link": "https://stackoverflow.com/users/1366591/acb"}, "edited": false, "score": 0, "creation_date": 1485517553, "post_id": 41858089, "comment_id": 70968326, "body": "@ACB: How could I?  I could only <code>#define</code> the macro-macro with something else (optionally <code>#undef</code> first), but that will make whether or not it works or silently fails, or gives a &quot;macro redefined&quot; warning dependant on whether I include <code>&quot;poison.h&quot;</code> or <code>&lt;windows.h&gt;</code> first. Since you cannot always know which headers are included in which order, that&#39;s a path to desaster.. :("}, {"owner": {"reputation": 1921, "user_id": 6317147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376fccc260dbc5e810117896b2bdf3a9?s=128&d=identicon&r=PG", "display_name": "Gregg", "link": "https://stackoverflow.com/users/6317147/gregg"}, "edited": false, "score": 0, "creation_date": 1526673993, "post_id": 41858089, "comment_id": 87852638, "body": "As a work around, you could define the offending function into a macro that generates an error.  #define CreateFileA() #error unsafe function CreatFile1"}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "reply_to_user": {"reputation": 1921, "user_id": 6317147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376fccc260dbc5e810117896b2bdf3a9?s=128&d=identicon&r=PG", "display_name": "Gregg", "link": "https://stackoverflow.com/users/6317147/gregg"}, "edited": false, "score": 0, "creation_date": 1526756518, "post_id": 41858089, "comment_id": 87871828, "body": "@Gregg How would that be in any way different from the preprocessor hack that I used? The problem with these is that they <i>don&#39;t</i> work when a variadic macro is being used in the system headers. Which, unluckily is the case with about half of the cases that I&#39;d like to poison..."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1532862067, "post_id": 41858089, "comment_id": 90124533, "body": "&quot;Poisoning CreateFileA&quot; suggests to me that you aren&#39;t really understanding the problem in the first place. It&#39;s the <code>T</code> macro and the <code>CreateFile</code> pseudo-overload that you want to poison. Those are Windows-95 hacks."}], "answers": [{"tags": [], "owner": {"reputation": 767718, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 0, "last_activity_date": 1532838069, "creation_date": 1532838069, "answer_id": 51577196, "question_id": 41858089, "link": "https://stackoverflow.com/questions/41858089/poisoning-certain-api-functions-not-being-maintainer/51577196#51577196", "title": "Poisoning certain API functions (not being maintainer)", "body": "<p>I would keep in the pre-processor hack as the <em>first</em> line of defence, as it appears to capture some cases quite well, giving you the exact location within the source code.</p>\n\n<p>I would also put in a <em>second</em> layer of defence, by ensuring you provide an object file containing your <em>own</em> variants of the functions you want poisoned, something like:</p>\n\n<pre><code>HWND WINAPI CreateWindowEx(DWORD dwExStyle, LPCTSTR lpClassName,\n    LPCTSTR lpWindowName, DWORD dwStyle, int x, int y, int nWidth,\n    int nHeight, HWND hWndParent, HMENU hMenu, HINSTANCE hInstance,\n    LPVOID lpParam)\n{\n    std::cerr &lt;&lt; \"Attempting to use poisoned function CreateWindowEx\\n\";\n    exit(1);\n}\n</code></pre>\n\n<p>If you link this as an object file (not library, since a library will only link on unresolved references), there will be three possible cases (once it's gotten past the header poisoning):</p>\n\n<ul>\n<li>Both your object file and the real code will be linked and you will see a duplicate definition at link time.</li>\n<li>Only your object file is linked (not the real one) so, when you call it, you'll get the error message and termination. This should be found pretty early at test time. Not during compilation/linking as you requested, but hopefully well before you ship.</li>\n<li>Only your object file is linked and you <em>don't</em> call it. In that case, you've wasted a little bit of code space but your executable will run fine.</li>\n</ul>\n\n<p>In terms of doing this, a single <code>poisoned.h</code> and <code>poisoned.c</code> should do the trick, you just have to ensure that all functions you want poisoned are added to both.</p>\n\n<p>Now I haven't tested that this method would work with MinGW but it's worth giving it a try since, at the lowest level, it will need to call the <em>real</em> Windows function at some point.</p>\n\n<p>The only way I could envisage your issue with MinGW happening is that it's calling some already-compiled MinGW objects that eventually call the Windows function. If that's what happening then the linker capture should catch this as well.</p>\n"}, {"comments": [{"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 1, "creation_date": 1551610616, "post_id": 54967398, "comment_id": 96695993, "body": "Thank you for the attempt, this indeed works for API functions which are declared as functions (such as <code>puts</code> in your example). Unluckily, it <i>doesn&#39;t work</i> for functions that are in reality macros or macros-of-macros, such as <code>CreateWindow</code> which expands to <code>CreateWindowA</code>, which expands to <code>CreateWindowExA</code> (at least under MingW-w64, not sure about MS platform headers). In that case, there is no way of building any program with the above (always breaks build)."}, {"owner": {"reputation": 4371, "user_id": 2945027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/etv49.jpg?s=128&g=1", "display_name": "Alex Guteniev", "link": "https://stackoverflow.com/users/2945027/alex-guteniev"}, "reply_to_user": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 0, "creation_date": 1551610969, "post_id": 54967398, "comment_id": 96696068, "body": "It works for me if I use <code>POISONED_BY_NAME(CreateWindowExA)</code> or <code>POISONED_BY_NAME(CreateWindowExW)</code> (depending on UNICODE macro). Or was your intention to poison <code>CreateWindow</code> but not <code>CreateWindowExA</code> ?"}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 0, "creation_date": 1551611484, "post_id": 54967398, "comment_id": 96696192, "body": "The intent was to prevent me (or whoever) from accidentially calling e.g. <code>CreateWindowA</code> (explicitly or by forgetting to define the unicode macro and calling <code>CreateWindow</code>). Or, accidentially using <code>SetWindowLong</code> instead of <code>SetWindowLongPtr</code>, which will cause untraceable future desaster. So, if poisoning <code>CreateWindowExA</code> worked, that would be the solution. Unluckily, for me, this breaks the poison code like this:  <code>error: conflicting declaration &#39;using function_type = ... using function_type = decltype(::name); note: in expansion of macro &#39;POISONED_BY_NAME&#39;</code> (edited to fit comment)"}, {"owner": {"reputation": 4371, "user_id": 2945027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/etv49.jpg?s=128&g=1", "display_name": "Alex Guteniev", "link": "https://stackoverflow.com/users/2945027/alex-guteniev"}, "reply_to_user": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 0, "creation_date": 1551611972, "post_id": 54967398, "comment_id": 96696329, "body": "I see. In <code>x86</code> <code>SetWindowLongPtr</code> is defined to be implemented via <code>SetWidnowLong</code>. So ultimately your goal cannot be achieved by poisoning functions at all, if solution existed, it would be poisoning macro names."}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 0, "creation_date": 1551612393, "post_id": 54967398, "comment_id": 96696421, "body": "Well in 32 bits, it&#39;s fine to implement <code>SetWindowLongPtr</code> as <code>SetWindowLong</code>, so if the API doest that, that&#39;s no problem. But in 64 bit builds, it sure is a proper function. You <i>might</i> however accidentially use the wrong one. Which will, unluckily, &quot;work fine&quot;. Only just... it truncates half the pointer&#39;s bits, so depending on memory layout, you get a crash at an unpredictable, unrelated time later, and have no way of knowing why the hell the program is crashing (and sometimes works). That&#39;s the kind of debug nightmare you want to avoid."}], "tags": [], "owner": {"reputation": 4371, "user_id": 2945027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/etv49.jpg?s=128&g=1", "display_name": "Alex Guteniev", "link": "https://stackoverflow.com/users/2945027/alex-guteniev"}, "is_accepted": false, "score": 1, "last_activity_date": 1551605366, "creation_date": 1551605366, "answer_id": 54967398, "question_id": 41858089, "link": "https://stackoverflow.com/questions/41858089/poisoning-certain-api-functions-not-being-maintainer/54967398#54967398", "title": "Poisoning certain API functions (not being maintainer)", "body": "<p>Have found a way to enforce ambiguity by adding another declaration of the same function in a namespace. No pragmas or attrbiutes are used, should be portable to any C++11 compiler:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define POISONED_BY_NAME(name) \\\n    namespace Poisoned \\\n    { \\\n        using function_type = decltype(::name); \\\n        extern function_type* name; \\\n    } \\\n    using namespace Poisoned;\n\n\nPOISONED_BY_NAME(puts)\n\nint main()\n{\n    puts(\"Hello\"); \n}\n</code></pre>\n\n<p>Visual Studio message:</p>\n\n<pre><code>error C2872: 'puts': ambiguous symbol\n1&gt;c:\\program files\\windows kits\\10\\include\\10.0.17763.0\\ucrt\\stdio.h(353): note: could be 'int puts(const char *)'\n1&gt;c:\\test.cpp(43): note: or       'Poisoned::function_type (__cdecl *__cdecl Poisoned::puts)'\n</code></pre>\n\n<p>gcc message:</p>\n\n<pre><code>main.cpp: In function 'int main()':\nmain.cpp:16:5: error: reference to 'puts' is ambiguous\n     puts(\"Hello\");\n     ^~~~\nmain.cpp:12:22: note: candidates are: 'int (* Poisoned::puts)(const char*)'\n     POISONED_BY_NAME(puts)\n                      ^~~~\nmain.cpp:7:35: note: in definition of macro 'POISONED_BY_NAME'\n             extern function_type* name; \\\n                                   ^~~~\nIn file included from main.cpp:1:\n/usr/include/stdio.h:695:12: note:                 'int puts(const char*)'\n extern int puts (const char *__s);\n            ^~~~\n</code></pre>\n"}], "owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 1, "answer_count": 2, "score": 11, "last_activity_date": 1551605366, "creation_date": 1485365941, "last_edit_date": 1592644375, "question_id": 41858089, "link": "https://stackoverflow.com/questions/41858089/poisoning-certain-api-functions-not-being-maintainer", "title": "Poisoning certain API functions (not being maintainer)", "body": "<p>Related to e.g.:\n<a href=\"https://stackoverflow.com/questions/34118209/how-to-poison-an-identifier-in-vc\">How to poison an identifier in VC++?</a><br />\n<a href=\"https://stackoverflow.com/questions/33964621/what-does-it-mean-to-poison-a-function-in-c\">What does it mean to &quot;poison a function&quot; in C++?</a></p>\n<p>Is there a way to &quot;properly&quot; poison some functions whose declarations (or implementations) are not under my control?</p>\n<p>Specifically, I'm trying to prevent accidential use of certain Windows API functions which may result in surprise results, such as e.g. <code>CreateFileA</code> (where use of the T macro hides the fact that you mix ANSI and Unicode) or <code>SetWindowLong</code> (which will cause your program to fail silently, without error, and without a chance of knowing what went wrong on a 64-bit system).</p>\n<p>My definition of poisoning &quot;properly&quot; is that <strong>attempting to call</strong> the function breaks the build with a readable error (bonus points if the error occurs at the correct location in the source code).<br />\nPreferrably, this should be portable, and at the very least it must work with both GCC and clang.</p>\n<p>What I've tried / looked at so far:</p>\n<h3>preprocessor</h3>\n<p>The simplest, immediately obvious solution would be to exploit the preprocessor:</p>\n<pre><code>#define CreateFileA __poison_ANSI_CreateFileA\n</code></pre>\n<p>This works very well for that one particular function as well as a couple of others, working exactly as intended, with a precise error that hints to the problem and points to the correct location in the source:</p>\n<pre><code>error: no matching function for call to '__poison_ANSI_CreateFileA'\nnote: expanded from macro 'CreateFile'\nnote: expanded from ... (precise location in source)\n</code></pre>\n<p>For different functions, one needs to have a unique name for each to avoid conflicting definition errors, which is tedious but easily done. So far so good, except it <em>does not</em> work for functions where the MinGW-w64 headers themselves tamper names using variadic macros, such as for example <code>CreateWindow</code> or <code>SetWindowLong</code>. No matter what, these compile just fine, poisoned or not.</p>\n<h3>pragma</h3>\n<p><code>#pragma GCC poison</code>, which clang happens to understand as well (and also features its own version), looks and sounds like it should do exactly what I want, and in the most idiomatic way possible. Alas, it does not work. Or rather, it works <em>too well</em>.<br />\nFunctions poisoned with the pragma directive already trigger an error when the poisoned name appears in a declaration, which means... <em>every time</em>, in every build that includes the header at all. That's not very helpful for writing a program!</p>\n<h3>attributes</h3>\n<p>These have the immense disadvantage that you must copy exactly the type definition lest you get &quot;ambiguous function call&quot; errors on legitimate calls on the one hand side. On the other hand side, they don't work. clang complains about <code>__attribute__((__error__))</code> but ignores <code>gnu::__error__</code> or <code>gnu::error</code> as well as <code>gnu::deprecated</code>. Further, the standard <code>[[deprecated]]</code> is all nice and well, but seems to do exactly nothing (compiles fine, not even a warning?!).</p>\n<p>Is there anything I can do?</p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 1, "creation_date": 1485365823, "post_id": 41857978, "comment_id": 70899881, "body": "So your question is actually that you want to optimize your code, since you get a timeout for too large numbers on whatever site you picked that challenge from and not an issue with datatypes?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1485365848, "post_id": 41857978, "comment_id": 70899898, "body": "Google the Sieve of Eratosthenes."}, {"owner": {"reputation": 271, "user_id": 2603739, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/e28cc9c637f2a8208893c8997db15a4f?s=128&d=identicon&r=PG", "display_name": "Bharg", "link": "https://stackoverflow.com/users/2603739/bharg"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1485366823, "post_id": 41857978, "comment_id": 70900489, "body": "@molbdnilo : For the Sieve, I&#39;ll need to initialize some data structure of size 10^9 initially. And no data structure seems to be able to hold that much without compromising on the access time."}, {"owner": {"reputation": 35084, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "edited": false, "score": 0, "creation_date": 1485367826, "post_id": 41857978, "comment_id": 70901109, "body": "@Bharg Smart people just sieve blocks at a time.  If you don&#39;t feel like being smart, <a href=\"http://www.cplusplus.com/reference/bitset/bitset/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/bitset/bitset</a> can store 10^9 bits in 128 MB of RAM."}, {"owner": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 0, "creation_date": 1485369319, "post_id": 41857978, "comment_id": 70901969, "body": "@Bharg that datastructure would most definitely not be of size 10^9. The precise number would be 50847534, as a short lookup on the <a href=\"https://en.wikipedia.org/wiki/Prime_number_theorem#Table_of_.CF.80.28x.29.2C_x.2Flog_x.2C_and_li.28x.29\" rel=\"nofollow noreferrer\">prim number theorem</a> shows."}, {"owner": {"reputation": 148466, "user_id": 2319407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98O16.jpg?s=128&g=1", "display_name": "Dmitry Bychenko", "link": "https://stackoverflow.com/users/2319407/dmitry-bychenko"}, "edited": false, "score": 0, "creation_date": 1485372124, "post_id": 41857978, "comment_id": 70903642, "body": "<code>sqrt(n)</code> can be time consuming, so <i>move it off</i> the loop: <code>int threshold = (int) (sqrt(n) + 1); for(long long int i=3;i&lt;=threshold;i+=2)...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 10306, "user_id": 302793, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7s8R3.png?s=128&g=1", "display_name": "lex82", "link": "https://stackoverflow.com/users/302793/lex82"}, "is_accepted": false, "score": 0, "last_activity_date": 1485369190, "last_edit_date": 1485369190, "creation_date": 1485368404, "answer_id": 41858802, "question_id": 41857978, "link": "https://stackoverflow.com/questions/41857978/better-algorithm-to-check-if-a-number-is-neither-a-prime-nor-a-power-of-a-single/41858802#41858802", "title": "Better algorithm to check if a number is neither a prime nor a power of a single prime", "body": "<p>There are many advanced ways to calculate primes quickly, but a simple way to improve your code is to only check if the next candidate number is divisible by one of the primes you found so far. When you keep the primes in a data structure that allows for sorting you can stop once you reach a prime larger than the square root of the candidate number.</p>\n\n<p>As mentioned in the comments, sieving in blocks is also possible and can be combined with the above improvement. Right now you are only checking odd numbers which is actually sieving with a block size of 2. If you checked that the candidate is not divisible by 3 you can check with block size 6. This would mean omitting every even position in the block and positions with a (one-based) index divisible by 3, so only index 1 and 5. And so on...  </p>\n\n<p>Checking whether a number is the power of a single prime can also be improved. Once you find one prime it is divisible by, check whether it is a power of this prime (write another method) and stop immediately.</p>\n"}, {"tags": [], "owner": {"reputation": 16306, "user_id": 448810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4b14d4a7503a55cb803c049700ed83b?s=128&d=identicon&r=PG", "display_name": "user448810", "link": "https://stackoverflow.com/users/448810/user448810"}, "is_accepted": false, "score": 1, "last_activity_date": 1485371953, "creation_date": 1485371953, "answer_id": 41859882, "question_id": 41857978, "link": "https://stackoverflow.com/questions/41857978/better-algorithm-to-check-if-a-number-is-neither-a-prime-nor-a-power-of-a-single/41859882#41859882", "title": "Better algorithm to check if a number is neither a prime nor a power of a single prime", "body": "<p>You want to determine if <em>n</em> can be written <em>p<sup>k</sup></em> with <em>p</em> prime and <em>k</em> > 0 integral.</p>\n\n<p>Henri Cohen describes an answer in Algorithm 1.7.5 of his book <em>A Course in Computational Algebraic Number Theory</em>. He exploits Fermat\u2019s Little Theorem and the witness to the compositeness of <em>n</em> that is found by the Miller-Rabin primality tester. Cohen proves that if <em>a</em> is a witness to the compositeness of <em>n</em>, in the sense of the Miller-Rabin test, then gcd(<em>a<sup>n</sup></em> &minus; <em>a</em>, <em>n</em>) is a non-trivial divisor of <em>n</em> (that is, it is between 1 and <em>n</em>).</p>\n\n<p>I reduce this idea to Python code at <a href=\"http://ideone.com/cNzQYr\" rel=\"nofollow noreferrer\"><a href=\"http://ideone.com/cNzQYr\" rel=\"nofollow noreferrer\">http://ideone.com/cNzQYr</a></a> and give a fuller explanation at <a href=\"http://programmingpraxis.com/2015/03/13/prime-power-predicate/\" rel=\"nofollow noreferrer\">my blog</a>. Here is the interesting code from ideone.com because Stack Overflow won't let me post without it; go there to see the rest:</p>\n\n<pre><code># returns p,k such that n=p**k, or 0,0\n# assumes n is an integer greater than 1\ndef primePower(n):\n    def checkP(n, p):\n        k = 0\n        while n &gt; 1 and n % p == 0:\n            n, k = n / p, k + 1\n        if n == 1: return p, k\n        else: return 0, 0\n    if n % 2 == 0: return checkP(n, 2)\n    q = n\n    while True:\n        a = findWitness(q)\n        if a == 0: return checkP(n, q)\n        d = gcd(pow(a,q,n)-a, q)\n        if d == 1 or d == q: return 0, 0\n        q = d\n</code></pre>\n"}], "owner": {"reputation": 271, "user_id": 2603739, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/e28cc9c637f2a8208893c8997db15a4f?s=128&d=identicon&r=PG", "display_name": "Bharg", "link": "https://stackoverflow.com/users/2603739/bharg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1485371953, "creation_date": 1485365561, "last_edit_date": 1485366425, "question_id": 41857978, "link": "https://stackoverflow.com/questions/41857978/better-algorithm-to-check-if-a-number-is-neither-a-prime-nor-a-power-of-a-single", "title": "Better algorithm to check if a number is neither a prime nor a power of a single prime", "body": "<p>I have the following program where <em>t</em> can take the value from 1 to 100000 and <em>n</em> can take the value 1 to 10^9. </p>\n\n<pre><code>#define MAX 10000000\n\nusing namespace std;\n\nunordered_set&lt;long long int&gt; s;\n\nbool morethanone(long long int n)\n{\n    long long int check=0;\n    for(unordered_set&lt;long long int&gt;::iterator it=s.begin();it!=s.end();it++)\n    {\n        if(n%(*it)==0)\n            check++;\n        if(check&gt;1)\n            return false;\n    }\n    return true;\n}\n\nbool isprime(long long int n)\n{\n    if(n%2==0)\n        return false;\n    for(long long int i=3;i&lt;=sqrt(n);i+=2)\n        if(n%i==0)\n            return false;\n    return true;\n}\n\nint main() \n{\ns.insert(2);\ns.insert(3);\nfor(long long int i=4;i&lt;=MAX;i++)\n{\n        if(isprime(i))\n            s.insert(i);\n}\n\nlong long int t,n;\nscanf(\"%lld\",&amp;t);\nfor(long long int test=0;test&lt;t;test++)\n{\n    scanf(\"%lld\",&amp;n);\n    if(n==1||s.find(n)!=s.end())\n        cout&lt;&lt;\"Santa\\n\";\n    else if(morethanone(n))\n        cout&lt;&lt;\"Santa\\n\";\n    else\n        cout&lt;&lt;\"Banta\\n\";\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>Basically the program generates primes till 10^9 and prints \"Santa\" if the number given is a prime or a power of a single prime or 1.</p>\n\n<p>The above program works for MAX=10^6 but shows \"Terminated due to timeout\" for any value beyond that.</p>\n"}, {"tags": ["c++", "qt", "qsslsocket"], "comments": [{"owner": {"reputation": 135, "user_id": 7470264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d67992ee278b328977774137fe35c75b?s=128&d=identicon&r=PG&f=1", "display_name": "KirstenS", "link": "https://stackoverflow.com/users/7470264/kirstens"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1485366782, "post_id": 41857883, "comment_id": 70900471, "body": "drescherjm, thanks for the quick response.  Is that something i specify in the .pro file? And where do I find the .lib? I have OpenSSL-Win32 on my local disk (C:), but there are no .lib files."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1485366927, "post_id": 41857883, "comment_id": 70900564, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/10846536/unresolved-functions-while-working-with-qsslsocket\">Unresolved Functions While Working With QSslSocket</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1485367051, "post_id": 41857883, "comment_id": 70900647, "body": "Sorry, I  thought that was a linker error not a runtime error. I believe this message this is due to the plugin usage in Qt."}, {"owner": {"reputation": 135, "user_id": 7470264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d67992ee278b328977774137fe35c75b?s=128&d=identicon&r=PG&f=1", "display_name": "KirstenS", "link": "https://stackoverflow.com/users/7470264/kirstens"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1485367180, "post_id": 41857883, "comment_id": 70900726, "body": "Ok, thanks for the help. Do you have any suggestions for how to fix runtime errors? I have looked an the previous topic &quot;Unresolved Functions...&quot; but I believe I tried  the solution they suggested (copying the dlls to the release folder) and it didn&#39;t work. Any suggestions? Thanks!"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1485367544, "post_id": 41857883, "comment_id": 70900952, "body": "Did you add <code>QT += network</code> to your pro?"}, {"owner": {"reputation": 135, "user_id": 7470264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d67992ee278b328977774137fe35c75b?s=128&d=identicon&r=PG&f=1", "display_name": "KirstenS", "link": "https://stackoverflow.com/users/7470264/kirstens"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1485370563, "post_id": 41857883, "comment_id": 70902722, "body": "yes, I do have that in my .pro file"}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 0, "creation_date": 1487344446, "post_id": 41857883, "comment_id": 71757278, "body": "It may sound basic but, are you executing the release configuration? I mean, if you are executing the debug configuration then you should copy the DLLs to the debug directory too. On the other hand, are you using the same version of OpenSSL libraries for which your Qt distribution was compiled?"}, {"owner": {"reputation": 388, "user_id": 1293445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb178ff2dea9366a203efdd64d13c4de?s=128&d=identicon&r=PG", "display_name": "mohammad alabid", "link": "https://stackoverflow.com/users/1293445/mohammad-alabid"}, "edited": false, "score": 0, "creation_date": 1496575159, "post_id": 41857883, "comment_id": 75708881, "body": "did you manage to solve it? i have same problem"}], "answers": [{"comments": [{"owner": {"reputation": 4077, "user_id": 245646, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/80de240a081a454c92a39d0ac510de95?s=128&d=identicon&r=PG", "display_name": "Ed of the Mountain", "link": "https://stackoverflow.com/users/245646/ed-of-the-mountain"}, "edited": false, "score": 0, "creation_date": 1531926306, "post_id": 44354154, "comment_id": 89781612, "body": "https network requests work fine in Qt Android 4.4 app.  @mohammad alabid , do you know when Android dropped support? Android &gt;= 6.0 ?  On Android 7.0 the same Qt app fails &quot;qt.network.ssl: QSslSocket: cannot call unresolved function SSL_CTX_ctrl&quot; even though I can see <i>both</i> ib.libcrypto.so and libssl.so in the Android /system/lib/ directory?"}, {"owner": {"reputation": 388, "user_id": 1293445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb178ff2dea9366a203efdd64d13c4de?s=128&d=identicon&r=PG", "display_name": "mohammad alabid", "link": "https://stackoverflow.com/users/1293445/mohammad-alabid"}, "reply_to_user": {"reputation": 4077, "user_id": 245646, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/80de240a081a454c92a39d0ac510de95?s=128&d=identicon&r=PG", "display_name": "Ed of the Mountain", "link": "https://stackoverflow.com/users/245646/ed-of-the-mountain"}, "edited": false, "score": 0, "creation_date": 1531985555, "post_id": 44354154, "comment_id": 89804726, "body": "Yes support for SSlSockets dropped in Android,  Did you tried to build .so files? you can try these files  <a href=\"https://www.dropbox.com/s/w6cm09niyj185fb/openSSL.zip?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/w6cm09niyj185fb/openSSL.zip?dl=0</a> -add those 3 files beside .pro file -and add this line to your .pro file include(android-openssl.pri)"}], "tags": [], "owner": {"reputation": 388, "user_id": 1293445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb178ff2dea9366a203efdd64d13c4de?s=128&d=identicon&r=PG", "display_name": "mohammad alabid", "link": "https://stackoverflow.com/users/1293445/mohammad-alabid"}, "is_accepted": true, "score": 3, "last_activity_date": 1496579675, "creation_date": 1496579675, "answer_id": 44354154, "question_id": 41857883, "link": "https://stackoverflow.com/questions/41857883/qsslsocket-cannot-call-unresolved-function/44354154#44354154", "title": "QSslSocket: cannot call unresolved function", "body": "<p>You need to Add support to OppenSSL manually, since android dropped the support of it, and i am using QT 5.9 and its not make it for you\nso its your mission to create openSSL lib</p>\n\n<p>You can download it directly here\n<a href=\"https://wiki.openssl.org/index.php/Binaries\" rel=\"nofollow noreferrer\">https://wiki.openssl.org/index.php/Binaries</a></p>\n\n<p>or here <a href=\"https://indy.fulgan.com/SSL/\" rel=\"nofollow noreferrer\">https://indy.fulgan.com/SSL/</a></p>\n\n<p>and then copy these filed and include them to your project</p>\n\n<pre><code>libcrypto.so\nlibssl.so\n</code></pre>\n\n<p>That should work correctly</p>\n\n<p>Or you can generate your <code>libcrypto.so</code> and <code>libssl.so</code> using this script\n, just follow it step by step\n<a href=\"https://github.com/ekke/android-openssl-qt\" rel=\"nofollow noreferrer\">https://github.com/ekke/android-openssl-qt</a></p>\n"}, {"comments": [{"owner": {"reputation": 714, "user_id": 3600461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c9120ccbb5f86e57a60e4fb96f701402?s=128&d=identicon&r=PG&f=1", "display_name": "sitting-duck", "link": "https://stackoverflow.com/users/3600461/sitting-duck"}, "edited": false, "score": 0, "creation_date": 1537383042, "post_id": 46226323, "comment_id": 91768566, "body": "&quot;Of course, you should ensure that you&#39;re packaging the same DLLs as the version of OpenSSL that Qt was compiled with in the first place.&quot; How do I do this?"}, {"owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "reply_to_user": {"reputation": 714, "user_id": 3600461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c9120ccbb5f86e57a60e4fb96f701402?s=128&d=identicon&r=PG&f=1", "display_name": "sitting-duck", "link": "https://stackoverflow.com/users/3600461/sitting-duck"}, "edited": false, "score": 1, "creation_date": 1537383542, "post_id": 46226323, "comment_id": 91768785, "body": "Good question! I found a hint to that <a href=\"https://stackoverflow.com/a/39497754/1666676\">here</a> and <a href=\"https://stackoverflow.com/a/42297296/1666676\">here</a>. In short, use <code>QSslSocket::sslLibraryBuildVersionString()</code>. I&#39;ll add that to my answer."}], "tags": [], "owner": {"reputation": 3356, "user_id": 1666676, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQ9IF.jpg?s=128&g=1", "display_name": "Phlucious", "link": "https://stackoverflow.com/users/1666676/phlucious"}, "is_accepted": false, "score": 10, "last_activity_date": 1537676076, "last_edit_date": 1537676076, "creation_date": 1505414949, "answer_id": 46226323, "question_id": 41857883, "link": "https://stackoverflow.com/questions/41857883/qsslsocket-cannot-call-unresolved-function/46226323#46226323", "title": "QSslSocket: cannot call unresolved function", "body": "<p>I ended up here via Googling around. In my case, I was getting this error <em>on random machines</em> because they were missing the correct versions of <code>libeay32.dll</code> and <code>ssleay32.dll</code>. It's \"random\" because some computers have these loaded in <code>PATH</code> from other software and some do not.</p>\n\n<p>I fixed this for Qt Creator by adding the DLLs to the <code>bin</code> folder of my Qt install, and I fixed this on distributions by including the aforementioned DLLs in my distribution.</p>\n\n<p>The DLLs should be the same or similar to the version of OpenSSL that Qt was compiled with in the first place. If you didn't compile it yourself, starting in Qt 5.4 you can query this with <a href=\"http://doc.qt.io/qt-5/qsslsocket.html#sslLibraryBuildVersionString\" rel=\"noreferrer\"><code>QSslSocket::sslLibraryBuildVersionString()</code></a>. (Credit: <a href=\"https://stackoverflow.com/a/42297296/1666676\">https://stackoverflow.com/a/42297296/1666676</a>)</p>\n\n<p>Don't forget that your 64-bit apps should have a 64-bit version of the DLLs, and 32-bit apps should have 32-bit DLLs so you don't have the same problem as <a href=\"https://stackoverflow.com/a/39497754/1666676\">this guy</a>.</p>\n\n<hr>\n\n<p>Additional notes:</p>\n\n<ul>\n<li>Starting in Qt 5.2 you <em>must</em> use version 1.0.0 or newer. 0.9.8 doesn't work any more. (Source: <a href=\"http://doc.qt.io/qt-5/ssl.html\" rel=\"noreferrer\">http://doc.qt.io/qt-5/ssl.html</a>)</li>\n<li>For my standard MSVC2017x64 distribution of Qt 5.10.1 <code>sslLibraryBuildVersionString()</code> returned \"OpenSSL 1.0.2o\". I use 1.0.2p for my distributions.</li>\n<li>The OpenSSL DLLs changed names to <code>libcrypto-1_1*.dll</code> and <code>libssl-1_1*.dll</code> starting in OpenSSL 1.1.0. Standard Qt distributions don't yet use those as of Sept. 2018.</li>\n<li>OpenSSL GitHub downloads are here: <a href=\"https://github.com/openssl/openssl/tags\" rel=\"noreferrer\">https://github.com/openssl/openssl/tags</a></li>\n</ul>\n\n<p>Hope this helps the next person. Sorry for resurrecting an old post.</p>\n"}, {"comments": [{"owner": {"reputation": 3956, "user_id": 367765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HISOq.png?s=128&g=1", "display_name": "Chris Browet", "link": "https://stackoverflow.com/users/367765/chris-browet"}, "edited": false, "score": 0, "creation_date": 1548749589, "post_id": 46985095, "comment_id": 95642848, "body": "Not sure it was the issue with MSVC, but definitely was for MinGW :)"}], "tags": [], "owner": {"reputation": 464, "user_id": 5974407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/paqy6.jpg?s=128&g=1", "display_name": "Hamed Nikzad", "link": "https://stackoverflow.com/users/5974407/hamed-nikzad"}, "is_accepted": false, "score": 7, "last_activity_date": 1509150374, "creation_date": 1509150374, "answer_id": 46985095, "question_id": 41857883, "link": "https://stackoverflow.com/questions/41857883/qsslsocket-cannot-call-unresolved-function/46985095#46985095", "title": "QSslSocket: cannot call unresolved function", "body": "<p>Copy these two file to path:  'C:\\Qt\\Tools(msvc/mingw){version}\\bin'</p>\n\n<pre><code>C:\\Qt\\Tools\\(msvc|mingw)\\opt\\bin\\libeay32.dll\nC:\\Qt\\Tools\\(msvc|mingw)\\opt\\bin\\ssleay32.dll\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 6687168, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u_n8JsHexdQ/AAAAAAAAAAI/AAAAAAAAAQA/E1VWMRkDJYo/photo.jpg?sz=128", "display_name": "max paint", "link": "https://stackoverflow.com/users/6687168/max-paint"}, "is_accepted": false, "score": 0, "last_activity_date": 1555367719, "last_edit_date": 1555367719, "creation_date": 1555366764, "answer_id": 55697966, "question_id": 41857883, "link": "https://stackoverflow.com/questions/41857883/qsslsocket-cannot-call-unresolved-function/55697966#55697966", "title": "QSslSocket: cannot call unresolved function", "body": "<p>By combining existing answers here and some research I managed to make it work with MSVC2017 x64 compiler:</p>\n\n<ol>\n<li>Download 1.0 version (Win64 OpenSSL <strong>v1.0.2r</strong> Light) from here:\n<a href=\"https://slproweb.com/products/Win32OpenSSL.html\" rel=\"nofollow noreferrer\">https://slproweb.com/products/Win32OpenSSL.html</a></li>\n<li>When installing, choose to copy DLLs to OpenSSL bin directory.</li>\n<li>And then copy <strong>libeay32.dll</strong> and <strong>ssleay32.dll</strong> from OpenSSL bin folder to: <code>{Your_Qt_Folder}/{Qt_version}/msvc2017_64/bin</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10137903, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ab8h-9eJEC4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7on_jJD_4aNoGKiLhUGVdYrf_bjLg/mo/photo.jpg?sz=128", "display_name": "\uae40\ubbfc\uc900", "link": "https://stackoverflow.com/users/10137903/%ea%b9%80%eb%af%bc%ec%a4%80"}, "is_accepted": false, "score": 0, "last_activity_date": 1562032503, "last_edit_date": 1562032503, "creation_date": 1562031202, "answer_id": 56844245, "question_id": 41857883, "link": "https://stackoverflow.com/questions/41857883/qsslsocket-cannot-call-unresolved-function/56844245#56844245", "title": "QSslSocket: cannot call unresolved function", "body": "<p>I solved this problem.</p>\n\n<ol>\n<li><p>Download and install <strong>v1.0.2s</strong> &lt;&lt;--(<code>libeay32.dll</code>, <code>ssleay32.dll</code>) at <a href=\"https://slproweb.com/products/Win32OpenSSL.html\" rel=\"nofollow noreferrer\">https://slproweb.com/products/Win32OpenSSL.html</a></p></li>\n<li><p>Copy <code>libeay32.dll</code> and <code>ssleay32.dll</code></p></li>\n<li><p>Find <code>QtNetwork*.dll</code> in your Qt folder. In my case, path is <code>C:\\Qt\\Tools\\QtCreator\\bin</code>.</p></li>\n<li><p>Paste <code>libeay32.dll</code> and <code>ssleay32.dll</code> in <code>C:\\Qt\\Tools\\QtCreator\\bin</code>.</p></li>\n</ol>\n"}], "owner": {"reputation": 135, "user_id": 7470264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d67992ee278b328977774137fe35c75b?s=128&d=identicon&r=PG&f=1", "display_name": "KirstenS", "link": "https://stackoverflow.com/users/7470264/kirstens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17830, "favorite_count": 4, "accepted_answer_id": 44354154, "answer_count": 5, "score": 12, "last_activity_date": 1562032503, "creation_date": 1485365276, "last_edit_date": 1485379542, "question_id": 41857883, "link": "https://stackoverflow.com/questions/41857883/qsslsocket-cannot-call-unresolved-function", "title": "QSslSocket: cannot call unresolved function", "body": "<p>I am running Qt 5.7.1 (MSVC 2015, 32 bit) with Qt Creator 4.2.0. I have a problem with <code>QSslSocket</code>. I am getting the following errors:</p>\n\n<pre><code>qt.network.ssl: QSslSocket: cannot call unresolved function SSLv23_client_method\nqt.network.ssl: QSslSocket: cannot call unresolved function SSL_CTX_new\nqt.network.ssl: QSslSocket: cannot call unresolved function SSL_library_init\nqt.network.ssl: QSslSocket: cannot call unresolved function ERR_get_error\nqt.network.ssl: QSslSocket: cannot call unresolved function ERR_get_error\n</code></pre>\n\n<p>I have gone to the following location <a href=\"https://github.com/openssl/openssl\" rel=\"noreferrer\">openssl github</a> and downloaded the zip file. I have moved the \"libeay32.dll\" and \"ssleay32.dll\" files to my release directory, and I am still getting these errors. Is there anyone who has gotten the <code>QSslSocket</code> working that can give me steps to get the socket working or has any suggestions?</p>\n"}, {"tags": ["c++", "matrix", "char", "type-conversion", "cout"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1485364825, "post_id": 41857653, "comment_id": 70899216, "body": "Instead of <code>result = number + 96;</code> you should write <code>result = number + &#39;0&#39;;</code>. It&#39;s a lot easier to read (and is more portable)."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1485364962, "post_id": 41857653, "comment_id": 70899324, "body": "Also, can you give us an example of a possible input and output for it? It&#39;s a bit hard to understand what exactly you&#39;re asking about."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1485365060, "post_id": 41857653, "comment_id": 70899394, "body": "<code>cout&lt;&lt;fachar(m[i][j])&lt;&lt;&quot; &quot;;</code> -&gt; <code>cout &lt;&lt; static_cast&lt;char&gt;(m[i][j])</code> or <code>cout &lt;&lt; (char) m[i][j]</code>"}, {"owner": {"reputation": 1, "user_id": 7470146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03d80c3b076eb1923e3fbba9767da1c8?s=128&d=identicon&r=PG&f=1", "display_name": "chopperbawss", "link": "https://stackoverflow.com/users/7470146/chopperbawss"}, "edited": false, "score": 0, "creation_date": 1485365207, "post_id": 41857653, "comment_id": 70899494, "body": "HolyBlackCat: As it is, my void afmatricelit () function displays a for the matrix element 1, b for matrix element 2 and so on. Instead, I want it to display the data stored in variable a for the matrix element 1, the data stored in variable b for the matrix element 2, and so on. With char a = &#39;$&#39; and char b[]=&quot;BAR&quot; , I would want it to display $ when encountering the matrix element 1, BAR when encountering matrix element 2 and so on."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1485365517, "post_id": 41857653, "comment_id": 70899696, "body": "@chopperbawss still no idea what you mean, are you trying to implement a matrix where the different elements can hold different datatypes?"}, {"owner": {"reputation": 1, "user_id": 7470146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03d80c3b076eb1923e3fbba9767da1c8?s=128&d=identicon&r=PG&f=1", "display_name": "chopperbawss", "link": "https://stackoverflow.com/users/7470146/chopperbawss"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1485365802, "post_id": 41857653, "comment_id": 70899863, "body": "@George: if i have char a = &#39;x&#39; and char b = &#39;a&#39;, how would I go from cout&lt;&lt;b displaying &#39;a&#39; to cout&lt;&lt;b displaying the data stored in variable a (in this case, &#39;x&#39;)? As in, what would I modify?"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 1, "creation_date": 1485368423, "post_id": 41857653, "comment_id": 70901448, "body": "first element in an array is m[0] not m[1] and the last one is m[n - 1] not m[n]"}], "answers": [{"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1485417228, "last_edit_date": 1485417228, "creation_date": 1485365657, "answer_id": 41858007, "question_id": 41857653, "link": "https://stackoverflow.com/questions/41857653/with-cout-how-to-convert-char-into-an-address-reference-to-a-variable/41858007#41858007", "title": "With cout, how to convert char into an address/reference (?) to a variable?", "body": "<p>Don't name your variables <code>a</code> to <code>g</code> - put the names in an array instead, and index the array.</p>\n\n<pre><code>std::string fachar (int numar)\n{\n    std::string text[7] = { \"$\", \"BAR\", .... };\n    if (numar &lt; 1 || 7 &lt; numar)\n       throw std::out_of_range(\"invalid numar\");\n    return text[numar-1];\n}\n</code></pre>\n\n<hr>\n\n<p>Also, as noted in the comments above, array indices run for <strong>0</strong> to one less than the array size.  Thus your matrix loops should look like:</p>\n\n<pre><code>        for (int i=0;i&lt;3;i++)\n            {\n                for (int j=0;j&lt;3;j++)\n                    cout &lt;&lt; fachar(m[i][j]) &lt;&lt; ' ';\n                cout&lt;&lt;endl;\n            }\n</code></pre>\n\n<p>In fact, you might want to fill your matrix with values in the range [0, 6].  It would simplify <code>fachar</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 7470146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03d80c3b076eb1923e3fbba9767da1c8?s=128&d=identicon&r=PG&f=1", "display_name": "chopperbawss", "link": "https://stackoverflow.com/users/7470146/chopperbawss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1485417228, "creation_date": 1485364553, "question_id": 41857653, "link": "https://stackoverflow.com/questions/41857653/with-cout-how-to-convert-char-into-an-address-reference-to-a-variable", "title": "With cout, how to convert char into an address/reference (?) to a variable?", "body": "<p>so basically my issue is the following:</p>\n\n<p>I have a function that randomly generates a 3x3 matrix which is filled with random elements ranging from number 1 to number 7 (integers). </p>\n\n<pre><code>int aleatoriu ()\n\n    {\n        int rezultat;\n        rezultat = rand() % 7 +1;\n        return rezultat;\n    }\n\nvoid popmatrice ()\n\n    {\n        int i, j;\n        for (i=1;i&lt;=3;i++)\n            for (j=1;j&lt;=3;j++)\n               m[i][j]=aleatoriu();\n    }\n</code></pre>\n\n<p>I also have a function which displays a matrix where, for each of the elements in the matrix before, it displays 96 + that element as a character (i.e. showing a for 1, b for 2, etc.)</p>\n\n<pre><code>char fachar (int numar)\n\n{\n    char rezultat;\n    rezultat=numar+96;\n    return rezultat;\n}\n\nvoid afmatricelit ()\n\n    {\n        int i, j;\n        for (i=1;i&lt;=3;i++)\n            {\n                for (j=1;j&lt;=3;j++)\n                    cout&lt;&lt;fachar(m[i][j])&lt;&lt;\" \";\n                cout&lt;&lt;endl;\n            }\n    }\n</code></pre>\n\n<p>I also have 7 char variables globally defined. An example:</p>\n\n<pre><code>char a = '$';\nchar b[]=\"BAR\";\n</code></pre>\n\n<p>..and so on up to the variable char g;</p>\n\n<p>I would like to have a function which displays my matrix in that instead of displaying the corresponding letter for each number (i.e 1 - a, 2 - b, 3 - c, etc.), displays the actual character stored in variable a (corresponding to number 1 i.e. letter a), the character(s) stored in variable b (corresponding to number 2 i.e. letter b) and so on.</p>\n\n<p>Is there any way to do this with just using cout? I guess my problem is with the datatype of what I'm trying to display - if I could somehow get the code to compile into the equivalent of cout&lt;\n"}, {"tags": ["android", "c++", "audio", "android-ndk"], "comments": [{"owner": {"reputation": 2672, "user_id": 806762, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d9bda40b98b6ce1fbaeeef02f253fe50?s=128&d=identicon&r=PG", "display_name": "coletrain", "link": "https://stackoverflow.com/users/806762/coletrain"}, "edited": false, "score": 0, "creation_date": 1485364709, "post_id": 41857590, "comment_id": 70899150, "body": "Its probably not this but, you forgot a semi-colon on *sound line. Do not want users to think that is the problem."}, {"owner": {"reputation": 68, "user_id": 4435181, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100003293640564/picture?type=large", "display_name": "RN Vi", "link": "https://stackoverflow.com/users/4435181/rn-vi"}, "reply_to_user": {"reputation": 2672, "user_id": 806762, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d9bda40b98b6ce1fbaeeef02f253fe50?s=128&d=identicon&r=PG", "display_name": "coletrain", "link": "https://stackoverflow.com/users/806762/coletrain"}, "edited": false, "score": 0, "creation_date": 1485367671, "post_id": 41857590, "comment_id": 70901026, "body": "@coletrain that&#39;s not the problem, because this code work perfect when i run on ios device, the semi-colon i just forget put it when i asked the question, but thank you for your comment, i already asked 3 question about this and anybody answer, i hear any suggestion"}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1485445571, "post_id": 41857590, "comment_id": 70936648, "body": "The easiest solution is to use JNI to get SoundPool play your files."}], "owner": {"reputation": 68, "user_id": 4435181, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100003293640564/picture?type=large", "display_name": "RN Vi", "link": "https://stackoverflow.com/users/4435181/rn-vi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485367756, "creation_date": 1485364368, "last_edit_date": 1485367756, "question_id": 41857590, "link": "https://stackoverflow.com/questions/41857590/how-play-short-sounds-on-c-android-app", "title": "How play short sounds on c++ android app?", "body": "<p>I'm trying to play sound files on my c++ android app, but all the options that i found are for c++ on windows, the only one that i i've tried is this, but is not working.</p>\n\n<pre><code>#include &lt;SimpleAudioEngine.h&gt;\n\nauto audio = CocosDenshion::SimpleAudioEngine::getInstance();\n\nconst char *sound = \"Sound1.wav\";\n\naudio-&gt;preloadEffect(sound);\naudio-&gt;playEffect(sound); \n</code></pre>\n"}, {"tags": ["c++", "list"], "comments": [{"owner": {"reputation": 1211, "user_id": 3313819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yKM0Y.png?s=128&g=1", "display_name": "ShadowMitia", "link": "https://stackoverflow.com/users/3313819/shadowmitia"}, "edited": false, "score": 1, "creation_date": 1485364633, "post_id": 41857588, "comment_id": 70899099, "body": "This is not a site to help with exercises, but it here to help if you&#39;re stuck. But for that you need to explain what you&#39;ve tried, what your problem is precisely, and code that you&#39;ve tried."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1485364706, "post_id": 41857588, "comment_id": 70899146, "body": "<b><i>because I only know how to do it with one variable in struct.</i></b> There is not really a big difference with more than 1 variable in a struct. Why is this causing you an issue? Please show your code and explain what problem you have with it."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 7010461, "user_type": "registered", "profile_image": "https://graph.facebook.com/1118050918232565/picture?type=large", "display_name": "Piotrek Karpowicz", "link": "https://stackoverflow.com/users/7010461/piotrek-karpowicz"}, "edited": false, "score": 0, "creation_date": 1485368464, "post_id": 41858242, "comment_id": 70901478, "body": "Thanks a lot mate!"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 0, "last_activity_date": 1485366499, "creation_date": 1485366499, "answer_id": 41858242, "question_id": 41857588, "link": "https://stackoverflow.com/questions/41857588/can-someone-help-me-with-an-exercise-c-lists/41858242#41858242", "title": "Can someone help me with an exercise? C++ Lists", "body": "<p>You should separate the concept of data from the links.</p>\n\n<pre><code>struct Node\n{\n  Point data;\n  Node * p_previous;\n  Node * p_next;\n};\n</code></pre>\n\n<p>Later on you may want to make the list into a <em>template</em> so that you can pass any type for the data field.</p>\n\n<p>To get the coordinates from a <code>Node</code>:  </p>\n\n<pre><code>  Point coordinate = p_node-&gt;data;\n  double x_ordinate = coordinate.x;\n  double y_ordinate = coordinate.y;\n</code></pre>\n\n<p><em>Off-topic:  screen coordinates should be integers, not floating point. Usually, pixels are hole element, I haven't heard of real partial pixels.</em>  </p>\n"}], "owner": {"reputation": 173, "user_id": 7010461, "user_type": "registered", "profile_image": "https://graph.facebook.com/1118050918232565/picture?type=large", "display_name": "Piotrek Karpowicz", "link": "https://stackoverflow.com/users/7010461/piotrek-karpowicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1485387515, "accepted_answer_id": 41858242, "answer_count": 1, "score": -2, "last_activity_date": 1485366499, "creation_date": 1485364366, "last_edit_date": 1592644375, "question_id": 41857588, "link": "https://stackoverflow.com/questions/41857588/can-someone-help-me-with-an-exercise-c-lists", "closed_reason": "Needs more focus", "title": "Can someone help me with an exercise? C++ Lists", "body": "<p>Ive got an exercise due to tommorow and Ive got completely no idea how to do it, even though I know how to add to list, delete an element from list ( last or first ), or display a list, maybe its because I only know how to do it with one variable in struct.</p>\n<p>sorry if my translation is not the best but Im translating the exercise from polish.</p>\n<blockquote>\n<p>1.We have a structure</p>\n<p>struct point {\ndouble x, y;\n};</p>\n<p>Create a function that creats lists of consisting of n points</p>\n</blockquote>\n<p>Then after it</p>\n<blockquote>\n<ol start=\"2\">\n<li>Using the list created in previous exercise, create a function that prints on the screen coordinates of points lying inside the given circle. Pointer for the beginning of the list and defining values transfer as function parameters.</li>\n</ol>\n</blockquote>\n<p>I was trying to do it alone but as of now Ive got completely no idea how to approach this. I think as for the first one, I should create a list, head and tail and next,then constructor that sets head and tail to NULL, then function that adds elements to list, then in main ask user for the 'n' value and create for loop with that function.</p>\n<p>After that, Ive got completely no idea what to do next. I may have been wrong even until now.</p>\n<p>Sorry if I waste your time reading this, I just hope someone can help me and explain me what to do.</p>\n<p>Sorry if its also not the place to ask for that kind of help, Im kinda new to all of this.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485364162, "post_id": 41857493, "comment_id": 70898811, "body": "Modifying the size of a container while looping is fraught with problems.  Do you really need to remove the elements?  If you do, can&#39;t you process them all and then clear the vector in one operation?"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1485364197, "post_id": 41857493, "comment_id": 70898843, "body": "This is called &quot;popping&quot; btw. You want to &quot;pop&quot; the first element."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1485364235, "post_id": 41857493, "comment_id": 70898874, "body": "Have you tried anything yet? How about acquainting yourself with the API of <code>std::vector</code>? Do you find any useful functions?"}, {"owner": {"reputation": 16623, "user_id": 1467304, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ajbu3.jpg?s=128&g=1", "display_name": "ChrisCM", "link": "https://stackoverflow.com/users/1467304/chriscm"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485364321, "post_id": 41857493, "comment_id": 70898915, "body": "@NathanOliver: Shrinking the size of a vector in a loop has essentially zero downside.  Increasing the size of a vector in a loop is the problem."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 16623, "user_id": 1467304, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ajbu3.jpg?s=128&g=1", "display_name": "ChrisCM", "link": "https://stackoverflow.com/users/1467304/chriscm"}, "edited": false, "score": 1, "creation_date": 1485364454, "post_id": 41857493, "comment_id": 70898996, "body": "@ChrisCM You still have to make sure you do it the right way.  Also if you start from the front then it kills the performance.  A simple process all data loop and then a call to clear/erase is my go to."}, {"owner": {"reputation": 16623, "user_id": 1467304, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ajbu3.jpg?s=128&g=1", "display_name": "ChrisCM", "link": "https://stackoverflow.com/users/1467304/chriscm"}, "edited": false, "score": 0, "creation_date": 1485365174, "post_id": 41857493, "comment_id": 70899467, "body": "Just wanted to clarify for OP that it&#39;s the removal and shifting of elements that causes the performance, and not the resizing operation, in this instance.  Size increase has the additional downside of memory re-allocations, a different level of &quot;evil&quot;."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1485366428, "post_id": 41857493, "comment_id": 70900274, "body": "FWIW, you&#39;re using a vector as a queue. <code>std::queue</code> is an option if you&#39;re set on the use-remove approach."}], "answers": [{"comments": [{"owner": {"reputation": 975, "user_id": 6078401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb74e4a1d8acc16d37b3f01f917b2ae?s=128&d=identicon&r=PG", "display_name": "daragua", "link": "https://stackoverflow.com/users/6078401/daragua"}, "edited": false, "score": 0, "creation_date": 1485364480, "post_id": 41857550, "comment_id": 70899016, "body": "Won&#39;t that invalidate the loop iterator?"}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1485364524, "post_id": 41857550, "comment_id": 70899047, "body": "<a href=\"http://www.cplusplus.com/reference/vector/vector/erase/\" rel=\"nofollow noreferrer\">This</a> says that it gets the <i>next</i> element after the last-removed element, not the removed element."}], "tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": false, "score": 0, "last_activity_date": 1485364294, "creation_date": 1485364294, "answer_id": 41857550, "question_id": 41857493, "link": "https://stackoverflow.com/questions/41857493/c-how-to-extract-first-element-out-of-a-vectorstring-and-reduce-the-vector/41857550#41857550", "title": "c++ - How to extract first element out of a vector&lt;string&gt; and reduce the vector size by 1 in a loop", "body": "<pre><code>tokens.erase(tokens.begin());\n</code></pre>\n\n<p>That's how.</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 7344905, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cae1693954f4995a5b744fba42437ebb?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow Phoenix", "link": "https://stackoverflow.com/users/7344905/shadow-phoenix"}, "edited": false, "score": 0, "creation_date": 1485365476, "post_id": 41857713, "comment_id": 70899676, "body": "Thanks for sharing your idea. Actually, we want to use &#39;line&#39; string out of the loop. There is a series of manipulations over &#39;line&#39; in the following code snippet. So, we need to pop out &#39;line&#39; string each time and after finishing the subsequent manipulations we need to pick the second element of &#39;tokens&#39; and continue the same until it becomes empty."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 27, "user_id": 7344905, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cae1693954f4995a5b744fba42437ebb?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow Phoenix", "link": "https://stackoverflow.com/users/7344905/shadow-phoenix"}, "edited": false, "score": 0, "creation_date": 1485366289, "post_id": 41857713, "comment_id": 70900179, "body": "@ShadowPhoenix Can&#39;t you simply put the processing in the loop? Try replacing <code>std::cout &lt;&lt; line &lt;&lt; &#39;\\n&#39;;</code> in my answer with whatever code block preforms the desired processing."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 3, "last_activity_date": 1485364720, "creation_date": 1485364720, "answer_id": 41857713, "question_id": 41857493, "link": "https://stackoverflow.com/questions/41857493/c-how-to-extract-first-element-out-of-a-vectorstring-and-reduce-the-vector/41857713#41857713", "title": "c++ - How to extract first element out of a vector&lt;string&gt; and reduce the vector size by 1 in a loop", "body": "<p>When iterating over a container with the intention of emptying it, it's easier to simply iterate as long as the container is not empty.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n    std::vector&lt;std::string&gt; tokens = {\"cat\", \"dog\", \"bull\"};\n    while(tokens.empty() == false)\n    {\n        // Extract the data from first element in the list\n        auto line = std::move(tokens.front());\n\n        // Pop the moved element from the vector\n        tokens.erase(tokens.begin());\n\n        // Do work with 'line'\n        std::cout &lt;&lt; line &lt;&lt; '\\n';\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>That said, it's very inefficient to remove elements from the front of a vector, as all following elements have to be moved up. Consider removing elements from the back instead.</p>\n"}, {"comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1485365981, "post_id": 41858040, "comment_id": 70899984, "body": "Removing elements from any where other than at the vector-end can generate a lot of behind-the-scenes shuffling.  pop_back() is constant time!"}], "tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 0, "last_activity_date": 1485366181, "last_edit_date": 1485366181, "creation_date": 1485365796, "answer_id": 41858040, "question_id": 41857493, "link": "https://stackoverflow.com/questions/41857493/c-how-to-extract-first-element-out-of-a-vectorstring-and-reduce-the-vector/41858040#41858040", "title": "c++ - How to extract first element out of a vector&lt;string&gt; and reduce the vector size by 1 in a loop", "body": "<p>The std::vector provides the operation you seem to desire at the other end ...</p>\n\n<pre><code>std::vector&lt;std::string&gt;  tokens;\n\n// the last token can be accessed: \nstd::string tok = tokens.back();\n\n// removing the last tok\nassert(tokens.size());  // pop_back on an empty vector is UB\ntokens.pop_back();      // removes element from vector - constant time!\n\n// and if you get confused on how to load tokens in reverse order\n// you can load as planned, then reverse the elements to do your work\nstd::reverse(std::begin(tokens), std::end(tokens))\n</code></pre>\n\n<p>Give it a try. I found working at the back of the vector easy to adapt to. </p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1485366783, "creation_date": 1485366783, "answer_id": 41858317, "question_id": 41857493, "link": "https://stackoverflow.com/questions/41857493/c-how-to-extract-first-element-out-of-a-vectorstring-and-reduce-the-vector/41858317#41858317", "title": "c++ - How to extract first element out of a vector&lt;string&gt; and reduce the vector size by 1 in a loop", "body": "<p>The idiomatic way would be:</p>\n\n<pre><code>std::vector&lt;std::string&gt; tokens;\n// populate the vector 'tokens'\n// ...\n\nfor (const auto&amp; token : tokens) {\n    // use 'token' string one by one in the subsequent code, as:\n    std::cout &lt;&lt; token &lt;&lt; std::endl;\n}\ntokens.clear(); // If needed.\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7344905, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cae1693954f4995a5b744fba42437ebb?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow Phoenix", "link": "https://stackoverflow.com/users/7344905/shadow-phoenix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3018, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1485366783, "creation_date": 1485364094, "question_id": 41857493, "link": "https://stackoverflow.com/questions/41857493/c-how-to-extract-first-element-out-of-a-vectorstring-and-reduce-the-vector", "title": "c++ - How to extract first element out of a vector&lt;string&gt; and reduce the vector size by 1 in a loop", "body": "<pre><code>string line= \"\";\nvector&lt;string&gt; tokens;\n//populate the vector 'tokens'\n\n//loop through vector 'tokens' until it becomes empty\n{\n    //extract out 'line' containing the first element of the vector.\n    //reduce the size of 'tokens' by one through deleting the first element \n}\n//use 'line' string one by one in the subsequent code \n</code></pre>\n\n<p>Suppose 'tokens' is containing two elements, e.g. </p>\n\n<blockquote>\n  <p>cat, dog, bull</p>\n</blockquote>\n\n<p>On the first iteration, I want to extract 'cat' out from the vector and reduce its size by 1. \nIt will contain now:</p>\n\n<blockquote>\n  <p>dog, bull</p>\n</blockquote>\n\n<p>Now, I want to use this extracted element 'cat' (stored in a string 'line') in my subsequent code out of the loop. \nNext time I want to pick 'dog' and make the vector contain only </p>\n\n<blockquote>\n  <p>bull</p>\n</blockquote>\n\n<p>. And so on.\nThanks in advance for your ideas!</p>\n"}, {"tags": ["python", "c++", "swig"], "answers": [{"comments": [{"owner": {"reputation": 22570, "user_id": 300886, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/054dba7842330d7a9ae87d4773847d12?s=128&d=identicon&r=PG", "display_name": "piokuc", "link": "https://stackoverflow.com/users/300886/piokuc"}, "edited": false, "score": 0, "creation_date": 1485370533, "post_id": 41858696, "comment_id": 70902705, "body": "Brilliant! Thank you so much."}], "tags": [], "owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "is_accepted": true, "score": 2, "last_activity_date": 1485368003, "creation_date": 1485368003, "answer_id": 41858696, "question_id": 41857459, "link": "https://stackoverflow.com/questions/41857459/swig-suppress-warning-about-function-being-python-keyword/41858696#41858696", "title": "swig: suppress warning about function being python keyword", "body": "<p>I expected that using  the <a href=\"http://www.swig.org/Doc3.0/Warnings.html\" rel=\"nofollow noreferrer\">warning filtering</a> syntax:</p>\n\n<pre><code>%warnfilter(314) print;\n</code></pre>\n\n<p>would do the trick, however in this instance it didn't seem to work. I was however able to fix the warning by explicitly doing the rename myself using <code>%rename</code>:</p>\n\n<pre><code>%module test\n%rename(_print) print;\nvoid print();\n</code></pre>\n\n<p><code>%ignore</code> does also work with SWIG 3.0. Best guess you had the directive and the declaration in the wrong order for example:</p>\n\n<pre><code>%module test\n%ignore print;\nvoid print();\n</code></pre>\n\n<p>Does not warn with 3.0.2</p>\n"}], "owner": {"reputation": 22570, "user_id": 300886, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/054dba7842330d7a9ae87d4773847d12?s=128&d=identicon&r=PG", "display_name": "piokuc", "link": "https://stackoverflow.com/users/300886/piokuc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 41858696, "answer_count": 1, "score": 1, "last_activity_date": 1485368003, "creation_date": 1485363980, "question_id": 41857459, "link": "https://stackoverflow.com/questions/41857459/swig-suppress-warning-about-function-being-python-keyword", "title": "swig: suppress warning about function being python keyword", "body": "<p>I have a C++ library and I use swig to generate Python bindings for it. Many classes have a print function, for them I get a warning like this:</p>\n\n<pre><code>Foo.h:81: Warning 314: 'print' is a python keyword, renaming to '_print'\n</code></pre>\n\n<p>How can I suppress the warnings? I tried</p>\n\n<pre><code>%ignore print;\n</code></pre>\n\n<p>But it did not help. Thank you in advance...</p>\n"}, {"tags": ["java", "c++", "sockets"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1485364165, "post_id": 41857450, "comment_id": 70898813, "body": "Why do you need a fix exactly? Can you show some code that shows why this is an issue that requires a fix? Normally there is no reason you should care about this."}, {"owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1485364330, "post_id": 41857450, "comment_id": 70898919, "body": "The char data type is a single 16-bit Unicode character. It has a minimum value of &#39;\\u0000&#39; (or 0) and a maximum value of &#39;\\uffff&#39; (or 65,535 inclusive)."}, {"owner": {"reputation": 33440, "user_id": 1831987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=128&d=identicon&r=PG", "display_name": "VGR", "link": "https://stackoverflow.com/users/1831987/vgr"}, "edited": false, "score": 1, "creation_date": 1485364419, "post_id": 41857450, "comment_id": 70898976, "body": "A Java <code>byte</code> is identical to a C++ signed char.  Treating each datum as a signed or unsigned 8-bit value does not change the data."}, {"owner": {"reputation": 3697, "user_id": 1848578, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7e2bfa9bcb3299428c8321c37db0560?s=128&d=identicon&r=PG", "display_name": "qxz", "link": "https://stackoverflow.com/users/1848578/qxz"}, "edited": false, "score": 1, "creation_date": 1485364479, "post_id": 41857450, "comment_id": 70899014, "body": "If you want the unsigned value of an individual <code>byte</code>, there&#39;s <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Byte.html#toUnsignedInt-byte-\" rel=\"nofollow noreferrer\"><code>Byte.toUnsignedInt(x)</code></a>"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 1, "creation_date": 1485364685, "post_id": 41857450, "comment_id": 70899132, "body": "What David said above.  Don&#39;t worry about the type interpretation.  It&#39;s unsigned char on the C++ side and &quot;byte&quot; on the Java side.  In memory, it&#39;s still the same stream of bits."}, {"owner": {"reputation": 123, "user_id": 5076218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c466df3d2c07ea452f2ec7b1fbe56fe7?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5076218/nick"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1485365019, "post_id": 41857450, "comment_id": 70899365, "body": "Ah, okay\u2014thanks @DavidSchwartz. I was just being apprehensive about possible problems before I tested it."}], "owner": {"reputation": 123, "user_id": 5076218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c466df3d2c07ea452f2ec7b1fbe56fe7?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5076218/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 382, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485363943, "creation_date": 1485363943, "question_id": 41857450, "link": "https://stackoverflow.com/questions/41857450/sending-unsigned-char-over-socket-from-c-to-java", "title": "Sending unsigned char[] over socket from c++ to Java", "body": "<p>I'm trying to send a video stream over socket from a computer running C++ to one running Java. The images are being encoded as a 1d array of unsigned chars on the C++ (server side) and I'd like to receive such a stream of chars on the Java side in as efficient a way possible. But my understanding is that C++ unsigned chars range from 0\u2013255 and that the <code>InputStream</code> class on the Java side only reads data as a <code>Byte</code> (-128\u2013127). Would it then be that case that any pixel valued above 127 from C++ would wrap around into the negatives when receiving it on the Java client end?</p>\n\n<p>If so, is there a quick fix, or perhaps a way to avoid reading the char[] into bytes that is still fairly quick? Maybe a <code>BufferedReader</code> that takes in the whole array as a string, splits it up, and converts to integers?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485364006, "post_id": 41857449, "comment_id": 70898713, "body": "The first takes a double the other a float.  Pick the one that uses the type you are using."}, {"owner": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485364141, "post_id": 41857449, "comment_id": 70898798, "body": "I thought they both took a float?"}, {"owner": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1485364189, "post_id": 41857449, "comment_id": 70898834, "body": "also, please if people want to vote a question down at least have the decency to write a comment on how to improve it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485364219, "post_id": 41857449, "comment_id": 70898860, "body": "You should check the <a href=\"http://en.cppreference.com/w/c/numeric/math/fabs\" rel=\"nofollow noreferrer\">reference material</a>"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1485364290, "post_id": 41857449, "comment_id": 70898898, "body": "@unknownSPY I&#39;m going to guess the downvotes are because this question very likely could have been answered if you looked up the documention for each."}, {"owner": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485364310, "post_id": 41857449, "comment_id": 70898909, "body": "@NathanOliver my copy of math.h has this as the signiture <code>_Check_return_ __inline float __CRTDECL fabsf(_In_ float _X)</code> rather than double"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485364352, "post_id": 41857449, "comment_id": 70898930, "body": "@unknownSPY What what does it have for <code>fabs</code>?"}, {"owner": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485364382, "post_id": 41857449, "comment_id": 70898954, "body": "@NathanOliver <code>_Check_return_ inline float fabs(_In_ float _Xx) _NOEXCEPT</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485364646, "post_id": 41857449, "comment_id": 70899107, "body": "C89 7.12.7.2 defines <code>fabs</code> as <code>double fabs(double x);</code>.  Your implementation looks broken/non-compliant."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1485365072, "post_id": 41857449, "comment_id": 70899405, "body": "@NathanOliver not necessarily, if the file is reused for C++, and the declaration is protected by <code>__cplusplus</code> macro conditional."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1485365264, "post_id": 41857449, "comment_id": 70899535, "body": "@user2079303 Oh wow.  I just rechecked the C++14 standard and it actually has <code>float fabs(float)</code> and it uses <code>abs</code> as the standard C <code>fabs</code>.  Crazy"}, {"owner": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "edited": false, "score": 0, "creation_date": 1485365816, "post_id": 41857449, "comment_id": 70899872, "body": "So maybe all those down votes should be nullified..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user968363"}, "edited": false, "score": 0, "creation_date": 1507669233, "post_id": 41857449, "comment_id": 80300174, "body": "@unknownSPY <a href=\"https://stackoverflow.com/q/23474796/968363\">Some other question</a> asks about a fast fabsf implementation which might be circuitously relevant. As this is math-lib territory I&#39;d suspect any differences below the headers will depend on your link and architecture options."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1485365255, "last_edit_date": 1592644375, "creation_date": 1485364427, "answer_id": 41857612, "question_id": 41857449, "link": "https://stackoverflow.com/questions/41857449/when-to-use-fabsf-rather-than-fabs/41857612#41857612", "title": "When to use fabsf rather than fabs", "body": "<blockquote>\n<p>When to use <code>fabsf</code> rather than <code>fabs</code></p>\n</blockquote>\n<p>In C++, there is hardly ever a reason to use <code>fabsf</code>. Use <code>std::abs</code> instead with floating point types. <code>std::fabs</code> may have use when you wish to convert the absolute value of an integer to <code>double</code>, but that's probably quite niche use case.</p>\n<p>If you were writing C instead, then it is almost as simple: Use <code>fabsf</code> when you have a <code>float</code>, and <code>fabs</code> when you have a <code>double</code>. Same applies to other standard math functions with <code>f</code> suffix.</p>\n<blockquote>\n<p>The definitions I have in my math.h are</p>\n<pre><code>_Check_return_ inline float fabs(_In_ float _Xx) _NOEXCEPT\n</code></pre>\n</blockquote>\n<p>The C++ standard library specifies overloads for <code>std::fabs</code>. One of them takes a <code>float</code>. Your standard library is not standard compliant, if the other overloads are missing.</p>\n<p>The C standard library specifies <code>double fabs(double)</code>. Your standard library is not standard compliant, if the quoted declaration applies to C.</p>\n"}], "owner": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2487, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1485365255, "creation_date": 1485363941, "last_edit_date": 1485364541, "question_id": 41857449, "link": "https://stackoverflow.com/questions/41857449/when-to-use-fabsf-rather-than-fabs", "title": "When to use fabsf rather than fabs", "body": "<p>I was wondering in what scenario would I use <code>fabs</code> over <code>fabsf</code> (from cmath/math.h)?</p>\n\n<p>Or explain the difference seeing as it looks like one just calls the other.</p>\n\n<p>The definitions I have in my math.h are </p>\n\n<pre><code>_Check_return_ inline float fabs(_In_ float _Xx) _NOEXCEPT\n\n_Check_return_ __inline float __CRTDECL fabsf(_In_ float _X)\n</code></pre>\n"}, {"tags": ["c++", "c++11", "stl", "language-lawyer", "stdstring"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1485363803, "post_id": 41857372, "comment_id": 70898564, "body": "Fixed what I think was a typo. Roll back if you meant <code>some_fun()</code>."}, {"owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1485364387, "post_id": 41857372, "comment_id": 70898960, "body": "was not really a typo, but I guess your version is more clear in a c++ context."}, {"owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1485869392, "post_id": 41857372, "comment_id": 71096351, "body": "It&#39;s instructive to compile with <code>g++ -save-temps</code> and look at the resulting assembler output at different optimization levels. With <code>-O3</code> it is calling <code>string::reserve()</code> once and <code>string::append()</code> four times for your piece of code."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1485909026, "post_id": 41857372, "comment_id": 71118430, "body": "@G.Sliepen: Even simpler: Use the <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">compiler explorer</a>"}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1487781830, "post_id": 41857372, "comment_id": 71941830, "body": "I think honestly I&#39;d be more concerned about the performance of the reallocate-copy when growing the string than returning by value which as established can most likely be fairly well optimized."}, {"owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "edited": false, "score": 0, "creation_date": 1487793616, "post_id": 41857372, "comment_id": 71949194, "body": "To repeat, what I commented on one answer:  \t I don&#39;t care so much about efficiency, more about semantics, (...). I care more about which versions of the function are being called then about how fast this is in the end for now. The fact that a reallocation may occur in between is orthogonal to the question imo, because you cannot avoid that unless you know the size up-front and reserve for the contents."}], "answers": [{"comments": [{"owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "edited": false, "score": 0, "creation_date": 1485908829, "post_id": 41957932, "comment_id": 71118368, "body": "I don&#39;t care so much about efficiency, more about semantics, so this is correct, although not really new to me, but misses my question. I care more about which versions of the function are being called then about how fast this is in the end for now. The fact that a reallocation may occur in between is orthogonal to the question imo, because you cannot avoid that unless you know the size up-front and reserve for the contents."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 0, "creation_date": 1485908836, "post_id": 41957932, "comment_id": 71118371, "body": "<i>&quot;So it is likely that a = a + b; and a += b; are compiled in exactly the same code.&quot;</i> Have you actually checked that? I very much doubt that any compiler is actually able to do that optimization (except maybe if <code>a</code> is a temporary)."}, {"owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "edited": false, "score": 0, "creation_date": 1485909268, "post_id": 41957932, "comment_id": 71118498, "body": "<code>a = a + b</code> will need at least an additional move-assignment in my opinion. Best case (assuming it is possible) the compiler realizes a is about to be reassigned, and thus its value is no longer needed, treats it as rvalue, which leads to case 6), which results in an append on the r-value. However the resulting r-value still has be assigned to a, and I don&#39;t see any way to apply rvo here, because append is not returning a new object."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1485866591, "creation_date": 1485866591, "answer_id": 41957932, "question_id": 41857372, "link": "https://stackoverflow.com/questions/41857372/c-string-concatenation-optimizations/41957932#41957932", "title": "C++ String Concatenation Optimizations", "body": "<p>A string is a rather opaque object: it holds an internal char buffer and manages it the way it wants. Adding a single character to a string may end in allocation of a new buffer, copy of the initial part and copy of the added part. All depends whether the allocated buffer is large enough to accept to added part.</p>\n\n<p>The quotation says: </p>\n\n<blockquote>\n  <p>... No copies are made (except the copy of the arguments to be appended/inserted at the insertion location). <strong>The contents of the string may need to be moved</strong>.</p>\n</blockquote>\n\n<p>Said differently a new allocation, a full copy and deallocation of the old buffer...</p>\n\n<p>And when you speak of efficiency and optimization, you must remember that the compiler has not to follow the way you have written the program. Because of the <em>as-if</em> rule, it can optimize the way it want, provided the observable behaviour is respected. C++ standard says:</p>\n\n<blockquote>\n  <p>1.9 Program execution [intro.execution]<br/> ...<br/>\n  5 A conforming implementation executing a well-formed program shall produce the same observable behavior\n  as one of the possible executions of the corresponding instance of the abstract machine with the same program\n  and the same input.</p>\n</blockquote>\n\n<p>A note explains even that:</p>\n\n<blockquote>\n  <p>an implementation is free to disregard any requirement of this\n  International Standard as long as the result is as if the requirement had been obeyed, as far as can be determined from the\n  observable behavior of the program.</p>\n</blockquote>\n\n<p>So it is likely that <code>a = a + b;</code> and <code>a += b;</code> are compiled in exactly the same code.</p>\n\n<p>You should never worry for low level optimizations when you write a C++ program: the compiler will care for it and it is commonly said that <em>compiler is smarter than you</em>. Only go that way when you have identified a real bottleneck, and be aware that low level optimization if only for one compiler on one architecture and one configuration.</p>\n"}], "owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 664, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1492007954, "creation_date": 1485363710, "last_edit_date": 1485908089, "question_id": 41857372, "link": "https://stackoverflow.com/questions/41857372/c-string-concatenation-optimizations", "title": "C++ String Concatenation Optimizations", "body": "<p>Looking at a piece of code like this (comments added):</p>\n\n<pre><code>std::string some_var;\nstd::string some_func(); // both are defined, but definition is irrelevant\n...\nreturn \"some text \" + some_var + \"c\" + some_func(); // intentionally \"c\" not 'c'\n</code></pre>\n\n<p>I was wondering, <strong>in which cases <code>operator +</code> of <code>std::string</code> has to make a copy (in the sense of using copy-construction/assignment, not the internal buffer being copied e.g. if SSO applies), and what actually gets copied</strong>. A quick look at <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator%2B\" rel=\"nofollow noreferrer\">cppreference</a> was only partially helpful, as it lists 12(!) different cases. In part I am asking to confirm my understanding of the page:</p>\n\n<ul>\n<li>Case 1) makes a copy of lhs then copies rhs to end of this copy</li>\n<li>In C++98 Case 2) - 5) a temporary string is constructed from the <code>char/const char*</code> argument, which then results in case 1)</li>\n<li>In C++11 Case 2) - 5) a temporary string is constructed from the \n<code>char/const char*</code> argument, which then results in case 6) or 7)</li>\n<li>In C++11 Case 6) - 12) the r-value argument will be mutated with <code>insert/append</code> and, if a <code>char/const char*</code> argument was provided, no temporary is necessary due to the overloads on <code>insert/append</code>. In all cases an r-value is returned to facilitate further chaining. No copies are made (except the copy of the arguments to be appended/inserted at the insertion location). The contents of the string may need to be moved.</li>\n</ul>\n\n<p>A chain like the example above should thus result in: 2) -> 6) -> 11) -> 8), with no copies of any lhs being made, but just modifications to the buffer of the r-value resulting from the first operation (creation of the temp-string). </p>\n\n<p>Therefore this seems to be as efficient as <code>operator +=</code>, once <code>operator +</code> uses at least on r-value argument. Is this correct, and <strong>is there any point in using <code>operator +=</code> over <code>operator +</code> in C++11 and after anymore, unless the both arguments are l-value strings?</strong></p>\n\n<p><strong>What optimizations can the compiler make in addition?</strong></p>\n\n<p>Edit: clarify intent of the question. Initial part is about the specifics of the language only (implementation non-withstanding); the last question is about additional optimizations.</p>\n"}, {"tags": ["c++", "rapidjson"], "answers": [{"tags": [], "owner": {"reputation": 4462, "user_id": 1018640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7d63b0bd537a54f53eb85c1471418ad?s=128&d=identicon&r=PG", "display_name": "Milo Yip", "link": "https://stackoverflow.com/users/1018640/milo-yip"}, "is_accepted": true, "score": 1, "last_activity_date": 1485393270, "creation_date": 1485393270, "answer_id": 41864485, "question_id": 41857273, "link": "https://stackoverflow.com/questions/41857273/rapidjson-get-member-name-of-value/41864485#41864485", "title": "RapidJSON get member name of Value", "body": "<p>No. It is not possible because an array may not be within an object.\nYou may use iterator.</p>\n\n<pre><code>Value::MemberIterator itr = document.FindMember(\"name\");\nstring n = itr-&gt;name.GetString();\nValue&amp; v = itr-&gt;value;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 312, "user_id": 1114280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b49989f930caeaf42f3c88f99b52352d?s=128&d=identicon&r=PG", "display_name": "Per Ghosh", "link": "https://stackoverflow.com/users/1114280/per-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1607932936, "creation_date": 1607932936, "answer_id": 65285478, "question_id": 41857273, "link": "https://stackoverflow.com/questions/41857273/rapidjson-get-member-name-of-value/65285478#65285478", "title": "RapidJSON get member name of Value", "body": "<p>Iterators for object has <code>name</code> and <code>value</code> properties</p>\n<pre><code>std::pair&lt;bool, std::string&gt; iterate_items()\n{\n   constexpr std::string_view stringJson = R&quot;([ {&quot;k1&quot;: &quot;v1&quot;}, {&quot;k2&quot;: &quot;v2&quot;}, {&quot;k3&quot;: &quot;v3&quot;}, {&quot;k4&quot;: &quot;v4&quot;} ])&quot;;\n   // Wrap input stream for rapidjson reading\n   rapidjson::MemoryStream memorystreamFile( stringJson.data(), stringJson.length() );\n   rapidjson::Document documentJson;                                        // Create root rapidjson object\n\n   documentJson.ParseStream( memorystreamFile );                            // Parse json file\n   if( documentJson.IsArray() == true )                                     // Yes, we know it is an array :)\n   {\n      for( auto const&amp; it : documentJson.GetArray() )                       // iterate array\n      {\n         if( it.IsObject() == true )                                        // They are all objects\n         {\n            auto const&amp; _name = it.MemberBegin()-&gt;name;                     // get name\n            auto const&amp; _value = it.MemberBegin()-&gt;value;                   // get value\n            std::cout &lt;&lt; _name.GetString() &lt;&lt; _value.GetString() &lt;&lt; &quot;\\n&quot;;   // dump it\n         }\n\n      }\n   }\n   return std::pair&lt;bool, std::string&gt;( true, std::string() );\n}\n</code></pre>\n<p><a href=\"http://goorep.se:1001/changelog/report/rSelect/PAGE_result.htm?alias=guest&amp;set=api&amp;query=Book%20pages&amp;$$TArticleBook1.ArticleBookK=7133&amp;link=%5B%5B%229F60D5FEDE8E41CC986C10147F0AD2F7zoom%22,%22TArticleBook1%22,7133%5D,%5B%2271C91DEE3C5A4FDC8EC1114C7C18033Bzoom%22,%22TArticleBook1%22,7133%5D%5D&amp;rows=50\" rel=\"nofollow noreferrer\">Tutorial with RapidJSON</a></p>\n"}], "owner": {"reputation": 1979, "user_id": 1823368, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3fbe9e3187b5a041f1e974be524c89?s=128&d=identicon&r=PG", "display_name": "sookie", "link": "https://stackoverflow.com/users/1823368/sookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3442, "favorite_count": 0, "accepted_answer_id": 41864485, "answer_count": 2, "score": 0, "last_activity_date": 1607932936, "creation_date": 1485363433, "question_id": 41857273, "link": "https://stackoverflow.com/questions/41857273/rapidjson-get-member-name-of-value", "title": "RapidJSON get member name of Value", "body": "<p>Wondering if it's possible to extract the name of a <code>rapidjson::Value</code> directly from it. </p>\n\n<p>For instance, assume we have the following JSON data:</p>\n\n<pre><code>{\n    \"name\":\n    [\n        { /*some data*/ },\n        { /*some more data*/ }\n    ]\n}\n</code></pre>\n\n<p>And I retrieve the \"name\" array from it:</p>\n\n<pre><code>rapidjson::Value&amp; myJSONArray = document[\"name\"];\n</code></pre>\n\n<p>Can I retrieve \"name\" back from that <code>Value</code>? Something like this:</p>\n\n<pre><code>std::string memberName = myJSONArray.GetMemberName(); // returns \"name\"\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11", "condition-variable"], "answers": [{"comments": [{"owner": {"reputation": 451, "user_id": 6950434, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7a4ebbf0eaad72cdf9e546842ead8af3?s=128&d=identicon&r=PG&f=1", "display_name": "ark1974", "link": "https://stackoverflow.com/users/6950434/ark1974"}, "edited": false, "score": 0, "creation_date": 1485364133, "post_id": 41857390, "comment_id": 70898789, "body": "Thanks for the comprehensive reply. But still that don&#39;t answer why the wait process breaks after the delay parameter  value had changed.Why the original if not not the second value was not taken at all?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "reply_to_user": {"reputation": 451, "user_id": 6950434, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7a4ebbf0eaad72cdf9e546842ead8af3?s=128&d=identicon&r=PG&f=1", "display_name": "ark1974", "link": "https://stackoverflow.com/users/6950434/ark1974"}, "edited": false, "score": 0, "creation_date": 1485365845, "post_id": 41857390, "comment_id": 70899894, "body": "Because that&#39;s what your code told it to do. <code>wait_for()</code> returns when the condition variable has been <code>notify</code>()-ed, or the timeout expires, whichever comes first. Your code <code>notify</code>()-ed the condition variable, so <code>wait_for()</code> returned. Whether or not the delay value was changed is completely irrelevant."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 4, "last_activity_date": 1485363753, "creation_date": 1485363753, "answer_id": 41857390, "question_id": 41857104, "link": "https://stackoverflow.com/questions/41857104/what-if-the-condition-variablewait-for-delay-parameter-changes-during-the-wait/41857390#41857390", "title": "What if the condition_variable::wait_for delay parameter changes during the wait process?", "body": "<p>As you can see <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable/wait_for\" rel=\"nofollow noreferrer\">in the specification of the wait_for() method</a>, the delay interval is specified as a <code>const</code> parameter:</p>\n\n<blockquote>\n<pre><code>template&lt; class Rep, class Period &gt;\nstd::cv_status wait_for( std::unique_lock&lt;std::mutex&gt;&amp; lock,\n                         const std::chrono::duration&lt;Rep, Period&gt;&amp; rel_time);\n</code></pre>\n</blockquote>\n\n<p>Furthermore, there's nothing in the specification of <code>wait_for()</code> that indicates that any changes to the parameter will be observable by the thread that's executing the <code>wait_for()</code>.</p>\n\n<p>In fact, the only sequencing here comes as an indirect result of releasing and re-acquiring the underlying mutex. Note, however, that this will not occur until <strong><em>after</em></strong> the specified timeout expires. As such, any changes made to the delay parameter by another thread will <strong><em>not</em></strong> be sequenced until that time, and will not be observable by the thread that's executing the <code>wait_for()</code> call.</p>\n\n<p>Note, that if the thread in question was doing something other than locking the mutex and executing <code>wait_for()</code>, unless the main execution thread explicitly does something that sequences its change to <code>delay</code> with respect to the other thread, the other thread is not guaranteed to observe the new value of <code>delay</code> ever.</p>\n"}], "owner": {"reputation": 451, "user_id": 6950434, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7a4ebbf0eaad72cdf9e546842ead8af3?s=128&d=identicon&r=PG&f=1", "display_name": "ark1974", "link": "https://stackoverflow.com/users/6950434/ark1974"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485401869, "creation_date": 1485362876, "last_edit_date": 1485401869, "question_id": 41857104, "link": "https://stackoverflow.com/questions/41857104/what-if-the-condition-variablewait-for-delay-parameter-changes-during-the-wait", "title": "What if the condition_variable::wait_for delay parameter changes during the wait process?", "body": "<p>I prefer using <code>condition_variable::wait_for</code> as a timer over chrono based timer since I can override the wait condition by specifying a predicate. So I wrote a test program to check what if the delay duration changes once the wait process has already started. The <code>condition_variable::wait_for</code> seems to ignore the change and instead comes out of the wait process entirely. Why is this? Can I ever change it in the middle of a wait process?</p>\n\n<pre><code>enum STATE {START,STOP,NONE};\n\nSTATE  state ;\ncondition_variable cv;\nmutex mu;\nchrono::milliseconds delay;\n\nvoid cv_wait_thread()\n{\n    {\n        unique_lock&lt;mutex&gt; lock(mu);\n        cv.wait(lock, [](){ return state == START; });\n    }\n\n    chrono::time_point&lt;chrono::high_resolution_clock&gt; start_time = chrono::high_resolution_clock::now();\n\n    {\n        unique_lock&lt;mutex&gt; lock(mu);\n        cv.wait_for(lock, delay);       \n    }\n\n    auto diff = chrono::duration_cast&lt;chrono::milliseconds&gt;(chrono::high_resolution_clock::now() - start_time);\n\n\n    cout &lt;&lt; \"Conditional_wait:  \"&lt;&lt; diff.count() &lt;&lt; \" milliseconds\" &lt;&lt; endl;\n\n}\n\n\nvoid main()\n{\n    thread thread1([](){ cv_wait_thread(); });\n\n    state = NONE;   \n\n    this_thread::sleep_for(chrono::seconds(1));\n\n    delay = chrono::milliseconds(3000);\n\n    state = START;\n    cv.notify_all(); // ask thread to sleep for 3 sec\n\n    this_thread::sleep_for(chrono::milliseconds(2000)); // let cv_wait thread start the wait process for at least 2 sec already\n\n    delay = chrono::milliseconds(5000); // ask thread to correct and sleep for 5 sec instead\n\n    cv.notify_all();\n\n    thread1.join(); // thread prints 2000 milli\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "file", "model-view", "qfilesystemmodel"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1485371822, "post_id": 41857102, "comment_id": 70903452, "body": "Unsure why on Fedora the filter is applied like that. I would consider the default filter: QDir::AllEntries | QDir::NoDotAndDotDot | QDir::AllDirs comparing to yours which overrides all this OR flags. What if you try to filter with QDir::NoDotAndDotDot | QDir::Files?"}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1485372143, "post_id": 41857102, "comment_id": 70903650, "body": "Yep, tried the above combo as well, gave me the same result. What is really curious is how the folder changes according to the working directory. However, this only happens in the home directory. When the working directory is outside ~, the effect is gone."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1485375827, "post_id": 41857102, "comment_id": 70905652, "body": "Maybe doing more routing directory filtering will help you: <a href=\"http://stackoverflow.com/questions/250890/using-qsortfilterproxymodel-with-a-tree-model\" title=\"using qsortfilterproxymodel with a tree model\">stackoverflow.com/questions/250890/&hellip;</a>"}], "owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485363500, "creation_date": 1485362874, "last_edit_date": 1485363500, "question_id": 41857102, "link": "https://stackoverflow.com/questions/41857102/qfilesystemmodel-keeps-adding-the-current-directory-to-the-list-even-with-qdir", "title": "QFileSystemModel keeps adding the current directory to the list even with QDir::Files filter", "body": "<p>I'm using Qt5. The code is really simple and goes like this:</p>\n\n<pre><code>struct DirEdit {\n    QLineEdit *lineedit;\n    QToolButton *button;\n    QListView *view;\n    QString dirPath;\n    QFileSystemModel dirModel;\n    bool ready {false};\n};\n</code></pre>\n\n<p>Then in the source file:</p>\n\n<pre><code>for (std::size_t i = 0; i != c_lanes; ++i) {\n    dirEdits[i].view-&gt;setModel(&amp;dirEdits[i].dirModel);\n    dirEdits[i].dirModel.setFilter(QDir::Files);\n    dirEdits[i].dirModel.setProperty(fIdProp, (uint)i);\n}\n</code></pre>\n\n<p>and then finally when the user chooses a path to display the contents of in a <code>QListView</code>:</p>\n\n<pre><code>DirEdit&amp; de = dirEdits[folderId];\nde.dirPath = selectedDirPath;\nde.lineedit-&gt;setText(selectedDirPath);\nde.dirModel.setRootPath(selectedDirPath);\nde.view-&gt;setRootIndex(de.dirModel.setRootPath(selectedDirPath));\n</code></pre>\n\n<p>Now when I select <code>/home/srsly</code> (the home folder, this being on a Fedora 25 Linux system), the current folder, where the program is being ran from, gets appended to the beginning of the list. The filters are set to exclude directories as you can see. What can be the reason for this strange behavior?</p>\n"}, {"tags": ["c++", "recursion", "dynamic", "tuples"], "comments": [{"owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485362714, "post_id": 41856978, "comment_id": 70897787, "body": "As I am new to posting to stackoverflow I would also appreciate criticism on the way i post/ask questions, like choice of title and tags etc. and if the way this is posted is acceptable. Thanks."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1485362848, "post_id": 41856978, "comment_id": 70897893, "body": "Your <code>get</code> should be template (to take constexpr index). as <code>std::get&lt;I&gt;(tuple)</code> does."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1485362905, "post_id": 41856978, "comment_id": 70897931, "body": "any reason why you can&#39;t just use std::get?"}, {"owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485363169, "post_id": 41856978, "comment_id": 70898124, "body": "because i can not pass an index at runtime as far as i understand. Furthermore im implementing my own tuple that does ( i assume ) not meet the requirements to use std::get."}, {"owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485363247, "post_id": 41856978, "comment_id": 70898187, "body": "I would like to avoid adding a template parameter to my get implementation as i have to have it at compile time."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1485363260, "post_id": 41856978, "comment_id": 70898197, "body": "return type of the function cannot depend of runtime value."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1485363397, "post_id": 41856978, "comment_id": 70898294, "body": "<code>myTuple.next().next();</code> works because what would be <code>i</code> is fixed at compile-time to be <code>2</code>. Once you shift it to runtime, you have to deal with the fact that you don&#39;t know the return type anymore. This could be something like what <code>boost::variant</code> visitors do -- generate a jump table, and dispatch to a user-provided overloaded function."}, {"owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485363487, "post_id": 41856978, "comment_id": 70898353, "body": "I understand. However when i write the next() function consecutively, i return a reference to another tuple type and then apply next to that one is something like this possible programatically? I see that writing 3 times next is similar if not the same to passing a template parameter const index 3, however the procedure that it is achieved with seems different to me and lets me hope that something like call next i times is somehow possible."}, {"owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485363615, "post_id": 41856978, "comment_id": 70898432, "body": "I just read your comment Quentin after posting. In your opinion would you say what i&#39;m envisaging is even possible?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1485363635, "post_id": 41856978, "comment_id": 70898444, "body": "@BafE. The return type of <code>next()</code> may change for each previous <code>next()</code>. For example, <code>myTuple.next()</code> might not have the same type as <code>myTuple.next().next()</code>. Because all return types must be known at compile time, the number of consecutive <code>next()</code> must be known as well."}, {"owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485363680, "post_id": 41856978, "comment_id": 70898481, "body": "Thanks to all the fast commenters by the way. I am a little surprised by the speed but very gratefull for your help."}, {"owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485363805, "post_id": 41856978, "comment_id": 70898565, "body": "Is there a data structure in c++, that resembles a tuple, with dynamic access? If yes is it possible to point me somewhere to read up on it, I would be very interested in how they solved that ?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1485363882, "post_id": 41856978, "comment_id": 70898617, "body": "@BafE. Consider <a href=\"http://en.cppreference.com/w/cpp/utility/any\" rel=\"nofollow noreferrer\">std::any</a> and <a href=\"http://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\">std::variant</a> from c++17. You said you would like to avoid them, but they are likely the best option."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1485363943, "post_id": 41856978, "comment_id": 70898663, "body": "@BafE. if <code>i</code> is known at compile-time, it&#39;s quite simple. Otherwise, it can&#39;t be done cleanly by using the return value, which can only have one type. Are you interested in a solution where you pass in an overloaded functor that receives what would have been the return value ?"}, {"owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1485364115, "post_id": 41856978, "comment_id": 70898776, "body": "@Quentin yes, i read about functors on other stackoverflow questions, unfortunately i think i didnt understand correctly, i think i have to read up more about functors but definatly interested in the solution. Can the return value then be accessed by reference or would it have to be cast ?"}, {"owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1485364234, "post_id": 41856978, "comment_id": 70898871, "body": "@Fran&#231;oisAndrieux I will fall back on those if I have to. But I am also interested in if what i planned is possible. I would be very happy if i managed even if have to use more convoluted code/structures"}, {"owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485364483, "post_id": 41856978, "comment_id": 70899019, "body": "Is there a way to give points to commenters?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485364429, "post_id": 41857477, "comment_id": 70898981, "body": "Ok cool! I will work through your answer, at a glance there seemes to not be a template parameter Index, which means this could be used for dynamic access?"}, {"owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485364564, "post_id": 41857477, "comment_id": 70899069, "body": "I will get back to you later tonight, i have to try understand how to implement. Sorry im a bit slow."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485364674, "post_id": 41857477, "comment_id": 70899123, "body": "@BafE. the index parameter is named <code>I</code> in this code."}, {"owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485364915, "post_id": 41857477, "comment_id": 70899285, "body": "Oh i see, yes, the function return type is tuple_element&lt;I, Ts...&gt;::type&amp;. This is close to the implementation of std::get for std::tuple right?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485365190, "post_id": 41857477, "comment_id": 70899483, "body": "@BafE. I copied the implementation of <code>tuple_element</code> from cppreference page for <code>std::tuple_element</code> and made only minor modifications. I&#39;ve declared the getter as a member for you, but otherwise the interface is pretty much identical."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1485364044, "last_edit_date": 1592644375, "creation_date": 1485364044, "answer_id": 41857477, "question_id": 41856978, "link": "https://stackoverflow.com/questions/41856978/is-there-a-way-to-call-a-function-multiple-times-on-the-reference-it-returns-pro/41857477#41857477", "title": "Is there a way to call a function multiple times on the reference it returns programmatically? -Tuple Dynamic access", "body": "<blockquote>\n<p>why does the this work programmatically when i call in source.</p>\n<pre><code>myTuple.next().next();\n</code></pre>\n</blockquote>\n<p>Because the type is known at compile time. There are no runtime arguments, like in your <code>get(int i, int j, OwnType k)</code> attempt. Your attempt cannot possibly work, but following would be possible to implement:</p>\n<pre><code>template&lt;class... Ts&gt;\ntemplate&lt;std::size_t I&gt;\nmagic_type&amp; MyTupleImpl&lt;Ts...&gt;::get();\n// magic_type is not actual code. It is a\n// placeholder for a proper implementation\n</code></pre>\n<p>Template arguments are known at compile time, so this can work. Now we must use template magic to figure out the correct type to return. You'll need to use a recursive helper template similar to the following (this example is modified from <a href=\"http://en.cppreference.com/w/cpp/utility/tuple/tuple_element\" rel=\"nofollow noreferrer\">cppreference</a>):</p>\n<pre><code>template&lt; std::size_t I, class T &gt;\nstruct tuple_element;\n \n// recursive case\ntemplate&lt; std::size_t I, class Head, class... Tail &gt;\nstruct tuple_element&lt;I, MyTupleImpl&lt;Head, Tail...&gt;&gt;\n    : tuple_element&lt;I-1, MyTupleImpl&lt;Tail...&gt;&gt; { };\n \n// base case\ntemplate&lt; class Head, class... Tail &gt;\nstruct tuple_element&lt;0, MyTupleImpl&lt;Head, Tail...&gt;&gt; {\n   typedef Head type;\n};\n</code></pre>\n<p>With the help of this, we could declare:</p>\n<pre><code>template&lt;class... Ts&gt;\ntemplate&lt;std::size_t I&gt;\ntypename tuple_element&lt;I, Ts...&gt;::type&amp;\nMyTupleImpl&lt;Ts...&gt;::get();\n</code></pre>\n<p>I'll leave the implementation of <code>MyTupleImpl::get</code> as an exercise.</p>\n<p>Warning: No code in this answer has been tested in any way.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485383341, "post_id": 41858610, "comment_id": 70909465, "body": "Thank you @Quentin, just came back home. I still have to wrap my head around this, for example i have to check std::forward and the use of the double ampersand. Also the use of passing these functors is quite interressting and i will read where/which scenario they are most used in. I will up this answer and accept as it seems this is as close as it gets to dynamic access. Can i ask you how long you have been programming in c++?  Thanks again!"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "edited": false, "score": 0, "creation_date": 1485384299, "post_id": 41858610, "comment_id": 70909885, "body": "@BafE. The <code>&amp;&amp;</code>/<code>std::forward</code> mechanism is called <i>perfect forwarding</i>. It allows passing the functor around in the most generic way possible, but is not strictly required (you could just take <code>F f</code> by value and call <code>f(data)</code> directly if copies aren&#39;t an issue). And I&#39;ve been learning C++ for four years now! Glad to help :)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1485428769, "post_id": 41858610, "comment_id": 70925890, "body": "I would so call <code>get</code> something like <code>visit_nth</code> or <code>apply_nth</code>"}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1485367731, "creation_date": 1485367731, "answer_id": 41858610, "question_id": 41856978, "link": "https://stackoverflow.com/questions/41856978/is-there-a-way-to-call-a-function-multiple-times-on-the-reference-it-returns-pro/41858610#41858610", "title": "Is there a way to call a function multiple times on the reference it returns programmatically? -Tuple Dynamic access", "body": "<p>I'm assuming the following bare-bones definitions for <code>MyTuple</code>:</p>\n\n<pre><code>template &lt;class...&gt;\nstruct MyTuple;\n\ntemplate &lt;class Head, class... Tail&gt;\nstruct MyTuple&lt;Head, Tail...&gt; : MyTuple&lt;Tail...&gt; {\n    Head data;\n};\n\ntemplate &lt;class T&gt;\nstruct MyTuple&lt;T&gt; {\n    T data;\n};\n</code></pre>\n\n<p>We can take advantage of their recursive nature to define a <code>get(i)</code> function on each layer, that will either \"return\" its <code>data</code> if <code>i == 0</code>, and pass the call over to the next layer otherwise.</p>\n\n<p>Since we can't (or rather, don't want to) cram N different types into the return value, let's flip the flow control on its head: instead of having <code>get</code> return a reference and use it afterwards, we'll pass \"use it afterwards\" as an overloaded functor to <code>get</code>, which will call the correct overload.</p>\n\n<pre><code>template &lt;class Head, class... Tail&gt;\nstruct MyTuple&lt;Head, Tail...&gt; : MyTuple&lt;Tail...&gt; {\n    MyTuple&lt;Tail...&gt; &amp;next() {\n        return *this;\n    }\n\n    template &lt;class F&gt;\n    auto get(std::size_t i, F &amp;&amp;f) {\n        return i\n            ? next().get(i - 1u, std::forward&lt;F&gt;(f))\n            : std::forward&lt;F&gt;(f)(data);\n    }\n\n    Head data;\n};\n\ntemplate &lt;class T&gt;\nstruct MyTuple&lt;T&gt; {\n    template &lt;class F&gt;\n    auto get(std::size_t i, F &amp;&amp;f) {\n        assert(!i);\n        return std::forward&lt;F&gt;(f)(data);\n    }\n\n    T data;\n};\n</code></pre>\n\n<p>The return value of <code>get</code> is the return value of the selected overload. Its type is the <em>common type</em> (as <code>std::common_type</code> would return) of all of the involved overloads. Using it looks like this:</p>\n\n<pre><code>MyTuple&lt;float, int, double&gt; tup;\n\nstruct {\n    void operator()(float) const { }\n    void operator()(int) const { }\n    void operator()(double) const { }\n} func;\n\nfor(std::size_t i = 0; i &lt; 3; ++i)\n    tup.get(i, func);\n</code></pre>\n\n<p>Each iteration of the loop will call the corresponding overload with the required data.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/393c970d72a8dd74\" rel=\"nofollow noreferrer\">See it live on Coliru</a></p>\n"}], "owner": {"reputation": 33, "user_id": 7469998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18ba2f4fd757fae9ad63568f95e63fd4?s=128&d=identicon&r=PG&f=1", "display_name": "Baf E.", "link": "https://stackoverflow.com/users/7469998/baf-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 41858610, "answer_count": 2, "score": 3, "last_activity_date": 1485367731, "creation_date": 1485362466, "last_edit_date": 1485363574, "question_id": 41856978, "link": "https://stackoverflow.com/questions/41856978/is-there-a-way-to-call-a-function-multiple-times-on-the-reference-it-returns-pro", "title": "Is there a way to call a function multiple times on the reference it returns programmatically? -Tuple Dynamic access", "body": "<p>Out of interest I am trying to implement a variadic template tuple type with dynamic access and I would like to avoid casts and returning <code>boost::any</code> or <code>boost::variant</code>. I have come to the point were every recursive inheritance stores a pointer to itself and I am able to return it like so:</p>\n\n<pre><code>ParentType&amp; next() {\n    return *this;\n}\n</code></pre>\n\n<p>I can call this when I write in source and iterate like so for example:</p>\n\n<pre><code>MyTupleImpl&lt;int, std::string, float&gt; myTuple;\nmyTuple.next().next().next();\n</code></pre>\n\n<p>which returns a </p>\n\n<pre><code> MyTupleImpl&lt;float&gt; &amp;\n</code></pre>\n\n<p>I can then do some operations on the data held by this Tuple like so:</p>\n\n<pre><code> void DoSomething( myTuple.next().next().next().data);\n</code></pre>\n\n<p>I can write this down in source, but how could I implement it such that I just pass a number n and it applies the function <code>next()</code> n times on its returned reference.</p>\n\n<p>I tried recursion along the lines of:</p>\n\n<pre><code>ParentType* get(int i, int j, OwnType k) {\n\n    std::cout &lt;&lt; \"j\" &lt;&lt; j &lt;&lt; \"i\" &lt;&lt; i &lt;&lt; std::endl;\n    if (j &lt; i) {\n        j++;\n        return k.next().get(i, j, k.next());\n    }\n    else\n    {\n        return k.current;\n    }\n}\n</code></pre>\n\n<p>As is relatively obvious there is always a conflict with the return type of the function since the context in which its called like so:</p>\n\n<pre><code>myTuple.get(1,0,myTuple);\n</code></pre>\n\n<p>has its <code>ParentType</code> set but when next is called <code>ParentType</code> changes.</p>\n\n<p>I can imagine that return Type deduction is one of the reasons why tuples can not be dynamically accessed. However why does the this work programmatically when I call in source.</p>\n\n<pre><code>myTuple.next().next();\n</code></pre>\n\n<p>for example.</p>\n\n<p>I know this is somewhat confused however I hope some of you will understand what I mean and be able to help me. I apologize as I am somewhat of a Novice when it comes to C++ and templated classes.</p>\n"}, {"tags": ["c++", "usrp", "uhd"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1485362754, "post_id": 41856953, "comment_id": 70897824, "body": "The access violation dialog already tells you, where it&#39;s failing. You simply need to click the <i>Break</i> button and it&#39;ll take you right to the place where things go downhill."}, {"owner": {"reputation": 1840, "user_id": 1463551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/jVUYG.jpg?s=128&g=1", "display_name": "SanVEE", "link": "https://stackoverflow.com/users/1463551/sanvee"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1485362924, "post_id": 41856953, "comment_id": 70897938, "body": "@IInspectable thanks! yes I tried that it takes to free.c file which is not part of the main project &amp; it says (unknown scope)."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1485363054, "post_id": 41856953, "comment_id": 70898033, "body": "That location certainly comes with a call stack. That is invaluably helpful in diagnosing the root cause."}], "owner": {"reputation": 1840, "user_id": 1463551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/jVUYG.jpg?s=128&g=1", "display_name": "SanVEE", "link": "https://stackoverflow.com/users/1463551/sanvee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 360, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485366565, "creation_date": 1485362385, "last_edit_date": 1485366565, "question_id": 41856953, "link": "https://stackoverflow.com/questions/41856953/unable-to-execute-uhd-sample-c-code", "title": "Unable to execute UHD sample c++ code", "body": "<p>I'm trying to execute <strong>UHD C++ sample code</strong> given <a href=\"https://kb.ettus.com/Getting_Started_with_UHD_and_C%2B%2B\" rel=\"nofollow noreferrer\">here</a>, </p>\n\n<pre><code>#include &lt;uhd/utils/thread_priority.hpp&gt;\n#include &lt;uhd/utils/safe_main.hpp&gt;\n#include &lt;uhd/usrp/multi_usrp.hpp&gt;\n#include &lt;uhd/exception.hpp&gt;\n#include &lt;uhd/types/tune_request.hpp&gt;\n#include &lt;boost/program_options.hpp&gt;\n#include &lt;boost/format.hpp&gt;\n#include &lt;boost/thread.hpp&gt;\n#include &lt;iostream&gt;\n\nint UHD_SAFE_MAIN(int argc, char *argv[]) {\nuhd::set_thread_priority_safe();\n\nstd::string device_args(\"addr=192.168.10.2\");\nstd::string subdev(\"A:0\");\nstd::string ant(\"TX/RX\");\nstd::string ref(\"internal\");\n\ndouble rate(1e6);\ndouble freq(915e6);\ndouble gain(10);\ndouble bw(1e6);\n\n//create a usrp device\nstd::cout &lt;&lt; std::endl;\nstd::cout &lt;&lt; boost::format(\"Creating the usrp device with: %s...\") % device_args &lt;&lt; std::endl;\nuhd::usrp::multi_usrp::sptr usrp = uhd::usrp::multi_usrp::make(device_args);\n\n// Lock mboard clocks\nstd::cout &lt;&lt; boost::format(\"Lock mboard clocks: %f\") % ref &lt;&lt; std::endl;\nusrp-&gt;set_clock_source(ref);\n\n//always select the subdevice first, the channel mapping affects the other settings\nstd::cout &lt;&lt; boost::format(\"subdev set to: %f\") % subdev &lt;&lt; std::endl;\nusrp-&gt;set_rx_subdev_spec(subdev);\nstd::cout &lt;&lt; boost::format(\"Using Device: %s\") % usrp-&gt;get_pp_string() &lt;&lt; std::endl;\n\n//set the sample rate\nif (rate &lt;= 0.0) {\n    std::cerr &lt;&lt; \"Please specify a valid sample rate\" &lt;&lt; std::endl;\n    return ~0;\n}\n\n// set sample rate\nstd::cout &lt;&lt; boost::format(\"Setting RX Rate: %f Msps...\") % (rate / 1e6) &lt;&lt; std::endl;\nusrp-&gt;set_rx_rate(rate);\nstd::cout &lt;&lt; boost::format(\"Actual RX Rate: %f Msps...\") % (usrp-&gt;get_rx_rate() / 1e6) &lt;&lt; std::endl &lt;&lt; std::endl;\n\n// set freq\nstd::cout &lt;&lt; boost::format(\"Setting RX Freq: %f MHz...\") % (freq / 1e6) &lt;&lt; std::endl;\nuhd::tune_request_t tune_request(freq);\nusrp-&gt;set_rx_freq(tune_request);\nstd::cout &lt;&lt; boost::format(\"Actual RX Freq: %f MHz...\") % (usrp-&gt;get_rx_freq() / 1e6) &lt;&lt; std::endl &lt;&lt; std::endl;\n\n// set the rf gain\nstd::cout &lt;&lt; boost::format(\"Setting RX Gain: %f dB...\") % gain &lt;&lt; std::endl;\nusrp-&gt;set_rx_gain(gain);\nstd::cout &lt;&lt; boost::format(\"Actual RX Gain: %f dB...\") % usrp-&gt;get_rx_gain() &lt;&lt; std::endl &lt;&lt; std::endl;\n\n// set the IF filter bandwidth\nstd::cout &lt;&lt; boost::format(\"Setting RX Bandwidth: %f MHz...\") % (bw / 1e6) &lt;&lt; std::endl;\nusrp-&gt;set_rx_bandwidth(bw);\nstd::cout &lt;&lt; boost::format(\"Actual RX Bandwidth: %f MHz...\") % (usrp-&gt;get_rx_bandwidth() / 1e6) &lt;&lt; std::endl &lt;&lt; std::endl;\n\n// set the antenna\nstd::cout &lt;&lt; boost::format(\"Setting RX Antenna: %s\") % ant &lt;&lt; std::endl;\nusrp-&gt;set_rx_antenna(ant);\nstd::cout &lt;&lt; boost::format(\"Actual RX Antenna: %s\") % usrp-&gt;get_rx_antenna() &lt;&lt; std::endl &lt;&lt; std::endl;\n\nreturn EXIT_SUCCESS; }\n</code></pre>\n\n<p>I can successfully build<kbd>F6</kbd> the project under <code>Debug</code>mode,</p>\n\n<p><a href=\"https://i.stack.imgur.com/8gWpY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8gWpY.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now if I try to execute<kbd>F5</kbd> the project under <code>Debug</code> mode, it throws this warning &amp; pauses execution.</p>\n\n<p><a href=\"https://i.stack.imgur.com/v576T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v576T.png\" alt=\"enter image description here\"></a></p>\n\n<p>&amp; then I tried to locate where it fails, using break points &amp; found that during the creation of <code>usrp object</code></p>\n\n<pre><code> uhd::usrp::multi_usrp::sptr usrp = uhd::usrp::multi_usrp::make(device_args);\n</code></pre>\n\n<p>It would be great if someone points me towards the right direction &amp; why it's failing at this point?</p>\n\n<p><strong>Edit 1:</strong> Hitting <strong>Break</strong> takes to <code>free.c</code> (Acc. to IInspectable suggestion)</p>\n\n<p><a href=\"https://i.stack.imgur.com/IXDl2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IXDl2.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 2371895, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a66f71d26cff748b811fb1b2c9d9b282?s=128&d=identicon&r=PG", "display_name": "Reyny", "link": "https://stackoverflow.com/users/2371895/reyny"}, "edited": false, "score": 0, "creation_date": 1485362703, "post_id": 41856962, "comment_id": 70897779, "body": "That&#39;s it! Thank you. :)"}], "tags": [], "owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "is_accepted": true, "score": 2, "last_activity_date": 1485363107, "last_edit_date": 1485363107, "creation_date": 1485362420, "answer_id": 41856962, "question_id": 41856930, "link": "https://stackoverflow.com/questions/41856930/c-beginner-mistake-primary-expression-error/41856962#41856962", "title": "C++ beginner mistake: primary-expression error", "body": "<p>You'd probably need this:</p>\n\n<pre><code>void Foo_main(Foo* foo, double offset){ foo-&gt;main(offset); }\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 2371895, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a66f71d26cff748b811fb1b2c9d9b282?s=128&d=identicon&r=PG", "display_name": "Reyny", "link": "https://stackoverflow.com/users/2371895/reyny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 41856962, "answer_count": 1, "score": -2, "last_activity_date": 1485370834, "creation_date": 1485362317, "last_edit_date": 1485370834, "question_id": 41856930, "link": "https://stackoverflow.com/questions/41856930/c-beginner-mistake-primary-expression-error", "title": "C++ beginner mistake: primary-expression error", "body": "<p>This is the error I get:</p>\n\n<blockquote>\n  <p>expected primary-expression before <code>double</code> <br> \n       <code>void Foo_main(Foo* foo){ foo-&gt;main(double); }</code></p>\n</blockquote>\n\n<p>This is the code I have:</p>\n\n<pre><code>class Foo {\npublic: int main(double offset) {\n    *some code*\n     }\n}\n\nextern \"C\" {\n    Foo* Foo_new(){ return new Foo(); }\n    void Foo_main(Foo* foo){ foo-&gt;main(double offset); }\n};\n</code></pre>\n\n<p>When I delete the  <code>double offset</code> from both places it works perfectly fine.</p>\n"}, {"tags": ["c++", "memory", "memory-management"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 10, "creation_date": 1485362341, "post_id": 41856906, "comment_id": 70897519, "body": "What led you to believe that &quot;nobody knows the size of the memory to be allocated&quot;? That&#39;s very obvious. Sufficient memory for one instance of the  <code>musicCd</code> object was needed, it was allocated, then deallocated."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1485362386, "post_id": 41856906, "comment_id": 70897544, "body": "<i>nobody knows the size of the memory to be allocated</i> Not true. <code>musicCD</code> has a fixed size (use <code>sizeof</code> to see its size)."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1485362433, "post_id": 41856906, "comment_id": 70897584, "body": "I don&#39;t believe the standard cares, however the size of musicCD is determined by new, there are standard operations you can do to get the size, i.e. <code>sizeof(musicCD)</code>"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 3, "creation_date": 1485363055, "post_id": 41856906, "comment_id": 70898034, "body": "On a side note, the IDE doesn&#39;t care about how much memory will / will not be allocated.  The compiler on the other hand will. It&#39;s not really on topic for the question but a mistake that could lead to understanding problems later."}, {"owner": {"reputation": 525, "user_id": 7421372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jep5Z.png?s=128&g=1", "display_name": "london-deveoper", "link": "https://stackoverflow.com/users/7421372/london-deveoper"}, "edited": false, "score": 0, "creation_date": 1485363183, "post_id": 41856906, "comment_id": 70898134, "body": "@op I the missing part of the equation I think is that the sizeof(string) is constant. If you add content to a string the new content is managed on the heap. This means that string s(&quot;&quot;) and string t(&quot;ssjlskjskljlsj&quot;) are the same size on the stack;"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 525, "user_id": 7421372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jep5Z.png?s=128&g=1", "display_name": "london-deveoper", "link": "https://stackoverflow.com/users/7421372/london-deveoper"}, "edited": false, "score": 0, "creation_date": 1485363507, "post_id": 41856906, "comment_id": 70898359, "body": "@ccpgh Minor niggle: C++ does not acknowledge the existence of heap and stack. Heap and stack are common implementations of the dynamic and temporary storage specified by C++."}, {"owner": {"reputation": 3463, "user_id": 508175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ca8c547ecf1fad821a9932396820baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Teruzzi", "link": "https://stackoverflow.com/users/508175/alessandro-teruzzi"}, "edited": false, "score": 0, "creation_date": 1485363511, "post_id": 41856906, "comment_id": 70898361, "body": "as a learning experience, I will recommend you to try to implement your own object that perform some memory allocation. You can try to implement your own string object for example."}], "answers": [{"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 2, "last_activity_date": 1485463353, "last_edit_date": 1495540376, "creation_date": 1485462856, "answer_id": 41882486, "question_id": 41856906, "link": "https://stackoverflow.com/questions/41856906/c-memory-allocation-howto/41882486#41882486", "title": "c++ memory allocation howto", "body": "<p>It seems like you are confused about how <code>std::string</code>, or any dynamic container, handles the fact that it's memory requirements are not predetermined. <code>std::string</code> for example does <em>not</em> store it's character data internally. Simply put, it contains a pointer that points to <em>another</em> dynamic allocated buffer which contains the actual data. <code>std::string</code> has constructors, a destructor and assignment operators that automatically manage the extra buffer, which contains the actual character data. This including reallocating, copying the data, updating the internal pointer and freeing the previous buffer when extra storage is needed. The size of the buffer that contains the actual data does <strong>not</strong> count towards the size of <code>std::string</code>, only the pointer to it does. Every instance of <code>std::string</code>, throughout it's lifetime, only directly contains a constant number of members which all have constant sizes. In c++ all types have a compile time constant size.</p>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three#Rule_of_five\" rel=\"nofollow noreferrer\">Rule of five</a> for a simplified implementation of <code>string</code> showing how it works. The size of the class <code>rule_of_five</code> from this example is simply the size of <code>char*</code> regardless of the content of the buffer pointed to by this pointer. The actual buffer is allocated later, during or after construction, which is after the initial allocation for the object itself has already finished.</p>\n\n<p>Edit: There are some cases where a string can store it's character data internally when dealing with very short strings. This is an optimization not generally seen in other containers. See <a href=\"https://stackoverflow.com/a/10319672/7359094\">this answer</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 7469861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def920162ec25e6b84062b1f92a31611?s=128&d=identicon&r=PG&f=1", "display_name": "kandosfaszagyerek", "link": "https://stackoverflow.com/users/7469861/kandosfaszagyerek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485463353, "creation_date": 1485362238, "last_edit_date": 1485438614, "question_id": 41856906, "link": "https://stackoverflow.com/questions/41856906/c-memory-allocation-howto", "title": "c++ memory allocation howto", "body": "<p>I am just starting C++ and I can't understand how my code works:</p>\n\n<p>Ok I allocate memory, but at the time of the allocation nobody knows the size of the memory to be allocated. But still the code works.\nHow much memory is allocated? How the compiler knows how much memory I will need?</p>\n\n<p>EDIT:</p>\n\n<p>Sorry if my question was not clear. Let me please try clarify it. So I dynamically allocate some memory in the heap by using my pointer. But since there is no text in the sting variable, in my opinion it is quite difficult to know how much text (bytes) I will enter via getline.</p>\n\n<p>I tried asking the size of two different text literals, and yes they are different in size.</p>\n\n<pre><code>sizeof(\"\") // is 1 (because of the ending 0 maybe?)\nsizeof(\"sometext\") // is 9\n</code></pre>\n\n<p>But for the string: the sizeof gives me 4 both times. It's clear that the sizeof() gives me the length of the pointer pointing to the string.</p>\n\n<p>How can I allocate memory? If I allocate memory for a new string, only allocates to a pointer pointing to the memory address of the first character in the string? \nObviously the characters I enter must be stored somewhere. And I first allocate the memory, and then I load some text into it.</p>\n\n<p>Edit 2: make the edited code to look code, not plain text.</p>\n\n<pre><code>//Edit:    \nstring a,b = \"sometext\"; \n    cout &lt;&lt; sizeof(a) &lt;&lt; endl; //4\n    cout &lt;&lt; sizeof(b); //4\n\n//--------------------------------------------------------\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;exception&gt;\n\n\n\nusing namespace std;\n\nint main()\n{\n    //Defining struct\n    struct musicCD\n    {\n        string artist, title;    // artist of the CD\n    };\n    //Memory allocation\n    musicCD *ptr;\n    try{ptr = new musicCD;}\n    catch(bad_alloc){cerr &lt;&lt; \"Out of memory :(\";return -1;}\n    catch(...){cerr &lt;&lt; \"Something bad happened :O !\";return -1;\n    }\n\n    //Get the data to store:\n    cout &lt;&lt; \"Please enter the data for the CD!' \" &lt;&lt; endl;\n    cout &lt;&lt; \"Please enter the artist: \";getline(cin, ptr-&gt;artist); cout &lt;&lt; endl;\n    //Write out the data\n    cout &lt;&lt; \"The data entered: \" &lt;&lt; endl;\n    cout &lt;&lt; \"The artist performing is: \\t\" &lt;&lt; ptr-&gt;artist &lt;&lt; endl;\n\n    delete ptr;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "grid", "heightmap"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 1, "creation_date": 1485362155, "post_id": 41856750, "comment_id": 70897393, "body": "You need to read some book or tutorial about OpenGL. <code>glDrawArrays</code> needs a count of primitves (triangles in your case). A NxN grid may have about 2xNxN triangles. But you must FIRST define them in a buffer."}, {"owner": {"reputation": 11, "user_id": 5748170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90e91752c659d44a2d58b13cc0d4a3b5?s=128&d=identicon&r=PG&f=1", "display_name": "Abdominator", "link": "https://stackoverflow.com/users/5748170/abdominator"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1485363029, "post_id": 41856750, "comment_id": 70898009, "body": "I am defining the vertex positions in a buffer. Along with the normals."}, {"owner": {"reputation": 11, "user_id": 5748170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90e91752c659d44a2d58b13cc0d4a3b5?s=128&d=identicon&r=PG&f=1", "display_name": "Abdominator", "link": "https://stackoverflow.com/users/5748170/abdominator"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1485363118, "post_id": 41856750, "comment_id": 70898082, "body": "Using glDrawElements i can draw the terrain correctly, however, then my textures will not draw as i want."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1485363326, "post_id": 41856750, "comment_id": 70898241, "body": "Without seeing your code, nobody can help on details. Just generic advise as I gave."}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1485364083, "post_id": 41856750, "comment_id": 70898759, "body": "@Abdominator: A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5748170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90e91752c659d44a2d58b13cc0d4a3b5?s=128&d=identicon&r=PG&f=1", "display_name": "Abdominator", "link": "https://stackoverflow.com/users/5748170/abdominator"}, "edited": false, "score": 0, "creation_date": 1485366552, "post_id": 41857855, "comment_id": 70900340, "body": "Oh well. Seem to get the same result even with the stride set to 0."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 11, "user_id": 5748170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90e91752c659d44a2d58b13cc0d4a3b5?s=128&d=identicon&r=PG&f=1", "display_name": "Abdominator", "link": "https://stackoverflow.com/users/5748170/abdominator"}, "edited": false, "score": 0, "creation_date": 1485366614, "post_id": 41857855, "comment_id": 70900380, "body": "Your glDrawArrays works like this: Let&#39;s make a triangle with the first 9 values (3 vert of xyz) from buffer VBO[0]. Then another triangle with next 9 values. Yet more with 9 next... You have not arranged your &#39;terrainVertices&#39; that way, but with a grid."}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 1, "creation_date": 1485373743, "post_id": 41857855, "comment_id": 70904505, "body": "This answer is wrong.  The <code>stride</code> is the  byte offset between two consecutive array element start addresses. <code>sizeof(glm::vec3)</code> is the correct stride, <code>0</code> is just a convenience shortcut for the tightly-packed case. Switching it to 0 will make no difference whatsoever, and using <code>2</code> for your interleaved example is completely off."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1485391569, "post_id": 41857855, "comment_id": 70912107, "body": "From <a href=\"https://www.opengl.org/sdk/docs/man/html/glVertexAttribPointer.xhtml\" rel=\"nofollow noreferrer\">opengl.org/sdk/docs/man/html/glVertexAttribPointer.xhtml</a> &quot;[stride]Specifies the byte offset between consecutive generic <b>vertex attributes</b>&quot;.  Not array elements, floats in this case. Using <code>sizeof(glm::vec3)</code>will skip every odd vertex."}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1485603877, "post_id": 41857855, "comment_id": 71000143, "body": "@Ripi2: no, it will not."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "reply_to_user": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1485617212, "post_id": 41857855, "comment_id": 71004083, "body": "@derhass Yes you&#39;re right and I&#39;m wrong because the OP didn&#39;t bind a second vertex attribute to the same XYZXYZXYZ buffer."}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": -2, "last_activity_date": 1485390624, "last_edit_date": 1485390624, "creation_date": 1485365146, "answer_id": 41857855, "question_id": 41856750, "link": "https://stackoverflow.com/questions/41856750/drawing-triangle-grid-with-gldrawarrays-deformation-of-triangles/41857855#41857855", "title": "Drawing triangle grid with glDrawArrays() - deformation of triangles", "body": "<pre><code>glBindBuffer(GL_ARRAY_BUFFER, VBO[0]);\nglBufferData(GL_ARRAY_BUFFER, nrOfVertices * 3 * sizeof(GLfloat), terrainVertices, GL_STATIC_DRAW);\nglEnableVertexAttribArray(3);\nglVertexAttribPointer(3, 3, GL_FLOAT,GL_FALSE, sizeof(glm::vec3), BUFFER_OFFSET(sizeof(glm::vec3) * 0));\n                                               ^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>No. Your vertices buffer VBO[0] is XYZXYZXYZ. So no stride is needed. Set it to 0.\n<p>If your buffer was XYZnnXYZnnXYZ then stride=2 (the two 'n').\n<p><strong>Correction:</strong> The stride is a number of bytes. If you have two 'n' interleaved and your are reading each vale in buffer as a float, then the stride for each XYZ is <code>2*sizeof(float)</code>\n <p>Same for Normals and UV</p>\n"}], "owner": {"reputation": 11, "user_id": 5748170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90e91752c659d44a2d58b13cc0d4a3b5?s=128&d=identicon&r=PG&f=1", "display_name": "Abdominator", "link": "https://stackoverflow.com/users/5748170/abdominator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 579, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1485390624, "creation_date": 1485361846, "last_edit_date": 1485364243, "question_id": 41856750, "link": "https://stackoverflow.com/questions/41856750/drawing-triangle-grid-with-gldrawarrays-deformation-of-triangles", "title": "Drawing triangle grid with glDrawArrays() - deformation of triangles", "body": "<p>I am creating and storingthe position of the vertices of a 256*256 grid in a simple for loop like this:</p>\n\n<pre><code>ind=0;\nfor(i=0, i&lt;256, i++){\n  for(j=0, j&lt;256, j++){\n       vertexPosition[ind].x= i;\n       vertexPosition[ind].y= 1.0;\n       vertexPosition[ind].z= j;\n       ind++;\n</code></pre>\n\n<p>I am sending these vertices to the shader using vertex arrays. However, when drawing this with <code>\nglBindVertexArray(VAO);\nglDrawArrays(GL_TRIANGLES, 0, 256*256)</code> </p>\n\n<pre><code>glBindVertexArray(0);\n</code></pre>\n\n<p>I get the following result.\n<img src=\"https://i.stack.imgur.com/LYsGd.png\" alt=\"enter image description here\"></p>\n\n<p>I understand that this has to do with how opengl draws triangles? I am creating my vertices row by row but it seems that this is not how opengl draws the triangles (obviously). I am quite stuck here and would be glad if anyone could point me in the right direction in <strong>how to get the grid to display properly</strong></p>\n\n<p>This is how I store the vertex info in buffers</p>\n\n<pre><code>//Terrain Vertex Position\nglGenVertexArrays(1, &amp;VAO);\nglBindVertexArray(VAO);\nglGenBuffers(3, VBO);\n\nglBindBuffer(GL_ARRAY_BUFFER, VBO[0]);\nglBufferData(GL_ARRAY_BUFFER, nrOfVertices * 3 * sizeof(GLfloat), terrainVertices, GL_STATIC_DRAW);\nglEnableVertexAttribArray(3);\nglVertexAttribPointer(3, 3, GL_FLOAT, GL_FALSE, sizeof(glm::vec3), BUFFER_OFFSET(sizeof(glm::vec3) * 0));\n\n\n//Terrain Normals\n\nglBindBuffer(GL_ARRAY_BUFFER, VBO[1]);\nglBufferData(GL_ARRAY_BUFFER, nrOfVertices * 3 * sizeof(GLfloat), normals, GL_STATIC_DRAW);\nglEnableVertexAttribArray(4);\nglVertexAttribPointer(4, 3, GL_FLOAT, GL_FALSE, sizeof(glm::vec3), BUFFER_OFFSET(sizeof(glm::vec3) * 3));\n\n\n\n//Terrain UV\nglBindBuffer(GL_ARRAY_BUFFER, VBO[2]);\nglBufferData(GL_ARRAY_BUFFER, nrOfVertices * 2 * sizeof(GLfloat), uv, GL_STATIC_DRAW);\nglEnableVertexAttribArray(5);\nglVertexAttribPointer(5, 2, GL_FLOAT, GL_FALSE, sizeof(glm::vec2), BUFFER_OFFSET(sizeof(glm::vec3) * 6));\nglBindVertexArray(0); //End the array here\n</code></pre>\n"}, {"tags": ["c++", "int"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1485361984, "post_id": 41856745, "comment_id": 70897274, "body": "You have an unmatched bracket: <code>static_cast&lt;double&gt;{</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1485362077, "post_id": 41856745, "comment_id": 70897341, "body": "<code>(100 * votes[j]) &#47; totalVotes</code> get rid of all those cast."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1485362116, "post_id": 41856745, "comment_id": 70897369, "body": "Is <code>NUMBER_OF_CANDIDATE</code> suppose to be <code>NO_OF_CANDIDATE </code>? is <code>votes[i]</code> suppose to be <code>voteResult[i]</code>? Compiling this example produces errors other than the one the question asks about."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1485362353, "post_id": 41856745, "comment_id": 70897528, "body": "Too many transcription errors, and nothing here that would obviously cause the stated error. Present a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1485362659, "post_id": 41856745, "comment_id": 70897747, "body": "Once typos fixed, it seems to works <a href=\"https://ideone.com/t4eYKk\" rel=\"nofollow noreferrer\">Demo</a>."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7009223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acffab229b64eebd9cc2ebd36d4e2f42?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Alexander", "link": "https://stackoverflow.com/users/7009223/thomas-alexander"}, "edited": false, "score": 0, "creation_date": 1485367675, "post_id": 41857015, "comment_id": 70901027, "body": "I can run it with your comment. Thank you so much."}], "tags": [], "owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "is_accepted": true, "score": 1, "last_activity_date": 1485362997, "last_edit_date": 1485362997, "creation_date": 1485362570, "answer_id": 41857015, "question_id": 41856745, "link": "https://stackoverflow.com/questions/41856745/how-to-solve-the-error-invalid-conversion-from-int-to-int/41857015#41857015", "title": "How to solve the error: invalid conversion from &quot; int* &quot; to &quot; int &quot;", "body": "<p>The code you posted has a bunch of errors.  </p>\n\n<ol>\n<li>calculatePercentage() definition is missing the closing ';'  </li>\n<li>probable name mismatch between NO_OF_CANDIDATE and NUMBER_OF_CANDIDATE  </li>\n<li>missing #include &lt;fstream&gt;  (using ifstream)  </li>\n<li>missing #include &lt;string&gt;  </li>\n<li>missing std:: namespace before <code>ifstream</code> and <code>string</code>  </li>\n<li><code>votes</code> not declared anywhere (should it be <code>voteResult</code>?)  </li>\n<li>wrong opening curly bracket instead in <code>static_cast&lt;double&gt;{votes[j])/totalVotes;</code>  </li>\n</ol>\n\n<p>...\nLet alone the way you do calculation and parameter passing...</p>\n\n<p>The following edited code should compile, not sure if it works as you expected:  </p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nvoid calculatePercentage(int voteResult[], int percentage[]);\n\nconst int NUMBER_OF_CANDIDATE = 10;\n\nint main()\n{\n    std::ifstream input(\"votes.txt\");\n\n    std::string candidates[NUMBER_OF_CANDIDATE];\n    int    voteResult[NUMBER_OF_CANDIDATE]; \n    int    percentage[NUMBER_OF_CANDIDATE];   \n\n    for (int i = 0; i &lt; NUMBER_OF_CANDIDATE; i++) {\n        input &gt;&gt; candidates[i] &gt;&gt; voteResult[i];  \n    } \n    calculatePercentage(voteResult, percentage); // error happened here.\n\n    return 0;\n}\n\nvoid calculatePercentage(int voteResult[], int percentage[])\n{\n    int totalVotes = 0;\n    for (int i = 0; i &lt; NUMBER_OF_CANDIDATE; i++) \n    {\n        totalVotes += voteResult[i];\n    }\n    for (int j = 0; j &lt; NUMBER_OF_CANDIDATE; j++) \n    {\n        double wk_percentage  = static_cast&lt;double&gt;(voteResult[j]) / totalVotes;\n        percentage[j] = static_cast&lt;int&gt;(wk_percentage*100);\n    }\n}\n</code></pre>\n\n<p>Also on <a href=\"http://ideone.com/yxecI9\" rel=\"nofollow noreferrer\">Ideone</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1485428297, "post_id": 41857508, "comment_id": 70925649, "body": "You did a &quot;typo&quot;: <code>voteResult</code> should be <code>vote</code>.You should have previous error similar to &quot;use of undeclared identifier &#39;voteResult&#39; (it happen that compiler may use <code>int</code> type to unknown variable to allow to provide more error in the file, and so the incompatible type). Look at the full build log and not only to the &quot;resume error part&quot;."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1485428390, "post_id": 41857508, "comment_id": 70925695, "body": "BTW, That is not an answer, You should instead edit your post (but care to not invalidate existing answers)."}], "tags": [], "owner": {"reputation": 23, "user_id": 7009223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acffab229b64eebd9cc2ebd36d4e2f42?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Alexander", "link": "https://stackoverflow.com/users/7009223/thomas-alexander"}, "is_accepted": false, "score": 1, "last_activity_date": 1485368525, "last_edit_date": 1485368525, "creation_date": 1485364167, "answer_id": 41857508, "question_id": 41856745, "link": "https://stackoverflow.com/questions/41856745/how-to-solve-the-error-invalid-conversion-from-int-to-int/41857508#41857508", "title": "How to solve the error: invalid conversion from &quot; int* &quot; to &quot; int &quot;", "body": "<p>Thanks for everyone's comment. I skipped some statements and made some typos when posting them.  I fixed them as follows. The only error occurred is that still cannot convert \" int* \" from \" int\". Just don't know how to solve it.  </p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nvoid calculatePercentage(int voteResult[],int percentage[]);\n\nconst int NUMBER_OF_CANDIDATE = 10;\n\nint main()\n    {     \n        ifstream input(\"votes.txt\",ios::in);\n\n\n        string candidates[NUMBER_OF_CANDIDATE];\n        int    vote[NUMBER_OF_CANDIDATE]; \n        int    percentage[NUMBER_OF_CANDIDATE];   \n\n        for (int i = 0; i &lt; NUMBER_OF_CANDIDATE; i++) {\n            input &gt;&gt; candidates[i] &gt;&gt; vote[i];  \n        } \n        calculatePercentage(voteResult, percentage); // error happened here.\n\n        return 0;\n    }\n\nvoid calculatePercentage(int voteResult[],int percentage[])\n{\n    int totalVotes = 0;\n        for (int i = 0; i &lt; NUMBER_OF_CANDIDATE; i++) \n        {\n            totalVotes += votes[i];\n        }\n        for (int j = 0; j &lt; NUMBER_OF_CANDIDATE; j++) \n        {\n            double wk_percentage  = static_cast&lt;double&gt;(votes[j])/totalVotes;\n            percentage[j]=static_cast&lt;int&gt;(wk_percentage*100);\n        }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7009223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acffab229b64eebd9cc2ebd36d4e2f42?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Alexander", "link": "https://stackoverflow.com/users/7009223/thomas-alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "accepted_answer_id": 41857015, "answer_count": 2, "score": -2, "last_activity_date": 1485368525, "creation_date": 1485361834, "last_edit_date": 1485366285, "question_id": 41856745, "link": "https://stackoverflow.com/questions/41856745/how-to-solve-the-error-invalid-conversion-from-int-to-int", "title": "How to solve the error: invalid conversion from &quot; int* &quot; to &quot; int &quot;", "body": "<p>Need some help with the problem.<br>\nWhen I compile my code below, it gives me this error:  </p>\n\n<blockquote>\n  <p>error: invalid conversion from \" <code>int*</code> \" to \" <code>int</code> \"</p>\n</blockquote>\n\n<p>I want to create a <code>calculatePercentage</code> function, so I can use the value when I call it.   </p>\n\n<pre><code>void calculatePercentage(int voteResult[],int percentage[])\n\nconst int NO_OF_CANDIDATE = 10;\n\nint main()\n    {     \n        ifstream input(\"votes.txt\",ios::in);\n\n        string candidates[NUMBER_OF_CANDIDATE];\n        int    voteResult[NUMBER_OF_CANDIDATE]; \n        int    percentage[NUMBER_OF_CANDIDATE];   \n\n        for (int i = 0; i &lt; NUMBER_OF_CANDIDATE; i++) {\n            input &gt;&gt; candidates[i] &gt;&gt; voteResult[i];  \n        } \n        calculatePercentage(voteResult, percentage); // error happened here.\n\n        return 0;\n    }\n\nvoid calculatePercentage(int voteResult[],int percentage[])\n{\n    int totalVotes = 0;\n        for (int i = 0; i &lt; NUMBER_OF_CANDIDATE; i++) \n        {\n            totalVotes += votes[i];\n        }\n        for (int j = 0; j &lt; NUMBER_OF_CANDIDATE; j++) \n        {\n            double wk_percentage  = static_cast&lt;double&gt;{votes[j])/totalVotes;\n            percentage[j]=static_cast&lt;int&gt;(wk_percentage*100);\n        }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "vectorization", "sse", "avx"], "comments": [{"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 8, "creation_date": 1485363466, "post_id": 41856615, "comment_id": 70898340, "body": "You made a very common (but not obvious) benchmarking mistake. You forgot to initialize the memory from <code>malloc()</code>. So the AVX test (which runs first) is actually page-faulting."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1485363659, "post_id": 41856615, "comment_id": 70898462, "body": "Once you fix that, you&#39;ll run into this issue: <a href=\"http://stackoverflow.com/questions/18159455/why-vectorizing-the-loop-does-not-have-performance-improvement\" title=\"why vectorizing the loop does not have performance improvement\">stackoverflow.com/questions/18159455/&hellip;</a>"}, {"owner": {"reputation": 41, "user_id": 7469977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c11e32b440c90d8bfea1d9fd9924244?s=128&d=identicon&r=PG&f=1", "display_name": "jane lorasz", "link": "https://stackoverflow.com/users/7469977/jane-lorasz"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1485367387, "post_id": 41856615, "comment_id": 70900855, "body": "@Mysticial Right! I benchmark now with hot memory and get about the same performance on every vectorization! Thanks."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1485504311, "post_id": 41856615, "comment_id": 70960754, "body": "When I benchmark I usually do a cold run without timing first. E.g. in your code do one iteration <code>avx(a,b,res,1)</code> first before timing. Actually, depending on what you&#39;re doing I think it can be useful to report the cold and hot timing. If a function was only going to be called once it could be misleading to report only the hot time."}], "answers": [{"comments": [{"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 2, "creation_date": 1485363808, "post_id": 41857291, "comment_id": 70898566, "body": "This is has nothing to do with branch prediction. It&#39;s about page-commit. The first test is slower because the memory hasn&#39;t been committed yet so it page faults."}, {"owner": {"reputation": 89, "user_id": 3173538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d37aa2049dace4d7ff393ae02df76fe?s=128&d=identicon&r=PG&f=1", "display_name": "JeppeSRC", "link": "https://stackoverflow.com/users/3173538/jeppesrc"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1485364044, "post_id": 41857291, "comment_id": 70898739, "body": "Ah sorry my bad. Thanks."}, {"owner": {"reputation": 680, "user_id": 6599487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88ddd2b21482646c3a8acade4555c324?s=128&d=identicon&r=PG&f=1", "display_name": "Holmz", "link": "https://stackoverflow.com/users/6599487/holmz"}, "edited": false, "score": 0, "creation_date": 1485373657, "post_id": 41857291, "comment_id": 70904463, "body": "Which begs the question as to why put the effort in to explicitly use AVX when the compiler writers probably do it better than the average person? Sure if the compiler cannot auto-vectorise then one may need to, but there is an assumption the writing the instructions one&#39;s self somehow gets better code than the compiler can get, which is clearly not a certainty."}, {"owner": {"reputation": 41, "user_id": 7469977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c11e32b440c90d8bfea1d9fd9924244?s=128&d=identicon&r=PG&f=1", "display_name": "jane lorasz", "link": "https://stackoverflow.com/users/7469977/jane-lorasz"}, "reply_to_user": {"reputation": 680, "user_id": 6599487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88ddd2b21482646c3a8acade4555c324?s=128&d=identicon&r=PG&f=1", "display_name": "Holmz", "link": "https://stackoverflow.com/users/6599487/holmz"}, "edited": false, "score": 0, "creation_date": 1485377778, "post_id": 41857291, "comment_id": 70906690, "body": "@Holmz You are totally right. But it was more of a basic question about vectorizing sums and their possibility to vectorize (and why not)."}, {"owner": {"reputation": 680, "user_id": 6599487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88ddd2b21482646c3a8acade4555c324?s=128&d=identicon&r=PG&f=1", "display_name": "Holmz", "link": "https://stackoverflow.com/users/6599487/holmz"}, "edited": false, "score": 0, "creation_date": 1485464340, "post_id": 41857291, "comment_id": 70947910, "body": "Basically the origional question wa about benchmarking, and the compiler was generating faster code than you were. This is also common for the rest of us, unless we spend the time write the SSE/AVX which is like assembly. It is always faster to get something going in a higher level language, and unless we are benchmarking, or going for the fastest, or have a case the compiler cannot do... Then we have no choice but to do it ourselves."}], "tags": [], "owner": {"reputation": 89, "user_id": 3173538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d37aa2049dace4d7ff393ae02df76fe?s=128&d=identicon&r=PG&f=1", "display_name": "JeppeSRC", "link": "https://stackoverflow.com/users/3173538/jeppesrc"}, "is_accepted": false, "score": -2, "last_activity_date": 1485363462, "last_edit_date": 1495542259, "creation_date": 1485363462, "answer_id": 41857291, "question_id": 41856615, "link": "https://stackoverflow.com/questions/41856615/avx-sse-sums-are-slower-than-gcc-autovectorization/41857291#41857291", "title": "AVX, SSE sums are slower than gcc autovectorization", "body": "<p>It has most likely to do with branch prediction (read <a href=\"https://stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-arraythis\">Why is it faster to process a sorted array than an unsorted array?</a> for a more detailed explanation ). On my i5-4200U I get this when processing 100000000 doubles in this order AVX, SSE, SER.</p>\n\n<p><code>AVX     807 ms  0.123916 GFLOP/s\nSSE     215 ms  0.465116 GFLOP/s\nSER     287 ms  0.348432 GFLOP/s</code></p>\n\n<p>But if I change it to SER, AVX, SSE I get this</p>\n\n<p><code>SER     753 ms  0.132802 GFLOP/s\nAVX     225 ms  0.444444 GFLOP/s\nSSE     196 ms  0.510204 GFLOP/s</code></p>\n\n<p>Why it's so far from the peak performance of your CPU I don't know.</p>\n"}, {"tags": [], "owner": {"reputation": 445, "user_id": 401566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf7e3b7f82d7055b499da0c3b6f1ec86?s=128&d=identicon&r=PG", "display_name": "Yichao Zhou", "link": "https://stackoverflow.com/users/401566/yichao-zhou"}, "is_accepted": false, "score": 0, "last_activity_date": 1516836216, "creation_date": 1516836216, "answer_id": 48433317, "question_id": 41856615, "link": "https://stackoverflow.com/questions/41856615/avx-sse-sums-are-slower-than-gcc-autovectorization/48433317#48433317", "title": "AVX, SSE sums are slower than gcc autovectorization", "body": "<p>You application is likely to be memory-bounded rather than CPU-bounded.  In other word, the memory bandwidth is the bottleneck so vectorization does not help much here.</p>\n"}], "owner": {"reputation": 41, "user_id": 7469977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c11e32b440c90d8bfea1d9fd9924244?s=128&d=identicon&r=PG&f=1", "display_name": "jane lorasz", "link": "https://stackoverflow.com/users/7469977/jane-lorasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 628, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1516836216, "creation_date": 1485361424, "question_id": 41856615, "link": "https://stackoverflow.com/questions/41856615/avx-sse-sums-are-slower-than-gcc-autovectorization", "title": "AVX, SSE sums are slower than gcc autovectorization", "body": "<p>I have a strange occurence and can't really explain that. I am trying to write some numerical codes and thus benchmark some implementations. I just wanted to benchmark some vector additions with <em>SSE</em> and <em>AVX</em> as well as gcc auto vectorization. To test that, I have used and modified the code below.</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;immintrin.h&gt;\n\n#include \"../../time/timer.hpp\"\n\n\nvoid ser(double* a, double* b, double* res, int size){\n for(int i(0); i &lt; size; i++ )\n {\n    res[i] = a[i] + b[i];\n }\n}\n\nvoid sse(double* a, double* b, double* res, int size){\n for (int i(0); i &lt; (size &amp; ~0x1); i += 2 )\n {\n    const __m128d kA2   = _mm_load_pd( &amp;a[i] );\n    const __m128d kB2   = _mm_load_pd( &amp;b[i] );\n    const __m128d kRes = _mm_add_pd( kA2, kB2 );\n    _mm_store_pd( &amp;res[i], kRes );\n }\n}\n\nvoid avx(double* a, double* b, double* res, int size){\nfor (int i(0); i &lt; (size &amp; ~0x3); i += 4 )\n {\n    const __m256d kA4   = _mm256_load_pd( &amp;a[i] );\n    const __m256d kB4   = _mm256_load_pd( &amp;b[i] );\n    const __m256d kRes = _mm256_add_pd( kA4, kB4 );\n    _mm256_store_pd( &amp;res[i], kRes );\n }\n}\n\n\n#define N 1e7*64\n\nint main(int argc, char const *argv[])\n{ \n\n\n double* a = (double*)_mm_malloc(N*sizeof(double), 64);\n double* b = (double*)_mm_malloc(N*sizeof(double), 64);\n double* res = (double*)_mm_malloc(N*sizeof(double), 64);\n\n Timer tm;\n\n tm.start();\n avx(a,b,res,N);\n tm.stop();\n std::cout&lt;&lt;\"AVX\\t\"&lt;&lt;tm.elapsed()&lt;&lt;\" ms\\t\"\n          &lt;&lt;1e-6*N/tm.elapsed() &lt;&lt;\" GFLOP/s\"&lt;&lt;std::endl;\n\n tm.start();\n sse(a,b,res,N);\n tm.stop();\n std::cout&lt;&lt;\"SSE\\t\"&lt;&lt;tm.elapsed()&lt;&lt;\" ms\\t\"\n          &lt;&lt;1e-6*N/tm.elapsed() &lt;&lt;\" GFLOP/s\"&lt;&lt;std::endl;\n\n tm.start();\n ser(a,b,res,N);\n tm.stop();\n std::cout&lt;&lt;\"SER\\t\"&lt;&lt;tm.elapsed()&lt;&lt;\" ms\\t\"\n          &lt;&lt;1e-6*N/tm.elapsed() &lt;&lt;\" GFLOP/s\"&lt;&lt;std::endl;\n return 0;\n}\n</code></pre>\n\n<p>For the timings and calculated GFLOP/S, I get:</p>\n\n<pre><code>./test3\nAVX 1892 ms 0.338266 GFLOP/s\nSSE 408  ms 1.56863 GFLOP/s\nSER 396  ms 1.61616 GFLOP/s\n</code></pre>\n\n<p>which is clearly really slow compared to the <a href=\"https://www.pugetsystems.com/labs/hpc/Skylake-S-i7-6700K-and-i5-6600K-for-compute-maybe-697/\" rel=\"nofollow noreferrer\" title=\"peak perfomance\">peak performance</a> of about 170 GFLOP/s of my i5 6600K.</p>\n\n<p>Am I missing anything important here? I know that vector addition on a CPU is not the best idea, but these results are really bad. Thanks for any clue.</p>\n"}, {"tags": ["c++", "c++11", "templates", "boost", "universal-reference"], "comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1485361226, "post_id": 41856449, "comment_id": 70896749, "body": "You know that you&#39;re passing an <code>int</code> to <code>doThings</code> right?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1485361508, "post_id": 41856449, "comment_id": 70896939, "body": "You might use lambda with <i>simpler</i> syntax: <code>[&amp;](){ c.doThings(std::forward&lt;A&gt;(a));};</code>."}, {"owner": {"reputation": 48, "user_id": 2757681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4a50a84251d9346d779a92b66e556b1?s=128&d=identicon&r=PG&f=1", "display_name": "zephyrJ", "link": "https://stackoverflow.com/users/2757681/zephyrj"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1485361602, "post_id": 41856449, "comment_id": 70897011, "body": "@Jonathan Mee Yes, is that an issue?  I realize now that the getInt is an odd choice of name here - I had been messing around with various permutations for the last our or so and the fact that the function has nothing to do with getting an int has slipped through my thinking. The name is irrelevant to the intention here"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1485362159, "post_id": 41856449, "comment_id": 70897396, "body": "Any reason to not do <code>c.getThings(std::forward&lt;A&gt;(a));</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 48, "user_id": 2757681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4a50a84251d9346d779a92b66e556b1?s=128&d=identicon&r=PG&f=1", "display_name": "zephyrJ", "link": "https://stackoverflow.com/users/2757681/zephyrj"}, "edited": false, "score": 0, "creation_date": 1485362327, "post_id": 41856670, "comment_id": 70897507, "body": "Both of your assumptions are correct. Sorry, I realize my usage of int here was misleading in retrospect"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 2, "last_activity_date": 1485362862, "last_edit_date": 1495542252, "creation_date": 1485361644, "answer_id": 41856670, "question_id": 41856449, "link": "https://stackoverflow.com/questions/41856449/how-to-boostbind-a-template-member-function-which-takes-a-universal-reference/41856670#41856670", "title": "How to boost::bind a template member function which takes a universal reference as a parameter", "body": "<p>I would suggest against using <code>boost::bind</code>, as <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\"><em>lambda expressions</em></a> can be used to cleanly bind arguments <em>(avoiding many pitfalls of <code>bind</code> explained in <a href=\"https://www.youtube.com/watch?v=zt7ThwVfap0\" rel=\"nofollow noreferrer\">this talk by STL</a>)</em>.</p>\n\n<hr>\n\n<p>I'm assuming that you want to:</p>\n\n<ul>\n<li><p><strong>Capture <code>a</code> by move</strong> if an <em>rvalue-reference</em> is passed to <code>getInt</code>.</p></li>\n<li><p><strong>Capture <code>a</code> by reference</strong> if an <em>lvalue-reference</em> is passed to <code>getInt</code>.</p></li>\n</ul>\n\n<p>I'm also assuming that:</p>\n\n<ul>\n<li><p><code>A</code> is not <code>int</code> in your real code, otherwise <em>perfect-forwarding</em> would not make sense.</p></li>\n<li><p>You want to avoid unnecessary copies of <code>a</code> or that <code>A</code> could be a <em>move-only</em> type.</p></li>\n<li><p>You only have access to C++11 <em>(and not to newer standards)</em>.</p></li>\n</ul>\n\n<p>If you need to <em>\"perfectly-capture\"</em> <code>a</code> <em>(i.e. capture-by-move if <code>A</code> is an rvalue-reference, capture-by-reference if <code>A</code> is an lvalue-reference)</em>, you need some sort of wrapper.</p>\n\n<p>Unfortunately <strong>this is non-trivial</strong>, even though it gets better in C++14 and C++17. Here's an example of how the final syntax <em>could</em> look:</p>\n\n<pre><code>template&lt;typename A&gt;\nvoid getInt(child c, A&amp;&amp; a)\n{\n    // `a_wrapper` stores an `A&amp;` or an `A` depending on the value category\n    // of `a`. Copying it should not copy `a` - it should conditionally move \n    // it depending on the original value category of `a`.\n    auto a_wrapper = forward_capture_wrapper(std::forward&lt;A&gt;(a));\n\n    // `forward_like` retains information about `a`'s value category so that\n    // it can be used in the body of the lambda to forward the reference/value\n    // stored inside `a_wrapper`.\n    //                          vvvvvvvvvvvvvvv\n    [&amp;a, a_wrapper]{ c.doThings(forward_like&lt;A&gt;(a_wrapper.get()); }();\n    //                                          ^^^^^^^^^^^^^^^\n    // `a_wrapper.get()` returns a reference that can then be moved or passed\n    // to `c.doThings`.\n}\n</code></pre>\n\n<p>As you can see, you need a <em>template function</em> called <code>forward_capture_wrapper</code> that deals with \"perfect-capture\". You can find information on how to implement that in these resources:</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/8640393/move-capture-in-lambda\"><strong>\"Move capture in lambda\"</strong></a> - covers how to implement capture-by-move in C++11. This is trivial in C++14 thanks to generalized lambda captures.</p></li>\n<li><p><a href=\"https://vittorioromeo.info/index/blog/capturing_perfectly_forwarded_objects_in_lambdas.html\" rel=\"nofollow noreferrer\"><strong>\"capturing perfectly-forwarded objects in lambdas\"</strong></a> - this is an article I've written that covers how to implement \"perfect capture\" in C++14/17. It's a good starting point to understand the issue of \"perfect capture\" and it should be possible to convert the code to something C++11 compliant.</p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/26831382/capturing-perfectly-forwarded-variable-in-lambda\"><strong>\"Capturing perfectly-forwarded variable in lambda\"</strong></a> - this StackOverflow question I asked some time ago covers some ways of implementing \"perfect capture\" in C++14.</p></li>\n</ul>\n\n<p>By combining the resources above you should be able to implement a \"perfect capture wrapper\" in C++11.</p>\n\n<p>You also need a <code>forward_like</code> helper function that preserves the original value category of the <code>a</code> argument. You can find an implementation of that:</p>\n\n<ul>\n<li><p>In <a href=\"https://github.com/SuperV1234/vrm_core/blob/437a0afb35385250cd75c22babaeeecbfa4dcacc/include/vrm/core/type_traits/forward_like.hpp\" rel=\"nofollow noreferrer\">my <code>vrm_core</code> library</a>.</p></li>\n<li><p>In <a href=\"https://stackoverflow.com/a/29780197/598696\">this StackOverflow answer by T.C.</a>.</p></li>\n</ul>\n"}], "owner": {"reputation": 48, "user_id": 2757681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4a50a84251d9346d779a92b66e556b1?s=128&d=identicon&r=PG&f=1", "display_name": "zephyrJ", "link": "https://stackoverflow.com/users/2757681/zephyrj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 41856670, "answer_count": 1, "score": 1, "last_activity_date": 1485362862, "creation_date": 1485360909, "question_id": 41856449, "link": "https://stackoverflow.com/questions/41856449/how-to-boostbind-a-template-member-function-which-takes-a-universal-reference", "title": "How to boost::bind a template member function which takes a universal reference as a parameter", "body": "<p>I've been trying to use boost::bind to post a call to a member function onto an io_strand but have been getting errors. I have manged to create a simplistic equivalent example of what I am trying to do and have seen the same error in the following context:</p>\n\n<p>I have the following class containing the doThings() member function I want to call:</p>\n\n<pre><code>class base\n{\npublic:\n  int x = 1;\n\n  template&lt;typename B&gt;\n  void doThings(B&amp;&amp; b)\n  {}\n};\n</code></pre>\n\n<p>There is then a subclass of this (to accurately represent the scenario I am encountering my error - I don't think it makes a difference)</p>\n\n<pre><code>class child : public base\n{\n  int y = 2;\n};\n</code></pre>\n\n<p>I have the following code trying to make the boost::bind call:</p>\n\n<pre><code>template&lt;typename A&gt;\nvoid getInt(child c, A&amp;&amp; a)\n{\n  boost::bind((void(child::*)(A)) &amp;child::doThings, &amp;c, std::forward&lt;A&gt;(a))();\n}\n</code></pre>\n\n<p>And then this is being called as follows:</p>\n\n<pre><code>int main()\n{\n  child c = child();\n  getInt(c, 7);\n}\n</code></pre>\n\n<p>When I compile the above code I get the following error:</p>\n\n<blockquote>\n  <p>error: no matches converting function \u2018doThings\u2019 to type \u2018void (class\n  child::*)(int)\u2019</p>\n</blockquote>\n\n<hr>\n\n<p>If I change the function signature of doThings() to take a regular B type rather than a universal reference i.e.\n<code>B</code> rather than <code>B&amp;&amp;</code> then it compiles a runs with no issues.<br>\nI suspect my issue is something to with the cast I'm doing in getInt():  </p>\n\n<pre><code>(void(child::*)(A))\n</code></pre>\n\n<p>But I don't know what I would need to change it to. <code>A&amp;&amp;</code> wouldn't work in this context as I believe it would represent an r-value reference in that context. The compilation error I get when I try it seems to confirm this:  </p>\n\n<blockquote>\n  <p>error: cannot bind \u2018int\u2019 lvalue to \u2018int&amp;&amp;\u2019</p>\n</blockquote>\n\n<p>For completeness: if I don't attempt to perform a cast then I get the following compilation error:</p>\n\n<blockquote>\n  <p>error: no matching function for call to \u2018bind(unresolved overloaded\n  function type, child*, int)\u2019</p>\n</blockquote>\n\n<p>Could someone please enlighten me on what I would need to do in order to make my boost::bind call valid in this scenario please?</p>\n\n<p>I am using C++11</p>\n"}, {"tags": ["c++", "winapi", "visual-c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1485359977, "post_id": 41856046, "comment_id": 70895863, "body": "<i>Where</i> does your program fail? And what is the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms681381(v=vs.85).aspx\" rel=\"nofollow noreferrer\">error code</a> returned by <code>GetLastError</code>?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485360082, "post_id": 41856046, "comment_id": 70895937, "body": "In addition to what @Someprogrammerdude stated - use debugger to figure out where does your program fail."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1485360145, "post_id": 41856046, "comment_id": 70895984, "body": "I strongly recommend mastering the language with console-based applications. UI adds a very complicated level you do not need right now."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 1, "creation_date": 1485360557, "post_id": 41856046, "comment_id": 70896280, "body": "@Dan: I fail to see anything easier in writing a UWP application over <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff381399.aspx\" rel=\"nofollow noreferrer\">Learn to Program for Windows in C++</a>. Writing a UWP app requires that you know - in addition to C++ - XAML, COM, and either WRL or C++/CX."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1485361001, "post_id": 41856046, "comment_id": 70896602, "body": "@Dan: That doesn&#39;t even remotely address my concern: UWP is <b>harder</b> than a plain raw Win32 C application. And I have yet to find a project, where it isn&#39;t beneficial to know the Windows API. That has been true for C++/MFC, .NET, or UWP projects."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1485361381, "post_id": 41856046, "comment_id": 70896857, "body": "@Dan: I&#39;m well aware of C++/WinRT (and have been following the project for <b>years</b>). That doesn&#39;t make it any more accessible than a plain C++-ish Win32 C application. It&#39;s harder. <b>WAY</b> harder. Being modern badass C++ is beneficial in some situations. It&#39;s certainly not a prerequisite for a tool to learn a technology. (Besides, if you look at the code in the question, there is no C++ at all. It&#39;s all straight C code.)"}, {"owner": {"reputation": 535, "user_id": 2120666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5286b924ee914b1e479d0ff2db3f73f9?s=128&d=identicon&r=PG&f=1", "display_name": "user2120666", "link": "https://stackoverflow.com/users/2120666/user2120666"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1485363707, "post_id": 41856046, "comment_id": 70898504, "body": "@Dan: IInspectable is right, WINRT is harder to learn for beginner, that pure WINAPI in C. And your argument that something is up-to-date is nonsense, because without winapi,no WINRT exists. Sure, you may programming without knowledge win32, but your opinion is similar &quot; Knowing mathematics is useless, because we have calculators.&quot;"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "edited": false, "score": 0, "creation_date": 1485368730, "post_id": 41856046, "comment_id": 70901649, "body": "@Dan: Maybe you don&#39;t know how good a starting point the Windows API (in C) is, anytime, because you never went there? Your profile certainly indicates as much. And since - in your universe - only the latest tools should be used for learning, I take it that you aren&#39;t a big fan of XAML. Or the Live Visual Tree in your debugger. Neither one is available in C++/WinRT. That&#39;s modern, up-to-date for you."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 323, "user_id": 7095512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df95894542801ce147bfe794c089ed0?s=128&d=identicon&r=PG&f=1", "display_name": "Artur", "link": "https://stackoverflow.com/users/7095512/artur"}, "edited": false, "score": 1, "creation_date": 1485368194, "post_id": 41856224, "comment_id": 70901310, "body": "@Artur: That is what you comment said, too: <code>&#47;&#47; LPCTSTR, A null-terminated string or a class atom created by a previous call to the RegisterClass or RegisterClassEx function.</code>"}], "tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": true, "score": 2, "last_activity_date": 1485360323, "creation_date": 1485360323, "answer_id": 41856224, "question_id": 41856046, "link": "https://stackoverflow.com/questions/41856046/visual-c-window-creation-failed/41856224#41856224", "title": "Visual C++ Window creation failed", "body": "<p>You are registering a window class named <code>\"Window Class\"</code>, but try to create a window of class <code>\"MainsWClass\"</code>. That class is unknown. You need to create window of a window class that has previously been registered (either by yourself, or one of the pre-defined window classes like <code>\"BUTTON\"</code>).</p>\n"}], "owner": {"reputation": 323, "user_id": 7095512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df95894542801ce147bfe794c089ed0?s=128&d=identicon&r=PG&f=1", "display_name": "Artur", "link": "https://stackoverflow.com/users/7095512/artur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "accepted_answer_id": 41856224, "answer_count": 1, "score": 0, "last_activity_date": 1485360323, "creation_date": 1485359804, "last_edit_date": 1485360061, "question_id": 41856046, "link": "https://stackoverflow.com/questions/41856046/visual-c-window-creation-failed", "title": "Visual C++ Window creation failed", "body": "<p>I recently finished an introductory lesson on C++ and decided to jump into Visual C++ to try to make a little application.</p>\n\n<p>So far, all I want is to at least create and show a window, didn't go any further.\nI used many Microsoft Tutorials to get the code I have.</p>\n\n<p>Please note that I have many comments to help me understand what I am doing.\nI`m using Microsoft Visual Studio 2015</p>\n\n<pre><code>#include &lt;tchar.h&gt;  //A Win32 character string that can be used to describe ANSI, DBCS, or Unicode strings\n                    //Enclose the strings in _T() if an incompatibility error occures or (LPCWSTR)L\"\"\n#include &lt;windows.h&gt;\n\n// Global variable \nHINSTANCE hinst;\n\n//Function prototype for the window procedure so the inside of the program knows wazup\nLRESULT CALLBACK WinProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);\nBOOL InitApplication(HINSTANCE);\nBOOL InitInstance(HINSTANCE, int);\n\n//Instead of your usual console program, you get WinMain() instead of int main(int argc,char *argv[])\nINT WINAPI wWinMain(HINSTANCE hInst, //Instance of the program being executed\n    HINSTANCE hPrevInst,             //Previous instance, not used much anymore\n    LPWSTR lpCmdLine,                //Holds command line arguments\n    INT nShowCmd)                    //Tells how the program should start(minumised, maximised...)\n{\n    /*Steps to create a window:\n        - Register a window class\n        - Create the window\n        - Show the window\n        - Setup a callback procedure\n    */\n\n    //We can tell if the window class has failed if RegisterClassEx() returns 0. \n    //Fortunatley, there is another handy function, namely GetLastError(). \n    //GetLastError() will return an error code, which can then be used to track down the cause of the error.\n    //https://msdn.microsoft.com/en-us/library/ms681381.aspx\n    if (!InitApplication(hInst))\n    {\n        int nResult = GetLastError();\n        MessageBox(NULL,\n            _T(\"Window class creation failed\"),\n            _T(\"Window Class Failed\"),\n            MB_ICONERROR);\n        return 1;\n    }\n    //Window creation &amp; display:\n    if (!InitInstance(hInst, nShowCmd)){\n        int nResult = GetLastError();\n        MessageBox(NULL,\n            _T(\"Window creation failed\"),\n            _T(\"Window Creation Failed\"),\n            MB_ICONERROR);\n        return 1;\n    }\n\n    //The windows 'callback procedure' is necessary to continue\n    MSG msg;    //Message handler\n    ZeroMemory(&amp;msg, sizeof(MSG));\n    //Main loop for the program\n    while (GetMessage(&amp;msg, NULL, 0, 0))\n    {\n        TranslateMessage(&amp;msg);//translates virtual key messages to character messages\n        DispatchMessage(&amp;msg); //Sends any messages to the callvack procedure, so it can be handled\n    }\n    //Still returns an int!\n    return 0;\n}\n\nBOOL InitApplication(HINSTANCE hinstance)\n{\n    //The window class defines the overall 'look and feel' of the window that we want to create.\n    //First we create an instance of a window class\n    WNDCLASSEX wClass;\n    //For more about WNDCLASSEX: https://msdn.microsoft.com/en-us/library/ms633577(VS.85).aspx\n\n    //Clearing all the parameters of the WNDCLASSEX instance wClass to zero\n    ZeroMemory(&amp;wClass, sizeof(WNDCLASSEX));\n    //Now we are setting up all sotrts of parameters for our instance:\n    wClass.cbClsExtra = NULL;                       // cbClsExtra           Additional parameters\n    wClass.cbSize = sizeof(WNDCLASSEX);             // cbSize               Specifies the size of the window class\n    wClass.cbWndExtra = NULL;                       // cbWndExtra           Additional parameters\n    wClass.hbrBackground = (HBRUSH)COLOR_WINDOW;    // hbrBackground        Sets background color for the window\n    wClass.hCursor = LoadCursor(NULL, IDC_ARROW);   // hCursor              The cursor that will appear in the window\n    wClass.hIcon = NULL;                            // hIcon                Icon for the window\n    wClass.hIconSm = NULL;                          // hIconSm              Small icon for the window\n    wClass.hInstance = hinstance;                   // hInstance            Handle to the application instance\n    wClass.lpfnWndProc = (WNDPROC)WinProc;          // lpfnWndProc          The callback procedure (more on that later)\n    wClass.lpszClassName = _T(\"Window Class\");      // lpszClassName        The unique name of the window class\n    wClass.lpszMenuName = NULL;                     // lpszMenuName     Used for menus\n    wClass.style = CS_HREDRAW | CS_VREDRAW;         // style                The look and feel of the window\n\n    // Register the window class. \n    return RegisterClassEx(&amp;wClass);\n}\n\nBOOL InitInstance(HINSTANCE hinstance, int nCmdShow)\n{\n    // Save the application-instance handle. \n    hinst = hinstance;\n    // Create the main window. \n    //CreateWindowEx returns a HWND\n    HWND hwnd = CreateWindowEx(  // A \"handle\" is a generic identifier + like \"new\"\n        0,                       // DWORD, extended window style of the window being created https://msdn.microsoft.com/en-us/library/windows/desktop/ff700543(v=vs.85).aspx\n        _T(\"MainsWClass\"),       // LPCTSTR, A null-terminated string or a class atom created by a previous call to the RegisterClass or RegisterClassEx function.\n        _T(\"Sample\"),            // LPCTSTR, The window name.\n        WS_OVERLAPPEDWINDOW,     // DWORD, Style of the window created\n\n        CW_USEDEFAULT,           // int, X - default horizontal position \n        CW_USEDEFAULT,           // int, Y - default vertical position \n        CW_USEDEFAULT,           // int, nWidth - default width \n        CW_USEDEFAULT,           // int, nHeight - default height \n\n        (HWND)NULL,              // HWND, hWndParent - handle to the parrent or owner window of the window being created (opptional for pop-up)\n        (HMENU)NULL,             // HMENU, hMenu \n        hinstance,               // HINSTANCE, hInstance - A handle to the instance of the module to be associated with the window.\n        (LPVOID)NULL);           // LPVOID, Pointer to a value to be passed to the window through the CREATESTRUCT structure \n\n    //If the creation fails, returns FALSE\n    if (!hwnd)\n        return FALSE;\n    else{\n        // Show the window and send a WM_PAINT message to the window procedure. \n        ShowWindow(hwnd, nCmdShow);\n        UpdateWindow(hwnd);\n        return TRUE;\n    }\n}\n\n//callback procedure\nLRESULT CALLBACK WinProc(\n    HWND hWnd,      //Handle of the window that we want to monitor\n    UINT msg,       //Message we are receiving\n    WPARAM wParam,  //Additionnal info for the received message\n    LPARAM lParam)\n{\n    switch (msg)\n    {\n    case WM_DESTROY:    //Message sent to the application if the program was closed using the X on the top of the window\n    {\n        PostQuitMessage(0);\n        return 0;\n    }\n    break;\n    }\n\n    return DefWindowProc(hWnd, msg, wParam, lParam);\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "multithreading", "visual-studio-2015"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1485359518, "post_id": 41855870, "comment_id": 70895519, "body": "When it breaks follow the callstack up to the line of your code that is causing the bug.. That is the point of the debugger triggering a breakpoint."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1485364685, "post_id": 41855870, "comment_id": 70899131, "body": "off topic: <a href=\"http://en.cppreference.com/w/cpp/thread/async\" rel=\"nofollow noreferrer\"><code>std::async</code> may be of use to you.</a>"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7213908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f4bb435d65f458fb71e2925a16d273b?s=128&d=identicon&r=PG&f=1", "display_name": "Sela12", "link": "https://stackoverflow.com/users/7213908/sela12"}, "edited": false, "score": 0, "creation_date": 1485365229, "post_id": 41856028, "comment_id": 70899509, "body": "All I needed to do was to detach it."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 55, "user_id": 7213908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f4bb435d65f458fb71e2925a16d273b?s=128&d=identicon&r=PG&f=1", "display_name": "Sela12", "link": "https://stackoverflow.com/users/7213908/sela12"}, "edited": false, "score": 0, "creation_date": 1485366379, "post_id": 41856028, "comment_id": 70900232, "body": "Detach may seem to work, but you will encounter problems with this approach. For example, the thread will still output <code>&quot;DING DONG!!! DING DONG!!! Time&#39;s up!!!\\n&quot;</code> every time, perhaps right in the middle of another output."}, {"owner": {"reputation": 55, "user_id": 7213908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f4bb435d65f458fb71e2925a16d273b?s=128&d=identicon&r=PG&f=1", "display_name": "Sela12", "link": "https://stackoverflow.com/users/7213908/sela12"}, "edited": false, "score": 0, "creation_date": 1485522956, "post_id": 41856028, "comment_id": 70971518, "body": "The <code>&quot;DING DONG!!! DING DONG!!! Time&#39;s up!!!&#39;n&quot;</code> is just temporary. What I would like it to do is to stop the ability to input anything and end that player&#39;s turn. It&#39;s supposed to limit the time the player can input words."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 4, "last_activity_date": 1485359754, "creation_date": 1485359754, "answer_id": 41856028, "question_id": 41855870, "link": "https://stackoverflow.com/questions/41855870/visual-studio-2015-hitting-breakpoint/41856028#41856028", "title": "Visual studio 2015 hitting breakpoint", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/thread/thread/~thread\" rel=\"nofollow noreferrer\">std::thread::~thread</a> says this :</p>\n\n<blockquote>\n  <p>If *this has an associated thread (joinable() == true), std::terminate() is called.</p>\n</blockquote>\n\n<p>If you ever destroy a <code>std::thread</code> that is joinable, <code>std::terminate()</code> is called. Visual Studio kindly breaks on <code>std::terminate()</code> to allow you to inspect what went wrong. In <code>void table(int plr)</code> you create a thread with <code>std::thread t1(timer);</code> but you never join with it or detach from it.</p>\n\n<p>To solve this, your <code>timer</code> method should be changed to return immediately when the player has finished his turn, and then the main thread should join with it.</p>\n"}], "owner": {"reputation": 55, "user_id": 7213908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f4bb435d65f458fb71e2925a16d273b?s=128&d=identicon&r=PG&f=1", "display_name": "Sela12", "link": "https://stackoverflow.com/users/7213908/sela12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 658, "favorite_count": 0, "accepted_answer_id": 41856028, "answer_count": 1, "score": 0, "last_activity_date": 1485359754, "creation_date": 1485359318, "question_id": 41855870, "link": "https://stackoverflow.com/questions/41855870/visual-studio-2015-hitting-breakpoint", "title": "Visual studio 2015 hitting breakpoint", "body": "<p>When I run the code I get the messege <code>Scattegories.exe has triggered a breakpoint.</code>\nIt happens after I enter the 12th nuber into my array, but the array still has a \"spot\" for it.\nThere is also a thread so maybe it's that, but it seems to work fine.\nSo I don't know what it is, thank you.</p>\n\n<pre><code>// A program to keep track of points and time and to give a random letter for the game scattergories\n#include&lt;iostream&gt;\n#include&lt;ctime&gt;\n#include&lt;string&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\nusing std::cout;\nusing std::cin;\nusing std::string;\nusing std::getline;\nusing namespace std::chrono_literals;\nusing std::this_thread::sleep_for;\n\nvoid ltr()    //gives a random letter\n{\n    char letter;\n    letter = rand() % 26 + 65;         //assigns a random letter in ascii code to a char (resulting in a random letter)\n    cout &lt;&lt; \"The letter is \" &lt;&lt; letter &lt;&lt; \"\\n\";\n}\n\nvoid timer()\n{\n    cout &lt;&lt; \"You got 1.5 minutes to finish\\n\";    //Changing the duration of the timer is done by changing the value of 'i' in the \"for\" loop\n    for (int i = 10; i &gt; 0; i--)\n    {\n        sleep_for(1s);\n    }\n    cout &lt;&lt; \"DING DONG!!! DING DONG!!! Time's up!!!\\n\";\n}\n\nvoid table(int plr)\n{\n    string ctr[12] = { \"A cuntry\", \"A city\", \"An animal\", \"A plant\", \"A object\", \"A name\", \"Food\", \"Drink\", \"A game\", \"A movie\", \"A book\", \"A famous person\" };\n    string lst[6][12];           //first dimantion: how many players. second dimantion: how many catagories, third dimantion(if added) will be the round\n    cin.ignore();                  //To avoid the \"getline\" reading the last input\n    for (int x = 0; x&lt;plr; x++)       //the player changes only after the previus player finishes\n    {\n        std::thread t1(timer);       //gives time to write the words. Optimaly it would run in the background while each player writes the words.\n        for (int i = 0; i&lt;12; i++)        //changing catagory\n        {\n            cout &lt;&lt; ctr[i] &lt;&lt; \": \";\n            getline(cin, lst[x][i]);\n        }\n        system(\"cls\");\n        cout &lt;&lt; \"Next player\\n\";\n    }\n    for (int x = 0; x&lt;plr; x++)                   //this part (the whole \"for\" loop) is for confirming evreything is writen down\n    {\n        cout &lt;&lt; \"Player number \" &lt;&lt; x + 1 &lt;&lt; \": \";\n        for (int i = 0; i&lt;12; i++)\n        {\n            cout &lt;&lt; lst[x][i] &lt;&lt; \"    \";\n        }\n        cout &lt;&lt; \"\\n\";\n    }\n    sleep_for(5s);\n}\n\nint points()        //points gained per round\n{\n    int a, b, c, sum;\n    cout &lt;&lt; \"How many sections only you got?\\n\";          //worth 15 points\n    cin &gt;&gt; a;\n    cout &lt;&lt; \"How many words only you got?\\n\";       //worth 10 points\n    cin &gt;&gt; b;\n    cout &lt;&lt; \"How many words you and another person got?\\n\";    //worth 5 points\n    cin &gt;&gt; c;\n    sum = a * 15 + b * 10 + c * 5;\n    return sum;           //Note: It doesn't matter how many sections there are.\n}\n\nint act()    //running the program\n{\n    int Players, Points[6];\n    cout &lt;&lt; \"How many people are playing? (Up to six players)\";\n    cin &gt;&gt; Players;\n    ltr();\n    table(Players);\n    //Points = points();\n    cout &lt;&lt; \"You have earned \" &lt;&lt; Points &lt;&lt; \" this round\\n\\n\";\n    return 1;\n}\n\nint main()\n{\n    auto start = std::chrono::high_resolution_clock::now();\n    srand(time(NULL));    //gives a differant pattern of letters every time\n    int Points;\n    Points = act();\n    for (;;)          //inf loop\n    {\n        int ph;\n        cout &lt;&lt; \"Press 1 to continue or anything else to stop\\n\";\n        cin &gt;&gt; ph;\n        if (ph == 1)\n        {\n            Points += act();    //keeping score of the rounds\n        }\n        else\n        {\n            auto end = std::chrono::high_resolution_clock::now();\n            break;\n        }\n    }\n    cout &lt;&lt; \"You have earned a total of \" &lt;&lt; Points &lt;&lt; \" great job!\";\n    sleep_for(5s);       //time to read the last text\n    return 0;\n}\n\n/* \n   To do list:\n   -Convert to arduino\n   -Make timer work in background of of table\n   -Check if words in the table (for differant players) are the same and give points accordingly\n   -Check if words are actual words (connect an online dictonary?)\n   -Make interface? (if possible and I have time to learn how)\n   -Think of what to do with Hardwear\n   -Comment rest of the code\n*/\n</code></pre>\n"}, {"tags": ["c++", "sockets"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485359459, "post_id": 41855865, "comment_id": 70895478, "body": "It <i>might</i> free up some resources used for sending? At the very least the socket descriptor itself will be free&#39;d up. I don&#39;t really see a reason for it though, not in the case of the program you link to."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1485389368, "post_id": 41855865, "comment_id": 70911503, "body": "Your question contains a common, but serious, confusion. You say &quot;it recommends closing down the sending side of the socket&quot;. No, it does not. Sockets don&#39;t have sides. It recommends closing down the sending side of the <i>connection</i> that the socket refers to. Once you realize how important this difference is, you&#39;ll see that you have no choice. The <code>closesocket</code> function is an operation on a socket, not a connection. If you want to close a connection normally, what alternative do you have?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1485389383, "post_id": 41855865, "comment_id": 70911508, "body": "@Someprogrammerdude The socket descriptor itself will certainly <i>not</i> be freed up. Otherwise the following close (a) couldn&#39;t possibly work and (b) would be pointless, which it isn&#39;t."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1485404511, "post_id": 41855865, "comment_id": 70916106, "body": "@EJP True, must have had a brainfart."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1485359817, "creation_date": 1485359817, "answer_id": 41856050, "question_id": 41855865, "link": "https://stackoverflow.com/questions/41855865/why-should-i-use-shutdown-before-closing-a-socket/41856050#41856050", "title": "Why should I use shutdown() before closing a socket?", "body": "<p>There are no specific resources associated with sending or receiving operation on the socket, the socket is either used or closed. There reason for shutdown is not related to resource-management. Shutting down the socket is implementation of so-called graceful shutdown protocol, which allow both sides of the communication to realize the connection is going down and allows to minimize loss of data.</p>\n"}, {"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1485389234, "post_id": 41863900, "comment_id": 70911472, "body": "Actually, <code>closesocket</code> will only do it if you&#39;re closing the last reference to a connection. If you&#39;re trying to shut down the connection, only calling <code>shutdown</code> will guarantee that you do it and find out if it worked. The <code>closesocket</code> function may succeed and do nothing to the connection at all."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1485389450, "post_id": 41863900, "comment_id": 70911528, "body": "@DavidSchwartz: I assume you are referring to multiple references of a connection via use of <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms741565.aspx\" rel=\"nofollow noreferrer\"><code>WSADuplicateSocket()</code></a>? Otherwise, I have no idea what you mean."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1485390065, "post_id": 41863900, "comment_id": 70911713, "body": "Unless linger is <i>enabled</i> with a zero timeout, <i>or</i> there is unread pending data in your socket receive buffer. This case of synchronized closes is rather specialized, and not in itself a sufficient reason to recommend <code>shutdown()</code> universally. I&#39;ve never used it."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1485390716, "post_id": 41863900, "comment_id": 70911902, "body": "@RemyLebeau That&#39;s the most common way you can wind up with more than one reference to a connection. It can also happen &quot;under the covers&quot; without the application&#39;s knowledge. But the point is that <code>closesocket</code> is not specified to shut down the connection, just close the socket."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1485391291, "post_id": 41863900, "comment_id": 70912043, "body": "@DavidSchwartz: &quot;<i><code>closesocket</code> is not specified to shut down the connection</i>&quot; - the official <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms737582.aspx\" rel=\"nofollow noreferrer\">documentation</a> says otherwise."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1485391704, "post_id": 41863900, "comment_id": 70912137, "body": "@DavidSchwartz Under the covers how? Can you give an example?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1485392580, "post_id": 41863900, "comment_id": 70912344, "body": "@EJP What in the documentation do you think says that <code>closesocket</code> is going to shut down the connection (other than obvious cases that assume it wasn&#39;t duplicated)? There are documented cases of filters and other types of firewall/antivirus type applications duplicating sockets inside a process, causing applications that expected <code>closesocket</code> to trigger a clean shutdown to not get the errors they expected."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1485392697, "post_id": 41863900, "comment_id": 70912377, "body": "See the fourth paragraph of <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms738547.asp\" rel=\"nofollow noreferrer\">this document</a> that tries to clear up this confusion. &quot;In Windows Sockets, both the shutdown function, and the WSASendDisconnect function can be used to initiate a shutdown sequence, while the closesocket function is used to deallocate socket handles and free up any associated resources.&quot; Regardless, it is trivially observable fact that <code>closesocket</code> is not guaranteed to initiate a shutdown of the underlying connection."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1485397295, "post_id": 41863900, "comment_id": 70913513, "body": "@DavidSchwartz: that link is broken: &quot;<i>We&#39;re sorry, the page you requested cannot be found.</i>&quot;"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1485398646, "post_id": 41863900, "comment_id": 70913843, "body": "@RemyLebeau Bummer. Try <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms738547(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms7&zwnj;&#8203;38547(v=vs.85).aspx</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1485401196, "post_id": 41863900, "comment_id": 70914367, "body": "@DavidSchwartz same document that is linked to in my answer."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1485407911, "post_id": 41863900, "comment_id": 70916939, "body": "@DavidSchwartz Where did I say it would? Why are you even asking?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1485409075, "post_id": 41863900, "comment_id": 70917241, "body": "@EJP I&#39;m just trying to get the false statement at the end of this answer corrected. Read the comment thread from the beginning."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1485469055, "post_id": 41863900, "comment_id": 70950344, "body": "@DavidSchwartz But why addess that question to me? I didn&#39;t make the statement."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 6, "last_activity_date": 1485477441, "last_edit_date": 1485477441, "creation_date": 1485388855, "answer_id": 41863900, "question_id": 41855865, "link": "https://stackoverflow.com/questions/41855865/why-should-i-use-shutdown-before-closing-a-socket/41863900#41863900", "title": "Why should I use shutdown() before closing a socket?", "body": "<p>The answer is in the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740481.aspx\" rel=\"noreferrer\"><code>shutdown()</code></a> documentation:</p>\n\n<blockquote>\n  <p>If the how parameter is <code>SD_SEND</code>, subsequent calls to the <code>send</code> function are disallowed. <strong>For TCP sockets, a <code>FIN</code> will be sent after all data is sent and acknowledged by the receiver</strong>.</p>\n  \n  <p>...</p>\n  \n  <p><strong>To assure that all data is sent and received on a connected socket before it is closed, an application should use <code>shutdown</code> to close connection before calling <code>closesocket</code></strong>. One method to wait for notification that the remote end has sent all its data and initiated a graceful disconnect uses the <code>WSAEventSelect</code> function as follows :</p>\n  \n  <ol>\n  <li>Call <code>WSAEventSelect</code> to register for <code>FD_CLOSE</code> notification.</li>\n  <li><strong>Call <code>shutdown</code> with <code>how=SD_SEND</code></strong>.</li>\n  <li>When <code>FD_CLOSE</code> received, call the <code>recv</code> or <code>WSARecv</code> until the function completes with success and indicates that zero bytes were received. If <code>SOCKET_ERROR</code> is returned, then the graceful disconnect is not possible.</li>\n  <li>Call <code>closesocket</code>.</li>\n  </ol>\n  \n  <p>Another method to wait for notification that the remote end has sent all its data and initiated a graceful disconnect uses overlapped receive calls follows :</p>\n  \n  <ol>\n  <li><strong>Call <code>shutdown</code> with <code>how=SD_SEND</code></strong>.</li>\n  <li>Call <code>recv</code> or <code>WSARecv</code> until the function completes with success and indicates zero bytes were received. If <code>SOCKET_ERROR</code> is returned, then the graceful disconnect is not possible.</li>\n  <li>Call <code>closesocket</code>.</li>\n  </ol>\n  \n  <p>...</p>\n  \n  <p>For more information, see the section on <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms738547.aspx\" rel=\"noreferrer\">Graceful Shutdown, Linger Options, and Socket Closure</a>.</p>\n</blockquote>\n\n<p>In other words, at least for TCP, calling <code>shutdown(SD_SEND)</code> notifies the peer that you are done sending any more data, and that you will likely be closing your end of the connection soon.  Preferably, the peer will also do the same courtesy for you.  This way, both peers can know the connection was closed intentionally on both ends.  This is known as a <em>graceful</em> disconnect, and not an <em>abortive</em> or <em>abnormal</em> disconnect.</p>\n\n<p>By default, if you do not call <code>shutdown(SD_SEND)</code>, <code>closesocket()</code> will attempt to perform a graceful shutdown for you <em>UNLESS</em> the socket's <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms739165.aspx\" rel=\"noreferrer\">linger</a> option is disabled.  It is best not to rely on this behavior, you should always call <code>shutdown()</code> yourself before calling <code>closesocket()</code>, unless you have good reason not to.</p>\n"}, {"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1485478041, "post_id": 41864023, "comment_id": 70953337, "body": "Don&#39;t you pretty much always want to achieve a synchronized close? I don&#39;t know that I&#39;ve ever come across a case where I didn&#39;t want a synchronized close. And what about the case where you want to log an error if one occurs during the teardown process? Your answer makes the 95% case sound like the exception!"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1485478814, "post_id": 41864023, "comment_id": 70953505, "body": "@DavidSchwartz No, I don&#39;t pretty much always want to achieve a synchronised close. I doubt that I&#39;ve ever either coded one or even seen one, in over 25 years of network programming. HTTP is the most commonly used application protocol on the planet, and it doesn&#39;t use one. Neither does TLS. Neither does any other application protocol I&#39;ve ever looked into."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1485479728, "post_id": 41864023, "comment_id": 70953702, "body": "How do you cleanly shutdown an HTTP connection and log an error if you&#39;re unable to on Windows then? You can call <code>closesocket</code> and get no error and there&#39;s no guarantee the connection was cleanly shut down."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1485480608, "post_id": 41864023, "comment_id": 70953927, "body": "I mean, I&#39;ve been doing network programming for decades too, and the only cases where I could get away with <code>closesocket</code> without <code>shutdown</code> for TCP have been toy applications that didn&#39;t have to pass any kind of code review or meet any standards that solved one off problems. If nothing else, logging errors is pretty basic, and you just can&#39;t do it without calling <code>shutdown</code>. How often do you need a &quot;maybe shut the connection down, maybe don&#39;t&quot; function?!"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1485490612, "post_id": 41864023, "comment_id": 70956033, "body": "@DavidSchwartz Cleanly shutdown HTTP connections are not required by the protocol. HTTP semantics are sufficient: here are the headers, here is the content-length, here is that much response body, or else here is a chunked response, ... end of story, end of transaction. What happens after that I don&#39;t care. Especially if it is a connection reset because the user closed the browser page. Not my problem. From the client side I mostly use a connection pool, and as long as I get the response I don&#39;t care about a clean shutdown; the connection pool doesn&#39;t care either, as it isn&#39;t in use anyway."}, {"owner": {"reputation": 1804, "user_id": 1219247, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/62dc2334c60047d25a42b57b67f9f178?s=128&d=identicon&r=PG", "display_name": "CaptainCodeman", "link": "https://stackoverflow.com/users/1219247/captaincodeman"}, "edited": false, "score": 0, "creation_date": 1604699042, "post_id": 41864023, "comment_id": 114436453, "body": "@MarquisofLorne Can you please explain what #4 means?  If you have unread data in your read buffer, sending a shutdown causes it to be ignored but just closing the socket results in some processing of this data?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 1804, "user_id": 1219247, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/62dc2334c60047d25a42b57b67f9f178?s=128&d=identicon&r=PG", "display_name": "CaptainCodeman", "link": "https://stackoverflow.com/users/1219247/captaincodeman"}, "edited": false, "score": 0, "creation_date": 1604803953, "post_id": 41864023, "comment_id": 114457339, "body": "@CaptainCodeman If you have unread data in your read buffer and you close the socket, an RST will be issued instead of a FIN. <code>shutdown()</code> ensures the FIN is sent before the RST. May not actually help in the end, and you should always read all the data anyway."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 4, "last_activity_date": 1485408029, "last_edit_date": 1485408029, "creation_date": 1485389600, "answer_id": 41864023, "question_id": 41855865, "link": "https://stackoverflow.com/questions/41855865/why-should-i-use-shutdown-before-closing-a-socket/41864023#41864023", "title": "Why should I use shutdown() before closing a socket?", "body": "<p>It is unnecessary and redundant except in the following cases:</p>\n\n<ol>\n<li>You want to achieve a synchronized close as described in the documentation quoted by Remy Lebeau.</li>\n<li>The socket has been duplicated somehow, e.g. it is shared with child or parent processes or via the API, and you want to ensure the FIN is sent <em>now.</em></li>\n<li>Your application protocol requires that the peer receive a shutdown but needs to continue to send. This can arise for example when writing a proxy server.</li>\n<li>You may have unread data in your socket receive buffer and you want to close and ignore it and send a FIN before provoking a connection reset, which will happen when you close if there is unread pending data.</li>\n</ol>\n\n<p>These are the only cases I've ever come across in about 30 years: there may be others but I'm not aware of them.</p>\n"}], "owner": {"reputation": 189, "user_id": 7366915, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d614739c09387e64593dd77227e15594?s=128&d=identicon&r=PG&f=1", "display_name": "fdwfg wdfwdfv", "link": "https://stackoverflow.com/users/7366915/fdwfg-wdfwdfv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11320, "favorite_count": 2, "closed_date": 1485389691, "accepted_answer_id": 41863900, "answer_count": 3, "score": 7, "last_activity_date": 1485477441, "creation_date": 1485359305, "last_edit_date": 1485407090, "question_id": 41855865, "link": "https://stackoverflow.com/questions/41855865/why-should-i-use-shutdown-before-closing-a-socket", "closed_reason": "Duplicate", "title": "Why should I use shutdown() before closing a socket?", "body": "<p>On this MSDN page:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb530747.aspx\" rel=\"noreferrer\">Sending and Receiving Data on the Client</a></p>\n\n<p>It recommends closing the sending side of the socket by using:</p>\n\n<pre><code>shutdown(SOCK_ID, SD_SEND);\n</code></pre>\n\n<p>Why should I? </p>\n\n<p>Maybe I dont have to, and its just a recommendation?  Maybe its for saving memory?  Maybe for speed?</p>\n\n<p>Does anyone have an idea?</p>\n"}, {"tags": ["c++", "qt", "qmessagebox"], "comments": [{"owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 1, "creation_date": 1485360296, "post_id": 41855755, "comment_id": 70896098, "body": "If it&#39;s only about <i>the same declaration for both</i>, create <code>QMessageBox *mb = new QMessageBox()</code> instead and then when you need reinitialize - delete and create <code>new QMessageBox</code>"}, {"owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "edited": false, "score": 0, "creation_date": 1485360380, "post_id": 41855755, "comment_id": 70896164, "body": "For such simple usage, why not using static API?"}, {"owner": {"reputation": 13280, "user_id": 1431618, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a81ecc3b0b96e85bb9d40620e2f1851d?s=128&d=identicon&r=PG", "display_name": "Uli Gerhardt", "link": "https://stackoverflow.com/users/1431618/uli-gerhardt"}, "edited": false, "score": 0, "creation_date": 1485360870, "post_id": 41855755, "comment_id": 70896502, "body": "Couldn&#39;t you just delete <code>btn</code>?"}], "owner": {"reputation": 6472, "user_id": 259538, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8zSjE.png?s=128&g=1", "display_name": "panofish", "link": "https://stackoverflow.com/users/259538/panofish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485359013, "creation_date": 1485359013, "question_id": 41855755, "link": "https://stackoverflow.com/questions/41855755/how-to-reinitialize-qmessagebox-for-reuse", "title": "How to reinitialize QMessageBox for reuse", "body": "<p>I have some code whereby I need to create 2 occurrences of a QMessageBox in C++.\nI would like to use the same declaration for both.</p>\n\n<p>How can I reinitialize the original declare to avoid seeing the additional \"Proceed\" button on the second QMessageBox?  I do not want to use the removeButton method.</p>\n\n<p>Example logic:</p>\n\n<pre><code>QMessageBox mb;\nmb.setText(\"Shall we proceed?\");\nQAbstractButton *btn = mb.addButton(trUtf8(\"Proceed\"), QMessageBox::YesRole);\nint response = mb.exec();\n\nif (response == QMessageBox::Cancel) \n    return;\n\n.\n.\n.\n\nmb.setText(\"I don't want to see a Proceed button here\");\nresponse = mb.exec();\n\nif (response == QMessageBox::Cancel)\n    return;\n</code></pre>\n"}, {"tags": ["c++", "windows", "unix", "printf"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1485358667, "post_id": 41855571, "comment_id": 70894850, "body": "Can you overload function names with varargs?"}, {"owner": {"reputation": 20816, "user_id": 1020773, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/22784328a011350c18cbfcc27d28fb76?s=128&d=identicon&r=PG", "display_name": "H Bellamy", "link": "https://stackoverflow.com/users/1020773/h-bellamy"}, "reply_to_user": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1485358762, "post_id": 41855571, "comment_id": 70894923, "body": "@BoBTFish seems like you can, this does compile fine"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1485358939, "post_id": 41855571, "comment_id": 70895068, "body": "@HBellamy Unix and Windows are operating systems, not compilers.  Please mention the actual compilers used."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 6, "creation_date": 1485358958, "post_id": 41855571, "comment_id": 70895079, "body": "<code>vsnprintf</code> modifies <code>ap</code> so the two times you call it, you are passing a different <code>ap</code>."}, {"owner": {"reputation": 20816, "user_id": 1020773, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/22784328a011350c18cbfcc27d28fb76?s=128&d=identicon&r=PG", "display_name": "H Bellamy", "link": "https://stackoverflow.com/users/1020773/h-bellamy"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1485359055, "post_id": 41855571, "comment_id": 70895158, "body": "@PaulMcKenzie sorry, I thought that the actual runtime implementation of <code>vsnprintf</code> depends not on the compiler, but on the system?"}, {"owner": {"reputation": 20816, "user_id": 1020773, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/22784328a011350c18cbfcc27d28fb76?s=128&d=identicon&r=PG", "display_name": "H Bellamy", "link": "https://stackoverflow.com/users/1020773/h-bellamy"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1485359128, "post_id": 41855571, "comment_id": 70895204, "body": "@RaymondChen interesting, I&#39;ll investigate. If you answer this question, could you also clarify why I get 32 and 8 as outputs?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1485359405, "post_id": 41855571, "comment_id": 70895425, "body": "@HBellamy <a href=\"http://rextester.com/JRRU29394\" rel=\"nofollow noreferrer\">Here is gcc output</a>.  To constrast, here is <a href=\"http://rextester.com/FHZOWW88332\" rel=\"nofollow noreferrer\">VC++ 2015</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1485359556, "post_id": 41855571, "comment_id": 70895549, "body": "@HBellamy <i>could you also clarify why I get 32 and 8 as outputs</i> -- Implementing &quot;...&quot; is implementation-defined.  Unless you want to get into the weeds of how each compiler implements varargs, the answer is not that simple."}], "answers": [{"comments": [{"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1485386742, "post_id": 41856202, "comment_id": 70910774, "body": "Don&#39;t forget to <code>va_end(ap2)</code>."}], "tags": [], "owner": {"reputation": 688, "user_id": 5061918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4735ea55ee0777ded42ba58613e8029?s=128&d=identicon&r=PG&f=1", "display_name": "Marc Aldorasi", "link": "https://stackoverflow.com/users/5061918/marc-aldorasi"}, "is_accepted": true, "score": 4, "last_activity_date": 1485360258, "creation_date": 1485360258, "answer_id": 41856202, "question_id": 41855571, "link": "https://stackoverflow.com/questions/41855571/why-does-the-same-vsnprintf-code-output-differently-on-windows-msvc-and-unix/41856202#41856202", "title": "Why does the same vsnprintf code output differently on Windows (MSVC) and Unix (Clang)", "body": "<p>As @RaymondChen said in the comments, vsnprintf modifies ap.  If you want to reuse the va_list, you have to make a copy with va_copy:</p>\n\n<pre><code>static std::string getFormattedString(const char* fmt, va_list ap) {\n    va_list ap2;\n    va_copy(ap2, ap);\n    int count = vsnprintf(NULL, 0, fmt, ap) + 1;\n    std::cout &lt;&lt; count &lt;&lt; \": \";\n    if (count &lt;= 0) { return \"unable to format message\"; }\n\n    std::string result = std::string(count, '\\0');\n    if (vsnprintf(&amp;result[0], count, fmt, ap2) &lt; 0) { return \"error\";}\n    std::cout &lt;&lt; result.size() &lt;&lt; ' ' &lt;&lt; strlen(result.c_str()) &lt;&lt; '\\n';\n\n    return result;\n}\n</code></pre>\n\n<p>This will use the original list twice, and produce the correct result.</p>\n"}], "owner": {"reputation": 20816, "user_id": 1020773, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/22784328a011350c18cbfcc27d28fb76?s=128&d=identicon&r=PG", "display_name": "H Bellamy", "link": "https://stackoverflow.com/users/1020773/h-bellamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 41856202, "answer_count": 1, "score": 3, "last_activity_date": 1485360258, "creation_date": 1485358555, "last_edit_date": 1592644375, "question_id": 41855571, "link": "https://stackoverflow.com/questions/41855571/why-does-the-same-vsnprintf-code-output-differently-on-windows-msvc-and-unix", "title": "Why does the same vsnprintf code output differently on Windows (MSVC) and Unix (Clang)", "body": "<p>On Unix (Clang 3.8.1), this code outputs:</p>\n<blockquote>\n<p>6: 32</p>\n<p>8: a8e</p>\n</blockquote>\n<p>On Windows (MSVC 19.00.24215.1), this code outputs:</p>\n<blockquote>\n<p>6: 12345</p>\n<p>6: a12345e</p>\n</blockquote>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdarg.h&gt;\n\nstatic std::string getFormattedString(const char* fmt, va_list ap) {\n  int count = vsnprintf(NULL, 0, fmt, ap) + 1;\n  std::cout &lt;&lt; count &lt;&lt; &quot;: &quot;;\n  if (count &lt;= 0) { return &quot;unable to format message&quot;; }\n\n  std::string result = std::string(count, '\\0');\n  if (vsnprintf(&amp;result[0], count, fmt, ap) &lt; 0) { return &quot;error&quot;;}\n\n  return result;\n}\n\nstatic std::string getFormattedString(const char* fmt, ...) {\n  va_list ap;\n  va_start(ap, fmt);\n  std::string result = getFormattedString(fmt, ap);\n  va_end(ap);\n  return result;\n}\n\nint main(int argc, char *argv[]) {\n  std::cout &lt;&lt; getFormattedString(&quot;%d&quot;, 12345).c_str() &lt;&lt; &quot;\\n&quot;;\n  std::cout &lt;&lt; getFormattedString(&quot;a%de&quot;, 12345).c_str() &lt;&lt; &quot;\\n&quot;;\n\n  return 0;\n}\n</code></pre>\n<p>Interestingly, they both get the correct count, but on my Linux and OS X machines, this code outputs an incorrect result. What's causing this? Have I incurred UB somewhere?</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "overriding"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1485358464, "post_id": 41855479, "comment_id": 70894713, "body": "What, like <a href=\"http://en.cppreference.com/w/cpp/language/final\" rel=\"nofollow noreferrer\">the <code>final</code> specifier</a>?"}, {"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 0, "creation_date": 1485358469, "post_id": 41855479, "comment_id": 70894717, "body": "You want <code>final</code>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1485358588, "post_id": 41855479, "comment_id": 70894792, "body": "afaik <code>override</code> makes sure that the function is overriding the one in the base class, not the other way around... correct me if I am wrong..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1485358721, "post_id": 41855479, "comment_id": 70894891, "body": "... if you want to make sure that a function gets overridden you have to make it abstract (ie pure virtual)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1485359903, "post_id": 41855479, "comment_id": 70895814, "body": "I would edit the question to fix it, but I dont know how to do it without changing it completely, because the way you describe <code>override</code> is already the reverse of its actual meaning (but not in the sense you are looking for)"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1485360001, "post_id": 41855479, "comment_id": 70895872, "body": "If you don&#39;t want a function to be overridden, don&#39;t mark it <code>virtual</code>."}, {"owner": {"reputation": 653, "user_id": 4134398, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nP0zN.png?s=128&g=1", "display_name": "Draif Kroneg", "link": "https://stackoverflow.com/users/4134398/draif-kroneg"}, "edited": false, "score": 0, "creation_date": 1485360213, "post_id": 41855479, "comment_id": 70896037, "body": "what if there is massive inheritance tree that my class derives from? Going everywhere and checking everything for virtual is a massive work. If I find that I am overriding it - yes I will remove it. But I need a speedy and clear indicator that that is happening."}], "answers": [{"comments": [{"owner": {"reputation": 653, "user_id": 4134398, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nP0zN.png?s=128&g=1", "display_name": "Draif Kroneg", "link": "https://stackoverflow.com/users/4134398/draif-kroneg"}, "edited": false, "score": 0, "creation_date": 1485383736, "post_id": 41855534, "comment_id": 70909658, "body": "What if I have hundreds of parent classes in inheritance tree? I just want to make sure I am not accidentally overriding anything from there. I cannot go through all of them and mark each of them final. I just want to add small function and get quick compilation error if it overrides anything."}, {"owner": {"reputation": 653, "user_id": 4134398, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nP0zN.png?s=128&g=1", "display_name": "Draif Kroneg", "link": "https://stackoverflow.com/users/4134398/draif-kroneg"}, "edited": false, "score": 0, "creation_date": 1485383835, "post_id": 41855534, "comment_id": 70909697, "body": "In summary: &#39;overrides&#39; keyword is local to my current function, while &#39;final&#39; requires changes to me made potentially in many hundreds classes. It is not the same - It is doing quite a different thing from what I am asking."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 5, "last_activity_date": 1485358477, "creation_date": 1485358477, "answer_id": 41855534, "question_id": 41855479, "link": "https://stackoverflow.com/questions/41855479/is-there-reverse-of-override-specifier-in-c/41855534#41855534", "title": "Is there reverse of &#39;override&#39; specifier in C++?", "body": "<p>If you don't want a virtual function to be overridden in the derived class, you can use <a href=\"http://en.cppreference.com/w/cpp/language/final\" rel=\"noreferrer\">final</a>:</p>\n\n<blockquote>\n  <p>Specifies that a virtual function cannot be overridden in a derived class or that a class cannot be inherited from.</p>\n</blockquote>\n\n<p>e.g.</p>\n\n<pre><code>struct Base\n{\n    virtual void foo() final; // foo cannot be overridden in the derived class\n};\nstruct Derived : Base\n{\n    void foo();               // Error: foo cannot be overridden as it's final in Base\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 653, "user_id": 4134398, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nP0zN.png?s=128&g=1", "display_name": "Draif Kroneg", "link": "https://stackoverflow.com/users/4134398/draif-kroneg"}, "edited": false, "score": 1, "creation_date": 1485359441, "post_id": 41855539, "comment_id": 70895457, "body": "I want to make sure I am not overriding anything from parent classes"}, {"owner": {"reputation": 653, "user_id": 4134398, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nP0zN.png?s=128&g=1", "display_name": "Draif Kroneg", "link": "https://stackoverflow.com/users/4134398/draif-kroneg"}, "edited": false, "score": 1, "creation_date": 1485359464, "post_id": 41855539, "comment_id": 70895481, "body": "final helps only for classes that will derive from me"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 653, "user_id": 4134398, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nP0zN.png?s=128&g=1", "display_name": "Draif Kroneg", "link": "https://stackoverflow.com/users/4134398/draif-kroneg"}, "edited": false, "score": 0, "creation_date": 1485359590, "post_id": 41855539, "comment_id": 70895575, "body": "@DraifKroneg: you can mark the parent class&#39;s methods as <code>final</code>. If you do not have access to the parent class&#39;s definition there&#39;s no way of preventing overriding."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 7, "last_activity_date": 1485358483, "creation_date": 1485358483, "answer_id": 41855539, "question_id": 41855479, "link": "https://stackoverflow.com/questions/41855479/is-there-reverse-of-override-specifier-in-c/41855539#41855539", "title": "Is there reverse of &#39;override&#39; specifier in C++?", "body": "<blockquote>\n  <p>I want to mark it with something to make sure it will not get accidentally overwritten.</p>\n</blockquote>\n\n<p>You can use the <a href=\"http://en.cppreference.com/w/cpp/language/final\"><code>final</code> specifier</a>. Example from <strong>cppreference</strong>:</p>\n\n<pre><code>struct Base\n{\n    virtual void foo();\n};\n\nstruct A : Base\n{\n    void foo() final; // A::foo is overridden and it is the final override\n    void bar() final; // Error: non-virtual function cannot be overridden or be final\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "is_accepted": false, "score": 0, "last_activity_date": 1485358819, "creation_date": 1485358819, "answer_id": 41855678, "question_id": 41855479, "link": "https://stackoverflow.com/questions/41855479/is-there-reverse-of-override-specifier-in-c/41855678#41855678", "title": "Is there reverse of &#39;override&#39; specifier in C++?", "body": "<p><code>final</code> is the keyword you are looking for.</p>\n\n<p>Remark: Be aware that <code>override</code> does not \"make sure that the function will get overriden\" as you put it. <code>override</code> in your <strong>derived</strong> class does make sure that you actually override a method of a base class, and not just introduce a new method that is similar to a virtual method of the base class.</p>\n\n<p>To make sure that a method is overriden it would have to be pure virtual in your base class.</p>\n\n<p>Also, <code>static</code> works exactly the other way round: static methods belong to the class, non-static methods need an object to be called.</p>\n"}], "owner": {"reputation": 653, "user_id": 4134398, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nP0zN.png?s=128&g=1", "display_name": "Draif Kroneg", "link": "https://stackoverflow.com/users/4134398/draif-kroneg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 41855539, "answer_count": 3, "score": 1, "last_activity_date": 1485359234, "creation_date": 1485358329, "last_edit_date": 1485359234, "question_id": 41855479, "link": "https://stackoverflow.com/questions/41855479/is-there-reverse-of-override-specifier-in-c", "title": "Is there reverse of &#39;override&#39; specifier in C++?", "body": "<p><code>override</code> keyword allows to make sure that the function will get overridden.\nI am looking for the reverse functionality. So that - when I write a new function - I want to mark it with something to make sure it will not get accidentally overwritten.</p>\n\n<p>(Also, I do not want to make it <code>static</code>, since it looks like to belong to an object rather than class)</p>\n"}, {"tags": ["c++", "ms-media-foundation", "audio-processing"], "comments": [{"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 1, "creation_date": 1485367544, "post_id": 41855473, "comment_id": 70900953, "body": "MF_PD_AUDIO_ENCODING_BITRATE is optional as stated in MSDN. I think you&#39;d better GetUINT32 for MF_MT_AUDIO_SAMPLES_PER_SECOND and MF_MT_AUDIO_BITS_PER_SAMPLE, and calculate the bitrate from there."}], "answers": [{"tags": [], "owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "is_accepted": true, "score": 1, "last_activity_date": 1485370728, "creation_date": 1485370728, "answer_id": 41859499, "question_id": 41855473, "link": "https://stackoverflow.com/questions/41855473/media-foundation-get-encoded-bitrate/41859499#41859499", "title": "Media Foundation get encoded bitrate", "body": "<p>Audio bitrate is a property of a track, not of a media file. Hence, you'd normally want to choose a specific track (yes, typically it's the first audio track even if the file is audio-only single track file) and query its attributes.</p>\n\n<p>Presentation description would get you attributes like this (I list just a few relevant):</p>\n\n<ul>\n<li>Key <code>MF_MT_MAJOR_TYPE</code>, vValue <code>MFMediaType_Audio</code></li>\n<li>Key <code>MF_MT_SUBTYPE</code>, vValue <code>MFAudioFormat_AAC</code></li>\n<li><strong>Key <code>MF_MT_AVG_BITRATE</code>, vValue 125601</strong></li>\n<li>Key <code>MF_MT_AAC_AUDIO_PROFILE_LEVEL_INDICATION</code>, vValue 0</li>\n<li>Key <code>MF_MT_AAC_PAYLOAD_TYPE</code>, vValue 0</li>\n</ul>\n\n<p>If you only need an informational value, such as presented by Windows shell:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oi3Wf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oi3Wf.png\" alt=\"enter image description here\"></a></p>\n\n<p>and you don't need Media Foundation otherwise (that is, just to access the value), you can use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762084\" rel=\"nofollow noreferrer\">shell property handler</a> to do this job for you. You would just request <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff384862\" rel=\"nofollow noreferrer\"><code>PKEY_Audio_EncodingBitrate</code></a> property and the handler would leverage Media Foundation to retrieve that for you.</p>\n"}], "owner": {"reputation": 787, "user_id": 3419885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001500229007/picture?type=large", "display_name": "mbaros", "link": "https://stackoverflow.com/users/3419885/mbaros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 41859499, "answer_count": 1, "score": 0, "last_activity_date": 1485370728, "creation_date": 1485358309, "question_id": 41855473, "link": "https://stackoverflow.com/questions/41855473/media-foundation-get-encoded-bitrate", "title": "Media Foundation get encoded bitrate", "body": "<p>I am trying to get the encoded bitrate of an audio file (mp4, m4a, aac) using Media Foundation.</p>\n\n<p>What I did is:</p>\n\n<pre><code>PROPVARIANT prop;\nIMFSourceReader* reader;\n\nMFCreateSourceReaderFromURL(filePath, NULL, &amp;reader);\nreader-&gt;GetPresentationAttribute(MF_SOURCE_READER_MEDIASOURCE, MF_PD_AUDIO_ENCODING_BITRATE,\n                                                                                     &amp;prop);\n</code></pre>\n\n<p>The second line ends with an error and with empty PROPVARIAT.</p>\n\n<p>However, when I do:</p>\n\n<pre><code>reader-&gt;GetPresentationAttribute(MF_SOURCE_READER_MEDIASOURCE, MF_PD_DURATION, &amp;prop);\n</code></pre>\n\n<p>It works fine.</p>\n\n<p>Does anyone know what is the issue and/or are there any other approaches to get the encoded bitrate of an audio track?</p>\n"}, {"tags": ["c++", "windows", "deep-learning", "caffe", "lmdb"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1485478532, "post_id": 41855455, "comment_id": 70953426, "body": "In what way does it get stuck in that routine?  Is it in an infinite loop?  Is it simply not progressing in loss function values?  Without a tractably small example and your data, we can&#39;t reproduce the problem to trouble-shoot it."}, {"owner": {"reputation": 411, "user_id": 3246146, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001278188624/picture?type=large", "display_name": "AnkitSahu", "link": "https://stackoverflow.com/users/3246146/ankitsahu"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1485504115, "post_id": 41855455, "comment_id": 70960661, "body": "It is stucking in Blocking Queue. in infinite loop of   while (queue_.empty()) {     sync_-&gt;condition_.wait(lock);   }       It is called from net.cpp and flow is as follows      layers_[layer_id]-&gt;SetUp(bottom_vecs_[layer_id], top_vecs_[layer_id])--&gt;  DataLayerSetUp(bottom, top) ---&gt;   Datum&amp; datum = *(reader_.full().peek()) ---&gt;  Blocking Queue"}, {"owner": {"reputation": 2847, "user_id": 6786718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/l8z29.png?s=128&g=1", "display_name": "Kev1n91", "link": "https://stackoverflow.com/users/6786718/kev1n91"}, "edited": false, "score": 1, "creation_date": 1485514042, "post_id": 41855455, "comment_id": 70966263, "body": "you may need to give the absolute path to the database"}, {"owner": {"reputation": 411, "user_id": 3246146, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001278188624/picture?type=large", "display_name": "AnkitSahu", "link": "https://stackoverflow.com/users/3246146/ankitsahu"}, "edited": false, "score": 0, "creation_date": 1485514328, "post_id": 41855455, "comment_id": 70966409, "body": "@ Kev1n91: I have tried with absolute path of lmdb but still not working ..."}, {"owner": {"reputation": 411, "user_id": 3246146, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001278188624/picture?type=large", "display_name": "AnkitSahu", "link": "https://stackoverflow.com/users/3246146/ankitsahu"}, "edited": false, "score": 0, "creation_date": 1485526337, "post_id": 41855455, "comment_id": 70973899, "body": "Is it because of some parameter missing in input Layer ??"}], "owner": {"reputation": 411, "user_id": 3246146, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001278188624/picture?type=large", "display_name": "AnkitSahu", "link": "https://stackoverflow.com/users/3246146/ankitsahu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485513886, "creation_date": 1485358257, "last_edit_date": 1485513886, "question_id": 41855455, "link": "https://stackoverflow.com/questions/41855455/caffe-stucking-in-infinite-loop-of-blocking-queue-while-using-lmdb-in-windows-cp", "title": "Caffe Stucking in infinite loop of blocking queue while using LMDB in windows cpp?", "body": "<p>I am trying to train and test the simple network for segmentation. I have created the LMDB file using windows cpp.</p>\n\n<p>But while doing training in windows cpp it get stuck in </p>\n\n<pre><code> boost::shared_ptr&lt;caffe::Solver&lt;float&gt; &gt; solver(caffe::SolverRegistry&lt;float&gt;::CreateSolver(solver_param));\n</code></pre>\n\n<p>after Debugging I found it is stucking in a infinte loop of blocking queue. the flow is as follows.  </p>\n\n<blockquote>\n  <p>layers_[layer_id]->SetUp(bottom_vecs_[layer_id],\n  top_vecs_[layer_id])    -->    DataLayerSetUp(bottom, top)    ---->  Datum&amp;\n  datum = *(reader_.full().peek())     ---->  Blocking Queue</p>\n</blockquote>\n\n<p>It is displaying this Logs in executable window at runtime.</p>\n\n<pre><code>[layer_factory.hpp:77] Creating layer data;\n[net.cpp:100] Creating Layer data;\n[net.cpp:418] data -&gt; data;\n</code></pre>\n\n<p>***********  mycaffe.cpp  ***************</p>\n\n<pre><code>   Caffe::set_mode(Caffe::GPU);\n        shared_ptr&lt;Net&lt;float&gt; &gt; net_;\n        net_.reset(new Net&lt;float&gt;(model_file, caffe::Phase::TRAIN));\n\n        Caffe::set_mode(Caffe::GPU);\n        caffe::SolverParameter solver_param;\n        caffe::ReadSolverParamsFromTextFileOrDie(\"mysolver.prototxt\", &amp;solver_param);\n        boost::shared_ptr&lt;caffe::Solver&lt;float&gt; &gt; solver(caffe::SolverRegistry&lt;float&gt;::CreateSolver(solver_param));\n        solver-&gt;Solve();\n</code></pre>\n\n<p>*****************  mymodel.prototxt  ********************</p>\n\n<pre><code>layer {\n  name: \"data\"\n  type: \"Data\"\n  top: \"data\"\n\n  include {\n    phase: TRAIN\n  }\n\n  data_param {\n    source: \"data_lmdb\"\n    batch_size: 4\n    backend: LMDB\n  }\n\n}\n\nlayer {\n  name: \"label\"\n  type: \"Data\"\n  top: \"label\"\n\n  include {\n    phase: TRAIN\n  }\n\n\n  data_param {\n    source: \"label_lmdb\"\n    batch_size: 4\n    backend: LMDB\n  }\n\n}\nlayer {\n  name: \"conv1\"\n  type: \"Convolution\"\n  bottom: \"data\"\n  top: \"conv1\"\n  param {\n    lr_mult: 1.0\n  }\n  param {\n    lr_mult: 0.10000000149\n  }\n  convolution_param {\n    num_output: 32\n    pad: 1\n    kernel_size: 3\n    stride: 1\n    weight_filler {\n      type: \"gaussian\"\n      std: 0.0010000000475\n    }\n    bias_filler {\n      type: \"constant\"\n      value: 0.0\n    }\n  }\n}\nlayer {\n  name: \"relu1\"\n  type: \"ReLU\"\n  bottom: \"conv1\"\n  top: \"conv1\"\n}\nlayer {\n  name: \"conv2\"\n  type: \"Convolution\"\n  bottom: \"conv1\"\n  top: \"conv2\"\n  param {\n    lr_mult: 1.0\n  }\n  param {\n    lr_mult: 0.10000000149\n  }\n  convolution_param {\n    num_output: 1024\n    pad: 0\n    kernel_size: 16\n    stride: 16\n    weight_filler {\n      type: \"gaussian\"\n      std: 0.0010000000475\n    }\n    bias_filler {\n      type: \"constant\"\n      value: 0.0\n    }\n  }\n}\nlayer {\n  name: \"relu2\"\n  type: \"ReLU\"\n  bottom: \"conv2\"\n  top: \"conv2\"\n}\nlayer {\n  name: \"upsample\"\n  type: \"Deconvolution\"\n  bottom: \"conv2\"\n  top: \"upsample\"\n  param {\n    lr_mult: 1.0\n  }\n  convolution_param {\n    num_output: 1\n    pad: 0\n    kernel_size: 16\n    stride: 16\n    bias_filler {\n      type: \"constant\"\n      value: 128.0\n    }\n  }\n}\nlayer {\n  name: \"lossL1\"\n  type: \"SmoothL1Loss\"\n  bottom: \"upsample\"\n  bottom: \"label\"\n  top: \"lossL1\"\n  loss_weight: 1.0\n}\n</code></pre>\n\n<p>*******************  mysolver.prototxt  ************</p>\n\n<pre><code>test_initialization: false\nbase_lr: 0.01\ndisplay: 10\nmax_iter: 500000\nlr_policy: \"step\"\ngamma: 0.1\nmomentum: 0.9\nweight_decay: 0.0001\nstepsize: 4069\nsnapshot: 10000\nsnapshot_prefix: \"snapshot\"\nsolver_mode: GPU\nnet: \"mymodel.prototxt\"\nsolver_type: SGD\n</code></pre>\n\n<p>Please help me to figure out the mistake. Thank you.</p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1485358935, "post_id": 41855401, "comment_id": 70895061, "body": "RTFM. RTFM. RTFM."}, {"owner": {"reputation": 15204, "user_id": 453271, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/G7rcK.png?s=128&g=1", "display_name": "Andriy Tylychko", "link": "https://stackoverflow.com/users/453271/andriy-tylychko"}, "edited": false, "score": 2, "creation_date": 1485359093, "post_id": 41855401, "comment_id": 70895177, "body": "actually it&#39;s a great feature specially designed and implemented for your convenience. Otherwise that exception would be lost w/o any chance to catch and handle it"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1485360360, "post_id": 41855401, "comment_id": 70896143, "body": "@PeteBecker Learning new acronyms everyday!"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 8, "last_activity_date": 1485358346, "creation_date": 1485358346, "answer_id": 41855487, "question_id": 41855401, "link": "https://stackoverflow.com/questions/41855401/what-happens-to-exceptions-thrown-from-functions-launched-via-stdasync/41855487#41855487", "title": "What happens to exceptions thrown from functions launched via std::async", "body": "<p>From <a href=\"http://en.cppreference.com/w/cpp/thread/async\" rel=\"noreferrer\">cppreference</a>:</p>\n\n<blockquote>\n  <p>[...] if the function <code>f</code> returns a value <strong>or throws an exception</strong>, it is stored in the shared state accessible through the <code>std::future</code> that <code>async</code> returns to the caller.</p>\n</blockquote>\n\n<p>And in the reference about <a href=\"http://en.cppreference.com/w/cpp/thread/future/get\" rel=\"noreferrer\"><code>std::future::get()</code></a>:</p>\n\n<blockquote>\n  <p>If an exception was stored in the shared state referenced by the future (e.g. via a call to <code>std::promise::set_exception()</code>) then that exception will be thrown.</p>\n</blockquote>\n\n<p>So yes, if your function throws an exception, that exception is basically deferred into the future and rethrown on <code>get()</code>.</p>\n"}], "owner": {"reputation": 17248, "user_id": 1608835, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/941587f86c2f65a08dec808da1e3c1ce?s=128&d=identicon&r=PG", "display_name": "FrozenHeart", "link": "https://stackoverflow.com/users/1608835/frozenheart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 41855487, "answer_count": 1, "score": 2, "last_activity_date": 1485358470, "creation_date": 1485358131, "question_id": 41855401, "link": "https://stackoverflow.com/questions/41855401/what-happens-to-exceptions-thrown-from-functions-launched-via-stdasync", "title": "What happens to exceptions thrown from functions launched via std::async", "body": "<p>What happens to exceptions thrown from functions launched via <code>std::async</code>?</p>\n\n<pre><code>#include &lt;future&gt;\n#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n\nvoid foo()\n{\n  std::cout &lt;&lt; \"foo()\" &lt;&lt; std::endl;\n  throw std::runtime_error(\"Error\");\n}\n\nint main()\n{\n  try\n  {\n    std::cout &lt;&lt; \"1\" &lt;&lt; std::endl;\n    auto f = std::async(std::launch::async, foo);\n    f.get();\n    std::cout &lt;&lt; \"2\" &lt;&lt; std::endl;\n  }\n  catch (const std::exception&amp; ex)\n  {\n    std::cerr &lt;&lt; ex.what() &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n\n<p>MSVC gives me the following output:</p>\n\n<pre><code>1\nfoo()\nError\n</code></pre>\n\n<p>Is it right that such exceptions will be caught outside the function by calling the <code>get</code> function?</p>\n"}, {"tags": ["c++", "project", "survey"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485358131, "post_id": 41855333, "comment_id": 70894473, "body": "You <i>do</i> know that arrays are zero-based? So that an array of 100 elements (like your global variable <code>obj</code>) will have indexes from <code>0</code> to <code>99</code> (inclusive)."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1485358601, "creation_date": 1485358601, "answer_id": 41855582, "question_id": 41855333, "link": "https://stackoverflow.com/questions/41855333/projet-in-birds-survey-having-trouble-in-code-how-to-store-data-like-database-s/41855582#41855582", "title": "Projet in birds survey having trouble in code. how to store data like database system", "body": "<p>You need to split your concepts between bird <em>data</em> and a <em>container</em> of data.  </p>\n\n<p>In a <em>relational</em> database, you would have <em>tables</em>.  Let the columns of a table be represented by the data members of a structure.  A record (row) of the table will be an instance of the record structure:  </p>\n\n<pre><code>class Bird\n{\npublic:\n  std::string name;\n  std::string colour;\n  std::string nature;\n  std::string location;\n  float       living_duration;\n};\n</code></pre>\n\n<p>For the container or table, you could use <code>std::vector</code>:<br>\n  <code>std::vector&lt;Bird&gt; bird_table;</code>  </p>\n\n<p>Many relational databases also include <em>index tables</em> to speed up searches.  The index table will contain pairs, the key (or column value) and an index into the <code>std::vector</code>.  The C++ language has a handy container called a <code>std::map</code>:</p>\n\n<pre><code>std::map&lt;string, unsigned int&gt; name_index;\n</code></pre>\n\n<p>The <code>string</code> parameter represents the key or column type.<br>\nThe <code>unsigned int</code> parameter represents the index into the database (a.k.a foreign key).  </p>\n\n<p>To retrieve a Bird record by name you access the index table first, then the vector:  </p>\n\n<pre><code>   unsigned int database_index = name_index[\"crow\"];\n   Bird  crow = database[index];\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7469705, "user_type": "registered", "profile_image": "https://graph.facebook.com/1830660963882491/picture?type=large", "display_name": "Khalid Hasan", "link": "https://stackoverflow.com/users/7469705/khalid-hasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485358601, "creation_date": 1485357934, "question_id": 41855333, "link": "https://stackoverflow.com/questions/41855333/projet-in-birds-survey-having-trouble-in-code-how-to-store-data-like-database-s", "title": "Projet in birds survey having trouble in code. how to store data like database system", "body": "<p>How can I store my input in the following catagories i.e water,domestic etc.When I give information about water birds then I give information about domestic birds.but 2nd information overrides the first one.Is there any way to store data for catagory wise?</p>\n\n<pre><code>/* declaring header files */\n#include&lt;iostream&gt;\n#include&lt;conio.h&gt;\n#include&lt;stdio.h&gt;\n#include &lt;fstream&gt;\n#include &lt;bits/stdc++.h&gt;\n#include &lt;string&gt;\n\nusing namespace std;\nclass Bird{\n\n    private:\n        char name[50],colour[50],nature[50],location[50];\n        float living_duration;\n\n    public:\n        int code;\n        int set_info(){\n            char name='\\0';\n            char colour='\\0';\n            char nature='\\0';\n            char location='\\0';\n            float living_duration=0.0;\n        }\n        int get_info(){\n            cout&lt;&lt;\"\\nEnter bird's name: \";\n            cin&gt;&gt;name;\n            cout&lt;&lt;\"Colour: \";\n            cin&gt;&gt;colour;\n            cout&lt;&lt;\"Nature: \";\n            cin&gt;&gt;nature;\n            cout&lt;&lt;\"Location: \";\n            cin&gt;&gt;location;\n            cout&lt;&lt;\"Living Duration: \";\n            cin&gt;&gt;living_duration;\n            cout&lt;&lt;\"Bird's code: \";\n            cin&gt;&gt;code;\n            }\n        int display_info(){\n            cout&lt;&lt;\"\\nBird's name: \"&lt;&lt;name;\n            cout&lt;&lt;\"\\nColour     : \"&lt;&lt;colour;\n            cout&lt;&lt;\"\\nNature     : \"&lt;&lt;nature;\n            cout&lt;&lt;\"\\nlocation     : \"&lt;&lt;location;\n            cout&lt;&lt;\"\\nLiving Duration  : \"&lt;&lt;living_duration&lt;&lt;\" year\";\n            cout&lt;&lt;\"\\nCode       : \"&lt;&lt;code;\n        }\n    }obj[100];\n\nint main(){\n    int i,j,k,n,m;\n    do{\n           cout&lt;&lt;\"\\n\\nWhat do you want to do\\n1.Input bird's information\"\n               &lt;&lt;\"\\n2.Display\\n3.Search\\n4.Exit.\"\n               &lt;&lt;\"\\n\\nChoose appropriate number: \";\n           cin&gt;&gt;n;\n\n           switch(n){\n              case 1://bird information\n                 cout&lt;&lt;\"Please Select Birds Category\"&lt;&lt;endl;\n                 cout&lt;&lt;\"------------------\"&lt;&lt;endl;\n                 cout&lt;&lt;\"1)Water\\n2)Domestic\\n3)prey\\n4)treebased\\n5)flightless\\n6)migratory\\n\"&lt;&lt;endl;\n                 cin&gt;&gt;m;\n                    switch(m){\n                    case 1:\n                        cout&lt;&lt;\"Enter the number of bird how many to input: \";\n                        cin&gt;&gt;j;\n                        for(i=1;i&lt;=j;i++){\n                        cout&lt;&lt;\"\\nInformation of Bird \"&lt;&lt;i&lt;&lt;\".\\n\";\n                        obj[i].get_info();\n                        }\n                        break;\n                    case 2:\n                        break;\n                    case 3:\n                        break;\n                    case 4:\n                        break;\n                    case 5:\n                        break;\n                    case 6:\n                        break;\n                    default:\n                        cout&lt;&lt;\"Wrong choice!!\\nPlease enter correct number.\";\n                        break;\n                    }\n\n\n               case 2://display\n                  for(i=1;i&lt;=j;i++)\n                 {\n                  cout&lt;&lt;\"\\nBird no \"&lt;&lt;i&lt;&lt;\".\\n\";\n                  obj[i].display_info();\n                 cout&lt;&lt;\"\\n\";\n                 }\n                 break;\n\n               case 3://search\n                 cout&lt;&lt;\"\\nEnter the bird code: \";\n                 cin&gt;&gt;k;\n\n                 for(i=1;i&lt;=j;i++)\n                  {\n                 if(k==obj[i].code)\n                    {\n                     cout&lt;&lt;\"\\nBird no \"&lt;&lt;i&lt;&lt;\".\\n\";\n                     obj[i].display_info();\n                     break;\n                    }\n                   }\n                 if(k!=obj[i].code)\n                   cout&lt;&lt;\"Wrong code input...\\n\";\n                  break;\n\n               case 4://exit\n                  break;\n\n               default:\n                  cout&lt;&lt;\"Wrong choice!!\\nPlease enter correct number.\";\n                  break;\n             }\n\n         }while(n!=4);\n  }\n</code></pre>\n"}, {"tags": ["c++", "enums", "arduino", "operator-overloading"], "comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 2, "creation_date": 1485358034, "post_id": 41855327, "comment_id": 70894405, "body": "Is <code>operator |</code> member of a class? If yes, then it needs to take only one argument, i.e. its right hand side."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1485358343, "post_id": 41855327, "comment_id": 70894644, "body": "Work as expected <a href=\"http://coliru.stacked-crooked.com/a/4f2cedffa7c1e88d\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1485358418, "post_id": 41855327, "comment_id": 70894684, "body": "<a href=\"http://ideone.com/2dTcbJ\" rel=\"nofollow noreferrer\">Cannot reproduce</a>."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1485359465, "post_id": 41855327, "comment_id": 70895482, "body": "Except if <code>MngSpiLS7633R</code> is a namespace (which I doubt), comment from vsoftco is the answer."}, {"owner": {"reputation": 154, "user_id": 4623899, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-ovtp7HNSjt4/AAAAAAAAAAI/AAAAAAAAADs/lSsa8_XxJGU/photo.jpg?sz=128", "display_name": "EffegiWeb", "link": "https://stackoverflow.com/users/4623899/effegiweb"}, "edited": false, "score": 1, "creation_date": 1485420305, "post_id": 41855327, "comment_id": 70921344, "body": "in this case operator is member of the class where the enum is defined."}], "answers": [{"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 0, "last_activity_date": 1485359583, "creation_date": 1485359583, "answer_id": 41855966, "question_id": 41855327, "link": "https://stackoverflow.com/questions/41855327/c-operator-overload-issue/41855966#41855966", "title": "C++ Operator overload issue", "body": "<p>From the error message</p>\n\n<pre><code>error: 'MngSpiLS7633R::OperationMode MngSpiLS7633R::operator|...\n</code></pre>\n\n<p><code>MngSpiLS7633R</code> is either a namespace or a class name whom <code>operator|</code> is a member of. If this is the case, the operator must only take one argument or be defined as a free function (outside the class <code>MngSpiLS7633R</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 4623899, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-ovtp7HNSjt4/AAAAAAAAAAI/AAAAAAAAADs/lSsa8_XxJGU/photo.jpg?sz=128", "display_name": "EffegiWeb", "link": "https://stackoverflow.com/users/4623899/effegiweb"}, "is_accepted": false, "score": 0, "last_activity_date": 1485765984, "creation_date": 1485765984, "answer_id": 41931791, "question_id": 41855327, "link": "https://stackoverflow.com/questions/41855327/c-operator-overload-issue/41931791#41931791", "title": "C++ Operator overload issue", "body": "<p>I've resolved the problem using <code>friend</code> modifier for the operator declaration inside the class.</p>\n\n<pre><code>friend AddOperationMode operator | ( AddOperationMode lhs, AddOperationMode rhs );\n\nfriend AddOperationMode operator + ( AddOperationMode lhs, AddOperationMode rhs );\n</code></pre>\n\n<p>Then the operator are defined outside the class:</p>\n\n<pre><code>MngSpiLS7366R::OperationMode operator | (MngSpiLS7366R::OperationMode lhs, MngSpiLS7366R::OperationMode rhs )\n{\n// Cast to int first otherwise we'll just end up recursing\nreturn static_cast&lt; MngSpiLS7366R::OperationMode &gt;( static_cast&lt; int &gt;( lhs ) | static_cast&lt; int &gt;( rhs ) );\n}\n\nMngSpiLS7366R::OperationMode operator + (MngSpiLS7366R::OperationMode lhs, MngSpiLS7366R::OperationMode rhs )\n{\n// Cast to int first otherwise we'll just end up recursing\nreturn static_cast&lt; MngSpiLS7366R::OperationMode &gt;( static_cast&lt; int &gt;( lhs ) | static_cast&lt; int &gt;( rhs ) );\n}\n</code></pre>\n"}], "owner": {"reputation": 154, "user_id": 4623899, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-ovtp7HNSjt4/AAAAAAAAAAI/AAAAAAAAADs/lSsa8_XxJGU/photo.jpg?sz=128", "display_name": "EffegiWeb", "link": "https://stackoverflow.com/users/4623899/effegiweb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1485765984, "creation_date": 1485357926, "last_edit_date": 1495535364, "question_id": 41855327, "link": "https://stackoverflow.com/questions/41855327/c-operator-overload-issue", "title": "C++ Operator overload issue", "body": "<p>In a class I have the following enum ad Operator overloads, as show in <a href=\"https://stackoverflow.com/questions/1448396/how-to-use-enums-as-flags-in-c\">How to use enums as flags in C++?</a>.</p>\n\n<pre><code>enum OperationMode\n{\n//...\n};\n\nOperationMode operator | (OperationMode lhs, OperationMode rhs )\n{\n    // Cast to int first otherwise we'll just end up recursing\n    return static_cast&lt; OperationMode &gt;( static_cast&lt; int &gt;( lhs ) | static_cast&lt; int &gt;( rhs ) );\n}\n\nOperationMode operator + (OperationMode lhs, OperationMode rhs )\n{\n    // Cast to int first otherwise we'll just end up recursing\n    return static_cast&lt; OperationMode &gt;( static_cast&lt; int &gt;( lhs ) | static_cast&lt; int &gt;( rhs ) );\n}\n</code></pre>\n\n<p>the compiler return the followinf errors:</p>\n\n<pre><code>../MngSpiLS7633R/MngSpiLS7633R.h:40:84: error: 'MngSpiLS7633R::OperationMode MngSpiLS7633R::operator|(MngSpiLS7633R::OperationMode, MngSpiLS7633R::OperationMode)' must take exactly one argument\ninline OperationMode operator | (const OperationMode lhs, const OperationMode rhs )\n                                                                                ^\n../MngSpiLS7633R/MngSpiLS7633R.h:46:72: error:    'MngSpiLS7633R::OperationMode MngSpiLS7633R::operator+(MngSpiLS7633R::OperationMode, MngSpiLS7633R::OperationMode)' must take either zero or one argument\ninline OperationMode operator + (OperationMode lhs, OperationMode rhs )\n</code></pre>\n\n<p>Why the overload isn't correct?</p>\n\n<p>Additional Informations, after some comments/Answer:\nFirst, Thanks for the comments and answer.</p>\n\n<p>The operator is member of a class, where the enum is defined.\nI'm new in c++ and oop.... can anyone suggest an example of code for an operator meber of a class?</p>\n\n<p>Here there is the complete class code, im trying to set operator + and | for using the single values of the enums as bitmask for the parameters of <code>void initialize(OperationMode MDR0_OperationMode, AddOperationMode MDR1_AddOperationMode)</code> function.</p>\n\n<pre><code>class MngSpiLS7633R\n{\npublic:\n\nenum OperationMode\n{\n    Om_Quad_None = 0x00,\n    Om_Quad_x1  = 0x01,\n    Om_Quad_x2 = 0x02,\n    Om_Quad_x4 = 0x03,\n\n    Om_Count_freeRun     = 0x00,\n    Om_Count_SingleCycle = 0x04,\n    Om_Count_RangeLimit = 0x08,\n    Om_Count_ModuloN    = 0x0C,\n\n    Om_Index_disabled = 0x00,\n    Om_Index_loadCNTR = 0x10,\n    Om_Index_resetCNTR = 0x20,\n    Om_Index_loadOTR    = 0x30,\n\n    Om_AsynIndex_async = 0x00,\n    Om_AsynIndex_sync = 0x40,\n\n    Om_ClockFilter_1x = 0x00,\n    Om_ClockFilter_2x = 0x80\n};\n\nOperationMode operator | (OperationMode lhs, OperationMode rhs )\n{\n    // Cast to int first otherwise we'll just end up recursing\n    return static_cast&lt; OperationMode &gt;( static_cast&lt; int &gt;( lhs ) | static_cast&lt; int &gt;( rhs ) );\n}\n\nOperationMode operator + (OperationMode lhs, OperationMode rhs )\n{\n    // Cast to int first otherwise we'll just end up recursing\n    return static_cast&lt; OperationMode &gt;( static_cast&lt; int &gt;( lhs ) | static_cast&lt; int &gt;( rhs ) );\n}\n\n\nenum AddOperationMode\n{\n    Aom_CouterMode_4byte = 0x00,\n    Aom_CouterMode_3byte = 0x01,\n    Aom_CouterMode_2byte = 0x02,\n    Aom_CouterMode_1byte = 0x03,\n\n    Aom_Counting_Enabled  = 0x00,\n    Aom_Counting_Disabled = 0x04,\n\n    //bit-3 not used = 0x08\n    Aom_b4flag_Nop = 0x00,\n    Aom_b4flag_onIDX = 0x10,\n\n    Aom_b5flag_Nop = 0x00,\n    Aom_b5flag_onCMP = 0x20,\n\n    Aom_b6flag_Nop = 0x00,\n    Aom_b6flag_onBW = 0x40,\n\n    b7flag_Nop = 0x00,\n    b7flag_onCY = 0x80,\n\n};\n\nAddOperationMode operator | ( AddOperationMode lhs, AddOperationMode rhs )\n{\n    // Cast to unsigned char first otherwise we'll just end up recursing\n    return static_cast&lt; AddOperationMode &gt;( static_cast&lt; unsigned char &gt;( lhs ) | static_cast&lt; unsigned char &gt;( rhs ) );\n}\n\nAddOperationMode operator + ( AddOperationMode lhs, AddOperationMode rhs )\n{\n    // Cast to unsigned char first otherwise we'll just end up recursing\n    return static_cast&lt; AddOperationMode &gt;( static_cast&lt; unsigned char &gt;( lhs ) | static_cast&lt; unsigned char &gt;( rhs ) );\n}\n\n\n\nMngSpiLS7633R(int SSPin);\nMngSpiLS7633R(int SSPin, bool ExternalNot);\nvirtual ~MngSpiLS7633R();\nvoid initialize(OperationMode MDR0_OperationMode, AddOperationMode MDR1_AddOperationMode);\nvoid resetCounter();\nlong get();\nvoid set(long initValue);\n\n\nprivate:\nstatic const char SpiBitOrder = MSBFIRST;\nstatic const char SpiMode = SPI_MODE0;\nstatic const long SpiClock = 4000000; //4 Mhz maximum ratings\n\nint SSEnabledLevel;\nint SSDisabledLevel;\nint SSPin;\nbool SSExternalNot;\n\n};\n</code></pre>\n"}, {"tags": ["c++", "c++11", "member-initialization"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1485357913, "post_id": 41855288, "comment_id": 70894314, "body": "why do you want to do that? What is the problem with the current code? And what is the problem with moving the initialization to the constructor? Did you try something and it didnt work?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 4, "creation_date": 1485357916, "post_id": 41855288, "comment_id": 70894318, "body": "Are you looking for member init list? <code>Test() : rnd(seed) {...blah...}</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485358017, "post_id": 41855288, "comment_id": 70894395, "body": "Two ways: The first is to use the constructor initializer list to initialize the variable. This is basically equivalent to what you&#39;re doing now. The second way is to use the copy-assignment operator inside the constructor body to copy from a temporary object into the <code>m_random</code> object."}, {"owner": {"reputation": 4131, "user_id": 3312620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4lUdJ.jpg?s=128&g=1", "display_name": "Tharindu Kumara", "link": "https://stackoverflow.com/users/3312620/tharindu-kumara"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1485358118, "post_id": 41855288, "comment_id": 70894462, "body": "@Nathan, It is not a duplicate"}, {"owner": {"reputation": 4131, "user_id": 3312620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4lUdJ.jpg?s=128&g=1", "display_name": "Tharindu Kumara", "link": "https://stackoverflow.com/users/3312620/tharindu-kumara"}, "edited": false, "score": 0, "creation_date": 1485358323, "post_id": 41855288, "comment_id": 70894633, "body": "@ HolyBlackCat Yes. But how do you do it with std::mt19937?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1485358475, "post_id": 41855288, "comment_id": 70894721, "body": "your code is <code>std::mt19937 rnd { seed };</code> and if you want to do that in the ctr, it should look like this <code>Test() : rnd( seed ) : {}</code>. However, afaik this will have identical effect"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1485358772, "post_id": 41855288, "comment_id": 70894935, "body": "@tobi303 FYI, the first one doesn&#39;t prevent the class from being an aggregate."}], "answers": [{"comments": [{"owner": {"reputation": 4131, "user_id": 3312620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4lUdJ.jpg?s=128&g=1", "display_name": "Tharindu Kumara", "link": "https://stackoverflow.com/users/3312620/tharindu-kumara"}, "edited": false, "score": 0, "creation_date": 1485360992, "post_id": 41855563, "comment_id": 70896596, "body": "One smallthing. How would you use std::random_device in the above style with std::mt19937"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 4131, "user_id": 3312620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4lUdJ.jpg?s=128&g=1", "display_name": "Tharindu Kumara", "link": "https://stackoverflow.com/users/3312620/tharindu-kumara"}, "edited": false, "score": 0, "creation_date": 1485361585, "post_id": 41855563, "comment_id": 70897000, "body": "@TharinduKumara If you wanted to do that then would write a function that does the initialization and returns the generator.  Then you can initialize the generator with that functions return."}, {"owner": {"reputation": 4131, "user_id": 3312620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4lUdJ.jpg?s=128&g=1", "display_name": "Tharindu Kumara", "link": "https://stackoverflow.com/users/3312620/tharindu-kumara"}, "edited": false, "score": 0, "creation_date": 1485362111, "post_id": 41855563, "comment_id": 70897366, "body": "@Nathanm, it can be used like this. <code>Test() : rnd(std::random_device{}()) {......}</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 4131, "user_id": 3312620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4lUdJ.jpg?s=128&g=1", "display_name": "Tharindu Kumara", "link": "https://stackoverflow.com/users/3312620/tharindu-kumara"}, "edited": false, "score": 0, "creation_date": 1485362780, "post_id": 41855563, "comment_id": 70897841, "body": "@TharinduKumara Oh yes.  That way will work.  I though you were talking about initializing it like they do <a href=\"http://stackoverflow.com/questions/15509270/does-stdmt19937-require-warmup\">here</a>"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1485358827, "last_edit_date": 1485358827, "creation_date": 1485358534, "answer_id": 41855563, "question_id": 41855288, "link": "https://stackoverflow.com/questions/41855288/mersenne-twister-seed-as-a-member-variable/41855563#41855563", "title": "Mersenne Twister seed as a member variable", "body": "<p>I think you are confused about exactly what a in class initialization does.  When you have</p>\n\n<pre><code>struct foo\n{\n    foo() {}\n    int bar = 10;\n};\n</code></pre>\n\n<p>That in class initialization is just syntactic sugar for</p>\n\n<pre><code>struct foo\n{\n    foo() : bar(10) {}\n    int bar;\n};\n</code></pre>\n\n<p>Whenever the compiler would add a member to a member initializer list (this is done when you forget it or when the compiler provides the constructor) it uses what you used in the initialization.  So with your code</p>\n\n<pre><code>class Test{\npublic:\n    Test()\n    {\n\n    }\n    void foo()\n    {\n        auto randomNum = std::uniform_int_distribution&lt;&gt;(0, threads.size())(rnd);\n    }\n\nprivate:\n    std::mt19937 rnd\n    {\n        std::chrono::high_resolution_clock::now().time_since_epoch().count()};\n    };\n};\n</code></pre>\n\n<p>Becomes</p>\n\n<pre><code>class Test{\npublic:\n    Test() : rnd(std::chrono::high_resolution_clock::now().time_since_epoch().count())\n    {\n\n    }\n    void foo()\n    {\n        auto randomNum = std::uniform_int_distribution&lt;&gt;(0, threads.size())(rnd);\n    }\n\nprivate:\n    std::mt19937 rnd;\n};\n</code></pre>\n\n<p>The nice thing about not actually doing it that way and using how you did it to begin with is you do not have to repeat </p>\n\n<pre><code>rnd(std::chrono::high_resolution_clock::now().time_since_epoch().count())\n</code></pre>\n\n<p>in every constructor you write but you can always override it if you want something else for a specific constructor.</p>\n"}], "owner": {"reputation": 4131, "user_id": 3312620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4lUdJ.jpg?s=128&g=1", "display_name": "Tharindu Kumara", "link": "https://stackoverflow.com/users/3312620/tharindu-kumara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "accepted_answer_id": 41855563, "answer_count": 1, "score": 2, "last_activity_date": 1485359276, "creation_date": 1485357802, "last_edit_date": 1485359276, "question_id": 41855288, "link": "https://stackoverflow.com/questions/41855288/mersenne-twister-seed-as-a-member-variable", "title": "Mersenne Twister seed as a member variable", "body": "<p>I want to know how to keep a mersenne random number generator as a member variable and use it in the same class.</p>\n\n<p>I wrote the class as below and it works perfectly, but I do not like the that <code>std::mt19937</code> is initialized. I would like to know whether there is a way to initialize it in the constructor of <code>Test</code>? </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;random&gt;\n#include &lt;chrono&gt;\n#include &lt;ctime&gt;\n\nclass Test{\npublic:\n    Test()\n    {\n\n    }\n    void foo()\n    {\n        auto randomNum = std::uniform_int_distribution&lt;&gt;(0, threads.size())(rnd);\n    }\n\nprivate:\n    std::mt19937 rnd\n    {\n        std::chrono::high_resolution_clock::now().time_since_epoch().count()\n    };\n}\n</code></pre>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "edited": false, "score": 3, "creation_date": 1485357343, "post_id": 41855074, "comment_id": 70893895, "body": "It looks like you are not linking the boost program_options library."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1485357374, "post_id": 41855074, "comment_id": 70893920, "body": "I think the semicolon at the end of <code>desc.add_options();</code> is trouble for later."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 3, "creation_date": 1485357768, "post_id": 41855074, "comment_id": 70894207, "body": "<b>Don&#39;t spam tags.</b> This question has nothing to do with <code>c</code> or <code>computer-science</code>."}], "answers": [{"comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1485357561, "post_id": 41855147, "comment_id": 70894056, "body": "That&#39;s not the problem: <a href=\"http://melpon.org/wandbox/permlink/bqnnDGUlfXFhFVkc\" rel=\"nofollow noreferrer\">melpon.org/wandbox/permlink/bqnnDGUlfXFhFVkc</a>"}, {"owner": {"reputation": 3, "user_id": 7168689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08289c8de99005372d8a8af622eb4ee1?s=128&d=identicon&r=PG&f=1", "display_name": "john nguyen", "link": "https://stackoverflow.com/users/7168689/john-nguyen"}, "edited": false, "score": 0, "creation_date": 1485357620, "post_id": 41855147, "comment_id": 70894094, "body": "@vre : I am sorry for the wrong typing, the &quot;;&quot; was not supposed to be there, even when I take it off, still giving me the errors."}, {"owner": {"reputation": 3, "user_id": 7168689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08289c8de99005372d8a8af622eb4ee1?s=128&d=identicon&r=PG&f=1", "display_name": "john nguyen", "link": "https://stackoverflow.com/users/7168689/john-nguyen"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1485357857, "post_id": 41855147, "comment_id": 70894276, "body": "@VittorioRomeo : so, what is the problem?"}], "tags": [], "owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "is_accepted": false, "score": 2, "last_activity_date": 1485362329, "last_edit_date": 1485362329, "creation_date": 1485357418, "answer_id": 41855147, "question_id": 41855074, "link": "https://stackoverflow.com/questions/41855074/what-is-wrong-on-boost-program-options-options-description-hpp/41855147#41855147", "title": "What is wrong on &lt;boost/program_options/options_description.hpp&gt;?", "body": "<p>You accidently added a superfluous semicolon at the end of the following line:</p>\n\n<p>desc.add_options(); // was a typo in the original post</p>\n\n<p>You also need to declare variables for storing the input options.</p>\n\n<pre><code>std::string sign;\ndouble week, day, hour, minute, second;\ndesc.add_options()\n        (\"sign\"  , program_options::value&lt;std::string&gt;(&amp;sign) -&gt; default_value(\"gbm\")    ,\"name of the input\")\n        (\"week\"  , program_options::value&lt;double&gt;(&amp;week)      -&gt; default_value(1930)     ,\"number of the week\")\n        (\"day\"   , program_options::value&lt;double&gt;(&amp;day)       -&gt; default_value(0)        ,\"number of the day in within the week\")\n        (\"hour\"  , program_options::value&lt;double&gt;(&amp;hour)      -&gt; default_value(0)        ,\"time in hour\")\n        (\"minute\", program_options::value&lt;double&gt;(&amp;minute)    -&gt; default_value(0)        ,\"time in minute\")\n        (\"second\", program_options::value&lt;double&gt;(&amp;second)    -&gt; default_value(0)        ,\"time in second\")\n        ;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7168689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08289c8de99005372d8a8af622eb4ee1?s=128&d=identicon&r=PG&f=1", "display_name": "john nguyen", "link": "https://stackoverflow.com/users/7168689/john-nguyen"}, "edited": false, "score": 0, "creation_date": 1485357780, "post_id": 41855231, "comment_id": 70894214, "body": "I am sorry, I do not understand what you meant?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1485357838, "post_id": 41855231, "comment_id": 70894257, "body": "Some parts of boost are compiled as libraries. This is one of them. You need to add settings to your linker options. He gave you the linker option for that."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 3, "user_id": 7168689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08289c8de99005372d8a8af622eb4ee1?s=128&d=identicon&r=PG&f=1", "display_name": "john nguyen", "link": "https://stackoverflow.com/users/7168689/john-nguyen"}, "edited": false, "score": 0, "creation_date": 1485357858, "post_id": 41855231, "comment_id": 70894277, "body": "@johnnguyen: in order to use &quot;pre-compiled&quot; libraries you need to <b>link</b> them to your project. This is a good explanation: <a href=\"http://stackoverflow.com/questions/1033898/why-do-you-have-to-link-the-math-library-in-c\" title=\"why do you have to link the math library in c\">stackoverflow.com/questions/1033898/&hellip;</a>"}, {"owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "edited": false, "score": 0, "creation_date": 1485357877, "post_id": 41855231, "comment_id": 70894285, "body": "Exactly what I already stated in my comment, you need to LINK the boost_program_options library when building your program.   If you don&#39;t know what linking is all about, you can read here: <a href=\"http://stackoverflow.com/questions/6264249/how-does-the-compilation-linking-process-work\" title=\"how does the compilation linking process work\">stackoverflow.com/questions/6264249/&hellip;</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1485357951, "post_id": 41855231, "comment_id": 70894345, "body": "Including a header file may not contain the <i>implementation</i> of functions.  You will need to build the boost library which contains the implementation."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 7, "last_activity_date": 1485357648, "creation_date": 1485357648, "answer_id": 41855231, "question_id": 41855074, "link": "https://stackoverflow.com/questions/41855074/what-is-wrong-on-boost-program-options-options-description-hpp/41855231#41855231", "title": "What is wrong on &lt;boost/program_options/options_description.hpp&gt;?", "body": "<p>It seems that you are not linking the library. <code>boost::program_options</code> <strong>is not header-only</strong>, so you have to explicitly link it:</p>\n\n<pre><code>-lboost_program_options\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "is_accepted": false, "score": 1, "last_activity_date": 1485358050, "last_edit_date": 1495542883, "creation_date": 1485358050, "answer_id": 41855373, "question_id": 41855074, "link": "https://stackoverflow.com/questions/41855074/what-is-wrong-on-boost-program-options-options-description-hpp/41855373#41855373", "title": "What is wrong on &lt;boost/program_options/options_description.hpp&gt;?", "body": "<p><a href=\"http://www.boost.org/doc/libs/1_63_0/doc/html/program_options.html\" rel=\"nofollow noreferrer\">Boost program_options</a> is a compiled library, not an header-only like many other boost libraries.<br>\nSo you need to link the library to your program when building.  </p>\n\n<p>How to do that highly depends on the compiler and platform you are using.  </p>\n\n<p>If you don't know what linking is all about, you can read here: \n<a href=\"https://stackoverflow.com/questions/6264249/how-does-the-compilation-linking-process-work\">How does the compilation/linking process work?</a></p>\n"}], "owner": {"reputation": 3, "user_id": 7168689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08289c8de99005372d8a8af622eb4ee1?s=128&d=identicon&r=PG&f=1", "display_name": "john nguyen", "link": "https://stackoverflow.com/users/7168689/john-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1087, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1485362329, "creation_date": 1485357231, "last_edit_date": 1485357749, "question_id": 41855074, "link": "https://stackoverflow.com/questions/41855074/what-is-wrong-on-boost-program-options-options-description-hpp", "title": "What is wrong on &lt;boost/program_options/options_description.hpp&gt;?", "body": "<p>I need help on , I have been doing this on the same computer, it means I already installed boost library, and based on the previous code, but this time it gives me errors: \n/tmp/ccpAYzPw.o: In function `main':</p>\n\n<pre><code>reading_data.cpp:(.text+0x356): undefined reference to `boost::program_options::options_description::m_default_line_length'\nreading_data.cpp:(.text+0x361): undefined reference to `boost::program_options::options_description::m_default_line_length'\nreading_data.cpp:(.text+0x3a6): undefined reference to `boost::program_options::options_description::options_description(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, unsigned int, unsigned int)'\nreading_data.cpp:(.text+0x3d3): undefined reference to `boost::program_options::options_description::add_options()'\ncollect2: error: ld returned 1 exit status\n&lt;builtin&gt;: recipe for target 'reading_data' failed\n</code></pre>\n\n<p>I spent almost 2 hour to see what is going on? but I could not understand why, so I need  your helps.</p>\n\n<p>Here is my code and thank you very much.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;      // std::ifstream\n#include &lt;boost/program_options.hpp&gt;\n\nint main ()\n{\n    boost::program_options::options_description desc(\"Allowed options\");\n\n    desc.add_options()\n            (\"sign\"  , program_options::value&lt;string&gt;()  -&gt; default_value(\"gbm\")    ,\"name of the input\")\n            (\"week\"  , program_options::value&lt;double&gt;()  -&gt; default_value(1930)     ,\"number of the week\")\n            (\"day\"   , program_options::value&lt;double&gt;()  -&gt; default_value(0)        ,\"number of the day in within the week\")\n            (\"hour\"  , program_options::value&lt;double&gt;()  -&gt; default_value(0)        ,\"time in hour\")\n            (\"minute\", program_options::value&lt;double&gt;()  -&gt; default_value(0)        ,\"time in minute\")\n            (\"second\", program_options::value&lt;double&gt;()  -&gt; default_value(0)        ,\"time in second\")\n            ;\n\n    cout &lt;&lt; \"Done!\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "oop", "assertions"], "comments": [{"owner": {"reputation": 4007, "user_id": 1020484, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94c933a9303bcc5b6445fc9e310bcf57?s=128&d=identicon&r=PG", "display_name": "lcs", "link": "https://stackoverflow.com/users/1020484/lcs"}, "edited": false, "score": 1, "creation_date": 1485357516, "post_id": 41855026, "comment_id": 70894020, "body": "<code>String&amp; String:: operator=(String &amp;sir)</code> what happens when <code>strlen(sir.s)+1</code> is longer than <code>this-&gt;s</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 3, "creation_date": 1485357524, "post_id": 41855026, "comment_id": 70894027, "body": "Read about the <i>rule of three/five/zero</i>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1485358686, "post_id": 41855026, "comment_id": 70894868, "body": "You are also missing the copy constructor. <code>String(const String &amp;sir)</code>."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1485367101, "post_id": 41855026, "comment_id": 70900676, "body": "be very careful when using a symbol <code>String</code> and having <code>using namespace std;</code> in fact I would suggest getting rid of the <code>using</code> all together."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1485367986, "post_id": 41855026, "comment_id": 70901189, "body": "Good thing <code>std::string</code> is lower case. Would there be any conflicts??"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1485368142, "post_id": 41855026, "comment_id": 70901281, "body": "@drescherjm with <code>using namespace std;</code>, the answer is always &quot;not yet&quot;..."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1485368212, "post_id": 41855026, "comment_id": 70901317, "body": "@drescherjm only the highly likely fat fingered ones. As far as I&#39;m aware the reserved names are all case sensitive, that said <code>namespace std</code> does expand over time, so pulling all of it into the global namespace is generally bad."}], "answers": [{"tags": [], "owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "is_accepted": false, "score": 0, "last_activity_date": 1485367834, "creation_date": 1485367834, "answer_id": 41858640, "question_id": 41855026, "link": "https://stackoverflow.com/questions/41855026/error-debug-assertion-failed-block-type-is-valid/41858640#41858640", "title": "Error Debug Assertion Failed. BLOCK_TYPE_IS_VALID", "body": "<p>So there are a few issues in this code that could lead to this particular error. The error occurs when you attempt to free memory that has been corrupted.</p>\n\n<p>I suspect in your case this is happening in your <code>operator==</code>. This is taking in <code>String</code> instead of <code>const String&amp;</code>. The difference is that by taking in <code>String</code> you're making a copy of the operand. That includes a reference to the internal buffer you're story as a raw pointer. Thus when that copy goes out of scope that buffer is then <code>delete[]</code>ed. As such by the time you're attempting to call your <code>operator+</code> the buffer doesn't exist. The runtime then alerts you to the undefined behavior via the assertion message. If instead you passed in <code>const String&amp;</code> you'd be passing in a reference to the parameter that cannot be changed rather than making a copy. This would ensure that it is not destructed at the end of the method and the buffer is not <code>delete[]</code>ed.</p>\n\n<p>Side note: if you switched your buffer to be a <code>std::vector&lt;char&gt;</code> instead of a raw buffer you'd be better served as that manages its own memory and you wouldn't need a destructor.</p>\n"}], "owner": {"reputation": 31, "user_id": 7340544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ce7988bfc0e910a92be9c9e53a1834?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7340544/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1485367834, "creation_date": 1485357122, "last_edit_date": 1485357381, "question_id": 41855026, "link": "https://stackoverflow.com/questions/41855026/error-debug-assertion-failed-block-type-is-valid", "title": "Error Debug Assertion Failed. BLOCK_TYPE_IS_VALID", "body": "<p>When I run my program the a window with the message \"Debug Assertion Failed\" appears.</p>\n\n<p>Source.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Header.h\"\n\nusing namespace std;    \nString :: String ()    \n{    \n    this-&gt;s=new char[50];\n}\n\nString :: String(char *sir)    \n{    \n    this-&gt;s=new char[strlen(sir)+1];\n    strcpy_s(this-&gt;s, strlen(sir)+1, sir);\n}\n\nString :: ~String()    \n{    \n    delete [] s;\n}\n\nString&amp; String:: operator=(String &amp;sir)    \n{       \n    strcpy_s(this-&gt;s, strlen(sir.s)+1, sir.s);\n    return *this;\n\n}\n\nString String:: operator+(String sir)    \n{    \n    String rez;\n    rez.s=new char [strlen(s)+strlen(sir.s)+1];\n    strcpy_s(rez.s, strlen(s)+1,s);\n    strcat_s(rez.s, strlen(s)+strlen(sir.s)+1, sir.s);\n    return rez;\n\n}\n\nvoid String:: afisare()    \n{    \n    cout &lt;&lt; s&lt;&lt; endl;\n}\n\nbool String:: operator==(String sir)    \n{    \n    if(strcmp(s, sir.s)==0)\n        return true;\n    else\n        return false;\n}`\n</code></pre>\n\n<p>Main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;    \n#include \"Header.h\"\n\nusing namespace std;\n\nint main()    \n{\n    String sir1(\"John \");\n    String sir2(\"Ola \");\n    String rez;\n    if(sir1==sir2)\n        cout &lt;&lt; \"string are identicaly\"&lt;&lt; endl;\n    else\n        cout &lt;&lt; \"strings are not identicaly\"&lt;&lt; endl;\n\n    rez=sir1+sir2; // this line i have debug assertion failed\n    rez.afisare();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "math", "graphics", "2d", "sfml"], "comments": [{"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1485357144, "post_id": 41854922, "comment_id": 70893748, "body": "Have you tried to enable antialising for the window via <a href=\"https://www.sfml-dev.org/documentation/2.0/structsf_1_1ContextSettings.php\" rel=\"nofollow noreferrer\"><code>ContextSettings</code></a>?"}, {"owner": {"reputation": 6563, "user_id": 1020072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ARs87.jpg?s=128&g=1", "display_name": "Sean Cline", "link": "https://stackoverflow.com/users/1020072/sean-cline"}, "edited": false, "score": 2, "creation_date": 1485357426, "post_id": 41854922, "comment_id": 70893951, "body": "You&#39;re only plotting in increments of <code>1</code>. Try incrementing by a smaller number to get more points on the curve. You can change your loop to <code>for (float x = -50.0f; x &lt; 50.0f; x+=.25f)</code> as a quick test."}, {"owner": {"reputation": 61, "user_id": 5852191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97abf0909ce3969f1d3661b64be2d6e0?s=128&d=identicon&r=PG&f=1", "display_name": "billy606", "link": "https://stackoverflow.com/users/5852191/billy606"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1485357584, "post_id": 41854922, "comment_id": 70894069, "body": "@SimonKraemer I just tried and it doesn&#39;t seem to be having an effect."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5852191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97abf0909ce3969f1d3661b64be2d6e0?s=128&d=identicon&r=PG&f=1", "display_name": "billy606", "link": "https://stackoverflow.com/users/5852191/billy606"}, "edited": false, "score": 0, "creation_date": 1485357854, "post_id": 41855047, "comment_id": 70894273, "body": "Haha I tried the first option earlier but my code was not working. But @SeanCline seemed to fix this issue with his for loop."}, {"owner": {"reputation": 61, "user_id": 5852191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97abf0909ce3969f1d3661b64be2d6e0?s=128&d=identicon&r=PG&f=1", "display_name": "billy606", "link": "https://stackoverflow.com/users/5852191/billy606"}, "edited": false, "score": 0, "creation_date": 1485357904, "post_id": 41855047, "comment_id": 70894303, "body": "Thankyou for the link on bezier curves though. I&#39;ll research into them."}, {"owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "edited": false, "score": 1, "creation_date": 1485358915, "post_id": 41855047, "comment_id": 70895049, "body": "Using Bezier Curves doesn&#39;t make any sense here, because rather than interpolating points between you should just use your actual formula. You&#39;ll have to calculate/draw the vertices anyway, so just do it right straight away.."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "edited": false, "score": 0, "creation_date": 1485359165, "post_id": 41855047, "comment_id": 70895225, "body": "@Mario: true, more points from the original formula can always generated with more resolution. For some reason I was thinking of an unrelated situations where the points are already given. Updating the answer."}, {"owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "edited": false, "score": 0, "creation_date": 1485359227, "post_id": 41855047, "comment_id": 70895274, "body": "Yeah, it makes sense, if you&#39;d have n points and should show a graph for them."}, {"owner": {"reputation": 143, "user_id": 3374794, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/81bfe4f2334b22c489ce1dedab3de39a?s=128&d=identicon&r=PG&f=1", "display_name": "tomalbrc", "link": "https://stackoverflow.com/users/3374794/tomalbrc"}, "edited": false, "score": 0, "creation_date": 1533042600, "post_id": 41855047, "comment_id": 90193646, "body": "Side question: Why construct the parameters inside a lambda? Seems unnecessarily complex, please someone explain"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 143, "user_id": 3374794, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/81bfe4f2334b22c489ce1dedab3de39a?s=128&d=identicon&r=PG&f=1", "display_name": "tomalbrc", "link": "https://stackoverflow.com/users/3374794/tomalbrc"}, "edited": false, "score": 1, "creation_date": 1533289363, "post_id": 41855047, "comment_id": 90302082, "body": "@defense2000x: it allows you to mark <code>my_params</code> as <code>const</code>."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 3, "last_activity_date": 1485359523, "last_edit_date": 1495539952, "creation_date": 1485357165, "answer_id": 41855047, "question_id": 41854922, "link": "https://stackoverflow.com/questions/41854922/drawing-a-smooth-curve-in-sfml/41855047#41855047", "title": "Drawing a smooth curve in SFML", "body": "<p>The easiest option is to increase the resolution of the lines - i.e. have <strong>more</strong>, <strong>smaller</strong> lines. This is simple to achieve and may be acceptable for your use case.</p>\n\n<p><a href=\"https://stackoverflow.com/users/1020072/sean-cline\">Sean Cline</a>'s example in the comments should be a good starting point:</p>\n\n<pre><code>for (float x = -50.0f; x &lt; 50.0f; x += .25f)\n{\n    curve.append(Vertex(Vector2f(x,- sin(x))));\n}\n</code></pre>\n\n<p>You can then easily generalize the <em>range</em> and <em>step</em> and play around with the values:</p>\n\n<pre><code>float min_range = -200.f;\nfloat max_range = 200.f;\nfloat step = 0.5f;\n\nfor (float x = min_range; x &lt; max_range ; x += step)\n{\n    curve.append(Vertex(Vector2f(x,- sin(x))));\n}\n</code></pre>\n\n<p>Finally, you can abstract this away behind a nice interface:</p>\n\n<pre><code>using precision = float;\n\nstruct plot_params\n{\n    precision _min_range;\n    precision _max_range;\n    precision _step;\n};\n\ntemplate &lt;typename TFunction&gt;\nauto plot(const plot_params pp, TFunction&amp;&amp; f)\n{\n    assert(pp._min_range &lt;= pp._max_range);\n    assert(pp._step &gt; 0.f);\n\n    VertexArray curve(PrimitiveType::LineStrip, \n        std::ceil((pp._max_range - pp._min_range) / pp._step);\n\n    for (auto x = pp._min_range; x &lt; pp._max_range; x += pp._step)\n    {\n        curve.append(Vertex(f(x)));\n    }\n}\n</code></pre>\n\n<p>And you can use <code>plot</code> as follows:</p>\n\n<pre><code>const auto my_params = []\n{\n    plot_params pp;\n    pp._min_range = -200.f;\n    pp._max_range = 200.f;\n    pp._step = 0.5f;\n    return pp;\n})();\n\nauto curve = plot(my_params, \n                  [](auto x){ return Vector2f(x,- sin(x)); });\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5852191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97abf0909ce3969f1d3661b64be2d6e0?s=128&d=identicon&r=PG&f=1", "display_name": "billy606", "link": "https://stackoverflow.com/users/5852191/billy606"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3621, "favorite_count": 3, "accepted_answer_id": 41855047, "answer_count": 1, "score": 1, "last_activity_date": 1485359523, "creation_date": 1485356823, "last_edit_date": 1485357161, "question_id": 41854922, "link": "https://stackoverflow.com/questions/41854922/drawing-a-smooth-curve-in-sfml", "title": "Drawing a smooth curve in SFML", "body": "<p>I am building a program in C++ using the SFML library which plots mathematical functions such as f(x)=sin(x). The code used to plot the points is:</p>\n\n<pre><code>VertexArray curve(PrimitiveType::LineStrip, 100);\nfor (int x = -50; x &lt; 50; x++)\n{\n    curve.append(Vertex(Vector2f(x,- sin(x))));\n}\n</code></pre>\n\n<p>This code produces this plot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2w90k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2w90k.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see the plot is not smooth and is made up of short lines due to sf::Linestrip. Is there a way to ( in SFML ) make this plot smoother ( e.g by shortening the line segments )?\nAny feedback is much appreciated : ).</p>\n"}, {"tags": ["c++", "debugging", "clion"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1485356670, "post_id": 41854840, "comment_id": 70893415, "body": "Don&#39;t post links to images of text. Copy-paste the actual text, as text, into the question body instead. Please  <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>, and learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485356812, "post_id": 41854840, "comment_id": 70893516, "body": "As for your problem, what version of Clion are you using? I remember there being some problems with <code>std::string</code> in the debugger view in early versions, but that&#39;s been fixed for quite some time now."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1485356858, "post_id": 41854840, "comment_id": 70893550, "body": "non const <code>char*</code> to string literals are deprecated ( to stop you trying to modify the string literal ), try <code>const char* f =&quot;RBYG&quot;;</code>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485356975, "post_id": 41854840, "comment_id": 70893632, "body": "Lastly, you definitely need to read <a href=\"http://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\">Why should I not #include &lt;bits/stdc++.h&gt;?</a>."}, {"owner": {"reputation": 51, "user_id": 7461124, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OtptfYTAwQs/AAAAAAAAAAI/AAAAAAAAAH0/2PfMFEdBmaI/photo.jpg?sz=128", "display_name": "mohamed ahmed", "link": "https://stackoverflow.com/users/7461124/mohamed-ahmed"}, "edited": false, "score": 0, "creation_date": 1485357066, "post_id": 41854840, "comment_id": 70893699, "body": "i use version: 2016.3.2 i think it is the latest one."}, {"owner": {"reputation": 51, "user_id": 7461124, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OtptfYTAwQs/AAAAAAAAAAI/AAAAAAAAAH0/2PfMFEdBmaI/photo.jpg?sz=128", "display_name": "mohamed ahmed", "link": "https://stackoverflow.com/users/7461124/mohamed-ahmed"}, "edited": false, "score": 0, "creation_date": 1485357138, "post_id": 41854840, "comment_id": 70893745, "body": "i can watch char*f the problem is with y i can;t watch it"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485357330, "post_id": 41854840, "comment_id": 70893882, "body": "I can replicate it. It must be a bug, and as such I recommend you go to <a href=\"https://youtrack.jetbrains.com/issues/CPP\" rel=\"nofollow noreferrer\">the Clion bug-tracker</a>, search for it (to see if it have already been reported), and if not then add it. If it has been reported then +1 the existing issue."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1485357436, "post_id": 41854840, "comment_id": 70893964, "body": "Also please forgive the first part of my first comment, because the text (the code) is not really relevant in this case. The image is fine in this case. Though remember it for future questions. :)"}, {"owner": {"reputation": 51, "user_id": 7461124, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OtptfYTAwQs/AAAAAAAAAAI/AAAAAAAAAH0/2PfMFEdBmaI/photo.jpg?sz=128", "display_name": "mohamed ahmed", "link": "https://stackoverflow.com/users/7461124/mohamed-ahmed"}, "edited": false, "score": 0, "creation_date": 1485357616, "post_id": 41854840, "comment_id": 70894091, "body": "no problem i will report for the bug and thanks for your help"}], "answers": [{"comments": [{"owner": {"reputation": 331, "user_id": 4112564, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-d69JBTlwQKo/AAAAAAAAAAI/AAAAAAAAAIs/26VgUT-LEnE/photo.jpg?sz=128", "display_name": "krishna chaitanya ", "link": "https://stackoverflow.com/users/4112564/krishna-chaitanya"}, "edited": false, "score": 1, "creation_date": 1566062417, "post_id": 41892060, "comment_id": 101541259, "body": "Hey Eldar! Thanks for the answer. Is there any other way I could get around the same problem without using -D_GLIBCXX_USE_CXX11_ABI=0. As I use one of the libraries compiled using -D_GLIBCXX_USE_CXX11_ABI=1, my compiled program crashes before the start giving segmentation fault. Thanks in advance!"}, {"owner": {"reputation": 21085, "user_id": 545027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21ce7cc444ade42934ed328b64748752?s=128&d=identicon&r=PG", "display_name": "Eldar Abusalimov", "link": "https://stackoverflow.com/users/545027/eldar-abusalimov"}, "reply_to_user": {"reputation": 331, "user_id": 4112564, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-d69JBTlwQKo/AAAAAAAAAAI/AAAAAAAAAIs/26VgUT-LEnE/photo.jpg?sz=128", "display_name": "krishna chaitanya ", "link": "https://stackoverflow.com/users/4112564/krishna-chaitanya"}, "edited": false, "score": 0, "creation_date": 1566218197, "post_id": 41892060, "comment_id": 101575493, "body": "@krishnachaitanya not that I am aware of, unfortunately."}, {"owner": {"reputation": 6067, "user_id": 517073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/917ead48eb4ab8bcedbb454977143e60?s=128&d=identicon&r=PG", "display_name": "Stepan Yakovenko", "link": "https://stackoverflow.com/users/517073/stepan-yakovenko"}, "edited": false, "score": 0, "creation_date": 1588709618, "post_id": 41892060, "comment_id": 109002709, "body": "this advice doen&#39;t help, because i get link errors with opencv using this flag"}], "tags": [], "owner": {"reputation": 21085, "user_id": 545027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21ce7cc444ade42934ed328b64748752?s=128&d=identicon&r=PG", "display_name": "Eldar Abusalimov", "link": "https://stackoverflow.com/users/545027/eldar-abusalimov"}, "is_accepted": true, "score": 6, "last_activity_date": 1485513729, "creation_date": 1485513729, "answer_id": 41892060, "question_id": 41854840, "link": "https://stackoverflow.com/questions/41854840/var-create-unable-to-create-variable-object/41892060#41892060", "title": "var-create unable to create variable object", "body": "<p>Just in case, the issue is now tracked as <a href=\"https://youtrack.jetbrains.com/issue/CPP-8693\" rel=\"noreferrer\">CPP-8693</a>.</p>\n\n<p>The root cause is somehow related to libstdc++ <a href=\"https://gcc.gnu.org/onlinedocs/libstdc%2B%2B/manual/using_dual_abi.html\" rel=\"noreferrer\">dual ABI</a>. \nGlobal symbols of <code>std::string</code> types are mangled differently, which in turn confuses GDB.</p>\n\n<blockquote>\n  <p>In the GCC 5.1 release libstdc++ introduced a new library ABI that includes new implementations of <code>std::string</code> and <code>std::list</code>. These changes were necessary to conform to the 2011 C++ standard which forbids Copy-On-Write strings and requires lists to keep track of their size.</p>\n</blockquote>\n\n<p>Given the following code:</p>\n\n<pre><code>std::string global_var = \"Hi there!\";\nstatic std::string static_var = \"Hello\";\n</code></pre>\n\n<p>Here's the related <code>nm</code> output:</p>\n\n<pre><code>0000000000602240 B _Z10global_varB5cxx11\n0000000000602280 b _ZL10static_var\n</code></pre>\n\n<p>A possible <strong>workaround</strong> is to disable C++11 ABI. In CMakeLists.txt, add the following line, right after the <code>set(CMAKE_CXX_STANDARD 11)</code> line, if any:</p>\n\n<pre><code>add_definitions(-D_GLIBCXX_USE_CXX11_ABI=0)\n</code></pre>\n\n<p>This makes symbol names to be mangled differently, in a way GDB is happy again:</p>\n\n<pre><code>0000000000602238 B global_var\n0000000000602248 b _ZL10static_var\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7461124, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OtptfYTAwQs/AAAAAAAAAAI/AAAAAAAAAH0/2PfMFEdBmaI/photo.jpg?sz=128", "display_name": "mohamed ahmed", "link": "https://stackoverflow.com/users/7461124/mohamed-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11722, "favorite_count": 0, "accepted_answer_id": 41892060, "answer_count": 1, "score": 3, "last_activity_date": 1572289332, "creation_date": 1485356567, "last_edit_date": 1572289332, "question_id": 41854840, "link": "https://stackoverflow.com/questions/41854840/var-create-unable-to-create-variable-object", "title": "var-create unable to create variable object", "body": "<p>When I debug c++ (in clion), I can't watch <b>global strings</b>. I tried to check other types but it worked well.</p>\n\n<p>Also, I tried <b>local</b> string and I can watch it too?!</p>\n\n<p><img src=\"https://i.stack.imgur.com/Np1vd.png\" alt=\"this is a screenshot of the program\"></p>\n"}, {"tags": ["c++", "boost", "boost-log"], "answers": [{"tags": [], "owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "is_accepted": false, "score": 2, "last_activity_date": 1485421495, "creation_date": 1485421495, "answer_id": 41869957, "question_id": 41854774, "link": "https://stackoverflow.com/questions/41854774/c-boost-log-positionalindexed-format-alignment/41869957#41869957", "title": "c++ boost log positional(indexed) format alignment", "body": "<p>Currently, <code>expressions::format</code> in Boost.Log supports only positional placeholders in the form of <code>%N%</code>. This format does not allow additional parameters, such as width or precision. Mostly, this is because this formatter inserts already formatted strings into the format template, so most of the parameters cannot be applied at this point.</p>\n\n<p>However, you can achieve what you want by modifying the arguments to <code>format</code>. You can use the combination of the <a href=\"http://www.boost.org/doc/libs/1_63_0/libs/log/doc/html/log/detailed/expressions.html#log.detailed.expressions.formatters.decorators.max_size\" rel=\"nofollow noreferrer\"><code>max_size_decor</code></a> decorator and <code>std::setw</code> manipulator to achieve the effect of a fixed width of each of the columns in the log output.</p>\n\n<pre><code>add_file_log(\n    ...,\n    keywords::format =\n    expressions::format(\"[%1%] [%2%] [%3%] [%4%] %5%\")\n        % expressions::max_size_decor&lt; char &gt;(30)[ expressions::stream &lt;&lt; std::setw(30) &lt;&lt; expressions::format_date_time&lt; boost::posix_time::ptime &gt;(\"TimeStamp\", \"%Y-%m-%d %H:%M:%S.%f\") ]\n        % expressions::max_size_decor&lt; char &gt;(10)[ expressions::stream &lt;&lt; std::setw(10) &lt;&lt; expressions::attr&lt;unsigned int&gt;(\"ThreadID\") ]\n        % expressions::max_size_decor&lt; char &gt;(20)[ expressions::stream &lt;&lt; std::setw(20) &lt;&lt; expressions::attr&lt;string&gt;(\"Scope\") ]\n        % expressions::max_size_decor&lt; char &gt;(5)[ expressions::stream &lt;&lt; std::setw(5) &lt;&lt; trivial::severity ]\n        % expressions::smessage\n);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5682194, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206331354695932/picture?type=large", "display_name": "Eli Sikuriansky", "link": "https://stackoverflow.com/users/5682194/eli-sikuriansky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1485421495, "creation_date": 1485356369, "question_id": 41854774, "link": "https://stackoverflow.com/questions/41854774/c-boost-log-positionalindexed-format-alignment", "title": "c++ boost log positional(indexed) format alignment", "body": "<p>Im trying to format the boost log output such that a field of choice will always be of a specific width for output log alignment reasons.</p>\n\n<pre><code>add_file_log(\n        keywords::file_name = s.str(),\n        keywords::rotation_size = log_info.log_file_size,\n        keywords::max_size = log_info.log_file_amount * log_info.log_file_size,\n        keywords::target = log_info.log_path,\n        keywords::open_mode = std::ios::out | std::ios::app,\n        keywords::auto_flush = true,\n        keywords::format =\n        expressions::format(\"[%1%] [%2%] [%3%] [%4%] %5%\")\n        % expressions::format_date_time&lt; boost::posix_time::ptime &gt;(\"TimeStamp\", \"%Y-%m-%d %H:%M:%S.%f\")\n        % expressions::attr&lt;unsigned int&gt;(\"ThreadID\")\n        % expressions::attr&lt;string&gt;(\"Scope\")\n        % trivial::severity\n        % expressions::smessage\n    );\n</code></pre>\n\n<p>I've tried different formats such as </p>\n\n<ul>\n<li>\"[%1%] [%2%] [%3%] [%|20t|%4%] %5%\"</li>\n<li>\"[%1%] [%2%] [%3%] [%-20s] %5%\"</li>\n<li>trivial::severity &lt;&lt; std::setw(20)</li>\n</ul>\n\n<p>Many of my attempts threw the following error:</p>\n\n<pre><code>&gt; Caught Exception in cyacollector main. Error: Unsupported format\n&gt; placeholder\n</code></pre>\n"}]